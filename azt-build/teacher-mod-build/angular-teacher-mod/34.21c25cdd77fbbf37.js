(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[34],{89364:(Q,o,C)=>{"use strict";C.d(o,{Z:()=>y});var i=C(48891);let y=(()=>{var M;class U{constructor(S){this.el=S,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=S.nativeElement}ngOnChanges(S){if(S.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),S.min){const _=Number(this.min);this.min=isNaN(_)?-1/0:_}if(S.max){const _=Number(this.max);this.max=isNaN(_)?1/0:_}}onBeforeInput(S){if(isNaN(Number(S.data))){if(S.data===this.decimalSeparator1||S.data===this.decimalSeparator2||S.data===this.negativeSign&&this.allowNegatives)return;S.preventDefault(),S.stopPropagation()}}onKeyDown(S){if(this.navigationKeys.indexOf(S.key)>-1||("a"===S.key||"KeyA"===S.code)&&!0===S.ctrlKey||("c"===S.key||"KeyC"===S.code)&&!0===S.ctrlKey||("v"===S.key||"KeyV"===S.code)&&!0===S.ctrlKey||("x"===S.key||"KeyX"===S.code)&&!0===S.ctrlKey||("a"===S.key||"KeyA"===S.code)&&!0===S.metaKey||("c"===S.key||"KeyC"===S.code)&&!0===S.metaKey||("v"===S.key||"KeyV"===S.code)&&!0===S.metaKey||("x"===S.key||"KeyX"===S.code)&&!0===S.metaKey)return;let _="";var F=S.key;if(S.key===this.decimalSeparator2&&(F=this.decimalSeparator1),this.decimal&&F===this.decimalSeparator1)return _=this.forecastValue(F),_.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=_.indexOf(this.decimalSeparator1)>-1,this.setNewValue(F)),void S.preventDefault();if(F===this.negativeSign&&this.allowNegatives)return _=this.forecastValue(F),_.charAt(0)!==this.negativeSign||_.split(this.negativeSign).length>2?void S.preventDefault():void(this.hasNegativeSign=_.split(this.negativeSign).length>-1);if(" "===F||isNaN(Number(F)))return void S.preventDefault();if(_=_||this.forecastValue(F),this.regex&&!this.regex.test(_))return void S.preventDefault();const N=Number(_);(N>this.max||N<this.min)&&S.preventDefault()}onPaste(S){if(!0===this.allowPaste){let _="";window.clipboardData?_=window.clipboardData.getData("text"):S.clipboardData&&S.clipboardData.getData&&(_=S.clipboardData.getData("text/plain")),this.pasteData(_),S.preventDefault()}else S.preventDefault(),S.stopPropagation()}onDrop(S){const _=S.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(_),S.preventDefault()}pasteData(S){S=this.replaceDecimalSeparator(S);const _=this.sanitizeInput(S);if(!_.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,_))if(this.inputElement.setRangeText){const{selectionStart:N,selectionEnd:p}=this.inputElement;this.inputElement.setRangeText(_,N??0,p??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,_);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(S){S=this.replaceDecimalSeparator(S),this.insertAtCursor(this.inputElement,S),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(S,_){const F=S.selectionStart??0,N=S.selectionEnd??0;S.value=S.value.substring(0,F)+_+S.value.substring(N,S.value.length);const p=F+_.length;S.focus(),S.setSelectionRange(p,p),this.triggerEvent(S,"input")}triggerEvent(S,_){if("createEvent"in document){const F=document.createEvent("HTMLEvents");F.initEvent(_,!1,!0),S.dispatchEvent(F)}}sanitizeInput(S){let F,_="";F=this.decimal&&this.isValidDecimal(S)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),_=S.replace(F,"");const N=this.inputElement.maxLength;if(N>0){const p=N-this.inputElement.value.length+(_.includes(`${this.negativeSign}`)?1:0);_=p>0?_.substring(0,p):""}return _}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(S){if(this.hasDecimalPoint){const _=this.getSelection();return _&&_.indexOf(this.decimalSeparator1)>-1?S.split(this.decimalSeparator1).length<=2:S.indexOf(this.decimalSeparator1)<0}return S.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(S){const F=this.inputElement.selectionEnd??0,N=this.inputElement.value;return N.substring(0,this.inputElement.selectionStart??0)+S+N.substring(F)}replaceDecimalSeparator(S){return S.replace(",",this.decimalSeparator).replace(".",this.decimalSeparator)}}return(M=U).\u0275fac=function(S){return new(S||M)(i.rXU(i.aKT))},M.\u0275dir=i.FsC({type:M,selectors:[["","appOnlyNumber",""]],hostBindings:function(S,_){1&S&&i.bIt("beforeinput",function(N){return _.onBeforeInput(N)})("keydown",function(N){return _.onKeyDown(N)})("paste",function(N){return _.onPaste(N)})("drop",function(N){return _.onDrop(N)})},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},standalone:!0,features:[i.OA$]}),U})()},52102:(Q,o,C)=>{"use strict";C.d(o,{t:()=>U});var i=C(43234),y=C(48891),M=C(63873);let U=(()=>{var D;class S{constructor(F){this.configService=F}getCurrentVersion(){return i.c.versionTime}getGlobalNotice(){return this.configService.getConfig("globalNotice")}getEnvValue(F){return this.configService.getConfig(F)}getLinkEmbedDocument(F){var N=this.configService.getConfig("docView");return N&&"MICROSOFT"!=N?`https://docs.google.com/viewer?url=${F}&embedded=true`:`https://view.officeapps.live.com/op/embed.aspx?src=${F}`}getVersionMarkNote(F){if(!F)return 1000009;const I=F.match(/ver=(\d+)/);return Number(I?.[1]??1000009)}}return(D=S).\u0275fac=function(F){return new(F||D)(y.KVO(M.u))},D.\u0275prov=y.jDH({token:D,factory:D.\u0275fac,providedIn:"root"}),S})()},52824:(Q,o,C)=>{"use strict";C.d(o,{k:()=>D});var i=C(56201),y=C(37439),M=C(48891),U=C(21164);let D=(()=>{var S;class _{getMineTypeByFileType(N){let I="";switch(this.commonService.getEnumTypeWithDefault(y.d,N,y.d.unknown)){case y.d.doc:case y.d.docx:I="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case y.d.ppt:case y.d.pptx:I="application/vnd.openxmlformats-officedocument.presentationml.presentation";break;case y.d.xlsx:I="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case y.d.pdf:I="application/pdf";break;case y.d.video:case y.d.mp4:I="video/mp4";break;case y.d.mov:I="video/mov";break;case y.d.webm:I="video/webm";break;case y.d.quicktime:I="video/quicktime";break;case y.d.audio:I="audio/mpeg";break;case y.d.mp3:I="audio/mp3";break;case y.d.wav:I="audio/wav";break;case y.d.jpeg:case y.d.image:I="image/jpeg";break;case y.d.google_docs:I="google_docs"}return I}getMineTypeByExtension(N){switch(new RegExp(/(?:\.([^.]+))?$/).exec(N)?.[1]){case"pdf":return"application/pdf";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xsl":case"csv":return"application/vnd.ms-excel";case"jpg":return"image/jpg";case"jpge":return"image/jpge";default:return"application/json-patch+json"}}getTypeFileByMime(N){return N.mimes&&(0,i.I7)(N.mimes)||N.name?.toLowerCase().endsWith(".azt")?y.d.docx:N.mimes&&(0,i.nL)(N.mimes)?y.d.xlsx:N.mimes&&(0,i.JK)(N.mimes)?y.d.audio:N.mimes&&(0,i.cZ)(N.mimes)?y.d.video:N.mimes&&(0,i.wu)(N.mimes)?y.d.image:N.mimes&&(0,i.Ev)(N.mimes)?y.d.pdf:N.mimes&&(0,i.rl)(N.mimes)?y.d.powerpoint:void 0}constructor(N){this.commonService=N}}return(S=_).\u0275fac=function(N){return new(N||S)(M.KVO(U.R))},S.\u0275prov=M.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),_})()},93132:(Q,o,C)=>{"use strict";C.d(o,{n:()=>M});var i=C(48891),y=C(21164);let M=(()=>{var U;class D{resizeDrawerHeight(_,F){if(this.autoResizeHeight=_,this.drawer=F,this.drawer&&this.autoResizeHeight){let N=()=>{let W=document.querySelector(".azt-drawer-content"),v=document.querySelector(".azt-draw-left");if(v&&v instanceof HTMLElement&&W&&W instanceof HTMLElement){let L=W;L.style.minHeight=this.isOpenSideNav?v.clientHeight+10+"px":"auto"}},p=new ResizeObserver(W=>{N()}),I=document.querySelector(".azt-draw-left");I&&p.observe(I),N()}}openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1}toggleDrawer(){this.drawer?.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openedChange(_){this.isOpenSideNav=_,this.resizeDrawerHeight(this.autoResizeHeight)}changeToMobileMode(_){_?(this.mode="over",this.hasBackdrop=!0):(this.mode="side",this.hasBackdrop=!1)}constructor(_){this.commonService=_,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.autoResizeHeight=!1}}return(U=D).\u0275fac=function(_){return new(_||U)(i.KVO(y.R))},U.\u0275prov=i.jDH({token:U,factory:U.\u0275fac,providedIn:null}),D})()},37439:(Q,o,C)=>{"use strict";C.d(o,{d:()=>i});var i=function(y){return y.unknown="unknown",y.xlsx="xlsx",y.image="image",y.jpeg="jpeg",y.doc="doc",y.docx="docx",y.ppt="ppt",y.pptx="pptx",y.pdf="pdf",y.video="video",y.mp4="mp4",y.mov="mov",y.webm="webm",y.quicktime="quicktime",y.audio="audio",y.mp3="mp3",y.wav="wav",y.google_docs="google_docs",y.exam="exam",y.homework="homework",y.powerpoint="powerpoint",y}(i||{})},92118:(Q,o,C)=>{"use strict";C.d(o,{L:()=>v});var i=C(54460),y=C(48891),M=C(10936),U=C(65162),D=C(44327),S=C(55887),_=C(88023),F=C(15343),N=C(5502),p=C(44155),I=C(52102),W=C(96639);let v=(()=>{var L;class A extends _.H{onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}checkValidLink(){this.whiteListOfficeIframeSrc=this.envService.getLinkEmbedDocument(this.cdnLink)}ngOnChanges(){this.checkValidLink()}ngOnInit(){super.ngOnInit(),this.checkValidLink()}constructor(k){super(),this.envService=k,this.videoMimesType="",this.classNames="",this.styles="",this.loadedEvent=new y.bkB,this.whiteListOfficeIframeSrc=""}}return(L=A).\u0275fac=function(k){return new(k||L)(y.rXU(I.t))},L.\u0275cmp=y.VBU({type:L,selectors:[["azt-office-embed"]],inputs:{cdnLink:"cdnLink",videoMimesType:"videoMimesType",classNames:"classNames",styles:"styles"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[y.Vt3,y.OA$,y.aNF],decls:2,vars:6,consts:[["frameborder","0",3,"load","src"]],template:function(k,E){1&k&&(y.j41(0,"iframe",0),y.nI1(1,"safe"),y.bIt("load",function(){return E.onLoad()}),y.k0s()),2&k&&(y.HbH(E.classNames),y.Y8G("src",y.bMT(1,4,E.whiteListOfficeIframeSrc),y.f$h),y.BMQ("style",E.styles,y.$dS))},dependencies:[i.MD,M.X1,U.iI,M.YN,p.s,F.flO,S.L,W.JI,N.Id,D.k],encapsulation:2}),A})()},27552:(Q,o,C)=>{"use strict";C.d(o,{V:()=>s});var i=C(54460),y=C(10936),M=C(89163),U=C(65162),D=C(40116),S=C(44327),_=C(96639),F=C(55887),N=C(56201),p=C(48891),I=C(88023),W=C(15343),v=C(5502),L=C(44155);let A=(()=>{var r;class g extends I.H{constructor(){super(...arguments),this.audioMimesType="",this.loadedEvent=new p.bkB}onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}}return(r=g).\u0275fac=(()=>{let u;return function(O){return(u||(u=p.xGo(r)))(O||r)}})(),r.\u0275cmp=p.VBU({type:r,selectors:[["azt-audio-embed"]],inputs:{cdnLink:"cdnLink",audioMimesType:"audioMimesType"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[p.Vt3,p.aNF],decls:3,vars:2,consts:[["controls",""],[3,"load","src"]],template:function(c,O){1&c&&(p.j41(0,"audio",0)(1,"source",1),p.bIt("load",function(){return O.onLoad()}),p.k0s(),p.EFF(2," Your browser does not support the audio element.\n"),p.k0s()),2&c&&(p.R7$(),p.Y8G("src",O.cdnLink,p.B4B),p.BMQ("type",O.audioMimesType))},dependencies:[i.MD,y.X1,U.iI,y.YN,L.s,W.flO,F.L,v.Id,S.k],encapsulation:2}),g})();var w=C(92118),k=C(43177),E=C(75498),n=C(13763),t=C(37439),d=C(86388),f=C(11601);const l=r=>({flex:r});function b(r,g){1&r&&(p.j41(0,"div",3)(1,"span",4),p.nrm(2,"azt-loading-ui"),p.k0s(),p.j41(3,"span",5),p.EFF(4,"Loading..."),p.k0s()())}function m(r,g){if(1&r&&(p.j41(0,"span"),p.EFF(1),p.nI1(2,"mytranslate"),p.k0s()),2&r){const u=p.XpG(3);p.R7$(),p.Lme("",p.bMT(2,2,"lang_auto_dung_luong"),": ",u.fileMb," MB |")}}function h(r,g){if(1&r&&(p.j41(0,"div",20),p.DNE(1,m,3,4,"span",21),p.EFF(2),p.nI1(3,"mytranslate"),p.k0s()),2&r){const u=p.XpG(2);p.R7$(),p.Y8G("ngIf",0!=u.fileMb),p.R7$(),p.Lme(" ",p.bMT(3,3,"lang_auto_loai"),": ",u.fileOption.mimes," ")}}function x(r,g){1&r&&(p.j41(0,"div",20),p.EFF(1),p.nI1(2,"mytranslate"),p.k0s()),2&r&&(p.R7$(),p.JRh(p.bMT(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function R(r,g){if(1&r&&(p.j41(0,"a",22),p.nrm(1,"lucide-icon",23),p.k0s()),2&r){const u=p.XpG(2);p.BMQ("href",u.rootLink,p.B4B)("download",u.fileOption.name)}}function V(r,g){if(1&r){const u=p.RV6();p.j41(0,"azt-audio-embed",30),p.bIt("onLoad",function(){p.eBV(u);const O=p.XpG(4);return p.Njj(O.onLoad())}),p.k0s()}if(2&r){let u;const c=p.XpG(4);p.Y8G("cdnLink",c.cdnLink)("audioMimesType",null!==(u=c.fileOption.mimes)&&void 0!==u?u:"")}}function z(r,g){if(1&r&&(p.j41(0,"div")(1,"div",28),p.DNE(2,V,1,2,"azt-audio-embed",29),p.k0s()()),2&r){const u=p.XpG(3);p.R7$(2),p.Y8G("ngIf",u.cdnLink)}}function J(r,g){if(1&r){const u=p.RV6();p.j41(0,"div")(1,"div",31)(2,"azt-video-embed",32),p.bIt("loadedEvent",function(){p.eBV(u);const O=p.XpG(3);return p.Njj(O.onLoad())}),p.k0s()()()}if(2&r){let u;const c=p.XpG(3);p.R7$(2),p.Y8G("cdnLink",c.cdnLink)("videoMimesType",null!==(u=c.fileOption.mimes)&&void 0!==u?u:"")("videoThumbUrl",c.videoThumbUrl)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function X(r,g){if(1&r){const u=p.RV6();p.j41(0,"div")(1,"div",33)(2,"azt-office-embed",34),p.bIt("loadedEvent",function(){p.eBV(u);const O=p.XpG(3);return p.Njj(O.onLoad())}),p.k0s()()()}if(2&r){const u=p.XpG(3);p.R7$(2),p.Y8G("cdnLink",u.cdnLink)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function oe(r,g){if(1&r){const u=p.RV6();p.j41(0,"div")(1,"div",35)(2,"pdf-viewer",36),p.bIt("load",function(){p.eBV(u);const O=p.XpG(3);return p.Njj(O.onLoad())}),p.k0s()()()}if(2&r){const u=p.XpG(3);p.R7$(2),p.Y8G("src",u.cdnLink)("show-all",!0)}}function de(r,g){if(1&r){const u=p.RV6();p.j41(0,"div")(1,"div",31)(2,"img",37),p.bIt("load",function(){p.eBV(u);const O=p.XpG(3);return p.Njj(O.onLoad())}),p.k0s()()()}if(2&r){const u=p.XpG(3);p.R7$(2),p.BMQ("src",u.cdnLink,p.B4B)}}function he(r,g){if(1&r&&(p.j41(0,"div")(1,"div",31),p.nrm(2,"iframe",38),p.nI1(3,"safe"),p.k0s()()),2&r){const u=p.XpG(3);p.R7$(2),p.HbH("mx-auto"),p.Y8G("src",p.bMT(3,3,u.cdnLink),p.f$h)}}function B(r,g){if(1&r&&(p.qex(0),p.j41(1,"div",24)(2,"div",25),p.DNE(3,z,3,1,"div",21)(4,J,3,4,"div",21)(5,X,3,2,"div",21)(6,oe,3,2,"div",21)(7,de,3,1,"div",21)(8,he,4,5,"div",21),p.nrm(9,"div",26),p.k0s(),p.nrm(10,"div",27),p.k0s(),p.bVm()),2&r){const u=p.XpG(2);p.R7$(3),p.Y8G("ngIf","audio"===u.typeFile),p.R7$(),p.Y8G("ngIf","video"===u.typeFile),p.R7$(),p.Y8G("ngIf","officeapps"===u.typeFile),p.R7$(),p.Y8G("ngIf","pdf"===u.typeFile),p.R7$(),p.Y8G("ngIf","image"===u.typeFile),p.R7$(),p.Y8G("ngIf","google_docs"===u.typeFile)}}function a(r,g){if(1&r){const u=p.RV6();p.j41(0,"div",24)(1,"div",25)(2,"div",39)(3,"img",40),p.bIt("load",function(){p.eBV(u);const O=p.XpG(2);return p.Njj(O.onLoad())}),p.k0s()()()()}if(2&r){const u=p.XpG(2);p.R7$(3),p.BMQ("src",u.fileOption.url,p.B4B)}}function e(r,g){if(1&r){const u=p.RV6();p.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),p.nrm(4,"div",10),p.nI1(5,"coreModConvertCdnLinkOfGitHub"),p.k0s(),p.j41(6,"div",11),p.EFF(7),p.k0s(),p.DNE(8,h,4,5,"div",12)(9,x,3,3,"div",12),p.k0s(),p.j41(10,"div",13)(11,"span",14),p.DNE(12,R,2,2,"a",15),p.k0s(),p.j41(13,"button",16),p.bIt("click",function(){p.eBV(u);const O=p.XpG();return p.Njj(O.btnClosePreview())}),p.nrm(14,"lucide-icon",17),p.k0s()()(),p.j41(15,"div",18),p.DNE(16,B,11,6,"ng-container",19)(17,a,4,1,"ng-template",null,0,p.C5r),p.k0s()()}if(2&r){const u=p.sdS(18),c=p.XpG();p.R7$(2),p.Y8G("ngClass",p.eq3(11,l,""==c.fileOption.name)),p.R7$(2),p.xc7("background-image",p.bMT(5,9,"images/documents.png")),p.R7$(3),p.JRh(c.fileOption.name),p.R7$(),p.Y8G("ngIf",c.fileOption.mimes),p.R7$(),p.Y8G("ngIf",!c.fileOption.mimes),p.R7$(3),p.Y8G("ngIf",c.showDownloadIcon),p.R7$(4),p.Y8G("ngIf",!c.viewFullImageWithScroll)("ngIfElse",u)}}let s=(()=>{var r;class g extends D._{onLoad(){this.stopStatusObj()}initData(){let c=this.fileOption?.size?Number(this.fileOption.size):0,O=this.fileOption?.mimes?this.fileOption.mimes:"";this.cdnLink=this.sAztCommonCdnService.getMyCdn(this.fileOption?.url??""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(c),this.typeFile=(0,N.yY)(O),(0,N.VJ)(this.cdnLink)&&(this.typeFile="video"),(0,N.si)(this.cdnLink)&&(this.typeFile="google_docs"),setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.dialogRef.close(!1)}getFileMB(c){return c&&c>0?(c/=1048576).toFixed(2):0}ngOnInit(){if(super.ngOnInit(),document.body.classList.add("overflow-hidden"),this.videoThumbUrl=this.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("images/video-thumb.png"),this.initStatusObj(),this.initData(),this.fileOption?.type===this.allDocumentTypes.google_docs)return window.open(this.fileOption?.url,"_blank")?.focus(),void this.dialogRef.close()}constructor(c,O,G,j){super(j,G),this.dom=c,this.sAztCommonCdnService=O,this.dialogRef=G,this.viewFullImageWithScroll=!1,this.showDownloadIcon=!0,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.allDocumentTypes=t.d,this.fileOption=j.fileOption,this.viewFullImageWithScroll=j.viewFullImageWithScroll??!1,this.showDownloadIcon=j.showDownloadIcon??this.showDownloadIcon}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return(r=g).\u0275fac=function(c){return new(c||r)(p.rXU(d.up),p.rXU(f.c),p.rXU(M.CP,8),p.rXU(M.Vh,8))},r.\u0275cmp=p.VBU({type:r,selectors:[["azt-preview-media-new"]],standalone:!0,features:[p.Vt3,p.aNF],decls:2,vars:2,consts:[["viewFullImage",""],["class","loading-block",4,"ngIf"],["class","box h-full","style","border-radius: 0px",4,"ngIf"],[1,"loading-block"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","h-full",2,"border-radius","0px"],[1,"flex","fixed","top-0","pt-3","border-b","border-slate-200/60","dark:border-darkmode-400","items-center","w-full"],[1,"file-preview__header-left",2,"align-items","center",3,"ngClass"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-size","cover"],[1,"file-preview__header__title"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"mr-4"],["class","btn btn-outline-primary btn-transparent","target","_blank",4,"ngIf"],["azt-track-service","azt-preview-media-c4Ztzr2oIZj",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["name","x","size","24"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],[1,"file-preview__header__send-time"],[4,"ngIf"],["target","_blank",1,"btn","btn-outline-primary","btn-transparent"],["name","download","size","24"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],[3,"cdnLink","audioMimesType","onLoad",4,"ngIf"],[3,"onLoad","cdnLink","audioMimesType"],[1,"pl-2","pr-2","mt-3"],[3,"loadedEvent","cdnLink","videoMimesType","videoThumbUrl","styles"],[1,"pl-2","pr-2","mp-0"],[3,"loadedEvent","cdnLink","styles"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"load","src","show-all"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],["width","850","height","600","frameborder","0","allowfullscreen","",3,"src"],[1,"pl-2","pr-2","mt-3","block-img"],[1,"img-fluid","image-preview",3,"load"]],template:function(c,O){1&c&&p.DNE(0,b,5,0,"div",1)(1,e,19,13,"div",2),2&c&&(p.Y8G("ngIf",O.statusObj.loading),p.R7$(),p.Y8G("ngIf",null!=O.fileOption&&!O.statusObj.loading))},dependencies:[n.Lk,n.c6,E.R,A,k.y,w.L,i.MD,i.YU,i.bT,y.X1,U.iI,y.YN,_.wp,_.Vs,L.s,W.flO,W.WGl,F.L,_.JI,v.Id,S.k],styles:[".file-preview[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0;border-radius:0}.block-img[_ngcontent-%COMP%]{width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),g})()},40988:(Q,o,C)=>{"use strict";C.d(o,{V:()=>n});var i=C(54460),y=C(48891),M=C(10936),U=C(65162),D=C(84255),S=C(44327),_=C(55887),F=C(75498),N=C(15343),p=C(5502),I=C(44155),W=C(25663);const v=["*"];function L(t,d){1&t&&y.SdG(0,0,["*ngIf","!isUploadFile"])}function A(t,d){if(1&t&&(y.j41(0,"div",8)(1,"h5",9),y.EFF(2),y.k0s(),y.j41(3,"div",10),y.nrm(4,"progress",11),y.k0s()()),2&t){const f=d.$implicit;y.R7$(2),y.JRh(f.fileName),y.R7$(2),y.FS9("value",f.uploadProgress)}}function w(t,d){if(1&t&&(y.qex(0),y.j41(1,"span",6),y.nrm(2,"azt-loading-ui"),y.k0s(),y.DNE(3,A,5,2,"div",7),y.bVm()),2&t){const f=y.XpG(2);y.R7$(3),y.Y8G("ngForOf",f.fileUploadQueue)}}function k(t,d){1&t&&(y.j41(0,"span",6),y.nrm(1,"azt-loading-ui"),y.k0s())}function E(t,d){if(1&t&&(y.j41(0,"div"),y.DNE(1,w,4,1,"ng-container",5)(2,k,2,0,"ng-template",null,1,y.C5r),y.k0s()),2&t){const f=y.sdS(3),l=y.XpG();y.R7$(),y.Y8G("ngIf",l.showProgress)("ngIfElse",f)}}let n=(()=>{var t;class d extends W.L{constructor(){super(...arguments),this.uploadComplete=new y.bkB}emitUploadComplete(l){this.uploadComplete.emit(l)}ngOnInit(){this.files&&this.files.length>0&&this.emitFile(this.files)}}return(t=d).\u0275fac=(()=>{let f;return function(b){return(f||(f=y.xGo(t)))(b||t)}})(),t.\u0275cmp=y.VBU({type:t,selectors:[["azt-upload-multiple-box"]],inputs:{files:"files"},outputs:{uploadComplete:"uploadComplete"},standalone:!0,features:[y.Vt3,y.aNF],ngContentSelectors:v,decls:5,vars:4,consts:[["formChoseFile",""],["notShowProgress",""],[3,"appDropZone","click"],["type","file","id","box-left-file-input","multiple","",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"w-4","h-4","inline-block","mr-2"],["class","w-48",4,"ngFor","ngForOf"],[1,"w-48"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","background-color","#1e40af",3,"value"]],template:function(l,b){if(1&l){const m=y.RV6();y.NAR(),y.j41(0,"div",2),y.bIt("appDropZone",function(x){return y.eBV(m),y.Njj(b.onDrop(x))})("click",function(){y.eBV(m);const x=y.sdS(2);return y.Njj(x.click())}),y.j41(1,"input",3,0),y.bIt("change",function(x){return y.eBV(m),y.Njj(b.onFileSelected(x))})("cancel",function(x){return y.eBV(m),y.Njj(b.onCancelSelect(x))})("cancel",function(x){return y.eBV(m),y.Njj(b.onCancelSelect(x))}),y.k0s(),y.DNE(3,L,1,0,"ng-content",4)(4,E,4,2,"div",4),y.k0s()}2&l&&(y.BMQ("class",b.containerClass),y.R7$(),y.FS9("accept",b.fileType),y.R7$(2),y.Y8G("ngIf",!b.isUploadFile),y.R7$(),y.Y8G("ngIf",b.isUploadFile))},dependencies:[D.F,F.R,i.MD,i.Sq,i.bT,M.X1,U.iI,M.YN,I.s,N.flO,_.L,p.Id,S.k],styles:['.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:10px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']}),d})()},25663:(Q,o,C)=>{"use strict";C.d(o,{L:()=>n});var i=C(73014),y=C(54460),M=C(27691),U=C(48891),D=C(10936),S=C(65162),_=C(44327),F=C(55887),N=C(88023),p=C(15343),I=C(5502),W=C(44155),v=C(56201),L=C(51753),A=C(63357),w=C(9146),k=C(32996),E=C(81098);let n=(()=>{var t;class d extends N.H{uploadFile(l,b){return new Promise(m=>{this.checkCompressImage(l,h=>{this.fileUploadQueue=[],this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,h,this.qrUploadHashCode).subscribe(x=>{if(x.type!==M.hv.UploadProgress)if(1===x.success){const R={...x.data};m(R)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",x.message??"none")),m(null);else{let R=(x.loaded??0)/(x.total??1)*100,V=this.fileUploadQueue.find(z=>z.uuid==b);V?V.uploadProgress=R:this.fileUploadQueue.push({uuid:b,uploadProgress:0,fileName:l.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,h,this.qrUploadHashCode).subscribe(x=>{if(x.type!==M.hv.UploadProgress)if(1===x.success){const R={...x.data};m(R)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",x.message??"none")),m(null)})})})}onOpenFileDictionary(){return this.uploadActionsEvent.emit("SELECT_FILE"),!0}onFileSelected(l){this.uploadActionsEvent.emit("SELECTED");const b=l.target,m=b.files;m&&(this.emitFile(m),b.files=null)}onCancelSelect(l){this.uploadActionsEvent.emit("SELECTED")}onDrop(l){this.emitFile(l)}emitFile(l){return this.isDisabled?(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(l).find(h=>(0,v.hD)(h.size)>=this.limitSize)?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB")):Array.from(l).find(h=>this.isNotSupportedFile(h))?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile)):(this.isUploadFile=!0,this.isUploading.emit(this.isUploadFile),void this.checkConvertPdfToImages(Array.from(l),h=>{const x=h.map(R=>this.uploadFile(R,this.uuidService.getUuid()));Promise.all(x).then(R=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);let V=R.filter(this.commonService.notEmpty);this.emitUploadComplete(V)})}))):this.showErrorSnack(this.commonService.translateString("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"))}checkConvertPdfToImages(l,b){if(!this.convertPdfToImages)return b(l);this.convertAllPdfToImages(l).then(m=>{b(m)})}convertAllPdfToImages(l){var b=this;return new Promise(function(){var m=(0,i.A)(function*(h,x){let R=[];for(let V of l)if((0,v.Ev)(V.type))try{const z=1e3*b.convertPdfTimeout;let J=yield b.withTimeout(b.myPdfService.getImageWithPdf(V),z);R.push(...J)}catch{b.showErrorSnack("lang_common_convert_pdf_to_image_timeout"),h([])}else R.push(V);h(R)});return function(h,x){return m.apply(this,arguments)}}())}checkCompressImage(l,b){this.allowCompressImage?(0,v.w4)(l).then(m=>{b(m)}):b(l)}isNotSupportedFile(l){const b=[this.notSupportedFile],m=l.name.split(".").pop()?.toLowerCase();return b.includes(`.${m}`)}withTimeout(l,b){return new Promise((m,h)=>{const x=setTimeout(()=>{h(new Error("Operation timed out"))},b);l.then(R=>{clearTimeout(x),m(R)}).catch(R=>{clearTimeout(x),h(R)})})}constructor(l,b,m,h){super(),this.mobileWebviewService=l,this.apiUploadService=b,this.myPdfService=m,this.uuidService=h,this.convertPdfTimeout=30,this.isDisabled=!0,this.notSupportedFile=L.Ym.NONE,this.limitSize=200,this.allowCompressImage=!0,this.convertPdfToImages=!1,this.qrUploadHashCode="",this.showProgress=!1,this.containerClass="flex items-center justify-center h-full",this.isUploading=new U.bkB,this.uploadActionsEvent=new U.bkB,this.isUploadFile=!1,this.fileUploadQueue=[]}}return(t=d).\u0275fac=function(l){return new(l||t)(U.rXU(A.f),U.rXU(w.T),U.rXU(k.C),U.rXU(E.D))},t.\u0275cmp=U.VBU({type:t,selectors:[["ng-component"]],inputs:{convertPdfTimeout:"convertPdfTimeout",fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",convertPdfToImages:"convertPdfToImages",qrUploadHashCode:"qrUploadHashCode",showProgress:"showProgress",containerClass:"containerClass"},outputs:{isUploading:"isUploading",uploadActionsEvent:"uploadActionsEvent"},standalone:!0,features:[U.Vt3,U.aNF],decls:0,vars:0,template:function(l,b){},dependencies:[y.MD,D.X1,S.iI,D.YN,W.s,p.flO,F.L,I.Id,_.k],encapsulation:2}),d})()},83876:function(module,__unused_webpack_exports,__webpack_require__){var _defineProperty=__webpack_require__(21076).default,_classPrivateMethodInitSpec=__webpack_require__(56965).default,_classPrivateFieldInitSpec=__webpack_require__(23076).default,_classPrivateFieldSet=__webpack_require__(93051).default,_classPrivateFieldGet=__webpack_require__(64647).default,_assertClassBrand=__webpack_require__(78737).default,_asyncToGenerator=__webpack_require__(80540).default,C;C=()=>(()=>{"use strict";var __webpack_modules__=[,(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.UNSUPPORTED_FEATURES=o.TextRenderingMode=o.StreamType=o.RenderingIntentFlag=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FontType=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.AnnotationType=o.AnnotationStateModelType=o.AnnotationReviewState=o.AnnotationReplyType=o.AnnotationMode=o.AnnotationMarkedState=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.arrayByteLength=j,o.arraysToBytes=function Y(ie){const H=ie.length;if(1===H&&ie[0]instanceof Uint8Array)return ie[0];let K=0;for(let ve=0;ve<H;ve++)K+=j(ie[ve]);let ue=0;const me=new Uint8Array(K);for(let ve=0;ve<H;ve++){let be=ie[ve];be instanceof Uint8Array||(be="string"==typeof be?G(be):new Uint8Array(be));const xe=be.byteLength;me.set(be,ue),ue+=xe}return me},o.assert=function X(ie,H){ie||J(H)},o.bytesToString=function O(ie){("object"!=typeof ie||null===ie||void 0===ie.length)&&J("Invalid argument for bytesToString");const H=ie.length,K=8192;if(H<K)return String.fromCharCode.apply(null,ie);const ue=[];for(let me=0;me<H;me+=K){const ve=Math.min(me+K,H),be=ie.subarray(me,ve);ue.push(String.fromCharCode.apply(null,be))}return ue.join("")},o.createPromiseCapability=function ye(){const ie=Object.create(null);let H=!1;return Object.defineProperty(ie,"settled",{get:()=>H}),ie.promise=new Promise(function(K,ue){ie.resolve=function(me){H=!0,K(me)},ie.reject=function(me){H=!0,ue(me)}}),ie},o.createValidAbsoluteUrl=function de(ie,H=null,K=null){if(!ie)return null;try{if(K&&"string"==typeof ie){if(K.addDefaultProtocol&&ie.startsWith("www.")){const me=ie.match(/\./g);me&&me.length>=2&&(ie=`http://${ie}`)}if(K.tryConvertEncoding)try{ie=ae(ie)}catch{}}const ue=H?new URL(ie,H):new URL(ie);if(function oe(ie){if(!ie)return!1;switch(ie.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(ue))return ue}catch{}return null},o.escapeString=function Z(ie){return ie.replace(/([()\\\n\r])/g,H=>"\n"===H?"\\n":"\r"===H?"\\r":`\\${H}`)},o.getModificationDate=function Ae(ie=new Date){return[ie.getUTCFullYear().toString(),(ie.getUTCMonth()+1).toString().padStart(2,"0"),ie.getUTCDate().toString().padStart(2,"0"),ie.getUTCHours().toString().padStart(2,"0"),ie.getUTCMinutes().toString().padStart(2,"0"),ie.getUTCSeconds().toString().padStart(2,"0")].join("")},o.getVerbosityLevel=function R(){return h},o.info=function V(ie){h>=d.INFOS&&console.log(`Info: ${ie}`)},o.isArrayBuffer=function ge(ie){return"object"==typeof ie&&null!==ie&&void 0!==ie.byteLength},o.isArrayEqual=function _e(ie,H){if(ie.length!==H.length)return!1;for(let K=0,ue=ie.length;K<ue;K++)if(ie[K]!==H[K])return!1;return!0},o.isAscii=function q(ie){return/^[\x00-\x7F]*$/.test(ie)},o.objectFromMap=function re(ie){const H=Object.create(null);for(const[K,ue]of ie)H[K]=ue;return H},o.objectSize=function se(ie){return Object.keys(ie).length},o.setVerbosityLevel=function x(ie){Number.isInteger(ie)&&(h=ie)},o.shadow=he,o.string32=function $(ie){return String.fromCharCode(ie>>24&255,ie>>16&255,ie>>8&255,255&ie)},o.stringToBytes=G,o.stringToPDFString=function ne(ie){if(ie[0]>="\xef"){let K;if("\xfe"===ie[0]&&"\xff"===ie[1]?K="utf-16be":"\xff"===ie[0]&&"\xfe"===ie[1]?K="utf-16le":"\xef"===ie[0]&&"\xbb"===ie[1]&&"\xbf"===ie[2]&&(K="utf-8"),K)try{const ue=new TextDecoder(K,{fatal:!0}),me=G(ie);return ue.decode(me)}catch(ue){z(`stringToPDFString: "${ue}".`)}}const H=[];for(let K=0,ue=ie.length;K<ue;K++){const me=ee[ie.charCodeAt(K)];H.push(me?String.fromCharCode(me):ie.charAt(K))}return H.join("")},o.stringToUTF16BEString=function te(ie){const H=["\xfe\xff"];for(let K=0,ue=ie.length;K<ue;K++){const me=ie.charCodeAt(K);H.push(String.fromCharCode(me>>8&255),String.fromCharCode(255&me))}return H.join("")},o.stringToUTF8String=ae,o.unreachable=J,o.utf8StringToString=function le(ie){return unescape(encodeURIComponent(ie))},o.warn=z,C(2),o.IDENTITY_MATRIX=[1,0,0,1,0,0],o.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],o.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},o.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},o.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},o.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},o.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},o.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},o.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},o.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},o.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},o.AnnotationReplyType={GROUP:"Group",REPLY:"R"},o.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},o.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},o.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},o.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},o.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},o.PageActionEventType={O:"PageOpen",C:"PageClose"},o.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},o.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const d={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=d,o.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},o.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},o.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},o.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let h=d.WARNINGS;function z(ie){h>=d.WARNINGS&&console.log(`Warning: ${ie}`)}function J(ie){throw new Error(ie)}function he(ie,H,K){return Object.defineProperty(ie,H,{value:K,enumerable:!0,configurable:!0,writable:!1}),K}const B=function(){function H(K,ue){this.constructor===H&&J("Cannot initialize BaseException."),this.message=K,this.name=ue}return H.prototype=new Error,H.constructor=H,H}();function G(ie){"string"!=typeof ie&&J("Invalid argument for stringToBytes");const H=ie.length,K=new Uint8Array(H);for(let ue=0;ue<H;++ue)K[ue]=255&ie.charCodeAt(ue);return K}function j(ie){return void 0!==ie.length?ie.length:void 0!==ie.byteLength?ie.byteLength:void J("Invalid argument for arrayByteLength")}o.BaseException=B,o.PasswordException=class a extends B{constructor(H,K){super(H,"PasswordException"),this.code=K}},o.UnknownErrorException=class e extends B{constructor(H,K){super(H,"UnknownErrorException"),this.details=K}},o.InvalidPDFException=class s extends B{constructor(H){super(H,"InvalidPDFException")}},o.MissingPDFException=class r extends B{constructor(H){super(H,"MissingPDFException")}},o.UnexpectedResponseException=class g extends B{constructor(H,K){super(H,"UnexpectedResponseException"),this.status=K}},o.FormatError=class u extends B{constructor(H){super(H,"FormatError")}},o.AbortException=class c extends B{constructor(H){super(H,"AbortException")}},o.FeatureTest=class ce{static get isLittleEndian(){return he(this,"isLittleEndian",function fe(){const ie=new Uint8Array(4);return ie[0]=1,1===new Uint32Array(ie.buffer,0,1)[0]}())}static get isEvalSupported(){return he(this,"isEvalSupported",function pe(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return he(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const P=[...Array(256).keys()].map(ie=>ie.toString(16).padStart(2,"0"));class T{static makeHexColor(H,K,ue){return`#${P[H]}${P[K]}${P[ue]}`}static scaleMinMax(H,K){let ue;H[0]?(H[0]<0&&(ue=K[0],K[0]=K[1],K[1]=ue),K[0]*=H[0],K[1]*=H[0],H[3]<0&&(ue=K[2],K[2]=K[3],K[3]=ue),K[2]*=H[3],K[3]*=H[3]):(ue=K[0],K[0]=K[2],K[2]=ue,ue=K[1],K[1]=K[3],K[3]=ue,H[1]<0&&(ue=K[2],K[2]=K[3],K[3]=ue),K[2]*=H[1],K[3]*=H[1],H[2]<0&&(ue=K[0],K[0]=K[1],K[1]=ue),K[0]*=H[2],K[1]*=H[2]),K[0]+=H[4],K[1]+=H[4],K[2]+=H[5],K[3]+=H[5]}static transform(H,K){return[H[0]*K[0]+H[2]*K[1],H[1]*K[0]+H[3]*K[1],H[0]*K[2]+H[2]*K[3],H[1]*K[2]+H[3]*K[3],H[0]*K[4]+H[2]*K[5]+H[4],H[1]*K[4]+H[3]*K[5]+H[5]]}static applyTransform(H,K){return[H[0]*K[0]+H[1]*K[2]+K[4],H[0]*K[1]+H[1]*K[3]+K[5]]}static applyInverseTransform(H,K){const ue=K[0]*K[3]-K[1]*K[2];return[(H[0]*K[3]-H[1]*K[2]+K[2]*K[5]-K[4]*K[3])/ue,(-H[0]*K[1]+H[1]*K[0]+K[4]*K[1]-K[5]*K[0])/ue]}static getAxialAlignedBoundingBox(H,K){const ue=T.applyTransform(H,K),me=T.applyTransform(H.slice(2,4),K),ve=T.applyTransform([H[0],H[3]],K),be=T.applyTransform([H[2],H[1]],K);return[Math.min(ue[0],me[0],ve[0],be[0]),Math.min(ue[1],me[1],ve[1],be[1]),Math.max(ue[0],me[0],ve[0],be[0]),Math.max(ue[1],me[1],ve[1],be[1])]}static inverseTransform(H){const K=H[0]*H[3]-H[1]*H[2];return[H[3]/K,-H[1]/K,-H[2]/K,H[0]/K,(H[2]*H[5]-H[4]*H[3])/K,(H[4]*H[1]-H[5]*H[0])/K]}static apply3dTransform(H,K){return[H[0]*K[0]+H[1]*K[1]+H[2]*K[2],H[3]*K[0]+H[4]*K[1]+H[5]*K[2],H[6]*K[0]+H[7]*K[1]+H[8]*K[2]]}static singularValueDecompose2dScale(H){const K=[H[0],H[2],H[1],H[3]],ue=H[0]*K[0]+H[1]*K[2],be=H[2]*K[1]+H[3]*K[3],xe=(ue+be)/2,Le=Math.sqrt((ue+be)**2-4*(ue*be-(H[2]*K[0]+H[3]*K[2])*(H[0]*K[1]+H[1]*K[3])))/2,Se=xe-Le||1;return[Math.sqrt(xe+Le||1),Math.sqrt(Se)]}static normalizeRect(H){const K=H.slice(0);return H[0]>H[2]&&(K[0]=H[2],K[2]=H[0]),H[1]>H[3]&&(K[1]=H[3],K[3]=H[1]),K}static intersect(H,K){const ue=Math.max(Math.min(H[0],H[2]),Math.min(K[0],K[2])),me=Math.min(Math.max(H[0],H[2]),Math.max(K[0],K[2]));if(ue>me)return null;const ve=Math.max(Math.min(H[1],H[3]),Math.min(K[1],K[3])),be=Math.min(Math.max(H[1],H[3]),Math.max(K[1],K[3]));return ve>be?null:[ue,ve,me,be]}static bezierBoundingBox(H,K,ue,me,ve,be,xe,Le){const Me=[],Se=[[],[]];let Ce,we,Te,Pe,ke,Oe,Ie,Re;for(let Ne=0;Ne<2;++Ne)if(0===Ne?(we=6*H-12*ue+6*ve,Ce=-3*H+9*ue-9*ve+3*xe,Te=3*ue-3*H):(we=6*K-12*me+6*be,Ce=-3*K+9*me-9*be+3*Le,Te=3*me-3*K),Math.abs(Ce)<1e-12){if(Math.abs(we)<1e-12)continue;Pe=-Te/we,0<Pe&&Pe<1&&Me.push(Pe)}else Ie=we*we-4*Te*Ce,Re=Math.sqrt(Ie),!(Ie<0)&&(ke=(-we+Re)/(2*Ce),0<ke&&ke<1&&Me.push(ke),Oe=(-we-Re)/(2*Ce),0<Oe&&Oe<1&&Me.push(Oe));let Ee,Fe=Me.length;const De=Fe;for(;Fe--;)Pe=Me[Fe],Ee=1-Pe,Se[0][Fe]=Ee*Ee*Ee*H+3*Ee*Ee*Pe*ue+3*Ee*Pe*Pe*ve+Pe*Pe*Pe*xe,Se[1][Fe]=Ee*Ee*Ee*K+3*Ee*Ee*Pe*me+3*Ee*Pe*Pe*be+Pe*Pe*Pe*Le;return Se[0][De]=H,Se[1][De]=K,Se[0][De+1]=xe,Se[1][De+1]=Le,Se[0].length=Se[1].length=De+2,[Math.min(...Se[0]),Math.min(...Se[1]),Math.max(...Se[0]),Math.max(...Se[1])]}}o.Util=T;const ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ae(ie){return decodeURIComponent(escape(ie))}},(Q,o,C)=>{C(3)},(Q,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeJS=void 0;const C=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);o.isNodeJS=C},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Q,NodeCMapReaderFactory:o,NodeStandardFontDataFactory:C}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=Q,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=o,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=C}function setPDFNetworkStreamFactory(Q){createPDFNetworkStream=Q}function getDocument(Q){const o=new PDFDocumentLoadingTask;let C;if("string"==typeof Q||Q instanceof URL)C={url:Q};else if((0,_util.isArrayBuffer)(Q))C={data:Q};else if(Q instanceof PDFDataRangeTransport)C={range:Q};else{if("object"!=typeof Q)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!Q.url&&!Q.data&&!Q.range)throw new Error("Invalid parameter object: need either .data, .range or .url");C=Q}const i=Object.create(null);let y=null,M=null;for(const D in C){const S=C[D];switch(D){case"url":if(typeof window<"u")try{i[D]=new URL(S,window.location).href;continue}catch(_){(0,_util.warn)(`Cannot create valid URL: "${_}".`)}else if("string"==typeof S||S instanceof URL){i[D]=S.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":y=S;continue;case"worker":M=S;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&S instanceof Buffer)i[D]=new Uint8Array(S);else{if(S instanceof Uint8Array)break;if("string"==typeof S)i[D]=(0,_util.stringToBytes)(S);else if("object"!=typeof S||null===S||isNaN(S.length)){if(!(0,_util.isArrayBuffer)(S))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");i[D]=new Uint8Array(S)}else i[D]=new Uint8Array(S)}continue}i[D]=S}if(i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory,i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory,i.ignoreErrors=!0!==i.stopAtErrors,i.fontExtraProperties=!0===i.fontExtraProperties,i.pdfBug=!0===i.pdfBug,i.enableXfa=!0===i.enableXfa,(!Number.isInteger(i.rangeChunkSize)||i.rangeChunkSize<1)&&(i.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof i.docBaseUrl||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null),(!Number.isInteger(i.maxImageSize)||i.maxImageSize<-1)&&(i.maxImageSize=-1),"string"!=typeof i.cMapUrl&&(i.cMapUrl=null),"string"!=typeof i.standardFontDataUrl&&(i.standardFontDataUrl=null),"boolean"!=typeof i.useWorkerFetch&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof i.isEvalSupported&&(i.isEvalSupported=!0),"boolean"!=typeof i.disableFontFace&&(i.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof i.useSystemFonts&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace),("object"!=typeof i.ownerDocument||null===i.ownerDocument)&&(i.ownerDocument=globalThis.document),"boolean"!=typeof i.disableRange&&(i.disableRange=!1),"boolean"!=typeof i.disableStream&&(i.disableStream=!1),"boolean"!=typeof i.disableAutoFetch&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!M){const D={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};M=D.port?PDFWorker.fromPort(D):new PDFWorker(D),o._worker=M}const U=o.docId;return M.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const D=_fetchDocument(M,i,y,U),S=new Promise(function(_){let F;y?F=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},y):i.data||(F=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),_(F)});return Promise.all([D,S]).then(function([_,F]){if(o.destroyed)throw new Error("Loading aborted");const N=new _message_handler.MessageHandler(U,_,M.port),p=new WorkerTransport(N,o,F,i);o._transport=p,N.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(Q,o,C,i){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(Q,o,C,i){if(Q.destroyed)throw new Error("Worker was destroyed");C&&(o.length=C.length,o.initialData=C.initialData,o.progressiveDone=C.progressiveDone,o.contentDispositionFilename=C.contentDispositionFilename);const y=yield Q.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.14.305",source:{data:o.data,url:o.url,password:o.password,disableAutoFetch:o.disableAutoFetch,rangeChunkSize:o.rangeChunkSize,length:o.length},maxImageSize:o.maxImageSize,disableFontFace:o.disableFontFace,docBaseUrl:o.docBaseUrl,ignoreErrors:o.ignoreErrors,isEvalSupported:o.isEvalSupported,fontExtraProperties:o.fontExtraProperties,enableXfa:o.enableXfa,useSystemFonts:o.useSystemFonts,cMapUrl:o.useWorkerFetch?o.cMapUrl:null,standardFontDataUrl:o.useWorkerFetch?o.standardFontDataUrl:null});if(Q.destroyed)throw new Error("Worker was destroyed");return y})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var o,C;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_docId._=(o=_docId._,C=o++,o),C}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var o=this;return _asyncToGenerator(function*(){o.destroyed=!0,yield o._transport?.destroy(),o._transport=null,o._worker&&(o._worker.destroy(),o._worker=null)})()}}var _docId={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,C,i=!1,y=null){this.length=o,this.initialData=C,this.progressiveDone=i,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,C){for(const i of this._rangeListeners)i(o,C)}onDataProgress(o,C){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(o,C)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const C of this._progressiveReadListeners)C(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,C){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,C){var y,i=this;this._pdfInfo=o,this._transport=C,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(y=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),i.stats||{streamTypes:{},fontTypes:{}}}),function(){return y.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,C,i,y,M=!1){this._pageIndex=o,this._pageInfo=C,this._ownerDocument=y,this._transport=i,this._stats=M?new _display_utils.StatTimer:null,this._pdfBug=M,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:C=this.rotate,offsetX:i=0,offsetY:y=0,dontFlip:M=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:C,offsetX:i,offsetY:y,dontFlip:M})}getAnnotations({intent:o="display"}={}){const C=this._transport.getRenderingIntent(o);let i=this._annotationPromises.get(C.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,C.renderingIntent),this._annotationPromises.set(C.cacheKey,i),i=i.then(y=>{for(const M of y)void 0!==M.titleObj&&Object.defineProperty(M,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),M.titleObj.str)}),void 0!==M.contentsObj&&Object.defineProperty(M,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),M.contentsObj.str)});return y})),i}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var o=this;return _asyncToGenerator(function*(){return o._transport._htmlForXfa?.children[o._pageIndex]||null})()}render({canvasContext:o,viewport:C,intent:i="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:M=null,imageLayer:U=null,canvasFactory:D=null,background:S=null,optionalContentConfigPromise:_=null,annotationCanvasMap:F=null,pageColors:N=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&y===_util.AnnotationMode.ENABLE&&(y=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&y===_util.AnnotationMode.ENABLE&&(y=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const p=this._transport.getRenderingIntent(i,y);this.pendingCleanup=!1,_||(_=this._transport.getOptionalContentConfig());let I=this._intentStates.get(p.cacheKey);I||(I=Object.create(null),this._intentStates.set(p.cacheKey,I)),I.streamReaderCancelTimeout&&(clearTimeout(I.streamReaderCancelTimeout),I.streamReaderCancelTimeout=null);const W=D||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),v=!!(p.renderingIntent&_util.RenderingIntentFlag.PRINT);I.displayReadyCapability||(I.displayReadyCapability=(0,_util.createPromiseCapability)(),I.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(p));const L=k=>{I.renderTasks.delete(A),(this.cleanupAfterRender||v)&&(this.pendingCleanup=!0),this._tryCleanup(),k?(A.capability.reject(k),this._abortOperatorList({intentState:I,reason:k instanceof Error?k:new Error(k)})):A.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},A=new InternalRenderTask({callback:L,params:{canvasContext:o,viewport:C,transform:M,imageLayer:U,background:S},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:F,operatorList:I.operatorList,pageIndex:this._pageIndex,canvasFactory:W,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:N});(I.renderTasks||=new Set).add(A);const w=A.task;return Promise.all([I.displayReadyCapability.promise,_]).then(([k,E])=>{this.pendingCleanup?L():(this._stats&&this._stats.time("Rendering"),A.initializeGraphics({transparency:k,optionalContentConfig:E}),A.operatorListChanged())}).catch(L),w}getOperatorList({intent:o="display",annotationMode:C=_util.AnnotationMode.ENABLE}={}){const y=this._transport.getRenderingIntent(o,C,!0);let U,M=this._intentStates.get(y.cacheKey);return M||(M=Object.create(null),this._intentStates.set(y.cacheKey,M)),M.opListReadCapability||(U=Object.create(null),U.operatorListChanged=function i(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(U))},M.opListReadCapability=(0,_util.createPromiseCapability)(),(M.renderTasks||=new Set).add(U),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(y)),M.opListReadCapability.promise}streamTextContent({disableCombineTextItems:o=!1,includeMarkedContent:C=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==o,includeMarkedContent:!0===C},{highWaterMark:100,size:y=>y.items.length})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const C=this.streamTextContent(o);return new Promise(function(i,y){const U=C.getReader(),D={items:[],styles:Object.create(null)};!function M(){U.read().then(function({value:S,done:_}){_?i(D):(Object.assign(D.styles,S.styles),D.items.push(...S.items),M())},y)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const C of this._intentStates.values())if(this._abortOperatorList({intentState:C,reason:new Error("Page was destroyed."),force:!0}),!C.opListReadCapability)for(const i of C.renderTasks)o.push(i.completed),i.cancel();this.objs.clear();for(const C of this._bitmaps)C.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(o)}cleanup(o=!1){return this.pendingCleanup=!0,this._tryCleanup(o)}_tryCleanup(o=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:C,operatorList:i}of this._intentStates.values())if(C.size>0||!i.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,o&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const C of this._bitmaps)C.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(o,C){const i=this._intentStates.get(C);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(o))}_renderPageChunk(o,C){for(let i=0,y=o.length;i<y;i++)C.operatorList.fnArray.push(o.fnArray[i]),C.operatorList.argsArray.push(o.argsArray[i]);C.operatorList.lastChunk=o.lastChunk;for(const i of C.renderTasks)i.operatorListChanged();o.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:o,cacheKey:C}){const y=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:C,annotationStorage:o&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),M=this._intentStates.get(C);M.streamReader=y;const U=()=>{y.read().then(({value:D,done:S})=>{S?M.streamReader=null:this._transport.destroyed||(this._renderPageChunk(D,M),U())},D=>{if(M.streamReader=null,!this._transport.destroyed){if(M.operatorList){M.operatorList.lastChunk=!0;for(const S of M.renderTasks)S.operatorListChanged();this._tryCleanup()}if(M.displayReadyCapability)M.displayReadyCapability.reject(D);else{if(!M.opListReadCapability)throw D;M.opListReadCapability.reject(D)}}})};U()}_abortOperatorList({intentState:o,reason:C,force:i=!1}){if(o.streamReader){if(!i){if(o.renderTasks.size>0)return;if(C instanceof _display_utils.RenderingCancelledException)return void(o.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:o,reason:C,force:!0}),o.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(o.streamReader.cancel(new _util.AbortException(C.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[y,M]of this._intentStates)if(M===o){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(o,C){const i={data:structuredClone(o,C)};this._deferred.then(()=>{for(const y of this._listeners)y.call(this,i)})}addEventListener(o,C){this._listeners.push(C)}removeEventListener(o,C){const i=this._listeners.indexOf(C);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const Q=document?.currentScript?.src;Q&&(PDFWorkerUtil.fallbackWorkerSrc=Q.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Q,o){let C;try{if(C=new URL(Q),!C.origin||"null"===C.origin)return!1}catch{return!1}const i=new URL(o,C);return C.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(Q){return URL.createObjectURL(new Blob([`importScripts("${Q}");`]))};class PDFWorker{constructor({name:Q=null,port:o=null,verbosity:C=(0,_util.getVerbosityLevel)()}={}){if(o&&_workerPorts._.has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Q,this.destroyed=!1,this.verbosity=C,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return _workerPorts._.set(o,this),void this._initializeFromPort(o);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Q){this._port=Q,this._messageHandler=new _message_handler.MessageHandler("main","worker",Q),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let Q=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,Q)||(Q=PDFWorkerUtil.createCDNWrapper(new URL(Q,window.location).href));const o=new Worker(Q),C=new _message_handler.MessageHandler("main","worker",o),i=()=>{o.removeEventListener("error",y),C.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||i()};o.addEventListener("error",y),C.on("test",U=>{o.removeEventListener("error",y),this.destroyed?i():U?(this._messageHandler=C,this._port=o,this._webWorker=o,this._readyCapability.resolve(),C.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),C.destroy(),o.terminate())}),C.on("ready",U=>{if(o.removeEventListener("error",y),this.destroyed)i();else try{M()}catch{this._setupFakeWorker()}});const M=()=>{const U=new Uint8Array;C.send("test",U,[U.buffer])};return void M()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(Q=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const o=new LoopbackPort;this._port=o;const C="fake"+PDFWorkerUtil.fakeWorkerId++,i=new _message_handler.MessageHandler(C+"_worker",C,o);Q.setup(i,o);const y=new _message_handler.MessageHandler(C,C+"_worker",o);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(Q=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Q.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_workerPorts._.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Q){if(!Q?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _assertClassBrand(PDFWorker,this,_workerPorts)._.has(Q.port)?_assertClassBrand(PDFWorker,this,_workerPorts)._.get(Q.port):new PDFWorker(Q)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function Q(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={_:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(o,C,i,y){_classPrivateFieldInitSpec(this,_docStats,null),_classPrivateFieldInitSpec(this,_pageCache,new Map),_classPrivateFieldInitSpec(this,_pagePromises,new Map),_classPrivateFieldInitSpec(this,_metadataPromise,null),this.messageHandler=o,this.loadingTask=C,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:C.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,y.useWorkerFetch||(this.CMapReaderFactory=new y.CMapReaderFactory({baseUrl:y.cMapUrl,isCompressed:y.cMapPacked}),this.StandardFontDataFactory=new y.StandardFontDataFactory({baseUrl:y.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(_docStats,this)}getRenderingIntent(o,C=_util.AnnotationMode.ENABLE,i=!1){let y=_util.RenderingIntentFlag.DISPLAY,M="";switch(o){case"any":y=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":y=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(C){case _util.AnnotationMode.DISABLE:y+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:y+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:y+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${C}`)}return i&&(y+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:y,cacheKey:`${y}_${M}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const i of _classPrivateFieldGet(_pageCache,this).values())o.push(i._destroy());_classPrivateFieldGet(_pageCache,this).clear(),_classPrivateFieldGet(_pagePromises,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const C=this.messageHandler.sendWithPromise("Terminate",null);return o.push(C),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,this,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:C}=this;o.on("GetReader",(i,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=M=>{this._lastProgress={loaded:M.loaded,total:M.total}},y.onPull=()=>{this._fullReader.read().then(function({value:M,done:U}){U?y.close():((0,_util.assert)((0,_util.isArrayBuffer)(M),"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(M),1,[M]))}).catch(M=>{y.error(M)})},y.onCancel=M=>{this._fullReader.cancel(M),y.ready.catch(U=>{if(!this.destroyed)throw U})}}),o.on("ReaderHeadersReady",i=>{const y=(0,_util.createPromiseCapability)(),M=this._fullReader;return M.headersReady.then(()=>{(!M.isStreamingSupported||!M.isRangeSupported)&&(this._lastProgress&&C.onProgress?.(this._lastProgress),M.onProgress=U=>{C.onProgress?.({loaded:U.loaded,total:U.total})}),y.resolve({isStreamingSupported:M.isStreamingSupported,isRangeSupported:M.isRangeSupported,contentLength:M.contentLength})},y.reject),y.promise}),o.on("GetRangeReader",(i,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const M=this._networkStream.getRangeReader(i.begin,i.end);M?(y.onPull=()=>{M.read().then(function({value:U,done:D}){D?y.close():((0,_util.assert)((0,_util.isArrayBuffer)(U),"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(U),1,[U]))}).catch(U=>{y.error(U)})},y.onCancel=U=>{M.cancel(U),y.ready.catch(D=>{if(!this.destroyed)throw D})}):y.close()}),o.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,C._capability.resolve(new PDFDocumentProxy(i,this))}),o.on("DocException",function(i){let y;switch(i.name){case"PasswordException":y=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":y=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}C._capability.reject(y)}),o.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),C.onPassword){const y=M=>{M instanceof Error?this._passwordCapability.reject(M):this._passwordCapability.resolve({password:M})};try{C.onPassword(y,i.code)}catch(M){this._passwordCapability.reject(M)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),o.on("DataLoaded",i=>{C.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),o.on("StartRenderPage",i=>{this.destroyed||_classPrivateFieldGet(_pageCache,this).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),o.on("commonobj",([i,y,M])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(y){case"Font":const U=this._params;if("error"in M){const _=M.error;(0,_util.warn)(`Error during font loading: ${_}`),this.commonObjs.resolve(i,_);break}let D=null;U.pdfBug&&globalThis.FontInspector?.enabled&&(D={registerFont(_,F){globalThis.FontInspector.fontAdded(_,F)}});const S=new _font_loader.FontFaceObject(M,{isEvalSupported:U.isEvalSupported,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:D});this.fontLoader.bind(S).catch(_=>o.sendWithPromise("FontFallback",{id:i})).finally(()=>{!U.fontExtraProperties&&S.data&&(S.data=null),this.commonObjs.resolve(i,S)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,M);break;default:throw new Error(`Got unknown common object type ${y}`)}}),o.on("obj",([i,y,M,U])=>{if(this.destroyed)return;const D=_classPrivateFieldGet(_pageCache,this).get(y);if(!D.objs.has(i))switch(M){case"Image":D.objs.resolve(i,U);const S=8e6;if(U){let _;if(U.bitmap){const{bitmap:F,width:N,height:p}=U;_=N*p*4,D._bitmaps.add(F)}else _=U.data?.length||0;_>S&&(D.cleanupAfterRender=!0)}break;case"Pattern":D.objs.resolve(i,U);break;default:throw new Error(`Got unknown object type ${M}`)}}),o.on("DocProgress",i=>{this.destroyed||C.onProgress?.({loaded:i.loaded,total:i.total})}),o.on("DocStats",i=>{this.destroyed||_classPrivateFieldSet(_docStats,this,Object.freeze({streamTypes:Object.freeze(i.streamTypes),fontTypes:Object.freeze(i.fontTypes)}))}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:o}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const C=o-1,i=_classPrivateFieldGet(_pagePromises,this).get(C);if(i)return i;const y=this.messageHandler.sendWithPromise("GetPage",{pageIndex:C}).then(M=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(C,M,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(_pageCache,this).set(C,U),U});return _classPrivateFieldGet(_pagePromises,this).set(C,y),y}getPageIndex(o){return"object"!=typeof o||null===o||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,C){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:C})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return"string"!=typeof o?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(_metadataPromise,this)||_classPrivateFieldSet(_metadataPromise,this,this.messageHandler.sendWithPromise("GetMetadata",null).then(o=>({info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(o=!1){var C=this;return _asyncToGenerator(function*(){if(yield C.messageHandler.sendWithPromise("Cleanup",null),!C.destroyed){for(const i of _classPrivateFieldGet(_pageCache,C).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);C.commonObjs.clear(),o||C.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,C,null),C._getFieldObjectsPromise=null,C._hasJSActionsPromise=null}})()}get loadingParams(){const o=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o.disableAutoFetch,enableXfa:o.enableXfa})}}var _objs=new WeakMap,_PDFObjects_brand=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand),_classPrivateFieldInitSpec(this,_objs,Object.create(null))}get(o,C=null){if(C){const y=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,o);return y.capability.promise.then(()=>C(y.data)),null}const i=_classPrivateFieldGet(_objs,this)[o];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return i.data}has(o){return _classPrivateFieldGet(_objs,this)[o]?.capability.settled||!1}resolve(o,C=null){const i=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,o);i.data=C,i.capability.resolve()}clear(){_classPrivateFieldSet(_objs,this,Object.create(null))}}function _ensureObj(Q){return _classPrivateFieldGet(_objs,this)[Q]||(_classPrivateFieldGet(_objs,this)[Q]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(o){this._internalRenderTask=o,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:o,params:C,objs:i,commonObjs:y,annotationCanvasMap:M,operatorList:U,pageIndex:D,canvasFactory:S,useRequestAnimationFrame:_=!1,pdfBug:F=!1,pageColors:N=null}){this.callback=o,this.params=C,this.objs=i,this.commonObjs=y,this.annotationCanvasMap=M,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=D,this.canvasFactory=S,this._pdfBug=F,this.pageColors=N,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===_&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=C.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:C}){if(this.cancelled)return;if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:y,transform:M,imageLayer:U,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,U,C,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:M,viewport:y,transparency:o,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(o=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var o=this;return _asyncToGenerator(function*(){o.cancelled||(o.operatorListIdx=o.gfx.executeOperatorList(o.operatorList,o.operatorListIdx,o._continueBound,o.stepper),o.operatorListIdx===o.operatorList.argsArray.length&&(o.running=!1,o.operatorList.lastChunk&&(o.gfx.endDrawing(),o._canvas&&_canvasInUse._.delete(o._canvas),o.callback())))})()}}var _canvasInUse={_:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(Q,o,C)=>{var i;Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=function d(m){console.log("Deprecated API usage: "+m)},o.getFilenameFromUrl=function w(m){const h=m.indexOf("#"),x=m.indexOf("?"),R=Math.min(h>0?h:m.length,x>0?x:m.length);return m.substring(m.lastIndexOf("/",R)+1,R)},o.getPdfFilenameFromUrl=function k(m,h="document.pdf"){if("string"!=typeof m)return h;if(L(m))return(0,M.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),h;const R=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,V=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(m);let z=R.exec(V[1])||R.exec(V[2])||R.exec(V[3]);if(z&&(z=z[0],z.includes("%")))try{z=R.exec(decodeURIComponent(z))[0]}catch{}return z||h},o.getXfaPageViewport=function b(m,{scale:h=1,rotation:x=0}){const{width:R,height:V}=m.attributes.style,z=[0,0,parseInt(R),parseInt(V)];return new W({viewBox:z,scale:h,rotation:x})},o.isDataScheme=L,o.isPdfFile=function A(m){return"string"==typeof m&&/\.pdf$/i.test(m)},o.isValidFetchUrl=n,o.loadScript=function t(m,h=!1){return new Promise((x,R)=>{const V=document.createElement("script");V.src=m,V.onload=function(z){h&&V.remove(),x(z)},V.onerror=function(){R(new Error(`Cannot load script at: ${V.src}`))},(document.head||document.documentElement).appendChild(V)})};var y=C(6),M=C(1);class D{}function _(m){return F.apply(this,arguments)}function F(){return(F=_asyncToGenerator(function*(m,h=!1){if(n(m,document.baseURI)){const x=yield fetch(m);if(!x.ok)throw new Error(x.statusText);return h?new Uint8Array(yield x.arrayBuffer()):(0,M.stringToBytes)(yield x.text())}return new Promise((x,R)=>{const V=new XMLHttpRequest;V.open("GET",m,!0),h&&(V.responseType="arraybuffer"),V.onreadystatechange=()=>{if(V.readyState===XMLHttpRequest.DONE){if(200===V.status||0===V.status){let z;if(h&&V.response?z=new Uint8Array(V.response):!h&&V.responseText&&(z=(0,M.stringToBytes)(V.responseText)),z)return void x(z)}R(new Error(V.statusText))}},V.send(null)})})).apply(this,arguments)}i=D,_defineProperty(D,"CSS",96),_defineProperty(D,"PDF",72),_defineProperty(D,"PDF_TO_CSS_UNITS",i.CSS/i.PDF),o.PixelsPerInch=D,o.DOMCanvasFactory=class S extends y.BaseCanvasFactory{constructor({ownerDocument:h=globalThis.document}={}){super(),this._document=h}_createCanvas(h,x){const R=this._document.createElement("canvas");return R.width=h,R.height=x,R}},o.DOMCMapReaderFactory=class N extends y.BaseCMapReaderFactory{_fetchData(h,x){return _(h,this.isCompressed).then(R=>({cMapData:R,compressionType:x}))}},o.DOMStandardFontDataFactory=class p extends y.BaseStandardFontDataFactory{_fetchData(h){return _(h,!0)}},o.DOMSVGFactory=class I extends y.BaseSVGFactory{_createSVG(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}};class W{constructor({viewBox:h,scale:x,rotation:R,offsetX:V=0,offsetY:z=0,dontFlip:J=!1}){this.viewBox=h,this.scale=x,this.rotation=R,this.offsetX=V,this.offsetY=z;const X=(h[2]+h[0])/2,oe=(h[3]+h[1])/2;let de,he,B,a,e,s,r,g;switch((R%=360)<0&&(R+=360),R){case 180:de=-1,he=0,B=0,a=1;break;case 90:de=0,he=1,B=1,a=0;break;case 270:de=0,he=-1,B=-1,a=0;break;case 0:de=1,he=0,B=0,a=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}J&&(B=-B,a=-a),0===de?(e=Math.abs(oe-h[1])*x+V,s=Math.abs(X-h[0])*x+z,r=Math.abs(h[3]-h[1])*x,g=Math.abs(h[2]-h[0])*x):(e=Math.abs(X-h[0])*x+V,s=Math.abs(oe-h[1])*x+z,r=Math.abs(h[2]-h[0])*x,g=Math.abs(h[3]-h[1])*x),this.transform=[de*x,he*x,B*x,a*x,e-de*x*X-B*x*oe,s-he*x*X-a*x*oe],this.width=r,this.height=g}clone({scale:h=this.scale,rotation:x=this.rotation,offsetX:R=this.offsetX,offsetY:V=this.offsetY,dontFlip:z=!1}={}){return new W({viewBox:this.viewBox.slice(),scale:h,rotation:x,offsetX:R,offsetY:V,dontFlip:z})}convertToViewportPoint(h,x){return M.Util.applyTransform([h,x],this.transform)}convertToViewportRectangle(h){const x=M.Util.applyTransform([h[0],h[1]],this.transform),R=M.Util.applyTransform([h[2],h[3]],this.transform);return[x[0],x[1],R[0],R[1]]}convertToPdfPoint(h,x){return M.Util.applyInverseTransform([h,x],this.transform)}}function L(m){const h=m.length;let x=0;for(;x<h&&""===m[x].trim();)x++;return"data:"===m.substring(x,x+5).toLowerCase()}function n(m,h){try{const{protocol:x}=h?new URL(m,h):new URL(m);return"http:"===x||"https:"===x}catch{return!1}}let f;o.PageViewport=W,o.RenderingCancelledException=class v extends M.BaseException{constructor(h,x){super(h,"RenderingCancelledException"),this.type=x}},o.StatTimer=class E{constructor(){this.started=Object.create(null),this.times=[]}time(h){h in this.started&&(0,M.warn)(`Timer is already running for ${h}`),this.started[h]=Date.now()}timeEnd(h){h in this.started||(0,M.warn)(`Timer has not been started for ${h}`),this.times.push({name:h,start:this.started[h],end:Date.now()}),delete this.started[h]}toString(){const h=[];let x=0;for(const R of this.times){const V=R.name;V.length>x&&(x=V.length)}for(const R of this.times){const V=R.end-R.start;h.push(`${R.name.padEnd(x)} ${V}ms\n`)}return h.join("")}},o.PDFDateString=class l{static toDateObject(h){if(!h||"string"!=typeof h)return null;f||(f=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const x=f.exec(h);if(!x)return null;const R=parseInt(x[1],10);let V=parseInt(x[2],10);V=V>=1&&V<=12?V-1:0;let z=parseInt(x[3],10);z=z>=1&&z<=31?z:1;let J=parseInt(x[4],10);J=J>=0&&J<=23?J:0;let X=parseInt(x[5],10);X=X>=0&&X<=59?X:0;let oe=parseInt(x[6],10);oe=oe>=0&&oe<=59?oe:0;const de=x[7]||"Z";let he=parseInt(x[8],10);he=he>=0&&he<=23?he:0;let B=parseInt(x[9],10)||0;return B=B>=0&&B<=59?B:0,"-"===de?(J+=he,X+=B):"+"===de&&(J-=he,X-=B),new Date(Date.UTC(R,V,z,J,X,oe))}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var i=C(1);class y{constructor(){this.constructor===y&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,F){if(_<=0||F<=0)throw new Error("Invalid canvas size");const N=this._createCanvas(_,F);return{canvas:N,context:N.getContext("2d")}}reset(_,F,N){if(!_.canvas)throw new Error("Canvas is not specified");if(F<=0||N<=0)throw new Error("Invalid canvas size");_.canvas.width=F,_.canvas.height=N}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,F){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=y;class M{constructor({baseUrl:_=null,isCompressed:F=!1}){this.constructor===M&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=F}fetch({name:_}){var F=this;return _asyncToGenerator(function*(){if(!F.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const N=F.baseUrl+_+(F.isCompressed?".bcmap":"");return F._fetchData(N,F.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE).catch(I=>{throw new Error(`Unable to load ${F.isCompressed?"binary ":""}CMap at: ${N}`)})})()}_fetchData(_,F){(0,i.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=M;class U{constructor({baseUrl:_=null}){this.constructor===U&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}fetch({filename:_}){var F=this;return _asyncToGenerator(function*(){if(!F.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const N=`${F.baseUrl}${_}`;return F._fetchData(N).catch(p=>{throw new Error(`Unable to load font data at: ${N}`)})})()}_fetchData(_){(0,i.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=U;class D{constructor(){this.constructor===D&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,F){if(_<=0||F<=0)throw new Error("Invalid SVG dimensions");const N=this._createSVG("svg:svg");return N.setAttribute("version","1.1"),N.setAttribute("width",`${_}px`),N.setAttribute("height",`${F}px`),N.setAttribute("preserveAspectRatio","none"),N.setAttribute("viewBox",`0 0 ${_} ${F}`),N}createElement(_){if("string"!=typeof _)throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,i.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=D},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var i=C(1);class y{constructor({docId:S,onUnsupportedFeature:_,ownerDocument:F=globalThis.document,styleElement:N=null}){this.constructor===y&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=S,this._onUnsupportedFeature=_,this._document=F,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(S){this.nativeFontFaces.push(S),this._document.fonts.add(S)}insertRule(S){let _=this.styleElement;_||(_=this.styleElement=this._document.createElement("style"),_.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(_));const F=_.sheet;F.insertRule(S,F.cssRules.length)}clear(){for(const S of this.nativeFontFaces)this._document.fonts.delete(S);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(S){var _=this;return _asyncToGenerator(function*(){if(S.attached||S.missingFile)return;if(S.attached=!0,_.isFontLoadingAPISupported){const N=S.createNativeFontFace();if(N){_.addNativeFontFace(N);try{yield N.loaded}catch(p){throw _._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${N.family}': '${p}'.`),S.disableFontFace=!0,p}}return}const F=S.createFontFaceRule();if(F){if(_.insertRule(F),_.isSyncFontLoadingSupported)return;yield new Promise(N=>{const p=_._queueLoadingCallback(N);_._prepareFontLoadEvent([F],[S],p)})}})()}_queueLoadingCallback(S){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,i.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(S,_,F){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let M;o.FontLoader=M,o.FontLoader=M=class extends y{constructor(S){super(S),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let S=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(S=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",S)}_queueLoadingCallback(S){const F=this.loadingContext,N={id:"pdfjs-font-loading-"+F.nextRequestId++,done:!1,complete:function _(){for((0,i.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;F.requests.length>0&&F.requests[0].done;){const p=F.requests.shift();setTimeout(p.callback,0)}},callback:S};return F.requests.push(N),N}get _loadTestFont(){return(0,i.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(S,_,F){function N(x,R){return x.charCodeAt(R)<<24|x.charCodeAt(R+1)<<16|x.charCodeAt(R+2)<<8|255&x.charCodeAt(R+3)}function p(x,R,V,z){return x.substring(0,R)+z+x.substring(R+V)}let I,W;const v=this._document.createElement("canvas");v.width=1,v.height=1;const L=v.getContext("2d");let A=0;const k=`lt${Date.now()}${this.loadTestFontId++}`;let E=this._loadTestFont;E=p(E,976,k.length,k);const d=1482184792;let f=N(E,16);for(I=0,W=k.length-3;I<W;I+=4)f=f-d+N(k,I)|0;I<k.length&&(f=f-d+N(k+"XXX",I)|0),E=p(E,16,4,(0,i.string32)(f));const l=`url(data:font/opentype;base64,${btoa(E)});`;this.insertRule(`@font-face {font-family:"${k}";src:${l}}`);const m=[];for(const x of _)m.push(x.loadedName);m.push(k);const h=this._document.createElement("div");h.style.visibility="hidden",h.style.width=h.style.height="10px",h.style.position="absolute",h.style.top=h.style.left="0px";for(const x of m){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=x,h.appendChild(R)}this._document.body.appendChild(h),function w(x,R){if(A++,A>30)return(0,i.warn)("Load test font never loaded."),void R();L.font="30px "+x,L.fillText(".",0,20),L.getImageData(0,0,1,1).data[3]>0?R():setTimeout(w.bind(null,x,R))}(k,()=>{h.remove(),F.complete()})}},o.FontFaceObject=class U{constructor(S,{isEvalSupported:_=!0,disableFontFace:F=!1,ignoreErrors:N=!1,onUnsupportedFeature:p,fontRegistry:I=null}){this.compiledGlyphs=Object.create(null);for(const W in S)this[W]=S[W];this.isEvalSupported=!1!==_,this.disableFontFace=!0===F,this.ignoreErrors=!0===N,this._onUnsupportedFeature=p,this.fontRegistry=I}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let S;if(this.cssFontInfo){const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),S=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}else S=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),S}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const S=(0,i.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(S)});`;let F;if(this.cssFontInfo){let N=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(N+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),F=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${N}src:${_}}`}else F=`@font-face {font-family:"${this.loadedName}";src:${_}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,_),F}getPathGenerator(S,_){if(void 0!==this.compiledGlyphs[_])return this.compiledGlyphs[_];let F;try{F=S.get(this.loadedName+"_path_"+_)}catch(N){if(!this.ignoreErrors)throw N;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${N}".`),this.compiledGlyphs[_]=function(p,I){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const N=[];for(const p of F){const I=void 0!==p.args?p.args.join(","):"";N.push("c.",p.cmd,"(",I,");\n")}return this.compiledGlyphs[_]=new Function("c","size",N.join(""))}return this.compiledGlyphs[_]=function(N,p){for(const I of F)"scale"===I.cmd&&(I.args=[p,-p]),N[I.cmd].apply(N,I.args)}}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationStorage=void 0;var i=C(9),y=C(1);o.AnnotationStorage=class M{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(D,S){const _=this._storage.get(D);return void 0===_?S:Object.assign(S,_)}getRawValue(D){return this._storage.get(D)}setValue(D,S){const _=this._storage.get(D);let F=!1;if(void 0!==_)for(const[N,p]of Object.entries(S))_[N]!==p&&(F=!0,_[N]=p);else F=!0,this._storage.set(D,S);F&&this._setModified()}getAll(){return this._storage.size>0?(0,y.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const D=new i.MurmurHash3_64;for(const[S,_]of this._storage)D.update(`${S}:${JSON.stringify(_)}`);return D.hexdigest()}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var i=C(1);const y=3285377520,M=4294901760,U=65535;o.MurmurHash3_64=class D{constructor(_){this.h1=_?4294967295&_:y,this.h2=_?4294967295&_:y}update(_){let F,N;if("string"==typeof _){F=new Uint8Array(2*_.length),N=0;for(let d=0,f=_.length;d<f;d++){const l=_.charCodeAt(d);l<=255?F[N++]=l:(F[N++]=l>>>8,F[N++]=255&l)}}else{if(!(0,i.isArrayBuffer)(_))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");F=_.slice(),N=F.byteLength}const p=N>>2,I=N-4*p,W=new Uint32Array(F.buffer,0,p);let v=0,L=0,A=this.h1,w=this.h2;const k=3432918353,E=461845907,n=k&U,t=E&U;for(let d=0;d<p;d++)1&d?(v=W[d],v=v*k&M|v*n&U,v=v<<15|v>>>17,v=v*E&M|v*t&U,A^=v,A=A<<13|A>>>19,A=5*A+3864292196):(L=W[d],L=L*k&M|L*n&U,L=L<<15|L>>>17,L=L*E&M|L*t&U,w^=L,w=w<<13|w>>>19,w=5*w+3864292196);switch(v=0,I){case 3:v^=F[4*p+2]<<16;case 2:v^=F[4*p+1]<<8;case 1:v^=F[4*p],v=v*k&M|v*n&U,v=v<<15|v>>>17,v=v*E&M|v*t&U,1&p?A^=v:w^=v}this.h1=A,this.h2=w}hexdigest(){let _=this.h1,F=this.h2;_^=F>>>1,_=3981806797*_&M|36045*_&U,F=4283543511*F&M|(2950163797*(F<<16|_>>>16)&M)>>>16,_^=F>>>1,_=444984403*_&M|60499*_&U,F=3301882366*F&M|(3120437893*(F<<16|_>>>16)&M)>>>16,_^=F>>>1;const N=(_>>>0).toString(16),p=(F>>>0).toString(16);return N.padStart(8,"0")+p.padStart(8,"0")}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var i=C(1),y=C(11),M=C(12),U=C(3),D=C(5);const F=4096,v=16;function w(B){if(B._transformStack&&(B._transformStack=[]),!B.mozCurrentTransform){B._originalSave=B.save,B._originalRestore=B.restore,B._originalRotate=B.rotate,B._originalScale=B.scale,B._originalTranslate=B.translate,B._originalTransform=B.transform,B._originalSetTransform=B.setTransform,B._originalResetTransform=B.resetTransform,B._transformMatrix=B._transformMatrix||[1,0,0,1,0,0],B._transformStack=[];try{const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(B),"lineWidth");B._setLineWidth=a.set,B._getLineWidth=a.get,Object.defineProperty(B,"lineWidth",{set:function(s){this._setLineWidth(1.000001*s)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(B,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(B,"mozCurrentTransformInverse",{get:function(){const[e,s,r,g,u,c]=this._transformMatrix,O=e*g-s*r,G=s*r-e*g;return[g/O,s/G,r/G,e/O,(g*u-r*c)/G,(s*u-e*c)/O]}}),B.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},B.restore=function(){0===this._transformStack.length&&(0,i.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},B.translate=function(e,s){const r=this._transformMatrix;r[4]=r[0]*e+r[2]*s+r[4],r[5]=r[1]*e+r[3]*s+r[5],this._originalTranslate(e,s)},B.scale=function(e,s){const r=this._transformMatrix;r[0]*=e,r[1]*=e,r[2]*=s,r[3]*=s,this._originalScale(e,s)},B.transform=function(e,s,r,g,u,c){const O=this._transformMatrix;this._transformMatrix=[O[0]*e+O[2]*s,O[1]*e+O[3]*s,O[0]*r+O[2]*g,O[1]*r+O[3]*g,O[0]*u+O[2]*c+O[4],O[1]*u+O[3]*c+O[5]],B._originalTransform(e,s,r,g,u,c)},B.setTransform=function(e,s,r,g,u,c){this._transformMatrix=[e,s,r,g,u,c],B._originalSetTransform(e,s,r,g,u,c)},B.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],B._originalResetTransform()},B.rotate=function(e){const s=Math.cos(e),r=Math.sin(e),g=this._transformMatrix;this._transformMatrix=[g[0]*s+g[2]*r,g[1]*s+g[3]*r,g[0]*-r+g[2]*s,g[1]*-r+g[3]*s,g[4],g[5]],this._originalRotate(e)}}}class k{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,e,s,r){let g;return void 0!==this.cache[a]?(g=this.cache[a],this.canvasFactory.reset(g,e,s),g.context.setTransform(1,0,0,1,0,0)):(g=this.canvasFactory.create(e,s),this.cache[a]=g),r&&w(g.context),g}delete(a){delete this.cache[a]}clear(){for(const a in this.cache)this.canvasFactory.destroy(this.cache[a]),delete this.cache[a]}}function E(B,a,e,s,r,g,u,c,O,G){const[j,Y,$,se,re,fe]=B.mozCurrentTransform;if(0===Y&&0===$){const T=Math.round(u*j+re),ne=Math.round(c*se+fe),q=Math.abs(Math.round((u+O)*j+re)-T)||1,ae=Math.abs(Math.round((c+G)*se+fe)-ne)||1;return B.setTransform(Math.sign(j),0,0,Math.sign(se),T,ne),B.drawImage(a,e,s,r,g,0,0,q,ae),B.setTransform(j,Y,$,se,re,fe),[q,ae]}if(0===j&&0===se){const T=Math.round(c*$+re),ne=Math.round(u*Y+fe),q=Math.abs(Math.round((c+G)*$+re)-T)||1,ae=Math.abs(Math.round((u+O)*Y+fe)-ne)||1;return B.setTransform(0,Math.sign(Y),Math.sign($),0,T,ne),B.drawImage(a,e,s,r,g,0,0,ae,q),B.setTransform(j,Y,$,se,re,fe),[ae,q]}return B.drawImage(a,e,s,r,g,u,c,O,G),[Math.hypot(j,Y)*O,Math.hypot($,se)*G]}class t{constructor(a,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,a,e])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,e){this.x=a,this.y=e}updatePathMinMax(a,e,s){[e,s]=i.Util.applyTransform([e,s],a),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(a,e){const s=i.Util.applyTransform(e,a),r=i.Util.applyTransform(e.slice(2),a);this.minX=Math.min(this.minX,s[0],r[0]),this.minY=Math.min(this.minY,s[1],r[1]),this.maxX=Math.max(this.maxX,s[0],r[0]),this.maxY=Math.max(this.maxY,s[1],r[1])}updateScalingPathMinMax(a,e){i.Util.scaleMinMax(a,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(a,e,s,r,g,u,c,O,G,j){const Y=i.Util.bezierBoundingBox(e,s,r,g,u,c,O,G);if(j)return j[0]=Math.min(j[0],Y[0],Y[2]),j[1]=Math.max(j[1],Y[0],Y[2]),j[2]=Math.min(j[2],Y[1],Y[3]),void(j[3]=Math.max(j[3],Y[1],Y[3]));this.updateRectMinMax(a,Y)}getPathBoundingBox(a=y.PathType.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(a===y.PathType.STROKE){e||(0,i.unreachable)("Stroke bounding box must include transform.");const r=i.Util.singularValueDecompose2dScale(e),g=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;s[0]-=g,s[1]-=u,s[2]+=g,s[3]+=u}return s}updateClipFromPath(){const a=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=y.PathType.FILL,e=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(a,e))}}function d(B,a,e=null){if(typeof ImageData<"u"&&a instanceof ImageData)return void B.putImageData(a,0,0);const s=a.height,r=a.width,g=s%v,u=(s-g)/v,c=0===g?u:u+1,O=B.createImageData(r,v);let j,G=0;const Y=a.data,$=O.data;let se,re,fe,pe,ce,P,T,ee;if(e)switch(e.length){case 1:ce=e[0],P=e[0],T=e[0],ee=e[0];break;case 4:ce=e[0],P=e[1],T=e[2],ee=e[3]}if(a.kind===i.ImageKind.GRAYSCALE_1BPP){const ne=Y.byteLength,Z=new Uint32Array($.buffer,0,$.byteLength>>2),q=Z.length,te=r+7>>3;let ae=4294967295,le=i.FeatureTest.isLittleEndian?4278190080:255;for(ee&&255===ee[0]&&0===ee[255]&&([ae,le]=[le,ae]),se=0;se<c;se++){for(fe=se<u?v:g,j=0,re=0;re<fe;re++){const ge=ne-G;let _e=0;const Ae=ge>te?r:8*ge-7,ye=-8&Ae;let ie=0,H=0;for(;_e<ye;_e+=8)H=Y[G++],Z[j++]=128&H?ae:le,Z[j++]=64&H?ae:le,Z[j++]=32&H?ae:le,Z[j++]=16&H?ae:le,Z[j++]=8&H?ae:le,Z[j++]=4&H?ae:le,Z[j++]=2&H?ae:le,Z[j++]=1&H?ae:le;for(;_e<Ae;_e++)0===ie&&(H=Y[G++],ie=128),Z[j++]=H&ie?ae:le,ie>>=1}for(;j<q;)Z[j++]=0;B.putImageData(O,0,se*v)}}else if(a.kind===i.ImageKind.RGBA_32BPP){const ne=!!(ce||P||T);for(re=0,pe=r*v*4,se=0;se<u;se++){if($.set(Y.subarray(G,G+pe)),G+=pe,ne)for(let Z=0;Z<pe;Z+=4)ce&&($[Z+0]=ce[$[Z+0]]),P&&($[Z+1]=P[$[Z+1]]),T&&($[Z+2]=T[$[Z+2]]);B.putImageData(O,0,re),re+=v}if(se<c){if(pe=r*g*4,$.set(Y.subarray(G,G+pe)),ne)for(let Z=0;Z<pe;Z+=4)ce&&($[Z+0]=ce[$[Z+0]]),P&&($[Z+1]=P[$[Z+1]]),T&&($[Z+2]=T[$[Z+2]]);B.putImageData(O,0,re)}}else{if(a.kind!==i.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${a.kind}`);{const ne=!!(ce||P||T);for(fe=v,pe=r*fe,se=0;se<c;se++){for(se>=u&&(fe=g,pe=r*fe),j=0,re=pe;re--;)$[j++]=Y[G++],$[j++]=Y[G++],$[j++]=Y[G++],$[j++]=255;if(ne)for(let Z=0;Z<j;Z+=4)ce&&($[Z+0]=ce[$[Z+0]]),P&&($[Z+1]=P[$[Z+1]]),T&&($[Z+2]=T[$[Z+2]]);B.putImageData(O,0,se*v)}}}}function f(B,a){if(a.bitmap)return void B.drawImage(a.bitmap,0,0);const e=a.height,s=a.width,r=e%v,g=(e-r)/v,u=0===r?g:g+1,c=B.createImageData(s,v);let O=0;const G=a.data,j=c.data;for(let Y=0;Y<u;Y++){const $=Y<g?v:r;({srcPos:O}=(0,M.applyMaskImageData)({src:G,srcPos:O,dest:j,width:s,height:$})),B.putImageData(c,0,Y*v)}}function l(B,a){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let s=0,r=e.length;s<r;s++){const g=e[s];void 0!==B[g]&&(a[g]=B[g])}void 0!==B.setLineDash&&(a.setLineDash(B.getLineDash()),a.lineDashOffset=B.lineDashOffset)}function b(B,a){B.strokeStyle=B.fillStyle=a||"#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",void 0!==B.setLineDash&&(B.setLineDash([]),B.lineDashOffset=0)}function m(B,a,e,s){const r=B.length;for(let g=3;g<r;g+=4){const u=B[g];if(0===u)B[g-3]=a,B[g-2]=e,B[g-1]=s;else if(u<255){const c=255-u;B[g-3]=B[g-3]*u+a*c>>8,B[g-2]=B[g-2]*u+e*c>>8,B[g-1]=B[g-1]*u+s*c>>8}}}function h(B,a,e){const s=B.length,r=1/255;for(let g=3;g<s;g+=4)a[g]=a[g]*(e?e[B[g]]:B[g])*r|0}function x(B,a,e){const s=B.length;for(let r=3;r<s;r+=4){const g=77*B[r-3]+152*B[r-2]+28*B[r-1];a[r]=e?a[r]*e[g>>8]>>8:a[r]*g>>16}}function z(B,a){const e=i.Util.singularValueDecompose2dScale(B);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*D.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==a?a:e[0]<=s||e[1]<=s}const J=["butt","round","square"],X=["miter","round","bevel"],oe={},de={};class he{constructor(a,e,s,r,g,u,c,O){this.ctx=a,this.current=new t(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=r,this.imageLayer=g,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=u,this.cachedCanvases=new k(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=O?.background||null,this.foregroundColor=O?.foreground||null,a&&w(a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,e=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):e}beginDrawing({transform:a,viewport:e,transparency:s=!1,background:r=null}){const g=this.ctx.canvas.width,u=this.ctx.canvas.height,c=r||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const O=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const G=this.backgroundColor=this.ctx.fillStyle;let j=!0,Y=c;if(this.ctx.fillStyle=c,Y=this.ctx.fillStyle,j="string"==typeof Y&&/^#[0-9A-Fa-f]{6}$/.test(Y),"#000000"===O&&"#ffffff"===G||O===G||!j)this.foregroundColor=this.backgroundColor=null;else{const $=parseInt(Y.slice(1),16),re=($&&65280)>>8,fe=$&&255,pe=P=>(P/=255)<=.03928?P/12.92:((P+.055)/1.055)**2.4,ce=Math.round(.2126*pe(($&&16711680)>>16)+.7152*pe(re)+.0722*pe(fe));this.selectColor=(P,T,ee)=>{const ne=.2126*pe(P)+.7152*pe(T)+.0722*pe(ee);return Math.round(ne)===ce?G:O}}}if(this.ctx.fillStyle=this.backgroundColor||c,this.ctx.fillRect(0,0,g,u),this.ctx.restore(),s){const O=this.cachedCanvases.getCanvas("transparent",g,u,!0);this.compositeCtx=this.ctx,this.transparentCanvas=O.canvas,this.ctx=O.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),b(this.ctx,this.foregroundColor),a&&(this.ctx.transform.apply(this.ctx,a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(a,e,s,r){const g=a.argsArray,u=a.fnArray;let c=e||0;const O=g.length;if(O===c)return c;const G=O-c>10&&"function"==typeof s,j=G?Date.now()+15:0;let Y=0;const $=this.commonObjs,se=this.objs;let re;for(;;){if(void 0!==r&&c===r.nextBreakPoint)return r.breakIt(c,s),c;if(re=u[c],re!==i.OPS.dependency)this[re].apply(this,g[c]);else for(const fe of g[c]){const pe=fe.startsWith("g_")?$:se;if(!pe.has(fe))return pe.get(fe,s),c}if(c++,c===O)return c;if(G&&++Y>10){if(Date.now()>j)return s(),c;Y=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const e of a.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(a,e){const s=a.width,r=a.height;let j,Y,g=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=s,O=r,G="prescale1";for(;g>2&&c>1||u>2&&O>1;){let $=c,se=O;g>2&&c>1&&($=Math.ceil(c/2),g/=c/$),u>2&&O>1&&(se=Math.ceil(O/2),u/=O/se),j=this.cachedCanvases.getCanvas(G,$,se,!1),Y=j.context,Y.clearRect(0,0,$,se),Y.drawImage(a,0,0,c,O,0,0,$,se),a=j.canvas,c=$,O=se,G="prescale1"===G?"prescale2":"prescale1"}return{img:a,paintWidth:c,paintHeight:O}}_createMaskCanvas(a){const e=this.ctx,{width:s,height:r}=a,g=this.current.fillColor,u=this.current.patternFill,c=e.mozCurrentTransform;let O,G,j,Y;if((a.bitmap||a.data)&&a.count>1){const q=a.bitmap||a.data.buffer,te=c.slice(0,4);G=JSON.stringify(u?te:[te,g]),O=this._cachedBitmapsMap.get(q),O||(O=new Map,this._cachedBitmapsMap.set(q,O));const ae=O.get(G);if(ae&&!u)return{canvas:ae,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};j=ae}j||(Y=this.cachedCanvases.getCanvas("maskCanvas",s,r,!1),f(Y.context,a));let $=i.Util.transform(c,[1/s,0,0,-1/r,0,0]);$=i.Util.transform($,[1,0,0,1,0,-r]);const se=i.Util.applyTransform([0,0],$),re=i.Util.applyTransform([s,r],$),fe=i.Util.normalizeRect([se[0],se[1],re[0],re[1]]),pe=Math.round(fe[2]-fe[0])||1,ce=Math.round(fe[3]-fe[1])||1,P=this.cachedCanvases.getCanvas("fillCanvas",pe,ce,!0),T=P.context,ee=Math.min(se[0],re[0]),ne=Math.min(se[1],re[1]);T.translate(-ee,-ne),T.transform.apply(T,$),j||(j=this._scaleImage(Y.canvas,T.mozCurrentTransformInverse),j=j.img,O&&u&&O.set(G,j)),T.imageSmoothingEnabled=z(T.mozCurrentTransform,a.interpolate),E(T,j,0,0,j.width,j.height,0,0,s,r),T.globalCompositeOperation="source-in";const Z=i.Util.transform(T.mozCurrentTransformInverse,[1,0,0,1,-ee,-ne]);return T.fillStyle=u?g.getPattern(e,this,Z,y.PathType.FILL):g,T.fillRect(0,0,s,r),O&&!u&&(this.cachedCanvases.delete("fillCanvas"),O.set(G,P.canvas)),{canvas:P.canvas,offsetX:Math.round(ee),offsetY:Math.round(ne)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=J[a]}setLineJoin(a){this.ctx.lineJoin=X[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,e){const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(a),s.lineDashOffset=e)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let e=0,s=a.length;e<s;e++){const r=a[e],u=r[1];switch(r[0]){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=r[1];break;case"ca":this.current.fillAlpha=r[1],this.ctx.globalAlpha=r[1];break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=u}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=r.context;const g=this.ctx;g.setTransform.apply(g,this.suspendedCtx.mozCurrentTransform),l(this.suspendedCtx,g),function A(B,a){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){a.save(),this.__originalSave()},B.restore=function(){a.restore(),this.__originalRestore()},B.translate=function(s,r){a.translate(s,r),this.__originalTranslate(s,r)},B.scale=function(s,r){a.scale(s,r),this.__originalScale(s,r)},B.transform=function(s,r,g,u,c,O){a.transform(s,r,g,u,c,O),this.__originalTransform(s,r,g,u,c,O)},B.setTransform=function(s,r,g,u,c,O){a.setTransform(s,r,g,u,c,O),this.__originalSetTransform(s,r,g,u,c,O)},B.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},B.rotate=function(s){a.rotate(s),this.__originalRotate(s)},B.clip=function(s){a.clip(s),this.__originalClip(s)},B.moveTo=function(e,s){a.moveTo(e,s),this.__originalMoveTo(e,s)},B.lineTo=function(e,s){a.lineTo(e,s),this.__originalLineTo(e,s)},B.bezierCurveTo=function(e,s,r,g,u,c){a.bezierCurveTo(e,s,r,g,u,c),this.__originalBezierCurveTo(e,s,r,g,u,c)},B.rect=function(e,s,r,g){a.rect(e,s,r,g),this.__originalRect(e,s,r,g)},B.closePath=function(){a.closePath(),this.__originalClosePath()},B.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}(g,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){this.current.activeSMask&&(a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function V(B,a,e,s){const r=s[0],g=s[1],u=s[2]-r,c=s[3]-g;0===u||0===c||(function R(B,a,e,s,r,g,u,c,O,G,j){const Y=!!g,$=Y?g[0]:0,se=Y?g[1]:0,re=Y?g[2]:0;let fe;fe="Luminosity"===r?x:h;const ce=Math.min(s,Math.ceil(1048576/e));for(let P=0;P<s;P+=ce){const T=Math.min(ce,s-P),ee=B.getImageData(c-G,P+(O-j),e,T),ne=a.getImageData(c,P+O,e,T);Y&&m(ee.data,$,se,re),fe(ee.data,ne.data,u),a.putImageData(ne,c,P+O)}}(a.context,e,u,c,a.subtype,a.backdrop,a.transferMap,r,g,a.offsetX,a.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(e.canvas,0,0),B.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,e,s,r,g,u){this.ctx.transform(a,e,s,r,g,u),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,e,s){const r=this.ctx,g=this.current;let O,G,u=g.x,c=g.y;const j=r.mozCurrentTransform,Y=0===j[0]&&0===j[3]||0===j[1]&&0===j[2],$=Y?s.slice(0):null;for(let se=0,re=0,fe=a.length;se<fe;se++)switch(0|a[se]){case i.OPS.rectangle:u=e[re++],c=e[re++];const pe=e[re++],ce=e[re++],P=u+pe,T=c+ce;r.moveTo(u,c),0===pe||0===ce?r.lineTo(P,T):(r.lineTo(P,c),r.lineTo(P,T),r.lineTo(u,T)),Y||g.updateRectMinMax(j,[u,c,P,T]),r.closePath();break;case i.OPS.moveTo:u=e[re++],c=e[re++],r.moveTo(u,c),Y||g.updatePathMinMax(j,u,c);break;case i.OPS.lineTo:u=e[re++],c=e[re++],r.lineTo(u,c),Y||g.updatePathMinMax(j,u,c);break;case i.OPS.curveTo:O=u,G=c,u=e[re+4],c=e[re+5],r.bezierCurveTo(e[re],e[re+1],e[re+2],e[re+3],u,c),g.updateCurvePathMinMax(j,O,G,e[re],e[re+1],e[re+2],e[re+3],u,c,$),re+=6;break;case i.OPS.curveTo2:O=u,G=c,r.bezierCurveTo(u,c,e[re],e[re+1],e[re+2],e[re+3]),g.updateCurvePathMinMax(j,O,G,u,c,e[re],e[re+1],e[re+2],e[re+3],$),u=e[re+2],c=e[re+3],re+=4;break;case i.OPS.curveTo3:O=u,G=c,u=e[re+2],c=e[re+3],r.bezierCurveTo(e[re],e[re+1],u,c,u,c),g.updateCurvePathMinMax(j,O,G,e[re],e[re+1],u,c,u,c,$),re+=4;break;case i.OPS.closePath:r.closePath()}Y&&g.updateScalingPathMinMax(j,$),g.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(a){a=!(typeof a<"u")||a;const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof s&&s?.getPattern?(e.save(),e.strokeStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,y.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a){a=!(typeof a<"u")||a;const e=this.ctx,s=this.current.fillColor;let g=!1;this.current.patternFill&&(e.save(),e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,y.PathType.FILL),g=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==u&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),g&&e.restore(),a&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oe}eoClip(){this.pendingClip=de}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,e=this.ctx;if(void 0!==a){e.save(),e.beginPath();for(let s=0;s<a.length;s++){const r=a[s];e.setTransform.apply(e,r.transform),e.translate(r.x,r.y),r.addToPath(e,r.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,e){const s=this.commonObjs.get(a),r=this.current;if(!s)throw new Error(`Can't find font for ${a}`);if(r.fontMatrix=s.fontMatrix||i.FONT_IDENTITY_MATRIX,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&(0,i.warn)("Invalid font matrix for font "+a),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;let u="normal";s.black?u="900":s.bold&&(u="bold");const c=s.italic?"italic":"normal",O=`"${s.loadedName||"sans-serif"}", ${s.fallbackName}`;let G=e;e<16?G=16:e>100&&(G=100),this.current.fontSizeScale=e/G,this.ctx.font=`${c} ${u} ${G}px ${O}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,e){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=e}setLeadingMoveText(a,e){this.setLeading(-e),this.moveText(a,e)}setTextMatrix(a,e,s,r,g,u){this.current.textMatrix=[a,e,s,r,g,u],this.current.textMatrixScale=Math.hypot(a,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,e,s,r){const g=this.ctx,u=this.current,c=u.font,O=u.textRenderingMode,G=u.fontSize/u.fontSizeScale,j=O&i.TextRenderingMode.FILL_STROKE_MASK,Y=!!(O&i.TextRenderingMode.ADD_TO_PATH_FLAG),$=u.patternFill&&!c.missingFile;let se;(c.disableFontFace||Y||$)&&(se=c.getPathGenerator(this.commonObjs,a)),c.disableFontFace||$?(g.save(),g.translate(e,s),g.beginPath(),se(g,G),r&&g.setTransform.apply(g,r),(j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&g.fill(),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&g.stroke(),g.restore()):((j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&g.fillText(a,e,s),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&g.strokeText(a,e,s)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:g.mozCurrentTransform,x:e,y:s,fontSize:G,addToPath:se})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);a.scale(1.5,1),a.fillText("I",0,10);const e=a.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){s=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(a){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(a);const r=e.fontSize;if(0===r)return;const g=this.ctx,u=e.fontSizeScale,c=e.charSpacing,O=e.wordSpacing,G=e.fontDirection,j=e.textHScale*G,Y=a.length,$=s.vertical,se=$?1:-1,re=s.defaultVMetrics,fe=r*e.fontMatrix[0],pe=e.textRenderingMode===i.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;let ce;if(g.save(),g.transform.apply(g,e.textMatrix),g.translate(e.x,e.y+e.textRise),g.scale(j,G>0?-1:1),e.patternFill){g.save();const Z=e.fillColor.getPattern(g,this,g.mozCurrentTransformInverse,y.PathType.FILL);ce=g.mozCurrentTransform,g.restore(),g.fillStyle=Z}let P=e.lineWidth;const T=e.textMatrixScale;if(0===T||0===P){const Z=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(Z===i.TextRenderingMode.STROKE||Z===i.TextRenderingMode.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=T;1!==u&&(g.scale(u,u),P/=u),g.lineWidth=P;let ne,ee=0;for(ne=0;ne<Y;++ne){const Z=a[ne];if("number"==typeof Z){ee+=se*Z*r/1e3;continue}let q=!1;const te=(Z.isSpace?O:0)+c,ae=Z.fontChar,le=Z.accent;let ge,_e,ye,Ae=Z.width;if($){const ie=Z.vmetric||re,H=-(Z.vmetric?ie[1]:.5*Ae)*fe;Ae=ie?-ie[0]:Ae,ge=H/u,_e=(ee+ie[2]*fe)/u}else ge=ee/u,_e=0;if(s.remeasure&&Ae>0){const ie=1e3*g.measureText(ae).width/r*u;if(Ae<ie&&this.isFontSubpixelAAEnabled){const H=Ae/ie;q=!0,g.save(),g.scale(H,1),ge/=H}else Ae!==ie&&(ge+=(Ae-ie)/2e3*r/u)}this.contentVisible&&(Z.isInFont||s.missingFile)&&(pe&&!le?g.fillText(ae,ge,_e):(this.paintChar(ae,ge,_e,ce),le&&this.paintChar(le.fontChar,ge+r*le.offset.x/u,_e-r*le.offset.y/u,ce))),ye=$?Ae*fe-te*G:Ae*fe+te*G,ee+=ye,q&&g.restore()}$?e.y-=ee:e.x+=ee*j,g.restore(),this.compose()}showType3Text(a){const e=this.ctx,s=this.current,r=s.font,g=s.fontSize,u=s.fontDirection,c=r.vertical?1:-1,O=s.charSpacing,G=s.wordSpacing,j=s.textHScale*u,Y=s.fontMatrix||i.FONT_IDENTITY_MATRIX,$=a.length;let re,fe,pe,ce;if(s.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==g){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,s.textMatrix),e.translate(s.x,s.y),e.scale(j,u),re=0;re<$;++re){if(fe=a[re],"number"==typeof fe){ce=c*fe*g/1e3,this.ctx.translate(ce,0),s.x+=ce*j;continue}const P=(fe.isSpace?G:0)+O,T=r.charProcOperatorList[fe.operatorListId];T?(this.contentVisible&&(this.processingType3=fe,this.save(),e.scale(g,g),e.transform.apply(e,Y),this.executeOperatorList(T),this.restore()),pe=i.Util.applyTransform([fe.width,0],Y)[0]*g+P,e.translate(pe,0),s.x+=pe*j):(0,i.warn)(`Type3 character "${fe.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(a,e){}setCharWidthAndBounds(a,e,s,r,g,u){this.ctx.rect(s,r,g-s,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let e;if("TilingPattern"===a[0]){const s=a[1],r=this.baseTransform||this.ctx.mozCurrentTransform.slice();e=new y.TilingPattern(a,s,this.ctx,{createCanvasGraphics:u=>new he(u,this.commonObjs,this.objs,this.canvasFactory)},r)}else e=this._getPattern(a[1],a[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,e,s){const r=this.selectColor?.(a,e,s)||i.Util.makeHexColor(a,e,s);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(a,e,s){const r=this.selectColor?.(a,e,s)||i.Util.makeHexColor(a,e,s);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(a,e=null){let s;return this.cachedPatterns.has(a)?s=this.cachedPatterns.get(a):(s=(0,y.getShadingPattern)(this.objs.get(a)),this.cachedPatterns.set(a,s)),e&&(s.matrix=e),s}shadingFill(a){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(a);e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,y.PathType.SHADING);const r=e.mozCurrentTransformInverse;if(r){const g=e.canvas,u=g.width,c=g.height,O=i.Util.applyTransform([0,0],r),G=i.Util.applyTransform([0,c],r),j=i.Util.applyTransform([u,0],r),Y=i.Util.applyTransform([u,c],r),$=Math.min(O[0],G[0],j[0],Y[0]),se=Math.min(O[1],G[1],j[1],Y[1]),re=Math.max(O[0],G[0],j[0],Y[0]),fe=Math.max(O[1],G[1],j[1],Y[1]);this.ctx.fillRect($,se,re-$,fe-se)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;a.isolated||(0,i.info)("TODO: Support non-isolated groups."),a.knockout&&(0,i.warn)("Knockout groups not supported.");const s=e.mozCurrentTransform;if(a.matrix&&e.transform.apply(e,a.matrix),!a.bbox)throw new Error("Bounding box is required.");let r=i.Util.getAxialAlignedBoundingBox(a.bbox,e.mozCurrentTransform);r=i.Util.intersect(r,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]);let O=Math.max(Math.ceil(r[2])-u,1),G=Math.max(Math.ceil(r[3])-c,1),j=1,Y=1;O>F&&(j=O/F,O=F),G>F&&(Y=G/F,G=F),this.current.startNewPathAndClipBox([0,0,O,G]);let $="groupAt"+this.groupLevel;a.smask&&($+="_smask_"+this.smaskCounter++%2);const se=this.cachedCanvases.getCanvas($,O,G,!0),re=se.context;re.scale(1/j,1/Y),re.translate(-u,-c),re.transform.apply(re,s),a.smask?this.smaskStack.push({canvas:se.canvas,context:re,offsetX:u,offsetY:c,scaleX:j,scaleY:Y,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,c),e.scale(j,Y),e.save()),l(e,re),this.ctx=re,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,r);const g=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(g)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(a,e,s,r,g){if(this.save(),Array.isArray(e)&&4===e.length){const u=e[2]-e[0],c=e[3]-e[1];if(g&&this.annotationCanvasMap){(s=s.slice())[4]-=e[0],s[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=u,e[3]=c;const[O,G]=i.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:j}=this,Y=Math.ceil(u*this.outputScaleX*j),$=Math.ceil(c*this.outputScaleY*j);this.annotationCanvas=this.canvasFactory.create(Y,$);const{canvas:se,context:re}=this.annotationCanvas,fe=`var(--zoom-factor) * ${D.PixelsPerInch.PDF_TO_CSS_UNITS}`;se.style.width=`calc(${u}px * ${fe})`,se.style.height=`calc(${c}px * ${fe})`,this.annotationCanvasMap.set(a,se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=re,this.ctx.setTransform(O,0,0,-G,0,c*G),w(this.ctx),b(this.ctx,this.foregroundColor)}else b(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],u,c),this.ctx.clip(),this.endPath()}this.current=new t(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,s),this.transform.apply(this,r)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(a){if(!this.contentVisible)return;const e=a.count;(a=this.getObject(a.data,a)).count=e;const s=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function n(B){const{width:a,height:e}=B;if(a>1e3||e>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),g=a+1;let c,O,G,u=new Uint8Array(g*(e+1));const j=a+7&-8;let Y=new Uint8Array(j*e),$=0;for(const T of B.data){let ee=128;for(;ee>0;)Y[$++]=T&ee?0:255,ee>>=1}let se=0;for($=0,0!==Y[$]&&(u[0]=1,++se),O=1;O<a;O++)Y[$]!==Y[$+1]&&(u[O]=Y[$]?2:1,++se),$++;for(0!==Y[$]&&(u[O]=2,++se),c=1;c<e;c++){$=c*j,G=c*g,Y[$-j]!==Y[$]&&(u[G]=Y[$]?1:8,++se);let T=(Y[$]?4:0)+(Y[$-j]?8:0);for(O=1;O<a;O++)T=(T>>2)+(Y[$+1]?4:0)+(Y[$-j+1]?8:0),r[T]&&(u[G+O]=r[T],++se),$++;if(Y[$-j]!==Y[$]&&(u[G+O]=Y[$]?2:4,++se),se>1e3)return null}for($=j*(e-1),G=c*g,0!==Y[$]&&(u[G]=8,++se),O=1;O<a;O++)Y[$]!==Y[$+1]&&(u[G+O]=Y[$]?4:8,++se),$++;if(0!==Y[$]&&(u[G+O]=4,++se),se>1e3)return null;const re=new Int32Array([0,g,-1,0,-g,0,0,0,1]);let fe,pe,ce;for(U.isNodeJS?pe=[]:fe=new Path2D,c=0;se&&c<=e;c++){let T=c*g;const ee=T+a;for(;T<ee&&!u[T];)T++;if(T===ee)continue;fe?fe.moveTo(T%g,c):ce=[T%g,c];const ne=T;let Z=u[T];do{const q=re[Z];do{T+=q}while(!u[T]);const te=u[T];5!==te&&10!==te?(Z=te,u[T]=0):(Z=te&51*Z>>4,u[T]&=Z>>2|Z<<2),fe?fe.lineTo(T%g,T/g|0):ce.push(T%g,T/g|0),u[T]||--se}while(ne!==T);fe||pe.push(ce),--c}return Y=null,u=null,function(T){if(T.save(),T.scale(1/a,-1/e),T.translate(0,-e),fe)T.fill(fe);else{T.beginPath();for(const ee of pe){T.moveTo(ee[0],ee[1]);for(let ne=2,Z=ee.length;ne<Z;ne+=2)T.lineTo(ee[ne],ee[ne+1])}T.fill()}T.beginPath(),T.restore()}}(a)),r.compiled))return void r.compiled(s);const g=this._createMaskCanvas(a),u=g.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(u,g.offsetX,g.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(a,e,s=0,r=0,g,u){if(!this.contentVisible)return;a=this.getObject(a.data,a);const c=this.ctx;c.save();const O=c.mozCurrentTransform;c.transform(e,s,r,g,0,0);const G=this._createMaskCanvas(a);c.setTransform(1,0,0,1,0,0);for(let j=0,Y=u.length;j<Y;j+=2){const $=i.Util.transform(O,[e,s,r,g,u[j],u[j+1]]),[se,re]=i.Util.applyTransform([0,0],$);c.drawImage(G.canvas,se,re)}c.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(let g=0,u=a.length;g<u;g++){const c=a[g],O=c.width,G=c.height,j=this.cachedCanvases.getCanvas("maskCanvas",O,G,!1),Y=j.context;Y.save(),f(Y,c),Y.globalCompositeOperation="source-in",Y.fillStyle=r?s.getPattern(Y,this,e.mozCurrentTransformInverse,y.PathType.FILL):s,Y.fillRect(0,0,O,G),Y.restore(),e.save(),e.transform.apply(e,c.transform),e.scale(1,-1),E(e,j.canvas,0,0,O,G,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const e=this.getObject(a);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,e,s,r){if(!this.contentVisible)return;const g=this.getObject(a);if(!g)return void(0,i.warn)("Dependent image isn't ready yet");const u=g.width,c=g.height,O=[];for(let G=0,j=r.length;G<j;G+=2)O.push({transform:[e,0,0,s,r[G],r[G+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(g,O)}paintInlineImageXObject(a){if(!this.contentVisible)return;const e=a.width,s=a.height,r=this.ctx;let g;if(this.save(),r.scale(1/e,-1/s),"function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)g=a;else{const G=this.cachedCanvases.getCanvas("inlineImage",e,s,!1);d(G.context,a,this.current.transferMaps),g=G.canvas}const u=this._scaleImage(g,r.mozCurrentTransformInverse);r.imageSmoothingEnabled=z(r.mozCurrentTransform,a.interpolate);const[c,O]=E(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,e,s);if(this.imageLayer){const G=this.getCanvasPosition(0,-s);this.imageLayer.appendImage({imgData:a,left:G[0],top:G[1],width:c,height:O})}this.compose(),this.restore()}paintInlineImageXObjectGroup(a,e){if(!this.contentVisible)return;const s=this.ctx,r=a.width,g=a.height,u=this.cachedCanvases.getCanvas("inlineImage",r,g,!1);d(u.context,a,this.current.transferMaps);for(let O=0,G=e.length;O<G;O++){const j=e[O];if(s.save(),s.transform.apply(s,j.transform),s.scale(1,-1),E(s,u.canvas,j.x,j.y,j.w,j.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(j.x,j.y);this.imageLayer.appendImage({imgData:a,left:Y[0],top:Y[1],width:r,height:g})}s.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,e){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,e){this.markedContentStack.push("OC"===a?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===de?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=this.ctx.mozCurrentTransform;if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const e=Math.abs(a[0]*a[3]-a[2]*a[1]),s=Math.hypot(a[0],a[2]),r=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:a}=this.current,e=this.ctx.mozCurrentTransform;let s,r;if(0===e[1]&&0===e[2]){const g=Math.abs(e[0]),u=Math.abs(e[3]);if(0===a)s=1/g,r=1/u;else{const c=g*a,O=u*a;s=c<1?1/c:1,r=O<1?1/O:1}}else{const g=Math.abs(e[0]*e[3]-e[2]*e[1]),u=Math.hypot(e[0],e[1]),c=Math.hypot(e[2],e[3]);if(0===a)s=c/g,r=u/g;else{const O=a*g;s=c>O?c/O:1,r=u>O?u/O:1}}this._cachedScaleForStroking=[s,r]}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:e}=this,{lineWidth:s}=this.current,[r,g]=this.getScaleForStroking();if(e.lineWidth=s||1,1===r&&1===g)return void e.stroke();let u,c,O;a&&(u=e.mozCurrentTransform.slice(),c=e.getLineDash().slice(),O=e.lineDashOffset),e.scale(r,g);const G=Math.max(r,g);e.setLineDash(e.getLineDash().map(j=>j/G)),e.lineDashOffset/=G,e.stroke(),a&&(e.setTransform(...u),e.setLineDash(c),e.lineDashOffset=O)}getCanvasPosition(a,e){const s=this.ctx.mozCurrentTransform;return[s[0]*a+s[2]*e+s[4],s[1]*a+s[3]*e+s[5]]}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}o.CanvasGraphics=he;for(const B in i.OPS)void 0!==he.prototype[B]&&(he.prototype[i.OPS[B]]=he.prototype[B])},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=function I(L){switch(L[0]){case"RadialAxial":return new S(L);case"Mesh":return new N(L);case"Dummy":return new p}throw new Error(`Unknown IR type: ${L[0]}`)};var i=C(1),y=C(3);const M={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function U(L,A){if(!A||y.isNodeJS)return;const w=A[2]-A[0],k=A[3]-A[1],E=new Path2D;E.rect(A[0],A[1],w,k),L.clip(E)}o.PathType=M;class D{constructor(){this.constructor===D&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class S extends D{constructor(A){super(),this._type=A[1],this._bbox=A[2],this._colorStops=A[3],this._p0=A[4],this._p1=A[5],this._r0=A[6],this._r1=A[7],this.matrix=null}_createGradient(A){let w;"axial"===this._type?w=A.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(w=A.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)w.addColorStop(k[0],k[1]);return w}getPattern(A,w,k,E){let n;if(E===M.STROKE||E===M.FILL){const t=w.current.getClippedPathBoundingBox(E,A.mozCurrentTransform)||[0,0,0,0],d=Math.ceil(t[2]-t[0])||1,f=Math.ceil(t[3]-t[1])||1,l=w.cachedCanvases.getCanvas("pattern",d,f,!0),b=l.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-t[0],-t[1]),k=i.Util.transform(k,[1,0,0,1,t[0],t[1]]),b.transform.apply(b,w.baseTransform),this.matrix&&b.transform.apply(b,this.matrix),U(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),n=A.createPattern(l.canvas,"no-repeat");const m=new DOMMatrix(k);try{n.setTransform(m)}catch(h){(0,i.warn)(`RadialAxialShadingPattern.getPattern: "${h?.message}".`)}}else U(A,this._bbox),n=this._createGradient(A);return n}}function _(L,A,w,k,E,n,t,d){const f=A.coords,l=A.colors,b=L.data,m=4*L.width;let h;f[w+1]>f[k+1]&&(h=w,w=k,k=h,h=n,n=t,t=h),f[k+1]>f[E+1]&&(h=k,k=E,E=h,h=t,t=d,d=h),f[w+1]>f[k+1]&&(h=w,w=k,k=h,h=n,n=t,t=h);const x=(f[w]+A.offsetX)*A.scaleX,R=(f[w+1]+A.offsetY)*A.scaleY,V=(f[k]+A.offsetX)*A.scaleX,z=(f[k+1]+A.offsetY)*A.scaleY,J=(f[E]+A.offsetX)*A.scaleX,X=(f[E+1]+A.offsetY)*A.scaleY;if(R>=X)return;const oe=l[n],de=l[n+1],he=l[n+2],B=l[t],a=l[t+1],e=l[t+2],s=l[d],r=l[d+1],g=l[d+2],u=Math.round(R),c=Math.round(X);let O,G,j,Y,$,se,re,fe;for(let pe=u;pe<=c;pe++){if(pe<z){let ne;ne=pe<R?0:(R-pe)/(R-z),O=x-(x-V)*ne,G=oe-(oe-B)*ne,j=de-(de-a)*ne,Y=he-(he-e)*ne}else{let ne;ne=pe>X?1:z===X?0:(z-pe)/(z-X),O=V-(V-J)*ne,G=B-(B-s)*ne,j=a-(a-r)*ne,Y=e-(e-g)*ne}let ce;ce=pe<R?0:pe>X?1:(R-pe)/(R-X),$=x-(x-J)*ce,se=oe-(oe-s)*ce,re=de-(de-r)*ce,fe=he-(he-g)*ce;const P=Math.round(Math.min(O,$)),T=Math.round(Math.max(O,$));let ee=m*pe+4*P;for(let ne=P;ne<=T;ne++)ce=(O-ne)/(O-$),ce<0?ce=0:ce>1&&(ce=1),b[ee++]=G-(G-se)*ce|0,b[ee++]=j-(j-re)*ce|0,b[ee++]=Y-(Y-fe)*ce|0,b[ee++]=255}}function F(L,A,w){const k=A.coords,E=A.colors;let n,t;switch(A.type){case"lattice":const d=A.verticesPerRow,f=Math.floor(k.length/d)-1,l=d-1;for(n=0;n<f;n++){let b=n*d;for(let m=0;m<l;m++,b++)_(L,w,k[b],k[b+1],k[b+d],E[b],E[b+1],E[b+d]),_(L,w,k[b+d+1],k[b+1],k[b+d],E[b+d+1],E[b+1],E[b+d])}break;case"triangles":for(n=0,t=k.length;n<t;n+=3)_(L,w,k[n],k[n+1],k[n+2],E[n],E[n+1],E[n+2]);break;default:throw new Error("illegal figure")}}class N extends D{constructor(A){super(),this._coords=A[2],this._colors=A[3],this._figures=A[4],this._bounds=A[5],this._bbox=A[7],this._background=A[8],this.matrix=null}_createMeshCanvas(A,w,k){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-d,b=Math.ceil(this._bounds[3])-f,m=Math.min(Math.ceil(Math.abs(l*A[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(b*A[1]*1.1)),3e3),x=l/m,R=b/h,V={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/x,scaleY:1/R},X=k.getCanvas("mesh",m+4,h+4,!1),oe=X.context,de=oe.createImageData(m,h);if(w){const B=de.data;for(let a=0,e=B.length;a<e;a+=4)B[a]=w[0],B[a+1]=w[1],B[a+2]=w[2],B[a+3]=255}for(const B of this._figures)F(de,B,V);return oe.putImageData(de,2,2),{canvas:X.canvas,offsetX:d-2*x,offsetY:f-2*R,scaleX:x,scaleY:R}}getPattern(A,w,k,E){let n;if(U(A,this._bbox),E===M.SHADING)n=i.Util.singularValueDecompose2dScale(A.mozCurrentTransform);else if(n=i.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const d=i.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*d[0],n[1]*d[1]]}const t=this._createMeshCanvas(n,E===M.SHADING?null:this._background,w.cachedCanvases);return E!==M.SHADING&&(A.setTransform.apply(A,w.baseTransform),this.matrix&&A.transform.apply(A,this.matrix)),A.translate(t.offsetX,t.offsetY),A.scale(t.scaleX,t.scaleY),A.createPattern(t.canvas,"no-repeat")}}class p extends D{getPattern(){return"hotpink"}}class v{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(A,w,k,E,n){this.operatorList=A[2],this.matrix=A[3]||[1,0,0,1,0,0],this.bbox=A[4],this.xstep=A[5],this.ystep=A[6],this.paintType=A[7],this.tilingType=A[8],this.color=w,this.ctx=k,this.canvasGraphicsFactory=E,this.baseTransform=n}createPatternCanvas(A){const w=this.operatorList,k=this.bbox,E=this.xstep,n=this.ystep,t=this.paintType,f=this.color,l=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+this.tilingType);const b=k[0],m=k[1],h=k[2],x=k[3],R=i.Util.singularValueDecompose2dScale(this.matrix),V=i.Util.singularValueDecompose2dScale(this.baseTransform),z=[R[0]*V[0],R[1]*V[1]],J=this.getSizeAndScale(E,this.ctx.canvas.width,z[0]),X=this.getSizeAndScale(n,this.ctx.canvas.height,z[1]),oe=A.cachedCanvases.getCanvas("pattern",J.size,X.size,!0),de=oe.context,he=l.createCanvasGraphics(de);he.groupLevel=A.groupLevel,this.setFillAndStrokeStyleToContext(he,t,f);let B=b,a=m,e=h,s=x;return b<0&&(B=0,e+=Math.abs(b)),m<0&&(a=0,s+=Math.abs(m)),de.translate(-J.scale*B,-X.scale*a),he.transform(J.scale,0,0,X.scale,0,0),de.save(),this.clipBbox(he,B,a,e,s),he.baseTransform=he.ctx.mozCurrentTransform.slice(),he.executeOperatorList(w),he.endDrawing(),{canvas:oe.canvas,scaleX:J.scale,scaleY:X.scale,offsetX:B,offsetY:a}}getSizeAndScale(A,w,k){A=Math.abs(A);const E=Math.max(v.MAX_PATTERN_SIZE,w);let n=Math.ceil(A*k);return n>=E?n=E:k=n/A,{scale:k,size:n}}clipBbox(A,w,k,E,n){A.ctx.rect(w,k,E-w,n-k),A.current.updateRectMinMax(A.ctx.mozCurrentTransform,[w,k,E,n]),A.clip(),A.endPath()}setFillAndStrokeStyleToContext(A,w,k){const E=A.ctx,n=A.current;switch(w){case 1:const t=this.ctx;E.fillStyle=t.fillStyle,E.strokeStyle=t.strokeStyle,n.fillColor=t.fillStyle,n.strokeColor=t.strokeStyle;break;case 2:const d=i.Util.makeHexColor(k[0],k[1],k[2]);E.fillStyle=d,E.strokeStyle=d,n.fillColor=d,n.strokeColor=d;break;default:throw new i.FormatError(`Unsupported paint type: ${w}`)}}getPattern(A,w,k,E){let n=k;E!==M.SHADING&&(n=i.Util.transform(n,w.baseTransform),this.matrix&&(n=i.Util.transform(n,this.matrix)));const t=this.createPatternCanvas(w);let d=new DOMMatrix(n);d=d.translate(t.offsetX,t.offsetY),d=d.scale(1/t.scaleX,1/t.scaleY);const f=A.createPattern(t.canvas,"repeat");try{f.setTransform(d)}catch(l){(0,i.warn)(`TilingPattern.getPattern: "${l?.message}".`)}return f}}o.TilingPattern=v},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.applyMaskImageData=function y({src:M,srcPos:U=0,dest:D,destPos:S=0,width:_,height:F,inverseDecode:N=!1}){const p=i.FeatureTest.isLittleEndian?4278190080:255,[I,W]=N?[0,p]:[p,0],v=_>>3,L=7&_,A=M.length;D=new Uint32Array(D.buffer);for(let w=0;w<F;w++){for(const E=U+v;U<E;U++){const n=U<A?M[U]:255;D[S++]=128&n?W:I,D[S++]=64&n?W:I,D[S++]=32&n?W:I,D[S++]=16&n?W:I,D[S++]=8&n?W:I,D[S++]=4&n?W:I,D[S++]=2&n?W:I,D[S++]=1&n?W:I}if(0===L)continue;const k=U<A?M[U++]:255;for(let E=0;E<L;E++)D[S++]=k&1<<7-E?W:I}return{srcPos:U,destPos:S}};var i=C(1)},(Q,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const C=Object.create(null);o.GlobalWorkerOptions=C,C.workerPort=void 0===C.workerPort?null:C.workerPort,C.workerSrc=void 0===C.workerSrc?"":C.workerSrc},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var i=C(1);function U(S){switch(S instanceof Error||"object"==typeof S&&null!==S||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new i.AbortException(S.message);case"MissingPDFException":return new i.MissingPDFException(S.message);case"PasswordException":return new i.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new i.UnknownErrorException(S.message,S.details);default:return new i.UnknownErrorException(S.message,S.toString())}}o.MessageHandler=class D{constructor(_,F,N){this.sourceName=_,this.targetName=F,this.comObj=N,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=p=>{const I=p.data;if(I.targetName!==this.sourceName)return;if(I.stream)return void this._processStreamMessage(I);if(I.callback){const v=I.callbackId,L=this.callbackCapabilities[v];if(!L)throw new Error(`Cannot resolve callback ${v}`);if(delete this.callbackCapabilities[v],1===I.callback)L.resolve(I.data);else{if(2!==I.callback)throw new Error("Unexpected callback case");L.reject(U(I.reason))}return}const W=this.actionHandler[I.action];if(!W)throw new Error(`Unknown action from worker: ${I.action}`);if(I.callbackId){const v=this.sourceName,L=I.sourceName;new Promise(function(A){A(W(I.data))}).then(function(A){N.postMessage({sourceName:v,targetName:L,callback:1,callbackId:I.callbackId,data:A})},function(A){N.postMessage({sourceName:v,targetName:L,callback:2,callbackId:I.callbackId,reason:U(A)})})}else I.streamId?this._createStreamSink(I):W(I.data)},N.addEventListener("message",this._onComObjOnMessage)}on(_,F){const N=this.actionHandler;if(N[_])throw new Error(`There is already an actionName called "${_}"`);N[_]=F}send(_,F,N){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,data:F},N)}sendWithPromise(_,F,N){const p=this.callbackId++,I=(0,i.createPromiseCapability)();this.callbackCapabilities[p]=I;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,callbackId:p,data:F},N)}catch(W){I.reject(W)}return I.promise}sendWithStream(_,F,N,p){const I=this.streamId++,W=this.sourceName,v=this.targetName,L=this.comObj;return new ReadableStream({start:A=>{const w=(0,i.createPromiseCapability)();return this.streamControllers[I]={controller:A,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},L.postMessage({sourceName:W,targetName:v,action:_,streamId:I,data:F,desiredSize:A.desiredSize},p),w.promise},pull:A=>{const w=(0,i.createPromiseCapability)();return this.streamControllers[I].pullCall=w,L.postMessage({sourceName:W,targetName:v,stream:6,streamId:I,desiredSize:A.desiredSize}),w.promise},cancel:A=>{(0,i.assert)(A instanceof Error,"cancel must have a valid reason");const w=(0,i.createPromiseCapability)();return this.streamControllers[I].cancelCall=w,this.streamControllers[I].isClosed=!0,L.postMessage({sourceName:W,targetName:v,stream:1,streamId:I,reason:U(A)}),w.promise}},N)}_createStreamSink(_){const F=_.streamId,N=this.sourceName,p=_.sourceName,I=this.comObj,W=this,v=this.actionHandler[_.action],L={enqueue(A,w=1,k){if(this.isCancelled)return;const E=this.desiredSize;this.desiredSize-=w,E>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),I.postMessage({sourceName:N,targetName:p,stream:4,streamId:F,chunk:A},k)},close(){this.isCancelled||(this.isCancelled=!0,I.postMessage({sourceName:N,targetName:p,stream:3,streamId:F}),delete W.streamSinks[F])},error(A){(0,i.assert)(A instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,I.postMessage({sourceName:N,targetName:p,stream:5,streamId:F,reason:U(A)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:_.desiredSize,ready:null};L.sinkCapability.resolve(),L.ready=L.sinkCapability.promise,this.streamSinks[F]=L,new Promise(function(A){A(v(_.data,L))}).then(function(){I.postMessage({sourceName:N,targetName:p,stream:8,streamId:F,success:!0})},function(A){I.postMessage({sourceName:N,targetName:p,stream:8,streamId:F,reason:U(A)})})}_processStreamMessage(_){const F=_.streamId,N=this.sourceName,p=_.sourceName,I=this.comObj,W=this.streamControllers[F],v=this.streamSinks[F];switch(_.stream){case 8:_.success?W.startCall.resolve():W.startCall.reject(U(_.reason));break;case 7:_.success?W.pullCall.resolve():W.pullCall.reject(U(_.reason));break;case 6:if(!v){I.postMessage({sourceName:N,targetName:p,stream:7,streamId:F,success:!0});break}v.desiredSize<=0&&_.desiredSize>0&&v.sinkCapability.resolve(),v.desiredSize=_.desiredSize,new Promise(function(L){L(v.onPull&&v.onPull())}).then(function(){I.postMessage({sourceName:N,targetName:p,stream:7,streamId:F,success:!0})},function(L){I.postMessage({sourceName:N,targetName:p,stream:7,streamId:F,reason:U(L)})});break;case 4:if((0,i.assert)(W,"enqueue should have stream controller"),W.isClosed)break;W.controller.enqueue(_.chunk);break;case 3:if((0,i.assert)(W,"close should have stream controller"),W.isClosed)break;W.isClosed=!0,W.controller.close(),this._deleteStreamController(W,F);break;case 5:(0,i.assert)(W,"error should have stream controller"),W.controller.error(U(_.reason)),this._deleteStreamController(W,F);break;case 2:_.success?W.cancelCall.resolve():W.cancelCall.reject(U(_.reason)),this._deleteStreamController(W,F);break;case 1:if(!v)break;new Promise(function(L){L(v.onCancel&&v.onCancel(U(_.reason)))}).then(function(){I.postMessage({sourceName:N,targetName:p,stream:2,streamId:F,success:!0})},function(L){I.postMessage({sourceName:N,targetName:p,stream:2,streamId:F,reason:U(L)})}),v.sinkCapability.reject(U(_.reason)),v.isCancelled=!0,delete this.streamSinks[F];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(_,F){var N=this;return _asyncToGenerator(function*(){yield Promise.allSettled([_.startCall&&_.startCall.promise,_.pullCall&&_.pullCall.promise,_.cancelCall&&_.cancelCall.promise]),delete N.streamControllers[F]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var i=C(1),y=new WeakMap,M=new WeakMap;o.Metadata=class U{constructor({parsedData:S,rawData:_}){_classPrivateFieldInitSpec(this,y,void 0),_classPrivateFieldInitSpec(this,M,void 0),_classPrivateFieldSet(y,this,S),_classPrivateFieldSet(M,this,_)}getRaw(){return _classPrivateFieldGet(M,this)}get(S){return _classPrivateFieldGet(y,this).get(S)??null}getAll(){return(0,i.objectFromMap)(_classPrivateFieldGet(y,this))}has(S){return _classPrivateFieldGet(y,this).has(S)}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var i=C(1);class y{constructor(D,S){this.visible=!0,this.name=D,this.intent=S}}o.OptionalContentConfig=class M{constructor(D){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==D){this.name=D.name,this.creator=D.creator,this._order=D.order;for(const S of D.groups)this._groups.set(S.id,new y(S.name,S.intent));if("OFF"===D.baseState)for(const S of this._groups)S.visible=!1;for(const S of D.on)this._groups.get(S).visible=!0;for(const S of D.off)this._groups.get(S).visible=!1}}_evaluateVisibilityExpression(D){const S=D.length;if(S<2)return!0;const _=D[0];for(let F=1;F<S;F++){const N=D[F];let p;if(Array.isArray(N))p=this._evaluateVisibilityExpression(N);else{if(!this._groups.has(N))return(0,i.warn)(`Optional content group not found: ${N}`),!0;p=this._groups.get(N).visible}switch(_){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return"And"===_}isVisible(D){if(0===this._groups.size)return!0;if(!D)return(0,i.warn)("Optional content group not defined."),!0;if("OCG"===D.type)return this._groups.has(D.id)?this._groups.get(D.id).visible:((0,i.warn)(`Optional content group not found: ${D.id}`),!0);if("OCMD"===D.type){if(D.expression)return this._evaluateVisibilityExpression(D.expression);if(!D.policy||"AnyOn"===D.policy){for(const S of D.ids){if(!this._groups.has(S))return(0,i.warn)(`Optional content group not found: ${S}`),!0;if(this._groups.get(S).visible)return!0}return!1}if("AllOn"===D.policy){for(const S of D.ids){if(!this._groups.has(S))return(0,i.warn)(`Optional content group not found: ${S}`),!0;if(!this._groups.get(S).visible)return!1}return!0}if("AnyOff"===D.policy){for(const S of D.ids){if(!this._groups.has(S))return(0,i.warn)(`Optional content group not found: ${S}`),!0;if(!this._groups.get(S).visible)return!0}return!1}if("AllOff"===D.policy){for(const S of D.ids){if(!this._groups.has(S))return(0,i.warn)(`Optional content group not found: ${S}`),!0;if(this._groups.get(S).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${D.policy}.`),!0}return(0,i.warn)(`Unknown group type ${D.type}.`),!0}setVisibility(D,S=!0){this._groups.has(D)?this._groups.get(D).visible=!!S:(0,i.warn)(`Optional content group not found: ${D}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,i.objectFromMap)(this._groups):null}getGroup(D){return this._groups.get(D)||null}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var i=C(1),y=C(5);o.PDFDataTransportStream=class M{constructor(_,F){(0,i.assert)(F,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_.progressiveDone||!1,this._contentDispositionFilename=_.contentDispositionFilename||null;const N=_.initialData;if(N?.length>0){const p=new Uint8Array(N).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=F,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._contentLength=_.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,I)=>{this._onReceiveData({begin:p,chunk:I})}),this._pdfDataRangeTransport.addProgressListener((p,I)=>{this._onProgress({loaded:p,total:I})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(_){const F=new Uint8Array(_.chunk).buffer;if(void 0===_.begin)this._fullRequestReader?this._fullRequestReader._enqueue(F):this._queuedChunks.push(F);else{const N=this._rangeReaders.some(function(p){return p._begin===_.begin&&(p._enqueue(F),!0)});(0,i.assert)(N,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(_){if(void 0===_.total){const F=this._rangeReaders[0];F?.onProgress&&F.onProgress({loaded:_.loaded})}else{const F=this._fullRequestReader;F?.onProgress&&F.onProgress({loaded:_.loaded,total:_.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const F=this._rangeReaders.indexOf(_);F>=0&&this._rangeReaders.splice(F,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new U(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,F){if(F<=this._progressiveDataLength)return null;const N=new D(this,_,F);return this._pdfDataRangeTransport.requestDataRange(_,F),this._rangeReaders.push(N),N}cancelAllRequests(_){this._fullRequestReader&&this._fullRequestReader.cancel(_);for(const F of this._rangeReaders.slice(0))F.cancel(_);this._pdfDataRangeTransport.abort()}};class U{constructor(_,F,N=!1,p=null){this._stream=_,this._done=N||!1,this._filename=(0,y.isPdfFile)(p)?p:null,this._queuedChunks=F||[],this._loaded=0;for(const I of this._queuedChunks)this._loaded+=I.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var _=this;return _asyncToGenerator(function*(){if(_._queuedChunks.length>0)return{value:_._queuedChunks.shift(),done:!1};if(_._done)return{value:void 0,done:!0};const F=(0,i.createPromiseCapability)();return _._requests.push(F),F.promise})()}cancel(_){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class D{constructor(_,F,N){this._stream=_,this._begin=F,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(0===this._requests.length)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var _=this;return _asyncToGenerator(function*(){if(_._queuedChunk){const N=_._queuedChunk;return _._queuedChunk=null,{value:N,done:!1}}if(_._done)return{value:void 0,done:!0};const F=(0,i.createPromiseCapability)();return _._requests.push(F),F.promise})()}cancel(_){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Q,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class C{static textContent(y){const M=[],U={items:M,styles:Object.create(null)};return function D(S){if(!S)return;let _=null;const F=S.name;if("#text"===F)_=S.value;else{if(!C.shouldBuildText(F))return;S?.attributes?.textContent?_=S.attributes.textContent:S.value&&(_=S.value)}if(null!==_&&M.push({str:_}),S.children)for(const N of S.children)D(N)}(y),U}static shouldBuildText(y){return!("textarea"===y||"input"===y||"option"===y||"select"===y)}}o.XfaText=C},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var i=C(6);const y=function(S){return new Promise((_,F)=>{__webpack_require__(23237).readFile(S,(p,I)=>{!p&&I?_(new Uint8Array(I)):F(new Error(p))})})};o.NodeCanvasFactory=class M extends i.BaseCanvasFactory{_createCanvas(_,F){return __webpack_require__(17640).createCanvas(_,F)}},o.NodeCMapReaderFactory=class U extends i.BaseCMapReaderFactory{_fetchData(_,F){return y(_).then(N=>({cMapData:N,compressionType:F}))}},o.NodeStandardFontDataFactory=class D extends i.BaseStandardFontDataFactory{_fetchData(_){return y(_)}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationLayer=void 0;var i=C(1),y=C(5),M=C(8),U=C(21),D=C(22);const S=1e3,_=new WeakSet;function F(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class N{static create(e){switch(e.data.annotationType){case i.AnnotationType.LINK:return new I(e);case i.AnnotationType.TEXT:return new W(e);case i.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new L(e);case"Btn":return e.data.radioButton?new w(e):e.data.checkBox?new A(e):new k(e);case"Ch":return new E(e)}return new v(e);case i.AnnotationType.POPUP:return new n(e);case i.AnnotationType.FREETEXT:return new d(e);case i.AnnotationType.LINE:return new f(e);case i.AnnotationType.SQUARE:return new l(e);case i.AnnotationType.CIRCLE:return new b(e);case i.AnnotationType.POLYLINE:return new m(e);case i.AnnotationType.CARET:return new x(e);case i.AnnotationType.INK:return new R(e);case i.AnnotationType.POLYGON:return new h(e);case i.AnnotationType.HIGHLIGHT:return new V(e);case i.AnnotationType.UNDERLINE:return new z(e);case i.AnnotationType.SQUIGGLY:return new J(e);case i.AnnotationType.STRIKEOUT:return new X(e);case i.AnnotationType.STAMP:return new oe(e);case i.AnnotationType.FILEATTACHMENT:return new de(e);default:return new p(e)}}}class p{constructor(e,{isRenderable:s=!1,ignoreBorder:r=!1,createQuadrilaterals:g=!1}={}){this.isRenderable=s,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,s&&(this.container=this._createContainer(r)),g&&(this.quadrilaterals=this._createQuadrilaterals(r))}_createContainer(e=!1){const s=this.data,r=this.page,g=this.viewport,u=document.createElement("section");let{width:c,height:O}=F(s.rect);u.setAttribute("data-annotation-id",s.id);const G=i.Util.normalizeRect([s.rect[0],r.view[3]-s.rect[1]+r.view[1],s.rect[2],r.view[3]-s.rect[3]+r.view[1]]);if(s.hasOwnCanvas){const j=g.transform.slice(),[Y,$]=i.Util.singularValueDecompose2dScale(j);c=Math.ceil(c*Y),O=Math.ceil(O*$),G[0]*=Y,G[1]*=$;for(let se=0;se<4;se++)j[se]=Math.sign(j[se]);u.style.transform=`matrix(${j.join(",")})`}else u.style.transform=`matrix(${g.transform.join(",")})`;if(u.style.transformOrigin=`${-G[0]}px ${-G[1]}px`,!e&&s.borderStyle.width>0){u.style.borderWidth=`${s.borderStyle.width}px`,s.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(c-=2*s.borderStyle.width,O-=2*s.borderStyle.width);const j=s.borderStyle.horizontalCornerRadius,Y=s.borderStyle.verticalCornerRadius;switch((j>0||Y>0)&&(u.style.borderRadius=`${j}px / ${Y}px`),s.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:u.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:u.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:u.style.borderBottomStyle="solid"}s.borderColor||s.color?u.style.borderColor=i.Util.makeHexColor(0|s.color[0],0|s.color[1],0|s.color[2]):u.style.borderWidth=0}return u.style.left=`${G[0]}px`,u.style.top=`${G[1]}px`,s.hasOwnCanvas?u.style.width=u.style.height="auto":(u.style.width=`${c}px`,u.style.height=`${O}px`),u}get _commonActions(){const e=(s,r,g)=>{const u=g.detail[s];g.target.style[r]=U.ColorConverters[`${u[0]}_HTML`](u.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:s=>{const r=s.detail.display%2==1;s.target.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:r,print:0===s.detail.display||3===s.detail.display})},print:s=>{this.annotationStorage.setValue(this.data.id,{print:s.detail.print})},hidden:s=>{s.target.style.visibility=s.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:s.detail.hidden})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.detail.readonly?s.target.setAttribute("readonly",""):s.target.removeAttribute("readonly")},required:s=>{s.detail.required?s.target.setAttribute("required",""):s.target.removeAttribute("required")},bgColor:s=>{e("bgColor","backgroundColor",s)},fillColor:s=>{e("fillColor","backgroundColor",s)},fgColor:s=>{e("fgColor","color",s)},textColor:s=>{e("textColor","color",s)},borderColor:s=>{e("borderColor","borderColor",s)},strokeColor:s=>{e("strokeColor","borderColor",s)}})}_dispatchEventFromSandbox(e,s){const r=this._commonActions;for(const g of Object.keys(s.detail)){const u=e[g]||r[g];u&&u(s)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const r=this._commonActions;for(const[g,u]of Object.entries(s)){const c=r[g];c&&(c({detail:u,target:e}),delete s[g])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const s=[],r=this.data.rect;for(const g of this.data.quadPoints)this.data.rect=[g[2].x,g[2].y,g[1].x,g[1].y],s.push(this._createContainer(e));return this.data.rect=r,s}_createPopup(e,s){let r=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,r=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=r.style.height,e.style.width=r.style.width,r.appendChild(e));const u=new t({container:r,trigger:e,color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,hideWrapper:!0}).render();u.style.left=r.style.width,r.appendChild(u)}_renderQuadrilaterals(e){for(const s of this.quadrilaterals)s.className=e;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,s=null){const r=[];if(this._fieldObjects){const g=this._fieldObjects[e];if(g)for(const{page:u,id:c,exportValues:O}of g){if(-1===u||c===s)continue;const G="string"==typeof O?O:null,j=document.getElementById(c);!j||_.has(j)?r.push({id:c,exportValue:G,domElement:j}):(0,i.warn)(`_getElementsByName - element not allowed: ${c}`)}return r}for(const g of document.getElementsByName(e)){const{id:u,exportValue:c}=g;u!==s&&_.has(g)&&r.push({id:u,exportValue:c,domElement:g})}return r}static get platform(){const e=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class I extends p{constructor(e,s=null){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),ignoreBorder:!!s?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:e,linkService:s}=this,r=document.createElement("a");if(e.url)s.addLinkAttributes(r,e.url,e.newWindow);else if(e.action)this._bindNamedAction(r,e.action);else if(e.dest)this._bindLink(r,e.dest);else{let g=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(g=!0,this._bindJSAction(r,e)),e.resetForm?this._bindResetFormAction(r,e.resetForm):g||this._bindLink(r,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((g,u)=>{const c=0===u?r:r.cloneNode();return g.appendChild(c),g}):(this.container.className="linkAnnotation",this.container.appendChild(r),this.container)}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||""===s)&&(e.className="internalLink")}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),e.className="internalLink"}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const g of Object.keys(s.actions)){const u=r.get(g);u&&(e[u]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:g}}),!1))}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,s){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(e.onclick=()=>!1));e.onclick=()=>{r&&r();const{fields:g,refs:u,include:c}=s,O=[];if(0!==g.length||0!==u.length){const Y=new Set(u);for(const $ of g){const se=this._fieldObjects[$]||[];for(const{id:re}of se)Y.add(re)}for(const $ of Object.values(this._fieldObjects))for(const se of $)Y.has(se.id)===c&&O.push(se)}else for(const Y of Object.values(this._fieldObjects))O.push(...Y);const G=this.annotationStorage,j=[];for(const Y of O){const{id:$}=Y;switch(j.push($),Y.type){case"text":case"combobox":case"listbox":G.setValue($,{value:Y.defaultValue||""});break;case"checkbox":case"radiobutton":G.setValue($,{value:Y.defaultValue===Y.exportValues});break;default:continue}const se=document.getElementById($);!se||!_.has(se)||se.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:j,name:"ResetForm"}}),!1}}}class W extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class v extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:s,isMac:r}=p.platform;return s&&e.ctrlKey||r&&e.metaKey}_setEventListener(e,s,r,g){s.includes("mouse")?e.addEventListener(s,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:g(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(s,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:g(u)}})})}_setEventListeners(e,s,r){for(const[g,u]of s)("Action"===u||this.data.actions?.[u])&&this._setEventListener(e,g,u,r)}_setBackgroundColor(e){const s=this.data.backgroundColor||null;e.style.backgroundColor=null===s?"transparent":i.Util.makeHexColor(s[0],s[1],s[2])}}class L extends v{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,s,r,g){const u=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[s]=r),u.setValue(c.id,{[g]:r})}render(){const e=this.annotationStorage,s=this.data.id;this.container.className="textWidgetAnnotation";let r=null;if(this.renderForms){const g=e.getValue(s,{value:this.data.fieldValue}),u=g.formattedValue||g.value||"",c={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u):(r=document.createElement("input"),r.type="text",r.setAttribute("value",u)),_.add(r),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=S,c.userValue=u,r.setAttribute("id",s),r.addEventListener("input",G=>{e.setValue(s,{value:G.target.value}),this.setPropertyOnSiblings(r,"value",G.target.value,"value")}),r.addEventListener("resetform",G=>{r.value=c.userValue=this.data.defaultFieldValue??"",c.formattedValue=null});let O=G=>{const{formattedValue:j}=c;null!=j&&(G.target.value=j),G.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",j=>{c.userValue&&(j.target.value=c.userValue),c.valueOnFocus=j.target.value}),r.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value($){c.userValue=$.detail.value??"",e.setValue(s,{value:c.userValue.toString()}),$.target.value=c.userValue},formattedValue($){const{formattedValue:se}=$.detail;c.formattedValue=se,null!=se&&$.target!==document.activeElement&&($.target.value=se),e.setValue(s,{formattedValue:se})},selRange($){$.target.setSelectionRange(...$.detail.selRange)}},j)}),r.addEventListener("keydown",j=>{let Y=-1;if("Escape"===j.key?Y=0:"Enter"===j.key?Y=2:"Tab"===j.key&&(Y=3),-1===Y)return;const{value:$}=j.target;c.valueOnFocus!==$&&(c.userValue=$,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:$,willCommit:!0,commitKey:Y,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}))});const G=O;O=null,r.addEventListener("blur",j=>{const{value:Y}=j.target;c.userValue=Y,this._mouseState.isDown&&c.valueOnFocus!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}),G(j)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",j=>{const{data:Y,target:$}=j,{value:se,selectionStart:re,selectionEnd:fe}=$;let pe=re,ce=fe;switch(j.inputType){case"deleteWordBackward":{const P=se.substring(0,re).match(/\w*[^\w]*$/);P&&(pe-=P[0].length);break}case"deleteWordForward":{const P=se.substring(re).match(/^[^\w]*\w*/);P&&(ce+=P[0].length);break}case"deleteContentBackward":re===fe&&(pe-=1);break;case"deleteContentForward":re===fe&&(ce+=1)}j.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:se,change:Y||"",willCommit:!1,selStart:pe,selEnd:ce}})}),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.value)}if(O&&r.addEventListener("blur",O),null!==this.data.maxLen&&(r.maxLength=this.data.maxLen),this.data.comb){const j=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;r.classList.add("comb"),r.style.letterSpacing=`calc(${j}px - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell";return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.appendChild(r),this.container}_setTextStyle(e){const{fontSize:r,fontColor:g}=this.data.defaultAppearanceData,u=e.style;r&&(u.fontSize=`${r}px`),u.color=i.Util.makeHexColor(g[0],g[1],g[2]),null!==this.data.textAlignment&&(u.textAlign=["left","center","right"][this.data.textAlignment])}}class A extends v{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,s=this.data,r=s.id;let g=e.getValue(r,{value:s.exportValue===s.fieldValue}).value;"string"==typeof g&&(g="Off"!==g,e.setValue(r,{value:g})),this.container.className="buttonWidgetAnnotation checkBox";const u=document.createElement("input");return _.add(u),u.disabled=s.readOnly,u.type="checkbox",u.name=s.fieldName,g&&u.setAttribute("checked",!0),u.setAttribute("id",r),u.setAttribute("exportValue",s.exportValue),u.tabIndex=S,u.addEventListener("change",c=>{const{name:O,checked:G}=c.target;for(const j of this._getElementsByName(O,r)){const Y=G&&j.exportValue===s.exportValue;j.domElement&&(j.domElement.checked=Y),e.setValue(j.id,{value:Y})}e.setValue(r,{value:G})}),u.addEventListener("resetform",c=>{c.target.checked=(s.defaultFieldValue||"Off")===s.exportValue}),this.enableScripting&&this.hasJSActions&&(u.addEventListener("updatefromsandbox",c=>{this._dispatchEventFromSandbox({value(G){G.target.checked="Off"!==G.detail.value,e.setValue(r,{value:G.target.checked})}},c)}),this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.appendChild(u),this.container}}class w extends v{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,s=this.data,r=s.id;let g=e.getValue(r,{value:s.fieldValue===s.buttonValue}).value;"string"==typeof g&&(g=g!==s.buttonValue,e.setValue(r,{value:g}));const u=document.createElement("input");if(_.add(u),u.disabled=s.readOnly,u.type="radio",u.name=s.fieldName,g&&u.setAttribute("checked",!0),u.setAttribute("id",r),u.tabIndex=S,u.addEventListener("change",c=>{const{name:O,checked:G}=c.target;for(const j of this._getElementsByName(O,r))e.setValue(j.id,{value:!1});e.setValue(r,{value:G})}),u.addEventListener("resetform",c=>{const O=s.defaultFieldValue;c.target.checked=null!=O&&O===s.buttonValue}),this.enableScripting&&this.hasJSActions){const c=s.buttonValue;u.addEventListener("updatefromsandbox",O=>{this._dispatchEventFromSandbox({value:j=>{const Y=c===j.detail.value;for(const $ of this._getElementsByName(j.target.name)){const se=Y&&$.id===r;$.domElement&&($.domElement.checked=se),e.setValue($.id,{value:se})}}},O)}),this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],O=>O.target.checked)}return this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.appendChild(u),this.container}}class k extends I{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class E extends v{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,s=this.data.id,r=e.getValue(s,{value:this.data.fieldValue});let{fontSize:g}=this.data.defaultAppearanceData;g||(g=9);const u=`calc(${g}px * var(--zoom-factor))`,c=document.createElement("select");_.add(c),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.setAttribute("id",s),c.tabIndex=S,c.style.fontSize=`${g}px`,this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",j=>{const Y=this.data.defaultFieldValue;for(const $ of c.options)$.selected=$.value===Y});for(const j of this.data.options){const Y=document.createElement("option");Y.textContent=j.displayValue,Y.value=j.exportValue,this.data.combo&&(Y.style.fontSize=u),r.value.includes(j.exportValue)&&Y.setAttribute("selected",!0),c.appendChild(Y)}const O=(j,Y)=>{const $=Y?"value":"textContent",se=j.target.options;return j.target.multiple?Array.prototype.filter.call(se,re=>re.selected).map(re=>re[$]):-1===se.selectedIndex?null:se[se.selectedIndex][$]},G=j=>Array.prototype.map.call(j.target.options,$=>({displayValue:$.textContent,exportValue:$.value}));return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value($){const se=$.detail.value,re=new Set(Array.isArray(se)?se:[se]);for(const fe of c.options)fe.selected=re.has(fe.value);e.setValue(s,{value:O($,!0)})},multipleSelection($){c.multiple=!0},remove($){const se=c.options,re=$.detail.remove;se[re].selected=!1,c.remove(re),se.length>0&&-1===Array.prototype.findIndex.call(se,pe=>pe.selected)&&(se[0].selected=!0),e.setValue(s,{value:O($,!0),items:G($)})},clear($){for(;0!==c.length;)c.remove(0);e.setValue(s,{value:null,items:[]})},insert($){const{index:se,displayValue:re,exportValue:fe}=$.detail.insert,pe=document.createElement("option");pe.textContent=re,pe.value=fe,c.insertBefore(pe,c.children[se]),e.setValue(s,{value:O($,!0),items:G($)})},items($){const{items:se}=$.detail;for(;0!==c.length;)c.remove(0);for(const re of se){const{displayValue:fe,exportValue:pe}=re,ce=document.createElement("option");ce.textContent=fe,ce.value=pe,c.appendChild(ce)}c.options.length>0&&(c.options[0].selected=!0),e.setValue(s,{value:O($,!0),items:G($)})},indices($){const se=new Set($.detail.indices);for(const re of $.target.options)re.selected=se.has(re.index);e.setValue(s,{value:O($,!0)})},editable($){$.target.disabled=!$.detail.editable}},j)}),c.addEventListener("input",j=>{const Y=O(j,!0),$=O(j,!1);e.setValue(s,{value:Y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:$,changeEx:Y,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],j=>j.target.checked)):c.addEventListener("input",function(j){e.setValue(s,{value:O(j,!0)})}),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.appendChild(c),this.container}}class n extends p{constructor(e){super(e,{isRenderable:!!(e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const r=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===r.length)return this.container;const g=new t({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),u=this.page,c=i.Util.normalizeRect([this.data.parentRect[0],u.view[3]-this.data.parentRect[1]+u.view[1],this.data.parentRect[2],u.view[3]-this.data.parentRect[3]+u.view[1]]),O=c[0]+this.data.parentRect[2]-this.data.parentRect[0],G=c[1];return this.container.style.transformOrigin=`${-O}px ${-G}px`,this.container.style.left=`${O}px`,this.container.style.top=`${G}px`,this.container.appendChild(g.render()),this.container}}class t{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const s=document.createElement("div");s.className="popupWrapper",this.hideElement=this.hideWrapper?s:this.container,this.hideElement.hidden=!0;const r=document.createElement("div");r.className="popup";const g=this.color;g&&(r.style.backgroundColor=i.Util.makeHexColor(0|.7*(255-g[0])+g[0],0|.7*(255-g[1])+g[1],0|.7*(255-g[2])+g[2]));const u=document.createElement("h1");u.dir=this.titleObj.dir,u.textContent=this.titleObj.str,r.appendChild(u);const c=y.PDFDateString.toDateObject(this.modificationDate);if(c){const O=document.createElement("span");O.className="popupDate",O.textContent="{{date}}, {{time}}",O.dataset.l10nId="annotation_date_string",O.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),r.appendChild(O)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const O=this._formatContents(this.contentsObj);r.appendChild(O)}else D.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:r}),r.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const O of this.trigger)O.addEventListener("click",this._toggle.bind(this)),O.addEventListener("mouseover",this._show.bind(this,!1)),O.addEventListener("mouseout",this._hide.bind(this,!1));return r.addEventListener("click",this._hide.bind(this,!0)),s.appendChild(r),s}_formatContents({str:e,dir:s}){const r=document.createElement("p");r.className="popupContent",r.dir=s;const g=e.split(/(?:\r\n?|\n)/);for(let u=0,c=g.length;u<c;++u)r.appendChild(document.createTextNode(g[u])),u<c-1&&r.appendChild(document.createElement("br"));return r}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class d extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class f extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:s,height:r}=F(e.rect),g=this.svgFactory.create(s,r),u=this.svgFactory.createElement("svg:line");return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),g.appendChild(u),this.container.append(g),this._createPopup(u,e),this.container}}class l extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:s,height:r}=F(e.rect),g=this.svgFactory.create(s,r),u=e.borderStyle.width,c=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",s-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),g.appendChild(c),this.container.append(g),this._createPopup(c,e),this.container}}class b extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:s,height:r}=F(e.rect),g=this.svgFactory.create(s,r),u=e.borderStyle.width,c=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",s/2),c.setAttribute("cy",r/2),c.setAttribute("rx",s/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),g.appendChild(c),this.container.append(g),this._createPopup(c,e),this.container}}class m extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:s,height:r}=F(e.rect),g=this.svgFactory.create(s,r);let u=[];for(const O of e.vertices)u.push(O.x-e.rect[0]+","+(e.rect[3]-O.y));u=u.join(" ");const c=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",u),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),g.appendChild(c),this.container.append(g),this._createPopup(c,e),this.container}}class h extends m{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class R extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:s,height:r}=F(e.rect),g=this.svgFactory.create(s,r);for(const u of e.inkLists){let c=[];for(const G of u)c.push(`${G.x-e.rect[0]},${e.rect[3]-G.y}`);c=c.join(" ");const O=this.svgFactory.createElement(this.svgElementName);O.setAttribute("points",c),O.setAttribute("stroke-width",e.borderStyle.width||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),this._createPopup(O,e),g.appendChild(O)}return this.container.append(g),this.container}}class V extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class z extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class J extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class X extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class oe extends p{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class de extends p{constructor(e){super(e,{isRenderable:!0});const{filename:s,content:r}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(s),this.content=r,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:s,content:r})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class he{static render(e){const s=[],r=[];for(const u of e.annotations){if(!u)continue;const{width:c,height:O}=F(u.rect);if(!(c<=0||O<=0)){if(u.annotationType===i.AnnotationType.POPUP){r.push(u);continue}s.push(u)}}r.length&&s.push(...r);const g=e.div;for(const u of s){const c=N.create({data:u,layer:g,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new y.DOMSVGFactory,annotationStorage:e.annotationStorage||new M.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(c.isRenderable){const O=c.render();if(u.hidden&&(O.style.visibility="hidden"),Array.isArray(O))for(const G of O)g.appendChild(G);else c instanceof n?g.prepend(O):g.appendChild(O)}}_assertClassBrand(he,this,B).call(this,g,e.annotationCanvasMap)}static update(e){const{page:s,viewport:r,annotations:g,annotationCanvasMap:u,div:c}=e,O=r.transform,G=`matrix(${O.join(",")})`;let j,Y;for(const $ of g){const se=c.querySelectorAll(`[data-annotation-id="${$.id}"]`);if(se)for(const re of se)if($.hasOwnCanvas){const fe=i.Util.normalizeRect([$.rect[0],s.view[3]-$.rect[1]+s.view[1],$.rect[2],s.view[3]-$.rect[3]+s.view[1]]);if(!Y){j=Math.abs(O[0]||O[1]);const P=O.slice();for(let T=0;T<4;T++)P[T]=Math.sign(P[T]);Y=`matrix(${P.join(",")})`}const pe=fe[0]*j,ce=fe[1]*j;re.style.left=`${pe}px`,re.style.top=`${ce}px`,re.style.transformOrigin=`${-pe}px ${-ce}px`,re.style.transform=Y}else re.style.transform=G}_assertClassBrand(he,this,B).call(this,c,u),c.hidden=!1}}function B(a,e){if(e){for(const[s,r]of e){const g=a.querySelector(`[data-annotation-id="${s}"]`);if(!g)continue;const{firstChild:u}=g;"CANVAS"===u.nodeName?g.replaceChild(r,u):g.insertBefore(r,u)}e.clear()}}o.AnnotationLayer=he},(Q,o)=>{function C(y){return Math.floor(255*Math.max(0,Math.min(1,y))).toString(16).padStart(2,"0")}Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0,o.ColorConverters=class i{static CMYK_G([M,U,D,S]){return["G",1-Math.min(1,.3*M+.59*D+.11*U+S)]}static G_CMYK([M]){return["CMYK",0,0,0,1-M]}static G_RGB([M]){return["RGB",M,M,M]}static G_HTML([M]){const U=C(M);return`#${U}${U}${U}`}static RGB_G([M,U,D]){return["G",.3*M+.59*U+.11*D]}static RGB_HTML([M,U,D]){return`#${C(M)}${C(U)}${C(D)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([M,U,D,S]){return["RGB",1-Math.min(1,M+S),1-Math.min(1,D+S),1-Math.min(1,U+S)]}static CMYK_HTML(M){return this.RGB_HTML(this.CMYK_RGB(M))}static RGB_CMYK([M,U,D]){const S=1-M,_=1-U,F=1-D;return["CMYK",S,_,F,Math.min(S,_,F)]}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var i=C(18);o.XfaLayer=class y{static setupStorage(U,D,S,_,F){const N=_.getValue(D,{value:null});switch(S.name){case"textarea":if(null!==N.value&&(U.textContent=N.value),"print"===F)break;U.addEventListener("input",p=>{_.setValue(D,{value:p.target.value})});break;case"input":if("radio"===S.attributes.type||"checkbox"===S.attributes.type){if(N.value===S.attributes.xfaOn?U.setAttribute("checked",!0):N.value===S.attributes.xfaOff&&U.removeAttribute("checked"),"print"===F)break;U.addEventListener("change",p=>{_.setValue(D,{value:p.target.getAttribute(p.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==N.value&&U.setAttribute("value",N.value),"print"===F)break;U.addEventListener("input",p=>{_.setValue(D,{value:p.target.value})})}break;case"select":if(null!==N.value)for(const p of S.children)p.attributes.value===N.value&&(p.attributes.selected=!0);U.addEventListener("input",p=>{const I=p.target.options;_.setValue(D,{value:-1===I.selectedIndex?"":I[I.selectedIndex].value})})}}static setAttributes({html:U,element:D,storage:S=null,intent:_,linkService:F}){const{attributes:N}=D,p=U instanceof HTMLAnchorElement;"radio"===N.type&&(N.name=`${N.name}-${_}`);for(const[I,W]of Object.entries(N))if(null!=W&&"dataId"!==I)if("style"!==I)if("textContent"===I)U.textContent=W;else if("class"===I)W.length&&U.setAttribute(I,W.join(" "));else{if(p&&("href"===I||"newWindow"===I))continue;U.setAttribute(I,W)}else Object.assign(U.style,W);p&&F.addLinkAttributes(U,N.href,N.newWindow),S&&N.dataId&&this.setupStorage(U,N.dataId,D,S)}static render(U){const D=U.annotationStorage,S=U.linkService,_=U.xfaHtml,F=U.intent||"display",N=document.createElement(_.name);_.attributes&&this.setAttributes({html:N,element:_,intent:F,linkService:S});const p=[[_,-1,N]],I=U.div;if(I.appendChild(N),U.viewport){const v=`matrix(${U.viewport.transform.join(",")})`;I.style.transform=v}"richText"!==F&&I.setAttribute("class","xfaLayer xfaFont");const W=[];for(;p.length>0;){const[v,L,A]=p[p.length-1];if(L+1===v.children.length){p.pop();continue}const w=v.children[++p[p.length-1][1]];if(null===w)continue;const{name:k}=w;if("#text"===k){const n=document.createTextNode(w.value);W.push(n),A.appendChild(n);continue}let E;if(E=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,k):document.createElement(k),A.appendChild(E),w.attributes&&this.setAttributes({html:E,element:w,storage:D,intent:F,linkService:S}),w.children&&w.children.length>0)p.push([w,-1,E]);else if(w.value){const n=document.createTextNode(w.value);i.XfaText.shouldBuildText(k)&&W.push(n),E.appendChild(n)}}for(const v of I.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:W}}static update(U){const D=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=D,U.div.hidden=!1}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.renderTextLayer=function A(w){const k=new L({textContent:w.textContent,textContentStream:w.textContentStream,container:w.container,viewport:w.viewport,textDivs:w.textDivs,textContentItemsStr:w.textContentItemsStr,enhanceTextSelection:w.enhanceTextSelection});return k._render(w.timeout),k};var i=C(1);const M=30,D=new Map,S=/^\s+$/g;function F(w,k,E,n){const t=document.createElement("span"),d=w._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==k.str,hasEOL:k.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==k.str,hasEOL:k.hasEOL};w._textDivs.push(t);const f=i.Util.transform(w._viewport.transform,k.transform);let l=Math.atan2(f[1],f[0]);const b=E[k.fontName];b.vertical&&(l+=Math.PI/2);const m=Math.hypot(f[2],f[3]),h=m*function _(w,k){const E=D.get(w);if(E)return E;k.save(),k.font=`30px ${w}`;const n=k.measureText("");let t=n.fontBoundingBoxAscent,d=Math.abs(n.fontBoundingBoxDescent);if(t){k.restore();const l=t/(t+d);return D.set(w,l),l}k.strokeStyle="red",k.clearRect(0,0,M,M),k.strokeText("g",0,0);let f=k.getImageData(0,0,M,M).data;d=0;for(let l=f.length-1-3;l>=0;l-=4)if(f[l]>0){d=Math.ceil(l/4/M);break}k.clearRect(0,0,M,M),k.strokeText("A",0,M),f=k.getImageData(0,0,M,M).data,t=0;for(let l=0,b=f.length;l<b;l+=4)if(f[l]>0){t=M-Math.floor(l/4/M);break}if(k.restore(),t){const l=t/(t+d);return D.set(w,l),l}return D.set(w,.8),.8}(b.fontFamily,n);let x,R;0===l?(x=f[4],R=f[5]-h):(x=f[4]+h*Math.sin(l),R=f[5]-h*Math.cos(l)),t.style.left=`${x}px`,t.style.top=`${R}px`,t.style.fontSize=`${m}px`,t.style.fontFamily=b.fontFamily,t.setAttribute("role","presentation"),t.textContent=k.str,t.dir=k.dir,w._fontInspectorEnabled&&(t.dataset.fontName=k.fontName),0!==l&&(d.angle=l*(180/Math.PI));let V=!1;if(k.str.length>1||w._enhanceTextSelection&&S.test(k.str))V=!0;else if(" "!==k.str&&k.transform[0]!==k.transform[3]){const z=Math.abs(k.transform[0]),J=Math.abs(k.transform[3]);z!==J&&Math.max(z,J)/Math.min(z,J)>1.5&&(V=!0)}if(V&&(d.canvasWidth=b.vertical?k.height*w._viewport.scale:k.width*w._viewport.scale),w._textDivProperties.set(t,d),w._textContentStream&&w._layoutText(t),w._enhanceTextSelection&&d.hasText){let z=1,J=0;0!==l&&(z=Math.cos(l),J=Math.sin(l));const X=(b.vertical?k.height:k.width)*w._viewport.scale,oe=m;let de,he;0!==l?(de=[z,J,-J,z,x,R],he=i.Util.getAxialAlignedBoundingBox([0,0,X,oe],de)):he=[x,R,x+X,R+oe],w._bounds.push({left:he[0],top:he[1],right:he[2],bottom:he[3],div:t,size:[X,oe],m:de})}}function N(w){if(w._canceled)return;const k=w._textDivs,E=w._capability,n=k.length;if(n>1e5)return w._renderingDone=!0,void E.resolve();if(!w._textContentStream)for(let t=0;t<n;t++)w._layoutText(k[t]);w._renderingDone=!0,E.resolve()}function p(w,k,E){let n=0;for(let t=0;t<E;t++){const d=w[k++];d>0&&(n=n?Math.min(d,n):d)}return n}function v(w,k){k.sort(function(t,d){return t.x1-d.x1||t.index-d.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of k){let d=0;for(;d<n.length&&n[d].end<=t.y1;)d++;let f=n.length-1;for(;f>=0&&n[f].start>=t.y2;)f--;let l,b,m,h,x=-1/0;for(m=d;m<=f;m++){let z;l=n[m],b=l.boundary,z=b.x2>t.x1?b.index>t.index?b.x1New:t.x1:void 0===b.x2New?(b.x2+t.x1)/2:b.x2New,z>x&&(x=z)}for(t.x1New=x,m=d;m<=f;m++)l=n[m],b=l.boundary,void 0===b.x2New?b.x2>t.x1?b.index>t.index&&(b.x2New=b.x2):b.x2New=x:b.x2New>x&&(b.x2New=Math.max(x,b.x2));const R=[];let V=null;for(m=d;m<=f;m++){l=n[m],b=l.boundary;const z=b.x2>t.x2?b:t;V===z?R[R.length-1].end=l.end:(R.push({start:l.start,end:l.end,boundary:z}),V=z)}for(n[d].start<t.y1&&(R[0].start=t.y1,R.unshift({start:n[d].start,end:t.y1,boundary:n[d].boundary})),t.y2<n[f].end&&(R[R.length-1].end=t.y2,R.push({start:t.y2,end:n[f].end,boundary:n[f].boundary})),m=d;m<=f;m++){if(l=n[m],b=l.boundary,void 0!==b.x2New)continue;let z=!1;for(h=d-1;!z&&h>=0&&n[h].start>=b.y1;h--)z=n[h].boundary===b;for(h=f+1;!z&&h<n.length&&n[h].end<=b.y2;h++)z=n[h].boundary===b;for(h=0;!z&&h<R.length;h++)z=R[h].boundary===b;z||(b.x2New=x)}Array.prototype.splice.apply(n,[d,f-d+1].concat(R))}for(const t of n){const d=t.boundary;void 0===d.x2New&&(d.x2New=Math.max(w,d.x2))}}class L{constructor({textContent:k,textContentStream:E,container:n,viewport:t,textDivs:d,textContentItemsStr:f,enhanceTextSelection:l}){this._textContent=k,this._textContentStream=E,this._container=n,this._document=n.ownerDocument,this._viewport=t,this._textDivs=d||[],this._textContentItemsStr=f||[],this._enhanceTextSelection=!!l,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(k,E){for(let n=0,t=k.length;n<t;n++)if(void 0!==k[n].str)this._textContentItemsStr.push(k[n].str),F(this,k[n],E,this._layoutTextCtx);else if("beginMarkedContentProps"===k[n].type||"beginMarkedContent"===k[n].type){const d=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==k[n].id&&this._container.setAttribute("id",`${k[n].id}`),d.appendChild(this._container)}else"endMarkedContent"===k[n].type&&(this._container=this._container.parentNode)}_layoutText(k){const E=this._textDivProperties.get(k);let n="";if(0!==E.canvasWidth&&E.hasText){const{fontSize:t,fontFamily:d}=k.style;(t!==this._layoutTextLastFontSize||d!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${t} ${d}`,this._layoutTextLastFontSize=t,this._layoutTextLastFontFamily=d);const{width:f}=this._layoutTextCtx.measureText(k.textContent);if(f>0){const l=E.canvasWidth/f;this._enhanceTextSelection&&(E.scale=l),n=`scaleX(${l})`}}if(0!==E.angle&&(n=`rotate(${E.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(E.originalTransform=n),k.style.transform=n),E.hasText&&this._container.appendChild(k),E.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.appendChild(t)}}_render(k=0){const E=(0,i.createPromiseCapability)();let n=Object.create(null);const t=this._document.createElement("canvas");if(t.height=t.width=M,this._layoutTextCtx=t.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),E.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const d=()=>{this._reader.read().then(({value:f,done:l})=>{l?E.resolve():(Object.assign(n,f.styles),this._processItems(f.items,n),d())},E.reject)};this._reader=this._textContentStream.getReader(),d()}}E.promise.then(()=>{n=null,k?this._renderTimer=setTimeout(()=>{N(this),this._renderTimer=null},k):N(this)},this._capability.reject)}expandTextDivs(k=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function I(w){const k=w._bounds,E=w._viewport,n=function W(w,k,E){const n=E.map(function(d,f){return{x1:d.left,y1:d.top,x2:d.right,y2:d.bottom,index:f,x1New:void 0,x2New:void 0}});v(w,n);const t=new Array(E.length);for(const d of n)t[d.index]={left:d.x1New,top:0,right:d.x2New,bottom:0};E.map(function(d,f){const l=t[f],b=n[f];b.x1=d.top,b.y1=w-l.right,b.x2=d.bottom,b.y2=w-l.left,b.index=f,b.x1New=void 0,b.x2New=void 0}),v(k,n);for(const d of n){const f=d.index;t[f].top=d.x1New,t[f].bottom=d.x2New}return t}(E.width,E.height,k);for(let t=0;t<n.length;t++){const d=k[t].div,f=w._textDivProperties.get(d);if(0===f.angle){f.paddingLeft=k[t].left-n[t].left,f.paddingTop=k[t].top-n[t].top,f.paddingRight=n[t].right-k[t].right,f.paddingBottom=n[t].bottom-k[t].bottom,w._textDivProperties.set(d,f);continue}const l=n[t],b=k[t],m=b.m,h=m[0],x=m[1],R=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],V=new Float64Array(64);for(let J=0,X=R.length;J<X;J++){const oe=i.Util.applyTransform(R[J],m);V[J+0]=h&&(l.left-oe[0])/h,V[J+4]=x&&(l.top-oe[1])/x,V[J+8]=h&&(l.right-oe[0])/h,V[J+12]=x&&(l.bottom-oe[1])/x,V[J+16]=x&&(l.left-oe[0])/-x,V[J+20]=h&&(l.top-oe[1])/h,V[J+24]=x&&(l.right-oe[0])/-x,V[J+28]=h&&(l.bottom-oe[1])/h,V[J+32]=h&&(l.left-oe[0])/-h,V[J+36]=x&&(l.top-oe[1])/-x,V[J+40]=h&&(l.right-oe[0])/-h,V[J+44]=x&&(l.bottom-oe[1])/-x,V[J+48]=x&&(l.left-oe[0])/x,V[J+52]=h&&(l.top-oe[1])/-h,V[J+56]=x&&(l.right-oe[0])/x,V[J+60]=h&&(l.bottom-oe[1])/-h}const z=1+Math.min(Math.abs(h),Math.abs(x));f.paddingLeft=p(V,32,16)/z,f.paddingTop=p(V,48,16)/z,f.paddingRight=p(V,0,16)/z,f.paddingBottom=p(V,16,16)/z,w._textDivProperties.set(d,f)}}(this),this._bounds=null);const E=[],n=[];for(let t=0,d=this._textDivs.length;t<d;t++){const f=this._textDivs[t],l=this._textDivProperties.get(f);l.hasText&&(k?(E.length=0,n.length=0,l.originalTransform&&E.push(l.originalTransform),l.paddingTop>0?(n.push(`${l.paddingTop}px`),E.push(`translateY(${-l.paddingTop}px)`)):n.push(0),n.push(l.paddingRight>0?l.paddingRight/l.scale+"px":0),n.push(l.paddingBottom>0?`${l.paddingBottom}px`:0),l.paddingLeft>0?(n.push(l.paddingLeft/l.scale+"px"),E.push(`translateX(${-l.paddingLeft/l.scale}px)`)):n.push(0),f.style.padding=n.join(" "),E.length&&(f.style.transform=E.join(" "))):(f.style.padding=null,f.style.transform=l.originalTransform))}}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var i=C(1),y=C(5),M=C(3);let U=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};o.SVGGraphics=U;{let v=function(n){let t=[];const d=[];for(const f of n)"save"!==f.fn?"restore"===f.fn?t=d.pop():t.push(f):(t.push({fnId:92,fn:"group",items:[]}),d.push(t),t=t[t.length-1].items);return t},L=function(n){if(Number.isInteger(n))return n.toString();const t=n.toFixed(10);let d=t.length-1;if("0"!==t[d])return t;do{d--}while("0"===t[d]);return t.substring(0,"."===t[d]?d:d+1)},A=function(n){if(0===n[4]&&0===n[5]){if(0===n[1]&&0===n[2])return 1===n[0]&&1===n[3]?"":`scale(${L(n[0])} ${L(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const t=180*Math.acos(n[0])/Math.PI;return`rotate(${L(t)})`}}else if(1===n[0]&&0===n[1]&&0===n[2]&&1===n[3])return`translate(${L(n[4])} ${L(n[5])})`;return`matrix(${L(n[0])} ${L(n[1])} ${L(n[2])} ${L(n[3])} ${L(n[4])} ${L(n[5])})`};const D={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",F=["butt","round","square"],N=["miter","round","bevel"],p=function(n,t="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([n],{type:t}));const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let l=`data:${t};base64,`;for(let b=0,m=n.length;b<m;b+=3){const h=255&n[b],x=255&n[b+1],R=255&n[b+2];l+=f[h>>2]+f[(3&h)<<4|x>>4]+f[b+1<m?(15&x)<<2|R>>6:64]+f[b+2<m?63&R:64]}return l},I=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),d=new Int32Array(256);for(let R=0;R<256;R++){let V=R;for(let z=0;z<8;z++)V=1&V?3988292384^V>>1&2147483647:V>>1&2147483647;d[R]=V}function l(R,V,z,J){let X=J;const oe=V.length;z[X]=oe>>24&255,z[X+1]=oe>>16&255,z[X+2]=oe>>8&255,z[X+3]=255&oe,X+=4,z[X]=255&R.charCodeAt(0),z[X+1]=255&R.charCodeAt(1),z[X+2]=255&R.charCodeAt(2),z[X+3]=255&R.charCodeAt(3),X+=4,z.set(V,X),X+=V.length;const de=function f(R,V,z){let J=-1;for(let X=V;X<z;X++)J=J>>>8^d[255&(J^R[X])];return~J}(z,J+4,X);z[X]=de>>24&255,z[X+1]=de>>16&255,z[X+2]=de>>8&255,z[X+3]=255&de}function h(R){let V=R.length;const z=65535,J=Math.ceil(V/z),X=new Uint8Array(2+V+5*J+4);let oe=0;X[oe++]=120,X[oe++]=156;let de=0;for(;V>z;)X[oe++]=0,X[oe++]=255,X[oe++]=255,X[oe++]=0,X[oe++]=0,X.set(R.subarray(de,de+z),oe),oe+=z,de+=z,V-=z;X[oe++]=1,X[oe++]=255&V,X[oe++]=V>>8&255,X[oe++]=255&~V,X[oe++]=(65535&~V)>>8&255,X.set(R.subarray(de),oe),oe+=R.length-de;const he=function b(R,V,z){let J=1,X=0;for(let oe=V;oe<z;++oe)J=(J+(255&R[oe]))%65521,X=(X+J)%65521;return X<<16|J}(R,0,R.length);return X[oe++]=he>>24&255,X[oe++]=he>>16&255,X[oe++]=he>>8&255,X[oe++]=255&he,X}return function(V,z,J){return function x(R,V,z,J){const X=R.width,oe=R.height;let de,he,B;const a=R.data;switch(V){case i.ImageKind.GRAYSCALE_1BPP:he=0,de=1,B=X+7>>3;break;case i.ImageKind.RGB_24BPP:he=2,de=8,B=3*X;break;case i.ImageKind.RGBA_32BPP:he=6,de=8,B=4*X;break;default:throw new Error("invalid format")}const e=new Uint8Array((1+B)*oe);let s=0,r=0;for(let j=0;j<oe;++j)e[s++]=0,e.set(a.subarray(r,r+B),s),r+=B,s+=B;if(V===i.ImageKind.GRAYSCALE_1BPP&&J){s=0;for(let j=0;j<oe;j++){s++;for(let Y=0;Y<B;Y++)e[s++]^=255}}const g=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,255&X,oe>>24&255,oe>>16&255,oe>>8&255,255&oe,de,he,0,0,0]),u=function m(R){if(!M.isNodeJS)return h(R);try{let V;V=parseInt(process.versions.node)>=8?R:Buffer.from(R);const z=__webpack_require__(82787).deflateSync(V,{level:9});return z instanceof Uint8Array?z:new Uint8Array(z)}catch(V){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+V)}return h(R)}(e),O=new Uint8Array(n.length+36+g.length+u.length);let G=0;return O.set(n,G),G+=n.length,l("IHDR",g,O,G),G+=12+g.length,l("IDATA",u,O,G),G+=12+u.length,l("IEND",new Uint8Array(0),O,G),p(O,"image/png",z)}(V,void 0===V.kind?i.ImageKind.GRAYSCALE_1BPP:V.kind,z,J)}}();class W{constructor(){this.fontSizeScale=1,this.fontWeight=D.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=D.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,d){this.x=t,this.y=d}}let w=0,k=0,E=0;o.SVGGraphics=U=class{constructor(n,t,d=!1){this.svgFactory=new y.DOMSVGFactory,this.current=new W,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const f in i.OPS)this._operatorIdMapping[i.OPS[f]]=f}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const t=n.fnArray,d=n.argsArray;for(let f=0,l=t.length;f<l;f++)if(t[f]===i.OPS.dependency)for(const b of d[f]){const m=b.startsWith("g_")?this.commonObjs:this.objs,h=new Promise(x=>{m.get(b,x)});this.current.dependencies.push(h)}return Promise.all(this.current.dependencies)}transform(n,t,d,f,l,b){this.transformMatrix=i.Util.transform(this.transformMatrix,[n,t,d,f,l,b]),this.tgrp=null}getSVG(n,t){this.viewport=t;const d=this._initialize(t);return this.loadDependencies(n).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),d))}convertOpList(n){const t=this._operatorIdMapping,d=n.argsArray,f=n.fnArray,l=[];for(let b=0,m=f.length;b<m;b++){const h=f[b];l.push({fnId:h,fn:t[h],args:d[b]})}return v(l)}executeOpTree(n){for(const t of n){const d=t.fn,l=t.args;switch(0|t.fnId){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(l);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case i.OPS.setFont:this.setFont(l);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(l[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(l[0],l[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case i.OPS.setHScale:this.setHScale(l[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case i.OPS.setTextRise:this.setTextRise(l[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case i.OPS.setLineWidth:this.setLineWidth(l[0]);break;case i.OPS.setLineJoin:this.setLineJoin(l[0]);break;case i.OPS.setLineCap:this.setLineCap(l[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case i.OPS.setFillColorN:this.setFillColorN(l);break;case i.OPS.shadingFill:this.shadingFill(l[0]);break;case i.OPS.setDash:this.setDash(l[0],l[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case i.OPS.setFlatness:this.setFlatness(l[0]);break;case i.OPS.setGState:this.setGState(l[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case i.OPS.constructPath:this.constructPath(l[0],l[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,i.warn)(`Unimplemented operator ${d}`)}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,t,d,f,l,b){const m=this.current;m.textMatrix=m.lineMatrix=[n,t,d,f,l,b],m.textMatrixScale=Math.hypot(n,t),m.x=m.lineX=0,m.y=m.lineY=0,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${L(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",L(-m.y)),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtElement.appendChild(m.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=i.IDENTITY_MATRIX,n.lineMatrix=i.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,t){const d=this.current;d.x=d.lineX+=n,d.y=d.lineY+=t,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${L(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",L(-d.y))}showText(n){const t=this.current,d=t.font,f=t.fontSize;if(0===f)return;const l=t.fontSizeScale,b=t.charSpacing,m=t.wordSpacing,h=t.fontDirection,x=t.textHScale*h,R=d.vertical,V=R?1:-1,z=d.defaultVMetrics,J=f*t.fontMatrix[0];let X=0;for(const he of n){if(null===he){X+=h*m;continue}if("number"==typeof he){X+=V*he*f/1e3;continue}const B=(he.isSpace?m:0)+b,a=he.fontChar;let e,s,g,r=he.width;if(R){let u;const c=he.vmetric||z;u=he.vmetric?c[1]:.5*r,u=-u*J,r=c?-c[0]:r,e=u/l,s=(X+c[2]*J)/l}else e=X/l,s=0;(he.isInFont||d.missingFile)&&(t.xcoords.push(t.x+e),R&&t.ycoords.push(-t.y+s),t.tspan.textContent+=a),g=R?r*J-B*h:r*J+B*h,X+=g}t.tspan.setAttributeNS(null,"x",t.xcoords.map(L).join(" ")),t.tspan.setAttributeNS(null,"y",R?t.ycoords.map(L).join(" "):L(-t.y)),R?t.y-=X:t.x+=X*x,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${L(t.fontSize)}px`),t.fontStyle!==D.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==D.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const oe=t.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;oe===i.TextRenderingMode.FILL||oe===i.TextRenderingMode.FILL_STROKE?(t.fillColor!==D.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.tspan.setAttributeNS(null,"fill",t.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(oe===i.TextRenderingMode.STROKE||oe===i.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(t.tspan,1/(t.textMatrixScale||1));let de=t.textMatrix;0!==t.textRise&&(de=de.slice(),de[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${A(de)} scale(${L(x)}, -1)`),t.txtElement.setAttributeNS(S,"xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}setLeadingMoveText(n,t){this.setLeading(-t),this.moveText(n,t)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const t=p(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${t}); }\n`}setFont(n){const t=this.current,d=this.commonObjs.get(n[0]);let f=n[1];t.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),t.fontMatrix=d.fontMatrix||i.FONT_IDENTITY_MATRIX;let l="normal";d.black?l="900":d.bold&&(l="bold");const b=d.italic?"italic":"normal";f<0?(f=-f,t.fontDirection=-1):t.fontDirection=1,t.fontSize=f,t.fontFamily=d.loadedName,t.fontWeight=l,t.fontStyle=b,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",L(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=F[n]}setLineJoin(n){this.current.lineJoin=N[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,t,d){this.current.strokeColor=i.Util.makeHexColor(n,t,d)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,t,d){this.current.fillColor=i.Util.makeHexColor(n,t,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const t=this.viewport.width,d=this.viewport.height,f=i.Util.inverseTransform(this.transformMatrix),l=i.Util.applyTransform([0,0],f),b=i.Util.applyTransform([0,d],f),m=i.Util.applyTransform([t,0],f),h=i.Util.applyTransform([t,d],f),x=Math.min(l[0],b[0],m[0],h[0]),R=Math.min(l[1],b[1],m[1],h[1]),V=Math.max(l[0],b[0],m[0],h[0]),z=Math.max(l[1],b[1],m[1],h[1]),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",x),J.setAttributeNS(null,"y",R),J.setAttributeNS(null,"width",V-x),J.setAttributeNS(null,"height",z-R),J.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(J)}_makeColorN_Pattern(n){return"TilingPattern"===n[0]?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const t=n[1],d=n[2],f=n[3]||i.IDENTITY_MATRIX,[l,b,m,h]=n[4],x=n[5],R=n[6],V=n[7],z="shading"+E++,[J,X,oe,de]=i.Util.normalizeRect([...i.Util.applyTransform([l,b],f),...i.Util.applyTransform([m,h],f)]),[he,B]=i.Util.singularValueDecompose2dScale(f),a=x*he,e=R*B,s=this.svgFactory.createElement("svg:pattern");s.setAttributeNS(null,"id",z),s.setAttributeNS(null,"patternUnits","userSpaceOnUse"),s.setAttributeNS(null,"width",a),s.setAttributeNS(null,"height",e),s.setAttributeNS(null,"x",`${J}`),s.setAttributeNS(null,"y",`${X}`);const r=this.svg,g=this.transformMatrix,u=this.current.fillColor,c=this.current.strokeColor,O=this.svgFactory.create(oe-J,de-X);if(this.svg=O,this.transformMatrix=f,2===V){const G=i.Util.makeHexColor(...t);this.current.fillColor=G,this.current.strokeColor=G}return this.executeOpTree(this.convertOpList(d)),this.svg=r,this.transformMatrix=g,this.current.fillColor=u,this.current.strokeColor=c,s.appendChild(O.childNodes[0]),this.defs.appendChild(s),`url(#${z})`}_makeShadingPattern(n){switch("string"==typeof n&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const t="shading"+E++,d=n[3];let f;switch(n[1]){case"axial":const l=n[4],b=n[5];f=this.svgFactory.createElement("svg:linearGradient"),f.setAttributeNS(null,"id",t),f.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),f.setAttributeNS(null,"x1",l[0]),f.setAttributeNS(null,"y1",l[1]),f.setAttributeNS(null,"x2",b[0]),f.setAttributeNS(null,"y2",b[1]);break;case"radial":const m=n[4],h=n[5],x=n[6],R=n[7];f=this.svgFactory.createElement("svg:radialGradient"),f.setAttributeNS(null,"id",t),f.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),f.setAttributeNS(null,"cx",h[0]),f.setAttributeNS(null,"cy",h[1]),f.setAttributeNS(null,"r",R),f.setAttributeNS(null,"fx",m[0]),f.setAttributeNS(null,"fy",m[1]),f.setAttributeNS(null,"fr",x);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const l of d){const b=this.svgFactory.createElement("svg:stop");b.setAttributeNS(null,"offset",l[0]),b.setAttributeNS(null,"stop-color",l[1]),f.appendChild(b)}return this.defs.appendChild(f),`url(#${t})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,t){this.current.dashArray=n,this.current.dashPhase=t}constructPath(n,t){const d=this.current;let f=d.x,l=d.y,b=[],m=0;for(const h of n)switch(0|h){case i.OPS.rectangle:f=t[m++],l=t[m++];const V=f+t[m++],z=l+t[m++];b.push("M",L(f),L(l),"L",L(V),L(l),"L",L(V),L(z),"L",L(f),L(z),"Z");break;case i.OPS.moveTo:f=t[m++],l=t[m++],b.push("M",L(f),L(l));break;case i.OPS.lineTo:f=t[m++],l=t[m++],b.push("L",L(f),L(l));break;case i.OPS.curveTo:f=t[m+4],l=t[m+5],b.push("C",L(t[m]),L(t[m+1]),L(t[m+2]),L(t[m+3]),L(f),L(l)),m+=6;break;case i.OPS.curveTo2:b.push("C",L(f),L(l),L(t[m]),L(t[m+1]),L(t[m+2]),L(t[m+3])),f=t[m+2],l=t[m+3],m+=4;break;case i.OPS.curveTo3:f=t[m+2],l=t[m+3],b.push("C",L(t[m]),L(t[m+1]),L(f),L(l),L(f),L(l)),m+=4;break;case i.OPS.closePath:b.push("Z")}b=b.join(" "),d.path&&n.length>0&&n[0]!==i.OPS.rectangle&&n[0]!==i.OPS.moveTo?b=d.path.getAttributeNS(null,"d")+b:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(d.path)),d.path.setAttributeNS(null,"d",b),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(f,l)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element)return void(this.pendingClip=null);const t="clippath"+w++,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",t),d.setAttributeNS(null,"transform",A(this.transformMatrix));const f=n.element.cloneNode(!0);if(f.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,d.appendChild(f),this.defs.appendChild(d),n.activeClipUrl){n.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;d.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const t=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",t)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[t,d]of n)switch(t){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,i.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,t=1){const d=this.current;let f=d.dashArray;1!==t&&f.length>0&&(f=f.map(function(l){return t*l})),n.setAttributeNS(null,"stroke",d.strokeColor),n.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",L(d.miterLimit)),n.setAttributeNS(null,"stroke-linecap",d.lineCap),n.setAttributeNS(null,"stroke-linejoin",d.lineJoin),n.setAttributeNS(null,"stroke-width",L(t*d.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",f.map(L).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",L(t*d.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const t=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);t?this.paintInlineImageXObject(t):(0,i.warn)(`Dependent image with object ID ${n} is not ready yet`)}paintInlineImageXObject(n,t){const d=n.width,f=n.height,l=I(n,this.forceDataSchema,!!t),b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width",L(d)),b.setAttributeNS(null,"height",L(f)),this.current.element=b,this.clip("nonzero");const m=this.svgFactory.createElement("svg:image");m.setAttributeNS(_,"xlink:href",l),m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y",L(-f)),m.setAttributeNS(null,"width",L(d)+"px"),m.setAttributeNS(null,"height",L(f)+"px"),m.setAttributeNS(null,"transform",`scale(${L(1/d)} ${L(-1/f)})`),t?t.appendChild(m):this._ensureTransformGroup().appendChild(m)}paintImageMaskXObject(n){const t=this.current,d=n.width,f=n.height,l=t.fillColor;t.maskId="mask"+k++;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",t.maskId);const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",L(d)),m.setAttributeNS(null,"height",L(f)),m.setAttributeNS(null,"fill",l),m.setAttributeNS(null,"mask",`url(#${t.maskId})`),this.defs.appendChild(b),this._ensureTransformGroup().appendChild(m),this.paintInlineImageXObject(n,b)}paintFormXObjectBegin(n,t){if(Array.isArray(n)&&6===n.length&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t){const d=t[2]-t[0],f=t[3]-t[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",t[0]),l.setAttributeNS(null,"y",t[1]),l.setAttributeNS(null,"width",L(d)),l.setAttributeNS(null,"height",L(f)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const t=this.svgFactory.create(n.width,n.height),d=this.svgFactory.createElement("svg:defs");t.appendChild(d),this.defs=d;const f=this.svgFactory.createElement("svg:g");return f.setAttributeNS(null,"transform",A(n.transform)),t.appendChild(f),this.svg=f,t}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var i=C(1),y=C(26);const M=__webpack_require__(23237),U=__webpack_require__(97492),D=__webpack_require__(31815),S=__webpack_require__(66671),_=/^file:\/\/\/[a-zA-Z]:\//;o.PDFNodeStream=class N{constructor(E){this.source=E,this.url=function F(k){const E=S.parse(k);return"file:"===E.protocol||E.host?E:/^[a-z]:[/\\]/i.test(k)?S.parse(`file:///${k}`):(E.host||(E.protocol="file:"),E)}(E.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new v(this),this._fullRequestReader}getRangeReader(E,n){if(n<=this._progressiveDataLength)return null;const t=this.isFsUrl?new w(this,E,n):new L(this,E,n);return this._rangeRequestReaders.push(t),t}cancelAllRequests(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);for(const n of this._rangeRequestReaders.slice(0))n.cancel(E)}};class p{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=E.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var E=this;return _asyncToGenerator(function*(){if(yield E._readCapability.promise,E._done)return{value:void 0,done:!0};if(E._storedError)throw E._storedError;const n=E._readableStream.read();return null===n?(E._readCapability=(0,i.createPromiseCapability)(),E.read()):(E._loaded+=n.length,E.onProgress&&E.onProgress({loaded:E._loaded,total:E._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(E){this._readableStream?this._readableStream.destroy(E):this._error(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class I{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!E.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var E=this;return _asyncToGenerator(function*(){if(yield E._readCapability.promise,E._done)return{value:void 0,done:!0};if(E._storedError)throw E._storedError;const n=E._readableStream.read();return null===n?(E._readCapability=(0,i.createPromiseCapability)(),E.read()):(E._loaded+=n.length,E.onProgress&&E.onProgress({loaded:E._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(E){this._readableStream?this._readableStream.destroy(E):this._error(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(k,E){return{protocol:k.protocol,auth:k.auth,host:k.hostname,port:k.port,path:k.path,method:"GET",headers:E}}class v extends p{constructor(E){super(E);const n=t=>{if(404===t.statusCode){const b=new i.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=b,void this._headersCapability.reject(b)}this._headersCapability.resolve(),this._setReadableStream(t);const d=b=>this._readableStream.headers[b.toLowerCase()],{allowRangeRequests:f,suggestedLength:l}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=l||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(d)};this._request=null,this._request="http:"===this._url.protocol?U.request(W(this._url,E.httpHeaders),n):D.request(W(this._url,E.httpHeaders),n),this._request.on("error",t=>{this._storedError=t,this._headersCapability.reject(t)}),this._request.end()}}class L extends I{constructor(E,n,t){super(E),this._httpHeaders={};for(const f in E.httpHeaders){const l=E.httpHeaders[f];typeof l>"u"||(this._httpHeaders[f]=l)}this._httpHeaders.Range=`bytes=${n}-${t-1}`;const d=f=>{if(404!==f.statusCode)this._setReadableStream(f);else{const l=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l}};this._request=null,this._request="http:"===this._url.protocol?U.request(W(this._url,this._httpHeaders),d):D.request(W(this._url,this._httpHeaders),d),this._request.on("error",f=>{this._storedError=f}),this._request.end()}}class A extends p{constructor(E){super(E);let n=decodeURIComponent(this._url.path);_.test(this._url.href)&&(n=n.replace(/^\//,"")),M.lstat(n,(t,d)=>{if(t)return"ENOENT"===t.code&&(t=new i.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=d.size,this._setReadableStream(M.createReadStream(n)),this._headersCapability.resolve()})}}class w extends I{constructor(E,n,t){super(E);let d=decodeURIComponent(this._url.path);_.test(this._url.href)&&(d=d.replace(/^\//,"")),this._setReadableStream(M.createReadStream(d,{start:n,end:t-1}))}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=function S(F,N){return 404===F||0===F&&N.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+N+'".'):new i.UnexpectedResponseException(`Unexpected server response (${F}) while retrieving PDF "${N}".`,F)},o.extractFilenameFromHeader=function D(F){const N=F("Content-Disposition");if(N){let p=(0,y.getFilenameFromContentDispositionHeader)(N);if(p.includes("%"))try{p=decodeURIComponent(p)}catch{}if((0,M.isPdfFile)(p))return p}return null},o.validateRangeRequestCapabilities=function U({getResponseHeader:F,isHttp:N,rangeChunkSize:p,disableRange:I}){const W={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(F("Content-Length"),10);return!Number.isInteger(v)||(W.suggestedLength=v,v<=2*p)||I||!N||"bytes"!==F("Accept-Ranges")||"identity"!==(F("Content-Encoding")||"identity")||(W.allowRangeRequests=!0),W},o.validateResponseStatus=function _(F){return 200===F||206===F};var i=C(1),y=C(27),M=C(5)},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=function y(M){let U=!0,D=S("filename\\*","i").exec(M);if(D){D=D[1];let v=p(D);return v=unescape(v),v=I(v),v=W(v),F(v)}if(D=function N(v){const L=[];let A;const w=S("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(A=w.exec(v));){let[,E,n,t]=A;if(E=parseInt(E,10),E in L){if(0===E)break}else L[E]=[n,t]}const k=[];for(let E=0;E<L.length&&E in L;++E){let[n,t]=L[E];t=p(t),n&&(t=unescape(t),0===E&&(t=I(t))),k.push(t)}return k.join("")}(M),D)return F(W(D));if(D=S("filename","i").exec(M),D){D=D[1];let v=p(D);return v=W(v),F(v)}function S(v,L){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',L)}function _(v,L){if(v){if(!/^[\x00-\xFF]+$/.test(L))return L;try{const A=new TextDecoder(v,{fatal:!0}),w=(0,i.stringToBytes)(L);L=A.decode(w),U=!1}catch{}}return L}function F(v){return U&&/[\x80-\xff]/.test(v)&&(v=_("utf-8",v),U&&(v=_("iso-8859-1",v))),v}function p(v){if(v.startsWith('"')){const L=v.slice(1).split('\\"');for(let A=0;A<L.length;++A){const w=L[A].indexOf('"');-1!==w&&(L[A]=L[A].slice(0,w),L.length=A+1),L[A]=L[A].replace(/\\(.)/g,"$1")}v=L.join('"')}return v}function I(v){const L=v.indexOf("'");return-1===L?v:_(v.slice(0,L),v.slice(L+1).replace(/^[^']*'/,""))}function W(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(L,A,w,k){if("q"===w||"Q"===w)return _(A,k=(k=k.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(E,n){return String.fromCharCode(parseInt(n,16))}));try{k=atob(k)}catch{}return _(A,k)})}return""};var i=C(1)},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var i=C(1),y=C(26);class S{constructor(I,W={}){this.url=I,this.isHttp=/^https?:/i.test(I),this.httpHeaders=this.isHttp&&W.httpHeaders||Object.create(null),this.withCredentials=W.withCredentials||!1,this.getXhr=W.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(I,W,v){const L={begin:I,end:W};for(const A in v)L[A]=v[A];return this.request(L)}requestFull(I){return this.request(I)}request(I){const W=this.getXhr(),v=this.currXhrId++,L=this.pendingRequests[v]={xhr:W};W.open("GET",this.url),W.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const w=this.httpHeaders[A];typeof w>"u"||W.setRequestHeader(A,w)}return this.isHttp&&"begin"in I&&"end"in I?(W.setRequestHeader("Range",`bytes=${I.begin}-${I.end-1}`),L.expectedStatus=206):L.expectedStatus=200,W.responseType="arraybuffer",I.onError&&(W.onerror=function(A){I.onError(W.status)}),W.onreadystatechange=this.onStateChange.bind(this,v),W.onprogress=this.onProgress.bind(this,v),L.onHeadersReceived=I.onHeadersReceived,L.onDone=I.onDone,L.onError=I.onError,L.onProgress=I.onProgress,W.send(null),v}onProgress(I,W){const v=this.pendingRequests[I];v&&v.onProgress?.(W)}onStateChange(I,W){const v=this.pendingRequests[I];if(!v)return;const L=v.xhr;if(L.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),4!==L.readyState||!(I in this.pendingRequests))return;if(delete this.pendingRequests[I],0===L.status&&this.isHttp)return void v.onError?.(L.status);const A=L.status||200;if((200!==A||206!==v.expectedStatus)&&A!==v.expectedStatus)return void v.onError?.(L.status);const k=function D(p){const I=p.response;return"string"!=typeof I?I:(0,i.stringToBytes)(I).buffer}(L);if(206===A){const E=L.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(E);v.onDone({begin:parseInt(n[1],10),chunk:k})}else k?v.onDone({begin:0,chunk:k}):v.onError?.(L.status)}getRequestXhr(I){return this.pendingRequests[I].xhr}isPendingRequest(I){return I in this.pendingRequests}abortRequest(I){const W=this.pendingRequests[I].xhr;delete this.pendingRequests[I],W.abort()}}o.PDFNetworkStream=class _{constructor(I){this._source=I,this._manager=new S(I.url,{httpHeaders:I.httpHeaders,withCredentials:I.withCredentials}),this._rangeChunkSize=I.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(I){const W=this._rangeRequestReaders.indexOf(I);W>=0&&this._rangeRequestReaders.splice(W,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new F(this._manager,this._source),this._fullRequestReader}getRangeReader(I,W){const v=new N(this._manager,I,W);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(I){this._fullRequestReader?.cancel(I);for(const W of this._rangeRequestReaders.slice(0))W.cancel(I)}};class F{constructor(I,W){this._manager=I;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=W.url,this._fullRequestId=I.requestFull(v),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._contentLength=W.length,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const I=this._fullRequestId,W=this._manager.getRequestXhr(I),v=w=>W.getResponseHeader(w),{allowRangeRequests:L,suggestedLength:A}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});L&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(I),this._headersReceivedCapability.resolve()}_onDone(I){if(I&&(this._requests.length>0?this._requests.shift().resolve({value:I.chunk,done:!1}):this._cachedChunks.push(I.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(I){this._storedError=(0,y.createResponseStatusError)(I,this._url),this._headersReceivedCapability.reject(this._storedError);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(I){this.onProgress?.({loaded:I.loaded,total:I.lengthComputable?I.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var I=this;return _asyncToGenerator(function*(){if(I._storedError)throw I._storedError;if(I._cachedChunks.length>0)return{value:I._cachedChunks.shift(),done:!1};if(I._done)return{value:void 0,done:!0};const W=(0,i.createPromiseCapability)();return I._requests.push(W),W.promise})()}cancel(I){this._done=!0,this._headersReceivedCapability.reject(I);for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(I,W,v){this._manager=I;const L={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=I.url,this._requestId=I.requestRange(W,v,L),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(I){const W=I.chunk;this._requests.length>0?this._requests.shift().resolve({value:W,done:!1}):this._queuedChunk=W,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(I){this._storedError=(0,y.createResponseStatusError)(I,this._url);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(I){this.isStreamingSupported||this.onProgress?.({loaded:I.loaded})}get isStreamingSupported(){return!1}read(){var I=this;return _asyncToGenerator(function*(){if(I._storedError)throw I._storedError;if(null!==I._queuedChunk){const v=I._queuedChunk;return I._queuedChunk=null,{value:v,done:!1}}if(I._done)return{value:void 0,done:!0};const W=(0,i.createPromiseCapability)();return I._requests.push(W),W.promise})()}cancel(I){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Q,o,C)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var i=C(1),y=C(26);function M(F,N,p){return{method:"GET",headers:F,signal:p?.signal,mode:"cors",credentials:N?"include":"same-origin",redirect:"follow"}}function U(F){const N=new Headers;for(const p in F){const I=F[p];typeof I>"u"||N.append(p,I)}return N}o.PDFFetchStream=class D{constructor(N){this.source=N,this.isHttp=/^https?:/i.test(N.url),this.httpHeaders=this.isHttp&&N.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new S(this),this._fullRequestReader}getRangeReader(N,p){if(p<=this._progressiveDataLength)return null;const I=new _(this,N,p);return this._rangeRequestReaders.push(I),I}cancelAllRequests(N){this._fullRequestReader&&this._fullRequestReader.cancel(N);for(const p of this._rangeRequestReaders.slice(0))p.cancel(N)}};class S{constructor(N){this._stream=N,this._reader=null,this._loaded=0,this._filename=null;const p=N.source;this._withCredentials=p.withCredentials||!1,this._contentLength=p.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._headers=U(this._stream.httpHeaders);const I=p.url;fetch(I,M(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,y.validateResponseStatus)(W.status))throw(0,y.createResponseStatusError)(W.status,I);this._reader=W.body.getReader(),this._headersCapability.resolve();const v=w=>W.headers.get(w),{allowRangeRequests:L,suggestedLength:A}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=L,this._contentLength=A||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var N=this;return _asyncToGenerator(function*(){yield N._headersCapability.promise;const{value:p,done:I}=yield N._reader.read();return I?{value:p,done:I}:(N._loaded+=p.byteLength,N.onProgress&&N.onProgress({loaded:N._loaded,total:N._contentLength}),{value:new Uint8Array(p).buffer,done:!1})})()}cancel(N){this._reader&&this._reader.cancel(N),this._abortController&&this._abortController.abort()}}class _{constructor(N,p,I){this._stream=N,this._reader=null,this._loaded=0;const W=N.source;this._withCredentials=W.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!W.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=U(this._stream.httpHeaders),this._headers.append("Range",`bytes=${p}-${I-1}`);const v=W.url;fetch(v,M(this._headers,this._withCredentials,this._abortController)).then(L=>{if(!(0,y.validateResponseStatus)(L.status))throw(0,y.createResponseStatusError)(L.status,v);this._readCapability.resolve(),this._reader=L.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var N=this;return _asyncToGenerator(function*(){yield N._readCapability.promise;const{value:p,done:I}=yield N._reader.read();return I?{value:p,done:I}:(N._loaded+=p.byteLength,N.onProgress&&N.onProgress({loaded:N._loaded}),{value:new Uint8Array(p).buffer,done:!1})})()}cancel(N){this._reader&&this._reader.cancel(N),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Q){var o=__webpack_module_cache__[Q];if(void 0!==o)return o.exports;var C=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](C,C.exports,__w_pdfjs_require__),C.exports}var __nested_webpack_exports__={};return(()=>{var Q=__nested_webpack_exports__;Object.defineProperty(Q,"__esModule",{value:!0}),Object.defineProperty(Q,"AnnotationLayer",{enumerable:!0,get:function(){return y.AnnotationLayer}}),Object.defineProperty(Q,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(Q,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(Q,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(Q,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(Q,"LoopbackPort",{enumerable:!0,get:function(){return C.LoopbackPort}}),Object.defineProperty(Q,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(Q,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(Q,"PDFDataRangeTransport",{enumerable:!0,get:function(){return C.PDFDataRangeTransport}}),Object.defineProperty(Q,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(Q,"PDFWorker",{enumerable:!0,get:function(){return C.PDFWorker}}),Object.defineProperty(Q,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(Q,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(Q,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(Q,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(Q,"SVGGraphics",{enumerable:!0,get:function(){return S.SVGGraphics}}),Object.defineProperty(Q,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return o.UNSUPPORTED_FEATURES}}),Object.defineProperty(Q,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(Q,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(Q,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(Q,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(Q,"build",{enumerable:!0,get:function(){return C.build}}),Object.defineProperty(Q,"createPromiseCapability",{enumerable:!0,get:function(){return o.createPromiseCapability}}),Object.defineProperty(Q,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(Q,"getDocument",{enumerable:!0,get:function(){return C.getDocument}}),Object.defineProperty(Q,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(Q,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(Q,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(Q,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(Q,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(Q,"renderTextLayer",{enumerable:!0,get:function(){return D.renderTextLayer}}),Object.defineProperty(Q,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(Q,"version",{enumerable:!0,get:function(){return C.version}});var o=__w_pdfjs_require__(1),C=__w_pdfjs_require__(4),i=__w_pdfjs_require__(5),y=__w_pdfjs_require__(20),M=__w_pdfjs_require__(13),U=__w_pdfjs_require__(3),D=__w_pdfjs_require__(23),S=__w_pdfjs_require__(24),_=__w_pdfjs_require__(22);if(U.isNodeJS){const{PDFNodeStream:p}=__w_pdfjs_require__(25);(0,C.setPDFNetworkStreamFactory)(I=>new p(I))}else{const{PDFNetworkStream:p}=__w_pdfjs_require__(28),{PDFFetchStream:I}=__w_pdfjs_require__(29);(0,C.setPDFNetworkStreamFactory)(W=>(0,i.isValidFetchUrl)(W.url)?new I(W):new p(W))}})(),__nested_webpack_exports__})(),module.exports=C()},94031:function(Q,o,C){var p,i=C(40546).default,y=C(93051).default,M=C(56965).default,U=C(23076).default,D=C(78737).default,S=C(64647).default,_=C(80540).default;p=()=>(()=>{"use strict";var F=[,(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.DefaultXfaLayerFactory=v.DefaultTextLayerFactory=v.DefaultStructTreeLayerFactory=v.DefaultAnnotationLayerFactory=void 0;var A=L(2),w=L(4),k=L(5),E=L(7),n=L(8),t=L(9);v.DefaultAnnotationLayerFactory=class d{createAnnotationLayerBuilder(h,x,R=null,V="",z=!0,J=w.NullL10n,X=!1,oe=null,de=null,he=null,B=null){return new A.AnnotationLayerBuilder({pageDiv:h,pdfPage:x,imageResourcesPath:V,renderForms:z,linkService:new k.SimpleLinkService,l10n:J,annotationStorage:R,enableScripting:X,hasJSActionsPromise:oe,fieldObjectsPromise:he,mouseState:de,annotationCanvasMap:B})}},v.DefaultStructTreeLayerFactory=class f{createStructTreeLayerBuilder(h){return new E.StructTreeLayerBuilder({pdfPage:h})}},v.DefaultTextLayerFactory=class l{createTextLayerBuilder(h,x,R,V=!1,z,J){return new n.TextLayerBuilder({textLayerDiv:h,pageIndex:x,viewport:R,enhanceTextSelection:V,eventBus:z,highlighter:J})}},v.DefaultXfaLayerFactory=class b{createXfaLayerBuilder(h,x,R=null,V=null){return new t.XfaLayerBuilder({pageDiv:h,pdfPage:x,annotationStorage:R,linkService:new k.SimpleLinkService,xfaHtml:V})}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.AnnotationLayerBuilder=void 0;var A=L(3),w=L(4);v.AnnotationLayerBuilder=class k{constructor({pageDiv:n,pdfPage:t,linkService:d,downloadManager:f,annotationStorage:l=null,imageResourcesPath:b="",renderForms:m=!0,l10n:h=w.NullL10n,enableScripting:x=!1,hasJSActionsPromise:R=null,fieldObjectsPromise:V=null,mouseState:z=null,annotationCanvasMap:J=null}){this.pageDiv=n,this.pdfPage=t,this.linkService=d,this.downloadManager=f,this.imageResourcesPath=b,this.renderForms=m,this.l10n=h,this.annotationStorage=l,this.enableScripting=x,this._hasJSActionsPromise=R,this._fieldObjectsPromise=V,this._mouseState=z,this._annotationCanvasMap=J,this.div=null,this._cancelled=!1}render(n,t="display"){var d=this;return _(function*(){const[f,l=!1,b=null]=yield Promise.all([d.pdfPage.getAnnotations({intent:t}),d._hasJSActionsPromise,d._fieldObjectsPromise]);if(d._cancelled||0===f.length)return;const m={viewport:n.clone({dontFlip:!0}),div:d.div,annotations:f,page:d.pdfPage,imageResourcesPath:d.imageResourcesPath,renderForms:d.renderForms,linkService:d.linkService,downloadManager:d.downloadManager,annotationStorage:d.annotationStorage,enableScripting:d.enableScripting,hasJSActions:l,fieldObjects:b,mouseState:d._mouseState,annotationCanvasMap:d._annotationCanvasMap};d.div?A.AnnotationLayer.update(m):(d.div=document.createElement("div"),d.div.className="annotationLayer",d.pageDiv.appendChild(d.div),m.div=d.div,A.AnnotationLayer.render(m),d.l10n.translate(d.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},W=>{let v;v=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:C(83876),W.exports=v},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.NullL10n=void 0,v.fixupLangCode=function k(t){return w[t?.toLowerCase()]||t},v.getL10nFallback=A;const L={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function A(t,d){switch(t){case"find_match_count":t=`find_match_count[${1===d.total?"one":"other"}]`;break;case"find_match_count_limit":t=`find_match_count_limit[${1===d.limit?"one":"other"}]`}return L[t]||""}const w={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};v.NullL10n={getLanguage:()=>_(function*(){return"en-us"})(),getDirection:()=>_(function*(){return"ltr"})(),get:(t,d=null,f=A(t,d))=>_(function*(){return function E(t,d){return d?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(f,l)=>l in d?d[l]:"{{"+l+"}}"):t}(f,d)})(),translate:t=>_(function*(){})()}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.SimpleLinkService=v.PDFLinkService=v.LinkTarget=void 0;var A=L(6);const k={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function E(m,{url:h,target:x,rel:R,enabled:V=!0}={}){if(!h||"string"!=typeof h)throw new Error('A valid "url" parameter must provided.');const z=(0,A.removeNullCharacters)(h);V?m.href=m.title=z:(m.href="",m.title=`Disabled: ${z}`,m.onclick=()=>!1);let J="";switch(x){case k.NONE:break;case k.SELF:J="_self";break;case k.BLANK:J="_blank";break;case k.PARENT:J="_parent";break;case k.TOP:J="_top"}m.target=J,m.rel="string"==typeof R?R:"noopener noreferrer nofollow"}v.LinkTarget=k;var n=new WeakMap,t=new WeakSet;class d{constructor({eventBus:h,externalLinkTarget:x=null,externalLinkRel:R=null,ignoreDestinationZoom:V=!1}={}){M(this,t),U(this,n,new Map),this.eventBus=h,this.externalLinkTarget=x,this.externalLinkRel=R,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=V,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(h,x=null){this.baseUrl=x,this.pdfDocument=h,S(n,this).clear()}setViewer(h){this.pdfViewer=h}setHistory(h){this.pdfHistory=h}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(h){this.pdfViewer.currentPageNumber=h}get rotation(){return this.pdfViewer.pagesRotation}set rotation(h){this.pdfViewer.pagesRotation=h}goToDestination(h){var x=this;return _(function*(){if(!x.pdfDocument)return;let R,V;"string"==typeof h?(R=h,V=yield x.pdfDocument.getDestination(h)):(R=null,V=yield h),Array.isArray(V)?D(t,x,f).call(x,h,R,V):console.error(`PDFLinkService.goToDestination: "${V}" is not a valid destination array, for dest="${h}".`)})()}goToPage(h){if(!this.pdfDocument)return;const x="string"==typeof h&&this.pdfViewer.pageLabelToPageNumber(h)||0|h;Number.isInteger(x)&&x>0&&x<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(x)),this.pdfViewer.scrollPageIntoView({pageNumber:x})):console.error(`PDFLinkService.goToPage: "${h}" is not a valid page.`)}addLinkAttributes(h,x,R=!1){E(h,{url:x,target:R?k.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(h){if("string"==typeof h){if(h.length>0)return this.getAnchorUrl("#"+escape(h))}else if(Array.isArray(h)){const x=JSON.stringify(h);if(x.length>0)return this.getAnchorUrl("#"+escape(x))}return this.getAnchorUrl("")}getAnchorUrl(h){return(this.baseUrl||"")+h}setHash(h){if(!this.pdfDocument)return;let x,R;if(h.includes("=")){const V=(0,A.parseQueryString)(h);if(V.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:V.get("search").replace(/"/g,""),phraseSearch:"true"===V.get("phrase")}),V.has("page")&&(x=0|V.get("page")||1),V.has("zoom")){const z=V.get("zoom").split(","),J=z[0],X=parseFloat(J);J.includes("Fit")?"Fit"===J||"FitB"===J?R=[null,{name:J}]:"FitH"===J||"FitBH"===J||"FitV"===J||"FitBV"===J?R=[null,{name:J},z.length>1?0|z[1]:null]:"FitR"===J?5!==z.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):R=[null,{name:J},0|z[1],0|z[2],0|z[3],0|z[4]]:console.error(`PDFLinkService.setHash: "${J}" is not a valid zoom value.`):R=[null,{name:"XYZ"},z.length>1?0|z[1]:null,z.length>2?0|z[2]:null,X?X/100:J]}R?this.pdfViewer.scrollPageIntoView({pageNumber:x||this.page,destArray:R,allowNegativeOffset:!0}):x&&(this.page=x),V.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:V.get("pagemode")}),V.has("nameddest")&&this.goToDestination(V.get("nameddest"))}else{R=unescape(h);try{R=JSON.parse(R),Array.isArray(R)||(R=R.toString())}catch{}if("string"==typeof R||l.call(d,R))return void this.goToDestination(R);console.error(`PDFLinkService.setHash: "${unescape(h)}" is not a valid destination.`)}}executeNamedAction(h){switch(h){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:h})}cachePageRef(h,x){if(!x)return;const R=0===x.gen?`${x.num}R`:`${x.num}R${x.gen}`;S(n,this).set(R,h)}_cachedPageNumber(h){if(!h)return null;const x=0===h.gen?`${h.num}R`:`${h.num}R${h.gen}`;return S(n,this).get(x)||null}isPageVisible(h){return this.pdfViewer.isPageVisible(h)}isPageCached(h){return this.pdfViewer.isPageCached(h)}}function f(m,h=null,x){const R=x[0];let V;if("object"==typeof R&&null!==R){if(V=this._cachedPageNumber(R),!V)return void this.pdfDocument.getPageIndex(R).then(z=>{this.cachePageRef(z+1,R),D(t,this,f).call(this,m,h,x)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid page reference, for dest="${m}".`)})}else{if(!Number.isInteger(R))return void console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid destination reference, for dest="${m}".`);V=R+1}!V||V<1||V>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${V}" is not a valid page number, for dest="${m}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:h,explicitDest:x,pageNumber:V})),this.pdfViewer.scrollPageIntoView({pageNumber:V,destArray:x,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function l(m){if(!Array.isArray(m))return!1;const h=m.length;if(h<2)return!1;const x=m[0];if(!("object"==typeof x&&Number.isInteger(x.num)&&Number.isInteger(x.gen)||Number.isInteger(x)&&x>=0))return!1;const R=m[1];if("object"!=typeof R||"string"!=typeof R.name)return!1;let V=!0;switch(R.name){case"XYZ":if(5!==h)return!1;break;case"Fit":case"FitB":return 2===h;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==h)return!1;break;case"FitR":if(6!==h)return!1;V=!1;break;default:return!1}for(let z=2;z<h;z++){const J=m[z];if(!("number"==typeof J||V&&null===J))return!1}return!0}v.PDFLinkService=d,v.SimpleLinkService=class b{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(h){}get rotation(){return 0}set rotation(h){}goToDestination(h){return _(function*(){})()}goToPage(h){}addLinkAttributes(h,x,R=!1){E(h,{url:x,enabled:this.externalLinkEnabled})}getDestinationHash(h){return"#"}getAnchorUrl(h){return"#"}setHash(h){}executeNamedAction(h){}cachePageRef(h,x){}isPageVisible(h){return!0}isPageCached(h){return!0}}},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.animationStarted=v.VERTICAL_PADDING=v.UNKNOWN_SCALE=v.TextLayerMode=v.SpreadMode=v.SidebarView=v.ScrollMode=v.SCROLLBAR_PADDING=v.RenderingStates=v.RendererType=v.ProgressBar=v.PresentationModeState=v.OutputScale=v.MIN_SCALE=v.MAX_SCALE=v.MAX_AUTO_SCALE=v.DEFAULT_SCALE_VALUE=v.DEFAULT_SCALE_DELTA=v.DEFAULT_SCALE=v.AutoPrintRegExp=void 0,v.apiPageLayoutToViewerModes=function ne(q){let te=R.VERTICAL,ae=V.NONE;switch(q){case"SinglePage":te=R.PAGE;break;case"OneColumn":break;case"TwoPageLeft":te=R.PAGE;case"TwoColumnLeft":ae=V.ODD;break;case"TwoPageRight":te=R.PAGE;case"TwoColumnRight":ae=V.EVEN}return{scrollMode:te,spreadMode:ae}},v.apiPageModeToSidebarView=function Z(q){switch(q){case"UseNone":return m.NONE;case"UseThumbs":return m.THUMBS;case"UseOutlines":return m.OUTLINE;case"UseAttachments":return m.ATTACHMENTS;case"UseOC":return m.LAYERS}return m.NONE},v.approximateFraction=function s(q){if(Math.floor(q)===q)return[q,1];const te=1/q;if(te>8)return[1,8];if(Math.floor(te)===te)return[1,te];const le=q>1?te:q;let ie,ge=0,_e=1,Ae=1,ye=1;for(;;){const H=ge+Ae,K=_e+ye;if(K>8)break;le<=H/K?(Ae=H,ye=K):(ge=H,_e=K)}return ie=le-ge/_e<Ae/ye-le?le===q?[ge,_e]:[_e,ge]:le===q?[Ae,ye]:[ye,Ae],ie},v.backtrackBeforeAllVisibleElements=u,v.binarySearchFirstItem=e,v.getActiveOrFocusedElement=function ee(){let q=document,te=q.activeElement||q.querySelector(":focus");for(;te?.shadowRoot;)q=te.shadowRoot,te=q.activeElement||q.querySelector(":focus");return te},v.getPageSizeInches=function g({view:q,userUnit:te,rotate:ae}){const[le,ge,_e,Ae]=q,ye=ae%180!=0,ie=(_e-le)/72*te,H=(Ae-ge)/72*te;return{width:ye?H:ie,height:ye?ie:H}},v.getVisibleElements=function c({scrollEl:q,views:te,sortByVisibility:ae=!1,horizontal:le=!1,rtl:ge=!1}){const _e=q.scrollTop,Ae=_e+q.clientHeight,ye=q.scrollLeft,ie=ye+q.clientWidth,ue=[],me=new Set,ve=te.length;let be=e(te,le?function K(Se){const Ce=Se.div,we=Ce.offsetLeft+Ce.clientLeft;return ge?we<ie:we+Ce.clientWidth>ye}:function H(Se){const Ce=Se.div;return Ce.offsetTop+Ce.clientTop+Ce.clientHeight>_e});be>0&&be<ve&&!le&&(be=u(be,te,_e));let xe=le?ie:-1;for(let Se=be;Se<ve;Se++){const Ce=te[Se],we=Ce.div,Te=we.offsetLeft+we.clientLeft,Pe=we.offsetTop+we.clientTop,ke=we.clientWidth,Oe=we.clientHeight,Ie=Te+ke,Re=Pe+Oe;if(-1===xe)Re>=Ae&&(xe=Re);else if((le?Te:Pe)>xe)break;if(Re<=_e||Pe>=Ae||Ie<=ye||Te>=ie)continue;const Fe=Math.max(0,_e-Pe)+Math.max(0,Re-Ae),Ne=(ke-(Math.max(0,ye-Te)+Math.max(0,Ie-ie)))/ke;ue.push({id:Ce.id,x:Te,y:Pe,view:Ce,percent:(Oe-Fe)/Oe*Ne*100|0,widthPercent:100*Ne|0}),me.add(Ce.id)}const Le=ue[0],Me=ue[ue.length-1];return ae&&ue.sort(function(Se,Ce){const we=Se.percent-Ce.percent;return Math.abs(we)>.001?-we:Se.id-Ce.id}),{first:Le,last:Me,views:ue,ids:me}},v.isPortraitOrientation=function re(q){return q.width<=q.height},v.isValidRotation=function Y(q){return Number.isInteger(q)&&q%90==0},v.isValidScrollMode=function $(q){return Number.isInteger(q)&&Object.values(R).includes(q)&&q!==R.UNKNOWN},v.isValidSpreadMode=function se(q){return Number.isInteger(q)&&Object.values(V).includes(q)&&q!==V.UNKNOWN},v.noContextMenuHandler=function O(q){q.preventDefault()},v.normalizeWheelEventDelta=function j(q){let te=G(q);return 0===q.deltaMode?te/=900:1===q.deltaMode&&(te/=30),te},v.normalizeWheelEventDirection=G,v.parseQueryString=function de(q){const te=new Map;for(const[ae,le]of new URLSearchParams(q))te.set(ae.toLowerCase(),le);return te},v.removeNullCharacters=function a(q,te=!1){return"string"!=typeof q?(console.error("The argument must be a string."),q):(te&&(q=q.replace(B," ")),q.replace(he,""))},v.roundToDivide=function r(q,te){const ae=q%te;return 0===ae?q:Math.round(q-ae+te)},v.scrollIntoView=function X(q,te,ae=!1){let le=q.offsetParent;if(!le)return void console.error("offsetParent is not set -- cannot scroll");let ge=q.offsetTop+q.clientTop,_e=q.offsetLeft+q.clientLeft;for(;le.clientHeight===le.scrollHeight&&le.clientWidth===le.scrollWidth||ae&&(le.classList.contains("markedContent")||"hidden"===getComputedStyle(le).overflow);)if(ge+=le.offsetTop,_e+=le.offsetLeft,le=le.offsetParent,!le)return;te&&(void 0!==te.top&&(ge+=te.top),void 0!==te.left&&(_e+=te.left,le.scrollLeft=_e)),le.scrollTop=ge},v.watchScroll=function oe(q,te){const ae=function(_e){ge||(ge=window.requestAnimationFrame(function(){ge=null;const ye=q.scrollLeft,ie=le.lastX;ye!==ie&&(le.right=ye>ie),le.lastX=ye;const H=q.scrollTop,K=le.lastY;H!==K&&(le.down=H>K),le.lastY=H,te(le)}))},le={right:!0,down:!0,lastX:q.scrollLeft,lastY:q.scrollTop,_eventHandler:ae};let ge=null;return q.addEventListener("scroll",ae,!0),le},v.DEFAULT_SCALE_VALUE="auto",v.DEFAULT_SCALE=1,v.DEFAULT_SCALE_DELTA=1.1,v.MIN_SCALE=.1,v.MAX_SCALE=10,v.UNKNOWN_SCALE=0,v.MAX_AUTO_SCALE=1.25,v.SCROLLBAR_PADDING=40,v.VERTICAL_PADDING=5,v.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},v.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const m={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};v.SidebarView=m,v.RendererType={CANVAS:"canvas",SVG:"svg"},v.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const R={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};v.ScrollMode=R;const V={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};v.SpreadMode=V,v.AutoPrintRegExp=/\bprint\s*\(/,v.OutputScale=class J{constructor(){const te=window.devicePixelRatio||1;this.sx=te,this.sy=te}get scaled(){return 1!==this.sx||1!==this.sy}};const he=/\x00/g,B=/[\x01-\x1F]/g;function e(q,te,ae=0){let le=ae,ge=q.length-1;if(ge<0||!te(q[ge]))return q.length;if(te(q[le]))return le;for(;le<ge;){const _e=le+ge>>1;te(q[_e])?ge=_e:le=_e+1}return le}function u(q,te,ae){if(q<2)return q;let le=te[q].div,ge=le.offsetTop+le.clientTop;ge>=ae&&(le=te[q-1].div,ge=le.offsetTop+le.clientTop);for(let _e=q-2;_e>=0&&(le=te[_e].div,!(le.offsetTop+le.clientTop+le.clientHeight<=ge));--_e)q=_e;return q}function G(q){let te=Math.hypot(q.deltaX,q.deltaY);const ae=Math.atan2(q.deltaY,q.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(te=-te),te}const fe=new Promise(function(q){window.requestAnimationFrame(q)});v.animationStarted=fe;var ce=new WeakSet;function T(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}v.ProgressBar=class P{constructor(te){if(M(this,ce),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(te+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(te){this._indeterminate=isNaN(te),this._percent=function pe(q,te,ae){return Math.min(Math.max(q,te),ae)}(te,0,100),D(ce,this,T).call(this)}setWidth(te){if(!te)return;const le=te.parentNode.offsetWidth-te.offsetWidth;le>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${le}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.StructTreeLayerBuilder=void 0;const L={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},A=/^H(\d+)$/;v.StructTreeLayerBuilder=class w{constructor({pdfPage:E}){this.pdfPage=E}render(E){return this._walk(E)}_setAttributes(E,n){void 0!==E.alt&&n.setAttribute("aria-label",E.alt),void 0!==E.id&&n.setAttribute("aria-owns",E.id),void 0!==E.lang&&n.setAttribute("lang",E.lang)}_walk(E){if(!E)return null;const n=document.createElement("span");if("role"in E){const{role:t}=E,d=t.match(A);d?(n.setAttribute("role","heading"),n.setAttribute("aria-level",d[1])):L[t]&&n.setAttribute("role",L[t])}if(this._setAttributes(E,n),E.children)if(1===E.children.length&&"id"in E.children[0])this._setAttributes(E.children[0],n);else for(const t of E.children)n.appendChild(this._walk(t));return n}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.TextLayerBuilder=void 0;var A=L(3);v.TextLayerBuilder=class k{constructor({textLayerDiv:n,eventBus:t,pageIndex:d,viewport:f,highlighter:l=null,enhanceTextSelection:b=!1}){this.textLayerDiv=n,this.eventBus=t,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=d+1,this.viewport=f,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=l,this.enhanceTextSelection=b,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const n=document.createElement("div");n.className="endOfContent",this.textLayerDiv.appendChild(n)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(n=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const t=document.createDocumentFragment();this.textLayerRenderTask=(0,A.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:t,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:n,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(t),this._finishRendering(),this.highlighter?.enable()},function(d){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(n){this.cancel(),this.textContentStream=n}setTextContent(n){this.cancel(),this.textContent=n}_bindMouse(){const n=this.textLayerDiv;let t=null;n.addEventListener("mousedown",d=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(t&&(clearTimeout(t),t=null));const f=n.querySelector(".endOfContent");if(!f)return;let l=d.target!==n;if(l=l&&"none"!==window.getComputedStyle(f).getPropertyValue("-moz-user-select"),l){const b=n.getBoundingClientRect(),m=Math.max(0,(d.pageY-b.top)/b.height);f.style.top=(100*m).toFixed(2)+"%"}f.classList.add("active")}),n.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(t=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),t=null},300));const d=n.querySelector(".endOfContent");d&&(d.style.top="",d.classList.remove("active"))})}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.XfaLayerBuilder=void 0;var A=L(3);v.XfaLayerBuilder=class w{constructor({pageDiv:E,pdfPage:n,annotationStorage:t=null,linkService:d,xfaHtml:f=null}){this.pageDiv=E,this.pdfPage=n,this.annotationStorage=t,this.linkService=d,this.xfaHtml=f,this.div=null,this._cancelled=!1}render(E,n="display"){if("print"===n){const t={viewport:E.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},d=document.createElement("div");this.pageDiv.appendChild(d),t.div=d;const f=A.XfaLayer.render(t);return Promise.resolve(f)}return this.pdfPage.getXfa().then(t=>{if(this._cancelled||!t)return{textDivs:[]};const d={viewport:E.clone({dontFlip:!0}),div:this.div,xfaHtml:t,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?A.XfaLayer.update(d):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),d.div=this.div,A.XfaLayer.render(d))}).catch(t=>{console.error(t)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFViewer=v.PDFSinglePageViewer=void 0;var A=L(6),w=L(11);v.PDFViewer=class k extends w.BaseViewer{},v.PDFSinglePageViewer=class E extends w.BaseViewer{_resetView(){super._resetView(),this._scrollMode=A.ScrollMode.PAGE,this._spreadMode=A.SpreadMode.NONE}set scrollMode(t){}_updateScrollMode(){}set spreadMode(t){}_updateSpreadMode(){}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PagesCountLimit=v.PDFPageViewBuffer=v.BaseViewer=void 0;var A=L(3),w=L(6),k=L(2),E=L(4),n=L(12),t=L(14),d=L(5),f=L(7),l=L(15),b=L(8),m=L(9);const x="enablePermissions",R={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};v.PagesCountLimit=R;var V=new WeakMap,z=new WeakMap,J=new WeakSet;class X{constructor(P){M(this,J),U(this,V,new Set),U(this,z,0),y(z,this,P)}push(P){const T=S(V,this);T.has(P)&&T.delete(P),T.add(P),T.size>S(z,this)&&D(J,this,oe).call(this)}resize(P,T=null){y(z,this,P);const ee=S(V,this);if(T){const ne=ee.size;let Z=1;for(const q of ee)if(T.has(q.id)&&(ee.delete(q),ee.add(q)),++Z>ne)break}for(;ee.size>S(z,this);)D(J,this,oe).call(this)}has(P){return S(V,this).has(P)}[Symbol.iterator](){return S(V,this).keys()}}function oe(){const ce=S(V,this).keys().next().value;ce?.destroy(),S(V,this).delete(ce)}v.PDFPageViewBuffer=X;var de=new WeakMap,he=new WeakMap,B=new WeakMap,a=new WeakMap,e=new WeakMap,s=new WeakMap,r=new WeakMap,g=new WeakSet;class u{constructor(P){if(M(this,g),U(this,de,null),U(this,he,A.AnnotationMode.ENABLE_FORMS),U(this,B,null),U(this,a,!1),U(this,e,0),U(this,s,null),U(this,r,null),this.constructor===u)throw new Error("Cannot initialize BaseViewer.");const T="2.14.305";if(A.version!==T)throw new Error(`The API version "${A.version}" does not match the Viewer version "${T}".`);if(this.container=P.container,this.viewer=P.viewer||P.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=P.eventBus,this.linkService=P.linkService||new d.SimpleLinkService,this.downloadManager=P.downloadManager||null,this.findController=P.findController||null,this._scriptingManager=P.scriptingManager||null,this.removePageBorders=P.removePageBorders||!1,this.textLayerMode=P.textLayerMode??w.TextLayerMode.ENABLE,y(he,this,P.annotationMode??A.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=P.imageResourcesPath||"",this.enablePrintAutoRotate=P.enablePrintAutoRotate||!1,this.renderer=P.renderer||w.RendererType.CANVAS,this.useOnlyCssZoom=P.useOnlyCssZoom||!1,this.maxCanvasPixels=P.maxCanvasPixels,this.l10n=P.l10n||E.NullL10n,y(a,this,P.enablePermissions||!1),this.pageColors=P.pageColors||null,P.pageColors&&(!CSS.supports("color",P.pageColors.background)||!CSS.supports("color",P.pageColors.foreground))&&((P.pageColors.background||P.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!P.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new t.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=P.renderingQueue,this._doc=document.documentElement,this.scroll=(0,w.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=w.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(P){return this._pages[P]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(P){return P?.pdfPage})}get renderForms(){return S(he,this)===A.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(P){if(!Number.isInteger(P))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(P,!0)||console.error(`currentPageNumber: "${P}" is not a valid page.`))}_setCurrentPageNumber(P,T=!1){if(this._currentPageNumber===P)return T&&D(g,this,$).call(this),!0;if(!(0<P&&P<=this.pagesCount))return!1;const ee=this._currentPageNumber;return this._currentPageNumber=P,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:P,pageLabel:this._pageLabels?.[P-1]??null,previous:ee}),T&&D(g,this,$).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(P){if(!this.pdfDocument)return;let T=0|P;if(this._pageLabels){const ee=this._pageLabels.indexOf(P);ee>=0&&(T=ee+1)}this._setCurrentPageNumber(T,!0)||console.error(`currentPageLabel: "${P}" is not a valid page.`)}get currentScale(){return this._currentScale!==w.UNKNOWN_SCALE?this._currentScale:w.DEFAULT_SCALE}set currentScale(P){if(isNaN(P))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(P,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(P){this.pdfDocument&&this._setScale(P,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(P){if(!(0,w.isValidRotation)(P))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((P%=360)<0&&(P+=360),this._pagesRotation===P))return;this._pagesRotation=P;const T=this._currentPageNumber,ee={rotation:P};for(const ne of this._pages)ne.update(ee);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:P,pageNumber:T}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(P){var T=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=P,!P)return;const ee=P.isPureXfa,ne=P.numPages,Z=P.getPage(1),q=P.getOptionalContentConfig(),te=S(a,this)?P.getPermissions():Promise.resolve();if(ne>R.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ae=this._scrollMode=w.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ae})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:ne})},()=>{}),this._onBeforeDraw=ae=>{const le=this._pages[ae.pageNumber-1];le&&S(de,this).push(le)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ae=>{ae.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ae.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,S(r,this)&&(document.removeEventListener("visibilitychange",S(r,this)),y(r,this,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([Z,te]).then(([ae,le])=>{if(P!==this.pdfDocument)return;this._firstPageCapability.resolve(ae),this._optionalContentConfigPromise=q,D(g,this,c).call(this,le);const ge=this._scrollMode===w.ScrollMode.PAGE?null:this.viewer,_e=this.currentScale,Ae=ae.getViewport({scale:_e*A.PixelsPerInch.PDF_TO_CSS_UNITS}),ye=this.textLayerMode===w.TextLayerMode.DISABLE||ee?null:this,ie=S(he,this)!==A.AnnotationMode.DISABLE?this:null,H=ee?this:null;for(let ue=1;ue<=ne;++ue){const me=new n.PDFPageView({container:ge,eventBus:this.eventBus,id:ue,scale:_e,defaultViewport:Ae.clone(),optionalContentConfigPromise:q,renderingQueue:this.renderingQueue,textLayerFactory:ye,textLayerMode:this.textLayerMode,annotationLayerFactory:ie,annotationMode:S(he,this),xfaLayerFactory:H,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(me)}const K=this._pages[0];K&&(K.setPdfPage(ae),this.linkService.cachePageRef(1,ae.ref)),this._scrollMode===w.ScrollMode.PAGE?D(g,this,G).call(this):this._spreadMode!==w.SpreadMode.NONE&&this._updateSpreadMode(),D(g,this,O).call(this).then(_(function*(){if(T.findController&&T.findController.setDocument(P),T._scriptingManager&&T._scriptingManager.setDocument(P),P.loadingParams.disableAutoFetch||ne>R.FORCE_LAZY_PAGE_INIT)return void T._pagesCapability.resolve();let ue=ne-1;if(ue<=0)T._pagesCapability.resolve();else for(let me=2;me<=ne;++me){const ve=P.getPage(me).then(be=>{const xe=T._pages[me-1];xe.pdfPage||xe.setPdfPage(be),T.linkService.cachePageRef(me,be.ref),0==--ue&&T._pagesCapability.resolve()},be=>{console.error(`Unable to get page ${me} to initialize viewer`,be),0==--ue&&T._pagesCapability.resolve()});me%R.PAUSE_EAGER_PAGE_INIT==0&&(yield ve)}})),this.eventBus.dispatch("pagesinit",{source:this}),P.getMetadata().then(({info:ue})=>{P===this.pdfDocument&&ue.Language&&(this.viewer.lang=ue.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ae=>{console.error("Unable to initialize viewer",ae),this._pagesCapability.reject(ae)})}setPageLabels(P){if(this.pdfDocument){P?Array.isArray(P)&&this.pdfDocument.numPages===P.length?this._pageLabels=P:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let T=0,ee=this._pages.length;T<ee;T++)this._pages[T].setPageLabel(this._pageLabels?.[T]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=w.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,y(de,this,new X(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,A.createPromiseCapability)(),this._onePageRenderedCapability=(0,A.createPromiseCapability)(),this._pagesCapability=(0,A.createPromiseCapability)(),this._scrollMode=w.ScrollMode.VERTICAL,this._previousScrollMode=w.ScrollMode.UNKNOWN,this._spreadMode=w.SpreadMode.NONE,y(s,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),S(r,this)&&(document.removeEventListener("visibilitychange",S(r,this)),y(r,this,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(x),null!==S(B,this)&&(y(he,this,S(B,this)),y(B,this,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(P,T,ee=!1,ne=!1){if(this._currentScaleValue=T.toString(),D(g,this,Y).call(this,P))return void(ne&&this.eventBus.dispatch("scalechanging",{source:this,scale:P,presetValue:T}));this._doc.style.setProperty("--zoom-factor",P);const Z={scale:P};for(const q of this._pages)q.update(Z);if(this._currentScale=P,!ee){let te,q=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(q=this._location.pageNumber,te=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:q,destArray:te,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:P,presetValue:ne?T:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==w.SpreadMode.NONE&&this._scrollMode!==w.ScrollMode.HORIZONTAL?2:1}_setScale(P,T=!1){let ee=parseFloat(P);if(ee>0)this._setScaleUpdatePages(ee,P,T,!1);else{const ne=this._pages[this._currentPageNumber-1];if(!ne)return;let Z=w.SCROLLBAR_PADDING,q=w.VERTICAL_PADDING;this.isInPresentationMode?Z=q=4:this.removePageBorders?Z=q=0:this._scrollMode===w.ScrollMode.HORIZONTAL&&([Z,q]=[q,Z]);const te=(this.container.clientWidth-Z)/ne.width*ne.scale/this._pageWidthScaleFactor,ae=(this.container.clientHeight-q)/ne.height*ne.scale;switch(P){case"page-actual":ee=1;break;case"page-width":ee=te;break;case"page-height":ee=ae;break;case"page-fit":ee=Math.min(te,ae);break;case"auto":const le=(0,w.isPortraitOrientation)(ne)?te:Math.min(ae,te);ee=Math.min(w.MAX_AUTO_SCALE,le);break;default:return void console.error(`_setScale: "${P}" is an unknown zoom value.`)}this._setScaleUpdatePages(ee,P,T,!0)}}pageLabelToPageNumber(P){if(!this._pageLabels)return null;const T=this._pageLabels.indexOf(P);return T<0?null:T+1}scrollPageIntoView({pageNumber:P,destArray:T=null,allowNegativeOffset:ee=!1,ignoreDestinationZoom:ne=!1}){if(!this.pdfDocument)return;const Z=Number.isInteger(P)&&this._pages[P-1];if(!Z)return void console.error(`scrollPageIntoView: "${P}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!T)return void this._setCurrentPageNumber(P,!0);let ge,_e,q=0,te=0,ae=0,le=0;const Ae=Z.rotation%180!=0,ye=(Ae?Z.height:Z.width)/Z.scale/A.PixelsPerInch.PDF_TO_CSS_UNITS,ie=(Ae?Z.width:Z.height)/Z.scale/A.PixelsPerInch.PDF_TO_CSS_UNITS;let H=0;switch(T[1].name){case"XYZ":q=T[2],te=T[3],H=T[4],q=null!==q?q:0,te=null!==te?te:ie;break;case"Fit":case"FitB":H="page-fit";break;case"FitH":case"FitBH":te=T[2],H="page-width",null===te&&this._location?(q=this._location.left,te=this._location.top):("number"!=typeof te||te<0)&&(te=ie);break;case"FitV":case"FitBV":q=T[2],ae=ye,le=ie,H="page-height";break;case"FitR":q=T[2],te=T[3],ae=T[4]-q,le=T[5]-te,ge=(this.container.clientWidth-(this.removePageBorders?0:w.SCROLLBAR_PADDING))/ae/A.PixelsPerInch.PDF_TO_CSS_UNITS,_e=(this.container.clientHeight-(this.removePageBorders?0:w.VERTICAL_PADDING))/le/A.PixelsPerInch.PDF_TO_CSS_UNITS,H=Math.min(Math.abs(ge),Math.abs(_e));break;default:return void console.error(`scrollPageIntoView: "${T[1].name}" is not a valid destination type.`)}if(ne||(H&&H!==this._currentScale?this.currentScaleValue=H:this._currentScale===w.UNKNOWN_SCALE&&(this.currentScaleValue=w.DEFAULT_SCALE_VALUE)),"page-fit"===H&&!T[4])return void D(g,this,j).call(this,Z);const K=[Z.viewport.convertToViewportPoint(q,te),Z.viewport.convertToViewportPoint(q+ae,te+le)];let ue=Math.min(K[0][0],K[1][0]),me=Math.min(K[0][1],K[1][1]);ee||(ue=Math.max(ue,0),me=Math.max(me,0)),D(g,this,j).call(this,Z,{left:ue,top:me})}_updateLocation(P){const T=this._currentScale,ee=this._currentScaleValue,ne=parseFloat(ee)===T?Math.round(1e4*T)/100:ee,Z=P.id,te=this.container,ae=this._pages[Z-1].getPagePoint(te.scrollLeft-P.x,te.scrollTop-P.y),le=Math.round(ae[0]),ge=Math.round(ae[1]);let _e=`#page=${Z}`;this.isInPresentationMode||(_e+=`&zoom=${ne},${le},${ge}`),this._location={pageNumber:Z,scale:ne,top:ge,left:le,rotation:this._pagesRotation,pdfOpenParams:_e}}update(){const P=this._getVisiblePages(),T=P.views,ee=T.length;if(0===ee)return;const ne=Math.max(10,2*ee+1);S(de,this).resize(ne,P.ids),this.renderingQueue.renderHighestPriority(P);const Z=this._spreadMode===w.SpreadMode.NONE&&(this._scrollMode===w.ScrollMode.PAGE||this._scrollMode===w.ScrollMode.VERTICAL),q=this._currentPageNumber;let te=!1;for(const ae of T){if(ae.percent<100)break;if(ae.id===q&&Z){te=!0;break}}this._setCurrentPageNumber(te?q:T[0].id),this._updateLocation(P.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(P){return this.container.contains(P)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===w.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===w.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const P=this._scrollMode===w.ScrollMode.PAGE?S(s,this).pages:this._pages,T=this._scrollMode===w.ScrollMode.HORIZONTAL;return(0,w.getVisibleElements)({scrollEl:this.container,views:P,sortByVisibility:!0,horizontal:T,rtl:T&&this._isContainerRtl})}isPageVisible(P){return!!this.pdfDocument&&(Number.isInteger(P)&&P>0&&P<=this.pagesCount?this._getVisiblePages().ids.has(P):(console.error(`isPageVisible: "${P}" is not a valid page.`),!1))}isPageCached(P){if(!this.pdfDocument)return!1;if(!(Number.isInteger(P)&&P>0&&P<=this.pagesCount))return console.error(`isPageCached: "${P}" is not a valid page.`),!1;const T=this._pages[P-1];return S(de,this).has(T)}cleanup(){for(const P of this._pages)P.renderingState!==w.RenderingStates.FINISHED&&P.reset()}_cancelRendering(){for(const P of this._pages)P.cancelRendering()}forceRendering(P){const T=P||this._getVisiblePages(),ee=D(g,this,fe).call(this,T),Z=this.renderingQueue.getHighestPriority(T,this._pages,ee,this._spreadMode!==w.SpreadMode.NONE&&this._scrollMode!==w.ScrollMode.HORIZONTAL);return D(g,this,pe).call(this,T.ids),!!Z&&(D(g,this,se).call(this,Z).then(()=>{this.renderingQueue.renderView(Z)}),!0)}createTextLayerBuilder(P,T,ee,ne=!1,Z,q){return new b.TextLayerBuilder({textLayerDiv:P,eventBus:Z,pageIndex:T,viewport:ee,enhanceTextSelection:!this.isInPresentationMode&&ne,highlighter:q})}createTextHighlighter(P,T){return new l.TextHighlighter({eventBus:T,pageIndex:P,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(P,T,ee=null,ne="",Z=!0,q=E.NullL10n,te=null,ae=null,le=null,ge=null,_e=null){return new k.AnnotationLayerBuilder({pageDiv:P,pdfPage:T,annotationStorage:ee||this.pdfDocument?.annotationStorage,imageResourcesPath:ne,renderForms:Z,linkService:this.linkService,downloadManager:this.downloadManager,l10n:q,enableScripting:te??this.enableScripting,hasJSActionsPromise:ae||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:ge||this.pdfDocument?.getFieldObjects(),mouseState:le||this._scriptingManager?.mouseState,annotationCanvasMap:_e})}createXfaLayerBuilder(P,T,ee=null){return new m.XfaLayerBuilder({pageDiv:P,pdfPage:T,annotationStorage:ee||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(P){return new f.StructTreeLayerBuilder({pdfPage:P})}get hasEqualPageSizes(){const P=this._pages[0];for(let T=1,ee=this._pages.length;T<ee;++T){const ne=this._pages[T];if(ne.width!==P.width||ne.height!==P.height)return!1}return!0}getPagesOverview(){return this._pages.map(P=>{const T=P.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,w.isPortraitOrientation)(T)?{width:T.width,height:T.height,rotation:T.rotation}:{width:T.height,height:T.width,rotation:(T.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(P){if(!(P instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${P}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=P;const T={optionalContentConfigPromise:P};for(const ee of this._pages)ee.update(T);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:P})}get scrollMode(){return this._scrollMode}set scrollMode(P){if(this._scrollMode!==P){if(!(0,w.isValidScrollMode)(P))throw new Error(`Invalid scroll mode: ${P}`);this.pagesCount>R.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=P,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:P}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(P=null){const T=this._scrollMode,ee=this.viewer;ee.classList.toggle("scrollHorizontal",T===w.ScrollMode.HORIZONTAL),ee.classList.toggle("scrollWrapped",T===w.ScrollMode.WRAPPED),this.pdfDocument&&P&&(T===w.ScrollMode.PAGE?D(g,this,G).call(this):this._previousScrollMode===w.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(P,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(P){if(this._spreadMode!==P){if(!(0,w.isValidSpreadMode)(P))throw new Error(`Invalid spread mode: ${P}`);this._spreadMode=P,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:P}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(P=null){if(!this.pdfDocument)return;const T=this.viewer,ee=this._pages;if(this._scrollMode===w.ScrollMode.PAGE)D(g,this,G).call(this);else if(T.textContent="",this._spreadMode===w.SpreadMode.NONE)for(const ne of this._pages)T.appendChild(ne.div);else{const ne=this._spreadMode-1;let Z=null;for(let q=0,te=ee.length;q<te;++q)null===Z?(Z=document.createElement("div"),Z.className="spread",T.appendChild(Z)):q%2===ne&&(Z=Z.cloneNode(!1),T.appendChild(Z)),Z.appendChild(ee[q].div)}P&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(P,!0),this.update())}_getPageAdvance(P,T=!1){switch(this._scrollMode){case w.ScrollMode.WRAPPED:{const{views:ee}=this._getVisiblePages(),ne=new Map;for(const{id:Z,y:q,percent:te,widthPercent:ae}of ee){if(0===te||ae<100)continue;let le=ne.get(q);le||ne.set(q,le||=[]),le.push(Z)}for(const Z of ne.values()){const q=Z.indexOf(P);if(-1===q)continue;const te=Z.length;if(1===te)break;if(T)for(let ae=q-1,le=0;ae>=le;ae--){const _e=Z[ae+1]-1;if(Z[ae]<_e)return P-_e}else for(let ae=q+1,le=te;ae<le;ae++){const _e=Z[ae-1]+1;if(Z[ae]>_e)return _e-P}if(T){const ae=Z[0];if(ae<P)return P-ae+1}else{const ae=Z[te-1];if(ae>P)return ae-P+1}break}break}case w.ScrollMode.HORIZONTAL:break;case w.ScrollMode.PAGE:case w.ScrollMode.VERTICAL:{if(this._spreadMode===w.SpreadMode.NONE)break;const ee=this._spreadMode-1;if(T&&P%2!==ee)break;if(!T&&P%2===ee)break;const{views:ne}=this._getVisiblePages(),Z=T?P-1:P+1;for(const{id:q,percent:te,widthPercent:ae}of ne)if(q===Z){if(te>0&&100===ae)return 2;break}break}}return 1}nextPage(){const P=this._currentPageNumber,T=this.pagesCount;if(P>=T)return!1;const ee=this._getPageAdvance(P,!1)||1;return this.currentPageNumber=Math.min(P+ee,T),!0}previousPage(){const P=this._currentPageNumber;if(P<=1)return!1;const T=this._getPageAdvance(P,!0)||1;return this.currentPageNumber=Math.max(P-T,1),!0}increaseScale(P=1){let T=this._currentScale;do{T=(T*w.DEFAULT_SCALE_DELTA).toFixed(2),T=Math.ceil(10*T)/10,T=Math.min(w.MAX_SCALE,T)}while(--P>0&&T<w.MAX_SCALE);this.currentScaleValue=T}decreaseScale(P=1){let T=this._currentScale;do{T=(T/w.DEFAULT_SCALE_DELTA).toFixed(2),T=Math.floor(10*T)/10,T=Math.max(w.MIN_SCALE,T)}while(--P>0&&T>w.MIN_SCALE);this.currentScaleValue=T}updateContainerHeightCss(){const P=this.container.clientHeight;P!==S(e,this)&&(y(e,this,P),this._doc.style.setProperty("--viewer-container-height",`${P}px`))}}function c(ce){ce&&(ce.includes(A.PermissionFlag.COPY)||this.viewer.classList.add(x),!ce.includes(A.PermissionFlag.MODIFY_ANNOTATIONS)&&!ce.includes(A.PermissionFlag.FILL_INTERACTIVE_FORMS)&&S(he,this)===A.AnnotationMode.ENABLE_FORMS&&(y(B,this,S(he,this)),y(he,this,A.AnnotationMode.ENABLE)))}function O(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const ce=new Promise(P=>{y(r,this,()=>{"hidden"===document.visibilityState&&(P(),document.removeEventListener("visibilitychange",S(r,this)),y(r,this,null))}),document.addEventListener("visibilitychange",S(r,this))});return Promise.race([this._onePageRenderedCapability.promise,ce])}function G(){if(this._scrollMode!==w.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const ce=this._currentPageNumber,P=S(s,this),T=this.viewer;if(T.textContent="",P.pages.length=0,this._spreadMode!==w.SpreadMode.NONE||this.isInPresentationMode){const ee=new Set,ne=this._spreadMode-1;-1===ne?ee.add(ce-1):ce%2!==ne?(ee.add(ce-1),ee.add(ce)):(ee.add(ce-2),ee.add(ce-1));const Z=document.createElement("div");if(Z.className="spread",this.isInPresentationMode){const q=document.createElement("div");q.className="dummyPage",Z.appendChild(q)}for(const q of ee){const te=this._pages[q];te&&(Z.appendChild(te.div),P.pages.push(te))}T.appendChild(Z)}else{const ee=this._pages[ce-1];T.appendChild(ee.div),P.pages.push(ee)}P.scrollDown=ce>=P.previousPageNumber,P.previousPageNumber=ce}function j(ce,P=null){const{div:T,id:ee}=ce;if(this._scrollMode===w.ScrollMode.PAGE&&(this._setCurrentPageNumber(ee),D(g,this,G).call(this),this.update()),!P&&!this.isInPresentationMode){const ne=T.offsetLeft+T.clientLeft,Z=ne+T.clientWidth,{scrollLeft:q,clientWidth:te}=this.container;(this._scrollMode===w.ScrollMode.HORIZONTAL||ne<q||Z>q+te)&&(P={left:0,top:0})}(0,w.scrollIntoView)(T,P)}function Y(ce){return ce===this._currentScale||Math.abs(ce-this._currentScale)<1e-15}function $(){const ce=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),D(g,this,j).call(this,ce)}function se(ce){return re.apply(this,arguments)}function re(){return(re=_(function*(ce){if(ce.pdfPage)return ce.pdfPage;try{const P=yield this.pdfDocument.getPage(ce.id);return ce.pdfPage||ce.setPdfPage(P),this.linkService._cachedPageNumber?.(P.ref)||this.linkService.cachePageRef(ce.id,P.ref),P}catch(P){return console.error("Unable to get page for page view",P),null}})).apply(this,arguments)}function fe(ce){if(1===ce.first?.id)return!0;if(ce.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case w.ScrollMode.PAGE:return S(s,this).scrollDown;case w.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function pe(ce){for(const P of ce)this._pages[P-1]?.toggleLoadingIconSpinner(!0);for(const P of S(de,this))ce.has(P.id)||P.toggleLoadingIconSpinner(!1)}v.BaseViewer=u},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFPageView=void 0;var A=L(3),w=L(6),k=L(13),E=L(4);const n=k.compatibilityParams.maxCanvasPixels||16777216;var t=new WeakMap;v.PDFPageView=class d{constructor(l){U(this,t,A.AnnotationMode.ENABLE_FORMS);const b=l.container,m=l.defaultViewport;this.id=l.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=l.scale||w.DEFAULT_SCALE,this.viewport=m,this.pdfPageRotate=m.rotation,this._optionalContentConfigPromise=l.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=l.textLayerMode??w.TextLayerMode.ENABLE,y(t,this,l.annotationMode??A.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=l.imageResourcesPath||"",this.useOnlyCssZoom=l.useOnlyCssZoom||!1,this.maxCanvasPixels=l.maxCanvasPixels||n,this.pageColors=l.pageColors||null,this.eventBus=l.eventBus,this.renderingQueue=l.renderingQueue,this.textLayerFactory=l.textLayerFactory,this.annotationLayerFactory=l.annotationLayerFactory,this.xfaLayerFactory=l.xfaLayerFactory,this.textHighlighter=l.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=l.structTreeLayerFactory,this.renderer=l.renderer||w.RendererType.CANVAS,this.l10n=l.l10n||E.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=w.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const h=document.createElement("div");h.className="page",h.style.width=Math.floor(this.viewport.width)+"px",h.style.height=Math.floor(this.viewport.height)+"px",h.setAttribute("data-page-number",this.id),h.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(x=>{h.setAttribute("aria-label",x)}),this.div=h,b?.appendChild(h)}setPdfPage(l){this.pdfPage=l,this.pdfPageRotate=l.rotate,this.viewport=l.getViewport({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var l=this;return _(function*(){let b=null;try{yield l.annotationLayer.render(l.viewport,"display")}catch(m){b=m}finally{l.eventBus.dispatch("annotationlayerrendered",{source:l,pageNumber:l.id,error:b})}})()}_renderXfaLayer(){var l=this;return _(function*(){let b=null;try{const m=yield l.xfaLayer.render(l.viewport,"display");l.textHighlighter&&l._buildXfaTextContentItems(m.textDivs)}catch(m){b=m}finally{l.eventBus.dispatch("xfalayerrendered",{source:l,pageNumber:l.id,error:b})}})()}_buildXfaTextContentItems(l){var b=this;return _(function*(){const m=yield b.pdfPage.getTextContent(),h=[];for(const x of m.items)h.push(x.str);b.textHighlighter.setTextMapping(l,h),b.textHighlighter.enable()})()}_resetZoomLayer(l=!1){if(!this.zoomLayer)return;const b=this.zoomLayer.firstChild;this.paintedViewportMap.delete(b),b.width=0,b.height=0,l&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:l=!1,keepAnnotationLayer:b=!1,keepXfaLayer:m=!1}={}){this.cancelRendering({keepAnnotationLayer:b,keepXfaLayer:m}),this.renderingState=w.RenderingStates.INITIAL;const h=this.div;h.style.width=Math.floor(this.viewport.width)+"px",h.style.height=Math.floor(this.viewport.height)+"px";const x=h.childNodes,R=l&&this.zoomLayer||null,V=b&&this.annotationLayer?.div||null,z=m&&this.xfaLayer?.div||null;for(let J=x.length-1;J>=0;J--){const X=x[J];switch(X){case R:case V:case z:continue}X.remove()}h.removeAttribute("data-loaded"),V&&this.annotationLayer.hide(),z&&this.xfaLayer.hide(),R||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(J=>{this.loadingIconDiv?.setAttribute("aria-label",J)}),h.appendChild(this.loadingIconDiv)}update({scale:l=0,rotation:b=null,optionalContentConfigPromise:m=null}){if(this.scale=l||this.scale,"number"==typeof b&&(this.rotation=b),m instanceof Promise&&(this._optionalContentConfigPromise=m),this.viewport=this.viewport.clone({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:R}=document.documentElement;R.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let x=!1;if(this.canvas&&this.maxCanvasPixels>0){const R=this.outputScale;(Math.floor(this.viewport.width)*R.sx|0)*(Math.floor(this.viewport.height)*R.sy|0)>this.maxCanvasPixels&&(x=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&x)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:l=!1,keepXfaLayer:b=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!l||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!b||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:l,redrawAnnotationLayer:b=!1,redrawXfaLayer:m=!1}){const h=this.viewport.width,x=this.viewport.height,R=this.div;l.style.width=l.parentNode.style.width=R.style.width=Math.floor(h)+"px",l.style.height=l.parentNode.style.height=R.style.height=Math.floor(x)+"px";const V=this.viewport.rotation-this.paintedViewportMap.get(l).rotation,z=Math.abs(V);let J=1,X=1;if((90===z||270===z)&&(J=x/h,X=h/x),l.style.transform=`rotate(${V}deg) scale(${J}, ${X})`,this.textLayer){const oe=this.textLayer.viewport,he=Math.abs(this.viewport.rotation-oe.rotation);let B=h/oe.width;(90===he||270===he)&&(B=h/oe.height);const a=this.textLayer.textLayerDiv;let e,s;switch(he){case 0:e=s=0;break;case 90:e=0,s="-"+a.style.height;break;case 180:e="-"+a.style.width,s="-"+a.style.height;break;case 270:e="-"+a.style.width,s=0;break;default:console.error("Bad rotation value.")}a.style.transform=`rotate(${he}deg) scale(${B}) translate(${e}, ${s})`,a.style.transformOrigin="0% 0%"}b&&this.annotationLayer&&this._renderAnnotationLayer(),m&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(l,b){return this.viewport.convertToPdfPoint(l,b)}toggleLoadingIconSpinner(l=!1){this.loadingIconDiv?.classList.toggle("notVisible",!l)}draw(){var l=this;this.renderingState!==w.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:b,pdfPage:m}=this;if(!m)return this.renderingState=w.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=w.RenderingStates.RUNNING;const h=document.createElement("div");h.style.width=b.style.width,h.style.height=b.style.height,h.classList.add("canvasWrapper"),this.annotationLayer?.div?b.insertBefore(h,this.annotationLayer.div):b.appendChild(h);let x=null;if(this.textLayerMode!==w.TextLayerMode.DISABLE&&this.textLayerFactory){const X=document.createElement("div");X.className="textLayer",X.style.width=h.style.width,X.style.height=h.style.height,this.annotationLayer?.div?b.insertBefore(X,this.annotationLayer.div):b.appendChild(X),x=this.textLayerFactory.createTextLayerBuilder(X,this.id-1,this.viewport,this.textLayerMode===w.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=x,S(t,this)!==A.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(b,m,null,this.imageResourcesPath,S(t,this)===A.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&b.appendChild(this.xfaLayer.div);let R=null;this.renderingQueue&&(R=X=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=w.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=w.RenderingStates.RUNNING,X()});X()});const V=function(){var X=_(function*(oe=null){if(z===l.paintTask&&(l.paintTask=null),oe instanceof A.RenderingCancelledException)l._renderError=null;else if(l._renderError=oe,l.renderingState=w.RenderingStates.FINISHED,l.loadingIconDiv&&(l.loadingIconDiv.remove(),delete l.loadingIconDiv),l._resetZoomLayer(!0),l.eventBus.dispatch("pagerendered",{source:l,pageNumber:l.id,cssTransform:!1,timestamp:performance.now(),error:l._renderError}),oe)throw oe});return function(){return X.apply(this,arguments)}}(),z=this.renderer===w.RendererType.SVG?this.paintOnSvg(h):this.paintOnCanvas(h);z.onRenderContinue=R,this.paintTask=z;const J=z.promise.then(()=>V(null).then(()=>{if(x){const X=m.streamTextContent({includeMarkedContent:!0});x.setTextContentStream(X),x.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(X){return V(X)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(b,m,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=X=>{X.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(oe=>{if(!oe||!this.canvas)return;const de=this.structTreeLayer.render(oe);de.classList.add("structTree"),this.canvas.appendChild(de)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(m)),b.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),J}paintOnCanvas(l){const b=(0,A.createPromiseCapability)(),m={promise:b.promise,onRenderContinue(a){a()},cancel(){B.cancel()}},h=this.viewport,x=document.createElement("canvas");x.hidden=!0;let R=!0;const V=function(){R&&(x.hidden=!1,R=!1)};l.appendChild(x),this.canvas=x;const z=x.getContext("2d",{alpha:!1}),J=this.outputScale=new w.OutputScale;if(this.useOnlyCssZoom){const a=h.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});J.sx*=a.width/h.width,J.sy*=a.height/h.height}if(this.maxCanvasPixels>0){const e=Math.sqrt(this.maxCanvasPixels/(h.width*h.height));J.sx>e||J.sy>e?(J.sx=e,J.sy=e,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const X=(0,w.approximateFraction)(J.sx),oe=(0,w.approximateFraction)(J.sy);x.width=(0,w.roundToDivide)(h.width*J.sx,X[0]),x.height=(0,w.roundToDivide)(h.height*J.sy,oe[0]),x.style.width=(0,w.roundToDivide)(h.width,X[1])+"px",x.style.height=(0,w.roundToDivide)(h.height,oe[1])+"px",this.paintedViewportMap.set(x,h);const he={canvasContext:z,transform:J.scaled?[J.sx,0,0,J.sy,0,0]:null,viewport:this.viewport,annotationMode:S(t,this),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},B=this.pdfPage.render(he);return B.onContinue=function(a){V(),m.onRenderContinue?m.onRenderContinue(a):a()},B.promise.then(function(){V(),b.resolve()},function(a){V(),b.reject(a)}),m}paintOnSvg(l){let b=!1;const m=()=>{if(b)throw new A.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},h=this.pdfPage,x=this.viewport.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:h.getOperatorList({annotationMode:S(t,this)}).then(V=>(m(),new A.SVGGraphics(h.commonObjs,h.objs).getSVG(V,x).then(J=>{m(),this.svg=J,this.paintedViewportMap.set(J,x),J.style.width=l.style.width,J.style.height=l.style.height,this.renderingState=w.RenderingStates.FINISHED,l.appendChild(J)}))),onRenderContinue(V){V()},cancel(){b=!0}}}setPageLabel(l){this.pageLabel="string"==typeof l?l:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.compatibilityParams=v.OptionKind=v.AppOptions=void 0;const L=Object.create(null);v.compatibilityParams=L;{const n=navigator.userAgent||"",t=navigator.platform||"",d=navigator.maxTouchPoints||1,f=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===t&&d>1||f)&&(L.maxCanvasPixels=5242880)}const A={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};v.OptionKind=A;const w={annotationMode:{value:2,kind:A.VIEWER+A.PREFERENCE},cursorToolOnLoad:{value:0,kind:A.VIEWER+A.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:A.VIEWER},defaultZoomValue:{value:"",kind:A.VIEWER+A.PREFERENCE},disableHistory:{value:!1,kind:A.VIEWER},disablePageLabels:{value:!1,kind:A.VIEWER+A.PREFERENCE},enablePermissions:{value:!1,kind:A.VIEWER+A.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:A.VIEWER+A.PREFERENCE},enableScripting:{value:!0,kind:A.VIEWER+A.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:A.VIEWER},externalLinkTarget:{value:0,kind:A.VIEWER+A.PREFERENCE},historyUpdateUrl:{value:!1,kind:A.VIEWER+A.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:A.VIEWER+A.PREFERENCE},imageResourcesPath:{value:"./images/",kind:A.VIEWER},maxCanvasPixels:{value:16777216,compatibility:L.maxCanvasPixels,kind:A.VIEWER},pageColorsBackground:{value:"Canvas",kind:A.VIEWER+A.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:A.VIEWER+A.PREFERENCE},pdfBugEnabled:{value:!1,kind:A.VIEWER+A.PREFERENCE},printResolution:{value:150,kind:A.VIEWER},renderer:{value:"canvas",kind:A.VIEWER},sidebarViewOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},scrollModeOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},spreadModeOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},textLayerMode:{value:1,kind:A.VIEWER+A.PREFERENCE},useOnlyCssZoom:{value:!1,kind:A.VIEWER+A.PREFERENCE},viewerCssTheme:{value:0,kind:A.VIEWER+A.PREFERENCE},viewOnLoad:{value:0,kind:A.VIEWER+A.PREFERENCE},cMapPacked:{value:!0,kind:A.API},cMapUrl:{value:"../web/cmaps/",kind:A.API},disableAutoFetch:{value:!1,kind:A.API+A.PREFERENCE},disableFontFace:{value:!1,kind:A.API+A.PREFERENCE},disableRange:{value:!1,kind:A.API+A.PREFERENCE},disableStream:{value:!1,kind:A.API+A.PREFERENCE},docBaseUrl:{value:"",kind:A.API},enableXfa:{value:!0,kind:A.API+A.PREFERENCE},fontExtraProperties:{value:!1,kind:A.API},isEvalSupported:{value:!0,kind:A.API},maxImageSize:{value:-1,kind:A.API},pdfBug:{value:!1,kind:A.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:A.API},verbosity:{value:1,kind:A.API},workerPort:{value:null,kind:A.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:A.WORKER}};w.disablePreferences={value:!1,kind:A.VIEWER},w.locale={value:navigator.language||"en-US",kind:A.VIEWER},w.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:A.VIEWER},w.renderer.kind+=A.PREFERENCE;const k=Object.create(null);v.AppOptions=class E{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(t){const d=k[t];if(void 0!==d)return d;const f=w[t];return void 0!==f?f.compatibility??f.value:void 0}static getAll(t=null){const d=Object.create(null);for(const f in w){const l=w[f];if(t){if(!(t&l.kind))continue;if(t===A.PREFERENCE){const m=l.value,h=typeof m;if("boolean"===h||"string"===h||"number"===h&&Number.isInteger(m)){d[f]=m;continue}throw new Error(`Invalid type for preference: ${f}`)}}const b=k[f];d[f]=void 0!==b?b:l.compatibility??l.value}return d}static set(t,d){k[t]=d}static setAll(t){for(const d in t)k[d]=t[d]}static remove(t){delete k[t]}static _hasUserOptions(){return Object.keys(k).length>0}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFRenderingQueue=void 0;var A=L(3),w=L(6);v.PDFRenderingQueue=class E{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(t)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(t,d,f,l=!1){const b=t.views,m=b.length;if(0===m)return null;for(let z=0;z<m;z++){const J=b[z].view;if(!this.isViewFinished(J))return J}const h=t.first.id,x=t.last.id;if(x-h+1>m){const z=t.ids;for(let J=1,X=x-h;J<X;J++){const oe=f?h+J:x-J;if(z.has(oe))continue;const de=d[oe-1];if(!this.isViewFinished(de))return de}}let R=f?x:h-2,V=d[R];return V&&!this.isViewFinished(V)||l&&(R+=f?1:-1,V=d[R],V&&!this.isViewFinished(V))?V:null}isViewFinished(t){return t.renderingState===w.RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case w.RenderingStates.FINISHED:return!1;case w.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case w.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case w.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(d=>{d instanceof A.RenderingCancelledException||console.error(`renderView: "${d}"`)})}return!0}}},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.TextHighlighter=void 0,v.TextHighlighter=class L{constructor({findController:w,eventBus:k,pageIndex:E}){this.findController=w,this.matches=[],this.eventBus=k,this.pageIdx=E,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(w,k){this.textDivs=w,this.textContentItemsStr=k}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=w=>{(w.pageIndex===this.pageIdx||-1===w.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(w,k){if(!w)return[];const{textContentItemsStr:E}=this;let n=0,t=0;const d=E.length-1,f=[];for(let l=0,b=w.length;l<b;l++){let m=w[l];for(;n!==d&&m>=t+E[n].length;)t+=E[n].length,n++;n===E.length&&console.error("Could not find a matching mapping");const h={begin:{divIdx:n,offset:m-t}};for(m+=k[l];n!==d&&m>t+E[n].length;)t+=E[n].length,n++;h.end={divIdx:n,offset:m-t},f.push(h)}return f}_renderMatches(w){if(0===w.length)return;const{findController:k,pageIdx:E}=this,{textContentItemsStr:n,textDivs:t}=this,d=E===k.selected.pageIdx,f=k.selected.matchIdx;let b=null;function h(z,J){const X=z.divIdx;return t[X].textContent="",x(X,0,z.offset,J)}function x(z,J,X,oe){let de=t[z];if(de.nodeType===Node.TEXT_NODE){const a=document.createElement("span");de.parentNode.insertBefore(a,de),a.appendChild(de),t[z]=a,de=a}const he=n[z].substring(J,X),B=document.createTextNode(he);if(oe){const a=document.createElement("span");return a.className=`${oe} appended`,a.appendChild(B),de.appendChild(a),oe.includes("selected")?a.offsetLeft:0}return de.appendChild(B),0}let R=f,V=R+1;if(k.state.highlightAll)R=0,V=w.length;else if(!d)return;for(let z=R;z<V;z++){const J=w[z],X=J.begin,oe=J.end,de=d&&z===f,he=de?" selected":"";let B=0;if(b&&X.divIdx===b.divIdx?x(b.divIdx,b.offset,X.offset):(null!==b&&x(b.divIdx,b.offset,undefined),h(X)),X.divIdx===oe.divIdx)B=x(X.divIdx,X.offset,oe.offset,"highlight"+he);else{B=x(X.divIdx,X.offset,undefined,"highlight begin"+he);for(let a=X.divIdx+1,e=oe.divIdx;a<e;a++)t[a].className="highlight middle"+he;h(oe,"highlight end"+he)}b=oe,de&&k.scrollMatchIntoView({element:t[X.divIdx],selectedLeft:B,pageIndex:E,matchIndex:f})}b&&x(b.divIdx,b.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:w,matches:k,pageIdx:E}=this,{textContentItemsStr:n,textDivs:t}=this;let d=-1;for(let b=0,m=k.length;b<m;b++){const h=k[b];for(let R=Math.max(d,h.begin.divIdx),V=h.end.divIdx;R<=V;R++){const z=t[R];z.textContent=n[R],z.className=""}d=h.end.divIdx+1}w?.highlightMatches&&(this.matches=this._convertMatches(w.pageMatches[E]||null,w.pageMatchesLength[E]||null),this._renderMatches(this.matches))}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.DownloadManager=void 0;var A=L(3);function w(E,n){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=E,t.target="_parent","download"in t&&(t.download=n),(document.body||document.documentElement).appendChild(t),t.click(),t.remove()}v.DownloadManager=class k{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(n,t){(0,A.createValidAbsoluteUrl)(n,"http://example.com")?w(n+"#pdfjs.action=download",t):console.error(`downloadUrl - not a valid URL: ${n}`)}downloadData(n,t,d){w(URL.createObjectURL(new Blob([n],{type:d})),t)}openOrDownloadData(n,t,d){const f=(0,A.isPdfFile)(d),l=f?"application/pdf":"";if(f){let m,b=this._openBlobUrls.get(n);b||(b=URL.createObjectURL(new Blob([t],{type:l})),this._openBlobUrls.set(n,b)),m="?file="+encodeURIComponent(b+"#"+d);try{return window.open(m),!0}catch(h){console.error(`openOrDownloadData: ${h}`),URL.revokeObjectURL(b),this._openBlobUrls.delete(n)}}return this.downloadData(t,d,l),!1}download(n,t,d,f="download"){w(URL.createObjectURL(n),d)}}},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.WaitOnType=v.EventBus=v.AutomationEventBus=void 0,v.waitOnEventOrTimeout=function A({target:E,name:n,delay:t=0}){return new Promise(function(d,f){if("object"!=typeof E||!n||"string"!=typeof n||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function l(x){E instanceof w?E._off(n,b):E.removeEventListener(n,b),h&&clearTimeout(h),d(x)}const b=l.bind(null,L.EVENT);E instanceof w?E._on(n,b):E.addEventListener(n,b);const m=l.bind(null,L.TIMEOUT),h=setTimeout(m,t)})};const L={EVENT:"event",TIMEOUT:"timeout"};v.WaitOnType=L;class w{constructor(){this._listeners=Object.create(null)}on(n,t,d=null){this._on(n,t,{external:!0,once:d?.once})}off(n,t,d=null){this._off(n,t,{external:!0,once:d?.once})}dispatch(n,t){const d=this._listeners[n];if(!d||0===d.length)return;let f;for(const{listener:l,external:b,once:m}of d.slice(0))m&&this._off(n,l),b?(f||=[]).push(l):l(t);if(f){for(const l of f)l(t);f=null}}_on(n,t,d=null){(this._listeners[n]||=[]).push({listener:t,external:!0===d?.external,once:!0===d?.once})}_off(n,t,d=null){const f=this._listeners[n];if(f)for(let l=0,b=f.length;l<b;l++)if(f[l].listener===t)return void f.splice(l,1)}}v.EventBus=w,v.AutomationEventBus=class k extends w{dispatch(n,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.GenericL10n=void 0,L(19);var A=L(4);const w=document.webL10n;v.GenericL10n=class k{constructor(n){this._lang=n,this._ready=new Promise((t,d)=>{w.setLanguage((0,A.fixupLangCode)(n),()=>{t(w)})})}getLanguage(){var n=this;return _(function*(){return(yield n._ready).getLanguage()})()}getDirection(){var n=this;return _(function*(){return(yield n._ready).getDirection()})()}get(n,t=null,d=(0,A.getL10nFallback)(n,t)){var f=this;return _(function*(){return(yield f._ready).get(n,t,d)})()}translate(n){var t=this;return _(function*(){return(yield t._ready).translate(n)})()}}},()=>{document.webL10n=function(W,v,L){var A={},w="",k="textContent",E="",n={},t="loading",d=!0;function h(a,e,s){e=e||function(u){},s=s||function(){};var r=new XMLHttpRequest;r.open("GET",a,d),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=utf-8"),r.onreadystatechange=function(){4==r.readyState&&(200==r.status||0===r.status?e(r.responseText):s())},r.onerror=s,r.ontimeout=s;try{r.send(null)}catch{s()}}function R(a,e){a&&(a=a.toLowerCase()),e=e||function(){},function V(){A={},w="",E=""}(),E=a;var s=function f(){return v.querySelectorAll('link[type="application/l10n"]')}(),r=s.length;if(0!==r){var O,G=0;O=function(){++G>=r&&(e(),t="complete")};for(var Y=0;Y<r;Y++)new j(s[Y]).load(a,O)}else{var g=function l(){var a=v.querySelector('script[type="application/l10n"]');return a?JSON.parse(a.innerHTML):null}();if(g&&g.locales&&g.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(A=g.locales[a])){var u=g.default_locale.toLowerCase();for(var c in g.locales){if((c=c.toLowerCase())===a){A=g.locales[a];break}c===u&&(A=g.locales[u])}}e()}else console.log("no resource to load, early way out");t="complete"}function j(se){var re=se.href;this.load=function(fe,pe){!function x(a,e,s,r){var g=a.replace(/[^\/]*$/,"")||"./";function u(O){return O.lastIndexOf("\\")<0?O:O.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}h(a,function(O){w+=O,function c(O,G){var j={},Y=/^\s*|\s*$/,$=/^\s*#|^\s*$/,se=/^\s*\[(.*)\]\s*$/,re=/^\s*@import\s+url\((.*)\)\s*$/i,fe=/^([^=\s]*)\s*=\s*(.+)$/;function pe(P,T,ee){var ne=P.replace(Y,"").split(/[\r\n]+/),Z="*",q=e.split("-",1)[0],te=!1,ae="";!function le(){for(;;){if(!ne.length)return void ee();var ge=ne.shift();if(!$.test(ge)){if(T){if(ae=se.exec(ge)){Z=ae[1].toLowerCase(),te="*"!==Z&&Z!==e&&Z!==q;continue}if(te)continue;if(ae=re.exec(ge))return void ce(g+ae[1],le)}var _e=ge.match(fe);_e&&3==_e.length&&(j[_e[1]]=u(_e[2]))}}}()}function ce(P,T){h(P,function(ee){pe(ee,!1,T)},function(){console.warn(P+" not found."),T()})}pe(O,!0,function(){G(j)})}(O,function(G){for(var j in G){var Y,$,se=j.lastIndexOf(".");se>0?(Y=j.substring(0,se),$=j.substring(se+1)):(Y=j,$=k),A[Y]||(A[Y]={}),A[Y][$]=G[j]}s&&s()})},r)}(re,fe,pe,function(){console.warn(re+" not found."),console.warn('"'+fe+'" resource not found'),E="",pe()})}}}function J(a,e,s){var r=A[a];if(!r){if(console.warn("#"+a+" is undefined."),!s)return null;r=s}var g={};for(var u in r){var c=r[u];c=oe(c=X(c,e,a,u),e,a),g[u]=c}return g}function X(a,e,s,r){var u=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(a);if(!u||!u.length)return a;var G,c=u[1],O=u[2];return e&&O in e?G=e[O]:O in A&&(G=A[O]),c in n&&(a=(0,n[c])(a,G,s,r)),a}function oe(a,e,s){return a.replace(/\{\{\s*(.+?)\s*\}\}/g,function(g,u){return e&&u in e?e[u]:u in A?A[u]:(console.log("argument {{"+u+"}} for #"+s+" is undefined."),g)})}function de(a){var e=function m(a){if(!a)return{};var e=a.getAttribute("data-l10n-id"),s=a.getAttribute("data-l10n-args"),r={};if(s)try{r=JSON.parse(s)}catch{console.warn("could not parse arguments for #"+e)}return{id:e,args:r}}(a);if(e.id){var s=J(e.id,e.args);if(!s)return void console.warn("#"+e.id+" is undefined.");if(s[k]){if(0===function he(a){if(a.children)return a.children.length;if(typeof a.childElementCount<"u")return a.childElementCount;for(var e=0,s=0;s<a.childNodes.length;s++)e+=1===a.nodeType?1:0;return e}(a))a[k]=s[k];else{for(var r=a.childNodes,g=!1,u=0,c=r.length;u<c;u++)3===r[u].nodeType&&/\S/.test(r[u].nodeValue)&&(g?r[u].nodeValue="":(r[u].nodeValue=s[k],g=!0));if(!g){var O=v.createTextNode(s[k]);a.insertBefore(O,a.firstChild)}}delete s[k]}for(var G in s)a[G]=s[G]}}return n.plural=function(a,e,s,r){var g=parseFloat(e);if(isNaN(g)||r!=k)return a;n._pluralRules||(n._pluralRules=function z(a){function s(c,O){return-1!==O.indexOf(c)}function r(c,O,G){return O<=c&&c<=G}var g={0:function(c){return"other"},1:function(c){return r(c%100,3,10)?"few":0===c?"zero":r(c%100,11,99)?"many":2==c?"two":1==c?"one":"other"},2:function(c){return 0!==c&&c%10==0?"many":2==c?"two":1==c?"one":"other"},3:function(c){return 1==c?"one":"other"},4:function(c){return r(c,0,1)?"one":"other"},5:function(c){return r(c,0,2)&&2!=c?"one":"other"},6:function(c){return 0===c?"zero":c%10==1&&c%100!=11?"one":"other"},7:function(c){return 2==c?"two":1==c?"one":"other"},8:function(c){return r(c,3,6)?"few":r(c,7,10)?"many":2==c?"two":1==c?"one":"other"},9:function(c){return 0===c||1!=c&&r(c%100,1,19)?"few":1==c?"one":"other"},10:function(c){return r(c%10,2,9)&&!r(c%100,11,19)?"few":c%10!=1||r(c%100,11,19)?"other":"one"},11:function(c){return r(c%10,2,4)&&!r(c%100,12,14)?"few":c%10==0||r(c%10,5,9)||r(c%100,11,14)?"many":c%10==1&&c%100!=11?"one":"other"},12:function(c){return r(c,2,4)?"few":1==c?"one":"other"},13:function(c){return r(c%10,2,4)&&!r(c%100,12,14)?"few":1!=c&&r(c%10,0,1)||r(c%10,5,9)||r(c%100,12,14)?"many":1==c?"one":"other"},14:function(c){return r(c%100,3,4)?"few":c%100==2?"two":c%100==1?"one":"other"},15:function(c){return 0===c||r(c%100,2,10)?"few":r(c%100,11,19)?"many":1==c?"one":"other"},16:function(c){return c%10==1&&11!=c?"one":"other"},17:function(c){return 3==c?"few":0===c?"zero":6==c?"many":2==c?"two":1==c?"one":"other"},18:function(c){return 0===c?"zero":r(c,0,2)&&0!==c&&2!=c?"one":"other"},19:function(c){return r(c,2,10)?"few":r(c,0,1)?"one":"other"},20:function(c){return!r(c%10,3,4)&&c%10!=9||r(c%100,10,19)||r(c%100,70,79)||r(c%100,90,99)?c%1e6==0&&0!==c?"many":c%10!=2||s(c%100,[12,72,92])?c%10!=1||s(c%100,[11,71,91])?"other":"one":"two":"few"},21:function(c){return 0===c?"zero":1==c?"one":"other"},22:function(c){return r(c,0,1)||r(c,11,99)?"one":"other"},23:function(c){return r(c%10,1,2)||c%20==0?"one":"other"},24:function(c){return r(c,3,10)||r(c,13,19)?"few":s(c,[2,12])?"two":s(c,[1,11])?"one":"other"}},u={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[a.replace(/-.*$/,"")];return u in g?g[u]:(console.warn("plural form unknown for ["+a+"]"),function(){return"other"})}(E));var u="["+n._pluralRules(g)+"]";return 0===g&&s+"[zero]"in A?a=A[s+"[zero]"][r]:1==g&&s+"[one]"in A?a=A[s+"[one]"][r]:2==g&&s+"[two]"in A?a=A[s+"[two]"][r]:s+u in A?a=A[s+u][r]:s+"[other]"in A&&(a=A[s+"[other]"][r]),a},{get:function(a,e,s){var u,r=a.lastIndexOf("."),g=k;r>0&&(g=a.substring(r+1),a=a.substring(0,r)),s&&((u={})[g]=s);var c=J(a,e,u);return c&&g in c?c[g]:"{{"+a+"}}"},getData:function(){return A},getText:function(){return w},getLanguage:function(){return E},setLanguage:function(a,e){R(a,function(){e&&e()})},getDirection:function(){var e=E.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function B(a){for(var e=function b(a){return a?a.querySelectorAll("*[data-l10n-id]"):[]}(a=a||v.documentElement),s=e.length,r=0;r<s;r++)de(e[r]);de(a)},getReadyState:function(){return t},ready:function(a){a&&("complete"==t||"interactive"==t?W.setTimeout(function(){a()}):v.addEventListener&&v.addEventListener("localized",function e(){v.removeEventListener("localized",e),a()}))}}}(window,document)},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFFindController=v.FindState=void 0;var A=L(6),w=L(3),k=L(21);const E={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};v.FindState=E;const f={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},l=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),b=[...l.values()].map(P=>String.fromCharCode(P)).join(""),m=new RegExp("\\p{M}+","gu"),h=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),x=new RegExp("([^\\p{M}])\\p{M}*$","u"),R=new RegExp("^\\p{M}*([^\\p{M}])","u");let V=null;function z(P){if(!V){const _e=Object.keys(f).join("");V=new RegExp(`([${_e}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const T=[];let ee;for(;null!==(ee=m.exec(P));)T.push([ee[0].length,ee.index]);let ne=P.normalize("NFD");const Z=[[0,0]];let q=0,te=0,ae=0,le=0,ge=!1;return ne=ne.replace(V,(_e,Ae,ye,ie,H,K)=>{if(K-=ae,Ae){const ue=f[_e],me=ue.length;for(let ve=1;ve<me;ve++)Z.push([K-te+ve,te-ve]);return te-=me-1,ue}if(ye){const ue=ye.endsWith("\n"),me=ue?ye.length-2:ye.length;ge=!0;let ve=me;K+le===T[q]?.[1]&&(ve-=T[q][0],++q);for(let be=1;be<ve+1;be++)Z.push([K-1-te+be,te-be]);return te-=ve,ae+=ve,ue?(Z.push([(K+=me-1)-te+1,1+te]),te+=1,ae+=1,le+=1,ye.slice(0,me)):ye}return ie?(Z.push([K-te+1,1+te]),te+=1,ae+=1,le+=1,ie.charAt(0)):(Z.push([K-te+1,te-1]),te-=1,ae+=1,le+=1," ")}),Z.push([ne.length,te]),[ne,Z,ge]}function J(P,T,ee){if(!P)return[T,ee];const ne=T,Z=T+ee;let q=(0,A.binarySearchFirstItem)(P,ae=>ae[0]>=ne);P[q][0]>ne&&--q;let te=(0,A.binarySearchFirstItem)(P,ae=>ae[0]>=Z,q);return P[te][0]>Z&&--te,[ne+P[q][1],ee+P[te][1]-P[q][1]]}var X=new WeakSet;function de(P){if(!P)return;const T=this._pdfDocument,{type:ee}=P;(null===this._state||D(X,this,a).call(this,P))&&(this._dirtyMatch=!0),this._state=P,"highlightallchange"!==ee&&D(X,this,ce).call(this,E.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||T&&this._pdfDocument!==T)return;D(X,this,u).call(this);const ne=!this._highlightMatches,Z=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ee?this._dirtyMatch?D(X,this,G).call(this):"again"===ee?(D(X,this,G).call(this),ne&&this._state.highlightAll&&D(X,this,O).call(this)):"highlightallchange"===ee?(Z?D(X,this,G).call(this):this._highlightMatches=!0,D(X,this,O).call(this)):D(X,this,G).call(this):this._findTimeout=setTimeout(()=>{D(X,this,G).call(this),this._findTimeout=null},250)})}function he(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,w.createPromiseCapability)()}function B(P){return P._state.query!==P._rawQuery&&(P._rawQuery=P._state.query,[P._normalizedQuery]=z(P._state.query)),P._normalizedQuery}function a(P){if(P.query!==this._state.query)return!0;switch(P.type){case"again":const T=this._selected.pageIdx+1,ee=this._linkService;return T>=1&&T<=ee.pagesCount&&T!==ee.page&&!ee.isPageVisible(T);case"highlightallchange":return!1}return!0}function e(P,T,ee){let ne=P.slice(0,T).match(x);if(ne){const Z=P.charCodeAt(T),q=ne[1].charCodeAt(0);if((0,k.getCharacterType)(Z)===(0,k.getCharacterType)(q))return!1}if(ne=P.slice(T+ee).match(R),ne){const Z=P.charCodeAt(T+ee-1),q=ne[1].charCodeAt(0);if((0,k.getCharacterType)(Z)===(0,k.getCharacterType)(q))return!1}return!0}function s(P,T,ee,ne){const Z=[],q=[],te=this._pageDiffs[ee];let ae;for(;null!==(ae=P.exec(ne));){if(T&&!D(X,this,e).call(this,ne,ae.index,ae[0].length))continue;const[le,ge]=J(te,ae.index,ae[0].length);ge&&(Z.push(le),q.push(ge))}this._pageMatches[ee]=Z,this._pageMatchesLength[ee]=q}function r(P,T){const{matchDiacritics:ee}=this._state;let ne=!1;return(P=P.replace(h,(q,te,ae,le,ge,_e)=>te?`[ ]*\\${te}[ ]*`:ae?`[ ]*${ae}[ ]*`:le?"[ ]+":ee?ge||_e:ge?l.has(ge.charCodeAt(0))?ge:"":T?(ne=!0,`${_e}\\p{M}*`):_e)).endsWith("[ ]*")&&(P=P.slice(0,P.length-4)),ee&&T&&(ne=!0,P=`${P}(?=[${b}]|[^\\p{M}]|$)`),[ne,P]}function g(P){let T=i(X,this,B);if(0===T.length)return;const{caseSensitive:ee,entireWord:ne,phraseSearch:Z}=this._state,q=this._pageContents[P],te=this._hasDiacritics[P];let ae=!1;if(Z)[ae,T]=D(X,this,r).call(this,T,te);else{const _e=T.match(/\S+/g);_e&&(T=_e.sort().reverse().map(Ae=>{const[ye,ie]=D(X,this,r).call(this,Ae,te);return ae||=ye,`(${ie})`}).join("|"))}T=new RegExp(T,`g${ae?"u":""}${ee?"":"i"}`),D(X,this,s).call(this,T,ne,P,q),this._state.highlightAll&&D(X,this,c).call(this,P),this._resumePageIdx===P&&(this._resumePageIdx=null,D(X,this,Y).call(this));const ge=this._pageMatches[P].length;ge>0&&(this._matchesCountTotal+=ge,D(X,this,pe).call(this))}function u(){if(this._extractTextPromises.length>0)return;let P=Promise.resolve();for(let T=0,ee=this._linkService.pagesCount;T<ee;T++){const ne=(0,w.createPromiseCapability)();this._extractTextPromises[T]=ne.promise,P=P.then(()=>this._pdfDocument.getPage(T+1).then(Z=>Z.getTextContent()).then(Z=>{const q=[];for(const te of Z.items)q.push(te.str),te.hasEOL&&q.push("\n");[this._pageContents[T],this._pageDiffs[T],this._hasDiacritics[T]]=z(q.join("")),ne.resolve()},Z=>{console.error(`Unable to get text content for page ${T+1}`,Z),this._pageContents[T]="",this._pageDiffs[T]=null,this._hasDiacritics[T]=!1,ne.resolve()}))}}function c(P){this._scrollMatches&&this._selected.pageIdx===P&&(this._linkService.page=P+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:P})}function O(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function G(){const P=this._state.findPrevious,T=this._linkService.page-1,ee=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=T,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,D(X,this,O).call(this);for(let Z=0;Z<ee;Z++)this._pendingFindMatches.has(Z)||(this._pendingFindMatches.add(Z),this._extractTextPromises[Z].then(()=>{this._pendingFindMatches.delete(Z),D(X,this,g).call(this,Z)}))}if(""===i(X,this,B))return void D(X,this,ce).call(this,E.FOUND);if(this._resumePageIdx)return;const ne=this._offset;if(this._pagesToSearch=ee,null!==ne.matchIdx){if(!P&&ne.matchIdx+1<this._pageMatches[ne.pageIdx].length||P&&ne.matchIdx>0)return ne.matchIdx=P?ne.matchIdx-1:ne.matchIdx+1,void D(X,this,se).call(this,!0);D(X,this,$).call(this,P)}D(X,this,Y).call(this)}function j(P){const T=this._offset,ee=P.length,ne=this._state.findPrevious;return ee?(T.matchIdx=ne?ee-1:0,D(X,this,se).call(this,!0),!0):(D(X,this,$).call(this,ne),!!(T.wrapped&&(T.matchIdx=null,this._pagesToSearch<0))&&(D(X,this,se).call(this,!1),!0))}function Y(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let P=null;do{const T=this._offset.pageIdx;if(P=this._pageMatches[T],!P){this._resumePageIdx=T;break}}while(!D(X,this,j).call(this,P))}function $(P){const T=this._offset,ee=this._linkService.pagesCount;T.pageIdx=P?T.pageIdx-1:T.pageIdx+1,T.matchIdx=null,this._pagesToSearch--,(T.pageIdx>=ee||T.pageIdx<0)&&(T.pageIdx=P?ee-1:0,T.wrapped=!0)}function se(P=!1){let T=E.NOT_FOUND;const ee=this._offset.wrapped;if(this._offset.wrapped=!1,P){const ne=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,T=ee?E.WRAPPED:E.FOUND,-1!==ne&&ne!==this._selected.pageIdx&&D(X,this,c).call(this,ne)}D(X,this,ce).call(this,T,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,D(X,this,c).call(this,this._selected.pageIdx))}function re(P){const T=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||T&&this._pdfDocument!==T||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),D(X,this,ce).call(this,E.FOUND),this._highlightMatches=!1,D(X,this,O).call(this))})}function fe(){const{pageIdx:P,matchIdx:T}=this._selected;let ee=0,ne=this._matchesCountTotal;if(-1!==T){for(let Z=0;Z<P;Z++)ee+=this._pageMatches[Z]?.length||0;ee+=T+1}return(ee<1||ee>ne)&&(ee=ne=0),{current:ee,total:ne}}function pe(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:D(X,this,fe).call(this)})}function ce(P,T=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:P,previous:T,matchesCount:D(X,this,fe).call(this),rawQuery:this._state?.query??null})}v.PDFFindController=class oe{constructor({linkService:T,eventBus:ee}){M(this,X),this._linkService=T,this._eventBus=ee,D(X,this,he).call(this),ee._on("find",D(X,this,de).bind(this)),ee._on("findbarclose",D(X,this,re).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(T){this._pdfDocument&&D(X,this,he).call(this),T&&(this._pdfDocument=T,this._firstPageCapability.resolve())}scrollMatchIntoView({element:T=null,selectedLeft:ee=0,pageIndex:ne=-1,matchIndex:Z=-1}){this._scrollMatches&&T&&-1!==Z&&Z===this._selected.matchIdx&&-1!==ne&&ne===this._selected.pageIdx&&(this._scrollMatches=!1,(0,A.scrollIntoView)(T,{top:-50,left:ee+-400},!0))}}},(W,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.CharacterType=void 0,v.getCharacterType=function m(h){return function A(h){return h<11904}(h)?function w(h){return!(65408&h)}(h)?function n(h){return 32===h||9===h||13===h||10===h}(h)?L.SPACE:function k(h){return h>=97&&h<=122||h>=65&&h<=90}(h)||function E(h){return h>=48&&h<=57}(h)||95===h?L.ALPHA_LETTER:L.PUNCT:function b(h){return 3584==(65408&h)}(h)?L.THAI_LETTER:160===h?L.SPACE:L.ALPHA_LETTER:function t(h){return h>=13312&&h<=40959||h>=63744&&h<=64255}(h)?L.HAN_LETTER:function d(h){return h>=12448&&h<=12543}(h)?L.KATAKANA_LETTER:function f(h){return h>=12352&&h<=12447}(h)?L.HIRAGANA_LETTER:function l(h){return h>=65376&&h<=65439}(h)?L.HALFWIDTH_KATAKANA_LETTER:L.ALPHA_LETTER};const L={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};v.CharacterType=L},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFHistory=void 0,v.isDestArraysEqual=l,v.isDestHashesEqual=f;var A=L(6),w=L(17);function t(){return document.location.hash}function f(b,m){return"string"==typeof b&&"string"==typeof m&&(b===m||(0,A.parseQueryString)(b).get("nameddest")===m)}function l(b,m){function h(x,R){if(typeof x!=typeof R||Array.isArray(x)||Array.isArray(R))return!1;if(null!==x&&"object"==typeof x&&null!==R){if(Object.keys(x).length!==Object.keys(R).length)return!1;for(const V in x)if(!h(x[V],R[V]))return!1;return!0}return x===R||Number.isNaN(x)&&Number.isNaN(R)}if(!Array.isArray(b)||!Array.isArray(m)||b.length!==m.length)return!1;for(let x=0,R=b.length;x<R;x++)if(!h(b[x],m[x]))return!1;return!0}v.PDFHistory=class d{constructor({linkService:m,eventBus:h}){this.linkService=m,this.eventBus=h,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",x=>{this._isPagesLoaded=!!x.pagesCount},{once:!0})})}initialize({fingerprint:m,resetHistory:h=!1,updateUrl:x=!1}){if(!m||"string"!=typeof m)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const R=""!==this._fingerprint&&this._fingerprint!==m;this._fingerprint=m,this._updateUrl=!0===x,this._initialized=!0,this._bindEvents();const V=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=t(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(V,!0)||h){const{hash:J,page:X,rotation:oe}=this._parseCurrentHash(!0);return!J||R||h?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:J,page:X,rotation:oe},!0)}const z=V.destination;this._updateInternalState(z,V.uid,!0),void 0!==z.rotation&&(this._initialRotation=z.rotation),z.dest?(this._initialBookmark=JSON.stringify(z.dest),this._destination.page=null):z.hash?this._initialBookmark=z.hash:z.page&&(this._initialBookmark=`page=${z.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:m=null,explicitDest:h,pageNumber:x}){if(!this._initialized)return;if(m&&"string"!=typeof m)return void console.error(`PDFHistory.push: "${m}" is not a valid namedDest parameter.`);if(!Array.isArray(h))return void console.error(`PDFHistory.push: "${h}" is not a valid explicitDest parameter.`);if(!this._isValidPage(x)&&(null!==x||this._destination))return void console.error(`PDFHistory.push: "${x}" is not a valid pageNumber parameter.`);const R=m||JSON.stringify(h);if(!R)return;let V=!1;if(this._destination&&(f(this._destination.hash,R)||l(this._destination.dest,h))){if(this._destination.page)return;V=!0}this._popStateInProgress&&!V||(this._pushOrReplaceState({dest:h,hash:R,page:x,rotation:this.linkService.rotation},V),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(m){if(this._initialized){if(!this._isValidPage(m))return void console.error(`PDFHistory.pushPage: "${m}" is not a valid page number.`);this._destination?.page!==m&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${m}`,page:m,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const m=window.history.state;this._isValidState(m)&&m.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const m=window.history.state;this._isValidState(m)&&m.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(m,h=!1){const x=h||!this._destination,R={fingerprint:this._fingerprint,uid:x?this._uid:this._uid+1,destination:m};let V;if(this._updateInternalState(m,R.uid),this._updateUrl&&m?.hash){const z=document.location.href.split("#")[0];z.startsWith("file://")||(V=`${z}#${m.hash}`)}x?window.history.replaceState(R,"",V):window.history.pushState(R,"",V)}_tryPushCurrentPosition(m=!1){if(!this._position)return;let h=this._position;if(m&&(h=Object.assign(Object.create(null),this._position),h.temporary=!0),!this._destination)return void this._pushOrReplaceState(h);if(this._destination.temporary)return void this._pushOrReplaceState(h,!0);if(this._destination.hash===h.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let x=!1;if(this._destination.page>=h.first&&this._destination.page<=h.page){if(void 0!==this._destination.dest||!this._destination.first)return;x=!0}this._pushOrReplaceState(h,x)}_isValidPage(m){return Number.isInteger(m)&&m>0&&m<=this.linkService.pagesCount}_isValidState(m,h=!1){if(!m)return!1;if(m.fingerprint!==this._fingerprint){if(!h)return!1;{if("string"!=typeof m.fingerprint||m.fingerprint.length!==this._fingerprint.length)return!1;const[x]=performance.getEntriesByType("navigation");if("reload"!==x?.type)return!1}}return!(!Number.isInteger(m.uid)||m.uid<0||null===m.destination||"object"!=typeof m.destination)}_updateInternalState(m,h,x=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),x&&m?.temporary&&delete m.temporary,this._destination=m,this._uid=h,this._maxUid=Math.max(this._maxUid,h),this._numPositionUpdates=0}_parseCurrentHash(m=!1){const h=unescape(t()).substring(1),x=(0,A.parseQueryString)(h),R=x.get("nameddest")||"";let V=0|x.get("page");return(!this._isValidPage(V)||m&&R.length>0)&&(V=null),{hash:h,page:V,rotation:this.linkService.rotation}}_updateViewarea({location:m}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:m.pdfOpenParams.substring(1),page:this.linkService.page,first:m.pageNumber,rotation:m.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:m}){const h=t(),x=this._currentHash!==h;if(this._currentHash=h,!m){this._uid++;const{hash:V,page:z,rotation:J}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:V,page:z,rotation:J},!0)}if(!this._isValidState(m))return;this._popStateInProgress=!0,x&&(this._blockHashChange++,(0,w.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const R=m.destination;this._updateInternalState(R,m.uid,!0),(0,A.isValidRotation)(R.rotation)&&(this.linkService.rotation=R.rotation),R.dest?this.linkService.goToDestination(R.dest):R.hash?this.linkService.setHash(R.hash):R.page&&(this.linkService.page=R.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.PDFScriptingManager=void 0;var A=L(6),w=L(3);v.PDFScriptingManager=class k{constructor({eventBus:n,sandboxBundleSrc:t=null,scriptingFactory:d=null,docPropertiesLookup:f=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=t,this._scriptingFactory=d,this._docPropertiesLookup=f,this._scriptingFactory||window.addEventListener("updatefromsandbox",l=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:l.detail})})}setViewer(n){this._pdfViewer=n}setDocument(n){var t=this;return _(function*(){if(t._pdfDocument&&(yield t._destroyScripting()),t._pdfDocument=n,!n)return;const[d,f,l]=yield Promise.all([n.getFieldObjects(),n.getCalculationOrderIds(),n.getJSActions()]);if(d||l){if(n===t._pdfDocument){try{t._scripting=t._createScripting()}catch(b){return console.error(`PDFScriptingManager.setDocument: "${b?.message}".`),void(yield t._destroyScripting())}t._internalEvents.set("updatefromsandbox",b=>{b?.source===window&&t._updateFromSandbox(b.detail)}),t._internalEvents.set("dispatcheventinsandbox",b=>{t._scripting?.dispatchEventInSandbox(b.detail)}),t._internalEvents.set("pagechanging",({pageNumber:b,previous:m})=>{b!==m&&(t._dispatchPageClose(m),t._dispatchPageOpen(b))}),t._internalEvents.set("pagerendered",({pageNumber:b})=>{t._pageOpenPending.has(b)&&b===t._pdfViewer.currentPageNumber&&t._dispatchPageOpen(b)}),t._internalEvents.set("pagesdestroy",function(){var b=_(function*(m){yield t._dispatchPageClose(t._pdfViewer.currentPageNumber),yield t._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),t._closeCapability?.resolve()});return function(m){return b.apply(this,arguments)}}()),t._domEvents.set("mousedown",b=>{t._mouseState.isDown=!0}),t._domEvents.set("mouseup",b=>{t._mouseState.isDown=!1});for(const[b,m]of t._internalEvents)t._eventBus._on(b,m);for(const[b,m]of t._domEvents)window.addEventListener(b,m,!0);try{const b=yield t._getDocProperties();if(n!==t._pdfDocument)return;yield t._scripting.createSandbox({objects:d,calculationOrder:f,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...b,actions:l}}),t._eventBus.dispatch("sandboxcreated",{source:t})}catch(b){return console.error(`PDFScriptingManager.setDocument: "${b?.message}".`),void(yield t._destroyScripting())}yield t._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield t._dispatchPageOpen(t._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{n===t._pdfDocument&&(t._ready=!0)})}}else yield t._destroyScripting()})()}dispatchWillSave(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,w.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,w.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,w.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,w.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(n){var t=this;return _(function*(){const d=t._pdfViewer.isInPresentationMode||t._pdfViewer.isChangingPresentationMode,{id:f,siblings:l,command:b,value:m}=n;if(!f){switch(b){case"clear":console.clear();break;case"error":console.error(m);break;case"layout":if(d)return;const x=(0,A.apiPageLayoutToViewerModes)(m);t._pdfViewer.spreadMode=x.spreadMode;break;case"page-num":t._pdfViewer.currentPageNumber=m+1;break;case"print":yield t._pdfViewer.pagesPromise,t._eventBus.dispatch("print",{source:t});break;case"println":console.log(m);break;case"zoom":if(d)return;t._pdfViewer.currentScaleValue=m;break;case"SaveAs":t._eventBus.dispatch("save",{source:t});break;case"FirstPage":t._pdfViewer.currentPageNumber=1;break;case"LastPage":t._pdfViewer.currentPageNumber=t._pdfViewer.pagesCount;break;case"NextPage":t._pdfViewer.nextPage();break;case"PrevPage":t._pdfViewer.previousPage();break;case"ZoomViewIn":if(d)return;t._pdfViewer.increaseScale();break;case"ZoomViewOut":if(d)return;t._pdfViewer.decreaseScale()}return}if(d&&n.focus)return;delete n.id,delete n.siblings;const h=l?[f,...l]:[f];for(const x of h){const R=document.getElementById(x);R?R.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:n})):t._pdfDocument?.annotationStorage.setValue(x,n)}})()}_dispatchPageOpen(n,t=!1){var d=this;return _(function*(){const f=d._pdfDocument,l=d._visitedPages;if(t&&(d._closeCapability=(0,w.createPromiseCapability)()),!d._closeCapability)return;const b=d._pdfViewer.getPageView(n-1);if(b?.renderingState!==A.RenderingStates.FINISHED)return void d._pageOpenPending.add(n);d._pageOpenPending.delete(n);const m=_(function*(){const h=yield l.has(n)?null:b.pdfPage?.getJSActions();f===d._pdfDocument&&(yield d._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:n,actions:h}))})();l.set(n,m)})()}_dispatchPageClose(n){var t=this;return _(function*(){const d=t._pdfDocument,f=t._visitedPages;if(!t._closeCapability||t._pageOpenPending.has(n))return;const l=f.get(n);l&&(f.set(n,null),yield l,d===t._pdfDocument&&(yield t._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:n})))})()}_getDocProperties(){var n=this;return _(function*(){if(n._docPropertiesLookup)return n._docPropertiesLookup(n._pdfDocument);const{docPropertiesLookup:t}=L(24);return t(n._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,w.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:n}=L(24);return new n(this._sandboxBundleSrc)}_destroyScripting(){var n=this;return _(function*(){if(!n._scripting)return n._pdfDocument=null,void n._destroyCapability?.resolve();n._closeCapability&&(yield Promise.race([n._closeCapability.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(t=>{}),n._closeCapability=null),n._pdfDocument=null;try{yield n._scripting.destroySandbox()}catch{}for(const[t,d]of n._internalEvents)n._eventBus._off(t,d);n._internalEvents.clear();for(const[t,d]of n._domEvents)window.removeEventListener(t,d,!0);n._domEvents.clear(),n._pageOpenPending.clear(),n._visitedPages.clear(),n._scripting=null,delete n._mouseState.isDown,n._ready=!1,n._destroyCapability?.resolve()})()}}},(W,v,L)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.GenericScripting=void 0,v.docPropertiesLookup=function w(n){return k.apply(this,arguments)};var A=L(3);function k(){return(k=_(function*(n){const d="".split("#")[0];let{info:f,metadata:l,contentDispositionFilename:b,contentLength:m}=yield n.getMetadata();if(!m){const{length:h}=yield n.getDownloadInfo();m=h}return{...f,baseURL:d,filesize:m,filename:b||(0,A.getPdfFilenameFromUrl)(""),metadata:l?.getRaw(),authors:l?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}v.GenericScripting=class E{constructor(t){this._ready=(0,A.loadScript)(t,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(t){var d=this;return _(function*(){(yield d._ready).create(t)})()}dispatchEventInSandbox(t){var d=this;return _(function*(){const f=yield d._ready;setTimeout(()=>f.dispatchEvent(t),0)})()}destroySandbox(){var t=this;return _(function*(){(yield t._ready).nukeSandbox()})()}}}],N={};function p(W){var v=N[W];if(void 0!==v)return v.exports;var L=N[W]={exports:{}};return F[W](L,L.exports,p),L.exports}var I={};return(()=>{var W=I;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return k.AnnotationLayerBuilder}}),Object.defineProperty(W,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return v.DefaultAnnotationLayerFactory}}),Object.defineProperty(W,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return v.DefaultStructTreeLayerFactory}}),Object.defineProperty(W,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return v.DefaultTextLayerFactory}}),Object.defineProperty(W,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return v.DefaultXfaLayerFactory}}),Object.defineProperty(W,"DownloadManager",{enumerable:!0,get:function(){return E.DownloadManager}}),Object.defineProperty(W,"EventBus",{enumerable:!0,get:function(){return n.EventBus}}),Object.defineProperty(W,"GenericL10n",{enumerable:!0,get:function(){return t.GenericL10n}}),Object.defineProperty(W,"LinkTarget",{enumerable:!0,get:function(){return L.LinkTarget}}),Object.defineProperty(W,"NullL10n",{enumerable:!0,get:function(){return d.NullL10n}}),Object.defineProperty(W,"PDFFindController",{enumerable:!0,get:function(){return f.PDFFindController}}),Object.defineProperty(W,"PDFHistory",{enumerable:!0,get:function(){return l.PDFHistory}}),Object.defineProperty(W,"PDFLinkService",{enumerable:!0,get:function(){return L.PDFLinkService}}),Object.defineProperty(W,"PDFPageView",{enumerable:!0,get:function(){return b.PDFPageView}}),Object.defineProperty(W,"PDFScriptingManager",{enumerable:!0,get:function(){return m.PDFScriptingManager}}),Object.defineProperty(W,"PDFSinglePageViewer",{enumerable:!0,get:function(){return w.PDFSinglePageViewer}}),Object.defineProperty(W,"PDFViewer",{enumerable:!0,get:function(){return w.PDFViewer}}),Object.defineProperty(W,"ProgressBar",{enumerable:!0,get:function(){return A.ProgressBar}}),Object.defineProperty(W,"SimpleLinkService",{enumerable:!0,get:function(){return L.SimpleLinkService}}),Object.defineProperty(W,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return h.StructTreeLayerBuilder}}),Object.defineProperty(W,"TextLayerBuilder",{enumerable:!0,get:function(){return x.TextLayerBuilder}}),Object.defineProperty(W,"XfaLayerBuilder",{enumerable:!0,get:function(){return R.XfaLayerBuilder}}),Object.defineProperty(W,"parseQueryString",{enumerable:!0,get:function(){return A.parseQueryString}});var v=p(1),L=p(5),A=p(6),w=p(10),k=p(2),E=p(16),n=p(17),t=p(18),d=p(4),f=p(20),l=p(22),b=p(12),m=p(23),h=p(7),x=p(8),R=p(9)})(),I})(),Q.exports=p()},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{},78737:Q=>{Q.exports=function o(C,i,y){if("function"==typeof C?C===i:C.has(i))return arguments.length<3?i:y;throw new TypeError("Private element is not present on this object")},Q.exports.__esModule=!0,Q.exports.default=Q.exports},48114:Q=>{Q.exports=function o(C,i){if(i.has(C))throw new TypeError("Cannot initialize the same private elements twice on an object")},Q.exports.__esModule=!0,Q.exports.default=Q.exports},64647:(Q,o,C)=>{var i=C(78737);Q.exports=function y(M,U){return M.get(i(M,U))},Q.exports.__esModule=!0,Q.exports.default=Q.exports},23076:(Q,o,C)=>{var i=C(48114);Q.exports=function y(M,U,D){i(M,U),U.set(M,D)},Q.exports.__esModule=!0,Q.exports.default=Q.exports},93051:(Q,o,C)=>{var i=C(78737);Q.exports=function y(M,U,D){return M.set(i(M,U),D),D},Q.exports.__esModule=!0,Q.exports.default=Q.exports},40546:(Q,o,C)=>{var i=C(78737);Q.exports=function y(M,U,D){return D(i(M,U))},Q.exports.__esModule=!0,Q.exports.default=Q.exports},56965:(Q,o,C)=>{var i=C(48114);Q.exports=function y(M,U){i(M,U),U.add(M)},Q.exports.__esModule=!0,Q.exports.default=Q.exports},21076:(Q,o,C)=>{var i=C(29867);Q.exports=function y(M,U,D){return(U=i(U))in M?Object.defineProperty(M,U,{value:D,enumerable:!0,configurable:!0,writable:!0}):M[U]=D,M},Q.exports.__esModule=!0,Q.exports.default=Q.exports},67862:(Q,o,C)=>{var i=C(16895).default;Q.exports=function y(M,U){if("object"!=i(M)||!M)return M;var D=M[Symbol.toPrimitive];if(void 0!==D){var S=D.call(M,U||"default");if("object"!=i(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===U?String:Number)(M)},Q.exports.__esModule=!0,Q.exports.default=Q.exports},29867:(Q,o,C)=>{var i=C(16895).default,y=C(67862);Q.exports=function M(U){var D=y(U,"string");return"symbol"==i(D)?D:D+""},Q.exports.__esModule=!0,Q.exports.default=Q.exports},16895:Q=>{function o(C){return Q.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q.exports.__esModule=!0,Q.exports.default=Q.exports,o(C)}Q.exports=o,Q.exports.__esModule=!0,Q.exports.default=Q.exports},13763:(Q,o,C)=>{"use strict";var i,y;C.d(o,{Lk:()=>n,c6:()=>E});var M=C(48891),U=C(909),D=C(18447),S=C(11787),_=C(5424),F=C(88627),N=C(41483),p=C(83876),I=C(94031);const W=["pdfViewerContainer"];function A(t,d,f){t[d]=f}function w(){return typeof window>"u"}w()||A(i||(i=C.t(p,2)),"verbosity",p.VerbosityLevel.INFOS);var k=function(t){return t[t.DISABLED=0]="DISABLED",t[t.ENABLED=1]="ENABLED",t[t.ENHANCED=2]="ENHANCED",t}(k||{});let E=(()=>{class t{constructor(f,l){if(this.element=f,this.ngZone=l,this.isVisible=!1,this._cMapsUrl=typeof(i||(i=C.t(p,2)))<"u"?`https://unpkg.com/pdfjs-dist@${p.version}/cmaps/`:null,this._imageResourcesPath=typeof(i||(i=C.t(p,2)))<"u"?`https://unpkg.com/pdfjs-dist@${p.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=k.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new D.B,this.afterLoadComplete=new M.bkB,this.pageRendered=new M.bkB,this.pageInitialized=new M.bkB,this.textLayerRendered=new M.bkB,this.onError=new M.bkB,this.onProgress=new M.bkB,this.pageChange=new M.bkB(!0),w())return;let b;const m=p.version;b=window[`pdfWorkerSrc${m}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${m}/legacy/build/pdf.worker.min.js`),A(p.GlobalWorkerOptions,"workerSrc",b)}set cMapsUrl(f){this._cMapsUrl=f}set page(f){const l=f=parseInt(f,10)||1;this._pdf&&(f=this.getValidPageNumber(f)),this._page=f,l!==f&&this.pageChange.emit(f)}set renderText(f){this._renderText=f}set renderTextMode(f){this._renderTextMode=f}set originalSize(f){this._originalSize=f}set showAll(f){this._showAll=f}set stickToPage(f){this._stickToPage=f}set zoom(f){f<=0||(this._zoom=f)}get zoom(){return this._zoom}set zoomScale(f){this._zoomScale=f}get zoomScale(){return this._zoomScale}set rotation(f){"number"==typeof f&&f%90==0?this._rotation=f:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(f){this._externalLinkTarget=f}set autoresize(f){this._canAutoResize=!!f}set fitToPage(f){this._fitToPage=!!f}set showBorders(f){this._showBorders=!!f}static getLinkTarget(f){switch(f){case"blank":return I.LinkTarget.BLANK;case"none":return I.LinkTarget.NONE;case"self":return I.LinkTarget.SELF;case"parent":return I.LinkTarget.PARENT;case"top":return I.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const f=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=f?!1===this.isVisible&&null!=f&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(f){if(!w()&&this.isVisible)if("src"in f)this.loadPDF();else if(this._pdf){if("renderText"in f?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:k.DISABLED,this.resetPdfDocument()):"showAll"in f&&(this.setupViewer(),this.resetPdfDocument()),"page"in f){const{page:l}=f;if(l.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,S.H)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,_.Q)(this.destroy$)).subscribe({next:f=>{const l=this._rotation+f.rotate,b=f.getViewport({scale:this._zoom,rotation:l}).width*t.CSS_UNITS;let m=this._zoom,h=!0;if(!this._originalSize||this._fitToPage&&b>this.pdfViewerContainer.nativeElement.clientWidth){const x=f.getViewport({scale:1,rotation:l});m=this.getScale(x.width,x.height),h=!this._stickToPage}this.pdfViewer._setScale(m,h)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const f=t.getLinkTarget(this._externalLinkTarget);return f?{externalLinkTarget:f}:{}}initEventBus(){this.eventBus=function v(t,d){const f=new t.EventBus;return function L(t,d){(0,U.R)(t,"documentload").pipe((0,_.Q)(d)).subscribe(()=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(f)}),(0,U.R)(t,"pagerendered").pipe((0,_.Q)(d)).subscribe(({pageNumber:f,cssTransform:l,source:b})=>{const m=document.createEvent("CustomEvent");m.initCustomEvent("pagerendered",!0,!0,{pageNumber:f,cssTransform:l}),b.div.dispatchEvent(m)}),(0,U.R)(t,"textlayerrendered").pipe((0,_.Q)(d)).subscribe(({pageNumber:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:f}),l.textLayerDiv.dispatchEvent(b)}),(0,U.R)(t,"pagechanging").pipe((0,_.Q)(d)).subscribe(({pageNumber:f,source:l})=>{const b=document.createEvent("UIEvents");b.initEvent("pagechanging",!0,!0),b.pageNumber=f,l.container.dispatchEvent(b)}),(0,U.R)(t,"pagesinit").pipe((0,_.Q)(d)).subscribe(({source:f})=>{const l=document.createEvent("CustomEvent");l.initCustomEvent("pagesinit",!0,!0,null),f.container.dispatchEvent(l)}),(0,U.R)(t,"pagesloaded").pipe((0,_.Q)(d)).subscribe(({pagesCount:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("pagesloaded",!0,!0,{pagesCount:f}),l.container.dispatchEvent(b)}),(0,U.R)(t,"scalechange").pipe((0,_.Q)(d)).subscribe(({scale:f,presetValue:l,source:b})=>{const m=document.createEvent("UIEvents");m.initEvent("scalechange",!0,!0),m.scale=f,m.presetValue=l,b.container.dispatchEvent(m)}),(0,U.R)(t,"updateviewarea").pipe((0,_.Q)(d)).subscribe(({location:f,source:l})=>{const b=document.createEvent("UIEvents");b.initEvent("updateviewarea",!0,!0),b.location=f,l.container.dispatchEvent(b)}),(0,U.R)(t,"find").pipe((0,_.Q)(d)).subscribe(({source:f,type:l,query:b,phraseSearch:m,caseSensitive:h,highlightAll:x,findPrevious:R})=>{if(f===window)return;const V=document.createEvent("CustomEvent");V.initCustomEvent("find"+l,!0,!0,{query:b,phraseSearch:m,caseSensitive:h,highlightAll:x,findPrevious:R}),window.dispatchEvent(V)}),(0,U.R)(t,"attachmentsloaded").pipe((0,_.Q)(d)).subscribe(({attachmentsCount:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:f}),l.container.dispatchEvent(b)}),(0,U.R)(t,"sidebarviewchanged").pipe((0,_.Q)(d)).subscribe(({view:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("sidebarviewchanged",!0,!0,{view:f}),l.outerContainer.dispatchEvent(b)}),(0,U.R)(t,"pagemode").pipe((0,_.Q)(d)).subscribe(({mode:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("pagemode",!0,!0,{mode:f}),l.pdfViewer.container.dispatchEvent(b)}),(0,U.R)(t,"namedaction").pipe((0,_.Q)(d)).subscribe(({action:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("namedaction",!0,!0,{action:f}),l.pdfViewer.container.dispatchEvent(b)}),(0,U.R)(t,"presentationmodechanged").pipe((0,_.Q)(d)).subscribe(({active:f,switchInProgress:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("presentationmodechanged",!0,!0,{active:f,switchInProgress:l}),window.dispatchEvent(b)}),(0,U.R)(t,"outlineloaded").pipe((0,_.Q)(d)).subscribe(({outlineCount:f,source:l})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("outlineloaded",!0,!0,{outlineCount:f}),l.container.dispatchEvent(b)})}(f,d),f}(y||(y=C.t(I,2)),this.destroy$),(0,U.R)(this.eventBus,"pagerendered").pipe((0,_.Q)(this.destroy$)).subscribe(f=>{this.pageRendered.emit(f)}),(0,U.R)(this.eventBus,"pagesinit").pipe((0,_.Q)(this.destroy$)).subscribe(f=>{this.pageInitialized.emit(f)}),(0,U.R)(this.eventBus,"pagechanging").pipe((0,_.Q)(this.destroy$)).subscribe(({pageNumber:f})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=f,this.pageChange.emit(f)},100)}),(0,U.R)(this.eventBus,"textlayerrendered").pipe((0,_.Q)(this.destroy$)).subscribe(f=>{this.textLayerRendered.emit(f)})}initPDFServices(){this.pdfLinkService=new I.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new I.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:k.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){A(i||(i=C.t(p,2)),"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new I.PDFViewer(this.getPDFOptions()):new I.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(f){return f<1?1:f>this._pdf.numPages?this._pdf.numPages:f}getDocumentParams(){const f=typeof this.src;if(!this._cMapsUrl)return this.src;const l={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===f?l.url=this.src:"object"===f&&(void 0!==this.src.byteLength?l.data=this.src:Object.assign(l,this.src)),l}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=p.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=l=>{this.onProgress.emit(l)};const f=this.src;(0,S.H)(this.loadingTask.promise).pipe((0,_.Q)(this.destroy$)).subscribe({next:l=>{this._pdf=l,this.lastLoaded=f,this.afterLoadComplete.emit(l),this.resetPdfDocument(),this.update()},error:l=>{this.lastLoaded=null,this.onError.emit(l)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(f,l){const b=this._showBorders?2*t.BORDER_WIDTH:0,m=this.pdfViewerContainer.nativeElement.clientWidth-b,h=this.pdfViewerContainer.nativeElement.clientHeight-b;if(0===h||0===l||0===m||0===f)return 1;let x=1;switch(this._zoomScale){case"page-fit":x=Math.min(h/l,m/f);break;case"page-height":x=h/l;break;default:x=m/f}return this._zoom*x/t.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){w()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){w()||this.ngZone.runOutsideAngular(()=>{(0,U.R)(window,"resize").pipe((0,F.B)(100),(0,N.p)(()=>this._canAutoResize&&!!this._pdf),(0,_.Q)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return t.CSS_UNITS=96/72,t.BORDER_WIDTH=9,t.\u0275fac=function(f){return new(f||t)(M.rXU(M.aKT),M.rXU(M.SKi))},t.\u0275cmp=M.VBU({type:t,selectors:[["pdf-viewer"]],viewQuery:function(f,l){if(1&f&&M.GBs(W,5),2&f){let b;M.mGM(b=M.lsd())&&(l.pdfViewerContainer=b.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[M.OA$],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(f,l){1&f&&(M.j41(0,"div",1,0),M.nrm(2,"div",2),M.k0s())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),t})(),n=(()=>{class t{}return t.\u0275fac=function(f){return new(f||t)},t.\u0275mod=M.$C({type:t}),t.\u0275inj=M.G2t({}),t})()}}]);