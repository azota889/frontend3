"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[352],{16971:(G,E,r)=>{r.r(E),r.d(E,{ProposalRoutingModule:()=>Zt});var v=r(65162),T=r(1133),x=r(62101),t=r(48891);let R=(()=>{var e;class i{}return(e=i).\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-master-page"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(s,n){1&s&&t.nrm(0,"router-outlet")},dependencies:[v.iI,v.n3],encapsulation:2}),i})();var c=r(54460),u=r(55887),k=r(25661),I=r(88023),j=r(74750),D=r(78088),a=r(17695),p=r(36015),m=r(15343),_=r(44155),g=r(75498),l=r(10936),f=r(39660),b=r(16581),C=r(44327),h=r(96639),P=r(86477),z=r(26018),O=r(15055),Y=r(5502),L=r(31702),B=r(97839),X=r(95670),M=r(17818),V=r(47712),K=r(87816);const J=()=>({"text-primary flex-none zoom-in":!0}),H=(e,i)=>({comment:e,index:i}),W=e=>({comment:e}),Q=()=>({"mr-2":!0}),Z=()=>({"mr-2 text-danger":!0}),q=()=>({"text-slate-500":!0});function tt(e,i){1&e&&t.nrm(0,"azt-loading-ui",14)}function et(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",5),t.nrm(1,"azt-create-avatar",6),t.j41(2,"div",7)(3,"mat-form-field",8)(4,"textarea",9),t.nI1(5,"mytranslate"),t.bIt("enterKey",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.addComment())}),t.k0s()(),t.j41(6,"div",10)(7,"button",11),t.nI1(8,"mytranslate"),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.addComment())}),t.DNE(9,tt,1,0,"azt-loading-ui",12),t.nrm(10,"lucide-icon",13),t.k0s()()()()}if(2&e){const o=t.XpG();t.R7$(),t.Y8G("nameCreateAvatar",o.currentUser.fullName)("linkAvatar",o.currentUser.avatar)("size",30),t.R7$(3),t.FS9("placeholder",t.bMT(5,9,"lang_core_viet_binh_luan")),t.Y8G("enableInMobile",!1)("formControl",o.newContent),t.R7$(3),t.FS9("matTooltip",t.bMT(8,11,"lang_business_news_add_new_post_button")),t.R7$(2),t.Y8G("ngIf",o.statusObj.loading),t.R7$(),t.Y8G("ngClass",t.lJ4(13,J))}}function ot(e,i){1&e&&t.eu8(0)}function nt(e,i){if(1&e&&(t.j41(0,"div",18),t.DNE(1,ot,1,0,"ng-container",19),t.k0s()),2&e){const o=t.XpG(),s=o.$implicit,n=o.index;t.XpG();const d=t.sdS(3);t.R7$(),t.Y8G("ngTemplateOutlet",d)("ngTemplateOutletContext",t.l_i(2,H,s,n))}}function at(e,i){1&e&&t.eu8(0)}function st(e,i){if(1&e&&(t.j41(0,"div",20),t.DNE(1,at,1,0,"ng-container",19),t.k0s()),2&e){const o=t.XpG().$implicit;t.XpG();const s=t.sdS(5);t.R7$(),t.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",t.eq3(2,W,o))}}function it(e,i){if(1&e&&(t.j41(0,"div",15),t.DNE(1,nt,2,5,"div",16)(2,st,2,4,"div",17),t.k0s()),2&e){const o=i.$implicit;t.R7$(),t.Y8G("ngIf",!o.isEdit),t.R7$(),t.Y8G("ngIf",o.isEdit)}}function rt(e,i){if(1&e&&(t.j41(0,"button",38),t.nrm(1,"lucide-icon",39),t.k0s()),2&e){t.XpG();const o=t.sdS(12);t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("ngClass",t.lJ4(2,q))}}function lt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",21),t.nrm(1,"azt-create-avatar",6),t.j41(2,"div",22)(3,"div",23)(4,"div",24)(5,"div",25),t.EFF(6),t.k0s(),t.j41(7,"div",26),t.nrm(8,"azt-see-more-multiple-lines",27),t.k0s()(),t.j41(9,"div",28),t.DNE(10,rt,2,3,"button",29),t.j41(11,"mat-menu",30,2)(13,"div",31)(14,"ul",32)(15,"li")(16,"a",33),t.bIt("click",function(){const n=t.eBV(o).comment,d=t.XpG();return t.Njj(d.showUpdateForm(n))}),t.nrm(17,"lucide-icon",34),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()(),t.j41(20,"li")(21,"a",35),t.bIt("click",function(){const n=t.eBV(o),d=n.comment,y=n.index,F=t.XpG();return t.Njj(F.confirmDeleteComment(d.id,y))}),t.nrm(22,"lucide-icon",36),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()()()()()(),t.j41(25,"div",37),t.EFF(26),t.nI1(27,"relativeTime"),t.k0s()()()}if(2&e){const o=i.comment,s=t.XpG();t.R7$(),t.Y8G("nameCreateAvatar",o.creatorFullName)("linkAvatar",o.creatorAvatar)("size",30),t.R7$(5),t.JRh(o.creatorFullName),t.R7$(2),t.Y8G("content",o.content)("maxLine",5)("backgroundColor","#f5f5f5"),t.R7$(2),t.Y8G("ngIf",o.userId===(null==s.currentUser?null:s.currentUser.id)),t.R7$(7),t.Y8G("ngClass",t.lJ4(19,Q)),t.R7$(),t.SpI(" ",t.bMT(19,13,"lang_auto_sua")," "),t.R7$(4),t.Y8G("ngClass",t.lJ4(20,Z)),t.R7$(),t.SpI(" ",t.bMT(24,15,"lang_auto_xoa")," "),t.R7$(3),t.JRh(t.bMT(27,17,o.createdAt))}}function pt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",40),t.nrm(1,"azt-create-avatar",6),t.j41(2,"div",22)(3,"div",23)(4,"div",24)(5,"div",25),t.EFF(6),t.k0s(),t.j41(7,"input",41),t.bIt("enterKey",function(){const n=t.eBV(o).comment,d=t.XpG();return t.Njj(d.updateComment(n))}),t.k0s(),t.j41(8,"div",42)(9,"button",43),t.bIt("click",function(){const n=t.eBV(o).comment;return t.Njj(n.isEdit=!1)}),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"button",44),t.bIt("click",function(){const n=t.eBV(o).comment,d=t.XpG();return t.Njj(d.updateComment(n))}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()()()()()}if(2&e){const o=i.comment,s=t.XpG();t.R7$(),t.Y8G("nameCreateAvatar",o.creatorFullName)("linkAvatar",o.creatorAvatar)("size",30),t.R7$(5),t.JRh(o.creatorFullName),t.R7$(),t.Y8G("enableInMobile",!1)("formControl",s.oldContent),t.R7$(3),t.SpI(" ",t.bMT(11,8,"lang_auto_huy")," "),t.R7$(3),t.SpI(" ",t.bMT(14,10,"lang_auto_cap_nhat")," ")}}let mt=(()=>{var e;class i extends I.H{constructor(){super(...arguments),this.reloadApi=new t.bkB,this.proposalsService=(0,t.WQX)(p.pr),this.dialogService=(0,t.WQX)(f.i),this.oldContent=new l.MJ("",{nonNullable:!0,validators:[l.k0.required,P.M.noWhiteSpace]}),this.newContent=new l.MJ("",{nonNullable:!0,validators:[l.k0.required,P.M.noWhiteSpace]}),this.loadingAdd=!1,this.loadingDelete=!1,this.loadingUpdate=!1}ngOnInit(){super.ngOnInit()}callApiDeleteComment(s,n){this.loadingDelete=!0,this.waitDestroy(this.proposalsService.apiProposalsDeleteCommentIdDelete(s).subscribe(d=>{if(this.loadingDelete=!1,!d.success)return this.showErrorSnack(d.message);this.commentList.splice(n,1),this.reloadApi.emit(),this.showSuccessSnack("lang_cms_delete_success")}))}confirmDeleteComment(s,n){const d=`<span class="font-medium text-base">${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_this_comment")}</span>`;this.dialogService.open(O.u,{data:{content:d,iconName:"trash-2"},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(F=>{F&&this.callApiDeleteComment(s,n)})}updateComment(s){if(this.oldContent.invalid)return this.oldContent.markAllAsTouched();this.loadingUpdate=!0,this.waitDestroy(this.proposalsService.apiProposalsUpdateCommentPut({commentId:s.id,content:this.oldContent.value}).subscribe(d=>{if(this.loadingUpdate=!1,!d.success)return this.showErrorSnack(d.message);s.content=this.oldContent.value,s.isEdit=!1,this.oldContent.setValue("")}))}addComment(){if(this.newContent.invalid)return this.newContent.markAllAsTouched();this.loadingAdd=!0,this.waitDestroy(this.proposalsService.apiProposalsAddCommentPost({proposalId:this.proposalId,content:this.newContent.value}).subscribe(n=>{if(this.loadingAdd=!1,!n.success)return this.showErrorSnack(n.message);this.newContent.setValue(""),this.reloadApi.emit()}))}showUpdateForm(s){this.commentList.forEach(n=>n.isEdit=!1),s.isEdit=!0,this.oldContent.setValue(s.content)}}return(e=i).\u0275fac=(()=>{let o;return function(n){return(o||(o=t.xGo(e)))(n||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-proposal-comment"]],inputs:{commentList:"commentList",currentUser:"currentUser",proposalId:"proposalId"},outputs:{reloadApi:"reloadApi"},standalone:!0,features:[t.Vt3,t.aNF],decls:6,vars:2,consts:[["commentView",""],["commentEdit",""],["menuBox",""],["class","flex add-comment",4,"ngIf"],["class","mt-4",4,"ngFor","ngForOf"],[1,"flex","add-comment"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"border","border-slate-200","dark:border-darkmode-400","relative","w-full","ml-3","rounded"],[1,"w-full","border-none"],["matInput","","autoResize","",3,"enterKey","enableInMobile","formControl","placeholder"],[1,"text-right","p-1","absolute",2,"bottom","5px","right","5px"],[1,"btn","btn-secondary","btn-sm","zoom-in",3,"click","matTooltip"],["class","mr-1",4,"ngIf"],["name","send","size","18",3,"ngClass"],[1,"mr-1"],[1,"mt-4"],["class","comment-view",4,"ngIf"],["class","comment-edit",4,"ngIf"],[1,"comment-view"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"comment-edit"],[1,"flex","show-hover"],[1,"ml-3"],[1,"flex","items-center","justify-start"],[1,"box","px-3","py-2","bg-slate-200","darkmode:bg-darkmode-400"],[1,"font-medium","whitespace-nowrap"],[1,"mt-1"],[3,"content","maxLine","backgroundColor"],[1,"hidden-not-hover","ml-1"],["class","cursor-pointer p-1 hover:bg-slate-100 dark:hover:bg-darkmode-400","style","border-radius: 50%",3,"matMenuTriggerFor",4,"ngIf"],["xPosition","after"],[1,"dropdown-menu","show","relative","w-28"],[1,"dropdown-content"],[1,"dropdown-item",3,"click"],["name","square-pen","size","16",3,"ngClass"],[1,"dropdown-item","text-danger",3,"click"],["name","trash-2","size","16",3,"ngClass"],[1,"text-slate-500","text-xs","whitespace-nowrap","mt-1"],[1,"cursor-pointer","p-1","hover:bg-slate-100","dark:hover:bg-darkmode-400",2,"border-radius","50%",3,"matMenuTriggerFor"],["name","ellipsis","size","20",3,"ngClass"],[1,"flex"],[1,"form-control","p-2","mt-2",2,"min-width","300px",3,"enterKey","enableInMobile","formControl"],[1,"mt-2","flex","items-center"],[1,"btn","btn-sm","p-1","btn-secondary","mr-2",3,"click"],[1,"btn","btn-sm","p-1","btn-primary",3,"click"]],template:function(s,n){1&s&&t.DNE(0,et,11,14,"div",3)(1,it,3,2,"div",4)(2,lt,28,21,"ng-template",null,0,t.C5r)(4,pt,15,12,"ng-template",null,1,t.C5r),2&s&&(t.Y8G("ngIf",n.currentUser),t.R7$(),t.Y8G("ngForOf",n.commentList))},dependencies:[b.Z,z.p,g.R,c.MD,c.YU,c.Sq,c.bT,c.T3,l.X1,l.me,l.BC,l.l_,v.iI,l.YN,h.wp,_.s,B.fg,X.rl,M.kk,M.Cp,V.oV,m.flO,m.WGl,u.L,h.NA,Y.Id,C.k,K.j,L.R],encapsulation:2}),i})();var S=r(88089),$=r(69223);function ct(e,i){1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_azt_please_enter_title")))}function dt(e,i){1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_cms_utils_folder_name_validate_255")))}function _t(e,i){if(1&e&&(t.j41(0,"div",7),t.DNE(1,ct,3,3,"span",8)(2,dt,3,3,"span",8),t.k0s()),2&e){const o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.form.controls.title.errors.maxlength),t.R7$(),t.Y8G("ngIf",o.form.controls.title.errors.maxlength)}}function ut(e,i){1&e&&(t.j41(0,"div",7)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_core_vui_long_nhap_noi_dung")))}let N=(()=>{var e;class i extends I.H{}return(e=i).\u0275fac=(()=>{let o;return function(n){return(o||(o=t.xGo(e)))(n||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-proposal-form"]],inputs:{form:"form"},standalone:!0,features:[t.Vt3,t.aNF],decls:11,vars:12,consts:[[1,"proposal-form"],[3,"formGroup"],[1,"setting-input"],["formControlName","title","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],[1,"mt-3"],["formControlName","content",3,"apiKey","init"],[1,"text-xs","text-danger","mt-2"],[4,"ngIf"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"form",1)(2,"div",2),t.nrm(3,"input",3),t.nI1(4,"mytranslate"),t.DNE(5,_t,3,2,"div",4),t.k0s(),t.j41(6,"div",5),t.nrm(7,"editor",6),t.nI1(8,"getTinyMceKey"),t.nI1(9,"getTinyMceConfig"),t.DNE(10,ut,4,3,"div",4),t.k0s()()()),2&s&&(t.R7$(),t.Y8G("formGroup",n.form),t.R7$(2),t.FS9("placeholder",t.bMT(4,6,"lang_azt_enter_title")+" ..."),t.R7$(2),t.Y8G("ngIf",n.form.controls.title.errors&&n.form.controls.title.touched),t.R7$(2),t.FS9("apiKey",t.bMT(8,8,"")),t.Y8G("init",t.bMT(9,10,"teacher")),t.R7$(3),t.Y8G("ngIf",n.form.controls.content.errors&&n.form.controls.content.touched))},dependencies:[h.Hw,h.yc,$.sv,$.xn,l.YN,l.qT,l.me,l.BC,l.cb,l.X1,l.j4,l.JD,u.L,h.wp,c.MD,c.bT],encapsulation:2}),i})();const gt=(e,i)=>({"thumbs-up-selected":e,"thumbs-up-non-selected":i}),A=()=>({"mr-2":!0}),ft=(e,i,o,s)=>({"bg-info":e,"bg-primary":i,"bg-danger":o,"bg-success":s}),ht=()=>({"text-slate-500":!0}),vt=e=>({width:e});function Ct(e,i){if(1&e&&(t.j41(0,"div",26)(1,"div",27)(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()()),2&e){const o=t.XpG();t.R7$(),t.Y8G("ngClass",t.ziG(4,ft,"ACCEPTED"===o.proposal.status,"DOING"===o.proposal.status,"REJECTED"===o.proposal.status,"DONE"===o.proposal.status)),t.R7$(2),t.JRh(t.bMT(4,2,"lang_azt_"+o.proposal.status.toLowerCase()))}}function bt(e,i){if(1&e&&(t.j41(0,"button",28),t.nrm(1,"lucide-icon",29),t.k0s()),2&e){t.XpG();const o=t.sdS(28);t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("ngClass",t.lJ4(2,ht))}}function It(e,i){if(1&e&&(t.j41(0,"div",32),t.nrm(1,"azt-see-more-multiple-lines",33),t.k0s()),2&e){const o=t.XpG(2);t.R7$(),t.Y8G("content",o.proposal.content)("maxLine",10)}}function Tt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",10)(1,"div",30),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.redirectTo.emit())}),t.EFF(2),t.k0s(),t.DNE(3,It,2,2,"div",31),t.k0s()}if(2&e){const o=t.XpG();t.R7$(2),t.JRh(o.proposal.title),t.R7$(),t.Y8G("ngIf",o.proposal.content)}}function xt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",10),t.nrm(1,"app-proposal-form",34),t.j41(2,"div",35)(3,"button",36),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.proposal.isEdit=!1)}),t.j41(4,"span"),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"button",37),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.updateProposal())}),t.j41(8,"span"),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()()()()}if(2&e){const o=t.XpG();t.R7$(),t.Y8G("form",o.form),t.R7$(4),t.JRh(t.bMT(6,3,"lang_button_close")),t.R7$(4),t.JRh(t.bMT(10,5,"lang_auto_cap_nhat"))}}function kt(e,i){if(1&e&&(t.j41(0,"div",38)(1,"div",39),t.EFF(2),t.k0s()()),2&e){const o=t.XpG();t.R7$(),t.Y8G("ngStyle",t.eq3(2,vt,o.proposal.progress+"%")),t.R7$(),t.SpI(" ",o.proposal.progress+"%"," ")}}function yt(e,i){if(1&e&&(t.j41(0,"div",40)(1,"a",41),t.nrm(2,"lucide-icon",42),t.j41(3,"span",43),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()()),2&e){const o=t.XpG();t.R7$(),t.Y8G("href",o.proposal.guidelineLink,t.B4B),t.R7$(3),t.JRh(t.bMT(5,2,"lang_azt_see_user_manual"))}}let w=(()=>{var e;class i extends I.H{constructor(){super(),this.backLink="",this.reloadApi=new t.bkB,this.redirectTo=new t.bkB,this.proposalsService=(0,t.WQX)(p.pr),this.dialogService=(0,t.WQX)(f.i),this.uploadImageOfHomeworkService=(0,t.WQX)(S.J),this.proposalLikeList=[],this.loadingLike=!1,this.loadingDelete=!1,this.loadingUpdate=!1,this.loadingGetLike=!1,this.form=new l.gE({title:new l.MJ("",{nonNullable:!0,validators:[l.k0.required,P.M.noWhiteSpace]}),content:new l.MJ("",{nonNullable:!0,validators:[l.k0.required]})})}callApiDeleteProposal(s){this.loadingDelete=!0,this.waitDestroy(this.proposalsService.apiProposalsDeleteProposalIdDelete(s).subscribe(n=>{if(this.loadingDelete=!1,!n.success)return this.showErrorSnack(n.message);this.backLink&&this.myNavigation(this.backLink),this.backLink||this.reloadApi.emit(),this.showSuccessSnack("lang_cms_delete_success")}))}confirmDeleteProposal(){const s=`<span class="font-medium text-base">${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_this_suggestion")}</span>`;this.dialogService.open(O.u,{data:{content:s,iconName:"trash-2"},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(d=>{d&&this.callApiDeleteProposal(this.proposal.id)})}updateProposal(){if(this.form.invalid)return this.form.markAllAsTouched();this.loadingUpdate=!0;const s=this.form.getRawValue();this.uploadImageOfHomeworkService.replaceImageInContent(s.content).subscribe(n=>{if(n.errorMessage)return this.showErrorSnack(n.errorMessage);this.waitDestroy(this.proposalsService.apiProposalsUpdateProposalIdPut(this.proposal.id,{title:s.title,content:n.content}).subscribe(y=>{if(this.loadingUpdate=!1,!y.success)return this.showErrorSnack(y.message);this.reloadApi.emit(),this.proposal.title=s.title,this.proposal.content=s.content,this.proposal.isEdit=!1,this.showSuccessSnack("lang_cms_update_success")}))})}toggleLikeProposal(){this.loadingLike=!0,this.waitDestroy(this.proposalsService.apiProposalsToggleLikePost({proposalId:this.proposal.id}).subscribe(s=>{if(this.loadingLike=!1,!s.success)return this.showErrorSnack(s.message);this.proposal.isLikedByCurrentUser=!this.proposal.isLikedByCurrentUser,this.proposal.isLikedByCurrentUser&&this.proposal.totalLikes++,this.proposal.isLikedByCurrentUser||this.proposal.totalLikes--}))}getLikeListProposal(){this.loadingGetLike=!0,this.waitDestroy(this.proposalsService.apiProposalsListLikesProposalIdGet(this.proposal.id).subscribe(s=>{if(this.loadingGetLike=!1,!s.success)return this.showErrorSnack(s.message);this.proposalLikeList=s.data?.objs??[]}))}showFormEdit(){this.proposal.isEdit=!0,this.form.patchValue({title:this.proposal.title,content:this.proposal.content})}}return(e=i).\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-proposal-item"]],inputs:{proposal:"proposal",backLink:"backLink",currentUser:"currentUser"},outputs:{reloadApi:"reloadApi",redirectTo:"redirectTo"},standalone:!0,features:[t.Vt3,t.aNF],decls:41,vars:29,consts:[["menuAction",""],[1,"proposal-item","relative"],[1,"flex","items-center"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3","pr-5"],[1,"font-medium","whitespace-nowrap"],[1,"text-slate-500","text-xs","whitespace-nowrap"],["class","ml-2",4,"ngIf"],["class","absolute cursor-pointer p-1 hover:bg-slate-100 dark:hover:bg-darkmode-400 top-0 right-0 rounded-md",3,"matMenuTriggerFor",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"flex","mr-5","items-center"],[1,"mr-2","zoom-in","thumbs-up-label",3,"click"],["name","thumbs-up","size","20",3,"ngClass"],[1,"flex","items-center","mr-5",3,"click"],[1,"mr-2","zoom-in","thumbs-up-label"],["name","message-square","size","20"],["class","border border-slate-300 rounded h-6 w-full","style","padding: 1px",4,"ngIf"],["class","flex justify-center mt-2",4,"ngIf"],["xPosition","after"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[1,"dropdown-item",3,"click"],["name","square-pen","size","16",3,"ngClass"],[1,"dropdown-item","text-danger",3,"click"],["name","trash-2","size","16",3,"ngClass"],[1,"ml-2"],[1,"p-1","rounded-full","text-xs","font-medium","inline-flex","items-center","text-white",3,"ngClass"],[1,"absolute","cursor-pointer","p-1","hover:bg-slate-100","dark:hover:bg-darkmode-400","top-0","right-0","rounded-md",3,"matMenuTriggerFor"],["name","ellipsis","size","20",3,"ngClass"],[1,"font-medium","cursor-pointer",3,"click"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[3,"content","maxLine"],[3,"form"],[1,"mt-4","text-right"],[1,"btn","btn-secondary","min-width-100","mr-3",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"border","border-slate-300","rounded","h-6","w-full",2,"padding","1px"],[1,"bg-primary","h-full","rounded","text-xs","text-white","flex","justify-center","items-center",3,"ngStyle"],[1,"flex","justify-center","mt-2"],["target","_blank",1,"btn","btn-transparent","btn-outline-primary","p-1","flex","items-center",3,"href"],["name","clipboard-list","size","16"],[1,"ml-1","font-medium"]],template:function(s,n){if(1&s){const d=t.RV6();t.j41(0,"div",1)(1,"div",2),t.nrm(2,"azt-create-avatar",3),t.j41(3,"div",4)(4,"a",5),t.EFF(5),t.k0s(),t.j41(6,"div",6),t.EFF(7),t.nI1(8,"relativeTime"),t.k0s()(),t.DNE(9,Ct,5,9,"div",7)(10,bt,2,3,"button",8),t.k0s(),t.DNE(11,Tt,4,2,"div",9)(12,xt,11,7,"div",9),t.j41(13,"div",10)(14,"div",2)(15,"div",11)(16,"button",12),t.bIt("click",function(){return t.eBV(d),t.Njj(n.toggleLikeProposal())}),t.nrm(17,"lucide-icon",13),t.k0s(),t.j41(18,"span"),t.EFF(19),t.k0s()(),t.j41(20,"div",14),t.bIt("click",function(){return t.eBV(d),t.Njj(n.redirectTo.emit())}),t.j41(21,"button",15),t.nrm(22,"lucide-icon",16),t.k0s(),t.j41(23,"span"),t.EFF(24),t.k0s()(),t.DNE(25,kt,3,4,"div",17),t.k0s()(),t.DNE(26,yt,6,4,"div",18),t.k0s(),t.j41(27,"mat-menu",19,0)(29,"div",20)(30,"ul",21)(31,"li")(32,"a",22),t.bIt("click",function(){return t.eBV(d),t.Njj(n.showFormEdit())}),t.nrm(33,"lucide-icon",23),t.EFF(34),t.nI1(35,"mytranslate"),t.k0s()(),t.j41(36,"li")(37,"a",24),t.bIt("click",function(){return t.eBV(d),t.Njj(n.confirmDeleteProposal())}),t.nrm(38,"lucide-icon",25),t.EFF(39),t.nI1(40,"mytranslate"),t.k0s()()()()()}2&s&&(t.R7$(2),t.Y8G("nameCreateAvatar",n.proposal.creatorFullName)("linkAvatar",n.proposal.creatorAvatar)("size",36),t.R7$(3),t.JRh(n.proposal.creatorFullName),t.R7$(2),t.JRh(t.bMT(8,18,n.proposal.createdAt)),t.R7$(2),t.Y8G("ngIf","PENDING"!==n.proposal.status),t.R7$(),t.Y8G("ngIf",n.proposal.createdBy===(null==n.currentUser?null:n.currentUser.id)&&"PENDING"===n.proposal.status),t.R7$(),t.Y8G("ngIf",!n.proposal.isEdit),t.R7$(),t.Y8G("ngIf",n.proposal.isEdit),t.R7$(5),t.Y8G("ngClass",t.l_i(24,gt,n.proposal.isLikedByCurrentUser,!n.proposal.isLikedByCurrentUser)),t.R7$(2),t.JRh(n.proposal.totalLikes),t.R7$(5),t.JRh(n.proposal.totalComments),t.R7$(),t.Y8G("ngIf",n.proposal.progress),t.R7$(),t.Y8G("ngIf",n.proposal.guidelineLink),t.R7$(7),t.Y8G("ngClass",t.lJ4(27,A)),t.R7$(),t.SpI(" ",t.bMT(35,20,"lang_auto_sua")," "),t.R7$(4),t.Y8G("ngClass",t.lJ4(28,A)),t.R7$(),t.SpI(" ",t.bMT(40,22,"lang_auto_xoa")," "))},dependencies:[z.p,u.L,h.wp,h.NA,L.R,m.flO,m.WGl,c.MD,c.YU,c.bT,c.B3,_.s,M.kk,M.Cp,N],encapsulation:2}),i})();const Rt=()=>({"mr-2":!0});function Et(e,i){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function jt(e,i){1&e&&t.nrm(0,"azt-loading-ui",15)}function Pt(e,i){if(1&e){const o=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){t.eBV(o);const n=t.XpG(3);return t.Njj(n.loadMoreComment())}),t.DNE(1,jt,1,0,"azt-loading-ui",13),t.EFF(2),t.nI1(3,"mytranslate"),t.nrm(4,"lucide-icon",14),t.k0s()}if(2&e){const o=t.XpG(3);t.R7$(),t.Y8G("ngIf",o.loadingCommentPage),t.R7$(),t.SpI(" ",t.bMT(3,3,"lang_auto_xem_them")," "),t.R7$(2),t.Y8G("ngClass",t.lJ4(5,Rt))}}function Dt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",6),t.nrm(1,"app-proposal-item",7)(2,"hr",8),t.j41(3,"app-proposal-comment",9),t.bIt("reloadApi",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.getCommentList(n.proposalId))}),t.k0s(),t.j41(4,"div",10),t.DNE(5,Pt,5,6,"button",11),t.k0s()()}if(2&e){const o=t.XpG(2);t.R7$(),t.Y8G("proposal",o.proposal)("currentUser",o.currentUser)("backLink",o.backLink),t.R7$(2),t.Y8G("commentList",o.commentList)("proposalId",o.proposal.id)("currentUser",o.currentUser),t.R7$(2),t.Y8G("ngIf",o.commentList.length>=o.pageObj.page*o.pageObj.pageSize)}}function Ft(e,i){if(1&e&&t.DNE(0,Dt,6,7,"div",5),2&e){const o=t.XpG();t.Y8G("ngIf",o.proposal&&o.currentUser)}}let Gt=(()=>{var e;class i extends I.H{constructor(){super(...arguments),this.proposalsService=(0,t.WQX)(p.pr),this.activatedRoute=(0,t.WQX)(v.nX),this.userService=(0,t.WQX)(k.R),this.pageObj=new D.d(24),this.proposalId=0,this.commentList=[],this.backLink="",this.loadingComment=!1,this.loadingCommentPage=!1}ngOnInit(){this.proposalId=Number(this.getMyParam(this.activatedRoute,"id")??0),this.backLink=this.getMyQueryParam("backto")??"/admin/proposal/list/0/1",this.currentUser=this.userService.getUserObj(),this.loadingComment=!0,this.getProposalDetail(this.proposalId),this.getCommentList(this.proposalId)}getProposalDetail(s){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.proposalsService.apiProposalsGetProposalByIdProposalIdGet(s)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.proposal=n.data,this.successStatusObj()}))}getCommentList(s){this.waitDestroy(this.proposalsService.apiProposalsListCommentsProposalIdGet(s).subscribe(n=>{this.commentList=n.data?.objs??[],this.proposal&&(this.proposal.totalComments=n.data?.total??0),this.loadingComment=!1,this.loadingCommentPage=!1}))}loadMoreComment(){this.pageObj.setPageNumber(this.pageObj.page+1),this.loadingCommentPage=!0,this.getCommentList(this.proposalId)}}return(e=i).\u0275fac=(()=>{let o;return function(n){return(o||(o=t.xGo(e)))(n||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-proposal-detail"]],standalone:!0,features:[t.Vt3,t.aNF],decls:5,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"proposal","mx-auto","mt-8",2,"max-width","1000px"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","box p-5",4,"ngIf"],[1,"box","p-5"],[3,"proposal","currentUser","backLink"],[1,"my-4"],[3,"reloadApi","commentList","proposalId","currentUser"],[1,"mt-3","mx-auto","w-full","text-center"],["class","btn btn-transparent mx-auto",3,"click",4,"ngIf"],[1,"btn","btn-transparent","mx-auto",3,"click"],["class","mr-1",4,"ngIf"],["name","chevron-down","size","20",3,"ngClass"],[1,"mr-1"]],template:function(s,n){if(1&s&&(t.j41(0,"teacher-layout",1)(1,"div",2),t.DNE(2,Et,1,1,"azt-loading-effect",3)(3,Ft,1,1,"ng-template",null,0,t.C5r),t.k0s()()),2&s){const d=t.sdS(4);t.Y8G("headerBackToLink",n.backLink),t.R7$(2),t.Y8G("ngIf",n.statusObj.loading)("ngIfElse",d)}},dependencies:[mt,w,j.Q,a.K,m.flO,m.WGl,c.MD,c.YU,c.bT,u.L,h.wp,_.s,g.R],encapsulation:2}),i})();var Mt=r(65098),zt=r(76627),Ot=r(59418),U=r(60303);function Lt(e,i){1&e&&t.eu8(0)}function St(e,i){if(1&e&&(t.j41(0,"div"),t.DNE(1,Lt,1,0,"ng-container",12),t.k0s()),2&e){t.XpG();const o=t.sdS(18);t.R7$(),t.Y8G("ngTemplateOutlet",o)}}function $t(e,i){if(1&e&&(t.j41(0,"div",20),t.nrm(1,"azt-create-avatar",21),t.j41(2,"div",22)(3,"div",23),t.EFF(4),t.k0s()()()),2&e){const o=t.XpG(2);t.R7$(),t.Y8G("nameCreateAvatar",o.currentUser.fullName)("linkAvatar",o.currentUser.avatar)("size",45),t.R7$(3),t.SpI(" ",o.currentUser.fullName," ")}}function Nt(e,i){1&e&&t.nrm(0,"azt-loading-ui",24)}function At(e,i){if(1&e){const o=t.RV6();t.j41(0,"div"),t.DNE(1,$t,5,4,"div",13),t.j41(2,"div",14),t.nrm(3,"app-proposal-form",15),t.k0s(),t.j41(4,"div",16)(5,"button",17),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.setStep("introduce"))}),t.j41(6,"span"),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()(),t.j41(9,"button",18),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.createProposal())}),t.DNE(10,Nt,1,0,"azt-loading-ui",19),t.j41(11,"span"),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()()()()}if(2&e){const o=t.XpG();t.R7$(),t.Y8G("ngIf",o.currentUser),t.R7$(2),t.Y8G("form",o.form),t.R7$(4),t.JRh(t.bMT(8,6,"lang_button_close")),t.R7$(2),t.Y8G("disabled",o.loadingCreate),t.R7$(),t.Y8G("ngIf",o.loadingCreate),t.R7$(2),t.JRh(t.bMT(13,8,"lang_azt_submit_suggestion"))}}function wt(e,i){1&e&&t.eu8(0)}function Ut(e,i){if(1&e&&(t.j41(0,"div",25),t.DNE(1,wt,1,0,"ng-container",12),t.k0s()),2&e){t.XpG();const o=t.sdS(20);t.R7$(),t.Y8G("ngTemplateOutlet",o)}}function Yt(e,i){if(1&e&&t.nrm(0,"azt-loading-effect",26),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Bt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",31)(1,"app-proposal-item",32),t.bIt("reloadApi",function(){t.eBV(o);const n=t.XpG(3);return t.Njj(n.getProposalList())})("redirectTo",function(){const n=t.eBV(o).$implicit,d=t.XpG(3);return t.Njj(d.redirectToProposalDetail(n.id))}),t.k0s()()}if(2&e){const o=i.$implicit,s=t.XpG(3);t.R7$(),t.Y8G("proposal",o)("currentUser",s.currentUser)}}function Xt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div"),t.DNE(1,Bt,2,2,"div",28),t.j41(2,"div",29)(3,"azt-paging",30),t.bIt("goToPaginationPage",function(n){t.eBV(o);const d=t.XpG(2);return t.Njj(d.goToPage(n))}),t.k0s()()()}if(2&e){const o=t.XpG(2);t.R7$(),t.Y8G("ngForOf",o.proposalList),t.R7$(2),t.Y8G("pageObj",o.pageObj)}}function Vt(e,i){if(1&e&&(t.j41(0,"div",33),t.nrm(1,"azt-svg-icon",34),t.j41(2,"div",35),t.EFF(3),t.nI1(4,"mytranslate"),t.nI1(5,"mytranslate"),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(),t.Y8G("size",84),t.R7$(2),t.SpI(" ",o.selectIndex?t.bMT(4,2,"lang_azt_no_suggestions_have_been_implemented"):t.bMT(5,4,"lang_not_data")," ")}}function Kt(e,i){if(1&e&&t.DNE(0,Xt,4,2,"div",6)(1,Vt,6,6,"div",27),2&e){const o=t.XpG();t.Y8G("ngIf",o.proposalList.length),t.R7$(),t.Y8G("ngIf",!o.proposalList.length)}}function Jt(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",36)(1,"div",37),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.nrm(4,"div",38),t.nI1(5,"mytranslate"),t.nrm(6,"div",38),t.nI1(7,"mytranslate"),t.j41(8,"div",39)(9,"button",40),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.setStep("create"))}),t.nrm(10,"lucide-icon",41),t.j41(11,"span",42),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()()()()}2&e&&(t.R7$(2),t.JRh(t.bMT(3,4,"lang_azt_feature_suggestion")),t.R7$(2),t.Y8G("innerHTML",t.bMT(5,6,"lang_azt_feature_suggestion_desc_one"),t.npT),t.R7$(2),t.Y8G("innerHTML",t.bMT(7,8,"lang_azt_feature_suggestion_desc_two"),t.npT),t.R7$(6),t.JRh(t.bMT(13,10,"lang_azt_create_new_proposal")))}function Ht(e,i){if(1&e){const o=t.RV6();t.j41(0,"div",43)(1,"div",44),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",45),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"div",46)(8,"button",47),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.setStep("introduce"))}),t.j41(9,"span"),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()()()()}2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,3,"lang_azt_your_suggestion_has_been_submitted")," "),t.R7$(3),t.JRh(t.bMT(6,5,"lang_azt_thank_you_very_much")),t.R7$(5),t.JRh(t.bMT(11,7,"lang_button_close")))}const Qt=[{path:"",component:R,canActivate:[x.t],children:[{path:"list/:filter/:page",component:(()=>{var e;class i extends I.H{constructor(){super(),this.proposalsService=(0,t.WQX)(p.pr),this.activatedRoute=(0,t.WQX)(v.nX),this.userService=(0,t.WQX)(k.R),this.uploadImageOfHomeworkService=(0,t.WQX)(S.J),this.step="introduce",this.pageObj=new D.d(24),this.proposalList=[],this.proposalTotal=0,this.selectIndex=0,this.loadingPage=!1,this.loadingCreate=!1,this.form=new l.gE({title:new l.MJ("",{nonNullable:!0,validators:[l.k0.required,P.M.noWhiteSpace,l.k0.maxLength(255)]}),content:new l.MJ("",{nonNullable:!0,validators:[l.k0.required]})})}ngOnInit(){this.initStatusObj(),this.currentUser=this.userService.getUserObj(),this.waitDestroy((0,zt.z)([this.activatedRoute.params,this.activatedRoute.queryParams]).subscribe(([])=>{const s=Number(this.getMyParam(this.activatedRoute,"page")??0);this.selectIndex=Number(this.getMyParam(this.activatedRoute,"filter")??0),this.pageObj.setPageNumber(s),this.getProposalList()}))}getProposalList(){this.loadingPage=!0,this.waitDestroy(this.proposalsService.apiProposalsListProposalsPost({statuses:1===this.selectIndex?["DOING","DONE","ACCEPTED"]:0===this.selectIndex?["PENDING"]:void 0,onlyMine:2===this.selectIndex,createdFrom:void 0,createdTo:void 0,page:this.pageObj.page,size:this.pageObj.pageSize}).subscribe(n=>{if(this.loadingPage=!1,!n.success)return this.errorStatusObj(n.message,!0);this.proposalList=n.data?.objs??[],this.proposalTotal=n.data?.total??0,this.pageObj.setTotalPages(n.data?.total??0),this.successStatusObj()}))}createProposal(){if(this.form.invalid)return this.form.markAllAsTouched();this.loadingCreate=!0;const s=this.form.getRawValue();this.uploadImageOfHomeworkService.replaceImageInContent(s.content).subscribe(n=>{if(n.errorMessage)return this.showErrorSnack(n.errorMessage);this.waitDestroy(this.proposalsService.apiProposalsCreateProposalPost({title:s.title,content:n.content}).subscribe(y=>{if(this.loadingCreate=!1,!y.success)return this.showErrorSnack(y.message);this.form.patchValue({title:"",content:""}),this.setStep("success"),this.getProposalList(),this.myNavigation(`/admin/proposal/list/0/${this.pageObj.page}`),this.successStatusObj()}))})}setStep(s){this.step=s}onTabChanged(s){this.selectIndex=s.index,this.myNavigation(`/admin/proposal/list/${this.selectIndex}/${this.pageObj.page}`)}redirectToProposalDetail(s){this.myNavigationWithQueryString(`/admin/proposal/detail/${s}`,`?backto=/admin/proposal/list/${this.selectIndex}/${this.pageObj.page}`)}goToPage(s){this.myNavigation(`/admin/proposal/list/${this.selectIndex}/${s}`)}}return(e=i).\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-proposal-list"]],standalone:!0,features:[t.Vt3,t.aNF],decls:21,vars:16,consts:[["doneLoading",""],["introduce",""],["success",""],[3,"headerBackToLink"],[1,"proposal","mx-auto","mt-8",2,"max-width","1000px"],[1,"box","p-5"],[4,"ngIf"],["class","flex items-center w-full","style","min-height: 30vh",4,"ngIf"],[1,"mt-5"],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["class","flex",4,"ngIf"],[1,"mt-3"],[3,"form"],[1,"mt-5","text-right"],[1,"btn","btn-secondary","min-width-100","mr-3",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"flex"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3"],[1,"font-medium","text-base"],[1,"mr-1"],[1,"flex","items-center","w-full",2,"min-height","30vh"],[3,"currentStatusObj"],["class","empty-box p-3 flex items-center justify-center flex-col h-full","style","height: 250px",4,"ngIf"],["class","mt-5 box p-4",4,"ngFor","ngForOf"],[1,"flex","mt-5"],[3,"goToPaginationPage","pageObj"],[1,"mt-5","box","p-4"],[3,"reloadApi","redirectTo","proposal","currentUser"],[1,"empty-box","p-3","flex","items-center","justify-center","flex-col","h-full",2,"height","250px"],["type","inbox-empty",3,"size"],[1,"mt-3","font-medium"],[1,"mt-0"],[1,"font-medium","text-lg","text-center"],[1,"mt-5","text-justify",3,"innerHTML"],[1,"mt-8","text-center"],[1,"btn","btn-primary",3,"click"],["name","plus","size","20"],[1,"ml-2"],[1,"mt-0","flex","flex-col","justify-center","items-center","h-full","w-full"],[1,"text-lg","font-medium"],[1,"mt-2"],[1,"mt-8"],[1,"btn","btn-primary","min-width-100",3,"click"]],template:function(s,n){if(1&s){const d=t.RV6();t.j41(0,"teacher-layout",3)(1,"div",4)(2,"div",5),t.DNE(3,St,2,1,"div",6)(4,At,14,10,"div",6)(5,Ut,2,1,"div",7),t.k0s(),t.j41(6,"div",8)(7,"mat-tab-group",9),t.bIt("selectedTabChange",function(F){return t.eBV(d),t.Njj(n.onTabChanged(F))}),t.nrm(8,"mat-tab",10),t.nI1(9,"mytranslate"),t.nrm(10,"mat-tab",10),t.nI1(11,"mytranslate"),t.nrm(12,"mat-tab",10),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,Yt,1,1,"azt-loading-effect",11)(15,Kt,2,2,"ng-template",null,0,t.C5r),t.k0s()()(),t.DNE(17,Jt,14,12,"ng-template",null,1,t.C5r)(19,Ht,12,9,"ng-template",null,2,t.C5r)}if(2&s){const d=t.sdS(16);t.Y8G("headerBackToLink","/admin/dashboard"),t.R7$(3),t.Y8G("ngIf","introduce"===n.step),t.R7$(),t.Y8G("ngIf","create"===n.step),t.R7$(),t.Y8G("ngIf","success"===n.step),t.R7$(2),t.Y8G("selectedIndex",n.selectIndex),t.R7$(),t.FS9("label",t.bMT(9,10,"lang_azt_proposal_list")),t.R7$(2),t.FS9("label",t.bMT(11,12,"lang_azt_implemented_proposal")),t.R7$(2),t.FS9("label",t.bMT(13,14,"lang_azt_my_proposal")),t.R7$(2),t.Y8G("ngIf",n.statusObj.loading)("ngIfElse",d)}},dependencies:[g.R,Mt.m,w,z.p,j.Q,a.K,m.flO,m.WGl,c.MD,c.Sq,c.bT,c.T3,u.L,h.wp,N,_.s,U.mq,U.T8,Ot.q],encapsulation:2}),i})()},{path:"detail/:id",component:Gt}]}];let Zt=(()=>{var e;class i{}return(e=i).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[v.iI.forChild(Qt),v.iI,T.XE]}),i})()},88089:(G,E,r)=>{r.d(E,{J:()=>k});var v=r(27691),T=r(51698),x=r(56201),t=r(48891),R=r(21164),c=r(9146),u=r(32996);let k=(()=>{var I;class j{replaceImageInContent(a){return new T.c(p=>{if(a.includes("<img ")){var m=this.findAllSubString(a,"<img"),_=[],g=[];m.forEach(l=>{var f=a.indexOf("src=",l),b=a.indexOf('"',Number(f)+5),C=a.substring(Number(f)+5,Number(b)+1);C.includes(";base64")?_.push({oldUrl:C}):C.includes("blob:")&&g.push({oldUrl:C})}),_.length>0?this.reUploadBase64File(_,(l,f)=>{null==f?g&&g.length>0?this.reUploadBlobFile(g,(b,C)=>{null!=C?(a=this.replaceHomeworkContent(a,l),a=this.replaceHomeworkContent(a,b),p.next({errorMessage:void 0,content:a}),p.complete()):(p.next({errorMessage:C,content:a}),p.complete())}):(a=this.replaceHomeworkContent(a,l),p.next({errorMessage:void 0,content:a}),p.complete()):(p.next({errorMessage:f,content:a}),p.complete())}):g.length>0?this.reUploadBlobFile(g,(l,f)=>{null==f?(a=this.replaceHomeworkContent(a,l),p.next({errorMessage:void 0,content:a}),p.complete()):(p.next({errorMessage:f,content:a}),p.complete())}):(a=this.replaceHomeworkContent(a,[]),p.next({errorMessage:void 0,content:a}),p.complete())}else p.next({errorMessage:void 0,content:a}),p.complete()})}replaceHomeworkContent(a,p){return p.length>0&&p.forEach(m=>{a=a.replace(m.oldUrl??"  ",m.newUrl+'" class="w-100 img-fluid"')}),a}findAllSubString(a,p){for(var m=0,_=0,g=[];a.indexOf(p,m)>-1;)_=a.indexOf(p,m),g.push(_),m=_+p.length;return g}getTypeFile(a){var p=a.indexOf(";");return a.substring(5,p)}getFileName(a){var p=a.split("").reverse().join(""),m=p.indexOf(";"),_=p.indexOf("/",m);return p.substring(m,_).split("").reverse().join("")}convertBlobToBase64(a){return new Promise(p=>{var m=new Image;m.crossOrigin="Anonymous",m.addEventListener("load",function(){var _=document.createElement("canvas"),g=_.getContext("2d");_.width=m.width,_.height=m.height,g?.drawImage(m,0,0);var l=_.toDataURL("image/png");p(l)},!1),m.src=a})}reUploadBase64File(a,p){if(a&&a.length>0){let l,g=a.length;for(var m=[],_=0;_<a.length;_++){const f=a[_],b=f.oldUrl?.substring(0,f.oldUrl.length-1);this.startUploadBlobFile(f,b??"",[],(C,h)=>{null==h?m=m.concat(C):l=h,g-=1,0==g&&p(m,l)})}}else p([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}reUploadBlobFile(a,p){if(a&&a.length>0){let l,g=a.length;for(var m=[],_=0;_<a.length;_++){const f=a[_],b=f?.oldUrl?.substring(0,f.oldUrl.length-1);this.convertBlobToBase64(b??"").then(C=>{this.startUploadBlobFile(f,C,[],(h,P)=>{null==P?m=m.concat(h):l=P,g-=1,0==g&&p(m,l)})})}}else p([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}startUploadBlobFile(a,p,m,_){if(p&&""!=p){var g=this.getTypeFile(p),l=this.myPdfService.b64toFile(p,this.getFileName(g),g);(0,x.w4)(l).then(f=>{this.apiUploadService.uploadToCdnForHomework(f).subscribe(b=>{if(b.type!=v.hv.UploadProgress)if(1==b.success){var C={...a,newUrl:b.data?.url??""};m.push(C),_(m,void 0)}else _(m,this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",b.message??"none"))})})}else _(m,"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}constructor(a,p,m){this.commonService=a,this.apiUploadService=p,this.myPdfService=m}}return(I=j).\u0275fac=function(a){return new(a||I)(t.KVO(R.R),t.KVO(c.T),t.KVO(u.C))},I.\u0275prov=t.jDH({token:I,factory:I.\u0275fac,providedIn:"root"}),j})()},87816:(G,E,r)=>{r.d(E,{j:()=>T});var v=r(48891);let T=(()=>{var x;class t{constructor(c){this.el=c}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(c){c.parentElement&&(c.parentElement.style.minHeight=c.parentElement.clientHeight+"px"),c.style.overflow="hidden",c.style.height="auto";let u=c.scrollHeight+30;u=u<57?57:u,c.style.height=u+"px",c.parentElement&&(c.parentElement.style.minHeight="auto")}}return(x=t).\u0275fac=function(c){return new(c||x)(v.rXU(v.aKT))},x.\u0275dir=v.FsC({type:x,selectors:[["textarea","autoResize",""]],hostBindings:function(c,u){1&c&&v.bIt("input",function(I){return u.onInput(I.target.value)})("focus",function(){return u.onFocus()})},standalone:!0}),t})()},16581:(G,E,r)=>{r.d(E,{Z:()=>x});var v=r(48891),T=r(21164);let x=(()=>{var t;class R{constructor(u){this.commonService=u,this.enterKey=new v.bkB,this.enableInMobile=!0}onKeyDown(u){!this.enableInMobile&&this.commonService.isMobileDevice()||"Enter"===u.key&&!u.shiftKey&&(u.preventDefault(),this.enterKey.emit())}}return(t=R).\u0275fac=function(u){return new(u||t)(v.rXU(T.R))},t.\u0275dir=v.FsC({type:t,selectors:[["","enterKey",""]],hostBindings:function(u,k){1&u&&v.bIt("keydown",function(j){return k.onKeyDown(j)})},inputs:{enableInMobile:"enableInMobile"},outputs:{enterKey:"enterKey"},standalone:!0}),R})()},15055:(G,E,r)=>{r.d(E,{u:()=>g});var v=r(54460),T=r(10936),x=r(89163),t=r(65162),R=r(40116),c=r(44327),u=r(96639),k=r(55887),I=r(15343),j=r(5502),D=r(44155),a=r(48891);const p=()=>({"mr-2 text-danger":!0});function m(l,f){if(1&l&&a.nrm(0,"lucide-icon",10),2&l){const b=a.XpG();a.Y8G("name",b.data.iconName)("ngClass",a.lJ4(2,p))}}function _(l,f){if(1&l&&(a.j41(0,"div",11)(1,"div",3)(2,"span"),a.EFF(3),a.nI1(4,"mytranslate"),a.k0s(),a.j41(5,"b"),a.EFF(6),a.k0s(),a.j41(7,"span"),a.EFF(8),a.nI1(9,"mytranslate"),a.k0s()(),a.j41(10,"div",12),a.nrm(11,"input",13),a.k0s()()),2&l){const b=a.XpG();a.R7$(3),a.JRh(a.bMT(4,4,"lang_azt_enter")+" "),a.R7$(3),a.JRh('"'+b.data.textConfirm+'" '),a.R7$(2),a.JRh(a.bMT(9,6,"lang_azt_for_delete_data")),a.R7$(3),a.Y8G("formControl",b.confirmValue)}}let g=(()=>{var l;class f extends R._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(C,h){super(h,C),this.dialogRef=C,this.data=h,this.confirmValue=new T.MJ("",{nonNullable:!0})}}return(l=f).\u0275fac=function(C){return new(C||l)(a.rXU(x.CP,8),a.rXU(x.Vh,8))},l.\u0275cmp=a.VBU({type:l,selectors:[["azt-dialog-danger"]],standalone:!0,features:[a.Vt3,a.aNF],decls:14,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click","disabled"],["size","24",3,"name","ngClass"],[1,"mt-3"],[1,"mt-2"],["type","text",1,"form-control",3,"formControl"]],template:function(C,h){1&C&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a.DNE(4,m,1,3,"lucide-icon",4),a.nrm(5,"span",5),a.k0s(),a.DNE(6,_,12,8,"div",6),a.k0s()(),a.j41(7,"div",7)(8,"button",8),a.bIt("click",function(){return h.btnCloseDialog()}),a.EFF(9),a.nI1(10,"mytranslate"),a.k0s(),a.j41(11,"button",9),a.bIt("click",function(){return h.confirmDialog()}),a.EFF(12),a.nI1(13,"mytranslate"),a.k0s()()()),2&C&&(a.R7$(4),a.Y8G("ngIf",h.data.iconName),a.R7$(),a.Y8G("innerHtml",h.data.content,a.npT),a.R7$(),a.Y8G("ngIf",h.data.textConfirm),a.R7$(3),a.SpI(" ",a.bMT(10,6,"lang_auto_huy")," "),a.R7$(2),a.Y8G("disabled",h.data.textConfirm&&h.data.textConfirm!==h.confirmValue.value),a.R7$(),a.SpI(" ",a.bMT(13,8,"lang_auto_xac_nhan")," "))},dependencies:[v.MD,v.YU,v.bT,T.X1,T.me,T.BC,T.l_,t.iI,T.YN,u.wp,D.s,I.flO,I.WGl,k.L,j.Id,c.k],encapsulation:2}),f})()}}]);