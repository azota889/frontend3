(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[5351],{46728:(Q,B,a)=>{"use strict";a.r(B),a.d(B,{HomeworkFrontRoutingModule:()=>en});var s=a(65162),D=a(1133),O=a(34158),T=a(59640),_=a(54460),g=a(10936),y=a(21656),C=a(15343),M=a(70050),d=a(5502),h=a(36894),e=a(48891);let j=(()=>{var t;class l extends T.H{}return(t=l).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-test-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:0,consts:[["id","homework-frontend-layout"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[_.MD,g.X1,s.iI,s.n3,g.YN,y.s,C.flO,M.L,d.Id,h.k],encapsulation:2}),l})();var x=a(73014),V=a(27691),G=a(76627),S=a(64198),Y=a(47020),E=a(53043),H=a(89163),I=a(33887),F=a(47348),R=a(39307);const A=()=>({"mr-2 text-pending":!0});function L(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",9)(1,"button",10),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.redirectToRegister())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_button_register")," "))}function Z(t,l){1&t&&(e.j41(0,"div",11)(1,"p",12),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_have_account"),"?"))}let re=(()=>{var t;class l extends I._{confirmQuit(){this.dialogRef.close(!0)}redirectToRegister(){this.redirectService.redirectRegisterForStudent(),this.dialogRef.close()}redirectToLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`),this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(i,o,r,b){super(b,r),this.router=i,this.redirectService=o,this.dialogRef=r,this.data=b}}return(t=l).\u0275fac=function(i){return new(i||t)(e.rXU(s.Ix),e.rXU(R.m),e.rXU(H.CP,8),e.rXU(H.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-message-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:13,vars:11,consts:[[1,"box","p-5",2,"min-width","400px"],[1,"border-slate-200/60","dark:border-darkmode-400","text-center"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","badge-info",3,"size","ngClass"],["class","mx-auto mt-2",4,"ngIf"],["class","mb-2 text-md font-medium mt-2",4,"ngIf"],[1,"mx-auto"],["azt-track-service","message-dialog-VmueIbouAH",1,"btn","w-24","btn-primary",3,"click"],[1,"mx-auto","mt-2"],["azt-track-service","message-dialog-mbvZs1BXU4",1,"btn","w-24","btn-primary",3,"click"],[1,"mb-2","text-md","font-medium","mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,L,4,3,"div",5)(8,Z,4,3,"div",6),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return o.redirectToLogin()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()()),2&i&&(e.R7$(4),e.Y8G("size",24)("ngClass",e.lJ4(10,A)),e.R7$(),e.SpI(" ",e.bMT(6,6,o.isBusinessDomain?"lang_business_homework_frontend_submit_homework_register_account_submit":"lang_homework_homework_frontend_submit_homework_register_account_submit")," "),e.R7$(2),e.Y8G("ngIf",!o.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!o.isBusinessDomain),e.R7$(3),e.SpI(" ",e.bMT(12,8,"lang_button_login")," "))},dependencies:[_.MD,_.YU,_.bT,g.X1,s.iI,g.YN,F.wp,y.s,C.flO,C.WGl,M.L,d.Id,h.k],encapsulation:2}),l})();var me=a(69502),de=a(94743),ue=a(25571),ae=a(78745),he=a(9570),u=a(66729);const P=()=>({"mr-1":!0});function f(t,l){if(1&t){const n=e.RV6();e.j41(0,"a",14),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.viewDetailHistory(null==o?null:o.id))}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_xem_chi_tiet")))}function X(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"a",18),e.bIt("click",function(){const o=e.eBV(n).$implicit,r=e.XpG(4);return e.Njj(r.onShowFile(o,-1))}),e.nrm(2,"lucide-icon",19),e.j41(3,"span",20),e.EFF(4),e.k0s()()()}if(2&t){const n=l.$implicit;e.R7$(2),e.Y8G("ngClass",e.lJ4(3,P)),e.R7$(),e.Y8G("title",n.name),e.R7$(),e.JRh(n.name)}}function q(t,l){if(1&t&&(e.j41(0,"div",15),e.DNE(1,X,5,4,"div",16),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",n.fileParse)}}function J(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"a",23),e.bIt("click",function(){const o=e.eBV(n).$implicit,r=e.XpG(5);return e.Njj(r.onShowFile(o,-1))}),e.nrm(2,"lucide-icon",24),e.j41(3,"span",20),e.EFF(4),e.k0s()()()}if(2&t){const n=l.$implicit;e.R7$(2),e.Y8G("ngClass",e.lJ4(3,P)),e.R7$(),e.Y8G("title",n.name),e.R7$(),e.JRh(n.name)}}function le(t,l){if(1&t&&(e.j41(0,"div",15),e.DNE(1,J,5,4,"div",16),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngForOf",n.fileParse)}}function ne(t,l){if(1&t&&(e.j41(0,"p",8),e.nrm(1,"azt-check-mark",31),e.k0s()),2&t){const n=e.XpG(3).$implicit;e.R7$(),e.Y8G("mark",n.point)}}function Ce(t,l){if(1&t&&(e.j41(0,"div",25)(1,"div",26),e.DNE(2,ne,2,1,"p",27),e.k0s(),e.j41(3,"div",28)(4,"span",29),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.nrm(7,"div",30),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.Y8G("ngIf",!n.hideMark),e.R7$(3),e.JRh(e.bMT(6,3,"lang_homework_homework_frontend_utils_comment")),e.R7$(2),e.Y8G("innerHTML",n.note,e.npT)}}function je(t,l){if(1&t&&(e.j41(0,"div",21),e.DNE(1,le,2,1,"div",12)(2,Ce,8,5,"div",22),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",n.fileParse&&n.fileParse.length>0),e.R7$(),e.Y8G("ngIf",null!=n&&null!=n.confirmedAt)}}function ye(t,l){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"span",8),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.DNE(6,f,3,3,"a",9),e.k0s(),e.j41(7,"div",7)(8,"span",10),e.EFF(9),e.nI1(10,"mytranslate"),e.j41(11,"span",11),e.EFF(12),e.k0s()()(),e.DNE(13,q,2,1,"div",12)(14,je,3,2,"div",13),e.k0s()),2&t){const n=l.$implicit;e.R7$(3),e.Lme("",e.bMT(4,7,"lang_auto_nop_luc"),": ",e.bMT(5,9,n.createdAt),""),e.R7$(3),e.Y8G("ngIf",n.result),e.R7$(3),e.SpI("",e.bMT(10,11,"lang_homework_homework_frontend_utils_request_submit"),": "),e.R7$(3),e.JRh(n.resendNote),e.R7$(),e.Y8G("ngIf",!n.result&&n.files),e.R7$(),e.Y8G("ngIf",n.result)}}function Oe(t,l){if(1&t&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.DNE(6,ye,15,13,"div",5),e.k0s()),2&t){const n=e.XpG();e.R7$(4),e.JRh(e.bMT(5,2,"lang_homework_homework_frontend_utils_history_submit")),e.R7$(2),e.Y8G("ngForOf",n.dataAnswerHistory)}}let Se=(()=>{var t;class l extends T.H{viewDetailHistory(i){this.commonService.myNavigation("/homework/switch-view-homework/"+this.dataHomeworkObj?.id+"/"+this.dataHomeworkObj?.hashId+"/"+i)}onFileClose(){this.isShowPreviewFile=!1}onShowFile(i,o){this.isShowPreviewFile=!0;let r={...i,index:o};this.previewFileEmit.emit(r)}constructor(){super(),this.previewFileEmit=new e.bkB,this.isShowPreviewFile=!1,this.answerFile=null}}return(t=l).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-answer-history"]],inputs:{dataAnswerHistory:"dataAnswerHistory",dataHomeworkObj:"dataHomeworkObj"},outputs:{previewFileEmit:"previewFileEmit"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","card-box mt-3",4,"ngIf"],[1,"card-box","mt-3"],[1,"row","top-row"],[1,"col-12","text-center"],[1,"h5","text-white"],["class","ml-0 mr-0 mt-4 attach-container p-2",4,"ngFor","ngForOf"],[1,"ml-0","mr-0","mt-4","attach-container","p-2"],[1,"flex-title","mt-2","pl-3","pr-3"],[1,"mb-0"],["azt-track-service","answer-history-oWctyE3L2bg",3,"click",4,"ngIf"],[1,"mb-0",2,"font-weight","400"],[1,"text-danger","text-bold"],["class","row ml-0 mr-0 mt-1 mb-1 pb-3 pt-3 attach-container",4,"ngIf"],["class","mt-2",4,"ngIf"],["azt-track-service","answer-history-oWctyE3L2bg",3,"click"],[1,"row","ml-0","mr-0","mt-1","mb-1","pb-3","pt-3","attach-container"],["class","col-6 col-sm-6 col-md-4 col-xl-2 col-lg-2",4,"ngFor","ngForOf"],[1,"col-6","col-sm-6","col-md-4","col-xl-2","col-lg-2"],["azt-track-service","answer-history--J0jh8HNJVI","target","_blank",1,"dz-clickable",2,"display","flex","margin-top","3px","font-size","14px",3,"click"],["name","paperclip","size","20",3,"ngClass"],[1,"truncate",2,"line-height","1.6",3,"title"],[1,"mt-2"],["class","row justify-content-between mt-2","style","margin: 16px!important;",4,"ngIf"],["azt-track-service","answer-history-F80xamrrLdV","target","_blank",1,"dz-clickable",2,"display","flex","margin-top","3px","font-size","14px",3,"click"],["name","paperclip","size","24",3,"ngClass"],[1,"row","justify-content-between","mt-2",2,"margin","16px!important"],[1,"col-sm-3","col-md-3","col-lg-3","_col-left_result","text-center"],["class","mb-0",4,"ngIf"],[1,"col-sm-8","col-md-8","col-lg-8","_col-right_result"],[1,"h5","title"],[1,"content-homework","pt-3",3,"innerHTML"],[3,"mark"]],template:function(i,o){1&i&&e.DNE(0,Oe,7,4,"div",0),2&i&&e.Y8G("ngIf",o.dataAnswerHistory&&o.dataAnswerHistory.length>0)},dependencies:[u.D,_.MD,_.YU,_.Sq,_.bT,g.X1,s.iI,g.YN,F.wp,y.s,C.flO,C.WGl,M.L,F.bH,d.Id,h.k],styles:[".card-box[_ngcontent-%COMP%]{width:100%;border:1px solid rgb(0,167,208);border-radius:3px}.top-row[_ngcontent-%COMP%]{background-color:#00a7d0;margin:0;padding:10px}.attach-container[_ngcontent-%COMP%]{margin:16px!important;background:#f1f1f1;padding:10px 0 0;border-radius:5px;border:1px solid #e8e8e8}@font-face{font-family:handwriting_font;src:url(https://239114911.e.cdneverest.net/cdnazota/azt-assets/core-mod-assets/fonts/HP0015HB.ttf)}._col-left[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;line-height:1;padding:35px}._col-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:5rem;color:#ff0024}._col-right[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;position:relative;padding:10px}._col-right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-10px;left:20px;background-color:#f1f1f1}._col-right[_ngcontent-%COMP%]   .content-homework[_ngcontent-%COMP%]{color:red;line-height:1.4;font-size:20px;font-family:handwriting_font!important}._col-left_result[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;line-height:1;padding:10px}._col-left_result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:3rem;color:#ff0024}._col-right_result[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;position:relative;padding:10px}._col-right_result[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-10px;left:20px;background-color:#f1f1f1}._col-right_result[_ngcontent-%COMP%]   .content-homework[_ngcontent-%COMP%]{color:red;font-size:16px;line-height:1.4;font-family:handwriting_font!important}.flex-title[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00a7d0;cursor:pointer;margin-left:5px}.files[_ngcontent-%COMP%]{cursor:pointer}.testbank[_ngcontent-%COMP%]{padding-top:40px;text-align:left}.testbank__title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.testbank_fileitem[_ngcontent-%COMP%]{display:flex;color:#00a7d0;margin-top:15px}.testbank_fileitem_icon[_ngcontent-%COMP%]{margin-right:5px}.testbank_fileitem_name[_ngcontent-%COMP%]{margin-right:10px}.testbank_fileitem_info_resualt[_ngcontent-%COMP%]{color:#000;font-weight:500;font-size:small;margin-right:15px}.testbank_fileitem_info_time[_ngcontent-%COMP%]{color:#9d9d9d}.testbank_fileitem_info_btn_submit[_ngcontent-%COMP%]{text-transform:uppercase;cursor:pointer;font-weight:500}.student_obj[_ngcontent-%COMP%]{padding:5px;min-height:69px}"]}),l})();var Me=a(52811),xe=a(63709),Ie=a(58227),ee=a(58511),Fe=a(48451),ce=a(51113),Te=a(36484),De=a(91640),Ee=a(46899),Re=a(35024),pe=a(47712);const Pe=t=>({joinByHomeworkHashId:t}),se=()=>({"mr-2":!0});function He(t,l){if(1&t&&e.eu8(0,18),2&t){e.XpG();const n=e.sdS(6);e.Y8G("ngTemplateOutlet",n)}}function Ae(t,l){if(1&t&&e.eu8(0,18),2&t){e.XpG();const n=e.sdS(8);e.Y8G("ngTemplateOutlet",n)}}function Le(t,l){if(1&t&&e.eu8(0,18),2&t){e.XpG();const n=e.sdS(12);e.Y8G("ngTemplateOutlet",n)}}function Be(t,l){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_frontend_come_back_at")+e.bMT(3,3,null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.startDate)," ")}}function Ge(t,l){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"azt-svg-icon",21),e.j41(3,"div",22),e.EFF(4),e.nI1(5,"mytranslate"),e.DNE(6,Be,4,5,"span",23),e.k0s()()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("size",84),e.R7$(2),e.SpI(" ",e.bMT(5,3,n.statusObj.errorMessage)," "),e.R7$(2),e.Y8G("ngIf","lang_core_not_start_homework_obj"==n.statusObj.errorMessage&&(null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.startDate))}}function ze(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"div",26),e.eu8(3,18),e.k0s(),e.j41(4,"div",27)(5,"app-join-classroom-box",28),e.bIt("selectStudentEvent",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.selectStudentEvent(o))}),e.k0s()()()()}if(2&t){const n=e.XpG(),i=e.sdS(10);e.R7$(3),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(2,Pe,null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.hashId))}}function $e(t,l){if(1&t&&(e.j41(0,"div",29)(1,"h3",30),e.EFF(2),e.k0s(),e.j41(3,"div",31),e.nrm(4,"azt-download-qr-code",32),e.k0s()(),e.j41(5,"div",33)(6,"span",29),e.nrm(7,"lucide-icon",34),e.EFF(8),e.nI1(9,"mytranslate"),e.j41(10,"span",35),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG();e.R7$(2),e.SpI(" ",null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.name," "),e.R7$(2),e.Y8G("fileName","azota_submit_homework_qrcode_"+(null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.hashId))("linkUrl",n.copyLinkToClipboard()),e.R7$(3),e.Y8G("ngClass",e.lJ4(8,se)),e.R7$(),e.SpI(" ",e.bMT(9,6,"lang_homework_homework_frontend_submit_homework_code_homework")+": "," "),e.R7$(3),e.JRh(null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.hashId)}}function Ne(t,l){if(1&t&&(e.j41(0,"div",33)(1,"span",29),e.nrm(2,"lucide-icon",53),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",38),e.EFF(6),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.lJ4(5,se)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_ten_hoc_sinh")+":"," "),e.R7$(3),e.SpI(" ",n.currentChild.fullName," ")}}function Ue(t,l){if(1&t&&(e.j41(0,"div",54)(1,"span",29),e.nrm(2,"lucide-icon",55),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",38),e.EFF(6),e.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.lJ4(7,se)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_bat_dau_nop")+":"," "),e.R7$(3),e.SpI(" ",e.bMT(7,5,null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.startDate)," ")}}function Ve(t,l){if(1&t&&(e.j41(0,"span",38),e.EFF(1),e.nI1(2,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(e.bMT(2,1,null==n.obj||null==n.obj.homeworkObj?null:n.obj.homeworkObj.deadline))}}function Ye(t,l){1&t&&(e.j41(0,"span",38),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_homework_homework_frontend_submit_homework_not_time")))}function Xe(t,l){if(1&t&&(e.nrm(0,"img",64),e.nI1(1,"mycdn")),2&t){const n=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,n.url),e.B4B)}}function We(t,l){if(1&t&&(e.nrm(0,"img",64),e.nI1(1,"coreModConvertCdnLinkOfGitHub")),2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.Y8G("src",e.bMT(1,1,i.getFileIcon(n)),e.B4B)}}function Je(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",56)(1,"div",57)(2,"a",58),e.bIt("click",function(){const o=e.eBV(n).$implicit,r=e.XpG(2);return e.Njj(r.onShowFile(o,-1))}),e.j41(3,"div",59),e.DNE(4,Xe,2,3,"img",60)(5,We,2,3,"img",60),e.k0s(),e.j41(6,"div",61)(7,"p",62),e.EFF(8),e.k0s(),e.j41(9,"div",63),e.EFF(10),e.k0s()()()()()}if(2&t){let n,i;const o=l.$implicit,r=e.XpG(2);e.R7$(4),e.Y8G("ngIf",null==o.mimes?null:o.mimes.includes("image")),e.R7$(),e.Y8G("ngIf",!(null!=o.mimes&&o.mimes.includes("image"))),e.R7$(2),e.Y8G("matTooltip",null!==(n=o.name)&&void 0!==n?n:""),e.R7$(),e.JRh(o.name),e.R7$(2),e.JRh(r.getFileType(null!==(i=o.mimes)&&void 0!==i?i:""))}}function Ke(t,l){if(1&t&&(e.qex(0),e.eu8(1,18),e.bVm()),2&t){e.XpG(2);const n=e.sdS(14);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function Qe(t,l){if(1&t&&e.eu8(0,18),2&t){e.XpG(2);const n=e.sdS(16);e.Y8G("ngTemplateOutlet",n)}}function Ze(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",36),e.eu8(2,18),e.j41(3,"div",33)(4,"span",29),e.nrm(5,"lucide-icon",37),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"span",38),e.EFF(9),e.k0s()()(),e.DNE(10,Ne,7,6,"div",39),e.j41(11,"div",40),e.DNE(12,Ue,8,8,"div",41),e.j41(13,"div",42)(14,"span",29),e.nrm(15,"lucide-icon",43),e.EFF(16),e.nI1(17,"mytranslate"),e.DNE(18,Ve,3,3,"span",44)(19,Ye,3,3,"span",44),e.k0s()()()(),e.j41(20,"div",26)(21,"div",45),e.nrm(22,"azt-dynamic-hook",46),e.k0s(),e.j41(23,"div",47)(24,"div",48),e.DNE(25,Je,11,5,"div",49),e.k0s()()(),e.j41(26,"div",50),e.DNE(27,Ke,2,1,"ng-container",51)(28,Qe,1,1,"ng-template",null,6,e.C5r),e.j41(30,"app-answer-history",52),e.bIt("previewFileEmit",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onShowFile(o,0))}),e.k0s()()()}if(2&t){let n;const i=e.sdS(29),o=e.XpG(),r=e.sdS(10);e.R7$(2),e.Y8G("ngTemplateOutlet",r),e.R7$(3),e.Y8G("ngClass",e.lJ4(20,se)),e.R7$(),e.SpI(" ",e.bMT(7,16,"lang_auto_lop")+": "," "),e.R7$(3),e.SpI(" ",o.currentChild||null!=o.obj&&null!=o.obj.classroomObj&&o.obj.classroomObj.name?null==o.obj||null==o.obj.classroomObj?null:o.obj.classroomObj.name:""," "),e.R7$(),e.Y8G("ngIf",o.currentChild),e.R7$(2),e.Y8G("ngIf",null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.startDate),e.R7$(3),e.Y8G("ngClass",e.lJ4(21,se)),e.R7$(),e.SpI(" ",e.bMT(17,18,"lang_homework_homework_frontend_submit_homework_dealine"),":\xa0 "),e.R7$(2),e.Y8G("ngIf",null!=(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.deadline)),e.R7$(),e.Y8G("ngIf",null==(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.deadline)),e.R7$(3),e.Y8G("content",null!==(n=null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.content)&&void 0!==n?n:""),e.R7$(3),e.Y8G("ngForOf",o.files),e.R7$(2),e.Y8G("ngIf",null==o.answerObj||null==o.answerObj.confirmedAt)("ngIfElse",i),e.R7$(3),e.Y8G("dataAnswerHistory",o.answerHistory)("dataHomeworkObj",null==o.obj?null:o.obj.homeworkObj)}}function qe(t,l){1&t&&(e.j41(0,"div",73)(1,"div",74)(2,"div",75)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()()),2&t&&(e.R7$(4),e.SpI("",e.bMT(5,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark"),"!"))}function et(t,l){1&t&&(e.j41(0,"div",76)(1,"h5",77),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_loading_wait_it"),"!"))}function tt(t,l){if(1&t&&(e.j41(0,"div",80)(1,"h5",81),e.EFF(2),e.k0s(),e.j41(3,"div",82),e.nrm(4,"progress",83),e.k0s()()),2&t){const n=l.$implicit;e.R7$(2),e.JRh(n.fileName),e.R7$(2),e.FS9("value",n.uploadProgress)}}function nt(t,l){if(1&t&&(e.j41(0,"div",78),e.DNE(1,tt,5,2,"div",79),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.convertObjToArray(n.fileUploadQueue))}}function ot(t,l){1&t&&(e.j41(0,"div",76)(1,"h5",84),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_submit_success"),"!"))}function it(t,l){if(1&t&&(e.j41(0,"div",97)(1,"video",98),e.nrm(2,"source",99),e.nI1(3,"safe"),e.k0s(),e.j41(4,"div",100)(5,"div",101),e.nrm(6,"lucide-icon",102),e.k0s()()()),2&t){const n=e.XpG().$implicit;e.R7$(2),e.Y8G("src",e.bMT(3,1,n.url+"#t=5"),e.B4B)}}function rt(t,l){if(1&t&&(e.nrm(0,"img",103),e.nI1(1,"mycdn")),2&t){const n=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,n.thumb),e.B4B)}}function st(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",104),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,r=e.XpG(4);return e.Njj(r.removeImg(o.url))}),e.nrm(1,"lucide-icon",105),e.k0s()}}function at(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",87)(1,"div",88),e.bIt("click",function(){const o=e.eBV(n).$implicit,r=e.XpG(4);return e.Njj(r.onShowFile(o,-1))}),e.DNE(2,it,7,3,"div",89),e.nI1(3,"isVideo"),e.DNE(4,rt,2,3,"ng-template",null,8,e.C5r),e.k0s(),e.j41(6,"div",90)(7,"button",91),e.bIt("click",function(){const o=e.eBV(n).index,r=e.XpG(4);return e.Njj(r.switchAttributeArray(r.answerFileList,o,o-1))}),e.nrm(8,"lucide-icon",92),e.k0s(),e.j41(9,"input",93,9),e.nI1(11,"mytranslate"),e.bIt("keyup.enter",function(){const o=e.eBV(n).index,r=e.sdS(10),b=e.XpG(4);return e.Njj(b.switchAttributeArrayInput(o,r.value))})("change",function(){const o=e.eBV(n).index,r=e.sdS(10),b=e.XpG(4);return e.Njj(b.switchAttributeArrayInput(o,r.value))}),e.k0s(),e.j41(12,"button",94),e.bIt("click",function(){const o=e.eBV(n).index,r=e.XpG(4);return e.Njj(r.switchAttributeArray(r.answerFileList,o,o+1))}),e.nrm(13,"lucide-icon",95),e.k0s()(),e.DNE(14,st,2,0,"div",96),e.k0s()}if(2&t){let n;const i=l.$implicit,o=l.index,r=e.sdS(5),b=e.XpG(4);e.R7$(2),e.Y8G("ngIf",e.bMT(3,7,null!==(n=i.mimes)&&void 0!==n?n:""))("ngIfElse",r),e.R7$(7),e.FS9("id","input_page_"+o),e.FS9("max",null==b.answerFileList?null:b.answerFileList.length),e.FS9("value",o+1),e.FS9("placeholder",e.bMT(11,9,"lang_auto_trang_so")),e.R7$(5),e.Y8G("ngIf",!(null!=b.obj&&b.obj.isMarked&&b.isShowGreenCheckbox(i.url)))}}function lt(t,l){if(1&t&&(e.j41(0,"div",85),e.DNE(1,at,15,11,"div",86),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.answerFileList)}}function ct(t,l){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",106),e.nrm(2,"lucide-icon",107),e.j41(3,"span",108),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"input",109,10),e.bIt("change",function(o){e.eBV(n);const r=e.XpG(3);return e.Njj(r.selectFile(o))}),e.k0s()(),e.j41(8,"div",110)(9,"span",111),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()(),e.bVm()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(7,se)),e.R7$(2),e.JRh(e.bMT(5,3,"lang_auto_upload_file")),e.R7$(6),e.JRh(e.bMT(11,5,"lang_auto_ho_tro_anh_video_audio_hoac_file_pdf_brackets")))}function mt(t,l){if(1&t&&(e.qex(0),e.DNE(1,qe,6,3,"div",69)(2,et,4,3,"div",70)(3,nt,2,1,"div",71)(4,ot,4,3,"div",70)(5,lt,2,1,"div",72)(6,ct,12,8,"ng-container",23),e.nI1(7,"isParentViewOnly"),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.obj?null:n.obj.isMarked),e.R7$(),e.Y8G("ngIf",n.statusObjData.loading),e.R7$(),e.Y8G("ngIf",n.convertObjToArray(n.fileUploadQueue).length>0),e.R7$(),e.Y8G("ngIf",(null==n.answerFileList?null:n.answerFileList.length)&&(null==n.rawAnswerFileList?null:n.rawAnswerFileList.length)&&n.isSubmit),e.R7$(),e.Y8G("ngIf",null==n.answerFileList?null:n.answerFileList.length),e.R7$(),e.Y8G("ngIf",!e.bMT(7,6,""))}}function dt(t,l){1&t&&(e.j41(0,"div",73)(1,"div",74)(2,"div",75)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()()),2&t&&(e.R7$(4),e.SpI("",e.bMT(5,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark"),"!"))}function ut(t,l){if(1&t&&(e.qex(0),e.nrm(1,"video",117),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("src",n.url+"#t=5",e.B4B)}}function ht(t,l){if(1&t&&(e.nrm(0,"img",118),e.nI1(1,"mycdn")),2&t){const n=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,n.thumb),e.B4B)}}function _t(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",87)(1,"div",113),e.bIt("click",function(){const o=e.eBV(n).$implicit,r=e.XpG(4);return e.Njj(r.onShowFile(o,-1))}),e.DNE(2,ut,2,1,"ng-container",51),e.nI1(3,"isVideo"),e.DNE(4,ht,2,3,"ng-template",null,12,e.C5r),e.k0s(),e.j41(6,"div",90)(7,"button",114),e.nrm(8,"lucide-icon",92),e.k0s(),e.nrm(9,"input",115,9),e.nI1(11,"mytranslate"),e.nI1(12,"isParentViewOnly"),e.j41(13,"button",114),e.nrm(14,"lucide-icon",116),e.k0s()()()}if(2&t){let n;const i=l.$implicit,o=l.index,r=e.sdS(5),b=e.XpG(4);e.R7$(2),e.Y8G("ngIf",e.bMT(3,7,null!==(n=i.mimes)&&void 0!==n?n:""))("ngIfElse",r),e.R7$(7),e.FS9("id","input_page_"+o),e.FS9("max",null==b.answerFileList?null:b.answerFileList.length),e.FS9("value",o+1),e.FS9("placeholder",e.bMT(11,9,"lang_auto_trang_so")),e.Y8G("readonly",e.bMT(12,11,""))}}function pt(t,l){if(1&t&&(e.j41(0,"div",85),e.DNE(1,_t,15,13,"div",86),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.answerFileList)}}function gt(t,l){1&t&&(e.j41(0,"div",119)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_end_time_submit")))}function ft(t,l){if(1&t&&e.DNE(0,dt,6,3,"div",112)(1,pt,2,1,"div",72)(2,gt,4,3,"ng-template",null,11,e.C5r),2&t){const n=e.sdS(3),i=e.XpG(2);e.Y8G("ngIf",null==i.obj?null:i.obj.isMarked)("ngIfElse",n),e.R7$(),e.Y8G("ngIf",null==i.answerFileList?null:i.answerFileList.length)}}function bt(t,l){1&t&&e.nrm(0,"azt-loading-ui",122)}function wt(t,l){if(1&t){const n=e.RV6();e.j41(0,"button",120),e.nI1(1,"isParentViewOnly"),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.submitHomework())}),e.DNE(2,bt,1,0,"azt-loading-ui",121),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("disabled",n.statusObjData.loading||!(null!=n.answerFileList&&n.answerFileList.length)||(null==n.obj?null:n.obj.isMarked)||n.isNotChangeData||e.bMT(1,3,"")),e.R7$(2),e.Y8G("ngIf",n.statusObjData.loading),e.R7$(),e.SpI(" ",null!=n.obj&&n.obj.isMarked?e.bMT(4,5,"lang_homework_homework_frontend_submit_homework_submitted"):e.bMT(5,7,"lang_homework_homework_frontend_submit_homework_submit")," ")}}function vt(t,l){1&t&&e.nrm(0,"azt-loading-ui",122)}function kt(t,l){if(1&t){const n=e.RV6();e.j41(0,"button",123),e.nI1(1,"isParentViewOnly"),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.submitHomework())}),e.DNE(2,vt,1,0,"azt-loading-ui",121),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("disabled",n.statusObjData.loading||!(null!=n.answerFileList&&n.answerFileList.length)||(null==n.obj?null:n.obj.isOverTime)||e.bMT(1,3,"")),e.R7$(2),e.Y8G("ngIf",n.statusObjData.loading),e.R7$(),e.SpI(" ",null!=n.obj&&n.obj.isMarked?e.bMT(4,5,"lang_homework_homework_frontend_submit_homework_submitted"):e.bMT(5,7,"lang_homework_homework_frontend_submit_homework_submit")," ")}}function Ct(t,l){if(1&t&&(e.j41(0,"div",65),e.DNE(1,mt,8,8,"ng-container",51)(2,ft,4,3,"ng-template",null,7,e.C5r),e.k0s(),e.j41(4,"div",66),e.DNE(5,wt,6,9,"button",67)(6,kt,6,9,"button",68),e.k0s()),2&t){const n=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",!(null!=i.obj&&i.obj.isOverTime))("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",!(null!=i.obj&&i.obj.isOverTime)),e.R7$(),e.Y8G("ngIf",null==i.obj?null:i.obj.isOverTime)}}function jt(t,l){if(1&t&&(e.qex(0),e.nrm(1,"video",117),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("src",n.url+"#t=5",e.B4B)}}function yt(t,l){if(1&t&&(e.nrm(0,"img",118),e.nI1(1,"mycdn")),2&t){const n=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,n.thumb),e.B4B)}}function Ot(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",87)(1,"div",131),e.bIt("click",function(){const o=e.eBV(n).$implicit,r=e.XpG(3);return e.Njj(r.onShowFile(o,-1))}),e.DNE(2,jt,2,1,"ng-container",51),e.nI1(3,"isVideo"),e.DNE(4,yt,2,3,"ng-template",null,13,e.C5r),e.k0s(),e.j41(6,"div",90)(7,"button",114),e.nrm(8,"lucide-icon",92),e.k0s(),e.nrm(9,"input",132,9),e.nI1(11,"mytranslate"),e.j41(12,"button",114),e.nrm(13,"lucide-icon",95),e.k0s()()()}if(2&t){let n;const i=l.$implicit,o=l.index,r=e.sdS(5),b=e.XpG(3);e.R7$(2),e.Y8G("ngIf",e.bMT(3,6,null!==(n=i.mimes)&&void 0!==n?n:""))("ngIfElse",r),e.R7$(7),e.FS9("id","input_page_"+o),e.FS9("max",null==b.answerFileList?null:b.answerFileList.length),e.FS9("value",o+1),e.FS9("placeholder",e.bMT(11,8,"lang_auto_trang_so"))}}function St(t,l){if(1&t&&(e.j41(0,"div",130),e.DNE(1,Ot,14,10,"div",86),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngForOf",n.answerFileList)}}function Mt(t,l){1&t&&(e.j41(0,"div",133),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark")," "))}function xt(t,l){1&t&&e.nrm(0,"p",141)}function It(t,l){if(1&t&&(e.j41(0,"p",141),e.nrm(1,"azt-check-mark",142),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("mark",n.answerObj.point)}}function Ft(t,l){if(1&t&&e.nrm(0,"div",147),2&t){const n=e.XpG(4);e.Y8G("innerHTML",n.answerObj.note,e.npT)}}function Tt(t,l){if(1&t&&e.nrm(0,"div",148),2&t){const n=e.XpG(4);e.Y8G("innerHTML",n.answerObj.note,e.npT)}}function Dt(t,l){if(1&t&&e.nrm(0,"div",149),2&t){const n=e.XpG(4);e.Y8G("innerHTML",n.answerObj.note,e.npT)}}function Et(t,l){if(1&t&&e.nrm(0,"div",150),2&t){const n=e.XpG(4);e.Y8G("innerHTML",n.answerObj.note,e.npT)}}function Rt(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,Ft,1,1,"div",143)(2,Tt,1,1,"div",144)(3,Dt,1,1,"div",145)(4,Et,1,1,"div",146),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngIf","font_chu_in"==n.answerObj.txtCommentFont),e.R7$(),e.Y8G("ngIf","font_chu_in_\u0111am"==n.answerObj.txtCommentFont),e.R7$(),e.Y8G("ngIf","font_chu_dep_z"==n.answerObj.txtCommentFont),e.R7$(),e.Y8G("ngIf","font_chu_in_nghieng"==n.answerObj.txtCommentFont)}}function Pt(t,l){if(1&t&&(e.nrm(0,"div",151),e.nI1(1,"safeNormalHtmlContent")),2&t){const n=e.XpG(3);e.Y8G("innerHTML",e.bMT(1,1,n.answerObj.note),e.npT)}}function Ht(t,l){if(1&t){const n=e.RV6();e.j41(0,"div",134)(1,"h5",126),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4," \xa0( "),e.j41(5,"a",135),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.viewDetail())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8," ) "),e.k0s(),e.j41(9,"div",136)(10,"div",137),e.DNE(11,xt,1,0,"p",138)(12,It,2,1,"p",138),e.k0s(),e.j41(13,"div",139)(14,"h4",140),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.DNE(17,Rt,5,4,"div",51)(18,Pt,2,3,"ng-template",null,14,e.C5r),e.k0s()()}if(2&t){const n=e.sdS(19),i=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,7,"lang_homework_homework_frontend_submit_homework_result")),e.R7$(4),e.SpI(" ",e.bMT(7,9,"lang_homework_homework_frontend_submit_homework_view_detail_result")," "),e.R7$(5),e.Y8G("ngIf",!i.isHideMark&&null==i.answerObj.point),e.R7$(),e.Y8G("ngIf",!i.isHideMark&&null!=i.answerObj.point),e.R7$(3),e.JRh(e.bMT(16,11,"lang_homework_homework_frontend_submit_homework_comment")),e.R7$(2),e.Y8G("ngIf",i.answerObj&&null!=i.answerObj.txtCommentFont||null!=i.answerObj.txtCommentFont)("ngIfElse",n)}}function At(t,l){if(1&t&&(e.j41(0,"div",124)(1,"div",125)(2,"h5",126),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span"),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(9,St,2,1,"div",127)(10,Mt,3,3,"div",128)(11,Ht,20,13,"ng-template",129),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_homework_homework_frontend_submit_homework_assignment")),e.R7$(3),e.Lme("\xa0(",e.bMT(7,8,"lang_homework_homework_frontend_submit_homework_time_submit"),": ",e.bMT(8,10,null==n.answerObj?null:n.answerObj.createdAt),")"),e.R7$(3),e.Y8G("ngIf",null==n.answerFileList?null:n.answerFileList.length),e.R7$(),e.Y8G("ngIf",null!=n.answerObj&&(null==n.obj?null:n.obj.isMarked)&&n.whenShowAnswer),e.R7$(),e.Y8G("ngIf",null!=n.answerObj&&(null==n.obj?null:n.obj.isMarked)&&!n.whenShowAnswer)}}let Lt=(()=>{var t;class l extends T.H{selectStudentEvent(i){this.localStorageObject.removeCacheByValue("FrontPageStudent"),this.localStorageObject.removeCacheByValue("GetExamObjsInDashboard"),this.localStorageObject.removeCacheByValue("GetClassroomInHomeworkObjsInDashboard"),this.getData()}onShowFile(i,o){let r={...i,index:o};this.sAztDialogService.open(E.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:r},restoreFocus:!1})}addFileWithProcess(i){i&&(this.isNotChangeData=!1,this.answerFileList?.push(i));let o=this.answerFileList?.length??0;for(let r=0;r<o;r++)this.answerFileList&&!this.answerFileList?.[r].lastModified&&(this.answerFileList[r].lastModified=(new Date).getTime()),this.answerFileList&&!this.answerFileList[r].thumb&&(this.answerFileList[r].thumb=this.homeworkExamService.getThumbWithObj(this.answerFileList[r]));this.answerFileList&&this.answerFileList.length>0&&this.answerFileList.sort((r,b)=>r.lastModified&&b.lastModified?r.lastModified-b.lastModified:0)}getFileType(i){let o=(0,S.yY)(i),r=this.commonService.myTranslateInstant("lang_auto_hinh_anh")??"",b=this.commonService.myTranslateInstant("lang_auto_video")??"",W=this.commonService.myTranslateInstant("lang_auto_am_thanh")??"",K=this.commonService.myTranslateInstant("lang_auto_tai_lieu")??"";return"image"==o?r:"video"==o?b:"audio"==o?W:K}getFileIcon(i){let o=(0,S.yY)(i.mimes??"");return"image"==o?i.url??"images/jpg-icon.png":"video"==o?"images/video_sample.png":"audio"==o?"images/audio_sample.png":"pdf"==o?"images/ext_pdf_filetype_icon_176234.svg":"images/documents.png"}isShowGreenCheckbox(i){return!!this.rawAnswerFileList?.length&&null!=this.rawAnswerFileList.find(o=>o.url==i)}switchAttributeArray(i,o,r){if(!this.answerFileList?.length||this.answerFileList?.length<=o||this.answerFileList.length<=r||o<0||r<0)return;let b=this.castObj(this.answerFileList[o]);this.answerFileList[o]=this.castObj(this.answerFileList[r])??{},this.answerFileList[r]=b??{}}switchAttributeArrayInput(i,o){let r=Number(o)-1;r<=0?r=0:this.answerFileList&&r>=this.answerFileList?.length&&(r=this.answerFileList.length),this.answerFileList?.splice(r,0,this.answerFileList.splice(i,1)[0])}viewDetail(){let i=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/homework/switch-view-homework/"+this.answerObj?.id+"/"+this.homeworkHashId,"?backto="+i)}viewDetailHistory(i){let o=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/homework/switch-view-homework/"+this.obj?.homeworkObj?.id+"/"+this.homeworkHashId+"/"+i,"?backto="+o)}convertObjToArray(i){let o=[];for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&o.push(i[r]);return o}removeImg(i){let o=this.answerFileList?.filter(r=>r.url!==i);this.answerFileList=o,this.isNotChangeData=!1}submitHomework(){let i={homeworkHashId:this.obj?.homeworkObj?.hashId??"",studentId:this.currentChild?.id??0,files:JSON.stringify(this.answerFileList)};if("[]"==i.files)return this.showErrorSnack("lang_auto_bai_lam_chua_day_du_vui_long_thu_lai");this.isSubmit=!1,this.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1};let o=JSON.stringify({type:"homework",id:this.obj?.homeworkObj?.id,user:this.obj?.homeworkObj?.tenantId});this.frontAnswerService.apiFrontAnswerSaveObjPost(i,o).subscribe(r=>{1==r.success?(this.localStorageObject.clearAllCache(),this.isSubmit=!0,this.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},this.rawAnswerFileList=this.commonService.myClone(this.answerFileList),this.showSuccessSnack("lang_auto_ban_da_nop_bai_thanh_cong"),this.isNotChangeData=!0):(this.showErrorSnack(r.message??""),this.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},this.isSubmit=!1)},r=>{console.log("Err:"+r)})}copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.homeworkHashId}`}dialogGiveTeacherGifts(){const i="userRole=student&productType=gift&backTo="+encodeURIComponent(this.commonService.getCurrentUrlWithoutLocale());this.sAztDialogService.open(Y.D,{data:{homeworkHashId:this.homeworkHashId,queryString:i},width:"600px"})}fillData(){if(this.files=this.commonService.myParseJson(this.obj?.homeworkObj?.files??"")??[],null==this.files&&(this.files=new Array),this.obj?.answerObj&&this.obj.answerObj.files&&(this.answerFileList=this.commonService.myParseJson(this.obj.answerObj.files),this.rawAnswerFileList=this.commonService.myClone(this.answerFileList),this.isNotChangeData=!0),this.obj?.answerHistoryObjs){for(let o=0;o<this.obj.answerHistoryObjs.length;o++)this.obj.answerHistoryObjs[o].result&&(this.obj.answerHistoryObjs[o].note=this.commonService.willDeleteParseJson(this.obj.answerHistoryObjs[o].result??"").comment);this.answerHistory=this.obj.answerHistoryObjs??[];for(let o=0;o<this.answerHistory.length;o++){if(this.answerHistory[o].result){var i=this.commonService.willDeleteParseJson(this.answerHistory[o].resultNote??"");this.answerHistory[o].hideMark=!(!i||!i?.IsHideMark)&&i?.IsHideMark}if(this.answerHistory[o].files)if(this.answerHistory[o].files?.includes("<z>:")){let r=this.zipDataService.decodeContentGzip(this.answerHistory[o].files??"");this.answerHistory[o].fileParse=this.commonService.myParseJson(r)}else this.answerHistory[o].fileParse=this.commonService.myParseJson(this.answerHistory[o].files??"")}}this.obj?.answerObj&&(this.answerObj=this.obj.answerObj),this.answerObj&&this.answerObj.result&&(this.answerObj.note=null!=this.commonService.willDeleteParseJson(this.answerObj.result)?this.commonService.willDeleteParseJson(this.answerObj.result).comment:"",this.answerObj.txtCommentFont=this.commonService.willDeleteParseJson(this.commonService.willDeleteParseJson(this.answerObj.result).staticTextConfig)?.txtCommentFont,this.isHideMark=null!=this.commonService.willDeleteParseJson(this.answerObj.result)&&this.commonService.willDeleteParseJson(this.answerObj.result).hideMark),null!=this.answerObj?.resultNote&&null==this.answerObj?.note&&(this.answerObj.note=null!=this.commonService.willDeleteParseJson(this.answerObj.resultNote)?this.commonService.willDeleteParseJson(this.answerObj.resultNote).Note:""),this.currentChild=this.obj?.studentObj?this.obj.studentObj:{...this.userService.getUserObj(),id:0,classroomId:0,parentId:0,gender:0}}callSaveAction(){this.userInfoService.apiUserInfoSaveUserActionPost({actionType:"answer-homework",objectId:this.obj?.homeworkObj?.id,objectKey:this.obj?.homeworkObj.hashId}).subscribe(i=>{})}getData(){this.initStatusObj(),this.waitDestroy(this.frontHomeworkService.apiFrontHomeworkGetObjGet(this.homeworkHashId).subscribe(i=>{if(!i.success)return this.obj=i.data,this.obj?.homeworkObj&&this.callSaveAction(),this.errorStatusObj(i.message,!0);this.zipDataService.convertAnswersHistories(i.data),this.zipDataService.convertSubmittedAnswersObj(i.data?.answerObj),this.obj=i.data,this.obj?.homeworkObj&&this.callSaveAction(),this.obj?.homeworkObj&&this.zipDataService.convertHomeworkObj(this.obj?.homeworkObj);let o=this.commonService.myTranslateInstant("lang_auto_lop");return this.commonService.translateMetaData({title:this.obj?.homeworkObj?.name+`- ${o}: `+this.obj?.classroomObj?.name,description:this.obj?.homeworkObj?.content}),this.whenShowAnswer=this.obj?.homeworkObj?.whenShowAnswer??0,1==this.obj?.homeworkObj?.mustVerified&&this.userService.isNotLoginOrIsAnonymous()?(this.currentViewType="requiredLogin",this.sAztDialogService.open(re,{data:{type:"redirect_register"},restoreFocus:!1,backdropClass:"azt-backdrop",disableClose:!0}),this.successStatusObj()):this.obj?.studentObj?1==this.obj?.homeworkObj?.mustVerified&&1!=this.obj.studentObj.isVerified?(this.currentViewType="chooseStudent",this.successStatusObj()):(this.currentViewType="viewHomework",this.fillData(),void this.successStatusObj()):(this.currentViewType="chooseStudent",this.successStatusObj())}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"}),(0,G.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([i,o])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"/student/classroom/0",this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.userObj=this.userService.getUserObj(),this.getData()}),super.ngOnInit()}constructor(i,o,r,b,W,K,te,$,N,U,oe){var c;super(),c=this,this.activeRoute=i,this.myPdfService=o,this.localStorageObject=r,this.frontHomeworkService=b,this.frontAnswerService=W,this.apiUploadService=K,this.zipDataService=te,this.userService=$,this.homeworkExamService=N,this.sAztDialogService=U,this.userInfoService=oe,this.homeworkHashId="",this.backToLink="/student/classroom/0",this.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},this.currentViewType="requiredLogin",this.files=[],this.fileUploadQueue=[],this.uploadCount=0,this.countUpload=1,this.answerHistory=[],this.isSubmit=!1,this.isHideMark=!1,this.isNotChangeData=!1,this.whenShowAnswer=0,this.selectFile=function(){var z=(0,x.A)(function*(k){let m=k.target.files;try{for(let v in m)if("length"!=v&&"item"!=v)if((0,S.N6)(m[v].type))if((0,S.hD)(m[v].size)<=200)if(c.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},(0,S.Ev)(m[v].type)){let ie=yield c.myPdfService.getImageWithPdf(m[v]);c.answerFile=m?m[v]:c.answerFile,c.uploadFiles(ie,c.uploadCount),c.uploadCount+=1}else c.answerFile=m?m[v]:c.answerFile,c.answerFile&&(c.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},c.uploadFile(c.answerFile,c.uploadCount),c.uploadCount+=1);else c.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb");else c.showErrorSnack("lang_auto_error_file_no_support_homework_front_end");k.target.value="",c.isSubmit=!1}catch(v){alert("errors:"+v)}});return function(k){return z.apply(this,arguments)}}(),this.uploadFileVideo=function(){var z=(0,x.A)(function*(k,w){c.waitDestroy(c.apiUploadService.uploadToVimeoProgress("front_homework",k,{qrcode:void 0,homeworkId:c.obj?.homeworkObj?.id,teacherId:c.obj?.homeworkObj?.tenantId}).subscribe(m=>{m.isOnProgress?c.fileUploadQueue.hasOwnProperty(w)?(c.fileUploadQueue[w].uploadProgress=Math.round(m.percentage??0),c.fileUploadQueue[w].fileName=k.name):c.fileUploadQueue[w]={uploadProgress:0,fileName:k.name}:1==m.success?(delete c.fileUploadQueue[w],Array.isArray(c.answerFileList)||(c.answerFileList=[]),c.addFileWithProcess({...m.data,lastModified:k.lastModified}),c.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1}):m.hasOwnProperty("code")&&401==m.code?c.countUpload<=3&&setTimeout(()=>{c.countUpload++,c.uploadFileVideo(k,w)},15e3):(c.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},c.commonService.snackError("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau_ten: "+k.name))}))});return function(k,w){return z.apply(this,arguments)}}(),this.uploadFiles=function(){var z=(0,x.A)(function*(k,w){for(let p=0;p<k.length;p++){const m=k[p];yield(0,S.w4)(m).then(v=>{c.apiUploadService.uploadToCdnProgressForFrontendHomework(v).subscribe(ie=>{ie.type!=V.hv.UploadProgress&&(1==ie.success?(delete c.fileUploadQueue[w],Array.isArray(c.answerFileList)||(c.answerFileList=[]),c.addFileWithProcess({...ie.data,lastModified:v.lastModified})):(c.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},c.showErrorSnack("lang_auto_khong_upload_duoc_tep_tin_ten:"+m.name)))})}),p===k.length-1&&(c.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1})}});return function(k,w){return z.apply(this,arguments)}}(),this.uploadFile=function(){var z=(0,x.A)(function*(k,w){c.isSubmit=!1,((0,S.wu)(k.type)||(0,S.cZ)(k.type)||(0,S.JK)(k.type)||(0,S.Ev)(k.type)||(0,S.wd)(k.type)||(0,S.nL)(k.type)||(0,S.rl)(k.type))&&(0,S.w4)(k).then(p=>{c.apiUploadService.uploadToCdnProgressForFrontendHomework(p).subscribe(m=>{if(m.type!=V.hv.UploadProgress)1==m.success?(delete c.fileUploadQueue[w],Array.isArray(c.answerFileList)||(c.answerFileList=[]),c.addFileWithProcess({...m.data,lastModified:p.lastModified}),c.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1}):(c.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},c.showErrorSnack(c.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_ten",k.name,m.message??"none")));else{let v=(m.loaded??0)/(m.total??1)*100;c.fileUploadQueue.hasOwnProperty(w)?(c.fileUploadQueue[w].uploadProgress=v,c.fileUploadQueue[w].fileName=k.name):c.fileUploadQueue[w]={uploadProgress:0,fileName:k.name}}})})});return function(k,w){return z.apply(this,arguments)}}(),this.captureFile=function(){var z=(0,x.A)(function*(k){let m=k.target.files;try{for(let v in m)if("length"!=v&&"item"!=v)if((0,S.N6)(m[v].type))if((0,S.hD)(m[v].size)<=200)if(c.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},(0,S.Ev)(m[v].type)){let ie=yield c.myPdfService.getImageWithPdf(m[v]);c.answerFile=m?m[v]:c.answerFile,c.uploadFiles(ie,c.uploadCount),c.uploadCount+=1}else c.answerFile=m?m[v]:c.answerFile,c.answerFile&&(c.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},c.uploadFile(c.answerFile,c.uploadCount),c.uploadCount+=1);else c.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb");else c.showErrorSnack("lang_auto_error_file_no_support_homework_front_end");k.target.value="",c.isSubmit=!1}catch(v){alert(v)}});return function(k){return z.apply(this,arguments)}}(),this.answerFile=null,this.form=new g.gE({file_data:new g.MJ("",{nonNullable:!0,validators:[g.k0.required]}),file_capture:new g.MJ("",{nonNullable:!0,validators:[g.k0.required]}),file:new g.MJ("",{nonNullable:!0,validators:[g.k0.required]})})}}return(t=l).\u0275fac=function(i){return new(i||t)(e.rXU(s.nX),e.rXU(xe.C),e.rXU(Ie.G),e.rXU(ee.RC),e.rXU(ee.L5),e.rXU(Fe.T),e.rXU(ce.j),e.rXU(Te.R),e.rXU(De.Z),e.rXU(Ee.i),e.rXU(Re.fv))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-submit-homework"]],standalone:!0,features:[e.Vt3,e.aNF],decls:17,vars:4,consts:[["errorBox",""],["chooseStudent",""],["homeworkDetail",""],["viewHomework",""],["AddNewAnswerOrEditOldAnswer",""],["HomeworkResultTpl",""],["ViewHomeworkResult",""],["notOverTime",""],["notFileVideo",""],["myInput",""],["fileCapture",""],["notMarked",""],["notFileVideoOverTime",""],["notFileVideoResult",""],["fontText",""],[3,"headerBackToLink"],[1,"intro-x","mt-5"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"w-full"],[1,"text-center","p-3",2,"display","block"],["type","book",3,"size"],[1,"font-medium","mt-2"],[4,"ngIf"],[1,"box","mx-auto"],[1,"azt-select-child"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"mt-5","p-3"],[3,"selectStudentEvent","joinClassroomByType"],[1,"flex","items-center"],[1,"text-lg","font-medium","mr-auto"],[1,"w-auto","flex"],[3,"fileName","linkUrl"],[1,"mt-2"],["name","binary","size","16",3,"ngClass"],[1,"ml-1","font-bold","text-pirmary"],[1,"azt-info-homework","p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],["name","layout-grid","size","16",3,"ngClass"],[1,"ml-1","font-medium"],["class","mt-2",4,"ngIf"],[1,"flex","flex-col","sm:flex-row"],["class","time-create mr-10 mt-2",4,"ngIf"],[1,"time-deadline","mt-2"],["name","calendar-off","size","16",3,"ngClass"],["class","ml-1 font-medium",4,"ngIf"],[1,"azt-content-homework"],[3,"content"],[1,"attack-file","mt-5"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-12 lg:col-span-3",4,"ngFor","ngForOf"],[1,"p-3"],[4,"ngIf","ngIfElse"],[3,"previewFileEmit","dataAnswerHistory","dataHomeworkObj"],["name","user","size","16",3,"ngClass"],[1,"time-create","mr-10","mt-2"],["name","calendar","size","16",3,"ngClass"],[1,"col-span-12","lg:col-span-3"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-3","zoom-in"],["azt-track-service","submit-homework-JKHK228AaC",1,"flex","w-full","items-center",3,"click"],[1,"w-12","h-12","image-fit","lg:mr-1"],["class","rounded-md",3,"src",4,"ngIf"],[1,"ml-2","mt-0",2,"max-width","80%"],[1,"font-medium","truncate",3,"matTooltip"],[1,"text-slate-500","text-xs","mt-0.5"],[1,"rounded-md",3,"src"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md","pt-4"],[1,"flex","items-center","justify-center","mt-5"],["azt-track-service","submit-homework-SVOZH1hPhT","class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],["azt-track-service","submit-homework-srzM6zkJC9X","class","btn w-24 btn-danger",3,"disabled","click",4,"ngIf"],["class","row ml-0 mr-0",4,"ngIf"],["class","text-center mt-4 mb-4",4,"ngIf"],["class","grid grid-cols-12 gap-1 mt-1 mb-1 pb-3 pt-3 px-3 attach-container",4,"ngIf"],["class","grid grid-cols-10 gap-5 pl-4 pr-5",4,"ngIf"],[1,"row","ml-0","mr-0"],[1,"col-12"],[1,"alert","alert-danger","text-center",2,"margin-bottom","1.25rem"],[1,"text-center","mt-4","mb-4"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","gap-1","mt-1","mb-1","pb-3","pt-3","px-3","attach-container"],["class","col-span-6 md:col-span-4 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-4","lg:col-span-2"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","height","20px","background-color","#1e40af",3,"value"],[1,"text-md","font-medium","text-success"],[1,"grid","grid-cols-10","gap-5","pl-4","pr-5"],["class","col-span-5 md:col-span-2 relative cursor-pointer",4,"ngFor","ngForOf"],[1,"col-span-5","md:col-span-2","relative","cursor-pointer"],["azt-track-service","submit-homework-U3JvmWJWyL","_target","blank",1,"image-fit","h-32",3,"click"],["class","preview-video rounded-md relative overflow-hidden",4,"ngIf","ngIfElse"],[1,"flex","items-center","rounded-md","border","border-slate-200","dark:border-darkmode-400","overflow-hidden",2,"border-top-left-radius","0","border-top-right-radius","0"],["azt-track-service","submit-homework-oCv304vr_j",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none",3,"click"],["name","chevron-left","size","20"],["type","text","type","number","min","1",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"keyup.enter","change","id","max","value","placeholder"],["azt-track-service","submit-homework-sWozCmSRRn",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none",3,"click"],["name","chevron-right","size","20"],["azt-track-service","submit-homework-OKXWiY1X2a","class","tooltip w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-danger right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],[1,"preview-video","rounded-md","relative","overflow-hidden"],["preload","metadata",1,"rounded-md","border","border-slate-200","dark:border-darkmode-400",2,"height","8rem","width","100%","object-fit","cover","border-bottom-left-radius","0","border-bottom-right-radius","0"],["type","video/mp4",3,"src"],[1,"azt-fill"],[1,"azt-fill-icon"],["name","video","size","24"],["alt","Azota-Image-Loading",1,"border","border-slate-200","dark:border-darkmode-400","rounded-md",2,"border-bottom-left-radius","0","border-bottom-right-radius","0","object-fit","contain",3,"src"],["azt-track-service","submit-homework-OKXWiY1X2a",1,"tooltip","w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-danger","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","x","size","16"],[1,"px-4","flex","items-center","justify-center","cursor-pointer","relative",2,"margin-top","80px"],["name","upload","size","16",3,"ngClass"],[1,"text-primary","mr-1"],["id","horizontal-form-1","type","file","id","inp_hidden","multiple","",1,"w-full","h-full","top-0","left-0","absolute","opacity-0","cursor-pointer",3,"change"],[1,"px-4","pb-4","mt-1","flex","items-center","justify-center","cursor-pointer","relative"],[1,"block","text-slate-600","dark:text-slate-500"],["class","row ml-0 mr-0",4,"ngIf","ngIfElse"],["azt-track-service","submit-homework-MxLAiMtc7R","_target","blank",1,"image-fit","h-32",3,"click"],["disabled","",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none"],["type","text","type","number","min","1","disabled","",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value","readonly","placeholder"],["name","chevron-right","size","16"],[1,"rounded-md","border-bottom-0",3,"src"],["alt","Azota-Image-Loading",1,"rounded-md","w-fit",2,"border-bottom-left-radius","0","border-bottom-right-radius","0",3,"src"],[1,"alert","alert-danger","text-center","mt-2","ml-5","mr-5",2,"margin-bottom","1.25rem"],["azt-track-service","submit-homework-SVOZH1hPhT",1,"btn","w-24","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["azt-track-service","submit-homework-srzM6zkJC9X",1,"btn","w-24","btn-danger",3,"click","disabled"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","dark:border-darkmode-400","rounded-md","pt-4"],[1,"flex"],[1,"text-md","ml-3","font-medium","text-dark"],["class","grid grid-cols-10 gap-5 pl-4 pr-5 mt-3",4,"ngIf"],["class","alert alert-danger p-3 mt-3 mb-3","style","margin-bottom: 1.25rem",4,"ngIf"],[3,"ngIf"],[1,"grid","grid-cols-10","gap-5","pl-4","pr-5","mt-3"],["azt-track-service","submit-homework-r1g0ks59mJK","_target","blank",1,"image-fit","h-32","border","border-slate-200","dark:border-darkmode-400","rounded-md",2,"border-bottom","0","border-bottom-left-radius","0","border-bottom-right-radius","0",3,"click"],["type","text","type","number","min","1","disabled","",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value","placeholder"],[1,"alert","alert-danger","p-3","mt-3","mb-3",2,"margin-bottom","1.25rem"],[1,"flex","mt-3"],["azt-track-service","submit-homework-wmQuG3uTIJb",2,"color","rgba(0, 167, 208, 1)","cursor","pointer",3,"click"],[1,"grid","grid-cols-4","gap-3","mt-3","auto-cols-auto",2,"margin","16px !important"],[1,"col-span-4","sm:col-span-1","md:col-span-1","relative","text-center","border-2","border-dashed","dark:border-darkmode-400","p-8","content-homework"],["class","mb-0",4,"ngIf"],[1,"col-span-4","sm:col-span-3","md:col-start-2","md:col-end-4","relative","border-2","border-dashed","dark:border-darkmode-400","p-3"],[1,"text-md","ml-3","font-medium","text-dark","title"],[1,"mb-0"],[3,"mark"],["class","content-homework pt-3 text-writing",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-bold",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-beautiful",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-italy",3,"innerHTML",4,"ngIf"],[1,"content-homework","pt-3","text-writing",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-bold",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-beautiful",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-italy",3,"innerHTML"],["id","azt-view-comment",1,"pt-3",3,"innerHTML"]],template:function(i,o){1&i&&(e.j41(0,"student-layout",15)(1,"div",16),e.DNE(2,He,1,1,"ng-container",17)(3,Ae,1,1,"ng-container",17)(4,Le,1,1,"ng-container",17),e.k0s()(),e.DNE(5,Ge,7,5,"ng-template",null,0,e.C5r)(7,ze,6,4,"ng-template",null,1,e.C5r)(9,$e,12,9,"ng-template",null,2,e.C5r)(11,Ze,31,22,"ng-template",null,3,e.C5r)(13,Ct,7,4,"ng-template",null,4,e.C5r)(15,At,12,12,"ng-template",null,5,e.C5r)),2&i&&(e.Y8G("headerBackToLink",o.backToLink),e.R7$(2),e.Y8G("ngIf",o.statusObj.errorMessage),e.R7$(),e.Y8G("ngIf","chooseStudent"==o.currentViewType&&(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.hashId)),e.R7$(),e.Y8G("ngIf","viewHomework"==o.currentViewType&&(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.hashId)))},dependencies:[me.j,de.m,ue.l,ae.d,he.x,Se,Me.R,u.D,_.MD,_.YU,_.Sq,_.bT,_.T3,g.X1,s.iI,g.YN,F.nf,F.wp,F.Vs,y.s,pe.oV,C.flO,C.WGl,M.L,F._y,F.JI,F.bH,F.Qu,F.hx,d.Id,h.k],styles:['@font-face{font-family:font_chu_dep;src:url(https://239114911.e.cdneverest.net/cdnazota/azt-assets/core-mod-assets/fonts/HP0015HB.ttf)}@font-face{font-family:font_chu_in;src:url(https://239114911.e.cdneverest.net/cdnazota/azt-assets/core-mod-assets/fonts/Roboto-Thin.ttf)}@font-face{font-family:font_chu_in_nghieng;src:url(https://239114911.e.cdneverest.net/cdnazota/azt-assets/core-mod-assets/fonts/MyriadPro-It.otf)}@font-face{font-family:font_chu_in_dam;src:url(https://239114911.e.cdneverest.net/cdnazota/azt-assets/core-mod-assets/fonts/MyriadPro-BoldIt.otf)}.text-writing[_ngcontent-%COMP%]{font-family:font_chu_in!important;font-weight:700}.text-writing-beautiful[_ngcontent-%COMP%]{font-family:font_chu_dep!important}.text-writing-italy[_ngcontent-%COMP%]{font-family:font_chu_in_nghieng!important}.text-writing-bold[_ngcontent-%COMP%]{font-family:font_chu_in_dam!important}.content-homework[_ngcontent-%COMP%]{color:red;line-height:1.4;font-size:20px}.title[_ngcontent-%COMP%]{position:absolute;top:-11px;background:#fff}.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:20px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']}),l})();var ge=a(55465);let fe=(()=>{var t;class l extends T.H{getData(i,o){this.initStatusObj(),o?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,o).subscribe(r=>{1==r.success?(this.switchViewHomework(r),this.successStatusObj()):this.errorStatusObj(r.message??"",!0)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,i).subscribe(r=>{1==r.success?(this.switchViewHomework(r),this.successStatusObj()):this.errorStatusObj(r.message??"",!0)})}switchViewHomework(i){if(i){this.zipDataService.convertSubmittedAnswersHistoryObj(i.data?.answerObj);let o=i.data,r=this.castObj(o?.answerObj);null!=r&&(this.commonService.myParseJson(r?.result??""),this.commonService.myNavigationWithQueryString(this.historyId?`/homework/view-homework-new/${r.id}/${this.homeworkHashId}/${this.historyId}`:`/homework/view-homework-new/${r.id}/${this.homeworkHashId}`,`?backto=${encodeURIComponent(this.backToLink)}`))}}ngOnInit(){this.classliveUrl=this.envService.getEnvValue("classliveUrl")??"";let i=this.commonService.getMyParam(this.activeRoute,"id")??"";const o=parseInt(i,10);if(this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.commonService.getMyParam(this.activeRoute,"history_id")){let r=this.commonService.getMyParam(this.activeRoute,"history_id")??"";this.historyId=parseInt(r,10),this.getData(o,this.historyId)}else this.getData(o);this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(i,o,r,b,W){super(),this.activeRoute=i,this.frontAnswerService=o,this.frontAnswerHistoryService=r,this.zipDataService=b,this.envService=W,this.backToLink="",this.homeworkHashId="",this.historyId=0,this.classliveUrl=""}}return(t=l).\u0275fac=function(i){return new(i||t)(e.rXU(s.nX),e.rXU(ee.L5),e.rXU(ee.Ze),e.rXU(ce.j),e.rXU(ge.t))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-switch-view-homework"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[_.MD,g.X1,s.iI,g.YN,y.s,C.flO,M.L,d.Id,h.k],encapsulation:2}),l})();var be=a(69223),Bt=a(14558),Gt=a(68323),we=a(58112);const zt=t=>({height:t});function $t(t,l){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",22)(2,"azt-mark-note",23,0),e.bIt("handleBackLink",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.goBack())}),e.k0s()(),e.bVm()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(5,zt,n.sizeMarkEditor.height+"px")),e.R7$(),e.Y8G("dataMarkNote",n.jsonData)("modeView","student")("showBackLink",!0)("showCopyLinkTeacher",!0)}}function Nt(t,l){if(1&t&&(e.j41(0,"div",24)(1,"div",25),e.nrm(2,"azt-check-mark",26),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("mark",null==n.result||null==n.result.answerObj?null:n.result.answerObj.point)}}let ve=(()=>{var t;class l extends T.H{getSizeMarkEditor(i){this.sizeMarkEditor=i}goBack(){""!=this.backToLink&&null!=this.backToLink?this.commonService.myNavigationBySpecialQueryString(this.backToLink):this.commonService.myNavigation("/bai-tap/"+this.homeworkHashId)}fillData(i){if(i){if(this.zipDataService.convertSubmittedAnswersHistoryObj(i.data?.answerObj),this.result=i.data,this.files=this.commonService.myParseJson(i.data?.answerObj?.files??"")??[],null!==this.files)for(let $=0;$<this.files.length;$++)this.files&&(this.files[$].url=this.sAztCommonCdnService.getMyCdn(this.files[$].url??""),this.files[$].thumb=this.sAztCommonCdnService.getMyCdn(this.files[$].thumb??""));let o=this.castObj(this.result?.answerObj),r=this.result?.studentObj,b=this.result?.classroomObj,W=this.result?.homeworkObj?{...this.result.homeworkObj,permissionObj:{}}:void 0,K=this.commonService.myParseJson(o?.result??""),te=this.castJsonToObj(this.result?.answerObj?.resultNote??"");this.commentExercise=te?.Note??"",this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=o,this.jsonData.student_obj=r,this.jsonData.classroom_obj=b,this.jsonData.homework_obj=W,K&&K.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=K.hideMark),this.dataMarkNote=this.jsonData}}getData(i,o){this.initStatusObj(),this.errorMessage="",o?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,o).subscribe(r=>{1==r.success?(this.fillData(r),this.successStatusObj()):(this.errorStatusObj(r.message??"",!0),this.errorMessage=r?.message)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,i).subscribe(r=>{1==r.success?(this.fillData(r),this.successStatusObj()):(this.errorStatusObj(r.message??"",!0),this.errorMessage=r.message)})}copyLinkToClipboard(){const i=this.getMyParam(this.activeRoute,"id"),o=this.getMyParam(this.activeRoute,"studentId");return`${this.commonService.getCurrentDomainWithLanguage()}/admin/homework/switch-mark-exercise/${i}/${this.homeworkHashId}/${o??0}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnInit(){super.ngOnInit(),this.commonService.compareDeviceScreen(768)&&(document.body.style.overflowY="hidden");let o=this.commonService.getMyParam(this.activeRoute,"id")??"";const r=parseInt(o,10);if(this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.commonService.getMyParam(this.activeRoute,"history_id")){let b=this.commonService.getMyParam(this.activeRoute,"history_id")??"";const W=parseInt(b,10);this.getData(r,W)}else this.getData(r);this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"})}ngOnDestroy(){document.body.style.overflowY="auto"}constructor(i,o,r,b,W){super(),this.activeRoute=i,this.frontAnswerService=o,this.frontAnswerHistoryService=r,this.sAztCommonCdnService=b,this.zipDataService=W,this.homeworkHashId="",this.isMarked=!1,this.jsonData={},this.backToLink="",this.dataMarkNote={},this.files=[],this.sizeMarkEditor={width:200,height:800},this.commentExercise="",this.handleIframe=K=>{if("MNoteLoadComplete"==K.data){const te=document.getElementById("mNote"),$=te?te.contentWindow:null;if(null!==$){let N=this.castObj(this.result?.answerObj);if(null!=N){let w=this.commonService.willDeleteParseJson(N?.result??"");if(null!=w){for(let m=0;m<w.pages.length;m++)w.pages[m].backgroundImage&&(w.pages[m].backgroundImage=this.sAztCommonCdnService.getMyCdn(w.pages[m].backgroundImage)),w.pages[m].draw&&(w.pages[m].draw=this.sAztCommonCdnService.getMyCdn(w.pages[m].draw));w=JSON.stringify(w),N.result=w}let p=this.commonService.willDeleteParseJson(N?.files??"");if(null!=p){for(let m=0;m<p.length;m++)p[m].url&&(p[m].url=this.sAztCommonCdnService.getMyCdn(p[m].url)),p[m].thumb&&(p[m].thumb=this.sAztCommonCdnService.getMyCdn(p[m].thumb));p=JSON.stringify(p),N.files=p}}let U=this.result?.studentObj,oe=this.result?.classroomObj,c=this.result?.homeworkObj,z=this.commonService.willDeleteParseJson(N?.result??""),k=!(!z||!z.hasOwnProperty("hideMark"))&&z.hideMark;if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let w=0;w<(this.jsonData.pages?.length??0);w++)this.jsonData.pages?.[w].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[w].backgroundImage=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[w].backgroundImage??"")),this.jsonData.pages?.[w].hasOwnProperty("draw")&&(this.jsonData.pages[w].draw=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[w].draw??""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=N,this.jsonData.student_obj=U,this.jsonData.classroom_obj=oe,this.jsonData.homework_obj=c,this.jsonData.hideMark=k,$.postMessage(this.jsonData,"*");else{let w=[];this.files.forEach(p=>{w.push({backgroundImage:p.url})}),$.postMessage({cmd:"initMNote",pages:w,answer_obj:N,student_obj:U,classroom_obj:oe,homework_obj:c,mode:"view",hideMark:k},"*")}}}}}}return(t=l).\u0275fac=function(i){return new(i||t)(e.rXU(s.nX),e.rXU(ee.L5),e.rXU(ee.Ze),e.rXU(we.c),e.rXU(ce.j))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-homework-new"]],standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:21,consts:[["aztMarkNote",""],[1,"content",2,"padding","0 12px"],[1,"grid","grid-cols-12","gap-3","mt-3"],[4,"ngIf"],[1,"col-span-12","md:col-span-4","mark-general"],[1,"box"],[1,"p-2"],[1,"box-head"],[1,"font-medium"],[1,"flex","items-center","mt-2"],[1,"info-student","flex","items-center"],[3,"nameCreateAvatar","size"],[1,"info","ml-2"],[1,"text-md"],[1,"text-xs"],["class","score ml-auto flex items-center",4,"ngIf"],[1,"comment","mt-3"],[1,"font-medium","text-md"],[1,"comment-editor","mt-2"],[3,"ngModelChange","apiKey","ngModel","disabled","init"],[1,"mt-3","block","md:hidden"],["azt-track-service","view-homework-new-Ak95y0gQ__",1,"btn","btn-secondary","w-full",3,"click"],[1,"col-span-12","md:col-span-8","mark-editor",3,"ngStyle"],[3,"handleBackLink","dataMarkNote","modeView","showBackLink","showCopyLinkTeacher"],[1,"score","ml-auto","flex","items-center"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","p-2","text-danger","text-center","font-medium",2,"width","60px"],[3,"mark"]],template:function(i,o){1&i&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,$t,4,7,"ng-container",3),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h3",8),e.EFF(8),e.k0s(),e.j41(9,"div",9)(10,"div",10),e.nrm(11,"azt-create-avatar",11),e.j41(12,"div",12)(13,"p",13),e.EFF(14),e.k0s(),e.j41(15,"p",14),e.EFF(16),e.k0s()()(),e.DNE(17,Nt,3,1,"div",15),e.k0s()(),e.j41(18,"div",16)(19,"p",17),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s(),e.j41(22,"div",18)(23,"editor",19),e.nI1(24,"getTinyMceKey"),e.nI1(25,"getTinyMceConfig"),e.mxI("ngModelChange",function(b){return e.DH7(o.commentExercise,b)||(o.commentExercise=b),b}),e.k0s()()(),e.j41(26,"div",20)(27,"button",21),e.bIt("click",function(){return o.goBack()}),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()()()()()()),2&i&&(e.R7$(2),e.Y8G("ngIf",o.jsonData.answer_obj),e.R7$(6),e.SpI(" ",null==o.result||null==o.result.homeworkObj?null:o.result.homeworkObj.name," "),e.R7$(3),e.Y8G("nameCreateAvatar",null==o.result||null==o.result.studentObj?null:o.result.studentObj.fullName)("size",35),e.R7$(3),e.SpI(" ",null==o.result||null==o.result.studentObj?null:o.result.studentObj.fullName," "),e.R7$(2),e.SpI(" ",null==o.result||null==o.result.classroomObj?null:o.result.classroomObj.name," "),e.R7$(),e.Y8G("ngIf",!o.dataMarkNote.hideMark),e.R7$(3),e.SpI(" ",e.bMT(21,13,"lang_auto_nhan_xet")," "),e.R7$(3),e.FS9("apiKey",e.bMT(24,15,"")),e.R50("ngModel",o.commentExercise),e.Y8G("disabled",!0)("init",e.bMT(25,17,"student_homework")),e.R7$(5),e.SpI(" ",e.bMT(29,19,"lang_auto_quay_lai")," "))},dependencies:[F.Hw,F.yc,be.sv,be.xn,Bt.i,Gt.p,u.D,_.MD,_.bT,_.B3,g.X1,g.BC,s.iI,g.YN,g.vS,F.wp,y.s,C.flO,M.L,d.Id,h.k],styles:[".btn-score[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}.choose-score[_ngcontent-%COMP%]{max-width:80%;margin-left:auto;margin-right:auto}.toolbar-list[_ngcontent-%COMP%]{width:100%;padding:5px;position:absolute;top:0;left:0;display:flex;align-items:center;border-bottom-left-radius:0;border-bottom-right-radius:0}.btn-icon[_ngcontent-%COMP%]{padding:10px;min-width:auto;line-height:initial}.toolbar-item[_ngcontent-%COMP%]{margin:0 3px}.toolbar-item[_ngcontent-%COMP%]:first-child{margin-left:0}.btn-icon-child[_ngcontent-%COMP%]{padding:5px}.azt-toolbar-active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(var(--color-slate-200)/var(--tw-bg-opacity))}  .dark .azt-toolbar-active{--tw-bg-opacity: 1;background-color:rgb(var(--color-darkmode-200)/var(--tw-bg-opacity))}@media screen and (max-width: 768px){.choose-score[_ngcontent-%COMP%]{max-width:80%}}"]}),l})();var Ut=a(18718),Vt=a(64160),Yt=a(39471),_e=a(17818);const Xt=()=>({"mr-1":!0});function Wt(t,l){if(1&t&&(e.j41(0,"h4",14),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Lme("",null==n.result||null==n.result.studentObj?null:n.result.studentObj.fullName,", ",null==n.result||null==n.result.classroomObj?null:n.result.classroomObj.name,"")}}function Jt(t,l){if(1&t&&e.nrm(0,"azt-loading-effect",15),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function Kt(t,l){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,1,n.errorMessage))}}function Qt(t,l){if(1&t&&(e.j41(0,"div",21),e.nrm(1,"iframe",22),e.nI1(2,"safe"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("src",e.bMT(2,1,n.whiteListMNoteIframeSrc),e.f$h)}}function Zt(t,l){if(1&t&&(e.j41(0,"div")(1,"div",16),e.DNE(2,Kt,4,3,"div",17),e.k0s()(),e.DNE(3,Qt,3,3,"div",18)),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",""!=n.errorMessage),e.R7$(),e.Y8G("ngIf",""==n.errorMessage)}}let ke=(()=>{var t;class l extends T.H{goBack(){this.commonService.myNavigation(""!=this.backToLink&&null!=this.backToLink?this.backToLink:"/bai-tap/"+this.homeworkHashId)}fillData(i){if(i){if(this.zipDataService.convertSubmittedAnswersHistoryObj(i.data?.answerObj),this.result=i.data,this.files=this.commonService.myParseJson(i.data?.answerObj?.files??"")??[],null!==this.files)for(let r=0;r<this.files?.length;r++)this.files&&(this.files[r].url=this.sAztCommonCdnService.getMyCdn(this.files[r].url??""),this.files[r].thumb=this.sAztCommonCdnService.getMyCdn(this.files[r].thumb??""));if(i.data?.answerObj?.confirmedAt){this.isMarked=!0;var o=this.commonService.myParseJson(this.sAztCommonCdnService.getMyCdn(i?.data?.answerObj?.result??""));o&&(this.jsonData=o,null===this.jsonData&&(this.isMarked=!1))}}}getData(i,o){this.initStatusObj(),this.errorMessage="",o?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,o).subscribe(r=>{1==r.success?(this.fillData(r),this.successStatusObj()):(this.errorStatusObj(r.message??"",!0),this.errorMessage=r?.message)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,i).subscribe(r=>{1==r.success?(this.fillData(r),this.successStatusObj()):(this.errorStatusObj(r.message??"",!0),this.errorMessage=r.message)})}copyLinkToClipboard(){const i=this.getMyParam(this.activeRoute,"id"),o=this.getMyParam(this.activeRoute,"studentId");return`${this.commonService.getCurrentDomainWithLanguage()}/admin/homework/switch-mark-exercise/${i}/${this.homeworkHashId}/${o??0}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnInit(){super.ngOnInit(),this.whiteListMNoteIframeSrc=this.envService.getEnvValue("classliveUrl")??"";let i=this.commonService.getMyParam(this.activeRoute,"id")??"";const o=parseInt(i,10);if(this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.commonService.getMyParam(this.activeRoute,"history_id")){let r=this.commonService.getMyParam(this.activeRoute,"history_id")??"";const b=parseInt(r,10);this.getData(o,b)}else this.getData(o);this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"})}constructor(i,o,r,b,W,K){super(),this.activeRoute=i,this.frontAnswerService=o,this.frontAnswerHistoryService=r,this.sAztCommonCdnService=b,this.zipDataService=W,this.envService=K,this.homeworkHashId="",this.isMarked=!1,this.whiteListMNoteIframeSrc="",this.backToLink="",this.files=[],this.handleIframe=te=>{if("MNoteLoadComplete"==te.data){const $=document.getElementById("mNote"),N=$?$.contentWindow:null;if(null!==N){let U=this.result?.hasOwnProperty("answerObj")?this.castObj(this.result.answerObj)??void 0:void 0;if(this.result?.hasOwnProperty("answerObj")){let p=this.commonService.willDeleteParseJson(U?.result??"");if(null!=p){for(let v=0;v<p.pages?.length;v++)p.pages[v].backgroundImage&&(p.pages[v].backgroundImage=this.sAztCommonCdnService.getMyCdn(p.pages[v].backgroundImage)),p.pages[v].draw&&(p.pages[v].draw=this.sAztCommonCdnService.getMyCdn(p.pages[v].draw));p=JSON.stringify(p),null!=U&&(U.result=p)}let m=this.commonService.willDeleteParseJson(U?.files??"");if(null!=m){for(let v=0;v<m?.length;v++)m[v].url&&(m[v].url=this.sAztCommonCdnService.getMyCdn(m[v].url)),m[v].thumb&&(m[v].thumb=this.sAztCommonCdnService.getMyCdn(m[v].thumb));m=JSON.stringify(m),null!=U&&(U.files=m)}}let oe=this.result?.hasOwnProperty("studentObj")?this.result.studentObj:void 0,c=this.result?.hasOwnProperty("classroomObj")?this.result.classroomObj:void 0,z=this.result?.hasOwnProperty("homeworkObj")?this.result.homeworkObj:void 0,k=this.commonService.willDeleteParseJson(U?.result??""),w=!(!k||!k.hasOwnProperty("hideMark"))&&k.hideMark;if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let p=0;p<(this.jsonData.pages?.length??0);p++)this.jsonData.pages?.[p].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[p].backgroundImage=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[p].backgroundImage??"")),this.jsonData.pages?.[p].hasOwnProperty("draw")&&(this.jsonData.pages[p].draw=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[p].draw??""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=U,this.jsonData.student_obj=oe,this.jsonData.classroom_obj=c,this.jsonData.homework_obj=z,this.jsonData.hideMark=w,N.postMessage(this.jsonData,"*");else{let p=[];this.files.forEach(m=>{p.push({backgroundImage:m.url})}),N.postMessage({cmd:"initMNote",pages:p,answer_obj:U,student_obj:oe,classroom_obj:c,homework_obj:z,mode:"view",hideMark:w},"*")}}}}}ngOnDestroy(){window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return(t=l).\u0275fac=function(i){return new(i||t)(e.rXU(s.nX),e.rXU(ee.L5),e.rXU(ee.Ze),e.rXU(we.c),e.rXU(ce.j),e.rXU(ge.t))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-exercise"]],standalone:!0,features:[e.Vt3,e.aNF],decls:19,vars:13,consts:[["menu","matMenu"],["doneLoading",""],["id","markContainer",1,"maxW1000","pt-3"],[1,"flex","justify-between","titleRow"],[1,"col","center-row"],[1,"btn","btn-sm","btn-outline-secondary","border-none","border-0",3,"click","matTooltip"],["name","chevron-left","size","24",3,"ngClass"],[1,"col","center-row",2,"justify-content","center"],["class","studentInfo","style","padding-right: 10px",4,"ngIf"],[1,"col","center-row",2,"justify-content","flex-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["name","ellipsis-vertical","size","24"],["azt-track-service","view-homework-Q8Fmec__8U","mat-menu-item","",3,"click","cdkCopyToClipboard"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"studentInfo",2,"padding-right","10px"],[3,"currentStatusObj"],[1,"flex","justify-center","py-5"],["class","w-full text-center",4,"ngIf"],["class","card-box listPhotos","style","overflow: hidden",4,"ngIf"],[1,"w-full","text-center"],[1,"alert","text-danger"],[1,"card-box","listPhotos",2,"overflow","hidden"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(i,o){if(1&i){const r=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"button",5),e.nI1(4,"mytranslate"),e.bIt("click",function(){return e.eBV(r),e.Njj(o.goBack())}),e.nrm(5,"lucide-icon",6),e.k0s()(),e.j41(6,"div",7),e.DNE(7,Wt,2,2,"h4",8),e.k0s(),e.j41(8,"div",9)(9,"button",10),e.nrm(10,"lucide-icon",11),e.k0s(),e.j41(11,"mat-menu",null,0)(13,"button",12),e.bIt("click",function(){return e.eBV(r),e.Njj(o.showCopySuccess())}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()(),e.DNE(16,Jt,1,1,"azt-loading-effect",13)(17,Zt,4,2,"ng-template",null,1,e.C5r),e.k0s()}if(2&i){const r=e.sdS(12),b=e.sdS(18);e.R7$(3),e.FS9("matTooltip",e.bMT(4,8,"lang_auto_quay_lai")),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,Xt)),e.R7$(2),e.Y8G("ngIf",null==o.result?null:o.result.answerObj),e.R7$(2),e.Y8G("matMenuTriggerFor",r),e.R7$(4),e.Y8G("cdkCopyToClipboard",o.copyLinkToClipboard()),e.R7$(),e.JRh(e.bMT(15,10,"lang_homework_homework_frontend_utils_copy_send_teacher")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",b)}},dependencies:[Ut.K,_.MD,_.YU,_.bT,g.X1,s.iI,g.YN,F.wp,y.s,Vt.dF,Yt.iY,_e.kk,_e.fb,_e.Cp,pe.oV,C.flO,C.WGl,M.L,F.JI,d.Id,h.k],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}.center-row[_ngcontent-%COMP%]{display:flex;align-items:center}.titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;margin:0;color:#fff}.titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}.titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),l})();const qt=[{path:"",component:j,canActivate:[O.L],children:[{path:":hash_id",component:Lt},{path:"view-homework/:id/:hash_id",component:ke},{path:"view-homework/:id/:hash_id/:history_id",component:ke},{path:"switch-view-homework/:id/:hash_id",component:fe},{path:"switch-view-homework/:id/:hash_id/:history_id",component:fe},{path:"view-homework-new/:id/:hash_id",component:ve},{path:"view-homework-new/:id/:hash_id/:history_id",component:ve}]}];let en=(()=>{var t;class l{}return(t=l).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[s.iI.forChild(qt),s.iI,D.XE]}),l})()},34158:(Q,B,a)=>{"use strict";a.d(B,{L:()=>T});var s=a(48891),D=a(36484),O=a(39307);let T=(()=>{var _;class g{constructor(C,M){this.userService=C,this.redirectService=M}canActivate(C,M){return!!this.userService.isLogin()||(this.redirectService.redirectLoginAnonymous(M.url),!1)}canActivateChild(C,M){return this.canActivate(C,M)}canLoad(C){const M=`/${C.path}`;return!!this.userService.isLogin()||(this.redirectService.redirectLoginByReturnUrl(M),!1)}}return(_=g).\u0275fac=function(C){return new(C||_)(s.KVO(D.R),s.KVO(O.m))},_.\u0275prov=s.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),g})()},10296:(Q,B,a)=>{"use strict";a.d(B,{R:()=>y});var s=a(43277),O=a(18148),T=a(48891),_=a(52509),g=a(543);let y=(()=>{var C;class M{constructor(h,e){this.mobileWebviewService=h,this.commonService=e}shareFileWithBlob(h,e){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return s.saveAs(h,e);if(this.commonService.isMobileWebview(void 0)){O.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let j=new FileReader;j.readAsDataURL(h),j.onloadend=()=>{let x=j.result;"string"==typeof x&&(this.mobileWebviewService.sendShareFileBase64(e,String(x)),O.L.closeLoadingEffect(100))}}else s.saveAs(h,e)}shareFileWithBase64(h,e){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return s.saveAs(h,e);this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(e,h):s.saveAs(h,e)}}return(C=M).\u0275fac=function(h){return new(h||C)(T.KVO(_.f),T.KVO(g.R))},C.\u0275prov=T.jDH({token:C,factory:C.\u0275fac,providedIn:"root"}),M})()},18148:(Q,B,a)=>{"use strict";a.d(B,{L:()=>s});let s=(()=>{var D;class O{static openLoadingEffect(_){O.getDomElement().style.display="flex",setTimeout(()=>{O.changeMsgLoadingEffect(_)},50)}static closeLoadingEffect(_){return new Promise(g=>{setTimeout(()=>{const y=O.getDomElement();y&&(y.style.display="none"),g(!0)},_)})}static changeMsgLoadingEffect(_){O.getDomContent().innerText=_}static getDomContent(){return document.getElementById(O.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(O.idComponent)??this.createDomElement()}static createDomElement(){const _=document.createElement("div");return _.id=O.idComponent,_.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),_.style.display="none",_.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${O.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(_),_}}return(D=O).idComponent="azt-status-loading-effect",D.idStatusContent="azt-status-loading-effect-content",O})()},2915:(Q,B,a)=>{"use strict";a.d(B,{U:()=>V});var s=a(59640),D=a(54460),O=a(10936),T=a(65162),_=a(21656),g=a(15343),y=a(70050),C=a(5502),M=a(36894),d=a(48891),h=a(89163);const e=["aztDialogContentBox"],j=["*"],x=(G,S)=>({"width.px":G,"height.%":100,"--scrollbar-size":S});let V=(()=>{var G;class S extends s.H{checkHeightOfElement(){if(!this.aztDialogContentBox)return;var E=this.aztDialogContentBox.nativeElement.querySelector("."+this.contentBoxClassName);if(!E)return;let H=Math.round(window.innerHeight*this.defaultHeight/100),I=E.getBoundingClientRect().height+1,F=!(I<H),R=(I<H?I:H)+"px",A="72vh";F!=this.isScroll&&(this.isScroll=F),this.aztDialogContentBox.nativeElement.style.height!=R&&(this.aztDialogContentBox.nativeElement.style.height=R),this.aztDialogContentBox.nativeElement.style.maxHeight!=A&&(A=R),this.minHeight&&(this.aztDialogContentBox.nativeElement.style.minHeight=this.minHeight)}ngAfterViewChecked(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.checkHeightOfElement()},0)})}constructor(E){super(),this.ngZone=E,this.defaultHeight=72,this.defaultWidth=0,this.minHeight=void 0,this.isScroll=!1,this.contentBoxClassName="azt-mat-dialog-content-box"}}return(G=S).\u0275fac=function(E){return new(E||G)(d.rXU(d.SKi))},G.\u0275cmp=d.VBU({type:G,selectors:[["azt-mat-dialog-content"]],viewQuery:function(E,H){if(1&E&&d.GBs(e,5),2&E){let I;d.mGM(I=d.lsd())&&(H.aztDialogContentBox=I.first)}},inputs:{defaultHeight:"defaultHeight",defaultWidth:"defaultWidth",minHeight:"minHeight"},standalone:!0,features:[d.Vt3,d.aNF],ngContentSelectors:j,decls:5,vars:7,consts:[["aztDialogContentBox",""],["scrollViewport","","pointerEventsMethod","scrollbar",3,"visibility","ngStyle"]],template:function(E,H){1&E&&(d.NAR(),d.j41(0,"mat-dialog-content",null,0)(2,"ng-scrollbar",1)(3,"div"),d.SdG(4),d.k0s()()()),2&E&&(d.R7$(2),d.Y8G("visibility","hover")("ngStyle",d.l_i(4,x,H.defaultWidth||"auto",H.isScroll?"5px":"0")),d.R7$(),d.HbH(H.contentBoxClassName))},dependencies:[D.MD,D.B3,O.X1,T.iI,O.YN,_.s,h.Yi,g.flO,y.L,C.Id,C.Yh,C.Gl,M.k],encapsulation:2}),S})()},78745:(Q,B,a)=>{"use strict";a.d(B,{d:()=>H});var s=a(59640),D=a(54460),O=a(10936),T=a(65162),_=a(15437),g=a(15343),y=a(5502),C=a(21656),M=a(47348),d=a(70050),h=a(36894),e=a(48891),j=a(64160);const x=()=>({"mr-2":!0});function V(I,F){if(1&I){const R=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"p",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",7),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"div",8),e.nrm(9,"input",9),e.j41(10,"button",10),e.bIt("click",function(){e.eBV(R);const L=e.XpG();return e.Njj(L.showCopySuccess())}),e.nrm(11,"lucide-icon",11),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()(),e.bVm()}if(2&I){const R=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_auto_hoac")),e.R7$(3),e.JRh(e.bMT(7,8,"lang_classroom_QR_join_link_copy")),e.R7$(3),e.Y8G("value",R.linkUrl),e.R7$(),e.Y8G("cdkCopyToClipboard",R.copyLinkToClipboard(R.linkUrl)),e.R7$(),e.Y8G("ngClass",e.lJ4(12,x)),e.R7$(),e.SpI(" ",e.bMT(13,10,"lang_auto_sao_chep")," ")}}let G=(()=>{var I;class F extends s.H{constructor(){super(...arguments),this.linkUrl="",this.fileName="",this.showLink=!1,this.qrCodeDownloadLink=""}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}copyLinkToClipboard(A){return A}onChangeURL(A){this.qrCodeDownloadLink=A}downloadQrCode(){try{let A=""!=this.fileName?this.commonService.createFileNameExportFile([this.fileName])+".jpg":this.commonService.createFileNameExportFile(["azota-qr-code-"])+".jpg";this.commonService.downloadFileByUrl(this.qrCodeDownloadLink.changingThisBreaksApplicationSecurity,A)}catch{console.log("Download QrCode error")}}}return(I=F).\u0275fac=(()=>{let R;return function(L){return(R||(R=e.xGo(I)))(L||I)}})(),I.\u0275cmp=e.VBU({type:I,selectors:[["azt-show-link"]],inputs:{linkUrl:"linkUrl",fileName:"fileName",showLink:"showLink"},standalone:!0,features:[e.Vt3,e.aNF],decls:8,vars:11,consts:[["azt-track-service","download-qr-code-9t-9Wiu2xv",1,"box","p-3","text-center",3,"click"],[2,"background","#fff","padding","5px"],["colorDark","#2361ad","imageSrc","'images/Azota-For-QrCode-01.png' | coreModConvertCdnLinkOfGitHub",3,"qrCodeURL","allowEmptyString","qrdata","elementType","width","errorCorrectionLevel"],["azt-track-service","download-qr-code-RqVBz6g1z7",1,"btn","btn-outline-primary","btn-transparent","btn-sm","mx-auto","mt-2",3,"click"],["name","download","size","16",3,"ngClass"],[4,"ngIf"],[1,"text-center"],[1,"h5","mt-2","font-medium"],[1,"azt-copy","relative","mt-2"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","download-qr-code-yW-aFu0tO",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click","cdkCopyToClipboard"],["name","copy","size","16",3,"ngClass"]],template:function(A,L){1&A&&(e.j41(0,"div",0),e.bIt("click",function(re){return re.stopPropagation()}),e.j41(1,"div",1)(2,"qrcode",2),e.bIt("qrCodeURL",function(re){return L.onChangeURL(re)}),e.k0s()(),e.j41(3,"a",3),e.bIt("click",function(){return L.downloadQrCode()}),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,V,14,13,"ng-container",5),e.k0s()),2&A&&(e.R7$(2),e.Y8G("allowEmptyString",!0)("qrdata",L.linkUrl)("elementType","url")("width",128)("errorCorrectionLevel","M"),e.R7$(2),e.Y8G("ngClass",e.lJ4(10,x)),e.R7$(),e.SpI(" ",e.bMT(6,8,"lang_auto_tai_ve_may")," "),e.R7$(2),e.Y8G("ngIf",L.showLink))},dependencies:[_.f,_.c,D.MD,D.YU,D.bT,O.X1,T.iI,O.YN,M.wp,C.s,j.dF,g.flO,g.WGl,d.L,y.Id,h.k],encapsulation:2}),F})();var S=a(17818),Y=a(47712);const E=I=>({"w-80":I});let H=(()=>{var I;class F extends s.H{constructor(){super(...arguments),this.linkUrl="",this.fileName="",this.showLink=!1}}return(I=F).\u0275fac=(()=>{let R;return function(L){return(R||(R=e.xGo(I)))(L||I)}})(),I.\u0275cmp=e.VBU({type:I,selectors:[["azt-download-qr-code"]],inputs:{linkUrl:"linkUrl",fileName:"fileName",showLink:"showLink"},standalone:!0,features:[e.Vt3,e.aNF],decls:7,vars:10,consts:[["showQrCode","matMenu"],["azt-track-service","download-qr-code-hiQXy_iTc",1,"btn","btn-outline-primary","btn-transparent","p-1",3,"matMenuTriggerFor","matTooltip"],["name","qr-code","size","24"],["xPosition","before"],[3,"ngClass"],[3,"linkUrl","fileName","showLink"]],template:function(A,L){if(1&A&&(e.j41(0,"button",1),e.nI1(1,"mytranslate"),e.nrm(2,"lucide-icon",2),e.k0s(),e.j41(3,"mat-menu",3,0)(5,"div",4),e.nrm(6,"azt-show-link",5),e.k0s()()),2&A){const Z=e.sdS(4);e.FS9("matTooltip",e.bMT(1,6,"lang_auto_quet_hoac_tai_ma_qr_code")),e.Y8G("matMenuTriggerFor",Z),e.R7$(5),e.Y8G("ngClass",e.eq3(8,E,L.showLink)),e.R7$(),e.Y8G("linkUrl",L.linkUrl)("fileName",L.fileName)("showLink",L.showLink)}},dependencies:[G,D.MD,D.YU,O.X1,T.iI,O.YN,M.wp,C.s,S.kk,S.Cp,Y.oV,g.flO,g.WGl,d.L,y.Id,h.k],encapsulation:2}),F})()},43277:function(Q,B){var a,D;void 0!==(D="function"==typeof(a=function(){"use strict";function T(d,h,e){var j=new XMLHttpRequest;j.open("GET",d),j.responseType="blob",j.onload=function(){M(j.response,h,e)},j.onerror=function(){console.error("could not download file")},j.send()}function _(d){var h=new XMLHttpRequest;h.open("HEAD",d,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function g(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(h)}}var y="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=y.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),M=y.saveAs||("object"!=typeof window||window!==y?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(d,h,e){var j=y.URL||y.webkitURL,x=document.createElement("a");x.download=h=h||d.name||"download",x.rel="noopener","string"==typeof d?(x.href=d,x.origin===location.origin?g(x):_(x.href)?T(d,h,e):g(x,x.target="_blank")):(x.href=j.createObjectURL(d),setTimeout(function(){j.revokeObjectURL(x.href)},4e4),setTimeout(function(){g(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,h,e){if(h=h||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function O(d,h){return typeof h>"u"?h={autoBom:!1}:"object"!=typeof h&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,e),h);else if(_(d))T(d,h,e);else{var j=document.createElement("a");j.href=d,j.target="_blank",setTimeout(function(){g(j)})}}:function(d,h,e,j){if((j=j||open("","_blank"))&&(j.document.title=j.document.body.innerText="downloading..."),"string"==typeof d)return T(d,h,e);var x="application/octet-stream"===d.type,V=/constructor/i.test(y.HTMLElement)||y.safari,G=/CriOS\/[\d]+/.test(navigator.userAgent);if((G||x&&V||C)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var H=S.result;H=G?H:H.replace(/^data:[^;]*;/,"data:attachment/file;"),j?j.location.href=H:location=H,j=null},S.readAsDataURL(d)}else{var Y=y.URL||y.webkitURL,E=Y.createObjectURL(d);j?j.location=E:location.href=E,j=null,setTimeout(function(){Y.revokeObjectURL(E)},4e4)}});y.saveAs=M.saveAs=M,Q.exports=M})?a.apply(B,[]):a)&&(Q.exports=D)},69223:(Q,B,a)=>{"use strict";a.d(B,{sv:()=>he,xn:()=>ae});var s=a(48891),D=a(54460),O=a(10936),T=a(909),_=a(56381),g=a(18447),y=a(5424),C=a(37610),M=a(66590),d=a(88249);function h(u,P){}const e=()=>{const u=typeof window<"u"?window:void 0;return u&&u.tinymce?u.tinymce:null};let j=(()=>{class u{constructor(){this.onBeforePaste=new s.bkB,this.onBlur=new s.bkB,this.onClick=new s.bkB,this.onContextMenu=new s.bkB,this.onCopy=new s.bkB,this.onCut=new s.bkB,this.onDblclick=new s.bkB,this.onDrag=new s.bkB,this.onDragDrop=new s.bkB,this.onDragEnd=new s.bkB,this.onDragGesture=new s.bkB,this.onDragOver=new s.bkB,this.onDrop=new s.bkB,this.onFocus=new s.bkB,this.onFocusIn=new s.bkB,this.onFocusOut=new s.bkB,this.onKeyDown=new s.bkB,this.onKeyPress=new s.bkB,this.onKeyUp=new s.bkB,this.onMouseDown=new s.bkB,this.onMouseEnter=new s.bkB,this.onMouseLeave=new s.bkB,this.onMouseMove=new s.bkB,this.onMouseOut=new s.bkB,this.onMouseOver=new s.bkB,this.onMouseUp=new s.bkB,this.onPaste=new s.bkB,this.onSelectionChange=new s.bkB,this.onActivate=new s.bkB,this.onAddUndo=new s.bkB,this.onBeforeAddUndo=new s.bkB,this.onBeforeExecCommand=new s.bkB,this.onBeforeGetContent=new s.bkB,this.onBeforeRenderUI=new s.bkB,this.onBeforeSetContent=new s.bkB,this.onChange=new s.bkB,this.onClearUndos=new s.bkB,this.onDeactivate=new s.bkB,this.onDirty=new s.bkB,this.onExecCommand=new s.bkB,this.onGetContent=new s.bkB,this.onHide=new s.bkB,this.onInit=new s.bkB,this.onInitNgModel=new s.bkB,this.onLoadContent=new s.bkB,this.onNodeChange=new s.bkB,this.onPostProcess=new s.bkB,this.onPostRender=new s.bkB,this.onPreInit=new s.bkB,this.onPreProcess=new s.bkB,this.onProgressState=new s.bkB,this.onRedo=new s.bkB,this.onRemove=new s.bkB,this.onReset=new s.bkB,this.onResizeEditor=new s.bkB,this.onSaveContent=new s.bkB,this.onSetAttrib=new s.bkB,this.onObjectResizeStart=new s.bkB,this.onObjectResized=new s.bkB,this.onObjectSelected=new s.bkB,this.onSetContent=new s.bkB,this.onShow=new s.bkB,this.onSubmit=new s.bkB,this.onUndo=new s.bkB,this.onVisualAid=new s.bkB}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275dir=s.FsC({type:u,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),u})();const x=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],V=(u,P,f)=>(0,T.R)(u,P).pipe((0,y.Q)(f)),Y=(u,P)=>"string"==typeof u?u.split(",").map(f=>f.trim()):Array.isArray(u)?u:P;let E=0;const I=u=>typeof u<"u"&&"textarea"===u.tagName.toLowerCase(),F=u=>typeof u>"u"||""===u?[]:Array.isArray(u)?u:u.split(" "),R=(u,P)=>F(u).concat(F(P)),A=()=>{},L=u=>null==u,me=(()=>{let u={script$:null};return{load:(X,q)=>u.script$||(u.script$=(0,_.v)(()=>{const J=X.createElement("script");return J.referrerPolicy="origin",J.type="application/javascript",J.src=q,X.head.appendChild(J),(0,T.R)(J,"load").pipe((0,C.s)(1),(0,M.u)(void 0))}).pipe((0,d.t)({bufferSize:1,refCount:!0}))),reinitialize:()=>{u={script$:null}}}})(),de=new s.nKC("TINYMCE_SCRIPT_SRC"),ue={provide:O.kq,useExisting:(0,s.Rfq)(()=>ae),multi:!0};let ae=(()=>{class u extends j{constructor(f,X,q,J){super(),this.platformId=q,this.tinymceScriptSrc=J,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=A,this.destroy$=new g.B,this.initialise=()=>{const le={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:R(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:ne=>{this._editor=ne,V(ne,"init",this.destroy$).subscribe(()=>{this.initEditor(ne)}),((u,P,f)=>{(u=>{const P=Y(u.ignoreEvents,[]);return Y(u.allowedEvents,x).filter(X=>x.includes(X)&&!P.includes(X))})(u).forEach(q=>{const J=u[q];V(P,q.substring(2),f).subscribe(le=>{J.observers.length>0&&u.ngZone.run(()=>J.emit({event:le,editor:P}))})})})(this,ne,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(ne)}};I(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{e().init(le)})},this._elementRef=f,this.ngZone=X}set disabled(f){this._disabled=f,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(f?"readonly":"design"):this._editor.setMode(f?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(f){this._editor&&this._editor.initialized?this._editor.setContent(L(f)?"":f):this.initialValue=null===f?void 0:f}registerOnChange(f){this.onChangeCallback=f}registerOnTouched(f){this.onTouchedCallback=f}setDisabledState(f){this.disabled=f}ngAfterViewInit(){(0,D.UE)(this.platformId)&&(this.id=this.id||(u=>{const f=(new Date).getTime(),X=Math.floor(1e9*Math.random());return E++,"tiny-angular_"+X+E+String(f)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==e()?this.initialise():this._element&&this._element.ownerDocument&&me.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,y.Q)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==e()&&e().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,I(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return L(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(f){V(f,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),V(f,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(f))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{f.setContent(this.initialValue),f.getContent()!==this.initialValue&&this.emitOnChange(f),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(f)})}emitOnChange(f){this.onChangeCallback&&this.onChangeCallback(f.getContent({format:this.outputFormat}))}}return u.\u0275fac=function(f){return new(f||u)(s.rXU(s.aKT),s.rXU(s.SKi),s.rXU(s.Agw),s.rXU(de,8))},u.\u0275cmp=s.VBU({type:u,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[s.Jv_([ue]),s.Vt3,s.aNF],decls:1,vars:0,template:function(f,X){1&f&&s.DNE(0,h,0,0,"ng-template")},dependencies:[D.MD,O.YN],styles:["[_nghost-%COMP%]{display:block}"]}),u})(),he=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275mod=s.$C({type:u}),u.\u0275inj=s.G2t({imports:[ae]}),u})()}}]);