(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[9322],{7919:(g,h,u)=>{"use strict";u.d(h,{Z:()=>m});var d=u(48891);let m=(()=>{var o;class f{constructor(e){this.el=e,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=e.nativeElement}ngOnChanges(e){if(e.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),e.min){const t=Number(this.min);this.min=isNaN(t)?-1/0:t}if(e.max){const t=Number(this.max);this.max=isNaN(t)?1/0:t}}onBeforeInput(e){if(isNaN(Number(e.data))){if(e.data===this.decimalSeparator1||e.data===this.decimalSeparator2||e.data===this.negativeSign&&this.allowNegatives)return;e.preventDefault(),e.stopPropagation()}}onKeyDown(e){if(this.navigationKeys.indexOf(e.key)>-1||("a"===e.key||"KeyA"===e.code)&&!0===e.ctrlKey||("c"===e.key||"KeyC"===e.code)&&!0===e.ctrlKey||("v"===e.key||"KeyV"===e.code)&&!0===e.ctrlKey||("x"===e.key||"KeyX"===e.code)&&!0===e.ctrlKey||("a"===e.key||"KeyA"===e.code)&&!0===e.metaKey||("c"===e.key||"KeyC"===e.code)&&!0===e.metaKey||("v"===e.key||"KeyV"===e.code)&&!0===e.metaKey||("x"===e.key||"KeyX"===e.code)&&!0===e.metaKey)return;let t="";var a=e.key;if(e.key===this.decimalSeparator2&&(a=this.decimalSeparator1),this.decimal&&a===this.decimalSeparator1)return t=this.forecastValue(a),t.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=t.indexOf(this.decimalSeparator1)>-1,this.setNewValue(a)),void e.preventDefault();if(a===this.negativeSign&&this.allowNegatives)return t=this.forecastValue(a),t.charAt(0)!==this.negativeSign||t.split(this.negativeSign).length>2?void e.preventDefault():void(this.hasNegativeSign=t.split(this.negativeSign).length>-1);if(" "===a||isNaN(Number(a)))return void e.preventDefault();if(t=t||this.forecastValue(a),this.regex&&!this.regex.test(t))return void e.preventDefault();const s=Number(t);(s>this.max||s<this.min)&&e.preventDefault()}onPaste(e){if(!0===this.allowPaste){let t="";window.clipboardData?t=window.clipboardData.getData("text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),this.pasteData(t),e.preventDefault()}else e.preventDefault(),e.stopPropagation()}onDrop(e){const t=e.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(t),e.preventDefault()}pasteData(e){e=this.replaceDecimalSeparator(e);const t=this.sanitizeInput(e);if(!t.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,t))if(this.inputElement.setRangeText){const{selectionStart:s,selectionEnd:i}=this.inputElement;this.inputElement.setRangeText(t,s??0,i??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,t);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(e){e=this.replaceDecimalSeparator(e),this.insertAtCursor(this.inputElement,e),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(e,t){const a=e.selectionStart??0,s=e.selectionEnd??0;e.value=e.value.substring(0,a)+t+e.value.substring(s,e.value.length);const i=a+t.length;e.focus(),e.setSelectionRange(i,i),this.triggerEvent(e,"input")}triggerEvent(e,t){if("createEvent"in document){const a=document.createEvent("HTMLEvents");a.initEvent(t,!1,!0),e.dispatchEvent(a)}}sanitizeInput(e){let a,t="";a=this.decimal&&this.isValidDecimal(e)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),t=e.replace(a,"");const s=this.inputElement.maxLength;if(s>0){const i=s-this.inputElement.value.length+(t.includes(`${this.negativeSign}`)?1:0);t=i>0?t.substring(0,i):""}return t}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(e){if(this.hasDecimalPoint){const t=this.getSelection();return t&&t.indexOf(this.decimalSeparator1)>-1?e.split(this.decimalSeparator1).length<=2:e.indexOf(this.decimalSeparator1)<0}return e.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(e){const a=this.inputElement.selectionEnd??0,s=this.inputElement.value;return s.substring(0,this.inputElement.selectionStart??0)+e+s.substring(a)}replaceDecimalSeparator(e){return e.replace(",",this.decimalSeparator).replace(".",this.decimalSeparator)}}return(o=f).\u0275fac=function(e){return new(e||o)(d.rXU(d.aKT))},o.\u0275dir=d.FsC({type:o,selectors:[["","appOnlyNumber",""]],hostBindings:function(e,t){1&e&&d.bIt("beforeinput",function(s){return t.onBeforeInput(s)})("keydown",function(s){return t.onKeyDown(s)})("paste",function(s){return t.onPaste(s)})("drop",function(s){return t.onDrop(s)})},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},features:[d.OA$]}),f})()},10296:(g,h,u)=>{"use strict";u.d(h,{R:()=>t});var d=u(43277),o=u(18148),f=u(48891),l=u(52509),e=u(53793);let t=(()=>{var a;class s{constructor(n,c){this.mobileWebviewService=n,this.commonService=c}shareFileWithBlob(n,c){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return d.saveAs(n,c);if(this.commonService.isMobileWebview(void 0)){o.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let r=new FileReader;r.readAsDataURL(n),r.onloadend=()=>{let p=r.result;"string"==typeof p&&(this.mobileWebviewService.sendShareFileBase64(c,String(p)),o.L.closeLoadingEffect(100))}}else d.saveAs(n,c)}shareFileWithBase64(n,c){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return d.saveAs(n,c);this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(c,n):d.saveAs(n,c)}}return(a=s).\u0275fac=function(n){return new(n||a)(f.KVO(l.f),f.KVO(e.R))},a.\u0275prov=f.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),s})()},18148:(g,h,u)=>{"use strict";u.d(h,{L:()=>d});let d=(()=>{var m;class o{static openLoadingEffect(l){o.getDomElement().style.display="flex",setTimeout(()=>{o.changeMsgLoadingEffect(l)},50)}static closeLoadingEffect(l){return new Promise(e=>{setTimeout(()=>{const t=o.getDomElement();t&&(t.style.display="none"),e(!0)},l)})}static changeMsgLoadingEffect(l){o.getDomContent().innerText=l}static getDomContent(){return document.getElementById(o.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(o.idComponent)??this.createDomElement()}static createDomElement(){const l=document.createElement("div");return l.id=o.idComponent,l.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),l.style.display="none",l.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${o.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(l),l}}return(m=o).idComponent="azt-status-loading-effect",m.idStatusContent="azt-status-loading-effect-content",o})()},43277:function(g,h){var u,m;void 0!==(m="function"==typeof(u=function(){"use strict";function f(i,n,c){var r=new XMLHttpRequest;r.open("GET",i),r.responseType="blob",r.onload=function(){s(r.response,n,c)},r.onerror=function(){console.error("could not download file")},r.send()}function l(i){var n=new XMLHttpRequest;n.open("HEAD",i,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function e(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(i,n,c){var r=t.URL||t.webkitURL,p=document.createElement("a");p.download=n=n||i.name||"download",p.rel="noopener","string"==typeof i?(p.href=i,p.origin===location.origin?e(p):l(p.href)?f(i,n,c):e(p,p.target="_blank")):(p.href=r.createObjectURL(i),setTimeout(function(){r.revokeObjectURL(p.href)},4e4),setTimeout(function(){e(p)},0))}:"msSaveOrOpenBlob"in navigator?function(i,n,c){if(n=n||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(function o(i,n){return typeof n>"u"?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i}(i,c),n);else if(l(i))f(i,n,c);else{var r=document.createElement("a");r.href=i,r.target="_blank",setTimeout(function(){e(r)})}}:function(i,n,c,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof i)return f(i,n,c);var p="application/octet-stream"===i.type,_=/constructor/i.test(t.HTMLElement)||t.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||p&&_||a)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var v=y.result;v=S?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=v:location=v,r=null},y.readAsDataURL(i)}else{var b=t.URL||t.webkitURL,E=b.createObjectURL(i);r?r.location=E:location.href=E,r=null,setTimeout(function(){b.revokeObjectURL(E)},4e4)}});t.saveAs=s.saveAs=s,g.exports=s})?u.apply(h,[]):u)&&(g.exports=m)}}]);