(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[4806],{63458:(z,S,l)=>{"use strict";l.r(S),l.d(S,{QuestionLibraryModule:()=>Ws});var c=l(54460),u=l(10936),I=l(89163),p=l(65162),b=l(81275),k=l(23047),m=l(15343),f=l(13763),y=l(25571),g=l(44233),d=l(5502),v=l(21656),h=l(70050),C=l(7050),O=l(35143),w=l(1133),R=l(50866),q=l(89121),j=l(59640),M=l(15766),e=l(48891),E=l(73783),F=l(74506),ke=l(52909),ne=l(81587),Q=l(52811),Ue=l(51614),$=l(96451),A=l(46899),je=l(50589),ie=l(36484),Xe=l(50334),Oe=l(75421),U=l(51698),Ke=l(88249),Je=l(33450);let oe=(()=>{var t;class a{constructor(){this.ebankService=(0,e.WQX)(E.nd),this.userService=(0,e.WQX)(ie.R),this.cacheApis$=new Map}getRoleQuestionLibrary(i,o){return new U.c(s=>{this.getRoleQuestionFromApi(i).subscribe(r=>{let _=[];o&&this.userService.getUserObj().id==o&&_.push("creator"),_=_.concat(r),s.next(_),s.complete()})})}getRoleQuestionFromApi(i){let o=this.getChangeKey(i),s=this.cacheApis$.get(o);return s||(s=new U.c(r=>{this.ebankService.apiEbanksIdMeRoleGet(i).subscribe(_=>{if(!_.success||!_.data)return r.next([]),r.complete(),void this.cacheApis$.set(o,null);let T=(0,Je.N)(_.data);if(!T)return r.next([]),void r.complete();r.next([T]),r.complete()})}).pipe((0,Ke.t)(1)),this.cacheApis$.set(o,s),s)}getChangeKey(i){return this.userService.getUserObj().id+"_"+i}}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),a})();var X=l(33887),K=l(47426),We=l(95670),J=l(4375),He=l(43166),x=l(47348);const Ze=t=>({"error-border":t});function et(t,a){1&t&&(e.j41(0,"div",16)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_azt_please_enter_structure_name"),"!"))}function tt(t,a){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const n=a.$implicit;e.Y8G("value",n.value),e.R7$(),e.SpI(" ",e.bMT(2,2,n.key)," ")}}function nt(t,a){if(1&t&&(e.j41(0,"div",17)(1,"label",8),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"mat-form-field",18)(5,"mat-select",19,0)(7,"mat-option"),e.nrm(8,"ngx-mat-select-search",20),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.k0s(),e.DNE(11,tt,3,4,"mat-option",21),e.k0s()()()),2&t){const n=e.sdS(6),i=e.XpG();e.R7$(2),e.JRh(e.bMT(3,6,"lang_azt_structure_type")),e.R7$(2),e.Y8G("ngClass",e.eq3(12,Ze,i.form.controls.suggest.invalid)),e.R7$(4),e.FS9("placeholderLabel",e.bMT(9,8,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(10,10,"lang_search_not_found")),e.Y8G("formControl",n.searchControl),e.R7$(3),e.Y8G("ngForOf",n.filter(i.frameTypeList,"key"))}}function it(t,a){1&t&&e.nrm(0,"azt-loading-ui",23)}let ae=(()=>{var t;class a extends X._{handleCloseDialog(){this.dialogRef.close()}handleSubmit(){if(this.form.invalid)return this.form.markAllAsTouched();this.data.frame?this.callApiUpdateFrame():this.callApiCreateFrame()}callApiCreateFrame(){this.initStatusObj(),this.waitDestroy(this.eBanksService.apiEbanksIdFramesPost(this.data.ebankId,{parentId:this.data.parentId,nodes:[{name:this.form.controls.name.value,suggestModel:this.form.controls.suggest.value}]}).subscribe(o=>{if(!o)return this.errorStatusObj("lang_auto_loi_ket_noi_server",!0);this.dialogRef.close(!0),this.successStatusObj("lang_auto_them_thanh_cong",!0)}))}callApiUpdateFrame(){this.initStatusObj();const i={name:this.form.controls.name.value};this.waitDestroy(this.eBanksService.apiEbanksIdFramesFrameIdPut(this.data.ebankId,this.data.frame?.id??0,i).subscribe(o=>{if(!o)return this.errorStatusObj("lang_auto_loi_ket_noi_server",!0);this.dialogRef.close(!0),this.successStatusObj("lang_cms_update_success",!0)}))}initData(){this.data.frame&&this.form.patchValue({name:this.data.frame.title})}initFrameType(){this.frameTypeList=[{id:0,key:"lang_azt_frame",value:"frame"},{id:1,key:"lang_azt_objective",value:"objective"}]}ngOnInit(){super.ngOnInit(),this.initData(),this.initFrameType()}constructor(i,o,s){super(s,o),this.eBanksService=i,this.dialogRef=o,this.data=s,this.frameTypeList=[],this.form=new u.gE({name:new u.MJ("",{nonNullable:!0,validators:[u.k0.required,M.M.noWhiteSpace]}),suggest:new u.MJ("frame",{nonNullable:!0})})}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(E.nd),e.rXU(I.CP,8),e.rXU(I.Vh))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-create-or-update-frame"]],features:[e.Vt3],decls:26,vars:21,consts:[["searchInListBank","searchInList"],[1,"box"],[3,"ngSubmit","formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-base","font-bold"],[1,"p-3"],[1,"intro"],["for","name",1,"form-label","font-medium"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-1 font-medium",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"p-3","flex","justify-end"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],["type","submit",1,"btn","btn-primary","min-width-100"],["class","mr-2",4,"ngIf"],[1,"text-danger","text-xs","mt-1","font-medium"],[1,"mt-3"],["appearance","outline",3,"ngClass"],["searchInList","","formControlName","suggest","name","bankIdInput"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mr-2"]],template:function(i,o){1&i&&(e.j41(0,"div",1)(1,"form",2),e.bIt("ngSubmit",function(){return o.handleSubmit()}),e.j41(2,"div",3)(3,"div",4)(4,"h3",5),e.EFF(5),e.nI1(6,"mytranslate"),e.nI1(7,"mytranslate"),e.k0s()(),e.j41(8,"div",6)(9,"div",7)(10,"label",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.nrm(13,"input",9),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,et,4,3,"div",10)(16,nt,12,14,"div",11),e.k0s()(),e.j41(17,"div",12)(18,"button",13),e.bIt("click",function(){return o.handleCloseDialog()}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",14),e.DNE(22,it,1,0,"azt-loading-ui",15),e.j41(23,"span"),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()()()()()),2&i&&(e.R7$(),e.Y8G("formGroup",o.form),e.R7$(4),e.SpI(" ",o.data.frame?e.bMT(6,9,"lang_azt_update_structure"):e.bMT(7,11,"lang_azt_create_structure")," "),e.R7$(6),e.JRh(e.bMT(12,13,"lang_azt_structure_name")),e.R7$(2),e.FS9("placeholder",e.bMT(14,15,"lang_azt_enter_structure_name")),e.R7$(2),e.Y8G("ngIf",o.form.controls.name.invalid&&o.form.controls.name.touched),e.R7$(),e.Y8G("ngIf",!(null!=o.data.frame&&o.data.frame.id)),e.R7$(3),e.SpI(" ",e.bMT(20,17,"lang_button_cancel")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(2),e.JRh(e.bMT(25,19,o.data.frame?"lang_button_update":"lang_button_save")))},dependencies:[c.YU,c.Sq,c.bT,K.wT,We.rl,J.VO,u.qT,u.me,u.BC,u.cb,u.l_,u.j4,u.JD,ne.t,Q.R,He.x,g.U9,x.wp],encapsulation:2}),a})();var N=l(47712);const we=t=>({"box p-2 mt-2":t}),Te=t=>({nodeObjs:t}),ot=t=>({"padding-left":t}),se=()=>({"mr-2":!0}),at=()=>({"mr-2 text-danger":!0});function st(t,a){1&t&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_vui_long_chon_lai_de_hien_lai_cay_kien_thuc")," "))}function rt(t,a){1&t&&e.eu8(0)}function lt(t,a){if(1&t&&(e.j41(0,"div",10)(1,"ng-scrollbar",11,4),e.DNE(3,st,3,3,"div",12)(4,rt,1,0,"ng-container",13),e.k0s()()),2&t){const n=e.XpG(),i=e.sdS(3);e.Y8G("ngClass",e.eq3(4,we,"create"==n.modeView)),e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngIf",!n.nodeObjs.length&&n.rawNodes.length&&n.schoolLevelValue&&n.schoolSubjectValue),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function ct(t,a){1&t&&e.eu8(0)}function dt(t,a){if(1&t&&(e.j41(0,"div",15),e.DNE(1,ct,1,0,"ng-container",13),e.k0s()),2&t){const n=e.XpG(),i=e.sdS(3);e.Y8G("ngClass",e.eq3(2,we,"create"==n.modeView)),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function ut(t,a){1&t&&(e.j41(0,"div",18)(1,"h3",19),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_create_tree_category_select_level_subject_require")))}function _t(t,a){1&t&&(e.j41(0,"div",18)(1,"h3",19),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_create_tree_category_select_level_subject_no_data")))}function mt(t,a){if(1&t&&(e.qex(0),e.DNE(1,ut,4,3,"div",17)(2,_t,4,3,"div",17),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",!("create"!=n.modeView||n.rawNodes.length||n.schoolLevelValue&&n.schoolSubjectValue)),e.R7$(),e.Y8G("ngIf",!n.rawNodes.length&&n.schoolLevelValue&&n.schoolSubjectValue)}}function pt(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",23),e.nrm(1,"lucide-icon",24),e.j41(2,"span",25),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"button",26),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.closeNote())}),e.nrm(6,"lucide-icon",27),e.k0s()()}2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_azt_note_click_right_in_knowledge_tree")))}function gt(t,a){1&t&&e.eu8(0)}function bt(t,a){if(1&t&&(e.DNE(0,pt,7,3,"div",20),e.j41(1,"div",21),e.DNE(2,gt,1,0,"ng-container",22),e.k0s()),2&t){const n=e.XpG(2),i=e.sdS(5);e.Y8G("ngIf","structure"===n.modeView&&!n.isHiddenNode&&(null==n.roleUser?null:n.roleUser.includes("owner"))),e.R7$(2),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(3,Te,n.nodeObjs))}}function ft(t,a){if(1&t&&e.DNE(0,mt,3,2,"ng-container",16)(1,bt,3,5,"ng-template",null,5,e.C5r),2&t){const n=e.sdS(2),i=e.XpG();e.Y8G("ngIf",!i.rawNodes.length||!i.schoolLevelValue||!i.schoolSubjectValue)("ngIfElse",n)}}function ht(t,a){1&t&&e.nrm(0,"lucide-icon",41)}function vt(t,a){1&t&&e.nrm(0,"lucide-icon",42)}function yt(t,a){if(1&t){const n=e.RV6();e.j41(0,"i",38),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(o))}),e.DNE(1,ht,1,0,"lucide-icon",39)(2,vt,1,0,"lucide-icon",40),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!n.isExpand),e.R7$(),e.Y8G("ngIf",n.isExpand)}}function xt(t,a){1&t&&e.nrm(0,"lucide-icon",43),2&t&&e.Y8G("ngClass",e.lJ4(1,se))}function It(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"a",44),e.bIt("click",function(o){e.eBV(n);const s=e.XpG(2).$implicit;return e.XpG(3).goToFrameQuestionList(s),e.Njj(o.stopPropagation())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()}if(2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI("(",n.totalQuestion+" "+e.bMT(3,1,"lang_auto_cau_hoi"),")")}}function Ct(t,a){if(1&t&&(e.j41(0,"span",45),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI("(",n.totalQuestion+" "+e.bMT(2,1,"lang_auto_cau_hoi"),")")}}function kt(t,a){if(1&t&&(e.qex(0),e.DNE(1,It,4,3,"ng-container",16)(2,Ct,3,3,"ng-template",null,6,e.C5r),e.bVm()),2&t){const n=e.sdS(3),i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.totalQuestion>0)("ngIfElse",n)}}function jt(t,a){if(1&t){const n=e.RV6();e.j41(0,"button",46),e.bIt("click",function(o){e.eBV(n);const s=e.XpG().$implicit,r=e.XpG(3),_=e.sdS(7);return e.Njj(r.onContextMenu(o,s,_))}),e.nrm(1,"lucide-icon",47),e.k0s()}}function Ot(t,a){if(1&t){const n=e.RV6();e.j41(0,"a",48),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.removeKnowledgeForm(o))}),e.j41(2,"span",49),e.nrm(3,"lucide-icon",50),e.k0s()()}2&t&&e.Y8G("matTooltip",e.bMT(1,1,"lang_auto_xoa"))}function wt(t,a){1&t&&e.eu8(0)}function Tt(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",51),e.DNE(2,wt,1,0,"ng-container",22),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.XpG(3);const i=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,Te,n.children))}}function St(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",30)(2,"div",31),e.DNE(3,yt,3,2,"i",32),e.j41(4,"div",33),e.bIt("click",function(){const o=e.eBV(n).$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(o))}),e.DNE(5,xt,1,2,"lucide-icon",34),e.nrm(6,"span",35),e.nI1(7,"mathJaxContent"),e.nI1(8,"async"),e.nI1(9,"safeContentQuestion"),e.DNE(10,kt,4,2,"ng-container",28)(11,jt,2,0,"button",36),e.k0s(),e.DNE(12,Ot,4,3,"a",37),e.k0s(),e.DNE(13,Tt,3,4,"ng-container",28),e.k0s(),e.bVm()}if(2&t){const n=a.$implicit,i=e.XpG(3),o=e.sdS(7),s=e.sdS(10);e.R7$(),e.Y8G("hidden",!n.isShow)("contextMenu","structure"===i.modeView?o:s)("contextMenuValue",n),e.R7$(),e.yjJ("id","node-",n.randomHashId,"-",n.level,"-",n.nodeIndex,""),e.Y8G("ngStyle",e.eq3(21,ot,12*n.level+"px")),e.R7$(),e.Y8G("ngIf",n.children.length),e.R7$(2),e.Y8G("ngIf",n.data.id&&("knowledge"==n.typeNode||"objective"==n.typeNode&&!n.children.length)),e.R7$(),e.Y8G("innerHTML",e.bMT(9,19,e.bMT(8,17,e.bMT(7,15,n.text))),e.npT),e.R7$(4),e.Y8G("ngIf","structure"==i.modeView),e.R7$(),e.Y8G("ngIf","structure"===i.modeView&&(null==i.roleUser?null:i.roleUser.includes("owner"))),e.R7$(),e.Y8G("ngIf","create"==i.modeView),e.R7$(),e.Y8G("ngIf",n.isExpand)}}function Qt(t,a){if(1&t&&(e.qex(0),e.DNE(1,St,14,23,"ng-container",29),e.bVm()),2&t){const n=a.$implicit;e.R7$(),e.Y8G("ngForOf",n)}}function Rt(t,a){if(1&t&&e.DNE(0,Qt,2,1,"ng-container",28),2&t){const n=a.nodeObjs,i=e.XpG();e.Y8G("ngIf",i.asTemplateDataObj(n))}}function Et(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",53)(1,"ul",54)(2,"li")(3,"a",55),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.createSubFrame(o))}),e.nrm(4,"lucide-icon",56),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"li")(8,"a",55),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.updateFrame(o))}),e.nrm(9,"lucide-icon",57),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()(),e.j41(12,"li")(13,"a",55),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.removeFrame(o))}),e.nrm(14,"lucide-icon",58),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()}2&t&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(12,se)),e.R7$(),e.SpI(" ",e.bMT(6,6,"lang_azt_add_sub_structure")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(13,se)),e.R7$(),e.SpI(" ",e.bMT(11,8,"lang_auto_sua")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(14,at)),e.R7$(),e.SpI(" ",e.bMT(16,10,"lang_auto_xoa")," "))}function Mt(t,a){if(1&t&&e.DNE(0,Et,17,15,"div",52),2&t){const n=e.XpG();e.Y8G("ngIf",null==n.roleUser?null:n.roleUser.includes("owner"))}}let Se=(()=>{var t;class a extends Xe.C{constructor(){super(...arguments),this.bankId=0,this.parentUpdateNoteIds=[],this.nodeEmitData=new e.bkB,this.reloadApiEvent=new e.bkB,this.nodeObjs=[],this.contextMenuService=(0,e.WQX)(b.Kf),this.sAztDialogService=(0,e.WQX)(A.i),this.sAztBrowserStorageService=(0,e.WQX)(je.z),this.eBanksService=(0,e.WQX)(E.nd),this.sAztQuestionLibraryPermissionService=(0,e.WQX)(oe),this.sAztUserService=(0,e.WQX)(ie.R),this.uuidService=(0,e.WQX)(ke.D),this.isHiddenNode=!1}clickToNode(i){i.children.length&&(i.isExpand?this.collapse(i):this.expand(i))}goToFrameQuestionList(i){if("structure"!=this.modeView)return;let o=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/admin/question-library/view-question-list-node/"+this.bankId+"/"+i.data.id,"?backto="+encodeURIComponent(o))}removeKnowledgeForm(i){this.nodeObjs=this.removeOneNodeById(this.nodeObjs,i),this.nodeEmitData.emit(this.nodeObjs)}asTemplateDataObj(i){return i}onContextMenu(i,o,s){i&&s&&(this.contextMenuService.show(s,{value:o,x:i?.clientX+15,y:i?.clientY+15}),i?.preventDefault(),i?.stopPropagation())}createSubFrame(i){const o={ebankId:this.bankId,parentId:i.data.id};this.parentUpdateNoteIds=this.findAncestors(this.nodeObjs,i.data.id),this.sAztDialogService.open(ae,{data:o,width:"500px"}).afterClosed().subscribe(r=>{r&&this.reloadApiEvent.emit(this.parentUpdateNoteIds)})}updateFrame(i){const o={ebankId:this.bankId,parentId:i.data.id,frame:i.data};this.parentUpdateNoteIds=this.findAncestors(this.nodeObjs,i.data.id),this.sAztDialogService.open(ae,{data:o,width:"500px"}).afterClosed().subscribe(r=>{r&&this.reloadApiEvent.emit(this.parentUpdateNoteIds)})}removeFrame(i){const o=this.commonService.myTranslateInstant("lang_azt_title_confirm_remove_knowledge_frame")?.replace("________",i.data.title);this.parentUpdateNoteIds=this.findAncestors(this.nodeObjs,i.data.id),this.sAztDialogService.open(Oe.u,{data:{content:o,iconName:"trash-2"},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(r=>{r&&this.waitDestroy(this.eBanksService.apiEbanksIdFramesDeletePost(this.bankId,{frameIds:[i.data.id]}).subscribe(_=>{if(!_.success)return this.errorStatusObj(_.message,!0);this.reloadApiEvent.emit(this.parentUpdateNoteIds),this.successStatusObj("lang_cms_delete_success",!0)}))})}closeNote(){this.isHiddenNode=!0,this.sAztBrowserStorageService.saveSimpleStorage("isHiddenNodeInQuestionTree","1")}standardTreeNodes(i,o){let s=[];return i.forEach((r,_)=>{let T={level:o,typeNode:r.objectiveId||"objective"===r.type?"objective":r.knowledgeId?"knowledge":"",isExpand:!(0!==o&&!this.parentUpdateNoteIds.includes(r.id)),isShow:!0,nodeIndex:_,selected:!1,randomHashId:this.uuidService.getUuid(),text:r.title,data:{...r,children:[]},children:[],totalQuestion:r.totalQuestion??0};T.children=this.standardTreeNodes(r.children,o+1),s.push(T)}),s}removeOneNodeById(i,o){return(i=i.filter(s=>s.randomHashId!=o.randomHashId)).forEach(s=>s.children=this.removeOneNodeById(s.children,o)),i}getRoleUserInQuestionLibrary(){this.wrapApiResponse(this.sAztQuestionLibraryPermissionService.getRoleQuestionLibrary(this.bankId,this.sAztUserService.getUserObj().tenantId??0)).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message);this.roleUser=i.data})}findAncestors(i,o){const s=[],r=(_,T)=>{for(const te of _){if(s.push(te.data.id),te.data.id===T||te.children&&r(te.children,T))return!0;s.pop()}return!1};return r(i,o),s}ngOnChanges(i){i.rawNodes&&(this.nodeObjs=this.standardTreeNodes(this.rawNodes,0),this.nodeEmitData.emit(this.nodeObjs))}ngOnInit(){this.isHiddenNode=!!this.sAztBrowserStorageService.getSimpleStorage("isHiddenNodeInQuestionTree"),this.getRoleUserInQuestionLibrary()}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-tree-component"]],inputs:{rawNodes:"rawNodes",modeView:"modeView",schoolSubjectValue:"schoolSubjectValue",schoolLevelValue:"schoolLevelValue",useScrollBar:"useScrollBar",bankId:"bankId",parentUpdateNoteIds:"parentUpdateNoteIds"},outputs:{nodeEmitData:"nodeEmitData",reloadApiEvent:"reloadApiEvent"},features:[e.Vt3,e.OA$],decls:11,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["menu",""],["menuEmpty",""],["perfectScroll",""],["showKnowledge",""],["notHaveQuestion",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",3,"ngClass",4,"ngIf"],["class","relative",3,"ngClass",4,"ngIf"],["contextMenuItem",""],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto",3,"ngClass"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],["class","text-danger absolute w-full justify-center flex items-center p-3 font-bold h-full",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"text-danger","absolute","w-full","justify-center","flex","items-center","p-3","font-bold","h-full"],[1,"relative",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],["class","intro alert alert-secondary-soft alert-dismissible show flex items-center mb-6 font-medium p-2",4,"ngIf"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"intro","alert","alert-secondary-soft","alert-dismissible","show","flex","items-center","mb-6","font-medium","p-2"],["name","info","size","20"],[1,"ml-2"],[1,"btn-close","text-dark","ml-auto",3,"click"],["name","x","size","20"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden","contextMenu","contextMenuValue"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[1,"cursor-pointer",2,"line-height","1.6",3,"click"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["class","btn btn-sm btn-outline-secondary btn-transparent p-0 ml-2","style","vertical-align: top",3,"click",4,"ngIf"],["class","ml-auto btn btn-transparent btn-outline-danger btn-sm text-slate-700 font-medium",3,"matTooltip","click",4,"ngIf"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"link__color","ml-2",3,"click"],[1,"ml-2",2,"opacity","0.5"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","p-0","ml-2",2,"vertical-align","top",3,"click"],["name","ellipsis","size","20"],[1,"ml-auto","btn","btn-transparent","btn-outline-danger","btn-sm","text-slate-700","font-medium",3,"click","matTooltip"],[1,"w-4","h-4","flex-none"],["name","x","size","18"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"],["class","dropdown-menu show w-48 relative",4,"ngIf"],[1,"dropdown-menu","show","w-48","relative"],[1,"dropdown-content"],[1,"dropdown-item",3,"click"],["name","plus","size","16",3,"ngClass"],["name","pencil-line","size","16",3,"ngClass"],["name","trash-2","size","16",3,"ngClass"]],template:function(i,o){1&i&&(e.DNE(0,lt,5,6,"div",7)(1,dt,2,4,"div",8)(2,ft,3,2,"ng-template",null,0,e.C5r)(4,Rt,1,1,"ng-template",null,1,e.C5r),e.j41(6,"context-menu",null,2),e.DNE(8,Mt,1,1,"ng-template",9),e.k0s(),e.nrm(9,"context-menu",null,3)),2&i&&(e.Y8G("ngIf",o.useScrollBar),e.R7$(),e.Y8G("ngIf",!o.useScrollBar))},dependencies:[c.YU,c.Sq,c.bT,c.T3,c.B3,N.oV,d.Yh,m.WGl,b.Q5,b.Ek,b.JO,c.Jj,x.wp,x.km,x.ep],encapsulation:2}),a})();function Ft(t,a){1&t&&(e.j41(0,"div",19)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"span",20),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,2,"lang_azt_please_enter")+" "),e.R7$(3),e.JRh(e.bMT(6,4,"lang_auto_khoi_hoc")))}function At(t,a){if(1&t&&(e.j41(0,"div",15)(1,"label",16),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",17),e.nI1(6,"mytranslate"),e.DNE(7,Ft,7,6,"div",18),e.k0s()),2&t){const n=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_azt_enter")+" "+e.bMT(4,5,"lang_auto_khoi_hoc")," "),e.R7$(3),e.FS9("placeholder",e.bMT(6,7,"lang_auto_khoi_hoc")+"..."),e.R7$(2),e.Y8G("ngIf",null==n.form.controls.customLevel?null:n.form.controls.customLevel.errors)}}function zt(t,a){1&t&&(e.j41(0,"div",19)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"span",20),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,2,"lang_azt_please_enter")+" "),e.R7$(3),e.JRh(e.bMT(6,4,"lang_auto_mon_hoc")))}function qt(t,a){if(1&t&&(e.j41(0,"div",15)(1,"label",21),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",22),e.nI1(6,"mytranslate"),e.DNE(7,zt,7,6,"div",18),e.k0s()),2&t){const n=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_azt_enter")+" "+e.bMT(4,5,"lang_auto_mon_hoc")," "),e.R7$(3),e.FS9("placeholder",e.bMT(6,7,"lang_auto_mon_hoc")+"..."),e.R7$(2),e.Y8G("ngIf",null==n.form.controls.customSubject?null:n.form.controls.customSubject.errors)}}function Lt(t,a){if(1&t&&(e.j41(0,"div",13),e.DNE(1,At,8,9,"div",14)(2,qt,8,9,"div",14),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.form.controls.schoolLevel.value===n.levelOtherId),e.R7$(),e.Y8G("ngIf",n.form.controls.schoolSubject.value===n.subjectOtherId)}}function Gt(t,a){1&t&&(e.j41(0,"div",24)(1,"div",25),e.nrm(2,"azt-loading-ui",26),e.j41(3,"h3",27),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_cms_common_loading")))}function Dt(t,a){if(1&t){const n=e.RV6();e.j41(0,"app-question-library-tree-component",28),e.bIt("nodeEmitData",function(o){e.eBV(n);const s=e.XpG(2);return e.Njj(s.nodeDataEmitted=o)}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("rawNodes",n.nodeObjsData)("modeView","create")("schoolSubjectValue",n.form.controls.schoolSubject.value)("schoolLevelValue",n.form.controls.schoolLevel.value)("useScrollBar",!0)}}function $t(t,a){if(1&t&&(e.j41(0,"div"),e.DNE(1,Gt,6,3,"div",23)(2,Dt,1,5,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",n)}}function Nt(t,a){1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"h3",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_azt_click_create_bank_structure_and_add_bank_structure_there")))}function Pt(t,a){1&t&&e.nrm(0,"azt-loading-ui",30)}let Yt=(()=>{var t;class a extends j.H{getKnowledgeData(i){let o=this.form.controls.schoolLevel?.value??0,s=this.form.controls.schoolSubject?.value??0,r=this.form.controls.bookIdFormControl?.value??0;this.bookName=i.bookName??"",this.setValidateForm(),s&&o&&(this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(o,s,void 0,r>0?r:void 0)).subscribe(_=>{if(!_.success)return this.errorStatusObj(_.message,!0);this.nodeObjsData=_.data?.nodes??[],this.successStatusObj()})))}saveQuestionLibrary(){this.savingData=!0;const i=this.form.getRawValue(),o={levelId:i.schoolLevel===this.levelOtherId?0:i.schoolLevel,subjectId:i.schoolSubject===this.subjectOtherId?0:i.schoolSubject,bookId:i.bookIdFormControl,bookName:this.bookName,levelName:i.schoolLevel===this.levelOtherId?i.customLevel:void 0,subjectName:i.schoolSubject===this.subjectOtherId?i.customSubject:void 0,nodes:i.schoolLevel===this.levelOtherId||i.schoolSubject===this.subjectOtherId?[]:this.getNodeSaveApi()};this.waitDestroy(this.eBanksService.apiEbanksPost(o).subscribe(s=>{if(this.savingData=!1,!s.success)return this.errorStatusObj(s.message,!0);this.successStatusObj("lang_testbank_test_list_create_new_tree_document_success",!0),this.commonService.myNavigation("/admin/question-library/view-question-library/"+s.data?.id+"/0")}))}getNodeSaveApi(){return this.nodeDataEmitted.map(i=>({name:i.text,suggestModel:i.typeNode,suggestId:i.data.objectiveId??i.data.knowledgeId,children:this.getChildNode(i.children)}))}getChildNode(i){return i.map(o=>({name:o.text,suggestModel:o.data.objectiveId?"objective":o.data.knowledgeId?"knowledge":"",suggestId:o.data.objectiveId??o.data.knowledgeId,children:this.getChildNode(o.children)}))}setValidateForm(){this.form.controls.schoolLevel.value===this.levelOtherId?this.form.controls.customLevel?.addValidators([u.k0.required,M.M.noWhiteSpace]):this.form.controls.customLevel?.removeValidators([u.k0.required,M.M.noWhiteSpace]),this.form.controls.schoolSubject.value===this.subjectOtherId?this.form.controls.customSubject?.addValidators([u.k0.required,M.M.noWhiteSpace]):this.form.controls.customSubject?.removeValidators([u.k0.required,M.M.noWhiteSpace])}ngOnInit(){this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard"}constructor(i,o,s){super(),this.eBanksService=i,this.aiElearningService=o,this.uuidService=s,this.bookName="",this.backToLink="",this.nodeObjsData=[],this.nodeDataEmitted=[],this.savingData=!1,this.levelOtherId=13,this.subjectOtherId=43,this.form=new u.gE({schoolLevel:new u.MJ(0,{nonNullable:!0}),schoolSubject:new u.MJ(0,{nonNullable:!0}),bookIdFormControl:new u.MJ(0,{nonNullable:!0}),customLevel:new u.MJ("",{nonNullable:!0}),customSubject:new u.MJ("",{nonNullable:!0})})}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(E.nd),e.rXU(F.T5),e.rXU(ke.D))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-add-new-question-library"]],features:[e.Vt3],decls:17,vars:17,consts:[["otherLevelOrSubject",""],["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","overflow-hidden"],[1,"text-md","font-bold","mt-3"],[3,"formGroup"],[1,"mt-3","box","p-2"],[3,"changeDataEvent","form","showBookData","layout","useExamSchoolLogData"],["class","mt-3 grid gird-cols-12 gap-5",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"mt-2","float-right"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mt-3","grid","gird-cols-12","gap-5"],["class","col-span-12 md:col-span-6",4,"ngIf"],[1,"col-span-12","md:col-span-6"],["for","customLevel",1,"form-label","font-medium"],["type","text","id","customLevel","formControlName","customLevel",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-2 fade",4,"ngIf"],[1,"text-danger","text-xs","mt-2","fade"],[1,"text-lowercase"],["for","customSubject",1,"form-label","font-medium"],["type","text","id","customSubject","formControlName","customSubject",1,"form-control",3,"placeholder"],["class","box mt-2","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf","ngIfElse"],[1,"box","mt-2",2,"height","calc(100vh - 250px)","overflow-y","auto"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[3,"nodeEmitData","rawNodes","modeView","schoolSubjectValue","schoolLevelValue","useScrollBar"],[1,"text-slate-500","text-lg","font-medium"],[1,"mr-1"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"teacher-layout",2)(1,"div",3)(2,"h3",4),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"form",5)(6,"div",6)(7,"config-level-subject-book",7),e.bIt("changeDataEvent",function(_){return e.eBV(s),e.Njj(o.getKnowledgeData(_))}),e.k0s(),e.DNE(8,Lt,3,2,"div",8),e.k0s()(),e.DNE(9,$t,4,2,"div",9)(10,Nt,5,3,"ng-template",null,0,e.C5r),e.j41(12,"div",10)(13,"button",11),e.bIt("click",function(){return e.eBV(s),e.Njj(o.saveQuestionLibrary())}),e.DNE(14,Pt,1,0,"azt-loading-ui",12),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()}if(2&i){const s=e.sdS(11);e.Y8G("headerBackToLink",o.backToLink),e.R7$(3),e.JRh(e.bMT(4,13,"lang_create_tree_question_library")),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("form",o.form)("showBookData",!0)("layout","label_in_one_line")("useExamSchoolLogData",!0),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.value===o.levelOtherId||o.form.controls.schoolSubject.value===o.subjectOtherId),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.value!==o.levelOtherId&&o.form.controls.schoolSubject.value!==o.subjectOtherId)("ngIfElse",s),e.R7$(4),e.Y8G("disabled",o.savingData),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(16,15,"lang_create_tree_category_btn")," ")}},dependencies:[c.bT,u.qT,u.me,u.BC,u.cb,u.j4,u.JD,ne.t,Q.R,Ue.X,$.Q,Se,x.wp],encapsulation:2}),a})();var Vt=l(33172),Bt=l(39712),Ut=l(60531),Xt=l(74175),Kt=l(23137),Jt=l(19965);const Wt=()=>({"text-pending":!0}),Ht=(t,a)=>[t,a],Zt=()=>({"text-primary":!0}),re=t=>[t];let en=(()=>{var t;class a extends j.H{beforeOpenEditor(i="editor"){this.editorOutputDataService.setMode(i),this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}&importQuestionBankId=${this.bankId}`)}changeFileAction(i){this.file=i,this.startParser(this.file)}startParser(i){this.saveAndSwitch(i)}saveAndSwitch(i){this.editorOutputDataService.setFileProcess(i),this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}&importQuestionBankId=${this.bankId}`)}openDialogDigitization(i){this.sAztDialogService.open(Vt.F,{width:"500px",restoreFocus:!1,data:{files:i,isRun:!0,backLink:`/admin/question-library/choose-import-question-mode/${this.bankId}`},disableClose:!0})}ngOnInit(){super.ngOnInit(),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId"))}constructor(i,o,s){super(),this.activeRoute=i,this.editorOutputDataService=o,this.sAztDialogService=s,this.allUploadFileTypes=Bt.PO,this.bankId=0}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(p.nX),e.rXU(Ut.O),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-choose-import-question-mode"]],features:[e.Vt3],decls:65,vars:68,consts:[[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","items-center","justify-center"],[1,"font-medium","text-lg"],[1,"mx-auto",2,"max-width","800px"],[1,"box","flex","items-center","px-5","py-5","justify-center","zoom-in","mb-3",3,"click"],[1,"w-8","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["name","square-pen","size","32",3,"ngClass"],[1,"text-center"],[3,"emitFiles","fileType","limitSize"],["id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5"],[1,"h-full","flex","items-center",2,"min-height","20vh"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["name","cloud-upload","size","64",3,"ngClass"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],["id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],[1,"mt-3","text-center","font-medium"],[1,"grid","grid-cols-12","gap-6","mt-3"],[1,"col-span-12","md:col-span-4","text-center","px-2"],[3,"routerLink"],[1,"btn","btn-primary","w-full"],["name","folder-input","size","18"],[1,"ml-2"],[1,"col-span-12","md:col-span-4","px-2"],[1,"btn","btn-pending","w-full"],["name","file-text","size","18"],[1,"ml-2","mr-2"],[1,"btn","btn-success","w-full","text-white"],["name","image-up","size","18"]],template:function(i,o){1&i&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",1)(7,"div",4)(8,"div",5),e.bIt("click",function(){return o.beforeOpenEditor()}),e.j41(9,"div",6),e.nrm(10,"lucide-icon",7),e.k0s(),e.j41(11,"div",8)(12,"div",3),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()(),e.j41(15,"azt-upload-single-document-to-editor",9),e.bIt("emitFiles",function(r){return o.changeFileAction(r)}),e.j41(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13),e.nrm(20,"lucide-icon",14),e.k0s(),e.j41(21,"div",15)(22,"div",16),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"div",17),e.EFF(26),e.nI1(27,"mytranslate"),e.j41(28,"a",18),e.bIt("click",function(r){return r.stopPropagation()}),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.j41(31,"div",19)(32,"azt-download-link-item",20),e.nI1(33,"coreModConvertRawLinkOfGitHubWithLocale"),e.nI1(34,"mytranslate"),e.bIt("click",function(r){return o.isMobileWebView?"":r.stopPropagation()}),e.k0s(),e.EFF(35," \xa0|\xa0 "),e.j41(36,"azt-download-link-item",21),e.nI1(37,"coreModConvertRawLinkOfGitHubWithLocale"),e.nI1(38,"mytranslate"),e.bIt("click",function(r){return o.isMobileWebView?"":r.stopPropagation()}),e.k0s()()()()()()()(),e.j41(39,"div",22),e.EFF(40),e.nI1(41,"mytranslate"),e.k0s(),e.j41(42,"div",23)(43,"div",24)(44,"a",25),e.nI1(45,"navigationLocalize"),e.j41(46,"button",26),e.nrm(47,"lucide-icon",27),e.j41(48,"span",28),e.EFF(49),e.nI1(50,"mytranslate"),e.k0s()()()(),e.j41(51,"div",29)(52,"azt-upload-single-document-to-editor",9),e.bIt("emitFiles",function(r){return o.openDialogDigitization([r])}),e.j41(53,"div",30),e.nrm(54,"lucide-icon",31),e.j41(55,"span",32),e.EFF(56),e.nI1(57,"mytranslate"),e.k0s()()()(),e.j41(58,"div",29)(59,"azt-upload-multiple-document-to-editor",9),e.bIt("emitFiles",function(r){return o.openDialogDigitization(r)}),e.j41(60,"div",33),e.nrm(61,"lucide-icon",34),e.j41(62,"span",32),e.EFF(63),e.nI1(64,"mytranslate"),e.k0s()()()()()()()()),2&i&&(e.Y8G("headerBackToLink","/admin/question-library/view-question-library/"+o.bankId+"/0"),e.R7$(4),e.SpI(" ",e.bMT(5,29,"lang_azt_enter_questions_into_the_bank")," "),e.R7$(6),e.Y8G("ngClass",e.lJ4(57,Wt)),e.R7$(3),e.SpI(" ",e.bMT(14,31,"lang_question_library_import_question_by_manual_editor")," "),e.R7$(2),e.Y8G("fileType",e.l_i(58,Ht,o.allUploadFileTypes.WORD,o.allUploadFileTypes.AZT))("limitSize",200),e.R7$(5),e.Y8G("ngClass",e.lJ4(61,Zt)),e.R7$(3),e.JRh(e.bMT(24,33,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),e.R7$(3),e.SpI(" ",e.bMT(27,35,"lang_auto_azota_support_file_type")," .docx. "),e.R7$(3),e.SpI(" ",e.bMT(30,37,"lang_auto_tim_hieu_them")," "),e.R7$(3),e.Y8G("dataUrl",e.bMT(33,39,"medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",e.bMT(34,41,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),e.R7$(4),e.Y8G("dataUrl",e.bMT(37,43,"medias_[LANG]/mau_de_dung_sai_azota_v3.docx?raw=true"))("target","_self")("fileName",e.bMT(38,45,"lang_testbank_create_document_azota_docx_true_false_model"))("fileDescription","lang_testbank_create_document_azota_docx_true_false_model")("classStyle","text-primary"),e.R7$(4),e.SpI(" ",e.bMT(41,47,"lang_auto_hoac")," "),e.R7$(4),e.Y8G("routerLink",e.eq3(62,re,e.bMT(45,49,"/admin/question-library/import-question-to-library/"+o.bankId))),e.R7$(5),e.JRh(e.bMT(50,51,"lang_azt_import_from_your_exam_questions")),e.R7$(3),e.Y8G("fileType",e.eq3(64,re,o.allUploadFileTypes.PDF))("limitSize",200),e.R7$(4),e.JRh(e.bMT(57,53,"lang_core_so_hoa_file_pdf")),e.R7$(3),e.Y8G("fileType",e.eq3(66,re,o.allUploadFileTypes.IMAGE))("limitSize",200),e.R7$(4),e.JRh(e.bMT(64,55,"lang_core_so_hoa_file_anh")))},dependencies:[p.Wk,c.YU,Xt.W,Kt.N,Jt.p,$.Q,m.WGl,x.F2,x.wp,x.Kf],encapsulation:2}),a})();var le=l(76627),tn=l(85747),nn=l(88516),Y=l(78472),on=l(37157),Qe=l(11002),an=l(29826),W=l(65106),H=l(25539),ce=l(34292),sn=l(44833),Z=l(10933),V=l(5271),rn=l(58761),ln=l(99927),B=l(18718),cn=l(52986),de=l(68106),G=l(78111),ue=l(64486),_e=l(66793),me=l(42789),pe=l(60780),ge=l(5955),be=l(6625),dn=l(3968),P=l(9570),un=l(86702),_n=l(11927),mn=l(39916),pn=l(5231);const gn=t=>({"skeleton-box-loading":t}),bn=t=>({"pb-2":t}),fn=t=>({"flex-wrap":t}),hn=t=>({"padding-mobile":t});function vn(t,a){if(1&t&&e.nrm(0,"div",3),2&t){const n=e.XpG();e.Y8G("ngClass",e.eq3(1,gn,n.renderConfigObj.isFirstRender))}}function yn(t,a){if(1&t&&(e.j41(0,"div",24),e.nrm(1,"azt-dynamic-hook",19),e.k0s()),2&t){let n;const i=e.XpG(2);e.R7$(),e.Y8G("content",null!==(n=null==i.question.groupInfo?null:i.question.groupInfo.groupContent)&&void 0!==n?n:"")}}function xn(t,a){if(1&t&&e.nrm(0,"azt-test-audio-ui",25),2&t){const n=e.XpG(2);e.Y8G("questionObj",n.question)("isShowList",!0)}}function In(t,a){if(1&t&&(e.j41(0,"div",26),e.nrm(1,"azt-library-common-question-tag-with-create-mode",27),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("questionObj",n.question)("currentQuestionTags",n.question.tags)("useQuestionIdToSuggestion",!0)("bankObj",n.bankObj)}}function Cn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",33)(1,"div",34)(2,"div",35)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",36)(7,"azt-library-true-false-question-knowledge-unit-to-auto-suggestion",37),e.bIt("selectKnowledgeEmit",function(o){e.eBV(n);const s=e.XpG(4);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.j41(8,"div",38)(9,"div",39)(10,"span",40),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",41),e.nrm(14,"azt-library-true-false-question-tag-with-create-mode",42),e.k0s()()()()()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(14,hn,i.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,10,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("ngClass",i.isMobileDevice?"w-full":"")("questionObj",i.question)("currentAnswerKey",n.key)("bankObj",i.bankObj),e.R7$(4),e.SpI("",e.bMT(12,12,"lang_auto_gan_nhan"),":"),e.R7$(3),e.Y8G("questionObj",i.question)("currentAnswerKey",n.key)("bankObj",i.bankObj)}}function kn(t,a){if(1&t&&(e.j41(0,"div",30),e.nI1(1,"isTrueFalseAnswer"),e.j41(2,"b",31),e.EFF(3),e.nI1(4,"isTrueFalseAnswer"),e.k0s(),e.nrm(5,"azt-dynamic-hook",19),e.DNE(6,Cn,15,16,"div",32),e.nI1(7,"isTrueFalseAnswer"),e.k0s()),2&t){let n;const i=a.$implicit,o=e.XpG(3);e.Y8G("ngStyle",e.eq3(10,fn,e.bMT(1,4,o.question)?"wrap":"")),e.R7$(3),e.JRh(e.bMT(4,6,o.question)?(null!==(n=i.alpha)&&void 0!==n?n:i.key).toLowerCase()+")":(null!==(n=i.alpha)&&void 0!==n?n:i.key)+"."),e.R7$(2),e.Y8G("content",i.content),e.R7$(),e.Y8G("ngIf",o.bankObj&&e.bMT(7,8,o.question))}}function jn(t,a){if(1&t&&(e.j41(0,"div",28),e.DNE(1,kn,8,12,"div",29),e.k0s()),2&t){const n=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",n.question.answersOrigin)}}function On(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",43)(1,"div",35)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",36)(6,"azt-library-common-question-knowledge-unit-to-auto-suggestion",44),e.bIt("selectKnowledgeEmit",function(o){e.eBV(n);const s=e.XpG(2);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("questionObj",n.question)("bankObj",n.bankObj)("useQuestionIdToSuggestion",!0)}}function wn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",4)(1,"div",5),e.DNE(2,yn,2,1,"div",6),e.j41(3,"div",7),e.DNE(4,xn,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9)(6,"div",10)(7,"div",9)(8,"div",11)(9,"input",12),e.mxI("ngModelChange",function(o){e.eBV(n);const s=e.XpG();return e.DH7(s.question.isChecked,o)||(s.question.isChecked=o),e.Njj(o)}),e.k0s()(),e.j41(10,"label",13),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"mat-select",14)(14,"mat-option",15),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"mat-option",15),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.j41(20,"mat-option",15),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s(),e.j41(23,"mat-option",15),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()()(),e.DNE(26,In,2,4,"div",16),e.nI1(27,"isTrueFalseAnswer"),e.k0s(),e.j41(28,"div",17)(29,"azt-similar-question-box-in-create-mode",18),e.bIt("reCallSimilarQuestionEmit",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.reCallSimilarQuestionEmit.emit())})("deleteSimilarQuestionEmit",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.deleteSimilarQuestionEmit.emit())}),e.k0s()()(),e.nrm(30,"azt-dynamic-hook",19),e.k0s(),e.DNE(31,jn,2,2,"div",20),e.nI1(32,"isOneChoiceAnswer"),e.nI1(33,"isTrueFalseAnswer"),e.j41(34,"div",21),e.nrm(35,"azt-question-answer-view-with-simple-result-box-for-teacher",22),e.k0s(),e.DNE(36,On,7,6,"div",23),e.nI1(37,"isTrueFalseAnswer"),e.k0s()()}if(2&t){let n;const i=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),e.Y8G("id","question_render_container_"+i.question.id)("ngClass",e.eq3(51,bn,i.question.attachments.length>0)),e.R7$(),e.Y8G("ngIf",null==i.question.groupInfo?null:i.question.groupInfo.isFirstInGroup),e.R7$(2),e.Y8G("ngIf",i.question.attachments.length>0),e.R7$(5),e.Y8G("id","isShowChecked_"+i.question.id),e.R50("ngModel",i.question.isChecked),e.R7$(),e.FS9("for","isShowChecked_"+i.question.id),e.R7$(),e.SpI(" ",e.bMT(12,33,"lang_auto_cau")+" "+(null!=i.question.labelIndex?i.question.labelIndex:i.index+1)," "),e.R7$(2),e.Y8G("ngModel",i.question.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(16,35,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(19,37,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(22,39,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(25,41,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",!e.bMT(27,43,i.question)),e.R7$(3),e.Y8G("bankObj",i.bankObj)("currentQuestionObjs",i.currentQuestionObjs)("question",i.question)("similarStatus",i.similarStatus),e.R7$(),e.Y8G("content",null!==(n=i.question.content)&&void 0!==n?n:""),e.R7$(),e.Y8G("ngIf",(e.bMT(32,45,i.question)||e.bMT(33,47,i.question))&&i.question.answers&&i.question.answers.length>0),e.R7$(4),e.Y8G("questionObj",i.question),e.R7$(),e.Y8G("ngIf",i.bankObj&&!e.bMT(37,49,i.question))}}let Tn=(()=>{var t;class a extends ue.I{constructor(){super(...arguments),this.follower=new G.e,this.selectKnowledgeEmit=new e.bkB,this.reCallSimilarQuestionEmit=new e.bkB,this.deleteSimilarQuestionEmit=new e.bkB}ngOnInit(){super.ngOnInit();let i=new _e.C(!0,!1,!1);super.initData(i,this.follower,this.question)}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-question-library-in-import-mode"]],inputs:{currentQuestionObjs:"currentQuestionObjs",question:"question",index:"index",follower:"follower",knowledgeObjs:"knowledgeObjs",bankObj:"bankObj",similarStatus:"similarStatus"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit",reCallSimilarQuestionEmit:"reCallSimilarQuestionEmit",deleteSimilarQuestionEmit:"deleteSimilarQuestionEmit"},features:[e.Vt3],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container-ebank","p-3","border-none","transition-3s",3,"id","ngClass"],["class","group-content-of-question-standalone",4,"ngIf"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"form-check","mr-2"],["type","checkbox",1,"show-code","form-check-input",3,"ngModelChange","id","ngModel"],[1,"question-standalone-label","whitespace-nowrap","mr-2","cursor-pointer",3,"for"],[3,"ngModel","disabled"],[3,"value"],["class","ml-3",4,"ngIf"],[1,"sm:ml-auto"],[3,"reCallSimilarQuestionEmit","deleteSimilarQuestionEmit","bankObj","currentQuestionObjs","question","similarStatus"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex"],[3,"questionObj"],["class","box-help p-2",4,"ngIf"],[1,"group-content-of-question-standalone"],[3,"questionObj","isShowList"],[1,"ml-3"],[3,"questionObj","currentQuestionTags","useQuestionIdToSuggestion","bankObj"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",3,"ngStyle",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6",3,"ngStyle"],[1,"answer-label"],["class","w-full",4,"ngIf"],[1,"w-full"],[1,"box-help",2,"margin-top","20px",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","ngClass","questionObj","currentAnswerKey","bankObj"],[1,"flex","mt-2",2,"padding","0px 15px"],[1,"items-center"],[2,"vertical-align","middle"],[1,"ml-2"],[3,"questionObj","currentAnswerKey","bankObj"],[1,"box-help","p-2"],[3,"selectKnowledgeEmit","questionObj","bankObj","useQuestionIdToSuggestion"]],template:function(i,o){if(1&i&&(e.j41(0,"div",1),e.DNE(1,vn,1,3,"div",2)(2,wn,38,53,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("id","question_render_element_"+o.question.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,c.B3,K.wT,J.VO,u.Zm,u.BC,u.vS,me.N,pe.c,ge.C,be.l,dn.M,P.x,un.U,_n.n,mn.v,pn.k,x.wp,x.V6,x.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),a})();function Sn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",2)(1,"azt-question-standalone-for-question-library-in-import-mode",3),e.bIt("reCallSimilarQuestionEmit",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.getQuestionsSimilarity())})("deleteSimilarQuestionEmit",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.deleteSimilarQuestion(o))})("applyTagToAllEmit",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.applyTagAll(o))}),e.k0s()()}if(2&t){const n=e.XpG(),i=n.$implicit,o=n.index,s=e.XpG();e.R7$(),e.Y8G("currentQuestionObjs",s.questionObjs)("question",i)("index",o)("follower",s.followerRenderQuest)("bankObj",s.ebankDataObj)("similarStatus",s.similarStatus)}}function Qn(t,a){if(1&t&&(e.qex(0),e.DNE(1,Sn,2,6,"div",1),e.bVm()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.ebankDataObj)}}let Rn=(()=>{var t;class a extends j.H{constructor(){super(...arguments),this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(V.z),this.sAztSimilarQuestionService=(0,e.WQX)(cn.z),this.sAztQuestionTagService=(0,e.WQX)(de.c),this.similarStatus="loading",this.followerRenderQuest=new G.e,this.bankKnowledgeObjs=[],this.questionTags=[]}applyTagAll(i){const o=this.questionObjs.indexOf(i);this.questionObjs.forEach((s,r)=>{r<=o||(s.tags=i.tags)})}deleteSimilarQuestion(i){const o=this.questionObjs.findIndex(s=>s===i);-1!==o&&this.questionObjs.splice(o,1),this.getQuestionsSimilarity()}getQuestionsSimilarity(){this.similarStatus="loading";let i=this.questionObjs.map(o=>({questionId:o.id,questionContent:"",answerContents:[]}));this.ebankDataObj&&this.sAztSimilarQuestionService.callApiToGetSimilarQuestions(!0,this.ebankDataObj,i,o=>{this.similarStatus="success",this.questionObjs.forEach(s=>{let r=o.find(_=>_.questionId==s.id)?.similarResponse;s.similarQuestionInfo={similarRate:r?.maxSimilarRate,duplicateAccept:void 0,duplicateMetadata:r}})},o=>{this.similarStatus="error",this.errorStatusObj(o,!0)})}validKnowledgeAndTags(){this.questionObjs.forEach(i=>{i.objectiveId&&!this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjBySuggestId(this.bankKnowledgeObjs,i.objectiveId)&&(i.objectiveId=void 0),i.configAnswers.forEach(o=>{o.objectiveId&&!this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjBySuggestId(this.bankKnowledgeObjs,o.objectiveId)&&(o.objectiveId=void 0)}),i.tags=i.tags.filter(o=>this.questionTags.map(s=>s.code).includes(o.code))})}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.sAztQuestionTagService.getQuestionTags().subscribe(i=>{this.questionTags=i,this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.questionBankId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.ebankDataObj=o.data.bankObj,this.bankKnowledgeObjs=o.data.objs,this.validKnowledgeAndTags(),this.getQuestionsSimilarity()})})}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-list-import-questions"]],inputs:{questionObjs:"questionObjs",questionBankId:"questionBankId"},features:[e.Vt3],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","box mb-5",4,"ngIf"],[1,"box","mb-5"],[3,"reCallSimilarQuestionEmit","deleteSimilarQuestionEmit","applyTagToAllEmit","currentQuestionObjs","question","index","follower","bankObj","similarStatus"]],template:function(i,o){1&i&&e.DNE(0,Qn,2,1,"ng-container",0),2&i&&e.Y8G("ngForOf",o.questionObjs)},dependencies:[c.Sq,c.bT,Tn],encapsulation:2}),a})();function En(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",2),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function Mn(t,a){1&t&&e.nrm(0,"azt-loading-ui",22)}function Fn(t,a){1&t&&e.nrm(0,"lucide-icon",23),2&t&&e.Y8G("size",16)}function An(t,a){1&t&&e.nrm(0,"azt-loading-ui")}function zn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"span",6),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",7),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"div",8)(10,"flexed-on-the-top",9)(11,"div",10)(12,"div",11)(13,"input",12),e.bIt("change",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.changeSelectAll())}),e.k0s(),e.j41(14,"label",13),e.EFF(15),e.nI1(16,"mytranslate"),e.nI1(17,"mytranslate"),e.nI1(18,"mytranslate"),e.k0s()(),e.j41(19,"button",14),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.handleSubmitData())}),e.DNE(20,Mn,1,0,"azt-loading-ui",15),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()()()()(),e.j41(23,"div",16)(24,"button",17),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.automaticallyClassify())}),e.DNE(25,Fn,1,1,"lucide-icon",18)(26,An,1,0,"azt-loading-ui",19),e.j41(27,"span",20),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()(),e.nrm(30,"app-view-list-import-questions",21),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,14,"lang_azt_categorize_requirements_for_each_question")," "),e.R7$(3),e.SpI(" ","("+n.questionObjs.length+" "+e.bMT(8,16,"lang_notice_question")+")"," "),e.R7$(3),e.Y8G("colorBackground","#f0f8ffe8"),e.R7$(3),e.Y8G("formControl",n.selectAllQuestion),e.R7$(2),e.SpI(" ",e.bMT(16,18,"lang_auto_chon_tat_ca")+" ("+e.bMT(17,20,"lang_homework_export_homework_choose")+" "+n.getTotalSelected()+" "+e.bMT(18,22,"lang_testbank_offline_test_question")+")"," "),e.R7$(4),e.Y8G("disabled",n.isSaveLoading),e.R7$(),e.Y8G("ngIf",n.isSaveLoading),e.R7$(),e.SpI(" ",e.bMT(22,24,"lang_azt_save_to_the_bank")," "),e.R7$(3),e.Y8G("disabled",n.automaticallyClassifyLoading),e.R7$(),e.Y8G("ngIf",!n.automaticallyClassifyLoading),e.R7$(),e.Y8G("ngIf",n.automaticallyClassifyLoading),e.R7$(2),e.JRh(e.bMT(29,26,"lang_azt_automatically_classify")),e.R7$(2),e.Y8G("questionObjs",n.questionObjs)("questionBankId",n.bankId)}}let qn=(()=>{var t;class a extends j.H{getTotalSelected(){let i=this.questionObjs.filter(s=>s.isChecked).length,o=i===this.questionObjs.length;return this.selectAllQuestion.value!=o&&this.selectAllQuestion.setValue(o),i}changeSelectAll(){this.questionObjs.forEach(i=>i.isChecked=this.selectAllQuestion.value)}isDisable(){return this.questionObjs.some(o=>null==o.similarQuestionInfo)}handleSubmitData(){let i=this.questionObjs.filter(r=>r.isChecked);if(!this.getTotalSelected())return this.showErrorSnack("lang_azt_please_select_at_least_one_question_to_save");const o=this.sAztValidQuestionLibraryService.getErrorQuestionObj(i,this.questionObjs);if(o)return this.sAztValidQuestionLibraryService.goToPositionByQuestionObj(o);let s=i.map(r=>({questionId:r.id,tags:r.tags.map(_=>_.code).filter(this.commonService.notEmpty)??[],questionKey:r.id.toString(),knowledgeId:r.knowledgeId,ebankFrameId:r.ebankFrameId,objectiveId:r.objectiveId,similarRate:r.similarQuestionInfo?.similarRate??0,duplicateAccept:r.similarQuestionInfo?.duplicateAccept,duplicateMetadata:r.similarQuestionInfo?.duplicateMetadata,answers:r.configAnswers?r.configAnswers.map(_=>({answerKey:_.key,objectiveId:_.objectiveId,tag:_.tagCode})):[]}));this.saveQuestionObjs(s)}automaticallyClassify(){const i={objectives:this.objectiveList.map(o=>o.name),questions:this.questionObjs.map(o=>this.standardQuestionData(o))};this.automaticallyClassifyLoading=!0,this.waitDestroy(this.wrapApiResponse(this.ocrService.aiApiV1OcrClassifyQuestionsToObjectivePost(i)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.waitResultApi(o.data.id,s=>{const r=s?.objectiveIndexes??[];this.questionObjs.forEach((_,T)=>{_.ebankFrameId=this.objectiveList[r[T]]?.id}),this.automaticallyClassifyLoading=!1},s=>this.errorStatusObj(s,!0))}))}saveQuestionObjs(i){this.isSaveLoading=!0,this.ebankQuestionService.apiEbanksQuestionsPost({ebankId:this.bankId,fileName:"Import",questions:i}).subscribe(s=>{if(this.isSaveLoading=!1,!s.success)return this.showErrorSnack(s.message);this.showSuccessSnack("lang_core_luu_vao_ngan_hang_thanh_cong"),this.myNavigation(`/admin/question-library/view-question-library/${Number(this.bankId)}/0`)})}standardQuestionData(i){let o=this.commonService.parseQuestionContent(i?.content??"");return i.answers?.forEach(s=>{o+="-"+this.commonService.parseQuestionContent(s.content??"")}),o.trim()}initData(){this.initStatusObj(),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.bankId).subscribe(i=>{if(i.errorMessage||!i.data)return this.errorStatusObj(i.errorMessage??"",!0);this.bankObj=i.data.bankObj,this.objectiveList=this.flattenObjectiveNodes(this.bankObj.frames);let o=[];this.examQuestions.forEach(s=>o.push(...s.questionObjs)),this.loadQuest(o,s=>{this.questionObjs=s,this.questionObjs.forEach(r=>r.isChecked=!1),this.stopStatusObj()})})}loadQuest(i,o){const s=this.commonService.castJsonToClassObjs(H.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(s??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s??[])})}listenChangeQuestionTagEvent(){this.waitDestroy(this.sAztListenQuestionTagChangesService.listenSetTagEventOfAllQuestions().subscribe(i=>{this.questionObjs=this.sAztApplyAllTagQuestionParserService.applyAllTagsEventForQuestions(this.questionObjs,i)}))}flattenObjectiveNodes(i){const o=[];return i.forEach(s=>this.traverseAndCollect(s,o)),o}traverseAndCollect(i,o){"objective"===i.suggestModel&&o.push(i),i.children?.forEach(s=>this.traverseAndCollect(s,o))}waitResultApi(i,o,s){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(i)).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0);if("fail"==r.data?.status)return s("lang_tool_ai_call_long_prompt_fail");if("running"==r.data?.status)return setTimeout(()=>this.waitResultApi(i,o,s),5e3);let _=this.commonService.castJsonToObj(r.data?.result??"");return null==_?s("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(_)}))}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.initData(),this.listenChangeQuestionTagEvent()}constructor(i,o,s){super(),this.ebankQuestionService=i,this.answerTypeService=o,this.ocrService=s,this.bankId=0,this.examQuestions=[],this.questionRenderService=(0,e.WQX)(Z.g),this.sAztValidQuestionLibraryService=(0,e.WQX)(rn.P),this.configRenderService=new W.y(!0),this.sAztListenQuestionTagChangesService=(0,e.WQX)(ce.c),this.sAztApplyAllTagQuestionParserService=(0,e.WQX)(sn.Y),this.aiLongRunningTaskService=(0,e.WQX)(F.Qk),this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(V.z),this.questionObjs=[],this.isSaveLoading=!1,this.selectAllQuestion=new u.MJ(!1,{nonNullable:!0}),this.objectiveList=[],this.automaticallyClassifyLoading=!1}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(E.N8),e.rXU(ln._),e.rXU(F.so))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-import-question-to-library-by-list-exam"]],inputs:{bankId:"bankId",examQuestions:"examQuestions"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"config-import-question","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"font-medium"],[1,"text-lg","mr-3"],[1,"text-slate-500"],[1,"sm:ml-auto","mt-3","sm:mt-0"],[3,"colorBackground"],[1,"flex","items-center"],[1,"form-check","mr-3"],["id","select-all-question","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","select-all-question",1,"form-check-label","font-medium"],[1,"btn","btn-primary","ml-auto",3,"click","disabled"],["class","mr-2",4,"ngIf"],[1,"mb-4","mt-2"],[1,"btn","btn-outline-primary",3,"click","disabled"],["name","shapes",3,"size",4,"ngIf"],[4,"ngIf"],[1,"ml-2"],[3,"questionObjs","questionBankId"],[1,"mr-2"],["name","shapes",3,"size"]],template:function(i,o){if(1&i&&e.DNE(0,En,1,1,"azt-loading-effect",1)(1,zn,31,28,"ng-template",null,0,e.C5r),2&i){const s=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.bT,u.Zm,u.BC,u.l_,B.K,Q.R,Qe.$,m.WGl,Rn,x.wp],encapsulation:2}),a})();const Ln=t=>({flex:t}),Gn=t=>({"w-full justify-end":t});function Dn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",5)(2,"div",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"flexed-on-the-top",7)(6,"div",8)(7,"button",9),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.getQuestionObjs())}),e.j41(8,"span",10),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()(),e.j41(12,"div",11)(13,"coazt-exam-tree-node-box",12),e.bIt("selectedExamEmit",function(o){e.eBV(n);const s=e.XpG();return e.Njj(s.selectExamsEvent(o))}),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(14,Ln,!n.isMobileDevice)),e.R7$(2),e.SpI(" ",e.bMT(4,10,"lang_select_folder_or_exam_to_import")," "),e.R7$(2),e.Y8G("colorBackground","#f0f8ffe8"),e.R7$(),e.Y8G("ngClass",e.eq3(16,Gn,n.isMobileDevice)),e.R7$(),e.Y8G("disabled",0===n.examsSelected.length),e.R7$(2),e.SpI("(",n.examsSelected.length,")"),e.R7$(),e.SpI(" ",e.bMT(11,12,"lang_payment_return_continue_buy")," "),e.R7$(3),e.Y8G("selectedExamObjs",n.examsSelected)("destroyCacheWhenEnd",!1)("getOnlyCapacityExam",!0)}}function $n(t,a){if(1&t&&e.nrm(0,"app-import-question-to-library-by-list-exam",13),2&t){const n=e.XpG();e.Y8G("bankId",n.bankId)("examQuestions",n.examQuestions)}}function Nn(t,a){if(1&t&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"span",17),e.nrm(4,"azt-loading-ui"),e.k0s(),e.j41(5,"div",18),e.EFF(6),e.k0s()()()()),2&t){const n=e.XpG();e.R7$(6),e.JRh(n.logConfig.msg)}}let Pn=(()=>{var t;class a extends j.H{selectExamsEvent(i){this.examsSelected=i}getQuestionObjs(){this.examQuestions=[];let i=this.commonService.myTranslateInstant("lang_core_dang_lay_du_lieu_de_thi");this.logConfig.setStatus(i);let o=[];this.examsSelected.forEach((s,r)=>o.push(this.runGetDataOfOneExam(s,r))),this.waitDestroy(this.sAztConcurrencyApiService.processObservables(1,o,!0).subscribe(s=>{this.myNavigationWithQueryString(`/admin/question-library/import-question-to-library/${this.bankId}`,`?backto=/admin/question-library/import-question-to-library/${this.bankId}`),this.isViewQuestions=!0,this.logConfig.stopStatus()}))}runGetDataOfOneExam(i,o){return this.getQuestionsOfOneExam(i.examId,s=>{this.examQuestions=[],this.showErrorSnack(s),this.logConfig.stopStatus()},s=>{let r=this.commonService.myTranslateInstant("lang_core_dang_lay_du_lieu_de_thi"),_=Math.floor((o+1)/this.examsSelected.length*100);this.logConfig.setStatus(`${r} ${_}%`),this.examQuestions.push(s)})}getQuestionsOfOneExam(i,o,s){return new U.c(r=>{this.examService.apiExamGetQuestionsIdGet(i).subscribe(_=>{if(!_.success||!_.data)return o(_.message);s(_.data),r.complete()})})}ngOnInit(){super.ngOnInit(),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.waitDestroy((0,le.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let i=this.commonService.getMyQueryParam("backto");this.backLink=i??`/admin/question-library/choose-import-question-mode/${this.bankId}`,i||(this.isViewQuestions=!1)})),this.myNavigation(`/admin/question-library/import-question-to-library/${this.bankId}`)}constructor(i,o,s){super(),this.activeRoute=i,this.examService=o,this.sAztConcurrencyApiService=s,this.sAztExamTreeService=(0,e.WQX)(nn.B),this.bankId=0,this.backLink="",this.examsSelected=[],this.logConfig=new tn.J,this.examQuestions=[],this.isViewQuestions=!1,this.sAztExamTreeService.clearAllCaches()}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(p.nX),e.rXU(Y.RW),e.rXU(on.Z))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-import-question-to-library"]],features:[e.Vt3],decls:6,vars:4,consts:[["question",""],[3,"headerBackToLink"],[1,"config-import-question","mt-5"],[4,"ngIf","ngIfElse"],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"mb-3","justify-between","items-center",3,"ngClass"],[1,"text-lg","font-medium","mb-5"],[3,"colorBackground"],[1,"flex",3,"ngClass"],[1,"btn","btn-primary",3,"click","disabled"],[1,"mr-2"],[1,"box","p-3"],[3,"selectedExamEmit","selectedExamObjs","destroyCacheWhenEnd","getOnlyCapacityExam"],[3,"bankId","examQuestions"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block","mr-2"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(i,o){if(1&i&&(e.j41(0,"teacher-layout",1)(1,"div",2),e.DNE(2,Dn,14,18,"div",3)(3,$n,1,2,"ng-template",null,0,e.C5r),e.k0s()(),e.DNE(5,Nn,7,1,"div",4)),2&i){const s=e.sdS(4);e.Y8G("headerBackToLink",o.backLink),e.R7$(2),e.Y8G("ngIf",!o.isViewQuestions)("ngIfElse",s),e.R7$(3),e.Y8G("ngIf",o.logConfig.status)}},dependencies:[c.YU,c.bT,Q.R,Qe.$,an.z,$.Q,qn,x.wp],encapsulation:2}),a})();var Yn=l(30427),fe=l(75434),Re=l(58447),Ee=l(54313),L=l(17818),ee=l(99743),Me=l(81328);const Vn=["*"];function Bn(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",3),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.runAction.emit(!0))}),e.eu8(2,4),e.k0s(),e.bVm()}if(2&t){const n=e.XpG(),i=e.sdS(4);e.R7$(),e.ZvI("wrap-role inline-block w-full ",n.customCssClass,""),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function Un(t,a){if(1&t&&(e.j41(0,"div",5),e.nI1(1,"mytranslate"),e.eu8(2,4),e.k0s()),2&t){const n=e.XpG(),i=e.sdS(4);e.ZvI("wrap-role inline-block w-full ",n.customCssClass,""),e.FS9("matTooltip",e.bMT(1,6,"lang_core_invalid_permission")),e.FS9("matTooltipShowDelay",500),e.R7$(2),e.Y8G("ngTemplateOutlet",i)}}function Xn(t,a){1&t&&e.SdG(0)}let D=(()=>{var t;class a extends j.H{constructor(){super(...arguments),this.creatorUserId=0,this.customCssClass="",this.runAction=new e.bkB,this.questionLibraryPermissionService=(0,e.WQX)(oe),this.currentUserRoles=[],this.hasPermission=!1}getCurrentRoleUser(){this.questionLibraryPermissionService.getRoleQuestionLibrary(this.ebankId,this.creatorUserId).subscribe(i=>{this.currentUserRoles=i,this.hasPermission=this.currentUserRoles.some(o=>this.allowRoles.includes(o))})}ngOnInit(){super.ngOnInit(),this.getCurrentRoleUser()}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-role-question-library-usage"]],inputs:{ebankId:"ebankId",allowRoles:"allowRoles",creatorUserId:"creatorUserId",customCssClass:"customCssClass"},outputs:{runAction:"runAction"},features:[e.Vt3],ngContentSelectors:Vn,decls:5,vars:2,consts:[["notHavePermission",""],["showContent",""],[4,"ngIf","ngIfElse"],[3,"click"],[3,"ngTemplateOutlet"],[2,"opacity","0.6",3,"matTooltip","matTooltipShowDelay"]],template:function(i,o){if(1&i&&(e.NAR(),e.DNE(0,Bn,3,4,"ng-container",2)(1,Un,3,8,"ng-template",null,0,e.C5r)(3,Xn,1,0,"ng-template",null,1,e.C5r)),2&i){const s=e.sdS(2);e.Y8G("ngIf",o.hasPermission)("ngIfElse",s)}},dependencies:[c.bT,c.T3,N.oV,x.wp],encapsulation:2}),a})();const Kn=()=>["owner","creator"],Jn=()=>({"mr-1":!0});function Wn(t,a){1&t&&e.nrm(0,"azt-loading-ui",4),2&t&&e.Y8G("size",16)}function Hn(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"long_core_chon_khung_kien_thuc")))}function Zn(t,a){if(1&t&&e.nrm(0,"azt-dynamic-hook",12),2&t){const n=e.XpG(3);e.Y8G("content",n.currentKnowledgeTreeNode.name)}}function ei(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",6),e.DNE(2,Hn,3,3,"span",7)(3,Zn,1,1,"azt-dynamic-hook",8),e.j41(4,"azt-role-question-library-usage",9),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.openKnowledgeObjectiveTreeNodeDialog())}),e.j41(5,"a",10),e.nrm(6,"lucide-icon",11),e.j41(7,"span"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(2),e.Y8G("ngIf",!n.currentKnowledgeTreeNode),e.R7$(),e.Y8G("ngIf",n.currentKnowledgeTreeNode),e.R7$(),e.Y8G("creatorUserId",n.tenantId)("ebankId",n.bankObj.id)("allowRoles",e.lJ4(9,Kn)),e.R7$(2),e.Y8G("ngClass",e.lJ4(10,Jn)),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_sua"))}}function ti(t,a){1&t&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function ni(t,a){if(1&t&&e.DNE(0,ei,10,11,"ng-container",5)(1,ti,3,3,"ng-template",null,1,e.C5r),2&t){const n=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.bankKnowledgeObjs.length>0)("ngIfElse",n)}}let Fe=(()=>{var t;class a extends j.H{openKnowledgeObjectiveTreeNodeDialog(){this.sAztDialogService.open(Me.y,{data:{bankObj:this.bankObj,selectedObj:{ebankFrameId:this.ebankFrameId}},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{o&&(this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionUpdateQuestionKnowledgePost({ebankId:this.bankObj.id,questions:[{questionId:this.questionObj.id,knowledgeId:o.id,objectiveId:o.suggestId}]}).subscribe(r=>{if(!r)return this.errorStatusObj("lang_update_question_knowledge_unsuccessfully",!0);this.updateKnowledgeAndObjective(o.id,!0),this.successStatusObj("lang_update_question_knowledge_successfully",!0)})))})}updateKnowledgeAndObjective(i,o){this.ebankFrameId=i,this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjById(this.bankKnowledgeObjs,this.ebankFrameId),this.currentKnowledgeTreeNode&&(this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForCommonQuestion(this.questionObj,{id:this.ebankFrameId,objectiveId:this.currentKnowledgeTreeNode.suggestId}),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){this.initStatusObj(),this.ebankFrameId=this.questionObj.ebankFrameId??0,this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.bankObj.id).subscribe(i=>{if(i.errorMessage||!i.data)return this.errorStatusObj(i.errorMessage??"",!0);this.bankKnowledgeObjs=i.data.objs,this.updateKnowledgeAndObjective(this.ebankFrameId??0,!1),this.stopStatusObj()})}constructor(i,o){super(),this.questionService=i,this.sAztDialogService=o,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(V.z),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(ee.I),this.tenantId=0,this.selectKnowledgeEmit=new e.bkB,this.bankKnowledgeObjs=[]}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(Y.wP),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-library-common-question-knowledge-unit-to-update"]],inputs:{questionObj:"questionObj",bankObj:"bankObj",tenantId:"tenantId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],decls:4,vars:2,consts:[["loadingDone",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","p-0"],[4,"ngIf"],[3,"content",4,"ngIf"],[1,"flex","items-center",2,"align-content","flex-end",3,"runAction","creatorUserId","ebankId","allowRoles"],[1,"ml-2","link__hover","link__color","clickable",2,"display","flex","align-items","center"],["name","tags","size","16",3,"ngClass"],[3,"content"],[1,"pl-3","pb-3"]],template:function(i,o){if(1&i&&(e.j41(0,"div",2),e.DNE(1,Wn,1,1,"azt-loading-ui",3)(2,ni,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.bT,m.WGl,Q.R,P.x,D,x.wp],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),a})();function ii(t,a){1&t&&e.nrm(0,"azt-loading-ui",8),2&t&&e.Y8G("size",16)}function oi(t,a){if(1&t&&(e.j41(0,"span",10),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2),i=e.sdS(5);e.FS9("matTooltip",e.bMT(1,3,n.currentQuestionTagName+"_name")),e.Y8G("matMenuTriggerFor",i),e.R7$(2),e.SpI(" ",e.bMT(3,5,n.currentQuestionTagName)," ")}}function ai(t,a){if(1&t&&(e.j41(0,"div",11)(1,"span",12),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.nrm(4,"lucide-icon",13),e.k0s()),2&t){e.XpG(2);const n=e.sdS(5);e.Y8G("matMenuTriggerFor",n),e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),"")}}function si(t,a){if(1&t&&e.DNE(0,oi,4,7,"span",9)(1,ai,5,4,"ng-template",null,2,e.C5r),2&t){const n=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.currentQuestionTagName)("ngIfElse",n)}}function ri(t,a){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",14),e.bIt("click",function(){const o=e.eBV(n).$implicit,s=e.XpG();return e.Njj(s.changeTag(o))}),e.EFF(2),e.k0s()()}if(2&t){const n=a.$implicit;e.R7$(2),e.SpI(" ",n.showName," ")}}let Ae=(()=>{var t;class a extends j.H{changeTag(i){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionUpdateQuestionTagsPost({ebankId:this.bankId,questions:[{questionId:this.questionObj.id,tagId:i.id}]}).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);this.successStatusObj("lang_update_question_tag_successfully",!0),this.setTag([i])}))}setTag(i){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForCommonQuestion(this.questionObj,i),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"common_question",tagType:"CURRENT_QUESTION",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:i}),this.initData()}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags);let i=this.commonService.getFirstOfArray(this.questionObj.tags??[])?.code;this.currentQuestionTagName=i?"azt_lang_tag_"+i:void 0}ngOnChanges(){this.sAztQuestionTagService.getQuestionTags().subscribe(i=>{this.questionTags=i,this.initData()})}constructor(i){super(),this.questionService=i,this.sAztQuestionTagService=(0,e.WQX)(de.c),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(ee.I),this.sAztListenQuestionTagChangesService=(0,e.WQX)(ce.c),this.questionTags=[]}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(Y.wP))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-library-common-question-tag-with-edit-mode"]],inputs:{questionObj:"questionObj",currentQuestionTags:"currentQuestionTags",bankId:"bankId"},features:[e.Vt3,e.OA$],decls:9,vars:3,consts:[["loadingDone",""],["tags","matMenu"],["notHaveQuestionTag",""],[1,"clickable"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"ml-3",3,"size"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center",3,"matMenuTriggerFor","matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",3,"matMenuTriggerFor","matTooltip"],[1,"inline-flex","items-center",3,"matMenuTriggerFor"],[1,"text-pending","mr-2"],["name","tag","size","16"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"]],template:function(i,o){if(1&i&&(e.j41(0,"span",3),e.DNE(1,ii,1,1,"azt-loading-ui",4)(2,si,3,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(4,"mat-menu",null,1)(6,"div",5)(7,"ul",6),e.DNE(8,ri,3,1,"li",7),e.k0s()()()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(7),e.Y8G("ngForOf",o.viewQuestionTags)}},dependencies:[c.Sq,c.bT,L.kk,L.Cp,N.oV,m.WGl,Q.R,x.wp],encapsulation:2}),a})();function li(t,a){1&t&&e.nrm(0,"azt-loading-ui",8),2&t&&e.Y8G("size",16)}function ci(t,a){if(1&t&&(e.j41(0,"span",10),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2),i=e.sdS(5);e.FS9("matTooltip",e.bMT(1,3,n.currentQuestionTagName+"_name")),e.Y8G("matMenuTriggerFor",i),e.R7$(2),e.SpI(" ",e.bMT(3,5,n.currentQuestionTagName)," ")}}function di(t,a){if(1&t&&(e.j41(0,"div",11)(1,"span",12),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.nrm(4,"lucide-icon",13),e.k0s()),2&t){e.XpG(2);const n=e.sdS(5);e.Y8G("matMenuTriggerFor",n),e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),"")}}function ui(t,a){if(1&t&&e.DNE(0,ci,4,7,"span",9)(1,di,5,4,"ng-template",null,2,e.C5r),2&t){const n=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.currentQuestionTagName)("ngIfElse",n)}}function _i(t,a){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",14),e.bIt("click",function(){const o=e.eBV(n).$implicit,s=e.XpG();return e.Njj(s.changeTag(o))}),e.EFF(2),e.k0s()()}if(2&t){const n=a.$implicit;e.R7$(2),e.SpI(" ",n.showName," ")}}let ze=(()=>{var t;class a extends j.H{changeTag(i){this.callApiSetTag(i).subscribe(o=>{o&&this.setTag([i])})}callApiSetTag(i){return new U.c(o=>{this.initStatusObj();let s=this.questionObj.configAnswers.find(_=>_.key==this.currentAnswerKey);this.waitDestroy(this.questionService.apiQuestionUpdateQuestionTagsPost({ebankId:this.bankId,questions:[{questionId:this.questionObj.id,answers:[{answerKey:this.currentAnswerKey,objectiveId:s?.objectiveId,tag:i?.code??""}]}]}).subscribe(_=>{if(!_)return o.next(!1),o.complete(),this.errorStatusObj("lang_update_question_tag_unsuccessfully",!0);this.successStatusObj("lang_update_question_tag_successfully",!0),o.next(!0),o.complete()}))})}setTag(i){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForTrueFalseQuestion(this.questionObj,this.currentAnswerKey,i),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"true_false_question",tagType:"CURRENT_ANSWER",questionObj:this.questionObj,questionViewObj:void 0,answerKey:this.currentAnswerKey,questionIndex:void 0,tagObjs:i}),this.initData()}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags),this.currentQuestionTagName=this.sAztQuestionTagService.findCurrentTag(this.questionTags,this.questionObj.configAnswers,this.currentAnswerKey)}ngOnChanges(){this.sAztQuestionTagService.getQuestionTags().subscribe(i=>{this.questionTags=i,this.initData()})}constructor(i){super(),this.questionService=i,this.sAztQuestionTagService=(0,e.WQX)(de.c),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(ee.I),this.sAztListenQuestionTagChangesService=(0,e.WQX)(ce.c),this.questionTags=[]}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(Y.wP))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-library-true-false-question-tag-with-edit-mode"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",bankId:"bankId"},features:[e.Vt3,e.OA$],decls:9,vars:3,consts:[["loadingDone",""],["tags","matMenu"],["notHaveQuestionTag",""],[1,"clickable"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"ml-3",3,"size"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center",3,"matMenuTriggerFor","matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",3,"matMenuTriggerFor","matTooltip"],[1,"inline-flex","items-center",3,"matMenuTriggerFor"],[1,"text-pending","mr-2"],["name","tag","size","16"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"]],template:function(i,o){if(1&i&&(e.j41(0,"span",3),e.DNE(1,li,1,1,"azt-loading-ui",4)(2,ui,3,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(4,"mat-menu",null,1)(6,"div",5)(7,"ul",6),e.DNE(8,_i,3,1,"li",7),e.k0s()()()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(7),e.Y8G("ngForOf",o.viewQuestionTags)}},dependencies:[c.Sq,c.bT,L.kk,L.Cp,N.oV,m.WGl,Q.R,x.wp],encapsulation:2}),a})();const mi=["*"],pi=()=>["owner","creator"],gi=()=>({"mr-1":!0});function bi(t,a){1&t&&e.nrm(0,"azt-loading-ui",4),2&t&&e.Y8G("size",16)}function fi(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"long_core_chon_khung_kien_thuc")))}function hi(t,a){if(1&t&&e.nrm(0,"azt-dynamic-hook",12),2&t){const n=e.XpG(3);e.Y8G("content",n.currentKnowledgeTreeNode.name)}}function vi(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",6),e.DNE(2,fi,3,3,"span",7)(3,hi,1,1,"azt-dynamic-hook",8),e.j41(4,"azt-role-question-library-usage",9),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.openKnowledgeObjectiveTreeNodeDialog())}),e.j41(5,"a",10),e.nrm(6,"lucide-icon",11),e.j41(7,"span"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(2),e.Y8G("ngIf",!n.currentKnowledgeTreeNode),e.R7$(),e.Y8G("ngIf",n.currentKnowledgeTreeNode),e.R7$(),e.Y8G("ebankId",n.bankObj.id)("allowRoles",e.lJ4(8,pi)),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,gi)),e.R7$(2),e.JRh(e.bMT(9,6,"lang_auto_sua"))}}function yi(t,a){1&t&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function xi(t,a){if(1&t&&(e.DNE(0,vi,10,10,"ng-container",5)(1,yi,3,3,"ng-template",null,1,e.C5r),e.SdG(3)),2&t){const n=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.bankKnowledgeObjs.length>0)("ngIfElse",n)}}let qe=(()=>{var t;class a extends j.H{openKnowledgeObjectiveTreeNodeDialog(){this.sAztDialogService.open(Me.y,{data:{bankObj:this.bankObj,selectedObj:{ebankFrameId:this.ebankFrameId}},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{if(!o)return;this.initStatusObj();let s={questionId:this.questionObj.id,answers:[{answerKey:this.currentAnswerKey,objectiveId:o.suggestId,tag:this.questionObj.configAnswers.find(r=>this.commonService.compareLowerCase(r.key,this.currentAnswerKey))?.tagCode??""}]};this.waitDestroy(this.questionService.apiQuestionUpdateQuestionKnowledgePost({ebankId:this.bankObj.id,questions:[s]}).subscribe(r=>{if(!r)return this.errorStatusObj("lang_update_question_knowledge_unsuccessfully",!0);this.updateKnowledgeAndObjective(o.id,!0),this.successStatusObj("lang_update_question_knowledge_successfully",!0)}))})}updateKnowledgeAndObjective(i,o){this.ebankFrameId=i??0,this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjById(this.bankKnowledgeObjs,this.ebankFrameId),this.currentKnowledgeTreeNode&&(this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForTrueFalseQuestion(this.questionObj,{id:this.ebankFrameId,objectiveId:this.currentKnowledgeTreeNode.suggestId},this.currentAnswerKey),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){this.initStatusObj(),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.bankObj.id).subscribe(i=>{if(i.errorMessage||!i.data)return this.errorStatusObj(i.errorMessage??"",!0);this.bankKnowledgeObjs=i.data.objs;let o=this.questionObj.configAnswers.find(s=>this.commonService.compareLowerCase(s.key,this.currentAnswerKey))?.ebankFrameId??0;this.updateKnowledgeAndObjective(o,!1),this.stopStatusObj()})}constructor(i,o){super(),this.questionService=i,this.sAztDialogService=o,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(V.z),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(ee.I),this.selectKnowledgeEmit=new e.bkB,this.bankKnowledgeObjs=[]}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(Y.wP),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-library-true-false-question-knowledge-unit-to-update"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",bankObj:"bankObj"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],ngContentSelectors:mi,decls:4,vars:2,consts:[["loadingDone",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[1,"flex",2,"padding","5px 15px 15px 15px"],[4,"ngIf"],[3,"content",4,"ngIf"],[1,"flex","items-center",2,"align-content","flex-end",3,"runAction","ebankId","allowRoles"],[1,"ml-2","link__hover","link__color","clickable",2,"display","flex","align-items","center"],["name","tags","size","16",3,"ngClass"],[3,"content"],[1,"pl-3","pb-3"]],template:function(i,o){if(1&i&&(e.NAR(),e.j41(0,"div",2),e.DNE(1,bi,1,1,"azt-loading-ui",3)(2,xi,4,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.bT,m.WGl,Q.R,P.x,D,x.wp],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),a})();const Ii=t=>({"skeleton-box-loading":t}),Ci=t=>({"pb-2":t}),ki=t=>({flex:t}),ji=t=>({"justify-between mt-2":t}),Oi=t=>({"flex-wrap":t}),wi=t=>({"padding-mobile":t});function Ti(t,a){if(1&t&&e.nrm(0,"div",4),2&t){const n=e.XpG();e.Y8G("ngClass",e.eq3(1,Ii,n.renderConfigObj.isFirstRender))}}function Si(t,a){if(1&t&&e.nrm(0,"azt-test-audio-ui",27),2&t){const n=e.XpG(2);e.Y8G("questionObj",n.questionObj)("isShowList",!0)}}function Qi(t,a){if(1&t&&(e.j41(0,"div",28),e.EFF(1),e.nI1(2,"isOfflineExam"),e.nI1(3,"mytranslate"),e.k0s()),2&t){let n;const i=e.XpG(2);e.R7$(),e.Lme(" ",i.customQuestionLabel+" "+((null!=i.questionObj.labelIndex?i.questionObj.labelIndex:i.curQuestionIndex)+(null!==(n=i.examObj.startQuestionIndex)&&void 0!==n?n:1))," ",e.bMT(2,2,i.examObj)?" ("+e.bMT(3,4,"lang_auto_hoi_de_thi_offline")+") ":null," ")}}function Ri(t,a){1&t&&(e.j41(0,"div",19),e.EFF(1,"|"),e.k0s())}function Ei(t,a){1&t&&(e.j41(0,"div",19),e.EFF(1,"|"),e.k0s())}function Mi(t,a){1&t&&(e.j41(0,"div",29),e.nI1(1,"mytranslate"),e.nrm(2,"lucide-icon",30),e.k0s()),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function Fi(t,a){1&t&&(e.j41(0,"div",19),e.EFF(1,"|"),e.k0s())}function Ai(t,a){if(1&t&&e.nrm(0,"azt-library-common-question-tag-with-edit-mode",31),2&t){const n=e.XpG(2);e.Y8G("questionObj",n.questionObj)("currentQuestionTags",n.questionObj.tags)("bankId",n.ebankDataObj.id)}}function zi(t,a){1&t&&(e.j41(0,"span",32),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_question_library_id_question"),":\xa0"))}function qi(t,a){1&t&&(e.j41(0,"div",36)(1,"span",37),e.nrm(2,"azt-loading-ui"),e.k0s()())}function Li(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",43)(1,"div",44)(2,"div",45)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",46)(7,"azt-library-true-false-question-knowledge-unit-to-update",47),e.bIt("selectKnowledgeEmit",function(o){e.eBV(n);const s=e.XpG(6);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.j41(8,"div",48)(9,"div",49)(10,"span",50),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",51),e.nrm(14,"azt-library-true-false-question-tag-with-edit-mode",52),e.k0s()()()()()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(5);e.R7$(),e.Y8G("ngClass",e.eq3(14,wi,i.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,10,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("ngClass",i.isMobileDevice?"w-full":"")("questionObj",i.questionObj)("currentAnswerKey",n.key)("bankObj",i.ebankDataObj),e.R7$(4),e.SpI("",e.bMT(12,12,"lang_auto_gan_nhan"),":"),e.R7$(3),e.Y8G("questionObj",i.questionObj)("currentAnswerKey",n.key)("bankId",i.ebankDataObj.id)}}function Gi(t,a){if(1&t&&(e.j41(0,"div",39),e.nI1(1,"isTrueFalseAnswer"),e.j41(2,"b",40),e.EFF(3),e.nI1(4,"isTrueFalseAnswer"),e.k0s(),e.nrm(5,"azt-dynamic-hook",41),e.DNE(6,Li,15,16,"div",42),e.nI1(7,"isTrueFalseAnswer"),e.k0s()),2&t){let n;const i=a.$implicit,o=e.XpG(5);e.Y8G("ngStyle",e.eq3(10,Oi,e.bMT(1,4,o.questionObj)?"wrap":"")),e.R7$(3),e.JRh(e.bMT(4,6,o.questionObj)?(null!==(n=i.alpha)&&void 0!==n?n:i.key).toLowerCase()+")":(null!==(n=i.alpha)&&void 0!==n?n:i.key)+"."),e.R7$(2),e.Y8G("content",i.content),e.R7$(),e.Y8G("ngIf",o.ebankDataObj&&e.bMT(7,8,o.questionObj))}}function Di(t,a){if(1&t&&e.DNE(0,Gi,8,12,"div",38),2&t){const n=e.XpG(4);e.Y8G("ngForOf",n.questionObj.answers)}}function $i(t,a){if(1&t&&(e.j41(0,"div",34),e.DNE(1,qi,3,0,"div",35)(2,Di,1,1,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),i=e.XpG(3);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngIf",i.questionObj.isLoading)("ngIfElse",n)}}function Ni(t,a){if(1&t&&(e.qex(0),e.DNE(1,$i,4,3,"div",33),e.nI1(2,"isOneChoiceAnswer"),e.nI1(3,"isTrueFalseAnswer"),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",(e.bMT(2,1,n.questionObj)||e.bMT(3,3,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0)}}function Pi(t,a){if(1&t&&(e.j41(0,"div",53)(1,"div",54)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",46),e.nrm(6,"azt-dynamic-hook",41),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,2,"lang_auto_huong_dan_giai_upper")),e.R7$(3),e.Y8G("content",n.questionObj.help)}}function Yi(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",55)(1,"div",45)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",46)(6,"azt-library-common-question-knowledge-unit-to-update",56),e.bIt("selectKnowledgeEmit",function(o){e.eBV(n);const s=e.XpG(2);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.k0s()()()}if(2&t){let n;const i=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("tenantId",null!==(n=i.questionObj.tenantId)&&void 0!==n?n:0)("bankObj",i.ebankDataObj)("questionObj",i.questionObj)}}function Vi(t,a){if(1&t&&(e.j41(0,"div",5)(1,"div",6),e.nrm(2,"azt-question-group-content-box",7),e.j41(3,"div",8),e.DNE(4,Si,1,2,"azt-test-audio-ui",9),e.j41(5,"div",10),e.DNE(6,Qi,4,6,"div",11)(7,Ri,2,0,"div",12),e.j41(8,"div",13)(9,"div",14)(10,"mat-select",15)(11,"mat-option",16),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"mat-option",16),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"mat-option",16),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.j41(20,"mat-option",16),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()()(),e.DNE(23,Ei,2,0,"div",12)(24,Mi,3,3,"div",17)(25,Fi,2,0,"div",12),e.nI1(26,"isTrueFalseAnswer"),e.DNE(27,Ai,1,3,"azt-library-common-question-tag-with-edit-mode",18),e.nI1(28,"isTrueFalseAnswer"),e.j41(29,"div",19),e.EFF(30,"|"),e.k0s(),e.j41(31,"div",20),e.DNE(32,zi,3,3,"span",21),e.j41(33,"span",22),e.EFF(34),e.k0s()()()(),e.nrm(35,"azt-question-content-box",7),e.DNE(36,Ni,4,5,"ng-container",23),e.nI1(37,"isOfflineExam"),e.nrm(38,"azt-question-answer-view-with-simple-result-box-for-teacher",24),e.DNE(39,Pi,7,4,"div",25)(40,Yi,7,6,"div",26),e.nI1(41,"isTrueFalseAnswer"),e.k0s()()()),2&t){const n=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto")("padding",n.isMobileDevice?"1px":""),e.Y8G("id","question_render_container_"+n.questionObj.id)("ngClass",e.eq3(57,Ci,n.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),e.R7$(2),e.Y8G("ngIf",n.questionObj.attachments.length>0),e.R7$(),e.Y8G("ngClass",e.eq3(59,ki,!n.isMobileDevice)),e.R7$(),e.Y8G("ngIf",!n.hideQuestionLabel),e.R7$(),e.Y8G("ngIf",!n.hideQuestionLabel&&!n.isMobileDevice),e.R7$(),e.Y8G("ngClass",e.eq3(61,ji,n.isMobileDevice)),e.R7$(2),e.Y8G("ngModel",n.questionObj.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(13,41,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(16,43,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(19,45,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(22,47,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",n.questionObj.isFixAns),e.R7$(),e.Y8G("ngIf",n.questionObj.isFixAns),e.R7$(),e.Y8G("ngIf",!e.bMT(26,49,n.questionObj)),e.R7$(2),e.Y8G("ngIf",!e.bMT(28,51,n.questionObj)&&n.ebankDataObj),e.R7$(5),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(2),e.JRh(n.questionObj.id),e.R7$(),e.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),e.R7$(),e.Y8G("ngIf",!e.bMT(37,53,n.examObj)),e.R7$(2),e.Y8G("questionObj",n.questionObj),e.R7$(),e.Y8G("ngIf",n.questionObj.help),e.R7$(),e.Y8G("ngIf",n.ebankDataObj&&!e.bMT(41,55,n.questionObj))}}let he=(()=>{var t;class a extends ue.I{ngOnInit(){super.ngOnInit();const i=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;this.customQuestionLabel=i?.label??"C\xe2u";let o=new _e.C(this.disableLazy,this.disableRender,this.isExport);super.initData(o,this.follower,this.questionObj)}constructor(){super(),this.follower=new G.e,this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1,this.selectKnowledgeEmit=new e.bkB,this.customQuestionLabel=""}}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-question-library-in-view-mode"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",ebankDataObj:"ebankDataObj",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],decls:4,vars:3,consts:[["elementRended",""],["doneLoad",""],["load_effect_lazy","",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"items-center","mb-2",3,"ngClass"],["class","box-service-question-name",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"flex","items-center",3,"ngClass"],[1,"first-text"],[3,"ngModel","disabled"],[3,"value"],["class","fix-answer",3,"matTooltip",4,"ngIf"],[3,"questionObj","currentQuestionTags","bankId",4,"ngIf"],[1,"edit-question-header-dr"],[1,"first-text","border-none"],["style","color: rgba(0, 0, 0, 0.3803921569)",4,"ngIf"],[1,"font-bold"],[4,"ngIf"],[3,"questionObj"],["class","box-help mt-2 padding-mobile",4,"ngIf"],["class","box-help padding-mobile mt-2",4,"ngIf"],[3,"questionObj","isShowList"],[1,"box-service-question-name"],[1,"fix-answer",3,"matTooltip"],["name","pin","size","16"],[3,"questionObj","currentQuestionTags","bankId"],[2,"color","rgba(0, 0, 0, 0.3803921569)"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],["class","answer col-sm-12 col-md-6",3,"ngStyle",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6",3,"ngStyle"],[1,"answer-label"],[3,"content"],["class","w-full",4,"ngIf"],[1,"w-full"],[1,"box-help",2,"margin-top","20px",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","ngClass","questionObj","currentAnswerKey","bankObj"],[1,"flex",2,"padding","0px 15px"],[1,"items-center"],[2,"vertical-align","middle"],[1,"ml-2"],[3,"questionObj","currentAnswerKey","bankId"],[1,"box-help","mt-2","padding-mobile"],[1,"help-title"],[1,"box-help","padding-mobile","mt-2"],[3,"selectKnowledgeEmit","tenantId","bankObj","questionObj"]],template:function(i,o){if(1&i&&(e.j41(0,"div",2),e.DNE(1,Ti,1,3,"div",3)(2,Vi,42,63,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,c.B3,K.wT,J.VO,N.oV,u.BC,u.vS,m.WGl,me.N,pe.c,ge.C,Q.R,Re.y,Ee.$,be.l,P.x,Fe,Ae,ze,qe,x.wp,x.st,x.V6,x.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}',".box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500;width:-moz-fit-content;width:fit-content}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.padding-mobile[_ngcontent-%COMP%]{padding:10px 0!important}@media screen and (max-width: 500px){.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),a})();const Bi=()=>({}),Ui=t=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:t});function Xi(t,a){1&t&&(e.j41(0,"span",11),e.nrm(1,"azt-loading-ui"),e.k0s())}let ve=(()=>{var t;class a extends X._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.eBanksQuestionService.apiEbanksQuestionsDeletePost({questionIds:[this.data.questionObj.id],ebankId:this.data.ebankId}).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(i,o,s){super(s,o),this.eBanksQuestionService=i,this.dialogRef=o,this.data=s,this.followerRenderQuest=new G.e}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(E.N8),e.rXU(I.CP,8),e.rXU(I.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-remove-question-library-dialog"]],features:[e.Vt3],decls:17,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 200px)"],[1,"text-md","mr-auto","font-bold"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[3,"examObj","questionObj","follower","curQuestionIndex"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger","mw-24",3,"click","disabled"],["class","w-3 mr-2",4,"ngIf"],[1,"w-3","mr-2"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5),e.nrm(8,"azt-question-standalone-for-question-library-in-view-mode",6),e.k0s()()()(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"button",9),e.bIt("click",function(){return o.confirmDelete()}),e.DNE(14,Xi,2,0,"span",10),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(5),e.SpI(" ",e.bMT(6,9,"lang_remove_question_from_library")," "),e.R7$(3),e.Y8G("examObj",e.eq3(16,Ui,e.lJ4(15,Bi)))("questionObj",o.data.questionObj)("follower",o.followerRenderQuest)("curQuestionIndex",o.data.index),e.R7$(3),e.SpI(" ",e.bMT(12,11,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",o.statusObj.loading),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(16,13,"lang_auto_xoa")," "))},dependencies:[c.bT,Q.R,he,x.wp],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),a})();var Ki=l(43234),Ji=l(31613);const Le=(t,a)=>({"btn-danger":t,"btn-success text-white":a}),Wi=()=>[],Hi=()=>["owner","creator"];function Zi(t,a){if(1&t&&(e.j41(0,"button",7,2)(2,"span",8),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"number"),e.k0s(),e.nrm(6,"lucide-icon",9),e.k0s()),2&t){let n,i;const o=e.XpG(),s=e.sdS(5);e.Y8G("ngClass",e.l_i(8,Le,(null!==(n=null==o.question.similarQuestionInfo?null:o.question.similarQuestionInfo.similarRate)&&void 0!==n?n:0)>o.similarQuestionWithRedColor,(null!==(n=null==o.question.similarQuestionInfo?null:o.question.similarQuestionInfo.similarRate)&&void 0!==n?n:0)<=o.similarQuestionWithRedColor))("matMenuTriggerFor",s),e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_ty_le_trung")+": "+e.i5U(5,5,100*(null!==(i=null==o.question.similarQuestionInfo?null:o.question.similarQuestionInfo.similarRate)&&void 0!==i?i:0),"1.2-2")+"%")}}function eo(t,a){if(1&t&&(e.j41(0,"button",10)(1,"span",8),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"number"),e.k0s()()),2&t){let n,i;const o=e.XpG();e.Y8G("ngClass",e.l_i(7,Le,(null!==(n=null==o.question.similarQuestionInfo?null:o.question.similarQuestionInfo.similarRate)&&void 0!==n?n:0)>o.similarQuestionWithRedColor,(null!==(n=null==o.question.similarQuestionInfo?null:o.question.similarQuestionInfo.similarRate)&&void 0!==n?n:0)<=o.similarQuestionWithRedColor)),e.R7$(2),e.JRh(e.bMT(3,2,"lang_auto_ty_le_trung")+": "+e.i5U(4,4,100*(null!==(i=null==o.question.similarQuestionInfo?null:o.question.similarQuestionInfo.similarRate)&&void 0!==i?i:0),"1.2-2")+"%")}}function to(t,a){1&t&&e.nrm(0,"azt-loading-ui",18)}function no(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",11),e.bIt("click",function(o){return e.eBV(n),o.preventDefault(),e.Njj(o.stopPropagation())}),e.j41(1,"div",12),e.nrm(2,"azt-list-similar-questions",13),e.k0s(),e.j41(3,"div",14)(4,"azt-role-question-library-usage",15),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.deleteQuestionObj())}),e.j41(5,"button",16),e.DNE(6,to,1,0,"azt-loading-ui",17),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()()}if(2&t){let n;const i=e.XpG();e.R7$(2),e.Y8G("bankObj",i.bankObj)("question",i.question)("currentQuestionObjs",e.lJ4(10,Wi)),e.R7$(2),e.Y8G("ebankId",i.bankObj.id)("allowRoles",e.lJ4(11,Hi))("creatorUserId",null!==(n=i.question.tenantId)&&void 0!==n?n:0),e.R7$(2),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(8,8,"lang_auto_xoa_cau_hoi")," ")}}let io=(()=>{var t;class a extends j.H{constructor(){super(...arguments),this.deleteSimilarQuestionEmit=new e.bkB,this.similarQuestionWithRedColor=Ki.c.similarQuestionWithRedColor,this.sAztDialogService=(0,e.WQX)(A.i)}deleteQuestionObj(){this.sAztDialogService.open(ve,{width:"750px",data:{questionObj:this.question,ebankId:this.bankObj.id??0,index:1},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&(this.successStatusObj("lang_cms_delete_success",!0),this.deleteSimilarQuestionEmit.emit())})}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-similar-question-box-in-activity-mode"]],viewQuery:function(i,o){if(1&i&&e.GBs(L.Cp,5),2&i){let s;e.mGM(s=e.lsd())&&(o.menuTrigger=s.first)}},inputs:{bankObj:"bankObj",question:"question"},outputs:{deleteSimilarQuestionEmit:"deleteSimilarQuestionEmit"},features:[e.Vt3],decls:7,vars:3,consts:[["noDuplicate",""],["duplicateQuestionsMenu","matMenu"],["menuTrigger","matMenuTrigger"],[1,"ml-auto",2,"padding","0"],["class","btn btn-sm",3,"ngClass","matMenuTriggerFor",4,"ngIf","ngIfElse"],["xPosition","before"],["style","max-width: 800px; background: rgb(0 0 0 / 6%)","class","p-3 box",3,"click",4,"ngIf"],[1,"btn","btn-sm",3,"ngClass","matMenuTriggerFor"],[1,"ml-3"],["name","chevron-down","size","18"],[1,"btn","btn-sm",3,"ngClass"],[1,"p-3","box",2,"max-width","800px","background","rgb(0 0 0 / 6%)",3,"click"],[1,"box",2,"max-height","350px","overflow","scroll"],[3,"bankObj","question","currentQuestionObjs"],[1,"mt-3","text-right"],[3,"runAction","ebankId","allowRoles","creatorUserId"],[1,"btn","btn-sm","btn-danger","mr-3"],["class","mr-1",4,"ngIf"],[1,"mr-1"]],template:function(i,o){if(1&i&&(e.j41(0,"div",3),e.DNE(1,Zi,7,11,"button",4)(2,eo,5,10,"ng-template",null,0,e.C5r),e.j41(4,"mat-menu",5,1),e.DNE(6,no,9,12,"div",6),e.k0s()()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",null==o.question.similarQuestionInfo||null==o.question.similarQuestionInfo.duplicateMetadata||null==o.question.similarQuestionInfo.duplicateMetadata.similarityQuestions?null:o.question.similarQuestionInfo.duplicateMetadata.similarityQuestions.length)("ngIfElse",s),e.R7$(5),e.Y8G("ngIf",null==o.menuTrigger?null:o.menuTrigger.menuOpen)}},dependencies:[c.YU,c.bT,L.kk,L.Cp,m.WGl,Q.R,Ji.e,D,c.QX,x.wp],encapsulation:2}),a})();const oo=t=>({"skeleton-box-loading":t}),ao=t=>({"pb-2":t}),so=t=>({flex:t}),ro=t=>({"flex justify-between":t}),lo=t=>({"justify-between mt-2":t}),co=t=>({"flex-wrap":t}),ye=t=>({"padding-mobile":t});function uo(t,a){if(1&t&&e.nrm(0,"div",4),2&t){const n=e.XpG();e.Y8G("ngClass",e.eq3(1,oo,n.renderConfigObj.isFirstRender))}}function _o(t,a){if(1&t&&e.nrm(0,"azt-test-audio-ui",28),2&t){const n=e.XpG(2);e.Y8G("questionObj",n.questionObj)("isShowList",!0)}}function mo(t,a){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.nI1(2,"isOfflineExam"),e.nI1(3,"mytranslate"),e.k0s()),2&t){let n;const i=e.XpG(2);e.R7$(),e.Lme(" ",i.customQuestionLabel+" "+((null!=i.questionObj.labelIndex?i.questionObj.labelIndex:i.curQuestionIndex)+(null!==(n=i.examObj.startQuestionIndex)&&void 0!==n?n:1))," ",e.bMT(2,2,i.examObj)?" ("+e.bMT(3,4,"lang_auto_hoi_de_thi_offline")+") ":null," ")}}function po(t,a){if(1&t){const n=e.RV6();e.j41(0,"azt-similar-question-box-in-activity-mode",32),e.bIt("deleteSimilarQuestionEmit",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.deleteSimilarQuestionEmit.emit())}),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("bankObj",n.ebankDataObj)("question",n.questionObj)}}function go(t,a){if(1&t&&(e.j41(0,"div",30),e.DNE(1,po,1,2,"azt-similar-question-box-in-activity-mode",31),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.ebankDataObj)}}function bo(t,a){1&t&&(e.j41(0,"div",21),e.EFF(1,"|"),e.k0s())}function fo(t,a){1&t&&(e.j41(0,"div",21),e.EFF(1,"|"),e.k0s())}function ho(t,a){1&t&&(e.j41(0,"div",33),e.nI1(1,"mytranslate"),e.nrm(2,"lucide-icon",34),e.k0s()),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function vo(t,a){1&t&&(e.j41(0,"div",21),e.EFF(1,"|"),e.k0s())}function yo(t,a){if(1&t&&e.nrm(0,"azt-library-common-question-tag-with-edit-mode",35),2&t){const n=e.XpG(2);e.Y8G("questionObj",n.questionObj)("currentQuestionTags",n.questionObj.tags)("bankId",n.ebankDataObj.id)}}function xo(t,a){1&t&&(e.j41(0,"span",36),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_question_library_id_question"),":\xa0"))}function Io(t,a){if(1&t){const n=e.RV6();e.j41(0,"azt-similar-question-box-in-activity-mode",32),e.bIt("deleteSimilarQuestionEmit",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.deleteSimilarQuestionEmit.emit())}),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("bankObj",n.ebankDataObj)("question",n.questionObj)}}function Co(t,a){if(1&t&&(e.j41(0,"div",30),e.DNE(1,Io,1,2,"azt-similar-question-box-in-activity-mode",31),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.ebankDataObj)}}function ko(t,a){1&t&&(e.j41(0,"div",40)(1,"span",41),e.nrm(2,"azt-loading-ui"),e.k0s()())}function jo(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",47)(1,"div",48)(2,"div",49)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",50)(7,"azt-library-true-false-question-knowledge-unit-to-update",51),e.bIt("selectKnowledgeEmit",function(o){e.eBV(n);const s=e.XpG(6);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.j41(8,"div",52)(9,"div",53)(10,"span",54),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",55),e.nrm(14,"azt-library-true-false-question-tag-with-edit-mode",56),e.k0s()()()()()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(5);e.R7$(),e.Y8G("ngClass",e.eq3(14,ye,i.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,10,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("ngClass",i.isMobileDevice?"w-full":"")("questionObj",i.questionObj)("currentAnswerKey",n.key)("bankObj",i.ebankDataObj),e.R7$(4),e.SpI("",e.bMT(12,12,"lang_auto_gan_nhan"),":"),e.R7$(3),e.Y8G("questionObj",i.questionObj)("currentAnswerKey",n.key)("bankId",i.ebankDataObj.id)}}function Oo(t,a){if(1&t&&(e.j41(0,"div",43),e.nI1(1,"isTrueFalseAnswer"),e.j41(2,"b",44),e.EFF(3),e.nI1(4,"isTrueFalseAnswer"),e.k0s(),e.nrm(5,"azt-dynamic-hook",45),e.DNE(6,jo,15,16,"div",46),e.nI1(7,"isTrueFalseAnswer"),e.k0s()),2&t){let n;const i=a.$implicit,o=e.XpG(5);e.Y8G("ngStyle",e.eq3(10,co,e.bMT(1,4,o.questionObj)?"wrap":"")),e.R7$(3),e.JRh(e.bMT(4,6,o.questionObj)?(null!==(n=i.alpha)&&void 0!==n?n:i.key).toLowerCase()+")":(null!==(n=i.alpha)&&void 0!==n?n:i.key)+"."),e.R7$(2),e.Y8G("content",i.content),e.R7$(),e.Y8G("ngIf",o.ebankDataObj&&e.bMT(7,8,o.questionObj))}}function wo(t,a){if(1&t&&e.DNE(0,Oo,8,12,"div",42),2&t){const n=e.XpG(4);e.Y8G("ngForOf",n.questionObj.answers)}}function To(t,a){if(1&t&&(e.j41(0,"div",38),e.DNE(1,ko,3,0,"div",39)(2,wo,1,1,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),i=e.XpG(3);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngIf",i.questionObj.isLoading)("ngIfElse",n)}}function So(t,a){if(1&t&&(e.qex(0),e.DNE(1,To,4,3,"div",37),e.nI1(2,"isOneChoiceAnswer"),e.nI1(3,"isTrueFalseAnswer"),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",(e.bMT(2,1,n.questionObj)||e.bMT(3,3,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0)}}function Qo(t,a){if(1&t&&(e.j41(0,"div",57)(1,"div",58)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",50),e.nrm(6,"azt-dynamic-hook",45),e.k0s()()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.eq3(5,ye,n.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_huong_dan_giai_upper")),e.R7$(3),e.Y8G("content",n.questionObj.help)}}function Ro(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",57)(1,"div",49)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",50)(6,"azt-library-common-question-knowledge-unit-to-update",59),e.bIt("selectKnowledgeEmit",function(o){e.eBV(n);const s=e.XpG(2);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.k0s()()()}if(2&t){let n;const i=e.XpG(2);e.Y8G("ngClass",e.eq3(7,ye,i.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(4,5,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("tenantId",null!==(n=i.questionObj.tenantId)&&void 0!==n?n:0)("bankObj",i.ebankDataObj)("questionObj",i.questionObj)}}function Eo(t,a){if(1&t&&(e.j41(0,"div",5)(1,"div",6),e.nrm(2,"azt-question-group-content-box",7),e.j41(3,"div",8),e.DNE(4,_o,1,2,"azt-test-audio-ui",9),e.j41(5,"div",10)(6,"div",11),e.DNE(7,mo,4,6,"div",12)(8,go,2,1,"div",13),e.k0s(),e.DNE(9,bo,2,0,"div",14),e.j41(10,"div",15)(11,"div",16)(12,"mat-select",17)(13,"mat-option",18),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"mat-option",18),e.EFF(17),e.nI1(18,"mytranslate"),e.k0s(),e.j41(19,"mat-option",18),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s(),e.j41(22,"mat-option",18),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.DNE(25,fo,2,0,"div",14)(26,ho,3,3,"div",19)(27,vo,2,0,"div",14),e.nI1(28,"isTrueFalseAnswer"),e.DNE(29,yo,1,3,"azt-library-common-question-tag-with-edit-mode",20),e.nI1(30,"isTrueFalseAnswer"),e.j41(31,"div",21),e.EFF(32,"|"),e.k0s(),e.j41(33,"div",22),e.DNE(34,xo,3,3,"span",23),e.j41(35,"span",24),e.EFF(36),e.k0s()()(),e.DNE(37,Co,2,1,"div",13),e.k0s(),e.nrm(38,"azt-question-content-box",7),e.DNE(39,So,4,5,"ng-container",25),e.nI1(40,"isOfflineExam"),e.nrm(41,"azt-question-answer-view-with-simple-result-box-for-teacher",26),e.DNE(42,Qo,7,7,"div",27)(43,Ro,7,9,"div",27),e.nI1(44,"isTrueFalseAnswer"),e.k0s()()()),2&t){const n=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),e.Y8G("id","question_render_container_"+n.questionObj.id)("ngClass",e.eq3(58,ao,n.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),e.R7$(2),e.Y8G("ngIf",n.questionObj.attachments.length>0),e.R7$(),e.Y8G("ngClass",e.eq3(60,so,!n.isMobileDevice)),e.R7$(),e.Y8G("ngClass",e.eq3(62,ro,n.isMobileDevice)),e.R7$(),e.Y8G("ngIf",!n.hideQuestionLabel),e.R7$(),e.Y8G("ngIf",n.isMobileDevice),e.R7$(),e.Y8G("ngIf",!n.hideQuestionLabel&&!n.isMobileDevice),e.R7$(),e.Y8G("ngClass",e.eq3(64,lo,n.isMobileDevice)),e.R7$(2),e.Y8G("ngModel",n.questionObj.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(15,42,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(18,44,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(21,46,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(24,48,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",n.questionObj.isFixAns),e.R7$(),e.Y8G("ngIf",n.questionObj.isFixAns),e.R7$(),e.Y8G("ngIf",!e.bMT(28,50,n.questionObj)),e.R7$(2),e.Y8G("ngIf",!e.bMT(30,52,n.questionObj)),e.R7$(5),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(2),e.JRh(n.questionObj.id),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(),e.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),e.R7$(),e.Y8G("ngIf",!e.bMT(40,54,n.examObj)),e.R7$(2),e.Y8G("questionObj",n.questionObj),e.R7$(),e.Y8G("ngIf",n.questionObj.help),e.R7$(),e.Y8G("ngIf",n.ebankDataObj&&!e.bMT(44,56,n.questionObj))}}let Mo=(()=>{var t;class a extends ue.I{ngOnInit(){super.ngOnInit();const i=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;this.customQuestionLabel=i?.label??"C\xe2u";let o=new _e.C(this.disableLazy,this.disableRender,this.isExport);super.initData(o,this.follower,this.questionObj)}constructor(){super(),this.follower=new G.e,this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1,this.selectKnowledgeEmit=new e.bkB,this.deleteSimilarQuestionEmit=new e.bkB,this.customQuestionLabel=""}}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-question-library-in-activity-mode"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",ebankDataObj:"ebankDataObj",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit",deleteSimilarQuestionEmit:"deleteSimilarQuestionEmit"},features:[e.Vt3],decls:4,vars:3,consts:[["elementRended",""],["doneLoad",""],["load_effect_lazy","",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"items-center","mb-2",3,"ngClass"],[3,"ngClass"],["class","box-service-question-name",4,"ngIf"],["class","ml-auto",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"flex","items-center",3,"ngClass"],[1,"first-text"],[3,"ngModel","disabled"],[3,"value"],["class","fix-answer",3,"matTooltip",4,"ngIf"],[3,"questionObj","currentQuestionTags","bankId",4,"ngIf"],[1,"edit-question-header-dr"],[1,"first-text","border-none"],["style","color: rgba(0, 0, 0, 0.3803921569)",4,"ngIf"],[1,"font-bold"],[4,"ngIf"],[3,"questionObj"],["class","box-help mt-2",3,"ngClass",4,"ngIf"],[3,"questionObj","isShowList"],[1,"box-service-question-name"],[1,"ml-auto"],[3,"bankObj","question","deleteSimilarQuestionEmit",4,"ngIf"],[3,"deleteSimilarQuestionEmit","bankObj","question"],[1,"fix-answer",3,"matTooltip"],["name","pin","size","16"],[3,"questionObj","currentQuestionTags","bankId"],[2,"color","rgba(0, 0, 0, 0.3803921569)"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],["class","answer col-sm-12 col-md-6",3,"ngStyle",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6",3,"ngStyle"],[1,"answer-label"],[3,"content"],["class","w-full",4,"ngIf"],[1,"w-full"],[1,"box-help",2,"margin-top","20px",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","ngClass","questionObj","currentAnswerKey","bankObj"],[1,"flex",2,"padding","0px 15px"],[1,"items-center"],[2,"vertical-align","middle"],[1,"ml-2"],[3,"questionObj","currentAnswerKey","bankId"],[1,"box-help","mt-2",3,"ngClass"],[1,"help-title"],[3,"selectKnowledgeEmit","tenantId","bankObj","questionObj"]],template:function(i,o){if(1&i&&(e.j41(0,"div",2),e.DNE(1,uo,1,3,"div",3)(2,Eo,45,66,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,c.B3,K.wT,J.VO,N.oV,u.BC,u.vS,m.WGl,me.N,pe.c,ge.C,Q.R,Re.y,Ee.$,be.l,io,P.x,Fe,Ae,ze,qe,x.wp,x.st,x.V6,x.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}',".box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500;width:-moz-fit-content;width:fit-content}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.padding-mobile[_ngcontent-%COMP%]{padding:10px 0!important}@media screen and (max-width: 500px){.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),a})();const Fo=(t,a)=>({"p-3":t,"mt-3":a}),Ao=()=>["owner","creator"],zo=()=>({}),qo=t=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:t});function Lo(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function Go(t,a){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_danh_sach_trong")," "))}function Do(t,a){1&t&&e.nrm(0,"azt-loading-ui",14)}function $o(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",15)(1,"azt-question-standalone-for-question-library-in-activity-mode",16),e.bIt("deleteSimilarQuestionEmit",function(){const o=e.eBV(n).$implicit,s=e.XpG(3);return e.Njj(s.deleteSimilarQuestion(o))}),e.k0s()()}if(2&t){const n=a.$implicit,i=a.index,o=e.XpG(3);e.R7$(),e.Y8G("examObj",e.eq3(6,qo,e.lJ4(5,zo)))("questionObj",n)("follower",o.followerRenderQuest)("curQuestionIndex",i)("ebankDataObj",o.ebankDataObj)}}function No(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div"),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",9),e.EFF(6),e.k0s(),e.EFF(7),e.nI1(8,"relativeTime"),e.k0s(),e.j41(9,"azt-role-question-library-usage",10),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.rejectEbanksImport())}),e.j41(10,"button",11),e.DNE(11,Do,1,0,"azt-loading-ui",12),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()(),e.DNE(14,$o,2,8,"div",13),e.k0s()}if(2&t){let n;const i=e.XpG(2);e.Y8G("ngClass",e.l_i(17,Fo,!i.isMobileDevice,i.isMobileDevice)),e.R7$(3),e.SpI(" ",e.bMT(4,11,"lang_core_tao_boi")," "),e.R7$(3),e.JRh(null==i.firstQuestionObj.creator?null:i.firstQuestionObj.creator.fullName),e.R7$(),e.SpI(" ",e.bMT(8,13,i.firstQuestionObj.createdAt)," "),e.R7$(2),e.Y8G("ebankId",i.bankId)("creatorUserId",null!==(n=null==i.firstQuestionObj.creator?null:i.firstQuestionObj.creator.id)&&void 0!==n?n:0)("allowRoles",e.lJ4(20,Ao)),e.R7$(),e.Y8G("disabled",i.isLoadReject),e.R7$(),e.Y8G("ngIf",i.isLoadReject),e.R7$(),e.SpI(" ",e.bMT(13,15,"lang_auto_tu_choi")," "),e.R7$(2),e.Y8G("ngForOf",i.questionObjs)}}function Po(t,a){if(1&t&&e.DNE(0,Go,3,3,"div",4)(1,No,15,21,"div",5),2&t){const n=e.XpG();e.Y8G("ngIf",!n.firstQuestionObj),e.R7$(),e.Y8G("ngIf",n.firstQuestionObj)}}let Yo=(()=>{var t;class a extends j.H{deleteSimilarQuestion(i){const o=this.questionObjs.findIndex(s=>s===i);-1!==o&&this.questionObjs.splice(o,1)}rejectEbanksImport(){let i=this.commonService.myTranslateInstant("lang_core_ban_co_chac_chan_tu_choi_them_moi")+this.questionObjs.length.toString()+this.commonService.myTranslateInstant("lang_core_cau_hoi_khong");this.sAztDialogService.open(Yn.M,{width:"600px",data:{title:i,msg:""},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&(this.isLoadReject=!0,this.waitDestroy(this.ebankService.apiEbanksImportsTurnImportIdRejectGet(this.turnImportId).subscribe(r=>{if(this.isLoadReject=!1,!r.success)return this.errorStatusObj(r.message,!0);this.commonService.myNavigationBySpecialQueryString(this.backLink),this.showSuccessSnack("lang_auto_tu_choi_thanh_cong")})))})}getQuestion(){this.waitDestroy(this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,turnImportId:this.turnImportId,page:1,size:-1}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.firstQuestionObj=this.commonService.getFirstOfArray(o.data?.list??[]),this.loadQuest(o.data?.list?.map(s=>({...s.questionTest,tenantId:s.creatorId,creator:s.creator,ebankFrameId:s.ebankFrameId}))??[],s=>{s.forEach(r=>{let _=o.data?.list.find(T=>T.questionTest.id==r.id);_&&(r.similarQuestionInfo={similarRate:_.percentDuplicate,duplicateAccept:_.duplicateAccept,duplicateMetadata:_.duplicateMetadata})}),this.followerRenderQuest.setNumQuest(s.length),this.questionObjs=s}),this.successStatusObj()}))}loadQuest(i,o){const s=this.commonService.castJsonToClassObjs(H.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(s??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s??[])})}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.turnImportId=Number(this.commonService.getMyParam(this.activeRoute,"turnImportId")),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=`/admin/question-library/view-question-library/${this.bankId}/1`,this.getQuestion(),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.bankId).subscribe(i=>{if(i.errorMessage||!i.data)return this.errorStatusObj(i.errorMessage??"",!0);this.ebankDataObj=i.data.bankObj})}constructor(i,o,s,r){super(),this.ebankService=i,this.ebankQuestionService=o,this.activeRoute=s,this.sAztDialogService=r,this.ebanksImports=[],this.turnImportId=0,this.bankId=0,this.questionObjs=[],this.backLink="",this.isLoadReject=!1,this.followerRenderQuest=new G.e,this.questionRenderService=(0,e.WQX)(Z.g),this.configRenderService=new W.y(!0),this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(V.z)}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(fe.n),e.rXU(E.N8),e.rXU(p.nX),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-activity"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","pt-10 flex justify-center",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"pt-10","flex","justify-center"],[3,"ngClass"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium"],[3,"runAction","ebankId","creatorUserId","allowRoles"],[1,"btn","btn-danger","px-5",3,"disabled"],["class","mr-2",4,"ngIf"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mr-2"],[1,"mt-3"],[3,"deleteSimilarQuestionEmit","examObj","questionObj","follower","curQuestionIndex","ebankDataObj"]],template:function(i,o){if(1&i&&(e.j41(0,"teacher-layout",1),e.DNE(1,Lo,1,1,"azt-loading-effect",2)(2,Po,2,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("headerBackToLink",o.backLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,B.K,Q.R,Mo,D,$.Q,x.wp,x.NA],encapsulation:2}),a})();var Vo=l(37497),Bo=l(46247),Ge=l(2915);function Uo(t,a){1&t&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azt_ebank_vui_long_nhap_ten_cua_ngan_hang_cau_hoi")," "))}function Xo(t,a){1&t&&e.nrm(0,"azt-loading-ui",15)}let Ko=(()=>{var t;class a extends X._{btnCloseDialog(i){if(!i)return this.dialogRef.close(!1);this.initStatusObj(),this.ebankService.apiEbanksIdPatch(this.data.id,{name:this.form.controls.name.value}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.data.name=o.data?.name??this.form.controls.name.value,this.stopStatusObj(),this.dialogRef.close(!0)})}ngOnInit(){super.ngOnInit()}constructor(i,o,s){super(o,i),this.dialogRef=i,this.data=o,this.ebankService=s,this.form=new u.gE({name:new u.MJ(o.name,{nonNullable:!0,validators:[u.k0.required]})})}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(I.CP,8),e.rXU(I.Vh),e.rXU(E.nd))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-edit-ebank-info"]],features:[e.Vt3],decls:24,vars:19,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex","items-center"],[1,"p-5","pt-0","list-class"],[1,"mt-2"],["for","nameEbank",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"p-3","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","btn-info",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[1,"mr-1"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"azt-mat-dialog-content")(8,"div",5)(9,"div",6)(10,"label",7),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.nrm(13,"input",8),e.nI1(14,"mytranslate"),e.DNE(15,Uo,3,3,"div",9),e.k0s()()()(),e.j41(16,"div",10)(17,"button",11),e.bIt("click",function(){return o.btnCloseDialog(!1)}),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.j41(20,"button",12),e.bIt("click",function(){return o.btnCloseDialog(!0)}),e.DNE(21,Xo,1,0,"azt-loading-ui",13),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()),2&i&&(e.R7$(),e.Y8G("formGroup",o.form),e.R7$(4),e.SpI(" ",e.bMT(6,9,"lang_azt_ebank_chinh_sua_thong_tin_ngan_hang_cau_hoi")," "),e.R7$(6),e.SpI(" ",e.bMT(12,11,"lang_azt_ebank_ten_ngan_hang_cau_hoi")," "),e.R7$(2),e.FS9("placeholder",e.bMT(14,13,"lang_azt_ebank_nhap_ten_cua_ngan_hang_cau_hoi")),e.R7$(2),e.Y8G("ngIf",o.form.controls.name.dirty&&o.form.controls.name.errors),e.R7$(3),e.JRh(e.bMT(19,15,"lang_button_cancel")),e.R7$(2),e.Y8G("disabled",o.statusObj.loading||o.form.controls.name.errors),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(23,17,"lang_core_luu_va_dong")," "))},dependencies:[c.bT,u.qT,u.me,u.BC,u.cb,u.j4,u.JD,ne.t,Ge.U,Q.R,x.wp],encapsulation:2}),a})();var Jo=l(22613),xe=l(94743);const Ie=t=>[t],Wo=t=>({"ml-2":t}),De=()=>({"mr-2":!0}),Ho=()=>({backTo:"/admin/question-library/dashboard"});function Zo(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",4),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function ea(t,a){1&t&&(e.j41(0,"div",33)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_homework_add_home_work_share")))}function ta(t,a){1&t&&e.nrm(0,"azt-loading-ui")}function na(t,a){1&t&&e.nrm(0,"lucide-icon",36)}function ia(t,a){if(1&t){const n=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){e.eBV(n);const o=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.showConfirmEditDialog(o))}),e.DNE(1,ta,1,0,"azt-loading-ui",31)(2,na,1,0,"lucide-icon",35),e.k0s()}if(2&t){const n=e.XpG(4);e.Y8G("disabled",n.isEdit),e.R7$(),e.Y8G("ngIf",n.isDelete),e.R7$(),e.Y8G("ngIf",!n.isDelete)}}function oa(t,a){1&t&&e.nrm(0,"azt-loading-ui")}function aa(t,a){1&t&&e.nrm(0,"lucide-icon",37)}function sa(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.nI1(3,"navigationLocalize"),e.j41(4,"div",25),e.EFF(5),e.k0s(),e.j41(6,"div",26),e.EFF(7),e.nI1(8,"number"),e.nI1(9,"mytranslate"),e.k0s()(),e.DNE(10,ea,4,3,"div",27),e.j41(11,"div",28),e.DNE(12,ia,3,3,"button",29),e.j41(13,"button",30),e.bIt("click",function(){const o=e.eBV(n).$implicit,s=e.XpG(3);return e.Njj(s.showConfirmDeleteDialog(o))}),e.DNE(14,oa,1,0,"azt-loading-ui",31)(15,aa,1,0,"lucide-icon",32),e.k0s()()()()}if(2&t){const n=a.$implicit,i=e.XpG(3);e.R7$(2),e.Y8G("routerLink",e.eq3(15,Ie,e.bMT(3,9,"/admin/question-library/view-question-library/"+n.id+"/0")))("queryParams",e.lJ4(17,Ho)),e.R7$(3),e.JRh(n.name),e.R7$(2),e.JRh(e.bMT(8,11,n.totalQuestion)+" "+e.bMT(9,13,"lang_notice_question")),e.R7$(3),e.Y8G("ngIf",n.isShare),e.R7$(2),e.Y8G("ngIf",!n.isShare),e.R7$(),e.Y8G("disabled",i.isDelete),e.R7$(),e.Y8G("ngIf",i.isDelete),e.R7$(),e.Y8G("ngIf",!i.isDelete)}}function ra(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"div",10)(8,"button",11),e.nI1(9,"navigationLocalize"),e.nrm(10,"lucide-icon",12),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()(),e.j41(13,"div",13),e.DNE(14,sa,16,18,"div",14),e.k0s(),e.j41(15,"div",15)(16,"div",16)(17,"div",17)(18,"azt-paging",18),e.bIt("goToPaginationPage",function(o){e.eBV(n);const s=e.XpG(2);return e.Njj(s.goToPage(o))}),e.k0s()(),e.j41(19,"div",19)(20,"p",20),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"div",21)(24,"p",20),e.EFF(25),e.nI1(26,"mytranslate"),e.k0s()()()(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,9,"lang_notice_bank_question")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(19,Ie,e.bMT(9,11,"/admin/question-library/add-new-question-library")))("ngClass",e.eq3(21,Wo,!n.isMobileDevice)),e.R7$(2),e.Y8G("ngClass",e.lJ4(23,De)),e.R7$(),e.SpI(" ",e.bMT(12,13,"lang_azt_create_a_question_bank")," "),e.R7$(3),e.Y8G("ngForOf",n.ebankList),e.R7$(4),e.Y8G("pageObj",n.pageObj),e.R7$(3),e.JRh(n.totalEbank+" "+e.bMT(22,15,"lang_testbank_test_list_document")),e.R7$(4),e.JRh(n.totalEbank+" "+e.bMT(26,17,"lang_testbank_test_list_document"))}}function la(t,a){1&t&&(e.j41(0,"div",38)(1,"p",39),e.nrm(2,"azt-svg-icon",40),e.k0s(),e.j41(3,"p",41),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"p",42)(7,"button",43),e.nI1(8,"navigationLocalize"),e.nrm(9,"lucide-icon",12),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("size",82),e.R7$(2),e.SpI(" ",e.bMT(5,5,"lang_azt_you_dont_have_any_question_bank_yet")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(11,Ie,e.bMT(8,7,"/admin/question-library/add-new-question-library"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(13,De)),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_azt_create_a_question_bank")," "))}function ca(t,a){if(1&t&&e.DNE(0,ra,27,24,"ng-container",5)(1,la,12,14,"ng-template",null,1,e.C5r),2&t){const n=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.ebankList.length)("ngIfElse",n)}}let da=(()=>{var t;class a extends j.H{showConfirmEditDialog(i){this.isEdit=!0,this.sAztDialogService.open(Ko,{data:i,restoreFocus:!1,width:"500px"}).afterClosed().subscribe(s=>{this.isEdit=!1,s&&console.log(s)})}showConfirmDeleteDialog(i){var o=this.commonService.myTranslateInstant("lang_core_luu_y_sau_khi_xoa_ngan_hang")+' <div class="text-md font-medium inline"> '+i.name+" </div>, "+this.commonService.myTranslateInstant("lang_core_du_lieu_se_khong_khoi_phuc_lai_duoc_nua")+". "+this.commonService.myTranslateInstant("lang_teacher_group_utilt_delete_dialog_note_verifile_delete")+' <div class="text-md font-medium inline"> '+i.name+" </div> ?";this.sAztDialogService.open(Oe.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(r=>{r&&this.removeEbank(i)})}removeEbank(i){this.isDelete=!0,this.waitDestroy(this.ebankService.apiEbanksIdDelete(i.id).subscribe(o=>{if(this.isDelete=!1,!o.success)return this.errorStatusObj(o.message,!0);this.showSuccessSnack("lang_core_xoa_ngan_hang_cau_hoi_thanh_cong"),this.getEbankList()}))}getEbankList(){this.waitDestroy(this.ebankService.apiEbanksListPost({page:this.pageObj.page,size:this.pageObj.pageSize}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.ebankList=o.data?.objs??[],this.totalEbank=o.data?.total??0,this.pageObj.setTotalPages(this.totalEbank),this.ebankList.length||this.showDialogWhatNewsQuestionLibrary(),this.stopStatusObj()}))}goToPage(i){this.pageObj.setPageNumber(i)}showDialogWhatNewsQuestionLibrary(){if(this.sAztBrowserStorageService.getSimpleStorage("isHiddenDialogWhatNewsQuestionLibrary"))return;const o={isUsingDoneShowAgain:!0,iconName:"megaphone",title:"lang_azt_dialog_what_news_question_library_title",introLink:"https://www.youtube.com/embed/Iz9hPGdxVok?si=L1pn5LvsoXtHHiqv",iconClass:"text-primary",isShow:!0,content:`\n\t\t\t\t<div class="text-md">${this.commonService.myTranslateInstant("lang_azt_dialog_what_news_question_library_desc")}</div>\n\t\t\t`};this.sAztDialogService.open(Bo.l,{data:o,width:"650px",autoFocus:!1}).afterClosed().subscribe(r=>{r&&this.sAztBrowserStorageService.saveSimpleStorage("isHiddenDialogWhatNewsQuestionLibrary","true")})}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.getEbankList()}constructor(i,o,s){super(),this.sAztBrowserStorageService=i,this.ebankService=o,this.sAztDialogService=s,this.ebankList=[],this.totalEbank=0,this.pageObj=new Vo.d(24),this.isDelete=!1,this.isEdit=!1}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(je.z),e.rXU(fe.n),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-dashboard"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["emptyQuestionLibrary",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"mt-5"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mt-3","sm:mt-0","mr-auto"],[1,"text-xl","font-medium"],[1,"w-full","sm:w-auto","flex"],[1,"btn","btn-primary","shadow-md",3,"routerLink","ngClass"],["name","plus","size","16",3,"ngClass"],[1,"grid","grid-cols-12","mt-5","gap-5"],["class","col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-3",4,"ngFor","ngForOf"],[2,"height","25px"],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2",2,"position","absolute","bottom","10px"],[3,"goToPaginationPage","pageObj"],[1,"text-right","pb-2","azt-hidden","md:block",2,"position","absolute","bottom","10px","right","20px"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"col-span-12","sm:col-span-6","md:col-span-4","lg:col-span-3"],[1,"h-full","relative"],[1,"box","p-5","zoom-in","h-full",3,"routerLink","queryParams"],[1,"font-medium"],[1,"mt-3"],["class","ribbon",4,"ngIf"],[1,"btn-features","flex","gap-2"],["class","zoom-in btn-light btn btn-sm text-primary",3,"disabled","click",4,"ngIf"],[1,"zoom-in","btn-light","btn","btn-sm","text-danger",3,"click","disabled"],[4,"ngIf"],["name","trash-2","size","16",4,"ngIf"],[1,"ribbon"],[1,"zoom-in","btn-light","btn","btn-sm","text-primary",3,"click","disabled"],["name","pencil","size","16",4,"ngIf"],["name","pencil","size","16"],["name","trash-2","size","16"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","400px"],[1,"text-primary","text-center"],["type","inbox-empty",3,"size"],[1,"text-lg","font-medium","mt-1"],[1,"text-md","text-slate-500","mt-4"],[1,"btn","btn-primary","shadow-md",3,"routerLink"]],template:function(i,o){if(1&i&&(e.j41(0,"teacher-layout",2),e.DNE(1,Zo,1,1,"azt-loading-effect",3)(2,ca,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("headerBackToLink","/admin/dashboard"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[p.Wk,c.YU,c.Sq,c.bT,B.K,Jo.q,Q.R,xe.m,$.Q,m.WGl,c.QX,x.F2,x.wp],styles:[".ribbon[_ngcontent-%COMP%]{position:absolute;right:-2px;top:-2px;z-index:1;overflow:hidden;width:45px;height:45px;text-align:right}.ribbon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:7px;color:#fff;text-transform:uppercase;text-align:center;font-weight:700;line-height:12px;transform:rotate(45deg);-webkit-transform:rotate(45deg);width:55px;display:block;background:linear-gradient(#68cc00,#68cc009c);box-shadow:0 3px 10px -5px #636363;position:absolute;top:6px;right:-14px}.btn-features[_ngcontent-%COMP%]{position:absolute;z-index:9999;bottom:0;right:0;margin:5px}"]}),a})();const ua=()=>({"mr-2":!0}),_a=t=>({"mb-2":t}),ma=()=>({}),pa=t=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:t}),ga=(t,a)=>({top:t,right:a}),$e=()=>["owner","creator"];function ba(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function fa(t,a){1&t&&(e.j41(0,"div",12)(1,"h3",13),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_question_library_no_question_exist")))}function ha(t,a){if(1&t&&(e.j41(0,"div",36),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",8),e.EFF(4),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_core_tao_boi"),": "),e.R7$(3),e.JRh(null==n.creator?null:n.creator.fullName)}}function va(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",20)(1,"div",21),e.nrm(2,"azt-question-standalone-for-question-library-in-view-mode",22),e.j41(3,"div",23)(4,"button",24),e.nrm(5,"lucide-icon",25),e.k0s()(),e.j41(6,"mat-menu",26,2)(8,"div",27)(9,"ul",28)(10,"li")(11,"azt-role-question-library-usage",29),e.bIt("runAction",function(){const o=e.eBV(n),s=o.$implicit,r=o.index,_=e.XpG(4);return e.Njj(_.showRemoveQuestionDialog(s,r))}),e.j41(12,"a",30)(13,"span"),e.nrm(14,"lucide-icon",31),e.j41(15,"span",32),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()()()()(),e.j41(18,"li")(19,"azt-role-question-library-usage",29),e.bIt("runAction",function(){const o=e.eBV(n),s=o.$implicit,r=o.index,_=e.XpG(4);return e.Njj(_.editQuestionEvent(s,r))}),e.j41(20,"a",33)(21,"span"),e.nrm(22,"lucide-icon",34),e.j41(23,"span",32),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()()()()()()()(),e.DNE(26,ha,5,4,"div",35),e.k0s()()}if(2&t){let n,i;const o=a.$implicit,s=a.index,r=a.last,_=e.sdS(7),T=e.XpG(4);e.R7$(),e.Y8G("ngClass",e.eq3(21,_a,!r)),e.R7$(),e.Y8G("examObj",e.eq3(24,pa,e.lJ4(23,ma)))("questionObj",o)("follower",T.followerRenderQuest)("curQuestionIndex",s)("ebankDataObj",T.ebankDataObj),e.R7$(),e.Y8G("ngStyle",e.l_i(26,ga,T.isMobileDevice?"0px":"10px",T.isMobileDevice?"0px":"10px")),e.R7$(),e.Y8G("matMenuTriggerFor",_),e.R7$(7),e.Y8G("ebankId",T.bankId)("allowRoles",e.lJ4(29,$e))("creatorUserId",null!==(n=o.tenantId)&&void 0!==n?n:0),e.R7$(5),e.JRh(e.bMT(17,17,"lang_auto_xoa_cau_hoi")),e.R7$(3),e.Y8G("ebankId",T.bankId)("allowRoles",e.lJ4(30,$e))("creatorUserId",null!==(i=o.tenantId)&&void 0!==i?i:0),e.R7$(5),e.JRh(e.bMT(25,19,"lang_core_chinh_sua_de_thi")),e.R7$(2),e.Y8G("ngIf",null==o.creator?null:o.creator.fullName)}}function ya(t,a){1&t&&e.nrm(0,"azt-loading-ui",37)}function xa(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",14),e.DNE(1,va,27,31,"div",15),e.k0s(),e.j41(2,"div",16)(3,"button",17),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.loadMoreQuestion())}),e.DNE(4,ya,1,0,"azt-loading-ui",18),e.EFF(5),e.nI1(6,"mytranslate"),e.nrm(7,"lucide-icon",19),e.k0s()()}if(2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.questionObjs),e.R7$(2),e.Y8G("disabled",n.questionObjs.length<n.page*n.sizeApi),e.R7$(),e.Y8G("ngIf",n.isLoadingNextPage),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_xem_them")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(7,ua))}}function Ia(t,a){if(1&t&&(e.j41(0,"div",7)(1,"div")(2,"span",8),e.nrm(3,"azt-dynamic-hook",9),e.k0s(),e.j41(4,"span",10),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.DNE(7,fa,4,3,"div",11)(8,xa,8,8,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(9),i=e.XpG(2);e.R7$(3),e.Y8G("content",i.ebankFrameObj.name),e.R7$(2),e.SpI("(",i.totalQuestion+" "+e.bMT(6,4,"lang_auto_cau_hoi"),")"),e.R7$(2),e.Y8G("ngIf",!i.questionObjs.length)("ngIfElse",n)}}function Ca(t,a){if(1&t&&e.DNE(0,Ia,10,6,"div",6),2&t){const n=e.XpG();e.Y8G("ngIf",n.ebankDataObj&&n.ebankFrameObj)}}let ka=(()=>{var t;class a extends j.H{showRemoveQuestionDialog(i,o){this.sAztDialogService.open(ve,{width:"750px",data:{questionObj:i,ebankId:this.ebankDataObj?.id??0,index:o},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(_=>{_&&(this.questionObjs=this.questionObjs.filter(T=>T.id!=i.id),this.totalQuestion-=1)})}editQuestionEvent(i,o){let s=`/admin/question-library/view-question-list-node/${this.bankId}/${this.frameId}`+(this.backLink?"?backto="+encodeURIComponent(this.backLink):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+i.id+"?backto="+encodeURIComponent(s)+"&r="+o+"&ebankId="+this.bankId}loadMoreQuestion(){this.page++,this.getDataFrame(!0)}getDataFrame(i){this.isLoadingNextPage=i,i||this.initStatusObj(),this.eBanksQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,ebankFrameId:this.frameId,page:this.page,size:this.sizeApi}).subscribe(s=>{if(this.totalQuestion=s.data?.total??0,this.isLoadingNextPage=!1,!s.success||!s.data?.ebank)return this.errorStatusObj(s.message,!0);this.ebankDataObj={...s.data.ebank,totalQuestion:0,actionWaitingRead:0,frames:[],isShare:!1},this.ebankFrameObj=s.data?.ebankFrame,this.loadQuest(s.data.list.map(r=>({...r.questionTest,tenantId:r.creatorId,creator:r.creator,ebankFrameId:r.ebankFrameId})),r=>{this.followerRenderQuest.setNumQuest(r.length),this.questionObjs.push(...r),this.successStatusObj()})})}loadQuest(i,o){const s=this.commonService.castJsonToClassObjs(H.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(s??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s??[])})}ngOnInit(){this.waitDestroy((0,le.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.frameId=Number(this.commonService.getMyParam(this.activeRoute,"frameId")),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/view-question-library/"+this.bankId+"/0",this.getDataFrame(!1)}))}constructor(i,o,s){super(),this.activeRoute=i,this.eBanksQuestionService=o,this.sAztDialogService=s,this.questionRenderService=(0,e.WQX)(Z.g),this.configRenderService=new W.y(!0),this.totalQuestion=0,this.backLink="",this.frameId=0,this.bankId=0,this.page=1,this.sizeApi=50,this.isLoadingNextPage=!1,this.questionObjs=[],this.followerRenderQuest=new G.e}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(p.nX),e.rXU(E.N8),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-list-question-node"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["showList",""],["mainMenu","matMenu"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","container mx-auto mt-3","style","max-width: 1000px",4,"ngIf"],[1,"container","mx-auto","mt-3",2,"max-width","1000px"],[1,"font-medium"],[3,"content"],[1,"ml-3","text-slate-500","text-xs"],["class","box p-3 mt-3",4,"ngIf","ngIfElse"],[1,"box","p-3","mt-3"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"box","rounded-none","mt-3",2,"background-color","transparent"],["class","question-standalone-content-box",4,"ngFor","ngForOf"],[1,"mt-3","mx-auto","w-full","text-center"],[1,"btn","btn-transparent","mx-auto",3,"click","disabled"],["class","mr-1",4,"ngIf"],["name","chevron-down","size","20",3,"ngClass"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative",3,"ngClass"],[3,"examObj","questionObj","follower","curQuestionIndex","ebankDataObj"],[1,"absolute",2,"left","auto",3,"ngStyle"],[1,"btn","btn-sm","btn-transparent",3,"matMenuTriggerFor"],["name","ellipsis-vertical"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[3,"runAction","ebankId","allowRoles","creatorUserId"],[1,"dropdown-item","text-danger",2,"align-items","center"],["name","trash","size","16",1,"mr-2"],[2,"vertical-align","middle"],[1,"dropdown-item",2,"align-items","center"],["name","file-pen-line","size","16",1,"mr-2"],["class","text-right text-sign",4,"ngIf"],[1,"text-right","text-sign"],[1,"mr-1"]],template:function(i,o){if(1&i&&(e.j41(0,"teacher-layout",3),e.DNE(1,ba,1,1,"azt-loading-effect",4)(2,Ca,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("headerBackToLink",o.backLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,c.B3,L.kk,L.Cp,B.K,Q.R,he,P.x,D,$.Q,m.WGl,x.wp],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.custom-cell-knowledge[_ngcontent-%COMP%]{position:absolute;left:10px;top:0;bottom:0}.custom-colums-knowledge[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}@media screen and (max-width: 768px){.custom-colums-knowledge[_ngcontent-%COMP%]{height:auto!important;overflow-y:hidden}}.text-sign[_ngcontent-%COMP%]{margin:-15px -5px -7px 0;z-index:99999;position:relative;font-size:12px;background-color:#fff}"]}),a})();var Ce=l(68323);function ja(t,a){if(1&t&&(e.j41(0,"div",1),e.nrm(1,"div",2),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("chart",n.chartSkill)}}let Oa=(()=>{var t;class a extends j.H{constructor(){super(...arguments),this.keyTitle="",this.height=300,this.width=250}handleData(){return this.data.filter(o=>0!==o.totalQuestion).map(o=>({name:this.commonService.myTranslateInstant(o.name),y:o.totalQuestion}))}createPieChart(){let i=this.handleData();if(!i.length)return;const o=i.reduce((r,_)=>(_.y??0)>(r.y??0)?_:r,i[0]);i=i.map(r=>r.y===o.y?{...r,sliced:!0,selected:!0}:r);let s=new k.t1({chart:this.isMobileDevice?{type:"pie"}:{type:"pie",height:this.height,width:this.width},title:{text:this.commonService.myTranslateInstant(this.keyTitle)},credits:{enabled:!1},series:[{name:this.commonService.myTranslateInstant("lang_core_total_question"),type:"pie",data:i,dataLabels:{enabled:!0,distance:-40,format:"{point.name}: {point.y}",style:{color:"#000000"},filter:{operator:"==",property:"y",value:o.y??0}}}]});this.chartSkill=s}ngOnInit(){this.createPieChart()}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-azt-pie-chart"]],inputs:{keyTitle:"keyTitle",data:"data",height:"height",width:"width"},features:[e.Vt3],decls:1,vars:1,consts:[["class","mb-5",4,"ngIf"],[1,"mb-5"],[3,"chart"]],template:function(i,o){1&i&&e.DNE(0,ja,2,1,"div",0),2&i&&e.Y8G("ngIf",o.chartSkill)},dependencies:[c.bT,k.S6],encapsulation:2}),a})();const wa=t=>({"flex justify-around mr-5 ml-5":t});function Ta(t,a){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function Sa(t,a){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Qa(t,a){1&t&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Ra(t,a){if(1&t&&(e.j41(0,"tr")(1,"td",19)(2,"div",20),e.nrm(3,"azt-create-avatar",21),e.j41(4,"div",22)(5,"h3",11),e.EFF(6),e.k0s(),e.j41(7,"p",23),e.EFF(8),e.k0s()()()(),e.j41(9,"td",19),e.EFF(10),e.k0s()()),2&t){const n=a.$implicit;e.R7$(3),e.Y8G("linkAvatar",n.avatar)("nameCreateAvatar",n.fullName)("size",35),e.R7$(3),e.JRh(n.fullName),e.R7$(2),e.JRh(n.email),e.R7$(2),e.JRh(n.totalQuestion)}}function Ea(t,a){if(1&t&&(e.j41(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"th",17),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()(),e.j41(9,"tbody"),e.DNE(10,Ra,11,6,"tr",18),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(4),e.JRh(e.bMT(5,3,"lang_auto_ho_va_ten")),e.R7$(3),e.JRh(e.bMT(8,5,"lang_admin_question_global_statistic_total_question")),e.R7$(3),e.Y8G("ngForOf",n.dataAnalytics.members)}}function Ma(t,a){if(1&t&&(e.j41(0,"div")(1,"div",7),e.nrm(2,"app-azt-pie-chart",8)(3,"app-azt-pie-chart",8)(4,"app-azt-pie-chart",8),e.k0s(),e.j41(5,"div",9)(6,"div",10)(7,"p",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.DNE(10,Qa,3,3,"div",12)(11,Ea,11,7,"table",13),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(15,wa,!n.isMobileDevice)),e.R7$(),e.Y8G("data",n.dataAnalytics.frames)("width",400)("keyTitle","lang_core_so_luong_cau_hoi_theo_cau_truc"),e.R7$(),e.Y8G("data",n.dataAnalytics.tags)("width",400)("keyTitle","lang_core_ty_le_muc_do_kho_cua_cau_hoi"),e.R7$(),e.Y8G("data",n.dataAnalytics.answerTypes)("width",400)("keyTitle","lang_core_ty_le_cac_dang_thuc_cau_hoi"),e.R7$(4),e.JRh(e.bMT(9,13,"lang_core_danh_sach_dong_gop")),e.R7$(2),e.Y8G("ngIf",!n.dataAnalytics.members.length),e.R7$(),e.Y8G("ngIf",n.dataAnalytics.members.length)}}function Fa(t,a){if(1&t&&e.DNE(0,Sa,3,3,"div",4)(1,Ma,12,17,"div",5),2&t){const n=e.XpG();e.Y8G("ngIf",!n.dataAnalytics),e.R7$(),e.Y8G("ngIf",n.dataAnalytics)}}let Aa=(()=>{var t;class a extends j.H{getData(){this.initStatusObj(),this.ebankService.apiEbanksCountQuestionsGet(this.bankId,void 0).subscribe(i=>i.success?(this.dataAnalytics=i.data,this.dataAnalytics?(this.dataAnalytics.frames=this.dataAnalytics.frames,this.dataAnalytics.answerTypes.forEach(o=>o.name="lang_tool_knowledge_answer_type_"+o.name),this.dataAnalytics.tags=this.dataAnalytics.tags,void this.stopStatusObj()):this.stopStatusObj()):this.errorStatusObj(i.message,!0))}ngOnInit(){this.getData()}constructor(i){super(),this.ebankService=i}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(fe.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-analytics-box"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","flex justify-center items-center p-5",4,"ngIf","ngIfElse"],[1,"flex","justify-center","items-center","p-5"],[3,"size"],["class","flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center"],[3,"ngClass"],[3,"data","width","keyTitle"],[1,"w-full"],[1,"flex","justify-between","items-center","pb-2",2,"border-bottom","1px solid #ddd"],[1,"font-medium"],["class","flex justify-center items-center mt-3",4,"ngIf"],["class","table","style","white-space: initial",4,"ngIf"],[1,"flex","justify-center","items-center","mt-3"],[1,"table",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[1,"flex","items-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3","text-left"],[1,"text-slate-500","text-xs"]],template:function(i,o){if(1&i&&e.DNE(0,Ta,2,1,"div",1)(1,Fa,2,2,"ng-template",null,0,e.C5r),2&i){const s=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,Ce.p,Q.R,Oa,x.wp],encapsulation:2}),a})();var za=l(60495),qa=l(87840),La=l(21552),Ga=l(37857);const Da=t=>({"justify-between":t}),Ne=()=>["owner"];function $a(t,a){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function Na(t,a){if(1&t){const n=e.RV6();e.j41(0,"tr")(1,"td",12)(2,"div",13),e.nrm(3,"azt-create-avatar",14),e.j41(4,"div",15)(5,"h3",16),e.EFF(6),e.k0s(),e.j41(7,"p",17),e.EFF(8),e.k0s()()()(),e.j41(9,"td",18),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"td",19)(13,"azt-role-question-library-usage",5),e.bIt("runAction",function(){const o=e.eBV(n).$implicit,s=e.XpG(2);return e.Njj(s.showEditPermissionDialog(o))}),e.nrm(14,"lucide-icon",20),e.k0s()()()}if(2&t){const n=a.$implicit,i=e.XpG(2);e.R7$(3),e.Y8G("nameCreateAvatar",n.userFullName)("linkAvatar",n.avatar)("size",35),e.R7$(3),e.JRh(n.userFullName),e.R7$(2),e.JRh(n.email),e.R7$(2),e.JRh(e.bMT(11,8,i.checkRole(n.role))),e.R7$(3),e.Y8G("ebankId",i.bankId)("allowRoles",e.lJ4(10,Ne))}}function Pa(t,a){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",4)(2,"p"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"azt-role-question-library-usage",5),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.showListPeopleWhoWillShare())}),e.j41(6,"span",6),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()(),e.j41(9,"div",7)(10,"table",8)(11,"thead")(12,"tr")(13,"th",9),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"th",10),e.EFF(17),e.nI1(18,"mytranslate"),e.k0s(),e.nrm(19,"th"),e.k0s()(),e.j41(20,"tbody"),e.DNE(21,Na,15,11,"tr",11),e.k0s()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(16,Da,n.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(4,8,"lang_core_danh_sach_thanh_vien")),e.R7$(2),e.Y8G("ebankId",n.bankId)("allowRoles",e.lJ4(18,Ne)),e.R7$(2),e.SpI("+ ",e.bMT(8,10,"lang_teacher_group_group_add_member"),""),e.R7$(7),e.JRh(e.bMT(15,12,"lang_auto_ho_va_ten")),e.R7$(3),e.JRh(e.bMT(18,14,"Vai tr\xf2")),e.R7$(4),e.Y8G("ngForOf",n.members)}}let Ya=(()=>{var t;class a extends j.H{showListPeopleWhoWillShare(){this.sAztDialogService.open(qa.z,{data:{shareDataObj:this.shareDataObj,setData:()=>this.getData()},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.getData()})}showEditPermissionDialog(i){let o={fullName:i.userFullName,phone:i.phone,email:i.email,avatar:i.avatar,id:i.userId,teamPermissions:this.ebankPermissions.filter(r=>r.code==i.role),allowEditPermission:!0,allowDeletePermission:!0};this.sAztDialogService.open(za.A,{data:{teacherObj:o,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.getData()})}checkRole(i){return this.ebankPermissions.find(o=>o.code==i)?.key??"lang_auto_nguoi_xem"}getUserTeachers(i){this.teacherGroupService.apiTeacherGroupGetUserTeachersGet().subscribe(o=>{if(!o.success)return i(o.message);let s=this.shareDataObj.teacherObjs;this.shareDataObj.allTeacherPermissionObjs=o.data?.map(r=>({...r,id:r.teacherId??0,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:s.find(_=>_.id==r.id)?.teamPermissions??[]}))??[],i(void 0)})}getData(){this.initStatusObj(),this.ebankMemberService.apiEbanksMemberEbankIdGet(this.bankId).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.members=i.data??[],this.shareDataObj.teacherObjs=this.members?.map(o=>({fullName:o.userFullName,phone:o.phone,email:o.email,avatar:o.avatar,id:o.userId,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:this.ebankPermissions.filter(s=>s.code==o.role)})),this.getUserTeachers(o=>{if(o)return this.errorStatusObj(o,!0);this.stopStatusObj()})})}createShareData(){this.shareDataObj={objectId:this.bankId,objectCode:"EBANK",ebankPermissions:this.ebankPermissions,allGroupPermissionObjs:[],allTeacherPermissionObjs:[],groupObjs:[],teacherObjs:[]}}ngOnInit(){this.initStatusObj(),this.createShareData(),this.getData()}constructor(i,o,s){super(),this.ebankMemberService=i,this.sAztDialogService=o,this.teacherGroupService=s,this.members=[],this.ebankPermissions=[{id:1,key:"lang_auto_chu_so_huu",code:"owner"},{id:3,key:"lang_auto_nguoi_soan_thao",code:"editor"},{id:2,key:"lang_auto_nguoi_xem",code:"viewer"}]}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(La.V),e.rXU(A.i),e.rXU(Ga.x))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-question-library-permission-management"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:2,vars:2,consts:[["class","p-5 flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],[1,"flex","items-center",3,"ngClass"],[3,"runAction","ebankId","allowRoles"],[1,"clickable","ml-3","link-color","clickable","uppercase"],[1,"overflow-auto"],[1,"table","mt-2",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[1,"flex","items-center"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3","text-left"],[1,"font-medium"],[1,"text-slate-500","text-xs"],[1,"text-center","capitalize","whitespace-nowrap"],[1,"text-right","capitalize"],["size","20","name","pencil",1,"clickable"]],template:function(i,o){1&i&&e.DNE(0,$a,2,1,"div",0)(1,Pa,22,19,"div",1),2&i&&(e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.Y8G("ngIf",o.members.length&&!o.statusObj.loading))},dependencies:[c.YU,c.Sq,c.bT,Ce.p,Q.R,D,m.WGl,x.wp],encapsulation:2}),a})(),Va=(()=>{var t;class a extends j.H{constructor(){super(...arguments),this.parentUpdateNoteIds=[],this.reloadApiEvent=new e.bkB,this.nodeObjsData=[]}convertFrameDataToNode(i){return i.map(o=>({id:o.id,getQuestionKey:"",title:o.name,parentId:o.parentId,children:this.convertFrameDataToNode(o.children),position:o.position,nodeType:1,objectiveId:"objective"==o.suggestModel?o.suggestId:void 0,knowledgeId:"knowledge"==o.suggestModel?o.suggestId:void 0,type:"objective"==o.suggestModel?"objective":"knowledge",questions:o.questions.map(s=>({...s,difficultyIndex:0})),totalQuestion:o.totalQuestion}))}ngOnInit(){this.nodeObjsData=this.convertFrameDataToNode(this.bankInfoObj.frames)}}return(t=a).\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-structure-box"]],inputs:{bankInfoObj:"bankInfoObj",parentUpdateNoteIds:"parentUpdateNoteIds"},outputs:{reloadApiEvent:"reloadApiEvent"},features:[e.Vt3],decls:1,vars:7,consts:[[3,"reloadApiEvent","bankId","rawNodes","modeView","schoolSubjectValue","schoolLevelValue","useScrollBar","parentUpdateNoteIds"]],template:function(i,o){1&i&&(e.j41(0,"app-question-library-tree-component",0),e.bIt("reloadApiEvent",function(r){return o.reloadApiEvent.emit(r)}),e.k0s()),2&i&&e.Y8G("bankId",o.bankInfoObj.id)("rawNodes",o.nodeObjsData)("modeView","structure")("schoolSubjectValue",o.bankInfoObj.subjectId)("schoolLevelValue",o.bankInfoObj.levelId)("useScrollBar",!1)("parentUpdateNoteIds",o.parentUpdateNoteIds)},dependencies:[Se],encapsulation:2}),a})();var Pe=function(t){return t.CREATE_NEW_EBANK="CREATE_NEW_EBANK",t.UPDATE_EBANK_FRAME="UPDATE_EBANK_FRAME",t.DELETE_EBANK_FRAME="DELETE_EBANK_FRAME",t.CREATE_NEW_EXAM="CREATE_NEW_EXAM",t.ADD_MEMBER="ADD_MEMBER",t.CHANGE_ROLE_MEMBER="CHANGE_ROLE_MEMBER",t.DEL_MEMBER="DEL_MEMBER",t.ADD_QUESTION="ADD_QUESTION",t.UPDATE_QUESTION="UPDATE_QUESTION",t.DELETE_QUESTION="DELETE_QUESTION",t.REJECT_IMPORT="REJECT_IMPORT",t}(Pe||{}),Ba=l(87388);function Ua(t,a){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function Xa(t,a){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Ka(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",17),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_them_moi_ngan_hang_cau_hoi")),e.R7$(3),e.JRh(null==n.createEbankMeta?null:n.createEbankMeta.name)}}function Ja(t,a){if(1&t&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&t){let n;const i=a.$implicit,o=a.index,s=e.XpG(4).$implicit;e.R7$(),e.SpI(" "," "+i.name+(o!=(null!==(n=null==s.updateFrameMeta.frames?null:s.updateFrameMeta.frames.length)&&void 0!==n?n:0)-1?", ":"")," ")}}function Wa(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",20),e.j41(2,"span",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,Ja,2,1,"span",22),e.bVm()),2&t){const n=e.XpG(3).$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_azt_add_structure")),e.R7$(2),e.Y8G("ngForOf",n.updateFrameMeta.frames)}}function Ha(t,a){if(1&t&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&t){let n;const i=a.$implicit,o=a.index,s=e.XpG(4).$implicit;e.R7$(),e.SpI(" "," "+i.name+(o!=(null!==(n=null==s.updateFrameMeta.frames?null:s.updateFrameMeta.frames.length)&&void 0!==n?n:0)-1?", ":"")," ")}}function Za(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",20),e.j41(2,"span",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,Ha,2,1,"span",22),e.bVm()),2&t){const n=e.XpG(3).$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_azt_update_structure")),e.R7$(2),e.Y8G("ngForOf",n.updateFrameMeta.frames)}}function es(t,a){if(1&t&&(e.j41(0,"span",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){let n;const i=a.$implicit,o=a.index,s=e.XpG(4).$implicit;e.R7$(),e.SpI(" "," "+i.name+" ("+i.totalQuestion+" "+e.bMT(2,1,"lang_notice_question")+")"+(o!=(null!==(n=null==s.updateFrameMeta.frames?null:s.updateFrameMeta.frames.length)&&void 0!==n?n:0)-1?", ":"")," ")}}function ts(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",23),e.j41(2,"span",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,es,3,3,"span",22),e.bVm()),2&t){const n=e.XpG(3).$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_azt_delete_structure")),e.R7$(2),e.Y8G("ngForOf",n.updateFrameMeta.frames)}}function ns(t,a){if(1&t&&(e.j41(0,"span"),e.DNE(1,Wa,6,4,"ng-container",5)(2,Za,6,4,"ng-container",5)(3,ts,6,4,"ng-container",5),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf","ADD"===n.updateFrameMeta.action),e.R7$(),e.Y8G("ngIf","UPDATE"===n.updateFrameMeta.action),e.R7$(),e.Y8G("ngIf","DELETE"===n.updateFrameMeta.action)}}function is(t,a){if(1&t&&(e.qex(0),e.DNE(1,ns,4,3,"span",5),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",n.updateFrameMeta)}}function os(t,a){if(1&t&&(e.j41(0,"span",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){let n;const i=a.$implicit,o=a.index,s=e.XpG(3).$implicit;e.R7$(),e.SpI(" "," "+i.name+" ("+i.totalQuestion+" "+e.bMT(2,1,"lang_notice_question")+")"+(o!=(null!==(n=null==s.updateFrameMeta||null==s.updateFrameMeta.frames?null:s.updateFrameMeta.frames.length)&&void 0!==n?n:0)-1?", ":"")," ")}}function as(t,a){if(1&t&&(e.qex(0),e.j41(1,"span",21),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,os,3,3,"span",22),e.bVm()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"lang_azt_delete_structure")),e.R7$(2),e.Y8G("ngForOf",null==n.updateFrameMeta?null:n.updateFrameMeta.frames)}}function ss(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",23),e.DNE(2,as,5,4,"ng-container",5),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(2),e.Y8G("ngIf","DELETE"===(null==n.updateFrameMeta?null:n.updateFrameMeta.action))}}function rs(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",24),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_tao_de_thi_tu_ngan_hang")),e.R7$(3),e.JRh(null==n.createExamMeta?null:n.createExamMeta.examName)}}function ls(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",25),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_them_moi_thanh_vien")),e.R7$(3),e.JRh(null==n.createMemberMeta?null:n.createMemberMeta.fullName)}}function cs(t,a){if(1&t&&(e.qex(0),e.nrm(1,"azt-svg-icon",26),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("type","user-cog")("size",14),e.R7$(2),e.JRh(e.bMT(4,4,"lang_core_thay_doi_quyen_cho_tai_khoan")),e.R7$(3),e.JRh(null==n.changeRoleMemberMeta?null:n.changeRoleMemberMeta.fullName)}}function ds(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",27),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_xoa_thanh_vien")),e.R7$(3),e.JRh(null==n.delMemberMeta?null:n.delMemberMeta.fullName)}}function us(t,a){if(1&t){const n=e.RV6();e.j41(0,"span",31),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2).$implicit,s=e.XpG(3);return e.Njj(s.viewActivityLog(o.addQuestionMeta.turnImportId))}),e.EFF(1),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.R7$(),e.JRh(n.addQuestionMeta.sourceName)}}function _s(t,a){if(1&t&&(e.j41(0,"span",19),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.JRh(null==n.addQuestionMeta?null:n.addQuestionMeta.sourceName)}}function ms(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",28),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s(),e.DNE(6,us,2,1,"span",29)(7,_s,2,1,"span",30),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.E5c("",e.bMT(4,5,"lang_admin_guide_add_new")," ",null==n.addQuestionMeta?null:n.addQuestionMeta.totalQuestion," ",e.bMT(5,7,"lang_core_cau_hoi_vao"),""),e.R7$(3),e.Y8G("ngIf",n.addQuestionMeta),e.R7$(),e.Y8G("ngIf",!n.targetId)}}function ps(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",32),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_cap_nhat_cau_hoi")),e.R7$(3),e.JRh(null==n.updateQuestionMeta||null==n.updateQuestionMeta.questionIds?null:n.updateQuestionMeta.questionIds.join(", "))}}function gs(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",23),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",19),e.EFF(6),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_xoa_cau_hoi")),e.R7$(3),e.JRh(null==n.delQuestionMeta||null==n.delQuestionMeta.questionIds?null:n.delQuestionMeta.questionIds.join(", "))}}function bs(t,a){if(1&t&&(e.qex(0),e.nrm(1,"lucide-icon",33),e.j41(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",19),e.EFF(7),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.E5c("",e.bMT(4,4,"lang_core_tu_choi_them_moi")," ",null==n.rejectImportMeta?null:n.rejectImportMeta.totalQuestion," ",e.bMT(5,6,"lang_core_cau_hoi_vao"),""),e.R7$(4),e.JRh(null==n.rejectImportMeta?null:n.rejectImportMeta.sourceName)}}function fs(t,a){if(1&t&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"azt-create-avatar",12),e.j41(3,"div",13)(4,"h3",14),e.EFF(5),e.k0s(),e.j41(6,"div",15),e.DNE(7,Ka,7,4,"ng-container",5)(8,is,2,1,"ng-container",5)(9,ss,3,1,"ng-container",5)(10,rs,7,4,"ng-container",5)(11,ls,7,4,"ng-container",5)(12,cs,7,6,"ng-container",5)(13,ds,7,4,"ng-container",5)(14,ms,8,9,"ng-container",5)(15,ps,7,4,"ng-container",5)(16,gs,7,4,"ng-container",5)(17,bs,8,8,"ng-container",5),e.k0s()()(),e.j41(18,"p",16),e.EFF(19),e.nI1(20,"relativeTime"),e.k0s()()),2&t){const n=a.$implicit,i=a.index,o=e.XpG(3);e.Y8G("ngClass",i>0?"mt-5":""),e.R7$(2),e.Y8G("nameCreateAvatar",null==n.creator?null:n.creator.fullName)("linkAvatar",null==n.creator?null:n.creator.avatar)("size",35),e.R7$(3),e.JRh(null==n.creator?null:n.creator.fullName),e.R7$(2),e.Y8G("ngIf",n.type===o.activityLog.CREATE_NEW_EBANK),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.UPDATE_EBANK_FRAME),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.DELETE_EBANK_FRAME),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.CREATE_NEW_EXAM),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.ADD_MEMBER),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.CHANGE_ROLE_MEMBER),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.DEL_MEMBER),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.ADD_QUESTION),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.UPDATE_QUESTION),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.DELETE_QUESTION),e.R7$(),e.Y8G("ngIf",n.type===o.activityLog.REJECT_IMPORT),e.R7$(2),e.JRh(e.bMT(20,17,n.createdAt))}}function hs(t,a){if(1&t&&(e.j41(0,"div")(1,"div",7),e.nrm(2,"div",8),e.k0s(),e.DNE(3,fs,21,19,"div",9),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.ebankAction.actions)}}function vs(t,a){if(1&t&&e.DNE(0,Xa,3,3,"div",4)(1,hs,4,1,"div",5),2&t){const n=e.XpG();e.Y8G("ngIf",!n.ebankAction),e.R7$(),e.Y8G("ngIf",n.ebankAction)}}let ys=(()=>{var t;class a extends j.H{viewActivityLog(i){this.commonService.myNavigation("/admin/question-library/view-question-activity/"+this.bankId+"/"+i)}getData(){this.initStatusObj(),this.ebankActionService.apiEbanksActionListPost({ebankId:this.bankId,page:this.page,limit:this.limit}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.ebankAction=o.data,this.reloadApiEvent.emit(),this.stopStatusObj()})}ngOnInit(){this.getData()}constructor(i){super(),this.ebankActionService=i,this.bankId=0,this.reloadApiEvent=new e.bkB,this.page=1,this.limit=20,this.activityLog=Pe}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(Ba.H))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-activity-log"]],inputs:{bankId:"bankId"},outputs:{reloadApiEvent:"reloadApiEvent"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","p-5 flex justify-center items-center",4,"ngIf","ngIfElse"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],["class","p-5 flex justify-center items-center font-medium text-slate-500",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center","font-medium","text-slate-500"],[1,"box-vertical-line","absolute","flex","justify-center"],[1,"vertical-line"],["class","flex justify-between items-center relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","relative",3,"ngClass"],[1,"flex","items-center"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-2","mr-2"],[1,"font-medium"],[1,"contents","text-xs","font-medium"],[1,"text-xs","text-slate-500","whitespace-nowrap"],["name","church","size","14",1,"text-primary"],[1,"mr-2","ml-2","text-slate-500"],[1,"text-primary"],["name","list","size","14",1,"text-primary"],[1,"ml-2","text-slate-500"],["class","font-medium",4,"ngFor","ngForOf"],["name","trash-2","size","14",1,"text-danger"],["name","folder-plus","size","14",1,"text-primary"],["name","user-plus","size","14",1,"text-primary"],[1,"text-primary",3,"type","size"],["name","user-minus","size","14",1,"text-danger"],["name","file-plus","size","14",1,"text-primary"],["class","text-primary clickable",3,"click",4,"ngIf"],["class","text-primary",4,"ngIf"],[1,"text-primary","clickable",3,"click"],["name","file-pen-line","size","14",1,"text-primary"],["name","file-minus","size","14",1,"text-danger"]],template:function(i,o){if(1&i&&e.DNE(0,Ua,2,1,"div",1)(1,vs,2,2,"ng-template",null,0,e.C5r),2&i){const s=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,Ce.p,Q.R,xe.m,m.WGl,x.wp,x.NA],styles:[".vertical-line[_ngcontent-%COMP%]{border-left:2px solid lightgray}.box-vertical-line[_ngcontent-%COMP%]{width:35px;height:calc(100% - 2.5rem);padding-top:35px;padding-bottom:35px}"]}),a})();var xs=l(27208);const Is=(t,a)=>({"p-3":t,"p-1":a}),Cs=()=>({}),ks=(t,a)=>({expandInfo:t,id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:a}),Ye=()=>["owner","creator"];let js=(()=>{var t;class a extends X._{btnCloseDialog(){this.dialogRef.close(!1)}showRemoveQuestionDialog(){this.sAztDialogService.open(ve,{width:"750px",data:{questionObj:this.questionObj,ebankId:this.bankId??0,index:1},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&(this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0))})}editQuestion(){let i=`/admin/question-library/view-question-library/${this.bankId}/${this.data.tab}`;window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+this.questionObj.id+"?backto="+encodeURIComponent(i)+"&r="+(this.questionObj.rawIndex??0)+"&ebankId="+this.bankId}constructor(i,o){super(o,i),this.dialogRef=i,this.data=o,this.sAztDialogService=(0,e.WQX)(A.i),this.followerRenderQuest=new G.e,this.bankId=0,this.questionObj=o.questionObj,this.bankId=o.bankId,this.ebankDataObj=o.ebankDataObj}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(I.CP,8),e.rXU(I.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-dialog"]],features:[e.Vt3],decls:18,vars:32,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400",3,"ngClass"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","relative","mb-2","px-3","py-2"],[3,"examObj","questionObj","follower","ebankDataObj","hideQuestionLabel"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[3,"runAction","ebankId","allowRoles","creatorUserId"],[1,"btn","btn-danger"],[1,"btn","btn-primary","ml-3"]],template:function(i,o){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"azt-mat-dialog-content"),e.nrm(4,"azt-question-standalone-for-question-library-in-view-mode",3),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"azt-role-question-library-usage",6),e.bIt("runAction",function(){return o.showRemoveQuestionDialog()}),e.j41(11,"button",7),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()(),e.j41(14,"azt-role-question-library-usage",6),e.bIt("runAction",function(){return o.editQuestion()}),e.j41(15,"button",8),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()()()()),2&i){let s,r;e.R7$(),e.Y8G("ngClass",e.l_i(23,Is,!o.isMobileDevice,o.isMobileDevice)),e.R7$(3),e.Y8G("examObj",e.l_i(27,ks,e.bMT(5,15,"lang_powerpoint_frontend_chart_question"),e.lJ4(26,Cs)))("questionObj",o.questionObj)("follower",o.followerRenderQuest)("ebankDataObj",o.ebankDataObj)("hideQuestionLabel",!0),e.R7$(4),e.SpI(" ",e.bMT(9,17,"lang_auto_dong")," "),e.R7$(2),e.Y8G("ebankId",o.bankId)("allowRoles",e.lJ4(30,Ye))("creatorUserId",null!==(s=o.questionObj.tenantId)&&void 0!==s?s:0),e.R7$(2),e.SpI(" ",e.bMT(13,19,"lang_core_xoa_cau_hoi")," "),e.R7$(2),e.Y8G("ebankId",o.bankId)("allowRoles",e.lJ4(31,Ye))("creatorUserId",null!==(r=o.questionObj.tenantId)&&void 0!==r?r:0),e.R7$(2),e.SpI(" ",e.bMT(17,21,"lang_core_sua_cau_hoi")," ")}},dependencies:[c.YU,Ge.U,he,D,x.wp],encapsulation:2}),a})();var Os=l(32099);let ws=(()=>{var t;class a extends j.H{onSearchBox(i){if(this.searchContentObj=i,""==this.searchContentObj.searchContent)return;let o=Number(this.searchContentObj.searchContent);if(!o)return this.showErrorSnack("lang_core_ma_cau_hoi_khong_hop_le");this.searchQuestion(o)}searchQuestion(i){this.initStatusObj(),this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,questionIds:[i],page:1,size:1}).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);this.loadQuest(s.data?.list?.map(r=>({...r.questionTest,tenantId:r.creatorId,creator:r.creator,ebankFrameId:r.ebankFrameId}))??[],r=>{let _=this.commonService.getFirstOfArray(r);if(!_)return this.errorStatusObj("lang_core_ma_cau_hoi_khong_ton_tai",!0);this.showQuestionDialog(_),this.successStatusObj()})})}showQuestionDialog(i){this.sAztDialogService.open(js,{width:"750px",data:{questionObj:i,bankId:this.bankId,tab:this.tab,ebankDataObj:this.ebankDataObj},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&(this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.reloadData.emit(!0))})}loadQuest(i,o){const s=this.commonService.castJsonToClassObjs(H.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(s??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s??[])})}constructor(i,o){super(),this.ebankQuestionService=i,this.sAztDialogService=o,this.reloadData=new e.bkB,this.questionRenderService=(0,e.WQX)(Z.g),this.configRenderService=new W.y(!0),this.searchContentObj=new xs.Z}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(E.N8),e.rXU(A.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-search-question-box"]],inputs:{bankId:"bankId",tab:"tab",ebankDataObj:"ebankDataObj"},outputs:{reloadData:"reloadData"},features:[e.Vt3],decls:2,vars:5,consts:[[3,"onSearch","isServerSearch","isManualSearch","placeholder"]],template:function(i,o){1&i&&(e.j41(0,"azt-search-box",0),e.nI1(1,"mytranslate"),e.bIt("onSearch",function(r){return o.onSearchBox(r.searchObj)}),e.k0s()),2&i&&e.Y8G("isServerSearch",!0)("isManualSearch",!0)("placeholder",e.bMT(1,3,"lang_core_nhap_ma_cau_hoi"))},dependencies:[Os.W,x.wp],encapsulation:2}),a})();const Ts=t=>({"p-3":t}),Ss=t=>({flex:t}),Qs=t=>({"mb-3 mt-5":t}),Rs=t=>({"justify-between w-full":t}),Es=t=>({"mr-2":t}),Ve=t=>({"w-1/2":t}),Be=()=>["owner","editor"],Ms=t=>({"w-full":t}),Fs=()=>({"mr-2":!0});function As(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function zs(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",30)(1,"button",31),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.goToCreateExamMatrix())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"azt-role-question-library-usage",32),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.goToChooseImportQuestionMode())}),e.j41(5,"button",33),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(11,Ve,n.isMobileDevice)),e.R7$(),e.JRh(e.bMT(3,7,"lang_core_tao_ma_tran_de_thi")),e.R7$(2),e.Y8G("ngClass",e.eq3(13,Ve,n.isMobileDevice))("ebankId",n.bankId)("allowRoles",e.lJ4(15,Be)),e.R7$(),e.Y8G("ngClass",e.eq3(16,Ms,n.isMobileDevice)),e.R7$(),e.SpI("+ ",e.bMT(7,9,"lang_cms_enter_question_description"),"")}}function qs(t,a){1&t&&(e.j41(0,"span",34),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_core_cau_truc")))}function Ls(t,a){1&t&&(e.j41(0,"span",34),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_core_cac_hoat_dong")))}function Gs(t,a){if(1&t&&(e.j41(0,"span",35),e.EFF(1),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.JRh(n.bankInfoObj.actionWaitingRead)}}function Ds(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_core_phan_tich")))}function $s(t,a){1&t&&(e.j41(0,"span",34),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_phan_quyen")))}function Ns(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",36)(1,"button",37),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.goToCreateExamMatrix())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"azt-role-question-library-usage",38),e.bIt("runAction",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.goToChooseImportQuestionMode())}),e.j41(5,"button",39),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,4,"lang_core_tao_ma_tran_de_thi")),e.R7$(2),e.Y8G("ebankId",n.bankId)("allowRoles",e.lJ4(8,Be)),e.R7$(2),e.SpI("+ ",e.bMT(7,6,"lang_cms_enter_question_description"),"")}}function Ps(t,a){if(1&t){const n=e.RV6();e.j41(0,"app-question-library-activity-log",40),e.bIt("reloadApiEvent",function(){e.eBV(n);const o=e.XpG(3);return e.Njj(o.updateDataBank())}),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("hidden",1!=n.tab)("bankId",n.bankId)}}function Ys(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"p",7)(3,"span",9),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",10),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"app-question-library-search-question-box",11),e.bIt("reloadData",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.getDataBank())}),e.k0s()(),e.DNE(10,zs,8,18,"div",12),e.j41(11,"div",13)(12,"div",14)(13,"div",15),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.selectTab(0))}),e.nrm(14,"lucide-icon",16),e.DNE(15,qs,3,3,"span",17),e.k0s(),e.j41(16,"div",18),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.selectTab(1))}),e.nrm(17,"lucide-icon",19),e.DNE(18,Ls,3,3,"span",17)(19,Gs,2,1,"span",20),e.k0s(),e.j41(20,"div",18),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.selectTab(2))}),e.nrm(21,"azt-svg-icon",21),e.DNE(22,Ds,3,3,"span",22),e.k0s(),e.j41(23,"div",23),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.selectTab(3))}),e.nrm(24,"lucide-icon",24),e.DNE(25,$s,3,3,"span",17),e.k0s()(),e.DNE(26,Ns,8,9,"div",25),e.k0s(),e.j41(27,"div",26)(28,"app-question-library-structure-box",27),e.bIt("reloadApiEvent",function(o){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateNote(o))}),e.k0s(),e.DNE(29,Ps,1,2,"app-question-library-activity-log",28),e.nrm(30,"app-question-library-analytics-box",29)(31,"coazt-question-library-permission-management",29),e.k0s()()}if(2&t){const n=e.XpG(2),i=e.sdS(5);e.Y8G("ngClass",e.eq3(40,Ts,!n.isMobileDevice)),e.R7$(),e.Y8G("ngClass",e.eq3(42,Ss,!n.isMobileDevice)),e.R7$(),e.Y8G("ngClass",e.eq3(44,Qs,n.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(5,36,n.bankInfoObj.name)),e.R7$(3),e.SpI("(",n.bankInfoObj.totalQuestion+" "+e.bMT(8,38,"lang_auto_cau_hoi"),")"),e.R7$(2),e.Y8G("bankId",n.bankId)("tab",n.tab)("ebankDataObj",n.bankInfoObj),e.R7$(),e.Y8G("ngIf",n.isMobileDevice),e.R7$(2),e.Y8G("ngClass",e.eq3(46,Rs,n.isMobileDevice)),e.R7$(),e.HbH(0==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(),e.HbH(1==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(),e.Y8G("ngIf",null==n.bankInfoObj?null:n.bankInfoObj.actionWaitingRead),e.R7$(),e.HbH(2==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(),e.Y8G("type","chart-pie")("ngClass",e.eq3(48,Es,!n.isMobileDevice))("size",16),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(),e.HbH(3==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice),e.R7$(),e.Y8G("contextMenu",i),e.R7$(),e.Y8G("hidden",0!=n.tab)("bankInfoObj",n.bankInfoObj)("parentUpdateNoteIds",n.parentUpdateNoteIds),e.R7$(),e.Y8G("ngIf",1==n.tab),e.R7$(),e.Y8G("hidden",2!=n.tab)("bankId",n.bankId),e.R7$(),e.Y8G("hidden",3!=n.tab)("bankId",n.bankId)}}function Vs(t,a){if(1&t&&e.DNE(0,Ys,32,50,"div",6),2&t){const n=e.XpG();e.Y8G("ngIf",n.bankInfoObj)}}function Bs(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",42)(1,"ul",43)(2,"li")(3,"a",44),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.createFrame())}),e.nrm(4,"lucide-icon",45),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()()()}2&t&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(4,Fs)),e.R7$(),e.SpI(" ",e.bMT(6,2,"lang_azt_create_structure")," "))}function Us(t,a){if(1&t&&e.DNE(0,Bs,7,5,"div",41),2&t){const n=e.XpG();e.Y8G("ngIf",null==n.roleUser?null:n.roleUser.includes("owner"))}}const Ks=[{path:"",component:q.z,canActivate:[R.t],children:[{path:"dashboard",component:da},{path:"choose-import-question-mode/:bankId",component:en},{path:"view-question-library/:bankId/:tab",component:(()=>{var t;class a extends j.H{selectTab(i){this.tab=i,this.commonService.myNavigation("/admin/question-library/view-question-library/"+this.bankId+"/"+this.tab)}goToChooseImportQuestionMode(){this.commonService.myNavigation(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}goToCreateExamMatrix(){this.myNavigationWithQueryString("/admin/testbank/mix-ebank-template/0/ebank/0",`?bankId=${this.bankId}&levelId=${this.bankInfoObj?.levelId}&subjectId=${this.bankInfoObj?.subjectId}&bookId=${this.bankInfoObj?.bookId}`)}updateNote(i){this.parentUpdateNoteIds=i,this.getDataBank()}getDataBank(){this.initStatusObj(),this.eBanksService.apiEbanksIdGet(this.bankId,1).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.bankInfoObj=i.data,this.stopStatusObj()})}updateDataBank(){this.eBanksService.apiEbanksIdGet(this.bankId,1).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.bankInfoObj=i.data,this.stopStatusObj()})}createFrame(){this.sAztDialogService.open(ae,{data:{ebankId:this.bankId},width:"500px"}).afterClosed().subscribe(o=>{!o||!this.bankInfoObj||this.getDataBank()})}getRoleUserInQuestionLibrary(){this.wrapApiResponse(this.sAztQuestionLibraryPermissionService.getRoleQuestionLibrary(this.bankId,this.sAztUserService.getUserObj().tenantId??0)).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message);this.roleUser=i.data})}ngOnInit(){this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard",this.getDataBank(),this.getRoleUserInQuestionLibrary(),this.waitDestroy((0,le.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.tab=Number(this.commonService.getMyParam(this.activeRoute,"tab")),this.tab>3&&this.selectTab(0)}))}constructor(i,o,s,r,_){super(),this.activeRoute=i,this.eBanksService=o,this.sAztDialogService=s,this.sAztQuestionLibraryPermissionService=r,this.sAztUserService=_,this.backLink="",this.tab=0,this.bankId=0,this.parentUpdateNoteIds=[]}}return(t=a).\u0275fac=function(i){return new(i||t)(e.rXU(p.nX),e.rXU(E.nd),e.rXU(A.i),e.rXU(oe),e.rXU(ie.R))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-bank"]],features:[e.Vt3],decls:7,vars:3,consts:[["doneLoading",""],["menu",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["contextMenuItem",""],[3,"currentStatusObj"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"justify-between","items-center",3,"ngClass"],[1,"font-medium"],[1,"ml-2","text-slate-500","text-xs"],[3,"reloadData","bankId","tab","ebankDataObj"],["class","flex items-start mt-5",4,"ngIf"],[1,"flex","justify-between","mt-5"],[1,"flex","font-medium",3,"ngClass"],[1,"btn-tab","clickable",3,"click"],["name","list","size","16"],["class","ml-2",4,"ngIf"],[1,"btn-tab","clickable","ml-2",3,"click"],["name","users","size","16"],["class","text-xs number-red ml-2",4,"ngIf"],[3,"type","ngClass","size"],[4,"ngIf"],[1,"btn-tab","clickable","nl-2",3,"click"],["name","settings","size","16"],["class","flex items-start mb-2",4,"ngIf"],[1,"box","p-5",2,"border-radius","0rem 0.375rem 0.375rem 0.375rem",3,"contextMenu"],[3,"reloadApiEvent","hidden","bankInfoObj","parentUpdateNoteIds"],[3,"hidden","bankId","reloadApiEvent",4,"ngIf"],[3,"hidden","bankId"],[1,"flex","items-start","mt-5"],[1,"btn","btn-primary","mr-2",3,"click","ngClass"],[3,"runAction","ngClass","ebankId","allowRoles"],[1,"btn","btn-primary",3,"ngClass"],[1,"ml-2"],[1,"text-xs","number-red","ml-2"],[1,"flex","items-start","mb-2"],[1,"btn","btn-primary",3,"click"],[3,"runAction","ebankId","allowRoles"],[1,"btn","btn-primary","ml-3"],[3,"reloadApiEvent","hidden","bankId"],["class","dropdown-menu show w-48 relative",4,"ngIf"],[1,"dropdown-menu","show","w-48","relative"],[1,"dropdown-content"],[1,"dropdown-item",3,"click"],["name","plus","size","16",3,"ngClass"]],template:function(i,o){if(1&i&&(e.j41(0,"teacher-layout",2),e.DNE(1,As,1,1,"azt-loading-effect",3)(2,Vs,1,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(4,"context-menu",null,1),e.DNE(6,Us,1,1,"ng-template",4),e.k0s()),2&i){const s=e.sdS(3);e.Y8G("headerBackToLink",o.backLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.bT,B.K,xe.m,D,$.Q,m.WGl,b.Q5,b.Ek,b.JO,Aa,Ya,Va,ys,ws,x.wp],styles:[".btn-tab[_ngcontent-%COMP%]{padding:10px 15px 18px;display:flex;justify-content:center;align-items:center}.btn-tab-select[_ngcontent-%COMP%]{background:#fff;border-top-left-radius:8px;border-top-right-radius:8px}.number-red[_ngcontent-%COMP%]{background:red;border-radius:50%;width:17px;height:17px;color:#fff;font-weight:900;display:flex;justify-content:center;align-items:center;margin:auto auto auto 5px}"]}),a})()},{path:"add-new-question-library",component:Yt},{path:"import-question-to-library/:bankId",component:Pn},{path:"view-question-list-node/:bankId/:frameId",component:ka},{path:"view-question-activity/:bankId/:turnImportId",component:Yo}]}];let Js=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(Ks),p.iI,w.XE]}),a})(),Ws=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI,c.MD,v.s,d.Id,u.YN,u.X1,I.hM,h.L,f.Lk,d.Id,y.xv,O.Q,C.b,m.flO.pick(m.Ptg),g.An,Js,k.Fr,b.rc]}),a})()},10296:(z,S,l)=>{"use strict";l.d(S,{R:()=>m});var c=l(43277),I=l(18148),p=l(48891),b=l(52509),k=l(53793);let m=(()=>{var f;class y{constructor(d,v){this.mobileWebviewService=d,this.commonService=v}shareFileWithBlob(d,v){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return c.saveAs(d,v);if(this.commonService.isMobileWebview(void 0)){I.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let h=new FileReader;h.readAsDataURL(d),h.onloadend=()=>{let C=h.result;"string"==typeof C&&(this.mobileWebviewService.sendShareFileBase64(v,String(C)),I.L.closeLoadingEffect(100))}}else c.saveAs(d,v)}shareFileWithBase64(d,v){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return c.saveAs(d,v);this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(v,d):c.saveAs(d,v)}}return(f=y).\u0275fac=function(d){return new(d||f)(p.KVO(b.f),p.KVO(k.R))},f.\u0275prov=p.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),y})()},18148:(z,S,l)=>{"use strict";l.d(S,{L:()=>c});let c=(()=>{var u;class I{static openLoadingEffect(b){I.getDomElement().style.display="flex",setTimeout(()=>{I.changeMsgLoadingEffect(b)},50)}static closeLoadingEffect(b){return new Promise(k=>{setTimeout(()=>{const m=I.getDomElement();m&&(m.style.display="none"),k(!0)},b)})}static changeMsgLoadingEffect(b){I.getDomContent().innerText=b}static getDomContent(){return document.getElementById(I.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(I.idComponent)??this.createDomElement()}static createDomElement(){const b=document.createElement("div");return b.id=I.idComponent,b.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),b.style.display="none",b.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${I.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(b),b}}return(u=I).idComponent="azt-status-loading-effect",u.idStatusContent="azt-status-loading-effect-content",I})()},37320:(z,S,l)=>{"use strict";l.d(S,{f:()=>v});var c=l(48891),u=l(14527),I=l(53793),p=l(17838),b=l(82040),k=l(18447),m=l(85710),f=l(27035),y=l(5424);class g{addTask(C,O){if(null!=O&&this.baseResultCache.has(O))return this.baseResultCache.get(O).asObservable();const w=new p.m(1);return null!=O&&this.baseResultCache.set(O,w),this.baseTaskQueue$?.next(C.pipe((0,b.M)({next:R=>{!R.success&&null!=O&&this.baseResultCache.delete(O),w.next(R)},error:()=>{null!=O&&this.baseResultCache.delete(O),w.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),w.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new k.B,this.baseSubscription=new m.yU,this.initializeQueue()}resetConcurrency(C){this.baseLimitConcurrency!=C&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new k.B;const C=this.baseTaskQueue$.pipe((0,f.Z)(O=>O.pipe((0,y.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:O=>{},error:O=>{},complete:()=>{}});this.baseSubscription.add(C)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(C=10){this.baseLimitConcurrency=C,this.baseTaskQueue$=null,this.baseDestroy$=new k.B,this.baseSubscription=new m.yU,this.baseResultCache=new Map,this.initializeQueue()}}var d=l(35810);let v=(()=>{var h;class C extends g{callApiToGuestKnowledge(w,R,q,j){if(""==this.standardQuestionData(R))return q(void 0,void 0,void 0);let e={questionId:w?R.questionId:void 0,text:w?void 0:this.standardQuestionData(R),levelId:R.levelId,subjectId:R.subjectId,ebankId:R.ebankId},E=this.aiService.apiAiPredictQuestionKnowledgePost(e);this.addTask(E,this.sAztEncryptService.createMd5(this.commonService.serializeJson(e))).subscribe(F=>F.success?"vip_required"==F.errorCode?j("lang_core_need_vip_upgrade"):!F.data||F.data.score<this.AI_MIN_SCORE?q(void 0,void 0,void 0):void q(F.data.knowledgeId,F.data.objectiveId,F.data.tagId):j(F.message))}standardQuestionData(w){let R=this.commonService.parseQuestionContent(w.questionContent);return R+=" "+this.commonService.parseQuestionContent(w.answerContents.join(" - ")),R.trim()}constructor(){super(2),this.commonService=(0,c.WQX)(I.R),this.aiService=(0,c.WQX)(u.Ee),this.sAztEncryptService=(0,c.WQX)(d.v),this.AI_MIN_SCORE=2.8}}return(h=C).\u0275fac=function(w){return new(w||h)},h.\u0275prov=c.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),C})()},34292:(z,S,l)=>{"use strict";l.d(S,{c:()=>I});var c=l(18447),u=l(48891);let I=(()=>{var p;class b{constructor(){this.checkQuestion=new c.B}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(m){this.checkQuestion.next(m)}}return(p=b).\u0275fac=function(m){return new(m||p)},p.\u0275prov=u.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),b})()},68106:(z,S,l)=>{"use strict";l.d(S,{c:()=>k});var c=l(48891),u=l(78472),I=l(51698),p=l(88249),b=l(53793);let k=(()=>{var m;class f{constructor(){this.questionService=(0,c.WQX)(u.wP),this.commonService=(0,c.WQX)(b.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(g,d,v){return new I.c(h=>{let C=g.configAnswers.find(w=>w.key==d);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:g.id,answers:[{answerKey:d,objectiveId:C?.objectiveId,tag:v?.code??""}]}]}).subscribe(w=>{if(!w)return h.next(!1),h.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),h.next(!0),h.complete()})})}formatTag(g){return g.map(d=>({...d,showName:this.commonService.getValueOfKeyInObject(d,this.commonService.getCurrentLang()+"Name")??d.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new I.c(g=>{this.questionService.apiQuestionGetTagsGet().subscribe(d=>{if(!d.success)return this.commonService.snackError(d.message);g.next(d.data?.objs?.filter(v=>"VDC"!=v.code)??[]),g.complete()})}).pipe((0,p.t)(1))),this.replayCache$}findCurrentTag(g,d,v){let h=d.find(O=>this.commonService.compareLowerCase(O.key,v))?.tagId,C=g.find(O=>O.id==h);return C?"azt_lang_tag_"+C.code:""}}return(m=f).\u0275fac=function(g){return new(g||m)},m.\u0275prov=c.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),f})()},99743:(z,S,l)=>{"use strict";l.d(S,{I:()=>p});var c=l(48891),u=l(53793),I=l(99927);let p=(()=>{var b;class k{constructor(){this.commonService=(0,c.WQX)(u.R),this.sAztAnswerTypeService=(0,c.WQX)(I._)}changeObjectiveForCommonQuestion(f,y){return f.knowledgeId=y.id,f.objectiveId=y.objectiveId,f.ebankFrameId=y.id,f}changeObjectiveForTrueFalseQuestion(f,y,g){return f.configAnswers.find(d=>d.key==g)?(f.configAnswers.forEach(d=>{d.key==g&&(d.objectiveId=y?.objectiveId,d.knowledgeId=y?.id,d.ebankFrameId=y.id)}),f):(f.configAnswers.push({key:g,objectiveId:y.objectiveId,knowledgeId:y.id,ebankFrameId:y.id}),f)}changeTagForCommonQuestion(f,y){return f.tags=y,f}changeTagForTrueFalseQuestion(f,y,g){let d=this.commonService.getFirstOfArray(g);return f.configAnswers.find(v=>v.key==y)?(f.configAnswers.forEach(v=>{v.key==y&&(v.tagId=d?.id,v.tagName=d?.name,v.tagCode=d?.code)}),f):(f.configAnswers.push({key:y,knowledgeId:void 0,objectiveId:void 0,tagCode:d?.code,tagId:d?.id,tagName:d?.name}),f)}changeTagForCommonQuestView(f,y){return f.tag=y,f}changeTagForTrueFalseQuestView(f,y,g){let d=this.commonService.getFirstOfArray(g);return f.configAnswers||(f.configAnswers=[]),f.configAnswers.find(v=>v.key==y)?(f.configAnswers.forEach(v=>{v.key==y&&(v.tagId=d?.id,v.tagName=d?.name,v.tagCode=d?.code)}),f):(f.configAnswers.push({key:y,knowledgeId:void 0,objectiveId:void 0,tagCode:d?.code,tagId:d?.id,tagName:d?.name}),f)}}return(b=k).\u0275fac=function(f){return new(f||b)},b.\u0275prov=c.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),k})()},50334:(z,S,l)=>{"use strict";l.d(S,{C:()=>u});var c=l(59640);class u extends c.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(p){this.nodeObjs=(p=this.standardSearchText(p)).trim()?this.doSearchByText(p,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(p){p.isExpand=!0}collapse(p){p.isExpand=!1}doSearchByText(p,b,k){for(var m of b){m.isShow=!1;let f=this.standardSearchText(m.text);(p.includes(f)||f.includes(p))&&(m.isShow=!0,m.isExpand=!0,k.forEach(y=>{y.isShow=!0,y.isExpand=!0})),m.children.length&&(m.children=this.doSearchByText(p,m.children,k.concat(m)))}return b}showAndExpandAll(p){for(var b of p)b.isShow=!0,b.isExpand=!0,b.children=this.showAndExpandAll(b.children);return p}standardSearchText(p){return p=p.toLowerCase(),p=this.commonService.removeSpecialStringInSearch(p),this.commonService.convertVietnameseToEnglish(p)}}},89121:(z,S,l)=>{"use strict";l.d(S,{z:()=>p});var c=l(59640),u=l(48891),I=l(65162);let p=(()=>{var b;class k extends c.H{constructor(){super(...arguments),this.id="default-id"}}return(b=k).\u0275fac=(()=>{let m;return function(y){return(m||(m=u.xGo(b)))(y||b)}})(),b.\u0275cmp=u.VBU({type:b,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[u.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(f,y){1&f&&(u.j41(0,"div",0),u.nrm(1,"router-outlet"),u.k0s()),2&f&&u.FS9("id",y.id)},dependencies:[I.n3],encapsulation:2}),k})()},43277:function(z,S){var l,u;void 0!==(u="function"==typeof(l=function(){"use strict";function p(g,d,v){var h=new XMLHttpRequest;h.open("GET",g),h.responseType="blob",h.onload=function(){y(h.response,d,v)},h.onerror=function(){console.error("could not download file")},h.send()}function b(g){var d=new XMLHttpRequest;d.open("HEAD",g,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function k(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(d)}}var m="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,f=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=m.saveAs||("object"!=typeof window||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(g,d,v){var h=m.URL||m.webkitURL,C=document.createElement("a");C.download=d=d||g.name||"download",C.rel="noopener","string"==typeof g?(C.href=g,C.origin===location.origin?k(C):b(C.href)?p(g,d,v):k(C,C.target="_blank")):(C.href=h.createObjectURL(g),setTimeout(function(){h.revokeObjectURL(C.href)},4e4),setTimeout(function(){k(C)},0))}:"msSaveOrOpenBlob"in navigator?function(g,d,v){if(d=d||g.name||"download","string"!=typeof g)navigator.msSaveOrOpenBlob(function I(g,d){return typeof d>"u"?d={autoBom:!1}:"object"!=typeof d&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],{type:g.type}):g}(g,v),d);else if(b(g))p(g,d,v);else{var h=document.createElement("a");h.href=g,h.target="_blank",setTimeout(function(){k(h)})}}:function(g,d,v,h){if((h=h||open("","_blank"))&&(h.document.title=h.document.body.innerText="downloading..."),"string"==typeof g)return p(g,d,v);var C="application/octet-stream"===g.type,O=/constructor/i.test(m.HTMLElement)||m.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||C&&O||f)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var M=R.result;M=w?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=M:location=M,h=null},R.readAsDataURL(g)}else{var q=m.URL||m.webkitURL,j=q.createObjectURL(g);h?h.location=j:location.href=j,h=null,setTimeout(function(){q.revokeObjectURL(j)},4e4)}});m.saveAs=y.saveAs=y,z.exports=y})?l.apply(S,[]):l)&&(z.exports=u)}}]);