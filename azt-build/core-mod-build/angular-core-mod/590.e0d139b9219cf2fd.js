"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[590],{63590:(ct,v,s)=>{s.r(v),s.d(v,{PaymentRoutingModule:()=>it});var m=s(32108),P=s(74341),t=s(93953),b=s(57507),S=s(51454);let k=(()=>{var n;class a{constructor(o,r){this.userService=o,this.redirectService=r}canActivate(o,r){return!(-1===r.url.indexOf("/return-order")&&!this.userService.isLogin())}canActivateChild(o,r){return this.canActivate(o,r)}canLoad(o){const r=`/${o.path}`;return!(-1===r.indexOf("/return-order")&&!this.userService.isLogin()&&(this.redirectService.redirectLoginByReturnUrl(r),1))}}return(n=a).\u0275fac=function(o){return new(o||n)(t.KVO(b.R),t.KVO(S.m))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var i=s(60177),u=s(89417),l=s(83409),y=s(98697),g=s(47218),p=s(8516),_=s(11782),T=s(72093);let R=(()=>{var n;class a extends g.H{constructor(){super(...arguments),this.id="default-id"}}return(n=a).\u0275fac=(()=>{let e;return function(r){return(e||(e=t.xGo(n)))(r||n)}})(),n.\u0275cmp=t.VBU({type:n,selectors:[["app-common-master-page"]],inputs:{id:"id"},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:1,consts:[[3,"id"]],template:function(o,r){1&o&&(t.j41(0,"div",0),t.nrm(1,"router-outlet"),t.k0s()),2&o&&t.FS9("id",r.id)},dependencies:[i.MD,u.X1,m.iI,m.n3,u.YN,T.s,p.flO,y.L,_.Id,l.k],encapsulation:2}),a})();var C=s(63836),x=s(80464),c=function(n){return n.AZO_PACKAGE="AZO_PACKAGE",n.EXAM="EXAM",n.BUSINESS_PACKAGE="BUSINESS_PACKAGE",n.UPGRADE_PACKAGE="UPGRADE_PACKAGE",n.unknown="unknown",n.VIP_PACKAGE="VIP_PACKAGE",n}(c||{}),f=s(89819),A=s(81538);const h=n=>[n];function O(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",6)(5,"a",7),t.nI1(6,"navigationLocalize"),t.nI1(7,"navigationLocalizeForQueryString"),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()(),t.j41(10,"div",8),t.EFF(11),t.nI1(12,"mytranslate"),t.j41(13,"a",9),t.nI1(14,"navigationLocalize"),t.nI1(15,"navigationLocalizeForQueryString"),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()(),t.bVm()),2&n){const e=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,8,"lang_payment_return_anonymous_notice")),t.R7$(3),t.Y8G("routerLink",t.eq3(24,h,t.bMT(6,10,"/auth/login")))("queryParams",t.bMT(7,12,"?return_url="+e.myEncodeURIComponent("/"+e.currentLanguage+"/payment/convert-product?oldAccessToken="+e.myEncodeURIComponent(e.currentUserToken)+"&backTo="+e.myEncodeURIComponent(e.backTo))+"&user_click=true")),t.R7$(3),t.SpI(" ",t.bMT(9,14,"lang_payment_return_login")," "),t.R7$(3),t.SpI(" ",t.bMT(12,16,"lang_auto_ban_chua_co_tai_khoan")," "),t.R7$(2),t.Y8G("routerLink",t.eq3(26,h,t.bMT(14,18,"/auth/register/0")))("queryParams",t.bMT(15,20,"?return_url="+e.myEncodeURIComponent("/"+e.currentLanguage+"/payment/convert-product?oldAccessToken="+e.myEncodeURIComponent(e.currentUserToken)+"&backTo="+e.myEncodeURIComponent(e.backTo))+"&user_click=true")),t.R7$(3),t.SpI(" ",t.bMT(17,22,"lang_auto_tao_mot_tai_khoan_moi")," ")}}function E(n,a){if(1&n){const e=t.RV6();t.j41(0,"a",10),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.redirectBackto())}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_payment_return_continue_buy")," "))}function G(n,a){if(1&n&&(t.qex(0),t.DNE(1,O,18,28,"ng-container",4)(2,E,3,3,"ng-template",null,0,t.C5r),t.bVm()),2&n){const e=t.sdS(3),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.isAnonymousRole)("ngIfElse",e)}}function F(n,a){if(1&n&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("href","https://"+e.transactionBusiness.registerObj.domain+"/"+e.currentLanguage+"/auth/login?isFirstTime=1&access_token="+e.transactionBusiness.accessToken,t.B4B),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_payment_business_start_join")," ")}}function M(n,a){if(1&n&&(t.j41(0,"a",12),t.nI1(1,"navigationLocalize"),t.nI1(2,"navigationLocalizeForQueryString"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()),2&n){const e=t.XpG(2);t.Y8G("routerLink",t.eq3(9,h,t.bMT(1,3,e.backTo)))("queryParams",t.bMT(2,5,e.backTo)),t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_payment_return_continue_buy")," ")}}function B(n,a){if(1&n&&(t.qex(0),t.DNE(1,F,4,4,"div",4)(2,M,5,11,"ng-template",null,1,t.C5r),t.bVm()),2&n){const e=t.sdS(3),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.successTransaction&&o.transactionBusiness)("ngIfElse",e)}}function j(n,a){1&n&&(t.j41(0,"div")(1,"a",13),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()),2&n&&(t.R7$(),t.Y8G("routerLink",t.eq3(6,h,t.bMT(2,2,"/business/business-configs/0"))),t.R7$(2),t.SpI(" ",t.bMT(4,4,"lang_payment_return_continue_buy")," "))}function z(n,a){if(1&n&&(t.j41(0,"a",12),t.nI1(1,"navigationLocalize"),t.nI1(2,"navigationLocalizeForQueryString"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()),2&n){const e=t.XpG(2);t.Y8G("routerLink",t.eq3(9,h,t.bMT(1,3,e.backTo)))("queryParams",t.bMT(2,5,e.backTo)),t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_payment_return_continue_buy")," ")}}function N(n,a){if(1&n&&(t.qex(0),t.DNE(1,j,5,8,"div",4)(2,z,5,11,"ng-template",null,1,t.C5r),t.bVm()),2&n){const e=t.sdS(3),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.successTransaction)("ngIfElse",e)}}let $=(()=>{var n;class a extends g.H{myEncodeURIComponent(o){return encodeURIComponent(o)}ngOnInit(){super.ngOnInit(),this.isAnonymousRole=this.userService.isNotLoginOrIsAnonymous();let o=this.userService.getUserObj();this.currentUserToken=o.rememberToken??"","00"==String(this.commonService.getMyQueryParam("vnp_ResponseCode"))&&(this.successTransaction=!0)}redirectBackto(){let o=1==Number(this.commonService.getMyQueryParam("getInvoice")),r=Number(this.commonService.getMyQueryParam("vnp_TxnRef"));if(this.productType!=c.VIP_PACKAGE||!this.successTransaction)return this.commonService.myNavigationBySpecialQueryString(this.backTo);this.sAztDialogService.open(x.V,{data:{askForInvoice:!o,idTransactionVNPay:r},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(mt=>this.commonService.myNavigationBySpecialQueryString(this.backTo))}constructor(o,r){super(),this.userService=o,this.sAztDialogService=r,this.backTo="",this.productType=c.unknown,this.isAnonymousRole=!1,this.EAztPaymentPackageType=c,this.successTransaction=!1,this.currentLanguage=this.commonService.getCurrentLang(),this.currentUserToken=""}}return(n=a).\u0275fac=function(o){return new(o||n)(t.rXU(b.R),t.rXU(A.i))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-payment-product-info-box"]],inputs:{backTo:"backTo",transactionBusiness:"transactionBusiness",productType:"productType"},standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["normalTransaction",""],["errorTransaction",""],[1,"mt-3","w-full","text-center"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"text-danger","font-medium","mb-3","px-1",2,"font-size","18px","line-height","30px"],[1,"pl-2","pr-2"],[1,"btn","w-full","btn-primary","mx-auto",3,"routerLink","queryParams"],[1,"mt-2","pl-2","pr-2"],[1,"link-color",3,"routerLink","queryParams"],["azt-track-service","payment-return-Pyo6TbUnsBP",1,"btn","w-40","btn-primary","mx-auto",3,"click"],[1,"btn","w-60","btn-primary","mx-auto","block",3,"href"],["azt-track-service","payment-return-Pyo6TbUnsBP",1,"btn","w-40","btn-primary","mx-auto",3,"routerLink","queryParams"],[1,"btn","w-60","btn-primary","mx-auto","block",3,"routerLink"]],template:function(o,r){1&o&&(t.j41(0,"div",2),t.DNE(1,G,4,2,"ng-container",3)(2,B,4,2,"ng-container",3)(3,N,4,2,"ng-container",3),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngIf",r.productType!=r.EAztPaymentPackageType.BUSINESS_PACKAGE&&r.productType!=r.EAztPaymentPackageType.UPGRADE_PACKAGE),t.R7$(),t.Y8G("ngIf",r.productType==r.EAztPaymentPackageType.BUSINESS_PACKAGE),t.R7$(),t.Y8G("ngIf",r.productType==r.EAztPaymentPackageType.UPGRADE_PACKAGE))},dependencies:[f.F2,i.MD,i.bT,u.X1,m.iI,m.Wk,u.YN,f.wp,T.s,p.flO,y.L,f.Ji,_.Id,l.k],styles:[".payment-box[_ngcontent-%COMP%]{margin:20px auto auto;border:1px solid #d3d3d3;background-color:#fff;max-width:350px;border-radius:5px;align-items:center;flex-direction:column;padding:20px 0}.payment-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;float:left;padding:0 15px}.body__about[_ngcontent-%COMP%]{padding-top:20px;width:100%;border-top:1px solid #d3d3d3;justify-content:center}"]}),a})();var L=s(83801),U=s(14823);const V=(n,a)=>({"text-success":n,"text-danger":a});function Y(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",14)(1,"div",6)(2,"p",15),t.EFF(3),t.nI1(4,"mytranslate"),t.j41(5,"span",16),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.showCopySuccess())}),t.EFF(6),t.k0s()(),t.nrm(7,"p",17),t.nI1(8,"mytranslate"),t.j41(9,"a",18),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(3),t.SpI("",t.bMT(4,5,"lang_payment_return_order_code"),": "),t.R7$(2),t.Y8G("cdkCopyToClipboard",e.copyLinkToClipboard()),t.R7$(),t.JRh(e.anonymousStudentTransactionId),t.R7$(),t.Y8G("innerHTML",t.bMT(8,7,"lang_payment_return_order_code_note"),t.npT),t.R7$(3),t.JRh(t.bMT(11,9,"lang_payment_return_order_code_activate_instructions"))}}function D(n,a){if(1&n&&(t.j41(0,"div",9)(1,"p",10),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"p",11),t.EFF(5),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.SpI("",t.bMT(3,2,"lang_payment_business_package_business_email"),":"),t.R7$(3),t.JRh(e.transactionBusiness.registerObj.email)}}function X(n,a){if(1&n&&(t.j41(0,"div",8)(1,"div",9)(2,"p",10),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"p",11),t.EFF(6),t.k0s()(),t.j41(7,"div",9)(8,"p",10),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"p",11),t.EFF(12),t.k0s()(),t.DNE(13,D,6,4,"div",19),t.j41(14,"div",20)(15,"p",10),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"p",11)(19,"a",21),t.EFF(20),t.k0s()()()()),2&n){const e=t.XpG();t.R7$(3),t.SpI("",t.bMT(4,8,"lang_payment_business_package_business_name"),":"),t.R7$(3),t.JRh(e.transactionBusiness.registerObj.businessName),t.R7$(3),t.SpI("",t.bMT(10,10,"lang_payment_business_package_business_phone"),":"),t.R7$(3),t.JRh(e.transactionBusiness.registerObj.phone),t.R7$(),t.Y8G("ngIf",e.transactionBusiness.registerObj.email),t.R7$(3),t.SpI("",t.bMT(17,12,"lang_payment_business_package_business_domain"),":"),t.R7$(3),t.Y8G("href","https://"+e.transactionBusiness.registerObj.domain+"/"+e.currentLanguage+"/auth/login?isFirstTime=1&access_token="+e.transactionBusiness.accessToken,t.B4B),t.R7$(),t.SpI(" https://",e.transactionBusiness.registerObj.domain," ")}}let Q=(()=>{var n;class a extends g.H{copyLinkToClipboard(){return this.anonymousStudentTransactionId}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngOnInit(){this.vnp_TxnRef=String(this.commonService.getMyQueryParam("vnp_TxnRef")),this.vnp_Amount=Number(this.commonService.getMyQueryParam("vnp_Amount"))/100,this.vnp_ResponseCode=String(this.commonService.getMyQueryParam("vnp_ResponseCode")),"00"==this.vnp_ResponseCode&&(this.successTransaction=!0),this.vnp_TransactionNo=String(this.commonService.getMyQueryParam("vnp_TransactionNo")),this.typeTransaction=this.commonService.getMyQueryParam("vnp_BankCode")??"";var o=String(this.commonService.getMyQueryParam("vnp_PayDate")),r=new Date(Number(o.substring(0,4)),Number(o.substring(4,6))-1,Number(o.substring(6,8)),Number(o.substring(8,10)),Number(o.substring(10,12)),Number(o.substring(12,14)),0);this.vnp_Second=r.getTime(),super.ngOnInit()}constructor(){super(),this.productType=c.unknown,this.currentRole="NOT_LOGIN",this.anonymousStudentTransactionId="",this.currentLanguage=this.commonService.getCurrentLang(),this.EAztPaymentPackageType=c,this.vnp_TxnRef="",this.vnp_Amount=0,this.vnp_ResponseCode="",this.vnp_TransactionNo="",this.successTransaction=!1,this.typeTransaction="",this.vnp_Second=0}}return(n=a).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-vn-pay-transaction-box"]],inputs:{productType:"productType",currentRole:"currentRole",transactionBusiness:"transactionBusiness",anonymousStudentTransactionId:"anonymousStudentTransactionId"},standalone:!0,features:[t.Vt3,t.aNF],decls:42,vars:41,consts:[[1,"intro-y","pt-3","px-3"],["class","text-center pb-2 border-b border-slate-200/60 dark:border-darkmode-400",4,"ngIf"],[1,"text-center","pb-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"mt-1","mb-2"],["strokeWidth","3",1,"w-12","h-12","flex-none",3,"name"],[1,"mt-2",2,"font-weight","700","font-size","18px",3,"ngClass"],[1,"text-center","mt-2","mb-2"],[1,"text-md","text-primary",2,"font-weight","450"],[1,"mb-2"],[1,"mt-2","pb-2","flex","justify-between","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-slate-600"],[1,"desc__text",2,"font-weight","450"],[1,"desc__text",2,"font-weight","450","text-transform","uppercase"],["class","mb-2",4,"ngIf"],[1,"text-center","pb-2","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","link__color",2,"font-weight","500"],["matTooltip","Copy",1,"text-primary","link__hover",2,"cursor","pointer",3,"click","cdkCopyToClipboard"],[1,"py-2","px-3","text-danger",2,"text-align","justify","font-size","14px",3,"innerHTML"],["href","https://docs.azota.vn/docs/huong-dan-su-dung/cau-hoi-thuong-gap/huong-dan-kich-hoat-vip-cho-tai-khoan-hoc-sinh/","target","blank",1,"text-md","link__color","link__hover","mt-2",2,"font-weight","500"],["class","mt-2 pb-2 flex justify-between border-b border-slate-200/60 dark:border-darkmode-400",4,"ngIf"],[1,"mt-2","pb-2","flex","justify-between","flex-wrap","border-b","border-slate-200/60","dark:border-darkmode-400"],[2,"word-break","break-all",3,"href"]],template:function(o,r){1&o&&(t.j41(0,"div",0),t.DNE(1,Y,12,11,"div",1),t.j41(2,"div",2)(3,"div",3),t.nrm(4,"lucide-icon",4),t.k0s(),t.j41(5,"h3",5),t.EFF(6),t.nI1(7,"mytranslate"),t.nI1(8,"mytranslate"),t.k0s()(),t.j41(9,"div",6)(10,"p",7),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()(),t.j41(13,"div",8)(14,"div",9)(15,"p",10),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"p",11),t.EFF(19),t.nI1(20,"number"),t.nI1(21,"mytranslate"),t.k0s()(),t.j41(22,"div",9)(23,"p",10),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s(),t.j41(26,"p",12),t.EFF(27),t.k0s()(),t.j41(28,"div",9)(29,"p",10),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s(),t.j41(32,"p",11),t.EFF(33),t.k0s()(),t.j41(34,"div",9)(35,"p",10),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s(),t.j41(38,"p",11),t.EFF(39),t.nI1(40,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()(),t.DNE(41,X,21,14,"div",13),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngIf",r.successTransaction&&r.anonymousStudentTransactionId),t.R7$(3),t.Aen("color:"+(r.successTransaction?"#10eb00":"#d21414")),t.FS9("name",r.successTransaction?"circle-check":"circle-x"),t.R7$(),t.Y8G("ngClass",t.l_i(38,V,r.successTransaction,!r.successTransaction)),t.R7$(),t.SpI(" ",r.successTransaction?t.bMT(7,18,"lang_payment_return_buying_success"):t.bMT(8,20,"lang_payment_return_buying_danger")," "),t.R7$(5),t.Lme("",t.bMT(12,22,"lang_payment_return_code"),": ",r.vnp_TxnRef,""),t.R7$(5),t.SpI("",t.bMT(17,24,"lang_payment_return_payment_number"),":"),t.R7$(3),t.Lme("",t.bMT(20,26,r.vnp_Amount)," ",t.bMT(21,28,"lang_auto_vnd_upper"),""),t.R7$(5),t.SpI("",t.bMT(25,30,"lang_payment_return_method_payment"),":"),t.R7$(3),t.JRh(r.typeTransaction),t.R7$(3),t.SpI("",t.bMT(31,32,"lang_payment_return_code_payment_vnpay"),":"),t.R7$(3),t.JRh(r.vnp_TransactionNo),t.R7$(3),t.SpI("",t.bMT(37,34,"lang_payment_return_time_pay"),":"),t.R7$(3),t.JRh(t.bMT(40,36,r.vnp_Second)),t.R7$(2),t.Y8G("ngIf",r.transactionBusiness&&r.productType===r.EAztPaymentPackageType.BUSINESS_PACKAGE))},dependencies:[i.MD,i.YU,i.bT,i.QX,u.X1,m.iI,u.YN,f.wp,T.s,L.dF,U.oV,p.flO,p.WGl,y.L,f.bH,_.Id,l.k],styles:[".payment-box[_ngcontent-%COMP%]{margin:20px auto auto;border:1px solid #d3d3d3;background-color:#fff;max-width:350px;border-radius:5px;align-items:center;flex-direction:column;padding:20px 0}.payment-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;float:left;padding:0 15px}.body__about[_ngcontent-%COMP%]{padding-top:20px;width:100%;border-top:1px solid #d3d3d3;justify-content:center}"]}),a})();var w=s(96032),K=s(4100),H=s(89966),I=s(29097);function J(n,a){if(1&n&&(t.j41(0,"teacher-layout",4)(1,"div",5)(2,"div",6),t.eu8(3,7),t.k0s()()()),2&n){const e=t.XpG(),o=t.sdS(4);t.Y8G("headerBackToLink",e.backTo),t.R7$(3),t.Y8G("ngTemplateOutlet",o)}}function W(n,a){if(1&n&&(t.j41(0,"student-layout",4)(1,"div",5)(2,"div",6),t.eu8(3,7),t.k0s()()()),2&n){const e=t.XpG(),o=t.sdS(4);t.Y8G("headerBackToLink",e.backTo),t.R7$(3),t.Y8G("ngTemplateOutlet",o)}}function Z(n,a){if(1&n&&(t.j41(0,"auth-layout"),t.eu8(1,7),t.k0s()),2&n){t.XpG();const e=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",e)}}function q(n,a){if(1&n&&t.nrm(0,"azt-loading-effect",9),2&n){const e=t.XpG(2);t.Y8G("currentStatusObj",e.statusObj)}}function tt(n,a){if(1&n&&t.nrm(0,"app-vn-pay-transaction-box",10)(1,"app-payment-product-info-box",11),2&n){const e=t.XpG(2);t.Y8G("productType",e.productType)("transactionBusiness",e.transactionBusiness)("anonymousStudentTransactionId",e.anonymousStudentTransactionId),t.R7$(),t.Y8G("productType",e.productType)("transactionBusiness",e.transactionBusiness)("backTo",e.backTo)}}function nt(n,a){if(1&n&&t.DNE(0,q,1,1,"azt-loading-effect",8)(1,tt,2,6,"ng-template",null,1,t.C5r),2&n){const e=t.sdS(2),o=t.XpG();t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",e)}}let et=(()=>{var n;class a extends g.H{getInfoTransaction(){const o=Number(this.getMyQueryParam("vnp_TxnRef"));this.waitDestroy(this.transactionCodeService.apiTransactionCodeGetTransactionProductByIdGet(o).subscribe(r=>{1===r.success?(this.anonymousStudentTransactionId=r.data?.obj?.transactionCode??"",this.stopStatusObj()):this.errorStatusObj(r.message??"",!0)}))}getTransactionBusinessInfo(){const o=Number(this.getMyQueryParam("vnp_TxnRef")),r=this.getMyQueryParam("azHash")??"";this.initStatusObj(),this.waitDestroy(this.productOrderService.apiProductOrderGetTransactionBusinessStatusGet(o,r).subscribe(d=>{1===d.success?(this.transactionBusiness=d.data,this.stopStatusObj()):this.errorStatusObj(d.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.currentRole="teacher"==this.commonService.getMyQueryParam("userRole")?"TEACHER":"STUDENT",this.currentRole=this.userService.isLogin()?this.currentRole:"NOT_LOGIN";let o=this.commonService.getMyQueryParam("backTo");this.backTo=o||("TEACHER"==this.currentRole?"/admin/dashboard":"/student/classroom/0");let r=this.commonService.getEnumTypeWithDefault(c,this.commonService.getMyQueryParam("productType")?.toUpperCase()??"",c.unknown);this.productType=r,this.productType==c.BUSINESS_PACKAGE&&this.getTransactionBusinessInfo(),"00"==String(this.commonService.getMyQueryParam("vnp_ResponseCode"))&&"STUDENT"==this.currentRole&&this.productType==c.VIP_PACKAGE&&this.userService.isNotLoginOrIsAnonymous()&&this.getInfoTransaction(),this.commonService.translateMetaData({title:"lang_core_payment_return_title",description:"lang_core_payment_return_description",image:"lang_cms_test_image"})}constructor(o,r){super(),this.userService=o,this.productOrderService=r,this.currentRole="NOT_LOGIN",this.backTo="",this.productType=c.unknown,this.anonymousStudentTransactionId="",this.transactionCodeService=(0,t.WQX)(C.HZ)}}return(n=a).\u0275fac=function(o){return new(o||n)(t.rXU(b.R),t.rXU(C.Hg))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-payment-return"]],standalone:!0,features:[t.Vt3,t.aNF],decls:5,vars:3,consts:[["returnPaymentInfo",""],["doneLoading",""],[3,"headerBackToLink",4,"ngIf"],[4,"ngIf"],[3,"headerBackToLink"],[1,"container","mt-5"],[1,"box","mx-auto","pb-3",2,"max-width","500px"],[3,"ngTemplateOutlet"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"productType","transactionBusiness","anonymousStudentTransactionId"],[3,"productType","transactionBusiness","backTo"]],template:function(o,r){1&o&&t.DNE(0,J,4,2,"teacher-layout",2)(1,W,4,2,"student-layout",2)(2,Z,2,1,"auth-layout",3)(3,nt,3,2,"ng-template",null,0,t.C5r),2&o&&(t.Y8G("ngIf","TEACHER"==r.currentRole),t.R7$(),t.Y8G("ngIf","STUDENT"==r.currentRole),t.R7$(),t.Y8G("ngIf","NOT_LOGIN"==r.currentRole))},dependencies:[H.Q,K.j,w.K,I.K,Q,$,i.MD,i.bT,i.T3,u.X1,m.iI,u.YN,T.s,p.flO,y.L,_.Id,l.k],encapsulation:2}),a})();var ot=s(66342),rt=s(42488);function at(n,a){if(1&n&&t.nrm(0,"azt-loading-effect",1),2&n){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}const st=[{path:"",component:R,canActivate:[k],children:[{path:"return-order",component:et},{path:"convert-product",component:(()=>{var n;class a extends g.H{convertProductToCurrentUser(){this.initStatusObj();let r={token:this.commonService.getMyQueryParam("oldAccessToken")??""};this.waitDestroy(this.frontExamService.apiFrontExamMoveAnonymousTransactionsPost(r).subscribe(d=>{this.stopStatusObj(),this.sAztUserVIPChangeStateService.changeVIPMessage(!0),this.commonService.myNavigationBySpecialQueryString(this.backTo)}))}ngOnInit(){super.ngOnInit();let o=this.commonService.getMyQueryParam("backTo");this.backTo=o||"/student/classroom/0",this.convertProductToCurrentUser()}constructor(o){super(),this.frontExamService=o,this.backTo="",this.sAztUserVIPChangeStateService=(0,t.WQX)(ot.Z)}}return(n=a).\u0275fac=function(o){return new(o||n)(t.rXU(rt.iB))},n.\u0275cmp=t.VBU({type:n,selectors:[["azt-convert-product-user"]],standalone:!0,features:[t.Vt3,t.aNF],decls:1,vars:1,consts:[[3,"currentStatusObj",4,"ngIf"],[3,"currentStatusObj"]],template:function(o,r){1&o&&t.DNE(0,at,1,1,"azt-loading-effect",0),2&o&&t.Y8G("ngIf",r.statusObj.loading)},dependencies:[I.K,i.MD,i.bT,u.X1,m.iI,u.YN,T.s,p.flO,y.L,_.Id,l.k],encapsulation:2}),a})()}]}];let it=(()=>{var n;class a{}return(n=a).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.iI.forChild(st),m.iI,P.XE]}),a})()}}]);