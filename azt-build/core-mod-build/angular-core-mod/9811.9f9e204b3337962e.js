"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[9811],{43166:(V,T,c)=>{c.d(T,{x:()=>l});var _=c(10936),r=c(48891),v=c(53793);let l=(()=>{var f;class S{filter(u,j){return null==u?[]:u=u.filter(k=>this.removeAllSpecialChars((null!=j?k[j]:k).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(u){let j=[];return u.forEach(k=>null!=k.schoolLevel&&j.push(k.schoolLevel)),j}removeAllSpecialChars(u){return u=(u=this.commonService.myTranslateInstant(u)??u).toLowerCase().trim(),u=this.commonService.convertVietnameseToEnglish(u),u=this.commonService.removeSpecialStringInSearch(u),(u=this.commonService.removeNonAlphabetic(u)).toLowerCase().trim()}constructor(u){this.commonService=u,this.searchControl=new _.MJ("",{nonNullable:!0})}}return(f=S).\u0275fac=function(u){return new(u||f)(r.rXU(v.R))},f.\u0275dir=r.FsC({type:f,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),S})()},75421:(V,T,c)=>{c.d(T,{u:()=>H});var _=c(10936),r=c(89163),v=c(33887),l=c(48891),f=c(54460),S=c(15343),C=c(73437);const u=()=>({"mr-2 text-danger":!0});function j(I,$){if(1&I&&l.nrm(0,"lucide-icon",10),2&I){const A=l.XpG();l.Y8G("name",A.data.iconName)("ngClass",l.lJ4(2,u))}}function k(I,$){if(1&I&&(l.j41(0,"div",11)(1,"div",3)(2,"span"),l.EFF(3),l.nI1(4,"mytranslate"),l.k0s(),l.j41(5,"b"),l.EFF(6),l.k0s(),l.j41(7,"span"),l.EFF(8),l.nI1(9,"mytranslate"),l.k0s()(),l.j41(10,"div",12),l.nrm(11,"input",13),l.k0s()()),2&I){const A=l.XpG();l.R7$(3),l.JRh(l.bMT(4,4,"lang_azt_enter")+" "),l.R7$(3),l.JRh('"'+A.data.textConfirm+'" '),l.R7$(2),l.JRh(l.bMT(9,6,"lang_azt_for_delete_data")),l.R7$(3),l.Y8G("formControl",A.confirmValue)}}let H=(()=>{var I;class $ extends v._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(O,t){super(t,O),this.dialogRef=O,this.data=t,this.confirmValue=new _.MJ("",{nonNullable:!0})}}return(I=$).\u0275fac=function(O){return new(O||I)(l.rXU(r.CP,8),l.rXU(r.Vh,8))},I.\u0275cmp=l.VBU({type:I,selectors:[["azt-dialog-danger"]],features:[l.Vt3],decls:14,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click","disabled"],["size","24",3,"name","ngClass"],[1,"mt-3"],[1,"mt-2"],["type","text",1,"form-control",3,"formControl"]],template:function(O,t){1&O&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l.DNE(4,j,1,3,"lucide-icon",4),l.nrm(5,"span",5),l.k0s(),l.DNE(6,k,12,8,"div",6),l.k0s()(),l.j41(7,"div",7)(8,"button",8),l.bIt("click",function(){return t.btnCloseDialog()}),l.EFF(9),l.nI1(10,"mytranslate"),l.k0s(),l.j41(11,"button",9),l.bIt("click",function(){return t.confirmDialog()}),l.EFF(12),l.nI1(13,"mytranslate"),l.k0s()()()),2&O&&(l.R7$(4),l.Y8G("ngIf",t.data.iconName),l.R7$(),l.Y8G("innerHtml",t.data.content,l.npT),l.R7$(),l.Y8G("ngIf",t.data.textConfirm),l.R7$(3),l.SpI(" ",l.bMT(10,6,"lang_auto_huy")," "),l.R7$(2),l.Y8G("disabled",t.data.textConfirm&&t.data.textConfirm!==t.confirmValue.value),l.R7$(),l.SpI(" ",l.bMT(13,8,"lang_auto_xac_nhan")," "))},dependencies:[f.YU,f.bT,_.me,_.BC,_.l_,S.WGl,C.wp],encapsulation:2}),$})()},89121:(V,T,c)=>{c.d(T,{z:()=>l});var _=c(59640),r=c(48891),v=c(65162);let l=(()=>{var f;class S extends _.H{constructor(){super(...arguments),this.id="default-id"}}return(f=S).\u0275fac=(()=>{let C;return function(j){return(C||(C=r.xGo(f)))(j||f)}})(),f.\u0275cmp=r.VBU({type:f,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[r.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(u,j){1&u&&(r.j41(0,"div",0),r.nrm(1,"router-outlet"),r.k0s()),2&u&&r.FS9("id",j.id)},dependencies:[v.n3],encapsulation:2}),S})()},99811:(V,T,c)=>{c.r(T),c.d(T,{AzotaAdsModule:()=>ze});var _=c(54460),r=c(10936),v=c(65162),l=c(69223),f=c(15343),S=c(10123),C=c(44233),u=c(5502),j=c(21656),k=c(70050),H=c(7050),I=c(35143),$=c(43234),A=c(1133),O=c(89121),t=c(48891),w=c(62548),y=c(20967),U=c(59640),M=c(15766),J=c(96270),ft=c(53793);let ht=(()=>{var e;class s{constructor(){this.commonListService=(0,t.WQX)(w.Nz),this.commonService=(0,t.WQX)(ft.R)}getSchoolLevelAndSubjects(n){this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(a=>{a.success||(this.commonService.snackError(a.message),n([],[],[],[],!1));let i=a.data?.schoolLevelSubjectObjs.map(b=>b.schoolLevel).filter(this.commonService.notEmpty)??[],m=this.commonService.concatMultipleArray(a.data?.schoolLevelSubjectObjs.map(b=>b.schoolSubjectObjs)??[]),d=this.commonService.uniqueArray(i.map(b=>b.key).filter(this.commonService.notEmpty)),g=this.commonService.uniqueArray(m.map(b=>b.key).filter(this.commonService.notEmpty));d=d.filter(b=>"azt_lang_core_khoi_khac"!=b),g=g.filter(b=>"azt_lang_core_khoi_khac"!=b),n(i,m,d,g,!0)})}getSelectedLevelAndSubjects(n,a,i){let m=n.filter(h=>"level"==h.filterType).map(h=>h.filterObjectId),d=n.filter(h=>"subject"==h.filterType).map(h=>h.filterObjectId);return{selectedSchoolLevels:this.commonService.uniqueArray(a.filter(h=>m?.includes(h.id)).map(h=>h.key).filter(this.commonService.notEmpty)),selectedSchoolSubjects:this.commonService.uniqueArray(i.filter(h=>d?.includes(h.id)).map(h=>h.key).filter(this.commonService.notEmpty))}}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})(),st=(()=>{var e;class s extends U.H{changeProvince(n){if(!n)return this.form.controls.provinceIds.setValue([]);this.form.controls.provinceIds.setValue(this.allProvinceObjs.map(a=>a.id))}changeSchoolLevel(n){if(!n)return this.form.controls.schoolLevels.setValue([]);this.form.controls.schoolLevels.setValue(this.allSchoolLevels)}changeSchoolSubject(n){if(!n)return this.form.controls.schoolSubjects.setValue([]);this.form.controls.schoolSubjects.setValue(this.allSchoolSubjects)}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(n){this.form.controls.attributesList.removeAt(n)}createFieldForm(n,a,i,m){return new r.gE({id:new r.MJ(m,{nonNullable:!0}),displayName:new r.MJ(n,{nonNullable:!0,validators:[r.k0.required,M.M.noWhiteSpace]}),variableName:new r.MJ(a,{nonNullable:!0,validators:[r.k0.required,M.M.noWhiteSpace]}),description:new r.MJ(i,{nonNullable:!0})})}ngOnInit(){super.ngOnInit()}constructor(){super(),this.commonListService=(0,t.WQX)(w.Nz),this.sAztCategoryAdsService=(0,t.WQX)(ht),this.categoryService=(0,t.WQX)(y.M$),this.activeRoute=(0,t.WQX)(v.nX),this.backToLink="",this.categoryId=0,this.listPositions=this.commonService.getEnumValues(y.rA),this.listDisplayTypes=this.commonService.getEnumValues(J.u),this.allProvinceObjs=[],this.allSchoolLevels=[],this.allSchoolSubjects=[],this.allSchoolLevelObjs=[],this.allSchoolSubjectObjs=[],this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,M.M.noWhiteSpace]}),adsPosition:new r.MJ(y.rA.ALLPOSITION,{nonNullable:!0,validators:[r.k0.required]}),adsDisplayType:new r.MJ(J.u.BANNER,{nonNullable:!0,validators:[r.k0.required]}),desc:new r.MJ("",{nonNullable:!0}),showForVip:new r.MJ(!1,{nonNullable:!0}),attributesList:new r.Yp([]),schoolLevels:new r.MJ([],{nonNullable:!0}),schoolSubjects:new r.MJ([],{nonNullable:!0}),provinceIds:new r.MJ([],{nonNullable:!0})})}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["base-ads-category-form"]],features:[t.Vt3],decls:0,vars:0,template:function(n,a){},encapsulation:2}),s})();var B=c(47426),X=c(95670),W=c(4375),rt=c(81587),K=c(43166),z=c(96451),E=c(73437);const vt=()=>({"mr-1":!0}),it=e=>({"border-danger":e});function yt(e,s){1&e&&(t.j41(0,"div",36)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Ct(e,s){if(1&e&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_azota_ads_position_"+o)," ")}}function jt(e,s){if(1&e&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function It(e,s){1&e&&(t.j41(0,"div",36)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Ft(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolLevel(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Tt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolLevel(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function St(e,s){if(1&e&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function kt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolSubject(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function At(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolSubject(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Ot(e,s){if(1&e&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Rt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeProvince(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Et(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeProvince(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function $t(e,s){if(1&e&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(t.bMT(2,2,o.name))}}function Mt(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",27)(4,"span",42),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",43),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",44)(10,"button",45),t.bIt("click",function(){const a=t.eBV(o).index,i=t.XpG();return t.Njj(i.removeFileForm(a))}),t.nrm(11,"lucide-icon",46),t.k0s()()(),t.j41(12,"div",47)(13,"div",9)(14,"div",48),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.nrm(17,"input",49),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"div",12)(20,"label",50),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",9),t.nrm(24,"textarea",51),t.nI1(25,"mytranslate"),t.k0s()()()()()}if(2&e){const o=s.$implicit;t.R7$(),t.Y8G("formGroup",o),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,it,o.controls.displayName.errors&&o.controls.displayName.touched)),t.R7$(8),t.SpI(" ",t.bMT(16,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(18,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,it,o.controls.variableName.errors&&o.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(22,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(25,19,"lang_azt_field_description")+"...")}}let zt=(()=>{var e;class s extends st{saveAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();this.initStatusObj();const n=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryCreateCategoryPost(n).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.successStatusObj("lang_cms_add_success",!0),this.handleDestroy()}))}convertFormToParam(){const{attributesList:n,name:a,showForVip:i,adsPosition:m,adsDisplayType:d,desc:g,schoolLevels:b,schoolSubjects:h,provinceIds:x}=this.form.controls,P=n.controls.map(p=>({displayName:p.controls.displayName.value,variableName:p.controls.variableName.value.toUpperCase(),description:p.controls.description.value}));let Y=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(p=>b.value.includes(p?.key??"")).map(p=>p.id)),et=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(p=>h.value.includes(p?.key??"")).map(p=>p.id)),at=Y.map(p=>({filterType:"level",filterObjectId:p})),nt=et.map(p=>({filterType:"subject",filterObjectId:p})),ot=x.value.map(p=>({filterType:"province",filterObjectId:p})),F=at;return F=F.concat(nt),F=F.concat(ot),{name:a.value,position:m.value,displayType:d.value,description:g.value,showForVip:i.value,attributes:P,filterOptions:F}}initData(){this.initStatusObj(),this.commonListService.apiCommonListProvincesGet().subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.allProvinceObjs=n.data?.objs??[],this.sAztCategoryAdsService.getSchoolLevelAndSubjects((a,i,m,d,g)=>{if(!g)return this.stopStatusObj();this.allSchoolLevelObjs=a,this.allSchoolSubjectObjs=i,this.allSchoolLevels=m,this.allSchoolSubjects=d,this.successStatusObj()})})}ngOnInit(){super.ngOnInit(),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/0",this.initData()}constructor(){super()}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["create-ads-category"]],features:[t.Vt3],decls:107,vars:86,consts:[["searchInListPosition","searchInList"],["searchInListDisplayType","searchInList"],[3,"headerBackToLink"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","showForVip","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","showForVip",1,"flex","items-center","mr-auto"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3",3,"innerHTML"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],["class","link-color clickable",3,"click",4,"ngIf"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","items-center"],["for","name",1,"font-medium","mr-2"],[1,"link-color","clickable","flex","items-center",3,"click"],["name","plus","size","18",3,"ngClass"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"link-color","clickable",3,"click"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(n,a){if(1&n){const i=t.RV6();t.j41(0,"teacher-layout",2)(1,"div",3)(2,"h3",4),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",5)(6,"form",6)(7,"div",7)(8,"label",8),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"div",9),t.nrm(12,"input",10),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,yt,4,3,"div",11),t.k0s(),t.j41(15,"div",12)(16,"div",13),t.nrm(17,"input",14),t.j41(18,"label",15),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()()(),t.j41(21,"div",12)(22,"label",8),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"mat-form-field",16)(26,"mat-select",17,0)(28,"mat-option"),t.nrm(29,"ngx-mat-select-search",18),t.nI1(30,"mytranslate"),t.nI1(31,"mytranslate"),t.k0s(),t.DNE(32,Ct,3,4,"mat-option",19),t.k0s(),t.nrm(33,"div",20),t.nI1(34,"mytranslate"),t.k0s()(),t.j41(35,"div",12)(36,"label",8),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s(),t.j41(39,"mat-form-field",16)(40,"mat-select",17,1)(42,"mat-option"),t.nrm(43,"ngx-mat-select-search",18),t.nI1(44,"mytranslate"),t.nI1(45,"mytranslate"),t.k0s(),t.DNE(46,jt,2,2,"mat-option",19),t.k0s()()(),t.j41(47,"div",12)(48,"label",21),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s(),t.j41(51,"div",9),t.nrm(52,"textarea",22),t.nI1(53,"mytranslate"),t.k0s(),t.DNE(54,It,4,3,"div",11),t.k0s(),t.j41(55,"div",12)(56,"label",23),t.EFF(57),t.nI1(58,"mytranslate"),t.k0s(),t.EFF(59," ( "),t.DNE(60,Ft,3,3,"span",24)(61,Tt,3,3,"span",24),t.EFF(62," ) "),t.j41(63,"mat-form-field",25)(64,"mat-select",26),t.DNE(65,St,3,4,"mat-option",19),t.k0s()()(),t.j41(66,"div",12)(67,"label",23),t.EFF(68),t.nI1(69,"mytranslate"),t.k0s(),t.EFF(70," ( "),t.DNE(71,kt,3,3,"span",24)(72,At,3,3,"span",24),t.EFF(73," ) "),t.j41(74,"mat-form-field",25)(75,"mat-select",26),t.DNE(76,Ot,3,4,"mat-option",19),t.k0s()()(),t.j41(77,"div",12)(78,"label",23),t.EFF(79),t.nI1(80,"mytranslate"),t.k0s(),t.EFF(81," ( "),t.DNE(82,Rt,3,3,"span",24)(83,Et,3,3,"span",24),t.EFF(84," ) "),t.j41(85,"mat-form-field",25)(86,"mat-select",26),t.DNE(87,$t,3,4,"mat-option",19),t.k0s()()(),t.j41(88,"div",12)(89,"div",27)(90,"label",28),t.EFF(91),t.nI1(92,"mytranslate"),t.k0s(),t.j41(93,"span",29),t.bIt("click",function(){return t.eBV(i),t.Njj(a.addNewFieldForm())}),t.nrm(94,"lucide-icon",30),t.EFF(95),t.nI1(96,"mytranslate"),t.k0s()(),t.j41(97,"div",31),t.DNE(98,Mt,26,25,"div",32),t.k0s()()()(),t.j41(99,"div",33)(100,"button",34),t.bIt("click",function(){return t.eBV(i),t.Njj(a.handleDestroy())}),t.EFF(101),t.nI1(102,"mytranslate"),t.k0s(),t.j41(103,"button",35),t.bIt("click",function(){return t.eBV(i),t.Njj(a.saveAdsCategory())}),t.j41(104,"span"),t.EFF(105),t.nI1(106,"mytranslate"),t.k0s()()()()()}if(2&n){const i=t.sdS(27),m=t.sdS(41);t.Y8G("headerBackToLink",a.backToLink),t.R7$(3),t.SpI(" ",t.bMT(4,45,"lang_azt_add_category")," "),t.R7$(3),t.Y8G("formGroup",a.form),t.R7$(3),t.JRh(t.bMT(10,47,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(13,49,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",a.form.controls.name.errors&&a.form.controls.name.touched),t.R7$(3),t.Y8G("formControl",a.form.controls.showForVip),t.R7$(2),t.JRh(t.bMT(20,51,"lang_cms_admin_show_for_vip")),t.R7$(4),t.JRh(t.bMT(24,53,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(30,55,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(31,57,"lang_search_not_found")),t.Y8G("formControl",i.searchControl),t.R7$(3),t.Y8G("ngForOf",i.filter(a.listPositions,void 0)),t.R7$(),t.Y8G("innerHTML",t.bMT(34,59,"lang_azota_ads_position_image_"+a.form.controls.adsPosition.value.toString().replace("_MOBILE","").replace("_DESKTOP","")),t.npT),t.R7$(4),t.JRh(t.bMT(38,61,"lang_azt_category_ads_display_type")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsDisplayType),t.R7$(3),t.FS9("placeholderLabel",t.bMT(44,63,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(45,65,"lang_search_not_found")),t.Y8G("formControl",m.searchControl),t.R7$(3),t.Y8G("ngForOf",m.filter(a.listDisplayTypes,void 0)),t.R7$(3),t.JRh(t.bMT(50,67,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(53,69,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",a.form.controls.desc.errors&&a.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(58,71,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolLevels.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolLevels.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",a.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(69,73,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolSubjects.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolSubjects.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",a.allSchoolSubjects),t.R7$(3),t.JRh(t.bMT(80,75,"lang_admin_ads_select_province")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.provinceIds.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.provinceIds.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.provinceIds),t.R7$(),t.Y8G("ngForOf",a.allProvinceObjs),t.R7$(4),t.JRh(t.bMT(92,77,"lang_azt_information_field")),t.R7$(3),t.Y8G("ngClass",t.lJ4(85,vt)),t.R7$(),t.SpI(" ",t.bMT(96,79,"lang_azt_add_information_field")," "),t.R7$(3),t.Y8G("ngForOf",a.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(102,81,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(106,83,"lang_button_save"))}},dependencies:[_.YU,_.Sq,_.bT,r.qT,r.me,r.Zm,r.BC,r.cb,B.wT,X.rl,W.VO,r.l_,r.j4,r.JD,rt.t,K.x,z.Q,f.WGl,C.U9,E.wp],encapsulation:2}),s})();var Q=c(82653),G=c(18718);const lt=e=>({"border-danger":e});function Gt(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",5),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Lt(e,s){1&e&&(t.j41(0,"div",38)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Nt(e,s){if(1&e&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_azota_ads_position_"+o)," ")}}function Dt(e,s){if(1&e&&(t.j41(0,"mat-option",39),t.EFF(1),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function xt(e,s){1&e&&(t.j41(0,"div",38)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Pt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolLevel(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Yt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolLevel(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Vt(e,s){if(1&e&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function wt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolSubject(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Ut(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolSubject(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Jt(e,s){if(1&e&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Bt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeProvince(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Xt(e,s){if(1&e){const o=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeProvince(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Wt(e,s){if(1&e&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(t.bMT(2,2,o.name))}}function Kt(e,s){1&e&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_admin_ads_category_attributes_are_empty")))}function Qt(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"span",45),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",46),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",47)(10,"button",48),t.bIt("click",function(){const a=t.eBV(o).index,i=t.XpG(2);return t.Njj(i.removeFileForm(a))}),t.j41(11,"span",49),t.nrm(12,"lucide-icon",50),t.k0s()()()(),t.j41(13,"div",51)(14,"div",12)(15,"div",52),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.nrm(18,"input",53),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"div",15)(21,"label",54),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"div",12),t.nrm(25,"textarea",55),t.nI1(26,"mytranslate"),t.k0s()()()()()}if(2&e){const o=s.$implicit;t.R7$(),t.Y8G("formGroup",o),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,lt,o.controls.displayName.errors&&o.controls.displayName.touched)),t.R7$(9),t.SpI(" ",t.bMT(17,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(19,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,lt,o.controls.variableName.errors&&o.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(23,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(26,19,"lang_azt_field_description")+"...")}}function Ht(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",6)(1,"h3",7),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",8)(5,"form",9)(6,"div",10)(7,"label",11),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",12),t.nrm(11,"input",13),t.nI1(12,"mytranslate"),t.k0s(),t.DNE(13,Lt,4,3,"div",14),t.k0s(),t.j41(14,"div",15)(15,"div",16),t.nrm(16,"input",17),t.j41(17,"label",18),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()()(),t.j41(20,"div",15)(21,"label",11),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"mat-form-field",19)(25,"mat-select",20,1)(27,"mat-option"),t.nrm(28,"ngx-mat-select-search",21),t.nI1(29,"mytranslate"),t.nI1(30,"mytranslate"),t.k0s(),t.DNE(31,Nt,3,4,"mat-option",22),t.k0s()(),t.nrm(32,"div",23),t.nI1(33,"mytranslate"),t.k0s(),t.j41(34,"div",15)(35,"label",11),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s(),t.j41(38,"mat-form-field",19)(39,"mat-select",20,2)(41,"mat-option"),t.nrm(42,"ngx-mat-select-search",21),t.nI1(43,"mytranslate"),t.nI1(44,"mytranslate"),t.k0s(),t.DNE(45,Dt,2,2,"mat-option",22),t.k0s()()(),t.j41(46,"div",15)(47,"label",24),t.EFF(48),t.nI1(49,"mytranslate"),t.k0s(),t.j41(50,"div",12),t.nrm(51,"textarea",25),t.nI1(52,"mytranslate"),t.k0s(),t.DNE(53,xt,4,3,"div",14),t.k0s(),t.j41(54,"div",15)(55,"label",26),t.EFF(56),t.nI1(57,"mytranslate"),t.k0s(),t.EFF(58," ( "),t.DNE(59,Pt,3,3,"span",27)(60,Yt,3,3,"span",27),t.EFF(61," ) "),t.j41(62,"mat-form-field",28)(63,"mat-select",29),t.DNE(64,Vt,3,4,"mat-option",22),t.k0s()()(),t.j41(65,"div",15)(66,"label",26),t.EFF(67),t.nI1(68,"mytranslate"),t.k0s(),t.EFF(69," ( "),t.DNE(70,wt,3,3,"span",27)(71,Ut,3,3,"span",27),t.EFF(72," ) "),t.j41(73,"mat-form-field",28)(74,"mat-select",29),t.DNE(75,Jt,3,4,"mat-option",22),t.k0s()()(),t.j41(76,"div",15)(77,"label",26),t.EFF(78),t.nI1(79,"mytranslate"),t.k0s(),t.EFF(80," ( "),t.DNE(81,Bt,3,3,"span",27)(82,Xt,3,3,"span",27),t.EFF(83," ) "),t.j41(84,"mat-form-field",28)(85,"mat-select",29),t.DNE(86,Wt,3,4,"mat-option",22),t.k0s()()(),t.j41(87,"div",15)(88,"div",30)(89,"label",31),t.EFF(90),t.nI1(91,"mytranslate"),t.k0s()(),t.DNE(92,Kt,3,3,"div",32),t.j41(93,"div",33),t.DNE(94,Qt,27,25,"div",34),t.k0s()()()(),t.j41(95,"div",35)(96,"button",36),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.handleDestroy())}),t.EFF(97),t.nI1(98,"mytranslate"),t.k0s(),t.j41(99,"button",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.updateAdsCategory())}),t.j41(100,"span"),t.EFF(101),t.nI1(102,"mytranslate"),t.k0s()()()()}if(2&e){const o=t.sdS(26),n=t.sdS(40),a=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,43,"lang_azt_update_category")," "),t.R7$(3),t.Y8G("formGroup",a.form),t.R7$(3),t.JRh(t.bMT(9,45,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(12,47,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",a.form.controls.name.errors&&a.form.controls.name.touched),t.R7$(3),t.Y8G("formControl",a.form.controls.showForVip),t.R7$(2),t.JRh(t.bMT(19,49,"lang_cms_admin_show_for_vip")),t.R7$(4),t.JRh(t.bMT(23,51,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(29,53,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(30,55,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(a.listPositions,void 0)),t.R7$(),t.Y8G("innerHTML",t.bMT(33,57,"lang_azota_ads_position_image_"+a.form.controls.adsPosition.value.toString().replace("_MOBILE","").replace("_DESKTOP","")),t.npT),t.R7$(4),t.JRh(t.bMT(37,59,"lang_azt_category_ads_display_type")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsDisplayType),t.R7$(3),t.FS9("placeholderLabel",t.bMT(43,61,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(44,63,"lang_search_not_found")),t.Y8G("formControl",n.searchControl),t.R7$(3),t.Y8G("ngForOf",n.filter(a.listDisplayTypes,void 0)),t.R7$(3),t.JRh(t.bMT(49,65,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(52,67,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",a.form.controls.desc.errors&&a.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(57,69,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolLevels.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolLevels.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",a.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(68,71,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolSubjects.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolSubjects.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",a.allSchoolSubjects),t.R7$(3),t.JRh(t.bMT(79,73,"lang_admin_ads_select_province")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.provinceIds.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.provinceIds.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.provinceIds),t.R7$(),t.Y8G("ngForOf",a.allProvinceObjs),t.R7$(4),t.JRh(t.bMT(91,75,"lang_azt_information_field")),t.R7$(2),t.Y8G("ngIf",!a.form.controls.attributesList.controls.length),t.R7$(2),t.Y8G("ngForOf",a.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(98,77,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(102,79,"lang_button_update"))}}let Zt=(()=>{var e;class s extends st{updateAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();const n=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryUpdateCategoryPut(n,this.categoryId).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.handleDestroy()}))}getData(){this.initStatusObj(),this.waitDestroy((0,Q.p)([this.categoryService.apiCategoryGetCategoryGet(this.categoryId),this.commonListService.apiCommonListProvincesGet()]).subscribe(([n,a])=>{if(!n.success)return this.errorStatusObj(n.message,!0);if(!a.success)return this.errorStatusObj(a.message,!0);this.allProvinceObjs=a.data?.objs??[];const i=n.data;this.form.controls.name.setValue(i?.name??""),this.form.controls.adsPosition.setValue(this.commonService.getEnumTypeWithDefault(y.rA,i?.position??"",y.rA.ALLPOSITION)),this.form.controls.adsDisplayType.setValue(this.commonService.getEnumTypeWithDefault(J.u,i?.displayType??"",J.u.BANNER)),this.form.controls.desc.setValue(i?.description??""),this.form.controls.showForVip.setValue(!!i?.showForVip),i?.attributes?.forEach(d=>{this.form.controls.attributesList.push(this.createFieldForm(d.displayName,d.variableName,d.description??"",d.id))});let m=(i?.filters??[]).filter(d=>"province"==d.filterType).map(d=>d.filterObjectId).filter(this.commonService.notEmpty);this.form.controls.provinceIds.setValue(m),this.sAztCategoryAdsService.getSchoolLevelAndSubjects((d,g,b,h,x)=>{if(!x)return this.stopStatusObj();this.allSchoolLevelObjs=d,this.allSchoolSubjectObjs=g,this.allSchoolLevels=b,this.allSchoolSubjects=h;const{selectedSchoolLevels:P,selectedSchoolSubjects:Y}=this.sAztCategoryAdsService.getSelectedLevelAndSubjects(i?.filters??[],d,g);this.form.controls.schoolLevels.setValue(P),this.form.controls.schoolSubjects.setValue(Y),this.successStatusObj()})}))}convertFormToParam(){const{attributesList:n,name:a,showForVip:i,adsPosition:m,adsDisplayType:d,desc:g,schoolLevels:b,schoolSubjects:h,provinceIds:x}=this.form.controls,P=n.controls.map(p=>({id:p.controls.id?.value??0,displayName:p.controls.displayName.value,variableName:p.controls.variableName.value.toUpperCase(),description:p.controls.description.value}));let Y=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(p=>b.value.includes(p?.key??"")).map(p=>p.id)),et=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(p=>h.value.includes(p?.key??"")).map(p=>p.id)),at=Y.map(p=>({filterType:"level",filterObjectId:p})),nt=et.map(p=>({filterType:"subject",filterObjectId:p})),ot=x.value.map(p=>({filterType:"province",filterObjectId:p})),F=at;return F=F.concat(nt),F=F.concat(ot),{name:a.value,position:m.value,displayType:d.value,description:g.value,showForVip:i.value,attributes:P,filterOptions:F}}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/"+this.categoryId,this.getData()}constructor(){super()}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["update-ads-category"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPosition","searchInList"],["searchInListDisplayType","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","showForVip","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","showForVip",1,"flex","items-center","mr-auto"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3",3,"innerHTML"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],["class","link-color clickable",3,"click",4,"ngIf"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"link-color","clickable",3,"click"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"w-4","h-4","inline-block"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",3),t.DNE(1,Gt,1,1,"azt-loading-effect",4)(2,Ht,103,81,"ng-template",null,0,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backToLink),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",i)}},dependencies:[_.YU,_.Sq,_.bT,r.qT,r.me,r.Zm,r.BC,r.cb,B.wT,X.rl,W.VO,r.l_,r.j4,r.JD,G.K,rt.t,K.x,z.Q,f.WGl,C.U9,E.wp],encapsulation:2}),s})();var ct=c(82040),Z=c(46899),mt=c(39712),dt=c(89163),qt=c(33887),pt=c(52811);const te=e=>({"error-border":e});function ee(e,s){1&e&&(t.j41(0,"span",12),t.nrm(1,"azt-loading-ui"),t.k0s())}let ae=(()=>{var e;class s extends qt._{closeDialog(){this.dialogRef.close(void 0)}saveObj(){this.initStatusObj(),this.waitDestroy(this.partnerService.apiPartnerCreatePartnerPost({name:this.nameFormControl.value}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.waitDestroy(this.partnerService.apiPartnerListPartnersGet().subscribe(i=>{if(!i.success)return this.closeDialog();this.stopStatusObj(),this.dialogRef.close(i.data?.objs??[])}))}))}ngOnInit(){super.ngOnInit()}constructor(n,a,i){super(i,a),this.partnerService=n,this.dialogRef=a,this.data=i,this.nameFormControl=new r.MJ("",{nonNullable:!0,validators:[M.M.noWhiteSpace]})}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(y.KM),t.rXU(dt.CP,8),t.rXU(dt.Vh))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-create-partner-dialog"]],features:[t.Vt3],decls:19,vars:15,consts:[[1,"box","p-2"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","mt-4","p-2"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"p-2","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",4)(9,"div",6),t.nrm(10,"input",7),t.k0s()()()(),t.j41(11,"div",8)(12,"button",9),t.bIt("click",function(){return a.closeDialog()}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"button",10),t.bIt("click",function(){return a.saveObj()}),t.DNE(16,ee,2,0,"span",11),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()()),2&n&&(t.R7$(6),t.SpI(" ",t.bMT(7,7,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("formControl",a.nameFormControl)("ngClass",t.eq3(13,te,a.nameFormControl.invalid)),t.R7$(3),t.SpI(" ",t.bMT(14,9,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",a.statusObj.loading||a.nameFormControl.invalid),t.R7$(),t.Y8G("ngIf",a.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(18,11,"lang_auto_luu")," "))},dependencies:[_.YU,_.bT,r.me,r.BC,r.l_,pt.R,E.wp],encapsulation:2}),s})(),ut=(()=>{var e;class s extends U.H{cancel(){this.commonService.myNavigation(this.backTo)}createPartner(){this.sAztDialogService.open(ae,{width:"500px",restoreFocus:!1,data:{}}).afterClosed().subscribe(n=>{null!=n&&(this.partnerObjs=n)})}constructor(){super(),this.sAztDialogService=(0,t.WQX)(Z.i),this.categoryService=(0,t.WQX)(y.M$),this.categoryId=0,this.templateObj=void 0,this.partnerObjs=[],this.attributeObjs=[],this.allUploadToCdnMenuTypes=mt.b8,this.allUploadFileTypes=mt.PO,this.backTo="",this.allAdsDisplayType=y.ud,this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[M.M.noWhiteSpace]}),partnerId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1)]}),description:new r.MJ("",{nonNullable:!0}),isActive:new r.MJ(!0,{nonNullable:!0}),displayPercent:new r.MJ(100,{nonNullable:!0}),attributeObjs:new r.Yp([])})}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-base-create-or-update-ads"]],features:[t.Vt3],decls:0,vars:0,template:function(n,a){},encapsulation:2}),s})();var ne=c(32862),oe=c(48567),_t=c(4744),gt=c(41750),q=c(95939);const L=e=>({"error-border":e});function se(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function re(e,s){if(1&e&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function ie(e,s){if(1&e&&(t.j41(0,"div",12)(1,"div",13)(2,"label",14),t.EFF(3),t.k0s()(),t.j41(4,"div",13)(5,"div",22),t.nrm(6,"input",23),t.k0s()()()),2&e){const o=s.$implicit;t.R7$(3),t.Lme("",o.controls.attributeDisplayName.value," - ",o.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",o.controls.attributeValue)("ngClass",t.eq3(4,L,o.controls.attributeValue.invalid))}}function le(e,s){if(1&e&&(t.j41(0,"div",36)(1,"div",13),t.nrm(2,"azt-frontend-ads-item",37),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(2),t.Y8G("adsDisplayType",o.allAdsDisplayType.BANNER)("obj",o.currentAdsObj)}}function ce(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10),t.EFF(8,'1. <azt-list-product azt-type="LIVE-CLASS" azt-num="100" ids=""></azt-list-product>'),t.k0s(),t.j41(9,"div",10),t.EFF(10,"2. <azt-shopie-ads></azt-shopie-ads>"),t.k0s(),t.j41(11,"div",10),t.EFF(12,' 3. Article: <ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5379822583140305" data-ad-slot="1586363387"></ins> '),t.k0s(),t.j41(13,"div"),t.EFF(14,' 4. Other: <ins class="adsbygoogle" style="display: block" data-ad-client="ca-pub-5379822583140305" data-ad-slot="2369932214" data-ad-format="auto" data-full-width-responsive="true"></ins> '),t.k0s()(),t.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"label",14),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div",15)(22,"div",16)(23,"mat-form-field",17)(24,"mat-select",18,1)(26,"mat-option"),t.nrm(27,"ngx-mat-select-search",19),t.nI1(28,"mytranslate"),t.nI1(29,"mytranslate"),t.k0s(),t.DNE(30,re,2,2,"mat-option",20),t.k0s()()(),t.j41(31,"div",21),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.createPartner())}),t.EFF(32),t.nI1(33,"mytranslate"),t.k0s()()(),t.j41(34,"div",12)(35,"div",13)(36,"label",14),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s()(),t.j41(39,"div",13)(40,"div",22),t.nrm(41,"input",23),t.k0s()()(),t.j41(42,"div",12)(43,"div",13)(44,"label",14),t.EFF(45),t.nI1(46,"mytranslate"),t.k0s()(),t.j41(47,"div",13)(48,"div",22),t.nrm(49,"textarea",23),t.k0s()()(),t.j41(50,"div",12)(51,"div",13)(52,"label",14),t.EFF(53),t.nI1(54,"mytranslate"),t.k0s()(),t.j41(55,"div",13)(56,"div",22),t.nrm(57,"input",24),t.k0s()()(),t.DNE(58,ie,7,6,"div",25),t.j41(59,"div",12)(60,"div",13)(61,"div",26),t.nrm(62,"input",27),t.j41(63,"label",28),t.EFF(64),t.nI1(65,"mytranslate"),t.k0s()()()(),t.nrm(66,"hr",29),t.DNE(67,le,3,2,"div",30),t.k0s(),t.j41(68,"div",31)(69,"button",32),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(70),t.nI1(71,"mytranslate"),t.k0s(),t.j41(72,"button",33),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!1))}),t.EFF(73),t.nI1(74,"mytranslate"),t.k0s(),t.j41(75,"button",34),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!0))}),t.EFF(76),t.nI1(77,"mytranslate"),t.k0s()()()()()}if(2&e){const o=t.sdS(25),n=t.XpG();t.R7$(),t.Y8G("formGroup",n.form),t.R7$(3),t.SpI(" ",t.bMT(5,28,n.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(15),t.SpI(" ",t.bMT(20,30,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(52,L,n.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",n.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(28,32,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(29,34,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(n.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(33,36,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(38,38,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.name)("ngClass",t.eq3(54,L,n.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(46,40,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.description)("ngClass",t.eq3(56,L,n.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(54,42,"lang_cms_admin_create_ads_display_percent")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.displayPercent)("ngClass",t.eq3(58,L,n.form.controls.displayPercent.invalid)),t.R7$(),t.Y8G("ngForOf",n.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",n.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(65,44,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",n.currentAdsObj),t.R7$(3),t.JRh(t.bMT(71,46,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(74,48,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(77,50,"lang_core_luu_va_dong"))}}let me=(()=>{var e;class s extends ut{initForm(){this.form.controls.partnerId.setValue(this.commonService.getFirstOfArray(this.partnerObjs)?.id??0),this.attributeObjs.forEach(n=>{this.form.controls.attributeObjs.push(new r.gE({attributeId:new r.MJ(n.id,{nonNullable:!0}),attributeDisplayName:new r.MJ(n.displayName,{nonNullable:!0}),attributeVariableName:new r.MJ(n.variableName,{nonNullable:!0}),attributeValue:new r.MJ("",{nonNullable:!0})}))})}initData(n){this.initStatusObj(),this.waitDestroy((0,Q.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.categoryService.apiCategoryGetCategoryGet(this.categoryId)]).pipe((0,ct.M)(([a,i,m,d])=>a.success?i.success?m.success?d.success?null==d.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.templateObj=a.data,this.attributeObjs=i.data?.objs??[],this.partnerObjs=m.data?.objs??[],this.categoryObj=d.data,this.initForm(),this.stopStatusObj(),void n()):this.errorStatusObj(d.message,!0):this.errorStatusObj(m.message,!0):this.errorStatusObj(i.message,!0):this.errorStatusObj(a.message,!0))).subscribe())}saveObj(n){this.initStatusObj();let a=this.form.getRawValue(),i={categoryId:this.categoryId,partnerId:a.partnerId,name:a.name,description:a.description,isActive:a.isActive?1:0,displayPercent:a.displayPercent,attributes:a.attributeObjs.map(m=>({attributeId:m.attributeId,value:m.attributeValue}))};this.waitDestroy(this.productService.apiProductCreateProductPost(i).subscribe(m=>{if(!m.success)return this.errorStatusObj(m.message,!0);this.successStatusObj("lang_cms_add_success",!0),n&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(()=>{this.form.valueChanges.subscribe(n=>{let a=this.form.controls.attributeObjs.getRawValue().map(i=>({id:0,productId:0,attributeId:i.attributeId,value:i.attributeValue,attribute:{id:i.attributeId,categoryId:this.categoryId,displayName:i.attributeDisplayName,variableName:i.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,displayPercent:this.form.controls.displayPercent.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:a}})})}constructor(n,a,i,m,d){super(),this.partnerService=n,this.productService=a,this.categoryAttributeService=i,this.categoryTemplateService=m,this.activeRoute=d,this.adsId=0}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(ne.K),t.rXU(oe.b),t.rXU(_t.C),t.rXU(gt.O),t.rXU(v.nX))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-create-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-3","mt-6"],[1,"mb-2"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],["type","number","min","1","max","100",1,"form-control",3,"formControl","ngClass"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"adsDisplayType","obj"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",2),t.DNE(1,se,1,1,"azt-loading-effect",3)(2,ce,78,60,"ng-template",null,0,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backTo),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",i)}},dependencies:[_.YU,_.Sq,_.bT,r.qT,r.me,r.Q0,r.Zm,r.BC,r.cb,r.VZ,r.zX,B.wT,X.rl,W.VO,r.l_,r.j4,G.K,q.f,K.x,z.Q,C.U9,E.wp],encapsulation:2}),s})();const N=e=>({"error-border":e});function de(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function pe(e,s){if(1&e&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&e){const o=s.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function ue(e,s){if(1&e&&(t.j41(0,"div",12)(1,"div",13)(2,"label",14),t.EFF(3),t.k0s()(),t.j41(4,"div",13)(5,"div",22),t.nrm(6,"input",23),t.k0s()()()),2&e){const o=s.$implicit;t.R7$(3),t.Lme("",o.controls.attributeDisplayName.value," - ",o.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",o.controls.attributeValue)("ngClass",t.eq3(4,N,o.controls.attributeValue.invalid))}}function _e(e,s){if(1&e&&(t.j41(0,"div",36)(1,"div",13),t.nrm(2,"azt-frontend-ads-item",37),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(2),t.Y8G("adsDisplayType",o.allAdsDisplayType.BANNER)("obj",o.currentAdsObj)}}function ge(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10),t.EFF(8,'1. <azt-list-product azt-type="LIVE-CLASS" azt-num="100" ids=""></azt-list-product>'),t.k0s(),t.j41(9,"div",10),t.EFF(10,"2. <azt-shopie-ads></azt-shopie-ads>"),t.k0s(),t.j41(11,"div",10),t.EFF(12,' 3. Article: <ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5379822583140305" data-ad-slot="1586363387"></ins> '),t.k0s(),t.j41(13,"div"),t.EFF(14,' 4. Other: <ins class="adsbygoogle" style="display: block" data-ad-client="ca-pub-5379822583140305" data-ad-slot="2369932214" data-ad-format="auto" data-full-width-responsive="true"></ins> '),t.k0s()(),t.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"label",14),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div",15)(22,"div",16)(23,"mat-form-field",17)(24,"mat-select",18,1)(26,"mat-option"),t.nrm(27,"ngx-mat-select-search",19),t.nI1(28,"mytranslate"),t.nI1(29,"mytranslate"),t.k0s(),t.DNE(30,pe,2,2,"mat-option",20),t.k0s()()(),t.j41(31,"div",21),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.createPartner())}),t.EFF(32),t.nI1(33,"mytranslate"),t.k0s()()(),t.j41(34,"div",12)(35,"div",13)(36,"label",14),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s()(),t.j41(39,"div",13)(40,"div",22),t.nrm(41,"input",23),t.k0s()()(),t.j41(42,"div",12)(43,"div",13)(44,"label",14),t.EFF(45),t.nI1(46,"mytranslate"),t.k0s()(),t.j41(47,"div",13)(48,"div",22),t.nrm(49,"textarea",23),t.k0s()()(),t.j41(50,"div",12)(51,"div",13)(52,"label",14),t.EFF(53),t.nI1(54,"mytranslate"),t.k0s()(),t.j41(55,"div",13)(56,"div",22),t.nrm(57,"input",24),t.k0s()()(),t.DNE(58,ue,7,6,"div",25),t.j41(59,"div",12)(60,"div",13)(61,"div",26),t.nrm(62,"input",27),t.j41(63,"label",28),t.EFF(64),t.nI1(65,"mytranslate"),t.k0s()()()(),t.nrm(66,"hr",29),t.DNE(67,_e,3,2,"div",30),t.k0s(),t.j41(68,"div",31)(69,"button",32),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(70),t.nI1(71,"mytranslate"),t.k0s(),t.j41(72,"button",33),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!1))}),t.EFF(73),t.nI1(74,"mytranslate"),t.k0s(),t.j41(75,"button",34),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!0))}),t.EFF(76),t.nI1(77,"mytranslate"),t.k0s()()()()()}if(2&e){const o=t.sdS(25),n=t.XpG();t.R7$(),t.Y8G("formGroup",n.form),t.R7$(3),t.SpI(" ",t.bMT(5,28,n.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(15),t.SpI(" ",t.bMT(20,30,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(52,N,n.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",n.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(28,32,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(29,34,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(n.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(33,36,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(38,38,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.name)("ngClass",t.eq3(54,N,n.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(46,40,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.description)("ngClass",t.eq3(56,N,n.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(54,42,"lang_cms_admin_create_ads_display_percent")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.displayPercent)("ngClass",t.eq3(58,N,n.form.controls.displayPercent.invalid)),t.R7$(),t.Y8G("ngForOf",n.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",n.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(65,44,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",n.currentAdsObj),t.R7$(3),t.JRh(t.bMT(71,46,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(74,48,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(77,50,"lang_core_luu_va_dong"))}}let be=(()=>{var e;class s extends ut{initForm(){this.form.controls.partnerId.setValue(this.updateAdsObj?.partnerId??0),this.form.controls.name.setValue(this.updateAdsObj?.name??""),this.form.controls.description.setValue(this.updateAdsObj?.description??""),this.form.controls.isActive.setValue(!!this.updateAdsObj?.isActive),this.form.controls.displayPercent.setValue(this.updateAdsObj?.displayPercent??100),this.attributeObjs.forEach(n=>{let a=this.updateAdsObj?.productAttributes?.find(i=>i.attributeId==n.id);this.form.controls.attributeObjs.push(new r.gE({attributeId:new r.MJ(n.id,{nonNullable:!0}),attributeDisplayName:new r.MJ(n.displayName,{nonNullable:!0}),attributeVariableName:new r.MJ(n.variableName,{nonNullable:!0}),attributeValue:new r.MJ(a?.value??"",{nonNullable:!0})}))})}initData(n){this.initStatusObj(),this.waitDestroy((0,Q.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.productService.apiProductGetProductGet(this.adsId),this.categoryService.apiCategoryGetCategoryGet(this.categoryId)]).pipe((0,ct.M)(([a,i,m,d,g])=>a.success?i.success?m.success?g.success?null==g.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.templateObj=a.data,this.attributeObjs=i.data?.objs??[],this.partnerObjs=m.data?.objs??[],this.updateAdsObj=d.data,this.categoryObj=g.data,this.initForm(),this.stopStatusObj(),void n()):this.errorStatusObj(g.message,!0):this.errorStatusObj(m.message,!0):this.errorStatusObj(i.message,!0):this.errorStatusObj(a.message,!0))).subscribe())}saveObj(n){this.initStatusObj();let a=this.form.getRawValue(),i={categoryId:this.categoryId,partnerId:a.partnerId,name:a.name,description:a.description,isActive:a.isActive?1:0,displayPercent:a.displayPercent,attributes:a.attributeObjs.map(m=>({attributeId:m.attributeId,value:m.attributeValue}))};this.waitDestroy(this.productService.apiProductUpdateProductPut(i,this.adsId).subscribe(m=>{if(!m.success)return this.errorStatusObj(m.message,!0);this.successStatusObj("lang_cms_update_success",!0),n&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.adsId=Number(this.commonService.getMyParam(this.activeRoute,"adsId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(()=>{this.form.valueChanges.subscribe(n=>{let a=this.form.controls.attributeObjs.getRawValue().map(i=>({id:0,productId:0,attributeId:i.attributeId,value:i.attributeValue,attribute:{id:i.attributeId,categoryId:this.categoryId,displayName:i.attributeDisplayName,variableName:i.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,isActive:this.form.controls.isActive.value?1:0,displayPercent:this.form.controls.displayPercent.value,template:this.templateObj?.data,productAttributes:a}})})}constructor(n,a,i,m,d){super(),this.partnerService=n,this.productService=a,this.categoryAttributeService=i,this.categoryTemplateService=m,this.activeRoute=d,this.adsId=0,this.updateAdsObj=void 0,this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[M.M.noWhiteSpace]}),partnerId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1)]}),description:new r.MJ("",{nonNullable:!0}),isActive:new r.MJ(!0,{nonNullable:!0}),displayPercent:new r.MJ(100,{nonNullable:!0}),attributeObjs:new r.Yp([])})}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(y.KM),t.rXU(y.bk),t.rXU(y.CT),t.rXU(y.Or),t.rXU(v.nX))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-update-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-3","mt-6"],[1,"mb-2"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],["type","number","min","1","max","100",1,"form-control",3,"formControl","ngClass"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"adsDisplayType","obj"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",2),t.DNE(1,de,1,1,"azt-loading-effect",3)(2,ge,78,60,"ng-template",null,0,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backTo),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",i)}},dependencies:[_.YU,_.Sq,_.bT,r.qT,r.me,r.Q0,r.Zm,r.BC,r.cb,r.VZ,r.zX,B.wT,X.rl,W.VO,r.l_,r.j4,G.K,q.f,K.x,z.Q,C.U9,E.wp],encapsulation:2}),s})();var fe=c(76627),bt=c(75421),he=c(92040);const D=e=>({backTo:e}),tt=()=>({"mr-1":!0}),ve=(e,s)=>({"btn-success-soft":e,"btn-pending-soft":s});function ye(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Ce(e,s){1&e&&(t.j41(0,"span",22),t.nrm(1,"azt-loading-ui"),t.k0s())}function je(e,s){1&e&&(t.j41(0,"span",22),t.nrm(1,"azt-loading-ui"),t.k0s())}function Ie(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",8)(1,"div",11)(2,"div",12)(3,"b"),t.EFF(4),t.k0s(),t.EFF(5),t.nrm(6,"br"),t.EFF(7),t.nI1(8,"mytranslate"),t.nrm(9,"br"),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"div",13)(13,"a",14),t.nI1(14,"navigationLocalize"),t.nrm(15,"lucide-icon",15),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"button",16),t.bIt("click",function(){const a=t.eBV(o).$implicit,i=t.XpG(3);return t.Njj(i.changeStatus(a))}),t.DNE(19,Ce,2,0,"span",17),t.nrm(20,"lucide-icon",18),t.j41(21,"span",19),t.EFF(22),t.nI1(23,"mytranslate"),t.nI1(24,"mytranslate"),t.k0s()(),t.j41(25,"button",20),t.bIt("click",function(){const a=t.eBV(o).$implicit,i=t.XpG(3);return t.Njj(i.deleteObj(a))}),t.DNE(26,je,2,0,"span",17),t.nrm(27,"lucide-icon",21),t.j41(28,"span",19),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s()()()()()}if(2&e){const o=s.$implicit,n=s.index,a=t.XpG(3);t.R7$(4),t.SpI("",n+1,"."),t.R7$(),t.SpI(" ",o.name," "),t.R7$(2),t.Lme(" ",t.bMT(8,17,"lang_cms_admin_create_ads_display_percent"),": ",o.displayPercent," % "),t.R7$(3),t.Lme(" ",t.bMT(11,19,"lang_cms_admin_create_ads_partner"),": ",null==o.adsPartnerObj?null:o.adsPartnerObj.name," "),t.R7$(3),t.Y8G("routerLink",t.bMT(14,21,"/azota-ads/edit-ads/"+o.categoryId+"/"+o.id))("queryParams",t.eq3(31,D,a.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(33,tt)),t.R7$(),t.SpI(" ",t.bMT(17,23,"lang_auto_sua")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(34,ve,o.isActive,!o.isActive)),t.R7$(),t.Y8G("ngIf",a.changeStatusId==o.id),t.R7$(),t.Y8G("ngClass",t.lJ4(37,tt)),t.R7$(2),t.JRh(o.isActive?t.bMT(23,25,"lang_cms_admin_ads_is_active"):t.bMT(24,27,"lang_cms_admin_ads_is_inactive")),t.R7$(4),t.Y8G("ngIf",a.deletingId==o.id),t.R7$(),t.Y8G("ngClass",t.lJ4(38,tt)),t.R7$(2),t.JRh(t.bMT(30,29,"lang_auto_xoa"))}}function Fe(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",8)(1,"div")(2,"b"),t.EFF(3),t.nI1(4,"mytranslate"),t.nI1(5,"mytranslate"),t.k0s(),t.EFF(6," ( "),t.j41(7,"span",9),t.nI1(8,"navigationLocalize"),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.EFF(11," | "),t.j41(12,"span",9),t.nI1(13,"navigationLocalize"),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.EFF(16," | "),t.j41(17,"span",9),t.nI1(18,"navigationLocalize"),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.EFF(21," | "),t.j41(22,"span",10),t.bIt("click",function(){const a=t.eBV(o).$implicit,i=t.XpG(2);return t.Njj(i.handleRemoveAdsCategory(a.categoryObj))}),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.EFF(25," ) "),t.k0s(),t.DNE(26,Ie,31,39,"div",7),t.k0s()}if(2&e){const o=s.$implicit,n=t.XpG(2);t.R7$(3),t.SjE(" ",o.categoryObj.name," - Id: ",o.categoryObj.id," - ",t.bMT(4,16,"lang_azota_ads_position_"+o.categoryObj.position)," - ",o.categoryObj.displayType," ",o.categoryObj.showForVip?" - "+t.bMT(5,18,"lang_cms_admin_ads_show_for_vip"):""," "),t.R7$(4),t.Y8G("routerLink",t.bMT(8,20,"/azota-ads/update-ads-category/"+o.categoryObj.id))("queryParams",t.eq3(34,D,n.backTo)),t.R7$(2),t.SpI(" ",t.bMT(10,22,"lang_cms_admin_ads_edit_ads_cateogry")," "),t.R7$(3),t.Y8G("routerLink",t.bMT(13,24,"/azota-ads/create-ads-template/"+o.categoryObj.id))("queryParams",t.eq3(36,D,n.backTo)),t.R7$(2),t.SpI(" ",t.bMT(15,26,"lang_cms_admin_ads_edit_ads_template")," "),t.R7$(3),t.Y8G("routerLink",t.bMT(18,28,"/azota-ads/create-ads/"+o.categoryObj.id))("queryParams",t.eq3(38,D,n.backTo)),t.R7$(2),t.SpI(" ",t.bMT(20,30,"lang_cms_admin_ads_create_new_ads")," "),t.R7$(4),t.JRh(t.bMT(24,32,"lang_cms_admin_ads_delete_ads_cateogry")),t.R7$(3),t.Y8G("ngForOf",o.productObjs)}}function Te(e,s){if(1&e&&(t.j41(0,"div",5)(1,"span",6),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.DNE(5,Fe,27,40,"div",7)),2&e){const o=t.XpG();t.R7$(),t.Y8G("routerLink",t.bMT(2,4,"/azota-ads/create-ads-category"))("queryParams",t.eq3(8,D,o.backTo)),t.R7$(2),t.JRh(t.bMT(4,6,"lang_cms_admin_ads_create_new_category")),t.R7$(2),t.Y8G("ngForOf",o.objs)}}function ke(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",3),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Ae(e,s){if(1&e&&(t.j41(0,"div",11)(1,"span",12),t.EFF(2),t.k0s(),t.j41(3,"span",13),t.EFF(4),t.k0s()()),2&e){const o=s.$implicit;t.R7$(2),t.SpI(" ","${"+o.variableName+"}"," "),t.R7$(2),t.SpI(" ","- "+o.description," ")}}function Oe(e,s){if(1&e&&(t.j41(0,"div",24)(1,"div",16),t.nrm(2,"azt-frontend-ads-item",25),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(2),t.Y8G("adsDisplayType",o.allAdsDisplayType.BANNER)("obj",o.currentAdsObj)}}function Re(e,s){if(1&e){const o=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"h3",6),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"div",8)(7,"h3",9),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",10)(11,"div",11)(12,"span",12),t.EFF(13),t.k0s(),t.j41(14,"span",13),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",11)(18,"span",12),t.EFF(19),t.k0s(),t.j41(20,"span",13),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.DNE(23,Ae,5,2,"div",14),t.k0s()(),t.j41(24,"div",15)(25,"div",16)(26,"h3",9),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",17),t.nrm(30,"textarea",18),t.k0s()(),t.nrm(31,"hr",19),t.DNE(32,Oe,3,2,"div",20),t.k0s(),t.j41(33,"div",21)(34,"button",22),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.handleDestroy())}),t.EFF(35),t.nI1(36,"mytranslate"),t.k0s(),t.j41(37,"button",23),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveTemplate())}),t.EFF(38),t.nI1(39,"mytranslate"),t.k0s()()()()}if(2&e){const o=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,12,"lang_azt_create_ads_template")," "),t.R7$(5),t.SpI(" ",t.bMT(9,14,"lang_azt_information_field")," "),t.R7$(5),t.JRh("${NAME}"),t.R7$(2),t.SpI(" ","- "+t.bMT(16,16,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.JRh("${DESCRIPTION}"),t.R7$(2),t.SpI(" ","- "+t.bMT(22,18,"lang_cms_admin_create_ads_description")," "),t.R7$(2),t.Y8G("ngForOf",o.categoryAttributeList),t.R7$(4),t.SpI(" ",t.bMT(28,20,"lang_auto_noi_dung")," "),t.R7$(3),t.Y8G("formControl",o.template),t.R7$(2),t.Y8G("ngIf",o.currentAdsObj),t.R7$(3),t.JRh(t.bMT(36,22,"lang_auto_huy")),t.R7$(3),t.JRh(t.bMT(39,24,"lang_auto_luu"))}}const $e=[{path:"",component:O.z,children:[{path:"ads-list/:categoryId",component:(()=>{var e;class s extends U.H{handleRemoveAdsCategory(n){const a=`${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_category")} <b>${n.name}<b/>?`;this.dialogService.open(bt.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(i=>{i&&this.waitDestroy(this.categoryService.apiCategoryDeleteCategoryDelete(n.id).subscribe(m=>{if(!m.success)return this.errorStatusObj(m.message,!0);this.objs=this.objs.filter(d=>d.categoryObj.id!=n.id),this.successStatusObj("lang_admin_guide_delete_success",!0)}))})}changeStatus(n){this.changeStatusId=n.id;let a=n.isActive?this.productService.apiProductDeactivateProductPut(n.id):this.productService.apiProductActivateProductPut(n.id);this.waitDestroy(a.subscribe(i=>{if(this.changeStatusId=0,!i.success)return this.errorStatusObj(i.message,!0);this.objs.forEach(m=>{m.productObjs.forEach(d=>{d.id==n.id&&(d.isActive=n.isActive?0:1)})})}))}deleteObj(n){const a=this.commonService.myTranslateInstant("lang_cms_admin_ads_are_your_sure_to_delete_this_ads")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(bt.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(i=>{i&&(this.deletingId=n.id,this.waitDestroy(this.productService.apiProductDeleteProductsPost({productIds:[n.id]}).subscribe(m=>{if(this.deletingId=0,!m.success)return this.errorStatusObj(m.message,!0);this.objs.forEach(d=>d.productObjs=d.productObjs.filter(g=>g.id!=n.id))})))})}getData(){this.initStatusObj(),this.waitDestroy(this.productService.apiProductListCategoryWithProductsPost({page:-1,size:-1}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.objs=a.data?.objs??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,fe.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getData()})),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.headerBackTo=this.commonService.getMyQueryParam("backTo")??"/super-role/admin-tool",this.backTo=this.commonService.getMyQueryParam("backTo")??this.commonService.getCurrentUrlWithoutLocale()}constructor(n,a,i,m,d){super(),this.dialogService=n,this.categoryService=a,this.productService=i,this.activeRoute=m,this.sAztDialogService=d,this.currentCategoryFormControl=new r.MJ(0,{nonNullable:!0}),this.objs=[],this.deletingId=0,this.changeStatusId=0,this.backTo="",this.headerBackTo=""}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(Z.i),t.rXU(he.M),t.rXU(y.bk),t.rXU(v.nX),t.rXU(Z.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-common-guide"]],features:[t.Vt3],decls:5,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"text-right","mt-3"],[1,"clickable","btn","btn-primary",3,"routerLink","queryParams"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"clickable","flex-none","text-primary","ml-2","mr-2",3,"routerLink","queryParams"],[1,"clickable","flex-none","text-danger","ml-2","mr-2",3,"click"],[1,"flex","align-items-center","box","p-3"],[1,"w-full"],[1,"flex-none","items-center"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"routerLink","queryParams"],["name","square-pen","size","18",3,"ngClass"],[1,"btn","btn-sm","mr-2",3,"click","ngClass"],["class","w-4 h-4 flex mr-1",4,"ngIf"],["name","shield-check","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[1,"w-4","h-4","flex","mr-1"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",1)(1,"div",2),t.DNE(2,ye,1,1,"azt-loading-effect",3)(3,Te,6,10,"ng-template",null,0,t.C5r),t.k0s()()),2&n){const i=t.sdS(4);t.Y8G("headerBackToLink",a.headerBackTo),t.R7$(2),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[v.Wk,_.YU,_.Sq,_.bT,G.K,pt.R,z.Q,f.WGl,E.F2,E.wp],encapsulation:2}),s})()},{path:"create-ads/:categoryId",component:me},{path:"edit-ads/:categoryId/:adsId",component:be},{path:"create-ads-category",component:zt},{path:"update-ads-category/:categoryId",component:Zt},{path:"create-ads-template/:categoryId",component:(()=>{var e;class s extends U.H{saveTemplate(){this.waitDestroy(this.categoryTemplateService.apiCategoryTemplateUpsertCategoryTemplatePost({categoryId:this.categoryId,data:this.template.value}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.successStatusObj("T\u1ea1o template th\xe0nh c\xf4ng"),this.myNavigation(`/azota-ads/ads-list/${this.categoryId}`)}))}handleDestroy(){this.myNavigation(this.backToLink)}initAds(){this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:0,name:"NAME_SAMPLE",description:"DESCRIPTION_SAMPLE",template:this.template.value,isActive:1,displayPercent:100,productAttributes:this.categoryAttributeList.map(n=>({id:0,productId:0,attributeId:n.id,value:n.variableName,attribute:{id:n.id,categoryId:this.categoryId,displayName:n.displayName,variableName:n.variableName}}))}}getData(n){this.initStatusObj();const a=this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(n),i=this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(n),m=this.categoryService.apiCategoryGetCategoryGet(n);this.waitDestroy((0,Q.p)([a,i,m]).subscribe({next:([d,g,b])=>d.success?g.success?b.success?null==b.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.categoryObj=b.data,this.categoryAttributeList=d.data?.objs??[],this.template.setValue(g.data?.data??""),void this.successStatusObj()):this.errorStatusObj(b.message,!0):this.errorStatusObj(g.message,!0):this.errorStatusObj(d.message,!0),error:d=>this.errorStatusObj(d.message,!0)}))}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/"+this.categoryId,this.getData(this.categoryId),this.template.valueChanges.subscribe(n=>{this.initAds()})}constructor(n,a,i,m){super(),this.activeRoute=n,this.categoryService=a,this.categoryTemplateService=i,this.categoryAttributeService=m,this.backToLink="",this.categoryId=0,this.template=new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),this.categoryAttributeList=[],this.allAdsDisplayType=y.ud}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(v.nX),t.rXU(y.M$),t.rXU(gt.O),t.rXU(_t.C))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-create-ads-template"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-5","mt-3"],[1,"mt-0"],[1,"text-md","font-medium"],[1,"mt-2"],[1,"mt-3"],[1,"rounded-md","bg-slate-200","px-3","py-1","text-slate-600","text-xs","dark:bg-darkmode-300","dark:text-slate-400","inline-block"],[1,"mt-1","mr-1","text-xs","leading-relaxed","text-slate-500"],["class","mt-3",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-12"],[1,"col-span-12","lg:col-span-12","mt-3"],[3,"formControl"],[1,"mt-3","mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"grid","grid-cols-12mb-3"],[3,"adsDisplayType","obj"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",1),t.DNE(1,ke,1,1,"azt-loading-effect",2)(2,Re,40,26,"ng-template",null,0,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backToLink),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",i)}},dependencies:[_.Sq,_.bT,r.me,r.BC,r.l_,G.K,q.f,z.Q,E.wp],encapsulation:2}),s})()}]}];let Me=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[v.iI.forChild($e),v.iI,A.XE]}),s})(),ze=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({providers:[{provide:l.vn,useValue:$.c.azt_tiny_mce_script_src}],imports:[v.iI,_.MD,r.YN,l.sv,j.s,r.X1,Me,I.Q,k.L,u.Id,H.b,f.flO.pick(f.Ptg),S.AC,C.An]}),s})()},96270:(V,T,c)=>{c.d(T,{u:()=>_});const _={BANNER:"BANNER",DIALOG:"DIALOG"}}}]);