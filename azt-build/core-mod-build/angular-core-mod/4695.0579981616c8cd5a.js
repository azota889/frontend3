"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[4695],{57003:(J,w,n)=>{n.d(w,{Q:()=>M});var o=n(81519),e=n(54460),j=n(10936),F=n(34514),S=n(47426),I=n(89163),B=n(65162),c=n(15343),h=n(5502),_=n(21656),C=n(9842),t=n(99503),K=n(79347),g=n(33887),V=n(36894),a=n(38009),Q=n(47348),q=n(70050),et=n(9691),ot=n(80037),at=n(48485),nt=n(52811),b=n(27985),s=n(48891),D=n(76529),d=n(51913),m=n(3780),y=n(81587);function $(f,G){1&f&&(s.j41(0,"div",5),s.nrm(1,"azt-loading-ui"),s.k0s())}function R(f,G){if(1&f&&(s.j41(0,"div",27)(1,"div",28),s.nrm(2,"azt-list-classroom-checkbox",29),s.k0s()()),2&f){const A=s.XpG(2);s.R7$(2),s.Y8G("form",A.form)("classroomGroupData",A.classroomWithGroup)("examClassroomObjs",A.examClassroomObjs)("permissionName",A.permissionTypes.exam)}}function p(f,G){if(1&f&&(s.j41(0,"div",27)(1,"div",30)(2,"div",31)(3,"h3",32),s.EFF(4),s.nI1(5,"mytranslate"),s.k0s()(),s.nrm(6,"list-student-checkbox",33),s.k0s()()),2&f){const A=s.XpG(2);s.R7$(4),s.SpI(" ",s.bMT(5,5,"lang_test_config_student_list")," "),s.R7$(2),s.Y8G("form",A.form)("classroomGroupData",A.classroomWithGroup)("examStudentObjs",A.data.examStudents)("permissionName",A.permissionTypes.exam)}}function U(f,G){if(1&f){const A=s.RV6();s.j41(0,"div",6)(1,"form",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11),s.EFF(6),s.nI1(7,"mytranslate"),s.k0s()(),s.j41(8,"div",12)(9,"div",13)(10,"div",14)(11,"input",15),s.bIt("change",function(){s.eBV(A);const P=s.XpG();return s.Njj(P.clearAllCheckBox(0))}),s.k0s(),s.j41(12,"label",16),s.EFF(13),s.nI1(14,"mytranslate"),s.k0s()(),s.j41(15,"div",17)(16,"input",18),s.bIt("change",function(){s.eBV(A);const P=s.XpG();return s.Njj(P.clearAllCheckBox(2))}),s.k0s(),s.j41(17,"label",19),s.EFF(18),s.nI1(19,"mytranslate"),s.k0s()(),s.j41(20,"div",20)(21,"input",21),s.bIt("change",function(){s.eBV(A);const P=s.XpG();return s.Njj(P.clearAllCheckBox(3))}),s.k0s(),s.j41(22,"label",22),s.EFF(23),s.nI1(24,"mytranslate"),s.k0s()()()(),s.DNE(25,R,3,4,"div",23)(26,p,7,7,"div",23),s.k0s()()()(),s.j41(27,"div",24)(28,"button",25),s.bIt("click",function(){s.eBV(A);const P=s.XpG();return s.Njj(P.closeDialog())}),s.EFF(29),s.nI1(30,"mytranslate"),s.k0s(),s.j41(31,"button",26),s.bIt("click",function(){s.eBV(A);const P=s.XpG();return s.Njj(P.savePublishExam("save"))}),s.EFF(32),s.nI1(33,"mytranslate"),s.k0s()()}if(2&f){const A=s.XpG();s.R7$(),s.Y8G("formGroup",A.form),s.R7$(5),s.SpI(" ",s.bMT(7,13,"lang_testbank_test_config_who_tested")," "),s.R7$(5),s.Y8G("value",0),s.R7$(2),s.SpI(" ",s.bMT(14,15,"lang_testbank_test_config_all_people")," "),s.R7$(3),s.Y8G("value",2),s.R7$(2),s.SpI(" ",s.bMT(19,17,"lang_testbank_test_config_assigne_class")," "),s.R7$(3),s.Y8G("value",3),s.R7$(2),s.SpI(" ",s.bMT(24,19,"lang_testbank_test_config_assigne_student")," "),s.R7$(2),s.Y8G("ngIf",2===A.form.controls.whoAllow.value),s.R7$(),s.Y8G("ngIf",3===A.form.controls.whoAllow.value),s.R7$(3),s.SpI(" ",s.bMT(30,21,"lang_auto_huy")," "),s.R7$(2),s.Y8G("disabled",3===A.form.controls.whoAllow.value&&A.form.controls.studentIds.errors||2===A.form.controls.whoAllow.value&&A.form.controls.classroomFormArray.errors),s.R7$(),s.SpI(" ",s.bMT(33,23,"lang_auto_luu")," ")}}let M=(()=>{var f;class G extends g._{clearAllCheckBox(k){1==k?this.isSelectClassroom=!1:2==k&&(this.isSelectClassroom=!0)}closeDialog(k){this.dialogRef.close(k)}savePublishExam(k){this.initStatusObj();let P="publish"===k?1:void 0;var H=this.form.getRawValue();const tt=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);let st=[];if(3==H.whoAllow&&H.studentIds&&H.studentIds.length){let it=this.commonService.arrayToDictionary(H.studentIds,z=>z.classroomId.toString());Object.entries(it).forEach(([z,Z],O)=>{let x=this.commonService.getFirstOfArray(Z)?.classroomId;x&&st?.push({classroomId:x,assignStudentIds:Z.map(v=>v.studentId)})})}else st=void 0;let lt={whoAllow:H.whoAllow,isPublished:P??void 0,classroomIds:tt,assignStudents:st,isSaveConfig:0};var ct=this.permissionService.hasEditPermission("exam",this.obj)?this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,lt):this.documentConfigService.apiDocumentConfigSaveExamDataForConfigClassroomPost(this.hashId,lt);this.waitDestroy(ct.subscribe(it=>{1==it.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_luu_thanh_cong"),this.closeDialog(it.data?.obj)):this.errorStatusObj(it.message??"",!0)}))}getExamDataByHashId(k){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamDataForConfigClassroomV2Get(k).subscribe(P=>{if(1==P.success){if(null!=P.data){var tt,H=P.data?.examObj;if(!(tt=this.castObj(H)))return;tt.limitQuestionGroupsParse=this.commonService.myParseJson(H.limitQuestionGroups??""),this.obj=tt,this.hashId=this.obj.hashId??"",this.classroomWithGroup=P.data.classroomGroupObjs??new Array,this.classroomObjs=this.commonService.concatMultipleArray(P.data.classroomGroupObjs.map(st=>st.classroomObjs)),this.examClassroomObjs=P.data.examClassroomObjs??[],this.form.patchValue({whoAllow:this.obj.whoAllow}),this.isSelectClassroom=2==this.obj.whoAllow,this.successStatusObj()}}else this.errorStatusObj(P.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getExamDataByHashId(this.hashId)}constructor(k,P,H,tt,st){super(tt,H),this.documentConfigService=k,this.permissionService=P,this.dialogRef=H,this.data=tt,this.sAztClassroomCheckboxService=st,this.permissionTypes=a.t,this.checkDialogFastContent=[],this.classroomObjs=[],this.examClassroomObjs=[],this.isSelectClassroom=!1,this.hashId="",this.classroomWithGroup=[],this.hashId=tt.hashId,this.form=new j.gE({whoAllow:new j.MJ(0,{nonNullable:!0}),classroomFormArray:new j.Yp([]),studentIds:new j.Yp([])},{validators:[ot.j.classroomInGroupCheckBoxValidator,at.H.studentCheckBoxValidator]})}}return(f=G).\u0275fac=function(k){return new(k||f)(s.rXU(D.x),s.rXU(d.p),s.rXU(I.CP,8),s.rXU(I.Vh,8),s.rXU(m.Q))},f.\u0275cmp=s.VBU({type:f,selectors:[["config-online-exam-dialog"]],standalone:!0,features:[s.Jv_([{provide:o.$O,useClass:t.fb,deps:[S.Ju,F.ij]},{provide:o.vq,useFactory:K.Yw,deps:[et.F]}]),s.Vt3,s.aNF],decls:6,vars:2,consts:[["doneLoading",""],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],["class","loading flex items-center justify-center",4,"ngIf","ngIfElse"],[1,"loading","flex","items-center","justify-center"],[1,"col-md-12","setting"],[3,"formGroup"],[1,"setting-base"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-3","pr-2"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-9"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-5"],["id","config-who-all","formControlName","whoAllow","type","radio",1,"form-check-input",3,"change","value"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0","mr-5"],["id","config-who-class","formControlName","whoAllow","type","radio",1,"form-check-input",3,"change","value"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio",1,"form-check-input",3,"change","value"],["for","config-who-student",1,"form-check-label"],["class","col-span-12 mt-4",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","config-exam-classroom-6-a-m4KztM",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","config-exam-classroom-brv1ZZTsfLY",1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[3,"form","classroomGroupData","examStudentObjs","permissionName"]],template:function(k,P){if(1&k&&(s.j41(0,"div",1)(1,"div",2)(2,"div",3),s.DNE(3,$,2,0,"div",4)(4,U,34,25,"ng-template",null,0,s.C5r),s.k0s()()()),2&k){const H=s.sdS(5);s.R7$(3),s.Y8G("ngIf",P.statusObj.loading)("ngIfElse",H)}},dependencies:[nt.R,b.D,C.M,e.MD,e.bT,j.X1,j.qT,j.me,j.Fm,j.BC,j.cb,j.j4,j.JD,B.iI,j.YN,Q.wp,_.s,c.flO,q.L,h.Id,V.k,y.t],encapsulation:2}),G})()},9842:(J,w,n)=>{n.d(w,{M:()=>_t});var o=n(54460),e=n(10936),j=n(65162),F=n(15343),S=n(5502),I=n(21656),B=n(36894),c=n(38009),h=n(47348),_=n(70050),C=n(59640),t=n(48891),K=n(91032),g=n(74151),V=n(95825),a=n(32099),Q=n(27208),q=n(89163),et=n(33887),ot=n(35048);let at=(()=>{var r;class T extends et._{btnCloseDialog(l){if(!l)return this.dialogRef.close();this.dialogRef.close(l)}ngOnInit(){}constructor(l,i){super(i,l),this.dialogRef=l,this.data=i,this.selectAllFormControl=new e.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new e.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new Q.Z}}return(r=T).\u0275fac=function(l){return new(l||r)(t.rXU(q.CP,8),t.rXU(q.Vh,8))},r.\u0275cmp=t.VBU({type:r,selectors:[["azt-assign-student-dialog"]],standalone:!0,features:[t.Vt3,t.aNF],decls:1,vars:1,consts:[[3,"closeBox","data"]],template:function(l,i){1&l&&(t.j41(0,"azt-select-student",0),t.bIt("closeBox",function(W){return i.btnCloseDialog(W)}),t.k0s()),2&l&&t.Y8G("data",i.data)},dependencies:[ot.w,o.MD,e.X1,j.iI,e.YN,I.s,F.flO,_.L,S.Id,B.k],encapsulation:2}),T})();var nt=n(51913),b=n(3780),s=n(46899),D=n(17818),d=n(45785),m=n(47712),y=n(56551);const $=(r,T)=>({"classroom-box-in-full-screen-in-mobile":r,"classroom-box-in-full-screen-in-desktop":T}),R=(r,T)=>({"w-85":r,"w-56":T}),p=r=>({"ml-3":r}),U=(r,T)=>({"bg-primary text-white font-medium":r,"hover:bg-slate-100 dark:hover:bg-darkmode-400":T}),M=(r,T)=>({"bg-primary text-white font-medium":r," hover:bg-slate-100 dark:hover:bg-darkmode-400":T}),f=r=>({"grid-column":r}),G=r=>({"text-success font-medium":r});function A(r,T){if(1&r){const u=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(u);const i=t.XpG();return t.Njj(i.selectByGroupId(void 0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&r){const u=t.XpG();t.Y8G("ngClass",t.l_i(5,U,0===u.mapClassroomGroupDataToForm.groupIdSelected,0!==u.mapClassroomGroupDataToForm.groupIdSelected)),t.R7$(),t.Lme(" ",t.bMT(2,3,"lang_auto_tat_ca")," (",u.mapClassroomGroupDataToForm.totalAllClassrooms,") ")}}function k(r,T){if(1&r){const u=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){t.eBV(u);const i=t.XpG().$implicit,E=t.XpG(2);return t.Njj(E.selectByGroupId(i.groupObj))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&r){const u=t.XpG().$implicit,l=t.XpG(2);t.Y8G("ngClass",t.l_i(4,M,l.mapClassroomGroupDataToForm.groupIdSelected===u.groupObj.id,l.mapClassroomGroupDataToForm.groupIdSelected!==u.groupObj.id)),t.R7$(),t.SpI(" ",t.bMT(2,2,u.groupObj.name)+" ("+u.groupObj.totalAllClassrooms+")"," ")}}function P(r,T){if(1&r&&(t.qex(0),t.DNE(1,k,3,7,"button",47),t.bVm()),2&r){const u=T.$implicit;t.R7$(),t.Y8G("ngIf",u.groupObj.isShowGroup)}}function H(r,T){if(1&r&&(t.qex(0),t.DNE(1,P,2,1,"ng-container",46),t.bVm()),2&r){const u=t.XpG();t.R7$(),t.Y8G("ngForOf",u.mapClassroomGroupDataToForm.groupObjs)}}function tt(r,T){if(1&r){const u=t.RV6();t.j41(0,"button",49),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(u);const i=t.XpG();return t.Njj(i.sAztMatDrawerService.openDrawer())}),t.nrm(2,"lucide-icon",50),t.k0s()}2&r&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_mo_menu"))}function st(r,T){if(1&r){const u=t.RV6();t.j41(0,"button",51),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(u);const i=t.XpG();return t.Njj(i.sAztMatDrawerService.closeDrawer())}),t.nrm(2,"lucide-icon",52),t.k0s()}2&r&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_dong_menu"))}function lt(r,T){if(1&r&&(t.j41(0,"span",53),t.EFF(1),t.k0s()),2&r){const u=t.XpG();t.R7$(),t.SpI(" ",(u.filterObj.isShowChecked?1:0)+(u.filterObj.isShowNotChecked?1:0)," ")}}function ct(r,T){if(1&r&&(t.qex(0),t.j41(1,"span",59),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.EFF(4),t.nI1(5,"mytranslate"),t.bVm()),2&r){const u=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,2,u.groupObj.name)),t.R7$(2),t.SpI(" ","("+u.groupObj.totalAllClassrooms+" "+t.bMT(5,4,"lang_testbank_test_list_classes")+")"," ")}}function it(r,T){if(1&r&&(t.j41(0,"span",64),t.EFF(1),t.nI1(2,"slice"),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&r){const u=t.XpG(2).$implicit;t.FS9("matTooltip",u.classroomObj.name),t.R7$(),t.SpI(" ",t.brH(2,4,u.classroomObj.name,0,25)+"..."," "),t.R7$(3),t.Lme("(",u.classroomObj.studentIdsSelected.length,"/",u.classroomObj.countStudents,")")}}function z(r,T){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&r){const u=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",u.classroomObj.name," "),t.R7$(2),t.Lme("(",u.classroomObj.studentIdsSelected.length,"/",u.classroomObj.countStudents,")")}}function Z(r,T){1&r&&(t.j41(0,"span",65),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_test_config_share")," "))}function O(r,T){if(1&r){const u=t.RV6();t.qex(0),t.j41(1,"div",60),t.bIt("click",function(){t.eBV(u);const i=t.XpG().$implicit,E=t.XpG(2);return t.Njj(E.selectClassroomEvent(i.groupObj,i.classroomObj))}),t.j41(2,"span",22),t.nrm(3,"lucide-icon",61),t.k0s(),t.DNE(4,it,5,8,"span",62)(5,z,4,3,"span",15)(6,Z,3,3,"span",63),t.nI1(7,"fullPermission"),t.k0s(),t.bVm()}if(2&r){let u,l;const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngClass",t.eq3(7,G,i.classroomObj.studentIdsSelected.length>0)),t.R7$(3),t.Y8G("ngIf",(null!==(u=null==i.classroomObj.name?null:i.classroomObj.name.length)&&void 0!==u?u:0)>25),t.R7$(),t.Y8G("ngIf",(null!==(l=null==i.classroomObj.name?null:i.classroomObj.name.length)&&void 0!==l?l:0)<=25),t.R7$(),t.Y8G("ngIf",!t.i5U(7,4,i.classroomObj,"classroom"))}}function x(r,T){if(1&r&&(t.j41(0,"div",58),t.DNE(1,ct,6,6,"ng-container",15)(2,O,8,9,"ng-container",15),t.k0s()),2&r){const u=T.$implicit;t.Y8G("ngStyle",t.eq3(3,f,"group"==u.type?"span 12 / span 12":"")),t.R7$(),t.Y8G("ngIf","group"==u.type),t.R7$(),t.Y8G("ngIf","classroom"==u.type&&u.classroomObj)}}function v(r,T){if(1&r&&(t.qex(0),t.j41(1,"ng-scrollbar",54)(2,"cdk-virtual-scroll-viewport",55)(3,"div",56),t.DNE(4,x,3,5,"div",57),t.k0s()()(),t.bVm()),2&r){const u=t.XpG();t.R7$(),t.Y8G("visibility","hover"),t.R7$(3),t.Y8G("cdkVirtualForOf",u.mapClassroomGroupDataToVirtualScroll)}}function L(r,T){1&r&&(t.j41(0,"div",66),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_class_null")," "))}let N=(()=>{var r;class T extends C.H{searchByClassroomName(l){this.searchByClassroomContentObj=l,this.checkIsFilter(),this.calculateClassroomInfo()}searchByGroupName(l){this.searchByGroupContentObj=l,this.checkIsFilter(),this.calculateClassroomInfo()}changeFilter(){this.checkIsFilter(),this.calculateClassroomInfo()}clearFilter(){this.filterObj={isShowChecked:!1,isShowNotChecked:!1},this.checkIsFilter(),this.calculateClassroomInfo()}checkIsFilter(){return 0!=this.mapClassroomGroupDataToForm.groupIdSelected||this.filterObj.isShowChecked||this.filterObj.isShowNotChecked||""!=this.searchByClassroomContentObj.searchContent.trim()}selectByGroupId(l){this.mapClassroomGroupDataToForm.groupIdSelected=l?.id??0,this.calculateClassroomInfo(),this.scrollable?.scrollTo({top:0,duration:0}),this.isMobileDevice&&this.sAztMatDrawerService.closeDrawer()}selectClassroomEvent(l,i){this.sAztDialogService.open(at,{data:{classroomId:i.id,classroomName:i.name,studentIdsSelected:this.studentsSelected.find(W=>W.classroomId==i.id)?.studentIdsSelected??[]},width:"1000px",autoFocus:!1}).afterClosed().subscribe(W=>{W&&this.chooseStudentsEvent.emit(W)})}calculateClassroomInfo(){this.doFilterData(),this.countFilterData(),this.calculateVirtualScrollData()}doFilterData(){const l=this.searchByClassroomContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchByClassroomContentObj.searchContent).toLowerCase().trim():"",i=this.searchByGroupContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchByGroupContentObj.searchContent).toLowerCase().trim():"";this.mapClassroomGroupDataToForm.groupObjs.forEach(E=>{const W=this.commonService.convertVietnameseToEnglish(E.groupObj.name??"");E.groupObj.isShowGroup=""==i||W.toLowerCase().trim().includes(i),E.classroomObjs.forEach(X=>{if(X.isShowClassroom=!0,!this.checkIsFilter())return;const mt=this.commonService.convertVietnameseToEnglish(X.name);let dt=0==this.mapClassroomGroupDataToForm.groupIdSelected||E.groupObj.id==this.mapClassroomGroupDataToForm.groupIdSelected,ut=""==l||mt.toLowerCase().trim().includes(l);X.isShowClassroom=dt&&ut&&(this.filterObj.isShowChecked&&X.studentIdsSelected.length>0||this.filterObj.isShowNotChecked&&X.studentIdsSelected.length<=0||!this.filterObj.isShowChecked&&!this.filterObj.isShowNotChecked)})})}countFilterData(){this.mapClassroomGroupDataToForm.groupObjs.forEach(l=>{l.groupObj.totalAllClassrooms=l.classroomObjs.length,l.groupObj.totalViewClassrooms=l.classroomObjs.filter(i=>i.isShowClassroom).length}),this.mapClassroomGroupDataToForm.totalAllClassrooms=this.mapClassroomGroupDataToForm.groupObjs.reduce((l,i)=>l+i.groupObj.totalAllClassrooms,0),this.mapClassroomGroupDataToForm.totalViewClassrooms=this.mapClassroomGroupDataToForm.groupObjs.reduce((l,i)=>l+i.groupObj.totalViewClassrooms,0)}calculateVirtualScrollData(){var l=[];this.mapClassroomGroupDataToForm.groupObjs.filter(i=>i.groupObj.totalViewClassrooms>0).forEach(i=>{l.push({type:"group",groupObj:i.groupObj,classroomObj:void 0}),i.classroomObjs.filter(E=>E.isShowClassroom).forEach(E=>{l.push({type:"classroom",groupObj:i.groupObj,classroomObj:E})})}),this.mapClassroomGroupDataToVirtualScroll=l}initClassroomData(){this.classroomGroupData=this.classroomGroupData.map(l=>({groupObj:l.groupObj,isOwned:l.isOwned,classroomObjs:l.classroomObjs.filter(i=>null!=i.permissionObj&&this.permissionService.hasCreatePermission(this.listPermissionTypes[this.permissionName],i))})),this.mapClassroomGroupDataToForm.groupObjs=this.classroomGroupData.map(l=>({groupObj:{...l.groupObj,isShowGroup:!0,totalAllClassrooms:0,totalViewClassrooms:0},isOwned:l.isOwned,classroomObjs:l.classroomObjs.map(i=>{let E=this.studentsSelected.find(W=>W.classroomId==i.id)?.studentIdsSelected??[];return{...i,studentIdsSelected:E,isShowClassroom:!0}})})),this.calculateClassroomInfo()}ngOnChanges(){this.initClassroomData()}ngOnInit(){super.ngOnInit(),this.classroomGroupData.forEach(l=>l.classroomObjs.map(i=>i.name=this.commonService.myTranslateInstant(i.name)??"")),this.initClassroomData()}constructor(l,i,E,W){super(),this.sAztMatDrawerService=l,this.permissionService=i,this.sAztClassroomCheckboxService=E,this.sAztDialogService=W,this.permissionName=c.t.exam,this.defaultCssClass="classroom-box-in-single-page",this.chooseStudentsEvent=new t.bkB,this.studentsSelected=[],this.mapClassroomGroupDataToForm={groupObjs:[],groupIdSelected:0,totalAllClassrooms:0,totalViewClassrooms:0},this.mapClassroomGroupDataToVirtualScroll=[],this.listPermissionTypes=c.t,this.searchByClassroomContentObj=new Q.Z,this.searchByGroupContentObj=new Q.Z,this.filterObj={isShowChecked:!1,isShowNotChecked:!1}}}return(r=T).\u0275fac=function(l){return new(l||r)(t.rXU(g.n),t.rXU(nt.p),t.rXU(b.Q),t.rXU(s.i))},r.\u0275cmp=t.VBU({type:r,selectors:[["azt-list-classroom-view-tree"]],viewQuery:function(l,i){if(1&l&&t.GBs(S.Yh,7),2&l){let E;t.mGM(E=t.lsd())&&(i.scrollable=E.first)}},inputs:{classroomGroupData:"classroomGroupData",permissionName:"permissionName",defaultCssClass:"defaultCssClass",studentsSelected:"studentsSelected"},outputs:{chooseStudentsEvent:"chooseStudentsEvent"},standalone:!0,features:[t.Jv_([g.n]),t.Vt3,t.OA$,t.aNF],decls:66,vars:55,consts:[["maximize","maximize"],["drawer",""],["menuFilter","matMenu"],["emptyClassroom",""],["maximize","",1,"azt-list-classroom-by-group"],[1,"azt-drawer-container",3,"ngClass","hasBackdrop"],[3,"openedChange","ngClass","mode","opened"],[1,"box","h-full","border","border-slate-200/60","dark:border-darkmode-400"],[1,"flex","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],[1,"search-box"],[3,"onSearch","isServerSearch","placeholder","searchContentObj","styleInput"],[2,"height","calc(100% - 50px)"],["track","vertical","pointerEventsMethod","scrollbar",1,"w-full",3,"visibility"],[1,"p-2"],["azt-track-service","azt-list-classroom-checkbox-TUrZzBy9T","class","flex items-center px-3 py-2 rounded-md w-full",3,"ngClass","click",4,"ngIf"],[4,"ngIf"],[1,"azt-drawer-content","h-full",3,"ngClass"],[1,"box","border","border-slate-200","dark:border-darkmode-400","h-full"],[1,"flex","items-center","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],["azt-track-service","azt-list-classroom-checkbox-WB1u8XZHUS","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-q2BPTM5lPo","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"flex","ml-auto"],[1,"mr-2"],[1,"filter","mr-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],[1,"w-4","h-4","inline-block"],["name","filter","size","18"],[1,"azt-hidden","md:block","ml-2"],["class","p-1 ml-1 items-center justify-center rounded-full text-xs bg-primary text-white cursor-pointer font-medium","style","display: inline-flex; width: 15px; height: 15px; font-size: 10px",4,"ngIf"],[1,"flex","items-center"],[3,"maximize"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-list-classroom-checkbox-mJWF3uWTQJ","for","isShowChecked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isShowChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],["azt-track-service","azt-list-classroom-checkbox-pFWk_nWN9o","for","isShowNotChecked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isShowNotChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","azt-list-classroom-checkbox-3OFGLRY5fa",3,"click"],["azt-track-service","azt-list-classroom-checkbox-iJlkvwO36n",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"w-full",2,"height","calc(100% - 50px)"],[4,"ngIf","ngIfElse"],["azt-track-service","azt-list-classroom-checkbox-TUrZzBy9T",1,"flex","items-center","px-3","py-2","rounded-md","w-full",3,"click","ngClass"],[4,"ngFor","ngForOf"],["azt-track-service","azt-list-classroom-checkbox-hUXQqnl7px","class","flex items-center px-3 py-2 rounded-md w-full text-left",3,"ngClass","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-hUXQqnl7px",1,"flex","items-center","px-3","py-2","rounded-md","w-full","text-left",3,"click","ngClass"],["azt-track-service","azt-list-classroom-checkbox-WB1u8XZHUS",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-open","size","16"],["azt-track-service","azt-list-classroom-checkbox-q2BPTM5lPo",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-close","size","16"],[1,"p-1","ml-1","items-center","justify-center","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium",2,"display","inline-flex","width","15px","height","15px","font-size","10px"],["track","vertical",1,"h-full",3,"visibility"],["scrollViewport","","itemSize","10"],[1,"grid","grid-cols-12","gap-3","p-3","pt-2"],["class","col-span-12 md:col-span-6",3,"ngStyle",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"col-span-12","md:col-span-6",3,"ngStyle"],[1,"font-bold"],["azt-track-service","azt-list-classroom-view-tree-o6QRGuakJ",1,"flex","items-center","clickable","hover:text-primary",3,"click","ngClass"],["name","align-justify","size","16"],[3,"matTooltip",4,"ngIf"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[3,"matTooltip"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"flex","items-center","justify-center",2,"height","200px"]],template:function(l,i){if(1&l){const E=t.RV6();t.j41(0,"div",4,0)(2,"mat-drawer-container",5)(3,"mat-drawer",6,1),t.bIt("openedChange",function(X){return t.eBV(E),t.Njj(i.sAztMatDrawerService.openedChange(X))}),t.j41(5,"div",7)(6,"div",8)(7,"div",9)(8,"azt-search-box",10),t.nI1(9,"mytranslate"),t.bIt("onSearch",function(X){return t.eBV(E),t.Njj(i.searchByGroupName(X.searchObj))}),t.k0s()()(),t.j41(10,"div",11)(11,"ng-scrollbar",12)(12,"div",13),t.DNE(13,A,3,8,"button",14)(14,H,2,1,"ng-container",15),t.k0s()()()()(),t.j41(15,"mat-drawer-content")(16,"div",16)(17,"div",17)(18,"div",18),t.DNE(19,tt,3,3,"button",19)(20,st,3,3,"button",20),t.j41(21,"div",21)(22,"div",22)(23,"azt-search-box",10),t.nI1(24,"mytranslate"),t.bIt("onSearch",function(X){return t.eBV(E),t.Njj(i.searchByClassroomName(X.searchObj))}),t.k0s()(),t.j41(25,"div",23)(26,"button",24)(27,"span",25),t.nrm(28,"lucide-icon",26),t.k0s(),t.j41(29,"span",27),t.EFF(30),t.nI1(31,"mytranslate"),t.DNE(32,lt,2,1,"span",28),t.k0s()()(),t.j41(33,"div",29),t.nrm(34,"azt-maximize-box",30),t.k0s(),t.j41(35,"mat-menu",null,2)(37,"div",31)(38,"ul",32)(39,"li")(40,"label",33),t.bIt("click",function(X){return t.eBV(E),t.Njj(X.stopPropagation())}),t.EFF(41),t.nI1(42,"mytranslate"),t.j41(43,"div",34)(44,"input",35),t.bIt("change",function(){return t.eBV(E),i.filterObj.isShowChecked=!i.filterObj.isShowChecked,t.Njj(i.changeFilter())}),t.k0s()()()(),t.j41(45,"li")(46,"label",36),t.bIt("click",function(X){return t.eBV(E),t.Njj(X.stopPropagation())}),t.EFF(47),t.nI1(48,"mytranslate"),t.j41(49,"div",34)(50,"input",37),t.bIt("change",function(){return t.eBV(E),i.filterObj.isShowNotChecked=!i.filterObj.isShowNotChecked,t.Njj(i.changeFilter())}),t.k0s()()()(),t.j41(51,"li"),t.nrm(52,"hr",38),t.k0s(),t.j41(53,"li")(54,"div",39)(55,"button",40),t.EFF(56),t.nI1(57,"mytranslate"),t.k0s(),t.j41(58,"div",41),t.bIt("click",function(X){return t.eBV(E),t.Njj(X.stopPropagation())}),t.j41(59,"button",42),t.bIt("click",function(){return t.eBV(E),t.Njj(i.clearFilter())}),t.EFF(60),t.nI1(61,"mytranslate"),t.k0s()()()()()()()()(),t.j41(62,"div",43),t.DNE(63,v,5,2,"ng-container",44)(64,L,3,3,"ng-template",null,3,t.C5r),t.k0s()()()()()()}if(2&l){const E=t.sdS(1),W=t.sdS(36),X=t.sdS(65);t.R7$(2),t.HbH(i.defaultCssClass),t.Y8G("ngClass",t.l_i(47,$,i.isMobileDevice,!i.isMobileDevice))("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),t.R7$(),t.FS9("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Y8G("ngClass",t.l_i(50,R,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),t.R7$(5),t.Y8G("isServerSearch",!1)("placeholder",t.bMT(9,33,"lang_azt_search_class_group"))("searchContentObj",i.searchByGroupContentObj)("styleInput","pr-10 py-1"),t.R7$(3),t.Y8G("visibility","hover"),t.R7$(2),t.Y8G("ngIf",!i.searchByGroupContentObj.searchContent),t.R7$(),t.Y8G("ngIf",i.mapClassroomGroupDataToForm.groupObjs.length>1),t.R7$(2),t.Y8G("ngClass",t.eq3(53,p,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),t.R7$(3),t.Y8G("ngIf",!i.sAztMatDrawerService.isOpenSideNav||i.isMobileDevice),t.R7$(),t.Y8G("ngIf",i.sAztMatDrawerService.isOpenSideNav&&!i.isMobileDevice),t.R7$(3),t.Y8G("isServerSearch",!1)("placeholder",t.bMT(24,35,"lang_azt_search_class"))("searchContentObj",i.searchByClassroomContentObj)("styleInput","py-1"),t.R7$(3),t.Y8G("matMenuTriggerFor",W),t.R7$(4),t.SpI(" ",t.bMT(31,37,"lang_testbank_tested_list_sort")," "),t.R7$(2),t.Y8G("ngIf",i.filterObj.isShowChecked||i.filterObj.isShowNotChecked),t.R7$(2),t.Y8G("maximize",E),t.R7$(7),t.SpI(" ",t.bMT(42,39,"lang_azt_selected_classes")," "),t.R7$(3),t.Y8G("checked",i.filterObj.isShowChecked),t.R7$(3),t.SpI(" ",t.bMT(48,41,"lang_azt_unselected_classes")," "),t.R7$(3),t.Y8G("checked",i.filterObj.isShowNotChecked),t.R7$(6),t.JRh(t.bMT(57,43,"lang_button_close")),t.R7$(4),t.JRh(t.bMT(61,45,"lang_button_delete")),t.R7$(3),t.Y8G("ngIf",i.mapClassroomGroupDataToForm.totalViewClassrooms>0)("ngIfElse",X)}},dependencies:[K.e,a.W,V.g,o.MD,o.YU,o.Sq,o.bT,o.B3,o.P9,e.X1,j.iI,e.YN,h.wp,I.s,D.kk,D.Cp,d.qe,d.$C,d.$l,m.oV,y.yg,y.E$,y.d6,F.flO,F.WGl,_.L,h.gC,S.Id,S.Yh,S.Gl,B.k],encapsulation:2}),T})();function Y(r,T){1&r&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&r&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_testbank_test_config_you_not_yet_student")))}function rt(r,T){if(1&r){const u=t.RV6();t.j41(0,"div")(1,"azt-list-classroom-view-tree",1),t.bIt("chooseStudentsEvent",function(i){t.eBV(u);const E=t.XpG();return t.Njj(E.chooseStudentsEvent(i))}),t.k0s(),t.j41(2,"div",2)(3,"div",3),t.DNE(4,Y,3,3,"span",0),t.k0s()()()}if(2&r){const u=t.XpG();t.R7$(),t.Y8G("classroomGroupData",u.classroomGroupData)("studentsSelected",u.studentsSelected)("permissionName",u.permissionName),t.R7$(3),t.Y8G("ngIf",u.form.controls.studentIds.errors)}}let _t=(()=>{var r;class T extends C.H{chooseStudentsEvent(l){let i=this.form.controls.studentIds.controls.filter(E=>E.controls.classroomId.value!=l.classroomId);this.form.controls.studentIds.clear(),i.forEach(E=>{this.form.controls.studentIds.push(E)}),l.studentIdsSelected.forEach(E=>{this.form.controls.studentIds.push(new e.gE({classroomId:new e.MJ(l.classroomId,{nonNullable:!0}),studentId:new e.MJ(E,{nonNullable:!0})}))}),this.calculateStudentsSelected()}initStudentsControl(){this.form.controls.studentIds.clear(),this.examStudentObjs.forEach(l=>{this.form.controls.studentIds.push(new e.gE({classroomId:new e.MJ(l.classroomId,{nonNullable:!0}),studentId:new e.MJ(l.studentId,{nonNullable:!0})}))}),this.calculateStudentsSelected()}calculateStudentsSelected(){let l=[],i=this.commonService.arrayToDictionary(this.form.controls.studentIds.getRawValue(),E=>E.classroomId.toString());Object.entries(i).forEach(([E,W],X)=>{let mt=this.commonService.getFirstOfArray(W)?.classroomId;mt&&l.push({classroomId:mt,classroomName:"",studentIdsSelected:W.map(dt=>dt.studentId)})}),this.studentsSelected=l}ngOnInit(){super.ngOnInit(),this.initStudentsControl()}constructor(){super(),this.examStudentObjs=[],this.permissionName=c.t.exam,this.studentsSelected=[]}}return(r=T).\u0275fac=function(l){return new(l||r)},r.\u0275cmp=t.VBU({type:r,selectors:[["list-student-checkbox"]],inputs:{form:"form",classroomGroupData:"classroomGroupData",examStudentObjs:"examStudentObjs",permissionName:"permissionName"},standalone:!0,features:[t.Vt3,t.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[3,"chooseStudentsEvent","classroomGroupData","studentsSelected","permissionName"],[1,"mt-2"],[1,"text-xs","font-medium","text-danger"]],template:function(l,i){1&l&&t.DNE(0,rt,5,4,"div",0),2&l&&t.Y8G("ngIf",i.form)},dependencies:[N,o.MD,o.bT,e.X1,j.iI,e.YN,h.wp,I.s,F.flO,_.L,S.Id,B.k],encapsulation:2}),T})()},92654:(J,w,n)=>{n.d(w,{x:()=>_});var o=n(51698),e=n(82716),j=n(94217),F=n(33860),S=n(57003),I=n(92274),B=n(48891),c=n(543),h=n(46899);let _=(()=>{var C;class t{doExamAction(g,V){switch(V){case I.$.CONFIG_EXAM_CLASSROOM:return this.showConfigExamClassroomDialog(g);case I.$.SHOW_EXAM_DETAIL:this.openDialog(g);break;case I.$.SHARE_OFFLINE_RESULT:this.showOfflineShareDialog(g);break;case I.$.COPY_EXAM_LINK:this.copyExamLink()}return this.returnUndefinedOutput()}copyExamLink(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showConfigExamClassroomDialog(g){return new o.c(V=>{this.sAztDialogService.open(S.Q,{width:"900px",data:{hashId:g.examObj.hashId,examStudents:g.examObj?.examStudents??[]},restoreFocus:!1}).afterClosed().subscribe(Q=>{Q?(V.next({reloadData:!0}),V.complete()):(V.next(void 0),V.complete())})})}openDialog(g){"CAPACITY"!==g.examObj?.objectType&&this.showExamDetailDialog(g),"CAPACITY"===g.examObj?.objectType&&this.openDialogCapacityExamDetail(g)}openDialogCapacityExamDetail(g){this.sAztDialogService.open(j.A,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:{id:g.examObj?.id??0},restoreFocus:!1}).afterClosed().subscribe(a=>{})}showExamDetailDialog(g){let V={obj:{...g.examObj,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0},globalLadingPage:g.globalLadingPage,curCateId:g.categoryId,isOnLib:0,isShow:!0,showDelete:!0};this.sAztDialogService.open(F.c,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:V,restoreFocus:!1}).afterClosed().subscribe(Q=>{})}showOfflineShareDialog(g){this.sAztDialogService.open(e.h,{width:"1000px",data:{examHashId:g.examObj.hashId,useDialog:!0},restoreFocus:!1})}returnUndefinedOutput(){return new o.c(g=>{g.next(void 0),g.complete()})}constructor(g,V){this.commonService=g,this.sAztDialogService=V}}return(C=t).\u0275fac=function(g){return new(g||C)(B.KVO(c.R),B.KVO(h.i))},C.\u0275prov=B.jDH({token:C,factory:C.\u0275fac,providedIn:"root"}),t})()},31291:(J,w,n)=>{n.d(w,{n:()=>F});var o=n(43362),e=n(48891),j=n(543);let F=(()=>{var S;class I{sortExamByColumn(c,h,_){return h==o.N.BY_NAME?this.sortExamByName(c,_):h==o.N.BY_PUBLISH_STATUS?this.sortExamByPublishStatus(c,_):h==o.N.BY_UPDATED_DATE?this.sortExamByDateUpdated(c,_):h==o.N.BY_ATTENDED?this.sortExamByAttended(c,_):this.sortExamByName(c,_)}sortExamByName(c,h){var _=[...c.rootCategoryObjs??[]],C=[...c.rootDocumentObjs??[]];return 1==h?{categoryObjs:this._sortCateByName(_),documentObjs:this._sortDocumentByName(C)}:{categoryObjs:this._sortCateByName(_).reverse(),documentObjs:this._sortDocumentByName(C).reverse()}}sortExamByPublishStatus(c,h){var _=[...c.rootDocumentObjs??[]];return 1==h?{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(_,_?.length)}:{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(_,_?.length).reverse()}}sortExamByDateUpdated(c,h){var _=this.commonService.castObj(c.rootCategoryObjs),C=this.commonService.castObj(c.rootDocumentObjs);return 1==h?{categoryObjs:this._sortCateByDateUpdateExam(_??[]),documentObjs:this._sortDocumentByUpdateTime(C??[])}:{categoryObjs:this._sortCateByDateUpdateExam(_??[]).reverse(),documentObjs:this._sortDocumentByUpdateTime(C??[]).reverse()}}sortExamByAttended(c,h){var _=this.commonService.castObj(c.rootDocumentObjs);return 1==h?{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(_??[])}:{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(_??[]).reverse()}}_sortCateByName(c){return c?.sort((h,_)=>(h.name?.trim()??"").localeCompare(_.name?.trim()??""))??[]}_sortDocumentByName(c){return c?.sort((h,_)=>(h.name?.trim()??"").localeCompare(_.name?.trim()??""))??[]}_sortDocumentByPublish(c,h){let _=[],C=[];for(let t=0;t<(h??0);t++)null!=c?.[t]&&!c?.[t].isPublished&&_.push(c[t]),c?.[t].isPublished&&C.push(c[t]);return _.concat(C)}_sortCateByDateUpdateExam(c){return c.sort((h,_)=>Number(new Date(h.updatedAt??""))-Number(new Date(_.updatedAt??""))),c}_sortDocumentByUpdateTime(c){return c?.sort((h,_)=>Number(new Date(h.updatedAt??""))-Number(new Date(_.updatedAt??"")))}_sortDocumentByAttended(c){return c?.sort((h,_)=>Number(h.attended)-Number(_.attended))}constructor(c){this.commonService=c}}return(S=I).\u0275fac=function(c){return new(c||S)(e.KVO(j.R))},S.\u0275prov=e.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),I})()},92274:(J,w,n)=>{n.d(w,{$:()=>o});var o=function(e){return e[e.CONFIG_EXAM_CLASSROOM=0]="CONFIG_EXAM_CLASSROOM",e[e.SHOW_EXAM_DETAIL=1]="SHOW_EXAM_DETAIL",e[e.SHARE_OFFLINE_RESULT=2]="SHARE_OFFLINE_RESULT",e[e.COPY_EXAM_LINK=3]="COPY_EXAM_LINK",e}(o||{})},45306:(J,w,n)=>{n.d(w,{d:()=>o});var o=function(e){return e[e.OFFLINE_CONFIG=0]="OFFLINE_CONFIG",e[e.CONFIG_EXAM=1]="CONFIG_EXAM",e[e.EDIT_EXAM=2]="EDIT_EXAM",e[e.POWER_POINT=3]="POWER_POINT",e[e.STATISTIC=4]="STATISTIC",e[e.TESTED_LIST=5]="TESTED_LIST",e[e.LEADERBOARD=6]="LEADERBOARD",e}(o||{})},43362:(J,w,n)=>{n.d(w,{N:()=>o});var o=function(e){return e[e.BY_NAME=0]="BY_NAME",e[e.BY_PUBLISH_STATUS=1]="BY_PUBLISH_STATUS",e[e.BY_UPDATED_DATE=2]="BY_UPDATED_DATE",e[e.BY_ATTENDED=3]="BY_ATTENDED",e}(o||{})},45168:(J,w,n)=>{n.d(w,{C:()=>o});var o=function(e){return e[e.multipleChoice=1]="multipleChoice",e[e.essay=3]="essay",e[e.trueFalse=5]="trueFalse",e[e.fill=4]="fill",e}(o||{})},51221:(J,w,n)=>{n.d(w,{$:()=>o});var o=function(e){return e.COPY="copy",e.CUT="cut",e.DELETE="delete",e.SELECTED="selected",e}(o||{})},86925:(J,w,n)=>{n.d(w,{Y:()=>o});var o=function(e){return e[e.EXAM_CATEGORY=0]="EXAM_CATEGORY",e[e.EXAM=1]="EXAM",e}(o||{})},30977:(J,w,n)=>{n.d(w,{g:()=>F});var o=n(51221),e=n(86925),j=n(48891);let F=(()=>{var S;class I{constructor(){this.clipboardObjs=[]}setActionToClipboard(c,h,_,C){var t={id:c,name:C,type:h,action:_};this.clipboardObjs.filter(g=>g.id==t.id&&g.type==t.type).length>0?this.clipboardObjs.forEach(g=>{g.id==t.id&&g.type==t.type&&(g.action=t.action)}):this.clipboardObjs.push(t)}hasInClipboard(c,h){return this.clipboardObjs.filter(C=>C.id==c&&C.type==h).length>0}hasCopyFolderActionInClipboard(){var c=!1;return this.clipboardObjs.forEach(h=>{h.type==e.Y.EXAM_CATEGORY&&h.action==o.$.COPY&&(c=!0)}),c}getActionOfDocumentObj(c,h){var _=this.clipboardObjs.filter(C=>C.id==c&&C.type==h);if(_&&_.length>0)return _[0].action}removeDocumentInClipboard(c,h){for(var _=0;_<this.clipboardObjs.length;_++)this.clipboardObjs[_].id==c&&this.clipboardObjs[_].type==h&&this.clipboardObjs.splice(_,1)}isPasteToSelfFolder(c){var h=!1;return this.clipboardObjs.forEach(_=>{_.id==c&&_.type==e.Y.EXAM_CATEGORY&&_.action==o.$.COPY&&(h=!0)}),h}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return(S=I).\u0275fac=function(c){return new(c||S)},S.\u0275prov=j.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),I})()},48485:(J,w,n)=>{n.d(w,{H:()=>o});class o{static studentCheckBoxValidator(j){const S=j.controls.whoAllow,I=j.controls.studentIds;return S&&I?3!=S.value||o.countCheckBox(I)>=1?(I.setErrors(null),null):(I.setErrors({studentCheckBoxValidator:!0}),{identityRevealed:!0}):null}static countCheckBox(j){return j.getRawValue().length}}},62538:(J,w,n)=>{n.d(w,{O:()=>nt});var o=n(48891),e=n(45168),j=n(59640),F=n(54460),S=n(10936),I=n(65162),B=n(47348),c=n(21656),h=n(15343),_=n(70050),C=n(5502),t=n(36894),K=n(67638);const g=["table"],V=()=>[];function a(b,s){if(1&b&&(o.j41(0,"td",6),o.EFF(1),o.nI1(2,"formatOfflineExamHashIdToNumber"),o.k0s()),2&b){const D=s.$implicit,d=s.index;o.BMQ("excelRow",1)("excelColumn",d+1),o.R7$(),o.SpI(" ",o.bMT(2,3,null==D?null:D.offlineMixQuestionHashId)," ")}}function Q(b,s){if(1&b&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&b){const D=o.XpG(2).$implicit,d=o.XpG().$implicit;o.R7$(),o.SpI(" ",o.bMT(2,1,D.offlineQuestionObjs[d].answer)," ")}}function q(b,s){1&b&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&b&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_core_essay_question")," "))}function et(b,s){if(1&b&&(o.j41(0,"span"),o.DNE(1,Q,3,3,"span",7)(2,q,3,3,"span",7),o.k0s()),2&b){const D=o.XpG().$implicit,d=o.XpG().$implicit;o.R7$(),o.Y8G("ngIf",!(null!=D.offlineQuestionObjs&&null!=D.offlineQuestionObjs[d]&&D.offlineQuestionObjs[d].isEssay)),o.R7$(),o.Y8G("ngIf",null==D.offlineQuestionObjs||null==D.offlineQuestionObjs[d]?null:D.offlineQuestionObjs[d].isEssay)}}function ot(b,s){if(1&b&&(o.j41(0,"td",6),o.DNE(1,et,3,2,"span",7),o.k0s()),2&b){let D;const d=s.$implicit,m=s.index,y=o.XpG().$implicit;o.BMQ("excelRow",y+2)("excelColumn",m+1),o.R7$(),o.Y8G("ngIf",(null!==(D=null==d.offlineQuestionObjs?null:d.offlineQuestionObjs.length)&&void 0!==D?D:0)>y)}}function at(b,s){if(1&b&&(o.j41(0,"tr")(1,"td",3),o.EFF(2),o.k0s(),o.DNE(3,ot,2,3,"td",4),o.k0s()),2&b){let D;const d=s.$implicit,m=o.XpG();o.R7$(),o.BMQ("excelRow",d+2)("excelColumn",0),o.R7$(),o.SpI(" ",d+m.startQuestionIndex," "),o.R7$(),o.Y8G("ngForOf",null!==(D=null==m.obj?null:m.obj.offlineMixQuestionObjs)&&void 0!==D?D:o.lJ4(4,V))}}let nt=(()=>{var b;class s extends j.H{calculateMaxQuestion(){let d=0;return this.obj.offlineMixQuestionObjs&&this.obj.offlineMixQuestionObjs.forEach(m=>{d<(m.offlineQuestionObjs?.length??0)&&(d=m.offlineQuestionObjs?.length??0)}),d}processData(){for(let d=0;d<this.obj.offlineMixQuestionObjs.length;d++)for(let m=0;m<this.obj.offlineMixQuestionObjs[d].offlineQuestionObjs.length;m++)this.obj.offlineMixQuestionObjs[d].offlineQuestionObjs[m].answerType===this.offlineAnswerType.trueFalse&&(this.obj.offlineMixQuestionObjs[d].offlineQuestionObjs[m].answer=this.convertAnswerTrueFalse(this.obj.offlineMixQuestionObjs[d].offlineQuestionObjs[m].answer))}convertAnswerTrueFalse(d){const m=d.split(","),y=this.commonService.myClone(this.answerChoiceMap),$=this.commonService.myTranslateInstant("lang_testbank_correct_answer_to_offline_exam"),R=this.commonService.myTranslateInstant("lang_testbank_wrong_answer_to_offline_exam");return y.map(U=>m.includes(U)?$:R).join("")}ngOnChanges(){this.processData(),this.isExported=!1,this.maxQuestionIndex=this.calculateMaxQuestion(),this.totalExamCode=this.obj.offlineMixQuestionObjs?.length??0}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}constructor(d){super(),this.exportExcelService=d,this.startQuestionIndex=1,this.exportDataDone=new o.bkB,this.maxQuestionIndex=0,this.totalExamCode=0,this.isExported=!1,this.offlineAnswerType=e.C,this.answerChoiceMap=["A","B","C","D"]}}return(b=s).\u0275fac=function(d){return new(d||b)(o.rXU(K.x))},b.\u0275cmp=o.VBU({type:b,selectors:[["azt-export-excel-for-answersheet"]],viewQuery:function(d,m){if(1&d&&o.GBs(g,5),2&d){let y;o.mGM(y=o.lsd())&&(m.table=y.first)}},inputs:{obj:"obj",startQuestionIndex:"startQuestionIndex"},outputs:{exportDataDone:"exportDataDone"},standalone:!0,features:[o.Vt3,o.OA$,o.aNF],decls:14,vars:16,consts:[["table",""],[1,"table","table-bordered",2,"display","none"],["rowspan","2","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',1,"text-center","azt-excel-cell"],[4,"ngIf"]],template:function(d,m){if(1&d&&(o.j41(0,"table",1,0)(2,"tbody")(3,"tr")(4,"td",2),o.EFF(5),o.nI1(6,"mytranslate"),o.k0s(),o.j41(7,"td",3),o.EFF(8),o.nI1(9,"mytranslate"),o.k0s()(),o.j41(10,"tr"),o.DNE(11,a,3,5,"td",4),o.k0s(),o.DNE(12,at,4,5,"tr",5),o.nI1(13,"createEmptyArray"),o.k0s()()),2&d){let y;o.R7$(4),o.BMQ("excelRow",0)("excelColumn",0),o.R7$(),o.SpI(" ",o.bMT(6,9,"lang_testbank_answersheet_question_title")," "),o.R7$(2),o.BMQ("colspan",m.totalExamCode)("excelRow",0)("excelColumn",1),o.R7$(),o.SpI(" ",o.bMT(9,11,"lang_auto_ma_de_thi")," "),o.R7$(3),o.Y8G("ngForOf",null!==(y=null==m.obj?null:m.obj.offlineMixQuestionObjs)&&void 0!==y?y:o.lJ4(15,V)),o.R7$(),o.Y8G("ngForOf",o.bMT(13,13,m.maxQuestionIndex))}},dependencies:[F.MD,F.Sq,F.bT,S.X1,I.iI,S.YN,B.wp,c.s,h.flO,_.L,B.IX,B.c,C.Id,t.k],encapsulation:2}),s})()},82716:(J,w,n)=>{n.d(w,{h:()=>R});var o=n(54460),e=n(10936),j=n(89163),F=n(65162),S=n(15343),I=n(5502),B=n(21656),c=n(33887),h=n(36894),_=n(38009),C=n(47348),t=n(70050),K=n(80037),g=n(52811),V=n(27985),a=n(48891),Q=n(58538),q=n(3780),et=n(64160),ot=n(81587);function at(p,U){1&p&&(a.j41(0,"div",9)(1,"span",10),a.nrm(2,"azt-loading-ui"),a.k0s(),a.j41(3,"span",11),a.EFF(4,"Loading..."),a.k0s()())}function nt(p,U){if(1&p){const M=a.RV6();a.j41(0,"div",26)(1,"azt-list-classroom-checkbox",27),a.bIt("changeCheckboxEvent",function(G){a.eBV(M);const A=a.XpG(3);return a.Njj(A.changeStatusOfflineShare(G))}),a.k0s()()}if(2&p){const M=a.XpG(3);a.R7$(),a.Y8G("form",M.form)("classroomGroupData",M.classroomWithGroup)("shareClassroomIds",M.shareClassroomIds)("permissionName",M.permissionTypes.exam)("defaultCssClass","classroom-box-in-dialog")}}function b(p,U){if(1&p){const M=a.RV6();a.j41(0,"div",28),a.nrm(1,"input",29),a.j41(2,"button",30),a.bIt("click",function(){a.eBV(M);const G=a.XpG(3);return a.Njj(G.showCopySuccess())}),a.j41(3,"span",31),a.nrm(4,"lucide-icon",32),a.k0s(),a.EFF(5),a.nI1(6,"mytranslate"),a.k0s()()}if(2&p){const M=a.XpG(3);a.R7$(),a.Y8G("value",M.linkCopy),a.R7$(),a.Y8G("cdkCopyToClipboard",M.copyLinkToClipboard()),a.R7$(3),a.SpI(" ",a.bMT(6,3,"lang_auto_sao_chep")," ")}}function s(p,U){1&p&&(a.j41(0,"div",33)(1,"p",34),a.EFF(2),a.nI1(3,"mytranslate"),a.k0s()()),2&p&&(a.R7$(2),a.JRh(a.bMT(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function D(p,U){if(1&p){const M=a.RV6();a.qex(0),a.j41(1,"div",14)(2,"div",15)(3,"input",16),a.bIt("change",function(){a.eBV(M);const G=a.XpG(2);return a.Njj(G.changeStatusOfflineShare(void 0))}),a.k0s(),a.j41(4,"label",17),a.EFF(5),a.nI1(6,"mytranslate"),a.k0s()(),a.j41(7,"div",18)(8,"input",19),a.bIt("change",function(){a.eBV(M);const G=a.XpG(2);return a.Njj(G.changeStatusOfflineShare(void 0))}),a.k0s(),a.j41(9,"label",20),a.EFF(10),a.nI1(11,"mytranslate"),a.k0s()(),a.j41(12,"div",18)(13,"input",21),a.bIt("change",function(){a.eBV(M);const G=a.XpG(2);return a.Njj(G.changeStatusOfflineShare(void 0))}),a.k0s(),a.j41(14,"label",22),a.EFF(15),a.nI1(16,"mytranslate"),a.k0s()()(),a.DNE(17,nt,2,5,"div",23)(18,b,7,5,"div",24)(19,s,4,3,"div",25),a.nI1(20,"fullPermission"),a.bVm()}if(2&p){const M=a.XpG(2);a.R7$(3),a.Y8G("value",0),a.R7$(2),a.JRh(a.bMT(6,9,"lang_auto_khong")),a.R7$(3),a.Y8G("value",1),a.R7$(2),a.JRh(a.bMT(11,11,"lang_auto_tat_ca_cac_lop")),a.R7$(3),a.Y8G("value",2),a.R7$(2),a.JRh(a.bMT(16,13,"lang_auto_tuy_chon_theo_lop")),a.R7$(2),a.Y8G("ngIf",2===M.form.controls.chooseOption.value),a.R7$(),a.Y8G("ngIf",1===M.form.controls.chooseOption.value||2===M.form.controls.chooseOption.value&&!M.form.controls.classroomFormArray.errors),a.R7$(),a.Y8G("ngIf",!a.i5U(20,15,M.examWithPermissionObj,"exam"))}}function d(p,U){1&p&&(a.j41(0,"div",36)(1,"p",34),a.EFF(2),a.nI1(3,"mytranslate"),a.k0s()()),2&p&&(a.R7$(2),a.JRh(a.bMT(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function m(p,U){if(1&p&&(a.DNE(0,d,4,3,"div",35),a.nI1(1,"fullPermission")),2&p){const M=a.XpG(2);a.Y8G("ngIf",!a.i5U(1,1,M.examWithPermissionObj,"exam"))}}function y(p,U){if(1&p&&(a.j41(0,"form",12),a.DNE(1,D,21,18,"ng-container",13),a.nI1(2,"fullPermission"),a.DNE(3,m,2,4,"ng-template",null,1,a.C5r),a.k0s()),2&p){const M=a.sdS(4),f=a.XpG();a.Y8G("formGroup",f.form),a.R7$(),a.Y8G("ngIf",a.i5U(2,3,f.examWithPermissionObj,"exam"))("ngIfElse",M)}}function $(p,U){if(1&p){const M=a.RV6();a.j41(0,"div",37)(1,"button",38),a.bIt("click",function(){a.eBV(M);const G=a.XpG();return a.Njj(G.btnCloseDialog(!1))}),a.EFF(2),a.nI1(3,"mytranslate"),a.k0s()()}2&p&&(a.R7$(2),a.SpI(" ",a.bMT(3,1,"lang_auto_dong")," "))}let R=(()=>{var p;class U extends c._{btnCloseDialog(f){this.dialogRef.close(f)}copyLinkToClipboard(){let f=this.commonService.getCurrentDomain();return this.linkCopy=`${f}/de-thi/${this.examWithPermissionObj?.hashId}?offline=${this.offlineCode}`,this.linkCopy}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getCodeOfflineShare(){this.initStatusObj(),this.waitDestroy(this.offlineShareService.apiOfflineShareGetObjGet(this.examHashId).subscribe(f=>{1==f.success?(this.offlineCode=f.data?.shareHashId??"",this.shareClassroomIds=f.data?.shareClassroomIds??[],this.examWithPermissionObj=f.data?.examObj,this.classroomWithGroup=[{groupObj:{id:-1,name:this.commonService.myTranslateInstant("lang_testbank_share_offline_default_group")},isOwned:!0,classroomObjs:f.data?.classroomObjs??[]}],this.form.controls.chooseOption.setValue(f.data?.showOfflineResult??0),this.successStatusObj()):this.errorStatusObj(f.message??"",!0)}))}changeStatusOfflineShare(f){if(2==this.form.getRawValue().chooseOption&&this.form.controls.classroomFormArray.errors?.classroomCheckBoxValidatorWithoutWhoAllow)return;let G=this.form.getRawValue().chooseOption;const A=2!=G?[]:this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);this.waitDestroy(this.offlineShareService.apiOfflineShareChangeStatusPost({examHashId:this.examWithPermissionObj?.hashId??"",status:G,classroomIds:A}).subscribe(P=>{1==P.success?this.offlineCode=P.data?.shareHashId??"":this.errorStatusObj(P.message??"",!0)}))}ngAfterContentChecked(){this.changeDetector.detectChanges()}ngOnInit(){super.ngOnInit(),this.getCodeOfflineShare()}constructor(f,G,A,k,P){super(k,A),this.changeDetector=f,this.offlineShareService=G,this.dialogRef=A,this.sAztClassroomCheckboxService=P,this.examHashId="",this.useDialog=!1,this.permissionTypes=_.t,this.offlineCode="",this.linkCopy="",this.examWithPermissionObj=void 0,this.classroomWithGroup=[],this.shareClassroomIds=[],this.examHashId=k.examHashId?k.examHashId:this.examHashId,this.useDialog=k?k.useDialog:this.useDialog,this.form=new e.gE({chooseOption:new e.MJ(0,{nonNullable:!0}),whoAllow:new e.MJ(0,{nonNullable:!0}),classroomFormArray:new e.Yp([])},{validators:[K.j.classroomInGroupCheckBoxValidatorWithoutWhoAllow]})}}return(p=U).\u0275fac=function(f){return new(f||p)(a.rXU(a.gRc),a.rXU(Q.i$),a.rXU(j.CP,8),a.rXU(j.Vh,8),a.rXU(q.Q))},p.\u0275cmp=a.VBU({type:p,selectors:[["azt-offline-share"]],inputs:{examHashId:"examHashId",useDialog:"useDialog"},standalone:!0,features:[a.Vt3,a.aNF],decls:11,vars:6,consts:[["doneLoading",""],["noFullPermission",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-base","font-medium"],[1,"p-3","pt-0"],["class","flex justify-center items-center",4,"ngIf","ngIfElse"],["class","text-right mt-3",4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[3,"formGroup"],[4,"ngIf","ngIfElse"],[1,"flex","flex-col","sm:flex-row","mb-3"],[1,"form-check","mr-8"],["formControlName","chooseOption","id","notAllow","type","radio",1,"form-check-input",3,"change","value"],["for","notAllow",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["formControlName","chooseOption","id","allAllow","type","radio",1,"form-check-input",3,"change","value"],["for","allAllow",1,"form-check-label"],["formControlName","chooseOption","id","customAllow","type","radio",1,"form-check-input",3,"change","value"],["for","customAllow",1,"form-check-label"],["class","azt-list-classroom",4,"ngIf"],["class","azt-copy relative",4,"ngIf"],["class","mt-0",4,"ngIf"],[1,"azt-list-classroom"],[3,"changeCheckboxEvent","form","classroomGroupData","shareClassroomIds","permissionName","defaultCssClass"],[1,"azt-copy","relative"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","practice-detail-isTsISlyAY",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click","cdkCopyToClipboard"],[1,"w-4","h-4","inline-block","mr-2"],["name","copy","size","20"],[1,"mt-0"],[1,"note"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"text-right","mt-3"],["azt-track-service","azt-offline-share-hrBGx7oL2r",1,"btn","w-24","btn-secondary",3,"click"]],template:function(f,G){if(1&f&&(a.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),a.EFF(4),a.nI1(5,"mytranslate"),a.k0s()(),a.j41(6,"div",6),a.DNE(7,at,5,0,"div",7)(8,y,5,6,"ng-template",null,0,a.C5r)(10,$,4,3,"div",8),a.k0s()()()),2&f){const A=a.sdS(9);a.R7$(4),a.JRh(a.bMT(5,4,"lang_auto_tra_ket_qua_thi_offline")),a.R7$(3),a.Y8G("ngIf",G.statusObj.loading)("ngIfElse",A),a.R7$(3),a.Y8G("ngIf",G.useDialog)}},dependencies:[g.R,V.D,o.MD,o.bT,e.X1,e.qT,e.me,e.Fm,e.BC,e.cb,e.j4,e.JD,F.iI,e.YN,C.wp,B.s,et.dF,S.flO,S.WGl,t.L,C.gC,I.Id,h.k,ot.t],encapsulation:2}),U})()},94217:(J,w,n)=>{n.d(w,{A:()=>nt});var o=n(89163),e=n(33887),j=n(33860),F=n(52811),S=n(2915),I=n(8022),B=n(54460),c=n(10936),h=n(65162),_=n(47348),C=n(21656),t=n(15343),K=n(70050),g=n(5502),V=n(36894),a=n(48891),Q=n(78472),q=n(46899),et=n(3793);function ot(b,s){1&b&&(a.j41(0,"div",6),a.nrm(1,"azt-loading-ui"),a.k0s())}function at(b,s){if(1&b){const D=a.RV6();a.j41(0,"azt-mat-dialog-content",7)(1,"app-capacity-exam-tree-in-view-mode-component",8),a.bIt("getExamData",function(m){a.eBV(D);const y=a.XpG();return a.Njj(y.getExamData(m))}),a.k0s()()}if(2&b){const D=a.XpG();a.Y8G("defaultHeight",70),a.R7$(),a.Y8G("rawNodes",D.examComponents)}}let nt=(()=>{var b;class s extends e._{getExamData(d){this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(d.hashId??"").subscribe(m=>{if(!m.success||!m.data?.examObj)return this.errorStatusObj(m.message??"");this.showExamDetailDialog(m.data?.examObj)})}showExamDetailDialog(d){let m={obj:{...d},curCateId:d.categoryId??0,isOnLib:0,isShow:!0};this.sAztDialogService.open(j.c,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:m,restoreFocus:!1}).afterClosed().subscribe($=>{})}getData(){this.initStatusObj(),this.waitDestroy(this.examService.apiExamListExamComponentsIdGet(this.data.id).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message??"");this.examComponents=d.data?.objs??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getData()}constructor(d,m,y,$,R){super(R,$),this.documentConfigService=d,this.sAztDialogService=m,this.examService=y,this.dialogRef=$,this.data=R,this.examComponents=[]}}return(b=s).\u0275fac=function(d){return new(d||b)(a.rXU(Q.x_),a.rXU(q.i),a.rXU(et.R),a.rXU(o.CP,8),a.rXU(o.Vh,8))},b.\u0275cmp=a.VBU({type:b,selectors:[["azt-preview-capacity-exam"]],standalone:!0,features:[a.Vt3,a.aNF],decls:8,vars:5,consts:[[1,"az-dialog-info"],[1,"box","p-3",2,"overflow-x","hidden"],["class","flex justify-between items-center p-5",4,"ngIf"],["class","mt-3",3,"defaultHeight",4,"ngIf"],[1,"text-right","pt-3"],[1,"btn","w-24","btn-outline-secondary",3,"click"],[1,"flex","justify-between","items-center","p-5"],[1,"mt-3",3,"defaultHeight"],[3,"getExamData","rawNodes"]],template:function(d,m){1&d&&(a.j41(0,"div",0)(1,"div",1),a.DNE(2,ot,2,0,"div",2)(3,at,2,2,"azt-mat-dialog-content",3),a.j41(4,"div",4)(5,"button",5),a.bIt("click",function(){return m.dialogRef.close()}),a.EFF(6),a.nI1(7,"mytranslate"),a.k0s()()()()),2&d&&(a.R7$(2),a.Y8G("ngIf",m.statusObj.loading),a.R7$(),a.Y8G("ngIf",!m.statusObj.loading),a.R7$(3),a.SpI(" ",a.bMT(7,3,"lang_auto_dong")," "))},dependencies:[F.R,S.U,I.n,B.MD,B.bT,c.X1,h.iI,c.YN,_.wp,C.s,t.flO,K.L,g.Id,V.k],encapsulation:2}),s})()},33860:(J,w,n)=>{n.d(w,{c:()=>it});var o=n(54460),e=n(48891),j=n(10936),F=n(89163),S=n(65162),I=n(15343),B=n(5502),c=n(21656),h=n(46899),_=n(33887),C=n(36894),t=n(25539),K=n(47348),g=n(70050),V=n(62538),a=n(18148),Q=n(52654),q=n(78111),et=n(14490),ot=n(2915),at=n(63958),nt=n(52811),b=n(81300),s=n(78472),D=n(10296),d=n(51913),m=n(91513),y=n(3793),$=n(58538),R=n(42032),p=n(64160),U=n(17818),M=n(47712);const f=()=>({"mr-1 flex-none":!0});function G(z,Z){if(1&z&&(e.j41(0,"a",33),e.nI1(1,"mytranslate"),e.j41(2,"span",23),e.nrm(3,"lucide-icon",34),e.k0s()()),2&z){e.XpG(2);const O=e.sdS(3);e.FS9("matTooltip",e.bMT(1,2,"lang_auto_tai_ve")),e.Y8G("matMenuTriggerFor",O)}}function A(z,Z){if(1&z){const O=e.RV6();e.j41(0,"a",35),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(O);const v=e.XpG(2);return e.Njj(v.showCopySuccess())}),e.j41(2,"span",36),e.nrm(3,"lucide-icon",37),e.k0s(),e.j41(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()}if(2&z){const O=e.XpG(2);e.FS9("matTooltip",e.bMT(1,3,"lang_auto_copy_link_de_thi")),e.Y8G("cdkCopyToClipboard",O.copyLinkExam()),e.R7$(5),e.JRh(e.bMT(6,5,"lang_auto_copy_link"))}}function k(z,Z){1&z&&(e.j41(0,"div",38)(1,"span",39),e.nrm(2,"azt-loading-ui"),e.k0s(),e.j41(3,"span",40),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&z&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function P(z,Z){if(1&z&&(e.j41(0,"div",41),e.nrm(1,"div",42),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&z){const O=e.XpG(2);e.R7$(),e.Y8G("innerHtml",e.bMT(2,1,O.data.headerContent),e.npT)}}function H(z,Z){if(1&z&&e.nrm(0,"azt-loaded-img",43),2&z){const O=e.XpG(2);e.Y8G("imgSrc",O.data.obj.examHeader)}}function tt(z,Z){if(1&z&&e.nrm(0,"azt-question-standalone-for-preview",45),2&z){const O=e.XpG(),x=O.$implicit,v=O.index,L=e.XpG(2);e.Y8G("examObj",L.examObj)("questionObj",x)("follower",L.followerRenderQuest)("curQuestionIndex",v)("isShowExplain",L.showExplanation)}}function st(z,Z){if(1&z&&(e.qex(0),e.DNE(1,tt,1,5,"azt-question-standalone-for-preview",44),e.bVm()),2&z){const O=e.XpG(2);e.R7$(),e.Y8G("ngIf",O.examObj)}}function lt(z,Z){if(1&z){const O=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),e.DNE(6,G,4,4,"a",18),e.nI1(7,"editPermission"),e.DNE(8,A,7,7,"a",19),e.j41(9,"button",20),e.bIt("click",function(){e.eBV(O);const v=e.XpG();return e.Njj(v.showAllExplanation())}),e.EFF(10),e.nI1(11,"mytranslate"),e.nI1(12,"mytranslate"),e.k0s()()(),e.j41(13,"div",21)(14,"a",22)(15,"span",23),e.nrm(16,"lucide-icon",24),e.k0s()()()(),e.j41(17,"azt-mat-dialog-content",25),e.DNE(18,k,6,3,"div",26),e.j41(19,"div",27),e.nrm(20,"div",28),e.DNE(21,P,3,3,"div",29)(22,H,1,1,"azt-loaded-img",30)(23,st,2,1,"ng-container",31),e.nrm(24,"div",32),e.k0s()()()(),e.bVm()}if(2&z){const O=e.XpG();e.R7$(6),e.Y8G("ngIf",!(null!=O.data&&O.data.globalLadingPage)&&!O.data.allowHeader&&e.i5U(7,8,null==O.data?null:O.data.obj,"exam")),e.R7$(2),e.Y8G("ngIf",0==(null==O.data?null:O.data.isOnLib)&&!(null!=O.data&&O.data.globalLadingPage)),e.R7$(2),e.SpI(" ",O.showExplanation?e.bMT(11,11,"lang_auto_an_giai_thich"):e.bMT(12,13,"lang_auto_xem_giai_thich")," "),e.R7$(7),e.Y8G("defaultHeight",70),e.R7$(),e.Y8G("ngIf",O.statusObj.loading),e.R7$(3),e.Y8G("ngIf",O.data.allowHeader&&!O.statusObj.loading),e.R7$(),e.Y8G("ngIf",null==O.data||null==O.data.obj?null:O.data.obj.examHeader),e.R7$(),e.Y8G("ngForOf",O.questionList)}}function ct(z,Z){if(1&z){const O=e.RV6();e.j41(0,"azt-export-excel-for-answersheet",46),e.bIt("exportDataDone",function(v){e.eBV(O);const L=e.XpG();return e.Njj(L.exportDataDone(v))}),e.k0s()}if(2&z){let O;const x=e.XpG();e.Y8G("startQuestionIndex",null!==(O=null==x.examObj?null:x.examObj.startQuestionIndex)&&void 0!==O?O:1)("obj",x.exportExcelData)}}let it=(()=>{var z;class Z extends _._{handlerCloseDialog(x){x&&this.dialogRef.close()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showAllExplanation(){this.showExplanation=!this.showExplanation}downloadExam(x,v){x&&this.data.obj&&this.sAztDialogService.open(et.T,{data:{transactionType:"export-docx",times:1,returnUrl:this.commonService.getCurrentUrlWithoutLocale()},hasBackdrop:!0}).afterClosed().subscribe(L=>{if("cancel"==L)return;if("upgrade"==L)return void this.dialogRef.close();const N=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"",Y=this.printAddInfo.templateType??0,rt={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??"",departmentName:this.printAddInfo?.departmentName??"",indetifyBox:this.printAddInfo?.indetifyBox??"",timeBox:this.printAddInfo?.timeBox??""};a.L.openLoadingEffect(`${N}...`),this.data.obj.hideGroupQuestion=0,this.exportSAztDocxService.downloadExam(v,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,rt,Y,void 0,void 0,void 0,!0).then(()=>{}).catch(_t=>{this.showErrorSnack(_t.message)})})}downloadExamAnswer(){this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(x=>{if(!x.success)return this.errorStatusObj(x.message??"");let v=x.data?.obj;v?.offlineMixQuestionObjs&&v.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(v))}))}exportDataDone(x){const v=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(x,v)}redirectToDownloadExamPdf(x){window.open(this.commonService.getLocalRouter(`/admin/testbank/export-exam-to-pdf/${this.examObj?.id}?isShowExplain=${x}`),"_blank")}getConfigExam(){const x=this.data?.globalLadingPage?this.documentConfigService.apiDocumentConfigGetGlobalExamConfigDataGet(this.examObj?.hashId??""):this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj?.hashId??"");this.waitDestroy(x.subscribe(v=>{if(!v.success)return this.errorStatusObj(v.message,!1);let L=0,N=0;this.questionList.forEach((Y,rt)=>{Y.labelIndex=rt,v.data?.resetQuestionIndex&&Y.groupInfo&&Y.groupInfo.groupId&&(L!=Y.groupInfo.groupId&&(L=Y.groupInfo.groupId,N=0),Y.labelIndex=N,N++)}),this.successStatusObj()}))}getData(x){this.initStatusObj();const v=this.data?.globalLadingPage?this.examService.apiExamGetGlobalQuestionsIdGet(x?.id??0):this.permissionService.hasViewPermission("exam",x)?this.examService.apiExamGetQuestionsIdGet(x?.id??0):void 0;if(!v)return this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay");v.subscribe(L=>{const N=this.commonService.castJsonToClassObjs(t.I,JSON.stringify(L.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(N.length),N.forEach(Y=>{Y.isRoleTeacher=!0}),this.cloneQuestionList=this.commonService.myClone(N),this.questionList=N,this.examObj=L.data?.examObj,this.getConfigExam()})}createNameExam(x,v){const L=this.examObj?.name??"";let N;switch(x){case"answersheet":N=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,L,"");break;case"answerexcel":N=this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,L,"");break;default:N=this.printAnswersheetService.exportFileNameOfExamOffline(0,L,"",void 0)}return v&&(N=this.commonService.replaceAll(N,"_","-")??""),N+("answersheet"===x?".pdf":"answerexcel"===x?".xlsx":".docx")}ngOnChanges(){this.data?.obj&&this.getData(this.data.obj)}ngOnInit(){super.ngOnInit(),this.data?.obj&&this.getData(this.data.obj)}constructor(x,v,L,N,Y,rt,_t,r,T){super(T,r),this.documentConfigService=x,this.shareFileFlutterService=v,this.permissionService=L,this.exportSAztDocxService=N,this.examService=Y,this.offlineExamExportService=rt,this.printAnswersheetService=_t,this.dialogRef=r,this.data=T,this.closeDialog=new e.bkB,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new q.e,this.printAddInfo={},this.showExplanation=!1,this.sAztDialogService=(0,e.WQX)(h.i)}}return(z=Z).\u0275fac=function(x){return new(x||z)(e.rXU(s.x_),e.rXU(D.R),e.rXU(d.p),e.rXU(m.c),e.rXU(y.R),e.rXU($.qG),e.rXU(R.Q),e.rXU(F.CP,8),e.rXU(F.Vh,8))},z.\u0275cmp=e.VBU({type:z,selectors:[["azt-preview-exam"]],outputs:{closeDialog:"closeDialog"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:29,vars:35,consts:[["menuDownload","matMenu"],[4,"ngIf"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[3,"checkAction","closeDialog","vipPackageType","classCSSCustom","isShowBadgeVip","isAction","trackingKey"],["name","file-check","size","16",3,"ngClass"],[1,"mr-3"],["name","file-text","size","16",3,"ngClass"],["azt-track-service","azt-preview-exam-ef7yEq6a3",1,"dropdown-item",3,"click"],["name","file-down","size","16",3,"ngClass"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet","size","16",3,"ngClass"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],["class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq","class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","cdkCopyToClipboard","click",4,"ngIf"],["azt-track-service","azt-preview-exam-WEwBr57UW",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"click"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x","size","18"],[1,"mt-3",3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],["class","box p-3 mb-3",4,"ngIf"],["style","display: block","class","mt-5",3,"imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","matMenuTriggerFor"],["name","download","size","18"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"click","matTooltip","cdkCopyToClipboard"],[1,"w-4","h-4","mr-2","flex-none"],["name","copy","size","18"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHtml"],[1,"mt-5",2,"display","block",3,"imgSrc"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain"],[3,"exportDataDone","startQuestionIndex","obj"]],template:function(x,v){if(1&x){const L=e.RV6();e.DNE(0,lt,25,15,"ng-container",1),e.nI1(1,"viewPermission"),e.j41(2,"mat-menu",null,0)(4,"div",2)(5,"ul",3)(6,"li")(7,"azt-check-vip-account",4),e.bIt("checkAction",function(Y){return e.eBV(L),e.Njj(v.downloadExam(Y,!1))})("closeDialog",function(Y){return e.eBV(L),e.Njj(v.handlerCloseDialog(Y))}),e.nrm(8,"lucide-icon",5),e.j41(9,"span",6),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()(),e.j41(12,"li")(13,"azt-check-vip-account",4),e.bIt("checkAction",function(Y){return e.eBV(L),e.Njj(v.downloadExam(Y,!0))})("closeDialog",function(Y){return e.eBV(L),e.Njj(v.handlerCloseDialog(Y))}),e.nrm(14,"lucide-icon",7),e.j41(15,"span",6),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()()(),e.j41(18,"li")(19,"a",8),e.bIt("click",function(){return e.eBV(L),e.Njj(v.redirectToDownloadExamPdf(0))}),e.nrm(20,"lucide-icon",9),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"li")(24,"a",10),e.bIt("click",function(){return e.eBV(L),e.Njj(v.downloadExamAnswer())}),e.nrm(25,"lucide-icon",11),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()()(),e.DNE(28,ct,1,2,"azt-export-excel-for-answersheet",12)}2&x&&(e.Y8G("ngIf",e.i5U(1,20,null==v.data?null:v.data.obj,"exam")||(null==v.data?null:v.data.globalLadingPage)),e.R7$(7),e.Y8G("vipPackageType","VIP_FOR_TEACHER")("classCSSCustom","dropdown-item cursor-pointer")("isShowBadgeVip",!v.isBusinessDomain)("isAction",!1)("trackingKey","DOWNLOAD_EXAM_DOCX_NO_ANSWER"),e.R7$(),e.Y8G("ngClass",e.lJ4(31,f)),e.R7$(2),e.SpI(" ",e.bMT(11,23,"lang_testbank_download_exam_in_docx")," "),e.R7$(3),e.Y8G("vipPackageType","VIP_FOR_TEACHER")("classCSSCustom","dropdown-item cursor-pointer")("isShowBadgeVip",!v.isBusinessDomain)("isAction",!1)("trackingKey","DOWNLOAD_EXAM_DOCX_WITH_ANSWER"),e.R7$(),e.Y8G("ngClass",e.lJ4(32,f)),e.R7$(2),e.SpI(" ",e.bMT(17,25,"lang_azt_download_exam_paper_with_detailed_answers_in_docx")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(33,f)),e.R7$(),e.SpI(" ",e.bMT(22,27,"lang_auto_tai_xuong_de_thi")+" PDF"," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(34,f)),e.R7$(),e.SpI(" ",e.bMT(27,29,"lang_testbank_download_exam_answer_in_excel")," "),e.R7$(2),e.Y8G("ngIf",null!=v.exportExcelData))},dependencies:[ot.U,nt.R,at.H,Q.a,b.F,V.O,o.MD,o.YU,o.Sq,o.bT,j.X1,S.iI,j.YN,K.wp,c.s,p.dF,F.tx,U.kk,U.Cp,M.oV,I.flO,I.WGl,g.L,K._y,K.FV,K.eL,B.Id,C.k],encapsulation:2}),Z})()},81300:(J,w,n)=>{n.d(w,{F:()=>d});var o=n(48891),e=n(26651),j=n(59640),F=n(89163),S=n(33887),I=n(54460),B=n(10936),c=n(65162),h=n(47348),_=n(21656),C=n(15343),t=n(70050),K=n(5502),g=n(36894),V=n(56562);const a=()=>({"mr-2":!0});function Q(m,y){if(1&m&&(o.j41(0,"div",10),o.nrm(1,"p",11),o.nI1(2,"mytranslate"),o.k0s()),2&m){const $=o.XpG();o.R7$(),o.Y8G("innerHTML",o.bMT(2,1,$.data.counterExport),o.npT)}}function q(m,y){if(1&m&&(o.j41(0,"div",10),o.nrm(1,"p",12),o.nI1(2,"mytranslate"),o.k0s()),2&m){const $=o.XpG();o.R7$(),o.Y8G("innerHTML",o.bMT(2,1,$.data.description),o.npT)}}let et=(()=>{var m;class y extends S._{handlerCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.sAztAzotaTrackingService.sendCustomEvent("VIP_CONFIRM_TO_BUY_VIP",[]),this.dialogRef.close(!0),this.commonService.myNavigationWithQueryString("/auth/vip-packages/teacherVip",`?backto=${encodeURIComponent(this.data.returnUrl)}&trackingKey=${this.data.trackingKey}`)}constructor(R,p,U){super(U,p),this.sAztAzotaTrackingService=R,this.dialogRef=p,this.data=U,this.sAztAzotaTrackingService.sendCustomEvent("VIP_SHOW_VIP_DIALOG",[])}}return(m=y).\u0275fac=function(R){return new(R||m)(o.rXU(V.M),o.rXU(F.CP,8),o.rXU(F.Vh,8))},m.\u0275cmp=o.VBU({type:m,selectors:[["azt-dialog-redirect-vip-package"]],standalone:!0,features:[o.Vt3,o.aNF],decls:19,vars:13,consts:[[1,"box","w-72","sm:w-80"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-lg","font-medium","mb-2"],[1,"badge-vip","inline-flex","items-center","mr-2",2,"height","25px"],["name","gem","size","12",3,"ngClass"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-redirect-vip-package-Hsr7Y1PGT",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-dialog-redirect-vip-package-D5AZ23WEpg",1,"btn","btn-primary",3,"click"],[1,"mt-3"],[1,"text-lg","font-medium",3,"innerHTML"],[1,"text-md",3,"innerHTML"]],template:function(R,p){1&R&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"div",4),o.nrm(5,"lucide-icon",5),o.EFF(6," VIP "),o.k0s(),o.j41(7,"span"),o.EFF(8),o.nI1(9,"mytranslate"),o.k0s()(),o.DNE(10,Q,3,3,"div",6)(11,q,3,3,"div",6),o.k0s()(),o.j41(12,"div",7)(13,"button",8),o.bIt("click",function(){return p.handlerCloseDialog()}),o.EFF(14),o.nI1(15,"mytranslate"),o.k0s(),o.j41(16,"button",9),o.bIt("click",function(){return p.confirmDialog()}),o.EFF(17),o.nI1(18,"mytranslate"),o.k0s()()()),2&R&&(o.R7$(5),o.Y8G("ngClass",o.lJ4(12,a)),o.R7$(3),o.JRh(o.bMT(9,6,p.data.title)),o.R7$(2),o.Y8G("ngIf",p.data.counterExport),o.R7$(),o.Y8G("ngIf",p.data.description),o.R7$(3),o.SpI(" ",o.bMT(15,8,p.data.titleBtnDestroy)," "),o.R7$(3),o.SpI(" ",o.bMT(18,10,"lang_azt_upgrade_now")," "))},dependencies:[I.MD,I.YU,I.bT,B.X1,c.iI,B.YN,h.wp,_.s,C.flO,C.WGl,t.L,K.Id,g.k],encapsulation:2}),y})();var ot=n(36484),at=n(46899);const nt=["*"],b=m=>({opacity:m}),s=()=>({"mr-2":!0});function D(m,y){1&m&&(o.j41(0,"div")(1,"div",2),o.nrm(2,"lucide-icon",3),o.EFF(3," VIP "),o.k0s()()),2&m&&(o.R7$(2),o.Y8G("ngClass",o.lJ4(1,s)))}let d=(()=>{var m;class y extends j.H{handlerAction(){if(this.isBusinessDomain)return this.checkAction.emit(!0);if(!this.isAction)return this.checkAction.emit(!0);if(this.vipAccountObj)return this.checkAction.emit(!0);const R={returnUrl:this.commonService.getCurrentUrlWithoutLocale(),title:"lang_azt_upgrade_to_vip_account",titleBtnDestroy:"lang_auto_huy",trackingKey:this.trackingKey};this.sAztDialogService.open(et,{data:R}).afterClosed().subscribe(U=>{this.closeDialog.emit(U)})}getData(){this.initStatusObj(),this.checkVipAccountService.getVipInfo("VIP_FOR_TEACHER"==this.vipPackageType?e.W5.VIPFORTEACHER:e.W5.VIPFORSTUDENT,!0,void 0).subscribe(R=>{if(!R.success)return this.errorStatusObj(R.message);this.vipAccountObj=R.data?.vipSubscriptionObj,this.successStatusObj()})}ngOnInit(){super.ngOnInit(),this.sAztUserService.isLogin()&&this.getData()}constructor(R,p){super(),this.sAztUserService=R,this.sAztDialogService=p,this.classCSSCustom="",this.isShowBadgeVip=!1,this.isAction=!1,this.checkAction=new o.bkB,this.closeDialog=new o.bkB}}return(m=y).\u0275fac=function(R){return new(R||m)(o.rXU(ot.R),o.rXU(at.i))},m.\u0275cmp=o.VBU({type:m,selectors:[["azt-check-vip-account"]],inputs:{classCSSCustom:"classCSSCustom",isShowBadgeVip:"isShowBadgeVip",isAction:"isAction",vipPackageType:"vipPackageType",trackingKey:"trackingKey"},outputs:{checkAction:"checkAction",closeDialog:"closeDialog"},standalone:!0,features:[o.Vt3,o.aNF],ngContentSelectors:nt,decls:3,vars:7,consts:[["azt-track-service","check-vip-account-o05GWccJtw",3,"click","ngStyle"],[4,"ngIf"],[1,"badge-vip","flex","items-center"],["name","gem","size","12",3,"ngClass"]],template:function(R,p){1&R&&(o.NAR(),o.j41(0,"div",0),o.bIt("click",function(){return p.handlerAction()}),o.SdG(1),o.DNE(2,D,4,2,"div",1),o.k0s()),2&R&&(o.ZvI("wrap-vip inline-flex items-center w-full ",p.classCSSCustom,""),o.Y8G("ngStyle",o.eq3(5,b,p.isBusinessDomain||!p.isAction||p.vipAccountObj?"1":"0.6")),o.R7$(2),o.Y8G("ngIf",!p.isBusinessDomain&&((null==p.vipAccountObj?null:p.vipAccountObj.isVipStudent)||(null==p.vipAccountObj?null:p.vipAccountObj.isVipTeacher))||p.isShowBadgeVip))},dependencies:[I.MD,I.YU,I.bT,I.B3,B.X1,c.iI,B.YN,_.s,C.flO,C.WGl,t.L,K.Id,g.k],encapsulation:2}),y})()}}]);