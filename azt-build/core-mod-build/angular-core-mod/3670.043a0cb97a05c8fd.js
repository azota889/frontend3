"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[3670],{93670:(F,C,s)=>{s.r(C),s.d(C,{PaymentModule:()=>pt});var p=s(54460),e=s(10936),E=s(89163),n=s(65162),g=s(69223),y=s(15343),h=s(13763),T=s(25571),b=s(21656),O=s(70050),S=s(7050),R=s(35143),A=s(43234),M=s(1133),t=s(48891),x=s(36484),B=s(39307);let D=(()=>{var a;class m{constructor(o,c){this.userService=o,this.redirectService=c}canActivate(o,c){return!(-1===c.url.indexOf("/return-order")&&!this.userService.isLogin())}canActivateChild(o,c){return this.canActivate(o,c)}canLoad(o){const c=`/${o.path}`;return!(-1===c.indexOf("/return-order")&&!this.userService.isLogin()&&(this.redirectService.redirectLoginByReturnUrl(c),1))}}return(a=m).\u0275fac=function(o){return new(o||a)(t.KVO(x.R),t.KVO(B.m))},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),m})();var j=s(89121),P=s(59640),u=function(a){return a.AZO_PACKAGE="AZO_PACKAGE",a.EXAM="EXAM",a.BUSINESS_PACKAGE="BUSINESS_PACKAGE",a.UPGRADE_PACKAGE="UPGRADE_PACKAGE",a.unknown="unknown",a.VIP_PACKAGE="VIP_PACKAGE",a}(u||{}),v=s(31418),i=s(18718),_=s(96451),l=s(40509),f=s(69715),d=s(47348);const k=(a,m)=>({"text-success":a,"text-danger":m});function G(a,m){if(1&a&&(t.j41(0,"div",8)(1,"p",9),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"p",10),t.EFF(5),t.k0s()()),2&a){const r=t.XpG(2);t.R7$(2),t.SpI("",t.bMT(3,2,"lang_payment_business_package_business_email"),":"),t.R7$(3),t.JRh(r.transactionBusiness.registerObj.email)}}function L(a,m){if(1&a&&(t.j41(0,"div",7)(1,"div",8)(2,"p",9),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"p",10),t.EFF(6),t.k0s()(),t.j41(7,"div",8)(8,"p",9),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"p",10),t.EFF(12),t.k0s()(),t.DNE(13,G,6,4,"div",13),t.j41(14,"div",14)(15,"p",9),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"p",10)(19,"a",15),t.EFF(20),t.k0s()()()()),2&a){const r=t.XpG();t.R7$(3),t.SpI("",t.bMT(4,8,"lang_payment_business_package_business_name"),":"),t.R7$(3),t.JRh(r.transactionBusiness.registerObj.businessName),t.R7$(3),t.SpI("",t.bMT(10,10,"lang_payment_business_package_business_phone"),":"),t.R7$(3),t.JRh(r.transactionBusiness.registerObj.phone),t.R7$(),t.Y8G("ngIf",r.transactionBusiness.registerObj.email),t.R7$(3),t.SpI("",t.bMT(17,12,"lang_payment_business_package_business_domain"),":"),t.R7$(3),t.Y8G("href","https://"+r.transactionBusiness.registerObj.domain+"/"+r.currentLanguage+"/auth/login?isFirstTime=1&access_token="+r.transactionBusiness.accessToken,t.B4B),t.R7$(),t.SpI(" https://",r.transactionBusiness.registerObj.domain," ")}}let U=(()=>{var a;class m extends P.H{ngOnInit(){this.vnp_TxnRef=String(this.commonService.getMyQueryParam("vnp_TxnRef")),this.vnp_Amount=Number(this.commonService.getMyQueryParam("vnp_Amount"))/100,this.vnp_ResponseCode=String(this.commonService.getMyQueryParam("vnp_ResponseCode")),"00"==this.vnp_ResponseCode&&(this.successTransaction=!0),this.vnp_TransactionNo=String(this.commonService.getMyQueryParam("vnp_TransactionNo")),this.typeTransaction=this.commonService.getMyQueryParam("vnp_BankCode")??"";var o=String(this.commonService.getMyQueryParam("vnp_PayDate")),c=new Date(Number(o.substring(0,4)),Number(o.substring(4,6))-1,Number(o.substring(6,8)),Number(o.substring(8,10)),Number(o.substring(10,12)),Number(o.substring(12,14)),0);this.vnp_Second=c.getTime(),super.ngOnInit()}constructor(){super(),this.productType=u.unknown,this.currentLanguage=this.commonService.getCurrentLang(),this.EAztPaymentPackageType=u,this.vnp_TxnRef="",this.vnp_Amount=0,this.vnp_ResponseCode="",this.vnp_TransactionNo="",this.successTransaction=!1,this.typeTransaction="",this.vnp_Second=0}}return(a=m).\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.VBU({type:a,selectors:[["app-vn-pay-transaction-box"]],inputs:{productType:"productType",transactionBusiness:"transactionBusiness"},features:[t.Vt3],decls:41,vars:40,consts:[[1,"intro-y","pt-3","px-3"],[1,"text-center","pb-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"mt-1","mb-2"],["strokeWidth","3",1,"w-12","h-12","flex-none",3,"name"],[1,"mt-2",2,"font-weight","700","font-size","18px",3,"ngClass"],[1,"text-center","mt-2","mb-2"],[1,"text-md","text-primary",2,"font-weight","450"],[1,"mb-2"],[1,"mt-2","pb-2","flex","justify-between","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-slate-600"],[1,"desc__text",2,"font-weight","450"],[1,"desc__text",2,"font-weight","450","text-transform","uppercase"],["class","mb-2",4,"ngIf"],["class","mt-2 pb-2 flex justify-between border-b border-slate-200/60 dark:border-darkmode-400",4,"ngIf"],[1,"mt-2","pb-2","flex","justify-between","flex-wrap","border-b","border-slate-200/60","dark:border-darkmode-400"],[2,"word-break","break-all",3,"href"]],template:function(o,c){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"lucide-icon",3),t.k0s(),t.j41(4,"h3",4),t.EFF(5),t.nI1(6,"mytranslate"),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",5)(9,"p",6),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",7)(13,"div",8)(14,"p",9),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.j41(17,"p",10),t.EFF(18),t.nI1(19,"number"),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div",8)(22,"p",9),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"p",11),t.EFF(26),t.k0s()(),t.j41(27,"div",8)(28,"p",9),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s(),t.j41(31,"p",10),t.EFF(32),t.k0s()(),t.j41(33,"div",8)(34,"p",9),t.EFF(35),t.nI1(36,"mytranslate"),t.k0s(),t.j41(37,"p",10),t.EFF(38),t.nI1(39,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()(),t.DNE(40,L,21,14,"div",12),t.k0s()),2&o&&(t.R7$(3),t.Aen("color:"+(c.successTransaction?"#10eb00":"#d21414")),t.FS9("name",c.successTransaction?"circle-check":"circle-x"),t.R7$(),t.Y8G("ngClass",t.l_i(37,k,c.successTransaction,!c.successTransaction)),t.R7$(),t.SpI(" ",c.successTransaction?t.bMT(6,17,"lang_payment_return_buying_success"):t.bMT(7,19,"lang_payment_return_buying_danger")," "),t.R7$(5),t.Lme("",t.bMT(11,21,"lang_payment_return_code"),": ",c.vnp_TxnRef,""),t.R7$(5),t.SpI("",t.bMT(16,23,"lang_payment_return_payment_number"),":"),t.R7$(3),t.Lme("",t.bMT(19,25,c.vnp_Amount)," ",t.bMT(20,27,"lang_auto_vnd_upper"),""),t.R7$(5),t.SpI("",t.bMT(24,29,"lang_payment_return_method_payment"),":"),t.R7$(3),t.JRh(c.typeTransaction),t.R7$(3),t.SpI("",t.bMT(30,31,"lang_payment_return_code_payment_vnpay"),":"),t.R7$(3),t.JRh(c.vnp_TransactionNo),t.R7$(3),t.SpI("",t.bMT(36,33,"lang_payment_return_time_pay"),":"),t.R7$(3),t.JRh(t.bMT(39,35,c.vnp_Second)),t.R7$(2),t.Y8G("ngIf",c.transactionBusiness&&c.productType===c.EAztPaymentPackageType.BUSINESS_PACKAGE))},dependencies:[p.YU,p.bT,y.WGl,p.QX,d.wp,d.bH],styles:[".payment-box[_ngcontent-%COMP%]{margin:20px auto auto;border:1px solid #d3d3d3;background-color:#fff;max-width:350px;border-radius:5px;align-items:center;flex-direction:column;padding:20px 0}.payment-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;float:left;padding:0 15px}.body__about[_ngcontent-%COMP%]{padding-top:20px;width:100%;border-top:1px solid #d3d3d3;justify-content:center}"]}),m})();var V=s(92401),N=s(46899);const z=a=>[a];function Y(a,m){if(1&a&&(t.qex(0),t.j41(1,"div",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"a",6),t.nI1(5,"navigationLocalize"),t.nI1(6,"navigationLocalizeForQueryString"),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.bVm()),2&a){const r=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,4,"lang_payment_return_anonymous_notice")),t.R7$(2),t.Y8G("routerLink",t.eq3(12,z,t.bMT(5,6,"/auth/login")))("queryParams",t.bMT(6,8,"?return_url=/"+r.currentLanguage+"/payment/convert-product/"+r.currentUserToken+"&backTo="+r.backTo+"&user_click=true")),t.R7$(3),t.SpI(" ",t.bMT(8,10,"lang_payment_return_login")," ")}}function w(a,m){if(1&a){const r=t.RV6();t.EFF(0," continue "),t.j41(1,"a",7),t.bIt("click",function(){t.eBV(r);const c=t.XpG(2);return t.Njj(c.redirectBackto())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&a&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_payment_return_continue_buy")," "))}function X(a,m){if(1&a&&(t.qex(0),t.DNE(1,Y,9,14,"ng-container",4)(2,w,4,3,"ng-template",null,0,t.C5r),t.bVm()),2&a){const r=t.sdS(3),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.isAnonymousRole)("ngIfElse",r)}}function K(a,m){if(1&a&&(t.j41(0,"div")(1,"a",8),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a){const r=t.XpG(2);t.R7$(),t.Y8G("href","https://"+r.transactionBusiness.registerObj.domain+"/"+r.currentLanguage+"/auth/login?isFirstTime=1&access_token="+r.transactionBusiness.accessToken,t.B4B),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_payment_business_start_join")," ")}}function W(a,m){if(1&a&&(t.j41(0,"a",9),t.nI1(1,"navigationLocalize"),t.nI1(2,"navigationLocalizeForQueryString"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()),2&a){const r=t.XpG(2);t.Y8G("routerLink",t.eq3(9,z,t.bMT(1,3,r.backTo)))("queryParams",t.bMT(2,5,r.backTo)),t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_payment_return_continue_buy")," ")}}function J(a,m){if(1&a&&(t.qex(0),t.DNE(1,K,4,4,"div",4)(2,W,5,11,"ng-template",null,1,t.C5r),t.bVm()),2&a){const r=t.sdS(3),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.successTransaction&&o.transactionBusiness)("ngIfElse",r)}}function Q(a,m){1&a&&(t.j41(0,"div")(1,"a",10),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()),2&a&&(t.R7$(),t.Y8G("routerLink",t.eq3(6,z,t.bMT(2,2,"/business/business-configs/0"))),t.R7$(2),t.SpI(" ",t.bMT(4,4,"lang_payment_return_continue_buy")," "))}function H(a,m){if(1&a&&(t.j41(0,"a",9),t.nI1(1,"navigationLocalize"),t.nI1(2,"navigationLocalizeForQueryString"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()),2&a){const r=t.XpG(2);t.Y8G("routerLink",t.eq3(9,z,t.bMT(1,3,r.backTo)))("queryParams",t.bMT(2,5,r.backTo)),t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_payment_return_continue_buy")," ")}}function Z(a,m){if(1&a&&(t.qex(0),t.DNE(1,Q,5,8,"div",4)(2,H,5,11,"ng-template",null,1,t.C5r),t.bVm()),2&a){const r=t.sdS(3),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.successTransaction)("ngIfElse",r)}}let q=(()=>{var a;class m extends P.H{ngOnInit(){super.ngOnInit(),this.isAnonymousRole=this.userService.isNotLoginOrIsAnonymous();let o=this.userService.getUserObj();this.currentUserToken=o.rememberToken??"","00"==String(this.commonService.getMyQueryParam("vnp_ResponseCode"))&&(this.successTransaction=!0)}redirectBackto(){let o=1==Number(this.commonService.getMyQueryParam("getInvoice")),c=Number(this.commonService.getMyQueryParam("vnp_TxnRef"));if(this.productType!=u.VIP_PACKAGE||!this.successTransaction)return this.commonService.myNavigation(this.backTo);this.sAztDialogService.open(V.V,{data:{askForInvoice:!o,idTransactionVNPay:c},restoreFocus:!1,width:"550px"}).afterClosed().subscribe($=>this.commonService.myNavigation(this.backTo))}constructor(o,c){super(),this.userService=o,this.sAztDialogService=c,this.backTo="",this.productType=u.unknown,this.isAnonymousRole=!1,this.EAztPaymentPackageType=u,this.successTransaction=!1,this.currentLanguage=this.commonService.getCurrentLang(),this.currentUserToken=""}}return(a=m).\u0275fac=function(o){return new(o||a)(t.rXU(x.R),t.rXU(N.i))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-payment-product-info-box"]],inputs:{backTo:"backTo",transactionBusiness:"transactionBusiness",productType:"productType"},features:[t.Vt3],decls:4,vars:3,consts:[["normalTransaction",""],["errorTransaction",""],[1,"mt-3","w-full","text-center"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"text-danger","font-medium","mb-3",2,"font-size","18px","line-height","30px"],[1,"btn","w-40","btn-primary","mx-auto",3,"routerLink","queryParams"],["azt-track-service","payment-return-Pyo6TbUnsBP",1,"btn","w-40","btn-primary","mx-auto",3,"click"],[1,"btn","w-60","btn-primary","mx-auto","block",3,"href"],["azt-track-service","payment-return-Pyo6TbUnsBP",1,"btn","w-40","btn-primary","mx-auto",3,"routerLink","queryParams"],[1,"btn","w-60","btn-primary","mx-auto","block",3,"routerLink"]],template:function(o,c){1&o&&(t.j41(0,"div",2),t.DNE(1,X,4,2,"ng-container",3)(2,J,4,2,"ng-container",3)(3,Z,4,2,"ng-container",3),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngIf",c.productType!=c.EAztPaymentPackageType.BUSINESS_PACKAGE&&c.productType!=c.EAztPaymentPackageType.UPGRADE_PACKAGE),t.R7$(),t.Y8G("ngIf",c.productType==c.EAztPaymentPackageType.BUSINESS_PACKAGE),t.R7$(),t.Y8G("ngIf",c.productType==c.EAztPaymentPackageType.UPGRADE_PACKAGE))},dependencies:[n.Wk,p.bT,d.F2,d.Ji,d.wp],styles:[".payment-box[_ngcontent-%COMP%]{margin:20px auto auto;border:1px solid #d3d3d3;background-color:#fff;max-width:350px;border-radius:5px;align-items:center;flex-direction:column;padding:20px 0}.payment-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;float:left;padding:0 15px}.body__about[_ngcontent-%COMP%]{padding-top:20px;width:100%;border-top:1px solid #d3d3d3;justify-content:center}"]}),m})();function tt(a,m){if(1&a&&(t.j41(0,"teacher-layout",4)(1,"div",5)(2,"div",6),t.eu8(3,7),t.k0s()()()),2&a){const r=t.XpG(),o=t.sdS(4);t.Y8G("headerBackToLink",r.backTo),t.R7$(3),t.Y8G("ngTemplateOutlet",o)}}function nt(a,m){if(1&a&&(t.j41(0,"student-layout",4)(1,"div",5)(2,"div",6),t.eu8(3,7),t.k0s()()()),2&a){const r=t.XpG(),o=t.sdS(4);t.Y8G("headerBackToLink",r.backTo),t.R7$(3),t.Y8G("ngTemplateOutlet",o)}}function et(a,m){if(1&a&&(t.j41(0,"auth-layout"),t.eu8(1,7),t.k0s()),2&a){t.XpG();const r=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function at(a,m){if(1&a&&t.nrm(0,"azt-loading-effect",9),2&a){const r=t.XpG(2);t.Y8G("currentStatusObj",r.statusObj)}}function ot(a,m){if(1&a&&t.nrm(0,"app-vn-pay-transaction-box",10)(1,"app-payment-product-info-box",11),2&a){const r=t.XpG(2);t.Y8G("productType",r.productType)("transactionBusiness",r.transactionBusiness),t.R7$(),t.Y8G("productType",r.productType)("transactionBusiness",r.transactionBusiness)("backTo",r.backTo)}}function rt(a,m){if(1&a&&t.DNE(0,at,1,1,"azt-loading-effect",8)(1,ot,2,5,"ng-template",null,1,t.C5r),2&a){const r=t.sdS(2),o=t.XpG();t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",r)}}let it=(()=>{var a;class m extends P.H{getTransactionBusinessInfo(){const o=Number(this.getMyQueryParam("vnp_TxnRef")),c=this.getMyQueryParam("azHash")??"";this.initStatusObj(),this.waitDestroy(this.productOrderService.apiProductOrderGetTransactionBusinessStatusGet(o,c).subscribe(I=>{1===I.success?(this.transactionBusiness=I.data,this.stopStatusObj()):this.errorStatusObj(I.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.currentRole="teacher"==this.commonService.getMyQueryParam("userRole")?"TEACHER":"STUDENT",this.currentRole=this.userService.isLogin()?this.currentRole:"NOT_LOGIN";let o=this.commonService.getMyQueryParam("backTo");this.backTo=o||("TEACHER"==this.currentRole?"/admin/dashboard":"/student/classroom/0");let c=this.commonService.getEnumTypeWithDefault(u,this.commonService.getMyQueryParam("productType")?.toUpperCase()??"",u.unknown);this.productType=c,this.productType==u.BUSINESS_PACKAGE&&this.getTransactionBusinessInfo(),this.commonService.translateMetaData({title:"lang_core_payment_return_title",description:"lang_core_payment_return_description",image:"lang_cms_test_image"})}constructor(o,c){super(),this.userService=o,this.productOrderService=c,this.currentRole="NOT_LOGIN",this.backTo="",this.productType=u.unknown}}return(a=m).\u0275fac=function(o){return new(o||a)(t.rXU(x.R),t.rXU(v.Hg))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-payment-return"]],features:[t.Vt3],decls:5,vars:3,consts:[["returnPaymentInfo",""],["doneLoading",""],[3,"headerBackToLink",4,"ngIf"],[4,"ngIf"],[3,"headerBackToLink"],[1,"container","mt-5"],[1,"box","mx-auto","pb-3",2,"max-width","500px"],[3,"ngTemplateOutlet"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"productType","transactionBusiness"],[3,"productType","transactionBusiness","backTo"]],template:function(o,c){1&o&&t.DNE(0,tt,4,2,"teacher-layout",2)(1,nt,4,2,"student-layout",2)(2,et,2,1,"auth-layout",3)(3,rt,3,2,"ng-template",null,0,t.C5r),2&o&&(t.Y8G("ngIf","TEACHER"==c.currentRole),t.R7$(),t.Y8G("ngIf","STUDENT"==c.currentRole),t.R7$(),t.Y8G("ngIf","NOT_LOGIN"==c.currentRole))},dependencies:[p.bT,p.T3,i.K,_.Q,l.K,f.j,U,q],encapsulation:2}),m})();var st=s(38945);function ct(a,m){if(1&a&&t.nrm(0,"azt-loading-effect",1),2&a){const r=t.XpG();t.Y8G("currentStatusObj",r.statusObj)}}const ut=[{path:"",component:j.z,canActivate:[D],children:[{path:"return-order",component:it},{path:"convert-product/:convert_order",component:(()=>{var a;class m extends P.H{convertProductToCurrentUser(){this.initStatusObj();let c={token:this.commonService.getMyParam(this.activeRoute,"convert_order")??""};this.waitDestroy(this.frontExamService.apiFrontExamMoveAnonymousTransactionsPost(c).subscribe(I=>{I.success||this.errorStatusObj(I.message,!0),this.stopStatusObj(),this.commonService.myNavigation(this.backTo)}))}ngOnInit(){super.ngOnInit();let o=this.commonService.getMyQueryParam("backTo");this.backTo=o||"/student/classroom/0",this.convertProductToCurrentUser()}constructor(o,c,I,$){super(),this.activeRoute=o,this.userService=c,this.frontExamService=I,this.productOrderService=$,this.backTo=""}}return(a=m).\u0275fac=function(o){return new(o||a)(t.rXU(n.nX),t.rXU(x.R),t.rXU(st.iB),t.rXU(v.Hg))},a.\u0275cmp=t.VBU({type:a,selectors:[["azt-convert-product-user"]],features:[t.Vt3],decls:1,vars:1,consts:[[3,"currentStatusObj",4,"ngIf"],[3,"currentStatusObj"]],template:function(o,c){1&o&&t.DNE(0,ct,1,1,"azt-loading-effect",0),2&o&&t.Y8G("ngIf",c.statusObj.loading)},dependencies:[p.bT,i.K],encapsulation:2}),m})()}]}];let mt=(()=>{var a;class m{}return(a=m).\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[n.iI.forChild(ut),n.iI,M.XE]}),m})(),pt=(()=>{var a;class m{}return(a=m).\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({providers:[{provide:g.vn,useValue:A.c.azt_tiny_mce_script_src}],imports:[n.iI,p.MD,b.s,g.sv,e.YN,e.X1,E.hM,O.L,h.Lk,T.xv,mt,R.Q,S.b,y.flO.pick(y.Ptg)]}),m})()},40509:(F,C,s)=>{s.d(C,{K:()=>P});var p=s(59640),e=s(48891),E=s(50589),n=s(65162),g=s(54460),y=s(61318),h=s(15343),T=s(19938),b=s(47348);const O=["*"],S=u=>[u],R=()=>({"mr-2":!0});function A(u,v){if(1&u&&(e.j41(0,"div",6),e.eu8(1,7),e.k0s()),2&u){e.XpG();const i=e.sdS(6);e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function M(u,v){if(1&u&&(e.j41(0,"div",6),e.eu8(1,7),e.k0s()),2&u){e.XpG();const i=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function t(u,v){1&u&&e.SdG(0)}function x(u,v){if(1&u){const i=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(i);const l=e.XpG(2);return e.Njj(l.switchModeUI("dark"))}),e.nrm(1,"lucide-icon",20),e.j41(2,"span",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&u&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,R)),e.R7$(2),e.JRh(e.bMT(4,2,"lang_auto_che_de_toi")))}function B(u,v){if(1&u){const i=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(i);const l=e.XpG(2);return e.Njj(l.switchModeUI("light"))}),e.nrm(1,"lucide-icon",23),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&u&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,R)),e.R7$(2),e.JRh(e.bMT(4,2,"lang_auto_che_de_sang")))}function D(u,v){if(1&u&&(e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11),e.nI1(4,"navigationLocalize"),e.nrm(5,"img",12),e.nI1(6,"getLinkLogo"),e.k0s()(),e.j41(7,"div",13),e.nrm(8,"azt-switch-language"),e.k0s(),e.j41(9,"div",14),e.DNE(10,x,5,5,"button",15)(11,B,5,5,"button",16),e.k0s()(),e.j41(12,"div",17)(13,"div")(14,"div",18),e.eu8(15,7),e.k0s()()()()),2&u){const i=e.XpG(),_=e.sdS(4);e.R7$(3),e.Y8G("routerLink",e.eq3(13,S,e.bMT(4,9,"/auth/login"))),e.R7$(2),e.Y8G("src",e.bMT(6,11,"bigLogo"),e.B4B),e.R7$(5),e.Y8G("ngIf","light"==i.modeUI),e.R7$(),e.Y8G("ngIf","dark"==i.modeUI),e.R7$(2),e.Aen("max-width:"+i.maxWidth),e.HbH(i.contentBoxClass+(i.removeBoxClass?"":" box mx-auto w-full")),e.R7$(2),e.Y8G("ngTemplateOutlet",_)}}function j(u,v){if(1&u&&(e.j41(0,"div",8)(1,"div",17)(2,"div")(3,"div",18),e.eu8(4,7),e.k0s()()()()),2&u){const i=e.XpG(),_=e.sdS(4);e.R7$(2),e.Aen("max-width:"+i.maxWidth),e.HbH(i.contentBoxClass+(i.removeBoxClass?"":" box mx-auto w-full")),e.R7$(2),e.Y8G("ngTemplateOutlet",_)}}let P=(()=>{var u;class v extends p.H{switchModeUI(_){let l=document.getElementById("azota-app-html");l&&(this.modeUI=_,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?(l.classList.remove("dark"),l.classList.add("light")):(l.classList.remove("light"),l.classList.add("dark")))}ngOnInit(){super.ngOnInit(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.stopStatusObj()}constructor(_){super(),this.browserStorageService=_,this.maxWidth="500px",this.contentBoxClass="p-5",this.removeBoxClass=!1,this.modeUI="",this.initStatusObj()}}return(u=v).\u0275fac=function(_){return new(_||u)(e.rXU(E.z))},u.\u0275cmp=e.VBU({type:u,selectors:[["auth-layout"]],inputs:{maxWidth:"maxWidth",contentBoxClass:"contentBoxClass",removeBoxClass:"removeBoxClass"},features:[e.Vt3],ngContentSelectors:O,decls:11,vars:2,consts:[["BodyContentTpl",""],["notEmbedViewTpl",""],["embedViewTpl",""],[1,"azt-body",2,"padding","0"],["class","flex",4,"ngIf"],[1,"fixed","left-0","bottom-0","p-5","pb-8","azt-hidden"],[1,"flex"],[3,"ngTemplateOutlet"],[1,"content","relative",2,"padding","0","border-radius","0"],[1,"top-bar","py-2","px-3",2,"height","auto","z-index","0","border","none"],[1,"mr-auto"],["azt-track-service","auth-layout-Il3suLG89",3,"routerLink"],["width","95px",3,"src"],[1,"mr-3"],[1,"mr-1"],["azt-track-service","auth-layout-JExDIjLZ0q","class","btn btn-transparent lg:text-slate-500",3,"click",4,"ngIf"],["azt-track-service","auth-layout-g8PYsmzs4T","class","btn btn-transparent lg:text-slate-500",3,"click",4,"ngIf"],[1,"p-5","flex","items-center","w-full","content-auth-layout","mt-10"],[1,"azt-content"],["azt-track-service","auth-layout-JExDIjLZ0q",1,"btn","btn-transparent","lg:text-slate-500",3,"click"],["name","moon","size","20",3,"ngClass"],[1,""],["azt-track-service","auth-layout-g8PYsmzs4T",1,"btn","btn-transparent","lg:text-slate-500",3,"click"],["name","sun","size","20",3,"ngClass"]],template:function(_,l){1&_&&(e.NAR(),e.j41(0,"div",3),e.DNE(1,A,2,1,"div",4)(2,M,2,1,"div",4),e.k0s(),e.DNE(3,t,1,0,"ng-template",null,0,e.C5r)(5,D,16,15,"ng-template",null,1,e.C5r)(7,j,5,5,"ng-template",null,2,e.C5r),e.j41(9,"div",5),e.nrm(10,"header-setting-color"),e.k0s()),2&_&&(e.R7$(),e.Y8G("ngIf",!l.isMobileWebView&&!l.statusObj.loading),e.R7$(),e.Y8G("ngIf",l.isMobileWebView&&!l.statusObj.loading))},dependencies:[n.Wk,g.YU,g.bT,g.T3,y.V,h.WGl,T.o,b.F2,b.wp,b.ph],encapsulation:2}),v})()},89121:(F,C,s)=>{s.d(C,{z:()=>n});var p=s(59640),e=s(48891),E=s(65162);let n=(()=>{var g;class y extends p.H{constructor(){super(...arguments),this.id="default-id"}}return(g=y).\u0275fac=(()=>{let h;return function(b){return(h||(h=e.xGo(g)))(b||g)}})(),g.\u0275cmp=e.VBU({type:g,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[e.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(T,b){1&T&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s()),2&T&&e.FS9("id",b.id)},dependencies:[E.n3],encapsulation:2}),y})()},92401:(F,C,s)=>{s.d(C,{V:()=>v});var p=s(10936),e=s(89163),E=s(33887),n=s(48891),g=s(26651),y=s(54460),h=s(15343),T=s(81587),b=s(47348);const O=()=>({"mr-2":!0});function S(i,_){1&i&&(n.qex(0),n.j41(1,"div")(2,"h2",7),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()(),n.bVm()),2&i&&(n.R7$(3),n.JRh(n.bMT(4,1,"lang_vip_bill_print_title_ask")))}function R(i,_){1&i&&(n.j41(0,"div",32),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}function A(i,_){1&i&&(n.j41(0,"div",32),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}function M(i,_){1&i&&(n.j41(0,"div",32),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}function t(i,_){1&i&&(n.j41(0,"span"),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_vui_long_nhap_email")," "))}function x(i,_){1&i&&(n.j41(0,"span"),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_email_phai_nhap_dung_dinh_dang")," "))}function B(i,_){if(1&i&&(n.j41(0,"div",32),n.DNE(1,t,3,3,"span",33)(2,x,3,3,"span",33),n.k0s()),2&i){const l=n.XpG(2);n.R7$(),n.Y8G("ngIf",l.form.controls.receiptEmail.errors.required),n.R7$(),n.Y8G("ngIf",l.form.controls.receiptEmail.errors.email||l.form.controls.receiptEmail.errors.pattern)}}function D(i,_){1&i&&(n.j41(0,"div",10)(1,"span",34),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s()()),2&i&&(n.R7$(2),n.JRh(n.bMT(3,1,"lang_vip_bill_print_notice")))}function j(i,_){if(1&i&&(n.j41(0,"div")(1,"h2",8),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s()(),n.j41(4,"form",9)(5,"div",10)(6,"label",11),n.EFF(7),n.nI1(8,"mytranslate"),n.k0s(),n.j41(9,"div",12)(10,"div",13)(11,"div",14)(12,"div",15),n.nrm(13,"input",16),n.k0s(),n.j41(14,"label",17),n.EFF(15),n.nI1(16,"mytranslate"),n.k0s()()(),n.j41(17,"div",13)(18,"div",14)(19,"div",15),n.nrm(20,"input",18),n.k0s(),n.j41(21,"label",19),n.EFF(22),n.nI1(23,"mytranslate"),n.k0s()()()()(),n.j41(24,"div",10)(25,"label",20),n.EFF(26),n.nI1(27,"mytranslate"),n.k0s(),n.nrm(28,"input",21),n.j41(29,"div",22),n.nrm(30,"lucide-icon",23),n.EFF(31),n.nI1(32,"mytranslate"),n.k0s(),n.DNE(33,R,3,3,"div",24),n.k0s(),n.j41(34,"div",10)(35,"label",25),n.EFF(36),n.nI1(37,"mytranslate"),n.k0s(),n.nrm(38,"input",26),n.DNE(39,A,3,3,"div",24),n.k0s(),n.j41(40,"div",10)(41,"label",27),n.EFF(42),n.nI1(43,"mytranslate"),n.k0s(),n.nrm(44,"input",28),n.DNE(45,M,3,3,"div",24),n.k0s(),n.j41(46,"div",10)(47,"label",29),n.EFF(48),n.nI1(49,"mytranslate"),n.k0s(),n.nrm(50,"input",30),n.DNE(51,B,3,2,"div",24),n.k0s()(),n.DNE(52,D,4,3,"div",31)),2&i){const l=n.XpG();n.R7$(2),n.JRh(n.bMT(3,18,"lang_vip_bill_print_title")),n.R7$(2),n.Y8G("formGroup",l.form),n.R7$(3),n.SpI(" ",n.bMT(8,20,"lang_auto_loai")," "),n.R7$(6),n.Y8G("value",1),n.R7$(2),n.SpI(" ",n.bMT(16,22,"lang_azt_organization")," "),n.R7$(5),n.Y8G("value",0),n.R7$(2),n.SpI(" ",n.bMT(23,24,"lang_azt_user")," "),n.R7$(4),n.SpI(" ",n.bMT(27,26,0==l.form.controls.objectiveType.value?"lang_auto_ho_va_ten":"lang_payment_business_infor_school_name")," "),n.R7$(4),n.Y8G("ngClass",n.lJ4(36,O)),n.R7$(),n.SpI(" ",n.bMT(32,28,"lang_vip_invoice_username_map_with_transaction_fullName")," "),n.R7$(2),n.Y8G("ngIf",l.form.controls.organization.dirty&&l.form.controls.organization.errors),n.R7$(3),n.SpI(" ",n.bMT(37,30,"lang_test_market_address")," "),n.R7$(3),n.Y8G("ngIf",l.form.controls.address.dirty&&l.form.controls.address.errors),n.R7$(3),n.SpI(" ",n.bMT(43,32,"lang_vip_bill_print_tax_code")," "),n.R7$(3),n.Y8G("ngIf",l.form.controls.taxCode.dirty&&l.form.controls.taxCode.errors),n.R7$(3),n.SpI(" ",n.bMT(49,34,"lang_auto_email")," "),n.R7$(3),n.Y8G("ngIf",l.form.controls.receiptEmail.dirty&&l.form.controls.receiptEmail.errors),n.R7$(),n.Y8G("ngIf",!l.data.invoiceData)}}function P(i,_){if(1&i){const l=n.RV6();n.qex(0),n.j41(1,"button",35),n.bIt("click",function(){n.eBV(l);const d=n.XpG();return n.Njj(d.btnCloseDialog())}),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.j41(4,"button",36),n.bIt("click",function(){n.eBV(l);const d=n.XpG();return n.Njj(d.askForInvoice=!1)}),n.EFF(5),n.nI1(6,"mytranslate"),n.k0s(),n.bVm()}2&i&&(n.R7$(2),n.SpI(" ",n.bMT(3,2,"lang_auto_khong")," "),n.R7$(3),n.SpI(" ",n.bMT(6,4,"lang_auto_co")," "))}function u(i,_){if(1&i){const l=n.RV6();n.j41(0,"button",35),n.bIt("click",function(){n.eBV(l);const d=n.XpG();return n.Njj(d.btnCloseDialog())}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s(),n.j41(3,"button",37),n.bIt("click",function(){n.eBV(l);const d=n.XpG();return n.Njj(d.saveData())}),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s()}if(2&i){const l=n.XpG();n.R7$(),n.SpI(" ",n.bMT(2,3,"lang_auto_huy")," "),n.R7$(2),n.Y8G("disabled",l.statusObj.loading||l.form.invalid),n.R7$(),n.SpI(" ",n.bMT(5,5,"lang_button_send")," ")}}let v=(()=>{var i;class _ extends E._{btnCloseDialog(){this.dialogRef.close(!1)}saveData(){this.initStatusObj();let f={objectId:this.data.invoiceData?.objectId??this.data.invoiceData?.userId??0,objectType:this.form.getRawValue().objectiveType?"corporate":"personal",organization:this.form.getRawValue().organization,address:this.form.getRawValue().address,taxCode:this.form.getRawValue().taxCode,receiptEmail:this.form.getRawValue().receiptEmail,sendInvoice:!0,transactionProductId:this.data.idTransactionVNPay};this.waitDestroy(this.data.onUpdate?this.vipInvoiceService.apiVipInvoiceUpdateVipInvoicePost(f).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_auto_luu_thanh_cong",!0),this.dialogRef.close(!0)}):this.vipInvoiceService.apiVipInvoiceUpdateMyInvoicePost(f).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_cms_send_request_success",!0),this.dialogRef.close(!0)}))}constructor(f,d,k){super(k,d),this.vipInvoiceService=f,this.dialogRef=d,this.data=k,this.askForInvoice=!1,this.form=new p.gE({objectiveType:new p.MJ({value:"personal"==this.data.invoiceData?.objectType?0:1,disabled:!1},{nonNullable:!0,validators:[p.k0.required]}),organization:new p.MJ({value:this.data.invoiceData?.organization??"",disabled:!1},{nonNullable:!0,validators:[p.k0.required]}),address:new p.MJ({value:this.data.invoiceData?.address??"",disabled:!1},{nonNullable:!0,validators:[p.k0.required]}),taxCode:new p.MJ({value:this.data.invoiceData?.taxCode??"",disabled:!1},{nonNullable:!0,validators:[p.k0.required]}),receiptEmail:new p.MJ({value:this.data.invoiceData?.receiptEmail??"",disabled:!1},{nonNullable:!0,validators:[p.k0.required,p.k0.email,p.k0.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)]})}),this.askForInvoice=this.data.askForInvoice}}return(i=_).\u0275fac=function(f){return new(f||i)(n.rXU(g.Gl),n.rXU(e.CP,8),n.rXU(e.Vh,8))},i.\u0275cmp=n.VBU({type:i,selectors:[["azt-dialog-vip-print-bill"]],features:[n.Vt3],decls:10,vars:4,consts:[["showForm",""],["showFormBtn",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"px-5","py-3"],[4,"ngIf","ngIfElse"],[1,"p-3","text-right"],[1,"font-bold","text-md","mt-1","mx-5"],[1,"intro-x","font-bold","text-xl","mt-1","mx-5"],[1,"intro-y",3,"formGroup"],[1,"mt-2"],[1,"form-label"],[1,"grid","grid-cols-12","box","border","border-slate-200","px-5","py-2"],[1,"col-span-6"],[1,"flex","items-center"],[1,"form-check","mr-2"],["id","organizationSelect","formControlName","objectiveType","type","radio",1,"form-check-input","ml-2",3,"value"],["for","organizationSelect",1,"cursor-pointer"],["id","userSelect","formControlName","objectiveType","type","radio",1,"form-check-input","ml-2",3,"value"],["for","userSelect",1,"cursor-pointer"],["for","organizationName",1,"form-label"],["type","text","id","organizationName","formControlName","organization",1,"form-control"],[1,"text-xs","text-slate-400","mt-1"],["name","info","size","18",3,"ngClass"],["class","text-xs text-danger mt-1",4,"ngIf"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control"],["for","taxCode",1,"form-label"],["type","text","id","taxCode","formControlName","taxCode",1,"form-control"],["for","receiptEmail",1,"form-label"],["type","text","id","receiptEmail","formControlName","receiptEmail",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[4,"ngIf"],[1,"text-danger","text-xs"],[1,"btn","w-24","btn-secondary","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"]],template:function(f,d){if(1&f&&(n.j41(0,"div",2)(1,"div",3)(2,"div",4),n.DNE(3,S,5,3,"ng-container",5)(4,j,53,37,"ng-template",null,0,n.C5r),n.k0s()(),n.j41(6,"div",6),n.DNE(7,P,7,6,"ng-container",5)(8,u,6,7,"ng-template",null,1,n.C5r),n.k0s()()),2&f){const k=n.sdS(5),G=n.sdS(9);n.R7$(3),n.Y8G("ngIf",d.askForInvoice)("ngIfElse",k),n.R7$(4),n.Y8G("ngIf",d.askForInvoice)("ngIfElse",G)}},dependencies:[y.YU,y.bT,p.qT,p.me,p.Fm,p.BC,p.cb,p.j4,p.JD,h.WGl,T.t,b.wp],encapsulation:2}),_})()}}]);