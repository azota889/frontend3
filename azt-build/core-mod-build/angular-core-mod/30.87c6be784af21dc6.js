(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[30],{77030:(Ut,_e,A)=>{"use strict";A.r(_e),A.d(_e,{TestFrontRoutingModule:()=>dj});var L=A(32108),ge=A(74341),Ae=A(68135),v=A(60177),g=A(89417),F=A(8516),de=A(84572),Y=A(72093),ye=A(57258),z=A(89819),H=A(98697),Z=A(47218),ae=A(4100),J=A(36876),ee=A(95506),ie=A(29097),ke=A(44424),U=A(11782),q=A(83409),e=A(93953),Ce=A(42488),Le=A(3679);let _s=(()=>{var i;class n{isInIframe(){try{return window.self!==window.top}catch{return!0}}sendMessageToParentIframe(s){try{window.parent.postMessage(s,"*")}catch{}}sendMessageToIFrame(s,o){const a=document.getElementById(s),r=a?a.contentWindow:null;r?.postMessage(o,"*")}constructor(s){this.commonService=s}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var ds=A(62596),vt=A(14823);const cn=i=>({active:i}),$i=i=>({clickable:i}),Zr=i=>({"truncate-bread":i});function ta(i,n){if(1&i&&(e.j41(0,"student-layout",5),e.eu8(1,6),e.k0s()),2&i){const t=e.XpG(),s=e.sdS(3);e.Y8G("headerBackToLink",t.backToLink),e.R7$(),e.Y8G("ngTemplateOutlet",s)}}function Qi(i,n){if(1&i&&(e.j41(0,"div",7),e.eu8(1,6),e.k0s()),2&i){e.XpG();const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function na(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",9),2&i){const t=e.XpG(2);e.Y8G("currentStatusObj",t.statusObj)}}function sa(i,n){1&i&&(e.j41(0,"h3",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_danh_sach_de_thi")," "))}function ia(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t.name)," ")}}function oa(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function aa(i,n){if(1&i){const t=e.RV6();e.j41(0,"li",23)(1,"a",24),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.goBackParent(o.id?o.id:0))}),e.j41(2,"span",25,2),e.nI1(4,"mytranslate"),e.DNE(5,ia,3,3,"span",26)(6,oa,2,1,"span",26),e.k0s()()()}if(2&i){const t=n.$implicit,s=e.sdS(3),o=e.XpG(3);e.Y8G("ngClass",e.eq3(10,cn,t.id==o.categoryId)),e.R7$(),e.Y8G("ngClass",e.eq3(12,$i,t.id!=o.categoryId)),e.R7$(),e.FS9("matTooltip",e.bMT(4,8,t.name)),e.Y8G("ngClass",e.eq3(14,Zr,t.id!=o.categoryId))("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.R7$(3),e.Y8G("ngIf",-1==t.id),e.R7$(),e.Y8G("ngIf",-1!=t.id)}}function ra(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",27),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.cateDetail(o))}),e.j41(1,"div",28)(2,"div",29),e.nrm(3,"azt-svg-icon",30),e.k0s(),e.j41(4,"div",31,2),e.EFF(6),e.k0s()()()}if(2&i){const t=n.$implicit,s=e.sdS(5);e.R7$(4),e.FS9("matTooltip",t.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.R7$(2),e.SpI(" ",t.name," ")}}function Se(i,n){if(1&i&&(e.j41(0,"div",42)(1,"span",43),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"span"),e.EFF(5),e.k0s()()()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_diem_cua_ban"),": "),e.R7$(3),e.JRh(t.mark)}}function Vn(i,n){1&i&&(e.j41(0,"div",42),e.nrm(1,"div",44),e.k0s())}function el(i,n){if(1&i){const t=e.RV6();e.j41(0,"a",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.redirectToExamDetail(o.hashId?o.hashId:""))}),e.j41(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",29),e.nrm(5,"azt-svg-icon",39),e.k0s(),e.j41(6,"div",31,2),e.EFF(8),e.k0s(),e.j41(9,"div",40)(10,"span"),e.EFF(11),e.k0s(),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Se,6,4,"div",41)(15,Vn,2,0,"div",41),e.k0s()()()()}if(2&i){const t=e.sdS(7),s=e.XpG().$implicit,o=e.XpG(3);e.FS9("target",o.target),e.R7$(5),e.Y8G("size",80),e.R7$(),e.FS9("matTooltip",s.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.R7$(2),e.SpI(" ",s.name," "),e.R7$(3),e.JRh(s.attended),e.R7$(),e.SpI(" ",e.bMT(13,10,"lang_auto_luot_lam_de")," "),e.R7$(2),e.Y8G("ngIf",null!=s.mark),e.R7$(),e.Y8G("ngIf",null==s.mark)}}function ct(i,n){if(1&i&&(e.j41(0,"div",42)(1,"span",43),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"span"),e.EFF(5),e.k0s()()()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_diem_cua_ban"),": "),e.R7$(3),e.JRh(t.mark)}}function tl(i,n){if(1&i&&(e.j41(0,"a",45)(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",29),e.nrm(5,"azt-svg-icon",39),e.k0s(),e.j41(6,"div",31,2),e.EFF(8),e.k0s(),e.j41(9,"div",40)(10,"span"),e.EFF(11),e.k0s(),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,ct,6,4,"div",41),e.k0s()()()()),2&i){const t=e.sdS(7),s=e.XpG().$implicit,o=e.XpG(3);e.FS9("target",o.target),e.Y8G("href","/de-thi/"+s.hashId,e.B4B),e.R7$(5),e.Y8G("size",60),e.R7$(),e.FS9("matTooltip",s.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.R7$(2),e.SpI(" ",s.name," "),e.R7$(3),e.JRh(s.attended),e.R7$(),e.SpI(" ",e.bMT(13,10,"lang_auto_luot_lam_de")," "),e.R7$(2),e.Y8G("ngIf",null!=s.mark)}}function nl(i,n){if(1&i&&(e.j41(0,"div",32),e.DNE(1,el,16,12,"a",33)(2,tl,15,12,"a",34),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf","_blank"!=t.target),e.R7$(),e.Y8G("ngIf","_blank"==t.target)}}function la(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",10),e.DNE(1,sa,3,3,"h3",11),e.j41(2,"div",12)(3,"ol",13)(4,"li",14)(5,"a",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.backToAllCate())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,aa,7,16,"li",16),e.k0s()(),e.j41(9,"div",17),e.DNE(10,ra,7,4,"div",18)(11,nl,3,2,"div",19),e.k0s(),e.j41(12,"div",20)(13,"azt-paging",21),e.bIt("goToPaginationPage",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.goToPage(o))}),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.isInIframe),e.R7$(5),e.SpI(" ",e.bMT(7,6,"lang_auto_tat_ca")," "),e.R7$(2),e.Y8G("ngForOf",t.listBreadcrumb),e.R7$(2),e.Y8G("ngForOf",t.cateObjs),e.R7$(),e.Y8G("ngForOf",t.examObjs),e.R7$(2),e.Y8G("pageObj",t.pageObj)}}function sl(i,n){if(1&i&&e.DNE(0,na,1,1,"azt-loading-effect",8)(1,la,14,8,"ng-template",null,1,e.C5r),2&i){const t=e.sdS(2),s=e.XpG();e.Y8G("ngIf",s.statusObj.loading)("ngIfElse",t)}}let nn=(()=>{var i;class n extends Z.H{getListParentCate(){this.waitDestroy(this.frontExamCategoryService.apiFrontExamCategoryGetBreadcrumbsGet(this.tenantId,this.categoryId).subscribe(s=>{1==s.success?this.listBreadcrumb=s.data?.objs??new Array:this.errorStatusObj(s.message??"",!0)}))}getData(){this.backToLink=0!=this.categoryId?"/test/category/"+this.tenantId+"/0/"+this.pageObj.page:"/student/classroom/0";var s=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.pageObj.setPageNumber(s>0?s:1),this.initStatusObj(),this.waitDestroy(this.frontExamPageService.apiFrontExamPageGetObjsGet(this.tenantId,this.categoryId>0?this.categoryId:0,this.pageObj.page).subscribe(o=>{1==o.success?(this.cateObjs=o.data?.categoryObjs??new Array,this.examObjs=o.data?.examObjs??new Array,this.totalExam=o.data?.totalExam??0,this.pageObj.setTotalPages(this.totalExam),this.getListParentCate(),this.successStatusObj(),setTimeout(()=>{this.checkHeight()},0)):this.errorStatusObj(o.message??"",!0)}))}goToPage(s){this.commonService.myNavigation("/test/category/"+this.tenantId+"/"+this.categoryId+"/"+s)}backToAllCate(){this.commonService.myNavigation("/test/category/"+this.tenantId+"/0/1")}cateDetail(s){this.commonService.myNavigation("/test/category/"+this.tenantId+"/"+s.id+"/1")}goBackParent(s){this.commonService.myNavigation("/test/category/"+this.tenantId+"/"+s+"/1")}redirectToExamDetail(s){this.commonService.myNavigationWithQueryString(`/de-thi/${s}`,"?backto="+encodeURIComponent(this.paramBackToLink))}resizeHeight(){var s=document.body,o=document.documentElement,a=Math.max(s.scrollHeight,s.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);this.contentHeight=a,this.iframeService.sendMessageToParentIframe({height:this.contentHeight})}checkHeight(){var s=document.body,o=document.documentElement,a=Math.max(s.scrollHeight,s.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);this.contentHeight=a,this.iframeService.sendMessageToParentIframe({height:this.contentHeight})}changeLogin(){this.iframeService.sendMessageToParentIframe({changeLogin:!0})}ngOnInit(){super.ngOnInit(),this.isInIframe=this.iframeService.isInIframe(),this.isInIframe&&(this.target="_blank"),this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.tenantId=Number(this.commonService.getMyParam(this.activeRoute,"tenant_id"));let s=this.commonService.getMyParam(this.activeRoute,"page");this.paramBackToLink=`/test/category/${this.tenantId}/${this.categoryId}/${s}`,this.getData(),this.userLoginStateService.loginMessage.subscribe(o=>this.changeLogin()),this.commonService.translateMetaData({title:"lang_auto_danh_sach_de_thi",description:"lang_auto_danh_sach_de_thi"})}))}constructor(s,o,a,r,l){super(),this.activeRoute=s,this.frontExamCategoryService=o,this.frontExamPageService=a,this.iframeService=r,this.userLoginStateService=l,this.totalExam=0,this.tenantId=1,this.cateObjs=[],this.examObjs=[],this.listBreadcrumb=[],this.isInIframe=!1,this.target="",this.contentHeight=0,this.categoryId=0,this.backToLink="",this.paramBackToLink="",this.pageObj=new ee.d(18)}ngOnDestroy(){super.ngOnDestroy()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(L.nX),e.rXU(Ce.EC),e.rXU(Ce.zW),e.rXU(_s),e.rXU(ds.X))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-student-index"]],hostBindings:function(s,o){1&s&&e.bIt("resize",function(r){return o.resizeHeight(r)},!1,e.tSv)},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["categoryTemplate",""],["doneLoading",""],["c","isDisabled"],[3,"headerBackToLink",4,"ngIf"],["class","in-iframe",4,"ngIf"],[3,"headerBackToLink"],[3,"ngTemplateOutlet"],[1,"in-iframe"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5","mx-auto",2,"max-width","1200px"],["class","text-md uppercase font-medium",4,"ngIf"],[1,"box","p-3","mt-5"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","category--SCvgQNgc",3,"click"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","gap-3","sm:gap-6","mt-5"],["azt-track-service","category-P9OVEFAeM7","class","col-span-6 sm:col-span-4 md:col-span-4 2xl:col-span-3",3,"click",4,"ngFor","ngForOf"],["class","col-span-6 sm:col-span-4 md:col-span-4 2xl:col-span-3 cursor-pointer",4,"ngFor","ngForOf"],[1,"mt-3","p-2"],[3,"goToPaginationPage","pageObj"],[1,"text-md","uppercase","font-medium"],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","category-4ZVvjZOwmm",3,"click","ngClass"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],[4,"ngIf"],["azt-track-service","category-P9OVEFAeM7",1,"col-span-6","sm:col-span-4","md:col-span-4","2xl:col-span-3",3,"click"],[1,"file","box","rounded-md","px-5","pt-8","pb-5","px-3","sm:px-5","relative","zoom-in","h-full"],[1,"w-3/5","mx-auto"],["type","folder",1,"w-full","h-full"],[1,"block","font-medium","mt-4","text-center","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"col-span-6","sm:col-span-4","md:col-span-4","2xl:col-span-3","cursor-pointer"],["azt-track-service","category-36xAyNdE6R","class","flex h-full",3,"target","click",4,"ngIf"],["azt-track-service","category-QMZDKTOTgR","class","flex h-full",3,"href","target",4,"ngIf"],["azt-track-service","category-36xAyNdE6R",1,"flex","h-full",3,"click","target"],[1,"file","box","rounded-md","px-5","pt-8","pb-5","px-3","sm:px-5","relative","zoom-in","w-full"],[1,"box-title","text-center"],[1,"test","p-2","pl-3","pr-3"],["type","file",3,"size"],[1,"text-slate-500","text-xs","text-center","mt-0.5"],["class","mt-0.5",4,"ngIf"],[1,"mt-0.5"],[1,"text-center","font-medium"],[2,"height","16px"],["azt-track-service","category-QMZDKTOTgR",1,"flex","h-full",3,"href","target"]],template:function(s,o){1&s&&e.DNE(0,ta,2,2,"student-layout",3)(1,Qi,2,1,"div",4)(2,sl,3,2,"ng-template",null,0,e.C5r),2&s&&(e.Y8G("ngIf",!o.isInIframe),e.R7$(),e.Y8G("ngIf",o.isInIframe))},dependencies:[ye.f,ae.j,ie.K,ke.m,J.q,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();var In=A(77773),wt=A(18068),ca=A(85740),mn=A(57400);const Ln=()=>({"mr-2":!0}),ua=i=>[i],_a=(i,n)=>({backto:i,capacity:n}),qi=()=>({"ml-2":!0});function da(i,n){1&i&&e.nrm(0,"azt-loading-ui",6)}function ma(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",3)(1,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.getExamHistoryByHashId(!0))}),e.DNE(2,da,1,0,"azt-loading-ui",5),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_exam_detail_show_exam_history")," ")}}function Yi(i,n){1&i&&(e.j41(0,"h3",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_exam_detail_no_exam_history")," "))}function il(i,n){1&i&&(e.j41(0,"h3",11),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_lich_su_lam_bai_cua_ban")," "))}function ol(i,n){if(1&i&&(e.j41(0,"span",30),e.nrm(1,"azt-check-mark",31),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("mark",t.mark)}}function al(i,n){if(1&i&&(e.qex(0),e.j41(1,"span",29),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,ol,2,1,"span",28),e.bVm()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_diem_cua_ban"),":\xa0"),e.R7$(2),e.Y8G("ngIf",null!=t.mark)}}function rl(i,n){1&i&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_trac_nghiem_cua_ban"),":\xa0"))}function ms(i,n){1&i&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":\xa0"))}function ll(i,n){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI(" ",t.mark," ")}}function cl(i,n){if(1&i&&(e.qex(0),e.DNE(1,rl,3,3,"span",32)(2,ms,3,3,"span",32)(3,ll,2,1,"span",28),e.bVm()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",null==t.essayMark),e.R7$(),e.Y8G("ngIf",null!=t.essayMark),e.R7$(),e.Y8G("ngIf",null!=t.mark)}}function ul(i,n){1&i&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":\xa0"))}function Ui(i,n){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI(" ",t.mark," ")}}function M(i,n){1&i&&(e.j41(0,"span",34),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_diem")," "))}function B(i,n){if(1&i&&(e.qex(0),e.DNE(1,ul,3,3,"span",32)(2,Ui,2,1,"span",28)(3,M,3,3,"span",33),e.bVm()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",null!=t.essayMark),e.R7$(),e.Y8G("ngIf",null!=t.mark&&null!=t.essayMark),e.R7$(),e.Y8G("ngIf",null==t.essayMark)}}function K(i,n){1&i&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_diem")," "))}function oe(i,n){if(1&i&&(e.j41(0,"div",27),e.DNE(1,al,5,4,"ng-container",2),e.nI1(2,"isOnlyTrueFalse"),e.DNE(3,cl,4,3,"ng-container",2),e.nI1(4,"isMixTrueFalseAndEssay"),e.DNE(5,B,4,3,"ng-container",2),e.nI1(6,"isOnlyEssay"),e.DNE(7,K,3,3,"span",28),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",e.bMT(2,4,s.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,6,s.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,8,s.examObj)),e.R7$(2),e.Y8G("ngIf",null==t.mark)}}function xe(i,n){1&i&&(e.j41(0,"div",27)(1,"span",29),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"span",30),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_diem_cua_ban"),":\xa0"),e.R7$(3),e.SpI(" ",e.bMT(6,4,"lang_auto_chua_duoc_xem_diem")," "))}function ut(i,n){if(1&i&&(e.j41(0,"div",20)(1,"p",17),e.nrm(2,"lucide-icon",35),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",36),e.EFF(6),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("ngClass",e.lJ4(5,Ln)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_so_luong_dung")," "),e.R7$(3),e.SpI(" ",t.rightAnswer," ")}}function ft(i,n){if(1&i&&(e.j41(0,"button",37),e.nI1(1,"navigationLocalize"),e.nI1(2,"isCapacityExam"),e.EFF(3),e.nI1(4,"mytranslate"),e.nrm(5,"lucide-icon",38),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG(3);e.Y8G("routerLink",e.eq3(10,ua,e.bMT(1,4,"/test/answer-test/"+s.curTenantId+"/"+(null!=s.curCategoryId?s.curCategoryId:0)+"/"+s.hashId+"/"+t.id)))("queryParams",e.l_i(12,_a,s.backToLink,e.bMT(2,6,s.examObj)?"1":"0")),e.R7$(3),e.SpI(" ",e.bMT(4,8,"lang_auto_xem_chi_tiet_bai_lam")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(15,qi))}}function Re(i,n){1&i&&(e.j41(0,"button",39),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.Y8G("disabled",!0),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_chua_duoc_xem_ket_qua")," "))}function ue(i,n){if(1&i&&(e.j41(0,"div",13),e.DNE(1,oe,8,10,"div",14)(2,xe,7,6,"div",14),e.j41(3,"div",15)(4,"div",16)(5,"p",17),e.nrm(6,"lucide-icon",18),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"p",19),e.EFF(10),e.k0s()(),e.j41(11,"div",20)(12,"p",17),e.nrm(13,"lucide-icon",21),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p",19),e.EFF(17),e.nI1(18,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(19,ut,7,6,"div",22),e.j41(20,"div",20)(21,"p",17),e.nrm(22,"lucide-icon",23),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"p",19),e.EFF(26),e.k0s()()(),e.j41(27,"div",24),e.DNE(28,ft,6,16,"button",25)(29,Re,3,4,"button",26),e.k0s()()),2&i){const t=n.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",2!=s.examObj.whenShowResult),e.R7$(),e.Y8G("ngIf",2==s.examObj.whenShowResult),e.R7$(4),e.Y8G("ngClass",e.lJ4(22,Ln)),e.R7$(),e.SpI(" ",e.bMT(8,14,"lang_auto_thoi_gian_lam_bai"),":\xa0 "),e.R7$(3),e.SpI(" ",s.calculateTime(t.startedTest,t.createdAt)," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(23,Ln)),e.R7$(),e.SpI(" ",e.bMT(15,16,"lang_auto_thoi_gian_nop_bai"),":\xa0 "),e.R7$(3),e.SpI(" ",e.bMT(18,18,t.createdAt)," "),e.R7$(2),e.Y8G("ngIf",null!=t.rightAnswer&&2!=s.examObj.whenShowResult),e.R7$(3),e.Y8G("ngClass",e.lJ4(24,Ln)),e.R7$(),e.SpI(" ",e.bMT(24,20,"lang_auto_so_cau_hoi")," "),e.R7$(3),e.SpI(" ",t.totalQuestion," "),e.R7$(2),e.Y8G("ngIf",!1!==s.examObj.allowStudentView),e.R7$(),e.Y8G("ngIf",!1===s.examObj.allowStudentView)}}function pe(i,n){if(1&i&&(e.qex(0),e.DNE(1,ue,30,25,"div",12),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.historyObjs)}}function he(i,n){1&i&&e.nrm(0,"azt-loading-ui",44)}function Te(i,n){1&i&&e.nrm(0,"lucide-icon",45),2&i&&e.Y8G("ngClass",e.lJ4(1,qi))}function Fe(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",40)(1,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.pagingData())}),e.EFF(2),e.nI1(3,"mytranslate"),e.DNE(4,he,1,0,"azt-loading-ui",42)(5,Te,1,2,"lucide-icon",43),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_xem_them")," "),e.R7$(2),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.Y8G("ngIf",!t.statusObj.loading)}}function We(i,n){if(1&i&&(e.qex(0),e.DNE(1,Yi,3,3,"h3",7)(2,il,3,3,"h3",8)(3,pe,2,1,"ng-container",2)(4,Fe,6,5,"div",9),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.historyObjs.length),e.R7$(),e.Y8G("ngIf",t.historyObjs.length>0),e.R7$(),e.Y8G("ngIf",t.examObj&&t.historyObjs.length>0),e.R7$(),e.Y8G("ngIf",!t.disableBtn&&t.initDataCalled)}}let _t=(()=>{var i;class n extends Z.H{pagingData(){this.getExamHistoryByHashId()}calculateTime(s,o){return s?this.timeService.calculationTimeExamTested(s,o):""}getExamHistoryByHashId(s){this.initStatusObj(),this.waitDestroy(this.frontExamResultHistoryService.apiFrontExamResultHistoryGetHistoryObjsGet(this.hashId,this.page).subscribe(o=>{if(1==o.success){s&&(this.initDataCalled=!0);let a=o.data?.objs?o.data?.objs?.length:0;if(o.data?.objs)for(let r=0;r<a;r++)this.historyObjs.push(o.data.objs[r]??{});else this.initDataCalled=!0,this.errorStatusObj(o.message??"");this.page=o.data?.nextPage??"",o.data?.nextPage||(this.disableBtn=!0),this.successStatusObj()}else this.errorStatusObj(o.message??"")}))}ngOnInit(){this.backToLink=this.commonService.getCurrentUrlWithoutLocale()}constructor(s,o){super(),this.frontExamResultHistoryService=s,this.timeService=o,this.curTenantId=0,this.curCategoryId=0,this.backToLink="",this.historyObjs=[],this.page="",this.disableBtn=!1,this.initDataCalled=!1}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Ce.zd),e.rXU(mn.F))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-exam-history"]],inputs:{hashId:"hashId",examObj:"examObj",curTenantId:"curTenantId",curCategoryId:"curCategoryId"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[1,"exam-history","mx-auto","mt-5",2,"max-width","560px"],["class","mx-auto w-full",4,"ngIf"],[4,"ngIf"],[1,"mx-auto","w-full"],["azt-track-service","exam-history-_84BMuODi",1,"btn","btn-outline-secondary","p-3","block","mx-auto",3,"click"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["class","font-medium mx-auto",4,"ngIf"],["class","font-medium",4,"ngIf"],["class","mt-5 text-center",4,"ngIf"],[1,"font-medium","mx-auto"],[1,"font-medium"],["class","box mx-auto mt-5",4,"ngFor","ngForOf"],[1,"box","mx-auto","mt-5"],["class","text-center border-b border-slate-200/60 dark:border-darkmode-400 p-5",4,"ngIf"],[1,"azt-info-exam","mt-5","px-5"],[1,"flex","items-center"],[1,"text-md","flex","items-center"],["name","clock-4","size","16",3,"ngClass"],[1,"text-md","font-medium","ml-auto"],[1,"flex","items-center","mt-3"],["name","alarm-clock-check","size","16",3,"ngClass"],["class","flex items-center mt-3",4,"ngIf"],["name","circle-help","size","16",3,"ngClass"],[1,"p-5"],["azt-track-service","exam-history-1BV_WDkCER","class","btn btn-secondary w-full",3,"routerLink","queryParams",4,"ngIf"],["class","btn btn-secondary w-full",3,"disabled",4,"ngIf"],[1,"text-center","border-b","border-slate-200/60","dark:border-darkmode-400","p-5"],["class","font-medium text-lg","style","font-size: 25px",4,"ngIf"],[1,"font-medium","text-md","mr-2"],[1,"font-medium","text-lg",2,"font-size","25px"],[3,"mark"],["class","font-medium text-md mr-2",4,"ngIf"],["class","font-medium text-md","style","font-size: 25px",4,"ngIf"],[1,"font-medium","text-md",2,"font-size","25px"],["name","circle-check","size","16",3,"ngClass"],[1,"text-md","font-medium","text-success","ml-auto"],["azt-track-service","exam-history-1BV_WDkCER",1,"btn","btn-secondary","w-full",3,"routerLink","queryParams"],["name","chevron-right","size","16",3,"ngClass"],[1,"btn","btn-secondary","w-full",3,"disabled"],[1,"mt-5","text-center"],["azt-track-service","exam-history-tzgH_6R1Ki",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["class","ml-1",4,"ngIf"],["name","chevron-down","size","16",3,"ngClass",4,"ngIf"],[1,"ml-1"],["name","chevron-down","size","16",3,"ngClass"]],template:function(s,o){1&s&&(e.j41(0,"div",0),e.DNE(1,ma,5,4,"div",1)(2,We,5,4,"ng-container",2),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngIf",!o.initDataCalled),e.R7$(),e.Y8G("ngIf",o.initDataCalled))},dependencies:[wt.R,ca.D,z.F2,v.MD,v.YU,v.Sq,v.bT,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.PP,z.Pj,z.ZY,z.bH,z.Xc,U.Id,q.k],encapsulation:2}),n})();var kt=A(21413),Bn=A(40605),Ys=A(56977);class Us{defaultTime(n=!1){return{hour:0,minute:0,second:0,almostEnd:n,hourStr:"00",minuteStr:"00",secondStr:"00"}}parseTime(n){const t=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60;return{hour:t,minute:o,second:a,almostEnd:0==t&&0==o,hourStr:t<10?"0"+t:t.toString(),minuteStr:o<10?"0"+o:o.toString(),secondStr:a<10?"0"+a:a.toString()}}}const Wg=i=>({"time-almost-end":i});let Cn=(()=>{var i;class n extends Z.H{intervalTime(){let s=this.totalSecond,o=this.timeService.getCurrentSecond();const a=new kt.B,r=(0,Bn.Y)(1e3).pipe((0,Ys.Q)(a));this.waitDestroy(r.subscribe(l=>{this.timeCount=(new Us).parseTime(this.totalSecond);let c=this.timeService.getCurrentSecond();this.totalSecond=s-(c-o),this.totalSecond<=0&&(a.next(!0),this.endCountDownEvent.emit(!0))}))}ngOnChanges(){this.timeCount=(new Us).parseTime(this.totalSecond)}ngOnInit(){super.ngOnInit(),this.timeCount=(new Us).parseTime(this.totalSecond),this.useCountDown&&this.intervalTime()}constructor(s){super(),this.timeService=s,this.customClass="font-medium",this.endCountDownEvent=new e.bkB,this.timeCount=(new Us).defaultTime()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(mn.F))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-testbank-frontend-count-down-box"]],inputs:{totalSecond:"totalSecond",useCountDown:"useCountDown",customClass:"customClass"},outputs:{endCountDownEvent:"endCountDownEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:2,vars:9,consts:[[3,"ngClass"]],template:function(s,o){1&s&&(e.j41(0,"span",0),e.EFF(1),e.k0s()),2&s&&(e.HbH(o.customClass),e.Y8G("ngClass",e.eq3(7,Wg,o.timeCount.almostEnd)),e.R7$(),e.E5c("",o.timeCount.hourStr," : ",o.timeCount.minuteStr," : ",o.timeCount.secondStr,""))},dependencies:[v.MD,v.YU,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();var _l=A(65314),Xi=A(90828),Hg=A(96475),dl=A(71836),pa=A(43511);function ha(){return typeof aztExam<"u"?aztExam:void 0}var tt=A(45312),pn=A(57507),ml=A(99264);let Jg=(()=>{var i;class n{constructor(s){this.envService=s}getTmpVersionMonitor(){var s=this.envService.getEnvValue("classliveUrl"),o="1.0";if(s){var a=s.split("=");a.length>1&&(o=a[1])}return"https://azota889.github.io/storage_public/almo/listactive.js?ver="+o}getMNoteVer(){var s=this.envService.getEnvValue("classliveUrl"),o="1.0";if(s){var a=s.split("=");a.length>1&&(o=a[1])}return o}checkValidForSetUpMonitor(){return!0}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(ml.t))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var ps,N_,W=A(74523),Kg=A(2214),Wi=A(11789),Xs=A(17852),Zg=A(51362),hn=A(8041),ot=A(21076),G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P_={};(function(){var i;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function o(S,x,C){C||(C=0);var E=Array(16);if("string"==typeof x)for(var R=0;16>R;++R)E[R]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(R=0;16>R;++R)E[R]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;var P=S.g[3],w=(x=S.g[0])+(P^(C=S.g[1])&((R=S.g[2])^P))+E[0]+3614090360&4294967295;w=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=(C=(R=(P=(x=C+(w<<7&4294967295|w>>>25))+((w=P+(R^x&(C^R))+E[1]+3905402710&4294967295)<<12&4294967295|w>>>20))+((w=R+(C^P&(x^C))+E[2]+606105819&4294967295)<<17&4294967295|w>>>15))+((w=C+(x^R&(P^x))+E[3]+3250441966&4294967295)<<22&4294967295|w>>>10))+((w=x+(P^C&(R^P))+E[4]+4118548399&4294967295)<<7&4294967295|w>>>25))+((w=P+(R^x&(C^R))+E[5]+1200080426&4294967295)<<12&4294967295|w>>>20))+((w=R+(C^P&(x^C))+E[6]+2821735955&4294967295)<<17&4294967295|w>>>15))+((w=C+(x^R&(P^x))+E[7]+4249261313&4294967295)<<22&4294967295|w>>>10))+((w=x+(P^C&(R^P))+E[8]+1770035416&4294967295)<<7&4294967295|w>>>25))+((w=P+(R^x&(C^R))+E[9]+2336552879&4294967295)<<12&4294967295|w>>>20))+((w=R+(C^P&(x^C))+E[10]+4294925233&4294967295)<<17&4294967295|w>>>15))+((w=C+(x^R&(P^x))+E[11]+2304563134&4294967295)<<22&4294967295|w>>>10))+((w=x+(P^C&(R^P))+E[12]+1804603682&4294967295)<<7&4294967295|w>>>25))+((w=P+(R^x&(C^R))+E[13]+4254626195&4294967295)<<12&4294967295|w>>>20))+((w=R+(C^P&(x^C))+E[14]+2792965006&4294967295)<<17&4294967295|w>>>15))+((w=C+(x^R&(P^x))+E[15]+1236535329&4294967295)<<22&4294967295|w>>>10))+((w=x+(R^P&(C^R))+E[1]+4129170786&4294967295)<<5&4294967295|w>>>27))+((w=P+(C^R&(x^C))+E[6]+3225465664&4294967295)<<9&4294967295|w>>>23))+((w=R+(x^C&(P^x))+E[11]+643717713&4294967295)<<14&4294967295|w>>>18))+((w=C+(P^x&(R^P))+E[0]+3921069994&4294967295)<<20&4294967295|w>>>12))+((w=x+(R^P&(C^R))+E[5]+3593408605&4294967295)<<5&4294967295|w>>>27))+((w=P+(C^R&(x^C))+E[10]+38016083&4294967295)<<9&4294967295|w>>>23))+((w=R+(x^C&(P^x))+E[15]+3634488961&4294967295)<<14&4294967295|w>>>18))+((w=C+(P^x&(R^P))+E[4]+3889429448&4294967295)<<20&4294967295|w>>>12))+((w=x+(R^P&(C^R))+E[9]+568446438&4294967295)<<5&4294967295|w>>>27))+((w=P+(C^R&(x^C))+E[14]+3275163606&4294967295)<<9&4294967295|w>>>23))+((w=R+(x^C&(P^x))+E[3]+4107603335&4294967295)<<14&4294967295|w>>>18))+((w=C+(P^x&(R^P))+E[8]+1163531501&4294967295)<<20&4294967295|w>>>12))+((w=x+(R^P&(C^R))+E[13]+2850285829&4294967295)<<5&4294967295|w>>>27))+((w=P+(C^R&(x^C))+E[2]+4243563512&4294967295)<<9&4294967295|w>>>23))+((w=R+(x^C&(P^x))+E[7]+1735328473&4294967295)<<14&4294967295|w>>>18))+((w=C+(P^x&(R^P))+E[12]+2368359562&4294967295)<<20&4294967295|w>>>12))+((w=x+(C^R^P)+E[5]+4294588738&4294967295)<<4&4294967295|w>>>28))+((w=P+(x^C^R)+E[8]+2272392833&4294967295)<<11&4294967295|w>>>21))+((w=R+(P^x^C)+E[11]+1839030562&4294967295)<<16&4294967295|w>>>16))+((w=C+(R^P^x)+E[14]+4259657740&4294967295)<<23&4294967295|w>>>9))+((w=x+(C^R^P)+E[1]+2763975236&4294967295)<<4&4294967295|w>>>28))+((w=P+(x^C^R)+E[4]+1272893353&4294967295)<<11&4294967295|w>>>21))+((w=R+(P^x^C)+E[7]+4139469664&4294967295)<<16&4294967295|w>>>16))+((w=C+(R^P^x)+E[10]+3200236656&4294967295)<<23&4294967295|w>>>9))+((w=x+(C^R^P)+E[13]+681279174&4294967295)<<4&4294967295|w>>>28))+((w=P+(x^C^R)+E[0]+3936430074&4294967295)<<11&4294967295|w>>>21))+((w=R+(P^x^C)+E[3]+3572445317&4294967295)<<16&4294967295|w>>>16))+((w=C+(R^P^x)+E[6]+76029189&4294967295)<<23&4294967295|w>>>9))+((w=x+(C^R^P)+E[9]+3654602809&4294967295)<<4&4294967295|w>>>28))+((w=P+(x^C^R)+E[12]+3873151461&4294967295)<<11&4294967295|w>>>21))+((w=R+(P^x^C)+E[15]+530742520&4294967295)<<16&4294967295|w>>>16))+((w=C+(R^P^x)+E[2]+3299628645&4294967295)<<23&4294967295|w>>>9))+((w=x+(R^(C|~P))+E[0]+4096336452&4294967295)<<6&4294967295|w>>>26))+((w=P+(C^(x|~R))+E[7]+1126891415&4294967295)<<10&4294967295|w>>>22))+((w=R+(x^(P|~C))+E[14]+2878612391&4294967295)<<15&4294967295|w>>>17))+((w=C+(P^(R|~x))+E[5]+4237533241&4294967295)<<21&4294967295|w>>>11))+((w=x+(R^(C|~P))+E[12]+1700485571&4294967295)<<6&4294967295|w>>>26))+((w=P+(C^(x|~R))+E[3]+2399980690&4294967295)<<10&4294967295|w>>>22))+((w=R+(x^(P|~C))+E[10]+4293915773&4294967295)<<15&4294967295|w>>>17))+((w=C+(P^(R|~x))+E[1]+2240044497&4294967295)<<21&4294967295|w>>>11))+((w=x+(R^(C|~P))+E[8]+1873313359&4294967295)<<6&4294967295|w>>>26))+((w=P+(C^(x|~R))+E[15]+4264355552&4294967295)<<10&4294967295|w>>>22))+((w=R+(x^(P|~C))+E[6]+2734768916&4294967295)<<15&4294967295|w>>>17))+((w=C+(P^(R|~x))+E[13]+1309151649&4294967295)<<21&4294967295|w>>>11))+((P=(x=C+((w=x+(R^(C|~P))+E[4]+4149444226&4294967295)<<6&4294967295|w>>>26))+((w=P+(C^(x|~R))+E[11]+3174756917&4294967295)<<10&4294967295|w>>>22))^((R=P+((w=R+(x^(P|~C))+E[2]+718787259&4294967295)<<15&4294967295|w>>>17))|~x))+E[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+P&4294967295}function r(S,x){this.h=x;for(var C=[],E=!0,R=S.length-1;0<=R;R--){var P=0|S[R];E&&P==x||(C[R]=P,E=!1)}this.g=C}(function n(S,x){function C(){}C.prototype=x.prototype,S.D=x.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(E,R,P){for(var w=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)w[Be-2]=arguments[Be];return x.prototype[R].apply(E,w)}})(s,function t(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(S,x){void 0===x&&(x=S.length);for(var C=x-this.blockSize,E=this.B,R=this.h,P=0;P<x;){if(0==R)for(;P<=C;)o(this,S,P),P+=this.blockSize;if("string"==typeof S){for(;P<x;)if(E[R++]=S.charCodeAt(P++),R==this.blockSize){o(this,E),R=0;break}}else for(;P<x;)if(E[R++]=S[P++],R==this.blockSize){o(this,E),R=0;break}}this.h=R,this.o+=x},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;var C=8*this.o;for(x=S.length-8;x<S.length;++x)S[x]=255&C,C/=256;for(this.u(S),S=Array(16),x=C=0;4>x;++x)for(var E=0;32>E;E+=8)S[C++]=this.g[x]>>>E&255;return S};var l={};function c(S){return-128<=S&&128>S?function a(S,x){var C=l;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=x(S)}(S,function(x){return new r([0|x],0>x?-1:0)}):new r([0|S],0>S?-1:0)}function _(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return k(_(-S));for(var x=[],C=1,E=0;S>=C;E++)x[E]=S/C|0,C*=4294967296;return new r(x,0)}var p=c(0),f=c(1),b=c(16777216);function I(S){if(0!=S.h)return!1;for(var x=0;x<S.g.length;x++)if(0!=S.g[x])return!1;return!0}function y(S){return-1==S.h}function k(S){for(var x=S.g.length,C=[],E=0;E<x;E++)C[E]=~S.g[E];return new r(C,~S.h).add(f)}function O(S,x){return S.add(k(x))}function j(S,x){for(;(65535&S[x])!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function V(S,x){this.g=S,this.h=x}function N(S,x){if(I(x))throw Error("division by zero");if(I(S))return new V(p,p);if(y(S))return x=N(k(S),x),new V(k(x.g),k(x.h));if(y(x))return x=N(S,k(x)),new V(k(x.g),x.h);if(30<S.g.length){if(y(S)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var C=f,E=x;0>=E.l(S);)C=X(C),E=X(E);var R=te(C,1),P=te(E,1);for(E=te(E,2),C=te(C,2);!I(E);){var w=P.add(E);0>=w.l(S)&&(R=R.add(C),P=w),E=te(E,1),C=te(C,1)}return x=O(S,R.j(x)),new V(R,x)}for(R=p;0<=S.l(x);){for(C=Math.max(1,Math.floor(S.m()/x.m())),E=48>=(E=Math.ceil(Math.log(C)/Math.LN2))?1:Math.pow(2,E-48),w=(P=_(C)).j(x);y(w)||0<w.l(S);)w=(P=_(C-=E)).j(x);I(P)&&(P=f),R=R.add(P),S=O(S,w)}return new V(R,S)}function X(S){for(var x=S.g.length+1,C=[],E=0;E<x;E++)C[E]=S.i(E)<<1|S.i(E-1)>>>31;return new r(C,S.h)}function te(S,x){var C=x>>5;x%=32;for(var E=S.g.length-C,R=[],P=0;P<E;P++)R[P]=0<x?S.i(P+C)>>>x|S.i(P+C+1)<<32-x:S.i(P+C);return new r(R,S.h)}(i=r.prototype).m=function(){if(y(this))return-k(this).m();for(var S=0,x=1,C=0;C<this.g.length;C++){var E=this.i(C);S+=(0<=E?E:4294967296+E)*x,x*=4294967296}return S},i.toString=function(S){if(2>(S=S||10)||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(y(this))return"-"+k(this).toString(S);for(var x=_(Math.pow(S,6)),C=this,E="";;){var R=N(C,x).g,P=((0<(C=O(C,R.j(x))).g.length?C.g[0]:C.h)>>>0).toString(S);if(I(C=R))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},i.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h},i.l=function(S){return y(S=O(this,S))?-1:I(S)?0:1},i.abs=function(){return y(this)?k(this):this},i.add=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],E=0,R=0;R<=x;R++){var P=E+(65535&this.i(R))+(65535&S.i(R)),w=(P>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);E=w>>>16,C[R]=(w&=65535)<<16|(P&=65535)}return new r(C,-2147483648&C[C.length-1]?-1:0)},i.j=function(S){if(I(this)||I(S))return p;if(y(this))return y(S)?k(this).j(k(S)):k(k(this).j(S));if(y(S))return k(this.j(k(S)));if(0>this.l(b)&&0>S.l(b))return _(this.m()*S.m());for(var x=this.g.length+S.g.length,C=[],E=0;E<2*x;E++)C[E]=0;for(E=0;E<this.g.length;E++)for(var R=0;R<S.g.length;R++){var P=this.i(E)>>>16,w=65535&this.i(E),Be=S.i(R)>>>16,Ze=65535&S.i(R);C[2*E+2*R]+=w*Ze,j(C,2*E+2*R),C[2*E+2*R+1]+=P*Ze,j(C,2*E+2*R+1),C[2*E+2*R+1]+=w*Be,j(C,2*E+2*R+1),C[2*E+2*R+2]+=P*Be,j(C,2*E+2*R+2)}for(E=0;E<x;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=x;E<2*x;E++)C[E]=0;return new r(C,0)},i.A=function(S){return N(this,S).h},i.and=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],E=0;E<x;E++)C[E]=this.i(E)&S.i(E);return new r(C,this.h&S.h)},i.or=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],E=0;E<x;E++)C[E]=this.i(E)|S.i(E);return new r(C,this.h|S.h)},i.xor=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],E=0;E<x;E++)C[E]=this.i(E)^S.i(E);return new r(C,this.h^S.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,N_=P_.Md5=s,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=_,r.fromString=function d(S,x){if(0==S.length)throw Error("number format error: empty string");if(2>(x=x||10)||36<x)throw Error("radix out of range: "+x);if("-"==S.charAt(0))return k(d(S.substring(1),x));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(x,8)),E=p,R=0;R<S.length;R+=8){var P=Math.min(8,S.length-R),w=parseInt(S.substring(R,R+P),x);8>P?(P=_(Math.pow(x,P)),E=E.j(P).add(_(w))):E=(E=E.j(C)).add(_(w))}return E},ps=P_.Integer=r}).apply(typeof G_<"u"?G_:typeof self<"u"?self:typeof window<"u"?window:{});var V_,Hi,L_,ga,pl,B_,$_,Q_,fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kn={};(function(){var i,n="function"==typeof Object.defineProperties?Object.defineProperty:function(u,m,h){return u==Array.prototype||u==Object.prototype||(u[m]=h.value),u},s=function t(u){u=["object"==typeof globalThis&&globalThis,u,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof fa&&fa];for(var m=0;m<u.length;++m){var h=u[m];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}(this);!function o(u,m){if(m)e:{var h=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var D=u[T];if(!(D in h))break e;h=h[D]}(m=m(T=h[u=u[u.length-1]]))!=T&&null!=m&&n(h,u,{configurable:!0,writable:!0,value:m})}}("Array.prototype.values",function(u){return u||function(){return function a(u,m){u instanceof String&&(u+="");var h=0,T=!1,D={next:function(){if(!T&&h<u.length){var Q=h++;return{value:m(Q,u[Q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}(this,function(m,h){return h})}});var r=r||{},l=this||self;function c(u){var m=typeof u;return"array"==(m="object"!=m?m:u?Array.isArray(u)?"array":m:"null")||"object"==m&&"number"==typeof u.length}function _(u){var m=typeof u;return"object"==m&&null!=u||"function"==m}function d(u,m,h){return u.call.apply(u.bind,arguments)}function p(u,m,h){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,T),u.apply(m,D)}}return function(){return u.apply(m,arguments)}}function f(u,m,h){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:p).apply(null,arguments)}function b(u,m){var h=Array.prototype.slice.call(arguments,1);return function(){var T=h.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function I(u,m){function h(){}h.prototype=m.prototype,u.aa=m.prototype,u.prototype=new h,u.prototype.constructor=u,u.Qb=function(T,D,Q){for(var le=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)le[Je-2]=arguments[Je];return m.prototype[D].apply(T,le)}}function y(u){const m=u.length;if(0<m){const h=Array(m);for(let T=0;T<m;T++)h[T]=u[T];return h}return[]}function k(u,m){for(let h=1;h<arguments.length;h++){const T=arguments[h];if(c(T)){const D=u.length||0,Q=T.length||0;u.length=D+Q;for(let le=0;le<Q;le++)u[D+le]=T[le]}else u.push(T)}}function j(u){return/^[\s\xa0]*$/.test(u)}function V(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var X=!(-1==V().indexOf("Gecko")||-1!=V().toLowerCase().indexOf("webkit")&&-1==V().indexOf("Edge")||-1!=V().indexOf("Trident")||-1!=V().indexOf("MSIE")||-1!=V().indexOf("Edge"));function te(u,m,h){for(const T in u)m.call(h,u[T],T,u)}function x(u){const m={};for(const h in u)m[h]=u[h];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,m){let h,T;for(let D=1;D<arguments.length;D++){for(h in T=arguments[D],T)u[h]=T[h];for(let Q=0;Q<C.length;Q++)h=C[Q],Object.prototype.hasOwnProperty.call(T,h)&&(u[h]=T[h])}}function R(u){var m=1;u=u.split(":");const h=[];for(;0<m&&u.length;)h.push(u.shift()),m--;return u.length&&h.push(u.join(":")),h}function P(u){l.setTimeout(()=>{throw u},0)}function w(){var u=Ct;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}var Ze=new class O{constructor(m,h){this.i=m,this.j=h,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}(()=>new Rt,u=>u.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(m,h){this.h=m,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Gt,st=!1,Ct=new class Be{constructor(){this.h=this.g=null}add(m,h){const T=Ze.get();T.set(m,h),this.h?this.h.next=T:this.g=T,this.h=T}},et=()=>{const u=l.Promise.resolve(void 0);Gt=()=>{u.then(Ue)}};var Ue=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(h){P(h)}var m=Ze;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}st=!1};function Xe(){this.s=this.s,this.C=this.C}function Pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Xe.prototype.s=!1,Xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Pe.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const h=()=>{};l.addEventListener("test",h,m),l.removeEventListener("test",h,m)}catch{}return u}();function Qe(u,m){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var h=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(X){e:{try{N(m.nodeName);var D=!0;break e}catch{}D=!1}D||(m=null)}}else"mouseover"==h?m=u.fromElement:"mouseout"==h&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType="string"==typeof u.pointerType?u.pointerType:Ge[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Qe.aa.h.call(this)}}I(Qe,Pe);var Ge={2:"touch",3:"pen",4:"mouse"};Qe.prototype.h=function(){Qe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Sn(u,m,h,T,D){this.listener=u,this.proxy=null,this.src=m,this.type=h,this.capture=!!T,this.ha=D,this.key=++Ne,this.da=this.fa=!1}function wn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function en(u){this.src=u,this.g={},this.h=0}function _n(u,m){var h=m.type;if(h in u.g){var Q,T=u.g[h],D=Array.prototype.indexOf.call(T,m,void 0);(Q=0<=D)&&Array.prototype.splice.call(T,D,1),Q&&(wn(m),0==u.g[h].length&&(delete u.g[h],u.h--))}}function ln(u,m,h,T){for(var D=0;D<u.length;++D){var Q=u[D];if(!Q.da&&Q.listener==m&&Q.capture==!!h&&Q.ha==T)return D}return-1}en.prototype.add=function(u,m,h,T,D){var Q=u.toString();(u=this.g[Q])||(u=this.g[Q]=[],this.h++);var le=ln(u,m,T,D);return-1<le?(m=u[le],h||(m.fa=!1)):((m=new Sn(m,this.src,Q,!!T,D)).fa=h,u.push(m)),m};var Ls="closure_lm_"+(1e6*Math.random()|0),f_={};function Wf(u,m,h,T,D){if(T&&T.once)return Jf(u,m,h,T,D);if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)Wf(u,m[Q],h,T,D);return null}return h=x_(h),u&&u[St]?u.K(m,h,_(T)?!!T.capture:!!T,D):Hf(u,m,h,!1,T,D)}function Hf(u,m,h,T,D,Q){if(!m)throw Error("Invalid event type");var le=_(D)?!!D.capture:!!D,Je=T_(u);if(Je||(u[Ls]=Je=new en(u)),(h=Je.add(m,h,T,le,Q)).proxy)return h;if(T=function mj(){const m=pj;return function u(h){return m.call(u.src,u.listener,h)}}(),h.proxy=T,T.src=u,T.listener=h,u.addEventListener)ve||(D=le),void 0===D&&(D=!1),u.addEventListener(m.toString(),T,D);else if(u.attachEvent)u.attachEvent(Zf(m.toString()),T);else{if(!u.addListener||!u.removeListener)throw Error("addEventListener and attachEvent are unavailable.");u.addListener(T)}return h}function Jf(u,m,h,T,D){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)Jf(u,m[Q],h,T,D);return null}return h=x_(h),u&&u[St]?u.L(m,h,_(T)?!!T.capture:!!T,D):Hf(u,m,h,!0,T,D)}function Kf(u,m,h,T,D){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)Kf(u,m[Q],h,T,D);else T=_(T)?!!T.capture:!!T,h=x_(h),u&&u[St]?(u=u.i,(m=String(m).toString())in u.g&&-1<(h=ln(Q=u.g[m],h,T,D))&&(wn(Q[h]),Array.prototype.splice.call(Q,h,1),0==Q.length&&(delete u.g[m],u.h--))):u&&(u=T_(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ln(m,h,T,D)),(h=-1<u?m[u]:null)&&g_(h))}function g_(u){if("number"!=typeof u&&u&&!u.da){var m=u.src;if(m&&m[St])_n(m.i,u);else{var h=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(h,T,u.capture):m.detachEvent?m.detachEvent(Zf(h),T):m.addListener&&m.removeListener&&m.removeListener(T),(h=T_(m))?(_n(h,u),0==h.h&&(h.src=null,m[Ls]=null)):wn(u)}}}function Zf(u){return u in f_?f_[u]:f_[u]="on"+u}function pj(u,m){if(u.da)u=!0;else{m=new Qe(m,this);var h=u.listener,T=u.ha||u.src;u.fa&&g_(u),u=h.call(T,m)}return u}function T_(u){return(u=u[Ls])instanceof en?u:null}var b_="__closure_events_fn_"+(1e9*Math.random()>>>0);function x_(u){return"function"==typeof u?u:(u[b_]||(u[b_]=function(m){return u.handleEvent(m)}),u[b_])}function Qt(){Xe.call(this),this.i=new en(this),this.M=this,this.F=null}function Xt(u,m){var h,T=u.F;if(T)for(h=[];T;T=T.F)h.push(T);if(u=u.M,T=m.type||m,"string"==typeof m)m=new Pe(m,u);else if(m instanceof Pe)m.target=m.target||u;else{var D=m;E(m=new Pe(T,u),D)}if(D=!0,h)for(var Q=h.length-1;0<=Q;Q--){var le=m.g=h[Q];D=Pr(le,T,!0,m)&&D}if(D=Pr(le=m.g=u,T,!0,m)&&D,D=Pr(le,T,!1,m)&&D,h)for(Q=0;Q<h.length;Q++)D=Pr(le=m.g=h[Q],T,!1,m)&&D}function Pr(u,m,h,T){if(!(m=u.i.g[String(m)]))return!0;m=m.concat();for(var D=!0,Q=0;Q<m.length;++Q){var le=m[Q];if(le&&!le.da&&le.capture==h){var Je=le.listener,Pt=le.ha||le.src;le.fa&&_n(u.i,le),D=!1!==Je.call(Pt,T)&&D}}return D&&!T.defaultPrevented}function eg(u,m,h){if("function"==typeof u)h&&(u=f(u,h));else{if(!u||"function"!=typeof u.handleEvent)throw Error("Invalid listener argument");u=f(u.handleEvent,u)}return 2147483647<Number(m)?-1:l.setTimeout(u,m||0)}function tg(u){u.g=eg(()=>{u.g=null,u.i&&(u.i=!1,tg(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}I(Qt,Xe),Qt.prototype[St]=!0,Qt.prototype.removeEventListener=function(u,m,h,T){Kf(this,u,m,h,T)},Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var m,u=this.i;for(m in u.g){for(var h=u.g[m],T=0;T<h.length;T++)wn(h[T]);delete u.g[m],u.h--}}this.F=null},Qt.prototype.K=function(u,m,h,T){return this.i.add(String(u),m,!1,h,T)},Qt.prototype.L=function(u,m,h,T){return this.i.add(String(u),m,!0,h,T)};class hj extends Xe{constructor(m,h){super(),this.m=m,this.l=h,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:tg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lo(u){Xe.call(this),this.h=u,this.g={}}I(Lo,Xe);var ng=[];function sg(u){te(u.g,function(m,h){this.g.hasOwnProperty(h)&&g_(m)},u),u.g={}}Lo.prototype.N=function(){Lo.aa.N.call(this),sg(this)},Lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var v_=l.JSON.stringify,fj=l.JSON.parse,gj=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function y_(){}function og(){}y_.prototype.h=null;var Bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function S_(){Pe.call(this,"d")}function w_(){Pe.call(this,"c")}I(S_,Pe),I(w_,Pe);var Bs={},ag=null;function Nr(){return ag=ag||new Qt}function rg(u){Pe.call(this,Bs.La,u)}function $o(u){const m=Nr();Xt(m,new rg(m))}function lg(u,m){Pe.call(this,Bs.STAT_EVENT,u),this.stat=m}function Wt(u){const m=Nr();Xt(m,new lg(m,u))}function cg(u,m){Pe.call(this,Bs.Ma,u),this.size=m}function Qo(u,m){if("function"!=typeof u)throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function qo(){this.g=!0}function Ni(u,m,h,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+function vj(u,m){if(!u.g)return m;if(!m)return null;try{var h=JSON.parse(m);if(h)for(u=0;u<h.length;u++)if(Array.isArray(h[u])){var T=h[u];if(!(2>T.length)){var D=T[1];if(Array.isArray(D)&&!(1>D.length)){var Q=D[0];if("noop"!=Q&&"stop"!=Q&&"close"!=Q)for(var le=1;le<D.length;le++)D[le]=""}}}return v_(h)}catch{return m}}(u,h)+(T?" "+T:"")})}Bs.La="serverreachability",I(rg,Pe),Bs.STAT_EVENT="statevent",I(lg,Pe),Bs.Ma="timingevent",I(cg,Pe),qo.prototype.xa=function(){this.g=!1},qo.prototype.info=function(){};var I_,Vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ug={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Lr(){}function ls(u,m,h,T){this.j=u,this.i=m,this.l=h,this.R=T||1,this.U=new Lo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _g}function _g(){this.i=null,this.g="",this.h=!1}I(Lr,y_),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},I_=new Lr;var dg={},C_={};function k_(u,m,h){u.L=1,u.v=qr(Pn(m)),u.m=h,u.P=!0,mg(u,null)}function mg(u,m){u.F=Date.now(),Br(u),u.A=Pn(u.v);var h=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),kg(h.i,"t",T),u.C=0,h=u.j.J,u.h=new _g,u.g=qg(u.j,h?m:null,!u.m),0<u.O&&(u.M=new hj(f(u.Y,u,u.g),u.O)),m=u.U,h=u.g,T=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(ng[0]=D.toString()),D=ng);for(var Q=0;Q<D.length;Q++){var le=Wf(h,D[Q],T||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),$o(),function Tj(u,m,h,T,D,Q){u.info(function(){if(u.g)if(Q)for(var le="",Je=Q.split("&"),Pt=0;Pt<Je.length;Pt++){var $e=Je[Pt].split("=");if(1<$e.length){var qt=$e[0];$e=$e[1];var Yt=qt.split("_");le=2<=Yt.length&&"type"==Yt[1]?le+(qt+"=")+$e+"&":le+(qt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+m+"\n"+h+"\n"+le})}(u.i,u.u,u.A,u.l,u.R,u.m)}function pg(u){return!!u.g&&"GET"==u.u&&2!=u.L&&u.j.Ca}function yj(u,m){var h=u.C,T=m.indexOf("\n",h);return-1==T?C_:(h=Number(m.substring(h,T)),isNaN(h)?dg:(T+=1)+h>m.length?C_:(m=m.slice(T,T+h),u.C=T+h,m))}function Br(u){u.S=Date.now()+u.I,hg(u,u.I)}function hg(u,m){if(null!=u.B)throw Error("WatchDog timer not null");u.B=Qo(f(u.ba,u),m)}function E_(u){u.B&&(l.clearTimeout(u.B),u.B=null)}function Yo(u){0==u.j.G||u.J||Lg(u.j,u)}function $s(u){E_(u);var m=u.M;m&&"function"==typeof m.ma&&m.ma(),u.M=null,sg(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function A_(u,m){try{var h=u.j;if(0!=h.G&&(h.g==u||O_(h.h,u)))if(!u.K&&O_(h.h,u)&&3==h.G){try{var T=h.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&3==T.length){var D=T;if(0==D[0]){e:if(!h.u){if(h.g){if(!(h.g.F+3e3<u.F))break e;Hr(h),Xr(h)}z_(h),Wt(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&0==h.v&&!h.C&&(h.C=Qo(f(h.Za,h),6e3));if(1>=Tg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else qs(h,11)}else if((u.K||h.g==u)&&Hr(h),!j(m))for(D=h.Da.g.parse(m),m=0;m<D.length;m++){let $e=D[m];if(h.T=$e[0],$e=$e[1],2==h.G)if("c"==$e[0]){h.K=$e[1],h.ia=$e[2];const qt=$e[3];null!=qt&&(h.la=qt,h.j.info("VER="+h.la));const Yt=$e[4];null!=Yt&&(h.Aa=Yt,h.j.info("SVER="+h.Aa));const Bi=$e[5];null!=Bi&&"number"==typeof Bi&&0<Bi&&(h.L=T=1.5*Bi,h.j.info("backChannelRequestTimeoutMs_="+T)),T=h;const dn=u.g;if(dn){const Kr=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var Q=T.h;Q.g||-1==Kr.indexOf("spdy")&&-1==Kr.indexOf("quic")&&-1==Kr.indexOf("h2")||(Q.j=Q.l,Q.g=new Set,Q.h&&(R_(Q,Q.h),Q.h=null))}if(T.D){const D_=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;D_&&(T.ya=D_,it(T.I,T.D,D_))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-u.F,h.j.info("Handshake RTT: "+h.R+"ms"));var le=u;if((T=h).qa=Qg(T,T.J?T.ia:null,T.W),le.K){bg(T.h,le);var Je=le,Pt=T.L;Pt&&(Je.I=Pt),Je.B&&(E_(Je),Br(Je)),T.g=le}else Ng(T);0<h.i.length&&Wr(h)}else"stop"!=$e[0]&&"close"!=$e[0]||qs(h,7);else 3==h.G&&("stop"==$e[0]||"close"==$e[0]?"stop"==$e[0]?qs(h,7):j_(h):"noop"!=$e[0]&&h.l&&h.l.ta($e),h.v=0)}$o()}catch{}}ls.prototype.ca=function(u){u=u.target;const m=this.M;m&&3==Nn(u)?m.j():this.Y(u)},ls.prototype.Y=function(u){try{if(u==this.g)e:{const Yt=Nn(this.g);var m=this.g.Ba();if(this.g.Z(),!(3>Yt)&&(3!=Yt||this.g&&(this.h.h||this.g.oa()||zg(this.g)))){this.J||4!=Yt||7==m||$o(),E_(this);var h=this.g.Z();this.X=h;t:if(pg(this)){var T=zg(this.g);u="";var D=T.length,Q=4==Nn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$s(this),Yo(this);var le="";break t}this.h.i=new l.TextDecoder}for(m=0;m<D;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(Q&&m==D-1)});T.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=200==h,function bj(u,m,h,T,D,Q,le){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+m+"\n"+h+"\n"+Q+" "+le})}(this.i,this.u,this.A,this.l,this.R,Yt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Pt=this.g;if((Je=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Je)){var $e=Je;break t}}$e=null}if(!(h=$e)){this.o=!1,this.s=3,Wt(12),$s(this),Yo(this);break e}Ni(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,A_(this,h)}if(this.P){let dn;for(h=!0;!this.J&&this.C<le.length;){if(dn=yj(this,le),dn==C_){4==Yt&&(this.s=4,Wt(14),h=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}if(dn==dg){this.s=4,Wt(15),Ni(this.i,this.l,le,"[Invalid Chunk]"),h=!1;break}Ni(this.i,this.l,dn,null),A_(this,dn)}if(pg(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Yt||0!=le.length||this.h.h||(this.s=1,Wt(16),h=!1),this.o=this.o&&h,h){if(0<le.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),M_(qt),qt.M=!0,Wt(11))}}else Ni(this.i,this.l,le,"[Invalid Chunked Response]"),$s(this),Yo(this)}else Ni(this.i,this.l,le,null),A_(this,le);4==Yt&&$s(this),this.o&&!this.J&&(4==Yt?Lg(this.j,this):(this.o=!1,Br(this)))}else(function Nj(u){const m={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<u.length;T++){if(j(u[T]))continue;var h=R(u[T]);const D=h[0];if("string"!=typeof(h=h[1]))continue;h=h.trim();const Q=m[D]||[];m[D]=Q,Q.push(h)}!function S(u,m){for(const h in u)m.call(void 0,u[h],h,u)}(m,function(T){return T.join(", ")})})(this.g),400==h&&0<le.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),$s(this),Yo(this)}}}catch{}},ls.prototype.cancel=function(){this.J=!0,$s(this)},ls.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(function xj(u,m){u.info(function(){return"TIMEOUT: "+m})}(this.i,this.A),2!=this.L&&($o(),Wt(17)),$s(this),this.s=2,Yo(this)):hg(this,this.S-u)};var Sj=class{constructor(u,m){this.g=u,this.map=m}};function fg(u){this.l=u||10,u=l.PerformanceNavigationTiming?0<(u=l.performance.getEntriesByType("navigation")).length&&("hq"==u[0].nextHopProtocol||"h2"==u[0].nextHopProtocol):!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gg(u){return!!u.h||!!u.g&&u.g.size>=u.j}function Tg(u){return u.h?1:u.g?u.g.size:0}function O_(u,m){return u.h?u.h==m:!!u.g&&u.g.has(m)}function R_(u,m){u.g?u.g.add(m):u.h=m}function bg(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}function xg(u){if(null!=u.h)return u.i.concat(u.h.D);if(null!=u.g&&0!==u.g.size){let m=u.i;for(const h of u.g.values())m=m.concat(h.D);return m}return y(u.i)}function vg(u,m){if(u.forEach&&"function"==typeof u.forEach)u.forEach(m,void 0);else if(c(u)||"string"==typeof u)Array.prototype.forEach.call(u,m,void 0);else for(var h=function Ij(u){if(u.na&&"function"==typeof u.na)return u.na();if(!u.V||"function"!=typeof u.V){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||"string"==typeof u){var m=[];u=u.length;for(var h=0;h<u;h++)m.push(h);return m}m=[],h=0;for(const T in u)m[h++]=T;return m}}}(u),T=function wj(u){if(u.V&&"function"==typeof u.V)return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if("string"==typeof u)return u.split("");if(c(u)){for(var m=[],h=u.length,T=0;T<h;T++)m.push(u[T]);return m}for(T in m=[],h=0,u)m[h++]=u[T];return m}(u),D=T.length,Q=0;Q<D;Q++)m.call(void 0,T[Q],h&&h[Q],u)}fg.prototype.cancel=function(){if(this.i=xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const u of this.g.values())u.cancel();this.g.clear()}};var yg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Qs){this.h=u.h,$r(this,u.j),this.o=u.o,this.g=u.g,Qr(this,u.s),this.l=u.l;var m=u.i,h=new Wo;h.i=m.i,m.g&&(h.g=new Map(m.g),h.h=m.h),Sg(this,h),this.m=u.m}else u&&(m=String(u).match(yg))?(this.h=!1,$r(this,m[1]||"",!0),this.o=Uo(m[2]||""),this.g=Uo(m[3]||"",!0),Qr(this,m[4]),this.l=Uo(m[5]||"",!0),Sg(this,m[6]||"",!0),this.m=Uo(m[7]||"")):(this.h=!1,this.i=new Wo(null,this.h))}function Pn(u){return new Qs(u)}function $r(u,m,h){u.j=h?Uo(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Qr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Sg(u,m,h){m instanceof Wo?(u.i=m,function Fj(u,m){m&&!u.j&&(cs(u),u.i=null,u.g.forEach(function(h,T){var D=T.toLowerCase();T!=D&&(Ig(this,T),kg(this,D,h))},u)),u.j=m}(u.i,u.h)):(h||(m=Xo(m,Oj)),u.i=new Wo(m,u.h))}function it(u,m,h){u.i.set(m,h)}function qr(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Uo(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xo(u,m,h){return"string"==typeof u?(u=encodeURI(u).replace(m,kj),h&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kj(u){return"%"+((u=u.charCodeAt(0))>>4&15).toString(16)+(15&u).toString(16)}Qs.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Xo(m,wg,!0),":");var h=this.g;return(h||"file"==m)&&(u.push("//"),(m=this.o)&&u.push(Xo(m,wg,!0),"@"),u.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(h=this.s)&&u.push(":",String(h))),(h=this.l)&&(this.g&&"/"!=h.charAt(0)&&u.push("/"),u.push(Xo(h,"/"==h.charAt(0)?Aj:Ej,!0))),(h=this.i.toString())&&u.push("?",h),(h=this.m)&&u.push("#",Xo(h,Rj)),u.join("")};var wg=/[#\/\?@]/g,Ej=/[#\?:]/g,Aj=/[#\?]/g,Oj=/[#\?@]/g,Rj=/#/g;function Wo(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function cs(u){u.g||(u.g=new Map,u.h=0,u.i&&function Cj(u,m){if(u){u=u.split("&");for(var h=0;h<u.length;h++){var T=u[h].indexOf("="),D=null;if(0<=T){var Q=u[h].substring(0,T);D=u[h].substring(T+1)}else Q=u[h];m(Q,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}(u.i,function(m,h){u.add(decodeURIComponent(m.replace(/\+/g," ")),h)}))}function Ig(u,m){cs(u),m=Vi(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Cg(u,m){return cs(u),m=Vi(u,m),u.g.has(m)}function kg(u,m,h){Ig(u,m),0<h.length&&(u.i=null,u.g.set(Vi(u,m),y(h)),u.h+=h.length)}function Vi(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function us(u,m,h,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(h)}catch{}}function Mj(){this.g=new gj}function Dj(u,m,h){const T=h||"";try{vg(u,function(D,Q){let le=D;_(D)&&(le=v_(D)),m.push(T+Q+"="+encodeURIComponent(le))})}catch(D){throw m.push(T+"type="+encodeURIComponent("_badmap")),D}}function Ho(u){this.l=u.Ub||null,this.j=u.eb||!1}function Yr(u,m){Qt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Eg(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}function Jo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ko(u)}function Ko(u){u.onreadystatechange&&u.onreadystatechange.call(u)}function Ag(u){let m="";return te(u,function(h,T){m+=T,m+=":",m+=h,m+="\r\n"}),m}function F_(u,m,h){e:{for(T in h){var T=!1;break e}T=!0}T||(h=Ag(h),"string"==typeof u?null!=h&&encodeURIComponent(String(h)):it(u,m,h))}function ht(u){Qt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(i=Wo.prototype).add=function(u,m){cs(this),this.i=null,u=Vi(this,u);var h=this.g.get(u);return h||this.g.set(u,h=[]),h.push(m),this.h+=1,this},i.forEach=function(u,m){cs(this),this.g.forEach(function(h,T){h.forEach(function(D){u.call(m,D,T,this)},this)},this)},i.na=function(){cs(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),h=[];for(let T=0;T<m.length;T++){const D=u[T];for(let Q=0;Q<D.length;Q++)h.push(m[T])}return h},i.V=function(u){cs(this);let m=[];if("string"==typeof u)Cg(this,u)&&(m=m.concat(this.g.get(Vi(this,u))));else{u=Array.from(this.g.values());for(let h=0;h<u.length;h++)m=m.concat(u[h])}return m},i.set=function(u,m){return cs(this),this.i=null,Cg(this,u=Vi(this,u))&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u&&0<(u=this.V(u)).length?String(u[0]):m},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var h=0;h<m.length;h++){var T=m[h];const Q=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var D=Q;""!==le[T]&&(D+="="+encodeURIComponent(String(le[T]))),u.push(D)}}return this.i=u.join("&")},I(Ho,y_),Ho.prototype.g=function(){return new Yr(this.l,this.j)},Ho.prototype.i=function(u){return function(){return u}}({}),I(Yr,Qt),(i=Yr.prototype).open=function(u,m){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Ko(this)},i.send=function(u){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jo(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if("arraybuffer"===this.responseType)u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eg(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))},i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jo(this):Ko(this),3==this.readyState&&Eg(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Jo(this))},i.Qa=function(u){this.g&&(this.response=u,Jo(this))},i.ga=function(){this.g&&Jo(this)},i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var h=m.next();!h.done;)u.push((h=h.value)[0]+": "+h[1]),h=m.next();return u.join("\r\n")},Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(u){this.m=u?"include":"same-origin"}}),I(ht,Qt);var Gj=/^https?$/i,Pj=["POST","PUT"];function Og(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Rg(u),Ur(u)}function Rg(u){u.A||(u.A=!0,Xt(u,"complete"),Xt(u,"error"))}function Fg(u){if(u.h&&typeof r<"u"&&(!u.v[1]||4!=Nn(u)||2!=u.Z()))if(u.u&&4==Nn(u))eg(u.Ea,0,u);else if(Xt(u,"readystatechange"),4==Nn(u)){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var h;if(!(h=m)){var T;if(T=0===le){var D=String(u.D).match(yg)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),T=!Gj.test(D?D.toLowerCase():"")}h=T}if(h)Xt(u,"complete"),Xt(u,"success");else{u.m=6;try{var Q=2<Nn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",Rg(u)}}finally{Ur(u)}}}function Ur(u,m){if(u.g){jg(u);const h=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Xt(u,"ready");try{h.onreadystatechange=T}catch{}}}function jg(u){u.I&&(l.clearTimeout(u.I),u.I=null)}function Nn(u){return u.g?u.g.readyState:0}function zg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Zo(u,m,h){return h&&h.internalChannelParams&&h.internalChannelParams[u]||m}function Mg(u){this.Aa=0,this.i=[],this.j=new qo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zo("baseRetryDelayMs",5e3,u),this.cb=Zo("retryDelaySeedMs",1e4,u),this.Wa=Zo("forwardChannelMaxRetries",2,u),this.wa=Zo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new fg(u&&u.concurrentRequestLimit),this.Da=new Mj,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function j_(u){if(Dg(u),3==u.G){var m=u.U++,h=Pn(u.I);if(it(h,"SID",u.K),it(h,"RID",m),it(h,"TYPE","terminate"),ea(u,h),(m=new ls(u,u.j,m)).L=2,m.v=qr(Pn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!h&&l.Image&&((new Image).src=m.v,h=!0),h||(m.g=qg(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Br(m)}$g(u)}function Xr(u){u.g&&(M_(u),u.g.cancel(),u.g=null)}function Dg(u){Xr(u),u.u&&(l.clearTimeout(u.u),u.u=null),Hr(u),u.h.cancel(),u.s&&("number"==typeof u.s&&l.clearTimeout(u.s),u.s=null)}function Wr(u){if(!gg(u.h)&&!u.s){u.s=!0;var m=u.Ga;Gt||et(),st||(Gt(),st=!0),Ct.add(m,u),u.B=0}}function Gg(u,m){var h;h=m?m.l:u.U++;const T=Pn(u.I);it(T,"SID",u.K),it(T,"RID",h),it(T,"AID",u.T),ea(u,T),u.m&&u.o&&F_(T,u.m,u.o),h=new ls(u,u.j,h,u.B+1),null===u.m&&(h.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Pg(u,h,1e3),h.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),R_(u.h,h),k_(h,T,m)}function ea(u,m){u.H&&te(u.H,function(h,T){it(m,T,h)}),u.l&&vg({},function(h,T){it(m,T,h)})}function Pg(u,m,h){h=Math.min(u.i.length,h);var T=u.l?f(u.l.Na,u.l,u):null;e:{var D=u.i;let Q=-1;for(;;){const le=["count="+h];-1==Q?0<h?(Q=D[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let Je=!0;for(let Pt=0;Pt<h;Pt++){let $e=D[Pt].g;const qt=D[Pt].map;if($e-=Q,0>$e)Q=Math.max(0,D[Pt].g-100),Je=!1;else try{Dj(qt,le,"req"+$e+"_")}catch{T&&T(qt)}}if(Je){T=le.join("&");break e}}}return u=u.i.splice(0,h),m.D=u,T}function Ng(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Gt||et(),st||(Gt(),st=!0),Ct.add(m,u),u.v=0}}function z_(u){return!(u.g||u.u||3<=u.v||(u.Y++,u.u=Qo(f(u.Fa,u),Bg(u,u.v)),u.v++,0))}function M_(u){null!=u.A&&(l.clearTimeout(u.A),u.A=null)}function Vg(u){u.g=new ls(u,u.j,"rpc",u.Y),null===u.m&&(u.g.H=u.o),u.g.O=0;var m=Pn(u.qa);it(m,"RID","rpc"),it(m,"SID",u.K),it(m,"AID",u.T),it(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(m,"TO",u.ja),it(m,"TYPE","xmlhttp"),ea(u,m),u.m&&u.o&&F_(m,u.m,u.o),u.L&&(u.g.I=u.L);var h=u.g;u=u.ia,h.L=1,h.v=qr(Pn(m)),h.m=null,h.P=!0,mg(h,u)}function Hr(u){null!=u.C&&(l.clearTimeout(u.C),u.C=null)}function Lg(u,m){var h=null;if(u.g==m){Hr(u),M_(u),u.g=null;var T=2}else{if(!O_(u.h,m))return;h=m.D,bg(u.h,m),T=1}if(0!=u.G)if(m.o)if(1==T){h=m.m?m.m.length:0,m=Date.now()-m.F;var D=u.B;Xt(T=Nr(),new cg(T,h)),Wr(u)}else Ng(u);else if(3==(D=m.s)||0==D&&0<m.X||!(1==T&&function Vj(u,m){return!(Tg(u.h)>=u.h.j-(u.s?1:0)||(u.s?(u.i=m.D.concat(u.i),0):1==u.G||2==u.G||u.B>=(u.Va?0:u.Wa)||(u.s=Qo(f(u.Ga,u,m),Bg(u,u.B)),u.B++,0)))}(u,m)||2==T&&z_(u)))switch(h&&0<h.length&&(m=u.h,m.i=m.i.concat(h)),D){case 1:qs(u,5);break;case 4:qs(u,10);break;case 3:qs(u,6);break;default:qs(u,2)}}function Bg(u,m){let h=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(h*=2),h*m}function qs(u,m){if(u.j.info("Error code "+m),2==m){var h=f(u.fb,u),T=u.Xa;const D=!T;T=new Qs(T||"//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||$r(T,"https"),qr(T),D?function jj(u,m){const h=new qo;if(l.Image){const T=new Image;T.onload=b(us,h,"TestLoadImage: loaded",!0,m,T),T.onerror=b(us,h,"TestLoadImage: error",!1,m,T),T.onabort=b(us,h,"TestLoadImage: abort",!1,m,T),T.ontimeout=b(us,h,"TestLoadImage: timeout",!1,m,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}(T.toString(),h):function zj(u,m){new qo;const T=new AbortController,D=setTimeout(()=>{T.abort(),us(0,0,!1,m)},1e4);fetch(u,{signal:T.signal}).then(Q=>{clearTimeout(D),us(0,0,!!Q.ok,m)}).catch(()=>{clearTimeout(D),us(0,0,!1,m)})}(T.toString(),h)}else Wt(2);u.G=0,u.l&&u.l.sa(m),$g(u),Dg(u)}function $g(u){if(u.G=0,u.ka=[],u.l){const m=xg(u.h);(0!=m.length||0!=u.i.length)&&(k(u.ka,m),k(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function Qg(u,m,h){var T=h instanceof Qs?Pn(h):new Qs(h);if(""!=T.g)m&&(T.g=m+"."+T.g),Qr(T,T.s);else{var D=l.location;T=D.protocol,m=m?m+"."+D.hostname:D.hostname,D=+D.port;var Q=new Qs(null);T&&$r(Q,T),m&&(Q.g=m),D&&Qr(Q,D),h&&(Q.l=h),T=Q}return m=u.ya,(h=u.D)&&m&&it(T,h,m),it(T,"VER",u.la),ea(u,T),T}function qg(u,m,h){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return(m=new ht(u.Ca&&!u.pa?new Ho({eb:h}):u.pa)).Ha(u.J),m}function Yg(){}function Jr(){}function tn(u,m){Qt.call(this),this.g=new Mg(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!j(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!j(m)&&(this.g.D=m,null!==(u=this.h)&&m in u&&m in(u=this.h)&&delete u[m]),this.j=new Li(this)}function Ug(u){S_.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const h in m){u=h;break e}u=void 0}(this.i=u)&&(u=this.i,m=null!==m&&u in m?m[u]:void 0),this.data=m}else this.data=u}function Xg(){w_.call(this),this.status=1}function Li(u){this.g=u}(i=ht.prototype).Ha=function(u){this.J=u},i.ea=function(u,m,h,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():I_.g(),this.v=function ig(u){return u.h||(u.h=u.i())}(this.o?this.o:I_),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){return void Og(this,Q)}if(u=h||"",h=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)h.set(D,T[D]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const Q of T.keys())h.set(Q,T.get(Q))}T=Array.from(h.keys()).find(Q=>"content-type"==Q.toLowerCase()),D=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Pj,m,void 0))||T||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of h)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jg(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Og(this,Q)}},i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Xt(this,"complete"),Xt(this,"abort"),Ur(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),ht.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Fg(this):this.bb())},i.bb=function(){Fg(this)},i.isActive=function(){return!!this.g},i.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&0==m.indexOf(u)&&(m=m.substring(u.length)),fj(m)}},i.Ba=function(){return this.m},i.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(i=Mg.prototype).la=8,i.G=1,i.connect=function(u,m,h,T){Wt(0),this.W=u,this.H=m||{},h&&void 0!==T&&(this.H.OSID=h,this.H.OAID=T),this.F=this.X,this.I=Qg(this,null,this.W),Wr(this)},i.Ga=function(u){if(this.s)if(this.s=null,1==this.G){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new ls(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=x(Q),E(Q,this.S)):Q=this.S),null!==this.m||this.O||(D.H=Q,Q=null),this.P)e:{for(var m=0,h=0;h<this.i.length;h++){var T=this.i[h];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(m+=T)){m=h;break e}if(4096===m||h===this.i.length-1){m=h+1;break e}}m=1e3}else m=1e3;m=Pg(this,D,m),it(h=Pn(this.I),"RID",u),it(h,"CVER",22),this.D&&it(h,"X-HTTP-Session-Id",this.D),ea(this,h),Q&&(this.O?m="headers="+encodeURIComponent(String(Ag(Q)))+"&"+m:this.m&&F_(h,this.m,Q)),R_(this.h,D),this.Ua&&it(h,"TYPE","init"),this.P?(it(h,"$req",m),it(h,"SID","null"),D.T=!0,k_(D,h,null)):k_(D,h,m),this.G=2}}else 3==this.G&&(u?Gg(this,u):0==this.i.length||gg(this.h)||Gg(this))},i.Fa=function(){if(this.u=null,Vg(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Qo(f(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Xr(this),Vg(this))},i.Za=function(){null!=this.C&&(this.C=null,Xr(this),z_(this),Wt(19))},i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))},i.isActive=function(){return!!this.l&&this.l.isActive(this)},(i=Yg.prototype).ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){},Jr.prototype.g=function(u,m){return new tn(u,m)},I(tn,Qt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){j_(this.g)},tn.prototype.o=function(u){var m=this.g;if("string"==typeof u){var h={};h.__data__=u,u=h}else this.u&&((h={}).__data__=v_(u),u=h);m.i.push(new Sj(m.Ya++,u)),3==m.G&&Wr(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,j_(this.g),delete this.g,tn.aa.N.call(this)},I(Ug,S_),I(Xg,w_),I(Li,Yg),Li.prototype.ua=function(){Xt(this.g,"a")},Li.prototype.ta=function(u){Xt(this.g,new Ug(u))},Li.prototype.sa=function(u){Xt(this.g,new Xg)},Li.prototype.ra=function(){Xt(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Q_=kn.createWebChannelTransport=function(){return new Jr},$_=kn.getStatEventTarget=function(){return Nr()},B_=kn.Event=Bs,pl=kn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,ga=kn.ErrorCode=Vr,ug.COMPLETE="complete",L_=kn.EventType=ug,og.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Hi=kn.WebChannel=og,kn.FetchXmlHttpFactory=Ho,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,V_=kn.XhrIo=ht}).apply(typeof fa<"u"?fa:typeof self<"u"?self:typeof window<"u"?window:{});const q_="@firebase/firestore";class Et{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");let Ws="11.0.2";const $n=new hn.Vy("@firebase/firestore");function Hs(){return $n.logLevel}function ne(i,...n){if($n.logLevel<=hn.$b.DEBUG){const t=n.map(hl);$n.debug(`Firestore (${Ws}): ${i}`,...t)}}function gt(i,...n){if($n.logLevel<=hn.$b.ERROR){const t=n.map(hl);$n.error(`Firestore (${Ws}): ${i}`,...t)}}function sn(i,...n){if($n.logLevel<=hn.$b.WARN){const t=n.map(hl);$n.warn(`Firestore (${Ws}): ${i}`,...t)}}function hl(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function me(i="Unexpected state"){const n=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: `+i;throw gt(n),new Error(n)}function fe(i,n){i||me()}function re(i,n){return i}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ot.g{constructor(n,t){super(n,t),this.code=n,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class At{constructor(){this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}}class Y_{constructor(n,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class t1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,t){n.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}}class n1{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,t){this.changeListener=t,n.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class s1{constructor(n){this.t=n,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,t){var s=this;fe(void 0===this.o);let o=this.i;const a=_=>this.i!==o?(o=this.i,t(_)):Promise.resolve();let r=new At;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new At,n.enqueueRetryable(()=>a(this.currentUser))};const l=()=>{const _=r;n.enqueueRetryable((0,W.A)(function*(){yield _.promise,yield a(s.currentUser)}))},c=_=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(_=>c(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?c(_):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new At)}},0),l()}getToken(){const n=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==n?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(fe("string"==typeof s.accessToken),new Y_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const n=this.auth&&this.auth.getUid();return fe(null===n||"string"==typeof n),new Et(n)}}class i1{constructor(n,t,s){this.l=n,this.h=t,this.P=s,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const n=this.I();return n&&this.T.set("Authorization",n),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class o1{constructor(n,t,s){this.l=n,this.h=t,this.P=s}getToken(){return Promise.resolve(new i1(this.l,this.h,this.P))}start(n,t){n.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U_{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a1{constructor(n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(n,t){fe(void 0===this.o);const s=a=>{null!=a.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const r=a.token!==this.R;return this.R=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(a.token):Promise.resolve()};this.o=a=>{n.enqueueRetryable(()=>s(a))};const o=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(t=>t?(fe("string"==typeof t.token),this.R=t.token,new U_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function r1(i){const n=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class X_{static newId(){const t=62*Math.floor(256/62);let s="";for(;s.length<20;){const o=r1(40);for(let a=0;a<o.length;++a)s.length<20&&o[a]<t&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[a]%62))}return s}}function we(i,n){return i<n?-1:i>n?1:0}function Js(i,n,t){return i.length===n.length&&i.every((s,o)=>t(s,n[o]))}class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(n){return dt.fromMillis(n.getTime())}static fromMillis(n){const t=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*t));return new dt(t,s)}constructor(n,t){if(this.seconds=n,this.nanoseconds=t,t<0)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(n<-62135596800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?we(this.nanoseconds,n.nanoseconds):we(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{static fromTimestamp(n){return new be(n)}static min(){return new be(new dt(0,0))}static max(){return new be(new dt(253402300799,999999999))}constructor(n){this.timestamp=n}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ji{constructor(n,t,s){void 0===t?t=0:t>n.length&&me(),void 0===s?s=n.length-t:s>n.length-t&&me(),this.segments=n,this.offset=t,this.len=s}get length(){return this.len}isEqual(n){return 0===Ji.comparator(this,n)}child(n){const t=this.segments.slice(this.offset,this.limit());return n instanceof Ji?n.forEach(s=>{t.push(s)}):t.push(n),this.construct(t)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==n.get(t))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==n.get(t))return!1;return!0}forEach(n){for(let t=this.offset,s=this.limit();t<s;t++)n(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,t){const s=Math.min(n.length,t.length);for(let o=0;o<s;o++){const a=n.get(o),r=t.get(o);if(a<r)return-1;if(a>r)return 1}return n.length<t.length?-1:n.length>t.length?1:0}}class ze extends Ji{construct(n,t,s){return new ze(n,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...n){const t=[];for(const s of n){if(s.indexOf("//")>=0)throw new se($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new ze(t)}static emptyPath(){return new ze([])}}const l1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Ji{construct(n,t,s){return new at(n,t,s)}static isValidIdentifier(n){return l1.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new at(["__name__"])}static fromServerFormat(n){const t=[];let s="",o=0;const a=()=>{if(0===s.length)throw new se($.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let r=!1;for(;o<n.length;){const l=n[o];if("\\"===l){if(o+1===n.length)throw new se($.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const c=n[o+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new se($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=c,o+=2}else"`"===l?(r=!r,o++):"."!==l||r?(s+=l,o++):(a(),o++)}if(a(),r)throw new se($.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new at(t)}static emptyPath(){return new at([])}}class ce{constructor(n){this.path=n}static fromPath(n){return new ce(ze.fromString(n))}static fromName(n){return new ce(ze.fromString(n).popFirst(5))}static empty(){return new ce(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return null!==n&&0===ze.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,t){return ze.comparator(n.path,t.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new ce(new ze(n.slice()))}}class Kt{constructor(n,t,s){this.readTime=n,this.documentKey=t,this.largestBatchId=s}static min(){return new Kt(be.min(),ce.empty(),-1)}static max(){return new Kt(be.max(),ce.empty(),-1)}}function gl(i,n){let t=i.readTime.compareTo(n.readTime);return 0!==t?t:(t=ce.comparator(i.documentKey,n.documentKey),0!==t?t:we(i.largestBatchId,n.largestBatchId))}const K_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}function Qn(i){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,W.A)(function*(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==K_)throw i;ne("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class G{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(n){return this.next(void 0,n)}next(n,t){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(n,this.result):new G((s,o)=>{this.nextCallback=a=>{this.wrapSuccess(n,a).next(s,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(s,o)}})}toPromise(){return new Promise((n,t)=>{this.next(n,t)})}wrapUserFunction(n){try{const t=n();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(n,t){return n?this.wrapUserFunction(()=>n(t)):G.resolve(t)}wrapFailure(n,t){return n?this.wrapUserFunction(()=>n(t)):G.reject(t)}static resolve(n){return new G((t,s)=>{t(n)})}static reject(n){return new G((t,s)=>{s(n)})}static waitFor(n){return new G((t,s)=>{let o=0,a=0,r=!1;n.forEach(l=>{++o,l.next(()=>{++a,r&&a===o&&t()},c=>s(c))}),r=!0,a===o&&t()})}static or(n){let t=G.resolve(!1);for(const s of n)t=t.next(o=>o?G.resolve(o):s());return t}static forEach(n,t){const s=[];return n.forEach((o,a)=>{s.push(t.call(this,o,a))}),this.waitFor(s)}static mapArray(n,t){return new G((s,o)=>{const a=n.length,r=new Array(a);let l=0;for(let c=0;c<a;c++){const _=c;t(n[_]).next(d=>{r[_]=d,++l,l===a&&s(r)},d=>o(d))}})}static doWhile(n,t){return new G((s,o)=>{const a=()=>{!0===n()?t().next(()=>{a()},o):s()};a()})}}function qn(i){return"IndexedDbTransactionError"===i.name}let Zt=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=o=>this.ie(o),this.se=o=>s.writeSequenceNumber(o))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return i.oe=-1,i})();function Zi(i){return null==i}function eo(i){return 0===i&&1/i==-1/0}function h1(i,n){let t=n;const s=i.length;for(let o=0;o<s;o++){const a=i.charAt(o);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function sd(i){return i+"\x01\x01"}function cd(i){let n=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&n++;return n}function Yn(i,n){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&n(t,i[t])}function _d(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class Ke{constructor(n,t){this.comparator=n,this.root=t||Ft.EMPTY}insert(n,t){return new Ke(this.comparator,this.root.insert(n,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(n){return new Ke(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(n){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(n,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(n){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(n,s.key);if(0===o)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((t,s)=>(n(t,s),!1))}toString(){const n=[];return this.inorderTraversal((t,s)=>(n.push(`${t}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new xa(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new xa(this.root,n,this.comparator,!1)}getReverseIterator(){return new xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new xa(this.root,n,this.comparator,!0)}}class xa{constructor(n,t,s,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!n.isEmpty();)if(a=t?s(n.key,t):1,t&&o&&(a*=-1),a<0)n=this.isReverse?n.left:n.right;else{if(0===a){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const t={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class Ft{constructor(n,t,s,o,a){this.key=n,this.value=t,this.color=s??Ft.RED,this.left=o??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,t,s,o,a){return new Ft(n??this.key,t??this.value,s??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,t,s){let o=this;const a=s(n,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(n,t,s),null):0===a?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(n,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,t){let s,o=this;if(t(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(n,o.key)){if(o.right.isEmpty())return Ft.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,t)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const n=this.left.check();if(n!==this.right.check())throw me();return n+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1,Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(n,t,s,o,a){return this}insert(n,t,s){return new Ft(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qe{constructor(n){this.comparator=n,this.data=new Ke(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((t,s)=>(n(t),!1))}forEachInRange(n,t){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,n[1])>=0)return;t(o.key)}}forEachWhile(n,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const t=this.data.getIteratorFrom(n);return t.hasNext()?t.getNext().key:null}getIterator(){return new dd(this.data.getIterator())}getIteratorFrom(n){return new dd(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let t=this;return t.size<n.size&&(t=n,n=this),n.forEach(s=>{t=t.add(s)}),t}isEqual(n){if(!(n instanceof qe)||this.size!==n.size)return!1;const t=this.data.getIterator(),s=n.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(0!==this.comparator(o,a))return!1}return!0}toArray(){const n=[];return this.forEach(t=>{n.push(t)}),n}toString(){const n=[];return this.forEach(t=>n.push(t)),"SortedSet("+n.toString()+")"}copy(n){const t=new qe(this.comparator);return t.data=n,t}}class dd{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ht{constructor(n){this.fields=n,n.sort(at.comparator)}static empty(){return new Ht([])}unionWith(n){let t=new qe(at.comparator);for(const s of this.fields)t=t.add(s);for(const s of n)t=t.add(s);return new Ht(t.toArray())}covers(n){for(const t of this.fields)if(t.isPrefixOf(n))return!0;return!1}isEqual(n){return Js(this.fields,n.fields,(t,s)=>t.isEqual(s))}}class md extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pt{constructor(n){this.binaryString=n}static fromBase64String(n){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new md("Invalid base64 string: "+a):a}}(n);return new pt(t)}static fromUint8Array(n){const t=function(o){let a="";for(let r=0;r<o.length;++r)a+=String.fromCharCode(o[r]);return a}(n);return new pt(t)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return we(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const z1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function En(i){if(fe(!!i),"string"==typeof i){let n=0;const t=z1.exec(i);if(fe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),n=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:rt(i.seconds),nanos:rt(i.nanos)}}function rt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function An(i){return"string"==typeof i?pt.fromBase64String(i):pt.fromUint8Array(i)}function va(i){var n,t;return"server_timestamp"===(null===(t=((null===(n=i?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ya(i){const n=i.mapValue.fields.__previous_value__;return va(n)?ya(n):n}function to(i){const n=En(i.mapValue.fields.__local_write_time__.timestampValue);return new dt(n.seconds,n.nanos)}class M1{constructor(n,t,s,o,a,r,l,c,_){this.databaseId=n,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=a,this.forceLongPolling=r,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=_}}class Ts{constructor(n,t){this.projectId=n,this.database=t||"(default)"}static empty(){return new Ts("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Ts&&n.projectId===this.projectId&&n.database===this.database}}const Un={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?va(i)?4:Td(i)?9007199254740991:Ca(i)?10:11:me()}function Tn(i,n){if(i===n)return!0;const t=Xn(i);if(t!==Xn(n))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return to(i).isEqual(to(n));case 3:return function(o,a){if("string"==typeof o.timestampValue&&"string"==typeof a.timestampValue&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const r=En(o.timestampValue),l=En(a.timestampValue);return r.seconds===l.seconds&&r.nanos===l.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return a=n,An(i.bytesValue).isEqual(An(a.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(o,a){return rt(o.geoPointValue.latitude)===rt(a.geoPointValue.latitude)&&rt(o.geoPointValue.longitude)===rt(a.geoPointValue.longitude)}(i,n);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return rt(o.integerValue)===rt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const r=rt(o.doubleValue),l=rt(a.doubleValue);return r===l?eo(r)===eo(l):isNaN(r)&&isNaN(l)}return!1}(i,n);case 9:return Js(i.arrayValue.values||[],n.arrayValue.values||[],Tn);case 10:case 11:return function(o,a){const r=o.mapValue.fields||{},l=a.mapValue.fields||{};if(cd(r)!==cd(l))return!1;for(const c in r)if(r.hasOwnProperty(c)&&(void 0===l[c]||!Tn(r[c],l[c])))return!1;return!0}(i,n);default:return me()}var a}function no(i,n){return void 0!==(i.values||[]).find(t=>Tn(t,n))}function Wn(i,n){if(i===n)return 0;const t=Xn(i),s=Xn(n);if(t!==s)return we(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(i.booleanValue,n.booleanValue);case 2:return function(a,r){const l=rt(a.integerValue||a.doubleValue),c=rt(r.integerValue||r.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(i,n);case 3:return pd(i.timestampValue,n.timestampValue);case 4:return pd(to(i),to(n));case 5:return we(i.stringValue,n.stringValue);case 6:return function(a,r){const l=An(a),c=An(r);return l.compareTo(c)}(i.bytesValue,n.bytesValue);case 7:return function(a,r){const l=a.split("/"),c=r.split("/");for(let _=0;_<l.length&&_<c.length;_++){const d=we(l[_],c[_]);if(0!==d)return d}return we(l.length,c.length)}(i.referenceValue,n.referenceValue);case 8:return function(a,r){const l=we(rt(a.latitude),rt(r.latitude));return 0!==l?l:we(rt(a.longitude),rt(r.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return hd(i.arrayValue,n.arrayValue);case 10:return function(a,r){var l,c,_,d;const b=null===(l=(a.fields||{}).value)||void 0===l?void 0:l.arrayValue,I=null===(c=(r.fields||{}).value)||void 0===c?void 0:c.arrayValue,y=we((null===(_=b?.values)||void 0===_?void 0:_.length)||0,(null===(d=I?.values)||void 0===d?void 0:d.length)||0);return 0!==y?y:hd(b,I)}(i.mapValue,n.mapValue);case 11:return function(a,r){if(a===Un.mapValue&&r===Un.mapValue)return 0;if(a===Un.mapValue)return 1;if(r===Un.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),_=r.fields||{},d=Object.keys(_);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const f=we(c[p],d[p]);if(0!==f)return f;const b=Wn(l[c[p]],_[d[p]]);if(0!==b)return b}return we(c.length,d.length)}(i.mapValue,n.mapValue);default:throw me()}}function pd(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return we(i,n);const t=En(i),s=En(n),o=we(t.seconds,s.seconds);return 0!==o?o:we(t.nanos,s.nanos)}function hd(i,n){const t=i.values||[],s=n.values||[];for(let o=0;o<t.length&&o<s.length;++o){const a=Wn(t[o],s[o]);if(a)return a}return we(t.length,s.length)}function ti(i){return yl(i)}function yl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=En(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?An(i.bytesValue).toBase64():"referenceValue"in i?ce.fromName(i.referenceValue).toString():"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",o=!0;for(const a of t.values||[])o?o=!1:s+=",",s+=yl(a);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const r of s)a?a=!1:o+=",",o+=`${r}:${yl(t.fields[r])}`;return o+"}"}(i.mapValue):me()}function wa(i){switch(Xn(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const n=ya(i);return n?16+wa(n):16;case 5:return 2*i.stringValue.length;case 6:return An(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(i.arrayValue.values||[]).reduce((o,a)=>o+wa(a),0);case 10:case 11:return function(s){let o=0;return Yn(s.fields,(a,r)=>{o+=a.length+wa(r)}),o}(i.mapValue);default:throw me()}}function bs(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function Sl(i){return!!i&&"integerValue"in i}function so(i){return!!i&&"arrayValue"in i}function fd(i){return!!i&&"nullValue"in i}function gd(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ia(i){return!!i&&"mapValue"in i}function Ca(i){var n,t;return"__vector__"===(null===(t=((null===(n=i?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function io(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return Yn(i.mapValue.fields,(t,s)=>n.mapValue.fields[t]=io(s)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)n.arrayValue.values[t]=io(i.arrayValue.values[t]);return n}return Object.assign({},i)}function Td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}class jt{constructor(n){this.value=n}static empty(){return new jt({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let t=this.value;for(let s=0;s<n.length-1;++s)if(t=(t.mapValue.fields||{})[n.get(s)],!Ia(t))return null;return t=(t.mapValue.fields||{})[n.lastSegment()],t||null}}set(n,t){this.getFieldsMap(n.popLast())[n.lastSegment()]=io(t)}setAll(n){let t=at.emptyPath(),s={},o=[];n.forEach((r,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,s,o),s={},o=[],t=l.popLast()}r?s[l.lastSegment()]=io(r):o.push(l.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,s,o)}delete(n){const t=this.field(n.popLast());Ia(t)&&t.mapValue.fields&&delete t.mapValue.fields[n.lastSegment()]}isEqual(n){return Tn(this.value,n.value)}getFieldsMap(n){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<n.length;++s){let o=t.mapValue.fields[n.get(s)];Ia(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[n.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(n,t,s){Yn(t,(o,a)=>n[o]=a);for(const o of s)delete n[o]}clone(){return new jt(io(this.value))}}function yd(i){const n=[];return Yn(i.fields,(t,s)=>{const o=new at([t]);if(Ia(s)){const a=yd(s.mapValue).fields;if(0===a.length)n.push(o);else for(const r of a)n.push(o.child(r))}else n.push(o)}),new Ht(n)}class nt{constructor(n,t,s,o,a,r,l){this.key=n,this.documentType=t,this.version=s,this.readTime=o,this.createTime=a,this.data=r,this.documentState=l}static newInvalidDocument(n){return new nt(n,0,be.min(),be.min(),be.min(),jt.empty(),0)}static newFoundDocument(n,t,s,o){return new nt(n,1,t,be.min(),s,o,0)}static newNoDocument(n,t){return new nt(n,2,t,be.min(),be.min(),jt.empty(),0)}static newUnknownDocument(n,t){return new nt(n,3,t,be.min(),be.min(),jt.empty(),2)}convertToFoundDocument(n,t){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=n),this.version=n,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof nt&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hn{constructor(n,t){this.position=n,this.inclusive=t}}function Sd(i,n,t){let s=0;for(let o=0;o<i.position.length;o++){const a=n[o],r=i.position[o];if(s=a.field.isKeyField()?ce.comparator(ce.fromName(r.referenceValue),t.key):Wn(r,t.data.field(a.field)),"desc"===a.dir&&(s*=-1),0!==s)break}return s}function wd(i,n){if(null===i)return null===n;if(null===n||i.inclusive!==n.inclusive||i.position.length!==n.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Tn(i.position[t],n.position[t]))return!1;return!0}class oo{constructor(n,t="asc"){this.field=n,this.dir=t}}function P1(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}class Id{}class Me extends Id{constructor(n,t,s){super(),this.field=n,this.op=t,this.value=s}static create(n,t,s){return n.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(n,t,s):new N1(n,t,s):"array-contains"===t?new B1(n,s):"in"===t?new Rd(n,s):"not-in"===t?new $1(n,s):"array-contains-any"===t?new Q1(n,s):new Me(n,t,s)}static createKeyFieldInFilter(n,t,s){return"in"===t?new V1(n,s):new L1(n,s)}matches(n){const t=n.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wn(t,this.value)):null!==t&&Xn(this.value)===Xn(t)&&this.matchesComparison(Wn(t,this.value))}matchesComparison(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends Id{constructor(n,t){super(),this.filters=n,this.op=t,this.ae=null}static create(n,t){return new Ye(n,t)}matches(n){return ni(this)?void 0===this.filters.find(t=>!t.matches(n)):void 0!==this.filters.find(t=>t.matches(n))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((n,t)=>n.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ni(i){return"and"===i.op}function Il(i){return function Cd(i){for(const n of i.filters)if(n instanceof Ye)return!1;return!0}(i)&&ni(i)}function Cl(i){if(i instanceof Me)return i.field.canonicalString()+i.op.toString()+ti(i.value);if(Il(i))return i.filters.map(n=>Cl(n)).join(",");{const n=i.filters.map(t=>Cl(t)).join(",");return`${i.op}(${n})`}}function kd(i,n){return i instanceof Me?(s=i,(o=n)instanceof Me&&s.op===o.op&&s.field.isEqual(o.field)&&Tn(s.value,o.value)):i instanceof Ye?function(s,o){return o instanceof Ye&&s.op===o.op&&s.filters.length===o.filters.length&&s.filters.reduce((a,r,l)=>a&&kd(r,o.filters[l]),!0)}(i,n):void me();var s,o}function Ad(i){return i instanceof Me?`${(t=i).field.canonicalString()} ${t.op} ${ti(t.value)}`:i instanceof Ye?function(t){return t.op.toString()+" {"+t.getFilters().map(Ad).join(" ,")+"}"}(i):"Filter";var t}class N1 extends Me{constructor(n,t,s){super(n,t,s),this.key=ce.fromName(s.referenceValue)}matches(n){const t=ce.comparator(n.key,this.key);return this.matchesComparison(t)}}class V1 extends Me{constructor(n,t){super(n,"in",t),this.keys=Od(0,t)}matches(n){return this.keys.some(t=>t.isEqual(n.key))}}class L1 extends Me{constructor(n,t){super(n,"not-in",t),this.keys=Od(0,t)}matches(n){return!this.keys.some(t=>t.isEqual(n.key))}}function Od(i,n){var t;return((null===(t=n.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>ce.fromName(s.referenceValue))}class B1 extends Me{constructor(n,t){super(n,"array-contains",t)}matches(n){const t=n.data.field(this.field);return so(t)&&no(t.arrayValue,this.value)}}class Rd extends Me{constructor(n,t){super(n,"in",t)}matches(n){const t=n.data.field(this.field);return null!==t&&no(this.value.arrayValue,t)}}class $1 extends Me{constructor(n,t){super(n,"not-in",t)}matches(n){if(no(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=n.data.field(this.field);return null!==t&&!no(this.value.arrayValue,t)}}class Q1 extends Me{constructor(n,t){super(n,"array-contains-any",t)}matches(n){const t=n.data.field(this.field);return!(!so(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>no(this.value.arrayValue,s))}}class q1{constructor(n,t=null,s=[],o=[],a=null,r=null,l=null){this.path=n,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=a,this.startAt=r,this.endAt=l,this.ue=null}}function kl(i,n=null,t=[],s=[],o=null,a=null,r=null){return new q1(i,n,t,s,o,a,r)}function xs(i){const n=re(i);if(null===n.ue){let t=n.path.canonicalString();null!==n.collectionGroup&&(t+="|cg:"+n.collectionGroup),t+="|f:",t+=n.filters.map(s=>Cl(s)).join(","),t+="|ob:",t+=n.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Zi(n.limit)||(t+="|l:",t+=n.limit),n.startAt&&(t+="|lb:",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(s=>ti(s)).join(",")),n.endAt&&(t+="|ub:",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(s=>ti(s)).join(",")),n.ue=t}return n.ue}function ao(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!P1(i.orderBy[t],n.orderBy[t]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!kd(i.filters[t],n.filters[t]))return!1;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!wd(i.startAt,n.startAt)&&wd(i.endAt,n.endAt)}function ka(i){return ce.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class On{constructor(n,t=null,s=[],o=[],a=null,r="F",l=null,c=null){this.path=n,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=a,this.limitType=r,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function si(i){return new On(i)}function Md(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function El(i){return null!==i.collectionGroup}function ii(i){const n=re(i);if(null===n.ce){n.ce=[];const t=new Set;for(const a of n.explicitOrderBy)n.ce.push(a),t.add(a.field.canonicalString());const s=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";(function(r){let l=new qe(at.comparator);return r.filters.forEach(c=>{c.getFlattenedFilters().forEach(_=>{_.isInequality()&&(l=l.add(_.field))})}),l})(n).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||n.ce.push(new oo(a,s))}),t.has(at.keyField().canonicalString())||n.ce.push(new oo(at.keyField(),s))}return n.ce}function Vt(i){const n=re(i);return n.le||(n.le=function Gd(i,n){if("F"===i.limitType)return kl(i.path,i.collectionGroup,n,i.filters,i.limit,i.startAt,i.endAt);{n=n.map(o=>new oo(o.field,"desc"===o.dir?"asc":"desc"));const t=i.endAt?new Hn(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Hn(i.startAt.position,i.startAt.inclusive):null;return kl(i.path,i.collectionGroup,n,i.filters,i.limit,t,s)}}(n,ii(i))),n.le}function Al(i,n){const t=i.filters.concat([n]);return new On(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Aa(i,n,t){return new On(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,t,i.startAt,i.endAt)}function ro(i,n){return ao(Vt(i),Vt(n))&&i.limitType===n.limitType}function Pd(i){return`${xs(Vt(i))}|lt:${i.limitType}`}function oi(i){return`Query(target=${function(t){let s=t.path.canonicalString();return null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Ad(o)).join(", ")}]`),Zi(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>{return`${(r=o).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>ti(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>ti(o)).join(",")),`Target(${s})`}(Vt(i))}; limitType=${i.limitType})`}function lo(i,n){return n.isFoundDocument()&&function(s,o){const a=o.key.path;return null!==s.collectionGroup?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ce.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(i,n)&&function(s,o){for(const a of ii(s))if(!a.field.isKeyField()&&null===o.data.field(a.field))return!1;return!0}(i,n)&&function(s,o){for(const a of s.filters)if(!a.matches(o))return!1;return!0}(i,n)&&(o=n,!((s=i).startAt&&!function(r,l,c){const _=Sd(r,l,c);return r.inclusive?_<=0:_<0}(s.startAt,ii(s),o)||s.endAt&&!function(r,l,c){const _=Sd(r,l,c);return r.inclusive?_>=0:_>0}(s.endAt,ii(s),o)));var s,o}function Vd(i){return(n,t)=>{let s=!1;for(const o of ii(i)){const a=Y1(o,n,t);if(0!==a)return a;s=s||o.field.isKeyField()}return 0}}function Y1(i,n,t){const s=i.field.isKeyField()?ce.comparator(n.key,t.key):function(a,r,l){const c=r.data.field(a),_=l.data.field(a);return null!==c&&null!==_?Wn(c,_):me()}(i.field,n,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return me()}}class Rn{constructor(n,t){this.mapKeyFn=n,this.equalsFn=t,this.inner={},this.innerSize=0}get(n){const t=this.mapKeyFn(n),s=this.inner[t];if(void 0!==s)for(const[o,a]of s)if(this.equalsFn(o,n))return a}has(n){return void 0!==this.get(n)}set(n,t){const s=this.mapKeyFn(n),o=this.inner[s];if(void 0===o)return this.inner[s]=[[n,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],n))return void(o[a]=[n,t]);o.push([n,t]),this.innerSize++}delete(n){const t=this.mapKeyFn(n),s=this.inner[t];if(void 0===s)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],n))return 1===s.length?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(n){Yn(this.inner,(t,s)=>{for(const[o,a]of s)n(o,a)})}isEmpty(){return _d(this.inner)}size(){return this.innerSize}}const U1=new Ke(ce.comparator);function Jt(){return U1}const Ld=new Ke(ce.comparator);function co(...i){let n=Ld;for(const t of i)n=n.insert(t.key,t);return n}function Bd(i){let n=Ld;return i.forEach((t,s)=>n=n.insert(t,s.overlayedDocument)),n}function bn(){return uo()}function $d(){return uo()}function uo(){return new Rn(i=>i.toString(),(i,n)=>i.isEqual(n))}const X1=new Ke(ce.comparator),W1=new qe(ce.comparator);function Oe(...i){let n=W1;for(const t of i)n=n.add(t);return n}const H1=new qe(we);function Rl(i,n){if(i.useProto3Json){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eo(n)?"-0":n}}function Qd(i){return{integerValue:""+i}}function qd(i,n){return function nd(i){return"number"==typeof i&&Number.isInteger(i)&&!eo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}(n)?Qd(n):Rl(i,n)}class Oa{constructor(){this._=void 0}}function J1(i,n,t){return i instanceof ai?function(o,a){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&va(a)&&(a=ya(a)),a&&(r.fields.__previous_value__=a),{mapValue:r}}(t,n):i instanceof vs?Ud(i,n):i instanceof ys?Xd(i,n):function(o,a){const r=Yd(o,a),l=Wd(r)+Wd(o.Pe);return Sl(r)&&Sl(o.Pe)?Qd(l):Rl(o.serializer,l)}(i,n)}function K1(i,n,t){return i instanceof vs?Ud(i,n):i instanceof ys?Xd(i,n):t}function Yd(i,n){return i instanceof ri?Sl(s=n)||(a=s)&&"doubleValue"in a?n:{integerValue:0}:null;var s,a}class ai extends Oa{}class vs extends Oa{constructor(n){super(),this.elements=n}}function Ud(i,n){const t=Hd(n);for(const s of i.elements)t.some(o=>Tn(o,s))||t.push(s);return{arrayValue:{values:t}}}class ys extends Oa{constructor(n){super(),this.elements=n}}function Xd(i,n){let t=Hd(n);for(const s of i.elements)t=t.filter(o=>!Tn(o,s));return{arrayValue:{values:t}}}class ri extends Oa{constructor(n,t){super(),this.serializer=n,this.Pe=t}}function Wd(i){return rt(i.integerValue||i.doubleValue)}function Hd(i){return so(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class eT{constructor(n,t){this.version=n,this.transformResults=t}}class lt{constructor(n,t){this.updateTime=n,this.exists=t}static none(){return new lt}static exists(n){return new lt(void 0,n)}static updateTime(n){return new lt(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Ra(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class Fa{}function Jd(i,n){if(!i.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return i.isNoDocument()?new ci(i.key,lt.none()):new li(i.key,i.data,lt.none());{const t=i.data,s=jt.empty();let o=new qe(at.comparator);for(let a of n.fields)if(!o.has(a)){let r=t.field(a);null===r&&a.length>1&&(a=a.popLast(),r=t.field(a)),null===r?s.delete(a):s.set(a,r),o=o.add(a)}return new Fn(i.key,s,new Ht(o.toArray()),lt.none())}}function tT(i,n,t){i instanceof li?function(o,a,r){const l=o.value.clone(),c=em(o.fieldTransforms,a,r.transformResults);l.setAll(c),a.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(i,n,t):i instanceof Fn?function(o,a,r){if(!Ra(o.precondition,a))return void a.convertToUnknownDocument(r.version);const l=em(o.fieldTransforms,a,r.transformResults),c=a.data;c.setAll(Zd(o)),c.setAll(l),a.convertToFoundDocument(r.version,c).setHasCommittedMutations()}(i,n,t):n.convertToNoDocument(t.version).setHasCommittedMutations()}function mo(i,n,t,s){return i instanceof li?function(a,r,l,c){if(!Ra(a.precondition,r))return l;const _=a.value.clone(),d=tm(a.fieldTransforms,c,r);return _.setAll(d),r.convertToFoundDocument(r.version,_).setHasLocalMutations(),null}(i,n,t,s):i instanceof Fn?function(a,r,l,c){if(!Ra(a.precondition,r))return l;const _=tm(a.fieldTransforms,c,r),d=r.data;return d.setAll(Zd(a)),d.setAll(_),r.convertToFoundDocument(r.version,d).setHasLocalMutations(),null===l?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(i,n,t,s):(l=t,Ra(i.precondition,r=n)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):l);var r,l}function nT(i,n){let t=null;for(const s of i.fieldTransforms){const o=n.data.field(s.field),a=Yd(s.transform,o||null);null!=a&&(null===t&&(t=jt.empty()),t.set(s.field,a))}return t||null}function Kd(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(o=n.fieldTransforms,!!(void 0===(s=i.fieldTransforms)&&void 0===o||s&&o&&Js(s,o,(a,r)=>function Z1(i,n){return i.field.isEqual(n.field)&&(o=n.transform,(s=i.transform)instanceof vs&&o instanceof vs||s instanceof ys&&o instanceof ys?Js(s.elements,o.elements,Tn):s instanceof ri&&o instanceof ri?Tn(s.Pe,o.Pe):s instanceof ai&&o instanceof ai);var s,o}(a,r))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var s,o}class li extends Fa{constructor(n,t,s,o=[]){super(),this.key=n,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fn extends Fa{constructor(n,t,s,o,a=[]){super(),this.key=n,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Zd(i){const n=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);n.set(t,s)}}),n}function em(i,n,t){const s=new Map;fe(i.length===t.length);for(let o=0;o<t.length;o++){const a=i[o],r=a.transform,l=n.data.field(a.field);s.set(a.field,K1(r,l,t[o]))}return s}function tm(i,n,t){const s=new Map;for(const o of i){const a=o.transform,r=t.data.field(o.field);s.set(o.field,J1(a,r,n))}return s}class ci extends Fa{constructor(n,t){super(),this.key=n,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fl extends Fa{constructor(n,t){super(),this.key=n,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jl{constructor(n,t,s,o){this.batchId=n,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(n,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(n.key)&&tT(a,n,s[o])}}applyToLocalView(n,t){for(const s of this.baseMutations)s.key.isEqual(n.key)&&(t=mo(s,n,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(n.key)&&(t=mo(s,n,t,this.localWriteTime));return t}applyToLocalDocumentSet(n,t){const s=$d();return this.mutations.forEach(o=>{const a=n.get(o.key),r=a.overlayedDocument;let l=this.applyToLocalView(r,a.mutatedFields);l=t.has(o.key)?null:l;const c=Jd(r,l);null!==c&&s.set(o.key,c),r.isValidDocument()||r.convertToNoDocument(be.min())}),s}keys(){return this.mutations.reduce((n,t)=>n.add(t.key),Oe())}isEqual(n){return this.batchId===n.batchId&&Js(this.mutations,n.mutations,(t,s)=>Kd(t,s))&&Js(this.baseMutations,n.baseMutations,(t,s)=>Kd(t,s))}}class zl{constructor(n,t,s,o){this.batch=n,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(n,t,s){fe(n.mutations.length===s.length);let o=function(){return X1}();const a=n.mutations;for(let r=0;r<a.length;r++)o=o.insert(a[r].key,s[r].version);return new zl(n,t,s,o)}}class Ml{constructor(n,t){this.largestBatchId=n,this.mutation=t}getKey(){return this.mutation.key}isEqual(n){return null!==n&&this.mutation===n.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sT{constructor(n,t){this.count=n,this.unchangedNames=t}}var yt,Ve;function im(i){if(void 0===i)return gt("GRPC error has no .code"),$.UNKNOWN;switch(i){case yt.OK:return $.OK;case yt.CANCELLED:return $.CANCELLED;case yt.UNKNOWN:return $.UNKNOWN;case yt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case yt.INTERNAL:return $.INTERNAL;case yt.UNAVAILABLE:return $.UNAVAILABLE;case yt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case yt.NOT_FOUND:return $.NOT_FOUND;case yt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case yt.ABORTED:return $.ABORTED;case yt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case yt.DATA_LOSS:return $.DATA_LOSS;default:return me()}}(Ve=yt||(yt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";const iT=new ps([4294967295,4294967295],0);function am(i){const n=function om(){return new TextEncoder}().encode(i),t=new N_;return t.update(n),new Uint8Array(t.digest())}function rm(i){const n=new DataView(i.buffer),t=n.getUint32(0,!0),s=n.getUint32(4,!0),o=n.getUint32(8,!0),a=n.getUint32(12,!0);return[new ps([t,s],0),new ps([o,a],0)]}class Dl{constructor(n,t,s){if(this.bitmap=n,this.padding=t,this.hashCount=s,t<0||t>=8)throw new po(`Invalid padding: ${t}`);if(s<0)throw new po(`Invalid hash count: ${s}`);if(n.length>0&&0===this.hashCount)throw new po(`Invalid hash count: ${s}`);if(0===n.length&&0!==t)throw new po(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*n.length-t,this.Ie=ps.fromNumber(this.Te)}Ee(n,t,s){let o=n.add(t.multiply(ps.fromNumber(s)));return 1===o.compare(iT)&&(o=new ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(n){return!!(this.bitmap[Math.floor(n/8)]&1<<n%8)}mightContain(n){if(0===this.Te)return!1;const t=am(n),[s,o]=rm(t);for(let a=0;a<this.hashCount;a++){const r=this.Ee(s,o,a);if(!this.de(r))return!1}return!0}static create(n,t,s){const o=n%8==0?0:8-n%8,a=new Uint8Array(Math.ceil(n/8)),r=new Dl(a,o,t);return s.forEach(l=>r.insert(l)),r}insert(n){if(0===this.Te)return;const t=am(n),[s,o]=rm(t);for(let a=0;a<this.hashCount;a++){const r=this.Ee(s,o,a);this.Ae(r)}}Ae(n){const t=Math.floor(n/8);this.bitmap[t]|=1<<n%8}}class po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ho{constructor(n,t,s,o,a){this.snapshotVersion=n,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(n,t,s){const o=new Map;return o.set(n,fo.createSynthesizedTargetChangeForCurrentChange(n,t,s)),new ho(be.min(),o,new Ke(we),Jt(),Oe())}}class fo{constructor(n,t,s,o,a){this.resumeToken=n,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(n,t,s){return new fo(s,t,Oe(),Oe(),Oe())}}class za{constructor(n,t,s,o){this.Re=n,this.removedTargetIds=t,this.key=s,this.Ve=o}}class lm{constructor(n,t){this.targetId=n,this.me=t}}class cm{constructor(n,t,s=pt.EMPTY_BYTE_STRING,o=null){this.state=n,this.targetIds=t,this.resumeToken=s,this.cause=o}}class um{constructor(){this.fe=0,this.ge=_m(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(n){n.approximateByteSize()>0&&(this.we=!0,this.pe=n)}ve(){let n=Oe(),t=Oe(),s=Oe();return this.ge.forEach((o,a)=>{switch(a){case 0:n=n.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:me()}}),new fo(this.pe,this.ye,n,t,s)}Ce(){this.we=!1,this.ge=_m()}Fe(n,t){this.we=!0,this.ge=this.ge.insert(n,t)}Me(n){this.we=!0,this.ge=this.ge.remove(n)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oT{constructor(n){this.Le=n,this.Be=new Map,this.ke=Jt(),this.qe=Ma(),this.Qe=Ma(),this.Ke=new Ke(we)}$e(n){for(const t of n.Re)n.Ve&&n.Ve.isFoundDocument()?this.Ue(t,n.Ve):this.We(t,n.key,n.Ve);for(const t of n.removedTargetIds)this.We(t,n.key,n.Ve)}Ge(n){this.forEachTarget(n,t=>{const s=this.ze(t);switch(n.state){case 0:this.je(t)&&s.De(n.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(n.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(n.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(n.resumeToken));break;default:me()}})}forEachTarget(n,t){n.targetIds.length>0?n.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.je(o)&&t(o)})}Je(n){const t=n.targetId,s=n.me.count,o=this.Ye(t);if(o){const a=o.target;if(ka(a))if(0===s){const r=new ce(a.path);this.We(t,r,nt.newNoDocument(r,be.min()))}else fe(1===s);else{const r=this.Ze(t);if(r!==s){const l=this.Xe(n),c=l?this.et(l,n,r):1;0!==c&&(this.He(t),this.Ke=this.Ke.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(n){const t=n.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=t;let r,l;try{r=An(s).toUint8Array()}catch(c){if(c instanceof md)return sn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Dl(r,o,a)}catch(c){return sn(c instanceof po?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===l.Te?null:l}et(n,t,s){return t.me.count===s-this.rt(n,t.targetId)?0:2}rt(n,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(a=>{const r=this.Le.nt(),l=`projects/${r.projectId}/databases/${r.database}/documents/${a.path.canonicalString()}`;n.mightContain(l)||(this.We(t,a,null),o++)}),o}it(n){const t=new Map;this.Be.forEach((a,r)=>{const l=this.Ye(r);if(l){if(a.current&&ka(l.target)){const c=new ce(l.target.path);this.st(c).has(r)||this.ot(r,c)||this.We(r,c,nt.newNoDocument(c,n))}a.be&&(t.set(r,a.ve()),a.Ce())}});let s=Oe();this.Qe.forEach((a,r)=>{let l=!0;r.forEachWhile(c=>{const _=this.Ye(c);return!_||"TargetPurposeLimboResolution"===_.purpose||(l=!1,!1)}),l&&(s=s.add(a))}),this.ke.forEach((a,r)=>r.setReadTime(n));const o=new ho(n,t,this.Ke,this.ke,s);return this.ke=Jt(),this.qe=Ma(),this.Qe=Ma(),this.Ke=new Ke(we),o}Ue(n,t){if(!this.je(n))return;const s=this.ot(n,t.key)?2:0;this.ze(n).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(n)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(n))}We(n,t,s){if(!this.je(n))return;const o=this.ze(n);this.ot(n,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(n)),this.Qe=this.Qe.insert(t,this._t(t).add(n)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(n){this.Be.delete(n)}Ze(n){const t=this.ze(n).ve();return this.Le.getRemoteKeysForTarget(n).size+t.addedDocuments.size-t.removedDocuments.size}xe(n){this.ze(n).xe()}ze(n){let t=this.Be.get(n);return t||(t=new um,this.Be.set(n,t)),t}_t(n){let t=this.Qe.get(n);return t||(t=new qe(we),this.Qe=this.Qe.insert(n,t)),t}st(n){let t=this.qe.get(n);return t||(t=new qe(we),this.qe=this.qe.insert(n,t)),t}je(n){const t=null!==this.Ye(n);return t||ne("WatchChangeAggregator","Detected inactive target",n),t}Ye(n){const t=this.Be.get(n);return t&&t.Se?null:this.Le.ut(n)}He(n){this.Be.set(n,new um),this.Le.getRemoteKeysForTarget(n).forEach(t=>{this.We(n,t,null)})}ot(n,t){return this.Le.getRemoteKeysForTarget(n).has(t)}}function Ma(){return new Ke(ce.comparator)}function _m(){return new Ke(ce.comparator)}const aT={asc:"ASCENDING",desc:"DESCENDING"},rT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lT={and:"AND",or:"OR"};class cT{constructor(n,t){this.databaseId=n,this.useProto3Json=t}}function Gl(i,n){return i.useProto3Json||Zi(n)?n:{value:n}}function ui(i,n){return i.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function dm(i,n){return i.useProto3Json?n.toBase64():n.toUint8Array()}function uT(i,n){return ui(i,n.toTimestamp())}function Tt(i){return fe(!!i),be.fromTimestamp(function(t){const s=En(t);return new dt(s.seconds,s.nanos)}(i))}function Pl(i,n){return Nl(i,n).canonicalString()}function Nl(i,n){const t=(o=i,new ze(["projects",o.projectId,"databases",o.database])).child("documents");var o;return void 0===n?t:t.child(n)}function mm(i){const n=ze.fromString(i);return fe(wm(n)),n}function go(i,n){return Pl(i.databaseId,n.path)}function xn(i,n){const t=mm(n);if(t.get(1)!==i.databaseId.projectId)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ce(fm(t))}function pm(i,n){return Pl(i.databaseId,n)}function Vl(i){return new ze(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function fm(i){return fe(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function gm(i,n,t){return{name:go(i,n),fields:t.value.mapValue.fields}}function bm(i,n){return{documents:[pm(i,n.path)]}}function Da(i,n){const t={structuredQuery:{}},s=n.path;let o;null!==n.collectionGroup?(o=s,t.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=pm(i,o);const a=function(_){if(0!==_.length)return Sm(Ye.create(_,"and"))}(n.filters);a&&(t.structuredQuery.where=a);const r=function(_){if(0!==_.length)return _.map(d=>{return{field:Jn((f=d).field),direction:hT(f.dir)};var f})}(n.orderBy);r&&(t.structuredQuery.orderBy=r);const l=Gl(i,n.limit);return null!==l&&(t.structuredQuery.limit=l),n.startAt&&(t.structuredQuery.startAt={before:(_=n.startAt).inclusive,values:_.position}),n.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(n.endAt)),{ct:t,parent:o};var _}function vm(i){let n=function hm(i){const n=mm(i);return 4===n.length?ze.emptyPath():fm(n)}(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){fe(1===s);const d=t.from[0];d.allDescendants?o=d.collectionId:n=n.child(d.collectionId)}let a=[];t.where&&(a=function(p){const f=ym(p);return f instanceof Ye&&Il(f)?f.getFilters():[f]}(t.where));let r=[];t.orderBy&&(r=t.orderBy.map(f=>{return new oo(_i((I=f).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let l=null;t.limit&&(l=function(p){let f;return f="object"==typeof p?p.value:p,Zi(f)?null:f}(t.limit));let c=null;var p;t.startAt&&(c=new Hn((p=t.startAt).values||[],!!p.before));let _=null;return t.endAt&&(_=function(p){return new Hn(p.values||[],!p.before)}(t.endAt)),function zd(i,n,t,s,o,a,r,l){return new On(i,n,t,s,o,a,r,l)}(n,o,r,a,l,"F",c,_)}function ym(i){return void 0!==i.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=_i(t.unaryFilter.field);return Me.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=_i(t.unaryFilter.field);return Me.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_i(t.unaryFilter.field);return Me.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=_i(t.unaryFilter.field);return Me.create(r,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(i):void 0!==i.fieldFilter?Me.create(_i((t=i).fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==i.compositeFilter?function(t){return Ye.create(t.compositeFilter.filters.map(s=>ym(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return me()}}(t.compositeFilter.op))}(i):me();var t}function hT(i){return aT[i]}function fT(i){return rT[i]}function gT(i){return lT[i]}function Jn(i){return{fieldPath:i.canonicalString()}}function _i(i){return at.fromServerFormat(i.fieldPath)}function Sm(i){return i instanceof Me?function(t){if("=="===t.op){if(gd(t.value))return{unaryFilter:{field:Jn(t.field),op:"IS_NAN"}};if(fd(t.value))return{unaryFilter:{field:Jn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gd(t.value))return{unaryFilter:{field:Jn(t.field),op:"IS_NOT_NAN"}};if(fd(t.value))return{unaryFilter:{field:Jn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jn(t.field),op:fT(t.op),value:t.value}}}(i):i instanceof Ye?function(t){const s=t.getFilters().map(o=>Sm(o));return 1===s.length?s[0]:{compositeFilter:{op:gT(t.op),filters:s}}}(i):me()}function TT(i){const n=[];return i.fields.forEach(t=>n.push(t.canonicalString())),{fieldPaths:n}}function wm(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class jn{constructor(n,t,s,o,a=be.min(),r=be.min(),l=pt.EMPTY_BYTE_STRING,c=null){this.target=n,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(n){return new jn(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(n,t){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,n,null)}withExpectedCount(n){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,n)}withLastLimboFreeSnapshotVersion(n){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken,this.expectedCount)}}class Im{constructor(n){this.ht=n}}function Bl(i){const n=vm({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Aa(n,n.limit,"L"):n}class Cs{constructor(){}Et(n,t){this.dt(n,t),t.At()}dt(n,t){if("nullValue"in n)this.Rt(t,5);else if("booleanValue"in n)this.Rt(t,10),t.Vt(n.booleanValue?1:0);else if("integerValue"in n)this.Rt(t,15),t.Vt(rt(n.integerValue));else if("doubleValue"in n){const s=rt(n.doubleValue);isNaN(s)?this.Rt(t,13):(this.Rt(t,15),eo(s)?t.Vt(0):t.Vt(s))}else if("timestampValue"in n){let s=n.timestampValue;this.Rt(t,20),"string"==typeof s&&(s=En(s)),t.ft(`${s.seconds||""}`),t.Vt(s.nanos||0)}else if("stringValue"in n)this.gt(n.stringValue,t),this.yt(t);else if("bytesValue"in n)this.Rt(t,30),t.wt(An(n.bytesValue)),this.yt(t);else if("referenceValue"in n)this.St(n.referenceValue,t);else if("geoPointValue"in n){const s=n.geoPointValue;this.Rt(t,45),t.Vt(s.latitude||0),t.Vt(s.longitude||0)}else"mapValue"in n?Td(n)?this.Rt(t,Number.MAX_SAFE_INTEGER):Ca(n)?this.bt(n.mapValue,t):(this.Dt(n.mapValue,t),this.yt(t)):"arrayValue"in n?(this.vt(n.arrayValue,t),this.yt(t)):me()}gt(n,t){this.Rt(t,25),this.Ct(n,t)}Ct(n,t){t.ft(n)}Dt(n,t){const s=n.fields||{};this.Rt(t,55);for(const o of Object.keys(s))this.gt(o,t),this.dt(s[o],t)}bt(n,t){var s,o;const a=n.fields||{};this.Rt(t,53);const r="value",l=(null===(o=null===(s=a[r].arrayValue)||void 0===s?void 0:s.values)||void 0===o?void 0:o.length)||0;this.Rt(t,15),t.Vt(rt(l)),this.gt(r,t),this.dt(a[r],t)}vt(n,t){const s=n.values||[];this.Rt(t,50);for(const o of s)this.dt(o,t)}St(n,t){this.Rt(t,37),ce.fromName(n).path.forEach(s=>{this.Rt(t,60),this.Ct(s,t)})}Rt(n,t){n.Vt(t)}yt(n){n.Vt(2)}}Cs.Ft=new Cs;class kT{constructor(){this.ln=new Xl}addToCollectionParentIndex(n,t){return this.ln.add(t),G.resolve()}getCollectionParents(n,t){return G.resolve(this.ln.getEntries(t))}addFieldIndex(n,t){return G.resolve()}deleteFieldIndex(n,t){return G.resolve()}deleteAllFieldIndexes(n){return G.resolve()}createTargetIndexes(n,t){return G.resolve()}getDocumentsMatchingTarget(n,t){return G.resolve(null)}getIndexType(n,t){return G.resolve(0)}getFieldIndexes(n,t){return G.resolve([])}getNextCollectionGroupToUpdate(n){return G.resolve(null)}getMinOffset(n,t){return G.resolve(Kt.min())}getMinOffsetFromCollectionGroup(n,t){return G.resolve(Kt.min())}updateCollectionGroup(n,t,s){return G.resolve()}updateIndexEntries(n,t){return G.resolve()}}class Xl{constructor(){this.index={}}add(n){const t=n.lastSegment(),s=n.popLast(),o=this.index[t]||new qe(ze.comparator),a=!o.has(s);return this.index[t]=o.add(s),a}has(n){const t=n.lastSegment(),s=n.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(n){return(this.index[n]||new qe(ze.comparator)).toArray()}}new Uint8Array(0);const Vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Lt{static withCacheSize(n){return new Lt(n,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(n,t,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);class Es{constructor(n){this.kn=n}next(){return this.kn+=2,this.kn}static qn(){return new Es(0)}static Qn(){return new Es(-1)}}function qm([i,n],[t,s]){const o=we(i,t);return 0===o?we(n,s):o}class OT{constructor(n){this.Gn=n,this.buffer=new qe(qm),this.zn=0}jn(){return++this.zn}Hn(n){const t=[n,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();qm(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ym{constructor(n,t,s){this.garbageCollector=n,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(n){var t=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,W.A)(function*(){t.Jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){qn(s)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Qn(s)}yield t.Yn(3e5)}))}}class RT{constructor(n,t){this.Zn=n,this.params=t}calculateTargetCount(n,t){return this.Zn.Xn(n).next(s=>Math.floor(t/100*s))}nthSequenceNumber(n,t){if(0===t)return G.resolve(Zt.oe);const s=new OT(t);return this.Zn.forEachTarget(n,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(n,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(n,t,s){return this.Zn.removeTargets(n,t,s)}removeOrphanedDocuments(n,t){return this.Zn.removeOrphanedDocuments(n,t)}collect(n,t){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Vm)):this.getCacheSize(n).next(s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vm):this.tr(n,t))}getCacheSize(n){return this.Zn.getCacheSize(n)}tr(n,t){let s,o,a,r,l,c,_;const d=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),o=this.params.maximumSequenceNumbersToCollect):o=p,r=Date.now(),this.nthSequenceNumber(n,o))).next(p=>(s=p,l=Date.now(),this.removeTargets(n,s,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(n,s))).next(p=>(_=Date.now(),Hs()<=hn.$b.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-d}ms\n\tDetermined least recently used ${o} in `+(l-r)+`ms\n\tRemoved ${a} targets in `+(c-l)+`ms\n\tRemoved ${p} documents in `+(_-c)+`ms\nTotal Duration: ${_-d}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:p})))}}class Xm{constructor(){this.changes=new Rn(n=>n.toString(),(n,t)=>n.isEqual(t)),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,t){this.assertNotApplied(),this.changes.set(n,nt.newInvalidDocument(n).setReadTime(t))}getEntry(n,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?G.resolve(s):this.getFromCache(n,t)}getEntries(n,t){return this.getAllFromCache(n,t)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class MT{constructor(n,t){this.overlayedDocument=n,this.mutatedFields=t}}class Zm{constructor(n,t,s,o){this.remoteDocumentCache=n,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(n,t){let s=null;return this.documentOverlayCache.getOverlay(n,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(n,t))).next(o=>(null!==s&&mo(s.mutation,o,Ht.empty(),dt.now()),o))}getDocuments(n,t){return this.remoteDocumentCache.getEntries(n,t).next(s=>this.getLocalViewOfDocuments(n,s,Oe()).next(()=>s))}getLocalViewOfDocuments(n,t,s=Oe()){const o=bn();return this.populateOverlays(n,o,t).next(()=>this.computeViews(n,t,o,s).next(a=>{let r=co();return a.forEach((l,c)=>{r=r.insert(l,c.overlayedDocument)}),r}))}getOverlayedDocuments(n,t){const s=bn();return this.populateOverlays(n,s,t).next(()=>this.computeViews(n,t,s,Oe()))}populateOverlays(n,t,s){const o=[];return s.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(n,o).next(a=>{a.forEach((r,l)=>{t.set(r,l)})})}computeViews(n,t,s,o){let a=Jt();const r=uo(),l=uo();return t.forEach((c,_)=>{const d=s.get(_.key);o.has(_.key)&&(void 0===d||d.mutation instanceof Fn)?a=a.insert(_.key,_):void 0!==d?(r.set(_.key,d.mutation.getFieldMask()),mo(d.mutation,_,d.mutation.getFieldMask(),dt.now())):r.set(_.key,Ht.empty())}),this.recalculateAndSaveOverlays(n,a).next(c=>(c.forEach((_,d)=>r.set(_,d)),t.forEach((_,d)=>{var p;return l.set(_,new MT(d,null!==(p=r.get(_))&&void 0!==p?p:null))}),l))}recalculateAndSaveOverlays(n,t){const s=uo();let o=new Ke((r,l)=>r-l),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,t).next(r=>{for(const l of r)l.keys().forEach(c=>{const _=t.get(c);if(null===_)return;let d=s.get(c)||Ht.empty();d=l.applyToLocalView(_,d),s.set(c,d);const p=(o.get(l.batchId)||Oe()).add(c);o=o.insert(l.batchId,p)})}).next(()=>{const r=[],l=o.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),_=c.key,d=c.value,p=$d();d.forEach(f=>{if(!a.has(f)){const b=Jd(t.get(f),s.get(f));null!==b&&p.set(f,b),a=a.add(f)}}),r.push(this.documentOverlayCache.saveOverlays(n,_,p))}return G.waitFor(r)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(n,t){return this.remoteDocumentCache.getEntries(n,t).next(s=>this.recalculateAndSaveOverlays(n,s))}getDocumentsMatchingQuery(n,t,s,o){return ce.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(n,t.path):El(t)?this.getDocumentsMatchingCollectionGroupQuery(n,t,s,o):this.getDocumentsMatchingCollectionQuery(n,t,s,o);var r}getNextDocuments(n,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(n,t,s,o).next(a=>{const r=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,t,s.largestBatchId,o-a.size):G.resolve(bn());let l=-1,c=a;return r.next(_=>G.forEach(_,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),a.get(d)?G.resolve():this.remoteDocumentCache.getEntry(n,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(n,_,a)).next(()=>this.computeViews(n,c,_,Oe())).next(d=>({batchId:l,changes:Bd(d)})))})}getDocumentsMatchingDocumentQuery(n,t){return this.getDocument(n,new ce(t)).next(s=>{let o=co();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(n,t,s,o){const a=t.collectionGroup;let r=co();return this.indexManager.getCollectionParents(n,a).next(l=>G.forEach(l,c=>{const _=(p=t,f=c.child(a),new On(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,f;return this.getDocumentsMatchingCollectionQuery(n,_,s,o).next(d=>{d.forEach((p,f)=>{r=r.insert(p,f)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(n,t,s,o){let a;return this.documentOverlayCache.getOverlaysForCollection(n,t.path,s.largestBatchId).next(r=>(a=r,this.remoteDocumentCache.getDocumentsMatchingQuery(n,t,s,a,o))).next(r=>{a.forEach((c,_)=>{const d=_.getKey();null===r.get(d)&&(r=r.insert(d,nt.newInvalidDocument(d)))});let l=co();return r.forEach((c,_)=>{const d=a.get(c);void 0!==d&&mo(d.mutation,_,Ht.empty(),dt.now()),lo(t,_)&&(l=l.insert(c,_))}),l})}}class DT{constructor(n){this.serializer=n,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(n,t){return G.resolve(this.Tr.get(t))}saveBundleMetadata(n,t){return this.Tr.set(t.id,{id:(o=t).id,version:o.version,createTime:Tt(o.createTime)}),G.resolve();var o}getNamedQuery(n,t){return G.resolve(this.Ir.get(t))}saveNamedQuery(n,t){return this.Ir.set(t.name,{name:(o=t).name,query:Bl(o.bundledQuery),readTime:Tt(o.readTime)}),G.resolve();var o}}class GT{constructor(){this.overlays=new Ke(ce.comparator),this.Er=new Map}getOverlay(n,t){return G.resolve(this.overlays.get(t))}getOverlays(n,t){const s=bn();return G.forEach(t,o=>this.getOverlay(n,o).next(a=>{null!==a&&s.set(o,a)})).next(()=>s)}saveOverlays(n,t,s){return s.forEach((o,a)=>{this.Tt(n,t,a)}),G.resolve()}removeOverlaysForBatchId(n,t,s){const o=this.Er.get(s);return void 0!==o&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(s)),G.resolve()}getOverlaysForCollection(n,t,s){const o=bn(),a=t.length+1,r=new ce(t.child("")),l=this.overlays.getIteratorFrom(r);for(;l.hasNext();){const c=l.getNext().value,_=c.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&c.largestBatchId>s&&o.set(c.getKey(),c)}return G.resolve(o)}getOverlaysForCollectionGroup(n,t,s,o){let a=new Ke((_,d)=>_-d);const r=this.overlays.getIterator();for(;r.hasNext();){const _=r.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>s){let d=a.get(_.largestBatchId);null===d&&(d=bn(),a=a.insert(_.largestBatchId,d)),d.set(_.getKey(),_)}}const l=bn(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((_,d)=>l.set(_,d)),!(l.size()>=o)););return G.resolve(l)}Tt(n,t,s){const o=this.overlays.get(s.key);if(null!==o){const r=this.Er.get(o.largestBatchId).delete(s.key);this.Er.set(o.largestBatchId,r)}this.overlays=this.overlays.insert(s.key,new Ml(t,s));let a=this.Er.get(t);void 0===a&&(a=Oe(),this.Er.set(t,a)),this.Er.set(t,a.add(s.key))}}class PT{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(n){return G.resolve(this.sessionToken)}setSessionToken(n,t){return this.sessionToken=t,G.resolve()}}class Wl{constructor(){this.dr=new qe(Ot.Ar),this.Rr=new qe(Ot.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(n,t){const s=new Ot(n,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(n,t){n.forEach(s=>this.addReference(s,t))}removeReference(n,t){this.gr(new Ot(n,t))}pr(n,t){n.forEach(s=>this.removeReference(s,t))}yr(n){const t=new ce(new ze([])),s=new Ot(t,n),o=new Ot(t,n+1),a=[];return this.Rr.forEachInRange([s,o],r=>{this.gr(r),a.push(r.key)}),a}wr(){this.dr.forEach(n=>this.gr(n))}gr(n){this.dr=this.dr.delete(n),this.Rr=this.Rr.delete(n)}Sr(n){const t=new ce(new ze([])),s=new Ot(t,n),o=new Ot(t,n+1);let a=Oe();return this.Rr.forEachInRange([s,o],r=>{a=a.add(r.key)}),a}containsKey(n){const t=new Ot(n,0),s=this.dr.firstAfterOrEqual(t);return null!==s&&n.isEqual(s.key)}}class Ot{constructor(n,t){this.key=n,this.br=t}static Ar(n,t){return ce.comparator(n.key,t.key)||we(n.br,t.br)}static Vr(n,t){return we(n.br,t.br)||ce.comparator(n.key,t.key)}}class NT{constructor(n,t){this.indexManager=n,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new qe(Ot.Ar)}checkEmpty(n){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(n,t,s,o){const a=this.Dr;this.Dr++;const r=new jl(a,t,s,o);this.mutationQueue.push(r);for(const l of o)this.vr=this.vr.add(new Ot(l.key,a)),this.indexManager.addToCollectionParentIndex(n,l.key.path.popLast());return G.resolve(r)}lookupMutationBatch(n,t){return G.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(n,t){const o=this.Fr(t+1),a=o<0?0:o;return G.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(n){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,t){const s=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([s,o],r=>{const l=this.Cr(r.br);a.push(l)}),G.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(n,t){let s=new qe(we);return t.forEach(o=>{const a=new Ot(o,0),r=new Ot(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,r],l=>{s=s.add(l.br)})}),G.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(n,t){const s=t.path,o=s.length+1;let a=s;ce.isDocumentKey(a)||(a=a.child(""));const r=new Ot(new ce(a),0);let l=new qe(we);return this.vr.forEachWhile(c=>{const _=c.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(l=l.add(c.br)),!0)},r),G.resolve(this.Mr(l))}Mr(n){const t=[];return n.forEach(s=>{const o=this.Cr(s);null!==o&&t.push(o)}),t}removeMutationBatch(n,t){fe(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let s=this.vr;return G.forEach(t.mutations,o=>{const a=new Ot(o.key,t.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(n,o.key)}).next(()=>{this.vr=s})}Ln(n){}containsKey(n,t){const s=new Ot(t,0),o=this.vr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(n){return G.resolve()}Or(n,t){return this.Fr(n)}Fr(n){return 0===this.mutationQueue.length?0:n-this.mutationQueue[0].batchId}Cr(n){const t=this.Fr(n);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class VT{constructor(n){this.Nr=n,this.docs=new Ke(ce.comparator),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,t){const s=t.key,o=this.docs.get(s),a=o?o.size:0,r=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:r}),this.size+=r-a,this.indexManager.addToCollectionParentIndex(n,s.path.popLast())}removeEntry(n){const t=this.docs.get(n);t&&(this.docs=this.docs.remove(n),this.size-=t.size)}getEntry(n,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(n,t){let s=Jt();return t.forEach(o=>{const a=this.docs.get(o);s=s.insert(o,a?a.document.mutableCopy():nt.newInvalidDocument(o))}),G.resolve(s)}getDocumentsMatchingQuery(n,t,s,o){let a=Jt();const r=t.path,l=new ce(r.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:_,value:{document:d}}=c.getNext();if(!r.isPrefixOf(_.path))break;_.path.length>r.length+1||gl(new Kt((i=d).readTime,i.key,-1),s)<=0||(o.has(d.key)||lo(t,d))&&(a=a.insert(d.key,d.mutableCopy()))}var i;return G.resolve(a)}getAllFromCollectionGroup(n,t,s,o){me()}Lr(n,t){return G.forEach(this.docs,s=>t(s))}newChangeBuffer(n){return new LT(this)}getSize(n){return G.resolve(this.size)}}class LT extends Xm{constructor(n){super(),this.hr=n}applyChanges(n){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(n,o)):this.hr.removeEntry(s)}),G.waitFor(t)}getFromCache(n,t){return this.hr.getEntry(n,t)}getAllFromCache(n,t){return this.hr.getEntries(n,t)}}class BT{constructor(n){this.persistence=n,this.Br=new Rn(t=>xs(t),ao),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.kr=0,this.qr=new Wl,this.targetCount=0,this.Qr=Es.qn()}forEachTarget(n,t){return this.Br.forEach((s,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(n){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return G.resolve(this.kr)}allocateTargetId(n){return this.highestTargetId=this.Qr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(n,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),G.resolve()}Un(n){this.Br.set(n.target,n);const t=n.targetId;t>this.highestTargetId&&(this.Qr=new Es(t),this.highestTargetId=t),n.sequenceNumber>this.kr&&(this.kr=n.sequenceNumber)}addTargetData(n,t){return this.Un(t),this.targetCount+=1,G.resolve()}updateTargetData(n,t){return this.Un(t),G.resolve()}removeTargetData(n,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(n,t,s){let o=0;const a=[];return this.Br.forEach((r,l)=>{l.sequenceNumber<=t&&null===s.get(l.targetId)&&(this.Br.delete(r),a.push(this.removeMatchingKeysForTargetId(n,l.targetId)),o++)}),G.waitFor(a).next(()=>o)}getTargetCount(n){return G.resolve(this.targetCount)}getTargetData(n,t){const s=this.Br.get(t)||null;return G.resolve(s)}addMatchingKeys(n,t,s){return this.qr.mr(t,s),G.resolve()}removeMatchingKeys(n,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(r=>{a.push(o.markPotentiallyOrphaned(n,r))}),G.waitFor(a)}removeMatchingKeysForTargetId(n,t){return this.qr.yr(t),G.resolve()}getMatchingKeysForTargetId(n,t){const s=this.qr.Sr(t);return G.resolve(s)}containsKey(n,t){return G.resolve(this.qr.containsKey(t))}}class Hl{constructor(n,t){this.Kr={},this.overlays={},this.$r=new Zt(0),this.Ur=!1,this.Ur=!0,this.Wr=new PT,this.referenceDelegate=n(this),this.Gr=new BT(this),this.indexManager=new kT,this.remoteDocumentCache=new VT(s=>this.referenceDelegate.zr(s)),this.serializer=new Im(t),this.jr=new DT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let t=this.overlays[n.toKey()];return t||(t=new GT,this.overlays[n.toKey()]=t),t}getMutationQueue(n,t){let s=this.Kr[n.toKey()];return s||(s=new NT(t,this.referenceDelegate),this.Kr[n.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(n,t,s){ne("MemoryPersistence","Starting transaction:",n);const o=new $T(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(n,t){return G.or(Object.values(this.Kr).map(s=>()=>s.containsKey(n,t)))}}class $T extends Z_{constructor(n){super(),this.currentSequenceNumber=n}}class Qa{constructor(n){this.persistence=n,this.Zr=new Wl,this.Xr=null}static ei(n){return new Qa(n)}get ti(){if(this.Xr)return this.Xr;throw me()}addReference(n,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),G.resolve()}removeReference(n,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),G.resolve()}markPotentiallyOrphaned(n,t){return this.ti.add(t.toString()),G.resolve()}removeTarget(n,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>s.removeTargetData(n,t))}Hr(){this.Xr=new Set}Jr(n){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ti,s=>{const o=ce.fromPath(s);return this.ni(n,o).next(a=>{a||t.removeEntry(o,be.min())})}).next(()=>(this.Xr=null,t.apply(n)))}updateLimboDocument(n,t){return this.ni(n,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(n){return 0}ni(n,t){return G.or([()=>G.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(n,t),()=>this.persistence.Yr(n,t)])}}class qa{constructor(n,t){this.persistence=n,this.ri=new Rn(s=>function Nt(i){let n="";for(let t=0;t<i.length;t++)n.length>0&&(n=sd(n)),n=h1(i.get(t),n);return sd(n)}(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=function Um(i,n){return new RT(i,n)}(this,t)}static ei(n,t){return new qa(n,t)}Hr(){}Jr(n){return G.resolve()}forEachTarget(n,t){return this.persistence.getTargetCache().forEachTarget(n,t)}Xn(n){const t=this.nr(n);return this.persistence.getTargetCache().getTargetCount(n).next(s=>t.next(o=>s+o))}nr(n){let t=0;return this.er(n,s=>{t++}).next(()=>t)}er(n,t){return G.forEach(this.ri,(s,o)=>this.ir(n,s,o).next(a=>a?G.resolve():t(o)))}removeTargets(n,t,s){return this.persistence.getTargetCache().removeTargets(n,t,s)}removeOrphanedDocuments(n,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Lr(n,r=>this.ir(n,r,t).next(l=>{l||(s++,a.removeEntry(r,be.min()))})).next(()=>a.apply(n)).next(()=>s)}markPotentiallyOrphaned(n,t){return this.ri.set(t,n.currentSequenceNumber),G.resolve()}removeTarget(n,t){const s=t.withSequenceNumber(n.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(n,s)}addReference(n,t,s){return this.ri.set(s,n.currentSequenceNumber),G.resolve()}removeReference(n,t,s){return this.ri.set(s,n.currentSequenceNumber),G.resolve()}updateLimboDocument(n,t){return this.ri.set(t,n.currentSequenceNumber),G.resolve()}zr(n){let t=n.key.toString().length;return n.isFoundDocument()&&(t+=wa(n.data.value)),t}ir(n,t,s){return G.or([()=>this.persistence.Yr(n,t),()=>this.persistence.getTargetCache().containsKey(n,t),()=>{const o=this.ri.get(t);return G.resolve(void 0!==o&&o>s)}])}getCacheSize(n){return this.persistence.getRemoteDocumentCache().getSize(n)}}class ec{constructor(n,t,s,o){this.targetId=n,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(n,t){let s=Oe(),o=Oe();for(const a of t.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new ec(n,t.fromCache,s,o)}}class qT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(n){this._documentReadCount+=n}}class tp{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=(0,ot.nr)()?8:function ed(i){const n=i.match(/Android ([\d.]+)/i),t=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(t)}((0,ot.ZQ)())>0?6:4}initialize(n,t){this.Zi=n,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(n,t,s,o){const a={result:null};return this.Xi(n,t).next(r=>{a.result=r}).next(()=>{if(!a.result)return this.es(n,t,o,s).next(r=>{a.result=r})}).next(()=>{if(a.result)return;const r=new qT;return this.ts(n,t,r).next(l=>{if(a.result=l,this.Hi)return this.ns(n,t,r,l.size)})}).next(()=>a.result)}ns(n,t,s,o){return s.documentReadCount<this.Ji?(Hs()<=hn.$b.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",oi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),G.resolve()):(Hs()<=hn.$b.DEBUG&&ne("QueryEngine","Query:",oi(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(Hs()<=hn.$b.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",oi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(n,Vt(t))):G.resolve())}Xi(n,t){if(Md(t))return G.resolve(null);let s=Vt(t);return this.indexManager.getIndexType(n,s).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Aa(t,null,"F"),s=Vt(t)),this.indexManager.getDocumentsMatchingTarget(n,s).next(a=>{const r=Oe(...a);return this.Zi.getDocuments(n,r).next(l=>this.indexManager.getMinOffset(n,s).next(c=>{const _=this.rs(t,l);return this.ss(t,_,r,c.readTime)?this.Xi(n,Aa(t,null,"F")):this.os(n,_,t,c)}))})))}es(n,t,s,o){return Md(t)||o.isEqual(be.min())?G.resolve(null):this.Zi.getDocuments(n,s).next(a=>{const r=this.rs(t,a);return this.ss(t,r,s,o)?G.resolve(null):(Hs()<=hn.$b.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oi(t)),this.os(n,r,t,function H_(i,n){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=be.fromTimestamp(1e9===s?new dt(t+1,0):new dt(t,s));return new Kt(o,ce.empty(),n)}(o,-1)).next(l=>l))})}rs(n,t){let s=new qe(Vd(n));return t.forEach((o,a)=>{lo(n,a)&&(s=s.add(a))}),s}ss(n,t,s,o){if(null===n.limit)return!1;if(s.size!==t.size)return!0;const a="F"===n.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(n,t,s){return Hs()<=hn.$b.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",oi(t)),this.Zi.getDocumentsMatchingQuery(n,t,Kt.min(),s)}os(n,t,s,o){return this.Zi.getDocumentsMatchingQuery(n,s,o).next(a=>(t.forEach(r=>{a=a.insert(r.key,r)}),a))}}class YT{constructor(n,t,s,o){this.persistence=n,this._s=t,this.serializer=o,this.us=new Ke(we),this.cs=new Rn(a=>xs(a),ao),this.ls=new Map,this.hs=n.getRemoteDocumentCache(),this.Gr=n.getTargetCache(),this.jr=n.getBundleCache(),this.Ps(s)}Ps(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new Zm(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>n.collect(t,this.us))}}function sp(i,n){return tc.apply(this,arguments)}function tc(){return(tc=(0,W.A)(function*(i,n){const t=re(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(a=>(o=a,t.Ps(n),t.mutationQueue.getAllMutationBatches(s))).next(a=>{const r=[],l=[];let c=Oe();for(const _ of o){r.push(_.batchId);for(const d of _.mutations)c=c.add(d.key)}for(const _ of a){l.push(_.batchId);for(const d of _.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(s,c).next(_=>({Ts:_,removedBatchIds:r,addedBatchIds:l}))})})})).apply(this,arguments)}function ip(i){const n=re(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",t=>n.Gr.getLastRemoteSnapshotVersion(t))}function WT(i,n){const t=re(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,n)))}function gi(i,n,t){return nc.apply(this,arguments)}function nc(){return(nc=(0,W.A)(function*(i,n,t){const s=re(i),o=s.us.get(n),a=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",a,r=>s.persistence.referenceDelegate.removeTarget(r,o)))}catch(r){if(!qn(r))throw r;ne("LocalStore",`Failed to update sequence numbers for target ${n}: ${r}`)}s.us=s.us.remove(n),s.cs.delete(o.target)})).apply(this,arguments)}function Ua(i,n,t){const s=re(i);let o=be.min(),a=Oe();return s.persistence.runTransaction("Execute query","readwrite",r=>function(c,_,d){const p=re(c),f=p.cs.get(d);return void 0!==f?G.resolve(p.us.get(f)):p.Gr.getTargetData(_,d)}(s,r,Vt(n)).next(l=>{if(l)return o=l.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(r,l.targetId).next(c=>{a=c})}).next(()=>s._s.getDocumentsMatchingQuery(r,n,t?o:be.min(),t?a:Oe())).next(l=>(function lp(i,n,t){let s=i.ls.get(n)||be.min();t.forEach((o,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),i.ls.set(n,s)}(s,function Nd(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}(n),l),{documents:l,ds:a})))}class rc{constructor(){this.activeTargetIds=function Ol(){return H1}()}ps(n){this.activeTargetIds=this.activeTargetIds.add(n)}ys(n){this.activeTargetIds=this.activeTargetIds.delete(n)}gs(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class _p{constructor(){this._o=new rc,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,t,s){}addLocalQueryTarget(n,t=!0){return t&&this._o.ps(n),this.ao[n]||"not-current"}updateQueryState(n,t,s){this.ao[n]=t}removeLocalQueryTarget(n){this._o.ys(n)}isLocalQueryTarget(n){return this._o.activeTargetIds.has(n)}clearQueryState(n){delete this.ao[n]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(n){return this._o.activeTargetIds.has(n)}start(){return this._o=new rc,Promise.resolve()}handleUserChange(n,t,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}class KT{uo(n){}shutdown(){}}class dp{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(n){this.To.push(n)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.To)n(0)}Po(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.To)n(1)}static p(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ha=null;function cc(){return null===Ha?Ha=268435456+Math.round(2147483648*Math.random()):Ha++,"0x"+Ha.toString(16)}const ZT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eb{constructor(n){this.Eo=n.Eo,this.Ao=n.Ao}Ro(n){this.Vo=n}mo(n){this.fo=n}po(n){this.yo=n}onMessage(n){this.wo=n}close(){this.Ao()}send(n){this.Eo(n)}So(){this.Vo()}bo(){this.fo()}Do(n){this.yo(n)}vo(n){this.wo(n)}}const Bt="WebChannelConnection";class tb extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo="(default)"===this.databaseId.database?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,s,o,a,r){const l=cc(),c=this.No(t,s.toUriEncodedString());ne("RestConnection",`Sending RPC '${t}' ${l}:`,c,o);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(_,a,r),this.Bo(t,c,_,o).then(d=>(ne("RestConnection",`Received RPC '${t}' ${l}: `,d),d),d=>{throw sn("RestConnection",`RPC '${t}' ${l} failed with error: `,d,"url: ",c,"request:",o),d})}ko(t,s,o,a,r,l){return this.Oo(t,s,o,a,r)}Lo(t,s,o){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ws,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,r)=>t[r]=a),o&&o.headers.forEach((a,r)=>t[r]=a)}No(t,s){return`${this.Fo}/v1/${s}:${ZT[t]}`}terminate(){}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams,this.longPollingOptions=n.longPollingOptions}Bo(n,t,s,o){const a=cc();return new Promise((r,l)=>{const c=new V_;c.setWithCredentials(!0),c.listenOnce(L_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ga.NO_ERROR:const d=c.getResponseJson();ne(Bt,`XHR for RPC '${n}' ${a} received:`,JSON.stringify(d)),r(d);break;case ga.TIMEOUT:ne(Bt,`RPC '${n}' ${a} timed out`),l(new se($.DEADLINE_EXCEEDED,"Request time out"));break;case ga.HTTP_ERROR:const p=c.getStatus();if(ne(Bt,`RPC '${n}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const b=f?.error;if(b&&b.status&&b.message){const I=function(k){const O=k.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(O)>=0?O:$.UNKNOWN}(b.status);l(new se(I,b.message))}else l(new se($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new se($.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ne(Bt,`RPC '${n}' ${a} completed.`)}});const _=JSON.stringify(o);ne(Bt,`RPC '${n}' ${a} sending request:`,o),c.send(t,"POST",_,s,15)})}qo(n,t,s){const o=cc(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",n,"/channel"],r=Q_(),l=$_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(c.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,t,s),c.encodeInitMessageHeaders=!0;const d=a.join("");ne(Bt,`Creating RPC '${n}' stream ${o}: ${d}`,c);const p=r.createWebChannel(d,c);let f=!1,b=!1;const I=new eb({Eo:k=>{b?ne(Bt,`Not sending because RPC '${n}' stream ${o} is closed:`,k):(f||(ne(Bt,`Opening RPC '${n}' stream ${o} transport.`),p.open(),f=!0),ne(Bt,`RPC '${n}' stream ${o} sending:`,k),p.send(k))},Ao:()=>p.close()}),y=(k,O,j)=>{k.listen(O,V=>{try{j(V)}catch(N){setTimeout(()=>{throw N},0)}})};return y(p,Hi.EventType.OPEN,()=>{b||(ne(Bt,`RPC '${n}' stream ${o} transport opened.`),I.So())}),y(p,Hi.EventType.CLOSE,()=>{b||(b=!0,ne(Bt,`RPC '${n}' stream ${o} transport closed`),I.Do())}),y(p,Hi.EventType.ERROR,k=>{b||(b=!0,sn(Bt,`RPC '${n}' stream ${o} transport errored:`,k),I.Do(new se($.UNAVAILABLE,"The operation could not be completed")))}),y(p,Hi.EventType.MESSAGE,k=>{var O;if(!b){const j=k.data[0];fe(!!j);const V=j,N=V?.error||(null===(O=V[0])||void 0===O?void 0:O.error);if(N){ne(Bt,`RPC '${n}' stream ${o} received error:`,N);const X=N.status;let te=function(C){const E=yt[C];if(void 0!==E)return im(E)}(X),S=N.message;void 0===te&&(te=$.INTERNAL,S="Unknown error status: "+X+" with message "+N.message),b=!0,I.Do(new se(te,S)),p.close()}else ne(Bt,`RPC '${n}' stream ${o} received:`,j),I.vo(j)}}),y(l,B_.STAT_EVENT,k=>{k.stat===pl.PROXY?ne(Bt,`RPC '${n}' stream ${o} detected buffering proxy`):k.stat===pl.NOPROXY&&ne(Bt,`RPC '${n}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.bo()},0),I}}function Ja(){return typeof document<"u"?document:null}function Co(i){return new cT(i,!0)}class uc{constructor(n,t,s=1e3,o=1.5,a=6e4){this.li=n,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(n){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),n())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class pp{constructor(n,t,s,o,a,r,l,c){this.li=n,this.Yo=s,this.Zo=o,this.connection=a,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new uc(n,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}stop(){var n=this;return(0,W.A)(function*(){n.i_()&&(yield n.close(0))})()}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(n){this.l_(),this.stream.send(n)}u_(){var n=this;return(0,W.A)(function*(){if(n.s_())return n.close(0)})()}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(n,t){var s=this;return(0,W.A)(function*(){s.l_(),s.h_(),s.r_.cancel(),s.Xo++,4!==n?s.r_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(gt(t.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),s.r_.zo()):t&&t.code===$.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.P_(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.po(t)})()}P_(){}auth(){this.state=1;const n=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{n(()=>{const o=new se($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(o)})})}I_(n,t){const s=this.T_(this.Xo);this.stream=this.d_(n,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.E_(o))}),this.stream.onMessage(o=>{s(()=>1==++this.n_?this.A_(o):this.onNext(o))})}o_(){var n=this;this.state=5,this.r_.jo((0,W.A)(function*(){n.state=0,n.start()}))}E_(n){return ne("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(4,n)}T_(n){return t=>{this.li.enqueueAndForget(()=>this.Xo===n?t():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nb extends pp{constructor(n,t,s,o,a,r){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,r),this.serializer=a}d_(n,t){return this.connection.qo("Listen",n,t)}A_(n){return this.onNext(n)}onNext(n){this.r_.reset();const t=function dT(i,n){let t;if("targetChange"in n){const s="NO_CHANGE"===(_=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:me(),o=n.targetChange.targetIds||[],a=function(_,d){return _.useProto3Json?(fe(void 0===d||"string"==typeof d),pt.fromBase64String(d||"")):(fe(void 0===d||d instanceof Buffer||d instanceof Uint8Array),pt.fromUint8Array(d||new Uint8Array))}(i,n.targetChange.resumeToken),r=n.targetChange.cause,l=r&&function(_){const d=void 0===_.code?$.UNKNOWN:im(_.code);return new se(d,_.message||"")}(r);t=new cm(s,o,a,l||null)}else if("documentChange"in n){const s=n.documentChange,o=xn(i,s.document.name),a=Tt(s.document.updateTime),r=s.document.createTime?Tt(s.document.createTime):be.min(),l=new jt({mapValue:{fields:s.document.fields}}),c=nt.newFoundDocument(o,a,r,l);t=new za(s.targetIds||[],s.removedTargetIds||[],c.key,c)}else if("documentDelete"in n){const s=n.documentDelete,o=xn(i,s.document),a=s.readTime?Tt(s.readTime):be.min(),r=nt.newNoDocument(o,a);t=new za([],s.removedTargetIds||[],r.key,r)}else if("documentRemove"in n){const s=n.documentRemove,o=xn(i,s.document);t=new za([],s.removedTargetIds||[],o,null)}else{if(!("filter"in n))return me();{const s=n.filter,{count:o=0,unchangedNames:a}=s,r=new sT(o,a);t=new lm(s.targetId,r)}}var _;return t}(this.serializer,n),s=function(a){if(!("targetChange"in a))return be.min();const r=a.targetChange;return r.targetIds&&r.targetIds.length?be.min():r.readTime?Tt(r.readTime):be.min()}(n);return this.listener.R_(t,s)}V_(n){const t={};t.database=Vl(this.serializer),t.addTarget=function(a,r){let l;const c=r.target;if(l=ka(c)?{documents:bm(a,c)}:{query:Da(a,c).ct},l.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){l.resumeToken=dm(a,r.resumeToken);const _=Gl(a,r.expectedCount);null!==_&&(l.expectedCount=_)}else if(r.snapshotVersion.compareTo(be.min())>0){l.readTime=ui(a,r.snapshotVersion.toTimestamp());const _=Gl(a,r.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,n);const s=function pT(i,n){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(n.purpose);return null==t?null:{"goog-listen-tags":t}}(0,n);s&&(t.labels=s),this.c_(t)}m_(n){const t={};t.database=Vl(this.serializer),t.removeTarget=n,this.c_(t)}}class sb extends pp{constructor(n,t,s,o,a,r){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,r),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(n,t){return this.connection.qo("Write",n,t)}A_(n){return fe(!!n.streamToken),this.lastStreamToken=n.streamToken,fe(!n.writeResults||0===n.writeResults.length),this.listener.p_()}onNext(n){fe(!!n.streamToken),this.lastStreamToken=n.streamToken,this.r_.reset();const t=function mT(i,n){return i&&i.length>0?(fe(void 0!==n),i.map(t=>function(o,a){let r=Tt(o.updateTime?o.updateTime:a);return r.isEqual(be.min())&&(r=Tt(a)),new eT(r,o.transformResults||[])}(t,n))):[]}(n.writeResults,n.commitTime),s=Tt(n.commitTime);return this.listener.y_(s,t)}w_(){const n={};n.database=Vl(this.serializer),this.c_(n)}g_(n){const t={streamToken:this.lastStreamToken,writes:n.map(s=>function To(i,n){let t;if(n instanceof li)t={update:gm(i,n.key,n.value)};else if(n instanceof ci)t={delete:go(i,n.key)};else if(n instanceof Fn)t={update:gm(i,n.key,n.data),updateMask:TT(n.fieldMask)};else{if(!(n instanceof Fl))return me();t={verify:go(i,n.key)}}return n.fieldTransforms.length>0&&(t.updateTransforms=n.fieldTransforms.map(s=>function(a,r){const l=r.transform;if(l instanceof ai)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vs)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ys)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ri)return{fieldPath:r.field.canonicalString(),increment:l.Pe};throw me()}(0,s))),n.precondition.isNone||(t.currentDocument=void 0!==(a=n.precondition).updateTime?{updateTime:uT(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:me()),t;var a}(this.serializer,s))};this.c_(t)}}class ib extends class{}{constructor(n,t,s,o){super(),this.authCredentials=n,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(n,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,r])=>this.connection.Oo(n,Nl(t,s),o,a,r)).catch(a=>{throw"FirebaseError"===a.name?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se($.UNKNOWN,a.toString())})}ko(n,t,s,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.connection.ko(n,Nl(t,s),o,r,l,a)).catch(r=>{throw"FirebaseError"===r.name?(r.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new se($.UNKNOWN,r.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class ob{constructor(n,t){this.asyncQueue=n,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(n){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.M_("Offline")))}set(n){this.N_(),this.D_=0,"Online"===n&&(this.C_=!1),this.M_(n)}M_(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}x_(n){const t=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(gt(t),this.C_=!1):ne("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class ab{constructor(n,t,s,o,a){var r=this;this.localStore=n,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(l=>{s.enqueueAndForget((0,W.A)(function*(){var c;ts(r)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,W.A)(function*(d){const p=re(d);p.k_.add(4),yield Ti(p),p.K_.set("Unknown"),p.k_.delete(4),yield ko(p)}),function _(d){return c.apply(this,arguments)})(r))}))}),this.K_=new ob(s,o)}}function ko(i){return _c.apply(this,arguments)}function _c(){return(_c=(0,W.A)(function*(i){if(ts(i))for(const n of i.q_)yield n(!0)})).apply(this,arguments)}function Ti(i){return dc.apply(this,arguments)}function dc(){return(dc=(0,W.A)(function*(i){for(const n of i.q_)yield n(!1)})).apply(this,arguments)}function Ka(i,n){const t=re(i);t.B_.has(n.targetId)||(t.B_.set(n.targetId,n),hc(t)?pc(t):vi(t).s_()&&mc(t,n))}function bi(i,n){const t=re(i),s=vi(t);t.B_.delete(n),s.s_()&&hp(t,n),0===t.B_.size&&(s.s_()?s.a_():ts(t)&&t.K_.set("Unknown"))}function mc(i,n){if(i.U_.xe(n.targetId),n.resumeToken.approximateByteSize()>0||n.snapshotVersion.compareTo(be.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(n.targetId).size;n=n.withExpectedCount(t)}vi(i).V_(n)}function hp(i,n){i.U_.xe(n),vi(i).m_(n)}function pc(i){i.U_=new oT({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),ut:n=>i.B_.get(n)||null,nt:()=>i.datastore.serializer.databaseId}),vi(i).start(),i.K_.F_()}function hc(i){return ts(i)&&!vi(i).i_()&&i.B_.size>0}function ts(i){return 0===re(i).k_.size}function fp(i){i.U_=void 0}function rb(i){return fc.apply(this,arguments)}function fc(){return(fc=(0,W.A)(function*(i){i.K_.set("Online")})).apply(this,arguments)}function lb(i){return gc.apply(this,arguments)}function gc(){return(gc=(0,W.A)(function*(i){i.B_.forEach((n,t)=>{mc(i,n)})})).apply(this,arguments)}function cb(i,n){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,W.A)(function*(i,n){fp(i),hc(i)?(i.K_.O_(n),pc(i)):i.K_.set("Unknown")})).apply(this,arguments)}function ub(i,n,t){return bc.apply(this,arguments)}function bc(){return bc=(0,W.A)(function*(i,n,t){if(i.K_.set("Online"),n instanceof cm&&2===n.state&&n.cause)try{yield(s=(0,W.A)(function*(a,r){const l=r.cause;for(const c of r.targetIds)a.B_.has(c)&&(yield a.remoteSyncer.rejectListen(c,l),a.B_.delete(c),a.U_.removeTarget(c))}),function o(a,r){return s.apply(this,arguments)})(i,n)}catch(s){ne("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield Za(i,s)}else if(n instanceof za?i.U_.$e(n):n instanceof lm?i.U_.Je(n):i.U_.Ge(n),!t.isEqual(be.min()))try{const s=yield ip(i.localStore);t.compareTo(s)>=0&&(yield function(a,r){const l=a.U_.it(r);return l.targetChanges.forEach((c,_)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.B_.get(_);d&&a.B_.set(_,d.withResumeToken(c.resumeToken,r))}}),l.targetMismatches.forEach((c,_)=>{const d=a.B_.get(c);if(!d)return;a.B_.set(c,d.withResumeToken(pt.EMPTY_BYTE_STRING,d.snapshotVersion)),hp(a,c);const p=new jn(d.target,c,_,d.sequenceNumber);mc(a,p)}),a.remoteSyncer.applyRemoteEvent(l)}(i,t))}catch(s){ne("RemoteStore","Failed to raise snapshot:",s),yield Za(i,s)}var s}),bc.apply(this,arguments)}function Za(i,n,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,W.A)(function*(i,n,t){if(!qn(n))throw n;i.k_.add(1),yield Ti(i),i.K_.set("Offline"),t||(t=()=>ip(i.localStore)),i.asyncQueue.enqueueRetryable((0,W.A)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield t(),i.k_.delete(1),yield ko(i)}))})).apply(this,arguments)}function gp(i,n){return n().catch(t=>Za(i,t,n))}function xi(i){return vc.apply(this,arguments)}function vc(){return(vc=(0,W.A)(function*(i){const n=re(i),t=ns(n);let s=n.L_.length>0?n.L_[n.L_.length-1].batchId:-1;for(;_b(n);)try{const o=yield WT(n.localStore,s);if(null===o){0===n.L_.length&&t.a_();break}s=o.batchId,db(n,o)}catch(o){yield Za(n,o)}Tp(n)&&bp(n)})).apply(this,arguments)}function _b(i){return ts(i)&&i.L_.length<10}function db(i,n){i.L_.push(n);const t=ns(i);t.s_()&&t.f_&&t.g_(n.mutations)}function Tp(i){return ts(i)&&!ns(i).i_()&&i.L_.length>0}function bp(i){ns(i).start()}function mb(i){return yc.apply(this,arguments)}function yc(){return(yc=(0,W.A)(function*(i){ns(i).w_()})).apply(this,arguments)}function pb(i){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,W.A)(function*(i){const n=ns(i);for(const t of i.L_)n.g_(t.mutations)})).apply(this,arguments)}function hb(i,n,t){return wc.apply(this,arguments)}function wc(){return(wc=(0,W.A)(function*(i,n,t){const s=i.L_.shift(),o=zl.from(s,n,t);yield gp(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),yield xi(i)})).apply(this,arguments)}function fb(i,n){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,W.A)(function*(i,n){var t;n&&ns(i).f_&&(yield(t=(0,W.A)(function*(o,a){if(function sm(i){switch(i){default:return me();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}(l=a.code)&&l!==$.ABORTED){const r=o.L_.shift();ns(o).__(),yield gp(o,()=>o.remoteSyncer.rejectFailedWrite(r.batchId,a)),yield xi(o)}var l}),function s(o,a){return t.apply(this,arguments)})(i,n)),Tp(i)&&bp(i)}),Ic.apply(this,arguments)}function xp(i,n){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,W.A)(function*(i,n){const t=re(i);t.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const s=ts(t);t.k_.add(3),yield Ti(t),s&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(n),t.k_.delete(3),yield ko(t)})).apply(this,arguments)}function kc(i,n){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,W.A)(function*(i,n){const t=re(i);n?(t.k_.delete(2),yield ko(t)):n||(t.k_.add(2),yield Ti(t),t.K_.set("Unknown"))})).apply(this,arguments)}function vi(i){return i.W_||(i.W_=function(t,s,o){const a=re(t);return a.b_(),new nb(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{Ro:rb.bind(null,i),mo:lb.bind(null,i),po:cb.bind(null,i),R_:ub.bind(null,i)}),i.q_.push(function(){var n=(0,W.A)(function*(t){t?(i.W_.__(),hc(i)?pc(i):i.K_.set("Unknown")):(yield i.W_.stop(),fp(i))});return function(t){return n.apply(this,arguments)}}())),i.W_}function ns(i){return i.G_||(i.G_=function(t,s,o){const a=re(t);return a.b_(),new sb(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:mb.bind(null,i),po:fb.bind(null,i),p_:pb.bind(null,i),y_:hb.bind(null,i)}),i.q_.push(function(){var n=(0,W.A)(function*(t){t?(i.G_.__(),yield xi(i)):(yield i.G_.stop(),i.L_.length>0&&(ne("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))});return function(t){return n.apply(this,arguments)}}())),i.G_}class Ac{constructor(n,t,s,o,a){this.asyncQueue=n,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=a,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(n,t,s,o,a){const r=Date.now()+s,l=new Ac(n,t,r,o,a);return l.start(s),l}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new se($.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yi(i,n){if(gt("AsyncQueue",`${n}: ${i}`),qn(i))return new se($.UNAVAILABLE,`${n}: ${i}`);throw i}class Si{static emptySet(n){return new Si(n.comparator)}constructor(n){this.comparator=n?(t,s)=>n(t,s)||ce.comparator(t.key,s.key):(t,s)=>ce.comparator(t.key,s.key),this.keyedMap=co(),this.sortedSet=new Ke(this.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const t=this.keyedMap.get(n);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((t,s)=>(n(t),!1))}add(n){const t=this.delete(n.key);return t.copy(t.keyedMap.insert(n.key,n),t.sortedSet.insert(n,null))}delete(n){const t=this.get(n);return t?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(t)):this}isEqual(n){if(!(n instanceof Si)||this.size!==n.size)return!1;const t=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const n=[];return this.forEach(t=>{n.push(t.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,t){const s=new Si;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=t,s}}class vp{constructor(){this.z_=new Ke(ce.comparator)}track(n){const t=n.doc.key,s=this.z_.get(t);s?0!==n.type&&3===s.type?this.z_=this.z_.insert(t,n):3===n.type&&1!==s.type?this.z_=this.z_.insert(t,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.z_=this.z_.insert(t,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.z_=this.z_.insert(t,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.z_=this.z_.remove(t):1===n.type&&2===s.type?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.z_=this.z_.insert(t,{type:2,doc:n.doc}):me():this.z_=this.z_.insert(t,n)}j_(){const n=[];return this.z_.inorderTraversal((t,s)=>{n.push(s)}),n}}class wi{constructor(n,t,s,o,a,r,l,c,_){this.query=n,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=a,this.fromCache=r,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=_}static fromInitialDocuments(n,t,s,o,a){const r=[];return t.forEach(l=>{r.push({type:0,doc:l})}),new wi(n,t,Si.emptySet(t),r,s,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&ro(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const t=this.docChanges,s=n.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class gb{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(n=>n.Z_())}}class Tb{constructor(){this.queries=yp(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(t,s){const o=re(t),a=o.queries;o.queries=yp(),a.forEach((r,l)=>{for(const c of l.J_)c.onError(s)})}(this,new se($.ABORTED,"Firestore shutting down"))}}function yp(){return new Rn(i=>Pd(i),ro)}function Oc(i,n){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,W.A)(function*(i,n){const t=re(i);let s=3;const o=n.query;let a=t.queries.get(o);a?!a.Y_()&&n.Z_()&&(s=2):(a=new gb,s=n.Z_()?0:1);try{switch(s){case 0:a.H_=yield t.onListen(o,!0);break;case 1:a.H_=yield t.onListen(o,!1);break;case 2:yield t.onFirstRemoteStoreListen(o)}}catch(r){const l=yi(r,`Initialization of query '${oi(n.query)}' failed`);return void n.onError(l)}t.queries.set(o,a),a.J_.push(n),n.ea(t.onlineState),a.H_&&n.ta(a.H_)&&zc(t)})).apply(this,arguments)}function Fc(i,n){return jc.apply(this,arguments)}function jc(){return(jc=(0,W.A)(function*(i,n){const t=re(i),s=n.query;let o=3;const a=t.queries.get(s);if(a){const r=a.J_.indexOf(n);r>=0&&(a.J_.splice(r,1),0===a.J_.length?o=n.Z_()?0:1:!a.Y_()&&n.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function bb(i,n){const t=re(i);let s=!1;for(const o of n){const r=t.queries.get(o.query);if(r){for(const l of r.J_)l.ta(o)&&(s=!0);r.H_=o}}s&&zc(t)}function xb(i,n,t){const s=re(i),o=s.queries.get(n);if(o)for(const a of o.J_)a.onError(t);s.queries.delete(n)}function zc(i){i.X_.forEach(n=>{n.next()})}var Mc,Sp;(Sp=Mc||(Mc={})).na="default",Sp.Cache="cache";class Dc{constructor(n,t,s){this.query=n,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(n){if(!this.options.includeMetadataChanges){const s=[];for(const o of n.docChanges)3!==o.type&&s.push(o);n=new wi(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let t=!1;return this.ia?this.oa(n)&&(this.ra.next(n),t=!0):this._a(n,this.onlineState)&&(this.aa(n),t=!0),this.sa=n,t}onError(n){this.ra.error(n)}ea(n){this.onlineState=n;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,n)&&(this.aa(this.sa),t=!0),t}_a(n,t){return!n.fromCache||!this.Z_()||(!this.options.ua||!("Offline"!==t))&&(!n.docs.isEmpty()||n.hasCachedResults||"Offline"===t)}oa(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.sa&&this.sa.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}aa(n){n=wi.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.ia=!0,this.ra.next(n)}Z_(){return this.options.source!==Mc.Cache}}class Cp{constructor(n){this.key=n}}class kp{constructor(n){this.key=n}}class Ep{constructor(n,t){this.query=n,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Oe(),this.mutatedKeys=Oe(),this.Va=Vd(n),this.ma=new Si(this.Va)}get fa(){return this.da}ga(n,t){const s=t?t.pa:new vp,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,r=o,l=!1;const c="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,_="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(n.inorderTraversal((d,p)=>{const f=o.get(d),b=lo(this.query,p)?p:null,I=!!f&&this.mutatedKeys.has(f.key),y=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let k=!1;f&&b?f.data.isEqual(b.data)?I!==y&&(s.track({type:3,doc:b}),k=!0):this.ya(f,b)||(s.track({type:2,doc:b}),k=!0,(c&&this.Va(b,c)>0||_&&this.Va(b,_)<0)&&(l=!0)):!f&&b?(s.track({type:0,doc:b}),k=!0):f&&!b&&(s.track({type:1,doc:f}),k=!0,(c||_)&&(l=!0)),k&&(b?(r=r.add(b),a=y?a.add(d):a.delete(d)):(r=r.delete(d),a=a.delete(d)))}),null!==this.query.limit)for(;r.size>this.query.limit;){const d="F"===this.query.limitType?r.last():r.first();r=r.delete(d.key),a=a.delete(d.key),s.track({type:1,doc:d})}return{ma:r,pa:s,ss:l,mutatedKeys:a}}ya(n,t){return n.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(n,t,s,o){const a=this.ma;this.ma=n.ma,this.mutatedKeys=n.mutatedKeys;const r=n.pa.j_();r.sort((d,p)=>function(b,I){const y=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return y(b)-y(I)}(d.type,p.type)||this.Va(d.doc,p.doc)),this.wa(s),o=null!=o&&o;const l=t&&!o?this.Sa():[],c=0===this.Ra.size&&this.current&&!o?1:0,_=c!==this.Aa;return this.Aa=c,0!==r.length||_?{snapshot:new wi(this.query,n.ma,a,r,n.mutatedKeys,0===c,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({ma:this.ma,pa:new vp,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(n){return!this.da.has(n)&&!!this.ma.has(n)&&!this.ma.get(n).hasLocalMutations}wa(n){n&&(n.addedDocuments.forEach(t=>this.da=this.da.add(t)),n.modifiedDocuments.forEach(t=>{}),n.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=n.current)}Sa(){if(!this.current)return[];const n=this.Ra;this.Ra=Oe(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return n.forEach(s=>{this.Ra.has(s)||t.push(new kp(s))}),this.Ra.forEach(s=>{n.has(s)||t.push(new Cp(s))}),t}va(n){this.da=n.ds,this.Ra=Oe();const t=this.ga(n.documents);return this.applyChanges(t,!0)}Ca(){return wi.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class Sb{constructor(n,t,s){this.query=n,this.targetId=t,this.view=s}}class wb{constructor(n){this.key=n,this.Fa=!1}}class Ib{constructor(n,t,s,o,a,r){this.localStore=n,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=r,this.Ma={},this.xa=new Rn(l=>Pd(l),ro),this.Oa=new Map,this.Na=new Set,this.La=new Ke(ce.comparator),this.Ba=new Map,this.ka=new Wl,this.qa={},this.Qa=new Map,this.Ka=Es.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}function Cb(i,n){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,W.A)(function*(i,n,t=!0){const s=er(i);let o;const a=s.xa.get(n);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=yield Ap(s,n,t,!0),o})).apply(this,arguments)}function kb(i,n){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,W.A)(function*(i,n){const t=er(i);yield Ap(t,n,!0,!1)})).apply(this,arguments)}function Ap(i,n,t,s){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,W.A)(function*(i,n,t,s){const o=yield function fi(i,n){const t=re(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,n).next(a=>a?(o=a,G.resolve(o)):t.Gr.allocateTargetId(s).next(r=>(o=new jn(n,r,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(null===o||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(n,s.targetId)),s})}(i.localStore,Vt(n)),a=o.targetId,r=i.sharedClientState.addLocalQueryTarget(a,t);let l;return s&&(l=yield function Vc(i,n,t,s,o){return Lc.apply(this,arguments)}(i,n,a,"current"===r,o.resumeToken)),i.isPrimaryClient&&t&&Ka(i.remoteStore,o),l})).apply(this,arguments)}function Lc(){return Lc=(0,W.A)(function*(i,n,t,s,o){i.Ua=(p,f,b)=>{return(I=(0,W.A)(function*(k,O,j,V){let N=O.view.ga(j);N.ss&&(N=yield Ua(k.localStore,O.query,!1).then(({documents:x})=>O.view.ga(x,N)));const X=V&&V.targetChanges.get(O.targetId),te=V&&null!=V.targetMismatches.get(O.targetId),S=O.view.applyChanges(N,k.isPrimaryClient,X,te);return Kc(k,O.targetId,S.ba),S.snapshot}),function y(k,O,j,V){return I.apply(this,arguments)})(i,p,f,b);var I};const a=yield Ua(i.localStore,n,!0),r=new Ep(n,a.ds),l=r.ga(a.documents),c=fo.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,o),_=r.applyChanges(l,i.isPrimaryClient,c);Kc(i,t,_.ba);const d=new Sb(n,t,r);return i.xa.set(n,d),i.Oa.has(t)?i.Oa.get(t).push(n):i.Oa.set(t,[n]),_.snapshot}),Lc.apply(this,arguments)}function Eb(i,n,t){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,W.A)(function*(i,n,t){const s=re(i),o=s.xa.get(n),a=s.Oa.get(o.targetId);if(a.length>1)return s.Oa.set(o.targetId,a.filter(r=>!ro(r,n))),void s.xa.delete(n);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||(yield gi(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&bi(s.remoteStore,o.targetId),Ii(s,o.targetId)}).catch(Qn))):(Ii(s,o.targetId),yield gi(s.localStore,o.targetId,!0))})).apply(this,arguments)}function Ab(i,n){return $c.apply(this,arguments)}function $c(){return($c=(0,W.A)(function*(i,n){const t=re(i),s=t.xa.get(n),o=t.Oa.get(s.targetId);t.isPrimaryClient&&1===o.length&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),bi(t.remoteStore,s.targetId))})).apply(this,arguments)}function Qc(){return(Qc=(0,W.A)(function*(i,n,t){const s=function cu(i){const n=re(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Fb.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=jb.bind(null,n),n}(i);try{const o=yield function(r,l){const c=re(r),_=dt.now(),d=l.reduce((b,I)=>b.add(I.key),Oe());let p,f;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let I=Jt(),y=Oe();return c.hs.getEntries(b,d).next(k=>{I=k,I.forEach((O,j)=>{j.isValidDocument()||(y=y.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,I)).next(k=>{p=k;const O=[];for(const j of l){const V=nT(j,p.get(j.key).overlayedDocument);null!=V&&O.push(new Fn(j.key,V,yd(V.value.mapValue),lt.exists(!0)))}return c.mutationQueue.addMutationBatch(b,_,O,l)}).next(k=>{f=k;const O=k.applyToLocalDocumentSet(p,y);return c.documentOverlayCache.saveOverlays(b,k.batchId,O)})}).then(()=>({batchId:f.batchId,changes:Bd(p)}))}(s.localStore,n);s.sharedClientState.addPendingMutation(o.batchId),function(r,l,c){let _=r.qa[r.currentUser.toKey()];_||(_=new Ke(we)),_=_.insert(l,c),r.qa[r.currentUser.toKey()]=_}(s,o.batchId,t),yield zn(s,o.changes),yield xi(s.remoteStore)}catch(o){const a=yi(o,"Failed to persist write");t.reject(a)}})).apply(this,arguments)}function Op(i,n){return qc.apply(this,arguments)}function qc(){return(qc=(0,W.A)(function*(i,n){const t=re(i);try{const s=yield function XT(i,n){const t=re(i),s=n.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const r=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const l=[];n.targetChanges.forEach((d,p)=>{const f=o.get(p);if(!f)return;l.push(t.Gr.removeMatchingKeys(a,d.removedDocuments,p).next(()=>t.Gr.addMatchingKeys(a,d.addedDocuments,p)));let b=f.withSequenceNumber(a.currentSequenceNumber);var y,k,O;null!==n.targetMismatches.get(p)?b=b.withResumeToken(pt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,s)),o=o.insert(p,b),k=b,O=d,(0===(y=f).resumeToken.approximateByteSize()||k.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&l.push(t.Gr.updateTargetData(a,b))});let c=Jt(),_=Oe();if(n.documentUpdates.forEach(d=>{n.resolvedLimboDocuments.has(d)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(function op(i,n,t){let s=Oe(),o=Oe();return t.forEach(a=>s=s.add(a)),n.getEntries(i,s).next(a=>{let r=Jt();return t.forEach((l,c)=>{const _=a.get(l);c.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(l)),c.isNoDocument()&&c.version.isEqual(be.min())?(n.removeEntry(l,c.readTime),r=r.insert(l,c)):!_.isValidDocument()||c.version.compareTo(_.version)>0||0===c.version.compareTo(_.version)&&_.hasPendingWrites?(n.addEntry(c),r=r.insert(l,c)):ne("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",c.version)}),{Is:r,Es:o}})}(a,r,n.documentUpdates).next(d=>{c=d.Is,_=d.Es})),!s.isEqual(be.min())){const d=t.Gr.getLastRemoteSnapshotVersion(a).next(p=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,s));l.push(d)}return G.waitFor(l).next(()=>r.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,_)).next(()=>c)}).then(a=>(t.us=o,a))}(t.localStore,n);n.targetChanges.forEach((o,a)=>{const r=t.Ba.get(a);r&&(fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?r.Fa=!0:o.modifiedDocuments.size>0?fe(r.Fa):o.removedDocuments.size>0&&(fe(r.Fa),r.Fa=!1))}),yield zn(t,s,n)}catch(s){yield Qn(s)}})).apply(this,arguments)}function Rp(i,n,t){const s=re(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const o=[];s.xa.forEach((a,r)=>{const l=r.view.ea(n);l.snapshot&&o.push(l.snapshot)}),function(r,l){const c=re(r);c.onlineState=l;let _=!1;c.queries.forEach((d,p)=>{for(const f of p.J_)f.ea(l)&&(_=!0)}),_&&zc(c)}(s.eventManager,n),o.length&&s.Ma.R_(o),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function Rb(i,n,t){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,W.A)(function*(i,n,t){const s=re(i);s.sharedClientState.updateQueryState(n,"rejected",t);const o=s.Ba.get(n),a=o&&o.key;if(a){let r=new Ke(ce.comparator);r=r.insert(a,nt.newNoDocument(a,be.min()));const l=Oe().add(a),c=new ho(be.min(),new Map,new Ke(we),r,l);yield Op(s,c),s.La=s.La.remove(a),s.Ba.delete(n),Zc(s)}else yield gi(s.localStore,n,!1).then(()=>Ii(s,n,t)).catch(Qn)})).apply(this,arguments)}function Fb(i,n){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,W.A)(function*(i,n){const t=re(i),s=n.batch.batchId;try{const o=yield function UT(i,n){const t=re(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=n.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(l,c,_,d){const p=_.batch,f=p.keys();let b=G.resolve();return f.forEach(I=>{b=b.next(()=>d.getEntry(c,I)).next(y=>{const k=_.docVersions.get(I);fe(null!==k),y.version.compareTo(k)<0&&(p.applyToRemoteDocument(y,_),y.isValidDocument()&&(y.setReadTime(_.commitVersion),d.addEntry(y)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,s,n,a).next(()=>a.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,n.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Oe();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(c=c.add(l.batch.mutations[_].key));return c}(n))).next(()=>t.localDocuments.getDocuments(s,o))})}(t.localStore,n);Jc(t,s,null),Hc(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield zn(t,o)}catch(o){yield Qn(o)}})).apply(this,arguments)}function jb(i,n,t){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,W.A)(function*(i,n,t){const s=re(i);try{const o=yield function(r,l){const c=re(r);return c.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let d;return c.mutationQueue.lookupMutationBatch(_,l).next(p=>(fe(null!==p),d=p.keys(),c.mutationQueue.removeMutationBatch(_,p))).next(()=>c.mutationQueue.performConsistencyCheck(_)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(_,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,d)).next(()=>c.localDocuments.getDocuments(_,d))})}(s.localStore,n);Jc(s,n,t),Hc(s,n),s.sharedClientState.updateMutationState(n,"rejected",t),yield zn(s,o)}catch(o){yield Qn(o)}})).apply(this,arguments)}function Hc(i,n){(i.Qa.get(n)||[]).forEach(t=>{t.resolve()}),i.Qa.delete(n)}function Jc(i,n,t){const s=re(i);let o=s.qa[s.currentUser.toKey()];if(o){const a=o.get(n);a&&(t?a.reject(t):a.resolve(),o=o.remove(n)),s.qa[s.currentUser.toKey()]=o}}function Ii(i,n,t=null){i.sharedClientState.removeLocalQueryTarget(n);for(const s of i.Oa.get(n))i.xa.delete(s),t&&i.Ma.Wa(s,t);i.Oa.delete(n),i.isPrimaryClient&&i.ka.yr(n).forEach(s=>{i.ka.containsKey(s)||Fp(i,s)})}function Fp(i,n){i.Na.delete(n.path.canonicalString());const t=i.La.get(n);null!==t&&(bi(i.remoteStore,t),i.La=i.La.remove(n),i.Ba.delete(t),Zc(i))}function Kc(i,n,t){for(const s of t)s instanceof Cp?(i.ka.addReference(s.key,n),Mb(i,s)):s instanceof kp?(ne("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,n),i.ka.containsKey(s.key)||Fp(i,s.key)):me()}function Mb(i,n){const t=n.key,s=t.path.canonicalString();i.La.get(t)||i.Na.has(s)||(ne("SyncEngine","New document in limbo: "+t),i.Na.add(s),Zc(i))}function Zc(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const n=i.Na.values().next().value;i.Na.delete(n);const t=new ce(ze.fromString(n)),s=i.Ka.next();i.Ba.set(s,new wb(t)),i.La=i.La.insert(t,s),Ka(i.remoteStore,new jn(Vt(si(t.path)),s,"TargetPurposeLimboResolution",Zt.oe))}}function zn(i,n,t){return eu.apply(this,arguments)}function eu(){return eu=(0,W.A)(function*(i,n,t){const s=re(i),o=[],a=[],r=[];var l;s.xa.isEmpty()||(s.xa.forEach((l,c)=>{r.push(s.Ua(c,n,t).then(_=>{var d;if((_||t)&&s.isPrimaryClient){const p=_?!_.fromCache:null===(d=t?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(_){o.push(_);const p=ec.zi(c.targetId,_);a.push(p)}}))}),yield Promise.all(r),s.Ma.R_(o),yield(l=(0,W.A)(function*(_,d){const p=re(_);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(d,b=>G.forEach(b.Wi,I=>p.persistence.referenceDelegate.addReference(f,b.targetId,I)).next(()=>G.forEach(b.Gi,I=>p.persistence.referenceDelegate.removeReference(f,b.targetId,I)))))}catch(f){if(!qn(f))throw f;ne("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const b=f.targetId;if(!f.fromCache){const I=p.us.get(b),k=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);p.us=p.us.insert(b,k)}}}),function c(_,d){return l.apply(this,arguments)})(s.localStore,a))}),eu.apply(this,arguments)}function Db(i,n){return tu.apply(this,arguments)}function tu(){return(tu=(0,W.A)(function*(i,n){const t=re(i);if(!t.currentUser.isEqual(n)){ne("SyncEngine","User change. New user:",n.toKey());const s=yield sp(t.localStore,n);t.currentUser=n,(a=t).Qa.forEach(l=>{l.forEach(c=>{c.reject(new se($.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Qa.clear(),t.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield zn(t,s.Ts)}var a})).apply(this,arguments)}function Gb(i,n){const t=re(i),s=t.Ba.get(n);if(s&&s.Fa)return Oe().add(s.key);{let o=Oe();const a=t.Oa.get(n);if(!a)return o;for(const r of a){const l=t.xa.get(r);o=o.unionWith(l.view.fa)}return o}}function er(i){const n=re(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=Op.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gb.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=Rb.bind(null,n),n.Ma.R_=bb.bind(null,n.eventManager),n.Ma.Wa=xb.bind(null,n.eventManager),n}let tr=(()=>{class i{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var s=this;return(0,W.A)(function*(){s.serializer=Co(t.databaseInfo.databaseId),s.sharedClientState=s.za(t),s.persistence=s.ja(t),yield s.persistence.start(),s.localStore=s.Ha(t),s.gcScheduler=s.Ja(t,s.localStore),s.indexBackfillerScheduler=s.Ya(t,s.localStore)})()}Ja(t,s){return null}Ya(t,s){return null}Ha(t){return function np(i,n,t,s){return new YT(i,n,t,s)}(this.persistence,new tp,t.initialUser,this.serializer)}ja(t){return new Hl(Qa.ei,this.serializer)}za(t){return new _p}terminate(){var t=this;return(0,W.A)(function*(){var s,o;null===(s=t.gcScheduler)||void 0===s||s.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return i.provider={build:()=>new i},i})();class uu extends tr{constructor(n){super(),this.cacheSizeBytes=n}Ja(n,t){return fe(this.persistence.referenceDelegate instanceof qa),new Ym(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue,t)}ja(n){const t=void 0!==this.cacheSizeBytes?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new Hl(s=>qa.ei(s,t),this.serializer)}}let Ci=(()=>{class i{initialize(t,s){var o=this;return(0,W.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(s),o.remoteStore=o.createRemoteStore(s),o.eventManager=o.createEventManager(s),o.syncEngine=o.createSyncEngine(s,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=a=>Rp(o.syncEngine,a,1),o.remoteStore.remoteSyncer.handleCredentialChange=Db.bind(null,o.syncEngine),yield kc(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Tb}createDatastore(t){const s=Co(t.databaseInfo.databaseId),o=new tb(t.databaseInfo);return new ib(t.authCredentials,t.appCheckCredentials,o,s)}createRemoteStore(t){return o=this.localStore,a=this.datastore,r=t.asyncQueue,l=s=>Rp(this.syncEngine,s,0),c=dp.p()?new dp:new KT,new ab(o,a,r,l,c);var o,a,r,l,c}createSyncEngine(t,s){return function(a,r,l,c,_,d,p){const f=new Ib(a,r,l,c,_,d);return p&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}terminate(){var t=this;return(0,W.A)(function*(){var s,o,a;yield(a=(0,W.A)(function*(l){const c=re(l);ne("RemoteStore","RemoteStore shutting down."),c.k_.add(5),yield Ti(c),c.Q_.shutdown(),c.K_.set("Unknown")}),function r(l){return a.apply(this,arguments)})(t.remoteStore),null===(s=t.datastore)||void 0===s||s.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}return i.provider={build:()=>new i},i})();class nr{constructor(n){this.observer=n,this.muted=!1}next(n){this.muted||this.observer.next&&this.Xa(this.observer.next,n)}error(n){this.muted||(this.observer.error?this.Xa(this.observer.error,n):gt("Uncaught Error in snapshot listener:",n.toString()))}eu(){this.muted=!0}Xa(n,t){setTimeout(()=>{this.muted||n(t)},0)}}class Wb{constructor(n,t,s,o,a){var r=this;this.authCredentials=n,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Et.UNAUTHENTICATED,this.clientId=X_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,function(){var l=(0,W.A)(function*(c){ne("FirestoreClient","Received user=",c.uid),yield r.authCredentialListener(c),r.user=c});return function(c){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(s,l=>(ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const t=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.A)(function*(){try{n._onlineComponents&&(yield n._onlineComponents.terminate()),n._offlineComponents&&(yield n._offlineComponents.terminate()),n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),t.resolve()}catch(s){const o=yi(s,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function du(i,n){return mu.apply(this,arguments)}function mu(){return mu=(0,W.A)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;yield n.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var o=(0,W.A)(function*(a){s.isEqual(a)||(yield sp(n.localStore,a),s=a)});return function(a){return o.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=n}),mu.apply(this,arguments)}function Gp(i,n){return pu.apply(this,arguments)}function pu(){return(pu=(0,W.A)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const t=yield function hu(i){return fu.apply(this,arguments)}(i);ne("FirestoreClient","Initializing OnlineComponentProvider"),yield n.initialize(t,i.configuration),i.setCredentialChangeListener(s=>xp(n.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>xp(n.remoteStore,o)),i._onlineComponents=n})).apply(this,arguments)}function fu(){return(fu=(0,W.A)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield du(i,i._uninitializedComponentsProvider._offline)}catch(n){if(!("FirebaseError"===(o=n).name?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw n;sn("Error using user provided cache. Falling back to memory cache: "+n),yield du(i,new tr)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield du(i,new uu(void 0));var o;return i._offlineComponents})).apply(this,arguments)}function sr(i){return gu.apply(this,arguments)}function gu(){return(gu=(0,W.A)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield Gp(i,i._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield Gp(i,new Ci))),i._onlineComponents})).apply(this,arguments)}function Ei(i){return bu.apply(this,arguments)}function bu(){return(bu=(0,W.A)(function*(i){const n=yield sr(i),t=n.eventManager;return t.onListen=Cb.bind(null,n.syncEngine),t.onUnlisten=Eb.bind(null,n.syncEngine),t.onFirstRemoteStoreListen=kb.bind(null,n.syncEngine),t.onLastRemoteStoreUnlisten=Ab.bind(null,n.syncEngine),t})).apply(this,arguments)}function $p(i){const n={};return void 0!==i.timeoutSeconds&&(n.timeoutSeconds=i.timeoutSeconds),n}const Qp=new Map;function xu(i,n,t){if(!t)throw new se($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function qp(i){if(!ce.isDocumentKey(i))throw new se($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Yp(i){if(ce.isDocumentKey(i))throw new se($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ir(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(s=i).constructor?s.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var s;return"function"==typeof i?"a function":me()}function je(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new se($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ir(i);throw new se($.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${t}`)}}return i}class Xp{constructor(n){var t,s;if(void 0===n.host){if(void 0!==n.ssl)throw new se($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(t=n.ssl)||void 0===t||t;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.localCache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new se($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}(function rx(i,n,t,s){if(!0===n&&!0===s)throw new se($.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)})("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==n.experimentalAutoDetectLongPolling&&!n.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=$p(null!==(s=n.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===n.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class Eo{constructor(n,t,s,o){this._authCredentials=n,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new se($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xp(n),void 0!==n.credentials&&(this._authCredentials=function(s){if(!s)return new t1;switch(s.type){case"firstParty":return new o1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var n=this;return(0,W.A)(function*(){"notTerminated"===n._terminateTask?yield n._terminate():n._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Qp.get(t);s&&(ne("ComponentProvider","Removing Datastore"),Qp.delete(t),s.terminate())}(this),Promise.resolve()}}class zt{constructor(n,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new zt(this.firestore,n,this._query)}}class bt{constructor(n,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new bt(this.firestore,n,this._key)}}class vn extends zt{constructor(n,t,s){super(n,t,si(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new bt(this.firestore,null,new ce(n))}withConverter(n){return new vn(this.firestore,n,this._path)}}function Ao(i,n,...t){if(i=(0,ot.Ku)(i),xu("collection","path",n),i instanceof Eo){const s=ze.fromString(n,...t);return Yp(s),new vn(i,null,s)}{if(!(i instanceof bt||i instanceof vn))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ze.fromString(n,...t));return Yp(s),new vn(i.firestore,null,s)}}function Ai(i,n,...t){if(i=(0,ot.Ku)(i),1===arguments.length&&(n=X_.newId()),xu("doc","path",n),i instanceof Eo){const s=ze.fromString(n,...t);return qp(s),new bt(i,null,new ce(s))}{if(!(i instanceof bt||i instanceof vn))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ze.fromString(n,...t));return qp(s),new bt(i.firestore,i instanceof vn?i.converter:null,new ce(s))}}class Hp{constructor(n=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new uc(this,"async_queue_retry"),this.fu=()=>{const s=Ja();s&&ne("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=n;const t=Ja();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.pu(),this.yu(n)}enterRestrictedMode(n){if(!this.Eu){this.Eu=!0,this.Vu=n||!1;const t=Ja();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(n){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new At;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(n().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Iu.push(n),this.wu()))}wu(){var n=this;return(0,W.A)(function*(){if(0!==n.Iu.length){try{yield n.Iu[0](),n.Iu.shift(),n.r_.reset()}catch(t){if(!qn(t))throw t;ne("AsyncQueue","Operation failed with retryable error: "+t)}n.Iu.length>0&&n.r_.jo(()=>n.wu())}})()}yu(n){const t=this.gu.then(()=>(this.Ru=!0,n().catch(s=>{throw this.Au=s,this.Ru=!1,gt("INTERNAL UNHANDLED ERROR: ",function(r){let l=r.message||"";return r.stack&&(l=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack),l}(s)),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(n,t,s){this.pu(),this.mu.indexOf(n)>-1&&(t=0);const o=Ac.createAndSchedule(this,n,t,s,a=>this.Su(a));return this.du.push(o),o}pu(){this.Au&&me()}verifyOperationInProgress(){}bu(){var n=this;return(0,W.A)(function*(){let t;do{t=n.gu,yield t}while(t!==n.gu)})()}Du(n){for(const t of this.du)if(t.timerId===n)return!0;return!1}vu(n){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==n&&t.timerId===n)break;return this.bu()})}Cu(n){this.mu.push(n)}Su(n){const t=this.du.indexOf(n);this.du.splice(t,1)}}function vu(i){return function(t){if("object"!=typeof t||null===t)return!1;const o=t;for(const a of["next","error","complete"])if(a in o&&"function"==typeof o[a])return!0;return!1}(i)}class He extends Eo{constructor(n,t,s,o){super(n,t,s,o),this.type="firestore",this._queue=new Hp,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){var n=this;return(0,W.A)(function*(){if(n._firestoreClient){const t=n._firestoreClient.terminate();n._queue=new Hp(t),n._firestoreClient=void 0,yield t}})()}}function yu(i,n){const t="object"==typeof i?i:(0,Xs.Sx)(),s="string"==typeof i?i:n||"(default)",o=(0,Xs.j6)(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const a=(0,ot.yU)("firestore");a&&function lx(i,n,t,s={}){var o;const a=(i=je(i,Eo))._getSettings(),r=`${n}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==r&&sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},a),{host:r,ssl:!1})),s.mockUserToken){let l,c;if("string"==typeof s.mockUserToken)l=s.mockUserToken,c=Et.MOCK_USER;else{l=(0,ot.Fy)(s.mockUserToken,null===(o=i._app)||void 0===o?void 0:o.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new se($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Et(_)}i._authCredentials=new n1(new Y_(l,c))}}(o,...a)}return o}function mt(i){if(i._terminated)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||function Jp(i){var n,t,s;const o=i._freezeSettings(),a=(c=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new M1(i._databaseId,c,i._persistenceKey,(d=o).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$p(d.experimentalLongPollingOptions),d.useFetchStreams));var c,d;i._componentsProvider||!(null===(t=o.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(s=o.localCache)||void 0===s)&&s._onlineComponentProvider&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new Wb(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}}(i._componentsProvider))}(i),i._firestoreClient}class Os{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Os(pt.fromBase64String(n))}catch(t){throw new se($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(n){return new Os(pt.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Rs{constructor(...n){for(let t=0;t<n.length;++t)if(0===n[t].length)throw new se($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Oi{constructor(n){this._methodName=n}}class wu{constructor(n,t){if(!isFinite(n)||n<-90||n>90)throw new se($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(t)||t<-180||t>180)throw new se($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=n,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return we(this._lat,n._lat)||we(this._long,n._long)}}class or{constructor(n){this._values=(n||[]).map(t=>t)}toArray(){return this._values.map(n=>n)}isEqual(n){return function(s,o){if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a])return!1;return!0}(this._values,n._values)}}const dx=/^__.*__$/;class mx{constructor(n,t,s){this.data=n,this.fieldMask=t,this.fieldTransforms=s}toMutation(n,t){return null!==this.fieldMask?new Fn(n,this.data,this.fieldMask,t,this.fieldTransforms):new li(n,this.data,t,this.fieldTransforms)}}function eh(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class ar{constructor(n,t,s,o,a,r){this.settings=n,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,void 0===a&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(n){return new ar(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(n){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(n),o=this.xu({path:s,Nu:!1});return o.Lu(n),o}Bu(n){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(n),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(n){return this.xu({path:void 0,Nu:!0})}qu(n){return cr(n,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(n){return void 0!==this.fieldMask.find(t=>n.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>n.isPrefixOf(t.field))}Fu(){if(this.path)for(let n=0;n<this.path.length;n++)this.Lu(this.path.get(n))}Lu(n){if(0===n.length)throw this.qu("Document fields must not be empty");if(eh(this.Mu)&&dx.test(n))throw this.qu('Document fields cannot begin and end with "__"')}}class px{constructor(n,t,s){this.databaseId=n,this.ignoreUndefinedProperties=t,this.serializer=s||Co(n)}$u(n,t,s,o=!1){return new ar({Mu:n,methodName:t,Ku:s,path:at.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fs(i){const n=i._freezeSettings(),t=Co(i._databaseId);return new px(i._databaseId,!!n.ignoreUndefinedProperties,t)}function rr(i,n,t,s,o,a={}){const r=i.$u(a.merge||a.mergeFields?2:0,n,t,o);Ru("Data must be an object, but it was:",r,s);const l=sh(s,r);let c,_;if(a.merge)c=new Ht(r.fieldMask),_=r.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const f=Fo(n,p,t);if(!r.contains(f))throw new se($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);oh(d,f)||d.push(f)}c=new Ht(d),_=r.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,_=r.fieldTransforms;return new mx(new jt(l),c,_)}function js(i,n){if(ih(i=(0,ot.Ku)(i)))return Ru("Unsupported field value:",n,i),sh(i,n);if(i instanceof Oi)return function(s,o){if(!eh(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.Nu&&4!==n.Mu)throw n.qu("Nested arrays are not supported");return function(s,o){const a=[];let r=0;for(const l of s){let c=js(l,o.ku(r));null==c&&(c={nullValue:"NULL_VALUE"}),a.push(c),r++}return{arrayValue:{values:a}}}(i,n)}return function(s,o){if(null===(s=(0,ot.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return qd(o.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const a=dt.fromDate(s);return{timestampValue:ui(o.serializer,a)}}if(s instanceof dt){const a=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ui(o.serializer,a)}}if(s instanceof wu)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Os)return{bytesValue:dm(o.serializer,s._byteString)};if(s instanceof bt){const a=o.databaseId,r=s.firestore._databaseId;if(!r.isEqual(a))throw o.qu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Pl(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof or)return l=o,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if("number"!=typeof c)throw l.qu("VectorValues must only contain numeric values.");return Rl(l.serializer,c)})}}}}};var l;throw o.qu(`Unsupported field value: ${ir(s)}`)}(i,n)}function sh(i,n){const t={};return _d(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Yn(i,(s,o)=>{const a=js(o,n.Ou(s));null!=a&&(t[s]=a)}),{mapValue:{fields:t}}}function ih(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof dt||i instanceof wu||i instanceof Os||i instanceof bt||i instanceof Oi||i instanceof or)}function Ru(i,n,t){if(!ih(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const s=ir(t);throw n.qu("an object"===s?i+" a custom object":i+" "+s)}var o}function Fo(i,n,t){if((n=(0,ot.Ku)(n))instanceof Rs)return n._internalPath;if("string"==typeof n)return lr(i,n);throw cr("Field path arguments must be of type string or ",i,!1,void 0,t)}const hx=new RegExp("[~\\*/\\[\\]]");function lr(i,n,t){if(n.search(hx)>=0)throw cr(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Rs(...n.split("."))._internalPath}catch{throw cr(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function cr(i,n,t,s,o){const a=s&&!s.isEmpty(),r=void 0!==o;let l=`Function ${n}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||r)&&(c+=" (found",a&&(c+=` in field ${s}`),r&&(c+=` in document ${o}`),c+=")"),new se($.INVALID_ARGUMENT,l+i+c)}function oh(i,n){return i.some(t=>t.isEqual(n))}class jo{constructor(n,t,s,o,a){this._firestore=n,this._userDataWriter=t,this._key=s,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new fx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const t=this._document.data.field(ur("DocumentSnapshot.get",n));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fx extends jo{data(){return super.data()}}function ur(i,n){return"string"==typeof n?lr(i,n):n instanceof Rs?n._internalPath:n._delegate._internalPath}function ah(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new se($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fu{}class zo extends Fu{}function rh(i,n,...t){let s=[];n instanceof Fu&&s.push(n),s=s.concat(t),function(a){const r=a.filter(c=>c instanceof Ri).length,l=a.filter(c=>c instanceof Mo).length;if(r>1||r>0&&l>0)throw new se($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class Mo extends zo{constructor(n,t,s){super(),this._field=n,this._op=t,this._value=s,this.type="where"}static _create(n,t,s){return new Mo(n,t,s)}_apply(n){const t=this._parse(n);return dh(n._query,t),new zt(n.firestore,n.converter,Al(n._query,t))}_parse(n){const t=Fs(n.firestore);return function(a,r,l,c,_,d,p){let f;if(_.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new se($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){_h(p,d);const b=[];for(const I of p)b.push(uh(c,a,I));f={arrayValue:{values:b}}}else f=uh(c,a,p)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||_h(p,d),f=function nh(i,n,t,s=!1){return js(t,i.$u(s?4:3,n))}(l,"where",p,"in"===d||"not-in"===d);return Me.create(_,d,f)}(n._query,0,t,n.firestore._databaseId,this._field,this._op,this._value)}}function lh(i,n,t){const s=n,o=ur("where",i);return Mo._create(o,s,t)}class Ri extends Fu{constructor(n,t){super(),this.type=n,this._queryConstraints=t}static _create(n,t){return new Ri(n,t)}_parse(n){const t=this._queryConstraints.map(s=>s._parse(n)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ye.create(t,this._getOperator())}_apply(n){const t=this._parse(n);return 0===t.getFilters().length?n:(function(o,a){let r=o;const l=a.getFlattenedFilters();for(const c of l)dh(r,c),r=Al(r,c)}(n._query,t),new zt(n.firestore,n.converter,Al(n._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function uh(i,n,t){if("string"==typeof(t=(0,ot.Ku)(t))){if(""===t)throw new se($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!El(n)&&-1!==t.indexOf("/"))throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=n.path.child(ze.fromString(t));if(!ce.isDocumentKey(s))throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return bs(i,new ce(s))}if(t instanceof bt)return bs(i,t._key);throw new se($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ir(t)}.`)}function _h(i,n){if(!Array.isArray(i)||0===i.length)throw new se($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`)}function dh(i,n){const t=function(o,a){for(const r of o)for(const l of r.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(n.op));if(null!==t)throw new se($.INVALID_ARGUMENT,t===n.op?`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`:`Invalid query. You cannot use '${n.op.toString()}' filters with '${t.toString()}' filters.`)}class ph{convertValue(n,t="none"){switch(Xn(n)){case 0:return null;case 1:return n.booleanValue;case 2:return rt(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,t);case 5:return n.stringValue;case 6:return this.convertBytes(An(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,t);case 11:return this.convertObject(n.mapValue,t);case 10:return this.convertVectorValue(n.mapValue);default:throw me()}}convertObject(n,t){return this.convertObjectMap(n.fields,t)}convertObjectMap(n,t="none"){const s={};return Yn(n,(o,a)=>{s[o]=this.convertValue(a,t)}),s}convertVectorValue(n){var t,s,o;const a=null===(o=null===(s=null===(t=n.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===s?void 0:s.values)||void 0===o?void 0:o.map(r=>rt(r.doubleValue));return new or(a)}convertGeoPoint(n){return new wu(rt(n.latitude),rt(n.longitude))}convertArray(n,t){return(n.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(n,t){switch(t){case"previous":const s=ya(n);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(to(n));default:return null}}convertTimestamp(n){const t=En(n);return new dt(t.seconds,t.nanos)}convertDocumentKey(n,t){const s=ze.fromString(n);fe(wm(s));const o=new Ts(s.get(1),s.get(3)),a=new ce(s.popFirst(5));return o.isEqual(t)||gt(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class zs{constructor(n,t){this.hasPendingWrites=n,this.fromCache=t}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Fi extends jo{constructor(n,t,s,o,a,r){super(n,t,s,o,r),this._firestore=n,this._firestoreImpl=n,this.metadata=a}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const t=new hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,t={}){if(this._document){const s=this._document.data.field(ur("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class hr extends Fi{data(n={}){return super.data(n)}}class ji{constructor(n,t,s,o){this._firestore=n,this._userDataWriter=t,this._snapshot=o,this.metadata=new zs(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const n=[];return this.forEach(t=>n.push(t)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,t){this._snapshot.docs.forEach(s=>{n.call(t,new hr(this._firestore,this._userDataWriter,s.key,s,new zs(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const t=!!n.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let r=0;return o._snapshot.docChanges.map(l=>({type:"added",doc:new hr(o._firestore,o._userDataWriter,l.doc.key,l.doc,new zs(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:r++}))}{let r=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(l=>a||3!==l.type).map(l=>{const c=new hr(o._firestore,o._userDataWriter,l.doc.key,l.doc,new zs(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,d=-1;return 0!==l.type&&(_=r.indexOf(l.doc.key),r=r.delete(l.doc.key)),1!==l.type&&(r=r.add(l.doc),d=r.indexOf(l.doc.key)),{type:bx(l.type),doc:c,oldIndex:_,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}class ss extends ph{constructor(n){super(),this.firestore=n}convertBytes(n){return new Os(n)}convertReference(n){const t=this.convertDocumentKey(n,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function hh(i){i=je(i,zt);const n=je(i.firestore,He),t=mt(n),s=new ss(n);return ah(i._query),function Bp(i,n,t={}){const s=new At;return i.asyncQueue.enqueueAndForget((0,W.A)(function*(){return function(a,r,l,c,_){const d=new nr({next:f=>{d.eu(),r.enqueueAndForget(()=>Fc(a,p)),f.fromCache&&"server"===c.source?_.reject(new se($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(f)},error:f=>_.reject(f)}),p=new Dc(l,d,{includeMetadataChanges:!0,ua:!0});return Oc(a,p)}(yield Ei(i),i.asyncQueue,n,t,s)})),s.promise}(t,i._query).then(o=>new ji(n,s,i,o))}function fh(i,n,t){i=je(i,bt);const s=je(i.firestore,He),o=function pr(i,n,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(n,t):i.toFirestore(n):n,s}(i.converter,n,t);return Do(s,[rr(Fs(s),"setDoc",i._key,o,null!==i.converter,t).toMutation(i._key,lt.none())])}function fr(i,...n){var t,s,o;i=(0,ot.Ku)(i);let a={includeMetadataChanges:!1,source:"default"},r=0;"object"!=typeof n[r]||vu(n[r])||(a=n[r],r++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(vu(n[r])){const p=n[r];n[r]=null===(t=p.next)||void 0===t?void 0:t.bind(p),n[r+1]=null===(s=p.error)||void 0===s?void 0:s.bind(p),n[r+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}let c,_,d;if(i instanceof bt)_=je(i.firestore,He),d=si(i._key.path),c={next:p=>{n[r]&&n[r](zu(_,i,p))},error:n[r+1],complete:n[r+2]};else{const p=je(i,zt);_=je(p.firestore,He),d=p._query;const f=new ss(_);c={next:b=>{n[r]&&n[r](new ji(_,f,p,b))},error:n[r+1],complete:n[r+2]},ah(i._query)}return function(f,b,I,y){const k=new nr(y),O=new Dc(b,k,I);return f.asyncQueue.enqueueAndForget((0,W.A)(function*(){return Oc(yield Ei(f),O)})),()=>{k.eu(),f.asyncQueue.enqueueAndForget((0,W.A)(function*(){return Fc(yield Ei(f),O)}))}}(mt(_),d,l,c)}function Do(i,n){return function(s,o){const a=new At;return s.asyncQueue.enqueueAndForget((0,W.A)(function*(){return function Ob(i,n,t){return Qc.apply(this,arguments)}(yield function Tu(i){return sr(i).then(n=>n.syncEngine)}(s),o,a)})),a.promise}(mt(i),n)}function zu(i,n,t){const s=t.docs.get(n._key),o=new ss(i);return new Fi(i,o,n._key,s,new zs(t.hasPendingWrites,t.fromCache),n.converter)}!function(n,t=!0){Ws=Xs.MF,(0,Xs.om)(new Zg.uA("firestore",(s,{instanceIdentifier:o,options:a})=>{const r=s.getProvider("app").getImmediate(),l=new He(new s1(s.getProvider("auth-internal")),new a1(s.getProvider("app-check-internal")),function(_,d){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new se($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(_.options.projectId,d)}(r,o),r);return a=Object.assign({useFetchStreams:t},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),(0,Xs.KO)(q_,"4.7.5",n),(0,Xs.KO)(q_,"4.7.5","esm2017")}();var xt=A(71985),zx=A(12412),Mx=A(4930);let Dx=(()=>{var i;class n{examSessions_read(s){var o=this;return new xt.c(a=>{this.getFirestoreDb(!1).subscribe(function(){var r=(0,W.A)(function*(l){if(l&&1==l.success)try{var c=yield o._getDocument(l.data,"exam_sessions/"+s,o.getUserId());a.next({success:1,data:c,message:"successful"}),a.complete()}catch(d){console.log(d),a.next({success:0,data:"",message:""+d}),a.complete()}else a.next({success:0,data:"",message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_write(s,o){var a=this;return new xt.c(r=>{this.getFirestoreDb(!1).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success)try{var _=yield a._saveDocument(c.data,"exam_sessions/"+s,a.getUserId(),o);r.next({success:1,data:_,message:"successful"}),r.complete()}catch(p){console.log(p),r.next({success:0,data:"",message:""+p}),r.complete()}else r.next({success:0,data:"",message:c.message}),r.complete()});return function(c){return l.apply(this,arguments)}}())})}examSessions_writeUserMap(s,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForStudentExam(!1,s).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success&&c.data)try{var _=yield a._saveDocumentMerge(c.data,"exam_sessions/"+s,"user_map",o);r.next({success:1,data:_,message:"successful"}),r.complete()}catch(p){console.log(p),r.next({success:0,data:"",message:""+p}),r.complete()}else r.next({success:0,data:"",message:c.message}),r.complete()});return function(c){return l.apply(this,arguments)}}())})}examSessions_delete(s){var o=this;return new xt.c(a=>{this.getFirestoreDb(!1).subscribe(function(){var r=(0,W.A)(function*(l){if(l&&1==l.success)try{yield o._removeDocument(l.data,"exam_sessions/"+s,o.getUserId()),a.next({success:1,data:"",message:"successful"}),a.complete()}catch(_){console.log(_),a.next({success:0,data:"",message:""+_}),a.complete()}else a.next({success:0,data:"",message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_subscribeUserMap(s){var o=this;return new xt.c(a=>{this.getFirestoreDbForTeacherExam(!1,s).subscribe(function(){var r=(0,W.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshot(l.data,"exam_sessions/"+s,"user_map",p=>{a.next({success:1,data:p,message:"successful"}),a.complete()});o.addUnsubscribe("exam_sessions_"+s,c)}catch(p){console.log(p),a.next({success:0,data:void 0,message:""+p}),a.complete()}else a.next({success:0,data:void 0,message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_subscribe(s){var o=this;return new xt.c(a=>{this.getFirestoreDb(!1).subscribe(function(){var r=(0,W.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshot(l.data,"exam_sessions/"+s,o.getUserId(),p=>{a.next({success:1,data:p,message:"successful"}),a.complete()});o.addUnsubscribe("exam_sessions_"+s,c)}catch(p){console.log(p),a.next({success:0,data:void 0,message:""+p}),a.complete()}else a.next({success:0,data:void 0,message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_unsubscribe(s){this.removeAllunsubscribe("exam_sessions_"+s)}examSessions_subscribeWithQuery(s,o){var a=this;return new xt.c(o&&3==o.length?r=>{this.getFirestoreDb(!1).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success)try{var _=a.myOnSnapshotCollectionWithQuery(c.data,"exam_sessions/"+s,o,f=>{r.next({success:1,data:f,message:"successful"}),r.complete()});a.addUnsubscribe("exam_sessions_"+s,_)}catch(f){console.log(f),r.next({success:0,data:void 0,message:""+f}),r.complete()}else r.next({success:0,data:void 0,message:c.message}),r.complete()});return function(c){return l.apply(this,arguments)}}())}:r=>{r.next({success:0,data:void 0,message:"EXCEPTION Query Param not valid"}),r.complete(),r.next({success:0,message:"EXCEPTION Query Param not valid"})})}examLiveTeachers_student_subscribe(s){var o=this;return new xt.c(a=>{this.getFirestoreDbForStudentExam(!1,s).subscribe(function(){var r=(0,W.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshotCollection(l.data,"exam_live_teachers/"+s,_=>{a.next({success:1,data:_})});o.addUnsubscribe("exam_live_teachers_"+s,c)}catch(_){console.log(_),a.next({success:0,message:"EXCEPTION",ex:_.toString()})}else a.next(l)});return function(l){return r.apply(this,arguments)}}())})}examLiveTeachers_student_unbsubscribe(s){this.removeAllunsubscribe("exam_live_teachers_"+s)}examLiveTeachers_teacher_saveChange(s,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForTeacherExam(!1,s).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success)try{var _=yield a._saveDocument(c.data,"exam_live_teachers/"+s,a.getUserId(),o);r.next({success:1,data:_})}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLives_teacher_getDocumentByUserIds(s,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForTeacherExam(!1,s).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success)try{var _=yield a._getDocuments(c.data,"exam_lives/"+s,o);r.next({success:1,data:_})}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLiveStudents_student_subscribe(s){var o=this;return new xt.c(a=>{this.getFirestoreDbForStudentExam(!1,s).subscribe(function(){var r=(0,W.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshot(l.data,"exam_live_students/"+s,o.getUserId(),_=>{a.next({success:1,data:_})});o.addUnsubscribe("exam_live_students_"+s,c)}catch(_){console.log(_),a.next({success:0,message:"EXCEPTION",ex:_.toString()})}else a.next(l)});return function(l){return r.apply(this,arguments)}}())})}examLiveStudents_student_unbsubscribe(s){this.removeAllunsubscribe("exam_live_students_"+s)}examLiveStudents_teacher_subscribe(s,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForTeacherExam(!1,s).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success)try{var _=a.myOnSnapshot(c.data,"exam_live_students/"+s,o,d=>{r.next({success:1,data:d})});a.addUnsubscribe("exam_live_students_"+s,_)}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLiveStudents_teacher_unbsubscribe(s){this.removeAllunsubscribe("exam_live_students_"+s)}examLiveStudents_student_saveChange(s,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForStudentExam(!1,s).subscribe(function(){var l=(0,W.A)(function*(c){if(c&&1==c.success)try{var _=yield a._saveDocument(c.data,"exam_live_students/"+s,a.getUserId(),o);r.next({success:1,data:_})}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLiveStudents_teacher_saveChange(s,o,a){var r=this;return new xt.c(l=>{this.getFirestoreDbForTeacherExam(!1,s).subscribe(function(){var c=(0,W.A)(function*(_){if(_&&1==_.success)try{var d=yield r._saveDocumentMerge(_.data,"exam_live_students/"+s,o,a);l.next({success:1,data:d})}catch(p){console.log(p),l.next({success:0,message:"EXCEPTION",ex:p.toString()})}else l.next(_)});return function(_){return c.apply(this,arguments)}}())})}getFirestoreDb(s){return new xt.c(o=>{var a=this.createFirestoreKey("firestore_db"),r=this.getLocalFirestoreDb(a);null!=r&&0==s?(o.next({success:1,data:r,message:"successful"}),o.complete()):this.firestoreServiceApi.apiFirestoreGetSimpleTokenGet().subscribe(c=>{c&&1==c.success?(0,Wi.p)(this.getAuthApp(),c?.data?.token??"").then(()=>{var d=yu(this.app,tt.c.firestoreDatabase);this.setLocalFirestoreDb(a,d),o.next({success:1,data:d,message:"successful"}),o.complete()}).catch(d=>{"auth/invalid-custom-token"===d.code?(o.next({success:0,data:void 0,message:"EXPIRED"}),o.complete()):(o.next({success:0,data:void 0,message:"AUTH_ERROR"}),o.complete())}):(o.next({success:0,data:void 0,message:c.message??""}),o.complete())})})}getFirestoreDbForStudentExam(s,o){return new xt.c(a=>{var r=this.createFirestoreKey("firestore_db_student_"+o),l=this.getLocalFirestoreDb(r);null!=l&&0==s?(a.next({success:1,data:l,message:"successful"}),a.complete()):this.firestoreServiceApi.apiFirestoreGetStudentExamTokenGet(o).subscribe(_=>{_&&1==_.success?(0,Wi.p)(this.getAuthApp(),_?.data?.token??"").then(()=>{var p=yu(this.app,tt.c.firestoreDatabase);this.setLocalFirestoreDb(r,p),a.next({success:1,data:p,message:"successful"}),a.complete()}).catch(p=>{"auth/invalid-custom-token"===p.code?(a.next({success:0,data:void 0,message:"EXPIRED"}),a.complete()):(a.next({success:0,data:void 0,message:"AUTH_ERROR"}),a.complete())}):(a.next({success:0,data:void 0,message:_.message??""}),a.complete())})})}getFirestoreDbForTeacherExam(s,o){return new xt.c(a=>{var r=this.createFirestoreKey("firestore_db_teacher_"+o),l=this.getLocalFirestoreDb(r);null!=l&&0==s?(a.next({success:1,data:l,message:"successful"}),a.complete()):this.firestoreServiceApi.apiFirestoreGetTeacherExamTokenGet(o).subscribe(_=>{_&&1==_.success?(0,Wi.p)(this.getAuthApp(),_?.data?.token??"").then(()=>{var p=yu(this.app,tt.c.firestoreDatabase);this.setLocalFirestoreDb(r,p),a.next({success:1,data:p,message:"successful"}),a.complete()}).catch(p=>{"auth/invalid-custom-token"===p.code?(a.next({success:0,data:void 0,message:"EXPIRED"}),a.complete()):(a.next({success:0,data:void 0,message:"AUTH_ERROR"}),a.complete())}):(a.next({success:0,data:void 0,message:_.message??""}),a.complete())})})}signInUserByToken(s){return new xt.c(o=>{(0,Wi.p)(this.getAuthApp(),s).then(()=>{o.next({success:1,data:"",message:"successful"}),o.complete()}).catch(a=>{"auth/invalid-custom-token"===a.code?(o.next({success:0,data:"",message:"EXPIRED"}),o.complete()):(o.next({success:0,data:"",message:"AUTH_ERROR"}),o.complete())})})}setLocalFirestoreDb(s,o){this.firestoreDbs[s]=o}getLocalFirestoreDb(s){if(this.firestoreDbs.hasOwnProperty(s))return this.firestoreDbs[s]}removeLocalFirestoreDb(s){this.firestoreDbs.hasOwnProperty(s)&&delete this.firestoreDbs[s]}createFirestoreKey(s){return this.userService.getUserObj().id+"_"+s}getUserId(){return this.userService.getUserObj().id?.toString()??"0"}addUnsubscribe(s,o){s=this.getUserId()+"_"+s,this.listSubscribers.hasOwnProperty(s)||(this.listSubscribers[s]=[]),this.listSubscribers[s].push(o)}removeAllunsubscribe(s){if(s=this.getUserId()+"_"+s,this.listSubscribers.hasOwnProperty(s)){for(var o=0;o<this.listSubscribers[s].length;o++)this.listSubscribers[s][o]();delete this.listSubscribers[s]}}_saveDocument(s,o,a,r){var l=this;return(0,W.A)(function*(){return o=l.getBaseFirestore()+"/"+o,yield fh(Ai(s,o,a),l.commonService.myClone(r)),a})()}_saveDocumentMerge(s,o,a,r){var l=this;return(0,W.A)(function*(){return o=l.getBaseFirestore()+"/"+o,yield fh(Ai(s,o,a),l.commonService.myClone(r),{merge:!0}),a})()}_getCollection(s,o){var a=this;return(0,W.A)(function*(){o=a.getBaseFirestore()+"/"+o;const r=Ao(s,o);return(yield hh(r)).docs.map(_=>_.data())})()}_getDocument(s,o,a){var r=this;return(0,W.A)(function*(){o=r.getBaseFirestore()+"/"+o;const l=Ai(s,o,a),c=yield function xx(i){i=je(i,bt);const n=je(i.firestore,He);return function Lp(i,n,t={}){const s=new At;return i.asyncQueue.enqueueAndForget((0,W.A)(function*(){return function(a,r,l,c,_){const d=new nr({next:f=>{d.eu(),r.enqueueAndForget(()=>Fc(a,p));const b=f.docs.has(l);!b&&f.fromCache?_.reject(new se($.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&f.fromCache&&c&&"server"===c.source?_.reject(new se($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(f)},error:f=>_.reject(f)}),p=new Dc(si(l.path),d,{includeMetadataChanges:!0,ua:!0});return Oc(a,p)}(yield Ei(i),i.asyncQueue,n,t,s)})),s.promise}(mt(n),i._key).then(t=>zu(n,i,t))}(l);return c.exists()?c.data():null})()}_getDocuments(s,o,a){var r=this;return(0,W.A)(function*(){var l={};o=r.getBaseFirestore()+"/"+o;const c=rh(Ao(s,o),lh(function _x(){return new Rs("__name__")}(),"in",a));return(yield hh(c)).forEach(d=>{l[d.id]=d.data()}),l})()}_removeDocument(s,o,a){var r=this;return(0,W.A)(function*(){o=r.getBaseFirestore()+"/"+o,yield function vx(i){return Do(je(i.firestore,He),[new ci(i._key,lt.none())])}(Ai(s,o,a))})()}myOnSnapshot(s,o,a,r){return fr(Ai(s,o=this.getBaseFirestore()+"/"+o,a),c=>{r(c.data())})}myOnSnapshotCollection(s,o,a){return fr(Ao(s,o=this.getBaseFirestore()+"/"+o),function(){var l=(0,W.A)(function*(c){var _=[];c.forEach(d=>{_.push(d.data())}),a(_)});return function(c){return l.apply(this,arguments)}}())}myOnSnapshotOnlyChangeInCollection(s,o,a){return fr(Ao(s,o=this.getBaseFirestore()+"/"+o),function(){var l=(0,W.A)(function*(c){var _=[];c.docChanges().forEach(d=>{_.push(d.doc.data())}),a(_)});return function(c){return l.apply(this,arguments)}}())}myOnSnapshotCollectionWithQuery(s,o,a,r){return fr(rh(Ao(s,o=this.getBaseFirestore()+"/"+o),lh(a[0],a[1],a[2])),function(){var _=(0,W.A)(function*(d){var p=[];d.docChanges().forEach(f=>{p.push(f.doc.data())}),r(p)});return function(d){return _.apply(this,arguments)}}())}getBaseFirestore(){return tt.c.firestoreCollection}getInitApp(){return this.app}getAuthApp(){return(0,Wi.xI)(this.app)}initFirestoreConfig(){return new xt.c(s=>{this.firestoreSettingService.apiFirestoreSettingGetPublicKeyGet().subscribe(o=>{let a=tt.c.firestoreConfig_app1;a.apiKey=o.data?.value??"",this.app=(0,Kg.Wp)(a,"firestoreapp"),s.next(),s.complete()})})}constructor(s,o,a,r){this.firestoreServiceApi=s,this.userService=o,this.commonService=a,this.firestoreSettingService=r,this.firestoreDbs={},this.listSubscribers={}}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(zx.B),e.KVO(pn.R),e.KVO(Le.R),e.KVO(Mx.Z))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})(),xh=(()=>{var i;class n{monitorAtTeacherDashboard(s){try{let o=ha();if(typeof o>"u"||!o||!o.showMonitorTeacher)return;this.fireStoreService.initFirestoreConfig().subscribe(()=>{o.ver=this.monitorService.getMNoteVer();var a=this.userService.getUserObj();o.showMonitorTeacher({user:{token:a.rememberToken,userid:a.id,username:a.fullName},config:{domainApi:tt.c.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live",urlExamResultGetLastExamResultOfStudentId:"ExamLivestream/GetLastExamResultOfStudentId"},roomid:s.roomId,examid:s.examId,userlist:s.userList,examconfig:s.examConfig,firebaseApp:this.fireStoreService,filetypeStr:s.fileTypeStr})})}catch(o){console.log(o)}}monitorAtStudentDashboard(s,o){try{let r=ha();if(typeof r>"u"||!r)return;r.ver=this.monitorService.getMNoteVer();var a=this.userService.getUserObj();this.fireStoreService.initFirestoreConfig().subscribe(()=>{r.loadMonitor(()=>{if(!r.MonitorStudent)return;var l={user:{token:a.rememberToken,userid:a.id,username:a.fullName},config:{domainApi:tt.c.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live"},roomid:s,element:"monitorScreen",examconfig:o,firebaseApp:this.fireStoreService,isStarted:!1};r.MonitorStudent.getInstance().prepairSession(l);let _=window.setInterval(()=>{let d=document.getElementById("monitorScreen");if(d){let p=d.getElementsByTagName("div")[0];p&&(p.setAttribute("class","mx-auto"),clearInterval(_))}},50)})})}catch(r){console.log(r)}}monitorAtTestPage(s,o,a){let r=ha();if(typeof r>"u"||!r)return a(!1);var l=this.userService.getUserObj(),c=o;r.ver=this.monitorService.getMNoteVer(),this.fireStoreService.initFirestoreConfig().subscribe(()=>{r.loadMonitor(()=>{if(!r.MonitorStudent)return a(!1);var _={user:{token:l.rememberToken,userid:l.id,username:l.fullName,studentid:c?c.id:0,studentname:c?c.fullName:null},config:{domainApi:tt.c.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live"},roomid:s.roomId,element:"monitorScreenTakeTest",examconfig:s.examConfig,examid:s.examId,firebaseApp:this.fireStoreService,resultid:s.resultId,isStarted:!0,clickFromIframeFunc:()=>{},clickFromIframeFuncCaller:this};r.MonitorStudent.getInstance().startSession(_),a(!0)})})}destroyMonitorAtStudentDashboard(){try{let o=ha();if(typeof o>"u"||!o||!o.MonitorStudent)return;o.MonitorStudent.getInstance().stopSession()}catch(o){console.log(o)}}constructor(s,o,a){this.userService=s,this.monitorService=o,this.fireStoreService=a}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(pn.R),e.KVO(Jg),e.KVO(Dx))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var Gx=A(47428);let Px=(()=>{var i;class n{constructor(){this.googleAnalyticsService=(0,e.WQX)(Gx.p),this.sAztUserService=(0,e.WQX)(pn.R)}sendStartTestEvent(){let s=this.sAztUserService.isLoginAndNotAnonymous()?"startTestAnonymous":"startTestLogin";this.googleAnalyticsService.event(s)}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();const Nx=(i,n)=>({"monitor-height":i,"mobile-monitor":n}),un=()=>({"mr-2":!0}),Vx=()=>({"ml-1 flex":!0});function Lx(i,n){if(1&i&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,t.hasErrorMessage)," ")}}function Bx(i,n){if(1&i&&(e.j41(0,"div",19),e.nrm(1,"div",20,1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.l_i(1,Nx,!t.isMobileDevice,t.isMobileDevice))}}function $x(i,n){if(1&i&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",31),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(8,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(2),e.Y8G("ngClass",e.lJ4(9,un)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_thoi_gian_vao_thi")," "),e.R7$(3),e.SpI(" ",t.examObj.startTime?e.bMT(7,5,t.examObj.startTime):e.bMT(8,7,"lang_auto_khong_thoi_han")," ")}}function Qx(i,n){if(1&i&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",32),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(3),s=e.r8f(0);e.R7$(2),e.Y8G("ngClass",e.lJ4(7,un)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_your_remaining_test")," "),e.R7$(3),e.SpI(" ",(s<=0?t.examObj.isTakeTestOnce:t.totalTested)+"/"+t.examObj.isTakeTestOnce+" "+e.bMT(7,5,"lang_auto_luot")," ")}}function qx(i,n){if(1&i&&(e.j41(0,"div",21),e.DNE(1,$x,9,10,"div",22),e.j41(2,"div",23)(3,"p",24),e.nrm(4,"lucide-icon",25),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"p",26),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",23)(11,"p",24),e.nrm(12,"lucide-icon",27),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"p",26),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.DNE(18,Qx,8,8,"div",22),e.j41(19,"div")(20,"div",28)(21,"span",29),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.nrm(24,"app-capacity-exam-tree-in-view-mode-component",30),e.k0s()()),2&i){let t;const s=e.XpG(2);e.R7$(),e.Y8G("ngIf",1!=s.examConfigObj.allowTestingEachQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(23,un)),e.R7$(),e.SpI(" ",e.bMT(6,13,"lang_auto_loai_de")," "),e.R7$(3),e.SpI(" ",e.bMT(9,15,"lang_core_danh_gia_nang_luc")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(24,un)),e.R7$(),e.SpI(" ",e.bMT(14,17,"lang_auto_so_luot_lam_de")," "),e.R7$(3),e.SpI(" ",null==s.totalAttended?0:s.totalAttended+" "+e.bMT(17,19,"lang_auto_luot")," "),e.R7$(2),e.Y8G("ngIf",(null!==(t=null==s.examObj?null:s.examObj.isTakeTestOnce)&&void 0!==t?t:0)>0),e.R7$(4),e.JRh(e.bMT(23,21,"lang_testbank_frontend_exam_structure_view_structure")),e.R7$(2),e.Y8G("isExpand",!1)("showCountInfo",!0)("isShowLabel",!1)("rawNodes",s.examComponents)}}function Yx(i,n){if(1&i&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",31),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(8,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(2),e.Y8G("ngClass",e.lJ4(9,un)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_thoi_gian_vao_thi")," "),e.R7$(3),e.SpI(" ",t.examObj.startTime?e.bMT(7,5,t.examObj.startTime):e.bMT(8,7,"lang_auto_khong_thoi_han")," ")}}function Ux(i,n){if(1&i&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",32),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(3),s=e.r8f(0);e.R7$(2),e.Y8G("ngClass",e.lJ4(7,un)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_your_remaining_test")," "),e.R7$(3),e.SpI(" ",(s<=0?t.examObj.isTakeTestOnce:t.totalTested)+"/"+t.examObj.isTakeTestOnce+" "+e.bMT(7,5,"lang_auto_luot")," ")}}function Xx(i,n){if(1&i&&(e.j41(0,"div",21)(1,"div",33)(2,"p",24),e.nrm(3,"lucide-icon",34),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"p",26),e.EFF(7),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s()(),e.DNE(10,Yx,9,10,"div",22),e.j41(11,"div",23)(12,"p",24),e.nrm(13,"lucide-icon",35),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p",26),e.EFF(17),e.k0s()(),e.j41(18,"div",23)(19,"p",24),e.nrm(20,"lucide-icon",25),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s(),e.j41(23,"p",26),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()(),e.j41(26,"div",23)(27,"p",24),e.nrm(28,"lucide-icon",27),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.j41(31,"p",26),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()(),e.DNE(34,Ux,8,8,"div",22),e.k0s()),2&i){let t;const s=e.XpG(2),o=e.r8f(0);e.R7$(3),e.Y8G("ngClass",e.lJ4(30,un)),e.R7$(),e.SpI(" ",e.bMT(5,14,"lang_testbank_tested_list_time_homework")," "),e.R7$(3),e.SpI(" ",s.examObj.minutes&&s.examObj.minutes>0?s.examObj.minutes+" "+e.bMT(8,16,"lang_auto_phut"):e.bMT(9,18,"lang_auto_khong_gioi_han")," "),e.R7$(3),e.Y8G("ngIf",1!=s.examConfigObj.allowTestingEachQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(31,un)),e.R7$(),e.SpI(" ",e.bMT(15,20,"lang_auto_so_luong_cau_hoi")," "),e.R7$(3),e.SpI(" ",2==s.examObj.mixQuestion?s.examObj.limitMixQuestion:s.examObj.countQuestion," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(32,un)),e.R7$(),e.SpI(" ",e.bMT(22,22,"lang_auto_loai_de")," "),e.R7$(3),e.SpI(" ",e.bMT(25,24,s.getExamType(s.examObj))," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(33,un)),e.R7$(),e.SpI(" ",e.bMT(30,26,"lang_auto_so_luot_lam_de")," "),e.R7$(3),e.SpI(" ",null==s.totalAttended?0:s.totalAttended+" "+e.bMT(33,28,"lang_auto_luot")," "),e.R7$(2),e.Y8G("ngIf",(null!==(t=null==s.examObj?null:s.examObj.isTakeTestOnce)&&void 0!==t?t:0)>0&&o>=0)}}function Wx(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",36)(2,"div",37),e.nrm(3,"lucide-icon",38),e.j41(4,"app-testbank-frontend-count-down-box",39),e.bIt("endCountDownEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.endCountDown(o))}),e.k0s()(),e.j41(5,"div",40)(6,"span"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"span",41),e.EFF(10),e.nI1(11,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("ngClass",e.lJ4(9,un)),e.R7$(),e.Y8G("totalSecond",t.countDownSecond)("useCountDown",!0),e.R7$(3),e.JRh(e.bMT(8,5,"lang_core_time_smaller_than_start_time")+" "),e.R7$(3),e.JRh(e.bMT(11,7,t.examObj.startTime))}}function Hx(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_bat_dau_thi")," "))}function Jx(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_start_practicing")," "))}function Kx(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",42)(1,"div",43)(2,"button",44),e.nI1(3,"isParentViewOnly"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToTakeTest())}),e.DNE(4,Hx,3,3,"span",45)(5,Jx,3,3,"span",45),e.nrm(6,"lucide-icon",46),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",e.bMT(3,4,"")),e.R7$(2),e.Y8G("ngIf",1!=t.examConfigObj.allowTestingEachQuestion),e.R7$(),e.Y8G("ngIf",1==t.examConfigObj.allowTestingEachQuestion),e.R7$(),e.Y8G("ngClass",e.lJ4(6,Vx))}}function Zx(i,n){1&i&&(e.j41(0,"div",47)(1,"strong"),e.EFF(2,"(*)"),e.k0s(),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"b"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()),2&i&&(e.R7$(3),e.SpI(" ",e.bMT(4,4,"lang_auto_he_thong_chi_gui_hinh_anh_va_am_thanh_den_giao_vien")," "),e.R7$(3),e.JRh(e.bMT(7,6,"lang_auto_trong_qua_trinh_lam_bai_thi")),e.R7$(2),e.SpI(" ",e.bMT(9,8,"lang_auto__ngay_sau_khi_ket_thuc_bai_lam_he_thong_ngung_gui_du_lieu_du_lieu_thu_thap_chi_su_dung_phuc_vu_cho_cong_tac")," "),e.R7$(3),e.JRh(e.bMT(12,10,"lang_auto_to_chuc_ky_thi")))}function ev(i,n){if(1&i&&(e.j41(0,"div",7)(1,"div",8)(2,"h3",9),e.EFF(3),e.k0s(),e.j41(4,"div",10),e.EFF(5),e.nI1(6,"mytranslate"),e.nrm(7,"azt-download-qr-code",11),e.k0s(),e.DNE(8,Bx,3,4,"div",12)(9,qx,25,25,"div",13),e.nI1(10,"isCapacityExam"),e.DNE(11,Xx,35,34,"div",13),e.nI1(12,"isCapacityExam"),e.j41(13,"div",14),e.DNE(14,Wx,12,10,"ng-container",15)(15,Kx,7,7,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(17,Zx,13,12,"div",16),e.k0s(),e.nrm(18,"app-exam-history",17)(19,"azt-frontend-banner-ads-box",18),e.k0s()),2&i){const t=e.sdS(16),s=e.XpG();e.R7$(3),e.SpI(" ",s.examObj.name," "),e.R7$(2),e.SpI(" ",e.bMT(6,15,"lang_auto_ma_de_thi")+": "+s.examObj.hashId," "),e.R7$(2),e.Y8G("fileName","azota_exam_qr_code_"+s.examObj.hashId)("linkUrl",s.copyLinkToClipboard()),e.R7$(),e.Y8G("ngIf",s.examObj.autoMonitor&&0!=s.examObj.autoMonitor),e.R7$(),e.Y8G("ngIf",e.bMT(10,17,s.examObj)),e.R7$(2),e.Y8G("ngIf",!e.bMT(12,19,s.examObj)),e.R7$(3),e.Y8G("ngIf",s.countDownSecond>0&&!s.statusEndCountDown)("ngIfElse",t),e.R7$(3),e.Y8G("ngIf",s.examObj.autoMonitor&&3==s.examObj.autoMonitor),e.R7$(),e.Y8G("examObj",s.examObj)("curTenantId",s.curTenantId)("curCategoryId",s.curCategoryId)("hashId",s.hashId),e.R7$(),e.Y8G("adsPosition",s.allAdsPositions.STUDENTSTARTTESTATLIST)}}let tv=(()=>{var i;class n extends Z.H{copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.examObj?.hashId}`}redirectToTakeTest(){this.commonService.myNavigationWithQueryString("CAPACITY"!=this.examObj?.objectType?1!==this.examConfigObj.allowTestingEachQuestion?"/test/take-test/"+this.curTenantId+"/"+(this.curCategoryId??0)+"/"+this.hashId:"/test/take-training/"+this.curTenantId+"/"+(this.curCategoryId??0)+"/"+this.hashId:"/test/capacity-exam/"+this.curTenantId+"/"+(this.curCategoryId??0)+"/"+this.hashId,""!=this.password&&null!=this.password?"?password="+encodeURIComponent(this.password)+"?backto="+encodeURIComponent(this.backToLink):"?backto="+encodeURIComponent(this.backToLink))}getExamType(s){return this.homeworkExamService.isOnlyEssay(s)?"lang_auto_tu_luan":this.homeworkExamService.isOnlyTrueFalse(s)?"lang_auto_trac_nghiem":"lang_auto_hon_hop"}endCountDown(s){this.statusEndCountDown=s??!1}getExamCapacityComponents(){this.examObj&&(this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamListExamComponentsHashIdGet(this.examObj.hashId??"").subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message??"");this.examComponents=s.data?.objs??[],this.stopStatusObj()})))}getExamByHashId(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamGetExamObjGet(this.hashId).subscribe(s=>{if(1==s.success){if(this.hasErrorMessage=s.data?.errorMessage?s.data.errorMessage:"",this.examObj=s.data?.examObj,this.examConfigObj=s.data?.examConfigObj??{},this.countDownSecond=this.timeService.compareSecondsWithCurrentTime(this.examObj?.startTime??new Date),this.totalAttended=s.data?.totalAttended??0,this.totalTested=s.data?.totalTested??0,!this.examObj)return this.successStatusObj();if(this.curCategoryId=this.examObj.categoryId??0,this.curTenantId=this.examObj.tenantId??0,this.userInfoService.apiUserInfoSaveUserActionPost({actionType:"take-test",objectId:this.examObj.id,objectKey:this.examObj.hashId}).subscribe(o=>{}),this.commonService.translateMetaData({title:this.commonService.myTranslateInstant("lang_auto_bat_dau_thi")+": "+this.examObj.name,description:this.examObj.name}),3==this.examObj.autoMonitor&&this.openVideoMonitor(),"CAPACITY"!=this.examObj.objectType)return this.successStatusObj();this.getExamCapacityComponents()}else this.errorStatusObj(s.message??"",!0)}))}openVideoMonitor(){this.sAztShowMonitorService.monitorAtStudentDashboard(this.hashId,this.examObj)}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.hashId=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString()??"";let s=this.commonService.getMyQueryParam("offline");if(s)return this.myNavigation(`/test/share-offline-result/${this.hashId}/${s}/-1`);this.password=this.commonService.getMyQueryParam("password")??"",this.curCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.backToLink=this.commonService.getMyQueryParam("backto")??"/student/classroom/0",this.getExamByHashId()}))}constructor(s,o,a,r,l,c){super(),this.userInfoService=s,this.activeRoute=o,this.homeworkExamService=a,this.frontExamService=r,this.sAztShowMonitorService=l,this.sAztGAService=c,this.backToLink="",this.curTenantId=0,this.curCategoryId=0,this.hashId="",this.totalAttended=0,this.totalTested=0,this.hasErrorMessage="",this.password="",this.examConfigObj={},this.examComponents=[],this.allAdsPositions=In.rA,this.allAdsDisplayTypes=In.ud,this.countDownSecond=0,this.statusEndCountDown=!1,this.timeService=(0,e.WQX)(mn.F),this.sAztGAService.sendStartTestEvent()}ngOnDestroy(){this.sAztShowMonitorService.destroyMonitorAtStudentDashboard(),super.ngOnDestroy()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(dl.fv),e.rXU(L.nX),e.rXU(pa.Z),e.rXU(Ce.iB),e.rXU(xh),e.rXU(Px))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-student-view"]],standalone:!0,features:[e.Vt3,e.aNF],decls:5,vars:4,consts:[["normalMode",""],["monitorScreen",""],[3,"headerBackToLink"],[1,"relative"],["class","alert alert-danger mt-2",4,"ngIf"],["class","intro-y mt-8",4,"ngIf"],[1,"alert","alert-danger","mt-2"],[1,"intro-y","mt-8"],[1,"box","mx-auto","mt-5","p-5",2,"max-width","560px"],[1,"text-lg","font-medium","text-center","text-break"],[1,"text-md","justify-center","font-medium","mt-2","flex","items-center"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],["class","row my-2",4,"ngIf"],["class","azt-info-exam mt-5",4,"ngIf"],[1,"mt-5","w-full","flex"],[4,"ngIf","ngIfElse"],["class","note-exam mt-1",4,"ngIf"],[3,"examObj","curTenantId","curCategoryId","hashId"],[1,"mb-3","mt-3",3,"adsPosition"],[1,"row","my-2"],["id","monitorScreen",1,"self-center","text-center",2,"margin","auto",3,"ngClass"],[1,"azt-info-exam","mt-5"],["class","flex items-center mt-3",4,"ngIf"],[1,"flex","items-center","mt-3"],[1,"text-md","flex","items-center"],["name","clipboard-type","size","16",3,"ngClass"],[1,"text-md","font-medium","ml-auto"],["name","users","size","16",3,"ngClass"],[1,"mt-2","mb-2","text-center"],[1,"font-bold"],[3,"isExpand","showCountInfo","isShowLabel","rawNodes"],["name","calendar-clock","size","16",3,"ngClass"],["name","file-sliders","size","16",3,"ngClass"],[1,"flex","items-center"],["name","clock-4","size","16",3,"ngClass"],["name","circle-help","size","16",3,"ngClass"],[1,"mx-auto",2,"max-width","300px"],[1,"btn","w-full","btn-pending-soft","text-lg"],["name","alarm-clock","size","24",3,"ngClass"],["type","wait",3,"endCountDownEvent","totalSecond","useCountDown"],[1,"mt-5","font-medium","text-center"],[1,"text-pending"],[1,"grid","grid-cols-12","gap-5","w-full"],[1,"col-span-12"],["azt-track-service","exam-details-OgNF7kiBSP",1,"btn","btn-pending","w-full","text-white",3,"click","disabled"],[4,"ngIf"],["name","chevron-right","size","16",3,"ngClass"],[1,"note-exam","mt-1"]],template:function(s,o){if(1&s&&(e.SS7(0),e.j41(1,"student-layout",2)(2,"div",3),e.DNE(3,Lx,3,3,"div",4)(4,ev,20,21,"div",5),e.k0s()()),2&s){let a;e.bH3((null!==(a=null==o.examObj?null:o.examObj.isTakeTestOnce)&&void 0!==a?a:0)-o.totalTested),e.R7$(),e.Y8G("headerBackToLink",o.backToLink),e.R7$(2),e.Y8G("ngIf",""!=o.hasErrorMessage),e.R7$(),e.Y8G("ngIf",""==o.hasErrorMessage&&o.examObj)}},dependencies:[ae.j,Xi.d,Hg.n,Cn,_t,_l.K,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.bH,z.hx,z.Xc,U.Id,q.k],encapsulation:2}),n})();var vh=A(43187);let nv=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.activatedRoute=(0,e.WQX)(L.nX),this.hashId="",this.backToLink=""}ngOnInit(){super.ngOnInit(),this.hashId=this.getMyParam(this.activatedRoute,"hash_id")??"",this.backToLink=this.getMyQueryParam("backto")??`de-thi/${this.hashId}`}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-leaderboard-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[[3,"headerBackToLink"],[1,"leaderboard-test","mt-5","mx-auto",2,"max-width","1100px"],[3,"hashId","view"]],template:function(s,o){1&s&&(e.j41(0,"student-layout",0)(1,"div",1),e.nrm(2,"azt-leaderboard",2),e.k0s()()),2&s&&(e.Y8G("headerBackToLink",o.backToLink),e.R7$(2),e.Y8G("hashId",o.hashId)("view","full"))},dependencies:[ae.j,vh.g,v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})(),sv=(()=>{var i;class n extends Z.H{}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-test-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:0,consts:[["id","testbank-frontend-layout"]],template:function(s,o){1&s&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[v.MD,g.X1,L.iI,L.n3,g.YN,Y.s,F.flO,H.L,U.Id,q.k],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}"]}),n})();var yh=A(21626),Sh=A(54758),iv=A(7813),wh=A(45369),De=A(34006),Mt=A(81174),zi=A(50116),Ms=A(36258),Ih=A(63836),ov=A(10662),av=A(91797);const rv=i=>({"ml-auto":i}),lv=(i,n)=>({"bg-info text-white":i,"bg-slate-300":n}),cv=()=>({"text-pending":!0});function uv(i,n){if(1&i&&e.eu8(0,5),2&i){e.XpG();const t=e.sdS(5);e.Y8G("ngTemplateOutlet",t)}}function _v(i,n){if(1&i&&e.eu8(0,5),2&i){e.XpG();const t=e.sdS(3);e.Y8G("ngTemplateOutlet",t)}}function dv(i,n){if(1&i&&(e.j41(0,"div",7),e.nrm(1,"azt-loading-effect",8),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function mv(i,n){1&i&&e.nrm(0,"azt-loading-ui",15)}function pv(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",9),e.nrm(1,"iframe",10),e.nI1(2,"safe"),e.j41(3,"div",11)(4,"button",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleCloseDialog())}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.orderBuyExam())}),e.DNE(8,mv,1,0,"azt-loading-ui",14),e.j41(9,"span"),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()}if(2&i){let t;const s=e.XpG(2);e.R7$(),e.Y8G("src",e.bMT(2,5,null!==(t=s.showIframeInContent)&&void 0!==t?t:""),e.f$h),e.R7$(4),e.SpI(" ",e.bMT(6,7,"lang_payment_confirm_payment_buy_later")," "),e.R7$(2),e.Y8G("disabled",s.statusObj.loading),e.R7$(),e.Y8G("ngIf",s.statusObj.loading),e.R7$(2),e.JRh(e.bMT(11,9,"lang_payment_confirm_payment_button"))}}function hv(i,n){if(1&i&&e.DNE(0,dv,2,1,"div",6)(1,pv,12,11,"ng-template",null,2,e.C5r),2&i){const t=e.sdS(2),s=e.XpG();e.Y8G("ngIf",s.statusObj.loading)("ngIfElse",t)}}function fv(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",8),2&i){const t=e.XpG(2);e.Y8G("currentStatusObj",t.statusObj)}}function gv(i,n){if(1&i&&(e.nrm(0,"div",47),e.nI1(1,"safeNormalHtmlContent")),2&i){const t=e.XpG().$implicit;e.Y8G("innerHTML",e.bMT(1,1,t.description),e.npT)}}function Tv(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"div",42),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.chooseCombo(o))}),e.j41(2,"div",41),e.EFF(3),e.k0s(),e.DNE(4,gv,2,3,"div",43),e.j41(5,"div",44),e.nrm(6,"span",45),e.nI1(7,"translateToKeyParam"),e.j41(8,"span",46),e.EFF(9),e.nI1(10,"formatMoney"),e.k0s()()()()}if(2&i){const t=n.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.l_i(10,lv,(null==s.currentComboObj?null:s.currentComboObj.id)==t.id,(null==s.currentComboObj?null:s.currentComboObj.id)!=t.id)),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(2),e.Y8G("innerHTML",e.i5U(7,5,"lang_payment_total_exam_in_combo",t.items.length.toString()),e.npT),e.R7$(3),e.JRh(e.bMT(10,8,t.price)+" VND")}}function bv(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",50)(2,"div",51),e.nrm(3,"lucide-icon",52),e.k0s(),e.j41(4,"div",53)(5,"div",54,3),e.EFF(7),e.k0s()()(),e.bVm()),2&i){const t=n.$implicit,s=e.sdS(6);e.R7$(3),e.Y8G("ngClass",e.lJ4(5,cv)),e.R7$(2),e.FS9("matTooltip",t.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.R7$(2),e.SpI(" ",t.name," ")}}function xv(i,n){if(1&i&&(e.j41(0,"div",48),e.DNE(1,bv,8,6,"ng-container",49),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.currentComboObj.items)}}function vv(i,n){1&i&&(e.j41(0,"p",57),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_payment_dialog_coin_current_not_enough"),""))}function yv(i,n){if(1&i&&(e.j41(0,"span",55),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.nI1(5,"number"),e.k0s(),e.DNE(6,vv,3,3,"p",56),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_payment_dialog_coin_current"),": "),e.R7$(3),e.JRh(e.bMT(5,5,t.totalCoin)),e.R7$(2),e.Y8G("ngIf",t.currentComboObj&&t.currentComboObj.price&&t.totalCoin<t.currentComboObj.price)}}function Sv(i,n){1&i&&e.nrm(0,"azt-loading-ui",15)}function wv(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-mat-dialog-content",18)(1,"div",19)(2,"div"),e.DNE(3,Tv,11,13,"div",20),e.k0s(),e.DNE(4,xv,2,1,"div",21),e.j41(5,"div",22)(6,"div",23),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",24)(10,"div",25)(11,"div",26)(12,"div",27),e.nrm(13,"img",28),e.nI1(14,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(15,"div",26)(16,"div",27),e.nrm(17,"img",29),e.nI1(18,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(19,"div",26)(20,"div",27),e.nrm(21,"img",30),e.nI1(22,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(23,"div",26)(24,"div",27),e.nrm(25,"img",31),e.nI1(26,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(27,"div",26)(28,"div",27),e.nrm(29,"img",32),e.nI1(30,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(31,"div",26)(32,"div",27),e.nrm(33,"img",33),e.nI1(34,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(35,"div",26)(36,"div",27),e.nrm(37,"img",34),e.nI1(38,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(39,"div",26)(40,"div",27),e.nrm(41,"img",35),e.nI1(42,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(43,"div",26)(44,"div",27),e.nrm(45,"img",36),e.nI1(46,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(47,"div",26)(48,"div",27),e.nrm(49,"img",37),e.nI1(50,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()()()()(),e.j41(51,"div",38),e.DNE(52,yv,7,7,"span",39),e.j41(53,"div",40)(54,"button",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleCloseDialog())}),e.EFF(55),e.nI1(56,"mytranslate"),e.k0s(),e.j41(57,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.orderBuyExam())}),e.DNE(58,Sv,1,0,"azt-loading-ui",14),e.j41(59,"span"),e.EFF(60),e.nI1(61,"mytranslate"),e.k0s()()()()}if(2&i){const t=e.XpG(2);e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 130px)"),e.R7$(3),e.Y8G("ngForOf",t.comboObjs),e.R7$(),e.Y8G("ngIf",t.currentComboObj),e.R7$(3),e.SpI(" ",e.bMT(8,20,"lang_payment_supported_payment_methods")," "),e.R7$(6),e.Y8G("src",e.bMT(14,22,"images/method-payment/vnpay_full.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(18,24,"images/method-payment/vietcombank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(22,26,"images/method-payment/techcombank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(26,28,"images/method-payment/vietinbank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(30,30,"images/method-payment/mbbank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(34,32,"images/method-payment/agribank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(38,34,"images/method-payment/bidv.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(42,36,"images/method-payment/acb.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(46,38,"images/method-payment/hdbank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(50,40,"images/method-payment/vpbank.svg"),e.B4B),e.R7$(3),e.Y8G("ngIf",t.totalCoin>0),e.R7$(),e.Y8G("ngClass",e.eq3(46,rv,t.isMobileDevice||t.isMobileWebView)),e.R7$(2),e.SpI(" ",e.bMT(56,42,"lang_payment_confirm_payment_buy_later")," "),e.R7$(2),e.Y8G("disabled",t.statusObj.loading),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(2),e.JRh(e.bMT(61,44,"lang_payment_confirm_payment_button"))}}function Iv(i,n){if(1&i&&(e.j41(0,"div",16),e.DNE(1,fv,1,1,"azt-loading-effect",17)(2,wv,62,48,"ng-template",null,2,e.C5r),e.k0s()),2&i){const t=e.sdS(3),s=e.XpG();e.R7$(),e.Y8G("ngIf",s.statusObj.loading)("ngIfElse",t)}}let Ch=(()=>{var i;class n extends Mt._{handleCloseDialog(){this.dialogRef.close("close")}chooseCombo(s){this.currentComboObj=s}orderBuyExam(){if(!this.currentComboObj)return this.errorStatusObj("lang_payment_not_found_any_exam_combo",!0);this.sAztBrowserStorageService.saveSessionStorage("payment_currentComboObj",this.currentComboObj.id.toString()),this.initStatusObj(),this.callApiToBuy(this.currentComboObj.id)}callApiToBuy(s){this.waitDestroy(this.productOrderService.apiProductOrderBuyExamByCoinGet(s).subscribe(o=>{if(!o.success)return"lang_core_payment_not_enough_coin"!=o.message?this.errorStatusObj(o.message,!0):(this.myNavigationWithQueryString("/auth/vip-packages/studentCoin",`?backto=${encodeURIComponent(this.commonService.getCurrentUrlWithoutLocale()+"?pending=1")}&trackingKey=BUY_EXAM`),void this.dialogRef.close(void 0));window.location.reload()}))}getCoinBalance(){this.waitDestroy(this.coinPaymentService.apiCoinPaymentGetCurrentCoinGet().subscribe(s=>{this.totalCoin=s.data?.obj?.totalCoin??0,this.initData()}))}initData(){this.waitDestroy(this.comboPackageService.apiComboPackageListComboPackagesByExamHashIdGet(this.data.examObj.hashId??"").subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);if(!s.data?.objs?.length)return this.errorStatusObj("lang_payment_not_found_any_exam_combo",!0);this.comboObjs=s.data?.objs??[],this.currentComboObj=this.commonService.getFirstOfArray(this.comboObjs);let o=Number(this.sAztBrowserStorageService.getSessionStorage("payment_currentComboObj"));if(1==Number(this.commonService.getMyQueryParam("pending"))&&this.currentComboObj?.id==o&&this.currentComboObj.price&&this.totalCoin>=this.currentComboObj.price)return this.callApiToBuy(o);this.stopStatusObj(),this.showIframeInContent&&this.sAztAzotaTrackingService.sendForceCustomEvent("PAYMENT_VIEW_IFRAME_CONTENT",[])}))}setViewport(){const s=document.createElement("meta");s.name="viewport",s.setAttribute("id","viewPortIframe");const o=l=>{s.setAttribute("content",l),document.head.appendChild(s)},a=window.innerWidth;if(a<768){const c=420!==a?a/420:1;o(`width=420, user-scalable=no, initial-scale=${c}, minimum-scale=${c}, maximum-scale=${c}`)}else o("width=960, user-scalable=no, initial-scale=1.0")}removeViewPort(){document.getElementById("viewPortIframe")?.remove()}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.getCoinBalance(),this.setViewport()}constructor(s,o,a,r,l){super(o,s),this.dialogRef=s,this.data=o,this.productOrderService=a,this.comboPackageService=r,this.sAztAzotaTrackingService=l,this.comboObjs=[],this.showIframeInContent=void 0,this.totalCoin=0,this.sAztBrowserStorageService=(0,e.WQX)(zi.z),this.coinPaymentService=(0,e.WQX)(Ih.dC)}ngOnDestroy(){this.removeViewPort()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(De.CP,8),e.rXU(De.Vh,8),e.rXU(Ih.Hg),e.rXU(ov.E),e.rXU(av.M))},i.\u0275cmp=e.VBU({type:i,selectors:[["payment-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:2,consts:[["showIframeContent",""],["showListExamContent",""],["doneLoading",""],["c","isDisabled"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],["class","box py-4 px-4",4,"ngIf","ngIfElse"],[1,"box","py-4","px-4"],[3,"currentStatusObj"],[1,"bg-white",2,"height","100%"],["width","100%",2,"height","calc(var(--vh, 1vh) * 100 - 70px)",3,"src"],[1,"text-center","mt-4","text-center","absolute","bottom-2","w-full"],[1,"btn","btn-secondary-soft","w-32","mr-4","btn-lg","text-xl",3,"click"],[1,"btn","btn-primary","btn-lg","text-xl",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"box","py-4","px-4",2,"height","100%"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"minHeight"],[2,"margin-right","-5px"],["class","pb-2",4,"ngFor","ngForOf"],["class","box border border-slate-200 dark:border-darkmode-400 pt-2",4,"ngIf"],[1,"mt-4"],[1,"font-medium"],[1,"mt-2"],[1,"grid","grid-cols-10","gap-4"],[1,"col-span-5","md:col-span-2","flex","justify-center"],[1,"p-1","rounded-lg","border","border-slate-200","dark:border-darkmode-400","w-full","h-full"],["alt","Vnpay",2,"height","100%",3,"src"],["alt","vietcombank",3,"src"],["alt","techcombank",3,"src"],["alt","vietinbank",3,"src"],["alt","mbbank",3,"src"],["alt","agribank",3,"src"],["alt","bidv",3,"src"],["alt","acb",3,"src"],["alt","hdbank",3,"src"],["alt","vpbank",3,"src"],[1,"flex","mt-4","flex-wrap",2,"align-items","center"],["class","mr-3 ml-auto",4,"ngIf"],[3,"ngClass"],[1,"pb-2"],[1,"clickable","box","pl-2","pr-2","pt-2",3,"click","ngClass"],["class","pb-2 mt-3 mb-3",3,"innerHTML",4,"ngIf"],[1,"pb-2","flex","items-center","justify-end","font-medium"],[3,"innerHTML"],[1,"ml-1","text-lg","text-warning"],[1,"pb-2","mt-3","mb-3",3,"innerHTML"],[1,"box","border","border-slate-200","dark:border-darkmode-400","pt-2"],[4,"ngFor","ngForOf"],[1,"flex","items-center","p-3","border-b","border-slate-200","dark:border-darkmode-400"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],["name","file-check","size","40",3,"ngClass"],[1,"ml-4","mr-auto"],[2,"line-height","1.2",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"mr-3","ml-auto"],["class","mb-1 mt-1 text-danger text-sm",4,"ngIf"],[1,"mb-1","mt-1","text-danger","text-sm"]],template:function(s,o){1&s&&e.DNE(0,uv,1,1,"ng-container",4)(1,_v,1,1,"ng-container",4)(2,hv,3,2,"ng-template",null,0,e.C5r)(4,Iv,4,2,"ng-template",null,1,e.C5r),2&s&&(e.Y8G("ngIf",!o.showIframeInContent),e.R7$(),e.Y8G("ngIf",o.showIframeInContent))},dependencies:[ye.f,ie.K,wt.R,Ms.U,v.MD,v.YU,v.Sq,v.bT,v.T3,v.QX,g.X1,L.iI,g.YN,z.wp,z.$g,z.Vs,Y.s,vt.oV,F.flO,F.WGl,H.L,z._y,z.JI,z.t0,U.Id,q.k],encapsulation:2}),n})();var Cv=A(67376),kh=A(99323),on=A(23360);let Eh=(()=>{var i;class n{constructor(){this.switchEssayTabSource=new kt.B,this.switchEssayTabMessage=this.switchEssayTabSource.asObservable()}changeSwitchEssayTabMessage(){this.switchEssayTabSource.next(!0)}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var Mn=A(81538);let Tr=(()=>{var i;class n extends Z.H{showExplain(){this.isTeacherRole||!this.examConfig||"SHOW_EXPLAIN"!==this.examConfig?.examPriceConfigWithBoughtStatus?.priceForAction||this.examConfig?.examPriceConfigWithBoughtStatus?.hasBought?this.isShowExplainChange.emit(!this.isShowExplain):this.showDialogBuyExam(this.examObj)}switchToEssayTab(){this.answerBoxService.changeSwitchEssayTabMessage()}showDialogBuyExam(s){this.sAztDialogService.open(Ch,{data:{examObj:s},restoreFocus:!1,width:"100vw",maxWidth:"100vw",height:"100vh",backdropClass:"azt-backdrop-full-width-height",disableClose:!0})}isKey(s){return!(!this.questionObj?.answers||!this.questionObj.answerResult)&&(s.key?s.key==this.questionObj.answerResult[0]:s==this.questionObj.answerResult[0])}haveChoose(s){return!!this.userAnswersObj["id_"+this.questionObj?.id]&&(s.key?s.key.toUpperCase().toString()==this.userAnswersObj["id_"+this.questionObj?.id].toUpperCase():s.toString().toUpperCase()==this.userAnswersObj["id_"+this.questionObj?.id].toUpperCase())}findKey(){this.questionObj?.answerResult&&this.labelArr.every(s=>!this.questionObj||!this.questionObj.answerResult||this.questionObj.answerResult[0]!=s.key||(this.key=(this.isShowOriginAnswer?s.key:s.alpha??s.key)??"",!1))}checkShowExplainButton(){this.isShowExplainButton=!!(this.questionObj.help||"lang_core_show_explain_required_payment"==this.questionObj.help&&"SHOW_EXPLAIN"===this.examConfig?.examPriceConfigObj?.priceForAction)}checkLabelArr(){this.labelArr=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.questionAnswers,this.isShowOriginAnswer),this.findKey()}ngOnChanges(s){s.isShowOriginAnswer&&this.questionObj&&this.checkLabelArr()}ngOnInit(){if(super.ngOnInit(),this.isFillAnswer=this.questionObj?.correctAnswer??!1,this.answerTypeService.isTrueFalseAnswer(this.questionObj)?(this.keys=this.sAztAnswerTrueFalseService.checkLabelKeys(this.keys,this.questionObj?.answers,this.questionObj?.answerResult),this.isFillAnswer=!0):this.key=this.questionObj?.answerResult.length?this.questionObj.answerResult[0]:"",this.questionAnswers=(0,Cv.cloneDeep)(this.questionObj.answers??[]),this.checkLabelArr(),this.answerTypeService.isOneChoiceAnswer(this.questionObj))for(let s=0;s<this.labelArr.length&&(this.isFillAnswer=this.isKey(this.labelArr[s])&&this.haveChoose(this.labelArr[s]),!0!==this.isFillAnswer);s++);this.answerTypeService.isFillAnswer(this.questionObj)&&this.questionObj?.answerResult&&this.questionObj.answerResult.length>0&&(this.keys=this.questionObj.answerResult,this.isFillAnswer=this.questionObj?.correctAnswer??!1),this.checkShowExplainButton()}constructor(s,o,a,r){super(),this.sAztAnswerTrueFalseService=s,this.answerTypeService=o,this.answerBoxService=a,this.sAztDialogService=r,this.isShowExplain=!1,this.isOfflineMark=!1,this.isTeacherRole=!0,this.isShowOriginAnswer=!1,this.userAnswersObj={},this.notShowAnswerYet=!1,this.currentTab="multiple_choice_tab",this.backToLink="",this.isShowExplainChange=new e.bkB,this.key="",this.keys=[],this.labelArr=[],this.isFillAnswer=!1,this.isShowExplainButton=!1,this.questionAnswers=[]}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(kh.j),e.rXU(on._),e.rXU(Eh),e.rXU(Mn.i))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-answer-box-with-user-answer-base"]],inputs:{examObj:"examObj",questionObj:"questionObj",isShowExplain:"isShowExplain",isOfflineMark:"isOfflineMark",isTeacherRole:"isTeacherRole",isShowOriginAnswer:"isShowOriginAnswer",examConfig:"examConfig",userAnswersObj:"userAnswersObj",notShowAnswerYet:"notShowAnswerYet",currentTab:"currentTab",backToLink:"backToLink"},outputs:{isShowExplainChange:"isShowExplainChange"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();const kv=i=>({"justify-content":i}),Ev=i=>({"mt-3":i}),Av=(i,n)=>({width:i,"margin-right":n}),Ov=()=>({"ml-1":!0}),Rv=i=>[i],Fv=i=>({backto:i}),jv=()=>({"text-transform":"uppercase"}),zv=(i,n)=>({"flex justify-between w-full items-center":i,"answer-box-type1":n}),Ah=i=>({"border-color":i}),Oh=i=>({color:i}),Mv=()=>({"text-danger mr-1":!0}),Rh=()=>({"mr-1":!0}),Dv=()=>({"text-success mr-1":!0}),Gv=i=>({"w-full":i}),Pv=i=>({color:"#00ac33",width:i}),Nv=(i,n)=>({color:i,width:n}),Vv=()=>({color:"red"});function Lv(i,n){if(1&i){const t=e.RV6();e.j41(0,"span",8),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplain())}),e.EFF(1),e.nI1(2,"mytranslate"),e.nrm(3,"lucide-icon",9),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("ngStyle",e.l_i(7,Av,t.isShowExplainButton?"125px":"0px",t.isShowExplainButton?"-40px":"0px")),e.BMQ("style",t.isShowExplainButton&&!t.notShowAnswerYet?"visibility:  visible":"visibility:  hidden",e.$dS),e.R7$(),e.SpI(" ",e.bMT(2,5,"lang_auto_giai_thich")," "),e.R7$(2),e.Y8G("name",t.isShowExplain?"chevron-up":"chevron-down")("ngClass",e.lJ4(10,Ov))}}function Bv(i,n){if(1&i&&(e.j41(0,"a",10),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.Y8G("routerLink",e.eq3(8,Rv,e.bMT(1,4,"/on-luyen/"+t.questionObj.practiceHashId)))("queryParams",e.eq3(10,Fv,t.backToLink))("ngStyle",e.lJ4(12,jv)),e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_azota_ui_practice_link")," ")}}function $v(i,n){if(1&i&&(e.j41(0,"span",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(5,Oh,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(2,3,"lang_auto_dap_an_dung"),": ",t.key,"")}}function Qv(i,n){1&i&&e.nrm(0,"span",17)}function qv(i,n){1&i&&e.nrm(0,"lucide-icon",24),2&i&&e.Y8G("ngClass",e.lJ4(1,Mv))}function Yv(i,n){1&i&&e.nrm(0,"lucide-icon",25),2&i&&e.Y8G("ngClass",e.lJ4(1,Rh))}function Uv(i,n){if(1&i&&(e.qex(0),e.DNE(1,qv,1,2,"lucide-icon",23)(2,Yv,1,2,"lucide-icon",21),e.bVm()),2&i){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngIf",s.haveChoose(t)&&2!=s.examObj.whenShowAnswer&&!s.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",s.haveChoose(t)&&2!=s.examObj.whenShowAnswer&&s.notShowAnswerYet)}}function Xv(i,n){1&i&&e.nrm(0,"lucide-icon",25),2&i&&e.Y8G("ngClass",e.lJ4(1,Rh))}function Wv(i,n){if(1&i&&(e.qex(0),e.DNE(1,Xv,1,2,"lucide-icon",21),e.bVm()),2&i){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngIf",s.haveChoose(t)&&2==s.examObj.whenShowAnswer)}}function Hv(i,n){1&i&&e.nrm(0,"lucide-icon",25),2&i&&e.Y8G("ngClass",e.lJ4(1,Dv))}function Jv(i,n){if(1&i&&(e.qex(0),e.DNE(1,Uv,3,2,"ng-container",19)(2,Wv,2,1,"ng-container",19)(3,Hv,1,2,"lucide-icon",21),e.j41(4,"span",22),e.EFF(5),e.k0s(),e.bVm()),2&i){const t=e.XpG().$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(s.isKey(t)&&s.haveChoose(t))),e.R7$(),e.Y8G("ngIf",!(s.isKey(t)&&s.haveChoose(t))),e.R7$(),e.Y8G("ngIf",s.isKey(t)&&s.haveChoose(t)&&2!=s.examObj.whenShowAnswer),e.R7$(2),e.SpI(" ",t.alpha?t.alpha:t.key?t.key:t," ")}}function Kv(i,n){if(1&i&&(e.j41(0,"span",26),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngClass",s.isKey(t)&&s.haveChoose(t)&&2!=s.examObj.whenShowAnswer?"b-circle  w-6 h-6 text-success":!s.isKey(t)&&s.haveChoose(t)&&2!=s.examObj.whenShowAnswer?"b-circle  w-6 h-6 text-danger":""),e.R7$(),e.SpI(" ",t.alpha?t.alpha:t.key?t.key:t," ")}}function Zv(i,n){if(1&i&&(e.j41(0,"div",18),e.DNE(1,Jv,6,4,"ng-container",19)(2,Kv,2,2,"span",20),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.isTqbDomain),e.R7$(),e.Y8G("ngIf",t.isTqbDomain)}}function ey(i,n){if(1&i&&(e.j41(0,"div",11),e.DNE(1,$v,3,7,"span",12)(2,Qv,1,0,"span",13),e.j41(3,"div",14),e.DNE(4,Zv,3,2,"div",15),e.k0s()()),2&i){const t=e.XpG();e.Y8G("ngClass",e.l_i(5,zv,t.isMobileDevice,!t.isMobileDevice)),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",t.keys&&2==t.examObj.whenShowAnswer),e.R7$(),e.Y8G("ngStyle",e.eq3(8,Ah,t.questionObj.correctAnswer?"#00ac33":"red")),e.R7$(),e.Y8G("ngForOf",t.labelArr)}}function ty(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i){const t=n.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngStyle",e.eq3(5,Pv,s.isMobileDevice?"50%":"95px")),e.R7$(),e.Lme(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t,") ",e.bMT(3,3,s.keys.includes((t.alpha?t.alpha:t.key?t.key:"")+"T")?"lang_auto_dung":"lang_auto_sai")," ")}}function ny(i,n){if(1&i&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",32),e.DNE(5,ty,4,7,"ng-container",33),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_dap_an_dung"),":"),e.R7$(3),e.Y8G("ngForOf",t.labelArr)}}function sy(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",34),e.nI1(2,"isTrueAnswerType5"),e.EFF(3),e.nI1(4,"getAnswerChoiceTrueFalseQuestion"),e.nI1(5,"mytranslate"),e.k0s(),e.bVm()),2&i){const t=n.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngStyle",e.l_i(12,Nv,e.brH(2,3,t,s.keys,s.userAnswersObj["id_"+s.questionObj.id])?"#00ac33":"red",s.isMobileDevice?"50%":"95px")),e.R7$(2),e.Lme(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t,") ",e.bMT(5,10,e.i5U(4,7,t,s.userAnswersObj["id_"+s.questionObj.id]))," ")}}function iy(i,n){if(1&i&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",32),e.DNE(5,sy,6,15,"ng-container",33),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_core_dap_an_thi_sinh_chon"),":"),e.R7$(3),e.Y8G("ngForOf",t.labelArr)}}function oy(i,n){if(1&i&&(e.j41(0,"span",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.lJ4(2,Vv)),e.R7$(),e.SpI(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t,") \xa0\xa0 ")}}function ay(i,n){if(1&i&&(e.qex(0),e.DNE(1,oy,2,3,"span",36),e.nI1(2,"isTrueAnswerType5"),e.bVm()),2&i){const t=n.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",!e.brH(2,1,t,s.keys,s.userAnswersObj["id_"+s.questionObj.id]))}}function ry(i,n){if(1&i&&(e.j41(0,"div",35)(1,"div",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,ay,3,5,"ng-container",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_core_cau_lam_sai"),":"),e.R7$(2),e.Y8G("ngForOf",t.labelArr)}}function ly(i,n){if(1&i&&(e.j41(0,"div",27),e.DNE(1,ny,6,4,"div",28)(2,iy,6,4,"div",28)(3,ry,5,4,"div",29),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(4,Gv,t.isMobileDevice)),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet)}}function cy(i,n){if(1&i&&(e.j41(0,"span",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(5,Oh,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(2,3,"lang_auto_dap_an_dung_"),"",t.keys.join("],["),"]")}}function uy(i,n){1&i&&e.nrm(0,"span",17)}function _y(i,n){if(1&i&&(e.j41(0,"div",37),e.DNE(1,cy,3,7,"span",12)(2,uy,1,0,"span",13),e.j41(3,"div",38)(4,"div",39),e.EFF(5),e.nI1(6,"trimEndFillAnswer"),e.nI1(7,"mytranslate"),e.k0s()()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.keys&&2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",t.keys&&2==t.examObj.whenShowAnswer),e.R7$(),e.Y8G("ngStyle",e.eq3(9,Ah,t.questionObj.correctAnswer?"#00ac33":"red")),e.R7$(2),e.SpI(" ",void 0!==t.userAnswersObj["id_"+t.questionObj.id]?e.i5U(6,4,t.userAnswersObj["id_"+t.questionObj.id],t.isOfflineMark):e.bMT(7,7,"lang_auto_thi_sinh_khong_thong_tin")," ")}}function dy(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"span",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.switchToEssayTab())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_click_vao_day_de_xem_o_tab_tu_luan")," "))}function my(i,n){1&i&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_thi_sinh_khong_nhap_thong_tin")," "))}function py(i,n){if(1&i&&(e.qex(0),e.nrm(1,"div",42),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("innerText",t.userAnswersObj["id_"+t.questionObj.id])}}function hy(i,n){if(1&i&&(e.qex(0),e.DNE(1,my,3,3,"div",19)(2,py,2,1,"ng-container",19),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",void 0===t.userAnswersObj["id_"+t.questionObj.id]),e.R7$(),e.Y8G("ngIf",t.userAnswersObj["id_"+t.questionObj.id])}}function fy(i,n){if(1&i&&(e.j41(0,"div",40),e.DNE(1,dy,4,3,"div",19)(2,hy,3,2,"ng-container",19),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf","multiple_choice_tab"==t.currentTab),e.R7$(),e.Y8G("ngIf","multiple_choice_tab"!=t.currentTab)}}let gy=(()=>{var i;class n extends Tr{}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-answer-box-with-user-full-answer-for-student"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:20,consts:[[1,"question-standalone-answer-box-for-student","box","pt-0","shadow-none",2,"border-top-left-radius","0","border-top-right-radius","0",3,"ngStyle"],[1,"flex","flex-col-reverse","sm:flex-row","sm:items-center",3,"ngClass"],["class","explainTxt text-pending cursor-pointer","azt-track-service","azt-standalone-question-nQrO97VmcYI",3,"ngStyle","click",4,"ngIf"],["class","btn btn-outline-primary btn-transparent",3,"routerLink","queryParams","ngStyle",4,"ngIf"],["class","mt-2 font-bold",3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","answer-box-type1 mt-2",4,"ngIf"],["class","answer-box answer-box-type3 ml-auto justify-content-between notForPdfExport",4,"ngIf"],["azt-track-service","azt-standalone-question-nQrO97VmcYI",1,"explainTxt","text-pending","cursor-pointer",3,"click","ngStyle"],["size","24",3,"name","ngClass"],[1,"btn","btn-outline-primary","btn-transparent",3,"routerLink","queryParams","ngStyle"],[1,"mt-2","font-bold",3,"ngClass"],["class","keyText my-1",3,"ngStyle",4,"ngIf"],["class","keyText my-1 ml-2",4,"ngIf"],["id","type_3",1,"limit-max-width","answer-box","ml-auto","my-1",3,"ngStyle"],["class","label-item",4,"ngFor","ngForOf"],[1,"keyText","my-1",3,"ngStyle"],[1,"keyText","my-1","ml-2"],[1,"label-item"],[4,"ngIf"],["class","lalala",3,"ngClass",4,"ngIf"],["name","circle-check","size","24",3,"ngClass",4,"ngIf"],[1,"lalala"],["name","x","size","24",3,"ngClass",4,"ngIf"],["name","x","size","24",3,"ngClass"],["name","circle-check","size","24",3,"ngClass"],[1,"lalala",3,"ngClass"],[3,"ngClass"],["class","keyText my-1 font-medium flex flex-wrap",4,"ngIf"],["class","keyText my-1 font-medium text-red flex flex-wrap",4,"ngIf"],[1,"keyText","my-1","font-medium","flex","flex-wrap"],[2,"width","100px"],[1,"flex","justify-between","flex-wrap"],[4,"ngFor","ngForOf"],[1,"lalala",3,"ngStyle"],[1,"keyText","my-1","font-medium","text-red","flex","flex-wrap"],["class","lalala",3,"ngStyle",4,"ngIf"],[1,"answer-box-type1","mt-2"],["id","type_4",1,"answer-box","ml-auto","my-1",2,"padding","0",3,"ngStyle"],[1,"text-answer"],[1,"answer-box","answer-box-type3","ml-auto","justify-content-between","notForPdfExport"],["azt-track-service","answer-box-LBNR1fkVDxS",1,"clickable",3,"click"],[1,"answer-essay-txt",3,"innerText"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Lv,4,11,"span",2)(3,Bv,4,13,"a",3),e.k0s(),e.DNE(4,ey,5,10,"div",4),e.nI1(5,"isOneChoiceAnswer"),e.DNE(6,ly,4,6,"div",5),e.nI1(7,"isTrueFalseAnswer"),e.DNE(8,_y,8,11,"div",6),e.nI1(9,"isFillAnswer"),e.DNE(10,fy,3,2,"div",7),e.nI1(11,"isEssayAnswer"),e.k0s()),2&s&&(e.Y8G("ngStyle",e.eq3(16,kv,2==o.examObj.whenShowAnswer?"flex-end":"space-between")),e.R7$(),e.Y8G("ngClass",e.eq3(18,Ev,o.isMobileDevice)),e.R7$(),e.Y8G("ngIf",2!=o.examObj.whenShowAnswer),e.R7$(),e.Y8G("ngIf",o.questionObj.practiceHashId),e.R7$(),e.Y8G("ngIf",e.bMT(5,8,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(7,10,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(9,12,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(11,14,o.questionObj)))},dependencies:[z.F2,v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.V6,z.Zm,z.N3,z.FC,z.jr,z.C0,z.M_,U.Id,q.k],styles:[".question-standalone-answer-box-for-student[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.answer-box[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-around;padding:10px;border:1px solid #f1f1f1;border-radius:3px}.answer-box.limit-max-width[_ngcontent-%COMP%]{max-width:250px}.answer-box[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{font-weight:500;display:flex;align-items:center;font-size:16px;width:40px;justify-content:flex-end}.answer-box.answer-box-type3[_ngcontent-%COMP%]{width:100%}.answer-box-type1[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-box-type1[_ngcontent-%COMP%]   .keyText[_ngcontent-%COMP%]{font-weight:500;font-size:16px;flex:auto;text-align:right;margin-right:15px}.text-answer[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:120px;overflow:auto;padding:10px}textarea[_ngcontent-%COMP%]:focus{border:none!important}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}@media screen and (max-width: 768px){.answer-box-type1[_ngcontent-%COMP%]{margin-left:15px}}@media screen and (max-width: 768px){.question-standalone-answer-box-for-student[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:flex-start}}@media screen and (max-width: 480px){.answer-box[_ngcontent-%COMP%]{width:auto}.text-answer[_ngcontent-%COMP%]{width:180px;max-height:auto}}"]}),n})(),Ty=(()=>{var i;class n extends Tr{constructor(){super(...arguments),this.checkShowFullAnswer=!1}ngOnInit(){this.checkShowFullAnswer=!(this.examConfig&&"SHOW_EXPLAIN"===this.examConfig?.examPriceConfigWithBoughtStatus?.priceForAction&&!this.examConfig?.examPriceConfigWithBoughtStatus?.hasBought)}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-answer-box-with-user-answer-for-student"]],standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:11,consts:[[3,"isShowExplainChange","examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isTeacherRole","isShowOriginAnswer","isShowExplain","backToLink","isOfflineMark","currentTab"]],template:function(s,o){1&s&&(e.j41(0,"azt-answer-box-with-user-full-answer-for-student",0),e.mxI("isShowExplainChange",function(r){return e.DH7(o.isShowExplain,r)||(o.isShowExplain=r),r}),e.bIt("isShowExplainChange",function(){return o.isShowExplainChange.emit(o.isShowExplain)}),e.k0s()),2&s&&(e.Y8G("examObj",o.examObj)("examConfig",o.examConfig)("questionObj",o.questionObj)("userAnswersObj",o.userAnswersObj)("notShowAnswerYet",o.notShowAnswerYet)("isTeacherRole",o.isTeacherRole)("isShowOriginAnswer",o.isShowOriginAnswer),e.R50("isShowExplain",o.isShowExplain),e.Y8G("backToLink",o.backToLink)("isOfflineMark",o.isOfflineMark)("currentTab",o.currentTab))},dependencies:[gy,v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();const Fh=i=>({width:i,visibility:"visible"}),jh=()=>({"ml-1":!0}),Du=i=>({color:i}),Gu=i=>({"border-color":i}),by=()=>({"text-danger wrongIcon mr-1":!0}),xy=()=>({"rightIcon text-success mr-1":!0}),vy=()=>({"text-danger mr-1":!0}),yy=()=>({"text-success mr-1":!0});function Sy(i,n){if(1&i){const t=e.RV6();e.j41(0,"span",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplain())}),e.EFF(1),e.nI1(2,"mytranslate"),e.nrm(3,"lucide-icon",8),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("ngStyle",e.eq3(6,Fh,t.questionObj.help?"125px":"0px")),e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_giai_thich")," "),e.R7$(2),e.Y8G("name",t.isShowExplain?"chevron-up":"chevron-down")("ngClass",e.lJ4(8,jh))}}function wy(i,n){1&i&&e.nrm(0,"lucide-icon",18),2&i&&e.Y8G("ngClass",e.lJ4(1,by))}function Iy(i,n){if(1&i&&e.DNE(0,wy,1,2,"lucide-icon",17),2&i){const t=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngIf",s.haveChoose(t))}}function Cy(i,n){1&i&&e.nrm(0,"lucide-icon",19),2&i&&e.Y8G("ngClass",e.lJ4(1,xy))}function ky(i,n){if(1&i&&(e.j41(0,"div",13),e.DNE(1,Iy,1,1,"ng-template",14)(2,Cy,1,2,"lucide-icon",15),e.j41(3,"span",16),e.EFF(4),e.k0s()()),2&i){const t=n.$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(s.isKey(t)&&s.haveChoose(t))),e.R7$(),e.Y8G("ngIf",s.isKey(t)&&s.haveChoose(t)),e.R7$(2),e.JRh(t.alpha?t.alpha:t.key?t.key:t)}}function Ey(i,n){if(1&i&&(e.j41(0,"div",9)(1,"span",10),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",11),e.DNE(5,ky,5,3,"div",12),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(7,Du,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(3,5,"lang_auto_dap_an_dung"),": ",t.key,""),e.R7$(2),e.Y8G("ngStyle",e.eq3(9,Gu,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Y8G("ngForOf",t.labelArr)}}function Ay(i,n){if(1&i&&(e.qex(0),e.j41(1,"span",26),e.nI1(2,"isTrueAnswerType5"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()),2&i){const t=n.$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(9,Du,e.brH(2,3,t,s.keys,s.userAnswersObj["id_"+s.questionObj.id])?"#00ac33":"red")),e.R7$(2),e.Lme(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t," - ",e.bMT(4,7,s.keys.includes((t.alpha?t.alpha:t.key?t.key:"")+"T")?"lang_auto_dung":"lang_auto_sai"),"\xa0 ")}}function Oy(i,n){1&i&&e.nrm(0,"lucide-icon",18),2&i&&e.Y8G("ngClass",e.lJ4(1,vy))}function Ry(i,n){1&i&&e.nrm(0,"lucide-icon",19),2&i&&e.Y8G("ngClass",e.lJ4(1,yy))}function Fy(i,n){if(1&i&&(e.j41(0,"div",27),e.DNE(1,Oy,1,2,"lucide-icon",17),e.nI1(2,"isTrueAnswerType5"),e.DNE(3,Ry,1,2,"lucide-icon",15),e.nI1(4,"isTrueAnswerType5"),e.j41(5,"span",16),e.EFF(6),e.nI1(7,"getAnswerChoiceTrueFalseQuestion"),e.nI1(8,"mytranslate"),e.k0s()()),2&i){const t=n.$implicit,s=e.XpG(2);e.R7$(),e.Y8G("ngIf",!e.brH(2,4,t,s.keys,s.userAnswersObj["id_"+(null==s.questionObj?null:s.questionObj.id)])),e.R7$(2),e.Y8G("ngIf",e.brH(4,8,t,s.keys,s.userAnswersObj["id_"+(null==s.questionObj?null:s.questionObj.id)])),e.R7$(3),e.Lme("",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t," - ",e.bMT(8,15,e.i5U(7,12,t,s.userAnswersObj["id_"+s.questionObj.id])),"")}}function jy(i,n){if(1&i&&(e.j41(0,"div",20)(1,"span",21),e.EFF(2),e.nI1(3,"mytranslate"),e.DNE(4,Ay,5,11,"ng-container",22),e.k0s(),e.j41(5,"div",23)(6,"div",24),e.DNE(7,Fy,9,17,"div",25),e.k0s()()()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_dap_an_dung"),": "),e.R7$(2),e.Y8G("ngForOf",t.labelArr),e.R7$(),e.Y8G("ngStyle",e.eq3(6,Gu,t.questionObj.correctAnswer?"#00ac33":"red")),e.R7$(2),e.Y8G("ngForOf",t.labelArr)}}function zy(i,n){if(1&i&&(e.j41(0,"span",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(5,Du,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(2,3,"lang_auto_dap_an_dung_"),"",t.keys.join("],["),"]")}}function My(i,n){if(1&i&&(e.j41(0,"div",9),e.DNE(1,zy,3,7,"span",28),e.j41(2,"div",29)(3,"div",30),e.EFF(4),e.nI1(5,"trimEndFillAnswer"),e.nI1(6,"mytranslate"),e.k0s()()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.keys),e.R7$(),e.Y8G("ngStyle",e.eq3(8,Gu,t.isFillAnswer?"#00ac33":"red")),e.R7$(2),e.SpI(" ",void 0!==t.userAnswersObj["id_"+t.questionObj.id]?e.i5U(5,3,t.userAnswersObj["id_"+t.questionObj.id],t.isOfflineMark):e.bMT(6,6,"lang_auto_thi_sinh_khong_thong_tin")," ")}}function Dy(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"span",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.switchToEssayTab())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_click_vao_day_de_xem_o_tab_tu_luan")))}function Gy(i,n){1&i&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_thi_sinh_khong_nhap_thong_tin")," "))}function Py(i,n){if(1&i&&(e.qex(0),e.nrm(1,"div",34),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("innerText",t.userAnswersObj["id_"+t.questionObj.id])}}function Ny(i,n){if(1&i&&(e.qex(0),e.DNE(1,Gy,3,3,"div",32)(2,Py,2,1,"ng-container",32),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.userAnswersObj["id_"+t.questionObj.id]),e.R7$(),e.Y8G("ngIf",t.userAnswersObj["id_"+t.questionObj.id])}}function Vy(i,n){if(1&i&&(e.j41(0,"div",31),e.DNE(1,Dy,4,3,"div",32)(2,Ny,3,2,"ng-container",32),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf","multiple_choice_tab"==t.currentTab),e.R7$(),e.Y8G("ngIf","multiple_choice_tab"!=t.currentTab)}}function Ly(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"span",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplain())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nrm(4,"lucide-icon",8),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(6,Fh,t.questionObj.help?"125px":"0px")),e.R7$(),e.SpI(" ",e.bMT(3,4,"lang_auto_giai_thich")," "),e.R7$(2),e.Y8G("name",t.isShowExplain?"chevron-up":"chevron-down")("ngClass",e.lJ4(8,jh))}}let By=(()=>{var i;class n extends Tr{ngOnInit(){super.ngOnInit()}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-answer-box-with-user-answer-for-teacher"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:18,consts:[[1,"question-standalone-answer-box-for-student","box","shadow-none"],[1,"flex"],["azt-track-service","azt-standalone-question-sMnAQgQ7w7k","class","explainTxt text-pending cursor-pointer mt-2",3,"ngStyle","click",4,"ngIf"],["class","answer-box-type1 mt-2",4,"ngIf"],["class","answer-box-type1 mt-2","style","flex-wrap: wrap",4,"ngIf"],["class","answer-box answer-box-type3 ml-auto justify-content-between notForPdfExport",4,"ngIf"],["class","flex",4,"ngIf"],["azt-track-service","azt-standalone-question-sMnAQgQ7w7k",1,"explainTxt","text-pending","cursor-pointer","mt-2",3,"click","ngStyle"],["size","24",3,"name","ngClass"],[1,"answer-box-type1","mt-2"],[1,"keyText","my-1",3,"ngStyle"],["id","type_1",1,"limit-max-width","answer-box","ml-auto","my-1",3,"ngStyle"],["class","label-item",4,"ngFor","ngForOf"],[1,"label-item"],[3,"ngIf"],["name","circle-check","size","24",3,"ngClass",4,"ngIf"],[1,"lalala"],["name","x","size","24",3,"ngClass",4,"ngIf"],["name","x","size","24",3,"ngClass"],["name","circle-check","size","24",3,"ngClass"],[1,"answer-box-type1","mt-2",2,"flex-wrap","wrap"],[1,"keyText","my-1"],[4,"ngFor","ngForOf"],["id","type_3",1,"limit-max-width","answer-box","ml-auto","my-1",3,"ngStyle"],[1,"label-item",2,"display","block !important","width","auto !important"],["class","flex w-full mt-1","style","align-items: center",4,"ngFor","ngForOf"],[1,"lalala","ml-1",3,"ngStyle"],[1,"flex","w-full","mt-1",2,"align-items","center"],["class","keyText my-1",3,"ngStyle",4,"ngIf"],["id","type_2",1,"answer-box","ml-auto","my-1",2,"padding","0",3,"ngStyle"],[1,"text-answer","answer-box","forPdfExport","justify-content-between"],[1,"answer-box","answer-box-type3","ml-auto","justify-content-between","notForPdfExport"],[4,"ngIf"],["azt-track-service","answer-box-LBNR1fkVDxS",1,"clickable",3,"click"],[1,"answer-essay-txt",3,"innerText"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Sy,4,9,"span",2),e.nI1(3,"isEssayAnswer"),e.k0s(),e.DNE(4,Ey,6,11,"div",3),e.nI1(5,"isOneChoiceAnswer"),e.DNE(6,jy,8,8,"div",4),e.nI1(7,"isTrueFalseAnswer"),e.DNE(8,My,7,10,"div",3),e.nI1(9,"isFillAnswer"),e.DNE(10,Vy,3,2,"div",5),e.nI1(11,"isEssayAnswer"),e.k0s(),e.DNE(12,Ly,5,9,"div",6),e.nI1(13,"isEssayAnswer")),2&s&&(e.R7$(2),e.Y8G("ngIf",o.questionObj.help&&!e.bMT(3,6,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(5,8,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(7,10,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(9,12,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(11,14,o.questionObj)),e.R7$(2),e.Y8G("ngIf",o.questionObj.help&&e.bMT(13,16,o.questionObj)))},dependencies:[v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.V6,z.Zm,z.N3,z.FC,z.jr,z.C0,z.M_,U.Id,q.k],styles:[".question-standalone-answer-box-for-student[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.answer-box[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-around;padding:10px;border:1px solid #f1f1f1;border-radius:3px}.answer-box.limit-max-width[_ngcontent-%COMP%]{max-width:250px}.answer-box[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{font-weight:500;display:flex;align-items:center;font-size:16px;width:40px;justify-content:flex-end}.answer-box.answer-box-type3[_ngcontent-%COMP%]{width:100%}.answer-box-type1[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-box-type1[_ngcontent-%COMP%]   .keyText[_ngcontent-%COMP%]{font-weight:500;font-size:16px;flex:auto;text-align:right;margin-right:15px}.text-answer[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:120px;overflow:auto;padding:10px}textarea[_ngcontent-%COMP%]:focus{border:none!important}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}@media screen and (max-width: 768px){.answer-box-type1[_ngcontent-%COMP%]{margin-left:15px}}@media screen and (max-width: 768px){.question-standalone-answer-box-for-student[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:flex-start}}@media screen and (max-width: 480px){.answer-box[_ngcontent-%COMP%]{width:auto}.text-answer[_ngcontent-%COMP%]{width:180px;max-height:auto}}"]}),n})();function $y(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-answer-box-with-user-answer-for-student",2),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isShowExplainChange.emit(o.isShowExplain))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("examObj",t.examObj)("examConfig",t.examConfig)("questionObj",t.questionObj)("userAnswersObj",t.userAnswersObj)("notShowAnswerYet",t.notShowAnswerYet)("isTeacherRole",t.isTeacherRole)("isShowOriginAnswer",t.isShowOriginAnswer),e.R50("isShowExplain",t.isShowExplain),e.Y8G("backToLink",t.backToLink)("isOfflineMark",t.isOfflineMark)("currentTab",t.currentTab)}}function Qy(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-answer-box-with-user-answer-for-teacher",3),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isShowExplainChange.emit(o.isShowExplain))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("examObj",t.examObj)("examConfig",t.examConfig)("questionObj",t.questionObj)("userAnswersObj",t.userAnswersObj)("notShowAnswerYet",t.notShowAnswerYet)("isShowOriginAnswer",t.isShowOriginAnswer)("isTeacherRole",t.isTeacherRole),e.R50("isShowExplain",t.isShowExplain),e.Y8G("backToLink",t.backToLink)("isOfflineMark",t.isOfflineMark)("currentTab",t.currentTab)}}let zh=(()=>{var i;class n extends Tr{ngOnInit(){}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-answer-box-view-base"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[[3,"examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isTeacherRole","isShowOriginAnswer","isShowExplain","backToLink","isOfflineMark","currentTab","isShowExplainChange",4,"ngIf"],[3,"examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isShowOriginAnswer","isTeacherRole","isShowExplain","backToLink","isOfflineMark","currentTab","isShowExplainChange",4,"ngIf"],[3,"isShowExplainChange","examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isTeacherRole","isShowOriginAnswer","isShowExplain","backToLink","isOfflineMark","currentTab"],[3,"isShowExplainChange","examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isShowOriginAnswer","isTeacherRole","isShowExplain","backToLink","isOfflineMark","currentTab"]],template:function(s,o){1&s&&e.DNE(0,$y,1,11,"azt-answer-box-with-user-answer-for-student",0)(1,Qy,1,11,"azt-answer-box-with-user-answer-for-teacher",1),2&s&&(e.Y8G("ngIf",!o.isTeacherRole),e.R7$(),e.Y8G("ngIf",o.isTeacherRole))},dependencies:[Ty,By,v.MD,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();var Ds=A(88959),Go=A(60293),Pu=A(78346),br=A(5951),xr=A(5552);const Mh=(i,n)=>({"btn-primary":i,"btn-secondary":n}),Dh=()=>({"mr-2":!0});function qy(i,n){if(1&i&&(e.j41(0,"div",22)(1,"b",23),e.EFF(2),e.k0s(),e.j41(3,"div",24),e.nrm(4,"azt-dynamic-hook",17),e.k0s()()),2&i){let t;const s=n.$implicit;e.R7$(2),e.SpI("",null!==(t=s.alpha)&&void 0!==t?t:s.key,"."),e.R7$(2),e.Y8G("content",s.content)}}function Yy(i,n){if(1&i&&(e.j41(0,"div",20),e.DNE(1,qy,5,2,"div",21),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.data.questionObj.answers)}}function Uy(i,n){if(1&i&&(e.j41(0,"h2",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",t.data.questionObj.answerResult.join(", ")," ")}}function Xy(i,n){if(1&i&&(e.j41(0,"div",8)(1,"h2",10),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",16),e.nrm(5,"azt-dynamic-hook",17),e.k0s(),e.DNE(6,Yy,2,1,"div",18)(7,Uy,3,4,"h2",19),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_noi_dung_cau_hoi")," "),e.R7$(3),e.Y8G("content",t.data.questionObj.content),e.R7$(),e.Y8G("ngIf",1==t.data.questionObj.answerType&&t.data.questionObj.answers&&t.data.questionObj.answers.length>0),e.R7$(),e.Y8G("ngIf",t.data.questionObj.answerResult&&t.data.questionObj.isRoleTeacher)}}function Wy(i,n){if(1&i&&(e.j41(0,"div",8)(1,"h2",26),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",27),e.nrm(5,"azt-dynamic-hook",17),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_loi_giai")," "),e.R7$(3),e.Y8G("content",t.data.questionObj.help)}}function Hy(i,n){1&i&&(e.qex(0),e.j41(1,"div",28)(2,"span",29),e.nrm(3,"azt-loading-ui"),e.k0s()(),e.bVm())}function Jy(i,n){if(1&i&&(e.j41(0,"div",44),e.nrm(1,"input",45),e.j41(2,"label",46),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&i){const t=n.$implicit,s=n.index;e.R7$(),e.FS9("id","choice_"+s),e.FS9("formControlName","choice_"+s),e.R7$(),e.FS9("for","choice_"+s),e.R7$(),e.SpI(" ",e.bMT(4,4,t)," ")}}function Ky(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",42),e.DNE(2,Jy,5,6,"div",43),e.k0s(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.FS9("formGroupName","survey_"+t.id),e.R7$(),e.Y8G("ngForOf",t.choices)}}function Zy(i,n){if(1&i&&(e.qex(0),e.j41(1,"mat-radio-button",49),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i){const t=n.$implicit,s=e.XpG(2).$implicit,o=e.XpG(3);e.R7$(),e.FS9("value",t),e.Y8G("checked",o.form.controls["survey_"+s.id].value==t),e.R7$(),e.JRh(e.bMT(3,3,t))}}function e0(i,n){if(1&i&&(e.j41(0,"mat-radio-group",47),e.DNE(1,Zy,4,5,"ng-container",48),e.k0s()),2&i){const t=e.XpG().$implicit;e.FS9("formControlName","survey_"+t.id),e.R7$(),e.Y8G("ngForOf",t.choices)}}function t0(i,n){if(1&i&&(e.j41(0,"div",39)(1,"div",40)(2,"h2",41),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div"),e.DNE(6,Ky,3,2,"ng-container",11)(7,e0,2,2,"ng-template",null,1,e.C5r),e.k0s()()),2&i){const t=n.$implicit,s=n.index,o=e.sdS(8);e.R7$(3),e.Lme(" ",s+1+". ","",e.bMT(4,4,t.content)," "),e.R7$(3),e.Y8G("ngIf",t.multiChoice&&t.choices&&t.choices.length>1)("ngIfElse",o)}}function n0(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,t0,9,6,"div",38),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.surveyObjs)}}function s0(i,n){if(1&i){const t=e.RV6();e.DNE(0,n0,2,1,"div",30),e.j41(1,"div",31)(2,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFeedBackEmotion(2))}),e.nrm(3,"lucide-icon",33),e.j41(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFeedBackEmotion(1))}),e.nrm(8,"lucide-icon",35),e.j41(9,"span"),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()(),e.j41(12,"div",36)(13,"textarea",37),e.nI1(14,"mytranslate"),e.bIt("keyup",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.autoResizeFeedBackArea())}),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("ngIf",t.surveyObjs.length),e.R7$(2),e.Y8G("disabled",t.disableLike)("ngClass",e.l_i(16,Mh,2==t.feedBackEmotion,2!=t.feedBackEmotion)),e.R7$(),e.Y8G("ngClass",e.lJ4(19,Dh)),e.R7$(2),e.JRh(e.bMT(6,10,"lang_test_market_introduce_rating_like")),e.R7$(2),e.Y8G("disabled",t.disableLike)("ngClass",e.l_i(20,Mh,1==t.feedBackEmotion,1!=t.feedBackEmotion)),e.R7$(),e.Y8G("ngClass",e.lJ4(23,Dh)),e.R7$(2),e.JRh(e.bMT(11,12,"lang_test_market_introduce_rating_dislike")),e.R7$(3),e.FS9("placeholder",e.bMT(14,14,"lang_global_question_ask_to_feedback_placeholder"))}}function i0(i,n){1&i&&(e.j41(0,"span",50),e.nrm(1,"azt-loading-ui"),e.k0s())}let o0=(()=>{var i;class n extends Mt._{getAnswerSurvey(){let s=[],o=this.commonService.getFormObj(this.form);for(let a in o)if(a.includes("survey_")){let r={surveyId:Number(a.substring(a.indexOf("_")+1)),answers:[]};if(o[a]instanceof Object){let l=this.surveyObjs.find(c=>c.id==r.surveyId);if(l)for(let c in o[a])if(o[a][c]){let _=Number(c.substring(c.indexOf("_")+1));if(Array.isArray(l.choices)&&l.choices[_]){let d=l.choices[_];r.answers?.push(d)}}}else r.answers=[o[a]];s.push(r)}return s}getFeedbackSurveys(){this.loadingFeedBackSurvey=!0,this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksSurveysGet(this.applyType,this.role).subscribe(s=>{if(1==s.success){this.surveyObjs=s.data?.objs??[];let o={feedBackContent:new g.MJ("",{nonNullable:!0,validators:[g.k0.required,Ds.M.noWhiteSpace]})};this.surveyObjs.length>0&&this.surveyObjs.forEach(a=>{if(a.multiChoice&&a.choices&&a.choices.length>1){let r={};o[`survey_${a.id}`]=new g.gE({}),a.choices.forEach((l,c)=>{r[`choice_${c}`]=new g.MJ(!1,{nonNullable:!0})}),o[`survey_${a.id}`]=this.fb.group(r)}else o[`survey_${a.id}`]=new g.MJ("",{nonNullable:!0,validators:[g.k0.required]})}),this.form=this.fb.group(o),this.loadingFeedBackSurvey=!1}else this.errorStatusObj(s.message??"",!0),this.loadingFeedBackSurvey=!1}))}getInfoFeedback(){this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksGet(this.questionId,this.applyType,this.role).subscribe(s=>{if(1==s.success){let o=s.data?.objs??[];o.length&&o[0].status&&(this.feedBackEmotion=o[0].status,this.disableLike=!0)}else this.errorStatusObj(s.message??"",!0),this.disableLike=!1}))}changeFeedBackEmotion(s){this.disableLike||(this.feedBackEmotion=s,this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksPost({objectId:this.questionId??void 0,userType:this.role??void 0,applyType:this.applyType??void 0,status:this.feedBackEmotion??void 0,content:"",surveyAnswers:[]}).subscribe(a=>{1==a.success?this.getInfoFeedback():this.errorStatusObj(a.message??"",!0)})))}autoResizeFeedBackArea(){const s=document.getElementById("text-area-feedback");s&&setTimeout(()=>{s.style.cssText="height:auto;",s.style.cssText="height:"+(s.scrollHeight+30)+"px"},0)}sendFeedBack(){if(this.form.invalid)this.showErrorSnack("lang_auto_vui_long_dien_day_du_thong_tin");else{this.initStatusObj(),this.sendingFeedBack=!0;let s={objectId:this.questionId??void 0,userType:this.role??void 0,applyType:this.applyType??void 0,status:this.feedBackEmotion??0,content:this.form.controls.feedBackContent.value??void 0,surveyAnswers:this.getAnswerSurvey()};this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksPost(s).subscribe(o=>{1==o.success?(this.sendingFeedBack=!1,this.dialogRef.close(!0),this.successStatusObj("TEACHER"==this.role?"lang_test_market_success_feedback":"lang_test_market_success_feedback_student",!0)):(this.errorStatusObj(o.message??"",!0),this.sendingFeedBack=!1)}))}}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){this.questionId=this.data.questionObj.id,this.role=this.data.role,this.applyType=this.data.applyType,this.form=this.fb.group({feedBackContent:new g.MJ("",{nonNullable:!0,validators:[g.k0.required,Ds.M.noWhiteSpace]})}),this.getInfoFeedback(),this.getFeedbackSurveys(),super.ngOnInit()}constructor(s,o,a,r){super(r,a),this.fb=s,this.testMarketFeedbackService=o,this.dialogRef=a,this.data=r,this.role="",this.applyType="",this.form=new g.gE({}),this.feedBackEmotion=void 0,this.totalLike=0,this.totalDislike=0,this.sendingFeedBack=!1,this.loadingFeedBackSurvey=!1,this.disableLike=!1,this.surveyObjs=[]}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(g.ok),e.rXU(Pu.l_),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["exam-matrix-feedback-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:25,vars:19,consts:[["doneLoading",""],["SingleChoice",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],["class","border-t border-slate-200/60 dark:border-darkmode-400 py-2 mt-2",4,"ngIf"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[3,"formGroup"],[1,"font-medium","text-md","text-center","mb-2"],[4,"ngIf","ngIfElse"],[1,"p-3","text-right"],["azt-track-service","exam-matrix-feedback-dialog-qXEblgFcT",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","exam-matrix-feedback-dialog-NGlD5D-IvA",1,"btn","btn-primary","mw-24",3,"click","disabled"],["class","w-4 h-4 mr-2",4,"ngIf"],[1,"tex2jax_process","box-content",2,"width","auto"],[3,"content"],["class","grid grid-cols-12 gap-2 answers",4,"ngIf"],["class","font-medium text-md text-left text-success my-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-2","answers"],["class","answer col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"answer","col-span-12","md:col-span-6"],[1,"answer-label"],[1,"answer-content"],[1,"font-medium","text-md","text-left","text-success","my-2"],[1,"font-medium","text-md","text-center"],[1,"help-content","box","px-3","mt-1",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px"],[1,"flex","items-center","h-full","w-full"],[1,"w-8","h-8","mx-auto"],[4,"ngIf"],[1,"flex","items-center",2,"flex-wrap","wrap"],["azt-track-service","exam-matrix-feedback-dialog-PoMeFnagK",1,"btn","btn-sm","shadow-md","mt-2","mr-2",3,"click","disabled","ngClass"],["name","thumbs-up","size","24",3,"ngClass"],["azt-track-service","exam-matrix-feedback-dialog-iJokCn34oQ",1,"btn","btn-sm","shadow-md","mt-2","mr-2",3,"click","disabled","ngClass"],["name","thumbs-down","size","20",3,"ngClass"],[1,"items-center","mt-1"],["id","text-area-feedback","type","text","cols","10","rows","3","formControlName","feedBackContent",1,"form-control","mt-1",3,"keyup","placeholder"],["class","flex flex-wrap mb-2",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","mb-2"],[2,"min-width","300px"],[1,"text-md","mb-2"],[1,"block","px-2","ml-2","sm:flex",3,"formGroupName"],["class","mr-5",4,"ngFor","ngForOf"],[1,"mr-5"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[2,"vertical-align","middle","cursor","pointer","margin-left","3px",3,"for"],["color","primary",1,"px-2",2,"flex-direction","column",3,"formControlName"],[4,"ngFor","ngForOf"],[1,"mr-5",3,"checked","value"],[1,"w-4","h-4","mr-2"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2",6),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,Xy,8,6,"div",7)(8,Wy,6,4,"div",7),e.j41(9,"div",8)(10,"form",9)(11,"h2",10),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Hy,4,0,"ng-container",11)(15,s0,15,24,"ng-template",null,0,e.C5r),e.k0s()()()()(),e.j41(17,"div",12)(18,"button",13),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",14),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sendFeedBack())}),e.DNE(22,i0,2,0,"span",15),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()}if(2&s){const a=e.sdS(16);e.R7$(5),e.SpI(" ",e.bMT(6,11,o.data.questionObj.isRoleTeacher?"lang_global_question_ask_to_feedback":"lang_global_question_ask_to_report")," "),e.R7$(2),e.Y8G("ngIf",o.data.questionObj.content),e.R7$(),e.Y8G("ngIf",o.data.questionObj.help&&o.data.questionObj.isRoleTeacher),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(2),e.SpI(" ",e.bMT(13,13,"lang_auto_nhan_xet")," "),e.R7$(2),e.Y8G("ngIf",o.loadingFeedBackSurvey)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(20,15,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",o.sendingFeedBack||o.form.invalid),e.R7$(),e.Y8G("ngIf",o.sendingFeedBack),e.R7$(),e.SpI(" ",e.bMT(24,17,"lang_button_send")," ")}},dependencies:[Go.x,wt.R,v.MD,v.YU,v.Sq,v.bT,g.X1,g.qT,g.me,g.Zm,g.BC,g.cb,g.j4,g.JD,g.$R,L.iI,g.YN,z.wp,Y.s,br.VT,br._g,F.flO,F.WGl,H.L,U.Id,q.k,xr.t],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),n})();var vr=A(53688),a0=A(50193),Nu=A(53470);function r0(i,n){1&i&&(e.j41(0,"div",10)(1,"span",11),e.nrm(2,"azt-loading-ui"),e.k0s(),e.j41(3,"span",12),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&i&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function l0(i,n){1&i&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azt_cau_hoi_chua_co_lan_sua_nao")," "))}function c0(i,n){if(1&i&&e.nrm(0,"azt-question-standalone-for-preview",17),2&i){const t=e.XpG().$implicit,s=e.XpG();e.Y8G("examObj",s.data.examObj)("questionObj",t.questionLog)("follower",s.data.follower)("curQuestionIndex",s.data.curQuestionIndex)}}function u0(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",14),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(5,"div",15),e.DNE(6,c0,1,4,"azt-question-standalone-for-preview",16),e.k0s(),e.bVm()),2&i){const t=n.$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_azota_ui_the_time_of_question_editing")+": "+e.bMT(4,4,t.createdAt)," "),e.R7$(4),e.Y8G("ngIf",t.questionLog)}}let _0=(()=>{var i;class n extends Mt._{closeDialog(){this.dialogRef.close()}getLogQuestion(s){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsIdLogsGet(s,this.data.isTeacher?void 0:this.data.curExamResultId).subscribe(o=>{o.success?((o.data?.objs??[]).forEach(r=>{let l={createdAt:r.createdAt,questionLog:this.commonService.castJsonToClassObj(vr.I,JSON.stringify(r.questionLog))};l.questionLog&&(l.questionLog.isLogEditQuestion=!0),this.questionLogCustomList.push(l)}),this.successStatusObj()):this.errorStatusObj(o.message??"",!0)}))}ngOnInit(){this.getLogQuestion(this.data.questionObj.id)}constructor(s,o,a){super(a,o),this.questionService=s,this.dialogRef=o,this.data=a,this.questionLogCustomList=[]}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Nu.wP),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["show-question-edit-history-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:15,vars:13,consts:[[1,"box"],[1,"font-medium","p-3","bg-slate-100","dark:bg-darkmode-400"],[3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],["class","flex p-5 justify-center items-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","items-center","p-2","pt-3"],[1,"ml-auto"],[1,"btn","btn-secondary",3,"click"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"flex","p-5","justify-center","items-center"],[1,"p-2","pb-0","text-xs","font-medium",2,"margin-bottom","-10px"],[1,"p-2"],[3,"examObj","questionObj","follower","curQuestionIndex",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"azt-mat-dialog-content",2),e.DNE(6,r0,6,3,"div",3),e.j41(7,"div",4),e.DNE(8,l0,3,3,"div",5)(9,u0,7,6,"ng-container",6),e.k0s()(),e.j41(10,"div",7)(11,"div",8)(12,"button",9),e.bIt("click",function(){return o.closeDialog()}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()()),2&s&&(e.R7$(2),e.Lme(" ",e.bMT(3,7,"lang_azota_ui_the_history_of_question_editing")," (",o.questionLogCustomList.length+" "+e.bMT(4,9,"lang_testbank_powerpoint_times"),") "),e.R7$(3),e.Y8G("defaultHeight",60),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(2),e.Y8G("ngIf",!o.questionLogCustomList.length&&!o.statusObj.loading),e.R7$(),e.Y8G("ngForOf",o.questionLogCustomList),e.R7$(4),e.SpI(" ",e.bMT(14,11,"lang_auto_dong")," "))},dependencies:[Ms.U,wt.R,a0.a,v.MD,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,z.bH,U.Id,q.k],encapsulation:2}),n})();var Dn=A(83536);function d0(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"button",2),e.nI1(2,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goToEditQuestion())}),e.nrm(3,"lucide-icon",3),e.k0s()()}2&i&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,1,"lang_core_chinh_sua_de_thi")))}function m0(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"button",2),e.nI1(2,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showEditHistoryDialog())}),e.nrm(3,"lucide-icon",4),e.k0s()()}2&i&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,1,"lang_azota_ui_the_history_of_question_editing")))}let Gh=(()=>{var i;class n extends Z.H{checkEditQuestion(){const s=this.questionObj?.createdAt,o=this.questionObj?.updatedAt;let a=this.timeService.calculationTimeOnlyMinutes(s,o);this.isEditQuestion=Number(a)>0}isOrgQuestion(){return null!=this.orgExamObjs.find(s=>s.questionId==this.questionObj.id)}goToEditQuestion(){var s=this.commonService.getMyParam(this.activeRoute,"cat_id")??"0",o=this.activeRoute.snapshot.paramMap.get("result_id")??"0",a=this.activeRoute.snapshot.paramMap.get("user_id")??"",r=this.activeRoute.snapshot.paramMap.get("student_id")??"",l=this.activeRoute.snapshot.paramMap.get("exam_id")??"",c=s,_=l;let d=this.orgExamObjs.find(b=>b.questionId==this.questionObj.id);d&&(c=d.orgCategoryId?.toString()??"0",_=d.orgExamId?.toString()??"0");var p=this.commonService.getMyQueryParam("backto")??"";let f=`/admin/testbank/test-review/${l}/${a}/${r}/${o}`+(p?"?backto="+encodeURIComponent(p):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/update-exam/"+c)+"/"+_+"?backto="+encodeURIComponent(f)+"&questionId="+this.questionObj.id}showEditHistoryDialog(){let s={follower:new Dn.e,examObj:this.examObj,questionObj:this.questionObj,renderConfigObj:this.renderConfigObj,curQuestionIndex:this.curQuestionIndex,curExamResultId:this.curExamResultId,isTeacher:this.showForTeacher};this.sAztDialogService.open(_0,{width:"750px",data:s})}showFeedbackQuestionDialog(){this.sAztDialogService.open(o0,{width:"750px",data:{questionObj:this.questionObj,role:this.showForTeacher?"TEACHER":"STUDENT",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1})}ngOnChanges(){this.checkEditQuestion()}constructor(s,o,a){super(),this.sAztDialogService=s,this.activeRoute=o,this.timeService=a,this.showForTeacher=!1,this.curExamResultId=0,this.isEditQuestion=!1}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Mn.i),e.rXU(L.nX),e.rXU(mn.F))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-action-box"]],inputs:{examObj:"examObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",orgExamObjs:"orgExamObjs",showForTeacher:"showForTeacher",curQuestionIndex:"curQuestionIndex",curExamResultId:"curExamResultId"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:4,vars:4,consts:[[1,"flex"],[4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","p-1",3,"click","matTooltip"],["name","file-pen-line","size","18"],["name","history","size","18"]],template:function(s,o){1&s&&(e.j41(0,"div",0),e.DNE(1,d0,4,3,"div",1),e.nI1(2,"isOfflineExam"),e.DNE(3,m0,4,3,"div",1),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngIf",o.isOrgQuestion()&&!e.bMT(2,2,o.examObj)),e.R7$(2),e.Y8G("ngIf",o.isEditQuestion&&!o.questionObj.isLogEditQuestion))},dependencies:[v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,H.L,z.st,U.Id,q.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var Vu=A(44644),Ph=A(78178),Lu=A(93948),Bu=A(25605),yr=A(74863),$u=A(63319),Qu=A(58834),Sr=A(17954);const p0=i=>({"skeleton-box-loading":i}),h0=i=>({"pb-2":i}),f0=()=>[];function g0(i,n){if(1&i&&e.nrm(0,"div",3),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,p0,t.renderConfigObj.isFirstRender))}}function T0(i,n){if(1&i&&e.nrm(0,"azt-test-audio-ui",15),2&i){const t=e.XpG(2);e.Y8G("questionObj",t.questionObj)("isShowList",!0)}}function b0(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",4)(1,"div",5),e.nrm(2,"azt-question-group-content-box",6),e.j41(3,"div",7),e.DNE(4,T0,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9),e.nrm(6,"azt-question-label-box",10)(7,"azt-question-action-box",11),e.k0s(),e.nrm(8,"azt-question-content-box",6)(9,"azt-question-answer-view-content-box",12),e.k0s()(),e.j41(10,"azt-answer-box-view-base",13),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.isShowExplain=o)}),e.k0s(),e.nrm(11,"azt-question-explain-box",14),e.k0s()}if(2&i){let t;const s=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7"),e.Y8G("id","question_render_container_"+s.questionObj.id)("ngClass",e.eq3(43,h0,s.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",s.examObj)("questionObj",s.questionObj)("renderConfigObj",s.renderConfigObj),e.R7$(2),e.Y8G("ngIf",s.questionObj.attachments.length>0),e.R7$(2),e.Y8G("examObj",s.examObj)("questionObj",s.questionObj)("renderConfigObj",s.renderConfigObj)("curQuestionIndex",s.curQuestionIndex),e.R7$(),e.Y8G("showForTeacher",!1)("curExamResultId",null!==(t=s.curExamResultId)&&void 0!==t?t:0)("examObj",s.examObj)("questionObj",s.questionObj)("renderConfigObj",s.renderConfigObj)("curQuestionIndex",s.curQuestionIndex)("orgExamObjs",e.lJ4(45,f0)),e.R7$(),e.Y8G("examObj",s.examObj)("questionObj",s.questionObj)("renderConfigObj",s.renderConfigObj),e.R7$(),e.Y8G("userAnswersObj",s.userAnswersObj)("examObj",s.examObj)("isShowOriginAnswer",s.isShowOriginAnswer)("questionObj",s.questionObj)("renderConfigObj",s.renderConfigObj),e.R7$(),e.Y8G("examObj",s.examObj)("examConfig",s.examConfig)("isTeacherRole",!1)("isShowOriginAnswer",s.isShowOriginAnswer)("questionObj",s.questionObj)("userAnswersObj",s.userAnswersObj)("notShowAnswerYet",s.notShowAnswerYet),e.R50("isShowExplain",s.isShowExplain),e.Y8G("backToLink",s.backToLink)("isOfflineMark",s.isOfflineMark)("currentTab",s.currentTab),e.R7$(),e.Y8G("isShowExplain",s.isShowExplain)("questionObj",s.questionObj)("renderConfigObj",s.renderConfigObj)}}let qu=(()=>{var i;class n extends $u.I{ngOnInit(){super.ngOnInit();let s=new Qu.C(!1,!1,!1);super.initData(s,this.follower,this.questionObj),this.backToLink=`/test/answer-test/${this.examObj?.tenantId??0}/${this.examObj?.categoryId??0}/${this.examObj?.hashId}/${this.curExamResultId}`}constructor(){super(),this.follower=new Dn.e,this.curQuestionIndex=0,this.isShowExplain=!1,this.isShowOriginAnswer=!1,this.isOfflineMark=!1,this.userAnswersObj={},this.notShowAnswerYet=!1,this.currentTab="multiple_choice_tab",this.backToLink="",this.checkShowFullAnswer=!1}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-standalone-for-student-at-review-page"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",curExamResultId:"curExamResultId",examConfig:"examConfig",isShowExplain:"isShowExplain",isShowOriginAnswer:"isShowOriginAnswer",isOfflineMark:"isOfflineMark",userAnswersObj:"userAnswersObj",notShowAnswerYet:"notShowAnswerYet",currentTab:"currentTab"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"box","border-none","pt-2",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"showForTeacher","curExamResultId","examObj","questionObj","renderConfigObj","curQuestionIndex","orgExamObjs"],[3,"userAnswersObj","examObj","isShowOriginAnswer","questionObj","renderConfigObj"],[3,"isShowExplainChange","examObj","examConfig","isTeacherRole","isShowOriginAnswer","questionObj","userAnswersObj","notShowAnswerYet","isShowExplain","backToLink","isOfflineMark","currentTab"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"]],template:function(s,o){if(1&s&&(e.j41(0,"div",1),e.DNE(1,g0,1,3,"div",2)(2,b0,12,46,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[Lu.y,yr.c,Bu.S,Gh,Vu.$,wh.Q,zh,Ph.N,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k,Sr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const x0=i=>({"skeleton-box-loading":i}),v0=i=>({"mob-web-width":i});function y0(i,n){if(1&i&&e.nrm(0,"div",3),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,x0,t.renderConfigObj.isFirstRender))}}function S0(i,n){if(1&i&&e.nrm(0,"azt-test-audio-ui",15),2&i){const t=e.XpG(2);e.Y8G("questionObj",t.questionObj)("isShowList",!0)}}function w0(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",4)(1,"div",5),e.nrm(2,"azt-question-group-content-box",6),e.j41(3,"div",7),e.DNE(4,S0,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9),e.nrm(6,"azt-question-label-box",10)(7,"azt-question-action-box",11),e.k0s(),e.nrm(8,"azt-question-content-box",6)(9,"azt-question-answer-view-content-box",12),e.k0s()(),e.j41(10,"azt-answer-box-view-base",13),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.isShowExplain=o)}),e.k0s(),e.nrm(11,"azt-question-explain-box",14),e.k0s()}if(2&i){const t=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7"),e.Y8G("id","question_render_container_"+t.questionObj.id)("ngClass",e.eq3(39,v0,t.isMobileWebView)),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.R7$(2),e.Y8G("ngIf",t.questionObj.attachments.length>0),e.R7$(2),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex),e.R7$(),e.Y8G("showForTeacher",!0)("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex)("orgExamObjs",t.orgExamObjs),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("isShowOriginAnswer",t.isShowOriginAnswer)("renderConfigObj",t.renderConfigObj),e.R7$(),e.Y8G("examObj",t.examObj)("isTeacherRole",!0)("isShowOriginAnswer",t.isShowOriginAnswer)("questionObj",t.questionObj)("userAnswersObj",t.userAnswersObj)("notShowAnswerYet",t.notShowAnswerYet)("isOfflineMark",t.isOfflineMark),e.R50("isShowExplain",t.isShowExplain),e.Y8G("currentTab",t.currentTab),e.R7$(),e.Y8G("isShowExplain",t.isShowExplain)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)}}let Nh=(()=>{var i;class n extends $u.I{ngOnInit(){super.ngOnInit();let s=new Qu.C(!1,!1,!1);super.initData(s,this.follower,this.questionObj)}constructor(){super(),this.follower=new Dn.e,this.curQuestionIndex=0,this.orgExamObjs=[],this.isShowExplain=!1,this.isOfflineMark=!1,this.isShowOriginAnswer=!1,this.userAnswersObj={},this.notShowAnswerYet=!1,this.currentTab="multiple_choice_tab"}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-standalone-for-teacher-at-review-page"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",orgExamObjs:"orgExamObjs",isShowExplain:"isShowExplain",isOfflineMark:"isOfflineMark",isShowOriginAnswer:"isShowOriginAnswer",userAnswersObj:"userAnswersObj",notShowAnswerYet:"notShowAnswerYet",currentTab:"currentTab"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"pt-2","pb-3","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"showForTeacher","examObj","questionObj","renderConfigObj","curQuestionIndex","orgExamObjs"],[3,"examObj","questionObj","isShowOriginAnswer","renderConfigObj"],[3,"isShowExplainChange","examObj","isTeacherRole","isShowOriginAnswer","questionObj","userAnswersObj","notShowAnswerYet","isOfflineMark","isShowExplain","currentTab"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"]],template:function(s,o){if(1&s&&(e.j41(0,"div",1),e.DNE(1,y0,1,3,"div",2)(2,w0,12,41,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[Lu.y,yr.c,Bu.S,Gh,Vu.$,wh.Q,zh,Ph.N,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k,Sr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var Mi=A(99939),Vh=A(43750);class Lh{constructor(n){this.commonService=n}parserEssayResult(n){let t=[],s=this.commonService.myParseJson(n??"{}")??{};return Object.entries(s).map(([a,r])=>({key:a,value:r})).forEach(a=>{let r=a.key.replace("cau","");t.push({questionIndex:isNaN(Number(r))?void 0:Number(r),questionMark:isNaN(Number(a.value))?void 0:Number(a.value)})}),t}}var os=A(22399),Bh=A(38850),$h=A(18016),Gs=A(72710),Yu=A(7178);const I0=["mnoteContainer"],C0=["aztMarkNote"],Qh=i=>({display:i}),k0=i=>({border:i}),qh=i=>({"is-invalid":i}),Yh=()=>({"mr-1 cursor-pointer":!0});function E0(i,n){if(1&i){const t=e.RV6();e.j41(0,"lucide-icon",20),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit;return e.Njj(o.showEssayMark=!1)}),e.k0s()}2&i&&(e.FS9("matTooltip",e.bMT(1,2,"lang_auto_anhien_phan_bai_lam_cua_cau_hoi_nay")),e.Y8G("ngClass",e.lJ4(4,Yh)))}function A0(i,n){if(1&i){const t=e.RV6();e.j41(0,"lucide-icon",21),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit;return e.Njj(o.showEssayMark=!0)}),e.k0s()}2&i&&(e.FS9("matTooltip",e.bMT(1,2,"lang_auto_anhien_phan_bai_lam_cua_cau_hoi_nay")),e.Y8G("ngClass",e.lJ4(4,Yh)))}function O0(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function R0(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function F0(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function j0(i,n){if(1&i&&(e.j41(0,"div",22),e.DNE(1,O0,3,3,"span",10)(2,R0,3,3,"span",10)(3,F0,3,3,"span",10),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup.controls.mark.errors.min),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup.controls.mark.errors.max),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup.controls.mark.errors.pattern)}}function z0(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",13),e.DNE(2,E0,2,5,"lucide-icon",14)(3,A0,2,5,"lucide-icon",15),e.j41(4,"span",16),e.EFF(5),e.nI1(6,"mytranslate"),e.j41(7,"span",17),e.nI1(8,"mytranslate"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.nrm(11,"input",18),e.nI1(12,"mytranslate"),e.k0s(),e.DNE(13,j0,4,3,"div",19),e.bVm()),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.Y8G("ngIf",s.showEssayMark),e.R7$(),e.Y8G("ngIf",!s.showEssayMark),e.R7$(2),e.Lme(" ",e.bMT(6,14,"lang_auto_cau")," ",(null!==(t=s.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(8,16,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",s.essMaxPoint," ",e.bMT(10,18,"lang_auto_diem_brackets"),""),e.R7$(2),e.FS9("placeholder",e.bMT(12,20,"lang_auto_nhap_diem")),e.Y8G("readonly",!o.showForTeacher)("decimal",!0)("ngClass",e.eq3(22,qh,s.essayAnswersFormGroup.controls.mark&&s.essayAnswersFormGroup.controls.mark.invalid))("value",s.essayAnswersFormGroup.controls.mark.value)("formControl",s.essayAnswersFormGroup.controls.mark),e.R7$(2),e.Y8G("ngIf",s.essayAnswersFormGroup.controls.mark.errors)}}function M0(i,n){if(1&i&&(e.j41(0,"div",12),e.DNE(1,z0,14,24,"ng-container",10),e.k0s()),2&i){const t=n.$implicit,s=n.index,o=e.XpG();e.Y8G("ngStyle",e.eq3(2,k0,s==o.questions.length-1?"none":"")),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup)}}function D0(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",23)(1,"button",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveDataMarkExercise())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.findQuestionFormInvalid()||t.loadingDataCdn&&t.files.length>0),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}function G0(i,n){if(1&i&&e.nrm(0,"azt-question-standalone-for-student-at-review-page",29),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("examConfig",o.examConfig)("questionObj",s)("curQuestionIndex",null!==(t=s.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("currentTab","essay_tab")}}function P0(i,n){if(1&i&&e.nrm(0,"azt-question-standalone-for-teacher-at-review-page",30),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("questionObj",s)("curQuestionIndex",null!==(t=s.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("orgExamObjs",o.orgExamObjs)("currentTab","essay_tab")}}function N0(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function V0(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function L0(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function B0(i,n){if(1&i&&(e.j41(0,"div",22),e.DNE(1,N0,3,3,"span",10)(2,V0,3,3,"span",10)(3,L0,3,3,"span",10),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngIf",null==t.essayAnswersFormGroup.controls.mark.errors?null:t.essayAnswersFormGroup.controls.mark.errors.min),e.R7$(),e.Y8G("ngIf",null==t.essayAnswersFormGroup.controls.mark.errors?null:t.essayAnswersFormGroup.controls.mark.errors.max),e.R7$(),e.Y8G("ngIf",null==t.essayAnswersFormGroup.controls.mark.errors?null:t.essayAnswersFormGroup.controls.mark.errors.pattern)}}function $0(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",34)(2,"label",35),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",17),e.nI1(6,"mytranslate"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.EFF(9," : "),e.k0s(),e.nrm(10,"input",36),e.nI1(11,"mytranslate"),e.DNE(12,B0,4,3,"div",19),e.k0s(),e.bVm()),2&i){let t;const s=e.XpG(2),o=s.$implicit,a=s.index,r=e.XpG();e.R7$(2),e.FS9("for","cau_"+a),e.R7$(),e.Lme(" ",e.bMT(4,14,"lang_auto_nhap_diem_cau")," ",(null!==(t=o.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(6,16,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",o.essMaxPoint," ",e.bMT(8,18,"lang_auto_diem_brackets"),""),e.R7$(3),e.FS9("placeholder",e.bMT(11,20,"lang_auto_nhap_diem")),e.Y8G("readonly",!r.showForTeacher)("ngClass",e.eq3(22,qh,o.essayAnswersFormGroup.controls.mark&&o.essayAnswersFormGroup.controls.mark.invalid))("id","cau_"+a)("decimal",!0)("value",o.essayAnswersFormGroup.controls.mark.value)("formControl",o.essayAnswersFormGroup.controls.mark),e.R7$(2),e.Y8G("ngIf",o.essayAnswersFormGroup.controls.mark.errors)}}function Q0(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,$0,13,24,"ng-container",10),e.j41(2,"div",31)(3,"label",32),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.nrm(6,"textarea",33),e.nI1(7,"mytranslate"),e.k0s()()),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(2),e.FS9("for","comment_"+s.id),e.R7$(),e.Lme("",e.bMT(5,8,"lang_mark_essay_add_comment_question")," ",(null!==(t=s.indexLabel)&&void 0!==t?t:0)+1,":"),e.R7$(2),e.FS9("id","comment_"+s.id),e.FS9("placeholder",e.bMT(7,10,"lang_auto_nhap_nhan_xet")),e.Y8G("readonly",!o.showForTeacher)("formControl",s.essayAnswersFormGroup.controls.comment)}}function q0(i,n){if(1&i&&(e.j41(0,"div",25)(1,"div",26),e.DNE(2,G0,1,7,"azt-question-standalone-for-student-at-review-page",27)(3,P0,1,7,"azt-question-standalone-for-teacher-at-review-page",28)(4,Q0,8,12,"div",10),e.k0s()()),2&i){const t=n.$implicit,s=n.index,o=e.XpG();e.R7$(),e.Mz_("id","q_",s,""),e.Y8G("ngStyle",e.eq3(6,Qh,t.showEssayMark?"block":"none")),e.R7$(),e.Y8G("ngIf",!o.showForTeacher),e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup)}}function Y0(i,n){1&i&&(e.j41(0,"div",37)(1,"b"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_anh_bai_lam_tu_luan"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,"lang_auto_khong_co_du_lieu_anh_bai_lam_tu_luan_cua_thi_sinh"),"\n"))}function U0(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-mark-note",39,1),e.bIt("doneLoadData",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.doneLoadData(o))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("dataMarkNote",t.dataMarkNote)("screenType","exam")("modeView",t.showForTeacher?"teacher":"student")}}function X0(i,n){if(1&i&&(e.qex(0),e.DNE(1,U0,2,3,"azt-mark-note",38),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",1===t.curSelectedTab||t.changeSelectedTab)}}function W0(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",40)(1,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveDataMarkExercise())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.findQuestionFormInvalid()||t.loadingDataCdn&&t.files.length>0),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}let H0=(()=>{var i;class n extends Z.H{getMaxPoint(s){let o=this.questions.find(a=>a.id==s);return o?o.scorePerQuestion??0:0}remark(s){let o=this.questions.map(l=>({questionId:l.essayAnswersFormGroup?.controls.questionId.value,comment:l.essayAnswersFormGroup?.controls.comment.value,mark:Number(l.essayAnswersFormGroup?.controls.mark.value)})),a=JSON.stringify({type:"exam",id:this.examObj.id,user:this.examObj.tenantId});this.examResultService.apiExamResultSaveResultPost({id:this.resultID,result:s,essayResult:void 0,essayAnswers:o},a).subscribe(l=>{this.isLoading=!1,1==l.success?(this.showSuccessSnack("lang_auto_cham_diem_tu_luan_thanh_cong"),this.saveResultEvent.emit(1)):(this.commonService.snackError(l.message),this.saveResultEvent.emit(0))})}initDataMarkNote(){this.examResultObj.result?this.dataMarkNote.answer_obj={id:this.examResultObj.id??0,homeworkId:0,studentId:this.examResultObj.studentId??0,point:0,result:this.examResultObj.result,files:this.examResultObj.files,markedByTeacherId:this.examResultObj.markedByTeacherId,confirmedAt:this.examResultObj.confirmedAt,createdAt:this.examResultObj.createdAt,updatedAt:this.examResultObj.updatedAt,tenantId:this.examResultObj.tenantId}:(this.files.forEach(s=>s.url=this.sAztCommonCdnService.getMyCdn(s.url??"")),this.dataMarkNote.answer_obj={id:0,homeworkId:0,studentId:0,point:0,files:this.serializeJson(this.files)})}saveDataMarkExercise(){var s=this;return(0,W.A)(function*(){if(!s.questions.find(a=>a.essayAnswersFormGroup?.controls.mark.value))return s.showErrorSnack("lang_core_vui_long_nhap_diem_tu_luan");if(s.questions.forEach(a=>{a.essayAnswersFormGroup?.controls.mark.value||a.essayAnswersFormGroup?.controls.mark.setValue("0")}),s.isLoading=!0,!s.files.length||(s.objectResult=s.MarkNote?.exportDataMarkNote(),!s.objectResult.pages?.length&&s.files.find(a=>(0,Mi.nL)(a.mimes??"")||(0,Mi.rl)(a.mimes??"")||!(0,Mi.N6)(a.mimes??""))))return s.remark("");if(s.objectResult.pages?.length){let a=!1;for(let d=0;d<s.objectResult.pages.length;d++)if(s.objectResult.pages[d]&&s.objectResult.pages[d].draws?.length)for(let p=0;p<(s.objectResult.pages[d].draws?.length??0);p++){let f=s.objectResult.pages[d].draws?.[p]??{};f.src&&f.src.includes("base64")&&(a=!0)}a&&(yield s.uploadDrawBase64ToCdn());const r=s.serializeJson(s.objectResult),l=s.zipDataService.convertContentGzip(r),c=new Blob([l],{type:"text/plain"}),_=new File([c],"txt",{type:"text/plain"});s.apiUploadService.uploadToCdnForHomework(_).subscribe(d=>{if(!d.success)return s.showErrorSnack("lang_auto_co_loi_trong_qua_trinh_luu_du_lieu_len_cdn_vui_long_thu_lai");s.remark(s.serializeJson({urlDataMark:d.data?.url??"",version:"0.1"}))})}})()}uploadDrawBase64ToCdn(){return new Promise(s=>{if(!this.objectResult.pages)return;let o=[];this.objectResult.pages.forEach(a=>o.push(!1)),this.objectResult.pages.forEach((a,r)=>{a.draws?.length&&a.draws.forEach((l,c)=>{if(l.src&&l.src.includes("base64")){o[r]=!0;let _=(0,Vh.q)(l.src);this.apiUploadService.commonUploadForMarkResult(_,`essay_note_${r}_${c}_${this.resultID}.png`,"image/png").subscribe(d=>{d.type!=yh.hv.UploadProgress&&(l.src=d.data?.url,o[r]=!1),o.includes(!0)||s()})}})})})}doneLoadData(s){this.loadingDataCdn=!1}autoResizeFeedBackArea(s){const o=document.getElementById("comment_"+s);o&&setTimeout(()=>{o.style.cssText="height:auto;",o.style.cssText="height:"+(o.scrollHeight+30)+"px"},0)}findQuestionFormInvalid(){return null!=this.questions.find(s=>s.essayAnswersFormGroup?.invalid)}initEssayFormGroupQuestion(){let s=this.examResultObj.confirmedAt?new Lh(this.commonService).parserEssayResult(this.examResultObj.essayResult):[],o=(this.examResultObj.confirmedAt?this.examResultObj.essayAnswerObjs:[])??[];this.questions.forEach((a,r)=>{let l=this.getMaxPoint(a.id);this.totalMaxPoint+=l,a.essMaxPoint=l,this.maxPointPerQuestion.push(a.essMaxPoint);let c=s.find(d=>d.questionIndex==r),_=o.find(d=>d.questionId==a.id)??{questionId:a.id,comment:void 0,mark:c?.questionMark};a.showEssayMark=!0,a.essayAnswersFormGroup=new g.gE({questionId:new g.MJ(a.id,{nonNullable:!0}),mark:new g.MJ(_?.mark?.toString()??"",{nonNullable:!0,validators:[g.k0.pattern("^[0-9]((.|,){0,1})[0-9]{0,8}"),g.k0.min(0),g.k0.max(a.essMaxPoint??0)]}),comment:new g.MJ(_?.comment??"",{nonNullable:!0})})})}ngOnInit(){this.initDataMarkNote(),this.followerRenderQuest.setNumQuest(this.questions.length),this.initEssayFormGroupQuestion(),super.ngOnInit()}constructor(s,o,a,r){super(),this.sAztCommonCdnService=s,this.examResultService=o,this.apiUploadService=a,this.zipDataService=r,this.orgExamObjs=[],this.questions=[],this.files=[],this.resultID=0,this.userAnswersObj={},this.curSelectedTab=0,this.changeSelectedTab=!1,this.saveResultEvent=new e.bkB,this.followerRenderQuest=new Dn.e,this.isLoading=!1,this.totalMaxPoint=0,this.maxPointPerQuestion=[],this.jsonData={},this.dataMarkNote={},this.objectResult={},this.loadingDataCdn=!0}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(os.c),e.rXU(Bh._),e.rXU($h.T),e.rXU(Gs.j))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-mark-essay-new"]],viewQuery:function(s,o){if(1&s&&(e.GBs(I0,5),e.GBs(C0,5)),2&s){let a;e.mGM(a=e.lsd())&&(o.mnoteContainer=a.first),e.mGM(a=e.lsd())&&(o.MarkNote=a.first)}},inputs:{showForTeacher:"showForTeacher",examObj:"examObj",examConfig:"examConfig",orgExamObjs:"orgExamObjs",questions:"questions",files:"files",resultID:"resultID",userAnswersObj:"userAnswersObj",examResultObj:"examResultObj",curSelectedTab:"curSelectedTab",changeSelectedTab:"changeSelectedTab"},outputs:{saveResultEvent:"saveResultEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:9,consts:[["mnoteContainer",""],["aztMarkNote",""],["id","essayBoxButtons",1,"flex","items-center","jusitfy-center","flex-col","p-3","rounded-md","border","border-slate-200","dark:border-darkmode-400"],[1,"grid","grid-cols-12","gap-3","pb-3","w-full","border-b","border-slate-200","dark:border-darkmode-400"],["class","col-span-12 md:col-span-6 lg:col-span-4 pr-3 border-r border-slate-200 dark:border-darkmode-400",3,"ngStyle",4,"ngFor","ngForOf"],["class","BWrap-one",4,"ngIf"],["id","showQuestionEssay"],["class","essay_qItem",4,"ngFor","ngForOf"],["class","mb-2 mt-2",4,"ngIf"],[1,"card-box","listPhotos",3,"ngStyle"],[4,"ngIf"],["class","BWrap",4,"ngIf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","pr-3","border-r","border-slate-200","dark:border-darkmode-400",3,"ngStyle"],[1,"flex","items-center"],["name","eye","size","24",3,"ngClass","matTooltip","click",4,"ngIf"],["name","eye_off","size","24",3,"ngClass","matTooltip","click",4,"ngIf"],[1,"mr-1","inline-block","flex-none",2,"min-width","130px"],[1,"maxPoint",3,"matTooltip"],["type","text","appOnlyNumber","","step",".01",1,"form-control",3,"readonly","decimal","placeholder","ngClass","value","formControl"],["class","mt-2 text-danger text-xs",4,"ngIf"],["name","eye","size","24",3,"click","ngClass","matTooltip"],["name","eye_off","size","24",3,"click","ngClass","matTooltip"],[1,"mt-2","text-danger","text-xs"],[1,"BWrap-one"],["azt-track-service","mark-essay-new-qoh8TPOQYx","id","btn-1",1,"mt-3","btn","btn-primary",3,"click","disabled"],[1,"essay_qItem"],[1,"mt-2",3,"id","ngStyle"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab",4,"ngIf"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab",4,"ngIf"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab"],[1,"block-input",2,"margin-bottom","20px"],[1,"mb-2","font-medium",3,"for"],["type","text","cols","10","autoResize","",1,"form-control","d-inline-flex","w-full","mt-1",3,"readonly","id","placeholder","formControl"],[1,"block-input",2,"margin-bottom","10px"],[1,"mr-2","font-medium",3,"for"],["type","text","appOnlyNumber","","step",".01",1,"form-control","form-input","d-inline-flex",3,"readonly","ngClass","id","decimal","placeholder","value","formControl"],[1,"mb-2","mt-2"],[3,"dataMarkNote","screenType","modeView","doneLoadData",4,"ngIf"],[3,"doneLoadData","dataMarkNote","screenType","modeView"],[1,"BWrap"],["azt-track-service","mark-essay-new-kAM88sxUxu","id","btn-2",1,"mt-3","btn","btn-primary",3,"click","disabled"]],template:function(s,o){1&s&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,M0,2,4,"div",4),e.k0s(),e.DNE(3,D0,5,6,"div",5),e.k0s(),e.j41(4,"div",6),e.DNE(5,q0,5,8,"div",7),e.k0s(),e.DNE(6,Y0,6,6,"div",8),e.j41(7,"div",9,0),e.DNE(9,X0,2,1,"ng-container",10),e.k0s(),e.DNE(10,W0,5,6,"div",11)),2&s&&(e.R7$(2),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(2),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.files&&0==o.files.length),e.R7$(),e.Y8G("ngStyle",e.eq3(7,Qh,o.files&&0==o.files.length?"none":"block")),e.R7$(2),e.Y8G("ngIf",o.dataMarkNote&&o.dataMarkNote.answer_obj&&o.files&&o.files.length>0),e.R7$(),e.Y8G("ngIf",o.showForTeacher))},dependencies:[qu,Nh,iv.i,v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,g.me,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,H.L,U.Id,Sh.Z,q.k,Yu.j],styles:["#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]{flex:auto;display:flex;flex-wrap:wrap;padding-bottom:10px;width:100%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-right:5px;display:flex;justify-content:center;align-items:center;padding-right:5px;margin-bottom:5px;width:24%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 5px;height:30px;border-radius:3px;padding-left:5px;width:60px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, #essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]{color:#838383;margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]:hover{cursor:default}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#585858}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-radius:5px;margin-bottom:-15px!important;padding-bottom:0!important}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{margin:5px 10px 10px;padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:#2361ae2e;border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.form-control.is-invalid[_ngcontent-%COMP%]{padding-right:calc(1.5em + .15rem)!important;background-position:right calc(.375em + .02rem) center!important}.form-input[_ngcontent-%COMP%]{height:30px;width:96px}.form-mark[_ngcontent-%COMP%]{margin-left:20px}div#showQuestionEssay[_ngcontent-%COMP%]{width:100%}.BWrap[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-bottom:15px}.essay_qItem[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:30px!important}[type=number][_ngcontent-%COMP%]{appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}@media screen and (max-width: 1474px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-bottom:5px}.stt[_ngcontent-%COMP%], .maxPoint[_ngcontent-%COMP%]{font-size:12px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 768px){.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 480px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{border-right:none;margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:99%}}"]}),n})();var Uh=A(83801);let J0=(()=>{var i;class n extends Z.H{copyLinkToClipboard(){return`${this.commonService.getCurrentDomainWithLanguage()}/admin/testbank/test-review/${this.examIdParam}/${this.userIdParam}/${this.studentIdParam}/${this.examResultIdParam??0}`+(this.isCapacity?"?isCapacity=1":"")}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngOnInit(){super.ngOnInit()}constructor(s){super(),this.commonService=s}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Le.R))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-testbank-test-review-show-copy-link-button"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",isCapacity:"isCapacity"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[[1,"flex","items-center","mt-2"],["azt-track-service","show-copy-link-button-DYZc-0oRwh",1,"btn-text-primary","font-medium",3,"click","cdkCopyToClipboard"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return o.showCopySuccess()}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(),e.Y8G("cdkCopyToClipboard",o.copyLinkToClipboard()),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_copy_link_gui_giao_vien")," "))},dependencies:[v.MD,g.X1,L.iI,g.YN,z.wp,Y.s,Uh.dF,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})(),K0=(()=>{var i;class n{getDictionaryByGroupFieldTS(s,o){for(var a={},r=0;r<s.length;r++)s[r].hasOwnProperty(o)&&("number"==typeof s[r][o]||"string"==typeof s[r][o])&&(a.hasOwnProperty(s[r][o])||(a[s[r][o]]=[]),a[s[r][o]].push(s[r]));return a}getDictionaryByFieldTS(s,o){for(var a={},r=0;r<s.length;r++)s[r].hasOwnProperty(o)&&("number"==typeof s[r][o]||"string"==typeof s[r][o])&&(a[s[r][o]]=s[r]);return a}getDictionaryBy2FieldsTS(s,o,a){for(var r={},l=0;l<s.length;l++)s[l].hasOwnProperty(o)&&("number"==typeof s[l][o]||"string"==typeof s[l][o])&&s[l].hasOwnProperty(a)&&("number"==typeof s[l][a]||"string"==typeof s[l][a])&&(r[s[l][o]+"_"+s[l][a]]=s[l]);return r}getListValueByFieldNumberTS(s,o){for(var a=[],r=0;r<s.length;r++)s[r].hasOwnProperty(o)&&"number"==typeof s[r][o]&&a.push(s[r][o]);return a}getListValueByField(s,o){for(var a=[],r=0;r<s.length;r++)if(s[r].hasOwnProperty(o)){var l=a.filter(c=>c[o]==s[r][o]);(!l||0==l.length)&&a.push(s[r])}return a}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var Di=A(96850);const Z0=i=>({"font-bold":i});function eS(i,n){if(1&i&&(e.j41(0,"td",12),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG().$implicit;e.BMQ("rowspan",s.length),e.R7$(),e.JRh(t.label)}}function tS(i,n){if(1&i&&(e.qex(0),e.j41(1,"tr"),e.DNE(2,eS,2,2,"td",11),e.j41(3,"td",12),e.EFF(4),e.nI1(5,"formatFullDateTimeTimezoneByUserUnitPipe"),e.k0s(),e.j41(6,"td",13),e.EFF(7),e.k0s()(),e.bVm()),2&i){const t=n.$implicit,s=n.index,o=e.XpG(3);e.R7$(2),e.Y8G("ngIf",0==s),e.R7$(2),e.JRh(e.bMT(5,4,1e3*t.second)),e.R7$(2),e.Y8G("ngClass",e.eq3(6,Z0,t.isFontBold)),e.R7$(),e.JRh(o.isShowOriginAnswer?t.key:t.alpha?t.alpha:t.key)}}function nS(i,n){if(1&i&&(e.qex(0),e.DNE(1,tS,8,8,"ng-container",10),e.bVm()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}function sS(i,n){if(1&i&&(e.j41(0,"table",6)(1,"tr")(2,"th",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"th",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.DNE(11,nS,2,1,"ng-container",10),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_cau_hoi")),e.R7$(3),e.JRh(e.bMT(7,6,"lang_auto_thoi_gian")),e.R7$(3),e.JRh(e.bMT(10,8,"lang_auto_dap_an")),e.R7$(2),e.Y8G("ngForOf",t.groupObjs)}}function iS(i,n){1&i&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_co_du_lieu_lam_bai_trac_nghiem_chon_dap_an_dung_cua_thi_sinh")))}function oS(i,n){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",12),e.EFF(3),e.k0s(),e.j41(4,"td",12),e.EFF(5),e.nI1(6,"formatFullDateTimeTimezoneByUserUnitPipe"),e.k0s(),e.j41(7,"td",12),e.EFF(8),e.k0s()(),e.bVm()),2&i){let t;const s=n.$implicit;e.R7$(3),e.JRh(s.userAgent),e.R7$(2),e.JRh(e.bMT(6,3,null!==(t=s.startedAt)&&void 0!==t?t:"")),e.R7$(3),e.JRh(s.ip)}}function aS(i,n){if(1&i&&(e.j41(0,"table",16)(1,"tr")(2,"th",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"th",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.DNE(11,oS,9,5,"ng-container",10),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_thong_tin_thiet_bi")),e.R7$(3),e.JRh(e.bMT(7,6,"lang_auto_thoi_gian")),e.R7$(3),e.JRh(e.bMT(10,8,"IP")),e.R7$(2),e.Y8G("ngForOf",t.ipTrackingDataObjs)}}function rS(i,n){1&i&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_co_du_lieu")))}function lS(i,n){if(1&i&&(e.j41(0,"mat-tab",1),e.nI1(1,"mytranslate"),e.j41(2,"div",2),e.DNE(3,aS,12,10,"table",15)(4,rS,3,3,"ng-template",null,0,e.C5r),e.k0s()()),2&i){const t=e.sdS(5),s=e.XpG();e.FS9("label",e.bMT(1,3,"lang_auto_thong_tin_thiet_bi_IP")),e.R7$(3),e.Y8G("ngIf",s.ipTrackingDataObjs.length>0)("ngIfElse",t)}}let cS=(()=>{var i;class n extends Z.H{ngOnInit(){super.ngOnInit(),this.findReTapQuestions()}constructor(s,o,a){super(),this.dictionaryService=s,this.userService=o,this.answerTypeService=a,this.startQuestionIndex=1,this.isShowOriginAnswer=!1,this.ipTrackingDataObjs=[],this.isTeacherRole=this.userService.isTeacherRole(),this.groupObjs=[],this.timezoneOffset=(new Date).getTimezoneOffset()}findReTapQuestions(){var s=this.dictionaryService.getDictionaryByGroupFieldTS(this.dataResultObjs??[],"index");for(var o in s)if(s.hasOwnProperty(o)){var a=s[o].map((r,l)=>{let c=!1,_=this.questionObjs.find(d=>d.id==r.questionId);if(this.answerTypeService.isTrueFalseAnswer(_)){for(let d=s[o].length-1;d>=0;d--)if(s[o][d].key.includes(r.key.split("")[0])){c=r.key==s[o][d].key;break}}else c=l==s[o].length-1;return{...r,isFontBold:c,label:`${_?.originalLabel??Number(r.index)+this.startQuestionIndex} ${_?.groupInfo?.groupId?"("+_?.groupInfo?.groupId+")":""}`}});this.groupObjs.push(a)}}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(K0),e.rXU(pn.R),e.rXU(on._))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-test-result-tracking"]],inputs:{startQuestionIndex:"startQuestionIndex",isShowOriginAnswer:"isShowOriginAnswer",dataResultObjs:"dataResultObjs",dataScrollObjs:"dataScrollObjs",ipTrackingDataObjs:"ipTrackingDataObjs",questionObjs:"questionObjs"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:9,consts:[["noData",""],[3,"label"],[1,"overflow-x-auto","mt-5"],[1,"font-medium","text-xs"],["id","tracktable","class","table table-bordered mt-3",4,"ngIf","ngIfElse"],[3,"label",4,"ngIf"],["id","tracktable",1,"table","table-bordered","mt-3"],["id","questionNum",1,"w-24","text-center"],["id","timeStamp",1,"w-56","text-center"],["id","answerLabel",1,"w-24","text-center"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"text-center",3,"ngClass"],[1,"alert","alert-secondary","p-5"],["id","tracktable","class","table table-bordered",4,"ngIf","ngIfElse"],["id","tracktable",1,"table","table-bordered"]],template:function(s,o){if(1&s&&(e.j41(0,"mat-tab-group")(1,"mat-tab",1),e.nI1(2,"mytranslate"),e.j41(3,"div",2)(4,"div",3),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,sS,12,10,"table",4)(8,iS,3,3,"ng-template",null,0,e.C5r),e.k0s()(),e.DNE(10,lS,6,5,"mat-tab",5),e.k0s()),2&s){const a=e.sdS(9);e.R7$(),e.FS9("label",e.bMT(2,5,"lang_auto_chi_tiet_chon_dap_an")),e.R7$(4),e.JRh(e.bMT(6,7,"lang_azt_note_export_excel_exam")),e.R7$(2),e.Y8G("ngIf",o.groupObjs.length>0)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",o.isTeacherRole)}},dependencies:[v.MD,v.YU,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,Di.mq,Di.T8,F.flO,H.L,z.Ky,U.Id,q.k],encapsulation:2}),n})(),uS=(()=>{var i;class n{processData(s){let o=[],a=[];if(s)for(var r=0;r<s.length;r++)if("scroll"!=s[r][0]){var l={index:s[r][0],alpha:s[r][1],key:s[r][2],questionId:Number(s[r][3]),second:Number(s[r][4])};o.push(l)}else{var c={scrollPos:Number(s[r][1]),second:Number(s[r][2])};a.push(c)}return[o,a]}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();function _S(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",3),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function dS(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-mat-dialog-content")(1,"div",4),e.nrm(2,"azt-test-result-tracking",5),e.k0s()(),e.j41(3,"div",6)(4,"button",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.dialogRef.close())}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()}if(2&i){let t;const s=e.XpG();e.R7$(2),e.Y8G("questionObjs",s.data.questionObjs)("isShowOriginAnswer",s.data.isShowOriginAnswer)("startQuestionIndex",null!==(t=null==s.examObj?null:s.examObj.startQuestionIndex)&&void 0!==t?t:1)("dataResultObjs",s.dataResultObjs)("dataScrollObjs",s.dataScrollObjs)("ipTrackingDataObjs",s.ipTrackingDataObjs),e.R7$(3),e.SpI(" ",e.bMT(6,7,"lang_auto_thoat")," ")}}let mS=(()=>{var i;class n extends Mt._{getData(s){this.initStatusObj(),this.frontExamResultTrackService.apiFrontExamResultTrackGetObjGet(this.examHashId,s).subscribe(o=>{if(1==o.success){this.examObj=o.data?.examObj;var a=this.castJsonToObj(this.zipDataService.decodeContentGzip(o?.data?.examResultTrackObj?.trackData??""));a&&a&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(a)),this.ipTrackingDataObjs=o.data?.ipTracks??[],this.successStatusObj()}else this.errorStatusObj(o.message??"",!0);this.isLoading=!1})}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_chi_tiet_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tiet_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let s=Number(this.data.examResultIdParam?.toString());this.examHashId=this.data.hashId??"",this.getData(s),super.ngOnInit()}constructor(s,o,a,r,l){super(l,r),this.frontExamResultTrackService=s,this.zipDataService=o,this.sAztTestResultTrackingService=a,this.dialogRef=r,this.data=l,this.dataResultObjs=[],this.dataScrollObjs=[],this.ipTrackingDataObjs=[],this.backToLink="",this.examHashId="",this.isLoading=!0}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Ce.Wq),e.rXU(Gs.j),e.rXU(uS),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-test-front-result-tracking"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["doneLoading",""],[1,"box","scroll-menu-test",2,"height","calc(100vh - 200px)","min-height","75vh"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"p-3"],[3,"questionObjs","isShowOriginAnswer","startQuestionIndex","dataResultObjs","dataScrollObjs","ipTrackingDataObjs"],[1,"mt-2","pt-2","pb-2","px-3","text-right","absolute","bottom-0","right-0"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary",3,"click"]],template:function(s,o){if(1&s&&(e.j41(0,"div",1),e.DNE(1,_S,1,1,"azt-loading-effect",2)(2,dS,7,9,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.isLoading)("ngIfElse",a)}},dependencies:[ie.K,Ms.U,cS,v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,q.k],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#fff;width:100vh;max-height:95vh;padding:.5rem 1.25rem 1.25rem;overflow-y:auto}"]}),n})();var wr=A(86600),Uu=A(53719),Xu=A(82798);function pS(i,n){if(1&i&&(e.j41(0,"div")(1,"div",10)(2,"div",11),e.EFF(3),e.k0s(),e.nrm(4,"input",12),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.title," "),e.R7$(),e.FS9("value",t.contents[0]),e.Y8G("disabled",!0)}}function hS(i,n){if(1&i&&(e.j41(0,"div",17)(1,"span",18),e.EFF(2),e.k0s()()),2&i){const t=n.$implicit;e.R7$(),e.FS9("matTooltip",t),e.R7$(),e.JRh(t)}}function fS(i,n){if(1&i&&(e.j41(0,"div")(1,"div",13)(2,"span",14),e.EFF(3),e.k0s()(),e.j41(4,"div",15),e.DNE(5,hS,3,2,"div",16),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(2),e.Y8G("ngForOf",t.contents)}}function gS(i,n){if(1&i&&(e.j41(0,"mat-radio-button",21)(1,"span",18),e.EFF(2),e.k0s()()),2&i){const t=n.$implicit;e.Y8G("checked",!0)("disabled",!0),e.R7$(),e.FS9("matTooltip",t),e.R7$(),e.JRh(t)}}function TS(i,n){if(1&i&&(e.j41(0,"div")(1,"div",13)(2,"span",19),e.EFF(3),e.k0s()(),e.j41(4,"mat-radio-group",15),e.DNE(5,gS,3,4,"mat-radio-button",20),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(2),e.Y8G("ngForOf",t.contents)}}function bS(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"div",10)(2,"span",19),e.EFF(3),e.k0s()(),e.j41(4,"div",22)(5,"mat-form-field",23)(6,"mat-select",24),e.mxI("valueChange",function(o){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.contents[0],o)||(a.contents[0]=o),e.Njj(o)}),e.j41(7,"mat-option",25),e.EFF(8),e.k0s()()()()()}if(2&i){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(3),e.R50("value",t.contents[0]),e.Y8G("disabled",!0),e.R7$(),e.FS9("value",t.contents[0]),e.R7$(),e.JRh(t.contents[0])}}function xS(i,n){if(1&i&&(e.qex(0,8),e.DNE(1,pS,5,3,"div",9)(2,fS,6,2,"div",9)(3,TS,6,2,"div",9)(4,bS,9,5,"div",9),e.bVm()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",0==t.type),e.R7$(),e.Y8G("ngIf",1==t.type),e.R7$(),e.Y8G("ngIf",2==t.type),e.R7$(),e.Y8G("ngIf",3==t.type)}}let vS=(()=>{var i;class n extends Mt._{constructor(s,o){super(o,s),this.dialogRef=s,this.data=o}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(De.CP,8),e.rXU(De.Vh))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-result-info-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:7,consts:[[1,"box","result-info-dialog"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],["id","test-info-form-show",1,"p-5"],[1,"text-center","mx-auto"],[1,"text-md","font-medium"],["class","info-field",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","result-info-dialog-NTVpa2BtGs",1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"info-field"],[4,"ngIf"],[1,"input-group","mt-3"],[1,"input-group-text","whitespace-nowrap","font-medium",2,"min-width","100px","text-align","left"],["type","text",1,"form-control",3,"disabled","value"],[1,"input-group","w-full","mt-3"],[1,"input-group-text","w-full","align-center","font-medium",2,"vertical-align","middle","border-bottom-left-radius","0","border-bottom-right-radius","0","white-space","normal"],[1,"grid","grid-cols-12","gap-3","p-2","ml-0","mr-0","border-row"],["class","col-span-12 sm:col-span-12 md:col-span-4 text-left mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-12","md:col-span-4","text-left","mb-1"],[1,"truncate",2,"vertical-align","middle","color","#1e293c",3,"matTooltip"],[1,"input-group-text","w-full","font-medium",2,"vertical-align","middle","border-bottom-left-radius","0","border-bottom-right-radius","0","white-space","normal"],["color","primary","class","col-span-12 sm:col-span-12 md:col-span-4 text-left mb-1",3,"checked","disabled",4,"ngFor","ngForOf"],["color","primary",1,"col-span-12","sm:col-span-12","md:col-span-4","text-left","mb-1",3,"checked","disabled"],[1,"border-row"],["appearance","fill",1,"border-0"],[3,"valueChange","value","disabled"],[2,"color","#1e293c",3,"value"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.DNE(7,xS,5,4,"ng-container",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(5),e.SpI(" ",e.bMT(6,3,"lang_testbank_test_config_verify_profile_student")," "),e.R7$(2),e.Y8G("ngForOf",o.data),e.R7$(3),e.SpI(" ",e.bMT(11,5,"lang_auto_dong")," "))},dependencies:[v.MD,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,wr.wT,Uu.rl,br.VT,br._g,Xu.VO,vt.oV,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();function yS(i,n){if(1&i&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&i){const t=n.$implicit,s=n.index,o=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_combine_exam_component")+(s+1),":\xa0 "),e.R7$(3),e.JRh(t+(o.totalMarkSubject?"/"+e.i5U(5,4,o.totalMarkSubject/o.totalSubject,"1.0-2"):""))}}function SS(i,n){if(1&i&&(e.qex(0),e.DNE(1,yS,6,7,"div",12),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",null==t.examResultObj?null:t.examResultObj.subjectMarkValues)}}function wS(i,n){if(1&i&&(e.j41(0,"span",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.E5c("(",t.examResultObj.rightAnswer,"/",t.examResultObj.totalQuestion-t.essayQuestionObjs.length,"\xa0",e.bMT(2,3,"lang_auto_cau_brackets"),"")}}function IS(i,n){if(1&i&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.DNE(4,wS,3,5,"span",13),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_auto_trac_nghiem"),": ",null!=t.examResultObj.trueFalseMark?t.examResultObj.trueFalseMark:e.bMT(3,5,"lang_auto_chua_co_diem")," "),e.R7$(3),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.rightAnswer))}}function CS(i,n){if(1&i&&(e.j41(0,"span",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.E5c("(",t.examResultObj.rightAnswer,"/",t.examResultObj.totalQuestion-t.essayQuestionObjs.length,"\xa0",e.bMT(2,3,"lang_auto_cau_brackets"),"")}}function kS(i,n){if(1&i&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.DNE(3,CS,3,5,"span",13),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_auto_trac_nghiem"),": ",t.examResultObj.mark," "),e.R7$(2),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.rightAnswer))}}function ES(i,n){if(1&i&&e.DNE(0,IS,5,7,"div",10)(1,kS,4,5,"div",10),2&i){const t=e.XpG();e.Y8G("ngIf",2!=(null==t.examObj?null:t.examObj.whenShowResult)&&t.trueFalseChoiceQuestionObjs.length>0&&t.examResultObj&&t.examResultObj.totalQuestion&&!t.viewPractice),e.R7$(),e.Y8G("ngIf",t.examResultObj&&t.examResultObj.totalQuestion&&t.viewPractice)}}function AS(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.LHq("",e.bMT(2,4,"lang_auto_tu_luan"),": ",null==t.examResultObj?null:t.examResultObj.essayMark," (",t.essayQuestionObjs.length," ",e.bMT(3,6,"lang_auto_cau_brackets"),"")}}function OS(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",16),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_tu_luan"),": "),e.R7$(3),e.JRh(e.bMT(5,6,"lang_auto_chua_cham")),e.R7$(2),e.Lme(" (",t.essayQuestionObjs.length," ",e.bMT(7,8,"lang_auto_cau_brackets")," ")}}function RS(i,n){if(1&i&&(e.j41(0,"div",8),e.DNE(1,AS,4,8,"span",15)(2,OS,8,10,"span",15),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.examResultObj?null:t.examResultObj.confirmedAt),e.R7$(),e.Y8G("ngIf",!(null!=t.examResultObj&&t.examResultObj.confirmedAt))}}function FS(i,n){if(1&i&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_so_file_da_nop"),": ",t.files.length,"")}}function jS(i,n){if(1&i&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",t.examTracks.exitFullScreen,"")}}function zS(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.clickResultTrack())}),e.nrm(4,"lucide-icon",18),e.k0s()()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function MS(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"button",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showResultInfors())}),e.nrm(4,"lucide-icon",20),e.k0s()()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_show_infos_test_submit"),": "))}function DS(i,n){if(1&i&&(e.nrm(0,"app-testbank-test-review-show-copy-link-button",21),e.nI1(1,"isCapacityExam")),2&i){const t=e.XpG();e.Y8G("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("isCapacity",e.bMT(1,5,t.examObj))}}let GS=(()=>{var i;class n extends Z.H{get checkHasType1Question(){let s=!1;for(let o=0;o<(this.questionObjs?.length??0);o++)if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs?.[o])){s=!0;break}return s}calculateTime(s,o){return s?this.timeService.calculationTimeExamTested(s,o):""}showResultInfors(){this.sAztDialogService.open(vS,{width:"500px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){this.sAztDialogService.open(mS,{width:"750px",data:{questionObjs:this.questionObjs??[],isShowOriginAnswer:this.isShowOriginAnswer,examResultIdParam:this.examResultIdParam,hashId:this.examObj?.hashId},restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.totalSubject=this.examResultObj?.subjectMarkValues?.length??3,this.totalMarkSubject=this.examResultObj?.examResultStatisticObj?.examQuestionStatisticObj?.totalMark??0}constructor(s,o,a){super(),this.answerTypeService=s,this.sAztDialogService=o,this.timeService=a,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.isShowOriginAnswer=!0,this.historyExamResultObjs=[],this.resultInfos=[],this.viewPractice=!1,this.totalSubject=3,this.totalMarkSubject=30}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(on._),e.rXU(Mn.i),e.rXU(mn.F))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-testbank-test-review-show-detail-info-for-student"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",offlineHashIdParam:"offlineHashIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",isShowOriginAnswer:"isShowOriginAnswer",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos",viewPractice:"viewPractice"},standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:21,consts:[["showNormalMark",""],[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"text-md","flex","items-center"],[1,"text-md","font-medium","ml-auto"],[1,"flex","items-center","mt-2"],[4,"ngIf","ngIfElse"],["class","flex items-center mt-2",4,"ngIf"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","isCapacity",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],["azt-track-service","show-detail-info-box-for-student-yw3gtIAU5N",1,"btn-text-primary","ml-2",3,"click"],["name","file-clock","size","20"],["azt-track-service","show-detail-info-box-for-student-d5Ae8h9_DU",1,"btn-text-primary","ml-2",3,"click"],["name","circle-ellipsis","size","20"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","isCapacity"]],template:function(s,o){if(1&s&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()()(),e.j41(7,"div",5)(8,"div",3)(9,"p",6),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"p",7),e.EFF(13),e.k0s()(),e.j41(14,"div",8)(15,"p",6),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"p",7),e.EFF(19),e.nI1(20,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(21,SS,2,1,"ng-container",9)(22,ES,2,2,"ng-template",null,0,e.C5r)(24,RS,3,2,"div",10)(25,FS,3,4,"div",10)(26,jS,3,4,"div",10)(27,zS,5,3,"div",10)(28,MS,5,3,"div",10)(29,DS,2,7,"app-testbank-test-review-show-copy-link-button",11),e.k0s()()),2&s){const a=e.sdS(23);e.R7$(5),e.JRh(e.bMT(6,13,"lang_auto_thong_tin_chi_tiet")),e.R7$(5),e.SpI("",e.bMT(11,15,"lang_auto_thoi_gian_lam_bai"),":\xa0"),e.R7$(3),e.SpI(" ",o.calculateTime(null==o.examResultObj?null:o.examResultObj.startedTest,null==o.examResultObj?null:o.examResultObj.createdAt)," "),e.R7$(3),e.SpI("",e.bMT(17,17,"lang_auto_thoi_gian_nop_bai"),":\xa0"),e.R7$(3),e.SpI(" ",e.bMT(20,19,null==o.examResultObj?null:o.examResultObj.createdAt)," "),e.R7$(2),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&(null==o.examObj?null:o.examObj.subjectMarks)&&(null==o.examResultObj||null==o.examResultObj.subjectMarkValues?null:o.examResultObj.subjectMarkValues.length))("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&o.essayQuestionObjs.length),e.R7$(),e.Y8G("ngIf",o.essayQuestionObjs.length),e.R7$(),e.Y8G("ngIf",o.examTracks&&0!=(null==o.examObj?null:o.examObj.autoMonitor)),e.R7$(),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&o.checkHasType1Question&&!o.offlineHashIdParam&&o.trueFalseChoiceQuestionObjs.length>0&&(null==o.examResultObj?null:o.examResultObj.totalQuestion)&&!o.viewPractice),e.R7$(),e.Y8G("ngIf",o.resultInfos.length&&!o.viewPractice),e.R7$(),e.Y8G("ngIf",!o.viewPractice)}},dependencies:[J0,v.MD,v.Sq,v.bT,v.QX,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.bH,z.Xc,U.Id,q.k],encapsulation:2}),n})();var Xh=A(93877);const Wh=i=>({"padding-left":i}),PS=()=>({"text-pending":!0});function NS(i,n){if(1&i&&(e.j41(0,"mat-option",6)(1,"i",7),e.nrm(2,"azt-svg-icon",8),e.k0s(),e.j41(3,"span",9),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.eq3(5,Wh,15*(t.level+1)+"px"))("disabled",!t.children.length)("value",t),e.R7$(2),e.Y8G("size",20),e.R7$(2),e.JRh(t.objectName)}}function VS(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-option",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG();return e.Njj(a.confirmSelected(o))}),e.nrm(1,"lucide-icon",11),e.j41(2,"span",12),e.EFF(3),e.k0s()()}if(2&i){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.eq3(4,Wh,15*(t.level+1)+"px"))("value",t),e.R7$(),e.Y8G("ngClass",e.lJ4(6,PS)),e.R7$(2),e.JRh(t.objectName)}}function LS(i,n){if(1&i&&(e.qex(0),e.DNE(1,NS,5,7,"mat-option",4)(2,VS,4,7,"mat-option",5),e.bVm()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngIf","FOLDER"==t.objectType),e.R7$(),e.Y8G("ngIf","EXAM"==t.objectType)}}let BS=(()=>{var i;class n extends Z.H{confirmSelected(s){"FOLDER"!=s.objectType&&(this.combineExamCapacity.forEach(o=>o.isSelected=!1),s.isSelected=!0,this.currentSelected=s,this.selectedExamEmitter.emit({examCapacityId:s.examId,examId:s.objectId??0,examHashId:s.exam?.hashId??"",examCapacityTestId:this.currentResultObj?.examCapacityTestId??0}))}asTemplateDataObj(s){return s}convertTreeNodes(s,o){let a=[];return s.forEach((r,l)=>{let c="EXAM"==r.objectType&&(r.objectId??r.examId)==(this.examComponentObj?this.examComponentObj.id:this.examObj?.id),_={...r,level:o,nodeIndex:l,isSelected:c,randomHashId:this.uuidService.getUuid()};a.push(_),c&&(this.currentSelected=_),r.children.length&&a.push(...this.convertTreeNodes(r.children,o+1))}),a}ngOnInit(){super.ngOnInit(),this.combineExamCapacity=this.convertTreeNodes(this.capacityComponents??[],0)}constructor(){super(),this.capacityComponents=[],this.selectedExamEmitter=new e.bkB,this.uuidService=(0,e.WQX)(Xh.D),this.combineExamCapacity=[],this.errorMessage=""}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-select-capacity-exam-result"]],inputs:{capacityComponents:"capacityComponents",examObj:"examObj",examComponentObj:"examComponentObj",currentResultObj:"currentResultObj"},outputs:{selectedExamEmitter:"selectedExamEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[[1,"test-select-capacity"],[1,"w-full"],[3,"value"],[4,"ngFor","ngForOf"],[3,"ngStyle","disabled","value",4,"ngIf"],[3,"ngStyle","value","click",4,"ngIf"],[3,"ngStyle","disabled","value"],["aria-hidden","true"],["type","folder",3,"size"],[1,"font-normal","ml-2","select-capacity-span",2,"vertical-align","middle"],[3,"click","ngStyle","value"],["name","file-check","size","20",3,"ngClass"],[1,"select-capacity-span","ml-2",2,"vertical-align","middle","white-space","nowrap"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.DNE(3,LS,3,2,"ng-container",3),e.k0s()()()),2&s&&(e.R7$(2),e.Y8G("value",o.currentSelected),e.R7$(),e.Y8G("ngForOf",o.combineExamCapacity))},dependencies:[ke.m,v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,L.iI,g.YN,Y.s,wr.wT,Uu.rl,Xu.VO,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function $S(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(null!=(null==t.examResultObj?null:t.examResultObj.mark)?(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):""):e.bMT(2,1,"lang_auto_chua_co_diem"))}}function QS(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(null!=(null==t.examResultObj?null:t.examResultObj.mark)?(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"/10"):e.bMT(2,1,"lang_auto_chua_co_diem"))}}function qS(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_duoc_xem")))}let YS=(()=>{var i;class n extends Z.H{ngOnInit(){super.ngOnInit()}constructor(s){super(),this.commonService=s,this.viewPractice=!1}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Le.R))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-testbank-test-review-show-mark-info-of-student"]],inputs:{examObj:"examObj",examResultObj:"examResultObj",viewPractice:"viewPractice"},standalone:!0,features:[e.Vt3,e.aNF],decls:7,vars:6,consts:[[1,"font-medium","text-lg","flex","items-center"],[1,"mr-3"],[4,"ngIf"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"span",1),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,$S,3,3,"span",2)(5,QS,3,3,"span",2)(6,qS,3,3,"span",2),e.k0s()),2&s&&(e.R7$(2),e.SpI("",e.bMT(3,4,"lang_auto_diem_cuoi"),": "),e.R7$(2),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&!o.viewPractice),e.R7$(),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&o.viewPractice),e.R7$(),e.Y8G("ngIf",2==(null==o.examObj?null:o.examObj.whenShowResult)))},dependencies:[v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();var US=A(77418),Wu=A(94453),Hh=A(80868),XS=A(66579);const WS=()=>({"mr-2 text-danger flex-none":!0});function HS(i,n){1&i&&(e.j41(0,"span",11),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_testbank_are_you_sure_to_delete_this_exam_result")))}function JS(i,n){1&i&&(e.j41(0,"span",11),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_testbank_are_you_sure_to_delete_multiple_exam_result"),":"))}function KS(i,n){if(1&i&&(e.j41(0,"div",8),e.nrm(1,"lucide-icon",9),e.j41(2,"div"),e.DNE(3,HS,3,3,"span",10)(4,JS,3,3,"span",10),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(3,WS)),e.R7$(2),e.Y8G("ngIf",1==t.data.examResultIds.length),e.R7$(),e.Y8G("ngIf",t.data.examResultIds.length>1)}}function ZS(i,n){if(1&i&&(e.j41(0,"div",21)(1,"span",22),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.fullName)}}function ew(i,n){if(1&i&&e.nrm(0,"img",23),2&i){const t=e.XpG().$implicit;e.Y8G("nameImages",t.nameImages)}}function tw(i,n){if(1&i&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.nrm(3,"azt-create-avatar",17),e.k0s(),e.j41(4,"div",18),e.DNE(5,ZS,3,1,"div",19)(6,ew,1,1,"img",20),e.k0s()()()),2&i){let t;const s=n.$implicit,o=e.XpG(2);e.R7$(3),e.Y8G("linkAvatar",null!==(t=s.avatar)&&void 0!==t?t:"")("nameCreateAvatar",s.fullName)("size",32),e.R7$(2),e.Y8G("ngIf",!s.nameImages||o.commonService.convertStringToNumber(s.id)>0),e.R7$(),e.Y8G("ngIf",s.nameImages&&o.commonService.convertStringToNumber(s.studentId)<=0)}}function nw(i,n){if(1&i&&(e.j41(0,"div",12),e.DNE(1,tw,7,5,"div",13),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.data.examResults)}}function sw(i,n){1&i&&(e.j41(0,"div",8)(1,"div",24)(2,"button",25)(3,"div",26),e.nrm(4,"lucide-icon",27),e.k0s()(),e.j41(5,"div",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(6),e.JRh(e.bMT(7,1,"lang_testbank_are_you_sure_to_delete_no_exam_result")))}function iw(i,n){1&i&&(e.j41(0,"span",31),e.nrm(1,"azt-loading-ui"),e.k0s())}function ow(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmDelete())}),e.DNE(1,iw,2,0,"span",30),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.statusObj.loading),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(3,3,"lang_cms_common_confirm_btn")," ")}}let aw=(()=>{var i;class n extends Mt._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.offlineExamResultService.apiOfflineExamResultDeleteExamResultObjsPost({examHashId:this.examHashId,examResultIds:this.examResultIds}).subscribe(s=>{1==s.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(s.message??""))}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(s,o,a){super(a,o),this.offlineExamResultService=s,this.dialogRef=o,this.examHashId="",this.examResultIds=[],this.examHashId=a.examHashId,this.examResultIds=a.examResultIds}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(XS.Fs),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["coazt-delete-offline-exam-result-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:7,consts:[[1,"box",2,"max-width","600px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],["class","text-md flex",4,"ngIf"],["class","grid grid-cols-12 gap-3","style","overflow-y: auto; max-height: calc(100vh - 150px)",4,"ngIf"],[1,"p-3","flex","justify-end"],["azt-track-service","delete-dialog-VaCVDZ-8G",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-GpxoaJJJor","class","btn w-32 btn-danger",3,"disabled","click",4,"ngIf"],[1,"text-md","flex"],["name","trash-2","size","24",3,"ngClass"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"grid","grid-cols-12","gap-3",2,"overflow-y","auto","max-height","calc(100vh - 150px)"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6"],[1,"flex","items-center","p-3","student-exam-result-up","w-full"],[1,"w-8","h-8","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc(100% - 3.5rem)"],["class","azt-student-name flex items-center","style","flex-wrap: wrap",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"mx-auto","text-center"],[1,"btn","btn-sm","btn-primary-soft","p-1"],[1,"w-6","h-6"],["name","circle-x","size","24"],[1,"mt-4"],["azt-track-service","delete-dialog-GpxoaJJJor",1,"btn","w-32","btn-danger",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,KS,5,4,"div",3)(4,nw,2,1,"div",4)(5,sw,8,3,"div",3),e.k0s()(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,ow,4,5,"button",7),e.k0s()()),2&s&&(e.R7$(3),e.Y8G("ngIf",o.data.examResultIds.length),e.R7$(),e.Y8G("ngIf",o.data.examResultIds.length),e.R7$(),e.Y8G("ngIf",!o.data.examResultIds.length),e.R7$(3),e.SpI(" ",e.bMT(9,5,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("ngIf",o.data.examResultIds.length))},dependencies:[Wu.y,Hh.p,wt.R,v.MD,v.YU,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();var rw=A(62232);class lw{constructor(){this.x=0,this.y=0}toBase64String(){return(new an).writeCvPoint2u(this).toBase64String()}}class Gi{constructor(){this.x=0,this.y=0}toBase64String(){return(new an).writeCvPoint2f(this).toBase64String()}}class Jh{constructor(){this.x=0,this.y=0,this.width=0,this.height=0}toBase64String(){return(new an).writeCvRect2f(this).toBase64String()}}class cw{constructor(){this.center=new Gi,this.filled=!1}toBase64String(){return(new an).writeAnswerCircle(this).toBase64String()}}class Ir{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new an).writeTableAnswer(this).toBase64String()}}class Kh{constructor(){this.top=new Gi,this.left=new Gi,this.bottom=new Gi,this.right=new Gi}toBase64String(){return(new an).writeResultRect(this).toBase64String()}}class uw{constructor(){this.id=0,this.region=new Jh}toBase64String(){return(new an).writeCropRegion(this).toBase64String()}}class _w{constructor(){this.type=0,this.errorCode=0,this.paperCorner=new Kh,this.studentId=new Ir,this.examId=new Ir,this.answerTable=new Ir,this.imageWidth=0,this.imageHeight=0,this.imageSize=0,this.cropRegion=[]}toBase64String(){return(new an).writeResultOutput(this).toBase64String()}}class dw{constructor(){this.templateType=0,this.imageWidth=0,this.imageHeight=0}toBase64String(){return(new an).writeAnswerSheetInput(this).toBase64String()}}class mw{constructor(){this.position=0,this.x=0,this.y=0,this.filledCols=0,this.rows=0}toBase64String(){return(new an).writeSmallAnswerCircle(this).toBase64String()}}class Cr{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new an).writeSmallTableAnswer(this).toBase64String()}}class pw{constructor(){this.studentId=new Cr,this.examId=new Cr,this.answerTable=new Cr}toBase64String(){return(new an).writeDrawData(this).toBase64String()}}class hw{constructor(n){this.bytes=n,this.cursor=0,this.length=n.byteLength}updateCursor(n){if(this.cursor=this.cursor+n,this.cursor>this.length)throw new Error("Overflow InputStreaming")}parseUchar(){let n=this.bytes[this.cursor];return this.updateCursor(1),n}parseInt(){let n=this.bytes.buffer.slice(this.cursor,this.cursor+4);return this.updateCursor(4),new DataView(n).getInt32(0)}parseDouble(){let n=this.bytes.buffer.slice(this.cursor,this.cursor+8);return this.updateCursor(8),new DataView(n).getFloat64(0,!0)}parseString(){let n=new TextDecoder("utf-8"),t=this.cursor,s=this.bytes[this.cursor];for(;0!=s;)this.updateCursor(1),s=this.bytes[this.cursor];let o=this.bytes.slice(t,this.cursor),a=n.decode(o);return this.updateCursor(1),a}parseBool(){let n=this.bytes[this.cursor];return this.updateCursor(1),n>0}parseCvPoint2u(){let n=new lw;return n.x=this.parseUchar(),n.y=this.parseUchar(),n}parseCvPoint2f(){let n=new Gi;return n.x=this.parseDouble(),n.y=this.parseDouble(),n}parseCvRect2f(){let n=new Jh;return n.x=this.parseDouble(),n.y=this.parseDouble(),n.width=this.parseDouble(),n.height=this.parseDouble(),n}parseAnswerCircle(){let n=new cw;return n.center=this.parseCvPoint2f(),n.filled=this.parseBool(),n}parseTableAnswer(){let n=new Ir,t=0;n.rows=this.parseInt(),n.cols=this.parseInt(),n.radius=this.parseInt(),t=this.parseInt();for(let s=0;s<t;s++)n.answers.push(this.parseAnswerCircle());return n}parseResultRect(){let n=new Kh;return n.top=this.parseCvPoint2f(),n.left=this.parseCvPoint2f(),n.bottom=this.parseCvPoint2f(),n.right=this.parseCvPoint2f(),n}parseCropRegion(){let n=new uw;return n.id=this.parseInt(),n.region=this.parseCvRect2f(),n}parseResultOutput(){let n=new _w,t=0;n.type=this.parseInt(),n.errorCode=this.parseInt(),n.paperCorner=this.parseResultRect(),n.studentId=this.parseTableAnswer(),n.examId=this.parseTableAnswer(),n.answerTable=this.parseTableAnswer(),n.imageWidth=this.parseInt(),n.imageHeight=this.parseInt(),n.imageSize=this.parseInt(),t=this.parseInt();for(let s=0;s<t;s++)n.cropRegion.push(this.parseCropRegion());return n}parseAnswerSheetInput(){let n=new dw;return n.templateType=this.parseInt(),n.imageWidth=this.parseInt(),n.imageHeight=this.parseInt(),n}parseSmallAnswerCircle(){let n=new mw;return n.position=this.parseUchar(),n.x=this.parseUchar(),n.y=this.parseUchar(),n.filledCols=this.parseUchar(),n.rows=this.parseUchar(),n}parseSmallTableAnswer(){let n=new Cr,t=0;n.rows=this.parseUchar(),n.cols=this.parseUchar(),n.radius=this.parseUchar(),t=this.parseInt();for(let s=0;s<t;s++)n.answers.push(this.parseSmallAnswerCircle());return n}parseDrawData(){let n=new pw;return n.studentId=this.parseSmallTableAnswer(),n.examId=this.parseSmallTableAnswer(),n.answerTable=this.parseSmallTableAnswer(),n}}const Gn=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];class an{constructor(){this.bytes=[]}writeUchar(n){return this.bytes.push(n),this}writeUint8Array(n){for(let t=0;t<n.length;t++)this.bytes.push(n[t]);return this}writeArrayBuffer(n){let t=new Uint8Array(n);return this.writeUint8Array(t),this}writeInt(n){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,n,!1),this.writeArrayBuffer(t),this}writeDouble(n){let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,n,!0),this.writeArrayBuffer(t),this}writeString(n){let s=(new TextEncoder).encode(n);return this.writeUint8Array(s),this.writeUchar(0),this}writeBool(n){return this.writeUchar(n?1:0),this}toBase64String(){return function fw(i){let t,n="",s=i.length;for(t=2;t<s;t+=3)n+=Gn[i[t-2]>>2],n+=Gn[(3&i[t-2])<<4|i[t-1]>>4],n+=Gn[(15&i[t-1])<<2|i[t]>>6],n+=Gn[63&i[t]];return t===s+1&&(n+=Gn[i[t-2]>>2],n+=Gn[(3&i[t-2])<<4],n+="=="),t===s&&(n+=Gn[i[t-2]>>2],n+=Gn[(3&i[t-2])<<4|i[t-1]>>4],n+=Gn[(15&i[t-1])<<2],n+="="),n}(new Uint8Array(this.bytes))}writeCvPoint2u(n){return this.writeUchar(n.x),this.writeUchar(n.y),this}writeCvPoint2f(n){return this.writeDouble(n.x),this.writeDouble(n.y),this}writeCvRect2f(n){return this.writeDouble(n.x),this.writeDouble(n.y),this.writeDouble(n.width),this.writeDouble(n.height),this}writeAnswerCircle(n){return this.writeCvPoint2f(n.center),this.writeBool(n.filled),this}writeTableAnswer(n){this.writeInt(n.rows),this.writeInt(n.cols),this.writeInt(n.radius),this.writeInt(n.answers.length);for(let t of n.answers)this.writeAnswerCircle(t);return this}writeResultRect(n){return this.writeCvPoint2f(n.top),this.writeCvPoint2f(n.left),this.writeCvPoint2f(n.bottom),this.writeCvPoint2f(n.right),this}writeCropRegion(n){return this.writeInt(n.id),this.writeCvRect2f(n.region),this}writeResultOutput(n){this.writeInt(n.type),this.writeInt(n.errorCode),this.writeResultRect(n.paperCorner),this.writeTableAnswer(n.studentId),this.writeTableAnswer(n.examId),this.writeTableAnswer(n.answerTable),this.writeInt(n.imageWidth),this.writeInt(n.imageHeight),this.writeInt(n.imageSize),this.writeInt(n.cropRegion.length);for(let t of n.cropRegion)this.writeCropRegion(t);return this}writeAnswerSheetInput(n){return this.writeInt(n.templateType),this.writeInt(n.imageWidth),this.writeInt(n.imageHeight),this}writeSmallAnswerCircle(n){return this.writeUchar(n.position),this.writeUchar(n.x),this.writeUchar(n.y),this.writeUchar(n.filledCols),this.writeUchar(n.rows),this}writeSmallTableAnswer(n){this.writeUchar(n.rows),this.writeUchar(n.cols),this.writeUchar(n.radius),this.writeInt(n.answers.length);for(let t of n.answers)this.writeSmallAnswerCircle(t);return this}writeDrawData(n){return this.writeSmallTableAnswer(n.studentId),this.writeSmallTableAnswer(n.examId),this.writeSmallTableAnswer(n.answerTable),this}}const Zh=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",""];let ef=(()=>{var i;class n{constructor(s,o,a,r){this.commonService=s,this.zipDataService=o,this.sAztAnswerTypeService=a,this.sAztCommonCdnService=r,this.totalPointExam=0}drawAzotaFileToCanvas(s,o,a,r){return new Promise((l,c)=>{var _="",d=this.commonService.willDeleteParseJson(this.zipDataService.decodeContentGzip(s.images??""));d&&d.url&&d.url.includes(".azt")?this.httpGetAsync(this.sAztCommonCdnService.getMyCdn(d.url)).then(p=>{p&&p.length>0?rw.decodeScanOfflineFile(p).then(f=>{let b=this._arrayBufferToBase64(f.getWrappedImage()??new Uint8Array),I=f.getWrappedImageExtension(),y=f.scanOfflineData?.scanResult;if(b){let k=new Image;k.src="data:image/"+I+";base64,"+b,k.crossOrigin="anonymous",k.onload=()=>{var O=document.createElement("canvas");O.width=k.width,O.height=k.height;const j=O.getContext("2d");j?.drawImage(k,0,0,O.width,O.height);let V=s.resultsData?.answerObjs??[];if(y?.examCodeRegion?.circles&&y?.examCodeRegion?.circles.length>0&&this.drawCommonCircles(y?.examCodeRegion?.circles,j),y?.studentCodeRegion?.circles&&y?.studentCodeRegion?.circles.length>0&&this.drawCommonCircles(y?.studentCodeRegion?.circles,j),y?.answerRegion?.circles&&y?.answerRegion?.circles.length>0&&this.drawCircles(y?.answerRegion?.circles,j,V,1,a?.filter(N=>this.sAztAnswerTypeService.isOneChoiceAnswer(N))),y?.answerRegion?.trueFalseCircles&&y?.answerRegion?.trueFalseCircles.length>0&&this.drawCircles(y?.answerRegion?.trueFalseCircles,j,V,5,a?.filter(N=>this.sAztAnswerTypeService.isTrueFalseAnswer(N))),y?.answerRegion?.fillBlankCircles&&y?.answerRegion?.fillBlankCircles.length>0&&this.drawCircles(y?.answerRegion?.fillBlankCircles,j,V,4,a?.filter(N=>this.sAztAnswerTypeService.isFillAnswer(N))),y?.answerRegion?.essayCircles&&y?.answerRegion?.essayCircles.length>0&&o&&this.drawCommonCircles(y?.answerRegion?.essayCircles,j),j&&j.fillText((this.commonService.myTranslateInstant("lang_auto_tong")??"T\u1ed5ng")+" = "+this.totalPointExam.toFixed(2)+" - Version:"+y?.templateType,25,50),y?.answerRegion?.handwrittenAnswers&&y?.answerRegion?.handwrittenAnswers.length>0){let N=y?.answerRegion?.handwrittenAnswers,X="18px";if(j){j.fillStyle="#00ff00",j.font=X+" Comic Sans MS",j.textAlign="center";for(let S=0;S<N.length;S++){let x=N[S];this.fillTextAnswerDrawForFileAzt(x.recognizedText??"",j,V[S],((x.bottomRight.x??0)+(x.topLeft.x??0))/2-3,((x.bottomRight.y??0)+(x.topLeft.y??0))/2+5)}}}_=O.toDataURL("image/jpeg",.9),l({imgUrl:_})}}else l({imgUrl:_})}):l({imgUrl:_})}).catch(p=>{c(p)}):l({imgUrl:_})})}drawScanFileToCanvas(s){return new Promise(o=>{var a="",r=this.commonService.willDeleteParseJson(this.zipDataService.decodeContentGzip(s.images??""));let l=r?this.sAztCommonCdnService.getMyCdn(r.url):"";if(r&&l){let c=new Image;c.src=l,c.crossOrigin="anonymous",c.onload=()=>{var _=document.createElement("canvas");_.width=c.width,_.height=c.height;const d=_.getContext("2d");d?.drawImage(c,0,0,_.width,_.height);var p=s.resultsData?.answerObjs??[],f=this.commonService.willDeleteParseJson(s.resultsData?.pos??"");if("2.0"==f.version)try{let Ct=Uint8Array.from(atob(f.resultFilledPos),ve=>ve.charCodeAt(0)),et=new hw(Ct).parseDrawData(),Ue=et.studentId?.answers??[];for(var b=0;b<Ue.length;b++)this.tickStudentIdAndExamId(Ue[b],d,et.answerTable?.radius??0);let Xe=et.examId?.answers??[];for(b=0;b<Xe.length;b++)this.tickStudentIdAndExamId(Xe[b],d,et.answerTable?.radius??0);let Pe=et.answerTable?.answers??[];for(b=0;b<Pe.length;b++)this.answerPaintedRightOrWrong(Pe[b],d,et.answerTable?.radius??0,p);a=_.toDataURL("image/jpeg",.9),o(a)}catch{this.commonService.snackError("lang_auto_du_lieu_sai_khong_su_ly_duoc_anh_bai_thi_offline"),o("")}else if("3.0"==f.version)try{let Ct=f.answersHandwritten??[],et=(Ct[0].answerRegion.height??0)-20+"px";if(d){d.fillStyle="#00ff00",d.font=et+" Comic Sans MS",d.textAlign="center";for(let Xe=0;Xe<Ct.length;Xe++){let Pe=Ct[Xe],Qe=this.getTextAnswerDraw(Zh[-1==Pe.answer?26:Pe.answer],d,p[Xe]);d.fillText(Qe,(Pe.answerRegion.x??0)+(Pe.answerRegion.width??0)/2,(Pe.answerRegion.y??0)+(Pe.answerRegion.height??0)/2+5)}}a=_.toDataURL("image/jpeg",.9),o(a)}catch{this.commonService.snackError("lang_auto_du_lieu_sai_khong_su_ly_duoc_anh_bai_thi_offline"),o("")}else{var I=f.configurationPos.split("_"),y=f.resultFilledPos.split("_"),k=f.tableAnchorPos.split("_"),O=this.checkWrongOrTrueAnswer(p),j=0;for(b=0;b<I.length;b++)if(1==b||2==b){var V=I[b].split("*");j+=parseInt(V[1],10)}var N=0;for(b=0;b<k.length;b++)if(b>=2){var X={},te={},S=k[b].split("*"),x=S[0].split(":"),C=S[1].split(":"),E={},R=I[b].split("*");E.row=parseInt(R[0],10),E.col=parseInt(R[1],10),E.radius=parseInt(R[2],10),X.x=parseInt(x[0],10),X.y=parseInt(x[1],10),te.x=parseInt(C[0],10),te.y=parseInt(C[1],10);for(var P=(te.y-X.y)/(E.row+1),w=X.y,Be=0;Be<E.row;Be++)if((w+=P)>X.y&&w<te.y){var Ze=N<p.length?this.checkAnswerStudentRight(N,p):0;N++,0!=Ze&&d&&(d.beginPath(),d.arc(X.x+P*Ze,w,E.radius,0,2*Math.PI,!1),d.lineWidth=3,d.strokeStyle="#f3c12c",d.stroke())}}var Rt=0;for(Be=0;Be<y.length;Be++)if("empty"!=y[Be]){var Gt=y[Be].split(":"),st={x:parseInt(Gt[0],10),y:parseInt(Gt[1],10),line:parseInt(Gt[2],10)};Be<j+O.length&&(Be>=j?(d&&(d.beginPath(),d.arc(st.x,st.y,st.line,0,2*Math.PI,!1),d.lineWidth=3,d.strokeStyle=O[Rt],d.stroke()),Rt++):d&&(d.beginPath(),d.arc(st.x,st.y,st.line,0,2*Math.PI,!1),d.lineWidth=3,d.strokeStyle="#00ff00",d.stroke()))}a=_.toDataURL("image/jpeg",.9),o(a)}}}else o("")})}_arrayBufferToBase64(s){for(var o="",a=new Uint8Array(s),r=a.byteLength,l=0;l<r;l++)o+=String.fromCharCode(a[l]);return window.btoa(o)}httpGetAsync(s){return new Promise((o,a)=>{try{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType="arraybuffer",r.onload=l=>{if(200===r.status||304===r.status){const c=r.response;if(c){const _=new Uint8Array(c);o(_)}else o(new Uint8Array)}else o(new Uint8Array)},r.onerror=l=>{a(new Error("lang_core_cant_loading_url"))},r.send(null)}catch(r){a(r)}})}fillTextAnswerDrawForFileAzt(s,o,a,r,l){let c="";a&&(s?a.rightAnswer&&"ESSAY"!=a.content&&a.rightAnswer!=s?(o.fillStyle="#f3c12c",o.fillText("["+a.rightAnswer+"]",r+15,l),o.fillStyle="red",c=s+"-",r-=10):a.rightAnswer&&"ESSAY"!=a.content?(o.fillStyle="#00ff00",c+=s):(o.fillStyle="red",c+=s):(o.fillStyle="#f3c12c",c+=a.rightAnswer)),o.fillText(c,r,l)}drawCommonCircles(s,o){s.length>0&&s.forEach(a=>{if(a.filled){let r=a.center.x,l=a.center.y;o&&(o.beginPath(),o.arc(r,l,a.radius+1,0,2*Math.PI,!1),o.lineWidth=2,o.strokeStyle="#00ff00",o.stroke())}})}drawCircles(s,o,a,r,l){let c=[],_=[],d=["A","B","C","D"],p=0;if(a.length>0){let y=a.filter(j=>1==j.answerType||2==j.answerType).length??0,k=a.filter(j=>5==j.answerType).length??0,O=a.filter(j=>4==j.answerType).length??0;p=1==r?y:4==r?O:k;for(let j=0;j<a.length;j++){let V="";if(this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:a[j].answerType})){let N=a[j].rightAnswer?.split("|")??[];for(let X=0;X<d.length;X++)V=j+1-y+""+d[X]+"F",N.includes(d[X])&&(V=j+1-y+""+d[X]+"T"),this.commonService.isExistInArray(c,V)||c.push(V)}else this.sAztAnswerTypeService.isFillAnswer({answerType:a[j].answerType})?(V=j+1-y-k+"_"+a[j].rightAnswer,this.commonService.isExistInArray(c,V)||c.push(V)):this.sAztAnswerTypeService.isOneChoiceAnswer({answerType:a[j].answerType})&&(V=j+1+""+a[j].rightAnswer,this.commonService.isExistInArray(c,V)||c.push(V));this.sAztAnswerTypeService.isEssayAnswer({answerType:a[j].answerType})&&_.push(j+1)}}let I=1==r?1:5==r?2:4==r?3:1;if(o){o.fillStyle="#ff0024",o.font="25px Comic Sans MS";let y=0,k=0,O=0,j="P-"+(1==I?"TN":2==I?"\u0110/S":"\u0110T")+": ",V=!1;(l??[]).forEach(N=>{let X=a.find(te=>N.id==te.questionId);if((this.sAztAnswerTypeService.isOneChoiceAnswer(N)||this.sAztAnswerTypeService.isFillAnswer(N))&&(y++,X?.isRight&&(k+=N.testedScore??0,O++)),this.sAztAnswerTypeService.isTrueFalseAnswer(N)){k+=N.testedScore??0;let te=0,S="";for(let x=0;x<4;x++)X?.rightAnswers?.includes(Zh[x])?S+="T":S+="F";if(X?.content)for(let x=0;x<4;x++)X.content[x]==S[x]&&te++;V=!0,j+=" "+te+"/4;"}}),this.totalPointExam+=k,j+=V?" = "+k.toFixed(2):O+"/"+y+" = "+k.toFixed(2),this.drawWrappedText(o,j,25,30+25*((2==I?3:3==I?2:I)+1),600,25)}s.forEach(y=>{let k=0;k=this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:r})?Number(y.label.substring(0,y.label.length-2)):this.sAztAnswerTypeService.isFillAnswer({answerType:r})?Number(y.label.substring(0,y.label.indexOf("_"))):Number(y.label.substring(0,y.label.length-1));let O="";if(0==c.length)O="#00ff00";else if(this.sAztAnswerTypeService.isFillAnswer({answerType:r})){let j=y.label.substring(0,y.label.indexOf("_")+1),V=c.find(N=>N.includes(j));if(V){let N=V?.split("_"),X=y.label.split("_");if(y.filled&&(O="red"),N[0]==X[0])if("-"==X[2]&&N[1].includes("-"))0==Number(X[1])&&(O=y.filled?"#00ff00":"#f3c12c");else if(","==X[2]&&N[1].includes(",")){let te=N[1].indexOf(",");Number(X[1])==te&&(O=y.filled?"#00ff00":"#f3c12c")}else"-"!=X[2]&&","!=X[2]&&N[1][Number(X[1])]==X[2]&&(O=y.filled?"#00ff00":"#f3c12c")}}else this.commonService.isExistInArray(c,y.label)?O=y.filled?"#00ff00":"#f3c12c":y.filled&&(O="red");if(O&&k<=p&&!this.commonService.isExistInArray(_,k)){let j=y.center.x,V=y.center.y;o&&(o.beginPath(),o.arc(j,V,y.radius+1,0,2*Math.PI,!1),o.lineWidth=2,o.strokeStyle=O,o.stroke())}})}drawWrappedText(s,o,a,r,l,c){const _=o.split(" ");let d="";_.forEach(p=>{const f=d+p+" ";s.measureText(f).width>l&&""!==d?(s.fillText(d,a,r),d=p+" ",r+=c):d=f}),s.fillText(d,a,r)}checkAnswerStudentRight(s,o){var a=0;return o[s]&&""!=o[s].rightAnswer&&0==o[s].isRight&&(a="A"==o[s].rightAnswer?1:"B"==o[s].rightAnswer?2:"C"==o[s].rightAnswer?3:"D"==o[s].rightAnswer?4:"E"==o[s].rightAnswer?5:"F"==o[s].rightAnswer?6:"G"==o[s].rightAnswer?7:"H"==o[s].rightAnswer?8:0),a}checkWrongOrTrueAnswer(s){for(var o=[],a=0;a<s.length;a++)""!=s[a].content&&(1==s[a].isRight?o.push("#00ff00"):0==s[a].isRight&&o.push("red"));return o}tickStudentIdAndExamId(s,o,a){var r=256*Math.floor((s.position??0)/16)+s.x,l=(s.position??0)%16*256+s.y;(s.filledCols??0)>=128&&o&&(o.beginPath(),o.arc(r,l,a,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle="#00ff00",o.stroke())}answerPaintedRightOrWrong(s,o,a,r){var l=256*Math.floor((s.position??0)/16)+s.x,c=(s.position??0)%16*256+s.y,_=s.rows??0,p="#fff0";r.length>_&&((s.filledCols??0)>=128?p=1==r[_].isRight?"#00ff00":"red":(s.filledCols??0)%128+1==this.checkAnswerStudentRight(_,r)&&(p="#f3c12c"),o&&(o.beginPath(),o.arc(l,c,a,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle=p,o.stroke()))}getTextAnswerDraw(s,o,a){let r="";return a&&(s?a.isRight?(o.fillStyle="#00ff00",r+=s):(o.fillStyle="red",r=s+" - ["+a.rightAnswer+"]"):(o.fillStyle="#f3c12c",r+=a.rightAnswer)),r}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(Gs.j),e.KVO(on._),e.KVO(os.c))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();const gw=i=>({flex:i}),Tw=i=>({"mr-2":i}),bw=()=>({"flex-none mr-1":!0});function xw(i,n){1&i&&(e.qex(0),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_test_review_error_get_url_img")))}function vw(i,n){1&i&&(e.j41(0,"div",14)(1,"span",15),e.nrm(2,"azt-loading-ui"),e.k0s()())}function yw(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"label",19),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"input",20,1),e.nI1(8,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(7),a=e.XpG(2);return e.Njj(a.setStudentCode(o))}),e.k0s()(),e.j41(9,"div",21)(10,"label",22),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"input",23,2),e.nI1(15,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(14),a=e.XpG(2);return e.Njj(a.setExamCode(o))}),e.k0s()()(),e.j41(16,"h3",24),e.nrm(17,"lucide-icon",25),e.j41(18,"span",26),e.EFF(19,"Click \u1ea3nh \u0111\u1ec3 \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed c\u1ea7n s\u1eeda"),e.k0s()(),e.j41(20,"div",27)(21,"div",28,3)(23,"img",29),e.bIt("click",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.clickOnImage(o))}),e.k0s()()()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(20,gw,!t.isMobileDevice)),e.R7$(),e.Y8G("ngClass",e.eq3(22,Tw,!t.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(5,12,"lang_auto_so_bao_danh")),e.R7$(2),e.FS9("placeholder",e.bMT(8,14,"lang_core_nhap_so_ba_danh")),e.Y8G("formControl",t.studentCode),e.R7$(5),e.JRh(e.bMT(12,16,"lang_auto_ma_de")),e.R7$(2),e.FS9("placeholder",e.bMT(15,18,"lang_core_nhap_ma_de")),e.Y8G("formControl",t.examCode),e.R7$(4),e.Y8G("ngClass",e.lJ4(24,bw)),e.R7$(6),e.Aen(t.isMobileWebView?"width: 100% !important;":"height: auto !important;"),e.Y8G("src",t.fileScanUrl,e.B4B)}}function Sw(i,n){if(1&i&&e.DNE(0,vw,3,0,"div",12)(1,yw,24,25,"div",13),2&i){const t=e.XpG();e.Y8G("ngIf",t.loadingScanUrl),e.R7$(),e.Y8G("ngIf",!t.loadingScanUrl)}}function ww(i,n){1&i&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}let Iw=(()=>{var i;class n extends Mt._{setStudentCode(s){s.value=s.value.replace(/\D/g,""),s.value.length>this.myEnvironment.maxStudentCodeLength&&(s.value=s.value.slice(0,-1)),this.processData.setStudentCode(s.value),this.processDrawImage()}setExamCode(s){s.value=s.value.replace(/\D/g,""),s.value.length>this.myEnvironment.maxExamCodeLength&&(s.value=s.value.slice(0,-1)),this.processData.setExamCode(s.value),this.processDrawImage()}confirmEdit(){this.initStatusObj(),this.processor.uploadToServer().then(s=>{if(!s.success){let o=s.errorMessage;return"azt_lang_core_code_exam"==o&&(o=this.commonService.myTranslateInstant("lang_core_offline_exam_not_found_offline_mix_question_hash_id")??"M\xe3 \u0111\u1ec1 thi kh\xf4ng t\u1ed3n t\u1ea1i"),this.errorStatusObj(o??"lang_core_invalid_data",!0)}this.successStatusObj("lang_auto_luu_thanh_cong",!0),this.dialogRef.close(!0)})}btnCloseDialog(){this.dialogRef.close(!1)}loadScriptHandleImage(){var s=this;this.commonService.loadAnswerSheetJs().then(()=>{var o=this.userService.getUserObj();window.azotaScanAnswerSheet.examResultProcessor(o.rememberToken,"https://"+tt.c.base_embed_link,this.data.resultId,o.id).then(function(){var a=(0,W.A)(function*(r){s.processor=r,s.initData()});return function(r){return a.apply(this,arguments)}}()).catch(()=>{this.errorStatusObj("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai",!0)})}).catch(o=>{this.errorStatusObj("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai",!0)})}clickOnImage(s){const o=s.target,a=o.getBoundingClientRect();this.processData.clickToImage(o.naturalWidth/a.width*(s.clientX-a.left),o.naturalHeight/a.height*(s.clientY-a.top)),this.setFormCode(),this.processDrawImage()}drawCircleImg(s,o){s&&s.length>0&&(this.circleRadius=s[0].radius,s.forEach(a=>{if(a.filled&&o){let r=a.center.x,l=a.center.y;o.beginPath(),o.arc(r,l,a.radius+1,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle="red",o.stroke()}}))}processDrawImage(){let s=this.drawScanExamService._arrayBufferToBase64(this.processData.getWrappedImage()??new Uint8Array),o=this.processData.getWrappedImageExtension(),a=this.processData.getFilledCircles();if(this.imgSize=this.processor.getImageSize(),!s)return this.loadingScanUrl=!1,void(this.fileScanUrl="");let r=new Image;r.src="data:image/"+o+";base64,"+s,r.crossOrigin="anonymous";var l=document.createElement("canvas");l.width=this.imgSize.width,l.height=this.imgSize.height;const c=l.getContext("2d");r.onload=()=>{c?.drawImage(r,0,0,l.width,l.height),this.drawCircleImg(a,c),this.fileScanUrl=l.toDataURL("image/jpeg",.9),this.loadingScanUrl=!1}}setFormCode(){this.studentCode.setValue(this.processData.scanOfflineData.scanResult.getStudentCode()??""),this.examCode.setValue(this.processData.scanOfflineData.scanResult.getSubExamCode()??"")}initData(){this.data.resultId&&(this.loadingScanUrl=!0,this.processData=this.processor.getData(),this.setFormCode(),this.processDrawImage())}ngOnInit(){super.ngOnInit(),this.loadScriptHandleImage()}constructor(s,o,a,r){super(r,a),this.userService=s,this.drawScanExamService=o,this.dialogRef=a,this.loadingScanUrl=!0,this.fileScanUrl="",this.circleRadius=0,this.imgSize={width:0,height:0},this.studentCode=new g.MJ("",{nonNullable:!0}),this.examCode=new g.MJ("",{nonNullable:!0})}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(pn.R),e.rXU(ef),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-edit-scan-file-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:10,consts:[["showImgScan",""],["elementStudentCode",""],["elementExamCode",""],["imageHolding",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-32","btn-primary","items-center",3,"click","disabled"],["class","inline-block mr-2",4,"ngIf"],[2,"vertical-align","midle"],["class","p-5 flex justify-center items-center",4,"ngIf"],["class","p-5",4,"ngIf"],[1,"p-5","flex","justify-center","items-center"],[1,"w-5","h-5","inline-block","mr-2"],[1,"p-5"],[3,"ngClass"],[1,"w-full",3,"ngClass"],["for","codeStudent",1,"form-label","text-md","font-semibold","m-0"],["type","text","id","codeStudent",1,"form-control",3,"input","formControl","placeholder"],[1,"w-full"],["for","codeExam",1,"form-label","text-md","font-semibold","m-0"],["type","text","id","codeExam",1,"form-control",3,"input","formControl","placeholder"],[1,"mt-2","text-md","font-semibold","flex","text-slate-500","items-center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"text-center","mx-auto","mt-1",2,"height","calc(var(--vh, 1vh) * 100 - 300px)","overflow-y","auto"],["id","image-holding"],["id","img-container","alt","img",3,"click","src"],[1,"inline-block","mr-2"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",4)(1,"div",5),e.DNE(2,xw,4,3,"ng-container",6)(3,Sw,2,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"button",9),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmEdit())}),e.DNE(10,ww,2,0,"span",10),e.j41(11,"span",11),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()()}if(2&s){const a=e.sdS(4);e.R7$(2),e.Y8G("ngIf",!o.loadingScanUrl&&!o.fileScanUrl)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(8,6,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("disabled",o.statusObj.loading),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(2),e.JRh(e.bMT(13,8,"lang_auto_luu"))}},dependencies:[wt.R,v.MD,v.YU,v.bT,g.X1,g.me,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const Cw=()=>({"text-slate-800":!0}),kw=()=>({"text-danger":!0}),nf=i=>({"text-success":i});function Ew(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",18)(1,"a",19),e.nI1(2,"mytranslate"),e.bIt("click",function(){let o;e.eBV(t);const a=e.XpG(2);return e.Njj(a.openEditScanFile(null!==(o=null==a.examObj?null:a.examObj.hashId)&&void 0!==o?o:"",a.examResultIdParam))}),e.nrm(3,"lucide-icon",20),e.k0s()()}2&i&&(e.R7$(),e.Y8G("matTooltip",e.bMT(2,2,"lang_auto_sua")),e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Cw)))}function Aw(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",21)(1,"a",22),e.nI1(2,"mytranslate"),e.bIt("click",function(){let o;e.eBV(t);const a=e.XpG(2);return e.Njj(a.deleteOfflineExamResultObj(null!==(o=null==a.examObj?null:a.examObj.hashId)&&void 0!==o?o:"",a.examResultIdParam))}),e.nrm(3,"lucide-icon",23),e.k0s()()}2&i&&(e.R7$(),e.Y8G("matTooltip",e.bMT(2,2,"lang_auto_xoa")),e.R7$(2),e.Y8G("ngClass",e.lJ4(4,kw)))}function Ow(i,n){1&i&&(e.j41(0,"span",24),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_anh_cham"),":"))}function Rw(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_luu_trong_app_mobile")))}function Fw(i,n){1&i&&(e.qex(0),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_test_review_error_get_url_img")))}function jw(i,n){1&i&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}function zw(i,n){if(1&i&&e.nrm(0,"img",31),2&i){const t=e.XpG(4);e.Aen(t.isMobileWebView?"width: 100% !important;":"height: auto !important;"),e.Y8G("src",t.fileScanUrl,e.B4B)}}function Mw(i,n){if(1&i){const t=e.RV6();e.j41(0,"a",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.onShowFile(o.fileScanUrl))}),e.DNE(1,jw,2,0,"span",28)(2,zw,1,3,"img",29),e.k0s()}if(2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.loadingScanUrl),e.R7$(),e.Y8G("ngIf",!t.loadingScanUrl)}}function Dw(i,n){if(1&i&&(e.j41(0,"div",25),e.DNE(1,Fw,4,3,"ng-container",26)(2,Mw,3,2,"ng-template",null,2,e.C5r),e.k0s()),2&i){const t=e.sdS(3),s=e.XpG(2);e.R7$(),e.Y8G("ngIf",!s.loadingScanUrl&&!s.fileScanUrl)("ngIfElse",t)}}function Gw(i,n){if(1&i&&(e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"h3",7)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.DNE(7,Ew,4,5,"div",8)(8,Aw,4,5,"div",9),e.k0s()(),e.j41(9,"div",10)(10,"div",6)(11,"span",11),e.eu8(12,12),e.k0s(),e.j41(13,"span",13),e.nI1(14,"mytranslate"),e.eu8(15,12),e.k0s()(),e.j41(16,"div",14),e.DNE(17,Ow,3,3,"span",15)(18,Rw,3,3,"span",16),e.k0s(),e.DNE(19,Dw,4,2,"div",17),e.k0s()()),2&i){const t=e.XpG(),s=e.sdS(2),o=e.sdS(4);e.R7$(5),e.JRh(e.bMT(6,9,"lang_auto_thi_offline")),e.R7$(2),e.Y8G("ngIf","teacher"==t.currentScreen),e.R7$(),e.Y8G("ngIf",t.isDeletableExamResultObj),e.R7$(4),e.Y8G("ngTemplateOutlet",s),e.R7$(),e.FS9("matTooltip",e.bMT(14,11,"lang_auto_so_bao_danh")),e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.checkHttpLinkImg),e.R7$(),e.Y8G("ngIf",t.checkHttpLinkImg)}}function Pw(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"mytranslate"),e.j41(2,"span",32),e.EFF(3),e.nI1(4,"checkFormatOfflineExamHashIdToNumber"),e.k0s()),2&i){let t;const s=e.XpG();e.SpI(" ",e.bMT(1,3,"lang_auto_ma_de_thi"),":\xa0 "),e.R7$(2),e.Y8G("ngClass",e.eq3(8,nf,!(null!=s.offlineMarkObj&&s.offlineMarkObj.isErrorForOfflineMixQuestionHashId))),e.R7$(),e.JRh(e.i5U(4,5,null!==(t=null==s.offlineMixQuestionObj?null:s.offlineMixQuestionObj.hashId)&&void 0!==t?t:0,null==s.offlineMarkObj?null:s.offlineMarkObj.templateType))}}function Nw(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"mytranslate"),e.j41(2,"span",32),e.EFF(3),e.nI1(4,"checkFormatStudentCodeToNumber"),e.k0s()),2&i){let t;const s=e.XpG();e.SpI(" ",e.bMT(1,3,"lang_testbank_offline_student_identification"),":\xa0 "),e.R7$(2),e.Y8G("ngClass",e.eq3(8,nf,!(null!=s.offlineMarkObj&&s.offlineMarkObj.isErrorForStudentCode))),e.R7$(),e.JRh(e.i5U(4,5,(null!==(t=null==s.offlineMarkObj?null:s.offlineMarkObj.studentCode)&&void 0!==t?t:0)<0?0:null==s.offlineMarkObj?null:s.offlineMarkObj.studentCode,null==s.offlineMarkObj?null:s.offlineMarkObj.templateType))}}let Vw=(()=>{var i;class n extends Z.H{checkAzotaFile(s){return!(!s||!s.includes(".azt"))}checkHttpUrl(s){return!(!s||!/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(s))}openEditScanFile(s,o){o&&this.sAztDialogService.open(Iw,{data:{examHashId:s,resultId:o,userId:Number(this.userIdParam)},width:"750px",restoreFocus:!1}).afterClosed().subscribe(r=>{r&&window.location.reload()})}deleteOfflineExamResultObj(s,o){o&&this.sAztDialogService.open(aw,{data:{examHashId:s,examResultIds:[o],examResults:[]},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.goBackWhenDeleteExamResult()})}goBackWhenDeleteExamResult(){this.myNavigationBySpecialQueryString(this.backToLink?this.backToLink:"/admin/testbank/exam-results-list/"+(this.examObj?this.examObj.categoryId:0)+"/"+this.examIdParam+"/0")}onShowFile(s){this.sAztDialogService.open(US.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{name:"",mimes:"image/jpeg",url:s,index:0}},restoreFocus:!1})}checkErrorForStudentAndExamCode(){this.examCodeError=!this.offlineMixQuestionObj&&(this.offlineMarkObj?.rawOfflineMixquestionId??0)>0,this.studentCodeError=(this.offlineMarkObj?.studentId??0)<=0&&(this.offlineMarkObj?.rawStudentCode??0)>0}initData(){if(!this.offlineMarkObj)return;let s=this.zipDataService.decodeContentGzip(this.offlineMarkObj?.images??""),o=this.castJsonToObj(s);this.checkHttpLinkImg=this.checkHttpUrl(o?.url),this.loadingScanUrl=!0,this.checkAzotaFile(o?.url)?this.drawScanExamService.drawAzotaFileToCanvas(this.offlineMarkObj,this.essayExam,this.questionObjs,this.essayMark).then(a=>{a.imgUrl?this.fileScanUrl=a.imgUrl:this.checkHttpLinkImg=!0,this.drawScanExamService.totalPointExam=0,this.loadingScanUrl=!1}).catch(a=>{this.loadingScanUrl=!1}):this.drawScanExamService.drawScanFileToCanvas(this.offlineMarkObj).then(a=>{a?this.fileScanUrl=a:this.checkHttpLinkImg=!0,this.loadingScanUrl=!1}).catch(a=>{this.loadingScanUrl=!1})}ngOnChanges(){this.initData(),this.checkErrorForStudentAndExamCode()}ngOnInit(){super.ngOnInit()}constructor(s,o,a){super(),this.sAztDialogService=s,this.zipDataService=o,this.drawScanExamService=a,this.backToLink="",this.essayExam=!1,this.isDeletableExamResultObj=!1,this.fileScanUrl="",this.loadingScanUrl=!1,this.checkHttpLinkImg=!1,this.studentCodeError=!1,this.examCodeError=!1}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Mn.i),e.rXU(Gs.j),e.rXU(ef))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-testbank-show-offline-result"]],inputs:{backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",essayExam:"essayExam",currentScreen:"currentScreen",examObj:"examObj",offlineMarkObj:"offlineMarkObj",offlineMixQuestionObj:"offlineMixQuestionObj",isDeletableExamResultObj:"isDeletableExamResultObj",questionObjs:"questionObjs",essayMark:"essayMark"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:5,vars:1,consts:[["viewExamCodeTpl",""],["viewStudentCodeTpl",""],["showImgScan",""],["class","info-exam-offline mt-3 mb-3",4,"ngIf"],[1,"info-exam-offline","mt-3","mb-3"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md","mr-auto"],["class","mx-1 items-center",4,"ngIf"],["class","mx-1 items-center mr-0",4,"ngIf"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"mr-auto"],[3,"ngTemplateOutlet"],[1,"mr-4",3,"matTooltip"],[1,"items-center","mt-2"],["class","mr-2",4,"ngIf"],[4,"ngIf"],["class","text-center mx-auto mt-1",4,"ngIf"],[1,"mx-1","items-center"],[1,"text-slate-800",3,"click","matTooltip"],["name","file-pen-line","size","18",3,"ngClass"],[1,"mx-1","items-center","mr-0"],["azt-track-service","show-offline-result-i96BCircs2",1,"text-danger",3,"click","matTooltip"],["name","trash-2","size","18",3,"ngClass"],[1,"mr-2"],[1,"text-center","mx-auto","mt-1"],[4,"ngIf","ngIfElse"],["azt-track-service","show-offline-result-tsC_51kcf2",3,"click"],["class","w-5 h-5 inline-block mr-2",4,"ngIf"],["alt","img",3,"src","style",4,"ngIf"],[1,"w-5","h-5","inline-block","mr-2"],["alt","img",3,"src"],[3,"ngClass"]],template:function(s,o){1&s&&e.DNE(0,Gw,20,13,"div",3)(1,Pw,5,10,"ng-template",null,0,e.C5r)(3,Nw,5,10,"ng-template",null,1,e.C5r),2&s&&e.Y8G("ngIf",o.offlineMarkObj)},dependencies:[wt.R,v.MD,v.YU,v.bT,v.T3,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,H.L,z.Ps,z.OK,U.Id,q.k],encapsulation:2}),n})();var Lw=A(56510),sf=A(61394),of=A(31413),af=A(13310),Bw=A(13946),rf=A(82274);const $w=["mnoteContainer"],Qw=i=>({display:i}),qw=i=>({border:i}),Yw=()=>({"mr-1":!0}),lf=i=>({"is-invalid":i});function Uw(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function Xw(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function Ww(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function Hw(i,n){if(1&i&&(e.j41(0,"div",18),e.DNE(1,Uw,3,3,"span",19)(2,Xw,3,3,"span",19)(3,Ww,3,3,"span",19),e.k0s()),2&i){const t=e.XpG().index,s=e.XpG();e.R7$(),e.Y8G("ngIf",null==s.form.controls["cau"+t].errors?null:s.form.controls["cau"+t].errors.min),e.R7$(),e.Y8G("ngIf",null==s.form.controls["cau"+t].errors?null:s.form.controls["cau"+t].errors.max),e.R7$(),e.Y8G("ngIf",null==s.form.controls["cau"+t].errors?null:s.form.controls["cau"+t].errors.pattern)}}function Jw(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"lucide-icon",13),e.nI1(3,"mytranslate"),e.bIt("click",function(o){const a=e.eBV(t).index,r=e.XpG();return e.Njj(r.toggleVisibility(o,a))}),e.k0s(),e.j41(4,"span",14),e.EFF(5),e.nI1(6,"mytranslate"),e.j41(7,"span",15),e.nI1(8,"mytranslate"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.nrm(11,"input",16),e.nI1(12,"mytranslate"),e.k0s(),e.DNE(13,Hw,4,3,"div",17),e.k0s()}if(2&i){let t;const s=n.$implicit,o=n.index,a=e.XpG();e.Y8G("ngStyle",e.eq3(25,qw,o==a.questions.length-1?"none":"")),e.R7$(2),e.FS9("matTooltip",e.bMT(3,15,"lang_auto_anhien_phan_bai_lam_cua_cau_hoi_nay")),e.Y8G("ngClass",e.lJ4(27,Yw)),e.R7$(3),e.Lme(" ",e.bMT(6,17,"lang_auto_cau")," ",(null!==(t=s.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(8,19,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",s.essMaxPoint," ",e.bMT(10,21,"lang_auto_diem_brackets"),""),e.R7$(2),e.FS9("placeholder",e.bMT(12,23,"lang_auto_nhap_diem")),e.Mz_("formControlName","cau",o,""),e.Y8G("readonly",!a.showForTeacher)("decimal",!0)("ngClass",e.eq3(28,lf,a.form.controls["cau"+o]&&a.form.controls["cau"+o].invalid)),e.R7$(2),e.Y8G("ngIf",a.form.controls["cau"+o].errors)}}function Kw(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",20)(1,"button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.getMnoteJsonData())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.form.invalid),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}function Zw(i,n){if(1&i&&e.nrm(0,"azt-question-standalone-for-student-at-review-page",27),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("examConfig",o.examConfig)("questionObj",s)("curQuestionIndex",null!==(t=s.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("currentTab","essay_tab")}}function eI(i,n){if(1&i&&e.nrm(0,"azt-question-standalone-for-teacher-at-review-page",28),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("questionObj",s)("curQuestionIndex",null!==(t=s.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("orgExamObjs",o.orgExamObjs)("currentTab","essay_tab")}}function tI(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function nI(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function sI(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function iI(i,n){if(1&i&&(e.j41(0,"div",18),e.DNE(1,tI,3,3,"span",19)(2,nI,3,3,"span",19)(3,sI,3,3,"span",19),e.k0s()),2&i){const t=e.XpG(2).index,s=e.XpG();e.R7$(),e.Y8G("ngIf",null==s.form.controls["cau"+t].errors?null:s.form.controls["cau"+t].errors.min),e.R7$(),e.Y8G("ngIf",null==s.form.controls["cau"+t].errors?null:s.form.controls["cau"+t].errors.max),e.R7$(),e.Y8G("ngIf",null==s.form.controls["cau"+t].errors?null:s.form.controls["cau"+t].errors.pattern)}}function oI(i,n){if(1&i&&(e.j41(0,"div",29)(1,"form",30)(2,"label",31),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",15),e.nI1(6,"mytranslate"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.EFF(9," : "),e.k0s(),e.nrm(10,"input",32),e.nI1(11,"mytranslate"),e.DNE(12,iI,4,3,"div",17),e.k0s()()),2&i){let t;const s=e.XpG(),o=s.$implicit,a=s.index,r=e.XpG();e.R7$(),e.Y8G("formGroup",r.form),e.R7$(),e.FS9("for","cau_"+a),e.R7$(),e.Lme(" ",e.bMT(4,15,"lang_auto_nhap_diem_cau")," ",(null!==(t=o.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(6,17,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",o.essMaxPoint," ",e.bMT(8,19,"lang_auto_diem_brackets"),""),e.R7$(3),e.FS9("placeholder",e.bMT(11,21,"lang_auto_nhap_diem")),e.Mz_("formControlName","cau",a,""),e.Y8G("readonly",!r.showForTeacher)("ngClass",e.eq3(23,lf,r.form.controls["cau"+a]&&r.form.controls["cau"+a].invalid))("id","cau_"+a)("decimal",!0),e.R7$(2),e.Y8G("ngIf",r.form.controls["cau"+a].errors)}}function aI(i,n){if(1&i&&(e.j41(0,"div",22)(1,"div",23),e.DNE(2,Zw,1,7,"azt-question-standalone-for-student-at-review-page",24)(3,eI,1,7,"azt-question-standalone-for-teacher-at-review-page",25)(4,oI,13,25,"div",26),e.k0s()()),2&i){const t=n.index,s=e.XpG();e.R7$(),e.Mz_("id","q_",t,""),e.R7$(),e.Y8G("ngIf",!s.showForTeacher),e.R7$(),e.Y8G("ngIf",s.showForTeacher),e.R7$(),e.Y8G("ngIf",s.showForTeacher)}}function rI(i,n){1&i&&(e.j41(0,"div",33)(1,"b"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_anh_bai_lam_tu_luan"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,"lang_auto_khong_co_du_lieu_anh_bai_lam_tu_luan_cua_thi_sinh"),"\n"))}function lI(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",34)(1,"button",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.getMnoteJsonData())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.form.invalid),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}let cI=(()=>{var i;class n extends Z.H{parseValue(s){return this.commonService.willDeleteParseJson(this.examResultObj.essayResult??"{}")[s]}getMaxPoint(s){var o=0;for(let a=0;a<this.questions.length;a++)if(this.questions[a].id==s){o=this.questions[a].scorePerQuestion??0;break}return o}toggleVisibility(s,o){var a=s.target,r=document.getElementById(`q_${o}`);r&&("block"==r?.style.display?(r.style.display="none",a&&(a.textContent="visibility_off")):(r.style.display="block",a&&(a.textContent="visibility")))}isValidPoint(){let s=0;var o=this.form.value;for(var a in o){var r=Number(a.substring(3));o[a]>this.maxPointPerQuestion[r]&&s++}return!(s>0)}validateForm(s,o,a,r){let l="";this.form.get("cau"+r)?.valueChanges.pipe((0,Bw.J)()).subscribe(([c,_])=>{if(l="string"==typeof _&&_.includes(",")?_.replace(",","."):_,isNaN(+l))this.showErrorSnack("lang_auto_yeu_cau_chi_nhap_so"),this.form.controls["cau"+r].setValue(o);else{let d=parseFloat(l);d>a&&this.showErrorSnack("lang_auto_khong_nhap_qua_so_diem_toi_da_cua_cau_hoi"),d<0&&this.showErrorSnack("lang_auto_ban_dang_nhap_nho_hon_0")}})}uploadBase64ToCDN(s,o){var a=(0,Vh.q)(s);this.apiUploadService.commonUploadForMarkResult(a,`essay_note_${o}_${this.resultID}.png`,"image/png").subscribe(r=>{r.type!=yh.hv.UploadProgress&&(1==r.success?(this.mnoteJsonData.pages[o].draw=r.data?.url,this.pagesCount--,0==this.pagesCount&&this.remark(JSON.stringify(this.mnoteJsonData))):this.commonService.snackError("lang_auto_luu_du_lieu_cham_bai_khong_thanh_cong"))})}uploadAll(s){this.pagesCount=0;for(let o=0;o<s.length;o++)s[o].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(JSON.stringify(this.mnoteJsonData));else for(let o=0;o<s.length;o++)s[o].draw&&this.uploadBase64ToCDN(s[o].draw,o)}sendDataToIframe(){const s=document.getElementById("mNote"),o=s?s.contentWindow:null;if(null!==o)if(this.examResultObj.confirmedAt&&this.examResultObj.result){if(this.examResultObj.result){var a=this.commonService.willDeleteParseJson(this.examResultObj.result);if(null!=a){for(let l=0;l<a.pages.length;l++)a.pages[l].backgroundImage&&(a.pages[l].backgroundImage=this.sAztCommonCdnService.getMyCdn(a.pages[l].backgroundImage)),a.pages[l].draw&&(a.pages[l].draw=this.sAztCommonCdnService.getMyCdn(a.pages[l].draw));a=JSON.stringify(a),this.examResultObj.result=a}}var r=this.checkMapBGImageWithFileLength(this.examResultObj.result??"{}");if(this.jsonData=this.commonService.willDeleteParseJson(r?this.examResultObj.result??"{}":this.addBGImageByFileUrl(this.examResultObj.result??"{}")),this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let l=0;l<this.jsonData.pages.length;l++)this.jsonData.pages[l].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[l].backgroundImage=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[l].backgroundImage)),this.jsonData.pages[l].hasOwnProperty("draw")&&(this.jsonData.pages[l].draw=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[l].draw));this.jsonData&&(this.jsonData.cmd="initMNote",this.jsonData.mode=this.iframeViewMode,this.jsonData.context="exam"),o.postMessage(this.jsonData,"*")}else{let l=[];this.files.forEach(_=>{var d=this.sAztCommonCdnService.getMyCdn(_.url);d&&l.push({backgroundImage:d})}),o.postMessage({cmd:"initMNote",pages:l,mode:this.showForTeacher?"edit":"view",context:"exam"},"*"),this.dataMarkNote.answer_obj={id:0,homeworkId:0,studentId:0,point:0,files:l}}}checkMapBGImageWithFileLength(s){var o=this.commonService.willDeleteParseJson(s);let a=!1;if(0==this.files.length)a=!0;else if(this.files.length>0&&o&&o.pages&&this.files.length==o.pages.length){let r=0;this.files.forEach((l,c)=>{o.pages[c]&&o.pages[c].backgroundImage&&o.pages[c].backgroundImage.indexOf(l.path)>-1&&r++}),r==this.files.length&&(a=!0)}return a}addBGImageByFileUrl(s){var o=this.commonService.willDeleteParseJson(s);return this.files.forEach((a,r)=>{let l=!1;if(o&&o.pages){for(var c=0;c<o.pages.length;c++)if(o.pages[c]&&o.pages[c].backgroundImage&&o.pages[c].backgroundImage.indexOf(a.path)>-1){l=!0;break}!1===l&&(o.pages[r]&&o.pages[r].id==r?o.pages[r].backgroundImage=this.sAztCommonCdnService.getMyCdn(a.url??""):o.pages.splice(r,0,{backgroundImage:this.sAztCommonCdnService.getMyCdn(a.url??"")}))}}),JSON.stringify(o)}getMnoteJsonData(){if(this.permissionService.hasMarkPointPermission("exam",this.examObj)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",this.examObj)){if(!this.isValidPoint())return void this.showErrorSnack("lang_auto_cham_diem_vuot_qua_so_diem_toi_da_vui_long_kiem_tra_lai");{let s=!1;for(const o in this.form.value)""!==this.form.value[o]&&(s=!0);if(!s)return void this.showErrorSnack("lang_core_vui_long_nhap_diem_tu_luan");for(const o in this.form.value)""===this.form.value[o]&&(this.form.value[o]=0,this.form.controls[o].setValue(0));if(this.files&&this.files.length>0){const o=document.getElementById("mNote"),a=o?o.contentWindow:null;null!==a&&a.postMessage({cmd:"getMNoteJson"},"*")}else this.isLoading=!0,this.remark("")}}else this.showErrorSnack("lang_auto_ban_khong_co_quen_cham_de_thi_nay")}remark(s){if(this.checkMapBGImageWithFileLength(s)){for(const l in this.form.value)"string"==typeof this.form.value[l]&&this.form.value[l].includes(",")&&(this.form.value[l]=this.form.value[l].replace(",","."));let r=JSON.stringify({type:"exam",id:this.examObj.id,user:this.examObj.tenantId});var a={id:this.resultID,result:s,essayResult:JSON.stringify(this.form.value)};this.examResultService.apiExamResultSaveResultPost(a,r).subscribe(l=>{1==l.success?(this.showSuccessSnack("lang_auto_cham_diem_tu_luan_thanh_cong"),this.saveResultEvent.emit(1),this.isLoading=!1):(this.commonService.snackError(l.message??""),this.saveResultEvent.emit(0),this.isLoading=!1)})}else this.showErrorSnack("lang_auto_cham_diem_tu_luan_loi_du_lieu_bai_tu_luan_dang_duoc_tai_len_vui_long_tai_lai_trang_va_doi_trong_giay_lat"),this.saveResultEvent.emit(0),this.isLoading=!1}ngOnInit(){this.whiteListMNoteIframeSrc=this.envService.getEnvValue("classliveUrl")??"";var s={};let o;this.examResultObj.confirmedAt&&(o=this.commonService.willDeleteParseJson(this.examResultObj.essayResult??"{}")),this.followerRenderQuest.setNumQuest(this.questions.length),this.questions.forEach(r=>{let l=this.getMaxPoint(r.id);this.totalMaxPoint+=l,r.essMaxPoint=l,this.maxPointPerQuestion.push(r.essMaxPoint)});for(let r=0;r<this.questions.length;r++){var a=`cau${r}`;s[a]=new g.MJ(o?o[a]:"",{validators:[g.k0.pattern("^[0-9]((.|,){0,1})[0-9]{0,8}"),g.k0.min(0),g.k0.max(this.questions[r].essMaxPoint??0)]})}this.form=new g.gE(s),this.form.valueChanges.subscribe(r=>{let l=JSON.stringify(r);l!=this.prevData&&(this.prevData=l,this.form.patchValue(r))}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}constructor(s,o,a,r,l){super(),this.permissionService=s,this.sAztCommonCdnService=o,this.envService=a,this.examResultService=r,this.apiUploadService=l,this.orgExamObjs=[],this.questions=[],this.files=[],this.userAnswersObj={},this.resultID=0,this.whiteListMNoteIframeSrc="",this.hasLoadedData=!1,this.iframeViewMode="view",this.saveResultEvent=new e.bkB,this.followerRenderQuest=new Dn.e,this.form=new g.gE({}),this.formValue={},this.isLoading=!1,this.totalMaxPoint=0,this.maxPointPerQuestion=[],this.hasSendDataToIframe=!1,this.jsonData={},this.mnoteJsonData={},this.pagesCount=0,this.dataMarkNote={},this.handleIframe=c=>{"MNoteJson"==c.data.cmd&&(this.isLoading=!0,this.mnoteJsonData=c.data.data,this.uploadAll(this.mnoteJsonData.pages)),"MNoteLoadComplete"==c.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,this.sendDataToIframe()):this.hasSendDataToIframe=!1)}}ngOnDestroy(){window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(rf.p),e.rXU(os.c),e.rXU(ml.t),e.rXU(Bh._),e.rXU($h.T))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-mark-essay"]],viewQuery:function(s,o){if(1&s&&e.GBs($w,5),2&s){let a;e.mGM(a=e.lsd())&&(o.mnoteContainer=a.first)}},inputs:{showForTeacher:"showForTeacher",examObj:"examObj",examConfig:"examConfig",orgExamObjs:"orgExamObjs",questions:"questions",files:"files",examResultObj:"examResultObj",userAnswersObj:"userAnswersObj",resultID:"resultID",whiteListMNoteIframeSrc:"whiteListMNoteIframeSrc",hasLoadedData:"hasLoadedData",iframeViewMode:"iframeViewMode"},outputs:{saveResultEvent:"saveResultEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:12,consts:[["mnoteContainer",""],["id","essayBoxButtons",1,"flex","items-center","jusitfy-center","flex-col","p-3","rounded-md","border","border-slate-200","dark:border-darkmode-400"],[1,"grid","grid-cols-12","gap-3","pb-3","w-full","border-b","border-slate-200","dark:border-darkmode-400",3,"formGroup"],["class","col-span-12 md:col-span-6 lg:col-span-4 pr-3 border-r border-slate-200 dark:border-darkmode-400",3,"ngStyle",4,"ngFor","ngForOf"],["class","BWrap-one",4,"ngIf"],["id","showQuestionEssay"],["class","essay_qItem",4,"ngFor","ngForOf"],["class","mb-2 mt-2",4,"ngIf"],[1,"card-box","listPhotos",3,"ngStyle"],["id","mNote","frameborder","0",2,"width","100%","height","100vh",3,"src"],["class","BWrap",4,"ngIf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","pr-3","border-r","border-slate-200","dark:border-darkmode-400",3,"ngStyle"],[1,"flex","items-center"],["name","eye","size","24",3,"click","ngClass","matTooltip"],[1,"mr-1","inline-block","flex-none",2,"min-width","130px"],[1,"maxPoint",3,"matTooltip"],["type","text","appOnlyNumber","","step",".01",1,"form-control",3,"readonly","decimal","placeholder","ngClass","formControlName"],["class","mt-2 text-danger text-xs",4,"ngIf"],[1,"mt-2","text-danger","text-xs"],[4,"ngIf"],[1,"BWrap-one"],["azt-track-service","mark-essay-TM1aspmGv4","id","btn-1",1,"mt-3","btn","btn-primary",3,"click","disabled"],[1,"essay_qItem"],[1,"mt-2",2,"display","block",3,"id"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab",4,"ngIf"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab",4,"ngIf"],["class","block-input","style","margin-bottom: 40px; margin-top: -20px",4,"ngIf"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab"],[1,"block-input",2,"margin-bottom","40px","margin-top","-20px"],[3,"formGroup"],[1,"mr-2","font-medium",3,"for"],["type","text","appOnlyNumber","","step",".01",1,"form-control","form-input","d-inline-flex",3,"readonly","ngClass","id","decimal","placeholder","formControlName"],[1,"mb-2","mt-2"],[1,"BWrap"],["azt-track-service","mark-essay-RBBGLVIph5","id","btn-2",1,"mt-3","btn","btn-primary",3,"click","disabled"]],template:function(s,o){1&s&&(e.j41(0,"div",1)(1,"form",2),e.DNE(2,Jw,14,30,"div",3),e.k0s(),e.DNE(3,Kw,5,6,"div",4),e.k0s(),e.j41(4,"div",5),e.DNE(5,aI,5,5,"div",6),e.k0s(),e.DNE(6,rI,6,6,"div",7),e.j41(7,"div",8,0),e.nrm(9,"iframe",9),e.nI1(10,"safe"),e.k0s(),e.DNE(11,lI,5,6,"div",10)),2&s&&(e.R7$(),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(2),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.files&&0==o.files.length),e.R7$(),e.Y8G("ngStyle",e.eq3(10,Qw,o.files&&0==o.files.length?"none":"block")),e.R7$(2),e.Y8G("src",e.bMT(10,8,o.whiteListMNoteIframeSrc),e.f$h),e.R7$(2),e.Y8G("ngIf",o.showForTeacher))},dependencies:[qu,Nh,v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,g.qT,g.me,g.BC,g.cb,g.j4,g.JD,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,H.L,z.JI,U.Id,Sh.Z,q.k,xr.t],styles:["#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]{flex:auto;display:flex;flex-wrap:wrap;padding-bottom:10px;width:100%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-right:5px;display:flex;justify-content:center;align-items:center;padding-right:5px;margin-bottom:5px;width:24%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 5px;height:30px;border-radius:3px;padding-left:5px;width:60px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, #essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]{color:#838383;margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]:hover{cursor:default}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#585858}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.form-control.is-invalid[_ngcontent-%COMP%]{padding-right:calc(1.5em + .15rem)!important;background-position:right calc(.375em + .02rem) center!important}.form-input[_ngcontent-%COMP%]{height:30px;width:96px}.form-mark[_ngcontent-%COMP%]{margin-left:20px}div#showQuestionEssay[_ngcontent-%COMP%]{width:100%}.BWrap[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-bottom:15px}.essay_qItem[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:30px!important}[type=number][_ngcontent-%COMP%]{appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}@media screen and (max-width: 1474px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:12px}.maxPoint[_ngcontent-%COMP%]{font-size:10px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 768px){.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 480px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{border-right:none;margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:99%}}"]}),n})(),uI=(()=>{var i;class n{constructor(s,o,a){this.commonService=s,this.sAztCommonCdnService=o,this.answerTypeService=a}convertUrlToBase64(s){return(0,W.A)(function*(){const a=yield(yield fetch(s+"?t="+(new Date).getTime())).blob();return new Promise(r=>{const l=new FileReader;l.readAsDataURL(a),l.onloadend=()=>{r(l.result)}})})()}convertLinkToBase64(s,o,a){var r=this;return(0,W.A)(function*(){if(!o)return a;for(let c=0;c<(s?.length??0);c++)if(s?.[c].link===a)return s?.[c].convert;var l=yield r.convertUrlToBase64(a);return s?.push({convert:l,link:a}),l})()}replaceCanvasBackground(s,o){var a=this;return(0,W.A)(function*(){if(s){var r=[];for(let C=0;C<s.length;C++){var l=s[C];if(l&&0===l.isImage){var c=l.questionContentParse?.[0].content;l.questionContentParse&&(l.questionContentParse[0].content="");var _=void 0===c?[]:c.split("@[]");for(let E=0;E<_.length;E++){var d=_[E];if(!0===a.commonService.isJson(d)){var p=a.commonService.willDeleteParseJson(d);if(p.hasOwnProperty("link")){var f=document.body.offsetWidth,y=1;p.data.width>(I=f-30)&&(p.data={x:p.data.x*(y=I/p.data.width),y:p.data.y*y,width:p.data.width*y,height:p.data.height*y}),p.data={x:Math.floor(p.data.x),y:Math.floor(p.data.y),width:Math.floor(p.data.width),height:Math.floor(p.data.height)},l.questionContentParse&&(l.questionContentParse[0].content+=`<div class="background_question_${C}_${E}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(p.link))}"></div>`);var k=document.createElement("style");document.body.appendChild(k),k.textContent+=`.background_question_${C}_${E} {margin: 0 3px; width: ${p.data.width}px; height: ${p.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${C}_${E} img { margin-top: -${p.data.y}px; margin-left: -${p.data.x}px;}`}else l.questionContentParse&&(l.questionContentParse[0].content+=d)}else l.questionContentParse&&(l.questionContentParse[0].content+=d)}if(a.answerTypeService.isOneChoiceAnswer(l))for(let E=0;E<(l.answerConfigParse?.length??0);E++){var O=l.answerConfigParse?.[E].content;l.answerConfigParse&&(l.answerConfigParse[E].content="");var j=void 0===O?[]:O.split("@[]");for(let R=0;R<j.length;R++){var V=j[R];if(!0===a.commonService.isJson(V)){var N=a.commonService.willDeleteParseJson(V);N.hasOwnProperty("link")?(f=document.body.offsetWidth,y=1,N.data.width>(I=f-30)&&(N.data={x:N.data.x*(y=I/N.data.width),y:N.data.y*y,width:N.data.width*y,height:N.data.height*y}),N.data={x:Math.floor(N.data.x),y:Math.floor(N.data.y),width:Math.floor(N.data.width),height:Math.floor(N.data.height)},l.answerConfigParse&&(l.answerConfigParse[E].content+=`<div class="background_question__ans${C}_${E}_${R}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(N.link))}"></div>`),k=document.createElement("style"),document.body.appendChild(k),k.textContent+=`.background_question__ans${C}_${E}_${R} {margin: 0 3px; width: ${N.data.width}px; height: ${N.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans${C}_${E}_${R} img { margin-top: -${N.data.y}px; margin-left: -${N.data.x}px;}`):l.answerConfigParse&&(l.answerConfigParse[E].content+=V)}else l.answerConfigParse&&(l.answerConfigParse[E].content+=V)}}if(l.answerMediaParse&&l.answerMediaParse.length>0){var X=l.answerMediaParse;l.answerMediaParse="";var te=void 0===X?[]:X.split("@[]");for(let E=0;E<te.length;E++){var S=te[E];if(!0===a.commonService.isJson(S)){var I,x=a.commonService.willDeleteParseJson(S);if(x.hasOwnProperty("link"))f=document.body.offsetWidth,y=1,x.data.width>(I=f-30)&&(x.data={x:x.data.x*(y=I/x.data.width),y:x.data.y*y,width:x.data.width*y,height:x.data.height*y}),x.data={x:Math.floor(x.data.x),y:Math.floor(x.data.y),width:Math.floor(x.data.width),height:Math.floor(x.data.height)},l.answerMediaParse+=`<div class="background_question__ans_result${C}_${E}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(x.link))}"></div>`,k=document.createElement("style"),document.body.appendChild(k),k.textContent+=`.background_question__ans_result${C}_${E} {margin: 0 3px; width: ${x.data.width}px; height: ${x.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans_result${C}_${E} img { margin-top: -${x.data.y}px; margin-left: -${x.data.x}px;}`;else l.answerMediaParse+=S}else l.answerMediaParse+=S}}}}}})()}replaceCanvasBackgroundTS(s,o){var a=this;return(0,W.A)(function*(){var r=[];for(let X=0;X<s.length;X++){var l=s[X];if(0===l.isImage){var c=l.questionContentParse[0].content;l.questionContentParse[0].content="";var _=void 0===c?[]:c.split("@[]");for(let te=0;te<_.length;te++){var d=_[te];if(!0===a.commonService.isJson(d)){var p=a.commonService.willDeleteParseJson(d);if(p.hasOwnProperty("link")){var f=document.body.offsetWidth,y=1;p.data.width>(I=f-30)&&(p.data={x:p.data.x*(y=I/p.data.width),y:p.data.y*y,width:p.data.width*y,height:p.data.height*y}),p.data={x:Math.floor(p.data.x),y:Math.floor(p.data.y),width:Math.floor(p.data.width),height:Math.floor(p.data.height)},l.questionContentParse[0].content+=`<div class="background_question_${X}_${te}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(p.link))}"></div>`;var k=document.createElement("style");document.body.appendChild(k),k.textContent+=`.background_question_${X}_${te} {margin: 0 3px; width: ${p.data.width}px; height: ${p.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${X}_${te} img { margin-top: -${p.data.y}px; margin-left: -${p.data.x}px;}`}else l.questionContentParse[0].content+=d}else l.questionContentParse[0].content+=d}if(a.answerTypeService.isOneChoiceAnswer(l)&&(0==l.isImage||1==l.isImage&&l.name.startsWith("[PDFv2]")?a.replaceBackgroundAnswerConfig(l.answerConfigParse,r,X,o):a.replaceBackgroundAnswerConfig(l.answerConfigParseVer1.answerConfigV2,r,X,o)),l.answerMedia&&l.answerMedia.length>0){var O=l.answerMedia;l.answerMedia="";var j=void 0===O?[]:O.split("@[]");for(let te=0;te<j.length;te++){var V=j[te];if(!0===a.commonService.isJson(V)){var I,N=a.commonService.willDeleteParseJson(V);if(N.hasOwnProperty("link"))f=document.body.offsetWidth,y=1,N.data.width>(I=f-30)&&(N.data={x:N.data.x*(y=I/N.data.width),y:N.data.y*y,width:N.data.width*y,height:N.data.height*y}),N.data={x:Math.floor(N.data.x),y:Math.floor(N.data.y),width:Math.floor(N.data.width),height:Math.floor(N.data.height)},l.answerMedia+=`<div class="background_question__ans_result${X}_${te}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(N.link))}"></div>`,k=document.createElement("style"),document.body.appendChild(k),k.textContent+=`.background_question__ans_result${X}_${te} {margin: 0 3px; width: ${N.data.width}px; height: ${N.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans_result${X}_${te} img { margin-top: -${N.data.y}px; margin-left: -${N.data.x}px;}`;else l.answerMedia+=V}else l.answerMedia+=V}}}}return!0})()}replaceBackgroundAnswerConfig(s,o,a,r){var l=this;return(0,W.A)(function*(){for(let O=0;O<s.length;O++){var c=s[O].content;s[O].content="";var _=void 0===c?[]:c.split("@[]");for(let j=0;j<_.length;j++){var d=_[j];if(!0===l.commonService.isJson(d)){var p=l.commonService.willDeleteParseJson(d);if(p.hasOwnProperty("link")){var I=document.body.offsetWidth-30,y=1;p.data.width>I&&(p.data={x:p.data.x*(y=I/p.data.width),y:p.data.y*y,width:p.data.width*y,height:p.data.height*y}),p.data={x:Math.floor(p.data.x),y:Math.floor(p.data.y),width:Math.floor(p.data.width),height:Math.floor(p.data.height)},s[O].content+=`<div class="background_question__ans${a}_${O}_${j}"><img width="${1024*y}" height="${1024*y}" src="${yield l.convertLinkToBase64(o,r,l.sAztCommonCdnService.getMyCdn(p.link))}"></div>`;var k=document.createElement("style");document.body.appendChild(k),k.textContent+=`.background_question__ans${a}_${O}_${j} {margin: 0 3px; width: ${p.data.width}px; height: ${p.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans${a}_${O}_${j} img { margin-top: -${p.data.y}px; margin-left: -${p.data.x}px;}`}else s[O].content+=d}else s[O].content+=d}}})()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(os.c),e.KVO(on._))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})(),_I=(()=>{var i;class n{addIndexLabelToQuestionObjs(s){for(let o=0;o<(s?.length??0);o++)s?.[o]&&(s[o].indexLabel=o);return s}getEssayQuestionObjs(s){let o=[];for(let a=0;a<(s?.length??0);a++)this.answerTypeService.isEssayAnswer(s?.[a])&&s?.[a]&&o.push(s[a]);return o}getTrueFalseQuestionObjs(s){let o=[];for(let a=0;a<(s?.length??0);a++)(this.answerTypeService.isOneChoiceAnswer(s?.[a])||this.answerTypeService.isTrueFalseAnswer(s?.[a])||this.answerTypeService.isFillAnswer(s?.[a]))&&s?.[a]&&o.push(s[a]);return o}convertAnswersArr(s){let o={};return 0!=s.length&&s.forEach(a=>{let r=!!a.AnswerContent?.filter(l=>l.Status)?.length;a.AnswerContent&&a.AnswerContent.length&&(o[`id_${a.QuestionId}`]=r?[...a.AnswerContent]:a.AnswerContent[0].Content)}),o}mapStudentObjWithTestedObj(s,o,a){var r=this.commonService.castObj(s?.studentObj),l=o?.filter(c=>c.userId==a?.parentId);return r&&l&&l.length>0&&(r={...r,offlineMarkObj:l[0].offlineMarkObj,nameImage:l[0].nameImage??""}),a=r}mapStudentObjWithTestedObjForFrontendStudent(s,o,a){var r=this.commonService.castObj(s?.studentObj),l=o?.filter(c=>c.userId==a?.parentId);return r&&l&&l.length>0&&(r={...r,offlineMarkObj:l[0].offlineMarkObj,nameImage:l[0].nameImage??""}),a=r}constructor(s,o,a){this.commonService=s,this.zipDataService=o,this.answerTypeService=a}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(Gs.j),e.KVO(on._))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var Ps=A(1167),dI=A(15019),Po=A(77247);const mI=()=>({"mr-2":!0});function pI(i,n){if(1&i&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.R7$(),e.SpI("* ",t.message,"")}}function hI(i,n){1&i&&(e.j41(0,"span",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",9),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_click")," "),e.R7$(3),e.SpI('"',e.bMT(5,6,"lang_auto_tai_ve"),'"'),e.R7$(2),e.Lme(" ",e.bMT(7,8,"lang_auto_de_tai_ve")," ",e.bMT(8,10,"lang_auto_cac_bai_lam_da_tao_thanh_cong"),". "))}function fI(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onPressTrue())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tai_ve")," "))}let cf=(()=>{var i;class n extends Mt._{onPressTrue(){this.dialogRef.close(!0)}constructor(s,o){super(s,o),this.data=s,this.dialogRef=o,this.result=s.result}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(De.Vh),e.rXU(De.CP,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-push-error-student-export-docx"]],standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:25,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box-header","bg-slate-100","dark:bg-darkmode-400"],[1,"header-left"],[1,"header-right"],["azt-track-service","push-error-student-export-xUXBRZF-kY1",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["name","x","size","16",3,"ngClass"],[1,"box-content"],[1,"box-title"],[1,"box-description"],[3,"defaultHeight"],[1,"box-list"],[4,"ngFor","ngForOf"],["class","box-title",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","push-error-student-export-PEAaBsdI7jR",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","push-error-student-export-cI-G2ar81ss","class","btn w-24 btn-primary",3,"click",4,"ngIf"],["azt-track-service","push-error-student-export-cI-G2ar81ss",1,"btn","w-24","btn-primary",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",4)(7,"a",5),e.nrm(8,"lucide-icon",6),e.k0s()()(),e.j41(9,"div",7)(10,"span",8),e.EFF(11),e.nI1(12,"mytranslate"),e.j41(13,"span",9),e.EFF(14),e.k0s(),e.EFF(15),e.nI1(16,"mytranslate"),e.nI1(17,"lowercase"),e.k0s(),e.j41(18,"span",8),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"azt-mat-dialog-content",10)(22,"ul",11),e.DNE(23,pI,2,1,"li",12),e.k0s()(),e.DNE(24,hI,9,12,"span",13),e.k0s(),e.j41(25,"div",14)(26,"a",15),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.DNE(29,fI,3,3,"button",16),e.k0s()()()),2&s&&(e.R7$(4),e.JRh(e.bMT(5,12,"lang_auto_xay_ra_loi_trong_qua_trinh_xuat_docx")),e.R7$(4),e.Y8G("ngClass",e.lJ4(24,mI)),e.R7$(3),e.SpI(" ",e.bMT(12,14,"lang_auto_he_thong_tao_thanh_cong_cho")," "),e.R7$(3),e.Lme("",o.result.datas.length,"/",o.result.errs.length+o.result.datas.length,""),e.R7$(),e.SpI(" ",e.bMT(17,18,e.bMT(16,16,"lang_auto_hoc_sinh"))," "),e.R7$(4),e.SpI(" ",e.bMT(20,20,"lang_auto_danh_sach_hoc_sinh_khong_the_tao_file_ket_qua"),": "),e.R7$(2),e.Y8G("defaultHeight",60),e.R7$(2),e.Y8G("ngForOf",o.result.errs),e.R7$(),e.Y8G("ngIf",o.result.datas.length>0),e.R7$(3),e.SpI(" ",e.bMT(28,22,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("ngIf",o.result.datas.length>0))},dependencies:[Ms.U,v.MD,v.YU,v.Sq,v.bT,v.GH,g.X1,L.iI,g.YN,z.wp,Y.s,De.tx,F.flO,F.WGl,H.L,U.Id,q.k],styles:[".box[_ngcontent-%COMP%]{max-width:600px}.box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-radius:.375rem}.box-content[_ngcontent-%COMP%]{padding:10px 20px}.box-title[_ngcontent-%COMP%]{display:block;font-weight:500;font-size:15px;padding:10px 0}.box-description[_ngcontent-%COMP%]{color:rgb(var(--color-primary))}.box-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#f44336}"]}),n})();var gI=A(49255);function TI(i,n){if(1&i&&(e.j41(0,"div",1)(1,"form",2),e.nrm(2,"input",3),e.nI1(3,"mytranslate"),e.nrm(4,"input",4),e.nI1(5,"mytranslate"),e.nrm(6,"input",5),e.nI1(7,"mytranslate"),e.nrm(8,"input",6),e.nI1(9,"mytranslate"),e.nrm(10,"input",7),e.nI1(11,"mytranslate"),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("formGroup",t.form),e.R7$(),e.FS9("placeholder",e.bMT(3,6,"lang_azt_addition_info_exam_department_name")),e.R7$(2),e.FS9("placeholder",e.bMT(5,8,"lang_auto_ten_truong")),e.R7$(2),e.FS9("placeholder",e.bMT(7,10,"lang_azt_addition_info_exam_test_note")),e.R7$(2),e.FS9("placeholder",e.bMT(9,12,"lang_auto_mon_hoc_form")),e.R7$(2),e.FS9("placeholder",e.bMT(11,14,"lang_auto_thoi_gian"))}}let bI=(()=>{var i;class n extends Z.H{constructor(){super(),this.type=""}initData(){this.form?.patchValue({schoolName:this.examPrintInfoObj.schoolName,subjectName:this.examPrintInfoObj.subject,departmentName:this.examPrintInfoObj.departmentName,indetifyBox:this.examPrintInfoObj.indetifyBox,timeBox:this.examPrintInfoObj.timeBox})}ngOnInit(){this.initData()}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["add-info-print"]],inputs:{form:"form",examPrintInfoObj:"examPrintInfoObj",type:"type"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","add-info-print",4,"ngIf"],[1,"add-info-print"],[3,"formGroup"],["id","department-name","type","text","formControlName","departmentName",1,"form-control","mt-3",3,"placeholder"],["id","school-name","type","text","formControlName","schoolName",1,"form-control","mt-3",3,"placeholder"],["id","indetify-box","type","text","formControlName","indetifyBox",1,"form-control","mt-3",3,"placeholder"],["id","subject-name","type","text","formControlName","subjectName",1,"form-control","mt-3",3,"placeholder"],["id","time-box","type","text","formControlName","timeBox",1,"form-control","mt-3",3,"placeholder"]],template:function(s,o){1&s&&e.DNE(0,TI,12,16,"div",0),2&s&&e.Y8G("ngIf",o.form)},dependencies:[v.MD,v.bT,g.X1,g.qT,g.me,g.BC,g.cb,g.j4,g.JD,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,q.k,xr.t],encapsulation:2}),n})();var Hu=A(13505);const xI=(i,n)=>({"box-classrooms":i,"box-max-classrooms":n});function vI(i,n){if(1&i&&(e.j41(0,"span",32),e.EFF(1),e.k0s()),2&i){let t;const s=e.XpG();e.R7$(),e.SpI(" ",null!==(t=null==s.studentsInClassResults[0].classObj?null:s.studentsInClassResults[0].classObj.name)&&void 0!==t?t:""," ")}}function yI(i,n){if(1&i&&(e.j41(0,"div",37)(1,"div",19),e.nrm(2,"input",38),e.j41(3,"label",39,0),e.EFF(5),e.k0s()()()),2&i){let t;const s=n.$implicit,o=e.sdS(4),a=e.XpG(2);e.Y8G("hidden",1===a.studentsInClassResults.length),e.R7$(2),e.Mz_("id","select-classroom-export__",null==s.classObj?null:s.classObj.id,""),e.Y8G("value",null==s.classObj?null:s.classObj.id),e.R7$(),e.Mz_("for","select-classroom-export__",null==s.classObj?null:s.classObj.id,""),e.Y8G("matTooltip",null!==(t=null==s.classObj?null:s.classObj.name)&&void 0!==t?t:"")("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.SpI(" ",null==s.classObj?null:s.classObj.name," ")}}function SI(i,n){if(1&i&&(e.j41(0,"div",33)(1,"ng-scrollbar",34)(2,"div",35),e.DNE(3,yI,6,10,"div",36),e.k0s()()()),2&i){const t=e.XpG();e.Y8G("ngClass",e.l_i(3,xI,t.form.controls.listStudents.controls.length>21||t.studentsInClassResults.length>18,t.form.controls.listStudents.controls.length<=21&&t.studentsInClassResults.length>18)),e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngForOf",t.studentsInClassResults)}}function wI(i,n){if(1&i&&(e.j41(0,"label",39,0),e.EFF(2),e.k0s()),2&i){const t=e.sdS(1),s=e.XpG().$implicit;e.Mz_("for","select-classroom-export__",s.controls.id.value,""),e.Y8G("matTooltip",s.controls.label.value)("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.R7$(2),e.SpI(" ",s.controls.label.value," ")}}function II(i,n){if(1&i&&(e.j41(0,"label",45),e.nrm(1,"img",46),e.k0s()),2&i){const t=e.XpG().$implicit;e.Mz_("for","select-classroom-export__",t.controls.id.value,""),e.R7$(),e.Y8G("nameImages",t.controls.nameImages.value)}}function CI(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"input",42),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onChangeStudentOption())}),e.k0s(),e.DNE(3,wI,3,6,"label",43)(4,II,2,3,"label",44),e.k0s()()}if(2&i){const t=n.$implicit;e.R7$(),e.Y8G("formGroup",t),e.R7$(),e.Mz_("id","select-classroom-export__",t.controls.id.value,""),e.R7$(),e.Y8G("ngIf",t.controls.label.value||!t.controls.isImage.value),e.R7$(),e.Y8G("ngIf",!t.controls.label.value&&t.controls.isImage.value&&t.controls.nameImages.value)}}function kI(i,n){1&i&&(e.j41(0,"span",28),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" * ",e.bMT(2,1,"lang_core_chon_it_nhat_mot_hoc_sinh")," "))}function EI(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",50),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAskInfo=!0)}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&i&&(e.R7$(),e.SpI(" + ",e.bMT(2,1,"lang_testbank_test_config_add_information")," "))}function AI(i,n){if(1&i&&(e.j41(0,"div"),e.nrm(1,"add-info-print",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("form",t.form)("type","online")}}function OI(i,n){1&i&&(e.j41(0,"span",54),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" (",e.bMT(2,1,"lang_auto_cac_thong_tin_khong_bat_buoc"),") "))}function RI(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",52),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAskInfo=!1)}),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"lowercase"),e.DNE(5,OI,3,3,"span",53),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_auto_huy")," ",e.bMT(4,7,e.bMT(3,5,"lang_testbank_test_config_add_information"))," "),e.R7$(4),e.Y8G("ngIf",t.isAskInfo&&t.showAskInfo)}}function FI(i,n){if(1&i&&(e.j41(0,"div")(1,"span",47),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,EI,3,3,"div",48)(5,AI,2,2,"div",27)(6,RI,6,9,"div",49),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Lme(" * ",e.bMT(3,5,"lang_core_so_hoc_sinh_da_duoc_lua_chon")," : ",t.countStudentSelect," "),e.R7$(2),e.Y8G("ngIf",t.isAskInfo&&!t.showAskInfo),e.R7$(),e.Y8G("ngIf",t.isAskInfo&&t.showAskInfo),e.R7$(),e.Y8G("ngIf",t.isAskInfo&&t.showAskInfo)}}function jI(i,n){1&i&&(e.j41(0,"div")(1,"div",16)(2,"span",28),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(3),e.SpI("* ",e.bMT(4,1,"lang_testbank_exam_result_there_is_no_result_in_exam"),""))}let uf=(()=>{var i;class n extends Mt._{confirmAction(){const s=this.form.value,o=this.studentsInClassResults.find(a=>a.classObj?.id===s.classId);if(o){const a=s.listStudents?.filter(r=>r.choose).map(r=>r.id);o.results=o.results?.filter(r=>a?.includes(r.reId)),o.schoolName=this.showAskInfo?s.schoolName:void 0,o.subjectName=this.showAskInfo?s.subjectName:void 0,this.dialogRef.close(o)}else this.dialogRef.close()}setChangeSelectAll(){const s=this.form.controls.selectAll;if(s){s.setValue(!s.value);const o=this.form.controls.listStudents;o&&o.controls.forEach(a=>{a.controls.choose.setValue(s.value)}),this.countStudentSelect=s.value?o.controls.length:0}}onChangeStudentOption(){const s=this.form.controls.listStudents;let o=!0,a=0;s&&s.controls.forEach(l=>{!1===l.controls.choose.value?o=!1:a++});const r=this.form.controls.selectAll;r&&r.setValue(o),this.countStudentSelect=a}setupArrayStudent(s){this.currNameClass=s.classObj?.name??"";const o=this.form.controls.listStudents;if(o){o.clear();let a=s.results??[];if(void 0!==s.classObj?.sortType){let r=s.classObj?.sortType;a=0==r?this.sortService.sortFirstNameStudents(this.commonService.myClone(a)):99==r?this.sortService.sortTimeDESC(this.commonService.myClone(a)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(a),"pos","id")}a.forEach(r=>{(r.confirmedAt||!this.data.examHasEssay&&1==r.status)&&o.push(new g.gE({isImage:new g.MJ(!!r.nameImages,{nonNullable:!0}),nameImages:new g.MJ(r.nameImages,{nonNullable:!0}),label:new g.MJ(r.fullName,{nonNullable:!0}),id:new g.MJ(r.reId,{nonNullable:!0}),choose:new g.MJ(!1,{nonNullable:!0})}))})}}classroomChange(s){this.setupArrayStudent(s)}ngOnInit(){if(super.ngOnInit(),this.studentsInClassResults.length>0){let s=this.studentsInClassResults[0];this.form.controls.classId.setValue(s.classObj?.id),this.setupArrayStudent(s),this.form.controls.classId.valueChanges.subscribe(a=>{const r=this.form.controls.selectAll;r&&r.setValue(!1),this.countStudentSelect=0;const l=this.studentsInClassResults.find(c=>c.classObj?.id===a);l&&this.setupArrayStudent(l)})}}constructor(s,o,a){super(o,a),this.sortService=s,this.data=o,this.dialogRef=a,this.studentsInClassResults=[],this.countStudentSelect=0,this.showAskInfo=!1,this.currNameClass="",this.isAskInfo=o.isAskInfo,this.studentsInClassResults=o.studentsInClassResults.map(r=>({...r,results:r.results?.map(l=>({...l,reId:gI.P.generateIdRequired(10)}))})),this.form=new g.gE({classId:new g.MJ(0,{nonNullable:!0,validators:[g.k0.required]}),selectAll:new g.MJ(!1,{nonNullable:!0}),listStudents:new g.Yp([]),schoolName:new g.MJ("",{nonNullable:!0}),subjectName:new g.MJ("",{nonNullable:!0})})}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Hu.g),e.rXU(De.Vh),e.rXU(De.CP,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-select-student-to-export-docx"]],standalone:!0,features:[e.Vt3,e.aNF],decls:49,vars:36,consts:[["c","isDisabled"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box-header","bg-slate-100","dark:bg-darkmode-400"],[1,"header-left","font-medium"],[1,"header-right"],["azt-track-service","select-student-export-sMT2Np4C_Vf",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["name","x","size","16"],[3,"defaultHeight"],[1,"box-content"],[3,"formGroup","hidden"],[1,"col-span-12",3,"hidden"],[1,"mb-3","mt-3","font-medium","flex","items-center","px-3"],["class","text-only-class",4,"ngIf"],["class","box-min-classrooms",3,"ngClass",4,"ngIf"],[3,"hidden"],[1,"col-span-12","mt-2","px-3"],[1,"font-medium","flex","items-center"],[1,"col-span-12","mt-2","mb-2","px-3","pt-0"],[1,"form-check","mr-10"],["id","select-all-students","type","checkbox",1,"form-check-input",3,"change","checked"],["for","select-all-students",1,"form-check-label"],[1,"box-students"],["pointerEventsMethod","scrollbar",2,"width","100%","height","100%",3,"visibility"],[1,"grid","grid-cols-12","p-3",2,"align-items","center"],["class","col-span-12 md:col-span-4 mt-2","formArrayName","listStudents",4,"ngFor","ngForOf"],["class","err-color",4,"ngIf"],[4,"ngIf"],[1,"err-color"],[1,"p-3","text-right","border-t","border-slate-200","dark:border-darkmode-400"],["azt-track-service","select-student-export-H_SWYi6hbiY",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","select-student-export-FAs4GdQImfT",1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"text-only-class"],[1,"box-min-classrooms",3,"ngClass"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"grid","grid-cols-12","p-3","pt-0",2,"align-items","center"],["class","col-span-12 md:col-span-4 mt-2",3,"hidden",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4","mt-2",3,"hidden"],["formControlName","classId","type","radio",1,"form-check-input",3,"id","value"],[1,"form-check-label","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","for"],["formArrayName","listStudents",1,"col-span-12","md:col-span-4","mt-2"],[1,"form-check","mr-10",3,"formGroup"],["formControlName","choose","type","checkbox",1,"form-check-input",3,"change","id"],["class","form-check-label truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","for",4,"ngIf"],["class","form-check-label truncate",3,"for",4,"ngIf"],[1,"form-check-label","truncate",3,"for"],["appDrawNameImage","",1,"img-name-fluid",3,"nameImages"],[1,"note-color"],["azt-track-service","select-student-export-RBRnT8RJQO0","class","mt-1 font-medium more-info-color",3,"click",4,"ngIf"],["azt-track-service","select-student-export-u8TMFqclpqj","class","mt-2 font-medium more-info-color",3,"click",4,"ngIf"],["azt-track-service","select-student-export-RBRnT8RJQO0",1,"mt-1","font-medium","more-info-color",3,"click"],[3,"form","type"],["azt-track-service","select-student-export-u8TMFqclpqj",1,"mt-2","font-medium","more-info-color",3,"click"],["class","ms-1 font-medium text-xs text-slate-500",4,"ngIf"],[1,"ms-1","font-medium","text-xs","text-slate-500"]],template:function(s,o){1&s&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",5)(7,"a",6),e.nrm(8,"lucide-icon",7),e.k0s()()(),e.j41(9,"azt-mat-dialog-content",8)(10,"div",9)(11,"form",10)(12,"div",11)(13,"div",12),e.EFF(14),e.nI1(15,"mytranslate"),e.DNE(16,vI,2,1,"span",13),e.k0s()(),e.DNE(17,SI,4,6,"div",14),e.j41(18,"div",15)(19,"div",16)(20,"div",17),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"div",18)(24,"div",19)(25,"input",20),e.bIt("change",function(){return o.setChangeSelectAll()}),e.k0s(),e.j41(26,"label",21),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s()()(),e.j41(29,"div",22)(30,"ng-scrollbar",23)(31,"div",24),e.DNE(32,CI,5,5,"div",25),e.k0s()()(),e.j41(33,"div",16),e.DNE(34,kI,3,3,"span",26)(35,FI,7,7,"div",27),e.k0s()(),e.j41(36,"div",15)(37,"div",16)(38,"span",28),e.EFF(39),e.nI1(40,"mytranslate"),e.k0s()()()(),e.DNE(41,jI,5,3,"div",27),e.k0s()(),e.j41(42,"div",29)(43,"a",30),e.EFF(44),e.nI1(45,"mytranslate"),e.k0s(),e.j41(46,"button",31),e.bIt("click",function(){return o.confirmAction()}),e.EFF(47),e.nI1(48,"mytranslate"),e.k0s()()()()),2&s&&(e.R7$(4),e.JRh(e.bMT(5,22,"lang_testbank_what_to_export_select_students_export")),e.R7$(5),e.Y8G("defaultHeight",70),e.R7$(2),e.Y8G("formGroup",o.form)("hidden",0===o.studentsInClassResults.length),e.R7$(),e.Y8G("hidden",1===o.studentsInClassResults.length&&null==o.studentsInClassResults[0].classObj),e.R7$(2),e.SpI(" ",e.bMT(15,24,"lang_core_chon_lop_xuat_bai_lam_hoc_sinh"),": "),e.R7$(2),e.Y8G("ngIf",1===o.studentsInClassResults.length),e.R7$(),e.Y8G("ngIf",o.studentsInClassResults.length>1),e.R7$(),e.Y8G("hidden",0===o.form.controls.listStudents.controls.length),e.R7$(3),e.SpI("",e.bMT(22,26,"lang_core_chon_hoc_sinh_xuat_bai_lam"),":"),e.R7$(4),e.Y8G("checked",o.form.controls.selectAll.value),e.R7$(2),e.JRh(e.bMT(28,28,"lang_auto_chon_tat_ca")),e.R7$(3),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngForOf",o.form.controls.listStudents.controls),e.R7$(2),e.Y8G("ngIf",0===o.countStudentSelect),e.R7$(),e.Y8G("ngIf",o.countStudentSelect>0),e.R7$(),e.Y8G("hidden",o.form.controls.listStudents.controls.length>0),e.R7$(3),e.SpI("* ",e.bMT(40,30,"lang_auto_chua_co_thi_sinh_du_thi"),""),e.R7$(2),e.Y8G("ngIf",0===o.studentsInClassResults.length),e.R7$(3),e.SpI(" ",e.bMT(45,32,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("disabled",0===o.countStudentSelect),e.R7$(),e.SpI(" ",e.bMT(48,34,"lang_cms_common_confirm_btn")," "))},dependencies:[Wu.y,ye.f,bI,v.MD,v.YU,v.Sq,v.bT,v.GH,g.X1,g.qT,g.me,g.Zm,g.Fm,g.BC,g.cb,g.j4,g.JD,g.v8,L.iI,g.YN,z.wp,Y.s,De.tx,vt.oV,F.flO,F.WGl,H.L,U.Id,U.Yh,q.k,xr.t,Ms.U],styles:[".box[_ngcontent-%COMP%]{max-width:800px}.box-content[_ngcontent-%COMP%]{padding:10px}.box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-radius:.375rem}.err-color[_ngcontent-%COMP%]{color:#f44336;font-size:small;font-weight:500}.note-color[_ngcontent-%COMP%]{font-size:small;font-weight:500}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:150px}.more-info-color[_ngcontent-%COMP%]{color:rgb(var(--color-primary));cursor:pointer}.text-only-class[_ngcontent-%COMP%]{color:#546e7a;margin-left:5px;font-weight:400}.box-students[_ngcontent-%COMP%]{height:15vh;overflow:hidden}.box-classrooms[_ngcontent-%COMP%]{height:10vh;overflow:hidden}.box-min-classrooms[_ngcontent-%COMP%]{height:45px}.box-max-classrooms[_ngcontent-%COMP%]{height:15vh;overflow:hidden}"]}),n})();var Ee=A(34117);class rn{pushChild(n){this.child.push(n)}pushMsg(n){this.msg=n}start(n){this.run=!0,n&&(this.msg=n)}remove(){this.run=!1,this.msg="",this.child=[],this.percent=void 0}get lines(){const n=[];return this.msg&&""!==this.msg&&n.push(this.msg),`<p>${n.concat(this.lineChild).join("</p><p>")}</p>`}get lineChild(){let n=[];return this.child.filter(t=>t.run).forEach(t=>{n=n.concat(t.lines)}),n}constructor(n=!1,t="",s){this.run=n,this.msg=t,this.percent=s,this.child=[]}}var zI=A(89238),rs=function(i){return i[i.Cdn=0]="Cdn",i[i.CdnTimestamp=1]="CdnTimestamp",i[i.Rawlink=2]="Rawlink",i[i.RawlinkTimestamp=3]="RawlinkTimestamp",i}(rs||{});let _f=(()=>{var i;class n{get blockCropItemClass(){return"__CANVAS_CROP_ITEM"}get blockEssayCropItemClass(){return"_ESSAY"}isSupportedBrowser(){const s=navigator.userAgent,a=(()=>{let l=null;const c=s.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1]))return"IE "+((/\brv[ :]+(\d+)/g.exec(s)||[])[1]||"");if("Chrome"===c[1]){const d=s.match(/\b(OPR|Edge)\/(\d+)/);if(null!==d)return d.slice(1).join(" ").replace("OPR","Opera")}const _=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!==(l=s.match(/version\/(\d+)/i))&&_.splice(1,1,l[1]),_.join(" ")})().toString();return!(!["chrome"].includes(a.split(" ")[0].toLowerCase())||parseInt(a.split(" ")[1],10)<80)}getExtensionFile(s){if(!s)return"";const o=s.split(".");return o.length<=1?"":o[o.length-1].toLocaleLowerCase().split("_")[0]}findImageSrcInContent(s){let o="";if(s.includes("img")){const a=s.indexOf("img"),r=s.indexOf("src=",a),l=s.indexOf('"',Number(r)+5);o=s.substring(Number(r)+5,Number(l))}return o}asyncTimeout(s){return(0,W.A)(function*(){return`Waited ${yield new Promise(a=>{setTimeout(()=>a(s),s)})} milliseconds`})()}parseEssayMarkResult(s,o){let a=s.filter(c=>this.answerTypeService.isEssayAnswer(c));if(0!=a.length&&o&&o.essayResult){var r=this.commonService.willDeleteParseJson(o.essayResult);if(r){var l=Object.entries(r);for(let c=0;c<a.length;c++)a[c].essayMarkParsed=l[c][1]}}}convertToBase64(s,o){var a=this;return(0,W.A)(function*(){let r=s;switch(o){case rs.Cdn:r=a.sAztCommonCdnService.getMyCdn(s);break;case rs.CdnTimestamp:r=a.sAztCommonCdnService.getMyCdn(s)+"?t="+Date.now();break;case rs.RawlinkTimestamp:r=s+"?t="+Date.now()}const c=yield(yield fetch(r)).blob(),_=yield new Promise(d=>{const p=new FileReader;p.readAsDataURL(c),p.onloadend=()=>{d(p.result)}});return _&&"string"==typeof _?_:s})()}convertAndRetryToBase64(s){var o=this;return(0,W.A)(function*(){let a=o.getExtensionFile(s);if(["pdf","jpg","jpeg","png","gif"].includes(a)){let r;const l=[rs.Cdn,rs.CdnTimestamp,rs.Rawlink,rs.RawlinkTimestamp];try{r=yield o.convertToBase64(s,l[0])}catch{try{r=yield o.convertToBase64(s,l[1])}catch{try{r=yield o.convertToBase64(s,l[2])}catch{try{r=yield o.convertToBase64(s,l[3])}catch{console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+s),r=s}}}}return r}return s})()}eraseCanvas(s){s&&(s.beginPath(),s.rect(0,0,s.canvas.width,s.canvas.height),s.fillStyle="white",s.fill())}addContentToPdf(s,o){s.addImage(o,"JPEG",0,0,s.internal.pageSize.getWidth(),s.internal.pageSize.getHeight())}drawTextWrap(s,o,a,r,l){const c=s.split(" "),_=[];let d=c[0];if(o){o.font=l||`${r}px Arial`;for(let p=1;p<c.length;p++){const f=c[p];o.measureText(d+" "+f).width<a?d+=" "+f:(_.push(d),d=f)}_.push(d)}return _}essayText2LinesArr(s,o,a,r,l){const c=new RegExp("(<br>|<br/>)+","igm"),d=(this.replaceAllByRegExp(s,c,"<br>")??"").split("<br>"),p=[];for(let f=0;f<d.length;f++)p.push(this.drawTextWrap(d[f],o,a,r,l));return p}replaceAllByRegExp(s,o,a){return a?s?s.toString().replace(o,a):void 0:s}removeTagAssistiveMml(){const s=document.getElementsByTagName("mjx-assistive-mml");for(;s.length>0;)s[0].remove()}constructor(s,o,a){this.commonService=s,this.sAztCommonCdnService=o,this.answerTypeService=a}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(os.c),e.KVO(on._))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})(),MI=(()=>{var i;class n{processEssayResultToBase64(s){var o=this;return(0,W.A)(function*(){for(const a of s.pages??[]){if(a.draw){const r=yield o.exportPdfUtilsService.convertAndRetryToBase64(a.draw);a.draw=r}if(a.backgroundImage){const r=yield o.exportPdfUtilsService.convertAndRetryToBase64(a.backgroundImage);a.backgroundImage=r}}if(s.commentEmoji&&s.commentEmoji.length){let a="https://azota889.github.io/storage_public/mnote/",r=s.commentEmoji.length;for(let l=0;l<r;l++){let c=a+s.commentEmoji[l];const _=yield o.exportPdfUtilsService.convertAndRetryToBase64(c);s.commentEmoji[l]=_}}return s})()}convertAnswersArr(s,o){0!=s.length&&s.forEach(a=>{a.QuestionId&&a.AnswerContent&&a.AnswerContent[0]&&a.AnswerContent[0].Content&&(o[`id_${a.QuestionId}`]=a.AnswerContent[0].Content)})}findScaleDirection(s,o){return s/o>=.7070707070707071?"w":"h"}constructor(s,o,a){this.commonService=s,this.sAztCommonCdnService=o,this.exportPdfUtilsService=a}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(os.c),e.KVO(_f))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var Ju=A(21524),DI=A(13863),df=A(8534),GI=A(87941);let PI=(()=>{var i;class n{_saveSortTypeOfSetting(s){this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,s)}_removeSortTypeOfSetting(){this.browserStorageService.removeSimpleStorage(this.sortByStorageKey)}_getSortTypeOfSetting(s){return this.browserStorageService.getSimpleStorage(this.sortByStorageKey)==s}_getCurrentSortTypeOfSetting(){return this._getSortTypeOfSetting("isSortByNameAsc")?"isSortByNameAsc":this._getSortTypeOfSetting("isSortByMarkDesc")?"isSortByMarkDesc":this._getSortTypeOfSetting("isSortByTimeDesc")?"isSortByTimeDesc":void 0}_filterExamResultObjsByFilterSettingObjByClassroom(s,o){var a=[];return o.forEach(r=>{r.results=this._filterExamResultObjsByFilterSettingObjNotInClassroom(s,r.results??new Array),a.push(r)}),a}_filterExamResultObjsByFilterSettingObjNotInClassroom(s,o){var a=[];if(s.isMarked||s.isNotMarked||s.isOnTest||s.isNotSubmit||s.isNotTested)for(var r of o){let l=!1,c=s.isOnTest||s.isNotSubmit;s.isMarked&&1==r.isMarked&&(!c||!(1!=r.status&&(r.isMarked||r.isNotMarked)))&&(l=!0),s.isNotMarked&&1==r.isNotMarked&&(!c||!(1!=r.status&&(r.isMarked||r.isNotMarked)))&&(l=!0),s.isOnTest&&(1==r.isOnTest||0==r.status&&(r.isMarked||r.isNotMarked))&&(l=!0),s.isNotTested&&1==r.isNotTested&&(l=!0),s.isNotSubmit&&(1==r.isNotSubmit||-1==r.status&&(r.isMarked||r.isNotMarked))&&(l=!0),l&&a.push(r)}else a=o;return a}_searchExamResultObjsByFullNameInClassroom(s,o){var a=[];return this.commonService.myClone(s).forEach(l=>{var c=this._searchExamResultObjsByFullNameNotInClassroom(l.results??[],o);c.length>0&&(l.results=c,a.push(l))}),a}_searchExamResultObjsByFullNameNotInClassroom(s,o){o=this.commonService.convertVietnameseToEnglish(o).toLowerCase();var a=[];return s.forEach(r=>{-1!=this.commonService.convertVietnameseToEnglish(r.fullName??"").toLowerCase().indexOf(o)&&a.push(r)}),a}_sortExamResultObjsBySettingObjByClassroom(s,o,a){return"isSortByNameAsc"==a?this.sortService.sortFirstNameStudentsInClass(s):"isSortByTimeDesc"==a?this.sortService.sortTimeStudentsInClass(s,1):"isSortByMarkDesc"==a?this.sortService.sortMarkStudentsInClass(s,1,o):this._sortExamResultObjsBySortTypeOfClassroom(s)}_sortExamResultObjsBySettingObjNotInClassroom(s,o,a){return"isSortByNameAsc"==a?this.sortService.sortFirstNameStudents(s):"isSortByTimeDesc"==a?this.sortService.sortTimeDESC(s):"isSortByMarkDesc"==a?this.sortService.sortMarkDESC(s,o):s}_sortExamResultObjsBySortTypeOfClassroom(s){var o=s.map(a=>({...a}));return o.forEach((a,r)=>{a.results=0==a.classObj?.sortType?this.sortService.sortFirstNameStudents(a.results??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(a.results??[],"pos","id"),o[r]=a}),o}_changeExamResultStatusForAllClassroom(s,o,a){var r=[];return s.forEach((l,c)=>{l.results=this._changeExamResultStatusForOneClassroom(l.results??new Array,o),l={indexCounter:c,...l,countSubmitted:a?l.classObj?.countSubmitted:this._countTotalSubmittedOfExamResultObjs(l.results??new Array),showOnTab:l.showOnTab},r.push(l)}),r}_changeExamResultStatusForOneClassroom(s,o){var a=[...s];return a.forEach((r,l)=>{r.confirmedAt&&""!=r.confirmedAt&&r.resultId&&r.resultId>0?r.isMarked=!0:r.resultId&&r.resultId>0&&(!r.confirmedAt||""==r.confirmedAt)?r.isNotMarked=!0:r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||0!=r.status?r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||-1!=r.status?null==r.startedTest&&(r.isNotTested=!0):r.isNotSubmit=!0:r.isOnTest=!0,a[l]=r}),a.forEach((r,l)=>{r.files&&""!=r.files&&!Array.isArray(r.files)&&(r.filesParse=this.commonService.myParseJson(r.files)),a[l]=r}),a}_countTotalSubmittedOfExamResultObjs(s){var o=0;return s.forEach(a=>{(a.isMarked||a.isNotMarked)&&o++}),o}_counterTotalEssayOfQuestionObjs(s){let o=0;return s.forEach(a=>{this.answerTypeService.isEssayAnswer(a)&&o++}),o}_checkCounterEssayQuestionObjs(s){let o=0;return s.forEach(a=>{a.isEssay&&o++}),o}constructor(s,o,a,r){this.commonService=s,this.sortService=o,this.browserStorageService=a,this.answerTypeService=r,this.sortByStorageKey="exam_list_sort_by"}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(Hu.g),e.KVO(zi.z),e.KVO(on._))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})(),NI=(()=>{var i;class n{constructor(s,o,a,r,l,c,_,d){this.commonService=s,this.examPageResultService=o,this.permissionService=a,this.globalService=r,this.browserStorageService=l,this.gzipHelper=c,this.homeworkExamService=_,this.sAztExamResultListSortService=d}getTestedUserObjs(s,o,a){return this.globalService.startIntervalFunc(s),this.getTestedOfExamResult(s,o,"default",a)}getTestedLastMark(s,o,a){return this.globalService.startIntervalFunc(s),this.getTestedOfExamResult(s,o,"last",void 0,a)}getTestedHighestMark(s,o,a){return this.globalService.startIntervalFunc(s),this.getTestedOfExamResult(s,o,"highest",void 0,a)}getTestedFirstMark(s,o,a){return this.globalService.startIntervalFunc(s),this.getTestedOfExamResult(s,o,"first",void 0,a)}getTestedAllResult(s,o,a){return this.globalService.startIntervalFunc(s),this.getTestedOfExamResult(s,o,"all",void 0,a)}getTestedOfExamResult(s,o,a,r,l){return new xt.c(c=>{let _="tested_list_result_v2_"+o,d=this.browserStorageService.getSimpleSessionStorage(_)??"",p=this.gzipHelper.resultContentSupport(d),f=p&&this.commonService.willDeleteParseJson(p)?this.commonService.willDeleteParseJson(p):void 0;r&&d&&f?(c.next({status:200,success:1,data:f,message:"successful"}),c.complete()):this.examPageResultService.apiExamPageResultGetNewObjV2Post({examId:o,classroomIds:l,getQuestion:1}).subscribe(I=>{if(1==I.success){let k=I.data?.serverSecond??0,O=I.data?.examObj,j=I.data?.classroomWithAvatarAndStudentObjs??new Array,V=I.data?.totalAttended??0,N=I.data?.examQuestionObjs??new Array,X=I.data?.examCreatorObj,te=I.data?.offlineExamObj,S=I.data?.hasEssayQuestion,x=I.data?.totalQuestion??0,C=I.data?.offlineMixQuestionObjs,E=I.data?.canResetStudentCode,R=I.data?.hasCreateStudentCode,P=I.data?.fileTypeStr??"";this.permissionService.hasViewExamPermission("exam",O)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",O)?this.getAllExamResultObjs(s,[],o,"",w=>{if(w.hasOwnProperty("success")&&1==w.success){let Be=this.mergeStudentWithAvatar(w.studentWithResultObjs??[]),Ze={},Rt=[];Be?.forEach(ve=>{let Qe=ve.parentId??"0";Ze.hasOwnProperty(Qe)?Ze[Qe].push(...ve.examResultObjs??[]):Ze[Qe]=ve.examResultObjs??[],Rt=Rt.concat(Ze[Qe])});let Gt=O?this.filterExamResultOnTest(Rt,O,k):{},st=[],Ct=[];if(this.homeworkExamService.mustInClassroom(O)&&j.length>0)for(let ve=0;ve<j.length;ve++){let Qe=j[ve].classroomObj;Qe.classroomGroup=j[ve].classroomGroup;let Ge=j[ve].studentObjs??[],St=[];if(Ge.length>0)for(let Ne=0;Ne<Ge.length;Ne++){let Sn=Ge[Ne].parentId??"0";this.commonService.isExistInArray(Ct,Ge[Ne].parentId)||Ct.push(Ge[Ne].parentId??"0"),Ze.hasOwnProperty(Sn)&&(Array.isArray(Ge[Ne].examResultObjs)||(Ge[Ne].examResultObjs=[]),Ge[Ne].examResultObjs=this.findExamResultOfStudent(Ze[Sn],Ge[Ne].id??"0"));let wn=Gt.hasOwnProperty(Ge[Ne].parentId??0)?Gt[Ge[Ne].parentId??0]:0;if("all"==a)if(Ge[Ne].examResultObjs?.length)Ge[Ne].examResultObjs?.forEach((en,_n)=>{let ln=this.commonService.castJsonToObj(JSON.stringify(en));ln&&(ln.resultId=ln.testStatus&&ln.testStatus>0?ln.id:0);let Ls=this.createStudentWithResult(Ge[Ne],ln,wn,x,_n,Ge[Ne].examResultObjs?.length??0);St.push(Ls)});else{let en=this.createStudentWithResult(Ge[Ne],void 0,wn,x,-1,0);St.push(en)}else{let en=this.filterExamResultByType(Ge[Ne].examResultObjs??[],a),_n=en.hasOwnProperty(Ge[Ne].parentId??0)?en[Ge[Ne].parentId??0]:void 0,Ls=this.createStudentWithResult(Ge[Ne],_n,wn,x,(_n&&null!=_n.indexTest&&_n.indexTest>=0?_n.indexTest:"first"==a?0:(Ge[Ne].examResultObjs?.length??0)-1)??0,Ge[Ne].examResultObjs?.length??0);St.push(Ls)}}st.push({classObj:Qe,results:St})}let et=[],Ue=this.commonService.myClone(Be)??[];for(let ve=0;ve<Ue?.length;ve++)if(!this.commonService.isExistInArray(Ct,Ue[ve].parentId)){let Qe=Gt.hasOwnProperty(Ue[ve].parentId??0)?Gt[Ue[ve].parentId??0]:0;if("all"==a)if(Ue[ve].examResultObjs?.length)Ue[ve].examResultObjs?.forEach((Ge,St)=>{let Ne=this.commonService.castJsonToObj(JSON.stringify(Ge));Ne&&(Ne.resultId=Ne.testStatus&&Ne.testStatus>0?Ne.id:0);let Sn=this.createStudentWithResult(Ue[ve],Ne,Qe,x,St,Ue[ve].examResultObjs?.length??0);et.push(Sn)});else{let Ge=this.createStudentWithResult(Ue[ve],void 0,Qe,x,-1,0);et.push(Ge)}else{let Ge=this.filterExamResultByType(Ue[ve].examResultObjs??[],a),St=Ge.hasOwnProperty(Ue[ve].parentId??0)?Ge[Ue[ve].parentId??0]:void 0,Sn=this.createStudentWithResult(Ue[ve],St,Qe,x,(St&&null!=St?.indexTest&&St.indexTest>=0?St.indexTest:"first"==a?0:(Ue[ve].examResultObjs?.length??0)-1)??0,Ue[ve].examResultObjs?.length??0);et.push(Sn)}}"all"!=a&&et.sort((ve,Qe)=>this.compareTwoDate(ve.createdAt??"",Qe.createdAt??""));let Xe=0;(st.length||et.length)&&(st.forEach(ve=>{ve.results?.forEach(Qe=>{let Ge=this.getMaxGroupId(Qe.groupPoints??[]);Xe<Ge&&(Xe=Ge)})}),et.forEach(ve=>{let Qe=this.getMaxGroupId(ve.groupPoints??[]);Xe<Qe&&(Xe=Qe)})),"export_tool"==s&&l?.length&&(st=st.filter(ve=>this.commonService.isExistInArray(l,ve.classObj?.id)),this.commonService.isExistInArray(l,-1)||(et=[]));let Pe={studentsInClassResults:st.length>0?st:[],studentsNotInClassResults:et.length>0?et:[],totalAttended:V,totalQuestion:x,totalUsers:0,examCreatorObj:X,offlineMixQuestionObjs:C,examObj:O,hasEssayQuestion:S,offlineExamObj:te,canResetStudentCode:E,hasCreateStudentCode:R,questionObjs:N,fileTypeStr:P,errorConfigClassroomPermission:I.data?.errorConfigClassroomPermission,errorMessage:I.data?.errorMessage,maxGroupId:Xe,rawQuestionObjs:I.data?.questionObjs};if("export_tool"!=s){let ve=this.gzipHelper.zipBigContent(JSON.stringify(Pe));this.browserStorageService.saveSimpleSessionStorage(_,ve)}c.next({status:200,success:1,data:Pe,message:"successful"}),c.complete()}else c.next({status:w.code,success:0,data:null,message:w.message??""}),c.complete()}):(c.next({status:200,success:1,data:{studentsInClassResults:[],studentsNotInClassResults:[],totalAttended:V,totalQuestion:x,hasEssayQuestion:S,totalUsers:0,examCreatorObj:X,offlineMixQuestionObjs:C,examObj:O,offlineExamObj:te,canResetStudentCode:E,hasCreateStudentCode:R,questionObjs:N,fileTypeStr:I.data?.fileTypeStr,errorConfigClassroomPermission:I.data?.errorConfigClassroomPermission,errorMessage:I.data?.errorMessage,maxGroupId:0,rawQuestionObjs:I.data?.questionObjs},message:"successful"}),c.complete())}else c.next({status:I.code,success:0,data:null,message:I.message??""}),c.complete()})})}getAllExamResultObjs(s,o,a,r,l){this.examPageResultService.apiExamPageResultGetObjsV2Get(a,"test_review"==s||"export_tool"==s?"export":"tested_list",r).subscribe(_=>{1==_.success?(_.data?.objs&&o.push(..._.data.objs),_.data?.nextPage?this.globalService.isStopIntervalFunc(s)?l({studentWithResultObjs:o,success:1}):setTimeout(()=>{this.getAllExamResultObjs(s,o,a,_.data?.nextPage??"",l)},300):l({studentWithResultObjs:o,success:1})):l({code:_.code,studentWithResultObjs:[],success:0,message:_.message??""})})}compareTwoDate(s,o){var a=new Date(s).getTime();a=isNaN(a)?0:a;var r=new Date(o).getTime();return a-(r=isNaN(r)?0:r)>0?1:a-r<0?-1:0}filterExamResultOnTest(s,o,a){var r={};return s.forEach(l=>{var c=this.commonService.myClone(l)??{};if(c.testStatus)r[c.userId??0]=c.testStatus;else if(c.startedTest&&a)if(o.endTime){var _=Math.floor(new Date(o.endTime).getTime()/1e3);r[c.userId??0]=a<=_+60*(o.minutes??0)+600?0:-1}else{var d=c.startedTest?Math.floor(new Date(c.startedTest).getTime()/1e3):0;r[c.userId??0]=a<=d+86400?0:-1}else r[c.userId??0]=0}),r}filterExamResultByType(s,o){var a={};if(s.length>1)s.forEach((l,c)=>{var _=this.commonService.myClone(l);l.testStatus&&(_.resultId=_.id,_.indexTest=c,"default"==o&&(a[_.userId??0]=_),"last"==o&&(a[_.userId??0]=_),"first"==o&&(a.hasOwnProperty(_.userId??0)||(a[_.userId??0]=_)),"highest"==o)&&(a.hasOwnProperty(_.userId??0)?(a[_.userId??0].mark??-1)<=(_.mark??-1)&&(a[_.userId??0]=_):a[_.userId??0]=_)});else{var r=this.commonService.myClone(s[0]??{});r.resultId=r.testStatus?r.id:0,r.indexTest=0,a[r.userId??0]=r}return a}findExamResultOfStudent(s,o){var a=[];return s.forEach(r=>{(r.studentId==o||null==r.studentId)&&a.push(r)}),a}addResultIdToExamResult(s){var o=[];return s.forEach(a=>{var r=this.commonService.myClone(a)??{};r.resultId=r.id,r.testStatus&&o.push(r)}),o}compareLengthWithExamQuestion(s,o){var a=this.commonService.myClone(s);if(o>0&&s.length<o)for(var r=0;r<o-s.length;r++)a.push("");return a}mergeStudentWithAvatar(s){var o=[];return s.forEach(a=>{var r=o.filter(c=>c.parentId==a.parentId);if(r&&0!=r.length)for(var l=0;l<o.length;l++)o[l].parentId==a.parentId&&(o[l].examResultObjs=o[l].examResultObjs?.concat(a.examResultObjs??[]));else o.push(a)}),o}createStudentWithResult(s,o,a,r,l,c){return{id:s.id,userId:s.parentId,studentId:s.id,identificationNumber:o?.examResultStatisticObj?.offlineMarkInfoObj?.studentCode??s.identificationNumber??0,offlineMixQuestionHashId:o?.offlineMark?.rawOfflineMixquestionId??0,studentCode:o?.offlineMark?.studentCode??0,gender:s.gender,fullName:s.fullName,avatar:s.avatar,birthday:s.birthday,resultId:o?.hasOwnProperty("resultId")?o.resultId:0,answers:o?.hasOwnProperty("answers")?o.answers:null,rightAnswer:o?.hasOwnProperty("rightAnswer")?o.rightAnswer:0,totalQuestion:o?.hasOwnProperty("totalQuestion")?o.totalQuestion:0,mark:o?.hasOwnProperty("mark")?o?.mark:null,trueFalseMark:o?.hasOwnProperty("trueFalseMark")?o.trueFalseMark:null,essayMark:o?.hasOwnProperty("essayMark")?o.essayMark:null,files:o?.hasOwnProperty("files")?o.files:null,infors:o?.hasOwnProperty("infors")?o?.infors:null,confirmedAt:o?.hasOwnProperty("confirmedAt")?o?.confirmedAt:null,startedTest:o?.hasOwnProperty("startedTest")?o?.startedTest:null,createdAt:o?.hasOwnProperty("createdAt")?o.createdAt:null,totalExamResultObjs:s.examResultObjs.length,answeredQuestions:o?.hasOwnProperty("answeredQuestions")?o.answeredQuestions:[],groupPoints:this.getGroupPoints(o?.answeredQuestions?o?.answeredQuestions:[]),classroomIds:[],eventTracks:{exitCount:o?.examTrackObj?.exitFullScreen,blurCount:o?.examTrackObj?.blurWindow},status:a,nameImages:s.nameImages,nameImage:"",answerMixObjs:this.compareLengthWithExamQuestion(o?.answerMixObjs??[],r)??[],testedTime:l+1,totalTestTime:c,subjectMarkValues:o?.subjectMarks,isOffline:o?.isOffline??!1,countEssayQuestion:this.sAztExamResultListSortService._checkCounterEssayQuestionObjs(o?.hasOwnProperty("answeredQuestions")&&o?.answeredQuestions?o.answeredQuestions:[]),checkBoxGroupControl:new g.gE({isShow:new g.MJ(!1,{nonNullable:!0}),selectedCheckbox:new g.MJ(!1,{nonNullable:!0})}),questionTypeMarks:o?.questionTypeMarks??[],schoolName:s.schoolName??"",phone:s.phone??"",email:s.email??"",userName:s?.userName??""}}getGroupPoints(s){let o=[];return s.forEach(a=>{let r=!1;for(let l=0;l<o.length;l++)o[l].id==a.groupId&&(r=!0,o[l].point+=a.correct&&a.scorePerQuestion?a.scorePerQuestion:0);!r&&a.groupId&&o.push({id:a.groupId,point:a.correct&&a.scorePerQuestion?a.scorePerQuestion:0})}),o.sort((a,r)=>(a.id??0)-(r.id??0)),o}getMaxGroupId(s){let o=[];return s.forEach(a=>{a.id&&!this.commonService.isExistInArray(o,a.id)&&o.push(a.id)}),o.length}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(Nu.TE),e.KVO(rf.p),e.KVO(df.r),e.KVO(zi.z),e.KVO(GI.f),e.KVO(pa.Z),e.KVO(PI))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var VI=A(78839),LI=A(84113);let BI=(()=>{var i;class n{processHomeworks(s,o){return new Promise((a,r)=>{this.reset(),this.logger.start(this.commonService.myTranslateInstant("lang_cms_common_loading")),this.answerService.apiAnswerGetStudentsHomeworkGet(o).subscribe(l=>{if(1==l.success){this.logger.remove();var c=[];l.data?.studentObjs.forEach(_=>{c.push({id:_.id,fullName:_.fullName,confirmedAt:_.confirmedAt,homeworkAnswerId:_.answer?.id,studentId:void 0,resultId:void 0,userId:void 0,nameImages:void 0,reId:"",status:void 0})}),this.sAztDialogService.open(uf,{width:"750px",restoreFocus:!1,data:{studentsInClassResults:[{classObj:l.data?.classroomObj,results:c,schoolName:void 0,subjectName:void 0,departmentName:void 0,indetifyBox:void 0,timeBox:void 0}],examHasEssay:!1,isAskInfo:!1}}).afterClosed().subscribe(_=>{if(_){this.logger.start(`${this.commonService.myTranslateInstant("lang_auto_chuan_bi_xuat_ket_qua_cho")} ${1===_.results?.length?"":_.results?.length} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`);const d=new rn(!0);this.logger.pushChild(d),this.loadLibAction(d).then(()=>{this.logger.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang_tao_tep_tin_ket_qua_bai_lam_cho")} ${1===_.results?.length?"":_.results?.length} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`);const p=new rn(!0);this.logger.pushChild(p);const f=new Ps.n(1,{function:(b,I,y)=>{p.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tao_tep_tin_cho_hoc_sinh")} ${1===I?"":"th\u1ee9 "+(b+1)} ${y?": "+y:""}`)}});_.results?.forEach(b=>{const I=new rn;p.pushChild(I),f.addTask(this,this.makeFileHomework,[o,b,I],b.fullName??"")}),f.start().then(b=>{p.remove(),0===b.errs.length?this.finishHomework(_.classObj?.name??"",l.data?.homeworkObj?.name??"",b,a,r):(this.logger.remove(),this.sAztDialogService.open(cf,{data:{result:b},restoreFocus:!1}).afterClosed().subscribe(I=>{I&&(this.logger.start(`${this.commonService.myTranslateInstant("lang_testbank_export_pdf_by_user_processing")} ...`),this.finishHomework(_.classObj?.name??"",l.data?.homeworkObj?.name??"",b,a,r))}))})}).catch(p=>{this.logger.remove(),r(p)})}})}else this.logger.remove(),r(new Error(this.commonService.myTranslateInstant(l.message)))})})}processClasses(s,o){return new Promise((a,r)=>{let l;switch(this.reset(),this.logger.start(this.commonService.myTranslateInstant("lang_cms_common_loading")),o){case"highest":l=this.testedListApiService.getTestedHighestMark("export_tool",s);break;case"first":l=this.testedListApiService.getTestedFirstMark("export_tool",s);break;default:l=this.testedListApiService.getTestedLastMark("export_tool",s)}l.subscribe(c=>{if(1==c.success){this.logger.remove();let _=!!c.data?.questionObjs?.filter(p=>this.answerTypeService.isEssayAnswer(p)).length,d=[];if(c.data?.studentsInClassResults?.forEach(p=>{let f=[];p.results?.forEach(b=>{f.push({id:b.id?Number(b.id):void 0,fullName:b.fullName??"",confirmedAt:b.confirmedAt,studentId:b.studentId?Number(b.studentCode):void 0,resultId:b.resultId,userId:b.userId?.toString(),nameImages:b.nameImages,reId:"",status:b.status})}),d.push({classObj:p.classObj,results:f,schoolName:void 0,subjectName:void 0,departmentName:void 0,indetifyBox:void 0,timeBox:void 0})}),c.data?.studentsNotInClassResults&&c.data?.studentsNotInClassResults?.length>0){let p=[];c.data.studentsNotInClassResults.forEach(f=>{p.push({id:f.id?Number(f.id):void 0,fullName:f.fullName??"",confirmedAt:f.confirmedAt,studentId:f.studentId?Number(f.studentCode):void 0,resultId:f.resultId,userId:f.userId?.toString(),nameImages:f.nameImages,reId:"",status:f.status})}),d.push({classObj:{id:0,name:this.commonService.myTranslateInstant("lang_auto_tu_do")??""},results:p,schoolName:void 0,subjectName:void 0,departmentName:void 0,indetifyBox:void 0,timeBox:void 0})}this.sAztDialogService.open(uf,{data:{studentsInClassResults:d,examHasEssay:_,isAskInfo:!0},restoreFocus:!1,width:"750px"}).afterClosed().subscribe(p=>{p?this.sAztDialogService.open(dI.T,{data:{transactionType:"export-docx",times:p.results?.length,returnUrl:this.commonService.getCurrentUrlWithoutLocale()},hasBackdrop:!1}).afterClosed().subscribe(f=>{if("cancel"==f||"upgrade"==f)return this.logger.remove(),void a();this.expandInfoParse=this.commonService.castJsonToObj(c.data?.examObj?.expandInfo??"{}")??{},this.logger.start(`${this.commonService.myTranslateInstant("lang_auto_xuat_ket_qua_cho")} ${1===p.results?.length?"":p.results?.length} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`),this.processConvertDataClassroom(s,p,p.classObj?.name??"",c.data?.examObj,p.classObj?.id).then(()=>{this.logger.remove(),a()}).catch(I=>{this.logger.remove(),r(I)})}):(this.logger.remove(),a())})}else this.logger.remove(),r(new Error(this.commonService.myTranslateInstant(c.message)??""))})})}processUser(s,o,a,r,l,c=!0,_,d,p,f){return new Promise((b,I)=>{this.reset(),l=l||this.logger,l?.start(`${this.commonService.myTranslateInstant("lang_auto_chuan_bi_xuat_ket_qua_cho")} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`);const y=new rn(!0);l?.pushChild(y),this.loadLibAction(y).then(()=>{l?.pushMsg(this.commonService.myTranslateInstant("lang_cms_common_loading")??""),this.examResultService.apiExamResultGetLastResultGet(s,a??"",r??"",o,f).subscribe(k=>{if(1==k.success){this.expandInfoParse=this.commonService.castJsonToObj(k.data?.examObj?.expandInfo??"{}")??{},l?.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang")} ${this.commonService.myTranslateInstant("lang_auto_tao_tep_tin_cho_hoc_sinh")}`);let O=this.commonService.myTranslateInstant("lang_auto_tu_do")??"";const j=k.data?.studentObj;l?.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang")} ${this.commonService.myTranslateInstant("lang_auto_tao_tep_tin_cho_hoc_sinh")} ${j?.fullName??""}`);let V="";V=k.data?.classroomObj?k.data?.classroomObj.name??O:O;const N=k.data?.examTracks,X=k.data?.examObj,te=k.data?.examResultObj,S=this.commonService.castJsonToClassObjs(vr.I,JSON.stringify(k.data?.questionObjs))??[];let x=0,C=0;for(let w=0;w<S.length;w++)S[w].correctAnswer=this.commonService.isExistInArray(k.data?.correctQuestionIds,S[w].id),S[w].indexLabel=w+(X?.startQuestionIndex??1),X?.resetQuestionIndex&&S[w].groupInfo&&S[w].groupInfo?.groupId&&(S[w].groupInfo&&x!=S[w].groupInfo?.groupId&&(x=S[w].groupInfo?.groupId??0,C=0),S[w].labelIndex=C+(X?.startQuestionIndex??1),C++);const E={};let R=this.commonService.castJsonToObj(k.data?.examResultObj?.answers??"");this.exportPdfConvertDataService.convertAnswersArr(R??[],E);const P=new rn;l?.pushChild(P),this.processConvertDataUser(P,S,j,te).then(w=>{if(w){var Be=0;this.convertDataMarkNote(w?.resultTeacherDraw).then(Ze=>{this.loadTeacherDrawResult(Ze,l??new rn,j?.fullName??this.commonService.myTranslateInstant("lang_cms_test_offline_title")??"",w).then(Rt=>{w=Rt,P.remove();const Gt=new rn(!0,this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_file_word")+`...${Be}%`);l?.pushChild(Gt);let st=[];st.push({content:this.getLineInfoData(V,X,N,te,j,S,w,_).join("<br/>")+"<br/><br/><br/>",answers:[]}),st=st.concat(this.startGenUserLineFile(te,S,w,d,p));var Ct=0;this.sAztDocxService.exportToDocxBinary((0,Ee.Wn)(st),{isHeadless:!0},(et,Ue,Xe)=>{new Promise(Pe=>{setTimeout(()=>{0==et&&(Be=Ct),Ct=et/Ue*50+Be;const ve=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_file_word")+"..."+Math.floor(Ct)+"%";Gt?.pushMsg(ve)}),Pe(!0)})}).then(et=>{const Ue=new Blob([et],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});let Xe=this.commonService.createFileNameExportFile([j?.fullName??this.commonService.myTranslateInstant("lang_cms_test_offline_title")??"",te?.id?te.id.toString():""])+"_test_result";if(c)if(w.mediaAnswerWraps.concat(w.mediaWraps).length>0){const Pe=new Po;Pe.file(Xe+".docx",Ue),w.mediaAnswerWraps.concat(w.mediaWraps).forEach(ve=>{const Qe=new Blob([ve]);Pe.file("attachments/"+this.replaceParamFileName(ve.name),Qe)}),Pe.generateAsync({type:"blob"}).then(ve=>{let Qe=this.commonService.createFileNameExportFile([V,Xe])+"_attachments_exam_result.zip";this.shareFileFlutterService.shareFileWithBlob(ve,Qe),l?.remove(),b()},ve=>{l?.remove(),b(ve)})}else this.shareFileFlutterService.shareFileWithBlob(Ue,Xe+".docx"),l?.remove(),b();else l?.remove(),b({name:Xe,blob:Ue,medias:w.mediaAnswerWraps.concat(w.mediaWraps)})})})})}}).catch(w=>{l?.remove(),I(w)})}else l?.remove(),I(new Error(this.commonService.myTranslateInstant(k.message)))})}).catch(k=>{l?.remove(),I(k)})})}finishClassroom(s,o,a,r,l){if(a.length>1){const c=new Po;a.forEach(_=>{_.medias.length>0?(c.file(_.name+"/"+_.name+".docx",_.blob),_.medias.forEach(d=>{const p=new Blob([d]);c.file(_.name+"/attachments/"+this.replaceParamFileName(d.name),p)})):c.file(_.name+".docx",_.blob)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([s,o])+"_exam_result.zip";this.shareFileFlutterService.shareFileWithBlob(_,d),r()},_=>{r(_)})}else if(a[0].medias.length>0){const c=new Po;c.file(a[0].name+"/"+a[0].name+".docx",a[0].blob),a[0].medias.forEach(_=>{const d=new Blob([_]);c.file(a[0].name+"/attachments/"+this.replaceParamFileName(_.name),d)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([s,o])+"_attachments_exam_result.zip";this.shareFileFlutterService.shareFileWithBlob(_,d),r()},_=>{r(_)})}else this.shareFileFlutterService.shareFileWithBlob(a[0].blob,a[0].name+".docx"),r()}finishHomework(s,o,a,r,l){if(1===a.datas.length)if(a.datas[0].medias.length>0){const c=new Po;c.file(a.datas[0].name+"/"+a.datas[0].name+".docx",a.datas[0].blob),a.datas[0].medias.forEach(_=>{const d=new Blob([_]);c.file(a.datas[0].name+"/attachments/"+this.replaceParamFileName(_.name),d)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([s,a.datas[0].name])+"_attachments_exam_result.zip";this.logger.remove(),this.shareFileFlutterService.shareFileWithBlob(_,d),r()},_=>{this.logger.remove(),r(_)})}else this.shareFileFlutterService.shareFileWithBlob(a.datas[0].blob,a.datas[0].name+".docx"),this.logger.remove(),r();else{this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_nen_zip_cac_bai_lam_cua_hoc_sinh")??"");const c=new Po;a.datas.forEach(_=>{_.medias.length>0?(c.file("results/"+_.name+"/"+_.name+".docx",_.blob),_.medias.forEach(d=>{const p=new Blob([d]);c.file("results/"+_.name+"/attachments/"+this.replaceParamFileName(d.name),p)})):c.file("results/"+_.name+".docx",_.blob)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([s,o])+"_homework_result.zip";this.shareFileFlutterService.shareFileWithBlob(_,d),this.logger.remove(),r()},_=>{this.logger.remove(),l(_)})}}makeFileHomework(s,o,a){return new Promise((r,l)=>{a.start(this.commonService.myTranslateInstant("lang_cms_common_loading")??""),this.answerService.apiAnswerGetObjGet(s,o.homeworkAnswerId??0).subscribe(c=>{if(a.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_giai_nen_ket_qua_bai_lam")??""),this.zipDataService.convertSubmittedAnswersObj(c.data?.answerObj),c.data?.answerObj){a.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_tep_tin")??"");let d=this.commonService.castJsonToObj(c.data.answerObj.result??"")??{};this.convertDataMarkNote(d).then(p=>{this.loadTeacherDrawResult(p,a,o.fullName??"").then(f=>{a.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_tep_tin")??"");let b=[];[`<b>${this.commonService.myTranslateInstant("lang_auto_ho_va_ten")}</b>: ${c.data?.studentObj?.fullName} <br/>`,`<b>${this.commonService.myTranslateInstant("lang_auto_lop_hoc")}</b>: ${c.data?.classroomObj?.name} <br/>`,`<b>${this.commonService.myTranslateInstant("lang_auto_bai_tap")}</b>: ${c.data?.homeworkObj?.name} <br/>`,`<b>${this.commonService.myTranslateInstant("lang_auto_ma_bai_lam")}</b>: ${c.data?.answerObj?.id} <br/>`].forEach(y=>{b.push({content:y,answers:[]})});let I=this.commonService.castJsonToObj(c.data?.answerObj?.resultNote??"");if(I){const y=[{mark:1e3,lang:"lang_auto_dat"},{mark:1001,lang:"lang_auto_chua_dat"},{mark:2e3,lang:"lang_auto_hoan_thanh"},{mark:2001,lang:"lang_auto_chua_hoan_thanh"},{mark:3e3,lang:"lang_auto_hoan_thanh_tot"}],k=document.createElement("p");k.innerText=this.commonService.myTranslateInstant("lang_point")??"",k.setAttribute("docx-style",Ee.$s.get("TB_RESULT_TXT"));const O=document.createElement("p");let j=c.data?.answerObj?.point;y.forEach(X=>{X.mark===j&&(j=this.commonService.myTranslateInstant(X.lang))}),O.innerText=j?.toString()??"",O.setAttribute("docx-style",Ee.$s.get("TB_RESULT_POINT"));const V=document.createElement("p");V.setAttribute("docx-style",Ee.$s.get("TB_RESULT_TXT")),V.innerText=this.commonService.myTranslateInstant("lang_homework_homework_frontend_submit_homework_comment")??"";const N=document.createElement("span");N.setAttribute("docx-style",Ee.$s.get("TB_RESULT_COMMENT")),0===I?.IsHideMark&&(N.innerText=this.getTextContentInTagHTML(I.Note),f.resultTeacherDraw?.commentEmoji&&(N.appendChild(document.createElement("br")),f.resultTeacherDraw.commentEmoji.forEach(X=>{if(f.canvasList[X]){const te=new Image;te.src=f.canvasList[X].toDataURL(),te.style.width=f.canvasList[X].width/5+"px",te.style.height=f.canvasList[X].height/5+"px",N.appendChild(te)}}))),b.push({content:Ee.$s.makeHeaderTable([k,O],[V,N]),answers:[]})}b=b.concat(this.getLineImageAnswer(f)),this.sAztDocxService.exportToDocxBinary((0,Ee.Wn)(b),{isHeadless:!0},(y,k,O)=>{}).then(y=>{a.remove();const k=new Blob([y],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});let O=`${this.commonService.convertVietnameseToEnglish(o.fullName??"")}_${c.data?.answerObj?.id??0}`;r({name:O,blob:k,medias:f.mediaAnswerWraps.concat(f.mediaWraps)})})}).catch(f=>{a.remove(),l(f)})})}else a.remove(),l(new Error(this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_ket_qua_hoc_sinh")))})})}processConvertDataClassroom(s,o,a,r,l){return new Promise((c,_)=>{const d=new Ps.n(1,{function:(b,I)=>{this.logger.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_xuat_ket_qua_cho_hoc_sinh")}${1===I?"":` (${b+1}/${I})`}`),this.logger.percent=b/I}},1e3),p=[];let f=this.homeworkExamService.isOfflineExam(r);o.results?.forEach(b=>{d.addTask(this,()=>new Promise((I,y)=>{const k=new rn(!0,"");this.logger.pushChild(k),this.processUser(s,Number(b.resultId),b.userId,b.studentId?.toString(),k,!1,o,f,void 0,l).then(O=>{O?(k.remove(),p.push(O),I()):(k.remove(),y(new Error))}).catch(O=>{k.remove(),y(O)})}))}),d.start().then(b=>{b.errs.length>0?(this.logger.remove(),b.datas=p,this.sAztDialogService.open(cf,{data:{result:b},restoreFocus:!1}).afterClosed().subscribe(I=>{I&&(this.logger.start(`${this.commonService.myTranslateInstant("lang_testbank_export_pdf_by_user_processing")} ...`),this.finishClassroom(a,r?.name??"",p,c,_))})):this.finishClassroom(a,r?.name??"",p,c,_)})})}processConvertDataUser(s,o,a,r){return new Promise((l,c)=>{let _={canvasList:[],mediaWraps:[],mediaAnswerWraps:[],isExportAnsMedia:!0},d=(this.commonService.myParseJson(r?.files??"[]")??[]).filter(O=>(0,Mi.rl)(O.mimes??"")||(0,Mi.nL)(O.mimes??""));s.start();const k=new Ps.n(1,{function:(O,j,V)=>{s.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tien_trinh")} ${O+1}/${j}: ${V}`)}});k.addTask(this,()=>new Promise((O,j)=>{const V=new rn(!0);s.pushChild(V),this.questionRenderService.parseRenderQuestions(o,N=>{V.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tien_do_tai_du_lieu_cau_hoi")}: ${Math.floor(N)}%`)},void 0,50,!0).then(()=>{V.remove(),O()}).catch(N=>{const X=te=>{Object.prototype.hasOwnProperty.call(te,"type")&&"LOAD_IMAGE"===te.type?j(new Error(`${te.message} ${this.commonService.trimMidLimitLength(te.data[0],30)}`)):j(N)};V.remove(),Array.isArray(N)?X(N[0]):X(N)})}),[],this.commonService.myTranslateInstant("lang_auto_tai_du_lieu_cau_hoi")),r&&r.result&&k.addTask(this,()=>new Promise((O,j)=>{this.loadTeacherDrawResult(this.commonService.castJsonToObj(r?.result??"")??{},s,a?.fullName??"").then(V=>{_=V,O()}).catch(V=>{j(V)})}),[],this.commonService.myTranslateInstant("lang_auto_tai_du_lieu_cham_tu_luan_cua_giao_vien")),k.addTask(this,()=>new Promise((O,j)=>{a?this.loadNameImage(a).then(V=>{a=V,O()}).catch(V=>{j(V)}):j(new Error)}),[],this.commonService.myTranslateInstant("lang_auto_tai_hinh_anh_ten_hoc_sinh")),_.isExportMedia&&k.addTask(this,()=>new Promise((O,j)=>{const V=new rn(!0);s.pushChild(V);const N=new Ps.n(3,{function:(X,te)=>{V.pushMsg(`${this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin")} (${X}/${te})`)}},100);o.forEach(X=>{X.attachments&&X.attachments.length>0&&X.attachments.forEach(te=>{N.addTask(this,this.loadAztFile,[te,_,"att"])})}),N.start().then(X=>{0===X.errs.length?(V.remove(),O()):(V.remove(),j(X.errs[0]))})}),[],this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin_dinh_kem")),d.length&&k.addTask(this,()=>new Promise((O,j)=>{const V=new rn(!0);s.pushChild(V);const N=new Ps.n(3,{function:(X,te)=>{V.pushMsg(`${this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin")} (${X}/${te})`)}},100);d.forEach(X=>{N.addTask(this,this.loadAztFile,[X,_,"ans"])}),N.start().then(X=>{0===X.errs.length?(V.remove(),O()):(V.remove(),j(X.errs[0]))})}),[],this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin_dinh_kem_tu_luan")),k.start().then(O=>{s.remove(),0===O.errs.length?(this.exportPdfUtilsService.parseEssayMarkResult(o,r),l(_)):c(O.errs[0])})})}hasMultiple(s){let o=!1;for(let a=0;a<s.length;a++)if(this.answerTypeService.isOneChoiceAnswer(s[a])){o=!0;break}return o}hasEssay(s){let o=!1;for(let a=0;a<s.length;a++)if(this.answerTypeService.isEssayAnswer(s[a])){o=!0;break}return o}getLineInfoData(s,o,a,r,l,c,_,d){const p=[];p.push(Ee.$s.makeHeaderTable([Ee.$s.createLineCenterBold(d?.departmentName?d.departmentName:""),Ee.$s.createLineCenterBold(d?.schoolName?d.schoolName?.toUpperCase():`{ ${this.commonService.myTranslateInstant("lang_testbank_utils_footer_information_school")?.toUpperCase()} }`)],[Ee.$s.createLineCenterBold(o?.name?.toUpperCase()??"{"+this.commonService.myTranslateInstant("lang_notify_list_tested")?.toUpperCase()+"}"),Ee.$s.createLineCenterItalicized(`${this.commonService.myTranslateInstant("lang_azt_subject")}: ${d?.subjectName?d.subjectName:"..."} ${d?.indetifyBox?" - "+d?.indetifyBox:""}`),Ee.$s.createLineCenterItalicized(o?.minutes||d?.timeBox?(this.commonService.myTranslateInstant("lang_auto_thoi_gian_lam_bai")??"")+": "+(d?.timeBox?d.timeBox:o?.minutes)+" "+this.commonService.myTranslateInstant("lang_auto_minute")+" ("+this.commonService.myTranslateInstant("lang_core_khong_ke_thoi_gian_giao_de")+")":this.commonService.myTranslateInstant("lang_auto_thoi_gian_lam_bai")+": "+this.commonService.myTranslateInstant("lang_auto_khong_gioi_han"))]));const f=c.filter(b=>this.answerTypeService.isEssayAnswer(b)).length;return l&&l.nameImages&&parseInt(l?.id??"0")<=0?p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_thi_sinh")}</b>: <img src="${l?.nameImages.url}" />`):p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_thi_sinh")}</b>: ${l?.fullName}`),p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_lop")}</b>: ${s}`),o?.subjectMarks&&r?.subjectMarkValues&&r.subjectMarkValues.forEach((b,I)=>{p.push(`<b>${this.commonService.myTranslateInstant("lang_combine_exam_component")}${I+1} </b>: ${b}/10`)}),this.hasMultiple(c)&&p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_trac_nghiem")}</b>: ${r?.trueFalseMark} (${r?.rightAnswer}/${(r?.totalQuestion??0)-f} ${this.commonService.myTranslateInstant("lang_auto_cau_brackets")}`),this.hasEssay(c)&&p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_tu_luan")}</b>: ${r?.essayMark+" ("+f+" "+this.commonService.myTranslateInstant("lang_auto_cau_brackets")}`),this.hasEssay(c)&&_.resultTeacherDraw&&p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_so_file_da_nop")}</b>: ${this.commonService.castJsonToObj(r?.files??"")?.length??"0"}`),a&&0!=o?.autoMonitor&&(p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_so_lan_thoat_man_hinh")}</b>: ${a.exitFullScreen}`),p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_so_lan_thoat_trinh_duyet")}</b>: ${a.blurWindow}`)),p.push(`<b>${this.commonService.myTranslateInstant("lang_auto_ma_bai_lam")}</b>: ${r?.id}`),p}startGenUserLineFile(s,o,a,r,l){let c=[];const _=this.commonService.castJsonToObj(s?.answers??"");return _&&o.forEach((d,p)=>{d.groupInfo&&d.groupInfo.isFirstInGroup&&c.push({content:`<br/><b>${d.groupInfo.groupContent}</b><br/>`,answers:[]}),d.attachments&&a.isExportMedia&&d.attachments.forEach(b=>{c.push({content:`[${this.commonService.myTranslateInstant("lang_core_dinh_kem_file_tai")} attachments/${this.replaceParamFileName(b.name)}]`,answers:[]})}),c=c.concat(this.genLineQuestion(d,r));const f=this.mapQuestResultObj(d,_??[]);switch(d.answerType){case 1:c=c.concat(this.genLineAnswerType1(d,f));break;case 3:let b=s?.confirmedAt?new Lh(this.commonService).parserEssayResult(s.essayResult):[],I=(s?.confirmedAt?s?.essayAnswerObjs:[])??[],y=b.find(O=>O.questionIndex==p),k=I.find(O=>O.questionId==d.id)??{questionId:d.id,comment:void 0,mark:y?.questionMark};c=c.concat(this.genLineAnswerType3(d,f,{questionId:d.id,comment:k?.comment,mark:k?.mark??0}));break;case 4:c=c.concat(this.genLineAnswerType4(d,f));break;case 5:c=c.concat(this.genLineAnswerTrueFalseType5(d,f))}l&&d.help&&c.push({content:`<br/><b>${this.commonService.myTranslateInstant("lang_auto_loi_giai")}</b> ${d.help}<br/><br/>`,answers:[]})}),this.hasEssay(o)&&(c=c.concat(this.getLineImageAnswer(a))),c}genLineQuestion(s,o){const a=[];let r=this.expandInfoParse.label??this.commonService.myTranslateInstant("lang_auto_cau"),l=this.answerTypeService.isFillAnswer(s)?this.commonService.myTranslateInstant("azt_lang_sugg_type_fill_blank"):this.answerTypeService.isEssayAnswer(s)?this.commonService.myTranslateInstant("azt_lang_sugg_type_essay"):this.commonService.myTranslateInstant("azt_lang_sugg_type_multiple_choice"),c={content:"<b>"+r+" "+(s.labelIndex??s.indexLabel??1)+". "+(o?`(${l})`:"")+"</b> "+(s.content?.includes("<img")?"<br/>":"")+s.content,answers:o&&(this.answerTypeService.isFillAnswer(s)||this.answerTypeService.isEssayAnswer(s))?[]:this.convertAnswerQuestion(s.answers??[],!!this.answerTypeService.isTrueFalseAnswer(s))};return a.push(c),a}mapQuestResultObj(s,o){return o.find(r=>r.QuestionId===s.id)||{QuestionId:s.id??0,AnswerContent:[]}}convertAnswerQuestion(s,o){let a=[];return s.forEach(r=>{let l=r.alpha?r.alpha:r.key,c="<b>     "+(o?l.toLocaleLowerCase()+")":l)+".</b> "+r.content;a.push(c)}),a}genLineAnswerType1(s,o){const a=document.createElement("table"),r=s.correctAnswer?Ee.JP:Ee.ep;a.setAttribute("docx-style",Ee.$s.get("TABLE"));const l=[],c=document.createElement("tr");a.appendChild(c);const _=document.createElement("td");_.setAttribute("docx-style",Ee.$s.get("CORRECT",[{key:Ee.Xe,value:r}]));const d=document.createElement("span"),p=s.answers?s.answers.filter(I=>s.answerResult?.includes(I.key)).map(I=>I.alpha??I.key).join(" & "):s.answerResult?.join(" & ");d.innerText=(this.commonService.myTranslateInstant("lang_auto_dap_an_dung")??"")+": "+p,d.setAttribute("color",r),_.appendChild(d),c.appendChild(_);const f=document.createElement("span"),b=document.createElement("span");return f.innerText="\u2713",f.setAttribute("color",Ee.JP),b.innerText="\u2717",b.setAttribute("color",Ee.ep),s.answers?.forEach((I,y)=>{const k=document.createElement("td"),O=document.createElement("span"),j=[{key:Ee.Xe,value:r}];j.push({key:Ee.n1,value:y+1===s.answers?.length?r:"FFFFFF"}),k.setAttribute("docx-style",Ee.$s.get("KEY_RESULT",j)),O.innerText=I.alpha??I.key,o.AnswerContent.filter(N=>N.Content===I.key).length>0&&k.appendChild(s.correctAnswer?f:b),k.appendChild(O),c.appendChild(k)}),l.push({content:`<br>${a.outerHTML}<br><br><br>`,answers:[]}),l}genLineAnswerTrueFalseType5(s,o){const a=[],r=s.correctAnswer?Ee.JP:Ee.ep,l=this.commonService.myTranslateInstant("lang_auto_dung"),c=this.commonService.myTranslateInstant("lang_auto_sai"),_=this.sAztAnswerTrueFalseService.checkLabelKeys([],s?.answers,s?.answerResult),d=(j,V)=>{const N=document.createElement("span");return N.innerText=j,N.setAttribute("color",V),N},b=document.createElement("table");b.setAttribute("docx-style",Ee.$s.get("TABLE"));const I=document.createElement("tr"),y=d(this.commonService.myTranslateInstant("lang_auto_dap_an")??"",r),k=document.createElement("td"),O=[{key:Ee.Xe,value:r}];return O.push({key:Ee.n1,value:r}),k.setAttribute("docx-style",Ee.$s.get("KEY_RESULT",O)),s.answers?.forEach(j=>{const V=this.sAztAnswerTrueFalseService.checkIsTrueType5(j,_,o.AnswerContent),N=this.commonService.myTranslateInstant(this.sAztAnswerTrueFalseService.getAnswerChoiceTrueFalseQuestion(j,o.AnswerContent))??"";k.appendChild(((j,V,N)=>{const X=document.createElement("div"),te=document.createElement("span"),S=V?Ee.JP:Ee.ep;return te.innerText=(j.alpha??j.key).toLowerCase()+"-",X.appendChild(d(V?"\u2713":"\u2717",S)),X.appendChild(te),X.appendChild(d(N??"",S)),X})(j,V,N)),k.appendChild(document.createElement("br"))}),I.appendChild(((j,V)=>{const N=document.createElement("td");return N.appendChild(j),s.answers.length&&s.answers.forEach(X=>{const te=document.createElement("span");te.setAttribute("color",this.sAztAnswerTrueFalseService.checkIsTrueType5(X,_,o.AnswerContent)?Ee.JP:Ee.ep),te.innerText=` ${(X.alpha?X.alpha:X.key?X.key:X).toString().toLowerCase()}-${_.includes((X.alpha?X.alpha:X.key?X.key:"")+"T")?l:c} `,N.appendChild(te)}),N.setAttribute("docx-style",V),N})(y,Ee.$s.get("CORRECT",[{key:Ee.Xe,value:r}]))),I.appendChild(k),b.appendChild(I),a.push({content:`<br>${b.outerHTML}<br><br><br><br><br><br>`,answers:[]}),a}genLineAnswerType3(s,o,a){const r=[];return r.push({content:`<b>${this.capitalized(this.commonService.myTranslateInstant("lang_auto_cau_tra_loi"))}:</b><br/><br/>`,answers:[]}),0===o.AnswerContent.length?r.push({content:`<span>${this.commonService.myTranslateInstant("lang_auto_thi_sinh_khong_nhap_thong_tin")}</span>`,answers:[]}):o.AnswerContent.forEach(l=>{r.push({content:`<span>${l.Content}</span>`,answers:[]})}),r.push({content:`<b>${this.commonService.myTranslateInstant("lang_auto_da_cham")}: ${a.mark??0} ${this.commonService.myTranslateInstant("lang_auto_diem_toi_da")}: ${s.scorePerQuestion})</b>`,answers:[]}),r.push({content:`<b>${this.commonService.myTranslateInstant("lang_auto_nhan_xet")}:</b> ${a.comment??""}`,answers:[]}),r}genLineAnswerType4(s,o){const a=document.createElement("table"),r=s.correctAnswer?Ee.JP:Ee.ep;a.setAttribute("docx-style",Ee.$s.get("TABLE"));const l=[],c=document.createElement("tr");c.setAttribute("docx-style",Ee.$s.get("TR")),a.appendChild(c);const _=document.createElement("td");_.setAttribute("docx-style",Ee.$s.get("CORRECT",[{key:Ee.Xe,value:r}]));const d=document.createElement("span");d.innerText=(this.commonService.myTranslateInstant("lang_auto_dap_an_dung")??"")+": ["+s.answerResult?.join(";")+"]",d.setAttribute("color",r),_.appendChild(d),c.appendChild(_),0===o.AnswerContent.length&&o.AnswerContent.push({Index:0,Content:this.commonService.myTranslateInstant("lang_auto_thi_sinh_khong_thong_tin")??""});const p=document.createElement("td"),f=document.createElement("span");return p.setAttribute("docx-style",Ee.$s.get("FILL_RESULT",[{key:Ee.Xe,value:r}])),f.innerText=o.AnswerContent.map(I=>I.Content).join(";"),p.appendChild(f),c.appendChild(p),l.push({content:`<br>${a.outerHTML}<br><br><br>`,answers:[]}),l}loadNameImage(s){return new Promise((o,a)=>{s&&s.nameImages&&parseInt(s?.id??"0")<=0?this.checkDrawImgNameService.getBase64Url(s.nameImages).then(r=>{r&&s.nameImages&&(s.nameImages.url=r),o(s)}).catch(r=>{a(r)}):o(s)})}loadCssFrameAction(){return new Promise(s=>{const o=document.createElement("div"),a=r=>{const l=document.createElement("span");return l.style.fontFamily=r,l.innerText="Aa",l};o.appendChild(a("font_chu_dep")),o.appendChild(a("font_chu_dep_z")),o.appendChild(a("font_chu_in")),o.appendChild(a("font_chu_in_nghieng")),o.appendChild(a("font_chu_in_dam")),o.style.opacity="0",document.body.appendChild(o),setTimeout(()=>{o.remove(),s()},2e3)})}loadLibAction(s){return new Promise((o,a)=>{this.commonService.loadAzotaDocxJs().then(()=>{const r=new Ps.n(1,{function:(l,c,_)=>{s.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tien_trinh")} ${l+1}/${c}: ${_}`)}});r.addTask(this,this.loadCssFrameAction,[],this.commonService.myTranslateInstant("lang_auto_tai_tai_nguyen")),r.start().then(l=>{s.remove(),l.errs.length>0?a(l.errs[0]):o()})}).catch(r=>{a(r)})})}reset(){}checkUrlIsImage(s){return null!=s.match(/\.(jpeg|jpg|png|gif)(\?.*)?$/)}loadAztFile(s,o,a){return new Promise((r,l)=>{fetch(this.sAztCommonCdnService.getMyCdn(s.url??"")).then(c=>{c.ok?c.blob().then(_=>{const p=new File([_],s.name??"",{type:s.mimes});"ans"===a?o.isExportAnsMedia&&o.mediaAnswerWraps.push(p):o.isExportMedia&&o.mediaWraps.push(p),r()}):l(new Error(`${this.commonService.myTranslateInstant("lang_core_khong_the_tai_tep_tin_dinh_kem")} ${s.name}`))}).catch(()=>{l(new Error(`${this.commonService.myTranslateInstant("lang_core_khong_the_tai_tep_tin_dinh_kem")} ${s.name}`))})})}wrapLoadMedia(s,o){return this.checkUrlIsImage(s)?(0,Mi.qO)(s,o):new Promise((a,r)=>{a(void 0)})}replaceImageToBase64(s,o,a,r,l,c){return new Promise((_,d)=>{Object.prototype.hasOwnProperty.call(s,o)&&"string"==typeof s[o]?this.wrapLoadMedia(s[o],l).then(p=>{if(p){const f=document.createElement("canvas");f.width=p.width,f.height=p.height,f.getContext("2d")?.drawImage(p,0,0),s[o]=a.canvasList.push(f)-1,_()}else{c=c?c+1:1;let f=s[o].split(".");f=f.length>0?f[f.length-1]:"mp3";const b=this.commonService.createFileNameExportFile([this.commonService.myTranslateInstant("lang_core_file_dinh_kem_o_vi_tri")??"",c.toString(),r])+"."+f;this.loadAztFile({name:this.commonService.replaceAll(b,"_"," ")??"",url:s[o],path:"",extension:"",mimes:"",size:"0",lastModified:0},a,"ans").then(()=>{_()}).catch(I=>{d(new Error(this.commonService.myTranslateInstant(I.message)+(r.length>0?" : "+r:"")))})}}).catch(p=>{d(new Error(this.commonService.myTranslateInstant(p.message)+(r.length>0?" : "+r:"")))}):d(new Error(this.commonService.myTranslateInstant("lang_auto_tai_hinh_anh_khong_thanh_cong")+(r.length>0?" : "+r:"")))})}loadTeacherDrawResult(s,o,a,r){return new Promise((l,c)=>{const _=r??{canvasList:[],mediaWraps:[],mediaAnswerWraps:[],isExportAnsMedia:!0},d=new Ps.n(3,{function:(p,f)=>{o.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh")} (${p}/${f})`)}});if(_.resultTeacherDraw=s,_.resultTeacherDraw){_.resultTeacherDraw.pages?.forEach((f,b)=>{d.addTask(this,this.replaceImageToBase64,[f,"backgroundImage",_,a,this.sAztCommonCdnService,b]),f.draw&&d.addTask(this,this.replaceImageToBase64,[f,"draw",_,a,this.sAztCommonCdnService,b])});const p=this.commonService.castJsonToObj(_.resultTeacherDraw.staticTextConfig??"");if(_.resultTeacherConfig=p,_.resultTeacherConfig&&_.resultTeacherConfig.urlImgCorrect&&_.resultTeacherConfig.urlImgWrong&&(_.resultTeacherConfig.urlImgCorrect=(_.resultTeacherConfig.type?"":"core-mod-assets/images/classlive/")+_.resultTeacherConfig.urlImgCorrect,_.resultTeacherConfig.urlImgWrong=(_.resultTeacherConfig.type?"":"core-mod-assets/images/classlive/")+_.resultTeacherConfig.urlImgWrong,d.addTask(this,this.replaceImageToBase64,[_.resultTeacherConfig,"urlImgCorrect",_,a]),d.addTask(this,this.replaceImageToBase64,[_.resultTeacherConfig,"urlImgWrong",_,a])),_.resultTeacherDraw.commentEmoji&&_.resultTeacherDraw.commentEmoji.length>0)for(let f=0;f<_.resultTeacherDraw.commentEmoji.length;f++)_.resultTeacherDraw.commentEmoji[f]="https://azota889.github.io/storage_public/mnote/"+_.resultTeacherDraw.commentEmoji[f],d.addTask(this,this.replaceImageToBase64,[_.resultTeacherDraw.commentEmoji,f,_,a])}d.start().then(p=>{0===p.errs.length?l(_):c(p.errs[0])})})}capitalized(s){return s?s.charAt(0).toUpperCase()+s.slice(1):""}wrapText(s,o,a,r,l,c){const _=document.createElement("span");_.innerHTML=this.commonService.removeXssInHtml(o),(o=_.innerText.replace(/<div>/g,"\n").replace(/<\/div>/g,"").replace(/_divbrdiv_/g,"\n").replace(/_divdiv_/g,"")).split("\n").forEach(p=>{for(var f=p.split(" "),b="",I=0;I<f.length;I++){var y=b+f[I]+" ";s.measureText(y).width>l&&I>0?(s.fillText(b,a,r),b=f[I]+" ",r+=c):b=y}s.fillText(b,a,r)})}getLineImageAnswer(s){const o=[];return s.mediaAnswerWraps&&s.isExportAnsMedia&&s.mediaAnswerWraps.forEach(a=>{o.push({content:`<span color="2196f3">{${this.commonService.myTranslateInstant("lang_core_dinh_kem_file_tai")} attachments/${this.replaceParamFileName(a.name)}}</span>`,answers:[]})}),s.resultTeacherDraw&&s.resultTeacherDraw.pages?.forEach(a=>{let r=s.canvasList[Number(a.backgroundImage)];if(r){const l=document.createElement("canvas");l.width=a.width??1,l.height=a.height??1;const c=l.getContext("2d");if(c){c.fillStyle="#FFFFFF",c.fillRect(0,0,l.width,l.height);let p=document.createElement("canvas"),f=p.getContext("2d");0!==a.rotation&&f?(90===Math.abs(a.rotation??0)?(p.width=r.height,p.height=r.width):(p.width=r.width,p.height=r.height),f.translate(p.width/2,p.height/2),f.rotate(((a.rotation??0)>0?1:-1)*(a.rotation??0)*Math.PI/180),f.drawImage(r,-r.width/2,-r.height/2),f.restore()):p=r;const b=l.height/p.height*p.width;if(c.drawImage(p,0,0,p.width,p.height,(l.width-b)/2,0,b,l.height/p.height*p.height),a.draw){const k=s.canvasList[Number(a.draw)];k&&c.drawImage(k,0,0)}if(a.staticText&&a.staticText.length>0&&a.staticText.forEach(k=>{if(c.font=`${s.resultTeacherConfig?.fontSize}px ${s.resultTeacherConfig?.fontText}`,c.fillStyle=s.resultTeacherConfig?.fontColor??"#000000",s.resultTeacherConfig?.useCorrectText&&"correct"==k.value&&this.wrapText(c,s.resultTeacherConfig?.textCorrect??"",k.x,k.y,l.width-k.x,25),s.resultTeacherConfig?.useCorrectText&&"wrong"==k.value&&this.wrapText(c,s.resultTeacherConfig?.textWrong??"",k.x,k.y,l.width-k.x,25),!s.resultTeacherConfig?.useCorrectText&&"correct"==k.value){const O=s.canvasList[Number(s.resultTeacherConfig?.urlImgCorrect)];O&&c.drawImage(O,0,0,O.width,O.height,k.x,k.y,30,30)}if(!s.resultTeacherConfig?.useWrongText&&"wrong"==k.value){const O=s.canvasList[Number(s.resultTeacherConfig?.urlImgWrong)];O&&c.drawImage(O,0,0,O.width,O.height,k.x,k.y,30,30)}}),a.objText&&a.objText.length>0){let k=300;a.objText.forEach(O=>{c.font=`${parseFloat(O.textStyle.size)}px ${O.textStyle.font}`,c.fillStyle=O.textStyle.color,c.textAlign=O.textStyle.align??"center",c.lineWidth=O.textStyle.width??k,this.wrapText(c,O.value,O.x,O.y,l.width-O.x,25)})}}const _=693,d=_/l.width;o.push({content:`<img src="${l.toDataURL()}" style="width:${_}px;height:${l.height*d}px" /><br/>`,answers:[]})}}),0===o.length?o.push({content:`<br/><br/>${Ee.$s.createLineCenterBold(this.commonService.myTranslateInstant("lang_auto_khong_co_anh_bai_lam_tu_luan")??"").outerHTML}<br/><br/>`,answers:[]}):o.unshift({content:`<br/>${Ee.$s.createLineCenterBold(this.commonService.myTranslateInstant("lang_auto_anh_bai_lam_tu_luan")??"").outerHTML}<br/>`,answers:[]}),o}convertDataMarkNote(s){return new Promise((o,a)=>{s&&s.urlDataMark?this.sAztCommonCdnService.loadTextCdn(this.sAztCommonCdnService.getMyCdn(s.urlDataMark)).subscribe(r=>{const l=this.zipDataService.decodeContentGzip(r),c=this.commonService.castJsonToObj(l);s.pages=[];let _={};c?.pages.forEach((f,b)=>{let I={width:f.width,height:f.height,draw:f.draws?.[0]?.src??void 0,backgroundImage:f.backgroundSrc,rotation:f.backgroundRotate,objText:[],staticText:[]};f.childData?.length&&f.childData.forEach((y,k)=>{if("UIQuickMark"==y.className&&(I.staticText?.push({x:y.x+5,y:y.y+(y.height+5+y.fontSize)/2,value:"type_right"===y.type?"correct":"wrong"}),0===k&&(_={txtCommentFont:y.fontFace?.family??"font_chu_dep",useCorrectText:!0,useWrongText:!0,correctWidth:y.width,correctHeight:y.height,wrongWidth:y.width,wrongHeight:y.height,fontText:y.fontFace?.family??"font_chu_dep",fontColor:"red",fontSize:y.fontSize??30,textWrong:"s",textCorrect:"\u0111",type:"v2"})),!_.urlImgWrong&&"type_wrong"==y.type&&(_.urlImgWrong=y.imageSrc),!_.urlImgCorrect&&"type_right"==y.type&&(_.urlImgCorrect=y.imageSrc),!_.textWrong&&"type_wrong"==y.type&&(_.textWrong=y.textContent),!_.textCorrect&&"type_right"==y.type&&(_.textCorrect=y.textContent),_.useCorrectText=!_.urlImgCorrect,_.useWrongText=!_.urlImgWrong,"UIText"===y.className){let O=this.getStyleContent(y.textContent);I.objText?.push({x:y.x+15,y:y.y+15,value:y.textContent,textStyle:{size:y.fontSize?y.fontSize:O?.fontSize,align:O?.textAlign??"left",color:O?.color,fill:!0,font:O?.fontFamily}})}}),s.pages?.push(I)}),s.staticTextConfig=this.commonService.serializeJson(_),o(s)}):o(s??{})})}getStyleContent(s){let o=document.createElement("div");o.innerHTML=this.commonService.removeXssInHtml(s);let a=o.querySelector("p"),r=o.querySelector("span");return r?{fontSize:r.style.fontSize,color:r.style.color,fontFamily:r.style.fontFamily,textAlign:a?.style.textAlign??"left"}:void 0}getTextContentInTagHTML(s){return(new DOMParser).parseFromString(s,"text/html").body.textContent??s}replaceParamFileName(s){return s.replace(/\?.*$/,"")}get percent(){return this.logger.percent}get keyLoading(){return this.logger.lines}get isLoading(){return this.logger.run??!1}constructor(s,o,a,r,l,c,_,d,p,f,b,I,y,k,O,j){this.sAztAnswerTrueFalseService=s,this.homeworkExamService=o,this.checkDrawImgNameService=a,this.sAztCommonCdnService=r,this.zipDataService=l,this.exportPdfUtilsService=c,this.answerTypeService=_,this.exportPdfConvertDataService=d,this.questionRenderService=p,this.commonService=f,this.answerService=b,this.examResultService=I,this.testedListApiService=y,this.shareFileFlutterService=k,this.sAztDialogService=O,this.sAztDocxService=j,this.logger=new rn,this.expandInfoParse={}}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(kh.j),e.KVO(pa.Z),e.KVO(zI.E),e.KVO(os.c),e.KVO(Gs.j),e.KVO(_f),e.KVO(on._),e.KVO(MI),e.KVO(Ju.g),e.KVO(Le.R),e.KVO(DI._t),e.KVO(Nu._j),e.KVO(NI),e.KVO(VI.R),e.KVO(Mn.i),e.KVO(LI.I))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var yn=A(59115),Ku=A(90882);const $I=["drawer"],QI=(i,n)=>({"w-85":i,"w-25":n}),qI=i=>({"azt-mobile-draw-left":i}),YI=()=>[],UI=i=>({"ml-5":i}),XI=(i,n)=>({correct:i,incorrect:n}),WI=()=>({"mr-2":!0});function HI(i,n){1&i&&(e.j41(0,"div",7),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function JI(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-select-capacity-exam-result",36),e.bIt("selectedExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEmitter(o))}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("examObj",t.examObj)("examComponentObj",t.examComponentObj)("capacityComponents",t.capacityComponents)("currentResultObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.examResultObj)}}function KI(i,n){if(1&i&&(e.j41(0,"div",34),e.DNE(1,JI,1,4,"app-select-capacity-exam-result",35),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.examObj&&t.capacityComponents)}}function ZI(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",37),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.sAztMatDrawerService.openDrawer())}),e.nrm(2,"lucide-icon",38),e.k0s()}2&i&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_mo_menu"))}function eC(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",39),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.sAztMatDrawerService.closeDrawer())}),e.nrm(2,"lucide-icon",40),e.k0s()}2&i&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_dong_menu"))}function tC(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",41)(2,"span",42),e.nrm(3,"lucide-icon",43),e.k0s(),e.j41(4,"span",44),e.EFF(5),e.nI1(6,"mytranslate"),e.nI1(7,"mytranslate"),e.k0s()(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,1,"lang_answer_test_must_reach_mark_to_show_answer_1")+(null==t.examConfigObj?null:t.examConfigObj.viewAnswerResultMinMark)+e.bMT(7,3,"lang_answer_test_must_reach_mark_to_show_answer_2")," ")}}function nC(i,n){1&i&&(e.j41(0,"div",45),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_note_xem_noi_dung_con_thieu")," "))}function sC(i,n){if(1&i&&e.nrm(0,"azt-loaded-img",52),2&i){const t=e.XpG(3);e.Y8G("imgSrc",null==t.examObj?null:t.examObj.examHeader)}}function iC(i,n){if(1&i&&(e.j41(0,"div",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_tong_so_cau_dung")," ",null==t.examResultObj?null:t.examResultObj.rightAnswer,".")}}function oC(i,n){if(1&i&&(e.j41(0,"div",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){let t;const s=e.XpG(3);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_tong_so_cau_sai")," ",(null!==(t=null==s.examResultObj?null:s.examResultObj.totalQuestion)&&void 0!==t?t:0)-s.essayQuestionObjs.length-(null!==(t=null==s.examResultObj?null:s.examResultObj.rightAnswer)&&void 0!==t?t:0),". ")}}function aC(i,n){if(1&i&&e.nrm(0,"azt-question-standalone-for-student-at-review-page",55),2&i){const t=e.XpG(),s=t.$implicit,o=t.index,a=e.XpG(3);e.Y8G("examObj",a.examObj)("examConfig",a.examConfigObj)("isShowOriginAnswer",!a.isMixQuestionExam||a.showOriginAnswerControl.value)("questionObj",s)("curQuestionIndex",o)("follower",a.followerRenderQuest)("isOfflineMark",!(null==a.initDataResult||null==a.initDataResult.data||!a.initDataResult.data.offlineMarkObj))("userAnswersObj",a.userAnswersObj)("curExamResultId",a.examResultIdParam)("currentTab","multiple_choice_tab")("ngClass",e.l_i(11,XI,null==s?null:s.correctAnswer,!s.correctAnswer))}}function rC(i,n){if(1&i&&e.DNE(0,aC,1,14,"azt-question-standalone-for-student-at-review-page",54),2&i){const t=e.XpG(3);e.Y8G("ngIf",t.examObj)}}function lC(i,n){if(1&i&&(e.j41(0,"mat-tab",46),e.nI1(1,"mytranslate"),e.j41(2,"div")(3,"div",47)(4,"div",48),e.DNE(5,sC,1,1,"azt-loaded-img",49)(6,iC,3,4,"div",50)(7,oC,3,4,"div",50)(8,rC,1,1,"ng-template",51),e.k0s()()()()),2&i){const t=e.XpG(2);e.FS9("label",e.bMT(1,8,"lang_auto_trac_nghiem")),e.R7$(2),e.HbH(t.viewOption),e.R7$(3),e.Y8G("ngIf",null==t.examObj?null:t.examObj.examHeader),e.R7$(),e.Y8G("ngIf","viewRight"==t.viewOption),e.R7$(),e.Y8G("ngIf","viewWrong"==t.viewOption),e.R7$(),e.Y8G("ngForOf",t.questionObjs)}}function cC(i,n){if(1&i&&e.nrm(0,"azt-mark-essay-new",61),2&i){let t;const s=e.XpG(4);e.Y8G("examObj",s.examObj)("examConfig",s.examConfigObj)("showForTeacher",!1)("curSelectedTab",s.curSelectedTab)("questions",s.essayQuestionObjs)("userAnswersObj",s.userAnswersObj)("examResultObj",s.examResultObj)("files",s.files)("resultID",null!==(t=s.examResultIdParam)&&void 0!==t?t:0)}}function uC(i,n){if(1&i&&(e.qex(0),e.DNE(1,cC,1,9,"azt-mark-essay-new",60),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",1==t.curSelectedTab)}}function _C(i,n){if(1&i&&e.nrm(0,"azt-mark-essay",62),2&i){let t;const s=e.XpG(3);e.Y8G("examObj",s.examObj)("examConfig",s.examConfigObj)("showForTeacher",!1)("questions",s.essayQuestionObjs)("userAnswersObj",s.userAnswersObj)("examResultObj",s.examResultObj)("resultID",null!==(t=s.examResultIdParam)&&void 0!==t?t:0)("files",s.files)("iframeViewMode","view")("hasLoadedData",s.hasLoadedData)}}function dC(i,n){if(1&i&&(e.j41(0,"mat-tab",56),e.nI1(1,"mytranslate"),e.j41(2,"div",57)(3,"div",58),e.DNE(4,uC,2,1,"ng-container",59)(5,_C,1,10,"ng-template",null,3,e.C5r),e.k0s()()()),2&i){const t=e.sdS(6),s=e.XpG(2);e.FS9("label",e.bMT(1,3,"lang_auto_tu_luan")),e.R7$(4),e.Y8G("ngIf",s.checkMarkNote)("ngIfElse",t)}}function mC(i,n){if(1&i){const t=e.RV6();e.j41(0,"mat-drawer-container",8)(1,"mat-drawer",9,2),e.bIt("closedStart",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeStatusNav())}),e.j41(3,"div",10)(4,"div",11),e.DNE(5,KI,2,1,"div",12),e.j41(6,"div",13),e.nrm(7,"app-testbank-test-review-show-mark-info-of-student",14),e.k0s(),e.j41(8,"div",15),e.nrm(9,"app-testbank-test-review-show-detail-info-for-student",16)(10,"app-testbank-show-offline-result",17),e.nI1(11,"mytranslate"),e.k0s()(),e.nrm(12,"azt-practice-box",18)(13,"azt-frontend-banner-ads-box",19),e.k0s()(),e.j41(14,"mat-drawer-content")(15,"div",20)(16,"div",21)(17,"div",22),e.DNE(18,ZI,3,3,"button",23)(19,eC,3,3,"button",24),e.j41(20,"div",25),e.EFF(21),e.k0s(),e.j41(22,"div",26),e.eu8(23,27),e.k0s()(),e.DNE(24,tC,8,5,"ng-container",28),e.j41(25,"div",29),e.DNE(26,nC,3,3,"div",30),e.j41(27,"mat-tab-group",31),e.bIt("selectedTabChange",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onTabChanged(o))}),e.mxI("selectedIndexChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.curSelectedTab,o)||(a.curSelectedTab=o),e.Njj(o)}),e.DNE(28,lC,9,10,"mat-tab",32)(29,dC,7,5,"mat-tab",33),e.k0s()()()()()()}if(2&i){let t,s;const o=e.XpG(),a=e.sdS(5);e.Y8G("hasBackdrop",o.sAztMatDrawerService.hasBackdrop),e.R7$(),e.FS9("opened",o.sAztMatDrawerService.isOpenSideNav?"true":"false"),e.Y8G("ngClass",e.l_i(59,QI,o.isMobileDevice,!o.isMobileDevice))("mode",o.sAztMatDrawerService.mode),e.R7$(2),e.Y8G("ngClass",e.eq3(62,qI,o.isMobileDevice)),e.R7$(2),e.Y8G("ngIf",null==o.capacityComponents?null:o.capacityComponents.length),e.R7$(2),e.Y8G("examObj",o.examObj)("examResultObj",o.examResultObj)("viewPractice",o.viewPractice),e.R7$(2),e.Y8G("examResultIdParam",o.examResultIdParam)("userIdParam",o.userIdParam)("studentIdParam",o.studentIdParam)("examIdParam",o.examIdParam)("offlineHashIdParam",o.offlineHashIdParam)("viewPractice",o.viewPractice)("studentObj",o.studentObj)("examObj",o.examObj)("examResultObj",o.examResultObj)("markedByObj",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.markedByObj)("questionObjs",o.questionObjs)("essayQuestionObjs",o.essayQuestionObjs)("trueFalseChoiceQuestionObjs",o.trueFalseChoiceQuestionObjs)("isShowOriginAnswer",!o.isMixQuestionExam||o.showOriginAnswerControl.value)("files",o.files)("historyExamResultObjs",null!==(t=null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.historyExamResultObjs)&&void 0!==t?t:e.lJ4(64,YI))("examTracks",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.examTracks)("resultInfos",o.resultInfos),e.R7$(),e.Y8G("backToLink",o.backToLink)("examResultIdParam",o.examResultIdParam)("userIdParam",o.userIdParam)("studentIdParam",o.studentIdParam)("examIdParam",o.examIdParam)("examObj",o.examObj)("essayExam",!!o.essayQuestionObjs.length)("essayMark",null!=o.examResultObj&&o.examResultObj.confirmedAt?(null!==(s=null==o.examResultObj?null:o.examResultObj.essayMark)&&void 0!==s?s:0).toString():e.bMT(11,57,"lang_auto_chua_cham"))("questionObjs",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.questionObjs)("offlineMarkObj",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",!1)("currentScreen","student"),e.R7$(2),e.Y8G("cssClass","mt-3 block")("showLikeMobile",!0)("resultId",o.examResultIdParam)("webPage","STUDENT_VIEW_RESULT"),e.R7$(),e.Y8G("classStyle","mt-3 block")("adsPosition",o.allAdsPositions.STUDENTANSWERTESTATLEFT),e.R7$(2),e.Y8G("ngClass",e.eq3(65,UI,!o.isMobileDevice&&o.sAztMatDrawerService.isOpenSideNav)),e.R7$(3),e.Y8G("ngIf",!o.sAztMatDrawerService.isOpenSideNav||o.isMobileDevice),e.R7$(),e.Y8G("ngIf",o.sAztMatDrawerService.isOpenSideNav&&!o.isMobileDevice),e.R7$(),e.FS9("matTooltip",o.examComponentObj?o.examComponentObj.name:null==o.examObj?null:o.examObj.name),e.R7$(),e.SpI(" ",o.examComponentObj?o.examComponentObj.name:null==o.examObj?null:o.examObj.name," "),e.R7$(2),e.Y8G("ngTemplateOutlet",a),e.R7$(),e.Y8G("ngIf","lang_core_dont_allow_show_answer_by_min_mark"==o.errorMessage),e.R7$(2),e.Y8G("ngIf",o.isMobileWebView),e.R7$(),e.R50("selectedIndex",o.curSelectedTab),e.R7$(),e.Y8G("ngIf",o.trueFalseChoiceQuestionObjs.length>0),e.R7$(),e.Y8G("ngIf",o.essayQuestionObjs.length>0&&o.examObj&&o.examResultObj)}}function pC(i,n){1&i&&(e.j41(0,"button",79)(1,"span",80),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_sai")," "))}function hC(i,n){1&i&&(e.j41(0,"button",81)(1,"span",80),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_dung")," "))}function fC(i,n){1&i&&(e.j41(0,"button",82)(1,"span",80),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_testbank_question_origin")," "))}function gC(i,n){1&i&&(e.j41(0,"button",83)(1,"span",84),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_testbank_question_mix")," "))}function TC(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"label",85),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"div",75)(5,"input",86),e.bIt("change",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeViewOriginAnswer(o))})("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.k0s()()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_test_review_show_origin_answer")," "),e.R7$(3),e.Y8G("formControl",t.showOriginAnswerControl)}}function bC(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",63),e.DNE(1,pC,4,3,"button",64)(2,hC,4,3,"button",65)(3,fC,4,3,"button",66)(4,gC,4,3,"button",67),e.j41(5,"button",68),e.nrm(6,"lucide-icon",69),e.j41(7,"span",70),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()(),e.j41(10,"mat-menu",71,4)(12,"div",72)(13,"ul",73)(14,"li")(15,"label",74),e.EFF(16),e.nI1(17,"mytranslate"),e.j41(18,"div",75)(19,"input",76),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onChangeViewOption("viewRight"))})("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.k0s()()()(),e.j41(20,"li")(21,"label",77),e.EFF(22),e.nI1(23,"mytranslate"),e.j41(24,"div",75)(25,"input",78),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onChangeViewOption("viewWrong"))})("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.k0s()()()(),e.DNE(26,TC,6,4,"li",28),e.k0s()()()}if(2&i){const t=e.sdS(11),s=e.XpG();e.R7$(),e.Y8G("ngIf","viewWrong"===s.viewOption),e.R7$(),e.Y8G("ngIf","viewRight"===s.viewOption),e.R7$(),e.Y8G("ngIf",s.isMixQuestionExam&&s.showOriginAnswerControl.value),e.R7$(),e.Y8G("ngIf",s.isMixQuestionExam&&!s.showOriginAnswerControl.value),e.R7$(),e.Y8G("matMenuTriggerFor",t),e.R7$(),e.Y8G("ngClass",e.lJ4(18,WI)),e.R7$(2),e.SpI(" ",e.bMT(9,12,"lang_testbank_tested_list_sort")," "),e.R7$(8),e.SpI(" ",e.bMT(17,14,"lang_auto_cau_dung")," "),e.R7$(3),e.Y8G("checked","viewRight"==s.viewOption),e.R7$(3),e.SpI(" ",e.bMT(23,16,"lang_auto_cau_sai")," "),e.R7$(3),e.Y8G("checked","viewWrong"==s.viewOption),e.R7$(),e.Y8G("ngIf",s.isMixQuestionExam)}}let xC=(()=>{var i;class n extends Z.H{set drawer(s){this.sAztMatDrawerService.resizeDrawerHeight(!0,s)}onResize(s){this.isMobileDevice=s.target.innerWidth<980,this.sAztMatDrawerService.changeToMobileMode(this.isMobileDevice)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}onChangeViewOption(s){this.viewOption=this.viewOption==s?"viewAll":s}onTabChanged(s){this.matTabGroupIndex=s.index}changeViewOriginAnswer(s){this.sAztBrowserStorageService.saveSimpleSessionStorage("test-review-showing-answer-view",this.showOriginAnswerControl.value?"1":"0")}checkingShowAnswerConfig(){return!(!this.examConfigObj||!this.examResultObj||3!=this.examObj?.whenShowAnswer||!(this.examResultObj.mark&&this.examConfigObj.viewAnswerResultMinMark&&this.examResultObj.mark<this.examConfigObj.viewAnswerResultMinMark))}getQuestionCanFeedback(){if(Array.isArray(this.questionObjs)){let s=[];this.questionObjs.forEach(a=>{a.id&&!this.commonService.isExistInArray(s,a.id)&&s.push(a.id)});const o={examId:Number(this.examIdParam??0),questionIds:s};this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsListPost(o).subscribe(a=>{if(1==a.success){let r=a.data?.objs??[];if(Array.isArray(this.questionObjs))for(let l=0;l<this.questionObjs.length;l++)r.forEach(c=>{this.questionObjs&&this.questionObjs[l].id==c.questionId&&(this.questionObjs[l].enableFeedback=c.allowFeedback)});this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}else this.stopStatusObj()}selectCapacityExamEmitter(s){this.selectedExamEmitter.emit(s)}processConvertData(s){if(s.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObjForFrontendStudent(s.data,this.testedUserObjs,this.studentObj),this.examObj=s?.data?.examObj,this.examComponentObj=s?.data?.examComponentObj,this.examResultObj=s?.data?.examResultObj,this.examConfigObj=s?.data?.examConfigObj,this.files=this.commonService.myParseJson(this.examResultObj?.files??"")??[],this.resultInfos=this.commonService.willDeleteParseJson(this.examResultObj?.infors??"")??[],this.errorMessage=s?.data?.errorMessage??"";const o=this.commonService.castJsonToClassObjs(vr.I,JSON.stringify(s.data.questionObjs??[]));this.followerRenderQuest.setNumQuest(o?.length||0),this.questionObjs=o,this.questionObjs?.forEach(_=>{_.correctAnswer=this.commonService.isExistInArray(s?.data?.correctQuestionIds,_.id),_.isRoleTeacher=!1}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs??[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),0==this.trueFalseChoiceQuestionObjs.length&&(this.curSelectedTab=1),this.userAnswersObj=this.testReviewService.convertAnswersArr(this.castJsonToObj(s.data.examResultObj?.answers??"")??[]);let a=0,r=0;this.questionObjs?.forEach((_,d)=>{_.labelIndex=d,this.examConfigObj?.resetQuestionIndex&&_.groupInfo&&_.groupInfo.groupId&&(a!=_.groupInfo.groupId&&(a=_.groupInfo.groupId,r=0),_.labelIndex=r,r++)}),this.isMixQuestionExam=!!this.questionObjs?.find(_=>_.answers.find(d=>d.alpha&&d.alpha!=d.key)),this.examResultIdParam=this.examResultObj?.id??0,this.examIdParam=this.examObj?.id?.toString()??"0",this.userIdParam=this.examResultObj?.userId?.toString()??"0",this.studentIdParam=this.examResultObj?.studentId?.toString()??this.studentObj?.id.toString()??"0",this.getQuestionCanFeedback(),this.hasLoadedData=!0;const l=this.envService.getVersionMarkNote(this.envService.getEnvValue("classliveUrl")??""),c=1e6;if(this.examResultObj?.result){const _=this.castJsonToObj(this.examResultObj?.result??"");this.checkMarkNote=!(!_||!_.urlDataMark)}else this.checkMarkNote=l>c}}ngOnInit(){this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.offlineHashIdParam=this.commonService.getMyQueryParam("offline"),this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0,this.initDataResult&&(this.userAnswersObj={},this.processConvertData(this.initDataResult)),this.showOriginAnswerControl.setValue("1"==this.sAztBrowserStorageService.getSimpleSessionStorage("test-review-showing-answer-view"))})),this.answerBoxService.switchEssayTabMessage.subscribe(s=>{this.curSelectedTab=1,setTimeout(()=>Lw.A.scroll(0,0),0)}),super.ngOnInit()}constructor(s,o,a,r,l,c,_,d,p){super(),this.activeRoute=s,this.docxService=o,this.envService=a,this.sAztBrowserStorageService=r,this.testReviewService=l,this.answerBoxService=c,this.exportResultService=_,this.testMarketFeedbackService=d,this.sAztMatDrawerService=p,this.capacityComponents=[],this.selectedExamEmitter=new e.bkB,this.viewPractice=!1,this.allAdsPositions=In.rA,this.allAdsDisplayTypes=In.ud,this.curSelectedTab=0,this.backToLink="",this.examResultIdParam=0,this.viewOption="viewAll",this.matTabGroupIndex=0,this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.showOriginAnswerControl=new g.MJ(!1,{nonNullable:!0}),this.followerRenderQuest=new Dn.e,this.isMixQuestionExam=!1,this.hasLoadedData=!1,this.checkMarkNote=!1,this.errorMessage=""}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(L.nX),e.rXU(uI),e.rXU(ml.t),e.rXU(zi.z),e.rXU(_I),e.rXU(Eh),e.rXU(BI),e.rXU(Pu.l_),e.rXU(sf.n))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-test-review-for-student"]],viewQuery:function(s,o){if(1&s&&e.GBs($I,5),2&s){let a;e.mGM(a=e.lsd())&&(o.drawer=a.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs",capacityComponents:"capacityComponents",viewPractice:"viewPractice"},outputs:{selectedExamEmitter:"selectedExamEmitter"},standalone:!0,features:[e.Jv_([sf.n]),e.Vt3,e.aNF],decls:6,vars:2,consts:[["hasResult",""],["ShowCorrectIncorrectFilterTpl",""],["drawer",""],["isFrameMark",""],["filterMenu","matMenu"],["id","test-review-for-student",1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"closedStart","ngClass","mode","opened"],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[1,"box"],["class","mb-2 box p-3",4,"ngIf"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[3,"examObj","examResultObj","viewPractice"],[1,"p-3"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","offlineHashIdParam","viewPractice","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","isShowOriginAnswer","files","historyExamResultObjs","examTracks","resultInfos"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","essayExam","essayMark","questionObjs","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj","currentScreen"],[3,"cssClass","showLikeMobile","resultId","webPage"],[3,"classStyle","adsPosition"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-student-ZI4M15FHLQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-student-lnUiT-MGaoA","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[4,"ngIf"],[1,"box","flex-1"],["class","p-3 text-danger",4,"ngIf"],[3,"selectedTabChange","selectedIndexChange","selectedIndex"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"mb-2","box","p-3"],[3,"examObj","examComponentObj","capacityComponents","currentResultObj","selectedExamEmitter",4,"ngIf"],[3,"selectedExamEmitter","examObj","examComponentObj","capacityComponents","currentResultObj"],["azt-track-service","test-review-for-student-ZI4M15FHLQ",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-open","size","16"],["azt-track-service","test-review-for-student-lnUiT-MGaoA",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-close","size","16"],[1,"alert","alert-danger","mb-5",2,"align-items","center"],[1,"w-6","h-6","mr-1"],["name","octagon-alert","size","20"],[2,"vertical-align","midle"],[1,"p-3","text-danger"],[3,"label"],[1,"azt-student-list"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","p-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"p-2","font-bold"],["class","relative",3,"examObj","examConfig","isShowOriginAnswer","questionObj","curQuestionIndex","follower","isOfflineMark","userAnswersObj","curExamResultId","currentTab","ngClass",4,"ngIf"],[1,"relative",3,"examObj","examConfig","isShowOriginAnswer","questionObj","curQuestionIndex","follower","isOfflineMark","userAnswersObj","curExamResultId","currentTab","ngClass"],["id","tabEssay",3,"label"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],[4,"ngIf","ngIfElse"],[3,"examObj","examConfig","showForTeacher","curSelectedTab","questions","userAnswersObj","examResultObj","files","resultID",4,"ngIf"],[3,"examObj","examConfig","showForTeacher","curSelectedTab","questions","userAnswersObj","examResultObj","files","resultID"],[3,"examObj","examConfig","showForTeacher","questions","userAnswersObj","examResultObj","resultID","files","iframeViewMode","hasLoadedData"],[1,"filter","flex"],["class","btn btn-sm btn-danger ml-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],["class","btn btn-sm btn-success ml-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],["class","btn btn-sm btn-pending mx-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],["class","btn btn-sm btn-secondary mx-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["name","filter","size","16",3,"ngClass"],[1,"azt-hidden","md:block"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-student-AzpxXYDv2dW","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","click","checked"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-student-FiRglRqPWZP","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","click","checked"],[1,"btn","btn-sm","btn-danger","ml-2",2,"cursor","default","padding","6px 4px"],[1,"text-white","block"],[1,"btn","btn-sm","btn-success","ml-2",2,"cursor","default","padding","6px 4px"],[1,"btn","btn-sm","btn-pending","mx-2",2,"cursor","default","padding","6px 4px"],[1,"btn","btn-sm","btn-secondary","mx-2",2,"cursor","default","padding","6px 4px"],[1,"block"],["for","show-origin-answer",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-student-FiRglRqPWZP","id","show-origin-answer","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","click","formControl"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",5),e.bIt("resize",function(l){return e.eBV(a),e.Njj(o.onResize(l))},!1,e.tSv),e.DNE(1,HI,3,3,"div",6)(2,mC,30,67,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,bC,27,19,"ng-template",null,1,e.C5r)}if(2&s){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",!(null!=o.initDataResult&&null!=o.initDataResult.data&&o.initDataResult.data.examResultObj||null!=o.initDataResult&&null!=o.initDataResult.data&&o.initDataResult.data.historyExamResultObjs))("ngIfElse",a)}},dependencies:[BS,YS,GS,Vw,af.X,_l.K,of.H,qu,H0,cI,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,g.Zm,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,yn.kk,yn.Cp,Ku.qe,Ku.$C,Ku.$l,Di.mq,Di.T8,vt.oV,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function vC(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",3),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function yC(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-test-review-for-student",4),e.bIt("selectedExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedExamCapacity(o))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("initDataResult",t.initDataAnswerTest)("capacityComponents",t.combineExamCapacity)}}let SC=(()=>{var i;class n extends Z.H{redirectToBackLink(){let s=this.commonService.getMyQueryParam("backto")??"/student/classroom/0";this.backToLink=this.commonService.getMyQueryParam("offline")?s||"/student/classroom/0":s}translateMetaTitle(s){this.commonService.getTranslate("lang_auto_ket_qua").subscribe(o=>{this.commonService.translateMetaData({title:o+": "+s,description:o+": "+s,image:"lang_cms_test_image"})})}selectedExamCapacity(s){let o=this.commonService.getMyParam(this.activeRoute,"tenant_id")?.toString(),a=this.commonService.getMyParam(this.activeRoute,"cate_id"),r=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString(),l=Number(this.commonService.getMyQueryParam("capacity")??"");this.initStatusObj(),this.frontExamResultService.apiFrontExamResultGetExamCapacityAnswerGet(r,s.examHashId,s.examCapacityTestId).subscribe(c=>{if(!c.success)return this.errorStatusObj(c.message,!0);this.initDataAnswerTest=c,this.commonService.myNavigationWithQueryString(`/test/answer-test/${o}/${a}/${r}/${this.initDataAnswerTest?.data?.examResultObj?.id??0}`,`?backto=${this.backToLink}${l?"&capacity=1":""}`),this.headerTitle=c?.data?.examObj?.name??"",this.translateMetaTitle(c.data?.examObj?.name),this.successStatusObj()})}getCapacityExamObjs(){var s=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString();if(!s)return this.successStatusObj();this.waitDestroy(this.frontExamService.apiFrontExamGetTestCapacityExamHashIdGet(s,this.initDataAnswerTest?.data?.examResultObj?.examCapacityTestId).subscribe(o=>{if(!o.success)return this.forceShowErrorBox(o.message,!0);this.combineExamCapacity=o.data?.testingComponents??[],this.successStatusObj()}))}getAndProcessDataForStudent(){this.initStatusObj();var s=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString();let o=Number(this.commonService.getMyParam(this.activeRoute,"result_id")),a=this.commonService.getMyQueryParam("offline")??"",r=this.commonService.myTranslateInstant("lang_auto_ket_qua"),l=Number(this.commonService.getMyQueryParam("capacity"));this.frontExamResultService.apiFrontExamResultGetExamAnswerGet(s,o,a).subscribe(c=>{if(1==c.success){if(this.initDataAnswerTest=c,this.headerTitle=`${r}: ${c?.data?.examObj?.name}`,this.translateMetaTitle(c.data?.examObj?.name),!l)return this.successStatusObj();this.getCapacityExamObjs()}else{if(!l)return this.errorStatusObj(c.message??"",!0);this.getCapacityExamObjs()}})}ngOnInit(){super.ngOnInit(),this.getAndProcessDataForStudent(),this.redirectToBackLink()}constructor(s,o){super(),this.activeRoute=s,this.frontExamResultService=o,this.frontExamService=(0,e.WQX)(Ce.iB),this.combineExamCapacity=[],this.headerTitle="",this.backToLink=""}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(L.nX),e.rXU(Ce.Ry))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-answer-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"selectedExamEmitter","initDataResult","capacityComponents"]],template:function(s,o){if(1&s&&(e.j41(0,"student-layout",1),e.DNE(1,vC,1,1,"azt-loading-effect",2)(2,yC,1,2,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backToLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ae.j,ie.K,xC,v.MD,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();var mf=A(45133);function wC(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",2),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function IC(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG().$implicit;e.R7$(),e.JRh(t.mark+"/"+s.examMark)}}function CC(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_duoc_xem_diem")))}function kC(i,n){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"span"),e.EFF(3),e.k0s()(),e.j41(4,"td",17)(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"td",17),e.DNE(8,IC,2,1,"span",18)(9,CC,3,3,"span",18),e.k0s()()),2&i){const t=n.$implicit,s=e.XpG().$implicit,o=e.XpG(3);e.R7$(3),e.JRh(s.folderName),e.R7$(3),e.JRh(t.totalQuestion),e.R7$(2),e.Y8G("ngIf",2!=o.capacityExam.whenShowResult),e.R7$(),e.Y8G("ngIf",2==o.capacityExam.whenShowResult)}}function EC(i,n){if(1&i&&(e.qex(0),e.DNE(1,kC,10,4,"tr",13),e.bVm()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",t.examResults)}}function AC(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"span",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"span",8),e.EFF(7),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th",11)(15,"span",6),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"th",12)(19,"span",6),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()(),e.j41(22,"th",12)(23,"span",6),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()()()(),e.j41(26,"tbody"),e.DNE(27,EC,2,1,"ng-container",13),e.k0s()()(),e.j41(28,"div",9)(29,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToAnswerTest())}),e.j41(30,"span",15),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.nrm(33,"lucide-icon",16),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,7,"lang_azt_exam_results")+" "+t.capacityExam.name),e.R7$(4),e.SpI(" ",e.bMT(8,9,"lang_auto_tong_diem")+": "+(2!=t.capacityExam.whenShowResult?t.totalMark+"/"+t.totalExamMark:e.bMT(9,11,"lang_auto_chua_duoc_xem_diem"))," "),e.R7$(9),e.JRh(e.bMT(17,13,"lang_azt_exam_part")),e.R7$(4),e.JRh(e.bMT(21,15,"lang_azt_question_number")),e.R7$(4),e.JRh(e.bMT(25,17,"lang_azt_points_reach_the_total_score")),e.R7$(3),e.Y8G("ngForOf",t.examFolders),e.R7$(4),e.JRh(e.bMT(32,19,"lang_auto_xem_dap_an_chi_tiet"))}}function OC(i,n){if(1&i&&e.DNE(0,AC,34,21,"div",3),2&i){const t=e.XpG();e.Y8G("ngIf",t.capacityExam)}}let RC=(()=>{var i;class n extends mf.C{redirectToAnswerTest(){this.capacityExam&&this.commonService.myNavigationWithQueryString("/test/answer-test/"+this.capacityExam.tenantId+"/"+(this.capacityExam.categoryId??0)+"/"+this.hashId+"/"+this.resultId,"?backto="+encodeURIComponent(`/test/submit-test/${this.capacityExam.tenantId}/${this.capacityExam.categoryId??0}/${this.hashId}/${this.resultId}?capacity=1`)+"&capacity=1")}timeTested(s){return this.timeService.calculationTimeExamTested(s.startedTest,s.createdAt)}getCapacityExamObjs(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamGetTestCapacityExamHashIdGet(this.hashId).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);this.examFolders=this.handleData(s.data?.testingComponents??[]),this.userObj=s.data?.student,this.capacityExam=s.data?.capacityExam,this.totalMark=s.data?.mark??0,this.totalExamMark=s.data?.examMark??0,this.successStatusObj()}))}handleData(s,o,a){const r=[...s.filter(c=>"EXAM"===c.objectType),...s.filter(c=>"EXAM"!==c.objectType)];let l=[];return r.forEach(c=>{if("FOLDER"==c.objectType){const p=this.handleData(c.children,(o?o+" > ":"")+c.objectName,c.mark);return void l.push(...p)}if(!c.examResult)return;const _={name:c.objectName,...c.examResult},d=l.find(p=>p.folderName==o);d?d.examResults.push(_):l.push({id:c.id,folderName:o,mark:a,totalQuestion:_.totalQuestion,rightAnswer:_.rightAnswer,examResults:[_],examMark:c?.examMark})}),l}ngOnInit(){this.getCapacityExamObjs()}constructor(s,o){super(),this.timeService=s,this.frontExamService=o,this.hashId="",this.resultId=0,this.examFolders=[],this.totalMark=0,this.totalExamMark=0}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(mn.F),e.rXU(Ce.iB))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-capacity-exam-tree-in-mar-result-mode-component"]],inputs:{hashId:"hashId",resultId:"resultId"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","box mx-auto p-3",4,"ngIf"],[1,"box","mx-auto","p-3"],[1,"text-lg","text-center","uppercase"],[1,"font-medium"],[1,"flex","items-center","uppercase","justify-center","mt-2","text-danger"],[1,"text-md","font-bold"],[1,"mt-3"],[1,"table","table-bordered","border"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],["azt-track-service","submit-test-ikX9fXn-mw",1,"btn","btn-outline-primary","w-full",3,"click"],[1,"mr-1"],["name","chevron-right","size","16"],[1,"text-center"],[4,"ngIf"]],template:function(s,o){if(1&s&&e.DNE(0,wC,1,1,"azt-loading-effect",1)(1,OC,1,1,"ng-template",null,0,e.C5r),2&s){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,v.MD,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function FC(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showGame())}),e.j41(1,"div",2),e.nrm(2,"img",3),e.k0s(),e.j41(3,"div",4),e.EFF(4," Ch\u01a1i game tr\xean Azota "),e.nrm(5,"br"),e.EFF(6," c\xf9ng v\u1edbi b\u1ea1n b\xe8 !!! "),e.k0s()()}}let jC=(()=>{var i;class n extends Z.H{ngOnInit(){if(super.ngOnInit(),!tt.c.gameEnable||!this.userService.isLogin())return;const s=this.userService.getUserObj();fetch(`${tt.c.gameServiceApiUrl}/api/reference/player`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referenceId:s.id,referenceName:s.fullName,referenceAvatar:s.avatar,consumerKey:tt.c.gameGlobalConsumerKey,sharedSecret:tt.c.gameGlobalSharedSecret})}).then(a=>{if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{this.rememberToken=a.data.rememberToken,this.referenceEnabled=a.data.referenceEnabled}).catch(a=>{console.error("Error fetching user data:",a)})}showGame(){this.opening||window.open(`${tt.c.gameServiceMainUrl}/game/1?rememberToken=${this.rememberToken}`,"_blank")}constructor(s){super(),this.sAztDialogService=s,this.opening=!1,this.userService=(0,e.WQX)(pn.R),this.rememberToken=void 0,this.referenceEnabled=!1}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Mn.i))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-game-show-button"]],standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","game-show-button btn btn-primary shadown-lg",3,"click",4,"ngIf"],[1,"game-show-button","btn","btn-primary","shadown-lg",3,"click"],[1,"btn-game","border","dark:border-darkmode-400","border-slate-200","box"],["src","https://game.textandtool.com/caro/logo.png","alt","Caro",2,"width","40px","height","40px"],[1,"ml-4","font-medium","text-base"]],template:function(s,o){1&s&&e.DNE(0,FC,7,0,"div",0),2&s&&e.Y8G("ngIf",o.rememberToken&&o.referenceEnabled)},dependencies:[v.MD,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],styles:['@charset "UTF-8";.game-show-button[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50px;padding:10px;justify-content:flex-start;text-align:left}.btn-game[_ngcontent-%COMP%]{position:relative;cursor:pointer;overflow:hidden;outline:none;animation:_ngcontent-%COMP%_shake 1.5s infinite ease-in-out;border-radius:50%;width:60px;height:60px;display:flex;justify-content:center;align-items:center}.btn-game[_ngcontent-%COMP%]:before, .btn-game[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:10px;height:10px;background:#fff6;border-radius:50%;transform:translate(-50%,-50%) scale(0);animation:_ngcontent-%COMP%_ripple 2s infinite ease-out}.btn-game[_ngcontent-%COMP%]:after{animation-delay:1s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-1px) rotate(-20deg)}50%{transform:translate(1px) rotate(-20deg)}75%{transform:translate(-.5px) rotate(-.5deg)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:translate(-50%,-50%) scale(0);opacity:1}to{transform:translate(-50%,-50%) scale(10);opacity:0}}']}),n})();const pf=()=>({"max-width":"100%"}),Zu=()=>({"mr-2":!0}),e_=()=>({"ml-1 flex":!0});function zC(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",7),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function MC(i,n){if(1&i&&(e.qex(0),e.nrm(1,"div",16),e.j41(2,"div",17),e.eu8(3,18),e.k0s(),e.nrm(4,"div",16),e.bVm()),2&i){e.XpG(2);const t=e.sdS(5);e.R7$(3),e.Y8G("ngTemplateOutlet",t)}}function DC(i,n){1&i&&(e.j41(0,"div",12),e.nrm(1,"app-game-show-button",22),e.k0s())}function GC(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",19),e.eu8(2,18),e.k0s(),e.DNE(3,DC,2,0,"div",20),e.j41(4,"div",19),e.nrm(5,"azt-leaderboard",21),e.k0s(),e.j41(6,"div",19),e.nrm(7,"azt-frontend-banner-ads-box",14),e.k0s(),e.bVm()),2&i){const t=e.XpG(2),s=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",s),e.R7$(),e.Y8G("ngIf",t.isMobileDevice),e.R7$(2),e.Y8G("hashId",t.hashId)("view","part"),e.R7$(2),e.Y8G("classStyle","mb-3 block")("adsPosition",t.allAdsPositions.STUDENTSUBMITTESTATRIGHT)}}function PC(i,n){if(1&i&&e.nrm(0,"azt-practice-box",23),2&i){const t=e.XpG(2);e.Y8G("resultId",t.resultId)("webPage","STUDENT_SUBMIT_TEST")}}function NC(i,n){if(1&i&&(e.j41(0,"div",8)(1,"div",9),e.DNE(2,MC,5,1,"ng-container",10)(3,GC,8,6,"ng-container",10),e.k0s(),e.j41(4,"div",11)(5,"div",12)(6,"div",13),e.nrm(7,"azt-frontend-banner-ads-box",14),e.DNE(8,PC,1,2,"azt-practice-box",15),e.nI1(9,"getWebUIDynamicConfig"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!t.isBusinessDomain),e.R7$(4),e.Y8G("classStyle","mb-3 block")("adsPosition",t.allAdsPositions.STUDENTSUBMITTESTATLIST),e.R7$(),e.Y8G("ngIf","0"!=e.bMT(9,5,"showPracticeAtSubmitTest"))}}function VC(i,n){if(1&i&&(e.j41(0,"div",26),e.nrm(1,"app-capacity-exam-tree-in-mar-result-mode-component",27),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("ngStyle",e.lJ4(3,pf)),e.R7$(),e.Y8G("hashId",t.hashId)("resultId",t.resultId)}}function LC(i,n){1&i&&(e.j41(0,"div")(1,"div",30)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_auto_co_loi_khi_tai_ket_qua_vui_long_tai_lai_trang_hoac_thu_lai_sau")))}function BC(i,n){if(1&i&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&i){const t=e.XpG(6);e.R7$(),e.SpI(" ",(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")," ")}}function $C(i,n){if(1&i&&(e.qex(0),e.j41(1,"span",47),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,BC,2,1,"span",48),e.bVm()),2&i){const t=e.XpG(5);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_diem_cua_ban"),":"),e.R7$(2),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.mark))}}function QC(i,n){1&i&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_trac_nghiem_cua_ban"),":"))}function qC(i,n){1&i&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":"))}function YC(i,n){if(1&i&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&i){const t=e.XpG(6);e.R7$(),e.SpI(" ",(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")," ")}}function UC(i,n){if(1&i&&(e.qex(0),e.DNE(1,QC,3,3,"span",50)(2,qC,3,3,"span",50)(3,YC,2,1,"span",48),e.bVm()),2&i){const t=e.XpG(5);e.R7$(),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.mark))}}function XC(i,n){1&i&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":"))}function WC(i,n){if(1&i&&(e.j41(0,"span",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(6);e.R7$(),e.SpI(" ",(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")," ")}}function HC(i,n){1&i&&(e.j41(0,"span",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_co_diem")))}function JC(i,n){if(1&i&&(e.qex(0),e.DNE(1,XC,3,3,"span",50)(2,WC,2,1,"span",51)(3,HC,3,3,"span",46),e.bVm()),2&i){const t=e.XpG(5);e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.mark)&&null!=(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.essayMark))}}function KC(i,n){1&i&&(e.j41(0,"span",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_co_diem")))}function ZC(i,n){if(1&i&&(e.j41(0,"div",45),e.DNE(1,$C,5,4,"ng-container",10),e.nI1(2,"isOnlyTrueFalse"),e.DNE(3,UC,4,3,"ng-container",10),e.nI1(4,"isMixTrueFalseAndEssay"),e.DNE(5,JC,4,3,"ng-container",10),e.nI1(6,"isOnlyEssay"),e.DNE(7,KC,3,3,"span",46),e.k0s()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",e.bMT(2,4,t.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,6,t.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,8,t.examObj)),e.R7$(2),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.mark))}}function ek(i,n){1&i&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":"))}function tk(i,n){if(1&i&&(e.j41(0,"div",54),e.DNE(1,ek,3,3,"span",50),e.j41(2,"span",49),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(2),e.SpI(" ",e.bMT(4,2,"lang_auto_chua_duoc_xem_diem")," ")}}function nk(i,n){if(1&i&&(e.j41(0,"div",55)(1,"p",40),e.nrm(2,"lucide-icon",56),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",42),e.EFF(6),e.k0s()()),2&i){const t=e.XpG(4);e.R7$(2),e.Y8G("ngClass",e.lJ4(5,Zu)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_thi_sinh")," "),e.R7$(3),e.SpI(" ",null!=t.studentObj&&t.studentObj.fullName?null==t.studentObj?null:t.studentObj.fullName:null==t.userObj?null:t.userObj.fullName," ")}}function sk(i,n){if(1&i&&(e.j41(0,"div",57)(1,"p",40),e.nrm(2,"lucide-icon",58),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",42),e.EFF(6),e.k0s()()),2&i){let t;const s=e.XpG(4);e.R7$(2),e.Y8G("ngClass",e.lJ4(5,Zu)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_so_luong_trac_nghiem_dung")," "),e.R7$(3),e.SpI(" ",(null==s.examResultObj?null:s.examResultObj.rightAnswer)+"/"+(null!==(t=null==s.examResultObj||null==s.examResultObj.examResultStatisticObj||null==s.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:s.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalTrueFalseQuestion)&&void 0!==t?t:0)," ")}}function ik(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",59)(2,"div",60)(3,"button",61),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.redirectToTakeTraining())}),e.EFF(4),e.nI1(5,"mytranslate"),e.nrm(6,"lucide-icon",62),e.k0s()(),e.j41(7,"div",60)(8,"button",63),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.redirectToAnswerTest())}),e.EFF(9),e.nI1(10,"mytranslate"),e.nrm(11,"lucide-icon",64),e.k0s()()(),e.bVm()}2&i&&(e.R7$(4),e.SpI(" ",e.bMT(5,4,"lang_testbank_frontend_practice_again")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(8,e_)),e.R7$(3),e.SpI(" ",e.bMT(10,6,"lang_auto_xem_dap_an_chi_tiet")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,e_)))}function ok(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",63),e.bIt("click",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(o.redirectToAnswerTest())}),e.EFF(1),e.nI1(2,"mytranslate"),e.nrm(3,"lucide-icon",64),e.k0s()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_xem_dap_an_chi_tiet")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(4,e_)))}function ak(i,n){1&i&&(e.j41(0,"button",67),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.Y8G("disabled",!0),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_chua_duoc_xem_ket_qua")," "))}function rk(i,n){if(1&i&&(e.j41(0,"div",59)(1,"div",12),e.DNE(2,ok,4,5,"button",65)(3,ak,3,4,"button",66),e.k0s()()),2&i){const t=e.XpG(4);e.R7$(2),e.Y8G("ngIf",!1!==(null==t.examObj?null:t.examObj.allowStudentView)),e.R7$(),e.Y8G("ngIf",!1===(null==t.examObj?null:t.examObj.allowStudentView))}}function lk(i,n){if(1&i&&(e.j41(0,"div",31)(1,"div",32)(2,"h2",33),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.DNE(5,ZC,8,10,"div",34)(6,tk,5,4,"div",35),e.j41(7,"h3",36),e.EFF(8),e.k0s(),e.j41(9,"div",37),e.DNE(10,nk,7,6,"div",38),e.j41(11,"div",39)(12,"p",40),e.nrm(13,"lucide-icon",41),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p",42),e.EFF(17),e.k0s()(),e.DNE(18,sk,7,6,"div",43),e.k0s(),e.j41(19,"div",44),e.DNE(20,ik,12,10,"ng-container",29)(21,rk,4,2,"ng-template",null,3,e.C5r),e.k0s()()),2&i){const t=e.sdS(22),s=e.XpG(3);e.R7$(3),e.JRh(e.bMT(4,11,"lang_auto_bai_lam_cua_ban_da_duoc_gui_di")),e.R7$(2),e.Y8G("ngIf",2!=(null==s.examObj?null:s.examObj.whenShowResult)),e.R7$(),e.Y8G("ngIf",2==(null==s.examObj?null:s.examObj.whenShowResult)),e.R7$(2),e.SpI(" ",null==s.examObj?null:s.examObj.name," "),e.R7$(2),e.Y8G("ngIf",(null==s.studentObj?null:s.studentObj.fullName)||(null==s.userObj?null:s.userObj.fullName)),e.R7$(3),e.Y8G("ngClass",e.lJ4(15,Zu)),e.R7$(),e.SpI(" ",e.bMT(15,13,"lang_auto_thoi_gian_lam_bai")," "),e.R7$(3),e.SpI(" ",s.timeTested," "),e.R7$(),e.Y8G("ngIf",null!=(null==s.examResultObj?null:s.examResultObj.rightAnswer)),e.R7$(2),e.Y8G("ngIf",1==s.examConfigObj.allowTestingEachQuestion)("ngIfElse",t)}}function ck(i,n){if(1&i&&(e.j41(0,"div",28),e.DNE(1,LC,5,3,"div",29)(2,lk,23,16,"ng-template",null,2,e.C5r),e.k0s()),2&i){const t=e.sdS(3),s=e.XpG(2);e.Y8G("ngStyle",e.lJ4(3,pf)),e.R7$(),e.Y8G("ngIf",""!=s.statusObj.errorMessage)("ngIfElse",t)}}function uk(i,n){if(1&i&&e.DNE(0,VC,2,4,"div",24)(1,ck,4,4,"div",25),2&i){const t=e.XpG();e.Y8G("ngIf",t.isCapacity),e.R7$(),e.Y8G("ngIf",!t.isCapacity)}}function _k(i,n){1&i&&(e.j41(0,"div",68),e.nrm(1,"app-game-show-button",22),e.k0s())}let dk=(()=>{var i;class n extends Z.H{redirectToAnswerTest(){this.commonService.myNavigationWithQueryString("/test/answer-test/"+this.tenantId+"/"+this.curCategoryId+"/"+this.hashId+"/"+this.resultId,"?backto="+encodeURIComponent(this.returnLink))}redirectToTakeTraining(){this.commonService.myNavigationWithQueryString(null!=this.curCategoryId?"/test/take-training/"+this.tenantId+"/"+this.curCategoryId+"/"+this.hashId:"/test/take-training/"+this.tenantId+"/0/"+this.hashId,"?backto="+encodeURIComponent(this.backToLink))}getExamResult(){this.initStatusObj(),this.waitDestroy(this.frontExamResultService.apiFrontExamResultGetObjGet(this.hashId,this.resultId).subscribe(s=>{if(1==s.success){this.hasErrorMessage=s.message?s.message:"",this.examObj=s.data?.examObj,this.examResultObj=s.data?.examResultObj,this.studentObj=s.data?.studentObj,this.examConfigObj=s.data?.examConfigObj??{};var o=new Date(s.data?.examResultObj?.startedTest??""),a=new Date(s.data?.examResultObj?.createdAt??"");this.timeTested=this.timeService.calculationTimeExamTested(o,a);let r="";this.commonService.getTranslate("lang_auto_nop_bai").subscribe(l=>{r=l}),this.commonService.translateMetaData({title:r+": "+this.examObj?.name,description:this.examObj?.name}),this.stopStatusObj()}else this.errorStatusObj(s.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var s=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString();this.tenantId=Number(this.commonService.getMyParam(this.activeRoute,"tenant_id")),this.curCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.resultId=Number(this.commonService.getMyParam(this.activeRoute,"result_id")),this.hashId=s||"",this.userObj=this.userService.getUserObj(),this.isCapacity=Number(this.commonService.getMyQueryParam("capacity"))>0,this.isCapacity||this.getExamResult()})),this.backToLink=`/de-thi/${this.hashId}`,this.returnLink=`/test/submit-test/${this.tenantId}/${this.curCategoryId}/${this.hashId}/${this.resultId}`,this.paramBackToLink=this.commonService.getMyQueryParam("backto")??"",this.checkMobileScreen=!this.commonService.compareDeviceScreen(768)}constructor(s,o,a,r,l){super(),this.sAztDialogService=s,this.activeRoute=o,this.frontExamResultService=a,this.timeService=r,this.userService=l,this.backToLink="",this.paramBackToLink="",this.returnLink="",this.hashId="",this.curCategoryId=0,this.resultId=0,this.isCapacity=!1,this.tenantId=0,this.examConfigObj={},this.allAdsPositions=In.rA,this.allAdsDisplayTypes=In.ud,this.seconds="",this.minutes="",this.hours="",this.days="",this.hasErrorMessage="",this.timeTested="",this.checkMobileScreen=!1}ngOnDestroy(){super.ngOnDestroy()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Mn.i),e.rXU(L.nX),e.rXU(Ce.Ry),e.rXU(mn.F),e.rXU(pn.R))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-submit-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:7,vars:4,consts:[["doneLoading",""],["showSubmitExamTpl",""],["notError",""],["testingFlow",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["style","position: fixed; right: 30px; bottom: 120px; z-index: 9999; width: 265px",4,"ngIf"],[3,"currentStatusObj"],[1,"intro-y","mt-5"],[1,"grid","grid-cols-12","gap-5","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"mt-5","mx-auto"],[3,"classStyle","adsPosition"],[3,"resultId","webPage",4,"ngIf"],[1,"md:col-span-1"],[1,"col-span-12","md:col-span-10"],[3,"ngTemplateOutlet"],[1,"col-span-12","md:col-span-6","lg:col-span-4"],["class","col-span-12",4,"ngIf"],[3,"hashId","view"],[1,"w-full"],[3,"resultId","webPage"],[3,"ngStyle",4,"ngIf"],["class","box h-full mx-auto",3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"hashId","resultId"],[1,"box","h-full","mx-auto",3,"ngStyle"],[4,"ngIf","ngIfElse"],[1,"alert","alert-danger"],[1,"flex","flex-col","h-full"],[1,"text-center","pt-3"],[1,"text-lg","font-bold"],["class","text-center border-b border-slate-200/60 dark:border-darkmode-400 p-2",4,"ngIf"],["class","text-center border-b border-slate-200/60 dark:border-darkmode-400 p-5",4,"ngIf"],[1,"text-md","font-medium","text-center","mt-3","px-5","text-break"],[1,"azt-info-exam","mt-3","px-5"],["class","flex items-center",4,"ngIf"],[1,"flex","items-center","mt-2"],[1,"text-md","flex","items-center"],["name","clock","size","16",3,"ngClass"],[1,"text-md","font-medium","ml-auto"],["class","flex items-center mt-3",4,"ngIf"],[1,"p-3","px-5","pb-5",2,"margin-top","auto"],[1,"text-center","border-b","border-slate-200/60","dark:border-darkmode-400","p-2"],["class","font-medium text-lg text-danger",4,"ngIf"],[1,"font-medium","text-md","mr-2"],["class","font-medium text-lg","style","font-size: 25px",4,"ngIf"],[1,"font-medium","text-lg",2,"font-size","25px"],["class","font-medium text-md mr-2",4,"ngIf"],["class","font-medium text-lg",4,"ngIf"],[1,"font-medium","text-lg"],[1,"font-medium","text-lg","text-danger"],[1,"text-center","border-b","border-slate-200/60","dark:border-darkmode-400","p-5"],[1,"flex","items-center"],["name","user","size","16",3,"ngClass"],[1,"flex","items-center","mt-3"],["name","circle-check","size","16",3,"ngClass"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6"],["azt-track-service","submit-test-ikX9fXn-mw",1,"btn","btn-outline-pending","w-full",3,"click"],["name","clipboard-pen-line","size","16",3,"ngClass"],["azt-track-service","submit-test-ikX9fXn-mw",1,"btn","btn-outline-primary","w-full",3,"click"],["name","chevron-right","size","16",3,"ngClass"],["azt-track-service","submit-test-ikX9fXn-mw","class","btn btn-outline-primary w-full",3,"click",4,"ngIf"],["class","btn btn-outline-primary w-full",3,"disabled",4,"ngIf"],[1,"btn","btn-outline-primary","w-full",3,"disabled"],[2,"position","fixed","right","30px","bottom","120px","z-index","9999","width","265px"]],template:function(s,o){if(1&s&&(e.j41(0,"student-layout",4),e.DNE(1,zC,1,1,"azt-loading-effect",5)(2,NC,10,7,"ng-template",null,0,e.C5r)(4,uk,2,2,"ng-template",null,1,e.C5r),e.k0s(),e.DNE(6,_k,2,0,"div",6)),2&s){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backToLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.Y8G("ngIf",!o.isMobileDevice)}},dependencies:[ae.j,ie.K,jC,vh.g,_l.K,af.X,RC,v.MD,v.YU,v.bT,v.T3,v.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.PP,z.Pj,z.ZY,z.jY,U.Id,q.k],encapsulation:2}),n})();var mk=A(43684),pk=A(88801),$t=function(i){return i.LIST_QUESTION="LIST_QUESTION",i.STEP_QUESTION="STEP_QUESTION",i.TRAINING_QUESTION="TRAINING_QUESTION",i.GROUP_QUESTION="GROUP_QUESTION",i}($t||{}),t_=A(18359);let hk=(()=>{var i;class n{constructor(s,o,a,r,l){this.commonService=s,this.sAztCommonCdnService=o,this.trackJsExceptionService=a,this.answerTypeService=r,this.userService=l,this.labelsImg=new Image,this.questionLabelMap=[],this.abcdLabelPos={},this.subscription=new t_.yU}cancelSubscription(){this.subscription.unsubscribe()}makeRetry(s,o,a,r,l,c,_,d){s.crossOrigin="anonymous",s.setAttribute("totalRetry","0"),s.onerror=()=>{let p=parseInt(s.getAttribute("totalRetry")||"0");if(p++,p<=o)setTimeout(()=>{if(p>Math.floor(o/2))s.src=this.sAztCommonCdnService.getMyCdn(s.src);else{let I=s.src.split("?")[0];s.src=I+"?t="+Date.now()}s.setAttribute("totalRetry",p.toString())},a);else{var f=0,b=this.userService.getUserObj();b&&b.id&&(f=b.id);let I=document.URL.split("?")[0].split("/"),y={userId:f,trackKey:"V2_ERR_DISPLAY",name:"Track l\u1ed7i kh\xf4ng hi\u1ec3n th\u1ecb c\xe2u h\u1ecfi v2",userAgent:navigator.userAgent,url:document.URL,content:s.src,error:I[I.length-1]};if(this.subscription.add(this.trackJsExceptionService.apiTrackJsExceptionSaveObjPost(y).subscribe(()=>{console.log("Track l\u1ed7i th\xe0nh c\xf4ng!")})),(r||0===r)&&l&&c&&_){_[r].mixDataImg=this.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("svgs/Img_dat-01.svg");let k=document.getElementById("questionPlaceholder_"+r);k?.setAttribute("loadSuccess","0");let O=document.getElementById("media_content_all_"+_[r].id);O?.setAttribute("loadSuccess","0");const j=V=>{"0"===V?.getAttribute("loadSuccess")&&(d?this.prepareImageForOtherTypes(c,r,_):this.prepareImageToDrawForType1(l,c,r,_))};O?O.onclick=()=>{j(O)}:k&&(k.onclick=()=>{j(k)})}}}}prepareImageToDrawForType1(s,o,a,r){if(o.metaData&&o.metaData.question){let l=1+s.length,c=0,_=new Image;_.crossOrigin="anonymous",_.onload=()=>{c++,c==l&&this.drawEachQuestion(s,o,a,_,d,r)},this.makeRetry(_,3,1e3,a,s,o,r),_.src=this.sAztCommonCdnService.getMyCdn(o.metaData.question.url||"");let d=[];for(let p=0;p<s.length;p++)d[p]=new Image,d[p].crossOrigin="anonymous",d[p].onload=()=>{c++,c==l&&this.drawEachQuestion(s,o,a,_,d,r)},this.makeRetry(d[p],3,1e3,a,s,o,r),d[p].src=this.sAztCommonCdnService.getMyCdn(s[p].content)}}prepareImageForOtherTypes(s,o,a){if(s.metaData&&s.metaData.question){let r=document.createElement("canvas");r.width=s.metaData.question.width+10,r.height=s.metaData.question.height;let l=r.getContext("2d"),c=new Image;c.crossOrigin="anonymous";const _=s.metaData.question.remove.x,d=s.metaData.question.remove.y;c.onload=()=>{l?.drawImage(c,10,0),l?.drawImage(this.labelsImg,this.questionLabelMap[o].left,this.questionLabelMap[o].top,this.questionLabelMap[o].width,this.questionLabelMap[o].height,_,d,this.questionLabelMap[o].width,this.questionLabelMap[o].height),a[o].mixDataImg=r.toDataURL("image/png")},this.makeRetry(c,3,1e3,void 0,void 0,void 0,void 0,"others"),c.src=this.sAztCommonCdnService.getMyCdn(s.metaData.question.url||"")}}drawEachQuestion(s,o,a,r,l,c){if(o.metaData&&o.metaData.answers&&o.metaData.question){let _=document.createElement("canvas");_.width=o.metaData.question.width+15,_.height=o.metaData.question.height;let d=_.getContext("2d");d?.drawImage(r,15,0),d?.drawImage(this.labelsImg,this.questionLabelMap[a].left,this.questionLabelMap[a].top,this.questionLabelMap[a].width,this.questionLabelMap[a].height,o.metaData.question.remove.x,o.metaData.question.remove.y,this.questionLabelMap[a].width,this.questionLabelMap[a].height);let p=l[0],f=0,b=0,I=0,y=o.metaData.answers[0].x,k=o.metaData.answers[0].y;f=y,b=y+p.width,I=y+p.width;let O=l[0].height-o.metaData.answers[0].height;d?.drawImage(p,y,k);let j=s[0].alpha?s[0].alpha:s[0].key,V=0;if(s[0].alpha){let S=s[0].key;for(let x=0;x<s.length;x++)if(S==s[x].alpha){V=x;break}}let te={left:void 0!==o.metaData.answers[V].remove.xAns?y+(o.metaData.answers[V].remove.xAns||0):o.metaData.answers[0].remove.x,top:void 0!==o.metaData.answers[V].remove.yAns?k+(o.metaData.answers[V].remove.yAns||0):o.metaData.answers[0].remove.y,width:o.metaData.answers[0].remove.width,height:o.metaData.answers[0].remove.height};this.abcdLabelPos&&this.abcdLabelPos.hasOwnProperty(j)&&d?.drawImage(this.labelsImg,this.abcdLabelPos[j].left,this.abcdLabelPos[j].top,o.metaData.answers[0].remove.width,o.metaData.answers[0].remove.height,te.left,te.top,te.width,te.height),c[a].answerLabelsMockup[`label-${s[0].alpha?s[0].alpha:s[0].key}`]=te;for(let S=1;S<s.length;S++){let x=o.metaData.answers[S].x,C=o.metaData.answers[S].y;if(f+30<x){let Ze=[I,b];x<Math.max(...Ze)&&(x=Math.max(...Ze),x+l[S].width>_.width&&(x-=x+l[S].width-_.width),o.metaData.answers[S].remove.x=x),b+=l[S].width}else if(b=f+l[S].width,C+=O,O+=l[S].height-o.metaData.answers[S].height,C+l[S].height>_.height){let Ze=C+l[S].height-_.height;C-=Ze,o.metaData.answers[S].remove.y-=Ze}d?.drawImage(l[S],x,C);let E=S,R=s[S].alpha?s[S].alpha:s[S].key;if(s[S].alpha){let Ze=s[S].key;for(let Rt=0;Rt<s.length;Rt++)if(Ze==s[Rt].alpha){E=Rt;break}}let Be={left:void 0!==o.metaData.answers[E].remove.xAns?x+(o.metaData.answers[E].remove.xAns||0):o.metaData.answers[S].remove.x,top:void 0!==o.metaData.answers[E].remove.yAns?C+(o.metaData.answers[E].remove.yAns||0):o.metaData.answers[S].remove.y,width:o.metaData.answers[S].remove.width,height:o.metaData.answers[S].remove.height};this.abcdLabelPos&&this.abcdLabelPos.hasOwnProperty(R||"a")&&d?.drawImage(this.labelsImg,this.abcdLabelPos[R||"a"].left,this.abcdLabelPos[R||"b"].top,o.metaData.answers[S].remove.width,o.metaData.answers[S].remove.height,Be.left,Be.top,Be.width,Be.height),c[a].answerLabelsMockup[`label-${s[S].alpha?s[S].alpha:s[S].key}`]=Be,S==s.length-1&&(c[a].mixDataImg=_.toDataURL("image/png"),document.getElementById("media_content_all_"+c[a].id)?.setAttribute("loadSuccess","1"),document.getElementById("questionPlaceholder_"+a)?.setAttribute("loadSuccess","1"))}}}}return(i=n).\u0275fac=function(s){return new(s||i)(e.KVO(Le.R),e.KVO(os.c),e.KVO(dl.rk),e.KVO(on._),e.KVO(pn.R))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var hf=A(98230),ff=A(98734),Ie=function(i){return i[i.INIT=0]="INIT",i[i.LOGIN_DIALOG=1]="LOGIN_DIALOG",i[i.PAYMENT_DIALOG=2]="PAYMENT_DIALOG",i[i.INFO_REQUIRED_DIALOG=3]="INFO_REQUIRED_DIALOG",i[i.WAIT_TO_TEST_TIME=4]="WAIT_TO_TEST_TIME",i[i.CHOOSE_STUDENT=5]="CHOOSE_STUDENT",i[i.SEQUENCE_STEP=6]="SEQUENCE_STEP",i[i.CAPACITY_EXAM_SELECT=7]="CAPACITY_EXAM_SELECT",i[i.CAPACITY_EXAM_INTRO=8]="CAPACITY_EXAM_INTRO",i[i.SHOW_ESSAY_WARNING_DIALOG=9]="SHOW_ESSAY_WARNING_DIALOG",i[i.SHOW_FULL_SCREEN=10]="SHOW_FULL_SCREEN",i[i.SHOW_VIDEO_REQUIRED=11]="SHOW_VIDEO_REQUIRED",i[i.RUN_OUT_OF_TIME_AFTER_TEST=12]="RUN_OUT_OF_TIME_AFTER_TEST",i[i.RUN_OUT_OF_TIME_WHEN_F5=13]="RUN_OUT_OF_TIME_WHEN_F5",i[i.START_TEST=14]="START_TEST",i[i.SHOW_ERROR_MESSAGE=15]="SHOW_ERROR_MESSAGE",i[i.SHOW_APP_ONLY_MESSAGE=16]="SHOW_APP_ONLY_MESSAGE",i}(Ie||{});class Ns{constructor(){this.customDocument={...document}}showFullScreen(){try{const n=document.documentElement;let t=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullscreen||n.msRequestFullscreen;t&&t.call(n)}catch{}}exitFullscreen(){try{const n=document;if(window.innerHeight==screen.height){let t=n.exitFullscreen||n.webkitExitFullscreen||n.msExitFullscreen;t&&t.call(n)}}catch{}}checkFullScreen(){switch(this.detectBrowserName()){case"chrome":case"firefox":return document.fullscreenElement;default:return this.customDocument.webkitFullscreenElement}}detectBrowserName(){const n=navigator.userAgent.toLowerCase();return n.match(/chrome|chromium|crios/i)?"chrome":n.match(/firefox|fxios/i)?"firefox":n.match(/safari/i)?"safari":n.match(/opr\//i)?"opera":n.match(/edg/i)?"edge":"other"}}let kr=(()=>{var i;class n{constructor(){this.allowTrackVisible=!0,this.allowTrackFullScreen=!0,this._isSendingToApi=!1}reset(){this.allowTrackVisible=!0,this.allowTrackFullScreen=!0}isAllowTrackVisible(){return this.allowTrackVisible}setAllowTrackVisibleStatus(s){this.allowTrackVisible=s}isAllowTrackFullScreen(){return this.allowTrackFullScreen}setAllowTrackFullScreenStatus(s){this.allowTrackFullScreen=s}setSendingToApiStatus(s){this._isSendingToApi=s}isSendingToApi(){return this._isSendingToApi}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();class Dt{getPassword(){return this.browserStorageService.getSimpleStorage(this.PASSWORD_LOCAL_STORAGE_KEY+this.examHashId)}savePassword(n){null==n||""==n||this.browserStorageService.saveSimpleStorage(this.PASSWORD_LOCAL_STORAGE_KEY+this.examHashId,n)}removePassword(){this.browserStorageService.removeSimpleStorage(this.PASSWORD_LOCAL_STORAGE_KEY+this.examHashId)}hasInfo(){let n=this.browserStorageService.getSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId);return null!=n&&null!=n&&"[]"!=n&&""!=n}getInfo(){return this.browserStorageService.getSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId)}saveInfo(n){null==n||""==n||this.browserStorageService.saveSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId,n)}removeInfo(){this.browserStorageService.removeSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId)}constructor(n,t){this.examHashId=n,this.browserStorageService=t,this.PASSWORD_LOCAL_STORAGE_KEY="password_",this.USER_INFO_LOCAL_STORAGE_KEY="userInfoV3_"}}class n_{sendAudioForQuestion(n,t){if(!n.termExamResultId)return n;var s=n.viewQuestionObjs;let o=s.find(a=>a.id==t.obj?.id);return o&&(1==t.play?o.limitPlay=(o.limitPlay??0)+1:(o.limitPlay=(o.limitPlay??0)-1,o.limitAudio=(o.limitAudio??0)+1,o.audioLimitObjs?.map(a=>a.status=a.index!=t.index&&a.status)),this.saveAudioLimitStorage(n.examObj,n.termExamResultId,s),n.viewQuestionObjs=s),n}addAudioInfoToQuestionObjs(n,t){return t.forEach(s=>{if(s.attachments.length<=0)return;s.audioLimitObjs=[];let o=(n.limitAudio??0)-(s.limitAudio??0);for(var a=0;a<o;a++)s.audioLimitObjs.push({index:a,status:!0})}),t}saveAudioLimitStorage(n,t,s){let o=s.filter(a=>a.attachments.length>0).map(a=>({questionId:a.id,limitTimes:a.limitAudio,limitPlay:a.limitPlay}));o.length>0&&this.browserStorageService.saveSimpleStorage("limitAudioV6_"+n.id+"_"+t,JSON.stringify(o))}getLimitAudioFromLocalStorage(n,t){return this.commonService.myParseJson(this.browserStorageService.getSimpleStorage("limitAudioV6_"+n.id+"_"+t)??"")??[]}constructor(n,t){this.commonService=n,this.browserStorageService=t}}class fk{getQuestionThatCanFeedbackFromApi(n,t){let s=n.viewQuestionObjs,o=this.commonService.uniqueArray(s.map(r=>r.id)??[]);this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsListPost({examId:n.examObj.id,questionIds:o}).subscribe(r=>r.success?(r.data?.objs?.forEach(l=>{let c=s.find(_=>_.id==l.questionId);c&&(c.enableFeedback=l.allowFeedback)}),t(void 0,s)):t(r.message,[])))}getDataSyncFromApi(n,t){this.waitDestroy(this.testLogExamResultAnswerService.listExamResultAnswers(n.termExamResultId??0).subscribe(s=>{if(!s.success)return t(void 0);let o={version:s.version??"",code:s.code??0,success:s.success??0,data:{content:s.data?.content??"",typeHash:0,keyHash:""},detailMessage:"",message:s.message??""},r=this.encryptionHelper.result(o)?.data??{answers:[],files:"",infors:"",updatedAt:s?.data?.updated_at??"",resultTrack:""};t(r)}))}setSyncDataFromApi(n,t,s){let o=this.sAztTestResultTrackService.getStudentAnswerFromLocalStorage(s.examObj,n.termExamResultId??0);return t&&t.updatedAt?(s.resultTracks=this.commonService.myParseJson(this.zipDataService.decodeContentGzip(t.resultTrack??""))??[],o?new Date(t.updatedAt).getTime()<o.saveTime?(s.answerList=o.answers??new Array,s.files=this.commonService.myParseJson(o.files)??[],s.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(s.viewQuestionObjs,s.answerList)):(s.answerList=t.answers??new Array,s.files=this.commonService.myParseJson(t.files)??[],s.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(s.viewQuestionObjs,s.answerList)):(s.answerList=t.answers??new Array,s.files=this.commonService.myParseJson(t.files??"")??[],s.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(s.viewQuestionObjs,s.answerList))):o&&(s.answerList=o.answers??[],s.files=this.commonService.myParseJson(o.files)??[],s.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(s.viewQuestionObjs,s.answerList)),s}saveAnswerAndTrackInfoToApi(n){var t=this.commonService.myClone(n.resultTracks);try{let s={answers:n.answerList,files:JSON.stringify(n.files),infors:new Dt(n?.examObj.hashId??"",this.browserStorageService).getInfo()??"",resultTrack:this.zipDataService.convertContentGzip(JSON.stringify(t)),updatedAt:""},o=this.encryptionHelper.payload(s);this.testLogExamResultAnswerService.answerExamResult(o,n.termExamResultId??0).subscribe(a=>{})}catch{}}getSyncQuestionDataFromApi(n,t,s,o,a){if(o.hasAlreadyGenerateQuestion)return a(o);this.getDataSyncFromApi(o,r=>{this.getQuestionThatCanFeedbackFromApi(o,(l,c)=>{this.sAztTestQuestionService.generateQuestionView(n,t,s,o.viewQuestionObjs,_=>{if(l||(o.viewQuestionObjs=c),r&&(o=this.setSyncDataFromApi(o,r,o)),!_)return a(o);o.viewQuestionObjs=_,o.hasAlreadyGenerateQuestion=!0,a(o)})})})}getHistoryAnswerOfTrainingFromApi(n,t){null!=n.trainingAnswerQuestions&&t(void 0,n.trainingAnswerQuestions),this.waitDestroy(this.frontExamService.apiFrontExamReloadExamResultGet(n.examObj.hashId??"").subscribe(s=>{if(!s.success)return t(s.message,[]);const a=this.encryptionHelper.result(s)?.data?.questions??[];return t(void 0,a)}))}updateEssayFilesToApi(n){return new Promise(t=>{let s={hashCode:n.uploadHashCode,files:JSON.stringify(n.files)};this.frontExamResultUploadService.apiFrontExamResultUploadUpdateImageToTmpPost(s).subscribe(o=>{o.success&&t(!0)})})}getImagesThatUploadAtMobileQrCodeFromApi(n,t){if(!n)return t(void 0);this.frontExamResultUploadService.apiFrontExamResultUploadGetTmpUploadObjGet(n).subscribe(s=>{if(!s.success)return t(void 0);let o=this.commonService.myParseJson(s.data?.tmpObj?.files??"")??[];return t(o)})}destroyAll(){this.subscriptions.unsubscribe()}waitDestroy(n){this.subscriptions.add(n)}constructor(n,t,s,o,a,r,l,c,_,d){this.commonService=n,this.zipDataService=t,this.browserStorageService=s,this.testMarketFeedbackService=o,this.encryptionHelper=a,this.testLogExamResultAnswerService=r,this.sAztTestQuestionService=l,this.sAztTestResultTrackService=c,this.frontExamResultUploadService=_,this.frontExamService=d,this.subscriptions=new t_.yU}}class gf{checkByWidth(){return window.innerWidth<1200}}class Tf{makeDeviceId(n=10){for(var t="",a=0;a<n;a++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}getDeviceId(){var n=this.browserStorageService.getSimpleStorage("device_session");return this.deviceId=n||this.makeDeviceId(20),this.browserStorageService.saveSimpleStorage("device_session",this.deviceId),this.deviceId}constructor(n){this.browserStorageService=n,this.deviceId=""}}class gk{init(n){if(null!=n.nextBackQuestionModel||n.viewQuestionObjs.length<=0)return n;let t=this.commonService.getFirstOfArray(n.viewQuestionObjs);if(null==t)return n;let s={curQuestionIndex:t.index??0,curQuestionObj:t,isLastQuestion:this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==t.id};return n.nextBackQuestionModel=s,n}nextTo(n,t){if(null==(n=this.init(n)).nextBackQuestionModel)return n;let s=t.index??0,o=this.commonService.getItemAtIndexOfArray(n.viewQuestionObjs,s+(s===n.viewQuestionObjs.length-1?0:1));return null==o||(n.nextBackQuestionModel.curQuestionIndex=o.index??0,n.nextBackQuestionModel.curQuestionObj=o,n.nextBackQuestionModel.isLastQuestion=this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==o.id),n}backTo(n,t){if(null==(n=this.init(n)).nextBackQuestionModel)return n;let o=this.commonService.getItemAtIndexOfArray(n.viewQuestionObjs,(t.index??0)-1);return null==o||(n.nextBackQuestionModel.curQuestionIndex=o.index??0,n.nextBackQuestionModel.curQuestionObj=o,n.nextBackQuestionModel.isLastQuestion=this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==o.id),n}goTo(n,t){if(null==(n=this.init(n)).nextBackQuestionModel)return n;let s=n.viewQuestionObjs.find(o=>o.id==t.id);return null==s||(n.nextBackQuestionModel.curQuestionIndex=s.index??0,n.nextBackQuestionModel.curQuestionObj=s,n.nextBackQuestionModel.isLastQuestion=this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==s.id),n}scrollTo(n){var t=document.getElementById("question_all_"+n.id);t&&window.scrollTo({top:t.offsetTop-90,behavior:"smooth"})}constructor(n){this.commonService=n}}var Tk=A(54563);class bk{takeAnswerForQuestion(n,t){return t.forEach(s=>{n.forEach(o=>{if(o.questionId==s.id)if(this.answerTypeService.isFillAnswer(s)||this.answerTypeService.isEssayAnswer(s))s.choseAnswer=[o.answerContent[0].content];else if((this.answerTypeService.isOneChoiceAnswer(s)||this.answerTypeService.isMultipleChoiceAnswer(s))&&s.answers)s.choseAnswer=[(s.answers[a=o.answerContent[0].index].alpha?s.answers[a].alpha:s.answers[a].key)??""];else if(this.answerTypeService.isTrueFalseAnswer(s)){var a=o.answerContent[0].index;let l=this.commonService.myTranslateInstant("T"==o.answerContent[0].status?"lang_auto_dung":"lang_auto_sai");s.choseAnswer?.push((s.answers[a].alpha?s.answers[a].alpha:s.answers[a].key)?.toLowerCase()+") - "+(l??""))}})}),t}checkFinishedAnswering(n){n.finishedAnswering=this.answerTypeService.isTrueFalseAnswer(n)?0===n.answers.filter(t=>void 0===t.checked).length:n.status}reBindDataQuestion(n,t){var s=[];return n.forEach(o=>{t.forEach(a=>{if(a.questionId==o.id){if(this.answerTypeService.isEssayAnswer(o))(r=a.answerContent&&a.answerContent.length>0?a.answerContent[0].content:"")&&(o.essayText=r);else if(this.answerTypeService.isFillAnswer(o)){var r;(r=a.answerContent&&a.answerContent.length>0?a.answerContent[0].content:"")&&(o.essayText=r)}else for(var l of o.answers)if(this.answerTypeService.isTrueFalseAnswer(o))l.checked=this.compareTrueFalseQuestionContent(l,a.answerContent);else{if(this.compareContent(l,a.answerContent&&a.answerContent.length>0?a.answerContent[0]:{index:0,content:""})){l.checked=!0;break}l.checked=!1}o.status=!0}}),this.checkFinishedAnswering(o),s.push(o)}),s}getEssayQuestionIds(n){return n.filter(t=>this.answerTypeService.isEssayAnswer(t)).map(t=>t.id)}changeQuestionContent(n,t,s){var o=[],a=new n_(this.commonService,this.browserStorageService).getLimitAudioFromLocalStorage(n,t);return s.forEach((r,l)=>{if(r.essayText=this.answerTypeService.isEssayAnswer(r)?"":r.essayText,r.essayText=this.answerTypeService.isFillAnswer(r)?"":r.essayText,n.limitAudio)if(a.length>0){var c=a.find(_=>_.questionId==r.id);c&&null!=c.limitTimes&&null!=c.limitPlay&&(r.limitAudio=c.limitTimes+c.limitPlay,r.limitPlay=0)}else r.attachments.length>0&&(r.limitAudio=0,r.limitPlay=0);r={...r,index:l,status:!1},o.push(r)}),n.limitAudio?new n_(this.commonService,this.browserStorageService).addAudioInfoToQuestionObjs(n,o):o}setShowHint(n,t){let s=n.viewQuestionObjs.find(o=>o.id==t);return s&&(s.isShowHint=!0),n}setQuestionTrueFalseAnswer(n,t){let s=n.examObj,o=n.viewQuestionObjs,a=n.answerList,r=a.find(_=>_.questionId==t.questionId),l={index:t.answerIndex,content:t.answerConfig.key,status:t.answerConfig.status},c={questionId:t.questionId,answerContent:[l]};if(r){let _=r.answerContent.find(d=>d.index==l.index&&d.content==l.content);_?_.status=l.status:r.answerContent.push(l)}else a.push(c);return o=this.changeStatusOfTrueFalseAnswer(s,o,t),o=this.changeStatusOfQuestion(o,t.questionId,!0),n.viewQuestionObjs=o,n.answerList=a,n}setQuestionOneChoiceAnswer(n,t){let s=n.examObj,o=n.viewQuestionObjs,a=n.answerList,r=a.find(c=>c.questionId==t.questionId);var l={questionId:t.questionId,answerContent:[{index:t.answerIndex,content:t.answerConfig.key}]};return r?r.answerContent=l.answerContent:a.push(l),o=this.changeStatusOfOneChoiceAnswer(s,o,t),o=this.changeStatusOfQuestion(o,t.questionId,!0),n.viewQuestionObjs=o,n.answerList=a,n}setQuestionFillAnswer(n,t){return this.setQuestionEssayAnswer(n,{questionId:t.questionId,value:t.value})}setQuestionEssayAnswer(n,t){let s=n.answerList.find(r=>r.questionId==t.questionId),o=""==t.value.trim(),a={questionId:t.questionId,answerContent:[{index:0,content:t.value}]};return n.viewQuestionObjs=this.changeEssayTextQuestion(n.viewQuestionObjs,t.questionId,t.value),n.viewQuestionObjs=this.changeStatusOfQuestion(n.viewQuestionObjs,t.questionId,!o),s?o?(n.answerList=n.answerList.filter(r=>r.questionId!=t.questionId),n):(s.answerContent=a.answerContent,n):(n.answerList.push(a),n)}changeEssayTextQuestion(n,t,s){let o=n.find(a=>a.id==t);return o&&(o.essayText=s),n}changeStatusOfQuestion(n,t,s){let o=n.find(a=>a.id==t);return o&&(o.status=s,this.checkFinishedAnswering(o)),n}changeStatusOfOneChoiceAnswer(n,t,s){let o=t.find(l=>l.id==s.questionId);if(!o||!o.answers.length||(o.answers.map((l,c)=>l.checked=c==s.answerIndex),!this.commonService.isMobileOrTable()))return t;let a=this.commonService.myTranslateInstant("lang_auto_cau"),r=this.commonService.myTranslateInstant("lang_auto_chon");return this.commonService.snackChoiceAnswer(a+" "+((o.index??0)+(n.startQuestionIndex??1))+" - "+r+" "+(s.answerConfig.alpha?s.answerConfig.alpha:s.answerConfig.key)),t}changeStatusOfTrueFalseAnswer(n,t,s){let o=t.find(d=>d.id==s.questionId);if(!o||!o.answers.length)return t;let a="T"==s.answerConfig?.status;if(o.answers[s.answerIndex].checked=o.answers[s.answerIndex].checked!=a?a:void 0,!this.commonService.isMobileOrTable())return t;let r=this.commonService.myTranslateInstant("lang_auto_cau"),l=this.commonService.myTranslateInstant("lang_auto_chon"),c=this.commonService.myTranslateInstant("lang_auto_dung"),_=this.commonService.myTranslateInstant("lang_auto_sai");return this.commonService.snackChoiceAnswer(r+" "+((o.index??0)+(n.startQuestionIndex??1))+" - "+l+" "+(s.answerConfig.alpha?s.answerConfig.alpha:s.answerConfig.key).toLocaleLowerCase()+")"+(s.answerConfig.status?" - "+("T"==s.answerConfig.status?c:_):"")),t}getAnswerOfQuestion(n,t){return n.answerList.find(s=>s.questionId==t)}checkQuestionHasAnswer(n,t){let s=n.answerList.find(o=>o.questionId==t);return!!s&&s.answerContent.length>0}resetQuestionIndex(n,t){if(!t)return n;let s=0,o=0;return n.forEach((a,r)=>{a.groupInfo?.groupId&&(s!=a.groupInfo.groupId&&(o=0),a.labelIndex=o,o++,s=a.groupInfo.groupId)}),n}convertViewQuestionToQuestionInGroup(n){n.viewQuestionInGroupList=[],n.viewQuestionObjs.forEach((t,s)=>{const o=t?.groupInfo?.groupId??0;t.startQuestionIndexWidthViewGroup=s,n.viewQuestionInGroupList[o]||(n.viewQuestionInGroupList[o]={groupInfo:t?.groupInfo,groupId:o,isExistEssay:!1,isShowGroupMobile:!0,totalQuestion:0,totalCompletedQuestion:0,startLabel:0,endLabel:0,questionList:[]}),n.viewQuestionInGroupList[o].questionList.push(t)}),n.viewQuestionInGroupList=n.viewQuestionInGroupList.filter(t=>t&&t.questionList.length).map(t=>(t.totalQuestion=t.questionList.length,t.totalCompletedQuestion=t.questionList.filter(s=>s.status).length,t.startLabel=(t.questionList[0].startQuestionIndexWidthViewGroup??0)+1,t.endLabel=(t.questionList[t.totalQuestion-1].startQuestionIndexWidthViewGroup??0)+1,t.isExistEssay=t.questionList.filter(s=>this.answerTypeService.isEssayAnswer(s)).length>0,t))}generateQuestionView(n,t,s,o,a){n.startLoad=!0,t.setNumQuest(o.length),s.parseRenderQuestions(o,r=>{n.loadPercent=Math.floor(r)}).then(r=>{n.startLoad=!1,n.hasErrs=!1,a(r)}).catch(r=>{n.startLoad=!1,n.hasErrs=!0,n.errData=r,a(void 0)})}calculateNewCountDown(n){return n.isAutoSubmit=!n.isUnLimitedTime&&n.countDownSecond<=0&&n.countDownSecond>=-90,n.isActualEndTime=!n.isUnLimitedTime&&n.countDownSecond>=-300,n.autoSubmitAfterSeconds=n.isAutoSubmit?n.countDownSecond+90:void 0,n.allowUploadEssayFileWhenEndTime=n.isAutoSubmit&&n.countDownSecond>=-200,n}clearAllData(n){new Dt(n.examObj.hashId??"",this.browserStorageService).removeInfo(),this.browserStorageService.removeSimpleStorage("saveResultTrack_"+n.examObj.hashId+"_"+n.termExamResultId),this.browserStorageService.removeSimpleStorage("saveScrollTrack_"+n.examObj.hashId+"_"+n.termExamResultId),this.browserStorageService.removeSimpleStorage("saveDataV4_"+n.examObj.id+"_"+n.termExamResultId),this.browserStorageService.removeSimpleStorage("limitAudioV6_"+n.examObj.id+"_"+n.termExamResultId),this.localStorageObject.clearAllCache(),this.sAztFullScreenService.exitFullscreen(),this.sAztShowMonitorService.destroyMonitorAtStudentDashboard()}compareContent(n,t){return n.key==t.content}compareTrueFalseQuestionContent(n,t){let s=t.find(o=>o.content==n.key);if(s)return"T"==s.status}constructor(n,t,s,o,a){this.commonService=n,this.answerTypeService=t,this.browserStorageService=s,this.localStorageObject=o,this.sAztShowMonitorService=a,this.sAztFullScreenService=new Ns,this.sAztCoreModCdnService=(0,e.WQX)(Tk.O),this.isCheckingAnswer=!1,this.isShowAnswerStatusBox=!1,this.isShowSuccessAnimationBox=!1,this.trainingAudioSuccess=new Audio(this.sAztCoreModCdnService.convertCdnLinkOfGitHub("audio/correct.mp3")),this.hasWrongAnswer=!1}}class xk{constructor(){this.fontSize=1}changeSizeImgOrMathJax(n){let t=document.getElementsByClassName("img-docx"),s=document.getElementsByClassName("MJX-TEX");t.length&&Array.from(t).forEach(o=>{if(o instanceof HTMLElement){let a=o.offsetWidth;o.style.width=n?a+10+"px":a-10+"px",o.style.height="auto"}}),s.length&&Array.from(s).forEach(o=>{o instanceof HTMLElement&&(o.style.fontSize=this.fontSize+"em")})}zoomIn(){this.fontSize<2&&(this.fontSize+=.1,this.changeSizeImgOrMathJax(!0))}zoomOut(){this.fontSize>1&&(this.fontSize-=.1,this.changeSizeImgOrMathJax(!1))}}class vk{saveAnswerAndTrackInfoToLocalStorage(n){if(!n.termExamResultId||!n.testingUserObj)return;let t=n.examObj,s=n.termExamResultId,o=n.answerList,a=n.files,c={autoSubmit:void 0,serverCountDown:n.countDownSecond,examMinutes:t.minutes,saveStudentId:n.testingUserObj.id,saveDeviceId:this.sAztTestDeviceIdService.getDeviceId(),deviceType:this.commonService.deviceType()},_={answers:o,notes:[],files:JSON.stringify(a),infors:new Dt(t.hashId??"",this.browserStorageService).getInfo()??"",trackInfos:JSON.stringify(c),saveTime:(new Date).getTime()};this.saveStudentAnswerToLocalStorage(t,s,_)}saveStudentAnswerToLocalStorage(n,t,s){this.browserStorageService.saveSimpleStorageWithRemoveOverCapacity(this.SAVE_STUDENT_ANSWER_LOCAL_STORAGE_KEY+n.id+"_"+t,JSON.stringify(this.encryptionHelper.payload(s)),[n.id.toString(),n.hashId??""])}getStudentAnswerFromLocalStorage(n,t){var s=this.commonService.myParseJson(this.browserStorageService.getSimpleStorage("saveDataV4_"+n.id+"_"+t)??"");return this.encryptionHelper.result({success:1,version:"",code:1,detailMessage:"",message:"",data:s})?.data}removeStudentAnswerInLocalStorage(n,t){this.browserStorageService.removeSimpleStorage(this.SAVE_STUDENT_ANSWER_LOCAL_STORAGE_KEY+n.id+"_"+t)}getResultTrackFromLocalStorage(n,t){let s=this.browserStorageService.getSimpleStorage(this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY+(n.hashId??"")+"_"+t);return this.commonService.myParseJson(s??"")??[]}setResultTracking(n,t){if(!n.termExamResultId)return n;let s=n.termExamResultId,o=n.examObj,a=n.resultTracks;return a.push([...t,this.timeService.getCurrentSecond().toString()]),this.browserStorageService.saveSimpleStorageWithRemoveOverCapacity(this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY+(o.hashId??"")+"_"+s,JSON.stringify(a),[o.id.toString(),o.hashId??""]),n.resultTracks=a,n}removeResultTracking(n,t){this.browserStorageService.removeSimpleStorage(this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY+n.hashId+"_"+t)}constructor(n,t,s,o){this.commonService=n,this.encryptionHelper=t,this.timeService=s,this.browserStorageService=o,this.sAztTestDeviceIdService=new Tf(this.browserStorageService),this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY="saveResultTrack_",this.SAVE_STUDENT_ANSWER_LOCAL_STORAGE_KEY="saveDataV4_"}}const bf=()=>({"mr-2 text-success":!0});function yk(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.E5c(" ",e.bMT(2,3,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi"),"\xa0",e.bMT(3,5,"lang_auto_va")," ",e.bMT(4,7,"lang_testbank_submit_test_multiplechoice_question_left_1").toLowerCase()+t.data.totalTrueFalseLeftBlank+e.bMT(5,9,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function Sk(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi")+". "," "))}function wk(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_submit_test_multiplechoice_question_left_1")+t.data.totalTrueFalseLeftBlank+e.bMT(3,3,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function Ik(i,n){if(1&i&&(e.j41(0,"div",15)(1,"span",17)(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,yk,6,11,"span",19)(6,Sk,3,3,"span",19)(7,wk,4,5,"span",19),e.j41(8,"span"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,5,"lang_auto_canh_bao")+": "," "),e.R7$(2),e.Y8G("ngIf",t.data.notHasFiles&&t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.notHasFiles&&!t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.totalTrueFalseLeftBlank&&!t.data.notHasFiles),e.R7$(2),e.SpI(" ",e.bMT(10,7,"lang_auto_ban_co_chac_muon_ket_thuc_bai_thi")," ")}}function Ck(i,n){if(1&i&&(e.qex(0),e.j41(1,"h3",9),e.nrm(2,"lucide-icon",10),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",11)(6,"span",12),e.EFF(7),e.nI1(8,"mytranslate"),e.nrm(9,"app-testbank-frontend-count-down-box",13),e.k0s()(),e.DNE(10,Ik,11,9,"div",14),e.j41(11,"div",15)(12,"p",16),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.bVm()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngClass",e.lJ4(13,bf)),e.R7$(),e.SpI(" ",e.bMT(4,7,"lang_powerpoint_frontend_detail_dialog")+" ?"," "),e.R7$(4),e.SpI(" ",e.bMT(8,9,"lang_auto_thoi_gian_lam_bai_cua_ban_con"),": "),e.R7$(2),e.Y8G("totalSecond",t.data.countDownSecond)("useCountDown",!0),e.R7$(),e.Y8G("ngIf",t.data.notHasFiles||t.data.totalTrueFalseLeftBlank),e.R7$(3),e.SpI(" ",e.bMT(14,11,"lang_auto_khi_xac_nhan_nop_bai_ban_se_khong_the_sua_lai_bai_thi_cua_minh_hay_dot")," ")}}function kk(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.E5c(" ",e.bMT(2,3,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi"),"\xa0",e.bMT(3,5,"lang_auto_va")," ",e.bMT(4,7,"lang_testbank_submit_test_multiplechoice_question_left_1").toLowerCase()+t.data.totalTrueFalseLeftBlank+e.bMT(5,9,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function Ek(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi")+". "," "))}function Ak(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_submit_test_multiplechoice_question_left_1")+t.data.totalTrueFalseLeftBlank+e.bMT(3,3,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function Ok(i,n){if(1&i&&(e.j41(0,"div",15)(1,"span",17)(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,kk,6,11,"span",19)(6,Ek,3,3,"span",19)(7,Ak,4,5,"span",19),e.j41(8,"span"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,5,"lang_auto_canh_bao")+": "," "),e.R7$(2),e.Y8G("ngIf",t.data.notHasFiles&&t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.notHasFiles&&!t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.totalTrueFalseLeftBlank&&!t.data.notHasFiles),e.R7$(2),e.SpI(" ",e.bMT(10,7,"lang_auto_ban_co_chac_muon_ket_thuc_bai_thi")," ")}}function Rk(i,n){if(1&i&&(e.j41(0,"h3",9),e.nrm(1,"lucide-icon",10),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Ok,11,9,"div",14),e.j41(5,"div",15)(6,"p",16),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(8,bf)),e.R7$(),e.SpI(" ",e.bMT(3,4,"lang_powerpoint_frontend_detail_dialog")+" ?"," "),e.R7$(2),e.Y8G("ngIf",t.data.notHasFiles||t.data.totalTrueFalseLeftBlank),e.R7$(3),e.SpI(" ",e.bMT(8,6,"lang_auto_khi_xac_nhan_nop_bai_ban_se_khong_the_sua_lai_bai_thi_cua_minh_hay_dot")," ")}}function Fk(i,n){1&i&&(e.j41(0,"span",20),e.nrm(1,"azt-loading-ui"),e.k0s())}let jk=(()=>{var i;class n extends Mt._{enableSubmitBtn(){this.data.notHasFiles?setTimeout(()=>{this.countTimeEnable>0&&(this.countTimeEnable--,this.enableSubmitBtn())},1e3):this.countTimeEnable=0}btnCloseDialog(){this.dialogRef.close(!1)}confirmFinish(){this.dialogRef.close(!0)}ngOnInit(){super.ngOnInit(),this.enableSubmitBtn()}constructor(s,o,a,r){super(r,a),this.commonService=s,this.globalService=o,this.dialogRef=a,this.countTimeEnable=5}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Le.R),e.rXU(df.r),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-confirm-exam-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:11,consts:[["unlimitedTpl",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","justify-end"],["azt-track-service","comfirm-exam-GwLo2uv__",1,"btn","btn-secondary","w-40","mr-2",2,"vertical-align","middle",3,"click"],["azt-track-service","comfirm-exam-x-4M3WDlkE",1,"btn","w-40","btn-primary",2,"vertical-align","middle",3,"click","disabled"],["class","w-4 inline-block mr-2",4,"ngIf"],[1,"text-md","font-medium","flex","items-center"],["name","file-check-2","size","24",3,"ngClass"],[1,"mt-5","flex","items-center"],[1,"text-md"],[3,"totalSecond","useCountDown"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"text-danger"],[1,"font-medium"],[4,"ngIf"],[1,"w-4","inline-block","mr-2"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.DNE(3,Ck,15,14,"ng-container",4)(4,Rk,9,9,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"button",7),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmFinish())}),e.DNE(11,Fk,2,0,"span",8),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()}if(2&s){const a=e.sdS(5);e.R7$(3),e.Y8G("ngIf",!o.data.isUnLimitedTime)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(9,7,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",o.countTimeEnable>0),e.R7$(),e.Y8G("ngIf",o.countTimeEnable>0),e.R7$(),e.Lme(" ",e.bMT(13,9,"lang_auto_nop_bai")," ",o.countTimeEnable>0?"("+o.countTimeEnable+")":""," ")}},dependencies:[Cn,wt.R,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const zk=()=>({"mr-2 text-pending":!0});let Mk=(()=>{var i;class n extends Mt._{closeDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(s,o,a){super(a,o),this.commonService=s,this.dialogRef=o}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Le.R),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-essay-warning-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:17,vars:14,consts:[[1,"bg-white"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","badge-info","size","24",3,"ngClass"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","flex","items-center"],[1,"flex","items-center","mr-auto"],["azt-track-service","check-essay-_8FjX2B80z",1,"btn","w-24","btn-primary",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5)(8,"p",6),e.EFF(9),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()()()(),e.j41(12,"div",7),e.nrm(13,"div",8),e.j41(14,"button",9),e.bIt("click",function(){return o.closeDialog()}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(13,zk)),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_day_la_bai_thi_hon_hop_co_tu_luan_de_tra_loi_cau_hoi_tu_luan")," "),e.R7$(4),e.Lme("",e.bMT(10,7,"lang_auto_ban_co_the_lam_truc_tiep_tren_he_thong_hoac_lam_ra_giay_chup_anh_roi_gui_qua"),' "',e.bMT(11,9,"lang_auto_dinh_kem_tu_luan"),'"'),e.R7$(6),e.SpI(" ",e.bMT(16,11,"lang_auto_toi_da_hieu")," "))},dependencies:[v.MD,v.YU,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const Dk=()=>({"mr-2 text-danger":!0});function Gk(i,n){if(1&i&&(e.j41(0,"div",9)(1,"span",10),e.EFF(2),e.nI1(3,"mytranslate"),e.nrm(4,"app-testbank-frontend-count-down-box",11),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_thoi_gian_lam_bai_cua_ban_con"),": "),e.R7$(2),e.Y8G("totalSecond",t.data.countDownSecond)("useCountDown",!0)}}let Pk=(()=>{var i;class n extends Mt._{confirmQuit(){this.dialogRef.close(!0)}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}constructor(s,o,a){super(a,o),this.commonService=s,this.dialogRef=o}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Le.R),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-exit-exam"]],standalone:!0,features:[e.Vt3,e.aNF],decls:15,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","triangle-alert","size","24",3,"ngClass"],["class","mt-5 flex items-center",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","exit-exam-kt6CrvSrn7",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","exit-exam-HDzj9p0Z53",1,"btn","w-24","btn-primary",3,"click"],[1,"mt-5","flex","items-center"],[1,"text-md"],[3,"totalSecond","useCountDown"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,Gk,5,5,"div",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"button",8),e.bIt("click",function(){return o.confirmQuit()}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(11,Dk)),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_testbank_frontend_are_your_sure_go_back")+" ?"," "),e.R7$(2),e.Y8G("ngIf",!o.data.isUnLimitedTime),e.R7$(3),e.SpI(" ",e.bMT(11,7,"lang_auto_dong")," "),e.R7$(3),e.SpI(" ",e.bMT(14,9,"lang_auto_xac_nhan")," "))},dependencies:[Cn,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();var Nk=A(31659);const Vk=()=>({"mr-2 text-pending":!0});let Lk=(()=>{var i;class n extends Mt._{confirmQuit(){this.dialogRef.close(!0)}ngOnInit(){super.ngOnInit()}constructor(s,o,a){super(a,o),this.commonService=s,this.dialogRef=o}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Le.R),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-monitor-screen"]],standalone:!0,features:[e.Vt3,e.aNF],decls:16,vars:20,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","octagon-alert","size","24",3,"ngClass"],[1,"mb-0","h5"],[1,"p-3","text-right","items-center"],["azt-track-service","monitoring-dialog-dvRk43CCy8",1,"btn","w-24","btn-primary",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.j41(5,"p",5),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()()()(),e.j41(12,"div",6)(13,"button",7),e.bIt("click",function(){return o.confirmQuit()}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(19,Vk)),e.R7$(2),e.SjE(" ",e.bMT(7,7,"lang_auto_day_la_bai_thi_duoc"),' "',e.bMT(8,9,"lang_auto_giam_sat"),'"',e.bMT(9,11,"lang_auto__vui_long_bam"),' "',e.bMT(10,13,"lang_auto_xac_nhan"),'" ',e.bMT(11,15,"lang_auto_de_tiep_tuc_bai_thi")," "),e.R7$(8),e.SpI(" ",e.bMT(15,17,"lang_auto_xac_nhan")," "))},dependencies:[v.MD,v.YU,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const Bk=()=>({"mr-2 text-pending":!0}),Pi=i=>({"mt-3":i});function $k(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",20),e.k0s(),e.j41(6,"div",21)(7,"i"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()),2&i){const t=e.XpG(),s=t.$implicit;e.Y8G("ngClass",e.eq3(8,Pi,0!==t.index)),e.R7$(3),e.SpI(" ",e.bMT(4,4,"lang_testbank_frontend_please_enter_full_name")," "),e.R7$(2),e.Y8G("formControl",s.anonymousFullNameFormControl),e.R7$(3),e.JRh(e.bMT(9,6,"lang_testbank_frontend_anonymous_account_need_enter_full_name"))}}function Qk(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",20),e.k0s(),e.j41(6,"div",22)(7,"i"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()),2&i){const t=e.XpG(),s=t.$implicit;e.Y8G("ngClass",e.eq3(8,Pi,0!==t.index)),e.R7$(3),e.SpI(" ",e.bMT(4,4,"lang_auto_mat_khau_bai_thi")," "),e.R7$(2),e.Y8G("formControl",s.passwordFormControl),e.R7$(3),e.JRh(e.bMT(9,6,"lang_auto_neu_ban_chua_co_mat_khau_cua_bai_thi_vui_long_lien_he_giao_vien_cua_ban"))}}function qk(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3),e.k0s(),e.nrm(4,"input",20),e.k0s()()),2&i){const t=e.XpG(),s=t.$implicit;e.Y8G("ngClass",e.eq3(3,Pi,0!==t.index)),e.R7$(3),e.SpI(" ",s.textInputInfoField.title," "),e.R7$(),e.Y8G("formControl",s.textInputInfoField.textInputFormControl)}}function Yk(i,n){if(1&i&&(e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.nrm(3,"input",31),e.k0s(),e.j41(4,"label",32,0),e.EFF(6),e.k0s()()()),2&i){const t=n.$implicit,s=n.index,o=e.sdS(5),a=e.XpG(2).index;e.R7$(3),e.Y8G("id","checkboxData_"+a+"_"+s)("formControl",t.checkboxFormControl),e.R7$(),e.FS9("matTooltip",t.optionName),e.Y8G("for","checkboxData_"+a+"_"+s)("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.SpI(" ",t.optionName," ")}}function Uk(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",23)(2,"div",24)(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"div",26),e.DNE(6,Yk,7,7,"div",27),e.k0s()()()),2&i){const t=e.XpG(),s=t.$implicit;e.Y8G("ngClass",e.eq3(3,Pi,0!==t.index)),e.R7$(4),e.JRh(s.checkboxInfoField.title),e.R7$(2),e.Y8G("ngForOf",s.checkboxInfoField.data)}}function Xk(i,n){if(1&i&&(e.j41(0,"div",34)(1,"div",29)(2,"div",30),e.nrm(3,"input",35),e.k0s(),e.j41(4,"label",32,0),e.EFF(6),e.k0s()()()),2&i){const t=n.$implicit,s=n.index,o=e.sdS(5),a=e.XpG(2),r=a.$implicit,l=a.index;e.R7$(3),e.Y8G("id","radioInfoField_"+l+"_"+s)("name",r.radioInfoField.title+"_"+r.radioInfoField.rawIndex)("formControl",r.radioInfoField.radioFormControl)("value",t.optionName),e.R7$(),e.FS9("matTooltip",t.optionName),e.Y8G("for","radioInfoField_"+l+"_"+s)("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.SpI(" ",t.optionName," ")}}function Wk(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",23)(2,"div",24)(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"div",26),e.DNE(6,Xk,7,9,"div",33),e.k0s()()()),2&i){const t=e.XpG(),s=t.$implicit;e.Y8G("ngClass",e.eq3(3,Pi,0!==t.index)),e.R7$(4),e.JRh(s.radioInfoField.title),e.R7$(2),e.Y8G("ngForOf",s.radioInfoField.data)}}function Hk(i,n){if(1&i&&(e.j41(0,"mat-option",42),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.FS9("value",t.optionName),e.R7$(),e.JRh(t.optionName)}}function Jk(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",36)(2,"span",37),e.EFF(3),e.k0s(),e.j41(4,"div",38)(5,"mat-form-field",39)(6,"mat-select",40),e.DNE(7,Hk,2,2,"mat-option",41),e.k0s()()()()()),2&i){const t=e.XpG(),s=t.$implicit;e.Y8G("ngClass",e.eq3(4,Pi,0!==t.index)),e.R7$(3),e.JRh(s.dropDownMenuInfoField.title),e.R7$(3),e.Y8G("formControl",s.dropDownMenuInfoField.dropDownFormControl),e.R7$(),e.Y8G("ngForOf",s.dropDownMenuInfoField.data)}}function Kk(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",15),e.DNE(2,$k,10,10,"div",16)(3,Qk,10,10,"div",16)(4,qk,5,5,"div",16)(5,Uk,7,5,"div",16)(6,Wk,7,5,"div",16)(7,Jk,8,6,"div",16),e.k0s(),e.bVm()),2&i){const t=n.$implicit;e.R7$(2),e.Y8G("ngIf",t.anonymousFullNameFormControl),e.R7$(),e.Y8G("ngIf",t.passwordFormControl),e.R7$(),e.Y8G("ngIf",t.textInputInfoField),e.R7$(),e.Y8G("ngIf",t.checkboxInfoField),e.R7$(),e.Y8G("ngIf",t.radioInfoField),e.R7$(),e.Y8G("ngIf",t.dropDownMenuInfoField)}}function Zk(i,n){1&i&&(e.j41(0,"span",43),e.nrm(1,"azt-loading-ui"),e.k0s())}let eE=(()=>{var i;class n extends Mt._{handleConfirm(){this.initStatusObj();let o,s=[];this.infoObjs.forEach(a=>{let r={contents:[]};a.checkboxInfoField&&(r.index=a.checkboxInfoField.rawIndex,r.type=a.checkboxInfoField.type,r.title=a.checkboxInfoField.title,r.isFullName=a.checkboxInfoField.isFullName,a.checkboxInfoField.data.forEach(l=>{l.checkboxFormControl.value&&r.contents.push(l.optionName)}),s.push(r)),a.radioInfoField&&(r.index=a.radioInfoField.rawIndex,r.type=a.radioInfoField.type,r.title=a.radioInfoField.title,r.isFullName=a.radioInfoField.isFullName,r.contents.push(a.radioInfoField.radioFormControl.value),s.push(r)),a.dropDownMenuInfoField&&(r.index=a.dropDownMenuInfoField.rawIndex,r.type=a.dropDownMenuInfoField.type,r.title=a.dropDownMenuInfoField.title,r.isFullName=a.dropDownMenuInfoField.isFullName,r.contents.push(a.dropDownMenuInfoField.dropDownFormControl.value),s.push(r)),a.textInputInfoField&&(r.index=a.textInputInfoField.rawIndex,r.type=a.textInputInfoField.type,r.title=a.textInputInfoField.title,r.isFullName=a.textInputInfoField.isFullName,r.contents.push(a.textInputInfoField.textInputFormControl.value),s.push(r))}),this.data.obj.enterAnonymousFullNameRequired&&(o=this.form.controls.anonymousFullNameFormControl?.value,this.hasFullNameFieldInConfigData&&(o=this.commonService.getFirstOfArray(s.find(a=>a.isFullName)?.contents??[]))),this.updateAnonymousFullName(o,a=>{a&&this.showErrorSnack(a),this.data.obj.passwordRequired&&new Dt(this.data.obj.examObj.hashId??"",this.browserStorageService).savePassword(this.form.controls.passwordFormControl?.value),this.data.obj.enterInfoRequired&&new Dt(this.data.obj.examObj.hashId??"",this.browserStorageService).saveInfo(JSON.stringify(s)),this.dialogRef.close(!0)})}updateAnonymousFullName(s,o){if(null==s)return o(void 0);this.waitDestroy(this.userInfoService.apiUserInfoChangeNamePost({id:0,name:s}).subscribe(a=>o(a.success?void 0:a.message)))}initFieldForm(){this.data.obj.enterAnonymousFullNameRequired&&!this.hasFullNameFieldInConfigData&&this.form.controls.anonymousFullNameFormControl&&(this.form.controls.anonymousFullNameFormControl.setValue(""),this.infoObjs.push({anonymousFullNameFormControl:this.form.controls.anonymousFullNameFormControl})),this.data.obj.passwordRequired&&this.form.controls.passwordFormControl&&(this.form.controls.passwordFormControl.setValue(""),this.infoObjs.push({passwordFormControl:this.form.controls.passwordFormControl})),new Dt(this.data.obj.examObj.hashId??"",this.browserStorageService).hasInfo()||this.data.obj.infoFields.forEach((s,o)=>{switch(s.type){case 1:let a={checkboxInfoField:{rawIndex:o,type:s.type,title:s.title??"",isFullName:s.isFullName??!1,data:[],checkboxFormArray:new g.Yp([],tE(1))}};s.contents.forEach((d,p)=>{a.checkboxInfoField?.data.push({index:p,optionName:d,checkboxFormControl:new g.MJ(!1,{nonNullable:!0})})}),a.checkboxInfoField?.data.forEach(d=>a.checkboxInfoField?.checkboxFormArray.push(d.checkboxFormControl)),this.infoObjs.push(a);break;case 2:let r=this.commonService.getFirstOfArray(s.contents),l={radioInfoField:{rawIndex:o,type:s.type,title:s.title??"",isFullName:s.isFullName??!1,data:[],radioFormControl:new g.MJ(r??"",{nonNullable:!0,validators:[Ds.M.noWhiteSpace]})}};s.contents.forEach((d,p)=>{l.radioInfoField?.data.push({index:p,optionName:d})}),this.infoObjs.push(l);break;case 3:let c={dropDownMenuInfoField:{rawIndex:o,type:s.type,title:s.title??"",isFullName:s.isFullName??!1,data:[],dropDownFormControl:new g.MJ("",{nonNullable:!0,validators:[Ds.M.noWhiteSpace]})}};s.contents.forEach((d,p)=>{c.dropDownMenuInfoField?.data.push({index:p,optionName:d})}),this.infoObjs.push(c);break;default:let _={textInputInfoField:{rawIndex:o,type:s.type??0,title:s.title??"",isFullName:s.isFullName??!1,textInputFormControl:new g.MJ("",{nonNullable:!0,validators:[Ds.M.noWhiteSpace]})}};this.infoObjs.push(_)}}),this.infoObjs.forEach(s=>{s.anonymousFullNameFormControl&&(this.form.controls.anonymousFullNameFormControl=s.anonymousFullNameFormControl),s.passwordFormControl&&(this.form.controls.passwordFormControl=s.passwordFormControl),s.checkboxInfoField&&this.form.controls.checkboxInfoField?.push(s.checkboxInfoField.checkboxFormArray),s.radioInfoField&&this.form.controls.radioInfoField?.push(s.radioInfoField.radioFormControl),s.dropDownMenuInfoField&&this.form.controls.dropDownMenuInfoField?.push(s.dropDownMenuInfoField.dropDownFormControl),s.textInputInfoField&&this.form.controls.textInputInfoField?.push(s.textInputInfoField.textInputFormControl)})}goBack(){let s=this.commonService.getMyQueryParam("backto")??"";this.commonService.myNavigationWithQueryString("/de-thi/"+this.data.obj.examObj.hashId,"?backto="+encodeURIComponent(s))}ngOnInit(){super.ngOnInit(),this.hasFullNameFieldInConfigData=null!=this.data.obj.infoFields.find(s=>s.isFullName),this.initFieldForm()}constructor(s,o,a,r){super(r,a),this.userInfoService=s,this.browserStorageService=o,this.dialogRef=a,this.form=new g.gE({passwordFormControl:new g.MJ("empty",{nonNullable:!0,validators:[Ds.M.noWhiteSpace]}),anonymousFullNameFormControl:new g.MJ("empty",{nonNullable:!0,validators:[Ds.M.noWhiteSpace]}),checkboxInfoField:new g.Yp([]),radioInfoField:new g.Yp([]),dropDownMenuInfoField:new g.Yp([]),textInputInfoField:new g.Yp([])}),this.infoObjs=[],this.hasFullNameFieldInConfigData=!1}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(dl.fv),e.rXU(zi.z),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-submit-info"]],standalone:!0,features:[e.Vt3,e.aNF],decls:22,vars:19,consts:[["c","isDisabled"],["id","test-info-form","autocomplete","off",3,"formGroup"],[1,"box"],[1,"border-b","border-slate-200","dark:border-darkmode-400"],[1,"p-3","mb-0","border-b","border-slate-200","dark:border-darkmode-400"],[1,"intro-x","font-bold","flex","items-center"],["name","octagon-alert","size","24",3,"ngClass"],[1,"intro-x","text-xs","text-slate-600","mt-1"],[1,"mt-3","pb-3"],[3,"defaultHeight"],[4,"ngFor","ngForOf"],[1,"text-right","p-3"],["type","button",1,"btn","w-32","btn-secondary","mr-2",3,"keydown.enter","click"],["azt-track-service","submit-info-5wWwRj07M5L","type","submit",1,"btn","w-32","btn-primary",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"px-2",2,"margin-left","5px"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"input-group"],[1,"input-group-text","font-medium","whitespace-nowrap",2,"min-width","134px"],["type","text",1,"form-control",3,"formControl"],[1,"pt-1","text-xs"],[1,"pt-1","text-xs","text-danger"],[1,"border","border","border-slate-200","dark:border-darkmode-400","rounded-md"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","border-b","border-slate-200","dark:border-darkmode-400"],[1,"font-medium"],[1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-4 mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4","mb-1"],[1,"flex","items-center"],[1,"form-check","mr-2"],["type","checkbox",1,"form-check-input","ml-2",3,"id","formControl"],[1,"cursor-pointer","truncate",3,"for","matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","col-span-12 sm:col-span-12 md:col-span-4 mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-12","md:col-span-4","mb-1"],["type","radio",1,"form-check-input","ml-2",3,"id","name","formControl","value"],[1,"input-group","w-full"],[1,"input-group-text","font-medium","whitespace-nowrap",2,"min-width","134px","transform","translateX(3px)","z-index","2"],[1,"w-full","overflow-hidden"],["appearance","outline"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(s,o){1&s&&(e.j41(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),e.nrm(5,"lucide-icon",6),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"h6",7),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.j41(11,"div",8)(12,"azt-mat-dialog-content",9),e.DNE(13,Kk,8,6,"ng-container",10),e.k0s()()(),e.j41(14,"div",11)(15,"button",12),e.bIt("keydown.enter",function(r){return r.preventDefault()})("click",function(){return o.goBack()}),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"button",13),e.bIt("click",function(){return o.handleConfirm()}),e.DNE(19,Zk,2,0,"span",14),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(5),e.Y8G("ngClass",e.lJ4(18,Bk)),e.R7$(),e.SpI(" ",e.bMT(7,10,"lang_auto_vui_long_nhap_them_thong_tin_de_bat_dau_bai_thi")," "),e.R7$(3),e.SpI(" ",e.bMT(10,12,"lang_auto_nhung_thong_tin_nay_se_giup_giao_vien_dinh_danh_va_cham_diem_cho_ban")," "),e.R7$(3),e.Y8G("defaultHeight",55),e.R7$(),e.Y8G("ngForOf",o.infoObjs),e.R7$(3),e.SpI(" ",e.bMT(17,14,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",!o.form.valid||o.statusObj.loading),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(21,16,"lang_auto_xac_nhan")," "))},dependencies:[ye.f,Ms.U,wt.R,v.MD,v.YU,v.Sq,v.bT,g.X1,g.qT,g.me,g.Zm,g.Fm,g.BC,g.cb,g.l_,g.j4,L.iI,g.YN,z.wp,Y.s,wr.wT,Uu.rl,Xu.VO,vt.oV,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function tE(i=1){return t=>t.getRawValue().filter(o=>o).length>=i?null:{required:!0}}var nE=A(2987);const sE=()=>({"mr-2":!0});let iE=(()=>{var i;class n extends Z.H{copyLinkToClipboard(s){return s}clickCopyLink(){this.showSuccessSnack("lang_auto_copy_link_thanh_cong")}bindUrlToQrCode(s){this.urlToUploadEssayFilesInMobile=`${this.commonService.getCurrentDomain()}/n/${s}`}ngOnInit(){super.ngOnInit(),this.bindUrlToQrCode(this.uploadHashCode)}constructor(){super(),this.urlToUploadEssayFilesInMobile=""}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-qr-code-of-upload-essay-files"]],inputs:{uploadHashCode:"uploadHashCode"},standalone:!0,features:[e.Vt3,e.aNF],decls:16,vars:15,consts:[[1,"p-2","mt-3"],[1,"strike","mt-3"],[1,"text-slate-600","dark:text-slate-500"],[1,"mt-3"],[1,"mt-2","flex","items-center"],["type","text","readonly","",1,"w-full","p-2","bg-white","mr-2",3,"value"],["azt-track-service","upload-image-X_utJrb2bC",1,"btn","btn-outline-primary","flex-none",3,"click","cdkCopyToClipboard"],["name","copy","size","16",3,"ngClass"],[1,"ml-2",3,"fileName","linkUrl"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",3)(6,"div"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",4),e.nrm(10,"input",5),e.j41(11,"button",6),e.bIt("click",function(){return o.clickCopyLink()}),e.nrm(12,"lucide-icon",7),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.nrm(15,"azt-download-qr-code",8),e.k0s()()()),2&s&&(e.R7$(3),e.JRh(e.bMT(4,8,"lang_auto_hoac_nop_bang_dien_thoai")),e.R7$(4),e.SpI(" ",e.bMT(8,10,"lang_auto_vao_trinh_duyet_bang_dien_thoai_truy_cap_duong_dan_sau_de_tai_bai_thi_tu_luan_len")," "),e.R7$(3),e.FS9("value",o.urlToUploadEssayFilesInMobile),e.R7$(),e.Y8G("cdkCopyToClipboard",o.copyLinkToClipboard(o.urlToUploadEssayFilesInMobile)),e.R7$(),e.Y8G("ngClass",e.lJ4(14,sE)),e.R7$(),e.SpI(" ",e.bMT(14,12,"lang_auto_sao_chep")," "),e.R7$(2),e.Y8G("fileName","azota_upload_essay_files")("linkUrl",o.copyLinkToClipboard(o.urlToUploadEssayFilesInMobile)))},dependencies:[Xi.d,v.MD,v.YU,g.X1,L.iI,g.YN,z.wp,Y.s,Uh.dF,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function oE(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-azt-essay-files-upload-box",3),e.bIt("changeEssayFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeEssayFiles(o))})("cancelChangeEssayFilesEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancelChangeEssayFiles())})("uploadActionsEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.uploadActionsEvent(o))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("uploadHashCode",t.data.uploadHashCode)("showCancelButton",!0)}}function aE(i,n){if(1&i&&e.nrm(0,"app-coazt-qr-code-of-upload-essay-files",4),2&i){const t=e.XpG();e.Y8G("uploadHashCode",t.data.uploadHashCode)}}let rE=(()=>{var i;class n extends Mt._{changeEssayFiles(s){this.data.isFullScreenRequired&&this.sAztFullScreenService.showFullScreen(),this.dialogRef.close(s)}cancelChangeEssayFiles(){this.data.isFullScreenRequired&&this.sAztFullScreenService.showFullScreen(),this.dialogRef.close(void 0)}uploadActionsEvent(s){return"SELECT_FILE"==s?(this.sAztFullScreenVisibleService.setAllowTrackFullScreenStatus(!1),void this.sAztFullScreenVisibleService.setAllowTrackVisibleStatus(!1)):"SELECTED"==s?this.sAztFullScreenVisibleService.setAllowTrackVisibleStatus(!0):void 0}constructor(s,o,a){super(a,o),this.sAztFullScreenVisibleService=s,this.dialogRef=o,this.sAztFullScreenService=new Ns}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(kr),e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-upload-essay-files-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["scrollViewport","","pointerEventsMethod","scrollbar",1,"upload-essay-dialog-box",2,"--scrollbar-size","5px","height","100%",3,"visibility"],[3,"uploadHashCode","showCancelButton","changeEssayFilesEvent","cancelChangeEssayFilesEvent","uploadActionsEvent",4,"ngIf"],[3,"uploadHashCode",4,"ngIf"],[3,"changeEssayFilesEvent","cancelChangeEssayFilesEvent","uploadActionsEvent","uploadHashCode","showCancelButton"],[3,"uploadHashCode"]],template:function(s,o){1&s&&(e.j41(0,"ng-scrollbar",0),e.DNE(1,oE,1,2,"app-azt-essay-files-upload-box",1)(2,aE,1,1,"app-coazt-qr-code-of-upload-essay-files",2),e.k0s()),2&s&&(e.Y8G("visibility","hover"),e.R7$(),e.Y8G("ngIf",o.data.uploadHashCode),e.R7$(),e.Y8G("ngIf",!o.isMobileDevice&&o.data.uploadHashCode))},dependencies:[nE.t,iE,v.MD,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,U.Yh,U.Gl,q.k],encapsulation:2}),n})(),s_=(()=>{var i;class n extends Z.H{onResize(){this.isMobileScreenSize=(new gf).checkByWidth()}goBackToExamDetails(){this.commonService.myNavigationWithQueryString("/de-thi/"+(this.hashId?this.hashId:this.currentTakeTestStepData.examObj.hashId),"?backto="+encodeURIComponent(this.backToLink))}checkScrollToShowTopBar(){return window.scrollY>50}selectStudentEvent(s){this.getInitDataFromApi()}showUploadEssayFilesDialog(){this.sAztFullScreenVisibleService.reset(),document.getElementById("monitorScreenTakeTest")?.style.setProperty("display","none"),this.currentTakeTestStepData.essayQuestionSubmitting=!0,this.sAztDialogService.open(rE,{data:{uploadHashCode:this.currentTakeTestStepData.uploadHashCode,isFullScreenRequired:this.currentTakeTestStepData.showFullScreenRequired},restoreFocus:!1,width:"100vw",maxWidth:"100vw",height:"100vh",backdropClass:"azt-backdrop-full-width-height",disableClose:!0}).afterClosed().subscribe(o=>{this.currentTakeTestStepData.essayQuestionSubmitting=!1,this.sAztFullScreenVisibleService.reset(),null!=o&&(window.scrollTo({top:0}),this.currentTakeTestStepData.files=o,window.scrollTo({top:0}),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData),this.currentTakeTestStepData.showFullScreenRequired&&this.sAztFullScreenService.showFullScreen(),this.openVideoMonitor())})}changeAnswerFiles(s){this.currentTakeTestStepData.files=s,this.sAztTakeTestCallApiService.updateEssayFilesToApi(this.currentTakeTestStepData).then(()=>{this.showSuccessSnack("lang_auto_cap_nhat_thanh_cong_dinh_kem_file_tu_luan")})}checkVipExam(s,o){if(this.isBusinessDomain||this.isMobileWebView)return o(!0);this.waitDestroy(this.frontVipService.apiFrontVipCheckVipObjectGet(s,"exam").subscribe(a=>{if(!a.success||a.data)return o(!0);this.checkAttemptsExam(s,o)}))}redirectToVipUpgrade(){this.myNavigationWithQueryString("/auth/vip-packages/studentVip",`?backto=${encodeURIComponent(this.commonService.getCurrentUrlWithoutLocale())}&trackingKey=TAKE_TEST`)}checkAttemptsExam(s,o){this.waitDestroy(this.commonService.wrapApiResponse(this.studentPracticeService.aiApiV1StudentPracticeCanAttemptExamGet(s)).subscribe(a=>{if(!a.success||a.data?.value)return o(!0);o(!1)}))}openVideoMonitor(){this.currentTakeTestStepData.showVideoRequired&&(document.getElementById("monitorScreenTakeTest")?.style?.setProperty("display","block"),this.sAztShowMonitorService.monitorAtTestPage({roomId:this.hashId,examConfig:this.currentTakeTestStepData.examObj,examId:this.currentTakeTestStepData.examObj.id,resultId:this.currentTakeTestStepData.termExamResultId,userList:[]},this.currentTakeTestStepData.testingUserObj,s=>{s&&(this.currentTakeTestStepData.isShowVideoMonitor=!0)}))}intervalExamTime(){if(this.currentTakeTestStepData?.isUnLimitedTime)return;const s=new kt.B,o=(0,Bn.Y)(1e3).pipe((0,Ys.Q)(s));this.waitDestroy(o.subscribe(a=>{if(this.currentTakeTestStepData.countDownSecond<=0)this.getServerTime(r=>{if(this.currentTakeTestStepData.countDownSecond<=0)return this.currentTakeTestStepData.viewQuestionObjs=this.sAztTestQuestionService.takeAnswerForQuestion(this.currentTakeTestStepData.answerList,this.currentTakeTestStepData.viewQuestionObjs),this.currentTakeTestStepData.isAutoSubmit=!0,this.processByStep(Ie.RUN_OUT_OF_TIME_AFTER_TEST,this.currentTakeTestStepData),this.sAztDialogService.dialog.closeAll(),s.next(!0)});else{let r=this.timeService.getCurrentSecond();this.currentTakeTestStepData.countDownSecond=this.currentTakeTestStepData.rawCountDownSecond-(r-this.currentTakeTestStepData.clientTimeSecond),this.currentTakeTestStepData=this.sAztTestQuestionService.calculateNewCountDown(this.currentTakeTestStepData)}}))}intervalToGetServerTime(){if(this.currentTakeTestStepData?.isUnLimitedTime)return;const s=new kt.B,o=(0,Bn.Y)(1e3*this.commonService.getRandomNumber(200,300)).pipe((0,Ys.Q)(s));this.waitDestroy(o.subscribe(a=>{this.getServerTime(r=>{})}))}getServerTime(s){this.waitDestroy(this.frontExamService.apiFrontExamGetTimeExamObjGet().subscribe(o=>{o.success&&o.data?.curServerTime?(this.currentTakeTestStepData.currentServerTime=o.data.curServerTime,this.currentTakeTestStepData.countDownSecond=this.currentTakeTestStepData.startTestTimeAtServerTime+60*(this.currentTakeTestStepData.examObj.minutes??0)-this.currentTakeTestStepData.currentServerTime,this.currentTakeTestStepData.clientTimeSecond=this.timeService.getCurrentSecond(),this.currentTakeTestStepData.rawCountDownSecond=this.currentTakeTestStepData.countDownSecond,this.currentTakeTestStepData=this.sAztTestQuestionService.calculateNewCountDown(this.currentTakeTestStepData),s(!0)):s(!1)}))}intervalToSendTestDataToApi(){const s=new kt.B,o=(0,Bn.Y)(1e3*this.commonService.getRandomNumber(120,180)).pipe((0,Ys.Q)(s));this.waitDestroy(o.subscribe(a=>{this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData)}))}openQuitDialog(){this.sAztDialogService.open(Pk,{data:{countDownSecond:this.currentTakeTestStepData.countDownSecond,isUnLimitedTime:this.currentTakeTestStepData.isUnLimitedTime},restoreFocus:!1,width:"450px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(o=>{o&&this.goBackToExamDetails()})}openSubmitExam(){let s=this.currentTakeTestStepData.answerList.filter(r=>!this.commonService.isExistInArray(this.currentTakeTestStepData.essayQuestionIds,r.questionId)).length;this.sAztDialogService.open(jk,{data:{countDownSecond:this.currentTakeTestStepData.countDownSecond,isUnLimitedTime:this.currentTakeTestStepData.isUnLimitedTime,notHasFiles:this.currentTakeTestStepData.hasEssayQuestion&&0==this.currentTakeTestStepData.files.length,totalTrueFalseLeftBlank:this.currentTakeTestStepData.countQuestion-this.currentTakeTestStepData.countEssayQuestion-s},restoreFocus:!1,width:"550px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(r=>{r&&this.submitTestToApi(!1)})}sendAudioForQuestion(s){this.currentTakeTestStepData=this.sAztTestAudioService.sendAudioForQuestion(this.currentTakeTestStepData,s)}setResultTracking(s){this.currentTakeTestStepData=this.sAztTestResultTrackService.setResultTracking(this.currentTakeTestStepData,s)}setQuestionTrueFalseAnswer(s){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionTrueFalseAnswer(this.currentTakeTestStepData,s),this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTestQuestionService.isShowAnswerStatusBox=!1}setQuestionOneChoiceAnswer(s){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionOneChoiceAnswer(this.currentTakeTestStepData,s),this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTestQuestionService.isShowAnswerStatusBox=!1}checkAnswerQuestionByApi(){if(!this.currentTakeTestStepData||"training"!=this.modeViewTest||!this.sAztTestQuestionService.checkQuestionHasAnswer(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id))return;let s=this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj,o={questionId:s.id,answerContent:[{index:999,content:""}]};const a={examResultId:this.currentTakeTestStepData.termExamResultId,answer:this.sAztTestQuestionService.getAnswerOfQuestion(this.currentTakeTestStepData,s.id)??o};this.answerTypeService.isTrueFalseAnswer(s)&&a.answer&&a.answer.answerContent.length<s.answers.length||(this.sAztTestQuestionService.isCheckingAnswer=!0,this.waitDestroy(this.frontExamResultService.apiFrontExamResultSaveQuestionResultEncryptPost(this.encryptionHelper.payload(a),this.currentTakeTestStepData.examObj.hashId).subscribe(r=>{if(!r.success)return this.sAztTestQuestionService.isCheckingAnswer=!1,this.errorStatusObj(r.message,!0);let l=r.data;s.numberOfChecks=(s.numberOfChecks??0)+1,this.sAztTestQuestionService.isShowAnswerStatusBox=!0,s.practiceCheckAnswer=l?.correct?"correct":"wrong","correct"==s.practiceCheckAnswer&&(this.sAztTestQuestionService.isShowSuccessAnimationBox=!0,this.currentTakeTestStepData?.nextBackQuestionModel.isLastQuestion||(this.sAztTestQuestionService.trainingAudioSuccess.play(),setTimeout(()=>{this.sAztTestQuestionService.trainingAudioSuccess.pause(),this.nextQuestion(s.id)},2e3))),"correct"!==s.practiceCheckAnswer&&(this.sAztTestQuestionService.hasWrongAnswer=!0),this.sAztTestQuestionService.isCheckingAnswer=!1})))}nextQuestion(s){this.currentTakeTestStepData&&this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id==s&&(this.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion||(this.currentTakeTestStepData=this.sAztTestNextBackQuestionService.nextTo(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj),this.sAztTestQuestionService.isShowSuccessAnimationBox=!1))}setQuestionFillAnswer(s){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionFillAnswer(this.currentTakeTestStepData,s),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData)}setQuestionEssayAnswer(s){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionEssayAnswer(this.currentTakeTestStepData,s),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData)}submitTestToApi(s){if(this.isSubmittingAnswer)return;this.isSubmittingAnswer=!0,this.initStatusObj();var o=new Dt(this.hashId,this.browserStorageService).getInfo(),a=this.commonService.myClone(this.currentTakeTestStepData.resultTracks);let r=JSON.stringify({type:"exam",id:this.currentTakeTestStepData.examObj.id,user:this.currentTakeTestStepData.examObj.tenantId});var l={autoSubmit:s,serverCountDown:this.currentTakeTestStepData.countDownSecond,examMinutes:this.currentTakeTestStepData.examObj.minutes,saveStudentId:this.currentTakeTestStepData.testingUserObj.id,saveDeviceId:this.sAztTestDeviceIdService.getDeviceId(),deviceType:this.commonService.deviceType()};let c={answers:this.currentTakeTestStepData.answerList,notes:[],files:JSON.stringify(this.currentTakeTestStepData.files),infors:o,trackInfos:JSON.stringify(l),resultTrack:this.zipDataService.convertContentGzip(JSON.stringify(a)),saveTime:0,id:this.currentTakeTestStepData.termExamResultId??0};this.waitDestroy(this.frontExamResultService.apiFrontExamResultSaveResultEncryptPost(this.encryptionHelper.payload(c),r,this.hashId).subscribe(_=>_.success?"capacity"==this.modeViewTest&&_.data?.nextExamObj?.hashId?(this.isSubmittingAnswer=!1,void this.recallApiForNextExam()):(this.sAztTestQuestionService.clearAllData(this.currentTakeTestStepData),void this.commonService.myNavigationWithQueryString("/test/submit-test/"+this.tenantId+"/"+this.curCateId+"/"+this.hashId+"/"+_.data?.id,"?backto="+encodeURIComponent(this.backToLink)+("capacity"==this.modeViewTest?"&capacity=1":""))):s?(this.showErrorSnack(_.message),void setTimeout(()=>{this.isSubmittingAnswer=!1,this.submitTestToApi(!0)},5e3)):(this.isSubmittingAnswer=!1,void this.errorStatusObj(_.message,!0))))}recallApiForNextExam(){new Dt(this.currentTakeTestStepData.examObj.hashId??"",this.browserStorageService).removeInfo(),this.browserStorageService.removeSimpleStorage("saveResultTrack_"+this.currentTakeTestStepData.examObj.hashId+"_"+this.currentTakeTestStepData.termExamResultId),this.browserStorageService.removeSimpleStorage("saveScrollTrack_"+this.currentTakeTestStepData.examObj.hashId+"_"+this.currentTakeTestStepData.termExamResultId),this.browserStorageService.removeSimpleStorage("saveDataV4_"+this.currentTakeTestStepData.examObj.id+"_"+this.currentTakeTestStepData.termExamResultId),this.browserStorageService.removeSimpleStorage("limitAudioV6_"+this.currentTakeTestStepData.examObj.id+"_"+this.currentTakeTestStepData.termExamResultId),this.localStorageObject.clearAllCache();let s=new Dt(this.hashId,this.browserStorageService).getPassword(),o=new Dt(this.hashId,this.browserStorageService).hasInfo(),a=tt.c.production||tt.c.isProdAzotaVn;this.destroyAllSubs(),this.initStatusObj(),this.waitDestroy(a?this.frontExamService.apiFrontExamInitDataGet(this.hashId,s,o?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(r=>{const l=this.encryptionHelper.result(r);this.processInitData(""!=s,l)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,s,o?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(r=>{this.processInitData(""!=s,r)}))}processInitData(s,o){if(!(o&&o?.success&&o?.data&&o.data.examObj))return this.currentTakeTestStepData=void 0,this.forceShowErrorBox(o?.message??"");const a=this.userService.getUserObj();let r=o?.data?.errorMessage??"",l=""!=r,c={examObj:o.data.examObj,examConfigObj:o.data.examConfigObj,infoFields:this.commonService.myParseJson(o.data.examObj.infoFieldsV2??"")??[],authUserObj:a,studentObj:o.data.studentObj,termExamResultId:o.data.testingExamResultObj?.id,testingResultObj:o.data.testingExamResultObj,testingUserObj:this.homeworkExamService.mustInClassroom(o.data.examObj)?o.data.studentObj??a:a,uploadHashCode:o.data?.hashCodeUpload??"",currentStep:Ie.INIT,sequenceSteps:[Ie.SHOW_ESSAY_WARNING_DIALOG,Ie.SHOW_FULL_SCREEN,Ie.SHOW_VIDEO_REQUIRED],questionTestObjs:o.data.questionObjs,viewQuestionObjs:this.commonService.castJsonToClassObjs(vr.I,JSON.stringify(o.data.questionObjs))??[],viewQuestionInGroupList:[],hasEssayQuestion:this.sAztTestQuestionService.getEssayQuestionIds(o.data.questionObjs).length>0,countEssayQuestion:this.sAztTestQuestionService.getEssayQuestionIds(o.data.questionObjs).length,essayQuestionIds:this.sAztTestQuestionService.getEssayQuestionIds(o.data.questionObjs),countQuestion:o.data.questionObjs.length,isAnonymousUser:this.userService.isAnonymousRoleOfCurrentUser(),isShowVideoMonitor:!1,startTestTimeAtServerTime:o.data?.startServerSecond??0,currentServerTime:o.data?.currentServerSecond??0,countDownSecond:o.data?.countDownSecond??0,rawCountDownSecond:o.data?.countDownSecond??0,isUnLimitedTime:(o.data.examObj.minutes??0)<=0,clientTimeSecond:this.timeService.getCurrentSecond(),isAutoSubmit:!1,isActualEndTime:!1,allowUploadEssayFileWhenEndTime:!0,autoSubmitAfterSeconds:void 0,loginRequired:!1,errorMessage:r,oldOrNotFoundResult:"lang_core_not_found_result_or_old_result"===r,cantTakeTestOnline:"lang_testbank_offline_exam_cant_be_test_online"===r,waitToTestTime:"lang_core_time_smaller_than_start_time"===r,isUnPurchased:"lang_core_does_not_owner_exam"===r,passwordRequired:"lang_core_exam_password_invalid"===r,isInvalidPassword:"lang_core_exam_password_invalid"===r&&s,isOnlyApp:1==o.data.examConfigObj?.allowAppOnly&&!this.isMobileWebView&&!o.data.examConfigObj?.allowWebUserIds?.includes(a.id),essayQuestionSubmitting:!1,showFullScreenRequired:null!=o.data.examObj.autoMonitor&&0!=o.data.examObj.autoMonitor&&!this.isMobileDevice,showVideoRequired:null!=o.data.examObj.autoMonitor&&3==o.data.examObj.autoMonitor,enterAnonymousFullNameRequired:!!this.userService.isAnonymousName(this.userService.getUserObj()),enterInfoRequired:!1,chooseStudentRequired:!1,chooseCapacityExamRequired:"lang_core_there_are_not_testing_component_for_capacity_exam"==r&&"WAITING"!==o.data.capacityTestStatus,capacityExamIntro:"WAITING"===o.data.capacityTestStatus,isRunOutOfTime:!1,resultTracks:[],files:[],answerList:[],trainingAnswerQuestions:void 0,nextBackQuestionModel:void 0,hasAlreadyGenerateQuestion:!1,hasAlreadyRunIntervalCountDown:!1,capacityComponent:o.data.capacityComponent,waitingTime:120};return c=this.sAztTestQuestionService.calculateNewCountDown(c),this.commonService.translateMetaData({title:c.examObj.name,description:c.examObj.name}),c.testingResultObj&&(c.resultTracks=this.sAztTestResultTrackService.getResultTrackFromLocalStorage(c.examObj,c.testingResultObj.id),c.viewQuestionObjs=this.sAztTestQuestionService.changeQuestionContent(c.examObj,c.testingResultObj.id,c.viewQuestionObjs),this.sAztTestAudioService.saveAudioLimitStorage(c.examObj,c.testingResultObj.id,c.viewQuestionObjs)),c.viewQuestionObjs=this.sAztTestQuestionService.resetQuestionIndex(c.viewQuestionObjs,c.examConfigObj?.resetQuestionIndex??!1),c=this.sAztTestNextBackQuestionService.init(c),this.sAztTestQuestionService.convertViewQuestionToQuestionInGroup(c),c.enterInfoRequired=1==c.examObj.enterInfo&&c.infoFields.length>0&&!new Dt(this.hashId,this.browserStorageService).hasInfo(),c.loginRequired=!this.homeworkExamService.allowAnonymousUser(c.examObj)&&c.isAnonymousUser||c.isOnlyApp&&c.isAnonymousUser,c.chooseStudentRequired=this.homeworkExamService.mustInClassroom(c.examObj)&&null==c.studentObj,c.isRunOutOfTime=!l&&c.countDownSecond<=0&&!c.isUnLimitedTime,this.processByStep(c.loginRequired?Ie.LOGIN_DIALOG:c.cantTakeTestOnline||c.oldOrNotFoundResult?Ie.SHOW_ERROR_MESSAGE:c.isOnlyApp?Ie.SHOW_APP_ONLY_MESSAGE:c.isUnPurchased?Ie.PAYMENT_DIALOG:c.passwordRequired||c.enterAnonymousFullNameRequired||c.enterInfoRequired?Ie.INFO_REQUIRED_DIALOG:c.waitToTestTime?Ie.WAIT_TO_TEST_TIME:c.chooseStudentRequired?Ie.CHOOSE_STUDENT:c.isRunOutOfTime?Ie.RUN_OUT_OF_TIME_WHEN_F5:c.chooseCapacityExamRequired?Ie.CAPACITY_EXAM_SELECT:c.capacityExamIntro?Ie.CAPACITY_EXAM_INTRO:l?Ie.SHOW_ERROR_MESSAGE:Ie.SEQUENCE_STEP,c)}processByStep(s,o){return this.currentTakeTestStepData=o,this.currentTakeTestStepData.currentStep=s,s==Ie.SHOW_ERROR_MESSAGE||s==Ie.SHOW_APP_ONLY_MESSAGE?this.stopStatusObj():s==Ie.LOGIN_DIALOG?(this.sAztDialogService.open(Nk.J,{data:{},restoreFocus:!1,width:"450px",backdropClass:"azt-backdrop",disableClose:!0}),this.stopStatusObj()):s==Ie.PAYMENT_DIALOG?(this.sAztDialogService.open(Ch,{data:{examObj:o.examObj},restoreFocus:!1,width:"100vw",maxWidth:"100vw",height:"100vh",backdropClass:"azt-backdrop-full-width-height",disableClose:!0}).afterClosed().subscribe(l=>{"close"==l&&this.myNavigation(`/de-thi/${o.examObj.hashId}`)}),this.stopStatusObj()):s==Ie.INFO_REQUIRED_DIALOG?(this.sAztDialogService.open(eE,{data:{obj:o},restoreFocus:!1,width:"750px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(r=>{r&&this.getInitDataFromApi()}),this.stopStatusObj()):s==Ie.RUN_OUT_OF_TIME_WHEN_F5||s==Ie.RUN_OUT_OF_TIME_AFTER_TEST?this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,o,a=>(this.currentTakeTestStepData=a,this.currentTakeTestStepData.viewQuestionObjs=this.sAztTestQuestionService.takeAnswerForQuestion(o.answerList,o.viewQuestionObjs),this.stopStatusObj())):s==Ie.CHOOSE_STUDENT||s==Ie.CAPACITY_EXAM_SELECT||s==Ie.CAPACITY_EXAM_INTRO||s==Ie.WAIT_TO_TEST_TIME?this.stopStatusObj():s==Ie.SEQUENCE_STEP?this.startShowTestContent(o,a=>{if(a)return this.setProcessToErrorStep(a);let r=this.commonService.getFirstOfArray(o.sequenceSteps);return o.sequenceSteps=o.sequenceSteps.filter(l=>l!=r),this.processByStep(r||Ie.START_TEST,o)}):s==Ie.SHOW_ESSAY_WARNING_DIALOG?o.hasEssayQuestion?(this.sAztDialogService.open(Mk,{data:{},restoreFocus:!1,width:"400px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(()=>{this.processByStep(Ie.SEQUENCE_STEP,o)}),this.stopStatusObj()):this.processByStep(Ie.SEQUENCE_STEP,o):s==Ie.SHOW_FULL_SCREEN?o.showFullScreenRequired?(this.sAztDialogService.open(Lk,{data:{},restoreFocus:!1,width:"400px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(()=>(this.sAztFullScreenService.showFullScreen(),this.processByStep(Ie.SEQUENCE_STEP,o))),this.stopStatusObj()):this.processByStep(Ie.SEQUENCE_STEP,o):s==Ie.SHOW_VIDEO_REQUIRED?o.showVideoRequired?(this.openVideoMonitor(),this.processByStep(Ie.SEQUENCE_STEP,o)):this.processByStep(Ie.SEQUENCE_STEP,o):s==Ie.START_TEST?this.startShowTestContent(o,a=>{if(a)return this.setProcessToErrorStep(a);this.stopStatusObj()}):void this.errorStatusObj("lang_take_test_not_found_process_step",!0)}setProcessToErrorStep(s){this.currentTakeTestStepData.errorMessage=s,this.processByStep(Ie.SHOW_ERROR_MESSAGE,this.currentTakeTestStepData)}initParams(){this.sAztFullScreenVisibleService.reset(),this.sAztTestDeviceIdService.getDeviceId(),document.getElementById("azota-app-html")?.classList.add("azotaHtml"),this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.curCateId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.hashId=(this.commonService.getMyParam(this.activeRoute,"hash_id")??"").toString(),this.tenantId=Number(this.commonService.getMyParam(this.activeRoute,"tenant_id")),this.getInitDataFromApi()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){document.getElementById("azota-app-html")?.classList.remove("azotaHtml"),this.mixService.cancelSubscription(),this.sAztShowMonitorService.destroyMonitorAtStudentDashboard(),this.sAztTakeTestCallApiService.destroyAll(),this.sAztDialogService.closeAll(),super.ngOnDestroy()}constructor(){super(),this.activeRoute=(0,e.WQX)(L.nX),this.userService=(0,e.WQX)(pn.R),this.mixService=(0,e.WQX)(hk),this.localStorageObject=(0,e.WQX)(ff.G),this.zipDataService=(0,e.WQX)(Gs.j),this.timeService=(0,e.WQX)(mn.F),this.browserStorageService=(0,e.WQX)(zi.z),this.frontExamResultService=(0,e.WQX)(Ce.Ry),this.frontExamService=(0,e.WQX)(Ce.iB),this.frontExamResultUploadService=(0,e.WQX)(Ce.sc),this.sAztDialogService=(0,e.WQX)(Mn.i),this.answerTypeService=(0,e.WQX)(on._),this.homeworkExamService=(0,e.WQX)(pa.Z),this.questionRenderService=(0,e.WQX)(Ju.g),this.testMarketFeedbackService=(0,e.WQX)(Pu.l_),this.encryptionHelper=(0,e.WQX)(hf.w),this.testLogExamResultAnswerService=(0,e.WQX)(pk.dO),this.sAztShowMonitorService=(0,e.WQX)(xh),this.sAztFullScreenVisibleService=(0,e.WQX)(kr),this.frontVipService=(0,e.WQX)(Ce.uj),this.studentPracticeService=(0,e.WQX)(mk.Kw),this.sAztFullScreenService=new Ns,this.sAztTestResizeService=new xk,this.sAztTestNextBackQuestionService=new gk(this.commonService),this.sAztTestQuestionService=new bk(this.commonService,this.answerTypeService,this.browserStorageService,this.localStorageObject,this.sAztShowMonitorService),this.sAztTestDeviceIdService=new Tf(this.browserStorageService),this.sAztTestAudioService=new n_(this.commonService,this.browserStorageService),this.sAztTestResultTrackService=new vk(this.commonService,this.encryptionHelper,this.timeService,this.browserStorageService),this.sAztTakeTestCallApiService=new fk(this.commonService,this.zipDataService,this.browserStorageService,this.testMarketFeedbackService,this.encryptionHelper,this.testLogExamResultAnswerService,this.sAztTestQuestionService,this.sAztTestResultTrackService,this.frontExamResultUploadService,this.frontExamService),this.followerRenderQuest=new Dn.e,this.questsLoadState={startLoad:!1,loadPercent:0,hasErrs:!1,errData:new Array},this.isMobileScreenSize=(new gf).checkByWidth(),this.allTakeTestLayouts=$t,this.backToLink="",this.homeLink="/student/classroom/0",this.hashId="",this.tenantId=1,this.curCateId=0,this.isSubmittingAnswer=!1,this.allowAttemptExam=!0,this.isAnonymousUser=this.userService.isAnonymousRoleOfCurrentUser(),this.currentUserId=this.userService.getUserObj().id}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-base-test-component"]],hostBindings:function(s,o){1&s&&e.bIt("resize",function(r){return o.onResize(r)},!1,e.tSv)},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})(),i_=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.changeShowType=new e.bkB,this.openQuitDialog=new e.bkB,this.showUploadEssayFilesDialog=new e.bkB,this.openSubmitExam=new e.bkB,this.selectStudentEvent=new e.bkB,this.changeAnswerFiles=new e.bkB,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.setResultTracking=new e.bkB,this.sendAudioForQuestion=new e.bkB,this.submitTestToApi=new e.bkB,this.selectCapacityExamEmitter=new e.bkB,this.startedExamEvent=new e.bkB,this.allTakeTestSteps=Ie,this.allTakeTestLayouts=$t,this.allowContextMenu=!tt.c.production,this.answerTypeService=(0,e.WQX)(on._)}goBack(){let s=this.commonService.getMyQueryParam("backto")??"";this.commonService.myNavigationWithQueryString("/de-thi/"+this.currentTakeTestStepData.examObj.hashId,"?backto="+encodeURIComponent(s))}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-test-base-layout"]],inputs:{sAztTestResizeService:"sAztTestResizeService",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",currentTakeTestStepData:"currentTakeTestStepData",followerRenderQuest:"followerRenderQuest",questsLoadState:"questsLoadState",isMobileScreenSize:"isMobileScreenSize",homeLink:"homeLink",backToLink:"backToLink"},outputs:{changeShowType:"changeShowType",openQuitDialog:"openQuitDialog",showUploadEssayFilesDialog:"showUploadEssayFilesDialog",openSubmitExam:"openSubmitExam",selectStudentEvent:"selectStudentEvent",changeAnswerFiles:"changeAnswerFiles",setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",setResultTracking:"setResultTracking",sendAudioForQuestion:"sendAudioForQuestion",submitTestToApi:"submitTestToApi",selectCapacityExamEmitter:"selectCapacityExamEmitter",startedExamEvent:"startedExamEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})(),Er=(()=>{var i;class n extends Z.H{onResize(){var s=()=>!(this.currentTakeTestStepData.currentStep!=Ie.START_TEST||this.currentTakeTestStepData.essayQuestionSubmitting||!this.currentTakeTestStepData.showFullScreenRequired||this.sAztFullScreenService.checkFullScreen()||this.sAztFullScreenVisibleService.isSendingToApi()||!this.sAztFullScreenVisibleService.isAllowTrackFullScreen());s()&&setTimeout(()=>{s()&&(this.sAztFullScreenVisibleService.setSendingToApiStatus(!0),this.waitDestroy(this.frontExamTrackService.apiFrontExamTrackSaveObjPost({examId:this.currentTakeTestStepData.examObj.id,name:"exit_full_screen",examResultId:this.currentTakeTestStepData.termExamResultId??0}).subscribe(a=>{a.success&&this.commonService.snackWarning("lang_auto_ban_dang_bi_giam_sat_hay_tro_lai_che_do_toan_man_hinh"),setTimeout(()=>{this.sAztFullScreenVisibleService.setSendingToApiStatus(!1)},1e3)})))},5e3)}ngOnInit(){this.onResize(),super.ngOnInit()}constructor(s,o){super(),this.frontExamTrackService=s,this.sAztFullScreenVisibleService=o,this.sAztFullScreenService=new Ns}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Ce.XJ),e.rXU(kr))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-tracking-full-screen-event"]],hostBindings:function(s,o){1&s&&e.bIt("resize",function(r){return o.onResize(r)},!1,e.tSv)},inputs:{currentTakeTestStepData:"currentTakeTestStepData"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})(),Ar=(()=>{var i;class n extends Z.H{visibilitychange(){var s=()=>!(this.currentTakeTestStepData.currentStep!=Ie.START_TEST||this.currentTakeTestStepData.essayQuestionSubmitting||!this.currentTakeTestStepData.showFullScreenRequired||this.sAztFullScreenVisibleService.isSendingToApi()||!this.sAztFullScreenVisibleService.isAllowTrackVisible()||"visible"==document.visibilityState);s()&&setTimeout(()=>{s()&&(this.sAztFullScreenVisibleService.setSendingToApiStatus(!0),this.waitDestroy(this.frontExamTrackService.apiFrontExamTrackSaveObjPost({examId:this.currentTakeTestStepData.examObj.id,name:"blur_window",examResultId:this.currentTakeTestStepData.termExamResultId??0}).subscribe(a=>{a.success&&this.commonService.snackWarning("lang_auto_ban_dang_bi_giam_sat_hay_tro_lai_bai_thi"),setTimeout(()=>{this.sAztFullScreenVisibleService.setSendingToApiStatus(!1)},1e3)})))},5e3)}ngOnInit(){super.ngOnInit()}constructor(s,o){super(),this.frontExamTrackService=s,this.sAztFullScreenVisibleService=o}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Ce.XJ),e.rXU(kr))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-tracking-visible-event"]],hostBindings:function(s,o){1&s&&e.bIt("visibilitychange",function(r){return o.visibilitychange(r)},!1,e.EBC)},inputs:{currentTakeTestStepData:"currentTakeTestStepData"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})(),Or=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.isConfirmReload=!0}stopConfirm(){this.isConfirmReload=!1}askBeforeCloseWindow(s){if(this.isConfirmReload)return s.returnValue=!1}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-leave-window-event"]],hostBindings:function(s,o){1&s&&e.bIt("beforeunload",function(r){return o.askBeforeCloseWindow(r)},!1,e.tSv)},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();var lE=A(52058);let o_=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.sAztUserService=(0,e.WQX)(pn.R),this.recommendationService=(0,e.WQX)(lE.h)}ngOnInit(){this.sAztUserService.isLogin()&&this.waitDestroy(this.recommendationService.aiApiV1RecommendationUpdateTagsForUserPost().subscribe(s=>{}))}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-tracking-user-tags"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();const Vs=()=>({"mr-2":!0}),a_=i=>({"btn-primary":i});function cE(i,n){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_thi_sinh"),": ",t.currentTakeTestStepData.testingUserObj.fullName,"")}}function uE(i,n){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function _E(i,n){if(1&i&&e.nrm(0,"app-testbank-frontend-count-down-box",31),2&i){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function dE(i,n){1&i&&(e.EFF(0),e.nI1(1,"mytranslate")),2&i&&e.SpI(" ",e.bMT(1,1,"lang_auto_khong_gioi_han")," ")}function mE(i,n){1&i&&e.nrm(0,"lucide-icon",32)}function pE(i,n){1&i&&e.nrm(0,"lucide-icon",33)}function hE(i,n){1&i&&e.nrm(0,"lucide-icon",34)}function fE(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.sAztFullScreenService.showFullScreen())}),e.nrm(1,"lucide-icon",38),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,Vs)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_toan_man_hinh")," "))}function gE(i,n){if(1&i&&(e.j41(0,"div",35),e.DNE(1,fE,4,5,"button",36),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.isMobileScreenSize)}}function TE(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",35)(1,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(2,"lucide-icon",40),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Vs)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dinh_kem_bai_tu_luan")," "))}function bE(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"a",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.GROUP_QUESTION))}),e.nrm(2,"lucide-icon",42),e.j41(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(5,a_,t.layoutType===t.allTakeTestLayouts.GROUP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(7,Vs)),e.R7$(2),e.SpI(" ",e.bMT(5,3,"lang_azt_display_questions_by_group")," ")}}let r_=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.openQuitDialogEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.sAztFullScreenService=new Ns,this.allTakeTestLayouts=$t,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(s=>!s?.groupInfo?.groupId)}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-simple-test-header-box-for-desktop"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",sAztTestResizeService:"sAztTestResizeService",layoutType:"layoutType",isMobileScreenSize:"isMobileScreenSize"},outputs:{openQuitDialogEvent:"openQuitDialogEvent",changeShowTypeEvent:"changeShowTypeEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openSubmitExamEvent:"openSubmitExamEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:51,vars:45,consts:[["unlimitedTimeTpl",""],["layoutTypeMenu","matMenu"],[1,"fixed","w-full","box","rounded-none","items-center","flex","top-0","left-0","ng-star-inserted","p-3","z-index-1000","border-b","border-slate-200","dark:border-darkmode-400"],["azt-track-service","take-test-E4FLezP4kF",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["name","chevron-left","size","20"],[1,"relative","mx-auto"],["class","text-md font-medium",4,"ngIf"],[1,"mr-6"],[1,"flex","items-center"],["name","timer","size","20",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],[1,"flex","items-center","dropdown","mr-3"],["azt-track-service","take-test-DqyfiYKf45",1,"btn","btn-sm","btn-secondary","mr-2",3,"click","disabled","matTooltip"],["name","zoom-out","size","20"],["azt-track-service","take-test-lcadhTPzm",1,"btn","btn-sm","btn-secondary",3,"click","disabled","matTooltip"],["name","zoom-in","size","20"],["azt-track-service","take-test-UBz-4Fa9hv",1,"btn","btn-sm","btn-secondary",3,"matMenuTriggerFor"],["name","list","size","20",4,"ngIf"],["name","computer","size","20",4,"ngIf"],["name","layout-panel-left","size","20",4,"ngIf"],["class","mr-2",4,"ngIf"],["azt-track-service","take-test-U5gleH2CsWW",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","simple-test-header-box-for-desktop-LwFLoUqqHP",1,"dropdown-item","mb-1","items-center",3,"click","ngClass"],["name","list","size","16",3,"ngClass"],["azt-track-service","simple-test-header-box-for-desktop-BUfzS1hKTY",1,"dropdown-item","mb-1","items-center",3,"click","ngClass"],["name","computer","size","16",3,"ngClass"],[4,"ngIf"],[1,"text-md","font-medium"],[3,"totalSecond","useCountDown"],["name","list","size","20"],["name","computer","size","20"],["name","layout-panel-left","size","20"],[1,"mr-2"],["azt-track-service","take-test-7o7YbIPIyM","class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],["azt-track-service","take-test-7o7YbIPIyM",1,"btn","btn-sm","btn-secondary",3,"click"],["name","maximize","size","16",3,"ngClass"],["azt-track-service","take-test-EYDOxzj8YnB",1,"btn","btn-sm","btn-secondary",3,"click"],["name","paperclip","size","16",3,"ngClass"],["azt-track-service","simple-test-header-box-for-desktop-NNYZn1EpUR",1,"dropdown-item","items-center",3,"click","ngClass"],["name","layout-panel-left","size","16",3,"ngClass"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",2)(1,"div")(2,"button",3),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(3,"lucide-icon",4),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",5),e.DNE(7,cE,3,4,"span",6)(8,uE,2,1,"span",6),e.k0s(),e.j41(9,"div",7)(10,"div",8),e.nrm(11,"lucide-icon",9),e.DNE(12,_E,1,2,"app-testbank-frontend-count-down-box",10)(13,dE,2,3,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(15,"div",11)(16,"button",12),e.nI1(17,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomOut())}),e.nrm(18,"lucide-icon",13),e.k0s(),e.j41(19,"button",14),e.nI1(20,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomIn())}),e.nrm(21,"lucide-icon",15),e.k0s()(),e.j41(22,"div",11)(23,"button",16),e.DNE(24,mE,1,0,"lucide-icon",17)(25,pE,1,0,"lucide-icon",18)(26,hE,1,0,"lucide-icon",19),e.k0s()(),e.DNE(27,gE,2,1,"div",20)(28,TE,5,5,"div",20),e.j41(29,"div")(30,"button",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())}),e.nrm(31,"lucide-icon",22),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"mat-menu",null,1)(36,"div",23)(37,"ul",24)(38,"li")(39,"a",25),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.LIST_QUESTION))}),e.nrm(40,"lucide-icon",26),e.j41(41,"span"),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",27),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.STEP_QUESTION))}),e.nrm(46,"lucide-icon",28),e.j41(47,"span"),e.EFF(48),e.nI1(49,"mytranslate"),e.k0s()()(),e.DNE(50,bE,6,8,"li",29),e.k0s()()()}if(2&s){const a=e.sdS(14),r=e.sdS(35);e.R7$(4),e.SpI(" ",e.bMT(5,25,"lang_button_back")," "),e.R7$(3),e.Y8G("ngIf",!o.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.capacityComponent),e.R7$(3),e.Y8G("ngClass",e.lJ4(37,Vs)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(4),e.Y8G("disabled",o.sAztTestResizeService.fontSize<=1)("matTooltip",e.bMT(17,27,"lang_take_test_zoom_out")),e.R7$(3),e.Y8G("disabled",o.sAztTestResizeService.fontSize>=2)("matTooltip",e.bMT(20,29,"lang_take_test_zoom_in")),e.R7$(4),e.Y8G("matMenuTriggerFor",r),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.GROUP_QUESTION),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.showFullScreenRequired),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.hasEssayQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(38,Vs)),e.R7$(),e.SpI(" ",e.bMT(33,31,"lang_auto_nop_bai")," "),e.R7$(7),e.Y8G("ngClass",e.eq3(39,a_,o.layoutType===o.allTakeTestLayouts.LIST_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(41,Vs)),e.R7$(2),e.SpI(" ",e.bMT(43,33,"lang_auto_show_list")," "),e.R7$(3),e.Y8G("ngClass",e.eq3(42,a_,o.layoutType===o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(44,Vs)),e.R7$(2),e.SpI(" ",e.bMT(49,35,"lang_auto_show_unit")," "),e.R7$(2),e.Y8G("ngIf",o.isAllQuestionInGroup)}},dependencies:[Cn,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,yn.kk,yn.Cp,vt.oV,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const xE=()=>({"text-danger":!0}),No=()=>({"mr-2":!0}),l_=i=>({"bg-primary text-white font-medium":i});function vE(i,n){1&i&&e.nrm(0,"lucide-icon",26)}function yE(i,n){1&i&&e.nrm(0,"lucide-icon",27)}function SE(i,n){1&i&&e.nrm(0,"lucide-icon",28)}function wE(i,n){if(1&i&&e.nrm(0,"app-testbank-frontend-count-down-box",29),2&i){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function IE(i,n){1&i&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_gioi_han")))}function CE(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(1,"lucide-icon",32),e.k0s()}}function kE(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"a",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.GROUP_QUESTION))}),e.nrm(2,"lucide-icon",34),e.j41(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(5,l_,t.layoutType===t.allTakeTestLayouts.GROUP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(7,No)),e.R7$(2),e.SpI(" ",e.bMT(5,3,"lang_azt_display_questions_by_group")," ")}}let c_=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.openSubmitExamEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=$t,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(s=>!s?.groupInfo?.groupId)}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-simple-test-header-box-for-mobile"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",layoutType:"layoutType"},outputs:{openSubmitExamEvent:"openSubmitExamEvent",changeShowTypeEvent:"changeShowTypeEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:39,vars:33,consts:[["unlimitedTimeTpl",""],["layoutTypeMenu","matMenu"],[1,"fixed","w-full","box","border-b","border-slate-200","dark:border-darkmode-400","rounded-none","items-center","flex","top-0","left-0","ng-star-inserted","p-3","z-index-1000"],[1,"flex","items-center","w-full"],[1,"mr-auto","flex","items-center"],["azt-track-service","main-component-WXDHmEOSWA","matRipple","",1,"btn","btn-outline-secondary","rounded-full","w-8","h-8","border-0","shadow-none","p-1",3,"click"],["name","power","size","16","strokeWidth","2",3,"ngClass"],[1,"ml-2","flex","items-center"],[1,"flex","items-center","dropdown","mr-2"],["azt-track-service","take-test-UBz-4Fa9hv","matRipple","",1,"btn","btn-sm","btn-outline-secondary",2,"height","30px",3,"matMenuTriggerFor"],["name","list","size","20",4,"ngIf"],["name","computer","size","20",4,"ngIf"],["name","layout-panel-left","size","20",4,"ngIf"],[1,"inline-flex","border","border-slate-200","dark:border-darkmode-400","p-1","rounded-md","items-center","justify-center","mr-2"],["name","timer","size","20","strokeWidth","2",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],["class","btn btn-sm btn-outline-secondary mr-2","matRipple","",3,"click",4,"ngIf"],["matRipple","",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","simple-test-header-box-for-desktop-LwFLoUqqHP","matRipple","",1,"dropdown-item","font-medium","mb-1","items-center",3,"click","ngClass"],["name","list","size","16",3,"ngClass"],["azt-track-service","simple-test-header-box-for-desktop-BUfzS1hKTY","matRipple","",1,"dropdown-item","font-medium","mb-1","items-center",3,"click","ngClass"],["name","computer","size","16",3,"ngClass"],[4,"ngIf"],["name","list","size","20"],["name","computer","size","20"],["name","layout-panel-left","size","20"],[3,"totalSecond","useCountDown"],[1,"font-medium"],["matRipple","",1,"btn","btn-sm","btn-outline-secondary","mr-2",3,"click"],["name","paperclip","size","16"],["azt-track-service","simple-test-header-box-for-desktop-NNYZn1EpUR","matRipple","",1,"dropdown-item","font-medium","items-center",3,"click","ngClass"],["name","layout-panel-left","size","16",3,"ngClass"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(4,"lucide-icon",6),e.k0s()(),e.j41(5,"div",7)(6,"div",8)(7,"button",9),e.DNE(8,vE,1,0,"lucide-icon",10)(9,yE,1,0,"lucide-icon",11)(10,SE,1,0,"lucide-icon",12),e.k0s()(),e.j41(11,"div",13),e.nrm(12,"lucide-icon",14),e.DNE(13,wE,1,2,"app-testbank-frontend-count-down-box",15)(14,IE,3,3,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(16,CE,2,0,"button",16),e.j41(17,"button",17),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())}),e.nrm(18,"lucide-icon",18),e.j41(19,"span"),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()()()(),e.j41(22,"mat-menu",null,1)(24,"div",19)(25,"ul",20)(26,"li")(27,"a",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.LIST_QUESTION))}),e.nrm(28,"lucide-icon",22),e.j41(29,"span"),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s()()(),e.j41(32,"li")(33,"a",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.STEP_QUESTION))}),e.nrm(34,"lucide-icon",24),e.j41(35,"span"),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s()()(),e.DNE(38,kE,6,8,"li",25),e.k0s()()()}if(2&s){const a=e.sdS(15),r=e.sdS(23);e.R7$(4),e.Y8G("ngClass",e.lJ4(24,xE)),e.R7$(3),e.Y8G("matMenuTriggerFor",r),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.GROUP_QUESTION),e.R7$(2),e.Y8G("ngClass",e.lJ4(25,No)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",o.currentTakeTestStepData.hasEssayQuestion),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,No)),e.R7$(2),e.JRh(e.bMT(21,18,"lang_auto_nop_bai")),e.R7$(7),e.Y8G("ngClass",e.eq3(27,l_,o.layoutType===o.allTakeTestLayouts.LIST_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(29,No)),e.R7$(2),e.SpI(" ",e.bMT(31,20,"lang_auto_show_list")," "),e.R7$(3),e.Y8G("ngClass",e.eq3(30,l_,o.layoutType===o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(32,No)),e.R7$(2),e.SpI(" ",e.bMT(37,22,"lang_auto_show_unit")," "),e.R7$(2),e.Y8G("ngIf",o.isAllQuestionInGroup)}},dependencies:[Cn,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,yn.kk,yn.Cp,wr.r6,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const EE=()=>({"transition-3":!0}),AE=i=>({"bg-primary/10":i}),OE=i=>({"text-primary":i}),xf=()=>({"mr-2":!0}),RE=()=>({"ml-2":!0}),FE=(i,n)=>({"btn-primary-soft":i,"btn-outline-secondary":n});function jE(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",18)(1,"a",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG().index,a=e.XpG();return e.Njj(a.setQuestionInGroup(o))}),e.j41(2,"div",20)(3,"div",21)(4,"div",22),e.EFF(5),e.k0s()(),e.j41(6,"div",23)(7,"div",24),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"div",25),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()()}if(2&i){const t=e.XpG(),s=t.$implicit,o=t.index,a=e.XpG();e.Y8G("ngClass",e.eq3(14,AE,o===a.indexGroup)),e.R7$(),e.FS9("id","azt_group_"+s.groupId),e.R7$(),e.Y8G("ngClass",e.eq3(16,OE,o===a.indexGroup)),e.R7$(),e.tcI("background: conic-gradient(#1e40afe6 ",s.totalCompletedQuestion/s.totalQuestion*100,"%, #e2e8f0 ",s.totalCompletedQuestion/s.totalQuestion*100,"%)"),e.R7$(2),e.SpI(" ",s.totalCompletedQuestion+"/"+s.totalQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(9,10,"lang_auto_nhom")+" "+(o+1)," "),e.R7$(3),e.SpI(" ",s.totalQuestion+" "+e.bMT(12,12,"lang_notice_question")," ")}}function zE(i,n){if(1&i&&(e.qex(0),e.DNE(1,jE,13,18,"div",17),e.bVm()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",t&&(null==t||null==t.questionList?null:t.questionList.length))}}function ME(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.prevIndexGroup())}),e.nrm(1,"lucide-icon",27),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(6,xf)),e.R7$(2),e.SpI(" ",e.bMT(4,2,"lang_auto_nhom")+" "+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup-1].groupId+" ("+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup-1].totalQuestion+" "+e.bMT(5,4,"lang_auto_cau_thuong")+")"," ")}}function DE(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.nextIndexGroup())}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"lucide-icon",29),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_nhom")+" "+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].groupId+" ("+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].totalQuestion+" "+e.bMT(4,4,"lang_auto_cau_thuong")+")"," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(6,RE))}}function GE(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",30),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.submitExamEvent.emit())}),e.nrm(1,"lucide-icon",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,xf)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_nop_bai")," "))}function PE(i,n){if(1&i&&(e.j41(0,"span",34),e.EFF(1),e.k0s()),2&i){let t;const s=e.XpG().$implicit,o=e.XpG();e.R7$(),e.SpI(" ",(null!==(t=null!=(null==s?null:s.labelIndex)?s.labelIndex:null!==(t=s.startQuestionIndexWidthViewGroup)&&void 0!==t?t:0)&&void 0!==t?t:0)+(null!==(t=o.currentTakeTestStepData.examObj.startQuestionIndex)&&void 0!==t?t:1)," ")}}function NE(i,n){if(1&i&&(e.j41(0,"span",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.originalLabel," ")}}function VE(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",32),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goToQuestionEvent.emit(o.id))}),e.DNE(1,PE,2,1,"span",33)(2,NE,2,1,"span",33),e.k0s()}if(2&i){const t=n.$implicit;e.Y8G("ngClass",e.l_i(3,FE,t.status,!t.status)),e.R7$(),e.Y8G("ngIf",!t.originalLabel),e.R7$(),e.Y8G("ngIf",t.originalLabel)}}let LE=(()=>{var i;class n extends Z.H{nextIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1].groupId}`),this.nextIndexGroupEvent.emit())}prevIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1].groupId}`),this.prevIndexGroupEvent.emit())}setQuestionInGroup(s){this.indexGroup!==s&&this.currentTakeTestStepData.viewQuestionInGroupList[s]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[s].groupId}`,{left:this.indexGroup<s?-20:-150}),this.setQuestionInGroupEvent.emit(s))}constructor(){super(),this.setQuestionInGroupEvent=new e.bkB,this.toggleShowListQuestionInGroupEvent=new e.bkB,this.prevIndexGroupEvent=new e.bkB,this.nextIndexGroupEvent=new e.bkB,this.submitExamEvent=new e.bkB,this.goToQuestionEvent=new e.bkB}ngOnInit(){}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-simple-test-footer-box-for-group-layout"]],viewQuery:function(s,o){if(1&s&&e.GBs(U.Yh,7),2&s){let a;e.mGM(a=e.lsd())&&(o.scrollable=a.first)}},inputs:{currentTakeTestStepData:"currentTakeTestStepData",indexGroup:"indexGroup",layoutType:"layoutType"},outputs:{setQuestionInGroupEvent:"setQuestionInGroupEvent",toggleShowListQuestionInGroupEvent:"toggleShowListQuestionInGroupEvent",prevIndexGroupEvent:"prevIndexGroupEvent",nextIndexGroupEvent:"nextIndexGroupEvent",submitExamEvent:"submitExamEvent",goToQuestionEvent:"goToQuestionEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:19,vars:9,consts:[["scrollbarRef",""],[1,"box","fixed","w-full","bottom-0","left-0","rounded-none","border-t","border-slate-200","z-999"],[1,"flex","items-center"],[1,"flex","items-center","mr-auto"],[1,"h-full","box-group-question"],["track","all","pointerEventsMethod","scrollbar",3,"visibility"],[1,"flex","items-center","p-2","user-select-none"],[4,"ngFor","ngForOf"],[1,"ml-auto","flex","itemcs-center","p-3"],["azt-track-service","take-test-in-group-layout-xO-By9VnKm",1,"btn","btn-outline-secondary","border-3","rounded-full","p-3","mr-3","w-10","h-10",3,"click"],["name","chevron-up","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ","class","btn btn-outline-primary mr-3",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj","class","btn btn-outline-primary",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_","class","btn btn-primary",3,"click",4,"ngIf"],["id","contentBlock",1,"shadow","border-t","border-slate-200/60","px-3","pb-3","questionListInGroup"],[1,"mt-0"],["azt-track-service","take-test-in-group-layout-2fFqi7pOaJ","class","btn p-4 border-slate-300 dark:border-darkmode-400 relative mr-3 mt-3 user-select-none","style","width: 55px; height: 30px",3,"ngClass","click",4,"ngFor","ngForOf"],["class","p-1 mr-5 rounded-md",3,"ngClass",4,"ngIf"],[1,"p-1","mr-5","rounded-md",3,"ngClass"],["azt-track-service","take-test-in-group-layout-Go4BLT6di",1,"cursor-pointer",3,"click","id"],[1,"flex","items-center","transition-3",3,"ngClass"],[1,"azt-progress-circle"],[1,"azt-progress-value","text-xs","font-medium"],[1,"ml-2","whitespace-nowrap"],[1,"font-medium","uppercase"],[1,"text-upercase","text-xs"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ",1,"btn","btn-outline-primary","mr-3",3,"click"],["name","move-left","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj",1,"btn","btn-outline-primary",3,"click"],["name","move-right","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_",1,"btn","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-2fFqi7pOaJ",1,"btn","p-4","border-slate-300","dark:border-darkmode-400","relative","mr-3","mt-3","user-select-none",2,"width","55px","height","30px",3,"click","ngClass"],["class","absolute absolute-center",4,"ngIf"],[1,"absolute","absolute-center"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"ng-scrollbar",5,0)(6,"div",6),e.DNE(7,zE,2,1,"ng-container",7),e.k0s()()()(),e.j41(8,"div",8)(9,"button",9),e.bIt("click",function(){return e.eBV(a),e.Njj(o.toggleShowListQuestionInGroupEvent.emit())}),e.nrm(10,"lucide-icon",10),e.k0s(),e.DNE(11,ME,6,7,"button",11)(12,DE,6,7,"button",12)(13,GE,4,5,"button",13),e.k0s()(),e.j41(14,"div",14)(15,"ng-scrollbar",5,0)(17,"div",15),e.DNE(18,VE,3,6,"button",16),e.k0s()()()()}2&s&&(e.R7$(4),e.Y8G("visibility","always"),e.R7$(3),e.Y8G("ngForOf",o.currentTakeTestStepData.viewQuestionInGroupList),e.R7$(3),e.Y8G("ngClass",e.lJ4(8,EE)),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup-1]),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup+1]),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup+1]),e.R7$(2),e.Y8G("visibility","always"),e.R7$(3),e.Y8G("ngForOf",null==o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup]?null:o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].questionList))},dependencies:[v.MD,v.YU,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,U.Yh,q.k],styles:[".border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{height:60px;max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:calc(100vw - 600px);height:64px}  .dark .azt-progress-value{background-color:#28334e}"]}),n})();const BE=i=>({"sheet-screen-monitor":i}),$E=(i,n)=>({"col-span-1":i,"col-span-2":n}),QE=i=>({background:i}),qE=(i,n)=>({"btn-primary-soft":i,"btn-outline-secondary":n});function YE(i,n){if(1&i&&(e.j41(0,"div",5),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG().index;e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_nhom")+" "+(t+1))}}function UE(i,n){1&i&&(e.j41(0,"span",10),e.EFF(1,"*"),e.k0s())}function XE(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"button",7),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.layoutType==a.allTakeTestLayouts.LIST_QUESTION?a.sAztTestNextBackQuestionService.scrollTo(o):a.sAztTestNextBackQuestionService.goTo(a.currentTakeTestStepData,o))}),e.j41(3,"span",8),e.EFF(4),e.nI1(5,"examDisplayNumber"),e.DNE(6,UE,2,0,"span",9),e.k0s()()(),e.bVm()}if(2&i){let t;const s=n.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.l_i(7,$E,!o.isMobileScreenSize&&o.layoutType==o.allTakeTestLayouts.STEP_QUESTION,o.isMobileScreenSize||o.layoutType!=o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(),e.Y8G("ngStyle",e.eq3(10,QE,s.status&&!s.finishedAnswering?"#faebd7":""))("ngClass",e.l_i(12,qE,s.status,!s.status)),e.R7$(2),e.SpI(" ",e.bMT(5,5,null!==(t=s.originalLabel)&&void 0!==t?t:(null!==(t=null!==(t=s.labelIndex)&&void 0!==t?t:s.startQuestionIndexWidthViewGroup)&&void 0!==t?t:0)+(null!==(t=o.currentTakeTestStepData.examObj.startQuestionIndex)&&void 0!==t?t:1))," "),e.R7$(2),e.Y8G("ngIf",o.layoutType==o.allTakeTestLayouts.STEP_QUESTION&&(null==o.currentTakeTestStepData.nextBackQuestionModel||null==o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj?null:o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)==s.id)}}function WE(i,n){if(1&i&&(e.j41(0,"div",0),e.DNE(1,YE,3,3,"div",2),e.j41(2,"div",3),e.DNE(3,XE,7,15,"ng-container",4),e.k0s()()),2&i){const t=n.$implicit,s=e.XpG();e.R7$(),e.Y8G("ngIf",s.currentTakeTestStepData.viewQuestionInGroupList.length>1),e.R7$(),e.Y8G("ngClass",e.eq3(3,BE,!s.isMobileScreenSize&&s.currentTakeTestStepData.isShowVideoMonitor)),e.R7$(),e.Y8G("ngForOf",t.questionList)}}let Rr=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.allTakeTestLayouts=$t}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-list-shortcut-question-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",requiredNextBackQuestionModel:"requiredNextBackQuestionModel",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",isMobileScreenSize:"isMobileScreenSize",layoutType:"layoutType"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:1,consts:[[1,"flex","flex-col","gap-2"],["class","flex flex-col gap-2",4,"ngFor","ngForOf"],["class","text-md font-medium",4,"ngIf"],[1,"grid","grid-cols-10","gap-2","sheet-screen",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"text-md","font-medium"],[3,"ngClass"],["azt-track-service","take-test-wdi0TAS3bgU",1,"btn","p-4","border-slate-300","dark:border-darkmode-400","relative","user-select-none","w-full","h-full",3,"click","ngStyle","ngClass"],[1,"absolute","absolute-center"],["class","relative","style","color: #ffa700; top: -7px",4,"ngIf"],[1,"relative",2,"color","#ffa700","top","-7px"]],template:function(s,o){1&s&&(e.j41(0,"div",0),e.DNE(1,WE,4,5,"div",1),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngForOf",o.currentTakeTestStepData.viewQuestionInGroupList))},dependencies:[v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,z.Em,U.Id,q.k],styles:[".absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}"]}),n})();const vf=()=>({"mr-2":!0}),u_=i=>({"btn-primary text-white":i}),HE=()=>({"mr-2 text-primary":!0}),JE=()=>({"mr-2 text-danger":!0});function KE(i,n){if(1&i&&e.nrm(0,"app-testbank-frontend-count-down-box",24),2&i){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function ZE(i,n){1&i&&(e.j41(0,"span",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_gioi_han")))}function e2(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.GROUP_QUESTION))}),e.nrm(1,"lucide-icon",27),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,u_,t.layoutType===t.allTakeTestLayouts.GROUP_QUESTION))}}function t2(i,n){if(1&i&&e.nrm(0,"app-coazt-list-shortcut-question-box",28),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",!0)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)}}function n2(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(2,"lucide-icon",30),e.j41(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}2&i&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,vf)),e.R7$(2),e.JRh(e.bMT(5,2,"lang_auto_dinh_kem_tu_luan")))}let yf=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.setQuestionInGroupEvent=new e.bkB,this.toggleShowListQuestionInGroupEvent=new e.bkB,this.prevIndexGroupEvent=new e.bkB,this.nextIndexGroupEvent=new e.bkB,this.submitExamEvent=new e.bkB,this.goToQuestionEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=$t,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(s=>!s?.groupInfo?.groupId)}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-simple-test-menu-bar"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",layoutType:"layoutType",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService"},outputs:{setQuestionInGroupEvent:"setQuestionInGroupEvent",toggleShowListQuestionInGroupEvent:"toggleShowListQuestionInGroupEvent",prevIndexGroupEvent:"prevIndexGroupEvent",nextIndexGroupEvent:"nextIndexGroupEvent",submitExamEvent:"submitExamEvent",goToQuestionEvent:"goToQuestionEvent",changeShowTypeEvent:"changeShowTypeEvent",openSubmitExamEvent:"openSubmitExamEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:35,vars:24,consts:[["unlimitedTimeTpl",""],["scrollbarRef",""],[1,"dropdown-menu","show","relative","mb-2"],[1,"dropdown-content"],[1,"p-1","flex","items-center"],[1,"inline-flex","border","whitespace-nowrap","border-slate-200","dark:border-darkmode-400","p-1","rounded-md","items-center","justify-center","mr-2"],["name","timer","size","20","strokeWidth","2",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],["azt-track-service","simple-test-menu-bar-lV1kU-823",1,"btn","btn-sm","btn-outline-secondary","mr-2",3,"click","ngClass"],["name","list","size","16"],["azt-track-service","simple-test-menu-bar-EvCVyvwQzF",1,"btn","btn-sm","btn-outline-secondary","mr-2",3,"click","ngClass"],["name","computer","size","16"],["azt-track-service","simple-test-menu-bar-8YbUT33pgv","class","btn btn-sm btn-outline-secondary",3,"ngClass","click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],[1,"p-0","-m-2"],[1,"height-200px"],["track","all","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-2"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],["azt-track-service","take-test-qCh4rHipyZ7",1,"dropdown-item","font-medium",2,"align-items","center",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[4,"ngIf"],["azt-track-service","take-test-Sv-5CQ5vRW_",1,"dropdown-item","font-medium",2,"align-items","center",3,"click"],["name","power","size","16",3,"ngClass"],[3,"totalSecond","useCountDown"],[1,"font-medium"],["azt-track-service","simple-test-menu-bar-8YbUT33pgv",1,"btn","btn-sm","btn-outline-secondary",3,"click","ngClass"],["name","layout-panel-left","size","16"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],["azt-track-service","take-test-Hl-nLDepRGa",1,"dropdown-item","font-medium",2,"align-items","center",3,"click"],["name","paperclip","size","16",3,"ngClass"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",2)(1,"ul",3)(2,"li",4)(3,"div",5),e.nrm(4,"lucide-icon",6),e.DNE(5,KE,1,2,"app-testbank-frontend-count-down-box",7)(6,ZE,3,3,"ng-template",null,0,e.C5r),e.k0s(),e.j41(8,"button",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.LIST_QUESTION))}),e.nrm(9,"lucide-icon",9),e.k0s(),e.j41(10,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.STEP_QUESTION))}),e.nrm(11,"lucide-icon",11),e.k0s(),e.DNE(12,e2,2,3,"button",12),e.k0s(),e.j41(13,"li"),e.nrm(14,"hr",13),e.k0s(),e.j41(15,"li",14)(16,"div",15)(17,"ng-scrollbar",16,1)(19,"div",17),e.DNE(20,t2,1,5,"app-coazt-list-shortcut-question-box",18),e.k0s()()()(),e.j41(21,"li"),e.nrm(22,"hr",13),e.k0s(),e.j41(23,"li")(24,"a",19),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())}),e.nrm(25,"lucide-icon",20),e.j41(26,"span"),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s()()(),e.DNE(29,n2,6,5,"li",21),e.j41(30,"li")(31,"a",22),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(32,"lucide-icon",23),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s()()()()}if(2&s){const a=e.sdS(7);e.R7$(4),e.Y8G("ngClass",e.lJ4(17,vf)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(3),e.Y8G("ngClass",e.eq3(18,u_,o.layoutType===o.allTakeTestLayouts.LIST_QUESTION)),e.R7$(2),e.Y8G("ngClass",e.eq3(20,u_,o.layoutType===o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(2),e.Y8G("ngIf",o.isAllQuestionInGroup),e.R7$(5),e.Y8G("visibility","always"),e.R7$(3),e.Y8G("ngIf",o.currentTakeTestStepData.nextBackQuestionModel),e.R7$(5),e.Y8G("ngClass",e.lJ4(22,HE)),e.R7$(2),e.JRh(e.bMT(28,13,"lang_auto_nop_bai")),e.R7$(2),e.Y8G("ngIf",o.currentTakeTestStepData.hasEssayQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(23,JE)),e.R7$(),e.SpI(" ",e.bMT(34,15,"lang_auto_thoat")," ")}},dependencies:[Cn,Rr,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,U.Yh,q.k],styles:[".border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.height-showListQuestion[_ngcontent-%COMP%]{height:calc(100vh - 180px)}.height-hiddenListQuestion[_ngcontent-%COMP%]{height:calc(100vh - 127px)}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:100vw;height:64px}.max-height-400px[_ngcontent-%COMP%]{max-height:400px}.height-200px[_ngcontent-%COMP%]{height:200px}.h-48px[_ngcontent-%COMP%]{height:48px}.p-0[_ngcontent-%COMP%]{padding:0}.-m-2[_ngcontent-%COMP%]{margin:-.5rem}  .dark .azt-progress-value{background-color:#28334e}"]}),n})();const s2=(i,n)=>({"rotate-180deg":i,"rotate-0":n}),i2=i=>({"text-primary":i});function o2(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"a",24),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG();return e.Njj(a.setQuestionInGroupEvent.emit(o))}),e.j41(2,"div",25)(3,"div",9)(4,"div",10),e.EFF(5),e.k0s()(),e.j41(6,"div",11)(7,"div",12),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"div",13),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()()}if(2&i){const t=n.$implicit,s=n.index,o=e.XpG();e.R7$(),e.FS9("id","azt_group_"+t.groupId),e.R7$(),e.Y8G("ngClass",e.eq3(13,i2,s===o.indexGroup)),e.R7$(),e.tcI("background: conic-gradient(#1e40afe6 ",t.totalCompletedQuestion/t.totalQuestion*100,"%, #e2e8f0 ",t.totalCompletedQuestion/t.totalQuestion*100,"%)"),e.R7$(2),e.SpI(" ",t.totalCompletedQuestion+"/"+t.totalQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(9,9,"lang_auto_nhom")+" "+(s+1)," "),e.R7$(3),e.SpI(" ",t.totalQuestion+" "+e.bMT(12,11,"lang_notice_question")," ")}}let a2=(()=>{var i;class n extends Z.H{nextIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1].groupId}`),this.nextIndexGroupEvent.emit())}prevIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1].groupId}`),this.prevIndexGroupEvent.emit())}constructor(){super(),this.setQuestionInGroupEvent=new e.bkB,this.toggleShowListQuestionInGroupEvent=new e.bkB,this.prevIndexGroupEvent=new e.bkB,this.nextIndexGroupEvent=new e.bkB,this.submitExamEvent=new e.bkB,this.goToQuestionEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=$t}ngOnInit(){}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-simple-test-footer-box-for-group-layout-mobile"]],viewQuery:function(s,o){if(1&s&&e.GBs(U.Yh,7),2&s){let a;e.mGM(a=e.lsd())&&(o.scrollable=a.first)}},inputs:{currentTakeTestStepData:"currentTakeTestStepData",indexGroup:"indexGroup",layoutType:"layoutType",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService"},outputs:{setQuestionInGroupEvent:"setQuestionInGroupEvent",toggleShowListQuestionInGroupEvent:"toggleShowListQuestionInGroupEvent",prevIndexGroupEvent:"prevIndexGroupEvent",nextIndexGroupEvent:"nextIndexGroupEvent",submitExamEvent:"submitExamEvent",goToQuestionEvent:"goToQuestionEvent",changeShowTypeEvent:"changeShowTypeEvent",openSubmitExamEvent:"openSubmitExamEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:22,consts:[["menuTrigger","matMenuTrigger"],["questionGroupListMenu","matMenu"],["actionMenu","matMenu"],[1,"box","fixed","w-full","bottom-0","left-0","rounded-none","border-t","border-slate-200","z-999"],[1,"flex","items-center"],[1,"p-2","mr-auto"],[1,"py-1","px-3","mr-5","rounded-md","bg-primary/10"],[1,"cursor-pointer",3,"id","matMenuTriggerFor"],[1,"flex","items-center","transition-3","text-primary"],[1,"azt-progress-circle"],[1,"azt-progress-value","text-xs","font-medium"],[1,"ml-2","whitespace-nowrap"],[1,"font-medium","uppercase"],[1,"text-upercase","text-xs"],[1,"ml-2","transition-3",3,"ngClass"],["name","chevron-down","size","20"],[1,"ml-3","pr-2"],[1,"btn","btn-outline-secondary","rounded-full","h-48px","w-48px",3,"matMenuTriggerFor"],["name","layout-grid","size","20"],["xPosition","before"],[1,"dropdown-menu","show","white-scroll","relative","w-64","mb-2"],[1,"dropdown-content","max-height-400px","overflow-auto","custom-scroll"],[4,"ngFor","ngForOf"],[3,"submitExamEvent","goToQuestionEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"],["azt-track-service","simple-test-footer-box-for-group-layout-mobile-ka0g-91UQ",1,"cursor-pointer","dropdown-item",3,"click","id"],[1,"flex","items-center","transition-3",3,"ngClass"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"a",7,0)(6,"div",8)(7,"div",9)(8,"div",10),e.EFF(9),e.k0s()(),e.j41(10,"div",11)(11,"div",12),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"div",13),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()(),e.j41(17,"div",14),e.nrm(18,"lucide-icon",15),e.k0s()()()()(),e.j41(19,"div",16)(20,"button",17),e.nrm(21,"lucide-icon",18),e.k0s()()()(),e.j41(22,"mat-menu",19,1)(24,"div",20)(25,"ul",21),e.DNE(26,o2,13,15,"li",22),e.k0s()()(),e.j41(27,"mat-menu",19,2)(29,"app-coazt-simple-test-menu-bar",23),e.bIt("submitExamEvent",function(){return e.eBV(a),e.Njj(o.submitExamEvent.emit())})("goToQuestionEvent",function(l){return e.eBV(a),e.Njj(o.goToQuestionEvent.emit(l))})("changeShowTypeEvent",function(l){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(l))})("openSubmitExamEvent",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())})("showUploadEssayFilesDialogEvent",function(){return e.eBV(a),e.Njj(o.showUploadEssayFilesDialogEvent.emit())})("openQuitDialogEvent",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.k0s()()}if(2&s){const a=e.sdS(5),r=e.sdS(23),l=e.sdS(28);e.R7$(4),e.FS9("id","azt_group_"+o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].groupId),e.Y8G("matMenuTriggerFor",r),e.R7$(3),e.tcI("background: conic-gradient(#1e40afe6 ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalCompletedQuestion/o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion*100,"%, #e2e8f0 ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalCompletedQuestion/o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion*100,"%)"),e.R7$(2),e.SpI(" ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalCompletedQuestion+"/"+o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(13,15,"lang_auto_nhom")+" "+(o.indexGroup+1)," "),e.R7$(3),e.SpI(" ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion+" "+e.bMT(16,17,"lang_notice_question")," "),e.R7$(2),e.Y8G("ngClass",e.l_i(19,s2,a.menuOpen,!a.menuOpen)),e.R7$(3),e.Y8G("matMenuTriggerFor",l),e.R7$(6),e.Y8G("ngForOf",o.currentTakeTestStepData.viewQuestionInGroupList),e.R7$(3),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData)("layoutType",o.allTakeTestLayouts.GROUP_QUESTION)("sAztTestNextBackQuestionService",o.sAztTestNextBackQuestionService)}},dependencies:[yf,v.MD,v.YU,v.Sq,g.X1,L.iI,g.YN,z.wp,Y.s,yn.kk,yn.Cp,F.flO,F.WGl,H.L,U.Id,q.k],styles:[".border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.h-55px[_ngcontent-%COMP%]{height:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:100vw;height:64px}.max-height-400px[_ngcontent-%COMP%]{max-height:400px}.h-48px[_ngcontent-%COMP%]{height:48px}.w-48px[_ngcontent-%COMP%]{width:48px}  .dark .azt-progress-value{background-color:#28334e}.rotate-180deg[_ngcontent-%COMP%]{transform:rotate(-180deg)}.rotate-0[_ngcontent-%COMP%]{transform:rotate(0)}"]}),n})();var Vo=A(2460),r2=A(83186),Sf=A(86020);const l2=i=>({"selected-answer border-selected-answer":i}),c2=(i,n,t,s)=>({"border-radius":i,width:n,height:t,"line-height:":s}),u2=i=>({"border-selected-answer":i}),_2=i=>({"pb-2":i}),d2=(i,n)=>({"border-selected-answer":i,"w-full":n}),wf=(i,n,t)=>({"border-radius":"50%",width:i,height:n,"line-height:":t}),If=i=>({"border-selected-answer selected-answer":i}),m2=i=>({"list-answer-mobile":i}),p2=()=>({"mr-1":!0});function h2(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_please_select_one_correct_answer")," "))}function f2(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_please_select_corrects_answer")," "))}function g2(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",11)(1,"div",12),e.bIt("click",function(){const o=e.eBV(t),a=o.$implicit,r=o.index,l=e.XpG(2);return e.Njj(l.setOneChoiceAnswer(a,r,a.alpha,a.key))}),e.j41(2,"button",13),e.nI1(3,"isOneChoiceAnswer"),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isOneChoiceAnswer"),e.nI1(6,"isOneChoiceAnswer"),e.EFF(7),e.k0s(),e.j41(8,"div",14),e.nrm(9,"azt-dynamic-hook",15),e.k0s()()()}if(2&i){const t=n.$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.eq3(13,l2,t.checked))("ngStyle",e.ziG(15,c2,e.bMT(3,5,s.question)?"50%":"none",e.bMT(4,7,s.question)&&s.fontSize>1.6?s.fontSize+"em":"40px",e.bMT(5,9,s.question)&&s.fontSize>1.6?s.fontSize+"em":"40px",e.bMT(6,11,s.question)&&s.fontSize>1.6?s.fontSize+"em":"40px")),e.R7$(5),e.SpI(" ",t.alpha?t.alpha:t.key," "),e.R7$(),e.Y8G("ngClass",e.eq3(20,u2,t.checked)),e.R7$(),e.Y8G("content",t.content)}}function T2(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",6)(2,"span",7),e.DNE(3,h2,3,3,"span",5),e.nI1(4,"isOneChoiceAnswer"),e.DNE(5,f2,3,3,"span",5),e.nI1(6,"isMultipleChoiceAnswer"),e.k0s()(),e.j41(7,"div",null,0)(9,"div",8)(10,"div",9),e.DNE(11,g2,10,22,"div",10),e.k0s()()(),e.bVm()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",e.bMT(4,7,t.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,9,t.question)),e.R7$(5),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize<1.5?t.fontSize+.5:"1.7"),e.R7$(),e.Y8G("ngForOf",t.question.answers)}}function b2(i,n){1&i&&(e.j41(0,"div",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function x2(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",18),e.DNE(1,b2,3,3,"div",19),e.j41(2,"div",20,2)(4,"div",14)(5,"span",21),e.EFF(6),e.k0s(),e.nrm(7,"azt-dynamic-hook",15),e.k0s(),e.j41(8,"button",22),e.bIt("click",function(){const o=e.eBV(t),a=o.$implicit,r=o.index,l=e.XpG(2);return e.Njj(l.setTrueFalseAnswer(a,r,a.alpha,a.key,"T"))}),e.j41(9,"span",23),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()(),e.j41(12,"button",24),e.bIt("click",function(){const o=e.eBV(t),a=o.$implicit,r=o.index,l=e.XpG(2);return e.Njj(l.setTrueFalseAnswer(a,r,a.alpha,a.key,"F"))}),e.j41(13,"span",23),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()()}if(2&i){const t=n.$implicit,s=e.sdS(3);e.XpG();const o=e.sdS(7),a=e.XpG();e.R7$(),e.Y8G("ngIf",o.offsetWidth<s.offsetWidth),e.R7$(),e.Y8G("ngClass",e.eq3(15,_2,o.offsetWidth<s.offsetWidth)),e.R7$(2),e.Y8G("ngClass",e.l_i(17,d2,null!=t.checked,a.isMobileDevice)),e.R7$(2),e.JRh((t.alpha?t.alpha:t.key).toLowerCase()+") "),e.R7$(),e.Y8G("content",t.content),e.R7$(),e.Y8G("ngStyle",e.sMw(20,wf,a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px"))("ngClass",e.eq3(24,If,null!=t.checked&&1==t.checked)),e.R7$(2),e.JRh(e.bMT(11,11,"lang_auto_dung")),e.R7$(2),e.Y8G("ngStyle",e.sMw(26,wf,a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px"))("ngClass",e.eq3(30,If,null!=t.checked&&0==t.checked)),e.R7$(2),e.JRh(e.bMT(15,13,"lang_auto_sai"))}}function v2(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",6)(2,"span",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",16)(6,"div",9,1),e.DNE(8,x2,16,32,"div",17),e.k0s()(),e.bVm()),2&i){const t=e.XpG();e.R7$(3),e.SpI(" ",e.bMT(4,6,"lang_core_please_select_answer_true_or_false")," "),e.R7$(3),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize<1.5?t.fontSize+.5:"1.7"),e.R7$(2),e.Y8G("ngForOf",t.question.answers)}}function y2(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",26)(2,"div",6)(3,"span",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",27)(7,"div",28)(8,"textarea",29,3),e.nI1(10,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(9),a=e.XpG();return e.Njj(a.setFillAnswer(o.value))}),e.k0s(),e.j41(11,"span",30),e.nrm(12,"lucide-icon",31),e.j41(13,"span",32),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(14,m2,t.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,8,"lang_auto_nhap_dap_an")),e.R7$(4),e.FS9("placeholder",e.bMT(10,10,"lang_auto_dap_an_cua_ban")),e.Y8G("value",t.question.essayText),e.BMQ("isImage",!1)("question_id",t.question.id),e.R7$(4),e.Y8G("ngClass",e.lJ4(16,p2)),e.R7$(2),e.JRh(e.bMT(15,12,"lang_fill_question_note"))}}function S2(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",33)(2,"div",6)(3,"span",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",28)(7,"textarea",29,4),e.nI1(9,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(8),a=e.XpG();return e.Njj(a.setEssayAnswer(o.value))}),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,5,"lang_auto_bai_lam")),e.R7$(3),e.FS9("placeholder",e.bMT(9,7,"lang_auto_bai_lam_cua_ban")),e.Y8G("value",t.question.essayText),e.BMQ("isImage",!1)("question_id",t.question.id)}}let Cf=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.fontSize=1,this.setResultTracking=new e.bkB,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.configRenderService=new Sf.y}setOneChoiceAnswer(s,o,a,r){if(!r&&!a)return;let l=[this.questionIndex.toString(),a??"",r??"",this.question.id.toString()];this.setResultTracking.emit(l),this.setOneChoiceAnswerEmitter.emit({questionId:this.question.id,answerConfig:s,answerIndex:o})}setTrueFalseAnswer(s,o,a,r,l){if(l===s.status)return;s.status=l,a&&(a+="-"+l),r&&(r+="-"+l);let c=[this.questionIndex.toString(),a??"",r??"",this.question.id.toString()];this.setResultTracking.emit(c),this.setTrueFalseAnswerEmitter.emit({questionId:this.question.id,answerConfig:s,answerIndex:o})}setFillAnswer(s){this.setFillAnswerEmitter.emit({questionId:this.question.id,value:s})}setEssayAnswer(s){this.setEssayAnswerEmitter.emit({questionId:this.question.id,value:s})}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-answer-view-for-student-at-step-page"]],inputs:{question:"question",questionIndex:"questionIndex",fontSize:"fontSize"},outputs:{setResultTracking:"setResultTracking",setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:9,vars:14,consts:[["lisAnswerGroup",""],["answerGroup",""],["answer",""],["curEssayFillInput",""],["curEssayAnswerInput",""],[4,"ngIf"],[1,"strike"],[1,"font-medium","text-slate-600","dark:text-slate-500"],[1,"p-3",2,"overflow","auto"],[1,"list-answer"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"item-answer","inline-flex","items-center","cursor-pointer","hover-border-primary",3,"click"],[1,"btn","border-slate-400","mr-3",3,"ngClass","ngStyle"],[1,"answer-content","p-2","border","border-slate-400","dark:border-darkmode-400","rounded-md",3,"ngClass"],[3,"content"],[1,"p-3"],["class","overflow-auto",4,"ngFor","ngForOf"],[1,"overflow-auto"],["class","mt-2 text-danger",4,"ngIf"],[1,"item-answer","flex","items-center","mt-2","cursor-pointer","hover-border-primary",2,"width","fit-content","min-width","100%",3,"ngClass"],[1,"font-medium"],[1,"btn","border-slate-400","nohover","rounded-full","ml-2","mr-2",3,"click","ngStyle","ngClass"],[1,"text-xs"],[1,"btn","border-slate-400","nohover","rounded-full",3,"click","ngStyle","ngClass"],[1,"mt-2","text-danger"],[1,"azt-answer",3,"ngClass"],[1,"flex","items-center","justify-between","w-full"],[1,"azt-answer-content","p-3","w-full"],["autoResize","",1,"w-full","form-control",3,"input","placeholder","value"],[1,"text-slate-400","text-xs","mt-1",2,"align-content","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle","align-content","center"],[1,"azt-answer"]],template:function(s,o){1&s&&(e.DNE(0,T2,12,11,"ng-container",5),e.nI1(1,"isOneChoiceAnswer"),e.nI1(2,"isMultipleChoiceAnswer"),e.DNE(3,v2,9,8,"ng-container",5),e.nI1(4,"isTrueFalseAnswer"),e.DNE(5,y2,16,17,"ng-container",5),e.nI1(6,"isFillAnswer"),e.DNE(7,S2,10,9,"ng-container",5),e.nI1(8,"isEssayAnswer")),2&s&&(e.Y8G("ngIf",e.bMT(1,4,o.question)||e.bMT(2,6,o.question)),e.R7$(3),e.Y8G("ngIf",e.bMT(4,8,o.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,10,o.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,12,o.question)))},dependencies:[Go.x,v.MD,v.YU,v.Sq,v.bT,v.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,z.V6,z.nn,z.Zm,z.N3,z.FC,U.Id,q.k,Yu.j],encapsulation:2}),n})();class w2{constructor(){this.isDestroy=!1}}const I2=i=>({"skeleton-box-loading":i}),C2=i=>({"pb-2":i}),k2=i=>({"remove-grid":i}),E2=i=>({"pr-7":i}),A2=i=>({"mt-4":i}),O2=i=>({"w-100":i});function R2(i,n){if(1&i&&e.nrm(0,"div",7),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,I2,t.isFirstRender))}}function F2(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-test-audio-ui",16),e.bIt("sendAudioEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioEmit.emit(o))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("questionObj",t.question)("isShowList",!0)("totalLimit",((null==t.examObj?null:t.examObj.limitAudio)||-1)>0?(null==t.examObj?null:t.examObj.limitAudio)||-1:0)}}function j2(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("(",e.bMT(2,1,"lang_auto_hoi_de_thi_offline"),")"))}function z2(i,n){if(1&i&&(e.j41(0,"div",17),e.EFF(1),e.DNE(2,j2,3,3,"span",15),e.nI1(3,"isOfflineExam"),e.k0s()),2&i){let t;const s=e.XpG(2);e.R7$(),e.SpI(" ",s.customQuestionLabel+" "+(null!==(t=s.question.originalLabel)&&void 0!==t?t:(void 0!==s.question.labelIndex?s.question.labelIndex:s.index)+(null!==(t=s.startQuestionIndex)&&void 0!==t?t:1))," "),e.R7$(),e.Y8G("ngIf",e.bMT(3,2,s.examObj))}}function M2(i,n){if(1&i&&(e.j41(0,"div",22)(1,"b",23),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.j41(4,"div",24),e.nrm(5,"azt-dynamic-hook",18),e.k0s()()),2&i){let t;const s=n.$implicit,o=e.XpG(4);e.R7$(),e.Y8G("ngClass",e.eq3(5,E2,o.fontSize>1.5)),e.R7$(),e.JRh(e.bMT(3,3,o.question)?(null!==(t=s.alpha)&&void 0!==t?t:s.key).toLowerCase()+")":(null!==(t=s.alpha)&&void 0!==t?t:s.key)+"."),e.R7$(3),e.Y8G("content",s.content)}}function D2(i,n){if(1&i&&(e.j41(0,"div",20),e.DNE(1,M2,6,7,"div",21),e.k0s()),2&i){const t=e.XpG(3);e.Y8G("ngClass",e.eq3(3,k2,t.fontSize>1.5))("answerSizeManager",t.answerSizeManager),e.R7$(),e.Y8G("ngForOf",t.question.answers)}}function G2(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",8),e.nrm(2,"azt-dynamic-hook",18),e.k0s(),e.DNE(3,D2,2,5,"div",19),e.nI1(4,"isTrueFalseAnswer"),e.nI1(5,"isOneChoiceAnswer"),e.bVm()),2&i){let t;const s=e.XpG(2);e.R7$(2),e.Y8G("content",null!==(t=s.question.content)&&void 0!==t?t:""),e.R7$(),e.Y8G("ngIf",(e.bMT(4,2,s.question)||e.bMT(5,4,s.question))&&s.question.answers&&s.question.answers.length>0&&s.overTime)}}function P2(i,n){if(1&i&&(e.j41(0,"div",8)(1,"div",9),e.eu8(2,10),e.j41(3,"div",11),e.DNE(4,F2,1,3,"azt-test-audio-ui",12),e.j41(5,"div",13),e.DNE(6,z2,4,4,"div",14),e.k0s(),e.DNE(7,G2,6,6,"ng-container",15),e.nI1(8,"isOfflineExam"),e.k0s()(),e.eu8(9,10),e.k0s()),2&i){const t=e.XpG(),s=e.sdS(5),o=e.sdS(7),a=e.sdS(9);e.R7$(),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize<1.5?t.fontSize+.5:"1.7"),e.Y8G("id","question_render_container_"+t.question.id)("ngClass",e.eq3(13,C2,t.question.attachments.length>0)),e.R7$(),e.Y8G("ngTemplateOutlet",s),e.R7$(2),e.Y8G("ngIf",t.question.attachments.length>0),e.R7$(2),e.Y8G("ngIf",!t.hideQuestionLabel),e.R7$(),e.Y8G("ngIf",!e.bMT(8,11,t.examObj)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.overTime?a:o)}}function N2(i,n){if(1&i&&(e.j41(0,"div",26),e.nrm(1,"azt-dynamic-hook",18),e.k0s()),2&i){let t;const s=e.XpG(3);e.Y8G("ngClass",e.eq3(2,A2,s.isMobile)),e.R7$(),e.Y8G("content",null!==(t=null==s.question.groupInfo?null:s.question.groupInfo.groupContent)&&void 0!==t?t:"")}}function V2(i,n){if(1&i&&(e.qex(0),e.DNE(1,N2,2,4,"div",25),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.question.groupInfo?null:t.question.groupInfo.isFirstInGroup)}}function L2(i,n){if(1&i&&e.DNE(0,V2,2,1,"ng-container",15),2&i){const t=e.XpG();e.Y8G("ngIf",!(null!=t.examObj&&t.examObj.hideGroupQuestion)||(null==t.question?null:t.question.isRoleTeacher))}}function B2(i,n){if(1&i&&e.eu8(0,10),2&i){e.XpG();const t=e.sdS(3);e.Y8G("ngTemplateOutlet",t)}}function $2(i,n){if(1&i&&(e.j41(0,"div",29),e.eu8(1,10),e.k0s()),2&i){e.XpG();const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Q2(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-question-answer-view-for-student-at-step-page",30),e.bIt("setResultTracking",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setResultTracking.emit(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setEssayAnswerEmitter.emit(o))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("question",t.question)("questionIndex",t.index)("fontSize",t.fontSize)}}function q2(i,n){if(1&i&&e.DNE(0,B2,1,1,"ng-container",27)(1,$2,2,1,"div",28)(2,Q2,1,3,"ng-template",null,4,e.C5r),2&i){const t=e.XpG();e.Y8G("ngIf",t.takeTestLayout==t.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",t.takeTestLayout!=t.allTakeTestLayouts.LIST_QUESTION)}}function Y2(i,n){if(1&i&&(e.j41(0,"span",36),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.question.choseAnswer," ")}}function U2(i,n){1&i&&(e.j41(0,"span")(1,"b",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_chua_tra_loi")))}function X2(i,n){if(1&i&&(e.j41(0,"div",33)(1,"p",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Y2,2,1,"span",35)(5,U2,4,3,"span",15),e.k0s()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_dap_an_cua_ban"),":"),e.R7$(2),e.Y8G("ngIf",t.question.choseAnswer&&t.question.choseAnswer.length&&""!=t.question.choseAnswer[0]),e.R7$(),e.Y8G("ngIf",!t.question.choseAnswer||!t.question.choseAnswer.length||""==t.question.choseAnswer[0])}}function W2(i,n){if(1&i&&(e.j41(0,"span",39)(1,"b",40),e.EFF(2),e.k0s(),e.j41(3,"b",41),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&i){const t=n.$implicit;e.R7$(2),e.JRh((t.alpha?t.alpha:t.key).toLowerCase()+") - "),e.R7$(2),e.JRh(e.bMT(5,2,t.checked?"lang_auto_dung":"lang_auto_sai"))}}function H2(i,n){if(1&i&&(e.qex(0),e.DNE(1,W2,6,4,"span",38),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.question.answers)}}function J2(i,n){1&i&&(e.j41(0,"span")(1,"b",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_chua_tra_loi")))}function K2(i,n){if(1&i&&(e.j41(0,"div",33)(1,"p",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,H2,2,1,"ng-container",15)(5,J2,4,3,"span",15),e.k0s()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_dap_an_cua_ban"),":"),e.R7$(2),e.Y8G("ngIf",t.hasAnswerChecking()),e.R7$(),e.Y8G("ngIf",!t.hasAnswerChecking())}}function Z2(i,n){if(1&i&&e.nrm(0,"textarea",45),2&i){const t=e.XpG(3);e.Y8G("value",t.question.choseAnswer),e.BMQ("question_id",t.question.id)}}function eA(i,n){if(1&i&&(e.nrm(0,"textarea",45),e.nI1(1,"mytranslate")),2&i){const t=e.XpG(3);e.Y8G("value",e.bMT(1,2,"lang_auto_thi_sinh_chua_nhap_thong_tin")),e.BMQ("question_id",t.question.id)}}function tA(i,n){if(1&i&&(e.j41(0,"div",33)(1,"p",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",42)(5,"div",43),e.DNE(6,Z2,1,2,"textarea",44)(7,eA,2,4,"textarea",44),e.k0s()()()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,4,"lang_auto_dap_an_cua_ban"),":"),e.R7$(2),e.Y8G("ngClass",e.eq3(6,O2,t.isMobile)),e.R7$(2),e.Y8G("ngIf",t.question.choseAnswer&&t.question.choseAnswer.length&&""!=t.question.choseAnswer[0]),e.R7$(),e.Y8G("ngIf",!t.question.choseAnswer||!t.question.choseAnswer.length||""==t.question.choseAnswer[0])}}function nA(i,n){if(1&i&&(e.j41(0,"div",31),e.DNE(1,X2,6,5,"div",32),e.nI1(2,"isOneChoiceAnswer"),e.DNE(3,K2,6,5,"div",32),e.nI1(4,"isTrueFalseAnswer"),e.DNE(5,tA,8,8,"div",32),e.nI1(6,"isEssayAnswer"),e.nI1(7,"isFillAnswer"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,3,t.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,5,t.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,7,t.question)||e.bMT(7,9,t.question))}}let Fr=(()=>{var i;class n extends Z.H{startRenderQuestion(){!this.question||this.disableRender||this.flagObjectComponent.isDestroy?this.disableRender&&!this.flagObjectComponent.isDestroy&&this.doneRender.emit():this.questionRenderService.parseRenderQuestion(this.question,this.configRenderService).then(()=>{this.flagObjectComponent.isDestroy||this.doneRender.emit()}).catch(s=>{this.flagObjectComponent.isDestroy||this.showErrorSnack(s.message)})}get customQuestionLabel(){return(this.commonService.castJsonToObj(this.expandInfo??"{}")??{}).label??"C\xe2u"}hasAnswerChecking(){return null!=this.question.answers.filter(s=>1==s.checked)}ngOnChanges(){this.fontSize&&(this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg"),this.startRenderQuestion())}ngDoCheck(){if(this.isRenderElement)return;const s=document.getElementById("question_render_element_"+this.question.id);s&&(this.disableLazy||s.getAttribute("start_loading")&&"true"==s.getAttribute("start_loading"))&&(this.isRenderElement||(this.isFirstRender&&(this.startRenderQuestion(),this.follower.doneItemPartQuest()),this.isFirstRender=!1,this.isRenderElement=!0))}ngOnInit(){super.ngOnInit(),this.backToLink=`/test/answer-test/${this.configExam?.tenantId??0}/${this.configExam?.categoryId??0}/${this.configExam?.hashId}/${this.curResultId}`,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg"),this.flagObjectComponent.isDestroy=!1}ngOnDestroy(){this.flagObjectComponent.isDestroy=!0,super.ngOnDestroy()}constructor(s){super(),this.questionRenderService=s,this.follower=new Dn.e,this.mathJaxImage=!1,this.disableLazy=!1,this.disableRender=!1,this.index=0,this.last=!1,this.hideQuestionLabel=!1,this.answerSizeManager=0,this.fontSize=1,this.orgExamObjs=[],this.isMobile=!1,this.overTime=!1,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.sendAudioEmit=new e.bkB,this.setResultTracking=new e.bkB,this.nextQuestionEmitter=new e.bkB,this.prevQuestionEmitter=new e.bkB,this.doneRender=new e.bkB,this.allTakeTestLayouts=$t,this.isFirstRender=!0,this.isRenderElement=!1,this.flagObjectComponent=new w2,this.backToLink="",this.configRenderService=new Sf.y}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Ju.g))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-standalone-for-student-at-full-test"]],inputs:{follower:"follower",mathJaxImage:"mathJaxImage",disableLazy:"disableLazy",disableRender:"disableRender",curResultId:"curResultId",index:"index",last:"last",questionListLength:"questionListLength",configExam:"configExam",expandInfo:"expandInfo",question:"question",hideQuestionLabel:"hideQuestionLabel",answerSizeManager:"answerSizeManager",fontSize:"fontSize",orgExamObjs:"orgExamObjs",startQuestionIndex:"startQuestionIndex",isMobile:"isMobile",takeTestLayout:"takeTestLayout",overTime:"overTime",examObj:"examObj"},outputs:{setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",sendAudioEmit:"sendAudioEmit",setResultTracking:"setResultTracking",nextQuestionEmitter:"nextQuestionEmitter",prevQuestionEmitter:"prevQuestionEmitter",doneRender:"doneRender"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:10,vars:3,consts:[["elementRended",""],["showQuestionGroupContent",""],["normalShowTpl",""],["overTimeTpl",""],["viewQuestionAnswerBox",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","mb-0","no-border-question","border-slate-200/60","dark:border-darkmode-400",3,"id","ngClass"],[3,"ngTemplateOutlet"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList","totalLimit","sendAudioEmitter",4,"ngIf"],[1,"flex","items-center","justify-between"],["class","question-standalone-label",4,"ngIf"],[4,"ngIf"],[3,"sendAudioEmitter","questionObj","isShowList","totalLimit"],[1,"question-standalone-label"],[3,"content"],["class","row answers",3,"ngClass","answerSizeManager",4,"ngIf"],[1,"row","answers",3,"ngClass","answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label",3,"ngClass"],[1,"answer-content"],["class","group-content-of-question-standalone",3,"ngClass",4,"ngIf"],[1,"group-content-of-question-standalone",3,"ngClass"],[3,"ngTemplateOutlet",4,"ngIf"],["class","ml-auto mr-auto w-full",4,"ngIf"],[1,"ml-auto","mr-auto","w-full"],[3,"setResultTracking","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","question","questionIndex","fontSize"],[1,"answer-box","ml-auto","mr-auto"],["class","answer-content-front",4,"ngIf"],[1,"answer-content-front"],[1,"h5","mb-0","mr-2",2,"align-self","center"],["class","answer-review","style","background-color: rgba(243, 156, 18, 1); color: rgb(255, 255, 255)",4,"ngIf"],[1,"answer-review",2,"background-color","rgba(243, 156, 18, 1)","color","rgb(255, 255, 255)"],[2,"color","#cd1324","font-weight","450"],["class","mr-2",4,"ngFor","ngForOf"],[1,"mr-2"],[2,"font-weight","450"],[1,"text-warning",2,"font-weight","450"],[1,"row",2,"width","80%",3,"ngClass"],[1,"col-sm-12","mb-1"],["autoResize","","class","form-control mt-1","readonly","",3,"value",4,"ngIf"],["autoResize","","readonly","",1,"form-control","mt-1",3,"value"]],template:function(s,o){if(1&s&&(e.j41(0,"div",5),e.DNE(1,R2,1,3,"div",6)(2,P2,10,15,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,L2,1,1,"ng-template",null,1,e.C5r)(6,q2,4,2,"ng-template",null,2,e.C5r)(8,nA,8,11,"ng-template",null,3,e.C5r)),2&s){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.question.id),e.R7$(),e.Y8G("ngIf",!o.isRenderElement)("ngIfElse",a)}},dependencies:[r2.C,yr.c,Go.x,Cf,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,z.st,z.V6,z.Zm,z.N3,z.FC,U.Id,q.k,Yu.j,Sr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var jr=A(51602);const kf=i=>({nodeObjs:i}),sA=i=>({"margin-left":i}),iA=i=>({"font-bold clickable":i}),oA=()=>({"text-pending":!0}),aA=(i,n)=>({"text-danger":i,"text-slate-500":n});function rA(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",4),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function lA(i,n){if(1&i&&(e.j41(0,"div",17)(1,"div",18),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,1,t.errorMessage))}}function cA(i,n){1&i&&e.eu8(0)}function uA(i,n){if(1&i&&(e.qex(0),e.DNE(1,cA,1,0,"ng-container",19),e.bVm()),2&i){const t=e.XpG(2),s=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(2,kf,t.combineExamCapacity))}}function _A(i,n){1&i&&e.nrm(0,"azt-loading-ui",20)}function dA(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",5)(1,"h3",6),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"h3",7),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"h3",8),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.DNE(12,lA,4,3,"div",9),e.j41(13,"div",10)(14,"div",11),e.DNE(15,uA,2,4,"ng-container",12),e.k0s()(),e.j41(16,"div",13)(17,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.j41(20,"button",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmSelected())}),e.DNE(21,_A,1,0,"azt-loading-ui",16),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,11,"lang_auto_only_de_thi"),": ",e.bMT(4,13,null==t.capacityObj?null:t.capacityObj.name),""),e.R7$(4),e.Lme("",e.bMT(7,15,"lang_cms_publish_test_exam")," ",e.bMT(8,17,null==t.capacityObj?null:t.capacityObj.hashId),""),e.R7$(4),e.JRh(e.bMT(11,19,"lang_capacity_selected_exam")),e.R7$(2),e.Y8G("ngIf",t.errorMessage),e.R7$(3),e.Y8G("ngIf",t.combineExamCapacity.length),e.R7$(3),e.SpI(" ",e.bMT(19,21,"lang_auto_quay_lai")," "),e.R7$(2),e.Y8G("disabled",t.statusObj.loading||t.isInValidSubmitSave()),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(23,23,"lang_button_confirm")," ")}}function mA(i,n){if(1&i){const t=e.RV6();e.j41(0,"span")(1,"input",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.selectedFolder(o))})("change",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.checkValidationErrorAgain())}),e.k0s()()}if(2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("formControl",t.isSelectedFormControl)}}function pA(i,n){1&i&&e.nrm(0,"span",30)}function hA(i,n){1&i&&e.nrm(0,"azt-svg-icon",33),2&i&&e.Y8G("size",20)}function fA(i,n){if(1&i){const t=e.RV6();e.j41(0,"i",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.selectedFolder(o))}),e.DNE(1,hA,1,1,"azt-svg-icon",32),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf","FOLDER"==t.data.objectType)}}function gA(i,n){1&i&&e.nrm(0,"lucide-icon",34),2&i&&e.Y8G("ngClass",e.lJ4(1,oA))}function TA(i,n){if(1&i&&(e.j41(0,"span",35),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngClass",e.l_i(13,aA,t.hasError,!t.hasError)),e.R7$(),e.ZXR(" (",e.bMT(2,7,"lang_cms_auto_gen_test_select")," ",t.totalPart," ",e.bMT(3,9,"lang_azt_in")," ",t.children.length," - ",e.bMT(4,11,"lang_auto_da_chon"),": ",s.countSelectedPart(t),") ")}}function bA(i,n){1&i&&e.eu8(0)}function xA(i,n){if(1&i&&(e.qex(0),e.DNE(1,bA,1,0,"ng-container",19),e.bVm()),2&i){const t=e.XpG().$implicit;e.XpG(2);const s=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(2,kf,t.children))}}function vA(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",22)(2,"div",23),e.DNE(3,mA,2,1,"span",12)(4,pA,1,0,"span",24)(5,fA,2,1,"i",25)(6,gA,1,2,"lucide-icon",26),e.j41(7,"p",27),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj("FOLDER"==o.data.objectType?a.selectedFolder(o):null)}),e.EFF(8),e.DNE(9,TA,5,16,"span",28),e.k0s()(),e.DNE(10,xA,2,4,"ng-container",12),e.k0s(),e.bVm()}if(2&i){const t=n.$implicit;e.R7$(2),e.Y8G("ngStyle",e.eq3(9,sA,15*t.level+"px")),e.R7$(),e.Y8G("ngIf",t.showCheckbox),e.R7$(),e.Y8G("ngIf",!t.showCheckbox),e.R7$(),e.Y8G("ngIf","FOLDER"==t.data.objectType),e.R7$(),e.Y8G("ngIf","EXAM"==t.data.objectType),e.R7$(),e.Y8G("ngClass",e.eq3(11,iA,"FOLDER"==t.data.objectType)),e.R7$(),e.SpI(" ",t.text," "),e.R7$(),e.Y8G("ngIf",t.showSelectCount&&t.isExpand),e.R7$(),e.Y8G("ngIf",t.isExpand&&t.children.length)}}function yA(i,n){if(1&i&&e.DNE(0,vA,11,13,"ng-container",21),2&i){const t=n.nodeObjs,s=e.XpG();e.Y8G("ngForOf",s.asTemplateDataObj(t))}}let __=(()=>{var i;class n extends mf.C{confirmSelected(){this.initStatusObj();let s=this.getListSelectedExam(this.combineExamCapacity,[]);this.waitDestroy(this.frontExamService.apiFrontExamSaveTestCapacityExamComponentHashIdPost(this.hashId,{examHashIds:s}).subscribe(o=>{o.success||this.forceShowErrorBox(o.message,!0),this.selectCapacityExamEmitter.emit(!0)}))}countSelectedPart(s){return s.children.filter(o=>o.isSelectedFormControl.value).length}goBack(){let s=this.commonService.getMyQueryParam("backto")??"";this.commonService.myNavigationWithQueryString("/de-thi/"+this.capacityObj?.hashId,"?backto="+encodeURIComponent(s))}selectedFolder(s){"EXAM"!=s.data.objectType&&(s.isExpand=!s.isExpand,s.isExpand||(s.hasError=!1),s.isSelectedFormControl.setValue(s.isExpand),s.isSelectedFormControl.value?this.processRequiredData(s.children,s.totalPart):this.setCheckboxToFalse(s.children),this.checkValidationErrorAgain())}checkValidationErrorAgain(){this.processRequiredData(this.combineExamCapacity,void 0)}processRequiredData(s,o){s.forEach(a=>{let r=this.isDefaultSelectAll(a.children.length,a.totalPart);"FOLDER"==a.data.objectType&&!r&&(a.showSelectCount=!0);let l=a.isSelectedFormControl.value;a.isExpand=l;let c=this.isDefaultSelectAll(s.length,o);c&&(l=!0),a.isSelectedFormControl.value!=l&&a.isSelectedFormControl.setValue(l),a.showCheckbox=!c,"FOLDER"==a.data.objectType&&l&&(a.isExpand=!0,this.processRequiredData(a.children,a.totalPart),a.hasError=(a.totalPart?a.totalPart:a.children.length)!=this.countSelectedPart(a))})}setCheckboxToFalse(s){s.forEach(o=>{o.isSelectedFormControl.setValue(!1),o.children.length&&this.setCheckboxToFalse(o.children)})}isDefaultSelectAll(s,o){return null==o||o<=0||o==s}isInValidSubmitSave(){return!this.getListSelectedExam(this.combineExamCapacity,[]).length||this.hasErrorInFolder(this.combineExamCapacity)}hasErrorInFolder(s){let o=!1;return s.forEach(a=>{a.hasError&&(o=!0),a.children.length&&this.hasErrorInFolder(a.children)&&(o=!0)}),o}getListSelectedExam(s,o){return s.forEach(a=>{"EXAM"==a.data.objectType&&a.isSelectedFormControl.value&&a.data.exam?.hashId&&o.push(a.data.exam.hashId),a.children.length&&(o=this.getListSelectedExam(a.children,o))}),o}asTemplateDataObj(s){return s}standardTreeNodes(s,o){let a=[];return s.forEach((r,l)=>{let c={level:o,isExpand:!1,isShow:!0,nodeIndex:l,randomHashId:this.uuidService.getUuid(),data:r,children:[],text:r.objectName??"",isSelectedFormControl:new g.MJ(!1,{nonNullable:!0}),totalPart:r.totalPart,showCheckbox:!0,showSelectCount:!1,hasError:!1};c.children=this.standardTreeNodes(r.children,o+1),a.push(c)}),a}getCapacityExamObjs(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamGetTestCapacityExamHashIdGet(this.hashId,-1).subscribe(s=>s.success?s.data?.isSelectedComponent?this.selectCapacityExamEmitter.emit(!0):(this.capacityObj=s.data?.capacityExam,this.combineExamCapacity=this.standardTreeNodes(s.data?.testingComponents??[],0),this.processRequiredData(this.combineExamCapacity,void 0),void this.successStatusObj()):this.forceShowErrorBox(s.message,!0)))}ngOnInit(){super.ngOnInit(),this.getCapacityExamObjs()}constructor(){super(),this.selectCapacityExamEmitter=new e.bkB,this.uuidService=(0,e.WQX)(Xh.D),this.frontExamService=(0,e.WQX)(Ce.iB),this.combineExamCapacity=[],this.errorMessage=""}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-select-capacity-exam"]],inputs:{hashId:"hashId"},outputs:{selectCapacityExamEmitter:"selectCapacityExamEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[1,"box","p-3","container","mt-5"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mx-auto","text-center"],[1,"text-xl","text-center","font-bold"],[1,"text-md","mt-2","text-center","font-bold","text-info"],[1,"text-md","font-bold","mt-2"],["class","text-center py-2",4,"ngIf"],[1,"px-2","mt-2"],[1,"grid","grid-cols-12","gap-1"],[4,"ngIf"],[1,"text-right","mt-2"],[1,"btn","btn-secondary","ml-auto",3,"click"],[1,"btn","btn-primary","ml-2",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"text-center","py-2"],[1,"block","text-danger","text-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mr-1"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","gap-1","w-full",2,"align-items","center","grid-column","span 12 / span 12"],[1,"col-span-12","flex","items-center","mt-1",3,"ngStyle"],["class","mr-2",4,"ngIf"],["class","clickable","aria-hidden","true",3,"click",4,"ngIf"],["name","file-check","size","20",3,"ngClass",4,"ngIf"],[1,"mb-0","ml-1",3,"click","ngClass"],["class","text-xs ml-1 font-normal",3,"ngClass",4,"ngIf"],["type","checkbox",1,"form-check-input","mr-2",3,"click","change","formControl"],[1,"mr-2"],["aria-hidden","true",1,"clickable",3,"click"],["type","folder",3,"size",4,"ngIf"],["type","folder",3,"size"],["name","file-check","size","20",3,"ngClass"],[1,"text-xs","ml-1","font-normal",3,"ngClass"]],template:function(s,o){if(1&s&&(e.j41(0,"div",2),e.DNE(1,rA,1,1,"azt-loading-effect",3)(2,dA,24,25,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,yA,1,1,"ng-template",null,1,e.C5r)),2&s){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,wt.R,ke.m,v.MD,v.YU,v.Sq,v.bT,v.T3,v.B3,g.X1,g.Zm,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function SA(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"span",3),e.EFF(3),e.k0s()(),e.j41(4,"div",4)(5,"span",5),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"span",5),e.EFF(9),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()(),e.j41(12,"div",6),e.nrm(13,"span",7),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"div",8)(16,"app-testbank-frontend-count-down-box",9),e.bIt("endCountDownEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()(),e.j41(17,"div",10)(18,"button",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(3),e.JRh(t.capacityComponent.name),e.R7$(3),e.JRh(t.capacityComponent.totalQuestion+" "+e.bMT(7,8,"lang_auto_cau_hoi")+" - "),e.R7$(3),e.JRh(t.capacityComponent.totalMinute?t.capacityComponent.totalMinute+" "+e.bMT(10,10,"lang_auto_phut"):e.bMT(11,12,"lang_auto_khong_thoi_han")),e.R7$(4),e.Y8G("innerHtml",e.bMT(14,14,"lang_azt_capacity_exam_intro_description"),e.npT),e.R7$(3),e.Y8G("totalSecond",t.waitingTime)("useCountDown",!0)("customClass","font-bold"),e.R7$(3),e.SpI(" ",e.bMT(20,16,"lang_auto_bat_dau_audio")," ")}}let d_=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.startedExamEvent=new e.bkB}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-capacity-exam-intro"]],inputs:{capacityComponent:"capacityComponent",waitingTime:"waitingTime"},outputs:{startedExamEvent:"startedExamEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","box p-5 container mt-10 text-center",4,"ngIf"],[1,"box","p-5","container","mt-10","text-center"],[1,"text-xl","uppercase","text-primary"],[1,"font-bold"],[1,"mt-1","text-lg"],[1,"font-medium"],[1,"mt-3"],[1,"text-base",3,"innerHtml"],[1,"mt-10","text-2xl","text-primary"],[3,"endCountDownEvent","totalSecond","useCountDown","customClass"],[1,"mt-5"],[1,"btn","btn-primary","w-24","h-24","text-lg","rounded-full","shadow-md",3,"click"]],template:function(s,o){1&s&&e.DNE(0,SA,21,18,"div",0),2&s&&e.Y8G("ngIf",o.capacityComponent)},dependencies:[Cn,v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,q.k],styles:["@media screen and (max-width: 480px){.container[_ngcontent-%COMP%]{width:auto;margin-right:1rem;margin-left:1rem}}"]}),n})();const wA=["*"],m_=()=>({"mr-2":!0}),p_=()=>({"mr-1":!0}),IA=()=>({"mr-2 text-danger":!0});function CA(i,n){if(1&i&&(e.j41(0,"p",8),e.nrm(1,"lucide-icon",19),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(10,p_)),e.R7$(),e.E5c(" ",e.bMT(3,4,"lang_auto_thoi_gian_duoc_phep_vao_thi"),": ",e.bMT(4,6,t.currentTakeTestStepData.examObj.startTime)," - ",e.bMT(5,8,t.currentTakeTestStepData.examObj.endTime)," ")}}function kA(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",20),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"app-testbank-frontend-count-down-box",21),e.bIt("endCountDownEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(o&&a.submitTestToApi(!0))}),e.k0s(),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()}if(2&i){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_hay_kiem_tra_lai_bai_lam_cua_ban_he_thong_se_tu_dong_nop_bai_sau"),": "),e.R7$(2),e.Y8G("totalSecond",t.currentTakeTestStepData.autoSubmitAfterSeconds)("useCountDown",!0),e.R7$(),e.SpI(" ",e.bMT(5,6,"lang_auto_hoac_ban_co_the_nop_bai_ngay_bang_cach_an_nut_ben_duoi")," ")}}function EA(i,n){1&i&&(e.qex(0),e.nrm(1,"lucide-icon",22),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.bVm()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(10,p_)),e.R7$(),e.E5c(" ",e.bMT(3,4,"lang_auto_ban_da_het_gio_lam_bai_thi_hay_an_nut"),' "',e.bMT(4,6,"lang_auto_nop_bai"),'" ',e.bMT(5,8,"lang_auto_ben_duoi_de_gui_bai_len_he_thong_neu_nop_muon_bai_lam_cua_ban_co_the_khong_duoc_cham_diem_vui_long_lien_he_giao_vien_de_phuc_khao")," "))}function AA(i,n){1&i&&(e.nrm(0,"lucide-icon",22),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate")),2&i&&(e.Y8G("ngClass",e.lJ4(10,p_)),e.R7$(),e.E5c(" ",e.bMT(2,4,"lang_auto_ban_da_qua_gio_nop_bai_thi_hay_an_nut"),' "',e.bMT(3,6,"lang_auto_nop_muon"),'" ',e.bMT(4,8,"lang_auto_ben_duoi_de_gui_bai_len_he_thong_bai_lam_cua_ban_co_the_khong_duoc_cham_diem_vui_long_lien_he_giao_vien_de_phuc_khao")," "))}function OA(i,n){if(1&i&&(e.j41(0,"div",26)(1,"div",27),e.nrm(2,"azt-question-standalone-for-student-at-full-test",28),e.k0s()()),2&i){const t=n.$implicit,s=n.index,o=e.XpG(2);e.R7$(2),e.Y8G("startQuestionIndex",o.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",o.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",o.followerRenderQuest)("takeTestLayout",o.allTakeTestLayouts.STEP_QUESTION)("isMobile",o.isMobile)("examObj",o.currentTakeTestStepData.examObj)("question",t)("fontSize",o.sAztTestResizeService.fontSize)("index",s)("overTime",!0)("questionListLength",o.currentTakeTestStepData.viewQuestionObjs.length)}}function RA(i,n){if(1&i&&(e.j41(0,"mat-tab",23),e.nI1(1,"mytranslate"),e.j41(2,"div",29),e.SdG(3),e.k0s()()),2&i){const t=e.XpG(2);e.FS9("label",e.bMT(1,1,"lang_auto_tu_luan")+" ("+t.files.length+")")}}function FA(i,n){if(1&i&&(e.j41(0,"mat-tab-group")(1,"mat-tab",23),e.nI1(2,"mytranslate"),e.DNE(3,OA,3,13,"div",24),e.k0s(),e.DNE(4,RA,4,3,"mat-tab",25),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.FS9("label",e.bMT(2,3,"lang_auto_trac_nghiem")),e.R7$(2),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.hasEssayQuestion)}}function jA(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBackToExamDetails())}),e.nrm(3,"lucide-icon",33),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",34)(7,"button",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.submitTestToApi(!0))}),e.nrm(8,"lucide-icon",36),e.EFF(9),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngClass",e.lJ4(10,IA)),e.R7$(),e.SpI(" ",e.bMT(5,4,"lang_auto_thoat")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(11,m_)),e.R7$(),e.SpI(" ",t.currentTakeTestStepData.countDownSecond<-300?e.bMT(10,6,"lang_auto_nop_muon"):e.bMT(11,8,"lang_powerpoint_frontend_detail_submit")," ")}}let zr=(()=>{var i;class n extends Z.H{submitTestToApi(s){this.submitTestEvent.emit(s)}goBackToExamDetails(){this.commonService.myNavigationWithQueryString("/de-thi/"+this.currentTakeTestStepData.examObj.hashId,"?backto="+encodeURIComponent(this.backToLink))}ngOnInit(){super.ngOnInit()}constructor(){super(),this.submitTestEvent=new e.bkB,this.allTakeTestLayouts=$t}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-test-bank-frontend-over-time-of-exam"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",questsLoadState:"questsLoadState",backToLink:"backToLink",isMobile:"isMobile",files:"files",followerRenderQuest:"followerRenderQuest",sAztTestResizeService:"sAztTestResizeService",userObj:"userObj"},outputs:{submitTestEvent:"submitTestEvent"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:wA,decls:36,vars:37,consts:[["notActualEndTime",""],["questionAndAnswerTpl",""],["submitButtonBox",""],[1,"p-3",2,"padding-bottom","50px"],[1,"box","p-5","m-3"],[1,"text-center"],[1,"text-lg","font-medium"],[1,"font-medium"],[1,"flex","justify-center","items-center","mt-2"],[1,"flex","items-center","mr-3"],["name","timer","size","20",3,"ngClass"],[1,"flex","items-center"],["name","circle-help","size","20",3,"ngClass"],["class","flex justify-center items-center mt-2",4,"ngIf"],[1,"font-medium","mt-2"],["class","p-3 m-2 text-center text-pending",4,"ngIf"],[1,"mt-3","text-danger","font-medium","text-center"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],["name","clock","size","24",3,"ngClass"],[1,"p-3","m-2","text-center","text-pending"],[3,"endCountDownEvent","totalSecond","useCountDown"],["name","timer-off","size","24",3,"ngClass"],[3,"label"],["class","mb-3 mt-2",4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[1,"mb-3","mt-2"],[1,"azt-question","box","text-left","relative"],[3,"startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","fontSize","index","overTime","questionListLength"],[1,"box","mt-2"],[1,"mt-2","flex","justify-center"],[1,"-intro-x","mr-4"],["azt-track-service","take-test-zYDkrlktkR",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["name","power","size","16",3,"ngClass"],[1,"intro-x"],["azt-track-service","take-test-HI_SB5_l-P",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"]],template:function(s,o){if(1&s&&(e.NAR(),e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"h3",6),e.EFF(4),e.k0s(),e.j41(5,"p",7),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"div",8)(9,"div",9),e.nrm(10,"lucide-icon",10),e.EFF(11),e.nI1(12,"mytranslate"),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"div",11),e.nrm(15,"lucide-icon",12),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.DNE(18,CA,6,11,"p",13),e.j41(19,"p",14),e.EFF(20),e.nI1(21,"mytranslate"),e.nI1(22,"mytranslate"),e.nI1(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(24,kA,6,8,"div",15),e.k0s(),e.j41(25,"div",16),e.DNE(26,EA,6,11,"ng-container",17)(27,AA,5,11,"ng-template",null,0,e.C5r),e.k0s(),e.eu8(29,18)(30,18)(31,18),e.k0s(),e.DNE(32,FA,5,5,"ng-template",null,1,e.C5r)(34,jA,12,12,"ng-template",null,2,e.C5r)),2&s){const a=e.sdS(28),r=e.sdS(33),l=e.sdS(35);e.R7$(4),e.JRh(o.currentTakeTestStepData.examObj.name),e.R7$(2),e.Lme("",e.bMT(7,21,"lang_auto_ma_de"),": ",o.currentTakeTestStepData.examObj.hashId,""),e.R7$(4),e.Y8G("ngClass",e.lJ4(35,m_)),e.R7$(),e.E5c(" ",e.bMT(12,23,"lang_auto_thoi_gian"),": ",o.currentTakeTestStepData.examObj.minutes," ",e.bMT(13,25,"lang_auto_phut")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(36,m_)),e.R7$(),e.Lme(" ",e.bMT(17,27,"lang_auto_so_cau"),": ",o.currentTakeTestStepData.countQuestion," "),e.R7$(2),e.Y8G("ngIf",o.currentTakeTestStepData.examObj.startTime&&o.currentTakeTestStepData.examObj.endTime),e.R7$(2),e.LHq(" ",e.bMT(21,29,"lang_auto_thi_sinh"),": ",null==o.userObj?null:o.userObj.fullName," ",e.bMT(22,31,"lang_auto_-_vao_thi_luc"),": ",e.bMT(23,33,null==o.currentTakeTestStepData.testingResultObj?null:o.currentTakeTestStepData.testingResultObj.startedTest)," "),e.R7$(4),e.Y8G("ngIf",o.currentTakeTestStepData.autoSubmitAfterSeconds),e.R7$(2),e.Y8G("ngIf",o.currentTakeTestStepData.isActualEndTime)("ngIfElse",a),e.R7$(3),e.Y8G("ngTemplateOutlet",l),e.R7$(),e.Y8G("ngTemplateOutlet",r),e.R7$(),e.Y8G("ngTemplateOutlet",l)}},dependencies:[Cn,Fr,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,g.YN,z.wp,Y.s,Di.mq,Di.T8,F.flO,F.WGl,H.L,z.bH,U.Id,q.k],encapsulation:2}),n})();const zA=()=>({"mr-2":!0});function MA(i,n){1&i&&(e.j41(0,"div",3),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_you_are_not_upload_any_essay_files"),"\n"))}function DA(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div")(3,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(4,"lucide-icon",6),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"p",7),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.bVm()}2&i&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(7,zA)),e.R7$(),e.SpI(" ",e.bMT(6,3,"lang_testbank_frontend_upload_essay_files")," "),e.R7$(3),e.JRh(e.bMT(9,5,"lang_auto_ho_tro_anh_video_audio_hoac_file_pdf_brackets")))}let Mr=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.showUploadEssayFilesDialogEvent=new e.bkB,this.changeAnswerFilesEvent=new e.bkB}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-upload-essay-file-at-over-time-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData"},outputs:{showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",changeAnswerFilesEvent:"changeAnswerFilesEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","p-3 m-2 alert alert-danger",4,"ngIf"],[4,"ngIf"],[3,"changeAnswerFiles","answerFiles"],[1,"p-3","m-2","alert","alert-danger"],[1,"text-center","mt-1","mb-2"],["azt-track-service","take-test-EkxWzdqkfZ",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"h6","mb-2","mt-1"]],template:function(s,o){1&s&&(e.DNE(0,MA,3,3,"div",0)(1,DA,10,8,"ng-container",1),e.j41(2,"app-sort-essay-files-box",2),e.bIt("changeAnswerFiles",function(r){return o.changeAnswerFilesEvent.emit(r)}),e.k0s()),2&s&&(e.Y8G("ngIf",0==o.currentTakeTestStepData.files.length),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.allowUploadEssayFileWhenEndTime),e.R7$(),e.Y8G("answerFiles",o.currentTakeTestStepData.files))},dependencies:[Vo.s,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const GA=i=>[i];let Dr=(()=>{var i;class n extends Z.H{}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-wait-to-test-time-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",homeLink:"homeLink"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:17,consts:[[1,"p-4"],[1,"box","p-3","text-danger","text-center"],[1,"text-center","clickable","mt-3"],["azt-track-service","take-test-8oUvqrS4hCo",1,"link__color","link__hover",3,"routerLink"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(6,"div",2)(7,"a",3),e.nI1(8,"navigationLocalize"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(2),e.E5c(" ",e.bMT(3,5,o.currentTakeTestStepData.errorMessage)," ",e.bMT(4,7,"lang_auto_vui_long_quay_lai_vao_luc"),": ",e.bMT(5,9,o.currentTakeTestStepData.examObj.startTime)," "),e.R7$(5),e.Y8G("routerLink",e.eq3(15,GA,e.bMT(8,11,o.homeLink))),e.R7$(2),e.JRh(e.bMT(10,13,"lang_auto_quay_lai_trang_chu")))},dependencies:[z.F2,v.MD,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,H.L,z.bH,U.Id,q.k],encapsulation:2}),n})();function PA(i,n){if(1&i&&(e.j41(0,"p",9),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.R7$(),e.JRh(t)}}function NA(i,n){if(1&i&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3),e.k0s()(),e.DNE(4,PA,2,1,"p",8),e.k0s()),2&i){const t=n.$implicit,s=n.index;e.R7$(3),e.Lme("",s+1,". ",t.message,":"),e.R7$(),e.Y8G("ngForOf",t.data)}}let Gr=(()=>{var i;class n extends Z.H{goBackToExamDetails(){this.commonService.myNavigationWithQueryString("/de-thi/"+this.currentTakeTestStepData.examObj.hashId,"?backto="+encodeURIComponent(this.backToLink))}reloadCurrentPage(){location.reload()}ngOnInit(){super.ngOnInit()}constructor(){super()}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-test-bank-frontend-load-question-error-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",questsLoadState:"questsLoadState",backToLink:"backToLink"},standalone:!0,features:[e.Vt3,e.aNF],decls:32,vars:28,consts:[[2,"display","flex","justify-content","center"],[2,"margin","50px","border","1px solid #9e9e9e","padding","20px 50px","border-radius","10px","background","#fafafa","overflow-wrap","break-word","line-height","25px"],[2,"color","#f44336","font-size","18px","font-weight","500","text-transform","uppercase","margin-bottom","20px","text-align","center"],[2,"text-transform","lowercase"],[4,"ngFor","ngForOf"],[1,"mt-5","text-center"],["azt-track-service","take-test-4_EDv4k0GO7",1,"btn","btn-sm","btn-outline-primary","mr-3",3,"click"],["azt-track-service","take-test-Z7YL5G4GC5F",1,"btn","btn-sm","btn-primary",3,"click"],["style","color: #795548; font-size: small",4,"ngFor","ngForOf"],[2,"color","#795548","font-size","small"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"p"),e.EFF(9),e.nI1(10,"mytranslate"),e.j41(11,"strong"),e.EFF(12),e.k0s()(),e.j41(13,"p"),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p"),e.EFF(17),e.nI1(18,"mytranslate"),e.j41(19,"strong"),e.EFF(20),e.j41(21,"span",3),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()(),e.DNE(24,NA,5,3,"div",4),e.j41(25,"p",5)(26,"button",6),e.bIt("click",function(){return o.goBackToExamDetails()}),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.j41(29,"button",7),e.bIt("click",function(){return o.reloadCurrentPage()}),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s()()()()),2&s&&(e.R7$(3),e.JRh(e.bMT(4,12,"lang_auto_xay_ra_loi_trong_qua_trinh_tai_de_thi")),e.R7$(3),e.JRh(e.bMT(7,14,"lang_auto_ban_co_the_click_nao_nut_thu_lai_de_thu_tai_lai_de_thi")),e.R7$(3),e.SpI(" ",e.bMT(10,16,"lang_auto_ma_de_thi")+": "," "),e.R7$(3),e.Lme("",o.currentTakeTestStepData.examObj.hashId," - ",o.currentTakeTestStepData.termExamResultId,""),e.R7$(2),e.SpI("",e.bMT(15,18,"lang_auto_phan_tram_de_thi_da_tai_duoc")+": "+o.questsLoadState.loadPercent,"%"),e.R7$(3),e.SpI(" ",e.bMT(18,20,"lang_auto_so_luong_phat_hien")+": "," "),e.R7$(3),e.SpI(" ",o.questsLoadState.errData.length," "),e.R7$(2),e.JRh(e.bMT(23,22,"lang_auto_loi")),e.R7$(2),e.Y8G("ngForOf",o.questsLoadState.errData),e.R7$(3),e.SpI(" ",e.bMT(28,24,"lang_core_print_exam_back")," "),e.R7$(3),e.SpI(" ",e.bMT(31,26,"lang_auto_thu_lai")," "))},dependencies:[v.MD,v.Sq,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();const Ef=(i,n)=>[i,n],VA=(i,n,t,s,o,a,r,l,c,_)=>[i,n,t,s,o,a,r,l,c,_],LA=(i,n,t,s)=>[i,n,t,s],BA=(i,n)=>({"container-content-mobile":i,"container-content-desktop":n}),$A=(i,n)=>({"monitor-screen":i,"monitor-screen-mobile":n}),QA=(i,n)=>({"height-showListQuestion":i,"height-hiddenListQuestion":n}),Af=()=>({"mr-2":!0}),qA=()=>({"ml-2":!0}),YA=i=>({joinByExamHashId:i}),Of=i=>[i];function UA(i,n){1&i&&e.nrm(0,"app-coazt-leave-window-event")}function XA(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG();const t=e.sdS(27);e.Y8G("ngTemplateOutlet",t)}}function WA(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG();const t=e.sdS(29);e.Y8G("ngTemplateOutlet",t)}}function HA(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",20),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",21),e.eu8(3,18),e.k0s()(),e.nrm(4,"azt-tracking-user-tags"),e.bVm()}if(2&i){const t=e.XpG(3),s=e.sdS(7);e.R7$(2),e.Y8G("ngClass",e.l_i(2,BA,t.isMobileScreenSize,!t.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",s)}}function JA(i,n){if(1&i&&(e.nrm(0,"azt-loading-effect",22),e.nI1(1,"mytranslate")),2&i){const t=e.XpG(3);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function KA(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG(3);const t=e.sdS(33);e.Y8G("ngTemplateOutlet",t)}}function ZA(i,n){if(1&i&&(e.qex(0),e.DNE(1,HA,5,5,"ng-container",16)(2,JA,2,4,"azt-loading-effect",19)(3,KA,1,1,"ng-container",17),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function eO(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG(2);const t=e.sdS(31);e.Y8G("ngTemplateOutlet",t)}}function tO(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG(2);const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function nO(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG(2);const t=e.sdS(17);e.Y8G("ngTemplateOutlet",t)}}function sO(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG(2);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function iO(i,n){if(1&i&&e.eu8(0,18),2&i){e.XpG(2);const t=e.sdS(25);e.Y8G("ngTemplateOutlet",t)}}function oO(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,ZA,4,3,"ng-container",16)(2,eO,1,1,"ng-container",17)(3,tO,1,1,"ng-container",17)(4,nO,1,1,"ng-container",17)(5,sO,1,1,"ng-container",17)(6,iO,1,1,"ng-container",17),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.ziG(6,LA,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_SELECT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_INTRO),e.R7$(),e.Y8G("ngIf",e.l_i(11,Ef,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function aO(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-desktop",32),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("sAztTestResizeService",t.sAztTestResizeService)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)("isMobileScreenSize",t.isMobileScreenSize)}}function rO(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-mobile",33),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)("currentTakeTestStepData",t.currentTakeTestStepData)}}function lO(i,n){if(1&i&&(e.j41(0,"span",36),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function cO(i,n){if(1&i&&(e.j41(0,"span",36),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function uO(i,n){if(1&i&&(e.j41(0,"div",34),e.DNE(1,lO,3,3,"span",35)(2,cO,2,1,"span",35),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.capacityComponent)}}function _O(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-group-layout",37),e.bIt("setQuestionInGroupEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionInGroup(o))})("toggleShowListQuestionInGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.toggleShowListQuestionInGroup())})("prevIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prevIndexGroup())})("nextIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextIndexGroup())})("submitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitExam())})("goToQuestionEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.goToQuestion(o))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("indexGroup",t.indexGroup)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)}}function dO(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-group-layout-mobile",38),e.bIt("setQuestionInGroupEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionInGroup(o))})("toggleShowListQuestionInGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.toggleShowListQuestionInGroup())})("prevIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prevIndexGroup())})("nextIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextIndexGroup())})("submitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitExam())})("goToQuestionEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.goToQuestion(o))})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("indexGroup",t.indexGroup)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)}}function mO(i,n){if(1&i&&(e.DNE(0,aO,1,4,"app-coazt-simple-test-header-box-for-desktop",23)(1,rO,1,2,"app-coazt-simple-test-header-box-for-mobile",24),e.j41(2,"div",25),e.nrm(3,"div",26),e.DNE(4,uO,3,2,"div",27),e.j41(5,"div",28),e.eu8(6,18),e.k0s(),e.j41(7,"div",29),e.eu8(8,18),e.k0s()(),e.DNE(9,_O,1,3,"app-coazt-simple-test-footer-box-for-group-layout",30)(10,dO,1,4,"app-coazt-simple-test-footer-box-for-group-layout-mobile",31)),2&i){const t=e.XpG(),s=e.sdS(9),o=e.sdS(11);e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(2),e.Y8G("ngClass",e.l_i(8,$A,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(2),e.Y8G("ngTemplateOutlet",s),e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(),e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize)}}function pO(i,n){if(1&i&&(e.j41(0,"div",39),e.qex(1),e.j41(2,"div",40)(3,"div",41)(4,"div",42),e.nrm(5,"azt-dynamic-hook",43),e.k0s()()(),e.bVm(),e.j41(6,"div",44),e.eu8(7,18),e.k0s()()),2&i){let t;const s=e.XpG(),o=e.sdS(13);e.Y8G("ngClass",e.l_i(7,QA,s.isShowListQuestionInGroup,!s.isShowListQuestionInGroup)),e.R7$(4),e.xc7("font-size",s.sAztTestResizeService.fontSize+"em")("line-height",s.sAztTestResizeService.fontSize<1.5?s.sAztTestResizeService.fontSize+.5:"1.7"),e.R7$(),e.Y8G("content",null!==(t=null==s.currentTakeTestStepData.viewQuestionInGroupList[s.indexGroup].groupInfo?null:s.currentTakeTestStepData.viewQuestionInGroupList[s.indexGroup].groupInfo.groupContent)&&void 0!==t?t:""),e.R7$(2),e.Y8G("ngTemplateOutlet",o)}}function hO(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",55)(2,"div",41)(3,"div",42),e.nrm(4,"azt-dynamic-hook",43),e.k0s()()(),e.bVm()),2&i){let t;const s=e.XpG(2);e.R7$(3),e.xc7("font-size",s.sAztTestResizeService.fontSize+"em")("line-height",s.sAztTestResizeService.fontSize<1.5?s.sAztTestResizeService.fontSize+.5:"1.7"),e.R7$(),e.Y8G("content",null!==(t=null==s.currentTakeTestStepData.viewQuestionInGroupList[s.indexGroup].groupInfo?null:s.currentTakeTestStepData.viewQuestionInGroupList[s.indexGroup].groupInfo.groupContent)&&void 0!==t?t:"")}}function fO(i,n){if(1&i&&(e.j41(0,"div",56)(1,"span",36),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function gO(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prevIndexGroup())}),e.nrm(1,"lucide-icon",58),e.k0s()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,Af)))}function TO(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextIndexGroup())}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"lucide-icon",60),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_nhom")+" "+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].groupId+" ("+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].totalQuestion+" "+e.bMT(4,4,"lang_auto_cau_thuong")+")"," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(6,qA))}}function bO(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitExam())}),e.nrm(1,"lucide-icon",62),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,Af)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_nop_bai")," "))}function xO(i,n){1&i&&(e.j41(0,"span"),e.nrm(1,"lucide-icon",63),e.k0s())}function vO(i,n){1&i&&(e.j41(0,"span"),e.nrm(1,"lucide-icon",64),e.k0s())}function yO(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",45)(1,"div",46),e.DNE(2,hO,5,5,"ng-container",16),e.k0s(),e.j41(3,"div",47),e.DNE(4,fO,4,3,"div",48),e.eu8(5,18),e.j41(6,"div",49),e.DNE(7,gO,2,2,"button",50)(8,TO,6,7,"button",51)(9,bO,4,5,"button",52),e.k0s()()(),e.j41(10,"div",53)(11,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleViewMobile())}),e.DNE(12,xO,2,0,"span",16)(13,vO,2,0,"span",16),e.k0s()()}if(2&i){const t=e.XpG(),s=e.sdS(13);e.R7$(),e.Y8G("hidden",!t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].groupInfo),e.R7$(),e.Y8G("hidden",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",s),e.R7$(2),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup-1]),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1]),e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1]),e.R7$(3),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile),e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile)}}function SO(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",67)(1,"app-sort-essay-files-box",68),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("answerFiles",t.currentTakeTestStepData.files)}}function wO(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",70)(1,"div",71)(2,"azt-question-standalone-for-student-at-full-test",72),e.bIt("setOneChoiceAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setOneChoiceAnswer(o,a))})("setTrueFalseAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setTrueFalseAnswer(o,a))})("setFillAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setFillAnswer(o,a))})("setEssayAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setEssayAnswer(o,a))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking.emit(o))})("nextQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.nextTo(a.currentTakeTestStepData,o))})("prevQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.backTo(a.currentTakeTestStepData,o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion.emit(o))}),e.k0s()()()}if(2&i){let t;const s=n.$implicit,o=e.XpG().index,a=e.XpG(2);e.Y8G("hidden",o!==a.indexGroup),e.R7$(),e.FS9("id","question_in_group_"+s.id),e.R7$(),e.Y8G("startQuestionIndex",a.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",a.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",a.followerRenderQuest)("takeTestLayout",a.allTakeTestLayouts.GROUP_QUESTION)("isMobile",a.isMobileScreenSize)("examObj",a.currentTakeTestStepData.examObj)("question",s)("fontSize",a.sAztTestResizeService.fontSize)("overTime",!1)("index",null!==(t=s.startQuestionIndexWidthViewGroup)&&void 0!==t?t:0)}}function IO(i,n){if(1&i&&(e.qex(0),e.DNE(1,wO,3,14,"div",69),e.bVm()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",null==t?null:t.questionList)}}function CO(i,n){if(1&i&&e.DNE(0,SO,2,1,"div",65)(1,IO,2,1,"ng-container",66),2&i){const t=e.XpG();e.Y8G("ngIf",null==t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup]?null:t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isExistEssay),e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionInGroupList)}}function kO(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(1,"lucide-icon",74),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"app-join-classroom-box",75),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_button_back")," "),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(4,YA,t.currentTakeTestStepData.examObj.hashId))}}function EO(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-select-capacity-exam",76),e.bIt("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectCapacityExamEmitter.emit(o))}),e.k0s()}if(2&i){let t;const s=e.XpG();e.Y8G("hashId",null!==(t=s.currentTakeTestStepData.examObj.hashId)&&void 0!==t?t:"")}}function AO(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-capacity-exam-intro",77),e.bIt("startedExamEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("capacityComponent",t.currentTakeTestStepData.capacityComponent)("waitingTime",t.currentTakeTestStepData.waitingTime)}}function OO(i,n){if(1&i&&e.nrm(0,"app-coazt-list-shortcut-question-box",80),2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)}}function RO(i,n){if(1&i&&(e.j41(0,"div",78),e.DNE(1,OO,1,5,"app-coazt-list-shortcut-question-box",79),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function FO(i,n){if(1&i&&e.nrm(0,"app-coazt-list-shortcut-question-box",80),2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)}}function jO(i,n){if(1&i&&(e.j41(0,"div",81,14)(2,"div",82)(3,"div",78)(4,"h3",83),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,FO,1,5,"app-coazt-list-shortcut-question-box",79),e.k0s()()()),2&i){const t=e.sdS(1),s=e.XpG();e.R7$(2),e.BMQ("style","width:"+t.offsetWidth+"px",e.$dS),e.R7$(3),e.SpI(" ",e.bMT(6,3,"lang_auto_danh_sach_cau_hoi")," "),e.R7$(2),e.Y8G("ngIf",s.currentTakeTestStepData.nextBackQuestionModel)}}function zO(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",84),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",85),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function MO(i,n){if(1&i&&(e.j41(0,"div",86)(1,"div",87)(2,"div",88),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",89)(6,"a",90),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,Of,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function DO(i,n){1&i&&(e.j41(0,"div",96)(1,"div",97)(2,"a",98),e.nrm(3,"img",99),e.nI1(4,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(5,"a",100),e.nrm(6,"img",101),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()),2&i&&(e.R7$(3),e.Y8G("src",e.bMT(4,2,"images/google-play-badge.svg"),e.B4B),e.R7$(3),e.Y8G("src",e.bMT(7,4,"images/2928664.svg"),e.B4B))}function GO(i,n){1&i&&(e.j41(0,"div",92)(1,"p",93),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",96)(5,"div",102)(6,"p",103)(7,"span",104),e.EFF(8,"Google Play"),e.k0s(),e.nrm(9,"azt-download-qr-code",105),e.k0s(),e.j41(10,"p",106)(11,"span",104),e.EFF(12,"App Store"),e.k0s(),e.nrm(13,"azt-download-qr-code",105),e.k0s()()()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.R7$(7),e.Y8G("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),e.R7$(4),e.Y8G("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-student/id1556025594"))}function PO(i,n){if(1&i&&(e.j41(0,"div",86)(1,"div",87)(2,"div",88),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",91)(6,"div",92)(7,"p",93),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,DO,8,6,"div",94),e.k0s(),e.DNE(11,GO,14,7,"div",95),e.k0s(),e.j41(12,"div",89)(13,"a",90),e.nI1(14,"navigationLocalize"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_azt_take_test_only_app_available")),e.R7$(5),e.SpI(" ",e.bMT(9,8,"lang_core_tai_app_tai_day")," "),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.isMobileWebView&&!t.isMobileDevice),e.R7$(2),e.Y8G("routerLink",e.eq3(14,Of,e.bMT(14,10,t.homeLink))),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_quay_lai_trang_chu"))}}function NO(i,n){if(1&i&&e.nrm(0,"app-coazt-wait-to-test-time-box",107),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function VO(i,n){if(1&i&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",108),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}let Rf=(()=>{var i;class n extends i_{constructor(){super(...arguments),this.indexGroup=0,this.isShowListQuestionInGroup=!0}toggleShowListQuestionInGroup(){this.isShowListQuestionInGroup=!this.isShowListQuestionInGroup;const s=document.getElementById("contentBlock"),o=document.getElementById("lucide-chevron-up");o&&s&&(this.isShowListQuestionInGroup?(s.style.maxHeight="60px",o.style.transform="rotate(0)"):(s.style.maxHeight="0px",o.style.transform="rotate(180deg)"))}setQuestionInGroup(s){this.indexGroup!=s&&(this.indexGroup=s,this.scrollQuestion())}goToQuestion(s){document.getElementById("question_in_group_"+s)?.scrollIntoView({behavior:"smooth"})}setStatusAnswer(s,o){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].questionList[s]&&(this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].questionList[s].status=o,this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].totalCompletedQuestion=this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].questionList.filter(a=>a.status).length)}setOneChoiceAnswer(s,o){this.setOneChoiceAnswerEmitter.emit(s),this.setStatusAnswer(o,!0)}setTrueFalseAnswer(s,o){this.setTrueFalseAnswerEmitter.emit(s),this.setStatusAnswer(o,void 0!==s?.answerConfig?.checked)}setFillAnswer(s,o){this.setFillAnswerEmitter.emit(s),this.setStatusAnswer(o,""!==s.value)}setEssayAnswer(s,o){this.setEssayAnswerEmitter.emit(s),this.setStatusAnswer(o,""!==s.value)}prevIndexGroup(){this.indexGroup--,this.scrollQuestion()}nextIndexGroup(){this.indexGroup++,this.scrollQuestion()}submitExam(){this.openSubmitExam.emit()}toggleViewMobile(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].isShowGroupMobile=!this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].isShowGroupMobile}scrollQuestion(){const s=this.isMobileScreenSize?document.getElementById("questionListMobile"):document.getElementById("questionList");s&&(s.scrollTop=0)}ngOnInit(){super.ngOnInit(),this.currentTakeTestStepData.examObj.hideGroupQuestion=1}ngOnDestroy(){super.ngOnDestroy(),this.currentTakeTestStepData.examObj.hideGroupQuestion=0}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-test-in-group-layout"]],standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:20,consts:[["mainTakeTestContentTpl",""],["showListQuestionTplDesktop",""],["showListQuestionTplMobile",""],["questionList",""],["chooseStudentTpl",""],["chooseCapacityExamTpl",""],["capacityExamIntro",""],["listQuestionsSelectedInMobile",""],["listQuestionSelectedInDesktop",""],["overTimeTpl",""],["commonErrorTpl",""],["showOnlyAppMessage",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],["listQuestionBar",""],[3,"currentTakeTestStepData"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0","min-height","100vh",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize","openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent",4,"ngIf"],[3,"layoutType","currentTakeTestStepData","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[1,"pb-4"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],["class","p-1 text-center mt-1",4,"ngIf"],[1,"azt-hidden","lg:block"],[1,"lg:hidden"],[3,"currentTakeTestStepData","indexGroup","layoutType","setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent",4,"ngIf"],[3,"currentTakeTestStepData","indexGroup","layoutType","sAztTestNextBackQuestionService","setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[3,"openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent","currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","layoutType","currentTakeTestStepData"],[1,"p-1","text-center","mt-1"],["class","text-md font-medium",4,"ngIf"],[1,"text-md","font-medium"],[3,"setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent","currentTakeTestStepData","indexGroup","layoutType"],[3,"setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","indexGroup","layoutType","sAztTestNextBackQuestionService"],[1,"intro-y","grid","grid-cols-12","gap-5","mt-55px","transition-3",3,"ngClass"],[1,"col-span-6","px-4","py-4","box","overflow-auto","custom-scroll","rounded-none"],[1,"font-medium","h-full"],[1,"group-content-of-question-standalone",2,"padding-bottom","100px"],[3,"content"],["id","questionList",1,"col-span-6","h-full","py-5","pr-5","overflow-auto","custom-scroll"],[1,"intro-y","mt-6","transition-3","height-list-question-mobile"],[1,"group-content","h-full",3,"hidden"],["id","questionListMobile",1,"question-content","pb-400","overflow-auto","h-full",3,"hidden"],["class","p-1 text-center mt-2",4,"ngIf"],[1,"flex","items-center","justify-center","p-3"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ","class","btn btn-outline-primary h-40px mr-3",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj","class","btn btn-outline-primary h-40px w-full",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_","class","btn btn-primary h-40px w-32",3,"click",4,"ngIf"],[1,"pos-tool"],["azt-track-service","take-test-in-group-layout-Wdat3Pseg",1,"btn","box","rounded-full","shadow-lg","border","border-slate-200","dark:border-darkmode-400","w-16","h-16",3,"click"],[1,"px-4","py-4","h-full","box","overflow-auto","custom-scroll","rounded-none"],[1,"p-1","text-center","mt-2"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ",1,"btn","btn-outline-primary","h-40px","mr-3",3,"click"],["name","move-left","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj",1,"btn","btn-outline-primary","h-40px","w-full",3,"click"],["name","move-right","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_",1,"btn","btn-primary","h-40px","w-32",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],["name","list-todo","size","20"],["name","file-text","size","20"],["class","mt-5",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-5"],[3,"changeAnswerFiles","answerFiles"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","nextQuestionEmitter","prevQuestionEmitter","sendAudioEmit","startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","fontSize","overTime","index"],[1,"btn","btn-sm","btn-outline-secondary","mb-5","mt-5","mr-auto",3,"click"],["name","chevron-left","size","20"],[3,"selectStudentEvent","joinClassroomByType"],[3,"selectCapacityExamEmitter","hashId"],[3,"startedExamEvent","capacityComponent","waitingTime"],[1,"box","p-3"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],[1,"col-span-12","lg:col-span-3","mt-3"],[1,"top_gameBar"],[1,"text-md","font-medium","mb-3"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[1,"mt-5","text-center"],[1,"block"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","block",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-student/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(s,o){1&s&&(e.nrm(0,"app-coazt-tracking-full-screen-event",15)(1,"app-coazt-tracking-visible-event",15),e.DNE(2,UA,1,0,"app-coazt-leave-window-event",16)(3,XA,1,1,"ng-container",17)(4,WA,1,1,"ng-container",17)(5,oO,7,14,"div",16)(6,mO,11,11,"ng-template",null,0,e.C5r)(8,pO,8,10,"ng-template",null,1,e.C5r)(10,yO,14,10,"ng-template",null,2,e.C5r)(12,CO,2,2,"ng-template",null,3,e.C5r)(14,kO,5,6,"ng-template",null,4,e.C5r)(16,EO,1,1,"ng-template",null,5,e.C5r)(18,AO,1,2,"ng-template",null,6,e.C5r)(20,RO,2,1,"ng-template",null,7,e.C5r)(22,jO,8,5,"ng-template",null,8,e.C5r)(24,zO,2,9,"ng-template",null,9,e.C5r)(26,MO,10,11,"ng-template",null,10,e.C5r)(28,PO,17,16,"ng-template",null,11,e.C5r)(30,NO,1,2,"ng-template",null,12,e.C5r)(32,VO,1,3,"ng-template",null,13,e.C5r)),2&s&&(e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(6,Ef,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(o.currentTakeTestStepData.currentStep)&&!o.questsLoadState.startLoad&&!o.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE),e.R7$(),e.Y8G("ngIf",e.zJS(9,VA,[o.allTakeTestSteps.WAIT_TO_TEST_TIME,o.allTakeTestSteps.CHOOSE_STUDENT,o.allTakeTestSteps.CAPACITY_EXAM_SELECT,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,o.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,o.allTakeTestSteps.SHOW_FULL_SCREEN,o.allTakeTestSteps.SHOW_VIDEO_REQUIRED,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.CAPACITY_EXAM_INTRO]).includes(o.currentTakeTestStepData.currentStep)))},dependencies:[Er,Ar,Or,o_,ie.K,r_,c_,LE,a2,Go.x,Vo.s,Fr,jr.l,__,d_,Rr,zr,Mr,Xi.d,Dr,Gr,z.F2,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,z.Vs,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],styles:[".top_gameBar[_ngcontent-%COMP%]{position:fixed;top:87px;right:10px;min-width:23.5vw}.margin-question-bar-for-simple-test-for-desktop[_ngcontent-%COMP%]{margin-top:calc(3rem + 30px)!important}.border-2[_ngcontent-%COMP%]   .margin-question-bar-for-simple-test-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 27px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(var(--vh, 1vh) * 100 - 220px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.sheet-screen-monitor[_ngcontent-%COMP%]{max-height:calc(var(--vh, 1vh) * 100 - 400px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}.border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.height-showListQuestion[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 55px - 125px)}.height-hiddenListQuestion[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 55px - 72px)}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:calc(100vw - 600px);height:64px}  .dark .azt-progress-value{background-color:#28334e}.height-list-question-mobile[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 110px)}.pos-tool[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:25px;z-index:999}.pb-400[_ngcontent-%COMP%]{padding-bottom:400px}.h-40px[_ngcontent-%COMP%]{height:40px}"]}),n})(),Ff=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.changeShowTypeEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=$t,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(s=>!s?.groupInfo?.groupId)}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-simple-test-footer-box-for-mobile"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",layoutType:"layoutType",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService"},outputs:{changeShowTypeEvent:"changeShowTypeEvent",openSubmitExamEvent:"openSubmitExamEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:4,consts:[["actionMenu","matMenu"],[1,"pos-tool"],[1,"btn","box","rounded-full","shadow-md","border","border-slate-200","dark:border-darkmode-400","w-16","h-16",3,"matMenuTriggerFor"],["name","layout-grid","size","20"],["xPosition","before"],[3,"submitExamEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",1)(1,"button",2),e.nrm(2,"lucide-icon",3),e.k0s()(),e.j41(3,"mat-menu",4,0)(5,"app-coazt-simple-test-menu-bar",5),e.bIt("submitExamEvent",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())})("changeShowTypeEvent",function(l){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(l))})("openSubmitExamEvent",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())})("showUploadEssayFilesDialogEvent",function(){return e.eBV(a),e.Njj(o.showUploadEssayFilesDialogEvent.emit())})("openQuitDialogEvent",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.k0s()()}if(2&s){const a=e.sdS(4);e.R7$(),e.Y8G("matMenuTriggerFor",a),e.R7$(4),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData)("layoutType",o.layoutType)("sAztTestNextBackQuestionService",o.sAztTestNextBackQuestionService)}},dependencies:[yf,v.MD,g.X1,L.iI,g.YN,Y.s,yn.kk,yn.Cp,F.flO,F.WGl,H.L,U.Id,q.k],styles:[".pos-tool[_ngcontent-%COMP%]{position:fixed;bottom:60px;right:25px;z-index:999}.pb-400[_ngcontent-%COMP%]{padding-bottom:400px}.h-40px[_ngcontent-%COMP%]{height:40px}"]}),n})();var LO=A(77108);const jf=(i,n)=>[i,n],BO=(i,n,t,s,o,a,r,l,c,_)=>[i,n,t,s,o,a,r,l,c,_],$O=(i,n,t,s)=>[i,n,t,s],QO=(i,n)=>({"container-content-mobile":i,"container-content-desktop":n}),qO=(i,n)=>({"margin-question-bar-for-simple-test-for-desktop":i,"margin-question-bar-for-simple-test-for-mobile":n}),YO=(i,n)=>({"monitor-screen":i,"monitor-screen-mobile":n}),UO=i=>({joinByExamHashId:i}),zf=i=>[i];function XO(i,n){1&i&&e.nrm(0,"app-coazt-leave-window-event")}function WO(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG();const t=e.sdS(21);e.Y8G("ngTemplateOutlet",t)}}function HO(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG();const t=e.sdS(23);e.Y8G("ngTemplateOutlet",t)}}function JO(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",17),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",18),e.eu8(3,15),e.k0s()(),e.nrm(4,"azt-tracking-user-tags"),e.bVm()}if(2&i){const t=e.XpG(3),s=e.sdS(7);e.R7$(2),e.Y8G("ngClass",e.l_i(2,QO,t.isMobileScreenSize,!t.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",s)}}function KO(i,n){if(1&i&&(e.nrm(0,"azt-loading-effect",19),e.nI1(1,"mytranslate")),2&i){const t=e.XpG(3);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function ZO(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(3);const t=e.sdS(27);e.Y8G("ngTemplateOutlet",t)}}function eR(i,n){if(1&i&&(e.qex(0),e.DNE(1,JO,5,5,"ng-container",13)(2,KO,2,4,"azt-loading-effect",16)(3,ZO,1,1,"ng-container",14),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function tR(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(2);const t=e.sdS(25);e.Y8G("ngTemplateOutlet",t)}}function nR(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(2);const t=e.sdS(11);e.Y8G("ngTemplateOutlet",t)}}function sR(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(2);const t=e.sdS(13);e.Y8G("ngTemplateOutlet",t)}}function iR(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(2);const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function oR(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(2);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function aR(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,eR,4,3,"ng-container",13)(2,tR,1,1,"ng-container",14)(3,nR,1,1,"ng-container",14)(4,sR,1,1,"ng-container",14)(5,iR,1,1,"ng-container",14)(6,oR,1,1,"ng-container",14),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.ziG(6,$O,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_SELECT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_INTRO),e.R7$(),e.Y8G("ngIf",e.l_i(11,jf,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function rR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-desktop",26),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("sAztTestResizeService",t.sAztTestResizeService)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)("isMobileScreenSize",t.isMobileScreenSize)}}function lR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-mobile",27),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)}}function cR(i,n){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function uR(i,n){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function _R(i,n){if(1&i&&(e.j41(0,"div",28),e.DNE(1,cR,3,3,"span",29)(2,uR,2,1,"span",29),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.capacityComponent)}}function dR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-mobile",31),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)}}function mR(i,n){if(1&i&&(e.DNE(0,rR,1,4,"app-coazt-simple-test-header-box-for-desktop",20)(1,lR,1,2,"app-coazt-simple-test-header-box-for-mobile",21),e.j41(2,"div",22),e.nrm(3,"div",23),e.DNE(4,_R,3,2,"div",24),e.eu8(5,15),e.k0s(),e.DNE(6,dR,1,3,"app-coazt-simple-test-footer-box-for-mobile",25)),2&i){const t=e.XpG(),s=e.sdS(9);e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngClass",e.l_i(7,qO,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngClass",e.l_i(10,YO,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",s),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize)}}function pR(i,n){if(1&i&&e.nrm(0,"azt-loaded-img",38),2&i){const t=e.XpG(2);e.Y8G("imgSrc",t.currentTakeTestStepData.examObj.examHeader)}}function hR(i,n){if(1&i&&(e.j41(0,"div",39),e.nrm(1,"div",40),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&i){let t;const s=e.XpG(2);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,null!==(t=null==s.currentTakeTestStepData.examConfigObj?null:s.currentTakeTestStepData.examConfigObj.header)&&void 0!==t?t:""),e.npT)}}function fR(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"div",42)(2,"azt-question-standalone-for-student-at-full-test",43),e.bIt("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setEssayAnswerEmitter.emit(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setResultTracking.emit(o))})("nextQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sAztTestNextBackQuestionService.nextTo(a.currentTakeTestStepData,o))})("prevQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sAztTestNextBackQuestionService.backTo(a.currentTakeTestStepData,o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioForQuestion.emit(o))}),e.k0s()()()}if(2&i){const t=n.$implicit,s=n.index,o=e.XpG(2);e.R7$(),e.FS9("id","question_all_"+t.id),e.R7$(),e.Y8G("startQuestionIndex",o.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",o.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",o.followerRenderQuest)("takeTestLayout",o.allTakeTestLayouts.LIST_QUESTION)("isMobile",o.isMobileScreenSize)("examObj",o.currentTakeTestStepData.examObj)("question",t)("fontSize",o.sAztTestResizeService.fontSize)("overTime",!1)("index",s)}}function gR(i,n){if(1&i&&e.eu8(0,15),2&i){e.XpG(2);const t=e.sdS(17);e.Y8G("ngTemplateOutlet",t)}}function TR(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"app-sort-essay-files-box",34),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s(),e.DNE(3,pR,1,1,"azt-loaded-img",35)(4,hR,3,3,"div",36)(5,fR,3,13,"div",37),e.k0s(),e.DNE(6,gR,1,1,"ng-container",14),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("answerFiles",t.currentTakeTestStepData.files),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.examObj.examHeader),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.examConfigObj?null:t.currentTakeTestStepData.examConfigObj.allowHeader),e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs),e.R7$(),e.Y8G("ngIf",!t.isMobileScreenSize)}}function bR(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(1,"lucide-icon",45),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"app-join-classroom-box",46),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_button_back")," "),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(4,UO,t.currentTakeTestStepData.examObj.hashId))}}function xR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-select-capacity-exam",47),e.bIt("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectCapacityExamEmitter.emit(o))}),e.k0s()}if(2&i){let t;const s=e.XpG();e.Y8G("hashId",null!==(t=s.currentTakeTestStepData.examObj.hashId)&&void 0!==t?t:"")}}function vR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-capacity-exam-intro",48),e.bIt("startedExamEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("capacityComponent",t.currentTakeTestStepData.capacityComponent)("waitingTime",t.currentTakeTestStepData.waitingTime)}}function yR(i,n){if(1&i&&e.nrm(0,"app-coazt-list-shortcut-question-box",54),2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)}}function SR(i,n){if(1&i&&(e.j41(0,"div",49,11)(2,"div",50)(3,"div",51)(4,"h3",52),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,yR,1,5,"app-coazt-list-shortcut-question-box",53),e.k0s()()()),2&i){const t=e.sdS(1),s=e.XpG();e.R7$(2),e.BMQ("style","width:"+t.offsetWidth+"px",e.$dS),e.R7$(3),e.SpI(" ",e.bMT(6,3,"lang_auto_danh_sach_cau_hoi")," "),e.R7$(2),e.Y8G("ngIf",s.currentTakeTestStepData.nextBackQuestionModel)}}function wR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",55),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",56),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function IR(i,n){if(1&i&&(e.j41(0,"div",57)(1,"div",58)(2,"div",59),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",60)(6,"a",61),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,zf,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function CR(i,n){1&i&&(e.j41(0,"div",67)(1,"div",68)(2,"a",69),e.nrm(3,"img",70),e.nI1(4,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(5,"a",71),e.nrm(6,"img",72),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()),2&i&&(e.R7$(3),e.Y8G("src",e.bMT(4,2,"images/google-play-badge.svg"),e.B4B),e.R7$(3),e.Y8G("src",e.bMT(7,4,"images/2928664.svg"),e.B4B))}function kR(i,n){1&i&&(e.j41(0,"div",63)(1,"p",64),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",67)(5,"div",73)(6,"p",74)(7,"span",75),e.EFF(8,"Google Play"),e.k0s(),e.nrm(9,"azt-download-qr-code",76),e.k0s(),e.j41(10,"p",77)(11,"span",75),e.EFF(12,"App Store"),e.k0s(),e.nrm(13,"azt-download-qr-code",76),e.k0s()()()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.R7$(7),e.Y8G("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),e.R7$(4),e.Y8G("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-student/id1556025594"))}function ER(i,n){if(1&i&&(e.j41(0,"div",57)(1,"div",58)(2,"div",59),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",62)(6,"div",63)(7,"p",64),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,CR,8,6,"div",65),e.k0s(),e.DNE(11,kR,14,7,"div",66),e.k0s(),e.j41(12,"div",60)(13,"a",61),e.nI1(14,"navigationLocalize"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_azt_take_test_only_app_available")),e.R7$(5),e.SpI(" ",e.bMT(9,8,"lang_core_tai_app_tai_day")," "),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.isMobileWebView&&!t.isMobileDevice),e.R7$(2),e.Y8G("routerLink",e.eq3(14,zf,e.bMT(14,10,t.homeLink))),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_quay_lai_trang_chu"))}}function AR(i,n){if(1&i&&e.nrm(0,"app-coazt-wait-to-test-time-box",78),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function OR(i,n){if(1&i&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",79),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}let Mf=(()=>{var i;class n extends i_{ngOnInit(){super.ngOnInit(),this.currentTakeTestStepData.currentStep==this.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE&&this.commonService.openAppMobile(LO.t.AZOTA_STUDENT,{type:"take_test",data:this.currentTakeTestStepData.examObj.hashId})}constructor(){super()}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-test-in-list-layout"]],standalone:!0,features:[e.Vt3,e.aNF],decls:28,vars:20,consts:[["mainTakeTestContentTpl",""],["showListQuestionTpl",""],["chooseStudentTpl",""],["chooseCapacityExamTpl",""],["capacityExamIntro",""],["listQuestionSelectedInDesktop",""],["overTimeTpl",""],["commonErrorTpl",""],["showOnlyAppMessage",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],["listQuestionBar",""],[3,"currentTakeTestStepData"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0 10px",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize","openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[1,"pb-4",3,"ngClass"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],["class","p-1 text-center mt-1",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[3,"openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent","currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType"],[1,"p-1","text-center","mt-1"],["class","text-md font-medium",4,"ngIf"],[1,"text-md","font-medium"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12","lg:col-span-9","sm:mt-0"],[3,"changeAnswerFiles","answerFiles"],["id","examHeader","class","mb-1",3,"imgSrc",4,"ngIf"],["class","box p-3 mb-3",4,"ngIf"],["class","mt-2",4,"ngFor","ngForOf"],["id","examHeader",1,"mb-1",3,"imgSrc"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHTML"],[1,"mt-2"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","nextQuestionEmitter","prevQuestionEmitter","sendAudioEmit","startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","fontSize","overTime","index"],[1,"btn","btn-sm","btn-outline-secondary","mb-5","mt-5","mr-auto",3,"click"],["name","chevron-left","size","20"],[3,"selectStudentEvent","joinClassroomByType"],[3,"selectCapacityExamEmitter","hashId"],[3,"startedExamEvent","capacityComponent","waitingTime"],[1,"col-span-12","lg:col-span-3","mt-3"],[1,"top_gameBar","custom-scroll"],[1,"box","p-3"],[1,"text-md","font-medium","mb-3"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[1,"mt-5","text-center"],[1,"block"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","block",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-student/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(s,o){1&s&&(e.nrm(0,"app-coazt-tracking-full-screen-event",12)(1,"app-coazt-tracking-visible-event",12),e.DNE(2,XO,1,0,"app-coazt-leave-window-event",13)(3,WO,1,1,"ng-container",14)(4,HO,1,1,"ng-container",14)(5,aR,7,14,"div",13)(6,mR,7,13,"ng-template",null,0,e.C5r)(8,TR,7,5,"ng-template",null,1,e.C5r)(10,bR,5,6,"ng-template",null,2,e.C5r)(12,xR,1,1,"ng-template",null,3,e.C5r)(14,vR,1,2,"ng-template",null,4,e.C5r)(16,SR,8,5,"ng-template",null,5,e.C5r)(18,wR,2,9,"ng-template",null,6,e.C5r)(20,IR,10,11,"ng-template",null,7,e.C5r)(22,ER,17,16,"ng-template",null,8,e.C5r)(24,AR,1,2,"ng-template",null,9,e.C5r)(26,OR,1,3,"ng-template",null,10,e.C5r)),2&s&&(e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(6,jf,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(o.currentTakeTestStepData.currentStep)&&!o.questsLoadState.startLoad&&!o.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE),e.R7$(),e.Y8G("ngIf",e.zJS(9,BO,[o.allTakeTestSteps.WAIT_TO_TEST_TIME,o.allTakeTestSteps.CHOOSE_STUDENT,o.allTakeTestSteps.CAPACITY_EXAM_SELECT,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,o.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,o.allTakeTestSteps.SHOW_FULL_SCREEN,o.allTakeTestSteps.SHOW_VIDEO_REQUIRED,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.CAPACITY_EXAM_INTRO]).includes(o.currentTakeTestStepData.currentStep)))},dependencies:[Er,Ar,Or,o_,ie.K,r_,c_,Ff,Vo.s,of.H,Fr,jr.l,__,d_,Rr,zr,Mr,Xi.d,Dr,Gr,z.F2,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,z.Vs,Y.s,F.flO,F.WGl,H.L,z._y,U.Id,q.k],styles:[".top_gameBar[_ngcontent-%COMP%]{position:fixed;top:87px;right:10px;min-width:23.5vw;max-height:70vh;overflow:auto}.margin-question-bar-for-simple-test-for-desktop[_ngcontent-%COMP%]{margin-top:calc(3rem + 30px)!important}.margin-question-bar-for-simple-test-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 27px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 220px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.sheet-screen-monitor[_ngcontent-%COMP%]{max-height:calc(100vh - 400px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-mobile[_ngcontent-%COMP%]{padding-bottom:400px!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}"]}),n})();const Df=(i,n)=>[i,n],RR=(i,n,t,s,o,a,r,l,c,_)=>[i,n,t,s,o,a,r,l,c,_],FR=(i,n,t,s)=>[i,n,t,s],jR=(i,n)=>({"container-content-mobile":i,"container-content-desktop":n}),zR=(i,n)=>({"margin-question-bar-for-simple-test-for-desktop":i,"margin-question-bar-for-simple-test-for-mobile":n}),MR=(i,n)=>({"monitor-screen":i,"monitor-screen-mobile":n}),DR=i=>({joinByExamHashId:i}),Gf=i=>[i];function GR(i,n){1&i&&e.nrm(0,"app-coazt-leave-window-event")}function PR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG();const t=e.sdS(21);e.Y8G("ngTemplateOutlet",t)}}function NR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG();const t=e.sdS(23);e.Y8G("ngTemplateOutlet",t)}}function VR(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",16),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",17),e.eu8(3,14),e.k0s()(),e.nrm(4,"azt-tracking-user-tags"),e.bVm()}if(2&i){const t=e.XpG(3),s=e.sdS(7);e.R7$(2),e.Y8G("ngClass",e.l_i(2,jR,t.isMobileScreenSize,!t.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",s)}}function LR(i,n){if(1&i&&(e.nrm(0,"azt-loading-effect",18),e.nI1(1,"mytranslate")),2&i){const t=e.XpG(3);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function BR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG(3);const t=e.sdS(27);e.Y8G("ngTemplateOutlet",t)}}function $R(i,n){if(1&i&&(e.qex(0),e.DNE(1,VR,5,5,"ng-container",12)(2,LR,2,4,"azt-loading-effect",15)(3,BR,1,1,"ng-container",13),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function QR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG(2);const t=e.sdS(25);e.Y8G("ngTemplateOutlet",t)}}function qR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG(2);const t=e.sdS(11);e.Y8G("ngTemplateOutlet",t)}}function YR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG(2);const t=e.sdS(13);e.Y8G("ngTemplateOutlet",t)}}function UR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG(2);const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function XR(i,n){if(1&i&&e.eu8(0,14),2&i){e.XpG(2);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function WR(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,$R,4,3,"ng-container",12)(2,QR,1,1,"ng-container",13)(3,qR,1,1,"ng-container",13)(4,YR,1,1,"ng-container",13)(5,UR,1,1,"ng-container",13)(6,XR,1,1,"ng-container",13),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.ziG(6,FR,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_SELECT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_INTRO),e.R7$(),e.Y8G("ngIf",e.l_i(11,Df,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function HR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-desktop",25),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("sAztTestResizeService",t.sAztTestResizeService)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)("isMobileScreenSize",t.isMobileScreenSize)}}function JR(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-mobile",26),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)}}function KR(i,n){if(1&i&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function ZR(i,n){if(1&i&&(e.j41(0,"span",29),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function e3(i,n){if(1&i&&(e.j41(0,"div",27),e.DNE(1,KR,3,3,"span",28)(2,ZR,2,1,"span",28),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.capacityComponent)}}function t3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-mobile",30),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)}}function n3(i,n){if(1&i&&(e.DNE(0,HR,1,4,"app-coazt-simple-test-header-box-for-desktop",19)(1,JR,1,2,"app-coazt-simple-test-header-box-for-mobile",20),e.j41(2,"div",21),e.nrm(3,"div",22),e.DNE(4,e3,3,2,"div",23),e.eu8(5,14)(6,14),e.k0s(),e.DNE(7,t3,1,3,"app-coazt-simple-test-footer-box-for-mobile",24)),2&i){const t=e.XpG(),s=e.sdS(9),o=e.sdS(17);e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngClass",e.l_i(8,zR,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngClass",e.l_i(11,MR,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",s),e.R7$(),e.Y8G("ngTemplateOutlet",o),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize)}}function s3(i,n){if(1&i&&(e.j41(0,"div",33),e.nrm(1,"div",34),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&i){let t;const s=e.XpG(2);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,null!==(t=null==s.currentTakeTestStepData.examConfigObj?null:s.currentTakeTestStepData.examConfigObj.header)&&void 0!==t?t:""),e.npT)}}function i3(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"azt-question-standalone-for-student-at-full-test",38),e.bIt("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setEssayAnswerEmitter.emit(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking.emit(o))})("nextQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.nextTo(a.currentTakeTestStepData,o))})("prevQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.backTo(a.currentTakeTestStepData,o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion.emit(o))}),e.k0s()()()}if(2&i){const t=n.$implicit,s=n.index,o=n.last,a=e.XpG(3);e.R7$(),e.FS9("id","question_"+t.id),e.Y8G("hidden",s!=a.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex),e.R7$(),e.Y8G("startQuestionIndex",a.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",a.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",a.followerRenderQuest)("takeTestLayout",a.allTakeTestLayouts.STEP_QUESTION)("isMobile",a.isMobileScreenSize)("examObj",a.currentTakeTestStepData.examObj)("question",t)("index",s)("last",o)("overTime",!1)("fontSize",a.sAztTestResizeService.fontSize)("questionListLength",a.currentTakeTestStepData.viewQuestionObjs.length)}}function o3(i,n){if(1&i&&(e.qex(0),e.DNE(1,i3,3,16,"div",35),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs)}}function a3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-sort-essay-files-box",31),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s(),e.DNE(1,s3,3,3,"div",32)(2,o3,2,1,"ng-container",12)}if(2&i){const t=e.XpG();e.Y8G("answerFiles",t.currentTakeTestStepData.files),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.examConfigObj?null:t.currentTakeTestStepData.examConfigObj.allowHeader),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function r3(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(1,"lucide-icon",40),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"app-join-classroom-box",41),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_button_back")," "),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(4,DR,t.currentTakeTestStepData.examObj.hashId))}}function l3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-select-capacity-exam",42),e.bIt("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectCapacityExamEmitter.emit(o))}),e.k0s()}if(2&i){let t;const s=e.XpG();e.Y8G("hashId",null!==(t=s.currentTakeTestStepData.examObj.hashId)&&void 0!==t?t:"")}}function c3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-capacity-exam-intro",43),e.bIt("startedExamEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("capacityComponent",t.currentTakeTestStepData.capacityComponent)("waitingTime",t.currentTakeTestStepData.waitingTime)}}function u3(i,n){if(1&i&&e.nrm(0,"app-coazt-list-shortcut-question-box",46),2&i){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)}}function _3(i,n){if(1&i&&(e.j41(0,"div",44),e.DNE(1,u3,1,5,"app-coazt-list-shortcut-question-box",45),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function d3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",47),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",48),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function m3(i,n){if(1&i&&(e.j41(0,"div",49)(1,"div",50)(2,"div",51),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",52)(6,"a",53),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,Gf,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function p3(i,n){1&i&&(e.j41(0,"div",59)(1,"div",60)(2,"a",61),e.nrm(3,"img",62),e.nI1(4,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(5,"a",63),e.nrm(6,"img",64),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()),2&i&&(e.R7$(3),e.Y8G("src",e.bMT(4,2,"images/google-play-badge.svg"),e.B4B),e.R7$(3),e.Y8G("src",e.bMT(7,4,"images/2928664.svg"),e.B4B))}function h3(i,n){1&i&&(e.j41(0,"div",55)(1,"p",56),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",59)(5,"div",65)(6,"p",66)(7,"span",67),e.EFF(8,"Google Play"),e.k0s(),e.nrm(9,"azt-download-qr-code",68),e.k0s(),e.j41(10,"p",69)(11,"span",67),e.EFF(12,"App Store"),e.k0s(),e.nrm(13,"azt-download-qr-code",68),e.k0s()()()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.R7$(7),e.Y8G("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),e.R7$(4),e.Y8G("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-student/id1556025594"))}function f3(i,n){if(1&i&&(e.j41(0,"div",49)(1,"div",50)(2,"div",51),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",54)(6,"div",55)(7,"p",56),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,p3,8,6,"div",57),e.k0s(),e.DNE(11,h3,14,7,"div",58),e.k0s(),e.j41(12,"div",52)(13,"a",53),e.nI1(14,"navigationLocalize"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_azt_take_test_only_app_available")),e.R7$(5),e.SpI(" ",e.bMT(9,8,"lang_core_tai_app_tai_day")," "),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.isMobileWebView&&!t.isMobileDevice),e.R7$(2),e.Y8G("routerLink",e.eq3(14,Gf,e.bMT(14,10,t.homeLink))),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_quay_lai_trang_chu"))}}function g3(i,n){if(1&i&&e.nrm(0,"app-coazt-wait-to-test-time-box",70),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function T3(i,n){if(1&i&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",71),2&i){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}let Pf=(()=>{var i;class n extends i_{}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-test-in-step-layout"]],standalone:!0,features:[e.Vt3,e.aNF],decls:28,vars:20,consts:[["mainTakeTestContentTpl",""],["showStepQuestionTpl",""],["chooseStudentTpl",""],["chooseCapacityExamTpl",""],["capacityExamIntro",""],["listQuestionsSelectedInMobile",""],["overTimeTpl",""],["commonErrorTpl",""],["showOnlyAppMessage",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],[3,"currentTakeTestStepData"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0 10px",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize","openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[1,"pb-4",3,"ngClass"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],["class","p-1 text-center mt-1",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[3,"openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent","currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType"],[1,"p-1","text-center","mt-1"],["class","text-md font-medium",4,"ngIf"],[1,"text-md","font-medium"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"],[3,"changeAnswerFiles","answerFiles"],["class","box p-3 mb-3",4,"ngIf"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHTML"],["class","mt-4","style","animation-delay: 0.05s",4,"ngFor","ngForOf"],[1,"mt-4",2,"animation-delay","0.05s"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id","hidden"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","nextQuestionEmitter","prevQuestionEmitter","sendAudioEmit","startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","index","last","overTime","fontSize","questionListLength"],[1,"btn","btn-sm","btn-outline-secondary","mb-5","mt-5","mr-auto",3,"click"],["name","chevron-left","size","20"],[3,"selectStudentEvent","joinClassroomByType"],[3,"selectCapacityExamEmitter","hashId"],[3,"startedExamEvent","capacityComponent","waitingTime"],[1,"box","p-3"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[1,"mt-5","text-center"],[1,"block"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","block",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-student/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(s,o){1&s&&(e.nrm(0,"app-coazt-tracking-full-screen-event",11)(1,"app-coazt-tracking-visible-event",11),e.DNE(2,GR,1,0,"app-coazt-leave-window-event",12)(3,PR,1,1,"ng-container",13)(4,NR,1,1,"ng-container",13)(5,WR,7,14,"div",12)(6,n3,8,14,"ng-template",null,0,e.C5r)(8,a3,3,3,"ng-template",null,1,e.C5r)(10,r3,5,6,"ng-template",null,2,e.C5r)(12,l3,1,1,"ng-template",null,3,e.C5r)(14,c3,1,2,"ng-template",null,4,e.C5r)(16,_3,2,1,"ng-template",null,5,e.C5r)(18,d3,2,9,"ng-template",null,6,e.C5r)(20,m3,10,11,"ng-template",null,7,e.C5r)(22,f3,17,16,"ng-template",null,8,e.C5r)(24,g3,1,2,"ng-template",null,9,e.C5r)(26,T3,1,3,"ng-template",null,10,e.C5r)),2&s&&(e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(6,Df,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(o.currentTakeTestStepData.currentStep)&&!o.questsLoadState.startLoad&&!o.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE),e.R7$(),e.Y8G("ngIf",e.zJS(9,RR,[o.allTakeTestSteps.WAIT_TO_TEST_TIME,o.allTakeTestSteps.CHOOSE_STUDENT,o.allTakeTestSteps.CAPACITY_EXAM_SELECT,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,o.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,o.allTakeTestSteps.SHOW_FULL_SCREEN,o.allTakeTestSteps.SHOW_VIDEO_REQUIRED,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.CAPACITY_EXAM_INTRO]).includes(o.currentTakeTestStepData.currentStep)))},dependencies:[Er,Ar,Or,o_,ie.K,r_,c_,Ff,Vo.s,Fr,jr.l,__,d_,Rr,zr,Mr,Xi.d,Dr,Gr,z.F2,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,z.Vs,Y.s,F.flO,F.WGl,H.L,z._y,U.Id,q.k],styles:[".margin-question-bar-for-simple-test-for-desktop[_ngcontent-%COMP%], .margin-question-bar-for-simple-test-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 24px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 220px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.sheet-screen-monitor[_ngcontent-%COMP%]{max-height:calc(100vh - 400px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-mobile[_ngcontent-%COMP%]{padding-bottom:400px!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}"]}),n})();const b3=()=>({"mr-2 azt-hidden md:block":!0});function x3(i,n){if(1&i&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-effect",3),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function v3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-list-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))})("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEvent(o))})("startedExamEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.startedExam())}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function y3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-step-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))})("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEvent(o))})("startedExamEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.startedExam())}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function S3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-group-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))})("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEvent(o))})("startedExamEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.startedExam())}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function w3(i,n){if(1&i&&(e.qex(0),e.DNE(1,v3,1,8,"app-coazt-take-test-in-list-layout",5)(2,y3,1,8,"app-coazt-take-test-in-step-layout",5)(3,S3,1,8,"app-coazt-take-test-in-group-layout",5),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.GROUP_QUESTION)}}function I3(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_take_test_is_using_anonymous_account"),"\xa0-\xa0"))}function C3(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",7)(2,"div",8)(3,"div",9),e.nrm(4,"div",10),e.nI1(5,"mytranslate"),e.j41(6,"div",11)(7,"a",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToVipUpgrade())}),e.nrm(8,"lucide-icon",13),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",14),e.DNE(12,I3,3,3,"span",4),e.EFF(13),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,6,"lang_take_test_attemps_exam_warning"),e.npT),e.R7$(4),e.Y8G("ngClass",e.lJ4(10,b3)),e.R7$(),e.SpI(" ",e.bMT(10,8,"lang_azt_upgrade_vip")," "),e.R7$(3),e.Y8G("ngIf",t.isAnonymousUser),e.R7$(),e.Lme(" ",t.currentUserId,"\xa0-\xa0 ",t.commonService.getFullCurrentUrl()," ")}}function k3(i,n){if(1&i&&e.DNE(0,w3,4,3,"ng-container",4)(1,C3,14,11,"ng-container",4),2&i){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData&&t.allowAttemptExam),e.R7$(),e.Y8G("ngIf",!t.allowAttemptExam)}}const Nf="azota_capacity_exam_layout";let E3=(()=>{var i;class n extends s_{changeShowType(s){this.layoutType=s,this.browserStorageService.saveSimpleStorage(Nf+"_"+this.hashId,this.layoutType)}getShowType(){const s=this.browserStorageService.getSimpleStorage(Nf+"_"+this.hashId);this.layoutType=s&&"undefined"!==s?s:$t.LIST_QUESTION}selectCapacityExamEvent(s){this.getInitDataFromApi()}startedExam(){this.frontExamService.apiFrontExamStartTestComponentHashIdPost(this.hashId).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);this.getInitDataFromApi()})}startShowTestContent(s,o){return this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,s,a=>{if(this.currentTakeTestStepData=a,this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown)return o(void 0);this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown=!0,this.intervalExamTime(),this.intervalToGetServerTime(),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.getImagesThatUploadAtMobileQrCodeFromApi(this.currentTakeTestStepData.uploadHashCode,r=>{null!=r&&(this.currentTakeTestStepData.files=r)}),this.intervalToSendTestDataToApi(),o(void 0)})}getInitDataFromApi(){this.initStatusObj(),this.checkVipExam(this.hashId,s=>{if(!s)return this.allowAttemptExam=!1,this.stopStatusObj();let o=new Dt(this.hashId,this.browserStorageService).getPassword(),a=new Dt(this.hashId,this.browserStorageService).hasInfo();this.waitDestroy(tt.c.production||tt.c.isProdAzotaVn?this.frontExamService.apiFrontExamInitDataGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{const c=this.encryptionHelper.result(l);this.processInitData(""!=o,c)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{this.processInitData(""!=o,l)}))})}ngOnInit(){super.ngOnInit(),this.initParams(),this.getShowType()}constructor(){super(),this.layoutType=$t.LIST_QUESTION,this.modeViewTest="capacity"}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-capacity-exam"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink","changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","selectCapacityExamEmitter","startedExamEvent",4,"ngIf"],[3,"changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","selectCapacityExamEmitter","startedExamEvent","sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink"],[1,"flex","justify-center","ml-3","mr-3"],[2,"max-width","500px","line-height","35px"],[1,"box","p-3","mt-20"],[1,"text-danger",2,"font-size","18px",3,"innerHTML"],[1,"text-center"],[1,"btn","btn-sm","btn-gradient-primary","mt-3",2,"font-size","18px",3,"click"],["name","gem","size","24",3,"ngClass"],[1,"mt-3","text-center"]],template:function(s,o){if(1&s&&e.DNE(0,x3,2,1,"div",1)(1,k3,2,2,"ng-template",null,0,e.C5r),2&s){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,Mf,Pf,Rf,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const A3=()=>({"mr-2 azt-hidden md:block":!0});function O3(i,n){if(1&i&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-effect",3),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function R3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-list-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function F3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-step-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function j3(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-group-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function z3(i,n){if(1&i&&(e.qex(0),e.DNE(1,R3,1,8,"app-coazt-take-test-in-list-layout",5)(2,F3,1,8,"app-coazt-take-test-in-step-layout",5)(3,j3,1,8,"app-coazt-take-test-in-group-layout",5),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.GROUP_QUESTION)}}function M3(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_take_test_is_using_anonymous_account"),"\xa0-\xa0"))}function D3(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",7)(2,"div",8)(3,"div",9),e.nrm(4,"div",10),e.nI1(5,"mytranslate"),e.j41(6,"div",11)(7,"a",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToVipUpgrade())}),e.nrm(8,"lucide-icon",13),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",14),e.DNE(12,M3,3,3,"span",4),e.EFF(13),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,6,"lang_take_test_attemps_exam_warning"),e.npT),e.R7$(4),e.Y8G("ngClass",e.lJ4(10,A3)),e.R7$(),e.SpI(" ",e.bMT(10,8,"lang_azt_upgrade_vip")," "),e.R7$(3),e.Y8G("ngIf",t.isAnonymousUser),e.R7$(),e.Lme(" ",t.currentUserId,"\xa0-\xa0 ",t.commonService.getFullCurrentUrl()," ")}}function G3(i,n){if(1&i&&e.DNE(0,z3,4,3,"ng-container",4)(1,D3,14,11,"ng-container",4),2&i){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData&&t.allowAttemptExam),e.R7$(),e.Y8G("ngIf",!t.allowAttemptExam)}}const Vf="azota_take_test_layout";let P3=(()=>{var i;class n extends s_{changeShowType(s){this.layoutType=s,this.browserStorageService.saveSimpleStorage(Vf+"_"+this.hashId,this.layoutType)}getShowType(){const s=this.browserStorageService.getSimpleStorage(Vf+"_"+this.hashId);this.layoutType=s&&"undefined"!==s?s:$t.LIST_QUESTION}startShowTestContent(s,o){return this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,s,a=>{if(this.currentTakeTestStepData=a,this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown)return o(void 0);this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown=!0,this.intervalExamTime(),this.intervalToGetServerTime(),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.getImagesThatUploadAtMobileQrCodeFromApi(this.currentTakeTestStepData.uploadHashCode,r=>{null!=r&&(this.currentTakeTestStepData.files=r)}),this.intervalToSendTestDataToApi(),o(void 0)})}getInitDataFromApi(){this.initStatusObj(),this.checkVipExam(this.hashId,s=>{if(!s)return this.allowAttemptExam=!1,this.stopStatusObj();let o=new Dt(this.hashId,this.browserStorageService).getPassword(),a=new Dt(this.hashId,this.browserStorageService).hasInfo();this.waitDestroy(tt.c.production||tt.c.isProdAzotaVn?this.frontExamService.apiFrontExamInitDataGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{const c=this.encryptionHelper.result(l);this.processInitData(""!=o,c)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{this.processInitData(""!=o,l)}))})}ngOnInit(){super.ngOnInit(),this.initParams(),this.getShowType()}constructor(){super(),this.layoutType=$t.LIST_QUESTION,this.modeViewTest="test"}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink","changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi",4,"ngIf"],[3,"changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink"],[1,"flex","justify-center","ml-3","mr-3"],[2,"max-width","500px","line-height","35px"],[1,"box","p-3","mt-20"],[1,"text-danger",2,"font-size","18px",3,"innerHTML"],[1,"text-center"],[1,"btn","btn-sm","btn-gradient-primary","mt-3",2,"font-size","18px",3,"click"],["name","gem","size","24",3,"ngClass"],[1,"mt-3","text-center"]],template:function(s,o){if(1&s&&e.DNE(0,O3,2,1,"div",1)(1,G3,2,2,"ng-template",null,0,e.C5r),2&s){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,Mf,Pf,Rf,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})(),Lf=(()=>{var i;class n{constructor(){this.checkQuestion=new kt.B}listenCheckQuestionEvent(){return this.checkQuestion}sendCheckQuestionEvent(s){this.checkQuestion.next(s)}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),n})();var N3=A(96697);class Bf{setQuestionAnswers(n,t){return n.viewQuestionObjs.forEach(s=>{let o=t.find(a=>1==a.answered&&a.id==s.id);null!=o&&(s.practiceCheckAnswer=o.correct?"correct":"wrong",s.numberOfChecks=o.correct?1:2)}),n}hasWrongAnswer(n){return null!=n.viewQuestionObjs.find(t=>"wrong"==t.practiceCheckAnswer)}calculateStartQuestionPosition(n,t){return Math.floor(n/t)*t}findLastQuestionObjThatHasAnswer(n){return n.viewQuestionObjs.slice().reverse().find(s=>null!=s.practiceCheckAnswer)}}const V3=()=>({"mr-2 text-pending":!0});let L3=(()=>{var i;class n extends Mt._{btnCloseDialog(s){this.dialogRef.close(s)}constructor(s,o){super(o,s),this.dialogRef=s,this.data=o}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["confirm-reset-answer"]],standalone:!0,features:[e.Vt3,e.aNF],decls:17,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","px-3","pt-3"],["name","octagon-alert","size","24",3,"ngClass"],[1,"mt-2"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","confirm-reset-answer-IROMXJMuQD",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","confirm-reset-answer-Dau1W0YPOB",1,"btn","w-24","btn-primary",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5)(8,"azt-mat-dialog-content",6),e.nrm(9,"div",7),e.k0s()()()(),e.j41(10,"div",8)(11,"button",9),e.bIt("click",function(){return o.btnCloseDialog(!1)}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"button",10),e.bIt("click",function(){return o.btnCloseDialog(!0)}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(12,V3)),e.R7$(),e.SpI(" ",e.bMT(6,6,"lang_auto_canh_bao")," "),e.R7$(3),e.Y8G("defaultHeight",60),e.R7$(),e.Y8G("innerHtml",o.data.content,e.npT),e.R7$(3),e.SpI(" ",e.bMT(13,8,"lang_auto_huy")," "),e.R7$(3),e.SpI(" ",e.bMT(16,10,"lang_auto_xac_nhan")," "))},dependencies:[Ms.U,v.MD,v.YU,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const B3=()=>[];function $3(i,n){if(1&i&&(e.j41(0,"button",13)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().index;e.R7$(2),e.JRh(t+1)}}function Q3(i,n){if(1&i&&(e.j41(0,"button",14)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().index;e.R7$(2),e.JRh(t+1)}}function q3(i,n){if(1&i&&(e.j41(0,"button",15)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().index;e.R7$(2),e.JRh(t+1)}}function Y3(i,n){if(1&i&&(e.j41(0,"div",9),e.DNE(1,$3,3,1,"button",10)(2,Q3,3,1,"button",11)(3,q3,3,1,"button",12),e.k0s()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",!t.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","wrong"===t.practiceCheckAnswer||"correct"===t.practiceCheckAnswer&&t.numberOfChecks&&t.numberOfChecks>1),e.R7$(),e.Y8G("ngIf","correct"===t.practiceCheckAnswer&&t.numberOfChecks&&t.numberOfChecks<=1)}}let U3=(()=>{var i;class n extends Mt._{constructor(s,o){super(o,s),this.dialogRef=s,this.data=o,this.isDialog=!1}closeDialog(){this.dialogRef.close()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(De.CP,8),e.rXU(De.Vh,8))},i.\u0275cmp=e.VBU({type:i,selectors:[["show-answer-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:13,vars:10,consts:[[1,"box","py-4","px-4"],[1,"flex","items-center"],[1,"text-md","font-medium","inline-block","mr-2"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-2","overflow-auto"],["pointerEventsMethod","scrollbar",2,"max-height","50vh",3,"visibility","autoHeightDisabled"],[1,"flex","items-center","p-3",2,"flex-wrap","wrap","padding-right","0"],["class","mr-3 mb-3 answer-training-block h-full",4,"ngFor","ngForOf"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-primary","w-24",3,"click"],[1,"mr-3","mb-3","answer-training-block","h-full"],["class","btn border-slate-400 btn-sm w-full h-full",4,"ngIf"],["class","btn border-slate-400 btn-sm w-full h-full bg-slate-400 dark:bg-darkmode-800",4,"ngIf"],["class","btn border-slate-400 btn-sm w-full h-full btn-success text-white",4,"ngIf"],[1,"btn","border-slate-400","btn-sm","w-full","h-full"],[1,"btn","border-slate-400","btn-sm","w-full","h-full","bg-slate-400","dark:bg-darkmode-800"],[1,"btn","border-slate-400","btn-sm","w-full","h-full","btn-success","text-white"]],template:function(s,o){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",3)(6,"ng-scrollbar",4)(7,"div",5),e.DNE(8,Y3,4,3,"div",6),e.k0s()()(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return o.closeDialog()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()),2&s){let a;e.R7$(3),e.SpI(" ",e.bMT(4,5,"lang_auto_danh_sach_cau_hoi")," "),e.R7$(3),e.Y8G("visibility","hover")("autoHeightDisabled",!1),e.R7$(2),e.Y8G("ngForOf",null!==(a=o.data.questionList)&&void 0!==a?a:e.lJ4(9,B3)),e.R7$(3),e.SpI(" ",e.bMT(12,7,"lang_auto_dong")," ")}},dependencies:[v.MD,v.Sq,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,U.Yh,q.k],encapsulation:2}),n})();const h_=()=>({"text-success":!0}),$f=()=>({"text-danger":!0}),Qf=()=>({"text-warning":!0});function X3(i,n){1&i&&(e.j41(0,"div"),e.nrm(1,"lucide-icon",9),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,h_)))}function W3(i,n){1&i&&e.nrm(0,"div",10)}function H3(i,n){if(1&i&&(e.j41(0,"div",7),e.DNE(1,X3,2,2,"div",4)(2,W3,1,0,"div",8),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf","correct"===t.practiceCheckAnswer&&1==t.numberOfChecks),e.R7$(),e.Y8G("ngIf","correct"===t.practiceCheckAnswer&&1!=t.numberOfChecks||"correct"!==t.practiceCheckAnswer)}}function J3(i,n){1&i&&e.nrm(0,"div",12)}function K3(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",13),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,$f)))}function Z3(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,h_)))}function eF(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,Qf)))}function tF(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,J3,1,0,"div",11)(2,K3,2,2,"div",6)(3,Z3,2,2,"div",6)(4,eF,2,2,"div",6),e.k0s()),2&i){const t=e.XpG(),s=t.$implicit,o=t.index,a=e.XpG(3);e.R7$(),e.Y8G("ngIf",o>a.curQuestion),e.R7$(),e.Y8G("ngIf","wrong"===s.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","correct"===s.practiceCheckAnswer&&1==s.numberOfChecks),e.R7$(),e.Y8G("ngIf","correct"===s.practiceCheckAnswer&&1!=s.numberOfChecks)}}function nF(i,n){if(1&i&&(e.j41(0,"li"),e.DNE(1,H3,3,2,"div",6)(2,tF,5,4,"div",4),e.k0s()),2&i){const t=n.index,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",t===s.curQuestion),e.R7$(),e.Y8G("ngIf",t!==s.curQuestion)}}function sF(i,n){if(1&i&&(e.qex(0),e.DNE(1,nF,3,2,"li",5),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.questionList)}}function iF(i,n){1&i&&e.nrm(0,"div",15)}function oF(i,n){1&i&&e.nrm(0,"div",12)}function aF(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",13),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,$f)))}function rF(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,h_)))}function lF(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,Qf)))}function cF(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,oF,1,0,"div",11)(2,aF,2,2,"div",6)(3,rF,2,2,"div",6)(4,lF,2,2,"div",6),e.k0s()),2&i){const t=e.XpG(2),s=t.$implicit,o=t.index,a=e.XpG(3);e.R7$(),e.Y8G("ngIf",o>a.curQuestion),e.R7$(),e.Y8G("ngIf","wrong"===s.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","correct"===s.practiceCheckAnswer&&1==s.numberOfChecks),e.R7$(),e.Y8G("ngIf","correct"===s.practiceCheckAnswer&&1!=s.numberOfChecks)}}function uF(i,n){if(1&i&&(e.qex(0),e.DNE(1,iF,1,0,"div",14)(2,cF,5,4,"div",4),e.bVm()),2&i){const t=e.XpG().index,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",t===s.curQuestion),e.R7$(),e.Y8G("ngIf",t!==s.curQuestion)}}function _F(i,n){if(1&i&&(e.j41(0,"li"),e.DNE(1,uF,3,2,"ng-container",4),e.k0s()),2&i){const t=n.index,s=e.XpG(3);e.R7$(),e.Y8G("ngIf",t>=s.startQuestionPositionInPagination&&t<s.startQuestionPositionInPagination+s.numberOfShowItem)}}function dF(i,n){if(1&i&&(e.qex(0),e.DNE(1,_F,2,1,"li",5),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.questionList)}}function mF(i,n){if(1&i&&(e.j41(0,"div",1)(1,"nav",2)(2,"ul",3),e.DNE(3,sF,2,1,"ng-container",4)(4,dF,2,1,"ng-container",4),e.k0s()()()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.questionList.length<=t.numberOfShowItem),e.R7$(),e.Y8G("ngIf",t.questionList.length>t.numberOfShowItem)}}let pF=(()=>{var i;class n extends Z.H{}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["list-status-answer"]],inputs:{questionList:"questionList",curQuestion:"curQuestion",startQuestionPositionInPagination:"startQuestionPositionInPagination",numberOfShowItem:"numberOfShowItem"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","azt-hidden md:block",4,"ngIf"],[1,"azt-hidden","md:block"],[1,"inline-block",2,"vertical-align","middle"],[1,"pagination","items-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","mx-1",4,"ngIf"],[1,"mx-1"],["class","w-4 h-4 rounded-full border-w-2 border-slate-400 dark:border-darkmode-400",4,"ngIf"],["name","check","size","16",3,"ngClass"],[1,"w-4","h-4","rounded-full","border-w-2","border-slate-400","dark:border-darkmode-400"],["class","w-2 h-2 rounded-full border-w-2 border-slate-400 dark:border-darkmode-400 mx-1",4,"ngIf"],[1,"w-2","h-2","rounded-full","border-w-2","border-slate-400","dark:border-darkmode-400","mx-1"],["name","x","size","16",3,"ngClass"],["class","w-4 h-4 rounded-full border-w-2 border-slate-400 dark:border-darkmode-400 mx-1",4,"ngIf"],[1,"w-4","h-4","rounded-full","border-w-2","border-slate-400","dark:border-darkmode-400","mx-1"]],template:function(s,o){1&s&&e.DNE(0,mF,5,2,"div",0),2&s&&e.Y8G("ngIf",o.questionList.length)},dependencies:[v.MD,v.YU,v.Sq,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function hF(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",4),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function fF(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_well_done")," "))}function gF(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_pay_more_attention_okay")," "))}function TF(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_keep_up_the_good_work_keep_going")," "))}function bF(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_keep_trying_harder_okay")," "))}function xF(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",30),e.nrm(2,"lucide-icon",31),e.k0s(),e.j41(3,"div",32)(4,"div",33),e.DNE(5,fF,3,3,"span",21)(6,gF,3,3,"span",21),e.k0s(),e.j41(7,"div",34),e.DNE(8,TF,3,3,"span",21)(9,bF,3,3,"span",21),e.k0s()(),e.bVm()),2&i){const t=e.XpG(3);e.R7$(5),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks<=1),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks>1),e.R7$(2),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks<=1),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks>1)}}function vF(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",35),e.nrm(1,"lucide-icon",36),e.k0s(),e.j41(2,"div",32)(3,"div",33)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"div",34)(8,"span")(9,"span"),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"a",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.skipQuestion())}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()()}2&i&&(e.R7$(5),e.JRh(e.bMT(6,3,"lang_testbank_frontend_not_correct")+"!"),e.R7$(5),e.JRh(e.bMT(11,5,"lang_testbank_frontend_try_again_or_you_can")+" "),e.R7$(3),e.SpI(" ",e.bMT(14,7,"lang_testbank_frontend_skip")," "))}function yF(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.DNE(3,xF,10,4,"ng-container",25)(4,vF,15,9,"ng-template",null,1,e.C5r),e.j41(6,"div",26)(7,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.closeStatusBoxAnswer())}),e.j41(8,"span",28),e.nrm(9,"lucide-icon",29),e.k0s()()()()()()}if(2&i){const t=e.sdS(5),s=e.XpG(2);e.R7$(3),e.Y8G("ngIf","correct"==s.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer)("ngIfElse",t)}}function SF(i,n){1&i&&e.nrm(0,"azt-loading-ui",40)}function wF(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.checkAnswerQuestionByApi(!1))}),e.DNE(1,SF,1,0,"azt-loading-ui",39),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",!t.sAztTestQuestionService.checkQuestionHasAnswer(t.currentTakeTestStepData,t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(2),e.JRh(e.bMT(4,3,null==t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer?"lang_testbank_check":"lang_testbank_try_again"))}}function IF(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextQuestion(o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id))}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,t.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion?"lang_testbank_frontend_view_results":"lang_testbank_next_question")),e.R7$(3),e.SpI("(",t.countdown+"s",")")}}function CF(i,n){1&i&&(e.qex(0),e.j41(1,"div",42),e.nrm(2,"div",43)(3,"div",44),e.k0s(),e.bVm())}function kF(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.resetAnswerQuestion())}),e.j41(2,"span",7),e.nrm(3,"lucide-icon",8),e.k0s(),e.j41(4,"span",9),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showAnswerDialog())}),e.j41(8,"span",11),e.nrm(9,"lucide-icon",12),e.k0s(),e.j41(10,"span",13),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",14),e.nrm(14,"list-status-answer",15),e.k0s()(),e.j41(15,"div",16)(16,"div",17),e.DNE(17,yF,10,2,"div",18)(18,wF,5,5,"button",19)(19,IF,6,4,"button",20)(20,CF,4,0,"ng-container",21),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",!t.sAztTestQuestionService.hasWrongAnswer||t.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion),e.R7$(4),e.SpI(" ",e.bMT(6,11,"lang_testbank_start_over")," "),e.R7$(6),e.SpI(" ",e.bMT(12,13,"lang_auto_cau")+" "+(t.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex+1)+"/"+t.currentTakeTestStepData.viewQuestionObjs.length," "),e.R7$(3),e.Y8G("questionList",t.currentTakeTestStepData.viewQuestionObjs)("curQuestion",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex)("startQuestionPositionInPagination",t.startQuestionPositionInPagination)("numberOfShowItem",t.limitNumberQuestionsInPagination),e.R7$(3),e.Y8G("ngIf",t.sAztTestQuestionService.isShowAnswerStatusBox&&t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer&&t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer||"wrong"===t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","correct"===t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf",t.sAztTestQuestionService.isShowSuccessAnimationBox)}}let EF=(()=>{var i;class n extends Z.H{checkAnswerQuestionByApi(s){s||(this.sAztTestQuestionService.isCheckingAnswer=!0);let o=this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj,a={questionId:o.id,answerContent:[{index:999,content:""}]};const r={examResultId:this.currentTakeTestStepData.termExamResultId,answer:s?a:this.sAztTestQuestionService.getAnswerOfQuestion(this.currentTakeTestStepData,o.id)??a};this.waitDestroy(this.frontExamResultService.apiFrontExamResultSaveQuestionResultEncryptPost(this.encryptionHelper.payload(r),this.currentTakeTestStepData.examObj.hashId).subscribe(l=>{if(!l.success)return this.sAztTestQuestionService.isCheckingAnswer=!1,this.errorStatusObj(l.message,!0);let c=l.data;o.numberOfChecks=(o.numberOfChecks??0)+1,s?o.practiceCheckAnswer="wrong":(this.sAztTestQuestionService.isShowAnswerStatusBox=!0,o.practiceCheckAnswer=c?.correct?"correct":"wrong","correct"==o.practiceCheckAnswer&&(this.sAztTestQuestionService.isShowSuccessAnimationBox=!0,o.numberOfChecks<=1&&this.sAztTestQuestionService.trainingAudioSuccess.play(),this.startCountdown(o.id))),"correct"!==o.practiceCheckAnswer&&(this.sAztTestQuestionService.hasWrongAnswer=!0),this.sAztTestQuestionService.isCheckingAnswer=!1}))}finishTrainingTest(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamFinishExamResultGet(this.currentTakeTestStepData.examObj.hashId??"",this.currentTakeTestStepData.termExamResultId).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);if(s.data?.status){try{this.localStorageObject.clearAllCache(),this.sAztFullScreenService.exitFullscreen()}catch{}this.stopStatusObj(),this.myNavigation(`/test/submit-test/${this.tenantId}/${this.curCateId}/${this.currentTakeTestStepData.examObj.hashId}/${this.currentTakeTestStepData.termExamResultId}`)}}))}nextQuestion(s){if(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id==s){if(this.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion)return this.finishTrainingTest();this.currentTakeTestStepData=this.sAztTestNextBackQuestionService.nextTo(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj),this.startQuestionPositionInPagination=this.sAztTrainingService.calculateStartQuestionPosition(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex,this.limitNumberQuestionsInPagination),this.sAztTestQuestionService.isShowSuccessAnimationBox=!1}}skipQuestion(){this.nextQuestion(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)}resetAnswerQuestion(){const o={content:this.commonService.myTranslateInstant("lang_testbank_when_confirming_the_system_will_reset_all_the_answers_you_have_chosen")+"!"};this.sAztDialogService.open(L3,{data:o,width:"500px"}).afterClosed().subscribe(r=>{r&&(this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamResetExamResultGet(this.currentTakeTestStepData.examObj.hashId??"",this.currentTakeTestStepData.termExamResultId).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.sAztTestQuestionService.clearAllData(this.currentTakeTestStepData),this.stopStatusObj(),this.resetTrainingTestEvent.emit()})))})}showHintAnswer(){this.currentTakeTestStepData=this.sAztTestQuestionService.setShowHint(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id),"correct"!==this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer&&this.checkAnswerQuestionByApi(!0)}showAnswerDialog(){this.sAztDialogService.open(U3,{data:{questionList:this.currentTakeTestStepData.viewQuestionObjs},width:"800px"})}closeStatusBoxAnswer(){this.sAztTestQuestionService.isShowAnswerStatusBox=!1}startCountdown(s){this.countdownSubscription&&this.countdownSubscription.unsubscribe(),this.countdown=3,this.countdownSubscription=(0,Bn.Y)(1e3).pipe((0,N3.s)(this.countdown)).subscribe({next:o=>this.countdown=this.countdown-1-o,complete:()=>this.nextQuestion(s)})}ngOnInit(){let s=this.sAztTrainingService.findLastQuestionObjThatHasAnswer(this.currentTakeTestStepData);null!=s&&(this.currentTakeTestStepData=this.sAztTestNextBackQuestionService.nextTo(this.currentTakeTestStepData,s)),this.sAztTestQuestionService.hasWrongAnswer=this.sAztTrainingService.hasWrongAnswer(this.currentTakeTestStepData),this.startQuestionPositionInPagination=this.sAztTrainingService.calculateStartQuestionPosition(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex,this.limitNumberQuestionsInPagination),this.testCheckQuestionService.listenCheckQuestionEvent().subscribe(o=>this.checkAnswerQuestionByApi(!1))}ngOnDestroy(){this.countdownSubscription&&this.countdownSubscription.unsubscribe()}constructor(s,o,a,r,l){super(),this.localStorageObject=s,this.frontExamResultService=o,this.frontExamService=a,this.sAztDialogService=r,this.encryptionHelper=l,this.resetTrainingTestEvent=new e.bkB,this.startQuestionPositionInPagination=0,this.limitNumberQuestionsInPagination=15,this.countdown=3,this.countdownSubscription=new t_.yU,this.sAztFullScreenService=new Ns,this.sAztTrainingService=new Bf,this.testCheckQuestionService=(0,e.WQX)(Lf)}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(ff.G),e.rXU(Ce.Ry),e.rXU(Ce.iB),e.rXU(Mn.i),e.rXU(hf.w))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-training-footer-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",requiredNextBackQuestionModel:"requiredNextBackQuestionModel",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",sAztTestQuestionService:"sAztTestQuestionService",tenantId:"tenantId",curCateId:"curCateId"},outputs:{resetTrainingTestEvent:"resetTrainingTestEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["doneLoading",""],["incorrectTpl",""],[1,"box","z-50","rounded-none","fixed","flex","items-center","bottom-0","left-0","p-3","w-full"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"flex","items-center","mr-auto"],["azt-track-service","take-training-q7-dI4je6b",1,"btn","border-transparent","shadow-none","btn-outline-primary","mr-2",3,"click","disabled"],[1,"w-5","h-5"],["name","rotate-ccw","size","20"],[1,"azt-hidden","md:block","ml-2"],["azt-track-service","take-training-QglPB2g4wq",1,"btn","border-transparent","shadow-none","btn-outline-primary","mr-2",3,"click"],[1,"w-5","h-5","mr-2"],["name","clipboard-list","size","20"],[1,"font-medium"],[1,"list-status-answer"],[3,"questionList","curQuestion","startQuestionPositionInPagination","numberOfShowItem"],[1,"ml-auto"],[1,"relative"],["class","box-status",4,"ngIf"],["azt-track-service","take-training-Vy9M0G9VK1u","class","btn btn-primary w-32",3,"disabled","click",4,"ngIf"],["azt-track-service","take-training-EtpBWukccKO","class","btn btn-primary w-48",3,"click",4,"ngIf"],[4,"ngIf"],[1,"box-status"],[1,"box","box-status-answer","absolute","p-3"],[1,"flex","items-center","box-status-answer-content","relative"],[4,"ngIf","ngIfElse"],[1,"absolute",2,"top","-8px","right","-8px"],["azt-track-service","take-training-7mWj7MPCixD",1,"btn","btn-sm","btn-outline-danger","btn-transparent",3,"click"],[1,"w-4","h-4","inline-block"],["name","x","size","18"],[1,"w-10","h-10","text-pending"],["name","star","size","40"],[1,"ml-3"],[1,"font-medium","text-lg"],[1,"mt-0.5"],[1,"w-10","h-10","text-primary"],["name","rotate-ccw","size","40"],["azt-track-service","take-training-CInmJPjmtb",1,"btn-text-primary","font-medium",3,"click"],["azt-track-service","take-training-Vy9M0G9VK1u",1,"btn","btn-primary","w-32",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["azt-track-service","take-training-EtpBWukccKO",1,"btn","btn-primary","w-48",3,"click"],[1,"pyro"],[1,"before"],[1,"after"]],template:function(s,o){if(1&s&&(e.j41(0,"div",2),e.DNE(1,hF,1,1,"azt-loading-effect",3)(2,kF,21,15,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,pF,wt.R,v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],styles:['.box-status-answer[_ngcontent-%COMP%]{width:280px;top:-110px;right:50px}.box-status-answer-content[_ngcontent-%COMP%]:after{border-left:20px solid transparent;border-top:20px solid #fff;bottom:-30px;content:"";position:absolute;right:20px}.icon-triangle[_ngcontent-%COMP%]{top:7px;right:55px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.pyro[_ngcontent-%COMP%] > .before[_ngcontent-%COMP%], .pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{position:absolute;width:5px;height:5px;border-radius:50%;box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff;animation:1s _ngcontent-%COMP%_bang ease-out infinite backwards,1s _ngcontent-%COMP%_gravity ease-in infinite backwards,5s _ngcontent-%COMP%_position linear infinite backwards}.pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{animation-delay:1.25s,1.25s,1.25s;animation-duration:1.25s,1.25s,6.25s}@keyframes _ngcontent-%COMP%_bang{to{box-shadow:-48px -347.6666666667px #00d9ff,-81px -54.6666666667px #00ff62,91px -378.6666666667px #00ff62,-63px -322.6666666667px #00e5ff,-137px -308.6666666667px #00ff8c,55px -46.6666666667px #00a2ff,232px -338.6666666667px #ff2600,-172px 66.3333333333px #ff7b00,140px 22.3333333333px #2f00ff,79px -408.6666666667px #d0ff00,101px -23.6666666667px #00bfff,-2px -213.6666666667px #ff0091,-205px -40.6666666667px #09f,179px -40.6666666667px #f0a,45px -70.6666666667px #ff6200,-159px -102.6666666667px #ff0080,71px -168.6666666667px #ff003c,-65px -.6666666667px #ae00ff,-181px 11.3333333333px #70f,-33px -144.6666666667px #0dff00,-224px -379.6666666667px #00aeff,224px 24.3333333333px #26ff00,-17px -320.6666666667px #ff4800,199px -391.6666666667px #40ff00,-136px -159.6666666667px #0073ff,230px -121.6666666667px #0091ff,216px -170.6666666667px #2a00ff,-117px -222.6666666667px #00ff26,-105px -8.6666666667px #ffea00,-41px -378.6666666667px #f30,50px -57.6666666667px #00ff73,151px 67.3333333333px #03f,-156px -236.6666666667px #af0,38px -407.6666666667px #d4ff00,-59px 61.3333333333px #7bff00,58px -279.6666666667px #2600ff,-100px -102.6666666667px #ff4d00,22px -89.6666666667px #59ff00,-158px 20.3333333333px #0f3,-249px -99.6666666667px #f0d,125px 83.3333333333px #00ff19,74px -209.6666666667px #ff004c,31px -263.6666666667px #00ff15,170px -110.6666666667px #eaff00,144px -329.6666666667px #0df,94px -182.6666666667px #0015ff,-147px -80.6666666667px #04ff00,194px -405.6666666667px #0f9,-28px -154.6666666667px #02f,192px -312.6666666667px #f02,126px -188.6666666667px #40ff00}}@keyframes _ngcontent-%COMP%_gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes _ngcontent-%COMP%_position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}']}),n})(),AF=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.showUploadEssayFilesDialog=new e.bkB,this.selectStudentEvent=new e.bkB,this.changeAnswerFiles=new e.bkB,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.setResultTracking=new e.bkB,this.sendAudioForQuestion=new e.bkB,this.submitTestToApi=new e.bkB,this.allTakeTestSteps=Ie,this.allTakeTestLayouts=$t,this.allowContextMenu=!tt.c.production}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-training-base-layout"]],inputs:{sAztTestResizeService:"sAztTestResizeService",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",sAztTestQuestionService:"sAztTestQuestionService",currentTakeTestStepData:"currentTakeTestStepData",followerRenderQuest:"followerRenderQuest",questsLoadState:"questsLoadState",isMobileScreenSize:"isMobileScreenSize",homeLink:"homeLink",backToLink:"backToLink",tenantId:"tenantId",curCateId:"curCateId"},outputs:{showUploadEssayFilesDialog:"showUploadEssayFilesDialog",selectStudentEvent:"selectStudentEvent",changeAnswerFiles:"changeAnswerFiles",setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",setResultTracking:"setResultTracking",sendAudioForQuestion:"sendAudioForQuestion",submitTestToApi:"submitTestToApi"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(s,o){},dependencies:[v.MD,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k],encapsulation:2}),n})();function OF(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",1),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFullScreenMode())}),e.nrm(2,"lucide-icon",2),e.k0s()}2&i&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_toan_man_hinh"))}function RF(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",1),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFullScreenMode())}),e.nrm(2,"lucide-icon",3),e.k0s()}2&i&&e.FS9("matTooltip",e.bMT(1,1,"lang_testbank_tested_list_exit_full_screen"))}let FF=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.sAztFullScreenService=new Ns,this.isFullScreenMode=!1}changeFullScreenMode(){this.isFullScreenMode?this.sAztFullScreenService.exitFullscreen():this.sAztFullScreenService.showFullScreen(),this.isFullScreenMode=!this.isFullScreenMode}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-full-screen-mode-box"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["class","btn btn-sm btn-secondary",3,"matTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click","matTooltip"],["name","maximize","size","18"],["name","minimize","size","18"]],template:function(s,o){1&s&&e.DNE(0,OF,3,3,"button",0)(1,RF,3,3,"button",0),2&s&&(e.Y8G("ngIf",!o.isFullScreenMode),e.R7$(),e.Y8G("ngIf",o.isFullScreenMode))},dependencies:[v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const qf=()=>({"mr-2":!0});function jF(i,n){1&i&&(e.qex(0),e.EFF(1),e.nI1(2,"mytranslate"),e.bVm()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_button_back")))}function zF(i,n){if(1&i&&(e.j41(0,"span",17),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_thi_sinh"),": ",t.currentTakeTestStepData.testingUserObj.fullName,"")}}function MF(i,n){if(1&i&&e.nrm(0,"app-testbank-frontend-count-down-box",18),2&i){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function DF(i,n){1&i&&(e.EFF(0),e.nI1(1,"mytranslate")),2&i&&e.SpI(" ",e.bMT(1,1,"lang_auto_khong_gioi_han")," ")}let GF=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.openQuitDialogEvent=new e.bkB}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-training-header-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",sAztTestResizeService:"sAztTestResizeService",isMobileScreenSize:"isMobileScreenSize"},outputs:{openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:22,vars:16,consts:[["unlimitedTimeTpl",""],[1,"fixed","w-full","bg-white","items-center","flex","top-0","left-0","ng-star-inserted","p-3",2,"z-index","111","border-bottom","1px solid #ccc"],["azt-track-service","training-header-box-phEe7AjEd",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[4,"ngIf"],[1,"relative","mx-auto"],["class","text-md font-medium",4,"ngIf"],[1,"mr-6"],[1,"flex","items-center"],["name","timer","size","20",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],[1,"flex","items-center","dropdown","mr-3"],["azt-track-service","take-test-DqyfiYKf45",1,"btn","btn-sm","btn-secondary","mr-2",3,"click","disabled","matTooltip"],["name","zoom-out","size","18"],["azt-track-service","take-test-lcadhTPzm",1,"btn","btn-sm","btn-secondary",3,"click","disabled","matTooltip"],["name","zoom-in","size","18"],[1,"flex","items-center","dropdown"],[1,"text-md","font-medium"],[3,"totalSecond","useCountDown"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",1)(1,"div")(2,"button",2),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(3,"lucide-icon",3),e.DNE(4,jF,3,3,"ng-container",4),e.k0s()(),e.j41(5,"div",5),e.DNE(6,zF,3,4,"span",6),e.k0s(),e.j41(7,"div",7)(8,"div",8),e.nrm(9,"lucide-icon",9),e.DNE(10,MF,1,2,"app-testbank-frontend-count-down-box",10)(11,DF,2,3,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(13,"div",11)(14,"button",12),e.nI1(15,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomOut())}),e.nrm(16,"lucide-icon",13),e.k0s(),e.j41(17,"button",14),e.nI1(18,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomIn())}),e.nrm(19,"lucide-icon",15),e.k0s()(),e.j41(20,"div",16),e.nrm(21,"app-coazt-full-screen-mode-box"),e.k0s()()}if(2&s){const a=e.sdS(12);e.R7$(3),e.Y8G("ngClass",e.lJ4(14,qf)),e.R7$(),e.Y8G("ngIf",!o.isMobileScreenSize),e.R7$(2),e.Y8G("ngIf",!o.isMobileScreenSize),e.R7$(3),e.Y8G("ngClass",e.lJ4(15,qf)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(4),e.Y8G("disabled",o.sAztTestResizeService.fontSize<=1)("matTooltip",e.bMT(15,10,"lang_take_test_zoom_out")),e.R7$(3),e.Y8G("disabled",o.sAztTestResizeService.fontSize>=2)("matTooltip",e.bMT(18,12,"lang_take_test_zoom_in"))}},dependencies:[Cn,FF,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();function PF(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"span",4),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showExplainOfQuestion.emit())}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.JRh(e.bMT(3,2,"lang_testbank_frontend_you_dont_know_how_to_do_it")+"? "),e.R7$(3),e.SpI(" ",e.bMT(6,4,"lang_testbank_frontend_please_use_the_hint")," "))}function NF(i,n){if(1&i&&(e.j41(0,"div",6)(1,"div",4),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",7),e.nrm(5,"azt-dynamic-hook",8),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_testbank_hint")," "),e.R7$(3),e.Y8G("content",t.questionObj.help)}}function VF(i,n){if(1&i&&(e.j41(0,"div",1),e.DNE(1,PF,7,6,"div",2)(2,NF,6,4,"div",3),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.isShowExplain),e.R7$(),e.Y8G("ngIf",t.isShowExplain)}}let LF=(()=>{var i;class n extends Z.H{constructor(){super(...arguments),this.isShowExplain=!1,this.showExplainOfQuestion=new e.bkB}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-explain-box-for-student-at-step-test"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},outputs:{showExplainOfQuestion:"showExplainOfQuestion"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","p-3",4,"ngIf"],[1,"p-3"],[4,"ngIf"],["class","p-3 mt-4",4,"ngIf"],[1,"font-medium"],[1,"btn-text-primary","font-medium",3,"click"],[1,"p-3","mt-4"],[1,"mt-2"],[3,"content"]],template:function(s,o){1&s&&e.DNE(0,VF,3,2,"div",0),2&s&&e.Y8G("ngIf",o.questionObj.help)},dependencies:[Go.x,v.MD,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,H.L,U.Id,q.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const BF=i=>({"skeleton-box-loading":i}),$F=i=>({"pb-2":i});function QF(i,n){if(1&i&&e.nrm(0,"div",10),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,BF,t.renderConfigObj.isFirstRender))}}function qF(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-test-audio-ui",18),e.bIt("sendAudioEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioEmit.emit(o))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("questionObj",t.questionObj)("isShowList",!0)("totalLimit",(t.examObj.limitAudio||-1)>0?t.examObj.limitAudio||-1:0)}}function YF(i,n){if(1&i&&(e.j41(0,"div",11)(1,"div",12),e.nrm(2,"azt-question-group-content-box",13),e.j41(3,"div",14),e.DNE(4,qF,1,3,"azt-test-audio-ui",15),e.j41(5,"div",16),e.nrm(6,"azt-question-label-box",17),e.k0s(),e.nrm(7,"azt-question-content-box",13),e.k0s()()()),2&i){const t=e.XpG();e.R7$(),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize&&t.fontSize<1.5?t.fontSize+.5:"1.7"),e.Y8G("id","question_render_container_"+t.questionObj.id)("ngClass",e.eq3(17,$F,t.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.R7$(2),e.Y8G("ngIf",t.questionObj.attachments.length>0),e.R7$(2),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)}}function UF(i,n){1&i&&e.nrm(0,"div",19)}function XF(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-question-explain-box-for-student-at-step-test",20),e.bIt("showExplainOfQuestion",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplainOfQuestion())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("isShowExplain",t.isShowExplain)}}let WF=(()=>{var i;class n extends $u.I{showExplainOfQuestion(){this.showHintAnswer.emit()}ngOnInit(){super.ngOnInit();let s=new Qu.C(!0,!0,!1);super.initData(s,this.follower,this.questionObj),this.listenFontChanged&&this.waitDestroy(this.listenFontChanged.subscribe(()=>{this.reRenderContent()}))}constructor(){super(),this.follower=new Dn.e,this.curQuestionIndex=0,this.fontSize=1,this.isShowExplain=!1,this.currentAnswerIsCorrect=!1,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.sendAudioEmit=new e.bkB,this.setResultTracking=new e.bkB,this.showHintAnswer=new e.bkB}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-question-standalone-for-step-test"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",fontSize:"fontSize",listenFontChanged:"listenFontChanged",isShowExplain:"isShowExplain",currentAnswerIsCorrect:"currentAnswerIsCorrect",currentAnswerStatus:"currentAnswerStatus"},outputs:{setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",sendAudioEmit:"sendAudioEmit",setResultTracking:"setResultTracking",showHintAnswer:"showHintAnswer"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:8,consts:[["elementRended",""],[1,"question-standalone-step-container-box","box"],[1,"question-standalone-step-question-box","p-3"],["load_effect_lazy","",1,"question-standalone-box",2,"box-shadow","none","margin","0px",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-step-answer-container-box"],[1,"ml-auto","mr-auto","w-full","relative"],[3,"setResultTracking","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","question","questionIndex","fontSize"],["class","absolute w-full h-full top-0 left-0 z-50",4,"ngIf"],[3,"questionObj","renderConfigObj","isShowExplain","showExplainOfQuestion",4,"ngIf"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container",2,"padding","0px",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList","totalLimit","sendAudioEmitter",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"sendAudioEmitter","questionObj","isShowList","totalLimit"],[1,"absolute","w-full","h-full","top-0","left-0","z-50"],[3,"showExplainOfQuestion","questionObj","renderConfigObj","isShowExplain"]],template:function(s,o){if(1&s){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.DNE(3,QF,1,3,"div",4)(4,YF,8,19,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"azt-question-answer-view-for-student-at-step-page",7),e.bIt("setResultTracking",function(l){return e.eBV(a),e.Njj(o.setResultTracking.emit(l))})("setOneChoiceAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setOneChoiceAnswerEmitter.emit(l))})("setTrueFalseAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setTrueFalseAnswerEmitter.emit(l))})("setFillAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setFillAnswerEmitter.emit(l))})("setEssayAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setEssayAnswerEmitter.emit(l))}),e.k0s(),e.DNE(9,UF,1,0,"div",8),e.k0s()(),e.DNE(10,XF,1,3,"azt-question-explain-box-for-student-at-step-test",9),e.k0s()}if(2&s){const a=e.sdS(5);e.R7$(2),e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a),e.R7$(5),e.Y8G("question",o.questionObj)("questionIndex",o.curQuestionIndex)("fontSize",o.fontSize),e.R7$(),e.Y8G("ngIf",o.currentAnswerIsCorrect),e.R7$(),e.Y8G("ngIf","wrong"==o.currentAnswerStatus)}},dependencies:[Lu.y,yr.c,Bu.S,Vu.$,Cf,LF,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,Y.s,F.flO,H.L,U.Id,q.k,Sr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const HF=["trainingFooterBox"],JF=["leaveWindowBox"],Yf=(i,n)=>[i,n],KF=(i,n,t,s,o,a,r,l)=>[i,n,t,s,o,a,r,l],ZF=(i,n,t,s)=>[i,n,t,s],e4=(i,n)=>({"container-content-mobile":i,"container-content-desktop":n}),t4=(i,n)=>({"margin-question-bar-for-training-for-desktop":i,"margin-question-bar-for-training-for-mobile":n}),n4=(i,n)=>({"monitor-screen":i,"monitor-screen-mobile":n}),s4=i=>({joinByExamHashId:i}),i4=i=>[i];function o4(i,n){if(1&i&&(e.j41(0,"div",11),e.nrm(1,"azt-loading-effect",12),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function a4(i,n){1&i&&e.nrm(0,"app-coazt-leave-window-event",null,8)}function r4(i,n){if(1&i&&e.eu8(0,16),2&i){e.XpG();const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function l4(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",18),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",19),e.eu8(3,16),e.k0s()(),e.bVm()}if(2&i){e.XpG(3);const t=e.sdS(7),s=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.l_i(2,e4,s.isMobileScreenSize,!s.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function c4(i,n){if(1&i&&(e.nrm(0,"azt-loading-effect",20),e.nI1(1,"mytranslate")),2&i){const t=e.XpG(5);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function u4(i,n){if(1&i&&e.eu8(0,16),2&i){e.XpG(3);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function _4(i,n){if(1&i&&(e.qex(0),e.DNE(1,l4,4,5,"ng-container",13)(2,c4,2,4,"azt-loading-effect",17)(3,u4,1,1,"ng-container",15),e.bVm()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function d4(i,n){if(1&i&&e.eu8(0,16),2&i){e.XpG(2);const t=e.sdS(17);e.Y8G("ngTemplateOutlet",t)}}function m4(i,n){if(1&i&&e.eu8(0,16),2&i){e.XpG(2);const t=e.sdS(11);e.Y8G("ngTemplateOutlet",t)}}function p4(i,n){if(1&i&&e.eu8(0,16),2&i){e.XpG(2);const t=e.sdS(13);e.Y8G("ngTemplateOutlet",t)}}function h4(i,n){if(1&i&&(e.j41(0,"div"),e.DNE(1,_4,4,3,"ng-container",13)(2,d4,1,1,"ng-container",15)(3,m4,1,1,"ng-container",15)(4,p4,1,1,"ng-container",15),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",e.ziG(4,ZF,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",e.l_i(9,Yf,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function f4(i,n){1&i&&e.nrm(0,"azt-loading-ui",30)}function g4(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.checkAnswerQuestionByApi())}),e.DNE(1,f4,1,0,"azt-loading-ui",29),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const t=e.XpG(4);e.Y8G("disabled",!t.sAztTestQuestionService.checkQuestionHasAnswer(t.currentTakeTestStepData,t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(2),e.JRh(e.bMT(4,3,null==t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer?"lang_testbank_check":"lang_testbank_try_again"))}}function T4(i,n){if(1&i&&(e.j41(0,"div",31)(1,"span",32),e.EFF(2),e.k0s()()),2&i){const t=e.XpG(4);e.R7$(2),e.JRh(t.currentTakeTestStepData.testingUserObj.fullName)}}function b4(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-training-footer-box",33,9),e.bIt("resetTrainingTestEvent",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.reloadPage())}),e.k0s()}if(2&i){const t=e.XpG(4);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("sAztTestQuestionService",t.sAztTestQuestionService)("tenantId",t.tenantId)("curCateId",t.curCateId)}}function x4(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-coazt-training-header-box",21),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialogEvent.emit())}),e.k0s(),e.j41(1,"div",22),e.nrm(2,"div",23),e.j41(3,"div",24),e.DNE(4,g4,5,5,"button",25),e.k0s(),e.DNE(5,T4,3,1,"div",26),e.eu8(6,16),e.k0s(),e.DNE(7,b4,2,6,"app-coazt-training-footer-box",27)}if(2&i){e.XpG();const t=e.sdS(9),s=e.XpG(2);e.Y8G("currentTakeTestStepData",s.currentTakeTestStepData)("sAztTestResizeService",s.sAztTestResizeService)("isMobileScreenSize",s.isMobileScreenSize),e.R7$(),e.Y8G("ngClass",e.l_i(9,t4,!s.isMobileScreenSize,s.isMobileScreenSize)),e.R7$(),e.Y8G("ngClass",e.l_i(12,n4,!s.isMobileScreenSize,s.isMobileScreenSize)),e.R7$(2),e.Y8G("ngIf",null==s.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer||"wrong"===s.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf",s.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",t),e.R7$(),e.Y8G("ngIf",s.currentTakeTestStepData.nextBackQuestionModel)}}function v4(i,n){if(1&i&&(e.j41(0,"div",36),e.nrm(1,"div",37),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&i){let t;const s=e.XpG(4);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,null!==(t=null==s.currentTakeTestStepData.examConfigObj?null:s.currentTakeTestStepData.examConfigObj.header)&&void 0!==t?t:""),e.npT)}}function y4(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",39)(1,"div",40)(2,"azt-question-standalone-for-step-test",41),e.bIt("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setEssayAnswerEmitter.emit(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setResultTracking.emit(o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.sendAudioForQuestion.emit(o))})("showHintAnswer",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(null==o.trainingFooterBox?null:o.trainingFooterBox.showHintAnswer())}),e.k0s()()()}if(2&i){let t;const s=n.$implicit,o=e.XpG(5);e.R7$(),e.FS9("id","question_"+s.id),e.Y8G("hidden",s.id!=o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id),e.R7$(),e.Y8G("examObj",o.currentTakeTestStepData.examObj)("questionObj",s)("follower",o.followerRenderQuest)("curQuestionIndex",o.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex)("fontSize",o.sAztTestResizeService.fontSize)("isShowExplain",null!==(t=s.isShowHint)&&void 0!==t&&t)("currentAnswerIsCorrect","correct"===s.practiceCheckAnswer)("currentAnswerStatus",s.practiceCheckAnswer)}}function S4(i,n){if(1&i&&(e.qex(0),e.DNE(1,y4,3,10,"div",38),e.bVm()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs)}}function w4(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-sort-essay-files-box",34),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s(),e.DNE(1,v4,3,3,"div",35)(2,S4,2,1,"ng-container",13)}if(2&i){const t=e.XpG(3);e.Y8G("answerFiles",t.currentTakeTestStepData.files),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.examConfigObj?null:t.currentTakeTestStepData.examConfigObj.allowHeader),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function I4(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-join-classroom-box",42),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("joinClassroomByType",e.eq3(1,s4,t.currentTakeTestStepData.examObj.hashId))}}function C4(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",43),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",44),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&i){const t=e.XpG(3);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function k4(i,n){if(1&i&&(e.j41(0,"div",45)(1,"div",46)(2,"div",47),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",48)(6,"a",49),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&i){const t=e.XpG(3);e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,i4,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function E4(i,n){if(1&i&&e.nrm(0,"app-coazt-wait-to-test-time-box",50),2&i){const t=e.XpG(3);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function A4(i,n){if(1&i&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",51),2&i){const t=e.XpG(3);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}function O4(i,n){if(1&i&&(e.qex(0),e.nrm(1,"app-coazt-tracking-full-screen-event",14)(2,"app-coazt-tracking-visible-event",14),e.DNE(3,a4,2,0,"app-coazt-leave-window-event",13)(4,r4,1,1,"ng-container",15)(5,h4,5,12,"div",13)(6,x4,8,15,"ng-template",null,1,e.C5r)(8,w4,3,3,"ng-template",null,2,e.C5r)(10,I4,1,3,"ng-template",null,3,e.C5r)(12,C4,2,9,"ng-template",null,4,e.C5r)(14,k4,10,11,"ng-template",null,5,e.C5r)(16,E4,1,2,"ng-template",null,6,e.C5r)(18,A4,1,3,"ng-template",null,7,e.C5r),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(5,Yf,t.allTakeTestSteps.START_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(t.currentTakeTestStepData.currentStep)&&!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",e.lV(8,KF,t.allTakeTestSteps.WAIT_TO_TEST_TIME,t.allTakeTestSteps.CHOOSE_STUDENT,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep))}}function R4(i,n){if(1&i&&e.DNE(0,O4,20,17,"ng-container",13),2&i){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData)}}let F4=(()=>{var i;class n extends AF{constructor(){super(...arguments),this.openQuitDialogEvent=new e.bkB,this.testCheckQuestionService=(0,e.WQX)(Lf)}checkAnswerQuestionByApi(){this.testCheckQuestionService.sendCheckQuestionEvent(!0)}reloadPage(){this.leaveWindowBox?.stopConfirm(),setTimeout(()=>{window.location.reload()},0)}}return(i=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(i)))(o||i)}})(),i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-training-in-step-layout"]],viewQuery:function(s,o){if(1&s&&(e.GBs(HF,5),e.GBs(JF,5)),2&s){let a;e.mGM(a=e.lsd())&&(o.trainingFooterBox=a.first),e.mGM(a=e.lsd())&&(o.leaveWindowBox=a.first)}},outputs:{openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["mainTakeTestContentTpl",""],["showStepQuestionTpl",""],["chooseStudentTpl",""],["overTimeTpl",""],["commonErrorTpl",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],["leaveWindowBox",""],["trainingFooterBox",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"currentTakeTestStepData"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0 10px",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"openQuitDialogEvent","currentTakeTestStepData","sAztTestResizeService","isMobileScreenSize"],[1,"pb-4",3,"ngClass"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],[1,"text-right"],["azt-track-service","take-training-Vy9M0G9VK1u","class","btn btn-primary w-32","style","position: absolute; right: 10px",3,"disabled","click",4,"ngIf"],["class","p-1 text-center mt-1",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","sAztTestQuestionService","tenantId","curCateId","resetTrainingTestEvent",4,"ngIf"],["azt-track-service","take-training-Vy9M0G9VK1u",1,"btn","btn-primary","w-32",2,"position","absolute","right","10px",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"p-1","text-center","mt-1"],[2,"vertical-align","middle","font-weight","420"],[3,"resetTrainingTestEvent","currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","sAztTestQuestionService","tenantId","curCateId"],[3,"changeAnswerFiles","answerFiles"],["class","box p-3 mb-3",4,"ngIf"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHTML"],["class","mt-4","style","animation-delay: 0.05s",4,"ngFor","ngForOf"],[1,"mt-4",2,"animation-delay","0.05s"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id","hidden"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioEmit","showHintAnswer","examObj","questionObj","follower","curQuestionIndex","fontSize","isShowExplain","currentAnswerIsCorrect","currentAnswerStatus"],[3,"selectStudentEvent","joinClassroomByType"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(s,o){if(1&s&&e.DNE(0,o4,2,1,"div",10)(1,R4,1,1,"ng-template",null,0,e.C5r),2&s){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,Er,Ar,Or,GF,wt.R,EF,Vo.s,WF,jr.l,zr,Mr,Dr,Gr,z.F2,v.MD,v.YU,v.Sq,v.bT,v.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,H.L,z._y,U.Id,q.k],styles:[".margin-question-bar-for-training-for-desktop[_ngcontent-%COMP%], .margin-question-bar-for-training-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-mobile[_ngcontent-%COMP%]{padding-bottom:400px!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}"]}),n})();const j4=["trainingFooterBox"],z4=["leaveWindowBox"],M4=()=>({"mr-2 azt-hidden md:block":!0});function D4(i,n){if(1&i&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-effect",3),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function G4(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"app-coazt-take-training-in-step-layout",5),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.submitTestToApi(o))}),e.k0s(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("sAztTestQuestionService",t.sAztTestQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)("tenantId",t.tenantId)("curCateId",t.curCateId)}}function P4(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_take_test_is_using_anonymous_account"),"\xa0-\xa0"))}function N4(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"div",7)(3,"div",8),e.nrm(4,"div",9),e.nI1(5,"mytranslate"),e.j41(6,"div",10)(7,"a",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToVipUpgrade())}),e.nrm(8,"lucide-icon",12),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",13),e.DNE(12,P4,3,3,"span",4),e.EFF(13),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,6,"lang_take_test_attemps_exam_warning"),e.npT),e.R7$(4),e.Y8G("ngClass",e.lJ4(10,M4)),e.R7$(),e.SpI(" ",e.bMT(10,8,"lang_azt_upgrade_vip")," "),e.R7$(3),e.Y8G("ngIf",t.isAnonymousUser),e.R7$(),e.Lme(" ",t.currentUserId,"\xa0-\xa0 ",t.commonService.getFullCurrentUrl()," ")}}function V4(i,n){if(1&i&&e.DNE(0,G4,2,11,"ng-container",4)(1,N4,14,11,"ng-container",4),2&i){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData&&t.allowAttemptExam),e.R7$(),e.Y8G("ngIf",!t.allowAttemptExam)}}let L4=(()=>{var i;class n extends s_{reloadPage(){this.leaveWindowBox?.stopConfirm(),setTimeout(()=>{window.location.reload()},0)}startShowTestContent(s,o){return this.sAztTakeTestCallApiService.getHistoryAnswerOfTrainingFromApi(this.currentTakeTestStepData,(a,r)=>{if(a)return o(a);s=(new Bf).setQuestionAnswers(s,r),this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,s,l=>{if(this.currentTakeTestStepData=l,this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown)return o(void 0);this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown=!0,this.intervalExamTime(),this.intervalToGetServerTime(),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.getImagesThatUploadAtMobileQrCodeFromApi(this.currentTakeTestStepData.uploadHashCode,c=>{null!=c&&(this.currentTakeTestStepData.files=c)}),this.intervalToSendTestDataToApi(),o(void 0)})})}getInitDataFromApi(){this.initStatusObj(),this.checkVipExam(this.hashId,s=>{if(!s)return this.allowAttemptExam=!1,this.stopStatusObj();let o=new Dt(this.hashId,this.browserStorageService).getPassword(),a=new Dt(this.hashId,this.browserStorageService).hasInfo();this.waitDestroy(tt.c.production||tt.c.isProdAzotaVn?this.frontExamService.apiFrontExamInitDataGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),1).subscribe(l=>{const c=this.encryptionHelper.result(l);this.processInitData(""!=o,c)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),1).subscribe(l=>{this.processInitData(""!=o,l)}))})}ngOnInit(){this.initParams(),super.ngOnInit()}constructor(){super(),this.allTakeTestSteps=Ie,this.allowContextMenu=!tt.c.production,this.modeViewTest="training"}}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-coazt-take-training"]],viewQuery:function(s,o){if(1&s&&(e.GBs(j4,5),e.GBs(z4,5)),2&s){let a;e.mGM(a=e.lsd())&&(o.trainingFooterBox=a.first),e.mGM(a=e.lsd())&&(o.leaveWindowBox=a.first)}},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"openQuitDialogEvent","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","sAztTestResizeService","sAztTestNextBackQuestionService","sAztTestQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink","tenantId","curCateId"],[1,"flex","justify-center","ml-3","mr-3"],[2,"max-width","500px","line-height","35px"],[1,"box","p-3","mt-20"],[1,"text-danger",2,"font-size","18px",3,"innerHTML"],[1,"text-center"],[1,"btn","btn-sm","btn-gradient-primary","mt-3",2,"font-size","18px",3,"click"],["name","gem","size","24",3,"ngClass"],[1,"mt-3","text-center"]],template:function(s,o){if(1&s&&e.DNE(0,D4,2,1,"div",1)(1,V4,2,2,"ng-template",null,0,e.C5r),2&s){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ie.K,F4,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();var B4=A(96797),Uf=A(5393),$4=A(28008);function Q4(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",2),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function q4(i,n){if(1&i&&(e.nrm(0,"img",23),e.nI1(1,"mycdn")),2&i){const t=e.XpG().$implicit;e.FS9("src",e.bMT(1,1,t.avatar),e.B4B)}}function Y4(i,n){if(1&i&&e.nrm(0,"azt-create-avatar",24),2&i){const t=e.XpG().$implicit;e.Y8G("nameCreateAvatar",t.fullName)("size",30)}}function U4(i,n){if(1&i&&e.nrm(0,"img",25),2&i){const t=e.XpG().$implicit;e.Y8G("nameImages",t.nameImages)}}function X4(i,n){if(1&i&&(e.j41(0,"p",20),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span"),e.EFF(4),e.nI1(5,"formatOnlyDateByUserUnitPipe"),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ngay_sinh"),": "),e.R7$(3),e.JRh(e.bMT(5,4,t.birthday))}}function W4(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_Diem"),"\xa0",t.mark,"")}}function H4(i,n){1&i&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_test_result_not_marked_essay")," "))}function J4(i,n){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_diem")," "))}function K4(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",7)(1,"button",8),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.selectStudentAction(o))}),e.j41(2,"div",9)(3,"div",10)(4,"div",11),e.DNE(5,q4,2,3,"img",12)(6,Y4,1,2,"azt-create-avatar",13),e.k0s()(),e.j41(7,"div",14)(8,"div",15)(9,"p",16),e.EFF(10),e.nI1(11,"slice"),e.k0s(),e.j41(12,"div",17),e.DNE(13,U4,1,1,"img",18),e.k0s(),e.DNE(14,X4,6,6,"p",19),e.j41(15,"p",20),e.DNE(16,W4,3,4,"span",21)(17,H4,3,3,"span",22)(18,J4,3,3,"span",21),e.k0s()()()()()()}if(2&i){let t;const s=n.$implicit;e.R7$(),e.Y8G("disabled",!s.examResultId),e.R7$(4),e.Y8G("ngIf",s.avatar),e.R7$(),e.Y8G("ngIf",!s.avatar),e.R7$(3),e.FS9("matTooltip",s.fullName&&s.fullName.length>25?s.fullName:""),e.R7$(),e.SpI(" ",s.fullName&&s.fullName.length>25?e.brH(11,10,s.fullName,0,25)+"..":s.fullName," "),e.R7$(3),e.Y8G("ngIf",s.nameImages&&(null!==(t=s.id)&&void 0!==t?t:0)<=0),e.R7$(),e.Y8G("ngIf",s.birthday),e.R7$(2),e.Y8G("ngIf",s.examResultId&&s.examResultConfirmedAt),e.R7$(),e.Y8G("ngIf",s.examResultId&&!s.examResultConfirmedAt),e.R7$(),e.Y8G("ngIf",!s.examResultId)}}function Z4(i,n){if(1&i&&(e.j41(0,"div",3)(1,"h3",4),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",5),e.DNE(7,K4,19,14,"div",6),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.E5c("",e.bMT(3,4,t.classroomGroupObj.groupObj.name)," - ",e.bMT(4,6,t.classroomGroupObj.classroomObj.name),": ",e.bMT(5,8,"lang_auto_danh_sach_hoc_sinh"),""),e.R7$(5),e.Y8G("ngForOf",t.classroomGroupObj.classroomObj.studentObjs)}}let ej=(()=>{var i;class n extends Z.H{selectStudentAction(s){this.selectStudentEvent.emit(s)}onSearchBox(s){this.searchContentObj=s}sortStudents(){this.classroomGroupObj.classroomObj.studentObjs=0==this.classroomGroupObj.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(this.classroomGroupObj.classroomObj.studentObjs)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(this.classroomGroupObj.classroomObj.studentObjs)??[],"pos","id")}getData(){this.initStatusObj(),this.waitDestroy(this.frontOfflineShareService.apiFrontOfflineShareGetShareOfflineDataPost({examHashId:this.examHashId,shareHashId:this.shareOfflineCode,classroomId:this.classroomGroupObj.classroomObj.id}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);let a=this.commonService.concatMultipleArray(o.data?.classroomGroupObjs.map(r=>r.classroomObjs)??[]).find(r=>r.id==this.classroomGroupObj.classroomObj.id);a&&(this.classroomGroupObj.classroomObj=a),this.sortStudents(),this.stopStatusObj()}))}ngOnInit(){if(super.ngOnInit(),this.classroomGroupObj.classroomObj.dataInApi)return this.sortStudents();this.getData()}constructor(s,o){super(),this.frontOfflineShareService=s,this.sortService=o,this.selectStudentEvent=new e.bkB,this.searchContentObj=new B4.Z}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Uf.pC),e.rXU(Hu.g))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-choose-student-in-share-offline-result"]],inputs:{classroomGroupObj:"classroomGroupObj",examHashId:"examHashId",shareOfflineCode:"shareOfflineCode"},outputs:{selectStudentEvent:"selectStudentEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"block-main","mt-3"],[1,"font-medium","mb-3"],[1,"grid","grid-cols-12","p-2","pt-4","box",2,"background-color","#fff","min-height","100px"],["class","col-span-12 sm:col-span-12 md:col-span-4 lg:col-span-3 mb-3 px-2",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-12","md:col-span-4","lg:col-span-3","mb-3","px-2"],["azt-track-service","share-offline-result-cxL-TXi9YY",1,"flex","items-center","p-3","rounded-md","bg-slate-100","dark:bg-darkmode-300","w-full",2,"min-height","80px",3,"click","disabled"],[1,"grid","grid-cols-12","gap-2","ml-0","mr-0","justify-content-between",2,"width","100%"],[1,"col-span-3"],[1,"flex","items-center",2,"height","100%","justify-content","center"],["style","vertical-align: middle; margin-top: 2px; border-radius: 50%","width","30","height","30",3,"src",4,"ngIf"],[3,"nameCreateAvatar","size",4,"ngIf"],[1,"col-span-9","pl-0"],[1,"text-left"],[1,"h5","mb-1","card-custom-title","font-bold",3,"matTooltip"],[1,"block-img"],["class","stdinfo-fullname mb-1 img-name-fluid","style","height: auto","appDrawNameImage","","loading","lazy",3,"nameImages",4,"ngIf"],["class","text-xs mb-0",4,"ngIf"],[1,"text-xs","mb-0"],[4,"ngIf"],["class","text-pending",4,"ngIf"],["width","30","height","30",2,"vertical-align","middle","margin-top","2px","border-radius","50%",3,"src"],[3,"nameCreateAvatar","size"],["appDrawNameImage","","loading","lazy",1,"stdinfo-fullname","mb-1","img-name-fluid",2,"height","auto",3,"nameImages"],[1,"text-pending"]],template:function(s,o){if(1&s&&e.DNE(0,Q4,1,1,"azt-loading-effect",1)(1,Z4,8,10,"ng-template",null,0,e.C5r),2&s){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[Wu.y,ie.K,Hh.p,v.MD,v.Sq,v.bT,v.P9,g.X1,L.iI,g.YN,z.nf,z.wp,Y.s,vt.oV,F.flO,H.L,z.vv,U.Id,q.k,$4.w],encapsulation:2}),n})();var tj=A(14710);const nj=()=>({"mr-2":!0});function sj(i,n){if(1&i&&e.nrm(0,"azt-loading-effect",5),2&i){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function ij(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"a",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.backToClassroomList())}),e.j41(2,"span",12),e.nrm(3,"lucide-icon",13),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}2&i&&(e.R7$(3),e.Y8G("ngClass",e.lJ4(4,nj)),e.R7$(),e.SpI(" ",e.bMT(5,2,"lang_student_join_classroom_back_to_classrooms_list")," "))}function oj(i,n){if(1&i){const t=e.RV6();e.j41(0,"div"),e.DNE(1,ij,6,5,"div",9),e.j41(2,"app-choose-student-in-share-offline-result",10),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.chooseStudentSuccess(o))}),e.k0s()()}if(2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.allClassroomObjs.length>1),e.R7$(),e.Y8G("classroomGroupObj",t.currentClassroomGroupObj)("examHashId",t.examHashIdParam)("shareOfflineCode",t.shareOfflineCodeParam)}}function aj(i,n){if(1&i){const t=e.RV6();e.j41(0,"azt-list-classroom-view-for-join-classroom",15),e.bIt("clickToClassroomEmitter",function(o){e.eBV(t);const a=e.XpG(4);return e.Njj(a.clickToClassroomEvent(o))}),e.k0s()}if(2&i){const t=e.XpG(4);e.Y8G("isExpandAll",!0)("classroomGroupData",t.classroomWithGroup)}}function rj(i,n){if(1&i&&e.DNE(0,aj,1,2,"azt-list-classroom-view-for-join-classroom",14),2&i){const t=e.XpG(3);e.Y8G("ngIf",t.classroomWithGroup)}}function lj(i,n){if(1&i&&(e.j41(0,"div",7),e.DNE(1,oj,3,4,"div",8)(2,rj,1,1,"ng-template",null,2,e.C5r),e.k0s()),2&i){const t=e.sdS(3),s=e.XpG(2);e.R7$(),e.Y8G("ngIf",s.currentClassroomGroupObj)("ngIfElse",t)}}function cj(i,n){1&i&&(e.j41(0,"div",16)(1,"div",17),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_giao_vien_chua_cho_xem_ket_qua_thi")," "))}function uj(i,n){if(1&i&&e.DNE(0,lj,4,2,"div",6)(1,cj,4,3,"ng-template",null,1,e.C5r),2&i){const t=e.sdS(2),s=e.XpG();e.Y8G("ngIf",s.allClassroomObjs.length)("ngIfElse",t)}}let Xf=(()=>{var i;class n extends Z.H{chooseStudentSuccess(s){this.myNavigationWithQueryString(`/test/answer-test/${this.examObj?.tenantId??0}/${this.examObj?.categoryId??0}/${this.examObj?.hashId}/${s.examResultId}`,`?offline=${this.shareOfflineCodeParam}&backto=${this.returnLink}`)}backToClassroomList(){this.commonService.myNavigationWithoutHistory("/test/share-offline-result/"+this.examHashIdParam+"/"+this.shareOfflineCodeParam+"/-1"),this.getParamUrl(),this.currentClassroomGroupObj=void 0}clickToClassroomEvent(s){let o=this.allClassroomObjs.find(a=>a.id==s.classroomObj.id);o&&(this.commonService.myNavigationWithoutHistory("/test/share-offline-result/"+this.examHashIdParam+"/"+this.shareOfflineCodeParam+"/"+o.id),this.getParamUrl(),this.currentClassroomGroupObj={groupObj:s.classroomGroupObj,classroomObj:o})}getData(){if(!this.examHashIdParam||!this.shareOfflineCodeParam)return;let s={examHashId:this.examHashIdParam,shareHashId:this.shareOfflineCodeParam,classroomId:-1!=this.classroomIdParam?this.classroomIdParam:void 0};this.initStatusObj(),this.waitDestroy(this.frontOfflineShareService.apiFrontOfflineShareGetShareOfflineDataPost(s).subscribe(o=>{if(!o.success)return this.forceShowErrorBox(o.message);if(this.examObj=o.data?.examObj,this.classroomWithGroup=(o.data?.classroomGroupObjs??[]).map(l=>({groupObj:l.groupObj,isOwned:!0,classroomObjs:l.classroomObjs})),this.allClassroomObjs=this.commonService.concatMultipleArray(this.classroomWithGroup.map(l=>l.classroomObjs)),-1!=this.classroomIdParam){let l=this.allClassroomObjs.find(_=>_.id==this.classroomIdParam),c=this.classroomWithGroup.find(_=>_.classroomObjs.find(d=>d.id==this.classroomIdParam));if(l&&c)return this.currentClassroomGroupObj={groupObj:c.groupObj,classroomObj:l},void this.successStatusObj()}let a=1==this.allClassroomObjs.length?this.commonService.getFirstOfArray(this.allClassroomObjs):void 0,r=this.classroomWithGroup.find(l=>l.classroomObjs.find(c=>c.id==a?.id));a&&r&&(this.currentClassroomGroupObj={groupObj:r.groupObj,classroomObj:a}),this.successStatusObj()}))}getParamUrl(){this.examHashIdParam=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.shareOfflineCodeParam=this.commonService.getMyParam(this.activeRoute,"offline_code")??"",this.classroomIdParam=this.commonService.getMyParamToNumber(this.activeRoute,"classroom_id")??-1,this.returnLink="/test/share-offline-result/"+this.examHashIdParam+"/"+this.shareOfflineCodeParam+"/"+this.classroomIdParam,this.backToLink="/student/classroom/0"}ngOnInit(){super.ngOnInit(),this.getParamUrl(),this.getData()}constructor(s,o){super(),this.frontOfflineShareService=s,this.activeRoute=o,this.backToLink="",this.returnLink="",this.shareOfflineCodeParam="",this.classroomIdParam=-1,this.examHashIdParam="",this.allClassroomObjs=[],this.currentClassroomGroupObj=void 0,this.classroomWithGroup=[]}}return(i=n).\u0275fac=function(s){return new(s||i)(e.rXU(Uf.pC),e.rXU(L.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-share-offline-result"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],["noClassroom",""],["showChooseClassrooms",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","mt-5",4,"ngIf","ngIfElse"],[1,"mt-5"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"selectStudentEvent","classroomGroupObj","examHashId","shareOfflineCode"],["azt-track-service","share-offline-result-kZ8e0tmTZ",1,"display-inline-block",3,"click"],[1,"text-primary","flex","items-center"],["name","chevron-left","size","16",3,"ngClass"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter",4,"ngIf"],[3,"clickToClassroomEmitter","isExpandAll","classroomGroupData"],[1,"block-empty","mt-5"],["role","alert",1,"alert","alert-danger","text-center"]],template:function(s,o){if(1&s&&(e.j41(0,"student-layout",3),e.DNE(1,sj,1,1,"azt-loading-effect",4)(2,uj,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&s){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backToLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ae.j,ie.K,ej,tj.B,v.MD,v.YU,v.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,H.L,U.Id,q.k],encapsulation:2}),n})();const _j=[{path:"",component:sv,canActivate:[Ae.L],children:[{path:":hash_id",component:tv},{path:"leaderboard/:hash_id",component:nv},{path:"category/:tenant_id/:cate_id/:page",component:nn},{path:"submit-test/:tenant_id/:cate_id/:hash_id/:result_id",component:dk},{path:"take-test/:tenant_id/:cate_id/:hash_id",component:P3},{path:"take-training/:tenant_id/:cate_id/:hash_id",component:L4},{path:"answer-test/:tenant_id/:cate_id/:hash_id/:result_id",component:SC},{path:"share-offline-result/:hash_id/:offline_code",component:Xf},{path:"share-offline-result/:hash_id/:offline_code/:classroom_id",component:Xf},{path:"capacity-exam/:tenant_id/:cate_id/:hash_id",component:E3}]}];let dj=(()=>{var i;class n{}return(i=n).\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[L.iI.forChild(_j),L.iI,ge.XE]}),n})()},62232:function(Ut,_e,A){"use strict";var L=this&&this.__awaiter||function(g,F,de,Y){return new(de||(de=Promise))(function(z,H){function Z(ee){try{J(Y.next(ee))}catch(ie){H(ie)}}function ae(ee){try{J(Y.throw(ee))}catch(ie){H(ie)}}function J(ee){ee.done?z(ee.value):function ye(z){return z instanceof de?z:new de(function(H){H(z)})}(ee.value).then(Z,ae)}J((Y=Y.apply(g,F||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.decodeScanOfflineFile=_e.decode=void 0;const ge=A(10809);_e.decode=function Ae(g){return L(this,void 0,void 0,function*(){return ge.AzotaFileDecode.decode(g)})},_e.decodeScanOfflineFile=function v(g){return L(this,void 0,void 0,function*(){return ge.AzotaFileDecode.decodeScanOfflineFile(g)})}},12419:(Ut,_e,A)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.AzotaFile=_e.FileType=void 0;const L=A(44135),ge=A(21790);class Ae{}_e.FileType=Ae,Ae.scanOffline="scanOffline";class v{constructor(){}static fromZipFolder(F){let de=new v;return de.folder=F,de.readAztMain(),de}readAztMain(){let F=this.folder.getUtf8Text("main.json");if(null==F)throw new L.InvalidAztFileException("Couldn't found main.json file");this.aztMain=ge.AztMain.fromJsonString(F)}}_e.AzotaFile=v},10809:function(Ut,_e,A){"use strict";var L=this&&this.__awaiter||function(F,de,Y,ye){return new(Y||(Y=Promise))(function(H,Z){function ae(ie){try{ee(ye.next(ie))}catch(ke){Z(ke)}}function J(ie){try{ee(ye.throw(ie))}catch(ke){Z(ke)}}function ee(ie){ie.done?H(ie.value):function z(H){return H instanceof Y?H:new Y(function(Z){Z(H)})}(ie.value).then(ae,J)}ee((ye=ye.apply(F,de||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.AzotaFileDecode=void 0;const ge=A(59566),Ae=A(18752),v=A(12419);class g{static decode(de){return L(this,void 0,void 0,function*(){return ge.ZipFolder.fromZip(de).then(Y=>{let ye=v.AzotaFile.fromZipFolder(Y);return ye.aztMain.fileType==v.FileType.scanOffline?Ae.ScanOfflineFile.fromZipFolder(ye.folder):ye})})}static decodeScanOfflineFile(de){return g.decode(de).then(Y=>Y)}}_e.AzotaFileDecode=g},21790:(Ut,_e,A)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.AztMain=void 0;const L=A(47750);class ge{static fromJsonString(v){return ge.fromJson(JSON.parse(v))}static fromJson(v){return(0,L.plainToInstance)(ge,v)}}_e.AztMain=ge},44135:(Ut,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.InvalidAztFileException=void 0;class A extends Error{constructor(ge){super(ge)}}_e.InvalidAztFileException=A},84292:(Ut,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DrawingCircle=void 0;class A{static findCircle(ge,Ae,v){if(ge)return ge.find(g=>Math.pow(g.center.x-Ae,2)+Math.pow(g.center.y-v,2)<=Math.pow(g.radius,2))}static processVertical(ge,Ae,v){const g=A.findCircle(ge,Ae,v);if(!g)return;if(g.filled)return void(g.filled=!1);const de=g.label[0];ge?.filter(Y=>Y.label[0]==de).forEach(Y=>Y.filled=!1),g.filled=!0}static getValue(ge,Ae=10){if(!ge)return"";const v=ge?.length/Ae,g=[];for(let F=0;F<v;F++)g.push("0");return ge.forEach(F=>{if(!F.filled)return;const de=F.label,Y=parseInt(de[0])-1;g[Y]=de[1]}),g.join("")}static setValue(ge,Ae,v=10){if(!ge)return;for(let de of ge)de.filled=!1;let g=ge.length/v,F=0;for(;F<g;){const de=Ae%10;Ae=(Ae-de)/10,ge[g*de+g-F-1].filled=!0,F++}}}_e.DrawingCircle=A},2630:function(Ut,_e,A){"use strict";var L=this&&this.__decorate||function(F,de,Y,ye){var Z,z=arguments.length,H=z<3?de:null===ye?ye=Object.getOwnPropertyDescriptor(de,Y):ye;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)H=Reflect.decorate(F,de,Y,ye);else for(var ae=F.length-1;ae>=0;ae--)(Z=F[ae])&&(H=(z<3?Z(H):z>3?Z(de,Y,H):Z(de,Y))||H);return z>3&&H&&Object.defineProperty(de,Y,H),H};Object.defineProperty(_e,"__esModule",{value:!0}),_e.ScanOfflineData=void 0,A(98433);const ge=A(47750),Ae=A(28157),v=A(98395);class g{static fromJsonString(de){return g.fromJson(JSON.parse(de))}static fromJson(de){return(0,ge.plainToInstance)(g,de)}}L([(0,ge.Type)(()=>v.ScanOfflineResult)],g.prototype,"scanResult",void 0),L([(0,ge.Type)(()=>Ae.ScanOfflineRequest)],g.prototype,"scanRequest",void 0),_e.ScanOfflineData=g},18752:function(Ut,_e,A){"use strict";var L=this&&this.__decorate||function(H,Z,ae,J){var ke,ee=arguments.length,ie=ee<3?Z:null===J?J=Object.getOwnPropertyDescriptor(Z,ae):J;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ie=Reflect.decorate(H,Z,ae,J);else for(var U=H.length-1;U>=0;U--)(ke=H[U])&&(ie=(ee<3?ke(ie):ee>3?ke(Z,ae,ie):ke(Z,ae))||ie);return ee>3&&ie&&Object.defineProperty(Z,ae,ie),ie},ge=this&&this.__awaiter||function(H,Z,ae,J){return new(ae||(ae=Promise))(function(ie,ke){function U(Ce){try{e(J.next(Ce))}catch(Le){ke(Le)}}function q(Ce){try{e(J.throw(Ce))}catch(Le){ke(Le)}}function e(Ce){Ce.done?ie(Ce.value):function ee(ie){return ie instanceof ae?ie:new ae(function(ke){ke(ie)})}(Ce.value).then(U,q)}e((J=J.apply(H,Z||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.ScanOfflineFile=void 0;const Ae=A(12419),v=A(59566),g=A(44135),F=A(21790),de=A(47750),Y=A(2630),ye=A(98395);class z extends Ae.AzotaFile{constructor(){super()}static fromZipFolder(Z){let ae=new z;if(ae.folder=Z,ae.readAztMain(),ae.aztMain.fileType!=Ae.FileType.scanOffline)throw new g.InvalidAztFileException(`fileType must be ${Ae.FileType.scanOffline}`);let ee=Z.getUtf8Text(ae.aztMain.detailPath);if(null==ee)throw new g.InvalidAztFileException(`Couldn't found ${ee} file`);return ae.scanOfflineData=Y.ScanOfflineData.fromJsonString(ee),ae}getWrappedImage(){var Z,ae;return null==(null===(ae=null===(Z=this.scanOfflineData)||void 0===Z?void 0:Z.scanResult)||void 0===ae?void 0:ae.wrappedScanFilePath)?null:this.folder.getBinary(this.scanOfflineData.scanResult.wrappedScanFilePath)}getFilledCircles(){var Z,ae,J;return null!==(J=null===(ae=null===(Z=this.scanOfflineData)||void 0===Z?void 0:Z.scanResult)||void 0===ae?void 0:ae.getFilledCircles())&&void 0!==J?J:[]}getWrappedImageExtension(){var Z,ae;let J=null===(ae=null===(Z=this.scanOfflineData)||void 0===Z?void 0:Z.scanResult)||void 0===ae?void 0:ae.wrappedScanFilePath;return null==J?null:J.substring(J.lastIndexOf("."))}static init(Z,ae,J){const ee=new z;return ee.folder=new v.ZipFolder,ee.aztMain=new F.AztMain,ee.aztMain.fileType=Ae.FileType.scanOffline,ee.aztMain.detailPath="scan_offline.json",ee.aztMain.createdAt=(new Date).toString(),ee.aztMain.createdBy=ae,ee.scanOfflineData=new Y.ScanOfflineData,ee.scanOfflineData.examHashId=Z,ee.scanOfflineData.scanResult=new ye.ScanOfflineResult,ee.scanOfflineData.scanRequest=J,ee}setOriginalImage(Z,ae){const J=`media/original_scan_offline.${Z}`;this.folder.setBinary(J,ae),this.scanOfflineData.originalScanFilePath=J}setWrappedImage(Z,ae){const J=`media/wrapped_scan_offline.${Z}`;this.folder.setBinary(J,ae),this.scanOfflineData.scanResult.wrappedScanFilePath=J}setDebugImage(Z,ae){this.folder.setBinary(`debug_images/${Z}`,ae)}setScanResult(Z){Z.wrappedScanFilePath=this.scanOfflineData.scanResult.wrappedScanFilePath,this.scanOfflineData.scanResult=Z}clickToImage(Z,ae){var J,ee;null===(ee=null===(J=this.scanOfflineData)||void 0===J?void 0:J.scanResult)||void 0===ee||ee.clickToImage(Z,ae)}setExamCode(Z){var ae,J;null===(J=null===(ae=this.scanOfflineData)||void 0===ae?void 0:ae.scanResult)||void 0===J||J.setExamCode(Z)}setStudentCode(Z){var ae,J;null===(J=null===(ae=this.scanOfflineData)||void 0===ae?void 0:ae.scanResult)||void 0===J||J.setStudentCode(Z)}toAztFile(){return ge(this,void 0,void 0,function*(){return this.folder.setUtf8Text("main.json",JSON.stringify(this.aztMain)),this.folder.setUtf8Text("scan_offline.json",JSON.stringify(this.scanOfflineData)),this.folder.toZip()})}}L([(0,de.Type)(()=>Y.ScanOfflineData)],z.prototype,"scanOfflineData",void 0),_e.ScanOfflineFile=z},28157:(Ut,_e,A)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ScanOfflineRequest=void 0;const L=A(47750);class ge{constructor(){this.templateType=void 0,this.blackRate=void 0,this.corners=[],this.corner2s=[]}static fromJsonString(v){const g=JSON.parse(v);return ge.fromJson(g)}static fromJson(v){return(0,L.plainToInstance)(ge,v)}}_e.ScanOfflineRequest=ge},98395:function(Ut,_e,A){"use strict";var L=this&&this.__decorate||function(ae,J,ee,ie){var q,ke=arguments.length,U=ke<3?J:null===ie?ie=Object.getOwnPropertyDescriptor(J,ee):ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)U=Reflect.decorate(ae,J,ee,ie);else for(var e=ae.length-1;e>=0;e--)(q=ae[e])&&(U=(ke<3?q(U):ke>3?q(J,ee,U):q(J,ee))||U);return ke>3&&U&&Object.defineProperty(J,ee,U),U};Object.defineProperty(_e,"__esModule",{value:!0}),_e.DrawingRectangle=_e.AnswerRegionResult=_e.QuizFillBlank=_e.Quiz4PartTrueFalse=_e.Quiz4Option=_e.StudentCodeRegionResult=_e.ExamCodeRegionResult=_e.ScanOfflineResult=void 0,A(98433);const ge=A(47750),Ae=A(84292),v=A(45078);class g{getSubExamCode(){var J,ee;return null!==(ee=null===(J=this.examCodeRegion)||void 0===J?void 0:J.getValue())&&void 0!==ee?ee:""}getStudentCode(){var J,ee;return null!==(ee=null===(J=this.studentCodeRegion)||void 0===J?void 0:J.getValue())&&void 0!==ee?ee:""}getEssayTotalPoint(){var J,ee,ie;const ke=null!==(ie=null===(ee=Ae.DrawingCircle.getValue(null===(J=this.answerRegion)||void 0===J?void 0:J.essayCircles))||void 0===ee?void 0:ee.trim())&&void 0!==ie?ie:"";return""!=ke?parseInt(ke)/100:void 0}getFilledCircles(){var J,ee,ie,ke,U,q,e,Ce,Le,_s,ds,vt;let cn=[];return cn.push(...null!==(ee=null===(J=this.studentCodeRegion)||void 0===J?void 0:J.circles)&&void 0!==ee?ee:[]),cn.push(...null!==(ke=null===(ie=this.examCodeRegion)||void 0===ie?void 0:ie.circles)&&void 0!==ke?ke:[]),cn.push(...null!==(q=null===(U=this.answerRegion)||void 0===U?void 0:U.circles)&&void 0!==q?q:[]),cn.push(...null!==(Ce=null===(e=this.answerRegion)||void 0===e?void 0:e.essayCircles)&&void 0!==Ce?Ce:[]),cn.push(...null!==(_s=null===(Le=this.answerRegion)||void 0===Le?void 0:Le.trueFalseCircles)&&void 0!==_s?_s:[]),cn.push(...null!==(vt=null===(ds=this.answerRegion)||void 0===ds?void 0:ds.fillBlankCircles)&&void 0!==vt?vt:[]),cn.filter($i=>$i.filled)}getQuiz4OptionAnswers(){var J,ee;const ie=null!==(ee=null===(J=this.answerRegion)||void 0===J?void 0:J.circles)&&void 0!==ee?ee:[],ke=ie.length/4;let U=[];for(let q=0;q<ke;q++)U.push("");return ie.forEach(q=>{if(!q.filled)return;const e=new Y(q.label);U[e.numbers-1]=e.letter}),U}getQuiz4PartTrueFalseAnswers(){var J,ee;const ie=null!==(ee=null===(J=this.answerRegion)||void 0===J?void 0:J.trueFalseCircles)&&void 0!==ee?ee:[],ke=ie.length/2;let U=[];for(let q=0;q<ke;q++)U.push(" ");return ie.forEach(q=>{if(!q.filled)return;const e=new ye(q.label),Ce=4*(e.numbers-1)+e.getPartIndex();U[Ce]=e.letter}),U}getQuizFillBlankAnswers(){var J,ee;const ie=null!==(ee=null===(J=this.answerRegion)||void 0===J?void 0:J.fillBlankCircles)&&void 0!==ee?ee:[],ke=ie.length/48;let U=[];for(let q=0;q<ke;q++)U.push([" "," "," "," "]);return ie.forEach(q=>{if(!q.filled)return;const e=new z(q.label);U[e.numbers-1][e.cols]=e.rowLabel}),U.map(q=>q.join(""))}clickToImage(J,ee){var ie,ke,U;null===(ie=this.examCodeRegion)||void 0===ie||ie.clickToImage(J,ee),null===(ke=this.studentCodeRegion)||void 0===ke||ke.clickToImage(J,ee),null===(U=this.answerRegion)||void 0===U||U.clickToImage(J,ee)}setExamCode(J){var ee;null===(ee=this.examCodeRegion)||void 0===ee||ee.setValue(J)}setStudentCode(J){var ee;null===(ee=this.studentCodeRegion)||void 0===ee||ee.setValue(J)}}L([(0,ge.Type)(()=>F)],g.prototype,"examCodeRegion",void 0),L([(0,ge.Type)(()=>de)],g.prototype,"studentCodeRegion",void 0),L([(0,ge.Type)(()=>H)],g.prototype,"answerRegion",void 0),_e.ScanOfflineResult=g;class F extends v.VerticalRegion{}_e.ExamCodeRegionResult=F;class de extends v.VerticalRegion{}_e.StudentCodeRegionResult=de;class Y{constructor(J){const ie=J.match(/(\d+)([A-Z])/);if(!ie)throw new Error(`Invalid label: ${J}`);this.numbers=parseInt(ie[1]),this.letter=ie[2]}}_e.Quiz4Option=Y;class ye{constructor(J){const ie=J.match(/(\d+)([A-D])([TF])/);if(!ie)throw new Error(`Invalid label: ${J}`);this.numbers=parseInt(ie[1]),this.part=ie[2],this.letter=ie[3]}getPartIndex(){return"ABCD".indexOf(this.part)}}_e.Quiz4PartTrueFalse=ye;class z{constructor(J){const ee=J.split("_");if(3!=ee.length)throw new Error(`Invalid label: ${J}`);this.numbers=parseInt(ee[0]),this.cols=parseInt(ee[1]),this.rowLabel=ee[2]}}_e.QuizFillBlank=z;class H{clickToImage(J,ee){var ie,ke,U;Ae.DrawingCircle.processVertical(this.essayCircles,J,ee);{const q=Ae.DrawingCircle.findCircle(this.circles,J,ee);if(q){if(q.filled)return void(q.filled=!1);const e=new Y(q.label);null===(ie=this.circles)||void 0===ie||ie.filter(Ce=>new Y(Ce.label).numbers==e.numbers).forEach(Ce=>Ce.filled=!1),q.filled=!0}}{const q=Ae.DrawingCircle.findCircle(this.trueFalseCircles,J,ee);if(q){if(q.filled)return void(q.filled=!1);const e=new ye(q.label);null===(ke=this.trueFalseCircles)||void 0===ke||ke.filter(Ce=>{const Le=new ye(Ce.label);return Le.numbers==e.numbers&&Le.part==e.part}).forEach(Ce=>Ce.filled=!1),q.filled=!0}}{const q=Ae.DrawingCircle.findCircle(this.fillBlankCircles,J,ee);if(q){if(q.filled)return void(q.filled=!1);const e=new z(q.label);null===(U=this.fillBlankCircles)||void 0===U||U.filter(Ce=>{const Le=new z(Ce.label);return Le.numbers==e.numbers&&Le.cols==e.cols}).forEach(Ce=>Ce.filled=!1),q.filled=!0}}}}_e.AnswerRegionResult=H,_e.DrawingRectangle=class Z{}},45078:(Ut,_e,A)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.VerticalRegion=void 0;const L=A(84292);_e.VerticalRegion=class ge{clickToImage(v,g){L.DrawingCircle.processVertical(this.circles,v,g)}getValue(v=10){return L.DrawingCircle.getValue(this.circles,v)}setValue(v,g=10){L.DrawingCircle.setValue(this.circles,v,g)}}},59566:function(Ut,_e,A){"use strict";var L=this&&this.__awaiter||function(v,g,F,de){return new(F||(F=Promise))(function(ye,z){function H(J){try{ae(de.next(J))}catch(ee){z(ee)}}function Z(J){try{ae(de.throw(J))}catch(ee){z(ee)}}function ae(J){J.done?ye(J.value):function Y(ye){return ye instanceof F?ye:new F(function(z){z(ye)})}(J.value).then(H,Z)}ae((de=de.apply(v,g||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.ZipFolder=void 0;const ge=A(77247);class Ae{constructor(g){this.files=new Map,g&&g.forEach((F,de)=>{this.files.set(de,F)})}static fromZip(g){return L(this,void 0,void 0,function*(){let de=yield(new ge).loadAsync(g).then(Y=>{const ye=[];return Y.forEach(function(z){let H=Y.file(z);H&&ye.push(H.async("uint8array").then(Z=>({path:z,data:Z})))}),ye});return Promise.all(de).then(Y=>{let ye=new Map;return Y.forEach(z=>{ye.set(z.path,z.data)}),new Ae(ye)})})}setBinary(g,F){const de=Uint8Array.from(F);this.files.set(g,de)}setUtf8Text(g,F){let de=(new TextEncoder).encode(F);this.files.set(g,de)}getBinary(g){var F;return null!==(F=this.files.get(g))&&void 0!==F?F:null}getUtf8Text(g){let F=this.files.get(g);return null===F?null:(new TextDecoder).decode(F)}toZip(){return L(this,void 0,void 0,function*(){const g=new ge;for(let[F,de]of Array.from(this.files))g.file(F,de,{binary:!0});return g.generateAsync({type:"uint8array",compression:"DEFLATE",compressionOptions:{level:9}})})}toBlob(){return L(this,void 0,void 0,function*(){const g=new ge;for(let[F,de]of Array.from(this.files))g.file(F,de,{binary:!0});return g.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}})})}}_e.ZipFolder=Ae},98433:()=>{var Ut,_e;_e=Ut||(Ut={}),function(){var L="object"==typeof globalThis?globalThis:"object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:function F(){return function v(){try{return Function("return this;")()}catch{}}()||function g(){try{return(0,eval)("(function() { return this; })()")}catch{}}()}(),ge=Ae(_e);function Ae(de,Y){return function(ye,z){Object.defineProperty(de,ye,{configurable:!0,writable:!0,value:z}),Y&&Y(ye,z)}}typeof L.Reflect<"u"&&(ge=Ae(L.Reflect,ge)),function(A,L){var ge=Object.prototype.hasOwnProperty,Ae="function"==typeof Symbol,v=Ae&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",g=Ae&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",F="function"==typeof Object.create,de={__proto__:[]}instanceof Array,Y=!F&&!de,ye={create:F?function(){return Ui(Object.create(null))}:de?function(){return Ui({__proto__:null})}:function(){return Ui({})},has:Y?function(M,B){return ge.call(M,B)}:function(M,B){return B in M},get:Y?function(M,B){return ge.call(M,B)?M[B]:void 0}:function(M,B){return M[B]}},z=Object.getPrototypeOf(Function),H="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function ll(){var M={},B=[],K=function(){function Re(ue,pe,he){this._index=0,this._keys=ue,this._values=pe,this._selector=he}return Re.prototype["@@iterator"]=function(){return this},Re.prototype[g]=function(){return this},Re.prototype.next=function(){var ue=this._index;if(ue>=0&&ue<this._keys.length){var pe=this._selector(this._keys[ue],this._values[ue]);return ue+1>=this._keys.length?(this._index=-1,this._keys=B,this._values=B):this._index++,{value:pe,done:!1}}return{value:void 0,done:!0}},Re.prototype.throw=function(ue){throw this._index>=0&&(this._index=-1,this._keys=B,this._values=B),ue},Re.prototype.return=function(ue){return this._index>=0&&(this._index=-1,this._keys=B,this._values=B),{value:ue,done:!0}},Re}();return function(){function Re(){this._keys=[],this._values=[],this._cacheKey=M,this._cacheIndex=-2}return Object.defineProperty(Re.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Re.prototype.has=function(ue){return this._find(ue,!1)>=0},Re.prototype.get=function(ue){var pe=this._find(ue,!1);return pe>=0?this._values[pe]:void 0},Re.prototype.set=function(ue,pe){var he=this._find(ue,!0);return this._values[he]=pe,this},Re.prototype.delete=function(ue){var pe=this._find(ue,!1);if(pe>=0){for(var he=this._keys.length,Te=pe+1;Te<he;Te++)this._keys[Te-1]=this._keys[Te],this._values[Te-1]=this._values[Te];return this._keys.length--,this._values.length--,Ln(ue,this._cacheKey)&&(this._cacheKey=M,this._cacheIndex=-2),!0}return!1},Re.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=M,this._cacheIndex=-2},Re.prototype.keys=function(){return new K(this._keys,this._values,xe)},Re.prototype.values=function(){return new K(this._keys,this._values,ut)},Re.prototype.entries=function(){return new K(this._keys,this._values,ft)},Re.prototype["@@iterator"]=function(){return this.entries()},Re.prototype[g]=function(){return this.entries()},Re.prototype._find=function(ue,pe){if(!Ln(this._cacheKey,ue)){this._cacheIndex=-1;for(var he=0;he<this._keys.length;he++)if(Ln(this._keys[he],ue)){this._cacheIndex=he;break}}return this._cacheIndex<0&&pe&&(this._cacheIndex=this._keys.length,this._keys.push(ue),this._values.push(void 0)),this._cacheIndex},Re}();function xe(Re,ue){return Re}function ut(Re,ue){return ue}function ft(Re,ue){return[Re,ue]}}(),Z="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function cl(){return function(){function B(){this._map=new H}return Object.defineProperty(B.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),B.prototype.has=function(K){return this._map.has(K)},B.prototype.add=function(K){return this._map.set(K,K),this},B.prototype.delete=function(K){return this._map.delete(K)},B.prototype.clear=function(){this._map.clear()},B.prototype.keys=function(){return this._map.keys()},B.prototype.values=function(){return this._map.keys()},B.prototype.entries=function(){return this._map.entries()},B.prototype["@@iterator"]=function(){return this.keys()},B.prototype[g]=function(){return this.keys()},B}()}(),ae="function"==typeof WeakMap?WeakMap:function ul(){var M=16,B=ye.create(),K=oe();return function(){function ue(){this._key=oe()}return ue.prototype.has=function(pe){var he=xe(pe,!1);return void 0!==he&&ye.has(he,this._key)},ue.prototype.get=function(pe){var he=xe(pe,!1);return void 0!==he?ye.get(he,this._key):void 0},ue.prototype.set=function(pe,he){return xe(pe,!0)[this._key]=he,this},ue.prototype.delete=function(pe){var he=xe(pe,!1);return void 0!==he&&delete he[this._key]},ue.prototype.clear=function(){this._key=oe()},ue}();function oe(){var ue;do{ue="@@WeakMap@@"+Re()}while(ye.has(B,ue));return B[ue]=!0,ue}function xe(ue,pe){if(!ge.call(ue,K)){if(!pe)return;Object.defineProperty(ue,K,{value:ye.create()})}return ue[K]}function ut(ue,pe){for(var he=0;he<pe;++he)ue[he]=255*Math.random()|0;return ue}function Re(){var ue=function ft(ue){if("function"==typeof Uint8Array){var pe=new Uint8Array(ue);return typeof crypto<"u"?crypto.getRandomValues(pe):typeof msCrypto<"u"?msCrypto.getRandomValues(pe):ut(pe,ue),pe}return ut(new Array(ue),ue)}(M);ue[6]=79&ue[6]|64,ue[8]=191&ue[8]|128;for(var pe="",he=0;he<M;++he){var Te=ue[he];(4===he||6===he||8===he)&&(pe+="-"),Te<16&&(pe+="0"),pe+=Te.toString(16).toLowerCase()}return pe}}(),J=Ae?Symbol.for("@reflect-metadata:registry"):void 0,ee=function ol(){var M;return!Se(J)&&ct(L.Reflect)&&Object.isExtensible(L.Reflect)&&(M=L.Reflect[J]),Se(M)&&(M=function il(){var M;!Se(J)&&typeof L.Reflect<"u"&&!(J in L.Reflect)&&"function"==typeof L.Reflect.defineMetadata&&(M=function rl(M){var B=M.defineMetadata,K=M.hasOwnMetadata,oe=M.getOwnMetadata,xe=M.getOwnMetadataKeys,ut=M.deleteMetadata,ft=new ae;return{isProviderFor:function(ue,pe){var he=ft.get(ue);return!(Se(he)||!he.has(pe))||!!xe(ue,pe).length&&(Se(he)&&(he=new Z,ft.set(ue,he)),he.add(pe),!0)},OrdinaryDefineOwnMetadata:B,OrdinaryHasOwnMetadata:K,OrdinaryGetOwnMetadata:oe,OrdinaryOwnMetadataKeys:xe,OrdinaryDeleteMetadata:ut}}(L.Reflect));var B,K,oe,xe=new ae,ut={registerProvider:ft,getProvider:ue,setProvider:he};return ut;function ft(Te){if(!Object.isExtensible(ut))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case M===Te:break;case Se(B):B=Te;break;case B===Te:break;case Se(K):K=Te;break;case K===Te:break;default:void 0===oe&&(oe=new Z),oe.add(Te)}}function Re(Te,Fe){if(!Se(B)){if(B.isProviderFor(Te,Fe))return B;if(!Se(K)){if(K.isProviderFor(Te,Fe))return B;if(!Se(oe))for(var We=_a(oe);;){var _t=da(We);if(!_t)return;var kt=qi(_t);if(kt.isProviderFor(Te,Fe))return ma(We),kt}}}if(!Se(M)&&M.isProviderFor(Te,Fe))return M}function ue(Te,Fe){var _t,We=xe.get(Te);return Se(We)||(_t=We.get(Fe)),Se(_t)&&(Se(_t=Re(Te,Fe))||(Se(We)&&(We=new H,xe.set(Te,We)),We.set(Fe,_t))),_t}function pe(Te){if(Se(Te))throw new TypeError;return B===Te||K===Te||!Se(oe)&&oe.has(Te)}function he(Te,Fe,We){if(!pe(We))throw new Error("Metadata provider not registered.");var _t=ue(Te,Fe);if(_t!==We){if(!Se(_t))return!1;var kt=xe.get(Te);Se(kt)&&(kt=new H,xe.set(Te,kt)),kt.set(Fe,We)}return!0}}()),!Se(J)&&ct(L.Reflect)&&Object.isExtensible(L.Reflect)&&Object.defineProperty(L.Reflect,J,{enumerable:!1,configurable:!1,writable:!1,value:M}),M}(),ie=function al(M){var B=new ae,K={isProviderFor:function(pe,he){var Te=B.get(pe);return!Se(Te)&&Te.has(he)},OrdinaryDefineOwnMetadata:function ft(pe,he,Te,Fe){oe(Te,Fe,!0).set(pe,he)},OrdinaryHasOwnMetadata:function xe(pe,he,Te){var Fe=oe(he,Te,!1);return!Se(Fe)&&la(Fe.has(pe))},OrdinaryGetOwnMetadata:function ut(pe,he,Te){var Fe=oe(he,Te,!1);if(!Se(Fe))return Fe.get(pe)},OrdinaryOwnMetadataKeys:function Re(pe,he){var Te=[],Fe=oe(pe,he,!1);if(Se(Fe))return Te;for(var _t=_a(Fe.keys()),kt=0;;){var Bn=da(_t);if(!Bn)return Te.length=kt,Te;var Ys=qi(Bn);try{Te[kt]=Ys}catch(Us){try{ma(_t)}finally{throw Us}}kt++}},OrdinaryDeleteMetadata:function ue(pe,he,Te){var Fe=oe(he,Te,!1);if(Se(Fe)||!Fe.delete(pe))return!1;if(0===Fe.size){var We=B.get(he);Se(We)||(We.delete(Te),0===We.size&&B.delete(We))}return!0}};return ee.registerProvider(K),K;function oe(pe,he,Te){var Fe=B.get(pe),We=!1;if(Se(Fe)){if(!Te)return;Fe=new H,B.set(pe,Fe),We=!0}var _t=Fe.get(he);if(Se(_t)){if(!Te)return;if(_t=new H,Fe.set(he,_t),!M.setProvider(pe,he,K))throw Fe.delete(he),We&&B.delete(pe),new Error("Wrong provider for target.")}return _t}}(ee);function ta(M,B,K){if(Qi(M,B,K))return!0;var xe=Yi(B);return!Vn(xe)&&ta(M,xe,K)}function Qi(M,B,K){var oe=ms(B,K,!1);return!Se(oe)&&la(oe.OrdinaryHasOwnMetadata(M,B,K))}function na(M,B,K){if(Qi(M,B,K))return sa(M,B,K);var xe=Yi(B);return Vn(xe)?void 0:na(M,xe,K)}function sa(M,B,K){var oe=ms(B,K,!1);if(!Se(oe))return oe.OrdinaryGetOwnMetadata(M,B,K)}function ia(M,B,K,oe){ms(K,oe,!0).OrdinaryDefineOwnMetadata(M,B,K,oe)}function oa(M,B){var K=aa(M,B),oe=Yi(M);if(null===oe)return K;var xe=oa(oe,B);if(xe.length<=0)return K;if(K.length<=0)return xe;for(var ut=new Z,ft=[],Re=0,ue=K;Re<ue.length;Re++)ut.has(pe=ue[Re])||(ut.add(pe),ft.push(pe));for(var Te=0,Fe=xe;Te<Fe.length;Te++){var pe;ut.has(pe=Fe[Te])||(ut.add(pe),ft.push(pe))}return ft}function aa(M,B){var K=ms(M,B,!1);return K?K.OrdinaryOwnMetadataKeys(M,B):[]}function ra(M){if(null===M)return 1;switch(typeof M){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===M?1:6;default:return 6}}function Se(M){return void 0===M}function Vn(M){return null===M}function ct(M){return"object"==typeof M?null!==M:"function"==typeof M}function tl(M,B){switch(ra(M)){case 0:case 1:case 2:case 3:case 4:case 5:return M}var K=3===B?"string":5===B?"number":"default",oe=ua(M,v);if(void 0!==oe){var xe=oe.call(M,K);if(ct(xe))throw new TypeError;return xe}return function nl(M,B){if("string"===B){var K=M.toString;if(wt(K)&&!ct(oe=K.call(M)))return oe;if(wt(xe=M.valueOf)&&!ct(oe=xe.call(M)))return oe}else{var xe;if(wt(xe=M.valueOf)&&!ct(oe=xe.call(M)))return oe;var oe,ut=M.toString;if(wt(ut)&&!ct(oe=ut.call(M)))return oe}throw new TypeError}(M,"default"===K?"number":K)}function la(M){return!!M}function nn(M){var B=tl(M,3);return function el(M){return"symbol"==typeof M}(B)?B:function sl(M){return""+M}(B)}function In(M){return Array.isArray?Array.isArray(M):M instanceof Object?M instanceof Array:"[object Array]"===Object.prototype.toString.call(M)}function wt(M){return"function"==typeof M}function ca(M){return"function"==typeof M}function Ln(M,B){return M===B||M!=M&&B!=B}function ua(M,B){var K=M[B];if(null!=K){if(!wt(K))throw new TypeError;return K}}function _a(M){var B=ua(M,g);if(!wt(B))throw new TypeError;var K=B.call(M);if(!ct(K))throw new TypeError;return K}function qi(M){return M.value}function da(M){var B=M.next();return!B.done&&B}function ma(M){var B=M.return;B&&B.call(M)}function Yi(M){var B=Object.getPrototypeOf(M);if("function"!=typeof M||M===z||B!==z)return B;var K=M.prototype,oe=K&&Object.getPrototypeOf(K);if(null==oe||oe===Object.prototype)return B;var xe=oe.constructor;return"function"!=typeof xe||xe===M?B:xe}function ms(M,B,K){var oe=ee.getProvider(M,B);if(!Se(oe))return oe;if(K){if(ee.setProvider(M,B,ie))return ie;throw new Error("Illegal state.")}}function Ui(M){return M.__=void 0,delete M.__,M}A("decorate",function ke(M,B,K,oe){if(Se(K)){if(!In(M))throw new TypeError;if(!ca(B))throw new TypeError;return function $i(M,B){for(var K=M.length-1;K>=0;--K){var xe=(0,M[K])(B);if(!Se(xe)&&!Vn(xe)){if(!ca(xe))throw new TypeError;B=xe}}return B}(M,B)}if(!In(M))throw new TypeError;if(!ct(B))throw new TypeError;if(!ct(oe)&&!Se(oe)&&!Vn(oe))throw new TypeError;return Vn(oe)&&(oe=void 0),function Zr(M,B,K,oe){for(var xe=M.length-1;xe>=0;--xe){var ft=(0,M[xe])(B,K,oe);if(!Se(ft)&&!Vn(ft)){if(!ct(ft))throw new TypeError;oe=ft}}return oe}(M,B,K=nn(K),oe)}),A("metadata",function U(M,B){return function K(oe,xe){if(!ct(oe))throw new TypeError;if(!Se(xe)&&!function mn(M){switch(ra(M)){case 3:case 4:return!0;default:return!1}}(xe))throw new TypeError;ia(M,B,oe,xe)}}),A("defineMetadata",function q(M,B,K,oe){if(!ct(K))throw new TypeError;return Se(oe)||(oe=nn(oe)),ia(M,B,K,oe)}),A("hasMetadata",function e(M,B,K){if(!ct(B))throw new TypeError;return Se(K)||(K=nn(K)),ta(M,B,K)}),A("hasOwnMetadata",function Ce(M,B,K){if(!ct(B))throw new TypeError;return Se(K)||(K=nn(K)),Qi(M,B,K)}),A("getMetadata",function Le(M,B,K){if(!ct(B))throw new TypeError;return Se(K)||(K=nn(K)),na(M,B,K)}),A("getOwnMetadata",function _s(M,B,K){if(!ct(B))throw new TypeError;return Se(K)||(K=nn(K)),sa(M,B,K)}),A("getMetadataKeys",function ds(M,B){if(!ct(M))throw new TypeError;return Se(B)||(B=nn(B)),oa(M,B)}),A("getOwnMetadataKeys",function vt(M,B){if(!ct(M))throw new TypeError;return Se(B)||(B=nn(B)),aa(M,B)}),A("deleteMetadata",function cn(M,B,K){if(!ct(B))throw new TypeError;if(Se(K)||(K=nn(K)),!ct(B))throw new TypeError;Se(K)||(K=nn(K));var oe=ms(B,K,!1);return!Se(oe)&&oe.OrdinaryDeleteMetadata(M,B,K)})}(ge,L),typeof L.Reflect>"u"&&(L.Reflect=_e)}()}}]);