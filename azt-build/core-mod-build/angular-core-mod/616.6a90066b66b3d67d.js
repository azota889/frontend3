"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[616],{51322:(Y,z,s)=>{s.d(z,{Q:()=>b});class b{constructor(c,j,w,P,T,R,N,h=1,I=!1,M=!1,n,y,g,x,v){this.id=c,this.pr=j,this.type=w,this.shareType=P,this.item=T,this.examHashId=R,this.examCategoryId=N,this.level=h,this.expandable=I,this.isLoading=M,this.prNode=n,this.isLeaf=y,this.childrenNode=g,this.questions=x,this.children=v}}},54220:(Y,z,s)=>{s.d(z,{f:()=>we});var b=s(54460),e=s(48891),c=s(10936),j=s(65162),w=s(15343),P=s(5502),T=s(51698),R=s(38136),N=s(21656),h=s(85747),I=s(47348),M=s(70050),n=s(59640),y=s(15766),g=s(51614),x=s(6989),v=s(46840),U=s(52811),L=s(18718),J=s(1349),V=s(50282),W=s(30683),H=s(44233),C=s(7919),A=s(9691),S=s(39471);const D=i=>({"font-medium":i});function O(i,f){1&i&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_nhap_ho_va_ten")))}function G(i,f){1&i&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_nhap_so_dien_thoai")))}function Z(i,f){1&i&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_student_utils_reques_phone_ten_number")))}function ne(i,f){1&i&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_document_please_enter_the_author_workplace")))}function se(i,f){if(1&i&&(e.j41(0,"div",14)(1,"div",30)(2,"div",31),e.nrm(3,"input",32),e.nI1(4,"mytranslate"),e.DNE(5,O,4,3,"div",33),e.k0s(),e.j41(6,"div",34),e.nrm(7,"input",35),e.nI1(8,"mytranslate"),e.DNE(9,G,4,3,"div",33)(10,Z,4,3,"div",33),e.k0s(),e.j41(11,"div",36),e.nrm(12,"input",37),e.nI1(13,"mytranslate"),e.DNE(14,ne,4,3,"div",33),e.k0s()()()),2&i){const l=e.XpG();e.R7$(3),e.FS9("placeholder",e.bMT(4,7,"lang_auto_nhap_ho_va_ten")),e.R7$(2),e.Y8G("ngIf","0"==l.form.controls.creatorId.value&&!l.form.controls.creatorFullName.value),e.R7$(2),e.FS9("placeholder",e.bMT(8,9,"lang_auto_nhap_so_dien_thoai")),e.R7$(2),e.Y8G("ngIf","0"==l.form.controls.creatorId.value&&!l.form.controls.creatorPhone.value),e.R7$(),e.Y8G("ngIf","0"==l.form.controls.creatorId.value&&l.form.controls.creatorPhone.value&&10!==l.form.controls.creatorPhone.value.length),e.R7$(2),e.FS9("placeholder",e.bMT(13,11,"lang_document_workplace")),e.R7$(2),e.Y8G("ngIf","0"==l.form.controls.creatorId.value&&!l.form.controls.creatorWorkingAddress.value)}}function ae(i,f){if(1&i){const l=e.RV6();e.j41(0,"mat-tree-node",43),e.nrm(1,"button",44),e.j41(2,"div",45)(3,"input",46),e.bIt("change",function(){const o=e.eBV(l).$implicit,a=e.XpG(2);return e.Njj(a.checklistSelection.toggle(o))}),e.k0s(),e.j41(4,"label",47)(5,"span"),e.EFF(6),e.k0s()()()()}if(2&i){const l=f.$implicit,t=e.XpG(2);e.R7$(3),e.FS9("id","knowledge-"+l.id),e.Y8G("checked",t.checklistSelection.isSelected(l)),e.R7$(),e.FS9("for","knowledge-"+l.id),e.R7$(2),e.JRh(l.item)}}function ie(i,f){if(1&i){const l=e.RV6();e.j41(0,"mat-tree-node",48)(1,"button",49)(2,"span",50),e.nrm(3,"lucide-icon",51),e.k0s()(),e.j41(4,"div",45)(5,"input",52),e.bIt("change",function(){const o=e.eBV(l).$implicit,a=e.XpG(2);return e.Njj(a.todoItemSelectionToggle(o))}),e.k0s(),e.j41(6,"label",47)(7,"span"),e.EFF(8),e.k0s()()()()}if(2&i){const l=f.$implicit,t=e.XpG(2);e.R7$(),e.BMQ("aria-label","toggle "+l.filename),e.R7$(2),e.FS9("name",t.treeControl.isExpanded(l)?"chevron-down":"chevron-right"),e.R7$(2),e.FS9("id","knowledge-"+l.id),e.Y8G("checked",t.descendantsAllSelected(l))("indeterminate",t.descendantsPartiallySelected(l)),e.R7$(),e.FS9("for","knowledge-"+l.id),e.R7$(2),e.JRh(l.item)}}function re(i,f){if(1&i&&(e.j41(0,"div",14)(1,"div",3)(2,"div",31)(3,"span",17),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",39)(7,"mat-tree",40),e.DNE(8,ae,7,4,"mat-tree-node",41)(9,ie,9,7,"mat-tree-node",42),e.k0s()()()()),2&i){const l=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,4,"lang_document_the_knowledge_units_present_in_the_exam")," "),e.R7$(3),e.Y8G("dataSource",l.dataSource)("treeControl",l.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",l.hasChild)}}function le(i,f){1&i&&(e.j41(0,"span",58),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI("(",e.bMT(2,1,"lang_document_current"),")"))}function ce(i,f){if(1&i&&(e.j41(0,"div",53)(1,"div",54),e.nrm(2,"input",55),e.j41(3,"label",56)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,le,3,3,"span",57),e.k0s()()()),2&i){const l=f.index,t=e.XpG();e.R7$(2),e.FS9("id","week-"+t.listWeek[l]),e.Y8G("formControlName",l),e.R7$(),e.FS9("for","week-"+t.listWeek[l]),e.Y8G("ngClass",e.eq3(8,D,t.currentSchoolWeeks===t.listWeek[l])),e.R7$(2),e.JRh(e.bMT(6,6,"lang_document_week")+" "+t.listWeek[l]),e.R7$(2),e.Y8G("ngIf",t.currentSchoolWeeks===t.listWeek[l])}}function me(i,f){1&i&&(e.j41(0,"div",59)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_document_please_select_the_time_of_use")))}class de{}class ue{}let he=(()=>{var i;class f extends n.H{buildFileTree(t,o){const a=[];return t.forEach(r=>{const m=new de;m.item=r.name,m.id=r.id,r.children&&(m.children=this.buildFileTree(r.children,o+1)),a.push(m)}),a}descendantsAllSelected(t){return this.treeControl.getDescendants(t).every(a=>this.checklistSelection.isSelected(a))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(r=>this.checklistSelection.isSelected(r))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const o=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...o):this.checklistSelection.deselect(...o)}toggleAllCheckBox(){this.isCheckSemesterOne.setValue(this.isCheckAllWeeks.value),this.isCheckSemesterTwo.setValue(this.isCheckAllWeeks.value);const t=this.isCheckAllWeeks.value;this.formArrayListWeek.controls.map(o=>o.setValue(t))}toggleSemesterOneCheckBox(){const t=this.isCheckSemesterOne.value;this.formArrayListWeek.controls.map((o,a)=>(a<18&&o.setValue(t),o)),this.calculateIsCheckAll()}toggleSemesterTwoCheckBox(){const t=this.isCheckSemesterTwo.value;this.formArrayListWeek.controls.map((o,a)=>(a>=18&&o.setValue(t),o)),this.calculateIsCheckAll()}initForm(){this.formArrayListWeek=this.form.controls.weeks,this.formArrayListKnowledge=this.form.controls.knowledgeIds}initKnowledgeCheckbox(t){this.formArrayListKnowledge.clear();for(let o=0;o<t.length;o++){const r=new c.MJ(!1,{nonNullable:!0});this.formArrayListKnowledge.push(r)}}initWeedCheckbox(t){this.formArrayListWeek.clear();for(let o=0;o<t.length;o++){const r=new c.MJ(!1,{nonNullable:!0});this.formArrayListWeek.push(r)}}calculateIsCheckAll(){const t=this.formArrayListWeek.controls.every(o=>o.value);this.isCheckAllWeeks.setValue(t)}ngOnChanges(){this.initForm(),this.initKnowledgeCheckbox(this.listKnowledge),this.dataSource.data=this.buildFileTree(this.listKnowledge,0)}ngOnInit(){super.ngOnInit(),this.initWeedCheckbox(this.listWeek),this.currentSchoolWeeks=this.timeService.getSchoolWeeks(),this.checklistSelection.changed.subscribe(t=>{let o=this.checklistSelection.selected.map(a=>a.id??0);this.listKnowledgeId=o.sort((a,r)=>a-r)??[],this.emitChooseKnowledge.emit(this.listKnowledgeId)}),this.form.controls.weeks.valueChanges.subscribe(t=>{this.calculateIsCheckAll(),this.checkChooseWeeks=t.some(o=>o)})}constructor(t){super(),this.timeService=t,this.listKnowledge=[],this.listWeek=[],this.emitChooseKnowledge=new e.bkB,this.formArrayListKnowledge=new c.Yp([]),this.formArrayListWeek=new c.Yp([]),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new J.CB(!0),this.listKnowledgeId=[],this.currentSchoolWeeks=0,this.checkChooseWeeks=!1,this.isCheckAllWeeks=new c.MJ(!1,{nonNullable:!0}),this.isCheckSemesterOne=new c.MJ(!1,{nonNullable:!0}),this.isCheckSemesterTwo=new c.MJ(!1,{nonNullable:!0}),this.getLevel=o=>o.level??0,this.isExpandable=o=>o.expandable??!1,this.getChildren=o=>o.children??[],this.hasChild=(o,a)=>a.expandable??!1,this.hasNoContent=(o,a)=>""===a.item,this.transformer=(o,a)=>{const r=this.nestedNodeMap.get(o),m=r&&r.item===o.item?r:new ue;return m.item=o.item,m.level=a,m.id=o.id,m.expandable=!!o.children,this.flatNodeMap.set(m,o),this.nestedNodeMap.set(o,m),m},this.treeFlattener=new W.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new V.XW(this.getLevel,this.isExpandable),this.dataSource=new W.zw(this.treeControl,this.treeFlattener)}}return(i=f).\u0275fac=function(t){return new(t||i)(e.rXU(A.F))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-config-document-market"]],inputs:{form:"form",listKnowledge:"listKnowledge",listWeek:"listWeek"},outputs:{emitChooseKnowledge:"emitChooseKnowledge"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:48,vars:29,consts:[[1,"mt-5"],[3,"formGroup"],[1,"box","p-3"],[1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-5"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["type","radio","id","creator-by-me","formControlName","creatorId","value","1",1,"form-check-input"],["for","creator-by-me",1,"form-check-label"],["type","radio","id","creator-by-user-other","formControlName","creatorId","value","0",1,"form-check-input"],["for","creator-by-user-other",1,"form-check-label"],["class","mt-3",4,"ngIf"],[1,"mt-3"],["formArrayName","weeks",1,"list-week","grid","grid-cols-12"],[1,"col-span-12","flex","items-center"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"list-week","col-span-12","mt-1"],[1,"flex","flex-row","sm:flex-col","sm:items-center"],[1,"azt-form-check","mr-5","mt-3","sm:mt-0"],["type","checkbox","id","selectSemesterOne",1,"form-check-input",3,"change","formControl"],["for","selectSemesterOne",1,"form-check-label"],["type","checkbox","id","selectSemesterTwo",1,"form-check-input",3,"change","formControl"],["for","selectSemesterTwo",1,"form-check-label"],["type","checkbox","id","selectAllWeeks",1,"form-check-input",3,"change","formControl"],["for","selectAllWeeks",1,"form-check-label"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],["class","col-span-12 mt-2 text-danger text-xs",4,"ngIf"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12"],["type","text","name","creatorFullName","formControlName","creatorFullName",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4"],["type","text","appOnlyNumber","","name","creatorPhone","formControlName","creatorPhone",1,"form-control",3,"placeholder"],[1,"col-span-12","md:col-span-8"],["type","text","name","creatorWorkingAddress","formControlName","creatorWorkingAddress",1,"form-control",3,"placeholder"],[1,"text-danger","text-xs","mt-2"],[1,"list-knowledge","col-span-12"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"azt-form-checked"],["type","checkbox",1,"form-check-input",3,"change","checked","id"],[1,"form-check-label",2,"vertical-align","middle",3,"for"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror","w-5","h-5","inline-block",2,"vertical-align","bottom"],["size","20",3,"name"],["type","checkbox",1,"form-check-input",3,"change","checked","indeterminate","id"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[1,"azt-form-check"],["type","checkbox","value","41556",1,"form-check-input",3,"formControlName","id"],[1,"form-check-label",2,"vertical-align","middle",3,"ngClass","for"],["class","inline-block ml-1",4,"ngIf"],[1,"inline-block","ml-1"],[1,"col-span-12","mt-2","text-danger","text-xs"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.j41(8,"div",6)(9,"div",7)(10,"div",8),e.nrm(11,"input",9),e.j41(12,"label",10),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"div",8),e.nrm(16,"input",11),e.j41(17,"label",12),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()()()(),e.DNE(20,se,15,13,"div",13)(21,re,10,6,"div",13),e.j41(22,"div",14)(23,"div",15)(24,"div",16)(25,"span",17),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()(),e.j41(28,"div",18)(29,"div",19)(30,"div",20)(31,"input",21),e.bIt("change",function(){return o.toggleSemesterOneCheckBox()}),e.k0s(),e.j41(32,"label",22),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s()(),e.j41(35,"div",20)(36,"input",23),e.bIt("change",function(){return o.toggleSemesterTwoCheckBox()}),e.k0s(),e.j41(37,"label",24),e.EFF(38),e.nI1(39,"mytranslate"),e.k0s()(),e.j41(40,"div",20)(41,"input",25),e.bIt("change",function(){return o.toggleAllCheckBox()}),e.k0s(),e.j41(42,"label",26),e.EFF(43),e.nI1(44,"mytranslate"),e.k0s()()(),e.j41(45,"div",27),e.DNE(46,ce,8,10,"div",28),e.k0s()(),e.DNE(47,me,4,3,"div",29),e.k0s()()()()()),2&t&&(e.R7$(),e.Y8G("formGroup",o.form),e.R7$(5),e.SpI(" ",e.bMT(7,15,"lang_document_author")," "),e.R7$(7),e.SpI(" ",e.bMT(14,17,"lang_document_me")," "),e.R7$(5),e.SpI(" ",e.bMT(19,19,"lang_document_others")," "),e.R7$(2),e.Y8G("ngIf","0"==o.form.controls.creatorId.value),e.R7$(),e.Y8G("ngIf",o.formArrayListKnowledge.controls.length),e.R7$(5),e.SpI(" ",e.bMT(27,21,"lang_document_time_of_use")," "),e.R7$(5),e.Y8G("formControl",o.isCheckSemesterOne),e.R7$(2),e.SpI(" ",e.bMT(34,23,"lang_config_semester")+" 1"," "),e.R7$(3),e.Y8G("formControl",o.isCheckSemesterTwo),e.R7$(2),e.SpI(" ",e.bMT(39,25,"lang_config_semester")+" 2"," "),e.R7$(3),e.Y8G("formControl",o.isCheckAllWeeks),e.R7$(2),e.SpI(" ",e.bMT(44,27,o.isCheckAllWeeks.value?"lang_student_classroom_list_utils_create_class_new_course_disable":"lang_student_classroom_list_utils_create_class_new_course_choose_all")," "),e.R7$(3),e.Y8G("ngForOf",o.formArrayListWeek.controls),e.R7$(),e.Y8G("ngIf",!o.checkChooseWeeks))},dependencies:[H.An,b.MD,b.YU,b.Sq,b.bT,c.X1,c.qT,c.me,c.Zm,c.Fm,c.BC,c.cb,c.l_,c.j4,c.JD,c.v8,j.iI,c.YN,I.wp,N.s,S.iY,W.yI,W.yF,W.pO,W.lQ,W.d6,w.flO,w.WGl,M.L,P.Id,C.Z],encapsulation:2}),f})();var pe=s(36894),ge=s(78472),ee=s(83016),fe=s(27691),te=s(5382),_e=s(64198),ve=s(543),Ce=s(48451);let ke=(()=>{var i;class f{constructor(t,o){this.commonService=t,this.apiUploadService=o,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new te.n(50,{function:(a,r)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(a,r)}}),this.taskUploadImage=new te.n(10,{function:(a,r)=>{this.callbackUploadImage&&this.callbackUploadImage(a,r)}})}convertQuestions(t,o,a){return new Promise(r=>{this.reset(),t.forEach(m=>{const u=this.commonService.willDeleteParseJson(m.answerConfig||"[]");m.questionContent?.includes("<img ")&&this.replaceImageCdnInContent(m,"questionContent"),m.questionText?.includes("<img ")&&this.replaceImageCdnInContent(m,"questionText"),m.answerMedia?.includes("<img ")&&this.replaceImageCdnInContent(m,"answerMedia"),m.mediaMeta?.includes("<img ")&&this.replaceImageCdnInContent(m,"mediaMeta"),u.forEach(p=>{p.content.includes("<img ")&&this.replaceImageCdnInContent(p,"content")}),this.actionRunAfterConvert.push(()=>{m.answerConfig=JSON.stringify(u)})}),this.imageMaps.forEach(m=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[m])}),this.taskConvertBase64ToCanvas.start().then(m=>{if(m.errs.length>0)a(m.errs,void 0);else{let p=0;const d=[],B=()=>{const k=document.createElement("canvas");k.width=this.sizeDefaultCanvas,k.height=this.sizeDefaultCanvas;const K=k.getContext("2d");K&&(K.fillStyle="white",K.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),d.push({cdn:"",cX:0,cY:0,canvas:k,imgs:[]})};B(),m.datas.forEach((k,K)=>{var _=d[d.length-1];_.cX+k.canvas.width+4>this.sizeDefaultCanvas?(_.cX=4,_.cY+=p+4,p=0):_.cX+=4,_.cY+k.canvas.height>this.sizeDefaultCanvas&&(B(),_=d[d.length-1]);var $=_.canvas.getContext("2d");_.imgs.push({x:_.cX,y:_.cY,width:k.canvas.width,height:k.canvas.height,index:K}),$?.drawImage(k.canvas,0,0,k.canvas.width,k.canvas.height,_.cX,_.cY,k.canvas.width,k.canvas.height),_.cX+=k.canvas.width,p=p<k.canvas.height?k.canvas.height:p}),d[0].imgs.length>0&&d.forEach(k=>{this.taskUploadImage.addTask(this,this.startUploadFile,[k])}),this.taskUploadImage.start().then(k=>{if(k.errs.length>0)a(m.errs,void 0);else{let K=!0;k.datas.forEach(_=>{_.imgs.forEach($=>{const E=m.datas[$.index];if(E){const Q={link:_.cdn,data:{x:$.x,y:$.y,width:$.width,height:$.height}};E.objs.forEach(F=>{if(F[E.path])if(this.commonService.isJson(F[E.path])){const X=this.commonService.willDeleteParseJson(F[E.path]);Object.prototype.hasOwnProperty.call(X,"renderedStr")?(X.renderedStr=X.renderedStr.replace(E.base,`@[]${JSON.stringify(Q)}@[]`),F[E.path]=JSON.stringify(X)):F[E.path]=F[E.path].replace(E.base,`@[]${JSON.stringify(Q)}@[]`)}else F[E.path]=F[E.path].replace(E.base,`@[]${JSON.stringify(Q)}@[]`);else K=!1})}})}),K?(this.actionRunAfterConvert.forEach(_=>{_()}),t.forEach((_,$)=>{let E=this.commonService.willDeleteParseJson(_.mediaMeta||"{}"),Q=o[$];const F={id:0,name:_.name,extension:"text",content:_.questionContent,groupContent:E.renderedStr,metaData:{isFixAns:Number(_.isFixAns),forcedFixAns:!1,groupType:_.groupType?Number(_.groupType):void 0}};Q&&(F.vMetaEditor=Q.meta),_.questionContent=JSON.stringify([F])}),r()):a(m.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(t,o){var a=t[o];if(this.commonService.isJson(t[o])){const u=this.commonService.willDeleteParseJson(t[o]);Object.prototype.hasOwnProperty.call(u,"renderedStr")&&(a=u.renderedStr)}let r=a.matchAll(this.pattern_image);for(;;){let u=r.next();if(u.done)break;let p=u.value[0];var m=this.imageMaps.findIndex(d=>d.base===p&&d.path===o);-1===m?this.imageMaps.push({base:p,cdn:"",data:null,objs:[t],path:o,canvas:document.createElement("canvas")}):this.imageMaps[m].objs.push(t)}}startConvertCanvas(t){return new Promise((o,a)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{let u=1;if(r.width>this.sizeDefaultCanvas&&(u=this.sizeDefaultCanvas/r.width),r.height>this.sizeDefaultCanvas){let d=this.sizeDefaultCanvas/r.height;d<u&&(u=d)}t.canvas.width=r.width*u,t.canvas.height=r.height*u,t.canvas.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,t.canvas.width,t.canvas.height),o(t)},r.onerror=()=>{t.canvas.width=1,t.canvas.height=1;const u=t.canvas.getContext("2d");u&&(u.fillStyle="white",u.fillRect(0,0,1,1)),o(t)};let m=this.pattern_base64.exec(t.base);null!=m?r.src=m[0]:a(new Error("l\u1ed7i regex"))})}startUploadFile(t){return new Promise((o,a)=>{const r=this.dataURLtoFile(t.canvas.toDataURL("image/png",1));(0,_e.w4)(r).then(m=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(m).subscribe(u=>{u.type!=fe.hv.UploadProgress&&(1==u.success&&u.data?o({...t,cdn:u.data.url||""}):a(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",u.message??"none"))))})})})}dataURLtoFile(t){let o=this.getFileName(t);for(var a=t.split(","),r=a[0].match(/:(.*?);/),m=atob(a[1]),u=m.length,p=new Uint8Array(u);u--;)p[u]=m.charCodeAt(u);return new File([p],o,{type:r&&r.length>0?r[1]:"png"})}getFileName(t){var o=t.split("").reverse().join(""),a=o.indexOf(";"),r=o.indexOf("/",a);return o.substring(a,r).split("").reverse().join("")}}return(i=f).\u0275fac=function(t){return new(t||i)(e.KVO(ve.R),e.KVO(Ce.T))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),f})();var Se=s(60531),be=s(77260),xe=s(50589),Ie=s(92540),Ee=s(81587);function Te(i,f){if(1&i&&e.nrm(0,"azt-loading-effect",3),2&i){const l=e.XpG();e.Y8G("currentStatusObj",l.statusObj)}}function Me(i,f){1&i&&(e.j41(0,"div",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_ten\u01a1_de_thi")," "))}function ye(i,f){1&i&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}function De(i,f){if(1&i){const l=e.RV6();e.j41(0,"div",4)(1,"form",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"label",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",10)(11,"div",12),e.nrm(12,"input",13),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Me,3,3,"div",14),e.k0s()(),e.j41(15,"div",15),e.nrm(16,"config-level-subject-book",16),e.k0s(),e.j41(17,"div",17),e.nrm(18,"config-purpose-exam",18),e.k0s(),e.j41(19,"div",19)(20,"div",10)(21,"label",20),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"div",10)(25,"div",12),e.nrm(26,"textarea",21),e.nI1(27,"mytranslate"),e.k0s()()()(),e.j41(28,"div",22)(29,"azt-config-document-market",23),e.bIt("emitChooseKnowledge",function(o){e.eBV(l);const a=e.XpG();return e.Njj(a.chooseKnowledge(o))}),e.k0s()(),e.j41(30,"div",24)(31,"div",25)(32,"button",26),e.bIt("click",function(){e.eBV(l);const o=e.XpG();return e.Njj(o.cancelSaveDocumentObj())}),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s(),e.j41(35,"button",27),e.bIt("click",function(){e.eBV(l);const o=e.XpG();return e.Njj(o.handleSaveDocument())}),e.DNE(36,ye,2,0,"span",28),e.EFF(37),e.nI1(38,"mytranslate"),e.k0s()()()()()()()}if(2&i){const l=e.XpG();e.R7$(),e.Y8G("formGroup",l.form),e.R7$(7),e.SpI(" ",e.bMT(9,17,"lang_auto_ten")," "),e.R7$(4),e.FS9("placeholder",e.bMT(13,19,"lang_auto_nhap_ten")+" ..."),e.R7$(2),e.Y8G("ngIf",l.form.controls.name.errors),e.R7$(2),e.Y8G("form",l.form)("useExamSchoolLogData",!0),e.R7$(2),e.Y8G("purposeList",l.listPurposeObjs)("form",l.form),e.R7$(4),e.SpI(" ",e.bMT(23,21,"lang_auto_mo_ta")," "),e.R7$(4),e.FS9("placeholder",e.bMT(27,23,"lang_core_nhap_mo_ta")+" ..."),e.R7$(3),e.Y8G("form",l.form)("listWeek",l.listWeek)("listKnowledge",l.listKnowledge),e.R7$(4),e.SpI(" ",e.bMT(34,25,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",l.logConfig.status),e.R7$(),e.Y8G("ngIf",l.logConfig.status),e.R7$(),e.SpI(" ",e.bMT(38,27,"lang_auto_luu")," ")}}function Oe(i,f){if(1&i&&(e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),e.nrm(4,"azt-loading-ui"),e.k0s(),e.j41(5,"div",35),e.EFF(6),e.k0s()()()()),2&i){const l=e.XpG();e.R7$(6),e.JRh(l.logConfig.msg)}}let we=(()=>{var i;class f extends n.H{chooseKnowledge(t){this.knowledgeList=t}cancelSaveDocumentObj(){this.onBack.emit(!0)}handleSaveDocument(){const t=this.getWeeksChecked(this.listWeek,this.form.controls.weeks.value);if(this.checkErrorValidateSave(t,this.knowledgeList))this.showErrorSnack("lang_cms_utils_folder_name_validate_space");else{if(this.type===v.x.exam&&this.isCreateQuestionToEditor&&this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){this.logConfig.setStatus(this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi")),this.countProcess=0;const o=this.dataSave.exam.questionObj.listQuestions;let a=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"";this.questionShareSaveService.convertQuestions(o,this.dataSave.exam.rootQuests,(r,m=a,u)=>{this.logConfig.stopStatus(),this.showErrorSnack(m),u&&this.stopStatusObj()}).then(()=>{this.startMainProcessSaveEditor()})}this.type===v.x.exam&&!this.isCreateQuestionToEditor&&this.examObj?.id&&this.saveDocumentMarketQuestionObjs(),this.type!==v.x.exam&&this.attachments.length&&this.saveDocumentMarketQuestionObjs(),console.log(this.attachments,this.type)}}initQuestionShare(){this.questionShareSaveService.callbackBase64ToCanvas=(t,o)=>{let a=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${a} ${Math.floor(t/o*100*.7)}%`)},this.questionShareSaveService.callbackUploadImage=(t,o)=>{let a=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${a} ${Math.floor(t/o*100*.3)+70}%`)}}processSaveQuestionsFromEditor(t,o,a){if(this.dataSave.exam?.questionObj&&this.dataSave.exam?.questionObj.listQuestions){var r=this.dataSave.exam?.questionObj.listQuestions.length;let m=t+100>r?r:t+100,u=this.dataSave.exam?.questionObj.listQuestions.slice(t,m)??[],p=[];for(const d of u)p.push({categoryId:d.categoryId,groupId:d.groupId,name:d.name??"none",metadata:d.metadata,isImage:d.isImage,questionContent:d.questionContent,answerMedia:d.answerMedia,questionText:d.questionText,answerType:d.answerType,answerConfig:d.answerConfig,coordinates:d.coordinates,answerResult:d.answerResult,totalQuestion:d.totalQuestion,tags:d.tags??[],mediaId:d.mediaId,mediaMeta:d.mediaMeta,attachments:d.attachments,version:d.version,isFixAns:d.isFixAns,groupType:d.groupType,__path:d.__path,answers:d.configAnswers?d.configAnswers.map(B=>({answerKey:B.key,objectiveId:B.objectiveId,tag:B.tagCode})):[]});p.length>0?this.sAztSaveProcessService.saveQuestionObjsFromEditor(this.dataSave,p,o).then(d=>{d&&d.listQuestionId.length>0?(a.listQuestionId=a.listQuestionId.concat(d.listQuestionId),this.processSaveQuestionsFromEditor(m,d.indexSaved,a)):(this.countProcess=0,this.logConfig.stopStatus(),this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai"))}):this.saveDocumentMarketQuestionObjs(a)}}startMainProcessSaveEditor(){this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestionsFromEditor(0,0,{indexSaved:0,listQuestionId:[]})}getListPurposeExam(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListExamPurposesGet().subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);this.listPurposeObjs=t.data?.objs??[],this.successStatusObj()}))}getKnowledgeData(){const t=this.form.getRawValue();!t.schoolLevel||!t.schoolSubject||this.waitDestroy(this.knowledgeService.apiKnowledgeGet(t.schoolLevel,t.schoolSubject).subscribe(o=>{o.list&&(this.listKnowledge=o.list)}))}checkErrorValidateSave(t,o){return!(!this.form.invalid&&("0"!=this.form.controls.creatorId.value||this.form.controls.creatorFullName.value&&this.form.controls.creatorFullName.value&&this.form.controls.creatorPhone.value&&this.form.controls.creatorWorkingAddress.value)&&("0"!=this.form.controls.creatorId.value||10===this.form.controls.creatorPhone.value.length)&&t.length)}fillConfig(){return new T.c(t=>{const o=this.isCreateQuestionToEditor,a=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),r=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),m=o?Number(this.browserStorageService.getSimpleStorage("levelId")??0):a,u=o?Number(this.browserStorageService.getSimpleStorage("subjectId")??0):r;this.examObj?.id?this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj.hashId??"").subscribe(p=>{if(!p.success)return this.errorStatusObj(p.message??"",!0);if(!p.data?.examObj)return;const d=p.data.examObj;this.form.patchValue({name:d.name,description:d.description,schoolLevel:d.schoolLevelId??a,schoolSubject:d.schoolSubjectId??r,purposeExam:p.data?.purposeId??0,purposeNote:p.data?.purposeNote??""}),t.next()}):(this.form.controls.schoolLevel.setValue(m),this.form.controls.schoolSubject.setValue(u),o||this.form.controls.name.setValue(this.name),t.next())})}getWeeksChecked(t,o){let a=[];for(let r=0;r<o.length;r++)o[r]&&t[r]&&a.push(t[r]);return a}createListWeek(){for(let o=0;o<35;o++)this.listWeek.push(o+1)}saveDocumentMarketQuestionObjs(t){const o=this.getWeeksChecked(this.listWeek,this.form.controls.weeks.value);this.logConfig.setStatus("");let a={name:this.form.controls.name.value,type:this.type,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,purposeId:this.form.controls.purposeExam.value,purposeNote:this.form.controls.purposeNote.value,description:this.form.controls.description.value,creatorId:Number(this.form.controls.creatorId.value),creatorFullName:this.form.controls.creatorFullName.value,creatorPhone:this.form.controls.creatorPhone.value,creatorWorkingAddress:this.form.controls.creatorWorkingAddress.value,knowledgeIds:this.knowledgeList,weeks:o};switch(this.type){case v.x.exam:if(t&&this.isCreateQuestionToEditor){let r=[];r=t.listQuestionId.map(m=>m??0)??[],a.questionIds=r}this.examObj?.id&&!this.isCreateQuestionToEditor&&(a.examId=this.examObj?.id,a.questionIds=[]);break;case v.x.lecture:case v.x.ref:case v.x.teaching_plan:case v.x.slide:a.attachments=this.attachments}this.waitDestroy(this.documentService.apiDocumentsPost(a).subscribe(r=>{if(r.id){this.successStatusObj("lang_document_successful_sharing",!0);const m="/document-market/list-documents/your-documents/1";this.logConfig.stopStatus(),this.myNavigation(m)}else this.errorStatusObj(""),this.logConfig.stopStatus()}))}ngOnInit(){super.ngOnInit(),this.createListWeek(),this.getListPurposeExam(),this.fillConfig().pipe((0,R.c)(500)).subscribe(()=>{this.getKnowledgeData(),this.form.controls.schoolSubject.valueChanges.subscribe(()=>{this.getKnowledgeData()}),this.form.controls.schoolLevel.valueChanges.subscribe(()=>{this.getKnowledgeData()})}),this.type===v.x.exam&&this.isCreateQuestionToEditor&&(this.dataSave=this.editorOutputDataService.getOutputData(),this.form.controls.name.setValue(this.dataSave.exam?.examObj.name??this.dataSave.homework?.name??""))}constructor(t,o,a,r,m,u,p,d,B){super(),this.documentConfigService=t,this.activeRoute=o,this.documentService=a,this.knowledgeService=r,this.questionShareSaveService=m,this.editorOutputDataService=u,this.sAztSaveProcessService=p,this.browserStorageService=d,this.commonListService=B,this.type=v.x.exam,this.isCreateQuestionToEditor=!1,this.attachments=[],this.name="",this.onBack=new e.bkB,this.listPurposeObjs=[],this.listKnowledge=[],this.logConfig=new h.J,this.dataSave={},this.saveParts=[],this.countProcess=0,this.knowledgeList=[],this.listWeek=[],this.form=new c.gE({name:new c.MJ("",{nonNullable:!0,validators:[c.k0.required,y.M.noWhiteSpace]}),description:new c.MJ("",{nonNullable:!0}),schoolLevel:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),schoolSubject:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),purposeExam:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),purposeNote:new c.MJ("",{nonNullable:!0}),knowledgeIds:new c.Yp([]),weeks:new c.Yp([]),creatorId:new c.MJ("1",{nonNullable:!0}),creatorFullName:new c.MJ("",{nonNullable:!0}),creatorPhone:new c.MJ("",{nonNullable:!0}),creatorWorkingAddress:new c.MJ("",{nonNullable:!0})}),this.type===v.x.exam&&this.isCreateQuestionToEditor&&this.initQuestionShare()}}return(i=f).\u0275fac=function(t){return new(t||i)(e.rXU(ge.x_),e.rXU(j.nX),e.rXU(ee.DK),e.rXU(ee.Iu),e.rXU(ke),e.rXU(Se.O),e.rXU(be.G),e.rXU(xe.z),e.rXU(Ie.Nz))},i.\u0275cmp=e.VBU({type:i,selectors:[["azt-config-share-document"]],inputs:{type:"type",isCreateQuestionToEditor:"isCreateQuestionToEditor",attachments:"attachments",name:"name",examObj:"examObj"},outputs:{onBack:"onBack"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[3,"currentStatusObj"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1100px"],[1,"setting-block"],[1,"box","mt-2","p-3"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","name","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],[1,"mt-4"],[3,"form","useExamSchoolLogData"],[1,"mt-2"],[3,"purposeList","form"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","description",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"config-document-market"],[3,"emitChooseKnowledge","form","listWeek","listKnowledge"],[1,"mt-5"],[1,"flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-2",4,"ngIf"],[1,"mt-2","text-danger","text-xs","fade"],[1,"w-4","h-4","mr-2"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(t,o){if(1&t&&e.DNE(0,Te,1,1,"azt-loading-effect",1)(1,De,39,29,"ng-template",null,0,e.C5r)(3,Oe,7,1,"div",2),2&t){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",o.logConfig.status&&o.isCreateQuestionToEditor)}},dependencies:[he,L.K,g.X,x.b,U.R,b.MD,b.bT,c.X1,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,j.iI,c.YN,I.wp,N.s,w.flO,M.L,P.Id,pe.k,Ee.t],encapsulation:2}),f})()},77260:(Y,z,s)=>{s.d(z,{G:()=>P});var b=s(48891),e=s(543),c=s(5382),j=s(95222),w=s(76671);let P=(()=>{var T;class R{convertBase64OfMathJaxToCdnUrlInQuestions(h,I){return new Promise((M,n)=>{const y=null==I?new c.n(10):new c.n(10,{function:I},0);h.forEach(g=>{y.addTask(this.dataAztMathRawHelper,this.dataAztMathRawHelper.convertBase64OfMathJaxToCdnUrl,[g])}),y.start().then(g=>{0===g.errs.length?M(g.datas):n(g.errs[0])})})}saveQuestionObjsFromEditor(h,I,M){return new Promise(n=>{this.convertBase64OfMathJaxToCdnUrlInQuestions(I,void 0).then(y=>{let g=[];for(let x=0;x<y.length;x++){let v=y[x];v.expandInfo=this.commonService.serializeJson(h.exam?.examObj.expandInfoObj),g.push(v)}this.questionService.apiQuestionsPost({listQuestions:g}).subscribe(x=>{n(x.list?{indexSaved:x.list.length+M,listQuestionId:x.list}:{indexSaved:M,listQuestionId:[]})})}).catch(()=>{n({indexSaved:M,listQuestionId:[]})})})}constructor(h,I){this.questionService=h,this.dataAztMathRawHelper=I,this.commonService=(0,b.WQX)(e.R)}}return(T=R).\u0275fac=function(h){return new(h||T)(b.KVO(j.wP),b.KVO(w.c))},T.\u0275prov=b.jDH({token:T,factory:T.\u0275fac,providedIn:"root"}),R})()},6989:(Y,z,s)=>{s.d(z,{b:()=>H});var b=s(54460),e=s(10936),c=s(65162),j=s(15343),w=s(44233),P=s(5502),T=s(21656),R=s(43166),N=s(36894),h=s(47348),I=s(70050),M=s(59640),n=s(48891),y=s(47426),g=s(95670),x=s(4375),v=s(81587);function U(C,A){if(1&C&&(n.j41(0,"mat-option",16),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&C){const S=A.$implicit;n.Y8G("value",S.id),n.R7$(),n.SpI(" ",n.bMT(2,2,S.code)," ")}}function L(C,A){if(1&C&&(n.j41(0,"mat-optgroup",14),n.nI1(1,"mytranslate"),n.DNE(2,U,3,4,"mat-option",15),n.k0s()),2&C){const S=A.$implicit;n.XpG();const D=n.sdS(10);n.FS9("label",n.bMT(1,2,S.groupName)),n.R7$(2),n.Y8G("ngForOf",D.filter(S.purposeListInGroup,"code"))}}function J(C,A){1&C&&(n.j41(0,"div",17),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&C&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_testbank_please_choose_purpose_exam")," "))}function V(C,A){1&C&&(n.j41(0,"div",17),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&C&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_testbank_please_enter_purpose_create_exam")," "))}function W(C,A){if(1&C&&(n.j41(0,"div",4)(1,"div",5)(2,"label",18),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()(),n.j41(5,"div",19),n.nrm(6,"input",20),n.nI1(7,"mytranslate"),n.k0s(),n.DNE(8,V,3,3,"div",12),n.k0s()),2&C){const S=n.XpG();n.R7$(3),n.SpI(" ",n.bMT(4,3,"lang_testbank_enter_create_exam_target")," "),n.R7$(3),n.FS9("placeholder",n.bMT(7,5,"lang_testbank_enter_create_exam_target")+" ..."),n.R7$(2),n.Y8G("ngIf",(4==(null==S.form.controls.purposeExam?null:S.form.controls.purposeExam.value)||8==(null==S.form.controls.purposeExam?null:S.form.controls.purposeExam.value)||12==(null==S.form.controls.purposeExam?null:S.form.controls.purposeExam.value))&&""===(null==S.form.controls.purposeNote||null==S.form.controls.purposeNote.value?null:S.form.controls.purposeNote.value.trim()))}}let H=(()=>{var C;class A extends M.H{convertPurposeList(){this.targetExamGroupObjs=[],this.purposeList.forEach(D=>{const{semester:O}=D;let G=this.targetExamGroupObjs.find(Z=>Z.semester===O);G||(G={semester:O,groupName:this.getGroupNamePurpose(D.semester??1),purposeListInGroup:[]},this.targetExamGroupObjs.push(G)),G.purposeListInGroup?.push(D)})}getGroupNamePurpose(D){switch(D){case 1:default:return"lang_testbank_semester_one";case 2:return"lang_testbank_semester_two";case 3:return"lang_testbank_another_purpose"}}ngOnInit(){this.convertPurposeList()}constructor(){super(),this.purposeList=[],this.targetExamGroupObjs=[]}}return(C=A).\u0275fac=function(D){return new(D||C)},C.\u0275cmp=n.VBU({type:C,selectors:[["config-purpose-exam"]],inputs:{form:"form",purposeList:"purposeList"},standalone:!0,features:[n.Vt3,n.aNF],decls:21,vars:18,consts:[["searchInListPurpose","searchInList"],[1,"config-purpose-exan"],[3,"formGroup"],["id","azt-config-purpose-exam",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"font-medium"],[1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","","formControlName","purposeExam","name","purposeExam"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"label",4,"ngFor","ngForOf"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","col-span-12",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-2","text-danger","text-xs"],["for","enter_target_create_exam",1,"form-label","flex","items-center"],[1,"setting-input"],["id","enter_target_create_exam","formControlName","purposeNote","type","text",1,"form-control",3,"placeholder"]],template:function(D,O){if(1&D&&(n.j41(0,"div",1)(1,"form",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),n.EFF(6),n.nI1(7,"mytranslate"),n.k0s()(),n.j41(8,"mat-form-field",7)(9,"mat-select",8,0)(11,"mat-option"),n.nrm(12,"ngx-mat-select-search",9),n.nI1(13,"mytranslate"),n.nI1(14,"mytranslate"),n.k0s(),n.j41(15,"mat-option",10),n.EFF(16),n.nI1(17,"mytranslate"),n.k0s(),n.DNE(18,L,3,4,"mat-optgroup",11),n.k0s()(),n.DNE(19,J,3,3,"div",12),n.k0s(),n.DNE(20,W,9,7,"div",13),n.k0s()()()),2&D){const G=n.sdS(10);n.R7$(),n.Y8G("formGroup",O.form),n.R7$(5),n.SpI(" ",n.bMT(7,10,"lang_testbank_target_exam")," "),n.R7$(6),n.FS9("placeholderLabel",n.bMT(13,12,"lang_search_by_name")),n.FS9("noEntriesFoundLabel",n.bMT(14,14,"lang_search_not_found")),n.Y8G("formControl",G.searchControl),n.R7$(3),n.Y8G("value",0),n.R7$(),n.SpI("---",n.bMT(17,16,"lang_testbank_choose_purpose"),"---"),n.R7$(2),n.Y8G("ngForOf",O.targetExamGroupObjs),n.R7$(),n.Y8G("ngIf",0==O.form.controls.purposeExam.value),n.R7$(),n.Y8G("ngIf",4==(null==O.form.controls.purposeExam?null:O.form.controls.purposeExam.value)||8==(null==O.form.controls.purposeExam?null:O.form.controls.purposeExam.value)||12==(null==O.form.controls.purposeExam?null:O.form.controls.purposeExam.value))}},dependencies:[w.An,w.U9,R.x,b.MD,b.Sq,b.bT,e.X1,e.qT,e.me,e.BC,e.cb,e.l_,e.j4,e.JD,c.iI,e.YN,h.wp,T.s,y.wT,y.D7,g.rl,x.VO,j.flO,I.L,P.Id,N.k,v.t],encapsulation:2}),A})()},65728:(Y,z,s)=>{s.d(z,{I:()=>y});var b=s(59640),e=s(54460),c=s(10936),j=s(65162),w=s(21656),P=s(15343),T=s(70050),R=s(5502),N=s(36894),h=s(48891);const I=()=>({"text-white":!0});function M(g,x){1&g&&h.nrm(0,"lucide-icon",3),2&g&&h.Y8G("ngClass",h.lJ4(1,I))}function n(g,x){1&g&&h.nrm(0,"lucide-icon",4),2&g&&h.Y8G("ngClass",h.lJ4(1,I))}let y=(()=>{var g;class x extends b.H{constructor(){super(...arguments),this.isScrollToTop=!1}scrollTo(){this.isScrollToTop?window.scrollTo(0,0):window.scrollTo(0,document.body.scrollHeight)}ngOnInit(){super.ngOnInit()}}return(g=x).\u0275fac=(()=>{let v;return function(L){return(v||(v=h.xGo(g)))(L||g)}})(),g.\u0275cmp=h.VBU({type:g,selectors:[["azt-scroll-to-top-bottom"]],inputs:{isScrollToTop:"isScrollToTop"},standalone:!0,features:[h.Vt3,h.aNF],decls:3,vars:2,consts:[["azt-track-service","azt-scroll-to-top-bottom-DbRV8ySsXT1",1,"toolBarMobile","clickable",3,"click"],["name","chevrons-up","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-down","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-up","size","24",3,"ngClass"],["name","chevrons-down","size","24",3,"ngClass"]],template:function(U,L){1&U&&(h.j41(0,"div",0),h.bIt("click",function(){return L.scrollTo()}),h.DNE(1,M,1,2,"lucide-icon",1)(2,n,1,2,"lucide-icon",2),h.k0s()),2&U&&(h.R7$(),h.Y8G("ngIf",L.isScrollToTop),h.R7$(),h.Y8G("ngIf",!L.isScrollToTop))},dependencies:[e.MD,e.YU,e.bT,c.X1,j.iI,c.YN,w.s,P.flO,P.WGl,T.L,R.Id,N.k],styles:[".toolBarMobile[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:100;margin:0 40px 25px;padding:5px;background:#b5b5b587;border-radius:3px}"]}),x})()}}]);