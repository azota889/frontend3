"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[9811],{36850:(L,R,c)=>{c.d(R,{r:()=>k});var s=c(48891),i=c(48698),A=c(59640),m=c(54460),y=c(51169),E=c(18718);function F(C,h){if(1&C&&s.nrm(0,"azt-loading-effect",3),2&C){const u=s.XpG();s.Y8G("currentStatusObj",u.statusObj)}}function _(C,h){if(1&C){const u=s.RV6();s.j41(0,"div",5)(1,"app-product-view",6),s.bIt("onBuy",function(g){s.eBV(u);const t=s.XpG(2);return s.Njj(t.buyProduct(g))}),s.k0s()()}if(2&C){const u=h.$implicit;s.R7$(),s.Y8G("product",u)("viewType","adView")}}function v(C,h){if(1&C&&s.DNE(0,_,2,2,"div",4),2&C){const u=s.XpG();s.Y8G("ngForOf",u.objs)}}let k=(()=>{var C;class h extends A.H{getData(){if(0==this.ids.length){let f=this.customerProductManagementService.apiCustomerProductManagementGetObjsGet(this.productType,this.numItems);this.waitDestroy(f.subscribe(g=>{if(!g.success)return this.errorStatusObj(g.message,!0);this.objs=g.data?.objs??[],this.successStatusObj()}))}else{let f=this.customerProductManagementService.apiCustomerProductManagementGetObjGet(+this.ids[0]);this.waitDestroy(f.subscribe(g=>{if(!g.success)return this.errorStatusObj(g.message,!0);this.objs=g.data?.obj?[g.data?.obj]:[],this.successStatusObj()}))}}buyProduct(f){this.onBuy.emit(f)}constructor(){super(),this.numItems=5,this.ids=[],this.customerProductManagementService=(0,s.WQX)(i.AC),this.objs=[],this.onBuy=new s.bkB}ngOnInit(){this.getData()}}return(C=h).\u0275fac=function(f){return new(f||C)},C.\u0275cmp=s.VBU({type:C,selectors:[["app-student-list-product"]],inputs:{productType:"productType",numItems:"numItems",ids:"ids"},outputs:{onBuy:"onBuy"},features:[s.Vt3],decls:4,vars:2,consts:[["doneLoading",""],[1,"list-products"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","box p-3 mb-3",4,"ngFor","ngForOf"],[1,"box","p-3","mb-3"],[3,"onBuy","product","viewType"]],template:function(f,g){if(1&f&&(s.j41(0,"div",1),s.DNE(1,F,1,1,"azt-loading-effect",2)(2,v,1,1,"ng-template",null,0,s.C5r),s.k0s()),2&f){const t=s.sdS(3);s.R7$(),s.Y8G("ngIf",g.statusObj.loading)("ngIfElse",t)}},dependencies:[m.Sq,m.bT,y.U,E.K],encapsulation:2}),h})()},43166:(L,R,c)=>{c.d(R,{x:()=>m});var s=c(10936),i=c(48891),A=c(53793);let m=(()=>{var y;class E{filter(_,v){return null==_?[]:_=_.filter(k=>this.removeAllSpecialChars((null!=v?k[v]:k).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(_){let v=[];return _.forEach(k=>null!=k.schoolLevel&&v.push(k.schoolLevel)),v}removeAllSpecialChars(_){return _=(_=this.commonService.myTranslateInstant(_)??_).toLowerCase().trim(),_=this.commonService.convertVietnameseToEnglish(_),_=this.commonService.removeSpecialStringInSearch(_),(_=this.commonService.removeNonAlphabetic(_)).toLowerCase().trim()}constructor(_){this.commonService=_,this.searchControl=new s.MJ("",{nonNullable:!0})}}return(y=E).\u0275fac=function(_){return new(_||y)(i.rXU(A.R))},y.\u0275dir=i.FsC({type:y,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),E})()},48300:(L,R,c)=>{c.d(R,{f:()=>h});var s=c(48891),i=c(79767),A=c(59640),m=c(53793);let y=(()=>{var u;class f{constructor(){this.commonService=(0,s.WQX)(m.R)}replaceAdsContent(t){if(!t.template||!t.productAttributes)return t;let T=t.productAttributes;return T.push({id:0,productId:0,attributeId:0,value:t.name,attribute:{id:0,categoryId:0,displayName:"NAME",variableName:"NAME"}}),T.push({id:0,productId:0,attributeId:0,value:t.description??"",attribute:{id:0,categoryId:0,displayName:"DESCRIPTION",variableName:"DESCRIPTION"}}),T.push({id:0,productId:0,attributeId:0,value:t.thumbnailUrl??"",attribute:{id:0,categoryId:0,displayName:"THUMBNAIL",variableName:"THUMBNAIL"}}),T.forEach(S=>{S.attribute?.variableName&&(t.template=this.commonService.replaceAll(t.template,"${"+S.attribute.variableName.toUpperCase()+"}",S.value))}),t}}return(u=f).\u0275fac=function(t){return new(t||u)},u.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),f})();var E=c(54460),F=c(38468),_=c(36850),v=c(76975);const k=()=>[];function C(u,f){if(1&u&&s.nrm(0,"app-student-list-product",2),2&u){let g,t;const T=s.XpG();s.Y8G("productType",T.productInfo.type)("numItems",null!==(g=T.productInfo.num)&&void 0!==g?g:5)("ids",null!==(t=T.productInfo.ids)&&void 0!==t?t:s.lJ4(3,k))}}let h=(()=>{var u;class f extends A.H{constructor(){super(...arguments),this.sAztShowAdsBoxService=(0,s.WQX)(y)}ngOnChanges(){if(this.obj=this.sAztShowAdsBoxService.replaceAdsContent(this.obj),this.obj.template?.includes("<azt-list-product")){let t=document.createElement("div");t.innerHTML=this.obj.template;let T=t.querySelector("azt-list-product"),S=T?.getAttribute("azt-type")??void 0,D=T?.getAttribute("azt-num")??void 0,G=T?.getAttribute("azt-ids")??void 0;this.productInfo={type:S,num:D?+D:void 0,ids:G?.split(",")}}}ngAfterViewInit(){setTimeout(()=>{try{(i.A.adsbygoogle=i.A.adsbygoogle||[]).push({})}catch(t){console.error("ads",t)}},900)}}return(u=f).\u0275fac=(()=>{let g;return function(T){return(g||(g=s.xGo(u)))(T||u)}})(),u.\u0275cmp=s.VBU({type:u,selectors:[["azt-frontend-ads-item"]],inputs:{obj:"obj"},features:[s.Vt3,s.OA$],decls:3,vars:5,consts:[[3,"innerHTML","appReplaceLinksForAdsProductId"],[3,"productType","numItems","ids",4,"ngIf"],[3,"productType","numItems","ids"]],template:function(t,T){if(1&t&&(s.nrm(0,"div",0),s.nI1(1,"safeNormalHtmlContent"),s.DNE(2,C,1,4,"app-student-list-product",1)),2&t){let S;s.Y8G("innerHTML",s.bMT(1,3,null!==(S=T.obj.template)&&void 0!==S?S:""),s.npT)("appReplaceLinksForAdsProductId",T.obj.id.toString()),s.R7$(2),s.Y8G("ngIf",T.productInfo)}},dependencies:[E.bT,F.U,_.r,v._y],encapsulation:2}),f})()},75421:(L,R,c)=>{c.d(R,{u:()=>C});var s=c(10936),i=c(89163),A=c(33887),m=c(48891),y=c(54460),E=c(15343),F=c(76975);const _=()=>({"mr-2 text-danger":!0});function v(h,u){if(1&h&&m.nrm(0,"lucide-icon",10),2&h){const f=m.XpG();m.Y8G("name",f.data.iconName)("ngClass",m.lJ4(2,_))}}function k(h,u){if(1&h&&(m.j41(0,"div",11)(1,"div",3)(2,"span"),m.EFF(3),m.nI1(4,"mytranslate"),m.k0s(),m.j41(5,"b"),m.EFF(6),m.k0s(),m.j41(7,"span"),m.EFF(8),m.nI1(9,"mytranslate"),m.k0s()(),m.j41(10,"div",12),m.nrm(11,"input",13),m.k0s()()),2&h){const f=m.XpG();m.R7$(3),m.JRh(m.bMT(4,4,"lang_azt_enter")+" "),m.R7$(3),m.JRh('"'+f.data.textConfirm+'" '),m.R7$(2),m.JRh(m.bMT(9,6,"lang_azt_for_delete_data")),m.R7$(3),m.Y8G("formControl",f.confirmValue)}}let C=(()=>{var h;class u extends A._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(g,t){super(t,g),this.dialogRef=g,this.data=t,this.confirmValue=new s.MJ("",{nonNullable:!0})}}return(h=u).\u0275fac=function(g){return new(g||h)(m.rXU(i.CP,8),m.rXU(i.Vh,8))},h.\u0275cmp=m.VBU({type:h,selectors:[["azt-dialog-danger"]],features:[m.Vt3],decls:14,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click","disabled"],["size","24",3,"name","ngClass"],[1,"mt-3"],[1,"mt-2"],["type","text",1,"form-control",3,"formControl"]],template:function(g,t){1&g&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),m.DNE(4,v,1,3,"lucide-icon",4),m.nrm(5,"span",5),m.k0s(),m.DNE(6,k,12,8,"div",6),m.k0s()(),m.j41(7,"div",7)(8,"button",8),m.bIt("click",function(){return t.btnCloseDialog()}),m.EFF(9),m.nI1(10,"mytranslate"),m.k0s(),m.j41(11,"button",9),m.bIt("click",function(){return t.confirmDialog()}),m.EFF(12),m.nI1(13,"mytranslate"),m.k0s()()()),2&g&&(m.R7$(4),m.Y8G("ngIf",t.data.iconName),m.R7$(),m.Y8G("innerHtml",t.data.content,m.npT),m.R7$(),m.Y8G("ngIf",t.data.textConfirm),m.R7$(3),m.SpI(" ",m.bMT(10,6,"lang_auto_huy")," "),m.R7$(2),m.Y8G("disabled",t.data.textConfirm&&t.data.textConfirm!==t.confirmValue.value),m.R7$(),m.SpI(" ",m.bMT(13,8,"lang_auto_xac_nhan")," "))},dependencies:[y.YU,y.bT,s.me,s.BC,s.l_,E.WGl,F.wp],encapsulation:2}),u})()},20013:(L,R,c)=>{c.d(R,{T:()=>_});var s=c(48891),i=c(9516),A=c(54460),m=c(52811);const y=["*"];function E(v,k){1&v&&s.SdG(0,0,["*ngIf","!isUploadFile"])}function F(v,k){1&v&&(s.j41(0,"span",5),s.nrm(1,"azt-loading-ui"),s.k0s())}let _=(()=>{var v;class k extends i.L{constructor(){super(...arguments),this.uploadComplete=new s.bkB}emitUploadComplete(h){h.length>0&&this.uploadComplete.emit(h[0])}}return(v=k).\u0275fac=(()=>{let C;return function(u){return(C||(C=s.xGo(v)))(u||v)}})(),v.\u0275cmp=s.VBU({type:v,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},features:[s.Vt3],ngContentSelectors:y,decls:6,vars:3,consts:[["formChoseFile",""],[1,"flex","items-center","justify-center","h-full",3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(h,u){if(1&h){const f=s.RV6();s.NAR(),s.j41(0,"div",1),s.bIt("click",function(){s.eBV(f);const t=s.sdS(2);return s.Njj(u.onOpenFileDictionary()&&t.click())}),s.j41(1,"input",2,0),s.bIt("change",function(t){return s.eBV(f),s.Njj(u.onFileSelected(t))})("cancel",function(t){return s.eBV(f),s.Njj(u.onCancelSelect(t))}),s.k0s(),s.DNE(3,E,1,0,"ng-content",3),s.j41(4,"div"),s.DNE(5,F,2,0,"span",4),s.k0s()()}2&h&&(s.R7$(),s.FS9("accept",u.fileType),s.R7$(2),s.Y8G("ngIf",!u.isUploadFile),s.R7$(2),s.Y8G("ngIf",u.isUploadFile))},dependencies:[A.bT,m.R],encapsulation:2}),k})()},89121:(L,R,c)=>{c.d(R,{z:()=>m});var s=c(59640),i=c(48891),A=c(65162);let m=(()=>{var y;class E extends s.H{constructor(){super(...arguments),this.id="default-id"}}return(y=E).\u0275fac=(()=>{let F;return function(v){return(F||(F=i.xGo(y)))(v||y)}})(),y.\u0275cmp=i.VBU({type:y,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[i.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(_,v){1&_&&(i.j41(0,"div",0),i.nrm(1,"router-outlet"),i.k0s()),2&_&&i.FS9("id",v.id)},dependencies:[A.n3],encapsulation:2}),E})()},99811:(L,R,c)=>{c.r(R),c.d(R,{AzotaAdsModule:()=>Le});var s=c(54460),i=c(10936),A=c(65162),m=c(69223),y=c(15343),E=c(10123),F=c(44233),_=c(5502),v=c(21656),k=c(70050),C=c(7050),h=c(35143),u=c(43234),f=c(1133),g=c(89121),t=c(48891),T=c(62548),S=c(20967),D=c(59640),G=c(15766),J=c(96270),ft=c(53793);let ht=(()=>{var e;class r{constructor(){this.commonListService=(0,t.WQX)(T.Nz),this.commonService=(0,t.WQX)(ft.R)}getSchoolLevelAndSubjects(n){this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(a=>{a.success||(this.commonService.snackError(a.message),n([],[],[],[],!1));let l=a.data?.schoolLevelSubjectObjs.map(j=>j.schoolLevel).filter(this.commonService.notEmpty)??[],d=this.commonService.concatMultipleArray(a.data?.schoolLevelSubjectObjs.map(j=>j.schoolSubjectObjs)??[]),p=this.commonService.uniqueArray(l.map(j=>j.key).filter(this.commonService.notEmpty)),I=this.commonService.uniqueArray(d.map(j=>j.key).filter(this.commonService.notEmpty));p=p.filter(j=>"azt_lang_core_khoi_khac"!=j),I=I.filter(j=>"azt_lang_core_khoi_khac"!=j),n(l,d,p,I,!0)})}getSelectedLevelAndSubjects(n,a,l){let d=n.filter(O=>"level"==O.filterType).map(O=>O.filterObjectId),p=n.filter(O=>"subject"==O.filterType).map(O=>O.filterObjectId);return{selectedSchoolLevels:this.commonService.uniqueArray(a.filter(O=>d?.includes(O.id)).map(O=>O.key).filter(this.commonService.notEmpty)),selectedSchoolSubjects:this.commonService.uniqueArray(l.filter(O=>p?.includes(O.id)).map(O=>O.key).filter(this.commonService.notEmpty))}}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),r})(),ot=(()=>{var e;class r extends D.H{changeProvince(n){if(!n)return this.form.controls.provinceIds.setValue([]);this.form.controls.provinceIds.setValue(this.allProvinceObjs.map(a=>a.id))}changeSchoolLevel(n){if(!n)return this.form.controls.schoolLevels.setValue([]);this.form.controls.schoolLevels.setValue(this.allSchoolLevels)}changeSchoolSubject(n){if(!n)return this.form.controls.schoolSubjects.setValue([]);this.form.controls.schoolSubjects.setValue(this.allSchoolSubjects)}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(n){this.form.controls.attributesList.removeAt(n)}createFieldForm(n,a,l,d){return new i.gE({id:new i.MJ(d,{nonNullable:!0}),displayName:new i.MJ(n,{nonNullable:!0,validators:[i.k0.required,G.M.noWhiteSpace]}),variableName:new i.MJ(a,{nonNullable:!0,validators:[i.k0.required,G.M.noWhiteSpace]}),description:new i.MJ(l,{nonNullable:!0})})}ngOnInit(){super.ngOnInit()}constructor(){super(),this.commonListService=(0,t.WQX)(T.Nz),this.sAztCategoryAdsService=(0,t.WQX)(ht),this.categoryService=(0,t.WQX)(S.M$),this.activeRoute=(0,t.WQX)(A.nX),this.backToLink="",this.categoryId=0,this.listPositions=this.commonService.getEnumValues(S.rA),this.listDisplayTypes=this.commonService.getEnumValues(J.u),this.allProvinceObjs=[],this.allSchoolLevels=[],this.allSchoolSubjects=[],this.allSchoolLevelObjs=[],this.allSchoolSubjectObjs=[],this.form=new i.gE({name:new i.MJ("",{nonNullable:!0,validators:[i.k0.required,G.M.noWhiteSpace]}),adsPosition:new i.MJ(S.rA.ALLPOSITION,{nonNullable:!0,validators:[i.k0.required]}),adsDisplayType:new i.MJ(J.u.BANNER,{nonNullable:!0,validators:[i.k0.required]}),desc:new i.MJ("",{nonNullable:!0}),attributesList:new i.Yp([]),schoolLevels:new i.MJ([],{nonNullable:!0}),schoolSubjects:new i.MJ([],{nonNullable:!0}),provinceIds:new i.MJ([],{nonNullable:!0})})}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["base-ads-category-form"]],features:[t.Vt3],decls:0,vars:0,template:function(n,a){},encapsulation:2}),r})();var X=c(47426),W=c(95670),K=c(4375),st=c(81587),H=c(43166),N=c(96451),$=c(76975);const vt=()=>({"mr-1":!0}),rt=e=>({"border-danger":e});function yt(e,r){1&e&&(t.j41(0,"div",33)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Ct(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_azota_ads_position_"+o)," ")}}function It(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function jt(e,r){1&e&&(t.j41(0,"div",33)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Tt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",35),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolLevel(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function St(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",35),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolLevel(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function At(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Ot(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",35),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolSubject(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Ft(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",35),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeSchoolSubject(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function kt(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Rt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",35),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeProvince(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Et(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",35),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.changeProvince(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Mt(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(t.bMT(2,2,o.name))}}function $t(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",36)(1,"div",37)(2,"div",38)(3,"div",24)(4,"span",39),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",40),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",41)(10,"button",42),t.bIt("click",function(){const a=t.eBV(o).index,l=t.XpG();return t.Njj(l.removeFileForm(a))}),t.nrm(11,"lucide-icon",43),t.k0s()()(),t.j41(12,"div",44)(13,"div",9)(14,"div",45),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.nrm(17,"input",46),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"div",12)(20,"label",47),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",9),t.nrm(24,"textarea",48),t.nI1(25,"mytranslate"),t.k0s()()()()()}if(2&e){const o=r.$implicit;t.R7$(),t.Y8G("formGroup",o),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,rt,o.controls.displayName.errors&&o.controls.displayName.touched)),t.R7$(8),t.SpI(" ",t.bMT(16,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(18,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,rt,o.controls.variableName.errors&&o.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(22,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(25,19,"lang_azt_field_description")+"...")}}let zt=(()=>{var e;class r extends ot{saveAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();this.initStatusObj();const n=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryCreateCategoryPost(n).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.successStatusObj("lang_cms_add_success",!0),this.handleDestroy()}))}convertFormToParam(){const{attributesList:n,name:a,adsPosition:l,adsDisplayType:d,desc:p,schoolLevels:I,schoolSubjects:j,provinceIds:O}=this.form.controls,B=n.controls.map(b=>({displayName:b.controls.displayName.value,variableName:b.controls.variableName.value.toUpperCase(),description:b.controls.description.value}));let V=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(b=>I.value.includes(b?.key??"")).map(b=>b.id)),w=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(b=>j.value.includes(b?.key??"")).map(b=>b.id)),et=V.map(b=>({filterType:"level",filterObjectId:b})),at=w.map(b=>({filterType:"subject",filterObjectId:b})),nt=O.value.map(b=>({filterType:"province",filterObjectId:b})),M=et;return M=M.concat(at),M=M.concat(nt),{name:a.value,position:l.value,displayType:d.value,description:p.value,attributes:B,filterOptions:M}}initData(){this.initStatusObj(),this.commonListService.apiCommonListProvincesGet().subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.allProvinceObjs=n.data?.objs??[],this.sAztCategoryAdsService.getSchoolLevelAndSubjects((a,l,d,p,I)=>{if(!I)return this.stopStatusObj();this.allSchoolLevelObjs=a,this.allSchoolSubjectObjs=l,this.allSchoolLevels=d,this.allSchoolSubjects=p,this.successStatusObj()})})}ngOnInit(){super.ngOnInit(),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/0",this.initData()}constructor(){super()}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["create-ads-category"]],features:[t.Vt3],decls:101,vars:82,consts:[["searchInListPosition","searchInList"],["searchInListDisplayType","searchInList"],[3,"headerBackToLink"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3",3,"innerHTML"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],["class","link-color clickable",3,"click",4,"ngIf"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","items-center"],["for","name",1,"font-medium","mr-2"],[1,"link-color","clickable","flex","items-center",3,"click"],["name","plus","size","18",3,"ngClass"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"link-color","clickable",3,"click"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(n,a){if(1&n){const l=t.RV6();t.j41(0,"teacher-layout",2)(1,"div",3)(2,"h3",4),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",5)(6,"form",6)(7,"div",7)(8,"label",8),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"div",9),t.nrm(12,"input",10),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,yt,4,3,"div",11),t.k0s(),t.j41(15,"div",12)(16,"label",8),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"mat-form-field",13)(20,"mat-select",14,0)(22,"mat-option"),t.nrm(23,"ngx-mat-select-search",15),t.nI1(24,"mytranslate"),t.nI1(25,"mytranslate"),t.k0s(),t.DNE(26,Ct,3,4,"mat-option",16),t.k0s(),t.nrm(27,"div",17),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",12)(30,"label",8),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s(),t.j41(33,"mat-form-field",13)(34,"mat-select",14,1)(36,"mat-option"),t.nrm(37,"ngx-mat-select-search",15),t.nI1(38,"mytranslate"),t.nI1(39,"mytranslate"),t.k0s(),t.DNE(40,It,2,2,"mat-option",16),t.k0s()()(),t.j41(41,"div",12)(42,"label",18),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.j41(45,"div",9),t.nrm(46,"textarea",19),t.nI1(47,"mytranslate"),t.k0s(),t.DNE(48,jt,4,3,"div",11),t.k0s(),t.j41(49,"div",12)(50,"label",20),t.EFF(51),t.nI1(52,"mytranslate"),t.k0s(),t.EFF(53," ( "),t.DNE(54,Tt,3,3,"span",21)(55,St,3,3,"span",21),t.EFF(56," ) "),t.j41(57,"mat-form-field",22)(58,"mat-select",23),t.DNE(59,At,3,4,"mat-option",16),t.k0s()()(),t.j41(60,"div",12)(61,"label",20),t.EFF(62),t.nI1(63,"mytranslate"),t.k0s(),t.EFF(64," ( "),t.DNE(65,Ot,3,3,"span",21)(66,Ft,3,3,"span",21),t.EFF(67," ) "),t.j41(68,"mat-form-field",22)(69,"mat-select",23),t.DNE(70,kt,3,4,"mat-option",16),t.k0s()()(),t.j41(71,"div",12)(72,"label",20),t.EFF(73),t.nI1(74,"mytranslate"),t.k0s(),t.EFF(75," ( "),t.DNE(76,Rt,3,3,"span",21)(77,Et,3,3,"span",21),t.EFF(78," ) "),t.j41(79,"mat-form-field",22)(80,"mat-select",23),t.DNE(81,Mt,3,4,"mat-option",16),t.k0s()()(),t.j41(82,"div",12)(83,"div",24)(84,"label",25),t.EFF(85),t.nI1(86,"mytranslate"),t.k0s(),t.j41(87,"span",26),t.bIt("click",function(){return t.eBV(l),t.Njj(a.addNewFieldForm())}),t.nrm(88,"lucide-icon",27),t.EFF(89),t.nI1(90,"mytranslate"),t.k0s()(),t.j41(91,"div",28),t.DNE(92,$t,26,25,"div",29),t.k0s()()()(),t.j41(93,"div",30)(94,"button",31),t.bIt("click",function(){return t.eBV(l),t.Njj(a.handleDestroy())}),t.EFF(95),t.nI1(96,"mytranslate"),t.k0s(),t.j41(97,"button",32),t.bIt("click",function(){return t.eBV(l),t.Njj(a.saveAdsCategory())}),t.j41(98,"span"),t.EFF(99),t.nI1(100,"mytranslate"),t.k0s()()()()()}if(2&n){const l=t.sdS(21),d=t.sdS(35);t.Y8G("headerBackToLink",a.backToLink),t.R7$(3),t.SpI(" ",t.bMT(4,43,"lang_azt_add_category")," "),t.R7$(3),t.Y8G("formGroup",a.form),t.R7$(3),t.JRh(t.bMT(10,45,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(13,47,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",a.form.controls.name.errors&&a.form.controls.name.touched),t.R7$(3),t.JRh(t.bMT(18,49,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(24,51,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(25,53,"lang_search_not_found")),t.Y8G("formControl",l.searchControl),t.R7$(3),t.Y8G("ngForOf",l.filter(a.listPositions,void 0)),t.R7$(),t.Y8G("innerHTML",t.bMT(28,55,"lang_azota_ads_position_image_"+a.form.controls.adsPosition.value.toString().replace("_MOBILE","").replace("_DESKTOP","")),t.npT),t.R7$(4),t.JRh(t.bMT(32,57,"lang_azt_category_ads_display_type")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsDisplayType),t.R7$(3),t.FS9("placeholderLabel",t.bMT(38,59,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(39,61,"lang_search_not_found")),t.Y8G("formControl",d.searchControl),t.R7$(3),t.Y8G("ngForOf",d.filter(a.listDisplayTypes,void 0)),t.R7$(3),t.JRh(t.bMT(44,63,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(47,65,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",a.form.controls.desc.errors&&a.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(52,67,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolLevels.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolLevels.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",a.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(63,69,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolSubjects.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolSubjects.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",a.allSchoolSubjects),t.R7$(3),t.JRh(t.bMT(74,71,"lang_admin_ads_select_province")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.provinceIds.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.provinceIds.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.provinceIds),t.R7$(),t.Y8G("ngForOf",a.allProvinceObjs),t.R7$(4),t.JRh(t.bMT(86,73,"lang_azt_information_field")),t.R7$(3),t.Y8G("ngClass",t.lJ4(81,vt)),t.R7$(),t.SpI(" ",t.bMT(90,75,"lang_azt_add_information_field")," "),t.R7$(3),t.Y8G("ngForOf",a.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(96,77,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(100,79,"lang_button_save"))}},dependencies:[s.YU,s.Sq,s.bT,i.qT,i.me,i.BC,i.cb,X.wT,W.rl,K.VO,i.l_,i.j4,i.JD,st.t,H.x,N.Q,y.WGl,F.U9,$.wp],encapsulation:2}),r})();var Q=c(82653),x=c(18718);const it=e=>({"border-danger":e});function Gt(e,r){if(1&e&&t.nrm(0,"azt-loading-effect",5),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Lt(e,r){1&e&&(t.j41(0,"div",35)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Dt(e,r){if(1&e&&(t.j41(0,"mat-option",36),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_azota_ads_position_"+o)," ")}}function Nt(e,r){if(1&e&&(t.j41(0,"mat-option",36),t.EFF(1),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function xt(e,r){1&e&&(t.j41(0,"div",35)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Pt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolLevel(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Ut(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolLevel(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Yt(e,r){if(1&e&&(t.j41(0,"mat-option",36),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Bt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolSubject(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Vt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeSchoolSubject(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function wt(e,r){if(1&e&&(t.j41(0,"mat-option",36),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Jt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeProvince(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Xt(e,r){if(1&e){const o=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.changeProvince(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Wt(e,r){if(1&e&&(t.j41(0,"mat-option",36),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o.id),t.R7$(),t.JRh(t.bMT(2,2,o.name))}}function Kt(e,r){1&e&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_admin_ads_category_attributes_are_empty")))}function Ht(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"span",42),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",43),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",44)(10,"button",45),t.bIt("click",function(){const a=t.eBV(o).index,l=t.XpG(2);return t.Njj(l.removeFileForm(a))}),t.j41(11,"span",46),t.nrm(12,"lucide-icon",47),t.k0s()()()(),t.j41(13,"div",48)(14,"div",12)(15,"div",49),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.nrm(18,"input",50),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"div",15)(21,"label",51),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"div",12),t.nrm(25,"textarea",52),t.nI1(26,"mytranslate"),t.k0s()()()()()}if(2&e){const o=r.$implicit;t.R7$(),t.Y8G("formGroup",o),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,it,o.controls.displayName.errors&&o.controls.displayName.touched)),t.R7$(9),t.SpI(" ",t.bMT(17,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(19,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,it,o.controls.variableName.errors&&o.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(23,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(26,19,"lang_azt_field_description")+"...")}}function Qt(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",6)(1,"h3",7),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",8)(5,"form",9)(6,"div",10)(7,"label",11),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",12),t.nrm(11,"input",13),t.nI1(12,"mytranslate"),t.k0s(),t.DNE(13,Lt,4,3,"div",14),t.k0s(),t.j41(14,"div",15)(15,"label",11),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"mat-form-field",16)(19,"mat-select",17,1)(21,"mat-option"),t.nrm(22,"ngx-mat-select-search",18),t.nI1(23,"mytranslate"),t.nI1(24,"mytranslate"),t.k0s(),t.DNE(25,Dt,3,4,"mat-option",19),t.k0s()(),t.nrm(26,"div",20),t.nI1(27,"mytranslate"),t.k0s(),t.j41(28,"div",15)(29,"label",11),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s(),t.j41(32,"mat-form-field",16)(33,"mat-select",17,2)(35,"mat-option"),t.nrm(36,"ngx-mat-select-search",18),t.nI1(37,"mytranslate"),t.nI1(38,"mytranslate"),t.k0s(),t.DNE(39,Nt,2,2,"mat-option",19),t.k0s()()(),t.j41(40,"div",15)(41,"label",21),t.EFF(42),t.nI1(43,"mytranslate"),t.k0s(),t.j41(44,"div",12),t.nrm(45,"textarea",22),t.nI1(46,"mytranslate"),t.k0s(),t.DNE(47,xt,4,3,"div",14),t.k0s(),t.j41(48,"div",15)(49,"label",23),t.EFF(50),t.nI1(51,"mytranslate"),t.k0s(),t.EFF(52," ( "),t.DNE(53,Pt,3,3,"span",24)(54,Ut,3,3,"span",24),t.EFF(55," ) "),t.j41(56,"mat-form-field",25)(57,"mat-select",26),t.DNE(58,Yt,3,4,"mat-option",19),t.k0s()()(),t.j41(59,"div",15)(60,"label",23),t.EFF(61),t.nI1(62,"mytranslate"),t.k0s(),t.EFF(63," ( "),t.DNE(64,Bt,3,3,"span",24)(65,Vt,3,3,"span",24),t.EFF(66," ) "),t.j41(67,"mat-form-field",25)(68,"mat-select",26),t.DNE(69,wt,3,4,"mat-option",19),t.k0s()()(),t.j41(70,"div",15)(71,"label",23),t.EFF(72),t.nI1(73,"mytranslate"),t.k0s(),t.EFF(74," ( "),t.DNE(75,Jt,3,3,"span",24)(76,Xt,3,3,"span",24),t.EFF(77," ) "),t.j41(78,"mat-form-field",25)(79,"mat-select",26),t.DNE(80,Wt,3,4,"mat-option",19),t.k0s()()(),t.j41(81,"div",15)(82,"div",27)(83,"label",28),t.EFF(84),t.nI1(85,"mytranslate"),t.k0s()(),t.DNE(86,Kt,3,3,"div",29),t.j41(87,"div",30),t.DNE(88,Ht,27,25,"div",31),t.k0s()()()(),t.j41(89,"div",32)(90,"button",33),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.handleDestroy())}),t.EFF(91),t.nI1(92,"mytranslate"),t.k0s(),t.j41(93,"button",34),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.updateAdsCategory())}),t.j41(94,"span"),t.EFF(95),t.nI1(96,"mytranslate"),t.k0s()()()()}if(2&e){const o=t.sdS(20),n=t.sdS(34),a=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,41,"lang_azt_update_category")," "),t.R7$(3),t.Y8G("formGroup",a.form),t.R7$(3),t.JRh(t.bMT(9,43,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(12,45,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",a.form.controls.name.errors&&a.form.controls.name.touched),t.R7$(3),t.JRh(t.bMT(17,47,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(23,49,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(24,51,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(a.listPositions,void 0)),t.R7$(),t.Y8G("innerHTML",t.bMT(27,53,"lang_azota_ads_position_image_"+a.form.controls.adsPosition.value.toString().replace("_MOBILE","").replace("_DESKTOP","")),t.npT),t.R7$(4),t.JRh(t.bMT(31,55,"lang_azt_category_ads_display_type")),t.R7$(3),t.Y8G("formControl",a.form.controls.adsDisplayType),t.R7$(3),t.FS9("placeholderLabel",t.bMT(37,57,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(38,59,"lang_search_not_found")),t.Y8G("formControl",n.searchControl),t.R7$(3),t.Y8G("ngForOf",n.filter(a.listDisplayTypes,void 0)),t.R7$(3),t.JRh(t.bMT(43,61,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(46,63,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",a.form.controls.desc.errors&&a.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(51,65,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolLevels.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolLevels.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",a.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(62,67,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.schoolSubjects.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolSubjects.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",a.allSchoolSubjects),t.R7$(3),t.JRh(t.bMT(73,69,"lang_admin_ads_select_province")),t.R7$(3),t.Y8G("ngIf",!a.form.controls.provinceIds.value.length),t.R7$(),t.Y8G("ngIf",a.form.controls.provinceIds.value.length),t.R7$(3),t.Y8G("formControl",a.form.controls.provinceIds),t.R7$(),t.Y8G("ngForOf",a.allProvinceObjs),t.R7$(4),t.JRh(t.bMT(85,71,"lang_azt_information_field")),t.R7$(2),t.Y8G("ngIf",!a.form.controls.attributesList.controls.length),t.R7$(2),t.Y8G("ngForOf",a.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(92,73,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(96,75,"lang_button_update"))}}let Zt=(()=>{var e;class r extends ot{updateAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();const n=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryUpdateCategoryPut(n,this.categoryId).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.handleDestroy()}))}getData(){this.initStatusObj(),this.waitDestroy((0,Q.p)([this.categoryService.apiCategoryGetCategoryGet(this.categoryId),this.commonListService.apiCommonListProvincesGet()]).subscribe(([n,a])=>{if(!n.success)return this.errorStatusObj(n.message,!0);if(!a.success)return this.errorStatusObj(a.message,!0);this.allProvinceObjs=a.data?.objs??[];const l=n.data;this.form.controls.name.setValue(l?.name??""),this.form.controls.adsPosition.setValue(this.commonService.getEnumTypeWithDefault(S.rA,l?.position??"",S.rA.ALLPOSITION)),this.form.controls.adsDisplayType.setValue(this.commonService.getEnumTypeWithDefault(J.u,l?.displayType??"",J.u.BANNER)),this.form.controls.desc.setValue(l?.description??""),l?.attributes?.forEach(p=>{this.form.controls.attributesList.push(this.createFieldForm(p.displayName,p.variableName,p.description??"",p.id))});let d=(l?.filters??[]).filter(p=>"province"==p.filterType).map(p=>p.filterObjectId).filter(this.commonService.notEmpty);this.form.controls.provinceIds.setValue(d),this.sAztCategoryAdsService.getSchoolLevelAndSubjects((p,I,j,O,B)=>{if(!B)return this.stopStatusObj();this.allSchoolLevelObjs=p,this.allSchoolSubjectObjs=I,this.allSchoolLevels=j,this.allSchoolSubjects=O;const{selectedSchoolLevels:V,selectedSchoolSubjects:w}=this.sAztCategoryAdsService.getSelectedLevelAndSubjects(l?.filters??[],p,I);this.form.controls.schoolLevels.setValue(V),this.form.controls.schoolSubjects.setValue(w),this.successStatusObj()})}))}convertFormToParam(){const{attributesList:n,name:a,adsPosition:l,adsDisplayType:d,desc:p,schoolLevels:I,schoolSubjects:j,provinceIds:O}=this.form.controls,B=n.controls.map(b=>({id:b.controls.id?.value??0,displayName:b.controls.displayName.value,variableName:b.controls.variableName.value.toUpperCase(),description:b.controls.description.value}));let V=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(b=>I.value.includes(b?.key??"")).map(b=>b.id)),w=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(b=>j.value.includes(b?.key??"")).map(b=>b.id)),et=V.map(b=>({filterType:"level",filterObjectId:b})),at=w.map(b=>({filterType:"subject",filterObjectId:b})),nt=O.value.map(b=>({filterType:"province",filterObjectId:b})),M=et;return M=M.concat(at),M=M.concat(nt),{name:a.value,position:l.value,displayType:d.value,description:p.value,attributes:B,filterOptions:M}}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/"+this.categoryId,this.getData()}constructor(){super()}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["update-ads-category"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPosition","searchInList"],["searchInListDisplayType","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3",3,"innerHTML"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],["class","link-color clickable",3,"click",4,"ngIf"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"link-color","clickable",3,"click"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"w-4","h-4","inline-block"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",3),t.DNE(1,Gt,1,1,"azt-loading-effect",4)(2,Qt,97,77,"ng-template",null,0,t.C5r),t.k0s()),2&n){const l=t.sdS(3);t.Y8G("headerBackToLink",a.backToLink),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",l)}},dependencies:[s.YU,s.Sq,s.bT,i.qT,i.me,i.BC,i.cb,X.wT,W.rl,K.VO,i.l_,i.j4,i.JD,x.K,st.t,H.x,N.Q,y.WGl,F.U9,$.wp],encapsulation:2}),r})();var lt=c(82040),Z=c(46899),ct=c(39712),mt=c(89163),qt=c(33887),dt=c(52811);const te=e=>({"error-border":e});function ee(e,r){1&e&&(t.j41(0,"span",12),t.nrm(1,"azt-loading-ui"),t.k0s())}let ae=(()=>{var e;class r extends qt._{closeDialog(){this.dialogRef.close(void 0)}saveObj(){this.initStatusObj(),this.waitDestroy(this.partnerService.apiPartnerCreatePartnerPost({name:this.nameFormControl.value}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.waitDestroy(this.partnerService.apiPartnerListPartnersGet().subscribe(l=>{if(!l.success)return this.closeDialog();this.stopStatusObj(),this.dialogRef.close(l.data?.objs??[])}))}))}ngOnInit(){super.ngOnInit()}constructor(n,a,l){super(l,a),this.partnerService=n,this.dialogRef=a,this.data=l,this.nameFormControl=new i.MJ("",{nonNullable:!0,validators:[G.M.noWhiteSpace]})}}return(e=r).\u0275fac=function(n){return new(n||e)(t.rXU(S.KM),t.rXU(mt.CP,8),t.rXU(mt.Vh))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-create-partner-dialog"]],features:[t.Vt3],decls:19,vars:15,consts:[[1,"box","p-2"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","mt-4","p-2"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"p-2","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",4)(9,"div",6),t.nrm(10,"input",7),t.k0s()()()(),t.j41(11,"div",8)(12,"button",9),t.bIt("click",function(){return a.closeDialog()}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"button",10),t.bIt("click",function(){return a.saveObj()}),t.DNE(16,ee,2,0,"span",11),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()()),2&n&&(t.R7$(6),t.SpI(" ",t.bMT(7,7,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("formControl",a.nameFormControl)("ngClass",t.eq3(13,te,a.nameFormControl.invalid)),t.R7$(3),t.SpI(" ",t.bMT(14,9,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",a.statusObj.loading||a.nameFormControl.invalid),t.R7$(),t.Y8G("ngIf",a.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(18,11,"lang_auto_luu")," "))},dependencies:[s.YU,s.bT,i.me,i.BC,i.l_,dt.R,$.wp],encapsulation:2}),r})(),pt=(()=>{var e;class r extends D.H{cancel(){this.commonService.myNavigation(this.backTo)}uploadThumbnailImage(n){this.form.controls.thumbnailUrl.setValue(n.url??"")}createPartner(){this.sAztDialogService.open(ae,{width:"500px",restoreFocus:!1,data:{}}).afterClosed().subscribe(n=>{null!=n&&(this.partnerObjs=n)})}constructor(){super(),this.sAztDialogService=(0,t.WQX)(Z.i),this.categoryService=(0,t.WQX)(S.M$),this.categoryId=0,this.templateObj=void 0,this.partnerObjs=[],this.attributeObjs=[],this.allUploadToCdnMenuTypes=ct.b8,this.allUploadFileTypes=ct.PO,this.backTo="",this.form=new i.gE({name:new i.MJ("",{nonNullable:!0,validators:[G.M.noWhiteSpace]}),partnerId:new i.MJ(0,{nonNullable:!0,validators:[i.k0.min(1)]}),description:new i.MJ("",{nonNullable:!0}),thumbnailUrl:new i.MJ("",{nonNullable:!0}),isActive:new i.MJ(!0,{nonNullable:!0}),attributeObjs:new i.Yp([])})}}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-base-create-or-update-ads"]],features:[t.Vt3],decls:0,vars:0,template:function(n,a){},encapsulation:2}),r})();var ne=c(32862),oe=c(48567),ut=c(4744),_t=c(41750),gt=c(20013),q=c(48300);const P=e=>({"error-border":e}),se=e=>[e];function re(e,r){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function ie(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function le(e,r){if(1&e&&(t.j41(0,"div",10)(1,"div",11)(2,"label",12),t.EFF(3),t.k0s()(),t.j41(4,"div",11)(5,"div",20),t.nrm(6,"input",21),t.k0s()()()),2&e){const o=r.$implicit;t.R7$(3),t.Lme("",o.controls.attributeDisplayName.value," - ",o.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",o.controls.attributeValue)("ngClass",t.eq3(4,P,o.controls.attributeValue.invalid))}}function ce(e,r){if(1&e&&(t.j41(0,"div",35)(1,"div",11),t.nrm(2,"azt-frontend-ads-item",36),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(2),t.Y8G("obj",o.currentAdsObj)}}function me(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10)(8,"div",11)(9,"label",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",13)(13,"div",14)(14,"mat-form-field",15)(15,"mat-select",16,1)(17,"mat-option"),t.nrm(18,"ngx-mat-select-search",17),t.nI1(19,"mytranslate"),t.nI1(20,"mytranslate"),t.k0s(),t.DNE(21,ie,2,2,"mat-option",18),t.k0s()()(),t.j41(22,"div",19),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.createPartner())}),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()(),t.j41(25,"div",10)(26,"div",11)(27,"label",12),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s()(),t.j41(30,"div",11)(31,"div",20),t.nrm(32,"input",21),t.k0s()()(),t.j41(33,"div",10)(34,"div",11)(35,"label",12),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()(),t.j41(38,"div",11)(39,"div",20),t.nrm(40,"textarea",21),t.k0s()()(),t.j41(41,"div",10)(42,"div",11)(43,"label",12),t.EFF(44),t.nI1(45,"mytranslate"),t.k0s()(),t.j41(46,"div",11)(47,"div",20),t.nrm(48,"input",21),t.k0s()(),t.j41(49,"div",22)(50,"azt-upload-single-box",23),t.bIt("uploadComplete",function(a){t.eBV(o);const l=t.XpG();return t.Njj(l.uploadThumbnailImage(a))}),t.EFF(51),t.nI1(52,"mytranslate"),t.k0s()()(),t.DNE(53,le,7,6,"div",24),t.j41(54,"div",10)(55,"div",11)(56,"div",25),t.nrm(57,"input",26),t.j41(58,"label",27),t.EFF(59),t.nI1(60,"mytranslate"),t.k0s()()()(),t.nrm(61,"hr",28),t.DNE(62,ce,3,1,"div",29),t.k0s(),t.j41(63,"div",30)(64,"button",31),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(65),t.nI1(66,"mytranslate"),t.k0s(),t.j41(67,"button",32),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!1))}),t.EFF(68),t.nI1(69,"mytranslate"),t.k0s(),t.j41(70,"button",33),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!0))}),t.EFF(71),t.nI1(72,"mytranslate"),t.k0s()()()()()}if(2&e){const o=t.sdS(16),n=t.XpG();t.R7$(),t.Y8G("formGroup",n.form),t.R7$(3),t.SpI(" ",t.bMT(5,32,n.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(6),t.SpI(" ",t.bMT(11,34,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(58,P,n.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",n.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(19,36,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(20,38,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(n.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(24,40,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(29,42,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.name)("ngClass",t.eq3(60,P,n.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(37,44,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.description)("ngClass",t.eq3(62,P,n.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(45,46,"lang_cms_admin_create_ads_thumbnail_url")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.thumbnailUrl)("ngClass",t.eq3(64,P,n.form.controls.thumbnailUrl.invalid)),t.R7$(2),t.Y8G("uploadToCdnMenu",n.allUploadToCdnMenuTypes.ADMIN)("fileType",t.eq3(66,se,n.allUploadFileTypes.IMAGE))("allowCompressImage",!1),t.R7$(),t.SpI(" ",t.bMT(52,48,"lang_cms_admin_create_ads_upload_image")," "),t.R7$(2),t.Y8G("ngForOf",n.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",n.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(60,50,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",n.currentAdsObj),t.R7$(3),t.JRh(t.bMT(66,52,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(69,54,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(72,56,"lang_core_luu_va_dong"))}}let de=(()=>{var e;class r extends pt{initForm(){this.form.controls.partnerId.setValue(this.commonService.getFirstOfArray(this.partnerObjs)?.id??0),this.attributeObjs.forEach(n=>{this.form.controls.attributeObjs.push(new i.gE({attributeId:new i.MJ(n.id,{nonNullable:!0}),attributeDisplayName:new i.MJ(n.displayName,{nonNullable:!0}),attributeVariableName:new i.MJ(n.variableName,{nonNullable:!0}),attributeValue:new i.MJ("",{nonNullable:!0})}))})}initData(n){this.initStatusObj(),this.waitDestroy((0,Q.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.categoryService.apiCategoryGetCategoryGet(this.categoryId)]).pipe((0,lt.M)(([a,l,d,p])=>a.success?l.success?d.success?p.success?null==p.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.templateObj=a.data,this.attributeObjs=l.data?.objs??[],this.partnerObjs=d.data?.objs??[],this.categoryObj=p.data,this.initForm(),this.stopStatusObj(),void n()):this.errorStatusObj(p.message,!0):this.errorStatusObj(d.message,!0):this.errorStatusObj(l.message,!0):this.errorStatusObj(a.message,!0))).subscribe())}saveObj(n){this.initStatusObj();let a=this.form.getRawValue(),l={categoryId:this.categoryId,partnerId:a.partnerId,name:a.name,description:a.description,thumbnailUrl:a.thumbnailUrl,isActive:a.isActive?1:0,attributes:a.attributeObjs.map(d=>({attributeId:d.attributeId,value:d.attributeValue}))};this.waitDestroy(this.productService.apiProductCreateProductPost(l).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_cms_add_success",!0),n&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(()=>{this.form.valueChanges.subscribe(n=>{let a=this.form.controls.attributeObjs.getRawValue().map(l=>({id:0,productId:0,attributeId:l.attributeId,value:l.attributeValue,attribute:{id:l.attributeId,categoryId:this.categoryId,displayName:l.attributeDisplayName,variableName:l.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,thumbnailUrl:this.form.controls.thumbnailUrl.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:a}})})}constructor(n,a,l,d,p){super(),this.partnerService=n,this.productService=a,this.categoryAttributeService=l,this.categoryTemplateService=d,this.activeRoute=p,this.adsId=0}}return(e=r).\u0275fac=function(n){return new(n||e)(t.rXU(ne.K),t.rXU(oe.b),t.rXU(ut.C),t.rXU(_t.O),t.rXU(A.nX))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-create-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"link-color","clickable","pt-1"],[1,"inline-block",3,"uploadComplete","uploadToCdnMenu","fileType","allowCompressImage"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",2),t.DNE(1,re,1,1,"azt-loading-effect",3)(2,me,73,68,"ng-template",null,0,t.C5r),t.k0s()),2&n){const l=t.sdS(3);t.Y8G("headerBackToLink",a.backTo),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",l)}},dependencies:[s.YU,s.Sq,s.bT,i.qT,i.me,i.Zm,i.BC,i.cb,X.wT,W.rl,K.VO,i.l_,i.j4,x.K,gt.T,q.f,H.x,N.Q,F.U9,$.wp],encapsulation:2}),r})();const U=e=>({"error-border":e}),pe=e=>[e];function ue(e,r){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function _e(e,r){if(1&e&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&e){const o=r.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function ge(e,r){if(1&e&&(t.j41(0,"div",10)(1,"div",11)(2,"label",12),t.EFF(3),t.k0s()(),t.j41(4,"div",11)(5,"div",20),t.nrm(6,"input",21),t.k0s()()()),2&e){const o=r.$implicit;t.R7$(3),t.Lme("",o.controls.attributeDisplayName.value," - ",o.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",o.controls.attributeValue)("ngClass",t.eq3(4,U,o.controls.attributeValue.invalid))}}function be(e,r){if(1&e&&(t.j41(0,"div",35)(1,"div",11),t.nrm(2,"azt-frontend-ads-item",36),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(2),t.Y8G("obj",o.currentAdsObj)}}function fe(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10)(8,"div",11)(9,"label",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",13)(13,"div",14)(14,"mat-form-field",15)(15,"mat-select",16,1)(17,"mat-option"),t.nrm(18,"ngx-mat-select-search",17),t.nI1(19,"mytranslate"),t.nI1(20,"mytranslate"),t.k0s(),t.DNE(21,_e,2,2,"mat-option",18),t.k0s()()(),t.j41(22,"div",19),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.createPartner())}),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()(),t.j41(25,"div",10)(26,"div",11)(27,"label",12),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s()(),t.j41(30,"div",11)(31,"div",20),t.nrm(32,"input",21),t.k0s()()(),t.j41(33,"div",10)(34,"div",11)(35,"label",12),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()(),t.j41(38,"div",11)(39,"div",20),t.nrm(40,"textarea",21),t.k0s()()(),t.j41(41,"div",10)(42,"div",11)(43,"label",12),t.EFF(44),t.nI1(45,"mytranslate"),t.k0s()(),t.j41(46,"div",11)(47,"div",20),t.nrm(48,"input",21),t.k0s()(),t.j41(49,"div",22)(50,"azt-upload-single-box",23),t.bIt("uploadComplete",function(a){t.eBV(o);const l=t.XpG();return t.Njj(l.uploadThumbnailImage(a))}),t.EFF(51),t.nI1(52,"mytranslate"),t.k0s()()(),t.DNE(53,ge,7,6,"div",24),t.j41(54,"div",10)(55,"div",11)(56,"div",25),t.nrm(57,"input",26),t.j41(58,"label",27),t.EFF(59),t.nI1(60,"mytranslate"),t.k0s()()()(),t.nrm(61,"hr",28),t.DNE(62,be,3,1,"div",29),t.k0s(),t.j41(63,"div",30)(64,"button",31),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.cancel())}),t.EFF(65),t.nI1(66,"mytranslate"),t.k0s(),t.j41(67,"button",32),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!1))}),t.EFF(68),t.nI1(69,"mytranslate"),t.k0s(),t.j41(70,"button",33),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveObj(!0))}),t.EFF(71),t.nI1(72,"mytranslate"),t.k0s()()()()()}if(2&e){const o=t.sdS(16),n=t.XpG();t.R7$(),t.Y8G("formGroup",n.form),t.R7$(3),t.SpI(" ",t.bMT(5,32,n.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(6),t.SpI(" ",t.bMT(11,34,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(58,U,n.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",n.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(19,36,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(20,38,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(n.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(24,40,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(29,42,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.name)("ngClass",t.eq3(60,U,n.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(37,44,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.description)("ngClass",t.eq3(62,U,n.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(45,46,"lang_cms_admin_create_ads_thumbnail_url")," "),t.R7$(4),t.Y8G("formControl",n.form.controls.thumbnailUrl)("ngClass",t.eq3(64,U,n.form.controls.thumbnailUrl.invalid)),t.R7$(2),t.Y8G("uploadToCdnMenu",n.allUploadToCdnMenuTypes.ADMIN)("fileType",t.eq3(66,pe,n.allUploadFileTypes.IMAGE))("allowCompressImage",!1),t.R7$(),t.SpI(" ",t.bMT(52,48,"lang_cms_admin_create_ads_upload_image")," "),t.R7$(2),t.Y8G("ngForOf",n.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",n.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(60,50,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",n.currentAdsObj),t.R7$(3),t.JRh(t.bMT(66,52,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(69,54,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",n.form.invalid),t.R7$(),t.JRh(t.bMT(72,56,"lang_core_luu_va_dong"))}}let he=(()=>{var e;class r extends pt{initForm(){this.form.controls.partnerId.setValue(this.updateAdsObj?.partnerId??0),this.form.controls.name.setValue(this.updateAdsObj?.name??""),this.form.controls.description.setValue(this.updateAdsObj?.description??""),this.form.controls.thumbnailUrl.setValue(this.updateAdsObj?.thumbnailUrl??""),this.form.controls.isActive.setValue(!!this.updateAdsObj?.isActive),this.attributeObjs.forEach(n=>{let a=this.updateAdsObj?.productAttributes?.find(l=>l.attributeId==n.id);this.form.controls.attributeObjs.push(new i.gE({attributeId:new i.MJ(n.id,{nonNullable:!0}),attributeDisplayName:new i.MJ(n.displayName,{nonNullable:!0}),attributeVariableName:new i.MJ(n.variableName,{nonNullable:!0}),attributeValue:new i.MJ(a?.value??"",{nonNullable:!0})}))})}initData(n){this.initStatusObj(),this.waitDestroy((0,Q.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.productService.apiProductGetProductGet(this.adsId),this.categoryService.apiCategoryGetCategoryGet(this.categoryId)]).pipe((0,lt.M)(([a,l,d,p,I])=>a.success?l.success?d.success?I.success?null==I.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.templateObj=a.data,this.attributeObjs=l.data?.objs??[],this.partnerObjs=d.data?.objs??[],this.updateAdsObj=p.data,this.categoryObj=I.data,this.initForm(),this.stopStatusObj(),void n()):this.errorStatusObj(I.message,!0):this.errorStatusObj(d.message,!0):this.errorStatusObj(l.message,!0):this.errorStatusObj(a.message,!0))).subscribe())}saveObj(n){this.initStatusObj();let a=this.form.getRawValue(),l={categoryId:this.categoryId,partnerId:a.partnerId,name:a.name,description:a.description,thumbnailUrl:a.thumbnailUrl,isActive:a.isActive?1:0,attributes:a.attributeObjs.map(d=>({attributeId:d.attributeId,value:d.attributeValue}))};this.waitDestroy(this.productService.apiProductUpdateProductPut(l,this.adsId).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_cms_update_success",!0),n&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.adsId=Number(this.commonService.getMyParam(this.activeRoute,"adsId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(()=>{this.form.valueChanges.subscribe(n=>{let a=this.form.controls.attributeObjs.getRawValue().map(l=>({id:0,productId:0,attributeId:l.attributeId,value:l.attributeValue,attribute:{id:l.attributeId,categoryId:this.categoryId,displayName:l.attributeDisplayName,variableName:l.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,thumbnailUrl:this.form.controls.thumbnailUrl.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:a}})})}constructor(n,a,l,d,p){super(),this.partnerService=n,this.productService=a,this.categoryAttributeService=l,this.categoryTemplateService=d,this.activeRoute=p,this.adsId=0,this.updateAdsObj=void 0,this.form=new i.gE({name:new i.MJ("",{nonNullable:!0,validators:[G.M.noWhiteSpace]}),partnerId:new i.MJ(0,{nonNullable:!0,validators:[i.k0.min(1)]}),description:new i.MJ("",{nonNullable:!0}),thumbnailUrl:new i.MJ("",{nonNullable:!0}),isActive:new i.MJ(!0,{nonNullable:!0}),attributeObjs:new i.Yp([])})}}return(e=r).\u0275fac=function(n){return new(n||e)(t.rXU(S.KM),t.rXU(S.bk),t.rXU(S.CT),t.rXU(S.Or),t.rXU(A.nX))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-update-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"link-color","clickable","pt-1"],[1,"inline-block",3,"uploadComplete","uploadToCdnMenu","fileType","allowCompressImage"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",2),t.DNE(1,ue,1,1,"azt-loading-effect",3)(2,fe,73,68,"ng-template",null,0,t.C5r),t.k0s()),2&n){const l=t.sdS(3);t.Y8G("headerBackToLink",a.backTo),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",l)}},dependencies:[s.YU,s.Sq,s.bT,i.qT,i.me,i.Zm,i.BC,i.cb,X.wT,W.rl,K.VO,i.l_,i.j4,x.K,gt.T,q.f,H.x,N.Q,F.U9,$.wp],encapsulation:2}),r})();var ve=c(76627),bt=c(75421),ye=c(92040);const Y=e=>({backTo:e}),tt=()=>({"mr-1":!0}),Ce=(e,r)=>({"btn-success-soft":e,"btn-pending-soft":r});function Ie(e,r){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function je(e,r){1&e&&(t.j41(0,"span",24),t.nrm(1,"azt-loading-ui"),t.k0s())}function Te(e,r){1&e&&(t.j41(0,"span",24),t.nrm(1,"azt-loading-ui"),t.k0s())}function Se(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"b"),t.EFF(4),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"div",15)(7,"a",16),t.nI1(8,"navigationLocalize"),t.nrm(9,"lucide-icon",17),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"button",18),t.bIt("click",function(){const a=t.eBV(o).$implicit,l=t.XpG(3);return t.Njj(l.changeStatus(a))}),t.DNE(13,je,2,0,"span",19),t.nrm(14,"lucide-icon",20),t.j41(15,"span",21),t.EFF(16),t.nI1(17,"mytranslate"),t.nI1(18,"mytranslate"),t.k0s()(),t.j41(19,"button",22),t.bIt("click",function(){const a=t.eBV(o).$implicit,l=t.XpG(3);return t.Njj(l.deleteObj(a))}),t.DNE(20,Te,2,0,"span",19),t.nrm(21,"lucide-icon",23),t.j41(22,"span",21),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()()()()}if(2&e){const o=r.$implicit,n=r.index,a=t.XpG(3);t.R7$(4),t.SpI("",n+1,"."),t.R7$(),t.SpI(" ",o.name," "),t.R7$(2),t.Y8G("routerLink",t.bMT(8,13,"/azota-ads/edit-ads/"+o.categoryId+"/"+o.id))("queryParams",t.eq3(23,Y,a.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(25,tt)),t.R7$(),t.SpI(" ",t.bMT(11,15,"lang_auto_sua")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(26,Ce,o.isActive,!o.isActive)),t.R7$(),t.Y8G("ngIf",a.changeStatusId==o.id),t.R7$(),t.Y8G("ngClass",t.lJ4(29,tt)),t.R7$(2),t.JRh(o.isActive?t.bMT(17,17,"lang_cms_admin_ads_is_active"):t.bMT(18,19,"lang_cms_admin_ads_is_inactive")),t.R7$(4),t.Y8G("ngIf",a.deletingId==o.id),t.R7$(),t.Y8G("ngClass",t.lJ4(30,tt)),t.R7$(2),t.JRh(t.bMT(24,21,"lang_auto_xoa"))}}function Ae(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",8)(1,"div")(2,"b"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.EFF(5," ( "),t.j41(6,"span",9),t.nI1(7,"navigationLocalize"),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.EFF(10," | "),t.j41(11,"span",9),t.nI1(12,"navigationLocalize"),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.EFF(15," | "),t.j41(16,"span",9),t.nI1(17,"navigationLocalize"),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.EFF(20," | "),t.j41(21,"span",10),t.bIt("click",function(){const a=t.eBV(o).$implicit,l=t.XpG(2);return t.Njj(l.handleRemoveAdsCategory(a.categoryObj))}),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.EFF(24," ) "),t.k0s(),t.DNE(25,Se,25,31,"div",11),t.k0s()}if(2&e){const o=r.$implicit,n=t.XpG(2);t.R7$(3),t.LHq("",o.categoryObj.name," - Id: ",o.categoryObj.id," - ",t.bMT(4,15,"lang_azota_ads_position_"+o.categoryObj.position)," - ",o.categoryObj.displayType,""),t.R7$(3),t.Y8G("routerLink",t.bMT(7,17,"/azota-ads/update-ads-category/"+o.categoryObj.id))("queryParams",t.eq3(31,Y,n.backTo)),t.R7$(2),t.SpI(" ",t.bMT(9,19,"lang_cms_admin_ads_edit_ads_cateogry")," "),t.R7$(3),t.Y8G("routerLink",t.bMT(12,21,"/azota-ads/create-ads-template/"+o.categoryObj.id))("queryParams",t.eq3(33,Y,n.backTo)),t.R7$(2),t.SpI(" ",t.bMT(14,23,"lang_cms_admin_ads_edit_ads_template")," "),t.R7$(3),t.Y8G("routerLink",t.bMT(17,25,"/azota-ads/create-ads/"+o.categoryObj.id))("queryParams",t.eq3(35,Y,n.backTo)),t.R7$(2),t.SpI(" ",t.bMT(19,27,"lang_cms_admin_ads_create_new_ads")," "),t.R7$(4),t.JRh(t.bMT(23,29,"lang_cms_admin_ads_delete_ads_cateogry")),t.R7$(3),t.Y8G("ngForOf",o.productObjs)}}function Oe(e,r){if(1&e&&(t.j41(0,"div",5)(1,"span",6),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.DNE(5,Ae,26,37,"div",7)),2&e){const o=t.XpG();t.R7$(),t.Y8G("routerLink",t.bMT(2,4,"/azota-ads/create-ads-category"))("queryParams",t.eq3(8,Y,o.backTo)),t.R7$(2),t.JRh(t.bMT(4,6,"lang_cms_admin_ads_create_new_category")),t.R7$(2),t.Y8G("ngForOf",o.objs)}}function ke(e,r){if(1&e&&t.nrm(0,"azt-loading-effect",3),2&e){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Re(e,r){if(1&e&&(t.j41(0,"div",11)(1,"span",12),t.EFF(2),t.k0s(),t.j41(3,"span",13),t.EFF(4),t.k0s()()),2&e){const o=r.$implicit;t.R7$(2),t.SpI(" ","${"+o.variableName+"}"," "),t.R7$(2),t.SpI(" ","- "+o.description," ")}}function Ee(e,r){if(1&e&&(t.j41(0,"div",24)(1,"div",16),t.nrm(2,"azt-frontend-ads-item",25),t.k0s()()),2&e){const o=t.XpG(2);t.R7$(2),t.Y8G("obj",o.currentAdsObj)}}function Me(e,r){if(1&e){const o=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"h3",6),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"div",8)(7,"h3",9),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",10)(11,"div",11)(12,"span",12),t.EFF(13),t.k0s(),t.j41(14,"span",13),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",11)(18,"span",12),t.EFF(19),t.k0s(),t.j41(20,"span",13),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.j41(23,"div",11)(24,"span",12),t.EFF(25),t.k0s(),t.j41(26,"span",13),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",11)(30,"span",12),t.EFF(31),t.k0s(),t.j41(32,"span",13),t.EFF(33),t.nI1(34,"mytranslate"),t.k0s()(),t.DNE(35,Re,5,2,"div",14),t.k0s()(),t.j41(36,"div",15)(37,"div",16)(38,"h3",9),t.EFF(39),t.nI1(40,"mytranslate"),t.k0s()(),t.j41(41,"div",17),t.nrm(42,"editor",18),t.nI1(43,"getTinyMceKey"),t.nI1(44,"getTinyMceConfig"),t.k0s()(),t.nrm(45,"hr",19),t.DNE(46,Ee,3,1,"div",20),t.k0s(),t.j41(47,"div",21)(48,"button",22),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.handleDestroy())}),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s(),t.j41(51,"button",23),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.saveTemplate())}),t.EFF(52),t.nI1(53,"mytranslate"),t.k0s()()()()}if(2&e){const o=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,19,"lang_azt_create_ads_template")," "),t.R7$(5),t.SpI(" ",t.bMT(9,21,"lang_azt_information_field")," "),t.R7$(5),t.JRh("${NAME}"),t.R7$(2),t.SpI(" ","- "+t.bMT(16,23,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.JRh("${URL}"),t.R7$(2),t.SpI(" ","- "+t.bMT(22,25,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.JRh("${DESCRIPTION}"),t.R7$(2),t.SpI(" ","- "+t.bMT(28,27,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.JRh("${THUMBNAIL}"),t.R7$(2),t.Lme("","- "+t.bMT(34,29,"lang_cms_admin_create_ads_thumbnail_url")," - ",o.adsDefaultThumbnail,""),t.R7$(2),t.Y8G("ngForOf",o.categoryAttributeList),t.R7$(4),t.SpI(" ",t.bMT(40,31,"lang_auto_noi_dung")," "),t.R7$(3),t.FS9("apiKey",t.bMT(43,33,"")),t.Y8G("formControl",o.template)("init",t.bMT(44,35,"admin_common")),t.R7$(4),t.Y8G("ngIf",o.currentAdsObj),t.R7$(3),t.JRh(t.bMT(50,37,"lang_auto_huy")),t.R7$(3),t.JRh(t.bMT(53,39,"lang_auto_luu"))}}const ze=[{path:"",component:g.z,children:[{path:"ads-list/:categoryId",component:(()=>{var e;class r extends D.H{handleRemoveAdsCategory(n){const a=`${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_category")} <b>${n.name}<b/>?`;this.dialogService.open(bt.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&this.waitDestroy(this.categoryService.apiCategoryDeleteCategoryDelete(n.id).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.objs=this.objs.filter(p=>p.categoryObj.id!=n.id),this.successStatusObj("lang_admin_guide_delete_success",!0)}))})}changeStatus(n){this.changeStatusId=n.id;let a=n.isActive?this.productService.apiProductDeactivateProductPut(n.id):this.productService.apiProductActivateProductPut(n.id);this.waitDestroy(a.subscribe(l=>{if(this.changeStatusId=0,!l.success)return this.errorStatusObj(l.message,!0);this.objs.forEach(d=>{d.productObjs.forEach(p=>{p.id==n.id&&(p.isActive=n.isActive?0:1)})})}))}deleteObj(n){const a=this.commonService.myTranslateInstant("lang_cms_admin_ads_are_your_sure_to_delete_this_ads")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(bt.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&(this.deletingId=n.id,this.waitDestroy(this.productService.apiProductDeleteProductsPost({productIds:[n.id]}).subscribe(d=>{if(this.deletingId=0,!d.success)return this.errorStatusObj(d.message,!0);this.objs.forEach(p=>p.productObjs=p.productObjs.filter(I=>I.id!=n.id))})))})}getData(){this.initStatusObj(),this.waitDestroy(this.productService.apiProductListCategoryWithProductsPost({page:-1,size:-1}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.objs=a.data?.objs??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,ve.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getData()})),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.headerBackTo=this.commonService.getMyQueryParam("backTo")??"/azota-ads/ads-list/0",this.backTo=this.commonService.getMyQueryParam("backTo")??this.commonService.getCurrentUrlWithoutLocale()}constructor(n,a,l,d,p){super(),this.dialogService=n,this.categoryService=a,this.productService=l,this.activeRoute=d,this.sAztDialogService=p,this.currentCategoryFormControl=new i.MJ(0,{nonNullable:!0}),this.objs=[],this.deletingId=0,this.changeStatusId=0,this.backTo="",this.headerBackTo=""}}return(e=r).\u0275fac=function(n){return new(n||e)(t.rXU(Z.i),t.rXU(ye.M),t.rXU(S.bk),t.rXU(A.nX),t.rXU(Z.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-common-guide"]],features:[t.Vt3],decls:5,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"text-right","mt-3"],[1,"clickable","btn","btn-primary",3,"routerLink","queryParams"],["class","mt-6",4,"ngFor","ngForOf"],[1,"mt-6"],[1,"clickable","flex-none","text-primary","ml-2","mr-2",3,"routerLink","queryParams"],[1,"clickable","flex-none","text-danger","ml-2","mr-2",3,"click"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"flex","align-items-center","box","p-3"],[1,"w-full"],[1,"flex-none","items-center"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"routerLink","queryParams"],["name","square-pen","size","18",3,"ngClass"],[1,"btn","btn-sm","mr-2",3,"click","ngClass"],["class","w-4 h-4 flex mr-1",4,"ngIf"],["name","shield-check","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[1,"w-4","h-4","flex","mr-1"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",1)(1,"div",2),t.DNE(2,Ie,1,1,"azt-loading-effect",3)(3,Oe,6,10,"ng-template",null,0,t.C5r),t.k0s()()),2&n){const l=t.sdS(4);t.Y8G("headerBackToLink",a.headerBackTo),t.R7$(2),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",l)}},dependencies:[A.Wk,s.YU,s.Sq,s.bT,x.K,dt.R,N.Q,y.WGl,$.F2,$.wp],encapsulation:2}),r})()},{path:"create-ads/:categoryId",component:de},{path:"edit-ads/:categoryId/:adsId",component:he},{path:"create-ads-category",component:zt},{path:"update-ads-category/:categoryId",component:Zt},{path:"create-ads-template/:categoryId",component:(()=>{var e;class r extends D.H{saveTemplate(){const n={categoryId:this.categoryId,data:this.commonService.replaceAll(this.template.value,this.adsDefaultThumbnail,"${THUMBNAIL}")??""};this.waitDestroy(this.categoryTemplateService.apiCategoryTemplateUpsertCategoryTemplatePost(n).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.successStatusObj("T\u1ea1o template th\xe0nh c\xf4ng"),this.myNavigation(`/azota-ads/ads-list/${this.categoryId}`)}))}handleDestroy(){this.myNavigation(this.backToLink)}initAds(){this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:0,name:"NAME_SAMPLE",description:"DESCRIPTION_SAMPLE",thumbnailUrl:u.c.adsDefaultThumbnail,isActive:1,template:this.template.value,productAttributes:this.categoryAttributeList.map(n=>({id:0,productId:0,attributeId:n.id,value:n.variableName,attribute:{id:n.id,categoryId:this.categoryId,displayName:n.displayName,variableName:n.variableName}}))}}getData(n){this.initStatusObj();const a=this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(n),l=this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(n),d=this.categoryService.apiCategoryGetCategoryGet(n);this.waitDestroy((0,Q.p)([a,l,d]).subscribe({next:([p,I,j])=>p.success?I.success?j.success?null==j.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.categoryObj=j.data,this.categoryAttributeList=p.data?.objs??[],this.template.setValue(this.commonService.replaceAll(I.data?.data,"${THUMBNAIL}",this.adsDefaultThumbnail)??""),void this.successStatusObj()):this.errorStatusObj(j.message,!0):this.errorStatusObj(I.message,!0):this.errorStatusObj(p.message,!0),error:p=>this.errorStatusObj(p.message,!0)}))}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/"+this.categoryId,this.getData(this.categoryId),this.template.valueChanges.subscribe(n=>{this.initAds()})}constructor(n,a,l,d){super(),this.activeRoute=n,this.categoryService=a,this.categoryTemplateService=l,this.categoryAttributeService=d,this.backToLink="",this.categoryId=0,this.template=new i.MJ("",{nonNullable:!0,validators:[i.k0.required]}),this.categoryAttributeList=[],this.adsDefaultThumbnail=u.c.adsDefaultThumbnail}}return(e=r).\u0275fac=function(n){return new(n||e)(t.rXU(A.nX),t.rXU(S.M$),t.rXU(_t.O),t.rXU(ut.C))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-create-ads-template"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-5","mt-3"],[1,"mt-0"],[1,"text-md","font-medium"],[1,"mt-2"],[1,"mt-3"],[1,"rounded-md","bg-slate-200","px-3","py-1","text-slate-600","text-xs","dark:bg-darkmode-300","dark:text-slate-400","inline-block"],[1,"mt-1","mr-1","text-xs","leading-relaxed","text-slate-500"],["class","mt-3",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-12"],[1,"col-span-12","lg:col-span-12","mt-3"],[3,"formControl","apiKey","init"],[1,"mt-3","mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(n,a){if(1&n&&(t.j41(0,"teacher-layout",1),t.DNE(1,ke,1,1,"azt-loading-effect",2)(2,Me,54,41,"ng-template",null,0,t.C5r),t.k0s()),2&n){const l=t.sdS(3);t.Y8G("headerBackToLink",a.backToLink),t.R7$(),t.Y8G("ngIf",1==a.statusObj.loading)("ngIfElse",l)}},dependencies:[s.Sq,s.bT,i.BC,m.xn,i.l_,x.K,q.f,N.Q,$.wp,$.Hw,$.yc],encapsulation:2}),r})()}]}];let Ge=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[A.iI.forChild(ze),A.iI,f.XE]}),r})(),Le=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({providers:[{provide:m.vn,useValue:u.c.azt_tiny_mce_script_src}],imports:[A.iI,s.MD,i.YN,m.sv,v.s,i.X1,Ge,h.Q,k.L,_.Id,C.b,y.flO.pick(y.Ptg),E.AC,F.An]}),r})()},96270:(L,R,c)=>{c.d(R,{u:()=>s});const s={BANNER:"BANNER",DIALOG:"DIALOG"}}}]);