(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[282],{2282:(Ut,_e,O)=>{"use strict";O.r(_e),O.d(_e,{TestFrontRoutingModule:()=>xz});var L=O(32108),ge=O(74341),Oe=O(5180),x=O(60177),g=O(89417),F=O(8516),de=O(84572),Y=O(72093),ye=O(79129),z=O(88048),W=O(23424),Z=O(69365),ae=O(49568),J=O(55443),ee=O(25919),se=O(25244),Ee=O(31105),U=O(11782),q=O(9788),e=O(93953),ke=O(42488),$e=O(1300);let mi=(()=>{var s;class n{isInIframe(){try{return window.self!==window.top}catch{return!0}}sendMessageToParentIframe(i){try{window.parent.postMessage(i,"*")}catch{}}sendMessageToIFrame(i,o){const a=document.getElementById(i),r=a?a.contentWindow:null;r?.postMessage(o,"*")}constructor(i){this.commonService=i}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var pi=O(33861),vt=O(14823);const dn=s=>({active:s}),Ys=s=>({clickable:s}),Zr=s=>({"truncate-bread":s});function na(s,n){if(1&s&&(e.j41(0,"student-layout",5),e.eu8(1,6),e.k0s()),2&s){const t=e.XpG(),i=e.sdS(3);e.Y8G("headerBackToLink",t.backToLink),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function Us(s,n){if(1&s&&(e.j41(0,"div",7),e.eu8(1,6),e.k0s()),2&s){e.XpG();const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function ia(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",9),2&s){const t=e.XpG(2);e.Y8G("currentStatusObj",t.statusObj)}}function sa(s,n){1&s&&(e.j41(0,"h3",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_danh_sach_de_thi")," "))}function oa(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t.name)," ")}}function aa(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function ra(s,n){if(1&s){const t=e.RV6();e.j41(0,"li",23)(1,"a",24),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.goBackParent(o.id?o.id:0))}),e.j41(2,"span",25,2),e.nI1(4,"mytranslate"),e.DNE(5,oa,3,3,"span",26)(6,aa,2,1,"span",26),e.k0s()()()}if(2&s){const t=n.$implicit,i=e.sdS(3),o=e.XpG(3);e.Y8G("ngClass",e.eq3(10,dn,t.id==o.categoryId)),e.R7$(),e.Y8G("ngClass",e.eq3(12,Ys,t.id!=o.categoryId)),e.R7$(),e.FS9("matTooltip",e.bMT(4,8,t.name)),e.Y8G("ngClass",e.eq3(14,Zr,t.id!=o.categoryId))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.R7$(3),e.Y8G("ngIf",-1==t.id),e.R7$(),e.Y8G("ngIf",-1!=t.id)}}function la(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",27),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.cateDetail(o))}),e.j41(1,"div",28)(2,"div",29),e.nrm(3,"azt-svg-icon",30),e.k0s(),e.j41(4,"div",31,2),e.EFF(6),e.k0s()()()}if(2&s){const t=n.$implicit,i=e.sdS(5);e.R7$(4),e.FS9("matTooltip",t.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.R7$(2),e.SpI(" ",t.name," ")}}function Se(s,n){if(1&s&&(e.j41(0,"div",42)(1,"span",43),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"span"),e.EFF(5),e.k0s()()()),2&s){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_diem_cua_ban"),": "),e.R7$(3),e.JRh(t.mark)}}function $n(s,n){1&s&&(e.j41(0,"div",42),e.nrm(1,"div",44),e.k0s())}function el(s,n){if(1&s){const t=e.RV6();e.j41(0,"a",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.redirectToExamDetail(o.hashId?o.hashId:""))}),e.j41(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",29),e.nrm(5,"azt-svg-icon",39),e.k0s(),e.j41(6,"div",31,2),e.EFF(8),e.k0s(),e.j41(9,"div",40)(10,"span"),e.EFF(11),e.k0s(),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Se,6,4,"div",41)(15,$n,2,0,"div",41),e.k0s()()()()}if(2&s){const t=e.sdS(7),i=e.XpG().$implicit,o=e.XpG(3);e.FS9("target",o.target),e.R7$(5),e.Y8G("size",80),e.R7$(),e.FS9("matTooltip",i.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.R7$(2),e.SpI(" ",i.name," "),e.R7$(3),e.JRh(i.attended),e.R7$(),e.SpI(" ",e.bMT(13,10,"lang_auto_luot_lam_de")," "),e.R7$(2),e.Y8G("ngIf",null!=i.mark),e.R7$(),e.Y8G("ngIf",null==i.mark)}}function lt(s,n){if(1&s&&(e.j41(0,"div",42)(1,"span",43),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"span"),e.EFF(5),e.k0s()()()),2&s){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_diem_cua_ban"),": "),e.R7$(3),e.JRh(t.mark)}}function tl(s,n){if(1&s&&(e.j41(0,"a",45)(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",29),e.nrm(5,"azt-svg-icon",39),e.k0s(),e.j41(6,"div",31,2),e.EFF(8),e.k0s(),e.j41(9,"div",40)(10,"span"),e.EFF(11),e.k0s(),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,lt,6,4,"div",41),e.k0s()()()()),2&s){const t=e.sdS(7),i=e.XpG().$implicit,o=e.XpG(3);e.FS9("target",o.target),e.Y8G("href","/de-thi/"+i.hashId,e.B4B),e.R7$(5),e.Y8G("size",60),e.R7$(),e.FS9("matTooltip",i.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.R7$(2),e.SpI(" ",i.name," "),e.R7$(3),e.JRh(i.attended),e.R7$(),e.SpI(" ",e.bMT(13,10,"lang_auto_luot_lam_de")," "),e.R7$(2),e.Y8G("ngIf",null!=i.mark)}}function nl(s,n){if(1&s&&(e.j41(0,"div",32),e.DNE(1,el,16,12,"a",33)(2,tl,15,12,"a",34),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf","_blank"!=t.target),e.R7$(),e.Y8G("ngIf","_blank"==t.target)}}function ca(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",10),e.DNE(1,sa,3,3,"h3",11),e.j41(2,"div",12)(3,"ol",13)(4,"li",14)(5,"a",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.backToAllCate())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,ra,7,16,"li",16),e.k0s()(),e.j41(9,"div",17),e.DNE(10,la,7,4,"div",18)(11,nl,3,2,"div",19),e.k0s(),e.j41(12,"div",20)(13,"azt-paging",21),e.bIt("goToPaginationPage",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.goToPage(o))}),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.isInIframe),e.R7$(5),e.SpI(" ",e.bMT(7,6,"lang_auto_tat_ca")," "),e.R7$(2),e.Y8G("ngForOf",t.listBreadcrumb),e.R7$(2),e.Y8G("ngForOf",t.cateObjs),e.R7$(),e.Y8G("ngForOf",t.examObjs),e.R7$(2),e.Y8G("pageObj",t.pageObj)}}function il(s,n){if(1&s&&e.DNE(0,ia,1,1,"azt-loading-effect",8)(1,ca,14,8,"ng-template",null,1,e.C5r),2&s){const t=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",t)}}let an=(()=>{var s;class n extends Z.H{getListParentCate(){this.waitDestroy(this.frontExamCategoryService.apiFrontExamCategoryGetBreadcrumbsGet(this.tenantId,this.categoryId).subscribe(i=>{1==i.success?this.listBreadcrumb=i.data?.objs??new Array:this.errorStatusObj(i.message??"",!0)}))}getData(){this.backToLink=0!=this.categoryId?"/test/category/"+this.tenantId+"/0/"+this.pageObj.page:"/student/classroom/0";var i=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.pageObj.setPageNumber(i>0?i:1),this.initStatusObj(),this.waitDestroy(this.frontExamPageService.apiFrontExamPageGetObjsGet(this.tenantId,this.categoryId>0?this.categoryId:0,this.pageObj.page).subscribe(o=>{1==o.success?(this.cateObjs=o.data?.categoryObjs??new Array,this.examObjs=o.data?.examObjs??new Array,this.totalExam=o.data?.totalExam??0,this.pageObj.setTotalPages(this.totalExam),this.getListParentCate(),this.successStatusObj(),setTimeout(()=>{this.checkHeight()},0)):this.errorStatusObj(o.message??"",!0)}))}goToPage(i){this.commonService.myNavigation("/test/category/"+this.tenantId+"/"+this.categoryId+"/"+i)}backToAllCate(){this.commonService.myNavigation("/test/category/"+this.tenantId+"/0/1")}cateDetail(i){this.commonService.myNavigation("/test/category/"+this.tenantId+"/"+i.id+"/1")}goBackParent(i){this.commonService.myNavigation("/test/category/"+this.tenantId+"/"+i+"/1")}redirectToExamDetail(i){this.commonService.myNavigationWithQueryString(`/de-thi/${i}`,"?backto="+encodeURIComponent(this.paramBackToLink))}resizeHeight(){var i=document.body,o=document.documentElement,a=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);this.contentHeight=a,this.iframeService.sendMessageToParentIframe({height:this.contentHeight})}checkHeight(){var i=document.body,o=document.documentElement,a=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);this.contentHeight=a,this.iframeService.sendMessageToParentIframe({height:this.contentHeight})}changeLogin(){this.iframeService.sendMessageToParentIframe({changeLogin:!0})}ngOnInit(){super.ngOnInit(),this.isInIframe=this.iframeService.isInIframe(),this.isInIframe&&(this.target="_blank"),this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.tenantId=Number(this.commonService.getMyParam(this.activeRoute,"tenant_id"));let i=this.commonService.getMyParam(this.activeRoute,"page");this.paramBackToLink=`/test/category/${this.tenantId}/${this.categoryId}/${i}`,this.getData(),this.userLoginStateService.loginMessage.subscribe(o=>this.changeLogin()),this.commonService.translateMetaData({title:"lang_auto_danh_sach_de_thi",description:"lang_auto_danh_sach_de_thi"})}))}constructor(i,o,a,r,l){super(),this.activeRoute=i,this.frontExamCategoryService=o,this.frontExamPageService=a,this.iframeService=r,this.userLoginStateService=l,this.totalExam=0,this.tenantId=1,this.cateObjs=[],this.examObjs=[],this.listBreadcrumb=[],this.isInIframe=!1,this.target="",this.contentHeight=0,this.categoryId=0,this.backToLink="",this.paramBackToLink="",this.pageObj=new ee.d(18)}ngOnDestroy(){super.ngOnDestroy()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(L.nX),e.rXU(ke.EC),e.rXU(ke.zW),e.rXU(mi),e.rXU(pi.X))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-student-index"]],hostBindings:function(i,o){1&i&&e.bIt("resize",function(r){return o.resizeHeight(r)},!1,e.tSv)},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["categoryTemplate",""],["doneLoading",""],["c","isDisabled"],[3,"headerBackToLink",4,"ngIf"],["class","in-iframe",4,"ngIf"],[3,"headerBackToLink"],[3,"ngTemplateOutlet"],[1,"in-iframe"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5","mx-auto",2,"max-width","1200px"],["class","text-md uppercase font-medium",4,"ngIf"],[1,"box","p-3","mt-5"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","category--SCvgQNgc",3,"click"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","gap-3","sm:gap-6","mt-5"],["azt-track-service","category-P9OVEFAeM7","class","col-span-6 sm:col-span-4 md:col-span-4 2xl:col-span-3",3,"click",4,"ngFor","ngForOf"],["class","col-span-6 sm:col-span-4 md:col-span-4 2xl:col-span-3 cursor-pointer",4,"ngFor","ngForOf"],[1,"mt-3","p-2"],[3,"goToPaginationPage","pageObj"],[1,"text-md","uppercase","font-medium"],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","category-4ZVvjZOwmm",3,"click","ngClass"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],[4,"ngIf"],["azt-track-service","category-P9OVEFAeM7",1,"col-span-6","sm:col-span-4","md:col-span-4","2xl:col-span-3",3,"click"],[1,"file","box","rounded-md","px-5","pt-8","pb-5","px-3","sm:px-5","relative","zoom-in","h-full"],[1,"w-3/5","mx-auto"],["type","folder",1,"w-full","h-full"],[1,"block","font-medium","mt-4","text-center","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"col-span-6","sm:col-span-4","md:col-span-4","2xl:col-span-3","cursor-pointer"],["azt-track-service","category-36xAyNdE6R","class","flex h-full",3,"target","click",4,"ngIf"],["azt-track-service","category-QMZDKTOTgR","class","flex h-full",3,"href","target",4,"ngIf"],["azt-track-service","category-36xAyNdE6R",1,"flex","h-full",3,"click","target"],[1,"file","box","rounded-md","px-5","pt-8","pb-5","px-3","sm:px-5","relative","zoom-in","w-full"],[1,"box-title","text-center"],[1,"test","p-2","pl-3","pr-3"],["type","file",3,"size"],[1,"text-slate-500","text-xs","text-center","mt-0.5"],["class","mt-0.5",4,"ngIf"],[1,"mt-0.5"],[1,"text-center","font-medium"],[2,"height","16px"],["azt-track-service","category-QMZDKTOTgR",1,"flex","h-full",3,"href","target"]],template:function(i,o){1&i&&e.DNE(0,na,2,2,"student-layout",3)(1,Us,2,1,"div",4)(2,il,3,2,"ng-template",null,0,e.C5r),2&i&&(e.Y8G("ngIf",!o.isInIframe),e.R7$(),e.Y8G("ngIf",o.isInIframe))},dependencies:[ye.f,ae.j,se.K,Ee.m,J.q,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var En=O(90625),Xt=O(32909),ua=O(30678),hi=O(10562),Xs=O(30996),An=O(21413),Qn=O(40605),fi=O(56977);class gi{defaultTime(n=!1){return{hour:0,minute:0,second:0,almostEnd:n,hourStr:"00",minuteStr:"00",secondStr:"00"}}parseTime(n){const t=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60;return{hour:t,minute:o,second:a,almostEnd:0==t&&0==o,hourStr:t<10?"0"+t:t.toString(),minuteStr:o<10?"0"+o:o.toString(),secondStr:a<10?"0"+a:a.toString()}}}const _a=s=>({"time-almost-end":s});let Zt=(()=>{var s;class n extends Z.H{intervalTime(){let i=this.totalSecond,o=this.timeService.getCurrentSecond();const a=new An.B,r=(0,Qn.Y)(1e3).pipe((0,fi.Q)(a));this.waitDestroy(r.subscribe(l=>{this.timeCount=(new gi).parseTime(this.totalSecond);let c=this.timeService.getCurrentSecond();this.totalSecond=i-(c-o),this.totalSecond<=0&&(a.next(!0),this.endCountDownEvent.emit(!0))}))}ngOnChanges(){this.timeCount=(new gi).parseTime(this.totalSecond)}ngOnInit(){super.ngOnInit(),this.timeCount=(new gi).parseTime(this.totalSecond),this.useCountDown&&this.intervalTime()}constructor(i){super(),this.timeService=i,this.customClass="font-medium",this.endCountDownEvent=new e.bkB,this.timeCount=(new gi).defaultTime()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Xt.F))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-testbank-frontend-count-down-box"]],inputs:{totalSecond:"totalSecond",useCountDown:"useCountDown",customClass:"customClass"},outputs:{endCountDownEvent:"endCountDownEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:2,vars:9,consts:[[3,"ngClass"]],template:function(i,o){1&i&&(e.j41(0,"span",0),e.EFF(1),e.k0s()),2&i&&(e.HbH(o.customClass),e.Y8G("ngClass",e.eq3(7,_a,o.timeCount.almostEnd)),e.R7$(),e.E5c("",o.timeCount.hourStr," : ",o.timeCount.minuteStr," : ",o.timeCount.secondStr,""))},dependencies:[x.MD,x.YU,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var Gt=O(30665),sl=O(95287);const Hi=()=>({"mr-2":!0}),ol=s=>[s],Ti=(s,n)=>({backto:s,capacity:n}),da=()=>({"ml-2":!0});function al(s,n){1&s&&e.nrm(0,"azt-loading-ui",6)}function rl(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.getExamHistoryByHashId(!0))}),e.DNE(2,al,1,0,"azt-loading-ui",5),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_exam_detail_show_exam_history")," ")}}function Ws(s,n){1&s&&(e.j41(0,"h3",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_exam_detail_no_exam_history")," "))}function D(s,n){1&s&&(e.j41(0,"h3",11),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_lich_su_lam_bai_cua_ban")," "))}function B(s,n){if(1&s&&(e.j41(0,"span",30),e.nrm(1,"azt-check-mark",31),e.k0s()),2&s){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("mark",t.mark)}}function K(s,n){if(1&s&&(e.qex(0),e.j41(1,"span",29),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,B,2,1,"span",28),e.bVm()),2&s){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_diem_cua_ban"),":\xa0"),e.R7$(2),e.Y8G("ngIf",null!=t.mark)}}function oe(s,n){1&s&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_trac_nghiem_cua_ban"),":\xa0"))}function xe(s,n){1&s&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":\xa0"))}function ct(s,n){if(1&s&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3).$implicit;e.R7$(),e.SpI(" ",t.mark," ")}}function ft(s,n){if(1&s&&(e.qex(0),e.DNE(1,oe,3,3,"span",32)(2,xe,3,3,"span",32)(3,ct,2,1,"span",28),e.bVm()),2&s){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",null==t.essayMark),e.R7$(),e.Y8G("ngIf",null!=t.essayMark),e.R7$(),e.Y8G("ngIf",null!=t.mark)}}function ze(s,n){1&s&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":\xa0"))}function ue(s,n){if(1&s&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3).$implicit;e.R7$(),e.SpI(" ",t.mark," ")}}function pe(s,n){1&s&&(e.j41(0,"span",34),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_diem")," "))}function he(s,n){if(1&s&&(e.qex(0),e.DNE(1,ze,3,3,"span",32)(2,ue,2,1,"span",28)(3,pe,3,3,"span",33),e.bVm()),2&s){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",null!=t.essayMark),e.R7$(),e.Y8G("ngIf",null!=t.mark&&null!=t.essayMark),e.R7$(),e.Y8G("ngIf",null==t.essayMark)}}function Te(s,n){1&s&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_diem")," "))}function De(s,n){if(1&s&&(e.j41(0,"div",27),e.DNE(1,K,5,4,"ng-container",2),e.nI1(2,"isOnlyTrueFalse"),e.DNE(3,ft,4,3,"ng-container",2),e.nI1(4,"isMixTrueFalseAndEssay"),e.DNE(5,he,4,3,"ng-container",2),e.nI1(6,"isOnlyEssay"),e.DNE(7,Te,3,3,"span",28),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",e.bMT(2,4,i.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,6,i.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,8,i.examObj)),e.R7$(2),e.Y8G("ngIf",null==t.mark)}}function We(s,n){1&s&&(e.j41(0,"div",27)(1,"span",29),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"span",30),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_diem_cua_ban"),":\xa0"),e.R7$(3),e.SpI(" ",e.bMT(6,4,"lang_auto_chua_duoc_xem_diem")," "))}function ut(s,n){if(1&s&&(e.j41(0,"div",20)(1,"p",17),e.nrm(2,"lucide-icon",35),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",36),e.EFF(6),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("ngClass",e.lJ4(5,Hi)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_so_luong_dung")," "),e.R7$(3),e.SpI(" ",t.rightAnswer," ")}}function en(s,n){if(1&s&&(e.j41(0,"button",37),e.nI1(1,"navigationLocalize"),e.nI1(2,"isCapacityExam"),e.EFF(3),e.nI1(4,"mytranslate"),e.nrm(5,"lucide-icon",38),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG(3);e.Y8G("routerLink",e.eq3(10,ol,e.bMT(1,4,"/test/answer-test/"+i.curTenantId+"/"+(null!=i.curCategoryId?i.curCategoryId:0)+"/"+i.hashId+"/"+t.id)))("queryParams",e.l_i(12,Ti,i.backToLink,e.bMT(2,6,i.examObj)?"1":"0")),e.R7$(3),e.SpI(" ",e.bMT(4,8,"lang_auto_xem_chi_tiet_bai_lam")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(15,da))}}function ma(s,n){1&s&&(e.j41(0,"button",39),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.Y8G("disabled",!0),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_chua_duoc_xem_ket_qua")," "))}function ll(s,n){if(1&s&&(e.j41(0,"div",13),e.DNE(1,De,8,10,"div",14)(2,We,7,6,"div",14),e.j41(3,"div",15)(4,"div",16)(5,"p",17),e.nrm(6,"lucide-icon",18),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"p",19),e.EFF(10),e.k0s()(),e.j41(11,"div",20)(12,"p",17),e.nrm(13,"lucide-icon",21),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p",19),e.EFF(17),e.nI1(18,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(19,ut,7,6,"div",22),e.j41(20,"div",20)(21,"p",17),e.nrm(22,"lucide-icon",23),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"p",19),e.EFF(26),e.k0s()()(),e.j41(27,"div",24),e.DNE(28,en,6,16,"button",25)(29,ma,3,4,"button",26),e.k0s()()),2&s){const t=n.$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",2!=i.examObj.whenShowResult),e.R7$(),e.Y8G("ngIf",2==i.examObj.whenShowResult),e.R7$(4),e.Y8G("ngClass",e.lJ4(22,Hi)),e.R7$(),e.SpI(" ",e.bMT(8,14,"lang_auto_thoi_gian_lam_bai"),":\xa0 "),e.R7$(3),e.SpI(" ",i.calculateTime(t.startedTest,t.createdAt)," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(23,Hi)),e.R7$(),e.SpI(" ",e.bMT(15,16,"lang_auto_thoi_gian_nop_bai"),":\xa0 "),e.R7$(3),e.SpI(" ",e.bMT(18,18,t.createdAt)," "),e.R7$(2),e.Y8G("ngIf",null!=t.rightAnswer&&2!=i.examObj.whenShowResult),e.R7$(3),e.Y8G("ngClass",e.lJ4(24,Hi)),e.R7$(),e.SpI(" ",e.bMT(24,20,"lang_auto_so_cau_hoi")," "),e.R7$(3),e.SpI(" ",t.totalQuestion," "),e.R7$(2),e.Y8G("ngIf",!1!==i.examObj.allowStudentView),e.R7$(),e.Y8G("ngIf",!1===i.examObj.allowStudentView)}}function cl(s,n){if(1&s&&(e.qex(0),e.DNE(1,ll,30,25,"div",12),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.historyObjs)}}function o1(s,n){1&s&&e.nrm(0,"azt-loading-ui",44)}function a1(s,n){1&s&&e.nrm(0,"lucide-icon",45),2&s&&e.Y8G("ngClass",e.lJ4(1,da))}function r1(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.pagingData())}),e.EFF(2),e.nI1(3,"mytranslate"),e.DNE(4,o1,1,0,"azt-loading-ui",42)(5,a1,1,2,"lucide-icon",43),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_xem_them")," "),e.R7$(2),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.Y8G("ngIf",!t.statusObj.loading)}}function l1(s,n){if(1&s&&(e.qex(0),e.DNE(1,Ws,3,3,"h3",7)(2,D,3,3,"h3",8)(3,cl,2,1,"ng-container",2)(4,r1,6,5,"div",9),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.historyObjs.length),e.R7$(),e.Y8G("ngIf",t.historyObjs.length>0),e.R7$(),e.Y8G("ngIf",t.examObj&&t.historyObjs.length>0),e.R7$(),e.Y8G("ngIf",!t.disableBtn&&t.initDataCalled)}}let c1=(()=>{var s;class n extends Z.H{pagingData(){this.getExamHistoryByHashId()}calculateTime(i,o){return i?this.timeService.calculationTimeExamTested(i,o):""}getExamHistoryByHashId(i){this.initStatusObj(),this.waitDestroy(this.frontExamResultHistoryService.apiFrontExamResultHistoryGetHistoryObjsGet(this.hashId,this.page).subscribe(o=>{if(1==o.success){i&&(this.initDataCalled=!0);let a=o.data?.objs?o.data?.objs?.length:0;if(o.data?.objs)for(let r=0;r<a;r++)this.historyObjs.push(o.data.objs[r]??{});else this.initDataCalled=!0,this.errorStatusObj(o.message??"");this.page=o.data?.nextPage??"",o.data?.nextPage||(this.disableBtn=!0),this.successStatusObj()}else this.errorStatusObj(o.message??"")}))}ngOnInit(){this.backToLink=this.commonService.getCurrentUrlWithoutLocale()}constructor(i,o){super(),this.frontExamResultHistoryService=i,this.timeService=o,this.curTenantId=0,this.curCategoryId=0,this.backToLink="",this.historyObjs=[],this.page="",this.disableBtn=!1,this.initDataCalled=!1}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ke.zd),e.rXU(Xt.F))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-exam-history"]],inputs:{hashId:"hashId",examObj:"examObj",curTenantId:"curTenantId",curCategoryId:"curCategoryId"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[1,"exam-history","mx-auto","mt-5",2,"max-width","560px"],["class","mx-auto w-full",4,"ngIf"],[4,"ngIf"],[1,"mx-auto","w-full"],["azt-track-service","exam-history-_84BMuODi",1,"btn","btn-outline-secondary","p-3","block","mx-auto",3,"click"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["class","font-medium mx-auto",4,"ngIf"],["class","font-medium",4,"ngIf"],["class","mt-5 text-center",4,"ngIf"],[1,"font-medium","mx-auto"],[1,"font-medium"],["class","box mx-auto mt-5",4,"ngFor","ngForOf"],[1,"box","mx-auto","mt-5"],["class","text-center border-b border-slate-200/60 dark:border-darkmode-400 p-5",4,"ngIf"],[1,"azt-info-exam","mt-5","px-5"],[1,"flex","items-center"],[1,"text-md","flex","items-center"],["name","clock-4","size","16",3,"ngClass"],[1,"text-md","font-medium","ml-auto"],[1,"flex","items-center","mt-3"],["name","alarm-clock-check","size","16",3,"ngClass"],["class","flex items-center mt-3",4,"ngIf"],["name","circle-help","size","16",3,"ngClass"],[1,"p-5"],["azt-track-service","exam-history-1BV_WDkCER","class","btn btn-secondary w-full",3,"routerLink","queryParams",4,"ngIf"],["class","btn btn-secondary w-full",3,"disabled",4,"ngIf"],[1,"text-center","border-b","border-slate-200/60","dark:border-darkmode-400","p-5"],["class","font-medium text-lg","style","font-size: 25px",4,"ngIf"],[1,"font-medium","text-md","mr-2"],[1,"font-medium","text-lg",2,"font-size","25px"],[3,"mark"],["class","font-medium text-md mr-2",4,"ngIf"],["class","font-medium text-md","style","font-size: 25px",4,"ngIf"],[1,"font-medium","text-md",2,"font-size","25px"],["name","circle-check","size","16",3,"ngClass"],[1,"text-md","font-medium","text-success","ml-auto"],["azt-track-service","exam-history-1BV_WDkCER",1,"btn","btn-secondary","w-full",3,"routerLink","queryParams"],["name","chevron-right","size","16",3,"ngClass"],[1,"btn","btn-secondary","w-full",3,"disabled"],[1,"mt-5","text-center"],["azt-track-service","exam-history-tzgH_6R1Ki",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["class","ml-1",4,"ngIf"],["name","chevron-down","size","16",3,"ngClass",4,"ngIf"],[1,"ml-1"],["name","chevron-down","size","16",3,"ngClass"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,rl,5,4,"div",1)(2,l1,5,4,"ng-container",2),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",!o.initDataCalled),e.R7$(),e.Y8G("ngIf",o.initDataCalled))},dependencies:[Gt.R,sl.D,z.F2,x.MD,x.YU,x.Sq,x.bT,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.PP,z.Pj,z.ZY,z.bH,z.Xc,U.Id,q.k],encapsulation:2}),n})();var ul=O(20033),_l=O(58907),pa=O(14206);function ha(){return typeof aztExam<"u"?aztExam:void 0}var et=O(45312),mn=O(65758),dl=O(85479);let u1=(()=>{var s;class n{constructor(i){this.envService=i}getTmpVersionMonitor(){var i=this.envService.getEnvValue("classliveUrl"),o="1.0";if(i){var a=i.split("=");a.length>1&&(o=a[1])}return"https://azota889.github.io/storage_public/almo/listactive.js?ver="+o}getMNoteVer(){var i=this.envService.getEnvValue("classliveUrl"),o="1.0";if(i){var a=i.split("=");a.length>1&&(o=a[1])}return o}checkValidForSetUpMonitor(){return!0}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO(dl.t))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var bi,V_,H=O(74523),_1=O(2214),Hs=O(11789),Ji=O(17852),d1=O(51362),gn=O(8041),st=O(21076),P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N_={};(function(){var s;function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function o(I,b,C){C||(C=0);var E=Array(16);if("string"==typeof b)for(var R=0;16>R;++R)E[R]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(R=0;16>R;++R)E[R]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;var P=I.g[3],k=(b=I.g[0])+(P^(C=I.g[1])&((R=I.g[2])^P))+E[0]+3614090360&4294967295;k=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=(C=(R=(P=(b=C+(k<<7&4294967295|k>>>25))+((k=P+(R^b&(C^R))+E[1]+3905402710&4294967295)<<12&4294967295|k>>>20))+((k=R+(C^P&(b^C))+E[2]+606105819&4294967295)<<17&4294967295|k>>>15))+((k=C+(b^R&(P^b))+E[3]+3250441966&4294967295)<<22&4294967295|k>>>10))+((k=b+(P^C&(R^P))+E[4]+4118548399&4294967295)<<7&4294967295|k>>>25))+((k=P+(R^b&(C^R))+E[5]+1200080426&4294967295)<<12&4294967295|k>>>20))+((k=R+(C^P&(b^C))+E[6]+2821735955&4294967295)<<17&4294967295|k>>>15))+((k=C+(b^R&(P^b))+E[7]+4249261313&4294967295)<<22&4294967295|k>>>10))+((k=b+(P^C&(R^P))+E[8]+1770035416&4294967295)<<7&4294967295|k>>>25))+((k=P+(R^b&(C^R))+E[9]+2336552879&4294967295)<<12&4294967295|k>>>20))+((k=R+(C^P&(b^C))+E[10]+4294925233&4294967295)<<17&4294967295|k>>>15))+((k=C+(b^R&(P^b))+E[11]+2304563134&4294967295)<<22&4294967295|k>>>10))+((k=b+(P^C&(R^P))+E[12]+1804603682&4294967295)<<7&4294967295|k>>>25))+((k=P+(R^b&(C^R))+E[13]+4254626195&4294967295)<<12&4294967295|k>>>20))+((k=R+(C^P&(b^C))+E[14]+2792965006&4294967295)<<17&4294967295|k>>>15))+((k=C+(b^R&(P^b))+E[15]+1236535329&4294967295)<<22&4294967295|k>>>10))+((k=b+(R^P&(C^R))+E[1]+4129170786&4294967295)<<5&4294967295|k>>>27))+((k=P+(C^R&(b^C))+E[6]+3225465664&4294967295)<<9&4294967295|k>>>23))+((k=R+(b^C&(P^b))+E[11]+643717713&4294967295)<<14&4294967295|k>>>18))+((k=C+(P^b&(R^P))+E[0]+3921069994&4294967295)<<20&4294967295|k>>>12))+((k=b+(R^P&(C^R))+E[5]+3593408605&4294967295)<<5&4294967295|k>>>27))+((k=P+(C^R&(b^C))+E[10]+38016083&4294967295)<<9&4294967295|k>>>23))+((k=R+(b^C&(P^b))+E[15]+3634488961&4294967295)<<14&4294967295|k>>>18))+((k=C+(P^b&(R^P))+E[4]+3889429448&4294967295)<<20&4294967295|k>>>12))+((k=b+(R^P&(C^R))+E[9]+568446438&4294967295)<<5&4294967295|k>>>27))+((k=P+(C^R&(b^C))+E[14]+3275163606&4294967295)<<9&4294967295|k>>>23))+((k=R+(b^C&(P^b))+E[3]+4107603335&4294967295)<<14&4294967295|k>>>18))+((k=C+(P^b&(R^P))+E[8]+1163531501&4294967295)<<20&4294967295|k>>>12))+((k=b+(R^P&(C^R))+E[13]+2850285829&4294967295)<<5&4294967295|k>>>27))+((k=P+(C^R&(b^C))+E[2]+4243563512&4294967295)<<9&4294967295|k>>>23))+((k=R+(b^C&(P^b))+E[7]+1735328473&4294967295)<<14&4294967295|k>>>18))+((k=C+(P^b&(R^P))+E[12]+2368359562&4294967295)<<20&4294967295|k>>>12))+((k=b+(C^R^P)+E[5]+4294588738&4294967295)<<4&4294967295|k>>>28))+((k=P+(b^C^R)+E[8]+2272392833&4294967295)<<11&4294967295|k>>>21))+((k=R+(P^b^C)+E[11]+1839030562&4294967295)<<16&4294967295|k>>>16))+((k=C+(R^P^b)+E[14]+4259657740&4294967295)<<23&4294967295|k>>>9))+((k=b+(C^R^P)+E[1]+2763975236&4294967295)<<4&4294967295|k>>>28))+((k=P+(b^C^R)+E[4]+1272893353&4294967295)<<11&4294967295|k>>>21))+((k=R+(P^b^C)+E[7]+4139469664&4294967295)<<16&4294967295|k>>>16))+((k=C+(R^P^b)+E[10]+3200236656&4294967295)<<23&4294967295|k>>>9))+((k=b+(C^R^P)+E[13]+681279174&4294967295)<<4&4294967295|k>>>28))+((k=P+(b^C^R)+E[0]+3936430074&4294967295)<<11&4294967295|k>>>21))+((k=R+(P^b^C)+E[3]+3572445317&4294967295)<<16&4294967295|k>>>16))+((k=C+(R^P^b)+E[6]+76029189&4294967295)<<23&4294967295|k>>>9))+((k=b+(C^R^P)+E[9]+3654602809&4294967295)<<4&4294967295|k>>>28))+((k=P+(b^C^R)+E[12]+3873151461&4294967295)<<11&4294967295|k>>>21))+((k=R+(P^b^C)+E[15]+530742520&4294967295)<<16&4294967295|k>>>16))+((k=C+(R^P^b)+E[2]+3299628645&4294967295)<<23&4294967295|k>>>9))+((k=b+(R^(C|~P))+E[0]+4096336452&4294967295)<<6&4294967295|k>>>26))+((k=P+(C^(b|~R))+E[7]+1126891415&4294967295)<<10&4294967295|k>>>22))+((k=R+(b^(P|~C))+E[14]+2878612391&4294967295)<<15&4294967295|k>>>17))+((k=C+(P^(R|~b))+E[5]+4237533241&4294967295)<<21&4294967295|k>>>11))+((k=b+(R^(C|~P))+E[12]+1700485571&4294967295)<<6&4294967295|k>>>26))+((k=P+(C^(b|~R))+E[3]+2399980690&4294967295)<<10&4294967295|k>>>22))+((k=R+(b^(P|~C))+E[10]+4293915773&4294967295)<<15&4294967295|k>>>17))+((k=C+(P^(R|~b))+E[1]+2240044497&4294967295)<<21&4294967295|k>>>11))+((k=b+(R^(C|~P))+E[8]+1873313359&4294967295)<<6&4294967295|k>>>26))+((k=P+(C^(b|~R))+E[15]+4264355552&4294967295)<<10&4294967295|k>>>22))+((k=R+(b^(P|~C))+E[6]+2734768916&4294967295)<<15&4294967295|k>>>17))+((k=C+(P^(R|~b))+E[13]+1309151649&4294967295)<<21&4294967295|k>>>11))+((P=(b=C+((k=b+(R^(C|~P))+E[4]+4149444226&4294967295)<<6&4294967295|k>>>26))+((k=P+(C^(b|~R))+E[11]+3174756917&4294967295)<<10&4294967295|k>>>22))^((R=P+((k=R+(b^(P|~C))+E[2]+718787259&4294967295)<<15&4294967295|k>>>17))|~b))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+P&4294967295}function r(I,b){this.h=b;for(var C=[],E=!0,R=I.length-1;0<=R;R--){var P=0|I[R];E&&P==b||(C[R]=P,E=!1)}this.g=C}(function n(I,b){function C(){}C.prototype=b.prototype,I.D=b.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(E,R,P){for(var k=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)k[ve-2]=arguments[ve];return b.prototype[R].apply(E,k)}})(i,function t(){this.blockSize=-1}),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},i.prototype.u=function(I,b){void 0===b&&(b=I.length);for(var C=b-this.blockSize,E=this.B,R=this.h,P=0;P<b;){if(0==R)for(;P<=C;)o(this,I,P),P+=this.blockSize;if("string"==typeof I){for(;P<b;)if(E[R++]=I.charCodeAt(P++),R==this.blockSize){o(this,E),R=0;break}}else for(;P<b;)if(E[R++]=I[P++],R==this.blockSize){o(this,E),R=0;break}}this.h=R,this.o+=b},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;var C=8*this.o;for(b=I.length-8;b<I.length;++b)I[b]=255&C,C/=256;for(this.u(I),I=Array(16),b=C=0;4>b;++b)for(var E=0;32>E;E+=8)I[C++]=this.g[b]>>>E&255;return I};var l={};function c(I){return-128<=I&&128>I?function a(I,b){var C=l;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=b(I)}(I,function(b){return new r([0|b],0>b?-1:0)}):new r([0|I],0>I?-1:0)}function _(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return S(_(-I));for(var b=[],C=1,E=0;I>=C;E++)b[E]=I/C|0,C*=4294967296;return new r(b,0)}var p=c(0),f=c(1),v=c(16777216);function w(I){if(0!=I.h)return!1;for(var b=0;b<I.g.length;b++)if(0!=I.g[b])return!1;return!0}function y(I){return-1==I.h}function S(I){for(var b=I.g.length,C=[],E=0;E<b;E++)C[E]=~I.g[E];return new r(C,~I.h).add(f)}function A(I,b){return I.add(S(b))}function j(I,b){for(;(65535&I[b])!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function V(I,b){this.g=I,this.h=b}function N(I,b){if(w(b))throw Error("division by zero");if(w(I))return new V(p,p);if(y(I))return b=N(S(I),b),new V(S(b.g),S(b.h));if(y(b))return b=N(I,S(b)),new V(S(b.g),b.h);if(30<I.g.length){if(y(I)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var C=f,E=b;0>=E.l(I);)C=X(C),E=X(E);var R=te(C,1),P=te(E,1);for(E=te(E,2),C=te(C,2);!w(E);){var k=P.add(E);0>=k.l(I)&&(R=R.add(C),P=k),E=te(E,1),C=te(C,1)}return b=A(I,R.j(b)),new V(R,b)}for(R=p;0<=I.l(b);){for(C=Math.max(1,Math.floor(I.m()/b.m())),E=48>=(E=Math.ceil(Math.log(C)/Math.LN2))?1:Math.pow(2,E-48),k=(P=_(C)).j(b);y(k)||0<k.l(I);)k=(P=_(C-=E)).j(b);w(P)&&(P=f),R=R.add(P),I=A(I,k)}return new V(R,I)}function X(I){for(var b=I.g.length+1,C=[],E=0;E<b;E++)C[E]=I.i(E)<<1|I.i(E-1)>>>31;return new r(C,I.h)}function te(I,b){var C=b>>5;b%=32;for(var E=I.g.length-C,R=[],P=0;P<E;P++)R[P]=0<b?I.i(P+C)>>>b|I.i(P+C+1)<<32-b:I.i(P+C);return new r(R,I.h)}(s=r.prototype).m=function(){if(y(this))return-S(this).m();for(var I=0,b=1,C=0;C<this.g.length;C++){var E=this.i(C);I+=(0<=E?E:4294967296+E)*b,b*=4294967296}return I},s.toString=function(I){if(2>(I=I||10)||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(y(this))return"-"+S(this).toString(I);for(var b=_(Math.pow(I,6)),C=this,E="";;){var R=N(C,b).g,P=((0<(C=A(C,R.j(b))).g.length?C.g[0]:C.h)>>>0).toString(I);if(w(C=R))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},s.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h},s.l=function(I){return y(I=A(this,I))?-1:w(I)?0:1},s.abs=function(){return y(this)?S(this):this},s.add=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],E=0,R=0;R<=b;R++){var P=E+(65535&this.i(R))+(65535&I.i(R)),k=(P>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);E=k>>>16,C[R]=(k&=65535)<<16|(P&=65535)}return new r(C,-2147483648&C[C.length-1]?-1:0)},s.j=function(I){if(w(this)||w(I))return p;if(y(this))return y(I)?S(this).j(S(I)):S(S(this).j(I));if(y(I))return S(this.j(S(I)));if(0>this.l(v)&&0>I.l(v))return _(this.m()*I.m());for(var b=this.g.length+I.g.length,C=[],E=0;E<2*b;E++)C[E]=0;for(E=0;E<this.g.length;E++)for(var R=0;R<I.g.length;R++){var P=this.i(E)>>>16,k=65535&this.i(E),ve=I.i(R)>>>16,Ue=65535&I.i(R);C[2*E+2*R]+=k*Ue,j(C,2*E+2*R),C[2*E+2*R+1]+=P*Ue,j(C,2*E+2*R+1),C[2*E+2*R+1]+=k*ve,j(C,2*E+2*R+1),C[2*E+2*R+2]+=P*ve,j(C,2*E+2*R+2)}for(E=0;E<b;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=b;E<2*b;E++)C[E]=0;return new r(C,0)},s.A=function(I){return N(this,I).h},s.and=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],E=0;E<b;E++)C[E]=this.i(E)&I.i(E);return new r(C,this.h&I.h)},s.or=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],E=0;E<b;E++)C[E]=this.i(E)|I.i(E);return new r(C,this.h|I.h)},s.xor=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],E=0;E<b;E++)C[E]=this.i(E)^I.i(E);return new r(C,this.h^I.h)},i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,V_=N_.Md5=i,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=_,r.fromString=function d(I,b){if(0==I.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==I.charAt(0))return S(d(I.substring(1),b));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(b,8)),E=p,R=0;R<I.length;R+=8){var P=Math.min(8,I.length-R),k=parseInt(I.substring(R,R+P),b);8>P?(P=_(Math.pow(b,P)),E=E.j(P).add(_(k))):E=(E=E.j(C)).add(_(k))}return E},bi=N_.Integer=r}).apply(typeof P_<"u"?P_:typeof self<"u"?self:typeof window<"u"?window:{});var L_,Js,B_,ga,ml,$_,Q_,q_,fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},On={};(function(){var s,n="function"==typeof Object.defineProperties?Object.defineProperty:function(u,m,h){return u==Array.prototype||u==Object.prototype||(u[m]=h.value),u},i=function t(u){u=["object"==typeof globalThis&&globalThis,u,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof fa&&fa];for(var m=0;m<u.length;++m){var h=u[m];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}(this);!function o(u,m){if(m)e:{var h=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in h))break e;h=h[M]}(m=m(T=h[u=u[u.length-1]]))!=T&&null!=m&&n(h,u,{configurable:!0,writable:!0,value:m})}}("Array.prototype.values",function(u){return u||function(){return function a(u,m){u instanceof String&&(u+="");var h=0,T=!1,M={next:function(){if(!T&&h<u.length){var Q=h++;return{value:m(Q,u[Q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}(this,function(m,h){return h})}});var r=r||{},l=this||self;function c(u){var m=typeof u;return"array"==(m="object"!=m?m:u?Array.isArray(u)?"array":m:"null")||"object"==m&&"number"==typeof u.length}function _(u){var m=typeof u;return"object"==m&&null!=u||"function"==m}function d(u,m,h){return u.call.apply(u.bind,arguments)}function p(u,m,h){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function f(u,m,h){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:p).apply(null,arguments)}function v(u,m){var h=Array.prototype.slice.call(arguments,1);return function(){var T=h.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function w(u,m){function h(){}h.prototype=m.prototype,u.aa=m.prototype,u.prototype=new h,u.prototype.constructor=u,u.Qb=function(T,M,Q){for(var le=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)le[Ke-2]=arguments[Ke];return m.prototype[M].apply(T,le)}}function y(u){const m=u.length;if(0<m){const h=Array(m);for(let T=0;T<m;T++)h[T]=u[T];return h}return[]}function S(u,m){for(let h=1;h<arguments.length;h++){const T=arguments[h];if(c(T)){const M=u.length||0,Q=T.length||0;u.length=M+Q;for(let le=0;le<Q;le++)u[M+le]=T[le]}else u.push(T)}}function j(u){return/^[\s\xa0]*$/.test(u)}function V(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var X=!(-1==V().indexOf("Gecko")||-1!=V().toLowerCase().indexOf("webkit")&&-1==V().indexOf("Edge")||-1!=V().indexOf("Trident")||-1!=V().indexOf("MSIE")||-1!=V().indexOf("Edge"));function te(u,m,h){for(const T in u)m.call(h,u[T],T,u)}function b(u){const m={};for(const h in u)m[h]=u[h];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,m){let h,T;for(let M=1;M<arguments.length;M++){for(h in T=arguments[M],T)u[h]=T[h];for(let Q=0;Q<C.length;Q++)h=C[Q],Object.prototype.hasOwnProperty.call(T,h)&&(u[h]=T[h])}}function R(u){var m=1;u=u.split(":");const h=[];for(;0<m&&u.length;)h.push(u.shift()),m--;return u.length&&h.push(u.join(":")),h}function P(u){l.setTimeout(()=>{throw u},0)}function k(){var u=wt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}var Ue=new class A{constructor(m,h){this.i=m,this.j=h,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}(()=>new Rt,u=>u.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(m,h){this.h=m,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let $t,mt=!1,wt=new class ve{constructor(){this.h=this.g=null}add(m,h){const T=Ue.get();T.set(m,h),this.h?this.h.next=T:this.g=T,this.h=T}},nt=()=>{const u=l.Promise.resolve(void 0);$t=()=>{u.then(Je)}};var Je=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(h){P(h)}var m=Ue;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}mt=!1};function Xe(){this.s=this.s,this.C=this.C}function Ne(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Xe.prototype.s=!1,Xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ne.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const h=()=>{};l.addEventListener("test",h,m),l.removeEventListener("test",h,m)}catch{}return u}();function Ve(u,m){if(Ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var h=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(X){e:{try{N(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else"mouseover"==h?m=u.fromElement:"mouseout"==h&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType="string"==typeof u.pointerType?u.pointerType:je[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ve.aa.h.call(this)}}w(Ve,Ne);var je={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Cn(u,m,h,T,M){this.listener=u,this.proxy=null,this.src=m,this.type=h,this.capture=!!T,this.ha=M,this.key=++Le,this.da=this.fa=!1}function kn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sn(u){this.src=u,this.g={},this.h=0}function hn(u,m){var h=m.type;if(h in u.g){var Q,T=u.g[h],M=Array.prototype.indexOf.call(T,m,void 0);(Q=0<=M)&&Array.prototype.splice.call(T,M,1),Q&&(kn(m),0==u.g[h].length&&(delete u.g[h],u.h--))}}function _n(u,m,h,T){for(var M=0;M<u.length;++M){var Q=u[M];if(!Q.da&&Q.listener==m&&Q.capture==!!h&&Q.ha==T)return M}return-1}sn.prototype.add=function(u,m,h,T,M){var Q=u.toString();(u=this.g[Q])||(u=this.g[Q]=[],this.h++);var le=_n(u,m,T,M);return-1<le?(m=u[le],h||(m.fa=!1)):((m=new Cn(m,this.src,Q,!!T,M)).fa=h,u.push(m)),m};var qi="closure_lm_"+(1e6*Math.random()|0),g_={};function og(u,m,h,T,M){if(T&&T.once)return rg(u,m,h,T,M);if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)og(u,m[Q],h,T,M);return null}return h=v_(h),u&&u[It]?u.K(m,h,_(T)?!!T.capture:!!T,M):ag(u,m,h,!1,T,M)}function ag(u,m,h,T,M,Q){if(!m)throw Error("Invalid event type");var le=_(M)?!!M.capture:!!M,Ke=b_(u);if(Ke||(u[qi]=Ke=new sn(u)),(h=Ke.add(m,h,T,le,Q)).proxy)return h;if(T=function vz(){const m=yz;return function u(h){return m.call(u.src,u.listener,h)}}(),h.proxy=T,T.src=u,T.listener=h,u.addEventListener)Ce||(M=le),void 0===M&&(M=!1),u.addEventListener(m.toString(),T,M);else if(u.attachEvent)u.attachEvent(cg(m.toString()),T);else{if(!u.addListener||!u.removeListener)throw Error("addEventListener and attachEvent are unavailable.");u.addListener(T)}return h}function rg(u,m,h,T,M){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)rg(u,m[Q],h,T,M);return null}return h=v_(h),u&&u[It]?u.L(m,h,_(T)?!!T.capture:!!T,M):ag(u,m,h,!0,T,M)}function lg(u,m,h,T,M){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)lg(u,m[Q],h,T,M);else T=_(T)?!!T.capture:!!T,h=v_(h),u&&u[It]?(u=u.i,(m=String(m).toString())in u.g&&-1<(h=_n(Q=u.g[m],h,T,M))&&(kn(Q[h]),Array.prototype.splice.call(Q,h,1),0==Q.length&&(delete u.g[m],u.h--))):u&&(u=b_(u))&&(m=u.g[m.toString()],u=-1,m&&(u=_n(m,h,T,M)),(h=-1<u?m[u]:null)&&T_(h))}function T_(u){if("number"!=typeof u&&u&&!u.da){var m=u.src;if(m&&m[It])hn(m.i,u);else{var h=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(h,T,u.capture):m.detachEvent?m.detachEvent(cg(h),T):m.addListener&&m.removeListener&&m.removeListener(T),(h=b_(m))?(hn(h,u),0==h.h&&(h.src=null,m[qi]=null)):kn(u)}}}function cg(u){return u in g_?g_[u]:g_[u]="on"+u}function yz(u,m){if(u.da)u=!0;else{m=new Ve(m,this);var h=u.listener,T=u.ha||u.src;u.fa&&T_(u),u=h.call(T,m)}return u}function b_(u){return(u=u[qi])instanceof sn?u:null}var x_="__closure_events_fn_"+(1e9*Math.random()>>>0);function v_(u){return"function"==typeof u?u:(u[x_]||(u[x_]=function(m){return u.handleEvent(m)}),u[x_])}function Qt(){Xe.call(this),this.i=new sn(this),this.M=this,this.F=null}function Wt(u,m){var h,T=u.F;if(T)for(h=[];T;T=T.F)h.push(T);if(u=u.M,T=m.type||m,"string"==typeof m)m=new Ne(m,u);else if(m instanceof Ne)m.target=m.target||u;else{var M=m;E(m=new Ne(T,u),M)}if(M=!0,h)for(var Q=h.length-1;0<=Q;Q--){var le=m.g=h[Q];M=Pr(le,T,!0,m)&&M}if(M=Pr(le=m.g=u,T,!0,m)&&M,M=Pr(le,T,!1,m)&&M,h)for(Q=0;Q<h.length;Q++)M=Pr(le=m.g=h[Q],T,!1,m)&&M}function Pr(u,m,h,T){if(!(m=u.i.g[String(m)]))return!0;m=m.concat();for(var M=!0,Q=0;Q<m.length;++Q){var le=m[Q];if(le&&!le.da&&le.capture==h){var Ke=le.listener,Mt=le.ha||le.src;le.fa&&hn(u.i,le),M=!1!==Ke.call(Mt,T)&&M}}return M&&!T.defaultPrevented}function ug(u,m,h){if("function"==typeof u)h&&(u=f(u,h));else{if(!u||"function"!=typeof u.handleEvent)throw Error("Invalid listener argument");u=f(u.handleEvent,u)}return 2147483647<Number(m)?-1:l.setTimeout(u,m||0)}function _g(u){u.g=ug(()=>{u.g=null,u.i&&(u.i=!1,_g(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}w(Qt,Xe),Qt.prototype[It]=!0,Qt.prototype.removeEventListener=function(u,m,h,T){lg(this,u,m,h,T)},Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var m,u=this.i;for(m in u.g){for(var h=u.g[m],T=0;T<h.length;T++)kn(h[T]);delete u.g[m],u.h--}}this.F=null},Qt.prototype.K=function(u,m,h,T){return this.i.add(String(u),m,!1,h,T)},Qt.prototype.L=function(u,m,h,T){return this.i.add(String(u),m,!0,h,T)};class Sz extends Xe{constructor(m,h){super(),this.m=m,this.l=h,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_g(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bo(u){Xe.call(this),this.h=u,this.g={}}w(Bo,Xe);var dg=[];function mg(u){te(u.g,function(m,h){this.g.hasOwnProperty(h)&&T_(m)},u),u.g={}}Bo.prototype.N=function(){Bo.aa.N.call(this),mg(this)},Bo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var y_=l.JSON.stringify,wz=l.JSON.parse,Iz=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function S_(){}function hg(){}S_.prototype.h=null;var $o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function w_(){Ne.call(this,"d")}function I_(){Ne.call(this,"c")}w(w_,Ne),w(I_,Ne);var Yi={},fg=null;function Nr(){return fg=fg||new Qt}function gg(u){Ne.call(this,Yi.La,u)}function Qo(u){const m=Nr();Wt(m,new gg(m))}function Tg(u,m){Ne.call(this,Yi.STAT_EVENT,u),this.stat=m}function Ht(u){const m=Nr();Wt(m,new Tg(m,u))}function bg(u,m){Ne.call(this,Yi.Ma,u),this.size=m}function qo(u,m){if("function"!=typeof u)throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Yo(){this.g=!0}function Bs(u,m,h,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+function Az(u,m){if(!u.g)return m;if(!m)return null;try{var h=JSON.parse(m);if(h)for(u=0;u<h.length;u++)if(Array.isArray(h[u])){var T=h[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var Q=M[0];if("noop"!=Q&&"stop"!=Q&&"close"!=Q)for(var le=1;le<M.length;le++)M[le]=""}}}return y_(h)}catch{return m}}(u,h)+(T?" "+T:"")})}Yi.La="serverreachability",w(gg,Ne),Yi.STAT_EVENT="statevent",w(Tg,Ne),Yi.Ma="timingevent",w(bg,Ne),Yo.prototype.xa=function(){this.g=!1},Yo.prototype.info=function(){};var C_,Vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Lr(){}function ui(u,m,h,T){this.j=u,this.i=m,this.l=h,this.R=T||1,this.U=new Bo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vg}function vg(){this.i=null,this.g="",this.h=!1}w(Lr,S_),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},C_=new Lr;var yg={},k_={};function E_(u,m,h){u.L=1,u.v=qr(Ln(m)),u.m=h,u.P=!0,Sg(u,null)}function Sg(u,m){u.F=Date.now(),Br(u),u.A=Ln(u.v);var h=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Gg(h.i,"t",T),u.C=0,h=u.j.J,u.h=new vg,u.g=t1(u.j,h?m:null,!u.m),0<u.O&&(u.M=new Sz(f(u.Y,u,u.g),u.O)),m=u.U,h=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(dg[0]=M.toString()),M=dg);for(var Q=0;Q<M.length;Q++){var le=og(h,M[Q],T||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Qo(),function Cz(u,m,h,T,M,Q){u.info(function(){if(u.g)if(Q)for(var le="",Ke=Q.split("&"),Mt=0;Mt<Ke.length;Mt++){var Qe=Ke[Mt].split("=");if(1<Qe.length){var qt=Qe[0];Qe=Qe[1];var Yt=qt.split("_");le=2<=Yt.length&&"type"==Yt[1]?le+(qt+"=")+Qe+"&":le+(qt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+m+"\n"+h+"\n"+le})}(u.i,u.u,u.A,u.l,u.R,u.m)}function wg(u){return!!u.g&&"GET"==u.u&&2!=u.L&&u.j.Ca}function Oz(u,m){var h=u.C,T=m.indexOf("\n",h);return-1==T?k_:(h=Number(m.substring(h,T)),isNaN(h)?yg:(T+=1)+h>m.length?k_:(m=m.slice(T,T+h),u.C=T+h,m))}function Br(u){u.S=Date.now()+u.I,Ig(u,u.I)}function Ig(u,m){if(null!=u.B)throw Error("WatchDog timer not null");u.B=qo(f(u.ba,u),m)}function A_(u){u.B&&(l.clearTimeout(u.B),u.B=null)}function Uo(u){0==u.j.G||u.J||Jg(u.j,u)}function Ui(u){A_(u);var m=u.M;m&&"function"==typeof m.ma&&m.ma(),u.M=null,mg(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function O_(u,m){try{var h=u.j;if(0!=h.G&&(h.g==u||R_(h.h,u)))if(!u.K&&R_(h.h,u)&&3==h.G){try{var T=h.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&3==T.length){var M=T;if(0==M[0]){e:if(!h.u){if(h.g){if(!(h.g.F+3e3<u.F))break e;Hr(h),Xr(h)}D_(h),Ht(18)}}else h.za=M[1],0<h.za-h.T&&37500>M[2]&&h.F&&0==h.v&&!h.C&&(h.C=qo(f(h.Za,h),6e3));if(1>=Eg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Wi(h,11)}else if((u.K||h.g==u)&&Hr(h),!j(m))for(M=h.Da.g.parse(m),m=0;m<M.length;m++){let Qe=M[m];if(h.T=Qe[0],Qe=Qe[1],2==h.G)if("c"==Qe[0]){h.K=Qe[1],h.ia=Qe[2];const qt=Qe[3];null!=qt&&(h.la=qt,h.j.info("VER="+h.la));const Yt=Qe[4];null!=Yt&&(h.Aa=Yt,h.j.info("SVER="+h.Aa));const qs=Qe[5];null!=qs&&"number"==typeof qs&&0<qs&&(h.L=T=1.5*qs,h.j.info("backChannelRequestTimeoutMs_="+T)),T=h;const fn=u.g;if(fn){const Kr=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var Q=T.h;Q.g||-1==Kr.indexOf("spdy")&&-1==Kr.indexOf("quic")&&-1==Kr.indexOf("h2")||(Q.j=Q.l,Q.g=new Set,Q.h&&(F_(Q,Q.h),Q.h=null))}if(T.D){const G_=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;G_&&(T.ya=G_,it(T.I,T.D,G_))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-u.F,h.j.info("Handshake RTT: "+h.R+"ms"));var le=u;if((T=h).qa=e1(T,T.J?T.ia:null,T.W),le.K){Ag(T.h,le);var Ke=le,Mt=T.L;Mt&&(Ke.I=Mt),Ke.B&&(A_(Ke),Br(Ke)),T.g=le}else Wg(T);0<h.i.length&&Wr(h)}else"stop"!=Qe[0]&&"close"!=Qe[0]||Wi(h,7);else 3==h.G&&("stop"==Qe[0]||"close"==Qe[0]?"stop"==Qe[0]?Wi(h,7):z_(h):"noop"!=Qe[0]&&h.l&&h.l.ta(Qe),h.v=0)}Qo()}catch{}}ui.prototype.ca=function(u){u=u.target;const m=this.M;m&&3==Bn(u)?m.j():this.Y(u)},ui.prototype.Y=function(u){try{if(u==this.g)e:{const Yt=Bn(this.g);var m=this.g.Ba();if(this.g.Z(),!(3>Yt)&&(3!=Yt||this.g&&(this.h.h||this.g.oa()||Qg(this.g)))){this.J||4!=Yt||7==m||Qo(),A_(this);var h=this.g.Z();this.X=h;t:if(wg(this)){var T=Qg(this.g);u="";var M=T.length,Q=4==Bn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),Uo(this);var le="";break t}this.h.i=new l.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(Q&&m==M-1)});T.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=200==h,function kz(u,m,h,T,M,Q,le){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+m+"\n"+h+"\n"+Q+" "+le})}(this.i,this.u,this.A,this.l,this.R,Yt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Mt=this.g;if((Ke=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Ke)){var Qe=Ke;break t}}Qe=null}if(!(h=Qe)){this.o=!1,this.s=3,Ht(12),Ui(this),Uo(this);break e}Bs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,O_(this,h)}if(this.P){let fn;for(h=!0;!this.J&&this.C<le.length;){if(fn=Oz(this,le),fn==k_){4==Yt&&(this.s=4,Ht(14),h=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}if(fn==yg){this.s=4,Ht(15),Bs(this.i,this.l,le,"[Invalid Chunk]"),h=!1;break}Bs(this.i,this.l,fn,null),O_(this,fn)}if(wg(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Yt||0!=le.length||this.h.h||(this.s=1,Ht(16),h=!1),this.o=this.o&&h,h){if(0<le.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),M_(qt),qt.M=!0,Ht(11))}}else Bs(this.i,this.l,le,"[Invalid Chunked Response]"),Ui(this),Uo(this)}else Bs(this.i,this.l,le,null),O_(this,le);4==Yt&&Ui(this),this.o&&!this.J&&(4==Yt?Jg(this.j,this):(this.o=!1,Br(this)))}else(function Uz(u){const m={};u=(u.g&&2<=Bn(u)&&u.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<u.length;T++){if(j(u[T]))continue;var h=R(u[T]);const M=h[0];if("string"!=typeof(h=h[1]))continue;h=h.trim();const Q=m[M]||[];m[M]=Q,Q.push(h)}!function I(u,m){for(const h in u)m.call(void 0,u[h],h,u)}(m,function(T){return T.join(", ")})})(this.g),400==h&&0<le.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),Ui(this),Uo(this)}}}catch{}},ui.prototype.cancel=function(){this.J=!0,Ui(this)},ui.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(function Ez(u,m){u.info(function(){return"TIMEOUT: "+m})}(this.i,this.A),2!=this.L&&(Qo(),Ht(17)),Ui(this),this.s=2,Uo(this)):Ig(this,this.S-u)};var Rz=class{constructor(u,m){this.g=u,this.map=m}};function Cg(u){this.l=u||10,u=l.PerformanceNavigationTiming?0<(u=l.performance.getEntriesByType("navigation")).length&&("hq"==u[0].nextHopProtocol||"h2"==u[0].nextHopProtocol):!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kg(u){return!!u.h||!!u.g&&u.g.size>=u.j}function Eg(u){return u.h?1:u.g?u.g.size:0}function R_(u,m){return u.h?u.h==m:!!u.g&&u.g.has(m)}function F_(u,m){u.g?u.g.add(m):u.h=m}function Ag(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}function Og(u){if(null!=u.h)return u.i.concat(u.h.D);if(null!=u.g&&0!==u.g.size){let m=u.i;for(const h of u.g.values())m=m.concat(h.D);return m}return y(u.i)}function Rg(u,m){if(u.forEach&&"function"==typeof u.forEach)u.forEach(m,void 0);else if(c(u)||"string"==typeof u)Array.prototype.forEach.call(u,m,void 0);else for(var h=function jz(u){if(u.na&&"function"==typeof u.na)return u.na();if(!u.V||"function"!=typeof u.V){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||"string"==typeof u){var m=[];u=u.length;for(var h=0;h<u;h++)m.push(h);return m}m=[],h=0;for(const T in u)m[h++]=T;return m}}}(u),T=function Fz(u){if(u.V&&"function"==typeof u.V)return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if("string"==typeof u)return u.split("");if(c(u)){for(var m=[],h=u.length,T=0;T<h;T++)m.push(u[T]);return m}for(T in m=[],h=0,u)m[h++]=u[T];return m}(u),M=T.length,Q=0;Q<M;Q++)m.call(void 0,T[Q],h&&h[Q],u)}Cg.prototype.cancel=function(){if(this.i=Og(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const u of this.g.values())u.cancel();this.g.clear()}};var Fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xi){this.h=u.h,$r(this,u.j),this.o=u.o,this.g=u.g,Qr(this,u.s),this.l=u.l;var m=u.i,h=new Ho;h.i=m.i,m.g&&(h.g=new Map(m.g),h.h=m.h),jg(this,h),this.m=u.m}else u&&(m=String(u).match(Fg))?(this.h=!1,$r(this,m[1]||"",!0),this.o=Xo(m[2]||""),this.g=Xo(m[3]||"",!0),Qr(this,m[4]),this.l=Xo(m[5]||"",!0),jg(this,m[6]||"",!0),this.m=Xo(m[7]||"")):(this.h=!1,this.i=new Ho(null,this.h))}function Ln(u){return new Xi(u)}function $r(u,m,h){u.j=h?Xo(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Qr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function jg(u,m,h){m instanceof Ho?(u.i=m,function Vz(u,m){m&&!u.j&&(_i(u),u.i=null,u.g.forEach(function(h,T){var M=T.toLowerCase();T!=M&&(Dg(this,T),Gg(this,M,h))},u)),u.j=m}(u.i,u.h)):(h||(m=Wo(m,Pz)),u.i=new Ho(m,u.h))}function it(u,m,h){u.i.set(m,h)}function qr(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xo(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wo(u,m,h){return"string"==typeof u?(u=encodeURI(u).replace(m,Dz),h&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Dz(u){return"%"+((u=u.charCodeAt(0))>>4&15).toString(16)+(15&u).toString(16)}Xi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Wo(m,zg,!0),":");var h=this.g;return(h||"file"==m)&&(u.push("//"),(m=this.o)&&u.push(Wo(m,zg,!0),"@"),u.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(h=this.s)&&u.push(":",String(h))),(h=this.l)&&(this.g&&"/"!=h.charAt(0)&&u.push("/"),u.push(Wo(h,"/"==h.charAt(0)?Gz:Mz,!0))),(h=this.i.toString())&&u.push("?",h),(h=this.m)&&u.push("#",Wo(h,Nz)),u.join("")};var zg=/[#\/\?@]/g,Mz=/[#\?:]/g,Gz=/[#\?]/g,Pz=/[#\?@]/g,Nz=/#/g;function Ho(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function _i(u){u.g||(u.g=new Map,u.h=0,u.i&&function zz(u,m){if(u){u=u.split("&");for(var h=0;h<u.length;h++){var T=u[h].indexOf("="),M=null;if(0<=T){var Q=u[h].substring(0,T);M=u[h].substring(T+1)}else Q=u[h];m(Q,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}(u.i,function(m,h){u.add(decodeURIComponent(m.replace(/\+/g," ")),h)}))}function Dg(u,m){_i(u),m=$s(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Mg(u,m){return _i(u),m=$s(u,m),u.g.has(m)}function Gg(u,m,h){Dg(u,m),0<h.length&&(u.i=null,u.g.set($s(u,m),y(h)),u.h+=h.length)}function $s(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function di(u,m,h,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(h)}catch{}}function $z(){this.g=new Iz}function Qz(u,m,h){const T=h||"";try{Rg(u,function(M,Q){let le=M;_(M)&&(le=y_(M)),m.push(T+Q+"="+encodeURIComponent(le))})}catch(M){throw m.push(T+"type="+encodeURIComponent("_badmap")),M}}function Jo(u){this.l=u.Ub||null,this.j=u.eb||!1}function Yr(u,m){Qt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pg(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}function Ko(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zo(u)}function Zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}function Ng(u){let m="";return te(u,function(h,T){m+=T,m+=":",m+=h,m+="\r\n"}),m}function j_(u,m,h){e:{for(T in h){var T=!1;break e}T=!0}T||(h=Ng(h),"string"==typeof u?null!=h&&encodeURIComponent(String(h)):it(u,m,h))}function ht(u){Qt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(s=Ho.prototype).add=function(u,m){_i(this),this.i=null,u=$s(this,u);var h=this.g.get(u);return h||this.g.set(u,h=[]),h.push(m),this.h+=1,this},s.forEach=function(u,m){_i(this),this.g.forEach(function(h,T){h.forEach(function(M){u.call(m,M,T,this)},this)},this)},s.na=function(){_i(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),h=[];for(let T=0;T<m.length;T++){const M=u[T];for(let Q=0;Q<M.length;Q++)h.push(m[T])}return h},s.V=function(u){_i(this);let m=[];if("string"==typeof u)Mg(this,u)&&(m=m.concat(this.g.get($s(this,u))));else{u=Array.from(this.g.values());for(let h=0;h<u.length;h++)m=m.concat(u[h])}return m},s.set=function(u,m){return _i(this),this.i=null,Mg(this,u=$s(this,u))&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u&&0<(u=this.V(u)).length?String(u[0]):m},s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var h=0;h<m.length;h++){var T=m[h];const Q=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var M=Q;""!==le[T]&&(M+="="+encodeURIComponent(String(le[T]))),u.push(M)}}return this.i=u.join("&")},w(Jo,S_),Jo.prototype.g=function(){return new Yr(this.l,this.j)},Jo.prototype.i=function(u){return function(){return u}}({}),w(Yr,Qt),(s=Yr.prototype).open=function(u,m){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Zo(this)},s.send=function(u){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ko(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zo(this)),this.g&&(this.readyState=3,Zo(this),this.g)))if("arraybuffer"===this.responseType)u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pg(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))},s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ko(this):Zo(this),3==this.readyState&&Pg(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Ko(this))},s.Qa=function(u){this.g&&(this.response=u,Ko(this))},s.ga=function(){this.g&&Ko(this)},s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var h=m.next();!h.done;)u.push((h=h.value)[0]+": "+h[1]),h=m.next();return u.join("\r\n")},Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(u){this.m=u?"include":"same-origin"}}),w(ht,Qt);var qz=/^https?$/i,Yz=["POST","PUT"];function Vg(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Lg(u),Ur(u)}function Lg(u){u.A||(u.A=!0,Wt(u,"complete"),Wt(u,"error"))}function Bg(u){if(u.h&&typeof r<"u"&&(!u.v[1]||4!=Bn(u)||2!=u.Z()))if(u.u&&4==Bn(u))ug(u.Ea,0,u);else if(Wt(u,"readystatechange"),4==Bn(u)){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var h;if(!(h=m)){var T;if(T=0===le){var M=String(u.D).match(Fg)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),T=!qz.test(M?M.toLowerCase():"")}h=T}if(h)Wt(u,"complete"),Wt(u,"success");else{u.m=6;try{var Q=2<Bn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",Lg(u)}}finally{Ur(u)}}}function Ur(u,m){if(u.g){$g(u);const h=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Wt(u,"ready");try{h.onreadystatechange=T}catch{}}}function $g(u){u.I&&(l.clearTimeout(u.I),u.I=null)}function Bn(u){return u.g?u.g.readyState:0}function Qg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(u,m,h){return h&&h.internalChannelParams&&h.internalChannelParams[u]||m}function qg(u){this.Aa=0,this.i=[],this.j=new Yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,u),this.cb=ea("retryDelaySeedMs",1e4,u),this.Wa=ea("forwardChannelMaxRetries",2,u),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Cg(u&&u.concurrentRequestLimit),this.Da=new $z,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function z_(u){if(Yg(u),3==u.G){var m=u.U++,h=Ln(u.I);if(it(h,"SID",u.K),it(h,"RID",m),it(h,"TYPE","terminate"),ta(u,h),(m=new ui(u,u.j,m)).L=2,m.v=qr(Ln(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!h&&l.Image&&((new Image).src=m.v,h=!0),h||(m.g=t1(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Br(m)}Zg(u)}function Xr(u){u.g&&(M_(u),u.g.cancel(),u.g=null)}function Yg(u){Xr(u),u.u&&(l.clearTimeout(u.u),u.u=null),Hr(u),u.h.cancel(),u.s&&("number"==typeof u.s&&l.clearTimeout(u.s),u.s=null)}function Wr(u){if(!kg(u.h)&&!u.s){u.s=!0;var m=u.Ga;$t||nt(),mt||($t(),mt=!0),wt.add(m,u),u.B=0}}function Ug(u,m){var h;h=m?m.l:u.U++;const T=Ln(u.I);it(T,"SID",u.K),it(T,"RID",h),it(T,"AID",u.T),ta(u,T),u.m&&u.o&&j_(T,u.m,u.o),h=new ui(u,u.j,h,u.B+1),null===u.m&&(h.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Xg(u,h,1e3),h.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),F_(u.h,h),E_(h,T,m)}function ta(u,m){u.H&&te(u.H,function(h,T){it(m,T,h)}),u.l&&Rg({},function(h,T){it(m,T,h)})}function Xg(u,m,h){h=Math.min(u.i.length,h);var T=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let Q=-1;for(;;){const le=["count="+h];-1==Q?0<h?(Q=M[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let Ke=!0;for(let Mt=0;Mt<h;Mt++){let Qe=M[Mt].g;const qt=M[Mt].map;if(Qe-=Q,0>Qe)Q=Math.max(0,M[Mt].g-100),Ke=!1;else try{Qz(qt,le,"req"+Qe+"_")}catch{T&&T(qt)}}if(Ke){T=le.join("&");break e}}}return u=u.i.splice(0,h),m.D=u,T}function Wg(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;$t||nt(),mt||($t(),mt=!0),wt.add(m,u),u.v=0}}function D_(u){return!(u.g||u.u||3<=u.v||(u.Y++,u.u=qo(f(u.Fa,u),Kg(u,u.v)),u.v++,0))}function M_(u){null!=u.A&&(l.clearTimeout(u.A),u.A=null)}function Hg(u){u.g=new ui(u,u.j,"rpc",u.Y),null===u.m&&(u.g.H=u.o),u.g.O=0;var m=Ln(u.qa);it(m,"RID","rpc"),it(m,"SID",u.K),it(m,"AID",u.T),it(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(m,"TO",u.ja),it(m,"TYPE","xmlhttp"),ta(u,m),u.m&&u.o&&j_(m,u.m,u.o),u.L&&(u.g.I=u.L);var h=u.g;u=u.ia,h.L=1,h.v=qr(Ln(m)),h.m=null,h.P=!0,Sg(h,u)}function Hr(u){null!=u.C&&(l.clearTimeout(u.C),u.C=null)}function Jg(u,m){var h=null;if(u.g==m){Hr(u),M_(u),u.g=null;var T=2}else{if(!R_(u.h,m))return;h=m.D,Ag(u.h,m),T=1}if(0!=u.G)if(m.o)if(1==T){h=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;Wt(T=Nr(),new bg(T,h)),Wr(u)}else Wg(u);else if(3==(M=m.s)||0==M&&0<m.X||!(1==T&&function Xz(u,m){return!(Eg(u.h)>=u.h.j-(u.s?1:0)||(u.s?(u.i=m.D.concat(u.i),0):1==u.G||2==u.G||u.B>=(u.Va?0:u.Wa)||(u.s=qo(f(u.Ga,u,m),Kg(u,u.B)),u.B++,0)))}(u,m)||2==T&&D_(u)))switch(h&&0<h.length&&(m=u.h,m.i=m.i.concat(h)),M){case 1:Wi(u,5);break;case 4:Wi(u,10);break;case 3:Wi(u,6);break;default:Wi(u,2)}}function Kg(u,m){let h=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(h*=2),h*m}function Wi(u,m){if(u.j.info("Error code "+m),2==m){var h=f(u.fb,u),T=u.Xa;const M=!T;T=new Xi(T||"//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||$r(T,"https"),qr(T),M?function Lz(u,m){const h=new Yo;if(l.Image){const T=new Image;T.onload=v(di,h,"TestLoadImage: loaded",!0,m,T),T.onerror=v(di,h,"TestLoadImage: error",!1,m,T),T.onabort=v(di,h,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(di,h,"TestLoadImage: timeout",!1,m,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}(T.toString(),h):function Bz(u,m){new Yo;const T=new AbortController,M=setTimeout(()=>{T.abort(),di(0,0,!1,m)},1e4);fetch(u,{signal:T.signal}).then(Q=>{clearTimeout(M),di(0,0,!!Q.ok,m)}).catch(()=>{clearTimeout(M),di(0,0,!1,m)})}(T.toString(),h)}else Ht(2);u.G=0,u.l&&u.l.sa(m),Zg(u),Yg(u)}function Zg(u){if(u.G=0,u.ka=[],u.l){const m=Og(u.h);(0!=m.length||0!=u.i.length)&&(S(u.ka,m),S(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function e1(u,m,h){var T=h instanceof Xi?Ln(h):new Xi(h);if(""!=T.g)m&&(T.g=m+"."+T.g),Qr(T,T.s);else{var M=l.location;T=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var Q=new Xi(null);T&&$r(Q,T),m&&(Q.g=m),M&&Qr(Q,M),h&&(Q.l=h),T=Q}return m=u.ya,(h=u.D)&&m&&it(T,h,m),it(T,"VER",u.la),ta(u,T),T}function t1(u,m,h){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return(m=new ht(u.Ca&&!u.pa?new Jo({eb:h}):u.pa)).Ha(u.J),m}function n1(){}function Jr(){}function on(u,m){Qt.call(this),this.g=new qg(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!j(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!j(m)&&(this.g.D=m,null!==(u=this.h)&&m in u&&m in(u=this.h)&&delete u[m]),this.j=new Qs(this)}function i1(u){w_.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const h in m){u=h;break e}u=void 0}(this.i=u)&&(u=this.i,m=null!==m&&u in m?m[u]:void 0),this.data=m}else this.data=u}function s1(){I_.call(this),this.status=1}function Qs(u){this.g=u}(s=ht.prototype).Ha=function(u){this.J=u},s.ea=function(u,m,h,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():C_.g(),this.v=function pg(u){return u.h||(u.h=u.i())}(this.o?this.o:C_),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){return void Vg(this,Q)}if(u=h||"",h=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)h.set(M,T[M]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const Q of T.keys())h.set(Q,T.get(Q))}T=Array.from(h.keys()).find(Q=>"content-type"==Q.toLowerCase()),M=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Yz,m,void 0))||T||M||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of h)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$g(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Vg(this,Q)}},s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Wt(this,"complete"),Wt(this,"abort"),Ur(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),ht.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Bg(this):this.bb())},s.bb=function(){Bg(this)},s.isActive=function(){return!!this.g},s.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&0==m.indexOf(u)&&(m=m.substring(u.length)),wz(m)}},s.Ba=function(){return this.m},s.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(s=qg.prototype).la=8,s.G=1,s.connect=function(u,m,h,T){Ht(0),this.W=u,this.H=m||{},h&&void 0!==T&&(this.H.OSID=h,this.H.OAID=T),this.F=this.X,this.I=e1(this,null,this.W),Wr(this)},s.Ga=function(u){if(this.s)if(this.s=null,1==this.G){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new ui(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=b(Q),E(Q,this.S)):Q=this.S),null!==this.m||this.O||(M.H=Q,Q=null),this.P)e:{for(var m=0,h=0;h<this.i.length;h++){var T=this.i[h];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(m+=T)){m=h;break e}if(4096===m||h===this.i.length-1){m=h+1;break e}}m=1e3}else m=1e3;m=Xg(this,M,m),it(h=Ln(this.I),"RID",u),it(h,"CVER",22),this.D&&it(h,"X-HTTP-Session-Id",this.D),ta(this,h),Q&&(this.O?m="headers="+encodeURIComponent(String(Ng(Q)))+"&"+m:this.m&&j_(h,this.m,Q)),F_(this.h,M),this.Ua&&it(h,"TYPE","init"),this.P?(it(h,"$req",m),it(h,"SID","null"),M.T=!0,E_(M,h,null)):E_(M,h,m),this.G=2}}else 3==this.G&&(u?Ug(this,u):0==this.i.length||kg(this.h)||Ug(this))},s.Fa=function(){if(this.u=null,Hg(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qo(f(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Xr(this),Hg(this))},s.Za=function(){null!=this.C&&(this.C=null,Xr(this),D_(this),Ht(19))},s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))},s.isActive=function(){return!!this.l&&this.l.isActive(this)},(s=n1.prototype).ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){},Jr.prototype.g=function(u,m){return new on(u,m)},w(on,Qt),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){z_(this.g)},on.prototype.o=function(u){var m=this.g;if("string"==typeof u){var h={};h.__data__=u,u=h}else this.u&&((h={}).__data__=y_(u),u=h);m.i.push(new Rz(m.Ya++,u)),3==m.G&&Wr(m)},on.prototype.N=function(){this.g.l=null,delete this.j,z_(this.g),delete this.g,on.aa.N.call(this)},w(i1,w_),w(s1,I_),w(Qs,n1),Qs.prototype.ua=function(){Wt(this.g,"a")},Qs.prototype.ta=function(u){Wt(this.g,new i1(u))},Qs.prototype.sa=function(u){Wt(this.g,new s1)},Qs.prototype.ra=function(){Wt(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,q_=On.createWebChannelTransport=function(){return new Jr},Q_=On.getStatEventTarget=function(){return Nr()},$_=On.Event=Yi,ml=On.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,ga=On.ErrorCode=Vr,xg.COMPLETE="complete",B_=On.EventType=xg,hg.EventType=$o,$o.OPEN="a",$o.CLOSE="b",$o.ERROR="c",$o.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Js=On.WebChannel=hg,On.FetchXmlHttpFactory=Jo,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,L_=On.XhrIo=ht}).apply(typeof fa<"u"?fa:typeof self<"u"?self:typeof window<"u"?window:{});const Y_="@firebase/firestore";class Et{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");let Ki="11.0.2";const qn=new gn.Vy("@firebase/firestore");function Zi(){return qn.logLevel}function ne(s,...n){if(qn.logLevel<=gn.$b.DEBUG){const t=n.map(pl);qn.debug(`Firestore (${Ki}): ${s}`,...t)}}function gt(s,...n){if(qn.logLevel<=gn.$b.ERROR){const t=n.map(pl);qn.error(`Firestore (${Ki}): ${s}`,...t)}}function rn(s,...n){if(qn.logLevel<=gn.$b.WARN){const t=n.map(pl);qn.warn(`Firestore (${Ki}): ${s}`,...t)}}function pl(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch{return s}}function me(s="Unexpected state"){const n=`FIRESTORE (${Ki}) INTERNAL ASSERTION FAILED: `+s;throw gt(n),new Error(n)}function fe(s,n){s||me()}function re(s,n){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends st.g{constructor(n,t){super(n,t),this.code=n,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class At{constructor(){this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}}class U_{constructor(n,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class p1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,t){n.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}}class h1{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,t){this.changeListener=t,n.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class f1{constructor(n){this.t=n,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,t){var i=this;fe(void 0===this.o);let o=this.i;const a=_=>this.i!==o?(o=this.i,t(_)):Promise.resolve();let r=new At;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new At,n.enqueueRetryable(()=>a(this.currentUser))};const l=()=>{const _=r;n.enqueueRetryable((0,H.A)(function*(){yield _.promise,yield a(i.currentUser)}))},c=_=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(_=>c(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?c(_):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new At)}},0),l()}getToken(){const n=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==n?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe("string"==typeof i.accessToken),new U_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const n=this.auth&&this.auth.getUid();return fe(null===n||"string"==typeof n),new Et(n)}}class g1{constructor(n,t,i){this.l=n,this.h=t,this.P=i,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const n=this.I();return n&&this.T.set("Authorization",n),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class T1{constructor(n,t,i){this.l=n,this.h=t,this.P=i}getToken(){return Promise.resolve(new g1(this.l,this.h,this.P))}start(n,t){n.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X_{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b1{constructor(n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(n,t){fe(void 0===this.o);const i=a=>{null!=a.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const r=a.token!==this.R;return this.R=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(a.token):Promise.resolve()};this.o=a=>{n.enqueueRetryable(()=>i(a))};const o=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(t=>t?(fe("string"==typeof t.token),this.R=t.token,new X_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function x1(s){const n=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class W_{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const o=x1(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[a]%62))}return i}}function we(s,n){return s<n?-1:s>n?1:0}function es(s,n,t){return s.length===n.length&&s.every((i,o)=>t(i,n[o]))}class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(n){return _t.fromMillis(n.getTime())}static fromMillis(n){const t=Math.floor(n/1e3),i=Math.floor(1e6*(n-1e3*t));return new _t(t,i)}constructor(n,t){if(this.seconds=n,this.nanoseconds=t,t<0)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(n<-62135596800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?we(this.nanoseconds,n.nanoseconds):we(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{static fromTimestamp(n){return new be(n)}static min(){return new be(new _t(0,0))}static max(){return new be(new _t(253402300799,999999999))}constructor(n){this.timestamp=n}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ks{constructor(n,t,i){void 0===t?t=0:t>n.length&&me(),void 0===i?i=n.length-t:i>n.length-t&&me(),this.segments=n,this.offset=t,this.len=i}get length(){return this.len}isEqual(n){return 0===Ks.comparator(this,n)}child(n){const t=this.segments.slice(this.offset,this.limit());return n instanceof Ks?n.forEach(i=>{t.push(i)}):t.push(n),this.construct(t)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==n.get(t))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==n.get(t))return!1;return!0}forEach(n){for(let t=this.offset,i=this.limit();t<i;t++)n(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,t){const i=Math.min(n.length,t.length);for(let o=0;o<i;o++){const a=n.get(o),r=t.get(o);if(a<r)return-1;if(a>r)return 1}return n.length<t.length?-1:n.length>t.length?1:0}}class Ge extends Ks{construct(n,t,i){return new Ge(n,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...n){const t=[];for(const i of n){if(i.indexOf("//")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Ge(t)}static emptyPath(){return new Ge([])}}const v1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ks{construct(n,t,i){return new ot(n,t,i)}static isValidIdentifier(n){return v1.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ot(["__name__"])}static fromServerFormat(n){const t=[];let i="",o=0;const a=()=>{if(0===i.length)throw new ie($.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let r=!1;for(;o<n.length;){const l=n[o];if("\\"===l){if(o+1===n.length)throw new ie($.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const c=n[o+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new ie($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=c,o+=2}else"`"===l?(r=!r,o++):"."!==l||r?(i+=l,o++):(a(),o++)}if(a(),r)throw new ie($.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new ot(t)}static emptyPath(){return new ot([])}}class ce{constructor(n){this.path=n}static fromPath(n){return new ce(Ge.fromString(n))}static fromName(n){return new ce(Ge.fromString(n).popFirst(5))}static empty(){return new ce(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return null!==n&&0===Ge.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,t){return Ge.comparator(n.path,t.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new ce(new Ge(n.slice()))}}class tn{constructor(n,t,i){this.readTime=n,this.documentKey=t,this.largestBatchId=i}static min(){return new tn(be.min(),ce.empty(),-1)}static max(){return new tn(be.max(),ce.empty(),-1)}}function fl(s,n){let t=s.readTime.compareTo(n.readTime);return 0!==t?t:(t=ce.comparator(s.documentKey,n.documentKey),0!==t?t:we(s.largestBatchId,n.largestBatchId))}const Z_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ed{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}function Yn(s){return gl.apply(this,arguments)}function gl(){return(gl=(0,H.A)(function*(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==Z_)throw s;ne("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class G{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(n){return this.next(void 0,n)}next(n,t){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(n,this.result):new G((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(n,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((n,t)=>{this.next(n,t)})}wrapUserFunction(n){try{const t=n();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(n,t){return n?this.wrapUserFunction(()=>n(t)):G.resolve(t)}wrapFailure(n,t){return n?this.wrapUserFunction(()=>n(t)):G.reject(t)}static resolve(n){return new G((t,i)=>{t(n)})}static reject(n){return new G((t,i)=>{i(n)})}static waitFor(n){return new G((t,i)=>{let o=0,a=0,r=!1;n.forEach(l=>{++o,l.next(()=>{++a,r&&a===o&&t()},c=>i(c))}),r=!0,a===o&&t()})}static or(n){let t=G.resolve(!1);for(const i of n)t=t.next(o=>o?G.resolve(o):i());return t}static forEach(n,t){const i=[];return n.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(n,t){return new G((i,o)=>{const a=n.length,r=new Array(a);let l=0;for(let c=0;c<a;c++){const _=c;t(n[_]).next(d=>{r[_]=d,++l,l===a&&i(r)},d=>o(d))}})}static doWhile(n,t){return new G((i,o)=>{const a=()=>{!0===n()?t().next(()=>{a()},o):i()};a()})}}function Un(s){return"IndexedDbTransactionError"===s.name}let nn=(()=>{class s{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=o=>this.ie(o),this.se=o=>i.writeSequenceNumber(o))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return s.oe=-1,s})();function eo(s){return null==s}function to(s){return 0===s&&1/s==-1/0}function E1(s,n){let t=n;const i=s.length;for(let o=0;o<i;o++){const a=s.charAt(o);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function sd(s){return s+"\x01\x01"}function ud(s){let n=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&n++;return n}function Xn(s,n){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&n(t,s[t])}function dd(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}class Ze{constructor(n,t){this.comparator=n,this.root=t||Ft.EMPTY}insert(n,t){return new Ze(this.comparator,this.root.insert(n,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(n){return new Ze(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(n){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(n,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(n){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(n,i.key);if(0===o)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((t,i)=>(n(t,i),!1))}toString(){const n=[];return this.inorderTraversal((t,i)=>(n.push(`${t}:${i}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new xa(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new xa(this.root,n,this.comparator,!1)}getReverseIterator(){return new xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new xa(this.root,n,this.comparator,!0)}}class xa{constructor(n,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!n.isEmpty();)if(a=t?i(n.key,t):1,t&&o&&(a*=-1),a<0)n=this.isReverse?n.left:n.right;else{if(0===a){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const t={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class Ft{constructor(n,t,i,o,a){this.key=n,this.value=t,this.color=i??Ft.RED,this.left=o??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,t,i,o,a){return new Ft(n??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,t,i){let o=this;const a=i(n,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(n,t,i),null):0===a?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(n,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,t){let i,o=this;if(t(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(n,o.key)){if(o.right.isEmpty())return Ft.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,t)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const n=this.left.check();if(n!==this.right.check())throw me();return n+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1,Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(n,t,i,o,a){return this}insert(n,t,i){return new Ft(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qe{constructor(n){this.comparator=n,this.data=new Ze(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((t,i)=>(n(t),!1))}forEachInRange(n,t){const i=this.data.getIteratorFrom(n[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,n[1])>=0)return;t(o.key)}}forEachWhile(n,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!n(i.getNext().key))return}firstAfterOrEqual(n){const t=this.data.getIteratorFrom(n);return t.hasNext()?t.getNext().key:null}getIterator(){return new md(this.data.getIterator())}getIteratorFrom(n){return new md(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let t=this;return t.size<n.size&&(t=n,n=this),n.forEach(i=>{t=t.add(i)}),t}isEqual(n){if(!(n instanceof qe)||this.size!==n.size)return!1;const t=this.data.getIterator(),i=n.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(0!==this.comparator(o,a))return!1}return!0}toArray(){const n=[];return this.forEach(t=>{n.push(t)}),n}toString(){const n=[];return this.forEach(t=>n.push(t)),"SortedSet("+n.toString()+")"}copy(n){const t=new qe(this.comparator);return t.data=n,t}}class md{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Jt{constructor(n){this.fields=n,n.sort(ot.comparator)}static empty(){return new Jt([])}unionWith(n){let t=new qe(ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of n)t=t.add(i);return new Jt(t.toArray())}covers(n){for(const t of this.fields)if(t.isPrefixOf(n))return!0;return!1}isEqual(n){return es(this.fields,n.fields,(t,i)=>t.isEqual(i))}}class pd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pt{constructor(n){this.binaryString=n}static fromBase64String(n){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pd("Invalid base64 string: "+a):a}}(n);return new pt(t)}static fromUint8Array(n){const t=function(o){let a="";for(let r=0;r<o.length;++r)a+=String.fromCharCode(o[r]);return a}(n);return new pt(t)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return we(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(s){if(fe(!!s),"string"==typeof s){let n=0;const t=U1.exec(s);if(fe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),n=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}return{seconds:at(s.seconds),nanos:at(s.nanos)}}function at(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function Fn(s){return"string"==typeof s?pt.fromBase64String(s):pt.fromUint8Array(s)}function va(s){var n,t;return"server_timestamp"===(null===(t=((null===(n=s?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ya(s){const n=s.mapValue.fields.__previous_value__;return va(n)?ya(n):n}function no(s){const n=Rn(s.mapValue.fields.__local_write_time__.timestampValue);return new _t(n.seconds,n.nanos)}class X1{constructor(n,t,i,o,a,r,l,c,_){this.databaseId=n,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=r,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=_}}class Si{constructor(n,t){this.projectId=n,this.database=t||"(default)"}static empty(){return new Si("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Si&&n.projectId===this.projectId&&n.database===this.database}}const Wn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hn(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?va(s)?4:bd(s)?9007199254740991:Ca(s)?10:11:me()}function xn(s,n){if(s===n)return!0;const t=Hn(s);if(t!==Hn(n))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===n.booleanValue;case 4:return no(s).isEqual(no(n));case 3:return function(o,a){if("string"==typeof o.timestampValue&&"string"==typeof a.timestampValue&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const r=Rn(o.timestampValue),l=Rn(a.timestampValue);return r.seconds===l.seconds&&r.nanos===l.nanos}(s,n);case 5:return s.stringValue===n.stringValue;case 6:return a=n,Fn(s.bytesValue).isEqual(Fn(a.bytesValue));case 7:return s.referenceValue===n.referenceValue;case 8:return function(o,a){return at(o.geoPointValue.latitude)===at(a.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(a.geoPointValue.longitude)}(s,n);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return at(o.integerValue)===at(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const r=at(o.doubleValue),l=at(a.doubleValue);return r===l?to(r)===to(l):isNaN(r)&&isNaN(l)}return!1}(s,n);case 9:return es(s.arrayValue.values||[],n.arrayValue.values||[],xn);case 10:case 11:return function(o,a){const r=o.mapValue.fields||{},l=a.mapValue.fields||{};if(ud(r)!==ud(l))return!1;for(const c in r)if(r.hasOwnProperty(c)&&(void 0===l[c]||!xn(r[c],l[c])))return!1;return!0}(s,n);default:return me()}var a}function io(s,n){return void 0!==(s.values||[]).find(t=>xn(t,n))}function Jn(s,n){if(s===n)return 0;const t=Hn(s),i=Hn(n);if(t!==i)return we(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(s.booleanValue,n.booleanValue);case 2:return function(a,r){const l=at(a.integerValue||a.doubleValue),c=at(r.integerValue||r.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(s,n);case 3:return hd(s.timestampValue,n.timestampValue);case 4:return hd(no(s),no(n));case 5:return we(s.stringValue,n.stringValue);case 6:return function(a,r){const l=Fn(a),c=Fn(r);return l.compareTo(c)}(s.bytesValue,n.bytesValue);case 7:return function(a,r){const l=a.split("/"),c=r.split("/");for(let _=0;_<l.length&&_<c.length;_++){const d=we(l[_],c[_]);if(0!==d)return d}return we(l.length,c.length)}(s.referenceValue,n.referenceValue);case 8:return function(a,r){const l=we(at(a.latitude),at(r.latitude));return 0!==l?l:we(at(a.longitude),at(r.longitude))}(s.geoPointValue,n.geoPointValue);case 9:return fd(s.arrayValue,n.arrayValue);case 10:return function(a,r){var l,c,_,d;const v=null===(l=(a.fields||{}).value)||void 0===l?void 0:l.arrayValue,w=null===(c=(r.fields||{}).value)||void 0===c?void 0:c.arrayValue,y=we((null===(_=v?.values)||void 0===_?void 0:_.length)||0,(null===(d=w?.values)||void 0===d?void 0:d.length)||0);return 0!==y?y:fd(v,w)}(s.mapValue,n.mapValue);case 11:return function(a,r){if(a===Wn.mapValue&&r===Wn.mapValue)return 0;if(a===Wn.mapValue)return 1;if(r===Wn.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),_=r.fields||{},d=Object.keys(_);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const f=we(c[p],d[p]);if(0!==f)return f;const v=Jn(l[c[p]],_[d[p]]);if(0!==v)return v}return we(c.length,d.length)}(s.mapValue,n.mapValue);default:throw me()}}function hd(s,n){if("string"==typeof s&&"string"==typeof n&&s.length===n.length)return we(s,n);const t=Rn(s),i=Rn(n),o=we(t.seconds,i.seconds);return 0!==o?o:we(t.nanos,i.nanos)}function fd(s,n){const t=s.values||[],i=n.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Jn(t[o],i[o]);if(a)return a}return we(t.length,i.length)}function ss(s){return vl(s)}function vl(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const i=Rn(t);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?Fn(s.bytesValue).toBase64():"referenceValue"in s?ce.fromName(s.referenceValue).toString():"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=vl(a);return i+"]"}(s.arrayValue):"mapValue"in s?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const r of i)a?a=!1:o+=",",o+=`${r}:${vl(t.fields[r])}`;return o+"}"}(s.mapValue):me()}function wa(s){switch(Hn(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const n=ya(s);return n?16+wa(n):16;case 5:return 2*s.stringValue.length;case 6:return Fn(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(s.arrayValue.values||[]).reduce((o,a)=>o+wa(a),0);case 10:case 11:return function(i){let o=0;return Xn(i.fields,(a,r)=>{o+=a.length+wa(r)}),o}(s.mapValue);default:throw me()}}function wi(s,n){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`}}function yl(s){return!!s&&"integerValue"in s}function so(s){return!!s&&"arrayValue"in s}function gd(s){return!!s&&"nullValue"in s}function Td(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ia(s){return!!s&&"mapValue"in s}function Ca(s){var n,t;return"__vector__"===(null===(t=((null===(n=s?.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oo(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const n={mapValue:{fields:{}}};return Xn(s.mapValue.fields,(t,i)=>n.mapValue.fields[t]=oo(i)),n}if(s.arrayValue){const n={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)n.arrayValue.values[t]=oo(s.arrayValue.values[t]);return n}return Object.assign({},s)}function bd(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}class jt{constructor(n){this.value=n}static empty(){return new jt({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let t=this.value;for(let i=0;i<n.length-1;++i)if(t=(t.mapValue.fields||{})[n.get(i)],!Ia(t))return null;return t=(t.mapValue.fields||{})[n.lastSegment()],t||null}}set(n,t){this.getFieldsMap(n.popLast())[n.lastSegment()]=oo(t)}setAll(n){let t=ot.emptyPath(),i={},o=[];n.forEach((r,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,i,o),i={},o=[],t=l.popLast()}r?i[l.lastSegment()]=oo(r):o.push(l.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(n){const t=this.field(n.popLast());Ia(t)&&t.mapValue.fields&&delete t.mapValue.fields[n.lastSegment()]}isEqual(n){return xn(this.value,n.value)}getFieldsMap(n){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<n.length;++i){let o=t.mapValue.fields[n.get(i)];Ia(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[n.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(n,t,i){Xn(t,(o,a)=>n[o]=a);for(const o of i)delete n[o]}clone(){return new jt(oo(this.value))}}function Sd(s){const n=[];return Xn(s.fields,(t,i)=>{const o=new ot([t]);if(Ia(i)){const a=Sd(i.mapValue).fields;if(0===a.length)n.push(o);else for(const r of a)n.push(o.child(r))}else n.push(o)}),new Jt(n)}class tt{constructor(n,t,i,o,a,r,l){this.key=n,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=r,this.documentState=l}static newInvalidDocument(n){return new tt(n,0,be.min(),be.min(),be.min(),jt.empty(),0)}static newFoundDocument(n,t,i,o){return new tt(n,1,t,be.min(),i,o,0)}static newNoDocument(n,t){return new tt(n,2,t,be.min(),be.min(),jt.empty(),0)}static newUnknownDocument(n,t){return new tt(n,3,t,be.min(),be.min(),jt.empty(),2)}convertToFoundDocument(n,t){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=n),this.version=n,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof tt&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kn{constructor(n,t){this.position=n,this.inclusive=t}}function wd(s,n,t){let i=0;for(let o=0;o<s.position.length;o++){const a=n[o],r=s.position[o];if(i=a.field.isKeyField()?ce.comparator(ce.fromName(r.referenceValue),t.key):Jn(r,t.data.field(a.field)),"desc"===a.dir&&(i*=-1),0!==i)break}return i}function Id(s,n){if(null===s)return null===n;if(null===n||s.inclusive!==n.inclusive||s.position.length!==n.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!xn(s.position[t],n.position[t]))return!1;return!0}class ao{constructor(n,t="asc"){this.field=n,this.dir=t}}function J1(s,n){return s.dir===n.dir&&s.field.isEqual(n.field)}class Cd{}class Pe extends Cd{constructor(n,t,i){super(),this.field=n,this.op=t,this.value=i}static create(n,t,i){return n.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(n,t,i):new K1(n,t,i):"array-contains"===t?new tT(n,i):"in"===t?new Fd(n,i):"not-in"===t?new nT(n,i):"array-contains-any"===t?new iT(n,i):new Pe(n,t,i)}static createKeyFieldInFilter(n,t,i){return"in"===t?new Z1(n,i):new eT(n,i)}matches(n){const t=n.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jn(t,this.value)):null!==t&&Hn(this.value)===Hn(t)&&this.matchesComparison(Jn(t,this.value))}matchesComparison(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends Cd{constructor(n,t){super(),this.filters=n,this.op=t,this.ae=null}static create(n,t){return new Ye(n,t)}matches(n){return os(this)?void 0===this.filters.find(t=>!t.matches(n)):void 0!==this.filters.find(t=>t.matches(n))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((n,t)=>n.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function os(s){return"and"===s.op}function wl(s){return function kd(s){for(const n of s.filters)if(n instanceof Ye)return!1;return!0}(s)&&os(s)}function Il(s){if(s instanceof Pe)return s.field.canonicalString()+s.op.toString()+ss(s.value);if(wl(s))return s.filters.map(n=>Il(n)).join(",");{const n=s.filters.map(t=>Il(t)).join(",");return`${s.op}(${n})`}}function Ed(s,n){return s instanceof Pe?(i=s,(o=n)instanceof Pe&&i.op===o.op&&i.field.isEqual(o.field)&&xn(i.value,o.value)):s instanceof Ye?function(i,o){return o instanceof Ye&&i.op===o.op&&i.filters.length===o.filters.length&&i.filters.reduce((a,r,l)=>a&&Ed(r,o.filters[l]),!0)}(s,n):void me();var i,o}function Od(s){return s instanceof Pe?`${(t=s).field.canonicalString()} ${t.op} ${ss(t.value)}`:s instanceof Ye?function(t){return t.op.toString()+" {"+t.getFilters().map(Od).join(" ,")+"}"}(s):"Filter";var t}class K1 extends Pe{constructor(n,t,i){super(n,t,i),this.key=ce.fromName(i.referenceValue)}matches(n){const t=ce.comparator(n.key,this.key);return this.matchesComparison(t)}}class Z1 extends Pe{constructor(n,t){super(n,"in",t),this.keys=Rd(0,t)}matches(n){return this.keys.some(t=>t.isEqual(n.key))}}class eT extends Pe{constructor(n,t){super(n,"not-in",t),this.keys=Rd(0,t)}matches(n){return!this.keys.some(t=>t.isEqual(n.key))}}function Rd(s,n){var t;return((null===(t=n.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>ce.fromName(i.referenceValue))}class tT extends Pe{constructor(n,t){super(n,"array-contains",t)}matches(n){const t=n.data.field(this.field);return so(t)&&io(t.arrayValue,this.value)}}class Fd extends Pe{constructor(n,t){super(n,"in",t)}matches(n){const t=n.data.field(this.field);return null!==t&&io(this.value.arrayValue,t)}}class nT extends Pe{constructor(n,t){super(n,"not-in",t)}matches(n){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=n.data.field(this.field);return null!==t&&!io(this.value.arrayValue,t)}}class iT extends Pe{constructor(n,t){super(n,"array-contains-any",t)}matches(n){const t=n.data.field(this.field);return!(!so(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>io(this.value.arrayValue,i))}}class sT{constructor(n,t=null,i=[],o=[],a=null,r=null,l=null){this.path=n,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=r,this.endAt=l,this.ue=null}}function Cl(s,n=null,t=[],i=[],o=null,a=null,r=null){return new sT(s,n,t,i,o,a,r)}function Ii(s){const n=re(s);if(null===n.ue){let t=n.path.canonicalString();null!==n.collectionGroup&&(t+="|cg:"+n.collectionGroup),t+="|f:",t+=n.filters.map(i=>Il(i)).join(","),t+="|ob:",t+=n.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),eo(n.limit)||(t+="|l:",t+=n.limit),n.startAt&&(t+="|lb:",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(i=>ss(i)).join(",")),n.endAt&&(t+="|ub:",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(i=>ss(i)).join(",")),n.ue=t}return n.ue}function ro(s,n){if(s.limit!==n.limit||s.orderBy.length!==n.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!J1(s.orderBy[t],n.orderBy[t]))return!1;if(s.filters.length!==n.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Ed(s.filters[t],n.filters[t]))return!1;return s.collectionGroup===n.collectionGroup&&!!s.path.isEqual(n.path)&&!!Id(s.startAt,n.startAt)&&Id(s.endAt,n.endAt)}function ka(s){return ce.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}class jn{constructor(n,t=null,i=[],o=[],a=null,r="F",l=null,c=null){this.path=n,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=r,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function as(s){return new jn(s)}function Md(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function kl(s){return null!==s.collectionGroup}function rs(s){const n=re(s);if(null===n.ce){n.ce=[];const t=new Set;for(const a of n.explicitOrderBy)n.ce.push(a),t.add(a.field.canonicalString());const i=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";(function(r){let l=new qe(ot.comparator);return r.filters.forEach(c=>{c.getFlattenedFilters().forEach(_=>{_.isInequality()&&(l=l.add(_.field))})}),l})(n).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||n.ce.push(new ao(a,i))}),t.has(ot.keyField().canonicalString())||n.ce.push(new ao(ot.keyField(),i))}return n.ce}function Nt(s){const n=re(s);return n.le||(n.le=function Pd(s,n){if("F"===s.limitType)return Cl(s.path,s.collectionGroup,n,s.filters,s.limit,s.startAt,s.endAt);{n=n.map(o=>new ao(o.field,"desc"===o.dir?"asc":"desc"));const t=s.endAt?new Kn(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Kn(s.startAt.position,s.startAt.inclusive):null;return Cl(s.path,s.collectionGroup,n,s.filters,s.limit,t,i)}}(n,rs(s))),n.le}function El(s,n){const t=s.filters.concat([n]);return new jn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Aa(s,n,t){return new jn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),n,t,s.startAt,s.endAt)}function lo(s,n){return ro(Nt(s),Nt(n))&&s.limitType===n.limitType}function Nd(s){return`${Ii(Nt(s))}|lt:${s.limitType}`}function ls(s){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Od(o)).join(", ")}]`),eo(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>{return`${(r=o).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>ss(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>ss(o)).join(",")),`Target(${i})`}(Nt(s))}; limitType=${s.limitType})`}function co(s,n){return n.isFoundDocument()&&function(i,o){const a=o.key.path;return null!==i.collectionGroup?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ce.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(s,n)&&function(i,o){for(const a of rs(i))if(!a.field.isKeyField()&&null===o.data.field(a.field))return!1;return!0}(s,n)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(s,n)&&(o=n,!((i=s).startAt&&!function(r,l,c){const _=wd(r,l,c);return r.inclusive?_<=0:_<0}(i.startAt,rs(i),o)||i.endAt&&!function(r,l,c){const _=wd(r,l,c);return r.inclusive?_>=0:_>0}(i.endAt,rs(i),o)));var i,o}function Ld(s){return(n,t)=>{let i=!1;for(const o of rs(s)){const a=oT(o,n,t);if(0!==a)return a;i=i||o.field.isKeyField()}return 0}}function oT(s,n,t){const i=s.field.isKeyField()?ce.comparator(n.key,t.key):function(a,r,l){const c=r.data.field(a),_=l.data.field(a);return null!==c&&null!==_?Jn(c,_):me()}(s.field,n,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return me()}}class zn{constructor(n,t){this.mapKeyFn=n,this.equalsFn=t,this.inner={},this.innerSize=0}get(n){const t=this.mapKeyFn(n),i=this.inner[t];if(void 0!==i)for(const[o,a]of i)if(this.equalsFn(o,n))return a}has(n){return void 0!==this.get(n)}set(n,t){const i=this.mapKeyFn(n),o=this.inner[i];if(void 0===o)return this.inner[i]=[[n,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],n))return void(o[a]=[n,t]);o.push([n,t]),this.innerSize++}delete(n){const t=this.mapKeyFn(n),i=this.inner[t];if(void 0===i)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],n))return 1===i.length?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(n){Xn(this.inner,(t,i)=>{for(const[o,a]of i)n(o,a)})}isEmpty(){return dd(this.inner)}size(){return this.innerSize}}const aT=new Ze(ce.comparator);function Kt(){return aT}const Bd=new Ze(ce.comparator);function uo(...s){let n=Bd;for(const t of s)n=n.insert(t.key,t);return n}function $d(s){let n=Bd;return s.forEach((t,i)=>n=n.insert(t,i.overlayedDocument)),n}function vn(){return _o()}function Qd(){return _o()}function _o(){return new zn(s=>s.toString(),(s,n)=>s.isEqual(n))}const rT=new Ze(ce.comparator),lT=new qe(ce.comparator);function Re(...s){let n=lT;for(const t of s)n=n.add(t);return n}const cT=new qe(we);function Ol(s,n){if(s.useProto3Json){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:to(n)?"-0":n}}function qd(s){return{integerValue:""+s}}function Yd(s,n){return function id(s){return"number"==typeof s&&Number.isInteger(s)&&!to(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}(n)?qd(n):Ol(s,n)}class Oa{constructor(){this._=void 0}}function uT(s,n,t){return s instanceof cs?function(o,a){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&va(a)&&(a=ya(a)),a&&(r.fields.__previous_value__=a),{mapValue:r}}(t,n):s instanceof Ci?Xd(s,n):s instanceof ki?Wd(s,n):function(o,a){const r=Ud(o,a),l=Hd(r)+Hd(o.Pe);return yl(r)&&yl(o.Pe)?qd(l):Ol(o.serializer,l)}(s,n)}function _T(s,n,t){return s instanceof Ci?Xd(s,n):s instanceof ki?Wd(s,n):t}function Ud(s,n){return s instanceof us?yl(i=n)||(a=i)&&"doubleValue"in a?n:{integerValue:0}:null;var i,a}class cs extends Oa{}class Ci extends Oa{constructor(n){super(),this.elements=n}}function Xd(s,n){const t=Jd(n);for(const i of s.elements)t.some(o=>xn(o,i))||t.push(i);return{arrayValue:{values:t}}}class ki extends Oa{constructor(n){super(),this.elements=n}}function Wd(s,n){let t=Jd(n);for(const i of s.elements)t=t.filter(o=>!xn(o,i));return{arrayValue:{values:t}}}class us extends Oa{constructor(n,t){super(),this.serializer=n,this.Pe=t}}function Hd(s){return at(s.integerValue||s.doubleValue)}function Jd(s){return so(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class mT{constructor(n,t){this.version=n,this.transformResults=t}}class rt{constructor(n,t){this.updateTime=n,this.exists=t}static none(){return new rt}static exists(n){return new rt(void 0,n)}static updateTime(n){return new rt(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Ra(s,n){return void 0!==s.updateTime?n.isFoundDocument()&&n.version.isEqual(s.updateTime):void 0===s.exists||s.exists===n.isFoundDocument()}class Fa{}function Kd(s,n){if(!s.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return s.isNoDocument()?new ds(s.key,rt.none()):new _s(s.key,s.data,rt.none());{const t=s.data,i=jt.empty();let o=new qe(ot.comparator);for(let a of n.fields)if(!o.has(a)){let r=t.field(a);null===r&&a.length>1&&(a=a.popLast(),r=t.field(a)),null===r?i.delete(a):i.set(a,r),o=o.add(a)}return new Dn(s.key,i,new Jt(o.toArray()),rt.none())}}function pT(s,n,t){s instanceof _s?function(o,a,r){const l=o.value.clone(),c=tm(o.fieldTransforms,a,r.transformResults);l.setAll(c),a.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(s,n,t):s instanceof Dn?function(o,a,r){if(!Ra(o.precondition,a))return void a.convertToUnknownDocument(r.version);const l=tm(o.fieldTransforms,a,r.transformResults),c=a.data;c.setAll(em(o)),c.setAll(l),a.convertToFoundDocument(r.version,c).setHasCommittedMutations()}(s,n,t):n.convertToNoDocument(t.version).setHasCommittedMutations()}function po(s,n,t,i){return s instanceof _s?function(a,r,l,c){if(!Ra(a.precondition,r))return l;const _=a.value.clone(),d=nm(a.fieldTransforms,c,r);return _.setAll(d),r.convertToFoundDocument(r.version,_).setHasLocalMutations(),null}(s,n,t,i):s instanceof Dn?function(a,r,l,c){if(!Ra(a.precondition,r))return l;const _=nm(a.fieldTransforms,c,r),d=r.data;return d.setAll(em(a)),d.setAll(_),r.convertToFoundDocument(r.version,d).setHasLocalMutations(),null===l?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(s,n,t,i):(l=t,Ra(s.precondition,r=n)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):l);var r,l}function hT(s,n){let t=null;for(const i of s.fieldTransforms){const o=n.data.field(i.field),a=Ud(i.transform,o||null);null!=a&&(null===t&&(t=jt.empty()),t.set(i.field,a))}return t||null}function Zd(s,n){return s.type===n.type&&!!s.key.isEqual(n.key)&&!!s.precondition.isEqual(n.precondition)&&(o=n.fieldTransforms,!!(void 0===(i=s.fieldTransforms)&&void 0===o||i&&o&&es(i,o,(a,r)=>function dT(s,n){return s.field.isEqual(n.field)&&(o=n.transform,(i=s.transform)instanceof Ci&&o instanceof Ci||i instanceof ki&&o instanceof ki?es(i.elements,o.elements,xn):i instanceof us&&o instanceof us?xn(i.Pe,o.Pe):i instanceof cs&&o instanceof cs);var i,o}(a,r))))&&(0===s.type?s.value.isEqual(n.value):1!==s.type||s.data.isEqual(n.data)&&s.fieldMask.isEqual(n.fieldMask));var i,o}class _s extends Fa{constructor(n,t,i,o=[]){super(),this.key=n,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Dn extends Fa{constructor(n,t,i,o,a=[]){super(),this.key=n,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function em(s){const n=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=s.data.field(t);n.set(t,i)}}),n}function tm(s,n,t){const i=new Map;fe(s.length===t.length);for(let o=0;o<t.length;o++){const a=s[o],r=a.transform,l=n.data.field(a.field);i.set(a.field,_T(r,l,t[o]))}return i}function nm(s,n,t){const i=new Map;for(const o of s){const a=o.transform,r=t.data.field(o.field);i.set(o.field,uT(a,r,n))}return i}class ds extends Fa{constructor(n,t){super(),this.key=n,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rl extends Fa{constructor(n,t){super(),this.key=n,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fl{constructor(n,t,i,o){this.batchId=n,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(n,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(n.key)&&pT(a,n,i[o])}}applyToLocalView(n,t){for(const i of this.baseMutations)i.key.isEqual(n.key)&&(t=po(i,n,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(n.key)&&(t=po(i,n,t,this.localWriteTime));return t}applyToLocalDocumentSet(n,t){const i=Qd();return this.mutations.forEach(o=>{const a=n.get(o.key),r=a.overlayedDocument;let l=this.applyToLocalView(r,a.mutatedFields);l=t.has(o.key)?null:l;const c=Kd(r,l);null!==c&&i.set(o.key,c),r.isValidDocument()||r.convertToNoDocument(be.min())}),i}keys(){return this.mutations.reduce((n,t)=>n.add(t.key),Re())}isEqual(n){return this.batchId===n.batchId&&es(this.mutations,n.mutations,(t,i)=>Zd(t,i))&&es(this.baseMutations,n.baseMutations,(t,i)=>Zd(t,i))}}class jl{constructor(n,t,i,o){this.batch=n,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(n,t,i){fe(n.mutations.length===i.length);let o=function(){return rT}();const a=n.mutations;for(let r=0;r<a.length;r++)o=o.insert(a[r].key,i[r].version);return new jl(n,t,i,o)}}class zl{constructor(n,t){this.largestBatchId=n,this.mutation=t}getKey(){return this.mutation.key}isEqual(n){return null!==n&&this.mutation===n.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fT{constructor(n,t){this.count=n,this.unchangedNames=t}}var yt,Be;function om(s){if(void 0===s)return gt("GRPC error has no .code"),$.UNKNOWN;switch(s){case yt.OK:return $.OK;case yt.CANCELLED:return $.CANCELLED;case yt.UNKNOWN:return $.UNKNOWN;case yt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case yt.INTERNAL:return $.INTERNAL;case yt.UNAVAILABLE:return $.UNAVAILABLE;case yt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case yt.NOT_FOUND:return $.NOT_FOUND;case yt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case yt.ABORTED:return $.ABORTED;case yt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case yt.DATA_LOSS:return $.DATA_LOSS;default:return me()}}(Be=yt||(yt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";const gT=new bi([4294967295,4294967295],0);function rm(s){const n=function am(){return new TextEncoder}().encode(s),t=new V_;return t.update(n),new Uint8Array(t.digest())}function lm(s){const n=new DataView(s.buffer),t=n.getUint32(0,!0),i=n.getUint32(4,!0),o=n.getUint32(8,!0),a=n.getUint32(12,!0);return[new bi([t,i],0),new bi([o,a],0)]}class Dl{constructor(n,t,i){if(this.bitmap=n,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ho(`Invalid padding: ${t}`);if(i<0)throw new ho(`Invalid hash count: ${i}`);if(n.length>0&&0===this.hashCount)throw new ho(`Invalid hash count: ${i}`);if(0===n.length&&0!==t)throw new ho(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*n.length-t,this.Ie=bi.fromNumber(this.Te)}Ee(n,t,i){let o=n.add(t.multiply(bi.fromNumber(i)));return 1===o.compare(gT)&&(o=new bi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(n){return!!(this.bitmap[Math.floor(n/8)]&1<<n%8)}mightContain(n){if(0===this.Te)return!1;const t=rm(n),[i,o]=lm(t);for(let a=0;a<this.hashCount;a++){const r=this.Ee(i,o,a);if(!this.de(r))return!1}return!0}static create(n,t,i){const o=n%8==0?0:8-n%8,a=new Uint8Array(Math.ceil(n/8)),r=new Dl(a,o,t);return i.forEach(l=>r.insert(l)),r}insert(n){if(0===this.Te)return;const t=rm(n),[i,o]=lm(t);for(let a=0;a<this.hashCount;a++){const r=this.Ee(i,o,a);this.Ae(r)}}Ae(n){const t=Math.floor(n/8);this.bitmap[t]|=1<<n%8}}class ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fo{constructor(n,t,i,o,a){this.snapshotVersion=n,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(n,t,i){const o=new Map;return o.set(n,go.createSynthesizedTargetChangeForCurrentChange(n,t,i)),new fo(be.min(),o,new Ze(we),Kt(),Re())}}class go{constructor(n,t,i,o,a){this.resumeToken=n,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(n,t,i){return new go(i,t,Re(),Re(),Re())}}class za{constructor(n,t,i,o){this.Re=n,this.removedTargetIds=t,this.key=i,this.Ve=o}}class cm{constructor(n,t){this.targetId=n,this.me=t}}class um{constructor(n,t,i=pt.EMPTY_BYTE_STRING,o=null){this.state=n,this.targetIds=t,this.resumeToken=i,this.cause=o}}class _m{constructor(){this.fe=0,this.ge=dm(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(n){n.approximateByteSize()>0&&(this.we=!0,this.pe=n)}ve(){let n=Re(),t=Re(),i=Re();return this.ge.forEach((o,a)=>{switch(a){case 0:n=n.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:me()}}),new go(this.pe,this.ye,n,t,i)}Ce(){this.we=!1,this.ge=dm()}Fe(n,t){this.we=!0,this.ge=this.ge.insert(n,t)}Me(n){this.we=!0,this.ge=this.ge.remove(n)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TT{constructor(n){this.Le=n,this.Be=new Map,this.ke=Kt(),this.qe=Da(),this.Qe=Da(),this.Ke=new Ze(we)}$e(n){for(const t of n.Re)n.Ve&&n.Ve.isFoundDocument()?this.Ue(t,n.Ve):this.We(t,n.key,n.Ve);for(const t of n.removedTargetIds)this.We(t,n.key,n.Ve)}Ge(n){this.forEachTarget(n,t=>{const i=this.ze(t);switch(n.state){case 0:this.je(t)&&i.De(n.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(n.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(n.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(n.resumeToken));break;default:me()}})}forEachTarget(n,t){n.targetIds.length>0?n.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(n){const t=n.targetId,i=n.me.count,o=this.Ye(t);if(o){const a=o.target;if(ka(a))if(0===i){const r=new ce(a.path);this.We(t,r,tt.newNoDocument(r,be.min()))}else fe(1===i);else{const r=this.Ze(t);if(r!==i){const l=this.Xe(n),c=l?this.et(l,n,r):1;0!==c&&(this.He(t),this.Ke=this.Ke.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(n){const t=n.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let r,l;try{r=Fn(i).toUint8Array()}catch(c){if(c instanceof pd)return rn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Dl(r,o,a)}catch(c){return rn(c instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===l.Te?null:l}et(n,t,i){return t.me.count===i-this.rt(n,t.targetId)?0:2}rt(n,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const r=this.Le.nt(),l=`projects/${r.projectId}/databases/${r.database}/documents/${a.path.canonicalString()}`;n.mightContain(l)||(this.We(t,a,null),o++)}),o}it(n){const t=new Map;this.Be.forEach((a,r)=>{const l=this.Ye(r);if(l){if(a.current&&ka(l.target)){const c=new ce(l.target.path);this.st(c).has(r)||this.ot(r,c)||this.We(r,c,tt.newNoDocument(c,n))}a.be&&(t.set(r,a.ve()),a.Ce())}});let i=Re();this.Qe.forEach((a,r)=>{let l=!0;r.forEachWhile(c=>{const _=this.Ye(c);return!_||"TargetPurposeLimboResolution"===_.purpose||(l=!1,!1)}),l&&(i=i.add(a))}),this.ke.forEach((a,r)=>r.setReadTime(n));const o=new fo(n,t,this.Ke,this.ke,i);return this.ke=Kt(),this.qe=Da(),this.Qe=Da(),this.Ke=new Ze(we),o}Ue(n,t){if(!this.je(n))return;const i=this.ot(n,t.key)?2:0;this.ze(n).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(n)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(n))}We(n,t,i){if(!this.je(n))return;const o=this.ze(n);this.ot(n,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(n)),this.Qe=this.Qe.insert(t,this._t(t).add(n)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(n){this.Be.delete(n)}Ze(n){const t=this.ze(n).ve();return this.Le.getRemoteKeysForTarget(n).size+t.addedDocuments.size-t.removedDocuments.size}xe(n){this.ze(n).xe()}ze(n){let t=this.Be.get(n);return t||(t=new _m,this.Be.set(n,t)),t}_t(n){let t=this.Qe.get(n);return t||(t=new qe(we),this.Qe=this.Qe.insert(n,t)),t}st(n){let t=this.qe.get(n);return t||(t=new qe(we),this.qe=this.qe.insert(n,t)),t}je(n){const t=null!==this.Ye(n);return t||ne("WatchChangeAggregator","Detected inactive target",n),t}Ye(n){const t=this.Be.get(n);return t&&t.Se?null:this.Le.ut(n)}He(n){this.Be.set(n,new _m),this.Le.getRemoteKeysForTarget(n).forEach(t=>{this.We(n,t,null)})}ot(n,t){return this.Le.getRemoteKeysForTarget(n).has(t)}}function Da(){return new Ze(ce.comparator)}function dm(){return new Ze(ce.comparator)}const bT={asc:"ASCENDING",desc:"DESCENDING"},xT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vT={and:"AND",or:"OR"};class yT{constructor(n,t){this.databaseId=n,this.useProto3Json=t}}function Ml(s,n){return s.useProto3Json||eo(n)?n:{value:n}}function ms(s,n){return s.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function mm(s,n){return s.useProto3Json?n.toBase64():n.toUint8Array()}function ST(s,n){return ms(s,n.toTimestamp())}function Tt(s){return fe(!!s),be.fromTimestamp(function(t){const i=Rn(t);return new _t(i.seconds,i.nanos)}(s))}function Gl(s,n){return Pl(s,n).canonicalString()}function Pl(s,n){const t=(o=s,new Ge(["projects",o.projectId,"databases",o.database])).child("documents");var o;return void 0===n?t:t.child(n)}function pm(s){const n=Ge.fromString(s);return fe(Im(n)),n}function To(s,n){return Gl(s.databaseId,n.path)}function yn(s,n){const t=pm(n);if(t.get(1)!==s.databaseId.projectId)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ce(gm(t))}function hm(s,n){return Gl(s.databaseId,n)}function Nl(s){return new Ge(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function gm(s){return fe(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function Tm(s,n,t){return{name:To(s,n),fields:t.value.mapValue.fields}}function xm(s,n){return{documents:[hm(s,n.path)]}}function Ma(s,n){const t={structuredQuery:{}},i=n.path;let o;null!==n.collectionGroup?(o=i,t.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=hm(s,o);const a=function(_){if(0!==_.length)return wm(Ye.create(_,"and"))}(n.filters);a&&(t.structuredQuery.where=a);const r=function(_){if(0!==_.length)return _.map(d=>{return{field:Zn((f=d).field),direction:ET(f.dir)};var f})}(n.orderBy);r&&(t.structuredQuery.orderBy=r);const l=Ml(s,n.limit);return null!==l&&(t.structuredQuery.limit=l),n.startAt&&(t.structuredQuery.startAt={before:(_=n.startAt).inclusive,values:_.position}),n.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(n.endAt)),{ct:t,parent:o};var _}function ym(s){let n=function fm(s){const n=pm(s);return 4===n.length?Ge.emptyPath():gm(n)}(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){fe(1===i);const d=t.from[0];d.allDescendants?o=d.collectionId:n=n.child(d.collectionId)}let a=[];t.where&&(a=function(p){const f=Sm(p);return f instanceof Ye&&wl(f)?f.getFilters():[f]}(t.where));let r=[];t.orderBy&&(r=t.orderBy.map(f=>{return new ao(ps((w=f).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let l=null;t.limit&&(l=function(p){let f;return f="object"==typeof p?p.value:p,eo(f)?null:f}(t.limit));let c=null;var p;t.startAt&&(c=new Kn((p=t.startAt).values||[],!!p.before));let _=null;return t.endAt&&(_=function(p){return new Kn(p.values||[],!p.before)}(t.endAt)),function Dd(s,n,t,i,o,a,r,l){return new jn(s,n,t,i,o,a,r,l)}(n,o,r,a,l,"F",c,_)}function Sm(s){return void 0!==s.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ps(t.unaryFilter.field);return Pe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ps(t.unaryFilter.field);return Pe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ps(t.unaryFilter.field);return Pe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ps(t.unaryFilter.field);return Pe.create(r,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(s):void 0!==s.fieldFilter?Pe.create(ps((t=s).fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==s.compositeFilter?function(t){return Ye.create(t.compositeFilter.filters.map(i=>Sm(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return me()}}(t.compositeFilter.op))}(s):me();var t}function ET(s){return bT[s]}function AT(s){return xT[s]}function OT(s){return vT[s]}function Zn(s){return{fieldPath:s.canonicalString()}}function ps(s){return ot.fromServerFormat(s.fieldPath)}function wm(s){return s instanceof Pe?function(t){if("=="===t.op){if(Td(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NAN"}};if(gd(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Td(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NOT_NAN"}};if(gd(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zn(t.field),op:AT(t.op),value:t.value}}}(s):s instanceof Ye?function(t){const i=t.getFilters().map(o=>wm(o));return 1===i.length?i[0]:{compositeFilter:{op:OT(t.op),filters:i}}}(s):me()}function RT(s){const n=[];return s.fields.forEach(t=>n.push(t.canonicalString())),{fieldPaths:n}}function Im(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}class Mn{constructor(n,t,i,o,a=be.min(),r=be.min(),l=pt.EMPTY_BYTE_STRING,c=null){this.target=n,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(n){return new Mn(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(n,t){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,n,null)}withExpectedCount(n){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,n)}withLastLimboFreeSnapshotVersion(n){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken,this.expectedCount)}}class Cm{constructor(n){this.ht=n}}function Ll(s){const n=ym({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Aa(n,n.limit,"L"):n}class Ri{constructor(){}Et(n,t){this.dt(n,t),t.At()}dt(n,t){if("nullValue"in n)this.Rt(t,5);else if("booleanValue"in n)this.Rt(t,10),t.Vt(n.booleanValue?1:0);else if("integerValue"in n)this.Rt(t,15),t.Vt(at(n.integerValue));else if("doubleValue"in n){const i=at(n.doubleValue);isNaN(i)?this.Rt(t,13):(this.Rt(t,15),to(i)?t.Vt(0):t.Vt(i))}else if("timestampValue"in n){let i=n.timestampValue;this.Rt(t,20),"string"==typeof i&&(i=Rn(i)),t.ft(`${i.seconds||""}`),t.Vt(i.nanos||0)}else if("stringValue"in n)this.gt(n.stringValue,t),this.yt(t);else if("bytesValue"in n)this.Rt(t,30),t.wt(Fn(n.bytesValue)),this.yt(t);else if("referenceValue"in n)this.St(n.referenceValue,t);else if("geoPointValue"in n){const i=n.geoPointValue;this.Rt(t,45),t.Vt(i.latitude||0),t.Vt(i.longitude||0)}else"mapValue"in n?bd(n)?this.Rt(t,Number.MAX_SAFE_INTEGER):Ca(n)?this.bt(n.mapValue,t):(this.Dt(n.mapValue,t),this.yt(t)):"arrayValue"in n?(this.vt(n.arrayValue,t),this.yt(t)):me()}gt(n,t){this.Rt(t,25),this.Ct(n,t)}Ct(n,t){t.ft(n)}Dt(n,t){const i=n.fields||{};this.Rt(t,55);for(const o of Object.keys(i))this.gt(o,t),this.dt(i[o],t)}bt(n,t){var i,o;const a=n.fields||{};this.Rt(t,53);const r="value",l=(null===(o=null===(i=a[r].arrayValue)||void 0===i?void 0:i.values)||void 0===o?void 0:o.length)||0;this.Rt(t,15),t.Vt(at(l)),this.gt(r,t),this.dt(a[r],t)}vt(n,t){const i=n.values||[];this.Rt(t,50);for(const o of i)this.dt(o,t)}St(n,t){this.Rt(t,37),ce.fromName(n).path.forEach(i=>{this.Rt(t,60),this.Ct(i,t)})}Rt(n,t){n.Vt(t)}yt(n){n.Vt(2)}}Ri.Ft=new Ri;class VT{constructor(){this.ln=new Ul}addToCollectionParentIndex(n,t){return this.ln.add(t),G.resolve()}getCollectionParents(n,t){return G.resolve(this.ln.getEntries(t))}addFieldIndex(n,t){return G.resolve()}deleteFieldIndex(n,t){return G.resolve()}deleteAllFieldIndexes(n){return G.resolve()}createTargetIndexes(n,t){return G.resolve()}getDocumentsMatchingTarget(n,t){return G.resolve(null)}getIndexType(n,t){return G.resolve(0)}getFieldIndexes(n,t){return G.resolve([])}getNextCollectionGroupToUpdate(n){return G.resolve(null)}getMinOffset(n,t){return G.resolve(tn.min())}getMinOffsetFromCollectionGroup(n,t){return G.resolve(tn.min())}updateCollectionGroup(n,t,i){return G.resolve()}updateIndexEntries(n,t){return G.resolve()}}class Ul{constructor(){this.index={}}add(n){const t=n.lastSegment(),i=n.popLast(),o=this.index[t]||new qe(Ge.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(n){const t=n.lastSegment(),i=n.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(n){return(this.index[n]||new qe(Ge.comparator)).toArray()}}new Uint8Array(0);const Lm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vt{static withCacheSize(n){return new Vt(n,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(n,t,i){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(41943040,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);class ji{constructor(n){this.kn=n}next(){return this.kn+=2,this.kn}static qn(){return new ji(0)}static Qn(){return new ji(-1)}}function Ym([s,n],[t,i]){const o=we(s,t);return 0===o?we(n,i):o}class $T{constructor(n){this.Gn=n,this.buffer=new qe(Ym),this.zn=0}jn(){return++this.zn}Hn(n){const t=[n,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ym(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Um{constructor(n,t,i){this.garbageCollector=n,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(n){var t=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,H.A)(function*(){t.Jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Un(i)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Yn(i)}yield t.Yn(3e5)}))}}class QT{constructor(n,t){this.Zn=n,this.params=t}calculateTargetCount(n,t){return this.Zn.Xn(n).next(i=>Math.floor(t/100*i))}nthSequenceNumber(n,t){if(0===t)return G.resolve(nn.oe);const i=new $T(t);return this.Zn.forEachTarget(n,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(n,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(n,t,i){return this.Zn.removeTargets(n,t,i)}removeOrphanedDocuments(n,t){return this.Zn.removeOrphanedDocuments(n,t)}collect(n,t){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Lm)):this.getCacheSize(n).next(i=>i<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lm):this.tr(n,t))}getCacheSize(n){return this.Zn.getCacheSize(n)}tr(n,t){let i,o,a,r,l,c,_;const d=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),o=this.params.maximumSequenceNumbersToCollect):o=p,r=Date.now(),this.nthSequenceNumber(n,o))).next(p=>(i=p,l=Date.now(),this.removeTargets(n,i,t))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(n,i))).next(p=>(_=Date.now(),Zi()<=gn.$b.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-d}ms\n\tDetermined least recently used ${o} in `+(l-r)+`ms\n\tRemoved ${a} targets in `+(c-l)+`ms\n\tRemoved ${p} documents in `+(_-c)+`ms\nTotal Duration: ${_-d}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:p})))}}class Wm{constructor(){this.changes=new zn(n=>n.toString(),(n,t)=>n.isEqual(t)),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,t){this.assertNotApplied(),this.changes.set(n,tt.newInvalidDocument(n).setReadTime(t))}getEntry(n,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?G.resolve(i):this.getFromCache(n,t)}getEntries(n,t){return this.getAllFromCache(n,t)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class XT{constructor(n,t){this.overlayedDocument=n,this.mutatedFields=t}}class ep{constructor(n,t,i,o){this.remoteDocumentCache=n,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(n,t){let i=null;return this.documentOverlayCache.getOverlay(n,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(n,t))).next(o=>(null!==i&&po(i.mutation,o,Jt.empty(),_t.now()),o))}getDocuments(n,t){return this.remoteDocumentCache.getEntries(n,t).next(i=>this.getLocalViewOfDocuments(n,i,Re()).next(()=>i))}getLocalViewOfDocuments(n,t,i=Re()){const o=vn();return this.populateOverlays(n,o,t).next(()=>this.computeViews(n,t,o,i).next(a=>{let r=uo();return a.forEach((l,c)=>{r=r.insert(l,c.overlayedDocument)}),r}))}getOverlayedDocuments(n,t){const i=vn();return this.populateOverlays(n,i,t).next(()=>this.computeViews(n,t,i,Re()))}populateOverlays(n,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(n,o).next(a=>{a.forEach((r,l)=>{t.set(r,l)})})}computeViews(n,t,i,o){let a=Kt();const r=_o(),l=_o();return t.forEach((c,_)=>{const d=i.get(_.key);o.has(_.key)&&(void 0===d||d.mutation instanceof Dn)?a=a.insert(_.key,_):void 0!==d?(r.set(_.key,d.mutation.getFieldMask()),po(d.mutation,_,d.mutation.getFieldMask(),_t.now())):r.set(_.key,Jt.empty())}),this.recalculateAndSaveOverlays(n,a).next(c=>(c.forEach((_,d)=>r.set(_,d)),t.forEach((_,d)=>{var p;return l.set(_,new XT(d,null!==(p=r.get(_))&&void 0!==p?p:null))}),l))}recalculateAndSaveOverlays(n,t){const i=_o();let o=new Ze((r,l)=>r-l),a=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,t).next(r=>{for(const l of r)l.keys().forEach(c=>{const _=t.get(c);if(null===_)return;let d=i.get(c)||Jt.empty();d=l.applyToLocalView(_,d),i.set(c,d);const p=(o.get(l.batchId)||Re()).add(c);o=o.insert(l.batchId,p)})}).next(()=>{const r=[],l=o.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),_=c.key,d=c.value,p=Qd();d.forEach(f=>{if(!a.has(f)){const v=Kd(t.get(f),i.get(f));null!==v&&p.set(f,v),a=a.add(f)}}),r.push(this.documentOverlayCache.saveOverlays(n,_,p))}return G.waitFor(r)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(n,t){return this.remoteDocumentCache.getEntries(n,t).next(i=>this.recalculateAndSaveOverlays(n,i))}getDocumentsMatchingQuery(n,t,i,o){return ce.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(n,t.path):kl(t)?this.getDocumentsMatchingCollectionGroupQuery(n,t,i,o):this.getDocumentsMatchingCollectionQuery(n,t,i,o);var r}getNextDocuments(n,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(n,t,i,o).next(a=>{const r=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,t,i.largestBatchId,o-a.size):G.resolve(vn());let l=-1,c=a;return r.next(_=>G.forEach(_,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),a.get(d)?G.resolve():this.remoteDocumentCache.getEntry(n,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(n,_,a)).next(()=>this.computeViews(n,c,_,Re())).next(d=>({batchId:l,changes:$d(d)})))})}getDocumentsMatchingDocumentQuery(n,t){return this.getDocument(n,new ce(t)).next(i=>{let o=uo();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(n,t,i,o){const a=t.collectionGroup;let r=uo();return this.indexManager.getCollectionParents(n,a).next(l=>G.forEach(l,c=>{const _=(p=t,f=c.child(a),new jn(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,f;return this.getDocumentsMatchingCollectionQuery(n,_,i,o).next(d=>{d.forEach((p,f)=>{r=r.insert(p,f)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(n,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(n,t.path,i.largestBatchId).next(r=>(a=r,this.remoteDocumentCache.getDocumentsMatchingQuery(n,t,i,a,o))).next(r=>{a.forEach((c,_)=>{const d=_.getKey();null===r.get(d)&&(r=r.insert(d,tt.newInvalidDocument(d)))});let l=uo();return r.forEach((c,_)=>{const d=a.get(c);void 0!==d&&po(d.mutation,_,Jt.empty(),_t.now()),co(t,_)&&(l=l.insert(c,_))}),l})}}class WT{constructor(n){this.serializer=n,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(n,t){return G.resolve(this.Tr.get(t))}saveBundleMetadata(n,t){return this.Tr.set(t.id,{id:(o=t).id,version:o.version,createTime:Tt(o.createTime)}),G.resolve();var o}getNamedQuery(n,t){return G.resolve(this.Ir.get(t))}saveNamedQuery(n,t){return this.Ir.set(t.name,{name:(o=t).name,query:Ll(o.bundledQuery),readTime:Tt(o.readTime)}),G.resolve();var o}}class HT{constructor(){this.overlays=new Ze(ce.comparator),this.Er=new Map}getOverlay(n,t){return G.resolve(this.overlays.get(t))}getOverlays(n,t){const i=vn();return G.forEach(t,o=>this.getOverlay(n,o).next(a=>{null!==a&&i.set(o,a)})).next(()=>i)}saveOverlays(n,t,i){return i.forEach((o,a)=>{this.Tt(n,t,a)}),G.resolve()}removeOverlaysForBatchId(n,t,i){const o=this.Er.get(i);return void 0!==o&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(i)),G.resolve()}getOverlaysForCollection(n,t,i){const o=vn(),a=t.length+1,r=new ce(t.child("")),l=this.overlays.getIteratorFrom(r);for(;l.hasNext();){const c=l.getNext().value,_=c.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&c.largestBatchId>i&&o.set(c.getKey(),c)}return G.resolve(o)}getOverlaysForCollectionGroup(n,t,i,o){let a=new Ze((_,d)=>_-d);const r=this.overlays.getIterator();for(;r.hasNext();){const _=r.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let d=a.get(_.largestBatchId);null===d&&(d=vn(),a=a.insert(_.largestBatchId,d)),d.set(_.getKey(),_)}}const l=vn(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((_,d)=>l.set(_,d)),!(l.size()>=o)););return G.resolve(l)}Tt(n,t,i){const o=this.overlays.get(i.key);if(null!==o){const r=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,r)}this.overlays=this.overlays.insert(i.key,new zl(t,i));let a=this.Er.get(t);void 0===a&&(a=Re(),this.Er.set(t,a)),this.Er.set(t,a.add(i.key))}}class JT{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(n){return G.resolve(this.sessionToken)}setSessionToken(n,t){return this.sessionToken=t,G.resolve()}}class Xl{constructor(){this.dr=new qe(Ot.Ar),this.Rr=new qe(Ot.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(n,t){const i=new Ot(n,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(n,t){n.forEach(i=>this.addReference(i,t))}removeReference(n,t){this.gr(new Ot(n,t))}pr(n,t){n.forEach(i=>this.removeReference(i,t))}yr(n){const t=new ce(new Ge([])),i=new Ot(t,n),o=new Ot(t,n+1),a=[];return this.Rr.forEachInRange([i,o],r=>{this.gr(r),a.push(r.key)}),a}wr(){this.dr.forEach(n=>this.gr(n))}gr(n){this.dr=this.dr.delete(n),this.Rr=this.Rr.delete(n)}Sr(n){const t=new ce(new Ge([])),i=new Ot(t,n),o=new Ot(t,n+1);let a=Re();return this.Rr.forEachInRange([i,o],r=>{a=a.add(r.key)}),a}containsKey(n){const t=new Ot(n,0),i=this.dr.firstAfterOrEqual(t);return null!==i&&n.isEqual(i.key)}}class Ot{constructor(n,t){this.key=n,this.br=t}static Ar(n,t){return ce.comparator(n.key,t.key)||we(n.br,t.br)}static Vr(n,t){return we(n.br,t.br)||ce.comparator(n.key,t.key)}}class KT{constructor(n,t){this.indexManager=n,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new qe(Ot.Ar)}checkEmpty(n){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(n,t,i,o){const a=this.Dr;this.Dr++;const r=new Fl(a,t,i,o);this.mutationQueue.push(r);for(const l of o)this.vr=this.vr.add(new Ot(l.key,a)),this.indexManager.addToCollectionParentIndex(n,l.key.path.popLast());return G.resolve(r)}lookupMutationBatch(n,t){return G.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(n,t){const o=this.Fr(t+1),a=o<0?0:o;return G.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(n){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,t){const i=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([i,o],r=>{const l=this.Cr(r.br);a.push(l)}),G.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(n,t){let i=new qe(we);return t.forEach(o=>{const a=new Ot(o,0),r=new Ot(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,r],l=>{i=i.add(l.br)})}),G.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(n,t){const i=t.path,o=i.length+1;let a=i;ce.isDocumentKey(a)||(a=a.child(""));const r=new Ot(new ce(a),0);let l=new qe(we);return this.vr.forEachWhile(c=>{const _=c.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(l=l.add(c.br)),!0)},r),G.resolve(this.Mr(l))}Mr(n){const t=[];return n.forEach(i=>{const o=this.Cr(i);null!==o&&t.push(o)}),t}removeMutationBatch(n,t){fe(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let i=this.vr;return G.forEach(t.mutations,o=>{const a=new Ot(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(n,o.key)}).next(()=>{this.vr=i})}Ln(n){}containsKey(n,t){const i=new Ot(t,0),o=this.vr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(n){return G.resolve()}Or(n,t){return this.Fr(n)}Fr(n){return 0===this.mutationQueue.length?0:n-this.mutationQueue[0].batchId}Cr(n){const t=this.Fr(n);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZT{constructor(n){this.Nr=n,this.docs=new Ze(ce.comparator),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,r=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:r}),this.size+=r-a,this.indexManager.addToCollectionParentIndex(n,i.path.popLast())}removeEntry(n){const t=this.docs.get(n);t&&(this.docs=this.docs.remove(n),this.size-=t.size)}getEntry(n,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(n,t){let i=Kt();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():tt.newInvalidDocument(o))}),G.resolve(i)}getDocumentsMatchingQuery(n,t,i,o){let a=Kt();const r=t.path,l=new ce(r.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:_,value:{document:d}}=c.getNext();if(!r.isPrefixOf(_.path))break;_.path.length>r.length+1||fl(new tn((s=d).readTime,s.key,-1),i)<=0||(o.has(d.key)||co(t,d))&&(a=a.insert(d.key,d.mutableCopy()))}var s;return G.resolve(a)}getAllFromCollectionGroup(n,t,i,o){me()}Lr(n,t){return G.forEach(this.docs,i=>t(i))}newChangeBuffer(n){return new eb(this)}getSize(n){return G.resolve(this.size)}}class eb extends Wm{constructor(n){super(),this.hr=n}applyChanges(n){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(n,o)):this.hr.removeEntry(i)}),G.waitFor(t)}getFromCache(n,t){return this.hr.getEntry(n,t)}getAllFromCache(n,t){return this.hr.getEntries(n,t)}}class tb{constructor(n){this.persistence=n,this.Br=new zn(t=>Ii(t),ro),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.kr=0,this.qr=new Xl,this.targetCount=0,this.Qr=ji.qn()}forEachTarget(n,t){return this.Br.forEach((i,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(n){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return G.resolve(this.kr)}allocateTargetId(n){return this.highestTargetId=this.Qr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(n,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),G.resolve()}Un(n){this.Br.set(n.target,n);const t=n.targetId;t>this.highestTargetId&&(this.Qr=new ji(t),this.highestTargetId=t),n.sequenceNumber>this.kr&&(this.kr=n.sequenceNumber)}addTargetData(n,t){return this.Un(t),this.targetCount+=1,G.resolve()}updateTargetData(n,t){return this.Un(t),G.resolve()}removeTargetData(n,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(n,t,i){let o=0;const a=[];return this.Br.forEach((r,l)=>{l.sequenceNumber<=t&&null===i.get(l.targetId)&&(this.Br.delete(r),a.push(this.removeMatchingKeysForTargetId(n,l.targetId)),o++)}),G.waitFor(a).next(()=>o)}getTargetCount(n){return G.resolve(this.targetCount)}getTargetData(n,t){const i=this.Br.get(t)||null;return G.resolve(i)}addMatchingKeys(n,t,i){return this.qr.mr(t,i),G.resolve()}removeMatchingKeys(n,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(r=>{a.push(o.markPotentiallyOrphaned(n,r))}),G.waitFor(a)}removeMatchingKeysForTargetId(n,t){return this.qr.yr(t),G.resolve()}getMatchingKeysForTargetId(n,t){const i=this.qr.Sr(t);return G.resolve(i)}containsKey(n,t){return G.resolve(this.qr.containsKey(t))}}class Wl{constructor(n,t){this.Kr={},this.overlays={},this.$r=new nn(0),this.Ur=!1,this.Ur=!0,this.Wr=new JT,this.referenceDelegate=n(this),this.Gr=new tb(this),this.indexManager=new VT,this.remoteDocumentCache=new ZT(i=>this.referenceDelegate.zr(i)),this.serializer=new Cm(t),this.jr=new WT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let t=this.overlays[n.toKey()];return t||(t=new HT,this.overlays[n.toKey()]=t),t}getMutationQueue(n,t){let i=this.Kr[n.toKey()];return i||(i=new KT(t,this.referenceDelegate),this.Kr[n.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(n,t,i){ne("MemoryPersistence","Starting transaction:",n);const o=new nb(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(n,t){return G.or(Object.values(this.Kr).map(i=>()=>i.containsKey(n,t)))}}class nb extends ed{constructor(n){super(),this.currentSequenceNumber=n}}class Qa{constructor(n){this.persistence=n,this.Zr=new Xl,this.Xr=null}static ei(n){return new Qa(n)}get ti(){if(this.Xr)return this.Xr;throw me()}addReference(n,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),G.resolve()}removeReference(n,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),G.resolve()}markPotentiallyOrphaned(n,t){return this.ti.add(t.toString()),G.resolve()}removeTarget(n,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(n,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>i.removeTargetData(n,t))}Hr(){this.Xr=new Set}Jr(n){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ti,i=>{const o=ce.fromPath(i);return this.ni(n,o).next(a=>{a||t.removeEntry(o,be.min())})}).next(()=>(this.Xr=null,t.apply(n)))}updateLimboDocument(n,t){return this.ni(n,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(n){return 0}ni(n,t){return G.or([()=>G.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(n,t),()=>this.persistence.Yr(n,t)])}}class qa{constructor(n,t){this.persistence=n,this.ri=new zn(i=>function Pt(s){let n="";for(let t=0;t<s.length;t++)n.length>0&&(n=sd(n)),n=E1(s.get(t),n);return sd(n)}(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=function Xm(s,n){return new QT(s,n)}(this,t)}static ei(n,t){return new qa(n,t)}Hr(){}Jr(n){return G.resolve()}forEachTarget(n,t){return this.persistence.getTargetCache().forEachTarget(n,t)}Xn(n){const t=this.nr(n);return this.persistence.getTargetCache().getTargetCount(n).next(i=>t.next(o=>i+o))}nr(n){let t=0;return this.er(n,i=>{t++}).next(()=>t)}er(n,t){return G.forEach(this.ri,(i,o)=>this.ir(n,i,o).next(a=>a?G.resolve():t(o)))}removeTargets(n,t,i){return this.persistence.getTargetCache().removeTargets(n,t,i)}removeOrphanedDocuments(n,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Lr(n,r=>this.ir(n,r,t).next(l=>{l||(i++,a.removeEntry(r,be.min()))})).next(()=>a.apply(n)).next(()=>i)}markPotentiallyOrphaned(n,t){return this.ri.set(t,n.currentSequenceNumber),G.resolve()}removeTarget(n,t){const i=t.withSequenceNumber(n.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(n,i)}addReference(n,t,i){return this.ri.set(i,n.currentSequenceNumber),G.resolve()}removeReference(n,t,i){return this.ri.set(i,n.currentSequenceNumber),G.resolve()}updateLimboDocument(n,t){return this.ri.set(t,n.currentSequenceNumber),G.resolve()}zr(n){let t=n.key.toString().length;return n.isFoundDocument()&&(t+=wa(n.data.value)),t}ir(n,t,i){return G.or([()=>this.persistence.Yr(n,t),()=>this.persistence.getTargetCache().containsKey(n,t),()=>{const o=this.ri.get(t);return G.resolve(void 0!==o&&o>i)}])}getCacheSize(n){return this.persistence.getRemoteDocumentCache().getSize(n)}}class Zl{constructor(n,t,i,o){this.targetId=n,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(n,t){let i=Re(),o=Re();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Zl(n,t.fromCache,i,o)}}class sb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(n){this._documentReadCount+=n}}class np{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=(0,st.nr)()?8:function td(s){const n=s.match(/Android ([\d.]+)/i),t=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(t)}((0,st.ZQ)())>0?6:4}initialize(n,t){this.Zi=n,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(n,t,i,o){const a={result:null};return this.Xi(n,t).next(r=>{a.result=r}).next(()=>{if(!a.result)return this.es(n,t,o,i).next(r=>{a.result=r})}).next(()=>{if(a.result)return;const r=new sb;return this.ts(n,t,r).next(l=>{if(a.result=l,this.Hi)return this.ns(n,t,r,l.size)})}).next(()=>a.result)}ns(n,t,i,o){return i.documentReadCount<this.Ji?(Zi()<=gn.$b.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ls(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),G.resolve()):(Zi()<=gn.$b.DEBUG&&ne("QueryEngine","Query:",ls(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(Zi()<=gn.$b.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ls(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(n,Nt(t))):G.resolve())}Xi(n,t){if(Md(t))return G.resolve(null);let i=Nt(t);return this.indexManager.getIndexType(n,i).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Aa(t,null,"F"),i=Nt(t)),this.indexManager.getDocumentsMatchingTarget(n,i).next(a=>{const r=Re(...a);return this.Zi.getDocuments(n,r).next(l=>this.indexManager.getMinOffset(n,i).next(c=>{const _=this.rs(t,l);return this.ss(t,_,r,c.readTime)?this.Xi(n,Aa(t,null,"F")):this.os(n,_,t,c)}))})))}es(n,t,i,o){return Md(t)||o.isEqual(be.min())?G.resolve(null):this.Zi.getDocuments(n,i).next(a=>{const r=this.rs(t,a);return this.ss(t,r,i,o)?G.resolve(null):(Zi()<=gn.$b.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ls(t)),this.os(n,r,t,function J_(s,n){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=be.fromTimestamp(1e9===i?new _t(t+1,0):new _t(t,i));return new tn(o,ce.empty(),n)}(o,-1)).next(l=>l))})}rs(n,t){let i=new qe(Ld(n));return t.forEach((o,a)=>{co(n,a)&&(i=i.add(a))}),i}ss(n,t,i,o){if(null===n.limit)return!1;if(i.size!==t.size)return!0;const a="F"===n.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(n,t,i){return Zi()<=gn.$b.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ls(t)),this.Zi.getDocumentsMatchingQuery(n,t,tn.min(),i)}os(n,t,i,o){return this.Zi.getDocumentsMatchingQuery(n,i,o).next(a=>(t.forEach(r=>{a=a.insert(r.key,r)}),a))}}class ob{constructor(n,t,i,o){this.persistence=n,this._s=t,this.serializer=o,this.us=new Ze(we),this.cs=new zn(a=>Ii(a),ro),this.ls=new Map,this.hs=n.getRemoteDocumentCache(),this.Gr=n.getTargetCache(),this.jr=n.getBundleCache(),this.Ps(i)}Ps(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new ep(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>n.collect(t,this.us))}}function sp(s,n){return ec.apply(this,arguments)}function ec(){return(ec=(0,H.A)(function*(s,n){const t=re(s);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Ps(n),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const r=[],l=[];let c=Re();for(const _ of o){r.push(_.batchId);for(const d of _.mutations)c=c.add(d.key)}for(const _ of a){l.push(_.batchId);for(const d of _.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(i,c).next(_=>({Ts:_,removedBatchIds:r,addedBatchIds:l}))})})})).apply(this,arguments)}function op(s){const n=re(s);return n.persistence.runTransaction("Get last remote snapshot version","readonly",t=>n.Gr.getLastRemoteSnapshotVersion(t))}function lb(s,n){const t=re(s);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===n&&(n=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,n)))}function xs(s,n,t){return tc.apply(this,arguments)}function tc(){return(tc=(0,H.A)(function*(s,n,t){const i=re(s),o=i.us.get(n),a=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",a,r=>i.persistence.referenceDelegate.removeTarget(r,o)))}catch(r){if(!Un(r))throw r;ne("LocalStore",`Failed to update sequence numbers for target ${n}: ${r}`)}i.us=i.us.remove(n),i.cs.delete(o.target)})).apply(this,arguments)}function Ua(s,n,t){const i=re(s);let o=be.min(),a=Re();return i.persistence.runTransaction("Execute query","readwrite",r=>function(c,_,d){const p=re(c),f=p.cs.get(d);return void 0!==f?G.resolve(p.us.get(f)):p.Gr.getTargetData(_,d)}(i,r,Nt(n)).next(l=>{if(l)return o=l.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(r,l.targetId).next(c=>{a=c})}).next(()=>i._s.getDocumentsMatchingQuery(r,n,t?o:be.min(),t?a:Re())).next(l=>(function cp(s,n,t){let i=s.ls.get(n)||be.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),s.ls.set(n,i)}(i,function Vd(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}(n),l),{documents:l,ds:a})))}class ac{constructor(){this.activeTargetIds=function Al(){return cT}()}ps(n){this.activeTargetIds=this.activeTargetIds.add(n)}ys(n){this.activeTargetIds=this.activeTargetIds.delete(n)}gs(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class dp{constructor(){this._o=new ac,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,t,i){}addLocalQueryTarget(n,t=!0){return t&&this._o.ps(n),this.ao[n]||"not-current"}updateQueryState(n,t,i){this.ao[n]=t}removeLocalQueryTarget(n){this._o.ys(n)}isLocalQueryTarget(n){return this._o.activeTargetIds.has(n)}clearQueryState(n){delete this.ao[n]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(n){return this._o.activeTargetIds.has(n)}start(){return this._o=new ac,Promise.resolve()}handleUserChange(n,t,i){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}class _b{uo(n){}shutdown(){}}class mp{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(n){this.To.push(n)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.To)n(0)}Po(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.To)n(1)}static p(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ha=null;function lc(){return null===Ha?Ha=268435456+Math.round(2147483648*Math.random()):Ha++,"0x"+Ha.toString(16)}const db={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mb{constructor(n){this.Eo=n.Eo,this.Ao=n.Ao}Ro(n){this.Vo=n}mo(n){this.fo=n}po(n){this.yo=n}onMessage(n){this.wo=n}close(){this.Ao()}send(n){this.Eo(n)}So(){this.Vo()}bo(){this.fo()}Do(n){this.yo(n)}vo(n){this.wo(n)}}const Lt="WebChannelConnection";class pb extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo="(default)"===this.databaseId.database?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,i,o,a,r){const l=lc(),c=this.No(t,i.toUriEncodedString());ne("RestConnection",`Sending RPC '${t}' ${l}:`,c,o);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(_,a,r),this.Bo(t,c,_,o).then(d=>(ne("RestConnection",`Received RPC '${t}' ${l}: `,d),d),d=>{throw rn("RestConnection",`RPC '${t}' ${l} failed with error: `,d,"url: ",c,"request:",o),d})}ko(t,i,o,a,r,l){return this.Oo(t,i,o,a,r)}Lo(t,i,o){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ki,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,r)=>t[r]=a),o&&o.headers.forEach((a,r)=>t[r]=a)}No(t,i){return`${this.Fo}/v1/${i}:${db[t]}`}terminate(){}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams,this.longPollingOptions=n.longPollingOptions}Bo(n,t,i,o){const a=lc();return new Promise((r,l)=>{const c=new L_;c.setWithCredentials(!0),c.listenOnce(B_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ga.NO_ERROR:const d=c.getResponseJson();ne(Lt,`XHR for RPC '${n}' ${a} received:`,JSON.stringify(d)),r(d);break;case ga.TIMEOUT:ne(Lt,`RPC '${n}' ${a} timed out`),l(new ie($.DEADLINE_EXCEEDED,"Request time out"));break;case ga.HTTP_ERROR:const p=c.getStatus();if(ne(Lt,`RPC '${n}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const v=f?.error;if(v&&v.status&&v.message){const w=function(S){const A=S.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(A)>=0?A:$.UNKNOWN}(v.status);l(new ie(w,v.message))}else l(new ie($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ie($.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ne(Lt,`RPC '${n}' ${a} completed.`)}});const _=JSON.stringify(o);ne(Lt,`RPC '${n}' ${a} sending request:`,o),c.send(t,"POST",_,i,15)})}qo(n,t,i){const o=lc(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",n,"/channel"],r=q_(),l=Q_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(c.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const d=a.join("");ne(Lt,`Creating RPC '${n}' stream ${o}: ${d}`,c);const p=r.createWebChannel(d,c);let f=!1,v=!1;const w=new mb({Eo:S=>{v?ne(Lt,`Not sending because RPC '${n}' stream ${o} is closed:`,S):(f||(ne(Lt,`Opening RPC '${n}' stream ${o} transport.`),p.open(),f=!0),ne(Lt,`RPC '${n}' stream ${o} sending:`,S),p.send(S))},Ao:()=>p.close()}),y=(S,A,j)=>{S.listen(A,V=>{try{j(V)}catch(N){setTimeout(()=>{throw N},0)}})};return y(p,Js.EventType.OPEN,()=>{v||(ne(Lt,`RPC '${n}' stream ${o} transport opened.`),w.So())}),y(p,Js.EventType.CLOSE,()=>{v||(v=!0,ne(Lt,`RPC '${n}' stream ${o} transport closed`),w.Do())}),y(p,Js.EventType.ERROR,S=>{v||(v=!0,rn(Lt,`RPC '${n}' stream ${o} transport errored:`,S),w.Do(new ie($.UNAVAILABLE,"The operation could not be completed")))}),y(p,Js.EventType.MESSAGE,S=>{var A;if(!v){const j=S.data[0];fe(!!j);const V=j,N=V?.error||(null===(A=V[0])||void 0===A?void 0:A.error);if(N){ne(Lt,`RPC '${n}' stream ${o} received error:`,N);const X=N.status;let te=function(C){const E=yt[C];if(void 0!==E)return om(E)}(X),I=N.message;void 0===te&&(te=$.INTERNAL,I="Unknown error status: "+X+" with message "+N.message),v=!0,w.Do(new ie(te,I)),p.close()}else ne(Lt,`RPC '${n}' stream ${o} received:`,j),w.vo(j)}}),y(l,$_.STAT_EVENT,S=>{S.stat===ml.PROXY?ne(Lt,`RPC '${n}' stream ${o} detected buffering proxy`):S.stat===ml.NOPROXY&&ne(Lt,`RPC '${n}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{w.bo()},0),w}}function Ja(){return typeof document<"u"?document:null}function ko(s){return new yT(s,!0)}class cc{constructor(n,t,i=1e3,o=1.5,a=6e4){this.li=n,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(n){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),n())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class hp{constructor(n,t,i,o,a,r,l,c){this.li=n,this.Yo=i,this.Zo=o,this.connection=a,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new cc(n,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}stop(){var n=this;return(0,H.A)(function*(){n.i_()&&(yield n.close(0))})()}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(n){this.l_(),this.stream.send(n)}u_(){var n=this;return(0,H.A)(function*(){if(n.s_())return n.close(0)})()}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(n,t){var i=this;return(0,H.A)(function*(){i.l_(),i.h_(),i.r_.cancel(),i.Xo++,4!==n?i.r_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(gt(t.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),i.r_.zo()):t&&t.code===$.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.P_(),i.stream.close(),i.stream=null),i.state=n,yield i.listener.po(t)})()}P_(){}auth(){this.state=1;const n=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{n(()=>{const o=new ie($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(n,t){const i=this.T_(this.Xo);this.stream=this.d_(n,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>1==++this.n_?this.A_(o):this.onNext(o))})}o_(){var n=this;this.state=5,this.r_.jo((0,H.A)(function*(){n.state=0,n.start()}))}E_(n){return ne("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(4,n)}T_(n){return t=>{this.li.enqueueAndForget(()=>this.Xo===n?t():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hb extends hp{constructor(n,t,i,o,a,r){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,r),this.serializer=a}d_(n,t){return this.connection.qo("Listen",n,t)}A_(n){return this.onNext(n)}onNext(n){this.r_.reset();const t=function IT(s,n){let t;if("targetChange"in n){const i="NO_CHANGE"===(_=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:me(),o=n.targetChange.targetIds||[],a=function(_,d){return _.useProto3Json?(fe(void 0===d||"string"==typeof d),pt.fromBase64String(d||"")):(fe(void 0===d||d instanceof Buffer||d instanceof Uint8Array),pt.fromUint8Array(d||new Uint8Array))}(s,n.targetChange.resumeToken),r=n.targetChange.cause,l=r&&function(_){const d=void 0===_.code?$.UNKNOWN:om(_.code);return new ie(d,_.message||"")}(r);t=new um(i,o,a,l||null)}else if("documentChange"in n){const i=n.documentChange,o=yn(s,i.document.name),a=Tt(i.document.updateTime),r=i.document.createTime?Tt(i.document.createTime):be.min(),l=new jt({mapValue:{fields:i.document.fields}}),c=tt.newFoundDocument(o,a,r,l);t=new za(i.targetIds||[],i.removedTargetIds||[],c.key,c)}else if("documentDelete"in n){const i=n.documentDelete,o=yn(s,i.document),a=i.readTime?Tt(i.readTime):be.min(),r=tt.newNoDocument(o,a);t=new za([],i.removedTargetIds||[],r.key,r)}else if("documentRemove"in n){const i=n.documentRemove,o=yn(s,i.document);t=new za([],i.removedTargetIds||[],o,null)}else{if(!("filter"in n))return me();{const i=n.filter,{count:o=0,unchangedNames:a}=i,r=new fT(o,a);t=new cm(i.targetId,r)}}var _;return t}(this.serializer,n),i=function(a){if(!("targetChange"in a))return be.min();const r=a.targetChange;return r.targetIds&&r.targetIds.length?be.min():r.readTime?Tt(r.readTime):be.min()}(n);return this.listener.R_(t,i)}V_(n){const t={};t.database=Nl(this.serializer),t.addTarget=function(a,r){let l;const c=r.target;if(l=ka(c)?{documents:xm(a,c)}:{query:Ma(a,c).ct},l.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){l.resumeToken=mm(a,r.resumeToken);const _=Ml(a,r.expectedCount);null!==_&&(l.expectedCount=_)}else if(r.snapshotVersion.compareTo(be.min())>0){l.readTime=ms(a,r.snapshotVersion.toTimestamp());const _=Ml(a,r.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,n);const i=function kT(s,n){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(n.purpose);return null==t?null:{"goog-listen-tags":t}}(0,n);i&&(t.labels=i),this.c_(t)}m_(n){const t={};t.database=Nl(this.serializer),t.removeTarget=n,this.c_(t)}}class fb extends hp{constructor(n,t,i,o,a,r){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,r),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(n,t){return this.connection.qo("Write",n,t)}A_(n){return fe(!!n.streamToken),this.lastStreamToken=n.streamToken,fe(!n.writeResults||0===n.writeResults.length),this.listener.p_()}onNext(n){fe(!!n.streamToken),this.lastStreamToken=n.streamToken,this.r_.reset();const t=function CT(s,n){return s&&s.length>0?(fe(void 0!==n),s.map(t=>function(o,a){let r=Tt(o.updateTime?o.updateTime:a);return r.isEqual(be.min())&&(r=Tt(a)),new mT(r,o.transformResults||[])}(t,n))):[]}(n.writeResults,n.commitTime),i=Tt(n.commitTime);return this.listener.y_(i,t)}w_(){const n={};n.database=Nl(this.serializer),this.c_(n)}g_(n){const t={streamToken:this.lastStreamToken,writes:n.map(i=>function bo(s,n){let t;if(n instanceof _s)t={update:Tm(s,n.key,n.value)};else if(n instanceof ds)t={delete:To(s,n.key)};else if(n instanceof Dn)t={update:Tm(s,n.key,n.data),updateMask:RT(n.fieldMask)};else{if(!(n instanceof Rl))return me();t={verify:To(s,n.key)}}return n.fieldTransforms.length>0&&(t.updateTransforms=n.fieldTransforms.map(i=>function(a,r){const l=r.transform;if(l instanceof cs)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ci)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ki)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof us)return{fieldPath:r.field.canonicalString(),increment:l.Pe};throw me()}(0,i))),n.precondition.isNone||(t.currentDocument=void 0!==(a=n.precondition).updateTime?{updateTime:ST(s,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:me()),t;var a}(this.serializer,i))};this.c_(t)}}class gb extends class{}{constructor(n,t,i,o){super(),this.authCredentials=n,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(n,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,r])=>this.connection.Oo(n,Pl(t,i),o,a,r)).catch(a=>{throw"FirebaseError"===a.name?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie($.UNKNOWN,a.toString())})}ko(n,t,i,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.connection.ko(n,Pl(t,i),o,r,l,a)).catch(r=>{throw"FirebaseError"===r.name?(r.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ie($.UNKNOWN,r.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Tb{constructor(n,t){this.asyncQueue=n,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(n){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.M_("Offline")))}set(n){this.N_(),this.D_=0,"Online"===n&&(this.C_=!1),this.M_(n)}M_(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}x_(n){const t=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(gt(t),this.C_=!1):ne("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class bb{constructor(n,t,i,o,a){var r=this;this.localStore=n,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(l=>{i.enqueueAndForget((0,H.A)(function*(){var c;ii(r)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,H.A)(function*(d){const p=re(d);p.k_.add(4),yield vs(p),p.K_.set("Unknown"),p.k_.delete(4),yield Eo(p)}),function _(d){return c.apply(this,arguments)})(r))}))}),this.K_=new Tb(i,o)}}function Eo(s){return uc.apply(this,arguments)}function uc(){return(uc=(0,H.A)(function*(s){if(ii(s))for(const n of s.q_)yield n(!0)})).apply(this,arguments)}function vs(s){return _c.apply(this,arguments)}function _c(){return(_c=(0,H.A)(function*(s){for(const n of s.q_)yield n(!1)})).apply(this,arguments)}function Ka(s,n){const t=re(s);t.B_.has(n.targetId)||(t.B_.set(n.targetId,n),pc(t)?mc(t):ws(t).s_()&&dc(t,n))}function ys(s,n){const t=re(s),i=ws(t);t.B_.delete(n),i.s_()&&fp(t,n),0===t.B_.size&&(i.s_()?i.a_():ii(t)&&t.K_.set("Unknown"))}function dc(s,n){if(s.U_.xe(n.targetId),n.resumeToken.approximateByteSize()>0||n.snapshotVersion.compareTo(be.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(n.targetId).size;n=n.withExpectedCount(t)}ws(s).V_(n)}function fp(s,n){s.U_.xe(n),ws(s).m_(n)}function mc(s){s.U_=new TT({getRemoteKeysForTarget:n=>s.remoteSyncer.getRemoteKeysForTarget(n),ut:n=>s.B_.get(n)||null,nt:()=>s.datastore.serializer.databaseId}),ws(s).start(),s.K_.F_()}function pc(s){return ii(s)&&!ws(s).i_()&&s.B_.size>0}function ii(s){return 0===re(s).k_.size}function gp(s){s.U_=void 0}function xb(s){return hc.apply(this,arguments)}function hc(){return(hc=(0,H.A)(function*(s){s.K_.set("Online")})).apply(this,arguments)}function vb(s){return fc.apply(this,arguments)}function fc(){return(fc=(0,H.A)(function*(s){s.B_.forEach((n,t)=>{dc(s,n)})})).apply(this,arguments)}function yb(s,n){return gc.apply(this,arguments)}function gc(){return(gc=(0,H.A)(function*(s,n){gp(s),pc(s)?(s.K_.O_(n),mc(s)):s.K_.set("Unknown")})).apply(this,arguments)}function Sb(s,n,t){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,H.A)(function*(s,n,t){if(s.K_.set("Online"),n instanceof um&&2===n.state&&n.cause)try{yield(i=(0,H.A)(function*(a,r){const l=r.cause;for(const c of r.targetIds)a.B_.has(c)&&(yield a.remoteSyncer.rejectListen(c,l),a.B_.delete(c),a.U_.removeTarget(c))}),function o(a,r){return i.apply(this,arguments)})(s,n)}catch(i){ne("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),i),yield Za(s,i)}else if(n instanceof za?s.U_.$e(n):n instanceof cm?s.U_.Je(n):s.U_.Ge(n),!t.isEqual(be.min()))try{const i=yield op(s.localStore);t.compareTo(i)>=0&&(yield function(a,r){const l=a.U_.it(r);return l.targetChanges.forEach((c,_)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.B_.get(_);d&&a.B_.set(_,d.withResumeToken(c.resumeToken,r))}}),l.targetMismatches.forEach((c,_)=>{const d=a.B_.get(c);if(!d)return;a.B_.set(c,d.withResumeToken(pt.EMPTY_BYTE_STRING,d.snapshotVersion)),fp(a,c);const p=new Mn(d.target,c,_,d.sequenceNumber);dc(a,p)}),a.remoteSyncer.applyRemoteEvent(l)}(s,t))}catch(i){ne("RemoteStore","Failed to raise snapshot:",i),yield Za(s,i)}var i}),Tc.apply(this,arguments)}function Za(s,n,t){return bc.apply(this,arguments)}function bc(){return(bc=(0,H.A)(function*(s,n,t){if(!Un(n))throw n;s.k_.add(1),yield vs(s),s.K_.set("Offline"),t||(t=()=>op(s.localStore)),s.asyncQueue.enqueueRetryable((0,H.A)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield t(),s.k_.delete(1),yield Eo(s)}))})).apply(this,arguments)}function Tp(s,n){return n().catch(t=>Za(s,t,n))}function Ss(s){return xc.apply(this,arguments)}function xc(){return(xc=(0,H.A)(function*(s){const n=re(s),t=si(n);let i=n.L_.length>0?n.L_[n.L_.length-1].batchId:-1;for(;wb(n);)try{const o=yield lb(n.localStore,i);if(null===o){0===n.L_.length&&t.a_();break}i=o.batchId,Ib(n,o)}catch(o){yield Za(n,o)}bp(n)&&xp(n)})).apply(this,arguments)}function wb(s){return ii(s)&&s.L_.length<10}function Ib(s,n){s.L_.push(n);const t=si(s);t.s_()&&t.f_&&t.g_(n.mutations)}function bp(s){return ii(s)&&!si(s).i_()&&s.L_.length>0}function xp(s){si(s).start()}function Cb(s){return vc.apply(this,arguments)}function vc(){return(vc=(0,H.A)(function*(s){si(s).w_()})).apply(this,arguments)}function kb(s){return yc.apply(this,arguments)}function yc(){return(yc=(0,H.A)(function*(s){const n=si(s);for(const t of s.L_)n.g_(t.mutations)})).apply(this,arguments)}function Eb(s,n,t){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,H.A)(function*(s,n,t){const i=s.L_.shift(),o=jl.from(i,n,t);yield Tp(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),yield Ss(s)})).apply(this,arguments)}function Ab(s,n){return wc.apply(this,arguments)}function wc(){return wc=(0,H.A)(function*(s,n){var t;n&&si(s).f_&&(yield(t=(0,H.A)(function*(o,a){if(function sm(s){switch(s){default:return me();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}(l=a.code)&&l!==$.ABORTED){const r=o.L_.shift();si(o).__(),yield Tp(o,()=>o.remoteSyncer.rejectFailedWrite(r.batchId,a)),yield Ss(o)}var l}),function i(o,a){return t.apply(this,arguments)})(s,n)),bp(s)&&xp(s)}),wc.apply(this,arguments)}function vp(s,n){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,H.A)(function*(s,n){const t=re(s);t.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const i=ii(t);t.k_.add(3),yield vs(t),i&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(n),t.k_.delete(3),yield Eo(t)})).apply(this,arguments)}function Cc(s,n){return kc.apply(this,arguments)}function kc(){return(kc=(0,H.A)(function*(s,n){const t=re(s);n?(t.k_.delete(2),yield Eo(t)):n||(t.k_.add(2),yield vs(t),t.K_.set("Unknown"))})).apply(this,arguments)}function ws(s){return s.W_||(s.W_=function(t,i,o){const a=re(t);return a.b_(),new hb(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(s.datastore,s.asyncQueue,{Ro:xb.bind(null,s),mo:vb.bind(null,s),po:yb.bind(null,s),R_:Sb.bind(null,s)}),s.q_.push(function(){var n=(0,H.A)(function*(t){t?(s.W_.__(),pc(s)?mc(s):s.K_.set("Unknown")):(yield s.W_.stop(),gp(s))});return function(t){return n.apply(this,arguments)}}())),s.W_}function si(s){return s.G_||(s.G_=function(t,i,o){const a=re(t);return a.b_(),new fb(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(s.datastore,s.asyncQueue,{Ro:()=>Promise.resolve(),mo:Cb.bind(null,s),po:Ab.bind(null,s),p_:kb.bind(null,s),y_:Eb.bind(null,s)}),s.q_.push(function(){var n=(0,H.A)(function*(t){t?(s.G_.__(),yield Ss(s)):(yield s.G_.stop(),s.L_.length>0&&(ne("RemoteStore",`Stopping write stream with ${s.L_.length} pending writes`),s.L_=[]))});return function(t){return n.apply(this,arguments)}}())),s.G_}class Ec{constructor(n,t,i,o,a){this.asyncQueue=n,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(n,t,i,o,a){const r=Date.now()+i,l=new Ec(n,t,r,o,a);return l.start(i),l}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ie($.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Is(s,n){if(gt("AsyncQueue",`${n}: ${s}`),Un(s))return new ie($.UNAVAILABLE,`${n}: ${s}`);throw s}class Cs{static emptySet(n){return new Cs(n.comparator)}constructor(n){this.comparator=n?(t,i)=>n(t,i)||ce.comparator(t.key,i.key):(t,i)=>ce.comparator(t.key,i.key),this.keyedMap=uo(),this.sortedSet=new Ze(this.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const t=this.keyedMap.get(n);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((t,i)=>(n(t),!1))}add(n){const t=this.delete(n.key);return t.copy(t.keyedMap.insert(n.key,n),t.sortedSet.insert(n,null))}delete(n){const t=this.get(n);return t?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(t)):this}isEqual(n){if(!(n instanceof Cs)||this.size!==n.size)return!1;const t=this.sortedSet.getIterator(),i=n.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const n=[];return this.forEach(t=>{n.push(t.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,t){const i=new Cs;return i.comparator=this.comparator,i.keyedMap=n,i.sortedSet=t,i}}class yp{constructor(){this.z_=new Ze(ce.comparator)}track(n){const t=n.doc.key,i=this.z_.get(t);i?0!==n.type&&3===i.type?this.z_=this.z_.insert(t,n):3===n.type&&1!==i.type?this.z_=this.z_.insert(t,{type:i.type,doc:n.doc}):2===n.type&&2===i.type?this.z_=this.z_.insert(t,{type:2,doc:n.doc}):2===n.type&&0===i.type?this.z_=this.z_.insert(t,{type:0,doc:n.doc}):1===n.type&&0===i.type?this.z_=this.z_.remove(t):1===n.type&&2===i.type?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):0===n.type&&1===i.type?this.z_=this.z_.insert(t,{type:2,doc:n.doc}):me():this.z_=this.z_.insert(t,n)}j_(){const n=[];return this.z_.inorderTraversal((t,i)=>{n.push(i)}),n}}class ks{constructor(n,t,i,o,a,r,l,c,_){this.query=n,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=r,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=_}static fromInitialDocuments(n,t,i,o,a){const r=[];return t.forEach(l=>{r.push({type:0,doc:l})}),new ks(n,t,Cs.emptySet(t),r,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&lo(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const t=this.docChanges,i=n.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class Ob{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(n=>n.Z_())}}class Rb{constructor(){this.queries=Sp(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(t,i){const o=re(t),a=o.queries;o.queries=Sp(),a.forEach((r,l)=>{for(const c of l.J_)c.onError(i)})}(this,new ie($.ABORTED,"Firestore shutting down"))}}function Sp(){return new zn(s=>Nd(s),lo)}function Ac(s,n){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,H.A)(function*(s,n){const t=re(s);let i=3;const o=n.query;let a=t.queries.get(o);a?!a.Y_()&&n.Z_()&&(i=2):(a=new Ob,i=n.Z_()?0:1);try{switch(i){case 0:a.H_=yield t.onListen(o,!0);break;case 1:a.H_=yield t.onListen(o,!1);break;case 2:yield t.onFirstRemoteStoreListen(o)}}catch(r){const l=Is(r,`Initialization of query '${ls(n.query)}' failed`);return void n.onError(l)}t.queries.set(o,a),a.J_.push(n),n.ea(t.onlineState),a.H_&&n.ta(a.H_)&&jc(t)})).apply(this,arguments)}function Rc(s,n){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,H.A)(function*(s,n){const t=re(s),i=n.query;let o=3;const a=t.queries.get(i);if(a){const r=a.J_.indexOf(n);r>=0&&(a.J_.splice(r,1),0===a.J_.length?o=n.Z_()?0:1:!a.Y_()&&n.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})).apply(this,arguments)}function Fb(s,n){const t=re(s);let i=!1;for(const o of n){const r=t.queries.get(o.query);if(r){for(const l of r.J_)l.ta(o)&&(i=!0);r.H_=o}}i&&jc(t)}function jb(s,n,t){const i=re(s),o=i.queries.get(n);if(o)for(const a of o.J_)a.onError(t);i.queries.delete(n)}function jc(s){s.X_.forEach(n=>{n.next()})}var zc,wp;(wp=zc||(zc={})).na="default",wp.Cache="cache";class Dc{constructor(n,t,i){this.query=n,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(n){if(!this.options.includeMetadataChanges){const i=[];for(const o of n.docChanges)3!==o.type&&i.push(o);n=new ks(n.query,n.docs,n.oldDocs,i,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let t=!1;return this.ia?this.oa(n)&&(this.ra.next(n),t=!0):this._a(n,this.onlineState)&&(this.aa(n),t=!0),this.sa=n,t}onError(n){this.ra.error(n)}ea(n){this.onlineState=n;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,n)&&(this.aa(this.sa),t=!0),t}_a(n,t){return!n.fromCache||!this.Z_()||(!this.options.ua||!("Offline"!==t))&&(!n.docs.isEmpty()||n.hasCachedResults||"Offline"===t)}oa(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.sa&&this.sa.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}aa(n){n=ks.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.ia=!0,this.ra.next(n)}Z_(){return this.options.source!==zc.Cache}}class kp{constructor(n){this.key=n}}class Ep{constructor(n){this.key=n}}class Ap{constructor(n,t){this.query=n,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Re(),this.mutatedKeys=Re(),this.Va=Ld(n),this.ma=new Cs(this.Va)}get fa(){return this.da}ga(n,t){const i=t?t.pa:new yp,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,r=o,l=!1;const c="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,_="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(n.inorderTraversal((d,p)=>{const f=o.get(d),v=co(this.query,p)?p:null,w=!!f&&this.mutatedKeys.has(f.key),y=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;f&&v?f.data.isEqual(v.data)?w!==y&&(i.track({type:3,doc:v}),S=!0):this.ya(f,v)||(i.track({type:2,doc:v}),S=!0,(c&&this.Va(v,c)>0||_&&this.Va(v,_)<0)&&(l=!0)):!f&&v?(i.track({type:0,doc:v}),S=!0):f&&!v&&(i.track({type:1,doc:f}),S=!0,(c||_)&&(l=!0)),S&&(v?(r=r.add(v),a=y?a.add(d):a.delete(d)):(r=r.delete(d),a=a.delete(d)))}),null!==this.query.limit)for(;r.size>this.query.limit;){const d="F"===this.query.limitType?r.last():r.first();r=r.delete(d.key),a=a.delete(d.key),i.track({type:1,doc:d})}return{ma:r,pa:i,ss:l,mutatedKeys:a}}ya(n,t){return n.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(n,t,i,o){const a=this.ma;this.ma=n.ma,this.mutatedKeys=n.mutatedKeys;const r=n.pa.j_();r.sort((d,p)=>function(v,w){const y=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return y(v)-y(w)}(d.type,p.type)||this.Va(d.doc,p.doc)),this.wa(i),o=null!=o&&o;const l=t&&!o?this.Sa():[],c=0===this.Ra.size&&this.current&&!o?1:0,_=c!==this.Aa;return this.Aa=c,0!==r.length||_?{snapshot:new ks(this.query,n.ma,a,r,n.mutatedKeys,0===c,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({ma:this.ma,pa:new yp,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(n){return!this.da.has(n)&&!!this.ma.has(n)&&!this.ma.get(n).hasLocalMutations}wa(n){n&&(n.addedDocuments.forEach(t=>this.da=this.da.add(t)),n.modifiedDocuments.forEach(t=>{}),n.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=n.current)}Sa(){if(!this.current)return[];const n=this.Ra;this.Ra=Re(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return n.forEach(i=>{this.Ra.has(i)||t.push(new Ep(i))}),this.Ra.forEach(i=>{n.has(i)||t.push(new kp(i))}),t}va(n){this.da=n.ds,this.Ra=Re();const t=this.ga(n.documents);return this.applyChanges(t,!0)}Ca(){return ks.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class Mb{constructor(n,t,i){this.query=n,this.targetId=t,this.view=i}}class Gb{constructor(n){this.key=n,this.Fa=!1}}class Pb{constructor(n,t,i,o,a,r){this.localStore=n,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=r,this.Ma={},this.xa=new zn(l=>Nd(l),lo),this.Oa=new Map,this.Na=new Set,this.La=new Ze(ce.comparator),this.Ba=new Map,this.ka=new Xl,this.qa={},this.Qa=new Map,this.Ka=ji.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}function Nb(s,n){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,H.A)(function*(s,n,t=!0){const i=er(s);let o;const a=i.xa.get(n);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=yield Op(i,n,t,!0),o})).apply(this,arguments)}function Vb(s,n){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,H.A)(function*(s,n){const t=er(s);yield Op(t,n,!0,!1)})).apply(this,arguments)}function Op(s,n,t,i){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,H.A)(function*(s,n,t,i){const o=yield function bs(s,n){const t=re(s);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,n).next(a=>a?(o=a,G.resolve(o)):t.Gr.allocateTargetId(i).next(r=>(o=new Mn(n,r,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(null===o||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(n,i.targetId)),i})}(s.localStore,Nt(n)),a=o.targetId,r=s.sharedClientState.addLocalQueryTarget(a,t);let l;return i&&(l=yield function Nc(s,n,t,i,o){return Vc.apply(this,arguments)}(s,n,a,"current"===r,o.resumeToken)),s.isPrimaryClient&&t&&Ka(s.remoteStore,o),l})).apply(this,arguments)}function Vc(){return Vc=(0,H.A)(function*(s,n,t,i,o){s.Ua=(p,f,v)=>{return(w=(0,H.A)(function*(S,A,j,V){let N=A.view.ga(j);N.ss&&(N=yield Ua(S.localStore,A.query,!1).then(({documents:b})=>A.view.ga(b,N)));const X=V&&V.targetChanges.get(A.targetId),te=V&&null!=V.targetMismatches.get(A.targetId),I=A.view.applyChanges(N,S.isPrimaryClient,X,te);return Jc(S,A.targetId,I.ba),I.snapshot}),function y(S,A,j,V){return w.apply(this,arguments)})(s,p,f,v);var w};const a=yield Ua(s.localStore,n,!0),r=new Ap(n,a.ds),l=r.ga(a.documents),c=go.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==s.onlineState,o),_=r.applyChanges(l,s.isPrimaryClient,c);Jc(s,t,_.ba);const d=new Mb(n,t,r);return s.xa.set(n,d),s.Oa.has(t)?s.Oa.get(t).push(n):s.Oa.set(t,[n]),_.snapshot}),Vc.apply(this,arguments)}function Lb(s,n,t){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,H.A)(function*(s,n,t){const i=re(s),o=i.xa.get(n),a=i.Oa.get(o.targetId);if(a.length>1)return i.Oa.set(o.targetId,a.filter(r=>!lo(r,n))),void i.xa.delete(n);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||(yield xs(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ys(i.remoteStore,o.targetId),Es(i,o.targetId)}).catch(Yn))):(Es(i,o.targetId),yield xs(i.localStore,o.targetId,!0))})).apply(this,arguments)}function Bb(s,n){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,H.A)(function*(s,n){const t=re(s),i=t.xa.get(n),o=t.Oa.get(i.targetId);t.isPrimaryClient&&1===o.length&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ys(t.remoteStore,i.targetId))})).apply(this,arguments)}function $c(){return($c=(0,H.A)(function*(s,n,t){const i=function lu(s){const n=re(s);return n.remoteStore.remoteSyncer.applySuccessfulWrite=qb.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=Yb.bind(null,n),n}(s);try{const o=yield function(r,l){const c=re(r),_=_t.now(),d=l.reduce((v,w)=>v.add(w.key),Re());let p,f;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Kt(),y=Re();return c.hs.getEntries(v,d).next(S=>{w=S,w.forEach((A,j)=>{j.isValidDocument()||(y=y.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(S=>{p=S;const A=[];for(const j of l){const V=hT(j,p.get(j.key).overlayedDocument);null!=V&&A.push(new Dn(j.key,V,Sd(V.value.mapValue),rt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,_,A,l)}).next(S=>{f=S;const A=S.applyToLocalDocumentSet(p,y);return c.documentOverlayCache.saveOverlays(v,S.batchId,A)})}).then(()=>({batchId:f.batchId,changes:$d(p)}))}(i.localStore,n);i.sharedClientState.addPendingMutation(o.batchId),function(r,l,c){let _=r.qa[r.currentUser.toKey()];_||(_=new Ze(we)),_=_.insert(l,c),r.qa[r.currentUser.toKey()]=_}(i,o.batchId,t),yield Gn(i,o.changes),yield Ss(i.remoteStore)}catch(o){const a=Is(o,"Failed to persist write");t.reject(a)}})).apply(this,arguments)}function Rp(s,n){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,H.A)(function*(s,n){const t=re(s);try{const i=yield function rb(s,n){const t=re(s),i=n.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const r=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const l=[];n.targetChanges.forEach((d,p)=>{const f=o.get(p);if(!f)return;l.push(t.Gr.removeMatchingKeys(a,d.removedDocuments,p).next(()=>t.Gr.addMatchingKeys(a,d.addedDocuments,p)));let v=f.withSequenceNumber(a.currentSequenceNumber);var y,S,A;null!==n.targetMismatches.get(p)?v=v.withResumeToken(pt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),o=o.insert(p,v),S=v,A=d,(0===(y=f).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&l.push(t.Gr.updateTargetData(a,v))});let c=Kt(),_=Re();if(n.documentUpdates.forEach(d=>{n.resolvedLimboDocuments.has(d)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(function ap(s,n,t){let i=Re(),o=Re();return t.forEach(a=>i=i.add(a)),n.getEntries(s,i).next(a=>{let r=Kt();return t.forEach((l,c)=>{const _=a.get(l);c.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(l)),c.isNoDocument()&&c.version.isEqual(be.min())?(n.removeEntry(l,c.readTime),r=r.insert(l,c)):!_.isValidDocument()||c.version.compareTo(_.version)>0||0===c.version.compareTo(_.version)&&_.hasPendingWrites?(n.addEntry(c),r=r.insert(l,c)):ne("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",c.version)}),{Is:r,Es:o}})}(a,r,n.documentUpdates).next(d=>{c=d.Is,_=d.Es})),!i.isEqual(be.min())){const d=t.Gr.getLastRemoteSnapshotVersion(a).next(p=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(d)}return G.waitFor(l).next(()=>r.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,c,_)).next(()=>c)}).then(a=>(t.us=o,a))}(t.localStore,n);n.targetChanges.forEach((o,a)=>{const r=t.Ba.get(a);r&&(fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?r.Fa=!0:o.modifiedDocuments.size>0?fe(r.Fa):o.removedDocuments.size>0&&(fe(r.Fa),r.Fa=!1))}),yield Gn(t,i,n)}catch(i){yield Yn(i)}})).apply(this,arguments)}function Fp(s,n,t){const i=re(s);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const o=[];i.xa.forEach((a,r)=>{const l=r.view.ea(n);l.snapshot&&o.push(l.snapshot)}),function(r,l){const c=re(r);c.onlineState=l;let _=!1;c.queries.forEach((d,p)=>{for(const f of p.J_)f.ea(l)&&(_=!0)}),_&&jc(c)}(i.eventManager,n),o.length&&i.Ma.R_(o),i.onlineState=n,i.isPrimaryClient&&i.sharedClientState.setOnlineState(n)}}function Qb(s,n,t){return qc.apply(this,arguments)}function qc(){return(qc=(0,H.A)(function*(s,n,t){const i=re(s);i.sharedClientState.updateQueryState(n,"rejected",t);const o=i.Ba.get(n),a=o&&o.key;if(a){let r=new Ze(ce.comparator);r=r.insert(a,tt.newNoDocument(a,be.min()));const l=Re().add(a),c=new fo(be.min(),new Map,new Ze(we),r,l);yield Rp(i,c),i.La=i.La.remove(a),i.Ba.delete(n),Kc(i)}else yield xs(i.localStore,n,!1).then(()=>Es(i,n,t)).catch(Yn)})).apply(this,arguments)}function qb(s,n){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,H.A)(function*(s,n){const t=re(s),i=n.batch.batchId;try{const o=yield function ab(s,n){const t=re(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=n.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(l,c,_,d){const p=_.batch,f=p.keys();let v=G.resolve();return f.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(y=>{const S=_.docVersions.get(w);fe(null!==S),y.version.compareTo(S)<0&&(p.applyToRemoteDocument(y,_),y.isValidDocument()&&(y.setReadTime(_.commitVersion),d.addEntry(y)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,i,n,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,n.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=Re();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(c=c.add(l.batch.mutations[_].key));return c}(n))).next(()=>t.localDocuments.getDocuments(i,o))})}(t.localStore,n);Hc(t,i,null),Wc(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Gn(t,o)}catch(o){yield Yn(o)}})).apply(this,arguments)}function Yb(s,n,t){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,H.A)(function*(s,n,t){const i=re(s);try{const o=yield function(r,l){const c=re(r);return c.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let d;return c.mutationQueue.lookupMutationBatch(_,l).next(p=>(fe(null!==p),d=p.keys(),c.mutationQueue.removeMutationBatch(_,p))).next(()=>c.mutationQueue.performConsistencyCheck(_)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(_,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,d)).next(()=>c.localDocuments.getDocuments(_,d))})}(i.localStore,n);Hc(i,n,t),Wc(i,n),i.sharedClientState.updateMutationState(n,"rejected",t),yield Gn(i,o)}catch(o){yield Yn(o)}})).apply(this,arguments)}function Wc(s,n){(s.Qa.get(n)||[]).forEach(t=>{t.resolve()}),s.Qa.delete(n)}function Hc(s,n,t){const i=re(s);let o=i.qa[i.currentUser.toKey()];if(o){const a=o.get(n);a&&(t?a.reject(t):a.resolve(),o=o.remove(n)),i.qa[i.currentUser.toKey()]=o}}function Es(s,n,t=null){s.sharedClientState.removeLocalQueryTarget(n);for(const i of s.Oa.get(n))s.xa.delete(i),t&&s.Ma.Wa(i,t);s.Oa.delete(n),s.isPrimaryClient&&s.ka.yr(n).forEach(i=>{s.ka.containsKey(i)||jp(s,i)})}function jp(s,n){s.Na.delete(n.path.canonicalString());const t=s.La.get(n);null!==t&&(ys(s.remoteStore,t),s.La=s.La.remove(n),s.Ba.delete(t),Kc(s))}function Jc(s,n,t){for(const i of t)i instanceof kp?(s.ka.addReference(i.key,n),Xb(s,i)):i instanceof Ep?(ne("SyncEngine","Document no longer in limbo: "+i.key),s.ka.removeReference(i.key,n),s.ka.containsKey(i.key)||jp(s,i.key)):me()}function Xb(s,n){const t=n.key,i=t.path.canonicalString();s.La.get(t)||s.Na.has(i)||(ne("SyncEngine","New document in limbo: "+t),s.Na.add(i),Kc(s))}function Kc(s){for(;s.Na.size>0&&s.La.size<s.maxConcurrentLimboResolutions;){const n=s.Na.values().next().value;s.Na.delete(n);const t=new ce(Ge.fromString(n)),i=s.Ka.next();s.Ba.set(i,new Gb(t)),s.La=s.La.insert(t,i),Ka(s.remoteStore,new Mn(Nt(as(t.path)),i,"TargetPurposeLimboResolution",nn.oe))}}function Gn(s,n,t){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,H.A)(function*(s,n,t){const i=re(s),o=[],a=[],r=[];var l;i.xa.isEmpty()||(i.xa.forEach((l,c)=>{r.push(i.Ua(c,n,t).then(_=>{var d;if((_||t)&&i.isPrimaryClient){const p=_?!_.fromCache:null===(d=t?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;i.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(_){o.push(_);const p=Zl.zi(c.targetId,_);a.push(p)}}))}),yield Promise.all(r),i.Ma.R_(o),yield(l=(0,H.A)(function*(_,d){const p=re(_);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(d,v=>G.forEach(v.Wi,w=>p.persistence.referenceDelegate.addReference(f,v.targetId,w)).next(()=>G.forEach(v.Gi,w=>p.persistence.referenceDelegate.removeReference(f,v.targetId,w)))))}catch(f){if(!Un(f))throw f;ne("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const v=f.targetId;if(!f.fromCache){const w=p.us.get(v),S=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);p.us=p.us.insert(v,S)}}}),function c(_,d){return l.apply(this,arguments)})(i.localStore,a))}),Zc.apply(this,arguments)}function Wb(s,n){return eu.apply(this,arguments)}function eu(){return(eu=(0,H.A)(function*(s,n){const t=re(s);if(!t.currentUser.isEqual(n)){ne("SyncEngine","User change. New user:",n.toKey());const i=yield sp(t.localStore,n);t.currentUser=n,(a=t).Qa.forEach(l=>{l.forEach(c=>{c.reject(new ie($.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Qa.clear(),t.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),yield Gn(t,i.Ts)}var a})).apply(this,arguments)}function Hb(s,n){const t=re(s),i=t.Ba.get(n);if(i&&i.Fa)return Re().add(i.key);{let o=Re();const a=t.Oa.get(n);if(!a)return o;for(const r of a){const l=t.xa.get(r);o=o.unionWith(l.view.fa)}return o}}function er(s){const n=re(s);return n.remoteStore.remoteSyncer.applyRemoteEvent=Rp.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hb.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=Qb.bind(null,n),n.Ma.R_=Fb.bind(null,n.eventManager),n.Ma.Wa=jb.bind(null,n.eventManager),n}let tr=(()=>{class s{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var i=this;return(0,H.A)(function*(){i.serializer=ko(t.databaseInfo.databaseId),i.sharedClientState=i.za(t),i.persistence=i.ja(t),yield i.persistence.start(),i.localStore=i.Ha(t),i.gcScheduler=i.Ja(t,i.localStore),i.indexBackfillerScheduler=i.Ya(t,i.localStore)})()}Ja(t,i){return null}Ya(t,i){return null}Ha(t){return function ip(s,n,t,i){return new ob(s,n,t,i)}(this.persistence,new np,t.initialUser,this.serializer)}ja(t){return new Wl(Qa.ei,this.serializer)}za(t){return new dp}terminate(){var t=this;return(0,H.A)(function*(){var i,o;null===(i=t.gcScheduler)||void 0===i||i.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return s.provider={build:()=>new s},s})();class cu extends tr{constructor(n){super(),this.cacheSizeBytes=n}Ja(n,t){return fe(this.persistence.referenceDelegate instanceof qa),new Um(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue,t)}ja(n){const t=void 0!==this.cacheSizeBytes?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new Wl(i=>qa.ei(i,t),this.serializer)}}let As=(()=>{class s{initialize(t,i){var o=this;return(0,H.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(i),o.remoteStore=o.createRemoteStore(i),o.eventManager=o.createEventManager(i),o.syncEngine=o.createSyncEngine(i,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=a=>Fp(o.syncEngine,a,1),o.remoteStore.remoteSyncer.handleCredentialChange=Wb.bind(null,o.syncEngine),yield Cc(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Rb}createDatastore(t){const i=ko(t.databaseInfo.databaseId),o=new pb(t.databaseInfo);return new gb(t.authCredentials,t.appCheckCredentials,o,i)}createRemoteStore(t){return o=this.localStore,a=this.datastore,r=t.asyncQueue,l=i=>Fp(this.syncEngine,i,0),c=mp.p()?new mp:new _b,new bb(o,a,r,l,c);var o,a,r,l,c}createSyncEngine(t,i){return function(a,r,l,c,_,d,p){const f=new Pb(a,r,l,c,_,d);return p&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){var t=this;return(0,H.A)(function*(){var i,o,a;yield(a=(0,H.A)(function*(l){const c=re(l);ne("RemoteStore","RemoteStore shutting down."),c.k_.add(5),yield vs(c),c.Q_.shutdown(),c.K_.set("Unknown")}),function r(l){return a.apply(this,arguments)})(t.remoteStore),null===(i=t.datastore)||void 0===i||i.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}return s.provider={build:()=>new s},s})();class nr{constructor(n){this.observer=n,this.muted=!1}next(n){this.muted||this.observer.next&&this.Xa(this.observer.next,n)}error(n){this.muted||(this.observer.error?this.Xa(this.observer.error,n):gt("Uncaught Error in snapshot listener:",n.toString()))}eu(){this.muted=!0}Xa(n,t){setTimeout(()=>{this.muted||n(t)},0)}}class lx{constructor(n,t,i,o,a){var r=this;this.authCredentials=n,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Et.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,function(){var l=(0,H.A)(function*(c){ne("FirestoreClient","Received user=",c.uid),yield r.authCredentialListener(c),r.user=c});return function(c){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const t=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,H.A)(function*(){try{n._onlineComponents&&(yield n._onlineComponents.terminate()),n._offlineComponents&&(yield n._offlineComponents.terminate()),n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),t.resolve()}catch(i){const o=Is(i,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function _u(s,n){return du.apply(this,arguments)}function du(){return du=(0,H.A)(function*(s,n){s.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const t=s.configuration;yield n.initialize(t);let i=t.initialUser;s.setCredentialChangeListener(function(){var o=(0,H.A)(function*(a){i.isEqual(a)||(yield sp(n.localStore,a),i=a)});return function(a){return o.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=n}),du.apply(this,arguments)}function Pp(s,n){return mu.apply(this,arguments)}function mu(){return(mu=(0,H.A)(function*(s,n){s.asyncQueue.verifyOperationInProgress();const t=yield function pu(s){return hu.apply(this,arguments)}(s);ne("FirestoreClient","Initializing OnlineComponentProvider"),yield n.initialize(t,s.configuration),s.setCredentialChangeListener(i=>vp(n.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>vp(n.remoteStore,o)),s._onlineComponents=n})).apply(this,arguments)}function hu(){return(hu=(0,H.A)(function*(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _u(s,s._uninitializedComponentsProvider._offline)}catch(n){if(!("FirebaseError"===(o=n).name?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw n;rn("Error using user provided cache. Falling back to memory cache: "+n),yield _u(s,new tr)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield _u(s,new cu(void 0));var o;return s._offlineComponents})).apply(this,arguments)}function ir(s){return fu.apply(this,arguments)}function fu(){return(fu=(0,H.A)(function*(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pp(s,s._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield Pp(s,new As))),s._onlineComponents})).apply(this,arguments)}function Rs(s){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,H.A)(function*(s){const n=yield ir(s),t=n.eventManager;return t.onListen=Nb.bind(null,n.syncEngine),t.onUnlisten=Lb.bind(null,n.syncEngine),t.onFirstRemoteStoreListen=Vb.bind(null,n.syncEngine),t.onLastRemoteStoreUnlisten=Bb.bind(null,n.syncEngine),t})).apply(this,arguments)}function Qp(s){const n={};return void 0!==s.timeoutSeconds&&(n.timeoutSeconds=s.timeoutSeconds),n}const qp=new Map;function bu(s,n,t){if(!t)throw new ie($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${n}.`)}function Yp(s){if(!ce.isDocumentKey(s))throw new ie($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Up(s){if(ce.isDocumentKey(s))throw new ie($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function sr(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const n=(i=s).constructor?i.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var i;return"function"==typeof s?"a function":me()}function Me(s,n){if("_delegate"in s&&(s=s._delegate),!(s instanceof n)){if(n.name===s.constructor.name)throw new ie($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sr(s);throw new ie($.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${t}`)}}return s}class Wp{constructor(n){var t,i;if(void 0===n.host){if(void 0!==n.ssl)throw new ie($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(t=n.ssl)||void 0===t||t;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.localCache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new ie($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}(function xx(s,n,t,i){if(!0===n&&!0===i)throw new ie($.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)})("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==n.experimentalAutoDetectLongPolling&&!n.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Qp(null!==(i=n.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===n.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class Ao{constructor(n,t,i,o){this._authCredentials=n,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wp(n),void 0!==n.credentials&&(this._authCredentials=function(i){if(!i)return new p1;switch(i.type){case"firstParty":return new T1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var n=this;return(0,H.A)(function*(){"notTerminated"===n._terminateTask?yield n._terminate():n._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=qp.get(t);i&&(ne("ComponentProvider","Removing Datastore"),qp.delete(t),i.terminate())}(this),Promise.resolve()}}class zt{constructor(n,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=n}withConverter(n){return new zt(this.firestore,n,this._query)}}class bt{constructor(n,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sn(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new bt(this.firestore,n,this._key)}}class Sn extends zt{constructor(n,t,i){super(n,t,as(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new bt(this.firestore,null,new ce(n))}withConverter(n){return new Sn(this.firestore,n,this._path)}}function Oo(s,n,...t){if(s=(0,st.Ku)(s),bu("collection","path",n),s instanceof Ao){const i=Ge.fromString(n,...t);return Up(i),new Sn(s,null,i)}{if(!(s instanceof bt||s instanceof Sn))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ge.fromString(n,...t));return Up(i),new Sn(s.firestore,null,i)}}function Fs(s,n,...t){if(s=(0,st.Ku)(s),1===arguments.length&&(n=W_.newId()),bu("doc","path",n),s instanceof Ao){const i=Ge.fromString(n,...t);return Yp(i),new bt(s,null,new ce(i))}{if(!(s instanceof bt||s instanceof Sn))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ge.fromString(n,...t));return Yp(i),new bt(s.firestore,s instanceof Sn?s.converter:null,new ce(i))}}class Jp{constructor(n=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new cc(this,"async_queue_retry"),this.fu=()=>{const i=Ja();i&&ne("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=n;const t=Ja();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.pu(),this.yu(n)}enterRestrictedMode(n){if(!this.Eu){this.Eu=!0,this.Vu=n||!1;const t=Ja();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(n){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new At;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(n().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Iu.push(n),this.wu()))}wu(){var n=this;return(0,H.A)(function*(){if(0!==n.Iu.length){try{yield n.Iu[0](),n.Iu.shift(),n.r_.reset()}catch(t){if(!Un(t))throw t;ne("AsyncQueue","Operation failed with retryable error: "+t)}n.Iu.length>0&&n.r_.jo(()=>n.wu())}})()}yu(n){const t=this.gu.then(()=>(this.Ru=!0,n().catch(i=>{throw this.Au=i,this.Ru=!1,gt("INTERNAL UNHANDLED ERROR: ",function(r){let l=r.message||"";return r.stack&&(l=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack),l}(i)),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(n,t,i){this.pu(),this.mu.indexOf(n)>-1&&(t=0);const o=Ec.createAndSchedule(this,n,t,i,a=>this.Su(a));return this.du.push(o),o}pu(){this.Au&&me()}verifyOperationInProgress(){}bu(){var n=this;return(0,H.A)(function*(){let t;do{t=n.gu,yield t}while(t!==n.gu)})()}Du(n){for(const t of this.du)if(t.timerId===n)return!0;return!1}vu(n){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==n&&t.timerId===n)break;return this.bu()})}Cu(n){this.mu.push(n)}Su(n){const t=this.du.indexOf(n);this.du.splice(t,1)}}function xu(s){return function(t){if("object"!=typeof t||null===t)return!1;const o=t;for(const a of["next","error","complete"])if(a in o&&"function"==typeof o[a])return!0;return!1}(s)}class He extends Ao{constructor(n,t,i,o){super(n,t,i,o),this.type="firestore",this._queue=new Jp,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){var n=this;return(0,H.A)(function*(){if(n._firestoreClient){const t=n._firestoreClient.terminate();n._queue=new Jp(t),n._firestoreClient=void 0,yield t}})()}}function vu(s,n){const t="object"==typeof s?s:(0,Ji.Sx)(),i="string"==typeof s?s:n||"(default)",o=(0,Ji.j6)(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=(0,st.yU)("firestore");a&&function vx(s,n,t,i={}){var o;const a=(s=Me(s,Ao))._getSettings(),r=`${n}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==r&&rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},a),{host:r,ssl:!1})),i.mockUserToken){let l,c;if("string"==typeof i.mockUserToken)l=i.mockUserToken,c=Et.MOCK_USER;else{l=(0,st.Fy)(i.mockUserToken,null===(o=s._app)||void 0===o?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ie($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Et(_)}s._authCredentials=new h1(new U_(l,c))}}(o,...a)}return o}function dt(s){if(s._terminated)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||function Kp(s){var n,t,i;const o=s._freezeSettings(),a=(c=(null===(n=s._app)||void 0===n?void 0:n.options.appId)||"",new X1(s._databaseId,c,s._persistenceKey,(d=o).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Qp(d.experimentalLongPollingOptions),d.useFetchStreams));var c,d;s._componentsProvider||!(null===(t=o.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(i=o.localCache)||void 0===i)&&i._onlineComponentProvider&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new lx(s._authCredentials,s._appCheckCredentials,s._queue,a,s._componentsProvider&&function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}}(s._componentsProvider))}(s),s._firestoreClient}class Di{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Di(pt.fromBase64String(n))}catch(t){throw new ie($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(n){return new Di(pt.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Mi{constructor(...n){for(let t=0;t<n.length;++t)if(0===n[t].length)throw new ie($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class js{constructor(n){this._methodName=n}}class Su{constructor(n,t){if(!isFinite(n)||n<-90||n>90)throw new ie($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(t)||t<-180||t>180)throw new ie($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=n,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return we(this._lat,n._lat)||we(this._long,n._long)}}class or{constructor(n){this._values=(n||[]).map(t=>t)}toArray(){return this._values.map(n=>n)}isEqual(n){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,n._values)}}const Ix=/^__.*__$/;class Cx{constructor(n,t,i){this.data=n,this.fieldMask=t,this.fieldTransforms=i}toMutation(n,t){return null!==this.fieldMask?new Dn(n,this.data,this.fieldMask,t,this.fieldTransforms):new _s(n,this.data,t,this.fieldTransforms)}}function th(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class ar{constructor(n,t,i,o,a,r){this.settings=n,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,void 0===a&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(n){return new ar(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(n){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(n),o=this.xu({path:i,Nu:!1});return o.Lu(n),o}Bu(n){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(n),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(n){return this.xu({path:void 0,Nu:!0})}qu(n){return cr(n,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(n){return void 0!==this.fieldMask.find(t=>n.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>n.isPrefixOf(t.field))}Fu(){if(this.path)for(let n=0;n<this.path.length;n++)this.Lu(this.path.get(n))}Lu(n){if(0===n.length)throw this.qu("Document fields must not be empty");if(th(this.Mu)&&Ix.test(n))throw this.qu('Document fields cannot begin and end with "__"')}}class kx{constructor(n,t,i){this.databaseId=n,this.ignoreUndefinedProperties=t,this.serializer=i||ko(n)}$u(n,t,i,o=!1){return new ar({Mu:n,methodName:t,Ku:i,path:ot.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gi(s){const n=s._freezeSettings(),t=ko(s._databaseId);return new kx(s._databaseId,!!n.ignoreUndefinedProperties,t)}function rr(s,n,t,i,o,a={}){const r=s.$u(a.merge||a.mergeFields?2:0,n,t,o);Ou("Data must be an object, but it was:",r,i);const l=sh(i,r);let c,_;if(a.merge)c=new Jt(r.fieldMask),_=r.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const f=jo(n,p,t);if(!r.contains(f))throw new ie($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ah(d,f)||d.push(f)}c=new Jt(d),_=r.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,_=r.fieldTransforms;return new Cx(new jt(l),c,_)}function Pi(s,n){if(oh(s=(0,st.Ku)(s)))return Ou("Unsupported field value:",n,s),sh(s,n);if(s instanceof js)return function(i,o){if(!th(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(s,n),null;if(void 0===s&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),s instanceof Array){if(n.settings.Nu&&4!==n.Mu)throw n.qu("Nested arrays are not supported");return function(i,o){const a=[];let r=0;for(const l of i){let c=Pi(l,o.ku(r));null==c&&(c={nullValue:"NULL_VALUE"}),a.push(c),r++}return{arrayValue:{values:a}}}(s,n)}return function(i,o){if(null===(i=(0,st.Ku)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return Yd(o.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:ms(o.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ms(o.serializer,a)}}if(i instanceof Su)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Di)return{bytesValue:mm(o.serializer,i._byteString)};if(i instanceof bt){const a=o.databaseId,r=i.firestore._databaseId;if(!r.isEqual(a))throw o.qu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Gl(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof or)return l=o,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if("number"!=typeof c)throw l.qu("VectorValues must only contain numeric values.");return Ol(l.serializer,c)})}}}}};var l;throw o.qu(`Unsupported field value: ${sr(i)}`)}(s,n)}function sh(s,n){const t={};return dd(s)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Xn(s,(i,o)=>{const a=Pi(o,n.Ou(i));null!=a&&(t[i]=a)}),{mapValue:{fields:t}}}function oh(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof _t||s instanceof Su||s instanceof Di||s instanceof bt||s instanceof js||s instanceof or)}function Ou(s,n,t){if(!oh(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const i=sr(t);throw n.qu("an object"===i?s+" a custom object":s+" "+i)}var o}function jo(s,n,t){if((n=(0,st.Ku)(n))instanceof Mi)return n._internalPath;if("string"==typeof n)return lr(s,n);throw cr("Field path arguments must be of type string or ",s,!1,void 0,t)}const Ex=new RegExp("[~\\*/\\[\\]]");function lr(s,n,t){if(n.search(Ex)>=0)throw cr(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Mi(...n.split("."))._internalPath}catch{throw cr(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function cr(s,n,t,i,o){const a=i&&!i.isEmpty(),r=void 0!==o;let l=`Function ${n}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||r)&&(c+=" (found",a&&(c+=` in field ${i}`),r&&(c+=` in document ${o}`),c+=")"),new ie($.INVALID_ARGUMENT,l+s+c)}function ah(s,n){return s.some(t=>t.isEqual(n))}class zo{constructor(n,t,i,o,a){this._firestore=n,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new Ax(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const t=this._document.data.field(ur("DocumentSnapshot.get",n));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ax extends zo{data(){return super.data()}}function ur(s,n){return"string"==typeof n?lr(s,n):n instanceof Mi?n._internalPath:n._delegate._internalPath}function rh(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new ie($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ru{}class Do extends Ru{}function lh(s,n,...t){let i=[];n instanceof Ru&&i.push(n),i=i.concat(t),function(a){const r=a.filter(c=>c instanceof zs).length,l=a.filter(c=>c instanceof Mo).length;if(r>1||r>0&&l>0)throw new ie($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class Mo extends Do{constructor(n,t,i){super(),this._field=n,this._op=t,this._value=i,this.type="where"}static _create(n,t,i){return new Mo(n,t,i)}_apply(n){const t=this._parse(n);return mh(n._query,t),new zt(n.firestore,n.converter,El(n._query,t))}_parse(n){const t=Gi(n.firestore);return function(a,r,l,c,_,d,p){let f;if(_.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new ie($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){dh(p,d);const v=[];for(const w of p)v.push(_h(c,a,w));f={arrayValue:{values:v}}}else f=_h(c,a,p)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||dh(p,d),f=function ih(s,n,t,i=!1){return Pi(t,s.$u(i?4:3,n))}(l,"where",p,"in"===d||"not-in"===d);return Pe.create(_,d,f)}(n._query,0,t,n.firestore._databaseId,this._field,this._op,this._value)}}function ch(s,n,t){const i=n,o=ur("where",s);return Mo._create(o,i,t)}class zs extends Ru{constructor(n,t){super(),this.type=n,this._queryConstraints=t}static _create(n,t){return new zs(n,t)}_parse(n){const t=this._queryConstraints.map(i=>i._parse(n)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Ye.create(t,this._getOperator())}_apply(n){const t=this._parse(n);return 0===t.getFilters().length?n:(function(o,a){let r=o;const l=a.getFlattenedFilters();for(const c of l)mh(r,c),r=El(r,c)}(n._query,t),new zt(n.firestore,n.converter,El(n._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function _h(s,n,t){if("string"==typeof(t=(0,st.Ku)(t))){if(""===t)throw new ie($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kl(n)&&-1!==t.indexOf("/"))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=n.path.child(Ge.fromString(t));if(!ce.isDocumentKey(i))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return wi(s,new ce(i))}if(t instanceof bt)return wi(s,t._key);throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sr(t)}.`)}function dh(s,n){if(!Array.isArray(s)||0===s.length)throw new ie($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`)}function mh(s,n){const t=function(o,a){for(const r of o)for(const l of r.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(n.op));if(null!==t)throw new ie($.INVALID_ARGUMENT,t===n.op?`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`:`Invalid query. You cannot use '${n.op.toString()}' filters with '${t.toString()}' filters.`)}class hh{convertValue(n,t="none"){switch(Hn(n)){case 0:return null;case 1:return n.booleanValue;case 2:return at(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,t);case 5:return n.stringValue;case 6:return this.convertBytes(Fn(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,t);case 11:return this.convertObject(n.mapValue,t);case 10:return this.convertVectorValue(n.mapValue);default:throw me()}}convertObject(n,t){return this.convertObjectMap(n.fields,t)}convertObjectMap(n,t="none"){const i={};return Xn(n,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(n){var t,i,o;const a=null===(o=null===(i=null===(t=n.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===i?void 0:i.values)||void 0===o?void 0:o.map(r=>at(r.doubleValue));return new or(a)}convertGeoPoint(n){return new Su(at(n.latitude),at(n.longitude))}convertArray(n,t){return(n.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(n,t){switch(t){case"previous":const i=ya(n);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(no(n));default:return null}}convertTimestamp(n){const t=Rn(n);return new _t(t.seconds,t.nanos)}convertDocumentKey(n,t){const i=Ge.fromString(n);fe(Im(i));const o=new Si(i.get(1),i.get(3)),a=new ce(i.popFirst(5));return o.isEqual(t)||gt(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class Ni{constructor(n,t){this.hasPendingWrites=n,this.fromCache=t}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Ds extends zo{constructor(n,t,i,o,a,r){super(n,t,i,o,r),this._firestore=n,this._firestoreImpl=n,this.metadata=a}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const t=new hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,t={}){if(this._document){const i=this._document.data.field(ur("DocumentSnapshot.get",n));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class hr extends Ds{data(n={}){return super.data(n)}}class Ms{constructor(n,t,i,o){this._firestore=n,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ni(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const n=[];return this.forEach(t=>n.push(t)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,t){this._snapshot.docs.forEach(i=>{n.call(t,new hr(this._firestore,this._userDataWriter,i.key,i,new Ni(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const t=!!n.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let r=0;return o._snapshot.docChanges.map(l=>({type:"added",doc:new hr(o._firestore,o._userDataWriter,l.doc.key,l.doc,new Ni(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:r++}))}{let r=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(l=>a||3!==l.type).map(l=>{const c=new hr(o._firestore,o._userDataWriter,l.doc.key,l.doc,new Ni(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,d=-1;return 0!==l.type&&(_=r.indexOf(l.doc.key),r=r.delete(l.doc.key)),1!==l.type&&(r=r.add(l.doc),d=r.indexOf(l.doc.key)),{type:Fx(l.type),doc:c,oldIndex:_,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Fx(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}class oi extends hh{constructor(n){super(),this.firestore=n}convertBytes(n){return new Di(n)}convertReference(n){const t=this.convertDocumentKey(n,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function fh(s){s=Me(s,zt);const n=Me(s.firestore,He),t=dt(n),i=new oi(n);return rh(s._query),function $p(s,n,t={}){const i=new At;return s.asyncQueue.enqueueAndForget((0,H.A)(function*(){return function(a,r,l,c,_){const d=new nr({next:f=>{d.eu(),r.enqueueAndForget(()=>Rc(a,p)),f.fromCache&&"server"===c.source?_.reject(new ie($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(f)},error:f=>_.reject(f)}),p=new Dc(l,d,{includeMetadataChanges:!0,ua:!0});return Ac(a,p)}(yield Rs(s),s.asyncQueue,n,t,i)})),i.promise}(t,s._query).then(o=>new Ms(n,i,s,o))}function gh(s,n,t){s=Me(s,bt);const i=Me(s.firestore,He),o=function pr(s,n,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(n,t):s.toFirestore(n):n,i}(s.converter,n,t);return Go(i,[rr(Gi(i),"setDoc",s._key,o,null!==s.converter,t).toMutation(s._key,rt.none())])}function fr(s,...n){var t,i,o;s=(0,st.Ku)(s);let a={includeMetadataChanges:!1,source:"default"},r=0;"object"!=typeof n[r]||xu(n[r])||(a=n[r],r++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(xu(n[r])){const p=n[r];n[r]=null===(t=p.next)||void 0===t?void 0:t.bind(p),n[r+1]=null===(i=p.error)||void 0===i?void 0:i.bind(p),n[r+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}let c,_,d;if(s instanceof bt)_=Me(s.firestore,He),d=as(s._key.path),c={next:p=>{n[r]&&n[r](ju(_,s,p))},error:n[r+1],complete:n[r+2]};else{const p=Me(s,zt);_=Me(p.firestore,He),d=p._query;const f=new oi(_);c={next:v=>{n[r]&&n[r](new Ms(_,f,p,v))},error:n[r+1],complete:n[r+2]},rh(s._query)}return function(f,v,w,y){const S=new nr(y),A=new Dc(v,S,w);return f.asyncQueue.enqueueAndForget((0,H.A)(function*(){return Ac(yield Rs(f),A)})),()=>{S.eu(),f.asyncQueue.enqueueAndForget((0,H.A)(function*(){return Rc(yield Rs(f),A)}))}}(dt(_),d,l,c)}function Go(s,n){return function(i,o){const a=new At;return i.asyncQueue.enqueueAndForget((0,H.A)(function*(){return function $b(s,n,t){return $c.apply(this,arguments)}(yield function gu(s){return ir(s).then(n=>n.syncEngine)}(i),o,a)})),a.promise}(dt(s),n)}function ju(s,n,t){const i=t.docs.get(n._key),o=new oi(s);return new Ds(s,o,n._key,i,new Ni(t.hasPendingWrites,t.fromCache),n.converter)}!function(n,t=!0){Ki=Ji.MF,(0,Ji.om)(new d1.uA("firestore",(i,{instanceIdentifier:o,options:a})=>{const r=i.getProvider("app").getImmediate(),l=new He(new f1(i.getProvider("auth-internal")),new b1(i.getProvider("app-check-internal")),function(_,d){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ie($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Si(_.options.projectId,d)}(r,o),r);return a=Object.assign({useFetchStreams:t},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),(0,Ji.KO)(Y_,"4.7.5",n),(0,Ji.KO)(Y_,"4.7.5","esm2017")}();var xt=O(71985),Ux=O(12412),Xx=O(4930);let Wx=(()=>{var s;class n{examSessions_read(i){var o=this;return new xt.c(a=>{this.getFirestoreDb(!1).subscribe(function(){var r=(0,H.A)(function*(l){if(l&&1==l.success)try{var c=yield o._getDocument(l.data,"exam_sessions/"+i,o.getUserId());a.next({success:1,data:c,message:"successful"}),a.complete()}catch(d){console.log(d),a.next({success:0,data:"",message:""+d}),a.complete()}else a.next({success:0,data:"",message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_write(i,o){var a=this;return new xt.c(r=>{this.getFirestoreDb(!1).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success)try{var _=yield a._saveDocument(c.data,"exam_sessions/"+i,a.getUserId(),o);r.next({success:1,data:_,message:"successful"}),r.complete()}catch(p){console.log(p),r.next({success:0,data:"",message:""+p}),r.complete()}else r.next({success:0,data:"",message:c.message}),r.complete()});return function(c){return l.apply(this,arguments)}}())})}examSessions_writeUserMap(i,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForStudentExam(!1,i).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success&&c.data)try{var _=yield a._saveDocumentMerge(c.data,"exam_sessions/"+i,"user_map",o);r.next({success:1,data:_,message:"successful"}),r.complete()}catch(p){console.log(p),r.next({success:0,data:"",message:""+p}),r.complete()}else r.next({success:0,data:"",message:c.message}),r.complete()});return function(c){return l.apply(this,arguments)}}())})}examSessions_delete(i){var o=this;return new xt.c(a=>{this.getFirestoreDb(!1).subscribe(function(){var r=(0,H.A)(function*(l){if(l&&1==l.success)try{yield o._removeDocument(l.data,"exam_sessions/"+i,o.getUserId()),a.next({success:1,data:"",message:"successful"}),a.complete()}catch(_){console.log(_),a.next({success:0,data:"",message:""+_}),a.complete()}else a.next({success:0,data:"",message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_subscribeUserMap(i){var o=this;return new xt.c(a=>{this.getFirestoreDbForTeacherExam(!1,i).subscribe(function(){var r=(0,H.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshot(l.data,"exam_sessions/"+i,"user_map",p=>{a.next({success:1,data:p,message:"successful"}),a.complete()});o.addUnsubscribe("exam_sessions_"+i,c)}catch(p){console.log(p),a.next({success:0,data:void 0,message:""+p}),a.complete()}else a.next({success:0,data:void 0,message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_subscribe(i){var o=this;return new xt.c(a=>{this.getFirestoreDb(!1).subscribe(function(){var r=(0,H.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshot(l.data,"exam_sessions/"+i,o.getUserId(),p=>{a.next({success:1,data:p,message:"successful"}),a.complete()});o.addUnsubscribe("exam_sessions_"+i,c)}catch(p){console.log(p),a.next({success:0,data:void 0,message:""+p}),a.complete()}else a.next({success:0,data:void 0,message:l.message}),a.complete()});return function(l){return r.apply(this,arguments)}}())})}examSessions_unsubscribe(i){this.removeAllunsubscribe("exam_sessions_"+i)}examSessions_subscribeWithQuery(i,o){var a=this;return new xt.c(o&&3==o.length?r=>{this.getFirestoreDb(!1).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success)try{var _=a.myOnSnapshotCollectionWithQuery(c.data,"exam_sessions/"+i,o,f=>{r.next({success:1,data:f,message:"successful"}),r.complete()});a.addUnsubscribe("exam_sessions_"+i,_)}catch(f){console.log(f),r.next({success:0,data:void 0,message:""+f}),r.complete()}else r.next({success:0,data:void 0,message:c.message}),r.complete()});return function(c){return l.apply(this,arguments)}}())}:r=>{r.next({success:0,data:void 0,message:"EXCEPTION Query Param not valid"}),r.complete(),r.next({success:0,message:"EXCEPTION Query Param not valid"})})}examLiveTeachers_student_subscribe(i){var o=this;return new xt.c(a=>{this.getFirestoreDbForStudentExam(!1,i).subscribe(function(){var r=(0,H.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshotCollection(l.data,"exam_live_teachers/"+i,_=>{a.next({success:1,data:_})});o.addUnsubscribe("exam_live_teachers_"+i,c)}catch(_){console.log(_),a.next({success:0,message:"EXCEPTION",ex:_.toString()})}else a.next(l)});return function(l){return r.apply(this,arguments)}}())})}examLiveTeachers_student_unbsubscribe(i){this.removeAllunsubscribe("exam_live_teachers_"+i)}examLiveTeachers_teacher_saveChange(i,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForTeacherExam(!1,i).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success)try{var _=yield a._saveDocument(c.data,"exam_live_teachers/"+i,a.getUserId(),o);r.next({success:1,data:_})}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLives_teacher_getDocumentByUserIds(i,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForTeacherExam(!1,i).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success)try{var _=yield a._getDocuments(c.data,"exam_lives/"+i,o);r.next({success:1,data:_})}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLiveStudents_student_subscribe(i){var o=this;return new xt.c(a=>{this.getFirestoreDbForStudentExam(!1,i).subscribe(function(){var r=(0,H.A)(function*(l){if(l&&1==l.success)try{var c=o.myOnSnapshot(l.data,"exam_live_students/"+i,o.getUserId(),_=>{a.next({success:1,data:_})});o.addUnsubscribe("exam_live_students_"+i,c)}catch(_){console.log(_),a.next({success:0,message:"EXCEPTION",ex:_.toString()})}else a.next(l)});return function(l){return r.apply(this,arguments)}}())})}examLiveStudents_student_unbsubscribe(i){this.removeAllunsubscribe("exam_live_students_"+i)}examLiveStudents_teacher_subscribe(i,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForTeacherExam(!1,i).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success)try{var _=a.myOnSnapshot(c.data,"exam_live_students/"+i,o,d=>{r.next({success:1,data:d})});a.addUnsubscribe("exam_live_students_"+i,_)}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLiveStudents_teacher_unbsubscribe(i){this.removeAllunsubscribe("exam_live_students_"+i)}examLiveStudents_student_saveChange(i,o){var a=this;return new xt.c(r=>{this.getFirestoreDbForStudentExam(!1,i).subscribe(function(){var l=(0,H.A)(function*(c){if(c&&1==c.success)try{var _=yield a._saveDocument(c.data,"exam_live_students/"+i,a.getUserId(),o);r.next({success:1,data:_})}catch(d){console.log(d),r.next({success:0,message:"EXCEPTION",ex:d.toString()})}else r.next(c)});return function(c){return l.apply(this,arguments)}}())})}examLiveStudents_teacher_saveChange(i,o,a){var r=this;return new xt.c(l=>{this.getFirestoreDbForTeacherExam(!1,i).subscribe(function(){var c=(0,H.A)(function*(_){if(_&&1==_.success)try{var d=yield r._saveDocumentMerge(_.data,"exam_live_students/"+i,o,a);l.next({success:1,data:d})}catch(p){console.log(p),l.next({success:0,message:"EXCEPTION",ex:p.toString()})}else l.next(_)});return function(_){return c.apply(this,arguments)}}())})}getFirestoreDb(i){return new xt.c(o=>{var a=this.createFirestoreKey("firestore_db"),r=this.getLocalFirestoreDb(a);null!=r&&0==i?(o.next({success:1,data:r,message:"successful"}),o.complete()):this.firestoreServiceApi.apiFirestoreGetSimpleTokenGet().subscribe(c=>{c&&1==c.success?(0,Hs.p)(this.getAuthApp(),c?.data?.token??"").then(()=>{var d=vu(this.app,et.c.firestoreDatabase);this.setLocalFirestoreDb(a,d),o.next({success:1,data:d,message:"successful"}),o.complete()}).catch(d=>{"auth/invalid-custom-token"===d.code?(o.next({success:0,data:void 0,message:"EXPIRED"}),o.complete()):(o.next({success:0,data:void 0,message:"AUTH_ERROR"}),o.complete())}):(o.next({success:0,data:void 0,message:c.message??""}),o.complete())})})}getFirestoreDbForStudentExam(i,o){return new xt.c(a=>{var r=this.createFirestoreKey("firestore_db_student_"+o),l=this.getLocalFirestoreDb(r);null!=l&&0==i?(a.next({success:1,data:l,message:"successful"}),a.complete()):this.firestoreServiceApi.apiFirestoreGetStudentExamTokenGet(o).subscribe(_=>{_&&1==_.success?(0,Hs.p)(this.getAuthApp(),_?.data?.token??"").then(()=>{var p=vu(this.app,et.c.firestoreDatabase);this.setLocalFirestoreDb(r,p),a.next({success:1,data:p,message:"successful"}),a.complete()}).catch(p=>{"auth/invalid-custom-token"===p.code?(a.next({success:0,data:void 0,message:"EXPIRED"}),a.complete()):(a.next({success:0,data:void 0,message:"AUTH_ERROR"}),a.complete())}):(a.next({success:0,data:void 0,message:_.message??""}),a.complete())})})}getFirestoreDbForTeacherExam(i,o){return new xt.c(a=>{var r=this.createFirestoreKey("firestore_db_teacher_"+o),l=this.getLocalFirestoreDb(r);null!=l&&0==i?(a.next({success:1,data:l,message:"successful"}),a.complete()):this.firestoreServiceApi.apiFirestoreGetTeacherExamTokenGet(o).subscribe(_=>{_&&1==_.success?(0,Hs.p)(this.getAuthApp(),_?.data?.token??"").then(()=>{var p=vu(this.app,et.c.firestoreDatabase);this.setLocalFirestoreDb(r,p),a.next({success:1,data:p,message:"successful"}),a.complete()}).catch(p=>{"auth/invalid-custom-token"===p.code?(a.next({success:0,data:void 0,message:"EXPIRED"}),a.complete()):(a.next({success:0,data:void 0,message:"AUTH_ERROR"}),a.complete())}):(a.next({success:0,data:void 0,message:_.message??""}),a.complete())})})}signInUserByToken(i){return new xt.c(o=>{(0,Hs.p)(this.getAuthApp(),i).then(()=>{o.next({success:1,data:"",message:"successful"}),o.complete()}).catch(a=>{"auth/invalid-custom-token"===a.code?(o.next({success:0,data:"",message:"EXPIRED"}),o.complete()):(o.next({success:0,data:"",message:"AUTH_ERROR"}),o.complete())})})}setLocalFirestoreDb(i,o){this.firestoreDbs[i]=o}getLocalFirestoreDb(i){if(this.firestoreDbs.hasOwnProperty(i))return this.firestoreDbs[i]}removeLocalFirestoreDb(i){this.firestoreDbs.hasOwnProperty(i)&&delete this.firestoreDbs[i]}createFirestoreKey(i){return this.userService.getUserObj().id+"_"+i}getUserId(){return this.userService.getUserObj().id?.toString()??"0"}addUnsubscribe(i,o){i=this.getUserId()+"_"+i,this.listSubscribers.hasOwnProperty(i)||(this.listSubscribers[i]=[]),this.listSubscribers[i].push(o)}removeAllunsubscribe(i){if(i=this.getUserId()+"_"+i,this.listSubscribers.hasOwnProperty(i)){for(var o=0;o<this.listSubscribers[i].length;o++)this.listSubscribers[i][o]();delete this.listSubscribers[i]}}_saveDocument(i,o,a,r){var l=this;return(0,H.A)(function*(){return o=l.getBaseFirestore()+"/"+o,yield gh(Fs(i,o,a),l.commonService.myClone(r)),a})()}_saveDocumentMerge(i,o,a,r){var l=this;return(0,H.A)(function*(){return o=l.getBaseFirestore()+"/"+o,yield gh(Fs(i,o,a),l.commonService.myClone(r),{merge:!0}),a})()}_getCollection(i,o){var a=this;return(0,H.A)(function*(){o=a.getBaseFirestore()+"/"+o;const r=Oo(i,o);return(yield fh(r)).docs.map(_=>_.data())})()}_getDocument(i,o,a){var r=this;return(0,H.A)(function*(){o=r.getBaseFirestore()+"/"+o;const l=Fs(i,o,a),c=yield function jx(s){s=Me(s,bt);const n=Me(s.firestore,He);return function Bp(s,n,t={}){const i=new At;return s.asyncQueue.enqueueAndForget((0,H.A)(function*(){return function(a,r,l,c,_){const d=new nr({next:f=>{d.eu(),r.enqueueAndForget(()=>Rc(a,p));const v=f.docs.has(l);!v&&f.fromCache?_.reject(new ie($.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&f.fromCache&&c&&"server"===c.source?_.reject(new ie($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(f)},error:f=>_.reject(f)}),p=new Dc(as(l.path),d,{includeMetadataChanges:!0,ua:!0});return Ac(a,p)}(yield Rs(s),s.asyncQueue,n,t,i)})),i.promise}(dt(n),s._key).then(t=>ju(n,s,t))}(l);return c.exists()?c.data():null})()}_getDocuments(i,o,a){var r=this;return(0,H.A)(function*(){var l={};o=r.getBaseFirestore()+"/"+o;const c=lh(Oo(i,o),ch(function wx(){return new Mi("__name__")}(),"in",a));return(yield fh(c)).forEach(d=>{l[d.id]=d.data()}),l})()}_removeDocument(i,o,a){var r=this;return(0,H.A)(function*(){o=r.getBaseFirestore()+"/"+o,yield function zx(s){return Go(Me(s.firestore,He),[new ds(s._key,rt.none())])}(Fs(i,o,a))})()}myOnSnapshot(i,o,a,r){return fr(Fs(i,o=this.getBaseFirestore()+"/"+o,a),c=>{r(c.data())})}myOnSnapshotCollection(i,o,a){return fr(Oo(i,o=this.getBaseFirestore()+"/"+o),function(){var l=(0,H.A)(function*(c){var _=[];c.forEach(d=>{_.push(d.data())}),a(_)});return function(c){return l.apply(this,arguments)}}())}myOnSnapshotOnlyChangeInCollection(i,o,a){return fr(Oo(i,o=this.getBaseFirestore()+"/"+o),function(){var l=(0,H.A)(function*(c){var _=[];c.docChanges().forEach(d=>{_.push(d.doc.data())}),a(_)});return function(c){return l.apply(this,arguments)}}())}myOnSnapshotCollectionWithQuery(i,o,a,r){return fr(lh(Oo(i,o=this.getBaseFirestore()+"/"+o),ch(a[0],a[1],a[2])),function(){var _=(0,H.A)(function*(d){var p=[];d.docChanges().forEach(f=>{p.push(f.doc.data())}),r(p)});return function(d){return _.apply(this,arguments)}}())}getBaseFirestore(){return et.c.firestoreCollection}getInitApp(){return this.app}getAuthApp(){return(0,Hs.xI)(this.app)}initFirestoreConfig(){return new xt.c(i=>{this.firestoreSettingService.apiFirestoreSettingGetPublicKeyGet().subscribe(o=>{let a=et.c.firestoreConfig_app1;a.apiKey=o.data?.value??"",this.app=(0,_1.Wp)(a,"firestoreapp"),i.next(),i.complete()})})}constructor(i,o,a,r){this.firestoreServiceApi=i,this.userService=o,this.commonService=a,this.firestoreSettingService=r,this.firestoreDbs={},this.listSubscribers={}}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO(Ux.B),e.KVO(mn.R),e.KVO($e.R),e.KVO(Xx.Z))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})(),vh=(()=>{var s;class n{monitorAtTeacherDashboard(i){try{let o=ha();if(typeof o>"u"||!o||!o.showMonitorTeacher)return;this.fireStoreService.initFirestoreConfig().subscribe(()=>{o.ver=this.monitorService.getMNoteVer();var a=this.userService.getUserObj();o.showMonitorTeacher({user:{token:a.rememberToken,userid:a.id,username:a.fullName},config:{domainApi:et.c.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live",urlExamResultGetLastExamResultOfStudentId:"ExamLivestream/GetLastExamResultOfStudentId"},roomid:i.roomId,examid:i.examId,userlist:i.userList,examconfig:i.examConfig,firebaseApp:this.fireStoreService,filetypeStr:i.fileTypeStr})})}catch(o){console.log(o)}}monitorAtStudentDashboard(i,o){try{let r=ha();if(typeof r>"u"||!r)return;r.ver=this.monitorService.getMNoteVer();var a=this.userService.getUserObj();this.fireStoreService.initFirestoreConfig().subscribe(()=>{r.loadMonitor(()=>{if(!r.MonitorStudent)return;var l={user:{token:a.rememberToken,userid:a.id,username:a.fullName},config:{domainApi:et.c.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live"},roomid:i,element:"monitorScreen",examconfig:o,firebaseApp:this.fireStoreService,isStarted:!1};r.MonitorStudent.getInstance().prepairSession(l);let _=window.setInterval(()=>{let d=document.getElementById("monitorScreen");if(d){let p=d.getElementsByTagName("div")[0];p&&(p.setAttribute("class","mx-auto"),clearInterval(_))}},50)})})}catch(r){console.log(r)}}monitorAtTestPage(i,o,a){let r=ha();if(typeof r>"u"||!r)return a(!1);var l=this.userService.getUserObj(),c=o;r.ver=this.monitorService.getMNoteVer(),this.fireStoreService.initFirestoreConfig().subscribe(()=>{r.loadMonitor(()=>{if(!r.MonitorStudent)return a(!1);var _={user:{token:l.rememberToken,userid:l.id,username:l.fullName,studentid:c?c.id:0,studentname:c?c.fullName:null},config:{domainApi:et.c.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live"},roomid:i.roomId,element:"monitorScreenTakeTest",examconfig:i.examConfig,examid:i.examId,firebaseApp:this.fireStoreService,resultid:i.resultId,isStarted:!0,clickFromIframeFunc:()=>{},clickFromIframeFuncCaller:this};r.MonitorStudent.getInstance().startSession(_),a(!0)})})}destroyMonitorAtStudentDashboard(){try{let o=ha();if(typeof o>"u"||!o||!o.MonitorStudent)return;o.MonitorStudent.getInstance().stopSession()}catch(o){console.log(o)}}constructor(i,o,a){this.userService=i,this.monitorService=o,this.fireStoreService=a}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO(mn.R),e.KVO(u1),e.KVO(Wx))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var wn=O(35589),Hx=O(47428);let Jx=(()=>{var s;class n{constructor(){this.googleAnalyticsService=(0,e.WQX)(Hx.p),this.sAztUserService=(0,e.WQX)(mn.R)}sendStartTestEvent(){let i=this.sAztUserService.isLoginAndNotAnonymous()?"startTestAnonymous":"startTestLogin";this.googleAnalyticsService.event(i)}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();const Kx=(s,n)=>({"monitor-height":s,"mobile-monitor":n}),pn=()=>({"mr-2":!0}),Zx=()=>({"ml-1 flex":!0});function ev(s,n){if(1&s&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,t.hasErrorMessage)," ")}}function tv(s,n){if(1&s&&(e.j41(0,"div",19),e.nrm(1,"div",20,1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.l_i(1,Kx,!t.isMobileDevice,t.isMobileDevice))}}function nv(s,n){if(1&s&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",31),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(8,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(2),e.Y8G("ngClass",e.lJ4(9,pn)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_thoi_gian_vao_thi")," "),e.R7$(3),e.SpI(" ",t.examObj.startTime?e.bMT(7,5,t.examObj.startTime):e.bMT(8,7,"lang_auto_khong_thoi_han")," ")}}function iv(s,n){if(1&s&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",32),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(3),i=e.r8f(0);e.R7$(2),e.Y8G("ngClass",e.lJ4(7,pn)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_your_remaining_test")," "),e.R7$(3),e.SpI(" ",(i<=0?t.examObj.isTakeTestOnce:t.totalTested)+"/"+t.examObj.isTakeTestOnce+" "+e.bMT(7,5,"lang_auto_luot")," ")}}function sv(s,n){if(1&s&&(e.j41(0,"div",21),e.DNE(1,nv,9,10,"div",22),e.j41(2,"div",23)(3,"p",24),e.nrm(4,"lucide-icon",25),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"p",26),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",23)(11,"p",24),e.nrm(12,"lucide-icon",27),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"p",26),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.DNE(18,iv,8,8,"div",22),e.j41(19,"div")(20,"div",28)(21,"span",29),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.nrm(24,"app-capacity-exam-tree-in-view-mode-component",30),e.k0s()()),2&s){let t;const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",1!=i.examConfigObj.allowTestingEachQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(23,pn)),e.R7$(),e.SpI(" ",e.bMT(6,13,"lang_auto_loai_de")," "),e.R7$(3),e.SpI(" ",e.bMT(9,15,"lang_core_danh_gia_nang_luc")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(24,pn)),e.R7$(),e.SpI(" ",e.bMT(14,17,"lang_auto_so_luot_lam_de")," "),e.R7$(3),e.SpI(" ",null==i.totalAttended?0:i.totalAttended+" "+e.bMT(17,19,"lang_auto_luot")," "),e.R7$(2),e.Y8G("ngIf",(null!==(t=null==i.examObj?null:i.examObj.isTakeTestOnce)&&void 0!==t?t:0)>0),e.R7$(4),e.JRh(e.bMT(23,21,"lang_testbank_frontend_exam_structure_view_structure")),e.R7$(2),e.Y8G("isExpand",!1)("showCountInfo",!0)("isShowLabel",!1)("rawNodes",i.examComponents)}}function ov(s,n){if(1&s&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",31),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(8,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(3);e.R7$(2),e.Y8G("ngClass",e.lJ4(9,pn)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_thoi_gian_vao_thi")," "),e.R7$(3),e.SpI(" ",t.examObj.startTime?e.bMT(7,5,t.examObj.startTime):e.bMT(8,7,"lang_auto_khong_thoi_han")," ")}}function av(s,n){if(1&s&&(e.j41(0,"div",23)(1,"p",24),e.nrm(2,"lucide-icon",32),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(3),i=e.r8f(0);e.R7$(2),e.Y8G("ngClass",e.lJ4(7,pn)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_your_remaining_test")," "),e.R7$(3),e.SpI(" ",(i<=0?t.examObj.isTakeTestOnce:t.totalTested)+"/"+t.examObj.isTakeTestOnce+" "+e.bMT(7,5,"lang_auto_luot")," ")}}function rv(s,n){if(1&s&&(e.j41(0,"div",21)(1,"div",33)(2,"p",24),e.nrm(3,"lucide-icon",34),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"p",26),e.EFF(7),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s()(),e.DNE(10,ov,9,10,"div",22),e.j41(11,"div",23)(12,"p",24),e.nrm(13,"lucide-icon",35),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p",26),e.EFF(17),e.k0s()(),e.j41(18,"div",23)(19,"p",24),e.nrm(20,"lucide-icon",25),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s(),e.j41(23,"p",26),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()(),e.j41(26,"div",23)(27,"p",24),e.nrm(28,"lucide-icon",27),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.j41(31,"p",26),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()(),e.DNE(34,av,8,8,"div",22),e.k0s()),2&s){let t;const i=e.XpG(2),o=e.r8f(0);e.R7$(3),e.Y8G("ngClass",e.lJ4(30,pn)),e.R7$(),e.SpI(" ",e.bMT(5,14,"lang_testbank_tested_list_time_homework")," "),e.R7$(3),e.SpI(" ",i.examObj.minutes&&i.examObj.minutes>0?i.examObj.minutes+" "+e.bMT(8,16,"lang_auto_phut"):e.bMT(9,18,"lang_auto_khong_gioi_han")," "),e.R7$(3),e.Y8G("ngIf",1!=i.examConfigObj.allowTestingEachQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(31,pn)),e.R7$(),e.SpI(" ",e.bMT(15,20,"lang_auto_so_luong_cau_hoi")," "),e.R7$(3),e.SpI(" ",2==i.examObj.mixQuestion?i.examObj.limitMixQuestion:i.examObj.countQuestion," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(32,pn)),e.R7$(),e.SpI(" ",e.bMT(22,22,"lang_auto_loai_de")," "),e.R7$(3),e.SpI(" ",e.bMT(25,24,i.getExamType(i.examObj))," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(33,pn)),e.R7$(),e.SpI(" ",e.bMT(30,26,"lang_auto_so_luot_lam_de")," "),e.R7$(3),e.SpI(" ",null==i.totalAttended?0:i.totalAttended+" "+e.bMT(33,28,"lang_auto_luot")," "),e.R7$(2),e.Y8G("ngIf",(null!==(t=null==i.examObj?null:i.examObj.isTakeTestOnce)&&void 0!==t?t:0)>0&&o>=0)}}function lv(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",36)(2,"div",37),e.nrm(3,"lucide-icon",38),e.j41(4,"app-testbank-frontend-count-down-box",39),e.bIt("endCountDownEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.endCountDown(o))}),e.k0s()(),e.j41(5,"div",40)(6,"span"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"span",41),e.EFF(10),e.nI1(11,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()()(),e.bVm()}if(2&s){const t=e.XpG(2);e.R7$(3),e.Y8G("ngClass",e.lJ4(9,pn)),e.R7$(),e.Y8G("totalSecond",t.countDownSecond)("useCountDown",!0),e.R7$(3),e.JRh(e.bMT(8,5,"lang_core_time_smaller_than_start_time")+" "),e.R7$(3),e.JRh(e.bMT(11,7,t.examObj.startTime))}}function cv(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_bat_dau_thi")," "))}function uv(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_start_practicing")," "))}function _v(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",42)(1,"div",43)(2,"button",44),e.nI1(3,"isParentViewOnly"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToTakeTest())}),e.DNE(4,cv,3,3,"span",45)(5,uv,3,3,"span",45),e.nrm(6,"lucide-icon",46),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",e.bMT(3,4,"")),e.R7$(2),e.Y8G("ngIf",1!=t.examConfigObj.allowTestingEachQuestion),e.R7$(),e.Y8G("ngIf",1==t.examConfigObj.allowTestingEachQuestion),e.R7$(),e.Y8G("ngClass",e.lJ4(6,Zx))}}function dv(s,n){1&s&&(e.j41(0,"div",47)(1,"strong"),e.EFF(2,"(*)"),e.k0s(),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"b"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()),2&s&&(e.R7$(3),e.SpI(" ",e.bMT(4,4,"lang_auto_he_thong_chi_gui_hinh_anh_va_am_thanh_den_giao_vien")," "),e.R7$(3),e.JRh(e.bMT(7,6,"lang_auto_trong_qua_trinh_lam_bai_thi")),e.R7$(2),e.SpI(" ",e.bMT(9,8,"lang_auto__ngay_sau_khi_ket_thuc_bai_lam_he_thong_ngung_gui_du_lieu_du_lieu_thu_thap_chi_su_dung_phuc_vu_cho_cong_tac")," "),e.R7$(3),e.JRh(e.bMT(12,10,"lang_auto_to_chuc_ky_thi")))}function mv(s,n){if(1&s&&(e.j41(0,"div",7)(1,"div",8)(2,"h3",9),e.EFF(3),e.k0s(),e.j41(4,"div",10),e.EFF(5),e.nI1(6,"mytranslate"),e.nrm(7,"azt-download-qr-code",11),e.k0s(),e.DNE(8,tv,3,4,"div",12)(9,sv,25,25,"div",13),e.nI1(10,"isCapacityExam"),e.DNE(11,rv,35,34,"div",13),e.nI1(12,"isCapacityExam"),e.j41(13,"div",14),e.DNE(14,lv,12,10,"ng-container",15)(15,_v,7,7,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(17,dv,13,12,"div",16),e.k0s(),e.nrm(18,"app-exam-history",17)(19,"azt-frontend-banner-ads-box",18),e.k0s()),2&s){const t=e.sdS(16),i=e.XpG();e.R7$(3),e.SpI(" ",i.examObj.name," "),e.R7$(2),e.SpI(" ",e.bMT(6,15,"lang_auto_ma_de_thi")+": "+i.examObj.hashId," "),e.R7$(2),e.Y8G("fileName","azota_exam_qr_code_"+i.examObj.hashId)("linkUrl",i.copyLinkToClipboard()),e.R7$(),e.Y8G("ngIf",i.examObj.autoMonitor&&0!=i.examObj.autoMonitor),e.R7$(),e.Y8G("ngIf",e.bMT(10,17,i.examObj)),e.R7$(2),e.Y8G("ngIf",!e.bMT(12,19,i.examObj)),e.R7$(3),e.Y8G("ngIf",i.countDownSecond>0&&!i.statusEndCountDown)("ngIfElse",t),e.R7$(3),e.Y8G("ngIf",i.examObj.autoMonitor&&3==i.examObj.autoMonitor),e.R7$(),e.Y8G("examObj",i.examObj)("curTenantId",i.curTenantId)("curCategoryId",i.curCategoryId)("hashId",i.hashId),e.R7$(),e.Y8G("adsPosition",i.allAdsPositions.STUDENTSTARTTESTATLIST)}}let pv=(()=>{var s;class n extends Z.H{copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.examObj?.hashId}`}redirectToTakeTest(){this.commonService.myNavigationWithQueryString("CAPACITY"!=this.examObj?.objectType?1!==this.examConfigObj.allowTestingEachQuestion?"/test/take-test/"+this.curTenantId+"/"+(this.curCategoryId??0)+"/"+this.hashId:"/test/take-training/"+this.curTenantId+"/"+(this.curCategoryId??0)+"/"+this.hashId:"/test/capacity-exam/"+this.curTenantId+"/"+(this.curCategoryId??0)+"/"+this.hashId,""!=this.password&&null!=this.password?"?password="+encodeURIComponent(this.password)+"?backto="+encodeURIComponent(this.backToLink):"?backto="+encodeURIComponent(this.backToLink))}getExamType(i){return this.homeworkExamService.isOnlyEssay(i)?"lang_auto_tu_luan":this.homeworkExamService.isOnlyTrueFalse(i)?"lang_auto_trac_nghiem":"lang_auto_hon_hop"}dialogGiveTeacherGifts(){const i="userRole=student&productType=gift&backTo="+encodeURIComponent(this.commonService.getCurrentUrlWithoutLocale());this.sAztDialogService.open(ua.D,{data:{examHashId:this.hashId,queryString:i},width:"600px"})}endCountDown(i){this.statusEndCountDown=i??!1}getExamCapacityComponents(){this.examObj&&(this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamListExamComponentsHashIdGet(this.examObj.hashId??"").subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message??"");this.examComponents=i.data?.objs??[],this.stopStatusObj()})))}getExamByHashId(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamGetExamObjGet(this.hashId).subscribe(i=>{if(1==i.success){if(this.hasErrorMessage=i.data?.errorMessage?i.data.errorMessage:"",this.examObj=i.data?.examObj,this.examConfigObj=i.data?.examConfigObj??{},this.countDownSecond=this.timeService.compareSecondsWithCurrentTime(this.examObj?.startTime??new Date),this.totalAttended=i.data?.totalAttended??0,this.totalTested=i.data?.totalTested??0,!this.examObj)return this.successStatusObj();if(this.curCategoryId=this.examObj.categoryId??0,this.curTenantId=this.examObj.tenantId??0,this.userInfoService.apiUserInfoSaveUserActionPost({actionType:"take-test",objectId:this.examObj.id,objectKey:this.examObj.hashId}).subscribe(o=>{}),this.commonService.translateMetaData({title:this.commonService.myTranslateInstant("lang_auto_bat_dau_thi")+": "+this.examObj.name,description:this.examObj.name}),3==this.examObj.autoMonitor&&this.openVideoMonitor(),"CAPACITY"!=this.examObj.objectType)return this.successStatusObj();this.getExamCapacityComponents()}else this.errorStatusObj(i.message??"",!0)}))}openVideoMonitor(){this.sAztShowMonitorService.monitorAtStudentDashboard(this.hashId,this.examObj)}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.hashId=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString()??"";let i=this.commonService.getMyQueryParam("offline");if(i)return this.myNavigation(`/test/share-offline-result/${this.hashId}/${i}/-1`);this.password=this.commonService.getMyQueryParam("password")??"",this.curCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.backToLink=this.commonService.getMyQueryParam("backto")??"/student/classroom/0",this.getExamByHashId()}))}constructor(i,o,a,r,l,c,_){super(),this.userInfoService=i,this.activeRoute=o,this.homeworkExamService=a,this.frontExamService=r,this.sAztShowMonitorService=l,this.sAztDialogService=c,this.sAztGAService=_,this.backToLink="",this.curTenantId=0,this.curCategoryId=0,this.hashId="",this.totalAttended=0,this.totalTested=0,this.hasErrorMessage="",this.password="",this.examConfigObj={},this.examComponents=[],this.allAdsPositions=En.rA,this.allAdsDisplayTypes=En.ud,this.countDownSecond=0,this.statusEndCountDown=!1,this.timeService=(0,e.WQX)(Xt.F),this.sAztGAService.sendStartTestEvent()}ngOnDestroy(){this.sAztShowMonitorService.destroyMonitorAtStudentDashboard(),super.ngOnDestroy()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(_l.fv),e.rXU(L.nX),e.rXU(pa.Z),e.rXU(ke.iB),e.rXU(vh),e.rXU(wn.i),e.rXU(Jx))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-student-view"]],standalone:!0,features:[e.Vt3,e.aNF],decls:5,vars:4,consts:[["normalMode",""],["monitorScreen",""],[3,"headerBackToLink"],[1,"relative"],["class","alert alert-danger mt-2",4,"ngIf"],["class","intro-y mt-8",4,"ngIf"],[1,"alert","alert-danger","mt-2"],[1,"intro-y","mt-8"],[1,"box","mx-auto","mt-5","p-5",2,"max-width","560px"],[1,"text-lg","font-medium","text-center","text-break"],[1,"text-md","justify-center","font-medium","mt-2","flex","items-center"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],["class","row my-2",4,"ngIf"],["class","azt-info-exam mt-5",4,"ngIf"],[1,"mt-5","w-full","flex"],[4,"ngIf","ngIfElse"],["class","note-exam mt-1",4,"ngIf"],[3,"examObj","curTenantId","curCategoryId","hashId"],[1,"mb-3","mt-3",3,"adsPosition"],[1,"row","my-2"],["id","monitorScreen",1,"self-center","text-center",2,"margin","auto",3,"ngClass"],[1,"azt-info-exam","mt-5"],["class","flex items-center mt-3",4,"ngIf"],[1,"flex","items-center","mt-3"],[1,"text-md","flex","items-center"],["name","clipboard-type","size","16",3,"ngClass"],[1,"text-md","font-medium","ml-auto"],["name","users","size","16",3,"ngClass"],[1,"mt-2","mb-2","text-center"],[1,"font-bold"],[3,"isExpand","showCountInfo","isShowLabel","rawNodes"],["name","calendar-clock","size","16",3,"ngClass"],["name","file-sliders","size","16",3,"ngClass"],[1,"flex","items-center"],["name","clock-4","size","16",3,"ngClass"],["name","circle-help","size","16",3,"ngClass"],[1,"mx-auto",2,"max-width","300px"],[1,"btn","w-full","btn-pending-soft","text-lg"],["name","alarm-clock","size","24",3,"ngClass"],["type","wait",3,"endCountDownEvent","totalSecond","useCountDown"],[1,"mt-5","font-medium","text-center"],[1,"text-pending"],[1,"grid","grid-cols-12","gap-5","w-full"],[1,"col-span-12"],["azt-track-service","exam-details-OgNF7kiBSP",1,"btn","btn-pending","w-full","text-white",3,"click","disabled"],[4,"ngIf"],["name","chevron-right","size","16",3,"ngClass"],[1,"note-exam","mt-1"]],template:function(i,o){if(1&i&&(e.SS7(0),e.j41(1,"student-layout",2)(2,"div",3),e.DNE(3,ev,3,3,"div",4)(4,mv,20,21,"div",5),e.k0s()()),2&i){let a;e.bH3((null!==(a=null==o.examObj?null:o.examObj.isTakeTestOnce)&&void 0!==a?a:0)-o.totalTested),e.R7$(),e.Y8G("headerBackToLink",o.backToLink),e.R7$(2),e.Y8G("ngIf",""!=o.hasErrorMessage),e.R7$(),e.Y8G("ngIf",""==o.hasErrorMessage&&o.examObj)}},dependencies:[ae.j,hi.d,Xs.n,Zt,c1,ul.K,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.bH,z.hx,z.Xc,U.Id,q.k],encapsulation:2}),n})();var yh=O(84300);let hv=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.activatedRoute=(0,e.WQX)(L.nX),this.hashId="",this.backToLink=""}ngOnInit(){super.ngOnInit(),this.hashId=this.getMyParam(this.activatedRoute,"hash_id")??"",this.backToLink=this.getMyQueryParam("backto")??`de-thi/${this.hashId}`}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-leaderboard-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[[3,"headerBackToLink"],[1,"leaderboard-test","mt-5","mx-auto",2,"max-width","1100px"],[3,"hashId","view"]],template:function(i,o){1&i&&(e.j41(0,"student-layout",0)(1,"div",1),e.nrm(2,"azt-leaderboard",2),e.k0s()()),2&i&&(e.Y8G("headerBackToLink",o.backToLink),e.R7$(2),e.Y8G("hashId",o.hashId)("view","full"))},dependencies:[ae.j,yh.g,x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})(),fv=(()=>{var s;class n extends Z.H{}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-test-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:0,consts:[["id","testbank-frontend-layout"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[x.MD,g.X1,L.iI,L.n3,g.YN,Y.s,F.flO,W.L,U.Id,q.k],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}"]}),n})();var gv=O(61737),Tr=O(40693),Sh=O(5977),Pn=O(44837),wh=O(38344),br=O(86600),Du=O(53719),Mu=O(82798);const Ih=s=>({"padding-left":s}),Tv=()=>({"text-pending":!0});function bv(s,n){if(1&s&&(e.j41(0,"mat-option",6)(1,"i",7),e.nrm(2,"azt-svg-icon",8),e.k0s(),e.j41(3,"span",9),e.EFF(4),e.k0s()()),2&s){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.eq3(5,Ih,15*(t.level+1)+"px"))("disabled",!t.children.length)("value",t),e.R7$(2),e.Y8G("size",20),e.R7$(2),e.JRh(t.objectName)}}function xv(s,n){if(1&s){const t=e.RV6();e.j41(0,"mat-option",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG();return e.Njj(a.confirmSelected(o))}),e.nrm(1,"lucide-icon",11),e.j41(2,"span",12),e.EFF(3),e.k0s()()}if(2&s){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.eq3(4,Ih,15*(t.level+1)+"px"))("value",t),e.R7$(),e.Y8G("ngClass",e.lJ4(6,Tv)),e.R7$(2),e.JRh(t.objectName)}}function vv(s,n){if(1&s&&(e.qex(0),e.DNE(1,bv,5,7,"mat-option",4)(2,xv,4,7,"mat-option",5),e.bVm()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngIf","FOLDER"==t.objectType),e.R7$(),e.Y8G("ngIf","EXAM"==t.objectType)}}let yv=(()=>{var s;class n extends Z.H{confirmSelected(i){"FOLDER"!=i.objectType&&(this.combineExamCapacity.forEach(o=>o.isSelected=!1),i.isSelected=!0,this.currentSelected=i,this.selectedExamEmitter.emit({examCapacityId:i.examId,examId:i.objectId??0,examHashId:i.exam?.hashId??"",examCapacityTestId:this.currentResultObj?.examCapacityTestId??0}))}asTemplateDataObj(i){return i}convertTreeNodes(i,o){let a=[];return i.forEach((r,l)=>{let c="EXAM"==r.objectType&&(r.objectId??r.examId)==(this.examComponentObj?this.examComponentObj.id:this.examObj?.id),_={...r,level:o,nodeIndex:l,isSelected:c,randomHashId:this.uuidService.getUuid()};a.push(_),c&&(this.currentSelected=_),r.children.length&&a.push(...this.convertTreeNodes(r.children,o+1))}),a}ngOnInit(){super.ngOnInit(),this.combineExamCapacity=this.convertTreeNodes(this.capacityComponents??[],0)}constructor(){super(),this.capacityComponents=[],this.selectedExamEmitter=new e.bkB,this.uuidService=(0,e.WQX)(wh.D),this.combineExamCapacity=[],this.errorMessage=""}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-select-capacity-exam-result"]],inputs:{capacityComponents:"capacityComponents",examObj:"examObj",examComponentObj:"examComponentObj",currentResultObj:"currentResultObj"},outputs:{selectedExamEmitter:"selectedExamEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[[1,"test-select-capacity"],[1,"w-full"],[3,"value"],[4,"ngFor","ngForOf"],[3,"ngStyle","disabled","value",4,"ngIf"],[3,"ngStyle","value","click",4,"ngIf"],[3,"ngStyle","disabled","value"],["aria-hidden","true"],["type","folder",3,"size"],[1,"font-normal","ml-2","select-capacity-span",2,"vertical-align","middle"],[3,"click","ngStyle","value"],["name","file-check","size","20",3,"ngClass"],[1,"select-capacity-span","ml-2",2,"vertical-align","middle","white-space","nowrap"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.DNE(3,vv,3,2,"ng-container",3),e.k0s()()()),2&i&&(e.R7$(2),e.Y8G("value",o.currentSelected),e.R7$(),e.Y8G("ngForOf",o.combineExamCapacity))},dependencies:[Ee.m,x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,L.iI,g.YN,Y.s,br.wT,Du.rl,Mu.VO,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function Sv(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.JRh(null!=(null==t.examResultObj?null:t.examResultObj.mark)?(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):""):e.bMT(2,1,"lang_auto_chua_co_diem"))}}function wv(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.JRh(null!=(null==t.examResultObj?null:t.examResultObj.mark)?(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"/10"):e.bMT(2,1,"lang_auto_chua_co_diem"))}}function Iv(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_duoc_xem")))}let Cv=(()=>{var s;class n extends Z.H{ngOnInit(){super.ngOnInit()}constructor(i){super(),this.commonService=i,this.viewPractice=!1}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($e.R))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-testbank-test-review-show-mark-info-of-student"]],inputs:{examObj:"examObj",examResultObj:"examResultObj",viewPractice:"viewPractice"},standalone:!0,features:[e.Vt3,e.aNF],decls:7,vars:6,consts:[[1,"font-medium","text-lg","flex","items-center"],[1,"mr-3"],[4,"ngIf"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"span",1),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Sv,3,3,"span",2)(5,wv,3,3,"span",2)(6,Iv,3,3,"span",2),e.k0s()),2&i&&(e.R7$(2),e.SpI("",e.bMT(3,4,"lang_auto_diem_cuoi"),": "),e.R7$(2),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&!o.viewPractice),e.R7$(),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&o.viewPractice),e.R7$(),e.Y8G("ngIf",2==(null==o.examObj?null:o.examObj.whenShowResult)))},dependencies:[x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var Fe=O(34006),kt=O(85389),Nn=O(31661);let kv=(()=>{var s;class n{getDictionaryByGroupFieldTS(i,o){for(var a={},r=0;r<i.length;r++)i[r].hasOwnProperty(o)&&("number"==typeof i[r][o]||"string"==typeof i[r][o])&&(a.hasOwnProperty(i[r][o])||(a[i[r][o]]=[]),a[i[r][o]].push(i[r]));return a}getDictionaryByFieldTS(i,o){for(var a={},r=0;r<i.length;r++)i[r].hasOwnProperty(o)&&("number"==typeof i[r][o]||"string"==typeof i[r][o])&&(a[i[r][o]]=i[r]);return a}getDictionaryBy2FieldsTS(i,o,a){for(var r={},l=0;l<i.length;l++)i[l].hasOwnProperty(o)&&("number"==typeof i[l][o]||"string"==typeof i[l][o])&&i[l].hasOwnProperty(a)&&("number"==typeof i[l][a]||"string"==typeof i[l][a])&&(r[i[l][o]+"_"+i[l][a]]=i[l]);return r}getListValueByFieldNumberTS(i,o){for(var a=[],r=0;r<i.length;r++)i[r].hasOwnProperty(o)&&"number"==typeof i[r][o]&&a.push(i[r][o]);return a}getListValueByField(i,o){for(var a=[],r=0;r<i.length;r++)if(i[r].hasOwnProperty(o)){var l=a.filter(c=>c[o]==i[r][o]);(!l||0==l.length)&&a.push(i[r])}return a}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var ln=O(93585),Gs=O(96850);const Ev=s=>({"font-bold":s});function Av(s,n){if(1&s&&(e.j41(0,"td",12),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG().$implicit;e.BMQ("rowspan",i.length),e.R7$(),e.JRh(t.label)}}function Ov(s,n){if(1&s&&(e.qex(0),e.j41(1,"tr"),e.DNE(2,Av,2,2,"td",11),e.j41(3,"td",12),e.EFF(4),e.nI1(5,"formatFullDateTimeTimezoneByUserUnitPipe"),e.k0s(),e.j41(6,"td",13),e.EFF(7),e.k0s()(),e.bVm()),2&s){const t=n.$implicit,i=n.index,o=e.XpG(3);e.R7$(2),e.Y8G("ngIf",0==i),e.R7$(2),e.JRh(e.bMT(5,4,1e3*t.second)),e.R7$(2),e.Y8G("ngClass",e.eq3(6,Ev,t.isFontBold)),e.R7$(),e.JRh(o.isShowOriginAnswer?t.key:t.alpha?t.alpha:t.key)}}function Rv(s,n){if(1&s&&(e.qex(0),e.DNE(1,Ov,8,8,"ng-container",10),e.bVm()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}function Fv(s,n){if(1&s&&(e.j41(0,"table",6)(1,"tr")(2,"th",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"th",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.DNE(11,Rv,2,1,"ng-container",10),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_cau_hoi")),e.R7$(3),e.JRh(e.bMT(7,6,"lang_auto_thoi_gian")),e.R7$(3),e.JRh(e.bMT(10,8,"lang_auto_dap_an")),e.R7$(2),e.Y8G("ngForOf",t.groupObjs)}}function jv(s,n){1&s&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_co_du_lieu_lam_bai_trac_nghiem_chon_dap_an_dung_cua_thi_sinh")))}function zv(s,n){if(1&s&&(e.qex(0),e.j41(1,"tr")(2,"td",12),e.EFF(3),e.k0s(),e.j41(4,"td",12),e.EFF(5),e.nI1(6,"formatFullDateTimeTimezoneByUserUnitPipe"),e.k0s(),e.j41(7,"td",12),e.EFF(8),e.k0s()(),e.bVm()),2&s){let t;const i=n.$implicit;e.R7$(3),e.JRh(i.userAgent),e.R7$(2),e.JRh(e.bMT(6,3,null!==(t=i.startedAt)&&void 0!==t?t:"")),e.R7$(3),e.JRh(i.ip)}}function Dv(s,n){if(1&s&&(e.j41(0,"table",16)(1,"tr")(2,"th",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"th",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.DNE(11,zv,9,5,"ng-container",10),e.k0s()),2&s){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_thong_tin_thiet_bi")),e.R7$(3),e.JRh(e.bMT(7,6,"lang_auto_thoi_gian")),e.R7$(3),e.JRh(e.bMT(10,8,"IP")),e.R7$(2),e.Y8G("ngForOf",t.ipTrackingDataObjs)}}function Mv(s,n){1&s&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_co_du_lieu")))}function Gv(s,n){if(1&s&&(e.j41(0,"mat-tab",1),e.nI1(1,"mytranslate"),e.j41(2,"div",2),e.DNE(3,Dv,12,10,"table",15)(4,Mv,3,3,"ng-template",null,0,e.C5r),e.k0s()()),2&s){const t=e.sdS(5),i=e.XpG();e.FS9("label",e.bMT(1,3,"lang_auto_thong_tin_thiet_bi_IP")),e.R7$(3),e.Y8G("ngIf",i.ipTrackingDataObjs.length>0)("ngIfElse",t)}}let Pv=(()=>{var s;class n extends Z.H{ngOnInit(){super.ngOnInit(),this.findReTapQuestions()}constructor(i,o,a){super(),this.dictionaryService=i,this.userService=o,this.answerTypeService=a,this.startQuestionIndex=1,this.isShowOriginAnswer=!1,this.ipTrackingDataObjs=[],this.isTeacherRole=this.userService.isTeacherRole(),this.groupObjs=[],this.timezoneOffset=(new Date).getTimezoneOffset()}findReTapQuestions(){var i=this.dictionaryService.getDictionaryByGroupFieldTS(this.dataResultObjs??[],"index");for(var o in i)if(i.hasOwnProperty(o)){var a=i[o].map((r,l)=>{let c=!1,_=this.questionObjs.find(d=>d.id==r.questionId);if(this.answerTypeService.isTrueFalseAnswer(_)){for(let d=i[o].length-1;d>=0;d--)if(i[o][d].key.includes(r.key.split("")[0])){c=r.key==i[o][d].key;break}}else c=l==i[o].length-1;return{...r,isFontBold:c,label:`${_?.originalLabel??Number(r.index)+this.startQuestionIndex-1} ${_?.groupInfo?.groupId?"("+_?.groupInfo?.groupId+")":""}`}});this.groupObjs.push(a)}}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(kv),e.rXU(mn.R),e.rXU(ln._))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-test-result-tracking"]],inputs:{startQuestionIndex:"startQuestionIndex",isShowOriginAnswer:"isShowOriginAnswer",dataResultObjs:"dataResultObjs",dataScrollObjs:"dataScrollObjs",ipTrackingDataObjs:"ipTrackingDataObjs",questionObjs:"questionObjs"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:9,consts:[["noData",""],[3,"label"],[1,"overflow-x-auto","mt-5"],[1,"font-medium","text-xs"],["id","tracktable","class","table table-bordered mt-3",4,"ngIf","ngIfElse"],[3,"label",4,"ngIf"],["id","tracktable",1,"table","table-bordered","mt-3"],["id","questionNum",1,"w-24","text-center"],["id","timeStamp",1,"w-56","text-center"],["id","answerLabel",1,"w-24","text-center"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"text-center",3,"ngClass"],[1,"alert","alert-secondary","p-5"],["id","tracktable","class","table table-bordered",4,"ngIf","ngIfElse"],["id","tracktable",1,"table","table-bordered"]],template:function(i,o){if(1&i&&(e.j41(0,"mat-tab-group")(1,"mat-tab",1),e.nI1(2,"mytranslate"),e.j41(3,"div",2)(4,"div",3),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,Fv,12,10,"table",4)(8,jv,3,3,"ng-template",null,0,e.C5r),e.k0s()(),e.DNE(10,Gv,6,5,"mat-tab",5),e.k0s()),2&i){const a=e.sdS(9);e.R7$(),e.FS9("label",e.bMT(2,5,"lang_auto_chi_tiet_chon_dap_an")),e.R7$(4),e.JRh(e.bMT(6,7,"lang_azt_note_export_excel_exam")),e.R7$(2),e.Y8G("ngIf",o.groupObjs.length>0)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",o.isTeacherRole)}},dependencies:[x.MD,x.YU,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,Gs.mq,Gs.T8,F.flO,W.L,z.Ky,U.Id,q.k],encapsulation:2}),n})();var Vi=O(82179);let Nv=(()=>{var s;class n{processData(i){let o=[],a=[];if(i)for(var r=0;r<i.length;r++)if("scroll"!=i[r][0]){var l={index:i[r][0],alpha:i[r][1],key:i[r][2],questionId:Number(i[r][3]),second:Number(i[r][4])};o.push(l)}else{var c={scrollPos:Number(i[r][1]),second:Number(i[r][2])};a.push(c)}return[o,a]}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();function Vv(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",3),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function Lv(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-mat-dialog-content")(1,"div",4),e.nrm(2,"azt-test-result-tracking",5),e.k0s()(),e.j41(3,"div",6)(4,"button",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.dialogRef.close())}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()}if(2&s){let t;const i=e.XpG();e.R7$(2),e.Y8G("questionObjs",i.data.questionObjs)("isShowOriginAnswer",i.data.isShowOriginAnswer)("startQuestionIndex",null!==(t=null==i.examObj?null:i.examObj.startQuestionIndex)&&void 0!==t?t:1)("dataResultObjs",i.dataResultObjs)("dataScrollObjs",i.dataScrollObjs)("ipTrackingDataObjs",i.ipTrackingDataObjs),e.R7$(3),e.SpI(" ",e.bMT(6,7,"lang_auto_thoat")," ")}}let Bv=(()=>{var s;class n extends kt._{getData(i){this.initStatusObj(),this.frontExamResultTrackService.apiFrontExamResultTrackGetObjGet(this.examHashId,i).subscribe(o=>{if(1==o.success){this.examObj=o.data?.examObj;var a=this.castJsonToObj(this.zipDataService.decodeContentGzip(o?.data?.examResultTrackObj?.trackData??""));a&&a&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(a)),this.ipTrackingDataObjs=o.data?.ipTracks??[],this.successStatusObj()}else this.errorStatusObj(o.message??"",!0);this.isLoading=!1})}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_chi_tiet_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tiet_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let i=Number(this.data.examResultIdParam?.toString());this.examHashId=this.data.hashId??"",this.getData(i),super.ngOnInit()}constructor(i,o,a,r,l){super(l,r),this.frontExamResultTrackService=i,this.zipDataService=o,this.sAztTestResultTrackingService=a,this.dialogRef=r,this.data=l,this.dataResultObjs=[],this.dataScrollObjs=[],this.ipTrackingDataObjs=[],this.backToLink="",this.examHashId="",this.isLoading=!0}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ke.Wq),e.rXU(Vi.j),e.rXU(Nv),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-test-front-result-tracking"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["doneLoading",""],[1,"box","scroll-menu-test",2,"height","calc(100vh - 200px)","min-height","75vh"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"p-3"],[3,"questionObjs","isShowOriginAnswer","startQuestionIndex","dataResultObjs","dataScrollObjs","ipTrackingDataObjs"],[1,"mt-2","pt-2","pb-2","px-3","text-right","absolute","bottom-0","right-0"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary",3,"click"]],template:function(i,o){if(1&i&&(e.j41(0,"div",1),e.DNE(1,Vv,1,1,"azt-loading-effect",2)(2,Lv,7,9,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.isLoading)("ngIfElse",a)}},dependencies:[se.K,Nn.U,Pv,x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,q.k],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#fff;width:100vh;max-height:95vh;padding:.5rem 1.25rem 1.25rem;overflow-y:auto}"]}),n})();var Ch=O(27281),$v=O(18741),St=O(26450);const Gu=(s,n)=>({"btn-primary-soft":s,"btn-secondary-soft":n}),Qv=s=>({"block w-28":s}),kh=s=>({"width.%":s}),Eh=(s,n)=>({"text-success":s,"text-danger":n}),Ah=()=>({"text-success":!0}),Oh=()=>({"text-danger":!0}),qv=()=>({"mr-2":!0});function Yv(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",3),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function Uv(s,n){1&s&&(e.j41(0,"th",27),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_don_vi_kien_thuc")))}function Xv(s,n){if(1&s&&(e.j41(0,"td",28)(1,"span",29),e.EFF(2),e.k0s()()),2&s){const t=n.$implicit;e.R7$(2),e.JRh(t.title)}}function Wv(s,n){1&s&&(e.j41(0,"th",30),e.nrm(1,"span",31),e.k0s())}function Hv(s,n){1&s&&(e.j41(0,"span",34),e.nrm(1,"azt-loading-ui"),e.k0s())}function Jv(s,n){if(1&s){const t=e.RV6();e.j41(0,"span",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.practiceMore(o))}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("ngClass",e.eq3(4,Qv,!t.isMobileDevice)),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_testbank_practice")," ")}}function Kv(s,n){if(1&s&&(e.j41(0,"td",28),e.DNE(1,Hv,2,0,"span",32)(2,Jv,3,6,"span",33),e.k0s()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",t.loadingPracticeMore),e.R7$(),e.Y8G("ngIf",!t.loadingPracticeMore)}}function Zv(s,n){1&s&&(e.j41(0,"th",36)(1,"span",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_skill_statistical_total_question_completed")))}function e0(s,n){if(1&s&&(e.j41(0,"td",28)(1,"span",31),e.EFF(2),e.k0s()()),2&s){const t=n.$implicit;e.R7$(2),e.JRh(t.numberOfQuestion)}}function t0(s,n){1&s&&(e.j41(0,"th",36)(1,"span",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_skill_statistical_total_question_true")))}function n0(s,n){if(1&s&&(e.j41(0,"td",28)(1,"span",31),e.EFF(2),e.k0s()()),2&s){const t=n.$implicit;e.R7$(2),e.JRh(t.numberOfCorrectQuestion)}}function i0(s,n){1&s&&(e.j41(0,"th",36)(1,"span",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_ty_le")))}function s0(s,n){if(1&s&&(e.j41(0,"td",28)(1,"div",37)(2,"div",38)(3,"span",39),e.EFF(4),e.nI1(5,"number"),e.nI1(6,"replace"),e.k0s()()()()),2&s){const t=n.$implicit;e.R7$(2),e.Y8G("ngStyle",e.eq3(9,kh,t.currentPercent)),e.R7$(2),e.JRh(t.numberOfQuestion&&t.numberOfCorrectQuestion?e.brH(6,5,e.i5U(5,2,t.currentPercent,"1.0-1"),",",".")+"%":"")}}function o0(s,n){1&s&&(e.j41(0,"th",36),e.nrm(1,"span",31),e.k0s())}function a0(s,n){1&s&&e.nrm(0,"lucide-icon",44),2&s&&e.Y8G("ngClass",e.lJ4(1,Ah))}function r0(s,n){1&s&&e.nrm(0,"lucide-icon",45),2&s&&e.Y8G("ngClass",e.lJ4(1,Oh))}function l0(s,n){if(1&s&&(e.j41(0,"td",28)(1,"div",40),e.DNE(2,a0,1,2,"lucide-icon",41)(3,r0,1,2,"lucide-icon",42),e.j41(4,"span",43),e.EFF(5),e.nI1(6,"number"),e.nI1(7,"replace"),e.k0s()()()),2&s){const t=n.$implicit;e.R7$(2),e.Y8G("ngIf",t.adjustment>0),e.R7$(),e.Y8G("ngIf",t.adjustment<0),e.R7$(),e.Y8G("ngClass",e.l_i(11,Eh,t.adjustment>0,t.adjustment<0)),e.R7$(),e.SpI(" ",t.adjustment?e.brH(7,7,e.i5U(6,4,100*t.adjustment,"1.0-1"),",",".")+"%":""," ")}}function c0(s,n){1&s&&e.nrm(0,"tr",46)}function u0(s,n){1&s&&e.nrm(0,"tr",47)}function _0(s,n){1&s&&e.nrm(0,"lucide-icon",44),2&s&&e.Y8G("ngClass",e.lJ4(1,Ah))}function d0(s,n){1&s&&e.nrm(0,"lucide-icon",45),2&s&&e.Y8G("ngClass",e.lJ4(1,Oh))}function m0(s,n){if(1&s&&(e.j41(0,"div",51)(1,"div",54),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",40),e.DNE(5,_0,1,2,"lucide-icon",41)(6,d0,1,2,"lucide-icon",42),e.j41(7,"span",43),e.EFF(8),e.nI1(9,"number"),e.nI1(10,"replace"),e.k0s()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_ty_le_truoc_do")+":"," "),e.R7$(3),e.Y8G("ngIf",t.adjustment>0),e.R7$(),e.Y8G("ngIf",t.adjustment<0),e.R7$(),e.Y8G("ngClass",e.l_i(14,Eh,t.adjustment>0,t.adjustment<0)),e.R7$(),e.SpI(" ",t.adjustment?e.brH(10,10,e.i5U(9,7,100*t.adjustment,"1.0-1"),",",".")+"%":""," ")}}function p0(s,n){1&s&&(e.j41(0,"span",34),e.nrm(1,"azt-loading-ui"),e.k0s())}function h0(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",58),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.practiceMore(o))}),e.nrm(1,"lucide-icon",59),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,qv)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_testbank_practice")," "))}function f0(s,n){if(1&s&&(e.j41(0,"div",48)(1,"div",49)(2,"div",50),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",51)(6,"div",52),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",53),e.EFF(10),e.k0s()(),e.j41(11,"div",51)(12,"div",52),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"div",53),e.EFF(16),e.k0s()(),e.j41(17,"div",51)(18,"div",54),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"div",37)(22,"div",38)(23,"span",39),e.EFF(24),e.nI1(25,"number"),e.nI1(26,"replace"),e.k0s()()()(),e.DNE(27,m0,11,17,"div",55),e.j41(28,"div",56),e.DNE(29,p0,2,0,"span",32)(30,h0,4,5,"button",57),e.k0s()()),2&s){const t=n.$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,11,t.title)," "),e.R7$(4),e.SpI(" ",e.bMT(8,13,"lang_skill_statistical_total_question_completed")+":"," "),e.R7$(3),e.SpI(" ",t.numberOfQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(14,15,"lang_skill_statistical_total_question_true")+":"," "),e.R7$(3),e.SpI(" ",t.numberOfCorrectQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(20,17,"lang_auto_ty_le")+":"," "),e.R7$(3),e.Y8G("ngStyle",e.eq3(26,kh,t.currentPercent)),e.R7$(2),e.JRh(t.numberOfQuestion&&t.numberOfCorrectQuestion?e.brH(26,22,e.i5U(25,19,t.currentPercent,"1.0-1"),",",".")+"%":""),e.R7$(3),e.Y8G("ngIf",t.adjustment),e.R7$(2),e.Y8G("ngIf",t.loadingPracticeMore),e.R7$(),e.Y8G("ngIf",!t.loadingPracticeMore)}}function g0(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-mat-dialog-content",4)(1,"div",5)(2,"b",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.selectPreviousDay(1))}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"button",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.selectPreviousDay(3))}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.selectPreviousDay(7))}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()(),e.j41(15,"table",11),e.qex(16,12),e.DNE(17,Uv,3,3,"th",13)(18,Xv,3,1,"td",14),e.bVm(),e.qex(19,15),e.DNE(20,Wv,2,0,"th",16)(21,Kv,3,2,"td",14),e.bVm(),e.qex(22,17),e.DNE(23,Zv,4,3,"th",18)(24,e0,3,1,"td",14),e.bVm(),e.qex(25,19),e.DNE(26,t0,4,3,"th",18)(27,n0,3,1,"td",14),e.bVm(),e.qex(28,20),e.DNE(29,i0,4,3,"th",18)(30,s0,7,11,"td",14),e.bVm(),e.qex(31,21),e.DNE(32,o0,2,0,"th",18)(33,l0,8,14,"td",14),e.bVm(),e.DNE(34,c0,1,0,"tr",22)(35,u0,1,0,"tr",23),e.k0s(),e.DNE(36,f0,31,28,"div",24),e.k0s(),e.j41(37,"div",25)(38,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.btnCloseDialog())}),e.EFF(39),e.nI1(40,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.Y8G("minHeight","200px"),e.R7$(3),e.JRh(e.bMT(4,14,"lang_testbank_frontend_student_skill_statistic_title")),e.R7$(3),e.Y8G("ngClass",e.l_i(24,Gu,1==t.currentPreviousDay,1!=t.currentPreviousDay)),e.R7$(),e.SpI(" 1 ",e.bMT(8,16,"lang_auto_ngay")," "),e.R7$(2),e.Y8G("ngClass",e.l_i(27,Gu,3==t.currentPreviousDay,3!=t.currentPreviousDay)),e.R7$(),e.SpI(" 3 ",e.bMT(11,18,"lang_auto_ngay")," "),e.R7$(2),e.Y8G("ngClass",e.l_i(30,Gu,7==t.currentPreviousDay,7!=t.currentPreviousDay)),e.R7$(),e.SpI(" 7 ",e.bMT(14,20,"lang_auto_ngay")," "),e.R7$(2),e.Y8G("dataSource",t.objs),e.R7$(19),e.Y8G("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("ngForOf",t.objs),e.R7$(3),e.SpI(" ",e.bMT(40,22,"lang_auto_dong")," ")}}let Rh=(()=>{var s;class n extends kt._{btnCloseDialog(){this.dialogRef.close()}selectPreviousDay(i){this.currentPreviousDay=i,this.initData(this.currentPreviousDay)}practiceMore(i){null==this.objs.find(o=>o.loadingPracticeMore)&&(i.loadingPracticeMore=!0,this.waitDestroy(this.sLearningService.apiLearningAiKnowledgeIdGet(i.id??0).subscribe(o=>{if(o.success){let a=this.commonService.getMyQueryParam("backto")??"/student/classroom/0";this.commonService.myNavigationWithQueryString("/test/take-test/"+o.data?.tenantId+"/"+o.data?.categoryId+"/"+o.data?.hashId,"?backto="+encodeURIComponent(a)),this.btnCloseDialog()}else this.showErrorSnack(o.message);i.loadingPracticeMore=!1})))}initData(i){i||this.sAztAzotaTrackingService.sendCustomEvent("CLICK_STUDENT_SKILL_STATISTIC",[]);let o=this.sAztUserService.getUserObj();i||this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.studentPracticeService.aiApiV1StudentPracticeTnthptProfileGet(o.id,this.data.examSchoolSubjectId,i??7)).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.objs=(a.data?.knowledgeItems??[]).map(r=>({...r,loadingPracticeMore:!1,currentPercent:r.numberOfQuestion?r.numberOfCorrectQuestion/r.numberOfQuestion*100:0})),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.initData()}constructor(i,o,a,r,l,c){super(c,l),this.sAztAzotaTrackingService=i,this.sAztUserService=o,this.sLearningService=a,this.studentPracticeService=r,this.dialogRef=l,this.objs=[],this.displayedColumns=["name","actionCol","questionTotal","questionTrue","percent","oldPercent"],this.previousDayControl=new g.MJ(7,{nonNullable:!0}),this.currentPreviousDay=7}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Ch.M),e.rXU(mn.R),e.rXU(ke.MU),e.rXU($v.K),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["coazt-student-skill-statistic-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["doneLoading",""],[1,"box","p-3","skill-statistical"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"minHeight"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[2,"align-content","center"],[1,"flex","items-center","mt-3","sm:mt-0","sm:ml-2"],["azt-track-service","student-skill-statistic-zSJvSbnQR",1,"btn",3,"click","ngClass"],["azt-track-service","student-skill-statistic-UttohfO5q_",1,"btn","ml-2",3,"click","ngClass"],["azt-track-service","student-skill-statistic-tuRhGryjOa",1,"btn","ml-2",3,"click","ngClass"],["mat-table","",1,"mat-elevation-z8","mt-2","azt-hidden","md:block",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","class","whitespace-nowrap",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actionCol"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","questionTotal"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["matColumnDef","questionTrue"],["matColumnDef","percent"],["matColumnDef","oldPercent"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","box p-3 md:hidden mt-4 border border-slate-200 dark:border-darkmode-400",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-end","pt-2","w-full","bg-white"],["azt-track-service","student-skill-statistic-6PnY6_T3S2",1,"btn","btn-secondary","w-32",3,"click"],["mat-header-cell","",1,"whitespace-nowrap"],["mat-cell",""],[1,"whitespace-nowrap"],["mat-header-cell",""],[1,"center-span"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["azt-track-service","student-skill-statistic-cK-mF-GKd","class","text-white btn btn-pending","style","font-weight: 430",3,"ngClass","click",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","student-skill-statistic-cK-mF-GKd",1,"text-white","btn","btn-pending",2,"font-weight","430",3,"click","ngClass"],["mat-header-cell","",1,"text-center"],[1,"progress"],[1,"progress-done",3,"ngStyle"],[1,"text-md","font-medium","span-baseline-middle"],[1,"flex"],["name","arrow-big-up-dash","size","24","style","z-index: 99; align-self: center",3,"ngClass",4,"ngIf"],["name","arrow-big-down-dash","size","24","style","z-index: 99; align-self: center",3,"ngClass",4,"ngIf"],[1,"text-md","font-medium","ml-1",2,"align-content","center",3,"ngClass"],["name","arrow-big-up-dash","size","24",2,"z-index","99","align-self","center",3,"ngClass"],["name","arrow-big-down-dash","size","24",2,"z-index","99","align-self","center",3,"ngClass"],["mat-header-row",""],["mat-row",""],[1,"box","p-3","md:hidden","mt-4","border","border-slate-200","dark:border-darkmode-400"],[1,"mt-0"],[1,"text-base","font-medium"],[1,"mt-3","flex","items-center"],[1,"mr-2"],[1,"font-medium"],[1,"whitespace-nowrap","mr-2"],["class","mt-3 flex items-center",4,"ngIf"],[1,"mt-3"],["azt-track-service","student-skill-statistic-cK-mF-GKd","class","text-white btn btn-gradient-primary","style","font-weight: 430",3,"click",4,"ngIf"],["azt-track-service","student-skill-statistic-cK-mF-GKd",1,"text-white","btn","btn-gradient-primary",2,"font-weight","430",3,"click"],["name","notebook-pen","size","16",3,"ngClass"]],template:function(i,o){if(1&i&&(e.j41(0,"div",1),e.DNE(1,Yv,1,1,"azt-loading-effect",2)(2,g0,41,33,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,Nn.U,Gt.R,x.MD,x.YU,x.Sq,x.bT,x.B3,x.QX,g.X1,L.iI,g.YN,z.wp,Y.s,St.Zl,St.tL,St.ji,St.cC,St.YV,St.iL,St.KS,St.$R,St.YZ,St.NB,F.flO,F.WGl,W.L,z.Ss,U.Id,q.k],encapsulation:2}),n})();var Pu=O(91346),Fh=O(70974);const T0=s=>({"block w-28":s}),b0=s=>({"width.%":s});function x0(s,n){1&s&&(e.j41(0,"div",9)(1,"b"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")))}function v0(s,n){1&s&&(e.j41(0,"div",10)(1,"h4",11),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")," "))}function y0(s,n){1&s&&(e.j41(0,"div",12)(1,"span",13),e.nrm(2,"azt-loading-ui"),e.k0s()())}function S0(s,n){if(1&s&&(e.j41(0,"div",16)(1,"div",17)(2,"div",18),e.nrm(3,"div",19),e.k0s()()()),2&s){const t=e.XpG(4);e.R7$(3),e.Y8G("chart",t.chartSkill)}}function w0(s,n){1&s&&(e.j41(0,"div",20),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"long_core_khong_tim_thay_Muc_do_thuan_thuc_ky_nang")," "))}function I0(s,n){if(1&s&&e.DNE(0,S0,4,1,"div",14)(1,w0,3,3,"div",15),2&s){const t=e.XpG(3);e.Y8G("ngIf",t.chartSkill),e.R7$(),e.Y8G("ngIf",!t.chartSkill)}}function C0(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",21)(1,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.dialogRef.close())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_dong")," "))}function k0(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,x0,4,3,"div",5)(2,v0,4,3,"div",6)(3,y0,3,0,"div",7),e.j41(4,"azt-mat-dialog-content"),e.DNE(5,I0,2,2,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(7,C0,4,3,"div",8),e.k0s()),2&s){const t=e.sdS(6),i=e.XpG(2);e.R7$(),e.Y8G("ngIf",1==i.type),e.R7$(),e.Y8G("ngIf",!i.type),e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",t),e.R7$(4),e.Y8G("ngIf",1==i.type)}}function E0(s,n){1&s&&(e.j41(0,"th",33),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_don_vi_kien_thuc")))}function A0(s,n){if(1&s&&(e.j41(0,"td",34)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=n.$implicit;e.R7$(2),e.JRh(t.title)}}function O0(s,n){1&s&&(e.j41(0,"th",33),e.nrm(1,"span",35),e.k0s())}function R0(s,n){if(1&s){const t=e.RV6();e.j41(0,"span",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.goToPractice(o.examHashId))}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&s){const t=e.XpG(4);e.Y8G("ngClass",e.eq3(4,T0,!t.isMobileDevice)),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_testbank_practice")," ")}}function F0(s,n){if(1&s&&(e.j41(0,"td",34),e.DNE(1,R0,3,6,"span",36),e.k0s()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",t.examHashId)}}function j0(s,n){1&s&&(e.j41(0,"th",38)(1,"span",35),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_ty_le")))}function z0(s,n){if(1&s&&(e.j41(0,"td",34)(1,"div",39)(2,"div",40),e.nI1(3,"number"),e.j41(4,"span",41),e.EFF(5),e.nI1(6,"number"),e.k0s()()()()),2&s){const t=n.$implicit;e.R7$(2),e.Y8G("ngStyle",e.eq3(8,b0,e.i5U(3,2,100*t.point,"1.0-1"))),e.R7$(3),e.JRh(t.point?e.i5U(6,5,100*t.point,"1.0-1")+"%":"")}}function D0(s,n){1&s&&e.nrm(0,"tr",42)}function M0(s,n){1&s&&e.nrm(0,"tr",43)}function G0(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",23)(1,"div",9)(2,"b"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"azt-mat-dialog-content")(6,"table",24),e.qex(7,25),e.DNE(8,E0,3,3,"th",26)(9,A0,3,1,"td",27),e.bVm(),e.qex(10,28),e.DNE(11,O0,2,0,"th",26)(12,F0,2,1,"td",27),e.bVm(),e.qex(13,29),e.DNE(14,j0,4,3,"th",30)(15,z0,7,10,"td",27),e.bVm(),e.DNE(16,D0,1,0,"tr",31)(17,M0,1,0,"tr",32),e.k0s()(),e.j41(18,"div",21)(19,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.closeDetailSkill())}),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,6,"lang_testbank_frontend_student_skill_statistic_title")),e.R7$(3),e.Y8G("dataSource",t.skillItem),e.R7$(10),e.Y8G("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(3),e.SpI(" ",e.bMT(21,8,"lang_auto_dong")," ")}}function P0(s,n){if(1&s&&(e.j41(0,"div",2),e.DNE(1,k0,8,5,"div",3)(2,G0,22,10,"div",4),e.k0s()),2&s){const t=e.XpG();e.Y8G("ngClass",1==t.type?"box p-3":""),e.R7$(),e.Y8G("ngIf",!t.skillItem.length),e.R7$(),e.Y8G("ngIf",t.skillItem.length)}}let jh=(()=>{var s;class n extends kt._{getSkillProfile(){this.createChartSkill([])}convertTitle(i,o){return this.commonService.myTranslateInstant(i)+" ("+(o.reduce((r,l)=>(r??0)+(l??0),0)?.toString()??"")+")"}createChartSkill(i){if(!i||!i.length)return;let o=i.map(S=>S.title??""),a=i.map(S=>0==S.countExcellent?null:S.countExcellent),r=i.map(S=>0==S.countGood?null:S.countGood),l=i.map(S=>0==S.countNotGood?null:S.countNotGood),c=i.map(S=>0==S.countTerrible?null:S.countTerrible),_=i.map(S=>0==S.countNonePractice?null:S.countNonePractice),d=this.convertTitle("lang_azt_xuat_sac",a),p=this.convertTitle("lang_azt_kha",r),f=this.convertTitle("lang_azt_trung_binh",l),v=this.convertTitle("lang_azt_yeu",c),w=this.convertTitle("lang_auto_chua_thi",_),y=new Pu.t1({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:"",align:"center"},xAxis:{categories:o},yAxis:{min:0,title:{text:this.commonService.myTranslateInstant("lang_azt_so_kien_thuc")},stackLabels:{enabled:!0}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:d,type:"column",data:a,color:"green",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return i[this.index].excellentSkills.map((A,j)=>j+1+": "+A.title).join("<br/>")}},events:{click:S=>{this.openDetailSkill(i[S.point.index].excellentSkills)}}},{name:p,type:"column",data:r,color:"yellow",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return i[this.index].goodSkills.map((A,j)=>j+1+": "+A.title).join("<br/>")}},events:{click:S=>{this.openDetailSkill(i[S.point.index].goodSkills)}}},{name:f,type:"column",data:l,color:"orange",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return i[this.index].notGoodSkills.map((A,j)=>j+1+": "+A.title).join("<br/>")}},events:{click:S=>{this.openDetailSkill(i[S.point.index].notGoodSkills)}}},{name:v,type:"column",data:c,color:"red",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return i[this.index].terribleSkills.map((A,j)=>j+1+": "+A.title).join("<br/>")}},events:{click:S=>{this.openDetailSkill(i[S.point.index].terribleSkills)}}},{name:w,type:"column",data:_,color:"grey",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return i[this.index].nonePracticeSkills.map((A,j)=>j+1+": "+A.title).join("<br/>")}},events:{click:S=>{this.openDetailSkill(i[S.point.index].nonePracticeSkills)}}}]});this.chartSkill=y,this.stopStatusObj()}goToPractice(i){if(!i)return;let o=this.commonService.getMyQueryParam("backto"),a=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/de-thi/"+i,"?backto="+encodeURIComponent(a+"?backto="+o)),this.dialogRef.close()}openDetailSkill(i){1==this.type&&(this.skillItem=i)}closeDetailSkill(){this.skillItem=[]}ngOnInit(){super.ngOnInit(),this.validLevelAndSubject=10==this.levelId||11==this.levelId||32==this.subjectId&&12==this.levelId,this.validLevelAndSubject&&(this.initStatusObj(),this.getSkillProfile())}constructor(i,o,a){super(a,o),this.studentPracticeService=i,this.dialogRef=o,this.validLevelAndSubject=!1,this.skillItem=[],this.displayedColumns=["name","actionCol","percent"],a&&(this.subjectId=a.subjectId,this.levelId=a.levelId,this.userId=a.userId,this.type=1)}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Fh.Kw),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["coazt-student-skill-chapter"]],inputs:{type:"type",userId:"userId",levelId:"levelId",subjectId:"subjectId"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["doneLoading",""],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["class","skill-statistical",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","w-auto text-left bg-gray-200","style","padding: 10px 24px; margin-left: -24px; margin-right: -24px",4,"ngIf"],["class","flex justify-center items-center m-5",4,"ngIf","ngIfElse"],["class","flex items-center justify-end pt-2 w-full bg-white",4,"ngIf"],[1,"mb-3"],[1,"w-auto","text-left","bg-gray-200",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],[1,"font-medium"],[1,"flex","justify-center","items-center","m-5"],[1,"w-6","h-6","m-5"],["class","report-box intro-x mt-3",4,"ngIf"],["class","flex p-4 justify-center items-center",4,"ngIf"],[1,"report-box","intro-x","mt-3"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"flex","p-4","justify-center","items-center"],[1,"flex","items-center","justify-end","pt-2","w-full","bg-white"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"skill-statistical"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actionCol"],["matColumnDef","percent"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"center-span"],["class","text-white btn btn-pending","style","font-weight: 430",3,"ngClass","click",4,"ngIf"],[1,"text-white","btn","btn-pending",2,"font-weight","430",3,"click","ngClass"],["mat-header-cell","",1,"text-center"],[1,"progress"],[1,"progress-done",3,"ngStyle"],[1,"text-md","font-medium","span-baseline-middle"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&e.DNE(0,P0,3,3,"div",1),2&i&&e.Y8G("ngIf",o.validLevelAndSubject)},dependencies:[Pu.Fr,Pu.S6,Gt.R,Nn.U,x.MD,x.YU,x.bT,x.B3,x.QX,g.X1,L.iI,g.YN,z.wp,Y.s,St.Zl,St.tL,St.ji,St.cC,St.YV,St.iL,St.KS,St.$R,St.YZ,St.NB,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var xr=O(5951);function N0(s,n){if(1&s&&(e.j41(0,"div")(1,"div",10)(2,"div",11),e.EFF(3),e.k0s(),e.nrm(4,"input",12),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.title," "),e.R7$(),e.FS9("value",t.contents[0]),e.Y8G("disabled",!0)}}function V0(s,n){if(1&s&&(e.j41(0,"div",17)(1,"span",18),e.EFF(2),e.k0s()()),2&s){const t=n.$implicit;e.R7$(),e.FS9("matTooltip",t),e.R7$(),e.JRh(t)}}function L0(s,n){if(1&s&&(e.j41(0,"div")(1,"div",13)(2,"span",14),e.EFF(3),e.k0s()(),e.j41(4,"div",15),e.DNE(5,V0,3,2,"div",16),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(2),e.Y8G("ngForOf",t.contents)}}function B0(s,n){if(1&s&&(e.j41(0,"mat-radio-button",21)(1,"span",18),e.EFF(2),e.k0s()()),2&s){const t=n.$implicit;e.Y8G("checked",!0)("disabled",!0),e.R7$(),e.FS9("matTooltip",t),e.R7$(),e.JRh(t)}}function $0(s,n){if(1&s&&(e.j41(0,"div")(1,"div",13)(2,"span",19),e.EFF(3),e.k0s()(),e.j41(4,"mat-radio-group",15),e.DNE(5,B0,3,4,"mat-radio-button",20),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(2),e.Y8G("ngForOf",t.contents)}}function Q0(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",10)(2,"span",19),e.EFF(3),e.k0s()(),e.j41(4,"div",22)(5,"mat-form-field",23)(6,"mat-select",24),e.mxI("valueChange",function(o){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.contents[0],o)||(a.contents[0]=o),e.Njj(o)}),e.j41(7,"mat-option",25),e.EFF(8),e.k0s()()()()()}if(2&s){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(3),e.R50("value",t.contents[0]),e.Y8G("disabled",!0),e.R7$(),e.FS9("value",t.contents[0]),e.R7$(),e.JRh(t.contents[0])}}function q0(s,n){if(1&s&&(e.qex(0,8),e.DNE(1,N0,5,3,"div",9)(2,L0,6,2,"div",9)(3,$0,6,2,"div",9)(4,Q0,9,5,"div",9),e.bVm()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",0==t.type),e.R7$(),e.Y8G("ngIf",1==t.type),e.R7$(),e.Y8G("ngIf",2==t.type),e.R7$(),e.Y8G("ngIf",3==t.type)}}let Y0=(()=>{var s;class n extends kt._{constructor(i,o){super(o,i),this.dialogRef=i,this.data=o}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Fe.CP,8),e.rXU(Fe.Vh))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-result-info-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:7,consts:[[1,"box","result-info-dialog"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],["id","test-info-form-show",1,"p-5"],[1,"text-center","mx-auto"],[1,"text-md","font-medium"],["class","info-field",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","result-info-dialog-NTVpa2BtGs",1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"info-field"],[4,"ngIf"],[1,"input-group","mt-3"],[1,"input-group-text","whitespace-nowrap","font-medium",2,"min-width","100px","text-align","left"],["type","text",1,"form-control",3,"disabled","value"],[1,"input-group","w-full","mt-3"],[1,"input-group-text","w-full","align-center","font-medium",2,"vertical-align","middle","border-bottom-left-radius","0","border-bottom-right-radius","0","white-space","normal"],[1,"grid","grid-cols-12","gap-3","p-2","ml-0","mr-0","border-row"],["class","col-span-12 sm:col-span-12 md:col-span-4 text-left mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-12","md:col-span-4","text-left","mb-1"],[1,"truncate",2,"vertical-align","middle","color","#1e293c",3,"matTooltip"],[1,"input-group-text","w-full","font-medium",2,"vertical-align","middle","border-bottom-left-radius","0","border-bottom-right-radius","0","white-space","normal"],["color","primary","class","col-span-12 sm:col-span-12 md:col-span-4 text-left mb-1",3,"checked","disabled",4,"ngFor","ngForOf"],["color","primary",1,"col-span-12","sm:col-span-12","md:col-span-4","text-left","mb-1",3,"checked","disabled"],[1,"border-row"],["appearance","fill",1,"border-0"],[3,"valueChange","value","disabled"],[2,"color","#1e293c",3,"value"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.DNE(7,q0,5,4,"ng-container",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(5),e.SpI(" ",e.bMT(6,3,"lang_testbank_test_config_verify_profile_student")," "),e.R7$(2),e.Y8G("ngForOf",o.data),e.R7$(3),e.SpI(" ",e.bMT(11,5,"lang_auto_dong")," "))},dependencies:[x.MD,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,br.wT,Du.rl,xr.VT,xr._g,Mu.VO,vt.oV,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var zh=O(83801);let U0=(()=>{var s;class n extends Z.H{copyLinkToClipboard(){return`${this.commonService.getCurrentDomainWithLanguage()}/admin/testbank/test-review/${this.examIdParam}/${this.userIdParam}/${this.studentIdParam}/${this.examResultIdParam??0}`+(this.isCapacity?"?isCapacity=1":"")}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngOnInit(){super.ngOnInit()}constructor(i){super(),this.commonService=i}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($e.R))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-testbank-test-review-show-copy-link-button"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",isCapacity:"isCapacity"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[[1,"flex","items-center","mt-2"],["azt-track-service","show-copy-link-button-DYZc-0oRwh",1,"btn-text-primary","font-medium",3,"click","cdkCopyToClipboard"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return o.showCopySuccess()}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(),e.Y8G("cdkCopyToClipboard",o.copyLinkToClipboard()),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_copy_link_gui_giao_vien")," "))},dependencies:[x.MD,g.X1,L.iI,g.YN,z.wp,Y.s,zh.dF,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();function X0(s,n){if(1&s&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&s){const t=n.$implicit,i=n.index,o=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_combine_exam_component")+(i+1),":\xa0 "),e.R7$(3),e.JRh(t+(o.totalMarkSubject?"/"+e.i5U(5,4,o.totalMarkSubject/o.totalSubject,"1.0-2"):""))}}function W0(s,n){if(1&s&&(e.qex(0),e.DNE(1,X0,6,7,"div",12),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",null==t.examResultObj?null:t.examResultObj.subjectMarkValues)}}function H0(s,n){if(1&s&&(e.j41(0,"span",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.E5c("(",t.examResultObj.rightAnswer,"/",t.examResultObj.totalQuestion-t.essayQuestionObjs.length,"\xa0",e.bMT(2,3,"lang_auto_cau_brackets"),"")}}function J0(s,n){if(1&s&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.DNE(4,H0,3,5,"span",13),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_auto_trac_nghiem"),": ",null!=t.examResultObj.trueFalseMark?t.examResultObj.trueFalseMark:e.bMT(3,5,"lang_auto_chua_co_diem")," "),e.R7$(3),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.rightAnswer))}}function K0(s,n){if(1&s&&(e.j41(0,"span",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.E5c("(",t.examResultObj.rightAnswer,"/",t.examResultObj.totalQuestion-t.essayQuestionObjs.length,"\xa0",e.bMT(2,3,"lang_auto_cau_brackets"),"")}}function Z0(s,n){if(1&s&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.DNE(3,K0,3,5,"span",13),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_auto_trac_nghiem"),": ",t.examResultObj.mark," "),e.R7$(2),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.rightAnswer))}}function ey(s,n){if(1&s&&e.DNE(0,J0,5,7,"div",10)(1,Z0,4,5,"div",10),2&s){const t=e.XpG();e.Y8G("ngIf",2!=(null==t.examObj?null:t.examObj.whenShowResult)&&t.trueFalseChoiceQuestionObjs.length>0&&t.examResultObj&&t.examResultObj.totalQuestion&&!t.viewPractice),e.R7$(),e.Y8G("ngIf",t.examResultObj&&t.examResultObj.totalQuestion&&t.viewPractice)}}function ty(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.LHq("",e.bMT(2,4,"lang_auto_tu_luan"),": ",null==t.examResultObj?null:t.examResultObj.essayMark," (",t.essayQuestionObjs.length," ",e.bMT(3,6,"lang_auto_cau_brackets"),"")}}function ny(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",16),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_tu_luan"),": "),e.R7$(3),e.JRh(e.bMT(5,6,"lang_auto_chua_cham")),e.R7$(2),e.Lme(" (",t.essayQuestionObjs.length," ",e.bMT(7,8,"lang_auto_cau_brackets")," ")}}function iy(s,n){if(1&s&&(e.j41(0,"div",8),e.DNE(1,ty,4,8,"span",15)(2,ny,8,10,"span",15),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.examResultObj?null:t.examResultObj.confirmedAt),e.R7$(),e.Y8G("ngIf",!(null!=t.examResultObj&&t.examResultObj.confirmedAt))}}function sy(s,n){if(1&s&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_so_file_da_nop"),": ",t.files.length,"")}}function oy(s,n){if(1&s&&(e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",t.examTracks.exitFullScreen,"")}}function ay(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.clickResultTrack())}),e.nrm(4,"lucide-icon",18),e.k0s()()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function ry(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"button",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showResultInfors())}),e.nrm(4,"lucide-icon",20),e.k0s()()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_show_infos_test_submit"),": "))}function ly(s,n){if(1&s&&(e.nrm(0,"app-testbank-test-review-show-copy-link-button",21),e.nI1(1,"isCapacityExam")),2&s){const t=e.XpG();e.Y8G("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("isCapacity",e.bMT(1,5,t.examObj))}}let cy=(()=>{var s;class n extends Z.H{get checkHasType1Question(){let i=!1;for(let o=0;o<(this.questionObjs?.length??0);o++)if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs?.[o])){i=!0;break}return i}calculateTime(i,o){return i?this.timeService.calculationTimeExamTested(i,o):""}showResultInfors(){this.sAztDialogService.open(Y0,{width:"500px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){this.sAztDialogService.open(Bv,{width:"750px",data:{questionObjs:this.questionObjs??[],isShowOriginAnswer:this.isShowOriginAnswer,examResultIdParam:this.examResultIdParam,hashId:this.examObj?.hashId},restoreFocus:!1})}showStudentSkillStatisticDialog(){if(this.examObj?.schoolSubjectId&&(10==this.examObj?.schoolLevelId||11==this.examObj?.schoolLevelId||32==this.examObj?.schoolSubjectId&&12==this.examObj?.schoolLevelId)){let i={subjectId:this.examObj?.schoolSubjectId,levelId:this.examObj?.schoolLevelId,userId:Number(this.userIdParam??"0")};this.sAztDialogService.open(jh,{width:"100vw",data:i,restoreFocus:!1})}else this.sAztDialogService.open(Rh,{width:"100vw",data:{examSchoolSubjectId:this.examObj?.schoolSubjectId??0},restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.totalSubject=this.examResultObj?.subjectMarkValues?.length??3,this.totalMarkSubject=this.examResultObj?.examResultStatisticObj?.examQuestionStatisticObj?.totalMark??0}constructor(i,o,a){super(),this.answerTypeService=i,this.sAztDialogService=o,this.timeService=a,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.isShowOriginAnswer=!0,this.historyExamResultObjs=[],this.resultInfos=[],this.viewPractice=!1,this.totalSubject=3,this.totalMarkSubject=30}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ln._),e.rXU(wn.i),e.rXU(Xt.F))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-testbank-test-review-show-detail-info-for-student"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",offlineHashIdParam:"offlineHashIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",isShowOriginAnswer:"isShowOriginAnswer",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos",viewPractice:"viewPractice"},standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:21,consts:[["showNormalMark",""],[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"text-md","flex","items-center"],[1,"text-md","font-medium","ml-auto"],[1,"flex","items-center","mt-2"],[4,"ngIf","ngIfElse"],["class","flex items-center mt-2",4,"ngIf"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","isCapacity",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],["azt-track-service","show-detail-info-box-for-student-yw3gtIAU5N",1,"btn-text-primary","ml-2",3,"click"],["name","file-clock","size","20"],["azt-track-service","show-detail-info-box-for-student-d5Ae8h9_DU",1,"btn-text-primary","ml-2",3,"click"],["name","circle-ellipsis","size","20"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","isCapacity"]],template:function(i,o){if(1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()()(),e.j41(7,"div",5)(8,"div",3)(9,"p",6),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"p",7),e.EFF(13),e.k0s()(),e.j41(14,"div",8)(15,"p",6),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"p",7),e.EFF(19),e.nI1(20,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(21,W0,2,1,"ng-container",9)(22,ey,2,2,"ng-template",null,0,e.C5r)(24,iy,3,2,"div",10)(25,sy,3,4,"div",10)(26,oy,3,4,"div",10)(27,ay,5,3,"div",10)(28,ry,5,3,"div",10)(29,ly,2,7,"app-testbank-test-review-show-copy-link-button",11),e.k0s()()),2&i){const a=e.sdS(23);e.R7$(5),e.JRh(e.bMT(6,13,"lang_auto_thong_tin_chi_tiet")),e.R7$(5),e.SpI("",e.bMT(11,15,"lang_auto_thoi_gian_lam_bai"),":\xa0"),e.R7$(3),e.SpI(" ",o.calculateTime(null==o.examResultObj?null:o.examResultObj.startedTest,null==o.examResultObj?null:o.examResultObj.createdAt)," "),e.R7$(3),e.SpI("",e.bMT(17,17,"lang_auto_thoi_gian_nop_bai"),":\xa0"),e.R7$(3),e.SpI(" ",e.bMT(20,19,null==o.examResultObj?null:o.examResultObj.createdAt)," "),e.R7$(2),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&(null==o.examObj?null:o.examObj.subjectMarks)&&(null==o.examResultObj||null==o.examResultObj.subjectMarkValues?null:o.examResultObj.subjectMarkValues.length))("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&o.essayQuestionObjs.length),e.R7$(),e.Y8G("ngIf",o.essayQuestionObjs.length),e.R7$(),e.Y8G("ngIf",o.examTracks&&0!=(null==o.examObj?null:o.examObj.autoMonitor)),e.R7$(),e.Y8G("ngIf",2!=(null==o.examObj?null:o.examObj.whenShowResult)&&o.checkHasType1Question&&!o.offlineHashIdParam&&o.trueFalseChoiceQuestionObjs.length>0&&(null==o.examResultObj?null:o.examResultObj.totalQuestion)&&!o.viewPractice),e.R7$(),e.Y8G("ngIf",o.resultInfos.length&&!o.viewPractice),e.R7$(),e.Y8G("ngIf",!o.viewPractice)}},dependencies:[U0,x.MD,x.Sq,x.bT,x.QX,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.bH,z.Xc,U.Id,q.k],encapsulation:2}),n})();var uy=O(3218),Nu=O(69506),Dh=O(14585),_y=O(66579);const dy=()=>({"mr-2 text-danger flex-none":!0});function my(s,n){1&s&&(e.j41(0,"span",11),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_testbank_are_you_sure_to_delete_this_exam_result")))}function py(s,n){1&s&&(e.j41(0,"span",11),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_testbank_are_you_sure_to_delete_multiple_exam_result"),":"))}function hy(s,n){if(1&s&&(e.j41(0,"div",8),e.nrm(1,"lucide-icon",9),e.j41(2,"div"),e.DNE(3,my,3,3,"span",10)(4,py,3,3,"span",10),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(3,dy)),e.R7$(2),e.Y8G("ngIf",1==t.data.examResultIds.length),e.R7$(),e.Y8G("ngIf",t.data.examResultIds.length>1)}}function fy(s,n){if(1&s&&(e.j41(0,"div",21)(1,"span",22),e.EFF(2),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.fullName)}}function gy(s,n){if(1&s&&e.nrm(0,"img",23),2&s){const t=e.XpG().$implicit;e.Y8G("nameImages",t.nameImages)}}function Ty(s,n){if(1&s&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.nrm(3,"azt-create-avatar",17),e.k0s(),e.j41(4,"div",18),e.DNE(5,fy,3,1,"div",19)(6,gy,1,1,"img",20),e.k0s()()()),2&s){let t;const i=n.$implicit,o=e.XpG(2);e.R7$(3),e.Y8G("linkAvatar",null!==(t=i.avatar)&&void 0!==t?t:"")("nameCreateAvatar",i.fullName)("size",32),e.R7$(2),e.Y8G("ngIf",!i.nameImages||o.commonService.convertStringToNumber(i.id)>0),e.R7$(),e.Y8G("ngIf",i.nameImages&&o.commonService.convertStringToNumber(i.studentId)<=0)}}function by(s,n){if(1&s&&(e.j41(0,"div",12),e.DNE(1,Ty,7,5,"div",13),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.data.examResults)}}function xy(s,n){1&s&&(e.j41(0,"div",8)(1,"div",24)(2,"button",25)(3,"div",26),e.nrm(4,"lucide-icon",27),e.k0s()(),e.j41(5,"div",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(6),e.JRh(e.bMT(7,1,"lang_testbank_are_you_sure_to_delete_no_exam_result")))}function vy(s,n){1&s&&(e.j41(0,"span",31),e.nrm(1,"azt-loading-ui"),e.k0s())}function yy(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmDelete())}),e.DNE(1,vy,2,0,"span",30),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("disabled",t.statusObj.loading),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(3,3,"lang_cms_common_confirm_btn")," ")}}let Sy=(()=>{var s;class n extends kt._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.offlineExamResultService.apiOfflineExamResultDeleteExamResultObjsPost({examHashId:this.examHashId,examResultIds:this.examResultIds}).subscribe(i=>{1==i.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(i.message??""))}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(i,o,a){super(a,o),this.offlineExamResultService=i,this.dialogRef=o,this.examHashId="",this.examResultIds=[],this.examHashId=a.examHashId,this.examResultIds=a.examResultIds}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(_y.Fs),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["coazt-delete-offline-exam-result-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:7,consts:[[1,"box",2,"max-width","600px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],["class","text-md flex",4,"ngIf"],["class","grid grid-cols-12 gap-3","style","overflow-y: auto; max-height: calc(100vh - 150px)",4,"ngIf"],[1,"p-3","flex","justify-end"],["azt-track-service","delete-dialog-VaCVDZ-8G",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-GpxoaJJJor","class","btn w-32 btn-danger",3,"disabled","click",4,"ngIf"],[1,"text-md","flex"],["name","trash-2","size","24",3,"ngClass"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"grid","grid-cols-12","gap-3",2,"overflow-y","auto","max-height","calc(100vh - 150px)"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6"],[1,"flex","items-center","p-3","student-exam-result-up","w-full"],[1,"w-8","h-8","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc(100% - 3.5rem)"],["class","azt-student-name flex items-center","style","flex-wrap: wrap",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"mx-auto","text-center"],[1,"btn","btn-sm","btn-primary-soft","p-1"],[1,"w-6","h-6"],["name","circle-x","size","24"],[1,"mt-4"],["azt-track-service","delete-dialog-GpxoaJJJor",1,"btn","w-32","btn-danger",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,hy,5,4,"div",3)(4,by,2,1,"div",4)(5,xy,8,3,"div",3),e.k0s()(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,yy,4,5,"button",7),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngIf",o.data.examResultIds.length),e.R7$(),e.Y8G("ngIf",o.data.examResultIds.length),e.R7$(),e.Y8G("ngIf",!o.data.examResultIds.length),e.R7$(3),e.SpI(" ",e.bMT(9,5,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("ngIf",o.data.examResultIds.length))},dependencies:[Nu.y,Dh.p,Gt.R,x.MD,x.YU,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();var wy=O(62232);class Iy{constructor(){this.x=0,this.y=0}toBase64String(){return(new cn).writeCvPoint2u(this).toBase64String()}}class Ps{constructor(){this.x=0,this.y=0}toBase64String(){return(new cn).writeCvPoint2f(this).toBase64String()}}class Mh{constructor(){this.x=0,this.y=0,this.width=0,this.height=0}toBase64String(){return(new cn).writeCvRect2f(this).toBase64String()}}class Cy{constructor(){this.center=new Ps,this.filled=!1}toBase64String(){return(new cn).writeAnswerCircle(this).toBase64String()}}class vr{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new cn).writeTableAnswer(this).toBase64String()}}class Gh{constructor(){this.top=new Ps,this.left=new Ps,this.bottom=new Ps,this.right=new Ps}toBase64String(){return(new cn).writeResultRect(this).toBase64String()}}class ky{constructor(){this.id=0,this.region=new Mh}toBase64String(){return(new cn).writeCropRegion(this).toBase64String()}}class Ey{constructor(){this.type=0,this.errorCode=0,this.paperCorner=new Gh,this.studentId=new vr,this.examId=new vr,this.answerTable=new vr,this.imageWidth=0,this.imageHeight=0,this.imageSize=0,this.cropRegion=[]}toBase64String(){return(new cn).writeResultOutput(this).toBase64String()}}class Ay{constructor(){this.templateType=0,this.imageWidth=0,this.imageHeight=0}toBase64String(){return(new cn).writeAnswerSheetInput(this).toBase64String()}}class Oy{constructor(){this.position=0,this.x=0,this.y=0,this.filledCols=0,this.rows=0}toBase64String(){return(new cn).writeSmallAnswerCircle(this).toBase64String()}}class yr{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new cn).writeSmallTableAnswer(this).toBase64String()}}class Ry{constructor(){this.studentId=new yr,this.examId=new yr,this.answerTable=new yr}toBase64String(){return(new cn).writeDrawData(this).toBase64String()}}class Fy{constructor(n){this.bytes=n,this.cursor=0,this.length=n.byteLength}updateCursor(n){if(this.cursor=this.cursor+n,this.cursor>this.length)throw new Error("Overflow InputStreaming")}parseUchar(){let n=this.bytes[this.cursor];return this.updateCursor(1),n}parseInt(){let n=this.bytes.buffer.slice(this.cursor,this.cursor+4);return this.updateCursor(4),new DataView(n).getInt32(0)}parseDouble(){let n=this.bytes.buffer.slice(this.cursor,this.cursor+8);return this.updateCursor(8),new DataView(n).getFloat64(0,!0)}parseString(){let n=new TextDecoder("utf-8"),t=this.cursor,i=this.bytes[this.cursor];for(;0!=i;)this.updateCursor(1),i=this.bytes[this.cursor];let o=this.bytes.slice(t,this.cursor),a=n.decode(o);return this.updateCursor(1),a}parseBool(){let n=this.bytes[this.cursor];return this.updateCursor(1),n>0}parseCvPoint2u(){let n=new Iy;return n.x=this.parseUchar(),n.y=this.parseUchar(),n}parseCvPoint2f(){let n=new Ps;return n.x=this.parseDouble(),n.y=this.parseDouble(),n}parseCvRect2f(){let n=new Mh;return n.x=this.parseDouble(),n.y=this.parseDouble(),n.width=this.parseDouble(),n.height=this.parseDouble(),n}parseAnswerCircle(){let n=new Cy;return n.center=this.parseCvPoint2f(),n.filled=this.parseBool(),n}parseTableAnswer(){let n=new vr,t=0;n.rows=this.parseInt(),n.cols=this.parseInt(),n.radius=this.parseInt(),t=this.parseInt();for(let i=0;i<t;i++)n.answers.push(this.parseAnswerCircle());return n}parseResultRect(){let n=new Gh;return n.top=this.parseCvPoint2f(),n.left=this.parseCvPoint2f(),n.bottom=this.parseCvPoint2f(),n.right=this.parseCvPoint2f(),n}parseCropRegion(){let n=new ky;return n.id=this.parseInt(),n.region=this.parseCvRect2f(),n}parseResultOutput(){let n=new Ey,t=0;n.type=this.parseInt(),n.errorCode=this.parseInt(),n.paperCorner=this.parseResultRect(),n.studentId=this.parseTableAnswer(),n.examId=this.parseTableAnswer(),n.answerTable=this.parseTableAnswer(),n.imageWidth=this.parseInt(),n.imageHeight=this.parseInt(),n.imageSize=this.parseInt(),t=this.parseInt();for(let i=0;i<t;i++)n.cropRegion.push(this.parseCropRegion());return n}parseAnswerSheetInput(){let n=new Ay;return n.templateType=this.parseInt(),n.imageWidth=this.parseInt(),n.imageHeight=this.parseInt(),n}parseSmallAnswerCircle(){let n=new Oy;return n.position=this.parseUchar(),n.x=this.parseUchar(),n.y=this.parseUchar(),n.filledCols=this.parseUchar(),n.rows=this.parseUchar(),n}parseSmallTableAnswer(){let n=new yr,t=0;n.rows=this.parseUchar(),n.cols=this.parseUchar(),n.radius=this.parseUchar(),t=this.parseInt();for(let i=0;i<t;i++)n.answers.push(this.parseSmallAnswerCircle());return n}parseDrawData(){let n=new Ry;return n.studentId=this.parseSmallTableAnswer(),n.examId=this.parseSmallTableAnswer(),n.answerTable=this.parseSmallTableAnswer(),n}}const Vn=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];class cn{constructor(){this.bytes=[]}writeUchar(n){return this.bytes.push(n),this}writeUint8Array(n){for(let t=0;t<n.length;t++)this.bytes.push(n[t]);return this}writeArrayBuffer(n){let t=new Uint8Array(n);return this.writeUint8Array(t),this}writeInt(n){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,n,!1),this.writeArrayBuffer(t),this}writeDouble(n){let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,n,!0),this.writeArrayBuffer(t),this}writeString(n){let i=(new TextEncoder).encode(n);return this.writeUint8Array(i),this.writeUchar(0),this}writeBool(n){return this.writeUchar(n?1:0),this}toBase64String(){return function jy(s){let t,n="",i=s.length;for(t=2;t<i;t+=3)n+=Vn[s[t-2]>>2],n+=Vn[(3&s[t-2])<<4|s[t-1]>>4],n+=Vn[(15&s[t-1])<<2|s[t]>>6],n+=Vn[63&s[t]];return t===i+1&&(n+=Vn[s[t-2]>>2],n+=Vn[(3&s[t-2])<<4],n+="=="),t===i&&(n+=Vn[s[t-2]>>2],n+=Vn[(3&s[t-2])<<4|s[t-1]>>4],n+=Vn[(15&s[t-1])<<2],n+="="),n}(new Uint8Array(this.bytes))}writeCvPoint2u(n){return this.writeUchar(n.x),this.writeUchar(n.y),this}writeCvPoint2f(n){return this.writeDouble(n.x),this.writeDouble(n.y),this}writeCvRect2f(n){return this.writeDouble(n.x),this.writeDouble(n.y),this.writeDouble(n.width),this.writeDouble(n.height),this}writeAnswerCircle(n){return this.writeCvPoint2f(n.center),this.writeBool(n.filled),this}writeTableAnswer(n){this.writeInt(n.rows),this.writeInt(n.cols),this.writeInt(n.radius),this.writeInt(n.answers.length);for(let t of n.answers)this.writeAnswerCircle(t);return this}writeResultRect(n){return this.writeCvPoint2f(n.top),this.writeCvPoint2f(n.left),this.writeCvPoint2f(n.bottom),this.writeCvPoint2f(n.right),this}writeCropRegion(n){return this.writeInt(n.id),this.writeCvRect2f(n.region),this}writeResultOutput(n){this.writeInt(n.type),this.writeInt(n.errorCode),this.writeResultRect(n.paperCorner),this.writeTableAnswer(n.studentId),this.writeTableAnswer(n.examId),this.writeTableAnswer(n.answerTable),this.writeInt(n.imageWidth),this.writeInt(n.imageHeight),this.writeInt(n.imageSize),this.writeInt(n.cropRegion.length);for(let t of n.cropRegion)this.writeCropRegion(t);return this}writeAnswerSheetInput(n){return this.writeInt(n.templateType),this.writeInt(n.imageWidth),this.writeInt(n.imageHeight),this}writeSmallAnswerCircle(n){return this.writeUchar(n.position),this.writeUchar(n.x),this.writeUchar(n.y),this.writeUchar(n.filledCols),this.writeUchar(n.rows),this}writeSmallTableAnswer(n){this.writeUchar(n.rows),this.writeUchar(n.cols),this.writeUchar(n.radius),this.writeInt(n.answers.length);for(let t of n.answers)this.writeSmallAnswerCircle(t);return this}writeDrawData(n){return this.writeSmallTableAnswer(n.studentId),this.writeSmallTableAnswer(n.examId),this.writeSmallTableAnswer(n.answerTable),this}}var ri=O(58850);const Ph=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",""];let Nh=(()=>{var s;class n{constructor(i,o,a,r){this.commonService=i,this.zipDataService=o,this.sAztAnswerTypeService=a,this.sAztCommonCdnService=r,this.totalPointExam=0}drawAzotaFileToCanvas(i,o,a,r){return new Promise((l,c)=>{var _="",d=this.commonService.willDeleteParseJson(this.zipDataService.decodeContentGzip(i.images??""));d&&d.url&&d.url.includes(".azt")?this.httpGetAsync(this.sAztCommonCdnService.getMyCdn(d.url)).then(p=>{p&&p.length>0?wy.decodeScanOfflineFile(p).then(f=>{let v=this._arrayBufferToBase64(f.getWrappedImage()??new Uint8Array),w=f.getWrappedImageExtension(),y=f.scanOfflineData?.scanResult;if(v){let S=new Image;S.src="data:image/"+w+";base64,"+v,S.crossOrigin="anonymous",S.onload=()=>{var A=document.createElement("canvas");A.width=S.width,A.height=S.height;const j=A.getContext("2d");j?.drawImage(S,0,0,A.width,A.height);let V=i.resultsData?.answerObjs??[];if(y?.examCodeRegion?.circles&&y?.examCodeRegion?.circles.length>0&&this.drawCommonCircles(y?.examCodeRegion?.circles,j),y?.studentCodeRegion?.circles&&y?.studentCodeRegion?.circles.length>0&&this.drawCommonCircles(y?.studentCodeRegion?.circles,j),y?.answerRegion?.circles&&y?.answerRegion?.circles.length>0&&this.drawCircles(y?.answerRegion?.circles,j,V,1,a?.filter(N=>this.sAztAnswerTypeService.isOneChoiceAnswer(N))),y?.answerRegion?.trueFalseCircles&&y?.answerRegion?.trueFalseCircles.length>0&&this.drawCircles(y?.answerRegion?.trueFalseCircles,j,V,5,a?.filter(N=>this.sAztAnswerTypeService.isTrueFalseAnswer(N))),y?.answerRegion?.fillBlankCircles&&y?.answerRegion?.fillBlankCircles.length>0&&this.drawCircles(y?.answerRegion?.fillBlankCircles,j,V,4,a?.filter(N=>this.sAztAnswerTypeService.isFillAnswer(N))),y?.answerRegion?.essayCircles&&y?.answerRegion?.essayCircles.length>0&&o&&this.drawCommonCircles(y?.answerRegion?.essayCircles,j),j&&j.fillText((this.commonService.myTranslateInstant("lang_auto_tong")??"T\u1ed5ng")+" = "+this.totalPointExam.toFixed(2)+" - Version:"+y?.templateType,25,50),y?.answerRegion?.handwrittenAnswers&&y?.answerRegion?.handwrittenAnswers.length>0){let N=y?.answerRegion?.handwrittenAnswers,X="18px";if(j){j.fillStyle="#00ff00",j.font=X+" Comic Sans MS",j.textAlign="center";for(let I=0;I<N.length;I++){let b=N[I];this.fillTextAnswerDrawForFileAzt(b.recognizedText??"",j,V[I],((b.bottomRight.x??0)+(b.topLeft.x??0))/2-3,((b.bottomRight.y??0)+(b.topLeft.y??0))/2+5)}}}_=A.toDataURL("image/jpeg",.9),l({imgUrl:_})}}else l({imgUrl:_})}):l({imgUrl:_})}).catch(p=>{c(p)}):l({imgUrl:_})})}drawScanFileToCanvas(i){return new Promise(o=>{var a="",r=this.commonService.willDeleteParseJson(this.zipDataService.decodeContentGzip(i.images??""));let l=r?this.sAztCommonCdnService.getMyCdn(r.url):"";if(r&&l){let c=new Image;c.src=l,c.crossOrigin="anonymous",c.onload=()=>{var _=document.createElement("canvas");_.width=c.width,_.height=c.height;const d=_.getContext("2d");d?.drawImage(c,0,0,_.width,_.height);var p=i.resultsData?.answerObjs??[],f=this.commonService.willDeleteParseJson(i.resultsData?.pos??"");if("2.0"==f.version)try{let wt=Uint8Array.from(atob(f.resultFilledPos),Ce=>Ce.charCodeAt(0)),nt=new Fy(wt).parseDrawData(),Je=nt.studentId?.answers??[];for(var v=0;v<Je.length;v++)this.tickStudentIdAndExamId(Je[v],d,nt.answerTable?.radius??0);let Xe=nt.examId?.answers??[];for(v=0;v<Xe.length;v++)this.tickStudentIdAndExamId(Xe[v],d,nt.answerTable?.radius??0);let Ne=nt.answerTable?.answers??[];for(v=0;v<Ne.length;v++)this.answerPaintedRightOrWrong(Ne[v],d,nt.answerTable?.radius??0,p);a=_.toDataURL("image/jpeg",.9),o(a)}catch{this.commonService.snackError("lang_auto_du_lieu_sai_khong_su_ly_duoc_anh_bai_thi_offline"),o("")}else if("3.0"==f.version)try{let wt=f.answersHandwritten??[],nt=(wt[0].answerRegion.height??0)-20+"px";if(d){d.fillStyle="#00ff00",d.font=nt+" Comic Sans MS",d.textAlign="center";for(let Xe=0;Xe<wt.length;Xe++){let Ne=wt[Xe],Ve=this.getTextAnswerDraw(Ph[-1==Ne.answer?26:Ne.answer],d,p[Xe]);d.fillText(Ve,(Ne.answerRegion.x??0)+(Ne.answerRegion.width??0)/2,(Ne.answerRegion.y??0)+(Ne.answerRegion.height??0)/2+5)}}a=_.toDataURL("image/jpeg",.9),o(a)}catch{this.commonService.snackError("lang_auto_du_lieu_sai_khong_su_ly_duoc_anh_bai_thi_offline"),o("")}else{var w=f.configurationPos.split("_"),y=f.resultFilledPos.split("_"),S=f.tableAnchorPos.split("_"),A=this.checkWrongOrTrueAnswer(p),j=0;for(v=0;v<w.length;v++)if(1==v||2==v){var V=w[v].split("*");j+=parseInt(V[1],10)}var N=0;for(v=0;v<S.length;v++)if(v>=2){var X={},te={},I=S[v].split("*"),b=I[0].split(":"),C=I[1].split(":"),E={},R=w[v].split("*");E.row=parseInt(R[0],10),E.col=parseInt(R[1],10),E.radius=parseInt(R[2],10),X.x=parseInt(b[0],10),X.y=parseInt(b[1],10),te.x=parseInt(C[0],10),te.y=parseInt(C[1],10);for(var P=(te.y-X.y)/(E.row+1),k=X.y,ve=0;ve<E.row;ve++)if((k+=P)>X.y&&k<te.y){var Ue=N<p.length?this.checkAnswerStudentRight(N,p):0;N++,0!=Ue&&d&&(d.beginPath(),d.arc(X.x+P*Ue,k,E.radius,0,2*Math.PI,!1),d.lineWidth=3,d.strokeStyle="#f3c12c",d.stroke())}}var Rt=0;for(ve=0;ve<y.length;ve++)if("empty"!=y[ve]){var $t=y[ve].split(":"),mt={x:parseInt($t[0],10),y:parseInt($t[1],10),line:parseInt($t[2],10)};ve<j+A.length&&(ve>=j?(d&&(d.beginPath(),d.arc(mt.x,mt.y,mt.line,0,2*Math.PI,!1),d.lineWidth=3,d.strokeStyle=A[Rt],d.stroke()),Rt++):d&&(d.beginPath(),d.arc(mt.x,mt.y,mt.line,0,2*Math.PI,!1),d.lineWidth=3,d.strokeStyle="#00ff00",d.stroke()))}a=_.toDataURL("image/jpeg",.9),o(a)}}}else o("")})}_arrayBufferToBase64(i){for(var o="",a=new Uint8Array(i),r=a.byteLength,l=0;l<r;l++)o+=String.fromCharCode(a[l]);return window.btoa(o)}httpGetAsync(i){return new Promise((o,a)=>{try{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="arraybuffer",r.onload=l=>{if(200===r.status||304===r.status){const c=r.response;if(c){const _=new Uint8Array(c);o(_)}else o(new Uint8Array)}else o(new Uint8Array)},r.onerror=l=>{a(new Error("lang_core_cant_loading_url"))},r.send(null)}catch(r){a(r)}})}fillTextAnswerDrawForFileAzt(i,o,a,r,l){let c="";a&&(i?a.rightAnswer&&"ESSAY"!=a.content&&a.rightAnswer!=i?(o.fillStyle="#f3c12c",o.fillText("["+a.rightAnswer+"]",r+15,l),o.fillStyle="red",c=i+"-",r-=10):a.rightAnswer&&"ESSAY"!=a.content?(o.fillStyle="#00ff00",c+=i):(o.fillStyle="red",c+=i):(o.fillStyle="#f3c12c",c+=a.rightAnswer)),o.fillText(c,r,l)}drawCommonCircles(i,o){i.length>0&&i.forEach(a=>{if(a.filled){let r=a.center.x,l=a.center.y;o&&(o.beginPath(),o.arc(r,l,a.radius+1,0,2*Math.PI,!1),o.lineWidth=2,o.strokeStyle="#00ff00",o.stroke())}})}drawCircles(i,o,a,r,l){let c=[],_=[],d=["A","B","C","D"],p=0;if(a.length>0){let y=a.filter(j=>1==j.answerType||2==j.answerType).length??0,S=a.filter(j=>5==j.answerType).length??0,A=a.filter(j=>4==j.answerType).length??0;p=1==r?y:4==r?A:S;for(let j=0;j<a.length;j++){let V="";if(this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:a[j].answerType})){let N=a[j].rightAnswer?.split("|")??[];for(let X=0;X<d.length;X++)V=j+1-y+""+d[X]+"F",N.includes(d[X])&&(V=j+1-y+""+d[X]+"T"),this.commonService.isExistInArray(c,V)||c.push(V)}else this.sAztAnswerTypeService.isFillAnswer({answerType:a[j].answerType})?(V=j+1-y-S+"_"+a[j].rightAnswer,this.commonService.isExistInArray(c,V)||c.push(V)):this.sAztAnswerTypeService.isOneChoiceAnswer({answerType:a[j].answerType})&&(V=j+1+""+a[j].rightAnswer,this.commonService.isExistInArray(c,V)||c.push(V));this.sAztAnswerTypeService.isEssayAnswer({answerType:a[j].answerType})&&_.push(j+1)}}let w=1==r?1:5==r?2:4==r?3:1;if(o){o.fillStyle="#ff0024",o.font="25px Comic Sans MS";let y=0,S=0,A=0,j="P-"+(1==w?"TN":2==w?"\u0110/S":"\u0110T")+": ",V=!1;(l??[]).forEach(N=>{let X=a.find(te=>N.id==te.questionId);if((this.sAztAnswerTypeService.isOneChoiceAnswer(N)||this.sAztAnswerTypeService.isFillAnswer(N))&&(y++,X?.isRight&&(S+=N.testedScore??0,A++)),this.sAztAnswerTypeService.isTrueFalseAnswer(N)){S+=N.testedScore??0;let te=0,I="";for(let b=0;b<4;b++)X?.rightAnswers?.includes(Ph[b])?I+="T":I+="F";if(X?.content)for(let b=0;b<4;b++)X.content[b]==I[b]&&te++;V=!0,j+=" "+te+"/4;"}}),this.totalPointExam+=S,j+=V?" = "+S.toFixed(2):A+"/"+y+" = "+S.toFixed(2),this.drawWrappedText(o,j,25,30+25*((2==w?3:3==w?2:w)+1),600,25)}i.forEach(y=>{let S=0;S=this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:r})?Number(y.label.substring(0,y.label.length-2)):this.sAztAnswerTypeService.isFillAnswer({answerType:r})?Number(y.label.substring(0,y.label.indexOf("_"))):Number(y.label.substring(0,y.label.length-1));let A="";if(0==c.length)A="#00ff00";else if(this.sAztAnswerTypeService.isFillAnswer({answerType:r})){let j=y.label.substring(0,y.label.indexOf("_")+1),V=c.find(N=>N.includes(j));if(V){let N=V?.split("_"),X=y.label.split("_");if(y.filled&&(A="red"),N[0]==X[0])if("-"==X[2]&&N[1].includes("-"))0==Number(X[1])&&(A=y.filled?"#00ff00":"#f3c12c");else if(","==X[2]&&N[1].includes(",")){let te=N[1].indexOf(",");Number(X[1])==te&&(A=y.filled?"#00ff00":"#f3c12c")}else"-"!=X[2]&&","!=X[2]&&N[1][Number(X[1])]==X[2]&&(A=y.filled?"#00ff00":"#f3c12c")}}else this.commonService.isExistInArray(c,y.label)?A=y.filled?"#00ff00":"#f3c12c":y.filled&&(A="red");if(A&&S<=p&&!this.commonService.isExistInArray(_,S)){let j=y.center.x,V=y.center.y;o&&(o.beginPath(),o.arc(j,V,y.radius+1,0,2*Math.PI,!1),o.lineWidth=2,o.strokeStyle=A,o.stroke())}})}drawWrappedText(i,o,a,r,l,c){const _=o.split(" ");let d="";_.forEach(p=>{const f=d+p+" ";i.measureText(f).width>l&&""!==d?(i.fillText(d,a,r),d=p+" ",r+=c):d=f}),i.fillText(d,a,r)}checkAnswerStudentRight(i,o){var a=0;return o[i]&&""!=o[i].rightAnswer&&0==o[i].isRight&&(a="A"==o[i].rightAnswer?1:"B"==o[i].rightAnswer?2:"C"==o[i].rightAnswer?3:"D"==o[i].rightAnswer?4:"E"==o[i].rightAnswer?5:"F"==o[i].rightAnswer?6:"G"==o[i].rightAnswer?7:"H"==o[i].rightAnswer?8:0),a}checkWrongOrTrueAnswer(i){for(var o=[],a=0;a<i.length;a++)""!=i[a].content&&(1==i[a].isRight?o.push("#00ff00"):0==i[a].isRight&&o.push("red"));return o}tickStudentIdAndExamId(i,o,a){var r=256*Math.floor((i.position??0)/16)+i.x,l=(i.position??0)%16*256+i.y;(i.filledCols??0)>=128&&o&&(o.beginPath(),o.arc(r,l,a,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle="#00ff00",o.stroke())}answerPaintedRightOrWrong(i,o,a,r){var l=256*Math.floor((i.position??0)/16)+i.x,c=(i.position??0)%16*256+i.y,_=i.rows??0,p="#fff0";r.length>_&&((i.filledCols??0)>=128?p=1==r[_].isRight?"#00ff00":"red":(i.filledCols??0)%128+1==this.checkAnswerStudentRight(_,r)&&(p="#f3c12c"),o&&(o.beginPath(),o.arc(l,c,a,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle=p,o.stroke()))}getTextAnswerDraw(i,o,a){let r="";return a&&(i?a.isRight?(o.fillStyle="#00ff00",r+=i):(o.fillStyle="red",r=i+" - ["+a.rightAnswer+"]"):(o.fillStyle="#f3c12c",r+=a.rightAnswer)),r}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(Vi.j),e.KVO(ln._),e.KVO(ri.c))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();const zy=s=>({flex:s}),Dy=s=>({"mr-2":s}),My=()=>({"flex-none mr-1":!0});function Gy(s,n){1&s&&(e.qex(0),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_test_review_error_get_url_img")))}function Py(s,n){1&s&&(e.j41(0,"div",14)(1,"span",15),e.nrm(2,"azt-loading-ui"),e.k0s()())}function Ny(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"label",19),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"input",20,1),e.nI1(8,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(7),a=e.XpG(2);return e.Njj(a.setStudentCode(o))}),e.k0s()(),e.j41(9,"div",21)(10,"label",22),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"input",23,2),e.nI1(15,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(14),a=e.XpG(2);return e.Njj(a.setExamCode(o))}),e.k0s()()(),e.j41(16,"h3",24),e.nrm(17,"lucide-icon",25),e.j41(18,"span",26),e.EFF(19,"Click \u1ea3nh \u0111\u1ec3 \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed c\u1ea7n s\u1eeda"),e.k0s()(),e.j41(20,"div",27)(21,"div",28,3)(23,"img",29),e.bIt("click",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.clickOnImage(o))}),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(20,zy,!t.isMobileDevice)),e.R7$(),e.Y8G("ngClass",e.eq3(22,Dy,!t.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(5,12,"lang_auto_so_bao_danh")),e.R7$(2),e.FS9("placeholder",e.bMT(8,14,"lang_core_nhap_so_ba_danh")),e.Y8G("formControl",t.studentCode),e.R7$(5),e.JRh(e.bMT(12,16,"lang_auto_ma_de")),e.R7$(2),e.FS9("placeholder",e.bMT(15,18,"lang_core_nhap_ma_de")),e.Y8G("formControl",t.examCode),e.R7$(4),e.Y8G("ngClass",e.lJ4(24,My)),e.R7$(6),e.Aen(t.isMobileWebView?"width: 100% !important;":"height: auto !important;"),e.Y8G("src",t.fileScanUrl,e.B4B)}}function Vy(s,n){if(1&s&&e.DNE(0,Py,3,0,"div",12)(1,Ny,24,25,"div",13),2&s){const t=e.XpG();e.Y8G("ngIf",t.loadingScanUrl),e.R7$(),e.Y8G("ngIf",!t.loadingScanUrl)}}function Ly(s,n){1&s&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}let By=(()=>{var s;class n extends kt._{setStudentCode(i){i.value=i.value.replace(/\D/g,""),i.value.length>this.myEnvironment.maxStudentCodeLength&&(i.value=i.value.slice(0,-1)),this.processData.setStudentCode(i.value),this.processDrawImage()}setExamCode(i){i.value=i.value.replace(/\D/g,""),i.value.length>this.myEnvironment.maxExamCodeLength&&(i.value=i.value.slice(0,-1)),this.processData.setExamCode(i.value),this.processDrawImage()}confirmEdit(){this.initStatusObj(),this.processor.uploadToServer().then(i=>{if(!i.success){let o=i.errorMessage;return"azt_lang_core_code_exam"==o&&(o=this.commonService.myTranslateInstant("lang_core_offline_exam_not_found_offline_mix_question_hash_id")??"M\xe3 \u0111\u1ec1 thi kh\xf4ng t\u1ed3n t\u1ea1i"),this.errorStatusObj(o??"lang_core_invalid_data",!0)}this.successStatusObj("lang_auto_luu_thanh_cong",!0),this.dialogRef.close(!0)})}btnCloseDialog(){this.dialogRef.close(!1)}loadScriptHandleImage(){var i=this;this.commonService.loadAnswerSheetJs().then(()=>{var o=this.userService.getUserObj();window.azotaScanAnswerSheet.examResultProcessor(o.rememberToken,"https://"+et.c.base_embed_link,this.data.resultId,o.id).then(function(){var a=(0,H.A)(function*(r){i.processor=r,i.initData()});return function(r){return a.apply(this,arguments)}}()).catch(()=>{this.errorStatusObj("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai",!0)})}).catch(o=>{this.errorStatusObj("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai",!0)})}clickOnImage(i){const o=i.target,a=o.getBoundingClientRect();this.processData.clickToImage(o.naturalWidth/a.width*(i.clientX-a.left),o.naturalHeight/a.height*(i.clientY-a.top)),this.setFormCode(),this.processDrawImage()}drawCircleImg(i,o){i&&i.length>0&&(this.circleRadius=i[0].radius,i.forEach(a=>{if(a.filled&&o){let r=a.center.x,l=a.center.y;o.beginPath(),o.arc(r,l,a.radius+1,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle="red",o.stroke()}}))}processDrawImage(){let i=this.drawScanExamService._arrayBufferToBase64(this.processData.getWrappedImage()??new Uint8Array),o=this.processData.getWrappedImageExtension(),a=this.processData.getFilledCircles();if(this.imgSize=this.processor.getImageSize(),!i)return this.loadingScanUrl=!1,void(this.fileScanUrl="");let r=new Image;r.src="data:image/"+o+";base64,"+i,r.crossOrigin="anonymous";var l=document.createElement("canvas");l.width=this.imgSize.width,l.height=this.imgSize.height;const c=l.getContext("2d");r.onload=()=>{c?.drawImage(r,0,0,l.width,l.height),this.drawCircleImg(a,c),this.fileScanUrl=l.toDataURL("image/jpeg",.9),this.loadingScanUrl=!1}}setFormCode(){this.studentCode.setValue(this.processData.scanOfflineData.scanResult.getStudentCode()??""),this.examCode.setValue(this.processData.scanOfflineData.scanResult.getSubExamCode()??"")}initData(){this.data.resultId&&(this.loadingScanUrl=!0,this.processData=this.processor.getData(),this.setFormCode(),this.processDrawImage())}ngOnInit(){super.ngOnInit(),this.loadScriptHandleImage()}constructor(i,o,a,r){super(r,a),this.userService=i,this.drawScanExamService=o,this.dialogRef=a,this.loadingScanUrl=!0,this.fileScanUrl="",this.circleRadius=0,this.imgSize={width:0,height:0},this.studentCode=new g.MJ("",{nonNullable:!0}),this.examCode=new g.MJ("",{nonNullable:!0})}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(mn.R),e.rXU(Nh),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-scan-file-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:10,consts:[["showImgScan",""],["elementStudentCode",""],["elementExamCode",""],["imageHolding",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-32","btn-primary","items-center",3,"click","disabled"],["class","inline-block mr-2",4,"ngIf"],[2,"vertical-align","midle"],["class","p-5 flex justify-center items-center",4,"ngIf"],["class","p-5",4,"ngIf"],[1,"p-5","flex","justify-center","items-center"],[1,"w-5","h-5","inline-block","mr-2"],[1,"p-5"],[3,"ngClass"],[1,"w-full",3,"ngClass"],["for","codeStudent",1,"form-label","text-md","font-semibold","m-0"],["type","text","id","codeStudent",1,"form-control",3,"input","formControl","placeholder"],[1,"w-full"],["for","codeExam",1,"form-label","text-md","font-semibold","m-0"],["type","text","id","codeExam",1,"form-control",3,"input","formControl","placeholder"],[1,"mt-2","text-md","font-semibold","flex","text-slate-500","items-center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"text-center","mx-auto","mt-1",2,"height","calc(var(--vh, 1vh) * 100 - 300px)","overflow-y","auto"],["id","image-holding"],["id","img-container","alt","img",3,"click","src"],[1,"inline-block","mr-2"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",4)(1,"div",5),e.DNE(2,Gy,4,3,"ng-container",6)(3,Vy,2,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"button",9),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmEdit())}),e.DNE(10,Ly,2,0,"span",10),e.j41(11,"span",11),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()()}if(2&i){const a=e.sdS(4);e.R7$(2),e.Y8G("ngIf",!o.loadingScanUrl&&!o.fileScanUrl)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(8,6,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("disabled",o.statusObj.loading),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(2),e.JRh(e.bMT(13,8,"lang_auto_luu"))}},dependencies:[Gt.R,x.MD,x.YU,x.bT,g.X1,g.me,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const $y=()=>({"text-slate-800":!0}),Qy=()=>({"text-danger":!0}),Lh=s=>({"text-success":s});function qy(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",18)(1,"a",19),e.nI1(2,"mytranslate"),e.bIt("click",function(){let o;e.eBV(t);const a=e.XpG(2);return e.Njj(a.openEditScanFile(null!==(o=null==a.examObj?null:a.examObj.hashId)&&void 0!==o?o:"",a.examResultIdParam))}),e.nrm(3,"lucide-icon",20),e.k0s()()}2&s&&(e.R7$(),e.Y8G("matTooltip",e.bMT(2,2,"lang_auto_sua")),e.R7$(2),e.Y8G("ngClass",e.lJ4(4,$y)))}function Yy(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",21)(1,"a",22),e.nI1(2,"mytranslate"),e.bIt("click",function(){let o;e.eBV(t);const a=e.XpG(2);return e.Njj(a.deleteOfflineExamResultObj(null!==(o=null==a.examObj?null:a.examObj.hashId)&&void 0!==o?o:"",a.examResultIdParam))}),e.nrm(3,"lucide-icon",23),e.k0s()()}2&s&&(e.R7$(),e.Y8G("matTooltip",e.bMT(2,2,"lang_auto_xoa")),e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Qy)))}function Uy(s,n){1&s&&(e.j41(0,"span",24),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_anh_cham"),":"))}function Xy(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_luu_trong_app_mobile")))}function Wy(s,n){1&s&&(e.qex(0),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_test_review_error_get_url_img")))}function Hy(s,n){1&s&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}function Jy(s,n){if(1&s&&e.nrm(0,"img",31),2&s){const t=e.XpG(4);e.Aen(t.isMobileWebView?"width: 100% !important;":"height: auto !important;"),e.Y8G("src",t.fileScanUrl,e.B4B)}}function Ky(s,n){if(1&s){const t=e.RV6();e.j41(0,"a",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.onShowFile(o.fileScanUrl))}),e.DNE(1,Hy,2,0,"span",28)(2,Jy,1,3,"img",29),e.k0s()}if(2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.loadingScanUrl),e.R7$(),e.Y8G("ngIf",!t.loadingScanUrl)}}function Zy(s,n){if(1&s&&(e.j41(0,"div",25),e.DNE(1,Wy,4,3,"ng-container",26)(2,Ky,3,2,"ng-template",null,2,e.C5r),e.k0s()),2&s){const t=e.sdS(3),i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!i.loadingScanUrl&&!i.fileScanUrl)("ngIfElse",t)}}function eS(s,n){if(1&s&&(e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"h3",7)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.DNE(7,qy,4,5,"div",8)(8,Yy,4,5,"div",9),e.k0s()(),e.j41(9,"div",10)(10,"div",6)(11,"span",11),e.eu8(12,12),e.k0s(),e.j41(13,"span",13),e.nI1(14,"mytranslate"),e.eu8(15,12),e.k0s()(),e.j41(16,"div",14),e.DNE(17,Uy,3,3,"span",15)(18,Xy,3,3,"span",16),e.k0s(),e.DNE(19,Zy,4,2,"div",17),e.k0s()()),2&s){const t=e.XpG(),i=e.sdS(2),o=e.sdS(4);e.R7$(5),e.JRh(e.bMT(6,9,"lang_auto_thi_offline")),e.R7$(2),e.Y8G("ngIf","teacher"==t.currentScreen),e.R7$(),e.Y8G("ngIf",t.isDeletableExamResultObj),e.R7$(4),e.Y8G("ngTemplateOutlet",i),e.R7$(),e.FS9("matTooltip",e.bMT(14,11,"lang_auto_so_bao_danh")),e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.checkHttpLinkImg),e.R7$(),e.Y8G("ngIf",t.checkHttpLinkImg)}}function tS(s,n){if(1&s&&(e.EFF(0),e.nI1(1,"mytranslate"),e.j41(2,"span",32),e.EFF(3),e.nI1(4,"checkFormatOfflineExamHashIdToNumber"),e.k0s()),2&s){let t;const i=e.XpG();e.SpI(" ",e.bMT(1,3,"lang_auto_ma_de_thi"),":\xa0 "),e.R7$(2),e.Y8G("ngClass",e.eq3(8,Lh,!(null!=i.offlineMarkObj&&i.offlineMarkObj.isErrorForOfflineMixQuestionHashId))),e.R7$(),e.JRh(e.i5U(4,5,null!==(t=null==i.offlineMixQuestionObj?null:i.offlineMixQuestionObj.hashId)&&void 0!==t?t:0,null==i.offlineMarkObj?null:i.offlineMarkObj.templateType))}}function nS(s,n){if(1&s&&(e.EFF(0),e.nI1(1,"mytranslate"),e.j41(2,"span",32),e.EFF(3),e.nI1(4,"checkFormatStudentCodeToNumber"),e.k0s()),2&s){let t;const i=e.XpG();e.SpI(" ",e.bMT(1,3,"lang_testbank_offline_student_identification"),":\xa0 "),e.R7$(2),e.Y8G("ngClass",e.eq3(8,Lh,!(null!=i.offlineMarkObj&&i.offlineMarkObj.isErrorForStudentCode))),e.R7$(),e.JRh(e.i5U(4,5,(null!==(t=null==i.offlineMarkObj?null:i.offlineMarkObj.studentCode)&&void 0!==t?t:0)<0?0:null==i.offlineMarkObj?null:i.offlineMarkObj.studentCode,null==i.offlineMarkObj?null:i.offlineMarkObj.templateType))}}let iS=(()=>{var s;class n extends Z.H{checkAzotaFile(i){return!(!i||!i.includes(".azt"))}checkHttpUrl(i){return!(!i||!/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(i))}openEditScanFile(i,o){o&&this.sAztDialogService.open(By,{data:{examHashId:i,resultId:o,userId:Number(this.userIdParam)},width:"750px",restoreFocus:!1}).afterClosed().subscribe(r=>{r&&window.location.reload()})}deleteOfflineExamResultObj(i,o){o&&this.sAztDialogService.open(Sy,{data:{examHashId:i,examResultIds:[o],examResults:[]},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.goBackWhenDeleteExamResult()})}goBackWhenDeleteExamResult(){this.myNavigationBySpecialQueryString(this.backToLink?this.backToLink:"/admin/testbank/exam-results-list/"+(this.examObj?this.examObj.categoryId:0)+"/"+this.examIdParam+"/0")}onShowFile(i){this.sAztDialogService.open(uy.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{name:"",mimes:"image/jpeg",url:i,index:0}},restoreFocus:!1})}checkErrorForStudentAndExamCode(){this.examCodeError=!this.offlineMixQuestionObj&&(this.offlineMarkObj?.rawOfflineMixquestionId??0)>0,this.studentCodeError=(this.offlineMarkObj?.studentId??0)<=0&&(this.offlineMarkObj?.rawStudentCode??0)>0}initData(){if(!this.offlineMarkObj)return;let i=this.zipDataService.decodeContentGzip(this.offlineMarkObj?.images??""),o=this.castJsonToObj(i);this.checkHttpLinkImg=this.checkHttpUrl(o?.url),this.loadingScanUrl=!0,this.checkAzotaFile(o?.url)?this.drawScanExamService.drawAzotaFileToCanvas(this.offlineMarkObj,this.essayExam,this.questionObjs,this.essayMark).then(a=>{a.imgUrl?this.fileScanUrl=a.imgUrl:this.checkHttpLinkImg=!0,this.drawScanExamService.totalPointExam=0,this.loadingScanUrl=!1}).catch(a=>{this.loadingScanUrl=!1}):this.drawScanExamService.drawScanFileToCanvas(this.offlineMarkObj).then(a=>{a?this.fileScanUrl=a:this.checkHttpLinkImg=!0,this.loadingScanUrl=!1}).catch(a=>{this.loadingScanUrl=!1})}ngOnChanges(){this.initData(),this.checkErrorForStudentAndExamCode()}ngOnInit(){super.ngOnInit()}constructor(i,o,a){super(),this.sAztDialogService=i,this.zipDataService=o,this.drawScanExamService=a,this.backToLink="",this.essayExam=!1,this.isDeletableExamResultObj=!1,this.fileScanUrl="",this.loadingScanUrl=!1,this.checkHttpLinkImg=!1,this.studentCodeError=!1,this.examCodeError=!1}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(wn.i),e.rXU(Vi.j),e.rXU(Nh))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-testbank-show-offline-result"]],inputs:{backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",essayExam:"essayExam",currentScreen:"currentScreen",examObj:"examObj",offlineMarkObj:"offlineMarkObj",offlineMixQuestionObj:"offlineMixQuestionObj",isDeletableExamResultObj:"isDeletableExamResultObj",questionObjs:"questionObjs",essayMark:"essayMark"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:5,vars:1,consts:[["viewExamCodeTpl",""],["viewStudentCodeTpl",""],["showImgScan",""],["class","info-exam-offline mt-3 mb-3",4,"ngIf"],[1,"info-exam-offline","mt-3","mb-3"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md","mr-auto"],["class","mx-1 items-center",4,"ngIf"],["class","mx-1 items-center mr-0",4,"ngIf"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"mr-auto"],[3,"ngTemplateOutlet"],[1,"mr-4",3,"matTooltip"],[1,"items-center","mt-2"],["class","mr-2",4,"ngIf"],[4,"ngIf"],["class","text-center mx-auto mt-1",4,"ngIf"],[1,"mx-1","items-center"],[1,"text-slate-800",3,"click","matTooltip"],["name","file-pen-line","size","18",3,"ngClass"],[1,"mx-1","items-center","mr-0"],["azt-track-service","show-offline-result-i96BCircs2",1,"text-danger",3,"click","matTooltip"],["name","trash-2","size","18",3,"ngClass"],[1,"mr-2"],[1,"text-center","mx-auto","mt-1"],[4,"ngIf","ngIfElse"],["azt-track-service","show-offline-result-tsC_51kcf2",3,"click"],["class","w-5 h-5 inline-block mr-2",4,"ngIf"],["alt","img",3,"src","style",4,"ngIf"],[1,"w-5","h-5","inline-block","mr-2"],["alt","img",3,"src"],[3,"ngClass"]],template:function(i,o){1&i&&e.DNE(0,eS,20,13,"div",3)(1,tS,5,10,"ng-template",null,0,e.C5r)(3,nS,5,10,"ng-template",null,1,e.C5r),2&i&&e.Y8G("ngIf",o.offlineMarkObj)},dependencies:[Gt.R,x.MD,x.YU,x.bT,x.T3,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,W.L,z.Ps,z.OK,U.Id,q.k],encapsulation:2}),n})();var Bh=O(47906),$h=O(7998),Qh=O(58144),sS=O(67376),qh=O(34500),Ns=O(89311),oS=O(10662);const aS=s=>({"ml-auto":s}),rS=(s,n)=>({"bg-info text-white":s,"bg-slate-300":n}),lS=()=>({"text-pending":!0});function cS(s,n){if(1&s&&e.eu8(0,5),2&s){e.XpG();const t=e.sdS(5);e.Y8G("ngTemplateOutlet",t)}}function uS(s,n){if(1&s&&e.eu8(0,5),2&s){e.XpG();const t=e.sdS(3);e.Y8G("ngTemplateOutlet",t)}}function _S(s,n){if(1&s&&(e.j41(0,"div",7),e.nrm(1,"azt-loading-effect",8),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function dS(s,n){1&s&&e.nrm(0,"azt-loading-ui",15)}function mS(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",9),e.nrm(1,"iframe",10),e.nI1(2,"safe"),e.j41(3,"div",11)(4,"button",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleCloseDialog())}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.orderBuyExam())}),e.DNE(8,dS,1,0,"azt-loading-ui",14),e.j41(9,"span"),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()}if(2&s){let t;const i=e.XpG(2);e.R7$(),e.Y8G("src",e.bMT(2,5,null!==(t=i.showIframeInContent)&&void 0!==t?t:""),e.f$h),e.R7$(4),e.SpI(" ",e.bMT(6,7,"lang_payment_confirm_payment_buy_later")," "),e.R7$(2),e.Y8G("disabled",i.statusObj.loading),e.R7$(),e.Y8G("ngIf",i.statusObj.loading),e.R7$(2),e.JRh(e.bMT(11,9,"lang_payment_confirm_payment_button"))}}function pS(s,n){if(1&s&&e.DNE(0,_S,2,1,"div",6)(1,mS,12,11,"ng-template",null,2,e.C5r),2&s){const t=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",t)}}function hS(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",8),2&s){const t=e.XpG(2);e.Y8G("currentStatusObj",t.statusObj)}}function fS(s,n){if(1&s&&(e.nrm(0,"div",47),e.nI1(1,"safeNormalHtmlContent")),2&s){const t=e.XpG().$implicit;e.Y8G("innerHTML",e.bMT(1,1,t.description),e.npT)}}function gS(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",41)(1,"div",42),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.chooseCombo(o))}),e.j41(2,"div",41),e.EFF(3),e.k0s(),e.DNE(4,fS,2,3,"div",43),e.j41(5,"div",44),e.nrm(6,"span",45),e.nI1(7,"translateToKeyParam"),e.j41(8,"span",46),e.EFF(9),e.nI1(10,"formatMoney"),e.k0s()()()()}if(2&s){const t=n.$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.l_i(10,rS,(null==i.currentComboObj?null:i.currentComboObj.id)==t.id,(null==i.currentComboObj?null:i.currentComboObj.id)!=t.id)),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(2),e.Y8G("innerHTML",e.i5U(7,5,"lang_payment_total_exam_in_combo",t.items.length.toString()),e.npT),e.R7$(3),e.JRh(e.bMT(10,8,t.price)+" VND")}}function TS(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",50)(2,"div",51),e.nrm(3,"lucide-icon",52),e.k0s(),e.j41(4,"div",53)(5,"div",54,3),e.EFF(7),e.k0s()()(),e.bVm()),2&s){const t=n.$implicit,i=e.sdS(6);e.R7$(3),e.Y8G("ngClass",e.lJ4(5,lS)),e.R7$(2),e.FS9("matTooltip",t.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.R7$(2),e.SpI(" ",t.name," ")}}function bS(s,n){if(1&s&&(e.j41(0,"div",48),e.DNE(1,TS,8,6,"ng-container",49),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.currentComboObj.items)}}function xS(s,n){1&s&&(e.j41(0,"p",57),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_payment_dialog_coin_current_not_enough"),""))}function vS(s,n){if(1&s&&(e.j41(0,"span",55),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.nI1(5,"number"),e.k0s(),e.DNE(6,xS,3,3,"p",56),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_payment_dialog_coin_current"),": "),e.R7$(3),e.JRh(e.bMT(5,5,t.totalCoin)),e.R7$(2),e.Y8G("ngIf",t.currentComboObj&&t.currentComboObj.price&&t.totalCoin<t.currentComboObj.price)}}function yS(s,n){1&s&&e.nrm(0,"azt-loading-ui",15)}function SS(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-mat-dialog-content",18)(1,"div",19)(2,"div"),e.DNE(3,gS,11,13,"div",20),e.k0s(),e.DNE(4,bS,2,1,"div",21),e.j41(5,"div",22)(6,"div",23),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",24)(10,"div",25)(11,"div",26)(12,"div",27),e.nrm(13,"img",28),e.nI1(14,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(15,"div",26)(16,"div",27),e.nrm(17,"img",29),e.nI1(18,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(19,"div",26)(20,"div",27),e.nrm(21,"img",30),e.nI1(22,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(23,"div",26)(24,"div",27),e.nrm(25,"img",31),e.nI1(26,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(27,"div",26)(28,"div",27),e.nrm(29,"img",32),e.nI1(30,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(31,"div",26)(32,"div",27),e.nrm(33,"img",33),e.nI1(34,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(35,"div",26)(36,"div",27),e.nrm(37,"img",34),e.nI1(38,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(39,"div",26)(40,"div",27),e.nrm(41,"img",35),e.nI1(42,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(43,"div",26)(44,"div",27),e.nrm(45,"img",36),e.nI1(46,"coreModConvertCdnLinkOfGitHub"),e.k0s()(),e.j41(47,"div",26)(48,"div",27),e.nrm(49,"img",37),e.nI1(50,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()()()()(),e.j41(51,"div",38),e.DNE(52,vS,7,7,"span",39),e.j41(53,"div",40)(54,"button",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleCloseDialog())}),e.EFF(55),e.nI1(56,"mytranslate"),e.k0s(),e.j41(57,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.orderBuyExam())}),e.DNE(58,yS,1,0,"azt-loading-ui",14),e.j41(59,"span"),e.EFF(60),e.nI1(61,"mytranslate"),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 130px)"),e.R7$(3),e.Y8G("ngForOf",t.comboObjs),e.R7$(),e.Y8G("ngIf",t.currentComboObj),e.R7$(3),e.SpI(" ",e.bMT(8,20,"lang_payment_supported_payment_methods")," "),e.R7$(6),e.Y8G("src",e.bMT(14,22,"images/method-payment/vnpay_full.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(18,24,"images/method-payment/vietcombank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(22,26,"images/method-payment/techcombank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(26,28,"images/method-payment/vietinbank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(30,30,"images/method-payment/mbbank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(34,32,"images/method-payment/agribank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(38,34,"images/method-payment/bidv.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(42,36,"images/method-payment/acb.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(46,38,"images/method-payment/hdbank.svg"),e.B4B),e.R7$(4),e.Y8G("src",e.bMT(50,40,"images/method-payment/vpbank.svg"),e.B4B),e.R7$(3),e.Y8G("ngIf",t.totalCoin>0),e.R7$(),e.Y8G("ngClass",e.eq3(46,aS,t.isMobileDevice||t.isMobileWebView)),e.R7$(2),e.SpI(" ",e.bMT(56,42,"lang_payment_confirm_payment_buy_later")," "),e.R7$(2),e.Y8G("disabled",t.statusObj.loading),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(2),e.JRh(e.bMT(61,44,"lang_payment_confirm_payment_button"))}}function wS(s,n){if(1&s&&(e.j41(0,"div",16),e.DNE(1,hS,1,1,"azt-loading-effect",17)(2,SS,62,48,"ng-template",null,2,e.C5r),e.k0s()),2&s){const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",t)}}let Yh=(()=>{var s;class n extends kt._{handleCloseDialog(){this.dialogRef.close("close")}chooseCombo(i){this.currentComboObj=i}orderBuyExam(){if(!this.currentComboObj)return this.errorStatusObj("lang_payment_not_found_any_exam_combo",!0);this.sAztBrowserStorageService.saveSessionStorage("payment_currentComboObj",this.currentComboObj.id.toString()),this.initStatusObj(),this.callApiToBuy(this.currentComboObj.id)}callApiToBuy(i){this.waitDestroy(this.productOrderService.apiProductOrderBuyExamByCoinGet(i).subscribe(o=>{if(!o.success)return"lang_core_payment_not_enough_coin"!=o.message?this.errorStatusObj(o.message,!0):(this.myNavigationWithQueryString("/auth/vip-packages/studentCoin",`?backto=${encodeURIComponent(this.commonService.getCurrentUrlWithoutLocale()+"?pending=1")}&trackingKey=BUY_EXAM`),void this.dialogRef.close(void 0));window.location.reload()}))}getCoinBalance(){this.waitDestroy(this.coinPaymentService.apiCoinPaymentGetCurrentCoinGet().subscribe(i=>{this.totalCoin=i.data?.obj?.totalCoin??0,this.initData()}))}initData(){this.waitDestroy(this.comboPackageService.apiComboPackageListComboPackagesByExamHashIdGet(this.data.examObj.hashId??"").subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);if(!i.data?.objs?.length)return this.errorStatusObj("lang_payment_not_found_any_exam_combo",!0);this.comboObjs=i.data?.objs??[],this.currentComboObj=this.commonService.getFirstOfArray(this.comboObjs);let o=Number(this.sAztBrowserStorageService.getSessionStorage("payment_currentComboObj"));if(1==Number(this.commonService.getMyQueryParam("pending"))&&this.currentComboObj?.id==o&&this.currentComboObj.price&&this.totalCoin>=this.currentComboObj.price)return this.callApiToBuy(o);this.stopStatusObj(),this.showIframeInContent&&this.sAztAzotaTrackingService.sendForceCustomEvent("PAYMENT_VIEW_IFRAME_CONTENT",[])}))}setViewport(){const i=document.createElement("meta");i.name="viewport",i.setAttribute("id","viewPortIframe");const o=l=>{i.setAttribute("content",l),document.head.appendChild(i)},a=window.innerWidth;if(a<768){const c=420!==a?a/420:1;o(`width=420, user-scalable=no, initial-scale=${c}, minimum-scale=${c}, maximum-scale=${c}`)}else o("width=960, user-scalable=no, initial-scale=1.0")}removeViewPort(){document.getElementById("viewPortIframe")?.remove()}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.getCoinBalance(),this.setViewport()}constructor(i,o,a,r,l){super(o,i),this.dialogRef=i,this.data=o,this.productOrderService=a,this.comboPackageService=r,this.sAztAzotaTrackingService=l,this.comboObjs=[],this.showIframeInContent=void 0,this.totalCoin=0,this.sAztBrowserStorageService=(0,e.WQX)(Ns.z),this.coinPaymentService=(0,e.WQX)(qh.dC)}ngOnDestroy(){this.removeViewPort()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8),e.rXU(qh.Hg),e.rXU(oS.E),e.rXU(Ch.M))},s.\u0275cmp=e.VBU({type:s,selectors:[["payment-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:2,consts:[["showIframeContent",""],["showListExamContent",""],["doneLoading",""],["c","isDisabled"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],["class","box py-4 px-4",4,"ngIf","ngIfElse"],[1,"box","py-4","px-4"],[3,"currentStatusObj"],[1,"bg-white",2,"height","100%"],["width","100%",2,"height","calc(var(--vh, 1vh) * 100 - 70px)",3,"src"],[1,"text-center","mt-4","text-center","absolute","bottom-2","w-full"],[1,"btn","btn-secondary-soft","w-32","mr-4","btn-lg","text-xl",3,"click"],[1,"btn","btn-primary","btn-lg","text-xl",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"box","py-4","px-4",2,"height","100%"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"minHeight"],[2,"margin-right","-5px"],["class","pb-2",4,"ngFor","ngForOf"],["class","box border border-slate-200 dark:border-darkmode-400 pt-2",4,"ngIf"],[1,"mt-4"],[1,"font-medium"],[1,"mt-2"],[1,"grid","grid-cols-10","gap-4"],[1,"col-span-5","md:col-span-2","flex","justify-center"],[1,"p-1","rounded-lg","border","border-slate-200","dark:border-darkmode-400","w-full","h-full"],["alt","Vnpay",2,"height","100%",3,"src"],["alt","vietcombank",3,"src"],["alt","techcombank",3,"src"],["alt","vietinbank",3,"src"],["alt","mbbank",3,"src"],["alt","agribank",3,"src"],["alt","bidv",3,"src"],["alt","acb",3,"src"],["alt","hdbank",3,"src"],["alt","vpbank",3,"src"],[1,"flex","mt-4","flex-wrap",2,"align-items","center"],["class","mr-3 ml-auto",4,"ngIf"],[3,"ngClass"],[1,"pb-2"],[1,"clickable","box","pl-2","pr-2","pt-2",3,"click","ngClass"],["class","pb-2 mt-3 mb-3",3,"innerHTML",4,"ngIf"],[1,"pb-2","flex","items-center","justify-end","font-medium"],[3,"innerHTML"],[1,"ml-1","text-lg","text-warning"],[1,"pb-2","mt-3","mb-3",3,"innerHTML"],[1,"box","border","border-slate-200","dark:border-darkmode-400","pt-2"],[4,"ngFor","ngForOf"],[1,"flex","items-center","p-3","border-b","border-slate-200","dark:border-darkmode-400"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],["name","file-check","size","40",3,"ngClass"],[1,"ml-4","mr-auto"],[2,"line-height","1.2",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"mr-3","ml-auto"],["class","mb-1 mt-1 text-danger text-sm",4,"ngIf"],[1,"mb-1","mt-1","text-danger","text-sm"]],template:function(i,o){1&i&&e.DNE(0,cS,1,1,"ng-container",4)(1,uS,1,1,"ng-container",4)(2,pS,3,2,"ng-template",null,0,e.C5r)(4,wS,4,2,"ng-template",null,1,e.C5r),2&i&&(e.Y8G("ngIf",!o.showIframeInContent),e.R7$(),e.Y8G("ngIf",o.showIframeInContent))},dependencies:[ye.f,se.K,Gt.R,Nn.U,x.MD,x.YU,x.Sq,x.bT,x.T3,x.QX,g.X1,L.iI,g.YN,z.wp,z.$g,z.Vs,Y.s,vt.oV,F.flO,F.WGl,W.L,z._y,z.JI,z.t0,U.Id,q.k],encapsulation:2}),n})();var Uh=O(25880);let Xh=(()=>{var s;class n{constructor(){this.switchEssayTabSource=new An.B,this.switchEssayTabMessage=this.switchEssayTabSource.asObservable()}changeSwitchEssayTabMessage(){this.switchEssayTabSource.next(!0)}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})(),Sr=(()=>{var s;class n extends Z.H{showExplain(){this.isTeacherRole||!this.examConfig||"SHOW_EXPLAIN"!==this.examConfig?.examPriceConfigWithBoughtStatus?.priceForAction||this.examConfig?.examPriceConfigWithBoughtStatus?.hasBought?this.isShowExplainChange.emit(!this.isShowExplain):this.showDialogBuyExam(this.examObj)}switchToEssayTab(){this.answerBoxService.changeSwitchEssayTabMessage()}showDialogBuyExam(i){this.sAztDialogService.open(Yh,{data:{examObj:i},restoreFocus:!1,width:"100vw",maxWidth:"100vw",height:"100vh",backdropClass:"azt-backdrop-full-width-height",disableClose:!0})}isKey(i){return!(!this.questionObj?.answers||!this.questionObj.answerResult)&&(i.key?i.key==this.questionObj.answerResult[0]:i==this.questionObj.answerResult[0])}haveChoose(i){return!!this.userAnswersObj["id_"+this.questionObj?.id]&&(i.key?i.key.toUpperCase().toString()==this.userAnswersObj["id_"+this.questionObj?.id].toUpperCase():i.toString().toUpperCase()==this.userAnswersObj["id_"+this.questionObj?.id].toUpperCase())}findKey(){this.questionObj?.answerResult&&this.labelArr.every(i=>!this.questionObj||!this.questionObj.answerResult||this.questionObj.answerResult[0]!=i.key||(this.key=(this.isShowOriginAnswer?i.key:i.alpha??i.key)??"",!1))}checkShowExplainButton(){this.isShowExplainButton=!!(this.questionObj.help||"lang_core_show_explain_required_payment"==this.questionObj.help&&"SHOW_EXPLAIN"===this.examConfig?.examPriceConfigObj?.priceForAction)}checkLabelArr(){this.labelArr=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.questionAnswers,this.isShowOriginAnswer),this.findKey()}ngOnChanges(i){i.isShowOriginAnswer&&this.questionObj&&this.checkLabelArr()}ngOnInit(){if(super.ngOnInit(),this.isFillAnswer=this.questionObj?.correctAnswer??!1,this.answerTypeService.isTrueFalseAnswer(this.questionObj)?(this.keys=this.sAztAnswerTrueFalseService.checkLabelKeys(this.keys,this.questionObj?.answers,this.questionObj?.answerResult),this.isFillAnswer=!0):this.key=this.questionObj?.answerResult.length?this.questionObj.answerResult[0]:"",this.questionAnswers=(0,sS.cloneDeep)(this.questionObj.answers??[]),this.checkLabelArr(),this.answerTypeService.isOneChoiceAnswer(this.questionObj))for(let i=0;i<this.labelArr.length&&(this.isFillAnswer=this.isKey(this.labelArr[i])&&this.haveChoose(this.labelArr[i]),!0!==this.isFillAnswer);i++);this.answerTypeService.isFillAnswer(this.questionObj)&&this.questionObj?.answerResult&&this.questionObj.answerResult.length>0&&(this.keys=this.questionObj.answerResult,this.isFillAnswer=this.questionObj?.correctAnswer??!1),this.checkShowExplainButton()}constructor(i,o,a,r){super(),this.sAztAnswerTrueFalseService=i,this.answerTypeService=o,this.answerBoxService=a,this.sAztDialogService=r,this.isShowExplain=!1,this.isOfflineMark=!1,this.isTeacherRole=!0,this.isShowOriginAnswer=!1,this.userAnswersObj={},this.notShowAnswerYet=!1,this.currentTab="multiple_choice_tab",this.backToLink="",this.isShowExplainChange=new e.bkB,this.key="",this.keys=[],this.labelArr=[],this.isFillAnswer=!1,this.isShowExplainButton=!1,this.questionAnswers=[]}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Uh.j),e.rXU(ln._),e.rXU(Xh),e.rXU(wn.i))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-answer-box-with-user-answer-base"]],inputs:{examObj:"examObj",questionObj:"questionObj",isShowExplain:"isShowExplain",isOfflineMark:"isOfflineMark",isTeacherRole:"isTeacherRole",isShowOriginAnswer:"isShowOriginAnswer",examConfig:"examConfig",userAnswersObj:"userAnswersObj",notShowAnswerYet:"notShowAnswerYet",currentTab:"currentTab",backToLink:"backToLink"},outputs:{isShowExplainChange:"isShowExplainChange"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();const IS=s=>({"justify-content":s}),CS=s=>({"mt-3":s}),kS=(s,n)=>({width:s,"margin-right":n}),ES=()=>({"ml-1":!0}),AS=s=>[s],OS=s=>({backto:s}),RS=()=>({"text-transform":"uppercase"}),FS=(s,n)=>({"flex justify-between w-full items-center":s,"answer-box-type1":n}),Wh=s=>({"border-color":s}),Hh=s=>({color:s}),jS=()=>({"text-danger mr-1":!0}),Jh=()=>({"mr-1":!0}),zS=()=>({"text-success mr-1":!0}),DS=s=>({"w-full":s}),MS=s=>({color:"#00ac33",width:s}),GS=(s,n)=>({color:s,width:n}),PS=()=>({color:"red"});function NS(s,n){if(1&s){const t=e.RV6();e.j41(0,"span",8),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplain())}),e.EFF(1),e.nI1(2,"mytranslate"),e.nrm(3,"lucide-icon",9),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("ngStyle",e.l_i(7,kS,t.isShowExplainButton?"125px":"0px",t.isShowExplainButton?"-40px":"0px")),e.BMQ("style",t.isShowExplainButton&&!t.notShowAnswerYet?"visibility:  visible":"visibility:  hidden",e.$dS),e.R7$(),e.SpI(" ",e.bMT(2,5,"lang_auto_giai_thich")," "),e.R7$(2),e.Y8G("name",t.isShowExplain?"chevron-up":"chevron-down")("ngClass",e.lJ4(10,ES))}}function VS(s,n){if(1&s&&(e.j41(0,"a",10),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.Y8G("routerLink",e.eq3(8,AS,e.bMT(1,4,"/on-luyen/"+t.questionObj.practiceHashId)))("queryParams",e.eq3(10,OS,t.backToLink))("ngStyle",e.lJ4(12,RS)),e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_azota_ui_practice_link")," ")}}function LS(s,n){if(1&s&&(e.j41(0,"span",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(5,Hh,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(2,3,"lang_auto_dap_an_dung"),": ",t.key,"")}}function BS(s,n){1&s&&e.nrm(0,"span",17)}function $S(s,n){1&s&&e.nrm(0,"lucide-icon",24),2&s&&e.Y8G("ngClass",e.lJ4(1,jS))}function QS(s,n){1&s&&e.nrm(0,"lucide-icon",25),2&s&&e.Y8G("ngClass",e.lJ4(1,Jh))}function qS(s,n){if(1&s&&(e.qex(0),e.DNE(1,$S,1,2,"lucide-icon",23)(2,QS,1,2,"lucide-icon",21),e.bVm()),2&s){const t=e.XpG(2).$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.haveChoose(t)&&2!=i.examObj.whenShowAnswer&&!i.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",i.haveChoose(t)&&2!=i.examObj.whenShowAnswer&&i.notShowAnswerYet)}}function YS(s,n){1&s&&e.nrm(0,"lucide-icon",25),2&s&&e.Y8G("ngClass",e.lJ4(1,Jh))}function US(s,n){if(1&s&&(e.qex(0),e.DNE(1,YS,1,2,"lucide-icon",21),e.bVm()),2&s){const t=e.XpG(2).$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.haveChoose(t)&&2==i.examObj.whenShowAnswer)}}function XS(s,n){1&s&&e.nrm(0,"lucide-icon",25),2&s&&e.Y8G("ngClass",e.lJ4(1,zS))}function WS(s,n){if(1&s&&(e.qex(0),e.DNE(1,qS,3,2,"ng-container",19)(2,US,2,1,"ng-container",19)(3,XS,1,2,"lucide-icon",21),e.j41(4,"span",22),e.EFF(5),e.k0s(),e.bVm()),2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(i.isKey(t)&&i.haveChoose(t))),e.R7$(),e.Y8G("ngIf",!(i.isKey(t)&&i.haveChoose(t))),e.R7$(),e.Y8G("ngIf",i.isKey(t)&&i.haveChoose(t)&&2!=i.examObj.whenShowAnswer),e.R7$(2),e.SpI(" ",t.alpha?t.alpha:t.key?t.key:t," ")}}function HS(s,n){if(1&s&&(e.j41(0,"span",26),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("ngClass",i.isKey(t)&&i.haveChoose(t)&&2!=i.examObj.whenShowAnswer?"b-circle  w-6 h-6 text-success":!i.isKey(t)&&i.haveChoose(t)&&2!=i.examObj.whenShowAnswer?"b-circle  w-6 h-6 text-danger":""),e.R7$(),e.SpI(" ",t.alpha?t.alpha:t.key?t.key:t," ")}}function JS(s,n){if(1&s&&(e.j41(0,"div",18),e.DNE(1,WS,6,4,"ng-container",19)(2,HS,2,2,"span",20),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.isTqbDomain),e.R7$(),e.Y8G("ngIf",t.isTqbDomain)}}function KS(s,n){if(1&s&&(e.j41(0,"div",11),e.DNE(1,LS,3,7,"span",12)(2,BS,1,0,"span",13),e.j41(3,"div",14),e.DNE(4,JS,3,2,"div",15),e.k0s()()),2&s){const t=e.XpG();e.Y8G("ngClass",e.l_i(5,FS,t.isMobileDevice,!t.isMobileDevice)),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",t.keys&&2==t.examObj.whenShowAnswer),e.R7$(),e.Y8G("ngStyle",e.eq3(8,Wh,t.questionObj.correctAnswer?"#00ac33":"red")),e.R7$(),e.Y8G("ngForOf",t.labelArr)}}function ZS(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&s){const t=n.$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngStyle",e.eq3(5,MS,i.isMobileDevice?"50%":"95px")),e.R7$(),e.Lme(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t,") ",e.bMT(3,3,i.keys.includes((t.alpha?t.alpha:t.key?t.key:"")+"T")?"lang_auto_dung":"lang_auto_sai")," ")}}function ew(s,n){if(1&s&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",32),e.DNE(5,ZS,4,7,"ng-container",33),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_dap_an_dung"),":"),e.R7$(3),e.Y8G("ngForOf",t.labelArr)}}function tw(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",34),e.nI1(2,"isTrueAnswerType5"),e.EFF(3),e.nI1(4,"getAnswerChoiceTrueFalseQuestion"),e.nI1(5,"mytranslate"),e.k0s(),e.bVm()),2&s){const t=n.$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngStyle",e.l_i(12,GS,e.brH(2,3,t,i.keys,i.userAnswersObj["id_"+i.questionObj.id])?"#00ac33":"red",i.isMobileDevice?"50%":"95px")),e.R7$(2),e.Lme(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t,") ",e.bMT(5,10,e.i5U(4,7,t,i.userAnswersObj["id_"+i.questionObj.id]))," ")}}function nw(s,n){if(1&s&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",32),e.DNE(5,tw,6,15,"ng-container",33),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_core_dap_an_thi_sinh_chon"),":"),e.R7$(3),e.Y8G("ngForOf",t.labelArr)}}function iw(s,n){if(1&s&&(e.j41(0,"span",34),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.Y8G("ngStyle",e.lJ4(2,PS)),e.R7$(),e.SpI(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t,") \xa0\xa0 ")}}function sw(s,n){if(1&s&&(e.qex(0),e.DNE(1,iw,2,3,"span",36),e.nI1(2,"isTrueAnswerType5"),e.bVm()),2&s){const t=n.$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",!e.brH(2,1,t,i.keys,i.userAnswersObj["id_"+i.questionObj.id]))}}function ow(s,n){if(1&s&&(e.j41(0,"div",35)(1,"div",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,sw,3,5,"ng-container",33),e.k0s()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_core_cau_lam_sai"),":"),e.R7$(2),e.Y8G("ngForOf",t.labelArr)}}function aw(s,n){if(1&s&&(e.j41(0,"div",27),e.DNE(1,ew,6,4,"div",28)(2,nw,6,4,"div",28)(3,ow,5,4,"div",29),e.k0s()),2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(4,DS,t.isMobileDevice)),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet)}}function rw(s,n){if(1&s&&(e.j41(0,"span",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(5,Hh,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(2,3,"lang_auto_dap_an_dung_"),"",t.keys.join("],["),"]")}}function lw(s,n){1&s&&e.nrm(0,"span",17)}function cw(s,n){if(1&s&&(e.j41(0,"div",37),e.DNE(1,rw,3,7,"span",12)(2,lw,1,0,"span",13),e.j41(3,"div",38)(4,"div",39),e.EFF(5),e.nI1(6,"trimEndFillAnswer"),e.nI1(7,"mytranslate"),e.k0s()()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.keys&&2!=t.examObj.whenShowAnswer&&!t.notShowAnswerYet),e.R7$(),e.Y8G("ngIf",t.keys&&2==t.examObj.whenShowAnswer),e.R7$(),e.Y8G("ngStyle",e.eq3(9,Wh,t.questionObj.correctAnswer?"#00ac33":"red")),e.R7$(2),e.SpI(" ",void 0!==t.userAnswersObj["id_"+t.questionObj.id]?e.i5U(6,4,t.userAnswersObj["id_"+t.questionObj.id],t.isOfflineMark):e.bMT(7,7,"lang_auto_thi_sinh_khong_thong_tin")," ")}}function uw(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.switchToEssayTab())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_click_vao_day_de_xem_o_tab_tu_luan")," "))}function _w(s,n){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_thi_sinh_khong_nhap_thong_tin")," "))}function dw(s,n){if(1&s&&(e.qex(0),e.nrm(1,"div",42),e.bVm()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("innerText",t.userAnswersObj["id_"+t.questionObj.id])}}function mw(s,n){if(1&s&&(e.qex(0),e.DNE(1,_w,3,3,"div",19)(2,dw,2,1,"ng-container",19),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",void 0===t.userAnswersObj["id_"+t.questionObj.id]),e.R7$(),e.Y8G("ngIf",t.userAnswersObj["id_"+t.questionObj.id])}}function pw(s,n){if(1&s&&(e.j41(0,"div",40),e.DNE(1,uw,4,3,"div",19)(2,mw,3,2,"ng-container",19),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf","multiple_choice_tab"==t.currentTab),e.R7$(),e.Y8G("ngIf","multiple_choice_tab"!=t.currentTab)}}let hw=(()=>{var s;class n extends Sr{}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-answer-box-with-user-full-answer-for-student"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:20,consts:[[1,"question-standalone-answer-box-for-student","box","pt-0","shadow-none",2,"border-top-left-radius","0","border-top-right-radius","0",3,"ngStyle"],[1,"flex","flex-col-reverse","sm:flex-row","sm:items-center",3,"ngClass"],["class","explainTxt text-pending cursor-pointer","azt-track-service","azt-standalone-question-nQrO97VmcYI",3,"ngStyle","click",4,"ngIf"],["class","btn btn-outline-primary btn-transparent",3,"routerLink","queryParams","ngStyle",4,"ngIf"],["class","mt-2 font-bold",3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","answer-box-type1 mt-2",4,"ngIf"],["class","answer-box answer-box-type3 ml-auto justify-content-between notForPdfExport",4,"ngIf"],["azt-track-service","azt-standalone-question-nQrO97VmcYI",1,"explainTxt","text-pending","cursor-pointer",3,"click","ngStyle"],["size","24",3,"name","ngClass"],[1,"btn","btn-outline-primary","btn-transparent",3,"routerLink","queryParams","ngStyle"],[1,"mt-2","font-bold",3,"ngClass"],["class","keyText my-1",3,"ngStyle",4,"ngIf"],["class","keyText my-1 ml-2",4,"ngIf"],["id","type_3",1,"limit-max-width","answer-box","ml-auto","my-1",3,"ngStyle"],["class","label-item",4,"ngFor","ngForOf"],[1,"keyText","my-1",3,"ngStyle"],[1,"keyText","my-1","ml-2"],[1,"label-item"],[4,"ngIf"],["class","lalala",3,"ngClass",4,"ngIf"],["name","circle-check","size","24",3,"ngClass",4,"ngIf"],[1,"lalala"],["name","x","size","24",3,"ngClass",4,"ngIf"],["name","x","size","24",3,"ngClass"],["name","circle-check","size","24",3,"ngClass"],[1,"lalala",3,"ngClass"],[3,"ngClass"],["class","keyText my-1 font-medium flex flex-wrap",4,"ngIf"],["class","keyText my-1 font-medium text-red flex flex-wrap",4,"ngIf"],[1,"keyText","my-1","font-medium","flex","flex-wrap"],[2,"width","100px"],[1,"flex","justify-between","flex-wrap"],[4,"ngFor","ngForOf"],[1,"lalala",3,"ngStyle"],[1,"keyText","my-1","font-medium","text-red","flex","flex-wrap"],["class","lalala",3,"ngStyle",4,"ngIf"],[1,"answer-box-type1","mt-2"],["id","type_4",1,"answer-box","ml-auto","my-1",2,"padding","0",3,"ngStyle"],[1,"text-answer"],[1,"answer-box","answer-box-type3","ml-auto","justify-content-between","notForPdfExport"],["azt-track-service","answer-box-LBNR1fkVDxS",1,"clickable",3,"click"],[1,"answer-essay-txt",3,"innerText"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,NS,4,11,"span",2)(3,VS,4,13,"a",3),e.k0s(),e.DNE(4,KS,5,10,"div",4),e.nI1(5,"isOneChoiceAnswer"),e.DNE(6,aw,4,6,"div",5),e.nI1(7,"isTrueFalseAnswer"),e.DNE(8,cw,8,11,"div",6),e.nI1(9,"isFillAnswer"),e.DNE(10,pw,3,2,"div",7),e.nI1(11,"isEssayAnswer"),e.k0s()),2&i&&(e.Y8G("ngStyle",e.eq3(16,IS,2==o.examObj.whenShowAnswer?"flex-end":"space-between")),e.R7$(),e.Y8G("ngClass",e.eq3(18,CS,o.isMobileDevice)),e.R7$(),e.Y8G("ngIf",2!=o.examObj.whenShowAnswer),e.R7$(),e.Y8G("ngIf",o.questionObj.practiceHashId),e.R7$(),e.Y8G("ngIf",e.bMT(5,8,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(7,10,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(9,12,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(11,14,o.questionObj)))},dependencies:[z.F2,x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.V6,z.Zm,z.N3,z.FC,z.jr,z.C0,z.M_,U.Id,q.k],styles:[".question-standalone-answer-box-for-student[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.answer-box[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-around;padding:10px;border:1px solid #f1f1f1;border-radius:3px}.answer-box.limit-max-width[_ngcontent-%COMP%]{max-width:250px}.answer-box[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{font-weight:500;display:flex;align-items:center;font-size:16px;width:40px;justify-content:flex-end}.answer-box.answer-box-type3[_ngcontent-%COMP%]{width:100%}.answer-box-type1[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-box-type1[_ngcontent-%COMP%]   .keyText[_ngcontent-%COMP%]{font-weight:500;font-size:16px;flex:auto;text-align:right;margin-right:15px}.text-answer[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:120px;overflow:auto;padding:10px}textarea[_ngcontent-%COMP%]:focus{border:none!important}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}@media screen and (max-width: 768px){.answer-box-type1[_ngcontent-%COMP%]{margin-left:15px}}@media screen and (max-width: 768px){.question-standalone-answer-box-for-student[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:flex-start}}@media screen and (max-width: 480px){.answer-box[_ngcontent-%COMP%]{width:auto}.text-answer[_ngcontent-%COMP%]{width:180px;max-height:auto}}"]}),n})(),fw=(()=>{var s;class n extends Sr{constructor(){super(...arguments),this.checkShowFullAnswer=!1}ngOnInit(){this.checkShowFullAnswer=!(this.examConfig&&"SHOW_EXPLAIN"===this.examConfig?.examPriceConfigWithBoughtStatus?.priceForAction&&!this.examConfig?.examPriceConfigWithBoughtStatus?.hasBought)}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-answer-box-with-user-answer-for-student"]],standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:11,consts:[[3,"isShowExplainChange","examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isTeacherRole","isShowOriginAnswer","isShowExplain","backToLink","isOfflineMark","currentTab"]],template:function(i,o){1&i&&(e.j41(0,"azt-answer-box-with-user-full-answer-for-student",0),e.mxI("isShowExplainChange",function(r){return e.DH7(o.isShowExplain,r)||(o.isShowExplain=r),r}),e.bIt("isShowExplainChange",function(){return o.isShowExplainChange.emit(o.isShowExplain)}),e.k0s()),2&i&&(e.Y8G("examObj",o.examObj)("examConfig",o.examConfig)("questionObj",o.questionObj)("userAnswersObj",o.userAnswersObj)("notShowAnswerYet",o.notShowAnswerYet)("isTeacherRole",o.isTeacherRole)("isShowOriginAnswer",o.isShowOriginAnswer),e.R50("isShowExplain",o.isShowExplain),e.Y8G("backToLink",o.backToLink)("isOfflineMark",o.isOfflineMark)("currentTab",o.currentTab))},dependencies:[hw,x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();const Kh=s=>({width:s,visibility:"visible"}),Zh=()=>({"ml-1":!0}),Vu=s=>({color:s}),Lu=s=>({"border-color":s}),gw=()=>({"text-danger wrongIcon mr-1":!0}),Tw=()=>({"rightIcon text-success mr-1":!0}),bw=()=>({"text-danger mr-1":!0}),xw=()=>({"text-success mr-1":!0});function vw(s,n){if(1&s){const t=e.RV6();e.j41(0,"span",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplain())}),e.EFF(1),e.nI1(2,"mytranslate"),e.nrm(3,"lucide-icon",8),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("ngStyle",e.eq3(6,Kh,t.questionObj.help?"125px":"0px")),e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_giai_thich")," "),e.R7$(2),e.Y8G("name",t.isShowExplain?"chevron-up":"chevron-down")("ngClass",e.lJ4(8,Zh))}}function yw(s,n){1&s&&e.nrm(0,"lucide-icon",18),2&s&&e.Y8G("ngClass",e.lJ4(1,gw))}function Sw(s,n){if(1&s&&e.DNE(0,yw,1,2,"lucide-icon",17),2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("ngIf",i.haveChoose(t))}}function ww(s,n){1&s&&e.nrm(0,"lucide-icon",19),2&s&&e.Y8G("ngClass",e.lJ4(1,Tw))}function Iw(s,n){if(1&s&&(e.j41(0,"div",13),e.DNE(1,Sw,1,1,"ng-template",14)(2,ww,1,2,"lucide-icon",15),e.j41(3,"span",16),e.EFF(4),e.k0s()()),2&s){const t=n.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(i.isKey(t)&&i.haveChoose(t))),e.R7$(),e.Y8G("ngIf",i.isKey(t)&&i.haveChoose(t)),e.R7$(2),e.JRh(t.alpha?t.alpha:t.key?t.key:t)}}function Cw(s,n){if(1&s&&(e.j41(0,"div",9)(1,"span",10),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",11),e.DNE(5,Iw,5,3,"div",12),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(7,Vu,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(3,5,"lang_auto_dap_an_dung"),": ",t.key,""),e.R7$(2),e.Y8G("ngStyle",e.eq3(9,Lu,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Y8G("ngForOf",t.labelArr)}}function kw(s,n){if(1&s&&(e.qex(0),e.j41(1,"span",26),e.nI1(2,"isTrueAnswerType5"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()),2&s){const t=n.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(9,Vu,e.brH(2,3,t,i.keys,i.userAnswersObj["id_"+i.questionObj.id])?"#00ac33":"red")),e.R7$(2),e.Lme(" ",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t," - ",e.bMT(4,7,i.keys.includes((t.alpha?t.alpha:t.key?t.key:"")+"T")?"lang_auto_dung":"lang_auto_sai"),"\xa0 ")}}function Ew(s,n){1&s&&e.nrm(0,"lucide-icon",18),2&s&&e.Y8G("ngClass",e.lJ4(1,bw))}function Aw(s,n){1&s&&e.nrm(0,"lucide-icon",19),2&s&&e.Y8G("ngClass",e.lJ4(1,xw))}function Ow(s,n){if(1&s&&(e.j41(0,"div",27),e.DNE(1,Ew,1,2,"lucide-icon",17),e.nI1(2,"isTrueAnswerType5"),e.DNE(3,Aw,1,2,"lucide-icon",15),e.nI1(4,"isTrueAnswerType5"),e.j41(5,"span",16),e.EFF(6),e.nI1(7,"getAnswerChoiceTrueFalseQuestion"),e.nI1(8,"mytranslate"),e.k0s()()),2&s){const t=n.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!e.brH(2,4,t,i.keys,i.userAnswersObj["id_"+(null==i.questionObj?null:i.questionObj.id)])),e.R7$(2),e.Y8G("ngIf",e.brH(4,8,t,i.keys,i.userAnswersObj["id_"+(null==i.questionObj?null:i.questionObj.id)])),e.R7$(3),e.Lme("",t.alpha?t.alpha.toLowerCase():t.key?t.key.toLowerCase():t," - ",e.bMT(8,15,e.i5U(7,12,t,i.userAnswersObj["id_"+i.questionObj.id])),"")}}function Rw(s,n){if(1&s&&(e.j41(0,"div",20)(1,"span",21),e.EFF(2),e.nI1(3,"mytranslate"),e.DNE(4,kw,5,11,"ng-container",22),e.k0s(),e.j41(5,"div",23)(6,"div",24),e.DNE(7,Ow,9,17,"div",25),e.k0s()()()),2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_dap_an_dung"),": "),e.R7$(2),e.Y8G("ngForOf",t.labelArr),e.R7$(),e.Y8G("ngStyle",e.eq3(6,Lu,t.questionObj.correctAnswer?"#00ac33":"red")),e.R7$(2),e.Y8G("ngForOf",t.labelArr)}}function Fw(s,n){if(1&s&&(e.j41(0,"span",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(5,Vu,t.isFillAnswer?"#00ac33":"red")),e.R7$(),e.Lme("",e.bMT(2,3,"lang_auto_dap_an_dung_"),"",t.keys.join("],["),"]")}}function jw(s,n){if(1&s&&(e.j41(0,"div",9),e.DNE(1,Fw,3,7,"span",28),e.j41(2,"div",29)(3,"div",30),e.EFF(4),e.nI1(5,"trimEndFillAnswer"),e.nI1(6,"mytranslate"),e.k0s()()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.keys),e.R7$(),e.Y8G("ngStyle",e.eq3(8,Lu,t.isFillAnswer?"#00ac33":"red")),e.R7$(2),e.SpI(" ",void 0!==t.userAnswersObj["id_"+t.questionObj.id]?e.i5U(5,3,t.userAnswersObj["id_"+t.questionObj.id],t.isOfflineMark):e.bMT(6,6,"lang_auto_thi_sinh_khong_thong_tin")," ")}}function zw(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.switchToEssayTab())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_click_vao_day_de_xem_o_tab_tu_luan")))}function Dw(s,n){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_thi_sinh_khong_nhap_thong_tin")," "))}function Mw(s,n){if(1&s&&(e.qex(0),e.nrm(1,"div",34),e.bVm()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("innerText",t.userAnswersObj["id_"+t.questionObj.id])}}function Gw(s,n){if(1&s&&(e.qex(0),e.DNE(1,Dw,3,3,"div",32)(2,Mw,2,1,"ng-container",32),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.userAnswersObj["id_"+t.questionObj.id]),e.R7$(),e.Y8G("ngIf",t.userAnswersObj["id_"+t.questionObj.id])}}function Pw(s,n){if(1&s&&(e.j41(0,"div",31),e.DNE(1,zw,4,3,"div",32)(2,Gw,3,2,"ng-container",32),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf","multiple_choice_tab"==t.currentTab),e.R7$(),e.Y8G("ngIf","multiple_choice_tab"!=t.currentTab)}}function Nw(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",1)(1,"span",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplain())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nrm(4,"lucide-icon",8),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(6,Kh,t.questionObj.help?"125px":"0px")),e.R7$(),e.SpI(" ",e.bMT(3,4,"lang_auto_giai_thich")," "),e.R7$(2),e.Y8G("name",t.isShowExplain?"chevron-up":"chevron-down")("ngClass",e.lJ4(8,Zh))}}let Vw=(()=>{var s;class n extends Sr{ngOnInit(){super.ngOnInit()}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-answer-box-with-user-answer-for-teacher"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:18,consts:[[1,"question-standalone-answer-box-for-student","box","shadow-none"],[1,"flex"],["azt-track-service","azt-standalone-question-sMnAQgQ7w7k","class","explainTxt text-pending cursor-pointer mt-2",3,"ngStyle","click",4,"ngIf"],["class","answer-box-type1 mt-2",4,"ngIf"],["class","answer-box-type1 mt-2","style","flex-wrap: wrap",4,"ngIf"],["class","answer-box answer-box-type3 ml-auto justify-content-between notForPdfExport",4,"ngIf"],["class","flex",4,"ngIf"],["azt-track-service","azt-standalone-question-sMnAQgQ7w7k",1,"explainTxt","text-pending","cursor-pointer","mt-2",3,"click","ngStyle"],["size","24",3,"name","ngClass"],[1,"answer-box-type1","mt-2"],[1,"keyText","my-1",3,"ngStyle"],["id","type_1",1,"limit-max-width","answer-box","ml-auto","my-1",3,"ngStyle"],["class","label-item",4,"ngFor","ngForOf"],[1,"label-item"],[3,"ngIf"],["name","circle-check","size","24",3,"ngClass",4,"ngIf"],[1,"lalala"],["name","x","size","24",3,"ngClass",4,"ngIf"],["name","x","size","24",3,"ngClass"],["name","circle-check","size","24",3,"ngClass"],[1,"answer-box-type1","mt-2",2,"flex-wrap","wrap"],[1,"keyText","my-1"],[4,"ngFor","ngForOf"],["id","type_3",1,"limit-max-width","answer-box","ml-auto","my-1",3,"ngStyle"],[1,"label-item",2,"display","block !important","width","auto !important"],["class","flex w-full mt-1","style","align-items: center",4,"ngFor","ngForOf"],[1,"lalala","ml-1",3,"ngStyle"],[1,"flex","w-full","mt-1",2,"align-items","center"],["class","keyText my-1",3,"ngStyle",4,"ngIf"],["id","type_2",1,"answer-box","ml-auto","my-1",2,"padding","0",3,"ngStyle"],[1,"text-answer","answer-box","forPdfExport","justify-content-between"],[1,"answer-box","answer-box-type3","ml-auto","justify-content-between","notForPdfExport"],[4,"ngIf"],["azt-track-service","answer-box-LBNR1fkVDxS",1,"clickable",3,"click"],[1,"answer-essay-txt",3,"innerText"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,vw,4,9,"span",2),e.nI1(3,"isEssayAnswer"),e.k0s(),e.DNE(4,Cw,6,11,"div",3),e.nI1(5,"isOneChoiceAnswer"),e.DNE(6,Rw,8,8,"div",4),e.nI1(7,"isTrueFalseAnswer"),e.DNE(8,jw,7,10,"div",3),e.nI1(9,"isFillAnswer"),e.DNE(10,Pw,3,2,"div",5),e.nI1(11,"isEssayAnswer"),e.k0s(),e.DNE(12,Nw,5,9,"div",6),e.nI1(13,"isEssayAnswer")),2&i&&(e.R7$(2),e.Y8G("ngIf",o.questionObj.help&&!e.bMT(3,6,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(5,8,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(7,10,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(9,12,o.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(11,14,o.questionObj)),e.R7$(2),e.Y8G("ngIf",o.questionObj.help&&e.bMT(13,16,o.questionObj)))},dependencies:[x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.V6,z.Zm,z.N3,z.FC,z.jr,z.C0,z.M_,U.Id,q.k],styles:[".question-standalone-answer-box-for-student[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.answer-box[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-around;padding:10px;border:1px solid #f1f1f1;border-radius:3px}.answer-box.limit-max-width[_ngcontent-%COMP%]{max-width:250px}.answer-box[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{font-weight:500;display:flex;align-items:center;font-size:16px;width:40px;justify-content:flex-end}.answer-box.answer-box-type3[_ngcontent-%COMP%]{width:100%}.answer-box-type1[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-box-type1[_ngcontent-%COMP%]   .keyText[_ngcontent-%COMP%]{font-weight:500;font-size:16px;flex:auto;text-align:right;margin-right:15px}.text-answer[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:120px;overflow:auto;padding:10px}textarea[_ngcontent-%COMP%]:focus{border:none!important}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}@media screen and (max-width: 768px){.answer-box-type1[_ngcontent-%COMP%]{margin-left:15px}}@media screen and (max-width: 768px){.question-standalone-answer-box-for-student[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:flex-start}}@media screen and (max-width: 480px){.answer-box[_ngcontent-%COMP%]{width:auto}.text-answer[_ngcontent-%COMP%]{width:180px;max-height:auto}}"]}),n})();function Lw(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-answer-box-with-user-answer-for-student",2),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isShowExplainChange.emit(o.isShowExplain))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("examObj",t.examObj)("examConfig",t.examConfig)("questionObj",t.questionObj)("userAnswersObj",t.userAnswersObj)("notShowAnswerYet",t.notShowAnswerYet)("isTeacherRole",t.isTeacherRole)("isShowOriginAnswer",t.isShowOriginAnswer),e.R50("isShowExplain",t.isShowExplain),e.Y8G("backToLink",t.backToLink)("isOfflineMark",t.isOfflineMark)("currentTab",t.currentTab)}}function Bw(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-answer-box-with-user-answer-for-teacher",3),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isShowExplainChange.emit(o.isShowExplain))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("examObj",t.examObj)("examConfig",t.examConfig)("questionObj",t.questionObj)("userAnswersObj",t.userAnswersObj)("notShowAnswerYet",t.notShowAnswerYet)("isShowOriginAnswer",t.isShowOriginAnswer)("isTeacherRole",t.isTeacherRole),e.R50("isShowExplain",t.isShowExplain),e.Y8G("backToLink",t.backToLink)("isOfflineMark",t.isOfflineMark)("currentTab",t.currentTab)}}let ef=(()=>{var s;class n extends Sr{ngOnInit(){}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-answer-box-view-base"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[[3,"examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isTeacherRole","isShowOriginAnswer","isShowExplain","backToLink","isOfflineMark","currentTab","isShowExplainChange",4,"ngIf"],[3,"examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isShowOriginAnswer","isTeacherRole","isShowExplain","backToLink","isOfflineMark","currentTab","isShowExplainChange",4,"ngIf"],[3,"isShowExplainChange","examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isTeacherRole","isShowOriginAnswer","isShowExplain","backToLink","isOfflineMark","currentTab"],[3,"isShowExplainChange","examObj","examConfig","questionObj","userAnswersObj","notShowAnswerYet","isShowOriginAnswer","isTeacherRole","isShowExplain","backToLink","isOfflineMark","currentTab"]],template:function(i,o){1&i&&e.DNE(0,Lw,1,11,"azt-answer-box-with-user-answer-for-student",0)(1,Bw,1,11,"azt-answer-box-with-user-answer-for-teacher",1),2&i&&(e.Y8G("ngIf",!o.isTeacherRole),e.R7$(),e.Y8G("ngIf",o.isTeacherRole))},dependencies:[fw,Vw,x.MD,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var Li=O(77932),Po=O(89272),Bu=O(78346),wr=O(78309);const tf=(s,n)=>({"btn-primary":s,"btn-secondary":n}),nf=()=>({"mr-2":!0});function $w(s,n){if(1&s&&(e.j41(0,"div",22)(1,"b",23),e.EFF(2),e.k0s(),e.j41(3,"div",24),e.nrm(4,"azt-dynamic-hook",17),e.k0s()()),2&s){let t;const i=n.$implicit;e.R7$(2),e.SpI("",null!==(t=i.alpha)&&void 0!==t?t:i.key,"."),e.R7$(2),e.Y8G("content",i.content)}}function Qw(s,n){if(1&s&&(e.j41(0,"div",20),e.DNE(1,$w,5,2,"div",21),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.data.questionObj.answers)}}function qw(s,n){if(1&s&&(e.j41(0,"h2",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",t.data.questionObj.answerResult.join(", ")," ")}}function Yw(s,n){if(1&s&&(e.j41(0,"div",8)(1,"h2",10),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",16),e.nrm(5,"azt-dynamic-hook",17),e.k0s(),e.DNE(6,Qw,2,1,"div",18)(7,qw,3,4,"h2",19),e.k0s()),2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_noi_dung_cau_hoi")," "),e.R7$(3),e.Y8G("content",t.data.questionObj.content),e.R7$(),e.Y8G("ngIf",1==t.data.questionObj.answerType&&t.data.questionObj.answers&&t.data.questionObj.answers.length>0),e.R7$(),e.Y8G("ngIf",t.data.questionObj.answerResult&&t.data.questionObj.isRoleTeacher)}}function Uw(s,n){if(1&s&&(e.j41(0,"div",8)(1,"h2",26),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",27),e.nrm(5,"azt-dynamic-hook",17),e.k0s()()),2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_loi_giai")," "),e.R7$(3),e.Y8G("content",t.data.questionObj.help)}}function Xw(s,n){1&s&&(e.qex(0),e.j41(1,"div",28)(2,"span",29),e.nrm(3,"azt-loading-ui"),e.k0s()(),e.bVm())}function Ww(s,n){if(1&s&&(e.j41(0,"div",44),e.nrm(1,"input",45),e.j41(2,"label",46),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&s){const t=n.$implicit,i=n.index;e.R7$(),e.FS9("id","choice_"+i),e.FS9("formControlName","choice_"+i),e.R7$(),e.FS9("for","choice_"+i),e.R7$(),e.SpI(" ",e.bMT(4,4,t)," ")}}function Hw(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",42),e.DNE(2,Ww,5,6,"div",43),e.k0s(),e.bVm()),2&s){const t=e.XpG().$implicit;e.R7$(),e.FS9("formGroupName","survey_"+t.id),e.R7$(),e.Y8G("ngForOf",t.choices)}}function Jw(s,n){if(1&s&&(e.qex(0),e.j41(1,"mat-radio-button",49),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&s){const t=n.$implicit,i=e.XpG(2).$implicit,o=e.XpG(3);e.R7$(),e.FS9("value",t),e.Y8G("checked",o.form.controls["survey_"+i.id].value==t),e.R7$(),e.JRh(e.bMT(3,3,t))}}function Kw(s,n){if(1&s&&(e.j41(0,"mat-radio-group",47),e.DNE(1,Jw,4,5,"ng-container",48),e.k0s()),2&s){const t=e.XpG().$implicit;e.FS9("formControlName","survey_"+t.id),e.R7$(),e.Y8G("ngForOf",t.choices)}}function Zw(s,n){if(1&s&&(e.j41(0,"div",39)(1,"div",40)(2,"h2",41),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div"),e.DNE(6,Hw,3,2,"ng-container",11)(7,Kw,2,2,"ng-template",null,1,e.C5r),e.k0s()()),2&s){const t=n.$implicit,i=n.index,o=e.sdS(8);e.R7$(3),e.Lme(" ",i+1+". ","",e.bMT(4,4,t.content)," "),e.R7$(3),e.Y8G("ngIf",t.multiChoice&&t.choices&&t.choices.length>1)("ngIfElse",o)}}function eI(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,Zw,9,6,"div",38),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.surveyObjs)}}function tI(s,n){if(1&s){const t=e.RV6();e.DNE(0,eI,2,1,"div",30),e.j41(1,"div",31)(2,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFeedBackEmotion(2))}),e.nrm(3,"lucide-icon",33),e.j41(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFeedBackEmotion(1))}),e.nrm(8,"lucide-icon",35),e.j41(9,"span"),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()(),e.j41(12,"div",36)(13,"textarea",37),e.nI1(14,"mytranslate"),e.bIt("keyup",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.autoResizeFeedBackArea())}),e.k0s()()}if(2&s){const t=e.XpG();e.Y8G("ngIf",t.surveyObjs.length),e.R7$(2),e.Y8G("disabled",t.disableLike)("ngClass",e.l_i(16,tf,2==t.feedBackEmotion,2!=t.feedBackEmotion)),e.R7$(),e.Y8G("ngClass",e.lJ4(19,nf)),e.R7$(2),e.JRh(e.bMT(6,10,"lang_test_market_introduce_rating_like")),e.R7$(2),e.Y8G("disabled",t.disableLike)("ngClass",e.l_i(20,tf,1==t.feedBackEmotion,1!=t.feedBackEmotion)),e.R7$(),e.Y8G("ngClass",e.lJ4(23,nf)),e.R7$(2),e.JRh(e.bMT(11,12,"lang_test_market_introduce_rating_dislike")),e.R7$(3),e.FS9("placeholder",e.bMT(14,14,"lang_global_question_ask_to_feedback_placeholder"))}}function nI(s,n){1&s&&(e.j41(0,"span",50),e.nrm(1,"azt-loading-ui"),e.k0s())}let iI=(()=>{var s;class n extends kt._{getAnswerSurvey(){let i=[],o=this.commonService.getFormObj(this.form);for(let a in o)if(a.includes("survey_")){let r={surveyId:Number(a.substring(a.indexOf("_")+1)),answers:[]};if(o[a]instanceof Object){let l=this.surveyObjs.find(c=>c.id==r.surveyId);if(l)for(let c in o[a])if(o[a][c]){let _=Number(c.substring(c.indexOf("_")+1));if(Array.isArray(l.choices)&&l.choices[_]){let d=l.choices[_];r.answers?.push(d)}}}else r.answers=[o[a]];i.push(r)}return i}getFeedbackSurveys(){this.loadingFeedBackSurvey=!0,this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksSurveysGet(this.applyType,this.role).subscribe(i=>{if(1==i.success){this.surveyObjs=i.data?.objs??[];let o={feedBackContent:new g.MJ("",{nonNullable:!0,validators:[g.k0.required,Li.M.noWhiteSpace]})};this.surveyObjs.length>0&&this.surveyObjs.forEach(a=>{if(a.multiChoice&&a.choices&&a.choices.length>1){let r={};o[`survey_${a.id}`]=new g.gE({}),a.choices.forEach((l,c)=>{r[`choice_${c}`]=new g.MJ(!1,{nonNullable:!0})}),o[`survey_${a.id}`]=this.fb.group(r)}else o[`survey_${a.id}`]=new g.MJ("",{nonNullable:!0,validators:[g.k0.required]})}),this.form=this.fb.group(o),this.loadingFeedBackSurvey=!1}else this.errorStatusObj(i.message??"",!0),this.loadingFeedBackSurvey=!1}))}getInfoFeedback(){this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksGet(this.questionId,this.applyType,this.role).subscribe(i=>{if(1==i.success){let o=i.data?.objs??[];o.length&&o[0].status&&(this.feedBackEmotion=o[0].status,this.disableLike=!0)}else this.errorStatusObj(i.message??"",!0),this.disableLike=!1}))}changeFeedBackEmotion(i){this.disableLike||(this.feedBackEmotion=i,this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksPost({objectId:this.questionId??void 0,userType:this.role??void 0,applyType:this.applyType??void 0,status:this.feedBackEmotion??void 0,content:"",surveyAnswers:[]}).subscribe(a=>{1==a.success?this.getInfoFeedback():this.errorStatusObj(a.message??"",!0)})))}autoResizeFeedBackArea(){const i=document.getElementById("text-area-feedback");i&&setTimeout(()=>{i.style.cssText="height:auto;",i.style.cssText="height:"+(i.scrollHeight+30)+"px"},0)}sendFeedBack(){if(this.form.invalid)this.showErrorSnack("lang_auto_vui_long_dien_day_du_thong_tin");else{this.initStatusObj(),this.sendingFeedBack=!0;let i={objectId:this.questionId??void 0,userType:this.role??void 0,applyType:this.applyType??void 0,status:this.feedBackEmotion??0,content:this.form.controls.feedBackContent.value??void 0,surveyAnswers:this.getAnswerSurvey()};this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksPost(i).subscribe(o=>{1==o.success?(this.sendingFeedBack=!1,this.dialogRef.close(!0),this.successStatusObj("TEACHER"==this.role?"lang_test_market_success_feedback":"lang_test_market_success_feedback_student",!0)):(this.errorStatusObj(o.message??"",!0),this.sendingFeedBack=!1)}))}}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){this.questionId=this.data.questionObj.id,this.role=this.data.role,this.applyType=this.data.applyType,this.form=this.fb.group({feedBackContent:new g.MJ("",{nonNullable:!0,validators:[g.k0.required,Li.M.noWhiteSpace]})}),this.getInfoFeedback(),this.getFeedbackSurveys(),super.ngOnInit()}constructor(i,o,a,r){super(r,a),this.fb=i,this.testMarketFeedbackService=o,this.dialogRef=a,this.data=r,this.role="",this.applyType="",this.form=new g.gE({}),this.feedBackEmotion=void 0,this.totalLike=0,this.totalDislike=0,this.sendingFeedBack=!1,this.loadingFeedBackSurvey=!1,this.disableLike=!1,this.surveyObjs=[]}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(g.ok),e.rXU(Bu.l_),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["exam-matrix-feedback-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:25,vars:19,consts:[["doneLoading",""],["SingleChoice",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],["class","border-t border-slate-200/60 dark:border-darkmode-400 py-2 mt-2",4,"ngIf"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[3,"formGroup"],[1,"font-medium","text-md","text-center","mb-2"],[4,"ngIf","ngIfElse"],[1,"p-3","text-right"],["azt-track-service","exam-matrix-feedback-dialog-qXEblgFcT",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","exam-matrix-feedback-dialog-NGlD5D-IvA",1,"btn","btn-primary","mw-24",3,"click","disabled"],["class","w-4 h-4 mr-2",4,"ngIf"],[1,"tex2jax_process","box-content",2,"width","auto"],[3,"content"],["class","grid grid-cols-12 gap-2 answers",4,"ngIf"],["class","font-medium text-md text-left text-success my-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-2","answers"],["class","answer col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"answer","col-span-12","md:col-span-6"],[1,"answer-label"],[1,"answer-content"],[1,"font-medium","text-md","text-left","text-success","my-2"],[1,"font-medium","text-md","text-center"],[1,"help-content","box","px-3","mt-1",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px"],[1,"flex","items-center","h-full","w-full"],[1,"w-8","h-8","mx-auto"],[4,"ngIf"],[1,"flex","items-center",2,"flex-wrap","wrap"],["azt-track-service","exam-matrix-feedback-dialog-PoMeFnagK",1,"btn","btn-sm","shadow-md","mt-2","mr-2",3,"click","disabled","ngClass"],["name","thumbs-up","size","24",3,"ngClass"],["azt-track-service","exam-matrix-feedback-dialog-iJokCn34oQ",1,"btn","btn-sm","shadow-md","mt-2","mr-2",3,"click","disabled","ngClass"],["name","thumbs-down","size","20",3,"ngClass"],[1,"items-center","mt-1"],["id","text-area-feedback","type","text","cols","10","rows","3","formControlName","feedBackContent",1,"form-control","mt-1",3,"keyup","placeholder"],["class","flex flex-wrap mb-2",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","mb-2"],[2,"min-width","300px"],[1,"text-md","mb-2"],[1,"block","px-2","ml-2","sm:flex",3,"formGroupName"],["class","mr-5",4,"ngFor","ngForOf"],[1,"mr-5"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[2,"vertical-align","middle","cursor","pointer","margin-left","3px",3,"for"],["color","primary",1,"px-2",2,"flex-direction","column",3,"formControlName"],[4,"ngFor","ngForOf"],[1,"mr-5",3,"checked","value"],[1,"w-4","h-4","mr-2"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2",6),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,Yw,8,6,"div",7)(8,Uw,6,4,"div",7),e.j41(9,"div",8)(10,"form",9)(11,"h2",10),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Xw,4,0,"ng-container",11)(15,tI,15,24,"ng-template",null,0,e.C5r),e.k0s()()()()(),e.j41(17,"div",12)(18,"button",13),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",14),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sendFeedBack())}),e.DNE(22,nI,2,0,"span",15),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()}if(2&i){const a=e.sdS(16);e.R7$(5),e.SpI(" ",e.bMT(6,11,o.data.questionObj.isRoleTeacher?"lang_global_question_ask_to_feedback":"lang_global_question_ask_to_report")," "),e.R7$(2),e.Y8G("ngIf",o.data.questionObj.content),e.R7$(),e.Y8G("ngIf",o.data.questionObj.help&&o.data.questionObj.isRoleTeacher),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(2),e.SpI(" ",e.bMT(13,13,"lang_auto_nhan_xet")," "),e.R7$(2),e.Y8G("ngIf",o.loadingFeedBackSurvey)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(20,15,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",o.sendingFeedBack||o.form.invalid),e.R7$(),e.Y8G("ngIf",o.sendingFeedBack),e.R7$(),e.SpI(" ",e.bMT(24,17,"lang_button_send")," ")}},dependencies:[Po.x,Gt.R,x.MD,x.YU,x.Sq,x.bT,g.X1,g.qT,g.me,g.Zm,g.BC,g.cb,g.j4,g.JD,g.$R,L.iI,g.YN,z.wp,Y.s,xr.VT,xr._g,F.flO,F.WGl,W.L,U.Id,q.k,wr.t],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),n})();var sI=O(19412),$u=O(53470);function oI(s,n){1&s&&(e.j41(0,"div",10)(1,"span",11),e.nrm(2,"azt-loading-ui"),e.k0s(),e.j41(3,"span",12),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&s&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function aI(s,n){1&s&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azt_cau_hoi_chua_co_lan_sua_nao")," "))}function rI(s,n){if(1&s&&e.nrm(0,"azt-question-standalone-for-preview",17),2&s){const t=e.XpG().$implicit,i=e.XpG();e.Y8G("examObj",i.data.examObj)("questionObj",t.questionLog)("follower",i.data.follower)("curQuestionIndex",i.data.curQuestionIndex)}}function lI(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",14),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(5,"div",15),e.DNE(6,rI,1,4,"azt-question-standalone-for-preview",16),e.k0s(),e.bVm()),2&s){const t=n.$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_azota_ui_the_time_of_question_editing")+": "+e.bMT(4,4,t.createdAt)," "),e.R7$(4),e.Y8G("ngIf",t.questionLog)}}let cI=(()=>{var s;class n extends kt._{closeDialog(){this.dialogRef.close()}getLogQuestion(i){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsIdLogsGet(i,this.data.isTeacher?void 0:this.data.curExamResultId).subscribe(o=>{o.success?((o.data?.objs??[]).forEach(r=>{let l={createdAt:r.createdAt,questionLog:this.commonService.castJsonToClassObj(Tr.I,JSON.stringify(r.questionLog))};l.questionLog&&(l.questionLog.isLogEditQuestion=!0),this.questionLogCustomList.push(l)}),this.successStatusObj()):this.errorStatusObj(o.message??"",!0)}))}ngOnInit(){this.getLogQuestion(this.data.questionObj.id)}constructor(i,o,a){super(a,o),this.questionService=i,this.dialogRef=o,this.data=a,this.questionLogCustomList=[]}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($u.wP),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["show-question-edit-history-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:15,vars:13,consts:[[1,"box"],[1,"font-medium","p-3","bg-slate-100","dark:bg-darkmode-400"],[3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],["class","flex p-5 justify-center items-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","items-center","p-2","pt-3"],[1,"ml-auto"],[1,"btn","btn-secondary",3,"click"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"flex","p-5","justify-center","items-center"],[1,"p-2","pb-0","text-xs","font-medium",2,"margin-bottom","-10px"],[1,"p-2"],[3,"examObj","questionObj","follower","curQuestionIndex",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"azt-mat-dialog-content",2),e.DNE(6,oI,6,3,"div",3),e.j41(7,"div",4),e.DNE(8,aI,3,3,"div",5)(9,lI,7,6,"ng-container",6),e.k0s()(),e.j41(10,"div",7)(11,"div",8)(12,"button",9),e.bIt("click",function(){return o.closeDialog()}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()()),2&i&&(e.R7$(2),e.Lme(" ",e.bMT(3,7,"lang_azota_ui_the_history_of_question_editing")," (",o.questionLogCustomList.length+" "+e.bMT(4,9,"lang_testbank_powerpoint_times"),") "),e.R7$(3),e.Y8G("defaultHeight",60),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(2),e.Y8G("ngIf",!o.questionLogCustomList.length&&!o.statusObj.loading),e.R7$(),e.Y8G("ngForOf",o.questionLogCustomList),e.R7$(4),e.SpI(" ",e.bMT(14,11,"lang_auto_dong")," "))},dependencies:[Nn.U,Gt.R,sI.a,x.MD,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,z.bH,U.Id,q.k],encapsulation:2}),n})();function uI(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",2),e.nI1(2,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goToEditQuestion())}),e.nrm(3,"lucide-icon",3),e.k0s()()}2&s&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,1,"lang_core_chinh_sua_de_thi")))}function _I(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",2),e.nI1(2,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showEditHistoryDialog())}),e.nrm(3,"lucide-icon",4),e.k0s()()}2&s&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,1,"lang_azota_ui_the_history_of_question_editing")))}let sf=(()=>{var s;class n extends Z.H{checkEditQuestion(){const i=this.questionObj?.createdAt,o=this.questionObj?.updatedAt;let a=this.timeService.calculationTimeOnlyMinutes(i,o);this.isEditQuestion=Number(a)>0}isOrgQuestion(){return null!=this.orgExamObjs.find(i=>i.questionId==this.questionObj.id)}goToEditQuestion(){var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"0",o=this.activeRoute.snapshot.paramMap.get("result_id")??"0",a=this.activeRoute.snapshot.paramMap.get("user_id")??"",r=this.activeRoute.snapshot.paramMap.get("student_id")??"",l=this.activeRoute.snapshot.paramMap.get("exam_id")??"",c=i,_=l;let d=this.orgExamObjs.find(v=>v.questionId==this.questionObj.id);d&&(c=d.orgCategoryId?.toString()??"0",_=d.orgExamId?.toString()??"0");var p=this.commonService.getMyQueryParam("backto")??"";let f=`/admin/testbank/test-review/${l}/${a}/${r}/${o}`+(p?"?backto="+encodeURIComponent(p):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/update-exam/"+c)+"/"+_+"?backto="+encodeURIComponent(f)+"&questionId="+this.questionObj.id}showEditHistoryDialog(){let i={follower:new Pn.e,examObj:this.examObj,questionObj:this.questionObj,renderConfigObj:this.renderConfigObj,curQuestionIndex:this.curQuestionIndex,curExamResultId:this.curExamResultId,isTeacher:this.showForTeacher};this.sAztDialogService.open(cI,{width:"750px",data:i})}showFeedbackQuestionDialog(){this.sAztDialogService.open(iI,{width:"750px",data:{questionObj:this.questionObj,role:this.showForTeacher?"TEACHER":"STUDENT",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1})}ngOnChanges(){this.checkEditQuestion()}constructor(i,o,a){super(),this.sAztDialogService=i,this.activeRoute=o,this.timeService=a,this.showForTeacher=!1,this.curExamResultId=0,this.isEditQuestion=!1}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(wn.i),e.rXU(L.nX),e.rXU(Xt.F))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-action-box"]],inputs:{examObj:"examObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",orgExamObjs:"orgExamObjs",showForTeacher:"showForTeacher",curQuestionIndex:"curQuestionIndex",curExamResultId:"curExamResultId"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:4,vars:4,consts:[[1,"flex"],[4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","p-1",3,"click","matTooltip"],["name","file-pen-line","size","18"],["name","history","size","18"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,uI,4,3,"div",1),e.nI1(2,"isOfflineExam"),e.DNE(3,_I,4,3,"div",1),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",o.isOrgQuestion()&&!e.bMT(2,2,o.examObj)),e.R7$(2),e.Y8G("ngIf",o.isEditQuestion&&!o.questionObj.isLogEditQuestion))},dependencies:[x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,W.L,z.st,U.Id,q.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var Qu=O(92775),of=O(64945),qu=O(85762),Yu=O(7062),Ir=O(32746),Uu=O(32360),Xu=O(88699),Cr=O(11952);const dI=s=>({"skeleton-box-loading":s}),mI=s=>({"pb-2":s}),pI=()=>[];function hI(s,n){if(1&s&&e.nrm(0,"div",3),2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,dI,t.renderConfigObj.isFirstRender))}}function fI(s,n){if(1&s&&e.nrm(0,"azt-test-audio-ui",15),2&s){const t=e.XpG(2);e.Y8G("questionObj",t.questionObj)("isShowList",!0)}}function gI(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",4)(1,"div",5),e.nrm(2,"azt-question-group-content-box",6),e.j41(3,"div",7),e.DNE(4,fI,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9),e.nrm(6,"azt-question-label-box",10)(7,"azt-question-action-box",11),e.k0s(),e.nrm(8,"azt-question-content-box",6)(9,"azt-question-answer-view-content-box",12),e.k0s()(),e.j41(10,"azt-answer-box-view-base",13),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.isShowExplain=o)}),e.k0s(),e.nrm(11,"azt-question-explain-box",14),e.k0s()}if(2&s){let t;const i=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7"),e.Y8G("id","question_render_container_"+i.questionObj.id)("ngClass",e.eq3(43,mI,i.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",i.examObj)("questionObj",i.questionObj)("renderConfigObj",i.renderConfigObj),e.R7$(2),e.Y8G("ngIf",i.questionObj.attachments.length>0),e.R7$(2),e.Y8G("examObj",i.examObj)("questionObj",i.questionObj)("renderConfigObj",i.renderConfigObj)("curQuestionIndex",i.curQuestionIndex),e.R7$(),e.Y8G("showForTeacher",!1)("curExamResultId",null!==(t=i.curExamResultId)&&void 0!==t?t:0)("examObj",i.examObj)("questionObj",i.questionObj)("renderConfigObj",i.renderConfigObj)("curQuestionIndex",i.curQuestionIndex)("orgExamObjs",e.lJ4(45,pI)),e.R7$(),e.Y8G("examObj",i.examObj)("questionObj",i.questionObj)("renderConfigObj",i.renderConfigObj),e.R7$(),e.Y8G("userAnswersObj",i.userAnswersObj)("examObj",i.examObj)("isShowOriginAnswer",i.isShowOriginAnswer)("questionObj",i.questionObj)("renderConfigObj",i.renderConfigObj),e.R7$(),e.Y8G("examObj",i.examObj)("examConfig",i.examConfig)("isTeacherRole",!1)("isShowOriginAnswer",i.isShowOriginAnswer)("questionObj",i.questionObj)("userAnswersObj",i.userAnswersObj)("notShowAnswerYet",i.notShowAnswerYet),e.R50("isShowExplain",i.isShowExplain),e.Y8G("backToLink",i.backToLink)("isOfflineMark",i.isOfflineMark)("currentTab",i.currentTab),e.R7$(),e.Y8G("isShowExplain",i.isShowExplain)("questionObj",i.questionObj)("renderConfigObj",i.renderConfigObj)}}let Wu=(()=>{var s;class n extends Uu.I{ngOnInit(){super.ngOnInit();let i=new Xu.C(!1,!1,!1);super.initData(i,this.follower,this.questionObj),this.backToLink=`/test/answer-test/${this.examObj?.tenantId??0}/${this.examObj?.categoryId??0}/${this.examObj?.hashId}/${this.curExamResultId}`}constructor(){super(),this.follower=new Pn.e,this.curQuestionIndex=0,this.isShowExplain=!1,this.isShowOriginAnswer=!1,this.isOfflineMark=!1,this.userAnswersObj={},this.notShowAnswerYet=!1,this.currentTab="multiple_choice_tab",this.backToLink="",this.checkShowFullAnswer=!1}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-standalone-for-student-at-review-page"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",curExamResultId:"curExamResultId",examConfig:"examConfig",isShowExplain:"isShowExplain",isShowOriginAnswer:"isShowOriginAnswer",isOfflineMark:"isOfflineMark",userAnswersObj:"userAnswersObj",notShowAnswerYet:"notShowAnswerYet",currentTab:"currentTab"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"box","border-none","pt-2",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"showForTeacher","curExamResultId","examObj","questionObj","renderConfigObj","curQuestionIndex","orgExamObjs"],[3,"userAnswersObj","examObj","isShowOriginAnswer","questionObj","renderConfigObj"],[3,"isShowExplainChange","examObj","examConfig","isTeacherRole","isShowOriginAnswer","questionObj","userAnswersObj","notShowAnswerYet","isShowExplain","backToLink","isOfflineMark","currentTab"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"]],template:function(i,o){if(1&i&&(e.j41(0,"div",1),e.DNE(1,hI,1,3,"div",2)(2,gI,12,46,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[qu.y,Ir.c,Yu.S,sf,Qu.$,Qh.Q,ef,of.N,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k,Cr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var af=O(21626),TI=O(14865),Vs=O(44764),rf=O(23439);class lf{constructor(n){this.commonService=n}parserEssayResult(n){let t=[],i=this.commonService.myParseJson(n??"{}")??{};return Object.entries(i).map(([a,r])=>({key:a,value:r})).forEach(a=>{let r=a.key.replace("cau","");t.push({questionIndex:isNaN(Number(r))?void 0:Number(r),questionMark:isNaN(Number(a.value))?void 0:Number(a.value)})}),t}}const bI=s=>({"skeleton-box-loading":s}),xI=s=>({"mob-web-width":s});function vI(s,n){if(1&s&&e.nrm(0,"div",3),2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,bI,t.renderConfigObj.isFirstRender))}}function yI(s,n){if(1&s&&e.nrm(0,"azt-test-audio-ui",15),2&s){const t=e.XpG(2);e.Y8G("questionObj",t.questionObj)("isShowList",!0)}}function SI(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",4)(1,"div",5),e.nrm(2,"azt-question-group-content-box",6),e.j41(3,"div",7),e.DNE(4,yI,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9),e.nrm(6,"azt-question-label-box",10)(7,"azt-question-action-box",11),e.k0s(),e.nrm(8,"azt-question-content-box",6)(9,"azt-question-answer-view-content-box",12),e.k0s()(),e.j41(10,"azt-answer-box-view-base",13),e.mxI("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.isShowExplain,o)||(a.isShowExplain=o),e.Njj(o)}),e.bIt("isShowExplainChange",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.isShowExplain=o)}),e.k0s(),e.nrm(11,"azt-question-explain-box",14),e.k0s()}if(2&s){const t=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7"),e.Y8G("id","question_render_container_"+t.questionObj.id)("ngClass",e.eq3(39,xI,t.isMobileWebView)),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.R7$(2),e.Y8G("ngIf",t.questionObj.attachments.length>0),e.R7$(2),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex),e.R7$(),e.Y8G("showForTeacher",!0)("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex)("orgExamObjs",t.orgExamObjs),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("isShowOriginAnswer",t.isShowOriginAnswer)("renderConfigObj",t.renderConfigObj),e.R7$(),e.Y8G("examObj",t.examObj)("isTeacherRole",!0)("isShowOriginAnswer",t.isShowOriginAnswer)("questionObj",t.questionObj)("userAnswersObj",t.userAnswersObj)("notShowAnswerYet",t.notShowAnswerYet)("isOfflineMark",t.isOfflineMark),e.R50("isShowExplain",t.isShowExplain),e.Y8G("currentTab",t.currentTab),e.R7$(),e.Y8G("isShowExplain",t.isShowExplain)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)}}let cf=(()=>{var s;class n extends Uu.I{ngOnInit(){super.ngOnInit();let i=new Xu.C(!1,!1,!1);super.initData(i,this.follower,this.questionObj)}constructor(){super(),this.follower=new Pn.e,this.curQuestionIndex=0,this.orgExamObjs=[],this.isShowExplain=!1,this.isOfflineMark=!1,this.isShowOriginAnswer=!1,this.userAnswersObj={},this.notShowAnswerYet=!1,this.currentTab="multiple_choice_tab"}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-standalone-for-teacher-at-review-page"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",orgExamObjs:"orgExamObjs",isShowExplain:"isShowExplain",isOfflineMark:"isOfflineMark",isShowOriginAnswer:"isShowOriginAnswer",userAnswersObj:"userAnswersObj",notShowAnswerYet:"notShowAnswerYet",currentTab:"currentTab"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"pt-2","pb-3","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"showForTeacher","examObj","questionObj","renderConfigObj","curQuestionIndex","orgExamObjs"],[3,"examObj","questionObj","isShowOriginAnswer","renderConfigObj"],[3,"isShowExplainChange","examObj","isTeacherRole","isShowOriginAnswer","questionObj","userAnswersObj","notShowAnswerYet","isOfflineMark","isShowExplain","currentTab"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"]],template:function(i,o){if(1&i&&(e.j41(0,"div",1),e.DNE(1,vI,1,3,"div",2)(2,SI,12,41,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[qu.y,Ir.c,Yu.S,sf,Qu.$,Qh.Q,ef,of.N,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k,Cr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var uf=O(7157),_f=O(38850),df=O(64437),Hu=O(72851);const wI=["mnoteContainer"],II=["aztMarkNote"],mf=s=>({display:s}),CI=s=>({border:s}),pf=s=>({"is-invalid":s}),hf=()=>({"mr-1 cursor-pointer":!0});function kI(s,n){if(1&s){const t=e.RV6();e.j41(0,"lucide-icon",20),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit;return e.Njj(o.showEssayMark=!1)}),e.k0s()}2&s&&(e.FS9("matTooltip",e.bMT(1,2,"lang_auto_anhien_phan_bai_lam_cua_cau_hoi_nay")),e.Y8G("ngClass",e.lJ4(4,hf)))}function EI(s,n){if(1&s){const t=e.RV6();e.j41(0,"lucide-icon",21),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit;return e.Njj(o.showEssayMark=!0)}),e.k0s()}2&s&&(e.FS9("matTooltip",e.bMT(1,2,"lang_auto_anhien_phan_bai_lam_cua_cau_hoi_nay")),e.Y8G("ngClass",e.lJ4(4,hf)))}function AI(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function OI(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function RI(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function FI(s,n){if(1&s&&(e.j41(0,"div",22),e.DNE(1,AI,3,3,"span",10)(2,OI,3,3,"span",10)(3,RI,3,3,"span",10),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup.controls.mark.errors.min),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup.controls.mark.errors.max),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup.controls.mark.errors.pattern)}}function jI(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",13),e.DNE(2,kI,2,5,"lucide-icon",14)(3,EI,2,5,"lucide-icon",15),e.j41(4,"span",16),e.EFF(5),e.nI1(6,"mytranslate"),e.j41(7,"span",17),e.nI1(8,"mytranslate"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.nrm(11,"input",18),e.nI1(12,"mytranslate"),e.k0s(),e.DNE(13,FI,4,3,"div",19),e.bVm()),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.Y8G("ngIf",i.showEssayMark),e.R7$(),e.Y8G("ngIf",!i.showEssayMark),e.R7$(2),e.Lme(" ",e.bMT(6,14,"lang_auto_cau")," ",(null!==(t=i.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(8,16,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",i.essMaxPoint," ",e.bMT(10,18,"lang_auto_diem_brackets"),""),e.R7$(2),e.FS9("placeholder",e.bMT(12,20,"lang_auto_nhap_diem")),e.Y8G("readonly",!o.showForTeacher)("decimal",!0)("ngClass",e.eq3(22,pf,i.essayAnswersFormGroup.controls.mark&&i.essayAnswersFormGroup.controls.mark.invalid))("value",i.essayAnswersFormGroup.controls.mark.value)("formControl",i.essayAnswersFormGroup.controls.mark),e.R7$(2),e.Y8G("ngIf",i.essayAnswersFormGroup.controls.mark.errors)}}function zI(s,n){if(1&s&&(e.j41(0,"div",12),e.DNE(1,jI,14,24,"ng-container",10),e.k0s()),2&s){const t=n.$implicit,i=n.index,o=e.XpG();e.Y8G("ngStyle",e.eq3(2,CI,i==o.questions.length-1?"none":"")),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup)}}function DI(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",23)(1,"button",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveDataMarkExercise())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.findQuestionFormInvalid()||t.loadingDataCdn&&t.files.length>0),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}function MI(s,n){if(1&s&&e.nrm(0,"azt-question-standalone-for-student-at-review-page",29),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("examConfig",o.examConfig)("questionObj",i)("curQuestionIndex",null!==(t=i.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("currentTab","essay_tab")}}function GI(s,n){if(1&s&&e.nrm(0,"azt-question-standalone-for-teacher-at-review-page",30),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("questionObj",i)("curQuestionIndex",null!==(t=i.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("orgExamObjs",o.orgExamObjs)("currentTab","essay_tab")}}function PI(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function NI(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function VI(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function LI(s,n){if(1&s&&(e.j41(0,"div",22),e.DNE(1,PI,3,3,"span",10)(2,NI,3,3,"span",10)(3,VI,3,3,"span",10),e.k0s()),2&s){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngIf",null==t.essayAnswersFormGroup.controls.mark.errors?null:t.essayAnswersFormGroup.controls.mark.errors.min),e.R7$(),e.Y8G("ngIf",null==t.essayAnswersFormGroup.controls.mark.errors?null:t.essayAnswersFormGroup.controls.mark.errors.max),e.R7$(),e.Y8G("ngIf",null==t.essayAnswersFormGroup.controls.mark.errors?null:t.essayAnswersFormGroup.controls.mark.errors.pattern)}}function BI(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",34)(2,"label",35),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",17),e.nI1(6,"mytranslate"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.EFF(9," : "),e.k0s(),e.nrm(10,"input",36),e.nI1(11,"mytranslate"),e.DNE(12,LI,4,3,"div",19),e.k0s(),e.bVm()),2&s){let t;const i=e.XpG(2),o=i.$implicit,a=i.index,r=e.XpG();e.R7$(2),e.FS9("for","cau_"+a),e.R7$(),e.Lme(" ",e.bMT(4,14,"lang_auto_nhap_diem_cau")," ",(null!==(t=o.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(6,16,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",o.essMaxPoint," ",e.bMT(8,18,"lang_auto_diem_brackets"),""),e.R7$(3),e.FS9("placeholder",e.bMT(11,20,"lang_auto_nhap_diem")),e.Y8G("readonly",!r.showForTeacher)("ngClass",e.eq3(22,pf,o.essayAnswersFormGroup.controls.mark&&o.essayAnswersFormGroup.controls.mark.invalid))("id","cau_"+a)("decimal",!0)("value",o.essayAnswersFormGroup.controls.mark.value)("formControl",o.essayAnswersFormGroup.controls.mark),e.R7$(2),e.Y8G("ngIf",o.essayAnswersFormGroup.controls.mark.errors)}}function $I(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,BI,13,24,"ng-container",10),e.j41(2,"div",31)(3,"label",32),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.nrm(6,"textarea",33),e.nI1(7,"mytranslate"),e.k0s()()),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(2),e.FS9("for","comment_"+i.id),e.R7$(),e.Lme("",e.bMT(5,8,"lang_mark_essay_add_comment_question")," ",(null!==(t=i.indexLabel)&&void 0!==t?t:0)+1,":"),e.R7$(2),e.FS9("id","comment_"+i.id),e.FS9("placeholder",e.bMT(7,10,"lang_auto_nhap_nhan_xet")),e.Y8G("readonly",!o.showForTeacher)("formControl",i.essayAnswersFormGroup.controls.comment)}}function QI(s,n){if(1&s&&(e.j41(0,"div",25)(1,"div",26),e.DNE(2,MI,1,7,"azt-question-standalone-for-student-at-review-page",27)(3,GI,1,7,"azt-question-standalone-for-teacher-at-review-page",28)(4,$I,8,12,"div",10),e.k0s()()),2&s){const t=n.$implicit,i=n.index,o=e.XpG();e.R7$(),e.Mz_("id","q_",i,""),e.Y8G("ngStyle",e.eq3(6,mf,t.showEssayMark?"block":"none")),e.R7$(),e.Y8G("ngIf",!o.showForTeacher),e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(),e.Y8G("ngIf",t.essayAnswersFormGroup)}}function qI(s,n){1&s&&(e.j41(0,"div",37)(1,"b"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()),2&s&&(e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_anh_bai_lam_tu_luan"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,"lang_auto_khong_co_du_lieu_anh_bai_lam_tu_luan_cua_thi_sinh"),"\n"))}function YI(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-mark-note",39,1),e.bIt("doneLoadData",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.doneLoadData(o))}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("dataMarkNote",t.dataMarkNote)("screenType","exam")("modeView",t.showForTeacher?"teacher":"student")}}function UI(s,n){if(1&s&&(e.qex(0),e.DNE(1,YI,2,3,"azt-mark-note",38),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",1===t.curSelectedTab||t.changeSelectedTab)}}function XI(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveDataMarkExercise())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.findQuestionFormInvalid()||t.loadingDataCdn&&t.files.length>0),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}let WI=(()=>{var s;class n extends Z.H{getMaxPoint(i){let o=this.questions.find(a=>a.id==i);return o?o.scorePerQuestion??0:0}remark(i){let o=this.questions.map(l=>({questionId:l.essayAnswersFormGroup?.controls.questionId.value,comment:l.essayAnswersFormGroup?.controls.comment.value,mark:Number(l.essayAnswersFormGroup?.controls.mark.value)})),a=JSON.stringify({type:"exam",id:this.examObj.id,user:this.examObj.tenantId});this.examResultService.apiExamResultSaveResultPost({id:this.resultID,result:i,essayResult:void 0,essayAnswers:o},a).subscribe(l=>{this.isLoading=!1,1==l.success?(this.showSuccessSnack("lang_auto_cham_diem_tu_luan_thanh_cong"),this.saveResultEvent.emit(1)):(this.commonService.snackError(l.message),this.saveResultEvent.emit(0))})}initDataMarkNote(){this.examResultObj.result?this.dataMarkNote.answer_obj={id:this.examResultObj.id??0,homeworkId:0,studentId:this.examResultObj.studentId??0,point:0,result:this.examResultObj.result,files:this.examResultObj.files,markedByTeacherId:this.examResultObj.markedByTeacherId,confirmedAt:this.examResultObj.confirmedAt,createdAt:this.examResultObj.createdAt,updatedAt:this.examResultObj.updatedAt,tenantId:this.examResultObj.tenantId}:(this.files.forEach(i=>i.url=this.sAztCommonCdnService.getMyCdn(i.url??"")),this.dataMarkNote.answer_obj={id:0,homeworkId:0,studentId:0,point:0,files:this.serializeJson(this.files)})}saveDataMarkExercise(){var i=this;return(0,H.A)(function*(){if(!i.questions.find(a=>a.essayAnswersFormGroup?.controls.mark.value))return i.showErrorSnack("lang_core_vui_long_nhap_diem_tu_luan");if(i.questions.forEach(a=>{a.essayAnswersFormGroup?.controls.mark.value||a.essayAnswersFormGroup?.controls.mark.setValue("0")}),i.isLoading=!0,!i.files.length||(i.objectResult=i.MarkNote?.exportDataMarkNote(),!i.objectResult.pages?.length&&i.files.find(a=>(0,Vs.nL)(a.mimes??"")||(0,Vs.rl)(a.mimes??"")||!(0,Vs.N6)(a.mimes??""))))return i.remark("");if(i.objectResult.pages?.length){let a=!1;for(let d=0;d<i.objectResult.pages.length;d++)if(i.objectResult.pages[d]&&i.objectResult.pages[d].draws?.length)for(let p=0;p<(i.objectResult.pages[d].draws?.length??0);p++){let f=i.objectResult.pages[d].draws?.[p]??{};f.src&&f.src.includes("base64")&&(a=!0)}a&&(yield i.uploadDrawBase64ToCdn());const r=i.serializeJson(i.objectResult),l=i.zipDataService.convertContentGzip(r),c=new Blob([l],{type:"text/plain"}),_=new File([c],"txt",{type:"text/plain"});i.apiUploadService.uploadToCdnForHomework(_).subscribe(d=>{if(!d.success)return i.showErrorSnack("lang_auto_co_loi_trong_qua_trinh_luu_du_lieu_len_cdn_vui_long_thu_lai");i.remark(i.serializeJson({urlDataMark:d.data?.url??"",version:"0.1"}))})}})()}uploadDrawBase64ToCdn(){return new Promise(i=>{if(!this.objectResult.pages)return;let o=[];this.objectResult.pages.forEach(a=>o.push(!1)),this.objectResult.pages.forEach((a,r)=>{a.draws?.length&&a.draws.forEach((l,c)=>{if(l.src&&l.src.includes("base64")){o[r]=!0;let _=(0,rf.q)(l.src);this.apiUploadService.commonUploadForMarkResult(_,`essay_note_${r}_${c}_${this.resultID}.png`,"image/png").subscribe(d=>{d.type!=af.hv.UploadProgress&&(l.src=d.data?.url,o[r]=!1),o.includes(!0)||i()})}})})})}doneLoadData(i){this.loadingDataCdn=!1}autoResizeFeedBackArea(i){const o=document.getElementById("comment_"+i);o&&setTimeout(()=>{o.style.cssText="height:auto;",o.style.cssText="height:"+(o.scrollHeight+30)+"px"},0)}findQuestionFormInvalid(){return null!=this.questions.find(i=>i.essayAnswersFormGroup?.invalid)}initEssayFormGroupQuestion(){let i=this.examResultObj.confirmedAt?new lf(this.commonService).parserEssayResult(this.examResultObj.essayResult):[],o=(this.examResultObj.confirmedAt?this.examResultObj.essayAnswerObjs:[])??[];this.questions.forEach((a,r)=>{let l=this.getMaxPoint(a.id);this.totalMaxPoint+=l,a.essMaxPoint=l,this.maxPointPerQuestion.push(a.essMaxPoint);let c=i.find(d=>d.questionIndex==r),_=o.find(d=>d.questionId==a.id)??{questionId:a.id,comment:void 0,mark:c?.questionMark};a.showEssayMark=!0,a.essayAnswersFormGroup=new g.gE({questionId:new g.MJ(a.id,{nonNullable:!0}),mark:new g.MJ(_?.mark?.toString()??"",{nonNullable:!0,validators:[g.k0.pattern("^[0-9]((.|,){0,1})[0-9]{0,8}"),g.k0.min(0),g.k0.max(a.essMaxPoint??0)]}),comment:new g.MJ(_?.comment??"",{nonNullable:!0})})})}ngOnInit(){this.initDataMarkNote(),this.followerRenderQuest.setNumQuest(this.questions.length),this.initEssayFormGroupQuestion(),super.ngOnInit()}constructor(i,o,a,r){super(),this.sAztCommonCdnService=i,this.examResultService=o,this.apiUploadService=a,this.zipDataService=r,this.orgExamObjs=[],this.questions=[],this.files=[],this.resultID=0,this.userAnswersObj={},this.curSelectedTab=0,this.changeSelectedTab=!1,this.saveResultEvent=new e.bkB,this.followerRenderQuest=new Pn.e,this.isLoading=!1,this.totalMaxPoint=0,this.maxPointPerQuestion=[],this.jsonData={},this.dataMarkNote={},this.objectResult={},this.loadingDataCdn=!0}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ri.c),e.rXU(_f._),e.rXU(df.T),e.rXU(Vi.j))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-mark-essay-new"]],viewQuery:function(i,o){if(1&i&&(e.GBs(wI,5),e.GBs(II,5)),2&i){let a;e.mGM(a=e.lsd())&&(o.mnoteContainer=a.first),e.mGM(a=e.lsd())&&(o.MarkNote=a.first)}},inputs:{showForTeacher:"showForTeacher",examObj:"examObj",examConfig:"examConfig",orgExamObjs:"orgExamObjs",questions:"questions",files:"files",resultID:"resultID",userAnswersObj:"userAnswersObj",examResultObj:"examResultObj",curSelectedTab:"curSelectedTab",changeSelectedTab:"changeSelectedTab"},outputs:{saveResultEvent:"saveResultEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:9,consts:[["mnoteContainer",""],["aztMarkNote",""],["id","essayBoxButtons",1,"flex","items-center","jusitfy-center","flex-col","p-3","rounded-md","border","border-slate-200","dark:border-darkmode-400"],[1,"grid","grid-cols-12","gap-3","pb-3","w-full","border-b","border-slate-200","dark:border-darkmode-400"],["class","col-span-12 md:col-span-6 lg:col-span-4 pr-3 border-r border-slate-200 dark:border-darkmode-400",3,"ngStyle",4,"ngFor","ngForOf"],["class","BWrap-one",4,"ngIf"],["id","showQuestionEssay"],["class","essay_qItem",4,"ngFor","ngForOf"],["class","mb-2 mt-2",4,"ngIf"],[1,"card-box","listPhotos",3,"ngStyle"],[4,"ngIf"],["class","BWrap",4,"ngIf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","pr-3","border-r","border-slate-200","dark:border-darkmode-400",3,"ngStyle"],[1,"flex","items-center"],["name","eye","size","24",3,"ngClass","matTooltip","click",4,"ngIf"],["name","eye_off","size","24",3,"ngClass","matTooltip","click",4,"ngIf"],[1,"mr-1","inline-block","flex-none",2,"min-width","130px"],[1,"maxPoint",3,"matTooltip"],["type","text","appOnlyNumber","","step",".01",1,"form-control",3,"readonly","decimal","placeholder","ngClass","value","formControl"],["class","mt-2 text-danger text-xs",4,"ngIf"],["name","eye","size","24",3,"click","ngClass","matTooltip"],["name","eye_off","size","24",3,"click","ngClass","matTooltip"],[1,"mt-2","text-danger","text-xs"],[1,"BWrap-one"],["azt-track-service","mark-essay-new-qoh8TPOQYx","id","btn-1",1,"mt-3","btn","btn-primary",3,"click","disabled"],[1,"essay_qItem"],[1,"mt-2",3,"id","ngStyle"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab",4,"ngIf"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab",4,"ngIf"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab"],[1,"block-input",2,"margin-bottom","20px"],[1,"mb-2","font-medium",3,"for"],["type","text","cols","10","autoResize","",1,"form-control","d-inline-flex","w-full","mt-1",3,"readonly","id","placeholder","formControl"],[1,"block-input",2,"margin-bottom","10px"],[1,"mr-2","font-medium",3,"for"],["type","text","appOnlyNumber","","step",".01",1,"form-control","form-input","d-inline-flex",3,"readonly","ngClass","id","decimal","placeholder","value","formControl"],[1,"mb-2","mt-2"],[3,"dataMarkNote","screenType","modeView","doneLoadData",4,"ngIf"],[3,"doneLoadData","dataMarkNote","screenType","modeView"],[1,"BWrap"],["azt-track-service","mark-essay-new-kAM88sxUxu","id","btn-2",1,"mt-3","btn","btn-primary",3,"click","disabled"]],template:function(i,o){1&i&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,zI,2,4,"div",4),e.k0s(),e.DNE(3,DI,5,6,"div",5),e.k0s(),e.j41(4,"div",6),e.DNE(5,QI,5,8,"div",7),e.k0s(),e.DNE(6,qI,6,6,"div",8),e.j41(7,"div",9,0),e.DNE(9,UI,2,1,"ng-container",10),e.k0s(),e.DNE(10,XI,5,6,"div",11)),2&i&&(e.R7$(2),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(2),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.files&&0==o.files.length),e.R7$(),e.Y8G("ngStyle",e.eq3(7,mf,o.files&&0==o.files.length?"none":"block")),e.R7$(2),e.Y8G("ngIf",o.dataMarkNote&&o.dataMarkNote.answer_obj&&o.files&&o.files.length>0),e.R7$(),e.Y8G("ngIf",o.showForTeacher))},dependencies:[Wu,cf,TI.i,x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,g.me,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,W.L,U.Id,uf.Z,q.k,Hu.j],styles:["#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]{flex:auto;display:flex;flex-wrap:wrap;padding-bottom:10px;width:100%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-right:5px;display:flex;justify-content:center;align-items:center;padding-right:5px;margin-bottom:5px;width:24%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 5px;height:30px;border-radius:3px;padding-left:5px;width:60px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, #essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]{color:#838383;margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]:hover{cursor:default}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#585858}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-radius:5px;margin-bottom:-15px!important;padding-bottom:0!important}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{margin:5px 10px 10px;padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:#2361ae2e;border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.form-control.is-invalid[_ngcontent-%COMP%]{padding-right:calc(1.5em + .15rem)!important;background-position:right calc(.375em + .02rem) center!important}.form-input[_ngcontent-%COMP%]{height:30px;width:96px}.form-mark[_ngcontent-%COMP%]{margin-left:20px}div#showQuestionEssay[_ngcontent-%COMP%]{width:100%}.BWrap[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-bottom:15px}.essay_qItem[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:30px!important}[type=number][_ngcontent-%COMP%]{appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}@media screen and (max-width: 1474px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-bottom:5px}.stt[_ngcontent-%COMP%], .maxPoint[_ngcontent-%COMP%]{font-size:12px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 768px){.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 480px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{border-right:none;margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:99%}}"]}),n})();var HI=O(13946),ff=O(25311);const JI=["mnoteContainer"],KI=s=>({display:s}),ZI=s=>({border:s}),eC=()=>({"mr-1":!0}),gf=s=>({"is-invalid":s});function tC(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function nC(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function iC(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function sC(s,n){if(1&s&&(e.j41(0,"div",18),e.DNE(1,tC,3,3,"span",19)(2,nC,3,3,"span",19)(3,iC,3,3,"span",19),e.k0s()),2&s){const t=e.XpG().index,i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.form.controls["cau"+t].errors?null:i.form.controls["cau"+t].errors.min),e.R7$(),e.Y8G("ngIf",null==i.form.controls["cau"+t].errors?null:i.form.controls["cau"+t].errors.max),e.R7$(),e.Y8G("ngIf",null==i.form.controls["cau"+t].errors?null:i.form.controls["cau"+t].errors.pattern)}}function oC(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"lucide-icon",13),e.nI1(3,"mytranslate"),e.bIt("click",function(o){const a=e.eBV(t).index,r=e.XpG();return e.Njj(r.toggleVisibility(o,a))}),e.k0s(),e.j41(4,"span",14),e.EFF(5),e.nI1(6,"mytranslate"),e.j41(7,"span",15),e.nI1(8,"mytranslate"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.nrm(11,"input",16),e.nI1(12,"mytranslate"),e.k0s(),e.DNE(13,sC,4,3,"div",17),e.k0s()}if(2&s){let t;const i=n.$implicit,o=n.index,a=e.XpG();e.Y8G("ngStyle",e.eq3(25,ZI,o==a.questions.length-1?"none":"")),e.R7$(2),e.FS9("matTooltip",e.bMT(3,15,"lang_auto_anhien_phan_bai_lam_cua_cau_hoi_nay")),e.Y8G("ngClass",e.lJ4(27,eC)),e.R7$(3),e.Lme(" ",e.bMT(6,17,"lang_auto_cau")," ",(null!==(t=i.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(8,19,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",i.essMaxPoint," ",e.bMT(10,21,"lang_auto_diem_brackets"),""),e.R7$(2),e.FS9("placeholder",e.bMT(12,23,"lang_auto_nhap_diem")),e.Mz_("formControlName","cau",o,""),e.Y8G("readonly",!a.showForTeacher)("decimal",!0)("ngClass",e.eq3(28,gf,a.form.controls["cau"+o]&&a.form.controls["cau"+o].invalid)),e.R7$(2),e.Y8G("ngIf",a.form.controls["cau"+o].errors)}}function aC(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",20)(1,"button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.getMnoteJsonData())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.form.invalid),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}function rC(s,n){if(1&s&&e.nrm(0,"azt-question-standalone-for-student-at-review-page",27),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("examConfig",o.examConfig)("questionObj",i)("curQuestionIndex",null!==(t=i.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("currentTab","essay_tab")}}function lC(s,n){if(1&s&&e.nrm(0,"azt-question-standalone-for-teacher-at-review-page",28),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.Y8G("follower",o.followerRenderQuest)("examObj",o.examObj)("questionObj",i)("curQuestionIndex",null!==(t=i.indexLabel)&&void 0!==t?t:0)("userAnswersObj",o.userAnswersObj)("orgExamObjs",o.orgExamObjs)("currentTab","essay_tab")}}function cC(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_greater_than_or_equal_to_0")," "))}function uC(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_enter_a_score_less_than_or_equal_to_the_score_of_the_question")," "))}function _C(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_mark_essay_please_do_not_enter_more_than_8_numbers_after_the_decimal_point")," "))}function dC(s,n){if(1&s&&(e.j41(0,"div",18),e.DNE(1,cC,3,3,"span",19)(2,uC,3,3,"span",19)(3,_C,3,3,"span",19),e.k0s()),2&s){const t=e.XpG(2).index,i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.form.controls["cau"+t].errors?null:i.form.controls["cau"+t].errors.min),e.R7$(),e.Y8G("ngIf",null==i.form.controls["cau"+t].errors?null:i.form.controls["cau"+t].errors.max),e.R7$(),e.Y8G("ngIf",null==i.form.controls["cau"+t].errors?null:i.form.controls["cau"+t].errors.pattern)}}function mC(s,n){if(1&s&&(e.j41(0,"div",29)(1,"form",30)(2,"label",31),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",15),e.nI1(6,"mytranslate"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.EFF(9," : "),e.k0s(),e.nrm(10,"input",32),e.nI1(11,"mytranslate"),e.DNE(12,dC,4,3,"div",17),e.k0s()()),2&s){let t;const i=e.XpG(),o=i.$implicit,a=i.index,r=e.XpG();e.R7$(),e.Y8G("formGroup",r.form),e.R7$(),e.FS9("for","cau_"+a),e.R7$(),e.Lme(" ",e.bMT(4,15,"lang_auto_nhap_diem_cau")," ",(null!==(t=o.indexLabel)&&void 0!==t?t:0)+1," "),e.R7$(2),e.FS9("matTooltip",e.bMT(6,17,"lang_auto_diem_toi_da_cho_cau_hoi_nay_theo_thang_diem_brackets")),e.R7$(2),e.Lme("(",o.essMaxPoint," ",e.bMT(8,19,"lang_auto_diem_brackets"),""),e.R7$(3),e.FS9("placeholder",e.bMT(11,21,"lang_auto_nhap_diem")),e.Mz_("formControlName","cau",a,""),e.Y8G("readonly",!r.showForTeacher)("ngClass",e.eq3(23,gf,r.form.controls["cau"+a]&&r.form.controls["cau"+a].invalid))("id","cau_"+a)("decimal",!0),e.R7$(2),e.Y8G("ngIf",r.form.controls["cau"+a].errors)}}function pC(s,n){if(1&s&&(e.j41(0,"div",22)(1,"div",23),e.DNE(2,rC,1,7,"azt-question-standalone-for-student-at-review-page",24)(3,lC,1,7,"azt-question-standalone-for-teacher-at-review-page",25)(4,mC,13,25,"div",26),e.k0s()()),2&s){const t=n.index,i=e.XpG();e.R7$(),e.Mz_("id","q_",t,""),e.R7$(),e.Y8G("ngIf",!i.showForTeacher),e.R7$(),e.Y8G("ngIf",i.showForTeacher),e.R7$(),e.Y8G("ngIf",i.showForTeacher)}}function hC(s,n){1&s&&(e.j41(0,"div",33)(1,"b"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()),2&s&&(e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_anh_bai_lam_tu_luan"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,"lang_auto_khong_co_du_lieu_anh_bai_lam_tu_luan_cua_thi_sinh"),"\n"))}function fC(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",34)(1,"button",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.getMnoteJsonData())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading||t.form.invalid),e.R7$(),e.SpI(" ",t.isLoading?e.bMT(3,2,"lang_auto_dang_luu_doing"):e.bMT(4,4,"lang_auto_luu_diem")," ")}}let gC=(()=>{var s;class n extends Z.H{parseValue(i){return this.commonService.willDeleteParseJson(this.examResultObj.essayResult??"{}")[i]}getMaxPoint(i){var o=0;for(let a=0;a<this.questions.length;a++)if(this.questions[a].id==i){o=this.questions[a].scorePerQuestion??0;break}return o}toggleVisibility(i,o){var a=i.target,r=document.getElementById(`q_${o}`);r&&("block"==r?.style.display?(r.style.display="none",a&&(a.textContent="visibility_off")):(r.style.display="block",a&&(a.textContent="visibility")))}isValidPoint(){let i=0;var o=this.form.value;for(var a in o){var r=Number(a.substring(3));o[a]>this.maxPointPerQuestion[r]&&i++}return!(i>0)}validateForm(i,o,a,r){let l="";this.form.get("cau"+r)?.valueChanges.pipe((0,HI.J)()).subscribe(([c,_])=>{if(l="string"==typeof _&&_.includes(",")?_.replace(",","."):_,isNaN(+l))this.showErrorSnack("lang_auto_yeu_cau_chi_nhap_so"),this.form.controls["cau"+r].setValue(o);else{let d=parseFloat(l);d>a&&this.showErrorSnack("lang_auto_khong_nhap_qua_so_diem_toi_da_cua_cau_hoi"),d<0&&this.showErrorSnack("lang_auto_ban_dang_nhap_nho_hon_0")}})}uploadBase64ToCDN(i,o){var a=(0,rf.q)(i);this.apiUploadService.commonUploadForMarkResult(a,`essay_note_${o}_${this.resultID}.png`,"image/png").subscribe(r=>{r.type!=af.hv.UploadProgress&&(1==r.success?(this.mnoteJsonData.pages[o].draw=r.data?.url,this.pagesCount--,0==this.pagesCount&&this.remark(JSON.stringify(this.mnoteJsonData))):this.commonService.snackError("lang_auto_luu_du_lieu_cham_bai_khong_thanh_cong"))})}uploadAll(i){this.pagesCount=0;for(let o=0;o<i.length;o++)i[o].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(JSON.stringify(this.mnoteJsonData));else for(let o=0;o<i.length;o++)i[o].draw&&this.uploadBase64ToCDN(i[o].draw,o)}sendDataToIframe(){const i=document.getElementById("mNote"),o=i?i.contentWindow:null;if(null!==o)if(this.examResultObj.confirmedAt&&this.examResultObj.result){if(this.examResultObj.result){var a=this.commonService.willDeleteParseJson(this.examResultObj.result);if(null!=a){for(let l=0;l<a.pages.length;l++)a.pages[l].backgroundImage&&(a.pages[l].backgroundImage=this.sAztCommonCdnService.getMyCdn(a.pages[l].backgroundImage)),a.pages[l].draw&&(a.pages[l].draw=this.sAztCommonCdnService.getMyCdn(a.pages[l].draw));a=JSON.stringify(a),this.examResultObj.result=a}}var r=this.checkMapBGImageWithFileLength(this.examResultObj.result??"{}");if(this.jsonData=this.commonService.willDeleteParseJson(r?this.examResultObj.result??"{}":this.addBGImageByFileUrl(this.examResultObj.result??"{}")),this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let l=0;l<this.jsonData.pages.length;l++)this.jsonData.pages[l].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[l].backgroundImage=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[l].backgroundImage)),this.jsonData.pages[l].hasOwnProperty("draw")&&(this.jsonData.pages[l].draw=this.sAztCommonCdnService.getMyCdn(this.jsonData.pages[l].draw));this.jsonData&&(this.jsonData.cmd="initMNote",this.jsonData.mode=this.iframeViewMode,this.jsonData.context="exam"),o.postMessage(this.jsonData,"*")}else{let l=[];this.files.forEach(_=>{var d=this.sAztCommonCdnService.getMyCdn(_.url);d&&l.push({backgroundImage:d})}),o.postMessage({cmd:"initMNote",pages:l,mode:this.showForTeacher?"edit":"view",context:"exam"},"*"),this.dataMarkNote.answer_obj={id:0,homeworkId:0,studentId:0,point:0,files:l}}}checkMapBGImageWithFileLength(i){var o=this.commonService.willDeleteParseJson(i);let a=!1;if(0==this.files.length)a=!0;else if(this.files.length>0&&o&&o.pages&&this.files.length==o.pages.length){let r=0;this.files.forEach((l,c)=>{o.pages[c]&&o.pages[c].backgroundImage&&o.pages[c].backgroundImage.indexOf(l.path)>-1&&r++}),r==this.files.length&&(a=!0)}return a}addBGImageByFileUrl(i){var o=this.commonService.willDeleteParseJson(i);return this.files.forEach((a,r)=>{let l=!1;if(o&&o.pages){for(var c=0;c<o.pages.length;c++)if(o.pages[c]&&o.pages[c].backgroundImage&&o.pages[c].backgroundImage.indexOf(a.path)>-1){l=!0;break}!1===l&&(o.pages[r]&&o.pages[r].id==r?o.pages[r].backgroundImage=this.sAztCommonCdnService.getMyCdn(a.url??""):o.pages.splice(r,0,{backgroundImage:this.sAztCommonCdnService.getMyCdn(a.url??"")}))}}),JSON.stringify(o)}getMnoteJsonData(){if(this.permissionService.hasMarkPointPermission("exam",this.examObj)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",this.examObj)){if(!this.isValidPoint())return void this.showErrorSnack("lang_auto_cham_diem_vuot_qua_so_diem_toi_da_vui_long_kiem_tra_lai");{let i=!1;for(const o in this.form.value)""!==this.form.value[o]&&(i=!0);if(!i)return void this.showErrorSnack("lang_core_vui_long_nhap_diem_tu_luan");for(const o in this.form.value)""===this.form.value[o]&&(this.form.value[o]=0,this.form.controls[o].setValue(0));if(this.files&&this.files.length>0){const o=document.getElementById("mNote"),a=o?o.contentWindow:null;null!==a&&a.postMessage({cmd:"getMNoteJson"},"*")}else this.isLoading=!0,this.remark("")}}else this.showErrorSnack("lang_auto_ban_khong_co_quen_cham_de_thi_nay")}remark(i){if(this.checkMapBGImageWithFileLength(i)){for(const l in this.form.value)"string"==typeof this.form.value[l]&&this.form.value[l].includes(",")&&(this.form.value[l]=this.form.value[l].replace(",","."));let r=JSON.stringify({type:"exam",id:this.examObj.id,user:this.examObj.tenantId});var a={id:this.resultID,result:i,essayResult:JSON.stringify(this.form.value)};this.examResultService.apiExamResultSaveResultPost(a,r).subscribe(l=>{1==l.success?(this.showSuccessSnack("lang_auto_cham_diem_tu_luan_thanh_cong"),this.saveResultEvent.emit(1),this.isLoading=!1):(this.commonService.snackError(l.message??""),this.saveResultEvent.emit(0),this.isLoading=!1)})}else this.showErrorSnack("lang_auto_cham_diem_tu_luan_loi_du_lieu_bai_tu_luan_dang_duoc_tai_len_vui_long_tai_lai_trang_va_doi_trong_giay_lat"),this.saveResultEvent.emit(0),this.isLoading=!1}ngOnInit(){this.whiteListMNoteIframeSrc=this.envService.getEnvValue("classliveUrl")??"";var i={};let o;this.examResultObj.confirmedAt&&(o=this.commonService.willDeleteParseJson(this.examResultObj.essayResult??"{}")),this.followerRenderQuest.setNumQuest(this.questions.length),this.questions.forEach(r=>{let l=this.getMaxPoint(r.id);this.totalMaxPoint+=l,r.essMaxPoint=l,this.maxPointPerQuestion.push(r.essMaxPoint)});for(let r=0;r<this.questions.length;r++){var a=`cau${r}`;i[a]=new g.MJ(o?o[a]:"",{validators:[g.k0.pattern("^[0-9]((.|,){0,1})[0-9]{0,8}"),g.k0.min(0),g.k0.max(this.questions[r].essMaxPoint??0)]})}this.form=new g.gE(i),this.form.valueChanges.subscribe(r=>{let l=JSON.stringify(r);l!=this.prevData&&(this.prevData=l,this.form.patchValue(r))}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}constructor(i,o,a,r,l){super(),this.permissionService=i,this.sAztCommonCdnService=o,this.envService=a,this.examResultService=r,this.apiUploadService=l,this.orgExamObjs=[],this.questions=[],this.files=[],this.userAnswersObj={},this.resultID=0,this.whiteListMNoteIframeSrc="",this.hasLoadedData=!1,this.iframeViewMode="view",this.saveResultEvent=new e.bkB,this.followerRenderQuest=new Pn.e,this.form=new g.gE({}),this.formValue={},this.isLoading=!1,this.totalMaxPoint=0,this.maxPointPerQuestion=[],this.hasSendDataToIframe=!1,this.jsonData={},this.mnoteJsonData={},this.pagesCount=0,this.dataMarkNote={},this.handleIframe=c=>{"MNoteJson"==c.data.cmd&&(this.isLoading=!0,this.mnoteJsonData=c.data.data,this.uploadAll(this.mnoteJsonData.pages)),"MNoteLoadComplete"==c.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,this.sendDataToIframe()):this.hasSendDataToIframe=!1)}}ngOnDestroy(){window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ff.p),e.rXU(ri.c),e.rXU(dl.t),e.rXU(_f._),e.rXU(df.T))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-mark-essay"]],viewQuery:function(i,o){if(1&i&&e.GBs(JI,5),2&i){let a;e.mGM(a=e.lsd())&&(o.mnoteContainer=a.first)}},inputs:{showForTeacher:"showForTeacher",examObj:"examObj",examConfig:"examConfig",orgExamObjs:"orgExamObjs",questions:"questions",files:"files",examResultObj:"examResultObj",userAnswersObj:"userAnswersObj",resultID:"resultID",whiteListMNoteIframeSrc:"whiteListMNoteIframeSrc",hasLoadedData:"hasLoadedData",iframeViewMode:"iframeViewMode"},outputs:{saveResultEvent:"saveResultEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:12,consts:[["mnoteContainer",""],["id","essayBoxButtons",1,"flex","items-center","jusitfy-center","flex-col","p-3","rounded-md","border","border-slate-200","dark:border-darkmode-400"],[1,"grid","grid-cols-12","gap-3","pb-3","w-full","border-b","border-slate-200","dark:border-darkmode-400",3,"formGroup"],["class","col-span-12 md:col-span-6 lg:col-span-4 pr-3 border-r border-slate-200 dark:border-darkmode-400",3,"ngStyle",4,"ngFor","ngForOf"],["class","BWrap-one",4,"ngIf"],["id","showQuestionEssay"],["class","essay_qItem",4,"ngFor","ngForOf"],["class","mb-2 mt-2",4,"ngIf"],[1,"card-box","listPhotos",3,"ngStyle"],["id","mNote","frameborder","0",2,"width","100%","height","100vh",3,"src"],["class","BWrap",4,"ngIf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","pr-3","border-r","border-slate-200","dark:border-darkmode-400",3,"ngStyle"],[1,"flex","items-center"],["name","eye","size","24",3,"click","ngClass","matTooltip"],[1,"mr-1","inline-block","flex-none",2,"min-width","130px"],[1,"maxPoint",3,"matTooltip"],["type","text","appOnlyNumber","","step",".01",1,"form-control",3,"readonly","decimal","placeholder","ngClass","formControlName"],["class","mt-2 text-danger text-xs",4,"ngIf"],[1,"mt-2","text-danger","text-xs"],[4,"ngIf"],[1,"BWrap-one"],["azt-track-service","mark-essay-TM1aspmGv4","id","btn-1",1,"mt-3","btn","btn-primary",3,"click","disabled"],[1,"essay_qItem"],[1,"mt-2",2,"display","block",3,"id"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab",4,"ngIf"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab",4,"ngIf"],["class","block-input","style","margin-bottom: 40px; margin-top: -20px",4,"ngIf"],[3,"follower","examObj","examConfig","questionObj","curQuestionIndex","userAnswersObj","currentTab"],[3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","orgExamObjs","currentTab"],[1,"block-input",2,"margin-bottom","40px","margin-top","-20px"],[3,"formGroup"],[1,"mr-2","font-medium",3,"for"],["type","text","appOnlyNumber","","step",".01",1,"form-control","form-input","d-inline-flex",3,"readonly","ngClass","id","decimal","placeholder","formControlName"],[1,"mb-2","mt-2"],[1,"BWrap"],["azt-track-service","mark-essay-RBBGLVIph5","id","btn-2",1,"mt-3","btn","btn-primary",3,"click","disabled"]],template:function(i,o){1&i&&(e.j41(0,"div",1)(1,"form",2),e.DNE(2,oC,14,30,"div",3),e.k0s(),e.DNE(3,aC,5,6,"div",4),e.k0s(),e.j41(4,"div",5),e.DNE(5,pC,5,5,"div",6),e.k0s(),e.DNE(6,hC,6,6,"div",7),e.j41(7,"div",8,0),e.nrm(9,"iframe",9),e.nI1(10,"safe"),e.k0s(),e.DNE(11,fC,5,6,"div",10)),2&i&&(e.R7$(),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.showForTeacher),e.R7$(2),e.Y8G("ngForOf",o.questions),e.R7$(),e.Y8G("ngIf",o.files&&0==o.files.length),e.R7$(),e.Y8G("ngStyle",e.eq3(10,KI,o.files&&0==o.files.length?"none":"block")),e.R7$(2),e.Y8G("src",e.bMT(10,8,o.whiteListMNoteIframeSrc),e.f$h),e.R7$(2),e.Y8G("ngIf",o.showForTeacher))},dependencies:[Wu,cf,x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,g.qT,g.me,g.BC,g.cb,g.j4,g.JD,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,W.L,z.JI,U.Id,uf.Z,q.k,wr.t],styles:["#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]{flex:auto;display:flex;flex-wrap:wrap;padding-bottom:10px;width:100%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-right:5px;display:flex;justify-content:center;align-items:center;padding-right:5px;margin-bottom:5px;width:24%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 5px;height:30px;border-radius:3px;padding-left:5px;width:60px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, #essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]{color:#838383;margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]:hover{cursor:default}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#585858}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.form-control.is-invalid[_ngcontent-%COMP%]{padding-right:calc(1.5em + .15rem)!important;background-position:right calc(.375em + .02rem) center!important}.form-input[_ngcontent-%COMP%]{height:30px;width:96px}.form-mark[_ngcontent-%COMP%]{margin-left:20px}div#showQuestionEssay[_ngcontent-%COMP%]{width:100%}.BWrap[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-bottom:15px}.essay_qItem[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:30px!important}[type=number][_ngcontent-%COMP%]{appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}@media screen and (max-width: 1474px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:12px}.maxPoint[_ngcontent-%COMP%]{font-size:10px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 768px){.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width: 480px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{border-right:none;margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:99%}}"]}),n})(),TC=(()=>{var s;class n{constructor(i,o,a){this.commonService=i,this.sAztCommonCdnService=o,this.answerTypeService=a}convertUrlToBase64(i){return(0,H.A)(function*(){const a=yield(yield fetch(i+"?t="+(new Date).getTime())).blob();return new Promise(r=>{const l=new FileReader;l.readAsDataURL(a),l.onloadend=()=>{r(l.result)}})})()}convertLinkToBase64(i,o,a){var r=this;return(0,H.A)(function*(){if(!o)return a;for(let c=0;c<(i?.length??0);c++)if(i?.[c].link===a)return i?.[c].convert;var l=yield r.convertUrlToBase64(a);return i?.push({convert:l,link:a}),l})()}replaceCanvasBackground(i,o){var a=this;return(0,H.A)(function*(){if(i){var r=[];for(let C=0;C<i.length;C++){var l=i[C];if(l&&0===l.isImage){var c=l.questionContentParse?.[0].content;l.questionContentParse&&(l.questionContentParse[0].content="");var _=void 0===c?[]:c.split("@[]");for(let E=0;E<_.length;E++){var d=_[E];if(!0===a.commonService.isJson(d)){var p=a.commonService.willDeleteParseJson(d);if(p.hasOwnProperty("link")){var f=document.body.offsetWidth,y=1;p.data.width>(w=f-30)&&(p.data={x:p.data.x*(y=w/p.data.width),y:p.data.y*y,width:p.data.width*y,height:p.data.height*y}),p.data={x:Math.floor(p.data.x),y:Math.floor(p.data.y),width:Math.floor(p.data.width),height:Math.floor(p.data.height)},l.questionContentParse&&(l.questionContentParse[0].content+=`<div class="background_question_${C}_${E}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(p.link))}"></div>`);var S=document.createElement("style");document.body.appendChild(S),S.textContent+=`.background_question_${C}_${E} {margin: 0 3px; width: ${p.data.width}px; height: ${p.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${C}_${E} img { margin-top: -${p.data.y}px; margin-left: -${p.data.x}px;}`}else l.questionContentParse&&(l.questionContentParse[0].content+=d)}else l.questionContentParse&&(l.questionContentParse[0].content+=d)}if(a.answerTypeService.isOneChoiceAnswer(l))for(let E=0;E<(l.answerConfigParse?.length??0);E++){var A=l.answerConfigParse?.[E].content;l.answerConfigParse&&(l.answerConfigParse[E].content="");var j=void 0===A?[]:A.split("@[]");for(let R=0;R<j.length;R++){var V=j[R];if(!0===a.commonService.isJson(V)){var N=a.commonService.willDeleteParseJson(V);N.hasOwnProperty("link")?(f=document.body.offsetWidth,y=1,N.data.width>(w=f-30)&&(N.data={x:N.data.x*(y=w/N.data.width),y:N.data.y*y,width:N.data.width*y,height:N.data.height*y}),N.data={x:Math.floor(N.data.x),y:Math.floor(N.data.y),width:Math.floor(N.data.width),height:Math.floor(N.data.height)},l.answerConfigParse&&(l.answerConfigParse[E].content+=`<div class="background_question__ans${C}_${E}_${R}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(N.link))}"></div>`),S=document.createElement("style"),document.body.appendChild(S),S.textContent+=`.background_question__ans${C}_${E}_${R} {margin: 0 3px; width: ${N.data.width}px; height: ${N.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans${C}_${E}_${R} img { margin-top: -${N.data.y}px; margin-left: -${N.data.x}px;}`):l.answerConfigParse&&(l.answerConfigParse[E].content+=V)}else l.answerConfigParse&&(l.answerConfigParse[E].content+=V)}}if(l.answerMediaParse&&l.answerMediaParse.length>0){var X=l.answerMediaParse;l.answerMediaParse="";var te=void 0===X?[]:X.split("@[]");for(let E=0;E<te.length;E++){var I=te[E];if(!0===a.commonService.isJson(I)){var w,b=a.commonService.willDeleteParseJson(I);if(b.hasOwnProperty("link"))f=document.body.offsetWidth,y=1,b.data.width>(w=f-30)&&(b.data={x:b.data.x*(y=w/b.data.width),y:b.data.y*y,width:b.data.width*y,height:b.data.height*y}),b.data={x:Math.floor(b.data.x),y:Math.floor(b.data.y),width:Math.floor(b.data.width),height:Math.floor(b.data.height)},l.answerMediaParse+=`<div class="background_question__ans_result${C}_${E}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(b.link))}"></div>`,S=document.createElement("style"),document.body.appendChild(S),S.textContent+=`.background_question__ans_result${C}_${E} {margin: 0 3px; width: ${b.data.width}px; height: ${b.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans_result${C}_${E} img { margin-top: -${b.data.y}px; margin-left: -${b.data.x}px;}`;else l.answerMediaParse+=I}else l.answerMediaParse+=I}}}}}})()}replaceCanvasBackgroundTS(i,o){var a=this;return(0,H.A)(function*(){var r=[];for(let X=0;X<i.length;X++){var l=i[X];if(0===l.isImage){var c=l.questionContentParse[0].content;l.questionContentParse[0].content="";var _=void 0===c?[]:c.split("@[]");for(let te=0;te<_.length;te++){var d=_[te];if(!0===a.commonService.isJson(d)){var p=a.commonService.willDeleteParseJson(d);if(p.hasOwnProperty("link")){var f=document.body.offsetWidth,y=1;p.data.width>(w=f-30)&&(p.data={x:p.data.x*(y=w/p.data.width),y:p.data.y*y,width:p.data.width*y,height:p.data.height*y}),p.data={x:Math.floor(p.data.x),y:Math.floor(p.data.y),width:Math.floor(p.data.width),height:Math.floor(p.data.height)},l.questionContentParse[0].content+=`<div class="background_question_${X}_${te}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(p.link))}"></div>`;var S=document.createElement("style");document.body.appendChild(S),S.textContent+=`.background_question_${X}_${te} {margin: 0 3px; width: ${p.data.width}px; height: ${p.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${X}_${te} img { margin-top: -${p.data.y}px; margin-left: -${p.data.x}px;}`}else l.questionContentParse[0].content+=d}else l.questionContentParse[0].content+=d}if(a.answerTypeService.isOneChoiceAnswer(l)&&(0==l.isImage||1==l.isImage&&l.name.startsWith("[PDFv2]")?a.replaceBackgroundAnswerConfig(l.answerConfigParse,r,X,o):a.replaceBackgroundAnswerConfig(l.answerConfigParseVer1.answerConfigV2,r,X,o)),l.answerMedia&&l.answerMedia.length>0){var A=l.answerMedia;l.answerMedia="";var j=void 0===A?[]:A.split("@[]");for(let te=0;te<j.length;te++){var V=j[te];if(!0===a.commonService.isJson(V)){var w,N=a.commonService.willDeleteParseJson(V);if(N.hasOwnProperty("link"))f=document.body.offsetWidth,y=1,N.data.width>(w=f-30)&&(N.data={x:N.data.x*(y=w/N.data.width),y:N.data.y*y,width:N.data.width*y,height:N.data.height*y}),N.data={x:Math.floor(N.data.x),y:Math.floor(N.data.y),width:Math.floor(N.data.width),height:Math.floor(N.data.height)},l.answerMedia+=`<div class="background_question__ans_result${X}_${te}"><img width="${1024*y}" height="${1024*y}" src="${yield a.convertLinkToBase64(r,o,a.sAztCommonCdnService.getMyCdn(N.link))}"></div>`,S=document.createElement("style"),document.body.appendChild(S),S.textContent+=`.background_question__ans_result${X}_${te} {margin: 0 3px; width: ${N.data.width}px; height: ${N.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans_result${X}_${te} img { margin-top: -${N.data.y}px; margin-left: -${N.data.x}px;}`;else l.answerMedia+=V}else l.answerMedia+=V}}}}return!0})()}replaceBackgroundAnswerConfig(i,o,a,r){var l=this;return(0,H.A)(function*(){for(let A=0;A<i.length;A++){var c=i[A].content;i[A].content="";var _=void 0===c?[]:c.split("@[]");for(let j=0;j<_.length;j++){var d=_[j];if(!0===l.commonService.isJson(d)){var p=l.commonService.willDeleteParseJson(d);if(p.hasOwnProperty("link")){var w=document.body.offsetWidth-30,y=1;p.data.width>w&&(p.data={x:p.data.x*(y=w/p.data.width),y:p.data.y*y,width:p.data.width*y,height:p.data.height*y}),p.data={x:Math.floor(p.data.x),y:Math.floor(p.data.y),width:Math.floor(p.data.width),height:Math.floor(p.data.height)},i[A].content+=`<div class="background_question__ans${a}_${A}_${j}"><img width="${1024*y}" height="${1024*y}" src="${yield l.convertLinkToBase64(o,r,l.sAztCommonCdnService.getMyCdn(p.link))}"></div>`;var S=document.createElement("style");document.body.appendChild(S),S.textContent+=`.background_question__ans${a}_${A}_${j} {margin: 0 3px; width: ${p.data.width}px; height: ${p.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans${a}_${A}_${j} img { margin-top: -${p.data.y}px; margin-left: -${p.data.x}px;}`}else i[A].content+=d}else i[A].content+=d}}})()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(ri.c),e.KVO(ln._))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})(),bC=(()=>{var s;class n{addIndexLabelToQuestionObjs(i){for(let o=0;o<(i?.length??0);o++)i?.[o]&&(i[o].indexLabel=o);return i}getEssayQuestionObjs(i){let o=[];for(let a=0;a<(i?.length??0);a++)this.answerTypeService.isEssayAnswer(i?.[a])&&i?.[a]&&o.push(i[a]);return o}getTrueFalseQuestionObjs(i){let o=[];for(let a=0;a<(i?.length??0);a++)(this.answerTypeService.isOneChoiceAnswer(i?.[a])||this.answerTypeService.isTrueFalseAnswer(i?.[a])||this.answerTypeService.isFillAnswer(i?.[a]))&&i?.[a]&&o.push(i[a]);return o}convertAnswersArr(i){let o={};return 0!=i.length&&i.forEach(a=>{let r=!!a.AnswerContent?.filter(l=>l.Status)?.length;a.AnswerContent&&a.AnswerContent.length&&(o[`id_${a.QuestionId}`]=r?[...a.AnswerContent]:a.AnswerContent[0].Content)}),o}mapStudentObjWithTestedObj(i,o,a){var r=this.commonService.castObj(i?.studentObj),l=o?.filter(c=>c.userId==a?.parentId);return r&&l&&l.length>0&&(r={...r,offlineMarkObj:l[0].offlineMarkObj,nameImage:l[0].nameImage??""}),a=r}mapStudentObjWithTestedObjForFrontendStudent(i,o,a){var r=this.commonService.castObj(i?.studentObj),l=o?.filter(c=>c.userId==a?.parentId);return r&&l&&l.length>0&&(r={...r,offlineMarkObj:l[0].offlineMarkObj,nameImage:l[0].nameImage??""}),a=r}constructor(i,o,a){this.commonService=i,this.zipDataService=o,this.answerTypeService=a}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(Vi.j),e.KVO(ln._))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var No=O(77247);const xC=()=>({"mr-2":!0});function vC(s,n){if(1&s&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&s){const t=n.$implicit;e.R7$(),e.SpI("* ",t.message,"")}}function yC(s,n){1&s&&(e.j41(0,"span",8),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",9),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_click")," "),e.R7$(3),e.SpI('"',e.bMT(5,6,"lang_auto_tai_ve"),'"'),e.R7$(2),e.Lme(" ",e.bMT(7,8,"lang_auto_de_tai_ve")," ",e.bMT(8,10,"lang_auto_cac_bai_lam_da_tao_thanh_cong"),". "))}function SC(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onPressTrue())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tai_ve")," "))}let Tf=(()=>{var s;class n extends kt._{onPressTrue(){this.dialogRef.close(!0)}constructor(i,o){super(i,o),this.data=i,this.dialogRef=o,this.result=i.result}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Fe.Vh),e.rXU(Fe.CP,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-push-error-student-export-docx"]],standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:25,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box-header","bg-slate-100","dark:bg-darkmode-400"],[1,"header-left"],[1,"header-right"],["azt-track-service","push-error-student-export-xUXBRZF-kY1",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["name","x","size","16",3,"ngClass"],[1,"box-content"],[1,"box-title"],[1,"box-description"],[3,"defaultHeight"],[1,"box-list"],[4,"ngFor","ngForOf"],["class","box-title",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","push-error-student-export-PEAaBsdI7jR",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","push-error-student-export-cI-G2ar81ss","class","btn w-24 btn-primary",3,"click",4,"ngIf"],["azt-track-service","push-error-student-export-cI-G2ar81ss",1,"btn","w-24","btn-primary",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",4)(7,"a",5),e.nrm(8,"lucide-icon",6),e.k0s()()(),e.j41(9,"div",7)(10,"span",8),e.EFF(11),e.nI1(12,"mytranslate"),e.j41(13,"span",9),e.EFF(14),e.k0s(),e.EFF(15),e.nI1(16,"mytranslate"),e.nI1(17,"lowercase"),e.k0s(),e.j41(18,"span",8),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"azt-mat-dialog-content",10)(22,"ul",11),e.DNE(23,vC,2,1,"li",12),e.k0s()(),e.DNE(24,yC,9,12,"span",13),e.k0s(),e.j41(25,"div",14)(26,"a",15),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.DNE(29,SC,3,3,"button",16),e.k0s()()()),2&i&&(e.R7$(4),e.JRh(e.bMT(5,12,"lang_auto_xay_ra_loi_trong_qua_trinh_xuat_docx")),e.R7$(4),e.Y8G("ngClass",e.lJ4(24,xC)),e.R7$(3),e.SpI(" ",e.bMT(12,14,"lang_auto_he_thong_tao_thanh_cong_cho")," "),e.R7$(3),e.Lme("",o.result.datas.length,"/",o.result.errs.length+o.result.datas.length,""),e.R7$(),e.SpI(" ",e.bMT(17,18,e.bMT(16,16,"lang_auto_hoc_sinh"))," "),e.R7$(4),e.SpI(" ",e.bMT(20,20,"lang_auto_danh_sach_hoc_sinh_khong_the_tao_file_ket_qua"),": "),e.R7$(2),e.Y8G("defaultHeight",60),e.R7$(2),e.Y8G("ngForOf",o.result.errs),e.R7$(),e.Y8G("ngIf",o.result.datas.length>0),e.R7$(3),e.SpI(" ",e.bMT(28,22,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("ngIf",o.result.datas.length>0))},dependencies:[Nn.U,x.MD,x.YU,x.Sq,x.bT,x.GH,g.X1,L.iI,g.YN,z.wp,Y.s,Fe.tx,F.flO,F.WGl,W.L,U.Id,q.k],styles:[".box[_ngcontent-%COMP%]{max-width:600px}.box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-radius:.375rem}.box-content[_ngcontent-%COMP%]{padding:10px 20px}.box-title[_ngcontent-%COMP%]{display:block;font-weight:500;font-size:15px;padding:10px 0}.box-description[_ngcontent-%COMP%]{color:rgb(var(--color-primary))}.box-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#f44336}"]}),n})();var wC=O(49255);function IC(s,n){1&s&&(e.nrm(0,"input",8),e.nI1(1,"mytranslate")),2&s&&e.FS9("placeholder",e.bMT(1,1,"lang_azt_addition_info_exam_department_name"))}function CC(s,n){1&s&&(e.nrm(0,"input",9),e.nI1(1,"mytranslate")),2&s&&e.FS9("placeholder",e.bMT(1,1,"lang_azt_addition_info_exam_test_note"))}function kC(s,n){1&s&&(e.nrm(0,"input",10),e.nI1(1,"mytranslate")),2&s&&e.FS9("placeholder",e.bMT(1,1,"lang_auto_thoi_gian"))}function EC(s,n){if(1&s&&(e.j41(0,"div",1)(1,"form",2),e.DNE(2,IC,2,3,"input",3),e.nrm(3,"input",4),e.nI1(4,"mytranslate"),e.DNE(5,CC,2,3,"input",5),e.nrm(6,"input",6),e.nI1(7,"mytranslate"),e.DNE(8,kC,2,3,"input",7),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf","offline"===t.type),e.R7$(),e.FS9("placeholder",e.bMT(4,6,"lang_auto_ten_truong")),e.R7$(2),e.Y8G("ngIf","offline"===t.type),e.R7$(),e.FS9("placeholder",e.bMT(7,8,"lang_auto_mon_hoc_form")),e.R7$(2),e.Y8G("ngIf","offline"===t.type)}}let AC=(()=>{var s;class n extends Z.H{constructor(){super(),this.type="offline"}initData(){this.examPrintInfoObj&&this.form?.patchValue({schoolName:this.examPrintInfoObj.schoolName,subjectName:this.examPrintInfoObj.subject,departmentName:this.examPrintInfoObj.departmentName,indetifyBox:this.examPrintInfoObj.indetifyBox,timeBox:this.examPrintInfoObj.timeBox})}ngOnInit(){this.initData()}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["add-info-print"]],inputs:{form:"form",examPrintInfoObj:"examPrintInfoObj",type:"type"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","add-info-print",4,"ngIf"],[1,"add-info-print"],[3,"formGroup"],["id","department-name","type","text","class","form-control mt-3","formControlName","departmentName",3,"placeholder",4,"ngIf"],["id","school-name","type","text","formControlName","schoolName",1,"form-control","mt-3",3,"placeholder"],["id","indetify-box","type","text","class","form-control mt-3","formControlName","indetifyBox",3,"placeholder",4,"ngIf"],["id","subject-name","type","text","formControlName","subjectName",1,"form-control","mt-3",3,"placeholder"],["id","time-box","type","text","class","form-control mt-3","formControlName","timeBox",3,"placeholder",4,"ngIf"],["id","department-name","type","text","formControlName","departmentName",1,"form-control","mt-3",3,"placeholder"],["id","indetify-box","type","text","formControlName","indetifyBox",1,"form-control","mt-3",3,"placeholder"],["id","time-box","type","text","formControlName","timeBox",1,"form-control","mt-3",3,"placeholder"]],template:function(i,o){1&i&&e.DNE(0,EC,9,10,"div",0),2&i&&e.Y8G("ngIf",o.form)},dependencies:[x.MD,x.bT,g.X1,g.qT,g.me,g.BC,g.cb,g.j4,g.JD,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,q.k,wr.t],encapsulation:2}),n})();var Ju=O(82652);const OC=(s,n)=>({"box-classrooms":s,"box-max-classrooms":n});function RC(s,n){if(1&s&&(e.j41(0,"span",32),e.EFF(1),e.k0s()),2&s){let t;const i=e.XpG();e.R7$(),e.SpI(" ",null!==(t=null==i.studentsInClassResults[0].classObj?null:i.studentsInClassResults[0].classObj.name)&&void 0!==t?t:""," ")}}function FC(s,n){if(1&s&&(e.j41(0,"div",37)(1,"div",19),e.nrm(2,"input",38),e.j41(3,"label",39,0),e.EFF(5),e.k0s()()()),2&s){let t;const i=n.$implicit,o=e.sdS(4),a=e.XpG(2);e.Y8G("hidden",1===a.studentsInClassResults.length),e.R7$(2),e.Mz_("id","select-classroom-export__",null==i.classObj?null:i.classObj.id,""),e.Y8G("value",null==i.classObj?null:i.classObj.id),e.R7$(),e.Mz_("for","select-classroom-export__",null==i.classObj?null:i.classObj.id,""),e.Y8G("matTooltip",null!==(t=null==i.classObj?null:i.classObj.name)&&void 0!==t?t:"")("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.SpI(" ",null==i.classObj?null:i.classObj.name," ")}}function jC(s,n){if(1&s&&(e.j41(0,"div",33)(1,"ng-scrollbar",34)(2,"div",35),e.DNE(3,FC,6,10,"div",36),e.k0s()()()),2&s){const t=e.XpG();e.Y8G("ngClass",e.l_i(3,OC,t.form.controls.listStudents.controls.length>21||t.studentsInClassResults.length>18,t.form.controls.listStudents.controls.length<=21&&t.studentsInClassResults.length>18)),e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngForOf",t.studentsInClassResults)}}function zC(s,n){if(1&s&&(e.j41(0,"label",39,0),e.EFF(2),e.k0s()),2&s){const t=e.sdS(1),i=e.XpG().$implicit;e.Mz_("for","select-classroom-export__",i.controls.id.value,""),e.Y8G("matTooltip",i.controls.label.value)("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.R7$(2),e.SpI(" ",i.controls.label.value," ")}}function DC(s,n){if(1&s&&(e.j41(0,"label",45),e.nrm(1,"img",46),e.k0s()),2&s){const t=e.XpG().$implicit;e.Mz_("for","select-classroom-export__",t.controls.id.value,""),e.R7$(),e.Y8G("nameImages",t.controls.nameImages.value)}}function MC(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"input",42),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onChangeStudentOption())}),e.k0s(),e.DNE(3,zC,3,6,"label",43)(4,DC,2,3,"label",44),e.k0s()()}if(2&s){const t=n.$implicit;e.R7$(),e.Y8G("formGroup",t),e.R7$(),e.Mz_("id","select-classroom-export__",t.controls.id.value,""),e.R7$(),e.Y8G("ngIf",t.controls.label.value||!t.controls.isImage.value),e.R7$(),e.Y8G("ngIf",!t.controls.label.value&&t.controls.isImage.value&&t.controls.nameImages.value)}}function GC(s,n){1&s&&(e.j41(0,"span",28),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" * ",e.bMT(2,1,"lang_core_chon_it_nhat_mot_hoc_sinh")," "))}function PC(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",50),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAskInfo=!0)}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" + ",e.bMT(2,1,"lang_testbank_test_config_add_information")," "))}function NC(s,n){if(1&s&&(e.j41(0,"div"),e.nrm(1,"add-info-print",51),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("form",t.form)("type","online")}}function VC(s,n){1&s&&(e.j41(0,"span",54),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" (",e.bMT(2,1,"lang_auto_cac_thong_tin_khong_bat_buoc"),") "))}function LC(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",52),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAskInfo=!1)}),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"lowercase"),e.DNE(5,VC,3,3,"span",53),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_auto_huy")," ",e.bMT(4,7,e.bMT(3,5,"lang_testbank_test_config_add_information"))," "),e.R7$(4),e.Y8G("ngIf",t.isAskInfo&&t.showAskInfo)}}function BC(s,n){if(1&s&&(e.j41(0,"div")(1,"span",47),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,PC,3,3,"div",48)(5,NC,2,2,"div",27)(6,LC,6,9,"div",49),e.k0s()),2&s){const t=e.XpG();e.R7$(2),e.Lme(" * ",e.bMT(3,5,"lang_core_so_hoc_sinh_da_duoc_lua_chon")," : ",t.countStudentSelect," "),e.R7$(2),e.Y8G("ngIf",t.isAskInfo&&!t.showAskInfo),e.R7$(),e.Y8G("ngIf",t.isAskInfo&&t.showAskInfo),e.R7$(),e.Y8G("ngIf",t.isAskInfo&&t.showAskInfo)}}function $C(s,n){1&s&&(e.j41(0,"div")(1,"div",16)(2,"span",28),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(3),e.SpI("* ",e.bMT(4,1,"lang_testbank_exam_result_there_is_no_result_in_exam"),""))}let bf=(()=>{var s;class n extends kt._{confirmAction(){const i=this.form.value,o=this.studentsInClassResults.find(a=>a.classObj?.id===i.classId);if(o){const a=i.listStudents?.filter(r=>r.choose).map(r=>r.id);o.results=o.results?.filter(r=>a?.includes(r.reId)),o.schoolName=this.showAskInfo?i.schoolName:void 0,o.subjectName=this.showAskInfo?i.subjectName:void 0,this.dialogRef.close(o)}else this.dialogRef.close()}setChangeSelectAll(){const i=this.form.controls.selectAll;if(i){i.setValue(!i.value);const o=this.form.controls.listStudents;o&&o.controls.forEach(a=>{a.controls.choose.setValue(i.value)}),this.countStudentSelect=i.value?o.controls.length:0}}onChangeStudentOption(){const i=this.form.controls.listStudents;let o=!0,a=0;i&&i.controls.forEach(l=>{!1===l.controls.choose.value?o=!1:a++});const r=this.form.controls.selectAll;r&&r.setValue(o),this.countStudentSelect=a}setupArrayStudent(i){this.currNameClass=i.classObj?.name??"";const o=this.form.controls.listStudents;if(o){o.clear();let a=i.results??[];if(void 0!==i.classObj?.sortType){let r=i.classObj?.sortType;a=0==r?this.sortService.sortFirstNameStudents(this.commonService.myClone(a)):99==r?this.sortService.sortTimeDESC(this.commonService.myClone(a)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(a),"pos","id")}a.forEach(r=>{(r.confirmedAt||!this.data.examHasEssay&&1==r.status)&&o.push(new g.gE({isImage:new g.MJ(!!r.nameImages,{nonNullable:!0}),nameImages:new g.MJ(r.nameImages,{nonNullable:!0}),label:new g.MJ(r.fullName,{nonNullable:!0}),id:new g.MJ(r.reId,{nonNullable:!0}),choose:new g.MJ(!1,{nonNullable:!0})}))})}}classroomChange(i){this.setupArrayStudent(i)}ngOnInit(){if(super.ngOnInit(),this.studentsInClassResults.length>0){let i=this.studentsInClassResults[0];this.form.controls.classId.setValue(i.classObj?.id),this.setupArrayStudent(i),this.form.controls.classId.valueChanges.subscribe(a=>{const r=this.form.controls.selectAll;r&&r.setValue(!1),this.countStudentSelect=0;const l=this.studentsInClassResults.find(c=>c.classObj?.id===a);l&&this.setupArrayStudent(l)})}}constructor(i,o,a){super(o,a),this.sortService=i,this.data=o,this.dialogRef=a,this.studentsInClassResults=[],this.countStudentSelect=0,this.showAskInfo=!1,this.currNameClass="",this.isAskInfo=o.isAskInfo,this.studentsInClassResults=o.studentsInClassResults.map(r=>({...r,results:r.results?.map(l=>({...l,reId:wC.P.generateIdRequired(10)}))})),this.form=new g.gE({classId:new g.MJ(0,{nonNullable:!0,validators:[g.k0.required]}),selectAll:new g.MJ(!1,{nonNullable:!0}),listStudents:new g.Yp([]),schoolName:new g.MJ("",{nonNullable:!0}),subjectName:new g.MJ("",{nonNullable:!0})})}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Ju.g),e.rXU(Fe.Vh),e.rXU(Fe.CP,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-select-student-to-export-docx"]],standalone:!0,features:[e.Vt3,e.aNF],decls:49,vars:36,consts:[["c","isDisabled"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box-header","bg-slate-100","dark:bg-darkmode-400"],[1,"header-left","font-medium"],[1,"header-right"],["azt-track-service","select-student-export-sMT2Np4C_Vf",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["name","x","size","16"],[3,"defaultHeight"],[1,"box-content"],[3,"formGroup","hidden"],[1,"col-span-12",3,"hidden"],[1,"mb-3","mt-3","font-medium","flex","items-center","px-3"],["class","text-only-class",4,"ngIf"],["class","box-min-classrooms",3,"ngClass",4,"ngIf"],[3,"hidden"],[1,"col-span-12","mt-2","px-3"],[1,"font-medium","flex","items-center"],[1,"col-span-12","mt-2","mb-2","px-3","pt-0"],[1,"form-check","mr-10"],["id","select-all-students","type","checkbox",1,"form-check-input",3,"change","checked"],["for","select-all-students",1,"form-check-label"],[1,"box-students"],["pointerEventsMethod","scrollbar",2,"width","100%","height","100%",3,"visibility"],[1,"grid","grid-cols-12","p-3",2,"align-items","center"],["class","col-span-12 md:col-span-4 mt-2","formArrayName","listStudents",4,"ngFor","ngForOf"],["class","err-color",4,"ngIf"],[4,"ngIf"],[1,"err-color"],[1,"p-3","text-right","border-t","border-slate-200","dark:border-darkmode-400"],["azt-track-service","select-student-export-H_SWYi6hbiY",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","select-student-export-FAs4GdQImfT",1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"text-only-class"],[1,"box-min-classrooms",3,"ngClass"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"grid","grid-cols-12","p-3","pt-0",2,"align-items","center"],["class","col-span-12 md:col-span-4 mt-2",3,"hidden",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4","mt-2",3,"hidden"],["formControlName","classId","type","radio",1,"form-check-input",3,"id","value"],[1,"form-check-label","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","for"],["formArrayName","listStudents",1,"col-span-12","md:col-span-4","mt-2"],[1,"form-check","mr-10",3,"formGroup"],["formControlName","choose","type","checkbox",1,"form-check-input",3,"change","id"],["class","form-check-label truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","for",4,"ngIf"],["class","form-check-label truncate",3,"for",4,"ngIf"],[1,"form-check-label","truncate",3,"for"],["appDrawNameImage","",1,"img-name-fluid",3,"nameImages"],[1,"note-color"],["azt-track-service","select-student-export-RBRnT8RJQO0","class","mt-1 font-medium more-info-color",3,"click",4,"ngIf"],["azt-track-service","select-student-export-u8TMFqclpqj","class","mt-2 font-medium more-info-color",3,"click",4,"ngIf"],["azt-track-service","select-student-export-RBRnT8RJQO0",1,"mt-1","font-medium","more-info-color",3,"click"],[3,"form","type"],["azt-track-service","select-student-export-u8TMFqclpqj",1,"mt-2","font-medium","more-info-color",3,"click"],["class","ms-1 font-medium text-xs text-slate-500",4,"ngIf"],[1,"ms-1","font-medium","text-xs","text-slate-500"]],template:function(i,o){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",5)(7,"a",6),e.nrm(8,"lucide-icon",7),e.k0s()()(),e.j41(9,"azt-mat-dialog-content",8)(10,"div",9)(11,"form",10)(12,"div",11)(13,"div",12),e.EFF(14),e.nI1(15,"mytranslate"),e.DNE(16,RC,2,1,"span",13),e.k0s()(),e.DNE(17,jC,4,6,"div",14),e.j41(18,"div",15)(19,"div",16)(20,"div",17),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"div",18)(24,"div",19)(25,"input",20),e.bIt("change",function(){return o.setChangeSelectAll()}),e.k0s(),e.j41(26,"label",21),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s()()(),e.j41(29,"div",22)(30,"ng-scrollbar",23)(31,"div",24),e.DNE(32,MC,5,5,"div",25),e.k0s()()(),e.j41(33,"div",16),e.DNE(34,GC,3,3,"span",26)(35,BC,7,7,"div",27),e.k0s()(),e.j41(36,"div",15)(37,"div",16)(38,"span",28),e.EFF(39),e.nI1(40,"mytranslate"),e.k0s()()()(),e.DNE(41,$C,5,3,"div",27),e.k0s()(),e.j41(42,"div",29)(43,"a",30),e.EFF(44),e.nI1(45,"mytranslate"),e.k0s(),e.j41(46,"button",31),e.bIt("click",function(){return o.confirmAction()}),e.EFF(47),e.nI1(48,"mytranslate"),e.k0s()()()()),2&i&&(e.R7$(4),e.JRh(e.bMT(5,22,"lang_testbank_what_to_export_select_students_export")),e.R7$(5),e.Y8G("defaultHeight",70),e.R7$(2),e.Y8G("formGroup",o.form)("hidden",0===o.studentsInClassResults.length),e.R7$(),e.Y8G("hidden",1===o.studentsInClassResults.length&&null==o.studentsInClassResults[0].classObj),e.R7$(2),e.SpI(" ",e.bMT(15,24,"lang_core_chon_lop_xuat_bai_lam_hoc_sinh"),": "),e.R7$(2),e.Y8G("ngIf",1===o.studentsInClassResults.length),e.R7$(),e.Y8G("ngIf",o.studentsInClassResults.length>1),e.R7$(),e.Y8G("hidden",0===o.form.controls.listStudents.controls.length),e.R7$(3),e.SpI("",e.bMT(22,26,"lang_core_chon_hoc_sinh_xuat_bai_lam"),":"),e.R7$(4),e.Y8G("checked",o.form.controls.selectAll.value),e.R7$(2),e.JRh(e.bMT(28,28,"lang_auto_chon_tat_ca")),e.R7$(3),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngForOf",o.form.controls.listStudents.controls),e.R7$(2),e.Y8G("ngIf",0===o.countStudentSelect),e.R7$(),e.Y8G("ngIf",o.countStudentSelect>0),e.R7$(),e.Y8G("hidden",o.form.controls.listStudents.controls.length>0),e.R7$(3),e.SpI("* ",e.bMT(40,30,"lang_auto_chua_co_thi_sinh_du_thi"),""),e.R7$(2),e.Y8G("ngIf",0===o.studentsInClassResults.length),e.R7$(3),e.SpI(" ",e.bMT(45,32,"lang_cms_common_close_btn")," "),e.R7$(2),e.Y8G("disabled",0===o.countStudentSelect),e.R7$(),e.SpI(" ",e.bMT(48,34,"lang_cms_common_confirm_btn")," "))},dependencies:[Nu.y,ye.f,AC,x.MD,x.YU,x.Sq,x.bT,x.GH,g.X1,g.qT,g.me,g.Zm,g.Fm,g.BC,g.cb,g.j4,g.JD,g.v8,L.iI,g.YN,z.wp,Y.s,Fe.tx,vt.oV,F.flO,F.WGl,W.L,U.Id,U.Yh,q.k,wr.t,Nn.U],styles:[".box[_ngcontent-%COMP%]{max-width:800px}.box-content[_ngcontent-%COMP%]{padding:10px}.box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-radius:.375rem}.err-color[_ngcontent-%COMP%]{color:#f44336;font-size:small;font-weight:500}.note-color[_ngcontent-%COMP%]{font-size:small;font-weight:500}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:150px}.more-info-color[_ngcontent-%COMP%]{color:rgb(var(--color-primary));cursor:pointer}.text-only-class[_ngcontent-%COMP%]{color:#546e7a;margin-left:5px;font-weight:400}.box-students[_ngcontent-%COMP%]{height:15vh;overflow:hidden}.box-classrooms[_ngcontent-%COMP%]{height:10vh;overflow:hidden}.box-min-classrooms[_ngcontent-%COMP%]{height:45px}.box-max-classrooms[_ngcontent-%COMP%]{height:15vh;overflow:hidden}"]}),n})();var Bi=O(66460),Ae=O(70228);class un{pushChild(n){this.child.push(n)}pushMsg(n){this.msg=n}start(n){this.run=!0,n&&(this.msg=n)}remove(){this.run=!1,this.msg="",this.child=[],this.percent=void 0}get lines(){const n=[];return this.msg&&""!==this.msg&&n.push(this.msg),`<p>${n.concat(this.lineChild).join("</p><p>")}</p>`}get lineChild(){let n=[];return this.child.filter(t=>t.run).forEach(t=>{n=n.concat(t.lines)}),n}constructor(n=!1,t="",i){this.run=n,this.msg=t,this.percent=i,this.child=[]}}var QC=O(59800),qC=O(2115),ci=function(s){return s[s.Cdn=0]="Cdn",s[s.CdnTimestamp=1]="CdnTimestamp",s[s.Rawlink=2]="Rawlink",s[s.RawlinkTimestamp=3]="RawlinkTimestamp",s}(ci||{});let xf=(()=>{var s;class n{get blockCropItemClass(){return"__CANVAS_CROP_ITEM"}get blockEssayCropItemClass(){return"_ESSAY"}isSupportedBrowser(){const i=navigator.userAgent,a=(()=>{let l=null;const c=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1]))return"IE "+((/\brv[ :]+(\d+)/g.exec(i)||[])[1]||"");if("Chrome"===c[1]){const d=i.match(/\b(OPR|Edge)\/(\d+)/);if(null!==d)return d.slice(1).join(" ").replace("OPR","Opera")}const _=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!==(l=i.match(/version\/(\d+)/i))&&_.splice(1,1,l[1]),_.join(" ")})().toString();return!(!["chrome"].includes(a.split(" ")[0].toLowerCase())||parseInt(a.split(" ")[1],10)<80)}getExtensionFile(i){if(!i)return"";const o=i.split(".");return o.length<=1?"":o[o.length-1].toLocaleLowerCase().split("_")[0]}findImageSrcInContent(i){let o="";if(i.includes("img")){const a=i.indexOf("img"),r=i.indexOf("src=",a),l=i.indexOf('"',Number(r)+5);o=i.substring(Number(r)+5,Number(l))}return o}asyncTimeout(i){return(0,H.A)(function*(){return`Waited ${yield new Promise(a=>{setTimeout(()=>a(i),i)})} milliseconds`})()}parseEssayMarkResult(i,o){let a=i.filter(c=>this.answerTypeService.isEssayAnswer(c));if(0!=a.length&&o&&o.essayResult){var r=this.commonService.willDeleteParseJson(o.essayResult);if(r){var l=Object.entries(r);for(let c=0;c<a.length;c++)a[c].essayMarkParsed=l[c][1]}}}convertToBase64(i,o){var a=this;return(0,H.A)(function*(){let r=i;switch(o){case ci.Cdn:r=a.sAztCommonCdnService.getMyCdn(i);break;case ci.CdnTimestamp:r=a.sAztCommonCdnService.getMyCdn(i)+"?t="+Date.now();break;case ci.RawlinkTimestamp:r=i+"?t="+Date.now()}const c=yield(yield fetch(r)).blob(),_=yield new Promise(d=>{const p=new FileReader;p.readAsDataURL(c),p.onloadend=()=>{d(p.result)}});return _&&"string"==typeof _?_:i})()}convertAndRetryToBase64(i){var o=this;return(0,H.A)(function*(){let a=o.getExtensionFile(i);if(["pdf","jpg","jpeg","png","gif"].includes(a)){let r;const l=[ci.Cdn,ci.CdnTimestamp,ci.Rawlink,ci.RawlinkTimestamp];try{r=yield o.convertToBase64(i,l[0])}catch{try{r=yield o.convertToBase64(i,l[1])}catch{try{r=yield o.convertToBase64(i,l[2])}catch{try{r=yield o.convertToBase64(i,l[3])}catch{console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+i),r=i}}}}return r}return i})()}eraseCanvas(i){i&&(i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),i.fillStyle="white",i.fill())}addContentToPdf(i,o){i.addImage(o,"JPEG",0,0,i.internal.pageSize.getWidth(),i.internal.pageSize.getHeight())}drawTextWrap(i,o,a,r,l){const c=i.split(" "),_=[];let d=c[0];if(o){o.font=l||`${r}px Arial`;for(let p=1;p<c.length;p++){const f=c[p];o.measureText(d+" "+f).width<a?d+=" "+f:(_.push(d),d=f)}_.push(d)}return _}essayText2LinesArr(i,o,a,r,l){const c=new RegExp("(<br>|<br/>)+","igm"),d=(this.replaceAllByRegExp(i,c,"<br>")??"").split("<br>"),p=[];for(let f=0;f<d.length;f++)p.push(this.drawTextWrap(d[f],o,a,r,l));return p}replaceAllByRegExp(i,o,a){return a?i?i.toString().replace(o,a):void 0:i}removeTagAssistiveMml(){const i=document.getElementsByTagName("mjx-assistive-mml");for(;i.length>0;)i[0].remove()}constructor(i,o,a){this.commonService=i,this.sAztCommonCdnService=o,this.answerTypeService=a}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(ri.c),e.KVO(ln._))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})(),YC=(()=>{var s;class n{processEssayResultToBase64(i){var o=this;return(0,H.A)(function*(){for(const a of i.pages??[]){if(a.draw){const r=yield o.exportPdfUtilsService.convertAndRetryToBase64(a.draw);a.draw=r}if(a.backgroundImage){const r=yield o.exportPdfUtilsService.convertAndRetryToBase64(a.backgroundImage);a.backgroundImage=r}}if(i.commentEmoji&&i.commentEmoji.length){let a="https://azota889.github.io/storage_public/mnote/",r=i.commentEmoji.length;for(let l=0;l<r;l++){let c=a+i.commentEmoji[l];const _=yield o.exportPdfUtilsService.convertAndRetryToBase64(c);i.commentEmoji[l]=_}}return i})()}convertAnswersArr(i,o){0!=i.length&&i.forEach(a=>{a.QuestionId&&a.AnswerContent&&a.AnswerContent[0]&&a.AnswerContent[0].Content&&(o[`id_${a.QuestionId}`]=a.AnswerContent[0].Content)})}findScaleDirection(i,o){return i/o>=.7070707070707071?"w":"h"}constructor(i,o,a){this.commonService=i,this.sAztCommonCdnService=o,this.exportPdfUtilsService=a}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(ri.c),e.KVO(xf))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var Ku=O(54146),UC=O(13863),vf=O(49357),XC=O(40126);let WC=(()=>{var s;class n{_saveSortTypeOfSetting(i){this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,i)}_removeSortTypeOfSetting(){this.browserStorageService.removeSimpleStorage(this.sortByStorageKey)}_getSortTypeOfSetting(i){return this.browserStorageService.getSimpleStorage(this.sortByStorageKey)==i}_getCurrentSortTypeOfSetting(){return this._getSortTypeOfSetting("isSortByNameAsc")?"isSortByNameAsc":this._getSortTypeOfSetting("isSortByMarkDesc")?"isSortByMarkDesc":this._getSortTypeOfSetting("isSortByTimeDesc")?"isSortByTimeDesc":void 0}_filterExamResultObjsByFilterSettingObjByClassroom(i,o){var a=[];return o.forEach(r=>{r.results=this._filterExamResultObjsByFilterSettingObjNotInClassroom(i,r.results??new Array),a.push(r)}),a}_filterExamResultObjsByFilterSettingObjNotInClassroom(i,o){var a=[];if(i.isMarked||i.isNotMarked||i.isOnTest||i.isNotSubmit||i.isNotTested)for(var r of o){let l=!1,c=i.isOnTest||i.isNotSubmit;i.isMarked&&1==r.isMarked&&(!c||!(1!=r.status&&(r.isMarked||r.isNotMarked)))&&(l=!0),i.isNotMarked&&1==r.isNotMarked&&(!c||!(1!=r.status&&(r.isMarked||r.isNotMarked)))&&(l=!0),i.isOnTest&&(1==r.isOnTest||0==r.status&&(r.isMarked||r.isNotMarked))&&(l=!0),i.isNotTested&&1==r.isNotTested&&(l=!0),i.isNotSubmit&&(1==r.isNotSubmit||-1==r.status&&(r.isMarked||r.isNotMarked))&&(l=!0),l&&a.push(r)}else a=o;return a}_searchExamResultObjsByFullNameInClassroom(i,o){var a=[];return this.commonService.myClone(i).forEach(l=>{var c=this._searchExamResultObjsByFullNameNotInClassroom(l.results??[],o);c.length>0&&(l.results=c,a.push(l))}),a}_searchExamResultObjsByFullNameNotInClassroom(i,o){o=this.commonService.convertVietnameseToEnglish(o).toLowerCase();var a=[];return i.forEach(r=>{-1!=this.commonService.convertVietnameseToEnglish(r.fullName??"").toLowerCase().indexOf(o)&&a.push(r)}),a}_sortExamResultObjsBySettingObjByClassroom(i,o,a){return"isSortByNameAsc"==a?this.sortService.sortFirstNameStudentsInClass(i):"isSortByTimeDesc"==a?this.sortService.sortTimeStudentsInClass(i,1):"isSortByMarkDesc"==a?this.sortService.sortMarkStudentsInClass(i,1,o):this._sortExamResultObjsBySortTypeOfClassroom(i)}_sortExamResultObjsBySettingObjNotInClassroom(i,o,a){return"isSortByNameAsc"==a?this.sortService.sortFirstNameStudents(i):"isSortByTimeDesc"==a?this.sortService.sortTimeDESC(i):"isSortByMarkDesc"==a?this.sortService.sortMarkDESC(i,o):i}_sortExamResultObjsBySortTypeOfClassroom(i){var o=i.map(a=>({...a}));return o.forEach((a,r)=>{a.results=0==a.classObj?.sortType?this.sortService.sortFirstNameStudents(a.results??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(a.results??[],"pos","id"),o[r]=a}),o}_changeExamResultStatusForAllClassroom(i,o,a){var r=[];return i.forEach((l,c)=>{l.results=this._changeExamResultStatusForOneClassroom(l.results??new Array,o),l={indexCounter:c,...l,countSubmitted:a?l.classObj?.countSubmitted:this._countTotalSubmittedOfExamResultObjs(l.results??new Array),showOnTab:l.showOnTab},r.push(l)}),r}_changeExamResultStatusForOneClassroom(i,o){var a=[...i];return a.forEach((r,l)=>{r.confirmedAt&&""!=r.confirmedAt&&r.resultId&&r.resultId>0?r.isMarked=!0:r.resultId&&r.resultId>0&&(!r.confirmedAt||""==r.confirmedAt)?r.isNotMarked=!0:r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||0!=r.status?r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||-1!=r.status?null==r.startedTest&&(r.isNotTested=!0):r.isNotSubmit=!0:r.isOnTest=!0,a[l]=r}),a.forEach((r,l)=>{r.files&&""!=r.files&&!Array.isArray(r.files)&&(r.filesParse=this.commonService.myParseJson(r.files)),a[l]=r}),a}_countTotalSubmittedOfExamResultObjs(i){var o=0;return i.forEach(a=>{(a.isMarked||a.isNotMarked)&&o++}),o}_counterTotalEssayOfQuestionObjs(i){let o=0;return i.forEach(a=>{this.answerTypeService.isEssayAnswer(a)&&o++}),o}_checkCounterEssayQuestionObjs(i){let o=0;return i.forEach(a=>{a.isEssay&&o++}),o}constructor(i,o,a,r){this.commonService=i,this.sortService=o,this.browserStorageService=a,this.answerTypeService=r,this.sortByStorageKey="exam_list_sort_by"}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(Ju.g),e.KVO(Ns.z),e.KVO(ln._))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})(),HC=(()=>{var s;class n{constructor(i,o,a,r,l,c,_,d){this.commonService=i,this.examPageResultService=o,this.permissionService=a,this.globalService=r,this.browserStorageService=l,this.gzipHelper=c,this.homeworkExamService=_,this.sAztExamResultListSortService=d}getTestedUserObjs(i,o,a){return this.globalService.startIntervalFunc(i),this.getTestedOfExamResult(i,o,"default",a)}getTestedLastMark(i,o,a){return this.globalService.startIntervalFunc(i),this.getTestedOfExamResult(i,o,"last",void 0,a)}getTestedHighestMark(i,o,a){return this.globalService.startIntervalFunc(i),this.getTestedOfExamResult(i,o,"highest",void 0,a)}getTestedFirstMark(i,o,a){return this.globalService.startIntervalFunc(i),this.getTestedOfExamResult(i,o,"first",void 0,a)}getTestedAllResult(i,o,a){return this.globalService.startIntervalFunc(i),this.getTestedOfExamResult(i,o,"all",void 0,a)}getTestedOfExamResult(i,o,a,r,l){return new xt.c(c=>{let _="tested_list_result_v2_"+o,d=this.browserStorageService.getSimpleSessionStorage(_)??"",p=this.gzipHelper.resultContentSupport(d),f=p&&this.commonService.willDeleteParseJson(p)?this.commonService.willDeleteParseJson(p):void 0;r&&d&&f?(c.next({status:200,success:1,data:f,message:"successful"}),c.complete()):this.examPageResultService.apiExamPageResultGetNewObjV2Post({examId:o,classroomIds:l,getQuestion:1}).subscribe(w=>{if(1==w.success){let S=w.data?.serverSecond??0,A=w.data?.examObj,j=w.data?.classroomWithAvatarAndStudentObjs??new Array,V=w.data?.totalAttended??0,N=w.data?.examQuestionObjs??new Array,X=w.data?.examCreatorObj,te=w.data?.offlineExamObj,I=w.data?.hasEssayQuestion,b=w.data?.totalQuestion??0,C=w.data?.offlineMixQuestionObjs,E=w.data?.canResetStudentCode,R=w.data?.hasCreateStudentCode,P=w.data?.fileTypeStr??"";this.permissionService.hasViewExamPermission("exam",A)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",A)?this.getAllExamResultObjs(i,[],o,"",k=>{if(k.hasOwnProperty("success")&&1==k.success){let ve=this.mergeStudentWithAvatar(k.studentWithResultObjs??[]),Ue={},Rt=[];ve?.forEach(Ce=>{let Ve=Ce.parentId??"0";Ue.hasOwnProperty(Ve)?Ue[Ve].push(...Ce.examResultObjs??[]):Ue[Ve]=Ce.examResultObjs??[],Rt=Rt.concat(Ue[Ve])});let $t=A?this.filterExamResultOnTest(Rt,A,S):{},mt=[],wt=[];if(this.homeworkExamService.mustInClassroom(A)&&j.length>0)for(let Ce=0;Ce<j.length;Ce++){let Ve=j[Ce].classroomObj;Ve.classroomGroup=j[Ce].classroomGroup;let je=j[Ce].studentObjs??[],It=[];if(je.length>0)for(let Le=0;Le<je.length;Le++){let Cn=je[Le].parentId??"0";this.commonService.isExistInArray(wt,je[Le].parentId)||wt.push(je[Le].parentId??"0"),Ue.hasOwnProperty(Cn)&&(Array.isArray(je[Le].examResultObjs)||(je[Le].examResultObjs=[]),je[Le].examResultObjs=this.findExamResultOfStudent(Ue[Cn],je[Le].id??"0"));let kn=$t.hasOwnProperty(je[Le].parentId??0)?$t[je[Le].parentId??0]:0;if("all"==a)if(je[Le].examResultObjs?.length)je[Le].examResultObjs?.forEach((sn,hn)=>{let _n=this.commonService.castJsonToObj(JSON.stringify(sn));_n&&(_n.resultId=_n.testStatus&&_n.testStatus>0?_n.id:0);let qi=this.createStudentWithResult(je[Le],_n,kn,b,hn,je[Le].examResultObjs?.length??0);It.push(qi)});else{let sn=this.createStudentWithResult(je[Le],void 0,kn,b,-1,0);It.push(sn)}else{let sn=this.filterExamResultByType(je[Le].examResultObjs??[],a),hn=sn.hasOwnProperty(je[Le].parentId??0)?sn[je[Le].parentId??0]:void 0,qi=this.createStudentWithResult(je[Le],hn,kn,b,(hn&&null!=hn.indexTest&&hn.indexTest>=0?hn.indexTest:"first"==a?0:(je[Le].examResultObjs?.length??0)-1)??0,je[Le].examResultObjs?.length??0);It.push(qi)}}mt.push({classObj:Ve,results:It})}let nt=[],Je=this.commonService.myClone(ve)??[];for(let Ce=0;Ce<Je?.length;Ce++)if(!this.commonService.isExistInArray(wt,Je[Ce].parentId)){let Ve=$t.hasOwnProperty(Je[Ce].parentId??0)?$t[Je[Ce].parentId??0]:0;if("all"==a)if(Je[Ce].examResultObjs?.length)Je[Ce].examResultObjs?.forEach((je,It)=>{let Le=this.commonService.castJsonToObj(JSON.stringify(je));Le&&(Le.resultId=Le.testStatus&&Le.testStatus>0?Le.id:0);let Cn=this.createStudentWithResult(Je[Ce],Le,Ve,b,It,Je[Ce].examResultObjs?.length??0);nt.push(Cn)});else{let je=this.createStudentWithResult(Je[Ce],void 0,Ve,b,-1,0);nt.push(je)}else{let je=this.filterExamResultByType(Je[Ce].examResultObjs??[],a),It=je.hasOwnProperty(Je[Ce].parentId??0)?je[Je[Ce].parentId??0]:void 0,Cn=this.createStudentWithResult(Je[Ce],It,Ve,b,(It&&null!=It?.indexTest&&It.indexTest>=0?It.indexTest:"first"==a?0:(Je[Ce].examResultObjs?.length??0)-1)??0,Je[Ce].examResultObjs?.length??0);nt.push(Cn)}}"all"!=a&&nt.sort((Ce,Ve)=>this.compareTwoDate(Ce.createdAt??"",Ve.createdAt??""));let Xe=0;(mt.length||nt.length)&&(mt.forEach(Ce=>{Ce.results?.forEach(Ve=>{let je=this.getMaxGroupId(Ve.groupPoints??[]);Xe<je&&(Xe=je)})}),nt.forEach(Ce=>{let Ve=this.getMaxGroupId(Ce.groupPoints??[]);Xe<Ve&&(Xe=Ve)})),"export_tool"==i&&l?.length&&(mt=mt.filter(Ce=>this.commonService.isExistInArray(l,Ce.classObj?.id)),this.commonService.isExistInArray(l,-1)||(nt=[]));let Ne={studentsInClassResults:mt.length>0?mt:[],studentsNotInClassResults:nt.length>0?nt:[],totalAttended:V,totalQuestion:b,totalUsers:0,examCreatorObj:X,offlineMixQuestionObjs:C,examObj:A,hasEssayQuestion:I,offlineExamObj:te,canResetStudentCode:E,hasCreateStudentCode:R,questionObjs:N,fileTypeStr:P,errorConfigClassroomPermission:w.data?.errorConfigClassroomPermission,errorMessage:w.data?.errorMessage,maxGroupId:Xe,rawQuestionObjs:w.data?.questionObjs};if("export_tool"!=i){let Ce=this.gzipHelper.zipBigContent(JSON.stringify(Ne));this.browserStorageService.saveSimpleSessionStorage(_,Ce)}c.next({status:200,success:1,data:Ne,message:"successful"}),c.complete()}else c.next({status:k.code,success:0,data:null,message:k.message??""}),c.complete()}):(c.next({status:200,success:1,data:{studentsInClassResults:[],studentsNotInClassResults:[],totalAttended:V,totalQuestion:b,hasEssayQuestion:I,totalUsers:0,examCreatorObj:X,offlineMixQuestionObjs:C,examObj:A,offlineExamObj:te,canResetStudentCode:E,hasCreateStudentCode:R,questionObjs:N,fileTypeStr:w.data?.fileTypeStr,errorConfigClassroomPermission:w.data?.errorConfigClassroomPermission,errorMessage:w.data?.errorMessage,maxGroupId:0,rawQuestionObjs:w.data?.questionObjs},message:"successful"}),c.complete())}else c.next({status:w.code,success:0,data:null,message:w.message??""}),c.complete()})})}getAllExamResultObjs(i,o,a,r,l){this.examPageResultService.apiExamPageResultGetObjsV2Get(a,"test_review"==i||"export_tool"==i?"export":"tested_list",r).subscribe(_=>{1==_.success?(_.data?.objs&&o.push(..._.data.objs),_.data?.nextPage?this.globalService.isStopIntervalFunc(i)?l({studentWithResultObjs:o,success:1}):setTimeout(()=>{this.getAllExamResultObjs(i,o,a,_.data?.nextPage??"",l)},300):l({studentWithResultObjs:o,success:1})):l({code:_.code,studentWithResultObjs:[],success:0,message:_.message??""})})}compareTwoDate(i,o){var a=new Date(i).getTime();a=isNaN(a)?0:a;var r=new Date(o).getTime();return a-(r=isNaN(r)?0:r)>0?1:a-r<0?-1:0}filterExamResultOnTest(i,o,a){var r={};return i.forEach(l=>{var c=this.commonService.myClone(l)??{};if(c.testStatus)r[c.userId??0]=c.testStatus;else if(c.startedTest&&a)if(o.endTime){var _=Math.floor(new Date(o.endTime).getTime()/1e3);r[c.userId??0]=a<=_+60*(o.minutes??0)+600?0:-1}else{var d=c.startedTest?Math.floor(new Date(c.startedTest).getTime()/1e3):0;r[c.userId??0]=a<=d+86400?0:-1}else r[c.userId??0]=0}),r}filterExamResultByType(i,o){var a={};if(i.length>1)i.forEach((l,c)=>{var _=this.commonService.myClone(l);l.testStatus&&(_.resultId=_.id,_.indexTest=c,"default"==o&&(a[_.userId??0]=_),"last"==o&&(a[_.userId??0]=_),"first"==o&&(a.hasOwnProperty(_.userId??0)||(a[_.userId??0]=_)),"highest"==o)&&(a.hasOwnProperty(_.userId??0)?(a[_.userId??0].mark??-1)<=(_.mark??-1)&&(a[_.userId??0]=_):a[_.userId??0]=_)});else{var r=this.commonService.myClone(i[0]??{});r.resultId=r.testStatus?r.id:0,r.indexTest=0,a[r.userId??0]=r}return a}findExamResultOfStudent(i,o){var a=[];return i.forEach(r=>{(r.studentId==o||null==r.studentId)&&a.push(r)}),a}addResultIdToExamResult(i){var o=[];return i.forEach(a=>{var r=this.commonService.myClone(a)??{};r.resultId=r.id,r.testStatus&&o.push(r)}),o}compareLengthWithExamQuestion(i,o){var a=this.commonService.myClone(i);if(o>0&&i.length<o)for(var r=0;r<o-i.length;r++)a.push("");return a}mergeStudentWithAvatar(i){var o=[];return i.forEach(a=>{var r=o.filter(c=>c.parentId==a.parentId);if(r&&0!=r.length)for(var l=0;l<o.length;l++)o[l].parentId==a.parentId&&(o[l].examResultObjs=o[l].examResultObjs?.concat(a.examResultObjs??[]));else o.push(a)}),o}createStudentWithResult(i,o,a,r,l,c){return{id:i.id,userId:i.parentId,studentId:i.id,identificationNumber:o?.examResultStatisticObj?.offlineMarkInfoObj?.studentCode??i.identificationNumber??0,offlineMixQuestionHashId:o?.offlineMark?.rawOfflineMixquestionId??0,studentCode:o?.offlineMark?.studentCode??0,gender:i.gender,fullName:i.fullName,avatar:i.avatar,birthday:i.birthday,resultId:o?.hasOwnProperty("resultId")?o.resultId:0,answers:o?.hasOwnProperty("answers")?o.answers:null,rightAnswer:o?.hasOwnProperty("rightAnswer")?o.rightAnswer:0,totalQuestion:o?.hasOwnProperty("totalQuestion")?o.totalQuestion:0,mark:o?.hasOwnProperty("mark")?o?.mark:null,trueFalseMark:o?.hasOwnProperty("trueFalseMark")?o.trueFalseMark:null,essayMark:o?.hasOwnProperty("essayMark")?o.essayMark:null,files:o?.hasOwnProperty("files")?o.files:null,infors:o?.hasOwnProperty("infors")?o?.infors:null,confirmedAt:o?.hasOwnProperty("confirmedAt")?o?.confirmedAt:null,startedTest:o?.hasOwnProperty("startedTest")?o?.startedTest:null,createdAt:o?.hasOwnProperty("createdAt")?o.createdAt:null,totalExamResultObjs:i.examResultObjs.length,answeredQuestions:o?.hasOwnProperty("answeredQuestions")?o.answeredQuestions:[],groupPoints:this.getGroupPoints(o?.answeredQuestions?o?.answeredQuestions:[]),classroomIds:[],eventTracks:{exitCount:o?.examTrackObj?.exitFullScreen,blurCount:o?.examTrackObj?.blurWindow},status:a,nameImages:i.nameImages,nameImage:"",answerMixObjs:this.compareLengthWithExamQuestion(o?.answerMixObjs??[],r)??[],testedTime:l+1,totalTestTime:c,subjectMarkValues:o?.subjectMarks,isOffline:o?.isOffline??!1,countEssayQuestion:this.sAztExamResultListSortService._checkCounterEssayQuestionObjs(o?.hasOwnProperty("answeredQuestions")&&o?.answeredQuestions?o.answeredQuestions:[]),checkBoxGroupControl:new g.gE({isShow:new g.MJ(!1,{nonNullable:!0}),selectedCheckbox:new g.MJ(!1,{nonNullable:!0})}),questionTypeMarks:o?.questionTypeMarks??[],schoolName:i.schoolName??"",phone:i.phone??"",email:i.email??"",userName:i?.userName??""}}getGroupPoints(i){let o=[];return i.forEach(a=>{let r=!1;for(let l=0;l<o.length;l++)o[l].id==a.groupId&&(r=!0,o[l].point+=a.correct&&a.scorePerQuestion?a.scorePerQuestion:0);!r&&a.groupId&&o.push({id:a.groupId,point:a.correct&&a.scorePerQuestion?a.scorePerQuestion:0})}),o.sort((a,r)=>(a.id??0)-(r.id??0)),o}getMaxGroupId(i){let o=[];return i.forEach(a=>{a.id&&!this.commonService.isExistInArray(o,a.id)&&o.push(a.id)}),o.length}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO($u.TE),e.KVO(ff.p),e.KVO(vf.r),e.KVO(Ns.z),e.KVO(XC.f),e.KVO(pa.Z),e.KVO(WC))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var JC=O(29086),KC=O(45356);let ZC=(()=>{var s;class n{processHomeworks(i,o){return new Promise((a,r)=>{this.reset(),this.logger.start(this.commonService.myTranslateInstant("lang_cms_common_loading")),this.answerService.apiAnswerGetStudentsHomeworkGet(o).subscribe(l=>{if(1==l.success){this.logger.remove();var c=[];l.data?.studentObjs.forEach(_=>{c.push({id:_.id,fullName:_.fullName,confirmedAt:_.confirmedAt,homeworkAnswerId:_.answer?.id,studentId:void 0,resultId:void 0,userId:void 0,nameImages:void 0,reId:"",status:void 0})}),this.sAztDialogService.open(bf,{width:"750px",restoreFocus:!1,data:{studentsInClassResults:[{classObj:l.data?.classroomObj,results:c,schoolName:void 0,subjectName:void 0}],examHasEssay:!1,isAskInfo:!1}}).afterClosed().subscribe(_=>{if(_){this.logger.start(`${this.commonService.myTranslateInstant("lang_auto_chuan_bi_xuat_ket_qua_cho")} ${1===_.results?.length?"":_.results?.length} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`);const d=new un(!0);this.logger.pushChild(d),this.loadLibAction(d).then(()=>{this.logger.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang_tao_tep_tin_ket_qua_bai_lam_cho")} ${1===_.results?.length?"":_.results?.length} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`);const p=new un(!0);this.logger.pushChild(p);const f=new Bi.n(1,{function:(v,w,y)=>{p.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tao_tep_tin_cho_hoc_sinh")} ${1===w?"":"th\u1ee9 "+(v+1)} ${y?": "+y:""}`)}});_.results?.forEach(v=>{const w=new un;p.pushChild(w),f.addTask(this,this.makeFileHomework,[o,v,w],v.fullName??"")}),f.start().then(v=>{p.remove(),0===v.errs.length?this.finishHomework(_.classObj?.name??"",l.data?.homeworkObj?.name??"",v,a,r):(this.logger.remove(),this.sAztDialogService.open(Tf,{data:{result:v},restoreFocus:!1}).afterClosed().subscribe(w=>{w&&(this.logger.start(`${this.commonService.myTranslateInstant("lang_testbank_export_pdf_by_user_processing")} ...`),this.finishHomework(_.classObj?.name??"",l.data?.homeworkObj?.name??"",v,a,r))}))})}).catch(p=>{this.logger.remove(),r(p)})}})}else this.logger.remove(),r(new Error(this.commonService.myTranslateInstant(l.message)))})})}processClasses(i,o){return new Promise((a,r)=>{let l;switch(this.reset(),this.logger.start(this.commonService.myTranslateInstant("lang_cms_common_loading")),o){case"highest":l=this.testedListApiService.getTestedHighestMark("export_tool",i);break;case"first":l=this.testedListApiService.getTestedFirstMark("export_tool",i);break;default:l=this.testedListApiService.getTestedLastMark("export_tool",i)}l.subscribe(c=>{if(1==c.success){this.logger.remove();let _=!!c.data?.questionObjs?.filter(p=>this.answerTypeService.isEssayAnswer(p)).length,d=[];if(c.data?.studentsInClassResults?.forEach(p=>{let f=[];p.results?.forEach(v=>{f.push({id:v.id?Number(v.id):void 0,fullName:v.fullName??"",confirmedAt:v.confirmedAt,studentId:v.studentId?Number(v.studentCode):void 0,resultId:v.resultId,userId:v.userId?.toString(),nameImages:v.nameImages,reId:"",status:v.status})}),d.push({classObj:p.classObj,results:f,schoolName:void 0,subjectName:void 0})}),c.data?.studentsNotInClassResults&&c.data?.studentsNotInClassResults?.length>0){let p=[];c.data.studentsNotInClassResults.forEach(f=>{p.push({id:f.id?Number(f.id):void 0,fullName:f.fullName??"",confirmedAt:f.confirmedAt,studentId:f.studentId?Number(f.studentCode):void 0,resultId:f.resultId,userId:f.userId?.toString(),nameImages:f.nameImages,reId:"",status:f.status})}),d.push({classObj:{id:0,name:this.commonService.myTranslateInstant("lang_auto_tu_do")??""},results:p,schoolName:void 0,subjectName:void 0})}this.sAztDialogService.open(bf,{data:{studentsInClassResults:d,examHasEssay:_,isAskInfo:!0},restoreFocus:!1,width:"750px"}).afterClosed().subscribe(p=>{p?this.sAztDialogService.open(QC.T,{data:{transactionType:"export-docx",times:p.results?.length,returnUrl:this.commonService.getCurrentUrlWithoutLocale()},hasBackdrop:!1}).afterClosed().subscribe(f=>{if("cancel"==f||"upgrade"==f)return this.logger.remove(),void a();this.expandInfoParse=this.commonService.castJsonToObj(c.data?.examObj?.expandInfo??"{}")??{},this.logger.start(`${this.commonService.myTranslateInstant("lang_auto_xuat_ket_qua_cho")} ${1===p.results?.length?"":p.results?.length} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`),this.processConvertDataClassroom(i,p,p.classObj?.name??"",c.data?.examObj,p.classObj?.id).then(()=>{this.logger.remove(),a()}).catch(w=>{this.logger.remove(),r(w)})}):(this.logger.remove(),a())})}else this.logger.remove(),r(new Error(this.commonService.myTranslateInstant(c.message)??""))})})}processUser(i,o,a,r,l,c=!0,_,d,p,f,v){return new Promise((w,y)=>{this.reset(),l=l||this.logger,l?.start(`${this.commonService.myTranslateInstant("lang_auto_chuan_bi_xuat_ket_qua_cho")} ${this.commonService.myTranslateInstant("lang_auto_hoc_sinh")}`);const S=new un(!0);l?.pushChild(S),this.loadLibAction(S).then(()=>{l?.pushMsg(this.commonService.myTranslateInstant("lang_cms_common_loading")??""),this.examResultService.apiExamResultGetLastResultGet(i,a??"",r??"",o,v).subscribe(A=>{if(1==A.success){this.expandInfoParse=this.commonService.castJsonToObj(A.data?.examObj?.expandInfo??"{}")??{},l?.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang")} ${this.commonService.myTranslateInstant("lang_auto_tao_tep_tin_cho_hoc_sinh")}`);let j=this.commonService.myTranslateInstant("lang_auto_tu_do")??"";const V=A.data?.studentObj;l?.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang")} ${this.commonService.myTranslateInstant("lang_auto_tao_tep_tin_cho_hoc_sinh")} ${V?.fullName??""}`);let N="";N=A.data?.classroomObj?A.data?.classroomObj.name??j:j;const X=A.data?.examTracks,te=A.data?.examObj,I=A.data?.examResultObj,b=this.commonService.castJsonToClassObjs(Tr.I,JSON.stringify(A.data?.questionObjs))??[];let C=0,E=0;for(let ve=0;ve<b.length;ve++)b[ve].correctAnswer=this.commonService.isExistInArray(A.data?.correctQuestionIds,b[ve].id),b[ve].indexLabel=ve+(te?.startQuestionIndex??1),te?.resetQuestionIndex&&b[ve].groupInfo&&b[ve].groupInfo?.groupId&&(b[ve].groupInfo&&C!=b[ve].groupInfo?.groupId&&(C=b[ve].groupInfo?.groupId??0,E=0),b[ve].labelIndex=E+(te?.startQuestionIndex??1),E++);const R={};let P=this.commonService.castJsonToObj(A.data?.examResultObj?.answers??"");this.exportPdfConvertDataService.convertAnswersArr(P??[],R);const k=new un;l?.pushChild(k),this.processConvertDataUser(k,b,V,I).then(ve=>{if(ve){var Ue=0;this.convertDataMarkNote(ve?.resultTeacherDraw).then(Rt=>{this.loadTeacherDrawResult(Rt,l??new un,V?.fullName??this.commonService.myTranslateInstant("lang_cms_test_offline_title")??"",ve).then($t=>{ve=$t,k.remove();const mt=new un(!0,this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_file_word")+`...${Ue}%`);l?.pushChild(mt);let wt=[];wt.push({content:this.getLineInfoData(N,te,X,I,V,b,ve,_,d).join("<br/>")+"<br/><br/><br/>",answers:[]}),wt=wt.concat(this.startGenUserLineFile(I,b,ve,p,f));var nt=0;this.sAztDocxService.exportToDocxBinary((0,Ae.Wn)(wt),{isHeadless:!0},(Je,Xe,Ne)=>{new Promise(Ce=>{setTimeout(()=>{0==Je&&(Ue=nt),nt=Je/Xe*50+Ue;const Ve=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_file_word")+"..."+Math.floor(nt)+"%";mt?.pushMsg(Ve)}),Ce(!0)})}).then(Je=>{const Xe=new Blob([Je],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});let Ne=this.commonService.createFileNameExportFile([V?.fullName??this.commonService.myTranslateInstant("lang_cms_test_offline_title")??"",I?.id?I.id.toString():""])+"_test_result";if(c)if(ve.mediaAnswerWraps.concat(ve.mediaWraps).length>0){const Ce=new No;Ce.file(Ne+".docx",Xe),ve.mediaAnswerWraps.concat(ve.mediaWraps).forEach(Ve=>{const je=new Blob([Ve]);Ce.file("attachments/"+this.replaceParamFileName(Ve.name),je)}),Ce.generateAsync({type:"blob"}).then(Ve=>{let je=this.commonService.createFileNameExportFile([N,Ne])+"_attachments_exam_result.zip";this.shareFileFlutterService.shareFileWithBlob(Ve,je),l?.remove(),w()},Ve=>{l?.remove(),w(Ve)})}else this.shareFileFlutterService.shareFileWithBlob(Xe,Ne+".docx"),l?.remove(),w();else l?.remove(),w({name:Ne,blob:Xe,medias:ve.mediaAnswerWraps.concat(ve.mediaWraps)})})})})}}).catch(ve=>{l?.remove(),y(ve)})}else l?.remove(),y(new Error(this.commonService.myTranslateInstant(A.message)))})}).catch(A=>{l?.remove(),y(A)})})}finishClassroom(i,o,a,r,l){if(a.length>1){const c=new No;a.forEach(_=>{_.medias.length>0?(c.file(_.name+"/"+_.name+".docx",_.blob),_.medias.forEach(d=>{const p=new Blob([d]);c.file(_.name+"/attachments/"+this.replaceParamFileName(d.name),p)})):c.file(_.name+".docx",_.blob)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([i,o])+"_exam_result.zip";this.shareFileFlutterService.shareFileWithBlob(_,d),r()},_=>{r(_)})}else if(a[0].medias.length>0){const c=new No;c.file(a[0].name+"/"+a[0].name+".docx",a[0].blob),a[0].medias.forEach(_=>{const d=new Blob([_]);c.file(a[0].name+"/attachments/"+this.replaceParamFileName(_.name),d)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([i,o])+"_attachments_exam_result.zip";this.shareFileFlutterService.shareFileWithBlob(_,d),r()},_=>{r(_)})}else this.shareFileFlutterService.shareFileWithBlob(a[0].blob,a[0].name+".docx"),r()}finishHomework(i,o,a,r,l){if(1===a.datas.length)if(a.datas[0].medias.length>0){const c=new No;c.file(a.datas[0].name+"/"+a.datas[0].name+".docx",a.datas[0].blob),a.datas[0].medias.forEach(_=>{const d=new Blob([_]);c.file(a.datas[0].name+"/attachments/"+this.replaceParamFileName(_.name),d)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([i,a.datas[0].name])+"_attachments_exam_result.zip";this.logger.remove(),this.shareFileFlutterService.shareFileWithBlob(_,d),r()},_=>{this.logger.remove(),r(_)})}else this.shareFileFlutterService.shareFileWithBlob(a.datas[0].blob,a.datas[0].name+".docx"),this.logger.remove(),r();else{this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_nen_zip_cac_bai_lam_cua_hoc_sinh")??"");const c=new No;a.datas.forEach(_=>{_.medias.length>0?(c.file("results/"+_.name+"/"+_.name+".docx",_.blob),_.medias.forEach(d=>{const p=new Blob([d]);c.file("results/"+_.name+"/attachments/"+this.replaceParamFileName(d.name),p)})):c.file("results/"+_.name+".docx",_.blob)}),c.generateAsync({type:"blob"}).then(_=>{let d=this.commonService.createFileNameExportFile([i,o])+"_homework_result.zip";this.shareFileFlutterService.shareFileWithBlob(_,d),this.logger.remove(),r()},_=>{this.logger.remove(),l(_)})}}makeFileHomework(i,o,a){return new Promise((r,l)=>{a.start(this.commonService.myTranslateInstant("lang_cms_common_loading")??""),this.answerService.apiAnswerGetObjGet(i,o.homeworkAnswerId??0).subscribe(c=>{if(a.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_giai_nen_ket_qua_bai_lam")??""),this.zipDataService.convertSubmittedAnswersObj(c.data?.answerObj),c.data?.answerObj){a.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_tep_tin")??"");let d=this.commonService.castJsonToObj(c.data.answerObj.result??"")??{};this.convertDataMarkNote(d).then(p=>{this.loadTeacherDrawResult(p,a,o.fullName??"").then(f=>{a.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_tep_tin")??"");let v=[];[`<b>${this.commonService.myTranslateInstant("lang_auto_ho_va_ten")}</b>: ${c.data?.studentObj?.fullName} <br/>`,`<b>${this.commonService.myTranslateInstant("lang_auto_lop_hoc")}</b>: ${c.data?.classroomObj?.name} <br/>`,`<b>${this.commonService.myTranslateInstant("lang_auto_bai_tap")}</b>: ${c.data?.homeworkObj?.name} <br/>`,`<b>${this.commonService.myTranslateInstant("lang_auto_ma_bai_lam")}</b>: ${c.data?.answerObj?.id} <br/>`].forEach(y=>{v.push({content:y,answers:[]})});let w=this.commonService.castJsonToObj(c.data?.answerObj?.resultNote??"");if(w){const y=[{mark:1e3,lang:"lang_auto_dat"},{mark:1001,lang:"lang_auto_chua_dat"},{mark:2e3,lang:"lang_auto_hoan_thanh"},{mark:2001,lang:"lang_auto_chua_hoan_thanh"},{mark:3e3,lang:"lang_auto_hoan_thanh_tot"}],S=document.createElement("p");S.innerText=this.commonService.myTranslateInstant("lang_point")??"",S.setAttribute("docx-style",Ae.$s.get("TB_RESULT_TXT"));const A=document.createElement("p");let j=c.data?.answerObj?.point;y.forEach(X=>{X.mark===j&&(j=this.commonService.myTranslateInstant(X.lang))}),A.innerText=j?.toString()??"",A.setAttribute("docx-style",Ae.$s.get("TB_RESULT_POINT"));const V=document.createElement("p");V.setAttribute("docx-style",Ae.$s.get("TB_RESULT_TXT")),V.innerText=this.commonService.myTranslateInstant("lang_homework_homework_frontend_submit_homework_comment")??"";const N=document.createElement("span");N.setAttribute("docx-style",Ae.$s.get("TB_RESULT_COMMENT")),0===w?.IsHideMark&&(N.innerText=this.getTextContentInTagHTML(w.Note),f.resultTeacherDraw?.commentEmoji&&(N.appendChild(document.createElement("br")),f.resultTeacherDraw.commentEmoji.forEach(X=>{if(f.canvasList[X]){const te=new Image;te.src=f.canvasList[X].toDataURL(),te.style.width=f.canvasList[X].width/5+"px",te.style.height=f.canvasList[X].height/5+"px",N.appendChild(te)}}))),v.push({content:Ae.$s.makeHeaderTable([S,A],[V,N]),answers:[]})}v=v.concat(this.getLineImageAnswer(f)),this.sAztDocxService.exportToDocxBinary((0,Ae.Wn)(v),{isHeadless:!0},(y,S,A)=>{}).then(y=>{a.remove();const S=new Blob([y],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});let A=`${this.commonService.convertVietnameseToEnglish(o.fullName??"")}_${c.data?.answerObj?.id??0}`;r({name:A,blob:S,medias:f.mediaAnswerWraps.concat(f.mediaWraps)})})}).catch(f=>{a.remove(),l(f)})})}else a.remove(),l(new Error(this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_ket_qua_hoc_sinh")))})})}processConvertDataClassroom(i,o,a,r,l){return new Promise((c,_)=>{const d=new Bi.n(1,{function:(v,w)=>{this.logger.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_xuat_ket_qua_cho_hoc_sinh")}${1===w?"":` (${v+1}/${w})`}`),this.logger.percent=v/w}},1e3),p=[];let f=this.homeworkExamService.isOfflineExam(r);o.results?.forEach(v=>{d.addTask(this,()=>new Promise((w,y)=>{const S=new un(!0,"");this.logger.pushChild(S),this.processUser(i,Number(v.resultId),v.userId,v.studentId?.toString(),S,!1,o.schoolName,o.subjectName,f,void 0,l).then(A=>{A?(S.remove(),p.push(A),w()):(S.remove(),y(new Error))}).catch(A=>{S.remove(),y(A)})}))}),d.start().then(v=>{v.errs.length>0?(this.logger.remove(),v.datas=p,this.sAztDialogService.open(Tf,{data:{result:v},restoreFocus:!1}).afterClosed().subscribe(w=>{w&&(this.logger.start(`${this.commonService.myTranslateInstant("lang_testbank_export_pdf_by_user_processing")} ...`),this.finishClassroom(a,r?.name??"",p,c,_))})):this.finishClassroom(a,r?.name??"",p,c,_)})})}processConvertDataUser(i,o,a,r){return new Promise((l,c)=>{let _={canvasList:[],mediaWraps:[],mediaAnswerWraps:[],isExportAnsMedia:!0},d=(this.commonService.myParseJson(r?.files??"[]")??[]).filter(A=>(0,Vs.rl)(A.mimes??"")||(0,Vs.nL)(A.mimes??""));i.start();const S=new Bi.n(1,{function:(A,j,V)=>{i.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tien_trinh")} ${A+1}/${j}: ${V}`)}});S.addTask(this,()=>new Promise((A,j)=>{const V=new un(!0);i.pushChild(V),this.questionRenderService.parseRenderQuestions(o,N=>{V.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tien_do_tai_du_lieu_cau_hoi")}: ${Math.floor(N)}%`)},void 0,50,!0).then(()=>{V.remove(),A()}).catch(N=>{const X=te=>{Object.prototype.hasOwnProperty.call(te,"type")&&"LOAD_IMAGE"===te.type?j(new Error(`${te.message} ${this.commonService.trimMidLimitLength(te.data[0],30)}`)):j(N)};V.remove(),Array.isArray(N)?X(N[0]):X(N)})}),[],this.commonService.myTranslateInstant("lang_auto_tai_du_lieu_cau_hoi")),r&&r.result&&S.addTask(this,()=>new Promise((A,j)=>{this.loadTeacherDrawResult(this.commonService.castJsonToObj(r?.result??"")??{},i,a?.fullName??"").then(V=>{_=V,A()}).catch(V=>{j(V)})}),[],this.commonService.myTranslateInstant("lang_auto_tai_du_lieu_cham_tu_luan_cua_giao_vien")),S.addTask(this,()=>new Promise((A,j)=>{a?this.loadNameImage(a).then(V=>{a=V,A()}).catch(V=>{j(V)}):j(new Error)}),[],this.commonService.myTranslateInstant("lang_auto_tai_hinh_anh_ten_hoc_sinh")),_.isExportMedia&&S.addTask(this,()=>new Promise((A,j)=>{const V=new un(!0);i.pushChild(V);const N=new Bi.n(3,{function:(X,te)=>{V.pushMsg(`${this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin")} (${X}/${te})`)}},100);o.forEach(X=>{X.attachments&&X.attachments.length>0&&X.attachments.forEach(te=>{N.addTask(this,this.loadAztFile,[te,_,"att"])})}),N.start().then(X=>{0===X.errs.length?(V.remove(),A()):(V.remove(),j(X.errs[0]))})}),[],this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin_dinh_kem")),d.length&&S.addTask(this,()=>new Promise((A,j)=>{const V=new un(!0);i.pushChild(V);const N=new Bi.n(3,{function:(X,te)=>{V.pushMsg(`${this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin")} (${X}/${te})`)}},100);d.forEach(X=>{N.addTask(this,this.loadAztFile,[X,_,"ans"])}),N.start().then(X=>{0===X.errs.length?(V.remove(),A()):(V.remove(),j(X.errs[0]))})}),[],this.commonService.myTranslateInstant("lang_core_dang_tai_tep_tin_dinh_kem_tu_luan")),S.start().then(A=>{i.remove(),0===A.errs.length?(this.exportPdfUtilsService.parseEssayMarkResult(o,r),l(_)):c(A.errs[0])})})}hasMultiple(i){let o=!1;for(let a=0;a<i.length;a++)if(this.answerTypeService.isOneChoiceAnswer(i[a])){o=!0;break}return o}hasEssay(i){let o=!1;for(let a=0;a<i.length;a++)if(this.answerTypeService.isEssayAnswer(i[a])){o=!0;break}return o}getLineInfoData(i,o,a,r,l,c,_,d,p){const f=[];f.push(Ae.$s.makeHeaderTable([Ae.$s.createLineCenterBold(d||`{ ${this.commonService.myTranslateInstant("lang_testbank_utils_footer_information_school")?.toUpperCase()} }`)],[Ae.$s.createLineCenterBold(o?.name??"{"+this.commonService.myTranslateInstant("lang_notify_list_tested")?.toUpperCase()+"}"),Ae.$s.createLineCenterBold(p||"{"+this.commonService.myTranslateInstant("lang_auto_mon_hoc")?.toUpperCase()+"}"),Ae.$s.createLineCenterBold(o?.minutes&&o?.minutes>0?(this.commonService.myTranslateInstant("lang_auto_thoi_gian_lam_bai")??"")+": "+o?.minutes+" "+this.commonService.myTranslateInstant("lang_auto_minute")+" ("+this.commonService.myTranslateInstant("lang_core_khong_ke_thoi_gian_giao_de")+")":this.commonService.myTranslateInstant("lang_auto_thoi_gian_lam_bai")+": "+this.commonService.myTranslateInstant("lang_auto_khong_gioi_han"))]));const v=c.filter(w=>this.answerTypeService.isEssayAnswer(w)).length;return l&&l.nameImages&&parseInt(l?.id??"0")<=0?f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_thi_sinh")}</b>: <img src="${l?.nameImages.url}" />`):f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_thi_sinh")}</b>: ${l?.fullName}`),f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_lop")}</b>: ${i}`),o?.subjectMarks&&r?.subjectMarkValues&&r.subjectMarkValues.forEach((w,y)=>{f.push(`<b>${this.commonService.myTranslateInstant("lang_combine_exam_component")}${y+1} </b>: ${w}/10`)}),this.hasMultiple(c)&&f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_trac_nghiem")}</b>: ${r?.trueFalseMark} (${r?.rightAnswer}/${(r?.totalQuestion??0)-v} ${this.commonService.myTranslateInstant("lang_auto_cau_brackets")}`),this.hasEssay(c)&&f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_tu_luan")}</b>: ${r?.essayMark+" ("+v+" "+this.commonService.myTranslateInstant("lang_auto_cau_brackets")}`),this.hasEssay(c)&&_.resultTeacherDraw&&f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_so_file_da_nop")}</b>: ${this.commonService.castJsonToObj(r?.files??"")?.length??"0"}`),a&&0!=o?.autoMonitor&&(f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_so_lan_thoat_man_hinh")}</b>: ${a.exitFullScreen}`),f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_so_lan_thoat_trinh_duyet")}</b>: ${a.blurWindow}`)),f.push(`<b>${this.commonService.myTranslateInstant("lang_auto_ma_bai_lam")}</b>: ${r?.id}`),f}startGenUserLineFile(i,o,a,r,l){let c=[];const _=this.commonService.castJsonToObj(i?.answers??"");return _&&o.forEach((d,p)=>{d.groupInfo&&d.groupInfo.isFirstInGroup&&c.push({content:`<br/><b>${d.groupInfo.groupContent}</b><br/>`,answers:[]}),d.attachments&&a.isExportMedia&&d.attachments.forEach(v=>{c.push({content:`[${this.commonService.myTranslateInstant("lang_core_dinh_kem_file_tai")} attachments/${this.replaceParamFileName(v.name)}]`,answers:[]})}),c=c.concat(this.genLineQuestion(d,r));const f=this.mapQuestResultObj(d,_??[]);switch(d.answerType){case 1:c=c.concat(this.genLineAnswerType1(d,f));break;case 3:let v=i?.confirmedAt?new lf(this.commonService).parserEssayResult(i.essayResult):[],w=(i?.confirmedAt?i?.essayAnswerObjs:[])??[],y=v.find(A=>A.questionIndex==p),S=w.find(A=>A.questionId==d.id)??{questionId:d.id,comment:void 0,mark:y?.questionMark};c=c.concat(this.genLineAnswerType3(d,f,{questionId:d.id,comment:S?.comment,mark:S?.mark??0}));break;case 4:c=c.concat(this.genLineAnswerType4(d,f));break;case 5:c=c.concat(this.genLineAnswerTrueFalseType5(d,f))}l&&d.help&&c.push({content:`<br/><b>${this.commonService.myTranslateInstant("lang_auto_loi_giai")}</b> ${d.help}<br/><br/>`,answers:[]})}),this.hasEssay(o)&&(c=c.concat(this.getLineImageAnswer(a))),c}genLineQuestion(i,o){const a=[];let r=this.expandInfoParse.label??this.commonService.myTranslateInstant("lang_auto_cau"),l=this.answerTypeService.isFillAnswer(i)?this.commonService.myTranslateInstant("azt_lang_sugg_type_fill_blank"):this.answerTypeService.isEssayAnswer(i)?this.commonService.myTranslateInstant("azt_lang_sugg_type_essay"):this.commonService.myTranslateInstant("azt_lang_sugg_type_multiple_choice"),c={content:"<b>"+r+" "+(i.labelIndex??i.indexLabel??1)+". "+(o?`(${l})`:"")+"</b> "+(i.content?.includes("<img")?"<br/>":"")+i.content,answers:o&&(this.answerTypeService.isFillAnswer(i)||this.answerTypeService.isEssayAnswer(i))?[]:this.convertAnswerQuestion(i.answers??[],!!this.answerTypeService.isTrueFalseAnswer(i))};return a.push(c),a}mapQuestResultObj(i,o){return o.find(r=>r.QuestionId===i.id)||{QuestionId:i.id??0,AnswerContent:[]}}convertAnswerQuestion(i,o){let a=[];return i.forEach(r=>{let l=r.alpha?r.alpha:r.key,c="<b>     "+(o?l.toLocaleLowerCase()+")":l)+".</b> "+r.content;a.push(c)}),a}genLineAnswerType1(i,o){const a=document.createElement("table"),r=i.correctAnswer?Ae.JP:Ae.ep;a.setAttribute("docx-style",Ae.$s.get("TABLE"));const l=[],c=document.createElement("tr");a.appendChild(c);const _=document.createElement("td");_.setAttribute("docx-style",Ae.$s.get("CORRECT",[{key:Ae.Xe,value:r}]));const d=document.createElement("span"),p=i.answers?i.answers.filter(w=>i.answerResult?.includes(w.key)).map(w=>w.alpha??w.key).join(" & "):i.answerResult?.join(" & ");d.innerText=(this.commonService.myTranslateInstant("lang_auto_dap_an_dung")??"")+": "+p,d.setAttribute("color",r),_.appendChild(d),c.appendChild(_);const f=document.createElement("span"),v=document.createElement("span");return f.innerText="\u2713",f.setAttribute("color",Ae.JP),v.innerText="\u2717",v.setAttribute("color",Ae.ep),i.answers?.forEach((w,y)=>{const S=document.createElement("td"),A=document.createElement("span"),j=[{key:Ae.Xe,value:r}];j.push({key:Ae.n1,value:y+1===i.answers?.length?r:"FFFFFF"}),S.setAttribute("docx-style",Ae.$s.get("KEY_RESULT",j)),A.innerText=w.alpha??w.key,o.AnswerContent.filter(N=>N.Content===w.key).length>0&&S.appendChild(i.correctAnswer?f:v),S.appendChild(A),c.appendChild(S)}),l.push({content:`<br>${a.outerHTML}<br><br><br>`,answers:[]}),l}genLineAnswerTrueFalseType5(i,o){const a=[],r=i.correctAnswer?Ae.JP:Ae.ep,l=this.commonService.myTranslateInstant("lang_auto_dung"),c=this.commonService.myTranslateInstant("lang_auto_sai"),_=this.sAztAnswerTrueFalseService.checkLabelKeys([],i?.answers,i?.answerResult),d=(j,V)=>{const N=document.createElement("span");return N.innerText=j,N.setAttribute("color",V),N},v=document.createElement("table");v.setAttribute("docx-style",Ae.$s.get("TABLE"));const w=document.createElement("tr"),y=d(this.commonService.myTranslateInstant("lang_auto_dap_an")??"",r),S=document.createElement("td"),A=[{key:Ae.Xe,value:r}];return A.push({key:Ae.n1,value:r}),S.setAttribute("docx-style",Ae.$s.get("KEY_RESULT",A)),i.answers?.forEach(j=>{const V=this.sAztAnswerTrueFalseService.checkIsTrueType5(j,_,o.AnswerContent),N=this.commonService.myTranslateInstant(this.sAztAnswerTrueFalseService.getAnswerChoiceTrueFalseQuestion(j,o.AnswerContent))??"";S.appendChild(((j,V,N)=>{const X=document.createElement("div"),te=document.createElement("span"),I=V?Ae.JP:Ae.ep;return te.innerText=(j.alpha??j.key).toLowerCase()+"-",X.appendChild(d(V?"\u2713":"\u2717",I)),X.appendChild(te),X.appendChild(d(N??"",I)),X})(j,V,N)),S.appendChild(document.createElement("br"))}),w.appendChild(((j,V)=>{const N=document.createElement("td");return N.appendChild(j),i.answers.length&&i.answers.forEach(X=>{const te=document.createElement("span");te.setAttribute("color",this.sAztAnswerTrueFalseService.checkIsTrueType5(X,_,o.AnswerContent)?Ae.JP:Ae.ep),te.innerText=` ${(X.alpha?X.alpha:X.key?X.key:X).toString().toLowerCase()}-${_.includes((X.alpha?X.alpha:X.key?X.key:"")+"T")?l:c} `,N.appendChild(te)}),N.setAttribute("docx-style",V),N})(y,Ae.$s.get("CORRECT",[{key:Ae.Xe,value:r}]))),w.appendChild(S),v.appendChild(w),a.push({content:`<br>${v.outerHTML}<br><br><br><br><br><br>`,answers:[]}),a}genLineAnswerType3(i,o,a){const r=[];return r.push({content:`<b>${this.capitalized(this.commonService.myTranslateInstant("lang_auto_cau_tra_loi"))}:</b><br/><br/>`,answers:[]}),0===o.AnswerContent.length?r.push({content:`<span>${this.commonService.myTranslateInstant("lang_auto_thi_sinh_khong_nhap_thong_tin")}</span>`,answers:[]}):o.AnswerContent.forEach(l=>{r.push({content:`<span>${l.Content}</span>`,answers:[]})}),r.push({content:`<b>${this.commonService.myTranslateInstant("lang_auto_da_cham")}: ${a.mark??0} ${this.commonService.myTranslateInstant("lang_auto_diem_toi_da")}: ${i.scorePerQuestion})</b>`,answers:[]}),r.push({content:`<b>${this.commonService.myTranslateInstant("lang_auto_nhan_xet")}:</b> ${a.comment??""}`,answers:[]}),r}genLineAnswerType4(i,o){const a=document.createElement("table"),r=i.correctAnswer?Ae.JP:Ae.ep;a.setAttribute("docx-style",Ae.$s.get("TABLE"));const l=[],c=document.createElement("tr");c.setAttribute("docx-style",Ae.$s.get("TR")),a.appendChild(c);const _=document.createElement("td");_.setAttribute("docx-style",Ae.$s.get("CORRECT",[{key:Ae.Xe,value:r}]));const d=document.createElement("span");d.innerText=(this.commonService.myTranslateInstant("lang_auto_dap_an_dung")??"")+": ["+i.answerResult?.join(";")+"]",d.setAttribute("color",r),_.appendChild(d),c.appendChild(_),0===o.AnswerContent.length&&o.AnswerContent.push({Index:0,Content:this.commonService.myTranslateInstant("lang_auto_thi_sinh_khong_thong_tin")??""});const p=document.createElement("td"),f=document.createElement("span");return p.setAttribute("docx-style",Ae.$s.get("FILL_RESULT",[{key:Ae.Xe,value:r}])),f.innerText=o.AnswerContent.map(w=>w.Content).join(";"),p.appendChild(f),c.appendChild(p),l.push({content:`<br>${a.outerHTML}<br><br><br>`,answers:[]}),l}loadNameImage(i){return new Promise((o,a)=>{i&&i.nameImages&&parseInt(i?.id??"0")<=0?this.checkDrawImgNameService.getBase64Url(i.nameImages).then(r=>{r&&i.nameImages&&(i.nameImages.url=r),o(i)}).catch(r=>{a(r)}):o(i)})}loadCssFrameAction(){return new Promise(i=>{const o=document.createElement("div"),a=r=>{const l=document.createElement("span");return l.style.fontFamily=r,l.innerText="Aa",l};o.appendChild(a("font_chu_dep")),o.appendChild(a("font_chu_dep_z")),o.appendChild(a("font_chu_in")),o.appendChild(a("font_chu_in_nghieng")),o.appendChild(a("font_chu_in_dam")),o.style.opacity="0",document.body.appendChild(o),setTimeout(()=>{o.remove(),i()},2e3)})}loadLibAction(i){return new Promise((o,a)=>{this.commonService.loadAzotaDocxJs().then(()=>{const r=new Bi.n(1,{function:(l,c,_)=>{i.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_tien_trinh")} ${l+1}/${c}: ${_}`)}});r.addTask(this,this.loadCssFrameAction,[],this.commonService.myTranslateInstant("lang_auto_tai_tai_nguyen")),r.start().then(l=>{i.remove(),l.errs.length>0?a(l.errs[0]):o()})}).catch(r=>{a(r)})})}reset(){}checkUrlIsImage(i){return null!=i.match(/\.(jpeg|jpg|png|gif)(\?.*)?$/)}loadAztFile(i,o,a){return new Promise((r,l)=>{fetch(this.sAztCommonCdnService.getMyCdn(i.url??"")).then(c=>{c.ok?c.blob().then(_=>{const p=new File([_],i.name??"",{type:i.mimes});"ans"===a?o.isExportAnsMedia&&o.mediaAnswerWraps.push(p):o.isExportMedia&&o.mediaWraps.push(p),r()}):l(new Error(`${this.commonService.myTranslateInstant("lang_core_khong_the_tai_tep_tin_dinh_kem")} ${i.name}`))}).catch(()=>{l(new Error(`${this.commonService.myTranslateInstant("lang_core_khong_the_tai_tep_tin_dinh_kem")} ${i.name}`))})})}wrapLoadMedia(i,o){return this.checkUrlIsImage(i)?(0,Vs.qO)(i,o):new Promise((a,r)=>{a(void 0)})}replaceImageToBase64(i,o,a,r,l,c){return new Promise((_,d)=>{Object.prototype.hasOwnProperty.call(i,o)&&"string"==typeof i[o]?this.wrapLoadMedia(i[o],l).then(p=>{if(p){const f=document.createElement("canvas");f.width=p.width,f.height=p.height,f.getContext("2d")?.drawImage(p,0,0),i[o]=a.canvasList.push(f)-1,_()}else{c=c?c+1:1;let f=i[o].split(".");f=f.length>0?f[f.length-1]:"mp3";const v=this.commonService.createFileNameExportFile([this.commonService.myTranslateInstant("lang_core_file_dinh_kem_o_vi_tri")??"",c.toString(),r])+"."+f;this.loadAztFile({name:this.commonService.replaceAll(v,"_"," ")??"",url:i[o],path:"",extension:"",mimes:"",size:"0",lastModified:0},a,"ans").then(()=>{_()}).catch(w=>{d(new Error(this.commonService.myTranslateInstant(w.message)+(r.length>0?" : "+r:"")))})}}).catch(p=>{d(new Error(this.commonService.myTranslateInstant(p.message)+(r.length>0?" : "+r:"")))}):d(new Error(this.commonService.myTranslateInstant("lang_auto_tai_hinh_anh_khong_thanh_cong")+(r.length>0?" : "+r:"")))})}loadTeacherDrawResult(i,o,a,r){return new Promise((l,c)=>{const _=r??{canvasList:[],mediaWraps:[],mediaAnswerWraps:[],isExportAnsMedia:!0},d=new Bi.n(3,{function:(p,f)=>{o.pushMsg(`${this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh")} (${p}/${f})`)}});if(_.resultTeacherDraw=i,_.resultTeacherDraw){_.resultTeacherDraw.pages?.forEach((f,v)=>{d.addTask(this,this.replaceImageToBase64,[f,"backgroundImage",_,a,this.sAztCommonCdnService,v]),f.draw&&d.addTask(this,this.replaceImageToBase64,[f,"draw",_,a,this.sAztCommonCdnService,v])});const p=this.commonService.castJsonToObj(_.resultTeacherDraw.staticTextConfig??"");if(_.resultTeacherConfig=p,_.resultTeacherConfig&&_.resultTeacherConfig.urlImgCorrect&&_.resultTeacherConfig.urlImgWrong&&(_.resultTeacherConfig.urlImgCorrect=(_.resultTeacherConfig.type?"":"core-mod-assets/images/classlive/")+_.resultTeacherConfig.urlImgCorrect,_.resultTeacherConfig.urlImgWrong=(_.resultTeacherConfig.type?"":"core-mod-assets/images/classlive/")+_.resultTeacherConfig.urlImgWrong,d.addTask(this,this.replaceImageToBase64,[_.resultTeacherConfig,"urlImgCorrect",_,a]),d.addTask(this,this.replaceImageToBase64,[_.resultTeacherConfig,"urlImgWrong",_,a])),_.resultTeacherDraw.commentEmoji&&_.resultTeacherDraw.commentEmoji.length>0)for(let f=0;f<_.resultTeacherDraw.commentEmoji.length;f++)_.resultTeacherDraw.commentEmoji[f]="https://azota889.github.io/storage_public/mnote/"+_.resultTeacherDraw.commentEmoji[f],d.addTask(this,this.replaceImageToBase64,[_.resultTeacherDraw.commentEmoji,f,_,a])}d.start().then(p=>{0===p.errs.length?l(_):c(p.errs[0])})})}capitalized(i){return i?i.charAt(0).toUpperCase()+i.slice(1):""}wrapText(i,o,a,r,l,c){const _=document.createElement("span");_.innerHTML=this.commonService.removeXssInHtml(o),(o=_.innerText.replace(/<div>/g,"\n").replace(/<\/div>/g,"").replace(/_divbrdiv_/g,"\n").replace(/_divdiv_/g,"")).split("\n").forEach(p=>{for(var f=p.split(" "),v="",w=0;w<f.length;w++){var y=v+f[w]+" ";i.measureText(y).width>l&&w>0?(i.fillText(v,a,r),v=f[w]+" ",r+=c):v=y}i.fillText(v,a,r)})}getLineImageAnswer(i){const o=[];return i.mediaAnswerWraps&&i.isExportAnsMedia&&i.mediaAnswerWraps.forEach(a=>{o.push({content:`<span color="2196f3">{${this.commonService.myTranslateInstant("lang_core_dinh_kem_file_tai")} attachments/${this.replaceParamFileName(a.name)}}</span>`,answers:[]})}),i.resultTeacherDraw&&i.resultTeacherDraw.pages?.forEach(a=>{let r=i.canvasList[Number(a.backgroundImage)];if(r){const l=document.createElement("canvas");l.width=a.width??1,l.height=a.height??1;const c=l.getContext("2d");if(c){c.fillStyle="#FFFFFF",c.fillRect(0,0,l.width,l.height);let p=document.createElement("canvas"),f=p.getContext("2d");0!==a.rotation&&f?(90===Math.abs(a.rotation??0)?(p.width=r.height,p.height=r.width):(p.width=r.width,p.height=r.height),f.translate(p.width/2,p.height/2),f.rotate(((a.rotation??0)>0?1:-1)*(a.rotation??0)*Math.PI/180),f.drawImage(r,-r.width/2,-r.height/2),f.restore()):p=r;const v=l.height/p.height*p.width;if(c.drawImage(p,0,0,p.width,p.height,(l.width-v)/2,0,v,l.height/p.height*p.height),a.draw){const S=i.canvasList[Number(a.draw)];S&&c.drawImage(S,0,0)}if(a.staticText&&a.staticText.length>0&&a.staticText.forEach(S=>{if(c.font=`${i.resultTeacherConfig?.fontSize}px ${i.resultTeacherConfig?.fontText}`,c.fillStyle=i.resultTeacherConfig?.fontColor??"#000000",i.resultTeacherConfig?.useCorrectText&&"correct"==S.value&&this.wrapText(c,i.resultTeacherConfig?.textCorrect??"",S.x,S.y,l.width-S.x,25),i.resultTeacherConfig?.useCorrectText&&"wrong"==S.value&&this.wrapText(c,i.resultTeacherConfig?.textWrong??"",S.x,S.y,l.width-S.x,25),!i.resultTeacherConfig?.useCorrectText&&"correct"==S.value){const A=i.canvasList[Number(i.resultTeacherConfig?.urlImgCorrect)];A&&c.drawImage(A,0,0,A.width,A.height,S.x,S.y,30,30)}if(!i.resultTeacherConfig?.useWrongText&&"wrong"==S.value){const A=i.canvasList[Number(i.resultTeacherConfig?.urlImgWrong)];A&&c.drawImage(A,0,0,A.width,A.height,S.x,S.y,30,30)}}),a.objText&&a.objText.length>0){let S=300;a.objText.forEach(A=>{c.font=`${parseFloat(A.textStyle.size)}px ${A.textStyle.font}`,c.fillStyle=A.textStyle.color,c.textAlign=A.textStyle.align??"center",c.lineWidth=A.textStyle.width??S,this.wrapText(c,A.value,A.x,A.y,l.width-A.x,25)})}}const _=693,d=_/l.width;o.push({content:`<img src="${l.toDataURL()}" style="width:${_}px;height:${l.height*d}px" /><br/>`,answers:[]})}}),0===o.length?o.push({content:`<br/><br/>${Ae.$s.createLineCenterBold(this.commonService.myTranslateInstant("lang_auto_khong_co_anh_bai_lam_tu_luan")??"").outerHTML}<br/><br/>`,answers:[]}):o.unshift({content:`<br/>${Ae.$s.createLineCenterBold(this.commonService.myTranslateInstant("lang_auto_anh_bai_lam_tu_luan")??"").outerHTML}<br/>`,answers:[]}),o}convertDataMarkNote(i){return new Promise((o,a)=>{i&&i.urlDataMark?this.sAztCommonCdnService.loadTextCdn(this.sAztCommonCdnService.getMyCdn(i.urlDataMark)).subscribe(r=>{const l=this.zipDataService.decodeContentGzip(r),c=this.commonService.castJsonToObj(l);i.pages=[];let _={};c?.pages.forEach((f,v)=>{let w={width:f.width,height:f.height,draw:f.draws?.[0]?.src??void 0,backgroundImage:f.backgroundSrc,rotation:f.backgroundRotate,objText:[],staticText:[]};f.childData?.length&&f.childData.forEach((y,S)=>{if("UIQuickMark"==y.className&&(w.staticText?.push({x:y.x+5,y:y.y+(y.height+5+y.fontSize)/2,value:"type_right"===y.type?"correct":"wrong"}),0===S&&(_={txtCommentFont:y.fontFace?.family??"font_chu_dep",useCorrectText:!0,useWrongText:!0,correctWidth:y.width,correctHeight:y.height,wrongWidth:y.width,wrongHeight:y.height,fontText:y.fontFace?.family??"font_chu_dep",fontColor:"red",fontSize:y.fontSize??30,textWrong:"s",textCorrect:"\u0111",type:"v2"})),!_.urlImgWrong&&"type_wrong"==y.type&&(_.urlImgWrong=y.imageSrc),!_.urlImgCorrect&&"type_right"==y.type&&(_.urlImgCorrect=y.imageSrc),!_.textWrong&&"type_wrong"==y.type&&(_.textWrong=y.textContent),!_.textCorrect&&"type_right"==y.type&&(_.textCorrect=y.textContent),_.useCorrectText=!_.urlImgCorrect,_.useWrongText=!_.urlImgWrong,"UIText"===y.className){let A=this.getStyleContent(y.textContent);w.objText?.push({x:y.x+15,y:y.y+15,value:y.textContent,textStyle:{size:y.fontSize?y.fontSize:A?.fontSize,align:A?.textAlign??"left",color:A?.color,fill:!0,font:A?.fontFamily}})}}),i.pages?.push(w)}),i.staticTextConfig=this.commonService.serializeJson(_),o(i)}):o(i??{})})}getStyleContent(i){let o=document.createElement("div");o.innerHTML=this.commonService.removeXssInHtml(i);let a=o.querySelector("p"),r=o.querySelector("span");return r?{fontSize:r.style.fontSize,color:r.style.color,fontFamily:r.style.fontFamily,textAlign:a?.style.textAlign??"left"}:void 0}getTextContentInTagHTML(i){return(new DOMParser).parseFromString(i,"text/html").body.textContent??i}replaceParamFileName(i){return i.replace(/\?.*$/,"")}get percent(){return this.logger.percent}get keyLoading(){return this.logger.lines}get isLoading(){return this.logger.run??!1}constructor(i,o,a,r,l,c,_,d,p,f,v,w,y,S,A,j){this.sAztAnswerTrueFalseService=i,this.homeworkExamService=o,this.checkDrawImgNameService=a,this.sAztCommonCdnService=r,this.zipDataService=l,this.exportPdfUtilsService=c,this.answerTypeService=_,this.exportPdfConvertDataService=d,this.questionRenderService=p,this.commonService=f,this.answerService=v,this.examResultService=w,this.testedListApiService=y,this.shareFileFlutterService=S,this.sAztDialogService=A,this.sAztDocxService=j,this.logger=new un,this.expandInfoParse={}}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO(Uh.j),e.KVO(pa.Z),e.KVO(qC.E),e.KVO(ri.c),e.KVO(Vi.j),e.KVO(xf),e.KVO(ln._),e.KVO(YC),e.KVO(Ku.g),e.KVO($e.R),e.KVO(UC._t),e.KVO($u._j),e.KVO(HC),e.KVO(JC.R),e.KVO(wn.i),e.KVO(KC.I))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var In=O(59115),Zu=O(90882);const ek=["drawer"],tk=(s,n)=>({"w-85":s,"w-25":n}),nk=s=>({"azt-mobile-draw-left":s}),ik=()=>[],sk=s=>({"ml-5":s}),ok=(s,n)=>({correct:s,incorrect:n}),ak=()=>({"mr-2":!0});function rk(s,n){1&s&&(e.j41(0,"div",7),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function lk(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-select-capacity-exam-result",36),e.bIt("selectedExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEmitter(o))}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("examObj",t.examObj)("examComponentObj",t.examComponentObj)("capacityComponents",t.capacityComponents)("currentResultObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.examResultObj)}}function ck(s,n){if(1&s&&(e.j41(0,"div",34),e.DNE(1,lk,1,4,"app-select-capacity-exam-result",35),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.examObj&&t.capacityComponents)}}function uk(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",37),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.sAztMatDrawerService.openDrawer())}),e.nrm(2,"lucide-icon",38),e.k0s()}2&s&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_mo_menu"))}function _k(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",39),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.sAztMatDrawerService.closeDrawer())}),e.nrm(2,"lucide-icon",40),e.k0s()}2&s&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_dong_menu"))}function dk(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",41)(2,"span",42),e.nrm(3,"lucide-icon",43),e.k0s(),e.j41(4,"span",44),e.EFF(5),e.nI1(6,"mytranslate"),e.nI1(7,"mytranslate"),e.k0s()(),e.bVm()),2&s){const t=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,1,"lang_answer_test_must_reach_mark_to_show_answer_1")+(null==t.examConfigObj?null:t.examConfigObj.viewAnswerResultMinMark)+e.bMT(7,3,"lang_answer_test_must_reach_mark_to_show_answer_2")," ")}}function mk(s,n){1&s&&(e.j41(0,"div",45),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_note_xem_noi_dung_con_thieu")," "))}function pk(s,n){if(1&s&&e.nrm(0,"azt-loaded-img",52),2&s){const t=e.XpG(3);e.Y8G("imgSrc",null==t.examObj?null:t.examObj.examHeader)}}function hk(s,n){if(1&s&&(e.j41(0,"div",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_tong_so_cau_dung")," ",null==t.examResultObj?null:t.examResultObj.rightAnswer,".")}}function fk(s,n){if(1&s&&(e.j41(0,"div",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){let t;const i=e.XpG(3);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_tong_so_cau_sai")," ",(null!==(t=null==i.examResultObj?null:i.examResultObj.totalQuestion)&&void 0!==t?t:0)-i.essayQuestionObjs.length-(null!==(t=null==i.examResultObj?null:i.examResultObj.rightAnswer)&&void 0!==t?t:0),". ")}}function gk(s,n){if(1&s&&e.nrm(0,"azt-question-standalone-for-student-at-review-page",55),2&s){const t=e.XpG(),i=t.$implicit,o=t.index,a=e.XpG(3);e.Y8G("examObj",a.examObj)("examConfig",a.examConfigObj)("isShowOriginAnswer",!a.isMixQuestionExam||a.showOriginAnswerControl.value)("questionObj",i)("curQuestionIndex",o)("follower",a.followerRenderQuest)("isOfflineMark",!(null==a.initDataResult||null==a.initDataResult.data||!a.initDataResult.data.offlineMarkObj))("userAnswersObj",a.userAnswersObj)("curExamResultId",a.examResultIdParam)("currentTab","multiple_choice_tab")("ngClass",e.l_i(11,ok,null==i?null:i.correctAnswer,!i.correctAnswer))}}function Tk(s,n){if(1&s&&e.DNE(0,gk,1,14,"azt-question-standalone-for-student-at-review-page",54),2&s){const t=e.XpG(3);e.Y8G("ngIf",t.examObj)}}function bk(s,n){if(1&s&&(e.j41(0,"mat-tab",46),e.nI1(1,"mytranslate"),e.j41(2,"div")(3,"div",47)(4,"div",48),e.DNE(5,pk,1,1,"azt-loaded-img",49)(6,hk,3,4,"div",50)(7,fk,3,4,"div",50)(8,Tk,1,1,"ng-template",51),e.k0s()()()()),2&s){const t=e.XpG(2);e.FS9("label",e.bMT(1,8,"lang_auto_trac_nghiem")),e.R7$(2),e.HbH(t.viewOption),e.R7$(3),e.Y8G("ngIf",null==t.examObj?null:t.examObj.examHeader),e.R7$(),e.Y8G("ngIf","viewRight"==t.viewOption),e.R7$(),e.Y8G("ngIf","viewWrong"==t.viewOption),e.R7$(),e.Y8G("ngForOf",t.questionObjs)}}function xk(s,n){if(1&s&&e.nrm(0,"azt-mark-essay-new",61),2&s){let t;const i=e.XpG(4);e.Y8G("examObj",i.examObj)("examConfig",i.examConfigObj)("showForTeacher",!1)("curSelectedTab",i.curSelectedTab)("questions",i.essayQuestionObjs)("userAnswersObj",i.userAnswersObj)("examResultObj",i.examResultObj)("files",i.files)("resultID",null!==(t=i.examResultIdParam)&&void 0!==t?t:0)}}function vk(s,n){if(1&s&&(e.qex(0),e.DNE(1,xk,1,9,"azt-mark-essay-new",60),e.bVm()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",1==t.curSelectedTab)}}function yk(s,n){if(1&s&&e.nrm(0,"azt-mark-essay",62),2&s){let t;const i=e.XpG(3);e.Y8G("examObj",i.examObj)("examConfig",i.examConfigObj)("showForTeacher",!1)("questions",i.essayQuestionObjs)("userAnswersObj",i.userAnswersObj)("examResultObj",i.examResultObj)("resultID",null!==(t=i.examResultIdParam)&&void 0!==t?t:0)("files",i.files)("iframeViewMode","view")("hasLoadedData",i.hasLoadedData)}}function Sk(s,n){if(1&s&&(e.j41(0,"mat-tab",56),e.nI1(1,"mytranslate"),e.j41(2,"div",57)(3,"div",58),e.DNE(4,vk,2,1,"ng-container",59)(5,yk,1,10,"ng-template",null,3,e.C5r),e.k0s()()()),2&s){const t=e.sdS(6),i=e.XpG(2);e.FS9("label",e.bMT(1,3,"lang_auto_tu_luan")),e.R7$(4),e.Y8G("ngIf",i.checkMarkNote)("ngIfElse",t)}}function wk(s,n){if(1&s){const t=e.RV6();e.j41(0,"mat-drawer-container",8)(1,"mat-drawer",9,2),e.bIt("closedStart",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeStatusNav())}),e.j41(3,"div",10)(4,"div",11),e.DNE(5,ck,2,1,"div",12),e.j41(6,"div",13),e.nrm(7,"app-testbank-test-review-show-mark-info-of-student",14),e.k0s(),e.j41(8,"div",15),e.nrm(9,"app-testbank-test-review-show-detail-info-for-student",16)(10,"app-testbank-show-offline-result",17),e.nI1(11,"mytranslate"),e.k0s()(),e.nrm(12,"azt-practice-box",18)(13,"azt-frontend-banner-ads-box",19),e.k0s()(),e.j41(14,"mat-drawer-content")(15,"div",20)(16,"div",21)(17,"div",22),e.DNE(18,uk,3,3,"button",23)(19,_k,3,3,"button",24),e.j41(20,"div",25),e.EFF(21),e.k0s(),e.j41(22,"div",26),e.eu8(23,27),e.k0s()(),e.DNE(24,dk,8,5,"ng-container",28),e.j41(25,"div",29),e.DNE(26,mk,3,3,"div",30),e.j41(27,"mat-tab-group",31),e.bIt("selectedTabChange",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onTabChanged(o))}),e.mxI("selectedIndexChange",function(o){e.eBV(t);const a=e.XpG();return e.DH7(a.curSelectedTab,o)||(a.curSelectedTab=o),e.Njj(o)}),e.DNE(28,bk,9,10,"mat-tab",32)(29,Sk,7,5,"mat-tab",33),e.k0s()()()()()()}if(2&s){let t,i;const o=e.XpG(),a=e.sdS(5);e.Y8G("hasBackdrop",o.sAztMatDrawerService.hasBackdrop),e.R7$(),e.FS9("opened",o.sAztMatDrawerService.isOpenSideNav?"true":"false"),e.Y8G("ngClass",e.l_i(59,tk,o.isMobileDevice,!o.isMobileDevice))("mode",o.sAztMatDrawerService.mode),e.R7$(2),e.Y8G("ngClass",e.eq3(62,nk,o.isMobileDevice)),e.R7$(2),e.Y8G("ngIf",null==o.capacityComponents?null:o.capacityComponents.length),e.R7$(2),e.Y8G("examObj",o.examObj)("examResultObj",o.examResultObj)("viewPractice",o.viewPractice),e.R7$(2),e.Y8G("examResultIdParam",o.examResultIdParam)("userIdParam",o.userIdParam)("studentIdParam",o.studentIdParam)("examIdParam",o.examIdParam)("offlineHashIdParam",o.offlineHashIdParam)("viewPractice",o.viewPractice)("studentObj",o.studentObj)("examObj",o.examObj)("examResultObj",o.examResultObj)("markedByObj",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.markedByObj)("questionObjs",o.questionObjs)("essayQuestionObjs",o.essayQuestionObjs)("trueFalseChoiceQuestionObjs",o.trueFalseChoiceQuestionObjs)("isShowOriginAnswer",!o.isMixQuestionExam||o.showOriginAnswerControl.value)("files",o.files)("historyExamResultObjs",null!==(t=null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.historyExamResultObjs)&&void 0!==t?t:e.lJ4(64,ik))("examTracks",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.examTracks)("resultInfos",o.resultInfos),e.R7$(),e.Y8G("backToLink",o.backToLink)("examResultIdParam",o.examResultIdParam)("userIdParam",o.userIdParam)("studentIdParam",o.studentIdParam)("examIdParam",o.examIdParam)("examObj",o.examObj)("essayExam",!!o.essayQuestionObjs.length)("essayMark",null!=o.examResultObj&&o.examResultObj.confirmedAt?(null!==(i=null==o.examResultObj?null:o.examResultObj.essayMark)&&void 0!==i?i:0).toString():e.bMT(11,57,"lang_auto_chua_cham"))("questionObjs",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.questionObjs)("offlineMarkObj",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==o.initDataResult||null==o.initDataResult.data?null:o.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",!1)("currentScreen","student"),e.R7$(2),e.Y8G("cssClass","mt-3 block")("showLikeMobile",!0)("resultId",o.examResultIdParam)("webPage","STUDENT_VIEW_RESULT"),e.R7$(),e.Y8G("classStyle","mt-3 block")("adsPosition",o.allAdsPositions.STUDENTANSWERTESTATLEFT),e.R7$(2),e.Y8G("ngClass",e.eq3(65,sk,!o.isMobileDevice&&o.sAztMatDrawerService.isOpenSideNav)),e.R7$(3),e.Y8G("ngIf",!o.sAztMatDrawerService.isOpenSideNav||o.isMobileDevice),e.R7$(),e.Y8G("ngIf",o.sAztMatDrawerService.isOpenSideNav&&!o.isMobileDevice),e.R7$(),e.FS9("matTooltip",o.examComponentObj?o.examComponentObj.name:null==o.examObj?null:o.examObj.name),e.R7$(),e.SpI(" ",o.examComponentObj?o.examComponentObj.name:null==o.examObj?null:o.examObj.name," "),e.R7$(2),e.Y8G("ngTemplateOutlet",a),e.R7$(),e.Y8G("ngIf","lang_core_dont_allow_show_answer_by_min_mark"==o.errorMessage),e.R7$(2),e.Y8G("ngIf",o.isMobileWebView),e.R7$(),e.R50("selectedIndex",o.curSelectedTab),e.R7$(),e.Y8G("ngIf",o.trueFalseChoiceQuestionObjs.length>0),e.R7$(),e.Y8G("ngIf",o.essayQuestionObjs.length>0&&o.examObj&&o.examResultObj)}}function Ik(s,n){1&s&&(e.j41(0,"button",79)(1,"span",80),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_sai")," "))}function Ck(s,n){1&s&&(e.j41(0,"button",81)(1,"span",80),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_dung")," "))}function kk(s,n){1&s&&(e.j41(0,"button",82)(1,"span",80),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_testbank_question_origin")," "))}function Ek(s,n){1&s&&(e.j41(0,"button",83)(1,"span",84),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_testbank_question_mix")," "))}function Ak(s,n){if(1&s){const t=e.RV6();e.j41(0,"li")(1,"label",85),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"div",75)(5,"input",86),e.bIt("change",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeViewOriginAnswer(o))})("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_test_review_show_origin_answer")," "),e.R7$(3),e.Y8G("formControl",t.showOriginAnswerControl)}}function Ok(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",63),e.DNE(1,Ik,4,3,"button",64)(2,Ck,4,3,"button",65)(3,kk,4,3,"button",66)(4,Ek,4,3,"button",67),e.j41(5,"button",68),e.nrm(6,"lucide-icon",69),e.j41(7,"span",70),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()(),e.j41(10,"mat-menu",71,4)(12,"div",72)(13,"ul",73)(14,"li")(15,"label",74),e.EFF(16),e.nI1(17,"mytranslate"),e.j41(18,"div",75)(19,"input",76),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onChangeViewOption("viewRight"))})("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.k0s()()()(),e.j41(20,"li")(21,"label",77),e.EFF(22),e.nI1(23,"mytranslate"),e.j41(24,"div",75)(25,"input",78),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onChangeViewOption("viewWrong"))})("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.k0s()()()(),e.DNE(26,Ak,6,4,"li",28),e.k0s()()()}if(2&s){const t=e.sdS(11),i=e.XpG();e.R7$(),e.Y8G("ngIf","viewWrong"===i.viewOption),e.R7$(),e.Y8G("ngIf","viewRight"===i.viewOption),e.R7$(),e.Y8G("ngIf",i.isMixQuestionExam&&i.showOriginAnswerControl.value),e.R7$(),e.Y8G("ngIf",i.isMixQuestionExam&&!i.showOriginAnswerControl.value),e.R7$(),e.Y8G("matMenuTriggerFor",t),e.R7$(),e.Y8G("ngClass",e.lJ4(18,ak)),e.R7$(2),e.SpI(" ",e.bMT(9,12,"lang_testbank_tested_list_sort")," "),e.R7$(8),e.SpI(" ",e.bMT(17,14,"lang_auto_cau_dung")," "),e.R7$(3),e.Y8G("checked","viewRight"==i.viewOption),e.R7$(3),e.SpI(" ",e.bMT(23,16,"lang_auto_cau_sai")," "),e.R7$(3),e.Y8G("checked","viewWrong"==i.viewOption),e.R7$(),e.Y8G("ngIf",i.isMixQuestionExam)}}let Rk=(()=>{var s;class n extends Z.H{set drawer(i){this.sAztMatDrawerService.resizeDrawerHeight(!0,i)}onResize(i){this.isMobileDevice=i.target.innerWidth<980,this.sAztMatDrawerService.changeToMobileMode(this.isMobileDevice)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}onChangeViewOption(i){this.viewOption=this.viewOption==i?"viewAll":i}onTabChanged(i){this.matTabGroupIndex=i.index}changeViewOriginAnswer(i){this.sAztBrowserStorageService.saveSimpleSessionStorage("test-review-showing-answer-view",this.showOriginAnswerControl.value?"1":"0")}checkingShowAnswerConfig(){return!(!this.examConfigObj||!this.examResultObj||3!=this.examObj?.whenShowAnswer||!(this.examResultObj.mark&&this.examConfigObj.viewAnswerResultMinMark&&this.examResultObj.mark<this.examConfigObj.viewAnswerResultMinMark))}getQuestionCanFeedback(){if(Array.isArray(this.questionObjs)){let i=[];this.questionObjs.forEach(a=>{a.id&&!this.commonService.isExistInArray(i,a.id)&&i.push(a.id)});const o={examId:Number(this.examIdParam??0),questionIds:i};this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsListPost(o).subscribe(a=>{if(1==a.success){let r=a.data?.objs??[];if(Array.isArray(this.questionObjs))for(let l=0;l<this.questionObjs.length;l++)r.forEach(c=>{this.questionObjs&&this.questionObjs[l].id==c.questionId&&(this.questionObjs[l].enableFeedback=c.allowFeedback)});this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}else this.stopStatusObj()}selectCapacityExamEmitter(i){this.selectedExamEmitter.emit(i)}processConvertData(i){if(i.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObjForFrontendStudent(i.data,this.testedUserObjs,this.studentObj),this.examObj=i?.data?.examObj,this.examComponentObj=i?.data?.examComponentObj,this.examResultObj=i?.data?.examResultObj,this.examConfigObj=i?.data?.examConfigObj,this.files=this.commonService.myParseJson(this.examResultObj?.files??"")??[],this.resultInfos=this.commonService.willDeleteParseJson(this.examResultObj?.infors??"")??[],this.errorMessage=i?.data?.errorMessage??"";const o=this.commonService.castJsonToClassObjs(Tr.I,JSON.stringify(i.data.questionObjs??[]));this.followerRenderQuest.setNumQuest(o?.length||0),this.questionObjs=o,this.questionObjs?.forEach(_=>{_.correctAnswer=this.commonService.isExistInArray(i?.data?.correctQuestionIds,_.id),_.isRoleTeacher=!1}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs??[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),0==this.trueFalseChoiceQuestionObjs.length&&(this.curSelectedTab=1),this.userAnswersObj=this.testReviewService.convertAnswersArr(this.castJsonToObj(i.data.examResultObj?.answers??"")??[]);let a=0,r=0;this.questionObjs?.forEach((_,d)=>{_.labelIndex=d,this.examConfigObj?.resetQuestionIndex&&_.groupInfo&&_.groupInfo.groupId&&(a!=_.groupInfo.groupId&&(a=_.groupInfo.groupId,r=0),_.labelIndex=r,r++)}),this.isMixQuestionExam=!!this.questionObjs?.find(_=>_.answers.find(d=>d.alpha&&d.alpha!=d.key)),this.examResultIdParam=this.examResultObj?.id??0,this.examIdParam=this.examObj?.id?.toString()??"0",this.userIdParam=this.examResultObj?.userId?.toString()??"0",this.studentIdParam=this.examResultObj?.studentId?.toString()??this.studentObj?.id.toString()??"0",this.getQuestionCanFeedback(),this.hasLoadedData=!0;const l=this.envService.getVersionMarkNote(this.envService.getEnvValue("classliveUrl")??""),c=1e6;if(this.examResultObj?.result){const _=this.castJsonToObj(this.examResultObj?.result??"");this.checkMarkNote=!(!_||!_.urlDataMark)}else this.checkMarkNote=l>c}}ngOnInit(){this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.offlineHashIdParam=this.commonService.getMyQueryParam("offline"),this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0,this.initDataResult&&(this.userAnswersObj={},this.processConvertData(this.initDataResult)),this.showOriginAnswerControl.setValue("1"==this.sAztBrowserStorageService.getSimpleSessionStorage("test-review-showing-answer-view"))})),this.answerBoxService.switchEssayTabMessage.subscribe(i=>{this.curSelectedTab=1,setTimeout(()=>gv.A.scroll(0,0),0)}),super.ngOnInit()}constructor(i,o,a,r,l,c,_,d,p){super(),this.activeRoute=i,this.docxService=o,this.envService=a,this.sAztBrowserStorageService=r,this.testReviewService=l,this.answerBoxService=c,this.exportResultService=_,this.testMarketFeedbackService=d,this.sAztMatDrawerService=p,this.capacityComponents=[],this.selectedExamEmitter=new e.bkB,this.viewPractice=!1,this.allAdsPositions=En.rA,this.allAdsDisplayTypes=En.ud,this.curSelectedTab=0,this.backToLink="",this.examResultIdParam=0,this.viewOption="viewAll",this.matTabGroupIndex=0,this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.showOriginAnswerControl=new g.MJ(!1,{nonNullable:!0}),this.followerRenderQuest=new Pn.e,this.isMixQuestionExam=!1,this.hasLoadedData=!1,this.checkMarkNote=!1,this.errorMessage=""}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(L.nX),e.rXU(TC),e.rXU(dl.t),e.rXU(Ns.z),e.rXU(bC),e.rXU(Xh),e.rXU(ZC),e.rXU(Bu.l_),e.rXU(Sh.n))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-test-review-for-student"]],viewQuery:function(i,o){if(1&i&&e.GBs(ek,5),2&i){let a;e.mGM(a=e.lsd())&&(o.drawer=a.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs",capacityComponents:"capacityComponents",viewPractice:"viewPractice"},outputs:{selectedExamEmitter:"selectedExamEmitter"},standalone:!0,features:[e.Jv_([Sh.n]),e.Vt3,e.aNF],decls:6,vars:2,consts:[["hasResult",""],["ShowCorrectIncorrectFilterTpl",""],["drawer",""],["isFrameMark",""],["filterMenu","matMenu"],["id","test-review-for-student",1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"closedStart","ngClass","mode","opened"],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[1,"box"],["class","mb-2 box p-3",4,"ngIf"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[3,"examObj","examResultObj","viewPractice"],[1,"p-3"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","offlineHashIdParam","viewPractice","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","isShowOriginAnswer","files","historyExamResultObjs","examTracks","resultInfos"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","essayExam","essayMark","questionObjs","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj","currentScreen"],[3,"cssClass","showLikeMobile","resultId","webPage"],[3,"classStyle","adsPosition"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-student-ZI4M15FHLQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-student-lnUiT-MGaoA","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[4,"ngIf"],[1,"box","flex-1"],["class","p-3 text-danger",4,"ngIf"],[3,"selectedTabChange","selectedIndexChange","selectedIndex"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"mb-2","box","p-3"],[3,"examObj","examComponentObj","capacityComponents","currentResultObj","selectedExamEmitter",4,"ngIf"],[3,"selectedExamEmitter","examObj","examComponentObj","capacityComponents","currentResultObj"],["azt-track-service","test-review-for-student-ZI4M15FHLQ",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-open","size","16"],["azt-track-service","test-review-for-student-lnUiT-MGaoA",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-close","size","16"],[1,"alert","alert-danger","mb-5",2,"align-items","center"],[1,"w-6","h-6","mr-1"],["name","octagon-alert","size","20"],[2,"vertical-align","midle"],[1,"p-3","text-danger"],[3,"label"],[1,"azt-student-list"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","p-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"p-2","font-bold"],["class","relative",3,"examObj","examConfig","isShowOriginAnswer","questionObj","curQuestionIndex","follower","isOfflineMark","userAnswersObj","curExamResultId","currentTab","ngClass",4,"ngIf"],[1,"relative",3,"examObj","examConfig","isShowOriginAnswer","questionObj","curQuestionIndex","follower","isOfflineMark","userAnswersObj","curExamResultId","currentTab","ngClass"],["id","tabEssay",3,"label"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],[4,"ngIf","ngIfElse"],[3,"examObj","examConfig","showForTeacher","curSelectedTab","questions","userAnswersObj","examResultObj","files","resultID",4,"ngIf"],[3,"examObj","examConfig","showForTeacher","curSelectedTab","questions","userAnswersObj","examResultObj","files","resultID"],[3,"examObj","examConfig","showForTeacher","questions","userAnswersObj","examResultObj","resultID","files","iframeViewMode","hasLoadedData"],[1,"filter","flex"],["class","btn btn-sm btn-danger ml-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],["class","btn btn-sm btn-success ml-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],["class","btn btn-sm btn-pending mx-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],["class","btn btn-sm btn-secondary mx-2","style","cursor: default; padding: 6px 4px",4,"ngIf"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["name","filter","size","16",3,"ngClass"],[1,"azt-hidden","md:block"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-student-AzpxXYDv2dW","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","click","checked"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-student-FiRglRqPWZP","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","click","checked"],[1,"btn","btn-sm","btn-danger","ml-2",2,"cursor","default","padding","6px 4px"],[1,"text-white","block"],[1,"btn","btn-sm","btn-success","ml-2",2,"cursor","default","padding","6px 4px"],[1,"btn","btn-sm","btn-pending","mx-2",2,"cursor","default","padding","6px 4px"],[1,"btn","btn-sm","btn-secondary","mx-2",2,"cursor","default","padding","6px 4px"],[1,"block"],["for","show-origin-answer",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-student-FiRglRqPWZP","id","show-origin-answer","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","click","formControl"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",5),e.bIt("resize",function(l){return e.eBV(a),e.Njj(o.onResize(l))},!1,e.tSv),e.DNE(1,rk,3,3,"div",6)(2,wk,30,67,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,Ok,27,19,"ng-template",null,1,e.C5r)}if(2&i){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",!(null!=o.initDataResult&&null!=o.initDataResult.data&&o.initDataResult.data.examResultObj||null!=o.initDataResult&&null!=o.initDataResult.data&&o.initDataResult.data.historyExamResultObjs))("ngIfElse",a)}},dependencies:[yv,Cv,cy,iS,Bh.X,ul.K,$h.H,Wu,WI,gC,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,g.Zm,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,In.kk,In.Cp,Zu.qe,Zu.$C,Zu.$l,Gs.mq,Gs.T8,vt.oV,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function Fk(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",3),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function jk(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-test-review-for-student",4),e.bIt("selectedExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedExamCapacity(o))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initDataResult",t.initDataAnswerTest)("capacityComponents",t.combineExamCapacity)}}let zk=(()=>{var s;class n extends Z.H{redirectToBackLink(){let i=this.commonService.getMyQueryParam("backto")??"/student/classroom/0";this.backToLink=this.commonService.getMyQueryParam("offline")?i||"/student/classroom/0":i}translateMetaTitle(i){this.commonService.getTranslate("lang_auto_ket_qua").subscribe(o=>{this.commonService.translateMetaData({title:o+": "+i,description:o+": "+i,image:"lang_cms_test_image"})})}selectedExamCapacity(i){let o=this.commonService.getMyParam(this.activeRoute,"tenant_id")?.toString(),a=this.commonService.getMyParam(this.activeRoute,"cate_id"),r=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString(),l=Number(this.commonService.getMyQueryParam("capacity")??"");this.initStatusObj(),this.frontExamResultService.apiFrontExamResultGetExamCapacityAnswerGet(r,i.examHashId,i.examCapacityTestId).subscribe(c=>{if(!c.success)return this.errorStatusObj(c.message,!0);this.initDataAnswerTest=c,this.commonService.myNavigationWithQueryString(`/test/answer-test/${o}/${a}/${r}/${this.initDataAnswerTest?.data?.examResultObj?.id??0}`,`?backto=${this.backToLink}${l?"&capacity=1":""}`),this.headerTitle=c?.data?.examObj?.name??"",this.translateMetaTitle(c.data?.examObj?.name),this.successStatusObj()})}getCapacityExamObjs(){var i=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString();if(!i)return this.successStatusObj();this.waitDestroy(this.frontExamService.apiFrontExamGetTestCapacityExamHashIdGet(i,this.initDataAnswerTest?.data?.examResultObj?.examCapacityTestId).subscribe(o=>{if(!o.success)return this.forceShowErrorBox(o.message,!0);this.combineExamCapacity=o.data?.testingComponents??[],this.successStatusObj()}))}getAndProcessDataForStudent(){this.initStatusObj();var i=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString();let o=Number(this.commonService.getMyParam(this.activeRoute,"result_id")),a=this.commonService.getMyQueryParam("offline")??"",r=this.commonService.myTranslateInstant("lang_auto_ket_qua"),l=Number(this.commonService.getMyQueryParam("capacity"));this.frontExamResultService.apiFrontExamResultGetExamAnswerGet(i,o,a).subscribe(c=>{if(1==c.success){if(this.initDataAnswerTest=c,this.headerTitle=`${r}: ${c?.data?.examObj?.name}`,this.translateMetaTitle(c.data?.examObj?.name),!l)return this.successStatusObj();this.getCapacityExamObjs()}else{if(!l)return this.errorStatusObj(c.message??"",!0);this.getCapacityExamObjs()}})}ngOnInit(){super.ngOnInit(),this.getAndProcessDataForStudent(),this.redirectToBackLink()}constructor(i,o){super(),this.activeRoute=i,this.frontExamResultService=o,this.frontExamService=(0,e.WQX)(ke.iB),this.combineExamCapacity=[],this.headerTitle="",this.backToLink=""}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(L.nX),e.rXU(ke.Ry))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-answer-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"selectedExamEmitter","initDataResult","capacityComponents"]],template:function(i,o){if(1&i&&(e.j41(0,"student-layout",1),e.DNE(1,Fk,1,1,"azt-loading-effect",2)(2,jk,1,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backToLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ae.j,se.K,Rk,x.MD,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();function Dk(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showGame())}),e.j41(1,"div",2),e.nrm(2,"img",3),e.k0s(),e.j41(3,"div",4),e.EFF(4," Ch\u01a1i game tr\xean Azota "),e.nrm(5,"br"),e.EFF(6," c\xf9ng v\u1edbi b\u1ea1n b\xe8 !!! "),e.k0s()()}}let Mk=(()=>{var s;class n extends Z.H{ngOnInit(){if(super.ngOnInit(),!et.c.gameEnable||!this.userService.isLogin())return;const i=this.userService.getUserObj();fetch(`${et.c.gameServiceApiUrl}/api/reference/player`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referenceId:i.id,referenceName:i.fullName,referenceAvatar:i.avatar,consumerKey:et.c.gameGlobalConsumerKey,sharedSecret:et.c.gameGlobalSharedSecret})}).then(a=>{if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{this.rememberToken=a.data.rememberToken,this.referenceEnabled=a.data.referenceEnabled}).catch(a=>{console.error("Error fetching user data:",a)})}showGame(){this.opening||window.open(`${et.c.gameServiceMainUrl}/game/1?rememberToken=${this.rememberToken}`,"_blank")}constructor(i){super(),this.sAztDialogService=i,this.opening=!1,this.userService=(0,e.WQX)(mn.R),this.rememberToken=void 0,this.referenceEnabled=!1}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(wn.i))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-game-show-button"]],standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","game-show-button btn btn-primary shadown-lg",3,"click",4,"ngIf"],[1,"game-show-button","btn","btn-primary","shadown-lg",3,"click"],[1,"btn-game","border","dark:border-darkmode-400","border-slate-200","box"],["src","https://game.textandtool.com/caro/logo.png","alt","Caro",2,"width","40px","height","40px"],[1,"ml-4","font-medium","text-base"]],template:function(i,o){1&i&&e.DNE(0,Dk,7,0,"div",0),2&i&&e.Y8G("ngIf",o.rememberToken&&o.referenceEnabled)},dependencies:[x.MD,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],styles:['@charset "UTF-8";.game-show-button[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50px;padding:10px;justify-content:flex-start;text-align:left}.btn-game[_ngcontent-%COMP%]{position:relative;cursor:pointer;overflow:hidden;outline:none;animation:_ngcontent-%COMP%_shake 1.5s infinite ease-in-out;border-radius:50%;width:60px;height:60px;display:flex;justify-content:center;align-items:center}.btn-game[_ngcontent-%COMP%]:before, .btn-game[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:10px;height:10px;background:#fff6;border-radius:50%;transform:translate(-50%,-50%) scale(0);animation:_ngcontent-%COMP%_ripple 2s infinite ease-out}.btn-game[_ngcontent-%COMP%]:after{animation-delay:1s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-1px) rotate(-20deg)}50%{transform:translate(1px) rotate(-20deg)}75%{transform:translate(-.5px) rotate(-.5deg)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:translate(-50%,-50%) scale(0);opacity:1}to{transform:translate(-50%,-50%) scale(10);opacity:0}}']}),n})();var yf=O(11340);function Gk(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",2),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function Pk(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG().$implicit;e.R7$(),e.JRh(t.mark+"/"+i.examMark)}}function Nk(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_duoc_xem_diem")))}function Vk(s,n){if(1&s&&(e.j41(0,"tr")(1,"td")(2,"span"),e.EFF(3),e.k0s()(),e.j41(4,"td",17)(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"td",17),e.DNE(8,Pk,2,1,"span",18)(9,Nk,3,3,"span",18),e.k0s()()),2&s){const t=n.$implicit,i=e.XpG().$implicit,o=e.XpG(3);e.R7$(3),e.JRh(i.folderName),e.R7$(3),e.JRh(t.totalQuestion),e.R7$(2),e.Y8G("ngIf",2!=o.capacityExam.whenShowResult),e.R7$(),e.Y8G("ngIf",2==o.capacityExam.whenShowResult)}}function Lk(s,n){if(1&s&&(e.qex(0),e.DNE(1,Vk,10,4,"tr",13),e.bVm()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",t.examResults)}}function Bk(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"span",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"span",8),e.EFF(7),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th",11)(15,"span",6),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"th",12)(19,"span",6),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()(),e.j41(22,"th",12)(23,"span",6),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()()()(),e.j41(26,"tbody"),e.DNE(27,Lk,2,1,"ng-container",13),e.k0s()()(),e.j41(28,"div",9)(29,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToAnswerTest())}),e.j41(30,"span",15),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.nrm(33,"lucide-icon",16),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,7,"lang_azt_exam_results")+" "+t.capacityExam.name),e.R7$(4),e.SpI(" ",e.bMT(8,9,"lang_auto_tong_diem")+": "+(2!=t.capacityExam.whenShowResult?t.totalMark+"/"+t.totalExamMark:e.bMT(9,11,"lang_auto_chua_duoc_xem_diem"))," "),e.R7$(9),e.JRh(e.bMT(17,13,"lang_azt_exam_part")),e.R7$(4),e.JRh(e.bMT(21,15,"lang_azt_question_number")),e.R7$(4),e.JRh(e.bMT(25,17,"lang_azt_points_reach_the_total_score")),e.R7$(3),e.Y8G("ngForOf",t.examFolders),e.R7$(4),e.JRh(e.bMT(32,19,"lang_auto_xem_dap_an_chi_tiet"))}}function $k(s,n){if(1&s&&e.DNE(0,Bk,34,21,"div",3),2&s){const t=e.XpG();e.Y8G("ngIf",t.capacityExam)}}let Qk=(()=>{var s;class n extends yf.C{redirectToAnswerTest(){this.capacityExam&&this.commonService.myNavigationWithQueryString("/test/answer-test/"+this.capacityExam.tenantId+"/"+(this.capacityExam.categoryId??0)+"/"+this.hashId+"/"+this.resultId,"?backto="+encodeURIComponent(`/test/submit-test/${this.capacityExam.tenantId}/${this.capacityExam.categoryId??0}/${this.hashId}/${this.resultId}?capacity=1`)+"&capacity=1")}timeTested(i){return this.timeService.calculationTimeExamTested(i.startedTest,i.createdAt)}getCapacityExamObjs(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamGetTestCapacityExamHashIdGet(this.hashId).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.examFolders=this.handleData(i.data?.testingComponents??[]),this.userObj=i.data?.student,this.capacityExam=i.data?.capacityExam,this.totalMark=i.data?.mark??0,this.totalExamMark=i.data?.examMark??0,this.successStatusObj()}))}handleData(i,o,a){const r=[...i.filter(c=>"EXAM"===c.objectType),...i.filter(c=>"EXAM"!==c.objectType)];let l=[];return r.forEach(c=>{if("FOLDER"==c.objectType){const p=this.handleData(c.children,(o?o+" > ":"")+c.objectName,c.mark);return void l.push(...p)}if(!c.examResult)return;const _={name:c.objectName,...c.examResult},d=l.find(p=>p.folderName==o);d?d.examResults.push(_):l.push({id:c.id,folderName:o,mark:a,totalQuestion:_.totalQuestion,rightAnswer:_.rightAnswer,examResults:[_],examMark:c?.examMark})}),l}ngOnInit(){this.getCapacityExamObjs()}constructor(i,o){super(),this.timeService=i,this.frontExamService=o,this.hashId="",this.resultId=0,this.examFolders=[],this.totalMark=0,this.totalExamMark=0}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Xt.F),e.rXU(ke.iB))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-capacity-exam-tree-in-mar-result-mode-component"]],inputs:{hashId:"hashId",resultId:"resultId"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","box mx-auto p-3",4,"ngIf"],[1,"box","mx-auto","p-3"],[1,"text-lg","text-center","uppercase"],[1,"font-medium"],[1,"flex","items-center","uppercase","justify-center","mt-2","text-danger"],[1,"text-md","font-bold"],[1,"mt-3"],[1,"table","table-bordered","border"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],["azt-track-service","submit-test-ikX9fXn-mw",1,"btn","btn-outline-primary","w-full",3,"click"],[1,"mr-1"],["name","chevron-right","size","16"],[1,"text-center"],[4,"ngIf"]],template:function(i,o){if(1&i&&e.DNE(0,Gk,1,1,"azt-loading-effect",1)(1,$k,1,1,"ng-template",null,0,e.C5r),2&i){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,x.MD,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const Sf=()=>({"max-width":"100%"}),e_=()=>({"mr-2":!0}),wf=(s,n)=>({"md:col-span-4":s,"md:col-span-6":n}),t_=()=>({"ml-1 flex":!0});function qk(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",7),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function Yk(s,n){if(1&s&&(e.qex(0),e.nrm(1,"div",16),e.j41(2,"div",17),e.eu8(3,18),e.k0s(),e.nrm(4,"div",16),e.bVm()),2&s){e.XpG(2);const t=e.sdS(5);e.R7$(3),e.Y8G("ngTemplateOutlet",t)}}function Uk(s,n){1&s&&(e.j41(0,"div",12),e.nrm(1,"app-game-show-button",22),e.k0s())}function Xk(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",19),e.eu8(2,18),e.k0s(),e.DNE(3,Uk,2,0,"div",20),e.j41(4,"div",19),e.nrm(5,"azt-leaderboard",21),e.k0s(),e.j41(6,"div",19),e.nrm(7,"azt-frontend-banner-ads-box",14),e.k0s(),e.bVm()),2&s){const t=e.XpG(2),i=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",i),e.R7$(),e.Y8G("ngIf",t.isMobileDevice),e.R7$(2),e.Y8G("hashId",t.hashId)("view","part"),e.R7$(2),e.Y8G("classStyle","mb-3 block")("adsPosition",t.allAdsPositions.STUDENTSUBMITTESTATRIGHT)}}function Wk(s,n){if(1&s&&e.nrm(0,"azt-practice-box",23),2&s){const t=e.XpG(2);e.Y8G("resultId",t.resultId)("webPage","STUDENT_SUBMIT_TEST")}}function Hk(s,n){if(1&s&&(e.j41(0,"div",8)(1,"div",9),e.DNE(2,Yk,5,1,"ng-container",10)(3,Xk,8,6,"ng-container",10),e.k0s(),e.j41(4,"div",11)(5,"div",12)(6,"div",13),e.nrm(7,"azt-frontend-banner-ads-box",14),e.DNE(8,Wk,1,2,"azt-practice-box",15),e.nI1(9,"getWebUIDynamicConfig"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!t.isBusinessDomain),e.R7$(4),e.Y8G("classStyle","mb-3 block")("adsPosition",t.allAdsPositions.STUDENTSUBMITTESTATLIST),e.R7$(),e.Y8G("ngIf","0"!=e.bMT(9,5,"showPracticeAtSubmitTest"))}}function Jk(s,n){if(1&s&&(e.j41(0,"div",26),e.nrm(1,"app-capacity-exam-tree-in-mar-result-mode-component",27),e.k0s()),2&s){const t=e.XpG(2);e.Y8G("ngStyle",e.lJ4(3,Sf)),e.R7$(),e.Y8G("hashId",t.hashId)("resultId",t.resultId)}}function Kk(s,n){1&s&&(e.j41(0,"div")(1,"div",30)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()()),2&s&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_auto_co_loi_khi_tai_ket_qua_vui_long_tai_lai_trang_hoac_thu_lai_sau")))}function Zk(s,n){if(1&s&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&s){const t=e.XpG(6);e.R7$(),e.SpI(" ",(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")," ")}}function e2(s,n){if(1&s&&(e.qex(0),e.j41(1,"span",47),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Zk,2,1,"span",48),e.bVm()),2&s){const t=e.XpG(5);e.R7$(2),e.SpI("",e.bMT(3,2,"lang_auto_diem_cua_ban"),":"),e.R7$(2),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.mark))}}function t2(s,n){1&s&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_trac_nghiem_cua_ban"),":"))}function n2(s,n){1&s&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":"))}function i2(s,n){if(1&s&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&s){const t=e.XpG(6);e.R7$(),e.SpI(" ",(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")," ")}}function s2(s,n){if(1&s&&(e.qex(0),e.DNE(1,t2,3,3,"span",50)(2,n2,3,3,"span",50)(3,i2,2,1,"span",48),e.bVm()),2&s){const t=e.XpG(5);e.R7$(),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.mark))}}function o2(s,n){1&s&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":"))}function a2(s,n){if(1&s&&(e.j41(0,"span",52),e.EFF(1),e.k0s()),2&s){const t=e.XpG(6);e.R7$(),e.SpI(" ",(null==t.examResultObj?null:t.examResultObj.mark)+(null!=t.examResultObj&&null!=t.examResultObj.examResultStatisticObj&&null!=t.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==t.examResultObj||null==t.examResultObj.examResultStatisticObj||null==t.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:t.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")," ")}}function r2(s,n){1&s&&(e.j41(0,"span",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_co_diem")))}function l2(s,n){if(1&s&&(e.qex(0),e.DNE(1,o2,3,3,"span",50)(2,a2,2,1,"span",51)(3,r2,3,3,"span",46),e.bVm()),2&s){const t=e.XpG(5);e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.mark)&&null!=(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.essayMark))}}function c2(s,n){1&s&&(e.j41(0,"span",53),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chua_co_diem")))}function u2(s,n){if(1&s&&(e.j41(0,"div",45),e.DNE(1,e2,5,4,"ng-container",10),e.nI1(2,"isOnlyTrueFalse"),e.DNE(3,s2,4,3,"ng-container",10),e.nI1(4,"isMixTrueFalseAndEssay"),e.DNE(5,l2,4,3,"ng-container",10),e.nI1(6,"isOnlyEssay"),e.DNE(7,c2,3,3,"span",46),e.k0s()),2&s){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",e.bMT(2,4,t.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,6,t.examObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,8,t.examObj)),e.R7$(2),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.mark))}}function _2(s,n){1&s&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("",e.bMT(2,1,"lang_auto_diem_cua_ban"),":"))}function d2(s,n){if(1&s&&(e.j41(0,"div",54),e.DNE(1,_2,3,3,"span",50),e.j41(2,"span",49),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",null==(null==t.examResultObj?null:t.examResultObj.essayMark)),e.R7$(2),e.SpI(" ",e.bMT(4,2,"lang_auto_chua_duoc_xem_diem")," ")}}function m2(s,n){if(1&s&&(e.j41(0,"div",55)(1,"p",40),e.nrm(2,"lucide-icon",56),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",42),e.EFF(6),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(2),e.Y8G("ngClass",e.lJ4(5,e_)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_thi_sinh")," "),e.R7$(3),e.SpI(" ",null!=t.studentObj&&t.studentObj.fullName?null==t.studentObj?null:t.studentObj.fullName:null==t.userObj?null:t.userObj.fullName," ")}}function p2(s,n){if(1&s&&(e.j41(0,"div",57)(1,"p",40),e.nrm(2,"lucide-icon",58),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",42),e.EFF(6),e.k0s()()),2&s){let t;const i=e.XpG(4);e.R7$(2),e.Y8G("ngClass",e.lJ4(5,e_)),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_so_luong_trac_nghiem_dung")," "),e.R7$(3),e.SpI(" ",(null==i.examResultObj?null:i.examResultObj.rightAnswer)+"/"+(null!==(t=null==i.examResultObj||null==i.examResultObj.examResultStatisticObj||null==i.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:i.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalTrueFalseQuestion)&&void 0!==t?t:0)," ")}}function h2(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",66)(1,"button",67),e.bIt("click",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(o.showStudentSkillStatisticDialog())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_testbank_frontend_student_skill_statistic_button")," "))}function f2(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",59),e.DNE(2,h2,4,3,"div",60),e.j41(3,"div",61)(4,"button",62),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.redirectToTakeTraining())}),e.EFF(5),e.nI1(6,"mytranslate"),e.nrm(7,"lucide-icon",63),e.k0s()(),e.j41(8,"div",61)(9,"button",64),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.redirectToAnswerTest())}),e.EFF(10),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",65),e.k0s()()(),e.bVm()}if(2&s){const t=e.XpG(4);e.R7$(2),e.Y8G("ngIf",!t.isTqbDomain),e.R7$(),e.Y8G("ngClass",e.l_i(11,wf,!t.isTqbDomain,t.isTqbDomain)),e.R7$(2),e.SpI(" ",e.bMT(6,7,"lang_testbank_frontend_practice_again")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(14,t_)),e.R7$(),e.Y8G("ngClass",e.l_i(15,wf,!t.isTqbDomain,t.isTqbDomain)),e.R7$(2),e.SpI(" ",e.bMT(11,9,"lang_auto_xem_dap_an_chi_tiet")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(18,t_))}}function g2(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",64),e.bIt("click",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(o.redirectToAnswerTest())}),e.EFF(1),e.nI1(2,"mytranslate"),e.nrm(3,"lucide-icon",65),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_xem_dap_an_chi_tiet")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(4,t_)))}function T2(s,n){1&s&&(e.j41(0,"button",70),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.Y8G("disabled",!0),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_chua_duoc_xem_ket_qua")," "))}function b2(s,n){if(1&s&&(e.j41(0,"div",59)(1,"div",12),e.DNE(2,g2,4,5,"button",68)(3,T2,3,4,"button",69),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(2),e.Y8G("ngIf",!1!==(null==t.examObj?null:t.examObj.allowStudentView)),e.R7$(),e.Y8G("ngIf",!1===(null==t.examObj?null:t.examObj.allowStudentView))}}function x2(s,n){if(1&s&&(e.j41(0,"div",31)(1,"div",32)(2,"h2",33),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.DNE(5,u2,8,10,"div",34)(6,d2,5,4,"div",35),e.j41(7,"h3",36),e.EFF(8),e.k0s(),e.j41(9,"div",37),e.DNE(10,m2,7,6,"div",38),e.j41(11,"div",39)(12,"p",40),e.nrm(13,"lucide-icon",41),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p",42),e.EFF(17),e.k0s()(),e.DNE(18,p2,7,6,"div",43),e.k0s(),e.j41(19,"div",44),e.DNE(20,f2,13,19,"ng-container",29)(21,b2,4,2,"ng-template",null,3,e.C5r),e.k0s()()),2&s){const t=e.sdS(22),i=e.XpG(3);e.R7$(3),e.JRh(e.bMT(4,11,"lang_auto_bai_lam_cua_ban_da_duoc_gui_di")),e.R7$(2),e.Y8G("ngIf",2!=(null==i.examObj?null:i.examObj.whenShowResult)),e.R7$(),e.Y8G("ngIf",2==(null==i.examObj?null:i.examObj.whenShowResult)),e.R7$(2),e.SpI(" ",null==i.examObj?null:i.examObj.name," "),e.R7$(2),e.Y8G("ngIf",(null==i.studentObj?null:i.studentObj.fullName)||(null==i.userObj?null:i.userObj.fullName)),e.R7$(3),e.Y8G("ngClass",e.lJ4(15,e_)),e.R7$(),e.SpI(" ",e.bMT(15,13,"lang_auto_thoi_gian_lam_bai")," "),e.R7$(3),e.SpI(" ",i.timeTested," "),e.R7$(),e.Y8G("ngIf",null!=(null==i.examResultObj?null:i.examResultObj.rightAnswer)),e.R7$(2),e.Y8G("ngIf",1==i.examConfigObj.allowTestingEachQuestion)("ngIfElse",t)}}function v2(s,n){if(1&s&&(e.j41(0,"div",28),e.DNE(1,Kk,5,3,"div",29)(2,x2,23,16,"ng-template",null,2,e.C5r),e.k0s()),2&s){const t=e.sdS(3),i=e.XpG(2);e.Y8G("ngStyle",e.lJ4(3,Sf)),e.R7$(),e.Y8G("ngIf",""!=i.statusObj.errorMessage)("ngIfElse",t)}}function y2(s,n){if(1&s&&e.DNE(0,Jk,2,4,"div",24)(1,v2,4,4,"div",25),2&s){const t=e.XpG();e.Y8G("ngIf",t.isCapacity),e.R7$(),e.Y8G("ngIf",!t.isCapacity)}}function S2(s,n){1&s&&(e.j41(0,"div",71),e.nrm(1,"app-game-show-button",22),e.k0s())}let w2=(()=>{var s;class n extends Z.H{showStudentSkillStatisticDialog(){if(this.examObj?.schoolSubjectId&&(10==this.examObj?.schoolLevelId||11==this.examObj?.schoolLevelId||32==this.examObj?.schoolSubjectId&&12==this.examObj?.schoolLevelId)){let i={subjectId:this.examObj?.schoolSubjectId,levelId:this.examObj?.schoolLevelId,userId:Number(this.userObj?.id??"0")};this.sAztDialogService.open(jh,{width:"100vw",data:i,restoreFocus:!1})}else this.sAztDialogService.open(Rh,{width:"100vw",data:{examSchoolSubjectId:this.examObj?.schoolSubjectId??0},restoreFocus:!1})}redirectToAnswerTest(){this.commonService.myNavigationWithQueryString("/test/answer-test/"+this.tenantId+"/"+this.curCategoryId+"/"+this.hashId+"/"+this.resultId,"?backto="+encodeURIComponent(this.returnLink))}redirectToTakeTraining(){this.commonService.myNavigationWithQueryString(null!=this.curCategoryId?"/test/take-training/"+this.tenantId+"/"+this.curCategoryId+"/"+this.hashId:"/test/take-training/"+this.tenantId+"/0/"+this.hashId,"?backto="+encodeURIComponent(this.backToLink))}getExamResult(){this.initStatusObj(),this.waitDestroy(this.frontExamResultService.apiFrontExamResultGetObjGet(this.hashId,this.resultId).subscribe(i=>{if(1==i.success){this.hasErrorMessage=i.message?i.message:"",this.examObj=i.data?.examObj,this.examResultObj=i.data?.examResultObj,this.studentObj=i.data?.studentObj,this.examConfigObj=i.data?.examConfigObj??{};var o=new Date(i.data?.examResultObj?.startedTest??""),a=new Date(i.data?.examResultObj?.createdAt??"");this.timeTested=this.timeService.calculationTimeExamTested(o,a);let r="";this.commonService.getTranslate("lang_auto_nop_bai").subscribe(l=>{r=l}),this.commonService.translateMetaData({title:r+": "+this.examObj?.name,description:this.examObj?.name}),this.stopStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,de.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var i=this.commonService.getMyParam(this.activeRoute,"hash_id")?.toString();this.tenantId=Number(this.commonService.getMyParam(this.activeRoute,"tenant_id")),this.curCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.resultId=Number(this.commonService.getMyParam(this.activeRoute,"result_id")),this.hashId=i||"",this.userObj=this.userService.getUserObj(),this.isCapacity=Number(this.commonService.getMyQueryParam("capacity"))>0,this.isCapacity||this.getExamResult()})),this.backToLink=`/de-thi/${this.hashId}`,this.returnLink=`/test/submit-test/${this.tenantId}/${this.curCategoryId}/${this.hashId}/${this.resultId}`,this.paramBackToLink=this.commonService.getMyQueryParam("backto")??"",this.checkMobileScreen=!this.commonService.compareDeviceScreen(768)}constructor(i,o,a,r,l){super(),this.sAztDialogService=i,this.activeRoute=o,this.frontExamResultService=a,this.timeService=r,this.userService=l,this.backToLink="",this.paramBackToLink="",this.returnLink="",this.hashId="",this.curCategoryId=0,this.resultId=0,this.isCapacity=!1,this.tenantId=0,this.examConfigObj={},this.allAdsPositions=En.rA,this.allAdsDisplayTypes=En.ud,this.seconds="",this.minutes="",this.hours="",this.days="",this.hasErrorMessage="",this.timeTested="",this.checkMobileScreen=!1}ngOnDestroy(){super.ngOnDestroy()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(wn.i),e.rXU(L.nX),e.rXU(ke.Ry),e.rXU(Xt.F),e.rXU(mn.R))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-submit-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:7,vars:4,consts:[["doneLoading",""],["showSubmitExamTpl",""],["notError",""],["testingFlow",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["style","position: fixed; right: 30px; bottom: 120px; z-index: 9999; width: 265px",4,"ngIf"],[3,"currentStatusObj"],[1,"intro-y","mt-5"],[1,"grid","grid-cols-12","gap-5","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"mt-5","mx-auto"],[3,"classStyle","adsPosition"],[3,"resultId","webPage",4,"ngIf"],[1,"md:col-span-1"],[1,"col-span-12","md:col-span-10"],[3,"ngTemplateOutlet"],[1,"col-span-12","md:col-span-6","lg:col-span-4"],["class","col-span-12",4,"ngIf"],[3,"hashId","view"],[1,"w-full"],[3,"resultId","webPage"],[3,"ngStyle",4,"ngIf"],["class","box h-full mx-auto",3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"hashId","resultId"],[1,"box","h-full","mx-auto",3,"ngStyle"],[4,"ngIf","ngIfElse"],[1,"alert","alert-danger"],[1,"flex","flex-col","h-full"],[1,"text-center","pt-3"],[1,"text-lg","font-bold"],["class","text-center border-b border-slate-200/60 dark:border-darkmode-400 p-2",4,"ngIf"],["class","text-center border-b border-slate-200/60 dark:border-darkmode-400 p-5",4,"ngIf"],[1,"text-md","font-medium","text-center","mt-3","px-5","text-break"],[1,"azt-info-exam","mt-3","px-5"],["class","flex items-center",4,"ngIf"],[1,"flex","items-center","mt-2"],[1,"text-md","flex","items-center"],["name","clock","size","16",3,"ngClass"],[1,"text-md","font-medium","ml-auto"],["class","flex items-center mt-3",4,"ngIf"],[1,"p-3","px-5","pb-5",2,"margin-top","auto"],[1,"text-center","border-b","border-slate-200/60","dark:border-darkmode-400","p-2"],["class","font-medium text-lg text-danger",4,"ngIf"],[1,"font-medium","text-md","mr-2"],["class","font-medium text-lg","style","font-size: 25px",4,"ngIf"],[1,"font-medium","text-lg",2,"font-size","25px"],["class","font-medium text-md mr-2",4,"ngIf"],["class","font-medium text-lg",4,"ngIf"],[1,"font-medium","text-lg"],[1,"font-medium","text-lg","text-danger"],[1,"text-center","border-b","border-slate-200/60","dark:border-darkmode-400","p-5"],[1,"flex","items-center"],["name","user","size","16",3,"ngClass"],[1,"flex","items-center","mt-3"],["name","circle-check","size","16",3,"ngClass"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12 md:col-span-4",4,"ngIf"],[1,"col-span-12",3,"ngClass"],["azt-track-service","submit-test-ikX9fXn-mw",1,"btn","btn-outline-pending","w-full",3,"click"],["name","clipboard-pen-line","size","16",3,"ngClass"],["azt-track-service","submit-test-ikX9fXn-mw",1,"btn","btn-outline-primary","w-full",3,"click"],["name","chevron-right","size","16",3,"ngClass"],[1,"col-span-12","md:col-span-4"],["azt-track-service","submit-test-ITr-NliUJ",1,"btn","btn-success-soft","w-full",3,"click"],["azt-track-service","submit-test-ikX9fXn-mw","class","btn btn-outline-primary w-full",3,"click",4,"ngIf"],["class","btn btn-outline-primary w-full",3,"disabled",4,"ngIf"],[1,"btn","btn-outline-primary","w-full",3,"disabled"],[2,"position","fixed","right","30px","bottom","120px","z-index","9999","width","265px"]],template:function(i,o){if(1&i&&(e.j41(0,"student-layout",4),e.DNE(1,qk,1,1,"azt-loading-effect",5)(2,Hk,10,7,"ng-template",null,0,e.C5r)(4,y2,2,2,"ng-template",null,1,e.C5r),e.k0s(),e.DNE(6,S2,2,0,"div",6)),2&i){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backToLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.Y8G("ngIf",!o.isMobileDevice)}},dependencies:[ae.j,se.K,Mk,yh.g,ul.K,Bh.X,Qk,x.MD,x.YU,x.bT,x.T3,x.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.PP,z.Pj,z.ZY,z.jY,U.Id,q.k],encapsulation:2}),n})();var I2=O(88801),Bt=function(s){return s.LIST_QUESTION="LIST_QUESTION",s.STEP_QUESTION="STEP_QUESTION",s.TRAINING_QUESTION="TRAINING_QUESTION",s.GROUP_QUESTION="GROUP_QUESTION",s}(Bt||{}),n_=O(18359);let C2=(()=>{var s;class n{constructor(i,o,a,r,l){this.commonService=i,this.sAztCommonCdnService=o,this.trackJsExceptionService=a,this.answerTypeService=r,this.userService=l,this.labelsImg=new Image,this.questionLabelMap=[],this.abcdLabelPos={},this.subscription=new n_.yU}cancelSubscription(){this.subscription.unsubscribe()}makeRetry(i,o,a,r,l,c,_,d){i.crossOrigin="anonymous",i.setAttribute("totalRetry","0"),i.onerror=()=>{let p=parseInt(i.getAttribute("totalRetry")||"0");if(p++,p<=o)setTimeout(()=>{if(p>Math.floor(o/2))i.src=this.sAztCommonCdnService.getMyCdn(i.src);else{let w=i.src.split("?")[0];i.src=w+"?t="+Date.now()}i.setAttribute("totalRetry",p.toString())},a);else{var f=0,v=this.userService.getUserObj();v&&v.id&&(f=v.id);let w=document.URL.split("?")[0].split("/"),y={userId:f,trackKey:"V2_ERR_DISPLAY",name:"Track l\u1ed7i kh\xf4ng hi\u1ec3n th\u1ecb c\xe2u h\u1ecfi v2",userAgent:navigator.userAgent,url:document.URL,content:i.src,error:w[w.length-1]};if(this.subscription.add(this.trackJsExceptionService.apiTrackJsExceptionSaveObjPost(y).subscribe(()=>{console.log("Track l\u1ed7i th\xe0nh c\xf4ng!")})),(r||0===r)&&l&&c&&_){_[r].mixDataImg=this.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("svgs/Img_dat-01.svg");let S=document.getElementById("questionPlaceholder_"+r);S?.setAttribute("loadSuccess","0");let A=document.getElementById("media_content_all_"+_[r].id);A?.setAttribute("loadSuccess","0");const j=V=>{"0"===V?.getAttribute("loadSuccess")&&(d?this.prepareImageForOtherTypes(c,r,_):this.prepareImageToDrawForType1(l,c,r,_))};A?A.onclick=()=>{j(A)}:S&&(S.onclick=()=>{j(S)})}}}}prepareImageToDrawForType1(i,o,a,r){if(o.metaData&&o.metaData.question){let l=1+i.length,c=0,_=new Image;_.crossOrigin="anonymous",_.onload=()=>{c++,c==l&&this.drawEachQuestion(i,o,a,_,d,r)},this.makeRetry(_,3,1e3,a,i,o,r),_.src=this.sAztCommonCdnService.getMyCdn(o.metaData.question.url||"");let d=[];for(let p=0;p<i.length;p++)d[p]=new Image,d[p].crossOrigin="anonymous",d[p].onload=()=>{c++,c==l&&this.drawEachQuestion(i,o,a,_,d,r)},this.makeRetry(d[p],3,1e3,a,i,o,r),d[p].src=this.sAztCommonCdnService.getMyCdn(i[p].content)}}prepareImageForOtherTypes(i,o,a){if(i.metaData&&i.metaData.question){let r=document.createElement("canvas");r.width=i.metaData.question.width+10,r.height=i.metaData.question.height;let l=r.getContext("2d"),c=new Image;c.crossOrigin="anonymous";const _=i.metaData.question.remove.x,d=i.metaData.question.remove.y;c.onload=()=>{l?.drawImage(c,10,0),l?.drawImage(this.labelsImg,this.questionLabelMap[o].left,this.questionLabelMap[o].top,this.questionLabelMap[o].width,this.questionLabelMap[o].height,_,d,this.questionLabelMap[o].width,this.questionLabelMap[o].height),a[o].mixDataImg=r.toDataURL("image/png")},this.makeRetry(c,3,1e3,void 0,void 0,void 0,void 0,"others"),c.src=this.sAztCommonCdnService.getMyCdn(i.metaData.question.url||"")}}drawEachQuestion(i,o,a,r,l,c){if(o.metaData&&o.metaData.answers&&o.metaData.question){let _=document.createElement("canvas");_.width=o.metaData.question.width+15,_.height=o.metaData.question.height;let d=_.getContext("2d");d?.drawImage(r,15,0),d?.drawImage(this.labelsImg,this.questionLabelMap[a].left,this.questionLabelMap[a].top,this.questionLabelMap[a].width,this.questionLabelMap[a].height,o.metaData.question.remove.x,o.metaData.question.remove.y,this.questionLabelMap[a].width,this.questionLabelMap[a].height);let p=l[0],f=0,v=0,w=0,y=o.metaData.answers[0].x,S=o.metaData.answers[0].y;f=y,v=y+p.width,w=y+p.width;let A=l[0].height-o.metaData.answers[0].height;d?.drawImage(p,y,S);let j=i[0].alpha?i[0].alpha:i[0].key,V=0;if(i[0].alpha){let I=i[0].key;for(let b=0;b<i.length;b++)if(I==i[b].alpha){V=b;break}}let te={left:void 0!==o.metaData.answers[V].remove.xAns?y+(o.metaData.answers[V].remove.xAns||0):o.metaData.answers[0].remove.x,top:void 0!==o.metaData.answers[V].remove.yAns?S+(o.metaData.answers[V].remove.yAns||0):o.metaData.answers[0].remove.y,width:o.metaData.answers[0].remove.width,height:o.metaData.answers[0].remove.height};this.abcdLabelPos&&this.abcdLabelPos.hasOwnProperty(j)&&d?.drawImage(this.labelsImg,this.abcdLabelPos[j].left,this.abcdLabelPos[j].top,o.metaData.answers[0].remove.width,o.metaData.answers[0].remove.height,te.left,te.top,te.width,te.height),c[a].answerLabelsMockup[`label-${i[0].alpha?i[0].alpha:i[0].key}`]=te;for(let I=1;I<i.length;I++){let b=o.metaData.answers[I].x,C=o.metaData.answers[I].y;if(f+30<b){let Ue=[w,v];b<Math.max(...Ue)&&(b=Math.max(...Ue),b+l[I].width>_.width&&(b-=b+l[I].width-_.width),o.metaData.answers[I].remove.x=b),v+=l[I].width}else if(v=f+l[I].width,C+=A,A+=l[I].height-o.metaData.answers[I].height,C+l[I].height>_.height){let Ue=C+l[I].height-_.height;C-=Ue,o.metaData.answers[I].remove.y-=Ue}d?.drawImage(l[I],b,C);let E=I,R=i[I].alpha?i[I].alpha:i[I].key;if(i[I].alpha){let Ue=i[I].key;for(let Rt=0;Rt<i.length;Rt++)if(Ue==i[Rt].alpha){E=Rt;break}}let ve={left:void 0!==o.metaData.answers[E].remove.xAns?b+(o.metaData.answers[E].remove.xAns||0):o.metaData.answers[I].remove.x,top:void 0!==o.metaData.answers[E].remove.yAns?C+(o.metaData.answers[E].remove.yAns||0):o.metaData.answers[I].remove.y,width:o.metaData.answers[I].remove.width,height:o.metaData.answers[I].remove.height};this.abcdLabelPos&&this.abcdLabelPos.hasOwnProperty(R||"a")&&d?.drawImage(this.labelsImg,this.abcdLabelPos[R||"a"].left,this.abcdLabelPos[R||"b"].top,o.metaData.answers[I].remove.width,o.metaData.answers[I].remove.height,ve.left,ve.top,ve.width,ve.height),c[a].answerLabelsMockup[`label-${i[I].alpha?i[I].alpha:i[I].key}`]=ve,I==i.length-1&&(c[a].mixDataImg=_.toDataURL("image/png"),document.getElementById("media_content_all_"+c[a].id)?.setAttribute("loadSuccess","1"),document.getElementById("questionPlaceholder_"+a)?.setAttribute("loadSuccess","1"))}}}}return(s=n).\u0275fac=function(i){return new(i||s)(e.KVO($e.R),e.KVO(ri.c),e.KVO(_l.rk),e.KVO(ln._),e.KVO(mn.R))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var If=O(40359),Cf=O(31573),Ie=function(s){return s[s.INIT=0]="INIT",s[s.LOGIN_DIALOG=1]="LOGIN_DIALOG",s[s.PAYMENT_DIALOG=2]="PAYMENT_DIALOG",s[s.INFO_REQUIRED_DIALOG=3]="INFO_REQUIRED_DIALOG",s[s.WAIT_TO_TEST_TIME=4]="WAIT_TO_TEST_TIME",s[s.CHOOSE_STUDENT=5]="CHOOSE_STUDENT",s[s.SEQUENCE_STEP=6]="SEQUENCE_STEP",s[s.CAPACITY_EXAM_SELECT=7]="CAPACITY_EXAM_SELECT",s[s.CAPACITY_EXAM_INTRO=8]="CAPACITY_EXAM_INTRO",s[s.SHOW_ESSAY_WARNING_DIALOG=9]="SHOW_ESSAY_WARNING_DIALOG",s[s.SHOW_FULL_SCREEN=10]="SHOW_FULL_SCREEN",s[s.SHOW_VIDEO_REQUIRED=11]="SHOW_VIDEO_REQUIRED",s[s.RUN_OUT_OF_TIME_AFTER_TEST=12]="RUN_OUT_OF_TIME_AFTER_TEST",s[s.RUN_OUT_OF_TIME_WHEN_F5=13]="RUN_OUT_OF_TIME_WHEN_F5",s[s.START_TEST=14]="START_TEST",s[s.SHOW_ERROR_MESSAGE=15]="SHOW_ERROR_MESSAGE",s[s.SHOW_APP_ONLY_MESSAGE=16]="SHOW_APP_ONLY_MESSAGE",s}(Ie||{});class $i{constructor(){this.customDocument={...document}}showFullScreen(){try{const n=document.documentElement;let t=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullscreen||n.msRequestFullscreen;t&&t.call(n)}catch{}}exitFullscreen(){try{const n=document;if(window.innerHeight==screen.height){let t=n.exitFullscreen||n.webkitExitFullscreen||n.msExitFullscreen;t&&t.call(n)}}catch{}}checkFullScreen(){switch(this.detectBrowserName()){case"chrome":case"firefox":return document.fullscreenElement;default:return this.customDocument.webkitFullscreenElement}}detectBrowserName(){const n=navigator.userAgent.toLowerCase();return n.match(/chrome|chromium|crios/i)?"chrome":n.match(/firefox|fxios/i)?"firefox":n.match(/safari/i)?"safari":n.match(/opr\//i)?"opera":n.match(/edg/i)?"edge":"other"}}let kr=(()=>{var s;class n{constructor(){this.allowTrackVisible=!0,this.allowTrackFullScreen=!0,this._isSendingToApi=!1}reset(){this.allowTrackVisible=!0,this.allowTrackFullScreen=!0}isAllowTrackVisible(){return this.allowTrackVisible}setAllowTrackVisibleStatus(i){this.allowTrackVisible=i}isAllowTrackFullScreen(){return this.allowTrackFullScreen}setAllowTrackFullScreenStatus(i){this.allowTrackFullScreen=i}setSendingToApiStatus(i){this._isSendingToApi=i}isSendingToApi(){return this._isSendingToApi}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();class Dt{getPassword(){return this.browserStorageService.getSimpleStorage(this.PASSWORD_LOCAL_STORAGE_KEY+this.examHashId)}savePassword(n){null==n||""==n||this.browserStorageService.saveSimpleStorage(this.PASSWORD_LOCAL_STORAGE_KEY+this.examHashId,n)}removePassword(){this.browserStorageService.removeSimpleStorage(this.PASSWORD_LOCAL_STORAGE_KEY+this.examHashId)}hasInfo(){let n=this.browserStorageService.getSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId);return null!=n&&null!=n&&"[]"!=n&&""!=n}getInfo(){return this.browserStorageService.getSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId)}saveInfo(n){null==n||""==n||this.browserStorageService.saveSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId,n)}removeInfo(){this.browserStorageService.removeSimpleStorage(this.USER_INFO_LOCAL_STORAGE_KEY+this.examHashId)}constructor(n,t){this.examHashId=n,this.browserStorageService=t,this.PASSWORD_LOCAL_STORAGE_KEY="password_",this.USER_INFO_LOCAL_STORAGE_KEY="userInfoV3_"}}class i_{sendAudioForQuestion(n,t){if(!n.termExamResultId)return n;var i=n.viewQuestionObjs;let o=i.find(a=>a.id==t.obj?.id);return o&&(1==t.play?o.limitPlay=(o.limitPlay??0)+1:(o.limitPlay=(o.limitPlay??0)-1,o.limitAudio=(o.limitAudio??0)+1,o.audioLimitObjs?.map(a=>a.status=a.index!=t.index&&a.status)),this.saveAudioLimitStorage(n.examObj,n.termExamResultId,i),n.viewQuestionObjs=i),n}addAudioInfoToQuestionObjs(n,t){return t.forEach(i=>{if(i.attachments.length<=0)return;i.audioLimitObjs=[];let o=(n.limitAudio??0)-(i.limitAudio??0);for(var a=0;a<o;a++)i.audioLimitObjs.push({index:a,status:!0})}),t}saveAudioLimitStorage(n,t,i){let o=i.filter(a=>a.attachments.length>0).map(a=>({questionId:a.id,limitTimes:a.limitAudio,limitPlay:a.limitPlay}));o.length>0&&this.browserStorageService.saveSimpleStorage("limitAudioV6_"+n.id+"_"+t,JSON.stringify(o))}getLimitAudioFromLocalStorage(n,t){return this.commonService.myParseJson(this.browserStorageService.getSimpleStorage("limitAudioV6_"+n.id+"_"+t)??"")??[]}constructor(n,t){this.commonService=n,this.browserStorageService=t}}class k2{getQuestionThatCanFeedbackFromApi(n,t){let i=n.viewQuestionObjs,o=this.commonService.uniqueArray(i.map(r=>r.id)??[]);this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsListPost({examId:n.examObj.id,questionIds:o}).subscribe(r=>r.success?(r.data?.objs?.forEach(l=>{let c=i.find(_=>_.id==l.questionId);c&&(c.enableFeedback=l.allowFeedback)}),t(void 0,i)):t(r.message,[])))}getDataSyncFromApi(n,t){this.waitDestroy(this.testLogExamResultAnswerService.listExamResultAnswers(n.termExamResultId??0).subscribe(i=>{if(!i.success)return t(void 0);let o={version:i.version??"",code:i.code??0,success:i.success??0,data:{content:i.data?.content??"",typeHash:0,keyHash:""},detailMessage:"",message:i.message??""},r=this.encryptionHelper.result(o)?.data??{answers:[],files:"",infors:"",updatedAt:i?.data?.updated_at??"",resultTrack:""};t(r)}))}setSyncDataFromApi(n,t,i){let o=this.sAztTestResultTrackService.getStudentAnswerFromLocalStorage(i.examObj,n.termExamResultId??0);return t&&t.updatedAt?(i.resultTracks=this.commonService.myParseJson(this.zipDataService.decodeContentGzip(t.resultTrack??""))??[],o?new Date(t.updatedAt).getTime()<o.saveTime?(i.answerList=o.answers??new Array,i.files=this.commonService.myParseJson(o.files)??[],i.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(i.viewQuestionObjs,i.answerList)):(i.answerList=t.answers??new Array,i.files=this.commonService.myParseJson(t.files)??[],i.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(i.viewQuestionObjs,i.answerList)):(i.answerList=t.answers??new Array,i.files=this.commonService.myParseJson(t.files??"")??[],i.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(i.viewQuestionObjs,i.answerList))):o&&(i.answerList=o.answers??[],i.files=this.commonService.myParseJson(o.files)??[],i.viewQuestionObjs=this.sAztTestQuestionService.reBindDataQuestion(i.viewQuestionObjs,i.answerList)),i}saveAnswerAndTrackInfoToApi(n){var t=this.commonService.myClone(n.resultTracks);try{let i={answers:n.answerList,files:JSON.stringify(n.files),infors:new Dt(n?.examObj.hashId??"",this.browserStorageService).getInfo()??"",resultTrack:this.zipDataService.convertContentGzip(JSON.stringify(t)),updatedAt:""},o=this.encryptionHelper.payload(i);this.testLogExamResultAnswerService.answerExamResult(o,n.termExamResultId??0).subscribe(a=>{})}catch{}}getSyncQuestionDataFromApi(n,t,i,o,a){if(o.hasAlreadyGenerateQuestion)return a(o);this.getDataSyncFromApi(o,r=>{this.getQuestionThatCanFeedbackFromApi(o,(l,c)=>{this.sAztTestQuestionService.generateQuestionView(n,t,i,o.viewQuestionObjs,_=>{if(l||(o.viewQuestionObjs=c),r&&(o=this.setSyncDataFromApi(o,r,o)),!_)return a(o);o.viewQuestionObjs=_,o.hasAlreadyGenerateQuestion=!0,a(o)})})})}getHistoryAnswerOfTrainingFromApi(n,t){null!=n.trainingAnswerQuestions&&t(void 0,n.trainingAnswerQuestions),this.waitDestroy(this.frontExamService.apiFrontExamReloadExamResultGet(n.examObj.hashId??"").subscribe(i=>{if(!i.success)return t(i.message,[]);const a=this.encryptionHelper.result(i)?.data?.questions??[];return t(void 0,a)}))}updateEssayFilesToApi(n){return new Promise(t=>{let i={hashCode:n.uploadHashCode,files:JSON.stringify(n.files)};this.frontExamResultUploadService.apiFrontExamResultUploadUpdateImageToTmpPost(i).subscribe(o=>{o.success&&t(!0)})})}getImagesThatUploadAtMobileQrCodeFromApi(n,t){if(!n)return t(void 0);this.frontExamResultUploadService.apiFrontExamResultUploadGetTmpUploadObjGet(n).subscribe(i=>{if(!i.success)return t(void 0);let o=this.commonService.myParseJson(i.data?.tmpObj?.files??"")??[];return t(o)})}destroyAll(){this.subscriptions.unsubscribe()}waitDestroy(n){this.subscriptions.add(n)}constructor(n,t,i,o,a,r,l,c,_,d){this.commonService=n,this.zipDataService=t,this.browserStorageService=i,this.testMarketFeedbackService=o,this.encryptionHelper=a,this.testLogExamResultAnswerService=r,this.sAztTestQuestionService=l,this.sAztTestResultTrackService=c,this.frontExamResultUploadService=_,this.frontExamService=d,this.subscriptions=new n_.yU}}class kf{checkByWidth(){return window.innerWidth<1200}}class Ef{makeDeviceId(n=10){for(var t="",a=0;a<n;a++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}getDeviceId(){var n=this.browserStorageService.getSimpleStorage("device_session");return this.deviceId=n||this.makeDeviceId(20),this.browserStorageService.saveSimpleStorage("device_session",this.deviceId),this.deviceId}constructor(n){this.browserStorageService=n,this.deviceId=""}}class E2{init(n){if(null!=n.nextBackQuestionModel||n.viewQuestionObjs.length<=0)return n;let t=this.commonService.getFirstOfArray(n.viewQuestionObjs);if(null==t)return n;let i={curQuestionIndex:t.index??0,curQuestionObj:t,isLastQuestion:this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==t.id};return n.nextBackQuestionModel=i,n}nextTo(n,t){if(null==(n=this.init(n)).nextBackQuestionModel)return n;let i=t.index??0,o=this.commonService.getItemAtIndexOfArray(n.viewQuestionObjs,i+(i===n.viewQuestionObjs.length-1?0:1));return null==o||(n.nextBackQuestionModel.curQuestionIndex=o.index??0,n.nextBackQuestionModel.curQuestionObj=o,n.nextBackQuestionModel.isLastQuestion=this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==o.id),n}backTo(n,t){if(null==(n=this.init(n)).nextBackQuestionModel)return n;let o=this.commonService.getItemAtIndexOfArray(n.viewQuestionObjs,(t.index??0)-1);return null==o||(n.nextBackQuestionModel.curQuestionIndex=o.index??0,n.nextBackQuestionModel.curQuestionObj=o,n.nextBackQuestionModel.isLastQuestion=this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==o.id),n}goTo(n,t){if(null==(n=this.init(n)).nextBackQuestionModel)return n;let i=n.viewQuestionObjs.find(o=>o.id==t.id);return null==i||(n.nextBackQuestionModel.curQuestionIndex=i.index??0,n.nextBackQuestionModel.curQuestionObj=i,n.nextBackQuestionModel.isLastQuestion=this.commonService.getLastOfArray(n.viewQuestionObjs)?.id==i.id),n}scrollTo(n){var t=document.getElementById("question_all_"+n.id);t&&window.scrollTo({top:t.offsetTop-90,behavior:"smooth"})}constructor(n){this.commonService=n}}var A2=O(86828);class O2{takeAnswerForQuestion(n,t){return t.forEach(i=>{n.forEach(o=>{if(o.questionId==i.id)if(this.answerTypeService.isFillAnswer(i)||this.answerTypeService.isEssayAnswer(i))i.choseAnswer=[o.answerContent[0].content];else if((this.answerTypeService.isOneChoiceAnswer(i)||this.answerTypeService.isMultipleChoiceAnswer(i))&&i.answers)i.choseAnswer=[(i.answers[a=o.answerContent[0].index].alpha?i.answers[a].alpha:i.answers[a].key)??""];else if(this.answerTypeService.isTrueFalseAnswer(i)){var a=o.answerContent[0].index;let l=this.commonService.myTranslateInstant("T"==o.answerContent[0].status?"lang_auto_dung":"lang_auto_sai");i.choseAnswer?.push((i.answers[a].alpha?i.answers[a].alpha:i.answers[a].key)?.toLowerCase()+") - "+(l??""))}})}),t}checkFinishedAnswering(n){n.finishedAnswering=this.answerTypeService.isTrueFalseAnswer(n)?0===n.answers.filter(t=>void 0===t.checked).length:n.status}reBindDataQuestion(n,t){var i=[];return n.forEach(o=>{t.forEach(a=>{if(a.questionId==o.id){if(this.answerTypeService.isEssayAnswer(o))(r=a.answerContent&&a.answerContent.length>0?a.answerContent[0].content:"")&&(o.essayText=r);else if(this.answerTypeService.isFillAnswer(o)){var r;(r=a.answerContent&&a.answerContent.length>0?a.answerContent[0].content:"")&&(o.essayText=r)}else for(var l of o.answers)if(this.answerTypeService.isTrueFalseAnswer(o))l.checked=this.compareTrueFalseQuestionContent(l,a.answerContent);else{if(this.compareContent(l,a.answerContent&&a.answerContent.length>0?a.answerContent[0]:{index:0,content:""})){l.checked=!0;break}l.checked=!1}o.status=!0}}),this.checkFinishedAnswering(o),i.push(o)}),i}getEssayQuestionIds(n){return n.filter(t=>this.answerTypeService.isEssayAnswer(t)).map(t=>t.id)}changeQuestionContent(n,t,i){var o=[],a=new i_(this.commonService,this.browserStorageService).getLimitAudioFromLocalStorage(n,t);return i.forEach((r,l)=>{if(r.essayText=this.answerTypeService.isEssayAnswer(r)?"":r.essayText,r.essayText=this.answerTypeService.isFillAnswer(r)?"":r.essayText,n.limitAudio)if(a.length>0){var c=a.find(_=>_.questionId==r.id);c&&null!=c.limitTimes&&null!=c.limitPlay&&(r.limitAudio=c.limitTimes+c.limitPlay,r.limitPlay=0)}else r.attachments.length>0&&(r.limitAudio=0,r.limitPlay=0);r={...r,index:l,status:!1},o.push(r)}),n.limitAudio?new i_(this.commonService,this.browserStorageService).addAudioInfoToQuestionObjs(n,o):o}setShowHint(n,t){let i=n.viewQuestionObjs.find(o=>o.id==t);return i&&(i.isShowHint=!0),n}setQuestionTrueFalseAnswer(n,t){let i=n.examObj,o=n.viewQuestionObjs,a=n.answerList,r=a.find(_=>_.questionId==t.questionId),l={index:t.answerIndex,content:t.answerConfig.key,status:t.answerConfig.status},c={questionId:t.questionId,answerContent:[l]};if(r){let _=r.answerContent.find(d=>d.index==l.index&&d.content==l.content);_?_.status=l.status:r.answerContent.push(l)}else a.push(c);return o=this.changeStatusOfTrueFalseAnswer(i,o,t),o=this.changeStatusOfQuestion(o,t.questionId,!0),n.viewQuestionObjs=o,n.answerList=a,n}setQuestionOneChoiceAnswer(n,t){let i=n.examObj,o=n.viewQuestionObjs,a=n.answerList,r=a.find(c=>c.questionId==t.questionId);var l={questionId:t.questionId,answerContent:[{index:t.answerIndex,content:t.answerConfig.key}]};return r?r.answerContent=l.answerContent:a.push(l),o=this.changeStatusOfOneChoiceAnswer(i,o,t),o=this.changeStatusOfQuestion(o,t.questionId,!0),n.viewQuestionObjs=o,n.answerList=a,n}setQuestionFillAnswer(n,t){return this.setQuestionEssayAnswer(n,{questionId:t.questionId,value:t.value})}setQuestionEssayAnswer(n,t){let i=n.answerList.find(r=>r.questionId==t.questionId),o=""==t.value.trim(),a={questionId:t.questionId,answerContent:[{index:0,content:t.value}]};return n.viewQuestionObjs=this.changeEssayTextQuestion(n.viewQuestionObjs,t.questionId,t.value),n.viewQuestionObjs=this.changeStatusOfQuestion(n.viewQuestionObjs,t.questionId,!o),i?o?(n.answerList=n.answerList.filter(r=>r.questionId!=t.questionId),n):(i.answerContent=a.answerContent,n):(n.answerList.push(a),n)}changeEssayTextQuestion(n,t,i){let o=n.find(a=>a.id==t);return o&&(o.essayText=i),n}changeStatusOfQuestion(n,t,i){let o=n.find(a=>a.id==t);return o&&(o.status=i,this.checkFinishedAnswering(o)),n}changeStatusOfOneChoiceAnswer(n,t,i){let o=t.find(l=>l.id==i.questionId);if(!o||!o.answers.length||(o.answers.map((l,c)=>l.checked=c==i.answerIndex),!this.commonService.isMobileOrTable()))return t;let a=this.commonService.myTranslateInstant("lang_auto_cau"),r=this.commonService.myTranslateInstant("lang_auto_chon");return this.commonService.snackChoiceAnswer(a+" "+((o.index??0)+(n.startQuestionIndex??1))+" - "+r+" "+(i.answerConfig.alpha?i.answerConfig.alpha:i.answerConfig.key)),t}changeStatusOfTrueFalseAnswer(n,t,i){let o=t.find(d=>d.id==i.questionId);if(!o||!o.answers.length)return t;let a="T"==i.answerConfig?.status;if(o.answers[i.answerIndex].checked=o.answers[i.answerIndex].checked!=a?a:void 0,!this.commonService.isMobileOrTable())return t;let r=this.commonService.myTranslateInstant("lang_auto_cau"),l=this.commonService.myTranslateInstant("lang_auto_chon"),c=this.commonService.myTranslateInstant("lang_auto_dung"),_=this.commonService.myTranslateInstant("lang_auto_sai");return this.commonService.snackChoiceAnswer(r+" "+((o.index??0)+(n.startQuestionIndex??1))+" - "+l+" "+(i.answerConfig.alpha?i.answerConfig.alpha:i.answerConfig.key).toLocaleLowerCase()+")"+(i.answerConfig.status?" - "+("T"==i.answerConfig.status?c:_):"")),t}getAnswerOfQuestion(n,t){return n.answerList.find(i=>i.questionId==t)}checkQuestionHasAnswer(n,t){let i=n.answerList.find(o=>o.questionId==t);return!!i&&i.answerContent.length>0}resetQuestionIndex(n,t){if(!t)return n;let i=0,o=0;return n.forEach((a,r)=>{a.groupInfo?.groupId&&(i!=a.groupInfo.groupId&&(o=0),a.labelIndex=o,o++,i=a.groupInfo.groupId)}),n}convertViewQuestionToQuestionInGroup(n){n.viewQuestionInGroupList=[],n.viewQuestionObjs.forEach((t,i)=>{const o=t?.groupInfo?.groupId??0;t.startQuestionIndexWidthViewGroup=i,n.viewQuestionInGroupList[o]||(n.viewQuestionInGroupList[o]={groupInfo:t?.groupInfo,groupId:o,isExistEssay:!1,isShowGroupMobile:!0,totalQuestion:0,totalCompletedQuestion:0,startLabel:0,endLabel:0,questionList:[]}),n.viewQuestionInGroupList[o].questionList.push(t)}),n.viewQuestionInGroupList=n.viewQuestionInGroupList.filter(t=>t&&t.questionList.length).map(t=>(t.totalQuestion=t.questionList.length,t.totalCompletedQuestion=t.questionList.filter(i=>i.status).length,t.startLabel=(t.questionList[0].startQuestionIndexWidthViewGroup??0)+1,t.endLabel=(t.questionList[t.totalQuestion-1].startQuestionIndexWidthViewGroup??0)+1,t.isExistEssay=t.questionList.filter(i=>this.answerTypeService.isEssayAnswer(i)).length>0,t))}generateQuestionView(n,t,i,o,a){n.startLoad=!0,t.setNumQuest(o.length),i.parseRenderQuestions(o,r=>{n.loadPercent=Math.floor(r)}).then(r=>{n.startLoad=!1,n.hasErrs=!1,a(r)}).catch(r=>{n.startLoad=!1,n.hasErrs=!0,n.errData=r,a(void 0)})}calculateNewCountDown(n){return n.isAutoSubmit=!n.isUnLimitedTime&&n.countDownSecond<=0&&n.countDownSecond>=-90,n.isActualEndTime=!n.isUnLimitedTime&&n.countDownSecond>=-300,n.autoSubmitAfterSeconds=n.isAutoSubmit?n.countDownSecond+90:void 0,n.allowUploadEssayFileWhenEndTime=n.isAutoSubmit&&n.countDownSecond>=-200,n}clearAllData(n){new Dt(n.examObj.hashId??"",this.browserStorageService).removeInfo(),this.browserStorageService.removeSimpleStorage("saveResultTrack_"+n.examObj.hashId+"_"+n.termExamResultId),this.browserStorageService.removeSimpleStorage("saveScrollTrack_"+n.examObj.hashId+"_"+n.termExamResultId),this.browserStorageService.removeSimpleStorage("saveDataV4_"+n.examObj.id+"_"+n.termExamResultId),this.browserStorageService.removeSimpleStorage("limitAudioV6_"+n.examObj.id+"_"+n.termExamResultId),this.localStorageObject.clearAllCache(),this.sAztFullScreenService.exitFullscreen(),this.sAztShowMonitorService.destroyMonitorAtStudentDashboard()}compareContent(n,t){return n.key==t.content}compareTrueFalseQuestionContent(n,t){let i=t.find(o=>o.content==n.key);if(i)return"T"==i.status}constructor(n,t,i,o,a){this.commonService=n,this.answerTypeService=t,this.browserStorageService=i,this.localStorageObject=o,this.sAztShowMonitorService=a,this.sAztFullScreenService=new $i,this.sAztCoreModCdnService=(0,e.WQX)(A2.O),this.isCheckingAnswer=!1,this.isShowAnswerStatusBox=!1,this.isShowSuccessAnimationBox=!1,this.trainingAudioSuccess=new Audio(this.sAztCoreModCdnService.convertCdnLinkOfGitHub("audio/correct.mp3")),this.hasWrongAnswer=!1}}class R2{constructor(){this.fontSize=1}changeSizeImgOrMathJax(n){let t=document.getElementsByClassName("img-docx"),i=document.getElementsByClassName("MJX-TEX");t.length&&Array.from(t).forEach(o=>{if(o instanceof HTMLElement){let a=o.offsetWidth;o.style.width=n?a+10+"px":a-10+"px",o.style.height="auto"}}),i.length&&Array.from(i).forEach(o=>{o instanceof HTMLElement&&(o.style.fontSize=this.fontSize+"em")})}zoomIn(){this.fontSize<2&&(this.fontSize+=.1,this.changeSizeImgOrMathJax(!0))}zoomOut(){this.fontSize>1&&(this.fontSize-=.1,this.changeSizeImgOrMathJax(!1))}}class F2{saveAnswerAndTrackInfoToLocalStorage(n){if(!n.termExamResultId||!n.testingUserObj)return;let t=n.examObj,i=n.termExamResultId,o=n.answerList,a=n.files,c={autoSubmit:void 0,serverCountDown:n.countDownSecond,examMinutes:t.minutes,saveStudentId:n.testingUserObj.id,saveDeviceId:this.sAztTestDeviceIdService.getDeviceId(),deviceType:this.commonService.deviceType()},_={answers:o,notes:[],files:JSON.stringify(a),infors:new Dt(t.hashId??"",this.browserStorageService).getInfo()??"",trackInfos:JSON.stringify(c),saveTime:(new Date).getTime()};this.saveStudentAnswerToLocalStorage(t,i,_)}saveStudentAnswerToLocalStorage(n,t,i){this.browserStorageService.saveSimpleStorageWithRemoveOverCapacity(this.SAVE_STUDENT_ANSWER_LOCAL_STORAGE_KEY+n.id+"_"+t,JSON.stringify(this.encryptionHelper.payload(i)),[n.id.toString(),n.hashId??""])}getStudentAnswerFromLocalStorage(n,t){var i=this.commonService.myParseJson(this.browserStorageService.getSimpleStorage("saveDataV4_"+n.id+"_"+t)??"");return this.encryptionHelper.result({success:1,version:"",code:1,detailMessage:"",message:"",data:i})?.data}removeStudentAnswerInLocalStorage(n,t){this.browserStorageService.removeSimpleStorage(this.SAVE_STUDENT_ANSWER_LOCAL_STORAGE_KEY+n.id+"_"+t)}getResultTrackFromLocalStorage(n,t){let i=this.browserStorageService.getSimpleStorage(this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY+(n.hashId??"")+"_"+t);return this.commonService.myParseJson(i??"")??[]}setResultTracking(n,t){if(!n.termExamResultId)return n;let i=n.termExamResultId,o=n.examObj,a=n.resultTracks;return a.push([...t,this.timeService.getCurrentSecond().toString()]),this.browserStorageService.saveSimpleStorageWithRemoveOverCapacity(this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY+(o.hashId??"")+"_"+i,JSON.stringify(a),[o.id.toString(),o.hashId??""]),n.resultTracks=a,n}removeResultTracking(n,t){this.browserStorageService.removeSimpleStorage(this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY+n.hashId+"_"+t)}constructor(n,t,i,o){this.commonService=n,this.encryptionHelper=t,this.timeService=i,this.browserStorageService=o,this.sAztTestDeviceIdService=new Ef(this.browserStorageService),this.SAVE_RESULT_TRACK_LOCAL_STORAGE_KEY="saveResultTrack_",this.SAVE_STUDENT_ANSWER_LOCAL_STORAGE_KEY="saveDataV4_"}}const Af=()=>({"mr-2 text-success":!0});function j2(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.E5c(" ",e.bMT(2,3,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi"),"\xa0",e.bMT(3,5,"lang_auto_va")," ",e.bMT(4,7,"lang_testbank_submit_test_multiplechoice_question_left_1").toLowerCase()+t.data.totalTrueFalseLeftBlank+e.bMT(5,9,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function z2(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi")+". "," "))}function D2(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_submit_test_multiplechoice_question_left_1")+t.data.totalTrueFalseLeftBlank+e.bMT(3,3,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function M2(s,n){if(1&s&&(e.j41(0,"div",15)(1,"span",17)(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,j2,6,11,"span",19)(6,z2,3,3,"span",19)(7,D2,4,5,"span",19),e.j41(8,"span"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()),2&s){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,5,"lang_auto_canh_bao")+": "," "),e.R7$(2),e.Y8G("ngIf",t.data.notHasFiles&&t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.notHasFiles&&!t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.totalTrueFalseLeftBlank&&!t.data.notHasFiles),e.R7$(2),e.SpI(" ",e.bMT(10,7,"lang_auto_ban_co_chac_muon_ket_thuc_bai_thi")," ")}}function G2(s,n){if(1&s&&(e.qex(0),e.j41(1,"h3",9),e.nrm(2,"lucide-icon",10),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",11)(6,"span",12),e.EFF(7),e.nI1(8,"mytranslate"),e.nrm(9,"app-testbank-frontend-count-down-box",13),e.k0s()(),e.DNE(10,M2,11,9,"div",14),e.j41(11,"div",15)(12,"p",16),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.bVm()),2&s){const t=e.XpG();e.R7$(2),e.Y8G("ngClass",e.lJ4(13,Af)),e.R7$(),e.SpI(" ",e.bMT(4,7,"lang_powerpoint_frontend_detail_dialog")+" ?"," "),e.R7$(4),e.SpI(" ",e.bMT(8,9,"lang_auto_thoi_gian_lam_bai_cua_ban_con"),": "),e.R7$(2),e.Y8G("totalSecond",t.data.countDownSecond)("useCountDown",!0),e.R7$(),e.Y8G("ngIf",t.data.notHasFiles||t.data.totalTrueFalseLeftBlank),e.R7$(3),e.SpI(" ",e.bMT(14,11,"lang_auto_khi_xac_nhan_nop_bai_ban_se_khong_the_sua_lai_bai_thi_cua_minh_hay_dot")," ")}}function P2(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.E5c(" ",e.bMT(2,3,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi"),"\xa0",e.bMT(3,5,"lang_auto_va")," ",e.bMT(4,7,"lang_testbank_submit_test_multiplechoice_question_left_1").toLowerCase()+t.data.totalTrueFalseLeftBlank+e.bMT(5,9,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function N2(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_ban_chua_nop_file_tu_luan_nao_ban_co_chac_muon_ket_thuc_bai_thi")+". "," "))}function V2(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_submit_test_multiplechoice_question_left_1")+t.data.totalTrueFalseLeftBlank+e.bMT(3,3,"lang_testbank_submit_test_multiplechoice_question_left_2")," ")}}function L2(s,n){if(1&s&&(e.j41(0,"div",15)(1,"span",17)(2,"span",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,P2,6,11,"span",19)(6,N2,3,3,"span",19)(7,V2,4,5,"span",19),e.j41(8,"span"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()),2&s){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,5,"lang_auto_canh_bao")+": "," "),e.R7$(2),e.Y8G("ngIf",t.data.notHasFiles&&t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.notHasFiles&&!t.data.totalTrueFalseLeftBlank),e.R7$(),e.Y8G("ngIf",t.data.totalTrueFalseLeftBlank&&!t.data.notHasFiles),e.R7$(2),e.SpI(" ",e.bMT(10,7,"lang_auto_ban_co_chac_muon_ket_thuc_bai_thi")," ")}}function B2(s,n){if(1&s&&(e.j41(0,"h3",9),e.nrm(1,"lucide-icon",10),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,L2,11,9,"div",14),e.j41(5,"div",15)(6,"p",16),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(8,Af)),e.R7$(),e.SpI(" ",e.bMT(3,4,"lang_powerpoint_frontend_detail_dialog")+" ?"," "),e.R7$(2),e.Y8G("ngIf",t.data.notHasFiles||t.data.totalTrueFalseLeftBlank),e.R7$(3),e.SpI(" ",e.bMT(8,6,"lang_auto_khi_xac_nhan_nop_bai_ban_se_khong_the_sua_lai_bai_thi_cua_minh_hay_dot")," ")}}function $2(s,n){1&s&&(e.j41(0,"span",20),e.nrm(1,"azt-loading-ui"),e.k0s())}let Q2=(()=>{var s;class n extends kt._{enableSubmitBtn(){this.data.notHasFiles?setTimeout(()=>{this.countTimeEnable>0&&(this.countTimeEnable--,this.enableSubmitBtn())},1e3):this.countTimeEnable=0}btnCloseDialog(){this.dialogRef.close(!1)}confirmFinish(){this.dialogRef.close(!0)}ngOnInit(){super.ngOnInit(),this.enableSubmitBtn()}constructor(i,o,a,r){super(r,a),this.commonService=i,this.globalService=o,this.dialogRef=a,this.countTimeEnable=5}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($e.R),e.rXU(vf.r),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-confirm-exam-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:11,consts:[["unlimitedTpl",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","justify-end"],["azt-track-service","comfirm-exam-GwLo2uv__",1,"btn","btn-secondary","w-40","mr-2",2,"vertical-align","middle",3,"click"],["azt-track-service","comfirm-exam-x-4M3WDlkE",1,"btn","w-40","btn-primary",2,"vertical-align","middle",3,"click","disabled"],["class","w-4 inline-block mr-2",4,"ngIf"],[1,"text-md","font-medium","flex","items-center"],["name","file-check-2","size","24",3,"ngClass"],[1,"mt-5","flex","items-center"],[1,"text-md"],[3,"totalSecond","useCountDown"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"text-danger"],[1,"font-medium"],[4,"ngIf"],[1,"w-4","inline-block","mr-2"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.DNE(3,G2,15,14,"ng-container",4)(4,B2,9,9,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"button",7),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmFinish())}),e.DNE(11,$2,2,0,"span",8),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()}if(2&i){const a=e.sdS(5);e.R7$(3),e.Y8G("ngIf",!o.data.isUnLimitedTime)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(9,7,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",o.countTimeEnable>0),e.R7$(),e.Y8G("ngIf",o.countTimeEnable>0),e.R7$(),e.Lme(" ",e.bMT(13,9,"lang_auto_nop_bai")," ",o.countTimeEnable>0?"("+o.countTimeEnable+")":""," ")}},dependencies:[Zt,Gt.R,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const q2=()=>({"mr-2 text-pending":!0});let Y2=(()=>{var s;class n extends kt._{closeDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(i,o,a){super(a,o),this.commonService=i,this.dialogRef=o}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($e.R),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-essay-warning-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:17,vars:14,consts:[[1,"bg-white"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","badge-info","size","24",3,"ngClass"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","flex","items-center"],[1,"flex","items-center","mr-auto"],["azt-track-service","check-essay-_8FjX2B80z",1,"btn","w-24","btn-primary",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5)(8,"p",6),e.EFF(9),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()()()(),e.j41(12,"div",7),e.nrm(13,"div",8),e.j41(14,"button",9),e.bIt("click",function(){return o.closeDialog()}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(13,q2)),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_day_la_bai_thi_hon_hop_co_tu_luan_de_tra_loi_cau_hoi_tu_luan")," "),e.R7$(4),e.Lme("",e.bMT(10,7,"lang_auto_ban_co_the_lam_truc_tiep_tren_he_thong_hoac_lam_ra_giay_chup_anh_roi_gui_qua"),' "',e.bMT(11,9,"lang_auto_dinh_kem_tu_luan"),'"'),e.R7$(6),e.SpI(" ",e.bMT(16,11,"lang_auto_toi_da_hieu")," "))},dependencies:[x.MD,x.YU,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const U2=()=>({"mr-2 text-danger":!0});function X2(s,n){if(1&s&&(e.j41(0,"div",9)(1,"span",10),e.EFF(2),e.nI1(3,"mytranslate"),e.nrm(4,"app-testbank-frontend-count-down-box",11),e.k0s()()),2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_thoi_gian_lam_bai_cua_ban_con"),": "),e.R7$(2),e.Y8G("totalSecond",t.data.countDownSecond)("useCountDown",!0)}}let W2=(()=>{var s;class n extends kt._{confirmQuit(){this.dialogRef.close(!0)}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}constructor(i,o,a){super(a,o),this.commonService=i,this.dialogRef=o}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($e.R),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-exit-exam"]],standalone:!0,features:[e.Vt3,e.aNF],decls:15,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","triangle-alert","size","24",3,"ngClass"],["class","mt-5 flex items-center",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","exit-exam-kt6CrvSrn7",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","exit-exam-HDzj9p0Z53",1,"btn","w-24","btn-primary",3,"click"],[1,"mt-5","flex","items-center"],[1,"text-md"],[3,"totalSecond","useCountDown"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,X2,5,5,"div",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"button",8),e.bIt("click",function(){return o.confirmQuit()}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(11,U2)),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_testbank_frontend_are_your_sure_go_back")+" ?"," "),e.R7$(2),e.Y8G("ngIf",!o.data.isUnLimitedTime),e.R7$(3),e.SpI(" ",e.bMT(11,7,"lang_auto_dong")," "),e.R7$(3),e.SpI(" ",e.bMT(14,9,"lang_auto_xac_nhan")," "))},dependencies:[Zt,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();var H2=O(31659);const J2=()=>({"mr-2 text-pending":!0});let K2=(()=>{var s;class n extends kt._{confirmQuit(){this.dialogRef.close(!0)}ngOnInit(){super.ngOnInit()}constructor(i,o,a){super(a,o),this.commonService=i,this.dialogRef=o}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU($e.R),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-monitor-screen"]],standalone:!0,features:[e.Vt3,e.aNF],decls:16,vars:20,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","octagon-alert","size","24",3,"ngClass"],[1,"mb-0","h5"],[1,"p-3","text-right","items-center"],["azt-track-service","monitoring-dialog-dvRk43CCy8",1,"btn","w-24","btn-primary",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.j41(5,"p",5),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()()()(),e.j41(12,"div",6)(13,"button",7),e.bIt("click",function(){return o.confirmQuit()}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(19,J2)),e.R7$(2),e.SjE(" ",e.bMT(7,7,"lang_auto_day_la_bai_thi_duoc"),' "',e.bMT(8,9,"lang_auto_giam_sat"),'"',e.bMT(9,11,"lang_auto__vui_long_bam"),' "',e.bMT(10,13,"lang_auto_xac_nhan"),'" ',e.bMT(11,15,"lang_auto_de_tiep_tuc_bai_thi")," "),e.R7$(8),e.SpI(" ",e.bMT(15,17,"lang_auto_xac_nhan")," "))},dependencies:[x.MD,x.YU,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const Z2=()=>({"mr-2 text-pending":!0}),Ls=s=>({"mt-3":s});function eE(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",20),e.k0s(),e.j41(6,"div",21)(7,"i"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()),2&s){const t=e.XpG(),i=t.$implicit;e.Y8G("ngClass",e.eq3(8,Ls,0!==t.index)),e.R7$(3),e.SpI(" ",e.bMT(4,4,"lang_testbank_frontend_please_enter_full_name")," "),e.R7$(2),e.Y8G("formControl",i.anonymousFullNameFormControl),e.R7$(3),e.JRh(e.bMT(9,6,"lang_testbank_frontend_anonymous_account_need_enter_full_name"))}}function tE(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",20),e.k0s(),e.j41(6,"div",22)(7,"i"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()),2&s){const t=e.XpG(),i=t.$implicit;e.Y8G("ngClass",e.eq3(8,Ls,0!==t.index)),e.R7$(3),e.SpI(" ",e.bMT(4,4,"lang_auto_mat_khau_bai_thi")," "),e.R7$(2),e.Y8G("formControl",i.passwordFormControl),e.R7$(3),e.JRh(e.bMT(9,6,"lang_auto_neu_ban_chua_co_mat_khau_cua_bai_thi_vui_long_lien_he_giao_vien_cua_ban"))}}function nE(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3),e.k0s(),e.nrm(4,"input",20),e.k0s()()),2&s){const t=e.XpG(),i=t.$implicit;e.Y8G("ngClass",e.eq3(3,Ls,0!==t.index)),e.R7$(3),e.SpI(" ",i.textInputInfoField.title," "),e.R7$(),e.Y8G("formControl",i.textInputInfoField.textInputFormControl)}}function iE(s,n){if(1&s&&(e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.nrm(3,"input",31),e.k0s(),e.j41(4,"label",32,0),e.EFF(6),e.k0s()()()),2&s){const t=n.$implicit,i=n.index,o=e.sdS(5),a=e.XpG(2).index;e.R7$(3),e.Y8G("id","checkboxData_"+a+"_"+i)("formControl",t.checkboxFormControl),e.R7$(),e.FS9("matTooltip",t.optionName),e.Y8G("for","checkboxData_"+a+"_"+i)("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.SpI(" ",t.optionName," ")}}function sE(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",23)(2,"div",24)(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"div",26),e.DNE(6,iE,7,7,"div",27),e.k0s()()()),2&s){const t=e.XpG(),i=t.$implicit;e.Y8G("ngClass",e.eq3(3,Ls,0!==t.index)),e.R7$(4),e.JRh(i.checkboxInfoField.title),e.R7$(2),e.Y8G("ngForOf",i.checkboxInfoField.data)}}function oE(s,n){if(1&s&&(e.j41(0,"div",34)(1,"div",29)(2,"div",30),e.nrm(3,"input",35),e.k0s(),e.j41(4,"label",32,0),e.EFF(6),e.k0s()()()),2&s){const t=n.$implicit,i=n.index,o=e.sdS(5),a=e.XpG(2),r=a.$implicit,l=a.index;e.R7$(3),e.Y8G("id","radioInfoField_"+l+"_"+i)("name",r.radioInfoField.title+"_"+r.radioInfoField.rawIndex)("formControl",r.radioInfoField.radioFormControl)("value",t.optionName),e.R7$(),e.FS9("matTooltip",t.optionName),e.Y8G("for","radioInfoField_"+l+"_"+i)("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.SpI(" ",t.optionName," ")}}function aE(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",23)(2,"div",24)(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"div",26),e.DNE(6,oE,7,9,"div",33),e.k0s()()()),2&s){const t=e.XpG(),i=t.$implicit;e.Y8G("ngClass",e.eq3(3,Ls,0!==t.index)),e.R7$(4),e.JRh(i.radioInfoField.title),e.R7$(2),e.Y8G("ngForOf",i.radioInfoField.data)}}function rE(s,n){if(1&s&&(e.j41(0,"mat-option",42),e.EFF(1),e.k0s()),2&s){const t=n.$implicit;e.FS9("value",t.optionName),e.R7$(),e.JRh(t.optionName)}}function lE(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",36)(2,"span",37),e.EFF(3),e.k0s(),e.j41(4,"div",38)(5,"mat-form-field",39)(6,"mat-select",40),e.DNE(7,rE,2,2,"mat-option",41),e.k0s()()()()()),2&s){const t=e.XpG(),i=t.$implicit;e.Y8G("ngClass",e.eq3(4,Ls,0!==t.index)),e.R7$(3),e.JRh(i.dropDownMenuInfoField.title),e.R7$(3),e.Y8G("formControl",i.dropDownMenuInfoField.dropDownFormControl),e.R7$(),e.Y8G("ngForOf",i.dropDownMenuInfoField.data)}}function cE(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",15),e.DNE(2,eE,10,10,"div",16)(3,tE,10,10,"div",16)(4,nE,5,5,"div",16)(5,sE,7,5,"div",16)(6,aE,7,5,"div",16)(7,lE,8,6,"div",16),e.k0s(),e.bVm()),2&s){const t=n.$implicit;e.R7$(2),e.Y8G("ngIf",t.anonymousFullNameFormControl),e.R7$(),e.Y8G("ngIf",t.passwordFormControl),e.R7$(),e.Y8G("ngIf",t.textInputInfoField),e.R7$(),e.Y8G("ngIf",t.checkboxInfoField),e.R7$(),e.Y8G("ngIf",t.radioInfoField),e.R7$(),e.Y8G("ngIf",t.dropDownMenuInfoField)}}function uE(s,n){1&s&&(e.j41(0,"span",43),e.nrm(1,"azt-loading-ui"),e.k0s())}let _E=(()=>{var s;class n extends kt._{handleConfirm(){this.initStatusObj();let o,i=[];this.infoObjs.forEach(a=>{let r={contents:[]};a.checkboxInfoField&&(r.index=a.checkboxInfoField.rawIndex,r.type=a.checkboxInfoField.type,r.title=a.checkboxInfoField.title,r.isFullName=a.checkboxInfoField.isFullName,a.checkboxInfoField.data.forEach(l=>{l.checkboxFormControl.value&&r.contents.push(l.optionName)}),i.push(r)),a.radioInfoField&&(r.index=a.radioInfoField.rawIndex,r.type=a.radioInfoField.type,r.title=a.radioInfoField.title,r.isFullName=a.radioInfoField.isFullName,r.contents.push(a.radioInfoField.radioFormControl.value),i.push(r)),a.dropDownMenuInfoField&&(r.index=a.dropDownMenuInfoField.rawIndex,r.type=a.dropDownMenuInfoField.type,r.title=a.dropDownMenuInfoField.title,r.isFullName=a.dropDownMenuInfoField.isFullName,r.contents.push(a.dropDownMenuInfoField.dropDownFormControl.value),i.push(r)),a.textInputInfoField&&(r.index=a.textInputInfoField.rawIndex,r.type=a.textInputInfoField.type,r.title=a.textInputInfoField.title,r.isFullName=a.textInputInfoField.isFullName,r.contents.push(a.textInputInfoField.textInputFormControl.value),i.push(r))}),this.data.obj.enterAnonymousFullNameRequired&&(o=this.form.controls.anonymousFullNameFormControl?.value,this.hasFullNameFieldInConfigData&&(o=this.commonService.getFirstOfArray(i.find(a=>a.isFullName)?.contents??[]))),this.updateAnonymousFullName(o,a=>{a&&this.showErrorSnack(a),this.data.obj.passwordRequired&&new Dt(this.data.obj.examObj.hashId??"",this.browserStorageService).savePassword(this.form.controls.passwordFormControl?.value),this.data.obj.enterInfoRequired&&new Dt(this.data.obj.examObj.hashId??"",this.browserStorageService).saveInfo(JSON.stringify(i)),this.dialogRef.close(!0)})}updateAnonymousFullName(i,o){if(null==i)return o(void 0);this.waitDestroy(this.userInfoService.apiUserInfoChangeNamePost({id:0,name:i}).subscribe(a=>o(a.success?void 0:a.message)))}initFieldForm(){this.data.obj.enterAnonymousFullNameRequired&&!this.hasFullNameFieldInConfigData&&this.form.controls.anonymousFullNameFormControl&&(this.form.controls.anonymousFullNameFormControl.setValue(""),this.infoObjs.push({anonymousFullNameFormControl:this.form.controls.anonymousFullNameFormControl})),this.data.obj.passwordRequired&&this.form.controls.passwordFormControl&&(this.form.controls.passwordFormControl.setValue(""),this.infoObjs.push({passwordFormControl:this.form.controls.passwordFormControl})),new Dt(this.data.obj.examObj.hashId??"",this.browserStorageService).hasInfo()||this.data.obj.infoFields.forEach((i,o)=>{switch(i.type){case 1:let a={checkboxInfoField:{rawIndex:o,type:i.type,title:i.title??"",isFullName:i.isFullName??!1,data:[],checkboxFormArray:new g.Yp([],dE(1))}};i.contents.forEach((d,p)=>{a.checkboxInfoField?.data.push({index:p,optionName:d,checkboxFormControl:new g.MJ(!1,{nonNullable:!0})})}),a.checkboxInfoField?.data.forEach(d=>a.checkboxInfoField?.checkboxFormArray.push(d.checkboxFormControl)),this.infoObjs.push(a);break;case 2:let r=this.commonService.getFirstOfArray(i.contents),l={radioInfoField:{rawIndex:o,type:i.type,title:i.title??"",isFullName:i.isFullName??!1,data:[],radioFormControl:new g.MJ(r??"",{nonNullable:!0,validators:[Li.M.noWhiteSpace]})}};i.contents.forEach((d,p)=>{l.radioInfoField?.data.push({index:p,optionName:d})}),this.infoObjs.push(l);break;case 3:let c={dropDownMenuInfoField:{rawIndex:o,type:i.type,title:i.title??"",isFullName:i.isFullName??!1,data:[],dropDownFormControl:new g.MJ("",{nonNullable:!0,validators:[Li.M.noWhiteSpace]})}};i.contents.forEach((d,p)=>{c.dropDownMenuInfoField?.data.push({index:p,optionName:d})}),this.infoObjs.push(c);break;default:let _={textInputInfoField:{rawIndex:o,type:i.type??0,title:i.title??"",isFullName:i.isFullName??!1,textInputFormControl:new g.MJ("",{nonNullable:!0,validators:[Li.M.noWhiteSpace]})}};this.infoObjs.push(_)}}),this.infoObjs.forEach(i=>{i.anonymousFullNameFormControl&&(this.form.controls.anonymousFullNameFormControl=i.anonymousFullNameFormControl),i.passwordFormControl&&(this.form.controls.passwordFormControl=i.passwordFormControl),i.checkboxInfoField&&this.form.controls.checkboxInfoField?.push(i.checkboxInfoField.checkboxFormArray),i.radioInfoField&&this.form.controls.radioInfoField?.push(i.radioInfoField.radioFormControl),i.dropDownMenuInfoField&&this.form.controls.dropDownMenuInfoField?.push(i.dropDownMenuInfoField.dropDownFormControl),i.textInputInfoField&&this.form.controls.textInputInfoField?.push(i.textInputInfoField.textInputFormControl)})}goBack(){let i=this.commonService.getMyQueryParam("backto")??"";this.commonService.myNavigationWithQueryString("/de-thi/"+this.data.obj.examObj.hashId,"?backto="+encodeURIComponent(i))}ngOnInit(){super.ngOnInit(),this.hasFullNameFieldInConfigData=null!=this.data.obj.infoFields.find(i=>i.isFullName),this.initFieldForm()}constructor(i,o,a,r){super(r,a),this.userInfoService=i,this.browserStorageService=o,this.dialogRef=a,this.form=new g.gE({passwordFormControl:new g.MJ("empty",{nonNullable:!0,validators:[Li.M.noWhiteSpace]}),anonymousFullNameFormControl:new g.MJ("empty",{nonNullable:!0,validators:[Li.M.noWhiteSpace]}),checkboxInfoField:new g.Yp([]),radioInfoField:new g.Yp([]),dropDownMenuInfoField:new g.Yp([]),textInputInfoField:new g.Yp([])}),this.infoObjs=[],this.hasFullNameFieldInConfigData=!1}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(_l.fv),e.rXU(Ns.z),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-submit-info"]],standalone:!0,features:[e.Vt3,e.aNF],decls:22,vars:19,consts:[["c","isDisabled"],["id","test-info-form","autocomplete","off",3,"formGroup"],[1,"box"],[1,"border-b","border-slate-200","dark:border-darkmode-400"],[1,"p-3","mb-0","border-b","border-slate-200","dark:border-darkmode-400"],[1,"intro-x","font-bold","flex","items-center"],["name","octagon-alert","size","24",3,"ngClass"],[1,"intro-x","text-xs","text-slate-600","mt-1"],[1,"mt-3","pb-3"],[3,"defaultHeight"],[4,"ngFor","ngForOf"],[1,"text-right","p-3"],["type","button",1,"btn","w-32","btn-secondary","mr-2",3,"keydown.enter","click"],["azt-track-service","submit-info-5wWwRj07M5L","type","submit",1,"btn","w-32","btn-primary",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"px-2",2,"margin-left","5px"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"input-group"],[1,"input-group-text","font-medium","whitespace-nowrap",2,"min-width","134px"],["type","text",1,"form-control",3,"formControl"],[1,"pt-1","text-xs"],[1,"pt-1","text-xs","text-danger"],[1,"border","border","border-slate-200","dark:border-darkmode-400","rounded-md"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","border-b","border-slate-200","dark:border-darkmode-400"],[1,"font-medium"],[1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-4 mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4","mb-1"],[1,"flex","items-center"],[1,"form-check","mr-2"],["type","checkbox",1,"form-check-input","ml-2",3,"id","formControl"],[1,"cursor-pointer","truncate",3,"for","matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","col-span-12 sm:col-span-12 md:col-span-4 mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-12","md:col-span-4","mb-1"],["type","radio",1,"form-check-input","ml-2",3,"id","name","formControl","value"],[1,"input-group","w-full"],[1,"input-group-text","font-medium","whitespace-nowrap",2,"min-width","134px","transform","translateX(3px)","z-index","2"],[1,"w-full","overflow-hidden"],["appearance","outline"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(i,o){1&i&&(e.j41(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),e.nrm(5,"lucide-icon",6),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"h6",7),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.j41(11,"div",8)(12,"azt-mat-dialog-content",9),e.DNE(13,cE,8,6,"ng-container",10),e.k0s()()(),e.j41(14,"div",11)(15,"button",12),e.bIt("keydown.enter",function(r){return r.preventDefault()})("click",function(){return o.goBack()}),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"button",13),e.bIt("click",function(){return o.handleConfirm()}),e.DNE(19,uE,2,0,"span",14),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()()()),2&i&&(e.Y8G("formGroup",o.form),e.R7$(5),e.Y8G("ngClass",e.lJ4(18,Z2)),e.R7$(),e.SpI(" ",e.bMT(7,10,"lang_auto_vui_long_nhap_them_thong_tin_de_bat_dau_bai_thi")," "),e.R7$(3),e.SpI(" ",e.bMT(10,12,"lang_auto_nhung_thong_tin_nay_se_giup_giao_vien_dinh_danh_va_cham_diem_cho_ban")," "),e.R7$(3),e.Y8G("defaultHeight",55),e.R7$(),e.Y8G("ngForOf",o.infoObjs),e.R7$(3),e.SpI(" ",e.bMT(17,14,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",!o.form.valid||o.statusObj.loading),e.R7$(),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(21,16,"lang_auto_xac_nhan")," "))},dependencies:[ye.f,Nn.U,Gt.R,x.MD,x.YU,x.Sq,x.bT,g.X1,g.qT,g.me,g.Zm,g.Fm,g.BC,g.cb,g.l_,g.j4,L.iI,g.YN,z.wp,Y.s,br.wT,Du.rl,Mu.VO,vt.oV,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function dE(s=1){return t=>t.getRawValue().filter(o=>o).length>=s?null:{required:!0}}var mE=O(59792);const pE=()=>({"mr-2":!0});let hE=(()=>{var s;class n extends Z.H{copyLinkToClipboard(i){return i}clickCopyLink(){this.showSuccessSnack("lang_auto_copy_link_thanh_cong")}bindUrlToQrCode(i){this.urlToUploadEssayFilesInMobile=`${this.commonService.getCurrentDomain()}/n/${i}`}ngOnInit(){super.ngOnInit(),this.bindUrlToQrCode(this.uploadHashCode)}constructor(){super(),this.urlToUploadEssayFilesInMobile=""}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-qr-code-of-upload-essay-files"]],inputs:{uploadHashCode:"uploadHashCode"},standalone:!0,features:[e.Vt3,e.aNF],decls:16,vars:15,consts:[[1,"p-2","mt-3"],[1,"strike","mt-3"],[1,"text-slate-600","dark:text-slate-500"],[1,"mt-3"],[1,"mt-2","flex","items-center"],["type","text","readonly","",1,"w-full","p-2","bg-white","mr-2",3,"value"],["azt-track-service","upload-image-X_utJrb2bC",1,"btn","btn-outline-primary","flex-none",3,"click","cdkCopyToClipboard"],["name","copy","size","16",3,"ngClass"],[1,"ml-2",3,"fileName","linkUrl"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",3)(6,"div"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",4),e.nrm(10,"input",5),e.j41(11,"button",6),e.bIt("click",function(){return o.clickCopyLink()}),e.nrm(12,"lucide-icon",7),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.nrm(15,"azt-download-qr-code",8),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,8,"lang_auto_hoac_nop_bang_dien_thoai")),e.R7$(4),e.SpI(" ",e.bMT(8,10,"lang_auto_vao_trinh_duyet_bang_dien_thoai_truy_cap_duong_dan_sau_de_tai_bai_thi_tu_luan_len")," "),e.R7$(3),e.FS9("value",o.urlToUploadEssayFilesInMobile),e.R7$(),e.Y8G("cdkCopyToClipboard",o.copyLinkToClipboard(o.urlToUploadEssayFilesInMobile)),e.R7$(),e.Y8G("ngClass",e.lJ4(14,pE)),e.R7$(),e.SpI(" ",e.bMT(14,12,"lang_auto_sao_chep")," "),e.R7$(2),e.Y8G("fileName","azota_upload_essay_files")("linkUrl",o.copyLinkToClipboard(o.urlToUploadEssayFilesInMobile)))},dependencies:[hi.d,x.MD,x.YU,g.X1,L.iI,g.YN,z.wp,Y.s,zh.dF,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function fE(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-azt-essay-files-upload-box",3),e.bIt("changeEssayFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeEssayFiles(o))})("cancelChangeEssayFilesEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancelChangeEssayFiles())})("uploadActionsEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.uploadActionsEvent(o))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("uploadHashCode",t.data.uploadHashCode)("showCancelButton",!0)}}function gE(s,n){if(1&s&&e.nrm(0,"app-coazt-qr-code-of-upload-essay-files",4),2&s){const t=e.XpG();e.Y8G("uploadHashCode",t.data.uploadHashCode)}}let TE=(()=>{var s;class n extends kt._{changeEssayFiles(i){this.data.isFullScreenRequired&&this.sAztFullScreenService.showFullScreen(),this.dialogRef.close(i)}cancelChangeEssayFiles(){this.data.isFullScreenRequired&&this.sAztFullScreenService.showFullScreen(),this.dialogRef.close(void 0)}uploadActionsEvent(i){return"SELECT_FILE"==i?(this.sAztFullScreenVisibleService.setAllowTrackFullScreenStatus(!1),void this.sAztFullScreenVisibleService.setAllowTrackVisibleStatus(!1)):"SELECTED"==i?this.sAztFullScreenVisibleService.setAllowTrackVisibleStatus(!0):void 0}constructor(i,o,a){super(a,o),this.sAztFullScreenVisibleService=i,this.dialogRef=o,this.sAztFullScreenService=new $i}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(kr),e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-upload-essay-files-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["scrollViewport","","pointerEventsMethod","scrollbar",1,"upload-essay-dialog-box",2,"--scrollbar-size","5px","height","100%",3,"visibility"],[3,"uploadHashCode","showCancelButton","changeEssayFilesEvent","cancelChangeEssayFilesEvent","uploadActionsEvent",4,"ngIf"],[3,"uploadHashCode",4,"ngIf"],[3,"changeEssayFilesEvent","cancelChangeEssayFilesEvent","uploadActionsEvent","uploadHashCode","showCancelButton"],[3,"uploadHashCode"]],template:function(i,o){1&i&&(e.j41(0,"ng-scrollbar",0),e.DNE(1,fE,1,2,"app-azt-essay-files-upload-box",1)(2,gE,1,1,"app-coazt-qr-code-of-upload-essay-files",2),e.k0s()),2&i&&(e.Y8G("visibility","hover"),e.R7$(),e.Y8G("ngIf",o.data.uploadHashCode),e.R7$(),e.Y8G("ngIf",!o.isMobileDevice&&o.data.uploadHashCode))},dependencies:[mE.t,hE,x.MD,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,U.Yh,U.Gl,q.k],encapsulation:2}),n})(),s_=(()=>{var s;class n extends Z.H{onResize(){this.isMobileScreenSize=(new kf).checkByWidth()}goBackToExamDetails(){this.commonService.myNavigationWithQueryString("/de-thi/"+(this.hashId?this.hashId:this.currentTakeTestStepData.examObj.hashId),"?backto="+encodeURIComponent(this.backToLink))}checkScrollToShowTopBar(){return window.scrollY>50}selectStudentEvent(i){this.getInitDataFromApi()}showUploadEssayFilesDialog(){this.sAztFullScreenVisibleService.reset(),document.getElementById("monitorScreenTakeTest")?.style.setProperty("display","none"),this.currentTakeTestStepData.essayQuestionSubmitting=!0,this.sAztDialogService.open(TE,{data:{uploadHashCode:this.currentTakeTestStepData.uploadHashCode,isFullScreenRequired:this.currentTakeTestStepData.showFullScreenRequired},restoreFocus:!1,width:"100vw",maxWidth:"100vw",height:"100vh",backdropClass:"azt-backdrop-full-width-height",disableClose:!0}).afterClosed().subscribe(o=>{this.currentTakeTestStepData.essayQuestionSubmitting=!1,this.sAztFullScreenVisibleService.reset(),null!=o&&(window.scrollTo({top:0}),this.currentTakeTestStepData.files=o,window.scrollTo({top:0}),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData),this.currentTakeTestStepData.showFullScreenRequired&&this.sAztFullScreenService.showFullScreen(),this.openVideoMonitor())})}changeAnswerFiles(i){this.currentTakeTestStepData.files=i,this.sAztTakeTestCallApiService.updateEssayFilesToApi(this.currentTakeTestStepData).then(()=>{this.showSuccessSnack("lang_auto_cap_nhat_thanh_cong_dinh_kem_file_tu_luan")})}checkVipOrBasicExam(i,o){if(this.isBusinessDomain||this.isMobileWebView)return o(!0);this.waitDestroy(this.frontVipService.apiFrontVipCheckVipOrBasicObjectGet(i,"exam").subscribe(a=>{if(!a.success||a.data)return o(!0);this.checkAttempsExam(i,o)}))}redirectToVipUpgrade(){this.myNavigationWithQueryString("/auth/vip-packages/studentVip",`?backto=${encodeURIComponent(this.commonService.getCurrentUrlWithoutLocale())}&trackingKey=TAKE_TEST`)}checkAttempsExam(i,o){this.waitDestroy(this.commonService.wrapApiResponse(this.studentPracticeService.aiApiV1StudentPracticeCanAttemptExamGet(i)).subscribe(a=>{if(!a.success||a.data?.value)return o(!0);o(!1)}))}openVideoMonitor(){this.currentTakeTestStepData.showVideoRequired&&(document.getElementById("monitorScreenTakeTest")?.style?.setProperty("display","block"),this.sAztShowMonitorService.monitorAtTestPage({roomId:this.hashId,examConfig:this.currentTakeTestStepData.examObj,examId:this.currentTakeTestStepData.examObj.id,resultId:this.currentTakeTestStepData.termExamResultId,userList:[]},this.currentTakeTestStepData.testingUserObj,i=>{i&&(this.currentTakeTestStepData.isShowVideoMonitor=!0)}))}intervalExamTime(){if(this.currentTakeTestStepData?.isUnLimitedTime)return;const i=new An.B,o=(0,Qn.Y)(1e3).pipe((0,fi.Q)(i));this.waitDestroy(o.subscribe(a=>{if(this.currentTakeTestStepData.countDownSecond<=0)this.getServerTime(r=>{if(this.currentTakeTestStepData.countDownSecond<=0)return this.currentTakeTestStepData.viewQuestionObjs=this.sAztTestQuestionService.takeAnswerForQuestion(this.currentTakeTestStepData.answerList,this.currentTakeTestStepData.viewQuestionObjs),this.currentTakeTestStepData.isAutoSubmit=!0,this.processByStep(Ie.RUN_OUT_OF_TIME_AFTER_TEST,this.currentTakeTestStepData),this.sAztDialogService.dialog.closeAll(),i.next(!0)});else{let r=this.timeService.getCurrentSecond();this.currentTakeTestStepData.countDownSecond=this.currentTakeTestStepData.rawCountDownSecond-(r-this.currentTakeTestStepData.clientTimeSecond),this.currentTakeTestStepData=this.sAztTestQuestionService.calculateNewCountDown(this.currentTakeTestStepData)}}))}intervalToGetServerTime(){if(this.currentTakeTestStepData?.isUnLimitedTime)return;const i=new An.B,o=(0,Qn.Y)(1e3*this.commonService.getRandomNumber(200,300)).pipe((0,fi.Q)(i));this.waitDestroy(o.subscribe(a=>{this.getServerTime(r=>{})}))}getServerTime(i){this.waitDestroy(this.frontExamService.apiFrontExamGetTimeExamObjGet().subscribe(o=>{o.success&&o.data?.curServerTime?(this.currentTakeTestStepData.currentServerTime=o.data.curServerTime,this.currentTakeTestStepData.countDownSecond=this.currentTakeTestStepData.startTestTimeAtServerTime+60*(this.currentTakeTestStepData.examObj.minutes??0)-this.currentTakeTestStepData.currentServerTime,this.currentTakeTestStepData.clientTimeSecond=this.timeService.getCurrentSecond(),this.currentTakeTestStepData.rawCountDownSecond=this.currentTakeTestStepData.countDownSecond,this.currentTakeTestStepData=this.sAztTestQuestionService.calculateNewCountDown(this.currentTakeTestStepData),i(!0)):i(!1)}))}intervalToSendTestDataToApi(){const i=new An.B,o=(0,Qn.Y)(1e3*this.commonService.getRandomNumber(120,180)).pipe((0,fi.Q)(i));this.waitDestroy(o.subscribe(a=>{this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData)}))}openQuitDialog(){this.sAztDialogService.open(W2,{data:{countDownSecond:this.currentTakeTestStepData.countDownSecond,isUnLimitedTime:this.currentTakeTestStepData.isUnLimitedTime},restoreFocus:!1,width:"450px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(o=>{o&&this.goBackToExamDetails()})}openSubmitExam(){let i=this.currentTakeTestStepData.answerList.filter(r=>!this.commonService.isExistInArray(this.currentTakeTestStepData.essayQuestionIds,r.questionId)).length;this.sAztDialogService.open(Q2,{data:{countDownSecond:this.currentTakeTestStepData.countDownSecond,isUnLimitedTime:this.currentTakeTestStepData.isUnLimitedTime,notHasFiles:this.currentTakeTestStepData.hasEssayQuestion&&0==this.currentTakeTestStepData.files.length,totalTrueFalseLeftBlank:this.currentTakeTestStepData.countQuestion-this.currentTakeTestStepData.countEssayQuestion-i},restoreFocus:!1,width:"550px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(r=>{r&&this.submitTestToApi(!1)})}sendAudioForQuestion(i){this.currentTakeTestStepData=this.sAztTestAudioService.sendAudioForQuestion(this.currentTakeTestStepData,i)}setResultTracking(i){this.currentTakeTestStepData=this.sAztTestResultTrackService.setResultTracking(this.currentTakeTestStepData,i)}setQuestionTrueFalseAnswer(i){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionTrueFalseAnswer(this.currentTakeTestStepData,i),this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTestQuestionService.isShowAnswerStatusBox=!1}setQuestionOneChoiceAnswer(i){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionOneChoiceAnswer(this.currentTakeTestStepData,i),this.sAztTakeTestCallApiService.saveAnswerAndTrackInfoToApi(this.currentTakeTestStepData),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTestQuestionService.isShowAnswerStatusBox=!1}checkAnswerQuestionByApi(){if(!this.currentTakeTestStepData||"training"!=this.modeViewTest||!this.sAztTestQuestionService.checkQuestionHasAnswer(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id))return;let i=this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj,o={questionId:i.id,answerContent:[{index:999,content:""}]};const a={examResultId:this.currentTakeTestStepData.termExamResultId,answer:this.sAztTestQuestionService.getAnswerOfQuestion(this.currentTakeTestStepData,i.id)??o};this.answerTypeService.isTrueFalseAnswer(i)&&a.answer&&a.answer.answerContent.length<i.answers.length||(this.sAztTestQuestionService.isCheckingAnswer=!0,this.waitDestroy(this.frontExamResultService.apiFrontExamResultSaveQuestionResultEncryptPost(this.encryptionHelper.payload(a),this.currentTakeTestStepData.examObj.hashId).subscribe(r=>{if(!r.success)return this.sAztTestQuestionService.isCheckingAnswer=!1,this.errorStatusObj(r.message,!0);let l=r.data;i.numberOfChecks=(i.numberOfChecks??0)+1,this.sAztTestQuestionService.isShowAnswerStatusBox=!0,i.practiceCheckAnswer=l?.correct?"correct":"wrong","correct"==i.practiceCheckAnswer&&(this.sAztTestQuestionService.isShowSuccessAnimationBox=!0,this.currentTakeTestStepData?.nextBackQuestionModel.isLastQuestion||(this.sAztTestQuestionService.trainingAudioSuccess.play(),setTimeout(()=>{this.sAztTestQuestionService.trainingAudioSuccess.pause(),this.nextQuestion(i.id)},2e3))),"correct"!==i.practiceCheckAnswer&&(this.sAztTestQuestionService.hasWrongAnswer=!0),this.sAztTestQuestionService.isCheckingAnswer=!1})))}nextQuestion(i){this.currentTakeTestStepData&&this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id==i&&(this.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion||(this.currentTakeTestStepData=this.sAztTestNextBackQuestionService.nextTo(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj),this.sAztTestQuestionService.isShowSuccessAnimationBox=!1))}setQuestionFillAnswer(i){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionFillAnswer(this.currentTakeTestStepData,i),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData)}setQuestionEssayAnswer(i){this.currentTakeTestStepData=this.sAztTestQuestionService.setQuestionEssayAnswer(this.currentTakeTestStepData,i),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData)}submitTestToApi(i){if(this.isSubmittingAnswer)return;this.isSubmittingAnswer=!0,this.initStatusObj();var o=new Dt(this.hashId,this.browserStorageService).getInfo(),a=this.commonService.myClone(this.currentTakeTestStepData.resultTracks);let r=JSON.stringify({type:"exam",id:this.currentTakeTestStepData.examObj.id,user:this.currentTakeTestStepData.examObj.tenantId});var l={autoSubmit:i,serverCountDown:this.currentTakeTestStepData.countDownSecond,examMinutes:this.currentTakeTestStepData.examObj.minutes,saveStudentId:this.currentTakeTestStepData.testingUserObj.id,saveDeviceId:this.sAztTestDeviceIdService.getDeviceId(),deviceType:this.commonService.deviceType()};let c={answers:this.currentTakeTestStepData.answerList,notes:[],files:JSON.stringify(this.currentTakeTestStepData.files),infors:o,trackInfos:JSON.stringify(l),resultTrack:this.zipDataService.convertContentGzip(JSON.stringify(a)),saveTime:0,id:this.currentTakeTestStepData.termExamResultId??0};this.waitDestroy(this.frontExamResultService.apiFrontExamResultSaveResultEncryptPost(this.encryptionHelper.payload(c),r,this.hashId).subscribe(_=>_.success?"capacity"==this.modeViewTest&&_.data?.nextExamObj?.hashId?(this.isSubmittingAnswer=!1,void this.recallApiForNextExam()):(this.sAztTestQuestionService.clearAllData(this.currentTakeTestStepData),void this.commonService.myNavigationWithQueryString("/test/submit-test/"+this.tenantId+"/"+this.curCateId+"/"+this.hashId+"/"+_.data?.id,"?backto="+encodeURIComponent(this.backToLink)+("capacity"==this.modeViewTest?"&capacity=1":""))):i?(this.showErrorSnack(_.message),void setTimeout(()=>{this.isSubmittingAnswer=!1,this.submitTestToApi(!0)},5e3)):(this.isSubmittingAnswer=!1,void this.errorStatusObj(_.message,!0))))}recallApiForNextExam(){new Dt(this.currentTakeTestStepData.examObj.hashId??"",this.browserStorageService).removeInfo(),this.browserStorageService.removeSimpleStorage("saveResultTrack_"+this.currentTakeTestStepData.examObj.hashId+"_"+this.currentTakeTestStepData.termExamResultId),this.browserStorageService.removeSimpleStorage("saveScrollTrack_"+this.currentTakeTestStepData.examObj.hashId+"_"+this.currentTakeTestStepData.termExamResultId),this.browserStorageService.removeSimpleStorage("saveDataV4_"+this.currentTakeTestStepData.examObj.id+"_"+this.currentTakeTestStepData.termExamResultId),this.browserStorageService.removeSimpleStorage("limitAudioV6_"+this.currentTakeTestStepData.examObj.id+"_"+this.currentTakeTestStepData.termExamResultId),this.localStorageObject.clearAllCache();let i=new Dt(this.hashId,this.browserStorageService).getPassword(),o=new Dt(this.hashId,this.browserStorageService).hasInfo(),a=et.c.production||et.c.isProdAzotaVn;this.destroyAllSubs(),this.initStatusObj(),this.waitDestroy(a?this.frontExamService.apiFrontExamInitDataGet(this.hashId,i,o?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(r=>{const l=this.encryptionHelper.result(r);this.processInitData(""!=i,l)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,i,o?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(r=>{this.processInitData(""!=i,r)}))}processInitData(i,o){if(!(o&&o?.success&&o?.data&&o.data.examObj))return this.currentTakeTestStepData=void 0,this.forceShowErrorBox(o?.message??"");const a=this.userService.getUserObj();let r=o?.data?.errorMessage??"",l=""!=r,c={examObj:o.data.examObj,examConfigObj:o.data.examConfigObj,infoFields:this.commonService.myParseJson(o.data.examObj.infoFieldsV2??"")??[],authUserObj:a,studentObj:o.data.studentObj,termExamResultId:o.data.testingExamResultObj?.id,testingResultObj:o.data.testingExamResultObj,testingUserObj:this.homeworkExamService.mustInClassroom(o.data.examObj)?o.data.studentObj??a:a,uploadHashCode:o.data?.hashCodeUpload??"",currentStep:Ie.INIT,sequenceSteps:[Ie.SHOW_ESSAY_WARNING_DIALOG,Ie.SHOW_FULL_SCREEN,Ie.SHOW_VIDEO_REQUIRED],questionTestObjs:o.data.questionObjs,viewQuestionObjs:this.commonService.castJsonToClassObjs(Tr.I,JSON.stringify(o.data.questionObjs))??[],viewQuestionInGroupList:[],hasEssayQuestion:this.sAztTestQuestionService.getEssayQuestionIds(o.data.questionObjs).length>0,countEssayQuestion:this.sAztTestQuestionService.getEssayQuestionIds(o.data.questionObjs).length,essayQuestionIds:this.sAztTestQuestionService.getEssayQuestionIds(o.data.questionObjs),countQuestion:o.data.questionObjs.length,isAnonymousUser:this.userService.isAnonymousRoleOfCurrentUser(),isShowVideoMonitor:!1,startTestTimeAtServerTime:o.data?.startServerSecond??0,currentServerTime:o.data?.currentServerSecond??0,countDownSecond:o.data?.countDownSecond??0,rawCountDownSecond:o.data?.countDownSecond??0,isUnLimitedTime:(o.data.examObj.minutes??0)<=0,clientTimeSecond:this.timeService.getCurrentSecond(),isAutoSubmit:!1,isActualEndTime:!1,allowUploadEssayFileWhenEndTime:!0,autoSubmitAfterSeconds:void 0,loginRequired:!1,errorMessage:r,oldOrNotFoundResult:"lang_core_not_found_result_or_old_result"===r,cantTakeTestOnline:"lang_testbank_offline_exam_cant_be_test_online"===r,waitToTestTime:"lang_core_time_smaller_than_start_time"===r,isUnPurchased:"lang_core_does_not_owner_exam"===r,passwordRequired:"lang_core_exam_password_invalid"===r,isInvalidPassword:"lang_core_exam_password_invalid"===r&&i,isOnlyApp:1==o.data.examConfigObj?.allowAppOnly&&!this.isMobileWebView&&!o.data.examConfigObj?.allowWebUserIds?.includes(a.id),essayQuestionSubmitting:!1,showFullScreenRequired:null!=o.data.examObj.autoMonitor&&0!=o.data.examObj.autoMonitor&&!this.isMobileDevice,showVideoRequired:null!=o.data.examObj.autoMonitor&&3==o.data.examObj.autoMonitor,enterAnonymousFullNameRequired:!!this.userService.isAnonymousName(this.userService.getUserObj()),enterInfoRequired:!1,chooseStudentRequired:!1,chooseCapacityExamRequired:"lang_core_there_are_not_testing_component_for_capacity_exam"==r&&"WAITING"!==o.data.capacityTestStatus,capacityExamIntro:"WAITING"===o.data.capacityTestStatus,isRunOutOfTime:!1,resultTracks:[],files:[],answerList:[],trainingAnswerQuestions:void 0,nextBackQuestionModel:void 0,hasAlreadyGenerateQuestion:!1,hasAlreadyRunIntervalCountDown:!1,capacityComponent:o.data.capacityComponent,waitingTime:120};return c=this.sAztTestQuestionService.calculateNewCountDown(c),this.commonService.translateMetaData({title:c.examObj.name,description:c.examObj.name}),c.testingResultObj&&(c.resultTracks=this.sAztTestResultTrackService.getResultTrackFromLocalStorage(c.examObj,c.testingResultObj.id),c.viewQuestionObjs=this.sAztTestQuestionService.changeQuestionContent(c.examObj,c.testingResultObj.id,c.viewQuestionObjs),this.sAztTestAudioService.saveAudioLimitStorage(c.examObj,c.testingResultObj.id,c.viewQuestionObjs)),c.viewQuestionObjs=this.sAztTestQuestionService.resetQuestionIndex(c.viewQuestionObjs,c.examConfigObj?.resetQuestionIndex??!1),c=this.sAztTestNextBackQuestionService.init(c),this.sAztTestQuestionService.convertViewQuestionToQuestionInGroup(c),c.enterInfoRequired=1==c.examObj.enterInfo&&c.infoFields.length>0&&!new Dt(this.hashId,this.browserStorageService).hasInfo(),c.loginRequired=!this.homeworkExamService.allowAnonymousUser(c.examObj)&&c.isAnonymousUser||c.isOnlyApp&&c.isAnonymousUser,c.chooseStudentRequired=this.homeworkExamService.mustInClassroom(c.examObj)&&null==c.studentObj,c.isRunOutOfTime=!l&&c.countDownSecond<=0&&!c.isUnLimitedTime,this.processByStep(c.loginRequired?Ie.LOGIN_DIALOG:c.cantTakeTestOnline||c.oldOrNotFoundResult?Ie.SHOW_ERROR_MESSAGE:c.isOnlyApp?Ie.SHOW_APP_ONLY_MESSAGE:c.isUnPurchased?Ie.PAYMENT_DIALOG:c.passwordRequired||c.enterAnonymousFullNameRequired||c.enterInfoRequired?Ie.INFO_REQUIRED_DIALOG:c.waitToTestTime?Ie.WAIT_TO_TEST_TIME:c.chooseStudentRequired?Ie.CHOOSE_STUDENT:c.isRunOutOfTime?Ie.RUN_OUT_OF_TIME_WHEN_F5:c.chooseCapacityExamRequired?Ie.CAPACITY_EXAM_SELECT:c.capacityExamIntro?Ie.CAPACITY_EXAM_INTRO:l?Ie.SHOW_ERROR_MESSAGE:Ie.SEQUENCE_STEP,c)}processByStep(i,o){return this.currentTakeTestStepData=o,this.currentTakeTestStepData.currentStep=i,i==Ie.SHOW_ERROR_MESSAGE||i==Ie.SHOW_APP_ONLY_MESSAGE?this.stopStatusObj():i==Ie.LOGIN_DIALOG?(this.sAztDialogService.open(H2.J,{data:{},restoreFocus:!1,width:"450px",backdropClass:"azt-backdrop",disableClose:!0}),this.stopStatusObj()):i==Ie.PAYMENT_DIALOG?(this.sAztDialogService.open(Yh,{data:{examObj:o.examObj},restoreFocus:!1,width:"100vw",maxWidth:"100vw",height:"100vh",backdropClass:"azt-backdrop-full-width-height",disableClose:!0}).afterClosed().subscribe(l=>{"close"==l&&this.myNavigation(`/de-thi/${o.examObj.hashId}`)}),this.stopStatusObj()):i==Ie.INFO_REQUIRED_DIALOG?(this.sAztDialogService.open(_E,{data:{obj:o},restoreFocus:!1,width:"750px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(r=>{r&&this.getInitDataFromApi()}),this.stopStatusObj()):i==Ie.RUN_OUT_OF_TIME_WHEN_F5||i==Ie.RUN_OUT_OF_TIME_AFTER_TEST?this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,o,a=>(this.currentTakeTestStepData=a,this.currentTakeTestStepData.viewQuestionObjs=this.sAztTestQuestionService.takeAnswerForQuestion(o.answerList,o.viewQuestionObjs),this.stopStatusObj())):i==Ie.CHOOSE_STUDENT||i==Ie.CAPACITY_EXAM_SELECT||i==Ie.CAPACITY_EXAM_INTRO||i==Ie.WAIT_TO_TEST_TIME?this.stopStatusObj():i==Ie.SEQUENCE_STEP?this.startShowTestContent(o,a=>{if(a)return this.setProcessToErrorStep(a);let r=this.commonService.getFirstOfArray(o.sequenceSteps);return o.sequenceSteps=o.sequenceSteps.filter(l=>l!=r),this.processByStep(r||Ie.START_TEST,o)}):i==Ie.SHOW_ESSAY_WARNING_DIALOG?o.hasEssayQuestion?(this.sAztDialogService.open(Y2,{data:{},restoreFocus:!1,width:"400px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(()=>{this.processByStep(Ie.SEQUENCE_STEP,o)}),this.stopStatusObj()):this.processByStep(Ie.SEQUENCE_STEP,o):i==Ie.SHOW_FULL_SCREEN?o.showFullScreenRequired?(this.sAztDialogService.open(K2,{data:{},restoreFocus:!1,width:"400px",backdropClass:"azt-backdrop",disableClose:!0}).afterClosed().subscribe(()=>(this.sAztFullScreenService.showFullScreen(),this.processByStep(Ie.SEQUENCE_STEP,o))),this.stopStatusObj()):this.processByStep(Ie.SEQUENCE_STEP,o):i==Ie.SHOW_VIDEO_REQUIRED?o.showVideoRequired?(this.openVideoMonitor(),this.processByStep(Ie.SEQUENCE_STEP,o)):this.processByStep(Ie.SEQUENCE_STEP,o):i==Ie.START_TEST?this.startShowTestContent(o,a=>{if(a)return this.setProcessToErrorStep(a);this.stopStatusObj()}):void this.errorStatusObj("lang_take_test_not_found_process_step",!0)}setProcessToErrorStep(i){this.currentTakeTestStepData.errorMessage=i,this.processByStep(Ie.SHOW_ERROR_MESSAGE,this.currentTakeTestStepData)}initParams(){this.sAztFullScreenVisibleService.reset(),this.sAztTestDeviceIdService.getDeviceId(),document.getElementById("azota-app-html")?.classList.add("azotaHtml"),this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.curCateId=Number(this.commonService.getMyParam(this.activeRoute,"cate_id")),this.hashId=(this.commonService.getMyParam(this.activeRoute,"hash_id")??"").toString(),this.tenantId=Number(this.commonService.getMyParam(this.activeRoute,"tenant_id")),this.getInitDataFromApi()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){document.getElementById("azota-app-html")?.classList.remove("azotaHtml"),this.mixService.cancelSubscription(),this.sAztShowMonitorService.destroyMonitorAtStudentDashboard(),this.sAztTakeTestCallApiService.destroyAll(),this.sAztDialogService.closeAll(),super.ngOnDestroy()}constructor(){super(),this.activeRoute=(0,e.WQX)(L.nX),this.userService=(0,e.WQX)(mn.R),this.mixService=(0,e.WQX)(C2),this.localStorageObject=(0,e.WQX)(Cf.G),this.zipDataService=(0,e.WQX)(Vi.j),this.timeService=(0,e.WQX)(Xt.F),this.browserStorageService=(0,e.WQX)(Ns.z),this.frontExamResultService=(0,e.WQX)(ke.Ry),this.frontExamService=(0,e.WQX)(ke.iB),this.frontExamResultUploadService=(0,e.WQX)(ke.sc),this.sAztDialogService=(0,e.WQX)(wn.i),this.answerTypeService=(0,e.WQX)(ln._),this.homeworkExamService=(0,e.WQX)(pa.Z),this.questionRenderService=(0,e.WQX)(Ku.g),this.testMarketFeedbackService=(0,e.WQX)(Bu.l_),this.encryptionHelper=(0,e.WQX)(If.w),this.testLogExamResultAnswerService=(0,e.WQX)(I2.dO),this.sAztShowMonitorService=(0,e.WQX)(vh),this.sAztFullScreenVisibleService=(0,e.WQX)(kr),this.frontVipService=(0,e.WQX)(ke.uj),this.studentPracticeService=(0,e.WQX)(Fh.Kw),this.sAztFullScreenService=new $i,this.sAztTestResizeService=new R2,this.sAztTestNextBackQuestionService=new E2(this.commonService),this.sAztTestQuestionService=new O2(this.commonService,this.answerTypeService,this.browserStorageService,this.localStorageObject,this.sAztShowMonitorService),this.sAztTestDeviceIdService=new Ef(this.browserStorageService),this.sAztTestAudioService=new i_(this.commonService,this.browserStorageService),this.sAztTestResultTrackService=new F2(this.commonService,this.encryptionHelper,this.timeService,this.browserStorageService),this.sAztTakeTestCallApiService=new k2(this.commonService,this.zipDataService,this.browserStorageService,this.testMarketFeedbackService,this.encryptionHelper,this.testLogExamResultAnswerService,this.sAztTestQuestionService,this.sAztTestResultTrackService,this.frontExamResultUploadService,this.frontExamService),this.followerRenderQuest=new Pn.e,this.questsLoadState={startLoad:!1,loadPercent:0,hasErrs:!1,errData:new Array},this.isMobileScreenSize=(new kf).checkByWidth(),this.allTakeTestLayouts=Bt,this.backToLink="",this.homeLink="/student/classroom/0",this.hashId="",this.tenantId=1,this.curCateId=0,this.isSubmittingAnswer=!1,this.allowAttemptExam=!0}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-base-test-component"]],hostBindings:function(i,o){1&i&&e.bIt("resize",function(r){return o.onResize(r)},!1,e.tSv)},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})(),o_=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.changeShowType=new e.bkB,this.openQuitDialog=new e.bkB,this.showUploadEssayFilesDialog=new e.bkB,this.openSubmitExam=new e.bkB,this.selectStudentEvent=new e.bkB,this.changeAnswerFiles=new e.bkB,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.setResultTracking=new e.bkB,this.sendAudioForQuestion=new e.bkB,this.submitTestToApi=new e.bkB,this.selectCapacityExamEmitter=new e.bkB,this.startedExamEvent=new e.bkB,this.allTakeTestSteps=Ie,this.allTakeTestLayouts=Bt,this.allowContextMenu=!et.c.production,this.answerTypeService=(0,e.WQX)(ln._)}goBack(){let i=this.commonService.getMyQueryParam("backto")??"";this.commonService.myNavigationWithQueryString("/de-thi/"+this.currentTakeTestStepData.examObj.hashId,"?backto="+encodeURIComponent(i))}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-test-base-layout"]],inputs:{sAztTestResizeService:"sAztTestResizeService",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",currentTakeTestStepData:"currentTakeTestStepData",followerRenderQuest:"followerRenderQuest",questsLoadState:"questsLoadState",isMobileScreenSize:"isMobileScreenSize",homeLink:"homeLink",backToLink:"backToLink"},outputs:{changeShowType:"changeShowType",openQuitDialog:"openQuitDialog",showUploadEssayFilesDialog:"showUploadEssayFilesDialog",openSubmitExam:"openSubmitExam",selectStudentEvent:"selectStudentEvent",changeAnswerFiles:"changeAnswerFiles",setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",setResultTracking:"setResultTracking",sendAudioForQuestion:"sendAudioForQuestion",submitTestToApi:"submitTestToApi",selectCapacityExamEmitter:"selectCapacityExamEmitter",startedExamEvent:"startedExamEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})(),Er=(()=>{var s;class n extends Z.H{onResize(){var i=()=>!(this.currentTakeTestStepData.currentStep!=Ie.START_TEST||this.currentTakeTestStepData.essayQuestionSubmitting||!this.currentTakeTestStepData.showFullScreenRequired||this.sAztFullScreenService.checkFullScreen()||this.sAztFullScreenVisibleService.isSendingToApi()||!this.sAztFullScreenVisibleService.isAllowTrackFullScreen());i()&&setTimeout(()=>{i()&&(this.sAztFullScreenVisibleService.setSendingToApiStatus(!0),this.waitDestroy(this.frontExamTrackService.apiFrontExamTrackSaveObjPost({examId:this.currentTakeTestStepData.examObj.id,name:"exit_full_screen",examResultId:this.currentTakeTestStepData.termExamResultId??0}).subscribe(a=>{a.success&&this.commonService.snackWarning("lang_auto_ban_dang_bi_giam_sat_hay_tro_lai_che_do_toan_man_hinh"),setTimeout(()=>{this.sAztFullScreenVisibleService.setSendingToApiStatus(!1)},1e3)})))},5e3)}ngOnInit(){this.onResize(),super.ngOnInit()}constructor(i,o){super(),this.frontExamTrackService=i,this.sAztFullScreenVisibleService=o,this.sAztFullScreenService=new $i}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ke.XJ),e.rXU(kr))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-tracking-full-screen-event"]],hostBindings:function(i,o){1&i&&e.bIt("resize",function(r){return o.onResize(r)},!1,e.tSv)},inputs:{currentTakeTestStepData:"currentTakeTestStepData"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})(),Ar=(()=>{var s;class n extends Z.H{visibilitychange(){var i=()=>!(this.currentTakeTestStepData.currentStep!=Ie.START_TEST||this.currentTakeTestStepData.essayQuestionSubmitting||!this.currentTakeTestStepData.showFullScreenRequired||this.sAztFullScreenVisibleService.isSendingToApi()||!this.sAztFullScreenVisibleService.isAllowTrackVisible()||"visible"==document.visibilityState);i()&&setTimeout(()=>{i()&&(this.sAztFullScreenVisibleService.setSendingToApiStatus(!0),this.waitDestroy(this.frontExamTrackService.apiFrontExamTrackSaveObjPost({examId:this.currentTakeTestStepData.examObj.id,name:"blur_window",examResultId:this.currentTakeTestStepData.termExamResultId??0}).subscribe(a=>{a.success&&this.commonService.snackWarning("lang_auto_ban_dang_bi_giam_sat_hay_tro_lai_bai_thi"),setTimeout(()=>{this.sAztFullScreenVisibleService.setSendingToApiStatus(!1)},1e3)})))},5e3)}ngOnInit(){super.ngOnInit()}constructor(i,o){super(),this.frontExamTrackService=i,this.sAztFullScreenVisibleService=o}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ke.XJ),e.rXU(kr))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-tracking-visible-event"]],hostBindings:function(i,o){1&i&&e.bIt("visibilitychange",function(r){return o.visibilitychange(r)},!1,e.EBC)},inputs:{currentTakeTestStepData:"currentTakeTestStepData"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})(),Or=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.isConfirmReload=!0}stopConfirm(){this.isConfirmReload=!1}askBeforeCloseWindow(i){if(this.isConfirmReload)return i.returnValue=!1}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-leave-window-event"]],hostBindings:function(i,o){1&i&&e.bIt("beforeunload",function(r){return o.askBeforeCloseWindow(r)},!1,e.tSv)},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();var bE=O(52058);let a_=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.sAztUserService=(0,e.WQX)(mn.R),this.recommendationService=(0,e.WQX)(bE.h)}ngOnInit(){this.sAztUserService.isLogin()&&this.waitDestroy(this.recommendationService.aiApiV1RecommendationUpdateTagsForUserPost().subscribe(i=>{}))}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-tracking-user-tags"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();const Qi=()=>({"mr-2":!0}),r_=s=>({"btn-primary":s});function xE(s,n){if(1&s&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_thi_sinh"),": ",t.currentTakeTestStepData.testingUserObj.fullName,"")}}function vE(s,n){if(1&s&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function yE(s,n){if(1&s&&e.nrm(0,"app-testbank-frontend-count-down-box",31),2&s){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function SE(s,n){1&s&&(e.EFF(0),e.nI1(1,"mytranslate")),2&s&&e.SpI(" ",e.bMT(1,1,"lang_auto_khong_gioi_han")," ")}function wE(s,n){1&s&&e.nrm(0,"lucide-icon",32)}function IE(s,n){1&s&&e.nrm(0,"lucide-icon",33)}function CE(s,n){1&s&&e.nrm(0,"lucide-icon",34)}function kE(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.sAztFullScreenService.showFullScreen())}),e.nrm(1,"lucide-icon",38),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,Qi)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_toan_man_hinh")," "))}function EE(s,n){if(1&s&&(e.j41(0,"div",35),e.DNE(1,kE,4,5,"button",36),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.isMobileScreenSize)}}function AE(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",35)(1,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(2,"lucide-icon",40),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&s&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Qi)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dinh_kem_bai_tu_luan")," "))}function OE(s,n){if(1&s){const t=e.RV6();e.j41(0,"li")(1,"a",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.GROUP_QUESTION))}),e.nrm(2,"lucide-icon",42),e.j41(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(5,r_,t.layoutType===t.allTakeTestLayouts.GROUP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(7,Qi)),e.R7$(2),e.SpI(" ",e.bMT(5,3,"lang_azt_display_questions_by_group")," ")}}let l_=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.openQuitDialogEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.sAztFullScreenService=new $i,this.allTakeTestLayouts=Bt,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(i=>!i?.groupInfo?.groupId)}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-simple-test-header-box-for-desktop"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",sAztTestResizeService:"sAztTestResizeService",layoutType:"layoutType",isMobileScreenSize:"isMobileScreenSize"},outputs:{openQuitDialogEvent:"openQuitDialogEvent",changeShowTypeEvent:"changeShowTypeEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openSubmitExamEvent:"openSubmitExamEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:51,vars:45,consts:[["unlimitedTimeTpl",""],["layoutTypeMenu","matMenu"],[1,"fixed","w-full","box","rounded-none","items-center","flex","top-0","left-0","ng-star-inserted","p-3","z-index-1000","border-b","border-slate-200","dark:border-darkmode-400"],["azt-track-service","take-test-E4FLezP4kF",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["name","chevron-left","size","20"],[1,"relative","mx-auto"],["class","text-md font-medium",4,"ngIf"],[1,"mr-6"],[1,"flex","items-center"],["name","timer","size","20",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],[1,"flex","items-center","dropdown","mr-3"],["azt-track-service","take-test-DqyfiYKf45",1,"btn","btn-sm","btn-secondary","mr-2",3,"click","disabled","matTooltip"],["name","zoom-out","size","20"],["azt-track-service","take-test-lcadhTPzm",1,"btn","btn-sm","btn-secondary",3,"click","disabled","matTooltip"],["name","zoom-in","size","20"],["azt-track-service","take-test-UBz-4Fa9hv",1,"btn","btn-sm","btn-secondary",3,"matMenuTriggerFor"],["name","list","size","20",4,"ngIf"],["name","computer","size","20",4,"ngIf"],["name","layout-panel-left","size","20",4,"ngIf"],["class","mr-2",4,"ngIf"],["azt-track-service","take-test-U5gleH2CsWW",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","simple-test-header-box-for-desktop-LwFLoUqqHP",1,"dropdown-item","mb-1","items-center",3,"click","ngClass"],["name","list","size","16",3,"ngClass"],["azt-track-service","simple-test-header-box-for-desktop-BUfzS1hKTY",1,"dropdown-item","mb-1","items-center",3,"click","ngClass"],["name","computer","size","16",3,"ngClass"],[4,"ngIf"],[1,"text-md","font-medium"],[3,"totalSecond","useCountDown"],["name","list","size","20"],["name","computer","size","20"],["name","layout-panel-left","size","20"],[1,"mr-2"],["azt-track-service","take-test-7o7YbIPIyM","class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],["azt-track-service","take-test-7o7YbIPIyM",1,"btn","btn-sm","btn-secondary",3,"click"],["name","maximize","size","16",3,"ngClass"],["azt-track-service","take-test-EYDOxzj8YnB",1,"btn","btn-sm","btn-secondary",3,"click"],["name","paperclip","size","16",3,"ngClass"],["azt-track-service","simple-test-header-box-for-desktop-NNYZn1EpUR",1,"dropdown-item","items-center",3,"click","ngClass"],["name","layout-panel-left","size","16",3,"ngClass"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",2)(1,"div")(2,"button",3),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(3,"lucide-icon",4),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",5),e.DNE(7,xE,3,4,"span",6)(8,vE,2,1,"span",6),e.k0s(),e.j41(9,"div",7)(10,"div",8),e.nrm(11,"lucide-icon",9),e.DNE(12,yE,1,2,"app-testbank-frontend-count-down-box",10)(13,SE,2,3,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(15,"div",11)(16,"button",12),e.nI1(17,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomOut())}),e.nrm(18,"lucide-icon",13),e.k0s(),e.j41(19,"button",14),e.nI1(20,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomIn())}),e.nrm(21,"lucide-icon",15),e.k0s()(),e.j41(22,"div",11)(23,"button",16),e.DNE(24,wE,1,0,"lucide-icon",17)(25,IE,1,0,"lucide-icon",18)(26,CE,1,0,"lucide-icon",19),e.k0s()(),e.DNE(27,EE,2,1,"div",20)(28,AE,5,5,"div",20),e.j41(29,"div")(30,"button",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())}),e.nrm(31,"lucide-icon",22),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"mat-menu",null,1)(36,"div",23)(37,"ul",24)(38,"li")(39,"a",25),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.LIST_QUESTION))}),e.nrm(40,"lucide-icon",26),e.j41(41,"span"),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",27),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.STEP_QUESTION))}),e.nrm(46,"lucide-icon",28),e.j41(47,"span"),e.EFF(48),e.nI1(49,"mytranslate"),e.k0s()()(),e.DNE(50,OE,6,8,"li",29),e.k0s()()()}if(2&i){const a=e.sdS(14),r=e.sdS(35);e.R7$(4),e.SpI(" ",e.bMT(5,25,"lang_button_back")," "),e.R7$(3),e.Y8G("ngIf",!o.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.capacityComponent),e.R7$(3),e.Y8G("ngClass",e.lJ4(37,Qi)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(4),e.Y8G("disabled",o.sAztTestResizeService.fontSize<=1)("matTooltip",e.bMT(17,27,"lang_take_test_zoom_out")),e.R7$(3),e.Y8G("disabled",o.sAztTestResizeService.fontSize>=2)("matTooltip",e.bMT(20,29,"lang_take_test_zoom_in")),e.R7$(4),e.Y8G("matMenuTriggerFor",r),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.GROUP_QUESTION),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.showFullScreenRequired),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.hasEssayQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(38,Qi)),e.R7$(),e.SpI(" ",e.bMT(33,31,"lang_auto_nop_bai")," "),e.R7$(7),e.Y8G("ngClass",e.eq3(39,r_,o.layoutType===o.allTakeTestLayouts.LIST_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(41,Qi)),e.R7$(2),e.SpI(" ",e.bMT(43,33,"lang_auto_show_list")," "),e.R7$(3),e.Y8G("ngClass",e.eq3(42,r_,o.layoutType===o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(44,Qi)),e.R7$(2),e.SpI(" ",e.bMT(49,35,"lang_auto_show_unit")," "),e.R7$(2),e.Y8G("ngIf",o.isAllQuestionInGroup)}},dependencies:[Zt,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,In.kk,In.Cp,vt.oV,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const RE=()=>({"text-danger":!0}),Vo=()=>({"mr-2":!0}),c_=s=>({"bg-primary text-white font-medium":s});function FE(s,n){1&s&&e.nrm(0,"lucide-icon",26)}function jE(s,n){1&s&&e.nrm(0,"lucide-icon",27)}function zE(s,n){1&s&&e.nrm(0,"lucide-icon",28)}function DE(s,n){if(1&s&&e.nrm(0,"app-testbank-frontend-count-down-box",29),2&s){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function ME(s,n){1&s&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_gioi_han")))}function GE(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(1,"lucide-icon",32),e.k0s()}}function PE(s,n){if(1&s){const t=e.RV6();e.j41(0,"li")(1,"a",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.GROUP_QUESTION))}),e.nrm(2,"lucide-icon",34),e.j41(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(5,c_,t.layoutType===t.allTakeTestLayouts.GROUP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(7,Vo)),e.R7$(2),e.SpI(" ",e.bMT(5,3,"lang_azt_display_questions_by_group")," ")}}let u_=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.openSubmitExamEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=Bt,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(i=>!i?.groupInfo?.groupId)}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-simple-test-header-box-for-mobile"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",layoutType:"layoutType"},outputs:{openSubmitExamEvent:"openSubmitExamEvent",changeShowTypeEvent:"changeShowTypeEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:39,vars:33,consts:[["unlimitedTimeTpl",""],["layoutTypeMenu","matMenu"],[1,"fixed","w-full","box","border-b","border-slate-200","dark:border-darkmode-400","rounded-none","items-center","flex","top-0","left-0","ng-star-inserted","p-3","z-index-1000"],[1,"flex","items-center","w-full"],[1,"mr-auto","flex","items-center"],["azt-track-service","main-component-WXDHmEOSWA","matRipple","",1,"btn","btn-outline-secondary","rounded-full","w-8","h-8","border-0","shadow-none","p-1",3,"click"],["name","power","size","16","strokeWidth","2",3,"ngClass"],[1,"ml-2","flex","items-center"],[1,"flex","items-center","dropdown","mr-2"],["azt-track-service","take-test-UBz-4Fa9hv","matRipple","",1,"btn","btn-sm","btn-outline-secondary",2,"height","30px",3,"matMenuTriggerFor"],["name","list","size","20",4,"ngIf"],["name","computer","size","20",4,"ngIf"],["name","layout-panel-left","size","20",4,"ngIf"],[1,"inline-flex","border","border-slate-200","dark:border-darkmode-400","p-1","rounded-md","items-center","justify-center","mr-2"],["name","timer","size","20","strokeWidth","2",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],["class","btn btn-sm btn-outline-secondary mr-2","matRipple","",3,"click",4,"ngIf"],["matRipple","",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","simple-test-header-box-for-desktop-LwFLoUqqHP","matRipple","",1,"dropdown-item","font-medium","mb-1","items-center",3,"click","ngClass"],["name","list","size","16",3,"ngClass"],["azt-track-service","simple-test-header-box-for-desktop-BUfzS1hKTY","matRipple","",1,"dropdown-item","font-medium","mb-1","items-center",3,"click","ngClass"],["name","computer","size","16",3,"ngClass"],[4,"ngIf"],["name","list","size","20"],["name","computer","size","20"],["name","layout-panel-left","size","20"],[3,"totalSecond","useCountDown"],[1,"font-medium"],["matRipple","",1,"btn","btn-sm","btn-outline-secondary","mr-2",3,"click"],["name","paperclip","size","16"],["azt-track-service","simple-test-header-box-for-desktop-NNYZn1EpUR","matRipple","",1,"dropdown-item","font-medium","items-center",3,"click","ngClass"],["name","layout-panel-left","size","16",3,"ngClass"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(4,"lucide-icon",6),e.k0s()(),e.j41(5,"div",7)(6,"div",8)(7,"button",9),e.DNE(8,FE,1,0,"lucide-icon",10)(9,jE,1,0,"lucide-icon",11)(10,zE,1,0,"lucide-icon",12),e.k0s()(),e.j41(11,"div",13),e.nrm(12,"lucide-icon",14),e.DNE(13,DE,1,2,"app-testbank-frontend-count-down-box",15)(14,ME,3,3,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(16,GE,2,0,"button",16),e.j41(17,"button",17),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())}),e.nrm(18,"lucide-icon",18),e.j41(19,"span"),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()()()(),e.j41(22,"mat-menu",null,1)(24,"div",19)(25,"ul",20)(26,"li")(27,"a",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.LIST_QUESTION))}),e.nrm(28,"lucide-icon",22),e.j41(29,"span"),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s()()(),e.j41(32,"li")(33,"a",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.STEP_QUESTION))}),e.nrm(34,"lucide-icon",24),e.j41(35,"span"),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s()()(),e.DNE(38,PE,6,8,"li",25),e.k0s()()()}if(2&i){const a=e.sdS(15),r=e.sdS(23);e.R7$(4),e.Y8G("ngClass",e.lJ4(24,RE)),e.R7$(3),e.Y8G("matMenuTriggerFor",r),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",o.layoutType===o.allTakeTestLayouts.GROUP_QUESTION),e.R7$(2),e.Y8G("ngClass",e.lJ4(25,Vo)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",o.currentTakeTestStepData.hasEssayQuestion),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,Vo)),e.R7$(2),e.JRh(e.bMT(21,18,"lang_auto_nop_bai")),e.R7$(7),e.Y8G("ngClass",e.eq3(27,c_,o.layoutType===o.allTakeTestLayouts.LIST_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(29,Vo)),e.R7$(2),e.SpI(" ",e.bMT(31,20,"lang_auto_show_list")," "),e.R7$(3),e.Y8G("ngClass",e.eq3(30,c_,o.layoutType===o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(),e.Y8G("ngClass",e.lJ4(32,Vo)),e.R7$(2),e.SpI(" ",e.bMT(37,22,"lang_auto_show_unit")," "),e.R7$(2),e.Y8G("ngIf",o.isAllQuestionInGroup)}},dependencies:[Zt,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,In.kk,In.Cp,br.r6,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const NE=()=>({"transition-3":!0}),VE=s=>({"bg-primary/10":s}),LE=s=>({"text-primary":s}),Of=()=>({"mr-2":!0}),BE=()=>({"ml-2":!0}),$E=(s,n)=>({"btn-primary-soft":s,"btn-outline-secondary":n});function QE(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",18)(1,"a",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG().index,a=e.XpG();return e.Njj(a.setQuestionInGroup(o))}),e.j41(2,"div",20)(3,"div",21)(4,"div",22),e.EFF(5),e.k0s()(),e.j41(6,"div",23)(7,"div",24),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"div",25),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()()}if(2&s){const t=e.XpG(),i=t.$implicit,o=t.index,a=e.XpG();e.Y8G("ngClass",e.eq3(14,VE,o===a.indexGroup)),e.R7$(),e.FS9("id","azt_group_"+i.groupId),e.R7$(),e.Y8G("ngClass",e.eq3(16,LE,o===a.indexGroup)),e.R7$(),e.tcI("background: conic-gradient(#1e40afe6 ",i.totalCompletedQuestion/i.totalQuestion*100,"%, #e2e8f0 ",i.totalCompletedQuestion/i.totalQuestion*100,"%)"),e.R7$(2),e.SpI(" ",i.totalCompletedQuestion+"/"+i.totalQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(9,10,"lang_auto_nhom")+" "+(o+1)," "),e.R7$(3),e.SpI(" ",i.totalQuestion+" "+e.bMT(12,12,"lang_notice_question")," ")}}function qE(s,n){if(1&s&&(e.qex(0),e.DNE(1,QE,13,18,"div",17),e.bVm()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",t&&(null==t||null==t.questionList?null:t.questionList.length))}}function YE(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.prevIndexGroup())}),e.nrm(1,"lucide-icon",27),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(6,Of)),e.R7$(2),e.SpI(" ",e.bMT(4,2,"lang_auto_nhom")+" "+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup-1].groupId+" ("+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup-1].totalQuestion+" "+e.bMT(5,4,"lang_auto_cau_thuong")+")"," ")}}function UE(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.nextIndexGroup())}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"lucide-icon",29),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_nhom")+" "+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].groupId+" ("+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].totalQuestion+" "+e.bMT(4,4,"lang_auto_cau_thuong")+")"," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(6,BE))}}function XE(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",30),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.submitExamEvent.emit())}),e.nrm(1,"lucide-icon",31),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,Of)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_nop_bai")," "))}function WE(s,n){if(1&s&&(e.j41(0,"span",34),e.EFF(1),e.k0s()),2&s){let t;const i=e.XpG().$implicit,o=e.XpG();e.R7$(),e.SpI(" ",(null!==(t=null!=(null==i?null:i.labelIndex)?i.labelIndex:null!==(t=i.startQuestionIndexWidthViewGroup)&&void 0!==t?t:0)&&void 0!==t?t:0)+(null!==(t=o.currentTakeTestStepData.examObj.startQuestionIndex)&&void 0!==t?t:1)," ")}}function HE(s,n){if(1&s&&(e.j41(0,"span",34),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.originalLabel," ")}}function JE(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",32),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goToQuestionEvent.emit(o.id))}),e.DNE(1,WE,2,1,"span",33)(2,HE,2,1,"span",33),e.k0s()}if(2&s){const t=n.$implicit;e.Y8G("ngClass",e.l_i(3,$E,t.status,!t.status)),e.R7$(),e.Y8G("ngIf",!t.originalLabel),e.R7$(),e.Y8G("ngIf",t.originalLabel)}}let KE=(()=>{var s;class n extends Z.H{nextIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1].groupId}`),this.nextIndexGroupEvent.emit())}prevIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1].groupId}`),this.prevIndexGroupEvent.emit())}setQuestionInGroup(i){this.indexGroup!==i&&this.currentTakeTestStepData.viewQuestionInGroupList[i]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[i].groupId}`,{left:this.indexGroup<i?-20:-150}),this.setQuestionInGroupEvent.emit(i))}constructor(){super(),this.setQuestionInGroupEvent=new e.bkB,this.toggleShowListQuestionInGroupEvent=new e.bkB,this.prevIndexGroupEvent=new e.bkB,this.nextIndexGroupEvent=new e.bkB,this.submitExamEvent=new e.bkB,this.goToQuestionEvent=new e.bkB}ngOnInit(){}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-simple-test-footer-box-for-group-layout"]],viewQuery:function(i,o){if(1&i&&e.GBs(U.Yh,7),2&i){let a;e.mGM(a=e.lsd())&&(o.scrollable=a.first)}},inputs:{currentTakeTestStepData:"currentTakeTestStepData",indexGroup:"indexGroup",layoutType:"layoutType"},outputs:{setQuestionInGroupEvent:"setQuestionInGroupEvent",toggleShowListQuestionInGroupEvent:"toggleShowListQuestionInGroupEvent",prevIndexGroupEvent:"prevIndexGroupEvent",nextIndexGroupEvent:"nextIndexGroupEvent",submitExamEvent:"submitExamEvent",goToQuestionEvent:"goToQuestionEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:19,vars:9,consts:[["scrollbarRef",""],[1,"box","fixed","w-full","bottom-0","left-0","rounded-none","border-t","border-slate-200","z-999"],[1,"flex","items-center"],[1,"flex","items-center","mr-auto"],[1,"h-full","box-group-question"],["track","all","pointerEventsMethod","scrollbar",3,"visibility"],[1,"flex","items-center","p-2","user-select-none"],[4,"ngFor","ngForOf"],[1,"ml-auto","flex","itemcs-center","p-3"],["azt-track-service","take-test-in-group-layout-xO-By9VnKm",1,"btn","btn-outline-secondary","border-3","rounded-full","p-3","mr-3","w-10","h-10",3,"click"],["name","chevron-up","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ","class","btn btn-outline-primary mr-3",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj","class","btn btn-outline-primary",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_","class","btn btn-primary",3,"click",4,"ngIf"],["id","contentBlock",1,"shadow","border-t","border-slate-200/60","px-3","pb-3","questionListInGroup"],[1,"mt-0"],["azt-track-service","take-test-in-group-layout-2fFqi7pOaJ","class","btn p-4 border-slate-300 dark:border-darkmode-400 relative mr-3 mt-3 user-select-none","style","width: 55px; height: 30px",3,"ngClass","click",4,"ngFor","ngForOf"],["class","p-1 mr-5 rounded-md",3,"ngClass",4,"ngIf"],[1,"p-1","mr-5","rounded-md",3,"ngClass"],["azt-track-service","take-test-in-group-layout-Go4BLT6di",1,"cursor-pointer",3,"click","id"],[1,"flex","items-center","transition-3",3,"ngClass"],[1,"azt-progress-circle"],[1,"azt-progress-value","text-xs","font-medium"],[1,"ml-2","whitespace-nowrap"],[1,"font-medium","uppercase"],[1,"text-upercase","text-xs"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ",1,"btn","btn-outline-primary","mr-3",3,"click"],["name","move-left","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj",1,"btn","btn-outline-primary",3,"click"],["name","move-right","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_",1,"btn","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-2fFqi7pOaJ",1,"btn","p-4","border-slate-300","dark:border-darkmode-400","relative","mr-3","mt-3","user-select-none",2,"width","55px","height","30px",3,"click","ngClass"],["class","absolute absolute-center",4,"ngIf"],[1,"absolute","absolute-center"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"ng-scrollbar",5,0)(6,"div",6),e.DNE(7,qE,2,1,"ng-container",7),e.k0s()()()(),e.j41(8,"div",8)(9,"button",9),e.bIt("click",function(){return e.eBV(a),e.Njj(o.toggleShowListQuestionInGroupEvent.emit())}),e.nrm(10,"lucide-icon",10),e.k0s(),e.DNE(11,YE,6,7,"button",11)(12,UE,6,7,"button",12)(13,XE,4,5,"button",13),e.k0s()(),e.j41(14,"div",14)(15,"ng-scrollbar",5,0)(17,"div",15),e.DNE(18,JE,3,6,"button",16),e.k0s()()()()}2&i&&(e.R7$(4),e.Y8G("visibility","always"),e.R7$(3),e.Y8G("ngForOf",o.currentTakeTestStepData.viewQuestionInGroupList),e.R7$(3),e.Y8G("ngClass",e.lJ4(8,NE)),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup-1]),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup+1]),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup+1]),e.R7$(2),e.Y8G("visibility","always"),e.R7$(3),e.Y8G("ngForOf",null==o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup]?null:o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].questionList))},dependencies:[x.MD,x.YU,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,U.Yh,q.k],styles:[".border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{height:60px;max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:calc(100vw - 600px);height:64px}  .dark .azt-progress-value{background-color:#28334e}"]}),n})();const ZE=s=>({"sheet-screen-monitor":s}),eA=(s,n)=>({"col-span-1":s,"col-span-2":n}),tA=s=>({background:s}),nA=(s,n)=>({"btn-primary-soft":s,"btn-outline-secondary":n});function iA(s,n){if(1&s&&(e.j41(0,"div",5),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG().index;e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_nhom")+" "+(t+1))}}function sA(s,n){1&s&&(e.j41(0,"span",10),e.EFF(1,"*"),e.k0s())}function oA(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"button",7),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.layoutType==a.allTakeTestLayouts.LIST_QUESTION?a.sAztTestNextBackQuestionService.scrollTo(o):a.sAztTestNextBackQuestionService.goTo(a.currentTakeTestStepData,o))}),e.j41(3,"span",8),e.EFF(4),e.nI1(5,"examDisplayNumber"),e.DNE(6,sA,2,0,"span",9),e.k0s()()(),e.bVm()}if(2&s){let t;const i=n.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.l_i(7,eA,!o.isMobileScreenSize&&o.layoutType==o.allTakeTestLayouts.STEP_QUESTION,o.isMobileScreenSize||o.layoutType!=o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(),e.Y8G("ngStyle",e.eq3(10,tA,i.status&&!i.finishedAnswering?"#faebd7":""))("ngClass",e.l_i(12,nA,i.status,!i.status)),e.R7$(2),e.SpI(" ",e.bMT(5,5,null!==(t=i.originalLabel)&&void 0!==t?t:(null!==(t=null!==(t=i.labelIndex)&&void 0!==t?t:i.startQuestionIndexWidthViewGroup)&&void 0!==t?t:0)+(null!==(t=o.currentTakeTestStepData.examObj.startQuestionIndex)&&void 0!==t?t:1))," "),e.R7$(2),e.Y8G("ngIf",o.layoutType==o.allTakeTestLayouts.STEP_QUESTION&&(null==o.currentTakeTestStepData.nextBackQuestionModel||null==o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj?null:o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)==i.id)}}function aA(s,n){if(1&s&&(e.j41(0,"div",0),e.DNE(1,iA,3,3,"div",2),e.j41(2,"div",3),e.DNE(3,oA,7,15,"ng-container",4),e.k0s()()),2&s){const t=n.$implicit,i=e.XpG();e.R7$(),e.Y8G("ngIf",i.currentTakeTestStepData.viewQuestionInGroupList.length>1),e.R7$(),e.Y8G("ngClass",e.eq3(3,ZE,!i.isMobileScreenSize&&i.currentTakeTestStepData.isShowVideoMonitor)),e.R7$(),e.Y8G("ngForOf",t.questionList)}}let Rr=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.allTakeTestLayouts=Bt}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-list-shortcut-question-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",requiredNextBackQuestionModel:"requiredNextBackQuestionModel",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",isMobileScreenSize:"isMobileScreenSize",layoutType:"layoutType"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:1,consts:[[1,"flex","flex-col","gap-2"],["class","flex flex-col gap-2",4,"ngFor","ngForOf"],["class","text-md font-medium",4,"ngIf"],[1,"grid","grid-cols-10","gap-2","sheet-screen",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"text-md","font-medium"],[3,"ngClass"],["azt-track-service","take-test-wdi0TAS3bgU",1,"btn","p-4","border-slate-300","dark:border-darkmode-400","relative","user-select-none","w-full","h-full",3,"click","ngStyle","ngClass"],[1,"absolute","absolute-center"],["class","relative","style","color: #ffa700; top: -7px",4,"ngIf"],[1,"relative",2,"color","#ffa700","top","-7px"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,aA,4,5,"div",1),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngForOf",o.currentTakeTestStepData.viewQuestionInGroupList))},dependencies:[x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,z.Em,U.Id,q.k],styles:[".absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}"]}),n})();const Rf=()=>({"mr-2":!0}),__=s=>({"btn-primary text-white":s}),rA=()=>({"mr-2 text-primary":!0}),lA=()=>({"mr-2 text-danger":!0});function cA(s,n){if(1&s&&e.nrm(0,"app-testbank-frontend-count-down-box",24),2&s){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function uA(s,n){1&s&&(e.j41(0,"span",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_khong_gioi_han")))}function _A(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.GROUP_QUESTION))}),e.nrm(1,"lucide-icon",27),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,__,t.layoutType===t.allTakeTestLayouts.GROUP_QUESTION))}}function dA(s,n){if(1&s&&e.nrm(0,"app-coazt-list-shortcut-question-box",28),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",!0)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)}}function mA(s,n){if(1&s){const t=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(2,"lucide-icon",30),e.j41(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}2&s&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Rf)),e.R7$(2),e.JRh(e.bMT(5,2,"lang_auto_dinh_kem_tu_luan")))}let Ff=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.setQuestionInGroupEvent=new e.bkB,this.toggleShowListQuestionInGroupEvent=new e.bkB,this.prevIndexGroupEvent=new e.bkB,this.nextIndexGroupEvent=new e.bkB,this.submitExamEvent=new e.bkB,this.goToQuestionEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=Bt,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(i=>!i?.groupInfo?.groupId)}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-simple-test-menu-bar"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",layoutType:"layoutType",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService"},outputs:{setQuestionInGroupEvent:"setQuestionInGroupEvent",toggleShowListQuestionInGroupEvent:"toggleShowListQuestionInGroupEvent",prevIndexGroupEvent:"prevIndexGroupEvent",nextIndexGroupEvent:"nextIndexGroupEvent",submitExamEvent:"submitExamEvent",goToQuestionEvent:"goToQuestionEvent",changeShowTypeEvent:"changeShowTypeEvent",openSubmitExamEvent:"openSubmitExamEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:35,vars:24,consts:[["unlimitedTimeTpl",""],["scrollbarRef",""],[1,"dropdown-menu","show","relative","mb-2"],[1,"dropdown-content"],[1,"p-1","flex","items-center"],[1,"inline-flex","border","whitespace-nowrap","border-slate-200","dark:border-darkmode-400","p-1","rounded-md","items-center","justify-center","mr-2"],["name","timer","size","20","strokeWidth","2",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],["azt-track-service","simple-test-menu-bar-lV1kU-823",1,"btn","btn-sm","btn-outline-secondary","mr-2",3,"click","ngClass"],["name","list","size","16"],["azt-track-service","simple-test-menu-bar-EvCVyvwQzF",1,"btn","btn-sm","btn-outline-secondary","mr-2",3,"click","ngClass"],["name","computer","size","16"],["azt-track-service","simple-test-menu-bar-8YbUT33pgv","class","btn btn-sm btn-outline-secondary",3,"ngClass","click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],[1,"p-0","-m-2"],[1,"height-200px"],["track","all","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-2"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],["azt-track-service","take-test-qCh4rHipyZ7",1,"dropdown-item","font-medium",2,"align-items","center",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[4,"ngIf"],["azt-track-service","take-test-Sv-5CQ5vRW_",1,"dropdown-item","font-medium",2,"align-items","center",3,"click"],["name","power","size","16",3,"ngClass"],[3,"totalSecond","useCountDown"],[1,"font-medium"],["azt-track-service","simple-test-menu-bar-8YbUT33pgv",1,"btn","btn-sm","btn-outline-secondary",3,"click","ngClass"],["name","layout-panel-left","size","16"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],["azt-track-service","take-test-Hl-nLDepRGa",1,"dropdown-item","font-medium",2,"align-items","center",3,"click"],["name","paperclip","size","16",3,"ngClass"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",2)(1,"ul",3)(2,"li",4)(3,"div",5),e.nrm(4,"lucide-icon",6),e.DNE(5,cA,1,2,"app-testbank-frontend-count-down-box",7)(6,uA,3,3,"ng-template",null,0,e.C5r),e.k0s(),e.j41(8,"button",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.LIST_QUESTION))}),e.nrm(9,"lucide-icon",9),e.k0s(),e.j41(10,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(o.allTakeTestLayouts.STEP_QUESTION))}),e.nrm(11,"lucide-icon",11),e.k0s(),e.DNE(12,_A,2,3,"button",12),e.k0s(),e.j41(13,"li"),e.nrm(14,"hr",13),e.k0s(),e.j41(15,"li",14)(16,"div",15)(17,"ng-scrollbar",16,1)(19,"div",17),e.DNE(20,dA,1,5,"app-coazt-list-shortcut-question-box",18),e.k0s()()()(),e.j41(21,"li"),e.nrm(22,"hr",13),e.k0s(),e.j41(23,"li")(24,"a",19),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())}),e.nrm(25,"lucide-icon",20),e.j41(26,"span"),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s()()(),e.DNE(29,mA,6,5,"li",21),e.j41(30,"li")(31,"a",22),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(32,"lucide-icon",23),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s()()()()}if(2&i){const a=e.sdS(7);e.R7$(4),e.Y8G("ngClass",e.lJ4(17,Rf)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(3),e.Y8G("ngClass",e.eq3(18,__,o.layoutType===o.allTakeTestLayouts.LIST_QUESTION)),e.R7$(2),e.Y8G("ngClass",e.eq3(20,__,o.layoutType===o.allTakeTestLayouts.STEP_QUESTION)),e.R7$(2),e.Y8G("ngIf",o.isAllQuestionInGroup),e.R7$(5),e.Y8G("visibility","always"),e.R7$(3),e.Y8G("ngIf",o.currentTakeTestStepData.nextBackQuestionModel),e.R7$(5),e.Y8G("ngClass",e.lJ4(22,rA)),e.R7$(2),e.JRh(e.bMT(28,13,"lang_auto_nop_bai")),e.R7$(2),e.Y8G("ngIf",o.currentTakeTestStepData.hasEssayQuestion),e.R7$(3),e.Y8G("ngClass",e.lJ4(23,lA)),e.R7$(),e.SpI(" ",e.bMT(34,15,"lang_auto_thoat")," ")}},dependencies:[Zt,Rr,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,U.Yh,q.k],styles:[".border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.height-showListQuestion[_ngcontent-%COMP%]{height:calc(100vh - 180px)}.height-hiddenListQuestion[_ngcontent-%COMP%]{height:calc(100vh - 127px)}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:100vw;height:64px}.max-height-400px[_ngcontent-%COMP%]{max-height:400px}.height-200px[_ngcontent-%COMP%]{height:200px}.h-48px[_ngcontent-%COMP%]{height:48px}.p-0[_ngcontent-%COMP%]{padding:0}.-m-2[_ngcontent-%COMP%]{margin:-.5rem}  .dark .azt-progress-value{background-color:#28334e}"]}),n})();const pA=(s,n)=>({"rotate-180deg":s,"rotate-0":n}),hA=s=>({"text-primary":s});function fA(s,n){if(1&s){const t=e.RV6();e.j41(0,"li")(1,"a",24),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG();return e.Njj(a.setQuestionInGroupEvent.emit(o))}),e.j41(2,"div",25)(3,"div",9)(4,"div",10),e.EFF(5),e.k0s()(),e.j41(6,"div",11)(7,"div",12),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"div",13),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()()}if(2&s){const t=n.$implicit,i=n.index,o=e.XpG();e.R7$(),e.FS9("id","azt_group_"+t.groupId),e.R7$(),e.Y8G("ngClass",e.eq3(13,hA,i===o.indexGroup)),e.R7$(),e.tcI("background: conic-gradient(#1e40afe6 ",t.totalCompletedQuestion/t.totalQuestion*100,"%, #e2e8f0 ",t.totalCompletedQuestion/t.totalQuestion*100,"%)"),e.R7$(2),e.SpI(" ",t.totalCompletedQuestion+"/"+t.totalQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(9,9,"lang_auto_nhom")+" "+(i+1)," "),e.R7$(3),e.SpI(" ",t.totalQuestion+" "+e.bMT(12,11,"lang_notice_question")," ")}}let gA=(()=>{var s;class n extends Z.H{nextIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup+1].groupId}`),this.nextIndexGroupEvent.emit())}prevIndexGroup(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1]&&(this.scrollable.scrollToElement(`#azt_group_${this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup-1].groupId}`),this.prevIndexGroupEvent.emit())}constructor(){super(),this.setQuestionInGroupEvent=new e.bkB,this.toggleShowListQuestionInGroupEvent=new e.bkB,this.prevIndexGroupEvent=new e.bkB,this.nextIndexGroupEvent=new e.bkB,this.submitExamEvent=new e.bkB,this.goToQuestionEvent=new e.bkB,this.changeShowTypeEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=Bt}ngOnInit(){}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-simple-test-footer-box-for-group-layout-mobile"]],viewQuery:function(i,o){if(1&i&&e.GBs(U.Yh,7),2&i){let a;e.mGM(a=e.lsd())&&(o.scrollable=a.first)}},inputs:{currentTakeTestStepData:"currentTakeTestStepData",indexGroup:"indexGroup",layoutType:"layoutType",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService"},outputs:{setQuestionInGroupEvent:"setQuestionInGroupEvent",toggleShowListQuestionInGroupEvent:"toggleShowListQuestionInGroupEvent",prevIndexGroupEvent:"prevIndexGroupEvent",nextIndexGroupEvent:"nextIndexGroupEvent",submitExamEvent:"submitExamEvent",goToQuestionEvent:"goToQuestionEvent",changeShowTypeEvent:"changeShowTypeEvent",openSubmitExamEvent:"openSubmitExamEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:30,vars:22,consts:[["menuTrigger","matMenuTrigger"],["questionGroupListMenu","matMenu"],["actionMenu","matMenu"],[1,"box","fixed","w-full","bottom-0","left-0","rounded-none","border-t","border-slate-200","z-999"],[1,"flex","items-center"],[1,"p-2","mr-auto"],[1,"py-1","px-3","mr-5","rounded-md","bg-primary/10"],[1,"cursor-pointer",3,"id","matMenuTriggerFor"],[1,"flex","items-center","transition-3","text-primary"],[1,"azt-progress-circle"],[1,"azt-progress-value","text-xs","font-medium"],[1,"ml-2","whitespace-nowrap"],[1,"font-medium","uppercase"],[1,"text-upercase","text-xs"],[1,"ml-2","transition-3",3,"ngClass"],["name","chevron-down","size","20"],[1,"ml-3","pr-2"],[1,"btn","btn-outline-secondary","rounded-full","h-48px","w-48px",3,"matMenuTriggerFor"],["name","layout-grid","size","20"],["xPosition","before"],[1,"dropdown-menu","show","white-scroll","relative","w-64","mb-2"],[1,"dropdown-content","max-height-400px","overflow-auto","custom-scroll"],[4,"ngFor","ngForOf"],[3,"submitExamEvent","goToQuestionEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"],["azt-track-service","simple-test-footer-box-for-group-layout-mobile-ka0g-91UQ",1,"cursor-pointer","dropdown-item",3,"click","id"],[1,"flex","items-center","transition-3",3,"ngClass"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"a",7,0)(6,"div",8)(7,"div",9)(8,"div",10),e.EFF(9),e.k0s()(),e.j41(10,"div",11)(11,"div",12),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"div",13),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()(),e.j41(17,"div",14),e.nrm(18,"lucide-icon",15),e.k0s()()()()(),e.j41(19,"div",16)(20,"button",17),e.nrm(21,"lucide-icon",18),e.k0s()()()(),e.j41(22,"mat-menu",19,1)(24,"div",20)(25,"ul",21),e.DNE(26,fA,13,15,"li",22),e.k0s()()(),e.j41(27,"mat-menu",19,2)(29,"app-coazt-simple-test-menu-bar",23),e.bIt("submitExamEvent",function(){return e.eBV(a),e.Njj(o.submitExamEvent.emit())})("goToQuestionEvent",function(l){return e.eBV(a),e.Njj(o.goToQuestionEvent.emit(l))})("changeShowTypeEvent",function(l){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(l))})("openSubmitExamEvent",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())})("showUploadEssayFilesDialogEvent",function(){return e.eBV(a),e.Njj(o.showUploadEssayFilesDialogEvent.emit())})("openQuitDialogEvent",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.k0s()()}if(2&i){const a=e.sdS(5),r=e.sdS(23),l=e.sdS(28);e.R7$(4),e.FS9("id","azt_group_"+o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].groupId),e.Y8G("matMenuTriggerFor",r),e.R7$(3),e.tcI("background: conic-gradient(#1e40afe6 ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalCompletedQuestion/o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion*100,"%, #e2e8f0 ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalCompletedQuestion/o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion*100,"%)"),e.R7$(2),e.SpI(" ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalCompletedQuestion+"/"+o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion," "),e.R7$(3),e.SpI(" ",e.bMT(13,15,"lang_auto_nhom")+" "+(o.indexGroup+1)," "),e.R7$(3),e.SpI(" ",o.currentTakeTestStepData.viewQuestionInGroupList[o.indexGroup].totalQuestion+" "+e.bMT(16,17,"lang_notice_question")," "),e.R7$(2),e.Y8G("ngClass",e.l_i(19,pA,a.menuOpen,!a.menuOpen)),e.R7$(3),e.Y8G("matMenuTriggerFor",l),e.R7$(6),e.Y8G("ngForOf",o.currentTakeTestStepData.viewQuestionInGroupList),e.R7$(3),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData)("layoutType",o.allTakeTestLayouts.GROUP_QUESTION)("sAztTestNextBackQuestionService",o.sAztTestNextBackQuestionService)}},dependencies:[Ff,x.MD,x.YU,x.Sq,g.X1,L.iI,g.YN,z.wp,Y.s,In.kk,In.Cp,F.flO,F.WGl,W.L,U.Id,q.k],styles:[".border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.h-55px[_ngcontent-%COMP%]{height:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:100vw;height:64px}.max-height-400px[_ngcontent-%COMP%]{max-height:400px}.h-48px[_ngcontent-%COMP%]{height:48px}.w-48px[_ngcontent-%COMP%]{width:48px}  .dark .azt-progress-value{background-color:#28334e}.rotate-180deg[_ngcontent-%COMP%]{transform:rotate(-180deg)}.rotate-0[_ngcontent-%COMP%]{transform:rotate(0)}"]}),n})();var Lo=O(20839),jf=O(65588),TA=O(96405);const bA=s=>({"selected-answer border-selected-answer":s}),xA=(s,n,t,i)=>({"border-radius":s,width:n,height:t,"line-height:":i}),vA=s=>({"border-selected-answer":s}),yA=s=>({"pb-2":s}),SA=(s,n)=>({"border-selected-answer":s,"w-full":n}),zf=(s,n,t)=>({"border-radius":"50%",width:s,height:n,"line-height:":t}),Df=s=>({"border-selected-answer selected-answer":s}),wA=s=>({"list-answer-mobile":s}),IA=()=>({"mr-1":!0});function CA(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_please_select_one_correct_answer")," "))}function kA(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_please_select_corrects_answer")," "))}function EA(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",11)(1,"div",12),e.bIt("click",function(){const o=e.eBV(t),a=o.$implicit,r=o.index,l=e.XpG(2);return e.Njj(l.setOneChoiceAnswer(a,r,a.alpha,a.key))}),e.j41(2,"button",13),e.nI1(3,"isOneChoiceAnswer"),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isOneChoiceAnswer"),e.nI1(6,"isOneChoiceAnswer"),e.EFF(7),e.k0s(),e.j41(8,"div",14),e.nrm(9,"azt-dynamic-hook",15),e.k0s()()()}if(2&s){const t=n.$implicit,i=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.eq3(13,bA,t.checked))("ngStyle",e.ziG(15,xA,e.bMT(3,5,i.question)?"50%":"none",e.bMT(4,7,i.question)&&i.fontSize>1.6?i.fontSize+"em":"40px",e.bMT(5,9,i.question)&&i.fontSize>1.6?i.fontSize+"em":"40px",e.bMT(6,11,i.question)&&i.fontSize>1.6?i.fontSize+"em":"40px")),e.R7$(5),e.SpI(" ",t.alpha?t.alpha:t.key," "),e.R7$(),e.Y8G("ngClass",e.eq3(20,vA,t.checked)),e.R7$(),e.Y8G("content",t.content)}}function AA(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",6)(2,"span",7),e.DNE(3,CA,3,3,"span",5),e.nI1(4,"isOneChoiceAnswer"),e.DNE(5,kA,3,3,"span",5),e.nI1(6,"isMultipleChoiceAnswer"),e.k0s()(),e.j41(7,"div",null,0)(9,"div",8)(10,"div",9),e.DNE(11,EA,10,22,"div",10),e.k0s()()(),e.bVm()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",e.bMT(4,7,t.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,9,t.question)),e.R7$(5),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize<1.5?t.fontSize+.5:"1.7"),e.R7$(),e.Y8G("ngForOf",t.question.answers)}}function OA(s,n){1&s&&(e.j41(0,"div",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function RA(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",18),e.DNE(1,OA,3,3,"div",19),e.j41(2,"div",20,2)(4,"div",14)(5,"span",21),e.EFF(6),e.k0s(),e.nrm(7,"azt-dynamic-hook",15),e.k0s(),e.j41(8,"button",22),e.bIt("click",function(){const o=e.eBV(t),a=o.$implicit,r=o.index,l=e.XpG(2);return e.Njj(l.setTrueFalseAnswer(a,r,a.alpha,a.key,"T"))}),e.j41(9,"span",23),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()(),e.j41(12,"button",24),e.bIt("click",function(){const o=e.eBV(t),a=o.$implicit,r=o.index,l=e.XpG(2);return e.Njj(l.setTrueFalseAnswer(a,r,a.alpha,a.key,"F"))}),e.j41(13,"span",23),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()()}if(2&s){const t=n.$implicit,i=e.sdS(3);e.XpG();const o=e.sdS(7),a=e.XpG();e.R7$(),e.Y8G("ngIf",o.offsetWidth<i.offsetWidth),e.R7$(),e.Y8G("ngClass",e.eq3(15,yA,o.offsetWidth<i.offsetWidth)),e.R7$(2),e.Y8G("ngClass",e.l_i(17,SA,null!=t.checked,a.isMobileDevice)),e.R7$(2),e.JRh((t.alpha?t.alpha:t.key).toLowerCase()+") "),e.R7$(),e.Y8G("content",t.content),e.R7$(),e.Y8G("ngStyle",e.sMw(20,zf,a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px"))("ngClass",e.eq3(24,Df,null!=t.checked&&1==t.checked)),e.R7$(2),e.JRh(e.bMT(11,11,"lang_auto_dung")),e.R7$(2),e.Y8G("ngStyle",e.sMw(26,zf,a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px",a.fontSize>1.6?a.fontSize+"em":"40px"))("ngClass",e.eq3(30,Df,null!=t.checked&&0==t.checked)),e.R7$(2),e.JRh(e.bMT(15,13,"lang_auto_sai"))}}function FA(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",6)(2,"span",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",16)(6,"div",9,1),e.DNE(8,RA,16,32,"div",17),e.k0s()(),e.bVm()),2&s){const t=e.XpG();e.R7$(3),e.SpI(" ",e.bMT(4,6,"lang_core_please_select_answer_true_or_false")," "),e.R7$(3),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize<1.5?t.fontSize+.5:"1.7"),e.R7$(2),e.Y8G("ngForOf",t.question.answers)}}function jA(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",26)(2,"div",6)(3,"span",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",27)(7,"div",28)(8,"textarea",29,3),e.nI1(10,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(9),a=e.XpG();return e.Njj(a.setFillAnswer(o.value))}),e.k0s(),e.j41(11,"span",30),e.nrm(12,"lucide-icon",31),e.j41(13,"span",32),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()()(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(14,wA,t.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,8,"lang_auto_nhap_dap_an")),e.R7$(4),e.FS9("placeholder",e.bMT(10,10,"lang_auto_dap_an_cua_ban")),e.Y8G("value",t.question.essayText),e.BMQ("isImage",!1)("question_id",t.question.id),e.R7$(4),e.Y8G("ngClass",e.lJ4(16,IA)),e.R7$(2),e.JRh(e.bMT(15,12,"lang_fill_question_note"))}}function zA(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",33)(2,"div",6)(3,"span",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",28)(7,"textarea",29,4),e.nI1(9,"mytranslate"),e.bIt("input",function(){e.eBV(t);const o=e.sdS(8),a=e.XpG();return e.Njj(a.setEssayAnswer(o.value))}),e.k0s()()(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,5,"lang_auto_bai_lam")),e.R7$(3),e.FS9("placeholder",e.bMT(9,7,"lang_auto_bai_lam_cua_ban")),e.Y8G("value",t.question.essayText),e.BMQ("isImage",!1)("question_id",t.question.id)}}let Mf=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.fontSize=1,this.setResultTracking=new e.bkB,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.configRenderService=new jf.y}setOneChoiceAnswer(i,o,a,r){if(!r&&!a)return;let l=[this.questionIndex.toString(),a??"",r??"",this.question.id.toString()];this.setResultTracking.emit(l),this.setOneChoiceAnswerEmitter.emit({questionId:this.question.id,answerConfig:i,answerIndex:o})}setTrueFalseAnswer(i,o,a,r,l){if(l===i.status)return;i.status=l,a&&(a+="-"+l),r&&(r+="-"+l);let c=[this.questionIndex.toString(),a??"",r??"",this.question.id.toString()];this.setResultTracking.emit(c),this.setTrueFalseAnswerEmitter.emit({questionId:this.question.id,answerConfig:i,answerIndex:o})}setFillAnswer(i){this.setFillAnswerEmitter.emit({questionId:this.question.id,value:i})}setEssayAnswer(i){this.setEssayAnswerEmitter.emit({questionId:this.question.id,value:i})}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-answer-view-for-student-at-step-page"]],inputs:{question:"question",questionIndex:"questionIndex",fontSize:"fontSize"},outputs:{setResultTracking:"setResultTracking",setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:9,vars:14,consts:[["lisAnswerGroup",""],["answerGroup",""],["answer",""],["curEssayFillInput",""],["curEssayAnswerInput",""],[4,"ngIf"],[1,"strike"],[1,"font-medium","text-slate-600","dark:text-slate-500"],[1,"p-3",2,"overflow","auto"],[1,"list-answer"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"item-answer","inline-flex","items-center","cursor-pointer","hover-border-primary",3,"click"],[1,"btn","border-slate-400","mr-3",3,"ngClass","ngStyle"],[1,"answer-content","p-2","border","border-slate-400","dark:border-darkmode-400","rounded-md",3,"ngClass"],[3,"content"],[1,"p-3"],["class","overflow-auto",4,"ngFor","ngForOf"],[1,"overflow-auto"],["class","mt-2 text-danger",4,"ngIf"],[1,"item-answer","flex","items-center","mt-2","cursor-pointer","hover-border-primary",2,"width","fit-content","min-width","100%",3,"ngClass"],[1,"font-medium"],[1,"btn","border-slate-400","nohover","rounded-full","ml-2","mr-2",3,"click","ngStyle","ngClass"],[1,"text-xs"],[1,"btn","border-slate-400","nohover","rounded-full",3,"click","ngStyle","ngClass"],[1,"mt-2","text-danger"],[1,"azt-answer",3,"ngClass"],[1,"flex","items-center","justify-between","w-full"],[1,"azt-answer-content","p-3","w-full"],["autoResize","",1,"w-full","form-control",3,"input","placeholder","value"],[1,"text-slate-400","text-xs","mt-1",2,"align-content","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle","align-content","center"],[1,"azt-answer"]],template:function(i,o){1&i&&(e.DNE(0,AA,12,11,"ng-container",5),e.nI1(1,"isOneChoiceAnswer"),e.nI1(2,"isMultipleChoiceAnswer"),e.DNE(3,FA,9,8,"ng-container",5),e.nI1(4,"isTrueFalseAnswer"),e.DNE(5,jA,16,17,"ng-container",5),e.nI1(6,"isFillAnswer"),e.DNE(7,zA,10,9,"ng-container",5),e.nI1(8,"isEssayAnswer")),2&i&&(e.Y8G("ngIf",e.bMT(1,4,o.question)||e.bMT(2,6,o.question)),e.R7$(3),e.Y8G("ngIf",e.bMT(4,8,o.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,10,o.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,12,o.question)))},dependencies:[Po.x,x.MD,x.YU,x.Sq,x.bT,x.B3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,z.V6,z.nn,z.Zm,z.N3,z.FC,U.Id,q.k,Hu.j],encapsulation:2}),n})();class DA{constructor(){this.isDestroy=!1}}const MA=s=>({"skeleton-box-loading":s}),GA=s=>({"pb-2":s}),PA=s=>({"remove-grid":s}),NA=s=>({"pr-7":s}),VA=s=>({"mt-4":s}),LA=s=>({"w-100":s});function BA(s,n){if(1&s&&e.nrm(0,"div",7),2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,MA,t.isFirstRender))}}function $A(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-test-audio-ui",16),e.bIt("sendAudioEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioEmit.emit(o))}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("questionObj",t.question)("isShowList",!0)("totalLimit",((null==t.examObj?null:t.examObj.limitAudio)||-1)>0?(null==t.examObj?null:t.examObj.limitAudio)||-1:0)}}function QA(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI("(",e.bMT(2,1,"lang_auto_hoi_de_thi_offline"),")"))}function qA(s,n){if(1&s&&(e.j41(0,"div",17),e.EFF(1),e.DNE(2,QA,3,3,"span",15),e.nI1(3,"isOfflineExam"),e.k0s()),2&s){let t;const i=e.XpG(2);e.R7$(),e.SpI(" ",i.customQuestionLabel+" "+(null!==(t=i.question.originalLabel)&&void 0!==t?t:(void 0!==i.question.labelIndex?i.question.labelIndex:i.index)+(null!==(t=i.startQuestionIndex)&&void 0!==t?t:1))," "),e.R7$(),e.Y8G("ngIf",e.bMT(3,2,i.examObj))}}function YA(s,n){if(1&s&&(e.j41(0,"div",22)(1,"b",23),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.j41(4,"div",24),e.nrm(5,"azt-dynamic-hook",18),e.k0s()()),2&s){let t;const i=n.$implicit,o=e.XpG(4);e.R7$(),e.Y8G("ngClass",e.eq3(5,NA,o.fontSize>1.5)),e.R7$(),e.JRh(e.bMT(3,3,o.question)?(null!==(t=i.alpha)&&void 0!==t?t:i.key).toLowerCase()+")":(null!==(t=i.alpha)&&void 0!==t?t:i.key)+"."),e.R7$(3),e.Y8G("content",i.content)}}function UA(s,n){if(1&s&&(e.j41(0,"div",20),e.DNE(1,YA,6,7,"div",21),e.k0s()),2&s){const t=e.XpG(3);e.Y8G("ngClass",e.eq3(3,PA,t.fontSize>1.5))("answerSizeManager",t.answerSizeManager),e.R7$(),e.Y8G("ngForOf",t.question.answers)}}function XA(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",8),e.nrm(2,"azt-dynamic-hook",18),e.k0s(),e.DNE(3,UA,2,5,"div",19),e.nI1(4,"isTrueFalseAnswer"),e.nI1(5,"isOneChoiceAnswer"),e.bVm()),2&s){let t;const i=e.XpG(2);e.R7$(2),e.Y8G("content",null!==(t=i.question.content)&&void 0!==t?t:""),e.R7$(),e.Y8G("ngIf",(e.bMT(4,2,i.question)||e.bMT(5,4,i.question))&&i.question.answers&&i.question.answers.length>0&&i.overTime)}}function WA(s,n){if(1&s&&(e.j41(0,"div",8)(1,"div",9),e.eu8(2,10),e.j41(3,"div",11),e.DNE(4,$A,1,3,"azt-test-audio-ui",12),e.j41(5,"div",13),e.DNE(6,qA,4,4,"div",14),e.k0s(),e.DNE(7,XA,6,6,"ng-container",15),e.nI1(8,"isOfflineExam"),e.k0s()(),e.eu8(9,10),e.k0s()),2&s){const t=e.XpG(),i=e.sdS(5),o=e.sdS(7),a=e.sdS(9);e.R7$(),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize<1.5?t.fontSize+.5:"1.7"),e.Y8G("id","question_render_container_"+t.question.id)("ngClass",e.eq3(13,GA,t.question.attachments.length>0)),e.R7$(),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("ngIf",t.question.attachments.length>0),e.R7$(2),e.Y8G("ngIf",!t.hideQuestionLabel),e.R7$(),e.Y8G("ngIf",!e.bMT(8,11,t.examObj)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.overTime?a:o)}}function HA(s,n){if(1&s&&(e.j41(0,"div",26),e.nrm(1,"azt-dynamic-hook",18),e.k0s()),2&s){let t;const i=e.XpG(3);e.Y8G("ngClass",e.eq3(2,VA,i.isMobile)),e.R7$(),e.Y8G("content",null!==(t=null==i.question.groupInfo?null:i.question.groupInfo.groupContent)&&void 0!==t?t:"")}}function JA(s,n){if(1&s&&(e.qex(0),e.DNE(1,HA,2,4,"div",25),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.question.groupInfo?null:t.question.groupInfo.isFirstInGroup)}}function KA(s,n){if(1&s&&e.DNE(0,JA,2,1,"ng-container",15),2&s){const t=e.XpG();e.Y8G("ngIf",!(null!=t.examObj&&t.examObj.hideGroupQuestion)||(null==t.question?null:t.question.isRoleTeacher))}}function ZA(s,n){if(1&s&&e.eu8(0,10),2&s){e.XpG();const t=e.sdS(3);e.Y8G("ngTemplateOutlet",t)}}function eO(s,n){if(1&s&&(e.j41(0,"div",29),e.eu8(1,10),e.k0s()),2&s){e.XpG();const t=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function tO(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-question-answer-view-for-student-at-step-page",30),e.bIt("setResultTracking",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setResultTracking.emit(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setEssayAnswerEmitter.emit(o))}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("question",t.question)("questionIndex",t.index)("fontSize",t.fontSize)}}function nO(s,n){if(1&s&&e.DNE(0,ZA,1,1,"ng-container",27)(1,eO,2,1,"div",28)(2,tO,1,3,"ng-template",null,4,e.C5r),2&s){const t=e.XpG();e.Y8G("ngIf",t.takeTestLayout==t.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",t.takeTestLayout!=t.allTakeTestLayouts.LIST_QUESTION)}}function iO(s,n){if(1&s&&(e.j41(0,"span",36),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.question.choseAnswer," ")}}function sO(s,n){1&s&&(e.j41(0,"span")(1,"b",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_chua_tra_loi")))}function oO(s,n){if(1&s&&(e.j41(0,"div",33)(1,"p",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,iO,2,1,"span",35)(5,sO,4,3,"span",15),e.k0s()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_dap_an_cua_ban"),":"),e.R7$(2),e.Y8G("ngIf",t.question.choseAnswer&&t.question.choseAnswer.length&&""!=t.question.choseAnswer[0]),e.R7$(),e.Y8G("ngIf",!t.question.choseAnswer||!t.question.choseAnswer.length||""==t.question.choseAnswer[0])}}function aO(s,n){if(1&s&&(e.j41(0,"span",39)(1,"b",40),e.EFF(2),e.k0s(),e.j41(3,"b",41),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&s){const t=n.$implicit;e.R7$(2),e.JRh((t.alpha?t.alpha:t.key).toLowerCase()+") - "),e.R7$(2),e.JRh(e.bMT(5,2,t.checked?"lang_auto_dung":"lang_auto_sai"))}}function rO(s,n){if(1&s&&(e.qex(0),e.DNE(1,aO,6,4,"span",38),e.bVm()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.question.answers)}}function lO(s,n){1&s&&(e.j41(0,"span")(1,"b",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_chua_tra_loi")))}function cO(s,n){if(1&s&&(e.j41(0,"div",33)(1,"p",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,rO,2,1,"ng-container",15)(5,lO,4,3,"span",15),e.k0s()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_dap_an_cua_ban"),":"),e.R7$(2),e.Y8G("ngIf",t.hasAnswerChecking()),e.R7$(),e.Y8G("ngIf",!t.hasAnswerChecking())}}function uO(s,n){if(1&s&&e.nrm(0,"textarea",45),2&s){const t=e.XpG(3);e.Y8G("value",t.question.choseAnswer),e.BMQ("question_id",t.question.id)}}function _O(s,n){if(1&s&&(e.nrm(0,"textarea",45),e.nI1(1,"mytranslate")),2&s){const t=e.XpG(3);e.Y8G("value",e.bMT(1,2,"lang_auto_thi_sinh_chua_nhap_thong_tin")),e.BMQ("question_id",t.question.id)}}function dO(s,n){if(1&s&&(e.j41(0,"div",33)(1,"p",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",42)(5,"div",43),e.DNE(6,uO,1,2,"textarea",44)(7,_O,2,4,"textarea",44),e.k0s()()()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,4,"lang_auto_dap_an_cua_ban"),":"),e.R7$(2),e.Y8G("ngClass",e.eq3(6,LA,t.isMobile)),e.R7$(2),e.Y8G("ngIf",t.question.choseAnswer&&t.question.choseAnswer.length&&""!=t.question.choseAnswer[0]),e.R7$(),e.Y8G("ngIf",!t.question.choseAnswer||!t.question.choseAnswer.length||""==t.question.choseAnswer[0])}}function mO(s,n){if(1&s&&(e.j41(0,"div",31),e.DNE(1,oO,6,5,"div",32),e.nI1(2,"isOneChoiceAnswer"),e.DNE(3,cO,6,5,"div",32),e.nI1(4,"isTrueFalseAnswer"),e.DNE(5,dO,8,8,"div",32),e.nI1(6,"isEssayAnswer"),e.nI1(7,"isFillAnswer"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,3,t.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,5,t.question)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,7,t.question)||e.bMT(7,9,t.question))}}let Fr=(()=>{var s;class n extends Z.H{startRenderQuestion(){!this.question||this.disableRender||this.flagObjectComponent.isDestroy?this.disableRender&&!this.flagObjectComponent.isDestroy&&this.doneRender.emit():this.questionRenderService.parseRenderQuestion(this.question,this.configRenderService).then(()=>{this.flagObjectComponent.isDestroy||this.doneRender.emit()}).catch(i=>{this.flagObjectComponent.isDestroy||this.showErrorSnack(i.message)})}get customQuestionLabel(){return(this.commonService.castJsonToObj(this.expandInfo??"{}")??{}).label??"C\xe2u"}hasAnswerChecking(){return null!=this.question.answers.filter(i=>1==i.checked)}ngOnChanges(){this.fontSize&&(this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg"),this.startRenderQuestion())}ngDoCheck(){if(this.isRenderElement)return;const i=document.getElementById("question_render_element_"+this.question.id);i&&(this.disableLazy||i.getAttribute("start_loading")&&"true"==i.getAttribute("start_loading"))&&(this.isRenderElement||(this.isFirstRender&&(this.startRenderQuestion(),this.follower.doneItemPartQuest()),this.isFirstRender=!1,this.isRenderElement=!0))}ngOnInit(){super.ngOnInit(),this.backToLink=`/test/answer-test/${this.configExam?.tenantId??0}/${this.configExam?.categoryId??0}/${this.configExam?.hashId}/${this.curResultId}`,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg"),this.flagObjectComponent.isDestroy=!1}ngOnDestroy(){this.flagObjectComponent.isDestroy=!0,super.ngOnDestroy()}constructor(i){super(),this.questionRenderService=i,this.follower=new Pn.e,this.mathJaxImage=!1,this.disableLazy=!1,this.disableRender=!1,this.index=0,this.last=!1,this.hideQuestionLabel=!1,this.answerSizeManager=0,this.fontSize=1,this.orgExamObjs=[],this.isMobile=!1,this.overTime=!1,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.sendAudioEmit=new e.bkB,this.setResultTracking=new e.bkB,this.nextQuestionEmitter=new e.bkB,this.prevQuestionEmitter=new e.bkB,this.doneRender=new e.bkB,this.allTakeTestLayouts=Bt,this.isFirstRender=!0,this.isRenderElement=!1,this.flagObjectComponent=new DA,this.backToLink="",this.configRenderService=new jf.y}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Ku.g))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-standalone-for-student-at-full-test"]],inputs:{follower:"follower",mathJaxImage:"mathJaxImage",disableLazy:"disableLazy",disableRender:"disableRender",curResultId:"curResultId",index:"index",last:"last",questionListLength:"questionListLength",configExam:"configExam",expandInfo:"expandInfo",question:"question",hideQuestionLabel:"hideQuestionLabel",answerSizeManager:"answerSizeManager",fontSize:"fontSize",orgExamObjs:"orgExamObjs",startQuestionIndex:"startQuestionIndex",isMobile:"isMobile",takeTestLayout:"takeTestLayout",overTime:"overTime",examObj:"examObj"},outputs:{setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",sendAudioEmit:"sendAudioEmit",setResultTracking:"setResultTracking",nextQuestionEmitter:"nextQuestionEmitter",prevQuestionEmitter:"prevQuestionEmitter",doneRender:"doneRender"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:10,vars:3,consts:[["elementRended",""],["showQuestionGroupContent",""],["normalShowTpl",""],["overTimeTpl",""],["viewQuestionAnswerBox",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","mb-0","no-border-question","border-slate-200/60","dark:border-darkmode-400",3,"id","ngClass"],[3,"ngTemplateOutlet"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList","totalLimit","sendAudioEmitter",4,"ngIf"],[1,"flex","items-center","justify-between"],["class","question-standalone-label",4,"ngIf"],[4,"ngIf"],[3,"sendAudioEmitter","questionObj","isShowList","totalLimit"],[1,"question-standalone-label"],[3,"content"],["class","row answers",3,"ngClass","answerSizeManager",4,"ngIf"],[1,"row","answers",3,"ngClass","answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label",3,"ngClass"],[1,"answer-content"],["class","group-content-of-question-standalone",3,"ngClass",4,"ngIf"],[1,"group-content-of-question-standalone",3,"ngClass"],[3,"ngTemplateOutlet",4,"ngIf"],["class","ml-auto mr-auto w-full",4,"ngIf"],[1,"ml-auto","mr-auto","w-full"],[3,"setResultTracking","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","question","questionIndex","fontSize"],[1,"answer-box","ml-auto","mr-auto"],["class","answer-content-front",4,"ngIf"],[1,"answer-content-front"],[1,"h5","mb-0","mr-2",2,"align-self","center"],["class","answer-review","style","background-color: rgba(243, 156, 18, 1); color: rgb(255, 255, 255)",4,"ngIf"],[1,"answer-review",2,"background-color","rgba(243, 156, 18, 1)","color","rgb(255, 255, 255)"],[2,"color","#cd1324","font-weight","450"],["class","mr-2",4,"ngFor","ngForOf"],[1,"mr-2"],[2,"font-weight","450"],[1,"text-warning",2,"font-weight","450"],[1,"row",2,"width","80%",3,"ngClass"],[1,"col-sm-12","mb-1"],["autoResize","","class","form-control mt-1","readonly","",3,"value",4,"ngIf"],["autoResize","","readonly","",1,"form-control","mt-1",3,"value"]],template:function(i,o){if(1&i&&(e.j41(0,"div",5),e.DNE(1,BA,1,3,"div",6)(2,WA,10,15,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,KA,1,1,"ng-template",null,1,e.C5r)(6,nO,4,2,"ng-template",null,2,e.C5r)(8,mO,8,11,"ng-template",null,3,e.C5r)),2&i){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.question.id),e.R7$(),e.Y8G("ngIf",!o.isRenderElement)("ngIfElse",a)}},dependencies:[TA.C,Ir.c,Po.x,Mf,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,z.st,z.V6,z.Zm,z.N3,z.FC,U.Id,q.k,Hu.j,Cr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();var jr=O(82205);const Gf=s=>({nodeObjs:s}),pO=s=>({"margin-left":s}),hO=s=>({"font-bold clickable":s}),fO=()=>({"text-pending":!0}),gO=(s,n)=>({"text-danger":s,"text-slate-500":n});function TO(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",4),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function bO(s,n){if(1&s&&(e.j41(0,"div",17)(1,"div",18),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,1,t.errorMessage))}}function xO(s,n){1&s&&e.eu8(0)}function vO(s,n){if(1&s&&(e.qex(0),e.DNE(1,xO,1,0,"ng-container",19),e.bVm()),2&s){const t=e.XpG(2),i=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,Gf,t.combineExamCapacity))}}function yO(s,n){1&s&&e.nrm(0,"azt-loading-ui",20)}function SO(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",5)(1,"h3",6),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"h3",7),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"h3",8),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.DNE(12,bO,4,3,"div",9),e.j41(13,"div",10)(14,"div",11),e.DNE(15,vO,2,4,"ng-container",12),e.k0s()(),e.j41(16,"div",13)(17,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.j41(20,"button",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmSelected())}),e.DNE(21,yO,1,0,"azt-loading-ui",16),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,11,"lang_auto_only_de_thi"),": ",e.bMT(4,13,null==t.capacityObj?null:t.capacityObj.name),""),e.R7$(4),e.Lme("",e.bMT(7,15,"lang_cms_publish_test_exam")," ",e.bMT(8,17,null==t.capacityObj?null:t.capacityObj.hashId),""),e.R7$(4),e.JRh(e.bMT(11,19,"lang_capacity_selected_exam")),e.R7$(2),e.Y8G("ngIf",t.errorMessage),e.R7$(3),e.Y8G("ngIf",t.combineExamCapacity.length),e.R7$(3),e.SpI(" ",e.bMT(19,21,"lang_auto_quay_lai")," "),e.R7$(2),e.Y8G("disabled",t.statusObj.loading||t.isInValidSubmitSave()),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(23,23,"lang_button_confirm")," ")}}function wO(s,n){if(1&s){const t=e.RV6();e.j41(0,"span")(1,"input",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.selectedFolder(o))})("change",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.checkValidationErrorAgain())}),e.k0s()()}if(2&s){const t=e.XpG().$implicit;e.R7$(),e.Y8G("formControl",t.isSelectedFormControl)}}function IO(s,n){1&s&&e.nrm(0,"span",30)}function CO(s,n){1&s&&e.nrm(0,"azt-svg-icon",33),2&s&&e.Y8G("size",20)}function kO(s,n){if(1&s){const t=e.RV6();e.j41(0,"i",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.selectedFolder(o))}),e.DNE(1,CO,1,1,"azt-svg-icon",32),e.k0s()}if(2&s){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf","FOLDER"==t.data.objectType)}}function EO(s,n){1&s&&e.nrm(0,"lucide-icon",34),2&s&&e.Y8G("ngClass",e.lJ4(1,fO))}function AO(s,n){if(1&s&&(e.j41(0,"span",35),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("ngClass",e.l_i(13,gO,t.hasError,!t.hasError)),e.R7$(),e.ZXR(" (",e.bMT(2,7,"lang_cms_auto_gen_test_select")," ",t.totalPart," ",e.bMT(3,9,"lang_azt_in")," ",t.children.length," - ",e.bMT(4,11,"lang_auto_da_chon"),": ",i.countSelectedPart(t),") ")}}function OO(s,n){1&s&&e.eu8(0)}function RO(s,n){if(1&s&&(e.qex(0),e.DNE(1,OO,1,0,"ng-container",19),e.bVm()),2&s){const t=e.XpG().$implicit;e.XpG(2);const i=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,Gf,t.children))}}function FO(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",22)(2,"div",23),e.DNE(3,wO,2,1,"span",12)(4,IO,1,0,"span",24)(5,kO,2,1,"i",25)(6,EO,1,2,"lucide-icon",26),e.j41(7,"p",27),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj("FOLDER"==o.data.objectType?a.selectedFolder(o):null)}),e.EFF(8),e.DNE(9,AO,5,16,"span",28),e.k0s()(),e.DNE(10,RO,2,4,"ng-container",12),e.k0s(),e.bVm()}if(2&s){const t=n.$implicit;e.R7$(2),e.Y8G("ngStyle",e.eq3(9,pO,15*t.level+"px")),e.R7$(),e.Y8G("ngIf",t.showCheckbox),e.R7$(),e.Y8G("ngIf",!t.showCheckbox),e.R7$(),e.Y8G("ngIf","FOLDER"==t.data.objectType),e.R7$(),e.Y8G("ngIf","EXAM"==t.data.objectType),e.R7$(),e.Y8G("ngClass",e.eq3(11,hO,"FOLDER"==t.data.objectType)),e.R7$(),e.SpI(" ",t.text," "),e.R7$(),e.Y8G("ngIf",t.showSelectCount&&t.isExpand),e.R7$(),e.Y8G("ngIf",t.isExpand&&t.children.length)}}function jO(s,n){if(1&s&&e.DNE(0,FO,11,13,"ng-container",21),2&s){const t=n.nodeObjs,i=e.XpG();e.Y8G("ngForOf",i.asTemplateDataObj(t))}}let d_=(()=>{var s;class n extends yf.C{confirmSelected(){this.initStatusObj();let i=this.getListSelectedExam(this.combineExamCapacity,[]);this.waitDestroy(this.frontExamService.apiFrontExamSaveTestCapacityExamComponentHashIdPost(this.hashId,{examHashIds:i}).subscribe(o=>{o.success||this.forceShowErrorBox(o.message,!0),this.selectCapacityExamEmitter.emit(!0)}))}countSelectedPart(i){return i.children.filter(o=>o.isSelectedFormControl.value).length}goBack(){let i=this.commonService.getMyQueryParam("backto")??"";this.commonService.myNavigationWithQueryString("/de-thi/"+this.capacityObj?.hashId,"?backto="+encodeURIComponent(i))}selectedFolder(i){"EXAM"!=i.data.objectType&&(i.isExpand=!i.isExpand,i.isExpand||(i.hasError=!1),i.isSelectedFormControl.setValue(i.isExpand),i.isSelectedFormControl.value?this.processRequiredData(i.children,i.totalPart):this.setCheckboxToFalse(i.children),this.checkValidationErrorAgain())}checkValidationErrorAgain(){this.processRequiredData(this.combineExamCapacity,void 0)}processRequiredData(i,o){i.forEach(a=>{let r=this.isDefaultSelectAll(a.children.length,a.totalPart);"FOLDER"==a.data.objectType&&!r&&(a.showSelectCount=!0);let l=a.isSelectedFormControl.value;a.isExpand=l;let c=this.isDefaultSelectAll(i.length,o);c&&(l=!0),a.isSelectedFormControl.value!=l&&a.isSelectedFormControl.setValue(l),a.showCheckbox=!c,"FOLDER"==a.data.objectType&&l&&(a.isExpand=!0,this.processRequiredData(a.children,a.totalPart),a.hasError=(a.totalPart?a.totalPart:a.children.length)!=this.countSelectedPart(a))})}setCheckboxToFalse(i){i.forEach(o=>{o.isSelectedFormControl.setValue(!1),o.children.length&&this.setCheckboxToFalse(o.children)})}isDefaultSelectAll(i,o){return null==o||o<=0||o==i}isInValidSubmitSave(){return!this.getListSelectedExam(this.combineExamCapacity,[]).length||this.hasErrorInFolder(this.combineExamCapacity)}hasErrorInFolder(i){let o=!1;return i.forEach(a=>{a.hasError&&(o=!0),a.children.length&&this.hasErrorInFolder(a.children)&&(o=!0)}),o}getListSelectedExam(i,o){return i.forEach(a=>{"EXAM"==a.data.objectType&&a.isSelectedFormControl.value&&a.data.exam?.hashId&&o.push(a.data.exam.hashId),a.children.length&&(o=this.getListSelectedExam(a.children,o))}),o}asTemplateDataObj(i){return i}standardTreeNodes(i,o){let a=[];return i.forEach((r,l)=>{let c={level:o,isExpand:!1,isShow:!0,nodeIndex:l,randomHashId:this.uuidService.getUuid(),data:r,children:[],text:r.objectName??"",isSelectedFormControl:new g.MJ(!1,{nonNullable:!0}),totalPart:r.totalPart,showCheckbox:!0,showSelectCount:!1,hasError:!1};c.children=this.standardTreeNodes(r.children,o+1),a.push(c)}),a}getCapacityExamObjs(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamGetTestCapacityExamHashIdGet(this.hashId,-1).subscribe(i=>i.success?i.data?.isSelectedComponent?this.selectCapacityExamEmitter.emit(!0):(this.capacityObj=i.data?.capacityExam,this.combineExamCapacity=this.standardTreeNodes(i.data?.testingComponents??[],0),this.processRequiredData(this.combineExamCapacity,void 0),void this.successStatusObj()):this.forceShowErrorBox(i.message,!0)))}ngOnInit(){super.ngOnInit(),this.getCapacityExamObjs()}constructor(){super(),this.selectCapacityExamEmitter=new e.bkB,this.uuidService=(0,e.WQX)(wh.D),this.frontExamService=(0,e.WQX)(ke.iB),this.combineExamCapacity=[],this.errorMessage=""}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-select-capacity-exam"]],inputs:{hashId:"hashId"},outputs:{selectCapacityExamEmitter:"selectCapacityExamEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[1,"box","p-3","container","mt-5"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mx-auto","text-center"],[1,"text-xl","text-center","font-bold"],[1,"text-md","mt-2","text-center","font-bold","text-info"],[1,"text-md","font-bold","mt-2"],["class","text-center py-2",4,"ngIf"],[1,"px-2","mt-2"],[1,"grid","grid-cols-12","gap-1"],[4,"ngIf"],[1,"text-right","mt-2"],[1,"btn","btn-secondary","ml-auto",3,"click"],[1,"btn","btn-primary","ml-2",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"text-center","py-2"],[1,"block","text-danger","text-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mr-1"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","gap-1","w-full",2,"align-items","center","grid-column","span 12 / span 12"],[1,"col-span-12","flex","items-center","mt-1",3,"ngStyle"],["class","mr-2",4,"ngIf"],["class","clickable","aria-hidden","true",3,"click",4,"ngIf"],["name","file-check","size","20",3,"ngClass",4,"ngIf"],[1,"mb-0","ml-1",3,"click","ngClass"],["class","text-xs ml-1 font-normal",3,"ngClass",4,"ngIf"],["type","checkbox",1,"form-check-input","mr-2",3,"click","change","formControl"],[1,"mr-2"],["aria-hidden","true",1,"clickable",3,"click"],["type","folder",3,"size",4,"ngIf"],["type","folder",3,"size"],["name","file-check","size","20",3,"ngClass"],[1,"text-xs","ml-1","font-normal",3,"ngClass"]],template:function(i,o){if(1&i&&(e.j41(0,"div",2),e.DNE(1,TO,1,1,"azt-loading-effect",3)(2,SO,24,25,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,jO,1,1,"ng-template",null,1,e.C5r)),2&i){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,Gt.R,Ee.m,x.MD,x.YU,x.Sq,x.bT,x.T3,x.B3,g.X1,g.Zm,g.BC,g.l_,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function zO(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"span",3),e.EFF(3),e.k0s()(),e.j41(4,"div",4)(5,"span",5),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"span",5),e.EFF(9),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()(),e.j41(12,"div",6),e.nrm(13,"span",7),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"div",8)(16,"app-testbank-frontend-count-down-box",9),e.bIt("endCountDownEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()(),e.j41(17,"div",10)(18,"button",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(3),e.JRh(t.capacityComponent.name),e.R7$(3),e.JRh(t.capacityComponent.totalQuestion+" "+e.bMT(7,8,"lang_auto_cau_hoi")+" - "),e.R7$(3),e.JRh(t.capacityComponent.totalMinute?t.capacityComponent.totalMinute+" "+e.bMT(10,10,"lang_auto_phut"):e.bMT(11,12,"lang_auto_khong_thoi_han")),e.R7$(4),e.Y8G("innerHtml",e.bMT(14,14,"lang_azt_capacity_exam_intro_description"),e.npT),e.R7$(3),e.Y8G("totalSecond",t.waitingTime)("useCountDown",!0)("customClass","font-bold"),e.R7$(3),e.SpI(" ",e.bMT(20,16,"lang_auto_bat_dau_audio")," ")}}let m_=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.startedExamEvent=new e.bkB}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-capacity-exam-intro"]],inputs:{capacityComponent:"capacityComponent",waitingTime:"waitingTime"},outputs:{startedExamEvent:"startedExamEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","box p-5 container mt-10 text-center",4,"ngIf"],[1,"box","p-5","container","mt-10","text-center"],[1,"text-xl","uppercase","text-primary"],[1,"font-bold"],[1,"mt-1","text-lg"],[1,"font-medium"],[1,"mt-3"],[1,"text-base",3,"innerHtml"],[1,"mt-10","text-2xl","text-primary"],[3,"endCountDownEvent","totalSecond","useCountDown","customClass"],[1,"mt-5"],[1,"btn","btn-primary","w-24","h-24","text-lg","rounded-full","shadow-md",3,"click"]],template:function(i,o){1&i&&e.DNE(0,zO,21,18,"div",0),2&i&&e.Y8G("ngIf",o.capacityComponent)},dependencies:[Zt,x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,q.k],styles:["@media screen and (max-width: 480px){.container[_ngcontent-%COMP%]{width:auto;margin-right:1rem;margin-left:1rem}}"]}),n})();const DO=["*"],p_=()=>({"mr-2":!0}),h_=()=>({"mr-1":!0}),MO=()=>({"mr-2 text-danger":!0});function GO(s,n){if(1&s&&(e.j41(0,"p",8),e.nrm(1,"lucide-icon",19),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.lJ4(10,h_)),e.R7$(),e.E5c(" ",e.bMT(3,4,"lang_auto_thoi_gian_duoc_phep_vao_thi"),": ",e.bMT(4,6,t.currentTakeTestStepData.examObj.startTime)," - ",e.bMT(5,8,t.currentTakeTestStepData.examObj.endTime)," ")}}function PO(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",20),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"app-testbank-frontend-count-down-box",21),e.bIt("endCountDownEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(o&&a.submitTestToApi(!0))}),e.k0s(),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()}if(2&s){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,4,"lang_auto_hay_kiem_tra_lai_bai_lam_cua_ban_he_thong_se_tu_dong_nop_bai_sau"),": "),e.R7$(2),e.Y8G("totalSecond",t.currentTakeTestStepData.autoSubmitAfterSeconds)("useCountDown",!0),e.R7$(),e.SpI(" ",e.bMT(5,6,"lang_auto_hoac_ban_co_the_nop_bai_ngay_bang_cach_an_nut_ben_duoi")," ")}}function NO(s,n){1&s&&(e.qex(0),e.nrm(1,"lucide-icon",22),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.bVm()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(10,h_)),e.R7$(),e.E5c(" ",e.bMT(3,4,"lang_auto_ban_da_het_gio_lam_bai_thi_hay_an_nut"),' "',e.bMT(4,6,"lang_auto_nop_bai"),'" ',e.bMT(5,8,"lang_auto_ben_duoi_de_gui_bai_len_he_thong_neu_nop_muon_bai_lam_cua_ban_co_the_khong_duoc_cham_diem_vui_long_lien_he_giao_vien_de_phuc_khao")," "))}function VO(s,n){1&s&&(e.nrm(0,"lucide-icon",22),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate")),2&s&&(e.Y8G("ngClass",e.lJ4(10,h_)),e.R7$(),e.E5c(" ",e.bMT(2,4,"lang_auto_ban_da_qua_gio_nop_bai_thi_hay_an_nut"),' "',e.bMT(3,6,"lang_auto_nop_muon"),'" ',e.bMT(4,8,"lang_auto_ben_duoi_de_gui_bai_len_he_thong_bai_lam_cua_ban_co_the_khong_duoc_cham_diem_vui_long_lien_he_giao_vien_de_phuc_khao")," "))}function LO(s,n){if(1&s&&(e.j41(0,"div",26)(1,"div",27),e.nrm(2,"azt-question-standalone-for-student-at-full-test",28),e.k0s()()),2&s){const t=n.$implicit,i=n.index,o=e.XpG(2);e.R7$(2),e.Y8G("startQuestionIndex",o.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",o.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",o.followerRenderQuest)("takeTestLayout",o.allTakeTestLayouts.STEP_QUESTION)("isMobile",o.isMobile)("examObj",o.currentTakeTestStepData.examObj)("question",t)("fontSize",o.sAztTestResizeService.fontSize)("index",i)("overTime",!0)("questionListLength",o.currentTakeTestStepData.viewQuestionObjs.length)}}function BO(s,n){if(1&s&&(e.j41(0,"mat-tab",23),e.nI1(1,"mytranslate"),e.j41(2,"div",29),e.SdG(3),e.k0s()()),2&s){const t=e.XpG(2);e.FS9("label",e.bMT(1,1,"lang_auto_tu_luan")+" ("+t.files.length+")")}}function $O(s,n){if(1&s&&(e.j41(0,"mat-tab-group")(1,"mat-tab",23),e.nI1(2,"mytranslate"),e.DNE(3,LO,3,13,"div",24),e.k0s(),e.DNE(4,BO,4,3,"mat-tab",25),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.FS9("label",e.bMT(2,3,"lang_auto_trac_nghiem")),e.R7$(2),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.hasEssayQuestion)}}function QO(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBackToExamDetails())}),e.nrm(3,"lucide-icon",33),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",34)(7,"button",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.submitTestToApi(!0))}),e.nrm(8,"lucide-icon",36),e.EFF(9),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngClass",e.lJ4(10,MO)),e.R7$(),e.SpI(" ",e.bMT(5,4,"lang_auto_thoat")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(11,p_)),e.R7$(),e.SpI(" ",t.currentTakeTestStepData.countDownSecond<-300?e.bMT(10,6,"lang_auto_nop_muon"):e.bMT(11,8,"lang_powerpoint_frontend_detail_submit")," ")}}let zr=(()=>{var s;class n extends Z.H{submitTestToApi(i){this.submitTestEvent.emit(i)}goBackToExamDetails(){this.commonService.myNavigationWithQueryString("/de-thi/"+this.currentTakeTestStepData.examObj.hashId,"?backto="+encodeURIComponent(this.backToLink))}ngOnInit(){super.ngOnInit()}constructor(){super(),this.submitTestEvent=new e.bkB,this.allTakeTestLayouts=Bt}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-test-bank-frontend-over-time-of-exam"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",questsLoadState:"questsLoadState",backToLink:"backToLink",isMobile:"isMobile",files:"files",followerRenderQuest:"followerRenderQuest",sAztTestResizeService:"sAztTestResizeService",userObj:"userObj"},outputs:{submitTestEvent:"submitTestEvent"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:DO,decls:36,vars:37,consts:[["notActualEndTime",""],["questionAndAnswerTpl",""],["submitButtonBox",""],[1,"p-3",2,"padding-bottom","50px"],[1,"box","p-5","m-3"],[1,"text-center"],[1,"text-lg","font-medium"],[1,"font-medium"],[1,"flex","justify-center","items-center","mt-2"],[1,"flex","items-center","mr-3"],["name","timer","size","20",3,"ngClass"],[1,"flex","items-center"],["name","circle-help","size","20",3,"ngClass"],["class","flex justify-center items-center mt-2",4,"ngIf"],[1,"font-medium","mt-2"],["class","p-3 m-2 text-center text-pending",4,"ngIf"],[1,"mt-3","text-danger","font-medium","text-center"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],["name","clock","size","24",3,"ngClass"],[1,"p-3","m-2","text-center","text-pending"],[3,"endCountDownEvent","totalSecond","useCountDown"],["name","timer-off","size","24",3,"ngClass"],[3,"label"],["class","mb-3 mt-2",4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[1,"mb-3","mt-2"],[1,"azt-question","box","text-left","relative"],[3,"startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","fontSize","index","overTime","questionListLength"],[1,"box","mt-2"],[1,"mt-2","flex","justify-center"],[1,"-intro-x","mr-4"],["azt-track-service","take-test-zYDkrlktkR",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["name","power","size","16",3,"ngClass"],[1,"intro-x"],["azt-track-service","take-test-HI_SB5_l-P",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"]],template:function(i,o){if(1&i&&(e.NAR(),e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"h3",6),e.EFF(4),e.k0s(),e.j41(5,"p",7),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"div",8)(9,"div",9),e.nrm(10,"lucide-icon",10),e.EFF(11),e.nI1(12,"mytranslate"),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"div",11),e.nrm(15,"lucide-icon",12),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.DNE(18,GO,6,11,"p",13),e.j41(19,"p",14),e.EFF(20),e.nI1(21,"mytranslate"),e.nI1(22,"mytranslate"),e.nI1(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(24,PO,6,8,"div",15),e.k0s(),e.j41(25,"div",16),e.DNE(26,NO,6,11,"ng-container",17)(27,VO,5,11,"ng-template",null,0,e.C5r),e.k0s(),e.eu8(29,18)(30,18)(31,18),e.k0s(),e.DNE(32,$O,5,5,"ng-template",null,1,e.C5r)(34,QO,12,12,"ng-template",null,2,e.C5r)),2&i){const a=e.sdS(28),r=e.sdS(33),l=e.sdS(35);e.R7$(4),e.JRh(o.currentTakeTestStepData.examObj.name),e.R7$(2),e.Lme("",e.bMT(7,21,"lang_auto_ma_de"),": ",o.currentTakeTestStepData.examObj.hashId,""),e.R7$(4),e.Y8G("ngClass",e.lJ4(35,p_)),e.R7$(),e.E5c(" ",e.bMT(12,23,"lang_auto_thoi_gian"),": ",o.currentTakeTestStepData.examObj.minutes," ",e.bMT(13,25,"lang_auto_phut")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(36,p_)),e.R7$(),e.Lme(" ",e.bMT(17,27,"lang_auto_so_cau"),": ",o.currentTakeTestStepData.countQuestion," "),e.R7$(2),e.Y8G("ngIf",o.currentTakeTestStepData.examObj.startTime&&o.currentTakeTestStepData.examObj.endTime),e.R7$(2),e.LHq(" ",e.bMT(21,29,"lang_auto_thi_sinh"),": ",null==o.userObj?null:o.userObj.fullName," ",e.bMT(22,31,"lang_auto_-_vao_thi_luc"),": ",e.bMT(23,33,null==o.currentTakeTestStepData.testingResultObj?null:o.currentTakeTestStepData.testingResultObj.startedTest)," "),e.R7$(4),e.Y8G("ngIf",o.currentTakeTestStepData.autoSubmitAfterSeconds),e.R7$(2),e.Y8G("ngIf",o.currentTakeTestStepData.isActualEndTime)("ngIfElse",a),e.R7$(3),e.Y8G("ngTemplateOutlet",l),e.R7$(),e.Y8G("ngTemplateOutlet",r),e.R7$(),e.Y8G("ngTemplateOutlet",l)}},dependencies:[Zt,Fr,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,g.YN,z.wp,Y.s,Gs.mq,Gs.T8,F.flO,F.WGl,W.L,z.bH,U.Id,q.k],encapsulation:2}),n})();const qO=()=>({"mr-2":!0});function YO(s,n){1&s&&(e.j41(0,"div",3),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_you_are_not_upload_any_essay_files"),"\n"))}function UO(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div")(3,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialogEvent.emit())}),e.nrm(4,"lucide-icon",6),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"p",7),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.bVm()}2&s&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(7,qO)),e.R7$(),e.SpI(" ",e.bMT(6,3,"lang_testbank_frontend_upload_essay_files")," "),e.R7$(3),e.JRh(e.bMT(9,5,"lang_auto_ho_tro_anh_video_audio_hoac_file_pdf_brackets")))}let Dr=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.showUploadEssayFilesDialogEvent=new e.bkB,this.changeAnswerFilesEvent=new e.bkB}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-upload-essay-file-at-over-time-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData"},outputs:{showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",changeAnswerFilesEvent:"changeAnswerFilesEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","p-3 m-2 alert alert-danger",4,"ngIf"],[4,"ngIf"],[3,"changeAnswerFiles","answerFiles"],[1,"p-3","m-2","alert","alert-danger"],[1,"text-center","mt-1","mb-2"],["azt-track-service","take-test-EkxWzdqkfZ",1,"btn","btn-sm","btn-primary",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"h6","mb-2","mt-1"]],template:function(i,o){1&i&&(e.DNE(0,YO,3,3,"div",0)(1,UO,10,8,"ng-container",1),e.j41(2,"app-sort-essay-files-box",2),e.bIt("changeAnswerFiles",function(r){return o.changeAnswerFilesEvent.emit(r)}),e.k0s()),2&i&&(e.Y8G("ngIf",0==o.currentTakeTestStepData.files.length),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.allowUploadEssayFileWhenEndTime),e.R7$(),e.Y8G("answerFiles",o.currentTakeTestStepData.files))},dependencies:[Lo.s,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const XO=s=>[s];let Mr=(()=>{var s;class n extends Z.H{}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-wait-to-test-time-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",homeLink:"homeLink"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:17,consts:[[1,"p-4"],[1,"box","p-3","text-danger","text-center"],[1,"text-center","clickable","mt-3"],["azt-track-service","take-test-8oUvqrS4hCo",1,"link__color","link__hover",3,"routerLink"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(6,"div",2)(7,"a",3),e.nI1(8,"navigationLocalize"),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(2),e.E5c(" ",e.bMT(3,5,o.currentTakeTestStepData.errorMessage)," ",e.bMT(4,7,"lang_auto_vui_long_quay_lai_vao_luc"),": ",e.bMT(5,9,o.currentTakeTestStepData.examObj.startTime)," "),e.R7$(5),e.Y8G("routerLink",e.eq3(15,XO,e.bMT(8,11,o.homeLink))),e.R7$(2),e.JRh(e.bMT(10,13,"lang_auto_quay_lai_trang_chu")))},dependencies:[z.F2,x.MD,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,W.L,z.bH,U.Id,q.k],encapsulation:2}),n})();function WO(s,n){if(1&s&&(e.j41(0,"p",9),e.EFF(1),e.k0s()),2&s){const t=n.$implicit;e.R7$(),e.JRh(t)}}function HO(s,n){if(1&s&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3),e.k0s()(),e.DNE(4,WO,2,1,"p",8),e.k0s()),2&s){const t=n.$implicit,i=n.index;e.R7$(3),e.Lme("",i+1,". ",t.message,":"),e.R7$(),e.Y8G("ngForOf",t.data)}}let Gr=(()=>{var s;class n extends Z.H{goBackToExamDetails(){this.commonService.myNavigationWithQueryString("/de-thi/"+this.currentTakeTestStepData.examObj.hashId,"?backto="+encodeURIComponent(this.backToLink))}reloadCurrentPage(){location.reload()}ngOnInit(){super.ngOnInit()}constructor(){super()}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-test-bank-frontend-load-question-error-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",questsLoadState:"questsLoadState",backToLink:"backToLink"},standalone:!0,features:[e.Vt3,e.aNF],decls:32,vars:28,consts:[[2,"display","flex","justify-content","center"],[2,"margin","50px","border","1px solid #9e9e9e","padding","20px 50px","border-radius","10px","background","#fafafa","overflow-wrap","break-word","line-height","25px"],[2,"color","#f44336","font-size","18px","font-weight","500","text-transform","uppercase","margin-bottom","20px","text-align","center"],[2,"text-transform","lowercase"],[4,"ngFor","ngForOf"],[1,"mt-5","text-center"],["azt-track-service","take-test-4_EDv4k0GO7",1,"btn","btn-sm","btn-outline-primary","mr-3",3,"click"],["azt-track-service","take-test-Z7YL5G4GC5F",1,"btn","btn-sm","btn-primary",3,"click"],["style","color: #795548; font-size: small",4,"ngFor","ngForOf"],[2,"color","#795548","font-size","small"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"p"),e.EFF(9),e.nI1(10,"mytranslate"),e.j41(11,"strong"),e.EFF(12),e.k0s()(),e.j41(13,"p"),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"p"),e.EFF(17),e.nI1(18,"mytranslate"),e.j41(19,"strong"),e.EFF(20),e.j41(21,"span",3),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()(),e.DNE(24,HO,5,3,"div",4),e.j41(25,"p",5)(26,"button",6),e.bIt("click",function(){return o.goBackToExamDetails()}),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.j41(29,"button",7),e.bIt("click",function(){return o.reloadCurrentPage()}),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,12,"lang_auto_xay_ra_loi_trong_qua_trinh_tai_de_thi")),e.R7$(3),e.JRh(e.bMT(7,14,"lang_auto_ban_co_the_click_nao_nut_thu_lai_de_thu_tai_lai_de_thi")),e.R7$(3),e.SpI(" ",e.bMT(10,16,"lang_auto_ma_de_thi")+": "," "),e.R7$(3),e.Lme("",o.currentTakeTestStepData.examObj.hashId," - ",o.currentTakeTestStepData.termExamResultId,""),e.R7$(2),e.SpI("",e.bMT(15,18,"lang_auto_phan_tram_de_thi_da_tai_duoc")+": "+o.questsLoadState.loadPercent,"%"),e.R7$(3),e.SpI(" ",e.bMT(18,20,"lang_auto_so_luong_phat_hien")+": "," "),e.R7$(3),e.SpI(" ",o.questsLoadState.errData.length," "),e.R7$(2),e.JRh(e.bMT(23,22,"lang_auto_loi")),e.R7$(2),e.Y8G("ngForOf",o.questsLoadState.errData),e.R7$(3),e.SpI(" ",e.bMT(28,24,"lang_core_print_exam_back")," "),e.R7$(3),e.SpI(" ",e.bMT(31,26,"lang_auto_thu_lai")," "))},dependencies:[x.MD,x.Sq,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();const Pf=(s,n)=>[s,n],JO=(s,n,t,i,o,a,r,l,c,_)=>[s,n,t,i,o,a,r,l,c,_],KO=(s,n,t,i)=>[s,n,t,i],ZO=(s,n)=>({"container-content-mobile":s,"container-content-desktop":n}),eR=(s,n)=>({"monitor-screen":s,"monitor-screen-mobile":n}),tR=(s,n)=>({"height-showListQuestion":s,"height-hiddenListQuestion":n}),Nf=()=>({"mr-2":!0}),nR=()=>({"ml-2":!0}),iR=s=>({joinByExamHashId:s}),Vf=s=>[s];function sR(s,n){1&s&&e.nrm(0,"app-coazt-leave-window-event")}function oR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG();const t=e.sdS(27);e.Y8G("ngTemplateOutlet",t)}}function aR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG();const t=e.sdS(29);e.Y8G("ngTemplateOutlet",t)}}function rR(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",20),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",21),e.eu8(3,18),e.k0s()(),e.nrm(4,"azt-tracking-user-tags"),e.bVm()}if(2&s){const t=e.XpG(3),i=e.sdS(7);e.R7$(2),e.Y8G("ngClass",e.l_i(2,ZO,t.isMobileScreenSize,!t.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function lR(s,n){if(1&s&&(e.nrm(0,"azt-loading-effect",22),e.nI1(1,"mytranslate")),2&s){const t=e.XpG(3);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function cR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG(3);const t=e.sdS(33);e.Y8G("ngTemplateOutlet",t)}}function uR(s,n){if(1&s&&(e.qex(0),e.DNE(1,rR,5,5,"ng-container",16)(2,lR,2,4,"azt-loading-effect",19)(3,cR,1,1,"ng-container",17),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function _R(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG(2);const t=e.sdS(31);e.Y8G("ngTemplateOutlet",t)}}function dR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG(2);const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function mR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG(2);const t=e.sdS(17);e.Y8G("ngTemplateOutlet",t)}}function pR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG(2);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function hR(s,n){if(1&s&&e.eu8(0,18),2&s){e.XpG(2);const t=e.sdS(25);e.Y8G("ngTemplateOutlet",t)}}function fR(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,uR,4,3,"ng-container",16)(2,_R,1,1,"ng-container",17)(3,dR,1,1,"ng-container",17)(4,mR,1,1,"ng-container",17)(5,pR,1,1,"ng-container",17)(6,hR,1,1,"ng-container",17),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.ziG(6,KO,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_SELECT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_INTRO),e.R7$(),e.Y8G("ngIf",e.l_i(11,Pf,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function gR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-desktop",32),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("sAztTestResizeService",t.sAztTestResizeService)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)("isMobileScreenSize",t.isMobileScreenSize)}}function TR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-mobile",33),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)("currentTakeTestStepData",t.currentTakeTestStepData)}}function bR(s,n){if(1&s&&(e.j41(0,"span",36),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function xR(s,n){if(1&s&&(e.j41(0,"span",36),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function vR(s,n){if(1&s&&(e.j41(0,"div",34),e.DNE(1,bR,3,3,"span",35)(2,xR,2,1,"span",35),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.capacityComponent)}}function yR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-group-layout",37),e.bIt("setQuestionInGroupEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionInGroup(o))})("toggleShowListQuestionInGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.toggleShowListQuestionInGroup())})("prevIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prevIndexGroup())})("nextIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextIndexGroup())})("submitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitExam())})("goToQuestionEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.goToQuestion(o))}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("indexGroup",t.indexGroup)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)}}function SR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-group-layout-mobile",38),e.bIt("setQuestionInGroupEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionInGroup(o))})("toggleShowListQuestionInGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.toggleShowListQuestionInGroup())})("prevIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prevIndexGroup())})("nextIndexGroupEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextIndexGroup())})("submitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitExam())})("goToQuestionEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.goToQuestion(o))})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("indexGroup",t.indexGroup)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)}}function wR(s,n){if(1&s&&(e.DNE(0,gR,1,4,"app-coazt-simple-test-header-box-for-desktop",23)(1,TR,1,2,"app-coazt-simple-test-header-box-for-mobile",24),e.j41(2,"div",25),e.nrm(3,"div",26),e.DNE(4,vR,3,2,"div",27),e.j41(5,"div",28),e.eu8(6,18),e.k0s(),e.j41(7,"div",29),e.eu8(8,18),e.k0s()(),e.DNE(9,yR,1,3,"app-coazt-simple-test-footer-box-for-group-layout",30)(10,SR,1,4,"app-coazt-simple-test-footer-box-for-group-layout-mobile",31)),2&s){const t=e.XpG(),i=e.sdS(9),o=e.sdS(11);e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(2),e.Y8G("ngClass",e.l_i(8,eR,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(2),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(),e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize)}}function IR(s,n){if(1&s&&(e.j41(0,"div",39),e.qex(1),e.j41(2,"div",40)(3,"div",41)(4,"div",42),e.nrm(5,"azt-dynamic-hook",43),e.k0s()()(),e.bVm(),e.j41(6,"div",44),e.eu8(7,18),e.k0s()()),2&s){let t;const i=e.XpG(),o=e.sdS(13);e.Y8G("ngClass",e.l_i(7,tR,i.isShowListQuestionInGroup,!i.isShowListQuestionInGroup)),e.R7$(4),e.xc7("font-size",i.sAztTestResizeService.fontSize+"em")("line-height",i.sAztTestResizeService.fontSize<1.5?i.sAztTestResizeService.fontSize+.5:"1.7"),e.R7$(),e.Y8G("content",null!==(t=null==i.currentTakeTestStepData.viewQuestionInGroupList[i.indexGroup].groupInfo?null:i.currentTakeTestStepData.viewQuestionInGroupList[i.indexGroup].groupInfo.groupContent)&&void 0!==t?t:""),e.R7$(2),e.Y8G("ngTemplateOutlet",o)}}function CR(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",55)(2,"div",41)(3,"div",42),e.nrm(4,"azt-dynamic-hook",43),e.k0s()()(),e.bVm()),2&s){let t;const i=e.XpG(2);e.R7$(3),e.xc7("font-size",i.sAztTestResizeService.fontSize+"em")("line-height",i.sAztTestResizeService.fontSize<1.5?i.sAztTestResizeService.fontSize+.5:"1.7"),e.R7$(),e.Y8G("content",null!==(t=null==i.currentTakeTestStepData.viewQuestionInGroupList[i.indexGroup].groupInfo?null:i.currentTakeTestStepData.viewQuestionInGroupList[i.indexGroup].groupInfo.groupContent)&&void 0!==t?t:"")}}function kR(s,n){if(1&s&&(e.j41(0,"div",56)(1,"span",36),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function ER(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prevIndexGroup())}),e.nrm(1,"lucide-icon",58),e.k0s()}2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,Nf)))}function AR(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextIndexGroup())}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"lucide-icon",60),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_nhom")+" "+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].groupId+" ("+t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1].totalQuestion+" "+e.bMT(4,4,"lang_auto_cau_thuong")+")"," "),e.R7$(3),e.Y8G("ngClass",e.lJ4(6,nR))}}function OR(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitExam())}),e.nrm(1,"lucide-icon",62),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,Nf)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_nop_bai")," "))}function RR(s,n){1&s&&(e.j41(0,"span"),e.nrm(1,"lucide-icon",63),e.k0s())}function FR(s,n){1&s&&(e.j41(0,"span"),e.nrm(1,"lucide-icon",64),e.k0s())}function jR(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",45)(1,"div",46),e.DNE(2,CR,5,5,"ng-container",16),e.k0s(),e.j41(3,"div",47),e.DNE(4,kR,4,3,"div",48),e.eu8(5,18),e.j41(6,"div",49),e.DNE(7,ER,2,2,"button",50)(8,AR,6,7,"button",51)(9,OR,4,5,"button",52),e.k0s()()(),e.j41(10,"div",53)(11,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleViewMobile())}),e.DNE(12,RR,2,0,"span",16)(13,FR,2,0,"span",16),e.k0s()()}if(2&s){const t=e.XpG(),i=e.sdS(13);e.R7$(),e.Y8G("hidden",!t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].groupInfo),e.R7$(),e.Y8G("hidden",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup-1]),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1]),e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup+1]),e.R7$(3),e.Y8G("ngIf",t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile),e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isShowGroupMobile)}}function zR(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",67)(1,"app-sort-essay-files-box",68),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("answerFiles",t.currentTakeTestStepData.files)}}function DR(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",70)(1,"div",71)(2,"azt-question-standalone-for-student-at-full-test",72),e.bIt("setOneChoiceAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setOneChoiceAnswer(o,a))})("setTrueFalseAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setTrueFalseAnswer(o,a))})("setFillAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setFillAnswer(o,a))})("setEssayAnswerEmitter",function(o){const a=e.eBV(t).index,r=e.XpG(3);return e.Njj(r.setEssayAnswer(o,a))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking.emit(o))})("nextQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.nextTo(a.currentTakeTestStepData,o))})("prevQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.backTo(a.currentTakeTestStepData,o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion.emit(o))}),e.k0s()()()}if(2&s){let t;const i=n.$implicit,o=e.XpG().index,a=e.XpG(2);e.Y8G("hidden",o!==a.indexGroup),e.R7$(),e.FS9("id","question_in_group_"+i.id),e.R7$(),e.Y8G("startQuestionIndex",a.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",a.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",a.followerRenderQuest)("takeTestLayout",a.allTakeTestLayouts.GROUP_QUESTION)("isMobile",a.isMobileScreenSize)("examObj",a.currentTakeTestStepData.examObj)("question",i)("fontSize",a.sAztTestResizeService.fontSize)("overTime",!1)("index",null!==(t=i.startQuestionIndexWidthViewGroup)&&void 0!==t?t:0)}}function MR(s,n){if(1&s&&(e.qex(0),e.DNE(1,DR,3,14,"div",69),e.bVm()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",null==t?null:t.questionList)}}function GR(s,n){if(1&s&&e.DNE(0,zR,2,1,"div",65)(1,MR,2,1,"ng-container",66),2&s){const t=e.XpG();e.Y8G("ngIf",null==t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup]?null:t.currentTakeTestStepData.viewQuestionInGroupList[t.indexGroup].isExistEssay),e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionInGroupList)}}function PR(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(1,"lucide-icon",74),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"app-join-classroom-box",75),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_button_back")," "),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(4,iR,t.currentTakeTestStepData.examObj.hashId))}}function NR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-select-capacity-exam",76),e.bIt("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectCapacityExamEmitter.emit(o))}),e.k0s()}if(2&s){let t;const i=e.XpG();e.Y8G("hashId",null!==(t=i.currentTakeTestStepData.examObj.hashId)&&void 0!==t?t:"")}}function VR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-capacity-exam-intro",77),e.bIt("startedExamEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("capacityComponent",t.currentTakeTestStepData.capacityComponent)("waitingTime",t.currentTakeTestStepData.waitingTime)}}function LR(s,n){if(1&s&&e.nrm(0,"app-coazt-list-shortcut-question-box",80),2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)}}function BR(s,n){if(1&s&&(e.j41(0,"div",78),e.DNE(1,LR,1,5,"app-coazt-list-shortcut-question-box",79),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function $R(s,n){if(1&s&&e.nrm(0,"app-coazt-list-shortcut-question-box",80),2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.GROUP_QUESTION)}}function QR(s,n){if(1&s&&(e.j41(0,"div",81,14)(2,"div",82)(3,"div",78)(4,"h3",83),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,$R,1,5,"app-coazt-list-shortcut-question-box",79),e.k0s()()()),2&s){const t=e.sdS(1),i=e.XpG();e.R7$(2),e.BMQ("style","width:"+t.offsetWidth+"px",e.$dS),e.R7$(3),e.SpI(" ",e.bMT(6,3,"lang_auto_danh_sach_cau_hoi")," "),e.R7$(2),e.Y8G("ngIf",i.currentTakeTestStepData.nextBackQuestionModel)}}function qR(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",84),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",85),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function YR(s,n){if(1&s&&(e.j41(0,"div",86)(1,"div",87)(2,"div",88),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",89)(6,"a",90),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,Vf,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function UR(s,n){1&s&&(e.j41(0,"div",96)(1,"div",97)(2,"a",98),e.nrm(3,"img",99),e.nI1(4,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(5,"a",100),e.nrm(6,"img",101),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()),2&s&&(e.R7$(3),e.Y8G("src",e.bMT(4,2,"images/google-play-badge.svg"),e.B4B),e.R7$(3),e.Y8G("src",e.bMT(7,4,"images/2928664.svg"),e.B4B))}function XR(s,n){1&s&&(e.j41(0,"div",92)(1,"p",93),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",96)(5,"div",102)(6,"p",103)(7,"span",104),e.EFF(8,"Google Play"),e.k0s(),e.nrm(9,"azt-download-qr-code",105),e.k0s(),e.j41(10,"p",106)(11,"span",104),e.EFF(12,"App Store"),e.k0s(),e.nrm(13,"azt-download-qr-code",105),e.k0s()()()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.R7$(7),e.Y8G("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),e.R7$(4),e.Y8G("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-student/id1556025594"))}function WR(s,n){if(1&s&&(e.j41(0,"div",86)(1,"div",87)(2,"div",88),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",91)(6,"div",92)(7,"p",93),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,UR,8,6,"div",94),e.k0s(),e.DNE(11,XR,14,7,"div",95),e.k0s(),e.j41(12,"div",89)(13,"a",90),e.nI1(14,"navigationLocalize"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_azt_take_test_only_app_available")),e.R7$(5),e.SpI(" ",e.bMT(9,8,"lang_core_tai_app_tai_day")," "),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.isMobileWebView&&!t.isMobileDevice),e.R7$(2),e.Y8G("routerLink",e.eq3(14,Vf,e.bMT(14,10,t.homeLink))),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_quay_lai_trang_chu"))}}function HR(s,n){if(1&s&&e.nrm(0,"app-coazt-wait-to-test-time-box",107),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function JR(s,n){if(1&s&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",108),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}let Lf=(()=>{var s;class n extends o_{constructor(){super(...arguments),this.indexGroup=0,this.isShowListQuestionInGroup=!0}toggleShowListQuestionInGroup(){this.isShowListQuestionInGroup=!this.isShowListQuestionInGroup;const i=document.getElementById("contentBlock"),o=document.getElementById("lucide-chevron-up");o&&i&&(this.isShowListQuestionInGroup?(i.style.maxHeight="60px",o.style.transform="rotate(0)"):(i.style.maxHeight="0px",o.style.transform="rotate(180deg)"))}setQuestionInGroup(i){this.indexGroup!=i&&(this.indexGroup=i,this.scrollQuestion())}goToQuestion(i){document.getElementById("question_in_group_"+i)?.scrollIntoView({behavior:"smooth"})}setStatusAnswer(i,o){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].questionList[i]&&(this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].questionList[i].status=o,this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].totalCompletedQuestion=this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].questionList.filter(a=>a.status).length)}setOneChoiceAnswer(i,o){this.setOneChoiceAnswerEmitter.emit(i),this.setStatusAnswer(o,!0)}setTrueFalseAnswer(i,o){this.setTrueFalseAnswerEmitter.emit(i),this.setStatusAnswer(o,void 0!==i?.answerConfig?.checked)}setFillAnswer(i,o){this.setFillAnswerEmitter.emit(i),this.setStatusAnswer(o,""!==i.value)}setEssayAnswer(i,o){this.setEssayAnswerEmitter.emit(i),this.setStatusAnswer(o,""!==i.value)}prevIndexGroup(){this.indexGroup--,this.scrollQuestion()}nextIndexGroup(){this.indexGroup++,this.scrollQuestion()}submitExam(){this.openSubmitExam.emit()}toggleViewMobile(){this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].isShowGroupMobile=!this.currentTakeTestStepData.viewQuestionInGroupList[this.indexGroup].isShowGroupMobile}scrollQuestion(){const i=this.isMobileScreenSize?document.getElementById("questionListMobile"):document.getElementById("questionList");i&&(i.scrollTop=0)}ngOnInit(){super.ngOnInit(),this.currentTakeTestStepData.examObj.hideGroupQuestion=1}ngOnDestroy(){super.ngOnDestroy(),this.currentTakeTestStepData.examObj.hideGroupQuestion=0}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-test-in-group-layout"]],standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:20,consts:[["mainTakeTestContentTpl",""],["showListQuestionTplDesktop",""],["showListQuestionTplMobile",""],["questionList",""],["chooseStudentTpl",""],["chooseCapacityExamTpl",""],["capacityExamIntro",""],["listQuestionsSelectedInMobile",""],["listQuestionSelectedInDesktop",""],["overTimeTpl",""],["commonErrorTpl",""],["showOnlyAppMessage",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],["listQuestionBar",""],[3,"currentTakeTestStepData"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0","min-height","100vh",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize","openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent",4,"ngIf"],[3,"layoutType","currentTakeTestStepData","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[1,"pb-4"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],["class","p-1 text-center mt-1",4,"ngIf"],[1,"azt-hidden","lg:block"],[1,"lg:hidden"],[3,"currentTakeTestStepData","indexGroup","layoutType","setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent",4,"ngIf"],[3,"currentTakeTestStepData","indexGroup","layoutType","sAztTestNextBackQuestionService","setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[3,"openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent","currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","layoutType","currentTakeTestStepData"],[1,"p-1","text-center","mt-1"],["class","text-md font-medium",4,"ngIf"],[1,"text-md","font-medium"],[3,"setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent","currentTakeTestStepData","indexGroup","layoutType"],[3,"setQuestionInGroupEvent","toggleShowListQuestionInGroupEvent","prevIndexGroupEvent","nextIndexGroupEvent","submitExamEvent","goToQuestionEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","indexGroup","layoutType","sAztTestNextBackQuestionService"],[1,"intro-y","grid","grid-cols-12","gap-5","mt-55px","transition-3",3,"ngClass"],[1,"col-span-6","px-4","py-4","box","overflow-auto","custom-scroll","rounded-none"],[1,"font-medium","h-full"],[1,"group-content-of-question-standalone",2,"padding-bottom","100px"],[3,"content"],["id","questionList",1,"col-span-6","h-full","py-5","pr-5","overflow-auto","custom-scroll"],[1,"intro-y","mt-6","transition-3","height-list-question-mobile"],[1,"group-content","h-full",3,"hidden"],["id","questionListMobile",1,"question-content","pb-400","overflow-auto","h-full",3,"hidden"],["class","p-1 text-center mt-2",4,"ngIf"],[1,"flex","items-center","justify-center","p-3"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ","class","btn btn-outline-primary h-40px mr-3",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj","class","btn btn-outline-primary h-40px w-full",3,"click",4,"ngIf"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_","class","btn btn-primary h-40px w-32",3,"click",4,"ngIf"],[1,"pos-tool"],["azt-track-service","take-test-in-group-layout-Wdat3Pseg",1,"btn","box","rounded-full","shadow-lg","border","border-slate-200","dark:border-darkmode-400","w-16","h-16",3,"click"],[1,"px-4","py-4","h-full","box","overflow-auto","custom-scroll","rounded-none"],[1,"p-1","text-center","mt-2"],["azt-track-service","take-test-in-group-layout-V5eoQGwsJZ",1,"btn","btn-outline-primary","h-40px","mr-3",3,"click"],["name","move-left","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-RNRQEspWcj",1,"btn","btn-outline-primary","h-40px","w-full",3,"click"],["name","move-right","size","16",3,"ngClass"],["azt-track-service","take-test-in-group-layout-9--9DqoAy_",1,"btn","btn-primary","h-40px","w-32",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],["name","list-todo","size","20"],["name","file-text","size","20"],["class","mt-5",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-5"],[3,"changeAnswerFiles","answerFiles"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","nextQuestionEmitter","prevQuestionEmitter","sendAudioEmit","startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","fontSize","overTime","index"],[1,"btn","btn-sm","btn-outline-secondary","mb-5","mt-5","mr-auto",3,"click"],["name","chevron-left","size","20"],[3,"selectStudentEvent","joinClassroomByType"],[3,"selectCapacityExamEmitter","hashId"],[3,"startedExamEvent","capacityComponent","waitingTime"],[1,"box","p-3"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],[1,"col-span-12","lg:col-span-3","mt-3"],[1,"top_gameBar"],[1,"text-md","font-medium","mb-3"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[1,"mt-5","text-center"],[1,"block"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","block",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-student/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(i,o){1&i&&(e.nrm(0,"app-coazt-tracking-full-screen-event",15)(1,"app-coazt-tracking-visible-event",15),e.DNE(2,sR,1,0,"app-coazt-leave-window-event",16)(3,oR,1,1,"ng-container",17)(4,aR,1,1,"ng-container",17)(5,fR,7,14,"div",16)(6,wR,11,11,"ng-template",null,0,e.C5r)(8,IR,8,10,"ng-template",null,1,e.C5r)(10,jR,14,10,"ng-template",null,2,e.C5r)(12,GR,2,2,"ng-template",null,3,e.C5r)(14,PR,5,6,"ng-template",null,4,e.C5r)(16,NR,1,1,"ng-template",null,5,e.C5r)(18,VR,1,2,"ng-template",null,6,e.C5r)(20,BR,2,1,"ng-template",null,7,e.C5r)(22,QR,8,5,"ng-template",null,8,e.C5r)(24,qR,2,9,"ng-template",null,9,e.C5r)(26,YR,10,11,"ng-template",null,10,e.C5r)(28,WR,17,16,"ng-template",null,11,e.C5r)(30,HR,1,2,"ng-template",null,12,e.C5r)(32,JR,1,3,"ng-template",null,13,e.C5r)),2&i&&(e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(6,Pf,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(o.currentTakeTestStepData.currentStep)&&!o.questsLoadState.startLoad&&!o.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE),e.R7$(),e.Y8G("ngIf",e.zJS(9,JO,[o.allTakeTestSteps.WAIT_TO_TEST_TIME,o.allTakeTestSteps.CHOOSE_STUDENT,o.allTakeTestSteps.CAPACITY_EXAM_SELECT,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,o.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,o.allTakeTestSteps.SHOW_FULL_SCREEN,o.allTakeTestSteps.SHOW_VIDEO_REQUIRED,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.CAPACITY_EXAM_INTRO]).includes(o.currentTakeTestStepData.currentStep)))},dependencies:[Er,Ar,Or,a_,se.K,l_,u_,KE,gA,Po.x,Lo.s,Fr,jr.l,d_,m_,Rr,zr,Dr,hi.d,Mr,Gr,z.F2,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,z.Vs,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],styles:[".top_gameBar[_ngcontent-%COMP%]{position:fixed;top:87px;right:10px;min-width:23.5vw}.margin-question-bar-for-simple-test-for-desktop[_ngcontent-%COMP%]{margin-top:calc(3rem + 30px)!important}.border-2[_ngcontent-%COMP%]   .margin-question-bar-for-simple-test-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 27px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(var(--vh, 1vh) * 100 - 220px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.sheet-screen-monitor[_ngcontent-%COMP%]{max-height:calc(var(--vh, 1vh) * 100 - 400px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}.border-3[_ngcontent-%COMP%]{border-width:3px}.transition-3[_ngcontent-%COMP%]{transition:all .3s}.height-showListQuestion[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 55px - 125px)}.height-hiddenListQuestion[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 55px - 72px)}.mt-55px[_ngcontent-%COMP%]{margin-top:55px}.user-select-none[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.border-color-primary[_ngcontent-%COMP%]{border-color:rgb(var(--color-primary)/var(--tw-text-opacity))}.absolute-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.azt-progress-circle[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border-radius:50%;display:grid;place-items:center;animation:.4s ease-out reverse;transition:all .5s}.azt-progress-value[_ngcontent-%COMP%]{display:block;height:calc(100% - 6px);width:calc(100% - 6px);background-color:#fff;border-radius:50%;display:grid;place-items:center;transition:all .5s}.questionListInGroup[_ngcontent-%COMP%]{max-height:60px;transition:max-height .3s ease-out}.box-group-question[_ngcontent-%COMP%]{width:calc(100vw - 600px);height:64px}  .dark .azt-progress-value{background-color:#28334e}.height-list-question-mobile[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 110px)}.pos-tool[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:25px;z-index:999}.pb-400[_ngcontent-%COMP%]{padding-bottom:400px}.h-40px[_ngcontent-%COMP%]{height:40px}"]}),n})(),Bf=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.changeShowTypeEvent=new e.bkB,this.openSubmitExamEvent=new e.bkB,this.showUploadEssayFilesDialogEvent=new e.bkB,this.openQuitDialogEvent=new e.bkB,this.allTakeTestLayouts=Bt,this.isAllQuestionInGroup=!0}ngOnInit(){this.isAllQuestionInGroup=!this.currentTakeTestStepData.viewQuestionObjs.some(i=>!i?.groupInfo?.groupId)}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-simple-test-footer-box-for-mobile"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",layoutType:"layoutType",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService"},outputs:{changeShowTypeEvent:"changeShowTypeEvent",openSubmitExamEvent:"openSubmitExamEvent",showUploadEssayFilesDialogEvent:"showUploadEssayFilesDialogEvent",openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:4,consts:[["actionMenu","matMenu"],[1,"pos-tool"],[1,"btn","box","rounded-full","shadow-md","border","border-slate-200","dark:border-darkmode-400","w-16","h-16",3,"matMenuTriggerFor"],["name","layout-grid","size","20"],["xPosition","before"],[3,"submitExamEvent","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"button",2),e.nrm(2,"lucide-icon",3),e.k0s()(),e.j41(3,"mat-menu",4,0)(5,"app-coazt-simple-test-menu-bar",5),e.bIt("submitExamEvent",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())})("changeShowTypeEvent",function(l){return e.eBV(a),e.Njj(o.changeShowTypeEvent.emit(l))})("openSubmitExamEvent",function(){return e.eBV(a),e.Njj(o.openSubmitExamEvent.emit())})("showUploadEssayFilesDialogEvent",function(){return e.eBV(a),e.Njj(o.showUploadEssayFilesDialogEvent.emit())})("openQuitDialogEvent",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.k0s()()}if(2&i){const a=e.sdS(4);e.R7$(),e.Y8G("matMenuTriggerFor",a),e.R7$(4),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData)("layoutType",o.layoutType)("sAztTestNextBackQuestionService",o.sAztTestNextBackQuestionService)}},dependencies:[Ff,x.MD,g.X1,L.iI,g.YN,Y.s,In.kk,In.Cp,F.flO,F.WGl,W.L,U.Id,q.k],styles:[".pos-tool[_ngcontent-%COMP%]{position:fixed;bottom:60px;right:25px;z-index:999}.pb-400[_ngcontent-%COMP%]{padding-bottom:400px}.h-40px[_ngcontent-%COMP%]{height:40px}"]}),n})();var KR=O(50437);const $f=(s,n)=>[s,n],ZR=(s,n,t,i,o,a,r,l,c,_)=>[s,n,t,i,o,a,r,l,c,_],e3=(s,n,t,i)=>[s,n,t,i],t3=(s,n)=>({"container-content-mobile":s,"container-content-desktop":n}),n3=(s,n)=>({"margin-question-bar-for-simple-test-for-desktop":s,"margin-question-bar-for-simple-test-for-mobile":n}),i3=(s,n)=>({"monitor-screen":s,"monitor-screen-mobile":n}),s3=s=>({joinByExamHashId:s}),Qf=s=>[s];function o3(s,n){1&s&&e.nrm(0,"app-coazt-leave-window-event")}function a3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG();const t=e.sdS(21);e.Y8G("ngTemplateOutlet",t)}}function r3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG();const t=e.sdS(23);e.Y8G("ngTemplateOutlet",t)}}function l3(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",17),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",18),e.eu8(3,15),e.k0s()(),e.nrm(4,"azt-tracking-user-tags"),e.bVm()}if(2&s){const t=e.XpG(3),i=e.sdS(7);e.R7$(2),e.Y8G("ngClass",e.l_i(2,t3,t.isMobileScreenSize,!t.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function c3(s,n){if(1&s&&(e.nrm(0,"azt-loading-effect",19),e.nI1(1,"mytranslate")),2&s){const t=e.XpG(3);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function u3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(3);const t=e.sdS(27);e.Y8G("ngTemplateOutlet",t)}}function _3(s,n){if(1&s&&(e.qex(0),e.DNE(1,l3,5,5,"ng-container",13)(2,c3,2,4,"azt-loading-effect",16)(3,u3,1,1,"ng-container",14),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function d3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(2);const t=e.sdS(25);e.Y8G("ngTemplateOutlet",t)}}function m3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(2);const t=e.sdS(11);e.Y8G("ngTemplateOutlet",t)}}function p3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(2);const t=e.sdS(13);e.Y8G("ngTemplateOutlet",t)}}function h3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(2);const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function f3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(2);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function g3(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,_3,4,3,"ng-container",13)(2,d3,1,1,"ng-container",14)(3,m3,1,1,"ng-container",14)(4,p3,1,1,"ng-container",14)(5,h3,1,1,"ng-container",14)(6,f3,1,1,"ng-container",14),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.ziG(6,e3,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_SELECT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_INTRO),e.R7$(),e.Y8G("ngIf",e.l_i(11,$f,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function T3(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-desktop",26),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("sAztTestResizeService",t.sAztTestResizeService)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)("isMobileScreenSize",t.isMobileScreenSize)}}function b3(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-mobile",27),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)}}function x3(s,n){if(1&s&&(e.j41(0,"span",30),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function v3(s,n){if(1&s&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function y3(s,n){if(1&s&&(e.j41(0,"div",28),e.DNE(1,x3,3,3,"span",29)(2,v3,2,1,"span",29),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.capacityComponent)}}function S3(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-mobile",31),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)}}function w3(s,n){if(1&s&&(e.DNE(0,T3,1,4,"app-coazt-simple-test-header-box-for-desktop",20)(1,b3,1,2,"app-coazt-simple-test-header-box-for-mobile",21),e.j41(2,"div",22),e.nrm(3,"div",23),e.DNE(4,y3,3,2,"div",24),e.eu8(5,15),e.k0s(),e.DNE(6,S3,1,3,"app-coazt-simple-test-footer-box-for-mobile",25)),2&s){const t=e.XpG(),i=e.sdS(9);e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngClass",e.l_i(7,n3,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngClass",e.l_i(10,i3,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",i),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize)}}function I3(s,n){if(1&s&&e.nrm(0,"azt-loaded-img",38),2&s){const t=e.XpG(2);e.Y8G("imgSrc",t.currentTakeTestStepData.examObj.examHeader)}}function C3(s,n){if(1&s&&(e.j41(0,"div",39),e.nrm(1,"div",40),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&s){let t;const i=e.XpG(2);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,null!==(t=null==i.currentTakeTestStepData.examConfigObj?null:i.currentTakeTestStepData.examConfigObj.header)&&void 0!==t?t:""),e.npT)}}function k3(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",41)(1,"div",42)(2,"azt-question-standalone-for-student-at-full-test",43),e.bIt("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setEssayAnswerEmitter.emit(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setResultTracking.emit(o))})("nextQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sAztTestNextBackQuestionService.nextTo(a.currentTakeTestStepData,o))})("prevQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sAztTestNextBackQuestionService.backTo(a.currentTakeTestStepData,o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioForQuestion.emit(o))}),e.k0s()()()}if(2&s){const t=n.$implicit,i=n.index,o=e.XpG(2);e.R7$(),e.FS9("id","question_all_"+t.id),e.R7$(),e.Y8G("startQuestionIndex",o.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",o.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",o.followerRenderQuest)("takeTestLayout",o.allTakeTestLayouts.LIST_QUESTION)("isMobile",o.isMobileScreenSize)("examObj",o.currentTakeTestStepData.examObj)("question",t)("fontSize",o.sAztTestResizeService.fontSize)("overTime",!1)("index",i)}}function E3(s,n){if(1&s&&e.eu8(0,15),2&s){e.XpG(2);const t=e.sdS(17);e.Y8G("ngTemplateOutlet",t)}}function A3(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"app-sort-essay-files-box",34),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s(),e.DNE(3,I3,1,1,"azt-loaded-img",35)(4,C3,3,3,"div",36)(5,k3,3,13,"div",37),e.k0s(),e.DNE(6,E3,1,1,"ng-container",14),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("answerFiles",t.currentTakeTestStepData.files),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.examObj.examHeader),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.examConfigObj?null:t.currentTakeTestStepData.examConfigObj.allowHeader),e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs),e.R7$(),e.Y8G("ngIf",!t.isMobileScreenSize)}}function O3(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(1,"lucide-icon",45),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"app-join-classroom-box",46),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_button_back")," "),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(4,s3,t.currentTakeTestStepData.examObj.hashId))}}function R3(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-select-capacity-exam",47),e.bIt("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectCapacityExamEmitter.emit(o))}),e.k0s()}if(2&s){let t;const i=e.XpG();e.Y8G("hashId",null!==(t=i.currentTakeTestStepData.examObj.hashId)&&void 0!==t?t:"")}}function F3(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-capacity-exam-intro",48),e.bIt("startedExamEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("capacityComponent",t.currentTakeTestStepData.capacityComponent)("waitingTime",t.currentTakeTestStepData.waitingTime)}}function j3(s,n){if(1&s&&e.nrm(0,"app-coazt-list-shortcut-question-box",54),2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.LIST_QUESTION)}}function z3(s,n){if(1&s&&(e.j41(0,"div",49,11)(2,"div",50)(3,"div",51)(4,"h3",52),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,j3,1,5,"app-coazt-list-shortcut-question-box",53),e.k0s()()()),2&s){const t=e.sdS(1),i=e.XpG();e.R7$(2),e.BMQ("style","width:"+t.offsetWidth+"px",e.$dS),e.R7$(3),e.SpI(" ",e.bMT(6,3,"lang_auto_danh_sach_cau_hoi")," "),e.R7$(2),e.Y8G("ngIf",i.currentTakeTestStepData.nextBackQuestionModel)}}function D3(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",55),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",56),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function M3(s,n){if(1&s&&(e.j41(0,"div",57)(1,"div",58)(2,"div",59),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",60)(6,"a",61),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,Qf,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function G3(s,n){1&s&&(e.j41(0,"div",67)(1,"div",68)(2,"a",69),e.nrm(3,"img",70),e.nI1(4,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(5,"a",71),e.nrm(6,"img",72),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()),2&s&&(e.R7$(3),e.Y8G("src",e.bMT(4,2,"images/google-play-badge.svg"),e.B4B),e.R7$(3),e.Y8G("src",e.bMT(7,4,"images/2928664.svg"),e.B4B))}function P3(s,n){1&s&&(e.j41(0,"div",63)(1,"p",64),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",67)(5,"div",73)(6,"p",74)(7,"span",75),e.EFF(8,"Google Play"),e.k0s(),e.nrm(9,"azt-download-qr-code",76),e.k0s(),e.j41(10,"p",77)(11,"span",75),e.EFF(12,"App Store"),e.k0s(),e.nrm(13,"azt-download-qr-code",76),e.k0s()()()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.R7$(7),e.Y8G("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),e.R7$(4),e.Y8G("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-student/id1556025594"))}function N3(s,n){if(1&s&&(e.j41(0,"div",57)(1,"div",58)(2,"div",59),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",62)(6,"div",63)(7,"p",64),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,G3,8,6,"div",65),e.k0s(),e.DNE(11,P3,14,7,"div",66),e.k0s(),e.j41(12,"div",60)(13,"a",61),e.nI1(14,"navigationLocalize"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_azt_take_test_only_app_available")),e.R7$(5),e.SpI(" ",e.bMT(9,8,"lang_core_tai_app_tai_day")," "),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.isMobileWebView&&!t.isMobileDevice),e.R7$(2),e.Y8G("routerLink",e.eq3(14,Qf,e.bMT(14,10,t.homeLink))),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_quay_lai_trang_chu"))}}function V3(s,n){if(1&s&&e.nrm(0,"app-coazt-wait-to-test-time-box",78),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function L3(s,n){if(1&s&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",79),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}let qf=(()=>{var s;class n extends o_{ngOnInit(){super.ngOnInit(),this.currentTakeTestStepData.currentStep==this.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE&&this.commonService.openAppMobile(KR.t.AZOTA_STUDENT,{type:"take_test",data:this.currentTakeTestStepData.examObj.hashId})}constructor(){super()}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-test-in-list-layout"]],standalone:!0,features:[e.Vt3,e.aNF],decls:28,vars:20,consts:[["mainTakeTestContentTpl",""],["showListQuestionTpl",""],["chooseStudentTpl",""],["chooseCapacityExamTpl",""],["capacityExamIntro",""],["listQuestionSelectedInDesktop",""],["overTimeTpl",""],["commonErrorTpl",""],["showOnlyAppMessage",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],["listQuestionBar",""],[3,"currentTakeTestStepData"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0 10px",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize","openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[1,"pb-4",3,"ngClass"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],["class","p-1 text-center mt-1",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[3,"openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent","currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType"],[1,"p-1","text-center","mt-1"],["class","text-md font-medium",4,"ngIf"],[1,"text-md","font-medium"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12","lg:col-span-9","sm:mt-0"],[3,"changeAnswerFiles","answerFiles"],["id","examHeader","class","mb-1",3,"imgSrc",4,"ngIf"],["class","box p-3 mb-3",4,"ngIf"],["class","mt-2",4,"ngFor","ngForOf"],["id","examHeader",1,"mb-1",3,"imgSrc"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHTML"],[1,"mt-2"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","nextQuestionEmitter","prevQuestionEmitter","sendAudioEmit","startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","fontSize","overTime","index"],[1,"btn","btn-sm","btn-outline-secondary","mb-5","mt-5","mr-auto",3,"click"],["name","chevron-left","size","20"],[3,"selectStudentEvent","joinClassroomByType"],[3,"selectCapacityExamEmitter","hashId"],[3,"startedExamEvent","capacityComponent","waitingTime"],[1,"col-span-12","lg:col-span-3","mt-3"],[1,"top_gameBar","custom-scroll"],[1,"box","p-3"],[1,"text-md","font-medium","mb-3"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[1,"mt-5","text-center"],[1,"block"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","block",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-student/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(i,o){1&i&&(e.nrm(0,"app-coazt-tracking-full-screen-event",12)(1,"app-coazt-tracking-visible-event",12),e.DNE(2,o3,1,0,"app-coazt-leave-window-event",13)(3,a3,1,1,"ng-container",14)(4,r3,1,1,"ng-container",14)(5,g3,7,14,"div",13)(6,w3,7,13,"ng-template",null,0,e.C5r)(8,A3,7,5,"ng-template",null,1,e.C5r)(10,O3,5,6,"ng-template",null,2,e.C5r)(12,R3,1,1,"ng-template",null,3,e.C5r)(14,F3,1,2,"ng-template",null,4,e.C5r)(16,z3,8,5,"ng-template",null,5,e.C5r)(18,D3,2,9,"ng-template",null,6,e.C5r)(20,M3,10,11,"ng-template",null,7,e.C5r)(22,N3,17,16,"ng-template",null,8,e.C5r)(24,V3,1,2,"ng-template",null,9,e.C5r)(26,L3,1,3,"ng-template",null,10,e.C5r)),2&i&&(e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(6,$f,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(o.currentTakeTestStepData.currentStep)&&!o.questsLoadState.startLoad&&!o.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE),e.R7$(),e.Y8G("ngIf",e.zJS(9,ZR,[o.allTakeTestSteps.WAIT_TO_TEST_TIME,o.allTakeTestSteps.CHOOSE_STUDENT,o.allTakeTestSteps.CAPACITY_EXAM_SELECT,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,o.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,o.allTakeTestSteps.SHOW_FULL_SCREEN,o.allTakeTestSteps.SHOW_VIDEO_REQUIRED,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.CAPACITY_EXAM_INTRO]).includes(o.currentTakeTestStepData.currentStep)))},dependencies:[Er,Ar,Or,a_,se.K,l_,u_,Bf,Lo.s,$h.H,Fr,jr.l,d_,m_,Rr,zr,Dr,hi.d,Mr,Gr,z.F2,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,z.Vs,Y.s,F.flO,F.WGl,W.L,z._y,U.Id,q.k],styles:[".top_gameBar[_ngcontent-%COMP%]{position:fixed;top:87px;right:10px;min-width:23.5vw;max-height:70vh;overflow:auto}.margin-question-bar-for-simple-test-for-desktop[_ngcontent-%COMP%]{margin-top:calc(3rem + 30px)!important}.margin-question-bar-for-simple-test-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 27px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 220px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.sheet-screen-monitor[_ngcontent-%COMP%]{max-height:calc(100vh - 400px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-mobile[_ngcontent-%COMP%]{padding-bottom:400px!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}"]}),n})();const Yf=(s,n)=>[s,n],B3=(s,n,t,i,o,a,r,l,c,_)=>[s,n,t,i,o,a,r,l,c,_],$3=(s,n,t,i)=>[s,n,t,i],Q3=(s,n)=>({"container-content-mobile":s,"container-content-desktop":n}),q3=(s,n)=>({"margin-question-bar-for-simple-test-for-desktop":s,"margin-question-bar-for-simple-test-for-mobile":n}),Y3=(s,n)=>({"monitor-screen":s,"monitor-screen-mobile":n}),U3=s=>({joinByExamHashId:s}),Uf=s=>[s];function X3(s,n){1&s&&e.nrm(0,"app-coazt-leave-window-event")}function W3(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG();const t=e.sdS(21);e.Y8G("ngTemplateOutlet",t)}}function H3(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG();const t=e.sdS(23);e.Y8G("ngTemplateOutlet",t)}}function J3(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",16),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",17),e.eu8(3,14),e.k0s()(),e.nrm(4,"azt-tracking-user-tags"),e.bVm()}if(2&s){const t=e.XpG(3),i=e.sdS(7);e.R7$(2),e.Y8G("ngClass",e.l_i(2,Q3,t.isMobileScreenSize,!t.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function K3(s,n){if(1&s&&(e.nrm(0,"azt-loading-effect",18),e.nI1(1,"mytranslate")),2&s){const t=e.XpG(3);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function Z3(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG(3);const t=e.sdS(27);e.Y8G("ngTemplateOutlet",t)}}function e4(s,n){if(1&s&&(e.qex(0),e.DNE(1,J3,5,5,"ng-container",12)(2,K3,2,4,"azt-loading-effect",15)(3,Z3,1,1,"ng-container",13),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function t4(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG(2);const t=e.sdS(25);e.Y8G("ngTemplateOutlet",t)}}function n4(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG(2);const t=e.sdS(11);e.Y8G("ngTemplateOutlet",t)}}function i4(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG(2);const t=e.sdS(13);e.Y8G("ngTemplateOutlet",t)}}function s4(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG(2);const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function o4(s,n){if(1&s&&e.eu8(0,14),2&s){e.XpG(2);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function a4(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,e4,4,3,"ng-container",12)(2,t4,1,1,"ng-container",13)(3,n4,1,1,"ng-container",13)(4,i4,1,1,"ng-container",13)(5,s4,1,1,"ng-container",13)(6,o4,1,1,"ng-container",13),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.ziG(6,$3,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_SELECT),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CAPACITY_EXAM_INTRO),e.R7$(),e.Y8G("ngIf",e.l_i(11,Yf,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function r4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-desktop",25),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())})("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("sAztTestResizeService",t.sAztTestResizeService)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)("isMobileScreenSize",t.isMobileScreenSize)}}function l4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-header-box-for-mobile",26),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)}}function c4(s,n){if(1&s&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_thi_sinh")+": "+t.currentTakeTestStepData.testingUserObj.fullName)}}function u4(s,n){if(1&s&&(e.j41(0,"span",29),e.EFF(1),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.currentTakeTestStepData.capacityComponent.name," ")}}function _4(s,n){if(1&s&&(e.j41(0,"div",27),e.DNE(1,c4,3,3,"span",28)(2,u4,2,1,"span",28),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.currentTakeTestStepData.capacityComponent),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.capacityComponent)}}function d4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-simple-test-footer-box-for-mobile",30),e.bIt("changeShowTypeEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeShowType.emit(o))})("openSubmitExamEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam.emit())})("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog.emit())})("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog.emit())}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)}}function m4(s,n){if(1&s&&(e.DNE(0,r4,1,4,"app-coazt-simple-test-header-box-for-desktop",19)(1,l4,1,2,"app-coazt-simple-test-header-box-for-mobile",20),e.j41(2,"div",21),e.nrm(3,"div",22),e.DNE(4,_4,3,2,"div",23),e.eu8(5,14)(6,14),e.k0s(),e.DNE(7,d4,1,3,"app-coazt-simple-test-footer-box-for-mobile",24)),2&s){const t=e.XpG(),i=e.sdS(9),o=e.sdS(17);e.Y8G("ngIf",!t.isMobileScreenSize),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngClass",e.l_i(8,q3,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngClass",e.l_i(11,Y3,!t.isMobileScreenSize,t.isMobileScreenSize)),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",i),e.R7$(),e.Y8G("ngTemplateOutlet",o),e.R7$(),e.Y8G("ngIf",t.isMobileScreenSize)}}function p4(s,n){if(1&s&&(e.j41(0,"div",33),e.nrm(1,"div",34),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&s){let t;const i=e.XpG(2);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,null!==(t=null==i.currentTakeTestStepData.examConfigObj?null:i.currentTakeTestStepData.examConfigObj.header)&&void 0!==t?t:""),e.npT)}}function h4(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"azt-question-standalone-for-student-at-full-test",38),e.bIt("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setEssayAnswerEmitter.emit(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking.emit(o))})("nextQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.nextTo(a.currentTakeTestStepData,o))})("prevQuestionEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sAztTestNextBackQuestionService.backTo(a.currentTakeTestStepData,o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion.emit(o))}),e.k0s()()()}if(2&s){const t=n.$implicit,i=n.index,o=n.last,a=e.XpG(3);e.R7$(),e.FS9("id","question_"+t.id),e.Y8G("hidden",i!=a.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex),e.R7$(),e.Y8G("startQuestionIndex",a.currentTakeTestStepData.examObj.startQuestionIndex)("expandInfo",a.currentTakeTestStepData.examObj.expandInfo)("disableRender",!0)("disableLazy",!0)("follower",a.followerRenderQuest)("takeTestLayout",a.allTakeTestLayouts.STEP_QUESTION)("isMobile",a.isMobileScreenSize)("examObj",a.currentTakeTestStepData.examObj)("question",t)("index",i)("last",o)("overTime",!1)("fontSize",a.sAztTestResizeService.fontSize)("questionListLength",a.currentTakeTestStepData.viewQuestionObjs.length)}}function f4(s,n){if(1&s&&(e.qex(0),e.DNE(1,h4,3,16,"div",35),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs)}}function g4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-sort-essay-files-box",31),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s(),e.DNE(1,p4,3,3,"div",32)(2,f4,2,1,"ng-container",12)}if(2&s){const t=e.XpG();e.Y8G("answerFiles",t.currentTakeTestStepData.files),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.examConfigObj?null:t.currentTakeTestStepData.examConfigObj.allowHeader),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function T4(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.nrm(1,"lucide-icon",40),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"app-join-classroom-box",41),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_button_back")," "),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(4,U3,t.currentTakeTestStepData.examObj.hashId))}}function b4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-select-capacity-exam",42),e.bIt("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.selectCapacityExamEmitter.emit(o))}),e.k0s()}if(2&s){let t;const i=e.XpG();e.Y8G("hashId",null!==(t=i.currentTakeTestStepData.examObj.hashId)&&void 0!==t?t:"")}}function x4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-capacity-exam-intro",43),e.bIt("startedExamEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.startedExamEvent.emit())}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("capacityComponent",t.currentTakeTestStepData.capacityComponent)("waitingTime",t.currentTakeTestStepData.waitingTime)}}function v4(s,n){if(1&s&&e.nrm(0,"app-coazt-list-shortcut-question-box",46),2&s){const t=e.XpG(2);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("isMobileScreenSize",t.isMobileScreenSize)("layoutType",t.allTakeTestLayouts.STEP_QUESTION)}}function y4(s,n){if(1&s&&(e.j41(0,"div",44),e.DNE(1,v4,1,5,"app-coazt-list-shortcut-question-box",45),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function S4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",47),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",48),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function w4(s,n){if(1&s&&(e.j41(0,"div",49)(1,"div",50)(2,"div",51),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",52)(6,"a",53),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,Uf,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function I4(s,n){1&s&&(e.j41(0,"div",59)(1,"div",60)(2,"a",61),e.nrm(3,"img",62),e.nI1(4,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(5,"a",63),e.nrm(6,"img",64),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s()()()),2&s&&(e.R7$(3),e.Y8G("src",e.bMT(4,2,"images/google-play-badge.svg"),e.B4B),e.R7$(3),e.Y8G("src",e.bMT(7,4,"images/2928664.svg"),e.B4B))}function C4(s,n){1&s&&(e.j41(0,"div",55)(1,"p",56),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",59)(5,"div",65)(6,"p",66)(7,"span",67),e.EFF(8,"Google Play"),e.k0s(),e.nrm(9,"azt-download-qr-code",68),e.k0s(),e.j41(10,"p",69)(11,"span",67),e.EFF(12,"App Store"),e.k0s(),e.nrm(13,"azt-download-qr-code",68),e.k0s()()()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.R7$(7),e.Y8G("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),e.R7$(4),e.Y8G("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-student/id1556025594"))}function k4(s,n){if(1&s&&(e.j41(0,"div",49)(1,"div",50)(2,"div",51),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",54)(6,"div",55)(7,"p",56),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,I4,8,6,"div",57),e.k0s(),e.DNE(11,C4,14,7,"div",58),e.k0s(),e.j41(12,"div",52)(13,"a",53),e.nI1(14,"navigationLocalize"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_azt_take_test_only_app_available")),e.R7$(5),e.SpI(" ",e.bMT(9,8,"lang_core_tai_app_tai_day")," "),e.R7$(2),e.Y8G("ngIf",!t.isMobileWebView),e.R7$(),e.Y8G("ngIf",!t.isMobileWebView&&!t.isMobileDevice),e.R7$(2),e.Y8G("routerLink",e.eq3(14,Uf,e.bMT(14,10,t.homeLink))),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_quay_lai_trang_chu"))}}function E4(s,n){if(1&s&&e.nrm(0,"app-coazt-wait-to-test-time-box",70),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function A4(s,n){if(1&s&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",71),2&s){const t=e.XpG();e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}let Xf=(()=>{var s;class n extends o_{}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-test-in-step-layout"]],standalone:!0,features:[e.Vt3,e.aNF],decls:28,vars:20,consts:[["mainTakeTestContentTpl",""],["showStepQuestionTpl",""],["chooseStudentTpl",""],["chooseCapacityExamTpl",""],["capacityExamIntro",""],["listQuestionsSelectedInMobile",""],["overTimeTpl",""],["commonErrorTpl",""],["showOnlyAppMessage",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],[3,"currentTakeTestStepData"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0 10px",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize","openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[1,"pb-4",3,"ngClass"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],["class","p-1 text-center mt-1",4,"ngIf"],[3,"currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService","changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent",4,"ngIf"],[3,"openQuitDialogEvent","changeShowTypeEvent","showUploadEssayFilesDialogEvent","openSubmitExamEvent","currentTakeTestStepData","sAztTestResizeService","layoutType","isMobileScreenSize"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType"],[1,"p-1","text-center","mt-1"],["class","text-md font-medium",4,"ngIf"],[1,"text-md","font-medium"],[3,"changeShowTypeEvent","openSubmitExamEvent","showUploadEssayFilesDialogEvent","openQuitDialogEvent","currentTakeTestStepData","layoutType","sAztTestNextBackQuestionService"],[3,"changeAnswerFiles","answerFiles"],["class","box p-3 mb-3",4,"ngIf"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHTML"],["class","mt-4","style","animation-delay: 0.05s",4,"ngFor","ngForOf"],[1,"mt-4",2,"animation-delay","0.05s"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id","hidden"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","nextQuestionEmitter","prevQuestionEmitter","sendAudioEmit","startQuestionIndex","expandInfo","disableRender","disableLazy","follower","takeTestLayout","isMobile","examObj","question","index","last","overTime","fontSize","questionListLength"],[1,"btn","btn-sm","btn-outline-secondary","mb-5","mt-5","mr-auto",3,"click"],["name","chevron-left","size","20"],[3,"selectStudentEvent","joinClassroomByType"],[3,"selectCapacityExamEmitter","hashId"],[3,"startedExamEvent","capacityComponent","waitingTime"],[1,"box","p-3"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","isMobileScreenSize","layoutType"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[1,"mt-5","text-center"],[1,"block"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","block",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-student/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(i,o){1&i&&(e.nrm(0,"app-coazt-tracking-full-screen-event",11)(1,"app-coazt-tracking-visible-event",11),e.DNE(2,X3,1,0,"app-coazt-leave-window-event",12)(3,W3,1,1,"ng-container",13)(4,H3,1,1,"ng-container",13)(5,a4,7,14,"div",12)(6,m4,8,14,"ng-template",null,0,e.C5r)(8,g4,3,3,"ng-template",null,1,e.C5r)(10,T4,5,6,"ng-template",null,2,e.C5r)(12,b4,1,1,"ng-template",null,3,e.C5r)(14,x4,1,2,"ng-template",null,4,e.C5r)(16,y4,2,1,"ng-template",null,5,e.C5r)(18,S4,2,9,"ng-template",null,6,e.C5r)(20,w4,10,11,"ng-template",null,7,e.C5r)(22,k4,17,16,"ng-template",null,8,e.C5r)(24,E4,1,2,"ng-template",null,9,e.C5r)(26,A4,1,3,"ng-template",null,10,e.C5r)),2&i&&(e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",o.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(6,Yf,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(o.currentTakeTestStepData.currentStep)&&!o.questsLoadState.startLoad&&!o.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",o.currentTakeTestStepData.currentStep==o.allTakeTestSteps.SHOW_APP_ONLY_MESSAGE),e.R7$(),e.Y8G("ngIf",e.zJS(9,B3,[o.allTakeTestSteps.WAIT_TO_TEST_TIME,o.allTakeTestSteps.CHOOSE_STUDENT,o.allTakeTestSteps.CAPACITY_EXAM_SELECT,o.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,o.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,o.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,o.allTakeTestSteps.SHOW_FULL_SCREEN,o.allTakeTestSteps.SHOW_VIDEO_REQUIRED,o.allTakeTestSteps.START_TEST,o.allTakeTestSteps.CAPACITY_EXAM_INTRO]).includes(o.currentTakeTestStepData.currentStep)))},dependencies:[Er,Ar,Or,a_,se.K,l_,u_,Bf,Lo.s,Fr,jr.l,d_,m_,Rr,zr,Dr,hi.d,Mr,Gr,z.F2,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,z.Vs,Y.s,F.flO,F.WGl,W.L,z._y,U.Id,q.k],styles:[".margin-question-bar-for-simple-test-for-desktop[_ngcontent-%COMP%], .margin-question-bar-for-simple-test-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 24px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 220px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.sheet-screen-monitor[_ngcontent-%COMP%]{max-height:calc(100vh - 400px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-mobile[_ngcontent-%COMP%]{padding-bottom:400px!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}"]}),n})();const O4=()=>({"mr-2 azt-hidden md:block":!0});function R4(s,n){if(1&s&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-effect",3),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function F4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-list-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))})("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEvent(o))})("startedExamEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.startedExam())}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function j4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-step-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))})("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEvent(o))})("startedExamEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.startedExam())}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function z4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-group-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))})("selectCapacityExamEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectCapacityExamEvent(o))})("startedExamEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.startedExam())}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function D4(s,n){if(1&s&&(e.qex(0),e.DNE(1,F4,1,8,"app-coazt-take-test-in-list-layout",5)(2,j4,1,8,"app-coazt-take-test-in-step-layout",5)(3,z4,1,8,"app-coazt-take-test-in-group-layout",5),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.GROUP_QUESTION)}}function M4(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",7)(2,"div",8)(3,"div",9),e.nrm(4,"div",10),e.nI1(5,"mytranslate"),e.j41(6,"div",11)(7,"a",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToVipUpgrade())}),e.nrm(8,"lucide-icon",13),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",14),e.EFF(12),e.k0s()()(),e.bVm()}if(2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,4,"lang_take_test_attemps_exam_warning"),e.npT),e.R7$(4),e.Y8G("ngClass",e.lJ4(8,O4)),e.R7$(),e.SpI(" ",e.bMT(10,6,"lang_azt_upgrade_vip")," "),e.R7$(3),e.JRh(t.commonService.getFullCurrentUrl())}}function G4(s,n){if(1&s&&e.DNE(0,D4,4,3,"ng-container",4)(1,M4,13,9,"ng-container",4),2&s){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData&&t.allowAttemptExam),e.R7$(),e.Y8G("ngIf",!t.allowAttemptExam)}}const Wf="azota_capacity_exam_layout";let P4=(()=>{var s;class n extends s_{changeShowType(i){this.layoutType=i,this.browserStorageService.saveSimpleStorage(Wf+"_"+this.hashId,this.layoutType)}getShowType(){const i=this.browserStorageService.getSimpleStorage(Wf+"_"+this.hashId);this.layoutType=i&&"undefined"!==i?i:Bt.LIST_QUESTION}selectCapacityExamEvent(i){this.getInitDataFromApi()}startedExam(){this.frontExamService.apiFrontExamStartTestComponentHashIdPost(this.hashId).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.getInitDataFromApi()})}startShowTestContent(i,o){return this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,i,a=>{if(this.currentTakeTestStepData=a,this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown)return o(void 0);this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown=!0,this.intervalExamTime(),this.intervalToGetServerTime(),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.getImagesThatUploadAtMobileQrCodeFromApi(this.currentTakeTestStepData.uploadHashCode,r=>{null!=r&&(this.currentTakeTestStepData.files=r)}),this.intervalToSendTestDataToApi(),o(void 0)})}getInitDataFromApi(){this.initStatusObj(),this.checkVipOrBasicExam(this.hashId,i=>{if(!i)return this.allowAttemptExam=!1,this.stopStatusObj();let o=new Dt(this.hashId,this.browserStorageService).getPassword(),a=new Dt(this.hashId,this.browserStorageService).hasInfo();this.waitDestroy(et.c.production||et.c.isProdAzotaVn?this.frontExamService.apiFrontExamInitDataGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{const c=this.encryptionHelper.result(l);this.processInitData(""!=o,c)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{this.processInitData(""!=o,l)}))})}ngOnInit(){super.ngOnInit(),this.initParams(),this.getShowType()}constructor(){super(),this.layoutType=Bt.LIST_QUESTION,this.modeViewTest="capacity"}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-capacity-exam"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink","changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","selectCapacityExamEmitter","startedExamEvent",4,"ngIf"],[3,"changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","selectCapacityExamEmitter","startedExamEvent","sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink"],[1,"flex","justify-center","ml-3","mr-3"],[2,"max-width","500px","line-height","35px"],[1,"box","p-3","mt-20"],[1,"text-danger",2,"font-size","18px",3,"innerHTML"],[1,"text-center"],[1,"btn","btn-sm","btn-gradient-primary","mt-3",2,"font-size","18px",3,"click"],["name","gem","size","24",3,"ngClass"],[1,"mt-3","text-center"]],template:function(i,o){if(1&i&&e.DNE(0,R4,2,1,"div",1)(1,G4,2,2,"ng-template",null,0,e.C5r),2&i){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,qf,Xf,Lf,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const N4=()=>({"mr-2 azt-hidden md:block":!0});function V4(s,n){if(1&s&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-effect",3),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function L4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-list-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function B4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-step-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function $4(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-take-test-in-group-layout",6),e.bIt("changeShowType",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeShowType(o))})("openQuitDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi(o))}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)}}function Q4(s,n){if(1&s&&(e.qex(0),e.DNE(1,L4,1,8,"app-coazt-take-test-in-list-layout",5)(2,B4,1,8,"app-coazt-take-test-in-step-layout",5)(3,$4,1,8,"app-coazt-take-test-in-group-layout",5),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.LIST_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.STEP_QUESTION),e.R7$(),e.Y8G("ngIf",t.layoutType==t.allTakeTestLayouts.GROUP_QUESTION)}}function q4(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",7)(2,"div",8)(3,"div",9),e.nrm(4,"div",10),e.nI1(5,"mytranslate"),e.j41(6,"div",11)(7,"a",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToVipUpgrade())}),e.nrm(8,"lucide-icon",13),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",14),e.EFF(12),e.k0s()()(),e.bVm()}if(2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,4,"lang_take_test_attemps_exam_warning"),e.npT),e.R7$(4),e.Y8G("ngClass",e.lJ4(8,N4)),e.R7$(),e.SpI(" ",e.bMT(10,6,"lang_azt_upgrade_vip")," "),e.R7$(3),e.JRh(t.commonService.getFullCurrentUrl())}}function Y4(s,n){if(1&s&&e.DNE(0,Q4,4,3,"ng-container",4)(1,q4,13,9,"ng-container",4),2&s){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData&&t.allowAttemptExam),e.R7$(),e.Y8G("ngIf",!t.allowAttemptExam)}}const Hf="azota_take_test_layout";let U4=(()=>{var s;class n extends s_{changeShowType(i){this.layoutType=i,this.browserStorageService.saveSimpleStorage(Hf+"_"+this.hashId,this.layoutType)}getShowType(){const i=this.browserStorageService.getSimpleStorage(Hf+"_"+this.hashId);this.layoutType=i&&"undefined"!==i?i:Bt.LIST_QUESTION}startShowTestContent(i,o){return this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,i,a=>{if(this.currentTakeTestStepData=a,this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown)return o(void 0);this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown=!0,this.intervalExamTime(),this.intervalToGetServerTime(),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.getImagesThatUploadAtMobileQrCodeFromApi(this.currentTakeTestStepData.uploadHashCode,r=>{null!=r&&(this.currentTakeTestStepData.files=r)}),this.intervalToSendTestDataToApi(),o(void 0)})}getInitDataFromApi(){this.initStatusObj(),this.checkVipOrBasicExam(this.hashId,i=>{if(!i)return this.allowAttemptExam=!1,this.stopStatusObj();let o=new Dt(this.hashId,this.browserStorageService).getPassword(),a=new Dt(this.hashId,this.browserStorageService).hasInfo();this.waitDestroy(et.c.production||et.c.isProdAzotaVn?this.frontExamService.apiFrontExamInitDataGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{const c=this.encryptionHelper.result(l);this.processInitData(""!=o,c)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),0).subscribe(l=>{this.processInitData(""!=o,l)}))})}ngOnInit(){super.ngOnInit(),this.initParams(),this.getShowType()}constructor(){super(),this.layoutType=Bt.LIST_QUESTION,this.modeViewTest="test"}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-test"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink","changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi",4,"ngIf"],[3,"changeShowType","openQuitDialog","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","sAztTestResizeService","sAztTestNextBackQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink"],[1,"flex","justify-center","ml-3","mr-3"],[2,"max-width","500px","line-height","35px"],[1,"box","p-3","mt-20"],[1,"text-danger",2,"font-size","18px",3,"innerHTML"],[1,"text-center"],[1,"btn","btn-sm","btn-gradient-primary","mt-3",2,"font-size","18px",3,"click"],["name","gem","size","24",3,"ngClass"],[1,"mt-3","text-center"]],template:function(i,o){if(1&i&&e.DNE(0,V4,2,1,"div",1)(1,Y4,2,2,"ng-template",null,0,e.C5r),2&i){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,qf,Xf,Lf,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})(),Jf=(()=>{var s;class n{constructor(){this.checkQuestion=new An.B}listenCheckQuestionEvent(){return this.checkQuestion}sendCheckQuestionEvent(i){this.checkQuestion.next(i)}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var X4=O(96697);class Kf{setQuestionAnswers(n,t){return n.viewQuestionObjs.forEach(i=>{let o=t.find(a=>1==a.answered&&a.id==i.id);null!=o&&(i.practiceCheckAnswer=o.correct?"correct":"wrong",i.numberOfChecks=o.correct?1:2)}),n}hasWrongAnswer(n){return null!=n.viewQuestionObjs.find(t=>"wrong"==t.practiceCheckAnswer)}calculateStartQuestionPosition(n,t){return Math.floor(n/t)*t}findLastQuestionObjThatHasAnswer(n){return n.viewQuestionObjs.slice().reverse().find(i=>null!=i.practiceCheckAnswer)}}const W4=()=>({"mr-2 text-pending":!0});let H4=(()=>{var s;class n extends kt._{btnCloseDialog(i){this.dialogRef.close(i)}constructor(i,o){super(o,i),this.dialogRef=i,this.data=o}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["confirm-reset-answer"]],standalone:!0,features:[e.Vt3,e.aNF],decls:17,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","px-3","pt-3"],["name","octagon-alert","size","24",3,"ngClass"],[1,"mt-2"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","confirm-reset-answer-IROMXJMuQD",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","confirm-reset-answer-Dau1W0YPOB",1,"btn","w-24","btn-primary",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5)(8,"azt-mat-dialog-content",6),e.nrm(9,"div",7),e.k0s()()()(),e.j41(10,"div",8)(11,"button",9),e.bIt("click",function(){return o.btnCloseDialog(!1)}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"button",10),e.bIt("click",function(){return o.btnCloseDialog(!0)}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()),2&i&&(e.R7$(4),e.Y8G("ngClass",e.lJ4(12,W4)),e.R7$(),e.SpI(" ",e.bMT(6,6,"lang_auto_canh_bao")," "),e.R7$(3),e.Y8G("defaultHeight",60),e.R7$(),e.Y8G("innerHtml",o.data.content,e.npT),e.R7$(3),e.SpI(" ",e.bMT(13,8,"lang_auto_huy")," "),e.R7$(3),e.SpI(" ",e.bMT(16,10,"lang_auto_xac_nhan")," "))},dependencies:[Nn.U,x.MD,x.YU,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const J4=()=>[];function K4(s,n){if(1&s&&(e.j41(0,"button",13)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG().index;e.R7$(2),e.JRh(t+1)}}function Z4(s,n){if(1&s&&(e.j41(0,"button",14)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG().index;e.R7$(2),e.JRh(t+1)}}function eF(s,n){if(1&s&&(e.j41(0,"button",15)(1,"span"),e.EFF(2),e.k0s()()),2&s){const t=e.XpG().index;e.R7$(2),e.JRh(t+1)}}function tF(s,n){if(1&s&&(e.j41(0,"div",9),e.DNE(1,K4,3,1,"button",10)(2,Z4,3,1,"button",11)(3,eF,3,1,"button",12),e.k0s()),2&s){const t=n.$implicit;e.R7$(),e.Y8G("ngIf",!t.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","wrong"===t.practiceCheckAnswer||"correct"===t.practiceCheckAnswer&&t.numberOfChecks&&t.numberOfChecks>1),e.R7$(),e.Y8G("ngIf","correct"===t.practiceCheckAnswer&&t.numberOfChecks&&t.numberOfChecks<=1)}}let nF=(()=>{var s;class n extends kt._{constructor(i,o){super(o,i),this.dialogRef=i,this.data=o,this.isDialog=!1}closeDialog(){this.dialogRef.close()}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Fe.CP,8),e.rXU(Fe.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["show-answer-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:13,vars:10,consts:[[1,"box","py-4","px-4"],[1,"flex","items-center"],[1,"text-md","font-medium","inline-block","mr-2"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-2","overflow-auto"],["pointerEventsMethod","scrollbar",2,"max-height","50vh",3,"visibility","autoHeightDisabled"],[1,"flex","items-center","p-3",2,"flex-wrap","wrap","padding-right","0"],["class","mr-3 mb-3 answer-training-block h-full",4,"ngFor","ngForOf"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-primary","w-24",3,"click"],[1,"mr-3","mb-3","answer-training-block","h-full"],["class","btn border-slate-400 btn-sm w-full h-full",4,"ngIf"],["class","btn border-slate-400 btn-sm w-full h-full bg-slate-400 dark:bg-darkmode-800",4,"ngIf"],["class","btn border-slate-400 btn-sm w-full h-full btn-success text-white",4,"ngIf"],[1,"btn","border-slate-400","btn-sm","w-full","h-full"],[1,"btn","border-slate-400","btn-sm","w-full","h-full","bg-slate-400","dark:bg-darkmode-800"],[1,"btn","border-slate-400","btn-sm","w-full","h-full","btn-success","text-white"]],template:function(i,o){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",3)(6,"ng-scrollbar",4)(7,"div",5),e.DNE(8,tF,4,3,"div",6),e.k0s()()(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return o.closeDialog()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()),2&i){let a;e.R7$(3),e.SpI(" ",e.bMT(4,5,"lang_auto_danh_sach_cau_hoi")," "),e.R7$(3),e.Y8G("visibility","hover")("autoHeightDisabled",!1),e.R7$(2),e.Y8G("ngForOf",null!==(a=o.data.questionList)&&void 0!==a?a:e.lJ4(9,J4)),e.R7$(3),e.SpI(" ",e.bMT(12,7,"lang_auto_dong")," ")}},dependencies:[x.MD,x.Sq,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,U.Yh,q.k],encapsulation:2}),n})();const f_=()=>({"text-success":!0}),Zf=()=>({"text-danger":!0}),eg=()=>({"text-warning":!0});function iF(s,n){1&s&&(e.j41(0,"div"),e.nrm(1,"lucide-icon",9),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,f_)))}function sF(s,n){1&s&&e.nrm(0,"div",10)}function oF(s,n){if(1&s&&(e.j41(0,"div",7),e.DNE(1,iF,2,2,"div",4)(2,sF,1,0,"div",8),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf","correct"===t.practiceCheckAnswer&&1==t.numberOfChecks),e.R7$(),e.Y8G("ngIf","correct"===t.practiceCheckAnswer&&1!=t.numberOfChecks||"correct"!==t.practiceCheckAnswer)}}function aF(s,n){1&s&&e.nrm(0,"div",12)}function rF(s,n){1&s&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",13),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,Zf)))}function lF(s,n){1&s&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,f_)))}function cF(s,n){1&s&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,eg)))}function uF(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,aF,1,0,"div",11)(2,rF,2,2,"div",6)(3,lF,2,2,"div",6)(4,cF,2,2,"div",6),e.k0s()),2&s){const t=e.XpG(),i=t.$implicit,o=t.index,a=e.XpG(3);e.R7$(),e.Y8G("ngIf",o>a.curQuestion),e.R7$(),e.Y8G("ngIf","wrong"===i.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","correct"===i.practiceCheckAnswer&&1==i.numberOfChecks),e.R7$(),e.Y8G("ngIf","correct"===i.practiceCheckAnswer&&1!=i.numberOfChecks)}}function _F(s,n){if(1&s&&(e.j41(0,"li"),e.DNE(1,oF,3,2,"div",6)(2,uF,5,4,"div",4),e.k0s()),2&s){const t=n.index,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",t===i.curQuestion),e.R7$(),e.Y8G("ngIf",t!==i.curQuestion)}}function dF(s,n){if(1&s&&(e.qex(0),e.DNE(1,_F,3,2,"li",5),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.questionList)}}function mF(s,n){1&s&&e.nrm(0,"div",15)}function pF(s,n){1&s&&e.nrm(0,"div",12)}function hF(s,n){1&s&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",13),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,Zf)))}function fF(s,n){1&s&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,f_)))}function gF(s,n){1&s&&(e.j41(0,"div",7),e.nrm(1,"lucide-icon",9),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,eg)))}function TF(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,pF,1,0,"div",11)(2,hF,2,2,"div",6)(3,fF,2,2,"div",6)(4,gF,2,2,"div",6),e.k0s()),2&s){const t=e.XpG(2),i=t.$implicit,o=t.index,a=e.XpG(3);e.R7$(),e.Y8G("ngIf",o>a.curQuestion),e.R7$(),e.Y8G("ngIf","wrong"===i.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","correct"===i.practiceCheckAnswer&&1==i.numberOfChecks),e.R7$(),e.Y8G("ngIf","correct"===i.practiceCheckAnswer&&1!=i.numberOfChecks)}}function bF(s,n){if(1&s&&(e.qex(0),e.DNE(1,mF,1,0,"div",14)(2,TF,5,4,"div",4),e.bVm()),2&s){const t=e.XpG().index,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",t===i.curQuestion),e.R7$(),e.Y8G("ngIf",t!==i.curQuestion)}}function xF(s,n){if(1&s&&(e.j41(0,"li"),e.DNE(1,bF,3,2,"ng-container",4),e.k0s()),2&s){const t=n.index,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",t>=i.startQuestionPositionInPagination&&t<i.startQuestionPositionInPagination+i.numberOfShowItem)}}function vF(s,n){if(1&s&&(e.qex(0),e.DNE(1,xF,2,1,"li",5),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.questionList)}}function yF(s,n){if(1&s&&(e.j41(0,"div",1)(1,"nav",2)(2,"ul",3),e.DNE(3,dF,2,1,"ng-container",4)(4,vF,2,1,"ng-container",4),e.k0s()()()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.questionList.length<=t.numberOfShowItem),e.R7$(),e.Y8G("ngIf",t.questionList.length>t.numberOfShowItem)}}let SF=(()=>{var s;class n extends Z.H{}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["list-status-answer"]],inputs:{questionList:"questionList",curQuestion:"curQuestion",startQuestionPositionInPagination:"startQuestionPositionInPagination",numberOfShowItem:"numberOfShowItem"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","azt-hidden md:block",4,"ngIf"],[1,"azt-hidden","md:block"],[1,"inline-block",2,"vertical-align","middle"],[1,"pagination","items-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","mx-1",4,"ngIf"],[1,"mx-1"],["class","w-4 h-4 rounded-full border-w-2 border-slate-400 dark:border-darkmode-400",4,"ngIf"],["name","check","size","16",3,"ngClass"],[1,"w-4","h-4","rounded-full","border-w-2","border-slate-400","dark:border-darkmode-400"],["class","w-2 h-2 rounded-full border-w-2 border-slate-400 dark:border-darkmode-400 mx-1",4,"ngIf"],[1,"w-2","h-2","rounded-full","border-w-2","border-slate-400","dark:border-darkmode-400","mx-1"],["name","x","size","16",3,"ngClass"],["class","w-4 h-4 rounded-full border-w-2 border-slate-400 dark:border-darkmode-400 mx-1",4,"ngIf"],[1,"w-4","h-4","rounded-full","border-w-2","border-slate-400","dark:border-darkmode-400","mx-1"]],template:function(i,o){1&i&&e.DNE(0,yF,5,2,"div",0),2&i&&e.Y8G("ngIf",o.questionList.length)},dependencies:[x.MD,x.YU,x.Sq,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function wF(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",4),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function IF(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_well_done")," "))}function CF(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_pay_more_attention_okay")," "))}function kF(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_keep_up_the_good_work_keep_going")," "))}function EF(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_testbank_frontend_keep_trying_harder_okay")," "))}function AF(s,n){if(1&s&&(e.qex(0),e.j41(1,"div",30),e.nrm(2,"lucide-icon",31),e.k0s(),e.j41(3,"div",32)(4,"div",33),e.DNE(5,IF,3,3,"span",21)(6,CF,3,3,"span",21),e.k0s(),e.j41(7,"div",34),e.DNE(8,kF,3,3,"span",21)(9,EF,3,3,"span",21),e.k0s()(),e.bVm()),2&s){const t=e.XpG(3);e.R7$(5),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks<=1),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks>1),e.R7$(2),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks<=1),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks>1)}}function OF(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",35),e.nrm(1,"lucide-icon",36),e.k0s(),e.j41(2,"div",32)(3,"div",33)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"div",34)(8,"span")(9,"span"),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"a",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.skipQuestion())}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()()}2&s&&(e.R7$(5),e.JRh(e.bMT(6,3,"lang_testbank_frontend_not_correct")+"!"),e.R7$(5),e.JRh(e.bMT(11,5,"lang_testbank_frontend_try_again_or_you_can")+" "),e.R7$(3),e.SpI(" ",e.bMT(14,7,"lang_testbank_frontend_skip")," "))}function RF(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.DNE(3,AF,10,4,"ng-container",25)(4,OF,15,9,"ng-template",null,1,e.C5r),e.j41(6,"div",26)(7,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.closeStatusBoxAnswer())}),e.j41(8,"span",28),e.nrm(9,"lucide-icon",29),e.k0s()()()()()()}if(2&s){const t=e.sdS(5),i=e.XpG(2);e.R7$(3),e.Y8G("ngIf","correct"==i.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer)("ngIfElse",t)}}function FF(s,n){1&s&&e.nrm(0,"azt-loading-ui",40)}function jF(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.checkAnswerQuestionByApi(!1))}),e.DNE(1,FF,1,0,"azt-loading-ui",39),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG(2);e.Y8G("disabled",!t.sAztTestQuestionService.checkQuestionHasAnswer(t.currentTakeTestStepData,t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(2),e.JRh(e.bMT(4,3,null==t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer?"lang_testbank_check":"lang_testbank_try_again"))}}function zF(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.nextQuestion(o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id))}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,t.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion?"lang_testbank_frontend_view_results":"lang_testbank_next_question")),e.R7$(3),e.SpI("(",t.countdown+"s",")")}}function DF(s,n){1&s&&(e.qex(0),e.j41(1,"div",42),e.nrm(2,"div",43)(3,"div",44),e.k0s(),e.bVm())}function MF(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.resetAnswerQuestion())}),e.j41(2,"span",7),e.nrm(3,"lucide-icon",8),e.k0s(),e.j41(4,"span",9),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showAnswerDialog())}),e.j41(8,"span",11),e.nrm(9,"lucide-icon",12),e.k0s(),e.j41(10,"span",13),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",14),e.nrm(14,"list-status-answer",15),e.k0s()(),e.j41(15,"div",16)(16,"div",17),e.DNE(17,RF,10,2,"div",18)(18,jF,5,5,"button",19)(19,zF,6,4,"button",20)(20,DF,4,0,"ng-container",21),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",!t.sAztTestQuestionService.hasWrongAnswer||t.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion),e.R7$(4),e.SpI(" ",e.bMT(6,11,"lang_testbank_start_over")," "),e.R7$(6),e.SpI(" ",e.bMT(12,13,"lang_auto_cau")+" "+(t.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex+1)+"/"+t.currentTakeTestStepData.viewQuestionObjs.length," "),e.R7$(3),e.Y8G("questionList",t.currentTakeTestStepData.viewQuestionObjs)("curQuestion",t.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex)("startQuestionPositionInPagination",t.startQuestionPositionInPagination)("numberOfShowItem",t.limitNumberQuestionsInPagination),e.R7$(3),e.Y8G("ngIf",t.sAztTestQuestionService.isShowAnswerStatusBox&&t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer&&t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.numberOfChecks),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer||"wrong"===t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf","correct"===t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf",t.sAztTestQuestionService.isShowSuccessAnimationBox)}}let GF=(()=>{var s;class n extends Z.H{checkAnswerQuestionByApi(i){i||(this.sAztTestQuestionService.isCheckingAnswer=!0);let o=this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj,a={questionId:o.id,answerContent:[{index:999,content:""}]};const r={examResultId:this.currentTakeTestStepData.termExamResultId,answer:i?a:this.sAztTestQuestionService.getAnswerOfQuestion(this.currentTakeTestStepData,o.id)??a};this.waitDestroy(this.frontExamResultService.apiFrontExamResultSaveQuestionResultEncryptPost(this.encryptionHelper.payload(r),this.currentTakeTestStepData.examObj.hashId).subscribe(l=>{if(!l.success)return this.sAztTestQuestionService.isCheckingAnswer=!1,this.errorStatusObj(l.message,!0);let c=l.data;o.numberOfChecks=(o.numberOfChecks??0)+1,i?o.practiceCheckAnswer="wrong":(this.sAztTestQuestionService.isShowAnswerStatusBox=!0,o.practiceCheckAnswer=c?.correct?"correct":"wrong","correct"==o.practiceCheckAnswer&&(this.sAztTestQuestionService.isShowSuccessAnimationBox=!0,o.numberOfChecks<=1&&this.sAztTestQuestionService.trainingAudioSuccess.play(),this.startCountdown(o.id))),"correct"!==o.practiceCheckAnswer&&(this.sAztTestQuestionService.hasWrongAnswer=!0),this.sAztTestQuestionService.isCheckingAnswer=!1}))}finishTrainingTest(){this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamFinishExamResultGet(this.currentTakeTestStepData.examObj.hashId??"",this.currentTakeTestStepData.termExamResultId).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);if(i.data?.status){try{this.localStorageObject.clearAllCache(),this.sAztFullScreenService.exitFullscreen()}catch{}this.stopStatusObj(),this.myNavigation(`/test/submit-test/${this.tenantId}/${this.curCateId}/${this.currentTakeTestStepData.examObj.hashId}/${this.currentTakeTestStepData.termExamResultId}`)}}))}nextQuestion(i){if(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id==i){if(this.currentTakeTestStepData.nextBackQuestionModel.isLastQuestion)return this.finishTrainingTest();this.currentTakeTestStepData=this.sAztTestNextBackQuestionService.nextTo(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj),this.startQuestionPositionInPagination=this.sAztTrainingService.calculateStartQuestionPosition(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex,this.limitNumberQuestionsInPagination),this.sAztTestQuestionService.isShowSuccessAnimationBox=!1}}skipQuestion(){this.nextQuestion(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)}resetAnswerQuestion(){const o={content:this.commonService.myTranslateInstant("lang_testbank_when_confirming_the_system_will_reset_all_the_answers_you_have_chosen")+"!"};this.sAztDialogService.open(H4,{data:o,width:"500px"}).afterClosed().subscribe(r=>{r&&(this.initStatusObj(),this.waitDestroy(this.frontExamService.apiFrontExamResetExamResultGet(this.currentTakeTestStepData.examObj.hashId??"",this.currentTakeTestStepData.termExamResultId).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.sAztTestQuestionService.clearAllData(this.currentTakeTestStepData),this.stopStatusObj(),this.resetTrainingTestEvent.emit()})))})}showHintAnswer(){this.currentTakeTestStepData=this.sAztTestQuestionService.setShowHint(this.currentTakeTestStepData,this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id),"correct"!==this.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer&&this.checkAnswerQuestionByApi(!0)}showAnswerDialog(){this.sAztDialogService.open(nF,{data:{questionList:this.currentTakeTestStepData.viewQuestionObjs},width:"800px"})}closeStatusBoxAnswer(){this.sAztTestQuestionService.isShowAnswerStatusBox=!1}startCountdown(i){this.countdownSubscription&&this.countdownSubscription.unsubscribe(),this.countdown=3,this.countdownSubscription=(0,Qn.Y)(1e3).pipe((0,X4.s)(this.countdown)).subscribe({next:o=>this.countdown=this.countdown-1-o,complete:()=>this.nextQuestion(i)})}ngOnInit(){let i=this.sAztTrainingService.findLastQuestionObjThatHasAnswer(this.currentTakeTestStepData);null!=i&&(this.currentTakeTestStepData=this.sAztTestNextBackQuestionService.nextTo(this.currentTakeTestStepData,i)),this.sAztTestQuestionService.hasWrongAnswer=this.sAztTrainingService.hasWrongAnswer(this.currentTakeTestStepData),this.startQuestionPositionInPagination=this.sAztTrainingService.calculateStartQuestionPosition(this.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex,this.limitNumberQuestionsInPagination),this.testCheckQuestionService.listenCheckQuestionEvent().subscribe(o=>this.checkAnswerQuestionByApi(!1))}ngOnDestroy(){this.countdownSubscription&&this.countdownSubscription.unsubscribe()}constructor(i,o,a,r,l){super(),this.localStorageObject=i,this.frontExamResultService=o,this.frontExamService=a,this.sAztDialogService=r,this.encryptionHelper=l,this.resetTrainingTestEvent=new e.bkB,this.startQuestionPositionInPagination=0,this.limitNumberQuestionsInPagination=15,this.countdown=3,this.countdownSubscription=new n_.yU,this.sAztFullScreenService=new $i,this.sAztTrainingService=new Kf,this.testCheckQuestionService=(0,e.WQX)(Jf)}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(Cf.G),e.rXU(ke.Ry),e.rXU(ke.iB),e.rXU(wn.i),e.rXU(If.w))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-training-footer-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",requiredNextBackQuestionModel:"requiredNextBackQuestionModel",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",sAztTestQuestionService:"sAztTestQuestionService",tenantId:"tenantId",curCateId:"curCateId"},outputs:{resetTrainingTestEvent:"resetTrainingTestEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["doneLoading",""],["incorrectTpl",""],[1,"box","z-50","rounded-none","fixed","flex","items-center","bottom-0","left-0","p-3","w-full"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"flex","items-center","mr-auto"],["azt-track-service","take-training-q7-dI4je6b",1,"btn","border-transparent","shadow-none","btn-outline-primary","mr-2",3,"click","disabled"],[1,"w-5","h-5"],["name","rotate-ccw","size","20"],[1,"azt-hidden","md:block","ml-2"],["azt-track-service","take-training-QglPB2g4wq",1,"btn","border-transparent","shadow-none","btn-outline-primary","mr-2",3,"click"],[1,"w-5","h-5","mr-2"],["name","clipboard-list","size","20"],[1,"font-medium"],[1,"list-status-answer"],[3,"questionList","curQuestion","startQuestionPositionInPagination","numberOfShowItem"],[1,"ml-auto"],[1,"relative"],["class","box-status",4,"ngIf"],["azt-track-service","take-training-Vy9M0G9VK1u","class","btn btn-primary w-32",3,"disabled","click",4,"ngIf"],["azt-track-service","take-training-EtpBWukccKO","class","btn btn-primary w-48",3,"click",4,"ngIf"],[4,"ngIf"],[1,"box-status"],[1,"box","box-status-answer","absolute","p-3"],[1,"flex","items-center","box-status-answer-content","relative"],[4,"ngIf","ngIfElse"],[1,"absolute",2,"top","-8px","right","-8px"],["azt-track-service","take-training-7mWj7MPCixD",1,"btn","btn-sm","btn-outline-danger","btn-transparent",3,"click"],[1,"w-4","h-4","inline-block"],["name","x","size","18"],[1,"w-10","h-10","text-pending"],["name","star","size","40"],[1,"ml-3"],[1,"font-medium","text-lg"],[1,"mt-0.5"],[1,"w-10","h-10","text-primary"],["name","rotate-ccw","size","40"],["azt-track-service","take-training-CInmJPjmtb",1,"btn-text-primary","font-medium",3,"click"],["azt-track-service","take-training-Vy9M0G9VK1u",1,"btn","btn-primary","w-32",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["azt-track-service","take-training-EtpBWukccKO",1,"btn","btn-primary","w-48",3,"click"],[1,"pyro"],[1,"before"],[1,"after"]],template:function(i,o){if(1&i&&(e.j41(0,"div",2),e.DNE(1,wF,1,1,"azt-loading-effect",3)(2,MF,21,15,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,SF,Gt.R,x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],styles:['.box-status-answer[_ngcontent-%COMP%]{width:280px;top:-110px;right:50px}.box-status-answer-content[_ngcontent-%COMP%]:after{border-left:20px solid transparent;border-top:20px solid #fff;bottom:-30px;content:"";position:absolute;right:20px}.icon-triangle[_ngcontent-%COMP%]{top:7px;right:55px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.pyro[_ngcontent-%COMP%] > .before[_ngcontent-%COMP%], .pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{position:absolute;width:5px;height:5px;border-radius:50%;box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff;animation:1s _ngcontent-%COMP%_bang ease-out infinite backwards,1s _ngcontent-%COMP%_gravity ease-in infinite backwards,5s _ngcontent-%COMP%_position linear infinite backwards}.pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{animation-delay:1.25s,1.25s,1.25s;animation-duration:1.25s,1.25s,6.25s}@keyframes _ngcontent-%COMP%_bang{to{box-shadow:-144px -75.6666666667px #26ff00,-113px -209.6666666667px #9dff00,-22px 27.3333333333px #bfff00,182px 20.3333333333px #ff4800,-136px -364.6666666667px #ffa200,-163px -139.6666666667px #62ff00,-204px 51.3333333333px #b2ff00,104px -48.6666666667px #f0d,162px -134.6666666667px #f90,-189px -209.6666666667px #e6ff00,81px -58.6666666667px #ffe100,-181px 37.3333333333px #1f0,76px -135.6666666667px #ff2f00,-221px -182.6666666667px #00ffc4,-128px -146.6666666667px #fff200,-156px -111.6666666667px #00eaff,-48px -410.6666666667px #d0f,10px 1.3333333333px #00ff04,-243px -337.6666666667px #2600ff,-24px -218.6666666667px #ff9d00,248px -321.6666666667px #f0b,244px -95.6666666667px #0f9,192px -265.6666666667px #00ff4d,-117px 25.3333333333px #6200ff,-186px -189.6666666667px #ff0040,203px -255.6666666667px #00ff73,-71px -171.6666666667px #ffe500,-93px 80.3333333333px #df0,-239px 60.3333333333px #0062ff,76px 11.3333333333px #ffe100,-214px -388.6666666667px #00ff48,123px -262.6666666667px #004cff,2px -160.6666666667px #f200ff,3px -91.6666666667px #00ffb7,44px -4.6666666667px #ff002b,40px -91.6666666667px #b7ff00,-231px -245.6666666667px #91ff00,248px -134.6666666667px #0004ff,238px -160.6666666667px red,122px -6.6666666667px #0f2,55px -228.6666666667px #ff008c,-5px -411.6666666667px #ff00b7,-207px -68.6666666667px #ff4d00,141px -396.6666666667px #00e1ff,185px -156.6666666667px #3f0,-40px -84.6666666667px #ffd900,248px -235.6666666667px #b700ff,-151px -180.6666666667px #00d0ff,-94px -339.6666666667px #6aff00,176px -240.6666666667px #004cff,-156px -200.6666666667px #00ff59}}@keyframes _ngcontent-%COMP%_gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes _ngcontent-%COMP%_position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}']}),n})(),PF=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.showUploadEssayFilesDialog=new e.bkB,this.selectStudentEvent=new e.bkB,this.changeAnswerFiles=new e.bkB,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.setResultTracking=new e.bkB,this.sendAudioForQuestion=new e.bkB,this.submitTestToApi=new e.bkB,this.allTakeTestSteps=Ie,this.allTakeTestLayouts=Bt,this.allowContextMenu=!et.c.production}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-training-base-layout"]],inputs:{sAztTestResizeService:"sAztTestResizeService",sAztTestNextBackQuestionService:"sAztTestNextBackQuestionService",sAztTestQuestionService:"sAztTestQuestionService",currentTakeTestStepData:"currentTakeTestStepData",followerRenderQuest:"followerRenderQuest",questsLoadState:"questsLoadState",isMobileScreenSize:"isMobileScreenSize",homeLink:"homeLink",backToLink:"backToLink",tenantId:"tenantId",curCateId:"curCateId"},outputs:{showUploadEssayFilesDialog:"showUploadEssayFilesDialog",selectStudentEvent:"selectStudentEvent",changeAnswerFiles:"changeAnswerFiles",setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",setResultTracking:"setResultTracking",sendAudioForQuestion:"sendAudioForQuestion",submitTestToApi:"submitTestToApi"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,o){},dependencies:[x.MD,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k],encapsulation:2}),n})();function NF(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",1),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFullScreenMode())}),e.nrm(2,"lucide-icon",2),e.k0s()}2&s&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_toan_man_hinh"))}function VF(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",1),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changeFullScreenMode())}),e.nrm(2,"lucide-icon",3),e.k0s()}2&s&&e.FS9("matTooltip",e.bMT(1,1,"lang_testbank_tested_list_exit_full_screen"))}let LF=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.sAztFullScreenService=new $i,this.isFullScreenMode=!1}changeFullScreenMode(){this.isFullScreenMode?this.sAztFullScreenService.exitFullscreen():this.sAztFullScreenService.showFullScreen(),this.isFullScreenMode=!this.isFullScreenMode}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-full-screen-mode-box"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["class","btn btn-sm btn-secondary",3,"matTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click","matTooltip"],["name","maximize","size","18"],["name","minimize","size","18"]],template:function(i,o){1&i&&e.DNE(0,NF,3,3,"button",0)(1,VF,3,3,"button",0),2&i&&(e.Y8G("ngIf",!o.isFullScreenMode),e.R7$(),e.Y8G("ngIf",o.isFullScreenMode))},dependencies:[x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const tg=()=>({"mr-2":!0});function BF(s,n){1&s&&(e.qex(0),e.EFF(1),e.nI1(2,"mytranslate"),e.bVm()),2&s&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_button_back")))}function $F(s,n){if(1&s&&(e.j41(0,"span",17),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_thi_sinh"),": ",t.currentTakeTestStepData.testingUserObj.fullName,"")}}function QF(s,n){if(1&s&&e.nrm(0,"app-testbank-frontend-count-down-box",18),2&s){const t=e.XpG();e.Y8G("totalSecond",t.currentTakeTestStepData.countDownSecond)("useCountDown",!1)}}function qF(s,n){1&s&&(e.EFF(0),e.nI1(1,"mytranslate")),2&s&&e.SpI(" ",e.bMT(1,1,"lang_auto_khong_gioi_han")," ")}let YF=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.openQuitDialogEvent=new e.bkB}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-training-header-box"]],inputs:{currentTakeTestStepData:"currentTakeTestStepData",sAztTestResizeService:"sAztTestResizeService",isMobileScreenSize:"isMobileScreenSize"},outputs:{openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:22,vars:16,consts:[["unlimitedTimeTpl",""],[1,"fixed","w-full","bg-white","items-center","flex","top-0","left-0","ng-star-inserted","p-3",2,"z-index","111","border-bottom","1px solid #ccc"],["azt-track-service","training-header-box-phEe7AjEd",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[4,"ngIf"],[1,"relative","mx-auto"],["class","text-md font-medium",4,"ngIf"],[1,"mr-6"],[1,"flex","items-center"],["name","timer","size","20",3,"ngClass"],[3,"totalSecond","useCountDown",4,"ngIf","ngIfElse"],[1,"flex","items-center","dropdown","mr-3"],["azt-track-service","take-test-DqyfiYKf45",1,"btn","btn-sm","btn-secondary","mr-2",3,"click","disabled","matTooltip"],["name","zoom-out","size","18"],["azt-track-service","take-test-lcadhTPzm",1,"btn","btn-sm","btn-secondary",3,"click","disabled","matTooltip"],["name","zoom-in","size","18"],[1,"flex","items-center","dropdown"],[1,"text-md","font-medium"],[3,"totalSecond","useCountDown"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div")(2,"button",2),e.bIt("click",function(){return e.eBV(a),e.Njj(o.openQuitDialogEvent.emit())}),e.nrm(3,"lucide-icon",3),e.DNE(4,BF,3,3,"ng-container",4),e.k0s()(),e.j41(5,"div",5),e.DNE(6,$F,3,4,"span",6),e.k0s(),e.j41(7,"div",7)(8,"div",8),e.nrm(9,"lucide-icon",9),e.DNE(10,QF,1,2,"app-testbank-frontend-count-down-box",10)(11,qF,2,3,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(13,"div",11)(14,"button",12),e.nI1(15,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomOut())}),e.nrm(16,"lucide-icon",13),e.k0s(),e.j41(17,"button",14),e.nI1(18,"mytranslate"),e.bIt("click",function(){return e.eBV(a),e.Njj(o.sAztTestResizeService.zoomIn())}),e.nrm(19,"lucide-icon",15),e.k0s()(),e.j41(20,"div",16),e.nrm(21,"app-coazt-full-screen-mode-box"),e.k0s()()}if(2&i){const a=e.sdS(12);e.R7$(3),e.Y8G("ngClass",e.lJ4(14,tg)),e.R7$(),e.Y8G("ngIf",!o.isMobileScreenSize),e.R7$(2),e.Y8G("ngIf",!o.isMobileScreenSize),e.R7$(3),e.Y8G("ngClass",e.lJ4(15,tg)),e.R7$(),e.Y8G("ngIf",!o.currentTakeTestStepData.isUnLimitedTime)("ngIfElse",a),e.R7$(4),e.Y8G("disabled",o.sAztTestResizeService.fontSize<=1)("matTooltip",e.bMT(15,10,"lang_take_test_zoom_out")),e.R7$(3),e.Y8G("disabled",o.sAztTestResizeService.fontSize>=2)("matTooltip",e.bMT(18,12,"lang_take_test_zoom_in"))}},dependencies:[Zt,LF,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,vt.oV,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();function UF(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"span",4),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showExplainOfQuestion.emit())}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()}2&s&&(e.R7$(2),e.JRh(e.bMT(3,2,"lang_testbank_frontend_you_dont_know_how_to_do_it")+"? "),e.R7$(3),e.SpI(" ",e.bMT(6,4,"lang_testbank_frontend_please_use_the_hint")," "))}function XF(s,n){if(1&s&&(e.j41(0,"div",6)(1,"div",4),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",7),e.nrm(5,"azt-dynamic-hook",8),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_testbank_hint")," "),e.R7$(3),e.Y8G("content",t.questionObj.help)}}function WF(s,n){if(1&s&&(e.j41(0,"div",1),e.DNE(1,UF,7,6,"div",2)(2,XF,6,4,"div",3),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.isShowExplain),e.R7$(),e.Y8G("ngIf",t.isShowExplain)}}let HF=(()=>{var s;class n extends Z.H{constructor(){super(...arguments),this.isShowExplain=!1,this.showExplainOfQuestion=new e.bkB}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-explain-box-for-student-at-step-test"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},outputs:{showExplainOfQuestion:"showExplainOfQuestion"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["class","p-3",4,"ngIf"],[1,"p-3"],[4,"ngIf"],["class","p-3 mt-4",4,"ngIf"],[1,"font-medium"],[1,"btn-text-primary","font-medium",3,"click"],[1,"p-3","mt-4"],[1,"mt-2"],[3,"content"]],template:function(i,o){1&i&&e.DNE(0,WF,3,2,"div",0),2&i&&e.Y8G("ngIf",o.questionObj.help)},dependencies:[Po.x,x.MD,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,W.L,U.Id,q.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const JF=s=>({"skeleton-box-loading":s}),KF=s=>({"pb-2":s});function ZF(s,n){if(1&s&&e.nrm(0,"div",10),2&s){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,JF,t.renderConfigObj.isFirstRender))}}function ej(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-test-audio-ui",18),e.bIt("sendAudioEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioEmit.emit(o))}),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("questionObj",t.questionObj)("isShowList",!0)("totalLimit",(t.examObj.limitAudio||-1)>0?t.examObj.limitAudio||-1:0)}}function tj(s,n){if(1&s&&(e.j41(0,"div",11)(1,"div",12),e.nrm(2,"azt-question-group-content-box",13),e.j41(3,"div",14),e.DNE(4,ej,1,3,"azt-test-audio-ui",15),e.j41(5,"div",16),e.nrm(6,"azt-question-label-box",17),e.k0s(),e.nrm(7,"azt-question-content-box",13),e.k0s()()()),2&s){const t=e.XpG();e.R7$(),e.xc7("font-size",t.fontSize+"em")("line-height",t.fontSize&&t.fontSize<1.5?t.fontSize+.5:"1.7"),e.Y8G("id","question_render_container_"+t.questionObj.id)("ngClass",e.eq3(17,KF,t.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.R7$(2),e.Y8G("ngIf",t.questionObj.attachments.length>0),e.R7$(2),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex),e.R7$(),e.Y8G("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)}}function nj(s,n){1&s&&e.nrm(0,"div",19)}function ij(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-question-explain-box-for-student-at-step-test",20),e.bIt("showExplainOfQuestion",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.showExplainOfQuestion())}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("isShowExplain",t.isShowExplain)}}let sj=(()=>{var s;class n extends Uu.I{showExplainOfQuestion(){this.showHintAnswer.emit()}ngOnInit(){super.ngOnInit();let i=new Xu.C(!0,!0,!1);super.initData(i,this.follower,this.questionObj),this.listenFontChanged&&this.waitDestroy(this.listenFontChanged.subscribe(()=>{this.reRenderContent()}))}constructor(){super(),this.follower=new Pn.e,this.curQuestionIndex=0,this.fontSize=1,this.isShowExplain=!1,this.currentAnswerIsCorrect=!1,this.setOneChoiceAnswerEmitter=new e.bkB,this.setTrueFalseAnswerEmitter=new e.bkB,this.setFillAnswerEmitter=new e.bkB,this.setEssayAnswerEmitter=new e.bkB,this.sendAudioEmit=new e.bkB,this.setResultTracking=new e.bkB,this.showHintAnswer=new e.bkB}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-question-standalone-for-step-test"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",fontSize:"fontSize",listenFontChanged:"listenFontChanged",isShowExplain:"isShowExplain",currentAnswerIsCorrect:"currentAnswerIsCorrect",currentAnswerStatus:"currentAnswerStatus"},outputs:{setOneChoiceAnswerEmitter:"setOneChoiceAnswerEmitter",setTrueFalseAnswerEmitter:"setTrueFalseAnswerEmitter",setFillAnswerEmitter:"setFillAnswerEmitter",setEssayAnswerEmitter:"setEssayAnswerEmitter",sendAudioEmit:"sendAudioEmit",setResultTracking:"setResultTracking",showHintAnswer:"showHintAnswer"},standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:8,consts:[["elementRended",""],[1,"question-standalone-step-container-box","box"],[1,"question-standalone-step-question-box","p-3"],["load_effect_lazy","",1,"question-standalone-box",2,"box-shadow","none","margin","0px",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-step-answer-container-box"],[1,"ml-auto","mr-auto","w-full","relative"],[3,"setResultTracking","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","question","questionIndex","fontSize"],["class","absolute w-full h-full top-0 left-0 z-50",4,"ngIf"],[3,"questionObj","renderConfigObj","isShowExplain","showExplainOfQuestion",4,"ngIf"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container",2,"padding","0px",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList","totalLimit","sendAudioEmitter",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"sendAudioEmitter","questionObj","isShowList","totalLimit"],[1,"absolute","w-full","h-full","top-0","left-0","z-50"],[3,"showExplainOfQuestion","questionObj","renderConfigObj","isShowExplain"]],template:function(i,o){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.DNE(3,ZF,1,3,"div",4)(4,tj,8,19,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"azt-question-answer-view-for-student-at-step-page",7),e.bIt("setResultTracking",function(l){return e.eBV(a),e.Njj(o.setResultTracking.emit(l))})("setOneChoiceAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setOneChoiceAnswerEmitter.emit(l))})("setTrueFalseAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setTrueFalseAnswerEmitter.emit(l))})("setFillAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setFillAnswerEmitter.emit(l))})("setEssayAnswerEmitter",function(l){return e.eBV(a),e.Njj(o.setEssayAnswerEmitter.emit(l))}),e.k0s(),e.DNE(9,nj,1,0,"div",8),e.k0s()(),e.DNE(10,ij,1,3,"azt-question-explain-box-for-student-at-step-test",9),e.k0s()}if(2&i){const a=e.sdS(5);e.R7$(2),e.Y8G("id","question_render_element_"+o.questionObj.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a),e.R7$(5),e.Y8G("question",o.questionObj)("questionIndex",o.curQuestionIndex)("fontSize",o.fontSize),e.R7$(),e.Y8G("ngIf",o.currentAnswerIsCorrect),e.R7$(),e.Y8G("ngIf","wrong"==o.currentAnswerStatus)}},dependencies:[qu.y,Ir.c,Yu.S,Qu.$,Mf,HF,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,Y.s,F.flO,W.L,U.Id,q.k,Cr.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const oj=["trainingFooterBox"],aj=["leaveWindowBox"],ng=(s,n)=>[s,n],rj=(s,n,t,i,o,a,r,l)=>[s,n,t,i,o,a,r,l],lj=(s,n,t,i)=>[s,n,t,i],cj=(s,n)=>({"container-content-mobile":s,"container-content-desktop":n}),uj=(s,n)=>({"margin-question-bar-for-training-for-desktop":s,"margin-question-bar-for-training-for-mobile":n}),_j=(s,n)=>({"monitor-screen":s,"monitor-screen-mobile":n}),dj=s=>({joinByExamHashId:s}),mj=s=>[s];function pj(s,n){if(1&s&&(e.j41(0,"div",11),e.nrm(1,"azt-loading-effect",12),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function hj(s,n){1&s&&e.nrm(0,"app-coazt-leave-window-event",null,8)}function fj(s,n){if(1&s&&e.eu8(0,16),2&s){e.XpG();const t=e.sdS(15);e.Y8G("ngTemplateOutlet",t)}}function gj(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",18),e.bIt("contextmenu",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(o.allowContextMenu)}),e.j41(2,"div",19),e.eu8(3,16),e.k0s()(),e.bVm()}if(2&s){e.XpG(3);const t=e.sdS(7),i=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.l_i(2,cj,i.isMobileScreenSize,!i.isMobileScreenSize)),e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Tj(s,n){if(1&s&&(e.nrm(0,"azt-loading-effect",20),e.nI1(1,"mytranslate")),2&s){const t=e.XpG(5);e.Y8G("currentStatusObj",t.statusObj)("customText",e.bMT(1,2,"lang_auto_dang_tai_du_lieu_de_thi")+": "+t.questsLoadState.loadPercent+"%")}}function bj(s,n){if(1&s&&e.eu8(0,16),2&s){e.XpG(3);const t=e.sdS(19);e.Y8G("ngTemplateOutlet",t)}}function xj(s,n){if(1&s&&(e.qex(0),e.DNE(1,gj,4,5,"ng-container",13)(2,Tj,2,4,"azt-loading-effect",17)(3,bj,1,1,"ng-container",15),e.bVm()),2&s){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.questsLoadState.startLoad),e.R7$(),e.Y8G("ngIf",!t.questsLoadState.startLoad&&t.questsLoadState.hasErrs)}}function vj(s,n){if(1&s&&e.eu8(0,16),2&s){e.XpG(2);const t=e.sdS(17);e.Y8G("ngTemplateOutlet",t)}}function yj(s,n){if(1&s&&e.eu8(0,16),2&s){e.XpG(2);const t=e.sdS(11);e.Y8G("ngTemplateOutlet",t)}}function Sj(s,n){if(1&s&&e.eu8(0,16),2&s){e.XpG(2);const t=e.sdS(13);e.Y8G("ngTemplateOutlet",t)}}function wj(s,n){if(1&s&&(e.j41(0,"div"),e.DNE(1,xj,4,3,"ng-container",13)(2,vj,1,1,"ng-container",15)(3,yj,1,1,"ng-container",15)(4,Sj,1,1,"ng-container",15),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",e.ziG(4,lj,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep)),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.WAIT_TO_TEST_TIME),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.CHOOSE_STUDENT),e.R7$(),e.Y8G("ngIf",e.l_i(9,ng,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5).includes(t.currentTakeTestStepData.currentStep))}}function Ij(s,n){1&s&&e.nrm(0,"azt-loading-ui",30)}function Cj(s,n){if(1&s){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.checkAnswerQuestionByApi())}),e.DNE(1,Ij,1,0,"azt-loading-ui",29),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&s){const t=e.XpG(4);e.Y8G("disabled",!t.sAztTestQuestionService.checkQuestionHasAnswer(t.currentTakeTestStepData,t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id)),e.R7$(),e.Y8G("ngIf",t.statusObj.loading),e.R7$(2),e.JRh(e.bMT(4,3,null==t.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer?"lang_testbank_check":"lang_testbank_try_again"))}}function kj(s,n){if(1&s&&(e.j41(0,"div",31)(1,"span",32),e.EFF(2),e.k0s()()),2&s){const t=e.XpG(4);e.R7$(2),e.JRh(t.currentTakeTestStepData.testingUserObj.fullName)}}function Ej(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-training-footer-box",33,9),e.bIt("resetTrainingTestEvent",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.reloadPage())}),e.k0s()}if(2&s){const t=e.XpG(4);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("requiredNextBackQuestionModel",t.currentTakeTestStepData.nextBackQuestionModel)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("sAztTestQuestionService",t.sAztTestQuestionService)("tenantId",t.tenantId)("curCateId",t.curCateId)}}function Aj(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-coazt-training-header-box",21),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openQuitDialogEvent.emit())}),e.k0s(),e.j41(1,"div",22),e.nrm(2,"div",23),e.j41(3,"div",24),e.DNE(4,Cj,5,5,"button",25),e.k0s(),e.DNE(5,kj,3,1,"div",26),e.eu8(6,16),e.k0s(),e.DNE(7,Ej,2,6,"app-coazt-training-footer-box",27)}if(2&s){e.XpG();const t=e.sdS(9),i=e.XpG(2);e.Y8G("currentTakeTestStepData",i.currentTakeTestStepData)("sAztTestResizeService",i.sAztTestResizeService)("isMobileScreenSize",i.isMobileScreenSize),e.R7$(),e.Y8G("ngClass",e.l_i(9,uj,!i.isMobileScreenSize,i.isMobileScreenSize)),e.R7$(),e.Y8G("ngClass",e.l_i(12,_j,!i.isMobileScreenSize,i.isMobileScreenSize)),e.R7$(2),e.Y8G("ngIf",null==i.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer||"wrong"===i.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.practiceCheckAnswer),e.R7$(),e.Y8G("ngIf",i.isMobileScreenSize),e.R7$(),e.Y8G("ngTemplateOutlet",t),e.R7$(),e.Y8G("ngIf",i.currentTakeTestStepData.nextBackQuestionModel)}}function Oj(s,n){if(1&s&&(e.j41(0,"div",36),e.nrm(1,"div",37),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&s){let t;const i=e.XpG(4);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,null!==(t=null==i.currentTakeTestStepData.examConfigObj?null:i.currentTakeTestStepData.examConfigObj.header)&&void 0!==t?t:""),e.npT)}}function Rj(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",39)(1,"div",40)(2,"azt-question-standalone-for-step-test",41),e.bIt("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setOneChoiceAnswerEmitter.emit(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setTrueFalseAnswerEmitter.emit(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setFillAnswerEmitter.emit(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setEssayAnswerEmitter.emit(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.setResultTracking.emit(o))})("sendAudioEmit",function(o){e.eBV(t);const a=e.XpG(5);return e.Njj(a.sendAudioForQuestion.emit(o))})("showHintAnswer",function(){e.eBV(t);const o=e.XpG(5);return e.Njj(null==o.trainingFooterBox?null:o.trainingFooterBox.showHintAnswer())}),e.k0s()()()}if(2&s){let t;const i=n.$implicit,o=e.XpG(5);e.R7$(),e.FS9("id","question_"+i.id),e.Y8G("hidden",i.id!=o.currentTakeTestStepData.nextBackQuestionModel.curQuestionObj.id),e.R7$(),e.Y8G("examObj",o.currentTakeTestStepData.examObj)("questionObj",i)("follower",o.followerRenderQuest)("curQuestionIndex",o.currentTakeTestStepData.nextBackQuestionModel.curQuestionIndex)("fontSize",o.sAztTestResizeService.fontSize)("isShowExplain",null!==(t=i.isShowHint)&&void 0!==t&&t)("currentAnswerIsCorrect","correct"===i.practiceCheckAnswer)("currentAnswerStatus",i.practiceCheckAnswer)}}function Fj(s,n){if(1&s&&(e.qex(0),e.DNE(1,Rj,3,10,"div",38),e.bVm()),2&s){const t=e.XpG(4);e.R7$(),e.Y8G("ngForOf",t.currentTakeTestStepData.viewQuestionObjs)}}function jj(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-sort-essay-files-box",34),e.bIt("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s(),e.DNE(1,Oj,3,3,"div",35)(2,Fj,2,1,"ng-container",13)}if(2&s){const t=e.XpG(3);e.Y8G("answerFiles",t.currentTakeTestStepData.files),e.R7$(),e.Y8G("ngIf",null==t.currentTakeTestStepData.examConfigObj?null:t.currentTakeTestStepData.examConfigObj.allowHeader),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.nextBackQuestionModel)}}function zj(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-join-classroom-box",42),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.selectStudentEvent.emit(o))}),e.k0s()}if(2&s){const t=e.XpG(3);e.Y8G("joinClassroomByType",e.eq3(1,dj,t.currentTakeTestStepData.examObj.hashId))}}function Dj(s,n){if(1&s){const t=e.RV6();e.j41(0,"app-test-bank-frontend-over-time-of-exam",43),e.bIt("submitTestEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.submitTestToApi.emit(o))}),e.j41(1,"app-coazt-upload-essay-file-at-over-time-box",44),e.bIt("showUploadEssayFilesDialogEvent",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.showUploadEssayFilesDialog.emit())})("changeAnswerFilesEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.changeAnswerFiles.emit(o))}),e.k0s()()}if(2&s){const t=e.XpG(3);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)("isMobile",t.isMobileScreenSize)("files",t.currentTakeTestStepData.files)("followerRenderQuest",t.followerRenderQuest)("sAztTestResizeService",t.sAztTestResizeService)("userObj",t.currentTakeTestStepData.testingUserObj),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)}}function Mj(s,n){if(1&s&&(e.j41(0,"div",45)(1,"div",46)(2,"div",47),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",48)(6,"a",49),e.nI1(7,"navigationLocalize"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()()()),2&s){const t=e.XpG(3);e.R7$(3),e.JRh(e.bMT(4,3,t.currentTakeTestStepData.errorMessage)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,mj,e.bMT(7,5,t.homeLink))),e.R7$(2),e.JRh(e.bMT(9,7,"lang_auto_quay_lai_trang_chu"))}}function Gj(s,n){if(1&s&&e.nrm(0,"app-coazt-wait-to-test-time-box",50),2&s){const t=e.XpG(3);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("homeLink",t.homeLink)}}function Pj(s,n){if(1&s&&e.nrm(0,"app-test-bank-frontend-load-question-error-box",51),2&s){const t=e.XpG(3);e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData)("questsLoadState",t.questsLoadState)("backToLink",t.backToLink)}}function Nj(s,n){if(1&s&&(e.qex(0),e.nrm(1,"app-coazt-tracking-full-screen-event",14)(2,"app-coazt-tracking-visible-event",14),e.DNE(3,hj,2,0,"app-coazt-leave-window-event",13)(4,fj,1,1,"ng-container",15)(5,wj,5,12,"div",13)(6,Aj,8,15,"ng-template",null,1,e.C5r)(8,jj,3,3,"ng-template",null,2,e.C5r)(10,zj,1,3,"ng-template",null,3,e.C5r)(12,Dj,2,9,"ng-template",null,4,e.C5r)(14,Mj,10,11,"ng-template",null,5,e.C5r)(16,Gj,1,2,"ng-template",null,6,e.C5r)(18,Pj,1,3,"ng-template",null,7,e.C5r),e.bVm()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData),e.R7$(),e.Y8G("currentTakeTestStepData",t.currentTakeTestStepData),e.R7$(),e.Y8G("ngIf",e.l_i(5,ng,t.allTakeTestSteps.START_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST).includes(t.currentTakeTestStepData.currentStep)&&!t.questsLoadState.startLoad&&!t.questsLoadState.hasErrs),e.R7$(),e.Y8G("ngIf",t.currentTakeTestStepData.currentStep==t.allTakeTestSteps.SHOW_ERROR_MESSAGE),e.R7$(),e.Y8G("ngIf",e.lV(8,rj,t.allTakeTestSteps.WAIT_TO_TEST_TIME,t.allTakeTestSteps.CHOOSE_STUDENT,t.allTakeTestSteps.RUN_OUT_OF_TIME_AFTER_TEST,t.allTakeTestSteps.RUN_OUT_OF_TIME_WHEN_F5,t.allTakeTestSteps.SHOW_ESSAY_WARNING_DIALOG,t.allTakeTestSteps.SHOW_FULL_SCREEN,t.allTakeTestSteps.SHOW_VIDEO_REQUIRED,t.allTakeTestSteps.START_TEST).includes(t.currentTakeTestStepData.currentStep))}}function Vj(s,n){if(1&s&&e.DNE(0,Nj,20,17,"ng-container",13),2&s){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData)}}let Lj=(()=>{var s;class n extends PF{constructor(){super(...arguments),this.openQuitDialogEvent=new e.bkB,this.testCheckQuestionService=(0,e.WQX)(Jf)}checkAnswerQuestionByApi(){this.testCheckQuestionService.sendCheckQuestionEvent(!0)}reloadPage(){this.leaveWindowBox?.stopConfirm(),setTimeout(()=>{window.location.reload()},0)}}return(s=n).\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(s)))(o||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-training-in-step-layout"]],viewQuery:function(i,o){if(1&i&&(e.GBs(oj,5),e.GBs(aj,5)),2&i){let a;e.mGM(a=e.lsd())&&(o.trainingFooterBox=a.first),e.mGM(a=e.lsd())&&(o.leaveWindowBox=a.first)}},outputs:{openQuitDialogEvent:"openQuitDialogEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["mainTakeTestContentTpl",""],["showStepQuestionTpl",""],["chooseStudentTpl",""],["overTimeTpl",""],["commonErrorTpl",""],["waitToTestTimeTpl",""],["lstQuestHasErrTpl",""],["leaveWindowBox",""],["trainingFooterBox",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"currentTakeTestStepData"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"currentStatusObj","customText",4,"ngIf"],[1,"p-0",3,"contextmenu"],[1,"content","relative",2,"padding","0 10px",3,"ngClass"],[3,"currentStatusObj","customText"],[3,"openQuitDialogEvent","currentTakeTestStepData","sAztTestResizeService","isMobileScreenSize"],[1,"pb-4",3,"ngClass"],["id","monitorScreenTakeTest",1,"self-center","text-center",3,"ngClass"],[1,"text-right"],["azt-track-service","take-training-Vy9M0G9VK1u","class","btn btn-primary w-32","style","position: absolute; right: 10px",3,"disabled","click",4,"ngIf"],["class","p-1 text-center mt-1",4,"ngIf"],[3,"currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","sAztTestQuestionService","tenantId","curCateId","resetTrainingTestEvent",4,"ngIf"],["azt-track-service","take-training-Vy9M0G9VK1u",1,"btn","btn-primary","w-32",2,"position","absolute","right","10px",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"p-1","text-center","mt-1"],[2,"vertical-align","middle","font-weight","420"],[3,"resetTrainingTestEvent","currentTakeTestStepData","requiredNextBackQuestionModel","sAztTestNextBackQuestionService","sAztTestQuestionService","tenantId","curCateId"],[3,"changeAnswerFiles","answerFiles"],["class","box p-3 mb-3",4,"ngIf"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHTML"],["class","mt-4","style","animation-delay: 0.05s",4,"ngFor","ngForOf"],[1,"mt-4",2,"animation-delay","0.05s"],[1,"azt-question","box","mt-1","pl-0","pr-0","relative",3,"id","hidden"],[3,"setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioEmit","showHintAnswer","examObj","questionObj","follower","curQuestionIndex","fontSize","isShowExplain","currentAnswerIsCorrect","currentAnswerStatus"],[3,"selectStudentEvent","joinClassroomByType"],[3,"submitTestEvent","currentTakeTestStepData","questsLoadState","backToLink","isMobile","files","followerRenderQuest","sAztTestResizeService","userObj"],[3,"showUploadEssayFilesDialogEvent","changeAnswerFilesEvent","currentTakeTestStepData"],[1,"box","pt-6"],[1,"text-center","pb-4"],[1,"block","text-danger","text-center"],[1,"text-center","clickable","mt-2"],["azt-track-service","main-component-_qI7rWD5S",1,"link__color","link__hover",3,"routerLink"],[3,"currentTakeTestStepData","homeLink"],[3,"currentTakeTestStepData","questsLoadState","backToLink"]],template:function(i,o){if(1&i&&e.DNE(0,pj,2,1,"div",10)(1,Vj,1,1,"ng-template",null,0,e.C5r),2&i){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,Er,Ar,Or,YF,Gt.R,GF,Lo.s,sj,jr.l,zr,Dr,Mr,Gr,z.F2,x.MD,x.YU,x.Sq,x.bT,x.T3,g.X1,L.iI,L.Wk,g.YN,z.wp,Y.s,F.flO,W.L,z._y,U.Id,q.k],styles:[".margin-question-bar-for-training-for-desktop[_ngcontent-%COMP%], .margin-question-bar-for-training-for-mobile[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.monitor-screen[_ngcontent-%COMP%]{position:fixed;z-index:999;transform-origin:100% 100%;bottom:10px;right:2vw}.monitor-screen-mobile[_ngcontent-%COMP%]{position:fixed;z-index:999;width:36px;height:48px;bottom:60px;right:5px}.lucide-icon[_ngcontent-%COMP%]{stroke-width:2!important}.container-content-mobile[_ngcontent-%COMP%]{padding-bottom:400px!important}.container-content-desktop[_ngcontent-%COMP%]{padding-bottom:20px!important}"]}),n})();const Bj=["trainingFooterBox"],$j=["leaveWindowBox"],Qj=()=>({"mr-2 azt-hidden md:block":!0});function qj(s,n){if(1&s&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-effect",3),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("currentStatusObj",t.statusObj)}}function Yj(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"app-coazt-take-training-in-step-layout",5),e.bIt("openQuitDialogEvent",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openQuitDialog())})("showUploadEssayFilesDialog",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showUploadEssayFilesDialog())})("openSubmitExam",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.openSubmitExam())})("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.selectStudentEvent(o))})("changeAnswerFiles",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.changeAnswerFiles(o))})("setOneChoiceAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionOneChoiceAnswer(o))})("setTrueFalseAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionTrueFalseAnswer(o))})("setFillAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionFillAnswer(o))})("setEssayAnswerEmitter",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setQuestionEssayAnswer(o))})("setResultTracking",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setResultTracking(o))})("sendAudioForQuestion",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.sendAudioForQuestion(o))})("submitTestToApi",function(o){e.eBV(t);const a=e.XpG(2);return e.Njj(a.submitTestToApi(o))}),e.k0s(),e.bVm()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("sAztTestResizeService",t.sAztTestResizeService)("sAztTestNextBackQuestionService",t.sAztTestNextBackQuestionService)("sAztTestQuestionService",t.sAztTestQuestionService)("currentTakeTestStepData",t.currentTakeTestStepData)("followerRenderQuest",t.followerRenderQuest)("questsLoadState",t.questsLoadState)("isMobileScreenSize",t.isMobileScreenSize)("homeLink",t.homeLink)("backToLink",t.backToLink)("tenantId",t.tenantId)("curCateId",t.curCateId)}}function Uj(s,n){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"div",7)(3,"div",8),e.nrm(4,"div",9),e.nI1(5,"mytranslate"),e.j41(6,"div",10)(7,"a",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.redirectToVipUpgrade())}),e.nrm(8,"lucide-icon",12),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",13),e.EFF(12),e.k0s()()(),e.bVm()}if(2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,4,"lang_take_test_attemps_exam_warning"),e.npT),e.R7$(4),e.Y8G("ngClass",e.lJ4(8,Qj)),e.R7$(),e.SpI(" ",e.bMT(10,6,"lang_azt_upgrade_vip")," "),e.R7$(3),e.JRh(t.commonService.getFullCurrentUrl())}}function Xj(s,n){if(1&s&&e.DNE(0,Yj,2,11,"ng-container",4)(1,Uj,13,9,"ng-container",4),2&s){const t=e.XpG();e.Y8G("ngIf",t.currentTakeTestStepData&&t.allowAttemptExam),e.R7$(),e.Y8G("ngIf",!t.allowAttemptExam)}}let Wj=(()=>{var s;class n extends s_{reloadPage(){this.leaveWindowBox?.stopConfirm(),setTimeout(()=>{window.location.reload()},0)}startShowTestContent(i,o){return this.sAztTakeTestCallApiService.getHistoryAnswerOfTrainingFromApi(this.currentTakeTestStepData,(a,r)=>{if(a)return o(a);i=(new Kf).setQuestionAnswers(i,r),this.sAztTakeTestCallApiService.getSyncQuestionDataFromApi(this.questsLoadState,this.followerRenderQuest,this.questionRenderService,i,l=>{if(this.currentTakeTestStepData=l,this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown)return o(void 0);this.currentTakeTestStepData.hasAlreadyRunIntervalCountDown=!0,this.intervalExamTime(),this.intervalToGetServerTime(),this.sAztTestResultTrackService.saveAnswerAndTrackInfoToLocalStorage(this.currentTakeTestStepData),this.sAztTakeTestCallApiService.getImagesThatUploadAtMobileQrCodeFromApi(this.currentTakeTestStepData.uploadHashCode,c=>{null!=c&&(this.currentTakeTestStepData.files=c)}),this.intervalToSendTestDataToApi(),o(void 0)})})}getInitDataFromApi(){this.initStatusObj(),this.checkVipOrBasicExam(this.hashId,i=>{if(!i)return this.allowAttemptExam=!1,this.stopStatusObj();let o=new Dt(this.hashId,this.browserStorageService).getPassword(),a=new Dt(this.hashId,this.browserStorageService).hasInfo();this.waitDestroy(et.c.production||et.c.isProdAzotaVn?this.frontExamService.apiFrontExamInitDataGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),1).subscribe(l=>{const c=this.encryptionHelper.result(l);this.processInitData(""!=o,c)}):this.frontExamService.apiFrontExamInitDataForDevServerGet(this.hashId,o,a?1:0,this.sAztTestDeviceIdService.getDeviceId(),1).subscribe(l=>{this.processInitData(""!=o,l)}))})}ngOnInit(){this.initParams(),super.ngOnInit()}constructor(){super(),this.allTakeTestSteps=Ie,this.allowContextMenu=!et.c.production,this.modeViewTest="training"}}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-coazt-take-training"]],viewQuery:function(i,o){if(1&i&&(e.GBs(Bj,5),e.GBs($j,5)),2&i){let a;e.mGM(a=e.lsd())&&(o.trainingFooterBox=a.first),e.mGM(a=e.lsd())&&(o.leaveWindowBox=a.first)}},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],["class","p-3",4,"ngIf","ngIfElse"],[1,"p-3"],[3,"currentStatusObj"],[4,"ngIf"],[3,"openQuitDialogEvent","showUploadEssayFilesDialog","openSubmitExam","selectStudentEvent","changeAnswerFiles","setOneChoiceAnswerEmitter","setTrueFalseAnswerEmitter","setFillAnswerEmitter","setEssayAnswerEmitter","setResultTracking","sendAudioForQuestion","submitTestToApi","sAztTestResizeService","sAztTestNextBackQuestionService","sAztTestQuestionService","currentTakeTestStepData","followerRenderQuest","questsLoadState","isMobileScreenSize","homeLink","backToLink","tenantId","curCateId"],[1,"flex","justify-center","ml-3","mr-3"],[2,"max-width","500px","line-height","35px"],[1,"box","p-3","mt-20"],[1,"text-danger",2,"font-size","18px",3,"innerHTML"],[1,"text-center"],[1,"btn","btn-sm","btn-gradient-primary","mt-3",2,"font-size","18px",3,"click"],["name","gem","size","24",3,"ngClass"],[1,"mt-3","text-center"]],template:function(i,o){if(1&i&&e.DNE(0,qj,2,1,"div",1)(1,Xj,2,2,"ng-template",null,0,e.C5r),2&i){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[se.K,Lj,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();var Hj=O(89242),ig=O(5393),Jj=O(96970);function Kj(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",2),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function Zj(s,n){if(1&s&&(e.nrm(0,"img",23),e.nI1(1,"mycdn")),2&s){const t=e.XpG().$implicit;e.FS9("src",e.bMT(1,1,t.avatar),e.B4B)}}function ez(s,n){if(1&s&&e.nrm(0,"azt-create-avatar",24),2&s){const t=e.XpG().$implicit;e.Y8G("nameCreateAvatar",t.fullName)("size",30)}}function tz(s,n){if(1&s&&e.nrm(0,"img",25),2&s){const t=e.XpG().$implicit;e.Y8G("nameImages",t.nameImages)}}function nz(s,n){if(1&s&&(e.j41(0,"p",20),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span"),e.EFF(4),e.nI1(5,"formatOnlyDateByUserUnitPipe"),e.k0s()()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ngay_sinh"),": "),e.R7$(3),e.JRh(e.bMT(5,4,t.birthday))}}function iz(s,n){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.Lme("",e.bMT(2,2,"lang_auto_Diem"),"\xa0",t.mark,"")}}function sz(s,n){1&s&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_test_result_not_marked_essay")," "))}function oz(s,n){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_diem")," "))}function az(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",7)(1,"button",8),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.selectStudentAction(o))}),e.j41(2,"div",9)(3,"div",10)(4,"div",11),e.DNE(5,Zj,2,3,"img",12)(6,ez,1,2,"azt-create-avatar",13),e.k0s()(),e.j41(7,"div",14)(8,"div",15)(9,"p",16),e.EFF(10),e.nI1(11,"slice"),e.k0s(),e.j41(12,"div",17),e.DNE(13,tz,1,1,"img",18),e.k0s(),e.DNE(14,nz,6,6,"p",19),e.j41(15,"p",20),e.DNE(16,iz,3,4,"span",21)(17,sz,3,3,"span",22)(18,oz,3,3,"span",21),e.k0s()()()()()()}if(2&s){let t;const i=n.$implicit;e.R7$(),e.Y8G("disabled",!i.examResultId),e.R7$(4),e.Y8G("ngIf",i.avatar),e.R7$(),e.Y8G("ngIf",!i.avatar),e.R7$(3),e.FS9("matTooltip",i.fullName&&i.fullName.length>25?i.fullName:""),e.R7$(),e.SpI(" ",i.fullName&&i.fullName.length>25?e.brH(11,10,i.fullName,0,25)+"..":i.fullName," "),e.R7$(3),e.Y8G("ngIf",i.nameImages&&(null!==(t=i.id)&&void 0!==t?t:0)<=0),e.R7$(),e.Y8G("ngIf",i.birthday),e.R7$(2),e.Y8G("ngIf",i.examResultId&&i.examResultConfirmedAt),e.R7$(),e.Y8G("ngIf",i.examResultId&&!i.examResultConfirmedAt),e.R7$(),e.Y8G("ngIf",!i.examResultId)}}function rz(s,n){if(1&s&&(e.j41(0,"div",3)(1,"h3",4),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",5),e.DNE(7,az,19,14,"div",6),e.k0s()()),2&s){const t=e.XpG();e.R7$(2),e.E5c("",e.bMT(3,4,t.classroomGroupObj.groupObj.name)," - ",e.bMT(4,6,t.classroomGroupObj.classroomObj.name),": ",e.bMT(5,8,"lang_auto_danh_sach_hoc_sinh"),""),e.R7$(5),e.Y8G("ngForOf",t.classroomGroupObj.classroomObj.studentObjs)}}let lz=(()=>{var s;class n extends Z.H{selectStudentAction(i){this.selectStudentEvent.emit(i)}onSearchBox(i){this.searchContentObj=i}sortStudents(){this.classroomGroupObj.classroomObj.studentObjs=0==this.classroomGroupObj.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(this.classroomGroupObj.classroomObj.studentObjs)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(this.classroomGroupObj.classroomObj.studentObjs)??[],"pos","id")}getData(){this.initStatusObj(),this.waitDestroy(this.frontOfflineShareService.apiFrontOfflineShareGetShareOfflineDataPost({examHashId:this.examHashId,shareHashId:this.shareOfflineCode,classroomId:this.classroomGroupObj.classroomObj.id}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);let a=this.commonService.concatMultipleArray(o.data?.classroomGroupObjs.map(r=>r.classroomObjs)??[]).find(r=>r.id==this.classroomGroupObj.classroomObj.id);a&&(this.classroomGroupObj.classroomObj=a),this.sortStudents(),this.stopStatusObj()}))}ngOnInit(){if(super.ngOnInit(),this.classroomGroupObj.classroomObj.dataInApi)return this.sortStudents();this.getData()}constructor(i,o){super(),this.frontOfflineShareService=i,this.sortService=o,this.selectStudentEvent=new e.bkB,this.searchContentObj=new Hj.Z}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ig.pC),e.rXU(Ju.g))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-choose-student-in-share-offline-result"]],inputs:{classroomGroupObj:"classroomGroupObj",examHashId:"examHashId",shareOfflineCode:"shareOfflineCode"},outputs:{selectStudentEvent:"selectStudentEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"block-main","mt-3"],[1,"font-medium","mb-3"],[1,"grid","grid-cols-12","p-2","pt-4","box",2,"background-color","#fff","min-height","100px"],["class","col-span-12 sm:col-span-12 md:col-span-4 lg:col-span-3 mb-3 px-2",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-12","md:col-span-4","lg:col-span-3","mb-3","px-2"],["azt-track-service","share-offline-result-cxL-TXi9YY",1,"flex","items-center","p-3","rounded-md","bg-slate-100","dark:bg-darkmode-300","w-full",2,"min-height","80px",3,"click","disabled"],[1,"grid","grid-cols-12","gap-2","ml-0","mr-0","justify-content-between",2,"width","100%"],[1,"col-span-3"],[1,"flex","items-center",2,"height","100%","justify-content","center"],["style","vertical-align: middle; margin-top: 2px; border-radius: 50%","width","30","height","30",3,"src",4,"ngIf"],[3,"nameCreateAvatar","size",4,"ngIf"],[1,"col-span-9","pl-0"],[1,"text-left"],[1,"h5","mb-1","card-custom-title","font-bold",3,"matTooltip"],[1,"block-img"],["class","stdinfo-fullname mb-1 img-name-fluid","style","height: auto","appDrawNameImage","","loading","lazy",3,"nameImages",4,"ngIf"],["class","text-xs mb-0",4,"ngIf"],[1,"text-xs","mb-0"],[4,"ngIf"],["class","text-pending",4,"ngIf"],["width","30","height","30",2,"vertical-align","middle","margin-top","2px","border-radius","50%",3,"src"],[3,"nameCreateAvatar","size"],["appDrawNameImage","","loading","lazy",1,"stdinfo-fullname","mb-1","img-name-fluid",2,"height","auto",3,"nameImages"],[1,"text-pending"]],template:function(i,o){if(1&i&&e.DNE(0,Kj,1,1,"azt-loading-effect",1)(1,rz,8,10,"ng-template",null,0,e.C5r),2&i){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[Nu.y,se.K,Dh.p,x.MD,x.Sq,x.bT,x.P9,g.X1,L.iI,g.YN,z.nf,z.wp,Y.s,vt.oV,F.flO,W.L,z.vv,U.Id,q.k,Jj.w],encapsulation:2}),n})();var cz=O(46079);const uz=()=>({"mr-2":!0});function _z(s,n){if(1&s&&e.nrm(0,"azt-loading-effect",5),2&s){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function dz(s,n){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"a",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.backToClassroomList())}),e.j41(2,"span",12),e.nrm(3,"lucide-icon",13),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()}2&s&&(e.R7$(3),e.Y8G("ngClass",e.lJ4(4,uz)),e.R7$(),e.SpI(" ",e.bMT(5,2,"lang_student_join_classroom_back_to_classrooms_list")," "))}function mz(s,n){if(1&s){const t=e.RV6();e.j41(0,"div"),e.DNE(1,dz,6,5,"div",9),e.j41(2,"app-choose-student-in-share-offline-result",10),e.bIt("selectStudentEvent",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.chooseStudentSuccess(o))}),e.k0s()()}if(2&s){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.allClassroomObjs.length>1),e.R7$(),e.Y8G("classroomGroupObj",t.currentClassroomGroupObj)("examHashId",t.examHashIdParam)("shareOfflineCode",t.shareOfflineCodeParam)}}function pz(s,n){if(1&s){const t=e.RV6();e.j41(0,"azt-list-classroom-view-for-join-classroom",15),e.bIt("clickToClassroomEmitter",function(o){e.eBV(t);const a=e.XpG(4);return e.Njj(a.clickToClassroomEvent(o))}),e.k0s()}if(2&s){const t=e.XpG(4);e.Y8G("isExpandAll",!0)("classroomGroupData",t.classroomWithGroup)}}function hz(s,n){if(1&s&&e.DNE(0,pz,1,2,"azt-list-classroom-view-for-join-classroom",14),2&s){const t=e.XpG(3);e.Y8G("ngIf",t.classroomWithGroup)}}function fz(s,n){if(1&s&&(e.j41(0,"div",7),e.DNE(1,mz,3,4,"div",8)(2,hz,1,1,"ng-template",null,2,e.C5r),e.k0s()),2&s){const t=e.sdS(3),i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.currentClassroomGroupObj)("ngIfElse",t)}}function gz(s,n){1&s&&(e.j41(0,"div",16)(1,"div",17),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_giao_vien_chua_cho_xem_ket_qua_thi")," "))}function Tz(s,n){if(1&s&&e.DNE(0,fz,4,2,"div",6)(1,gz,4,3,"ng-template",null,1,e.C5r),2&s){const t=e.sdS(2),i=e.XpG();e.Y8G("ngIf",i.allClassroomObjs.length)("ngIfElse",t)}}let sg=(()=>{var s;class n extends Z.H{chooseStudentSuccess(i){this.myNavigationWithQueryString(`/test/answer-test/${this.examObj?.tenantId??0}/${this.examObj?.categoryId??0}/${this.examObj?.hashId}/${i.examResultId}`,`?offline=${this.shareOfflineCodeParam}&backto=${this.returnLink}`)}backToClassroomList(){this.commonService.myNavigationWithoutHistory("/test/share-offline-result/"+this.examHashIdParam+"/"+this.shareOfflineCodeParam+"/-1"),this.getParamUrl(),this.currentClassroomGroupObj=void 0}clickToClassroomEvent(i){let o=this.allClassroomObjs.find(a=>a.id==i.classroomObj.id);o&&(this.commonService.myNavigationWithoutHistory("/test/share-offline-result/"+this.examHashIdParam+"/"+this.shareOfflineCodeParam+"/"+o.id),this.getParamUrl(),this.currentClassroomGroupObj={groupObj:i.classroomGroupObj,classroomObj:o})}getData(){if(!this.examHashIdParam||!this.shareOfflineCodeParam)return;let i={examHashId:this.examHashIdParam,shareHashId:this.shareOfflineCodeParam,classroomId:-1!=this.classroomIdParam?this.classroomIdParam:void 0};this.initStatusObj(),this.waitDestroy(this.frontOfflineShareService.apiFrontOfflineShareGetShareOfflineDataPost(i).subscribe(o=>{if(!o.success)return this.forceShowErrorBox(o.message);if(this.examObj=o.data?.examObj,this.classroomWithGroup=(o.data?.classroomGroupObjs??[]).map(l=>({groupObj:l.groupObj,isOwned:!0,classroomObjs:l.classroomObjs})),this.allClassroomObjs=this.commonService.concatMultipleArray(this.classroomWithGroup.map(l=>l.classroomObjs)),-1!=this.classroomIdParam){let l=this.allClassroomObjs.find(_=>_.id==this.classroomIdParam),c=this.classroomWithGroup.find(_=>_.classroomObjs.find(d=>d.id==this.classroomIdParam));if(l&&c)return this.currentClassroomGroupObj={groupObj:c.groupObj,classroomObj:l},void this.successStatusObj()}let a=1==this.allClassroomObjs.length?this.commonService.getFirstOfArray(this.allClassroomObjs):void 0,r=this.classroomWithGroup.find(l=>l.classroomObjs.find(c=>c.id==a?.id));a&&r&&(this.currentClassroomGroupObj={groupObj:r.groupObj,classroomObj:a}),this.successStatusObj()}))}getParamUrl(){this.examHashIdParam=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.shareOfflineCodeParam=this.commonService.getMyParam(this.activeRoute,"offline_code")??"",this.classroomIdParam=this.commonService.getMyParamToNumber(this.activeRoute,"classroom_id")??-1,this.returnLink="/test/share-offline-result/"+this.examHashIdParam+"/"+this.shareOfflineCodeParam+"/"+this.classroomIdParam,this.backToLink="/student/classroom/0"}ngOnInit(){super.ngOnInit(),this.getParamUrl(),this.getData()}constructor(i,o){super(),this.frontOfflineShareService=i,this.activeRoute=o,this.backToLink="",this.returnLink="",this.shareOfflineCodeParam="",this.classroomIdParam=-1,this.examHashIdParam="",this.allClassroomObjs=[],this.currentClassroomGroupObj=void 0,this.classroomWithGroup=[]}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(ig.pC),e.rXU(L.nX))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-share-offline-result"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],["noClassroom",""],["showChooseClassrooms",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","mt-5",4,"ngIf","ngIfElse"],[1,"mt-5"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"selectStudentEvent","classroomGroupObj","examHashId","shareOfflineCode"],["azt-track-service","share-offline-result-kZ8e0tmTZ",1,"display-inline-block",3,"click"],[1,"text-primary","flex","items-center"],["name","chevron-left","size","16",3,"ngClass"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter",4,"ngIf"],[3,"clickToClassroomEmitter","isExpandAll","classroomGroupData"],[1,"block-empty","mt-5"],["role","alert",1,"alert","alert-danger","text-center"]],template:function(i,o){if(1&i&&(e.j41(0,"student-layout",3),e.DNE(1,_z,1,1,"azt-loading-effect",4)(2,Tz,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backToLink),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[ae.j,se.K,lz,cz.B,x.MD,x.YU,x.bT,g.X1,L.iI,g.YN,z.wp,Y.s,F.flO,F.WGl,W.L,U.Id,q.k],encapsulation:2}),n})();const bz=[{path:"",component:fv,canActivate:[Oe.L],children:[{path:":hash_id",component:pv},{path:"leaderboard/:hash_id",component:hv},{path:"category/:tenant_id/:cate_id/:page",component:an},{path:"submit-test/:tenant_id/:cate_id/:hash_id/:result_id",component:w2},{path:"take-test/:tenant_id/:cate_id/:hash_id",component:U4},{path:"take-training/:tenant_id/:cate_id/:hash_id",component:Wj},{path:"answer-test/:tenant_id/:cate_id/:hash_id/:result_id",component:zk},{path:"share-offline-result/:hash_id/:offline_code",component:sg},{path:"share-offline-result/:hash_id/:offline_code/:classroom_id",component:sg},{path:"capacity-exam/:tenant_id/:cate_id/:hash_id",component:P4}]}];let xz=(()=>{var s;class n{}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[L.iI.forChild(bz),L.iI,ge.XE]}),n})()},62232:function(Ut,_e,O){"use strict";var L=this&&this.__awaiter||function(g,F,de,Y){return new(de||(de=Promise))(function(z,W){function Z(ee){try{J(Y.next(ee))}catch(se){W(se)}}function ae(ee){try{J(Y.throw(ee))}catch(se){W(se)}}function J(ee){ee.done?z(ee.value):function ye(z){return z instanceof de?z:new de(function(W){W(z)})}(ee.value).then(Z,ae)}J((Y=Y.apply(g,F||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.decodeScanOfflineFile=_e.decode=void 0;const ge=O(10809);_e.decode=function Oe(g){return L(this,void 0,void 0,function*(){return ge.AzotaFileDecode.decode(g)})},_e.decodeScanOfflineFile=function x(g){return L(this,void 0,void 0,function*(){return ge.AzotaFileDecode.decodeScanOfflineFile(g)})}},12419:(Ut,_e,O)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.AzotaFile=_e.FileType=void 0;const L=O(44135),ge=O(21790);class Oe{}_e.FileType=Oe,Oe.scanOffline="scanOffline";class x{constructor(){}static fromZipFolder(F){let de=new x;return de.folder=F,de.readAztMain(),de}readAztMain(){let F=this.folder.getUtf8Text("main.json");if(null==F)throw new L.InvalidAztFileException("Couldn't found main.json file");this.aztMain=ge.AztMain.fromJsonString(F)}}_e.AzotaFile=x},10809:function(Ut,_e,O){"use strict";var L=this&&this.__awaiter||function(F,de,Y,ye){return new(Y||(Y=Promise))(function(W,Z){function ae(se){try{ee(ye.next(se))}catch(Ee){Z(Ee)}}function J(se){try{ee(ye.throw(se))}catch(Ee){Z(Ee)}}function ee(se){se.done?W(se.value):function z(W){return W instanceof Y?W:new Y(function(Z){Z(W)})}(se.value).then(ae,J)}ee((ye=ye.apply(F,de||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.AzotaFileDecode=void 0;const ge=O(59566),Oe=O(18752),x=O(12419);class g{static decode(de){return L(this,void 0,void 0,function*(){return ge.ZipFolder.fromZip(de).then(Y=>{let ye=x.AzotaFile.fromZipFolder(Y);return ye.aztMain.fileType==x.FileType.scanOffline?Oe.ScanOfflineFile.fromZipFolder(ye.folder):ye})})}static decodeScanOfflineFile(de){return g.decode(de).then(Y=>Y)}}_e.AzotaFileDecode=g},21790:(Ut,_e,O)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.AztMain=void 0;const L=O(47750);class ge{static fromJsonString(x){return ge.fromJson(JSON.parse(x))}static fromJson(x){return(0,L.plainToInstance)(ge,x)}}_e.AztMain=ge},44135:(Ut,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.InvalidAztFileException=void 0;class O extends Error{constructor(ge){super(ge)}}_e.InvalidAztFileException=O},84292:(Ut,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DrawingCircle=void 0;class O{static findCircle(ge,Oe,x){if(ge)return ge.find(g=>Math.pow(g.center.x-Oe,2)+Math.pow(g.center.y-x,2)<=Math.pow(g.radius,2))}static processVertical(ge,Oe,x){const g=O.findCircle(ge,Oe,x);if(!g)return;if(g.filled)return void(g.filled=!1);const de=g.label[0];ge?.filter(Y=>Y.label[0]==de).forEach(Y=>Y.filled=!1),g.filled=!0}static getValue(ge,Oe=10){if(!ge)return"";const x=ge?.length/Oe,g=[];for(let F=0;F<x;F++)g.push("0");return ge.forEach(F=>{if(!F.filled)return;const de=F.label,Y=parseInt(de[0])-1;g[Y]=de[1]}),g.join("")}static setValue(ge,Oe,x=10){if(!ge)return;for(let de of ge)de.filled=!1;let g=ge.length/x,F=0;for(;F<g;){const de=Oe%10;Oe=(Oe-de)/10,ge[g*de+g-F-1].filled=!0,F++}}}_e.DrawingCircle=O},2630:function(Ut,_e,O){"use strict";var L=this&&this.__decorate||function(F,de,Y,ye){var Z,z=arguments.length,W=z<3?de:null===ye?ye=Object.getOwnPropertyDescriptor(de,Y):ye;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(F,de,Y,ye);else for(var ae=F.length-1;ae>=0;ae--)(Z=F[ae])&&(W=(z<3?Z(W):z>3?Z(de,Y,W):Z(de,Y))||W);return z>3&&W&&Object.defineProperty(de,Y,W),W};Object.defineProperty(_e,"__esModule",{value:!0}),_e.ScanOfflineData=void 0,O(98433);const ge=O(47750),Oe=O(28157),x=O(98395);class g{static fromJsonString(de){return g.fromJson(JSON.parse(de))}static fromJson(de){return(0,ge.plainToInstance)(g,de)}}L([(0,ge.Type)(()=>x.ScanOfflineResult)],g.prototype,"scanResult",void 0),L([(0,ge.Type)(()=>Oe.ScanOfflineRequest)],g.prototype,"scanRequest",void 0),_e.ScanOfflineData=g},18752:function(Ut,_e,O){"use strict";var L=this&&this.__decorate||function(W,Z,ae,J){var Ee,ee=arguments.length,se=ee<3?Z:null===J?J=Object.getOwnPropertyDescriptor(Z,ae):J;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)se=Reflect.decorate(W,Z,ae,J);else for(var U=W.length-1;U>=0;U--)(Ee=W[U])&&(se=(ee<3?Ee(se):ee>3?Ee(Z,ae,se):Ee(Z,ae))||se);return ee>3&&se&&Object.defineProperty(Z,ae,se),se},ge=this&&this.__awaiter||function(W,Z,ae,J){return new(ae||(ae=Promise))(function(se,Ee){function U(ke){try{e(J.next(ke))}catch($e){Ee($e)}}function q(ke){try{e(J.throw(ke))}catch($e){Ee($e)}}function e(ke){ke.done?se(ke.value):function ee(se){return se instanceof ae?se:new ae(function(Ee){Ee(se)})}(ke.value).then(U,q)}e((J=J.apply(W,Z||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.ScanOfflineFile=void 0;const Oe=O(12419),x=O(59566),g=O(44135),F=O(21790),de=O(47750),Y=O(2630),ye=O(98395);class z extends Oe.AzotaFile{constructor(){super()}static fromZipFolder(Z){let ae=new z;if(ae.folder=Z,ae.readAztMain(),ae.aztMain.fileType!=Oe.FileType.scanOffline)throw new g.InvalidAztFileException(`fileType must be ${Oe.FileType.scanOffline}`);let ee=Z.getUtf8Text(ae.aztMain.detailPath);if(null==ee)throw new g.InvalidAztFileException(`Couldn't found ${ee} file`);return ae.scanOfflineData=Y.ScanOfflineData.fromJsonString(ee),ae}getWrappedImage(){var Z,ae;return null==(null===(ae=null===(Z=this.scanOfflineData)||void 0===Z?void 0:Z.scanResult)||void 0===ae?void 0:ae.wrappedScanFilePath)?null:this.folder.getBinary(this.scanOfflineData.scanResult.wrappedScanFilePath)}getFilledCircles(){var Z,ae,J;return null!==(J=null===(ae=null===(Z=this.scanOfflineData)||void 0===Z?void 0:Z.scanResult)||void 0===ae?void 0:ae.getFilledCircles())&&void 0!==J?J:[]}getWrappedImageExtension(){var Z,ae;let J=null===(ae=null===(Z=this.scanOfflineData)||void 0===Z?void 0:Z.scanResult)||void 0===ae?void 0:ae.wrappedScanFilePath;return null==J?null:J.substring(J.lastIndexOf("."))}static init(Z,ae,J){const ee=new z;return ee.folder=new x.ZipFolder,ee.aztMain=new F.AztMain,ee.aztMain.fileType=Oe.FileType.scanOffline,ee.aztMain.detailPath="scan_offline.json",ee.aztMain.createdAt=(new Date).toString(),ee.aztMain.createdBy=ae,ee.scanOfflineData=new Y.ScanOfflineData,ee.scanOfflineData.examHashId=Z,ee.scanOfflineData.scanResult=new ye.ScanOfflineResult,ee.scanOfflineData.scanRequest=J,ee}setOriginalImage(Z,ae){const J=`media/original_scan_offline.${Z}`;this.folder.setBinary(J,ae),this.scanOfflineData.originalScanFilePath=J}setWrappedImage(Z,ae){const J=`media/wrapped_scan_offline.${Z}`;this.folder.setBinary(J,ae),this.scanOfflineData.scanResult.wrappedScanFilePath=J}setDebugImage(Z,ae){this.folder.setBinary(`debug_images/${Z}`,ae)}setScanResult(Z){Z.wrappedScanFilePath=this.scanOfflineData.scanResult.wrappedScanFilePath,this.scanOfflineData.scanResult=Z}clickToImage(Z,ae){var J,ee;null===(ee=null===(J=this.scanOfflineData)||void 0===J?void 0:J.scanResult)||void 0===ee||ee.clickToImage(Z,ae)}setExamCode(Z){var ae,J;null===(J=null===(ae=this.scanOfflineData)||void 0===ae?void 0:ae.scanResult)||void 0===J||J.setExamCode(Z)}setStudentCode(Z){var ae,J;null===(J=null===(ae=this.scanOfflineData)||void 0===ae?void 0:ae.scanResult)||void 0===J||J.setStudentCode(Z)}toAztFile(){return ge(this,void 0,void 0,function*(){return this.folder.setUtf8Text("main.json",JSON.stringify(this.aztMain)),this.folder.setUtf8Text("scan_offline.json",JSON.stringify(this.scanOfflineData)),this.folder.toZip()})}}L([(0,de.Type)(()=>Y.ScanOfflineData)],z.prototype,"scanOfflineData",void 0),_e.ScanOfflineFile=z},28157:(Ut,_e,O)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ScanOfflineRequest=void 0;const L=O(47750);class ge{constructor(){this.templateType=void 0,this.blackRate=void 0,this.corners=[],this.corner2s=[]}static fromJsonString(x){const g=JSON.parse(x);return ge.fromJson(g)}static fromJson(x){return(0,L.plainToInstance)(ge,x)}}_e.ScanOfflineRequest=ge},98395:function(Ut,_e,O){"use strict";var L=this&&this.__decorate||function(ae,J,ee,se){var q,Ee=arguments.length,U=Ee<3?J:null===se?se=Object.getOwnPropertyDescriptor(J,ee):se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)U=Reflect.decorate(ae,J,ee,se);else for(var e=ae.length-1;e>=0;e--)(q=ae[e])&&(U=(Ee<3?q(U):Ee>3?q(J,ee,U):q(J,ee))||U);return Ee>3&&U&&Object.defineProperty(J,ee,U),U};Object.defineProperty(_e,"__esModule",{value:!0}),_e.DrawingRectangle=_e.AnswerRegionResult=_e.QuizFillBlank=_e.Quiz4PartTrueFalse=_e.Quiz4Option=_e.StudentCodeRegionResult=_e.ExamCodeRegionResult=_e.ScanOfflineResult=void 0,O(98433);const ge=O(47750),Oe=O(84292),x=O(45078);class g{getSubExamCode(){var J,ee;return null!==(ee=null===(J=this.examCodeRegion)||void 0===J?void 0:J.getValue())&&void 0!==ee?ee:""}getStudentCode(){var J,ee;return null!==(ee=null===(J=this.studentCodeRegion)||void 0===J?void 0:J.getValue())&&void 0!==ee?ee:""}getEssayTotalPoint(){var J,ee,se;const Ee=null!==(se=null===(ee=Oe.DrawingCircle.getValue(null===(J=this.answerRegion)||void 0===J?void 0:J.essayCircles))||void 0===ee?void 0:ee.trim())&&void 0!==se?se:"";return""!=Ee?parseInt(Ee)/100:void 0}getFilledCircles(){var J,ee,se,Ee,U,q,e,ke,$e,mi,pi,vt;let dn=[];return dn.push(...null!==(ee=null===(J=this.studentCodeRegion)||void 0===J?void 0:J.circles)&&void 0!==ee?ee:[]),dn.push(...null!==(Ee=null===(se=this.examCodeRegion)||void 0===se?void 0:se.circles)&&void 0!==Ee?Ee:[]),dn.push(...null!==(q=null===(U=this.answerRegion)||void 0===U?void 0:U.circles)&&void 0!==q?q:[]),dn.push(...null!==(ke=null===(e=this.answerRegion)||void 0===e?void 0:e.essayCircles)&&void 0!==ke?ke:[]),dn.push(...null!==(mi=null===($e=this.answerRegion)||void 0===$e?void 0:$e.trueFalseCircles)&&void 0!==mi?mi:[]),dn.push(...null!==(vt=null===(pi=this.answerRegion)||void 0===pi?void 0:pi.fillBlankCircles)&&void 0!==vt?vt:[]),dn.filter(Ys=>Ys.filled)}getQuiz4OptionAnswers(){var J,ee;const se=null!==(ee=null===(J=this.answerRegion)||void 0===J?void 0:J.circles)&&void 0!==ee?ee:[],Ee=se.length/4;let U=[];for(let q=0;q<Ee;q++)U.push("");return se.forEach(q=>{if(!q.filled)return;const e=new Y(q.label);U[e.numbers-1]=e.letter}),U}getQuiz4PartTrueFalseAnswers(){var J,ee;const se=null!==(ee=null===(J=this.answerRegion)||void 0===J?void 0:J.trueFalseCircles)&&void 0!==ee?ee:[],Ee=se.length/2;let U=[];for(let q=0;q<Ee;q++)U.push(" ");return se.forEach(q=>{if(!q.filled)return;const e=new ye(q.label),ke=4*(e.numbers-1)+e.getPartIndex();U[ke]=e.letter}),U}getQuizFillBlankAnswers(){var J,ee;const se=null!==(ee=null===(J=this.answerRegion)||void 0===J?void 0:J.fillBlankCircles)&&void 0!==ee?ee:[],Ee=se.length/48;let U=[];for(let q=0;q<Ee;q++)U.push([" "," "," "," "]);return se.forEach(q=>{if(!q.filled)return;const e=new z(q.label);U[e.numbers-1][e.cols]=e.rowLabel}),U.map(q=>q.join(""))}clickToImage(J,ee){var se,Ee,U;null===(se=this.examCodeRegion)||void 0===se||se.clickToImage(J,ee),null===(Ee=this.studentCodeRegion)||void 0===Ee||Ee.clickToImage(J,ee),null===(U=this.answerRegion)||void 0===U||U.clickToImage(J,ee)}setExamCode(J){var ee;null===(ee=this.examCodeRegion)||void 0===ee||ee.setValue(J)}setStudentCode(J){var ee;null===(ee=this.studentCodeRegion)||void 0===ee||ee.setValue(J)}}L([(0,ge.Type)(()=>F)],g.prototype,"examCodeRegion",void 0),L([(0,ge.Type)(()=>de)],g.prototype,"studentCodeRegion",void 0),L([(0,ge.Type)(()=>W)],g.prototype,"answerRegion",void 0),_e.ScanOfflineResult=g;class F extends x.VerticalRegion{}_e.ExamCodeRegionResult=F;class de extends x.VerticalRegion{}_e.StudentCodeRegionResult=de;class Y{constructor(J){const se=J.match(/(\d+)([A-Z])/);if(!se)throw new Error(`Invalid label: ${J}`);this.numbers=parseInt(se[1]),this.letter=se[2]}}_e.Quiz4Option=Y;class ye{constructor(J){const se=J.match(/(\d+)([A-D])([TF])/);if(!se)throw new Error(`Invalid label: ${J}`);this.numbers=parseInt(se[1]),this.part=se[2],this.letter=se[3]}getPartIndex(){return"ABCD".indexOf(this.part)}}_e.Quiz4PartTrueFalse=ye;class z{constructor(J){const ee=J.split("_");if(3!=ee.length)throw new Error(`Invalid label: ${J}`);this.numbers=parseInt(ee[0]),this.cols=parseInt(ee[1]),this.rowLabel=ee[2]}}_e.QuizFillBlank=z;class W{clickToImage(J,ee){var se,Ee,U;Oe.DrawingCircle.processVertical(this.essayCircles,J,ee);{const q=Oe.DrawingCircle.findCircle(this.circles,J,ee);if(q){if(q.filled)return void(q.filled=!1);const e=new Y(q.label);null===(se=this.circles)||void 0===se||se.filter(ke=>new Y(ke.label).numbers==e.numbers).forEach(ke=>ke.filled=!1),q.filled=!0}}{const q=Oe.DrawingCircle.findCircle(this.trueFalseCircles,J,ee);if(q){if(q.filled)return void(q.filled=!1);const e=new ye(q.label);null===(Ee=this.trueFalseCircles)||void 0===Ee||Ee.filter(ke=>{const $e=new ye(ke.label);return $e.numbers==e.numbers&&$e.part==e.part}).forEach(ke=>ke.filled=!1),q.filled=!0}}{const q=Oe.DrawingCircle.findCircle(this.fillBlankCircles,J,ee);if(q){if(q.filled)return void(q.filled=!1);const e=new z(q.label);null===(U=this.fillBlankCircles)||void 0===U||U.filter(ke=>{const $e=new z(ke.label);return $e.numbers==e.numbers&&$e.cols==e.cols}).forEach(ke=>ke.filled=!1),q.filled=!0}}}}_e.AnswerRegionResult=W,_e.DrawingRectangle=class Z{}},45078:(Ut,_e,O)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.VerticalRegion=void 0;const L=O(84292);_e.VerticalRegion=class ge{clickToImage(x,g){L.DrawingCircle.processVertical(this.circles,x,g)}getValue(x=10){return L.DrawingCircle.getValue(this.circles,x)}setValue(x,g=10){L.DrawingCircle.setValue(this.circles,x,g)}}},59566:function(Ut,_e,O){"use strict";var L=this&&this.__awaiter||function(x,g,F,de){return new(F||(F=Promise))(function(ye,z){function W(J){try{ae(de.next(J))}catch(ee){z(ee)}}function Z(J){try{ae(de.throw(J))}catch(ee){z(ee)}}function ae(J){J.done?ye(J.value):function Y(ye){return ye instanceof F?ye:new F(function(z){z(ye)})}(J.value).then(W,Z)}ae((de=de.apply(x,g||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0}),_e.ZipFolder=void 0;const ge=O(77247);class Oe{constructor(g){this.files=new Map,g&&g.forEach((F,de)=>{this.files.set(de,F)})}static fromZip(g){return L(this,void 0,void 0,function*(){let de=yield(new ge).loadAsync(g).then(Y=>{const ye=[];return Y.forEach(function(z){let W=Y.file(z);W&&ye.push(W.async("uint8array").then(Z=>({path:z,data:Z})))}),ye});return Promise.all(de).then(Y=>{let ye=new Map;return Y.forEach(z=>{ye.set(z.path,z.data)}),new Oe(ye)})})}setBinary(g,F){const de=Uint8Array.from(F);this.files.set(g,de)}setUtf8Text(g,F){let de=(new TextEncoder).encode(F);this.files.set(g,de)}getBinary(g){var F;return null!==(F=this.files.get(g))&&void 0!==F?F:null}getUtf8Text(g){let F=this.files.get(g);return null===F?null:(new TextDecoder).decode(F)}toZip(){return L(this,void 0,void 0,function*(){const g=new ge;for(let[F,de]of Array.from(this.files))g.file(F,de,{binary:!0});return g.generateAsync({type:"uint8array",compression:"DEFLATE",compressionOptions:{level:9}})})}toBlob(){return L(this,void 0,void 0,function*(){const g=new ge;for(let[F,de]of Array.from(this.files))g.file(F,de,{binary:!0});return g.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}})})}}_e.ZipFolder=Oe},98433:()=>{var Ut,_e;_e=Ut||(Ut={}),function(){var L="object"==typeof globalThis?globalThis:"object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:function F(){return function x(){try{return Function("return this;")()}catch{}}()||function g(){try{return(0,eval)("(function() { return this; })()")}catch{}}()}(),ge=Oe(_e);function Oe(de,Y){return function(ye,z){Object.defineProperty(de,ye,{configurable:!0,writable:!0,value:z}),Y&&Y(ye,z)}}typeof L.Reflect<"u"&&(ge=Oe(L.Reflect,ge)),function(O,L){var ge=Object.prototype.hasOwnProperty,Oe="function"==typeof Symbol,x=Oe&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",g=Oe&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",F="function"==typeof Object.create,de={__proto__:[]}instanceof Array,Y=!F&&!de,ye={create:F?function(){return Ws(Object.create(null))}:de?function(){return Ws({__proto__:null})}:function(){return Ws({})},has:Y?function(D,B){return ge.call(D,B)}:function(D,B){return B in D},get:Y?function(D,B){return ge.call(D,B)?D[B]:void 0}:function(D,B){return D[B]}},z=Object.getPrototypeOf(Function),W="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function da(){var D={},B=[],K=function(){function ze(ue,pe,he){this._index=0,this._keys=ue,this._values=pe,this._selector=he}return ze.prototype["@@iterator"]=function(){return this},ze.prototype[g]=function(){return this},ze.prototype.next=function(){var ue=this._index;if(ue>=0&&ue<this._keys.length){var pe=this._selector(this._keys[ue],this._values[ue]);return ue+1>=this._keys.length?(this._index=-1,this._keys=B,this._values=B):this._index++,{value:pe,done:!1}}return{value:void 0,done:!0}},ze.prototype.throw=function(ue){throw this._index>=0&&(this._index=-1,this._keys=B,this._values=B),ue},ze.prototype.return=function(ue){return this._index>=0&&(this._index=-1,this._keys=B,this._values=B),{value:ue,done:!0}},ze}();return function(){function ze(){this._keys=[],this._values=[],this._cacheKey=D,this._cacheIndex=-2}return Object.defineProperty(ze.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ze.prototype.has=function(ue){return this._find(ue,!1)>=0},ze.prototype.get=function(ue){var pe=this._find(ue,!1);return pe>=0?this._values[pe]:void 0},ze.prototype.set=function(ue,pe){var he=this._find(ue,!0);return this._values[he]=pe,this},ze.prototype.delete=function(ue){var pe=this._find(ue,!1);if(pe>=0){for(var he=this._keys.length,Te=pe+1;Te<he;Te++)this._keys[Te-1]=this._keys[Te],this._values[Te-1]=this._values[Te];return this._keys.length--,this._values.length--,Xs(ue,this._cacheKey)&&(this._cacheKey=D,this._cacheIndex=-2),!0}return!1},ze.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=D,this._cacheIndex=-2},ze.prototype.keys=function(){return new K(this._keys,this._values,xe)},ze.prototype.values=function(){return new K(this._keys,this._values,ct)},ze.prototype.entries=function(){return new K(this._keys,this._values,ft)},ze.prototype["@@iterator"]=function(){return this.entries()},ze.prototype[g]=function(){return this.entries()},ze.prototype._find=function(ue,pe){if(!Xs(this._cacheKey,ue)){this._cacheIndex=-1;for(var he=0;he<this._keys.length;he++)if(Xs(this._keys[he],ue)){this._cacheIndex=he;break}}return this._cacheIndex<0&&pe&&(this._cacheIndex=this._keys.length,this._keys.push(ue),this._values.push(void 0)),this._cacheIndex},ze}();function xe(ze,ue){return ze}function ct(ze,ue){return ue}function ft(ze,ue){return[ze,ue]}}(),Z="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function al(){return function(){function B(){this._map=new W}return Object.defineProperty(B.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),B.prototype.has=function(K){return this._map.has(K)},B.prototype.add=function(K){return this._map.set(K,K),this},B.prototype.delete=function(K){return this._map.delete(K)},B.prototype.clear=function(){this._map.clear()},B.prototype.keys=function(){return this._map.keys()},B.prototype.values=function(){return this._map.keys()},B.prototype.entries=function(){return this._map.entries()},B.prototype["@@iterator"]=function(){return this.keys()},B.prototype[g]=function(){return this.keys()},B}()}(),ae="function"==typeof WeakMap?WeakMap:function rl(){var D=16,B=ye.create(),K=oe();return function(){function ue(){this._key=oe()}return ue.prototype.has=function(pe){var he=xe(pe,!1);return void 0!==he&&ye.has(he,this._key)},ue.prototype.get=function(pe){var he=xe(pe,!1);return void 0!==he?ye.get(he,this._key):void 0},ue.prototype.set=function(pe,he){return xe(pe,!0)[this._key]=he,this},ue.prototype.delete=function(pe){var he=xe(pe,!1);return void 0!==he&&delete he[this._key]},ue.prototype.clear=function(){this._key=oe()},ue}();function oe(){var ue;do{ue="@@WeakMap@@"+ze()}while(ye.has(B,ue));return B[ue]=!0,ue}function xe(ue,pe){if(!ge.call(ue,K)){if(!pe)return;Object.defineProperty(ue,K,{value:ye.create()})}return ue[K]}function ct(ue,pe){for(var he=0;he<pe;++he)ue[he]=255*Math.random()|0;return ue}function ze(){var ue=function ft(ue){if("function"==typeof Uint8Array){var pe=new Uint8Array(ue);return typeof crypto<"u"?crypto.getRandomValues(pe):typeof msCrypto<"u"?msCrypto.getRandomValues(pe):ct(pe,ue),pe}return ct(new Array(ue),ue)}(D);ue[6]=79&ue[6]|64,ue[8]=191&ue[8]|128;for(var pe="",he=0;he<D;++he){var Te=ue[he];(4===he||6===he||8===he)&&(pe+="-"),Te<16&&(pe+="0"),pe+=Te.toString(16).toLowerCase()}return pe}}(),J=Oe?Symbol.for("@reflect-metadata:registry"):void 0,ee=function sl(){var D;return!Se(J)&&lt(L.Reflect)&&Object.isExtensible(L.Reflect)&&(D=L.Reflect[J]),Se(D)&&(D=function Gt(){var D;!Se(J)&&typeof L.Reflect<"u"&&!(J in L.Reflect)&&"function"==typeof L.Reflect.defineMetadata&&(D=function ol(D){var B=D.defineMetadata,K=D.hasOwnMetadata,oe=D.getOwnMetadata,xe=D.getOwnMetadataKeys,ct=D.deleteMetadata,ft=new ae;return{isProviderFor:function(ue,pe){var he=ft.get(ue);return!(Se(he)||!he.has(pe))||!!xe(ue,pe).length&&(Se(he)&&(he=new Z,ft.set(ue,he)),he.add(pe),!0)},OrdinaryDefineOwnMetadata:B,OrdinaryHasOwnMetadata:K,OrdinaryGetOwnMetadata:oe,OrdinaryOwnMetadataKeys:xe,OrdinaryDeleteMetadata:ct}}(L.Reflect));var B,K,oe,xe=new ae,ct={registerProvider:ft,getProvider:ue,setProvider:he};return ct;function ft(Te){if(!Object.isExtensible(ct))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case D===Te:break;case Se(B):B=Te;break;case B===Te:break;case Se(K):K=Te;break;case K===Te:break;default:void 0===oe&&(oe=new Z),oe.add(Te)}}function ze(Te,De){if(!Se(B)){if(B.isProviderFor(Te,De))return B;if(!Se(K)){if(K.isProviderFor(Te,De))return B;if(!Se(oe))for(var We=Qn(oe);;){var ut=gi(We);if(!ut)return;var en=fi(ut);if(en.isProviderFor(Te,De))return _a(We),en}}}if(!Se(D)&&D.isProviderFor(Te,De))return D}function ue(Te,De){var ut,We=xe.get(Te);return Se(We)||(ut=We.get(De)),Se(ut)&&(Se(ut=ze(Te,De))||(Se(We)&&(We=new W,xe.set(Te,We)),We.set(De,ut))),ut}function pe(Te){if(Se(Te))throw new TypeError;return B===Te||K===Te||!Se(oe)&&oe.has(Te)}function he(Te,De,We){if(!pe(We))throw new Error("Metadata provider not registered.");var ut=ue(Te,De);if(ut!==We){if(!Se(ut))return!1;var en=xe.get(Te);Se(en)&&(en=new W,xe.set(Te,en)),en.set(De,We)}return!0}}()),!Se(J)&&lt(L.Reflect)&&Object.isExtensible(L.Reflect)&&Object.defineProperty(L.Reflect,J,{enumerable:!1,configurable:!1,writable:!1,value:D}),D}(),se=function Hi(D){var B=new ae,K={isProviderFor:function(pe,he){var Te=B.get(pe);return!Se(Te)&&Te.has(he)},OrdinaryDefineOwnMetadata:function ft(pe,he,Te,De){oe(Te,De,!0).set(pe,he)},OrdinaryHasOwnMetadata:function xe(pe,he,Te){var De=oe(he,Te,!1);return!Se(De)&&ca(De.has(pe))},OrdinaryGetOwnMetadata:function ct(pe,he,Te){var De=oe(he,Te,!1);if(!Se(De))return De.get(pe)},OrdinaryOwnMetadataKeys:function ze(pe,he){var Te=[],De=oe(pe,he,!1);if(Se(De))return Te;for(var ut=Qn(De.keys()),en=0;;){var ma=gi(ut);if(!ma)return Te.length=en,Te;var ll=fi(ma);try{Te[en]=ll}catch(cl){try{_a(ut)}finally{throw cl}}en++}},OrdinaryDeleteMetadata:function ue(pe,he,Te){var De=oe(he,Te,!1);if(Se(De)||!De.delete(pe))return!1;if(0===De.size){var We=B.get(he);Se(We)||(We.delete(Te),0===We.size&&B.delete(We))}return!0}};return ee.registerProvider(K),K;function oe(pe,he,Te){var De=B.get(pe),We=!1;if(Se(De)){if(!Te)return;De=new W,B.set(pe,De),We=!0}var ut=De.get(he);if(Se(ut)){if(!Te)return;if(ut=new W,De.set(he,ut),!D.setProvider(pe,he,K))throw De.delete(he),We&&B.delete(pe),new Error("Wrong provider for target.")}return ut}}(ee);function na(D,B,K){if(Us(D,B,K))return!0;var xe=Zt(B);return!$n(xe)&&na(D,xe,K)}function Us(D,B,K){var oe=Ti(B,K,!1);return!Se(oe)&&ca(oe.OrdinaryHasOwnMetadata(D,B,K))}function ia(D,B,K){if(Us(D,B,K))return sa(D,B,K);var xe=Zt(B);return $n(xe)?void 0:ia(D,xe,K)}function sa(D,B,K){var oe=Ti(B,K,!1);if(!Se(oe))return oe.OrdinaryGetOwnMetadata(D,B,K)}function oa(D,B,K,oe){Ti(K,oe,!0).OrdinaryDefineOwnMetadata(D,B,K,oe)}function aa(D,B){var K=ra(D,B),oe=Zt(D);if(null===oe)return K;var xe=aa(oe,B);if(xe.length<=0)return K;if(K.length<=0)return xe;for(var ct=new Z,ft=[],ze=0,ue=K;ze<ue.length;ze++)ct.has(pe=ue[ze])||(ct.add(pe),ft.push(pe));for(var Te=0,De=xe;Te<De.length;Te++){var pe;ct.has(pe=De[Te])||(ct.add(pe),ft.push(pe))}return ft}function ra(D,B){var K=Ti(D,B,!1);return K?K.OrdinaryOwnMetadataKeys(D,B):[]}function la(D){if(null===D)return 1;switch(typeof D){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===D?1:6;default:return 6}}function Se(D){return void 0===D}function $n(D){return null===D}function lt(D){return"object"==typeof D?null!==D:"function"==typeof D}function tl(D,B){switch(la(D)){case 0:case 1:case 2:case 3:case 4:case 5:return D}var K=3===B?"string":5===B?"number":"default",oe=An(D,x);if(void 0!==oe){var xe=oe.call(D,K);if(lt(xe))throw new TypeError;return xe}return function nl(D,B){if("string"===B){var K=D.toString;if(Xt(K)&&!lt(oe=K.call(D)))return oe;if(Xt(xe=D.valueOf)&&!lt(oe=xe.call(D)))return oe}else{var xe;if(Xt(xe=D.valueOf)&&!lt(oe=xe.call(D)))return oe;var oe,ct=D.toString;if(Xt(ct)&&!lt(oe=ct.call(D)))return oe}throw new TypeError}(D,"default"===K?"number":K)}function ca(D){return!!D}function an(D){var B=tl(D,3);return function el(D){return"symbol"==typeof D}(B)?B:function il(D){return""+D}(B)}function En(D){return Array.isArray?Array.isArray(D):D instanceof Object?D instanceof Array:"[object Array]"===Object.prototype.toString.call(D)}function Xt(D){return"function"==typeof D}function ua(D){return"function"==typeof D}function Xs(D,B){return D===B||D!=D&&B!=B}function An(D,B){var K=D[B];if(null!=K){if(!Xt(K))throw new TypeError;return K}}function Qn(D){var B=An(D,g);if(!Xt(B))throw new TypeError;var K=B.call(D);if(!lt(K))throw new TypeError;return K}function fi(D){return D.value}function gi(D){var B=D.next();return!B.done&&B}function _a(D){var B=D.return;B&&B.call(D)}function Zt(D){var B=Object.getPrototypeOf(D);if("function"!=typeof D||D===z||B!==z)return B;var K=D.prototype,oe=K&&Object.getPrototypeOf(K);if(null==oe||oe===Object.prototype)return B;var xe=oe.constructor;return"function"!=typeof xe||xe===D?B:xe}function Ti(D,B,K){var oe=ee.getProvider(D,B);if(!Se(oe))return oe;if(K){if(ee.setProvider(D,B,se))return se;throw new Error("Illegal state.")}}function Ws(D){return D.__=void 0,delete D.__,D}O("decorate",function Ee(D,B,K,oe){if(Se(K)){if(!En(D))throw new TypeError;if(!ua(B))throw new TypeError;return function Ys(D,B){for(var K=D.length-1;K>=0;--K){var xe=(0,D[K])(B);if(!Se(xe)&&!$n(xe)){if(!ua(xe))throw new TypeError;B=xe}}return B}(D,B)}if(!En(D))throw new TypeError;if(!lt(B))throw new TypeError;if(!lt(oe)&&!Se(oe)&&!$n(oe))throw new TypeError;return $n(oe)&&(oe=void 0),function Zr(D,B,K,oe){for(var xe=D.length-1;xe>=0;--xe){var ft=(0,D[xe])(B,K,oe);if(!Se(ft)&&!$n(ft)){if(!lt(ft))throw new TypeError;oe=ft}}return oe}(D,B,K=an(K),oe)}),O("metadata",function U(D,B){return function K(oe,xe){if(!lt(oe))throw new TypeError;if(!Se(xe)&&!function hi(D){switch(la(D)){case 3:case 4:return!0;default:return!1}}(xe))throw new TypeError;oa(D,B,oe,xe)}}),O("defineMetadata",function q(D,B,K,oe){if(!lt(K))throw new TypeError;return Se(oe)||(oe=an(oe)),oa(D,B,K,oe)}),O("hasMetadata",function e(D,B,K){if(!lt(B))throw new TypeError;return Se(K)||(K=an(K)),na(D,B,K)}),O("hasOwnMetadata",function ke(D,B,K){if(!lt(B))throw new TypeError;return Se(K)||(K=an(K)),Us(D,B,K)}),O("getMetadata",function $e(D,B,K){if(!lt(B))throw new TypeError;return Se(K)||(K=an(K)),ia(D,B,K)}),O("getOwnMetadata",function mi(D,B,K){if(!lt(B))throw new TypeError;return Se(K)||(K=an(K)),sa(D,B,K)}),O("getMetadataKeys",function pi(D,B){if(!lt(D))throw new TypeError;return Se(B)||(B=an(B)),aa(D,B)}),O("getOwnMetadataKeys",function vt(D,B){if(!lt(D))throw new TypeError;return Se(B)||(B=an(B)),ra(D,B)}),O("deleteMetadata",function dn(D,B,K){if(!lt(B))throw new TypeError;if(Se(K)||(K=an(K)),!lt(B))throw new TypeError;Se(K)||(K=an(K));var oe=Ti(B,K,!1);return!Se(oe)&&oe.OrdinaryDeleteMetadata(D,B,K)})}(ge,L),typeof L.Reflect>"u"&&(L.Reflect=_e)}()}}]);