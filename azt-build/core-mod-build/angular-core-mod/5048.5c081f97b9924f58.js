"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[5048],{35048:(X,r,_)=>{_.d(r,{w:()=>K});var c=_(54460),t=_(48891),s=_(10936),d=_(65162),m=_(15343),u=_(21656),p=_(69135),g=_(47348),h=_(70050),S=_(59640),f=_(2915),C=_(18718),O=_(32099),b=_(27208),E=_(5502),D=_(36894),v=_(68774),I=_(6440),T=_(47712);const z=(e,l)=>({"dark:bg-darkmode-400 bg-slate-100":e,"border-b border-slate-200/60 dark:border-darkmode-400":l});function x(e,l){if(1&e&&t.nrm(0,"azt-loading-effect",10),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function j(e,l){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.JRh(t.bMT(2,1,"lang_auto_da_chon")+": "+n.totalStudentsSelected)}}function A(e,l){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.JRh(n.data.classroomName+(n.totalStudentsSelected?" ("+t.bMT(2,1,"lang_auto_da_chon")+": "+n.totalStudentsSelected+")":""))}}function M(e,l){}function R(e,l){if(1&e&&(t.j41(0,"div")(1,"azt-mat-dialog-content",24),t.DNE(2,M,0,0,"ng-template",25),t.k0s()()),2&e){t.XpG(3);const n=t.sdS(8);t.R7$(),t.Y8G("defaultHeight",40),t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function k(e,l){}function y(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,k,0,0,"ng-template",25),t.k0s()),2&e){t.XpG(3);const n=t.sdS(8);t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function F(e,l){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"div",13),t.DNE(3,j,3,3,"span",14)(4,A,3,3,"span",14),t.j41(5,"div",15)(6,"azt-search-box",16),t.nI1(7,"mytranslate"),t.bIt("onSearch",function(o){t.eBV(n);const i=t.XpG(2);return t.Njj(i.onSearchBox(o.searchObj))}),t.k0s()()(),t.j41(8,"div",17)(9,"div",18)(10,"input",19),t.bIt("change",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.selectAllStudentOfClass())}),t.k0s(),t.j41(11,"label",20),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()(),t.j41(14,"div",21)(15,"input",22),t.bIt("change",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.calculateFormData())}),t.k0s(),t.j41(16,"label",23),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()(),t.DNE(19,R,3,2,"div",14)(20,y,2,1,"div",14),t.bVm()}if(2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.l_i(18,z,n.isDialog,!n.isDialog)),t.R7$(2),t.Y8G("ngIf",!n.isDialog),t.R7$(),t.Y8G("ngIf",n.isDialog),t.R7$(2),t.Y8G("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",t.bMT(7,12,"lang_student_classroom_list_detail_search_name_student")),t.R7$(4),t.Y8G("formControl",n.selectAllFormControl),t.R7$(2),t.SpI(" ",t.bMT(13,14,n.selectAllFormControl.value?"lang_remove_all":"lang_select_all")," "),t.R7$(3),t.Y8G("formControl",n.showCheckedFormControl),t.R7$(2),t.SpI(" ",t.bMT(18,16,"lang_testbank_selected_students")," "),t.R7$(2),t.Y8G("ngIf",n.isDialog),t.R7$(),t.Y8G("ngIf",!n.isDialog)}}function P(e,l){1&e&&(t.j41(0,"div",26)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_core_class_has_no_student")))}function B(e,l){if(1&e&&t.DNE(0,F,21,21,"ng-container",11)(1,P,4,3,"ng-template",null,2,t.C5r),2&e){const n=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.studentObjs.length>0)("ngIfElse",n)}}function G(e,l){if(1&e){const n=t.RV6();t.j41(0,"div",27)(1,"button",28),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.btnCloseDialog())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()}2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_cms_common_ok")," "))}function N(e,l){1&e&&(t.qex(0),t.j41(1,"div",26)(2,"span",29),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&e&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_testbank_no_students_selected")))}function $(e,l){if(1&e){const n=t.RV6();t.j41(0,"div",34)(1,"div",35)(2,"input",36),t.bIt("change",function(){t.eBV(n);const o=t.XpG(4);return t.Njj(o.calculateFormData())}),t.k0s(),t.j41(3,"label",37,4),t.nI1(5,"mytranslate"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()}if(2&e){const n=t.sdS(4),a=t.XpG().$implicit;t.R7$(2),t.FS9("id","azt-checkbox-student-"+a.id),t.Y8G("formControl",a.isChecked),t.R7$(),t.FS9("for","azt-checkbox-student-"+a.id),t.Y8G("matTooltip",t.bMT(5,8,a.fullName))("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled)("matTooltipShowDelay",500),t.R7$(3),t.SpI(" ",t.bMT(7,10,a.fullName)," ")}}function w(e,l){if(1&e&&(t.qex(0),t.DNE(1,$,8,12,"div",33),t.bVm()),2&e){const n=l.$implicit;t.R7$(),t.Y8G("ngIf",n.isShowStudent)}}function L(e,l){1&e&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function U(e,l){if(1&e&&(t.j41(0,"div",30),t.DNE(1,w,2,1,"ng-container",31),t.k0s(),t.DNE(2,L,3,3,"div",32)),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.studentObjs),t.R7$(),t.Y8G("ngIf",0==n.totalStudentsShow)}}function Y(e,l){if(1&e&&t.DNE(0,N,5,3,"ng-container",11)(1,U,3,2,"ng-template",null,3,t.C5r),2&e){const n=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.totalStudentsSelected<=0&&a.showCheckedFormControl.value)("ngIfElse",n)}}let K=(()=>{var e;class l extends S.H{resetAll(){this.selectAllFormControl.reset(),this.showCheckedFormControl.reset(),this.selectAllStudentOfClass()}btnCloseDialog(){if(this.studentObjs.length<=0)return this.closeBox.emit();let a={classroomId:this.data.classroomId,classroomName:this.data.classroomName,studentIdsSelected:this.studentObjs.filter(o=>o.isChecked.value).map(o=>o.id)};this.closeBox.emit(a)}onSearchBox(a){this.searchContentObj=a,this.calculateFormData()}selectAllStudentOfClass(){this.studentObjs.map(a=>a.isChecked.setValue(this.selectAllFormControl.value)),this.calculateFormData()}calculateFormData(){let a=this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase().trim();this.studentObjs.forEach(o=>{const i=this.commonService.convertVietnameseToEnglish(o.fullName??"").toLowerCase().trim();let V=""==a||i.includes(a);o.isShowStudent=(!this.showCheckedFormControl.value||o.isChecked.value)&&V}),this.totalStudentsSelected=this.studentObjs.filter(o=>o.isChecked.value).length,this.selectAllFormControl.setValue(this.totalStudentsSelected==this.studentObjs.length),this.totalStudentsShow=this.studentObjs.filter(o=>o.isShowStudent).length,this.isDialog||this.btnCloseDialog()}getData(){this.initStatusObj(),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(this.data.classroomId).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);let o=a.data?.studentObjs??[];o=0==a.data?.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(o)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(o)??[],"pos","id"),this.initFormData(o),this.stopStatusObj()}))}initFormData(a){this.studentObjs=a.map(o=>({...o,isShowStudent:!0,isChecked:new s.MJ(this.data.studentIdsSelected.includes(o.id),{nonNullable:!0})})),this.calculateFormData()}ngOnInit(){this.getData()}constructor(a,o){super(),this.sortService=a,this.studentProfileV2Service=o,this.selectAllFormControl=new s.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new s.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new b.Z,this.isDialog=!0,this.closeBox=new t.bkB}}return(e=l).\u0275fac=function(a){return new(a||e)(t.rXU(v.g),t.rXU(I.m_))},e.\u0275cmp=t.VBU({type:e,selectors:[["azt-select-student"]],inputs:{isDialog:"isDialog",data:"data"},outputs:{closeBox:"closeBox"},standalone:!0,features:[t.Vt3,t.aNF],decls:9,vars:3,consts:[["doneLoading",""],["templateSelectStudent",""],["emptyStudents",""],["checkedBox",""],["c","isDisabled"],["id","selectStudent",1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["class","p-3 text-right",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center",3,"ngClass"],[1,"font-medium","mr-auto"],[4,"ngIf"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"onSearch","isServerSearch","styleInput","placeholder"],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","selected-all",1,"form-check-label"],[1,"form-check"],["id","show-student-checked","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","show-student-checked",1,"form-check-label"],[3,"defaultHeight"],[3,"ngTemplateOutlet"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],[1,"mx-auto"],[1,"p-3","grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item"],["type","checkbox",1,"form-check-input",3,"change","id","formControl"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"]],template:function(a,o){if(1&a&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7),t.DNE(3,x,1,1,"azt-loading-effect",8)(4,B,3,2,"ng-template",null,0,t.C5r),t.k0s()(),t.DNE(6,G,4,3,"div",9),t.k0s(),t.DNE(7,Y,3,2,"ng-template",null,1,t.C5r)),2&a){const i=t.sdS(5);t.R7$(3),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",i),t.R7$(3),t.Y8G("ngIf",o.isDialog)}},dependencies:[p.f,C.K,O.W,f.U,c.MD,c.YU,c.Sq,c.bT,c.T3,s.X1,s.Zm,s.BC,s.l_,d.iI,s.YN,g.wp,u.s,T.oV,m.flO,h.L,E.Id,D.k],encapsulation:2}),l})()}}]);