"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[773],{9773:(en,oe,se)=>{se.r(oe),se.d(oe,{AIModule:()=>xx});var f=se(9842),z=se(177),N=se(9417),ft=se(2994),Nt=se(8516),Wt=se(4110),ot=se(7163),tt=se(7091),dn=se(3424),Oe=se(1064),Me=se(8567),Be=se(7005),e=se(3953),He=se(9822);let mt=(()=>{var t;class r{constructor(o){(0,f.A)(this,"redirectService",void 0),this.redirectService=o}canActivate(o,s){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/admin/ai/dashboard"),!1)}canActivateChild(o,s){return this.canActivate(o,s)}canLoad(o){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/admin/ai/dashboard"),!1)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(He.m))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var ge=se(467),Ae=se(3617),Zt=se(671),St=se(4025),Gt=se(5312),Pe=se(1626);const Dt=Gt.c.apiPlatformBaseUrl;let $e=(()=>{var t;class r{constructor(o){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",Dt+"/api/App/"),this.http=o}getList(){return this.http.get(`${this.apiUrl}list`)}listTemplate(){return this.http.get(`${this.apiUrl}listTemplate`)}getListShare(){return this.http.get(`${this.apiUrl}listShare`)}credit(){return this.http.get(`${this.apiUrl}credit`)}download(o){return this.http.post(`${this.apiUrl}download`,o)}load(o){return this.http.post(`${this.apiUrl}load`,o)}save(o){return this.http.post(`${this.apiUrl}save`,o)}delete(o){return this.http.post(`${this.apiUrl}delete`,o)}share(o){return this.http.post(`${this.apiUrl}share`,o)}addCollection(o){return this.http.post(`${this.apiUrl}addCollection`,o)}addVCollection(o){return this.http.post(`${this.apiUrl}addVCollection`,o)}getAppInfo(o){return this.http.get(`${this.apiUrl}getAppInfo/${o}`)}listAppRoute(){return this.http.get(`${this.apiUrl}listAppRoute`)}listApp(){return this.http.get(`${this.apiUrl}listApp`)}runAppAsync(o,s){return this.http.post(`${this.apiUrl}runAsync/`+o+"?stream=1",s)}runApp(o,s){return this.http.post(`${this.apiUrl}run/`+o+"?stream=1",s)}cancel(o){return this.http.post(`${this.apiUrl}cancel/${o}`,{})}logAppDone(o,s){return this.http.post(`${this.apiUrl}logAppDone/`+o,{data:s})}status(o){return this.http.get(`${this.apiUrl}status/`+o)}history(o){return this.http.get(`${this.apiUrl}history/`+o)}fetchUrl(o){return this.http.post(`${this.apiUrl}fetchUrl`,o)}delColection(o){return this.http.post(`${this.apiUrl}delColection`,o)}listCollection(){return this.http.get(`${this.apiUrl}listCollection`)}listVCollection(){return this.http.get(`${this.apiUrl}listVCollection`)}listData(o){return this.http.post(`${this.apiUrl}listData`,o)}delData(o){return this.http.post(`${this.apiUrl}delData`,o)}saveData(o){return this.http.post(`${this.apiUrl}saveData`,o)}searchVector(o){return this.http.post(`${this.apiUrl}searchVector`,o)}getConf(o){return this.http.post(`${this.apiUrl}getConf`,{data:o})}getKey(o){return this.http.post(`${this.apiUrl}getKey`,{data:o})}listKeys(){return this.http.get(`${this.apiUrl}listKeys`)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Pe.Qq))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),ct=(()=>{var t;class r{constructor(o){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",Dt+"/api/Admin/"),this.http=o}run(o){return this.http.post(`${this.apiUrl}run`,o)}live(o){return this.http.post(`${this.apiUrl}live`,o)}stream(o,s,l){const u=new EventSource(`${this.apiUrl}stream?t=${o}`);u.onmessage=function(p){p.data.trim().startsWith("[__FINISH__] => ")?l(p.data.substr(16)):s(JSON.parse(p.data))},u.onerror=function(p){u.close(),l("")}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Pe.Qq))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var _n=function(t){return t.Text="text",t.ImageUrl="image_url",t}(_n||{}),hn=se(661);let gn=(()=>{var t;class r{constructor(o){(0,f.A)(this,"commonService",void 0),this.commonService=o}getTypeObjNotice(o){return"NEW_SHARE_CLASS_PERMISSION"==o.type?"L\u1edbp: "+o.classroomName:"NEW_SHARE_HOMEWORK_PERMISSION"==o.type?"B\xe0i t\u1eadp: "+o.homeworkName:"NEW_SHARE_EXAM_PERMISSION"==o.type?"\u0110\u1ec1 thi: "+o.examName:"NEW_SHARE_CATEGORY_PERMISSION"==o.type?"Th\u01b0 m\u1ee5c: "+o.examName:""}getRouterLinkForNoticeObj(o,s){var l=this.redirectToPage(o,!0,s);return"string"==typeof l?l:""}getQueryParamForNoticeObj(o){var s=this.redirectToPage(o,!1);return"object"==typeof s?s:null}redirectToPage(o,s,l){switch(o.type){case"NEW_ANSWER":case"NEW_SHARE_HOMEWORK_PERMISSION":return s?`/admin/testbank/homework-results-list/${o.classroomId}/${o.homeworkId}/${o.homeworkHashId}`:null;case"HAS_MARK":case"NEW_HOMEWORK":case"RESEND_ANSWER":return s?`/bai-tap/${o.homeworkHashId}`:null;case"NEW_EXAM_SUBMIT":return s?`/admin/testbank/test-review/${o.examId}/${o.parentId}/${o.studentId}/${o.examResultId??0}`:null;case"NEW_EXAM":return s?`/de-thi/${o.examHashId}`:"";case"EXAM_HAS_MARK":return s?`/test/answer-test/${o.parentId}/0/${o.examHashId}/${o.examResultId}`:null;case"NEW_SHARE_CLASS_PERMISSION":return 1==o.isMultipleClassroom?s?"/admin/student/manage-classroom/0":"":s?"/admin/student/classroom-details/"+o.classroomId+"/0":"";case"NEW_SHARE_CATEGORY_PERMISSION":return s?`/admin/testbank/document-management/0/${o.examId}/1`:{data:this.commonService.serializeJson({shareType:`user_${o.senderId}`})};case"NEW_SHARE_EXAM_PERMISSION":return s?`/admin/testbank/exam-results-list/0/${o.examId}/0`:null;case"NEW_QA_EXAM_ASK":case"NEW_QA_HOMEWORK_ASK":return s?"/admin/teacher-qa/view-question/"+Number(o.extraDataObj?.qaQuestionId):null;case"NEW_QA_EXAM_ANSWER":case"NEW_QA_HOMEWORK_ANSWER":return s?"/student-qa/view-question/"+Number(o.extraDataObj?.qaQuestionId):null;case"NEW_ASSIGN":return s?"/admin/student/manage-classroom/0":null;case"SHARE_AZOTA_BANK_QUESTION":return s?"/auth/account-setting/0/3?tab=1":null;case"NEW_REQUEST_REAPPROVE":return s?`/admin/student/classroom-details/${o.classroomId}/0`:null;case"NEW_SHARE_PERMISSION":return null;case"NEW_CLASSROOM_NEWS":return s?l?`/student/classroom-details/${o.classroomId}/2`:`/admin/student/classroom-details/${o.classroomId}/2`:null;default:return s?"/student/classroom/0":null}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(hn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var vn=se(9311),tn=se(4823),nn=se(9489);let Jn=(()=>{var t;class r{redirectToNewLanguage(o){if(o&&o!=this.commonService.getCurrentLang()){let _=this.commonService.getCurrentDomain();var s=_+"/"+this.commonService.getCurrentLang()+"/",l=_+"/"+o+"/",u=this.commonService.getFullCurrentUrl(),p=u.replace(s,l);p!=u&&(this.browserStorageService.saveStorage(this.defaultLangueInLocalStorageKey,o),window.location.replace(p))}}redirectToUserLanguage(){if(this.userService.isLogin()){var o=this.userService.getUserObj();this.redirectToNewLanguage(o.language?o.language:this.commonService.getDefaultLang())}else{var s=this.browserStorageService.getStorage(this.defaultLangueInLocalStorageKey);this.redirectToNewLanguage(s||this.commonService.getDefaultLang())}}constructor(o,s,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"defaultLangueInLocalStorageKey","switch_language_code"),this.commonService=o,this.userService=s,this.browserStorageService=l}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(hn.R),e.KVO(St.R),e.KVO(vn.z))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var ee=se(1413);let Ve=(()=>{var t;class r{logInDev(o,s){if(!Gt.c.production){if(null!=s&&null!=o)return console.log(o,s);if(null!=s&&null==o)return console.log(s);null!=o&&console.log(o)}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),j=(()=>{var t;class r{getHeaderReloadNoticeSubscriber(){return this.headerReloadNoticeListener}sendChangeLanguage(o){this._sendMessage({type:"CHANGE_LANGUAGE",status:1,message:"send_from_angular",data:{language:o}})}sendSimpleMessage(o){this._sendMessage({type:o,status:1,message:"send_from_angular",data:{}})}_sendMessage(o){this.aztCustomConsoleLogService.logInDev("To fluter data: ",o),this._sendRawMessage(JSON.stringify(o))}_sendRawMessage(o){try{let s=function Ie(){return typeof MessageInvoker<"u"?MessageInvoker:void 0}();typeof s<"u"&&s&&(this.aztCustomConsoleLogService.logInDev("Have MessageInvoker"),s.postMessage(o));let l=function ke(){return typeof flutter_inappwebview<"u"?flutter_inappwebview:void 0}();typeof l<"u"&&l&&(this.aztCustomConsoleLogService.logInDev("Have flutter_inappwebview"),l.callHandler("toFlutter",o))}catch(s){this.aztCustomConsoleLogService.logInDev(void 0,s)}}constructor(o){(0,f.A)(this,"aztCustomConsoleLogService",void 0),(0,f.A)(this,"headerReloadNoticeListener",new ee.B),this.aztCustomConsoleLogService=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Ve))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Z=se(9115),we=se(665),Ee=se(7347);function Fe(t,r){1&t&&(e.j41(0,"span",9),e.nrm(1,"azt-loading-ui"),e.k0s())}function Xe(t,r){if(1&t&&(e.j41(0,"button",5),e.DNE(1,Fe,2,0,"span",6),e.j41(2,"span",7),e.EFF(3,"\xa0"),e.k0s(),e.nrm(4,"img",8),e.nI1(5,"coreModConvertCdnLinkOfGitHub"),e.k0s()),2&t){const n=e.XpG(),o=e.sdS(2);e.Y8G("matMenuTriggerFor",o),e.R7$(),e.Y8G("ngIf",n.statusObj.loading),e.R7$(),e.Y8G("hidden",!n.statusObj.loading),e.R7$(2),e.FS9("alt",n.imgLanguage),e.Y8G("src",e.bMT(5,5,n.imgLanguage),e.B4B)}}function it(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",10),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.switchLanguage(s.value))}),e.nrm(2,"img",11),e.nI1(3,"coreModConvertCdnLinkOfGitHub"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.FS9("alt",n),e.Y8G("src",e.bMT(3,3,n.img),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(5,5,n.label)," ")}}let ut=(()=>{var t;class r extends Ae.H{getImgLanguage(o){this.imgLanguage=this.listSupportedLanguages.find(s=>s.value==o)?.img??""}initLanguages(){this.listSupportedLanguages=this.supportedLanguagesArr.map(o=>({value:o,label:"lang_core_language_"+o,img:"flag/"+o+".svg"}))}switchLanguage(o){o&&o!=this.commonService.getCurrentLang()&&(this.userService.isLogin()?(this.initStatusObj(),this.waitDestroy(this.userLangService.apiUserLangSwitchLangGet(o).subscribe(s=>{1==s.success?(this.mobileWebviewService.sendChangeLanguage(o),setTimeout(()=>{this.stopStatusObj(),this.switchLanguageService.redirectToNewLanguage(o)},100)):this.errorStatusObj(s.message??"",!0)}))):(this.mobileWebviewService.sendChangeLanguage(o),setTimeout(()=>{this.switchLanguageService.redirectToNewLanguage(o)},100)))}ngOnInit(){this.initLanguages(),this.getImgLanguage(this.commonService.getCurrentLang()),this.imgLanguage||this.getImgLanguage(Gt.c.defaultLanguage)}constructor(o,s,l,u){super(),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"userLangService",void 0),(0,f.A)(this,"switchLanguageService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"imgLanguage",""),(0,f.A)(this,"listSupportedLanguages",[]),this.userService=o,this.userLangService=s,this.switchLanguageService=l,this.mobileWebviewService=u}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(St.R),e.rXU(nn.f$),e.rXU(Jn),e.rXU(j))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-switch-language"]],features:[e.Vt3],decls:6,vars:2,consts:[["switchlanguage","matMenu"],["class","btn btn-transparent p-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"dropdown-menu","show","w-32","relative"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"btn","btn-transparent","p-1",3,"matMenuTriggerFor"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[3,"hidden"],[3,"src","alt"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","azt-switch-language-2NtpICqDxdj",1,"dropdown-item",3,"click"],[1,"w-5","h-5","mr-2",3,"src","alt"]],template:function(o,s){1&o&&(e.DNE(0,Xe,6,7,"button",1),e.j41(1,"mat-menu",null,0)(3,"div",2)(4,"ul",3),e.DNE(5,it,6,7,"li",4),e.k0s()()()),2&o&&(e.Y8G("ngIf",s.listSupportedLanguages.length>1),e.R7$(5),e.Y8G("ngForOf",s.listSupportedLanguages))},dependencies:[z.Sq,z.bT,Z.kk,Z.Cp,we.R,Ee.wp,Ee.Vs],encapsulation:2})),r})(),ze=(()=>{var t;class r{mouseEnter(){this.isMousePosition="mouseEnter",window.setTimeout(()=>{"mouseEnter"==this.isMousePosition&&this.menuTrigger?.openMenu()},100)}mouseLeave(){this.isMousePosition="mouseLeave",window.setTimeout(()=>{"mouseLeave"==this.isMousePosition&&this.menuTrigger?.closeMenu()},300)}constructor(o){(0,f.A)(this,"menuTrigger",void 0),(0,f.A)(this,"isMousePosition","mouseLeave"),this.menuTrigger=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Z.Cp))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var on=se(3861),rp=se(2909),Wr=se(4006);let Ac=(()=>{var t;class r{constructor(o){(0,f.A)(this,"dialog",void 0),(0,f.A)(this,"open",(s,l)=>this.dialog.open(s,l)),(0,f.A)(this,"closeAll",()=>this.dialog.closeAll()),this.dialog=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Wr.bZ))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Zr=(()=>{var t;class r{removeInvalidChars(o){try{return o?.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")??""}catch{return o??""}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const ja=(t,r)=>({width:t,height:r}),Tc=(t,r,n)=>({width:t,height:r,borderColor:n}),Fc=(t,r,n,o)=>({width:t,height:r,"font-size":n,borderColor:o});function Ma(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function Rc(t,r){if(1&t&&(e.qex(0),e.j41(1,"div",2),e.nrm(2,"img",3),e.nI1(3,"mycdn"),e.DNE(4,Ma,1,0,"lucide-icon",4),e.k0s(),e.bVm()),2&t){let n;const o=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(8,ja,o.size+"px",o.size+"px")),e.R7$(),e.FS9("matTooltip",o.showTooltip?o.customTooltip?o.customTooltip:o.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!o.showTooltip||!o.customTooltip&&!o.nameCreateAvatar)("src",e.bMT(3,6,o.linkAvatar),e.B4B)("ngStyle",e.sMw(11,Tc,o.size+"px",o.size+"px",null!==(n=o.borderAvatar)&&void 0!==n?n:"")),e.R7$(2),e.Y8G("ngIf",o.showCheckUser)}}function $a(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function Yi(t,r){if(1&t&&(e.j41(0,"div",6),e.EFF(1),e.DNE(2,$a,1,0,"lucide-icon",4),e.k0s()),2&t){let n;const o=e.XpG();e.FS9("matTooltip",o.showTooltip?o.customTooltip?o.customTooltip:o.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!o.showTooltip||!o.customTooltip&&!o.nameCreateAvatar)("ngStyle",e.ziG(5,Fc,o.size+"px",o.size+"px",(o.size/2>48?48:o.size/2)+"px",null!==(n=o.borderAvatar)&&void 0!==n?n:"")),e.R7$(),e.SpI(" ",o.returnNameAvatar," "),e.R7$(),e.Y8G("ngIf",o.showCheckUser)}}let $o=(()=>{var t;class r extends Ae.H{createNewAvatar(){try{this.nameCreateAvatar=this.homeworkExamService.removeInvalidChars(this.nameCreateAvatar).trim()}catch{this.nameCreateAvatar=this.nameCreateAvatar}var s=this.commonService.convertVietnameseToEnglish(this.nameCreateAvatar??"").toUpperCase().split(" ");this.returnNameAvatar=1==s.length?s[0]?s[0].charAt(0):"A":s[0]?.charAt(0)+(s[s.length-1]?.charAt(0)??"")}ngOnInit(){this.createNewAvatar()}ngOnChanges(){this.createNewAvatar()}constructor(o){super(),(0,f.A)(this,"homeworkExamService",void 0),(0,f.A)(this,"nameCreateAvatar",void 0),(0,f.A)(this,"linkAvatar",void 0),(0,f.A)(this,"size",0),(0,f.A)(this,"customTooltip",void 0),(0,f.A)(this,"showTooltip",!0),(0,f.A)(this,"showCheckUser",!1),(0,f.A)(this,"borderAvatar",""),(0,f.A)(this,"returnNameAvatar",""),this.homeworkExamService=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Zr))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-create-avatar"]],inputs:{nameCreateAvatar:"nameCreateAvatar",linkAvatar:"linkAvatar",size:"size",customTooltip:"customTooltip",showTooltip:"showTooltip",showCheckUser:"showCheckUser",borderAvatar:"borderAvatar"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["elseTemplate",""],[4,"ngIf","ngIfElse"],[3,"ngStyle"],[1,"border","border-slate-200","dark:border-darkmode-400",2,"border-radius","50%",3,"matTooltip","matTooltipDisabled","src","ngStyle"],["name","check","size","11","class","check-user-icon stroke-width-2.5","strokeWidth","2",4,"ngIf"],["name","check","size","11","strokeWidth","2",1,"check-user-icon","stroke-width-2.5"],["id","create-avatar",1,"create-avatar-class","border","border-slate-200","dark:border-darkmode-400",2,"display","inline-flex","justify-content","center","align-items","center","background-color","#dddddd","border-radius","50%","color","#000","font-weight","500","margin","auto",3,"matTooltip","matTooltipDisabled","ngStyle"]],template:function(o,s){if(1&o&&e.DNE(0,Rc,5,15,"ng-container",1)(1,Yi,3,10,"ng-template",null,0,e.C5r),2&o){const l=e.sdS(2);e.Y8G("ngIf",s.linkAvatar)("ngIfElse",l)}},dependencies:[z.bT,z.B3,tn.oV,Nt.WGl,Ee.nf],styles:[".check-user-icon[_ngcontent-%COMP%]{align-items:center;height:13px;width:13px;position:absolute;justify-content:center;bottom:-4px;right:0;background:#65ce8c;border-radius:50%;color:#fff}.check-user-icon[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin-bottom:8px;stroke-width:4.5px!important}.w-content[_ngcontent-%COMP%]{margin-left:10px;width:calc(100% - 46px)}.mw-name[_ngcontent-%COMP%]{max-width:calc(100% - 12px - .25rem)}"]})),r})();const Tt=()=>({"mr-2":!0}),jc=(t,r)=>({"pl-2":t,"px-2":r}),Mc=t=>({"max-width":t}),On=t=>[t],$c=t=>({return_url:t,from:"register",user_click:"true"}),Ga=t=>({return_url:t,user_click:"true"});function qr(t,r){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"button",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.gotoLogin())}),e.nrm(2,"lucide-icon",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Tt)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dang_nhap")," "))}function Gc(t,r){if(1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"isParentViewOnly"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"")?e.bMT(3,3,"lang_auto_phu_huynh"):null!=n.userObj&&null!=n.userObj.roles&&n.userObj.roles.includes("TEACHER")?e.bMT(4,5,"lang_auto_giao_vien"):e.bMT(5,7,"lang_auto_hoc_sinh")," ")}}function Hi(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Gc,6,9,"div",16),e.k0s()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.l_i(6,jc,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(9,Mc,n.isTqbDomain&&n.isMobileWebView?"80px":"auto")),e.R7$(),e.SpI(" ",n.isAnonymous?e.bMT(3,4,"lang_auto_tai_khoan_an_danh"):null==n.userObj?null:n.userObj.fullName," "),e.R7$(2),e.Y8G("ngIf",!n.isTqbDomain)}}function Wi(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9),e.bIt("mouseenter",function(){e.eBV(n);const s=e.XpG();return e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseEnter())})("mouseleave",function(){e.eBV(n);const s=e.XpG();return e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseLeave())}),e.j41(1,"div",10),e.bIt("click",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.isMobileWebView?l.avtClick():!l.isMobileDevice&&s.stopPropagation())}),e.j41(2,"div",11),e.nrm(3,"azt-create-avatar",12),e.k0s(),e.DNE(4,Hi,5,11,"div",13),e.k0s()()}if(2&t){const n=e.XpG(),o=e.sdS(4);e.Y8G("matMenuTriggerFor",n.isMobileWebView?null:o),e.R7$(3),e.Y8G("nameCreateAvatar",null==n.userObj?null:n.userObj.fullName)("size",32)("showTooltip",n.isMobileDevice)("linkAvatar",null==n.userObj?null:n.userObj.avatar),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice||n.isTqbDomain)}}function sp(t,r){if(1&t&&(e.j41(0,"li")(1,"a",24),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",25),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(8,On,e.bMT(2,4,"/auth/register")))("queryParams",e.eq3(10,Ga,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,Tt)),e.R7$(),e.SpI(" \xa0",e.bMT(5,6,"lang_auto_dang_ky")," ")}}function Dc(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Tt)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Oc(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Tt)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function ap(t,r){if(1&t){const n=e.RV6();e.qex(0),e.DNE(1,sp,6,13,"li",18),e.j41(2,"li")(3,"a",19),e.nI1(4,"navigationLocalize"),e.nrm(5,"lucide-icon",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,Dc,5,5,"li",18)(9,Oc,5,5,"li",18),e.j41(10,"li")(11,"a",20),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.reloadBrowser())}),e.nrm(12,"lucide-icon",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"li"),e.nrm(16,"hr",22),e.k0s(),e.j41(17,"li")(18,"a",23),e.nI1(19,"navigationLocalize"),e.nrm(20,"lucide-icon",8),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.bVm()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(22,On,e.bMT(4,12,"/auth/login")))("queryParams",e.eq3(24,$c,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,Tt)),e.R7$(),e.SpI(" ",e.bMT(7,14,"lang_auto_dang_nhap")," "),e.R7$(2),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(3),e.Y8G("ngClass",e.lJ4(27,Tt)),e.R7$(),e.SpI(" ",e.bMT(14,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(28,On,e.bMT(19,18,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(30,Tt)),e.R7$(),e.SpI(" ",e.bMT(22,20,"lang_auto_dang_xuat")," ")}}function Da(t,r){if(1&t&&(e.j41(0,"li")(1,"a",34),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",35),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(7,On,e.bMT(2,3,n.isTeacherDashboard?"/student/classroom/0":"/admin/dashboard"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,Tt)),e.R7$(),e.SpI(" ",e.bMT(5,5,n.isTeacherDashboard?"lang_auto_vao_man_hoc_sinh":"lang_auto_vao_man_giao_vien")," ")}}function Oa(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Tt)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Va(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Tt)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function za(t,r){1&t&&(e.j41(0,"li")(1,"a",36),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,On,e.bMT(2,3,"/auth/account-setting/0/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,Tt)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_remove_teacher_role")," "))}function Ba(t,r){1&t&&(e.j41(0,"li")(1,"a",38),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,On,e.bMT(2,3,"/auth/account-setting/1/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,Tt)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_become_teacher_role")," "))}function fi(t,r){if(1&t){const n=e.RV6();e.DNE(0,Da,6,10,"li",18)(1,Oa,5,5,"li",18)(2,Va,5,5,"li",18)(3,za,6,10,"li",18)(4,Ba,6,10,"li",18),e.j41(5,"li")(6,"a",20),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.reloadBrowser())}),e.nrm(7,"lucide-icon",21),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"li"),e.nrm(11,"hr",22),e.k0s(),e.j41(12,"li")(13,"a",30),e.nI1(14,"navigationLocalize"),e.nrm(15,"lucide-icon",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"li")(19,"a",32),e.nI1(20,"navigationLocalize"),e.nrm(21,"lucide-icon",33),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"li")(25,"a",23),e.nI1(26,"navigationLocalize"),e.nrm(27,"lucide-icon",8),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()}if(2&t){const n=e.XpG();e.Y8G("ngIf",n.isTeacherRole),e.R7$(),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(),e.Y8G("ngIf",n.isTeacherDashboard),e.R7$(),e.Y8G("ngIf",!(n.isTeacherRole||n.isTeacherDashboard||n.isBusinessDomain||n.beCreatedStudent)),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,Tt)),e.R7$(),e.SpI(" ",e.bMT(9,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(31,On,e.bMT(14,18,"/auth/login-scan/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(33,Tt)),e.R7$(),e.SpI(" ",e.bMT(17,20,"lang_auto_qr_dang_nhap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(34,On,e.bMT(20,22,"/auth/create-qr-forgot-pass/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(36,Tt)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_auto_tao_qr_quen_mat_khau")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(37,On,e.bMT(26,26,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(39,Tt)),e.R7$(),e.SpI(" ",e.bMT(29,28,"lang_auto_dang_xuat")," ")}}let mi=(()=>{var t;class r extends Ae.H{set menuTrigger(o){this.mouseEventObj=new ze(o)}avtClick(){this.isMobileWebView&&this.redirectService.redirectToPath(`/auth/account-setting/${this.isTeacherDashboard?0:1}/0`)}gotoLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}reloadBrowser(){var s=this.commonService.getCurrentUrl();if(s.match(/(\?|&)+t=(\d)+/)){var l=s.includes("&t=")?s.replace(/\&t=(\d)+/,"&t="+this.timeService.getCurrentSecond()):s.replace(/\?t=(\d)+/,"?t="+this.timeService.getCurrentSecond());location.replace(l)}else s=s.includes("?")?s+"&t="+this.timeService.getCurrentSecond():s+"?t="+this.timeService.getCurrentSecond(),location.replace(s)}switchModeUI(o){let s=document.getElementById("azota-app-html");this.modeUI=o,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?s&&(s.classList.remove("dark"),s.classList.add("light")):s&&(s.classList.remove("light"),s.classList.add("dark"))}changeAccountStudent(){}ngOnInit(){this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getCurrentUrl(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser(),this.isTeacherRole=this.userService.isTeacherRole(),this.userLoginStateService.loginMessage.subscribe(o=>{this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser()}),super.ngOnInit()}constructor(o,s,l,u,p,_,v){super(),(0,f.A)(this,"router",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"userLoginStateService",void 0),(0,f.A)(this,"timeService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"sAztDialogService",void 0),(0,f.A)(this,"isTeacherDashboard",!0),(0,f.A)(this,"beCreatedStudent",!1),(0,f.A)(this,"mouseEventObj",void 0),(0,f.A)(this,"returnUrl",""),(0,f.A)(this,"userObj",void 0),(0,f.A)(this,"modeUI",""),(0,f.A)(this,"isAnonymous",!1),(0,f.A)(this,"isTeacherRole",!1),this.router=o,this.userService=s,this.browserStorageService=l,this.userLoginStateService=u,this.timeService=p,this.redirectService=_,this.sAztDialogService=v}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(ft.Ix),e.rXU(St.R),e.rXU(vn.z),e.rXU(on.X),e.rXU(rp.F),e.rXU(He.m),e.rXU(Ac))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-account-menu"]],viewQuery:function(o,s){if(1&o&&e.GBs(Z.Cp,5),2&o){let l;e.mGM(l=e.lsd())&&(s.menuTrigger=l.first)}},inputs:{isTeacherDashboard:"isTeacherDashboard",beCreatedStudent:"beCreatedStudent"},features:[e.Vt3],decls:10,vars:5,consts:[["loggedIn",""],["accountMenu","matMenu"],["notAnonymous",""],[4,"ngIf","ngIfElse"],[3,"hasBackdrop"],[1,"dropdown-menu","show","relative","w-56",3,"mouseenter","mouseleave"],[1,"dropdown-content"],["azt-track-service","header-account-menu-zWAvNkVhjVM",1,"btn","btn-sm","btn-outline-primary",3,"click"],["name","log-out","size","16",3,"ngClass"],["azt-track-service","header-account-menu-S984kCyEl",3,"mouseenter","mouseleave","matMenuTriggerFor"],["azt-track-service","header-account-menu-_z5kaOQTx",1,"dropdown-toggle","w-full","h-10","rounded-full","flex","trigger-menu",2,"align-items","center",3,"click"],[1,"relative"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"font-medium",3,"ngStyle"],["class","text-xs text-slate-600 -mt-0.5 dark:text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-600","-mt-0.5","dark:text-slate-500"],[4,"ngIf"],["azt-track-service","header-account-menu-eSx-v39GRMc",1,"dropdown-item",3,"routerLink","queryParams"],["azt-track-service","header-account-menu-SEi5xr4uPic",1,"dropdown-item",3,"click"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","header-account-menu-mn5LIp-0AtS",1,"dropdown-item",3,"routerLink"],["azt-track-service","header-account-menu-vlcN2DxtbR2",1,"dropdown-item",3,"routerLink","queryParams"],["name","circle-arrow-right","size","16",3,"ngClass"],["azt-track-service","header-account-menu-iNoUc0CT5wP",1,"dropdown-item",3,"click"],["name","moon","size","16",3,"ngClass"],["azt-track-service","header-account-menu-CI1BdC7HViT",1,"dropdown-item",3,"click"],["name","sun","size","16",3,"ngClass"],["azt-track-service","header-account-menu--T0bM_cz_i7",1,"dropdown-item",3,"routerLink"],["name","scan-line","size","16",3,"ngClass"],["azt-track-service","header-account-menu-XYfAXj_Jl4e",1,"dropdown-item",3,"routerLink"],["name","qr-code","size","16",3,"ngClass"],["azt-track-service","header-account-menu-Q26_sXs6gkC",1,"dropdown-item",3,"routerLink"],["name","arrow-right-left","size","16",3,"ngClass"],["azt-track-service","header-account-menu-VzCUMIT5BDg",1,"dropdown-item",3,"routerLink"],["name","shield-check","size","16",3,"ngClass"],["azt-track-service","header-account-menu-jozmhaRatuz",1,"dropdown-item",3,"routerLink"]],template:function(o,s){if(1&o){const l=e.RV6();e.DNE(0,qr,5,5,"ng-container",3)(1,Wi,5,6,"ng-template",null,0,e.C5r),e.j41(3,"mat-menu",4,1)(5,"div",5),e.bIt("mouseenter",function(){return e.eBV(l),e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseEnter())})("mouseleave",function(){return e.eBV(l),e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseLeave())}),e.j41(6,"ul",6),e.DNE(7,ap,23,31,"ng-container",3)(8,fi,30,40,"ng-template",null,2,e.C5r),e.k0s()()()}if(2&o){const l=e.sdS(2),u=e.sdS(9);e.Y8G("ngIf",!s.userService.isLogin())("ngIfElse",l),e.R7$(3),e.Y8G("hasBackdrop",!1),e.R7$(4),e.Y8G("ngIf",s.isAnonymous)("ngIfElse",u)}},dependencies:[ft.Wk,z.YU,z.bT,z.B3,Z.kk,Z.Cp,$o,Nt.WGl,Ee.F2,Ee.wp,Ee.hx],encapsulation:2})),r})(),Vc=(()=>{var t;class r{constructor(o){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"globalDataObj",{}),this.commonService=o}setGlobalData(o,s){this.globalDataObj[o]=s}getGlobalData(o){let s=this.globalDataObj[o];if(s)return this.commonService.castJsonToObj(s)}removeGlobalData(o){this.globalDataObj.hasOwnProperty(o)&&delete this.globalDataObj[o]}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(hn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),zc=(()=>{var t;class r{sendReadNoticeToWebviewOfFlutter(o){(o||!this.sendMarkAsReadToFluter)&&(this.mobileWebviewService.sendSimpleMessage("OPEN_NOTIFICATION"),this.sendMarkAsReadToFluter=!0)}constructor(o){(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sendMarkAsReadToFluter",!1),this.mobileWebviewService=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(j))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Bc=(()=>{var t;class r{constructor(o){(0,f.A)(this,"elementRef",void 0),(0,f.A)(this,"isDisabled",!1),this.elementRef=o}onEnter(){const o=this.elementRef.nativeElement;this.isDisabled=o.offsetWidth==o.scrollWidth}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.aKT))}),(0,f.A)(r,"\u0275dir",e.FsC({type:t,selectors:[["","isDisabledTooltip",""]],hostBindings:function(o,s){1&o&&e.bIt("mouseenter",function(){return s.onEnter()})},inputs:{isDisabled:[0,"isDisabledTooltip","isDisabled"]},exportAs:["isDisabled"]})),r})();const Pc=()=>({"notification__icon dark:text-slate-500":!0}),Pa=t=>[t],La=t=>({"mt-3":t});function Lc(t,r){1&t&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui"),e.k0s())}function Zi(t,r){if(1&t&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.unreadNotification," ")}}function Ua(t,r){1&t&&(e.j41(0,"div",18),e.nrm(1,"azt-loading-ui",19),e.k0s())}function qi(t,r){if(1&t&&(e.j41(0,"div",21),e.eu8(1,22),e.k0s()),2&t){e.XpG(3);const n=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function lp(t,r){1&t&&(e.j41(0,"div",23),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_thong_bao_nao")," "))}function Ji(t,r){if(1&t&&e.DNE(0,qi,2,1,"div",20)(1,lp,3,3,"ng-template",null,3,e.C5r),2&t){const n=e.sdS(2),o=e.XpG(2);e.Y8G("ngIf",o.commonNoticeData.length>0)("ngIfElse",n)}}function Jr(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,Ua,2,0,"div",17)(6,Ji,3,2,"ng-template",null,2,e.C5r),e.k0s()()),2&t){const n=e.sdS(7),o=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_thong_bao")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",n)}}function Kr(t,r){if(1&t&&(e.qex(0),e.nrm(1,"azt-create-avatar",39),e.bVm()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("linkAvatar",n.senderAvatar)("nameCreateAvatar",n.senderName)("size",48)}}function Xa(t,r){if(1&t&&e.nrm(0,"azt-create-avatar",42),2&t){const n=e.XpG(3).$implicit;e.Y8G("nameCreateAvatar",n.senderName)("size",48)}}function cp(t,r){1&t&&(e.nrm(0,"azt-create-avatar",43),e.nI1(1,"coreModConvertCdnLinkOfGitHub")),2&t&&e.Y8G("linkAvatar",e.bMT(1,2,"images/logo.svg"))("size",48)}function up(t,r){if(1&t&&e.DNE(0,Xa,1,2,"azt-create-avatar",40)(1,cp,2,4,"azt-create-avatar",41),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function dp(t,r){if(1&t&&(e.qex(0),e.j41(1,"span",44,6),e.EFF(3),e.k0s(),e.bVm()),2&t){const n=e.sdS(2),o=e.XpG(2).$implicit;e.R7$(),e.FS9("matTooltip",o.senderName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",o.senderName," ")}}function Go(t,r){if(1&t&&(e.j41(0,"span",44,6),e.EFF(2),e.k0s()),2&t){const n=e.sdS(1),o=e.XpG(3).$implicit;e.FS9("matTooltip",o.studentName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",o.studentName," ")}}function Uc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_re_approved_student_account")," "))}function Xc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_bank_question")," "))}function pp(t,r){if(1&t&&e.DNE(0,Go,3,4,"span",45)(1,Uc,3,3,"span",46)(2,Xc,3,3,"span",46),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type&&"NEW_REQUEST_REAPPROVE"!=n.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Yc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.j41(2,"span",48),e.EFF(3),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ","lang_auto_ban_moi_duoc_phan_quyen_cho_lop"," "),e.R7$(2),e.JRh(n.classroomName)}}function Hc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_cham_diem_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Wc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Zc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_co_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_moi_duoc_giao")," ")}}function fp(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_yeu_cau_nop_lai_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function mp(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_thi")," "),e.R7$(3),e.JRh(n.examName)}}function _t(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_bai_thi_moi")," "),e.R7$(3),e.JRh(n.examName)}}function _p(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_bai_thi")," "),e.R7$(3),e.JRh(n.examName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_da_duco_cham_diem")," ")}}function Ya(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit,o=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ban_moi_duoc_phan_quyen_cho")," "),e.R7$(3),e.JRh(o.processNoticeService.getTypeObjNotice(n))}}function qc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Qr(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function hp(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Jc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function es(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_you")+" "+(n.totalApproved?e.bMT(3,3,"lang_notice_approved")+" "+n.totalApproved+" "+e.bMT(4,5,"lang_notice_question"):"")+(n.totalApproved&&n.totalRejected?", ":" ")+(n.totalRejected?e.bMT(5,7,"lang_notice_rejected")+" "+n.totalRejected+" "+e.bMT(6,9,"lang_notice_question"):"")," ")}}function Vn(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_news_feed_notice_has_new")," "),e.R7$(3),e.JRh(n.classroomName)}}function gp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"b"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,7,"lang_auto_lop")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_auto_khong_chon_duoc_ten_do_da_co_ban_chon_mat")," ")}}function Nn(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_not_paid_your_current_months_tuition_please_complete_your_tuition")," ")}}function vp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_some_unfinished_exams_please_complete_them_on_time")," ")}}function yp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_vang_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function bp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_co_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function ts(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_gui_nhan_xet_den_hoc_sinh")," ",n.classroomName," ")}}function ns(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_thay_doi_trang_thai_hoc_phi_cho_hoc_sinh")," ",n.studentName," ")}}function Ki(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_co_de_thi_moi_duoc_giao_den_hoc_sinh")," ",n.studentName," ")}}function os(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"getContentFromCustomBodyNotice"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.E5c(" ",e.bMT(7,7,"lang_core_co_thong_bao_moi_den_hoc_sinh")," ",n.studentName,' "',e.bMT(8,9,n.data),'" ')}}function xp(t,r){if(1&t&&(e.j41(0,"a",30),e.nI1(1,"navigationLocalize"),e.j41(2,"div",31)(3,"div",32),e.DNE(4,Kr,2,3,"ng-container",33)(5,up,2,2,"ng-template",null,4,e.C5r),e.k0s(),e.j41(7,"div",34)(8,"div",35),e.DNE(9,dp,4,4,"ng-container",33)(10,pp,3,3,"ng-template",null,5,e.C5r),e.j41(12,"div",36),e.EFF(13),e.nI1(14,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.j41(15,"div",37),e.DNE(16,Yc,4,2,"span",38)(17,Hc,5,4,"span",38)(18,Wc,5,4,"span",38)(19,Zc,7,7,"span",38)(20,fp,5,4,"span",38)(21,mp,5,4,"span",38)(22,_t,5,4,"span",38)(23,_p,7,7,"span",38)(24,Ya,5,4,"span",38)(25,qc,5,4,"span",38)(26,Qr,5,4,"span",38)(27,hp,5,4,"span",38)(28,Jc,5,4,"span",38)(29,es,7,11,"span",38)(30,Vn,6,4,"span",38)(31,gp,12,11,"span",38)(32,Nn,8,7,"span",38)(33,vp,8,7,"span",38)(34,yp,12,14,"span",38)(35,bp,12,14,"span",38)(36,ts,8,8,"span",38)(37,ns,8,8,"span",38)(38,Ki,8,8,"span",38)(39,os,9,11,"span",38),e.k0s()()()()),2&t){const n=e.sdS(6),o=e.sdS(11),s=e.XpG(),l=s.$implicit,u=s.index,p=e.XpG(2);e.Y8G("routerLink",e.eq3(36,Pa,e.bMT(1,32,p.processNoticeService.getRouterLinkForNoticeObj(l,p.role))))("queryParams",p.processNoticeService.getQueryParamForNoticeObj(l)),e.R7$(2),e.Y8G("ngClass",e.eq3(38,La,0!==u)),e.R7$(2),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",n),e.R7$(5),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",o),e.R7$(4),e.SpI(" ",e.bMT(14,34,l.createdAt)," "),e.R7$(3),e.Y8G("ngIf","NEW_ASSIGN"==l.type),e.R7$(),e.Y8G("ngIf","HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_HOMEWORK"==l.type),e.R7$(),e.Y8G("ngIf","RESEND_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM_SUBMIT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM"==l.type),e.R7$(),e.Y8G("ngIf","EXAM_HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==l.type&&(l.totalApproved>0||l.totalRejected>0)),e.R7$(),e.Y8G("ngIf","NEW_CLASSROOM_NEWS"==l.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==l.type),e.R7$(),e.Y8G("ngIf","TUITION_NOT_PAID"==l.type),e.R7$(),e.Y8G("ngIf","DONT_FINISHED_LESSON_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_DONT_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_COMMENT_FOR_YOU"==l.type),e.R7$(),e.Y8G("ngIf","UPDATE_TUITION_PAYMENT"==l.type),e.R7$(),e.Y8G("ngIf","HAS_EXAM_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","CUSTOM_CONTENT_CLASSROOM"==l.type)}}function Cp(t,r){if(1&t&&(e.qex(0),e.DNE(1,xp,40,40,"a",29),e.bVm()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","NEW_SHARE_PERMISSION"!=n.type)}}function Ha(t,r){if(1&t&&(e.DNE(0,Cp,2,1,"ng-container",24),e.nrm(1,"hr",25),e.j41(2,"div",26),e.nI1(3,"navigationLocalize"),e.j41(4,"div",27)(5,"a",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&t){const n=e.XpG();e.Y8G("ngForOf",n.commonNoticeData),e.R7$(2),e.Y8G("routerLink",e.eq3(7,Pa,e.bMT(3,3,"/notify/"+n.role+"/0/0/0"))),e.R7$(4),e.SpI(" ",e.bMT(7,5,"lang_auto_xem_tat_ca")," ")}}let Kc=(()=>{var t;class r extends Ae.H{removeNoticeNumber(){this.frontSAztCommonService.apiFrontCommonMarkNotificationAsReadGet(this.role).subscribe(o=>{1==o.success&&(this.resetNotification(0),this.getHeaderInfo())}),this.isMobileWebView&&this.redirectService.redirectToPath(`/notify/${this.role}/0/0/0`)}resetNotification(o){var s="back_header_infors_"+this.userService.getUserObj().id,l=this.globalService.getGlobalData(s);l&&l.data&&(0==o&&(l.data.unreadNotification=0,this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!0)),this.globalService.setGlobalData(s,this.serializeJson(l)))}reGetNoticeObjs(){var o="back_header_infors_"+this.userService.getUserObj().id;this.globalService.removeGlobalData(o),this.getHeaderInfo()}getHeaderInfo(){var o="back_header_infors_"+this.userService.getUserObj().id,s=this.globalService.getGlobalData(o);s?(this.unreadNotification=s.data?.unreadNotification??0,this.commonNoticeData=s.data?.commonNoticeObjs??[],this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)):(this.initStatusObj(),this.frontSAztCommonService.apiFrontCommonGetHeaderInfoGet(this.role).subscribe(l=>{1==l.success&&(this.unreadNotification=l.data?.unreadNotification??0,this.globalService.setGlobalData(o,this.serializeJson(l)),this.commonNoticeData=l.data?.commonNoticeObjs??new Array,this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getHeaderInfo()}constructor(o,s,l,u,p,_,v){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"frontSAztCommonService",void 0),(0,f.A)(this,"globalService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sAztHeaderNoticeService",void 0),(0,f.A)(this,"role",0),(0,f.A)(this,"commonNoticeData",[]),(0,f.A)(this,"unreadNotification",0),this.processNoticeService=o,this.userService=s,this.frontSAztCommonService=l,this.globalService=u,this.redirectService=p,this.mobileWebviewService=_,this.sAztHeaderNoticeService=v,this.waitDestroy(this.mobileWebviewService.getHeaderReloadNoticeSubscriber().subscribe(()=>{this.reGetNoticeObjs()}))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(gn),e.rXU(St.R),e.rXU(nn.s1),e.rXU(Vc),e.rXU(He.m),e.rXU(j),e.rXU(zc))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-notice-box"]],inputs:{role:"role"},features:[e.Vt3],decls:9,vars:6,consts:[["notification","matMenu"],["listNoticeBox",""],["doneLoading",""],["noNotification",""],["otherTemplate",""],["notSharePermission",""],["c","isDisabled"],["azt-track-service","header-notice-box-DtIJA3xWHnn",1,"dropdown-toggle","notification","cursor-pointer","relative",3,"click","matMenuTriggerFor"],["name","bell","size","24",3,"ngClass"],["class","w-3 h-3 mx-auto inline-block",4,"ngIf"],["class","absolute bg-danger text-white rounded-full font-bold","style","top: -5px; right: -5px; font-size: 7px; overflow: hidden; width: 15px; height: 15px; line-height: 15px; text-align: center",4,"ngIf"],["class","notification-content dropdown-menu show relative pt-2",4,"ngIf"],[1,"w-3","h-3","mx-auto","inline-block"],[1,"absolute","bg-danger","text-white","rounded-full","font-bold",2,"top","-5px","right","-5px","font-size","7px","overflow","hidden","width","15px","height","15px","line-height","15px","text-align","center"],[1,"notification-content","dropdown-menu","show","relative","pt-2"],[1,"notification-content__box","dropdown-content",2,"padding","10px"],[1,"notification-content__title"],["class","w-4 h-4 mx-auto mb-4",4,"ngIf","ngIfElse"],[1,"w-4","h-4","mx-auto","mb-4"],["type","bootstrap-spinner"],["class","notice-azt",4,"ngIf","ngIfElse"],[1,"notice-azt"],[3,"ngTemplateOutlet"],[1,"w-full","text-center","text-slate-500","mt-0.5","mb-4"],[4,"ngFor","ngForOf"],[1,"dropdown-divider","border-gray/[0.08]","mt-3"],["azt-track-service","header-notice-box-m_8Z0tdYOsZ",1,"clickable","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"routerLink"],[1,"text-center","p-3"],[1,"text-primary","text-center"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams"],[1,"cursor-pointer","dropdown-item","relative","flex","items-center",3,"ngClass"],[1,"w-12","h-12","flex-none","image-fit","mr-1"],[4,"ngIf","ngIfElse"],[1,"ml-2","overflow-hidden","w-full"],[1,"flex","items-center"],[1,"text-xs","text-slate-400","ml-auto","whitespace-nowrap"],[1,"text-slate-500","mt-0.5"],[4,"ngIf"],[3,"linkAvatar","nameCreateAvatar","size"],[3,"nameCreateAvatar","size",4,"ngIf"],[3,"linkAvatar","size",4,"ngIf"],[3,"nameCreateAvatar","size"],[3,"linkAvatar","size"],[1,"font-medium","truncate","mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","font-medium truncate mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],["class","font-medium mr-5",4,"ngIf"],[1,"font-medium","mr-5"],[1,"notify__name"]],template:function(o,s){if(1&o){const l=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){return e.eBV(l),e.Njj(s.statusObj.loading?"":s.removeNoticeNumber())}),e.nrm(1,"lucide-icon",8),e.DNE(2,Lc,2,0,"div",9)(3,Zi,2,1,"div",10),e.k0s(),e.j41(4,"mat-menu",null,0),e.DNE(6,Jr,8,5,"div",11),e.k0s(),e.DNE(7,Ha,8,9,"ng-template",null,1,e.C5r)}if(2&o){const l=e.sdS(5);e.Y8G("matMenuTriggerFor",s.isMobileWebView?null:l),e.R7$(),e.Y8G("ngClass",e.lJ4(5,Pc)),e.R7$(),e.Y8G("ngIf",s.statusObj.loading),e.R7$(),e.Y8G("ngIf",s.unreadNotification&&!s.statusObj.loading),e.R7$(3),e.Y8G("ngIf",!s.isMobileWebView)}},dependencies:[ft.Wk,z.YU,z.Sq,z.bT,z.T3,Z.kk,Z.Cp,tn.oV,$o,Bc,we.R,Nt.WGl,Ee.F2,Ee.wp,Ee.Vs,Ee.bH,Ee.OR],encapsulation:2})),r})();const Wa=["*"],Qi=()=>({"mr-1":!0}),Ot=t=>[t],is=()=>({"text-white transform -rotate-90":!0});function Le(t,r){1&t&&e.SdG(0)}function Qc(t,r){if(1&t&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.headerTitle," ")}}function eu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div")(3,"button",13),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.goBack())}),e.nrm(4,"lucide-icon",14),e.j41(5,"span",15),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()(),e.j41(8,"div",16)(9,"span",17),e.EFF(10),e.k0s()(),e.j41(11,"div",12)(12,"div",18),e.nrm(13,"azt-switch-language"),e.k0s(),e.j41(14,"div",18),e.nrm(15,"header-notice-box",19),e.k0s(),e.j41(16,"div",20),e.nrm(17,"header-account-menu",21),e.k0s()()(),e.DNE(18,Qc,2,1,"div",22),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngClass",e.lJ4(8,Qi)),e.R7$(2),e.JRh(e.bMT(7,6,"lang_auto_quay_lai")),e.R7$(4),e.JRh(n.headerTitle),e.R7$(5),e.Y8G("role",0),e.R7$(2),e.Y8G("isTeacherDashboard",!0),e.R7$(),e.Y8G("ngIf",n.headerTitle)}}function Za(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeMenuMobile())}),e.j41(3,"div",35),e.nrm(4,"lucide-icon",50),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(6,Ot,e.bMT(2,2,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(7,4,"lang_document_market_title")))}function tu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"a",26),e.nI1(3,"navigationLocalize"),e.nrm(4,"img",27),e.nI1(5,"getLinkLogo"),e.k0s(),e.j41(6,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.openMenuMobile())}),e.nrm(7,"lucide-icon",29),e.k0s()(),e.j41(8,"div",30)(9,"a",31),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.nrm(10,"lucide-icon",32),e.k0s(),e.j41(11,"ul",33)(12,"li")(13,"a",34),e.nI1(14,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(15,"div",35),e.nrm(16,"lucide-icon",36),e.k0s(),e.j41(17,"div",37),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()(),e.j41(20,"li")(21,"a",38),e.nI1(22,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(23,"div",35),e.nrm(24,"lucide-icon",39),e.k0s(),e.j41(25,"div",37),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()(),e.j41(28,"li")(29,"a",40),e.nI1(30,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(31,"div",35),e.nrm(32,"lucide-icon",41),e.k0s(),e.j41(33,"div",37),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"li")(37,"a",42),e.nI1(38,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(39,"div",35),e.nrm(40,"lucide-icon",43),e.k0s(),e.j41(41,"div",37),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",44),e.nI1(46,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(47,"div",35),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",37),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,Za,8,8,"li",46),e.j41(53,"li")(54,"a",47),e.nI1(55,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(56,"div",35),e.nrm(57,"lucide-icon",48),e.k0s(),e.j41(58,"div",37),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(45,Ot,e.bMT(3,17,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(5,19,"smallLogo"),e.B4B),e.R7$(3),e.Y8G("ngClass",e.lJ4(47,is)),e.R7$(3),e.Y8G("ngClass",e.lJ4(48,is)),e.R7$(3),e.Y8G("routerLink",e.eq3(49,Ot,e.bMT(14,21,"/admin/dashboard"))),e.R7$(5),e.JRh(e.bMT(19,23,"lang_auto_dashboard")),e.R7$(3),e.Y8G("routerLink",e.eq3(51,Ot,e.bMT(22,25,"/admin/testbank/document-management/1/0/1"))),e.R7$(5),e.SpI(" ",e.bMT(27,27,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(53,Ot,e.bMT(30,29,"/admin/testbank/document-management/0/0/1"))),e.R7$(5),e.JRh(e.bMT(35,31,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(55,Ot,e.bMT(38,33,"/admin/student/manage-classroom/0"))),e.R7$(5),e.JRh(e.bMT(43,35,"lang_auto_quan_ly_lop")),e.R7$(3),e.Y8G("routerLink",e.eq3(57,Ot,e.bMT(46,37,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,39,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(59,Ot,e.bMT(55,41,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(60,43,"lang_cms_business_dashboard_title"))}}function nu(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",65),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",50),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_document_market_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Ot,e.bMT(3,6,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_document_market_title")))}function ou(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",66),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",67),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_notice_bank_question")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Ot,e.bMT(3,6,"/admin/question-library/dashboard"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_notice_bank_question")))}function qa(t,r){if(1&t&&(e.j41(0,"nav",51)(1,"a",52),e.nI1(2,"navigationLocalize"),e.nrm(3,"img",27),e.nI1(4,"getLinkLogo"),e.k0s(),e.nrm(5,"div",53),e.j41(6,"ul")(7,"li")(8,"a",54),e.nI1(9,"navigationLocalize"),e.j41(10,"div",55),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",36),e.k0s(),e.j41(13,"div",56),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()(),e.j41(16,"li")(17,"a",57),e.nI1(18,"navigationLocalize"),e.j41(19,"div",55),e.nI1(20,"mytranslate"),e.nrm(21,"lucide-icon",39),e.k0s(),e.j41(22,"div",56),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.j41(25,"li")(26,"a",58),e.nI1(27,"navigationLocalize"),e.j41(28,"div",55),e.nI1(29,"mytranslate"),e.nrm(30,"lucide-icon",41),e.k0s(),e.j41(31,"div",56),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"li")(35,"a",59),e.nI1(36,"navigationLocalize"),e.j41(37,"div",55),e.nI1(38,"mytranslate"),e.nrm(39,"lucide-icon",43),e.k0s(),e.j41(40,"div",56),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()(),e.j41(43,"li",60),e.nI1(44,"mytranslate"),e.j41(45,"a",61),e.nI1(46,"navigationLocalize"),e.j41(47,"div",62),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",56),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,nu,9,12,"li",63)(53,ou,9,12,"li",63),e.j41(54,"li",60),e.nI1(55,"mytranslate"),e.j41(56,"a",64),e.nI1(57,"navigationLocalize"),e.j41(58,"div",62),e.nrm(59,"lucide-icon",48),e.k0s(),e.j41(60,"div",56),e.EFF(61),e.nI1(62,"mytranslate"),e.k0s()()()()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(68,Ot,e.bMT(2,28,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(4,30,"smallLogo"),e.B4B),e.R7$(5),e.Y8G("routerLink",e.eq3(70,Ot,e.bMT(9,32,"/admin/dashboard"))),e.R7$(2),e.FS9("matTooltip",e.bMT(11,34,"lang_auto_dashboard")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(15,36,"lang_auto_dashboard")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(72,Ot,e.bMT(18,38,"/admin/testbank/document-management/1/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(20,40,"lang_auto_bai_tap")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(24,42,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(74,Ot,e.bMT(27,44,"/admin/testbank/document-management/0/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(29,46,"lang_auto_de_thi")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.JRh(e.bMT(33,48,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(76,Ot,e.bMT(36,50,"/admin/student/manage-classroom/0"))),e.R7$(2),e.FS9("matTooltip",e.bMT(38,52,"lang_auto_quan_ly_lop")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(42,54,"lang_auto_quan_ly_lop")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(44,56,"lang_dashboard_teacher_management_box")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(78,Ot,e.bMT(46,58,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,60,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.FS9("matTooltip",e.bMT(55,62,"lang_cms_business_dashboard_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(80,Ot,e.bMT(57,64,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(62,66,"lang_cms_business_dashboard_title"))}}let Do=(()=>{var t;class r extends Ae.H{goBack(){this.commonService.myNavigationBySpecialQueryString(this.headerBackToLink)}openMenuMobile(){document.getElementById("toggle-menu")?.classList.add("mobile-menu--active")}closeMenuMobile(){document.getElementById("toggle-menu")?.classList.remove("mobile-menu--active")}initActiveNav(){this.activeTagHomeUrlList=["/admin/dashboard","/auth/account-setting","/notify","/admin/trash","/admin/testbank/create-website","/admin/testbank/create-website-result","/payment/azo-package","/super-role/","/azota-ads/","/auth/vip-packages","/azota-tools/"],this.activeTagHomeworkUrlList=["/admin/testbank/document-management/1","/admin/testbank/homework-results-list","/admin/testbank/config-homework","/admin/testbank/publish-document/1","/create-homework-success/","/admin/homework/add-new-homework","/admin/homework/mark-exercise"],this.activeTagExamUrlList=["/admin/testbank/matrix-list/","/admin/testbank/document-management/0","/admin/testbank/create-new-document","/admin/testbank/create-tree-document","/admin/testbank/exam-results-list","/admin/testbank/statistic/","/admin/testbank/action-online-offline/","/admin/testbank/analyze-knowledge/","/admin/testbank/config-exam-online","/admin/testbank/publish-document/0","/admin/testbank/add-student","/admin/testbank/test-review","/admin/testbank/create-exam-by-excel/","/admin/testbank/create-manual-offline-exam/","/admin/testbank/config-exam-offline/","/admin/testbank/update-exam/","/admin/testbank/update-offline-exam-code/","/admin/testbank/test-result-tracking/","/admin/testbank/download-file-print/","/admin/testbank/print-exam-and-ticket/","/admin/test-market/introduce","/admin/testbank/update-offline-exam","/admin/testbank/ai-create-exam/","/admin/testbank/create-exam-by-text/","/ladingpage/","/admin/testbank/update-capacity-exam","/admin/testbank/create-capacity-exam"],this.activeTagQuestionLibraryUrlList=["/admin/question-library/"],this.activeTagClassroomUrlList=["/admin/student"],this.activeTagGroupUrlList=["/admin/teacher-group"],this.activeTagDocumentMarketUrlList=["/document-market/"],this.activeTagBusinessUrlList=["/business/"],this.activeTagBusinessTableUrlList=["/table-honored"]}ngOnInit(){super.ngOnInit(),this.initActiveNav()}constructor(o,s,l){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"headerBackToLink",""),(0,f.A)(this,"headerTitle",""),(0,f.A)(this,"checkBackDialog",!1),(0,f.A)(this,"handleBackDialog",new e.bkB),(0,f.A)(this,"activeTagHomeUrlList",[]),(0,f.A)(this,"activeTagHomeworkUrlList",[]),(0,f.A)(this,"activeTagExamUrlList",[]),(0,f.A)(this,"activeTagClassroomUrlList",[]),(0,f.A)(this,"activeTagGroupUrlList",[]),(0,f.A)(this,"activeTagDocumentMarketUrlList",[]),(0,f.A)(this,"activeTagQuestionLibraryUrlList",[]),(0,f.A)(this,"activeTagBusinessUrlList",[]),(0,f.A)(this,"activeTagBusinessTableUrlList",[]),this.processNoticeService=o,this.userService=s,this.browserStorageService=l}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(gn),e.rXU(St.R),e.rXU(vn.z))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["teacher-layout"]],inputs:{headerBackToLink:"headerBackToLink",headerTitle:"headerTitle",checkBackDialog:"checkBackDialog"},outputs:{handleBackDialog:"handleBackDialog"},features:[e.Vt3],ngContentSelectors:Wa,decls:18,vars:4,consts:[["BodyContentTpl",""],["TopBarTpl",""],["mobileMenuTpl",""],["DesktopMenuTpl",""],["id","azt-layout",1,"azt-layout"],[1,"azt-body"],[3,"ngTemplateOutlet"],[1,"flex","mt-[4.7rem]","md:mt-0"],[1,"content","relative"],[1,"top-bar"],[1,"azt-content"],[1,"block","w-full"],[1,"flex","items-center"],["azt-track-service","teacher-layout-txPc6qxNl",1,"btn","btn-transparent",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[1,"azt-hidden","sm:block"],[1,"font-medium","flex-one","text-center"],[1,"azt-hidden","md:block"],[1,"dropdown","mr-2","sm:mr-4"],[3,"role"],[1,"dropdown","header-account-menu"],[3,"isTeacherDashboard"],["class","block md:hidden text-center pt-2 pb-2 font-medium",4,"ngIf"],[1,"block","md:hidden","text-center","pt-2","pb-2","font-medium"],["id","toggle-menu",1,"mobile-menu","md:hidden"],[1,"mobile-menu-bar"],["azt-track-service","teacher-layout-eJLgd2yvySJ",1,"flex","mr-auto",3,"routerLink"],["alt","Azota",1,"w-10",3,"src"],["azt-track-service","teacher-layout-kPh_SLquONL",1,"mobile-menu-toggler",3,"click"],["name","bar-chart-2","size","20",3,"ngClass"],[1,"scrollable"],["azt-track-service","teacher-layout-p3XQvJS7FuD",1,"mobile-menu-toggler",3,"click"],["name","circle-x","size","32",3,"ngClass"],[1,"scrollable__content","py-2"],["azt-track-service","teacher-layout-67rbSb3dLPU",1,"menu",3,"click","routerLink"],[1,"menu__icon"],["name","house","size","24"],[1,"menu__title"],["azt-track-service","teacher-layout-J8TmW2BMwsH",1,"menu",3,"click","routerLink"],["name","file-text","size","24"],["azt-track-service","teacher-layout-U1Xi4mAqmKv",1,"menu",3,"click","routerLink"],["name","folder","size","24"],["azt-track-service","teacher-layout-nV8vMAnzV7_",1,"menu",3,"click","routerLink"],["name","layers","size","24"],["azt-track-service","teacher-layout-27U-GtoLLKH",1,"menu",3,"click","routerLink"],["name","users","size","24"],[4,"ngIf"],["azt-track-service","teacher-layout-QY_BVpu7d",1,"menu",3,"click","routerLink"],["name","plug","size","24",2,"transform","rotate(45deg)"],["azt-track-service","teacher-layout-bYWbXjGnRw",1,"menu",3,"click","routerLink"],["name","book-open","size","24"],[1,"side-nav","side-nav--simple"],["azt-track-service","teacher-layout-VhZ51QnFiPG",1,"flex","items-center","pl-5","pt-4","relative",3,"routerLink"],[1,"side-nav__devider","my-6"],["azt-track-service","teacher-layout-qPpeOjyQiU6",1,"side-menu",3,"routerLink"],[1,"side-menu__icon",3,"matTooltip","matTooltipPosition"],[1,"side-menu__title"],["azt-track-service","teacher-layout-JuqCTNWN4XT",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-tB87TxUcBLf",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-FmXRsM0ZL-Y",1,"side-menu",3,"routerLink"],[3,"matTooltip","matTooltipPosition"],["azt-track-service","teacher-layout-dUjdIyx6m3F",1,"side-menu",3,"routerLink"],[1,"side-menu__icon"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["azt-track-service","teacher-layout-Qn0hMZhPEp",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-hn8q-bW1M",1,"side-menu",3,"routerLink"],[1,"side-menu",3,"routerLink"],["name","landmark","size","24"]],template:function(o,s){if(1&o&&(e.NAR(),e.j41(0,"div",4)(1,"div",5),e.eu8(2,6),e.j41(3,"div",7),e.eu8(4,6),e.j41(5,"div",8)(6,"div",9),e.eu8(7,6),e.k0s(),e.j41(8,"div",10),e.eu8(9,6),e.k0s()()()()(),e.DNE(10,Le,1,0,"ng-template",null,0,e.C5r)(12,eu,19,9,"ng-template",null,1,e.C5r)(14,tu,61,61,"ng-template",null,2,e.C5r)(16,qa,63,82,"ng-template",null,3,e.C5r)),2&o){const l=e.sdS(11),u=e.sdS(13),p=e.sdS(15),_=e.sdS(17);e.R7$(2),e.Y8G("ngTemplateOutlet",p),e.R7$(2),e.Y8G("ngTemplateOutlet",_),e.R7$(3),e.Y8G("ngTemplateOutlet",u),e.R7$(2),e.Y8G("ngTemplateOutlet",l)}},dependencies:[ft.Wk,z.YU,z.bT,z.T3,tn.oV,ut,Nt.WGl,mi,Kc,Ee.F2,Ee.wp,Ee.ph],encapsulation:2})),r})();function lo(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.create())}),e.nrm(2,"i",7),e.EFF(3," Create new App "),e.k0s()()}}function co(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",13)(1,"button",14),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.edit(s))}),e.nrm(2,"i",15),e.k0s()()}}function uo(t,r){if(1&t&&(e.j41(0,"div",8)(1,"a",9)(2,"div",10),e.nrm(3,"i"),e.j41(4,"div",11),e.EFF(5),e.k0s()()(),e.DNE(6,co,3,0,"div",12),e.k0s()),2&t){const n=r.$implicit,o=r.index,s=e.XpG(2);e.BMQ("touranchor","azt-tour-"+(o+1)),e.R7$(),e.Mz_("href","/vi/admin/ai/app/",n.id,"",e.B4B),e.R7$(2),e.ZvI("",n.icon," text-4xl"),e.R7$(2),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngIf",s.isAdmin)}}function er(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,lo,4,0,"div",2),e.j41(2,"div",3),e.DNE(3,uo,7,8,"div",4),e.k0s()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.isAdmin),e.R7$(2),e.Y8G("ngForOf",n.listApp)}}function tr(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.editFlow())}),e.EFF(1,"Flow"),e.k0s()}}function po(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",17)(2,"label",18),e.EFF(3,"App Name"),e.k0s(),e.j41(4,"input",19),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.name,s)||(l.curApp.name=s),e.Njj(s)}),e.k0s()(),e.j41(5,"div",17)(6,"label",18),e.EFF(7,"Run Async"),e.k0s(),e.j41(8,"input",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.pinTaskbar,s)||(l.curApp.pinTaskbar=s),e.Njj(s)}),e.k0s()(),e.j41(9,"div",17)(10,"label",18),e.EFF(11,"Description"),e.k0s(),e.j41(12,"textarea",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.desc,s)||(l.curApp.desc=s),e.Njj(s)}),e.k0s()(),e.j41(13,"div",17)(14,"label",18),e.EFF(15,"Icon"),e.k0s(),e.j41(16,"input",22),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.icon,s)||(l.curApp.icon=s),e.Njj(s)}),e.k0s()(),e.j41(17,"div",23)(18,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.close())}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.copyApp())}),e.EFF(21,"Copy"),e.k0s(),e.j41(22,"button",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.deleteApp())}),e.EFF(23,"Delete"),e.k0s(),e.j41(24,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.shareApp())}),e.EFF(25),e.k0s(),e.DNE(26,tr,2,0,"button",26),e.j41(27,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.save())}),e.EFF(28),e.k0s()()()}if(2&t){let n;const o=e.XpG(2);e.R7$(4),e.R50("ngModel",o.curApp.name),e.R7$(4),e.R50("ngModel",o.curApp.pinTaskbar),e.R7$(4),e.R50("ngModel",o.curApp.desc),e.R7$(4),e.R50("ngModel",o.curApp.icon),e.R7$(9),e.JRh(o.curApp.share&&o.curApp.share>0?"Remove from Shared":"Share"),e.R7$(),e.Y8G("ngIf",null!==(n=null==o.curApp?null:o.curApp.id)&&void 0!==n&&n),e.R7$(),e.Y8G("disabled",o.saving),e.R7$(),e.JRh(o.curApp.id>0?"Save":"Create App")}}function Sp(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,po,29,8,"div",0),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curApp)}}let Ja=(()=>{var t;class r extends Ae.H{constructor(o,s,l){super(),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"isAdmin",!1),(0,f.A)(this,"isPasting",!1),(0,f.A)(this,"listApp",[]),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"saving",!1),this.auth=o,this.userSv=s,this.appService=l}ngOnInit(){var o=this;document.addEventListener("paste",function(){var s=(0,ge.A)(function*(l){if(!o.isPasting){o.isPasting=!0;try{o.listApp.push({icon:"bx bx-loader-circle",name:"Creating..."});const u=yield navigator.clipboard.readText();if(u.indexOf('"icon"')>0&&u.indexOf('"config"')>0){l.preventDefault();let p=JSON.parse(u);o.appService.save(p).subscribe(_=>{o.isPasting=!1,o.loadApp()})}}catch(u){o.isPasting=!1,console.error("Failed to read from clipboard: ",u)}}});return function(l){return s.apply(this,arguments)}}()),this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),s=>{this.loadApp()})}loadApp(){this.isAdmin=1==this.userSv.getUserObj().id,this.isAdmin?this.appService.getList().subscribe(o=>{this.listApp=o}):this.appService.getListShare().subscribe(o=>{this.listApp=o})}edit(o){this.curApp=o}create(){this.curApp={id:0,config:"[]",name:"",icon:""}}editFlow(){window.location.href="/vi/admin/ai/flow/"+this.curApp.id}save(){this.curApp&&(this.saving=!0,this.appService.save(this.curApp).subscribe(o=>{0==this.curApp.id?window.location.href="/vi/admin/ai/flow/"+o.data:(this.saving=!1,this.close(),this.loadApp())}))}close(){this.curApp=void 0}deleteApp(){this.curApp&&confirm(`Delete this app? [${this.curApp.name}]`)&&this.appService.delete(this.curApp).subscribe(o=>{this.close(),this.loadApp()})}copyApp(){var o=this;return(0,ge.A)(function*(){if(!o.curApp)return;let s=JSON.parse(JSON.stringify(o.curApp));s.id=0;try{yield navigator.clipboard.writeText(JSON.stringify(s))}catch(l){console.error("Failed to copy text: ",l)}})()}shareApp(){this.curApp&&confirm(`Share this app to Public Library mean everyone can access it. Do you want to share? [${this.curApp.name}]`)&&(this.curApp.share=this.curApp.share&&this.curApp.share>0?0:1,this.appService.share(this.curApp).subscribe(o=>{alert("Share successful! We will review you app soon.")}))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Zt.u),e.rXU(St.R),e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[4,"ngIf"],["class","box p-3 w-1/2 mx-auto mt-3",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-4 md:col-span-2 intro-y h-full",4,"ngFor","ngForOf"],[1,"text-center"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bx","bx-plus","mr-2"],[1,"col-span-4","md:col-span-2","intro-y","h-full"],["azt-track-service","dashboard-main-rF6MSAArUsY",3,"href"],[1,"box","p-8","zoom-in","h-full","text-center"],[1,"font-medium","text-center","text-base","mt-3"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],[1,"p-0",3,"click"],[1,"bx","bx-pencil"],[1,"box","p-3","w-1/2","mx-auto","mt-3"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","App Name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","1 or 0",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","bx bx-pencil",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-right"],["type","button",1,"btn","btn-label-secondary","mr-3",3,"click"],["type","button",1,"btn","text-danger","btn-label-secondary","mr-3",3,"click"],["type","button","class","btn btn-label-secondary mr-3",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click","disabled"]],template:function(o,s){1&o&&(e.j41(0,"teacher-layout"),e.DNE(1,er,4,2,"div",0)(2,Sp,2,1,"div",1),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",!s.curApp),e.R7$(),e.Y8G("ngIf",s.curApp))},dependencies:[Oe.b,Do,z.MD,z.Sq,z.bT,N.YN,N.me,N.BC,N.vS]})),r})();var Oo=function(t){return t.HOMEWORK="homework",t.EXAM_QUESTIONS="exam_questions",t.GET_PUBLIC_UPLOAD_URL_FOR_ID_NUMBER="get_public_upload_url_for_id_number",t.GET_PUBLIC_UPLOAD_URL_FOR_DOCUMENT_BANK="get_public_upload_url_for_document_bank",t.FRONT_EXAM_MOBILE_QR="front_exam_mobile_qr",t.FRONT_HOMEWORK="front_homework",t.FRONT_EXAM="front_exam",t.AVATAR="avatar",t.BUSINESS_PLUGINS="business_plugins",t.BUSINESS_NEWS="business_news",t.EXAM_EDITOR="exam_editor",t.ADMIN="admin",t.ADMIN_DIGITALIZE="admin_digitalize",t}(Oo||{}),Ka=function(t){return t.ALL="*",t.WORD=".doc, .docx",t.PPT=".ppt, .pptx",t.EXCEL=".xls, .xlsx",t.PDF=".pdf",t.VIDEO="video/*",t.IMAGE="image/*, capture=camera",t.AUDIO="audio/*",t.SYNTHETIC=".doc, .docx, .ppt, .pptx, .xls, .xlsx, .pdf, video/*, image/*, audio/*",t.AZT=".azt",t}(Ka||{}),Qa=function(t){return t.NONE="",t.WMV=".wmv",t}(Qa||{});function nr(t){return/^(?:application\/pdf)$/i.test(t)}function ss(t){return t<=0?0:(t/=1048576,Number(t.toFixed(2)))}const Po={MAX_WIDTH:1280,MAX_HEIGHT:1280,MIME_TYPE:"image/jpeg",QUALITY:.9};function qt(){return(qt=(0,ge.A)(function*(t){try{return function Vo(t){return/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump|image\/webp)$/i.test(t)}(t.type)?yield function ls(t){return new Promise(r=>{const n=function as(t){const r=t.name,n=r.lastIndexOf(".");return-1!==n&&n>0?r.slice(0,n):r}(t)+".jpeg",o=URL.createObjectURL(t),s=new Image;s.src=o,s.onerror=function(){URL.revokeObjectURL(this.src),r(t)},s.onload=()=>{try{URL.revokeObjectURL(s.src);var l=function ru(t,r,n){let o=t.width,s=t.height;return o>s?o>r&&(s=Math.round(s*r/o),o=r):s>n&&(o=Math.round(o*n/s),s=n),{width:o,height:s}}(s,Po.MAX_WIDTH,Po.MAX_HEIGHT);const u=l.width,p=l.height,_=document.createElement("canvas");_.width=u,_.height=p,_.getContext("2d").drawImage(s,0,0,u,p),_.toBlob(g=>{if(null!=g){const y=new File([g],n,{type:g.type});r(y)}else r(t)},Po.MIME_TYPE,Po.QUALITY)}catch{r(t)}}})}(t):t}catch{return t}})).apply(this,arguments)}var Lo=se(1985),ar=se(7673);let Ap=(()=>{var t;class r{result(o){const s=o;return 1===o.success&&o.data&&o.data.content&&(s.data=this.decode(o.data.content)),s}payload(o){return{content:this.encode(o),typeHash:Math.floor(256*Math.random()),keyHash:"U5gleH2CsWW"}}encode(o){const s=JSON.stringify(o),l=new TextEncoder;let u=Math.floor(10*Math.random());const p=l.encode(s);for(let g=0;g<p.length;g++)p[g]=this.hashExtractTemplate[u][p[g]];let _=new Uint8Array(p.length+1);return _.set(p),_[_.length-1]=u,btoa(String.fromCharCode(..._))}decode(o){const s=atob(o).split(""),l=s.pop(),u=new Uint8Array(s.map(g=>g.charCodeAt(0))),p=l?.charCodeAt(0)??0;for(let g=0;g<u.length;g++){const y=this.hashExtractTemplate[p].indexOf(u[g]);u[g]=y}const v=new TextDecoder("utf-8").decode(u);return this.commonService.castJsonToObj(v)}constructor(o){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"hashExtractTemplate",void 0),this.commonService=o,this.hashExtractTemplate=this.commonService.castJsonToObj(this.commonService.getContentHashConfigSystem())??[]}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(hn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var cu=se(8750),Fp=se(9974),uu=se(4360);function ps(t){return(0,Fp.N)((r,n)=>{let o,l,s=!1;const u=()=>{o=r.subscribe((0,uu._)(n,void 0,void 0,p=>{l||(l=new ee.B,(0,cu.Tg)(t(l)).subscribe((0,uu._)(n,()=>o?u():s=!0))),l&&l.next(p)})),s&&(o.unsubscribe(),o=null,s=!1,u())};u()})}var fs=se(1986),hi=se(6697),ms=se(9437),ol=se(7018);let Rp=(()=>{var t;class r{constructor(){(0,f.A)(this,"http",(0,e.WQX)(Pe.Qq))}commonPutHttpProgress(o,s,l){return this.http.put(o,l,{headers:s,reportProgress:!0,observe:"events"}).pipe(ps(u=>u.pipe((0,fs.c)(1e3),(0,hi.s)(3))),(0,ms.W)(this.handleError))}commonPutHttp(o,s,l){return this.http.put(o,l,{headers:s}).pipe(ps(u=>u.pipe((0,fs.c)(1e3),(0,hi.s)(3))),(0,ol.H)(),(0,ms.W)(this.handleError))}commonPutHttpWithRetry(o,s,l){return this.http.put(o,l,{headers:s,observe:"response"}).pipe(ps(u=>u.pipe((0,fs.c)(1e3),(0,hi.s)(3))),(0,ol.H)(),(0,ms.W)(this.handleError))}handleError(o){if(o&&401==o.status)var s={success:0,message:"lang_cms_error_un_auth",data:{},code:401};else s=o.error instanceof ErrorEvent?{success:0,message:"lang_cms_error_javascript",data:{},code:999}:{success:0,message:"lang_cms_error_lost_connect_to_server",data:{},code:1e3};return new Lo.c(l=>{l.next(s)})}commonGetHttp(o){return this.http.get(o).pipe(ps(s=>s.pipe((0,fs.c)(1e3),(0,hi.s)(3))),(0,ol.H)(),(0,ms.W)(this.handleError))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),du=(()=>{var t;class r extends Rp{commonUploadFile(o,s,l){return new Lo.c(u=>{if(!s)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();if(s.size<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=s.type?s.type:"image/jpeg",g=this._commonGetAppendUrl(o,s.name?s.name:"none",s.size.toString(),v,l);g?g.subscribe(y=>{1==y.success?this.commonPutHttp(y?.data?.upload_url??"",this._getHeaderRequest(y.data?.cloudStorageHeaderObjs??[]),s).subscribe(x=>{if(x&&x.hasOwnProperty("success")&&0==x.success)u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete();else{var C=y.data?this.convertServerFileDataToClientFileData(y.data):void 0;u.next({success:1,message:"successful",data:C,code:200}),u.complete()}}):(u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete())}):u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999})})}commonUploadFileProgress(o,s,l){return new Lo.c(u=>{if(!s)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();if(s.size<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=s.type,g=this._commonGetAppendUrl(o,s.name,s.size.toString(),v,l);if(!g)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();g.subscribe(y=>{1==y.success?this.commonPutHttpProgress(y?.data?.upload_url??"",this._getHeaderRequest(y.data?.cloudStorageHeaderObjs??[]),s).subscribe(x=>{if(x.type===Pe.hv.UploadProgress)u.next({type:Pe.hv.UploadProgress,loaded:x.loaded,total:x.total});else if(x.type===Pe.hv.Response)if(x&&x.hasOwnProperty("success")&&0==x.success)u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete();else{let I={success:1,message:"successful",data:y.data?this.convertServerFileDataToClientFileData(y.data):void 0,code:200};u.next(I),u.complete()}else x&&x.hasOwnProperty("success")&&0==x.success&&(u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete())}):(u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete())})})}reactiveUploadBase64ToCdnWithRetry(o,s,l){return s.length<=0||s.indexOf("base64")<=-1?(0,ar.of)({success:1,message:"successfull",data:s,code:200}):new Lo.c(u=>{var p=function Tp(t){var r;r=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(r.length),s=0;s<r.length;s++)o[s]=r.charCodeAt(s);return new Blob([o],{type:n})}(s),y=this._commonGetAppendUrl(o,l??"question-image-cropper-v2.png",p.size.toString(),"image/png","");if(!y)return u.next({success:0,message:"Error upload base64 to cdn!",data:s,code:999}),void u.complete();y.subscribe(x=>{x.success?this.commonPutHttpWithRetry(x.data?.upload_url??"",this._getHeaderRequest(x.data?.cloudStorageHeaderObjs??[]),p).subscribe(C=>{C&&0==C.success?(u.next({success:0,message:"Error upload base64 to cdn!",data:s,code:999}),u.complete()):(u.next({success:1,message:"successful",data:x.data?.url??"",code:200}),u.complete())}):(u.next({success:0,message:"Error upload base64 to cdn!",data:s,code:999}),u.complete())})})}commonUploadLadiPageFile(o,s){return new Lo.c(l=>{let u=o.length;u<=0&&(l.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),l.complete());var v=this._commonGetAppendUrl("website_ladipage",s,u.toString(),"text/html","");if(!v)return l.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void l.complete();v.subscribe(g=>{1==g.success?this.commonPutHttp(g?.data?.upload_url??"",this._getHeaderRequest(g.data?.cloudStorageHeaderObjs??[]),o).subscribe(y=>{if(y&&y.hasOwnProperty("success")&&0==y.success)l.next({success:0,message:y.message,data:void 0,code:y.code}),l.complete();else{let C={success:1,message:"successful",data:g.data?this.convertServerFileDataToClientFileData(g.data):void 0,code:200};l.next(C),l.complete()}}):(l.next({success:0,message:g.message,data:void 0,code:g.code}),l.complete())})})}commonUploadForMarkResult(o,s,l){return new Lo.c(u=>{let p=o.size;if(p<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=this._commonGetAppendUrl("mark_result",s,p.toString(),l,"");if(!v)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();v.subscribe(g=>{1==g.success?this.commonPutHttp(g?.data?.upload_url??"",this._getHeaderRequest(g.data?.cloudStorageHeaderObjs??[]),o).subscribe(y=>{if(y&&y.hasOwnProperty("success")&&0==y.success)u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete();else{let C={success:1,message:"successful",data:g.data?this.convertServerFileDataToClientFileData(g.data):void 0,code:200};u.next(C),u.complete()}}):(u.next({success:0,message:g.message,data:void 0,code:g.code}),u.complete())})})}uploadToVimeoProgress(o,s,l){return!s||s.size<=0||ss(s.size)>2e3?(0,ar.of)({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}):this.commonUploadFile(o,s,l?.qrcode??"")}uploadToCdnQuestionRawMathTypeData(o){return this.commonUploadFile("question_math_type",o,"")}uploadToCdnForHomework(o){return this.commonUploadFile("homework",o,"")}uploadToCdnProgressForExamQuestionContent(o){return this.commonUploadFileProgress("exam_questions",o,"")}uploadToCdnProgressForTestbankQuestionAttachment(o){return this.commonUploadFileProgress("exam_question_attachment",o,"")}uploadToCdnProgressForTestbankPdf(o){return this.commonUploadFileProgress("exam_pdf",o,"")}uploadToCdnProgressForTestbankDocx(o){return this.commonUploadFileProgress("exam_docx",o,"")}uploadToCdnForExamEditor(o){return this.commonUploadFile("exam_editor",o,"")}uploadToCdnProgressForFrontendHomework(o){return this.commonUploadFileProgress("front_homework",o,"")}uploadToCdnProgressForFrontendExam(o){return this.commonUploadFileProgress("front_exam",o,"")}convertServerFileDataToClientFileData(o){return{extension:o.extension,index:void 0,lastModified:void 0,mimes:o.mimes,name:o.name,path:o.path,size:o.size,thumb:void 0,url:o.url,is_video:void 0,video_id:void 0,log_id:void 0,is_vimeo:void 0}}_commonGetAppendUrl(o,s,l,u,p){return"ppt"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForPptPost(this.encryptUploadRequest(s,l,u))):"homework"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForHomeworkPost(this.encryptUploadRequest(s,l,u))):"exam_questions"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamQuestionsPost(this.encryptUploadRequest(s,l,u))):"exam_question_attachment"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamQuestionAttachmentPost(this.encryptUploadRequest(s,l,u))):"exam_pdf"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamPdfPost(this.encryptUploadRequest(s,l,u))):"exam_docx"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamDocxPost(this.encryptUploadRequest(s,l,u))):"exam_editor"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamEditorPost(this.encryptUploadRequest(s,l,u))):"file_scan_test_offline"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMobileScanPost(this.encryptUploadRequest(s,l,u))):"file_scan_name_test_offline"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMobileScanNamePost(this.encryptUploadRequest(s,l,u))):"file_scan_test_error"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForWebScanErrorPost(this.encryptUploadRequest(s,l,u))):"get_public_upload_url_for_id_number"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForIdNumberPost(this.encryptUploadRequest(s,l,u))):"question_math_type"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlExamQuestionsDocxDataPost(this.encryptUploadRequest(s,l,u))):"get_public_upload_url_for_document_bank"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForDocumentBankPost(this.encryptUploadRequest(s,l,u))):"business_news"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForBusinessNewsPost(this.encryptUploadRequest(s,l,u))):"business_plugins"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForBusinessPluginsPost(this.encryptUploadRequest(s,l,u))):"front_homework"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontHomeworkPost(this.encryptUploadRequest(s,l,u))):"front_exam"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontExamPost(this.encryptUploadRequest(s,l,u))):"front_exam_mobile_qr"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontExamMobileQrPost(this.encryptUploadRequestForQrCode(p,s,l,u))):"front_qa_question"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontQaQuestionPost(this.encryptUploadRequest(s,l,u))):"qa_answer"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForQaAnswerPost(this.encryptUploadRequest(s,l,u))):"avatar"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForAvatarPost(this.encryptUploadRequest(s,l,u))):"website_ladipage"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForLadipagePost(this.encryptUploadRequest(s,l,u))):"report_error"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForErrorPost(this.encryptUploadRequest(s,l,u))):"mark_result"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMarkPost(this.encryptUploadRequest(s,l,u))):"admin"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForCommonAdminPost(this.encryptUploadRequest(s,l,u))):"admin_digitalize"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForDigitalizeAdminPost(this.encryptUploadRequest(s,l,u))):void 0}_getHeaderRequest(o){var s={};for(var l of o)null!=l.headerName&&null!=l.headerValue&&(s[l.headerName]=l.headerValue);return s}encryptUploadRequest(o,s,l){let u={fileName:o,fileSize:Number(s),mimetype:l};return this.encryptionHelper.payload(u)}encryptUploadRequestForQrCode(o,s,l,u){let p={fileName:s,fileSize:Number(l),mimetype:u,qrcode:o};return this.encryptionHelper.payload(p)}decryptUploadResponse(o){return new Lo.c(s=>{o.subscribe(l=>{if(!l.success||!l.data){let p={...l,data:void 0};return s.next(p),void s.complete()}let u=this.encryptionHelper.result(l);s.next(u),s.complete()})})}constructor(){super(),(0,f.A)(this,"encryptionHelper",(0,e.WQX)(Ap)),(0,f.A)(this,"s3EncryptSpaceService",(0,e.WQX)(nn.TZ))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var jp=se(5682),Mp=se(2583);let $p=(()=>{var t;class r{getImageWithPdf(o){var s=this;return(0,ge.A)(function*(){var l=[];try{var u=yield s.pdfToImageDataURLAsync(o);for(let p=0;p<u.length;p++)l.push(s.b64toFile(u[p],`${o.name}_${p}`))}catch{s.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}return l})()}b64toFile(o,s,l){var u="",_=[];try{l?(o=o.replace("data:"+l+";base64,",""),u=l):(o=o.replace("data:image/png;base64,",""),u="image/png");for(var v=window.atob(o),g=0;g<v.length;g+=512){for(var y=v.slice(g,g+512),x=new Array(y.length),C=0;C<y.length;C++)x[C]=y.charCodeAt(C);var I=new Uint8Array(x);_.push(I)}}catch{this.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}return new File(_,s,{type:u})}pdfToImageDataURLAsync(o){var s=this;return(0,ge.A)(function*(){return new Promise((l,u)=>{s.loadPdfJsScript().then((0,ge.A)(function*(){var p=[];try{const C=yield new Response(o).arrayBuffer(),I=s.document.createElement("canvas"),A=I.getContext("2d"),T=yield pdfjsLib.getDocument(new Uint8Array(C)).promise;for(let E=1;E<=T.numPages;E++){var _=yield T.getPage(E),v=1200/_.getViewport({scale:1}).width,y=_.getViewport({scale:v});I.height=y.height,I.width=y.width;const M={canvasContext:A,viewport:y};yield _.render(M).promise;var x=I.toDataURL();p.push(x)}T?.destroy(),l(p)}catch{s.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}}))})})()}loadPdfJsScript(){var o=this;return(0,ge.A)(function*(){return new Promise((s,l)=>{o.commonService.loadScriptPromises([{source:o.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:o.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"}]).then((0,ge.A)(function*(){s()})).catch(u=>{l(new Error("lang_core_lib_not_load"))})})})()}constructor(o,s,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"configService",void 0),(0,f.A)(this,"sAztCommonCdnService",void 0),(0,f.A)(this,"document",void 0),this.commonService=o,this.configService=s,this.sAztCommonCdnService=l,this.document=document}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(hn.R),e.KVO(jp.u),e.KVO(Mp.c))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const pu={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let _s;const Gp=new Uint8Array(16);function il(){if(!_s&&(_s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _s(Gp)}const ht=[];for(let t=0;t<256;++t)ht.push((t+256).toString(16).slice(1));const _u=function mu(t,r,n){if(pu.randomUUID&&!r&&!t)return pu.randomUUID();const o=(t=t||{}).random||(t.rng||il)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){n=n||0;for(let s=0;s<16;++s)r[n+s]=o[s];return r}return function fu(t,r=0){return(ht[t[r+0]]+ht[t[r+1]]+ht[t[r+2]]+ht[t[r+3]]+"-"+ht[t[r+4]]+ht[t[r+5]]+"-"+ht[t[r+6]]+ht[t[r+7]]+"-"+ht[t[r+8]]+ht[t[r+9]]+"-"+ht[t[r+10]]+ht[t[r+11]]+ht[t[r+12]]+ht[t[r+13]]+ht[t[r+14]]+ht[t[r+15]]).toLowerCase()}(o)};let hu=(()=>{var t;class r{getUuid(){return _u()}getSmallUuid(){let l="";for(let u=0;u<8;u++)l+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*Math.random())];return l}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Uo=(()=>{var t;class r extends Ae.H{uploadFile(o,s){return new Promise(l=>{this.checkCompressImage(o,u=>{this.fileUploadQueue=[],this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,u,this.qrUploadHashCode).subscribe(p=>{if(p.type!==Pe.hv.UploadProgress)if(1===p.success){const _={...p.data};l(_)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",p.message??"none")),l(null);else{let _=(p.loaded??0)/(p.total??1)*100,v=this.fileUploadQueue.find(g=>g.uuid==s);v?v.uploadProgress=_:this.fileUploadQueue.push({uuid:s,uploadProgress:0,fileName:o.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,u,this.qrUploadHashCode).subscribe(p=>{if(p.type!==Pe.hv.UploadProgress)if(1===p.success){const _={...p.data};l(_)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",p.message??"none")),l(null)})})})}onOpenFileDictionary(){return this.uploadActionsEvent.emit("SELECT_FILE"),!0}onFileSelected(o){this.uploadActionsEvent.emit("SELECTED");const s=o.target,l=s.files;l&&(this.emitFile(l),s.files=null)}onCancelSelect(o){this.uploadActionsEvent.emit("SELECTED")}onDrop(o){this.emitFile(o)}emitFile(o){return this.isDisabled?(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(o).find(u=>ss(u.size)>=this.limitSize)?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB")):Array.from(o).find(u=>this.isNotSupportedFile(u))?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile)):(this.isUploadFile=!0,this.isUploading.emit(this.isUploadFile),void this.checkConvertPdfToImages(Array.from(o),u=>{const p=u.map(_=>this.uploadFile(_,this.uuidService.getUuid()));Promise.all(p).then(_=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);let v=_.filter(this.commonService.notEmpty);this.emitUploadComplete(v)})}))):this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")??"")}checkConvertPdfToImages(o,s){if(!this.convertPdfToImages)return s(o);this.convertAllPdfToImages(o).then(l=>{s(l)})}convertAllPdfToImages(o){var s=this;return new Promise(function(){var l=(0,ge.A)(function*(u,p){let _=[];for(let v of o)if(nr(v.type))try{const g=1e3*s.convertPdfTimeout;let y=yield s.withTimeout(s.myPdfService.getImageWithPdf(v),g);_.push(...y)}catch{s.showErrorSnack("lang_common_convert_pdf_to_image_timeout"),u([])}else _.push(v);u(_)});return function(u,p){return l.apply(this,arguments)}}())}checkCompressImage(o,s){this.allowCompressImage?function su(t){return qt.apply(this,arguments)}(o).then(l=>{s(l)}):s(o)}isNotSupportedFile(o){const s=[this.notSupportedFile],l=o.name.split(".").pop()?.toLowerCase();return s.includes(`.${l}`)}withTimeout(o,s){return new Promise((l,u)=>{const p=setTimeout(()=>{u(new Error("Operation timed out"))},s);o.then(_=>{clearTimeout(p),l(_)}).catch(_=>{clearTimeout(p),u(_)})})}constructor(o,s,l,u){super(),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"apiUploadService",void 0),(0,f.A)(this,"myPdfService",void 0),(0,f.A)(this,"uuidService",void 0),(0,f.A)(this,"convertPdfTimeout",30),(0,f.A)(this,"fileType",void 0),(0,f.A)(this,"uploadToCdnMenu",void 0),(0,f.A)(this,"isDisabled",!0),(0,f.A)(this,"notSupportedFile",Qa.NONE),(0,f.A)(this,"limitSize",200),(0,f.A)(this,"allowCompressImage",!0),(0,f.A)(this,"convertPdfToImages",!1),(0,f.A)(this,"qrUploadHashCode",""),(0,f.A)(this,"showProgress",!1),(0,f.A)(this,"isUploading",new e.bkB),(0,f.A)(this,"uploadActionsEvent",new e.bkB),(0,f.A)(this,"isUploadFile",!1),(0,f.A)(this,"fileUploadQueue",[]),this.mobileWebviewService=o,this.apiUploadService=s,this.myPdfService=l,this.uuidService=u}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(j),e.rXU(du),e.rXU($p),e.rXU(hu))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],inputs:{convertPdfTimeout:"convertPdfTimeout",fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",convertPdfToImages:"convertPdfToImages",qrUploadHashCode:"qrUploadHashCode",showProgress:"showProgress"},outputs:{isUploading:"isUploading",uploadActionsEvent:"uploadActionsEvent"},features:[e.Vt3],decls:0,vars:0,template:function(o,s){},encapsulation:2})),r})();const Vp=["*"];function zp(t,r){1&t&&e.SdG(0,0,["*ngIf","!isUploadFile"])}function Bp(t,r){1&t&&(e.j41(0,"span",5),e.nrm(1,"azt-loading-ui"),e.k0s())}let gu=(()=>{var t;class r extends Uo{constructor(...o){super(...o),(0,f.A)(this,"uploadComplete",new e.bkB)}emitUploadComplete(o){o.length>0&&this.uploadComplete.emit(o[0])}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},features:[e.Vt3],ngContentSelectors:Vp,decls:6,vars:3,consts:[["formChoseFile",""],[1,"flex","items-center","justify-center","h-full",3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(o,s){if(1&o){const l=e.RV6();e.NAR(),e.j41(0,"div",1),e.bIt("click",function(){e.eBV(l);const p=e.sdS(2);return e.Njj(s.onOpenFileDictionary()&&p.click())}),e.j41(1,"input",2,0),e.bIt("change",function(p){return e.eBV(l),e.Njj(s.onFileSelected(p))})("cancel",function(p){return e.eBV(l),e.Njj(s.onCancelSelect(p))}),e.k0s(),e.DNE(3,zp,1,0,"ng-content",3),e.j41(4,"div"),e.DNE(5,Bp,2,0,"span",4),e.k0s()()}2&o&&(e.R7$(),e.FS9("accept",s.fileType),e.R7$(2),e.Y8G("ngIf",!s.isUploadFile),e.R7$(2),e.Y8G("ngIf",s.isUploadFile))},dependencies:[z.bT,we.R],encapsulation:2})),r})(),vu=(()=>{var t;class r{constructor(){(0,f.A)(this,"fileDrop",new e.bkB),(0,f.A)(this,"preventBodyDrop",!0),(0,f.A)(this,"active",!1)}onDrop(o){o.preventDefault(),this.active=!1;const{dataTransfer:s}=o;if(s?.items){const l=[];for(let u=0;u<s.items.length;u++)"file"===s.items[u].kind&&s.items[u].getAsFile()&&l.push(s.items[u].getAsFile());s.items.clear(),Array.isArray(l)&&this.fileDrop.emit(this.removeNullFile(l))}else{const l=s?.files;s?.clearData(),l&&this.fileDrop.emit(Array.from(l))}}removeNullFile(o){for(var s=[],l=0;l<o.length;l++)o[l]&&s.push(o[l]);return s}onDragOver(o){o.stopPropagation(),o.preventDefault(),this.active=!0}onDragLeave(o){this.active=!1}onBodyDragOver(o){this.preventBodyDrop&&(o.preventDefault(),o.stopPropagation())}onBodyDrop(o){this.preventBodyDrop&&o.preventDefault()}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275dir",e.FsC({type:t,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(o,s){1&o&&e.bIt("drop",function(u){return s.onDrop(u)})("dragover",function(u){return s.onDragOver(u)})("dragleave",function(u){return s.onDragLeave(u)})("dragover",function(u){return s.onBodyDragOver(u)},!1,e.N_X)("drop",function(u){return s.onBodyDrop(u)},!1,e.N_X),2&o&&e.AVh("drop-zone-active",s.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}})),r})();const lr=["*"];function cr(t,r){1&t&&e.SdG(0,0,["*ngIf","!isUploadFile"])}function Pp(t,r){if(1&t&&(e.j41(0,"div",8)(1,"h5",9),e.EFF(2),e.k0s(),e.j41(3,"div",10),e.nrm(4,"progress",11),e.k0s()()),2&t){const n=r.$implicit;e.R7$(2),e.JRh(n.fileName),e.R7$(2),e.FS9("value",n.uploadProgress)}}function hs(t,r){if(1&t&&(e.qex(0),e.j41(1,"span",6),e.nrm(2,"azt-loading-ui"),e.k0s(),e.DNE(3,Pp,5,2,"div",7),e.bVm()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.fileUploadQueue)}}function Lp(t,r){1&t&&(e.j41(0,"span",6),e.nrm(1,"azt-loading-ui"),e.k0s())}function yu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,hs,4,1,"ng-container",5)(2,Lp,2,0,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.showProgress)("ngIfElse",n)}}let gs=(()=>{var t;class r extends Uo{constructor(...o){super(...o),(0,f.A)(this,"uploadComplete",new e.bkB),(0,f.A)(this,"files",void 0)}emitUploadComplete(o){this.uploadComplete.emit(o)}ngOnInit(){this.files&&this.files.length>0&&this.emitFile(this.files)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-upload-multiple-box"]],inputs:{files:"files"},outputs:{uploadComplete:"uploadComplete"},features:[e.Vt3],ngContentSelectors:lr,decls:5,vars:3,consts:[["formChoseFile",""],["notShowProgress",""],[1,"flex","items-center","justify-center","h-full",3,"appDropZone","click"],["type","file","id","box-left-file-input","multiple","",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"w-4","h-4","inline-block","mr-2"],["class","w-48",4,"ngFor","ngForOf"],[1,"w-48"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","background-color","#1e40af",3,"value"]],template:function(o,s){if(1&o){const l=e.RV6();e.NAR(),e.j41(0,"div",2),e.bIt("appDropZone",function(p){return e.eBV(l),e.Njj(s.onDrop(p))})("click",function(){e.eBV(l);const p=e.sdS(2);return e.Njj(p.click())}),e.j41(1,"input",3,0),e.bIt("change",function(p){return e.eBV(l),e.Njj(s.onFileSelected(p))})("cancel",function(p){return e.eBV(l),e.Njj(s.onCancelSelect(p))})("cancel",function(p){return e.eBV(l),e.Njj(s.onCancelSelect(p))}),e.k0s(),e.DNE(3,cr,1,0,"ng-content",4)(4,yu,4,2,"div",4),e.k0s()}2&o&&(e.R7$(),e.FS9("accept",s.fileType),e.R7$(2),e.Y8G("ngIf",!s.isUploadFile),e.R7$(),e.Y8G("ngIf",s.isUploadFile))},dependencies:[z.Sq,z.bT,vu,we.R],styles:['.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:10px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']})),r})();const vs=(t,r)=>[t,r];let bu=(()=>{var t;class r extends Ae.H{uploadMultipleFiles(o){console.log(o)}uploadSingleFile(o){console.log(o)}ngOnInit(){super.ngOnInit()}constructor(){super(),(0,f.A)(this,"allUploadToCdnMenuTypes",Oo),(0,f.A)(this,"allUploadFileTypes",Ka)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-demo"]],features:[e.Vt3],decls:8,vars:16,consts:[[1,"p-3"],[3,"uploadComplete","uploadToCdnMenu","fileType","convertPdfTimeout","convertPdfToImages","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"azt-upload-multiple-box",1),e.bIt("uploadComplete",function(u){return s.uploadMultipleFiles(u)}),e.j41(2,"div",2),e.EFF(3,"Upload nhi\u1ec1u file \u1ea2nh, Pdf s\u1ebd convert qua \u1ea3nh"),e.k0s()(),e.nrm(4,"br"),e.j41(5,"azt-upload-single-box",1),e.bIt("uploadComplete",function(u){return s.uploadSingleFile(u)}),e.j41(6,"div",2),e.EFF(7,"Upload 1 file \u1ea3nh, pdf s\u1ebd convert qua \u1ea3nh"),e.k0s()()()),2&o&&(e.R7$(),e.Y8G("uploadToCdnMenu",s.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(10,vs,s.allUploadFileTypes.IMAGE,s.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!1)("showProgress",!0),e.R7$(4),e.Y8G("uploadToCdnMenu",s.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(13,vs,s.allUploadFileTypes.IMAGE,s.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!0)("showProgress",!0))},dependencies:[gu,gs],encapsulation:2})),r})();var rl=se(345);let ys=(()=>{var t;class r{constructor(o){(0,f.A)(this,"sanitized",void 0),this.sanitized=o}transform(o){return this.sanitized.bypassSecurityTrustHtml(o)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(rl.up,16))}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"safeHtml",type:t,pure:!0,standalone:!0})),r})(),Ft=(()=>{var t;class r{constructor(o){(0,f.A)(this,"sanitized",void 0),this.sanitized=o}transform(o,s,l){if(!o)return o;let u=s??200;if(o.length<u)return o;let p=o;return l&&(p=p.replaceAll(l,"")),p.substring(0,u)+"..."}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(rl.up,16))}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"trunc",type:t,pure:!0,standalone:!0})),r})(),Up=(()=>{var t;class r{transform(o){if(isNaN(o)||o<0)return"00:00";o=Math.round(o);const s=Math.floor(o/60),l=o%60;return`${s<10?"0"+s:s.toString()}:${l<10?"0"+l:l.toString()}`}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"secondsToTime",type:t,pure:!0,standalone:!0})),r})();class Ge{static renderMathInElement(r){MathJax.typesetPromise([r]).then(()=>{})}static markdownToHtml(r){let n=document.createElement("div");n.innerHTML=r;let o=new showdown.Converter({headerLevelStart:3,tables:!0});return MathJax.typesetPromise([n]).then(()=>{}),o.makeHtml(n.innerHTML)}static parseIncompleteJson(r){if(!r||""==r.trim()||!/^[{[].*/.test(r.trim()))return r;r.startsWith("```json")&&(r=r.substring(7).trim()),r.endsWith("```")&&(r=r.substring(0,r.length-3));try{return JSON.parse(r)}catch{}r.endsWith(",")&&(r=r.substring(0,r.length-1));let n=[],o=['"',"[","{"],s=['"',"]","}"];for(let l=0;l<r.length;l++){if(l>0&&"\\"==r.charAt(l-1))continue;let p=r.charAt(l);if('"'==n[n.length-1]){'"'==p&&n.splice(n.length-1);continue}if(o.includes(p)){n.push(p);continue}let _=s.indexOf(p);_>=0&&n[n.length-1]==o[_]&&n.splice(n.length-1)}if(n.length>0)for(let l=n.length-1;l>=0;l--)r+=s[o.indexOf(n[l])];try{return JSON.parse(r)}catch{}return null}static fileToBase64(r){return new Promise((n,o)=>{const s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=()=>{o(new Error("Failed to convert file to Base64."))},s.readAsDataURL(r)})}static base64ToObjectURL(r,n){const o=atob(r),s=[];for(let u=0;u<o.length;u+=512){const p=o.slice(u,u+512),_=new Array(p.length);for(let g=0;g<p.length;g++)_[g]=p.charCodeAt(g);const v=new Uint8Array(_);s.push(v)}const l=new Blob(s,{type:n});return URL.createObjectURL(l)}static distinctArray(r){return Array.from(new Set(r))}static getTextFromMarkdown(r){return r.replace(/(?:__|[*#])|\[(.*?)\]\(.*?\)|<[^>]*>/g,"$1").replace(/\n+/g," ").trim()}static getFileExt(r){let n=r.split(".");return n.length>1?n[n.length-1].trim().toLowerCase():""}static isImageFile(r){if(!r)return!1;const o=r.slice((Math.max(0,r.lastIndexOf("."))||1/0)+1).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff"].includes(`.${o}`)}static parseJson(r){return JSON.parse(r.replaceAll(/},\s*]/g,"}]"))}static minusToCamelCase(r){return r.replace(/-([a-z0-9])/g,(n,o)=>o.toUpperCase())}static replaceAllBase64Urls(r,n=""){return r.replace(/data:(?:image\/\w+|audio\/\w+|video\/\w+);base64,[\w\+/0-9]+(?:=[\w\+/0-9]{2})?(?:=[\w\+/0-9])?/,n)}static loadScript(r){return new Promise((n,o)=>{const s=document.createElement("script");s.src=r,s.type="text/javascript",s.async=!0,s.onload=()=>{n()},s.onerror=l=>{console.error(`Failed to load script from ${r}`,l),o(new Error(`Script load error: ${r}`))},document.head.appendChild(s)})}static downloadTextAsFile(r,n){const o=n??this.getFormattedDate(),s=new Blob([r],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l)}static uploadTextFile(r){const n=document.createElement("input");n.type="file",n.accept=".txt",n.addEventListener("change",o=>{const s=o.target;if(!s.files||0===s.files.length)return;const l=s.files[0],u=new FileReader;u.onload=p=>{const _=p.target?.result;r(_)},u.readAsText(l)}),n.click()}static getFormattedDate(){const r=new Date;return`${String(r.getDate()).padStart(2,"0")}-${String(r.getMonth()+1).padStart(2,"0")}-${r.getFullYear()}-${String(r.getHours()).padStart(2,"0")}-${String(r.getMinutes()).padStart(2,"0")}.txt`}static wrapWords(r,n){const o=r.split(" ");let s="",l=0;return o.forEach((u,p)=>{s+=u+" ",l++,l===n&&(s+="\n",l=0)}),s.trim()}static removeVietnameseAccents(r){return r.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}static zipFiles(r,n,o){var s=this;return(0,ge.A)(function*(){const l=new JSZip;let u=0;for(const _ of r){if(_.isText)l.file(_.filename,_.url);else{const g=(yield s.fetchUrlAsBase64(_.url)).split(",")[1];l.file(_.filename,g,{base64:!0})}u++,o&&o(u)}return yield l.generateAsync({type:"blob"})})()}static fetchUrlAsBase64(r){return(0,ge.A)(function*(){const o=yield(yield fetch(r)).blob();return new Promise((s,l)=>{const u=new FileReader;u.onloadend=()=>s(u.result),u.onerror=l,u.readAsDataURL(o)})})()}static urlToFile(r,n){var o=this;return(0,ge.A)(function*(){let l=(yield o.fetchUrlAsBase64(r)).split(",")[1];const u=atob(l);let p=u.length;const _=new Uint8Array(p);for(;p--;)_[p]=u.charCodeAt(p);let v=Ge.getContentType(n);return new File([_],n,{type:v})})()}static getContentType(r){const n=r.split(".").pop()?.toLowerCase();return n?{txt:"text/plain",script:"text/json",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",mp3:"audio/mpeg",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",zip:"application/zip",rar:"application/x-rar-compressed"}[n]:void 0}static convertToTitleCase(r){return r.toLowerCase().replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}static toCamelCase(r){return Ge.removeVietnameseAccents(r).replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(n,o)=>0===o?n.toLowerCase():n.toUpperCase()).replace(/[^a-zA-Z0-9]+/g,"")}static createDemoDataForJsonSchema(r){return function o(s){switch(s.type){case"string":return"demo string";case"number":return 42;case"boolean":return!0;case"object":const l={};if(s.properties)for(const u in s.properties)l[u]=o(s.properties[u]);return l;case"array":return[o(s.items)];default:return null}}(JSON.parse(r))}static compileTemplate(r,n){let o=r;const s=[...o.matchAll(/\$\(([a-zA-Z]+):([^\$]+)\)\$/g)],l=[];for(const y of s){o=o.replaceAll(y[0],"").trim();const x=y[2].split("|").map(C=>this.compileTemplate(C.trim(),n));for(let C=0;C<x[0].length;C++){const I=[],A=[];for(const T of x)A.push(T[C]);I.push(y[1].trim()),I.push(...A),l.push(I)}}o=o.replaceAll(/\*for="([a-zA-Z0-9_-]+) of \{([a-zA-Z0-9._-]+)\}"/g,'id="sys___loop-node" data-for="$2=>$1"'),o=o.replaceAll(/\*for="([a-zA-Z0-9_-]+) of ([a-zA-Z0-9._-]+)"/g,'id="sys___loop-node" data-for="$2=>$1"');let u=document.createElement("div");for(u.innerHTML=o;;){let y=u.querySelector("#sys___loop-node");if(!y)break;let x=y.getAttribute("data-for").split("=>");y.removeAttribute("data-for"),y.removeAttribute("id");let C=x[0],I=x[1],A=x[0].split("."),T=[];if(1==A.length)T=JSON.parse(n.get(x[0])??"[]");else{let Y=JSON.parse(n.get(A[0]));for(var p=1;p<A.length;p++)Y=Y[A[p]];T=Y??[]}let E=y.parentNode,M=y.outerHTML,O=M.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),$=[];for(let Y of O)$.push(Y[1]);let X=-1;for(let Y of T){X++;let U=M;for(let H of $){if("index"==H){U=U.replaceAll("{index}",X+"");continue}let ie,ue=H.split(".");for(let de of ue){if(!ie&&de==x[1]){ie=Y;continue}let le=!1;de.endsWith("[index]")&&(de=de.split("[")[0],le=!0),ie&&(ie=ie[de]),ie&&le&&(ie=ie[X])}ie||(ie=""),U=U.replaceAll(`{${H}}`,ie)}U=U.replaceAll("[index]",`[${X}]`),U=U.replaceAll(`[${I}]`,`${C}[${X}]`);let te=document.createElement("div");te.innerHTML=U,E?.insertBefore(te.firstChild,y)}E?.removeChild(y)}let _=u.innerHTML,v=_.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),g=[];for(let y of v)g.push(y[1]);for(let y of g){let x=y.split(".");if(x.length>1){let C=JSON.parse(n.get(x[0])),I=0;for(let A of x)0!=I?(C=C[A],I++):I++;_=_.replaceAll(`{${y}}`,C??"")}else _=_.replaceAll(`{${y}}`,n.get(x[0])??"")}for(const y of l)"replace"===y[0]&&(_=_.replaceAll(y[1],y[2]));return _}static extractProperties(r,n){return r?Object.keys(r).flatMap(o=>{const s=r[o],l=Array.isArray(s)?"array":typeof s,u={name:o,type:l,level:n};return"object"!==l||null===s||Array.isArray(s)?[u]:[u,...this.extractProperties(s,n+1)]}):[]}}var En=se(8910),xu=se(5084),bs=se(2102),sl=se(9631);class xs{readUrl(r){return new Promise(n=>{Ge.urlToFile(r,"filename").then(o=>{let s=this.readFile(o);n(s)})})}}class al{constructor(r){(0,f.A)(this,"iamges",void 0),this.iamges=r}render(r){let n=r;for(let o of this.iamges){let s=o.cssStyle?o.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";n=n.replaceAll("[img:$"+o.id+"$]",`<img id="${o.id}" src="${o.link}" style="${s}">`)}return n}}class Xp{constructor(r,n=!1){(0,f.A)(this,"mathMap",void 0),(0,f.A)(this,"raw",void 0),this.mathMap=r,this.raw=n}render(r){let n=r,s=n.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let u=l.value[0],p=l.value[1],_=this.mathMap.get(p),v="";if(_){let g=this.isPureTextMathML(_.str);if(""!=g)v=g;else{const y=document.createElement("span");y.id=p,y.innerHTML=this.cleanMathML(_.str),this.raw&&_.raw&&y.setAttribute("data-azt-math-raw",_.raw),v=y.outerHTML}}n=n.replace(u,v)}return n}cleanMathML(r){let n=r;return n=n.replaceAll('display="block"',""),n=n.replaceAll(/<\?xml[^>]+\?>/g,""),n=n.replaceAll(/\s*xmlns="[^"]+"/g,""),n=n.replaceAll("\n",""),n}isPureTextMathML(r){let o=(new DOMParser).parseFromString(r,"application/xml");if(o.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let s=o.documentElement.children,l=["mi","mn","mo","ms","mspace","mtext"],u="";for(let _=0;_<s.length;_++){let v=s[_];if(l.indexOf(v.tagName.toLowerCase())<0)return"";u+=v.textContent?.trim()??""}return/^[0-9.,-]+$/.test(u.replaceAll("\u2212","-"))?u:""}}class Cu{render(r){let n=r;n=n.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let s=n.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let u=l.value[0],p=l.value[1],_=u.split(":")[0].split("!");_.shift(),_.filter(v=>"a"==v).length>0&&(p=p.toUpperCase());for(let v=_.length-1;v>=0;v--){let g=_[v];p="hl"==g||"cl"==g?`<span class='cl'>${p}</span>`:`<${g}>${p}</${g}>`}n=n.replace(u,p)}return n}clean(r){let n=r.split("\n"),o=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,s=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,l=[],u=0;for(let _ of n){let v=_;s.test(n[u].replaceAll(o,"$1"))&&(n[u]=n[u].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),v=n[u]);let x,g=v.matchAll(o),y=0;for(;;){let C=g.next();if(C.done)break;let I=C.value[0],A=I.indexOf(":"),T=I.substring(1,A),M=(C.value.index??0)-y,O=M+C.value[1].length;x&&M==x.e&&x.style==T?x.e=O:(x={lineIdx:u,s:M,e:O,style:T},l.push(x)),y+=A+4}n[u]=v.replaceAll(o,"$1"),u++}return{res:n.join("\n"),styles:l}}applyStyle(r,n,o=!1){for(let s=r.length-1;s>=0;s--){let l=r[s],u=n.filter(_=>_.lineIdx==l.lineIdx&&this.isRangeIntersec(_.s,_.e,l.s,l.e??999999)),p=[];for(let _ of u){let v=_.s>=l.s?_.s:l.s,g=_.e<=(l.e??9999999)?_.e:l.e??9999999;v-=l.s,g-=l.s;let y=o?_.style:_.style.replaceAll("!hl","").replaceAll("!cl","");v<g&&""!=y&&l.text&&""!=(l.text.substring(v,g)??"").trim()&&(p.push({idx:v,str:`[${y}:$`}),p.push({idx:g,str:"$]"}))}p.sort((_,v)=>{let g=v.idx-_.idx;return 0!=g?g:v.str.length-_.str.length});for(let _ of p)l.text=l.text?.substring(0,_.idx)+_.str+l.text?.substring(_.idx)}}getAnsStyle(r,n,o){if(!n)return"";let s=[],l={...n};this.applyStyle([l],o,!0),l.text!=n.text&&""==l.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&s.push("!fl");for(let _ of o)_.lineIdx==n.lineIdx&&_.s<=n.b&&n.b<_.e&&s.push(_.style);let p=s&&s.length>0?s.join():"";return p.indexOf("!u")>=0||p.indexOf("!b")>=0||p.indexOf("!hl")>=0||p.indexOf("!cl")>=0||p.indexOf("!fl")>=0?p:""}isRangeIntersec(r,n,o,s){return r<=o&&o<=n||o<=r&&r<=s}getStyleScore(r){let n=0;return r.indexOf("!cl")>=0&&(n+=8),r.indexOf("!u")>=0&&(n+=4),r.indexOf("!i")>=0&&(n+=2),r.indexOf("!b")>=0&&(n+=1),n}}class gi{constructor(r){(0,f.A)(this,"infos",void 0),this.infos=r}render(r,n="\n"){let s=r.split(n),l=[],u=[],p="";for(let _ of s){let v=_;if(v.trim().startsWith("[*")&&v.trim().endsWith("*]")){let g=v.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(g.value){u.length>0&&(l.push(`<table class="q-table ${p}">${u.join("")}</table>`),u=[]);let x=this.infos.get(+g.value[1]);p=x&&x.borderTopSize>0?"border-1":"border-0",v=v.replace(g.value[0],"[*")}let y=v.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");y=y.replaceAll("|","</td><td>"),u.push(y)}else u.length>0&&(l.push(`<table class="q-table ${p}">${u.join("")}</table>`),u=[]),l.push(v)}return u.length>0&&l.push(`<table class="q-table ${p}">`+u.join("")+"</table>"),l.join(n)}}class Cs extends xs{constructor(r=!0){super(),(0,f.A)(this,"wmf",void 0),r&&(this.wmf=new WMFConverter)}readFile(r){return new Promise(n=>{this.read(r,!1,o=>{n(o.text)})})}readFileInputEventAsArrayBuffer(r,n){let o=new FileReader;o.onload=function(s){n(s.target.result)},o.readAsArrayBuffer(r)}read(r,n,o,s,l){let u=this,p=(_,v)=>{s&&s(_,v,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(r,function(_){azotaDocx.readDocx(_,p).then(function(v){console.log(v);for(let x of v.data)"img"==x.type&&("image/x-wmf"==x.contentType||"image/x-emf"==x.contentType?u.convert(x):x.value="data:"+x.contentType+";base64, "+x.value,!x.cssStyle&&x.height&&x.width&&"EMU"==x.measureUnit)&&(x.cssStyle=`width:${+x.width/12700}pt;height:${+x.height/12700}pt;margin-top:0px;`);let g=new Map,y=0;for(let x of v.data)"img"==x.type&&x.cropInfo&&g.set(y,1),y++;if(o&&0==g.size)o(u.parse(v,n));else{y=0;for(let x of v.data){if("img"==x.type&&x.cropInfo){const C=y,I=document.createElement("img");I.src=x.value,I.onload=()=>{u.cropImage(x,I),g.delete(C),0==g.size&&o&&o(u.parse(v,n))},I.onerror=()=>{g.delete(C),0==g.size&&o&&o(u.parse(v,n))}}y++}}}).catch(v=>{l&&l(v.message)})})}parseText(r,n=!1){let o=r.split("\n");o=this.processUnderlineAns(o);let s=o.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),l=s,u=new Cu,p=[];if(n){let _=u.clean(s);s=_.res,p=_.styles}else s=u.render(s);return{text:s,orgText:l,images:[],mathMap:new Map,tableMap:new Map,styles:p}}parse(r,n=!1){let o="",s=[],l=new Map,u=new Map,p=[];for(let C of r.data)if("img"==C.type)s.push({id:C.key,link:C.value,cssStyle:C.cssStyle}),C.cssStyle&&C.cssStyle.split(";").length>2&&p.push([`^\\[img:\\$${C.key}\\$\\]`,`[img:$${C.key}$]\n`]);else if("mathml"==C.type){let I=+C.key.split("_")[1];l.set(C.key,{id:I,str:C.value,raw:C.docx})}else"table"==C.type&&u.set(C.position,C);let _=[],v=-1;for(let C of r.lines){if(v++,0==C.length)continue;let I="";if(Array.isArray(C[0])&&Array.isArray(C[C.length-1])&&Array.isArray(C[Math.floor(C.length/2)])){let T=r.data.filter(O=>O.position==v&&"table"==O.type)[0],E=T?`!!${T.position}!!:`:"";I=T&&+T.borderBottomSize>0||_.length>0&&_[_.length-1].startsWith("[*")?`[*${E} `+C.map(O=>O.map($=>$.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":C.map(O=>O.map($=>$.join("")).join("\n")).join(" \t ")}else I=C.join("");for(let T of p)I=I.replaceAll(new RegExp(T[0],"g"),T[1]);let A=I.split("\n");for(let T of A)_.push(T)}_=this.processUnderlineAns(_),o=_.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let g=o,y=new Cu,x=[];if(n){let C=y.clean(o);o=C.res,x=C.styles}else o=y.render(o),o=new al(s).render(o),o=new Xp(l).render(o),o=new gi(u).render(o);return{text:o,orgText:g,images:s,mathMap:l,tableMap:u,styles:x}}processUnderlineAns(r){let n=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,o=0,s=[];for(let l of r){let u=l;if(u=u.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(u)&&""!=u.trim()&&o>0){u=u.replaceAll(/[\s.]+/g,"");let p=u.indexOf("*"),_=0;if(u=u.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(u)>=0){let v=r[o-1].match(n);if(v&&u.length==v.length){for(let y of v)r[o-1]=r[o-1].replace(y,y.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${p==_?"*":""}${u.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=r[o-1],u=u.substring(1),_++;o++;continue}}}s.push(l),o++}return s}convert(r){return new Promise(n=>{if("image/x-wmf"==r.contentType)r.value=this.wmf.toPNG("data:"+r.contentType+";base64, "+r.value),n();else{let l=new ToContext2D(0,1),u=this.decodeBase64(r.value);try{FromEMF.Parse(u,l)}catch{}let p=this.scaleCanvas(l.canvas,200,200);r.value=p.toDataURL(),n()}})}decodeBase64(r){return Uint8Array.from(atob(r),function(n){return n.charCodeAt(0)})}scaleCanvas(r,n,o){let s=document.createElement("canvas");return s.width=n,s.height=o,s.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,n,o),s}cropImage(r,n){if(!r.cropInfo)return;let o=r.cropInfo.left?+r.cropInfo.left:0,s=r.cropInfo.top?+r.cropInfo.top:0,l=r.cropInfo.right?+r.cropInfo.right:0,u=r.cropInfo.bottom?+r.cropInfo.bottom:0;if(o+s+l+u==0)return;let p=n.width,_=n.height,v=o*p/1e5,g=s*_/1e5,C=p-l*p/1e5-v,I=_-u*_/1e5-g;const A=document.createElement("canvas");A.width=C,A.height=I,A.getContext("2d")?.drawImage(n,v,g,C,I,0,0,C,I),r.value=A.toDataURL()}}class vi extends xs{readFile(r){return new Promise((n,o)=>{const s=new FileReader;s.onload=()=>{s.result?n(`<img src="${s.result}">`):o(new Error("Failed to read file."))},s.onerror=()=>{o(new Error("Error occurred while reading the file."))},s.readAsDataURL(r)})}}class Ss extends xs{readFile(r){return new Promise(n=>{const o=new FileReader;o.onload=function(){var s=(0,ge.A)(function*(l){n("")});return function(l){return s.apply(this,arguments)}}(),o.readAsArrayBuffer(r)})}}function Su(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function ks(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function yi(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function ll(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function ku(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,ks,7,0,"div",13)(4,yi,3,4,"span",14)(5,ll,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(s))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isReading),e.R7$(),e.Y8G("ngIf",!o.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!o.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let ws=(()=>{var t;class r{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",s=>{if(this.err="",s.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,u={file:s,name:this.name,content:""};switch(this.files.push(u),Ge.getFileExt(s.name)){case"pdf":_=new Ss;break;case"docx":_=new Cs;break;case"jpg":case"png":case"jpeg":_=new vi}this.isReading=!0,this.onStartReading.emit(),_?.readFile(s).then(v=>{u.content=v,this.isReading=!1,this.onAddFile.emit(u)})})},200)}remove(o){this.files.splice(o,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(o,s){1&o&&(e.DNE(0,Su,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,ku,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&o&&(e.Y8G("ngIf",s.err),e.R7$(),e.Mz_("id","dropzone-basic-",s.name,""),e.R7$(8),e.Y8G("ngForOf",s.files))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.qT,N.cb,N.cV,Ft]})),r})();const wu=["startTime"];function Nu(t,r){if(1&t&&(e.j41(0,"div",5),e.nrm(1,"div",6),e.nI1(2,"safeHtml"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,n.value.desc),e.npT)}}function Eu(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Iu(t,r){if(1&t&&(e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Eu,1,0,"i",8),e.k0s(),e.nrm(4,"input",9),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function Au(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Tu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Au,1,0,"i",8),e.k0s(),e.j41(4,"div")(5,"mat-form-field",11)(6,"input",12),e.bIt("click",function(s){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(s.stopPropagation())}),e.k0s(),e.j41(7,"a",13),e.bIt("click",function(s){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(s.stopPropagation())}),e.nrm(8,"i",14),e.k0s(),e.j41(9,"ngx-mat-datetime-picker",15,0)(11,"ngx-mat-datepicker-actions")(12,"a",16),e.EFF(13,"Cancel"),e.k0s(),e.j41(14,"a",17),e.EFF(15,"OK"),e.k0s()()()()()()}if(2&t){const n=e.sdS(10),o=e.XpG().$implicit,s=e.XpG();e.R7$(2),e.SpI(" ",o.value.label," "),e.R7$(),e.Y8G("ngIf",o.value.desc),e.R7$(3),e.FCK("name","",s.nodeData.id,"-",o.key,""),e.Y8G("ngxMatDatetimePicker",n)("value",o.value.data),e.R7$(3),e.Y8G("touchUi",!0)("showSeconds",!1)}}function fo(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function cl(t,r){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function ul(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,fo,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,cl,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function Yp(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Hp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Yp,1,0,"i",8),e.k0s(),e.j41(4,"textarea",21),e.bIt("input",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.autoResize(s.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function ur(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Wp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,ur,1,0,"i",8),e.k0s(),e.j41(4,"app-file-control",22),e.bIt("onStartReading",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onStartReadingFile())})("onAddFile",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.onAddFile(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",o.nodeData.id+"-"+n.key)}}function Fu(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Ru(t,r){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function qe(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Fu,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,Ru,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",o.lstKeys)}}function dl(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Nu,3,3,"div",4)(2,Iu,5,6,"div",4)(3,Tu,16,9,"div",4)(4,ul,6,5,"div",4)(5,Hp,6,6,"div",4)(6,Wp,5,3,"div",4)(7,qe,6,5,"div",4),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}let Ns=(()=>{var t;class r{set data(o){this.nodeData=o}constructor(o,s){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"startTime",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB),this.ngZone=o,this.appService=s}ngOnInit(){let o=!1;for(let s of this.nodeData.conf)s.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+s.key)??"","key"==s.value.type&&(o=!0);o&&this.appService?.listKeys().subscribe(s=>{this.lstKeys=s}),setTimeout(()=>{document.querySelectorAll(".form-node-renderred textarea").forEach(l=>{this.autoResize(l)})},200)}autoResize(o){o.style.height="50px",o.style.overflowY="hidden",o.style.height=o.scrollHeight+10+"px"}showInfo(o){}openDateTimePicker(){this.startTime?.open()}onAddFile(o){this.onUploaded.emit(o)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],viewQuery:function(o,s){if(1&o&&e.GBs(wu,5),2&o){let l;e.mGM(l=e.lsd())&&(s.startTime=l.first)}},inputs:{appId:"appId",data:"data"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[["startTime",""],[1,"form-node-renderred"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[3,"innerHTML"],[1,"form-label"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],["appearance","outline"],["type","text","matInput","",3,"click","ngxMatDatetimePicker","value","name"],["matSuffix","",2,"font-size","18px",3,"click"],[1,"bx","bx-calendar"],[3,"touchUi","showSeconds"],["ngxMatDatepickerCancel","",1,"mr-3"],["ngxMatDatepickerApply",""],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(o,s){1&o&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,dl,8,7,"div",3),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngForOf",s.nodeData.conf))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,ws,ys,En.T_,bs.RG,bs.rl,bs.yw,sl.fS,sl.fg,En.Hw,En.m7,En.yF,En.HF,En.gx,En.Uq,xu.X6]})),r})();function dr(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",3)(1,"img",4),e.bIt("mousedown",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.setSelection(s))}),e.k0s()()}if(2&t){const n=r.$implicit,o=r.index,s=e.XpG();e.ZvI("scene-layer scene-mode-player-",s.ratio916?"9-16":"16-9",""),e.Mz_("id","dom-",n.objName,""),e.R7$(),e.ZvI("s-element player scene-mode-player-",s.ratio916?"9-16":"16-9"," h-100"),e.Y8G("src",s.ratio916?s.demo916[o]:s.demo169[o],e.B4B)}}function ju(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"span",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.play())}),e.k0s(),e.j41(2,"span",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.resetPos())}),e.k0s(),e.j41(3,"span",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.edit())}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px cursor-pointer me-3"),e.R7$(2),e.ZvI("tf-icons bx bx-",n.isEditMode?"x":"pencil"," bx-22px cursor-pointer me-3")}}let Es=(()=>{var t;class r{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"mode","editor"),(0,f.A)(this,"lstObj",[]),(0,f.A)(this,"animName",""),(0,f.A)(this,"ratio916",!1),(0,f.A)(this,"demo169",["/ai-mod-assets/images/demo-16-9.png","/ai-mod-assets/images/demo-16-9-1.png"]),(0,f.A)(this,"demo916",["/ai-mod-assets/images/demo-9-16.png","/ai-mod-assets/images/demo-9-16-1.png"]),(0,f.A)(this,"info",""),(0,f.A)(this,"projectId","ObjAnim"),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"isEditMode",!1),(0,f.A)(this,"animObjs",[]),(0,f.A)(this,"canMove",{}),(0,f.A)(this,"startPos",[0,0]),(0,f.A)(this,"curTranslate",[]),(0,f.A)(this,"isDrag",!1),(0,f.A)(this,"obj",void 0),(0,f.A)(this,"curIdx",0)}set conf(o){let s=document.createElement("div");s.innerHTML=o;let l=s.querySelector("anim-editor");if(l){let u=JSON.parse(l.innerHTML);this.varname=l.getAttribute("var-name")??"",this.animName=u.animName,this.lstObj=u.listObj}}ngAfterViewInit(){localStorage.removeItem("theatre-0.4.persistent");let s=!1;this.projectId="ObjAnim"+(new Date).getTime();try{Theatre.studio.onSelectionChange(l=>{this.obj=l[0],this.obj&&(this.curIdx=this.lstObj.findIndex(u=>u.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),s=!0}catch{Ge.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js").then(()=>{Theatre.studio.initialize(),Theatre.studio.onSelectionChange(u=>{this.obj=u[0],this.obj&&(this.curIdx=this.lstObj.findIndex(p=>p.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),this.loadAnim()})}s&&this.loadAnim(),this.info=JSON.stringify(this.lstObj,null,2)}setSelection(o){Theatre.studio.setSelection([this.animObjs[o]])}play(){this.sheet&&(this.isPlaying?(this.isPlaying=!1,this.sheet.sequence.pause()):(this.isPlaying=!0,this.sheet.sequence.play({iterationCount:1/0})))}edit(){this.isEditMode?(this.isEditMode=!1,Theatre.studio.ui.hide()):(this.isEditMode=!0,Theatre.studio.ui.restore())}loadAnim(){localStorage.removeItem("theatre-0.4.persistent");let o={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:2.5,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]};this.curIdx=0,this.curTranslate=[];let l=0;for(let _ of this.lstObj){this.canMove[_.objName]={},this.curTranslate.push([0,0]);let v={};for(let C of _.propAnims)v[C.propName]=C.keyframes.length>0?C.keyframes[0].value:0,"x"==C.propName&&(this.canMove[_.objName].x=!0),"y"==C.propName&&(this.canMove[_.objName].y=!0);o.sheetsById.Sheet1.staticOverrides.byObject[_.objName]=v;let g={},y={},x=0;for(let C of _.propAnims){let I=`${x}-vfsKxxzE`,A={type:"BasicKeyframedTrack",__debugName:`${_.objName}:["${C.propName}"]`,keyframes:[]},T=0,E=[];for(let M of C.keyframes)0==T&&E.push([M.cubicBezier[0],M.cubicBezier[1]]),E.push([M.cubicBezier[0],M.cubicBezier[1]]),E.push([M.cubicBezier[2],M.cubicBezier[3]]),A.keyframes.push({id:`${l}F${x}zl_kv${T}V`,position:M.timePosition,connectedRight:!0,handles:[E[2*T][0],E[2*T][1],E[2*T+1][0],E[2*T+1][1]],value:M.value,type:"bezier"}),T++;g[I]=A,y[`["${C.propName}"]`]=I,x++}o.sheetsById.Sheet1.sequence.tracksByObject[_.objName]={trackData:g,trackIdByPropPath:y},l++}const p=Theatre.core.getProject(this.projectId,{state:o}).sheet("Sheet1");this.sheet=p,this.animObjs=[];for(let _ of this.lstObj){let v={};const g={};for(let C of _.propAnims){v[C.propName]=C.range&&C.range.length>0?Theatre.core.types.number(C.default,{range:C.range}):C.default;let I=C.domStyle.split(":"),A=Ge.minusToCamelCase(I[0].trim()),T=I[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+C.propName+"}");g[A]=g[A]?g[A]+" "+T:T}let y=p.object(_.objName,v);this.animObjs.push(y);const x=_.objName;y.onValuesChange(C=>{const I=document.getElementById("dom-"+x),A=/\$\{(.*?)\}/g;for(const T in g)if(g.hasOwnProperty(T)){let M,E=g[T];for(;null!==(M=A.exec(g[T]));)E=E.replaceAll(M[0],C[M[1]]);I&&(I.style[T]=E.replaceAll(";",""))}}),Theatre.studio.setSelection([y])}document.onmouseup=_=>{_.preventDefault(),this.endDrag(_)},document.onmousemove=_=>{_.preventDefault(),this.onMove(_)}}startDrag(o){o.preventDefault(),this.obj&&"editor"==this.mode&&(this.isDrag=!0,this.startPos=[o.x,o.y])}onMove(o){if(!this.isDrag)return;let s=o.x-this.startPos[0]+this.curTranslate[this.curIdx][0],l=o.y-this.startPos[1]+this.curTranslate[this.curIdx][1];Theatre.studio.transaction(({set:u})=>{this.canMove[this.lstObj[this.curIdx].objName].x&&u(this.obj.props.x,s),this.canMove[this.lstObj[this.curIdx].objName].y&&u(this.obj.props.y,l)})}endDrag(o){this.isDrag&&(this.isDrag=!1,this.curTranslate[this.curIdx]=[o.x-this.startPos[0]+this.curTranslate[this.curIdx][0],o.y-this.startPos[1]+this.curTranslate[this.curIdx][1]])}resetPos(){this.curTranslate[this.curIdx]=[0,0],Theatre.studio.transaction(({set:o})=>{o(this.obj.props.x,0),o(this.obj.props.y,0)})}getValue(){const o=Theatre.studio.createContentOfSaveFile(this.projectId),s=this.convertProjectStateToList(o);return{varName:this.varname,value:JSON.stringify({animName:this.animName,listObj:s})}}convertProjectStateToList(o){const s=[],l=o.sheetsById;for(const u in l){const _=l[u].sequence.tracksByObject;let v=0;for(const g in _){const{trackData:y,trackIdByPropPath:x}=_[g],C=[];let I=0;for(const A in x){const E=y[x[A]];if(E&&E.keyframes){const M=E.keyframes.map(U=>({timePosition:U.position,cubicBezier:U.handles,value:U.value}));let O=[];for(let U of M)O.push([U.cubicBezier[0],U.cubicBezier[1]]),O.push([U.cubicBezier[2],U.cubicBezier[3]]);O.push(O[0]);for(let U=0;U<M.length;U++)M[U].cubicBezier=[O[2*U+1][0],O[2*U+1][1],O[2*U+2][0],O[2*U+2][1]];const $=A.replace(/\["|\"]/g,"");C.push({propName:$,domStyle:this.lstObj[v].propAnims[I].domStyle,default:M[0]?.value||0,keyframes:M})}I++}s.push({objName:g,propAnims:C}),v++}}return s}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-anim-editor"]],inputs:{varname:"varname",mode:"mode",conf:"conf",ratio916:"ratio916"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[[3,"mousedown"],[3,"id","class",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[3,"id"],["alt","imgElement",3,"mousedown","src"],[1,"text-center","mt-2"],[3,"click"],[1,"tf-icons","bx","bx-reset","bx-22px","cursor-pointer","me-3",3,"click"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.bIt("mousedown",function(u){return s.startDrag(u)}),e.DNE(1,dr,2,9,"div",1),e.k0s(),e.DNE(2,ju,4,6,"div",2)),2&o&&(e.ZvI("scene-container player scene-mode-player-",s.ratio916?"9-16":"16-9",""),e.R7$(),e.Y8G("ngForOf",s.lstObj),e.R7$(),e.Y8G("ngIf","editor"==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto;background-color:#282b2fcc}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 16);height:calc(var(--video-16) / 16);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 16 + 7px);top:calc(var(--video-9) / 32 - 9px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 16 + 7px);top:calc(var(--video-16) / 32 - 9px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}"]})),r})();class pr{onMsgUpdate(r,n){}onDone(r){}onMsgAdd(r){}onClear(){}onFunctionCall(r,n){}onBeforeSend(){}onSend(){}}class Xo extends pr{constructor(r,n,o,s){super(),(0,f.A)(this,"onUpdate",void 0),(0,f.A)(this,"done",void 0),(0,f.A)(this,"beforeSend",void 0),(0,f.A)(this,"functionCall",void 0),this.onUpdate=r,this.done=n,this.beforeSend=o,this.functionCall=s}onFunctionCall(r,n){this.functionCall&&this.functionCall(r,n)}onMsgUpdate(r,n){this.onUpdate&&this.onUpdate(r,n)}onDone(r){this.done&&this.done(r)}onBeforeSend(){this.beforeSend&&this.beforeSend()}}class Kn{constructor(r,n,o){(0,f.A)(this,"api",void 0),(0,f.A)(this,"callback",void 0),(0,f.A)(this,"memType",void 0),(0,f.A)(this,"agentType",{name:"default",placeholder:"Enter your message..."}),(0,f.A)(this,"aiVars",[]),(0,f.A)(this,"lstMessage",[]),this.api=r,this.callback=n,this.memType=o}setMemType(r){this.memType=r}setCallback(r){this.callback=r}send(){this.callback?.onBeforeSend(),this.api.live({name:this.agentType.name,messages:this.lstMessage,vars:this.aiVars,type:this.memType}).subscribe(r=>{this.callback?.onSend();let n=r.data,o="",s="",l={Role:"assistant",Content:""};this.addMessage(l),this.api.stream(n,u=>{if(o+=u.Content??"",l.Content=o,u.ToolCalls){l.ToolCalls||(l.ToolCalls=[]);for(let _ of u.ToolCalls){let v=+(_.Type??"0"),g=l.ToolCalls[v];g?g.FunctionCall.Arguments+=_.FunctionCall.Arguments:(l.ToolCalls[v]=_,l.Generating=!0)}}let p=o.replace(s,"");this.noticeUpdate(o,p),s=o,l.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!0)},u=>{""==u&&(l.Generating=!1,l.Content=o,this.callback?.onDone(o),this.getLastMessage()?.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!1),console.log(this.lstMessage))})})}reSend(){this.removeLastMessage(),this.send()}addMessage(r){this.lstMessage.push(r),this.callback?.onMsgAdd(r)}addUserMessage(r,n){let o=[];n&&(o.push({Type:_n.Text,Content:r}),o.push(...n.map(l=>({Type:_n.ImageUrl,Content:l}))));let s=o.length>0?{Role:"user",Contents:o,Content:r}:{Role:"user",Content:r};this.lstMessage.push(s),this.callback?.onMsgAdd(s)}addToolMessage(r,n){let o={Role:"tool",ToolCallId:r,Content:n};this.lstMessage.push(o),this.callback?.onMsgAdd(o)}addAssistantMessage(r){let n={Role:"assistant",Content:r};this.lstMessage.push(n),this.callback?.onMsgAdd(n)}getMessage(r){return this.lstMessage[r]}getLastMessage(){return this.lstMessage[this.lstMessage.length-1]}removeLastMessage(){this.lstMessage.length>0&&this.removeMessage(this.lstMessage.length-1)}clearChat(){this.lstMessage=[],this.callback?.onClear()}setVars(r){this.aiVars=r}getVars(){return this.aiVars}setAgent(r){this.agentType=r}setAgentName(r){this.agentType={name:r,placeholder:""}}getName(){return this.agentType.name}removeMessage(r){this.lstMessage.splice(r,1)}noticeUpdate(r,n){this.callback?.onMsgUpdate(r,n)}}function Mu(t,r){if(1&t&&(e.j41(0,"div",3)(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.jsCode,"\n        ")}}let $u=(()=>{var t;class r{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"jsCode",""),(0,f.A)(this,"html",""),(0,f.A)(this,"err",""),(0,f.A)(this,"showCode",!1)}set jsInfo(o){let s=document.createElement("div");s.innerHTML=o;let l=s.querySelector("js-runner");l&&(this.jsCode=l.innerHTML.split("```javascript")[1].split("```")[0].replaceAll("&lt;","<").replaceAll("&gt;",">"),this.varname=l.getAttribute("var-name")??"",s.removeChild(l),this.html=s.innerHTML,setTimeout(()=>{this.run()},400))}getValue(){return{varName:this.varname,value:this.jsCode}}run(){try{this.err="",new Function(this.jsCode)()}catch(o){this.err=o.message}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-js-runner"]],inputs:{varname:"varname",jsInfo:"jsInfo"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[["id","js-result-view"],["id","js-source-code",4,"ngIf"],["title","Show/Hide source code",1,"bx","bx-code","text-white","cursor-pointer",3,"click"],["id","js-source-code"]],template:function(o,s){1&o&&(e.nrm(0,"div",0),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,Mu,6,1,"div",1),e.j41(4,"i",2),e.bIt("click",function(){return s.showCode=!s.showCode}),e.k0s()),2&o&&(e.R7$(2),e.JRh(s.err),e.R7$(),e.Y8G("ngIf",s.showCode))},dependencies:[z.MD,z.bT,N.YN]})),r})();function Zp(t,r){if(1&t){const n=e.RV6();e.j41(0,"img",7),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.selectImg(s))}),e.k0s()}if(2&t){let n;const o=r.$implicit,s=r.index,l=e.XpG(2);e.ZvI("img-small-pick ",(null!==(n=null==l._scene?null:l._scene.selectedImg)&&void 0!==n?n:0)==s?"selected":"",""),e.Y8G("src",o,e.B4B)}}function Gu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Zp,1,4,"img",6),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-mode-",n.mode,"-pick"),e.R7$(),e.Y8G("ngForOf",null==n._scene?null:n._scene.imageUrl)}}function Is(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-num-",n.getSize(),""),e.R7$(),e.JRh(n.idx)}}function As(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==o._scene?null:o._scene.transitionName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function pl(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"i",8),e.j41(2,"ul",9)(3,"li")(4,"a",10),e.nrm(5,"i"),e.EFF(6,"None"),e.k0s()(),e.DNE(7,As,4,4,"li",11),e.k0s()()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-transit-",n.getSize(),""),e.R7$(),e.ZvI("dropdown-toggle hide-arrow bx bx-exit cursor-pointer ",null!=n._scene&&n._scene.transitionName?"text-link":"text-muted",""),e.R7$(4),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.transitionName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstTransition)}}function fl(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"div",12),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-time scene-time-progress-",n.getSize(),""),e.R7$(),e.Aen("width:"+n.progress+"%")}}function ml(t,r){if(1&t&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"secondsToTime"),e.nI1(4,"secondsToTime"),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,2,n.curTime),"/",e.bMT(4,4,n.duration),"")}}function _l(t,r){if(1&t){const n=e.RV6();e.j41(0,"audio",15),e.bIt("timeupdate",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.updatePlayTime())})("ended",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.isPlaying=!1)}),e.nrm(1,"source",16),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("src",null==n._scene?null:n._scene.audioUrl,e.B4B)}}function qp(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.setAnim(s.animName))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==o._scene?null:o._scene.animationName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function Du(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",o.capStyle==n?"text-link":"invisible",""),e.R7$(),e.JRh(n)}}function Jp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.play())}),e.nrm(2,"span"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.nrm(5,"i",21),e.k0s(),e.j41(6,"ul",9)(7,"li")(8,"a",10),e.nrm(9,"i"),e.EFF(10,"None"),e.k0s()(),e.DNE(11,qp,4,4,"li",11),e.k0s()(),e.j41(12,"div",19)(13,"button",22),e.nrm(14,"i",23),e.k0s(),e.j41(15,"ul",9)(16,"li")(17,"a",10),e.nrm(18,"i"),e.EFF(19,"None"),e.k0s()(),e.DNE(20,Du,4,4,"li",11),e.k0s()(),e.j41(21,"div",19)(22,"button",24),e.nrm(23,"i",25),e.k0s(),e.j41(24,"ul",9)(25,"li",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genImage())}),e.j41(26,"a",10),e.nrm(27,"i",27),e.EFF(28,"Re-Generate Image"),e.k0s()(),e.j41(29,"li",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genVideo())}),e.j41(30,"a",10),e.nrm(31,"i",28),e.EFF(32,"Image to Video"),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px"),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.animationName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstImgAnim),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==n.capStyle?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstCapStyle)}}let Kp=(()=>{var t;class r{constructor(){(0,f.A)(this,"_scene",void 0),(0,f.A)(this,"mode","player"),(0,f.A)(this,"size","9:16"),(0,f.A)(this,"idx",0),(0,f.A)(this,"selected",!1),(0,f.A)(this,"showTransit",!0),(0,f.A)(this,"capStyle",""),(0,f.A)(this,"animCore",void 0),(0,f.A)(this,"projectId",""),(0,f.A)(this,"onChangeCapStyle",new e.bkB),(0,f.A)(this,"onChangeAnim",new e.bkB),(0,f.A)(this,"lstCapStyle",["wordHighlight","lineHighlight"]),(0,f.A)(this,"lstImgAnim",[]),(0,f.A)(this,"lstTransition",[]),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"curTime",0),(0,f.A)(this,"curAnimName",""),(0,f.A)(this,"progress",0),(0,f.A)(this,"duration",0)}set scene(o){this._scene=o,this.progress=0,this.duration=this._scene.duration,this.curTime=0;let s=document.getElementById("audioElement");s&&(s.pause(),s.currentTime=0,setTimeout(()=>{s.load()},400)),this.curAnimName="",this.sheet=void 0}ngAfterViewInit(){if("player"!=this.mode)return;localStorage.removeItem("theatre-0.4.persistent");let s=!1;try{this.animCore=Theatre.core,s=!0}catch{Ge.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js").then(()=>{this.animCore=Theatre.core})}}changeCapStyle(o){this.capStyle=o,this.onChangeCapStyle.emit(o)}changeAnim(o){this._scene.animationName=o,this.onChangeAnim.emit(o)}set lstAnim(o){"player"==this.mode&&(this.lstImgAnim=o.filter(s=>1==s.listObj.length),this.lstTransition=o.filter(s=>2==s.listObj.length))}ngOnInit(){}setAnim(o){this._scene.animationName=o,this.loadAnim()}getSize(){return this.size.replace(":","-")}genImage(){alert(this._scene?.imagePrompt)}genVideo(){alert(this._scene?.imagePrompt)}getAnimation(o){return this.lstImgAnim.find(s=>s.animName==o)}selectImg(o){this._scene&&(this._scene.selectedImg=o)}play(){let o=10;!this.curAnimName&&this._scene?.animationName&&(this.loadAnim(),o=500),setTimeout(()=>{let s=document.getElementById("audioElement");this.isPlaying?(s&&s.pause(),this.sheet&&this.sheet.sequence.pause()):(s&&s.play(),this.sheet&&this.sheet.sequence.play().then(()=>{this.isPlaying=!1})),this.isPlaying=!this.isPlaying},o)}loadAnim(){this.animCore&&this._scene?.animationName&&(this.curAnimName=this._scene.animationName,this.projectId="ObjAnim"+(new Date).getTime(),this.parseAnim(["dom-img-player"],this.duration))}parseAnim(o,s){localStorage.removeItem("theatre-0.4.persistent");let u={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:s,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]},_=0,v=this.getAnimation(this._scene?.animationName??"")?.listObj??[];if(0==v.length)return;let g=0;for(let A of v)for(let T of A.propAnims)for(let E of T.keyframes)E.timePosition>g&&(g=E.timePosition);for(let A of v){let T={};for(let $ of A.propAnims)T[$.propName]=$.keyframes.length>0?$.keyframes[0].value:0;u.sheetsById.Sheet1.staticOverrides.byObject[A.objName]=T;let E={},M={},O=0;for(let $ of A.propAnims){let X=`${O}-vfsKxxzE`,Y={type:"BasicKeyframedTrack",__debugName:`${A.objName}:["${$.propName}"]`,keyframes:[]},U=0,te=[];for(let H of $.keyframes)0==U&&te.push([H.cubicBezier[0],H.cubicBezier[1]]),te.push([H.cubicBezier[0],H.cubicBezier[1]]),te.push([H.cubicBezier[2],H.cubicBezier[3]]),Y.keyframes.push({id:`${_}F${O}zl_kv${U}V`,position:1*H.timePosition,connectedRight:!0,handles:[te[2*U][0],te[2*U][1],te[2*U+1][0],te[2*U+1][1]],value:H.value,type:"bezier"}),U++;E[X]=Y,M[`["${$.propName}"]`]=X,O++}u.sheetsById.Sheet1.sequence.tracksByObject[A.objName]={trackData:E,trackIdByPropPath:M},_++}const x=Theatre.core.getProject(this.projectId,{state:u}),C=x.sheet("Sheet1");this.sheet=C;let I=[];_=0;for(let A of v){let T={};const E={};for(let $ of A.propAnims){T[$.propName]=$.range&&$.range.length>0?Theatre.core.types.number($.default,{range:$.range}):$.default;let X=$.domStyle.split(":"),Y=X[0].trim(),U=X[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+$.propName+"}");E[Y]=E[Y]?E[Y]+" "+U:U}let M=C.object(A.objName,T);I.push(M);const O=o[_];M.onValuesChange($=>{const X=document.getElementById(O),Y=/\$\{(.*?)\}/g;for(const U in E)if(E.hasOwnProperty(U)){let H,te=E[U];for(;null!==(H=Y.exec(E[U]));)te=te.replaceAll(H[0],$[H[1]]);X&&(X.style[U]=te.replaceAll(";",""))}}),_++}x.ready.then(()=>{this.sheet=C})}updatePlayTime(){let o=document.getElementById("audioElement");o&&(this.progress=o.currentTime/o.duration*100,this.duration=o.duration,this.curTime=o.currentTime)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-view"]],inputs:{scene:"scene",mode:"mode",size:"size",idx:"idx",selected:"selected",showTransit:"showTransit",capStyle:"capStyle",lstAnim:"lstAnim"},outputs:{onChangeCapStyle:"onChangeCapStyle",onChangeAnim:"onChangeAnim"},standalone:!0,features:[e.aNF],decls:10,vars:25,consts:[[3,"id"],["alt","imgElement",3,"src"],[3,"class",4,"ngIf"],["class","scene-layer scene-duration small",4,"ngIf"],["id","audioElement","class","d-none",3,"timeupdate","ended",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],["alt","imgElement",3,"class","src","click",4,"ngFor","ngForOf"],["alt","imgElement",3,"click","src"],["matTooltip","Transition","data-bs-toggle","dropdown","aria-expanded","false"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"scene-layer","scene-duration","small"],[1,"duration"],["id","audioElement",1,"d-none",3,"timeupdate","ended"],["type","audio/mpeg",3,"src"],[1,"text-center","mt-2"],["type","button","matTooltip","Play",1,"btn","btn-icon","btn-label-primary",3,"click"],[1,"btn-group","ms-3"],["type","button","matTooltip","Animation","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-timer"],["type","button","matTooltip","Caption Style","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-captions"],["type","button","matTooltip","Generate with AI","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bxs-magic-wand"],[3,"click"],[1,"bx","bx-image","scaleX-n1-rtl","me-3"],[1,"bx","bx-movie-play","scaleX-n1-rtl","me-3"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"]],template:function(o,s){if(1&o&&(e.j41(0,"div")(1,"div",0),e.nrm(2,"img",1),e.k0s(),e.DNE(3,Gu,2,4,"div",2)(4,Is,2,4,"div",2)(5,pl,8,10,"div",2)(6,fl,2,5,"div",2)(7,ml,5,6,"div",3)(8,_l,2,1,"audio",4),e.k0s(),e.DNE(9,Jp,33,11,"div",5)),2&o){let l;e.ee0("scene-container ",s.mode," scene-mode-",s.mode,"-",s.getSize()," ",s.selected?"selected":"",""),e.R7$(),e.STu("scene-layer scene-mode-",s.mode,"-",s.getSize(),""),e.Mz_("id","dom-img-",s.mode,""),e.R7$(),e.ZWY("s-element ",s.mode," scene-mode-",s.mode,"-",s.getSize()," h-100"),e.Y8G("src",null==s._scene?null:s._scene.imageUrl[null!==(l=null==s._scene?null:s._scene.selectedImg)&&void 0!==l?l:0],e.B4B),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","thumb"==s.mode),e.R7$(),e.Y8G("ngIf",s.showTransit&&"thumb"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode&&(null==s._scene?null:s._scene.audioUrl)),e.R7$(),e.Y8G("ngIf","player"==s.mode)}},dependencies:[z.MD,z.Sq,z.bT,N.YN,tn.uc,tn.oV,Up],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 24);height:calc(var(--video-16) / 24);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 24 + 7px);top:calc(var(--video-9) / 46 - 11px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 24 + 7px);top:calc(var(--video-16) / 46 - 11px)}.scene-num-16-9[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-9) / 46 - 11px)}.scene-num-9-16[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-16) / 46 - 11px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}.img-small-pick[_ngcontent-%COMP%]{width:40px;display:block;margin-bottom:5px;border-radius:5px}.scene-mode-player-pick[_ngcontent-%COMP%]{position:fixed;margin-left:-45px}.img-small-pick.selected[_ngcontent-%COMP%]{outline:2px solid #fff}.btn-label-secondary[_ngcontent-%COMP%]{color:#8592a3!important;border-color:#0000;background:#393c50}.btn-label-secondary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#788393!important;color:#fff!important;box-shadow:0 .125rem .25rem #8592a366!important}.btn-label-primary[_ngcontent-%COMP%]{color:#696cff!important;border-color:#0000;background:#35365f}.btn-label-primary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#5f61e6!important;color:#fff!important;box-shadow:0 .125rem .25rem #696cff66!important}.scene-duration[_ngcontent-%COMP%]{bottom:5px;right:10px;opacity:.8}"]})),r})();function hl(t,r){if(1&t&&(e.j41(0,"div")(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.error,"\n        ")}}function mo(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-scene-view",5),e.bIt("onChangeCapStyle",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.changeCapStyle(s))}),e.k0s()}if(2&t){let n;const o=e.XpG(2);e.Y8G("mode","player")("lstAnim",o.lstAnim)("capStyle",null!==(n=null==o.lstScene?null:o.lstScene.cap_style)&&void 0!==n?n:"")("scene",o.curScene)}}function Ou(t,r){if(1&t&&(e.j41(0,"div",3),e.DNE(1,mo,1,4,"app-scene-view",4),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curScene)}}function bi(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.select(s))}),e.nrm(1,"app-scene-view",11),e.k0s()}if(2&t){const n=r.$implicit,o=r.index,s=e.XpG(2);e.R7$(),e.Y8G("mode","thumb")("selected",o==s.curIdx)("showTransit",o+1<s.lstScene.list_scenes.length)("idx",o+1)("scene",n)}}function zn(t,r){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.DNE(3,bi,2,5,"div",9),e.k0s()()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",null==n.lstScene?null:n.lstScene.list_scenes)}}let xi=(()=>{var t;class r{constructor(o){(0,f.A)(this,"app",void 0),(0,f.A)(this,"sceneInfo",'<scene-editor var-name="final-scene" anim-db="anim">{\n        "list_scenes": [\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/188693b0fa2147719389523c4192c99a.png","https://images.piclumen.com/normal/20241221/16/49df6b1abde1419b803ed7cbe74dc7c9.png","https://images.piclumen.com/normal/20241221/16/f05705a71df94fec9d1dfaffb348ef3e.png","https://images.piclumen.com/normal/20241221/16/33c4764f82a441588e68d903837ff0e8.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A beautiful, enchanting garden with luminescent flowers, sparkling streams, and fairy lights hanging from the trees. In the center, Lila the Curious Fairy hovers gently above a bed of multicolored tulips, her lavender wings shimmering in the moonlight\'s glow. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/170fe0d8ab564847aa974469f74f4992.png","https://images.piclumen.com/normal/20241221/16/9b2469bc7bc6421fae9caeeb8d9584b5.png","https://images.piclumen.com/normal/20241221/16/a7609dac63a445bd86a050af174072c1.png","https://images.piclumen.com/normal/20241221/16/cc4e75cc24974e379825ef30d006b761.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Oliver the Wise Owl perched on a sturdy oak branch, wearing his ornate monocle. Lila sits nearby, listening intently, her eyes wide with curiosity. The backdrop showcases a scenic view of the garden bathed in golden twilight, with gentle breezes rustling the leaves. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/251ec29683514a0086fa73f60725f1d4.png","https://images.piclumen.com/normal/20241221/16/f71fd6e1fb21418886f377ba82e1dc39.png","https://images.piclumen.com/normal/20241221/16/f89496edc9e548b596a4698f1e672365.png","https://images.piclumen.com/normal/20241221/16/fdce48c02d68445080e2d988b29d71b3.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Close-up of Oliver as he narrates his tale with deep, expressive gestures. Lila, full of wonder, leans closer, her wings shimmering faintly behind her. Sunbeams dance across the garden, illuminating their faces with soft, magical light. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/cabeb362c9164eebb2683241a21518b9.png","https://images.piclumen.com/normal/20241221/16/14dbdcd6af4c49b78c046748cf83c8d0.png","https://images.piclumen.com/normal/20241221/16/25ff7aeb238f4c6da80bfdba627e811a.png","https://images.piclumen.com/normal/20241221/16/df8754a9c2ea4420ac94771805f4c3fb.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila the Curious Fairy flying gracefully over a vibrant garden path. Below, Hugo the Playful Squirrel follows with spirited leaps. The path is lined with flowers that seem to sway with excitement and tall, whispering grasses. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/1da1c0ae592244ee9e35aa1c471a4ddd.png","https://images.piclumen.com/normal/20241221/16/fd8a08e51ec24e68b313763c84d64af0.png","https://images.piclumen.com/normal/20241221/16/ba3b4cefb2154578a5f5659a5604ee93.png","https://images.piclumen.com/normal/20241221/16/6735728d42164b099d6916f731135dad.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila and Hugo amidst an enchanting section of the garden, surrounded by clusters of bioluminescent mushrooms and arches of luminous roses. A gentle breeze guides them, ruffling Hugo\u2019s fluffy tail. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/a4233ab51efe4e1a95da8cfd4907af49.png","https://images.piclumen.com/normal/20241221/16/623cdcd0371e46af9f415e3f342feac5.png","https://images.piclumen.com/normal/20241221/16/59311e5a2b594637b46fc3363321475a.png","https://images.piclumen.com/normal/20241221/16/ebf8d09d89a14da4b57c299b1c894daa.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A small, intricately designed door, partially obscured by leafy vines. Lila hovers right in front of it, eyes wide with excitement, while Hugo stands beside her, tapping the door eagerly. The maple tree casts dappled sunlight onto the ground, creating a mystical atmosphere. style: whimsical 3D Pixar style"\n            },\n        \n        ],\n        "size": "9:16",\n        "cap_style": "word"\n    }</scene-editor>'),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"lstScene",void 0),(0,f.A)(this,"lstAnim",[]),(0,f.A)(this,"varName",""),(0,f.A)(this,"error",""),(0,f.A)(this,"curIdx",0),(0,f.A)(this,"curScene",void 0),this.app=o}getValue(){return{varName:this.varName,value:JSON.stringify(this.lstScene)}}ngOnInit(){let o=document.createElement("div");o.innerHTML=this.sceneInfo;let s=o.querySelector("scene-editor"),l=this.sceneInfo,u="";s&&(l=s.innerHTML,this.varName=s.getAttribute("var-name")??"",u=s.getAttribute("anim-db")??"");try{this.lstScene=Ge.parseJson(l)}catch(p){this.error=p+"\n"+Ge.replaceAllBase64Urls(l)}(this.lstScene?.list_scenes.length??0)>0&&(this.curScene=this.lstScene?.list_scenes[0]),this.app.listData({name:"",spec:u}).subscribe(p=>{this.lstAnim=p.map(_=>JSON.parse(_.content))})}select(o){this.curIdx=o,this.curScene=this.lstScene?.list_scenes[o]}changeCapStyle(o){this.lstScene.cap_style=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-editor"]],inputs:{sceneInfo:"sceneInfo"},outputs:{onSave:"onSave"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","layout-bot",4,"ngIf"],[1,"mb-3"],[3,"mode","lstAnim","capStyle","scene","onChangeCapStyle",4,"ngIf"],[3,"onChangeCapStyle","mode","lstAnim","capStyle","scene"],[1,"layout-bot"],[1,"card"],[1,"card-body","list-scenes"],["class","mb-3",3,"click",4,"ngFor","ngForOf"],[1,"mb-3",3,"click"],[3,"mode","selected","showTransit","idx","scene"]],template:function(o,s){1&o&&e.DNE(0,hl,6,1,"div",0)(1,Ou,2,1,"div",1)(2,zn,4,1,"div",2),2&o&&(e.Y8G("ngIf",s.error),e.R7$(),e.Y8G("ngIf",!s.error),e.R7$(),e.Y8G("ngIf",!s.error))},dependencies:[z.MD,z.Sq,z.bT,N.YN,Kp],styles:[".list-scenes[_ngcontent-%COMP%]{width:115px;max-height:95vh;overflow-y:auto}.layout-bot[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px}"]})),r})();const Qn=["chatInput"],gl=["interacComp"];function Qp(t,r){if(1&t&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.chatboxInfo.msg),e.npT)}}function ef(t,r){if(1&t&&e.nrm(0,"app-anim-editor",11,0),2&t){const n=e.XpG(2);e.Y8G("conf",n.animEditorInfo)}}function Yo(t,r){if(1&t&&e.nrm(0,"app-js-runner",12,0),2&t){const n=e.XpG(2);e.Y8G("jsInfo",n.jsRunnerInfo)}}function fr(t,r){if(1&t&&e.nrm(0,"app-scene-editor",13,0),2&t){const n=e.XpG(2);e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Ci(t,r){if(1&t&&(e.j41(0,"div",7),e.DNE(1,ef,2,1,"app-anim-editor",8)(2,Yo,2,1,"app-js-runner",9)(3,fr,2,1,"app-scene-editor",10),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.animEditorInfo),e.R7$(),e.Y8G("ngIf",n.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",n.sceneEditorInfo)}}function Ts(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"textarea",14,1),e.bIt("input",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.autoResize())})("keydown",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.keydown(s))}),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.userMsg,s)||(l.userMsg=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("readOnly",n.isRunning),e.R50("ngModel",n.userMsg)}}let vl=(()=>{var t;class r{constructor(o,s){(0,f.A)(this,"api",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"chatInput",void 0),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"elId",""),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"onAgentResponseComplete",new e.bkB),(0,f.A)(this,"lastValue",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"animDB",""),(0,f.A)(this,"default",!0),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"userMsg",""),(0,f.A)(this,"onAction",new e.bkB),(0,f.A)(this,"onRunJS",new e.bkB),(0,f.A)(this,"onBind",new e.bkB),(0,f.A)(this,"showChatBox",!1),(0,f.A)(this,"queue",[]),(0,f.A)(this,"curFullmsg",""),this.api=o,this.zone=s}getValue(){return this.interacComp&&!this.default?this.interacComp.getValue():this.showChatBox?this.lastValue:void 0}ngOnInit(){this.agentRunner=new Kn(this.api,new Xo((o,s)=>{this.renderChunk(s)},o=>{this.queue.push({str:o,t:-1})})),this.agentRunner.setAgentName(this.chatboxInfo.req.Req.Name),this.agentRunner.setVars(this.chatboxInfo.req.Req.Vars??[]);for(let o of this.chatboxInfo.req.Req.Messages)this.agentRunner.addMessage(o);this.chatboxInfo.req?.Req.Type&&this.agentRunner.setMemType(this.chatboxInfo.req?.Req.Type),"__AGENT_STREAM___"==this.chatboxInfo.msg&&setTimeout(()=>{this.send()},500)}agentDone(o){this.zone.run(()=>{this.isRunning=!1;let s=document.querySelector(".msg-loading"),l=s?s.innerHTML:"",u=s?.querySelector("chatbox")?.getAttribute("var-name")??"";this.lastValue={value:o,varName:u},document.querySelector(".msg-loading").className="msg-assistant",this.onAgentResponseComplete.emit({msg:o,html:l}),this.renderExternalUI(l),this.renderAction(o)})}reset(){this.sceneEditorInfo="",this.animEditorInfo="",this.jsRunnerInfo="",this.animDB="",this.default=!0}renderExternalUI(o){this.reset();let s=document.createElement("div");s.innerHTML=o;let l=s.querySelector("scene-editor");return l?(this.sceneEditorInfo=o,void(this.default=!1)):(l=s.querySelector("anim-editor"),l?(this.animEditorInfo=o,void(this.default=!1)):(l=s.querySelector("js-runner"),l?(this.jsRunnerInfo=o,void(this.default=!1)):void 0))}send(o){if(o?.preventDefault(),this.isRunning)return;let s=document.getElementById("chat-his-"+this.elId);if(s){if(this.userMsg){let u=document.createElement("div");u.className="msg-user badge bg-label-primary p-3 mb-3 text-wrap text-start",u.innerHTML=this.userMsg,s.appendChild(u)}let l=document.createElement("div");l.className="msg-loading",l.innerHTML='<div class="card p-5 mb-3">Running...</div>',s.appendChild(l)}this.isRunning=!0,this.userMsg&&this.agentRunner.addUserMessage(this.userMsg),this.agentRunner.send(),this.userMsg="",this.curFullmsg=""}renderAction(o){setTimeout(()=>{let s=this,l=document.querySelectorAll("[bs-action]");for(let _ of l){let v=_.getAttribute("bs-action"),g=document.createElement("div");g.className="pt-3 text-center",g.innerHTML=`<span class="btn text-link p-0">${v.split("->")[0].split(":")[2]}</span>`,_.appendChild(g),_.removeAttribute("bs-action"),g.addEventListener("click",function(){s.onAction.emit({act:v,el:_})})}let u=document.querySelectorAll("[bs-run]");for(let _ of u){let v=_.getAttribute("bs-run");s.onRunJS.emit({act:v,el:_})}let p=document.querySelectorAll("[bs-edit]");for(let _ of p){let v=_.getAttribute("bs-edit");s.onBind.emit({act:v,el:_})}},2e3)}renderControl(){let s=document.querySelector("#chat-his-"+this.elId)?.querySelector(".language-json"),l=s?.innerHTML;if(l)try{l=JSON.stringify(JSON.parse(l.trim()),null,2),s.innerHTML=l.trim()}catch{}}renderChunk(o){let s=o?o.length:0,l=0;for(;l<s;){const u=Math.floor(9*Math.random())+2,p=Math.floor(16*Math.random())+5;this.queue.push({str:o.substring(l,l+u),t:p}),0==l&&1==this.queue.length&&this.startInsertAnim(),l+=u}}startInsertAnim(){let o=this.queue.shift();if(o){if(-1==o.t)return void this.agentDone(o.str);this.curFullmsg+=o.str,this.renderMsg(this.curFullmsg),setTimeout(()=>{this.startInsertAnim()},o.t)}}renderMsg(o){let s=Ge.parseIncompleteJson(o);if(s&&s!=o&&(s=JSON.stringify(s)),!s)return"";let l=new Map,u=this.chatboxInfo.req?.Req.Vars;for(let v of u){let g=v.split("::");l.set(g[0],v.substring(g[0].length+2))}l.set(this.chatboxInfo.req.Output.Name,s);let p=Ge.compileTemplate(this.chatboxInfo.html,l);if(document.getElementById("chat-his-"+this.elId)){let v=document.querySelector(".msg-loading");if(v){let g=document.createElement("code");g.innerHTML=p,g.querySelector("chatbox")&&(this.showChatBox=!0);let x=g.querySelectorAll('[bs-data="markdown-view"]');for(let C of x)C.innerHTML=Ge.markdownToHtml(C.innerHTML.trim());return v.innerHTML=g.innerHTML,this.renderControl(),v.innerHTML}}return""}autoResize(){const o=this.chatInput?.nativeElement;o.style.height="37px",o.style.overflowY="hidden";let s=o.scrollHeight;s>120&&(s=120,o.style.overflowY="auto"),o.style.height=s+"px"}keydown(o){!o.shiftKey&&"Enter"==o.key&&(o.preventDefault(),""!=this.userMsg.trim()&&this.send(o),setTimeout(()=>{this.autoResize()},100))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(ct),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-chatbox"]],viewQuery:function(o,s){if(1&o&&(e.GBs(Qn,5),e.GBs(gl,5)),2&o){let l;e.mGM(l=e.lsd())&&(s.chatInput=l.first),e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{chatboxInfo:"chatboxInfo",elId:"elId"},outputs:{onAgentResponseComplete:"onAgentResponseComplete",onAction:"onAction",onRunJS:"onRunJS",onBind:"onBind"},standalone:!0,features:[e.aNF],decls:5,vars:8,consts:[["interacComp",""],["chatInput",""],[1,"chatbox"],[3,"id"],[3,"innerHTML",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"innerHTML"],[1,"mt-3"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf"],[3,"jsInfo"],[3,"sceneInfo"],["rows","1","placeholder","Enter your message...",1,"form-control",3,"input","keydown","ngModelChange","readOnly","ngModel"]],template:function(o,s){1&o&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,Qp,2,3,"div",4),e.k0s(),e.DNE(3,Ci,4,3,"div",5)(4,Ts,3,2,"div",5),e.k0s()),2&o&&(e.R7$(),e.HbH(s.default||s.isRunning?"":"d-none"),e.Mz_("id","chat-his-",s.elId,""),e.R7$(),e.Y8G("ngIf","__AGENT_STREAM___"!=s.chatboxInfo.msg),e.R7$(),e.Y8G("ngIf",!s.default&&!s.isRunning),e.R7$(),e.Y8G("ngIf",s.showChatBox))},dependencies:[z.MD,z.bT,N.YN,N.me,N.BC,N.vS,ys,Es,xi,$u],styles:["textarea[_ngcontent-%COMP%]{resize:none;overflow-y:hidden;height:37px}"]})),r})(),Si=(()=>{var t;class r{constructor(){(0,f.A)(this,"zipInfo","")}ngOnInit(){let o=JSON.parse(this.decodeHtml(this.zipInfo.trim()));setTimeout((0,ge.A)(function*(){let s=yield Ge.zipFiles(o,"file.zip",_=>{let v=document.querySelector(".__ZIP_FILE__");v&&(v.innerHTML="Zipping..."+_+"/"+o.length)});const l=URL.createObjectURL(s),u=document.createElement("a");u.href=l,u.download="file.zip",u.innerHTML="Download (file.zip)";let p=document.querySelector(".__ZIP_FILE__");p&&(p.innerHTML="",p.appendChild(u))}),500)}decodeHtml(o){const s=document.createElement("textarea");return s.innerHTML=o,s.value}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip"]],inputs:{zipInfo:"zipInfo"},standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[[1,"__ZIP_FILE__"]],template:function(o,s){1&o&&e.nrm(0,"div",0)},dependencies:[z.MD,N.YN]})),r})();const _o=["interacComp"],Je=(t,r)=>[t,r];function We(t,r){if(1&t&&e.nrm(0,"app-chatbox",8,0),2&t){const n=e.XpG();e.Y8G("chatboxInfo",n.chatboxInfo)}}function ho(t,r){if(1&t&&e.nrm(0,"app-scene-editor",9,0),2&t){const n=e.XpG();e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Bt(t,r){if(1&t&&e.nrm(0,"app-anim-editor",10,0),2&t){const n=e.XpG();e.Y8G("conf",n.animEditorInfo)}}function rn(t,r){if(1&t&&e.nrm(0,"app-js-runner",11,0),2&t){const n=e.XpG();e.Y8G("jsInfo",n.jsRunnerInfo)}}function Ho(t,r){if(1&t&&e.nrm(0,"app-zip",12),2&t){const n=e.XpG();e.Y8G("zipInfo",n.zipInfo)}}function ki(t,r){if(1&t&&(e.nrm(0,"div",13),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.template),e.npT)}}function sn(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",14)(1,"azt-upload-multiple-box",15),e.bIt("uploadComplete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.uploadMultipleFiles(s))}),e.nrm(2,"div",16),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("uploadToCdnMenu",n.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(5,Je,n.allUploadFileTypes.IMAGE,n.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!1)("showProgress",!0)}}let Fs=(()=>{var t;class r{constructor(){(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"template",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"zipInfo",""),(0,f.A)(this,"uploadInfo",""),(0,f.A)(this,"default",!1),(0,f.A)(this,"allUploadToCdnMenuTypes",Oo),(0,f.A)(this,"allUploadFileTypes",Ka),(0,f.A)(this,"lstFile",[])}getValue(){return this.interacComp?.getValue()}reset(){this.chatboxInfo=void 0,this.sceneEditorInfo="",this.animEditorInfo="",this.zipInfo="",this.default=!1}ngOnInit(){this.reset();let o=this.template.trim();if("__AGENT_STREAM___"==o)return void(this.chatboxInfo={msg:this.template.trim(),req:JSON.parse(this.vars.find(u=>u.startsWith("__chatbox-agent::"))?.substring(17)??""),html:JSON.parse(this.vars.find(u=>u.startsWith("__chatbox-template::"))?.substring(20)??"")});let s=document.createElement("div");s.innerHTML=o;let l=s.querySelector("scene-editor");if(l)this.sceneEditorInfo=o;else if(l=s.querySelector("anim-editor"),l)this.animEditorInfo=o;else if(l=s.querySelector("js-runner"),l)this.jsRunnerInfo=o;else if(l=s.querySelector("zip"),l)this.zipInfo=l.innerHTML;else{if(l=s.querySelector("azt-upload-files"),l){let u=l.querySelector('textarea[class="d-none"]');u&&(this.uploadInfo=u.value,setTimeout(()=>{document.querySelector("azt-upload-files").addEventListener("click",()=>{document.querySelector('#azt-upload-btn input[type="file"]')?.click()}),this.updateFileView()},1e3))}this.default=!0}}uploadMultipleFiles(o){this.lstFile=o;const s=document.querySelector('azt-upload-files textarea[class="d-none"]');s&&(s.value=JSON.stringify(o),this.updateFileView())}updateFileView(){const o=document.querySelector('azt-upload-files textarea[class="d-none"]'),l=JSON.parse(o.value);document.querySelector("#azt-list-files")?.remove();const u=document.createElement("div");u.id="azt-list-files",u.className="mb-2";for(let p of l){let _=document.createElement("div");_.innerHTML=`<span>${p.name} <i class="bx bx-x ml-2"></i></span>`,_.querySelector("i")?.addEventListener("click",()=>{this.lstFile=this.lstFile.filter(v=>v.url!=p.url),o.value=JSON.stringify(this.lstFile),this.updateFileView()}),u.appendChild(_),document.querySelector("azt-upload-files").parentNode.prepend(u)}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-runner-main-view"]],viewQuery:function(o,s){if(1&o&&e.GBs(_o,5),2&o){let l;e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{template:"template",vars:"vars"},standalone:!0,features:[e.aNF],decls:7,vars:7,consts:[["interacComp",""],[3,"chatboxInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"zipInfo",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["id","azt-upload-btn","class","d-none",4,"ngIf"],[3,"chatboxInfo"],[3,"sceneInfo"],[3,"conf"],[3,"jsInfo"],[3,"zipInfo"],[3,"innerHTML"],["id","azt-upload-btn",1,"d-none"],[3,"uploadComplete","uploadToCdnMenu","fileType","convertPdfTimeout","convertPdfToImages","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"]],template:function(o,s){1&o&&e.DNE(0,We,2,1,"app-chatbox",1)(1,ho,2,1,"app-scene-editor",2)(2,Bt,2,1,"app-anim-editor",3)(3,rn,2,1,"app-js-runner",4)(4,Ho,1,1,"app-zip",5)(5,ki,2,3,"div",6)(6,sn,3,8,"div",7),2&o&&(e.Y8G("ngIf",s.chatboxInfo),e.R7$(),e.Y8G("ngIf",s.sceneEditorInfo),e.R7$(),e.Y8G("ngIf",s.animEditorInfo),e.R7$(),e.Y8G("ngIf",s.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",s.zipInfo),e.R7$(),e.Y8G("ngIf",s.default),e.R7$(),e.Y8G("ngIf",s.uploadInfo))},dependencies:[z.MD,z.bT,N.YN,ys,vl,xi,Es,Si,$u,Me.Q,gs]})),r})();const Vu=["interacComp"];function zu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"a",12),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.close())}),e.qSk(),e.j41(3,"svg",13),e.nrm(4,"path",14)(5,"path",15),e.k0s()()()()}}function Rs(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",20)(1,"app-form-node",21),e.bIt("onStartUpload",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onStartUpload())})("onUploaded",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onUploaded(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.Y8G("data",n)("appId",o.id)}}function Bu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Rs,2,2,"div",19),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","form"==n.type)}}function eo(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.cancelApp())}),e.EFF(1," H\u1ee7y "),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("disabled",n.isCancelling)}}function js(t,r){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(3);e.ZvI("",n.submitBtn.icon," mr-2")}}function yl(t,r){if(1&t&&(e.j41(0,"div",22),e.DNE(1,eo,2,1,"button",23),e.j41(2,"button",24),e.DNE(3,js,1,3,"i",25),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.isRunning),e.R7$(),e.Y8G("disabled",n.isRunning||n.isUploading),e.R7$(),e.Y8G("ngIf",n.submitBtn.icon),e.R7$(),e.SpI(" ",n.isRunning?"\u0110ang x\u1eed l\xfd...":n.submitBtn.title," ")}}function Pu(t,r){if(1&t){const n=e.RV6();e.j41(0,"form",16),e.bIt("submit",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.submit(s))}),e.DNE(1,Bu,2,1,"div",17)(2,yl,5,4,"div",18),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.forms),e.R7$(),e.Y8G("ngIf",n.forms.length>0)}}function tf(t,r){if(1&t&&(e.j41(0,"div",33),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,n.lastInfo,100))}}function go(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",27)(1,"div",28),e.nrm(2,"azt-loading-ui"),e.j41(3,"div",29)(4,"div"),e.EFF(5),e.k0s(),e.DNE(6,tf,3,4,"div",30),e.k0s()(),e.j41(7,"div",31)(8,"button",32),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.cancelApp())}),e.EFF(9,"H\u1ee7y"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.JRh(n.lastStatus?n.lastStatus:"\u0110ang x\u1eed l\xfd..."),e.R7$(),e.Y8G("ngIf",n.lastInfo)}}function wi(t,r){if(1&t&&e.nrm(0,"app-runner-main-view",36,0),2&t){const n=e.XpG(2);e.Y8G("vars",n.runInfo.vars)("template",n.runInfo.data)}}function Ni(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22)(1,"button",37),e.bIt("click",function(){let s;e.eBV(n);const l=e.XpG(2);return e.Njj(l.resumeApp(null!==(s=null==l.runInfo?null:l.runInfo.next)&&void 0!==s?s:""))}),e.EFF(2," Ti\u1ebfp t\u1ee5c "),e.k0s()()}}function Ms(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",34),e.DNE(2,wi,2,2,"app-runner-main-view",35),e.k0s(),e.DNE(3,Ni,3,0,"div",18),e.k0s()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.data),e.R7$(),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.next)}}let Ei=(()=>{var t;class r{constructor(o,s,l,u){(0,f.A)(this,"route",void 0),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"showActions",!0),(0,f.A)(this,"queryParamsObject",{}),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"appInfo",void 0),(0,f.A)(this,"data",[]),(0,f.A)(this,"id",0),(0,f.A)(this,"forms",[]),(0,f.A)(this,"his",void 0),(0,f.A)(this,"isDone",!1),(0,f.A)(this,"isAsync",!0),(0,f.A)(this,"isFullScreen",!1),(0,f.A)(this,"hasCustomSubmitBtn",!1),(0,f.A)(this,"submitBtn",{title:"B\u1eaft \u0111\u1ea7u",icon:""}),(0,f.A)(this,"isUploading",!1),(0,f.A)(this,"files",[]),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"strResult",""),(0,f.A)(this,"isCancelling",!1),(0,f.A)(this,"showLogDetail",!1),(0,f.A)(this,"strStatus",[]),(0,f.A)(this,"lastStatus",""),(0,f.A)(this,"lastInfo",""),(0,f.A)(this,"runInfo",void 0),(0,f.A)(this,"curToken",""),this.route=o,this.auth=s,this.userSv=l,this.appService=u}getInteracValue(){return this.interacComp?.getValue()}ngOnInit(){this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),o=>{this.loadApp()})}loadApp(){this.id=this.appId,this.load()}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(o=>{this.appService.history(this.id).subscribe(u=>{this.his=u}),this.appInfo=o,this.isAsync=1==o.pinTaskbar,this.data=JSON.parse(o.config);let s=[];for(let u of this.data)s.push(...u.links);this.forms=this.data.filter(u=>-1==s.indexOf(u.id)&&"form"==u.type);let l=this.forms[0]?.conf.filter(u=>"submit"==u.value.type)[0]?.value;this.submitBtn={title:l?.label??"B\u1eaft \u0111\u1ea7u",icon:l?.desc??""},0==this.forms.length&&(this.isRunning=!0,this.isDone=!1,this.runApp(this.queryParamsObject))})}onStartUpload(){this.isUploading=!0}onUploaded(o){let s=this.files.filter(l=>l.name==o.name)[0];s?(s.file=o.file,s.content=o.content):this.files.push(o),this.isUploading=!1}close(){window.history.back()}submit(o){var s=this;return(0,ge.A)(function*(){o.preventDefault(),s.isRunning=!0,s.isDone=!1;let l=yield s.getFormArgs();s.runApp(l)})()}getFormArgs(){var o=this;return(0,ge.A)(function*(){let s=document.getElementById("nodeForms");const l=new FormData(s);for(let p of o.files){l.set(p.name,p.content);let _=yield Ge.fileToBase64(p.file);l.set(p.name+"-dataUrl",_)}let u={};return l.forEach((p,_)=>{o.vars.set(_,p instanceof File?p:JSON.stringify(p)),u[_]=p}),u})()}cancelApp(){this.isCancelling=!0,this.appService.cancel(this.curToken).subscribe(o=>{this.isCancelling=!1})}checkStatus(o){this.isRunning&&""!=o?this.appService.status(o).subscribe({next:s=>{if("success"==s.status)this.renderRunInfo(JSON.parse(s.data??"{}"));else{let l=s.message?.split("\n")??[];this.strStatus=[],this.lastInfo="";for(let _ of l)_.startsWith("[i]:")?(this.strStatus[this.strStatus.length-1].startsWith("[i]:")?this.strStatus[this.strStatus.length-1]+=_.substring(4):this.strStatus.push(_),this.lastInfo=_.substring(4)):(this.lastInfo="",this.strStatus.push(_));let p=this.strStatus.filter(_=>!_.startsWith("[i]:"));this.lastStatus=p.length>0?p[p.length-1]:this.lastStatus}setTimeout(()=>{this.checkStatus(o)},1e3)},error:s=>{this.strStatus=[s.message]}}):this.strStatus=[]}loadPrevRunning(){this.his?.token&&(this.isRunning=!0,this.isDone=!1,this.curToken=this.his.token,this.checkStatus(this.his.token))}onRunJS(o){if(!this.runInfo)return;let s=this.getVarValue(o.act);new Function(s)(o.el)}setValue(o,s){if(!this.runInfo)return;let l=o.split("."),u=l[0],p=-1;if(u.endsWith("]")){let x=u.split("[");p=+x[1].split("]")[0],u=x[0]}let _=this.runInfo.vars.filter(x=>x.startsWith(`${u}::`))[0],v=this.runInfo.vars.indexOf(_),g=JSON.parse(_.substring(u.length+2)),y=g;if(p>=0&&(y=y[p],1==l.length))return g[p]=s,void(this.runInfo.vars[v]=u+"::"+JSON.stringify(g,null,2));if(1!=l.length){for(let x=1;x<l.length-1;x++){let C=l[x].split("[");if(C.length>1){let I=+C[1].replace("]","");y=y[C[0]][I]}else y=y[C[0]]}y[l[l.length-1]]=s,this.runInfo.vars[v]=u+"::"+JSON.stringify(g,null,2)}else this.runInfo.vars[v]=u+"::"+s}getVarValue(o){if(!this.runInfo)return"";let s=o.split("."),l=s[0],u=-1;if(l.endsWith("]")){let v=l.split("[");u=+v[1].split("]")[0],l=v[0]}let p=this.runInfo.vars.filter(v=>v.startsWith(`${l}::`))[0],_=JSON.parse(p.substring(l.length+2));u>=0&&(_=_[u]);for(let v=1;v<s.length;v++){let g=s[v].split("[");if(g.length>1){let y=+g[1].replace("]","");_=_[g[0]][y]}else _=_[g[0]]}return _}restart(){location.reload()}resumeApp(o){var s=this;return(0,ge.A)(function*(){let l=s.getInteracValue(),u=o.split(":"),p={};for(let v of s.runInfo?.vars??[]){let g=v.split("::");p[g[0]]=g[1]}l?.varName&&(p[l.varName]=l.value);let _=yield s.getFormArgs();for(let v in _)p[v]=_[v];s.isRunning=!0,s.isDone=!1,s.runApp(p,`${u[0]}:${u[1]}`)})()}runApp(o,s){this.curToken="",this.isAsync?this.appService.runAppAsync((s??this.id)+"",o).subscribe({next:l=>{this.checkStatus(l.data),this.curToken=l.data},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}}):this.appService.runApp((s??this.id)+"",o).subscribe({next:l=>{this.renderRunInfo(l)},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}})}renderRunInfo(o){this.runInfo=o,this.isRunning=!1,this.isDone=!0}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(ft.nX),e.rXU(Zt.u),e.rXU(St.R),e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-app-view"]],viewQuery:function(o,s){if(1&o&&e.GBs(Vu,5),2&o){let l;e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{appId:"appId",showActions:"showActions",queryParamsObject:"queryParamsObject"},standalone:!0,features:[e.aNF],decls:10,vars:4,consts:[["interacComp",""],[1,"app-main"],[1,"window-container","window-container-sm"],["data-windowbackdrop","true",1,"window","window--active"],[1,"w-100","overflow-hidden",2,"margin-top","10px"],["class","window-top-btn",4,"ngIf"],[1,"window-content","window-content-sm","pb-3"],[1,"pb-3","window-dark","window-dark-sm"],["class","ml-5 mr-5 mt-2 position-relative","id","nodeForms",3,"submit",4,"ngIf"],["class","ml-5 mr-5 position-relative",4,"ngIf"],[1,"window-top-btn"],[1,"window__controls","text-right"],[1,"window__close","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x"],["d","M18 6 6 18","key","1bl5f8"],["d","m6 6 12 12","key","d8bk6v"],["id","nodeForms",1,"ml-5","mr-5","mt-2","position-relative",3,"submit"],[4,"ngFor","ngForOf"],["class","mt-3 text-right",4,"ngIf"],["class","node-form mb-3",4,"ngIf"],[1,"node-form","mb-3"],[3,"onStartUpload","onUploaded","data","appId"],[1,"mt-3","text-right"],["class","btn btn-secondary mr-3","type","button",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"class",4,"ngIf"],["type","button",1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"ml-5","mr-5","position-relative"],[1,"mt-5","flex","items-center"],["id","run-msg",1,"inline-block","ml-2"],["class","small text-muted",4,"ngIf"],[1,"text-right","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"small","text-muted"],[1,"mt-3"],[3,"vars","template",4,"ngIf"],[3,"vars","template"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,s){1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e.DNE(4,zu,6,0,"div",5),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Pu,3,2,"form",8)(8,go,10,2,"div",9)(9,Ms,4,2,"div",9),e.k0s()()()()()()),2&o&&(e.R7$(4),e.Y8G("ngIf",s.showActions),e.R7$(3),e.Y8G("ngIf",!s.isRunning&&!s.isDone),e.R7$(),e.Y8G("ngIf",s.isRunning),e.R7$(),e.Y8G("ngIf",s.isDone&&!s.isRunning))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.qT,N.cb,N.cV,Ns,Fs,Ft,Oe.b,Me.Q,we.R],styles:[".position-relative[_ngcontent-%COMP%]{position:relative}"]})),r})(),yn=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-edu-store-teacher"]],standalone:!0,features:[e.aNF],decls:13,vars:2,consts:[[1,"grid","grid-cols-2","gap-4","mt-3"],[1,"box"],[1,"text-center","mt-3"],["href","/vi/admin/ai/app/10",1,"btn","btn-primary"],[1,"bx","bx-plus","mr-2"],[3,"appId","showActions"]],template:function(o,s){1&o&&(e.j41(0,"teacher-layout")(1,"div",0)(2,"div",1)(3,"div",2),e.EFF(4,"PHI\xcaN D\u1ea0Y \u0110\u1ec0 XU\u1ea4T CHO B\u1ea0N"),e.k0s()(),e.j41(5,"div",1)(6,"div",2),e.EFF(7,"DANH S\xc1CH PHI\xcaN D\u1ea0Y B\u1ea0N \u0110\xc3 \u0110\u0102NG K\xdd"),e.k0s(),e.j41(8,"div",2)(9,"a",3),e.nrm(10,"i",4),e.EFF(11," \u0110\u0103ng k\xfd phi\xean d\u1ea1y m\u1edbi "),e.k0s()(),e.nrm(12,"app-app-view",5),e.k0s()()()),2&o&&(e.R7$(12),e.Y8G("appId",11)("showActions",!1))},dependencies:[Oe.b,Do,Ei]})),r})();var S=se(1395);function gt(t){if("string"==typeof t||"number"==typeof t)return""+t;let r="";if(Array.isArray(t))for(let o,n=0;n<t.length;n++)""!==(o=gt(t[n]))&&(r+=(r&&" ")+o);else for(let n in t)t[n]&&(r+=(r&&" ")+n);return r}var to=se(7528);const Bn=t=>{let r;const n=new Set,o=(g,y)=>{const x="function"==typeof g?g(r):g;if(!Object.is(x,r)){const C=r;r=y??("object"!=typeof x||null===x)?x:Object.assign({},r,x),n.forEach(I=>I(r,C))}},s=()=>r,_={setState:o,getState:s,getInitialState:()=>v,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},v=r=t(o,s,_);return _},{useDebugValue:bl}=S,{useSyncExternalStoreWithSelector:xl}=to,pn=t=>t;function an(t,r=pn,n){const o=xl(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,n);return bl(o),o}const Ke=(t,r)=>{const n=(t=>t?Bn(t):Bn)(t),o=(s,l=r)=>an(n,s,l);return Object.assign(o,n),o};function Rt(t,r){if(Object.is(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[o,s]of t)if(!Object.is(s,r.get(o)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(r,o)||!Object.is(t[o],r[o]))return!1;return!0}var Cl={value:()=>{}};function $s(){for(var o,t=0,r=arguments.length,n={};t<r;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new mr(n)}function mr(t){this._=t}function Lu(t,r){for(var s,n=0,o=t.length;n<o;++n)if((s=t[n]).name===r)return s.value}function Wo(t,r,n){for(var o=0,s=t.length;o<s;++o)if(t[o].name===r){t[o]=Cl,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:r,value:n}),t}mr.prototype=$s.prototype={constructor:mr,on:function(t,r){var s,n=this._,o=function Gs(t,r){return t.trim().split(/^|\s+/).map(function(n){var o="",s=n.indexOf(".");if(s>=0&&(o=n.slice(s+1),n=n.slice(0,s)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}(t+"",n),l=-1,u=o.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++l<u;)if(s=(t=o[l]).type)n[s]=Wo(n[s],t.name,r);else if(null==r)for(s in n)n[s]=Wo(n[s],t.name,null);return this}for(;++l<u;)if((s=(t=o[l]).type)&&(s=Lu(n[s],t.name)))return s},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new mr(t)},call:function(t,r){if((s=arguments.length-2)>0)for(var s,l,n=new Array(s),o=0;o<s;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,s=(l=this._[t]).length;o<s;++o)l[o].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],s=0,l=o.length;s<l;++s)o[s].value.apply(r,n)}};const _r=$s;function rf(){}function Zo(t){return null==t?rf:function(){return this.querySelector(t)}}function Xu(){return[]}function qo(t){return null==t?Xu:function(){return this.querySelectorAll(t)}}function hr(t){return function(){return this.matches(t)}}function Jo(t){return function(r){return r.matches(t)}}var Sl=Array.prototype.find;function wl(){return this.firstElementChild}var Ii=Array.prototype.filter;function bn(){return Array.from(this.children)}function Pn(t){return new Array(t.length)}function Ai(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}function no(t,r,n,o,s,l){for(var p,u=0,_=r.length,v=l.length;u<v;++u)(p=r[u])?(p.__data__=l[u],o[u]=p):n[u]=new Ai(t,l[u]);for(;u<_;++u)(p=r[u])&&(s[u]=p)}function bo(t,r,n,o,s,l,u){var p,_,C,v=new Map,g=r.length,y=l.length,x=new Array(g);for(p=0;p<g;++p)(_=r[p])&&(x[p]=C=u.call(_,_.__data__,p,r)+"",v.has(C)?s[p]=_:v.set(C,_));for(p=0;p<y;++p)C=u.call(t,l[p],p,l)+"",(_=v.get(C))?(o[p]=_,_.__data__=l[p],v.delete(C)):n[p]=new Ai(t,l[p]);for(p=0;p<g;++p)(_=r[p])&&v.get(x[p])===_&&(s[p]=_)}function Vs(t){return t.__data__}function zs(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Qo(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}Ai.prototype={constructor:Ai,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var br="http://www.w3.org/1999/xhtml";const Ps={svg:"http://www.w3.org/2000/svg",xhtml:br,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ei(t){var r=t+="",n=r.indexOf(":");return n>=0&&"xmlns"!==(r=t.slice(0,n))&&(t=t.slice(n+1)),Ps.hasOwnProperty(r)?{space:Ps[r],local:t}:t}function Tl(t){return function(){this.removeAttribute(t)}}function ti(t){return function(){this.removeAttributeNS(t.space,t.local)}}function st(t,r){return function(){this.setAttribute(t,r)}}function Et(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function jt(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ls(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sf(t){return function(){this.style.removeProperty(t)}}function Pt(t,r,n){return function(){this.style.setProperty(t,r,n)}}function Fl(t,r,n){return function(){var o=r.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function xo(t,r){return t.style.getPropertyValue(r)||Fi(t).getComputedStyle(t,null).getPropertyValue(r)}function Un(t){return function(){delete this[t]}}function xn(t,r){return function(){this[t]=r}}function Cr(t,r){return function(){var n=r.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Us(t){return t.trim().split(/^|\s+/)}function Xs(t){return t.classList||new Ml(t)}function Ml(t){this._node=t,this._names=Us(t.getAttribute("class")||"")}function $l(t,r){for(var n=Xs(t),o=-1,s=r.length;++o<s;)n.add(r[o])}function Gl(t,r){for(var n=Xs(t),o=-1,s=r.length;++o<s;)n.remove(r[o])}function Ku(t){return function(){$l(this,t)}}function Qu(t){return function(){Gl(this,t)}}function ed(t,r){return function(){(r.apply(this,arguments)?$l:Gl)(this,t)}}function Sr(){this.textContent=""}function nd(t){return function(){this.textContent=t}}function Ys(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function od(){this.innerHTML=""}function Dl(t){return function(){this.innerHTML=t}}function id(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function sd(){this.nextSibling&&this.parentNode.appendChild(this)}function Ol(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cd(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===br&&r.documentElement.namespaceURI===br?r.createElement(t):r.createElementNS(n,t)}}function ud(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function dd(t){var r=ei(t);return(r.local?ud:cd)(r)}function af(){return null}function fd(){var t=this.parentNode;t&&t.removeChild(this)}function _d(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Ws(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Vl(t){return function(){var r=this.__on;if(r){for(var l,n=0,o=-1,s=r.length;n<s;++n)l=r[n],t.type&&l.type!==t.type||l.name!==t.name?r[++o]=l:this.removeEventListener(l.type,l.listener,l.options);++o?r.length=o:delete this.__on}}}function Zs(t,r,n){return function(){var s,o=this.__on,l=function df(t){return function(r){t.call(this,r,this.__data__)}}(r);if(o)for(var u=0,p=o.length;u<p;++u)if((s=o[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=l,s.options=n),void(s.value=r);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:r,listener:l,options:n},o?o.push(s):this.__on=[s]}}function zl(t,r,n){var o=Fi(t),s=o.CustomEvent;"function"==typeof s?s=new s(r,n):(s=o.document.createEvent("Event"),n?(s.initEvent(r,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(r,!1,!1)),t.dispatchEvent(s)}function gd(t,r){return function(){return zl(this,t,r)}}function Bl(t,r){return function(){return zl(this,t,r.apply(this,arguments))}}Ml.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var qs=[null];function fn(t,r){this._groups=t,this._parents=r}function Ll(){return new fn([[document.documentElement]],qs)}fn.prototype=Ll.prototype={constructor:fn,select:function Ds(t){"function"!=typeof t&&(t=Zo(t));for(var r=this._groups,n=r.length,o=new Array(n),s=0;s<n;++s)for(var _,v,l=r[s],u=l.length,p=o[s]=new Array(u),g=0;g<u;++g)(_=l[g])&&(v=t.call(_,_.__data__,g,l))&&("__data__"in _&&(v.__data__=_.__data__),p[g]=v);return new fn(o,this._parents)},selectAll:function Os(t){t="function"==typeof t?function Yu(t){return function(){return function Uu(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):qo(t);for(var r=this._groups,n=r.length,o=[],s=[],l=0;l<n;++l)for(var _,u=r[l],p=u.length,v=0;v<p;++v)(_=u[v])&&(o.push(t.call(_,_.__data__,v,u)),s.push(_));return new fn(o,s)},selectChild:function Nl(t){return this.select(null==t?wl:function kl(t){return function(){return Sl.call(this.children,t)}}("function"==typeof t?t:Jo(t)))},selectChildren:function El(t){return this.selectAll(null==t?bn:function Ko(t){return function(){return Ii.call(this.children,t)}}("function"==typeof t?t:Jo(t)))},filter:function Hu(t){"function"!=typeof t&&(t=hr(t));for(var r=this._groups,n=r.length,o=new Array(n),s=0;s<n;++s)for(var _,l=r[s],u=l.length,p=o[s]=[],v=0;v<u;++v)(_=l[v])&&t.call(_,_.__data__,v,l)&&p.push(_);return new fn(o,this._parents)},data:function Zu(t,r){if(!arguments.length)return Array.from(this,Vs);var n=r?bo:no,o=this._parents,s=this._groups;"function"!=typeof t&&(t=function Wu(t){return function(){return t}}(t));for(var l=s.length,u=new Array(l),p=new Array(l),_=new Array(l),v=0;v<l;++v){var g=o[v],y=s[v],x=y.length,C=zs(t.call(g,g&&g.__data__,v,o)),I=C.length,A=p[v]=new Array(I),T=u[v]=new Array(I);n(g,y,A,T,_[v]=new Array(x),C,r);for(var $,X,M=0,O=0;M<I;++M)if($=A[M]){for(M>=O&&(O=M+1);!(X=T[O])&&++O<I;);$._next=X||null}}return(u=new fn(u,o))._enter=p,u._exit=_,u},enter:function yo(){return new fn(this._enter||this._groups.map(Pn),this._parents)},exit:function qu(){return new fn(this._exit||this._groups.map(Pn),this._parents)},join:function gr(t,r,n){var o=this.enter(),s=this,l=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=r&&(s=r(s))&&(s=s.selection()),null==n?l.remove():n(l),o&&s?o.merge(s).order():s},merge:function Ln(t){for(var r=t.selection?t.selection():t,n=this._groups,o=r._groups,s=n.length,u=Math.min(s,o.length),p=new Array(s),_=0;_<u;++_)for(var C,v=n[_],g=o[_],y=v.length,x=p[_]=new Array(y),I=0;I<y;++I)(C=v[I]||g[I])&&(x[I]=C);for(;_<s;++_)p[_]=n[_];return new fn(p,this._parents)},selection:function vd(){return this},order:function vr(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var u,o=t[r],s=o.length-1,l=o[s];--s>=0;)(u=o[s])&&(l&&4^u.compareDocumentPosition(l)&&l.parentNode.insertBefore(u,l),l=u);return this},sort:function yr(t){function r(y,x){return y&&x?t(y.__data__,x.__data__):!y-!x}t||(t=Qo);for(var n=this._groups,o=n.length,s=new Array(o),l=0;l<o;++l){for(var v,u=n[l],p=u.length,_=s[l]=new Array(p),g=0;g<p;++g)(v=u[g])&&(_[g]=v);_.sort(r)}return new fn(s,this._parents).order()},call:function Il(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Ti(){return Array.from(this)},node:function Ju(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],s=0,l=o.length;s<l;++s){var u=o[s];if(u)return u}return null},size:function Al(){let t=0;for(const r of this)++t;return t},empty:function rt(){return!this.node()},each:function Bs(t){for(var r=this._groups,n=0,o=r.length;n<o;++n)for(var p,s=r[n],l=0,u=s.length;l<u;++l)(p=s[l])&&t.call(p,p.__data__,l,s);return this},attr:function xr(t,r){var n=ei(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==r?n.local?ti:Tl:"function"==typeof r?n.local?Ls:jt:n.local?Et:st)(n,r))},style:function Rl(t,r,n){return arguments.length>1?this.each((null==r?sf:"function"==typeof r?Fl:Pt)(t,r,n??"")):xo(this.node(),t)},property:function jl(t,r){return arguments.length>1?this.each((null==r?Un:"function"==typeof r?Cr:xn)(t,r)):this.node()[t]},classed:function td(t,r){var n=Us(t+"");if(arguments.length<2){for(var o=Xs(this.node()),s=-1,l=n.length;++s<l;)if(!o.contains(n[s]))return!1;return!0}return this.each(("function"==typeof r?ed:r?Ku:Qu)(n,r))},text:function Hs(t){return arguments.length?this.each(null==t?Sr:("function"==typeof t?Ys:nd)(t)):this.node().textContent},html:function rd(t){return arguments.length?this.each(null==t?od:("function"==typeof t?id:Dl)(t)):this.node().innerHTML},raise:function ad(){return this.each(sd)},lower:function ld(){return this.each(Ol)},append:function pd(t){var r="function"==typeof t?t:dd(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function lf(t,r){var n="function"==typeof t?t:dd(t),o=null==r?af:"function"==typeof r?r:Zo(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function md(){return this.each(fd)},clone:function cf(t){return this.select(t?Ws:_d)},datum:function uf(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function hd(t,r,n){var s,u,o=function An(t){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");return o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),{type:r,name:n}})}(t+""),l=o.length;if(!(arguments.length<2)){for(p=r?Zs:Vl,s=0;s<l;++s)this.each(p(o[s],r,n));return this}var p=this.node().__on;if(p)for(var g,_=0,v=p.length;_<v;++_)for(s=0,g=p[_];s<l;++s)if((u=o[s]).type===g.type&&u.name===g.name)return g.value},dispatch:function Ri(t,r){return this.each(("function"==typeof r?Bl:gd)(t,r))},[Symbol.iterator]:function*Pl(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var u,o=t[r],s=0,l=o.length;s<l;++s)(u=o[s])&&(yield u)}};const ji=Ll;function Cn(t){return"string"==typeof t?new fn([[document.querySelector(t)]],[document.documentElement]):new fn([[t]],qs)}const yd={passive:!1},kr={capture:!0,passive:!1};function Lt(t){t.stopImmediatePropagation()}function kt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ul(t){var r=t.document.documentElement,n=Cn(t).on("dragstart.drag",kt,kr);"onselectstart"in r?n.on("selectstart.drag",kt,kr):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Xl(t,r){var n=t.document.documentElement,o=Cn(t).on("dragstart.drag",null);r&&(o.on("click.drag",kt,kr),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Yl(t){return((t=Math.exp(t))+1/t)/2}const Cd=function t(r,n,o){function s(l,u){var T,E,p=l[0],_=l[1],v=l[2],x=u[2],C=u[0]-p,I=u[1]-_,A=C*C+I*I;if(A<1e-12)E=Math.log(x/v)/r,T=function(U){return[p+U*C,_+U*I,v*Math.exp(r*U*E)]};else{var M=Math.sqrt(A),O=(x*x-v*v+o*A)/(2*v*n*M),$=(x*x-v*v-o*A)/(2*x*n*M),X=Math.log(Math.sqrt(O*O+1)-O),Y=Math.log(Math.sqrt($*$+1)-$);E=(Y-X)/r,T=function(U){var te=U*E,H=Yl(X),ue=v/(n*M)*(H*function Hl(t){return((t=Math.exp(2*t))-1)/(t+1)}(r*te+X)-function xd(t){return((t=Math.exp(t))-1/t)/2}(X));return[p+ue*C,_+ue*I,v*H/Yl(r*te+X)]}}return T.duration=1e3*E*r/Math.SQRT2,T}return s.rho=function(l){var u=Math.max(.001,+l),p=u*u;return t(u,p,p*p)},s}(Math.SQRT2,2,4);function Tn(t,r){if(t=function Wl(t){let r;for(;r=t.sourceEvent;)t=r;return t}(t),void 0===r&&(r=t.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(r.getScreenCTM().inverse())).x,o.y]}if(r.getBoundingClientRect){var s=r.getBoundingClientRect();return[t.clientX-s.left-r.clientLeft,t.clientY-s.top-r.clientTop]}}return[t.pageX,t.pageY]}var Mi,Co,ni=0,oi=0,ii=0,Zl=1e3,Js=0,So=0,$i=0,Gi="object"==typeof performance&&performance.now?performance:Date,wr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fn(){return So||(wr(pf),So=Gi.now()+$i)}function pf(){So=0}function Nr(){this._call=this._time=this._next=null}function Ks(t,r,n){var o=new Nr;return o.restart(t,r,n),o}function ql(){So=(Js=Gi.now())+$i,ni=oi=0;try{!function Sd(){Fn(),++ni;for(var r,t=Mi;t;)(r=So-t._time)>=0&&t._call.call(void 0,r),t=t._next;--ni}()}finally{ni=0,function Ut(){for(var t,n,r=Mi,o=1/0;r;)r._call?(o>r._time&&(o=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:Mi=n);Co=t,Jl(o)}(),So=0}}function Er(){var t=Gi.now(),r=t-Js;r>Zl&&($i-=r,Js=t)}function Jl(t){ni||(oi&&(oi=clearTimeout(oi)),t-So>24?(t<1/0&&(oi=setTimeout(ql,t-Gi.now()-$i)),ii&&(ii=clearInterval(ii))):(ii||(Js=Gi.now(),ii=setInterval(Er,Zl)),ni=1,wr(ql)))}function kd(t,r,n){var o=new Nr;return o.restart(s=>{o.stop(),t(s+r)},r=null==r?0:+r,n),o}Nr.prototype=Ks.prototype={constructor:Nr,restart:function(t,r,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Fn():+n)+(null==r?0:+r),!this._next&&Co!==this&&(Co?Co._next=this:Mi=this,Co=this),this._call=t,this._time=n,Jl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jl())}};var Qs=_r("start","end","cancel","interrupt"),Xt=[],wd=0,Di=3;function ri(t,r,n,o,s,l){var u=t.__transition;if(u){if(n in u)return}else t.__transition={};!function Nd(t,r,n){var s,o=t.__transition;function u(v){var g,y,x,C;if(1!==n.state)return _();for(g in o)if((C=o[g]).name===n.name){if(C.state===Di)return kd(u);4===C.state?(C.state=6,C.timer.stop(),C.on.call("interrupt",t,t.__data__,C.index,C.group),delete o[g]):+g<r&&(C.state=6,C.timer.stop(),C.on.call("cancel",t,t.__data__,C.index,C.group),delete o[g])}if(kd(function(){n.state===Di&&(n.state=4,n.timer.restart(p,n.delay,n.time),p(v))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=Di,s=new Array(x=n.tween.length),g=0,y=-1;g<x;++g)(C=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(s[++y]=C);s.length=y+1}}function p(v){for(var g=v<n.duration?n.ease.call(null,v/n.duration):(n.timer.restart(_),n.state=5,1),y=-1,x=s.length;++y<x;)s[y].call(t,g);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){for(var v in n.state=6,n.timer.stop(),delete o[r],o)return;delete t.__transition}o[r]=n,n.timer=Ks(function l(v){n.state=1,n.timer.restart(u,n.delay,n.time),n.delay<=v&&u(v-n.delay)},0,n.time)}(t,n,{name:r,index:o,group:s,on:Qs,tween:Xt,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:wd})}function Ir(t,r){var n=Sn(t,r);if(n.state>wd)throw new Error("too late; already scheduled");return n}function Rn(t,r){var n=Sn(t,r);if(n.state>Di)throw new Error("too late; already running");return n}function Sn(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function Oi(t,r){var o,s,u,n=t.__transition,l=!0;if(n){for(u in r=null==r?null:r+"",n)(o=n[u]).name===r?(s=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(s?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[u]):l=!1;l&&delete t.__transition}}function nt(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Ar,kn=180/Math.PI,Xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tc(t,r,n,o,s,l){var u,p,_;return(u=Math.sqrt(t*t+r*r))&&(t/=u,r/=u),(_=t*n+r*o)&&(n-=t*_,o-=r*_),(p=Math.sqrt(n*n+o*o))&&(n/=p,o/=p,_/=p),t*o<r*n&&(t=-t,r=-r,_=-_,u=-u),{translateX:s,translateY:l,rotate:Math.atan2(r,t)*kn,skewX:Math.atan(_)*kn,scaleX:u,scaleY:p}}function Mn(t,r,n,o){function s(v){return v.length?v.pop()+" ":""}return function(v,g){var y=[],x=[];return v=t(v),g=t(g),function l(v,g,y,x,C,I){if(v!==y||g!==x){var A=C.push("translate(",null,r,null,n);I.push({i:A-4,x:nt(v,y)},{i:A-2,x:nt(g,x)})}else(y||x)&&C.push("translate("+y+r+x+n)}(v.translateX,v.translateY,g.translateX,g.translateY,y,x),function u(v,g,y,x){v!==g?(v-g>180?g+=360:g-v>180&&(v+=360),x.push({i:y.push(s(y)+"rotate(",null,o)-2,x:nt(v,g)})):g&&y.push(s(y)+"rotate("+g+o)}(v.rotate,g.rotate,y,x),function p(v,g,y,x){v!==g?x.push({i:y.push(s(y)+"skewX(",null,o)-2,x:nt(v,g)}):g&&y.push(s(y)+"skewX("+g+o)}(v.skewX,g.skewX,y,x),function _(v,g,y,x,C,I){if(v!==y||g!==x){var A=C.push(s(C)+"scale(",null,",",null,")");I.push({i:A-4,x:nt(v,y)},{i:A-2,x:nt(g,x)})}else(1!==y||1!==x)&&C.push(s(C)+"scale("+y+","+x+")")}(v.scaleX,v.scaleY,g.scaleX,g.scaleY,y,x),v=g=null,function(C){for(var T,I=-1,A=x.length;++I<A;)y[(T=x[I]).i]=T.x(C);return y.join("")}}}var ff=Mn(function jn(t){const r=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?Xn:tc(r.a,r.b,r.c,r.d,r.e,r.f)},"px, ","px)","deg)"),Id=Mn(function Ed(t){return null!=t&&(Ar||(Ar=document.createElementNS("http://www.w3.org/2000/svg","g")),Ar.setAttribute("transform",t),t=Ar.transform.baseVal.consolidate())?tc((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Xn},", ",")",")");function Ad(t,r){var n,o;return function(){var s=Rn(this,t),l=s.tween;if(l!==n)for(var u=0,p=(o=n=l).length;u<p;++u)if(o[u].name===r){(o=o.slice()).splice(u,1);break}s.tween=o}}function Td(t,r,n){var o,s;if("function"!=typeof n)throw new Error;return function(){var l=Rn(this,t),u=l.tween;if(u!==o){s=(o=u).slice();for(var p={name:r,value:n},_=0,v=s.length;_<v;++_)if(s[_].name===r){s[_]=p;break}_===v&&s.push(p)}l.tween=s}}function nc(t,r,n){var o=t._id;return t.each(function(){var s=Rn(this,o);(s.value||(s.value={}))[r]=n.apply(this,arguments)}),function(s){return Sn(s,o).value[r]}}function Vi(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function ea(t,r){var n=Object.create(t.prototype);for(var o in r)n[o]=r[o];return n}function Yt(){}var vt=1/.7,Qe="\\s*([+-]?\\d+)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zi=/^#([0-9a-f]{3,8})$/,It=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),Tr=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),si=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${yt}\\)$`),ta=new RegExp(`^rgba\\(${dt},${dt},${dt},${yt}\\)$`),oc=new RegExp(`^hsl\\(${yt},${dt},${dt}\\)$`),Fr=new RegExp(`^hsla\\(${yt},${dt},${dt},${yt}\\)$`),Jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function na(){return this.rgb().formatHex()}function Rr(){return this.rgb().formatRgb()}function ai(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=zi.exec(t))?(n=r[1].length,r=parseInt(r[1],16),6===n?io(r):3===n?new Mt(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===n?li(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===n?li(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=It.exec(t))?new Mt(r[1],r[2],r[3],1):(r=Tr.exec(t))?new Mt(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=si.exec(t))?li(r[1],r[2],r[3],r[4]):(r=ta.exec(t))?li(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=oc.exec(t))?Kt(r[1],r[2]/100,r[3]/100,1):(r=Fr.exec(t))?Kt(r[1],r[2]/100,r[3]/100,r[4]):Jt.hasOwnProperty(t)?io(Jt[t]):"transparent"===t?new Mt(NaN,NaN,NaN,0):null}function io(t){return new Mt(t>>16&255,t>>8&255,255&t,1)}function li(t,r,n,o){return o<=0&&(t=r=n=NaN),new Mt(t,r,n,o)}function ci(t,r,n,o){return 1===arguments.length?function No(t){return t instanceof Yt||(t=ai(t)),t?new Mt((t=t.rgb()).r,t.g,t.b,t.opacity):new Mt}(t):new Mt(t,r,n,o??1)}function Mt(t,r,n,o){this.r=+t,this.g=+r,this.b=+n,this.opacity=+o}function oa(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}`}function jr(){const t=$t(this.opacity);return`${1===t?"rgb(":"rgba("}${ln(this.r)}, ${ln(this.g)}, ${ln(this.b)}${1===t?")":`, ${t})`}`}function $t(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ln(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vt(t){return((t=ln(t))<16?"0":"")+t.toString(16)}function Kt(t,r,n,o){return o<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new mn(t,r,n,o)}function ic(t){if(t instanceof mn)return new mn(t.h,t.s,t.l,t.opacity);if(t instanceof Yt||(t=ai(t)),!t)return new mn;if(t instanceof mn)return t;var r=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,s=Math.min(r,n,o),l=Math.max(r,n,o),u=NaN,p=l-s,_=(l+s)/2;return p?(u=r===l?(n-o)/p+6*(n<o):n===l?(o-r)/p+2:(r-n)/p+4,p/=_<.5?l+s:2-l-s,u*=60):p=_>0&&_<1?0:u,new mn(u,p,_,t.opacity)}function mn(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}function Rd(t){return(t=(t||0)%360)<0?t+360:t}function $n(t){return Math.max(0,Math.min(1,t||0))}function ra(t,r,n){return 255*(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)}function sa(t,r,n,o,s){var l=t*t,u=l*t;return((1-3*t+3*l-u)*r+(4-6*l+3*u)*n+(1+3*t+3*l-3*u)*o+u*s)/6}Vi(Yt,ai,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:na,formatHex:na,formatHex8:function Bi(){return this.rgb().formatHex8()},formatHsl:function oo(){return ic(this).formatHsl()},formatRgb:Rr,toString:Rr}),Vi(Mt,ci,ea(Yt,{brighter(t){return t=null==t?vt:Math.pow(vt,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(ln(this.r),ln(this.g),ln(this.b),$t(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oa,formatHex:oa,formatHex8:function ia(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}${Vt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:jr,toString:jr})),Vi(mn,function rc(t,r,n,o){return 1===arguments.length?ic(t):new mn(t,r,n,o??1)},ea(Yt,{brighter(t){return t=null==t?vt:Math.pow(vt,t),new mn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new mn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*r,s=2*n-o;return new Mt(ra(t>=240?t-240:t+120,s,o),ra(t,s,o),ra(t<120?t+240:t-120,s,o),this.opacity)},clamp(){return new mn(Rd(this.h),$n(this.s),$n(this.l),$t(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$t(this.opacity);return`${1===t?"hsl(":"hsla("}${Rd(this.h)}, ${100*$n(this.s)}%, ${100*$n(this.l)}%${1===t?")":`, ${t})`}`}}));const Eo=t=>()=>t;function $d(t,r){var n=r-t;return n?function ac(t,r){return function(n){return t+n*r}}(t,n):Eo(isNaN(t)?r:t)}const Gd=function t(r){var n=function aa(t){return 1==(t=+t)?$d:function(r,n){return n-r?function jd(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}(r,n,t):Eo(isNaN(r)?n:r)}}(r);function o(s,l){var u=n((s=ci(s)).r,(l=ci(l)).r),p=n(s.g,l.g),_=n(s.b,l.b),v=$d(s.opacity,l.opacity);return function(g){return s.r=u(g),s.g=p(g),s.b=_(g),s.opacity=v(g),s+""}}return o.gamma=t,o}(1);function lc(t){return function(r){var u,p,n=r.length,o=new Array(n),s=new Array(n),l=new Array(n);for(u=0;u<n;++u)p=ci(r[u]),o[u]=p.r||0,s[u]=p.g||0,l[u]=p.b||0;return o=t(o),s=t(s),l=t(l),p.opacity=1,function(_){return p.r=o(_),p.g=s(_),p.b=l(_),p+""}}}lc(function ui(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),s=t[o],l=t[o+1];return sa((n-o/r)*r,o>0?t[o-1]:2*s-l,s,l,o<r-1?t[o+2]:2*l-s)}}),lc(function sc(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r);return sa((n-o/r)*r,t[(o+r-1)%r],t[o%r],t[(o+1)%r],t[(o+2)%r])}});var cc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Io=new RegExp(cc.source,"g");function _f(t,r){var o,s,l,n=cc.lastIndex=Io.lastIndex=0,u=-1,p=[],_=[];for(t+="",r+="";(o=cc.exec(t))&&(s=Io.exec(r));)(l=s.index)>n&&(l=r.slice(n,l),p[u]?p[u]+=l:p[++u]=l),(o=o[0])===(s=s[0])?p[u]?p[u]+=s:p[++u]=s:(p[++u]=null,_.push({i:u,x:nt(o,s)})),n=Io.lastIndex;return n<r.length&&(l=r.slice(n),p[u]?p[u]+=l:p[++u]=l),p.length<2?_[0]?function pt(t){return function(r){return t(r)+""}}(_[0].x):function Dd(t){return function(){return t}}(r):(r=_.length,function(v){for(var y,g=0;g<r;++g)p[(y=_[g]).i]=y.x(v);return p.join("")})}function uc(t,r){var n;return("number"==typeof r?nt:r instanceof ai?Gd:(n=ai(r))?(r=n,Gd):_f)(t,r)}function hf(t){return function(){this.removeAttribute(t)}}function gf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Od(t,r,n){var o,l,s=n+"";return function(){var u=this.getAttribute(t);return u===s?null:u===o?l:l=r(o=u,n)}}function Vd(t,r,n){var o,l,s=n+"";return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===o?l:l=r(o=u,n)}}function vf(t,r,n){var o,s,l;return function(){var u,_,p=n(this);return null==p?void this.removeAttribute(t):(u=this.getAttribute(t))===(_=p+"")?null:u===o&&_===s?l:(s=_,l=r(o=u,p))}}function wn(t,r,n){var o,s,l;return function(){var u,_,p=n(this);return null==p?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local))===(_=p+"")?null:u===o&&_===s?l:(s=_,l=r(o=u,p))}}function la(t,r){var n,o;function s(){var l=r.apply(this,arguments);return l!==o&&(n=(o=l)&&function Ao(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}(t,l)),n}return s._value=r,s}function di(t,r){var n,o;function s(){var l=r.apply(this,arguments);return l!==o&&(n=(o=l)&&function yf(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}(t,l)),n}return s._value=r,s}function pc(t,r){return function(){Ir(this,t).delay=+r.apply(this,arguments)}}function fc(t,r){return r=+r,function(){Ir(this,t).delay=r}}function mc(t,r){return function(){Rn(this,t).duration=+r.apply(this,arguments)}}function xf(t,r){return r=+r,function(){Rn(this,t).duration=r}}var ma=ji.prototype.constructor;function Xd(t){return function(){this.style.removeProperty(t)}}var _e=0;function fe(t,r,n,o){this._groups=t,this._parents=r,this._name=n,this._id=o}function G(){return++_e}var R=ji.prototype;fe.prototype=function bt(t){return ji().transition(t)}.prototype={constructor:fe,select:function Ud(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=Zo(t));for(var o=this._groups,s=o.length,l=new Array(s),u=0;u<s;++u)for(var g,y,p=o[u],_=p.length,v=l[u]=new Array(_),x=0;x<_;++x)(g=p[x])&&(y=t.call(g,g.__data__,x,p))&&("__data__"in g&&(y.__data__=g.__data__),v[x]=y,ri(v[x],r,n,x,v,Sn(g,n)));return new fe(l,this._parents,r,n)},selectAll:function Sf(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=qo(t));for(var o=this._groups,s=o.length,l=[],u=[],p=0;p<s;++p)for(var g,_=o[p],v=_.length,y=0;y<v;++y)if(g=_[y]){for(var C,x=t.call(g,g.__data__,y,_),I=Sn(g,n),A=0,T=x.length;A<T;++A)(C=x[A])&&ri(C,r,n,A,x,I);l.push(x),u.push(g)}return new fe(l,u,r,n)},selectChild:R.selectChild,selectChildren:R.selectChildren,filter:function _c(t){"function"!=typeof t&&(t=hr(t));for(var r=this._groups,n=r.length,o=new Array(n),s=0;s<n;++s)for(var _,l=r[s],u=l.length,p=o[s]=[],v=0;v<u;++v)(_=l[v])&&t.call(_,_.__data__,v,l)&&p.push(_);return new fe(o,this._parents,this._name,this._id)},merge:function Cf(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,o=r.length,l=Math.min(o,n.length),u=new Array(o),p=0;p<l;++p)for(var x,_=r[p],v=n[p],g=_.length,y=u[p]=new Array(g),C=0;C<g;++C)(x=_[C]||v[C])&&(y[C]=x);for(;p<o;++p)u[p]=r[p];return new fe(u,this._parents,this._name,this._id)},selection:function kf(){return new ma(this._groups,this._parents)},transition:function W(){for(var t=this._name,r=this._id,n=G(),o=this._groups,s=o.length,l=0;l<s;++l)for(var _,u=o[l],p=u.length,v=0;v<p;++v)if(_=u[v]){var g=Sn(_,r);ri(_,t,n,v,u,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new fe(o,this._parents,t,n)},call:R.call,nodes:R.nodes,node:R.node,size:R.size,empty:R.empty,each:R.each,on:function pa(t,r){var n=this._id;return arguments.length<2?Sn(this.node(),n).on.on(t):this.each(function hc(t,r,n){var o,s,l=function Ld(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||"start"===r})}(r)?Ir:Rn;return function(){var u=l(this,t),p=u.on;p!==o&&(s=(o=p).copy()).on(r,n),u.on=s}}(n,t,r))},attr:function dc(t,r){var n=ei(t),o="transform"===n?Id:uc;return this.attrTween(t,"function"==typeof r?(n.local?wn:vf)(n,o,nc(this,"attr."+t,r)):null==r?(n.local?gf:hf)(n):(n.local?Vd:Od)(n,o,r))},attrTween:function ca(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!=typeof r)throw new Error;var o=ei(t);return this.tween(n,(o.local?la:di)(o,r))},style:function c(t,r,n){var o="transform"==(t+="")?ff:uc;return null==r?this.styleTween(t,function Mr(t,r){var n,o,s;return function(){var l=xo(this,t),u=(this.style.removeProperty(t),xo(this,t));return l===u?null:l===n&&u===o?s:s=r(n=l,o=u)}}(t,o)).on("end.style."+t,Xd(t)):"function"==typeof r?this.styleTween(t,function i(t,r,n){var o,s,l;return function(){var u=xo(this,t),p=n(this),_=p+"";return null==p&&(this.style.removeProperty(t),_=p=xo(this,t)),u===_?null:u===o&&_===s?l:(s=_,l=r(o=u,p))}}(t,o,nc(this,"style."+t,r))).each(function a(t,r){var n,o,s,p,l="style."+r,u="end."+l;return function(){var _=Rn(this,t),v=_.on,g=null==_.value[l]?p||(p=Xd(r)):void 0;(v!==n||s!==g)&&(o=(n=v).copy()).on(u,s=g),_.on=o}}(this._id,t)):this.styleTween(t,function _a(t,r,n){var o,l,s=n+"";return function(){var u=xo(this,t);return u===s?null:u===o?l:l=r(o=u,n)}}(t,o,r),n).on("end.style."+t,null)},styleTween:function h(t,r,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==r)return this.tween(o,null);if("function"!=typeof r)throw new Error;return this.tween(o,function m(t,r,n){var o,s;function l(){var u=r.apply(this,arguments);return u!==s&&(o=(s=u)&&function d(t,r,n){return function(o){this.style.setProperty(t,r.call(this,o),n)}}(t,u,n)),o}return l._value=r,l}(t,r,n??""))},text:function F(t){return this.tween("text","function"==typeof t?function k(t){return function(){var r=t(this);this.textContent=r??""}}(nc(this,"text",t)):function b(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function K(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function q(t){var r,n;function o(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&function V(t){return function(r){this.textContent=t.call(this,r)}}(s)),r}return o._value=t,o}(t))},remove:function fa(){return this.on("end.remove",function gc(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}(this._id))},tween:function Fd(t,r){var n=this._id;if(t+="",arguments.length<2){for(var u,o=Sn(this.node(),n).tween,s=0,l=o.length;s<l;++s)if((u=o[s]).name===t)return u.value;return null}return this.each((null==r?Ad:Td)(n,t,r))},delay:function bf(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?pc:fc)(r,t)):Sn(this.node(),r).delay},duration:function zd(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?mc:xf)(r,t)):Sn(this.node(),r).duration},ease:function ua(t){var r=this._id;return arguments.length?this.each(function Bd(t,r){if("function"!=typeof r)throw new Error;return function(){Rn(this,t).ease=r}}(r,t)):Sn(this.node(),r).ease},easeVarying:function Pd(t){if("function"!=typeof t)throw new Error;return this.each(function da(t,r){return function(){var n=r.apply(this,arguments);if("function"!=typeof n)throw new Error;Rn(this,t).ease=n}}(this._id,t))},end:function pe(){var t,r,n=this,o=n._id,s=n.size();return new Promise(function(l,u){var p={value:u},_={value:function(){0==--s&&l()}};n.each(function(){var v=Rn(this,o),g=v.on;g!==t&&((r=(t=g).copy())._.cancel.push(p),r._.interrupt.push(p),r._.end.push(_)),v.on=r}),0===s&&l()})},[Symbol.iterator]:R[Symbol.iterator]};var xe={time:null,delay:0,duration:250,ease:function he(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ce(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}ji.prototype.interrupt=function ec(t){return this.each(function(){Oi(this,t)})},ji.prototype.transition=function Ne(t){var r,n;t instanceof fe?(r=t._id,t=t._name):(r=G(),(n=xe).time=Fn(),t=null==t?null:t+"");for(var o=this._groups,s=o.length,l=0;l<s;++l)for(var _,u=o[l],p=u.length,v=0;v<p;++v)(_=u[v])&&ri(_,t,r,v,u,n||Ce(_,r));return new fe(o,this._parents,t,r)};const xt=t=>()=>t;function De(t,{sourceEvent:r,target:n,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function Ht(t,r,n){this.k=t,this.x=r,this.y=n}Ht.prototype={constructor:Ht,scale:function(t){return 1===t?this:new Ht(this.k*t,this.x,this.y)},translate:function(t,r){return 0===t&0===r?this:new Ht(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ro=new Ht(1,0,0);function wf(t){t.stopImmediatePropagation()}function vc(t){t.preventDefault(),t.stopImmediatePropagation()}function bh(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function xh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function gm(){return this.__zoom||ro}function Ch(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Sh(){return navigator.maxTouchPoints||"ontouchstart"in this}function kh(t,r,n){var o=t.invertX(r[0][0])-n[0][0],s=t.invertX(r[1][0])-n[1][0],l=t.invertY(r[0][1])-n[0][1],u=t.invertY(r[1][1])-n[1][1];return t.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}const Yd=t=>()=>t;function Nf(t,{sourceEvent:r,subject:n,target:o,identifier:s,active:l,x:u,y:p,dx:_,dy:v,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:g}})}function Nh(t){return!t.ctrlKey&&!t.button}function Eh(){return this.parentNode}function Ih(t,r){return r??{x:t.x,y:t.y}}function Ah(){return navigator.maxTouchPoints||"ontouchstart"in this}Nf.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},se(6046);const Hd=(0,S.createContext)(null),Fh=Hd.Provider,Yn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,r)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?r.targetHandle:r.sourceHandle}", edge id: ${r.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},vm=Yn.error001();function Ze(t,r){const n=(0,S.useContext)(Hd);if(null===n)throw new Error(vm);return an(n,t,r)}const At=()=>{const t=(0,S.useContext)(Hd);if(null===t)throw new Error(vm);return(0,S.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Rh=t=>t.userSelectionActive?"none":"all";function ym({position:t,children:r,className:n,style:o,...s}){const l=Ze(Rh),u=`${t}`.split("-");return S.createElement("div",{className:gt(["react-flow__panel",n,...u]),style:{...o,pointerEvents:l},...s},r)}function jh({proOptions:t,position:r="bottom-right"}){return t?.hideAttribution?null:S.createElement(ym,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},S.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var $h=(0,S.memo)(({x:t,y:r,label:n,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:l={},labelBgPadding:u=[2,4],labelBgBorderRadius:p=2,children:_,className:v,...g})=>{const y=(0,S.useRef)(null),[x,C]=(0,S.useState)({x:0,y:0,width:0,height:0}),I=gt(["react-flow__edge-textwrapper",v]);return(0,S.useEffect)(()=>{if(y.current){const A=y.current.getBBox();C({x:A.x,y:A.y,width:A.width,height:A.height})}},[n]),typeof n>"u"||!n?null:S.createElement("g",{transform:`translate(${t-x.width/2} ${r-x.height/2})`,className:I,visibility:x.width?"visible":"hidden",...g},s&&S.createElement("rect",{width:x.width+2*u[0],x:-u[0],y:-u[1],height:x.height+2*u[1],className:"react-flow__edge-textbg",style:l,rx:p,ry:p}),S.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:y,style:o},n),_)});const Ef=t=>({width:t.offsetWidth,height:t.offsetHeight}),ha=(t,r=0,n=1)=>Math.min(Math.max(t,r),n),If=(t={x:0,y:0},r)=>({x:ha(t.x,r[0][0],r[1][0]),y:ha(t.y,r[0][1],r[1][1])}),bm=(t,r,n)=>t<r?ha(Math.abs(t-r),1,50)/50:t>n?-ha(Math.abs(t-n),1,50)/50:0,xm=(t,r)=>[20*bm(t.x,35,r.width-35),20*bm(t.y,35,r.height-35)],Cm=t=>t.getRootNode?.()||window?.document,yc=({x:t,y:r,width:n,height:o})=>({x:t,y:r,x2:t+n,y2:r+o}),wm=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Af=(t,r)=>{const n=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),o=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(n*o)},Hn=t=>!isNaN(t)&&isFinite(t),Ct=Symbol.for("internals"),Nm=["Enter"," ","Escape"];function Tf(t){const n=((t=>"nativeEvent"in t)(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Em=t=>"clientX"in t,Li=(t,r)=>{const n=Em(t),o=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:o-(r?.left??0),y:s-(r?.top??0)}},Zd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,bc=({id:t,path:r,labelX:n,labelY:o,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C=20})=>S.createElement(S.Fragment,null,S.createElement("path",{id:t,style:g,d:r,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:x}),C&&S.createElement("path",{d:r,fill:"none",strokeOpacity:0,strokeWidth:C,className:"react-flow__edge-interaction"}),s&&Hn(n)&&Hn(o)?S.createElement($h,{x:n,y:o,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v}):null);function xc(t,r,n){return void 0===n?n:o=>{const s=r().edges.find(l=>l.id===t);s&&n(o,{...s})}}function Im({sourceX:t,sourceY:r,targetX:n,targetY:o}){const s=Math.abs(n-t)/2,l=n<t?n+s:n-s,u=Math.abs(o-r)/2;return[l,o<r?o+u:o-u,s,u]}function Am({sourceX:t,sourceY:r,targetX:n,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:p}){const _=.125*t+.375*s+.375*u+.125*n,v=.125*r+.375*l+.375*p+.125*o;return[_,v,Math.abs(_-t),Math.abs(v-r)]}bc.displayName="BaseEdge";var $r=function(t){return t.Strict="strict",t.Loose="loose",t}($r||{}),ga=function(t){return t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal",t}(ga||{}),qd=function(t){return t.Partial="partial",t.Full="full",t}(qd||{}),Gr=function(t){return t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier",t}(Gr||{}),Ff=function(t){return t.Arrow="arrow",t.ArrowClosed="arrowclosed",t}(Ff||{}),be=function(t){return t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom",t}(be||{});function Tm({pos:t,x1:r,y1:n,x2:o,y2:s}){return t===be.Left||t===be.Right?[.5*(r+o),n]:[r,.5*(n+s)]}function Fm({sourceX:t,sourceY:r,sourcePosition:n=be.Bottom,targetX:o,targetY:s,targetPosition:l=be.Top}){const[u,p]=Tm({pos:n,x1:t,y1:r,x2:o,y2:s}),[_,v]=Tm({pos:l,x1:o,y1:s,x2:t,y2:r}),[g,y,x,C]=Am({sourceX:t,sourceY:r,targetX:o,targetY:s,sourceControlX:u,sourceControlY:p,targetControlX:_,targetControlY:v});return[`M${t},${r} C${u},${p} ${_},${v} ${o},${s}`,g,y,x,C]}const Rf=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,sourcePosition:s=be.Bottom,targetPosition:l=be.Top,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,interactionWidth:A})=>{const[T,E,M]=Fm({sourceX:t,sourceY:r,sourcePosition:s,targetX:n,targetY:o,targetPosition:l});return S.createElement(bc,{path:T,labelX:E,labelY:M,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,interactionWidth:A})});Rf.displayName="SimpleBezierEdge";const Rm={[be.Left]:{x:-1,y:0},[be.Right]:{x:1,y:0},[be.Top]:{x:0,y:-1},[be.Bottom]:{x:0,y:1}},jm=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function jf({sourceX:t,sourceY:r,sourcePosition:n=be.Bottom,targetX:o,targetY:s,targetPosition:l=be.Top,borderRadius:u=5,centerX:p,centerY:_,offset:v=20}){const[g,y,x,C,I]=function Vh({source:t,sourcePosition:r=be.Bottom,target:n,targetPosition:o=be.Top,center:s,offset:l}){const u=Rm[r],p=Rm[o],_={x:t.x+u.x*l,y:t.y+u.y*l},v={x:n.x+p.x*l,y:n.y+p.y*l},g=(({source:t,sourcePosition:r=be.Bottom,target:n})=>r===be.Left||r===be.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:_,sourcePosition:r,target:v}),y=0!==g.x?"x":"y",x=g[y];let I,A,C=[];const T={x:0,y:0},E={x:0,y:0},[M,O,$,X]=Im({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*p[y]==-1){I=s.x??M,A=s.y??O;const U=[{x:I,y:_.y},{x:I,y:v.y}],te=[{x:_.x,y:A},{x:v.x,y:A}];C=u[y]===x?"x"===y?U:te:"x"===y?te:U}else{const U=[{x:_.x,y:v.y}],te=[{x:v.x,y:_.y}];if(C="x"===y?u.x===x?te:U:u.y===x?U:te,r===o){const le=Math.abs(t[y]-n[y]);if(le<=l){const w=Math.min(l-1,l-le);u[y]===x?T[y]=(_[y]>t[y]?-1:1)*w:E[y]=(v[y]>n[y]?-1:1)*w}}if(r!==o){const le="x"===y?"y":"x",w=u[y]===p[le],L=_[le]>v[le],B=_[le]<v[le];(1===u[y]&&(!w&&L||w&&B)||1!==u[y]&&(!w&&B||w&&L))&&(C="x"===y?U:te)}const H={x:_.x+T.x,y:_.y+T.y},ue={x:v.x+E.x,y:v.y+E.y};Math.max(Math.abs(H.x-C[0].x),Math.abs(ue.x-C[0].x))>=Math.max(Math.abs(H.y-C[0].y),Math.abs(ue.y-C[0].y))?(I=(H.x+ue.x)/2,A=C[0].y):(I=C[0].x,A=(H.y+ue.y)/2)}return[[t,{x:_.x+T.x,y:_.y+T.y},...C,{x:v.x+E.x,y:v.y+E.y},n],I,A,$,X]}({source:{x:t,y:r},sourcePosition:n,target:{x:o,y:s},targetPosition:l,center:{x:p,y:_},offset:v});return[g.reduce((T,E,M)=>{let O="";return O=M>0&&M<g.length-1?function zh(t,r,n,o){const s=Math.min(jm(t,r)/2,jm(r,n)/2,o),{x:l,y:u}=r;return t.x===l&&l===n.x||t.y===u&&u===n.y?`L${l} ${u}`:t.y===u?`L ${l+s*(t.x<n.x?-1:1)},${u}Q ${l},${u} ${l},${u+s*(t.y<n.y?1:-1)}`:`L ${l},${u+s*(t.y<n.y?-1:1)}Q ${l},${u} ${l+s*(t.x<n.x?1:-1)},${u}`}(g[M-1],E,g[M+1],u):`${0===M?"M":"L"}${E.x} ${E.y}`,T+O},""),y,x,C,I]}const Jd=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,sourcePosition:y=be.Bottom,targetPosition:x=be.Top,markerEnd:C,markerStart:I,pathOptions:A,interactionWidth:T})=>{const[E,M,O]=jf({sourceX:t,sourceY:r,sourcePosition:y,targetX:n,targetY:o,targetPosition:x,borderRadius:A?.borderRadius,offset:A?.offset});return S.createElement(bc,{path:E,labelX:M,labelY:O,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:C,markerStart:I,interactionWidth:T})});Jd.displayName="SmoothStepEdge";const Mf=(0,S.memo)(t=>S.createElement(Jd,{...t,pathOptions:(0,S.useMemo)(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Mf.displayName="StepEdge";const $f=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C})=>{const[I,A,T]=function Bh({sourceX:t,sourceY:r,targetX:n,targetY:o}){const[s,l,u,p]=Im({sourceX:t,sourceY:r,targetX:n,targetY:o});return[`M ${t},${r}L ${n},${o}`,s,l,u,p]}({sourceX:t,sourceY:r,targetX:n,targetY:o});return S.createElement(bc,{path:I,labelX:A,labelY:T,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C})});function Kd(t,r){return t>=0?.5*t:25*r*Math.sqrt(-t)}function Mm({pos:t,x1:r,y1:n,x2:o,y2:s,c:l}){switch(t){case be.Left:return[r-Kd(r-o,l),n];case be.Right:return[r+Kd(o-r,l),n];case be.Top:return[r,n-Kd(n-s,l)];case be.Bottom:return[r,n+Kd(s-n,l)]}}function $m({sourceX:t,sourceY:r,sourcePosition:n=be.Bottom,targetX:o,targetY:s,targetPosition:l=be.Top,curvature:u=.25}){const[p,_]=Mm({pos:n,x1:t,y1:r,x2:o,y2:s,c:u}),[v,g]=Mm({pos:l,x1:o,y1:s,x2:t,y2:r,c:u}),[y,x,C,I]=Am({sourceX:t,sourceY:r,targetX:o,targetY:s,sourceControlX:p,sourceControlY:_,targetControlX:v,targetControlY:g});return[`M${t},${r} C${p},${_} ${v},${g} ${o},${s}`,y,x,C,I]}$f.displayName="StraightEdge";const Qd=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,sourcePosition:s=be.Bottom,targetPosition:l=be.Top,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,pathOptions:A,interactionWidth:T})=>{const[E,M,O]=$m({sourceX:t,sourceY:r,sourcePosition:s,targetX:n,targetY:o,targetPosition:l,curvature:A?.curvature});return S.createElement(bc,{path:E,labelX:M,labelY:O,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,interactionWidth:T})});Qd.displayName="BezierEdge";const Gf=(0,S.createContext)(null),Ph=Gf.Provider,Dm=({source:t,sourceHandle:r,target:n,targetHandle:o})=>`reactflow__edge-${t}${r||""}-${n}${o||""}`,Df=(t,r)=>typeof t>"u"?"":"string"==typeof t?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`,Om=(t,r)=>{if(!t.source||!t.target)return Yn.error006(),r;let n;return n=(t=>"id"in t&&"source"in t&&"target"in t)(t)?{...t}:{...t,id:Dm(t)},((t,r)=>r.some(n=>!(n.source!==t.source||n.target!==t.target||n.sourceHandle!==t.sourceHandle&&(n.sourceHandle||t.sourceHandle)||n.targetHandle!==t.targetHandle&&(n.targetHandle||t.targetHandle))))(n,r)?r:r.concat(n)},Of=({x:t,y:r},[n,o,s],l,[u,p])=>{const _={x:(t-n)/s,y:(r-o)/s};return l?{x:u*Math.round(_.x/u),y:p*Math.round(_.y/p)}:_},Vm=({x:t,y:r},[n,o,s])=>({x:t*s+n,y:r*s+o}),va=(t,r=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*r[0],o=(t.height??0)*r[1],s={x:t.position.x-n,y:t.position.y-o};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:s}},ep=(t,r=[0,0])=>{if(0===t.length)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,s)=>{const{x:l,y:u}=va(s,r).positionAbsolute;return((t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}))(o,yc({x:l,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:t,y:r,x2:n,y2:o})=>({x:t,y:r,width:n-t,height:o-r}))(n)},zm=(t,r,[n,o,s]=[0,0,1],l=!1,u=!1,p=[0,0])=>{const _={x:(r.x-n)/s,y:(r.y-o)/s,width:r.width/s,height:r.height/s},v=[];return t.forEach(g=>{const{width:y,height:x,selectable:C=!0,hidden:I=!1}=g;if(u&&!C||I)return!1;const{positionAbsolute:A}=va(g,p),E=Af(_,{x:A.x,y:A.y,width:y||0,height:x||0});(typeof y>"u"||typeof x>"u"||null===y||null===x||l&&E>0||E>=(y||0)*(x||0)||g.dragging)&&v.push(g)}),v},Bm=(t,r)=>{const n=t.map(o=>o.id);return r.filter(o=>n.includes(o.source)||n.includes(o.target))},Vf=(t,r,n,o,s,l=.1)=>{const _=Math.min(r/(t.width*(1+l)),n/(t.height*(1+l))),v=ha(_,o,s);return{x:r/2-(t.x+t.width/2)*v,y:n/2-(t.y+t.height/2)*v,zoom:v}},Dr=(t,r=0)=>t.transition().duration(r);function Pm(t,r,n,o){return(r[n]||[]).reduce((s,l)=>(`${t.id}-${l.id}-${n}`!==o&&s.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),s),[])}const Wh={source:null,target:null,sourceHandle:null,targetHandle:null},Lm=()=>({handleDomNode:null,isValid:!1,connection:Wh,endHandle:null});function Um(t,r,n,o,s,l,u){const p="target"===s,_=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),v={...Lm(),handleDomNode:_};if(_){const g=zf(void 0,_),y=_.getAttribute("data-nodeid"),x=_.getAttribute("data-handleid"),C=_.classList.contains("connectable"),I=_.classList.contains("connectableend"),A={source:p?y:n,sourceHandle:p?x:o,target:p?n:y,targetHandle:p?o:x};v.connection=A,C&&I&&(r===$r.Strict?p&&"source"===g||!p&&"target"===g:y!==n||x!==o)&&(v.endHandle={nodeId:y,handleId:x,type:g},v.isValid=l(A))}return v}function zf(t,r){return t||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function Bf(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function qh(t,r){let n=null;return r?n="valid":t&&!r&&(n="invalid"),n}function Xm({event:t,handleId:r,nodeId:n,onConnect:o,isTarget:s,getState:l,setState:u,isValidConnection:p,edgeUpdaterType:_,onReconnectEnd:v}){const g=Cm(t.target),{connectionMode:y,domNode:x,autoPanOnConnect:C,connectionRadius:I,onConnectStart:A,panBy:T,getNodes:E,cancelConnection:M}=l();let $,O=0;const{x:X,y:Y}=Li(t),U=g?.elementFromPoint(X,Y),te=zf(_,U),H=x?.getBoundingClientRect();if(!H||!te)return;let ue,ie=Li(t,H),de=!1,le=null,w=!1,L=null;const B=function Zh({nodes:t,nodeId:r,handleId:n,handleType:o}){return t.reduce((s,l)=>{if(l[Ct]){const{handleBounds:u}=l[Ct];let p=[],_=[];u&&(p=Pm(l,u,"source",`${r}-${n}-${o}`),_=Pm(l,u,"target",`${r}-${n}-${o}`)),s.push(...p,..._)}return s},[])}({nodes:E(),nodeId:n,handleId:r,handleType:te}),J=()=>{if(!C)return;const[Q,re]=xm(ie,H);T({x:Q,y:re}),O=requestAnimationFrame(J)};function ae(Q){const{transform:re}=l();ie=Li(Q,H);const{handle:ce,validHandleResult:ye}=function Hh(t,r,n,o,s,l){const{x:u,y:p}=Li(t),v=r.elementsFromPoint(u,p).find(I=>I.classList.contains("react-flow__handle"));if(v){const I=v.getAttribute("data-nodeid");if(I){const A=zf(void 0,v),T=v.getAttribute("data-handleid"),E=l({nodeId:I,id:T,type:A});if(E){const M=s.find(O=>O.nodeId===I&&O.type===A&&O.id===T);return{handle:{id:T,type:A,nodeId:I,x:M?.x||n.x,y:M?.y||n.y},validHandleResult:E}}}}let g=[],y=1/0;if(s.forEach(I=>{const A=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(A<=o){const T=l(I);A<=y&&(A<y?g=[{handle:I,validHandleResult:T}]:A===y&&g.push({handle:I,validHandleResult:T}),y=A)}}),!g.length)return{handle:null,validHandleResult:Lm()};if(1===g.length)return g[0];const x=g.some(({validHandleResult:I})=>I.isValid),C=g.some(({handle:I})=>"target"===I.type);return g.find(({handle:I,validHandleResult:A})=>C?"target"===I.type:!x||A.isValid)||g[0]}(Q,g,Of(ie,re,!1,[1,1]),I,B,ve=>Um(ve,y,n,r,s?"target":"source",p,g));if($=ce,de||(J(),de=!0),L=ye.handleDomNode,le=ye.connection,w=ye.isValid,u({connectionPosition:$&&w?Vm({x:$.x,y:$.y},re):ie,connectionStatus:qh(!!$,w),connectionEndHandle:ye.endHandle}),!$&&!w&&!L)return Bf(ue);le.source!==le.target&&L&&(Bf(ue),ue=L,L.classList.add("connecting","react-flow__handle-connecting"),L.classList.toggle("valid",w),L.classList.toggle("react-flow__handle-valid",w))}function P(Q){($||L)&&le&&w&&o?.(le),l().onConnectEnd?.(Q),_&&v?.(Q),Bf(ue),M(),cancelAnimationFrame(O),de=!1,w=!1,le=null,L=null,g.removeEventListener("mousemove",ae),g.removeEventListener("mouseup",P),g.removeEventListener("touchmove",ae),g.removeEventListener("touchend",P)}u({connectionPosition:ie,connectionStatus:null,connectionNodeId:n,connectionHandleId:r,connectionHandleType:te,connectionStartHandle:{nodeId:n,handleId:r,type:te},connectionEndHandle:null}),A?.(t,{nodeId:n,handleId:r,handleType:te}),g.addEventListener("mousemove",ae),g.addEventListener("mouseup",P),g.addEventListener("touchmove",ae),g.addEventListener("touchend",P)}const Ym=()=>!0,Jh=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Hm=(0,S.forwardRef)(({type:t="source",position:r=be.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:u,onConnect:p,children:_,className:v,onMouseDown:g,onTouchStart:y,...x},C)=>{const I=u||null,A="target"===t,T=At(),E=(0,S.useContext)(Gf),{connectOnClick:M,noPanClassName:O}=Ze(Jh,Rt),{connecting:$,clickConnecting:X}=Ze(((t,r,n)=>o=>{const{connectionStartHandle:s,connectionEndHandle:l,connectionClickStartHandle:u}=o;return{connecting:s?.nodeId===t&&s?.handleId===r&&s?.type===n||l?.nodeId===t&&l?.handleId===r&&l?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===r&&u?.type===n}})(E,I,t),Rt);E||T.getState().onError?.("010",Yn.error010());const Y=H=>{const{defaultEdgeOptions:ue,onConnect:ie,hasDefaultEdges:de}=T.getState(),le={...ue,...H};if(de){const{edges:w,setEdges:L}=T.getState();L(Om(le,w))}ie?.(le),p?.(le)},U=H=>{if(!E)return;const ue=Em(H);s&&(ue&&0===H.button||!ue)&&Xm({event:H,handleId:I,nodeId:E,onConnect:Y,isTarget:A,getState:T.getState,setState:T.setState,isValidConnection:n||T.getState().isValidConnection||Ym}),ue?g?.(H):y?.(H)};return S.createElement("div",{"data-handleid":I,"data-nodeid":E,"data-handlepos":r,"data-id":`${E}-${I}-${t}`,className:gt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",O,v,{source:!A,target:A,connectable:o,connectablestart:s,connectableend:l,connecting:X,connectionindicator:o&&(s&&!$||l&&$)}]),onMouseDown:U,onTouchStart:U,onClick:M?H=>{const{onClickConnectStart:ue,onClickConnectEnd:ie,connectionClickStartHandle:de,connectionMode:le,isValidConnection:w}=T.getState();if(!E||!de&&!s)return;if(!de)return ue?.(H,{nodeId:E,handleId:I,handleType:t}),void T.setState({connectionClickStartHandle:{nodeId:E,type:t,handleId:I}});const L=Cm(H.target),B=n||w||Ym,{connection:J,isValid:ae}=Um({nodeId:E,id:I,type:t},le,de.nodeId,de.handleId||null,de.type,B,L);ae&&Y(J),ie?.(H),T.setState({connectionClickStartHandle:null})}:void 0,ref:C,...x},_)});Hm.displayName="Handle";var ya=(0,S.memo)(Hm);const Wm=({data:t,isConnectable:r,targetPosition:n=be.Top,sourcePosition:o=be.Bottom})=>S.createElement(S.Fragment,null,S.createElement(ya,{type:"target",position:n,isConnectable:r}),t?.label,S.createElement(ya,{type:"source",position:o,isConnectable:r}));Wm.displayName="DefaultNode";var Pf=(0,S.memo)(Wm);const Zm=({data:t,isConnectable:r,sourcePosition:n=be.Bottom})=>S.createElement(S.Fragment,null,t?.label,S.createElement(ya,{type:"source",position:n,isConnectable:r}));Zm.displayName="InputNode";var qm=(0,S.memo)(Zm);const Jm=({data:t,isConnectable:r,targetPosition:n=be.Top})=>S.createElement(S.Fragment,null,S.createElement(ya,{type:"target",position:n,isConnectable:r}),t?.label);Jm.displayName="OutputNode";var Km=(0,S.memo)(Jm);const Lf=()=>null;Lf.displayName="GroupNode";const Qh=t=>({selectedNodes:t.getNodes().filter(r=>r.selected),selectedEdges:t.edges.filter(r=>r.selected).map(r=>({...r}))}),tp=t=>t.id;function eg(t,r){return Rt(t.selectedNodes.map(tp),r.selectedNodes.map(tp))&&Rt(t.selectedEdges.map(tp),r.selectedEdges.map(tp))}const Qm=(0,S.memo)(({onSelectionChange:t})=>{const r=At(),{selectedNodes:n,selectedEdges:o}=Ze(Qh,eg);return(0,S.useEffect)(()=>{const s={nodes:n,edges:o};t?.(s),r.getState().onSelectionChange.forEach(l=>l(s))},[n,o,t]),null});Qm.displayName="SelectionListener";const tg=t=>!!t.onSelectionChange;function ng({onSelectionChange:t}){const r=Ze(tg);return t||r?S.createElement(Qm,{onSelectionChange:t}):null}const og=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function ba(t,r){(0,S.useEffect)(()=>{typeof t<"u"&&r(t)},[t])}function je(t,r,n){(0,S.useEffect)(()=>{typeof r<"u"&&n({[t]:r})},[r])}const ig=({nodes:t,edges:r,defaultNodes:n,defaultEdges:o,onConnect:s,onConnectStart:l,onConnectEnd:u,onClickConnectStart:p,onClickConnectEnd:_,nodesDraggable:v,nodesConnectable:g,nodesFocusable:y,edgesFocusable:x,edgesUpdatable:C,elevateNodesOnSelect:I,minZoom:A,maxZoom:T,nodeExtent:E,onNodesChange:M,onEdgesChange:O,elementsSelectable:$,connectionMode:X,snapGrid:Y,snapToGrid:U,translateExtent:te,connectOnClick:H,defaultEdgeOptions:ue,fitView:ie,fitViewOptions:de,onNodesDelete:le,onEdgesDelete:w,onNodeDrag:L,onNodeDragStart:B,onNodeDragStop:J,onSelectionDrag:ae,onSelectionDragStart:P,onSelectionDragStop:Q,noPanClassName:re,nodeOrigin:ce,rfId:ye,autoPanOnConnect:ve,autoPanOnNodeDrag:Te,onError:Ue,connectionRadius:Ye,isValidConnection:et,nodeDragThreshold:wt})=>{const{setNodes:at,setEdges:so,setDefaultNodesAndEdges:Zn,setMinZoom:ao,setMaxZoom:qn,setTranslateExtent:zt,setNodeExtent:Ro,reset:lt}=Ze(og,Rt),Se=At();return(0,S.useEffect)(()=>{const Gn=o?.map(Br=>({...Br,...ue}));return Zn(n,Gn),()=>{lt()}},[]),je("defaultEdgeOptions",ue,Se.setState),je("connectionMode",X,Se.setState),je("onConnect",s,Se.setState),je("onConnectStart",l,Se.setState),je("onConnectEnd",u,Se.setState),je("onClickConnectStart",p,Se.setState),je("onClickConnectEnd",_,Se.setState),je("nodesDraggable",v,Se.setState),je("nodesConnectable",g,Se.setState),je("nodesFocusable",y,Se.setState),je("edgesFocusable",x,Se.setState),je("edgesUpdatable",C,Se.setState),je("elementsSelectable",$,Se.setState),je("elevateNodesOnSelect",I,Se.setState),je("snapToGrid",U,Se.setState),je("snapGrid",Y,Se.setState),je("onNodesChange",M,Se.setState),je("onEdgesChange",O,Se.setState),je("connectOnClick",H,Se.setState),je("fitViewOnInit",ie,Se.setState),je("fitViewOnInitOptions",de,Se.setState),je("onNodesDelete",le,Se.setState),je("onEdgesDelete",w,Se.setState),je("onNodeDrag",L,Se.setState),je("onNodeDragStart",B,Se.setState),je("onNodeDragStop",J,Se.setState),je("onSelectionDrag",ae,Se.setState),je("onSelectionDragStart",P,Se.setState),je("onSelectionDragStop",Q,Se.setState),je("noPanClassName",re,Se.setState),je("nodeOrigin",ce,Se.setState),je("rfId",ye,Se.setState),je("autoPanOnConnect",ve,Se.setState),je("autoPanOnNodeDrag",Te,Se.setState),je("onError",Ue,Se.setState),je("connectionRadius",Ye,Se.setState),je("isValidConnection",et,Se.setState),je("nodeDragThreshold",wt,Se.setState),ba(t,at),ba(r,so),ba(A,ao),ba(T,qn),ba(te,zt),ba(E,Ro),null},e_={display:"none"},rg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},t_="react-flow__node-desc",n_="react-flow__edge-desc",sg="react-flow__aria-live",ag=t=>t.ariaLiveMessage;function lg({rfId:t}){const r=Ze(ag);return S.createElement("div",{id:`${sg}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:rg},r)}function cg({rfId:t,disableKeyboardA11y:r}){return S.createElement(S.Fragment,null,S.createElement("div",{id:`${t_}-${t}`,style:e_},"Press enter or space to select a node.",!r&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),S.createElement("div",{id:`${n_}-${t}`,style:e_},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!r&&S.createElement(lg,{rfId:t}))}var Cc=(t=null,r={actInsideInputWithModifier:!0})=>{const[n,o]=(0,S.useState)(!1),s=(0,S.useRef)(!1),l=(0,S.useRef)(new Set([])),[u,p]=(0,S.useMemo)(()=>{if(null!==t){const v=(Array.isArray(t)?t:[t]).filter(y=>"string"==typeof y).map(y=>y.split("+")),g=v.reduce((y,x)=>y.concat(...x),[]);return[v,g]}return[[],[]]},[t]);return(0,S.useEffect)(()=>{const _=typeof document<"u"?document:null,v=r?.target||_;if(null!==t){const g=C=>{if(s.current=C.ctrlKey||C.metaKey||C.shiftKey,(!s.current||s.current&&!r.actInsideInputWithModifier)&&Tf(C))return!1;const A=i_(C.code,p);l.current.add(C[A]),o_(u,l.current,!1)&&(C.preventDefault(),o(!0))},y=C=>{if((!s.current||s.current&&!r.actInsideInputWithModifier)&&Tf(C))return!1;const A=i_(C.code,p);o_(u,l.current,!0)?(o(!1),l.current.clear()):l.current.delete(C[A]),"Meta"===C.key&&l.current.clear(),s.current=!1},x=()=>{l.current.clear(),o(!1)};return v?.addEventListener("keydown",g),v?.addEventListener("keyup",y),window.addEventListener("blur",x),()=>{v?.removeEventListener("keydown",g),v?.removeEventListener("keyup",y),window.removeEventListener("blur",x)}}},[t,o]),n};function o_(t,r,n){return t.filter(o=>n||o.length===r.size).some(o=>o.every(s=>r.has(s)))}function i_(t,r){return r.includes(t)?"code":"key"}function r_(t,r,n,o){const s=t.parentNode||t.parentId;if(!s)return n;const l=r.get(s),u=va(l,o);return r_(l,r,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(l[Ct]?.z??0)>(n.z??0)?l[Ct]?.z??0:n.z??0},o)}function s_(t,r,n){t.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[o.id]){const{x:l,y:u,z:p}=r_(o,t,{...o.position,z:o[Ct]?.z??0},r);o.positionAbsolute={x:l,y:u},o[Ct].z=p,n?.[o.id]&&(o[Ct].isParent=!0)}})}function Uf(t,r,n,o){const s=new Map,l={},u=o?1e3:0;return t.forEach(p=>{const _=(Hn(p.zIndex)?p.zIndex:0)+(p.selected?u:0),v=r.get(p.id),g={...p,positionAbsolute:{x:p.position.x,y:p.position.y}},y=p.parentNode||p.parentId;y&&(l[y]=!0),Object.defineProperty(g,Ct,{enumerable:!1,value:{handleBounds:v?.type&&v?.type!==p.type?void 0:v?.[Ct]?.handleBounds,z:_}}),s.set(p.id,g)}),s_(s,n,l),s}function a_(t,r={}){const{getNodes:n,width:o,height:s,minZoom:l,maxZoom:u,d3Zoom:p,d3Selection:_,fitViewOnInitDone:v,fitViewOnInit:g,nodeOrigin:y}=t();if(p&&_&&(r.initial&&!v&&g||!r.initial)){const I=n().filter(T=>{const E=r.includeHiddenNodes?T.width&&T.height:!T.hidden;return r.nodes?.length?E&&r.nodes.some(M=>M.id===T.id):E}),A=I.every(T=>T.width&&T.height);if(I.length>0&&A){const T=ep(I,y),{x:E,y:M,zoom:O}=Vf(T,o,s,r.minZoom??l,r.maxZoom??u,r.padding??.1),$=ro.translate(E,M).scale(O);return p.transform("number"==typeof r.duration&&r.duration>0?Dr(_,r.duration):_,$),!0}}return!1}function ug(t,r){return t.forEach(n=>{const o=r.get(n.id);o&&r.set(o.id,{...o,[Ct]:o[Ct],selected:n.selected})}),new Map(r)}function dg(t,r){return r.map(n=>{const o=t.find(s=>s.id===n.id);return o&&(n.selected=o.selected),n})}function np({changedNodes:t,changedEdges:r,get:n,set:o}){const{nodeInternals:s,edges:l,onNodesChange:u,onEdgesChange:p,hasDefaultNodes:_,hasDefaultEdges:v}=n();t?.length&&(_&&o({nodeInternals:ug(t,s)}),u?.(t)),r?.length&&(v&&o({edges:dg(r,l)}),p?.(r))}const xa=()=>{},pg={zoomIn:xa,zoomOut:xa,zoomTo:xa,getZoom:()=>1,setViewport:xa,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xa,fitBounds:xa,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},fg=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function Xf(){const t=(()=>{const t=At(),{d3Zoom:r,d3Selection:n}=Ze(fg,Rt);return(0,S.useMemo)(()=>n&&r?{zoomIn:s=>r.scaleBy(Dr(n,s?.duration),1.2),zoomOut:s=>r.scaleBy(Dr(n,s?.duration),1/1.2),zoomTo:(s,l)=>r.scaleTo(Dr(n,l?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,l)=>{const[u,p,_]=t.getState().transform,v=ro.translate(s.x??u,s.y??p).scale(s.zoom??_);r.transform(Dr(n,l?.duration),v)},getViewport:()=>{const[s,l,u]=t.getState().transform;return{x:s,y:l,zoom:u}},fitView:s=>a_(t.getState,s),setCenter:(s,l,u)=>{const{width:p,height:_,maxZoom:v}=t.getState(),g=typeof u?.zoom<"u"?u.zoom:v,C=ro.translate(p/2-s*g,_/2-l*g).scale(g);r.transform(Dr(n,u?.duration),C)},fitBounds:(s,l)=>{const{width:u,height:p,minZoom:_,maxZoom:v}=t.getState(),{x:g,y,zoom:x}=Vf(s,u,p,_,v,l?.padding??.1),C=ro.translate(g,y).scale(x);r.transform(Dr(n,l?.duration),C)},project:s=>{const{transform:l,snapToGrid:u,snapGrid:p}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Of(s,l,u,p)},screenToFlowPosition:s=>{const{transform:l,snapToGrid:u,snapGrid:p,domNode:_}=t.getState();if(!_)return s;const{x:v,y:g}=_.getBoundingClientRect();return Of({x:s.x-v,y:s.y-g},l,u,p)},flowToScreenPosition:s=>{const{transform:l,domNode:u}=t.getState();if(!u)return s;const{x:p,y:_}=u.getBoundingClientRect(),v=Vm(s,l);return{x:v.x+p,y:v.y+_}},viewportInitialized:!0}:pg,[r,n])})(),r=At(),n=(0,S.useCallback)(()=>r.getState().getNodes().map(A=>({...A})),[]),o=(0,S.useCallback)(A=>r.getState().nodeInternals.get(A),[]),s=(0,S.useCallback)(()=>{const{edges:A=[]}=r.getState();return A.map(T=>({...T}))},[]),l=(0,S.useCallback)(A=>{const{edges:T=[]}=r.getState();return T.find(E=>E.id===A)},[]),u=(0,S.useCallback)(A=>{const{getNodes:T,setNodes:E,hasDefaultNodes:M,onNodesChange:O}=r.getState(),$=T(),X="function"==typeof A?A($):A;M?E(X):O&&O(0===X.length?$.map(U=>({type:"remove",id:U.id})):X.map(U=>({item:U,type:"reset"})))},[]),p=(0,S.useCallback)(A=>{const{edges:T=[],setEdges:E,hasDefaultEdges:M,onEdgesChange:O}=r.getState(),$="function"==typeof A?A(T):A;M?E($):O&&O(0===$.length?T.map(Y=>({type:"remove",id:Y.id})):$.map(Y=>({item:Y,type:"reset"})))},[]),_=(0,S.useCallback)(A=>{const T=Array.isArray(A)?A:[A],{getNodes:E,setNodes:M,hasDefaultNodes:O,onNodesChange:$}=r.getState();O?M([...E(),...T]):$&&$(T.map(Y=>({item:Y,type:"add"})))},[]),v=(0,S.useCallback)(A=>{const T=Array.isArray(A)?A:[A],{edges:E=[],setEdges:M,hasDefaultEdges:O,onEdgesChange:$}=r.getState();O?M([...E,...T]):$&&$(T.map(Y=>({item:Y,type:"add"})))},[]),g=(0,S.useCallback)(()=>{const{getNodes:A,edges:T=[],transform:E}=r.getState(),[M,O,$]=E;return{nodes:A().map(X=>({...X})),edges:T.map(X=>({...X})),viewport:{x:M,y:O,zoom:$}}},[]),y=(0,S.useCallback)(({nodes:A,edges:T})=>{const{nodeInternals:E,getNodes:M,edges:O,hasDefaultNodes:$,hasDefaultEdges:X,onNodesDelete:Y,onEdgesDelete:U,onNodesChange:te,onEdgesChange:H}=r.getState(),ue=(A||[]).map(L=>L.id),ie=(T||[]).map(L=>L.id),de=M().reduce((L,B)=>{const J=B.parentNode||B.parentId,ae=!ue.includes(B.id)&&J&&L.find(Q=>Q.id===J);return("boolean"!=typeof B.deletable||B.deletable)&&(ue.includes(B.id)||ae)&&L.push(B),L},[]),le=O.filter(L=>"boolean"!=typeof L.deletable||L.deletable),w=le.filter(L=>ie.includes(L.id));if(de||w){const L=Bm(de,le),B=[...w,...L],J=B.reduce((ae,P)=>(ae.includes(P.id)||ae.push(P.id),ae),[]);(X||$)&&(X&&r.setState({edges:O.filter(ae=>!J.includes(ae.id))}),$&&(de.forEach(ae=>{E.delete(ae.id)}),r.setState({nodeInternals:new Map(E)}))),J.length>0&&(U?.(B),H&&H(J.map(ae=>({id:ae,type:"remove"})))),de.length>0&&(Y?.(de),te)&&te(de.map(P=>({id:P.id,type:"remove"})))}},[]),x=(0,S.useCallback)(A=>{const T=(t=>Hn(t.width)&&Hn(t.height)&&Hn(t.x)&&Hn(t.y))(A),E=T?null:r.getState().nodeInternals.get(A.id);return T||E?[T?A:wm(E),E,T]:[null,null,T]},[]),C=(0,S.useCallback)((A,T=!0,E)=>{const[M,O,$]=x(A);return M?(E||r.getState().getNodes()).filter(X=>{if(!($||X.id!==O.id&&X.positionAbsolute))return!1;const Y=wm(X),U=Af(Y,M);return T&&U>0||U>=M.width*M.height}):[]},[]),I=(0,S.useCallback)((A,T,E=!0)=>{const[M]=x(A);if(!M)return!1;const O=Af(M,T);return E&&O>0||O>=M.width*M.height},[]);return(0,S.useMemo)(()=>({...t,getNodes:n,getNode:o,getEdges:s,getEdge:l,setNodes:u,setEdges:p,addNodes:_,addEdges:v,toObject:g,deleteElements:y,getIntersectingNodes:C,isNodeIntersecting:I}),[t,n,o,s,l,u,p,_,v,g,y,C,I])}const _g={actInsideInputWithModifier:!1},Yf={position:"absolute",width:"100%",height:"100%",top:0,left:0},op=t=>({x:t.x,y:t.y,zoom:t.k}),Ca=(t,r)=>t.target.closest(`.${r}`),l_=(t,r)=>2===r&&Array.isArray(t)&&t.includes(2),c_=t=>{const r=t.ctrlKey&&Zd()?10:1;return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*r},yg=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),bg=({onMove:t,onMoveStart:r,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:l=!0,panOnScroll:u=!1,panOnScrollSpeed:p=.5,panOnScrollMode:_=ga.Free,zoomOnDoubleClick:v=!0,elementsSelectable:g,panOnDrag:y=!0,defaultViewport:x,translateExtent:C,minZoom:I,maxZoom:A,zoomActivationKeyCode:T,preventScrolling:E=!0,children:M,noWheelClassName:O,noPanClassName:$})=>{const X=(0,S.useRef)(),Y=At(),U=(0,S.useRef)(!1),te=(0,S.useRef)(!1),H=(0,S.useRef)(null),ue=(0,S.useRef)({x:0,y:0,zoom:0}),{d3Zoom:ie,d3Selection:de,d3ZoomHandler:le,userSelectionActive:w}=Ze(yg,Rt),L=Cc(T),B=(0,S.useRef)(0),J=(0,S.useRef)(!1),ae=(0,S.useRef)();return function gg(t){const r=At();(0,S.useEffect)(()=>{let n;const o=()=>{if(!t.current)return;const s=Ef(t.current);(0===s.height||0===s.width)&&r.getState().onError?.("004",Yn.error004()),r.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.removeEventListener("resize",o),n&&t.current&&n.unobserve(t.current)}},[])}(H),(0,S.useEffect)(()=>{if(H.current){const P=H.current.getBoundingClientRect(),Q=function wh(){var g,y,x,t=bh,r=xh,n=kh,o=Ch,s=Sh,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],p=250,_=Cd,v=_r("start","zoom","end"),C=500,I=150,A=0,T=10;function E(w){w.property("__zoom",gm).on("wheel.zoom",te,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",ue).filter(s).on("touchstart.zoom",ie).on("touchmove.zoom",de).on("touchend.zoom touchcancel.zoom",le).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function M(w,L){return(L=Math.max(l[0],Math.min(l[1],L)))===w.k?w:new Ht(L,w.x,w.y)}function O(w,L,B){var J=L[0]-B[0]*w.k,ae=L[1]-B[1]*w.k;return J===w.x&&ae===w.y?w:new Ht(w.k,J,ae)}function $(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function X(w,L,B,J){w.on("start.zoom",function(){Y(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(J).end()}).tween("zoom",function(){var ae=this,P=arguments,Q=Y(ae,P).event(J),re=r.apply(ae,P),ce=null==B?$(re):"function"==typeof B?B.apply(ae,P):B,ye=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ve=ae.__zoom,Te="function"==typeof L?L.apply(ae,P):L,Ue=_(ve.invert(ce).concat(ye/ve.k),Te.invert(ce).concat(ye/Te.k));return function(Ye){if(1===Ye)Ye=Te;else{var et=Ue(Ye),wt=ye/et[2];Ye=new Ht(wt,ce[0]-et[0]*wt,ce[1]-et[1]*wt)}Q.zoom(null,Ye)}})}function Y(w,L,B){return!B&&w.__zooming||new U(w,L)}function U(w,L){this.that=w,this.args=L,this.active=0,this.sourceEvent=null,this.extent=r.apply(w,L),this.taps=0}function te(w,...L){if(t.apply(this,arguments)){var B=Y(this,L).event(w),J=this.__zoom,ae=Math.max(l[0],Math.min(l[1],J.k*Math.pow(2,o.apply(this,arguments)))),P=Tn(w);if(B.wheel)(B.mouse[0][0]!==P[0]||B.mouse[0][1]!==P[1])&&(B.mouse[1]=J.invert(B.mouse[0]=P)),clearTimeout(B.wheel);else{if(J.k===ae)return;B.mouse=[P,J.invert(P)],Oi(this),B.start()}vc(w),B.wheel=setTimeout(function Q(){B.wheel=null,B.end()},I),B.zoom("mouse",n(O(M(J,ae),B.mouse[0],B.mouse[1]),B.extent,u))}}function H(w,...L){if(!x&&t.apply(this,arguments)){var B=w.currentTarget,J=Y(this,L,!0).event(w),ae=Cn(w.view).on("mousemove.zoom",function ce(ve){if(vc(ve),!J.moved){var Te=ve.clientX-Q,Ue=ve.clientY-re;J.moved=Te*Te+Ue*Ue>A}J.event(ve).zoom("mouse",n(O(J.that.__zoom,J.mouse[0]=Tn(ve,B),J.mouse[1]),J.extent,u))},!0).on("mouseup.zoom",function ye(ve){ae.on("mousemove.zoom mouseup.zoom",null),Xl(ve.view,J.moved),vc(ve),J.event(ve).end()},!0),P=Tn(w,B),Q=w.clientX,re=w.clientY;Ul(w.view),wf(w),J.mouse=[P,this.__zoom.invert(P)],Oi(this),J.start()}}function ue(w,...L){if(t.apply(this,arguments)){var B=this.__zoom,J=Tn(w.changedTouches?w.changedTouches[0]:w,this),ae=B.invert(J),Q=n(O(M(B,B.k*(w.shiftKey?.5:2)),J,ae),r.apply(this,L),u);vc(w),p>0?Cn(this).transition().duration(p).call(X,Q,J,w):Cn(this).call(E.transform,Q,J,w)}}function ie(w,...L){if(t.apply(this,arguments)){var P,Q,re,ce,B=w.touches,J=B.length,ae=Y(this,L,w.changedTouches.length===J).event(w);for(wf(w),Q=0;Q<J;++Q)ce=[ce=Tn(re=B[Q],this),this.__zoom.invert(ce),re.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==ce[2]&&(ae.touch1=ce,ae.taps=0):(ae.touch0=ce,P=!0,ae.taps=1+!!g);g&&(g=clearTimeout(g)),P&&(ae.taps<2&&(y=ce[0],g=setTimeout(function(){g=null},C)),Oi(this),ae.start())}}function de(w,...L){if(this.__zooming){var P,Q,re,ce,B=Y(this,L).event(w),J=w.changedTouches,ae=J.length;for(vc(w),P=0;P<ae;++P)re=Tn(Q=J[P],this),B.touch0&&B.touch0[2]===Q.identifier?B.touch0[0]=re:B.touch1&&B.touch1[2]===Q.identifier&&(B.touch1[0]=re);if(Q=B.that.__zoom,B.touch1){var ye=B.touch0[0],ve=B.touch0[1],Te=B.touch1[0],Ue=B.touch1[1],Ye=(Ye=Te[0]-ye[0])*Ye+(Ye=Te[1]-ye[1])*Ye,et=(et=Ue[0]-ve[0])*et+(et=Ue[1]-ve[1])*et;Q=M(Q,Math.sqrt(Ye/et)),re=[(ye[0]+Te[0])/2,(ye[1]+Te[1])/2],ce=[(ve[0]+Ue[0])/2,(ve[1]+Ue[1])/2]}else{if(!B.touch0)return;re=B.touch0[0],ce=B.touch0[1]}B.zoom("touch",n(O(Q,re,ce),B.extent,u))}}function le(w,...L){if(this.__zooming){var P,Q,B=Y(this,L).event(w),J=w.changedTouches,ae=J.length;for(wf(w),x&&clearTimeout(x),x=setTimeout(function(){x=null},C),P=0;P<ae;++P)Q=J[P],B.touch0&&B.touch0[2]===Q.identifier?delete B.touch0:B.touch1&&B.touch1[2]===Q.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),2===B.taps&&(Q=Tn(Q,this),Math.hypot(y[0]-Q[0],y[1]-Q[1])<T)){var re=Cn(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return E.transform=function(w,L,B,J){var ae=w.selection?w.selection():w;ae.property("__zoom",gm),w!==ae?X(w,L,B,J):ae.interrupt().each(function(){Y(this,arguments).event(J).start().zoom(null,"function"==typeof L?L.apply(this,arguments):L).end()})},E.scaleBy=function(w,L,B,J){E.scaleTo(w,function(){return this.__zoom.k*("function"==typeof L?L.apply(this,arguments):L)},B,J)},E.scaleTo=function(w,L,B,J){E.transform(w,function(){var ae=r.apply(this,arguments),P=this.__zoom,Q=null==B?$(ae):"function"==typeof B?B.apply(this,arguments):B,re=P.invert(Q),ce="function"==typeof L?L.apply(this,arguments):L;return n(O(M(P,ce),Q,re),ae,u)},B,J)},E.translateBy=function(w,L,B,J){E.transform(w,function(){return n(this.__zoom.translate("function"==typeof L?L.apply(this,arguments):L,"function"==typeof B?B.apply(this,arguments):B),r.apply(this,arguments),u)},null,J)},E.translateTo=function(w,L,B,J,ae){E.transform(w,function(){var P=r.apply(this,arguments),Q=this.__zoom,re=null==J?$(P):"function"==typeof J?J.apply(this,arguments):J;return n(ro.translate(re[0],re[1]).scale(Q.k).translate("function"==typeof L?-L.apply(this,arguments):-L,"function"==typeof B?-B.apply(this,arguments):-B),P,u)},J,ae)},U.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,L){return this.mouse&&"mouse"!==w&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&"touch"!==w&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&"touch"!==w&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var L=Cn(this.that).datum();v.call(w,this.that,new De(w,{sourceEvent:this.sourceEvent,target:E,type:w,transform:this.that.__zoom,dispatch:v}),L)}},E.wheelDelta=function(w){return arguments.length?(o="function"==typeof w?w:xt(+w),E):o},E.filter=function(w){return arguments.length?(t="function"==typeof w?w:xt(!!w),E):t},E.touchable=function(w){return arguments.length?(s="function"==typeof w?w:xt(!!w),E):s},E.extent=function(w){return arguments.length?(r="function"==typeof w?w:xt([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),E):r},E.scaleExtent=function(w){return arguments.length?(l[0]=+w[0],l[1]=+w[1],E):[l[0],l[1]]},E.translateExtent=function(w){return arguments.length?(u[0][0]=+w[0][0],u[1][0]=+w[1][0],u[0][1]=+w[0][1],u[1][1]=+w[1][1],E):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},E.constrain=function(w){return arguments.length?(n=w,E):n},E.duration=function(w){return arguments.length?(p=+w,E):p},E.interpolate=function(w){return arguments.length?(_=w,E):_},E.on=function(){var w=v.on.apply(v,arguments);return w===v?E:w},E.clickDistance=function(w){return arguments.length?(A=(w=+w)*w,E):Math.sqrt(A)},E.tapDistance=function(w){return arguments.length?(T=+w,E):T},E}().scaleExtent([I,A]).translateExtent(C),re=Cn(H.current).call(Q),ce=ro.translate(x.x,x.y).scale(ha(x.zoom,I,A)),ye=[[0,0],[P.width,P.height]],ve=Q.constrain()(ce,ye,C);Q.transform(re,ve),Q.wheelDelta(c_),Y.setState({d3Zoom:Q,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ve.x,ve.y,ve.k],domNode:H.current.closest(".react-flow")})}},[]),(0,S.useEffect)(()=>{de&&ie&&(!u||L||w?typeof le<"u"&&de.on("wheel.zoom",function(P,Q){if(!E&&"wheel"===P.type&&!P.ctrlKey||Ca(P,O))return null;P.preventDefault(),le.call(this,P,Q)},{passive:!1}):de.on("wheel.zoom",P=>{if(Ca(P,O))return!1;P.preventDefault(),P.stopImmediatePropagation();const Q=de.property("__zoom").k||1;if(P.ctrlKey&&l){const et=Tn(P),wt=c_(P),at=Q*Math.pow(2,wt);return void ie.scaleTo(de,at,et,P)}const re=1===P.deltaMode?20:1;let ce=_===ga.Vertical?0:P.deltaX*re,ye=_===ga.Horizontal?0:P.deltaY*re;!Zd()&&P.shiftKey&&_!==ga.Vertical&&(ce=P.deltaY*re,ye=0),ie.translateBy(de,-ce/Q*p,-ye/Q*p,{internal:!0});const ve=op(de.property("__zoom")),{onViewportChangeStart:Te,onViewportChange:Ue,onViewportChangeEnd:Ye}=Y.getState();clearTimeout(ae.current),J.current||(J.current=!0,r?.(P,ve),Te?.(ve)),J.current&&(t?.(P,ve),Ue?.(ve),ae.current=setTimeout(()=>{n?.(P,ve),Ye?.(ve),J.current=!1},150))},{passive:!1}))},[w,u,_,de,ie,le,L,l,E,O,r,t,n]),(0,S.useEffect)(()=>{ie&&ie.on("start",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;B.current=P.sourceEvent?.button;const{onViewportChangeStart:Q}=Y.getState(),re=op(P.transform);U.current=!0,ue.current=re,"mousedown"===P.sourceEvent?.type&&Y.setState({paneDragging:!0}),Q?.(re),r?.(P.sourceEvent,re)})},[ie,r]),(0,S.useEffect)(()=>{ie&&(w&&!U.current?ie.on("zoom",null):w||ie.on("zoom",P=>{const{onViewportChange:Q}=Y.getState();if(Y.setState({transform:[P.transform.x,P.transform.y,P.transform.k]}),te.current=!(!o||!l_(y,B.current??0)),(t||Q)&&!P.sourceEvent?.internal){const re=op(P.transform);Q?.(re),t?.(P.sourceEvent,re)}}))},[w,ie,t,y,o]),(0,S.useEffect)(()=>{ie&&ie.on("end",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=Y.getState();if(U.current=!1,Y.setState({paneDragging:!1}),o&&l_(y,B.current??0)&&!te.current&&o(P.sourceEvent),te.current=!1,(n||Q)&&((t,r)=>t.x!==r.x||t.y!==r.y||t.zoom!==r.k)(ue.current,P.transform)){const re=op(P.transform);ue.current=re,clearTimeout(X.current),X.current=setTimeout(()=>{Q?.(re),n?.(P.sourceEvent,re)},u?150:0)}})},[ie,u,y,n,o]),(0,S.useEffect)(()=>{ie&&ie.filter(P=>{const Q=L||s,re=l&&P.ctrlKey;if((!0===y||Array.isArray(y)&&y.includes(1))&&1===P.button&&"mousedown"===P.type&&(Ca(P,"react-flow__node")||Ca(P,"react-flow__edge")))return!0;if(!y&&!Q&&!u&&!v&&!l||w||!v&&"dblclick"===P.type||Ca(P,O)&&"wheel"===P.type||Ca(P,$)&&("wheel"!==P.type||u&&"wheel"===P.type&&!L)||!l&&P.ctrlKey&&"wheel"===P.type||!Q&&!u&&!re&&"wheel"===P.type||!y&&("mousedown"===P.type||"touchstart"===P.type)||Array.isArray(y)&&!y.includes(P.button)&&"mousedown"===P.type)return!1;const ce=Array.isArray(y)&&y.includes(P.button)||!P.button||P.button<=1;return(!P.ctrlKey||"wheel"===P.type)&&ce})},[w,ie,s,l,u,v,y,g,L]),S.createElement("div",{className:"react-flow__renderer",ref:H,style:Yf},M)},xg=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Cg(){const{userSelectionActive:t,userSelectionRect:r}=Ze(xg,Rt);return t&&r?S.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}function u_(t,r){const n=r.parentNode||r.parentId,o=t.find(s=>s.id===n);if(o){const s=r.position.x+r.width-o.width,l=r.position.y+r.height-o.height;if(s>0||l>0||r.position.x<0||r.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),l>0&&(o.style.height+=l),r.position.x<0){const u=Math.abs(r.position.x);o.position.x=o.position.x-u,o.style.width+=u,r.position.x=0}if(r.position.y<0){const u=Math.abs(r.position.y);o.position.y=o.position.y-u,o.style.height+=u,r.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function d_(t,r){if(t.some(o=>"reset"===o.type))return t.filter(o=>"reset"===o.type).map(o=>o.item);const n=t.filter(o=>"add"===o.type).map(o=>o.item);return r.reduce((o,s)=>{const l=t.filter(p=>p.id===s.id);if(0===l.length)return o.push(s),o;const u={...s};for(const p of l)if(p)switch(p.type){case"select":u.selected=p.selected;break;case"position":typeof p.position<"u"&&(u.position=p.position),typeof p.positionAbsolute<"u"&&(u.positionAbsolute=p.positionAbsolute),typeof p.dragging<"u"&&(u.dragging=p.dragging),u.expandParent&&u_(o,u);break;case"dimensions":typeof p.dimensions<"u"&&(u.width=p.dimensions.width,u.height=p.dimensions.height),typeof p.updateStyle<"u"&&(u.style={...u.style||{},...p.dimensions}),"boolean"==typeof p.resizing&&(u.resizing=p.resizing),u.expandParent&&u_(o,u);break;case"remove":return o}return o.push(u),o},n)}function Hf(t,r){return d_(t,r)}function p_(t,r){return d_(t,r)}const Ui=(t,r)=>({id:t,type:"select",selected:r});function Sa(t,r){return t.reduce((n,o)=>{const s=r.includes(o.id);return!o.selected&&s?(o.selected=!0,n.push(Ui(o.id,!0))):o.selected&&!s&&(o.selected=!1,n.push(Ui(o.id,!1))),n},[])}const Wf=(t,r)=>n=>{n.target===r.current&&t?.(n)},Sg=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),f_=(0,S.memo)(({isSelecting:t,selectionMode:r=qd.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:s,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:p,onPaneMouseEnter:_,onPaneMouseMove:v,onPaneMouseLeave:g,children:y})=>{const x=(0,S.useRef)(null),C=At(),I=(0,S.useRef)(0),A=(0,S.useRef)(0),T=(0,S.useRef)(),{userSelectionActive:E,elementsSelectable:M,dragging:O}=Ze(Sg,Rt),$=()=>{C.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,A.current=0},X=le=>{l?.(le),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},U=p?le=>p(le):void 0,de=M&&(t||E);return S.createElement("div",{className:gt(["react-flow__pane",{dragging:O,selection:t}]),onClick:de?void 0:Wf(X,x),onContextMenu:Wf(le=>{Array.isArray(n)&&n?.includes(2)?le.preventDefault():u?.(le)},x),onWheel:Wf(U,x),onMouseEnter:de?void 0:_,onMouseDown:de?le=>{const{resetSelectedElements:w,domNode:L}=C.getState();if(T.current=L?.getBoundingClientRect(),!M||!t||0!==le.button||le.target!==x.current||!T.current)return;const{x:B,y:J}=Li(le,T.current);w(),C.setState({userSelectionRect:{width:0,height:0,startX:B,startY:J,x:B,y:J}}),o?.(le)}:void 0,onMouseMove:de?le=>{const{userSelectionRect:w,nodeInternals:L,edges:B,transform:J,onNodesChange:ae,onEdgesChange:P,nodeOrigin:Q,getNodes:re}=C.getState();if(!t||!T.current||!w)return;C.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ce=Li(le,T.current),ye=w.startX??0,ve=w.startY??0,Te={...w,x:ce.x<ye?ce.x:ye,y:ce.y<ve?ce.y:ve,width:Math.abs(ce.x-ye),height:Math.abs(ce.y-ve)},Ue=re(),Ye=zm(L,Te,J,r===qd.Partial,!0,Q),et=Bm(Ye,B).map(at=>at.id),wt=Ye.map(at=>at.id);if(I.current!==wt.length){I.current=wt.length;const at=Sa(Ue,wt);at.length&&ae?.(at)}if(A.current!==et.length){A.current=et.length;const at=Sa(B,et);at.length&&P?.(at)}C.setState({userSelectionRect:Te})}:v,onMouseUp:de?le=>{if(0!==le.button)return;const{userSelectionRect:w}=C.getState();!E&&w&&le.target===x.current&&X?.(le),C.setState({nodesSelectionActive:I.current>0}),$(),s?.(le)}:void 0,onMouseLeave:de?le=>{E&&(C.setState({nodesSelectionActive:I.current>0}),s?.(le)),$()}:g,ref:x,style:Yf},y,S.createElement(Cg,null))});function m_(t,r){const n=t.parentNode||t.parentId;if(!n)return!1;const o=r.get(n);return!!o&&(!!o.selected||m_(o,r))}function __(t,r,n){let o=t;do{if(o?.matches(r))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function kg(t,r,n,o){return Array.from(t.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!m_(s,t))&&(s.draggable||r&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function h_(t,r,n,o,s=[0,0],l){const u=function wg(t,r){return r&&"parent"!==r?[r[0],[r[1][0]-(t.width||0),r[1][1]-(t.height||0)]]:r}(t,t.extent||o);let p=u;const _=t.parentNode||t.parentId;if("parent"!==t.extent||t.expandParent){if(t.extent&&_&&"parent"!==t.extent){const y=n.get(_),{x,y:C}=va(y,s).positionAbsolute;p=[[t.extent[0][0]+x,t.extent[0][1]+C],[t.extent[1][0]+x,t.extent[1][1]+C]]}}else if(_&&t.width&&t.height){const y=n.get(_),{x,y:C}=va(y,s).positionAbsolute;p=y&&Hn(x)&&Hn(C)&&Hn(y.width)&&Hn(y.height)?[[x+t.width*s[0],C+t.height*s[1]],[x+y.width-t.width+t.width*s[0],C+y.height-t.height+t.height*s[1]]]:p}else l?.("005",Yn.error005()),p=u;let v={x:0,y:0};if(_){const y=n.get(_);v=va(y,s).positionAbsolute}const g=p&&"parent"!==p?If(r,p):r;return{position:{x:g.x-v.x,y:g.y-v.y},positionAbsolute:g}}function Zf({nodeId:t,dragItems:r,nodeInternals:n}){const o=r.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?o.find(s=>s.id===t):o[0],o]}f_.displayName="Pane";const g_=(t,r,n,o)=>{const s=r.querySelectorAll(t);if(!s||!s.length)return null;const l=Array.from(s),u=r.getBoundingClientRect(),p_x=u.width*o[0],p_y=u.height*o[1];return l.map(_=>{const v=_.getBoundingClientRect();return{id:_.getAttribute("data-handleid"),position:_.getAttribute("data-handlepos"),x:(v.left-u.left-p_x)/n,y:(v.top-u.top-p_y)/n,...Ef(_)}})};function Sc(t,r,n){return void 0===n?n:o=>{const s=r().nodeInternals.get(t);s&&n(o,{...s})}}function qf({id:t,store:r,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:l,multiSelectionActive:u,nodeInternals:p,onError:_}=r.getState(),v=p.get(t);v?(r.setState({nodesSelectionActive:!1}),v.selected?(n||v.selected&&u)&&(l({nodes:[v],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([t])):_?.("012",Yn.error012(t))}function Jf(t){return(r,n,o)=>t?.(r,o)}function v_({nodeRef:t,disabled:r=!1,noDragClassName:n,handleSelector:o,nodeId:s,isSelectable:l,selectNodesOnDrag:u}){const p=At(),[_,v]=(0,S.useState)(!1),g=(0,S.useRef)([]),y=(0,S.useRef)({x:null,y:null}),x=(0,S.useRef)(0),C=(0,S.useRef)(null),I=(0,S.useRef)({x:0,y:0}),A=(0,S.useRef)(null),T=(0,S.useRef)(!1),E=(0,S.useRef)(!1),M=(0,S.useRef)(!1),O=function Ng(){const t=At();return(0,S.useCallback)(({sourceEvent:n})=>{const{transform:o,snapGrid:s,snapToGrid:l}=t.getState(),_={x:((n.touches?n.touches[0].clientX:n.clientX)-o[0])/o[2],y:((n.touches?n.touches[0].clientY:n.clientY)-o[1])/o[2]};return{xSnapped:l?s[0]*Math.round(_.x/s[0]):_.x,ySnapped:l?s[1]*Math.round(_.y/s[1]):_.y,..._}},[])}();return(0,S.useEffect)(()=>{if(t?.current){const $=Cn(t.current),X=({x:te,y:H})=>{const{nodeInternals:ue,onNodeDrag:ie,onSelectionDrag:de,updateNodePositions:le,nodeExtent:w,snapGrid:L,snapToGrid:B,nodeOrigin:J,onError:ae}=p.getState();y.current={x:te,y:H};let P=!1,Q={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&w){const ce=ep(g.current,J);Q=yc(ce)}if(g.current=g.current.map(ce=>{const ye={x:te-ce.distance.x,y:H-ce.distance.y};B&&(ye.x=L[0]*Math.round(ye.x/L[0]),ye.y=L[1]*Math.round(ye.y/L[1]));const ve=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];g.current.length>1&&w&&!ce.extent&&(ve[0][0]=ce.positionAbsolute.x-Q.x+w[0][0],ve[1][0]=ce.positionAbsolute.x+(ce.width??0)-Q.x2+w[1][0],ve[0][1]=ce.positionAbsolute.y-Q.y+w[0][1],ve[1][1]=ce.positionAbsolute.y+(ce.height??0)-Q.y2+w[1][1]);const Te=h_(ce,ye,ue,ve,J,ae);return P=P||ce.position.x!==Te.position.x||ce.position.y!==Te.position.y,ce.position=Te.position,ce.positionAbsolute=Te.positionAbsolute,ce}),!P)return;le(g.current,!0,!0),v(!0);const re=s?ie:Jf(de);if(re&&A.current){const[ce,ye]=Zf({nodeId:s,dragItems:g.current,nodeInternals:ue});re(A.current,ce,ye)}},Y=()=>{if(!C.current)return;const[te,H]=xm(I.current,C.current);if(0!==te||0!==H){const{transform:ue,panBy:ie}=p.getState();y.current.x=(y.current.x??0)-te/ue[2],y.current.y=(y.current.y??0)-H/ue[2],ie({x:te,y:H})&&X(y.current)}x.current=requestAnimationFrame(Y)},U=te=>{const{nodeInternals:H,multiSelectionActive:ue,nodesDraggable:ie,unselectNodesAndEdges:de,onNodeDragStart:le,onSelectionDragStart:w}=p.getState();E.current=!0;const L=s?le:Jf(w);(!u||!l)&&!ue&&s&&(H.get(s)?.selected||de()),s&&l&&u&&qf({id:s,store:p,nodeRef:t});const B=O(te);if(y.current=B,g.current=kg(H,ie,B,s),L&&g.current){const[J,ae]=Zf({nodeId:s,dragItems:g.current,nodeInternals:H});L(te.sourceEvent,J,ae)}};if(!r){const te=function Th(){var p,_,v,g,t=Nh,r=Eh,n=Ih,o=Ah,s={},l=_r("start","drag","end"),u=0,y=0;function x($){$.on("mousedown.drag",C).filter(o).on("touchstart.drag",T).on("touchmove.drag",E,yd).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C($,X){if(!g&&t.call(this,$,X)){var Y=O(this,r.call(this,$,X),$,X,"mouse");Y&&(Cn($.view).on("mousemove.drag",I,kr).on("mouseup.drag",A,kr),Ul($.view),Lt($),v=!1,p=$.clientX,_=$.clientY,Y("start",$))}}function I($){if(kt($),!v){var X=$.clientX-p,Y=$.clientY-_;v=X*X+Y*Y>y}s.mouse("drag",$)}function A($){Cn($.view).on("mousemove.drag mouseup.drag",null),Xl($.view,v),kt($),s.mouse("end",$)}function T($,X){if(t.call(this,$,X)){var H,ue,Y=$.changedTouches,U=r.call(this,$,X),te=Y.length;for(H=0;H<te;++H)(ue=O(this,U,$,X,Y[H].identifier,Y[H]))&&(Lt($),ue("start",$,Y[H]))}}function E($){var U,te,X=$.changedTouches,Y=X.length;for(U=0;U<Y;++U)(te=s[X[U].identifier])&&(kt($),te("drag",$,X[U]))}function M($){var U,te,X=$.changedTouches,Y=X.length;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),U=0;U<Y;++U)(te=s[X[U].identifier])&&(Lt($),te("end",$,X[U]))}function O($,X,Y,U,te,H){var de,le,w,ue=l.copy(),ie=Tn(H||Y,X);if(null!=(w=n.call($,new Nf("beforestart",{sourceEvent:Y,target:x,identifier:te,active:u,x:ie[0],y:ie[1],dx:0,dy:0,dispatch:ue}),U)))return de=w.x-ie[0]||0,le=w.y-ie[1]||0,function L(B,J,ae){var Q,P=ie;switch(B){case"start":s[te]=L,Q=u++;break;case"end":delete s[te],--u;case"drag":ie=Tn(ae||J,X),Q=u}ue.call(B,$,new Nf(B,{sourceEvent:J,subject:w,target:x,identifier:te,active:Q,x:ie[0]+de,y:ie[1]+le,dx:ie[0]-P[0],dy:ie[1]-P[1],dispatch:ue}),U)}}return x.filter=function($){return arguments.length?(t="function"==typeof $?$:Yd(!!$),x):t},x.container=function($){return arguments.length?(r="function"==typeof $?$:Yd($),x):r},x.subject=function($){return arguments.length?(n="function"==typeof $?$:Yd($),x):n},x.touchable=function($){return arguments.length?(o="function"==typeof $?$:Yd(!!$),x):o},x.on=function(){var $=l.on.apply(l,arguments);return $===l?x:$},x.clickDistance=function($){return arguments.length?(y=($=+$)*$,x):Math.sqrt(y)},x}().on("start",H=>{const{domNode:ue,nodeDragThreshold:ie}=p.getState();0===ie&&U(H),M.current=!1;const de=O(H);y.current=de,C.current=ue?.getBoundingClientRect()||null,I.current=Li(H.sourceEvent,C.current)}).on("drag",H=>{const ue=O(H),{autoPanOnNodeDrag:ie,nodeDragThreshold:de}=p.getState();if("touchmove"===H.sourceEvent.type&&H.sourceEvent.touches.length>1&&(M.current=!0),!M.current){if(!T.current&&E.current&&ie&&(T.current=!0,Y()),!E.current){const le=ue.xSnapped-(y?.current?.x??0),w=ue.ySnapped-(y?.current?.y??0);Math.sqrt(le*le+w*w)>de&&U(H)}(y.current.x!==ue.xSnapped||y.current.y!==ue.ySnapped)&&g.current&&E.current&&(A.current=H.sourceEvent,I.current=Li(H.sourceEvent,C.current),X(ue))}}).on("end",H=>{if(E.current&&!M.current&&(v(!1),T.current=!1,E.current=!1,cancelAnimationFrame(x.current),g.current)){const{updateNodePositions:ue,nodeInternals:ie,onNodeDragStop:de,onSelectionDragStop:le}=p.getState(),w=s?de:Jf(le);if(ue(g.current,!1,!1),w){const[L,B]=Zf({nodeId:s,dragItems:g.current,nodeInternals:ie});w(H.sourceEvent,L,B)}}}).filter(H=>{const ue=H.target;return!H.button&&(!n||!__(ue,`.${n}`,t))&&(!o||__(ue,o,t))});return $.call(te),()=>{$.on(".drag",null)}}$.on(".drag",null)}},[t,r,n,o,l,p,s,u,O]),_}function y_(){const t=At();return(0,S.useCallback)(n=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:l,getNodes:u,snapToGrid:p,snapGrid:_,onError:v,nodesDraggable:g}=t.getState(),y=u().filter(M=>M.selected&&(M.draggable||g&&typeof M.draggable>"u")),I=n.isShiftPressed?4:1,A=n.x*(p?_[0]:5)*I,T=n.y*(p?_[1]:5)*I;l(y.map(M=>{if(M.positionAbsolute){const O={x:M.positionAbsolute.x+A,y:M.positionAbsolute.y+T};p&&(O.x=_[0]*Math.round(O.x/_[0]),O.y=_[1]*Math.round(O.y/_[1]));const{positionAbsolute:$,position:X}=h_(M,O,o,s,void 0,v);M.position=X,M.positionAbsolute=$}return M}),!0,!1)},[])}const ka={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var kc=t=>{const r=({id:n,type:o,data:s,xPos:l,yPos:u,xPosOrigin:p,yPosOrigin:_,selected:v,onClick:g,onMouseEnter:y,onMouseMove:x,onMouseLeave:C,onContextMenu:I,onDoubleClick:A,style:T,className:E,isDraggable:M,isSelectable:O,isConnectable:$,isFocusable:X,selectNodesOnDrag:Y,sourcePosition:U,targetPosition:te,hidden:H,resizeObserver:ue,dragHandle:ie,zIndex:de,isParent:le,noDragClassName:w,noPanClassName:L,initialized:B,disableKeyboardA11y:J,ariaLabel:ae,rfId:P,hasHandleBounds:Q})=>{const re=At(),ce=(0,S.useRef)(null),ye=(0,S.useRef)(null),ve=(0,S.useRef)(U),Te=(0,S.useRef)(te),Ue=(0,S.useRef)(o),Ye=O||M||g||y||x||C,et=y_(),wt=Sc(n,re.getState,y),at=Sc(n,re.getState,x),so=Sc(n,re.getState,C),Zn=Sc(n,re.getState,I),ao=Sc(n,re.getState,A);(0,S.useEffect)(()=>()=>{ye.current&&(ue?.unobserve(ye.current),ye.current=null)},[]),(0,S.useEffect)(()=>{if(ce.current&&!H){const lt=ce.current;(!B||!Q||ye.current!==lt)&&(ye.current&&ue?.unobserve(ye.current),ue?.observe(lt),ye.current=lt)}},[H,B,Q]),(0,S.useEffect)(()=>{const lt=Ue.current!==o,Se=ve.current!==U,Gn=Te.current!==te;ce.current&&(lt||Se||Gn)&&(lt&&(Ue.current=o),Se&&(ve.current=U),Gn&&(Te.current=te),re.getState().updateNodeDimensions([{id:n,nodeElement:ce.current,forceUpdate:!0}]))},[n,o,U,te]);const Ro=v_({nodeRef:ce,disabled:H||!M,noDragClassName:w,handleSelector:ie,nodeId:n,isSelectable:O,selectNodesOnDrag:Y});return H?null:S.createElement("div",{className:gt(["react-flow__node",`react-flow__node-${o}`,{[L]:M},E,{selected:v,selectable:O,parent:le,dragging:Ro}]),ref:ce,style:{zIndex:de,transform:`translate(${p}px,${_}px)`,pointerEvents:Ye?"all":"none",visibility:B?"visible":"hidden",...T},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:wt,onMouseMove:at,onMouseLeave:so,onContextMenu:Zn,onClick:lt=>{const{nodeDragThreshold:Se}=re.getState();if(O&&(!Y||!M||Se>0)&&qf({id:n,store:re,nodeRef:ce}),g){const Gn=re.getState().nodeInternals.get(n);Gn&&g(lt,{...Gn})}},onDoubleClick:ao,onKeyDown:X?lt=>{Tf(lt)||J||(Nm.includes(lt.key)&&O?qf({id:n,store:re,unselect:"Escape"===lt.key,nodeRef:ce}):M&&v&&Object.prototype.hasOwnProperty.call(ka,lt.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~u}`}),et({x:ka[lt.key].x,y:ka[lt.key].y,isShiftPressed:lt.shiftKey})))}:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":J?void 0:`${t_}-${P}`,"aria-label":ae},S.createElement(Ph,{value:n},S.createElement(t,{id:n,data:s,type:o,xPos:l,yPos:u,selected:v,isConnectable:$,sourcePosition:U,targetPosition:te,dragging:Ro,dragHandle:ie,zIndex:de})))};return r.displayName="NodeWrapper",(0,S.memo)(r)};const Eg=t=>{const r=t.getNodes().filter(n=>n.selected);return{...ep(r,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var Ag=(0,S.memo)(function Ig({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:n}){const o=At(),{width:s,height:l,x:u,y:p,transformString:_,userSelectionActive:v}=Ze(Eg,Rt),g=y_(),y=(0,S.useRef)(null);if((0,S.useEffect)(()=>{n||y.current?.focus({preventScroll:!0})},[n]),v_({nodeRef:y}),v||!s||!l)return null;const x=t?I=>{const A=o.getState().getNodes().filter(T=>T.selected);t(I,A)}:void 0;return S.createElement("div",{className:gt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:_}},S.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:I=>{Object.prototype.hasOwnProperty.call(ka,I.key)&&g({x:ka[I.key].x,y:ka[I.key].y,isShiftPressed:I.shiftKey})},style:{width:s,height:l,top:p,left:u}}))});const Tg=t=>t.nodesSelectionActive,b_=({children:t,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:u,deleteKeyCode:p,onMove:_,onMoveStart:v,onMoveEnd:g,selectionKeyCode:y,selectionOnDrag:x,selectionMode:C,onSelectionStart:I,onSelectionEnd:A,multiSelectionKeyCode:T,panActivationKeyCode:E,zoomActivationKeyCode:M,elementsSelectable:O,zoomOnScroll:$,zoomOnPinch:X,panOnScroll:Y,panOnScrollSpeed:U,panOnScrollMode:te,zoomOnDoubleClick:H,panOnDrag:ue,defaultViewport:ie,translateExtent:de,minZoom:le,maxZoom:w,preventScrolling:L,onSelectionContextMenu:B,noWheelClassName:J,noPanClassName:ae,disableKeyboardA11y:P})=>{const Q=Ze(Tg),re=Cc(y),ce=Cc(E),ye=ce||ue,ve=ce||Y,Te=re||x&&!0!==ye;return(({deleteKeyCode:t,multiSelectionKeyCode:r})=>{const n=At(),{deleteElements:o}=Xf(),s=Cc(t,_g),l=Cc(r);(0,S.useEffect)(()=>{if(s){const{edges:u,getNodes:p}=n.getState(),_=p().filter(g=>g.selected),v=u.filter(g=>g.selected);o({nodes:_,edges:v}),n.setState({nodesSelectionActive:!1})}},[s]),(0,S.useEffect)(()=>{n.setState({multiSelectionActive:l})},[l])})({deleteKeyCode:p,multiSelectionKeyCode:T}),S.createElement(bg,{onMove:_,onMoveStart:v,onMoveEnd:g,onPaneContextMenu:l,elementsSelectable:O,zoomOnScroll:$,zoomOnPinch:X,panOnScroll:ve,panOnScrollSpeed:U,panOnScrollMode:te,zoomOnDoubleClick:H,panOnDrag:!re&&ye,defaultViewport:ie,translateExtent:de,minZoom:le,maxZoom:w,zoomActivationKeyCode:M,preventScrolling:L,noWheelClassName:J,noPanClassName:ae},S.createElement(f_,{onSelectionStart:I,onSelectionEnd:A,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:u,panOnDrag:ye,isSelecting:!!Te,selectionMode:C},t,Q&&S.createElement(Ag,{onSelectionContextMenu:B,noPanClassName:ae,disableKeyboardA11y:P})))};b_.displayName="FlowRenderer";var Fg=(0,S.memo)(b_);function jg(t){return{input:kc(t.input||qm),default:kc(t.default||Pf),output:kc(t.output||Km),group:kc(t.group||Lf),...Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,l)=>(s[l]=kc(t[l]||Pf),s),{})}}const $g=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),x_=t=>{const{nodesDraggable:r,nodesConnectable:n,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:l,onError:u}=Ze($g,Rt),p=function Rg(t){return Ze((0,S.useCallback)(n=>t?zm(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}(t.onlyRenderVisibleElements),_=(0,S.useRef)(),v=(0,S.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(y=>{const x=y.map(C=>({id:C.target.getAttribute("data-id"),nodeElement:C.target,forceUpdate:!0}));l(x)});return _.current=g,g},[]);return(0,S.useEffect)(()=>()=>{_?.current?.disconnect()},[]),S.createElement("div",{className:"react-flow__nodes",style:Yf},p.map(g=>{let y=g.type||"default";t.nodeTypes[y]||(u?.("003",Yn.error003(y)),y="default");const x=t.nodeTypes[y]||t.nodeTypes.default,C=!!(g.draggable||r&&typeof g.draggable>"u"),I=!!(g.selectable||s&&typeof g.selectable>"u"),A=!!(g.connectable||n&&typeof g.connectable>"u"),T=!!(g.focusable||o&&typeof g.focusable>"u"),E=t.nodeExtent?If(g.positionAbsolute,t.nodeExtent):g.positionAbsolute,M=E?.x??0,O=E?.y??0,$=(({x:t,y:r,width:n,height:o,origin:s})=>n&&o?s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:r}:{x:t-n*s[0],y:r-o*s[1]}:{x:t,y:r})({x:M,y:O,width:g.width??0,height:g.height??0,origin:t.nodeOrigin});return S.createElement(x,{key:g.id,id:g.id,className:g.className,style:g.style,type:y,data:g.data,sourcePosition:g.sourcePosition||be.Bottom,targetPosition:g.targetPosition||be.Top,hidden:g.hidden,xPos:M,yPos:O,xPosOrigin:$.x,yPosOrigin:$.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!g.selected,isDraggable:C,isSelectable:I,isConnectable:A,isFocusable:T,resizeObserver:v,dragHandle:g.dragHandle,zIndex:g[Ct]?.z??0,isParent:!!g[Ct]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!g.width&&!!g.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!g[Ct]?.handleBounds})}))};x_.displayName="NodeRenderer";var Gg=(0,S.memo)(x_);const Dg=(t,r,n)=>n===be.Left?t-r:n===be.Right?t+r:t,Og=(t,r,n)=>n===be.Top?t-r:n===be.Bottom?t+r:t,C_="react-flow__edgeupdater",S_=({position:t,centerX:r,centerY:n,radius:o=10,onMouseDown:s,onMouseEnter:l,onMouseOut:u,type:p})=>S.createElement("circle",{onMouseDown:s,onMouseEnter:l,onMouseOut:u,className:gt([C_,`${C_}-${p}`]),cx:Dg(r,o,t),cy:Og(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),Vg=()=>!0;var wa=t=>{const r=({id:n,className:o,type:s,data:l,onClick:u,onEdgeDoubleClick:p,selected:_,animated:v,label:g,labelStyle:y,labelShowBg:x,labelBgStyle:C,labelBgPadding:I,labelBgBorderRadius:A,style:T,source:E,target:M,sourceX:O,sourceY:$,targetX:X,targetY:Y,sourcePosition:U,targetPosition:te,elementsSelectable:H,hidden:ue,sourceHandleId:ie,targetHandleId:de,onContextMenu:le,onMouseEnter:w,onMouseMove:L,onMouseLeave:B,reconnectRadius:J,onReconnect:ae,onReconnectStart:P,onReconnectEnd:Q,markerEnd:re,markerStart:ce,rfId:ye,ariaLabel:ve,isFocusable:Te,isReconnectable:Ue,pathOptions:Ye,interactionWidth:et,disableKeyboardA11y:wt})=>{const at=(0,S.useRef)(null),[so,Zn]=(0,S.useState)(!1),[ao,qn]=(0,S.useState)(!1),zt=At(),Ro=(0,S.useMemo)(()=>`url('#${Df(ce,ye)}')`,[ce,ye]),lt=(0,S.useMemo)(()=>`url('#${Df(re,ye)}')`,[re,ye]);if(ue)return null;const Gn=xc(n,zt.getState,p),Br=xc(n,zt.getState,le),Nc=xc(n,zt.getState,w),Ea=xc(n,zt.getState,L),Ia=xc(n,zt.getState,B),pi=(un,jo)=>{if(0!==un.button)return;const{edges:Ur,isValidConnection:Xr}=zt.getState(),Ra=jo?M:E,Mo=(jo?de:ie)||null,Yr=jo?"target":"source",rm=Xr||Vg,sm=jo,Ic=Ur.find(Hr=>Hr.id===n);qn(!0),P?.(un,Ic,Yr),Xm({event:un,handleId:Mo,nodeId:Ra,onConnect:Hr=>ae?.(Ic,Hr),isTarget:sm,getState:zt.getState,setState:zt.setState,isValidConnection:rm,edgeUpdaterType:Yr,onReconnectEnd:Hr=>{qn(!1),Q?.(Hr,Ic,Yr)}})},Lr=()=>Zn(!0),Ta=()=>Zn(!1);return S.createElement("g",{className:gt(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:_,animated:v,inactive:!H&&!u,updating:so}]),onClick:un=>{const{edges:jo,addSelectedEdges:Ur,unselectNodesAndEdges:Xr,multiSelectionActive:Ra}=zt.getState(),Mo=jo.find(Yr=>Yr.id===n);Mo&&(H&&(zt.setState({nodesSelectionActive:!1}),Mo.selected&&Ra?(Xr({nodes:[],edges:[Mo]}),at.current?.blur()):Ur([n])),u&&u(un,Mo))},onDoubleClick:Gn,onContextMenu:Br,onMouseEnter:Nc,onMouseMove:Ea,onMouseLeave:Ia,onKeyDown:Te?un=>{if(!wt&&Nm.includes(un.key)&&H){const{unselectNodesAndEdges:jo,addSelectedEdges:Ur,edges:Xr}=zt.getState();"Escape"===un.key?(at.current?.blur(),jo({edges:[Xr.find(Mo=>Mo.id===n)]})):Ur([n])}}:void 0,tabIndex:Te?0:void 0,role:Te?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===ve?void 0:ve||`Edge from ${E} to ${M}`,"aria-describedby":Te?`${n_}-${ye}`:void 0,ref:at},!ao&&S.createElement(t,{id:n,source:E,target:M,selected:_,animated:v,label:g,labelStyle:y,labelShowBg:x,labelBgStyle:C,labelBgPadding:I,labelBgBorderRadius:A,data:l,style:T,sourceX:O,sourceY:$,targetX:X,targetY:Y,sourcePosition:U,targetPosition:te,sourceHandleId:ie,targetHandleId:de,markerStart:Ro,markerEnd:lt,pathOptions:Ye,interactionWidth:et}),Ue&&S.createElement(S.Fragment,null,("source"===Ue||!0===Ue)&&S.createElement(S_,{position:U,centerX:O,centerY:$,radius:J,onMouseDown:un=>pi(un,!0),onMouseEnter:Lr,onMouseOut:Ta,type:"source"}),("target"===Ue||!0===Ue)&&S.createElement(S_,{position:te,centerX:X,centerY:Y,radius:J,onMouseDown:un=>pi(un,!1),onMouseEnter:Lr,onMouseOut:Ta,type:"target"})))};return r.displayName="EdgeWrapper",(0,S.memo)(r)};function zg(t){return{default:wa(t.default||Qd),straight:wa(t.bezier||$f),step:wa(t.step||Mf),smoothstep:wa(t.step||Jd),simplebezier:wa(t.simplebezier||Rf),...Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,l)=>(s[l]=wa(t[l]||Qd),s),{})}}function k_(t,r,n=null){const o=(n?.x||0)+r.x,s=(n?.y||0)+r.y,l=n?.width||r.width,u=n?.height||r.height;switch(t){case be.Top:return{x:o+l/2,y:s};case be.Right:return{x:o+l,y:s+u/2};case be.Bottom:return{x:o+l/2,y:s+u};case be.Left:return{x:o,y:s+u/2}}}function w_(t,r){return t?1!==t.length&&r?r&&t.find(n=>n.id===r)||null:t[0]:null}function N_(t){const r=t?.[Ct]?.handleBounds||null,n=r&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},r,!!n]}const Lg=[{level:0,isMaxLevel:!0,edges:[]}];const E_={[Ff.Arrow]:({color:t="none",strokeWidth:r=1})=>S.createElement("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Ff.ArrowClosed]:({color:t="none",strokeWidth:r=1})=>S.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Zg=({id:t,type:r,color:n,width:o=12.5,height:s=12.5,markerUnits:l="strokeWidth",strokeWidth:u,orient:p="auto-start-reverse"})=>{const _=function Wg(t){const r=At();return(0,S.useMemo)(()=>Object.prototype.hasOwnProperty.call(E_,t)?E_[t]:(r.getState().onError?.("009",Yn.error009(t)),null),[t])}(r);return _?S.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:p,refX:"0",refY:"0"},S.createElement(_,{color:n,strokeWidth:u})):null},I_=({defaultColor:t,rfId:r})=>{const n=Ze((0,S.useCallback)((({defaultColor:t,rfId:r})=>n=>{const o=[];return n.edges.reduce((s,l)=>([l.markerStart,l.markerEnd].forEach(u=>{if(u&&"object"==typeof u){const p=Df(u,r);o.includes(p)||(s.push({id:p,color:u.color||t,...u}),o.push(p))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))})({defaultColor:t,rfId:r}),[t,r]),(o,s)=>!(o.length!==s.length||o.some((l,u)=>l.id!==s[u].id)));return S.createElement("defs",null,n.map(o=>S.createElement(Zg,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};I_.displayName="MarkerDefinitions";var Jg=(0,S.memo)(I_);const Kg=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),A_=({defaultMarkerColor:t,onlyRenderVisibleElements:r,elevateEdgesOnSelect:n,rfId:o,edgeTypes:s,noPanClassName:l,onEdgeContextMenu:u,onEdgeMouseEnter:p,onEdgeMouseMove:_,onEdgeMouseLeave:v,onEdgeClick:g,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:C,onReconnectEnd:I,reconnectRadius:A,children:T,disableKeyboardA11y:E})=>{const{edgesFocusable:M,edgesUpdatable:O,elementsSelectable:$,width:X,height:Y,connectionMode:U,nodeInternals:te,onError:H}=Ze(Kg,Rt),ue=function Xg(t,r,n){const o=Ze((0,S.useCallback)(s=>t?s.edges.filter(l=>{const u=r.get(l.source),p=r.get(l.target);return u?.width&&u?.height&&p?.width&&p?.height&&function Pg({sourcePos:t,targetPos:r,sourceWidth:n,sourceHeight:o,targetWidth:s,targetHeight:l,width:u,height:p,transform:_}){const v={x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x+n,r.x+s),y2:Math.max(t.y+o,r.y+l)};v.x===v.x2&&(v.x2+=1),v.y===v.y2&&(v.y2+=1);const g=yc({x:(0-_[0])/_[2],y:(0-_[1])/_[2],width:u/_[2],height:p/_[2]}),y=Math.max(0,Math.min(g.x2,v.x2)-Math.max(g.x,v.x)),x=Math.max(0,Math.min(g.y2,v.y2)-Math.max(g.y,v.y));return Math.ceil(y*x)>0}({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:p.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:p.width,targetHeight:p.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,r]));return function Ug(t,r,n=!1){let o=-1;const s=t.reduce((u,p)=>{const _=Hn(p.zIndex);let v=_?p.zIndex:0;if(n){const g=r.get(p.target),y=r.get(p.source),x=p.selected||g?.selected||y?.selected,C=Math.max(y?.[Ct]?.z||0,g?.[Ct]?.z||0,1e3);v=(_?p.zIndex:0)+(x?C:0)}return u[v]?u[v].push(p):u[v]=[p],o=v>o?v:o,u},{}),l=Object.entries(s).map(([u,p])=>{const _=+u;return{edges:p,level:_,isMaxLevel:_===o}});return 0===l.length?Lg:l}(o,r,n)}(r,te,n);return X?S.createElement(S.Fragment,null,ue.map(({level:ie,edges:de,isMaxLevel:le})=>S.createElement("svg",{key:ie,style:{zIndex:ie},width:X,height:Y,className:"react-flow__edges react-flow__container"},le&&S.createElement(Jg,{defaultColor:t,rfId:o}),S.createElement("g",null,de.map(w=>{const[L,B,J]=N_(te.get(w.source)),[ae,P,Q]=N_(te.get(w.target));if(!J||!Q)return null;let re=w.type||"default";s[re]||(H?.("011",Yn.error011(re)),re="default");const ce=s[re]||s.default,ye=U===$r.Strict?P.target:(P.target??[]).concat(P.source??[]),ve=w_(B.source,w.sourceHandle),Te=w_(ye,w.targetHandle),Ue=ve?.position||be.Bottom,Ye=Te?.position||be.Top,et=!!(w.focusable||M&&typeof w.focusable>"u"),wt=w.reconnectable||w.updatable,at=typeof x<"u"&&(wt||O&&typeof wt>"u");if(!ve||!Te)return H?.("008",Yn.error008(ve,w)),null;const{sourceX:so,sourceY:Zn,targetX:ao,targetY:qn}=((t,r,n,o,s,l)=>{const u=k_(n,t,r),p=k_(l,o,s);return{sourceX:u.x,sourceY:u.y,targetX:p.x,targetY:p.y}})(L,ve,Ue,ae,Te,Ye);return S.createElement(ce,{key:w.id,id:w.id,className:gt([w.className,l]),type:re,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:so,sourceY:Zn,targetX:ao,targetY:qn,sourcePosition:Ue,targetPosition:Ye,elementsSelectable:$,onContextMenu:u,onMouseEnter:p,onMouseMove:_,onMouseLeave:v,onClick:g,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:C,onReconnectEnd:I,reconnectRadius:A,rfId:o,ariaLabel:w.ariaLabel,isFocusable:et,isReconnectable:at,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth,disableKeyboardA11y:E})})))),T):null};A_.displayName="EdgeRenderer";var Qg=(0,S.memo)(A_);const e0=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function t0({children:t}){const r=Ze(e0);return S.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:r}},t)}const o0={[be.Left]:be.Right,[be.Right]:be.Left,[be.Top]:be.Bottom,[be.Bottom]:be.Top},T_=({nodeId:t,handleType:r,style:n,type:o=Gr.Bezier,CustomComponent:s,connectionStatus:l})=>{const{fromNode:u,handleId:p,toX:_,toY:v,connectionMode:g}=Ze((0,S.useCallback)(Y=>({fromNode:Y.nodeInternals.get(t),handleId:Y.connectionHandleId,toX:(Y.connectionPosition.x-Y.transform[0])/Y.transform[2],toY:(Y.connectionPosition.y-Y.transform[1])/Y.transform[2],connectionMode:Y.connectionMode}),[t]),Rt),y=u?.[Ct]?.handleBounds;let x=y?.[r];if(g===$r.Loose&&(x=x||y?.["source"===r?"target":"source"]),!u||!x)return null;const C=p?x.find(Y=>Y.id===p):x[0],I=C?C.x+C.width/2:(u.width??0)/2,A=C?C.y+C.height/2:u.height??0,T=(u.positionAbsolute?.x??0)+I,E=(u.positionAbsolute?.y??0)+A,M=C?.position,O=M?o0[M]:null;if(!M||!O)return null;if(s)return S.createElement(s,{connectionLineType:o,connectionLineStyle:n,fromNode:u,fromHandle:C,fromX:T,fromY:E,toX:_,toY:v,fromPosition:M,toPosition:O,connectionStatus:l});let $="";const X={sourceX:T,sourceY:E,sourcePosition:M,targetX:_,targetY:v,targetPosition:O};return o===Gr.Bezier?[$]=$m(X):o===Gr.Step?[$]=jf({...X,borderRadius:0}):o===Gr.SmoothStep?[$]=jf(X):o===Gr.SimpleBezier?[$]=Fm(X):$=`M${T},${E} ${_},${v}`,S.createElement("path",{d:$,fill:"none",className:"react-flow__connection-path",style:n})};T_.displayName="ConnectionLine";const r0=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function s0({containerStyle:t,style:r,type:n,component:o}){const{nodeId:s,handleType:l,nodesConnectable:u,width:p,height:_,connectionStatus:v}=Ze(r0,Rt);return s&&l&&p&&u?S.createElement("svg",{style:t,width:p,height:_,className:"react-flow__edges react-flow__connectionline react-flow__container"},S.createElement("g",{className:gt(["react-flow__connection",v])},S.createElement(T_,{nodeId:s,handleType:l,style:r,type:n,CustomComponent:o,connectionStatus:v}))):null}function F_(t,r){return(0,S.useRef)(null),At(),(0,S.useMemo)(()=>r(t),[t])}const R_=({nodeTypes:t,edgeTypes:r,onMove:n,onMoveStart:o,onMoveEnd:s,onInit:l,onNodeClick:u,onEdgeClick:p,onNodeDoubleClick:_,onEdgeDoubleClick:v,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:C,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:T,connectionLineType:E,connectionLineStyle:M,connectionLineComponent:O,connectionLineContainerStyle:$,selectionKeyCode:X,selectionOnDrag:Y,selectionMode:U,multiSelectionKeyCode:te,panActivationKeyCode:H,zoomActivationKeyCode:ue,deleteKeyCode:ie,onlyRenderVisibleElements:de,elementsSelectable:le,selectNodesOnDrag:w,defaultViewport:L,translateExtent:B,minZoom:J,maxZoom:ae,preventScrolling:P,defaultMarkerColor:Q,zoomOnScroll:re,zoomOnPinch:ce,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:Te,zoomOnDoubleClick:Ue,panOnDrag:Ye,onPaneClick:et,onPaneMouseEnter:wt,onPaneMouseMove:at,onPaneMouseLeave:so,onPaneScroll:Zn,onPaneContextMenu:ao,onEdgeContextMenu:qn,onEdgeMouseEnter:zt,onEdgeMouseMove:Ro,onEdgeMouseLeave:lt,onReconnect:Se,onReconnectStart:Gn,onReconnectEnd:Br,reconnectRadius:Nc,noDragClassName:Ea,noWheelClassName:Ia,noPanClassName:pi,elevateEdgesOnSelect:Aa,disableKeyboardA11y:Pr,nodeOrigin:Lr,nodeExtent:Ta,rfId:Fa})=>{const Ec=F_(t,jg),un=F_(r,zg);return function n0(t){const r=Xf(),n=(0,S.useRef)(!1);(0,S.useEffect)(()=>{!n.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),n.current=!0)},[t,r.viewportInitialized])}(l),S.createElement(Fg,{onPaneClick:et,onPaneMouseEnter:wt,onPaneMouseMove:at,onPaneMouseLeave:so,onPaneContextMenu:ao,onPaneScroll:Zn,deleteKeyCode:ie,selectionKeyCode:X,selectionOnDrag:Y,selectionMode:U,onSelectionStart:A,onSelectionEnd:T,multiSelectionKeyCode:te,panActivationKeyCode:H,zoomActivationKeyCode:ue,elementsSelectable:le,onMove:n,onMoveStart:o,onMoveEnd:s,zoomOnScroll:re,zoomOnPinch:ce,zoomOnDoubleClick:Ue,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:Te,panOnDrag:Ye,defaultViewport:L,translateExtent:B,minZoom:J,maxZoom:ae,onSelectionContextMenu:I,preventScrolling:P,noDragClassName:Ea,noWheelClassName:Ia,noPanClassName:pi,disableKeyboardA11y:Pr},S.createElement(t0,null,S.createElement(Qg,{edgeTypes:un,onEdgeClick:p,onEdgeDoubleClick:v,onlyRenderVisibleElements:de,onEdgeContextMenu:qn,onEdgeMouseEnter:zt,onEdgeMouseMove:Ro,onEdgeMouseLeave:lt,onReconnect:Se,onReconnectStart:Gn,onReconnectEnd:Br,reconnectRadius:Nc,defaultMarkerColor:Q,noPanClassName:pi,elevateEdgesOnSelect:!!Aa,disableKeyboardA11y:Pr,rfId:Fa},S.createElement(s0,{style:M,type:E,component:O,containerStyle:$})),S.createElement("div",{className:"react-flow__edgelabel-renderer"}),S.createElement(Gg,{nodeTypes:Ec,onNodeClick:u,onNodeDoubleClick:_,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:C,selectNodesOnDrag:w,onlyRenderVisibleElements:de,noPanClassName:pi,noDragClassName:Ea,disableKeyboardA11y:Pr,nodeOrigin:Lr,nodeExtent:Ta,rfId:Fa})))};R_.displayName="GraphView";var a0=(0,S.memo)(R_);const Kf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Kf,nodeExtent:Kf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:$r.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,r)=>{},isValidConnection:void 0},Qf=({children:t})=>{const r=(0,S.useRef)(null);return r.current||(r.current=(()=>{return t=(t,r)=>({...Xi,setNodes:n=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:l}=r();t({nodeInternals:Uf(n,o,s,l)})},getNodes:()=>Array.from(r().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=r();t({edges:n.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(n,o)=>{const s=typeof n<"u",l=typeof o<"u",u=s?Uf(n,new Map,r().nodeOrigin,r().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:l?o:[],hasDefaultNodes:s,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:l,fitViewOnInitDone:u,fitViewOnInitOptions:p,domNode:_,nodeOrigin:v}=r(),g=_?.querySelector(".react-flow__viewport");if(!g)return;const y=window.getComputedStyle(g),{m22:x}=new window.DOMMatrixReadOnly(y.transform),C=n.reduce((A,T)=>{const E=s.get(T.id);if(E?.hidden)s.set(E.id,{...E,[Ct]:{...E[Ct],handleBounds:void 0}});else if(E){const M=Ef(T.nodeElement);M.width&&M.height&&(E.width!==M.width||E.height!==M.height||T.forceUpdate)&&(s.set(E.id,{...E,[Ct]:{...E[Ct],handleBounds:{source:g_(".source",T.nodeElement,x,v),target:g_(".target",T.nodeElement,x,v)}},...M}),A.push({id:E.id,type:"dimensions",dimensions:M}))}return A},[]);s_(s,v);const I=u||l&&!u&&a_(r,{initial:!0,...p});t({nodeInternals:new Map(s),fitViewOnInitDone:I}),C?.length>0&&o?.(C)},updateNodePositions:(n,o=!0,s=!1)=>{const{triggerNodeChanges:l}=r();l(n.map(p=>{const _={id:p.id,type:"position",dragging:s};return o&&(_.positionAbsolute=p.positionAbsolute,_.position=p.position),_}))},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:l,nodeOrigin:u,getNodes:p,elevateNodesOnSelect:_}=r();if(n?.length){if(l){const g=Uf(Hf(n,p()),s,u,_);t({nodeInternals:g})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:s,getNodes:l}=r();let u,p=null;o?u=n.map(_=>Ui(_,!0)):(u=Sa(l(),n),p=Sa(s,[])),np({changedNodes:u,changedEdges:p,get:r,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:s,getNodes:l}=r();let u,p=null;o?u=n.map(_=>Ui(_,!0)):(u=Sa(s,n),p=Sa(l(),[])),np({changedNodes:p,changedEdges:u,get:r,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:s,getNodes:l}=r(),p=o||s;np({changedNodes:(n||l()).map(g=>(g.selected=!1,Ui(g.id,!1))),changedEdges:p.map(g=>Ui(g.id,!1)),get:r,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:s}=r();o?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:s}=r();o?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{r().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=r();np({changedNodes:o().filter(p=>p.selected).map(p=>Ui(p.id,!1)),changedEdges:n.filter(p=>p.selected).map(p=>Ui(p.id,!1)),get:r,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=r();o.forEach(s=>{s.positionAbsolute=If(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:s,height:l,d3Zoom:u,d3Selection:p,translateExtent:_}=r();if(!u||!p||!n.x&&!n.y)return!1;const v=ro.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),g=[[0,0],[s,l]],y=u?.constrain()(v,g,_);return u.transform(p,y),o[0]!==y.x||o[1]!==y.y||o[2]!==y.k},cancelConnection:()=>t({connectionNodeId:Xi.connectionNodeId,connectionHandleId:Xi.connectionHandleId,connectionHandleType:Xi.connectionHandleType,connectionStatus:Xi.connectionStatus,connectionStartHandle:Xi.connectionStartHandle,connectionEndHandle:Xi.connectionEndHandle}),reset:()=>t({...Xi})}),t?Ke(t,Object.is):Ke;var t})()),S.createElement(Fh,{value:r.current},t)};Qf.displayName="ReactFlowProvider";const j_=({children:t})=>(0,S.useContext)(Hd)?S.createElement(S.Fragment,null,t):S.createElement(Qf,null,t);j_.displayName="ReactFlowWrapper";const c0={input:qm,default:Pf,output:Km,group:Lf},u0={default:Qd,straight:$f,step:Mf,smoothstep:Jd,simplebezier:Rf},d0=[0,0],p0=[15,15],f0={x:0,y:0,zoom:1},m0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},M_=(0,S.forwardRef)(({nodes:t,edges:r,defaultNodes:n,defaultEdges:o,className:s,nodeTypes:l=c0,edgeTypes:u=u0,onNodeClick:p,onEdgeClick:_,onInit:v,onMove:g,onMoveStart:y,onMoveEnd:x,onConnect:C,onConnectStart:I,onConnectEnd:A,onClickConnectStart:T,onClickConnectEnd:E,onNodeMouseEnter:M,onNodeMouseMove:O,onNodeMouseLeave:$,onNodeContextMenu:X,onNodeDoubleClick:Y,onNodeDragStart:U,onNodeDrag:te,onNodeDragStop:H,onNodesDelete:ue,onEdgesDelete:ie,onSelectionChange:de,onSelectionDragStart:le,onSelectionDrag:w,onSelectionDragStop:L,onSelectionContextMenu:B,onSelectionStart:J,onSelectionEnd:ae,connectionMode:P=$r.Strict,connectionLineType:Q=Gr.Bezier,connectionLineStyle:re,connectionLineComponent:ce,connectionLineContainerStyle:ye,deleteKeyCode:ve="Backspace",selectionKeyCode:Te="Shift",selectionOnDrag:Ue=!1,selectionMode:Ye=qd.Full,panActivationKeyCode:et="Space",multiSelectionKeyCode:wt=(Zd()?"Meta":"Control"),zoomActivationKeyCode:at=(Zd()?"Meta":"Control"),snapToGrid:so=!1,snapGrid:Zn=p0,onlyRenderVisibleElements:ao=!1,selectNodesOnDrag:qn=!0,nodesDraggable:zt,nodesConnectable:Ro,nodesFocusable:lt,nodeOrigin:Se=d0,edgesFocusable:Gn,edgesUpdatable:Br,elementsSelectable:Nc,defaultViewport:Ea=f0,minZoom:Ia=.5,maxZoom:pi=2,translateExtent:Aa=Kf,preventScrolling:Pr=!0,nodeExtent:Lr,defaultMarkerColor:Ta="#b1b1b7",zoomOnScroll:Fa=!0,zoomOnPinch:Ec=!0,panOnScroll:un=!1,panOnScrollSpeed:jo=.5,panOnScrollMode:Ur=ga.Free,zoomOnDoubleClick:Xr=!0,panOnDrag:Ra=!0,onPaneClick:Mo,onPaneMouseEnter:Yr,onPaneMouseMove:rm,onPaneMouseLeave:sm,onPaneScroll:Ic,onPaneContextMenu:am,children:_h,onEdgeContextMenu:Hr,onEdgeDoubleClick:Cx,onEdgeMouseEnter:Sx,onEdgeMouseMove:kx,onEdgeMouseLeave:wx,onEdgeUpdate:Nx,onEdgeUpdateStart:Ex,onEdgeUpdateEnd:Ix,onReconnect:Ax,onReconnectStart:Tx,onReconnectEnd:Fx,reconnectRadius:Rx=10,edgeUpdaterRadius:jx=10,onNodesChange:Mx,onEdgesChange:$x,noDragClassName:Gx="nodrag",noWheelClassName:Dx="nowheel",noPanClassName:hh="nopan",fitView:Ox=!1,fitViewOptions:Vx,connectOnClick:zx=!0,attributionPosition:Bx,proOptions:Px,defaultEdgeOptions:Lx,elevateNodesOnSelect:Ux=!0,elevateEdgesOnSelect:Xx=!1,disableKeyboardA11y:gh=!1,autoPanOnConnect:Yx=!0,autoPanOnNodeDrag:Hx=!0,connectionRadius:Wx=20,isValidConnection:Zx,onError:qx,style:Jx,id:vh,nodeDragThreshold:Kx,...Qx},eC)=>{const lm=vh||"1";return S.createElement("div",{...Qx,style:{...Jx,...m0},ref:eC,className:gt(["react-flow",s]),"data-testid":"rf__wrapper",id:vh},S.createElement(j_,null,S.createElement(a0,{onInit:v,onMove:g,onMoveStart:y,onMoveEnd:x,onNodeClick:p,onEdgeClick:_,onNodeMouseEnter:M,onNodeMouseMove:O,onNodeMouseLeave:$,onNodeContextMenu:X,onNodeDoubleClick:Y,nodeTypes:l,edgeTypes:u,connectionLineType:Q,connectionLineStyle:re,connectionLineComponent:ce,connectionLineContainerStyle:ye,selectionKeyCode:Te,selectionOnDrag:Ue,selectionMode:Ye,deleteKeyCode:ve,multiSelectionKeyCode:wt,panActivationKeyCode:et,zoomActivationKeyCode:at,onlyRenderVisibleElements:ao,selectNodesOnDrag:qn,defaultViewport:Ea,translateExtent:Aa,minZoom:Ia,maxZoom:pi,preventScrolling:Pr,zoomOnScroll:Fa,zoomOnPinch:Ec,zoomOnDoubleClick:Xr,panOnScroll:un,panOnScrollSpeed:jo,panOnScrollMode:Ur,panOnDrag:Ra,onPaneClick:Mo,onPaneMouseEnter:Yr,onPaneMouseMove:rm,onPaneMouseLeave:sm,onPaneScroll:Ic,onPaneContextMenu:am,onSelectionContextMenu:B,onSelectionStart:J,onSelectionEnd:ae,onEdgeContextMenu:Hr,onEdgeDoubleClick:Cx,onEdgeMouseEnter:Sx,onEdgeMouseMove:kx,onEdgeMouseLeave:wx,onReconnect:Ax??Nx,onReconnectStart:Tx??Ex,onReconnectEnd:Fx??Ix,reconnectRadius:Rx??jx,defaultMarkerColor:Ta,noDragClassName:Gx,noWheelClassName:Dx,noPanClassName:hh,elevateEdgesOnSelect:Xx,rfId:lm,disableKeyboardA11y:gh,nodeOrigin:Se,nodeExtent:Lr}),S.createElement(ig,{nodes:t,edges:r,defaultNodes:n,defaultEdges:o,onConnect:C,onConnectStart:I,onConnectEnd:A,onClickConnectStart:T,onClickConnectEnd:E,nodesDraggable:zt,nodesConnectable:Ro,nodesFocusable:lt,edgesFocusable:Gn,edgesUpdatable:Br,elementsSelectable:Nc,elevateNodesOnSelect:Ux,minZoom:Ia,maxZoom:pi,nodeExtent:Lr,onNodesChange:Mx,onEdgesChange:$x,snapToGrid:so,snapGrid:Zn,connectionMode:P,translateExtent:Aa,connectOnClick:zx,defaultEdgeOptions:Lx,fitView:Ox,fitViewOptions:Vx,onNodesDelete:ue,onEdgesDelete:ie,onNodeDragStart:U,onNodeDrag:te,onNodeDragStop:H,onSelectionDrag:w,onSelectionDragStart:le,onSelectionDragStop:L,noPanClassName:hh,nodeOrigin:Se,rfId:lm,autoPanOnConnect:Yx,autoPanOnNodeDrag:Hx,onError:qx,connectionRadius:Wx,isValidConnection:Zx,nodeDragThreshold:Kx}),S.createElement(ng,{onSelectionChange:de}),_h,S.createElement(jh,{proOptions:Px,position:Bx}),S.createElement(cg,{rfId:lm,disableKeyboardA11y:gh})))});function $_(t){return r=>{const[n,o]=(0,S.useState)(r),s=(0,S.useCallback)(l=>o(u=>t(l,u)),[]);return[n,o,s]}}M_.displayName="ReactFlow",$_(Hf),$_(p_);var Or=se(1810),x0=se(3726),G_=se(8405);const C0=["editorContainer"];let O_,D_=!1,S0=(()=>{var t;class r{set insideNg(o){this._insideNg=o,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(o){(0,f.A)(this,"config",void 0),(0,f.A)(this,"_editorContainer",void 0),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"_editor",void 0),(0,f.A)(this,"_options",void 0),(0,f.A)(this,"_autoHeight",!1),(0,f.A)(this,"_height",200),(0,f.A)(this,"_windowResizeSubscription",void 0),(0,f.A)(this,"_insideNg",!1),this.config=o}ngAfterViewInit(){D_?O_.then(()=>{this.initMonaco(this._options,this.insideNg)}):(D_=!0,O_=new Promise(o=>{const s=this.config.baseUrl??"./assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void o();const l=u=>{let p=u||window.require,_={paths:{vs:`${s}/monaco/min/vs`}};Object.assign(_,this.config.requireConfig??{}),p.config(_),p(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),o()})};if(this.config.monacoRequire)l(this.config.monacoRequire);else if(window.require)if(window.require.config)l();else{let u=`${s}/monaco/min/vs/loader.js`,p=new XMLHttpRequest;p.addEventListener("load",()=>{let _=document.createElement("script");_.type="text/javascript",_.text=["var nodeRequire = require;",p.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join("\n"),document.body.appendChild(_),l(window.monacoAmdRequire)}),p.open("GET",u),p.send()}else{const u=document.createElement("script");u.type="text/javascript",u.src=`${s}/monaco/min/vs/loader.js`,u.addEventListener("load",()=>{l()}),document.body.appendChild(u)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(G_.R))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(o,s){if(1&o&&e.GBs(C0,7),2&o){let l;e.mGM(l=e.lsd())&&(s._editorContainer=l.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(o,s){},encapsulation:2})),r})();class V_{static init(r){r.languages.register({id:"demo"}),r.languages.setMonarchTokensProvider("demo",{tokenizer:{root:[[/\{([\[\]a-zA-Z0-9|#$._-]+)\}/,"custom-var"],[/"[^"]+"/,"custom-string"],[/'[^']+'/,"custom-string"],[/`[^`]+`/,"custom-string"],[/^\*\*[A-Z_]+:\s*$/,"custom-keyword"],[/^##.*/,"custom-bold"]]}}),r.languages.setLanguageConfiguration("demo",{brackets:[["{","}"]]}),r.editor.defineTheme("myCoolTheme",{base:"vs",inherit:!0,rules:[{token:"custom-var",foreground:"a31515"},{token:"custom-string",foreground:"a31515"},{token:"custom-keyword",foreground:"516eff"},{token:"custom-bold",fontStyle:"bold"}],colors:{"editor.foreground":"#000000"}}),r.languages.registerDocumentRangeFormattingEditProvider("demo",{provideDocumentRangeFormattingEdits:function(n,o){const s=n.getValueInRange(o);return[{range:o,text:JSON.stringify(JSON.parse(s),void 0,4)}]}})}static initSuggestion(r,n,o){r.languages.registerCompletionItemProvider(n,{triggerCharacters:["."],provideCompletionItems:(s,l)=>{let u=s.getWordUntilPosition(l),_=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}).split("\n"),v=_.filter(T=>T.indexOf('*for="')>=0),g=v.length>0?v[v.length-1]:"",y=_[_.length-1].split(/[^_#$\[\].0-9a-zA-Z-]/g),x=y[y.length-1].replaceAll("{","").replaceAll("}",""),C={startLineNumber:l.lineNumber,endLineNumber:l.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn},I=x.split("."),A=[];if(1==I.length){if(A=o.map(T=>({label:T.name,kind:r.languages.CompletionItemKind.Text,insertText:T.name,range:C})),g){let T=g.split('*for="')[1].split(" "),E="let"==T[0]?T[1]:T[0];A.push({label:E,kind:r.languages.CompletionItemKind.Text,insertText:E,range:C})}}else{if(g){let E=g.split('*for="')[1].split(" of ")[1].split('"')[0].replaceAll("{","").replaceAll("}","").trim(),M=g.split('*for="')[1].split(" "),O="let"==M[0]?M[1]:M[0];if(I[0].trim()==O.trim()){let $=[...E.split(".")];I.splice(0,1),$.push(...I),I=$}}let T=o.find(E=>E.name==I[0]);if(T&&"json"==T.type){let E=JSON.parse(T.demo);for(let O=1;O<I.length-1;O++)E=E[I[O]];A=Ge.extractProperties(E,1).map(O=>({label:O.name,kind:r.languages.CompletionItemKind.Text,insertText:O.name,range:C}))}}return{suggestions:Ge.distinctArray(A)}}})}}let em=(()=>{var t;class r extends S0{set options(o){this._options={...this.config.defaultOptions,...o},this._editor&&(this._editor.dispose(),this.initMonaco(o,this.insideNg))}set autoHeight(o){this._autoHeight=o}set height(o){this._height=o}get options(){return this._options}set model(o){this.options.model=o,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(o,s){super(s),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"editorConfig",void 0),(0,f.A)(this,"_value",""),(0,f.A)(this,"propagateChange",l=>{}),(0,f.A)(this,"onTouched",()=>{}),(0,f.A)(this,"resizeObserver",new ResizeObserver(()=>{this._editor&&this._editor.layout()})),(0,f.A)(this,"vars",[]),(0,f.A)(this,"onChange",new e.bkB),(0,f.A)(this,"onFocus",new e.bkB),this.zone=o,this.editorConfig=s}writeValue(o){this._value=o||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}formatCode(){this._editor.getAction("editor.action.formatDocument").run()}registerOnChange(o){this.propagateChange=o}registerOnTouched(o){this.onTouched=o}focus(){this._editor?.focus()}insertText(o){this._editor.executeEdits("my-source",[{range:this._editor.getSelection(),text:o}])}getSelected(){let o=this._editor.getSelection();return this._editor.getModel().getValueInRange(o)}initMonaco(o,s){0==monaco.languages.getLanguages().filter(u=>"demo"==u.id).length&&V_.init(monaco),this.vars.length>0&&V_.initSuggestion(monaco,this.options.language,this.vars);const l=!!o.model;if(l){const u=monaco.editor.getModel(o.model.uri||"");u?(o.model=u,o.model.setValue(this._value)):o.model=monaco.editor.createModel(o.model.value,o.model.language,o.model.uri)}this._editorContainer&&(this._editorContainer.nativeElement.parentNode.style.height=this._height+"px"),s?this._editor=monaco.editor.create(this._editorContainer?.nativeElement,o):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer?.nativeElement,o)}),l||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(u=>{const p=this._editor.getValue();this.zone.run(()=>{this.propagateChange(p),this._value=p,this.onChange.emit(p)})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._editor.onDidFocusEditorText(()=>{this.onFocus.emit(this)}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,x0.R)(window,"resize").subscribe(()=>this._editor.layout()),this.resizeObserver.observe(this._editorContainer?.nativeElement),this._editor.onDidContentSizeChange(u=>{let p=Math.max(this._height,u.contentHeight);this._editorContainer&&this._autoHeight&&(this._editorContainer.nativeElement.parentNode.style.height=p+15+"px")}),setTimeout(()=>{this._editor.focus(),this._editor.setPosition({column:1,lineNumber:2})},200),this.onInit.emit(this._editor)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(G_.R))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",autoHeight:"autoHeight",height:"height",model:"model",vars:"vars"},outputs:{onChange:"onChange",onFocus:"onFocus"},features:[e.Jv_([{provide:N.kq,useExisting:(0,e.Rfq)(()=>t),multi:!0}]),e.Vt3],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(o,s){1&o&&e.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]})),r})(),k0=(()=>{var t;class r{constructor(){(0,f.A)(this,"data",""),(0,f.A)(this,"editorConf",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0}),(0,f.A)(this,"onChange",new e.bkB)}change(){this.onChange.emit(this.data)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-json-editor"]],inputs:{data:"data"},outputs:{onChange:"onChange"},standalone:!0,features:[e.aNF],decls:3,vars:4,consts:[["editor",""],[1,"card","shadow-none","bg-transparent","border","border-label-secondary","ps-0","pt-4","pe-4","pb-4"],[1,"my-code-editor",3,"onChange","ngModelChange","height","autoHeight","options","ngModel"]],template:function(o,s){if(1&o){const l=e.RV6();e.j41(0,"div",1)(1,"ngx-monaco-editor",2,0),e.bIt("onChange",function(){return e.eBV(l),e.Njj(s.change())}),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(s.data,p)||(s.data=p),e.Njj(p)}),e.k0s()()}2&o&&(e.R7$(),e.Y8G("height",200)("autoHeight",!0)("options",s.editorConf),e.R50("ngModel",s.data))},dependencies:[Or.V,em,z.MD,N.YN,N.BC,N.vS]})),r})();var w0=se(2663);function tm(t){if(!nm(t))throw new Error("Parameter was not an error")}function nm(t){return!!t&&"object"==typeof t&&"[object Error]"===function N0(t){return Object.prototype.toString.call(t)}(t)||t instanceof Error}class To extends Error{constructor(r,n){const o=[...arguments],{options:s,shortMessage:l}=function I0(t){let r,n="";if(0===t.length)r={};else if(nm(t[0]))r={cause:t[0]},n=t.slice(1).join(" ")||"";else if(t[0]&&"object"==typeof t[0])r=Object.assign({},t[0]),n=t.slice(1).join(" ")||"";else{if("string"!=typeof t[0])throw new Error("Invalid arguments passed to Layerr");r={},n=n=t.join(" ")||""}return{options:r,shortMessage:n}}(o);let u=l;s.cause&&(u=`${u}: ${s.cause.message}`),super(u),this.message=u,this.name=s.name&&"string"==typeof s.name?s.name:"Layerr",s.cause&&Object.defineProperty(this,"_cause",{value:s.cause}),Object.defineProperty(this,"_info",{value:{}}),s.info&&"object"==typeof s.info&&Object.assign(this._info,s.info),Error.captureStackTrace&&Error.captureStackTrace(this,s.constructorOpt||this.constructor)}static cause(r){return tm(r),r._cause&&nm(r._cause)?r._cause:null}static fullStack(r){tm(r);const n=To.cause(r);return n?`${r.stack}\ncaused by: ${To.fullStack(n)}`:r.stack??""}static info(r){tm(r);const n={},o=To.cause(r);return o&&Object.assign(n,To.info(o)),r._info&&Object.assign(n,r._info),n}toString(){let r=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(r=`${r}: ${this.message}`),r}}const Vr="0123456789ABCDEFGHJKMNPQRSTVWXYZ",zr=32,om=0xffffffffffff,Wn=Object.freeze({source:"ulid"});function G0(t){let r=Math.floor(t()*zr);return r===zr&&(r=zr-1),Vr.charAt(r)}var O0=se(4412);let V0=(()=>{var t;class r extends O0.t{constructor(){super("light"),this.subscribe(o=>{!o||"undefined"==o||(document.body.classList.contains("dark")&&"light"==o&&document.body.classList.remove("dark"),document.body.classList.contains("light")&&"dark"==o&&document.body.classList.remove("light"),document.body.classList.add(o))})}setTheme(o){this.next(o)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Y_=(()=>{var t;class r{constructor(o,s,l){(0,f.A)(this,"ngContainer",void 0),(0,f.A)(this,"ngTheme",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"ngReactComponent",void 0),(0,f.A)(this,"_root",void 0),(0,f.A)(this,"theme",void 0),(0,f.A)(this,"ngSubscriptions",void 0),this.ngContainer=o,this.ngTheme=s,this.ngZone=l,this.ngSubscriptions=[this.ngTheme.subscribe(u=>{this.theme=u,this.ngOnChanges()})]}ngOnInit(){if(!this.ngReactComponent)throw console.error("NO"),new Error("ReactMagicWrapperComponent cannot start without a provided ngReactComponent!")}ngOnChanges(o){this._render()}ngAfterViewInit(){this._render()}ngOnDestroy(){this._root.unmount(),this.ngSubscriptions.forEach(o=>o.unsubscribe())}_render(){this.ngReactComponent?this.ngZone.runOutsideAngular(()=>{try{this._root||(this._root=(0,w0.H)(this.ngContainer.element.nativeElement));const o=Object.keys(this).filter(p=>!/^(?:_|ng)/.test(p)),s=o.filter(p=>!p.startsWith("on")),l=o.filter(p=>p.startsWith("on")),u={};s.forEach(p=>u[p]=this[p]),this.ngZone.runGuarded(()=>{l.forEach(p=>u[p]=(..._)=>this[p].next(_))}),this._root.render(S.createElement(this.ngReactComponent,{props:u}))}catch(o){console.error(o)}}):console.log("Render no component. May be context issue")}}return t=r,(0,f.A)(r,"WrapAngularComponent",({component:n,appRef:o,injector:s,ngZone:l,staticInputs:u,staticOutputs:p,additionalChildren:_})=>S.memo(v=>{const g=function D0(t,r){const n=r||function L_(t){const r=t||function j0(){return function $0(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}(),n=r&&(r.crypto||r.msCrypto)||null;if("function"==typeof n?.getRandomValues)return()=>{const o=new Uint8Array(1);return n.getRandomValues(o),o[0]/255};if("function"==typeof n?.randomBytes)return()=>n.randomBytes(1).readUInt8()/255;throw new To({info:{code:"PRNG_DETECT",...Wn}},"Failed to find a reliable PRNG")}();return function im(t,r){if(isNaN(t))throw new To({info:{code:"ENC_TIME_NAN",...Wn}},`Time must be a number: ${t}`);if(t>om)throw new To({info:{code:"ENC_TIME_SIZE_EXCEED",...Wn}},`Cannot encode a time larger than ${om}: ${t}`);if(t<0)throw new To({info:{code:"ENC_TIME_NEG",...Wn}},`Time must be positive: ${t}`);if(!1===Number.isInteger(t))throw new To({info:{code:"ENC_TIME_TYPE",...Wn}},`Time must be an integer: ${t}`);let n,o="";for(let s=r;s>0;s--)n=t%zr,o=Vr.charAt(n)+o,t=(t-n)/zr;return o}(isNaN(t)?Date.now():t,10)+function U_(t,r){let n="";for(;t>0;t--)n=G0(r)+n;return n}(16,n)}();return S.useEffect(()=>{try{const y=(0,e.a0P)(n,{environmentInjector:o.injector,elementInjector:s,hostElement:document.getElementById(g)??void 0});o.attachView(y.hostView),Object.assign(u,v);const{inputs:x,outputs:C}=n.\u0275cmp;Object.entries(x).filter(([M,O])=>y.instance[O]!=u[M]).forEach(([M,O])=>{u.hasOwnProperty(M)&&(y.instance[O]=u[M])});const A={};Object.entries(C).filter(([M,O])=>!A[M]).forEach(([M,O])=>{if(!p.hasOwnProperty(M))return;const X=p,Y=y.instance[O].subscribe((...U)=>{l.run(()=>{X[M](...U)})});A[M]=Y});const E=y.onDestroy?.bind(y);y.onDestroy=M=>{Object.values(A).forEach(O=>O.unsubscribe()),E?.(M)},y.changeDetectorRef.detectChanges()}catch(y){console.error(y)}},[]),S.createElement("div",{},S.createElement("div",{id:g}),..._)})),(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.c1b),e.rXU(V0),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-react-magic-wrapper"]],standalone:!0,features:[e.OA$,e.aNF],decls:0,vars:0,template:function(o,s){},encapsulation:2})),r})(),Qt=(()=>{var t;class r{set data(o){this.nodeData=o}noticeUpdate(){this.updateOutput(),this.onDataChange.emit(this.nodeData)}constructor(o,s){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"id",""),(0,f.A)(this,"displayName",void 0),(0,f.A)(this,"type","base"),(0,f.A)(this,"desc",""),(0,f.A)(this,"err",""),(0,f.A)(this,"mode",""),(0,f.A)(this,"onDataChange",new e.bkB),(0,f.A)(this,"settingConf",void 0),this.ngZone=o,this.appService=s}ngOnInit(){this.updateOutput()}ngDoCheck(){}ngAfterViewInit(){let o=document.getElementById("settingModal-"+this.id);o&&(o.parentNode?.removeChild(o),document.body.appendChild(o),this.upgradeConf())}upgradeConf(){let o=this.getConfig();for(let s of o){let l=this.nodeData.conf.find(u=>u.key==s.key);l&&(s.value=l.value)}this.nodeData.conf=o}updateOutput(){}focusSettingModal(){let o=document.getElementById("settingModal-"+this.id);o&&o.querySelector(".form-control")?.focus()}openModal(o){let s=document.getElementById(o);if(s){let l=s.getAttribute("data-bs-target")?.substring(1)??"",u=document.getElementById(l);u&&(u.querySelectorAll(".content").forEach(p=>{p.classList.remove("content")}),setTimeout(()=>{u.querySelectorAll('[data-bs-dismiss="modal"]').forEach(p=>{p.addEventListener("click",()=>{u.classList.remove("show")})})},400),u.classList.add("show")),s.click()}}openSetting(o){this.ngZone?.run(()=>{o&&(this.settingConf=this.nodeData.conf.filter(s=>s.key==o)[0]??{key:o,value:""})}),this.openModal("btnShowModal-"+this.id)}closeSetting(){this.settingConf=void 0}getClassType(){return r}build(o,s,l,u){return Y_.WrapAngularComponent({component:this.getClassType(),appRef:o,injector:s,ngZone:l,staticInputs:{},staticOutputs:{onDataChange:p=>{u(p)}},additionalChildren:[S.createElement(ya,{type:"target",position:be.Left}),S.createElement(ya,{type:"source",position:be.Right})]})}getConfig(){return[]}setConfig(o,s){let l=this.nodeData.conf.filter(u=>u.key==o)[0];l?l.value=s:this.nodeData.conf.push({key:o,value:s}),this.noticeUpdate()}findConfig(o,s){return s||(s=this.nodeData),s.conf.filter(u=>u.key==o)[0]?.value??""}getNodeSpec(){return{id:"",type:this.type,desc:this.desc,displayName:this.displayName,conf:this.getConfig(),links:[],inputs:[],outputs:[]}}run(o,s,l,u,p,_){_(new Map)}parseTempate(o,s){let l=o.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g);for(let u of l){let p=s.get(u[1]);p?"string"==typeof p?o=o.replaceAll(u[0],p??""):p instanceof File&&(o=o.replaceAll(u[0],"Filename: "+p.name)):o=o.replaceAll(u[0],"")}return o}setupOutputValue(o,s){let l=new Map;for(let u of s.outputs)l.set(u.name,o);return l}showAddCollectionModal(){this.openModal("btnShowAddCollectionModal")}showAddVCollectionModal(){this.openModal("btnShowAddVCollectionModal")}showAddApiModal(){this.openModal("btnShowAddApiModal")}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-base-node"]],inputs:{data:"data",id:"id",mode:"mode"},outputs:{onDataChange:"onDataChange"},standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(o,s){}})),r})();const z0=[{name:"Markdown View",html:' bs-data="markdown-view"'},{name:"Loop",html:' *for="item of listVars"'},{name:"Selectable",html:' bs-select="img.src=>selectedImgs"'},{name:"Run JS",html:' bs-run="varName"'}],B0=["editor"];function P0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertUserInterface(s))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.ZvI("bx bx-",n.icon," scaleX-n1-rtl mr-2"),e.R7$(),e.SpI(" ",n.name," ")}}function L0(t,r){if(1&t&&(e.j41(0,"div",7)(1,"button",8),e.nrm(2,"span",22),e.EFF(3," User interface "),e.k0s(),e.j41(4,"mat-menu",null,3)(6,"div",10)(7,"ul",11),e.DNE(8,P0,4,4,"li",12),e.k0s()()()()),2&t){const n=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",o.userInterfaces)}}function U0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertAttr(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function X0(t,r){if(1&t&&(e.j41(0,"div",7)(1,"button",8),e.nrm(2,"span",22),e.EFF(3," Html Attributes "),e.k0s(),e.j41(4,"mat-menu",null,4)(6,"div",10)(7,"ul",11),e.DNE(8,U0,3,1,"li",12),e.k0s()()()()),2&t){const n=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",o.htmlAttrs)}}function Y0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",24),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertInputVar(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(),e.ZvI("ms-",n.level," dropdown-item d-flex align-items-center"),e.FS9("title",n.demo),e.R7$(),e.SpI(" ",n.name," ")}}function H0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertKey(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.key," ")}}function W0(t,r){if(1&t&&(e.j41(0,"div",25),e.nrm(1,"div",26),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("innerHTML",n.inputStr,e.npT)}}function Z0(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genWithAI())}),e.nrm(1,"i",28),e.EFF(2),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.isLoading),e.R7$(2),e.SpI(" ",n.isLoading?"Generating...":"Generate with AI"," ")}}let cn=(()=>{var t;class r extends Xo{constructor(o,s,l){super(),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"userInterfaces",[]),(0,f.A)(this,"htmlAttrs",z0),(0,f.A)(this,"editor",void 0),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"html",!1),(0,f.A)(this,"agentName",""),(0,f.A)(this,"editorConf",void 0),(0,f.A)(this,"varBtnLabel","Input Variables"),(0,f.A)(this,"onClose",new e.bkB),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"queue",[]),(0,f.A)(this,"varFormat","{@@}"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"lstVars",[]),(0,f.A)(this,"textData",""),this.appService=o,this.aiApi=s,this.zone=l}save(){this.textData=this.inputStr,this.onSave.emit(this.inputStr)}close(){this.inputStr=this.textData,this.onClose.emit()}genWithAI(){if(!this.isLoading){if(this.isLoading=!0,this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr),this.inputStr="",this.html){let o=JSON.stringify(this.lstVars.map(s=>s.name.trim()));this.agentRunner.setVars(["vars::"+o])}this.agentRunner.send(),this.editor?.focus()}}onMsgUpdate(o,s){let l=s?s.length:0,u=0;for(;u<l;){const p=Math.floor(9*Math.random())+2,_=Math.floor(16*Math.random())+5;this.queue.push({str:s.substring(u,u+p),t:_}),0==u&&1==this.queue.length&&this.startInsertAnim(),u+=p}}startInsertAnim(){let o=this.queue.shift();o&&(this.editor?.insertText(o.str),setTimeout(()=>{this.startInsertAnim()},o.t))}onDone(o){this.zone.run(()=>{this.isLoading=!1})}insertInputVar(o){o.name.startsWith("*")?(this.editor?.insertText(o.demo),this.editor?.formatCode()):this.editor?.insertText(this.varFormat.replaceAll("@@",o.name)),this.editor?.focus()}insertAttr(o){this.editor?.insertText(o.html),this.editor?.focus()}insertKey(o){this.editor?.insertText("{"+o.key+"}"),this.editor?.focus()}insertUserInterface(o){this.editor?.insertText(o.html),this.editor?.focus()}loadConf(){this.appService.getConf("app-ui-interfaces").subscribe(o=>{let s=o.data.split("====");this.userInterfaces=[];for(let l of s){if(""==l.trim())continue;let u=l.trim().split("\n"),p=u[0],_=u[1];u.splice(0,2);let v=u.join("\n");this.userInterfaces.push({name:p,icon:_,html:v})}})}loadKeys(){this.appService?.listKeys().subscribe(o=>{this.lstKeys=o})}ngOnInit(){this.agentRunner=new Kn(this.aiApi,this),this.agentRunner.setAgentName(this.agentName),this.loadConf(),this.loadKeys(),this.textData=this.inputStr,this.editorConf={theme:"myCoolTheme",language:this.html?"html":"demo",wordWrap:this.html?"off":"on",lineNumbers:this.html?"on":"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0};for(let o of this.vars){if(this.lstVars.push({name:o.name,level:0,demo:o.demo}),"json"==o.type){let l=Ge.extractProperties(JSON.parse(o.demo),1);for(let u of l)this.lstVars.push({name:o.name+"."+u.name,level:u.level,demo:""})}o.type.endsWith("[]")&&this.lstVars.push({name:`*for="item of ${o.name}"`,level:0,demo:`<div class="box mb-3" *for="item of ${o.name}">\n    <div class="box-body">\n        <p class="box-text">\n            {item}\n        </p>\n    </div>\n</div>`})}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU($e),e.rXU(ct),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-input-format"]],viewQuery:function(o,s){if(1&o&&e.GBs(B0,5),2&o){let l;e.mGM(l=e.lsd())&&(s.editor=l.first)}},inputs:{inputStr:"inputStr",vars:"vars",html:"html",agentName:"agentName",varBtnLabel:"varBtnLabel",varFormat:"varFormat"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:17,consts:[["menu3",""],["menu4",""],["editor",""],["menu1",""],["menu2",""],[1,"mb-3"],["class","btn-group mr-3",4,"ngIf"],[1,"btn-group","mr-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","p-0",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-18px","mr-1"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[2,"max-height","550px","overflow-y","auto","overflow-x","hidden"],[1,"col-span-2"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","vars","height","autoHeight","options","ngModel"],["class","col-lg-4 p-3 rounded",4,"ngIf"],[1,"mt-3","text-end"],["type","button","class","btn btn-text-primary mr-3","title","Enter what do you want your agent do and click this button",3,"disabled","click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"tf-icons","bx","bx-tv","bx-18px","mr-1"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],["href","javascript:void(0);",3,"click","title"],[1,"col-lg-4","p-3","rounded"],[3,"innerHTML"],["type","button","title","Enter what do you want your agent do and click this button",1,"btn","btn-text-primary","mr-3",3,"click","disabled"],[1,"bx","bxs-magic-wand","mr-2"]],template:function(o,s){if(1&o){const l=e.RV6();e.j41(0,"div")(1,"div",5),e.DNE(2,L0,9,2,"div",6)(3,X0,9,2,"div",6),e.j41(4,"div",7)(5,"button",8),e.nrm(6,"span",9),e.EFF(7),e.k0s(),e.j41(8,"mat-menu",null,0)(10,"div",10)(11,"ul",11),e.DNE(12,Y0,3,5,"li",12),e.k0s()()()(),e.j41(13,"div",7)(14,"button",8),e.nrm(15,"span",9),e.EFF(16," Access Keys "),e.k0s(),e.j41(17,"mat-menu",null,1)(19,"div",10)(20,"ul",11),e.DNE(21,H0,3,1,"li",12),e.k0s()()()()(),e.j41(22,"div",13)(23,"div",14)(24,"div",15)(25,"ngx-monaco-editor",16,2),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(s.inputStr,p)||(s.inputStr=p),e.Njj(p)}),e.k0s()()(),e.DNE(27,W0,2,1,"div",17),e.k0s(),e.j41(28,"div",18),e.DNE(29,Z0,3,2,"button",19),e.j41(30,"button",20),e.bIt("click",function(){return e.eBV(l),e.Njj(s.close())}),e.EFF(31,"Close"),e.k0s(),e.j41(32,"button",21),e.bIt("click",function(){return e.eBV(l),e.Njj(s.save())}),e.EFF(33," Save "),e.k0s()()()}if(2&o){const l=e.sdS(9),u=e.sdS(18);e.R7$(2),e.Y8G("ngIf",s.html),e.R7$(),e.Y8G("ngIf",s.html),e.R7$(2),e.Y8G("matMenuTriggerFor",l),e.R7$(2),e.SpI(" ",s.varBtnLabel," "),e.R7$(5),e.Y8G("ngForOf",s.lstVars),e.R7$(2),e.Y8G("matMenuTriggerFor",u),e.R7$(7),e.Y8G("ngForOf",s.lstKeys),e.R7$(),e.ZvI("grid grid-cols-",s.html?"3":"1"," gap-1"),e.R7$(3),e.Y8G("vars",s.vars)("height",450)("autoHeight",!0)("options",s.editorConf),e.R50("ngModel",s.inputStr),e.R7$(2),e.Y8G("ngIf",s.html),e.R7$(2),e.Y8G("ngIf",s.agentName)}},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.BC,N.vS,Or.V,em,Z.Cn,Z.kk,Z.Cp],styles:[".zoom-out-80[_ngcontent-%COMP%]{transform:scale(.8)}"]})),r})();function q0(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function J0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function K0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add url "),e.k0s()()}}function Q0(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Url "),e.k0s(),e.DNE(3,J0,3,5,"div",20)(4,K0,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function e1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function t1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add headers "),e.k0s()()}}function n1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Headers "),e.k0s(),e.DNE(3,e1,3,5,"div",20)(4,t1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function o1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Method "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function r1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function s1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add body "),e.k0s()()}}function a1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Request body "),e.k0s(),e.DNE(3,r1,3,5,"div",20)(4,s1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function l1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function c1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add specs "),e.k0s()()}}function u1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Response specs "),e.k0s(),e.DNE(3,l1,3,5,"div",20)(4,c1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function d1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function p1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function f1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Check success "),e.k0s(),e.DNE(3,d1,3,5,"div",20)(4,p1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function m1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function _1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function h1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat until "),e.k0s(),e.DNE(3,m1,3,5,"div",20)(4,_1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function g1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat timeout (second) "),e.k0s(),e.j41(3,"input",26),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function v1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Q0,5,2,"div",17)(2,n1,5,2,"div",17)(3,o1,4,1,"div",17)(4,a1,5,2,"div",17)(5,u1,5,2,"div",17)(6,f1,5,2,"div",17)(7,h1,5,2,"div",17)(8,g1,4,1,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","headers"==n.key),e.R7$(),e.Y8G("ngIf","method"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key),e.R7$(),e.Y8G("ngIf","response"==n.key),e.R7$(),e.Y8G("ngIf","check"==n.key),e.R7$(),e.Y8G("ngIf","repeat"==n.key),e.R7$(),e.Y8G("ngIf","wait"==n.key)}}function y1(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function b1(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,y1,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function x1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function C1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function S1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function k1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function w1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function N1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let H_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"headers",[{key:"User-Agent",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:127.0) Gecko/20100101 Firefox/127.0"},{key:"Cookie",value:""},{key:"Authorization",value:""}]),(0,f.A)(this,"type","apiInvoker"),(0,f.A)(this,"desc","Invoke external api")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"headers",value:this.headers.map(s=>s.key+": "+s.value).join("\n")},{key:"method",value:"POST"},{key:"body",value:""},{key:"check",value:""},{key:"repeat",value:""},{key:"wait",value:"180"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-data",type:"json",demo:"{}"}]}updateConf(o,s){this.setConfig(o,s),this.noticeUpdate()}run(o,s,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-api-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:23,vars:15,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Time in second",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,q0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,v1,9,8,"div",5),e.k0s()(),e.DNE(8,b1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,x1,1,2,"app-input-format",14)(18,C1,1,2,"app-input-format",14)(19,S1,1,2,"app-input-format",14)(20,k1,1,2,"app-input-format",14)(21,w1,1,2,"app-input-format",14)(22,N1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","headers"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","body"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","response"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","repeat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","check"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","url"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.me,N.BC,N.vS,Ft,cn]})),r})();function E1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function I1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function A1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function T1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,I1,3,5,"div",21)(4,A1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function F1(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function R1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Voice Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.bIt("change",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.playAu(s))}),e.DNE(4,F1,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.value)}}function j1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",28),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",29),e.EFF(5,"tts-1"),e.k0s(),e.j41(6,"option",30),e.EFF(7,"tts-1-hd"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function M1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,T1,5,2,"div",17)(2,R1,5,2,"div",18)(3,j1,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","voice"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function $1(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function G1(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,$1,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function D1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let W_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"settings",{key:"style",name:"Voice Style",value:["alloy","echo","fable","onyx","nova","shimmer"],default:"alloy",demo:["https://cdn.openai.com/API/docs/audio/alloy.wav","https://cdn.openai.com/API/docs/audio/echo.wav","https://cdn.openai.com/API/docs/audio/fable.wav","https://cdn.openai.com/API/docs/audio/onyx.wav","https://cdn.openai.com/API/docs/audio/nova.wav","https://cdn.openai.com/API/docs/audio/shimmer.wav"]}),(0,f.A)(this,"type","textToAudio"),(0,f.A)(this,"desc","Generate audio from text"),(0,f.A)(this,"currentAudio",void 0)}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"tts-1"},{key:"voice",value:this.settings.default}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-audio",type:"json",demo:'{"url": "", "duration": 5}'}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}playAu(o){let s=this.findConfig("voice"),l=this.settings.value.indexOf(s),u=this.settings.demo[l];this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(u),this.currentAudio.play().catch(p=>{console.error("Error playing audio:",p)})}run(o,s,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-audio-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","tts-1"],["value","tts-1-hd"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,E1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,M1,4,3,"div",5),e.k0s()(),e.DNE(8,G1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,D1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,cn,Ft]})),r})();function O1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function V1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function z1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function B1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,V1,3,5,"div",21)(4,z1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function P1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",26),e.EFF(5,"text-embedding-3-small"),e.k0s(),e.j41(6,"option",27),e.EFF(7,"text-embedding-3-large"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function L1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,B1,5,2,"div",17)(2,P1,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function U1(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function X1(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,U1,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Y1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Z_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","embedding"),(0,f.A)(this,"desc","Embedding data for symantic search")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"text-embedding-3-small"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-embeddingVector",type:"vector",demo:""},{name:this.id+"-content",type:"string",demo:""}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,s,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-embedding-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","text-embedding-3-small"],["value","text-embedding-3-large"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,O1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,L1,3,2,"div",5),e.k0s()(),e.DNE(8,X1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Y1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Ft,cn]})),r})();function H1(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function W1(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function Z1(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function q1(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function J1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,W1,7,0,"div",13)(4,Z1,3,4,"span",14)(5,q1,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(s))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isReading),e.R7$(),e.Y8G("ngIf",!o.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!o.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let K1=(()=>{var t;class r{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",s=>{if(this.err="",s.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,u={file:s,name:this.name,content:""};switch(this.files.push(u),Ge.getFileExt(s.name)){case"pdf":_=new Ss;break;case"docx":_=new Cs;break;case"jpg":case"png":case"jpeg":_=new vi}this.isReading=!0,this.onStartReading.emit(),_?.readFile(s).then(v=>{u.content=v,this.isReading=!1,this.onAddFile.emit(u)})})},200)}remove(o){this.files.splice(o,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(o,s){1&o&&(e.DNE(0,H1,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,J1,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&o&&(e.Y8G("ngIf",s.err),e.R7$(),e.Mz_("id","dropzone-basic-",s.name,""),e.R7$(8),e.Y8G("ngForOf",s.files))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.qT,N.cb,N.cV,Ft]})),r})();function Q1(t,r){if(1&t&&e.nrm(0,"i",22),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function ev(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function tv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function nv(t,r){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(2).$implicit;e.ZvI("",n.value.desc," mr-2")}}function ov(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"div")(6,"button",29),e.DNE(7,nv,1,3,"i",30),e.EFF(8),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(4),e.Y8G("ngIf",n.value.desc),e.R7$(),e.SpI(" ",n.value.label,"")}}function iv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",31),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",32),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function sv(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function av(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"select",33),e.DNE(6,sv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(3),e.Y8G("ngForOf",n.value.listOptions)}}function lv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"textarea",36),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function cv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"div",37)(6,"p",38),e.EFF(7,"Drag and drop your file here"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function uv(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,ev,6,2,"div",23)(2,tv,6,2,"div",23)(3,ov,9,3,"div",23)(4,iv,6,1,"div",23)(5,rv,6,1,"div",23)(6,av,7,2,"div",23)(7,lv,6,1,"div",23)(8,cv,8,1,"div",23),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","submit"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type),e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type)}}function dv(t,r){if(1&t&&(e.j41(0,"div",42),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function pv(t,r){if(1&t&&(e.j41(0,"div",39)(1,"div",40),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,dv,2,2,"div",41),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function fv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Q1,1,1,"i",7),e.k0s(),e.j41(5,"div",8)(6,"div",9),e.DNE(7,uv,9,8,"div",10),e.k0s(),e.j41(8,"div")(9,"div",11)(10,"button",12),e.nrm(11,"i",13),e.EFF(12," Add form control"),e.k0s(),e.j41(13,"mat-menu",null,0)(15,"div",14)(16,"ul",15)(17,"li")(18,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("textbox"))}),e.nrm(19,"i",17),e.EFF(20,"Textbox "),e.k0s()(),e.j41(21,"li")(22,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("select"))}),e.nrm(23,"i",17),e.EFF(24,"SelectBox "),e.k0s()(),e.j41(25,"li")(26,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("textarea"))}),e.nrm(27,"i",18),e.EFF(28,"Textarea "),e.k0s()(),e.j41(29,"li")(30,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("datetime"))}),e.nrm(31,"i",18),e.EFF(32,"DateTime "),e.k0s()(),e.j41(33,"li")(34,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("file"))}),e.nrm(35,"i",19),e.EFF(36,"File Upload "),e.k0s()(),e.j41(37,"li")(38,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("key"))}),e.nrm(39,"i",19),e.EFF(40,"Access Key "),e.k0s()(),e.j41(41,"li")(42,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("html"))}),e.nrm(43,"i",20),e.EFF(44,"Html View "),e.k0s()(),e.j41(45,"li")(46,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("submit"))}),e.nrm(47,"i",20),e.EFF(48,"Submit Button "),e.k0s()()()()()()()(),e.DNE(49,pv,4,1,"div",21),e.k0s()}if(2&t){const n=e.sdS(14),o=e.XpG();e.R7$(3),e.JRh(o.type),e.R7$(),e.Y8G("ngIf",o.err),e.R7$(3),e.Y8G("ngForOf",o.nodeData.conf),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(39),e.Y8G("ngIf",o.nodeData.outputs.length>0)}}function mv(t,r){if(1&t&&e.nrm(0,"button",43),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function _v(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2,"List Options (One option per line, format: `Text=>Value`)"),e.k0s(),e.j41(3,"textarea",51),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.listOptions,s)||(l.listOptions=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.listOptions)}}function hv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46)(3,"div",47)(4,"h5",48),e.EFF(5," Add form control "),e.k0s()(),e.j41(6,"div",49)(7,"div",24)(8,"label",25),e.EFF(9,"Label"),e.k0s(),e.j41(10,"input",50),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addLabel,s)||(l.addLabel=s),e.Njj(s)}),e.bIt("keyup",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.onLabelChange())}),e.k0s()(),e.j41(11,"div",24)(12,"label",25),e.EFF(13,"Var Name"),e.k0s(),e.j41(14,"input",51),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addVarName,s)||(l.addVarName=s),e.Njj(s)}),e.k0s()(),e.j41(15,"div",24)(16,"label",25),e.EFF(17,"Description"),e.k0s(),e.j41(18,"textarea",51),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addDesc,s)||(l.addDesc=s),e.Njj(s)}),e.k0s()(),e.DNE(19,_v,4,1,"div",23),e.j41(20,"div")(21,"button",52),e.EFF(22,"Close"),e.k0s(),e.j41(23,"button",53),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.saveControl())}),e.EFF(24),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(10),e.R50("ngModel",n.addLabel),e.R7$(4),e.R50("ngModel",n.addVarName),e.R7$(4),e.R50("ngModel",n.addDesc),e.R7$(),e.Y8G("ngIf","select"==n.addType),e.R7$(5),e.SpI("",n.curConf?"Save":"Add"," Control")}}function gv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function vv(t,r){if(1&t&&(e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,gv,1,0,"i",55),e.k0s(),e.nrm(4,"input",56),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function yv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function bv(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function xv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,yv,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,bv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function Cv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Sv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Cv,1,0,"i",55),e.k0s(),e.j41(4,"textarea",59),e.bIt("input",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.autoResize(s.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function kv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function wv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,kv,1,0,"i",55),e.k0s(),e.j41(4,"app-file-control",60),e.bIt("onStartReading",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onStartReadingFile())})("onAddFile",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onAddFile(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",o.nodeData.id+"-"+n.key)}}function Nv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Ev(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function Iv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Nv,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,Ev,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",o.lstKeys)}}function Av(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,vv,5,6,"div",23)(2,xv,6,5,"div",23)(3,Sv,6,6,"div",23)(4,wv,5,3,"div",23)(5,Iv,6,5,"div",23),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}function Tv(t,r){if(1&t&&(e.j41(0,"div",54)(1,"div",9),e.DNE(2,Av,6,5,"div",10),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.nodeData.conf)}}let q_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"appId",0),(0,f.A)(this,"type","form"),(0,f.A)(this,"desc","User interaction form"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"addType",""),(0,f.A)(this,"addLabel",""),(0,f.A)(this,"addVarName",""),(0,f.A)(this,"addDesc",""),(0,f.A)(this,"listOptions",""),(0,f.A)(this,"curConf",void 0),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB)}getClassType(){return r}updateOutput(){this.nodeData.outputs=[];for(let o of this.nodeData.conf)"file"!=o.value.type&&(this.nodeData.outputs.push({name:this.id+"-"+o.key,type:"file"==o.value.type?"File":"string",demo:'{name: "filename"}|"text value"'}),"file"==o.value.type&&this.nodeData.outputs.push({name:this.id+"-"+o.key+"-dataUrl",type:"string",demo:""}))}upgradeConf(){}ngOnInit(){if(super.ngOnInit(),"render"!=this.mode)return;let o=!1;for(let s of this.nodeData.conf)s.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+s.key)??"","key"==s.value.type&&(o=!0);o&&this.appService?.listKeys().subscribe(s=>{this.lstKeys=s}),setTimeout(()=>{let s=document.querySelectorAll(".form-node-renderred textarea");for(let l of s)this.autoResize(l)},200)}getConfig(){return[]}addControl(o){this.ngZone?.run(()=>{this.addType=o,this.addLabel="",this.addVarName=""}),this.curConf=void 0,this.openSetting()}autoResize(o){o.style.height="50px",o.style.overflowY="hidden",o.style.height=o.scrollHeight+10+"px"}showInfo(o){alert(o)}saveControl(){let o=":";this.listOptions.includes("=>")&&(o="=>");let s=this.listOptions.split("\n").map(l=>l.split(o));this.curConf?(this.curConf.value.label=this.addLabel,this.curConf.value.desc=this.addDesc,this.curConf.value.listOptions=s.map(l=>({value:l[1],text:l[0]})),this.curConf.key=this.addVarName):this.nodeData.conf.push({key:this.addVarName,value:{type:this.addType,label:this.addLabel,desc:this.addDesc,listOptions:s.map(l=>({value:l[1],text:l[0]}))}}),this.noticeUpdate()}removeControl(o){this.nodeData.conf.splice(o,1),this.noticeUpdate()}editConf(o){this.curConf=o,this.addType=o.value.type,this.addLabel=o.value.label,this.addVarName=o.key,this.addDesc=o.value.desc,this.listOptions=o.value.listOptions?o.value.listOptions.map(s=>`${s.text}=>${s.value}`).join("\n"):"",this.openSetting()}ngDoCheck(){this.err=0==this.nodeData.conf.length?'No Control. Click "Add form control" to add control to your form':""}onLabelChange(){this.ngZone?.run(()=>{this.addVarName=Ge.toCamelCase(this.addLabel)})}onAddFile(o){this.onUploaded.emit(o)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],inputs:{appId:"appId"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["menu",""],["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],["class","form-node-renderred",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"bx","bx-plus","me-2"],[1,"dropdown-menu","show","w-48","mt-1"],[1,"dropdown-content"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"bx","bx-text","me-3"],[1,"bx","bx-detail","me-3"],[1,"bx","bx-paperclip","me-3"],[1,"bx","bx-align-left","me-3"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"cursor-pointer",3,"click"],[1,"bx","bx-x","cursor-pointer",3,"click"],["type","text","autocomplete","off",1,"form-control",3,"placeholder"],[1,"btn","btn-primary"],[3,"class",4,"ngIf"],["type","text","autocomplete","off","placeholder","Key",1,"form-control"],["type","text","autocomplete","off","placeholder","Html View",1,"form-control"],[1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control"],[1,"dropzone"],[1,"h6","text-center","mt-4","text-small"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],["type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary","me-3",3,"click"],[1,"form-node-renderred"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(o,s){1&o&&e.DNE(0,fv,50,5,"div",1)(1,mv,1,3,"button",2)(2,hv,25,7,"div",3)(3,Tv,3,1,"div",4),2&o&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf","render"==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.me,N.wz,N.BC,N.vS,K1,Z.Cn,Z.kk,Z.Cp]})),r})();function Fv(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function jv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Mv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Rv,3,5,"div",21)(4,jv,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function $v(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Gv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,$v,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.style)}}function Dv(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Ov(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Size "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,Dv,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.size)}}function Vv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",28),e.EFF(5,"dall-e-2"),e.k0s(),e.j41(6,"option",29),e.EFF(7,"dall-e-3"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function zv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Cookie "),e.k0s(),e.j41(3,"input",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Bv(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Mv,5,2,"div",17)(2,Gv,5,2,"div",18)(3,Ov,5,2,"div",18)(4,Vv,8,1,"div",18)(5,zv,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","style"==n.key),e.R7$(),e.Y8G("ngIf","size"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.Y8G("ngIf","cookie"==n.key)}}function Pv(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Lv(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Pv,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Uv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let J_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"settings",{style:["natural","vivid"],size:["1024x1024","1792x1024","1024x1792"]}),(0,f.A)(this,"type","textToImage"),(0,f.A)(this,"desc","Generate image from text")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"dall-e-3"},{key:"style",value:"natural"},{key:"size",value:"1792x1024"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-image",type:"image",demo:""}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,s,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-image-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","dall-e-2"],["value","dall-e-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Fv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Bv,6,5,"div",5),e.k0s()(),e.DNE(8,Lv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Uv,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.me,N.wz,N.BC,N.vS,Ft,cn]})),r})();const Xv=["outputEditor"];function Yv(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Type your output format in free style and click 'Generate' button. "),e.nrm(2,"br"),e.EFF(3,"Example: "),e.j41(4,"code"),e.EFF(5,"name: string, listItem: string[]"),e.k0s()())}function Hv(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Describe your example and click 'Generate' button. "),e.k0s())}function Wv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div"),e.DNE(1,Yv,6,0,"div",2)(2,Hv,2,0,"div",2),e.j41(3,"div",3)(4,"ngx-monaco-editor",4,0),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.inputStr,s)||(l.inputStr=s),e.Njj(s)}),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"button",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.generate())}),e.nrm(9,"i",8),e.EFF(10," Generate "),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"button",11),e.EFF(14,"Close"),e.k0s(),e.j41(15,"button",12),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.save())}),e.EFF(16),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf","UserOutputFormatBuilder"==n.agentName),e.R7$(),e.Y8G("ngIf","ExamplesBuilder"==n.agentName),e.R7$(2),e.Y8G("height",200)("autoHeight",!0)("options",n.editorFuncOptions),e.R50("ngModel",n.inputStr),e.R7$(4),e.Y8G("disabled",""==n.inputStr&&"UserOutputFormatBuilder"==n.agentName),e.R7$(7),e.Y8G("disabled",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"Generating...":"Save"," ")}}function Zv(t,r){1&t&&(e.j41(0,"div")(1,"div"),e.EFF(2," Please add agent Prompt first! "),e.k0s(),e.j41(3,"div",10)(4,"button",11),e.EFF(5,"Close"),e.k0s()()())}let qv=(()=>{var t;class r extends Xo{constructor(o,s){super(),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"editorFuncOptions",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!1}),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genMsg",""),(0,f.A)(this,"agentName","UserOutputFormatBuilder"),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"outputEditor",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"onSave",new e.bkB),this.zone=o,this.aiApi=s,this.agentRunner=new Kn(this.aiApi,this)}generate(){this.isLoading=!0,this.outputEditor?.writeValue(""),this.agentRunner.setAgentName(this.agentName),this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr);let o=[`agent::${this.prompt}`];""!=this.genMsg&&o.push(this.genMsg),this.agentRunner.setVars(o),this.agentRunner.send()}save(){this.onSave.emit(this.inputStr)}onMsgUpdate(o,s){this.outputEditor?.insertText(s??"")}onDone(o){this.outputEditor?.formatCode(),this.zone.run(()=>{this.isLoading=!1})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(ct))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-output-format"]],viewQuery:function(o,s){if(1&o&&e.GBs(Xv,5),2&o){let l;e.mGM(l=e.lsd())&&(s.outputEditor=l.first)}},inputs:{inputStr:"inputStr",prompt:"prompt",genMsg:"genMsg",agentName:"agentName"},outputs:{onSave:"onSave"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["outputEditor",""],[4,"ngIf"],["class","small mb-3",4,"ngIf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","height","autoHeight","options","ngModel"],[1,"row"],[1,"col-lg-5","mt-3"],["type","button",1,"btn","btn-text-primary",3,"click","disabled"],[1,"bx","bxs-magic-wand","me-2"],[1,"col-lg-7"],[1,"mt-3","text-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],[1,"small","mb-3"]],template:function(o,s){1&o&&e.DNE(0,Wv,17,9,"div",1)(1,Zv,6,0,"div",1),2&o&&(e.Y8G("ngIf",s.prompt),e.R7$(),e.Y8G("ngIf",!s.prompt))},dependencies:[Or.V,em,z.MD,z.bT,N.YN,N.BC,N.vS]})),r})();function Jv(t,r){if(1&t&&e.nrm(0,"i",19),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Kv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.brH(2,2,n.value,50,"**SYSTEM:")," ")}}function Qv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",28),e.EFF(3," Add prompt "),e.k0s()()}}function e2(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," System Instructions "),e.k0s(),e.DNE(3,Kv,3,6,"div",25)(4,Qv,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function t2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function n2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",29),e.EFF(3," Add prompt template "),e.k0s()()}}function o2(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Prompt Template "),e.k0s(),e.DNE(3,t2,3,5,"div",25)(4,n2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function i2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function r2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",29),e.EFF(3," Add examples "),e.k0s()()}}function s2(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Examples "),e.k0s(),e.DNE(3,i2,3,5,"div",25)(4,r2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function a2(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function l2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",24),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,a2,2,2,"option",31),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.modelNames)}}function c2(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function u2(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",35),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(1,c2,2,2,"option",31),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function d2(t,r){1&t&&(e.j41(0,"div",36)(1,"small",37),e.EFF(2,"No Vector Collection"),e.k0s()())}function p2(t,r){if(1&t&&(e.j41(0,"div")(1,"label",24),e.EFF(2," Documents "),e.k0s(),e.j41(3,"div"),e.DNE(4,u2,2,2,"select",33)(5,d2,3,0,"div",34),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function f2(t,r){if(1&t){const n=e.RV6();e.j41(0,"li",46),e.nrm(1,"i",47),e.EFF(2),e.j41(3,"i",48),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(4);return e.Njj(l.delTool(s))}),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n," ")}}function m2(t,r){if(1&t&&(e.j41(0,"div",43)(1,"ul",44),e.DNE(2,f2,4,1,"li",45),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",n.tools)}}function _2(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.addTool(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function h2(t,r){if(1&t&&(e.j41(0,"div",38)(1,"label",24),e.EFF(2," Tools "),e.k0s(),e.DNE(3,m2,3,1,"div",39),e.j41(4,"div")(5,"div",40)(6,"button",41),e.nrm(7,"i",29),e.EFF(8," Add tool "),e.k0s(),e.j41(9,"ul",42),e.DNE(10,_2,3,1,"li",5),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",n.tools.length>0),e.R7$(7),e.Y8G("ngForOf",n.lstTool)}}function g2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,e2,5,2,"div",20)(2,o2,5,2,"div",20)(3,s2,5,2,"div",20)(4,l2,5,2,"div",21),e.j41(5,"div"),e.DNE(6,p2,6,2,"div",21)(7,h2,11,2,"div",22),e.k0s()()),2&t){const n=r.$implicit,o=e.XpG();e.R7$(),e.Y8G("ngIf","prompt"==n.key),e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","examples"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.ZvI("mt-2 ",o.moreSetting?"":"d-none",""),e.R7$(),e.Y8G("ngIf","doc"==n.key),e.R7$(),e.Y8G("ngIf","tools"==n.key)}}function v2(t,r){if(1&t&&(e.j41(0,"div",54),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function y2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",50)(1,"div",51),e.EFF(2," Outputs "),e.j41(3,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.openSetting("outputFormat"))}),e.k0s()(),e.DNE(4,v2,2,2,"div",53),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.nodeData.outputs)}}function b2(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Add Prompt "),e.k0s())}function x2(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Input Template "),e.k0s())}function C2(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Set Output Format "),e.k0s())}function S2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",56),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onAddPrompt(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("agentName","UserAgentBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function k2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",57),e.bIt("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateOutputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function w2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",58),e.bIt("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateExamples(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("genMsg",n.genExampleMsg)("agentName","ExamplesBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function N2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",59),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let K_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","agent"),(0,f.A)(this,"desc","An AI Agent to process your data"),(0,f.A)(this,"moreSetting",!1),(0,f.A)(this,"modelNames",["gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-002","gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp-1219"]),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genExampleMsg",""),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"lstCollection",[]),(0,f.A)(this,"lstTool",[{name:"code_execution"},{name:"google_search_retrieval"}]),(0,f.A)(this,"tools",[]),(0,f.A)(this,"agentRunner",void 0)}getClassType(){return r}getConfig(){return[{key:"prompt",value:""},{key:"input",value:""},{key:"examples",value:""},{key:"model",value:"gemini-1.5-flash"},{key:"doc",value:""},{key:"tools",value:[]},{key:"outputFormat",value:""}]}showMore(){this.ngZone?.run(()=>{this.moreSetting=!this.moreSetting})}updateOutput(){let o=this.findConfig("outputFormat").trim();this.nodeData.outputs=""==o?[{name:this.id+"-agentResponse",type:"string",demo:""}]:[{name:this.id+"-agentResponse",type:"json",demo:JSON.stringify(Ge.createDemoDataForJsonSchema(o))}]}openSetting(o){this.prompt=this.findConfig("prompt"),this.genExampleMsg=this.findConfig("outputFormat"),""!=this.genExampleMsg&&(this.genExampleMsg="output_format::"+this.genExampleMsg),super.openSetting(o)}onAddPrompt(o){this.setConfig("prompt",o)}updateOutputFormat(o){this.setConfig("outputFormat",o),this.updateOutput()}updateExamples(o){this.setConfig("examples",o),this.updateOutput()}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}loadCols(){this.appService?.listVCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("doc",this.selectedCollection)}ngOnInit(){super.ngOnInit(),this.appService?.listVCollection().subscribe(o=>{this.lstCollection=o}),this.tools=this.findConfig("tools")??[],this.selectedCollection=this.findConfig("doc"),this.loadCols(),(this.selectedCollection||this.tools.length>0)&&(this.moreSetting=!0)}addTool(o){this.ngZone?.run(()=>{0==this.tools.filter(l=>l==o.name).length&&(this.tools.push(o.name),this.setConfig("tools",this.tools))})}delTool(o){this.ngZone?.run(()=>{this.tools.splice(o,1),this.setConfig("tools",this.tools)})}ngDoCheck(){this.err=""==this.findConfig("prompt")?'No Prompt. Click "Add prompt" to instruct your agent':""}run(o,s,l,u,p,_){let v=this.findConfig("doc",l),g=this.findConfig("input",l);g=this.parseTempate(g,u);let y=[];for(let C of u.entries())y.push(`${C[0]}::${C[1]}`);let x=new ct(o);this.agentRunner=new Kn(x,new Xo(void 0,C=>{let I=new Map,A=null;try{A=JSON.parse(C)}catch{}for(let T of l.outputs)I.set(T.name,A??C);_(I)})),this.agentRunner.setAgentName(`flow-${s}.${l.id}`),this.agentRunner.setVars(y),this.agentRunner.addUserMessage(g),v&&this.agentRunner.setMemType(v),this.agentRunner.send()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-llm-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:24,vars:19,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"p-1","text-center",3,"click"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body","content"],[3,"agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"inputStr","prompt","onSave",4,"ngIf"],[3,"genMsg","agentName","inputStr","prompt","onSave",4,"ngIf"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bxs-magic-wand","me-2"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change","click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[1,"mb-3"],[1,"text-muted"],[1,"mt-2"],["class","small",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow"],[1,"dropdown-menu"],[1,"small"],[1,"list-group"],["class","p-0 list-group-item d-flex align-items-center border-0 small",4,"ngFor","ngForOf"],[1,"p-0","list-group-item","d-flex","align-items-center","border-0","small"],[1,"bx","bx-code","me-2"],[1,"bx","bx-x","ms-3","cursor-pointer",3,"click"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-small",3,"click"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["title","Set Output Format",1,"bx","bx-code-alt","cursor-pointer","text-link",3,"click"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[1,"modal-title"],[3,"onClose","onSave","agentName","inputStr","vars"],[3,"onSave","inputStr","prompt"],[3,"onSave","genMsg","agentName","inputStr","prompt"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Jv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,g2,8,9,"div",5),e.j41(8,"div",6),e.bIt("click",function(){return s.showMore()}),e.nrm(9,"i"),e.k0s()()(),e.DNE(10,y2,5,1,"div",7),e.k0s(),e.nrm(11,"button",8),e.j41(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),e.DNE(16,b2,2,0,"h5",13)(17,x2,2,0,"h5",13)(18,C2,2,0,"h5",13),e.k0s(),e.j41(19,"div",14),e.DNE(20,S2,1,3,"app-input-format",15)(21,k2,1,2,"app-output-format",16)(22,w2,1,4,"app-output-format",17)(23,N2,1,2,"app-input-format",18),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(2),e.ZvI("bx bx-chevron-",s.moreSetting?"up":"down"," cursor-pointer"),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(4),e.Y8G("ngIf","prompt"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(2),e.Y8G("ngIf","prompt"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","examples"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,qv,Ft,cn]})),r})();function E2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function I2(t,r){if(1&t&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function A2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",18),e.EFF(2," Run App "),e.k0s(),e.j41(3,"select",19),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedApp,s)||(l.selectedApp=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateApp())}),e.DNE(4,I2,2,2,"option",20),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.selectedApp),e.R7$(),e.Y8G("ngForOf",n.lstApp)}}function T2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function F2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",25),e.EFF(3," Set Value "),e.k0s()()}}function R2(t,r){if(1&t&&(e.j41(0,"div")(1,"label",18),e.EFF(2),e.k0s(),e.DNE(3,T2,3,5,"div",22)(4,F2,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",o.getAppVar(n.key)," "),e.R7$(),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function j2(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,A2,5,2,"div",17)(2,R2,5,3,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","app"==n.key),e.R7$(),e.Y8G("ngIf",n.key.startsWith("app-args::"))}}function M2(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function $2(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,M2,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function G2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",n.settingConf.value)("vars",n.nodeData.inputs)}}let Q_=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","router"),(0,f.A)(this,"desc","Execute other app"),(0,f.A)(this,"lstApp",[]),(0,f.A)(this,"selectedApp",0)}getClassType(){return r}getConfig(){return[{key:"app",value:0}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-appResult",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedApp=this.findConfig("app"),this.appService.listAppRoute().subscribe(o=>{this.ngZone.run(()=>{this.lstApp=o})})}upgradeConf(){}getAppVar(o){return o.split("::")[1]}updateConf(o,s){this.setConfig(o,s),this.noticeUpdate()}updateApp(){this.setConfig("app",this.selectedApp);let o=this.lstApp.filter(s=>s.id==this.selectedApp)[0];this.nodeData.conf=this.nodeData.conf.slice(0,1);for(let s of o.args)this.nodeData.conf.push({key:`app-args::${s}`,value:""});this.noticeUpdate()}run(o,s,l,u,p,_){let g="/runner/"+this.findConfig("app",l);p.navigate([g]),_(new Map)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-route-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,E2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,j2,3,2,"div",5),e.k0s()(),e.DNE(8,$2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,G2,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf",s.settingConf))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Ft,cn]})),r})();function D2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function O2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function V2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add query template "),e.k0s()()}}function z2(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Query Template "),e.k0s(),e.DNE(3,O2,3,5,"div",21)(4,V2,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function B2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Type "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.j41(5,"option",26),e.EFF(6,"Data"),e.k0s(),e.j41(7,"option",27),e.EFF(8,"Vector"),e.k0s()()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function P2(t,r){if(1&t&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FCK("value","",n.id,":",n.name,""),e.R7$(),e.SpI("",n.name," ")}}function L2(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())}),e.DNE(1,P2,2,4,"option",30),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function U2(t,r){1&t&&(e.j41(0,"div",32)(1,"small",33),e.EFF(2,"No Collection"),e.k0s()())}function X2(t,r){if(1&t&&(e.j41(0,"div")(1,"label",20),e.EFF(2," Select Collection "),e.k0s(),e.j41(3,"div"),e.DNE(4,L2,2,2,"select",28)(5,U2,3,0,"div",29),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function Y2(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,z2,5,2,"div",17)(2,B2,9,1,"div",18)(3,X2,6,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","type"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function H2(t,r){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function W2(t,r){if(1&t&&(e.j41(0,"div",34)(1,"div",35),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,H2,2,2,"div",36),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Z2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",38),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.vars)("varFormat",n.varFormat)("varBtnLabel","Add Condition")}}let eh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","search"),(0,f.A)(this,"desc","Search your storage data"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"vars",[]),(0,f.A)(this,"varFormat",'"@@":"<your_search_value>"\n')}getClassType(){return r}getConfig(){return[{key:"type",value:"data"},{key:"collection",value:""},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-lstData",type:"array",demo:'{"Id": "1", "CreatedDate": "yyyy-mm-dd", "Content": "json"}'}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){"vector"==this.findConfig("type")?this.appService?.listVCollection().subscribe(s=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...s)})}):this.appService?.listCollection().subscribe(s=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...s),this.loadVars()})})}loadVars(){this.vars=[],this.vars.push(...this.nodeData.inputs);let o=this.lstCollections.filter(s=>s.id+":"+s.name==this.selectedCollection)[0];if(o?.spec){let s=Ge.extractProperties(JSON.parse(o.spec),0);for(let l of s)this.vars.push({name:l.name,type:l.type,demo:""})}}updateCol(){this.setConfig("collection",this.selectedCollection),this.loadVars()}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,s,l,u,p,_){let v=this.findConfig("input",l);v=this.parseTempate(v,u);let g=this.findConfig("collection",l).split(":"),y=this.findConfig("type",l),x=new $e(o);"data"==y?x.listData({id:+g[0],name:v,type:y}).subscribe(C=>{let I=this.setupOutputValue(C,l);_(I)}):"vector"==y&&x.searchVector({collection:g[1],content:v,id:0,vector:[]}).subscribe(C=>{let I=this.setupOutputValue(C,l);_(I)})}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-search-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","varFormat","varBtnLabel","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","data"],["value","vector"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","mb-5",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mb-5"],[1,"text-muted"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars","varFormat","varBtnLabel"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,D2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Y2,4,3,"div",5),e.k0s()(),e.DNE(8,W2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Query Template "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Z2,1,4,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Ft,cn]})),r})();class th{}class q2 extends th{constructor(r){super(),(0,f.A)(this,"idxPattern",void 0),this.idxPattern=r}parse(r){let n=[],o=this.cleanText(r).split("<br>");console.log(o);let s=null;for(let p of o){let _=this.removeVietnameseTones(p);if(_=this.removeHtmlTag(_),""==_)continue;let v=!1;for(let g of this.idxPattern){let y=g.split("==>"),x=y[0],C=new RegExp(y[1].trim()),I=this.getPatLevel(x);if(new RegExp(x.trim()).test(_)){let T={title:p,childs:[],content:""};if(0==I&&(n.length>0||C.test(_)))n.push(T),s=T;else if(n.length>0){let E=n[n.length-1];for(let M=0;M<I-1;M++){if(!(E.childs.length>0)){E=null;break}E=E.childs[E.childs.length-1]}null!=E&&(E.childs.length>0||C.test(_))&&(E.childs.push(T),s=T)}v=!0;break}}s&&!v&&(s.content+=(""==s.content?"":"<br>")+p,s.hasTable||(s.hasTable=p.indexOf("<table>")>=0))}let l=[],u=new RegExp(this.idxPattern[0].split("==>")[1].trim());for(let p of n)0==p.childs.length&&0==p.content.length||(l.length>0||u.test(this.removeHtmlTag(p.title)))&&l.push(p);return l}getPatLevel(r){let n=0;for(const o of r){if("\t"!=o)break;n++}return n}cleanText(r){let n=["div"],o=r;for(let s of n)o=o.replaceAll(`<${s}>`,"").replaceAll(`</${s}>`,"");return o=o.replaceAll(/<\/table>\s*\d+[\sbr<>\d]+<end-page\/>\s*<table>/g,""),o=o.replaceAll(/\d+[\sbr<>\d]+<end-page\/>/g,'<hr class="solid"><br>'),o=o.replaceAll("</table>","</table><br>"),o=o.replaceAll("\n","").trim(),o}removeHtmlTag(r){let n=["div","b","i","u"],o=r;for(let s of n)o=o.replaceAll(`<${s}>`,"").replaceAll(`</${s}>`,"");return o.trim()}removeVietnameseTones(r){return(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()}}class J2 extends th{parse(r){return[]}}function K2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Q2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function ey(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function ty(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Q2,3,5,"div",21)(4,ey,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function ny(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Split character "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function oy(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,ty,5,2,"div",17)(2,ny,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","character"==n.key)}}function iy(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ry(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,iy,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function sy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let nh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"spliters",new Map([["character-spliter",new J2],["heading-spliter",new q2(["^[IVX]+\\.\\s*[A-Z][A-Z0-9.,\\s]*$ ==> ^I\\.","\t^\\d+\\.\\s*[A-Z].+ ==> ^1\\.","\t\t^\\d+\\.\\d+\\.\\s*[A-Z].+ ==> ^\\d+\\.1\\."])]])),(0,f.A)(this,"type","spliter"),(0,f.A)(this,"desc","Split text content into multiple parts for embedding")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"character",value:"\\n\\n"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-parts",type:"string[]",demo:'["text"]'}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,s,l,u,p,_){let v=this.findConfig("input",l);v=this.parseTempate(v,u);let g=this.findConfig("model",l),y=this.spliters.get(g);if(!y)return void _(new Map);let x=y.parse(v);_(this.setupOutputValue(x,l))}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-spliter-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,K2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,oy,3,2,"div",5),e.k0s()(),e.DNE(8,ry,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,sy,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.me,N.BC,N.vS,Ft,cn]})),r})();function ay(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function ly(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function cy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function uy(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Data Template "),e.k0s(),e.DNE(3,ly,3,5,"div",21)(4,cy,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function dy(t,r){if(1&t&&(e.j41(0,"option",28),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function py(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.DNE(5,dy,2,2,"option",26),e.k0s(),e.j41(6,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.showAddCollectionModal())}),e.nrm(7,"i",24),e.EFF(8," New folder "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function fy(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,uy,5,2,"div",17)(2,py,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function my(t,r){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function _y(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,my,2,2,"div",31),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function hy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",33),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){let n;const o=e.XpG();e.Y8G("inputStr",null!==(n=null==o.settingConf?null:o.settingConf.value)&&void 0!==n?n:o.curColSpec)("vars",o.nodeData.inputs)}}let oh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","database"),(0,f.A)(this,"displayName","SaveFile"),(0,f.A)(this,"desc","Save your data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"curColSpec","")}getClassType(){return r}getConfig(){return[{key:"collection",value:0},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("collection",this.selectedCollection);let o=this.lstCollections.filter(s=>s.id==this.selectedCollection)[0];this.curColSpec=o?.spec??""}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,s,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,ay,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,fy,3,2,"div",5),e.k0s()(),e.DNE(8,_y,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,hy,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,z.MD,z.Sq,z.bT,Ft,cn]})),r})();function gy(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function vy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function yy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function by(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Template "),e.k0s(),e.DNE(3,vy,3,5,"div",14)(4,yy,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function xy(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,by,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key)}}function Cy(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Sy(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Cy,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function ky(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,gy,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,xy,2,1,"div",8),e.k0s()(),e.DNE(8,Sy,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function wy(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Ny(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Ey(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Ny,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key))}}let ih=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","text"),(0,f.A)(this,"desc","Create text data")}getClassType(){return r}getConfig(){return[{key:"html",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-text",type:"string",demo:""}]}updateConf(o,s){this.setConfig(o,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-text-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,s){1&o&&e.DNE(0,ky,9,4,"div",0)(1,wy,1,3,"button",1)(2,Ey,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN,Or.V,cn,Ft]})),r})();function Iy(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Ay(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ty(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add audio "),e.k0s()()}}function Fy(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Audio data "),e.k0s(),e.DNE(3,Ay,3,5,"div",14)(4,Ty,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Ry(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Fy,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","audio"==n.key)}}function jy(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function My(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,jy,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function $y(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Iy,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Ry,2,1,"div",8),e.k0s()(),e.DNE(8,My,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Gy(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Dy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Oy(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Dy,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","audio"==(null==n.settingConf?null:n.settingConf.key))}}let rh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","transcription"),(0,f.A)(this,"desc","Generate transcription for audio file")}getClassType(){return r}getConfig(){return[{key:"audio",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-transcription",type:"json",demo:JSON.stringify({language:"english",duration:8.47,text:"Some long text",words:[{word:"The",start:0,end:.23}]})}]}updateConf(o,s){this.setConfig(o,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-transcription-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,s){1&o&&e.DNE(0,$y,9,4,"div",0)(1,Gy,1,3,"button",1)(2,Oy,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN,cn,Ft]})),r})();function Vy(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function zy(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("string"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function By(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Content "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,zy,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.nodeData.inputs)}}function Py(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("vector"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function Ly(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Vector "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,Py,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.nodeData.inputs)}}function Uy(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function Xy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",24),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.DNE(5,Uy,2,2,"option",25),e.k0s(),e.j41(6,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.showAddVCollectionModal())}),e.nrm(7,"i",27),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function Yy(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,By,5,2,"div",17)(2,Ly,5,2,"div",17)(3,Xy,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","content"==n.key),e.R7$(),e.Y8G("ngIf","vector"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Hy(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Wy(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Hy,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Zy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let sh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","vectorDatabase"),(0,f.A)(this,"desc","Save embedded vector to db"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[])}getClassType(){return r}getConfig(){return[{key:"content",value:""},{key:"vector",value:""},{key:"collection",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngDoCheck(){for(let o of this.nodeData.conf)"content"==o.key&&""==o.value&&(o.value=this.nodeData.inputs.filter(s=>"string"==s.type)[0]?.name??""),"vector"==o.key&&""==o.value&&(o.value=this.nodeData.inputs.filter(s=>"vector"==s.type)[0]?.name??"")}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listVCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateInputFormat(o){this.setConfig("content",o),this.noticeUpdate()}updateCol(){this.setConfig("collection",this.selectedCollection)}run(o,s,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-vector-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value","class",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Vy,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Yy,4,3,"div",5),e.k0s()(),e.DNE(8,Wy,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Zy,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,z.MD,z.Sq,z.bT,cn]})),r})();function qy(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Jy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ky(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function Qy(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Video Template "),e.k0s(),e.DNE(3,Jy,3,5,"div",14)(4,Ky,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function eb(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Qy,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","source"==n.key)}}function tb(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function nb(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,tb,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function ob(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,qy,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,eb,2,1,"div",8),e.k0s()(),e.DNE(8,nb,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function ib(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function rb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function sb(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,rb,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","source"==(null==n.settingConf?null:n.settingConf.key))}}let ah=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","videoRender"),(0,f.A)(this,"desc","Render video")}getClassType(){return r}getConfig(){return[{key:"source",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-videoUrl",type:"string",demo:""}]}updateConf(o,s){this.setConfig(o,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-video-render-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,s){1&o&&e.DNE(0,ob,9,4,"div",0)(1,ib,1,3,"button",1)(2,sb,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN,Or.V,cn,Ft]})),r})();function ab(t,r){if(1&t&&e.nrm(0,"i",11),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function lb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function cb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",19),e.EFF(3," Add Design "),e.k0s()()}}function ub(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Design "),e.k0s(),e.DNE(3,lb,3,5,"div",16)(4,cb,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function db(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function pb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",19),e.EFF(3," Add Template "),e.k0s()()}}function fb(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Save Template "),e.k0s(),e.DNE(3,db,3,5,"div",16)(4,pb,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function mb(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function _b(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",15),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(5,mb,2,2,"option",21),e.k0s(),e.j41(6,"button",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.showAddCollectionModal())}),e.nrm(7,"i",19),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function hb(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,ub,5,2,"div",12)(2,fb,5,2,"div",12)(3,_b,9,2,"div",13),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key),e.R7$(),e.Y8G("ngIf","saveTemplate"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function gb(t,r){if(1&t&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function vb(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,gb,2,2,"div",26),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function yb(t,r){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,ab,1,1,"i",6),e.k0s(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,hb,4,3,"div",9),e.k0s()(),e.DNE(8,vb,4,1,"div",10),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function bb(t,r){if(1&t&&e.nrm(0,"button",28),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function xb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.save(s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("agentName","UserHtmlViewBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Cb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",36),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateSaveTemplate(s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Sb(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32),e.DNE(4,xb,1,4,"app-input-format",33)(5,Cb,1,3,"app-input-format",34),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","saveTemplate"==(null==n.settingConf?null:n.settingConf.key))}}function kb(t,r){if(1&t&&e.nrm(0,"div",37),2&t){const n=e.XpG();e.Y8G("innerHTML",n.rendered,e.npT)}}let lh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"type","htmlViewer"),(0,f.A)(this,"desc","View output data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"html",""),(0,f.A)(this,"rendered","")}getClassType(){return r}updateOutput(){let o=this.findConfig("html"),s=this.getAllSelectablePairs(o).map(l=>l.varName);s=Ge.distinctArray(s),this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}];for(let l of s)this.nodeData.outputs.push({name:l,type:"array",demo:"[]"})}getConfig(){return[{key:"html",value:""}]}save(o){this.setConfig("html",o),this.noticeUpdate()}updateSaveTemplate(o){this.setConfig("saveTemplate",o),this.noticeUpdate()}loadCols(){this.appService?.listCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("collection",this.selectedCollection)}ngOnInit(){this.html=this.findConfig("html"),"render"==this.mode&&(this.rendered=this.compileTemplate()),this.selectedCollection=this.findConfig("collection"),this.loadCols()}getAllSelectablePairs(o){const s=/bs-select="([^=>]+)=>([^"]+)"/g,l=[];let u;for(;null!==(u=s.exec(o));){const[p,_,v]=u;l.push({attr:_,varName:v})}return l}compileTemplate(){return Ge.compileTemplate(this.html,this.vars)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-viewer-node"]],inputs:{vars:"vars"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-full"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","agentName","inputStr","vars"],[3,"onClose","onSave","html","inputStr","vars"],[3,"innerHTML"]],template:function(o,s){1&o&&e.DNE(0,yb,9,4,"div",0)(1,bb,1,3,"button",1)(2,Sb,6,4,"div",2)(3,kb,1,1,"div",3),2&o&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf","render"==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Or.V,cn,Ft]})),r})();function wb(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Nb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Url "),e.k0s(),e.j41(3,"div")(4,"input",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function Eb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Cookies (`name: value` per line) "),e.k0s(),e.j41(3,"div")(4,"textarea",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function Ib(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ab(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",26),e.EFF(3," Add new "),e.k0s()()}}function Tb(t,r){if(1&t&&(e.j41(0,"div",22)(1,"label",19),e.EFF(2," Request Body "),e.k0s(),e.DNE(3,Ib,3,5,"div",23)(4,Ab,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Fb(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Nb,5,1,"div",17)(2,Eb,5,1,"div",17)(3,Tb,5,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","cookies"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key)}}function Rb(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function jb(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Rb,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Mb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let ch=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","webAccess"),(0,f.A)(this,"desc","Get content from a websize")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"cookies",value:""},{key:"body",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}]}updateInputFormat(o){this.setConfig("body",o),this.noticeUpdate()}run(o,s,l,u,p,_){let v=this.findConfig("url",l),g=this.findConfig("cookies",l),y=this.findConfig("body",l);new $e(o).fetchUrl({url:v,key:g,args:y}).subscribe(C=>{let I=this.setupOutputValue(C.data,l);_(I)})}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-web-access-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"form-label"],["type","text",1,"form-control","text-small",3,"ngModelChange","ngModel"],["rows","3","wrap","off",1,"form-control","text-small",2,"white-space","pre",3,"ngModelChange","ngModel"],[1,"mb-2"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,wb,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Fb,4,3,"div",5),e.k0s()(),e.DNE(8,jb,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Request Body Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Mb,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","body"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.me,N.BC,N.vS,Ft,cn]})),r})();function $b(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Gb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Db(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Inputs "),e.k0s()()}}function Ob(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Inputs "),e.k0s(),e.DNE(3,Gb,3,5,"div",14)(4,Db,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Vb(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Ob,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key)}}function zb(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Bb(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,zb,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Pb(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,$b,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Vb,2,1,"div",8),e.k0s()(),e.DNE(8,Bb,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Lb(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Ub(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Xb(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Ub,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key))}}let uh=(()=>{var t;class r extends Qt{constructor(...o){super(...o),(0,f.A)(this,"type","zip"),(0,f.A)(this,"desc","Zip your files")}getClassType(){return r}getConfig(){return[{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-zipData",type:"string",demo:""}]}updateConf(o,s){this.setConfig(o,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,s){1&o&&e.DNE(0,Pb,9,4,"div",0)(1,Lb,1,3,"button",1)(2,Xb,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[z.MD,z.Sq,z.bT,N.YN,Or.V,cn,Ft]})),r})();function Yb(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Hb(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},S.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Wb(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},S.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Zb(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function qb(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const wc=({children:t,className:r,...n})=>S.createElement("button",{type:"button",className:gt(["react-flow__controls-button",r]),...n},t);wc.displayName="ControlButton";const Jb=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),dh=({style:t,showZoom:r=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:l,onZoomOut:u,onFitView:p,onInteractiveChange:_,className:v,children:g,position:y="bottom-left"})=>{const x=At(),[C,I]=(0,S.useState)(!1),{isInteractive:A,minZoomReached:T,maxZoomReached:E}=Ze(Jb,Rt),{zoomIn:M,zoomOut:O,fitView:$}=Xf();return(0,S.useEffect)(()=>{I(!0)},[]),C?S.createElement(ym,{className:gt(["react-flow__controls",v]),position:y,style:t,"data-testid":"rf__controls"},r&&S.createElement(S.Fragment,null,S.createElement(wc,{onClick:()=>{M(),l?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},S.createElement(Yb,null)),S.createElement(wc,{onClick:()=>{O(),u?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:T},S.createElement(Hb,null))),n&&S.createElement(wc,{className:"react-flow__controls-fitview",onClick:()=>{$(s),p?.()},title:"fit view","aria-label":"fit view"},S.createElement(Wb,null)),o&&S.createElement(wc,{className:"react-flow__controls-interactive",onClick:()=>{x.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),_?.(!A)},title:"toggle interactivity","aria-label":"toggle interactivity"},S.createElement(A?qb:Zb,null)),g):null};dh.displayName="Controls";var Kb=(0,S.memo)(dh),Fo=function(t){return t.Lines="lines",t.Dots="dots",t.Cross="cross",t}(Fo||{});function Qb({color:t,dimensions:r,lineWidth:n}){return S.createElement("path",{stroke:t,strokeWidth:n,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function ex({color:t,radius:r}){return S.createElement("circle",{cx:r,cy:r,r,fill:t})}const tx={[Fo.Dots]:"#91919a",[Fo.Lines]:"#eee",[Fo.Cross]:"#e2e2e2"},nx={[Fo.Dots]:1,[Fo.Lines]:1,[Fo.Cross]:6},ox=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function ph({id:t,variant:r=Fo.Dots,gap:n=20,size:o,lineWidth:s=1,offset:l=2,color:u,style:p,className:_}){const v=(0,S.useRef)(null),{transform:g,patternId:y}=Ze(ox,Rt),x=u||tx[r],C=o||nx[r],I=r===Fo.Dots,A=r===Fo.Cross,T=Array.isArray(n)?n:[n,n],E=[T[0]*g[2]||1,T[1]*g[2]||1],M=C*g[2],O=A?[M,M]:E,$=I?[M/l,M/l]:[O[0]/l,O[1]/l];return S.createElement("svg",{className:gt(["react-flow__background",_]),style:{...p,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:v,"data-testid":"rf__background"},S.createElement("pattern",{id:y+t,x:g[0]%E[0],y:g[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`},I?S.createElement(ex,{color:x,radius:M/l}):S.createElement(Qb,{dimensions:O,color:x,lineWidth:s})),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}ph.displayName="Background";var ix=(0,S.memo)(ph);const rx=({props:t})=>(t.minZoom=.25,t.maxZoom=1,t.autoPanOnConnect=!0,t.autoPanOnNodeDrag=!0,t.connectionRadius=20,t.elementsSelectable=!0,t.elevateNodesOnSelect=!0,t.fitView=!1,t.connectOnClick=!0,t.edgesFocusable=!0,t.nodesFocusable=!0,t.nodesDraggable=!0,t.nodesConnectable=!0,t.snapToGrid=!1,t.snapGrid=[15,15],t.nodeOrigin=[0,0],t.noPanClassName="nopan",t.connectionMode=$r.Strict,S.createElement(M_,{...t},S.createElement(Kb,null),S.createElement(ix,{color:"dark"==t.theme?"#383948":"#dadadf",gap:20,size:2}))),sx=({props:t})=>S.createElement(Qf,null,S.createElement(rx,{props:t}));let fh=(()=>{var t;class r extends Y_{constructor(...o){super(...o),(0,f.A)(this,"ngReactComponent",sx),(0,f.A)(this,"nodes",void 0),(0,f.A)(this,"edges",void 0),(0,f.A)(this,"defaultEdgeOptions",void 0),(0,f.A)(this,"onNodeClick",new e.bkB),(0,f.A)(this,"onNodeDoubleClick",new e.bkB),(0,f.A)(this,"onNodeMouseEnter",new e.bkB),(0,f.A)(this,"onNodeMouseMove",new e.bkB),(0,f.A)(this,"onNodeMouseLeave",new e.bkB),(0,f.A)(this,"onNodeContextMenu",new e.bkB),(0,f.A)(this,"onNodeDragStart",new e.bkB),(0,f.A)(this,"onNodeDrag",new e.bkB),(0,f.A)(this,"onNodeDragStop",new e.bkB),(0,f.A)(this,"onEdgeClick",new e.bkB),(0,f.A)(this,"onEdgeUpdate",new e.bkB),(0,f.A)(this,"onEdgeContextMenu",new e.bkB),(0,f.A)(this,"onEdgeMouseEnter",new e.bkB),(0,f.A)(this,"onEdgeMouseMove",new e.bkB),(0,f.A)(this,"onEdgeMouseLeave",new e.bkB),(0,f.A)(this,"onEdgeDoubleClick",new e.bkB),(0,f.A)(this,"onEdgeUpdateStart",new e.bkB),(0,f.A)(this,"onEdgeUpdateEnd",new e.bkB),(0,f.A)(this,"onNodesChange",new e.bkB),(0,f.A)(this,"onEdgesChange",new e.bkB),(0,f.A)(this,"onNodesDelete",new e.bkB),(0,f.A)(this,"onEdgesDelete",new e.bkB),(0,f.A)(this,"onSelectionDragStart",new e.bkB),(0,f.A)(this,"onSelectionDrag",new e.bkB),(0,f.A)(this,"onSelectionDragStop",new e.bkB),(0,f.A)(this,"onSelectionStart",new e.bkB),(0,f.A)(this,"onSelectionEnd",new e.bkB),(0,f.A)(this,"onSelectionContextMenu",new e.bkB),(0,f.A)(this,"onConnect",new e.bkB),(0,f.A)(this,"onConnectStart",new e.bkB),(0,f.A)(this,"onConnectEnd",new e.bkB),(0,f.A)(this,"onClickConnectStart",new e.bkB),(0,f.A)(this,"onClickConnectEnd",new e.bkB),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"onMove",new e.bkB),(0,f.A)(this,"onMoveStart",new e.bkB),(0,f.A)(this,"onMoveEnd",new e.bkB),(0,f.A)(this,"onSelectionChange",new e.bkB),(0,f.A)(this,"onPaneScroll",new e.bkB),(0,f.A)(this,"onPaneClick",new e.bkB),(0,f.A)(this,"onPaneContextMenu",new e.bkB),(0,f.A)(this,"onPaneMouseEnter",new e.bkB),(0,f.A)(this,"onPaneMouseMove",new e.bkB),(0,f.A)(this,"onPaneMouseLeave",new e.bkB),(0,f.A)(this,"onError",new e.bkB),(0,f.A)(this,"id",void 0),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"edgeTypes",void 0),(0,f.A)(this,"connectionLineType",void 0),(0,f.A)(this,"connectionLineStyle",void 0),(0,f.A)(this,"connectionLineComponent",void 0),(0,f.A)(this,"connectionLineContainerStyle",void 0),(0,f.A)(this,"connectionMode",void 0),(0,f.A)(this,"deleteKeyCode",void 0),(0,f.A)(this,"selectionKeyCode",void 0),(0,f.A)(this,"selectionOnDrag",void 0),(0,f.A)(this,"selectionMode",void 0),(0,f.A)(this,"panActivationKeyCode",void 0),(0,f.A)(this,"multiSelectionKeyCode",void 0),(0,f.A)(this,"zoomActivationKeyCode",void 0),(0,f.A)(this,"snapToGrid",void 0),(0,f.A)(this,"snapGrid",void 0),(0,f.A)(this,"onlyRenderVisibleElements",void 0),(0,f.A)(this,"nodesDraggable",void 0),(0,f.A)(this,"nodesConnectable",void 0),(0,f.A)(this,"nodesFocusable",void 0),(0,f.A)(this,"nodeOrigin",void 0),(0,f.A)(this,"edgesFocusable",void 0),(0,f.A)(this,"elementsSelectable",void 0),(0,f.A)(this,"selectNodesOnDrag",void 0),(0,f.A)(this,"panOnDrag",void 0),(0,f.A)(this,"minZoom",void 0),(0,f.A)(this,"maxZoom",void 0),(0,f.A)(this,"defaultViewport",void 0),(0,f.A)(this,"translateExtent",void 0),(0,f.A)(this,"preventScrolling",void 0),(0,f.A)(this,"nodeExtent",void 0),(0,f.A)(this,"defaultMarkerColor",void 0),(0,f.A)(this,"zoomOnScroll",void 0),(0,f.A)(this,"zoomOnPinch",void 0),(0,f.A)(this,"panOnScroll",void 0),(0,f.A)(this,"panOnScrollSpeed",void 0),(0,f.A)(this,"panOnScrollMode",void 0),(0,f.A)(this,"zoomOnDoubleClick",void 0),(0,f.A)(this,"edgeUpdaterRadius",void 0),(0,f.A)(this,"noDragClassName",void 0),(0,f.A)(this,"noWheelClassName",void 0),(0,f.A)(this,"noPanClassName",void 0),(0,f.A)(this,"fitView",void 0),(0,f.A)(this,"fitViewOptions",void 0),(0,f.A)(this,"connectOnClick",void 0),(0,f.A)(this,"attributionPosition",void 0),(0,f.A)(this,"proOptions",void 0),(0,f.A)(this,"elevateNodesOnSelect",void 0),(0,f.A)(this,"elevateEdgesOnSelect",void 0),(0,f.A)(this,"disableKeyboardA11y",void 0),(0,f.A)(this,"autoPanOnNodeDrag",void 0),(0,f.A)(this,"autoPanOnConnect",void 0),(0,f.A)(this,"connectionRadius",void 0)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-reactflow"]],inputs:{nodes:"nodes",edges:"edges",defaultEdgeOptions:"defaultEdgeOptions",id:"id",nodeTypes:"nodeTypes",edgeTypes:"edgeTypes",connectionLineType:"connectionLineType",connectionLineStyle:"connectionLineStyle",connectionLineComponent:"connectionLineComponent",connectionLineContainerStyle:"connectionLineContainerStyle",connectionMode:"connectionMode",deleteKeyCode:"deleteKeyCode",selectionKeyCode:"selectionKeyCode",selectionOnDrag:"selectionOnDrag",selectionMode:"selectionMode",panActivationKeyCode:"panActivationKeyCode",multiSelectionKeyCode:"multiSelectionKeyCode",zoomActivationKeyCode:"zoomActivationKeyCode",snapToGrid:"snapToGrid",snapGrid:"snapGrid",onlyRenderVisibleElements:"onlyRenderVisibleElements",nodesDraggable:"nodesDraggable",nodesConnectable:"nodesConnectable",nodesFocusable:"nodesFocusable",nodeOrigin:"nodeOrigin",edgesFocusable:"edgesFocusable",elementsSelectable:"elementsSelectable",selectNodesOnDrag:"selectNodesOnDrag",panOnDrag:"panOnDrag",minZoom:"minZoom",maxZoom:"maxZoom",defaultViewport:"defaultViewport",translateExtent:"translateExtent",preventScrolling:"preventScrolling",nodeExtent:"nodeExtent",defaultMarkerColor:"defaultMarkerColor",zoomOnScroll:"zoomOnScroll",zoomOnPinch:"zoomOnPinch",panOnScroll:"panOnScroll",panOnScrollSpeed:"panOnScrollSpeed",panOnScrollMode:"panOnScrollMode",zoomOnDoubleClick:"zoomOnDoubleClick",edgeUpdaterRadius:"edgeUpdaterRadius",noDragClassName:"noDragClassName",noWheelClassName:"noWheelClassName",noPanClassName:"noPanClassName",fitView:"fitView",fitViewOptions:"fitViewOptions",connectOnClick:"connectOnClick",attributionPosition:"attributionPosition",proOptions:"proOptions",elevateNodesOnSelect:"elevateNodesOnSelect",elevateEdgesOnSelect:"elevateEdgesOnSelect",disableKeyboardA11y:"disableKeyboardA11y",autoPanOnNodeDrag:"autoPanOnNodeDrag",autoPanOnConnect:"autoPanOnConnect",connectionRadius:"connectionRadius"},outputs:{onNodeClick:"onNodeClick",onNodeDoubleClick:"onNodeDoubleClick",onNodeMouseEnter:"onNodeMouseEnter",onNodeMouseMove:"onNodeMouseMove",onNodeMouseLeave:"onNodeMouseLeave",onNodeContextMenu:"onNodeContextMenu",onNodeDragStart:"onNodeDragStart",onNodeDrag:"onNodeDrag",onNodeDragStop:"onNodeDragStop",onEdgeClick:"onEdgeClick",onEdgeUpdate:"onEdgeUpdate",onEdgeContextMenu:"onEdgeContextMenu",onEdgeMouseEnter:"onEdgeMouseEnter",onEdgeMouseMove:"onEdgeMouseMove",onEdgeMouseLeave:"onEdgeMouseLeave",onEdgeDoubleClick:"onEdgeDoubleClick",onEdgeUpdateStart:"onEdgeUpdateStart",onEdgeUpdateEnd:"onEdgeUpdateEnd",onNodesChange:"onNodesChange",onEdgesChange:"onEdgesChange",onNodesDelete:"onNodesDelete",onEdgesDelete:"onEdgesDelete",onSelectionDragStart:"onSelectionDragStart",onSelectionDrag:"onSelectionDrag",onSelectionDragStop:"onSelectionDragStop",onSelectionStart:"onSelectionStart",onSelectionEnd:"onSelectionEnd",onSelectionContextMenu:"onSelectionContextMenu",onConnect:"onConnect",onConnectStart:"onConnectStart",onConnectEnd:"onConnectEnd",onClickConnectStart:"onClickConnectStart",onClickConnectEnd:"onClickConnectEnd",onInit:"onInit",onMove:"onMove",onMoveStart:"onMoveStart",onMoveEnd:"onMoveEnd",onSelectionChange:"onSelectionChange",onPaneScroll:"onPaneScroll",onPaneClick:"onPaneClick",onPaneContextMenu:"onPaneContextMenu",onPaneMouseEnter:"onPaneMouseEnter",onPaneMouseMove:"onPaneMouseMove",onPaneMouseLeave:"onPaneMouseLeave",onError:"onError"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(o,s){},styles:[".react-flow{direction:ltr}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1;cursor:grab}.react-flow__pane.selection{cursor:pointer}.react-flow__pane.dragging{cursor:grabbing}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow .react-flow__edges{pointer-events:none;overflow:visible}.react-flow__edge-path,.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1;fill:none}.react-flow__edge{pointer-events:visibleStroke;cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge:focus .react-flow__edge-path,.react-flow__edge:focus-visible .react-flow__edge-path{stroke:#555}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-textbg{fill:#fff}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__connectionline{z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:grab}.react-flow__node.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background:#1a192b;border:1px solid white;border-radius:100%}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:-4px;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{top:50%;left:-4px;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:#ffffff80;padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:3px;width:150px;font-size:12px;color:#222;text-align:center;border-width:1px;border-style:solid;border-color:#1a192b;background-color:#fff}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:0 1px 4px 1px #00000014}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background-color:#f0f0f040}.react-flow__nodesselection-rect,.react-flow__selection{background:#0059dc14;border:1px dotted rgba(0,89,220,.8)}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls{box-shadow:0 0 2px 1px #00000014}.react-flow__controls-button{border:none;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;display:flex;justify-content:center;align-items:center;width:16px;height:16px;cursor:pointer;-webkit-user-select:none;user-select:none;padding:5px}.react-flow__controls-button:hover{background:#f4f4f4}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__minimap{background-color:#fff}.react-flow__minimap svg{display:block}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:#3367d9;transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:#3367d9;border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}\n","ngx-reactflow .react-flow__handle{height:12px;width:12px;border-width:2px}ngx-reactflow .selected .card{border:2px solid #696cff!important}\n"],encapsulation:2})),r})();const ax=()=>["Backspace","Delete"];function lx(t,r){if(1&t){const n=e.RV6();e.j41(0,"a",38),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.addNode(s))}),e.j41(1,"div",39)(2,"span",40),e.EFF(3),e.k0s()(),e.j41(4,"div",41)(5,"h6",42),e.EFF(6),e.k0s(),e.j41(7,"small",43),e.EFF(8),e.k0s()()()}if(2&t){let n;const o=e.XpG().$implicit;e.R7$(3),e.JRh(o.type[0]),e.R7$(3),e.JRh(null!==(n=o.displayName)&&void 0!==n?n:o.type),e.R7$(2),e.JRh(o.desc)}}function cx(t,r){if(1&t&&(e.j41(0,"h6",44),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(n)}}function ux(t,r){if(1&t&&(e.j41(0,"li"),e.DNE(1,lx,9,3,"a",36)(2,cx,2,1,"h6",37),e.k0s()),2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!o.isString(n)),e.R7$(),e.Y8G("ngIf",o.isString(n))}}function dx(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",19)(2,"ngx-reactflow",20),e.bIt("onConnect",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onConnect(s))})("onEdgesDelete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesDelete(s))})("onNodesDelete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesDelete(s))})("onEdgesChange",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesChange(s))})("onNodesChange",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesChange(s))}),e.k0s()(),e.j41(3,"div",21)(4,"div",22)(5,"button",23),e.nrm(6,"span",24),e.k0s(),e.j41(7,"mat-menu",null,0)(9,"div",25)(10,"ul",26),e.DNE(11,ux,3,2,"li",27),e.k0s()()()(),e.j41(12,"button",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.save())}),e.nrm(13,"span"),e.k0s(),e.j41(14,"span",29),e.EFF(15),e.k0s()(),e.j41(16,"div",30)(17,"button",31),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.close())}),e.nrm(18,"span",32),e.k0s()(),e.j41(19,"div",33)(20,"button",34),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.run())}),e.nrm(21,"span",35),e.k0s()()()}if(2&t){const n=e.sdS(8),o=e.XpG();e.R7$(2),e.Y8G("nodes",o.nodes)("edges",o.edges)("nodeTypes",o.nodeTypes)("deleteKeyCode",e.lJ4(13,ax)),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(6),e.Y8G("ngForOf",o.avaiableNodes),e.R7$(),e.ZvI("btn btn-icon btn-",o.saved?"success":"secondary"," mt-3 ml-3"),e.R7$(),e.ZvI("tf-icons bx bx-",o.saved?"check":"save"," bx-22px"),e.R7$(2),e.JRh(null==o.curApp?null:o.curApp.name)}}let px=(()=>{var t;class r{isString(o){return"string"==typeof o}constructor(o,s,l,u,p){(0,f.A)(this,"route",void 0),(0,f.A)(this,"appRef",void 0),(0,f.A)(this,"injector",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"reactFlow",void 0),(0,f.A)(this,"nodes",[]),(0,f.A)(this,"edges",[]),(0,f.A)(this,"avaiableNodes",["Input",(new q_).getNodeSpec(),"Data Processor",(new K_).getNodeSpec(),(new Z_).getNodeSpec(),(new nh).getNodeSpec(),(new H_).getNodeSpec(),(new ch).getNodeSpec(),(new W_).getNodeSpec(),(new rh).getNodeSpec(),(new J_).getNodeSpec(),(new ih).getNodeSpec(),(new ah).getNodeSpec(),"Storage",(new oh).getNodeSpec(),(new sh).getNodeSpec(),"Data Query",(new eh).getNodeSpec(),"Output",(new lh).getNodeSpec(),(new uh).getNodeSpec(),(new Q_).getNodeSpec()]),(0,f.A)(this,"data",[]),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"saved",!1),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"showMenu",!1),(0,f.A)(this,"newCollectionName",""),(0,f.A)(this,"newCollectionSpec",""),this.route=o,this.appRef=s,this.injector=l,this.ngZone=u,this.appService=p,this.nodeTypes={form:(new q_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),embedding:(new Z_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),database:(new oh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),search:(new eh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),agent:(new K_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),htmlViewer:(new lh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),router:(new Q_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),spliter:(new nh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),vectorDatabase:(new sh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),apiInvoker:(new H_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToAudio:(new W_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),transcription:(new rh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToImage:(new J_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),text:(new ih).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),videoRender:(new ah).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),zip:(new uh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),webAccess:(new ch).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)})}}ngOnInit(){var o=this;document.addEventListener("keydown",function(){var s=(0,ge.A)(function*(l){let u=o.nodes.filter(_=>_.selected)[0],p=window.getSelection()?.toString();if(u&&!p&&l.ctrlKey&&"c"===l.key)try{yield navigator.clipboard.writeText(JSON.stringify(u.data))}catch(_){console.error("Failed to copy text: ",_)}});return function(l){return s.apply(this,arguments)}}()),document.addEventListener("paste",function(){var s=(0,ge.A)(function*(l){try{const u=yield navigator.clipboard.readText();if(!u.startsWith('{"id":"n'))return;l.preventDefault();let p=JSON.parse(u);p.x+=20,p.y+=20,p.inputs=[],p.links=[],o.addNode(p)}catch(u){console.error("Failed to read from clipboard: ",u)}});return function(l){return s.apply(this,arguments)}}()),this.route.paramMap.subscribe(s=>{this.id=+(s.get("id")??"0"),this.load()})}save(o){this.curApp.config=JSON.stringify(this.data),this.appService.save(this.curApp).subscribe(s=>{this.curApp.id=+s.data,this.saved=!0,o&&o(+s.data),setTimeout(()=>{this.saved=!1},2e3)})}onNodesChange(o){this.ngZone.run(()=>{this.nodes=Hf(o[0],this.nodes);let s=o[0][0].id,l=this.nodes.find(p=>p.id==s),u=this.data.find(p=>p.id==s);u&&(u.x=l.position.x,u.y=l.position.y)})}onEdgesChange(o){this.ngZone.run(()=>{this.edges=p_(o[0],this.edges)})}onNodesDelete(o){let s=o[0][0].id;this.data=this.data.filter(u=>u.id!=s);for(let u of this.data){let p=u.links.indexOf(s);p>=0&&u.links.splice(p,1)}let l=document.getElementById("settingModal-"+s);l&&l.parentNode?.removeChild(l)}onEdgesDelete(o){let s=o[0][0].source,l=o[0][0].target,u=this.data.filter(_=>_.id==s)[0],p=u.links.indexOf(l);p>=0&&u.links.splice(p,1),this.updateInput(this.data.filter(_=>_.id==l)[0]),this.reRender()}onConnect(o){let s=this.data.filter(l=>l.id==o[0].source)[0];s.links.push(o[0].target),this.updateInput(s),this.ngZone.run(()=>{let l=Om(o[0],this.edges);for(let u of l)u.animated=!0,u.type="bezier",u.style={strokeWidth:2,stroke:"#009688"};this.edges=l,this.reRender()})}distinctByName(o){const s=new Set;return o.filter(l=>!s.has(l.name)&&(s.add(l.name),!0))}updateInput(o){o.inputs=[];let s=this.data.filter(u=>u.links.includes(o.id));for(let u of s)o.inputs.push(...u.inputs),o.inputs.push(...u.outputs);o.inputs=this.distinctByName(o.inputs);let l=this.data.filter(u=>o.links.includes(u.id));if(l&&0!=l.length)for(let u of l)this.updateInput(u)}reRender(){let o=[...this.nodes];this.nodes=o}onNodeConfigChange(o){o&&(this.updateInput(o),this.reRender())}addNode(o){let s=0==this.data.length?1:Math.max(...this.data.map(_=>+_.id.substring(1)))+1,l=JSON.parse(JSON.stringify(o));l.id=`n${s}`,this.data.push(l),this.showMenu=!1;let u=this.nodes.filter(_=>_.selected)[0];u&&(u.selected=!1,l.x=u.position.x+20,l.y=u.position.y+20);let p=[...this.nodes];p.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,selected:!0,position:{x:l.x??150,y:l.y??150}}),this.nodes=p}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(o=>{this.curApp=o,this.data=JSON.parse(o.config),this.renderGraph()})}newApp(){this.renderGraph()}close(){window.location.href="/vi/admin/ai/dashboard"}run(o){o&&(this.curApp=o),this.save(s=>{window.location.href="/vi/admin/ai/app/"+s})}renderGraph(){const o=[],s=[];for(let l of this.data){s.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,position:{x:l.x??0,y:l.y??0}});for(let u of l.links)o.push({source:l.id,target:u,id:l.id+"_"+u,type:"bezier",animated:!0,style:{strokeWidth:2,stroke:"#009688"}})}this.edges=o,this.nodes=s}toggleMenu(){this.showMenu=!this.showMenu}setupNewCollection(){let o=this.nodes.filter(s=>s.selected)[0];if(o){let s={};for(let l of o.data.inputs){let u=l.name.split("-")[0];s[l.name.substring(u.length+1)]="json"==l.type?l.demo:l.type}this.newCollectionSpec=JSON.stringify(s,null,4)}}closeNewCollection(){this.newCollectionName="",this.newCollectionSpec=""}addCollection(){this.appService.addCollection({name:this.newCollectionName,spec:this.newCollectionSpec}).subscribe(o=>{})}addVCollection(){this.appService.addVCollection({name:this.newCollectionName}).subscribe(o=>{})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(ft.nX),e.rXU(e.o8S),e.rXU(e.zZn),e.rXU(e.SKi),e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow"]],viewQuery:function(o,s){if(1&o&&e.GBs(fh,5),2&o){let l;e.mGM(l=e.lsd())&&(s.reactFlow=l.first)}},standalone:!0,features:[e.aNF],decls:39,vars:6,consts:[["menu",""],[4,"ngIf"],["id","btnShowAddCollectionModal","data-bs-toggle","modal",1,"d-none",3,"click"],["data-bs-backdrop","static","id","AddCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","Folder Name",1,"form-control",3,"ngModelChange","ngModel"],[3,"onChange","data"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click"],["id","btnShowAddVCollectionModal","data-bs-toggle","modal",1,"d-none"],["data-bs-backdrop","static","id","AddVCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","Collection Name",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3"],[2,"width","100%","height","100vh","position","absolute"],[3,"onConnect","onEdgesDelete","onNodesDelete","onEdgesChange","onNodesChange","nodes","edges","nodeTypes","deleteKeyCode"],[2,"position","absolute","z-index","999"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-icon","btn-primary","mt-3","ml-3","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-22px"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"ml-3"],[2,"position","absolute","z-index","999","right","10px","top","15px"],["type","button",1,"btn","btn-label-secondary","p-2",3,"click"],[1,"tf-icons","bx","bx-x","bx-22px"],[2,"position","absolute","z-index","999","bottom","40px","right","40px"],["type","button",1,"btn","btn-icon","btn-success",3,"click"],[1,"tf-icons","bx","bx-play","bx-22px"],["href","javascript:void(0);","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-header text-uppercase",4,"ngIf"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"avatar","mr-3"],[1,"avatar-initial","rounded-circle","bg-label-success"],[1,"list-content"],[1,"mb-0","text-capitalize"],[1,"text-muted"],[1,"dropdown-header","text-uppercase"]],template:function(o,s){1&o&&(e.DNE(0,dx,22,14,"div",1),e.j41(1,"button",2),e.bIt("click",function(){return s.setupNewCollection()}),e.k0s(),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),e.EFF(7," Your Folders "),e.k0s()(),e.j41(8,"div",8)(9,"div",9)(10,"label",10),e.EFF(11,"Folder Name"),e.k0s(),e.j41(12,"input",11),e.mxI("ngModelChange",function(u){return e.DH7(s.newCollectionName,u)||(s.newCollectionName=u),u}),e.k0s()(),e.j41(13,"div",9)(14,"label",10),e.EFF(15,"Data Specification"),e.k0s(),e.j41(16,"app-json-editor",12),e.bIt("onChange",function(u){return s.newCollectionSpec=u}),e.k0s()(),e.j41(17,"div")(18,"button",13),e.bIt("click",function(){return s.closeNewCollection()}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",14),e.bIt("click",function(){return s.addCollection()}),e.EFF(21,"Create Folder"),e.k0s()()()()()(),e.nrm(22,"button",15),e.j41(23,"div",16)(24,"div",4)(25,"div",5)(26,"div",6)(27,"h5",7),e.EFF(28," Manage Vector Collections "),e.k0s()(),e.j41(29,"div",8)(30,"div",9)(31,"label",10),e.EFF(32,"Collection Name"),e.k0s(),e.j41(33,"input",17),e.mxI("ngModelChange",function(u){return e.DH7(s.newCollectionName,u)||(s.newCollectionName=u),u}),e.k0s()(),e.j41(34,"div")(35,"button",18),e.EFF(36,"Close"),e.k0s(),e.j41(37,"button",14),e.bIt("click",function(){return s.addVCollection()}),e.EFF(38,"Create Collection"),e.k0s()()()()()()),2&o&&(e.Y8G("ngIf",null==s.curApp?null:s.curApp.name),e.R7$(),e.BMQ("data-bs-target","#AddCollectionModal"),e.R7$(11),e.R50("ngModel",s.newCollectionName),e.R7$(4),e.Y8G("data",s.newCollectionSpec),e.R7$(6),e.BMQ("data-bs-target","#AddVCollectionModal"),e.R7$(11),e.R50("ngModel",s.newCollectionName))},dependencies:[fh,z.MD,z.Sq,z.bT,N.YN,N.me,N.BC,N.vS,k0,Z.Cn,Z.kk,Z.Cp],styles:[".avatar[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%]{background:#3dbe3d;padding:10px;color:#fff;border-radius:50%;margin-right:10px;text-transform:uppercase;display:inline-block;width:39px;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})),r})(),fx=(()=>{var t;class r extends Ae.H{}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ai-master-page"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[ft.n3],encapsulation:2})),r})();function mx(t,r){1&t&&(e.j41(0,"div",1),e.EFF(1,"Loading..."),e.k0s())}function _x(t,r){1&t&&(e.j41(0,"div",8),e.EFF(1," No data "),e.k0s())}function hx(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"textarea",11),e.mxI("ngModelChange",function(s){const l=e.eBV(n).$implicit;return e.DH7(l.content,s)||(l.content=s),e.Njj(s)}),e.k0s(),e.j41(3,"p",12)(4,"small",13),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.delData(s))}),e.EFF(5,"Delete"),e.k0s(),e.j41(6,"small",14),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.saveData(s))}),e.EFF(7,"Save"),e.k0s()()()()}if(2&t){const n=r.$implicit;e.R7$(2),e.R50("ngModel",n.content),e.R7$(2),e.Mz_("id","btn-del-",n.id,""),e.R7$(2),e.Mz_("id","btn-save-",n.id,"")}}let gx=(()=>{var t;class r{constructor(o,s){(0,f.A)(this,"route",void 0),(0,f.A)(this,"app",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"curCol",void 0),(0,f.A)(this,"searchStr",""),(0,f.A)(this,"lstContent",[]),this.route=o,this.app=s}ngOnInit(){this.route.paramMap.subscribe(o=>{let s=o.get("id")??"";s.startsWith("v-")?this.app.listVCollection().subscribe(l=>{this.curCol=l.find(u=>u.id==+s.substring(2)),this.loadData()}):this.app.listCollection().subscribe(l=>{this.curCol=l.find(u=>u.id==+s),this.loadData()})})}deleteDb(){this.curCol&&confirm("Are you sure to delete this Storage?")&&this.app.delColection(this.curCol).subscribe(o=>{document.location.href="/home"})}loadData(){this.search()}search(){this.lstContent=[],this.isLoading=!0,"data"==this.curCol?.type?this.app.listData({id:this.curCol.id,name:this.searchStr}).subscribe(o=>{this.lstContent=o,this.isLoading=!1,setTimeout(()=>{this.autoResizeTextareas()},1e3)}):this.app.searchVector({collection:this.curCol?.name,content:this.searchStr,id:0,vector:[]}).subscribe(o=>{this.lstContent=o.map(s=>({content:s})),this.isLoading=!1})}delData(o){document.getElementById("btn-del-"+o.id).innerHTML="Deleting...","data"==this.curCol?.type&&this.app.delData(o).subscribe(s=>{this.lstContent=this.lstContent.filter(l=>l.id!=o.id)})}saveData(o){document.getElementById("btn-save-"+o.id).innerHTML="Saving...","data"==this.curCol?.type&&this.app.saveData(o).subscribe(s=>{document.getElementById("btn-save-"+o.id).innerHTML="Saved OK",setTimeout(()=>{document.getElementById("btn-save-"+o.id).innerHTML="Save"},2e3)})}close(){window.location.href="/home"}autoResizeTextareas(){document.querySelectorAll("textarea").forEach(s=>{const l=()=>{s.style.height="auto",s.style.height=s.scrollHeight+"px"};s.addEventListener("input",l),l()})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(ft.nX),e.rXU($e))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-database"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"box","p-3"],[1,"mt-3"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["class","mt-3",4,"ngIf"],["class","p-3",4,"ngIf"],["class","card mt-3",4,"ngFor","ngForOf"],[1,"mt-3","text-end"],["type","button",1,"btn","btn-text-danger",3,"click"],[1,"p-3"],[1,"card","mt-3"],[1,"card-body"],[1,"form-control",2,"min-height","150px",3,"ngModelChange","ngModel"],[1,"card-text"],[1,"text-danger","cursor-pointer","mr-5",3,"click","id"],[1,"text-primary","cursor-pointer","mr-5",3,"click","id"]],template:function(o,s){1&o&&(e.j41(0,"teacher-layout")(1,"div",0)(2,"div",1)(3,"div")(4,"input",2),e.mxI("ngModelChange",function(u){return e.DH7(s.searchStr,u)||(s.searchStr=u),u}),e.bIt("keydown.enter",function(){return s.search()}),e.k0s(),e.DNE(5,mx,2,0,"div",3)(6,_x,2,0,"div",4)(7,hx,8,5,"div",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return s.deleteDb()}),e.EFF(10),e.k0s()()()()),2&o&&(e.R7$(4),e.R50("ngModel",s.searchStr),e.R7$(),e.Y8G("ngIf",s.isLoading),e.R7$(),e.Y8G("ngIf",0==s.lstContent.length),e.R7$(),e.Y8G("ngForOf",s.lstContent),e.R7$(3),e.SpI(" Delete ",null==s.curCol?null:s.curCol.name," Storage "))},dependencies:[z.MD,z.Sq,z.bT,N.YN,N.me,N.BC,N.vS,Oe.b,Do]})),r})();function vx(t,r){if(1&t&&e.nrm(0,"app-app-view",2),2&t){const n=e.XpG();e.Y8G("appId",n.id)("queryParamsObject",n.queryParamsObject)}}let mh=(()=>{var t;class r{constructor(o){(0,f.A)(this,"route",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"queryParamsObject",{}),this.route=o}ngOnInit(){this.route.paramMap.subscribe(o=>{this.id=+(o.get("id")??"0"),this.route.queryParams.subscribe(s=>{this.queryParamsObject={...s},console.log("Mapped Query Params:",this.queryParamsObject)})})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(ft.nX))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow-runner"]],standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"box","p-0","mt-5","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","w-md-50","mx-auto"],[3,"appId","queryParamsObject",4,"ngIf"],[3,"appId","queryParamsObject"]],template:function(o,s){1&o&&(e.j41(0,"teacher-layout")(1,"div",0),e.DNE(2,vx,1,2,"app-app-view",1),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngIf",s.id))},dependencies:[z.MD,z.bT,N.YN,Oe.b,Do,Me.Q,Ei]})),r})();const yx=[{path:"",component:fx,children:[{path:"",component:Ja},{path:"demo",component:bu,canActivate:[mt]},{path:"dashboard",component:Ja},{path:"edu-store-teacher",component:yn},{path:"app/:id",component:mh,canActivate:[mt]},{path:"db/:id",component:gx,canActivate:[mt]},{path:"flow/:id",component:px,canActivate:[mt]}]}];let bx=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275mod",e.$C({type:t})),(0,f.A)(r,"\u0275inj",e.G2t({imports:[ft.iI.forChild(yx),ft.iI,Be.XE]})),r})(),xx=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275mod",e.$C({type:t})),(0,f.A)(r,"\u0275inj",e.G2t({imports:[ft.iI,z.MD,N.YN,tt.s,N.X1,bx,Me.Q,Oe.b,dn.L,ot.Id,Nt.flO.pick(Nt.Ptg),Wt.An,mh,Ei]})),r})()},7578:(en,oe,se)=>{var f=se(1395),z=se(1605);function N(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ft=new Set,Nt={};function Wt(i,a){ot(i,a),ot(i+"Capture",a)}function ot(i,a){for(Nt[i]=a,i=0;i<a.length;i++)ft.add(a[i])}var tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dn=Object.prototype.hasOwnProperty,Oe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Me={},Be={};function ge(i,a,c,d,m,h,b){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=h,this.removeEmptyString=b}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Ae[i]=new ge(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];Ae[a]=new ge(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){Ae[i]=new ge(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Ae[i]=new ge(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Ae[i]=new ge(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){Ae[i]=new ge(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){Ae[i]=new ge(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){Ae[i]=new ge(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){Ae[i]=new ge(i,5,!1,i.toLowerCase(),null,!1,!1)});var Zt=/[\-:]([a-z])/g;function St(i){return i[1].toUpperCase()}function Gt(i,a,c,d){var m=Ae.hasOwnProperty(a)?Ae[a]:null;(null!==m?0!==m.type:d||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(function mt(i,a,c,d){if(null===a||typeof a>"u"||function He(i,a,c,d){if(null!==c&&0===c.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(i=i.toLowerCase().slice(0,5))&&"aria-"!==i);default:return!1}}(i,a,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}(a,c,m,d)&&(c=null),d||null===m?function e(i){return!!dn.call(Be,i)||!dn.call(Me,i)&&(Oe.test(i)?Be[i]=!0:(Me[i]=!0,!1))}(a)&&(null===c?i.removeAttribute(a):i.setAttribute(a,""+c)):m.mustUseProperty?i[m.propertyName]=null===c?3!==m.type&&"":c:(a=m.attributeName,d=m.attributeNamespace,null===c?i.removeAttribute(a):(c=3===(m=m.type)||4===m&&!0===c?"":""+c,d?i.setAttributeNS(d,a,c):i.setAttribute(a,c))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(Zt,St);Ae[a]=new ge(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(Zt,St);Ae[a]=new ge(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(Zt,St);Ae[a]=new ge(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){Ae[i]=new ge(i,1,!1,i.toLowerCase(),null,!1,!1)}),Ae.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){Ae[i]=new ge(i,1,!1,i.toLowerCase(),null,!0,!0)});var Pe=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dt=Symbol.for("react.element"),$e=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),Dn=Symbol.for("react.strict_mode"),_n=Symbol.for("react.profiler"),hn=Symbol.for("react.provider"),gn=Symbol.for("react.context"),vn=Symbol.for("react.forward_ref"),tn=Symbol.for("react.suspense"),nn=Symbol.for("react.suspense_list"),Jn=Symbol.for("react.memo"),ee=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ke=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Ie=Symbol.iterator;function Ve(i){return null===i||"object"!=typeof i?null:"function"==typeof(i=Ie&&i[Ie]||i["@@iterator"])?i:null}var Z,j=Object.assign;function we(i){if(void 0===Z)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||""}return"\n"+Z+i}var Ee=!1;function Fe(i,a){if(!i||Ee)return"";Ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(V){var d=V}Reflect.construct(i,[],a)}else{try{a.call()}catch(V){d=V}i.call(a.prototype)}else{try{throw Error()}catch(V){d=V}i()}}catch(V){if(V&&d&&"string"==typeof V.stack){for(var m=V.stack.split("\n"),h=d.stack.split("\n"),b=m.length-1,k=h.length-1;1<=b&&0<=k&&m[b]!==h[k];)k--;for(;1<=b&&0<=k;b--,k--)if(m[b]!==h[k]){if(1!==b||1!==k)do{if(b--,0>--k||m[b]!==h[k]){var F="\n"+m[b].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}}while(1<=b&&0<=k);break}}}finally{Ee=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?we(i):""}function Xe(i){switch(i.tag){case 5:return we(i.type);case 16:return we("Lazy");case 13:return we("Suspense");case 19:return we("SuspenseList");case 0:case 2:case 15:return Fe(i.type,!1);case 11:return Fe(i.type.render,!1);case 1:return Fe(i.type,!0);default:return""}}function it(i){if(null==i)return null;if("function"==typeof i)return i.displayName||i.name||null;if("string"==typeof i)return i;switch(i){case ct:return"Fragment";case $e:return"Portal";case _n:return"Profiler";case Dn:return"StrictMode";case tn:return"Suspense";case nn:return"SuspenseList"}if("object"==typeof i)switch(i.$$typeof){case gn:return(i.displayName||"Context")+".Consumer";case hn:return(i._context.displayName||"Context")+".Provider";case vn:var a=i.render;return(i=i.displayName)||(i=""!==(i=a.displayName||a.name||"")?"ForwardRef("+i+")":"ForwardRef"),i;case Jn:return null!==(a=i.displayName||null)?a:it(i.type)||"Memo";case ee:a=i._payload,i=i._init;try{return it(i(a))}catch{}}return null}function ut(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=(i=a.render).displayName||i.name||"",a.displayName||(""!==i?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return it(a);case 8:return a===Dn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function ze(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":case"object":return i;default:return""}}function on(i){var a=i.type;return(i=i.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===a||"radio"===a)}function Wr(i){i._valueTracker||(i._valueTracker=function rp(i){var a=on(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),d=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&"function"==typeof c.get&&"function"==typeof c.set){var m=c.get,h=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){d=""+b,h.call(this,b)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}(i))}function Ac(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return i&&(d=on(i)?i.checked?"true":"false":i.value),(i=d)!==c&&(a.setValue(i),!0)}function Zr(i){if(typeof(i=i||(typeof document<"u"?document:void 0))>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ja(i,a){return j({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a.checked??i._wrapperState.initialChecked})}function Tc(i,a){var c=null==a.defaultValue?"":a.defaultValue,d=null!=a.checked?a.checked:a.defaultChecked;c=ze(null!=a.value?a.value:c),i._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function Fc(i,a){null!=(a=a.checked)&&Gt(i,"checked",a,!1)}function Ma(i,a){Fc(i,a);var c=ze(a.value),d=a.type;if(null!=c)"number"===d?(0===c&&""===i.value||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if("submit"===d||"reset"===d)return void i.removeAttribute("value");a.hasOwnProperty("value")?$a(i,a.type,c):a.hasOwnProperty("defaultValue")&&$a(i,a.type,ze(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(i.defaultChecked=!!a.defaultChecked)}function Rc(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var d=a.type;if(("submit"===d||"reset"===d)&&null==a.value)return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}""!==(c=i.name)&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,""!==c&&(i.name=c)}function $a(i,a,c){("number"!==a||Zr(i.ownerDocument)!==i)&&(null==c?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var Yi=Array.isArray;function $o(i,a,c,d){if(i=i.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=a.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&d&&(i[c].defaultSelected=!0)}else{for(c=""+ze(c),a=null,m=0;m<i.length;m++){if(i[m].value===c)return i[m].selected=!0,void(d&&(i[m].defaultSelected=!0));null!==a||i[m].disabled||(a=i[m])}null!==a&&(a.selected=!0)}}function Tt(i,a){if(null!=a.dangerouslySetInnerHTML)throw Error(N(91));return j({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function jc(i,a){var c=a.value;if(null==c){if(c=a.children,a=a.defaultValue,null!=c){if(null!=a)throw Error(N(92));if(Yi(c)){if(1<c.length)throw Error(N(93));c=c[0]}a=c}null==a&&(a=""),c=a}i._wrapperState={initialValue:ze(c)}}function Mc(i,a){var c=ze(a.value),d=ze(a.defaultValue);null!=c&&((c=""+c)!==i.value&&(i.value=c),null==a.defaultValue&&i.defaultValue!==c&&(i.defaultValue=c)),null!=d&&(i.defaultValue=""+d)}function On(i){var a=i.textContent;a===i._wrapperState.initialValue&&""!==a&&null!==a&&(i.value=a)}function $c(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(i,a){return null==i||"http://www.w3.org/1999/xhtml"===i?$c(a):"http://www.w3.org/2000/svg"===i&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":i}var qr,i,Gc=(i=function(i,a){if("http://www.w3.org/2000/svg"!==i.namespaceURI||"innerHTML"in i)i.innerHTML=a;else{for((qr=qr||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=qr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,d,m){MSApp.execUnsafeLocalFunction(function(){return i(a,c)})}:i);function Hi(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&3===c.nodeType)return void(c.nodeValue=a)}i.textContent=a}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sp=["Webkit","ms","Moz","O"];function Dc(i,a,c){return null==a||"boolean"==typeof a||""===a?"":c||"number"!=typeof a||0===a||Wi.hasOwnProperty(i)&&Wi[i]?(""+a).trim():a+"px"}function Oc(i,a){for(var c in i=i.style,a)if(a.hasOwnProperty(c)){var d=0===c.indexOf("--"),m=Dc(c,a[c],d);"float"===c&&(c="cssFloat"),d?i.setProperty(c,m):i[c]=m}}Object.keys(Wi).forEach(function(i){sp.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Wi[a]=Wi[i]})});var ap=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Da(i,a){if(a){if(ap[i]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(N(137,i));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(N(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(N(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(N(62))}}function Oa(i,a){if(-1===i.indexOf("-"))return"string"==typeof a.is;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Va=null;function za(i){return(i=i.target||i.srcElement||window).correspondingUseElement&&(i=i.correspondingUseElement),3===i.nodeType?i.parentNode:i}var Ba=null,fi=null,mi=null;function Vc(i){if(i=fr(i)){if("function"!=typeof Ba)throw Error(N(280));var a=i.stateNode;a&&(a=Ts(a),Ba(i.stateNode,i.type,a))}}function zc(i){fi?mi?mi.push(i):mi=[i]:fi=i}function Bc(){if(fi){var i=fi,a=mi;if(mi=fi=null,Vc(i),a)for(i=0;i<a.length;i++)Vc(a[i])}}function Pc(i,a){return i(a)}function Pa(){}var La=!1;function Lc(i,a,c){if(La)return i(a,c);La=!0;try{return Pc(i,a,c)}finally{La=!1,(null!==fi||null!==mi)&&(Pa(),Bc())}}function Zi(i,a){var c=i.stateNode;if(null===c)return null;var d=Ts(c);if(null===d)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(d=!("button"===(i=i.type)||"input"===i||"select"===i||"textarea"===i)),i=!d;break e;default:i=!1}if(i)return null;if(c&&"function"!=typeof c)throw Error(N(231,a,typeof c));return c}var Ua=!1;if(tt)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Ua=!1}function lp(i,a,c,d,m,h,b,k,F){var V=Array.prototype.slice.call(arguments,3);try{a.apply(c,V)}catch(q){this.onError(q)}}var Ji=!1,Jr=null,Kr=!1,Xa=null,cp={onError:function(i){Ji=!0,Jr=i}};function up(i,a,c,d,m,h,b,k,F){Ji=!1,Jr=null,lp.apply(cp,arguments)}function Go(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do{4098&(a=i).flags&&(c=a.return),i=a.return}while(i)}return 3===a.tag?c:null}function Uc(i){if(13===i.tag){var a=i.memoizedState;if(null===a&&null!==(i=i.alternate)&&(a=i.memoizedState),null!==a)return a.dehydrated}return null}function Xc(i){if(Go(i)!==i)throw Error(N(188))}function Yc(i){return null!==(i=function pp(i){var a=i.alternate;if(!a){if(null===(a=Go(i)))throw Error(N(188));return a!==i?null:i}for(var c=i,d=a;;){var m=c.return;if(null===m)break;var h=m.alternate;if(null===h){if(null!==(d=m.return)){c=d;continue}break}if(m.child===h.child){for(h=m.child;h;){if(h===c)return Xc(m),i;if(h===d)return Xc(m),a;h=h.sibling}throw Error(N(188))}if(c.return!==d.return)c=m,d=h;else{for(var b=!1,k=m.child;k;){if(k===c){b=!0,c=m,d=h;break}if(k===d){b=!0,d=m,c=h;break}k=k.sibling}if(!b){for(k=h.child;k;){if(k===c){b=!0,c=h,d=m;break}if(k===d){b=!0,d=h,c=m;break}k=k.sibling}if(!b)throw Error(N(189))}}if(c.alternate!==d)throw Error(N(190))}if(3!==c.tag)throw Error(N(188));return c.stateNode.current===c?i:a}(i))?Hc(i):null}function Hc(i){if(5===i.tag||6===i.tag)return i;for(i=i.child;null!==i;){var a=Hc(i);if(null!==a)return a;i=i.sibling}return null}var Wc=z.unstable_scheduleCallback,Zc=z.unstable_cancelCallback,fp=z.unstable_shouldYield,mp=z.unstable_requestPaint,_t=z.unstable_now,_p=z.unstable_getCurrentPriorityLevel,Ya=z.unstable_ImmediatePriority,qc=z.unstable_UserBlockingPriority,Qr=z.unstable_NormalPriority,hp=z.unstable_LowPriority,Jc=z.unstable_IdlePriority,es=null,Vn=null,Nn=Math.clz32?Math.clz32:function bp(i){return 0===(i>>>=0)?32:31-(vp(i)/yp|0)|0},vp=Math.log,yp=Math.LN2,ts=64,ns=4194304;function Ki(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&i;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&i;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function os(i,a){var c=i.pendingLanes;if(0===c)return 0;var d=0,m=i.suspendedLanes,h=i.pingedLanes,b=268435455&c;if(0!==b){var k=b&~m;0!==k?d=Ki(k):0!=(h&=b)&&(d=Ki(h))}else 0!=(b=c&~m)?d=Ki(b):0!==h&&(d=Ki(h));if(0===d)return 0;if(0!==a&&a!==d&&!(a&m)&&((m=d&-d)>=(h=a&-a)||16===m&&4194240&h))return a;if(4&d&&(d|=16&c),0!==(a=i.entangledLanes))for(i=i.entanglements,a&=d;0<a;)d|=i[c=31-Nn(a)],a&=~(m=1<<c);return d}function xp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function Ha(i){return 0!=(i=-1073741825&i.pendingLanes)?i:1073741824&i?1073741824:0}function Kc(){var i=ts;return!(4194240&(ts<<=1))&&(ts=64),i}function Wa(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Qi(i,a,c){i.pendingLanes|=a,536870912!==a&&(i.suspendedLanes=0,i.pingedLanes=0),(i=i.eventTimes)[a=31-Nn(a)]=c}function is(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var d=31-Nn(c),m=1<<d;m&a|i[d]&a&&(i[d]|=a),c&=~m}}var Le=0;function Qc(i){return 1<(i&=-i)?4<i?268435455&i?16:536870912:4:1}var eu,Za,tu,nu,ou,qa=!1,Do=[],lo=null,co=null,uo=null,er=new Map,tr=new Map,po=[],Sp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(i,a){switch(i){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":er.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(a.pointerId)}}function Oo(i,a,c,d,m,h){return null===i||i.nativeEvent!==h?(i={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:h,targetContainers:[m]},null!==a&&null!==(a=fr(a))&&Za(a),i):(i.eventSystemFlags|=d,a=i.targetContainers,null!==m&&-1===a.indexOf(m)&&a.push(m),i)}function Qa(i){var a=Yo(i.target);if(null!==a){var c=Go(a);if(null!==c)if(13===(a=c.tag)){if(null!==(a=Uc(c)))return i.blockedOn=a,void ou(i.priority,function(){tu(c)})}else if(3===a&&c.stateNode.current.memoizedState.isDehydrated)return void(i.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}i.blockedOn=null}function Vo(i){if(null!==i.blockedOn)return!1;for(var a=i.targetContainers;0<a.length;){var c=iu(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(null!==c)return null!==(a=fr(c))&&Za(a),i.blockedOn=c,!1;var d=new(c=i.nativeEvent).constructor(c.type,c);Va=d,c.target.dispatchEvent(d),Va=null,a.shift()}return!0}function nr(i,a,c){Vo(i)&&c.delete(a)}function kp(){qa=!1,null!==lo&&Vo(lo)&&(lo=null),null!==co&&Vo(co)&&(co=null),null!==uo&&Vo(uo)&&(uo=null),er.forEach(nr),tr.forEach(nr)}function _i(i,a){i.blockedOn===a&&(i.blockedOn=null,qa||(qa=!0,z.unstable_scheduleCallback(z.unstable_NormalPriority,kp)))}function zo(i){function a(m){return _i(m,i)}if(0<Do.length){_i(Do[0],i);for(var c=1;c<Do.length;c++){var d=Do[c];d.blockedOn===i&&(d.blockedOn=null)}}for(null!==lo&&_i(lo,i),null!==co&&_i(co,i),null!==uo&&_i(uo,i),er.forEach(a),tr.forEach(a),c=0;c<po.length;c++)(d=po[c]).blockedOn===i&&(d.blockedOn=null);for(;0<po.length&&null===(c=po[0]).blockedOn;)Qa(c),null===c.blockedOn&&po.shift()}var or=Pe.ReactCurrentBatchConfig,rs=!0;function wp(i,a,c,d){var m=Le,h=or.transition;or.transition=null;try{Le=1,el(i,a,c,d)}finally{Le=m,or.transition=h}}function cm(i,a,c,d){var m=Le,h=or.transition;or.transition=null;try{Le=4,el(i,a,c,d)}finally{Le=m,or.transition=h}}function el(i,a,c,d){if(rs){var m=iu(i,a,c,d);if(null===m)Es(i,a,d,tl,c),Ja(i,d);else if(function Ka(i,a,c,d,m){switch(a){case"focusin":return lo=Oo(lo,i,a,c,d,m),!0;case"dragenter":return co=Oo(co,i,a,c,d,m),!0;case"mouseover":return uo=Oo(uo,i,a,c,d,m),!0;case"pointerover":var h=m.pointerId;return er.set(h,Oo(er.get(h)||null,i,a,c,d,m)),!0;case"gotpointercapture":return tr.set(h=m.pointerId,Oo(tr.get(h)||null,i,a,c,d,m)),!0}return!1}(m,i,a,c,d))d.stopPropagation();else if(Ja(i,d),4&a&&-1<Sp.indexOf(i)){for(;null!==m;){var h=fr(m);if(null!==h&&eu(h),null===(h=iu(i,a,c,d))&&Es(i,a,d,tl,c),h===m)break;m=h}null!==m&&d.stopPropagation()}else Es(i,a,d,null,c)}}var tl=null;function iu(i,a,c,d){if(tl=null,null!==(i=Yo(i=za(d))))if(null===(a=Go(i)))i=null;else if(13===(c=a.tag)){if(null!==(i=Uc(a)))return i;i=null}else if(3===c){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return tl=i,null}function Np(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_p()){case Ya:return 1;case qc:return 4;case Qr:case hp:return 16;case Jc:return 536870912;default:return 16}default:return 16}}var Bo=null,ss=null,Po=null;function ru(){if(Po)return Po;var i,d,a=ss,c=a.length,m="value"in Bo?Bo.value:Bo.textContent,h=m.length;for(i=0;i<c&&a[i]===m[i];i++);var b=c-i;for(d=1;d<=b&&a[c-d]===m[h-d];d++);return Po=m.slice(i,1<d?1-d:void 0)}function as(i){var a=i.keyCode;return"charCode"in i?0===(i=i.charCode)&&13===a&&(i=13):i=a,10===i&&(i=13),32<=i||13===i?i:0}function ls(){return!0}function su(){return!1}function qt(i){function a(c,d,m,h,b){for(var k in this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=h,this.target=b,this.currentTarget=null,i)i.hasOwnProperty(k)&&(this[k]=(c=i[k])?c(h):h[k]);return this.isDefaultPrevented=(null!=h.defaultPrevented?h.defaultPrevented:!1===h.returnValue)?ls:su,this.isPropagationStopped=su,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():"unknown"!=typeof c.returnValue&&(c.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():"unknown"!=typeof c.cancelBubble&&(c.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),a}var us,nl,sr,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=qt(ir),rr=j({},ir,{view:0,detail:0}),Ep=qt(rr),ds=j({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hi,button:0,buttons:0,relatedTarget:function(i){return void 0===i.relatedTarget?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==sr&&(sr&&"mousemove"===i.type?(us=i.screenX-sr.screenX,nl=i.screenY-sr.screenY):nl=us=0,sr=i),us)},movementY:function(i){return"movementY"in i?i.movementY:nl}}),au=qt(ds),um=qt(j({},ds,{dataTransfer:0})),lu=qt(j({},rr,{relatedTarget:0})),Lo=qt(j({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),ar=j({},ir,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ap=qt(ar),cu=qt(j({},ir,{data:0})),Fp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ps={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fs(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):!!(i=ps[i])&&!!a[i]}function hi(){return fs}var ms=j({},rr,{key:function(i){if(i.key){var a=Fp[i.key]||i.key;if("Unidentified"!==a)return a}return"keypress"===i.type?13===(i=as(i))?"Enter":String.fromCharCode(i):"keydown"===i.type||"keyup"===i.type?uu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hi,charCode:function(i){return"keypress"===i.type?as(i):0},keyCode:function(i){return"keydown"===i.type||"keyup"===i.type?i.keyCode:0},which:function(i){return"keypress"===i.type?as(i):"keydown"===i.type||"keyup"===i.type?i.keyCode:0}}),ol=qt(ms),du=qt(j({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mp=qt(j({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hi})),fm=qt(j({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),pu=j({},ds,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_s=qt(pu),Gp=[9,13,27,32],il=tt&&"CompositionEvent"in window,ht=null;tt&&"documentMode"in document&&(ht=document.documentMode);var fu=tt&&"TextEvent"in window&&!ht,Dp=tt&&(!il||ht&&8<ht&&11>=ht),Op=" ",mu=!1;function _u(i,a){switch(i){case"keyup":return-1!==Gp.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hu(i){return"object"==typeof(i=i.detail)&&"data"in i?i.data:null}var Uo=!1,Bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gu(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return"input"===a?!!Bp[i.type]:"textarea"===a}function vu(i,a,c,d){zc(d),0<(a=Xo(a,"onChange")).length&&(c=new cs("onChange","change",null,c,d),i.push({event:c,listeners:a}))}var lr=null,cr=null;function Pp(i){Ru(i,0)}function hs(i){if(Ac(Ci(i)))return i}function Lp(i,a){if("change"===i)return a}var yu=!1;if(tt){var gs;if(tt){var vs="oninput"in document;if(!vs){var bu=document.createElement("div");bu.setAttribute("oninput","return;"),vs="function"==typeof bu.oninput}gs=vs}else gs=!1;yu=gs&&(!document.documentMode||9<document.documentMode)}function rl(){lr&&(lr.detachEvent("onpropertychange",ys),cr=lr=null)}function ys(i){if("value"===i.propertyName&&hs(cr)){var a=[];vu(a,cr,i,za(i)),Lc(Pp,a)}}function mm(i,a,c){"focusin"===i?(rl(),cr=c,(lr=a).attachEvent("onpropertychange",ys)):"focusout"===i&&rl()}function Ft(i){if("selectionchange"===i||"keyup"===i||"keydown"===i)return hs(cr)}function _m(i,a){if("click"===i)return hs(a)}function hm(i,a){if("input"===i||"change"===i)return hs(a)}var Ge="function"==typeof Object.is?Object.is:function Up(i,a){return i===a&&(0!==i||1/i==1/a)||i!=i&&a!=a};function En(i,a){if(Ge(i,a))return!0;if("object"!=typeof i||null===i||"object"!=typeof a||null===a)return!1;var c=Object.keys(i),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!dn.call(a,m)||!Ge(i[m],a[m]))return!1}return!0}function xu(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bs(i,a){var d,c=xu(i);for(i=0;c;){if(3===c.nodeType){if(d=i+c.textContent.length,i<=a&&d>=a)return{node:c,offset:a-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=xu(c)}}function sl(i,a){return!(!i||!a)&&(i===a||(!i||3!==i.nodeType)&&(a&&3===a.nodeType?sl(i,a.parentNode):"contains"in i?i.contains(a):!!i.compareDocumentPosition&&!!(16&i.compareDocumentPosition(a))))}function xs(){for(var i=window,a=Zr();a instanceof i.HTMLIFrameElement;){try{var c="string"==typeof a.contentWindow.location.href}catch{c=!1}if(!c)break;a=Zr((i=a.contentWindow).document)}return a}function al(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&("input"===a&&("text"===i.type||"search"===i.type||"tel"===i.type||"url"===i.type||"password"===i.type)||"textarea"===a||"true"===i.contentEditable)}function Xp(i){var a=xs(),c=i.focusedElem,d=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&sl(c.ownerDocument.documentElement,c)){if(null!==d&&al(c))if(a=d.start,void 0===(i=d.end)&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if((i=(a=c.ownerDocument||document)&&a.defaultView||window).getSelection){i=i.getSelection();var m=c.textContent.length,h=Math.min(d.start,m);d=void 0===d.end?h:Math.min(d.end,m),!i.extend&&h>d&&(m=d,d=h,h=m),m=bs(c,h);var b=bs(c,d);m&&b&&(1!==i.rangeCount||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&((a=a.createRange()).setStart(m.node,m.offset),i.removeAllRanges(),h>d?(i.addRange(a),i.extend(b.node,b.offset)):(a.setEnd(b.node,b.offset),i.addRange(a)))}for(a=[],i=c;i=i.parentNode;)1===i.nodeType&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for("function"==typeof c.focus&&c.focus(),c=0;c<a.length;c++)(i=a[c]).element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Cu=tt&&"documentMode"in document&&11>=document.documentMode,gi=null,Cs=null,vi=null,Ss=!1;function Su(i,a,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Ss||null==gi||gi!==Zr(d)||(d="selectionStart"in(d=gi)&&al(d)?{start:d.selectionStart,end:d.selectionEnd}:{anchorNode:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset},vi&&En(vi,d)||(vi=d,0<(d=Xo(Cs,"onSelect")).length&&(a=new cs("onSelect","select",null,a,c),i.push({event:a,listeners:d}),a.target=gi)))}function ks(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var yi={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionend:ks("Transition","TransitionEnd")},ll={},ku={};function ws(i){if(ll[i])return ll[i];if(!yi[i])return i;var c,a=yi[i];for(c in a)if(a.hasOwnProperty(c)&&c in ku)return ll[i]=a[c];return i}tt&&(ku=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);var wu=ws("animationend"),Nu=ws("animationiteration"),Eu=ws("animationstart"),Iu=ws("transitionend"),Au=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fo(i,a){Au.set(i,a),Wt(a,[i])}for(var cl=0;cl<Tu.length;cl++){var ul=Tu[cl];fo(ul.toLowerCase(),"on"+(ul[0].toUpperCase()+ul.slice(1)))}fo(wu,"onAnimationEnd"),fo(Nu,"onAnimationIteration"),fo(Eu,"onAnimationStart"),fo("dblclick","onDoubleClick"),fo("focusin","onFocus"),fo("focusout","onBlur"),fo(Iu,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),Wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ur));function Fu(i,a,c){var d=i.type||"unknown-event";i.currentTarget=c,function dp(i,a,c,d,m,h,b,k,F){if(up.apply(this,arguments),Ji){if(!Ji)throw Error(N(198));var V=Jr;Ji=!1,Jr=null,Kr||(Kr=!0,Xa=V)}}(d,a,void 0,i),i.currentTarget=null}function Ru(i,a){a=!!(4&a);for(var c=0;c<i.length;c++){var d=i[c],m=d.event;d=d.listeners;e:{var h=void 0;if(a)for(var b=d.length-1;0<=b;b--){var k=d[b],F=k.instance,V=k.currentTarget;if(k=k.listener,F!==h&&m.isPropagationStopped())break e;Fu(m,k,V),h=F}else for(b=0;b<d.length;b++){if(F=(k=d[b]).instance,V=k.currentTarget,k=k.listener,F!==h&&m.isPropagationStopped())break e;Fu(m,k,V),h=F}}}if(Kr)throw i=Xa,Kr=!1,Xa=null,i}function qe(i,a){var c=a[gl];void 0===c&&(c=a[gl]=new Set);var d=i+"__bubble";c.has(d)||(ju(a,i,2,!1),c.add(d))}function dl(i,a,c){var d=0;a&&(d|=4),ju(c,i,d,a)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function dr(i){if(!i[Ns]){i[Ns]=!0,ft.forEach(function(c){"selectionchange"!==c&&(Wp.has(c)||dl(c,!1,i),dl(c,!0,i))});var a=9===i.nodeType?i:i.ownerDocument;null===a||a[Ns]||(a[Ns]=!0,dl("selectionchange",!1,a))}}function ju(i,a,c,d){switch(Np(a)){case 1:var m=wp;break;case 4:m=cm;break;default:m=el}c=m.bind(null,a,c,i),m=void 0,!Ua||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(m=!0),i.addEventListener(a,c,d?void 0===m||{capture:!0,passive:m}:void 0!==m&&{passive:m})}function Es(i,a,c,d,m){var h=d;if(!(1&a||2&a||null===d))e:for(;;){if(null===d)return;var b=d.tag;if(3===b||4===b){var k=d.stateNode.containerInfo;if(k===m||8===k.nodeType&&k.parentNode===m)break;if(4===b)for(b=d.return;null!==b;){var F=b.tag;if((3===F||4===F)&&((F=b.stateNode.containerInfo)===m||8===F.nodeType&&F.parentNode===m))return;b=b.return}for(;null!==k;){if(null===(b=Yo(k)))return;if(5===(F=b.tag)||6===F){d=h=b;continue e}k=k.parentNode}}d=d.return}Lc(function(){var V=h,q=za(c),K=[];e:{var W=Au.get(i);if(void 0!==W){var pe=cs,_e=i;switch(i){case"keypress":if(0===as(c))break e;case"keydown":case"keyup":pe=ol;break;case"focusin":_e="focus",pe=lu;break;case"focusout":_e="blur",pe=lu;break;case"beforeblur":case"afterblur":pe=lu;break;case"click":if(2===c.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Mp;break;case wu:case Nu:case Eu:pe=Lo;break;case Iu:pe=fm;break;case"scroll":pe=Ep;break;case"wheel":pe=_s;break;case"copy":case"cut":case"paste":pe=Ap;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=du}var fe=!!(4&a),bt=!fe&&"scroll"===i,G=fe?null!==W?W+"Capture":null:W;fe=[];for(var D,R=V;null!==R;){var ne=(D=R).stateNode;if(5===D.tag&&null!==ne&&(D=ne,null!==G&&null!=(ne=Zi(R,G))&&fe.push(pr(R,ne,D))),bt)break;R=R.return}0<fe.length&&(W=new pe(W,_e,null,c,q),K.push({event:W,listeners:fe}))}}if(!(7&a)){if(pe="mouseout"===i||"pointerout"===i,(!(W="mouseover"===i||"pointerover"===i)||c===Va||!(_e=c.relatedTarget||c.fromElement)||!Yo(_e)&&!_e[Qn])&&(pe||W)&&(W=q.window===q?q:(W=q.ownerDocument)?W.defaultView||W.parentWindow:window,pe?(pe=V,null!==(_e=(_e=c.relatedTarget||c.toElement)?Yo(_e):null)&&(_e!==(bt=Go(_e))||5!==_e.tag&&6!==_e.tag)&&(_e=null)):(pe=null,_e=V),pe!==_e)){if(fe=au,ne="onMouseLeave",G="onMouseEnter",R="mouse",("pointerout"===i||"pointerover"===i)&&(fe=du,ne="onPointerLeave",G="onPointerEnter",R="pointer"),bt=null==pe?W:Ci(pe),D=null==_e?W:Ci(_e),(W=new fe(ne,R+"leave",pe,c,q)).target=bt,W.relatedTarget=D,ne=null,Yo(q)===V&&((fe=new fe(G,R+"enter",_e,c,q)).target=D,fe.relatedTarget=bt,ne=fe),bt=ne,pe&&_e)t:{for(G=_e,R=0,D=fe=pe;D;D=Kn(D))R++;for(D=0,ne=G;ne;ne=Kn(ne))D++;for(;0<R-D;)fe=Kn(fe),R--;for(;0<D-R;)G=Kn(G),D--;for(;R--;){if(fe===G||null!==G&&fe===G.alternate)break t;fe=Kn(fe),G=Kn(G)}fe=null}else fe=null;null!==pe&&Mu(K,W,pe,fe,!1),null!==_e&&null!==bt&&Mu(K,bt,_e,fe,!0)}if("select"===(pe=(W=V?Ci(V):window).nodeName&&W.nodeName.toLowerCase())||"input"===pe&&"file"===W.type)var he=Lp;else if(gu(W))if(yu)he=hm;else{he=Ft;var xe=mm}else(pe=W.nodeName)&&"input"===pe.toLowerCase()&&("checkbox"===W.type||"radio"===W.type)&&(he=_m);switch(he&&(he=he(i,V))?vu(K,he,c,q):(xe&&xe(i,W,V),"focusout"===i&&(xe=W._wrapperState)&&xe.controlled&&"number"===W.type&&$a(W,"number",W.value)),xe=V?Ci(V):window,i){case"focusin":(gu(xe)||"true"===xe.contentEditable)&&(gi=xe,Cs=V,vi=null);break;case"focusout":vi=Cs=gi=null;break;case"mousedown":Ss=!0;break;case"contextmenu":case"mouseup":case"dragend":Ss=!1,Su(K,c,q);break;case"selectionchange":if(Cu)break;case"keydown":case"keyup":Su(K,c,q)}var Ce;if(il)e:{switch(i){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Uo?_u(i,c)&&(Ne="onCompositionEnd"):"keydown"===i&&229===c.keyCode&&(Ne="onCompositionStart");Ne&&(Dp&&"ko"!==c.locale&&(Uo||"onCompositionStart"!==Ne?"onCompositionEnd"===Ne&&Uo&&(Ce=ru()):(ss="value"in(Bo=q)?Bo.value:Bo.textContent,Uo=!0)),0<(xe=Xo(V,Ne)).length&&(Ne=new cu(Ne,i,null,c,q),K.push({event:Ne,listeners:xe}),(Ce||null!==(Ce=hu(c)))&&(Ne.data=Ce))),(Ce=fu?function Vp(i,a){switch(i){case"compositionend":return hu(a);case"keypress":return 32!==a.which?null:(mu=!0,Op);case"textInput":return(i=a.data)===Op&&mu?null:i;default:return null}}(i,c):function zp(i,a){if(Uo)return"compositionend"===i||!il&&_u(i,a)?(i=ru(),Po=ss=Bo=null,Uo=!1,i):null;switch(i){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Dp&&"ko"!==a.locale?null:a.data}}(i,c))&&0<(V=Xo(V,"onBeforeInput")).length&&(q=new cu("onBeforeInput","beforeinput",null,c,q),K.push({event:q,listeners:V}),q.data=Ce)}Ru(K,a)})}function pr(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Xo(i,a){for(var c=a+"Capture",d=[];null!==i;){var m=i,h=m.stateNode;5===m.tag&&null!==h&&(m=h,null!=(h=Zi(i,c))&&d.unshift(pr(i,h,m)),null!=(h=Zi(i,a))&&d.push(pr(i,h,m))),i=i.return}return d}function Kn(i){if(null===i)return null;do{i=i.return}while(i&&5!==i.tag);return i||null}function Mu(i,a,c,d,m){for(var h=a._reactName,b=[];null!==c&&c!==d;){var k=c,F=k.alternate,V=k.stateNode;if(null!==F&&F===d)break;5===k.tag&&null!==V&&(k=V,m?null!=(F=Zi(c,h))&&b.unshift(pr(c,F,k)):m||null!=(F=Zi(c,h))&&b.push(pr(c,F,k))),c=c.return}0!==b.length&&i.push({event:a,listeners:b})}var $u=/\r\n?/g,Zp=/\u0000|\uFFFD/g;function Gu(i){return("string"==typeof i?i:""+i).replace($u,"\n").replace(Zp,"")}function Is(i,a,c){if(a=Gu(a),Gu(i)!==a&&c)throw Error(N(425))}function As(){}var pl=null,fl=null;function ml(i,a){return"textarea"===i||"noscript"===i||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var _l="function"==typeof setTimeout?setTimeout:void 0,qp="function"==typeof clearTimeout?clearTimeout:void 0,Du="function"==typeof Promise?Promise:void 0,Jp="function"==typeof queueMicrotask?queueMicrotask:typeof Du<"u"?function(i){return Du.resolve(null).then(i).catch(Kp)}:_l;function Kp(i){setTimeout(function(){throw i})}function hl(i,a){var c=a,d=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&8===m.nodeType)if("/$"===(c=m.data)){if(0===d)return i.removeChild(m),void zo(a);d--}else"$"!==c&&"$?"!==c&&"$!"!==c||d++;c=m}while(c);zo(a)}function mo(i){for(;null!=i;i=i.nextSibling){var a=i.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=i.data)||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return i}function Ou(i){i=i.previousSibling;for(var a=0;i;){if(8===i.nodeType){var c=i.data;if("$"===c||"$!"===c||"$?"===c){if(0===a)return i;a--}else"/$"===c&&a++}i=i.previousSibling}return null}var bi=Math.random().toString(36).slice(2),zn="__reactFiber$"+bi,xi="__reactProps$"+bi,Qn="__reactContainer$"+bi,gl="__reactEvents$"+bi,Qp="__reactListeners$"+bi,ef="__reactHandles$"+bi;function Yo(i){var a=i[zn];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Qn]||c[zn]){if(c=a.alternate,null!==a.child||null!==c&&null!==c.child)for(i=Ou(i);null!==i;){if(c=i[zn])return c;i=Ou(i)}return a}c=(i=c).parentNode}return null}function fr(i){return!(i=i[zn]||i[Qn])||5!==i.tag&&6!==i.tag&&13!==i.tag&&3!==i.tag?null:i}function Ci(i){if(5===i.tag||6===i.tag)return i.stateNode;throw Error(N(33))}function Ts(i){return i[xi]||null}var vl=[],Si=-1;function _o(i){return{current:i}}function Je(i){0>Si||(i.current=vl[Si],vl[Si]=null,Si--)}function We(i,a){Si++,vl[Si]=i.current,i.current=a}var ho={},Bt=_o(ho),rn=_o(!1),Ho=ho;function ki(i,a){var c=i.type.contextTypes;if(!c)return ho;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===a)return d.__reactInternalMemoizedMaskedChildContext;var h,m={};for(h in c)m[h]=a[h];return d&&((i=i.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=m),m}function sn(i){return null!=i.childContextTypes}function Fs(){Je(rn),Je(Bt)}function Vu(i,a,c){if(Bt.current!==ho)throw Error(N(168));We(Bt,a),We(rn,c)}function zu(i,a,c){var d=i.stateNode;if(a=a.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var m in d=d.getChildContext())if(!(m in a))throw Error(N(108,ut(i)||"Unknown",m));return j({},c,d)}function Rs(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ho,Ho=Bt.current,We(Bt,i),We(rn,rn.current),!0}function Bu(i,a,c){var d=i.stateNode;if(!d)throw Error(N(169));c?(i=zu(i,a,Ho),d.__reactInternalMemoizedMergedChildContext=i,Je(rn),Je(Bt),We(Bt,i)):Je(rn),We(rn,c)}var eo=null,js=!1,yl=!1;function Pu(i){null===eo?eo=[i]:eo.push(i)}function go(){if(!yl&&null!==eo){yl=!0;var i=0,a=Le;try{var c=eo;for(Le=1;i<c.length;i++){var d=c[i];do{d=d(!0)}while(null!==d)}eo=null,js=!1}catch(m){throw null!==eo&&(eo=eo.slice(i+1)),Wc(Ya,go),m}finally{Le=a,yl=!1}}return null}var wi=[],Ni=0,Ms=null,Ei=0,yn=[],S=0,gt=null,to=1,Bn="";function vo(i,a){wi[Ni++]=Ei,wi[Ni++]=Ms,Ms=i,Ei=a}function nf(i,a,c){yn[S++]=to,yn[S++]=Bn,yn[S++]=gt,gt=i;var d=to;i=Bn;var m=32-Nn(d)-1;d&=~(1<<m),c+=1;var h=32-Nn(a)+m;if(30<h){var b=m-m%5;h=(d&(1<<b)-1).toString(32),d>>=b,m-=b,to=1<<32-Nn(a)+m|c<<m|d,Bn=h+i}else to=1<<h|c<<m|d,Bn=i}function bl(i){null!==i.return&&(vo(i,1),nf(i,1,0))}function xl(i){for(;i===Ms;)Ms=wi[--Ni],wi[Ni]=null,Ei=wi[--Ni],wi[Ni]=null;for(;i===gt;)gt=yn[--S],yn[S]=null,Bn=yn[--S],yn[S]=null,to=yn[--S],yn[S]=null}var pn=null,an=null,Ke=!1,In=null;function Rt(i,a){var c=wn(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,null===(a=i.deletions)?(i.deletions=[c],i.flags|=16):a.push(c)}function of(i,a){switch(i.tag){case 5:var c=i.type;return null!==(a=1!==a.nodeType||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(i.stateNode=a,pn=i,an=mo(a.firstChild),!0);case 6:return null!==(a=""===i.pendingProps||3!==a.nodeType?null:a)&&(i.stateNode=a,pn=i,an=null,!0);case 13:return null!==(a=8!==a.nodeType?null:a)&&(i.memoizedState={dehydrated:a,treeContext:c=null!==gt?{id:to,overflow:Bn}:null,retryLane:1073741824},(c=wn(18,null,null,0)).stateNode=a,c.return=i,i.child=c,pn=i,an=null,!0);default:return!1}}function Cl(i){return!(!(1&i.mode)||128&i.flags)}function $s(i){if(Ke){var a=an;if(a){var c=a;if(!of(i,a)){if(Cl(i))throw Error(N(418));a=mo(c.nextSibling);var d=pn;a&&of(i,a)?Rt(d,c):(i.flags=-4097&i.flags|2,Ke=!1,pn=i)}}else{if(Cl(i))throw Error(N(418));i.flags=-4097&i.flags|2,Ke=!1,pn=i}}}function mr(i){for(i=i.return;null!==i&&5!==i.tag&&3!==i.tag&&13!==i.tag;)i=i.return;pn=i}function Gs(i){if(i!==pn)return!1;if(!Ke)return mr(i),Ke=!0,!1;var a;if((a=3!==i.tag)&&!(a=5!==i.tag)&&(a="head"!==(a=i.type)&&"body"!==a&&!ml(i.type,i.memoizedProps)),a&&(a=an)){if(Cl(i))throw Lu(),Error(N(418));for(;a;)Rt(i,a),a=mo(a.nextSibling)}if(mr(i),13===i.tag){if(!(i=null!==(i=i.memoizedState)?i.dehydrated:null))throw Error(N(317));e:{for(i=i.nextSibling,a=0;i;){if(8===i.nodeType){var c=i.data;if("/$"===c){if(0===a){an=mo(i.nextSibling);break e}a--}else"$"!==c&&"$!"!==c&&"$?"!==c||a++}i=i.nextSibling}an=null}}else an=pn?mo(i.stateNode.nextSibling):null;return!0}function Lu(){for(var i=an;i;)i=mo(i.nextSibling)}function Wo(){an=pn=null,Ke=!1}function _r(i){null===In?In=[i]:In.push(i)}var rf=Pe.ReactCurrentBatchConfig;function Zo(i,a,c){if(null!==(i=c.ref)&&"function"!=typeof i&&"object"!=typeof i){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(N(309));var d=c.stateNode}if(!d)throw Error(N(147,i));var m=d,h=""+i;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===h?a.ref:((a=function(b){var k=m.refs;null===b?delete k[h]:k[h]=b})._stringRef=h,a)}if("string"!=typeof i)throw Error(N(284));if(!c._owner)throw Error(N(290,i))}return i}function Ds(i,a){throw i=Object.prototype.toString.call(a),Error(N(31,"[object Object]"===i?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Uu(i){return(0,i._init)(i._payload)}function Xu(i){function a(G,R){if(i){var D=G.deletions;null===D?(G.deletions=[R],G.flags|=16):D.push(R)}}function c(G,R){if(!i)return null;for(;null!==R;)a(G,R),R=R.sibling;return null}function d(G,R){for(G=new Map;null!==R;)G.set(null!==R.key?R.key:R.index,R),R=R.sibling;return G}function m(G,R){return(G=Ao(G,R)).index=0,G.sibling=null,G}function h(G,R,D){return G.index=D,i?null!==(D=G.alternate)?(D=D.index)<R?(G.flags|=2,R):D:(G.flags|=2,R):(G.flags|=1048576,R)}function b(G){return i&&null===G.alternate&&(G.flags|=2),G}function k(G,R,D,ne){return null===R||6!==R.tag?((R=pc(D,G.mode,ne)).return=G,R):((R=m(R,D)).return=G,R)}function F(G,R,D,ne){var he=D.type;return he===ct?q(G,R,D.props.children,ne,D.key):null!==R&&(R.elementType===he||"object"==typeof he&&null!==he&&he.$$typeof===ee&&Uu(he)===R.type)?((ne=m(R,D.props)).ref=Zo(G,R,D),ne.return=G,ne):((ne=la(D.type,D.key,D.props,null,G.mode,ne)).ref=Zo(G,R,D),ne.return=G,ne)}function V(G,R,D,ne){return null===R||4!==R.tag||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?((R=fc(D,G.mode,ne)).return=G,R):((R=m(R,D.children||[])).return=G,R)}function q(G,R,D,ne,he){return null===R||7!==R.tag?((R=di(D,G.mode,ne,he)).return=G,R):((R=m(R,D)).return=G,R)}function K(G,R,D){if("string"==typeof R&&""!==R||"number"==typeof R)return(R=pc(""+R,G.mode,D)).return=G,R;if("object"==typeof R&&null!==R){switch(R.$$typeof){case Dt:return(D=la(R.type,R.key,R.props,null,G.mode,D)).ref=Zo(G,null,R),D.return=G,D;case $e:return(R=fc(R,G.mode,D)).return=G,R;case ee:return K(G,(0,R._init)(R._payload),D)}if(Yi(R)||Ve(R))return(R=di(R,G.mode,D,null)).return=G,R;Ds(G,R)}return null}function W(G,R,D,ne){var he=null!==R?R.key:null;if("string"==typeof D&&""!==D||"number"==typeof D)return null!==he?null:k(G,R,""+D,ne);if("object"==typeof D&&null!==D){switch(D.$$typeof){case Dt:return D.key===he?F(G,R,D,ne):null;case $e:return D.key===he?V(G,R,D,ne):null;case ee:return W(G,R,(he=D._init)(D._payload),ne)}if(Yi(D)||Ve(D))return null!==he?null:q(G,R,D,ne,null);Ds(G,D)}return null}function pe(G,R,D,ne,he){if("string"==typeof ne&&""!==ne||"number"==typeof ne)return k(R,G=G.get(D)||null,""+ne,he);if("object"==typeof ne&&null!==ne){switch(ne.$$typeof){case Dt:return F(R,G=G.get(null===ne.key?D:ne.key)||null,ne,he);case $e:return V(R,G=G.get(null===ne.key?D:ne.key)||null,ne,he);case ee:return pe(G,R,D,(0,ne._init)(ne._payload),he)}if(Yi(ne)||Ve(ne))return q(R,G=G.get(D)||null,ne,he,null);Ds(R,ne)}return null}return function bt(G,R,D,ne){if("object"==typeof D&&null!==D&&D.type===ct&&null===D.key&&(D=D.props.children),"object"==typeof D&&null!==D){switch(D.$$typeof){case Dt:e:{for(var he=D.key,xe=R;null!==xe;){if(xe.key===he){if((he=D.type)===ct){if(7===xe.tag){c(G,xe.sibling),(R=m(xe,D.props.children)).return=G,G=R;break e}}else if(xe.elementType===he||"object"==typeof he&&null!==he&&he.$$typeof===ee&&Uu(he)===xe.type){c(G,xe.sibling),(R=m(xe,D.props)).ref=Zo(G,xe,D),R.return=G,G=R;break e}c(G,xe);break}a(G,xe),xe=xe.sibling}D.type===ct?((R=di(D.props.children,G.mode,ne,D.key)).return=G,G=R):((ne=la(D.type,D.key,D.props,null,G.mode,ne)).ref=Zo(G,R,D),ne.return=G,G=ne)}return b(G);case $e:e:{for(xe=D.key;null!==R;){if(R.key===xe){if(4===R.tag&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){c(G,R.sibling),(R=m(R,D.children||[])).return=G,G=R;break e}c(G,R);break}a(G,R),R=R.sibling}(R=fc(D,G.mode,ne)).return=G,G=R}return b(G);case ee:return bt(G,R,(xe=D._init)(D._payload),ne)}if(Yi(D))return function _e(G,R,D,ne){for(var he=null,xe=null,Ce=R,Ne=R=0,xt=null;null!==Ce&&Ne<D.length;Ne++){Ce.index>Ne?(xt=Ce,Ce=null):xt=Ce.sibling;var De=W(G,Ce,D[Ne],ne);if(null===De){null===Ce&&(Ce=xt);break}i&&Ce&&null===De.alternate&&a(G,Ce),R=h(De,R,Ne),null===xe?he=De:xe.sibling=De,xe=De,Ce=xt}if(Ne===D.length)return c(G,Ce),Ke&&vo(G,Ne),he;if(null===Ce){for(;Ne<D.length;Ne++)null!==(Ce=K(G,D[Ne],ne))&&(R=h(Ce,R,Ne),null===xe?he=Ce:xe.sibling=Ce,xe=Ce);return Ke&&vo(G,Ne),he}for(Ce=d(G,Ce);Ne<D.length;Ne++)null!==(xt=pe(Ce,G,Ne,D[Ne],ne))&&(i&&null!==xt.alternate&&Ce.delete(null===xt.key?Ne:xt.key),R=h(xt,R,Ne),null===xe?he=xt:xe.sibling=xt,xe=xt);return i&&Ce.forEach(function(Ht){return a(G,Ht)}),Ke&&vo(G,Ne),he}(G,R,D,ne);if(Ve(D))return function fe(G,R,D,ne){var he=Ve(D);if("function"!=typeof he)throw Error(N(150));if(null==(D=he.call(D)))throw Error(N(151));for(var xe=he=null,Ce=R,Ne=R=0,xt=null,De=D.next();null!==Ce&&!De.done;Ne++,De=D.next()){Ce.index>Ne?(xt=Ce,Ce=null):xt=Ce.sibling;var Ht=W(G,Ce,De.value,ne);if(null===Ht){null===Ce&&(Ce=xt);break}i&&Ce&&null===Ht.alternate&&a(G,Ce),R=h(Ht,R,Ne),null===xe?he=Ht:xe.sibling=Ht,xe=Ht,Ce=xt}if(De.done)return c(G,Ce),Ke&&vo(G,Ne),he;if(null===Ce){for(;!De.done;Ne++,De=D.next())null!==(De=K(G,De.value,ne))&&(R=h(De,R,Ne),null===xe?he=De:xe.sibling=De,xe=De);return Ke&&vo(G,Ne),he}for(Ce=d(G,Ce);!De.done;Ne++,De=D.next())null!==(De=pe(Ce,G,Ne,De.value,ne))&&(i&&null!==De.alternate&&Ce.delete(null===De.key?Ne:De.key),R=h(De,R,Ne),null===xe?he=De:xe.sibling=De,xe=De);return i&&Ce.forEach(function(ro){return a(G,ro)}),Ke&&vo(G,Ne),he}(G,R,D,ne);Ds(G,D)}return"string"==typeof D&&""!==D||"number"==typeof D?(D=""+D,null!==R&&6===R.tag?(c(G,R.sibling),(R=m(R,D)).return=G,G=R):(c(G,R),(R=pc(D,G.mode,ne)).return=G,G=R),b(G)):c(G,R)}}var qo=Xu(!0),Yu=Xu(!1),Os=_o(null),hr=null,Jo=null,Sl=null;function kl(){Sl=Jo=hr=null}function wl(i){var a=Os.current;Je(Os),i._currentValue=a}function Nl(i,a,c){for(;null!==i;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,null!==d&&(d.childLanes|=a)):null!==d&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===c)break;i=i.return}}function Ii(i,a){hr=i,Sl=Jo=null,null!==(i=i.dependencies)&&null!==i.firstContext&&(i.lanes&a&&(Lt=!0),i.firstContext=null)}function bn(i){var a=i._currentValue;if(Sl!==i)if(i={context:i,memoizedValue:a,next:null},null===Jo){if(null===hr)throw Error(N(308));Jo=i,hr.dependencies={lanes:0,firstContext:i}}else Jo=Jo.next=i;return a}var Ko=null;function El(i){null===Ko?Ko=[i]:Ko.push(i)}function Hu(i,a,c,d){var m=a.interleaved;return null===m?(c.next=c,El(a)):(c.next=m.next,m.next=c),a.interleaved=c,Pn(i,d)}function Pn(i,a){i.lanes|=a;var c=i.alternate;for(null!==c&&(c.lanes|=a),c=i,i=i.return;null!==i;)i.childLanes|=a,null!==(c=i.alternate)&&(c.childLanes|=a),c=i,i=i.return;return 3===c.tag?c.stateNode:null}var yo=!1;function Ai(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wu(i,a){a.updateQueue===(i=i.updateQueue)&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function no(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function bo(i,a,c){var d=i.updateQueue;if(null===d)return null;if(d=d.shared,2&Re){var m=d.pending;return null===m?a.next=a:(a.next=m.next,m.next=a),d.pending=a,Pn(i,c)}return null===(m=d.interleaved)?(a.next=a,El(d)):(a.next=m.next,m.next=a),d.interleaved=a,Pn(i,c)}function Vs(i,a,c){if(null!==(a=a.updateQueue)&&(a=a.shared,4194240&c)){var d=a.lanes;a.lanes=c|=d&=i.pendingLanes,is(i,c)}}function Zu(i,a){var c=i.updateQueue,d=i.alternate;if(null===d||c!==(d=d.updateQueue))null===(i=c.lastBaseUpdate)?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a;else{var m=null,h=null;if(null!==(c=c.firstBaseUpdate)){do{var b={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===h?m=h=b:h=h.next=b,c=c.next}while(null!==c);null===h?m=h=a:h=h.next=a}else m=h=a;i.updateQueue=c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:h,shared:d.shared,effects:d.effects}}}function zs(i,a,c,d){var m=i.updateQueue;yo=!1;var h=m.firstBaseUpdate,b=m.lastBaseUpdate,k=m.shared.pending;if(null!==k){m.shared.pending=null;var F=k,V=F.next;F.next=null,null===b?h=V:b.next=V,b=F;var q=i.alternate;null!==q&&(k=(q=q.updateQueue).lastBaseUpdate)!==b&&(null===k?q.firstBaseUpdate=V:k.next=V,q.lastBaseUpdate=F)}if(null!==h){var K=m.baseState;for(b=0,q=V=F=null,k=h;;){var W=k.lane,pe=k.eventTime;if((d&W)===W){null!==q&&(q=q.next={eventTime:pe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var _e=i,fe=k;switch(W=a,pe=c,fe.tag){case 1:if("function"==typeof(_e=fe.payload)){K=_e.call(pe,K,W);break e}K=_e;break e;case 3:_e.flags=-65537&_e.flags|128;case 0:if(null==(W="function"==typeof(_e=fe.payload)?_e.call(pe,K,W):_e))break e;K=j({},K,W);break e;case 2:yo=!0}}null!==k.callback&&0!==k.lane&&(i.flags|=64,null===(W=m.effects)?m.effects=[k]:W.push(k))}else pe={eventTime:pe,lane:W,tag:k.tag,payload:k.payload,callback:k.callback,next:null},null===q?(V=q=pe,F=K):q=q.next=pe,b|=W;if(null===(k=k.next)){if(null===(k=m.shared.pending))break;k=(W=k).next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}if(null===q&&(F=K),m.baseState=F,m.firstBaseUpdate=V,m.lastBaseUpdate=q,null!==(a=m.shared.interleaved)){m=a;do{b|=m.lane,m=m.next}while(m!==a)}else null===h&&(m.shared.lanes=0);si|=b,i.lanes=b,i.memoizedState=K}}function qu(i,a,c){if(i=a.effects,a.effects=null,null!==i)for(a=0;a<i.length;a++){var d=i[a],m=d.callback;if(null!==m){if(d.callback=null,d=c,"function"!=typeof m)throw Error(N(191,m));m.call(d)}}}var gr={},Ln=_o(gr),vr=_o(gr),yr=_o(gr);function Qo(i){if(i===gr)throw Error(N(174));return i}function Il(i,a){switch(We(yr,a),We(vr,i),We(Ln,gr),i=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ga(null,"");break;default:a=Ga(a=(i=8===i?a.parentNode:a).namespaceURI||null,i=i.tagName)}Je(Ln),We(Ln,a)}function Ti(){Je(Ln),Je(vr),Je(yr)}function Ju(i){Qo(yr.current);var a=Qo(Ln.current),c=Ga(a,i.type);a!==c&&(We(vr,i),We(Ln,c))}function Al(i){vr.current===i&&(Je(Ln),Je(vr))}var rt=_o(0);function Bs(i){for(var a=i;null!==a;){if(13===a.tag){var c=a.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===i)break;for(;null===a.sibling;){if(null===a.return||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var br=[];function Ps(){for(var i=0;i<br.length;i++)br[i]._workInProgressVersionPrimary=null;br.length=0}var ei=Pe.ReactCurrentDispatcher,Tl=Pe.ReactCurrentBatchConfig,ti=0,st=null,Et=null,jt=null,Ls=!1,xr=!1,Fi=0,sf=0;function Pt(){throw Error(N(321))}function Fl(i,a){if(null===a)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Ge(i[c],a[c]))return!1;return!0}function Rl(i,a,c,d,m,h){if(ti=h,st=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ei.current=null===i||null===i.memoizedState?cf:uf,i=c(d,m),xr){h=0;do{if(xr=!1,Fi=0,25<=h)throw Error(N(301));h+=1,jt=Et=null,a.updateQueue=null,ei.current=df,i=c(d,m)}while(xr)}if(ei.current=Ws,a=null!==Et&&null!==Et.next,ti=0,jt=Et=st=null,Ls=!1,a)throw Error(N(300));return i}function xo(){var i=0!==Fi;return Fi=0,i}function Un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===jt?st.memoizedState=jt=i:jt=jt.next=i,jt}function xn(){if(null===Et){var i=st.alternate;i=null!==i?i.memoizedState:null}else i=Et.next;var a=null===jt?st.memoizedState:jt.next;if(null!==a)jt=a,Et=i;else{if(null===i)throw Error(N(310));i={memoizedState:(Et=i).memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},null===jt?st.memoizedState=jt=i:jt=jt.next=i}return jt}function Cr(i,a){return"function"==typeof a?a(i):a}function jl(i){var a=xn(),c=a.queue;if(null===c)throw Error(N(311));c.lastRenderedReducer=i;var d=Et,m=d.baseQueue,h=c.pending;if(null!==h){if(null!==m){var b=m.next;m.next=h.next,h.next=b}d.baseQueue=m=h,c.pending=null}if(null!==m){d=d.baseState;var k=b=null,F=null,V=h=m.next;do{var q=V.lane;if((ti&q)===q)null!==F&&(F=F.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),d=V.hasEagerState?V.eagerState:i(d,V.action);else{var K={lane:q,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};null===F?(k=F=K,b=d):F=F.next=K,st.lanes|=q,si|=q}V=V.next}while(null!==V&&V!==h);null===F?b=d:F.next=k,Ge(d,a.memoizedState)||(Lt=!0),a.memoizedState=d,a.baseState=b,a.baseQueue=F,c.lastRenderedState=d}if(null!==(i=c.interleaved)){m=i;do{st.lanes|=h=m.lane,si|=h,m=m.next}while(m!==i)}else null===m&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Us(i){var a=xn(),c=a.queue;if(null===c)throw Error(N(311));c.lastRenderedReducer=i;var d=c.dispatch,m=c.pending,h=a.memoizedState;if(null!==m){c.pending=null;var b=m=m.next;do{h=i(h,b.action),b=b.next}while(b!==m);Ge(h,a.memoizedState)||(Lt=!0),a.memoizedState=h,null===a.baseQueue&&(a.baseState=h),c.lastRenderedState=h}return[h,d]}function Xs(){}function Ml(i,a){var c=st,d=xn(),m=a(),h=!Ge(d.memoizedState,m);if(h&&(d.memoizedState=m,Lt=!0),Dl(Ku.bind(null,c,d=d.queue,i),[i]),d.getSnapshot!==a||h||null!==jt&&1&jt.memoizedState.tag){if(c.flags|=2048,Sr(9,Gl.bind(null,c,d,m,a),void 0,null),null===vt)throw Error(N(349));30&ti||$l(c,a,m)}return m}function $l(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},null===(a=st.updateQueue)?(st.updateQueue=a={lastEffect:null,stores:null},a.stores=[i]):null===(c=a.stores)?a.stores=[i]:c.push(i)}function Gl(i,a,c,d){a.value=c,a.getSnapshot=d,Qu(a)&&ed(i)}function Ku(i,a,c){return c(function(){Qu(a)&&ed(i)})}function Qu(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Ge(i,c)}catch{return!0}}function ed(i){var a=Pn(i,1);null!==a&&Vt(a,i,1,-1)}function td(i){var a=Un();return"function"==typeof i&&(i=i()),a.memoizedState=a.baseState=i,a.queue=i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:i},i=i.dispatch=lf.bind(null,st,i),[a.memoizedState,i]}function Sr(i,a,c,d){return i={tag:i,create:a,destroy:c,deps:d,next:null},null===(a=st.updateQueue)?(st.updateQueue=a={lastEffect:null,stores:null},a.lastEffect=i.next=i):null===(c=a.lastEffect)?a.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,a.lastEffect=i),i}function nd(){return xn().memoizedState}function Ys(i,a,c,d){var m=Un();st.flags|=i,m.memoizedState=Sr(1|a,c,void 0,void 0===d?null:d)}function Hs(i,a,c,d){var m=xn();d=void 0===d?null:d;var h=void 0;if(null!==Et){var b=Et.memoizedState;if(h=b.destroy,null!==d&&Fl(d,b.deps))return void(m.memoizedState=Sr(a,c,h,d))}st.flags|=i,m.memoizedState=Sr(1|a,c,h,d)}function od(i,a){return Ys(8390656,8,i,a)}function Dl(i,a){return Hs(2048,8,i,a)}function id(i,a){return Hs(4,2,i,a)}function rd(i,a){return Hs(4,4,i,a)}function sd(i,a){return"function"==typeof a?(i=i(),a(i),function(){a(null)}):null!=a?(i=i(),a.current=i,function(){a.current=null}):void 0}function ad(i,a,c){return c=null!=c?c.concat([i]):null,Hs(4,4,sd.bind(null,a,i),c)}function Ol(){}function ld(i,a){var c=xn();a=void 0===a?null:a;var d=c.memoizedState;return null!==d&&null!==a&&Fl(a,d[1])?d[0]:(c.memoizedState=[i,a],i)}function cd(i,a){var c=xn();a=void 0===a?null:a;var d=c.memoizedState;return null!==d&&null!==a&&Fl(a,d[1])?d[0]:(i=i(),c.memoizedState=[i,a],i)}function ud(i,a,c){return 21&ti?(Ge(c,a)||(c=Kc(),st.lanes|=c,si|=c,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,Lt=!0),i.memoizedState=c)}function dd(i,a){var c=Le;Le=0!==c&&4>c?c:4,i(!0);var d=Tl.transition;Tl.transition={};try{i(!1),a()}finally{Le=c,Tl.transition=d}}function pd(){return xn().memoizedState}function af(i,a,c){var d=ln(i);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},fd(i)?md(a,c):null!==(c=Hu(i,a,c,d))&&(Vt(c,i,d,$t()),_d(c,a,d))}function lf(i,a,c){var d=ln(i),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(fd(i))md(a,m);else{var h=i.alternate;if(0===i.lanes&&(null===h||0===h.lanes)&&null!==(h=a.lastRenderedReducer))try{var b=a.lastRenderedState,k=h(b,c);if(m.hasEagerState=!0,m.eagerState=k,Ge(k,b)){var F=a.interleaved;return null===F?(m.next=m,El(a)):(m.next=F.next,F.next=m),void(a.interleaved=m)}}catch{}null!==(c=Hu(i,a,m,d))&&(Vt(c,i,d,m=$t()),_d(c,a,d))}}function fd(i){var a=i.alternate;return i===st||null!==a&&a===st}function md(i,a){xr=Ls=!0;var c=i.pending;null===c?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function _d(i,a,c){if(4194240&c){var d=a.lanes;a.lanes=c|=d&=i.pendingLanes,is(i,c)}}var Ws={readContext:bn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},cf={readContext:bn,useCallback:function(i,a){return Un().memoizedState=[i,void 0===a?null:a],i},useContext:bn,useEffect:od,useImperativeHandle:function(i,a,c){return c=null!=c?c.concat([i]):null,Ys(4194308,4,sd.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Ys(4194308,4,i,a)},useInsertionEffect:function(i,a){return Ys(4,2,i,a)},useMemo:function(i,a){var c=Un();return a=void 0===a?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var d=Un();return a=void 0!==c?c(a):a,d.memoizedState=d.baseState=a,d.queue=i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},i=i.dispatch=af.bind(null,st,i),[d.memoizedState,i]},useRef:function(i){return Un().memoizedState={current:i}},useState:td,useDebugValue:Ol,useDeferredValue:function(i){return Un().memoizedState=i},useTransition:function(){var i=td(!1),a=i[0];return i=dd.bind(null,i[1]),Un().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var d=st,m=Un();if(Ke){if(void 0===c)throw Error(N(407));c=c()}else{if(c=a(),null===vt)throw Error(N(349));30&ti||$l(d,a,c)}m.memoizedState=c;var h={value:c,getSnapshot:a};return m.queue=h,od(Ku.bind(null,d,h,i),[i]),d.flags|=2048,Sr(9,Gl.bind(null,d,h,c,a),void 0,null),c},useId:function(){var i=Un(),a=vt.identifierPrefix;if(Ke){var c=Bn;a=":"+a+"R"+(c=(to&~(1<<32-Nn(to)-1)).toString(32)+c),0<(c=Fi++)&&(a+="H"+c.toString(32)),a+=":"}else a=":"+a+"r"+(c=sf++).toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},uf={readContext:bn,useCallback:ld,useContext:bn,useEffect:Dl,useImperativeHandle:ad,useInsertionEffect:id,useLayoutEffect:rd,useMemo:cd,useReducer:jl,useRef:nd,useState:function(){return jl(Cr)},useDebugValue:Ol,useDeferredValue:function(i){return ud(xn(),Et.memoizedState,i)},useTransition:function(){return[jl(Cr)[0],xn().memoizedState]},useMutableSource:Xs,useSyncExternalStore:Ml,useId:pd,unstable_isNewReconciler:!1},df={readContext:bn,useCallback:ld,useContext:bn,useEffect:Dl,useImperativeHandle:ad,useInsertionEffect:id,useLayoutEffect:rd,useMemo:cd,useReducer:Us,useRef:nd,useState:function(){return Us(Cr)},useDebugValue:Ol,useDeferredValue:function(i){var a=xn();return null===Et?a.memoizedState=i:ud(a,Et.memoizedState,i)},useTransition:function(){return[Us(Cr)[0],xn().memoizedState]},useMutableSource:Xs,useSyncExternalStore:Ml,useId:pd,unstable_isNewReconciler:!1};function An(i,a){if(i&&i.defaultProps){for(var c in a=j({},a),i=i.defaultProps)void 0===a[c]&&(a[c]=i[c]);return a}return a}function Vl(i,a,c,d){c=null==(c=c(d,a=i.memoizedState))?a:j({},a,c),i.memoizedState=c,0===i.lanes&&(i.updateQueue.baseState=c)}var Zs={isMounted:function(i){return!!(i=i._reactInternals)&&Go(i)===i},enqueueSetState:function(i,a,c){i=i._reactInternals;var d=$t(),m=ln(i),h=no(d,m);h.payload=a,null!=c&&(h.callback=c),null!==(a=bo(i,h,m))&&(Vt(a,i,m,d),Vs(a,i,m))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var d=$t(),m=ln(i),h=no(d,m);h.tag=1,h.payload=a,null!=c&&(h.callback=c),null!==(a=bo(i,h,m))&&(Vt(a,i,m,d),Vs(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=$t(),d=ln(i),m=no(c,d);m.tag=2,null!=a&&(m.callback=a),null!==(a=bo(i,m,d))&&(Vt(a,i,d,c),Vs(a,i,d))}};function hd(i,a,c,d,m,h,b){return"function"==typeof(i=i.stateNode).shouldComponentUpdate?i.shouldComponentUpdate(d,h,b):!(a.prototype&&a.prototype.isPureReactComponent&&En(c,d)&&En(m,h))}function zl(i,a,c){var d=!1,m=ho,h=a.contextType;return"object"==typeof h&&null!==h?h=bn(h):(m=sn(a)?Ho:Bt.current,h=(d=null!=(d=a.contextTypes))?ki(i,m):ho),a=new a(c,h),i.memoizedState=null!=a.state?a.state:null,a.updater=Zs,i.stateNode=a,a._reactInternals=i,d&&((i=i.stateNode).__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=h),a}function gd(i,a,c,d){i=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(c,d),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==i&&Zs.enqueueReplaceState(a,a.state,null)}function Bl(i,a,c,d){var m=i.stateNode;m.props=c,m.state=i.memoizedState,m.refs={},Ai(i);var h=a.contextType;"object"==typeof h&&null!==h?m.context=bn(h):(h=sn(a)?Ho:Bt.current,m.context=ki(i,h)),m.state=i.memoizedState,"function"==typeof(h=a.getDerivedStateFromProps)&&(Vl(i,a,h,c),m.state=i.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof m.getSnapshotBeforeUpdate||"function"!=typeof m.UNSAFE_componentWillMount&&"function"!=typeof m.componentWillMount||(a=m.state,"function"==typeof m.componentWillMount&&m.componentWillMount(),"function"==typeof m.UNSAFE_componentWillMount&&m.UNSAFE_componentWillMount(),a!==m.state&&Zs.enqueueReplaceState(m,m.state,null),zs(i,c,m,d),m.state=i.memoizedState),"function"==typeof m.componentDidMount&&(i.flags|=4194308)}function Ri(i,a){try{var c="",d=a;do{c+=Xe(d),d=d.return}while(d);var m=c}catch(h){m="\nError generating stack: "+h.message+"\n"+h.stack}return{value:i,source:a,stack:m,digest:null}}function Pl(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function qs(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var fn="function"==typeof WeakMap?WeakMap:Map;function Ll(i,a,c){(c=no(-1,c)).tag=3,c.payload={element:null};var d=a.value;return c.callback=function(){Rr||(Rr=!0,ai=d),qs(0,a)},c}function vd(i,a,c){(c=no(-1,c)).tag=3;var d=i.type.getDerivedStateFromError;if("function"==typeof d){var m=a.value;c.payload=function(){return d(m)},c.callback=function(){qs(0,a)}}var h=i.stateNode;return null!==h&&"function"==typeof h.componentDidCatch&&(c.callback=function(){qs(0,a),"function"!=typeof d&&(null===io?io=new Set([this]):io.add(this));var b=a.stack;this.componentDidCatch(a.value,{componentStack:null!==b?b:""})}),c}function ji(i,a,c){var d=i.pingCache;if(null===d){d=i.pingCache=new fn;var m=new Set;d.set(a,m)}else void 0===(m=d.get(a))&&d.set(a,m=new Set);m.has(c)||(m.add(c),i=_f.bind(null,i,a,c),a.then(i,i))}function Cn(i){do{var a;if((a=13===i.tag)&&(a=null===(a=i.memoizedState)||null!==a.dehydrated),a)return i;i=i.return}while(null!==i);return null}function yd(i,a,c,d,m){return 1&i.mode?(i.flags|=65536,i.lanes=m,i):(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:((a=no(-1,1)).tag=2,bo(c,a,1))),c.lanes|=1),i)}var kr=Pe.ReactCurrentOwner,Lt=!1;function kt(i,a,c,d){a.child=null===i?Yu(a,null,c,d):qo(a,i.child,c,d)}function Ul(i,a,c,d,m){c=c.render;var h=a.ref;return Ii(a,m),d=Rl(i,a,c,d,h,m),c=xo(),null===i||Lt?(Ke&&c&&bl(a),a.flags|=1,kt(i,a,d,m),a.child):(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Fn(i,a,m))}function Xl(i,a,c,d,m){if(null===i){var h=c.type;return"function"!=typeof h||dc(h)||void 0!==h.defaultProps||null!==c.compare||void 0!==c.defaultProps?((i=la(c.type,null,d,a,a.mode,m)).ref=a.ref,i.return=a,a.child=i):(a.tag=15,a.type=h,bd(i,a,h,d,m))}return h=i.child,i.lanes&m||!(c=null!==(c=c.compare)?c:En)(h.memoizedProps,d)||i.ref!==a.ref?(a.flags|=1,(i=Ao(h,d)).ref=a.ref,i.return=a,a.child=i):Fn(i,a,m)}function bd(i,a,c,d,m){if(null!==i){var h=i.memoizedProps;if(En(h,d)&&i.ref===a.ref){if(Lt=!1,a.pendingProps=d=h,!(i.lanes&m))return a.lanes=i.lanes,Fn(i,a,m);131072&i.flags&&(Lt=!0)}}return Hl(i,a,c,d,m)}function Yl(i,a,c){var d=a.pendingProps,m=d.children,h=null!==i?i.memoizedState:null;if("hidden"===d.mode)if(1&a.mode){if(!(1073741824&c))return i=null!==h?h.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,We(zi,dt),dt|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=null!==h?h.baseLanes:c,We(zi,dt),dt|=d}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(zi,dt),dt|=c;else null!==h?(d=h.baseLanes|c,a.memoizedState=null):d=c,We(zi,dt),dt|=d;return kt(i,a,m,c),a.child}function xd(i,a){var c=a.ref;(null===i&&null!==c||null!==i&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Hl(i,a,c,d,m){var h=sn(c)?Ho:Bt.current;return h=ki(a,h),Ii(a,m),c=Rl(i,a,c,d,h,m),d=xo(),null===i||Lt?(Ke&&d&&bl(a),a.flags|=1,kt(i,a,c,m),a.child):(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~m,Fn(i,a,m))}function Cd(i,a,c,d,m){if(sn(c)){var h=!0;Rs(a)}else h=!1;if(Ii(a,m),null===a.stateNode)wr(i,a),zl(a,c,d),Bl(a,c,d,m),d=!0;else if(null===i){var b=a.stateNode,k=a.memoizedProps;b.props=k;var F=b.context,V=c.contextType;V="object"==typeof V&&null!==V?bn(V):ki(a,V=sn(c)?Ho:Bt.current);var q=c.getDerivedStateFromProps,K="function"==typeof q||"function"==typeof b.getSnapshotBeforeUpdate;K||"function"!=typeof b.UNSAFE_componentWillReceiveProps&&"function"!=typeof b.componentWillReceiveProps||(k!==d||F!==V)&&gd(a,b,d,V),yo=!1;var W=a.memoizedState;b.state=W,zs(a,d,b,m),F=a.memoizedState,k!==d||W!==F||rn.current||yo?("function"==typeof q&&(Vl(a,c,q,d),F=a.memoizedState),(k=yo||hd(a,c,k,d,W,F,V))?(K||"function"!=typeof b.UNSAFE_componentWillMount&&"function"!=typeof b.componentWillMount||("function"==typeof b.componentWillMount&&b.componentWillMount(),"function"==typeof b.UNSAFE_componentWillMount&&b.UNSAFE_componentWillMount()),"function"==typeof b.componentDidMount&&(a.flags|=4194308)):("function"==typeof b.componentDidMount&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=F),b.props=d,b.state=F,b.context=V,d=k):("function"==typeof b.componentDidMount&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Wu(i,a),k=a.memoizedProps,V=a.type===a.elementType?k:An(a.type,k),b.props=V,K=a.pendingProps,W=b.context,F="object"==typeof(F=c.contextType)&&null!==F?bn(F):ki(a,F=sn(c)?Ho:Bt.current);var pe=c.getDerivedStateFromProps;(q="function"==typeof pe||"function"==typeof b.getSnapshotBeforeUpdate)||"function"!=typeof b.UNSAFE_componentWillReceiveProps&&"function"!=typeof b.componentWillReceiveProps||(k!==K||W!==F)&&gd(a,b,d,F),yo=!1,b.state=W=a.memoizedState,zs(a,d,b,m);var _e=a.memoizedState;k!==K||W!==_e||rn.current||yo?("function"==typeof pe&&(Vl(a,c,pe,d),_e=a.memoizedState),(V=yo||hd(a,c,V,d,W,_e,F)||!1)?(q||"function"!=typeof b.UNSAFE_componentWillUpdate&&"function"!=typeof b.componentWillUpdate||("function"==typeof b.componentWillUpdate&&b.componentWillUpdate(d,_e,F),"function"==typeof b.UNSAFE_componentWillUpdate&&b.UNSAFE_componentWillUpdate(d,_e,F)),"function"==typeof b.componentDidUpdate&&(a.flags|=4),"function"==typeof b.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof b.componentDidUpdate||k===i.memoizedProps&&W===i.memoizedState||(a.flags|=4),"function"!=typeof b.getSnapshotBeforeUpdate||k===i.memoizedProps&&W===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=_e),b.props=d,b.state=_e,b.context=F,d=V):("function"!=typeof b.componentDidUpdate||k===i.memoizedProps&&W===i.memoizedState||(a.flags|=4),"function"!=typeof b.getSnapshotBeforeUpdate||k===i.memoizedProps&&W===i.memoizedState||(a.flags|=1024),d=!1)}return Wl(i,a,c,d,h,m)}function Wl(i,a,c,d,m,h){xd(i,a);var b=!!(128&a.flags);if(!d&&!b)return m&&Bu(a,c,!1),Fn(i,a,h);d=a.stateNode,kr.current=a;var k=b&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return a.flags|=1,null!==i&&b?(a.child=qo(a,i.child,null,h),a.child=qo(a,null,k,h)):kt(i,a,k,h),a.memoizedState=d.state,m&&Bu(a,c,!0),a.child}function Tn(i){var a=i.stateNode;a.pendingContext?Vu(0,a.pendingContext,a.pendingContext!==a.context):a.context&&Vu(0,a.context,!1),Il(i,a.containerInfo)}function ni(i,a,c,d,m){return Wo(),_r(m),a.flags|=256,kt(i,a,c,d),a.child}var Nr,Ks,Sd,ql,oi={dehydrated:null,treeContext:null,retryLane:0};function ii(i){return{baseLanes:i,cachePool:null,transitions:null}}function Zl(i,a,c){var k,d=a.pendingProps,m=rt.current,h=!1,b=!!(128&a.flags);if((k=b)||(k=(null===i||null!==i.memoizedState)&&!!(2&m)),k?(h=!0,a.flags&=-129):(null===i||null!==i.memoizedState)&&(m|=1),We(rt,1&m),null===i)return $s(a),null!==(i=a.memoizedState)&&null!==(i=i.dehydrated)?(a.lanes=1&a.mode?"$!"===i.data?8:1073741824:1,null):(b=d.children,i=d.fallback,h?(h=a.child,b={mode:"hidden",children:b},1&(d=a.mode)||null===h?h=ca(b,d,0,null):(h.childLanes=0,h.pendingProps=b),i=di(i,d,c,null),h.return=a,i.return=a,h.sibling=i,a.child=h,a.child.memoizedState=ii(c),a.memoizedState=oi,i):Mi(a,b));if(null!==(m=i.memoizedState)&&null!==(k=m.dehydrated))return function Js(i,a,c,d,m,h,b){if(c)return 256&a.flags?(a.flags&=-257,Co(i,a,b,d=Pl(Error(N(422))))):null!==a.memoizedState?(a.child=i.child,a.flags|=128,null):(h=d.fallback,d=ca({mode:"visible",children:d.children},m=a.mode,0,null),(h=di(h,m,b,null)).flags|=2,d.return=a,h.return=a,d.sibling=h,a.child=d,1&a.mode&&qo(a,i.child,null,b),a.child.memoizedState=ii(b),a.memoizedState=oi,h);if(!(1&a.mode))return Co(i,a,b,null);if("$!"===m.data){if(d=m.nextSibling&&m.nextSibling.dataset)var k=d.dgst;return d=k,Co(i,a,b,d=Pl(h=Error(N(419)),d,void 0))}if(k=!!(b&i.childLanes),Lt||k){if(null!==(d=vt)){switch(b&-b){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}0!==(m=m&(d.suspendedLanes|b)?0:m)&&m!==h.retryLane&&(h.retryLane=m,Pn(i,m),Vt(d,i,m,-1))}return Md(),Co(i,a,b,d=Pl(Error(N(421))))}return"$?"===m.data?(a.flags|=128,a.child=i.child,a=hf.bind(null,i),m._reactRetry=a,null):(i=h.treeContext,an=mo(m.nextSibling),pn=a,Ke=!0,In=null,null!==i&&(yn[S++]=to,yn[S++]=Bn,yn[S++]=gt,to=i.id,Bn=i.overflow,gt=a),(a=Mi(a,d.children)).flags|=4096,a)}(i,a,b,d,k,m,c);if(h){h=d.fallback,k=(m=i.child).sibling;var F={mode:"hidden",children:d.children};return 1&(b=a.mode)||a.child===m?(d=Ao(m,F)).subtreeFlags=14680064&m.subtreeFlags:((d=a.child).childLanes=0,d.pendingProps=F,a.deletions=null),null!==k?h=Ao(k,h):(h=di(h,b,c,null)).flags|=2,h.return=a,d.return=a,d.sibling=h,a.child=d,d=h,h=a.child,b=null===(b=i.child.memoizedState)?ii(c):{baseLanes:b.baseLanes|c,cachePool:null,transitions:b.transitions},h.memoizedState=b,h.childLanes=i.childLanes&~c,a.memoizedState=oi,d}return i=(h=i.child).sibling,d=Ao(h,{mode:"visible",children:d.children}),!(1&a.mode)&&(d.lanes=c),d.return=a,d.sibling=null,null!==i&&(null===(c=a.deletions)?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=d,a.memoizedState=null,d}function Mi(i,a){return(a=ca({mode:"visible",children:a},i.mode,0,null)).return=i,i.child=a}function Co(i,a,c,d){return null!==d&&_r(d),qo(a,i.child,null,c),(i=Mi(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,i}function So(i,a,c){i.lanes|=a;var d=i.alternate;null!==d&&(d.lanes|=a),Nl(i.return,a,c)}function $i(i,a,c,d,m){var h=i.memoizedState;null===h?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=d,h.tail=c,h.tailMode=m)}function Gi(i,a,c){var d=a.pendingProps,m=d.revealOrder,h=d.tail;if(kt(i,a,d.children,c),2&(d=rt.current))d=1&d|2,a.flags|=128;else{if(null!==i&&128&i.flags)e:for(i=a.child;null!==i;){if(13===i.tag)null!==i.memoizedState&&So(i,c,a);else if(19===i.tag)So(i,c,a);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;null===i.sibling;){if(null===i.return||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(We(rt,d),1&a.mode)switch(m){case"forwards":for(c=a.child,m=null;null!==c;)null!==(i=c.alternate)&&null===Bs(i)&&(m=c),c=c.sibling;null===(c=m)?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),$i(a,!1,m,c,h);break;case"backwards":for(c=null,m=a.child,a.child=null;null!==m;){if(null!==(i=m.alternate)&&null===Bs(i)){a.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}$i(a,!0,c,null,h);break;case"together":$i(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function wr(i,a){!(1&a.mode)&&null!==i&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Fn(i,a,c){if(null!==i&&(a.dependencies=i.dependencies),si|=a.lanes,!(c&a.childLanes))return null;if(null!==i&&a.child!==i.child)throw Error(N(153));if(null!==a.child){for(c=Ao(i=a.child,i.pendingProps),a.child=c,c.return=a;null!==i.sibling;)(c=c.sibling=Ao(i=i.sibling,i.pendingProps)).return=a;c.sibling=null}return a.child}function Er(i,a){if(!Ke)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;null!==a;)null!==a.alternate&&(c=a),a=a.sibling;null===c?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?a||null===i.tail?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ut(i){var a=null!==i.alternate&&i.alternate.child===i.child,c=0,d=0;if(a)for(var m=i.child;null!==m;)c|=m.lanes|m.childLanes,d|=14680064&m.subtreeFlags,d|=14680064&m.flags,m.return=i,m=m.sibling;else for(m=i.child;null!==m;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=c,a}function Jl(i,a,c){var d=a.pendingProps;switch(xl(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(a),null;case 1:case 17:return sn(a.type)&&Fs(),Ut(a),null;case 3:return d=a.stateNode,Ti(),Je(rn),Je(Bt),Ps(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(null===i||null===i.child)&&(Gs(a)?a.flags|=4:null===i||i.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==In&&(mn(In),In=null))),Ks(i,a),Ut(a),null;case 5:Al(a);var m=Qo(yr.current);if(c=a.type,null!==i&&null!=a.stateNode)Sd(i,a,c,d,m),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!d){if(null===a.stateNode)throw Error(N(166));return Ut(a),null}if(i=Qo(Ln.current),Gs(a)){c=a.type;var h=a.memoizedProps;switch((d=a.stateNode)[zn]=a,d[xi]=h,i=!!(1&a.mode),c){case"dialog":qe("cancel",d),qe("close",d);break;case"iframe":case"object":case"embed":qe("load",d);break;case"video":case"audio":for(m=0;m<ur.length;m++)qe(ur[m],d);break;case"source":qe("error",d);break;case"img":case"image":case"link":qe("error",d),qe("load",d);break;case"details":qe("toggle",d);break;case"input":Tc(d,h),qe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},qe("invalid",d);break;case"textarea":jc(d,h),qe("invalid",d)}for(var b in Da(c,h),m=null,h)if(h.hasOwnProperty(b)){var k=h[b];"children"===b?"string"==typeof k?d.textContent!==k&&(!0!==h.suppressHydrationWarning&&Is(d.textContent,k,i),m=["children",k]):"number"==typeof k&&d.textContent!==""+k&&(!0!==h.suppressHydrationWarning&&Is(d.textContent,k,i),m=["children",""+k]):Nt.hasOwnProperty(b)&&null!=k&&"onScroll"===b&&qe("scroll",d)}switch(c){case"input":Wr(d),Rc(d,h,!0);break;case"textarea":Wr(d),On(d);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(d.onclick=As)}a.updateQueue=d=m,null!==d&&(a.flags|=4)}else{b=9===m.nodeType?m:m.ownerDocument,"http://www.w3.org/1999/xhtml"===i&&(i=$c(c)),"http://www.w3.org/1999/xhtml"===i?"script"===c?((i=b.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):"string"==typeof d.is?i=b.createElement(c,{is:d.is}):(i=b.createElement(c),"select"===c&&(b=i,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):i=b.createElementNS(i,c),i[zn]=a,i[xi]=d,Nr(i,a,!1,!1),a.stateNode=i;e:{switch(b=Oa(c,d),c){case"dialog":qe("cancel",i),qe("close",i),m=d;break;case"iframe":case"object":case"embed":qe("load",i),m=d;break;case"video":case"audio":for(m=0;m<ur.length;m++)qe(ur[m],i);m=d;break;case"source":qe("error",i),m=d;break;case"img":case"image":case"link":qe("error",i),qe("load",i),m=d;break;case"details":qe("toggle",i),m=d;break;case"input":Tc(i,d),m=ja(i,d),qe("invalid",i);break;case"option":default:m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=j({},d,{value:void 0}),qe("invalid",i);break;case"textarea":jc(i,d),m=Tt(i,d),qe("invalid",i)}for(h in Da(c,m),k=m)if(k.hasOwnProperty(h)){var F=k[h];"style"===h?Oc(i,F):"dangerouslySetInnerHTML"===h?null!=(F=F?F.__html:void 0)&&Gc(i,F):"children"===h?"string"==typeof F?("textarea"!==c||""!==F)&&Hi(i,F):"number"==typeof F&&Hi(i,""+F):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(Nt.hasOwnProperty(h)?null!=F&&"onScroll"===h&&qe("scroll",i):null!=F&&Gt(i,h,F,b))}switch(c){case"input":Wr(i),Rc(i,d,!1);break;case"textarea":Wr(i),On(i);break;case"option":null!=d.value&&i.setAttribute("value",""+ze(d.value));break;case"select":i.multiple=!!d.multiple,null!=(h=d.value)?$o(i,!!d.multiple,h,!1):null!=d.defaultValue&&$o(i,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof m.onClick&&(i.onclick=As)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}return Ut(a),null;case 6:if(i&&null!=a.stateNode)ql(i,a,i.memoizedProps,d);else{if("string"!=typeof d&&null===a.stateNode)throw Error(N(166));if(c=Qo(yr.current),Qo(Ln.current),Gs(a)){if(c=a.memoizedProps,(d=a.stateNode)[zn]=a,(h=d.nodeValue!==c)&&null!==(i=pn))switch(i.tag){case 3:Is(d.nodeValue,c,!!(1&i.mode));break;case 5:!0!==i.memoizedProps.suppressHydrationWarning&&Is(d.nodeValue,c,!!(1&i.mode))}h&&(a.flags|=4)}else(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d))[zn]=a,a.stateNode=d}return Ut(a),null;case 13:if(Je(rt),d=a.memoizedState,null===i||null!==i.memoizedState&&null!==i.memoizedState.dehydrated){if(Ke&&null!==an&&1&a.mode&&!(128&a.flags))Lu(),Wo(),a.flags|=98560,h=!1;else if(h=Gs(a),null!==d&&null!==d.dehydrated){if(null===i){if(!h)throw Error(N(318));if(!(h=null!==(h=a.memoizedState)?h.dehydrated:null))throw Error(N(317));h[zn]=a}else Wo(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;Ut(a),h=!1}else null!==In&&(mn(In),In=null),h=!0;if(!h)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=c,a):((d=null!==d)!=(null!==i&&null!==i.memoizedState)&&d&&(a.child.flags|=8192,1&a.mode&&(null===i||1&rt.current?0===It&&(It=3):Md())),null!==a.updateQueue&&(a.flags|=4),Ut(a),null);case 4:return Ti(),Ks(i,a),null===i&&dr(a.stateNode.containerInfo),Ut(a),null;case 10:return wl(a.type._context),Ut(a),null;case 19:if(Je(rt),null===(h=a.memoizedState))return Ut(a),null;if(d=!!(128&a.flags),null===(b=h.rendering))if(d)Er(h,!1);else{if(0!==It||null!==i&&128&i.flags)for(i=a.child;null!==i;){if(null!==(b=Bs(i))){for(a.flags|=128,Er(h,!1),null!==(d=b.updateQueue)&&(a.updateQueue=d,a.flags|=4),a.subtreeFlags=0,d=c,c=a.child;null!==c;)i=d,(h=c).flags&=14680066,null===(b=h.alternate)?(h.childLanes=0,h.lanes=i,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,h.dependencies=null===(i=b.dependencies)?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return We(rt,1&rt.current|2),a.child}i=i.sibling}null!==h.tail&&_t()>Bi&&(a.flags|=128,d=!0,Er(h,!1),a.lanes=4194304)}else{if(!d)if(null!==(i=Bs(b))){if(a.flags|=128,d=!0,null!==(c=i.updateQueue)&&(a.updateQueue=c,a.flags|=4),Er(h,!0),null===h.tail&&"hidden"===h.tailMode&&!b.alternate&&!Ke)return Ut(a),null}else 2*_t()-h.renderingStartTime>Bi&&1073741824!==c&&(a.flags|=128,d=!0,Er(h,!1),a.lanes=4194304);h.isBackwards?(b.sibling=a.child,a.child=b):(null!==(c=h.last)?c.sibling=b:a.child=b,h.last=b)}return null!==h.tail?(h.rendering=a=h.tail,h.tail=a.sibling,h.renderingStartTime=_t(),a.sibling=null,c=rt.current,We(rt,d?1&c|2:1&c),a):(Ut(a),null);case 22:case 23:return sc(),d=null!==a.memoizedState,null!==i&&null!==i.memoizedState!==d&&(a.flags|=8192),d&&1&a.mode?1073741824&dt&&(Ut(a),6&a.subtreeFlags&&(a.flags|=8192)):Ut(a),null;case 24:case 25:return null}throw Error(N(156,a.tag))}function kd(i,a){switch(xl(a),a.tag){case 1:return sn(a.type)&&Fs(),65536&(i=a.flags)?(a.flags=-65537&i|128,a):null;case 3:return Ti(),Je(rn),Je(Bt),Ps(),65536&(i=a.flags)&&!(128&i)?(a.flags=-65537&i|128,a):null;case 5:return Al(a),null;case 13:if(Je(rt),null!==(i=a.memoizedState)&&null!==i.dehydrated){if(null===a.alternate)throw Error(N(340));Wo()}return 65536&(i=a.flags)?(a.flags=-65537&i|128,a):null;case 19:return Je(rt),null;case 4:return Ti(),null;case 10:return wl(a.type._context),null;case 22:case 23:return sc(),null;default:return null}}Nr=function(i,a){for(var c=a.child;null!==c;){if(5===c.tag||6===c.tag)i.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ks=function(){},Sd=function(i,a,c,d){var m=i.memoizedProps;if(m!==d){i=a.stateNode,Qo(Ln.current);var b,h=null;switch(c){case"input":m=ja(i,m),d=ja(i,d),h=[];break;case"select":m=j({},m,{value:void 0}),d=j({},d,{value:void 0}),h=[];break;case"textarea":m=Tt(i,m),d=Tt(i,d),h=[];break;default:"function"!=typeof m.onClick&&"function"==typeof d.onClick&&(i.onclick=As)}for(V in Da(c,d),c=null,m)if(!d.hasOwnProperty(V)&&m.hasOwnProperty(V)&&null!=m[V])if("style"===V){var k=m[V];for(b in k)k.hasOwnProperty(b)&&(c||(c={}),c[b]="")}else"dangerouslySetInnerHTML"!==V&&"children"!==V&&"suppressContentEditableWarning"!==V&&"suppressHydrationWarning"!==V&&"autoFocus"!==V&&(Nt.hasOwnProperty(V)?h||(h=[]):(h=h||[]).push(V,null));for(V in d){var F=d[V];if(k=m?.[V],d.hasOwnProperty(V)&&F!==k&&(null!=F||null!=k))if("style"===V)if(k){for(b in k)!k.hasOwnProperty(b)||F&&F.hasOwnProperty(b)||(c||(c={}),c[b]="");for(b in F)F.hasOwnProperty(b)&&k[b]!==F[b]&&(c||(c={}),c[b]=F[b])}else c||(h||(h=[]),h.push(V,c)),c=F;else"dangerouslySetInnerHTML"===V?(k=k?k.__html:void 0,null!=(F=F?F.__html:void 0)&&k!==F&&(h=h||[]).push(V,F)):"children"===V?"string"!=typeof F&&"number"!=typeof F||(h=h||[]).push(V,""+F):"suppressContentEditableWarning"!==V&&"suppressHydrationWarning"!==V&&(Nt.hasOwnProperty(V)?(null!=F&&"onScroll"===V&&qe("scroll",i),h||k===F||(h=[])):(h=h||[]).push(V,F))}c&&(h=h||[]).push("style",c);var V=h;(a.updateQueue=V)&&(a.flags|=4)}},ql=function(i,a,c,d){c!==d&&(a.flags|=4)};var Qs=!1,Xt=!1,wd="function"==typeof WeakSet?WeakSet:Set,me=null;function ko(i,a){var c=i.ref;if(null!==c)if("function"==typeof c)try{c(null)}catch(d){pt(i,a,d)}else c.current=null}function Di(i,a,c){try{c()}catch(d){pt(i,a,d)}}var Kl=!1;function wo(i,a,c){var d=a.updateQueue;if(null!==(d=null!==d?d.lastEffect:null)){var m=d=d.next;do{if((m.tag&i)===i){var h=m.destroy;m.destroy=void 0,void 0!==h&&Di(a,c,h)}m=m.next}while(m!==d)}}function ri(i,a){if(null!==(a=null!==(a=a.updateQueue)?a.lastEffect:null)){var c=a=a.next;do{(c.tag&i)===i&&(c.destroy=(0,c.create)()),c=c.next}while(c!==a)}}function Ir(i){var a=i.ref;null!==a&&(i=i.stateNode,"function"==typeof a?a(i):a.current=i)}function Rn(i){var a=i.alternate;null!==a&&(i.alternate=null,Rn(a)),i.child=null,i.deletions=null,i.sibling=null,5===i.tag&&null!==(a=i.stateNode)&&(delete a[zn],delete a[xi],delete a[gl],delete a[Qp],delete a[ef]),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Sn(i){return 5===i.tag||3===i.tag||4===i.tag}function Nd(i){e:for(;;){for(;null===i.sibling;){if(null===i.return||Sn(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags||null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(2&i.flags))return i.stateNode}}function Oi(i,a,c){var d=i.tag;if(5===d||6===d)i=i.stateNode,a?8===c.nodeType?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(8===c.nodeType?(a=c.parentNode).insertBefore(i,c):(a=c).appendChild(i),null!=(c=c._reactRootContainer)||null!==a.onclick||(a.onclick=As));else if(4!==d&&null!==(i=i.child))for(Oi(i,a,c),i=i.sibling;null!==i;)Oi(i,a,c),i=i.sibling}function ec(i,a,c){var d=i.tag;if(5===d||6===d)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(4!==d&&null!==(i=i.child))for(ec(i,a,c),i=i.sibling;null!==i;)ec(i,a,c),i=i.sibling}var nt=null,kn=!1;function Xn(i,a,c){for(c=c.child;null!==c;)tc(i,a,c),c=c.sibling}function tc(i,a,c){if(Vn&&"function"==typeof Vn.onCommitFiberUnmount)try{Vn.onCommitFiberUnmount(es,c)}catch{}switch(c.tag){case 5:Xt||ko(c,a);case 6:var d=nt,m=kn;nt=null,Xn(i,a,c),kn=m,null!==(nt=d)&&(kn?(c=c.stateNode,8===(i=nt).nodeType?i.parentNode.removeChild(c):i.removeChild(c)):nt.removeChild(c.stateNode));break;case 18:null!==nt&&(kn?(c=c.stateNode,8===(i=nt).nodeType?hl(i.parentNode,c):1===i.nodeType&&hl(i,c),zo(i)):hl(nt,c.stateNode));break;case 4:d=nt,m=kn,nt=c.stateNode.containerInfo,kn=!0,Xn(i,a,c),nt=d,kn=m;break;case 0:case 11:case 14:case 15:if(!Xt&&null!==(d=c.updateQueue)&&null!==(d=d.lastEffect)){m=d=d.next;do{var h=m,b=h.destroy;h=h.tag,void 0!==b&&(2&h||4&h)&&Di(c,a,b),m=m.next}while(m!==d)}Xn(i,a,c);break;case 1:if(!Xt&&(ko(c,a),"function"==typeof(d=c.stateNode).componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(k){pt(c,a,k)}Xn(i,a,c);break;case 21:Xn(i,a,c);break;case 22:1&c.mode?(Xt=(d=Xt)||null!==c.memoizedState,Xn(i,a,c),Xt=d):Xn(i,a,c);break;default:Xn(i,a,c)}}function Ar(i){var a=i.updateQueue;if(null!==a){i.updateQueue=null;var c=i.stateNode;null===c&&(c=i.stateNode=new wd),a.forEach(function(d){var m=gf.bind(null,i,d);c.has(d)||(c.add(d),d.then(m,m))})}}function jn(i,a){var c=a.deletions;if(null!==c)for(var d=0;d<c.length;d++){var m=c[d];try{var h=i,b=a,k=b;e:for(;null!==k;){switch(k.tag){case 5:nt=k.stateNode,kn=!1;break e;case 3:case 4:nt=k.stateNode.containerInfo,kn=!0;break e}k=k.return}if(null===nt)throw Error(N(160));tc(h,b,m),nt=null,kn=!1;var F=m.alternate;null!==F&&(F.return=null),m.return=null}catch(V){pt(m,a,V)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)Ed(a,i),a=a.sibling}function Ed(i,a){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(jn(a,i),Mn(i),4&d){try{wo(3,i,i.return),ri(3,i)}catch(fe){pt(i,i.return,fe)}try{wo(5,i,i.return)}catch(fe){pt(i,i.return,fe)}}break;case 1:jn(a,i),Mn(i),512&d&&null!==c&&ko(c,c.return);break;case 5:if(jn(a,i),Mn(i),512&d&&null!==c&&ko(c,c.return),32&i.flags){var m=i.stateNode;try{Hi(m,"")}catch(fe){pt(i,i.return,fe)}}if(4&d&&null!=(m=i.stateNode)){var h=i.memoizedProps,b=null!==c?c.memoizedProps:h,k=i.type,F=i.updateQueue;if(i.updateQueue=null,null!==F)try{"input"===k&&"radio"===h.type&&null!=h.name&&Fc(m,h),Oa(k,b);var V=Oa(k,h);for(b=0;b<F.length;b+=2){var q=F[b],K=F[b+1];"style"===q?Oc(m,K):"dangerouslySetInnerHTML"===q?Gc(m,K):"children"===q?Hi(m,K):Gt(m,q,K,V)}switch(k){case"input":Ma(m,h);break;case"textarea":Mc(m,h);break;case"select":var W=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!h.multiple;var pe=h.value;null!=pe?$o(m,!!h.multiple,pe,!1):W!==!!h.multiple&&(null!=h.defaultValue?$o(m,!!h.multiple,h.defaultValue,!0):$o(m,!!h.multiple,h.multiple?[]:"",!1))}m[xi]=h}catch(fe){pt(i,i.return,fe)}}break;case 6:if(jn(a,i),Mn(i),4&d){if(null===i.stateNode)throw Error(N(162));m=i.stateNode,h=i.memoizedProps;try{m.nodeValue=h}catch(fe){pt(i,i.return,fe)}}break;case 3:if(jn(a,i),Mn(i),4&d&&null!==c&&c.memoizedState.isDehydrated)try{zo(a.containerInfo)}catch(fe){pt(i,i.return,fe)}break;case 4:default:jn(a,i),Mn(i);break;case 13:jn(a,i),Mn(i),8192&(m=i.child).flags&&(m.stateNode.isHidden=h=null!==m.memoizedState,!h||null!==m.alternate&&null!==m.alternate.memoizedState||(na=_t())),4&d&&Ar(i);break;case 22:if(q=null!==c&&null!==c.memoizedState,1&i.mode?(Xt=(V=Xt)||q,jn(a,i),Xt=V):jn(a,i),Mn(i),8192&d){if((i.stateNode.isHidden=V=null!==i.memoizedState)&&!q&&1&i.mode)for(me=i,q=i.child;null!==q;){for(K=me=q;null!==me;){switch(pe=(W=me).child,W.tag){case 0:case 11:case 14:case 15:wo(4,W,W.return);break;case 1:ko(W,W.return);var _e=W.stateNode;if("function"==typeof _e.componentWillUnmount){d=W,c=W.return;try{_e.props=(a=d).memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(fe){pt(d,c,fe)}}break;case 5:ko(W,W.return);break;case 22:if(null!==W.memoizedState){Td(K);continue}}null!==pe?(pe.return=W,me=pe):Td(K)}q=q.sibling}e:for(q=null,K=i;;){if(5===K.tag){if(null===q){q=K;try{m=K.stateNode,V?"function"==typeof(h=m.style).setProperty?h.setProperty("display","none","important"):h.display="none":(k=K.stateNode,b=null!=(F=K.memoizedProps.style)&&F.hasOwnProperty("display")?F.display:null,k.style.display=Dc("display",b))}catch(fe){pt(i,i.return,fe)}}}else if(6===K.tag){if(null===q)try{K.stateNode.nodeValue=V?"":K.memoizedProps}catch(fe){pt(i,i.return,fe)}}else if((22!==K.tag&&23!==K.tag||null===K.memoizedState||K===i)&&null!==K.child){K.child.return=K,K=K.child;continue}if(K===i)break e;for(;null===K.sibling;){if(null===K.return||K.return===i)break e;q===K&&(q=null),K=K.return}q===K&&(q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:jn(a,i),Mn(i),4&d&&Ar(i);case 21:}}function Mn(i){var a=i.flags;if(2&a){try{e:{for(var c=i.return;null!==c;){if(Sn(c)){var d=c;break e}c=c.return}throw Error(N(160))}switch(d.tag){case 5:var m=d.stateNode;32&d.flags&&(Hi(m,""),d.flags&=-33),ec(i,Nd(i),m);break;case 3:case 4:var b=d.stateNode.containerInfo;Oi(i,Nd(i),b);break;default:throw Error(N(161))}}catch(F){pt(i,i.return,F)}i.flags&=-3}4096&a&&(i.flags&=-4097)}function ff(i,a,c){me=i,Id(i,a,c)}function Id(i,a,c){for(var d=!!(1&i.mode);null!==me;){var m=me,h=m.child;if(22===m.tag&&d){var b=null!==m.memoizedState||Qs;if(!b){var k=m.alternate,F=null!==k&&null!==k.memoizedState||Xt;k=Qs;var V=Xt;if(Qs=b,(Xt=F)&&!V)for(me=m;null!==me;)F=(b=me).child,22===b.tag&&null!==b.memoizedState?Fd(m):null!==F?(F.return=b,me=F):Fd(m);for(;null!==h;)me=h,Id(h,a,c),h=h.sibling;me=m,Qs=k,Xt=V}Ad(i)}else 8772&m.subtreeFlags&&null!==h?(h.return=m,me=h):Ad(i)}}function Ad(i){for(;null!==me;){var a=me;if(8772&a.flags){var c=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:Xt||ri(5,a);break;case 1:var d=a.stateNode;if(4&a.flags&&!Xt)if(null===c)d.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:An(a.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var h=a.updateQueue;null!==h&&qu(a,h,d);break;case 3:var b=a.updateQueue;if(null!==b){if(c=null,null!==a.child)switch(a.child.tag){case 5:case 1:c=a.child.stateNode}qu(a,b,c)}break;case 5:if(null===c&&4&a.flags){c=a.stateNode;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var V=a.alternate;if(null!==V){var q=V.memoizedState;if(null!==q){var K=q.dehydrated;null!==K&&zo(K)}}}break;default:throw Error(N(163))}Xt||512&a.flags&&Ir(a)}catch(W){pt(a,a.return,W)}}if(a===i){me=null;break}if(null!==(c=a.sibling)){c.return=a.return,me=c;break}me=a.return}}function Td(i){for(;null!==me;){var a=me;if(a===i){me=null;break}var c=a.sibling;if(null!==c){c.return=a.return,me=c;break}me=a.return}}function Fd(i){for(;null!==me;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{ri(4,a)}catch(F){pt(a,c,F)}break;case 1:var d=a.stateNode;if("function"==typeof d.componentDidMount){var m=a.return;try{d.componentDidMount()}catch(F){pt(a,m,F)}}var h=a.return;try{Ir(a)}catch(F){pt(a,h,F)}break;case 5:var b=a.return;try{Ir(a)}catch(F){pt(a,b,F)}}}catch(F){pt(a,a.return,F)}if(a===i){me=null;break}var k=a.sibling;if(null!==k){k.return=a.return,me=k;break}me=a.return}}var Od,nc=Math.ceil,Vi=Pe.ReactCurrentDispatcher,ea=Pe.ReactCurrentOwner,Yt=Pe.ReactCurrentBatchConfig,Re=0,vt=null,Qe=null,yt=0,dt=0,zi=_o(0),It=0,Tr=null,si=0,ta=0,oc=0,Fr=null,Jt=null,na=0,Bi=1/0,oo=null,Rr=!1,ai=null,io=null,li=!1,No=null,ci=0,Mt=0,oa=null,ia=-1,jr=0;function $t(){return 6&Re?_t():-1!==ia?ia:ia=_t()}function ln(i){return 1&i.mode?2&Re&&0!==yt?yt&-yt:null!==rf.transition?(0===jr&&(jr=Kc()),jr):(0!==(i=Le)||(i=void 0===(i=window.event)?16:Np(i.type)),i):1}function Vt(i,a,c,d){if(50<Mt)throw Mt=0,oa=null,Error(N(185));Qi(i,c,d),(!(2&Re)||i!==vt)&&(i===vt&&(!(2&Re)&&(ta|=c),4===It&&$n(i,yt)),Kt(i,d),1===c&&0===Re&&!(1&a.mode)&&(Bi=_t()+500,js&&go()))}function Kt(i,a){var c=i.callbackNode;!function Cp(i,a){for(var c=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,h=i.pendingLanes;0<h;){var b=31-Nn(h),k=1<<b,F=m[b];-1===F?(!(k&c)||k&d)&&(m[b]=xp(k,a)):F<=a&&(i.expiredLanes|=k),h&=~k}}(i,a);var d=os(i,i===vt?yt:0);if(0===d)null!==c&&Zc(c),i.callbackNode=null,i.callbackPriority=0;else if(i.callbackPriority!==(a=d&-d)){if(null!=c&&Zc(c),1===a)0===i.tag?function tf(i){js=!0,Pu(i)}(ra.bind(null,i)):Pu(ra.bind(null,i)),Jp(function(){!(6&Re)&&go()}),c=null;else{switch(Qc(d)){case 1:c=Ya;break;case 4:c=qc;break;case 16:default:c=Qr;break;case 536870912:c=Jc}c=Vd(c,ic.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function ic(i,a){if(ia=-1,jr=0,6&Re)throw Error(N(327));var c=i.callbackNode;if(Io()&&i.callbackNode!==c)return null;var d=os(i,i===vt?yt:0);if(0===d)return null;if(30&d||d&i.expiredLanes||a)a=aa(i,d);else{a=d;var m=Re;Re|=2;var h=jd();for((vt!==i||yt!==a)&&(oo=null,Bi=_t()+500,Eo(i,a));;)try{Gd();break}catch(k){ac(i,k)}kl(),Vi.current=h,Re=m,null!==Qe?a=0:(vt=null,yt=0,a=It)}if(0!==a){if(2===a&&0!==(m=Ha(i))&&(d=m,a=rc(i,m)),1===a)throw c=Tr,Eo(i,0),$n(i,d),Kt(i,_t()),c;if(6===a)$n(i,d);else{if(m=i.current.alternate,!(30&d||function Rd(i){for(var a=i;;){if(16384&a.flags){var c=a.updateQueue;if(null!==c&&null!==(c=c.stores))for(var d=0;d<c.length;d++){var m=c[d],h=m.getSnapshot;m=m.value;try{if(!Ge(h(),m))return!1}catch{return!1}}}if(c=a.child,16384&a.subtreeFlags&&null!==c)c.return=a,a=c;else{if(a===i)break;for(;null===a.sibling;){if(null===a.return||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}(m)||(a=aa(i,d),2===a&&(h=Ha(i),0!==h&&(d=h,a=rc(i,h))),1!==a)))throw c=Tr,Eo(i,0),$n(i,d),Kt(i,_t()),c;switch(i.finishedWork=m,i.finishedLanes=d,a){case 0:case 1:throw Error(N(345));case 2:case 5:Pi(i,Jt,oo);break;case 3:if($n(i,d),(130023424&d)===d&&10<(a=na+500-_t())){if(0!==os(i,0))break;if(((m=i.suspendedLanes)&d)!==d){$t(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=_l(Pi.bind(null,i,Jt,oo),a);break}Pi(i,Jt,oo);break;case 4:if($n(i,d),(4194240&d)===d)break;for(a=i.eventTimes,m=-1;0<d;){var b=31-Nn(d);h=1<<b,(b=a[b])>m&&(m=b),d&=~h}if(d=m,10<(d=(120>(d=_t()-d)?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*nc(d/1960))-d)){i.timeoutHandle=_l(Pi.bind(null,i,Jt,oo),d);break}Pi(i,Jt,oo);break;default:throw Error(N(329))}}}return Kt(i,_t()),i.callbackNode===c?ic.bind(null,i):null}function rc(i,a){var c=Fr;return i.current.memoizedState.isDehydrated&&(Eo(i,a).flags|=256),2!==(i=aa(i,a))&&(a=Jt,Jt=c,null!==a&&mn(a)),i}function mn(i){null===Jt?Jt=i:Jt.push.apply(Jt,i)}function $n(i,a){for(a&=~oc,i.suspendedLanes|=a&=~ta,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Nn(a),d=1<<c;i[c]=-1,a&=~d}}function ra(i){if(6&Re)throw Error(N(327));Io();var a=os(i,0);if(!(1&a))return Kt(i,_t()),null;var c=aa(i,a);if(0!==i.tag&&2===c){var d=Ha(i);0!==d&&(a=d,c=rc(i,d))}if(1===c)throw c=Tr,Eo(i,0),$n(i,a),Kt(i,_t()),c;if(6===c)throw Error(N(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Pi(i,Jt,oo),Kt(i,_t()),null}function sa(i,a){var c=Re;Re|=1;try{return i(a)}finally{0===(Re=c)&&(Bi=_t()+500,js&&go())}}function ui(i){null!==No&&0===No.tag&&!(6&Re)&&Io();var a=Re;Re|=1;var c=Yt.transition,d=Le;try{if(Yt.transition=null,Le=1,i)return i()}finally{Le=d,Yt.transition=c,!(6&(Re=a))&&go()}}function sc(){dt=zi.current,Je(zi)}function Eo(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(-1!==c&&(i.timeoutHandle=-1,qp(c)),null!==Qe)for(c=Qe.return;null!==c;){var d=c;switch(xl(d),d.tag){case 1:null!=(d=d.type.childContextTypes)&&Fs();break;case 3:Ti(),Je(rn),Je(Bt),Ps();break;case 5:Al(d);break;case 4:Ti();break;case 13:case 19:Je(rt);break;case 10:wl(d.type._context);break;case 22:case 23:sc()}c=c.return}if(vt=i,Qe=i=Ao(i.current,null),yt=dt=a,It=0,Tr=null,oc=ta=si=0,Jt=Fr=null,null!==Ko){for(a=0;a<Ko.length;a++)if(null!==(d=(c=Ko[a]).interleaved)){c.interleaved=null;var h=c.pending;if(null!==h){var b=h.next;h.next=d.next,d.next=b}c.pending=d}Ko=null}return i}function ac(i,a){for(;;){var c=Qe;try{if(kl(),ei.current=Ws,Ls){for(var d=st.memoizedState;null!==d;){var m=d.queue;null!==m&&(m.pending=null),d=d.next}Ls=!1}if(ti=0,jt=Et=st=null,xr=!1,Fi=0,ea.current=null,null===c||null===c.return){It=1,Tr=a,Qe=null;break}e:{var h=i,b=c.return,k=c,F=a;if(a=yt,k.flags|=32768,null!==F&&"object"==typeof F&&"function"==typeof F.then){var V=F,q=k,K=q.tag;if(!(1&q.mode||0!==K&&11!==K&&15!==K)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var pe=Cn(b);if(null!==pe){pe.flags&=-257,yd(pe,b,k,0,a),1&pe.mode&&ji(h,V,a),F=V;var _e=(a=pe).updateQueue;if(null===_e){var fe=new Set;fe.add(F),a.updateQueue=fe}else _e.add(F);break e}if(!(1&a)){ji(h,V,a),Md();break e}F=Error(N(426))}else if(Ke&&1&k.mode){var bt=Cn(b);if(null!==bt){!(65536&bt.flags)&&(bt.flags|=256),yd(bt,b,k,0,a),_r(Ri(F,k));break e}}h=F=Ri(F,k),4!==It&&(It=2),null===Fr?Fr=[h]:Fr.push(h),h=b;do{switch(h.tag){case 3:h.flags|=65536,h.lanes|=a&=-a,Zu(h,Ll(0,F,a));break e;case 1:k=F;var D=h.stateNode;if(!(128&h.flags||"function"!=typeof h.type.getDerivedStateFromError&&(null===D||"function"!=typeof D.componentDidCatch||null!==io&&io.has(D)))){h.flags|=65536,h.lanes|=a&=-a,Zu(h,vd(h,k,a));break e}}h=h.return}while(null!==h)}mf(c)}catch(he){a=he,Qe===c&&null!==c&&(Qe=c=c.return);continue}break}}function jd(){var i=Vi.current;return Vi.current=Ws,null===i?Ws:i}function Md(){(0===It||3===It||2===It)&&(It=4),null===vt||!(268435455&si)&&!(268435455&ta)||$n(vt,yt)}function aa(i,a){var c=Re;Re|=2;var d=jd();for((vt!==i||yt!==a)&&(oo=null,Eo(i,a));;)try{$d();break}catch(m){ac(i,m)}if(kl(),Re=c,Vi.current=d,null!==Qe)throw Error(N(261));return vt=null,yt=0,It}function $d(){for(;null!==Qe;)lc(Qe)}function Gd(){for(;null!==Qe&&!fp();)lc(Qe)}function lc(i){var a=Od(i.alternate,i,dt);i.memoizedProps=i.pendingProps,null===a?mf(i):Qe=a,ea.current=null}function mf(i){var a=i;do{var c=a.alternate;if(i=a.return,32768&a.flags){if(null!==(c=kd(c,a)))return c.flags&=32767,void(Qe=c);if(null===i)return It=6,void(Qe=null);i.flags|=32768,i.subtreeFlags=0,i.deletions=null}else if(null!==(c=Jl(c,a,dt)))return void(Qe=c);if(null!==(a=a.sibling))return void(Qe=a);Qe=a=i}while(null!==a);0===It&&(It=5)}function Pi(i,a,c){var d=Le,m=Yt.transition;try{Yt.transition=null,Le=1,function cc(i,a,c,d){do{Io()}while(null!==No);if(6&Re)throw Error(N(327));var m=i.finishedLanes;if(null===(c=i.finishedWork))return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(N(177));i.callbackNode=null,i.callbackPriority=0;var h=c.lanes|c.childLanes;if(function Ot(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<c;){var m=31-Nn(c),h=1<<m;a[m]=0,d[m]=-1,i[m]=-1,c&=~h}}(i,h),i===vt&&(Qe=vt=null,yt=0),!(2064&c.subtreeFlags)&&!(2064&c.flags)||li||(li=!0,Vd(Qr,function(){return Io(),null})),h=!!(15990&c.flags),15990&c.subtreeFlags||h){h=Yt.transition,Yt.transition=null;var b=Le;Le=1;var k=Re;Re|=4,ea.current=null,function Ql(i,a){if(pl=rs,al(i=xs())){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else{var d=(c=(c=i.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var m=d.anchorOffset,h=d.focusNode;d=d.focusOffset;var b=0,k=-1,F=-1,V=0,q=0,K=i,W=null;t:for(;;){for(var pe;K!==c||0!==m&&3!==K.nodeType||(k=b+m),K!==h||0!==d&&3!==K.nodeType||(F=b+d),3===K.nodeType&&(b+=K.nodeValue.length),null!==(pe=K.firstChild);)W=K,K=pe;for(;;){if(K===i)break t;if(W===c&&++V===m&&(k=b),W===h&&++q===d&&(F=b),null!==(pe=K.nextSibling))break;W=(K=W).parentNode}K=pe}c=-1===k||-1===F?null:{start:k,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(fl={focusedElem:i,selectionRange:c},rs=!1,me=a;null!==me;)if(i=(a=me).child,1028&a.subtreeFlags&&null!==i)i.return=a,me=i;else for(;null!==me;){a=me;try{var _e=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==_e){var fe=_e.memoizedProps,bt=_e.memoizedState,G=a.stateNode,R=G.getSnapshotBeforeUpdate(a.elementType===a.type?fe:An(a.type,fe),bt);G.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var D=a.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(N(163))}}catch(ne){pt(a,a.return,ne)}if(null!==(i=a.sibling)){i.return=a.return,me=i;break}me=a.return}_e=Kl,Kl=!1}(i,c),Ed(c,i),Xp(fl),rs=!!pl,fl=pl=null,i.current=c,ff(c,i,m),mp(),Re=k,Le=b,Yt.transition=h}else i.current=c;if(li&&(li=!1,No=i,ci=m),0===(h=i.pendingLanes)&&(io=null),function gp(i){if(Vn&&"function"==typeof Vn.onCommitFiberRoot)try{Vn.onCommitFiberRoot(es,i,void 0,!(128&~i.current.flags))}catch{}}(c.stateNode),Kt(i,_t()),null!==a)for(d=i.onRecoverableError,c=0;c<a.length;c++)d((m=a[c]).value,{componentStack:m.stack,digest:m.digest});if(Rr)throw Rr=!1,i=ai,ai=null,i;1&ci&&0!==i.tag&&Io(),1&(h=i.pendingLanes)?i===oa?Mt++:(Mt=0,oa=i):Mt=0,go()}(i,a,c,d)}finally{Yt.transition=m,Le=d}return null}function Io(){if(null!==No){var i=Qc(ci),a=Yt.transition,c=Le;try{if(Yt.transition=null,Le=16>i?16:i,null===No)var d=!1;else{if(i=No,No=null,ci=0,6&Re)throw Error(N(331));var m=Re;for(Re|=4,me=i.current;null!==me;){var h=me,b=h.child;if(16&me.flags){var k=h.deletions;if(null!==k){for(var F=0;F<k.length;F++){var V=k[F];for(me=V;null!==me;){var q=me;switch(q.tag){case 0:case 11:case 15:wo(8,q,h)}var K=q.child;if(null!==K)K.return=q,me=K;else for(;null!==me;){var W=(q=me).sibling,pe=q.return;if(Rn(q),q===V){me=null;break}if(null!==W){W.return=pe,me=W;break}me=pe}}}var _e=h.alternate;if(null!==_e){var fe=_e.child;if(null!==fe){_e.child=null;do{var bt=fe.sibling;fe.sibling=null,fe=bt}while(null!==fe)}}me=h}}if(2064&h.subtreeFlags&&null!==b)b.return=h,me=b;else e:for(;null!==me;){if(2048&(h=me).flags)switch(h.tag){case 0:case 11:case 15:wo(9,h,h.return)}var G=h.sibling;if(null!==G){G.return=h.return,me=G;break e}me=h.return}}var R=i.current;for(me=R;null!==me;){var D=(b=me).child;if(2064&b.subtreeFlags&&null!==D)D.return=b,me=D;else e:for(b=R;null!==me;){if(2048&(k=me).flags)try{switch(k.tag){case 0:case 11:case 15:ri(9,k)}}catch(he){pt(k,k.return,he)}if(k===b){me=null;break e}var ne=k.sibling;if(null!==ne){ne.return=k.return,me=ne;break e}me=k.return}}if(Re=m,go(),Vn&&"function"==typeof Vn.onPostCommitFiberRoot)try{Vn.onPostCommitFiberRoot(es,i)}catch{}d=!0}return d}finally{Le=c,Yt.transition=a}}return!1}function Dd(i,a,c){i=bo(i,a=Ll(0,a=Ri(c,a),1),1),a=$t(),null!==i&&(Qi(i,1,a),Kt(i,a))}function pt(i,a,c){if(3===i.tag)Dd(i,i,c);else for(;null!==a;){if(3===a.tag){Dd(a,i,c);break}if(1===a.tag){var d=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===io||!io.has(d))){a=bo(a,i=vd(a,i=Ri(c,i),1),1),i=$t(),null!==a&&(Qi(a,1,i),Kt(a,i));break}}a=a.return}}function _f(i,a,c){var d=i.pingCache;null!==d&&d.delete(a),a=$t(),i.pingedLanes|=i.suspendedLanes&c,vt===i&&(yt&c)===c&&(4===It||3===It&&(130023424&yt)===yt&&500>_t()-na?Eo(i,0):oc|=c),Kt(i,a)}function uc(i,a){0===a&&(1&i.mode?(a=ns,!(130023424&(ns<<=1))&&(ns=4194304)):a=1);var c=$t();null!==(i=Pn(i,a))&&(Qi(i,a,c),Kt(i,c))}function hf(i){var a=i.memoizedState,c=0;null!==a&&(c=a.retryLane),uc(i,c)}function gf(i,a){var c=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;null!==m&&(c=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(N(314))}null!==d&&d.delete(a),uc(i,c)}function Vd(i,a){return Wc(i,a)}function vf(i,a,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(i,a,c,d){return new vf(i,a,c,d)}function dc(i){return!(!(i=i.prototype)||!i.isReactComponent)}function Ao(i,a){var c=i.alternate;return null===c?((c=wn(i.tag,a,i.key,i.mode)).elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&i.flags,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,c.dependencies=null===(a=i.dependencies)?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function la(i,a,c,d,m,h){var b=2;if(d=i,"function"==typeof i)dc(i)&&(b=1);else if("string"==typeof i)b=5;else e:switch(i){case ct:return di(c.children,m,h,a);case Dn:b=8,m|=8;break;case _n:return(i=wn(12,c,a,2|m)).elementType=_n,i.lanes=h,i;case tn:return(i=wn(13,c,a,m)).elementType=tn,i.lanes=h,i;case nn:return(i=wn(19,c,a,m)).elementType=nn,i.lanes=h,i;case ke:return ca(c,m,h,a);default:if("object"==typeof i&&null!==i)switch(i.$$typeof){case hn:b=10;break e;case gn:b=9;break e;case vn:b=11;break e;case Jn:b=14;break e;case ee:b=16,d=null;break e}throw Error(N(130,null==i?i:typeof i,""))}return(a=wn(b,c,a,m)).elementType=i,a.type=d,a.lanes=h,a}function di(i,a,c,d){return(i=wn(7,i,d,a)).lanes=c,i}function ca(i,a,c,d){return(i=wn(22,i,d,a)).elementType=ke,i.lanes=c,i.stateNode={isHidden:!1},i}function pc(i,a,c){return(i=wn(6,i,null,a)).lanes=c,i}function fc(i,a,c){return(a=wn(4,null!==i.children?i.children:[],i.key,a)).lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function bf(i,a,c,d,m){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wa(0),this.expirationTimes=Wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function mc(i,a,c,d,m,h,b,k,F){return i=new bf(i,a,c,k,F),1===a?(a=1,!0===h&&(a|=8)):a=0,h=wn(3,null,null,a),i.current=h,h.stateNode=i,h.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ai(h),i}function zd(i){if(!i)return ho;e:{if(Go(i=i._reactInternals)!==i||1!==i.tag)throw Error(N(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(sn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(N(171))}if(1===i.tag){var c=i.type;if(sn(c))return zu(i,c,a)}return a}function Bd(i,a,c,d,m,h,b,k,F){return(i=mc(c,d,!0,i,0,h,0,k,F)).context=zd(null),c=i.current,(h=no(d=$t(),m=ln(c))).callback=a??null,bo(c,h,m),i.current.lanes=m,Qi(i,m,d),Kt(i,d),i}function ua(i,a,c,d){var m=a.current,h=$t(),b=ln(m);return c=zd(c),null===a.context?a.context=c:a.pendingContext=c,(a=no(h,b)).payload={element:i},null!==(d=void 0===d?null:d)&&(a.callback=d),null!==(i=bo(m,a,b))&&(Vt(i,m,b,h),Vs(i,m,b)),b}function da(i){return(i=i.current).child?i.child.stateNode:null}function Pd(i,a){if(null!==(i=i.memoizedState)&&null!==i.dehydrated){var c=i.retryLane;i.retryLane=0!==c&&c<a?c:a}}function _c(i,a){Pd(i,a),(i=i.alternate)&&Pd(i,a)}Od=function(i,a,c){if(null!==i)if(i.memoizedProps!==a.pendingProps||rn.current)Lt=!0;else{if(!(i.lanes&c||128&a.flags))return Lt=!1,function pf(i,a,c){switch(a.tag){case 3:Tn(a),Wo();break;case 5:Ju(a);break;case 1:sn(a.type)&&Rs(a);break;case 4:Il(a,a.stateNode.containerInfo);break;case 10:var d=a.type._context,m=a.memoizedProps.value;We(Os,d._currentValue),d._currentValue=m;break;case 13:if(null!==(d=a.memoizedState))return null!==d.dehydrated?(We(rt,1&rt.current),a.flags|=128,null):c&a.child.childLanes?Zl(i,a,c):(We(rt,1&rt.current),null!==(i=Fn(i,a,c))?i.sibling:null);We(rt,1&rt.current);break;case 19:if(d=!!(c&a.childLanes),128&i.flags){if(d)return Gi(i,a,c);a.flags|=128}if(null!==(m=a.memoizedState)&&(m.rendering=null,m.tail=null,m.lastEffect=null),We(rt,rt.current),d)break;return null;case 22:case 23:return a.lanes=0,Yl(i,a,c)}return Fn(i,a,c)}(i,a,c);Lt=!!(131072&i.flags)}else Lt=!1,Ke&&1048576&a.flags&&nf(a,Ei,a.index);switch(a.lanes=0,a.tag){case 2:var d=a.type;wr(i,a),i=a.pendingProps;var m=ki(a,Bt.current);Ii(a,c),m=Rl(null,a,d,i,m,c);var h=xo();return a.flags|=1,"object"==typeof m&&null!==m&&"function"==typeof m.render&&void 0===m.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,sn(d)?(h=!0,Rs(a)):h=!1,a.memoizedState=null!=m.state?m.state:null,Ai(a),m.updater=Zs,a.stateNode=m,m._reactInternals=a,Bl(a,d,i,c),a=Wl(null,a,d,!0,h,c)):(a.tag=0,Ke&&h&&bl(a),kt(null,a,m,c),a=a.child),a;case 16:d=a.elementType;e:{switch(wr(i,a),i=a.pendingProps,d=(m=d._init)(d._payload),a.type=d,m=a.tag=function yf(i){if("function"==typeof i)return dc(i)?1:0;if(null!=i){if((i=i.$$typeof)===vn)return 11;if(i===Jn)return 14}return 2}(d),i=An(d,i),m){case 0:a=Hl(null,a,d,i,c);break e;case 1:a=Cd(null,a,d,i,c);break e;case 11:a=Ul(null,a,d,i,c);break e;case 14:a=Xl(null,a,d,An(d.type,i),c);break e}throw Error(N(306,d,""))}return a;case 0:return m=a.pendingProps,Hl(i,a,d=a.type,m=a.elementType===d?m:An(d,m),c);case 1:return m=a.pendingProps,Cd(i,a,d=a.type,m=a.elementType===d?m:An(d,m),c);case 3:e:{if(Tn(a),null===i)throw Error(N(387));d=a.pendingProps,m=(h=a.memoizedState).element,Wu(i,a),zs(a,d,null,c);var b=a.memoizedState;if(d=b.element,h.isDehydrated){if(a.updateQueue.baseState=h={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},a.memoizedState=h,256&a.flags){a=ni(i,a,d,c,m=Ri(Error(N(423)),a));break e}if(d!==m){a=ni(i,a,d,c,m=Ri(Error(N(424)),a));break e}for(an=mo(a.stateNode.containerInfo.firstChild),pn=a,Ke=!0,In=null,c=Yu(a,null,d,c),a.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(Wo(),d===m){a=Fn(i,a,c);break e}kt(i,a,d,c)}a=a.child}return a;case 5:return Ju(a),null===i&&$s(a),h=null!==i?i.memoizedProps:null,b=(m=a.pendingProps).children,ml(d=a.type,m)?b=null:null!==h&&ml(d,h)&&(a.flags|=32),xd(i,a),kt(i,a,b,c),a.child;case 6:return null===i&&$s(a),null;case 13:return Zl(i,a,c);case 4:return Il(a,a.stateNode.containerInfo),d=a.pendingProps,null===i?a.child=qo(a,null,d,c):kt(i,a,d,c),a.child;case 11:return m=a.pendingProps,Ul(i,a,d=a.type,m=a.elementType===d?m:An(d,m),c);case 7:return kt(i,a,a.pendingProps,c),a.child;case 8:case 12:return kt(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.memoizedProps,b=(m=a.pendingProps).value,We(Os,(d=a.type._context)._currentValue),d._currentValue=b,null!==h)if(Ge(h.value,b)){if(h.children===m.children&&!rn.current){a=Fn(i,a,c);break e}}else for(null!==(h=a.child)&&(h.return=a);null!==h;){var k=h.dependencies;if(null!==k){b=h.child;for(var F=k.firstContext;null!==F;){if(F.context===d){if(1===h.tag){(F=no(-1,c&-c)).tag=2;var V=h.updateQueue;if(null!==V){var q=(V=V.shared).pending;null===q?F.next=F:(F.next=q.next,q.next=F),V.pending=F}}h.lanes|=c,null!==(F=h.alternate)&&(F.lanes|=c),Nl(h.return,c,a),k.lanes|=c;break}F=F.next}}else if(10===h.tag)b=h.type===a.type?null:h.child;else if(18===h.tag){if(null===(b=h.return))throw Error(N(341));b.lanes|=c,null!==(k=b.alternate)&&(k.lanes|=c),Nl(b,c,a),b=h.sibling}else b=h.child;if(null!==b)b.return=h;else for(b=h;null!==b;){if(b===a){b=null;break}if(null!==(h=b.sibling)){h.return=b.return,b=h;break}b=b.return}h=b}kt(i,a,m.children,c),a=a.child}return a;case 9:return m=a.type,d=a.pendingProps.children,Ii(a,c),d=d(m=bn(m)),a.flags|=1,kt(i,a,d,c),a.child;case 14:return m=An(d=a.type,a.pendingProps),Xl(i,a,d,m=An(d.type,m),c);case 15:return bd(i,a,a.type,a.pendingProps,c);case 17:return m=a.pendingProps,m=a.elementType===(d=a.type)?m:An(d,m),wr(i,a),a.tag=1,sn(d)?(i=!0,Rs(a)):i=!1,Ii(a,c),zl(a,d,m),Bl(a,d,m,c),Wl(null,a,d,!0,i,c);case 19:return Gi(i,a,c);case 22:return Yl(i,a,c)}throw Error(N(156,a.tag))};var Ld="function"==typeof reportError?reportError:function(i){console.error(i)};function hc(i){this._internalRoot=i}function pa(i){this._internalRoot=i}function gc(i){return!(!i||1!==i.nodeType&&9!==i.nodeType&&11!==i.nodeType)}function fa(i){return!(!i||1!==i.nodeType&&9!==i.nodeType&&11!==i.nodeType&&(8!==i.nodeType||" react-mount-point-unstable "!==i.nodeValue))}function Ud(){}function ma(i,a,c,d,m){var h=c._reactRootContainer;if(h){var b=h;if("function"==typeof m){var k=m;m=function(){var F=da(b);k.call(F)}}ua(a,b,i,m)}else b=function Sf(i,a,c,d,m){if(m){if("function"==typeof d){var h=d;d=function(){var V=da(b);h.call(V)}}var b=Bd(a,d,i,0,null,!1,0,"",Ud);return i._reactRootContainer=b,i[Qn]=b.current,dr(8===i.nodeType?i.parentNode:i),ui(),b}for(;m=i.lastChild;)i.removeChild(m);if("function"==typeof d){var k=d;d=function(){var V=da(F);k.call(V)}}var F=mc(i,0,!1,null,0,!1,0,"",Ud);return i._reactRootContainer=F,i[Qn]=F.current,dr(8===i.nodeType?i.parentNode:i),ui(function(){ua(a,F,c,d)}),F}(c,a,i,m,d);return da(b)}pa.prototype.render=hc.prototype.render=function(i){var a=this._internalRoot;if(null===a)throw Error(N(409));ua(i,a,null,null)},pa.prototype.unmount=hc.prototype.unmount=function(){var i=this._internalRoot;if(null!==i){this._internalRoot=null;var a=i.containerInfo;ui(function(){ua(null,i,null,null)}),a[Qn]=null}},pa.prototype.unstable_scheduleHydration=function(i){if(i){var a=nu();i={blockedOn:null,target:i,priority:a};for(var c=0;c<po.length&&0!==a&&a<po[c].priority;c++);po.splice(c,0,i),0===c&&Qa(i)}},eu=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=Ki(a.pendingLanes);0!==c&&(is(a,1|c),Kt(a,_t()),!(6&Re)&&(Bi=_t()+500,go()))}break;case 13:ui(function(){var d=Pn(i,1);if(null!==d){var m=$t();Vt(d,i,1,m)}}),_c(i,1)}},Za=function(i){if(13===i.tag){var a=Pn(i,134217728);null!==a&&Vt(a,i,134217728,$t()),_c(i,134217728)}},tu=function(i){if(13===i.tag){var a=ln(i),c=Pn(i,a);null!==c&&Vt(c,i,a,$t()),_c(i,a)}},nu=function(){return Le},ou=function(i,a){var c=Le;try{return Le=i,a()}finally{Le=c}},Ba=function(i,a,c){switch(a){case"input":if(Ma(i,c),a=c.name,"radio"===c.type&&null!=a){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==i&&d.form===i.form){var m=Ts(d);if(!m)throw Error(N(90));Ac(d),Ma(d,m)}}}break;case"textarea":Mc(i,c);break;case"select":null!=(a=c.value)&&$o(i,!!c.multiple,a,!1)}},Pc=sa,Pa=ui;var kf={usingClientEntryPoint:!1,Events:[fr,Ci,Ts,zc,Bc,sa]},Mr={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xd={bundleType:Mr.bundleType,version:Mr.version,rendererPackageName:Mr.rendererPackageName,rendererConfig:Mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return null===(i=Yc(i))?null:i.stateNode},findFiberByHostInstance:Mr.findFiberByHostInstance||function Cf(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{es=_a.inject(Xd),Vn=_a}catch{}}oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kf,oe.createPortal=function(i,a){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gc(a))throw Error(N(200));return function xf(i,a,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$e,key:null==d?null:""+d,children:i,containerInfo:a,implementation:c}}(i,a,null,c)},oe.createRoot=function(i,a){if(!gc(i))throw Error(N(299));var c=!1,d="",m=Ld;return null!=a&&(!0===a.unstable_strictMode&&(c=!0),void 0!==a.identifierPrefix&&(d=a.identifierPrefix),void 0!==a.onRecoverableError&&(m=a.onRecoverableError)),a=mc(i,1,!1,null,0,c,0,d,m),i[Qn]=a.current,dr(8===i.nodeType?i.parentNode:i),new hc(a)},oe.findDOMNode=function(i){if(null==i)return null;if(1===i.nodeType)return i;var a=i._reactInternals;if(void 0===a)throw"function"==typeof i.render?Error(N(188)):(i=Object.keys(i).join(","),Error(N(268,i)));return null===(i=Yc(a))?null:i.stateNode},oe.flushSync=function(i){return ui(i)},oe.hydrate=function(i,a,c){if(!fa(a))throw Error(N(200));return ma(null,i,a,!0,c)},oe.hydrateRoot=function(i,a,c){if(!gc(i))throw Error(N(405));var d=null!=c&&c.hydratedSources||null,m=!1,h="",b=Ld;if(null!=c&&(!0===c.unstable_strictMode&&(m=!0),void 0!==c.identifierPrefix&&(h=c.identifierPrefix),void 0!==c.onRecoverableError&&(b=c.onRecoverableError)),a=Bd(a,null,i,1,c??null,m,0,h,b),i[Qn]=a.current,dr(i),d)for(i=0;i<d.length;i++)m=(m=(c=d[i])._getVersion)(c._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new pa(a)},oe.render=function(i,a,c){if(!fa(a))throw Error(N(200));return ma(null,i,a,!1,c)},oe.unmountComponentAtNode=function(i){if(!fa(i))throw Error(N(40));return!!i._reactRootContainer&&(ui(function(){ma(null,null,i,!1,function(){i._reactRootContainer=null,i[Qn]=null})}),!0)},oe.unstable_batchedUpdates=sa,oe.unstable_renderSubtreeIntoContainer=function(i,a,c,d){if(!fa(c))throw Error(N(200));if(null==i||void 0===i._reactInternals)throw Error(N(38));return ma(i,a,c,!1,d)},oe.version="18.3.1-next-f1338f8080-20240426"},2663:(en,oe,se)=>{var z=se(6046);oe.H=z.createRoot},6046:(en,oe,se)=>{(function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(z){console.error(z)}})(),en.exports=se(7578)},330:(en,oe)=>{var se=Symbol.for("react.element"),f=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),ft=Symbol.for("react.profiler"),Nt=Symbol.for("react.provider"),Wt=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),dn=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Me=Symbol.iterator,e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},He=Object.assign,mt={};function ge(j,Z,we){this.props=j,this.context=Z,this.refs=mt,this.updater=we||e}function Ae(){}function Zt(j,Z,we){this.props=j,this.context=Z,this.refs=mt,this.updater=we||e}ge.prototype.isReactComponent={},ge.prototype.setState=function(j,Z){if("object"!=typeof j&&"function"!=typeof j&&null!=j)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},ge.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")},Ae.prototype=ge.prototype;var St=Zt.prototype=new Ae;St.constructor=Zt,He(St,ge.prototype),St.isPureReactComponent=!0;var Gt=Array.isArray,Pe=Object.prototype.hasOwnProperty,Dt={current:null},$e={key:!0,ref:!0,__self:!0,__source:!0};function ct(j,Z,we){var Ee,Fe={},Xe=null,it=null;if(null!=Z)for(Ee in void 0!==Z.ref&&(it=Z.ref),void 0!==Z.key&&(Xe=""+Z.key),Z)Pe.call(Z,Ee)&&!$e.hasOwnProperty(Ee)&&(Fe[Ee]=Z[Ee]);var ut=arguments.length-2;if(1===ut)Fe.children=we;else if(1<ut){for(var ze=Array(ut),on=0;on<ut;on++)ze[on]=arguments[on+2];Fe.children=ze}if(j&&j.defaultProps)for(Ee in ut=j.defaultProps)void 0===Fe[Ee]&&(Fe[Ee]=ut[Ee]);return{$$typeof:se,type:j,key:Xe,ref:it,props:Fe,_owner:Dt.current}}function _n(j){return"object"==typeof j&&null!==j&&j.$$typeof===se}var gn=/\/+/g;function vn(j,Z){return"object"==typeof j&&null!==j&&null!=j.key?function hn(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(we){return Z[we]})}(""+j.key):Z.toString(36)}function tn(j,Z,we,Ee,Fe){var Xe=typeof j;("undefined"===Xe||"boolean"===Xe)&&(j=null);var it=!1;if(null===j)it=!0;else switch(Xe){case"string":case"number":it=!0;break;case"object":switch(j.$$typeof){case se:case f:it=!0}}if(it)return Fe=Fe(it=j),j=""===Ee?"."+vn(it,0):Ee,Gt(Fe)?(we="",null!=j&&(we=j.replace(gn,"$&/")+"/"),tn(Fe,Z,we,"",function(on){return on})):null!=Fe&&(_n(Fe)&&(Fe=function Dn(j,Z){return{$$typeof:se,type:j.type,key:Z,ref:j.ref,props:j.props,_owner:j._owner}}(Fe,we+(!Fe.key||it&&it.key===Fe.key?"":(""+Fe.key).replace(gn,"$&/")+"/")+j)),Z.push(Fe)),1;if(it=0,Ee=""===Ee?".":Ee+":",Gt(j))for(var ut=0;ut<j.length;ut++){var ze=Ee+vn(Xe=j[ut],ut);it+=tn(Xe,Z,we,ze,Fe)}else if(ze=function Be(j){return null===j||"object"!=typeof j?null:"function"==typeof(j=Me&&j[Me]||j["@@iterator"])?j:null}(j),"function"==typeof ze)for(j=ze.call(j),ut=0;!(Xe=j.next()).done;)it+=tn(Xe=Xe.value,Z,we,ze=Ee+vn(Xe,ut++),Fe);else if("object"===Xe)throw Z=String(j),Error("Objects are not valid as a React child (found: "+("[object Object]"===Z?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return it}function nn(j,Z,we){if(null==j)return j;var Ee=[],Fe=0;return tn(j,Ee,"","",function(Xe){return Z.call(we,Xe,Fe++)}),Ee}function Jn(j){if(-1===j._status){var Z=j._result;(Z=Z()).then(function(we){(0===j._status||-1===j._status)&&(j._status=1,j._result=we)},function(we){(0===j._status||-1===j._status)&&(j._status=2,j._result=we)}),-1===j._status&&(j._status=0,j._result=Z)}if(1===j._status)return j._result.default;throw j._result}var ee={current:null},ke={transition:null},Ie={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:ke,ReactCurrentOwner:Dt};function Ve(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:nn,forEach:function(j,Z,we){nn(j,function(){Z.apply(this,arguments)},we)},count:function(j){var Z=0;return nn(j,function(){Z++}),Z},toArray:function(j){return nn(j,function(Z){return Z})||[]},only:function(j){if(!_n(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},oe.Component=ge,oe.Fragment=z,oe.Profiler=ft,oe.PureComponent=Zt,oe.StrictMode=N,oe.Suspense=tt,oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,oe.act=Ve,oe.cloneElement=function(j,Z,we){if(null==j)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ee=He({},j.props),Fe=j.key,Xe=j.ref,it=j._owner;if(null!=Z){if(void 0!==Z.ref&&(Xe=Z.ref,it=Dt.current),void 0!==Z.key&&(Fe=""+Z.key),j.type&&j.type.defaultProps)var ut=j.type.defaultProps;for(ze in Z)Pe.call(Z,ze)&&!$e.hasOwnProperty(ze)&&(Ee[ze]=void 0===Z[ze]&&void 0!==ut?ut[ze]:Z[ze])}var ze=arguments.length-2;if(1===ze)Ee.children=we;else if(1<ze){ut=Array(ze);for(var on=0;on<ze;on++)ut[on]=arguments[on+2];Ee.children=ut}return{$$typeof:se,type:j.type,key:Fe,ref:Xe,props:Ee,_owner:it}},oe.createContext=function(j){return(j={$$typeof:Wt,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Nt,_context:j},j.Consumer=j},oe.createElement=ct,oe.createFactory=function(j){var Z=ct.bind(null,j);return Z.type=j,Z},oe.createRef=function(){return{current:null}},oe.forwardRef=function(j){return{$$typeof:ot,render:j}},oe.isValidElement=_n,oe.lazy=function(j){return{$$typeof:Oe,_payload:{_status:-1,_result:j},_init:Jn}},oe.memo=function(j,Z){return{$$typeof:dn,type:j,compare:void 0===Z?null:Z}},oe.startTransition=function(j){var Z=ke.transition;ke.transition={};try{j()}finally{ke.transition=Z}},oe.unstable_act=Ve,oe.useCallback=function(j,Z){return ee.current.useCallback(j,Z)},oe.useContext=function(j){return ee.current.useContext(j)},oe.useDebugValue=function(){},oe.useDeferredValue=function(j){return ee.current.useDeferredValue(j)},oe.useEffect=function(j,Z){return ee.current.useEffect(j,Z)},oe.useId=function(){return ee.current.useId()},oe.useImperativeHandle=function(j,Z,we){return ee.current.useImperativeHandle(j,Z,we)},oe.useInsertionEffect=function(j,Z){return ee.current.useInsertionEffect(j,Z)},oe.useLayoutEffect=function(j,Z){return ee.current.useLayoutEffect(j,Z)},oe.useMemo=function(j,Z){return ee.current.useMemo(j,Z)},oe.useReducer=function(j,Z,we){return ee.current.useReducer(j,Z,we)},oe.useRef=function(j){return ee.current.useRef(j)},oe.useState=function(j){return ee.current.useState(j)},oe.useSyncExternalStore=function(j,Z,we){return ee.current.useSyncExternalStore(j,Z,we)},oe.useTransition=function(){return ee.current.useTransition()},oe.version="18.3.1"},1395:(en,oe,se)=>{en.exports=se(330)},6290:(en,oe)=>{function se(ee,ke){var Ie=ee.length;ee.push(ke);e:for(;0<Ie;){var Ve=Ie-1>>>1,j=ee[Ve];if(!(0<N(j,ke)))break e;ee[Ve]=ke,ee[Ie]=j,Ie=Ve}}function f(ee){return 0===ee.length?null:ee[0]}function z(ee){if(0===ee.length)return null;var ke=ee[0],Ie=ee.pop();if(Ie!==ke){ee[0]=Ie;e:for(var Ve=0,j=ee.length,Z=j>>>1;Ve<Z;){var we=2*(Ve+1)-1,Ee=ee[we],Fe=we+1,Xe=ee[Fe];if(0>N(Ee,Ie))Fe<j&&0>N(Xe,Ee)?(ee[Ve]=Xe,ee[Fe]=Ie,Ve=Fe):(ee[Ve]=Ee,ee[we]=Ie,Ve=we);else{if(!(Fe<j&&0>N(Xe,Ie)))break e;ee[Ve]=Xe,ee[Fe]=Ie,Ve=Fe}}}return ke}function N(ee,ke){var Ie=ee.sortIndex-ke.sortIndex;return 0!==Ie?Ie:ee.id-ke.id}if("object"==typeof performance&&"function"==typeof performance.now){var ft=performance;oe.unstable_now=function(){return ft.now()}}else{var Nt=Date,Wt=Nt.now();oe.unstable_now=function(){return Nt.now()-Wt}}var ot=[],tt=[],dn=1,Oe=null,Me=3,Be=!1,e=!1,He=!1,mt="function"==typeof setTimeout?setTimeout:null,ge="function"==typeof clearTimeout?clearTimeout:null,Ae=typeof setImmediate<"u"?setImmediate:null;function Zt(ee){for(var ke=f(tt);null!==ke;){if(null===ke.callback)z(tt);else{if(!(ke.startTime<=ee))break;z(tt),ke.sortIndex=ke.expirationTime,se(ot,ke)}ke=f(tt)}}function St(ee){if(He=!1,Zt(ee),!e)if(null!==f(ot))e=!0,nn(Gt);else{var ke=f(tt);null!==ke&&Jn(St,ke.startTime-ee)}}function Gt(ee,ke){e=!1,He&&(He=!1,ge($e),$e=-1),Be=!0;var Ie=Me;try{for(Zt(ke),Oe=f(ot);null!==Oe&&(!(Oe.expirationTime>ke)||ee&&!_n());){var Ve=Oe.callback;if("function"==typeof Ve){Oe.callback=null,Me=Oe.priorityLevel;var j=Ve(Oe.expirationTime<=ke);ke=oe.unstable_now(),"function"==typeof j?Oe.callback=j:Oe===f(ot)&&z(ot),Zt(ke)}else z(ot);Oe=f(ot)}if(null!==Oe)var Z=!0;else{var we=f(tt);null!==we&&Jn(St,we.startTime-ke),Z=!1}return Z}finally{Oe=null,Me=Ie,Be=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var gn,Pe=!1,Dt=null,$e=-1,ct=5,Dn=-1;function _n(){return!(oe.unstable_now()-Dn<ct)}function hn(){if(null!==Dt){var ee=oe.unstable_now();Dn=ee;var ke=!0;try{ke=Dt(!0,ee)}finally{ke?gn():(Pe=!1,Dt=null)}}else Pe=!1}if("function"==typeof Ae)gn=function(){Ae(hn)};else if(typeof MessageChannel<"u"){var vn=new MessageChannel,tn=vn.port2;vn.port1.onmessage=hn,gn=function(){tn.postMessage(null)}}else gn=function(){mt(hn,0)};function nn(ee){Dt=ee,Pe||(Pe=!0,gn())}function Jn(ee,ke){$e=mt(function(){ee(oe.unstable_now())},ke)}oe.unstable_IdlePriority=5,oe.unstable_ImmediatePriority=1,oe.unstable_LowPriority=4,oe.unstable_NormalPriority=3,oe.unstable_Profiling=null,oe.unstable_UserBlockingPriority=2,oe.unstable_cancelCallback=function(ee){ee.callback=null},oe.unstable_continueExecution=function(){e||Be||(e=!0,nn(Gt))},oe.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<ee?Math.floor(1e3/ee):5},oe.unstable_getCurrentPriorityLevel=function(){return Me},oe.unstable_getFirstCallbackNode=function(){return f(ot)},oe.unstable_next=function(ee){switch(Me){case 1:case 2:case 3:var ke=3;break;default:ke=Me}var Ie=Me;Me=ke;try{return ee()}finally{Me=Ie}},oe.unstable_pauseExecution=function(){},oe.unstable_requestPaint=function(){},oe.unstable_runWithPriority=function(ee,ke){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ie=Me;Me=ee;try{return ke()}finally{Me=Ie}},oe.unstable_scheduleCallback=function(ee,ke,Ie){var Ve=oe.unstable_now();switch(Ie="object"==typeof Ie&&null!==Ie&&"number"==typeof(Ie=Ie.delay)&&0<Ie?Ve+Ie:Ve,ee){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return ee={id:dn++,callback:ke,priorityLevel:ee,startTime:Ie,expirationTime:j=Ie+j,sortIndex:-1},Ie>Ve?(ee.sortIndex=Ie,se(tt,ee),null===f(ot)&&ee===f(tt)&&(He?(ge($e),$e=-1):He=!0,Jn(St,Ie-Ve))):(ee.sortIndex=j,se(ot,ee),e||Be||(e=!0,nn(Gt))),ee},oe.unstable_shouldYield=_n,oe.unstable_wrapCallback=function(ee){var ke=Me;return function(){var Ie=Me;Me=ke;try{return ee.apply(this,arguments)}finally{Me=Ie}}}},1605:(en,oe,se)=>{en.exports=se(6290)},2058:(en,oe,se)=>{var f=se(1395),N="function"==typeof Object.is?Object.is:function z(Be,e){return Be===e&&(0!==Be||1/Be==1/e)||Be!=Be&&e!=e},ft=f.useState,Nt=f.useEffect,Wt=f.useLayoutEffect,ot=f.useDebugValue;function dn(Be){var e=Be.getSnapshot;Be=Be.value;try{var He=e();return!N(Be,He)}catch{return!0}}var Me=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function Oe(Be,e){return e()}:function tt(Be,e){var He=e(),mt=ft({inst:{value:He,getSnapshot:e}}),ge=mt[0].inst,Ae=mt[1];return Wt(function(){ge.value=He,ge.getSnapshot=e,dn(ge)&&Ae({inst:ge})},[Be,He,e]),Nt(function(){return dn(ge)&&Ae({inst:ge}),Be(function(){dn(ge)&&Ae({inst:ge})})},[Be]),ot(He),He};oe.useSyncExternalStore=void 0!==f.useSyncExternalStore?f.useSyncExternalStore:Me},7973:(en,oe,se)=>{var f=se(1395),z=se(6485),ft="function"==typeof Object.is?Object.is:function N(Oe,Me){return Oe===Me&&(0!==Oe||1/Oe==1/Me)||Oe!=Oe&&Me!=Me},Nt=z.useSyncExternalStore,Wt=f.useRef,ot=f.useEffect,tt=f.useMemo,dn=f.useDebugValue;oe.useSyncExternalStoreWithSelector=function(Oe,Me,Be,e,He){var mt=Wt(null);if(null===mt.current){var ge={hasValue:!1,value:null};mt.current=ge}else ge=mt.current;mt=tt(function(){function Zt($e){if(!St){if(St=!0,Gt=$e,$e=e($e),void 0!==He&&ge.hasValue){var ct=ge.value;if(He(ct,$e))return Pe=ct}return Pe=$e}if(ct=Pe,ft(Gt,$e))return ct;var Dn=e($e);return void 0!==He&&He(ct,Dn)?(Gt=$e,ct):(Gt=$e,Pe=Dn)}var Gt,Pe,St=!1,Dt=void 0===Be?null:Be;return[function(){return Zt(Me())},null===Dt?void 0:function(){return Zt(Dt())}]},[Me,Be,e,He]);var Ae=Nt(Oe,mt[0],mt[1]);return ot(function(){ge.hasValue=!0,ge.value=Ae},[Ae]),dn(Ae),Ae}},6485:(en,oe,se)=>{en.exports=se(2058)},7528:(en,oe,se)=>{en.exports=se(7973)}}]);