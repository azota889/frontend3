"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[300],{9300:(eo,ne,y)=>{y.r(ne),y.d(ne,{AIModule:()=>Zi});var r=y(9842),v=y(177),x=y(9417),G=y(5245),D=y(8516),Ie=y(4110),Ae=y(7163),ye=y(279),Se=y(3424),V=y(1064),ie=y(8567),xe=y(7005),e=y(3953);const oe=(o,a)=>{let n=null!=localStorage.getItem("currentUser");return n||(0,e.WQX)(G.Ix).navigate(["/login"]),n};var z=y(3617),ke=y(671),B=y(4025),X=y(5312),ae=y(1626);const W=X.c.apiPlatformBaseUrl;let Y=(()=>{var o;class a{constructor(t){(0,r.A)(this,"http",void 0),(0,r.A)(this,"apiUrl",W+"/api/App/"),this.http=t}getList(){return this.http.get(`${this.apiUrl}list`)}getListShare(){return this.http.get(`${this.apiUrl}listShare`)}credit(){return this.http.get(`${this.apiUrl}credit`)}download(t){return this.http.post(`${this.apiUrl}download`,t)}load(t){return this.http.post(`${this.apiUrl}load`,t)}getAppInfo(t){return this.http.get(`${this.apiUrl}getAppInfo/${t}`)}listAppRoute(){return this.http.get(`${this.apiUrl}listAppRoute`)}listApp(){return this.http.get(`${this.apiUrl}listApp`)}runApp(t,i){return this.http.post(`${this.apiUrl}runAsync/`+t+"?stream=1",i)}cancel(t){return this.http.post(`${this.apiUrl}cancel/${t}`,{})}logAppDone(t,i){return this.http.post(`${this.apiUrl}logAppDone/`+t,{data:i})}status(t){return this.http.get(`${this.apiUrl}status/`+t)}history(t){return this.http.get(`${this.apiUrl}history/`+t)}fetchUrl(t){return this.http.post(`${this.apiUrl}fetchUrl`,t)}listCollection(){return this.http.get(`${this.apiUrl}listCollection`)}listVCollection(){return this.http.get(`${this.apiUrl}listVCollection`)}listData(t){return this.http.post(`${this.apiUrl}listData`,t)}delData(t){return this.http.post(`${this.apiUrl}delData`,t)}searchVector(t){return this.http.post(`${this.apiUrl}searchVector`,t)}getConf(t){return this.http.post(`${this.apiUrl}getConf`,{data:t})}getKey(t){return this.http.post(`${this.apiUrl}getKey`,{data:t})}listKeys(){return this.http.get(`${this.apiUrl}listKeys`)}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(ae.Qq))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})(),Te=(()=>{var o;class a{constructor(t){(0,r.A)(this,"http",void 0),(0,r.A)(this,"apiUrl",W+"/api/Admin/"),this.http=t}run(t){return this.http.post(`${this.apiUrl}run`,t)}live(t){return this.http.post(`${this.apiUrl}live`,t)}stream(t,i,s){const l=new EventSource(`${this.apiUrl}stream?t=${t}`);l.onmessage=function(m){m.data.trim().startsWith("[__FINISH__] => ")?s(m.data.substr(16)):i(JSON.parse(m.data))},l.onerror=function(m){l.close(),s("")}}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(ae.Qq))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})();var J=function(o){return o.Text="text",o.ImageUrl="image_url",o}(J||{}),q=y(7687);let se=(()=>{var o;class a{constructor(t){(0,r.A)(this,"commonService",void 0),this.commonService=t}getTypeObjNotice(t){return"NEW_SHARE_CLASS_PERMISSION"==t.type?"L\u1edbp: "+t.classroomName:"NEW_SHARE_HOMEWORK_PERMISSION"==t.type?"B\xe0i t\u1eadp: "+t.homeworkName:"NEW_SHARE_EXAM_PERMISSION"==t.type?"\u0110\u1ec1 thi: "+t.examName:"NEW_SHARE_CATEGORY_PERMISSION"==t.type?"Th\u01b0 m\u1ee5c: "+t.examName:""}getRouterLinkForNoticeObj(t,i){var s=this.redirectToPage(t,!0,i);return"string"==typeof s?s:""}getQueryParamForNoticeObj(t){var i=this.redirectToPage(t,!1);return"object"==typeof i?i:null}redirectToPage(t,i,s){switch(t.type){case"NEW_ANSWER":case"NEW_SHARE_HOMEWORK_PERMISSION":return i?`/admin/testbank/homework-results-list/${t.classroomId}/${t.homeworkId}/${t.homeworkHashId}`:null;case"HAS_MARK":case"NEW_HOMEWORK":case"RESEND_ANSWER":return i?`/bai-tap/${t.homeworkHashId}`:null;case"NEW_EXAM_SUBMIT":return i?`/admin/testbank/test-review/${t.examId}/${t.parentId}/${t.studentId}/${t.examResultId??0}`:null;case"NEW_EXAM":return i?`/de-thi/${t.examHashId}`:"";case"EXAM_HAS_MARK":return i?`/test/answer-test/${t.parentId}/0/${t.examHashId}/${t.examResultId}`:null;case"NEW_SHARE_CLASS_PERMISSION":return 1==t.isMultipleClassroom?i?"/admin/student/manage-classroom/0":"":i?"/admin/student/classroom-details/"+t.classroomId+"/0":"";case"NEW_SHARE_CATEGORY_PERMISSION":return i?`/admin/testbank/document-management/0/${t.examId}/1`:{data:this.commonService.serializeJson({shareType:`user_${t.senderId}`})};case"NEW_SHARE_EXAM_PERMISSION":return i?`/admin/testbank/exam-results-list/0/${t.examId}/0`:null;case"NEW_QA_EXAM_ASK":case"NEW_QA_HOMEWORK_ASK":return i?"/admin/teacher-qa/view-question/"+Number(t.extraDataObj?.qaQuestionId):null;case"NEW_QA_EXAM_ANSWER":case"NEW_QA_HOMEWORK_ANSWER":return i?"/student-qa/view-question/"+Number(t.extraDataObj?.qaQuestionId):null;case"NEW_ASSIGN":return i?"/admin/student/manage-classroom/0":null;case"SHARE_AZOTA_BANK_QUESTION":return i?"/auth/account-setting/0/3?tab=1":null;case"NEW_REQUEST_REAPPROVE":return i?`/admin/student/classroom-details/${t.classroomId}/0`:null;case"NEW_SHARE_PERMISSION":return null;case"NEW_CLASSROOM_NEWS":return i?s?`/student/classroom-details/${t.classroomId}/2`:`/admin/student/classroom-details/${t.classroomId}/2`:null;default:return i?"/student/classroom/0":null}}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(q.R))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})();var K=y(9311),U=y(4823),re=y(9210);let Re=(()=>{var o;class a{redirectToNewLanguage(t){if(t&&t!=this.commonService.getCurrentLang()){let c=this.commonService.getCurrentDomain();var i=c+"/"+this.commonService.getCurrentLang()+"/",s=c+"/"+t+"/",l=this.commonService.getFullCurrentUrl(),m=l.replace(i,s);m!=l&&(this.browserStorageService.saveStorage(this.defaultLangueInLocalStorageKey,t),window.location.replace(m))}}redirectToUserLanguage(){if(this.userService.isLogin()){var t=this.userService.getUserObj();this.redirectToNewLanguage(t.language?t.language:this.commonService.getDefaultLang())}else{var i=this.browserStorageService.getStorage(this.defaultLangueInLocalStorageKey);this.redirectToNewLanguage(i||this.commonService.getDefaultLang())}}constructor(t,i,s){(0,r.A)(this,"commonService",void 0),(0,r.A)(this,"userService",void 0),(0,r.A)(this,"browserStorageService",void 0),(0,r.A)(this,"defaultLangueInLocalStorageKey","switch_language_code"),this.commonService=t,this.userService=i,this.browserStorageService=s}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(q.R),e.KVO(B.R),e.KVO(K.z))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})();var Ce=y(1413);let we=(()=>{var o;class a{logInDev(t,i){if(!X.c.production){if(null!=i&&null!=t)return console.log(t,i);if(null!=i&&null==t)return console.log(i);null!=t&&console.log(t)}}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})(),Z=(()=>{var o;class a{getHeaderReloadNoticeSubscriber(){return this.headerReloadNoticeListener}sendChangeLanguage(t){this._sendMessage({type:"CHANGE_LANGUAGE",status:1,message:"send_from_angular",data:{language:t}})}sendSimpleMessage(t){this._sendMessage({type:t,status:1,message:"send_from_angular",data:{}})}_sendMessage(t){this.aztCustomConsoleLogService.logInDev("To fluter data: ",t),this._sendRawMessage(JSON.stringify(t))}_sendRawMessage(t){try{let i=function je(){return typeof MessageInvoker<"u"?MessageInvoker:void 0}();typeof i<"u"&&i&&(this.aztCustomConsoleLogService.logInDev("Have MessageInvoker"),i.postMessage(t));let s=function Fe(){return typeof flutter_inappwebview<"u"?flutter_inappwebview:void 0}();typeof s<"u"&&s&&(this.aztCustomConsoleLogService.logInDev("Have flutter_inappwebview"),s.callHandler("toFlutter",t))}catch(i){this.aztCustomConsoleLogService.logInDev(void 0,i)}}constructor(t){(0,r.A)(this,"aztCustomConsoleLogService",void 0),(0,r.A)(this,"headerReloadNoticeListener",new Ce.B),this.aztCustomConsoleLogService=t}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(we))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})();var L=y(9115),Q=y(665),M=y(8855);function Me(o,a){1&o&&(e.j41(0,"span",9),e.nrm(1,"azt-loading-ui"),e.k0s())}function Ee(o,a){if(1&o&&(e.j41(0,"button",5),e.DNE(1,Me,2,0,"span",6),e.j41(2,"span",7),e.EFF(3,"\xa0"),e.k0s(),e.nrm(4,"img",8),e.nI1(5,"convertCdnLinkOfGitHub"),e.k0s()),2&o){const n=e.XpG(),t=e.sdS(2);e.Y8G("matMenuTriggerFor",t),e.R7$(),e.Y8G("ngIf",n.statusObj.loading),e.R7$(),e.Y8G("hidden",!n.statusObj.loading),e.R7$(2),e.FS9("alt",n.imgLanguage),e.Y8G("src",e.bMT(5,5,n.imgLanguage),e.B4B)}}function Ne(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",10),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG();return e.Njj(s.switchLanguage(i.value))}),e.nrm(2,"img",11),e.nI1(3,"convertCdnLinkOfGitHub"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&o){const n=a.$implicit;e.R7$(2),e.FS9("alt",n),e.Y8G("src",e.bMT(3,3,n.img),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(5,5,n.label)," ")}}let $e=(()=>{var o;class a extends z.H{getImgLanguage(t){this.imgLanguage=this.listSupportedLanguages.find(i=>i.value==t)?.img??""}initLanguages(){this.listSupportedLanguages=this.supportedLanguagesArr.map(t=>({value:t,label:"lang_core_language_"+t,img:"flag/"+t+".svg"}))}switchLanguage(t){t&&t!=this.commonService.getCurrentLang()&&(this.userService.isLogin()?(this.initStatusObj(),this.waitDestroy(this.userLangService.apiUserLangSwitchLangGet(t).subscribe(i=>{1==i.success?(this.mobileWebviewService.sendChangeLanguage(t),setTimeout(()=>{this.stopStatusObj(),this.switchLanguageService.redirectToNewLanguage(t)},100)):this.errorStatusObj(i.message??"",!0)}))):(this.mobileWebviewService.sendChangeLanguage(t),setTimeout(()=>{this.switchLanguageService.redirectToNewLanguage(t)},100)))}ngOnInit(){this.initLanguages(),this.getImgLanguage(this.commonService.getCurrentLang()),this.imgLanguage||this.getImgLanguage(X.c.defaultLanguage)}constructor(t,i,s,l){super(),(0,r.A)(this,"userService",void 0),(0,r.A)(this,"userLangService",void 0),(0,r.A)(this,"switchLanguageService",void 0),(0,r.A)(this,"mobileWebviewService",void 0),(0,r.A)(this,"imgLanguage",""),(0,r.A)(this,"listSupportedLanguages",[]),this.userService=t,this.userLangService=i,this.switchLanguageService=s,this.mobileWebviewService=l}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(B.R),e.rXU(re.f$),e.rXU(Re),e.rXU(Z))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["azt-switch-language"]],features:[e.Vt3],decls:6,vars:2,consts:[["switchlanguage","matMenu"],["class","btn btn-transparent p-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"dropdown-menu","show","w-32","relative"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"btn","btn-transparent","p-1",3,"matMenuTriggerFor"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[3,"hidden"],[3,"src","alt"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","azt-switch-language-2NtpICqDxdj",1,"dropdown-item",3,"click"],[1,"w-5","h-5","mr-2",3,"src","alt"]],template:function(t,i){1&t&&(e.DNE(0,Ee,6,7,"button",1),e.j41(1,"mat-menu",null,0)(3,"div",2)(4,"ul",3),e.DNE(5,Ne,6,7,"li",4),e.k0s()()()),2&t&&(e.Y8G("ngIf",i.listSupportedLanguages.length>1),e.R7$(5),e.Y8G("ngForOf",i.listSupportedLanguages))},dependencies:[v.Sq,v.bT,L.kk,L.Cp,Q.R,M.wp,M.gt],encapsulation:2})),a})(),Ge=(()=>{var o;class a{mouseEnter(){this.isMousePosition="mouseEnter",window.setTimeout(()=>{"mouseEnter"==this.isMousePosition&&this.menuTrigger?.openMenu()},100)}mouseLeave(){this.isMousePosition="mouseLeave",window.setTimeout(()=>{"mouseLeave"==this.isMousePosition&&this.menuTrigger?.closeMenu()},300)}constructor(t){(0,r.A)(this,"menuTrigger",void 0),(0,r.A)(this,"isMousePosition","mouseLeave"),this.menuTrigger=t}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(L.Cp))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})();var Oe=y(3861),ze=y(2909),le=y(9822),Le=y(4006);let De=(()=>{var o;class a{constructor(t){(0,r.A)(this,"dialog",void 0),(0,r.A)(this,"open",(i,s)=>this.dialog.open(i,s)),(0,r.A)(this,"closeAll",()=>this.dialog.closeAll()),this.dialog=t}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(Le.bZ))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})(),Be=(()=>{var o;class a{removeInvalidChars(t){try{return t?.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")??""}catch{return t??""}}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})();const Pe=(o,a)=>({width:o,height:a}),Ue=(o,a,n)=>({width:o,height:a,borderColor:n}),He=(o,a,n,t)=>({width:o,height:a,"font-size":n,borderColor:t});function Ye(o,a){1&o&&e.nrm(0,"lucide-icon",5)}function Ve(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",2),e.nrm(2,"img",3),e.nI1(3,"mycdn"),e.DNE(4,Ye,1,0,"lucide-icon",4),e.k0s(),e.bVm()),2&o){let n;const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(8,Pe,t.size+"px",t.size+"px")),e.R7$(),e.FS9("matTooltip",t.showTooltip?t.customTooltip?t.customTooltip:t.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!t.showTooltip||!t.customTooltip&&!t.nameCreateAvatar)("src",e.bMT(3,6,t.linkAvatar),e.B4B)("ngStyle",e.sMw(11,Ue,t.size+"px",t.size+"px",null!==(n=t.borderAvatar)&&void 0!==n?n:"")),e.R7$(2),e.Y8G("ngIf",t.showCheckUser)}}function Xe(o,a){1&o&&e.nrm(0,"lucide-icon",5)}function We(o,a){if(1&o&&(e.j41(0,"div",6),e.EFF(1),e.DNE(2,Xe,1,0,"lucide-icon",4),e.k0s()),2&o){let n;const t=e.XpG();e.FS9("matTooltip",t.showTooltip?t.customTooltip?t.customTooltip:t.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!t.showTooltip||!t.customTooltip&&!t.nameCreateAvatar)("ngStyle",e.ziG(5,He,t.size+"px",t.size+"px",(t.size/2>48?48:t.size/2)+"px",null!==(n=t.borderAvatar)&&void 0!==n?n:"")),e.R7$(),e.SpI(" ",t.returnNameAvatar," "),e.R7$(),e.Y8G("ngIf",t.showCheckUser)}}let ce=(()=>{var o;class a extends z.H{createNewAvatar(){try{this.nameCreateAvatar=this.homeworkExamService.removeInvalidChars(this.nameCreateAvatar).trim()}catch{this.nameCreateAvatar=this.nameCreateAvatar}var i=this.commonService.convertVietnameseToEnglish(this.nameCreateAvatar??"").toUpperCase().split(" ");this.returnNameAvatar=1==i.length?i[0]?i[0].charAt(0):"A":i[0]?.charAt(0)+(i[i.length-1]?.charAt(0)??"")}ngOnInit(){this.createNewAvatar()}ngOnChanges(){this.createNewAvatar()}constructor(t){super(),(0,r.A)(this,"homeworkExamService",void 0),(0,r.A)(this,"nameCreateAvatar",void 0),(0,r.A)(this,"linkAvatar",void 0),(0,r.A)(this,"size",0),(0,r.A)(this,"customTooltip",void 0),(0,r.A)(this,"showTooltip",!0),(0,r.A)(this,"showCheckUser",!1),(0,r.A)(this,"borderAvatar",""),(0,r.A)(this,"returnNameAvatar",""),this.homeworkExamService=t}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(Be))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["azt-create-avatar"]],inputs:{nameCreateAvatar:"nameCreateAvatar",linkAvatar:"linkAvatar",size:"size",customTooltip:"customTooltip",showTooltip:"showTooltip",showCheckUser:"showCheckUser",borderAvatar:"borderAvatar"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["elseTemplate",""],[4,"ngIf","ngIfElse"],[3,"ngStyle"],[1,"border","border-slate-200","dark:border-darkmode-400",2,"border-radius","50%",3,"matTooltip","matTooltipDisabled","src","ngStyle"],["name","check","size","11","class","check-user-icon stroke-width-2.5","strokeWidth","2",4,"ngIf"],["name","check","size","11","strokeWidth","2",1,"check-user-icon","stroke-width-2.5"],["id","create-avatar",1,"create-avatar-class","border","border-slate-200","dark:border-darkmode-400",2,"display","inline-flex","justify-content","center","align-items","center","background-color","#dddddd","border-radius","50%","color","#000","font-weight","500","margin","auto",3,"matTooltip","matTooltipDisabled","ngStyle"]],template:function(t,i){if(1&t&&e.DNE(0,Ve,5,15,"ng-container",1)(1,We,3,10,"ng-template",null,0,e.C5r),2&t){const s=e.sdS(2);e.Y8G("ngIf",i.linkAvatar)("ngIfElse",s)}},dependencies:[v.bT,v.B3,U.oV,D.WGl,M.nf],styles:[".check-user-icon[_ngcontent-%COMP%]{align-items:center;height:13px;width:13px;position:absolute;justify-content:center;bottom:-4px;right:0;background:#65ce8c;border-radius:50%;color:#fff}.check-user-icon[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin-bottom:8px;stroke-width:4.5px!important}.w-content[_ngcontent-%COMP%]{margin-left:10px;width:calc(100% - 46px)}.mw-name[_ngcontent-%COMP%]{max-width:calc(100% - 12px - .25rem)}"]})),a})();const F=()=>({"mr-2":!0}),Je=(o,a)=>({"pl-2":o,"px-2":a}),qe=o=>({"max-width":o}),O=o=>[o],Ke=o=>({return_url:o,from:"register",user_click:"true"}),Ze=o=>({return_url:o,user_click:"true"});function Qe(o,a){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"button",7),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.gotoLogin())}),e.nrm(2,"lucide-icon",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()}2&o&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,F)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dang_nhap")," "))}function et(o,a){if(1&o&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"isParentViewOnly"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&o){const n=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"")?e.bMT(3,3,"lang_auto_phu_huynh"):null!=n.userObj&&null!=n.userObj.roles&&n.userObj.roles.includes("TEACHER")?e.bMT(4,5,"lang_auto_giao_vien"):e.bMT(5,7,"lang_auto_hoc_sinh")," ")}}function tt(o,a){if(1&o&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,et,6,9,"div",16),e.k0s()),2&o){const n=e.XpG(2);e.Y8G("ngClass",e.l_i(6,Je,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(9,qe,n.isTqbDomain&&n.isMobileWebView?"80px":"auto")),e.R7$(),e.SpI(" ",n.isAnonymous?e.bMT(3,4,"lang_auto_tai_khoan_an_danh"):null==n.userObj?null:n.userObj.fullName," "),e.R7$(2),e.Y8G("ngIf",!n.isTqbDomain)}}function nt(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",9),e.bIt("mouseenter",function(){e.eBV(n);const i=e.XpG();return e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseEnter())})("mouseleave",function(){e.eBV(n);const i=e.XpG();return e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseLeave())}),e.j41(1,"div",10),e.bIt("click",function(i){e.eBV(n);const s=e.XpG();return e.Njj(s.isMobileWebView?s.avtClick():!s.isMobileDevice&&i.stopPropagation())}),e.j41(2,"div",11),e.nrm(3,"azt-create-avatar",12),e.k0s(),e.DNE(4,tt,5,11,"div",13),e.k0s()()}if(2&o){const n=e.XpG(),t=e.sdS(4);e.Y8G("matMenuTriggerFor",n.isMobileWebView?null:t),e.R7$(3),e.Y8G("nameCreateAvatar",null==n.userObj?null:n.userObj.fullName)("size",32)("showTooltip",n.isMobileDevice)("linkAvatar",null==n.userObj?null:n.userObj.avatar),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice||n.isTqbDomain)}}function it(o,a){if(1&o&&(e.j41(0,"li")(1,"a",24),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",25),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(8,O,e.bMT(2,4,"/auth/register")))("queryParams",e.eq3(10,Ze,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,F)),e.R7$(),e.SpI(" \xa0",e.bMT(5,6,"lang_auto_dang_ky")," ")}}function ot(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,F)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function at(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,F)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function st(o,a){if(1&o){const n=e.RV6();e.qex(0),e.DNE(1,it,6,13,"li",18),e.j41(2,"li")(3,"a",19),e.nI1(4,"navigationLocalize"),e.nrm(5,"lucide-icon",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,ot,5,5,"li",18)(9,at,5,5,"li",18),e.j41(10,"li")(11,"a",20),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.reloadBrowser())}),e.nrm(12,"lucide-icon",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"li"),e.nrm(16,"hr",22),e.k0s(),e.j41(17,"li")(18,"a",23),e.nI1(19,"navigationLocalize"),e.nrm(20,"lucide-icon",8),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.bVm()}if(2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(22,O,e.bMT(4,12,"/auth/login")))("queryParams",e.eq3(24,Ke,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,F)),e.R7$(),e.SpI(" ",e.bMT(7,14,"lang_auto_dang_nhap")," "),e.R7$(2),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(3),e.Y8G("ngClass",e.lJ4(27,F)),e.R7$(),e.SpI(" ",e.bMT(14,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(28,O,e.bMT(19,18,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(30,F)),e.R7$(),e.SpI(" ",e.bMT(22,20,"lang_auto_dang_xuat")," ")}}function rt(o,a){if(1&o&&(e.j41(0,"li")(1,"a",34),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",35),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(7,O,e.bMT(2,3,n.isTeacherDashboard?"/student/classroom/0":"/admin/dashboard"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,F)),e.R7$(),e.SpI(" ",e.bMT(5,5,n.isTeacherDashboard?"lang_auto_vao_man_hoc_sinh":"lang_auto_vao_man_giao_vien")," ")}}function lt(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,F)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function ct(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,F)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function mt(o,a){1&o&&(e.j41(0,"li")(1,"a",36),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&o&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,O,e.bMT(2,3,"/auth/account-setting/0/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,F)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_remove_teacher_role")," "))}function dt(o,a){1&o&&(e.j41(0,"li")(1,"a",38),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&o&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,O,e.bMT(2,3,"/auth/account-setting/1/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,F)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_become_teacher_role")," "))}function pt(o,a){if(1&o){const n=e.RV6();e.DNE(0,rt,6,10,"li",18)(1,lt,5,5,"li",18)(2,ct,5,5,"li",18)(3,mt,6,10,"li",18)(4,dt,6,10,"li",18),e.j41(5,"li")(6,"a",20),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.reloadBrowser())}),e.nrm(7,"lucide-icon",21),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"li"),e.nrm(11,"hr",22),e.k0s(),e.j41(12,"li")(13,"a",30),e.nI1(14,"navigationLocalize"),e.nrm(15,"lucide-icon",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"li")(19,"a",32),e.nI1(20,"navigationLocalize"),e.nrm(21,"lucide-icon",33),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"li")(25,"a",23),e.nI1(26,"navigationLocalize"),e.nrm(27,"lucide-icon",8),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()}if(2&o){const n=e.XpG();e.Y8G("ngIf",n.isTeacherRole),e.R7$(),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(),e.Y8G("ngIf",n.isTeacherDashboard),e.R7$(),e.Y8G("ngIf",!(n.isTeacherRole||n.isTeacherDashboard||n.isBusinessDomain||n.beCreatedStudent)),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,F)),e.R7$(),e.SpI(" ",e.bMT(9,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(31,O,e.bMT(14,18,"/auth/login-scan/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(33,F)),e.R7$(),e.SpI(" ",e.bMT(17,20,"lang_auto_qr_dang_nhap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(34,O,e.bMT(20,22,"/auth/create-qr-forgot-pass/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(36,F)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_auto_tao_qr_quen_mat_khau")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(37,O,e.bMT(26,26,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(39,F)),e.R7$(),e.SpI(" ",e.bMT(29,28,"lang_auto_dang_xuat")," ")}}let ut=(()=>{var o;class a extends z.H{set menuTrigger(t){this.mouseEventObj=new Ge(t)}avtClick(){this.isMobileWebView&&this.redirectService.redirectToPath(`/auth/account-setting/${this.isTeacherDashboard?0:1}/0`)}gotoLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}reloadBrowser(){var i=this.commonService.getCurrentUrl();if(i.match(/(\?|&)+t=(\d)+/)){var s=i.includes("&t=")?i.replace(/\&t=(\d)+/,"&t="+this.timeService.getCurrentSecond()):i.replace(/\?t=(\d)+/,"?t="+this.timeService.getCurrentSecond());location.replace(s)}else i=i.includes("?")?i+"&t="+this.timeService.getCurrentSecond():i+"?t="+this.timeService.getCurrentSecond(),location.replace(i)}switchModeUI(t){let i=document.getElementById("azota-app-html");this.modeUI=t,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?i&&(i.classList.remove("dark"),i.classList.add("light")):i&&(i.classList.remove("light"),i.classList.add("dark"))}changeAccountStudent(){}ngOnInit(){this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getCurrentUrl(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser(),this.isTeacherRole=this.userService.isTeacherRole(),this.userLoginStateService.loginMessage.subscribe(t=>{this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser()}),super.ngOnInit()}constructor(t,i,s,l,m,c,d){super(),(0,r.A)(this,"router",void 0),(0,r.A)(this,"userService",void 0),(0,r.A)(this,"browserStorageService",void 0),(0,r.A)(this,"userLoginStateService",void 0),(0,r.A)(this,"timeService",void 0),(0,r.A)(this,"redirectService",void 0),(0,r.A)(this,"sAztDialogService",void 0),(0,r.A)(this,"isTeacherDashboard",!0),(0,r.A)(this,"beCreatedStudent",!1),(0,r.A)(this,"mouseEventObj",void 0),(0,r.A)(this,"returnUrl",""),(0,r.A)(this,"userObj",void 0),(0,r.A)(this,"modeUI",""),(0,r.A)(this,"isAnonymous",!1),(0,r.A)(this,"isTeacherRole",!1),this.router=t,this.userService=i,this.browserStorageService=s,this.userLoginStateService=l,this.timeService=m,this.redirectService=c,this.sAztDialogService=d}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(G.Ix),e.rXU(B.R),e.rXU(K.z),e.rXU(Oe.X),e.rXU(ze.F),e.rXU(le.m),e.rXU(De))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["header-account-menu"]],viewQuery:function(t,i){if(1&t&&e.GBs(L.Cp,5),2&t){let s;e.mGM(s=e.lsd())&&(i.menuTrigger=s.first)}},inputs:{isTeacherDashboard:"isTeacherDashboard",beCreatedStudent:"beCreatedStudent"},features:[e.Vt3],decls:10,vars:5,consts:[["loggedIn",""],["accountMenu","matMenu"],["notAnonymous",""],[4,"ngIf","ngIfElse"],[3,"hasBackdrop"],[1,"dropdown-menu","show","relative","w-56",3,"mouseenter","mouseleave"],[1,"dropdown-content"],["azt-track-service","header-account-menu-zWAvNkVhjVM",1,"btn","btn-sm","btn-outline-primary",3,"click"],["name","log-out","size","16",3,"ngClass"],["azt-track-service","header-account-menu-S984kCyEl",3,"mouseenter","mouseleave","matMenuTriggerFor"],["azt-track-service","header-account-menu-_z5kaOQTx",1,"dropdown-toggle","w-full","h-10","rounded-full","flex","trigger-menu",2,"align-items","center",3,"click"],[1,"relative"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"font-medium",3,"ngStyle"],["class","text-xs text-slate-600 -mt-0.5 dark:text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-600","-mt-0.5","dark:text-slate-500"],[4,"ngIf"],["azt-track-service","header-account-menu-eSx-v39GRMc",1,"dropdown-item",3,"routerLink","queryParams"],["azt-track-service","header-account-menu-SEi5xr4uPic",1,"dropdown-item",3,"click"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","header-account-menu-mn5LIp-0AtS",1,"dropdown-item",3,"routerLink"],["azt-track-service","header-account-menu-vlcN2DxtbR2",1,"dropdown-item",3,"routerLink","queryParams"],["name","circle-arrow-right","size","16",3,"ngClass"],["azt-track-service","header-account-menu-iNoUc0CT5wP",1,"dropdown-item",3,"click"],["name","moon","size","16",3,"ngClass"],["azt-track-service","header-account-menu-CI1BdC7HViT",1,"dropdown-item",3,"click"],["name","sun","size","16",3,"ngClass"],["azt-track-service","header-account-menu--T0bM_cz_i7",1,"dropdown-item",3,"routerLink"],["name","scan-line","size","16",3,"ngClass"],["azt-track-service","header-account-menu-XYfAXj_Jl4e",1,"dropdown-item",3,"routerLink"],["name","qr-code","size","16",3,"ngClass"],["azt-track-service","header-account-menu-Q26_sXs6gkC",1,"dropdown-item",3,"routerLink"],["name","arrow-right-left","size","16",3,"ngClass"],["azt-track-service","header-account-menu-VzCUMIT5BDg",1,"dropdown-item",3,"routerLink"],["name","shield-check","size","16",3,"ngClass"],["azt-track-service","header-account-menu-jozmhaRatuz",1,"dropdown-item",3,"routerLink"]],template:function(t,i){if(1&t){const s=e.RV6();e.DNE(0,Qe,5,5,"ng-container",3)(1,nt,5,6,"ng-template",null,0,e.C5r),e.j41(3,"mat-menu",4,1)(5,"div",5),e.bIt("mouseenter",function(){return e.eBV(s),e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseEnter())})("mouseleave",function(){return e.eBV(s),e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseLeave())}),e.j41(6,"ul",6),e.DNE(7,st,23,31,"ng-container",3)(8,pt,30,40,"ng-template",null,2,e.C5r),e.k0s()()()}if(2&t){const s=e.sdS(2),l=e.sdS(9);e.Y8G("ngIf",!i.userService.isLogin())("ngIfElse",s),e.R7$(3),e.Y8G("hasBackdrop",!1),e.R7$(4),e.Y8G("ngIf",i.isAnonymous)("ngIfElse",l)}},dependencies:[G.Wk,v.YU,v.bT,v.B3,L.kk,L.Cp,ce,D.WGl,M.F2,M.wp,M.hx],encapsulation:2})),a})(),_t=(()=>{var o;class a{constructor(t){(0,r.A)(this,"commonService",void 0),(0,r.A)(this,"globalDataObj",{}),this.commonService=t}setGlobalData(t,i){this.globalDataObj[t]=i}getGlobalData(t){let i=this.globalDataObj[t];if(i)return this.commonService.castJsonToObj(i)}removeGlobalData(t){this.globalDataObj.hasOwnProperty(t)&&delete this.globalDataObj[t]}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(q.R))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})(),ht=(()=>{var o;class a{sendReadNoticeToWebviewOfFlutter(t){(t||!this.sendMarkAsReadToFluter)&&(this.mobileWebviewService.sendSimpleMessage("OPEN_NOTIFICATION"),this.sendMarkAsReadToFluter=!0)}constructor(t){(0,r.A)(this,"mobileWebviewService",void 0),(0,r.A)(this,"sendMarkAsReadToFluter",!1),this.mobileWebviewService=t}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.KVO(Z))}),(0,r.A)(a,"\u0275prov",e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),a})(),gt=(()=>{var o;class a{constructor(t){(0,r.A)(this,"elementRef",void 0),(0,r.A)(this,"isDisabled",!1),this.elementRef=t}onEnter(){const t=this.elementRef.nativeElement;this.isDisabled=t.offsetWidth==t.scrollWidth}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(e.aKT))}),(0,r.A)(a,"\u0275dir",e.FsC({type:o,selectors:[["","isDisabledTooltip",""]],hostBindings:function(t,i){1&t&&e.bIt("mouseenter",function(){return i.onEnter()})},inputs:{isDisabled:[0,"isDisabledTooltip","isDisabled"]},exportAs:["isDisabled"]})),a})();const ft=()=>({"notification__icon dark:text-slate-500":!0}),me=o=>[o],vt=o=>({"mt-3":o});function bt(o,a){1&o&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui"),e.k0s())}function It(o,a){if(1&o&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.SpI(" ",n.unreadNotification," ")}}function At(o,a){1&o&&(e.j41(0,"div",18),e.nrm(1,"azt-loading-ui",19),e.k0s())}function yt(o,a){if(1&o&&(e.j41(0,"div",21),e.eu8(1,22),e.k0s()),2&o){e.XpG(3);const n=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function St(o,a){1&o&&(e.j41(0,"div",23),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_thong_bao_nao")," "))}function xt(o,a){if(1&o&&e.DNE(0,yt,2,1,"div",20)(1,St,3,3,"ng-template",null,3,e.C5r),2&o){const n=e.sdS(2),t=e.XpG(2);e.Y8G("ngIf",t.commonNoticeData.length>0)("ngIfElse",n)}}function kt(o,a){if(1&o&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,At,2,0,"div",17)(6,xt,3,2,"ng-template",null,2,e.C5r),e.k0s()()),2&o){const n=e.sdS(7),t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_thong_bao")),e.R7$(2),e.Y8G("ngIf",t.statusObj.loading)("ngIfElse",n)}}function Tt(o,a){if(1&o&&(e.qex(0),e.nrm(1,"azt-create-avatar",39),e.bVm()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("linkAvatar",n.senderAvatar)("nameCreateAvatar",n.senderName)("size",48)}}function Rt(o,a){if(1&o&&e.nrm(0,"azt-create-avatar",42),2&o){const n=e.XpG(3).$implicit;e.Y8G("nameCreateAvatar",n.senderName)("size",48)}}function Ct(o,a){1&o&&(e.nrm(0,"azt-create-avatar",43),e.nI1(1,"convertCdnLinkOfGitHub")),2&o&&e.Y8G("linkAvatar",e.bMT(1,2,"images/logo.svg"))("size",48)}function Ft(o,a){if(1&o&&e.DNE(0,Rt,1,2,"azt-create-avatar",40)(1,Ct,2,4,"azt-create-avatar",41),2&o){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function jt(o,a){if(1&o&&(e.qex(0),e.j41(1,"span",44,6),e.EFF(3),e.k0s(),e.bVm()),2&o){const n=e.sdS(2),t=e.XpG(2).$implicit;e.R7$(),e.FS9("matTooltip",t.senderName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",t.senderName," ")}}function wt(o,a){if(1&o&&(e.j41(0,"span",44,6),e.EFF(2),e.k0s()),2&o){const n=e.sdS(1),t=e.XpG(3).$implicit;e.FS9("matTooltip",t.studentName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",t.studentName," ")}}function Mt(o,a){1&o&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_re_approved_student_account")," "))}function Et(o,a){1&o&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_bank_question")," "))}function Nt(o,a){if(1&o&&e.DNE(0,wt,3,4,"span",45)(1,Mt,3,3,"span",46)(2,Et,3,3,"span",46),2&o){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type&&"NEW_REQUEST_REAPPROVE"!=n.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function $t(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.j41(2,"span",48),e.EFF(3),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ","lang_auto_ban_moi_duoc_phan_quyen_cho_lop"," "),e.R7$(2),e.JRh(n.classroomName)}}function Gt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_cham_diem_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Ot(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function zt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_co_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_moi_duoc_giao")," ")}}function Lt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_yeu_cau_nop_lai_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Dt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Bt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_bai_thi_moi")," "),e.R7$(3),e.JRh(n.examName)}}function Pt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_bai_thi")," "),e.R7$(3),e.JRh(n.examName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_da_duco_cham_diem")," ")}}function Ut(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit,t=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ban_moi_duoc_phan_quyen_cho")," "),e.R7$(3),e.JRh(t.processNoticeService.getTypeObjNotice(n))}}function Ht(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Yt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Vt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Xt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Wt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.nI1(6,"mytranslate"),e.k0s()),2&o){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_you")+" "+(n.totalApproved?e.bMT(3,3,"lang_notice_approved")+" "+n.totalApproved+" "+e.bMT(4,5,"lang_notice_question"):"")+(n.totalApproved&&n.totalRejected?", ":" ")+(n.totalRejected?e.bMT(5,7,"lang_notice_rejected")+" "+n.totalRejected+" "+e.bMT(6,9,"lang_notice_question"):"")," ")}}function Jt(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s()()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_news_feed_notice_has_new")," "),e.R7$(3),e.SpI(" ",n.classroomName," ")}}function qt(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"b"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,7,"lang_auto_lop")," "),e.R7$(3),e.SpI(" ",n.classroomName," "),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_auto_khong_chon_duoc_ten_do_da_co_ban_chon_mat")," ")}}function Kt(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_not_paid_your_current_months_tuition_please_complete_your_tuition")," ")}}function Zt(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_some_unfinished_exams_please_complete_them_on_time")," ")}}function Qt(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_vang_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.SpI(" ",n.classroomName," ")}}function en(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_co_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.SpI(" ",n.classroomName," ")}}function tn(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_gui_nhan_xet_den_hoc_sinh")," ",n.classroomName," ")}}function nn(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_thay_doi_trang_thai_hoc_phi_cho_hoc_sinh")," ",n.studentName," ")}}function on(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_co_de_thi_moi_duoc_giao_den_hoc_sinh")," ",n.studentName," ")}}function an(o,a){if(1&o&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"getContentFromCustomBodyNotice"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.E5c(" ",e.bMT(7,7,"lang_core_co_thong_bao_moi_den_hoc_sinh")," ",n.studentName,' "',e.bMT(8,9,n.data),'" ')}}function sn(o,a){if(1&o&&(e.j41(0,"a",30),e.nI1(1,"navigationLocalize"),e.j41(2,"div",31)(3,"div",32),e.DNE(4,Tt,2,3,"ng-container",33)(5,Ft,2,2,"ng-template",null,4,e.C5r),e.k0s(),e.j41(7,"div",34)(8,"div",35),e.DNE(9,jt,4,4,"ng-container",33)(10,Nt,3,3,"ng-template",null,5,e.C5r),e.j41(12,"div",36),e.EFF(13),e.nI1(14,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.j41(15,"div",37),e.DNE(16,$t,4,2,"span",38)(17,Gt,5,4,"span",38)(18,Ot,5,4,"span",38)(19,zt,7,7,"span",38)(20,Lt,5,4,"span",38)(21,Dt,5,4,"span",38)(22,Bt,5,4,"span",38)(23,Pt,7,7,"span",38)(24,Ut,5,4,"span",38)(25,Ht,5,4,"span",38)(26,Yt,5,4,"span",38)(27,Vt,5,4,"span",38)(28,Xt,5,4,"span",38)(29,Wt,7,11,"span",38)(30,Jt,6,4,"span",38)(31,qt,12,11,"span",38)(32,Kt,8,7,"span",38)(33,Zt,8,7,"span",38)(34,Qt,12,14,"span",38)(35,en,12,14,"span",38)(36,tn,8,8,"span",38)(37,nn,8,8,"span",38)(38,on,8,8,"span",38)(39,an,9,11,"span",38),e.k0s()()()()),2&o){const n=e.sdS(6),t=e.sdS(11),i=e.XpG(),s=i.$implicit,l=i.index,m=e.XpG(2);e.Y8G("routerLink",e.eq3(36,me,e.bMT(1,32,m.processNoticeService.getRouterLinkForNoticeObj(s,m.role))))("queryParams",m.processNoticeService.getQueryParamForNoticeObj(s)),e.R7$(2),e.Y8G("ngClass",e.eq3(38,vt,0!==l)),e.R7$(2),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==s.type||"NEW_SHARE_CATEGORY_PERMISSION"==s.type||"NEW_CLASSROOM_NEWS"==s.type||"NEW_SHARE_HOMEWORK_PERMISSION"==s.type||"NEW_SHARE_EXAM_PERMISSION"==s.type)("ngIfElse",n),e.R7$(5),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==s.type||"NEW_SHARE_CATEGORY_PERMISSION"==s.type||"NEW_CLASSROOM_NEWS"==s.type||"NEW_SHARE_HOMEWORK_PERMISSION"==s.type||"NEW_SHARE_EXAM_PERMISSION"==s.type)("ngIfElse",t),e.R7$(4),e.SpI(" ",e.bMT(14,34,s.createdAt)," "),e.R7$(3),e.Y8G("ngIf","NEW_ASSIGN"==s.type),e.R7$(),e.Y8G("ngIf","HAS_MARK"==s.type),e.R7$(),e.Y8G("ngIf","NEW_ANSWER"==s.type),e.R7$(),e.Y8G("ngIf","NEW_HOMEWORK"==s.type),e.R7$(),e.Y8G("ngIf","RESEND_ANSWER"==s.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM_SUBMIT"==s.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM"==s.type),e.R7$(),e.Y8G("ngIf","EXAM_HAS_MARK"==s.type),e.R7$(),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==s.type||"NEW_SHARE_CATEGORY_PERMISSION"==s.type||"NEW_SHARE_HOMEWORK_PERMISSION"==s.type||"NEW_SHARE_EXAM_PERMISSION"==s.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ASK"==s.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ASK"==s.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ANSWER"==s.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ANSWER"==s.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==s.type&&(s.totalApproved>0||s.totalRejected>0)),e.R7$(),e.Y8G("ngIf","NEW_CLASSROOM_NEWS"==s.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==s.type),e.R7$(),e.Y8G("ngIf","TUITION_NOT_PAID"==s.type),e.R7$(),e.Y8G("ngIf","DONT_FINISHED_LESSON_CLASSROOM"==s.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_ABSENT"==s.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_DONT_ABSENT"==s.type),e.R7$(),e.Y8G("ngIf","NEW_COMMENT_FOR_YOU"==s.type),e.R7$(),e.Y8G("ngIf","UPDATE_TUITION_PAYMENT"==s.type),e.R7$(),e.Y8G("ngIf","HAS_EXAM_CLASSROOM"==s.type),e.R7$(),e.Y8G("ngIf","CUSTOM_CONTENT_CLASSROOM"==s.type)}}function rn(o,a){if(1&o&&(e.qex(0),e.DNE(1,sn,40,40,"a",29),e.bVm()),2&o){const n=a.$implicit;e.R7$(),e.Y8G("ngIf","NEW_SHARE_PERMISSION"!=n.type)}}function ln(o,a){if(1&o&&(e.DNE(0,rn,2,1,"ng-container",24),e.nrm(1,"hr",25),e.j41(2,"div",26),e.nI1(3,"navigationLocalize"),e.j41(4,"div",27)(5,"a",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&o){const n=e.XpG();e.Y8G("ngForOf",n.commonNoticeData),e.R7$(2),e.Y8G("routerLink",e.eq3(7,me,e.bMT(3,3,"/notify/"+n.role+"/0/0/0"))),e.R7$(4),e.SpI(" ",e.bMT(7,5,"lang_auto_xem_tat_ca")," ")}}let cn=(()=>{var o;class a extends z.H{removeNoticeNumber(){this.frontSAztCommonService.apiFrontCommonMarkNotificationAsReadGet(this.role).subscribe(t=>{1==t.success&&(this.resetNotification(0),this.getHeaderInfo())}),this.isMobileWebView&&this.redirectService.redirectToPath(`/notify/${this.role}/0/0/0`)}resetNotification(t){var i="back_header_infors_"+this.userService.getUserObj().id,s=this.globalService.getGlobalData(i);s&&s.data&&(0==t&&(s.data.unreadNotification=0,this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!0)),this.globalService.setGlobalData(i,this.serializeJson(s)))}reGetNoticeObjs(){var t="back_header_infors_"+this.userService.getUserObj().id;this.globalService.removeGlobalData(t),this.getHeaderInfo()}getHeaderInfo(){var t="back_header_infors_"+this.userService.getUserObj().id,i=this.globalService.getGlobalData(t);i?(this.unreadNotification=i.data?.unreadNotification??0,this.commonNoticeData=i.data?.commonNoticeObjs??[],this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)):(this.initStatusObj(),this.frontSAztCommonService.apiFrontCommonGetHeaderInfoGet(this.role).subscribe(s=>{1==s.success&&(this.unreadNotification=s.data?.unreadNotification??0,this.globalService.setGlobalData(t,this.serializeJson(s)),this.commonNoticeData=s.data?.commonNoticeObjs??new Array,this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getHeaderInfo()}constructor(t,i,s,l,m,c,d){super(),(0,r.A)(this,"processNoticeService",void 0),(0,r.A)(this,"userService",void 0),(0,r.A)(this,"frontSAztCommonService",void 0),(0,r.A)(this,"globalService",void 0),(0,r.A)(this,"redirectService",void 0),(0,r.A)(this,"mobileWebviewService",void 0),(0,r.A)(this,"sAztHeaderNoticeService",void 0),(0,r.A)(this,"role",0),(0,r.A)(this,"commonNoticeData",[]),(0,r.A)(this,"unreadNotification",0),this.processNoticeService=t,this.userService=i,this.frontSAztCommonService=s,this.globalService=l,this.redirectService=m,this.mobileWebviewService=c,this.sAztHeaderNoticeService=d,this.waitDestroy(this.mobileWebviewService.getHeaderReloadNoticeSubscriber().subscribe(()=>{this.reGetNoticeObjs()}))}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(se),e.rXU(B.R),e.rXU(re.s1),e.rXU(_t),e.rXU(le.m),e.rXU(Z),e.rXU(ht))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["header-notice-box"]],inputs:{role:"role"},features:[e.Vt3],decls:9,vars:6,consts:[["notification","matMenu"],["listNoticeBox",""],["doneLoading",""],["noNotification",""],["otherTemplate",""],["notSharePermission",""],["c","isDisabled"],["azt-track-service","header-notice-box-DtIJA3xWHnn",1,"dropdown-toggle","notification","cursor-pointer","relative",3,"click","matMenuTriggerFor"],["name","bell","size","24",3,"ngClass"],["class","w-3 h-3 mx-auto inline-block",4,"ngIf"],["class","absolute bg-danger text-white rounded-full font-bold","style","top: -5px; right: -5px; font-size: 7px; overflow: hidden; width: 15px; height: 15px; line-height: 15px; text-align: center",4,"ngIf"],["class","notification-content dropdown-menu show relative pt-2",4,"ngIf"],[1,"w-3","h-3","mx-auto","inline-block"],[1,"absolute","bg-danger","text-white","rounded-full","font-bold",2,"top","-5px","right","-5px","font-size","7px","overflow","hidden","width","15px","height","15px","line-height","15px","text-align","center"],[1,"notification-content","dropdown-menu","show","relative","pt-2"],[1,"notification-content__box","dropdown-content",2,"padding","10px"],[1,"notification-content__title"],["class","w-4 h-4 mx-auto mb-4",4,"ngIf","ngIfElse"],[1,"w-4","h-4","mx-auto","mb-4"],["type","bootstrap-spinner"],["class","notice-azt",4,"ngIf","ngIfElse"],[1,"notice-azt"],[3,"ngTemplateOutlet"],[1,"w-full","text-center","text-slate-500","mt-0.5","mb-4"],[4,"ngFor","ngForOf"],[1,"dropdown-divider","border-gray/[0.08]","mt-3"],["azt-track-service","header-notice-box-m_8Z0tdYOsZ",1,"clickable","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"routerLink"],[1,"text-center","p-3"],[1,"text-primary","text-center"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams"],[1,"cursor-pointer","dropdown-item","relative","flex","items-center",3,"ngClass"],[1,"w-12","h-12","flex-none","image-fit","mr-1"],[4,"ngIf","ngIfElse"],[1,"ml-2","overflow-hidden","w-full"],[1,"flex","items-center"],[1,"text-xs","text-slate-400","ml-auto","whitespace-nowrap"],[1,"text-slate-500","mt-0.5"],[4,"ngIf"],[3,"linkAvatar","nameCreateAvatar","size"],[3,"nameCreateAvatar","size",4,"ngIf"],[3,"linkAvatar","size",4,"ngIf"],[3,"nameCreateAvatar","size"],[3,"linkAvatar","size"],[1,"font-medium","truncate","mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","font-medium truncate mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],["class","font-medium mr-5",4,"ngIf"],[1,"font-medium","mr-5"],[1,"notify__name"]],template:function(t,i){if(1&t){const s=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){return e.eBV(s),e.Njj(i.statusObj.loading?"":i.removeNoticeNumber())}),e.nrm(1,"lucide-icon",8),e.DNE(2,bt,2,0,"div",9)(3,It,2,1,"div",10),e.k0s(),e.j41(4,"mat-menu",null,0),e.DNE(6,kt,8,5,"div",11),e.k0s(),e.DNE(7,ln,8,9,"ng-template",null,1,e.C5r)}if(2&t){const s=e.sdS(5);e.Y8G("matMenuTriggerFor",i.isMobileWebView?null:s),e.R7$(),e.Y8G("ngClass",e.lJ4(5,ft)),e.R7$(),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.Y8G("ngIf",i.unreadNotification&&!i.statusObj.loading),e.R7$(3),e.Y8G("ngIf",!i.isMobileWebView)}},dependencies:[G.Wk,v.YU,v.Sq,v.bT,v.T3,L.kk,L.Cp,U.oV,ce,gt,Q.R,D.WGl,M.F2,M.wp,M.gt,M.bH,M.OR],encapsulation:2})),a})();const mn=["*"],dn=()=>({"mr-1":!0}),C=o=>[o],de=()=>({"text-white transform -rotate-90":!0});function pn(o,a){1&o&&e.SdG(0)}function un(o,a){if(1&o&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.headerTitle," ")}}function _n(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div")(3,"button",13),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.goBack())}),e.nrm(4,"lucide-icon",14),e.j41(5,"span",15),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()(),e.j41(8,"div",16)(9,"span",17),e.EFF(10),e.k0s()(),e.j41(11,"div",12)(12,"div",18),e.nrm(13,"azt-switch-language"),e.k0s(),e.j41(14,"div",18),e.nrm(15,"header-notice-box",19),e.k0s(),e.j41(16,"div",20),e.nrm(17,"header-account-menu",21),e.k0s()()(),e.DNE(18,un,2,1,"div",22),e.k0s()}if(2&o){const n=e.XpG();e.R7$(4),e.Y8G("ngClass",e.lJ4(8,dn)),e.R7$(2),e.JRh(e.bMT(7,6,"lang_auto_quay_lai")),e.R7$(4),e.JRh(n.headerTitle),e.R7$(5),e.Y8G("role",0),e.R7$(2),e.Y8G("isTeacherDashboard",!0),e.R7$(),e.Y8G("ngIf",n.headerTitle)}}function hn(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeMenuMobile())}),e.j41(3,"div",35),e.nrm(4,"lucide-icon",50),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}2&o&&(e.R7$(),e.Y8G("routerLink",e.eq3(6,C,e.bMT(2,2,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(7,4,"lang_document_market_title")))}function gn(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"a",26),e.nI1(3,"navigationLocalize"),e.nrm(4,"img",27),e.nI1(5,"getLinkLogo"),e.k0s(),e.j41(6,"a",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.openMenuMobile())}),e.nrm(7,"lucide-icon",29),e.k0s()(),e.j41(8,"div",30)(9,"a",31),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.nrm(10,"lucide-icon",32),e.k0s(),e.j41(11,"ul",33)(12,"li")(13,"a",34),e.nI1(14,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(15,"div",35),e.nrm(16,"lucide-icon",36),e.k0s(),e.j41(17,"div",37),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()(),e.j41(20,"li")(21,"a",38),e.nI1(22,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(23,"div",35),e.nrm(24,"lucide-icon",39),e.k0s(),e.j41(25,"div",37),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()(),e.j41(28,"li")(29,"a",40),e.nI1(30,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(31,"div",35),e.nrm(32,"lucide-icon",41),e.k0s(),e.j41(33,"div",37),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"li")(37,"a",42),e.nI1(38,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(39,"div",35),e.nrm(40,"lucide-icon",43),e.k0s(),e.j41(41,"div",37),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",44),e.nI1(46,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(47,"div",35),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",37),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,hn,8,8,"li",46),e.j41(53,"li")(54,"a",47),e.nI1(55,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(56,"div",35),e.nrm(57,"lucide-icon",48),e.k0s(),e.j41(58,"div",37),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s()()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(45,C,e.bMT(3,17,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(5,19,"smallLogo"),e.B4B),e.R7$(3),e.Y8G("ngClass",e.lJ4(47,de)),e.R7$(3),e.Y8G("ngClass",e.lJ4(48,de)),e.R7$(3),e.Y8G("routerLink",e.eq3(49,C,e.bMT(14,21,"/admin/dashboard"))),e.R7$(5),e.JRh(e.bMT(19,23,"lang_auto_dashboard")),e.R7$(3),e.Y8G("routerLink",e.eq3(51,C,e.bMT(22,25,"/admin/testbank/document-management/1/0/1"))),e.R7$(5),e.SpI(" ",e.bMT(27,27,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(53,C,e.bMT(30,29,"/admin/testbank/document-management/0/0/1"))),e.R7$(5),e.JRh(e.bMT(35,31,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(55,C,e.bMT(38,33,"/admin/student/manage-classroom/0"))),e.R7$(5),e.JRh(e.bMT(43,35,"lang_auto_quan_ly_lop")),e.R7$(3),e.Y8G("routerLink",e.eq3(57,C,e.bMT(46,37,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,39,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(59,C,e.bMT(55,41,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(60,43,"lang_cms_business_dashboard_title"))}}function fn(o,a){1&o&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",65),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",50),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&o&&(e.FS9("matTooltip",e.bMT(1,4,"lang_document_market_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,C,e.bMT(3,6,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_document_market_title")))}function vn(o,a){1&o&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",66),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",67),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&o&&(e.FS9("matTooltip",e.bMT(1,4,"lang_notice_bank_question")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,C,e.bMT(3,6,"/admin/question-library/dashboard"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_notice_bank_question")))}function bn(o,a){if(1&o&&(e.j41(0,"nav",51)(1,"a",52),e.nI1(2,"navigationLocalize"),e.nrm(3,"img",27),e.nI1(4,"getLinkLogo"),e.k0s(),e.nrm(5,"div",53),e.j41(6,"ul")(7,"li")(8,"a",54),e.nI1(9,"navigationLocalize"),e.j41(10,"div",55),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",36),e.k0s(),e.j41(13,"div",56),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()(),e.j41(16,"li")(17,"a",57),e.nI1(18,"navigationLocalize"),e.j41(19,"div",55),e.nI1(20,"mytranslate"),e.nrm(21,"lucide-icon",39),e.k0s(),e.j41(22,"div",56),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.j41(25,"li")(26,"a",58),e.nI1(27,"navigationLocalize"),e.j41(28,"div",55),e.nI1(29,"mytranslate"),e.nrm(30,"lucide-icon",41),e.k0s(),e.j41(31,"div",56),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"li")(35,"a",59),e.nI1(36,"navigationLocalize"),e.j41(37,"div",55),e.nI1(38,"mytranslate"),e.nrm(39,"lucide-icon",43),e.k0s(),e.j41(40,"div",56),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()(),e.j41(43,"li",60),e.nI1(44,"mytranslate"),e.j41(45,"a",61),e.nI1(46,"navigationLocalize"),e.j41(47,"div",62),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",56),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,fn,9,12,"li",63)(53,vn,9,12,"li",63),e.j41(54,"li",60),e.nI1(55,"mytranslate"),e.j41(56,"a",64),e.nI1(57,"navigationLocalize"),e.j41(58,"div",62),e.nrm(59,"lucide-icon",48),e.k0s(),e.j41(60,"div",56),e.EFF(61),e.nI1(62,"mytranslate"),e.k0s()()()()()),2&o){const n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(68,C,e.bMT(2,28,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(4,30,"smallLogo"),e.B4B),e.R7$(5),e.Y8G("routerLink",e.eq3(70,C,e.bMT(9,32,"/admin/dashboard"))),e.R7$(2),e.FS9("matTooltip",e.bMT(11,34,"lang_auto_dashboard")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(15,36,"lang_auto_dashboard")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(72,C,e.bMT(18,38,"/admin/testbank/document-management/1/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(20,40,"lang_auto_bai_tap")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(24,42,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(74,C,e.bMT(27,44,"/admin/testbank/document-management/0/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(29,46,"lang_auto_de_thi")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.JRh(e.bMT(33,48,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(76,C,e.bMT(36,50,"/admin/student/manage-classroom/0"))),e.R7$(2),e.FS9("matTooltip",e.bMT(38,52,"lang_auto_quan_ly_lop")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(42,54,"lang_auto_quan_ly_lop")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(44,56,"lang_dashboard_teacher_management_box")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(78,C,e.bMT(46,58,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,60,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.FS9("matTooltip",e.bMT(55,62,"lang_cms_business_dashboard_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(80,C,e.bMT(57,64,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(62,66,"lang_cms_business_dashboard_title"))}}let ee=(()=>{var o;class a extends z.H{goBack(){this.commonService.myNavigationBySpecialQueryString(this.headerBackToLink)}openMenuMobile(){document.getElementById("toggle-menu")?.classList.add("mobile-menu--active")}closeMenuMobile(){document.getElementById("toggle-menu")?.classList.remove("mobile-menu--active")}initActiveNav(){this.activeTagHomeUrlList=["/admin/dashboard","/auth/account-setting","/notify","/admin/trash","/admin/testbank/create-website","/admin/testbank/create-website-result","/payment/azo-package","/super-role/","/azota-ads/","/auth/vip-packages","/azota-tools/"],this.activeTagHomeworkUrlList=["/admin/testbank/document-management/1","/admin/testbank/homework-results-list","/admin/testbank/config-homework","/admin/testbank/publish-document/1","/create-homework-success/","/admin/homework/add-new-homework","/admin/homework/mark-exercise"],this.activeTagExamUrlList=["/admin/testbank/matrix-list/","/admin/testbank/document-management/0","/admin/testbank/create-new-document","/admin/testbank/create-tree-document","/admin/testbank/exam-results-list","/admin/testbank/statistic/","/admin/testbank/action-online-offline/","/admin/testbank/analyze-knowledge/","/admin/testbank/config-exam-online","/admin/testbank/publish-document/0","/admin/testbank/add-student","/admin/testbank/test-review","/admin/testbank/create-exam-by-excel/","/admin/testbank/create-manual-offline-exam/","/admin/testbank/config-exam-offline/","/admin/testbank/update-exam/","/admin/testbank/update-offline-exam-code/","/admin/testbank/test-result-tracking/","/admin/testbank/download-file-print/","/admin/testbank/print-exam-and-ticket/","/admin/test-market/introduce","/admin/testbank/update-offline-exam","/admin/testbank/ai-create-exam/","/admin/testbank/create-exam-by-text/","/ladingpage/","/admin/testbank/update-capacity-exam","/admin/testbank/create-capacity-exam"],this.activeTagQuestionLibraryUrlList=["/admin/question-library/"],this.activeTagClassroomUrlList=["/admin/student"],this.activeTagGroupUrlList=["/admin/teacher-group"],this.activeTagDocumentMarketUrlList=["/document-market/"],this.activeTagBusinessUrlList=["/business/"],this.activeTagBusinessTableUrlList=["/table-honored"]}ngOnInit(){super.ngOnInit(),this.initActiveNav()}constructor(t,i,s){super(),(0,r.A)(this,"processNoticeService",void 0),(0,r.A)(this,"userService",void 0),(0,r.A)(this,"browserStorageService",void 0),(0,r.A)(this,"headerBackToLink",""),(0,r.A)(this,"headerTitle",""),(0,r.A)(this,"checkBackDialog",!1),(0,r.A)(this,"handleBackDialog",new e.bkB),(0,r.A)(this,"activeTagHomeUrlList",[]),(0,r.A)(this,"activeTagHomeworkUrlList",[]),(0,r.A)(this,"activeTagExamUrlList",[]),(0,r.A)(this,"activeTagClassroomUrlList",[]),(0,r.A)(this,"activeTagGroupUrlList",[]),(0,r.A)(this,"activeTagDocumentMarketUrlList",[]),(0,r.A)(this,"activeTagQuestionLibraryUrlList",[]),(0,r.A)(this,"activeTagBusinessUrlList",[]),(0,r.A)(this,"activeTagBusinessTableUrlList",[]),this.processNoticeService=t,this.userService=i,this.browserStorageService=s}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(se),e.rXU(B.R),e.rXU(K.z))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["teacher-layout"]],inputs:{headerBackToLink:"headerBackToLink",headerTitle:"headerTitle",checkBackDialog:"checkBackDialog"},outputs:{handleBackDialog:"handleBackDialog"},features:[e.Vt3],ngContentSelectors:mn,decls:18,vars:4,consts:[["BodyContentTpl",""],["TopBarTpl",""],["mobileMenuTpl",""],["DesktopMenuTpl",""],["id","azt-layout",1,"azt-layout"],[1,"azt-body"],[3,"ngTemplateOutlet"],[1,"flex","mt-[4.7rem]","md:mt-0"],[1,"content","relative"],[1,"top-bar"],[1,"azt-content"],[1,"block","w-full"],[1,"flex","items-center"],["azt-track-service","teacher-layout-txPc6qxNl",1,"btn","btn-transparent",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[1,"azt-hidden","sm:block"],[1,"font-medium","flex-one","text-center"],[1,"azt-hidden","md:block"],[1,"dropdown","mr-2","sm:mr-4"],[3,"role"],[1,"dropdown","header-account-menu"],[3,"isTeacherDashboard"],["class","block md:hidden text-center pt-2 pb-2 font-medium",4,"ngIf"],[1,"block","md:hidden","text-center","pt-2","pb-2","font-medium"],["id","toggle-menu",1,"mobile-menu","md:hidden"],[1,"mobile-menu-bar"],["azt-track-service","teacher-layout-eJLgd2yvySJ",1,"flex","mr-auto",3,"routerLink"],["alt","Azota",1,"w-10",3,"src"],["azt-track-service","teacher-layout-kPh_SLquONL",1,"mobile-menu-toggler",3,"click"],["name","bar-chart-2","size","20",3,"ngClass"],[1,"scrollable"],["azt-track-service","teacher-layout-p3XQvJS7FuD",1,"mobile-menu-toggler",3,"click"],["name","circle-x","size","32",3,"ngClass"],[1,"scrollable__content","py-2"],["azt-track-service","teacher-layout-67rbSb3dLPU",1,"menu",3,"click","routerLink"],[1,"menu__icon"],["name","house","size","24"],[1,"menu__title"],["azt-track-service","teacher-layout-J8TmW2BMwsH",1,"menu",3,"click","routerLink"],["name","file-text","size","24"],["azt-track-service","teacher-layout-U1Xi4mAqmKv",1,"menu",3,"click","routerLink"],["name","folder","size","24"],["azt-track-service","teacher-layout-nV8vMAnzV7_",1,"menu",3,"click","routerLink"],["name","layers","size","24"],["azt-track-service","teacher-layout-27U-GtoLLKH",1,"menu",3,"click","routerLink"],["name","users","size","24"],[4,"ngIf"],["azt-track-service","teacher-layout-QY_BVpu7d",1,"menu",3,"click","routerLink"],["name","plug","size","24",2,"transform","rotate(45deg)"],["azt-track-service","teacher-layout-bYWbXjGnRw",1,"menu",3,"click","routerLink"],["name","book-open","size","24"],[1,"side-nav","side-nav--simple"],["azt-track-service","teacher-layout-VhZ51QnFiPG",1,"flex","items-center","pl-5","pt-4","relative",3,"routerLink"],[1,"side-nav__devider","my-6"],["azt-track-service","teacher-layout-qPpeOjyQiU6",1,"side-menu",3,"routerLink"],[1,"side-menu__icon",3,"matTooltip","matTooltipPosition"],[1,"side-menu__title"],["azt-track-service","teacher-layout-JuqCTNWN4XT",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-tB87TxUcBLf",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-FmXRsM0ZL-Y",1,"side-menu",3,"routerLink"],[3,"matTooltip","matTooltipPosition"],["azt-track-service","teacher-layout-dUjdIyx6m3F",1,"side-menu",3,"routerLink"],[1,"side-menu__icon"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["azt-track-service","teacher-layout-Qn0hMZhPEp",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-hn8q-bW1M",1,"side-menu",3,"routerLink"],[1,"side-menu",3,"routerLink"],["name","landmark","size","24"]],template:function(t,i){if(1&t&&(e.NAR(),e.j41(0,"div",4)(1,"div",5),e.eu8(2,6),e.j41(3,"div",7),e.eu8(4,6),e.j41(5,"div",8)(6,"div",9),e.eu8(7,6),e.k0s(),e.j41(8,"div",10),e.eu8(9,6),e.k0s()()()()(),e.DNE(10,pn,1,0,"ng-template",null,0,e.C5r)(12,_n,19,9,"ng-template",null,1,e.C5r)(14,gn,61,61,"ng-template",null,2,e.C5r)(16,bn,63,82,"ng-template",null,3,e.C5r)),2&t){const s=e.sdS(11),l=e.sdS(13),m=e.sdS(15),c=e.sdS(17);e.R7$(2),e.Y8G("ngTemplateOutlet",m),e.R7$(2),e.Y8G("ngTemplateOutlet",c),e.R7$(3),e.Y8G("ngTemplateOutlet",l),e.R7$(2),e.Y8G("ngTemplateOutlet",s)}},dependencies:[G.Wk,v.YU,v.bT,v.T3,U.oV,$e,D.WGl,ut,cn,M.F2,M.wp,M.ph],encapsulation:2})),a})();function In(o,a){if(1&o&&(e.j41(0,"div",2)(1,"a",3)(2,"div",4),e.nrm(3,"i"),e.j41(4,"div",5),e.EFF(5),e.k0s()()()()),2&o){const n=a.$implicit;e.BMQ("touranchor","azt-tour-"+(a.index+1)),e.R7$(),e.Mz_("href","/vi/ai/app/",n.id,"",e.B4B),e.R7$(2),e.ZvI("",n.icon," text-4xl"),e.R7$(2),e.SpI(" ",n.name," ")}}let An=(()=>{var o;class a extends z.H{constructor(t,i,s){super(),(0,r.A)(this,"auth",void 0),(0,r.A)(this,"userSv",void 0),(0,r.A)(this,"appService",void 0),(0,r.A)(this,"listApp",[]),this.auth=t,this.userSv=i,this.appService=s}ngOnInit(){this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),t=>{this.loadApp()})}loadApp(){this.appService.getListShare().subscribe(t=>{this.listApp=t})}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(ke.u),e.rXU(B.R),e.rXU(Y))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:1,consts:[[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-4 md:col-span-2 intro-y h-full",4,"ngFor","ngForOf"],[1,"col-span-4","md:col-span-2","intro-y","h-full"],["azt-track-service","dashboard-main-rF6MSAArUsY",3,"href"],[1,"box","p-8","zoom-in","h-full","text-center"],[1,"font-medium","text-center","text-base","mt-3"]],template:function(t,i){1&t&&(e.j41(0,"teacher-layout")(1,"div",0),e.DNE(2,In,6,7,"div",1),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",i.listApp))},dependencies:[V.b,ee,v.MD,v.Sq,x.YN]})),a})(),yn=(()=>{var o;class a extends z.H{ngOnInit(){super.ngOnInit()}constructor(){super()}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-demo"]],features:[e.Vt3],decls:3,vars:0,consts:[[1,"box","p-3","mt-3"]],template:function(t,i){1&t&&(e.j41(0,"teacher-layout")(1,"div",0),e.EFF(2,"Code hehe"),e.k0s()())},dependencies:[ee],encapsulation:2})),a})(),Sn=(()=>{var o;class a extends z.H{}return o=a,(0,r.A)(a,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(o)))(i||o)}})()),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["ai-master-page"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(t,i){1&t&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[G.n3],encapsulation:2})),a})();var P=y(467),pe=y(345);let ue=(()=>{var o;class a{constructor(t){(0,r.A)(this,"sanitized",void 0),this.sanitized=t}transform(t){return this.sanitized.bypassSecurityTrustHtml(t)}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(pe.up,16))}),(0,r.A)(a,"\u0275pipe",e.EJ8({name:"safeHtml",type:o,pure:!0,standalone:!0})),a})(),_e=(()=>{var o;class a{constructor(t){(0,r.A)(this,"sanitized",void 0),this.sanitized=t}transform(t,i,s){if(!t)return t;let l=i??200;if(t.length<l)return t;let m=t;return s&&(m=m.replaceAll(s,"")),m.substring(0,l)+"..."}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(pe.up,16))}),(0,r.A)(a,"\u0275pipe",e.EJ8({name:"trunc",type:o,pure:!0,standalone:!0})),a})(),xn=(()=>{var o;class a{transform(t){if(isNaN(t)||t<0)return"00:00";t=Math.round(t);const i=Math.floor(t/60),s=t%60;return`${i<10?"0"+i:i.toString()}:${s<10?"0"+s:s.toString()}`}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275pipe",e.EJ8({name:"secondsToTime",type:o,pure:!0,standalone:!0})),a})();class E{static renderMathInElement(a){MathJax.typesetPromise([a]).then(()=>{})}static markdownToHtml(a){let n=document.createElement("div");n.innerHTML=a;let t=new showdown.Converter({headerLevelStart:3});return MathJax.typesetPromise([n]).then(()=>{}),t.makeHtml(n.innerHTML)}static parseIncompleteJson(a){if(!a||""==a.trim()||!/^[{[].*/.test(a.trim()))return a;a.startsWith("```json")&&(a=a.substring(7).trim()),a.endsWith("```")&&(a=a.substring(0,a.length-3));try{return JSON.parse(a)}catch{}a.endsWith(",")&&(a=a.substring(0,a.length-1));let n=[],t=['"',"[","{"],i=['"',"]","}"];for(let s=0;s<a.length;s++){if(s>0&&"\\"==a.charAt(s-1))continue;let m=a.charAt(s);if('"'==n[n.length-1]){'"'==m&&n.splice(n.length-1);continue}if(t.includes(m)){n.push(m);continue}let c=i.indexOf(m);c>=0&&n[n.length-1]==t[c]&&n.splice(n.length-1)}if(n.length>0)for(let s=n.length-1;s>=0;s--)a+=i[t.indexOf(n[s])];try{return JSON.parse(a)}catch{}return null}static fileToBase64(a){return new Promise((n,t)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=()=>{t(new Error("Failed to convert file to Base64."))},i.readAsDataURL(a)})}static base64ToObjectURL(a,n){const t=atob(a),i=[];for(let l=0;l<t.length;l+=512){const m=t.slice(l,l+512),c=new Array(m.length);for(let p=0;p<m.length;p++)c[p]=m.charCodeAt(p);const d=new Uint8Array(c);i.push(d)}const s=new Blob(i,{type:n});return URL.createObjectURL(s)}static distinctArray(a){return Array.from(new Set(a))}static getTextFromMarkdown(a){return a.replace(/(?:__|[*#])|\[(.*?)\]\(.*?\)|<[^>]*>/g,"$1").replace(/\n+/g," ").trim()}static getFileExt(a){let n=a.split(".");return n.length>1?n[n.length-1].trim().toLowerCase():""}static isImageFile(a){if(!a)return!1;const t=a.slice((Math.max(0,a.lastIndexOf("."))||1/0)+1).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff"].includes(`.${t}`)}static parseJson(a){return JSON.parse(a.replaceAll(/},\s*]/g,"}]"))}static minusToCamelCase(a){return a.replace(/-([a-z0-9])/g,(n,t)=>t.toUpperCase())}static replaceAllBase64Urls(a,n=""){return a.replace(/data:(?:image\/\w+|audio\/\w+|video\/\w+);base64,[\w\+/0-9]+(?:=[\w\+/0-9]{2})?(?:=[\w\+/0-9])?/,n)}static loadScript(a){return new Promise((n,t)=>{const i=document.createElement("script");i.src=a,i.type="text/javascript",i.async=!0,i.onload=()=>{n()},i.onerror=s=>{console.error(`Failed to load script from ${a}`,s),t(new Error(`Script load error: ${a}`))},document.head.appendChild(i)})}static downloadTextAsFile(a,n){const t=n??this.getFormattedDate(),i=new Blob([a],{type:"text/plain"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}static uploadTextFile(a){const n=document.createElement("input");n.type="file",n.accept=".txt",n.addEventListener("change",t=>{const i=t.target;if(!i.files||0===i.files.length)return;const s=i.files[0],l=new FileReader;l.onload=m=>{const c=m.target?.result;a(c)},l.readAsText(s)}),n.click()}static getFormattedDate(){const a=new Date;return`${String(a.getDate()).padStart(2,"0")}-${String(a.getMonth()+1).padStart(2,"0")}-${a.getFullYear()}-${String(a.getHours()).padStart(2,"0")}-${String(a.getMinutes()).padStart(2,"0")}.txt`}static wrapWords(a,n){const t=a.split(" ");let i="",s=0;return t.forEach((l,m)=>{i+=l+" ",s++,s===n&&(i+="\n",s=0)}),i.trim()}static zipFiles(a,n,t){var i=this;return(0,P.A)(function*(){const s=new JSZip;let l=0;for(const c of a){if(c.isText)s.file(c.filename,c.url);else{const p=(yield i.fetchUrlAsBase64(c.url)).split(",")[1];s.file(c.filename,p,{base64:!0})}l++,t&&t(l)}return yield s.generateAsync({type:"blob"})})()}static fetchUrlAsBase64(a){return(0,P.A)(function*(){const t=yield(yield fetch(a)).blob();return new Promise((i,s)=>{const l=new FileReader;l.onloadend=()=>i(l.result),l.onerror=s,l.readAsDataURL(t)})})()}static urlToFile(a,n){var t=this;return(0,P.A)(function*(){let s=(yield t.fetchUrlAsBase64(a)).split(",")[1];const l=atob(s);let m=l.length;const c=new Uint8Array(m);for(;m--;)c[m]=l.charCodeAt(m);let d=E.getContentType(n);return new File([c],n,{type:d})})()}static getContentType(a){const n=a.split(".").pop()?.toLowerCase();return n?{txt:"text/plain",script:"text/json",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",mp3:"audio/mpeg",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",zip:"application/zip",rar:"application/x-rar-compressed"}[n]:void 0}static convertToTitleCase(a){return a.toLowerCase().replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}static toCamelCase(a){return a.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(n,t)=>0===t?n.toLowerCase():n.toUpperCase()).replace(/[^a-zA-Z0-9]+/g,"")}static createDemoDataForJsonSchema(a){return function t(i){switch(i.type){case"string":return"demo string";case"number":return 42;case"boolean":return!0;case"object":const s={};if(i.properties)for(const l in i.properties)s[l]=t(i.properties[l]);return s;case"array":return[t(i.items)];default:return null}}(JSON.parse(a))}static compileTemplate(a,n){let t=a;const i=[...t.matchAll(/\$\(([a-zA-Z]+):([^\$]+)\)\$/g)],s=[];for(const h of i){t=t.replaceAll(h[0],"").trim();const _=h[2].split("|").map(u=>this.compileTemplate(u.trim(),n));for(let u=0;u<_[0].length;u++){const g=[],b=[];for(const f of _)b.push(f[u]);g.push(h[1].trim()),g.push(...b),s.push(g)}}t=t.replaceAll(/\*for="([a-zA-Z0-9_-]+) of \{([a-zA-Z0-9._-]+)\}"/g,'id="sys___loop-node" data-for="$2=>$1"'),t=t.replaceAll(/\*for="([a-zA-Z0-9_-]+) of ([a-zA-Z0-9._-]+)"/g,'id="sys___loop-node" data-for="$2=>$1"');let l=document.createElement("div");for(l.innerHTML=t;;){let h=l.querySelector("#sys___loop-node");if(!h)break;let _=h.getAttribute("data-for").split("=>");h.removeAttribute("data-for"),h.removeAttribute("id");let u=_[0],g=_[1],b=_[0].split("."),f=[];if(1==b.length)f=JSON.parse(n.get(_[0])??"[]");else{let R=JSON.parse(n.get(b[0]));for(var m=1;m<b.length;m++)R=R[b[m]];f=R??[]}let A=h.parentNode,S=h.outerHTML,T=S.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),k=[];for(let R of T)k.push(R[1]);let j=-1;for(let R of f){j++;let I=S;for(let w of k){if("index"==w){I=I.replaceAll("{index}",j+"");continue}let $,Qi=w.split(".");for(let H of Qi){if(!$&&H==_[1]){$=R;continue}let be=!1;H.endsWith("[index]")&&(H=H.split("[")[0],be=!0),$&&($=$[H]),$&&be&&($=$[j])}$||($=""),I=I.replaceAll(`{${w}}`,$)}I=I.replaceAll("[index]",`[${j}]`),I=I.replaceAll(`[${g}]`,`${u}[${j}]`);let N=document.createElement("div");N.innerHTML=I,A?.insertBefore(N.firstChild,h)}A?.removeChild(h)}let c=l.innerHTML,d=c.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),p=[];for(let h of d)p.push(h[1]);for(let h of p){let _=h.split(".");if(_.length>1){let u=JSON.parse(n.get(_[0])),g=0;for(let b of _)0!=g?(u=u[b],g++):g++;c=c.replaceAll(`{${h}}`,u??"")}else c=c.replaceAll(`{${h}}`,n.get(_[0])??"")}for(const h of s)"replace"===h[0]&&(c=c.replaceAll(h[1],h[2]));return c}static extractProperties(a,n){return a?Object.keys(a).flatMap(t=>{const i=a[t],s=Array.isArray(i)?"array":typeof i,l={name:t,type:s,level:n};return"object"!==s||null===i||Array.isArray(i)?[l]:[l,...this.extractProperties(i,n+1)]}):[]}}class te{readUrl(a){return new Promise(n=>{E.urlToFile(a,"filename").then(t=>{let i=this.readFile(t);n(i)})})}}class kn{constructor(a){(0,r.A)(this,"iamges",void 0),this.iamges=a}render(a){let n=a;for(let t of this.iamges){let i=t.cssStyle?t.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";n=n.replaceAll("[img:$"+t.id+"$]",`<img id="${t.id}" src="${t.link}" style="${i}">`)}return n}}class Tn{constructor(a,n=!1){(0,r.A)(this,"mathMap",void 0),(0,r.A)(this,"raw",void 0),this.mathMap=a,this.raw=n}render(a){let n=a,i=n.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let s=i.next();if(s.done)break;let l=s.value[0],m=s.value[1],c=this.mathMap.get(m),d="";if(c){let p=this.isPureTextMathML(c.str);if(""!=p)d=p;else{const h=document.createElement("span");h.id=m,h.innerHTML=this.cleanMathML(c.str),this.raw&&c.raw&&h.setAttribute("data-azt-math-raw",c.raw),d=h.outerHTML}}n=n.replace(l,d)}return n}cleanMathML(a){let n=a;return n=n.replaceAll('display="block"',""),n=n.replaceAll(/<\?xml[^>]+\?>/g,""),n=n.replaceAll(/\s*xmlns="[^"]+"/g,""),n=n.replaceAll("\n",""),n}isPureTextMathML(a){let t=(new DOMParser).parseFromString(a,"application/xml");if(t.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let i=t.documentElement.children,s=["mi","mn","mo","ms","mspace","mtext"],l="";for(let c=0;c<i.length;c++){let d=i[c];if(s.indexOf(d.tagName.toLowerCase())<0)return"";l+=d.textContent?.trim()??""}return/^[0-9.,-]+$/.test(l.replaceAll("\u2212","-"))?l:""}}class he{render(a){let n=a;n=n.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let i=n.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let s=i.next();if(s.done)break;let l=s.value[0],m=s.value[1],c=l.split(":")[0].split("!");c.shift(),c.filter(d=>"a"==d).length>0&&(m=m.toUpperCase());for(let d=c.length-1;d>=0;d--){let p=c[d];m="hl"==p||"cl"==p?`<span class='cl'>${m}</span>`:`<${p}>${m}</${p}>`}n=n.replace(l,m)}return n}clean(a){let n=a.split("\n"),t=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,i=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,s=[],l=0;for(let c of n){let d=c;i.test(n[l].replaceAll(t,"$1"))&&(n[l]=n[l].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),d=n[l]);let _,p=d.matchAll(t),h=0;for(;;){let u=p.next();if(u.done)break;let g=u.value[0],b=g.indexOf(":"),f=g.substring(1,b),S=(u.value.index??0)-h,T=S+u.value[1].length;_&&S==_.e&&_.style==f?_.e=T:(_={lineIdx:l,s:S,e:T,style:f},s.push(_)),h+=b+4}n[l]=d.replaceAll(t,"$1"),l++}return{res:n.join("\n"),styles:s}}applyStyle(a,n,t=!1){for(let i=a.length-1;i>=0;i--){let s=a[i],l=n.filter(c=>c.lineIdx==s.lineIdx&&this.isRangeIntersec(c.s,c.e,s.s,s.e??999999)),m=[];for(let c of l){let d=c.s>=s.s?c.s:s.s,p=c.e<=(s.e??9999999)?c.e:s.e??9999999;d-=s.s,p-=s.s;let h=t?c.style:c.style.replaceAll("!hl","").replaceAll("!cl","");d<p&&""!=h&&s.text&&""!=(s.text.substring(d,p)??"").trim()&&(m.push({idx:d,str:`[${h}:$`}),m.push({idx:p,str:"$]"}))}m.sort((c,d)=>{let p=d.idx-c.idx;return 0!=p?p:d.str.length-c.str.length});for(let c of m)s.text=s.text?.substring(0,c.idx)+c.str+s.text?.substring(c.idx)}}getAnsStyle(a,n,t){if(!n)return"";let i=[],s={...n};this.applyStyle([s],t,!0),s.text!=n.text&&""==s.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&i.push("!fl");for(let c of t)c.lineIdx==n.lineIdx&&c.s<=n.b&&n.b<c.e&&i.push(c.style);let m=i&&i.length>0?i.join():"";return m.indexOf("!u")>=0||m.indexOf("!b")>=0||m.indexOf("!hl")>=0||m.indexOf("!cl")>=0||m.indexOf("!fl")>=0?m:""}isRangeIntersec(a,n,t,i){return a<=t&&t<=n||t<=a&&a<=i}getStyleScore(a){let n=0;return a.indexOf("!cl")>=0&&(n+=8),a.indexOf("!u")>=0&&(n+=4),a.indexOf("!i")>=0&&(n+=2),a.indexOf("!b")>=0&&(n+=1),n}}class Rn{constructor(a){(0,r.A)(this,"infos",void 0),this.infos=a}render(a,n="\n"){let i=a.split(n),s=[],l=[],m="";for(let c of i){let d=c;if(d.trim().startsWith("[*")&&d.trim().endsWith("*]")){let p=d.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(p.value){l.length>0&&(s.push(`<table class="q-table ${m}">${l.join("")}</table>`),l=[]);let _=this.infos.get(+p.value[1]);m=_&&_.borderTopSize>0?"border-1":"border-0",d=d.replace(p.value[0],"[*")}let h=d.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");h=h.replaceAll("|","</td><td>"),l.push(h)}else l.length>0&&(s.push(`<table class="q-table ${m}">${l.join("")}</table>`),l=[]),s.push(d)}return l.length>0&&s.push(`<table class="q-table ${m}">`+l.join("")+"</table>"),s.join(n)}}class Cn extends te{constructor(a=!0){super(),(0,r.A)(this,"wmf",void 0),a&&(this.wmf=new WMFConverter)}readFile(a){return new Promise(n=>{this.read(a,!1,t=>{n(t.text)})})}readFileInputEventAsArrayBuffer(a,n){let t=new FileReader;t.onload=function(i){n(i.target.result)},t.readAsArrayBuffer(a)}read(a,n,t,i,s){let l=this,m=(c,d)=>{i&&i(c,d,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(a,function(c){azotaDocx.readDocx(c,m).then(function(d){console.log(d);for(let _ of d.data)"img"==_.type&&("image/x-wmf"==_.contentType||"image/x-emf"==_.contentType?l.convert(_):_.value="data:"+_.contentType+";base64, "+_.value,!_.cssStyle&&_.height&&_.width&&"EMU"==_.measureUnit)&&(_.cssStyle=`width:${+_.width/12700}pt;height:${+_.height/12700}pt;margin-top:0px;`);let p=new Map,h=0;for(let _ of d.data)"img"==_.type&&_.cropInfo&&p.set(h,1),h++;if(t&&0==p.size)t(l.parse(d,n));else{h=0;for(let _ of d.data){if("img"==_.type&&_.cropInfo){const u=h,g=document.createElement("img");g.src=_.value,g.onload=()=>{l.cropImage(_,g),p.delete(u),0==p.size&&t&&t(l.parse(d,n))},g.onerror=()=>{p.delete(u),0==p.size&&t&&t(l.parse(d,n))}}h++}}}).catch(d=>{s&&s(d.message)})})}parseText(a,n=!1){let t=a.split("\n");t=this.processUnderlineAns(t);let i=t.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),s=i,l=new he,m=[];if(n){let c=l.clean(i);i=c.res,m=c.styles}else i=l.render(i);return{text:i,orgText:s,images:[],mathMap:new Map,tableMap:new Map,styles:m}}parse(a,n=!1){let t="",i=[],s=new Map,l=new Map,m=[];for(let u of a.data)if("img"==u.type)i.push({id:u.key,link:u.value,cssStyle:u.cssStyle}),u.cssStyle&&u.cssStyle.split(";").length>2&&m.push([`^\\[img:\\$${u.key}\\$\\]`,`[img:$${u.key}$]\n`]);else if("mathml"==u.type){let g=+u.key.split("_")[1];s.set(u.key,{id:g,str:u.value,raw:u.docx})}else"table"==u.type&&l.set(u.position,u);let c=[],d=-1;for(let u of a.lines){if(d++,0==u.length)continue;let g="";if(Array.isArray(u[0])&&Array.isArray(u[u.length-1])&&Array.isArray(u[Math.floor(u.length/2)])){let f=a.data.filter(T=>T.position==d&&"table"==T.type)[0],A=f?`!!${f.position}!!:`:"";g=f&&+f.borderBottomSize>0||c.length>0&&c[c.length-1].startsWith("[*")?`[*${A} `+u.map(T=>T.map(k=>k.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":u.map(T=>T.map(k=>k.join("")).join("\n")).join(" \t ")}else g=u.join("");for(let f of m)g=g.replaceAll(new RegExp(f[0],"g"),f[1]);let b=g.split("\n");for(let f of b)c.push(f)}c=this.processUnderlineAns(c),t=c.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let p=t,h=new he,_=[];if(n){let u=h.clean(t);t=u.res,_=u.styles}else t=h.render(t),t=new kn(i).render(t),t=new Tn(s).render(t),t=new Rn(l).render(t);return{text:t,orgText:p,images:i,mathMap:s,tableMap:l,styles:_}}processUnderlineAns(a){let n=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,t=0,i=[];for(let s of a){let l=s;if(l=l.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(l)&&""!=l.trim()&&t>0){l=l.replaceAll(/[\s.]+/g,"");let m=l.indexOf("*"),c=0;if(l=l.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let d=a[t-1].match(n);if(d&&l.length==d.length){for(let h of d)a[t-1]=a[t-1].replace(h,h.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${m==c?"*":""}${l.substring(0,1)}:`).replace("$]","]")),i[i.length-1]=a[t-1],l=l.substring(1),c++;t++;continue}}}i.push(s),t++}return i}convert(a){return new Promise(n=>{if("image/x-wmf"==a.contentType)a.value=this.wmf.toPNG("data:"+a.contentType+";base64, "+a.value),n();else{let s=new ToContext2D(0,1),l=this.decodeBase64(a.value);try{FromEMF.Parse(l,s)}catch{}let m=this.scaleCanvas(s.canvas,200,200);a.value=m.toDataURL(),n()}})}decodeBase64(a){return Uint8Array.from(atob(a),function(n){return n.charCodeAt(0)})}scaleCanvas(a,n,t){let i=document.createElement("canvas");return i.width=n,i.height=t,i.getContext("2d")?.drawImage(a,0,0,a.width,a.height,0,0,n,t),i}cropImage(a,n){if(!a.cropInfo)return;let t=a.cropInfo.left?+a.cropInfo.left:0,i=a.cropInfo.top?+a.cropInfo.top:0,s=a.cropInfo.right?+a.cropInfo.right:0,l=a.cropInfo.bottom?+a.cropInfo.bottom:0;if(t+i+s+l==0)return;let m=n.width,c=n.height,d=t*m/1e5,p=i*c/1e5,u=m-s*m/1e5-d,g=c-l*c/1e5-p;const b=document.createElement("canvas");b.width=u,b.height=g,b.getContext("2d")?.drawImage(n,d,p,u,g,0,0,u,g),a.value=b.toDataURL()}}class Fn extends te{readFile(a){return new Promise((n,t)=>{const i=new FileReader;i.onload=()=>{i.result?n(`<img src="${i.result}">`):t(new Error("Failed to read file."))},i.onerror=()=>{t(new Error("Error occurred while reading the file."))},i.readAsDataURL(a)})}}class jn extends te{readFile(a){return new Promise(n=>{const t=new FileReader;t.onload=function(){var i=(0,P.A)(function*(s){n("")});return function(s){return i.apply(this,arguments)}}(),t.readAsArrayBuffer(a)})}}function wn(o,a){if(1&o&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function Mn(o,a){1&o&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function En(o,a){if(1&o&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function Nn(o,a){if(1&o&&e.nrm(0,"span",22),2&o){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function $n(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,Mn,7,0,"div",13)(4,En,3,4,"span",14)(5,Nn,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const i=e.eBV(n).index,s=e.XpG();return e.Njj(s.remove(i))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&o){const n=a.$implicit,t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.isReading),e.R7$(),e.Y8G("ngIf",!t.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!t.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let Gn=(()=>{var o;class a{constructor(){(0,r.A)(this,"name",""),(0,r.A)(this,"onAddFile",new e.bkB),(0,r.A)(this,"onStartReading",new e.bkB),(0,r.A)(this,"files",[]),(0,r.A)(this,"isReading",!1),(0,r.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",i=>{if(this.err="",i.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let c,l={file:i,name:this.name,content:""};switch(this.files.push(l),E.getFileExt(i.name)){case"pdf":c=new jn;break;case"docx":c=new Cn;break;case"jpg":case"png":case"jpeg":c=new Fn}this.isReading=!0,this.onStartReading.emit(),c?.readFile(i).then(d=>{l.content=d,this.isReading=!1,this.onAddFile.emit(l)})})},200)}remove(t){this.files.splice(t,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(t,i){1&t&&(e.DNE(0,wn,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,$n,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&t&&(e.Y8G("ngIf",i.err),e.R7$(),e.Mz_("id","dropzone-basic-",i.name,""),e.R7$(8),e.Y8G("ngForOf",i.files))},dependencies:[v.MD,v.Sq,v.bT,x.YN,x.qT,x.cb,x.cV,_e]})),a})();function On(o,a){if(1&o){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.showInfo(i.value.desc))}),e.k0s()}}function zn(o,a){if(1&o&&(e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,On,1,0,"i",6),e.k0s(),e.nrm(4,"input",7),e.k0s()),2&o){const n=e.XpG().$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",t.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function Ln(o,a){if(1&o){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.showInfo(i.value.desc))}),e.k0s()}}function Dn(o,a){if(1&o&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&o){const n=a.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function Bn(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,Ln,1,0,"i",6),e.k0s(),e.j41(4,"select",9),e.mxI("ngModelChange",function(i){e.eBV(n);const s=e.XpG().$implicit;return e.DH7(s.value.data,i)||(s.value.data=i),e.Njj(i)}),e.DNE(5,Dn,2,2,"option",10),e.k0s()()}if(2&o){const n=e.XpG().$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",t.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function Pn(o,a){if(1&o){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.showInfo(i.value.desc))}),e.k0s()}}function Un(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,Pn,1,0,"i",6),e.k0s(),e.j41(4,"textarea",12),e.bIt("input",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.autoResize(i.target))}),e.EFF(5),e.k0s()()}if(2&o){const n=e.XpG().$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",t.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function Hn(o,a){if(1&o){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.showInfo(i.value.desc))}),e.k0s()}}function Yn(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,Hn,1,0,"i",6),e.k0s(),e.j41(4,"app-file-control",13),e.bIt("onStartReading",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onStartReadingFile())})("onAddFile",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onAddFile(i))}),e.k0s()()}if(2&o){const n=e.XpG().$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",t.nodeData.id+"-"+n.key)}}function Vn(o,a){if(1&o){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.showInfo(i.value.desc))}),e.k0s()}}function Xn(o,a){if(1&o&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&o){const n=a.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function Wn(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,Vn,1,0,"i",6),e.k0s(),e.j41(4,"select",9),e.mxI("ngModelChange",function(i){e.eBV(n);const s=e.XpG().$implicit;return e.DH7(s.value.data,i)||(s.value.data=i),e.Njj(i)}),e.DNE(5,Xn,2,2,"option",10),e.k0s()()}if(2&o){const n=e.XpG().$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",t.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",t.lstKeys)}}function Jn(o,a){if(1&o&&(e.j41(0,"div"),e.DNE(1,zn,5,6,"div",3)(2,Bn,6,5,"div",3)(3,Un,6,6,"div",3)(4,Yn,5,3,"div",3)(5,Wn,6,5,"div",3),e.k0s()),2&o){const n=a.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}let qn=(()=>{var o;class a{set data(t){this.nodeData=t}constructor(t,i){(0,r.A)(this,"ngZone",void 0),(0,r.A)(this,"appService",void 0),(0,r.A)(this,"appId",0),(0,r.A)(this,"nodeData",void 0),(0,r.A)(this,"lstKeys",[]),(0,r.A)(this,"onUploaded",new e.bkB),(0,r.A)(this,"onStartUpload",new e.bkB),this.ngZone=t,this.appService=i}ngOnInit(){let t=!1;for(let i of this.nodeData.conf)i.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+i.key)??"","key"==i.value.type&&(t=!0);t&&this.appService?.listKeys().subscribe(i=>{this.lstKeys=i}),setTimeout(()=>{document.querySelectorAll(".form-node-renderred textarea").forEach(s=>{this.autoResize(s)})},200)}autoResize(t){t.style.height="50px",t.style.overflowY="hidden",t.style.height=t.scrollHeight+10+"px"}showInfo(t){alert(t)}onAddFile(t){this.onUploaded.emit(t)}onStartReadingFile(){this.onStartUpload.emit()}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(e.SKi),e.rXU(Y))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-form-node"]],inputs:{appId:"appId",data:"data"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"form-node-renderred"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(t,i){1&t&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Jn,6,5,"div",2),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",i.nodeData.conf))},dependencies:[v.MD,v.Sq,v.bT,x.YN,x.xH,x.y7,x.wz,x.BC,x.vS,Gn]})),a})();function Kn(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",3)(1,"img",4),e.bIt("mousedown",function(){const i=e.eBV(n).index,s=e.XpG();return e.Njj(s.setSelection(i))}),e.k0s()()}if(2&o){const n=a.$implicit,t=a.index,i=e.XpG();e.ZvI("scene-layer scene-mode-player-",i.ratio916?"9-16":"16-9",""),e.Mz_("id","dom-",n.objName,""),e.R7$(),e.ZvI("s-element player scene-mode-player-",i.ratio916?"9-16":"16-9"," h-100"),e.Y8G("src",i.ratio916?i.demo916[t]:i.demo169[t],e.B4B)}}function Zn(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",5)(1,"span",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.play())}),e.k0s(),e.j41(2,"span",7),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.resetPos())}),e.k0s(),e.j41(3,"span",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.edit())}),e.k0s()()}if(2&o){const n=e.XpG();e.R7$(),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px cursor-pointer me-3"),e.R7$(2),e.ZvI("tf-icons bx bx-",n.isEditMode?"x":"pencil"," bx-22px cursor-pointer me-3")}}let ge=(()=>{var o;class a{constructor(){(0,r.A)(this,"varname",""),(0,r.A)(this,"mode","editor"),(0,r.A)(this,"lstObj",[]),(0,r.A)(this,"animName",""),(0,r.A)(this,"ratio916",!1),(0,r.A)(this,"demo169",["/ai-mod-assets/images/demo-16-9.png","/ai-mod-assets/images/demo-16-9-1.png"]),(0,r.A)(this,"demo916",["/ai-mod-assets/images/demo-9-16.png","/ai-mod-assets/images/demo-9-16-1.png"]),(0,r.A)(this,"info",""),(0,r.A)(this,"projectId","ObjAnim"),(0,r.A)(this,"sheet",void 0),(0,r.A)(this,"isPlaying",!1),(0,r.A)(this,"isEditMode",!1),(0,r.A)(this,"animObjs",[]),(0,r.A)(this,"canMove",{}),(0,r.A)(this,"startPos",[0,0]),(0,r.A)(this,"curTranslate",[]),(0,r.A)(this,"isDrag",!1),(0,r.A)(this,"obj",void 0),(0,r.A)(this,"curIdx",0)}set conf(t){let i=document.createElement("div");i.innerHTML=t;let s=i.querySelector("anim-editor");if(s){let l=JSON.parse(s.innerHTML);this.varname=s.getAttribute("var-name")??"",this.animName=l.animName,this.lstObj=l.listObj}}ngAfterViewInit(){localStorage.removeItem("theatre-0.4.persistent");let i=!1;this.projectId="ObjAnim"+(new Date).getTime();try{Theatre.studio.onSelectionChange(s=>{this.obj=s[0],this.obj&&(this.curIdx=this.lstObj.findIndex(l=>l.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),i=!0}catch{E.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js").then(()=>{Theatre.studio.initialize(),Theatre.studio.onSelectionChange(l=>{this.obj=l[0],this.obj&&(this.curIdx=this.lstObj.findIndex(m=>m.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),this.loadAnim()})}i&&this.loadAnim(),this.info=JSON.stringify(this.lstObj,null,2)}setSelection(t){Theatre.studio.setSelection([this.animObjs[t]])}play(){this.sheet&&(this.isPlaying?(this.isPlaying=!1,this.sheet.sequence.pause()):(this.isPlaying=!0,this.sheet.sequence.play({iterationCount:1/0})))}edit(){this.isEditMode?(this.isEditMode=!1,Theatre.studio.ui.hide()):(this.isEditMode=!0,Theatre.studio.ui.restore())}loadAnim(){localStorage.removeItem("theatre-0.4.persistent");let t={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:2.5,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]};this.curIdx=0,this.curTranslate=[];let s=0;for(let c of this.lstObj){this.canMove[c.objName]={},this.curTranslate.push([0,0]);let d={};for(let u of c.propAnims)d[u.propName]=u.keyframes.length>0?u.keyframes[0].value:0,"x"==u.propName&&(this.canMove[c.objName].x=!0),"y"==u.propName&&(this.canMove[c.objName].y=!0);t.sheetsById.Sheet1.staticOverrides.byObject[c.objName]=d;let p={},h={},_=0;for(let u of c.propAnims){let g=`${_}-vfsKxxzE`,b={type:"BasicKeyframedTrack",__debugName:`${c.objName}:["${u.propName}"]`,keyframes:[]},f=0,A=[];for(let S of u.keyframes)0==f&&A.push([S.cubicBezier[0],S.cubicBezier[1]]),A.push([S.cubicBezier[0],S.cubicBezier[1]]),A.push([S.cubicBezier[2],S.cubicBezier[3]]),b.keyframes.push({id:`${s}F${_}zl_kv${f}V`,position:S.timePosition,connectedRight:!0,handles:[A[2*f][0],A[2*f][1],A[2*f+1][0],A[2*f+1][1]],value:S.value,type:"bezier"}),f++;p[g]=b,h[`["${u.propName}"]`]=g,_++}t.sheetsById.Sheet1.sequence.tracksByObject[c.objName]={trackData:p,trackIdByPropPath:h},s++}const m=Theatre.core.getProject(this.projectId,{state:t}).sheet("Sheet1");this.sheet=m,this.animObjs=[];for(let c of this.lstObj){let d={};const p={};for(let u of c.propAnims){d[u.propName]=u.range&&u.range.length>0?Theatre.core.types.number(u.default,{range:u.range}):u.default;let g=u.domStyle.split(":"),b=E.minusToCamelCase(g[0].trim()),f=g[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+u.propName+"}");p[b]=p[b]?p[b]+" "+f:f}let h=m.object(c.objName,d);this.animObjs.push(h);const _=c.objName;h.onValuesChange(u=>{const g=document.getElementById("dom-"+_),b=/\$\{(.*?)\}/g;for(const f in p)if(p.hasOwnProperty(f)){let S,A=p[f];for(;null!==(S=b.exec(p[f]));)A=A.replaceAll(S[0],u[S[1]]);g&&(g.style[f]=A.replaceAll(";",""))}}),Theatre.studio.setSelection([h])}document.onmouseup=c=>{c.preventDefault(),this.endDrag(c)},document.onmousemove=c=>{c.preventDefault(),this.onMove(c)}}startDrag(t){t.preventDefault(),this.obj&&"editor"==this.mode&&(this.isDrag=!0,this.startPos=[t.x,t.y])}onMove(t){if(!this.isDrag)return;let i=t.x-this.startPos[0]+this.curTranslate[this.curIdx][0],s=t.y-this.startPos[1]+this.curTranslate[this.curIdx][1];Theatre.studio.transaction(({set:l})=>{this.canMove[this.lstObj[this.curIdx].objName].x&&l(this.obj.props.x,i),this.canMove[this.lstObj[this.curIdx].objName].y&&l(this.obj.props.y,s)})}endDrag(t){this.isDrag&&(this.isDrag=!1,this.curTranslate[this.curIdx]=[t.x-this.startPos[0]+this.curTranslate[this.curIdx][0],t.y-this.startPos[1]+this.curTranslate[this.curIdx][1]])}resetPos(){this.curTranslate[this.curIdx]=[0,0],Theatre.studio.transaction(({set:t})=>{t(this.obj.props.x,0),t(this.obj.props.y,0)})}getValue(){const t=Theatre.studio.createContentOfSaveFile(this.projectId),i=this.convertProjectStateToList(t);return{varName:this.varname,value:JSON.stringify({animName:this.animName,listObj:i})}}convertProjectStateToList(t){const i=[],s=t.sheetsById;for(const l in s){const c=s[l].sequence.tracksByObject;let d=0;for(const p in c){const{trackData:h,trackIdByPropPath:_}=c[p],u=[];let g=0;for(const b in _){const A=h[_[b]];if(A&&A.keyframes){const S=A.keyframes.map(I=>({timePosition:I.position,cubicBezier:I.handles,value:I.value}));let T=[];for(let I of S)T.push([I.cubicBezier[0],I.cubicBezier[1]]),T.push([I.cubicBezier[2],I.cubicBezier[3]]);T.push(T[0]);for(let I=0;I<S.length;I++)S[I].cubicBezier=[T[2*I+1][0],T[2*I+1][1],T[2*I+2][0],T[2*I+2][1]];const k=b.replace(/\["|\"]/g,"");u.push({propName:k,domStyle:this.lstObj[d].propAnims[g].domStyle,default:S[0]?.value||0,keyframes:S})}g++}i.push({objName:p,propAnims:u}),d++}}return i}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-anim-editor"]],inputs:{varname:"varname",mode:"mode",conf:"conf",ratio916:"ratio916"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[[3,"mousedown"],[3,"id","class",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[3,"id"],["alt","imgElement",3,"mousedown","src"],[1,"text-center","mt-2"],[3,"click"],[1,"tf-icons","bx","bx-reset","bx-22px","cursor-pointer","me-3",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"div",0),e.bIt("mousedown",function(l){return i.startDrag(l)}),e.DNE(1,Kn,2,9,"div",1),e.k0s(),e.DNE(2,Zn,4,6,"div",2)),2&t&&(e.ZvI("scene-container player scene-mode-player-",i.ratio916?"9-16":"16-9",""),e.R7$(),e.Y8G("ngForOf",i.lstObj),e.R7$(),e.Y8G("ngIf","editor"==i.mode))},dependencies:[v.MD,v.Sq,v.bT,x.YN],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto;background-color:#282b2fcc}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 16);height:calc(var(--video-16) / 16);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 16 + 7px);top:calc(var(--video-9) / 32 - 9px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 16 + 7px);top:calc(var(--video-16) / 32 - 9px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}"]})),a})();class Qn{onMsgUpdate(a,n){}onDone(a){}onMsgAdd(a){}onClear(){}onFunctionCall(a,n){}onBeforeSend(){}onSend(){}}class ei extends Qn{constructor(a,n,t,i){super(),(0,r.A)(this,"onUpdate",void 0),(0,r.A)(this,"done",void 0),(0,r.A)(this,"beforeSend",void 0),(0,r.A)(this,"functionCall",void 0),this.onUpdate=a,this.done=n,this.beforeSend=t,this.functionCall=i}onFunctionCall(a,n){this.functionCall&&this.functionCall(a,n)}onMsgUpdate(a,n){this.onUpdate&&this.onUpdate(a,n)}onDone(a){this.done&&this.done(a)}onBeforeSend(){this.beforeSend&&this.beforeSend()}}class ti{constructor(a,n,t){(0,r.A)(this,"api",void 0),(0,r.A)(this,"callback",void 0),(0,r.A)(this,"memType",void 0),(0,r.A)(this,"agentType",{name:"default",placeholder:"Enter your message..."}),(0,r.A)(this,"aiVars",[]),(0,r.A)(this,"lstMessage",[]),this.api=a,this.callback=n,this.memType=t}setMemType(a){this.memType=a}setCallback(a){this.callback=a}send(){this.callback?.onBeforeSend(),this.api.live({name:this.agentType.name,messages:this.lstMessage,vars:this.aiVars,type:this.memType}).subscribe(a=>{this.callback?.onSend();let n=a.data,t="",i="",s={Role:"assistant",Content:""};this.addMessage(s),this.api.stream(n,l=>{if(t+=l.Content??"",s.Content=t,l.ToolCalls){s.ToolCalls||(s.ToolCalls=[]);for(let c of l.ToolCalls){let d=+(c.Type??"0"),p=s.ToolCalls[d];p?p.FunctionCall.Arguments+=c.FunctionCall.Arguments:(s.ToolCalls[d]=c,s.Generating=!0)}}let m=t.replace(i,"");this.noticeUpdate(t,m),i=t,s.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!0)},l=>{""==l&&(s.Generating=!1,s.Content=t,this.callback?.onDone(t),this.getLastMessage()?.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!1),console.log(this.lstMessage))})})}reSend(){this.removeLastMessage(),this.send()}addMessage(a){this.lstMessage.push(a),this.callback?.onMsgAdd(a)}addUserMessage(a,n){let t=[];n&&(t.push({Type:J.Text,Content:a}),t.push(...n.map(s=>({Type:J.ImageUrl,Content:s}))));let i=t.length>0?{Role:"user",Contents:t,Content:a}:{Role:"user",Content:a};this.lstMessage.push(i),this.callback?.onMsgAdd(i)}addToolMessage(a,n){let t={Role:"tool",ToolCallId:a,Content:n};this.lstMessage.push(t),this.callback?.onMsgAdd(t)}addAssistantMessage(a){let n={Role:"assistant",Content:a};this.lstMessage.push(n),this.callback?.onMsgAdd(n)}getMessage(a){return this.lstMessage[a]}getLastMessage(){return this.lstMessage[this.lstMessage.length-1]}removeLastMessage(){this.lstMessage.length>0&&this.removeMessage(this.lstMessage.length-1)}clearChat(){this.lstMessage=[],this.callback?.onClear()}setVars(a){this.aiVars=a}getVars(){return this.aiVars}setAgent(a){this.agentType=a}setAgentName(a){this.agentType={name:a,placeholder:""}}getName(){return this.agentType.name}removeMessage(a){this.lstMessage.splice(a,1)}noticeUpdate(a,n){this.callback?.onMsgUpdate(a,n)}}function ni(o,a){if(1&o&&(e.j41(0,"div",3)(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&o){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.jsCode,"\n        ")}}let fe=(()=>{var o;class a{constructor(){(0,r.A)(this,"varname",""),(0,r.A)(this,"jsCode",""),(0,r.A)(this,"html",""),(0,r.A)(this,"err",""),(0,r.A)(this,"showCode",!1)}set jsInfo(t){let i=document.createElement("div");i.innerHTML=t;let s=i.querySelector("js-runner");s&&(this.jsCode=s.innerHTML.split("```javascript")[1].split("```")[0].replaceAll("&lt;","<").replaceAll("&gt;",">"),this.varname=s.getAttribute("var-name")??"",i.removeChild(s),this.html=i.innerHTML,setTimeout(()=>{this.run()},400))}getValue(){return{varName:this.varname,value:this.jsCode}}run(){try{this.err="",new Function(this.jsCode)()}catch(t){this.err=t.message}}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-js-runner"]],inputs:{varname:"varname",jsInfo:"jsInfo"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[["id","js-result-view"],["id","js-source-code",4,"ngIf"],["title","Show/Hide source code",1,"bx","bx-code","text-white","cursor-pointer",3,"click"],["id","js-source-code"]],template:function(t,i){1&t&&(e.nrm(0,"div",0),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,ni,6,1,"div",1),e.j41(4,"i",2),e.bIt("click",function(){return i.showCode=!i.showCode}),e.k0s()),2&t&&(e.R7$(2),e.JRh(i.err),e.R7$(),e.Y8G("ngIf",i.showCode))},dependencies:[v.MD,v.bT,x.YN]})),a})();function ii(o,a){if(1&o){const n=e.RV6();e.j41(0,"img",7),e.bIt("click",function(){const i=e.eBV(n).index,s=e.XpG(2);return e.Njj(s.selectImg(i))}),e.k0s()}if(2&o){let n;const t=a.$implicit,i=a.index,s=e.XpG(2);e.ZvI("img-small-pick ",(null!==(n=null==s._scene?null:s._scene.selectedImg)&&void 0!==n?n:0)==i?"selected":"",""),e.Y8G("src",t,e.B4B)}}function oi(o,a){if(1&o&&(e.j41(0,"div"),e.DNE(1,ii,1,4,"img",6),e.k0s()),2&o){const n=e.XpG();e.ZvI("scene-layer scene-mode-",n.mode,"-pick"),e.R7$(),e.Y8G("ngForOf",null==n._scene?null:n._scene.imageUrl)}}function ai(o,a){if(1&o&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&o){const n=e.XpG();e.ZvI("scene-layer scene-num-",n.getSize(),""),e.R7$(),e.JRh(n.idx)}}function si(o,a){if(1&o&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&o){const n=a.$implicit,t=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==t._scene?null:t._scene.transitionName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function ri(o,a){if(1&o&&(e.j41(0,"div"),e.nrm(1,"i",8),e.j41(2,"ul",9)(3,"li")(4,"a",10),e.nrm(5,"i"),e.EFF(6,"None"),e.k0s()(),e.DNE(7,si,4,4,"li",11),e.k0s()()),2&o){const n=e.XpG();e.ZvI("scene-layer scene-transit-",n.getSize(),""),e.R7$(),e.ZvI("dropdown-toggle hide-arrow bx bx-exit cursor-pointer ",null!=n._scene&&n._scene.transitionName?"text-link":"text-muted",""),e.R7$(4),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.transitionName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstTransition)}}function li(o,a){if(1&o&&(e.j41(0,"div"),e.nrm(1,"div",12),e.k0s()),2&o){const n=e.XpG();e.ZvI("scene-layer scene-time scene-time-progress-",n.getSize(),""),e.R7$(),e.Aen("width:"+n.progress+"%")}}function ci(o,a){if(1&o&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"secondsToTime"),e.nI1(4,"secondsToTime"),e.k0s()()),2&o){const n=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,2,n.curTime),"/",e.bMT(4,4,n.duration),"")}}function mi(o,a){if(1&o){const n=e.RV6();e.j41(0,"audio",15),e.bIt("timeupdate",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.updatePlayTime())})("ended",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.isPlaying=!1)}),e.nrm(1,"source",16),e.k0s()}if(2&o){const n=e.XpG();e.R7$(),e.Y8G("src",null==n._scene?null:n._scene.audioUrl,e.B4B)}}function di(o,a){if(1&o){const n=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG(2);return e.Njj(s.setAnim(i.animName))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&o){const n=a.$implicit,t=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==t._scene?null:t._scene.animationName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function pi(o,a){if(1&o&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&o){const n=a.$implicit,t=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",t.capStyle==n?"text-link":"invisible",""),e.R7$(),e.JRh(n)}}function ui(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.play())}),e.nrm(2,"span"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.nrm(5,"i",21),e.k0s(),e.j41(6,"ul",9)(7,"li")(8,"a",10),e.nrm(9,"i"),e.EFF(10,"None"),e.k0s()(),e.DNE(11,di,4,4,"li",11),e.k0s()(),e.j41(12,"div",19)(13,"button",22),e.nrm(14,"i",23),e.k0s(),e.j41(15,"ul",9)(16,"li")(17,"a",10),e.nrm(18,"i"),e.EFF(19,"None"),e.k0s()(),e.DNE(20,pi,4,4,"li",11),e.k0s()(),e.j41(21,"div",19)(22,"button",24),e.nrm(23,"i",25),e.k0s(),e.j41(24,"ul",9)(25,"li",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.genImage())}),e.j41(26,"a",10),e.nrm(27,"i",27),e.EFF(28,"Re-Generate Image"),e.k0s()(),e.j41(29,"li",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.genVideo())}),e.j41(30,"a",10),e.nrm(31,"i",28),e.EFF(32,"Image to Video"),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px"),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.animationName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstImgAnim),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==n.capStyle?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstCapStyle)}}let _i=(()=>{var o;class a{constructor(){(0,r.A)(this,"_scene",void 0),(0,r.A)(this,"mode","player"),(0,r.A)(this,"size","9:16"),(0,r.A)(this,"idx",0),(0,r.A)(this,"selected",!1),(0,r.A)(this,"showTransit",!0),(0,r.A)(this,"capStyle",""),(0,r.A)(this,"animCore",void 0),(0,r.A)(this,"projectId",""),(0,r.A)(this,"onChangeCapStyle",new e.bkB),(0,r.A)(this,"onChangeAnim",new e.bkB),(0,r.A)(this,"lstCapStyle",["wordHighlight","lineHighlight"]),(0,r.A)(this,"lstImgAnim",[]),(0,r.A)(this,"lstTransition",[]),(0,r.A)(this,"isPlaying",!1),(0,r.A)(this,"sheet",void 0),(0,r.A)(this,"curTime",0),(0,r.A)(this,"curAnimName",""),(0,r.A)(this,"progress",0),(0,r.A)(this,"duration",0)}set scene(t){this._scene=t,this.progress=0,this.duration=this._scene.duration,this.curTime=0;let i=document.getElementById("audioElement");i&&(i.pause(),i.currentTime=0,setTimeout(()=>{i.load()},400)),this.curAnimName="",this.sheet=void 0}ngAfterViewInit(){if("player"!=this.mode)return;localStorage.removeItem("theatre-0.4.persistent");let i=!1;try{this.animCore=Theatre.core,i=!0}catch{E.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js").then(()=>{this.animCore=Theatre.core})}}changeCapStyle(t){this.capStyle=t,this.onChangeCapStyle.emit(t)}changeAnim(t){this._scene.animationName=t,this.onChangeAnim.emit(t)}set lstAnim(t){"player"==this.mode&&(this.lstImgAnim=t.filter(i=>1==i.listObj.length),this.lstTransition=t.filter(i=>2==i.listObj.length))}ngOnInit(){}setAnim(t){this._scene.animationName=t,this.loadAnim()}getSize(){return this.size.replace(":","-")}genImage(){alert(this._scene?.imagePrompt)}genVideo(){alert(this._scene?.imagePrompt)}getAnimation(t){return this.lstImgAnim.find(i=>i.animName==t)}selectImg(t){this._scene&&(this._scene.selectedImg=t)}play(){let t=10;!this.curAnimName&&this._scene?.animationName&&(this.loadAnim(),t=500),setTimeout(()=>{let i=document.getElementById("audioElement");this.isPlaying?(i&&i.pause(),this.sheet&&this.sheet.sequence.pause()):(i&&i.play(),this.sheet&&this.sheet.sequence.play().then(()=>{this.isPlaying=!1})),this.isPlaying=!this.isPlaying},t)}loadAnim(){this.animCore&&this._scene?.animationName&&(this.curAnimName=this._scene.animationName,this.projectId="ObjAnim"+(new Date).getTime(),this.parseAnim(["dom-img-player"],this.duration))}parseAnim(t,i){localStorage.removeItem("theatre-0.4.persistent");let l={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:i,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]},c=0,d=this.getAnimation(this._scene?.animationName??"")?.listObj??[];if(0==d.length)return;let p=0;for(let b of d)for(let f of b.propAnims)for(let A of f.keyframes)A.timePosition>p&&(p=A.timePosition);for(let b of d){let f={};for(let k of b.propAnims)f[k.propName]=k.keyframes.length>0?k.keyframes[0].value:0;l.sheetsById.Sheet1.staticOverrides.byObject[b.objName]=f;let A={},S={},T=0;for(let k of b.propAnims){let j=`${T}-vfsKxxzE`,R={type:"BasicKeyframedTrack",__debugName:`${b.objName}:["${k.propName}"]`,keyframes:[]},I=0,N=[];for(let w of k.keyframes)0==I&&N.push([w.cubicBezier[0],w.cubicBezier[1]]),N.push([w.cubicBezier[0],w.cubicBezier[1]]),N.push([w.cubicBezier[2],w.cubicBezier[3]]),R.keyframes.push({id:`${c}F${T}zl_kv${I}V`,position:1*w.timePosition,connectedRight:!0,handles:[N[2*I][0],N[2*I][1],N[2*I+1][0],N[2*I+1][1]],value:w.value,type:"bezier"}),I++;A[j]=R,S[`["${k.propName}"]`]=j,T++}l.sheetsById.Sheet1.sequence.tracksByObject[b.objName]={trackData:A,trackIdByPropPath:S},c++}const _=Theatre.core.getProject(this.projectId,{state:l}),u=_.sheet("Sheet1");this.sheet=u;let g=[];c=0;for(let b of d){let f={};const A={};for(let k of b.propAnims){f[k.propName]=k.range&&k.range.length>0?Theatre.core.types.number(k.default,{range:k.range}):k.default;let j=k.domStyle.split(":"),R=j[0].trim(),I=j[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+k.propName+"}");A[R]=A[R]?A[R]+" "+I:I}let S=u.object(b.objName,f);g.push(S);const T=t[c];S.onValuesChange(k=>{const j=document.getElementById(T),R=/\$\{(.*?)\}/g;for(const I in A)if(A.hasOwnProperty(I)){let w,N=A[I];for(;null!==(w=R.exec(A[I]));)N=N.replaceAll(w[0],k[w[1]]);j&&(j.style[I]=N.replaceAll(";",""))}}),c++}_.ready.then(()=>{this.sheet=u})}updatePlayTime(){let t=document.getElementById("audioElement");t&&(this.progress=t.currentTime/t.duration*100,this.duration=t.duration,this.curTime=t.currentTime)}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-scene-view"]],inputs:{scene:"scene",mode:"mode",size:"size",idx:"idx",selected:"selected",showTransit:"showTransit",capStyle:"capStyle",lstAnim:"lstAnim"},outputs:{onChangeCapStyle:"onChangeCapStyle",onChangeAnim:"onChangeAnim"},standalone:!0,features:[e.aNF],decls:10,vars:25,consts:[[3,"id"],["alt","imgElement",3,"src"],[3,"class",4,"ngIf"],["class","scene-layer scene-duration small",4,"ngIf"],["id","audioElement","class","d-none",3,"timeupdate","ended",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],["alt","imgElement",3,"class","src","click",4,"ngFor","ngForOf"],["alt","imgElement",3,"click","src"],["matTooltip","Transition","data-bs-toggle","dropdown","aria-expanded","false"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"scene-layer","scene-duration","small"],[1,"duration"],["id","audioElement",1,"d-none",3,"timeupdate","ended"],["type","audio/mpeg",3,"src"],[1,"text-center","mt-2"],["type","button","matTooltip","Play",1,"btn","btn-icon","btn-label-primary",3,"click"],[1,"btn-group","ms-3"],["type","button","matTooltip","Animation","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-timer"],["type","button","matTooltip","Caption Style","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-captions"],["type","button","matTooltip","Generate with AI","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bxs-magic-wand"],[3,"click"],[1,"bx","bx-image","scaleX-n1-rtl","me-3"],[1,"bx","bx-movie-play","scaleX-n1-rtl","me-3"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"]],template:function(t,i){if(1&t&&(e.j41(0,"div")(1,"div",0),e.nrm(2,"img",1),e.k0s(),e.DNE(3,oi,2,4,"div",2)(4,ai,2,4,"div",2)(5,ri,8,10,"div",2)(6,li,2,5,"div",2)(7,ci,5,6,"div",3)(8,mi,2,1,"audio",4),e.k0s(),e.DNE(9,ui,33,11,"div",5)),2&t){let s;e.ee0("scene-container ",i.mode," scene-mode-",i.mode,"-",i.getSize()," ",i.selected?"selected":"",""),e.R7$(),e.STu("scene-layer scene-mode-",i.mode,"-",i.getSize(),""),e.Mz_("id","dom-img-",i.mode,""),e.R7$(),e.ZWY("s-element ",i.mode," scene-mode-",i.mode,"-",i.getSize()," h-100"),e.Y8G("src",null==i._scene?null:i._scene.imageUrl[null!==(s=null==i._scene?null:i._scene.selectedImg)&&void 0!==s?s:0],e.B4B),e.R7$(),e.Y8G("ngIf","player"==i.mode),e.R7$(),e.Y8G("ngIf","thumb"==i.mode),e.R7$(),e.Y8G("ngIf",i.showTransit&&"thumb"==i.mode),e.R7$(),e.Y8G("ngIf","player"==i.mode),e.R7$(),e.Y8G("ngIf","player"==i.mode),e.R7$(),e.Y8G("ngIf","player"==i.mode&&(null==i._scene?null:i._scene.audioUrl)),e.R7$(),e.Y8G("ngIf","player"==i.mode)}},dependencies:[v.MD,v.Sq,v.bT,x.YN,U.uc,U.oV,xn],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 24);height:calc(var(--video-16) / 24);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 24 + 7px);top:calc(var(--video-9) / 46 - 11px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 24 + 7px);top:calc(var(--video-16) / 46 - 11px)}.scene-num-16-9[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-9) / 46 - 11px)}.scene-num-9-16[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-16) / 46 - 11px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}.img-small-pick[_ngcontent-%COMP%]{width:40px;display:block;margin-bottom:5px;border-radius:5px}.scene-mode-player-pick[_ngcontent-%COMP%]{position:fixed;margin-left:-45px}.img-small-pick.selected[_ngcontent-%COMP%]{outline:2px solid #fff}.btn-label-secondary[_ngcontent-%COMP%]{color:#8592a3!important;border-color:#0000;background:#393c50}.btn-label-secondary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#788393!important;color:#fff!important;box-shadow:0 .125rem .25rem #8592a366!important}.btn-label-primary[_ngcontent-%COMP%]{color:#696cff!important;border-color:#0000;background:#35365f}.btn-label-primary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#5f61e6!important;color:#fff!important;box-shadow:0 .125rem .25rem #696cff66!important}.scene-duration[_ngcontent-%COMP%]{bottom:5px;right:10px;opacity:.8}"]})),a})();function hi(o,a){if(1&o&&(e.j41(0,"div")(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&o){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.error,"\n        ")}}function gi(o,a){if(1&o){const n=e.RV6();e.j41(0,"app-scene-view",5),e.bIt("onChangeCapStyle",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.changeCapStyle(i))}),e.k0s()}if(2&o){let n;const t=e.XpG(2);e.Y8G("mode","player")("lstAnim",t.lstAnim)("capStyle",null!==(n=null==t.lstScene?null:t.lstScene.cap_style)&&void 0!==n?n:"")("scene",t.curScene)}}function fi(o,a){if(1&o&&(e.j41(0,"div",3),e.DNE(1,gi,1,4,"app-scene-view",4),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curScene)}}function vi(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const i=e.eBV(n).index,s=e.XpG(2);return e.Njj(s.select(i))}),e.nrm(1,"app-scene-view",11),e.k0s()}if(2&o){const n=a.$implicit,t=a.index,i=e.XpG(2);e.R7$(),e.Y8G("mode","thumb")("selected",t==i.curIdx)("showTransit",t+1<i.lstScene.list_scenes.length)("idx",t+1)("scene",n)}}function bi(o,a){if(1&o&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.DNE(3,vi,2,5,"div",9),e.k0s()()()),2&o){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",null==n.lstScene?null:n.lstScene.list_scenes)}}let ve=(()=>{var o;class a{constructor(t){(0,r.A)(this,"app",void 0),(0,r.A)(this,"sceneInfo",'<scene-editor var-name="final-scene" anim-db="anim">{\n        "list_scenes": [\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/188693b0fa2147719389523c4192c99a.png","https://images.piclumen.com/normal/20241221/16/49df6b1abde1419b803ed7cbe74dc7c9.png","https://images.piclumen.com/normal/20241221/16/f05705a71df94fec9d1dfaffb348ef3e.png","https://images.piclumen.com/normal/20241221/16/33c4764f82a441588e68d903837ff0e8.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A beautiful, enchanting garden with luminescent flowers, sparkling streams, and fairy lights hanging from the trees. In the center, Lila the Curious Fairy hovers gently above a bed of multicolored tulips, her lavender wings shimmering in the moonlight\'s glow. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/170fe0d8ab564847aa974469f74f4992.png","https://images.piclumen.com/normal/20241221/16/9b2469bc7bc6421fae9caeeb8d9584b5.png","https://images.piclumen.com/normal/20241221/16/a7609dac63a445bd86a050af174072c1.png","https://images.piclumen.com/normal/20241221/16/cc4e75cc24974e379825ef30d006b761.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Oliver the Wise Owl perched on a sturdy oak branch, wearing his ornate monocle. Lila sits nearby, listening intently, her eyes wide with curiosity. The backdrop showcases a scenic view of the garden bathed in golden twilight, with gentle breezes rustling the leaves. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/251ec29683514a0086fa73f60725f1d4.png","https://images.piclumen.com/normal/20241221/16/f71fd6e1fb21418886f377ba82e1dc39.png","https://images.piclumen.com/normal/20241221/16/f89496edc9e548b596a4698f1e672365.png","https://images.piclumen.com/normal/20241221/16/fdce48c02d68445080e2d988b29d71b3.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Close-up of Oliver as he narrates his tale with deep, expressive gestures. Lila, full of wonder, leans closer, her wings shimmering faintly behind her. Sunbeams dance across the garden, illuminating their faces with soft, magical light. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/cabeb362c9164eebb2683241a21518b9.png","https://images.piclumen.com/normal/20241221/16/14dbdcd6af4c49b78c046748cf83c8d0.png","https://images.piclumen.com/normal/20241221/16/25ff7aeb238f4c6da80bfdba627e811a.png","https://images.piclumen.com/normal/20241221/16/df8754a9c2ea4420ac94771805f4c3fb.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila the Curious Fairy flying gracefully over a vibrant garden path. Below, Hugo the Playful Squirrel follows with spirited leaps. The path is lined with flowers that seem to sway with excitement and tall, whispering grasses. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/1da1c0ae592244ee9e35aa1c471a4ddd.png","https://images.piclumen.com/normal/20241221/16/fd8a08e51ec24e68b313763c84d64af0.png","https://images.piclumen.com/normal/20241221/16/ba3b4cefb2154578a5f5659a5604ee93.png","https://images.piclumen.com/normal/20241221/16/6735728d42164b099d6916f731135dad.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila and Hugo amidst an enchanting section of the garden, surrounded by clusters of bioluminescent mushrooms and arches of luminous roses. A gentle breeze guides them, ruffling Hugo\u2019s fluffy tail. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/a4233ab51efe4e1a95da8cfd4907af49.png","https://images.piclumen.com/normal/20241221/16/623cdcd0371e46af9f415e3f342feac5.png","https://images.piclumen.com/normal/20241221/16/59311e5a2b594637b46fc3363321475a.png","https://images.piclumen.com/normal/20241221/16/ebf8d09d89a14da4b57c299b1c894daa.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A small, intricately designed door, partially obscured by leafy vines. Lila hovers right in front of it, eyes wide with excitement, while Hugo stands beside her, tapping the door eagerly. The maple tree casts dappled sunlight onto the ground, creating a mystical atmosphere. style: whimsical 3D Pixar style"\n            },\n        \n        ],\n        "size": "9:16",\n        "cap_style": "word"\n    }</scene-editor>'),(0,r.A)(this,"onSave",new e.bkB),(0,r.A)(this,"lstScene",void 0),(0,r.A)(this,"lstAnim",[]),(0,r.A)(this,"varName",""),(0,r.A)(this,"error",""),(0,r.A)(this,"curIdx",0),(0,r.A)(this,"curScene",void 0),this.app=t}getValue(){return{varName:this.varName,value:JSON.stringify(this.lstScene)}}ngOnInit(){let t=document.createElement("div");t.innerHTML=this.sceneInfo;let i=t.querySelector("scene-editor"),s=this.sceneInfo,l="";i&&(s=i.innerHTML,this.varName=i.getAttribute("var-name")??"",l=i.getAttribute("anim-db")??"");try{this.lstScene=E.parseJson(s)}catch(m){this.error=m+"\n"+E.replaceAllBase64Urls(s)}(this.lstScene?.list_scenes.length??0)>0&&(this.curScene=this.lstScene?.list_scenes[0]),this.app.listData({name:"",spec:l}).subscribe(m=>{this.lstAnim=m.map(c=>JSON.parse(c.content))})}select(t){this.curIdx=t,this.curScene=this.lstScene?.list_scenes[t]}changeCapStyle(t){this.lstScene.cap_style=t}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(Y))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-scene-editor"]],inputs:{sceneInfo:"sceneInfo"},outputs:{onSave:"onSave"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","layout-bot",4,"ngIf"],[1,"mb-3"],[3,"mode","lstAnim","capStyle","scene","onChangeCapStyle",4,"ngIf"],[3,"onChangeCapStyle","mode","lstAnim","capStyle","scene"],[1,"layout-bot"],[1,"card"],[1,"card-body","list-scenes"],["class","mb-3",3,"click",4,"ngFor","ngForOf"],[1,"mb-3",3,"click"],[3,"mode","selected","showTransit","idx","scene"]],template:function(t,i){1&t&&e.DNE(0,hi,6,1,"div",0)(1,fi,2,1,"div",1)(2,bi,4,1,"div",2),2&t&&(e.Y8G("ngIf",i.error),e.R7$(),e.Y8G("ngIf",!i.error),e.R7$(),e.Y8G("ngIf",!i.error))},dependencies:[v.MD,v.Sq,v.bT,x.YN,_i],styles:[".list-scenes[_ngcontent-%COMP%]{width:115px;max-height:95vh;overflow-y:auto}.layout-bot[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px}"]})),a})();const Ii=["chatInput"],Ai=["interacComp"];function yi(o,a){if(1&o&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml")),2&o){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.chatboxInfo.msg),e.npT)}}function Si(o,a){if(1&o&&e.nrm(0,"app-anim-editor",11,0),2&o){const n=e.XpG(2);e.Y8G("conf",n.animEditorInfo)}}function xi(o,a){if(1&o&&e.nrm(0,"app-js-runner",12,0),2&o){const n=e.XpG(2);e.Y8G("jsInfo",n.jsRunnerInfo)}}function ki(o,a){if(1&o&&e.nrm(0,"app-scene-editor",13,0),2&o){const n=e.XpG(2);e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Ti(o,a){if(1&o&&(e.j41(0,"div",7),e.DNE(1,Si,2,1,"app-anim-editor",8)(2,xi,2,1,"app-js-runner",9)(3,ki,2,1,"app-scene-editor",10),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.animEditorInfo),e.R7$(),e.Y8G("ngIf",n.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",n.sceneEditorInfo)}}function Ri(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",7)(1,"textarea",14,1),e.bIt("input",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.autoResize())})("keydown",function(i){e.eBV(n);const s=e.XpG();return e.Njj(s.keydown(i))}),e.mxI("ngModelChange",function(i){e.eBV(n);const s=e.XpG();return e.DH7(s.userMsg,i)||(s.userMsg=i),e.Njj(i)}),e.k0s()()}if(2&o){const n=e.XpG();e.R7$(),e.Y8G("readOnly",n.isRunning),e.R50("ngModel",n.userMsg)}}let Ci=(()=>{var o;class a{constructor(t,i){(0,r.A)(this,"api",void 0),(0,r.A)(this,"zone",void 0),(0,r.A)(this,"chatInput",void 0),(0,r.A)(this,"interacComp",void 0),(0,r.A)(this,"chatboxInfo",void 0),(0,r.A)(this,"elId",""),(0,r.A)(this,"agentRunner",void 0),(0,r.A)(this,"onAgentResponseComplete",new e.bkB),(0,r.A)(this,"lastValue",void 0),(0,r.A)(this,"sceneEditorInfo",""),(0,r.A)(this,"animEditorInfo",""),(0,r.A)(this,"jsRunnerInfo",""),(0,r.A)(this,"animDB",""),(0,r.A)(this,"default",!0),(0,r.A)(this,"isRunning",!1),(0,r.A)(this,"userMsg",""),(0,r.A)(this,"onAction",new e.bkB),(0,r.A)(this,"onRunJS",new e.bkB),(0,r.A)(this,"onBind",new e.bkB),(0,r.A)(this,"showChatBox",!1),(0,r.A)(this,"queue",[]),(0,r.A)(this,"curFullmsg",""),this.api=t,this.zone=i}getValue(){return this.interacComp&&!this.default?this.interacComp.getValue():this.showChatBox?this.lastValue:void 0}ngOnInit(){this.agentRunner=new ti(this.api,new ei((t,i)=>{this.renderChunk(i)},t=>{this.queue.push({str:t,t:-1})})),this.agentRunner.setAgentName(this.chatboxInfo.req.Req.Name),this.agentRunner.setVars(this.chatboxInfo.req.Req.Vars??[]);for(let t of this.chatboxInfo.req.Req.Messages)this.agentRunner.addMessage(t);this.chatboxInfo.req?.Req.Type&&this.agentRunner.setMemType(this.chatboxInfo.req?.Req.Type),"__AGENT_STREAM___"==this.chatboxInfo.msg&&setTimeout(()=>{this.send()},500)}agentDone(t){this.zone.run(()=>{this.isRunning=!1;let i=document.querySelector(".msg-loading"),s=i?i.innerHTML:"",l=i?.querySelector("chatbox")?.getAttribute("var-name")??"";this.lastValue={value:t,varName:l},document.querySelector(".msg-loading").className="msg-assistant",this.onAgentResponseComplete.emit({msg:t,html:s}),this.renderExternalUI(s),this.renderAction(t)})}reset(){this.sceneEditorInfo="",this.animEditorInfo="",this.jsRunnerInfo="",this.animDB="",this.default=!0}renderExternalUI(t){this.reset();let i=document.createElement("div");i.innerHTML=t;let s=i.querySelector("scene-editor");return s?(this.sceneEditorInfo=t,void(this.default=!1)):(s=i.querySelector("anim-editor"),s?(this.animEditorInfo=t,void(this.default=!1)):(s=i.querySelector("js-runner"),s?(this.jsRunnerInfo=t,void(this.default=!1)):void 0))}send(t){if(t?.preventDefault(),this.isRunning)return;let i=document.getElementById("chat-his-"+this.elId);if(i){if(this.userMsg){let l=document.createElement("div");l.className="msg-user badge bg-label-primary p-3 mb-3 text-wrap text-start",l.innerHTML=this.userMsg,i.appendChild(l)}let s=document.createElement("div");s.className="msg-loading",s.innerHTML='<div class="card p-5 mb-3">Running...</div>',i.appendChild(s)}this.isRunning=!0,this.userMsg&&this.agentRunner.addUserMessage(this.userMsg),this.agentRunner.send(),this.userMsg="",this.curFullmsg=""}renderAction(t){setTimeout(()=>{let i=this,s=document.querySelectorAll("[bs-action]");for(let c of s){let d=c.getAttribute("bs-action"),p=document.createElement("div");p.className="pt-3 text-center",p.innerHTML=`<span class="btn text-link p-0">${d.split("->")[0].split(":")[2]}</span>`,c.appendChild(p),c.removeAttribute("bs-action"),p.addEventListener("click",function(){i.onAction.emit({act:d,el:c})})}let l=document.querySelectorAll("[bs-run]");for(let c of l){let d=c.getAttribute("bs-run");i.onRunJS.emit({act:d,el:c})}let m=document.querySelectorAll("[bs-edit]");for(let c of m){let d=c.getAttribute("bs-edit");i.onBind.emit({act:d,el:c})}},2e3)}renderControl(){let i=document.querySelector("#chat-his-"+this.elId)?.querySelector(".language-json"),s=i?.innerHTML;if(s)try{s=JSON.stringify(JSON.parse(s.trim()),null,2),i.innerHTML=s.trim()}catch{}}renderChunk(t){let i=t?t.length:0,s=0;for(;s<i;){const l=Math.floor(9*Math.random())+2,m=Math.floor(16*Math.random())+5;this.queue.push({str:t.substring(s,s+l),t:m}),0==s&&1==this.queue.length&&this.startInsertAnim(),s+=l}}startInsertAnim(){let t=this.queue.shift();if(t){if(-1==t.t)return void this.agentDone(t.str);this.curFullmsg+=t.str,this.renderMsg(this.curFullmsg),setTimeout(()=>{this.startInsertAnim()},t.t)}}renderMsg(t){let i=E.parseIncompleteJson(t);if(i&&i!=t&&(i=JSON.stringify(i)),!i)return"";let s=new Map,l=this.chatboxInfo.req?.Req.Vars;for(let d of l){let p=d.split("::");s.set(p[0],d.substring(p[0].length+2))}s.set(this.chatboxInfo.req.Output.Name,i);let m=E.compileTemplate(this.chatboxInfo.html,s);if(document.getElementById("chat-his-"+this.elId)){let d=document.querySelector(".msg-loading");if(d){let p=document.createElement("code");p.innerHTML=m,p.querySelector("chatbox")&&(this.showChatBox=!0);let _=p.querySelectorAll('[bs-data="markdown-view"]');for(let u of _)u.innerHTML=E.markdownToHtml(u.innerHTML.trim());return d.innerHTML=p.innerHTML,this.renderControl(),d.innerHTML}}return""}autoResize(){const t=this.chatInput?.nativeElement;t.style.height="37px",t.style.overflowY="hidden";let i=t.scrollHeight;i>120&&(i=120,t.style.overflowY="auto"),t.style.height=i+"px"}keydown(t){!t.shiftKey&&"Enter"==t.key&&(t.preventDefault(),""!=this.userMsg.trim()&&this.send(t),setTimeout(()=>{this.autoResize()},100))}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(Te),e.rXU(e.SKi))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-chatbox"]],viewQuery:function(t,i){if(1&t&&(e.GBs(Ii,5),e.GBs(Ai,5)),2&t){let s;e.mGM(s=e.lsd())&&(i.chatInput=s.first),e.mGM(s=e.lsd())&&(i.interacComp=s.first)}},inputs:{chatboxInfo:"chatboxInfo",elId:"elId"},outputs:{onAgentResponseComplete:"onAgentResponseComplete",onAction:"onAction",onRunJS:"onRunJS",onBind:"onBind"},standalone:!0,features:[e.aNF],decls:5,vars:8,consts:[["interacComp",""],["chatInput",""],[1,"chatbox"],[3,"id"],[3,"innerHTML",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"innerHTML"],[1,"mt-3"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf"],[3,"jsInfo"],[3,"sceneInfo"],["rows","1","placeholder","Enter your message...",1,"form-control",3,"input","keydown","ngModelChange","readOnly","ngModel"]],template:function(t,i){1&t&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,yi,2,3,"div",4),e.k0s(),e.DNE(3,Ti,4,3,"div",5)(4,Ri,3,2,"div",5),e.k0s()),2&t&&(e.R7$(),e.HbH(i.default||i.isRunning?"":"d-none"),e.Mz_("id","chat-his-",i.elId,""),e.R7$(),e.Y8G("ngIf","__AGENT_STREAM___"!=i.chatboxInfo.msg),e.R7$(),e.Y8G("ngIf",!i.default&&!i.isRunning),e.R7$(),e.Y8G("ngIf",i.showChatBox))},dependencies:[v.MD,v.bT,x.YN,x.me,x.BC,x.vS,ue,ge,ve,fe],styles:["textarea[_ngcontent-%COMP%]{resize:none;overflow-y:hidden;height:37px}"]})),a})(),Fi=(()=>{var o;class a{constructor(){(0,r.A)(this,"zipInfo","")}ngOnInit(){let t=JSON.parse(this.decodeHtml(this.zipInfo.trim()));setTimeout((0,P.A)(function*(){let i=yield E.zipFiles(t,"file.zip",c=>{let d=document.querySelector(".__ZIP_FILE__");d&&(d.innerHTML="Zipping..."+c+"/"+t.length)});const s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.download="file.zip",l.innerHTML="Download (file.zip)";let m=document.querySelector(".__ZIP_FILE__");m&&(m.innerHTML="",m.appendChild(l))}),500)}decodeHtml(t){const i=document.createElement("textarea");return i.innerHTML=t,i.value}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-zip"]],inputs:{zipInfo:"zipInfo"},standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[[1,"__ZIP_FILE__"]],template:function(t,i){1&t&&e.nrm(0,"div",0)},dependencies:[v.MD,x.YN]})),a})();const ji=["interacComp"];function wi(o,a){if(1&o&&e.nrm(0,"app-chatbox",7,0),2&o){const n=e.XpG();e.Y8G("chatboxInfo",n.chatboxInfo)}}function Mi(o,a){if(1&o&&e.nrm(0,"app-scene-editor",8,0),2&o){const n=e.XpG();e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Ei(o,a){if(1&o&&e.nrm(0,"app-anim-editor",9,0),2&o){const n=e.XpG();e.Y8G("conf",n.animEditorInfo)}}function Ni(o,a){if(1&o&&e.nrm(0,"app-js-runner",10,0),2&o){const n=e.XpG();e.Y8G("jsInfo",n.jsRunnerInfo)}}function $i(o,a){if(1&o&&e.nrm(0,"app-zip",11),2&o){const n=e.XpG();e.Y8G("zipInfo",n.zipInfo)}}function Gi(o,a){if(1&o&&(e.nrm(0,"div",12),e.nI1(1,"safeHtml")),2&o){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.template),e.npT)}}let Oi=(()=>{var o;class a{constructor(){(0,r.A)(this,"interacComp",void 0),(0,r.A)(this,"template",""),(0,r.A)(this,"vars",[]),(0,r.A)(this,"chatboxInfo",void 0),(0,r.A)(this,"sceneEditorInfo",""),(0,r.A)(this,"animEditorInfo",""),(0,r.A)(this,"jsRunnerInfo",""),(0,r.A)(this,"zipInfo",""),(0,r.A)(this,"default",!1)}getValue(){return this.interacComp?.getValue()}reset(){this.chatboxInfo=void 0,this.sceneEditorInfo="",this.animEditorInfo="",this.zipInfo="",this.default=!1}ngOnInit(){this.reset();let t=this.template.trim();if("__AGENT_STREAM___"==t)return void(this.chatboxInfo={msg:this.template.trim(),req:JSON.parse(this.vars.find(l=>l.startsWith("__chatbox-agent::"))?.substring(17)??""),html:JSON.parse(this.vars.find(l=>l.startsWith("__chatbox-template::"))?.substring(20)??"")});let i=document.createElement("div");i.innerHTML=t;let s=i.querySelector("scene-editor");s?this.sceneEditorInfo=t:(s=i.querySelector("anim-editor"),s?this.animEditorInfo=t:(s=i.querySelector("js-runner"),s?this.jsRunnerInfo=t:(s=i.querySelector("zip"),s?this.zipInfo=s.innerHTML:this.default=!0)))}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-runner-main-view"]],viewQuery:function(t,i){if(1&t&&e.GBs(ji,5),2&t){let s;e.mGM(s=e.lsd())&&(i.interacComp=s.first)}},inputs:{template:"template",vars:"vars"},standalone:!0,features:[e.aNF],decls:6,vars:6,consts:[["interacComp",""],[3,"chatboxInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"zipInfo",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"chatboxInfo"],[3,"sceneInfo"],[3,"conf"],[3,"jsInfo"],[3,"zipInfo"],[3,"innerHTML"]],template:function(t,i){1&t&&e.DNE(0,wi,2,1,"app-chatbox",1)(1,Mi,2,1,"app-scene-editor",2)(2,Ei,2,1,"app-anim-editor",3)(3,Ni,2,1,"app-js-runner",4)(4,$i,1,1,"app-zip",5)(5,Gi,2,3,"div",6),2&t&&(e.Y8G("ngIf",i.chatboxInfo),e.R7$(),e.Y8G("ngIf",i.sceneEditorInfo),e.R7$(),e.Y8G("ngIf",i.animEditorInfo),e.R7$(),e.Y8G("ngIf",i.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",i.zipInfo),e.R7$(),e.Y8G("ngIf",i.default))},dependencies:[v.MD,v.bT,x.YN,ue,Ci,ve,ge,Fi,fe]})),a})();const zi=["interacComp"];function Li(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",31)(1,"app-form-node",32),e.bIt("onStartUpload",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.onStartUpload())})("onUploaded",function(i){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onUploaded(i))}),e.k0s()()}if(2&o){const n=e.XpG().$implicit,t=e.XpG(2);e.R7$(),e.Y8G("data",n)("appId",t.id)}}function Di(o,a){if(1&o&&(e.j41(0,"div"),e.DNE(1,Li,2,2,"div",30),e.k0s()),2&o){const n=a.$implicit;e.R7$(),e.Y8G("ngIf","form"==n.type)}}function Bi(o,a){if(1&o){const n=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.cancelApp())}),e.EFF(1," H\u1ee7y "),e.k0s()}if(2&o){const n=e.XpG(3);e.Y8G("disabled",n.isCancelling)}}function Pi(o,a){if(1&o&&(e.j41(0,"div",33),e.DNE(1,Bi,2,1,"button",34),e.j41(2,"button",35),e.EFF(3),e.k0s()()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.isRunning),e.R7$(),e.Y8G("disabled",n.isRunning||n.isUploading),e.R7$(),e.SpI(" ",n.isRunning?"\u0110ang x\u1eed l\xfd...":"B\u1eaft \u0111\u1ea7u"," ")}}function Ui(o,a){if(1&o){const n=e.RV6();e.j41(0,"form",27),e.bIt("submit",function(i){e.eBV(n);const s=e.XpG();return e.Njj(s.submit(i))}),e.DNE(1,Di,2,1,"div",28)(2,Pi,4,3,"div",29),e.k0s()}if(2&o){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.forms),e.R7$(),e.Y8G("ngIf",n.forms.length>0)}}function Hi(o,a){if(1&o&&(e.j41(0,"div",43),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,n.lastInfo,100))}}function Yi(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",37)(1,"div",38),e.nrm(2,"azt-loading-ui"),e.j41(3,"div",39)(4,"div"),e.EFF(5),e.k0s(),e.DNE(6,Hi,3,4,"div",40),e.k0s()(),e.j41(7,"div",41)(8,"button",42),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cancelApp())}),e.EFF(9,"H\u1ee7y"),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(5),e.JRh(n.lastStatus?n.lastStatus:"\u0110ang x\u1eed l\xfd..."),e.R7$(),e.Y8G("ngIf",n.lastInfo)}}function Vi(o,a){if(1&o&&e.nrm(0,"app-runner-main-view",46,0),2&o){const n=e.XpG(2);e.Y8G("vars",n.runInfo.vars)("template",n.runInfo.data)}}function Xi(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",33)(1,"button",47),e.bIt("click",function(){let i;e.eBV(n);const s=e.XpG(2);return e.Njj(s.resumeApp(null!==(i=null==s.runInfo?null:s.runInfo.next)&&void 0!==i?i:""))}),e.EFF(2," Ti\u1ebfp t\u1ee5c "),e.k0s()()}}function Wi(o,a){if(1&o){const n=e.RV6();e.j41(0,"div",33)(1,"button",47),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.restart())}),e.EFF(2," B\u1eaft \u0111\u1ea7u l\u1ea1i "),e.k0s()()}}function Ji(o,a){if(1&o&&(e.j41(0,"div",37)(1,"div",44),e.DNE(2,Vi,2,2,"app-runner-main-view",45),e.k0s(),e.DNE(3,Xi,3,0,"div",29)(4,Wi,3,0,"div",29),e.k0s()),2&o){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.data),e.R7$(),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.next),e.R7$(),e.Y8G("ngIf",!(null!=n.runInfo&&n.runInfo.next))}}const qi=[{path:"",component:Sn,children:[{path:"demo",component:yn,canActivate:[oe]},{path:"",component:An},{path:"app/:id",component:(()=>{var o;class a{constructor(t,i){(0,r.A)(this,"route",void 0),(0,r.A)(this,"appService",void 0),(0,r.A)(this,"interacComp",void 0),(0,r.A)(this,"isShowLog",!1),(0,r.A)(this,"apiEndpoint",""),(0,r.A)(this,"reqBody",""),(0,r.A)(this,"resBody",""),(0,r.A)(this,"appInfo",void 0),(0,r.A)(this,"data",[]),(0,r.A)(this,"id",0),(0,r.A)(this,"forms",[]),(0,r.A)(this,"his",void 0),(0,r.A)(this,"isDone",!1),(0,r.A)(this,"isUploading",!1),(0,r.A)(this,"files",[]),(0,r.A)(this,"vars",new Map),(0,r.A)(this,"isRunning",!1),(0,r.A)(this,"strResult",""),(0,r.A)(this,"isCancelling",!1),(0,r.A)(this,"showLogDetail",!1),(0,r.A)(this,"strStatus",[]),(0,r.A)(this,"lastStatus",""),(0,r.A)(this,"lastInfo",""),(0,r.A)(this,"runInfo",void 0),(0,r.A)(this,"curToken",""),this.route=t,this.appService=i}getInteracValue(){return this.interacComp?.getValue()}showLog(){this.isShowLog=!this.isShowLog}copy(t,i){let s=i.target;navigator.clipboard.writeText(t).then(()=>{s.classList.remove("bx-copy"),s.classList.add("bx-check","text-success"),setTimeout(()=>{s.classList.add("bx-copy"),s.classList.remove("bx-check","text-success")},1e3)}).catch(l=>{console.error("Failed to copy text: ",l)})}showApiInfo(){this.apiEndpoint=W+"/api/App/run/"+this.id;let t={};for(let l of this.forms)for(let m of l.conf)t[m.key]="";let i=this.data.filter(l=>0==l.links.length),s={};for(let l of i)for(let m of l.outputs)s[m.name]=m.demo;this.reqBody=JSON.stringify(t,null,4),this.resBody=JSON.stringify(s,null,4)}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=+(t.get("id")??"0"),this.load()})}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(t=>{this.appService.history(this.id).subscribe(s=>{this.his=s}),this.appInfo=t,this.data=JSON.parse(t.config);let i=[];for(let s of this.data)i.push(...s.links);this.forms=this.data.filter(s=>-1==i.indexOf(s.id)&&"form"==s.type),0==this.forms.length&&(this.isRunning=!0,this.isDone=!1,this.runApp({}))})}onStartUpload(){this.isUploading=!0}onUploaded(t){let i=this.files.filter(s=>s.name==t.name)[0];i?(i.file=t.file,i.content=t.content):this.files.push(t),this.isUploading=!1}close(){window.history.back()}showDetails(t){document.querySelector(".sts-"+t)?.classList.remove("d-none")}submit(t){var i=this;return(0,P.A)(function*(){t.preventDefault(),i.isRunning=!0,i.isDone=!1;let s=document.getElementById("nodeForms");const l=new FormData(s);for(let c of i.files){l.set(c.name,c.content);let d=yield E.fileToBase64(c.file);l.set(c.name+"-dataUrl",d)}let m={};l.forEach((c,d)=>{let p=c.toString();i.vars.set(d,c instanceof File?c:JSON.stringify(c)),m[d]=c,p.includes("base64")||localStorage.setItem(i.id+"-"+d,c.toString())}),i.runApp(m)})()}cancelApp(){this.isCancelling=!0,this.appService.cancel(this.curToken).subscribe(t=>{this.isCancelling=!1})}checkStatus(t){this.isRunning&&""!=t?this.appService.status(t).subscribe(i=>{if("success"==i.status)this.renderRunInfo(JSON.parse(i.data??"{}"));else{let s=i.message?.split("\n")??[];this.strStatus=[],this.lastInfo="";for(let c of s)c.startsWith("[i]:")?(this.strStatus[this.strStatus.length-1].startsWith("[i]:")?this.strStatus[this.strStatus.length-1]+=c.substring(4):this.strStatus.push(c),this.lastInfo=c.substring(4)):(this.lastInfo="",this.strStatus.push(c));let m=this.strStatus.filter(c=>!c.startsWith("[i]:"));this.lastStatus=m.length>0?m[m.length-1]:this.lastStatus}setTimeout(()=>{this.checkStatus(t)},1e3)},i=>{this.strStatus=[i.message]}):this.strStatus=[]}loadPrevRunning(){this.his?.token&&(this.isRunning=!0,this.isDone=!1,this.curToken=this.his.token,this.checkStatus(this.his.token))}onRunJS(t){if(!this.runInfo)return;let i=this.getVarValue(t.act);new Function(i)(t.el)}setValue(t,i){if(!this.runInfo)return;let s=t.split("."),l=s[0],m=-1;if(l.endsWith("]")){let _=l.split("[");m=+_[1].split("]")[0],l=_[0]}let c=this.runInfo.vars.filter(_=>_.startsWith(`${l}::`))[0],d=this.runInfo.vars.indexOf(c),p=JSON.parse(c.substring(l.length+2)),h=p;if(m>=0&&(h=h[m],1==s.length))return p[m]=i,void(this.runInfo.vars[d]=l+"::"+JSON.stringify(p,null,2));if(1!=s.length){for(let _=1;_<s.length-1;_++){let u=s[_].split("[");if(u.length>1){let g=+u[1].replace("]","");h=h[u[0]][g]}else h=h[u[0]]}h[s[s.length-1]]=i,this.runInfo.vars[d]=l+"::"+JSON.stringify(p,null,2)}else this.runInfo.vars[d]=l+"::"+i}getVarValue(t){if(!this.runInfo)return"";let i=t.split("."),s=i[0],l=-1;if(s.endsWith("]")){let d=s.split("[");l=+d[1].split("]")[0],s=d[0]}let m=this.runInfo.vars.filter(d=>d.startsWith(`${s}::`))[0],c=JSON.parse(m.substring(s.length+2));l>=0&&(c=c[l]);for(let d=1;d<i.length;d++){let p=i[d].split("[");if(p.length>1){let h=+p[1].replace("]","");c=c[p[0]][h]}else c=c[p[0]]}return c}restart(){location.reload()}resumeApp(t){let i=this.getInteracValue(),s=t.split(":"),l={};for(let m of this.runInfo?.vars??[]){let c=m.split("::");l[c[0]]=c[1]}i?.varName&&(l[i.varName]=i.value),this.isRunning=!0,this.isDone=!1,this.runApp(l,`${s[0]}:${s[1]}`)}runApp(t,i){this.curToken="",this.appService.runApp((i??this.id)+"",t).subscribe(s=>{this.checkStatus(s.data),this.curToken=s.data},s=>{this.isRunning=!1,this.isDone=!0,this.strResult=s.message})}renderRunInfo(t){this.runInfo=t,this.isRunning=!1,this.isDone=!0}}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)(e.rXU(G.nX),e.rXU(Y))}),(0,r.A)(a,"\u0275cmp",e.VBU({type:o,selectors:[["app-flow-runner"]],viewQuery:function(t,i){if(1&t&&e.GBs(zi,5),2&t){let s;e.mGM(s=e.lsd())&&(i.interacComp=s.first)}},standalone:!0,features:[e.aNF],decls:62,vars:9,consts:[["interacComp",""],[1,"box","p-0","mt-5","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","w-2/4","mx-auto"],[1,"window-container","window-container-sm"],["data-windowbackdrop","true",1,"window","window--active"],[1,"w-100","overflow-hidden",2,"margin-top","10px"],[1,"window-top-btn"],[1,"window__controls","text-right"],[1,"window__close","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x"],["d","M18 6 6 18","key","1bl5f8"],["d","m6 6 12 12","key","d8bk6v"],[1,"window-content","window-content-sm","pb-3"],[1,"pb-3","window-dark","window-dark-sm"],["class","ml-5 mr-5 mt-2 position-relative","id","nodeForms",3,"submit",4,"ngIf"],["class","ml-5 mr-5 position-relative",4,"ngIf"],["data-bs-backdrop","static","id","apiInfo","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"p-0","mb-2"],[1,"bx","bx-copy","small","ms-3","cursor-pointer",3,"click"],[1,"mb-3"],["lang","json"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-backdrop","static","id","logInfo","tabindex","-1","aria-hidden","true",1,"modal","fade"],["id","nodeForms",1,"ml-5","mr-5","mt-2","position-relative",3,"submit"],[4,"ngFor","ngForOf"],["class","mt-3 text-right",4,"ngIf"],["class","node-form mb-3",4,"ngIf"],[1,"node-form","mb-3"],[3,"onStartUpload","onUploaded","data","appId"],[1,"mt-3","text-right"],["class","btn btn-secondary mr-3","type","button",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"ml-5","mr-5","position-relative"],[1,"mt-5","flex","items-center"],["id","run-msg",1,"inline-block","ml-2"],["class","small text-muted",4,"ngIf"],[1,"text-right","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"small","text-muted"],[1,"mt-3"],[3,"vars","template",4,"ngIf"],[3,"vars","template"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"teacher-layout")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),e.bIt("click",function(){return i.close()}),e.qSk(),e.j41(8,"svg",8),e.nrm(9,"path",9)(10,"path",10),e.k0s()()()(),e.joV(),e.j41(11,"div",11)(12,"div",12),e.DNE(13,Ui,3,2,"form",13)(14,Yi,10,2,"div",14)(15,Ji,5,3,"div",14),e.k0s()()()()()(),e.j41(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18)(20,"h5",19),e.EFF(21," Api Info "),e.k0s()(),e.j41(22,"div",20)(23,"h5",21),e.EFF(24," Endpoint "),e.j41(25,"i",22),e.bIt("click",function(l){return i.copy(i.apiEndpoint,l)}),e.k0s()(),e.j41(26,"div",23)(27,"pre")(28,"code",24),e.EFF(29),e.k0s()()(),e.j41(30,"h5",21),e.EFF(31," Request Body "),e.j41(32,"i",22),e.bIt("click",function(l){return i.copy(i.reqBody,l)}),e.k0s()(),e.j41(33,"div",23)(34,"pre")(35,"code",24),e.EFF(36),e.k0s()()(),e.j41(37,"h5",21),e.EFF(38," Response "),e.j41(39,"i",22),e.bIt("click",function(l){return i.copy(i.resBody,l)}),e.k0s()(),e.j41(40,"div")(41,"pre")(42,"code",24),e.EFF(43),e.k0s()()(),e.j41(44,"div")(45,"button",25),e.EFF(46,"Close"),e.k0s()()()()()(),e.j41(47,"div",26)(48,"div",16)(49,"div",17)(50,"div",18)(51,"h5",19),e.EFF(52," Logs "),e.k0s()(),e.j41(53,"div",20)(54,"pre"),e.EFF(55,"                    "),e.j41(56,"code"),e.EFF(57),e.k0s(),e.EFF(58,"\n                "),e.k0s(),e.j41(59,"div")(60,"button",25),e.EFF(61,"Close"),e.k0s()()()()()()()),2&t&&(e.R7$(13),e.Y8G("ngIf",!i.isRunning&&!i.isDone),e.R7$(),e.Y8G("ngIf",i.isRunning),e.R7$(),e.Y8G("ngIf",i.isDone&&!i.isRunning),e.R7$(14),e.JRh(i.apiEndpoint),e.R7$(7),e.JRh(i.reqBody),e.R7$(7),e.JRh(i.resBody),e.R7$(14),e.E5c("\n                        Status:\n                        ",null==i.his?null:i.his.status,"\n                        Data:\n                        ",null==i.his?null:i.his.data,"\n                        Message:\n                        ",null==i.his?null:i.his.message,"\n                    "))},dependencies:[v.MD,v.Sq,v.bT,x.YN,x.qT,x.cb,x.cV,qn,Oi,_e,V.b,ee,ie.Q,Q.R],styles:[".position-relative[_ngcontent-%COMP%]{position:relative}"]})),a})(),canActivate:[oe]}]}];let Ki=(()=>{var o;class a{}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275mod",e.$C({type:o})),(0,r.A)(a,"\u0275inj",e.G2t({imports:[G.iI.forChild(qi),G.iI,xe.XE]})),a})(),Zi=(()=>{var o;class a{}return o=a,(0,r.A)(a,"\u0275fac",function(t){return new(t||o)}),(0,r.A)(a,"\u0275mod",e.$C({type:o})),(0,r.A)(a,"\u0275inj",e.G2t({imports:[G.iI,v.MD,x.YN,ye.s,x.X1,Ki,ie.Q,V.b,Se.L,Ae.Id,D.flO.pick(D.Ptg),Ie.An]})),a})()}}]);