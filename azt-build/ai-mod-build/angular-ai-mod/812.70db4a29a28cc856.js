"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[812],{3812:(sn,oe,pe)=>{pe.r(oe),pe.d(oe,{AIModule:()=>Ty});var m=pe(9842),L=pe(177),N=pe(9417),xt=pe(5245),Ct=pe(8516),Jt=pe(4110),ot=pe(7163),et=pe(279),gn=pe(3424),Xe=pe(1064),Me=pe(8567),ze=pe(7005),e=pe(3953),Je=pe(9822);let gt=(()=>{var t;class r{constructor(i){(0,m.A)(this,"redirectService",void 0),this.redirectService=i}canActivate(i,s){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/admin/ai/dashboard"),!1)}canActivateChild(i,s){return this.canActivate(i,s)}canLoad(i){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/admin/ai/dashboard"),!1)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Je.m))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Ce=pe(467),Ae=pe(3617),an=pe(671),kt=pe(4025),Ft=pe(5312),it=pe(1626);const Et=Ft.c.apiPlatformBaseUrl;let je=(()=>{var t;class r{constructor(i){(0,m.A)(this,"http",void 0),(0,m.A)(this,"apiUrl",Et+"/api/App/"),this.http=i}getList(){return this.http.get(`${this.apiUrl}list`)}listTemplate(){return this.http.get(`${this.apiUrl}listTemplate`)}getListShare(){return this.http.get(`${this.apiUrl}listShare`)}credit(){return this.http.get(`${this.apiUrl}credit`)}download(i){return this.http.post(`${this.apiUrl}download`,i)}load(i){return this.http.post(`${this.apiUrl}load`,i)}save(i){return this.http.post(`${this.apiUrl}save`,i)}delete(i){return this.http.post(`${this.apiUrl}delete`,i)}share(i){return this.http.post(`${this.apiUrl}share`,i)}addCollection(i){return this.http.post(`${this.apiUrl}addCollection`,i)}addVCollection(i){return this.http.post(`${this.apiUrl}addVCollection`,i)}getAppInfo(i){return this.http.get(`${this.apiUrl}getAppInfo/${i}`)}listAppRoute(){return this.http.get(`${this.apiUrl}listAppRoute`)}listApp(){return this.http.get(`${this.apiUrl}listApp`)}runAppAsync(i,s){return this.http.post(`${this.apiUrl}runAsync/`+i+"?stream=1",s)}runApp(i,s){return this.http.post(`${this.apiUrl}run/`+i+"?stream=1",s)}cancel(i){return this.http.post(`${this.apiUrl}cancel/${i}`,{})}logAppDone(i,s){return this.http.post(`${this.apiUrl}logAppDone/`+i,{data:s})}status(i){return this.http.get(`${this.apiUrl}status/`+i)}history(i){return this.http.get(`${this.apiUrl}history/`+i)}fetchUrl(i){return this.http.post(`${this.apiUrl}fetchUrl`,i)}listCollection(){return this.http.get(`${this.apiUrl}listCollection`)}listVCollection(){return this.http.get(`${this.apiUrl}listVCollection`)}listData(i){return this.http.post(`${this.apiUrl}listData`,i)}delData(i){return this.http.post(`${this.apiUrl}delData`,i)}searchVector(i){return this.http.post(`${this.apiUrl}searchVector`,i)}getConf(i){return this.http.post(`${this.apiUrl}getConf`,{data:i})}getKey(i){return this.http.post(`${this.apiUrl}getKey`,{data:i})}listKeys(){return this.http.get(`${this.apiUrl}listKeys`)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(it.Qq))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),ct=(()=>{var t;class r{constructor(i){(0,m.A)(this,"http",void 0),(0,m.A)(this,"apiUrl",Et+"/api/Admin/"),this.http=i}run(i){return this.http.post(`${this.apiUrl}run`,i)}live(i){return this.http.post(`${this.apiUrl}live`,i)}stream(i,s,l){const d=new EventSource(`${this.apiUrl}stream?t=${i}`);d.onmessage=function(f){f.data.trim().startsWith("[__FINISH__] => ")?l(f.data.substr(16)):s(JSON.parse(f.data))},d.onerror=function(f){d.close(),l("")}}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(it.Qq))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Cn=function(t){return t.Text="text",t.ImageUrl="image_url",t}(Cn||{}),Hn=pe(7687);let kn=(()=>{var t;class r{constructor(i){(0,m.A)(this,"commonService",void 0),this.commonService=i}getTypeObjNotice(i){return"NEW_SHARE_CLASS_PERMISSION"==i.type?"L\u1edbp: "+i.classroomName:"NEW_SHARE_HOMEWORK_PERMISSION"==i.type?"B\xe0i t\u1eadp: "+i.homeworkName:"NEW_SHARE_EXAM_PERMISSION"==i.type?"\u0110\u1ec1 thi: "+i.examName:"NEW_SHARE_CATEGORY_PERMISSION"==i.type?"Th\u01b0 m\u1ee5c: "+i.examName:""}getRouterLinkForNoticeObj(i,s){var l=this.redirectToPage(i,!0,s);return"string"==typeof l?l:""}getQueryParamForNoticeObj(i){var s=this.redirectToPage(i,!1);return"object"==typeof s?s:null}redirectToPage(i,s,l){switch(i.type){case"NEW_ANSWER":case"NEW_SHARE_HOMEWORK_PERMISSION":return s?`/admin/testbank/homework-results-list/${i.classroomId}/${i.homeworkId}/${i.homeworkHashId}`:null;case"HAS_MARK":case"NEW_HOMEWORK":case"RESEND_ANSWER":return s?`/bai-tap/${i.homeworkHashId}`:null;case"NEW_EXAM_SUBMIT":return s?`/admin/testbank/test-review/${i.examId}/${i.parentId}/${i.studentId}/${i.examResultId??0}`:null;case"NEW_EXAM":return s?`/de-thi/${i.examHashId}`:"";case"EXAM_HAS_MARK":return s?`/test/answer-test/${i.parentId}/0/${i.examHashId}/${i.examResultId}`:null;case"NEW_SHARE_CLASS_PERMISSION":return 1==i.isMultipleClassroom?s?"/admin/student/manage-classroom/0":"":s?"/admin/student/classroom-details/"+i.classroomId+"/0":"";case"NEW_SHARE_CATEGORY_PERMISSION":return s?`/admin/testbank/document-management/0/${i.examId}/1`:{data:this.commonService.serializeJson({shareType:`user_${i.senderId}`})};case"NEW_SHARE_EXAM_PERMISSION":return s?`/admin/testbank/exam-results-list/0/${i.examId}/0`:null;case"NEW_QA_EXAM_ASK":case"NEW_QA_HOMEWORK_ASK":return s?"/admin/teacher-qa/view-question/"+Number(i.extraDataObj?.qaQuestionId):null;case"NEW_QA_EXAM_ANSWER":case"NEW_QA_HOMEWORK_ANSWER":return s?"/student-qa/view-question/"+Number(i.extraDataObj?.qaQuestionId):null;case"NEW_ASSIGN":return s?"/admin/student/manage-classroom/0":null;case"SHARE_AZOTA_BANK_QUESTION":return s?"/auth/account-setting/0/3?tab=1":null;case"NEW_REQUEST_REAPPROVE":return s?`/admin/student/classroom-details/${i.classroomId}/0`:null;case"NEW_SHARE_PERMISSION":return null;case"NEW_CLASSROOM_NEWS":return s?l?`/student/classroom-details/${i.classroomId}/2`:`/admin/student/classroom-details/${i.classroomId}/2`:null;default:return s?"/student/classroom/0":null}}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Hn.R))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Sn=pe(9311),ln=pe(4823),vn=pe(9489);let lo=(()=>{var t;class r{redirectToNewLanguage(i){if(i&&i!=this.commonService.getCurrentLang()){let _=this.commonService.getCurrentDomain();var s=_+"/"+this.commonService.getCurrentLang()+"/",l=_+"/"+i+"/",d=this.commonService.getFullCurrentUrl(),f=d.replace(s,l);f!=d&&(this.browserStorageService.saveStorage(this.defaultLangueInLocalStorageKey,i),window.location.replace(f))}}redirectToUserLanguage(){if(this.userService.isLogin()){var i=this.userService.getUserObj();this.redirectToNewLanguage(i.language?i.language:this.commonService.getDefaultLang())}else{var s=this.browserStorageService.getStorage(this.defaultLangueInLocalStorageKey);this.redirectToNewLanguage(s||this.commonService.getDefaultLang())}}constructor(i,s,l){(0,m.A)(this,"commonService",void 0),(0,m.A)(this,"userService",void 0),(0,m.A)(this,"browserStorageService",void 0),(0,m.A)(this,"defaultLangueInLocalStorageKey","switch_language_code"),this.commonService=i,this.userService=s,this.browserStorageService=l}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Hn.R),e.KVO(kt.R),e.KVO(Sn.z))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var te=pe(1413);let Ve=(()=>{var t;class r{logInDev(i,s){if(!Ft.c.production){if(null!=s&&null!=i)return console.log(i,s);if(null!=s&&null==i)return console.log(s);null!=i&&console.log(i)}}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),M=(()=>{var t;class r{getHeaderReloadNoticeSubscriber(){return this.headerReloadNoticeListener}sendChangeLanguage(i){this._sendMessage({type:"CHANGE_LANGUAGE",status:1,message:"send_from_angular",data:{language:i}})}sendSimpleMessage(i){this._sendMessage({type:i,status:1,message:"send_from_angular",data:{}})}_sendMessage(i){this.aztCustomConsoleLogService.logInDev("To fluter data: ",i),this._sendRawMessage(JSON.stringify(i))}_sendRawMessage(i){try{let s=function Ie(){return typeof MessageInvoker<"u"?MessageInvoker:void 0}();typeof s<"u"&&s&&(this.aztCustomConsoleLogService.logInDev("Have MessageInvoker"),s.postMessage(i));let l=function Se(){return typeof flutter_inappwebview<"u"?flutter_inappwebview:void 0}();typeof l<"u"&&l&&(this.aztCustomConsoleLogService.logInDev("Have flutter_inappwebview"),l.callHandler("toFlutter",i))}catch(s){this.aztCustomConsoleLogService.logInDev(void 0,s)}}constructor(i){(0,m.A)(this,"aztCustomConsoleLogService",void 0),(0,m.A)(this,"headerReloadNoticeListener",new te.B),this.aztCustomConsoleLogService=i}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Ve))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Z=pe(9115),Ne=pe(665),Ee=pe(7347);function Fe(t,r){1&t&&(e.j41(0,"span",9),e.nrm(1,"azt-loading-ui"),e.k0s())}function He(t,r){if(1&t&&(e.j41(0,"button",5),e.DNE(1,Fe,2,0,"span",6),e.j41(2,"span",7),e.EFF(3,"\xa0"),e.k0s(),e.nrm(4,"img",8),e.nI1(5,"coreModConvertCdnLinkOfGitHub"),e.k0s()),2&t){const n=e.XpG(),i=e.sdS(2);e.Y8G("matMenuTriggerFor",i),e.R7$(),e.Y8G("ngIf",n.statusObj.loading),e.R7$(),e.Y8G("hidden",!n.statusObj.loading),e.R7$(2),e.FS9("alt",n.imgLanguage),e.Y8G("src",e.bMT(5,5,n.imgLanguage),e.B4B)}}function rt(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",10),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.switchLanguage(s.value))}),e.nrm(2,"img",11),e.nI1(3,"coreModConvertCdnLinkOfGitHub"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.FS9("alt",n),e.Y8G("src",e.bMT(3,3,n.img),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(5,5,n.label)," ")}}let ut=(()=>{var t;class r extends Ae.H{getImgLanguage(i){this.imgLanguage=this.listSupportedLanguages.find(s=>s.value==i)?.img??""}initLanguages(){this.listSupportedLanguages=this.supportedLanguagesArr.map(i=>({value:i,label:"lang_core_language_"+i,img:"flag/"+i+".svg"}))}switchLanguage(i){i&&i!=this.commonService.getCurrentLang()&&(this.userService.isLogin()?(this.initStatusObj(),this.waitDestroy(this.userLangService.apiUserLangSwitchLangGet(i).subscribe(s=>{1==s.success?(this.mobileWebviewService.sendChangeLanguage(i),setTimeout(()=>{this.stopStatusObj(),this.switchLanguageService.redirectToNewLanguage(i)},100)):this.errorStatusObj(s.message??"",!0)}))):(this.mobileWebviewService.sendChangeLanguage(i),setTimeout(()=>{this.switchLanguageService.redirectToNewLanguage(i)},100)))}ngOnInit(){this.initLanguages(),this.getImgLanguage(this.commonService.getCurrentLang()),this.imgLanguage||this.getImgLanguage(Ft.c.defaultLanguage)}constructor(i,s,l,d){super(),(0,m.A)(this,"userService",void 0),(0,m.A)(this,"userLangService",void 0),(0,m.A)(this,"switchLanguageService",void 0),(0,m.A)(this,"mobileWebviewService",void 0),(0,m.A)(this,"imgLanguage",""),(0,m.A)(this,"listSupportedLanguages",[]),this.userService=i,this.userLangService=s,this.switchLanguageService=l,this.mobileWebviewService=d}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(kt.R),e.rXU(vn.f$),e.rXU(lo),e.rXU(M))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-switch-language"]],features:[e.Vt3],decls:6,vars:2,consts:[["switchlanguage","matMenu"],["class","btn btn-transparent p-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"dropdown-menu","show","w-32","relative"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"btn","btn-transparent","p-1",3,"matMenuTriggerFor"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[3,"hidden"],[3,"src","alt"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","azt-switch-language-2NtpICqDxdj",1,"dropdown-item",3,"click"],[1,"w-5","h-5","mr-2",3,"src","alt"]],template:function(i,s){1&i&&(e.DNE(0,He,6,7,"button",1),e.j41(1,"mat-menu",null,0)(3,"div",2)(4,"ul",3),e.DNE(5,rt,6,7,"li",4),e.k0s()()()),2&i&&(e.Y8G("ngIf",s.listSupportedLanguages.length>1),e.R7$(5),e.Y8G("ngForOf",s.listSupportedLanguages))},dependencies:[L.Sq,L.bT,Z.kk,Z.Cp,Ne.R,Ee.wp,Ee.Vs],encapsulation:2})),r})(),Oe=(()=>{var t;class r{mouseEnter(){this.isMousePosition="mouseEnter",window.setTimeout(()=>{"mouseEnter"==this.isMousePosition&&this.menuTrigger?.openMenu()},100)}mouseLeave(){this.isMousePosition="mouseLeave",window.setTimeout(()=>{"mouseLeave"==this.isMousePosition&&this.menuTrigger?.closeMenu()},300)}constructor(i){(0,m.A)(this,"menuTrigger",void 0),(0,m.A)(this,"isMousePosition","mouseLeave"),this.menuTrigger=i}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Z.Cp))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var cn=pe(3861),$d=pe(2909),cs=pe(4006);let hc=(()=>{var t;class r{constructor(i){(0,m.A)(this,"dialog",void 0),(0,m.A)(this,"open",(s,l)=>this.dialog.open(s,l)),(0,m.A)(this,"closeAll",()=>this.dialog.closeAll()),this.dialog=i}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(cs.bZ))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),us=(()=>{var t;class r{removeInvalidChars(i){try{return i?.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")??""}catch{return i??""}}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const Ta=(t,r)=>({width:t,height:r}),gc=(t,r,n)=>({width:t,height:r,borderColor:n}),vc=(t,r,n,i)=>({width:t,height:r,"font-size":n,borderColor:i});function Aa(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function yc(t,r){if(1&t&&(e.qex(0),e.j41(1,"div",2),e.nrm(2,"img",3),e.nI1(3,"mycdn"),e.DNE(4,Aa,1,0,"lucide-icon",4),e.k0s(),e.bVm()),2&t){let n;const i=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(8,Ta,i.size+"px",i.size+"px")),e.R7$(),e.FS9("matTooltip",i.showTooltip?i.customTooltip?i.customTooltip:i.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!i.showTooltip||!i.customTooltip&&!i.nameCreateAvatar)("src",e.bMT(3,6,i.linkAvatar),e.B4B)("ngStyle",e.sMw(11,gc,i.size+"px",i.size+"px",null!==(n=i.borderAvatar)&&void 0!==n?n:"")),e.R7$(2),e.Y8G("ngIf",i.showCheckUser)}}function Ra(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function qi(t,r){if(1&t&&(e.j41(0,"div",6),e.EFF(1),e.DNE(2,Ra,1,0,"lucide-icon",4),e.k0s()),2&t){let n;const i=e.XpG();e.FS9("matTooltip",i.showTooltip?i.customTooltip?i.customTooltip:i.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!i.showTooltip||!i.customTooltip&&!i.nameCreateAvatar)("ngStyle",e.ziG(5,vc,i.size+"px",i.size+"px",(i.size/2>48?48:i.size/2)+"px",null!==(n=i.borderAvatar)&&void 0!==n?n:"")),e.R7$(),e.SpI(" ",i.returnNameAvatar," "),e.R7$(),e.Y8G("ngIf",i.showCheckUser)}}let Jo=(()=>{var t;class r extends Ae.H{createNewAvatar(){try{this.nameCreateAvatar=this.homeworkExamService.removeInvalidChars(this.nameCreateAvatar).trim()}catch{this.nameCreateAvatar=this.nameCreateAvatar}var s=this.commonService.convertVietnameseToEnglish(this.nameCreateAvatar??"").toUpperCase().split(" ");this.returnNameAvatar=1==s.length?s[0]?s[0].charAt(0):"A":s[0]?.charAt(0)+(s[s.length-1]?.charAt(0)??"")}ngOnInit(){this.createNewAvatar()}ngOnChanges(){this.createNewAvatar()}constructor(i){super(),(0,m.A)(this,"homeworkExamService",void 0),(0,m.A)(this,"nameCreateAvatar",void 0),(0,m.A)(this,"linkAvatar",void 0),(0,m.A)(this,"size",0),(0,m.A)(this,"customTooltip",void 0),(0,m.A)(this,"showTooltip",!0),(0,m.A)(this,"showCheckUser",!1),(0,m.A)(this,"borderAvatar",""),(0,m.A)(this,"returnNameAvatar",""),this.homeworkExamService=i}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(us))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-create-avatar"]],inputs:{nameCreateAvatar:"nameCreateAvatar",linkAvatar:"linkAvatar",size:"size",customTooltip:"customTooltip",showTooltip:"showTooltip",showCheckUser:"showCheckUser",borderAvatar:"borderAvatar"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["elseTemplate",""],[4,"ngIf","ngIfElse"],[3,"ngStyle"],[1,"border","border-slate-200","dark:border-darkmode-400",2,"border-radius","50%",3,"matTooltip","matTooltipDisabled","src","ngStyle"],["name","check","size","11","class","check-user-icon stroke-width-2.5","strokeWidth","2",4,"ngIf"],["name","check","size","11","strokeWidth","2",1,"check-user-icon","stroke-width-2.5"],["id","create-avatar",1,"create-avatar-class","border","border-slate-200","dark:border-darkmode-400",2,"display","inline-flex","justify-content","center","align-items","center","background-color","#dddddd","border-radius","50%","color","#000","font-weight","500","margin","auto",3,"matTooltip","matTooltipDisabled","ngStyle"]],template:function(i,s){if(1&i&&e.DNE(0,yc,5,15,"ng-container",1)(1,qi,3,10,"ng-template",null,0,e.C5r),2&i){const l=e.sdS(2);e.Y8G("ngIf",s.linkAvatar)("ngIfElse",l)}},dependencies:[L.bT,L.B3,ln.oV,Ct.WGl,Ee.nf],styles:[".check-user-icon[_ngcontent-%COMP%]{align-items:center;height:13px;width:13px;position:absolute;justify-content:center;bottom:-4px;right:0;background:#65ce8c;border-radius:50%;color:#fff}.check-user-icon[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin-bottom:8px;stroke-width:4.5px!important}.w-content[_ngcontent-%COMP%]{margin-left:10px;width:calc(100% - 46px)}.mw-name[_ngcontent-%COMP%]{max-width:calc(100% - 12px - .25rem)}"]})),r})();const It=()=>({"mr-2":!0}),bc=(t,r)=>({"pl-2":t,"px-2":r}),xc=t=>({"max-width":t}),Un=t=>[t],Cc=t=>({return_url:t,from:"register",user_click:"true"}),Fa=t=>({return_url:t,user_click:"true"});function ds(t,r){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"button",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.gotoLogin())}),e.nrm(2,"lucide-icon",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dang_nhap")," "))}function kc(t,r){if(1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"isParentViewOnly"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"")?e.bMT(3,3,"lang_auto_phu_huynh"):null!=n.userObj&&null!=n.userObj.roles&&n.userObj.roles.includes("TEACHER")?e.bMT(4,5,"lang_auto_giao_vien"):e.bMT(5,7,"lang_auto_hoc_sinh")," ")}}function Qi(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,kc,6,9,"div",16),e.k0s()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.l_i(6,bc,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(9,xc,n.isTqbDomain&&n.isMobileWebView?"80px":"auto")),e.R7$(),e.SpI(" ",n.isAnonymous?e.bMT(3,4,"lang_auto_tai_khoan_an_danh"):null==n.userObj?null:n.userObj.fullName," "),e.R7$(2),e.Y8G("ngIf",!n.isTqbDomain)}}function er(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9),e.bIt("mouseenter",function(){e.eBV(n);const s=e.XpG();return e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseEnter())})("mouseleave",function(){e.eBV(n);const s=e.XpG();return e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseLeave())}),e.j41(1,"div",10),e.bIt("click",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.isMobileWebView?l.avtClick():!l.isMobileDevice&&s.stopPropagation())}),e.j41(2,"div",11),e.nrm(3,"azt-create-avatar",12),e.k0s(),e.DNE(4,Qi,5,11,"div",13),e.k0s()()}if(2&t){const n=e.XpG(),i=e.sdS(4);e.Y8G("matMenuTriggerFor",n.isMobileWebView?null:i),e.R7$(3),e.Y8G("nameCreateAvatar",null==n.userObj?null:n.userObj.fullName)("size",32)("showTooltip",n.isMobileDevice)("linkAvatar",null==n.userObj?null:n.userObj.avatar),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice||n.isTqbDomain)}}function Gd(t,r){if(1&t&&(e.j41(0,"li")(1,"a",24),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",25),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(8,Un,e.bMT(2,4,"/auth/register")))("queryParams",e.eq3(10,Fa,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,It)),e.R7$(),e.SpI(" \xa0",e.bMT(5,6,"lang_auto_dang_ky")," ")}}function Sc(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function wc(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function Dd(t,r){if(1&t){const n=e.RV6();e.qex(0),e.DNE(1,Gd,6,13,"li",18),e.j41(2,"li")(3,"a",19),e.nI1(4,"navigationLocalize"),e.nrm(5,"lucide-icon",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,Sc,5,5,"li",18)(9,wc,5,5,"li",18),e.j41(10,"li")(11,"a",20),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.reloadBrowser())}),e.nrm(12,"lucide-icon",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"li"),e.nrm(16,"hr",22),e.k0s(),e.j41(17,"li")(18,"a",23),e.nI1(19,"navigationLocalize"),e.nrm(20,"lucide-icon",8),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.bVm()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(22,Un,e.bMT(4,12,"/auth/login")))("queryParams",e.eq3(24,Cc,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,It)),e.R7$(),e.SpI(" ",e.bMT(7,14,"lang_auto_dang_nhap")," "),e.R7$(2),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(3),e.Y8G("ngClass",e.lJ4(27,It)),e.R7$(),e.SpI(" ",e.bMT(14,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(28,Un,e.bMT(19,18,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(30,It)),e.R7$(),e.SpI(" ",e.bMT(22,20,"lang_auto_dang_xuat")," ")}}function Ma(t,r){if(1&t&&(e.j41(0,"li")(1,"a",34),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",35),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(7,Un,e.bMT(2,3,n.isTeacherDashboard?"/student/classroom/0":"/admin/dashboard"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,It)),e.R7$(),e.SpI(" ",e.bMT(5,5,n.isTeacherDashboard?"lang_auto_vao_man_hoc_sinh":"lang_auto_vao_man_giao_vien")," ")}}function ja(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function $a(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function Ga(t,r){1&t&&(e.j41(0,"li")(1,"a",36),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,Un,e.bMT(2,3,"/auth/account-setting/0/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,It)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_remove_teacher_role")," "))}function Da(t,r){1&t&&(e.j41(0,"li")(1,"a",38),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,Un,e.bMT(2,3,"/auth/account-setting/1/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,It)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_become_teacher_role")," "))}function gi(t,r){if(1&t){const n=e.RV6();e.DNE(0,Ma,6,10,"li",18)(1,ja,5,5,"li",18)(2,$a,5,5,"li",18)(3,Ga,6,10,"li",18)(4,Da,6,10,"li",18),e.j41(5,"li")(6,"a",20),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.reloadBrowser())}),e.nrm(7,"lucide-icon",21),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"li"),e.nrm(11,"hr",22),e.k0s(),e.j41(12,"li")(13,"a",30),e.nI1(14,"navigationLocalize"),e.nrm(15,"lucide-icon",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"li")(19,"a",32),e.nI1(20,"navigationLocalize"),e.nrm(21,"lucide-icon",33),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"li")(25,"a",23),e.nI1(26,"navigationLocalize"),e.nrm(27,"lucide-icon",8),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()}if(2&t){const n=e.XpG();e.Y8G("ngIf",n.isTeacherRole),e.R7$(),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(),e.Y8G("ngIf",n.isTeacherDashboard),e.R7$(),e.Y8G("ngIf",!(n.isTeacherRole||n.isTeacherDashboard||n.isBusinessDomain||n.beCreatedStudent)),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,It)),e.R7$(),e.SpI(" ",e.bMT(9,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(31,Un,e.bMT(14,18,"/auth/login-scan/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(33,It)),e.R7$(),e.SpI(" ",e.bMT(17,20,"lang_auto_qr_dang_nhap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(34,Un,e.bMT(20,22,"/auth/create-qr-forgot-pass/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(36,It)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_auto_tao_qr_quen_mat_khau")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(37,Un,e.bMT(26,26,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(39,It)),e.R7$(),e.SpI(" ",e.bMT(29,28,"lang_auto_dang_xuat")," ")}}let vi=(()=>{var t;class r extends Ae.H{set menuTrigger(i){this.mouseEventObj=new Oe(i)}avtClick(){this.isMobileWebView&&this.redirectService.redirectToPath(`/auth/account-setting/${this.isTeacherDashboard?0:1}/0`)}gotoLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}reloadBrowser(){var s=this.commonService.getCurrentUrl();if(s.match(/(\?|&)+t=(\d)+/)){var l=s.includes("&t=")?s.replace(/\&t=(\d)+/,"&t="+this.timeService.getCurrentSecond()):s.replace(/\?t=(\d)+/,"?t="+this.timeService.getCurrentSecond());location.replace(l)}else s=s.includes("?")?s+"&t="+this.timeService.getCurrentSecond():s+"?t="+this.timeService.getCurrentSecond(),location.replace(s)}switchModeUI(i){let s=document.getElementById("azota-app-html");this.modeUI=i,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?s&&(s.classList.remove("dark"),s.classList.add("light")):s&&(s.classList.remove("light"),s.classList.add("dark"))}changeAccountStudent(){}ngOnInit(){this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getCurrentUrl(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser(),this.isTeacherRole=this.userService.isTeacherRole(),this.userLoginStateService.loginMessage.subscribe(i=>{this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser()}),super.ngOnInit()}constructor(i,s,l,d,f,_,g){super(),(0,m.A)(this,"router",void 0),(0,m.A)(this,"userService",void 0),(0,m.A)(this,"browserStorageService",void 0),(0,m.A)(this,"userLoginStateService",void 0),(0,m.A)(this,"timeService",void 0),(0,m.A)(this,"redirectService",void 0),(0,m.A)(this,"sAztDialogService",void 0),(0,m.A)(this,"isTeacherDashboard",!0),(0,m.A)(this,"beCreatedStudent",!1),(0,m.A)(this,"mouseEventObj",void 0),(0,m.A)(this,"returnUrl",""),(0,m.A)(this,"userObj",void 0),(0,m.A)(this,"modeUI",""),(0,m.A)(this,"isAnonymous",!1),(0,m.A)(this,"isTeacherRole",!1),this.router=i,this.userService=s,this.browserStorageService=l,this.userLoginStateService=d,this.timeService=f,this.redirectService=_,this.sAztDialogService=g}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(xt.Ix),e.rXU(kt.R),e.rXU(Sn.z),e.rXU(cn.X),e.rXU($d.F),e.rXU(Je.m),e.rXU(hc))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-account-menu"]],viewQuery:function(i,s){if(1&i&&e.GBs(Z.Cp,5),2&i){let l;e.mGM(l=e.lsd())&&(s.menuTrigger=l.first)}},inputs:{isTeacherDashboard:"isTeacherDashboard",beCreatedStudent:"beCreatedStudent"},features:[e.Vt3],decls:10,vars:5,consts:[["loggedIn",""],["accountMenu","matMenu"],["notAnonymous",""],[4,"ngIf","ngIfElse"],[3,"hasBackdrop"],[1,"dropdown-menu","show","relative","w-56",3,"mouseenter","mouseleave"],[1,"dropdown-content"],["azt-track-service","header-account-menu-zWAvNkVhjVM",1,"btn","btn-sm","btn-outline-primary",3,"click"],["name","log-out","size","16",3,"ngClass"],["azt-track-service","header-account-menu-S984kCyEl",3,"mouseenter","mouseleave","matMenuTriggerFor"],["azt-track-service","header-account-menu-_z5kaOQTx",1,"dropdown-toggle","w-full","h-10","rounded-full","flex","trigger-menu",2,"align-items","center",3,"click"],[1,"relative"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"font-medium",3,"ngStyle"],["class","text-xs text-slate-600 -mt-0.5 dark:text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-600","-mt-0.5","dark:text-slate-500"],[4,"ngIf"],["azt-track-service","header-account-menu-eSx-v39GRMc",1,"dropdown-item",3,"routerLink","queryParams"],["azt-track-service","header-account-menu-SEi5xr4uPic",1,"dropdown-item",3,"click"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","header-account-menu-mn5LIp-0AtS",1,"dropdown-item",3,"routerLink"],["azt-track-service","header-account-menu-vlcN2DxtbR2",1,"dropdown-item",3,"routerLink","queryParams"],["name","circle-arrow-right","size","16",3,"ngClass"],["azt-track-service","header-account-menu-iNoUc0CT5wP",1,"dropdown-item",3,"click"],["name","moon","size","16",3,"ngClass"],["azt-track-service","header-account-menu-CI1BdC7HViT",1,"dropdown-item",3,"click"],["name","sun","size","16",3,"ngClass"],["azt-track-service","header-account-menu--T0bM_cz_i7",1,"dropdown-item",3,"routerLink"],["name","scan-line","size","16",3,"ngClass"],["azt-track-service","header-account-menu-XYfAXj_Jl4e",1,"dropdown-item",3,"routerLink"],["name","qr-code","size","16",3,"ngClass"],["azt-track-service","header-account-menu-Q26_sXs6gkC",1,"dropdown-item",3,"routerLink"],["name","arrow-right-left","size","16",3,"ngClass"],["azt-track-service","header-account-menu-VzCUMIT5BDg",1,"dropdown-item",3,"routerLink"],["name","shield-check","size","16",3,"ngClass"],["azt-track-service","header-account-menu-jozmhaRatuz",1,"dropdown-item",3,"routerLink"]],template:function(i,s){if(1&i){const l=e.RV6();e.DNE(0,ds,5,5,"ng-container",3)(1,er,5,6,"ng-template",null,0,e.C5r),e.j41(3,"mat-menu",4,1)(5,"div",5),e.bIt("mouseenter",function(){return e.eBV(l),e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseEnter())})("mouseleave",function(){return e.eBV(l),e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseLeave())}),e.j41(6,"ul",6),e.DNE(7,Dd,23,31,"ng-container",3)(8,gi,30,40,"ng-template",null,2,e.C5r),e.k0s()()()}if(2&i){const l=e.sdS(2),d=e.sdS(9);e.Y8G("ngIf",!s.userService.isLogin())("ngIfElse",l),e.R7$(3),e.Y8G("hasBackdrop",!1),e.R7$(4),e.Y8G("ngIf",s.isAnonymous)("ngIfElse",d)}},dependencies:[xt.Wk,L.YU,L.bT,L.B3,Z.kk,Z.Cp,Jo,Ct.WGl,Ee.F2,Ee.wp,Ee.hx],encapsulation:2})),r})(),Nc=(()=>{var t;class r{constructor(i){(0,m.A)(this,"commonService",void 0),(0,m.A)(this,"globalDataObj",{}),this.commonService=i}setGlobalData(i,s){this.globalDataObj[i]=s}getGlobalData(i){let s=this.globalDataObj[i];if(s)return this.commonService.castJsonToObj(s)}removeGlobalData(i){this.globalDataObj.hasOwnProperty(i)&&delete this.globalDataObj[i]}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Hn.R))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Ec=(()=>{var t;class r{sendReadNoticeToWebviewOfFlutter(i){(i||!this.sendMarkAsReadToFluter)&&(this.mobileWebviewService.sendSimpleMessage("OPEN_NOTIFICATION"),this.sendMarkAsReadToFluter=!0)}constructor(i){(0,m.A)(this,"mobileWebviewService",void 0),(0,m.A)(this,"sendMarkAsReadToFluter",!1),this.mobileWebviewService=i}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(M))}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Ic=(()=>{var t;class r{constructor(i){(0,m.A)(this,"elementRef",void 0),(0,m.A)(this,"isDisabled",!1),this.elementRef=i}onEnter(){const i=this.elementRef.nativeElement;this.isDisabled=i.offsetWidth==i.scrollWidth}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.aKT))}),(0,m.A)(r,"\u0275dir",e.FsC({type:t,selectors:[["","isDisabledTooltip",""]],hostBindings:function(i,s){1&i&&e.bIt("mouseenter",function(){return s.onEnter()})},inputs:{isDisabled:[0,"isDisabledTooltip","isDisabled"]},exportAs:["isDisabled"]})),r})();const Tc=()=>({"notification__icon dark:text-slate-500":!0}),Va=t=>[t],Oa=t=>({"mt-3":t});function Ac(t,r){1&t&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui"),e.k0s())}function tr(t,r){if(1&t&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.unreadNotification," ")}}function za(t,r){1&t&&(e.j41(0,"div",18),e.nrm(1,"azt-loading-ui",19),e.k0s())}function nr(t,r){if(1&t&&(e.j41(0,"div",21),e.eu8(1,22),e.k0s()),2&t){e.XpG(3);const n=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function Vd(t,r){1&t&&(e.j41(0,"div",23),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_thong_bao_nao")," "))}function or(t,r){if(1&t&&e.DNE(0,nr,2,1,"div",20)(1,Vd,3,3,"ng-template",null,3,e.C5r),2&t){const n=e.sdS(2),i=e.XpG(2);e.Y8G("ngIf",i.commonNoticeData.length>0)("ngIfElse",n)}}function ps(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,za,2,0,"div",17)(6,or,3,2,"ng-template",null,2,e.C5r),e.k0s()()),2&t){const n=e.sdS(7),i=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_thong_bao")),e.R7$(2),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",n)}}function fs(t,r){if(1&t&&(e.qex(0),e.nrm(1,"azt-create-avatar",39),e.bVm()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("linkAvatar",n.senderAvatar)("nameCreateAvatar",n.senderName)("size",48)}}function Ba(t,r){if(1&t&&e.nrm(0,"azt-create-avatar",42),2&t){const n=e.XpG(3).$implicit;e.Y8G("nameCreateAvatar",n.senderName)("size",48)}}function Od(t,r){1&t&&(e.nrm(0,"azt-create-avatar",43),e.nI1(1,"coreModConvertCdnLinkOfGitHub")),2&t&&e.Y8G("linkAvatar",e.bMT(1,2,"images/logo.svg"))("size",48)}function zd(t,r){if(1&t&&e.DNE(0,Ba,1,2,"azt-create-avatar",40)(1,Od,2,4,"azt-create-avatar",41),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Bd(t,r){if(1&t&&(e.qex(0),e.j41(1,"span",44,6),e.EFF(3),e.k0s(),e.bVm()),2&t){const n=e.sdS(2),i=e.XpG(2).$implicit;e.R7$(),e.FS9("matTooltip",i.senderName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",i.senderName," ")}}function Ko(t,r){if(1&t&&(e.j41(0,"span",44,6),e.EFF(2),e.k0s()),2&t){const n=e.sdS(1),i=e.XpG(3).$implicit;e.FS9("matTooltip",i.studentName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",i.studentName," ")}}function Rc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_re_approved_student_account")," "))}function Fc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_bank_question")," "))}function Ld(t,r){if(1&t&&e.DNE(0,Ko,3,4,"span",45)(1,Rc,3,3,"span",46)(2,Fc,3,3,"span",46),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type&&"NEW_REQUEST_REAPPROVE"!=n.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Mc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.j41(2,"span",48),e.EFF(3),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ","lang_auto_ban_moi_duoc_phan_quyen_cho_lop"," "),e.R7$(2),e.JRh(n.classroomName)}}function jc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_cham_diem_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function $c(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Gc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_co_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_moi_duoc_giao")," ")}}function Pd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_yeu_cau_nop_lai_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Xd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ft(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_bai_thi_moi")," "),e.R7$(3),e.JRh(n.examName)}}function Yd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_bai_thi")," "),e.R7$(3),e.JRh(n.examName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_da_duco_cham_diem")," ")}}function La(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit,i=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ban_moi_duoc_phan_quyen_cho")," "),e.R7$(3),e.JRh(i.processNoticeService.getTypeObjNotice(n))}}function Dc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ms(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Hd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Vc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function _s(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_you")+" "+(n.totalApproved?e.bMT(3,3,"lang_notice_approved")+" "+n.totalApproved+" "+e.bMT(4,5,"lang_notice_question"):"")+(n.totalApproved&&n.totalRejected?", ":" ")+(n.totalRejected?e.bMT(5,7,"lang_notice_rejected")+" "+n.totalRejected+" "+e.bMT(6,9,"lang_notice_question"):"")," ")}}function Wn(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_news_feed_notice_has_new")," "),e.R7$(3),e.JRh(n.classroomName)}}function Ud(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"b"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,7,"lang_auto_lop")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_auto_khong_chon_duoc_ten_do_da_co_ban_chon_mat")," ")}}function Gn(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_not_paid_your_current_months_tuition_please_complete_your_tuition")," ")}}function Wd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_some_unfinished_exams_please_complete_them_on_time")," ")}}function Zd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_vang_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function Jd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_co_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function hs(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_gui_nhan_xet_den_hoc_sinh")," ",n.classroomName," ")}}function gs(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_thay_doi_trang_thai_hoc_phi_cho_hoc_sinh")," ",n.studentName," ")}}function ir(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_co_de_thi_moi_duoc_giao_den_hoc_sinh")," ",n.studentName," ")}}function vs(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"getContentFromCustomBodyNotice"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.E5c(" ",e.bMT(7,7,"lang_core_co_thong_bao_moi_den_hoc_sinh")," ",n.studentName,' "',e.bMT(8,9,n.data),'" ')}}function Kd(t,r){if(1&t&&(e.j41(0,"a",30),e.nI1(1,"navigationLocalize"),e.j41(2,"div",31)(3,"div",32),e.DNE(4,fs,2,3,"ng-container",33)(5,zd,2,2,"ng-template",null,4,e.C5r),e.k0s(),e.j41(7,"div",34)(8,"div",35),e.DNE(9,Bd,4,4,"ng-container",33)(10,Ld,3,3,"ng-template",null,5,e.C5r),e.j41(12,"div",36),e.EFF(13),e.nI1(14,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.j41(15,"div",37),e.DNE(16,Mc,4,2,"span",38)(17,jc,5,4,"span",38)(18,$c,5,4,"span",38)(19,Gc,7,7,"span",38)(20,Pd,5,4,"span",38)(21,Xd,5,4,"span",38)(22,ft,5,4,"span",38)(23,Yd,7,7,"span",38)(24,La,5,4,"span",38)(25,Dc,5,4,"span",38)(26,ms,5,4,"span",38)(27,Hd,5,4,"span",38)(28,Vc,5,4,"span",38)(29,_s,7,11,"span",38)(30,Wn,6,4,"span",38)(31,Ud,12,11,"span",38)(32,Gn,8,7,"span",38)(33,Wd,8,7,"span",38)(34,Zd,12,14,"span",38)(35,Jd,12,14,"span",38)(36,hs,8,8,"span",38)(37,gs,8,8,"span",38)(38,ir,8,8,"span",38)(39,vs,9,11,"span",38),e.k0s()()()()),2&t){const n=e.sdS(6),i=e.sdS(11),s=e.XpG(),l=s.$implicit,d=s.index,f=e.XpG(2);e.Y8G("routerLink",e.eq3(36,Va,e.bMT(1,32,f.processNoticeService.getRouterLinkForNoticeObj(l,f.role))))("queryParams",f.processNoticeService.getQueryParamForNoticeObj(l)),e.R7$(2),e.Y8G("ngClass",e.eq3(38,Oa,0!==d)),e.R7$(2),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",n),e.R7$(5),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",i),e.R7$(4),e.SpI(" ",e.bMT(14,34,l.createdAt)," "),e.R7$(3),e.Y8G("ngIf","NEW_ASSIGN"==l.type),e.R7$(),e.Y8G("ngIf","HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_HOMEWORK"==l.type),e.R7$(),e.Y8G("ngIf","RESEND_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM_SUBMIT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM"==l.type),e.R7$(),e.Y8G("ngIf","EXAM_HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==l.type&&(l.totalApproved>0||l.totalRejected>0)),e.R7$(),e.Y8G("ngIf","NEW_CLASSROOM_NEWS"==l.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==l.type),e.R7$(),e.Y8G("ngIf","TUITION_NOT_PAID"==l.type),e.R7$(),e.Y8G("ngIf","DONT_FINISHED_LESSON_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_DONT_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_COMMENT_FOR_YOU"==l.type),e.R7$(),e.Y8G("ngIf","UPDATE_TUITION_PAYMENT"==l.type),e.R7$(),e.Y8G("ngIf","HAS_EXAM_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","CUSTOM_CONTENT_CLASSROOM"==l.type)}}function qd(t,r){if(1&t&&(e.qex(0),e.DNE(1,Kd,40,40,"a",29),e.bVm()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","NEW_SHARE_PERMISSION"!=n.type)}}function Pa(t,r){if(1&t&&(e.DNE(0,qd,2,1,"ng-container",24),e.nrm(1,"hr",25),e.j41(2,"div",26),e.nI1(3,"navigationLocalize"),e.j41(4,"div",27)(5,"a",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&t){const n=e.XpG();e.Y8G("ngForOf",n.commonNoticeData),e.R7$(2),e.Y8G("routerLink",e.eq3(7,Va,e.bMT(3,3,"/notify/"+n.role+"/0/0/0"))),e.R7$(4),e.SpI(" ",e.bMT(7,5,"lang_auto_xem_tat_ca")," ")}}let Oc=(()=>{var t;class r extends Ae.H{removeNoticeNumber(){this.frontSAztCommonService.apiFrontCommonMarkNotificationAsReadGet(this.role).subscribe(i=>{1==i.success&&(this.resetNotification(0),this.getHeaderInfo())}),this.isMobileWebView&&this.redirectService.redirectToPath(`/notify/${this.role}/0/0/0`)}resetNotification(i){var s="back_header_infors_"+this.userService.getUserObj().id,l=this.globalService.getGlobalData(s);l&&l.data&&(0==i&&(l.data.unreadNotification=0,this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!0)),this.globalService.setGlobalData(s,this.serializeJson(l)))}reGetNoticeObjs(){var i="back_header_infors_"+this.userService.getUserObj().id;this.globalService.removeGlobalData(i),this.getHeaderInfo()}getHeaderInfo(){var i="back_header_infors_"+this.userService.getUserObj().id,s=this.globalService.getGlobalData(i);s?(this.unreadNotification=s.data?.unreadNotification??0,this.commonNoticeData=s.data?.commonNoticeObjs??[],this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)):(this.initStatusObj(),this.frontSAztCommonService.apiFrontCommonGetHeaderInfoGet(this.role).subscribe(l=>{1==l.success&&(this.unreadNotification=l.data?.unreadNotification??0,this.globalService.setGlobalData(i,this.serializeJson(l)),this.commonNoticeData=l.data?.commonNoticeObjs??new Array,this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getHeaderInfo()}constructor(i,s,l,d,f,_,g){super(),(0,m.A)(this,"processNoticeService",void 0),(0,m.A)(this,"userService",void 0),(0,m.A)(this,"frontSAztCommonService",void 0),(0,m.A)(this,"globalService",void 0),(0,m.A)(this,"redirectService",void 0),(0,m.A)(this,"mobileWebviewService",void 0),(0,m.A)(this,"sAztHeaderNoticeService",void 0),(0,m.A)(this,"role",0),(0,m.A)(this,"commonNoticeData",[]),(0,m.A)(this,"unreadNotification",0),this.processNoticeService=i,this.userService=s,this.frontSAztCommonService=l,this.globalService=d,this.redirectService=f,this.mobileWebviewService=_,this.sAztHeaderNoticeService=g,this.waitDestroy(this.mobileWebviewService.getHeaderReloadNoticeSubscriber().subscribe(()=>{this.reGetNoticeObjs()}))}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(kn),e.rXU(kt.R),e.rXU(vn.s1),e.rXU(Nc),e.rXU(Je.m),e.rXU(M),e.rXU(Ec))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-notice-box"]],inputs:{role:"role"},features:[e.Vt3],decls:9,vars:6,consts:[["notification","matMenu"],["listNoticeBox",""],["doneLoading",""],["noNotification",""],["otherTemplate",""],["notSharePermission",""],["c","isDisabled"],["azt-track-service","header-notice-box-DtIJA3xWHnn",1,"dropdown-toggle","notification","cursor-pointer","relative",3,"click","matMenuTriggerFor"],["name","bell","size","24",3,"ngClass"],["class","w-3 h-3 mx-auto inline-block",4,"ngIf"],["class","absolute bg-danger text-white rounded-full font-bold","style","top: -5px; right: -5px; font-size: 7px; overflow: hidden; width: 15px; height: 15px; line-height: 15px; text-align: center",4,"ngIf"],["class","notification-content dropdown-menu show relative pt-2",4,"ngIf"],[1,"w-3","h-3","mx-auto","inline-block"],[1,"absolute","bg-danger","text-white","rounded-full","font-bold",2,"top","-5px","right","-5px","font-size","7px","overflow","hidden","width","15px","height","15px","line-height","15px","text-align","center"],[1,"notification-content","dropdown-menu","show","relative","pt-2"],[1,"notification-content__box","dropdown-content",2,"padding","10px"],[1,"notification-content__title"],["class","w-4 h-4 mx-auto mb-4",4,"ngIf","ngIfElse"],[1,"w-4","h-4","mx-auto","mb-4"],["type","bootstrap-spinner"],["class","notice-azt",4,"ngIf","ngIfElse"],[1,"notice-azt"],[3,"ngTemplateOutlet"],[1,"w-full","text-center","text-slate-500","mt-0.5","mb-4"],[4,"ngFor","ngForOf"],[1,"dropdown-divider","border-gray/[0.08]","mt-3"],["azt-track-service","header-notice-box-m_8Z0tdYOsZ",1,"clickable","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"routerLink"],[1,"text-center","p-3"],[1,"text-primary","text-center"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams"],[1,"cursor-pointer","dropdown-item","relative","flex","items-center",3,"ngClass"],[1,"w-12","h-12","flex-none","image-fit","mr-1"],[4,"ngIf","ngIfElse"],[1,"ml-2","overflow-hidden","w-full"],[1,"flex","items-center"],[1,"text-xs","text-slate-400","ml-auto","whitespace-nowrap"],[1,"text-slate-500","mt-0.5"],[4,"ngIf"],[3,"linkAvatar","nameCreateAvatar","size"],[3,"nameCreateAvatar","size",4,"ngIf"],[3,"linkAvatar","size",4,"ngIf"],[3,"nameCreateAvatar","size"],[3,"linkAvatar","size"],[1,"font-medium","truncate","mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","font-medium truncate mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],["class","font-medium mr-5",4,"ngIf"],[1,"font-medium","mr-5"],[1,"notify__name"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){return e.eBV(l),e.Njj(s.statusObj.loading?"":s.removeNoticeNumber())}),e.nrm(1,"lucide-icon",8),e.DNE(2,Ac,2,0,"div",9)(3,tr,2,1,"div",10),e.k0s(),e.j41(4,"mat-menu",null,0),e.DNE(6,ps,8,5,"div",11),e.k0s(),e.DNE(7,Pa,8,9,"ng-template",null,1,e.C5r)}if(2&i){const l=e.sdS(5);e.Y8G("matMenuTriggerFor",s.isMobileWebView?null:l),e.R7$(),e.Y8G("ngClass",e.lJ4(5,Tc)),e.R7$(),e.Y8G("ngIf",s.statusObj.loading),e.R7$(),e.Y8G("ngIf",s.unreadNotification&&!s.statusObj.loading),e.R7$(3),e.Y8G("ngIf",!s.isMobileWebView)}},dependencies:[xt.Wk,L.YU,L.Sq,L.bT,L.T3,Z.kk,Z.Cp,ln.oV,Jo,Ic,Ne.R,Ct.WGl,Ee.F2,Ee.wp,Ee.Vs,Ee.bH,Ee.OR],encapsulation:2})),r})();const Xa=["*"],rr=()=>({"mr-1":!0}),Mt=t=>[t],ys=()=>({"text-white transform -rotate-90":!0});function Be(t,r){1&t&&e.SdG(0)}function zc(t,r){if(1&t&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.headerTitle," ")}}function Bc(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div")(3,"button",13),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.goBack())}),e.nrm(4,"lucide-icon",14),e.j41(5,"span",15),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()(),e.j41(8,"div",16)(9,"span",17),e.EFF(10),e.k0s()(),e.j41(11,"div",12)(12,"div",18),e.nrm(13,"azt-switch-language"),e.k0s(),e.j41(14,"div",18),e.nrm(15,"header-notice-box",19),e.k0s(),e.j41(16,"div",20),e.nrm(17,"header-account-menu",21),e.k0s()()(),e.DNE(18,zc,2,1,"div",22),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngClass",e.lJ4(8,rr)),e.R7$(2),e.JRh(e.bMT(7,6,"lang_auto_quay_lai")),e.R7$(4),e.JRh(n.headerTitle),e.R7$(5),e.Y8G("role",0),e.R7$(2),e.Y8G("isTeacherDashboard",!0),e.R7$(),e.Y8G("ngIf",n.headerTitle)}}function Ya(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeMenuMobile())}),e.j41(3,"div",35),e.nrm(4,"lucide-icon",50),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(6,Mt,e.bMT(2,2,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(7,4,"lang_document_market_title")))}function Lc(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"a",26),e.nI1(3,"navigationLocalize"),e.nrm(4,"img",27),e.nI1(5,"getLinkLogo"),e.k0s(),e.j41(6,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.openMenuMobile())}),e.nrm(7,"lucide-icon",29),e.k0s()(),e.j41(8,"div",30)(9,"a",31),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.nrm(10,"lucide-icon",32),e.k0s(),e.j41(11,"ul",33)(12,"li")(13,"a",34),e.nI1(14,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(15,"div",35),e.nrm(16,"lucide-icon",36),e.k0s(),e.j41(17,"div",37),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()(),e.j41(20,"li")(21,"a",38),e.nI1(22,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(23,"div",35),e.nrm(24,"lucide-icon",39),e.k0s(),e.j41(25,"div",37),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()(),e.j41(28,"li")(29,"a",40),e.nI1(30,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(31,"div",35),e.nrm(32,"lucide-icon",41),e.k0s(),e.j41(33,"div",37),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"li")(37,"a",42),e.nI1(38,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(39,"div",35),e.nrm(40,"lucide-icon",43),e.k0s(),e.j41(41,"div",37),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",44),e.nI1(46,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(47,"div",35),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",37),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,Ya,8,8,"li",46),e.j41(53,"li")(54,"a",47),e.nI1(55,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(56,"div",35),e.nrm(57,"lucide-icon",48),e.k0s(),e.j41(58,"div",37),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(45,Mt,e.bMT(3,17,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(5,19,"smallLogo"),e.B4B),e.R7$(3),e.Y8G("ngClass",e.lJ4(47,ys)),e.R7$(3),e.Y8G("ngClass",e.lJ4(48,ys)),e.R7$(3),e.Y8G("routerLink",e.eq3(49,Mt,e.bMT(14,21,"/admin/dashboard"))),e.R7$(5),e.JRh(e.bMT(19,23,"lang_auto_dashboard")),e.R7$(3),e.Y8G("routerLink",e.eq3(51,Mt,e.bMT(22,25,"/admin/testbank/document-management/1/0/1"))),e.R7$(5),e.SpI(" ",e.bMT(27,27,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(53,Mt,e.bMT(30,29,"/admin/testbank/document-management/0/0/1"))),e.R7$(5),e.JRh(e.bMT(35,31,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(55,Mt,e.bMT(38,33,"/admin/student/manage-classroom/0"))),e.R7$(5),e.JRh(e.bMT(43,35,"lang_auto_quan_ly_lop")),e.R7$(3),e.Y8G("routerLink",e.eq3(57,Mt,e.bMT(46,37,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,39,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(59,Mt,e.bMT(55,41,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(60,43,"lang_cms_business_dashboard_title"))}}function Pc(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",65),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",50),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_document_market_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Mt,e.bMT(3,6,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_document_market_title")))}function Xc(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",66),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",67),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_notice_bank_question")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Mt,e.bMT(3,6,"/admin/question-library/dashboard"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_notice_bank_question")))}function Ha(t,r){if(1&t&&(e.j41(0,"nav",51)(1,"a",52),e.nI1(2,"navigationLocalize"),e.nrm(3,"img",27),e.nI1(4,"getLinkLogo"),e.k0s(),e.nrm(5,"div",53),e.j41(6,"ul")(7,"li")(8,"a",54),e.nI1(9,"navigationLocalize"),e.j41(10,"div",55),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",36),e.k0s(),e.j41(13,"div",56),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()(),e.j41(16,"li")(17,"a",57),e.nI1(18,"navigationLocalize"),e.j41(19,"div",55),e.nI1(20,"mytranslate"),e.nrm(21,"lucide-icon",39),e.k0s(),e.j41(22,"div",56),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.j41(25,"li")(26,"a",58),e.nI1(27,"navigationLocalize"),e.j41(28,"div",55),e.nI1(29,"mytranslate"),e.nrm(30,"lucide-icon",41),e.k0s(),e.j41(31,"div",56),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"li")(35,"a",59),e.nI1(36,"navigationLocalize"),e.j41(37,"div",55),e.nI1(38,"mytranslate"),e.nrm(39,"lucide-icon",43),e.k0s(),e.j41(40,"div",56),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()(),e.j41(43,"li",60),e.nI1(44,"mytranslate"),e.j41(45,"a",61),e.nI1(46,"navigationLocalize"),e.j41(47,"div",62),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",56),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,Pc,9,12,"li",63)(53,Xc,9,12,"li",63),e.j41(54,"li",60),e.nI1(55,"mytranslate"),e.j41(56,"a",64),e.nI1(57,"navigationLocalize"),e.j41(58,"div",62),e.nrm(59,"lucide-icon",48),e.k0s(),e.j41(60,"div",56),e.EFF(61),e.nI1(62,"mytranslate"),e.k0s()()()()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(68,Mt,e.bMT(2,28,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(4,30,"smallLogo"),e.B4B),e.R7$(5),e.Y8G("routerLink",e.eq3(70,Mt,e.bMT(9,32,"/admin/dashboard"))),e.R7$(2),e.FS9("matTooltip",e.bMT(11,34,"lang_auto_dashboard")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(15,36,"lang_auto_dashboard")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(72,Mt,e.bMT(18,38,"/admin/testbank/document-management/1/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(20,40,"lang_auto_bai_tap")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(24,42,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(74,Mt,e.bMT(27,44,"/admin/testbank/document-management/0/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(29,46,"lang_auto_de_thi")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.JRh(e.bMT(33,48,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(76,Mt,e.bMT(36,50,"/admin/student/manage-classroom/0"))),e.R7$(2),e.FS9("matTooltip",e.bMT(38,52,"lang_auto_quan_ly_lop")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(42,54,"lang_auto_quan_ly_lop")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(44,56,"lang_dashboard_teacher_management_box")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(78,Mt,e.bMT(46,58,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,60,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.FS9("matTooltip",e.bMT(55,62,"lang_cms_business_dashboard_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(80,Mt,e.bMT(57,64,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(62,66,"lang_cms_business_dashboard_title"))}}let yi=(()=>{var t;class r extends Ae.H{goBack(){this.commonService.myNavigationBySpecialQueryString(this.headerBackToLink)}openMenuMobile(){document.getElementById("toggle-menu")?.classList.add("mobile-menu--active")}closeMenuMobile(){document.getElementById("toggle-menu")?.classList.remove("mobile-menu--active")}initActiveNav(){this.activeTagHomeUrlList=["/admin/dashboard","/auth/account-setting","/notify","/admin/trash","/admin/testbank/create-website","/admin/testbank/create-website-result","/payment/azo-package","/super-role/","/azota-ads/","/auth/vip-packages","/azota-tools/"],this.activeTagHomeworkUrlList=["/admin/testbank/document-management/1","/admin/testbank/homework-results-list","/admin/testbank/config-homework","/admin/testbank/publish-document/1","/create-homework-success/","/admin/homework/add-new-homework","/admin/homework/mark-exercise"],this.activeTagExamUrlList=["/admin/testbank/matrix-list/","/admin/testbank/document-management/0","/admin/testbank/create-new-document","/admin/testbank/create-tree-document","/admin/testbank/exam-results-list","/admin/testbank/statistic/","/admin/testbank/action-online-offline/","/admin/testbank/analyze-knowledge/","/admin/testbank/config-exam-online","/admin/testbank/publish-document/0","/admin/testbank/add-student","/admin/testbank/test-review","/admin/testbank/create-exam-by-excel/","/admin/testbank/create-manual-offline-exam/","/admin/testbank/config-exam-offline/","/admin/testbank/update-exam/","/admin/testbank/update-offline-exam-code/","/admin/testbank/test-result-tracking/","/admin/testbank/download-file-print/","/admin/testbank/print-exam-and-ticket/","/admin/test-market/introduce","/admin/testbank/update-offline-exam","/admin/testbank/ai-create-exam/","/admin/testbank/create-exam-by-text/","/ladingpage/","/admin/testbank/update-capacity-exam","/admin/testbank/create-capacity-exam"],this.activeTagQuestionLibraryUrlList=["/admin/question-library/"],this.activeTagClassroomUrlList=["/admin/student"],this.activeTagGroupUrlList=["/admin/teacher-group"],this.activeTagDocumentMarketUrlList=["/document-market/"],this.activeTagBusinessUrlList=["/business/"],this.activeTagBusinessTableUrlList=["/table-honored"]}ngOnInit(){super.ngOnInit(),this.initActiveNav()}constructor(i,s,l){super(),(0,m.A)(this,"processNoticeService",void 0),(0,m.A)(this,"userService",void 0),(0,m.A)(this,"browserStorageService",void 0),(0,m.A)(this,"headerBackToLink",""),(0,m.A)(this,"headerTitle",""),(0,m.A)(this,"checkBackDialog",!1),(0,m.A)(this,"handleBackDialog",new e.bkB),(0,m.A)(this,"activeTagHomeUrlList",[]),(0,m.A)(this,"activeTagHomeworkUrlList",[]),(0,m.A)(this,"activeTagExamUrlList",[]),(0,m.A)(this,"activeTagClassroomUrlList",[]),(0,m.A)(this,"activeTagGroupUrlList",[]),(0,m.A)(this,"activeTagDocumentMarketUrlList",[]),(0,m.A)(this,"activeTagQuestionLibraryUrlList",[]),(0,m.A)(this,"activeTagBusinessUrlList",[]),(0,m.A)(this,"activeTagBusinessTableUrlList",[]),this.processNoticeService=i,this.userService=s,this.browserStorageService=l}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(kn),e.rXU(kt.R),e.rXU(Sn.z))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["teacher-layout"]],inputs:{headerBackToLink:"headerBackToLink",headerTitle:"headerTitle",checkBackDialog:"checkBackDialog"},outputs:{handleBackDialog:"handleBackDialog"},features:[e.Vt3],ngContentSelectors:Xa,decls:18,vars:4,consts:[["BodyContentTpl",""],["TopBarTpl",""],["mobileMenuTpl",""],["DesktopMenuTpl",""],["id","azt-layout",1,"azt-layout"],[1,"azt-body"],[3,"ngTemplateOutlet"],[1,"flex","mt-[4.7rem]","md:mt-0"],[1,"content","relative"],[1,"top-bar"],[1,"azt-content"],[1,"block","w-full"],[1,"flex","items-center"],["azt-track-service","teacher-layout-txPc6qxNl",1,"btn","btn-transparent",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[1,"azt-hidden","sm:block"],[1,"font-medium","flex-one","text-center"],[1,"azt-hidden","md:block"],[1,"dropdown","mr-2","sm:mr-4"],[3,"role"],[1,"dropdown","header-account-menu"],[3,"isTeacherDashboard"],["class","block md:hidden text-center pt-2 pb-2 font-medium",4,"ngIf"],[1,"block","md:hidden","text-center","pt-2","pb-2","font-medium"],["id","toggle-menu",1,"mobile-menu","md:hidden"],[1,"mobile-menu-bar"],["azt-track-service","teacher-layout-eJLgd2yvySJ",1,"flex","mr-auto",3,"routerLink"],["alt","Azota",1,"w-10",3,"src"],["azt-track-service","teacher-layout-kPh_SLquONL",1,"mobile-menu-toggler",3,"click"],["name","bar-chart-2","size","20",3,"ngClass"],[1,"scrollable"],["azt-track-service","teacher-layout-p3XQvJS7FuD",1,"mobile-menu-toggler",3,"click"],["name","circle-x","size","32",3,"ngClass"],[1,"scrollable__content","py-2"],["azt-track-service","teacher-layout-67rbSb3dLPU",1,"menu",3,"click","routerLink"],[1,"menu__icon"],["name","house","size","24"],[1,"menu__title"],["azt-track-service","teacher-layout-J8TmW2BMwsH",1,"menu",3,"click","routerLink"],["name","file-text","size","24"],["azt-track-service","teacher-layout-U1Xi4mAqmKv",1,"menu",3,"click","routerLink"],["name","folder","size","24"],["azt-track-service","teacher-layout-nV8vMAnzV7_",1,"menu",3,"click","routerLink"],["name","layers","size","24"],["azt-track-service","teacher-layout-27U-GtoLLKH",1,"menu",3,"click","routerLink"],["name","users","size","24"],[4,"ngIf"],["azt-track-service","teacher-layout-QY_BVpu7d",1,"menu",3,"click","routerLink"],["name","plug","size","24",2,"transform","rotate(45deg)"],["azt-track-service","teacher-layout-bYWbXjGnRw",1,"menu",3,"click","routerLink"],["name","book-open","size","24"],[1,"side-nav","side-nav--simple"],["azt-track-service","teacher-layout-VhZ51QnFiPG",1,"flex","items-center","pl-5","pt-4","relative",3,"routerLink"],[1,"side-nav__devider","my-6"],["azt-track-service","teacher-layout-qPpeOjyQiU6",1,"side-menu",3,"routerLink"],[1,"side-menu__icon",3,"matTooltip","matTooltipPosition"],[1,"side-menu__title"],["azt-track-service","teacher-layout-JuqCTNWN4XT",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-tB87TxUcBLf",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-FmXRsM0ZL-Y",1,"side-menu",3,"routerLink"],[3,"matTooltip","matTooltipPosition"],["azt-track-service","teacher-layout-dUjdIyx6m3F",1,"side-menu",3,"routerLink"],[1,"side-menu__icon"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["azt-track-service","teacher-layout-Qn0hMZhPEp",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-hn8q-bW1M",1,"side-menu",3,"routerLink"],[1,"side-menu",3,"routerLink"],["name","landmark","size","24"]],template:function(i,s){if(1&i&&(e.NAR(),e.j41(0,"div",4)(1,"div",5),e.eu8(2,6),e.j41(3,"div",7),e.eu8(4,6),e.j41(5,"div",8)(6,"div",9),e.eu8(7,6),e.k0s(),e.j41(8,"div",10),e.eu8(9,6),e.k0s()()()()(),e.DNE(10,Be,1,0,"ng-template",null,0,e.C5r)(12,Bc,19,9,"ng-template",null,1,e.C5r)(14,Lc,61,61,"ng-template",null,2,e.C5r)(16,Ha,63,82,"ng-template",null,3,e.C5r)),2&i){const l=e.sdS(11),d=e.sdS(13),f=e.sdS(15),_=e.sdS(17);e.R7$(2),e.Y8G("ngTemplateOutlet",f),e.R7$(2),e.Y8G("ngTemplateOutlet",_),e.R7$(3),e.Y8G("ngTemplateOutlet",d),e.R7$(2),e.Y8G("ngTemplateOutlet",l)}},dependencies:[xt.Wk,L.YU,L.bT,L.T3,ln.oV,ut,Ct.WGl,vi,Oc,Ee.F2,Ee.wp,Ee.ph],encapsulation:2})),r})();function No(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.create())}),e.nrm(2,"i",7),e.EFF(3," Create new App "),e.k0s()()}}function Eo(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",13)(1,"button",14),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.edit(s))}),e.nrm(2,"i",15),e.k0s()()}}function Io(t,r){if(1&t&&(e.j41(0,"div",8)(1,"a",9)(2,"div",10),e.nrm(3,"i"),e.j41(4,"div",11),e.EFF(5),e.k0s()()(),e.DNE(6,Eo,3,0,"div",12),e.k0s()),2&t){const n=r.$implicit,i=r.index,s=e.XpG(2);e.BMQ("touranchor","azt-tour-"+(i+1)),e.R7$(),e.Mz_("href","/vi/admin/ai/app/",n.id,"",e.B4B),e.R7$(2),e.ZvI("",n.icon," text-4xl"),e.R7$(2),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngIf",s.isAdmin)}}function sr(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,No,4,0,"div",2),e.j41(2,"div",3),e.DNE(3,Io,7,8,"div",4),e.k0s()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.isAdmin),e.R7$(2),e.Y8G("ngForOf",n.listApp)}}function ar(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.editFlow())}),e.EFF(1,"Flow"),e.k0s()}}function To(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",17)(2,"label",18),e.EFF(3,"App Name"),e.k0s(),e.j41(4,"input",19),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.name,s)||(l.curApp.name=s),e.Njj(s)}),e.k0s()(),e.j41(5,"div",17)(6,"label",18),e.EFF(7,"Run Async"),e.k0s(),e.j41(8,"input",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.pinTaskbar,s)||(l.curApp.pinTaskbar=s),e.Njj(s)}),e.k0s()(),e.j41(9,"div",17)(10,"label",18),e.EFF(11,"Description"),e.k0s(),e.j41(12,"textarea",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.desc,s)||(l.curApp.desc=s),e.Njj(s)}),e.k0s()(),e.j41(13,"div",17)(14,"label",18),e.EFF(15,"Icon"),e.k0s(),e.j41(16,"input",22),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.icon,s)||(l.curApp.icon=s),e.Njj(s)}),e.k0s()(),e.j41(17,"div",23)(18,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.close())}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.copyApp())}),e.EFF(21,"Copy"),e.k0s(),e.j41(22,"button",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.deleteApp())}),e.EFF(23,"Delete"),e.k0s(),e.j41(24,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.shareApp())}),e.EFF(25),e.k0s(),e.DNE(26,ar,2,0,"button",26),e.j41(27,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.save())}),e.EFF(28),e.k0s()()()}if(2&t){let n;const i=e.XpG(2);e.R7$(4),e.R50("ngModel",i.curApp.name),e.R7$(4),e.R50("ngModel",i.curApp.pinTaskbar),e.R7$(4),e.R50("ngModel",i.curApp.desc),e.R7$(4),e.R50("ngModel",i.curApp.icon),e.R7$(9),e.JRh(i.curApp.share&&i.curApp.share>0?"Remove from Shared":"Share"),e.R7$(),e.Y8G("ngIf",null!==(n=null==i.curApp?null:i.curApp.id)&&void 0!==n&&n),e.R7$(),e.Y8G("disabled",i.saving),e.R7$(),e.JRh(i.curApp.id>0?"Save":"Create App")}}function Qd(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,To,29,8,"div",0),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curApp)}}let Ua=(()=>{var t;class r extends Ae.H{constructor(i,s,l){super(),(0,m.A)(this,"auth",void 0),(0,m.A)(this,"userSv",void 0),(0,m.A)(this,"appService",void 0),(0,m.A)(this,"isAdmin",!1),(0,m.A)(this,"isPasting",!1),(0,m.A)(this,"listApp",[]),(0,m.A)(this,"curApp",void 0),(0,m.A)(this,"saving",!1),this.auth=i,this.userSv=s,this.appService=l}ngOnInit(){var i=this;document.addEventListener("paste",function(){var s=(0,Ce.A)(function*(l){if(!i.isPasting){i.isPasting=!0;try{i.listApp.push({icon:"bx bx-loader-circle",name:"Creating..."});const d=yield navigator.clipboard.readText();if(d.indexOf('"icon"')>0&&d.indexOf('"config"')>0){l.preventDefault();let f=JSON.parse(d);i.appService.save(f).subscribe(_=>{i.isPasting=!1,i.loadApp()})}}catch(d){i.isPasting=!1,console.error("Failed to read from clipboard: ",d)}}});return function(l){return s.apply(this,arguments)}}()),this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),s=>{this.loadApp()})}loadApp(){this.isAdmin=1==this.userSv.getUserObj().id,this.isAdmin?this.appService.getList().subscribe(i=>{this.listApp=i}):this.appService.getListShare().subscribe(i=>{this.listApp=i})}edit(i){this.curApp=i}create(){this.curApp={id:0,config:"[]",name:"",icon:""}}editFlow(){window.location.href="/vi/admin/ai/flow/"+this.curApp.id}save(){this.curApp&&(this.saving=!0,this.appService.save(this.curApp).subscribe(i=>{0==this.curApp.id?window.location.href="/vi/admin/ai/flow/"+i.data:(this.saving=!1,this.close(),this.loadApp())}))}close(){this.curApp=void 0}deleteApp(){this.curApp&&confirm(`Delete this app? [${this.curApp.name}]`)&&this.appService.delete(this.curApp).subscribe(i=>{this.close(),this.loadApp()})}copyApp(){var i=this;return(0,Ce.A)(function*(){if(!i.curApp)return;let s=JSON.parse(JSON.stringify(i.curApp));s.id=0;try{yield navigator.clipboard.writeText(JSON.stringify(s))}catch(l){console.error("Failed to copy text: ",l)}})()}shareApp(){this.curApp&&confirm(`Share this app to Public Library mean everyone can access it. Do you want to share? [${this.curApp.name}]`)&&(this.curApp.share=this.curApp.share&&this.curApp.share>0?0:1,this.appService.share(this.curApp).subscribe(i=>{alert("Share successful! We will review you app soon.")}))}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(an.u),e.rXU(kt.R),e.rXU(je))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[4,"ngIf"],["class","box p-3 w-1/2 mx-auto mt-3",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-4 md:col-span-2 intro-y h-full",4,"ngFor","ngForOf"],[1,"text-center"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bx","bx-plus","mr-2"],[1,"col-span-4","md:col-span-2","intro-y","h-full"],["azt-track-service","dashboard-main-rF6MSAArUsY",3,"href"],[1,"box","p-8","zoom-in","h-full","text-center"],[1,"font-medium","text-center","text-base","mt-3"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],[1,"p-0",3,"click"],[1,"bx","bx-pencil"],[1,"box","p-3","w-1/2","mx-auto","mt-3"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","App Name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","1 or 0",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","bx bx-pencil",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-right"],["type","button",1,"btn","btn-label-secondary","mr-3",3,"click"],["type","button",1,"btn","text-danger","btn-label-secondary","mr-3",3,"click"],["type","button","class","btn btn-label-secondary mr-3",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click","disabled"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout"),e.DNE(1,sr,4,2,"div",0)(2,Qd,2,1,"div",1),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",!s.curApp),e.R7$(),e.Y8G("ngIf",s.curApp))},dependencies:[Xe.b,yi,L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS]})),r})(),lr=(()=>{var t;class r extends Ae.H{ngOnInit(){super.ngOnInit()}constructor(){super()}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-demo"]],features:[e.Vt3],decls:3,vars:0,consts:[[1,"box","p-3","mt-3"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout")(1,"div",0),e.EFF(2,"Code hehe"),e.k0s()())},dependencies:[yi],encapsulation:2})),r})();var k=pe(1395);function Lt(t){if("string"==typeof t||"number"==typeof t)return""+t;let r="";if(Array.isArray(t))for(let i,n=0;n<t.length;n++)""!==(i=Lt(t[n]))&&(r+=(r&&" ")+i);else for(let n in t)t[n]&&(r+=(r&&" ")+n);return r}var bs=pe(7528);const Wa=t=>{let r;const n=new Set,i=(v,b)=>{const C="function"==typeof v?v(r):v;if(!Object.is(C,r)){const x=r;r=b??("object"!=typeof C||null===C)?C:Object.assign({},r,C),n.forEach(I=>I(r,x))}},s=()=>r,_={setState:i,getState:s,getInitialState:()=>g,subscribe:v=>(n.add(v),()=>n.delete(v)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},g=r=t(i,s,_);return _},{useDebugValue:cr}=k,{useSyncExternalStoreWithSelector:bi}=bs,Cs=t=>t;function Hc(t,r=Cs,n){const i=bi(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,n);return cr(i),i}const Uc=(t,r)=>{const n=(t=>t?Wa(t):Wa)(t),i=(s,l=r)=>Hc(n,s,l);return Object.assign(i,n),i};function vt(t,r){if(Object.is(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,s]of t)if(!Object.is(s,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var Zc={value:()=>{}};function co(){for(var i,t=0,r=arguments.length,n={};t<r;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new xi(n)}function xi(t){this._=t}function Jc(t,r){for(var s,n=0,i=t.length;n<i;++n)if((s=t[n]).name===r)return s.value}function ur(t,r,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===r){t[i]=Zc,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:r,value:n}),t}xi.prototype=co.prototype={constructor:xi,on:function(t,r){var s,n=this._,i=function ks(t,r){return t.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}(t+"",n),l=-1,d=i.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++l<d;)if(s=(t=i[l]).type)n[s]=ur(n[s],t.name,r);else if(null==r)for(s in n)n[s]=ur(n[s],t.name,null);return this}for(;++l<d;)if((s=(t=i[l]).type)&&(s=Jc(n[s],t.name)))return s},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new xi(t)},call:function(t,r){if((s=arguments.length-2)>0)for(var s,l,n=new Array(s),i=0;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,s=(l=this._[t]).length;i<s;++i)l[i].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(r,n)}};const Ci=co;function Kc(){}function Kt(t){return null==t?Kc:function(){return this.querySelector(t)}}function dr(){return[]}function qc(t){return null==t?dr:function(){return this.querySelectorAll(t)}}function Si(t){return function(){return this.matches(t)}}function pr(t){return function(r){return r.matches(t)}}var Qc=Array.prototype.find;function tp(){return this.firstElementChild}var Qa=Array.prototype.filter;function op(){return Array.from(this.children)}function eu(t){return new Array(t.length)}function Ss(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}function lp(t,r,n,i,s,l){for(var f,d=0,_=r.length,g=l.length;d<g;++d)(f=r[d])?(f.__data__=l[d],i[d]=f):n[d]=new Ss(t,l[d]);for(;d<_;++d)(f=r[d])&&(s[d]=f)}function cp(t,r,n,i,s,l,d){var f,_,x,g=new Map,v=r.length,b=l.length,C=new Array(v);for(f=0;f<v;++f)(_=r[f])&&(C[f]=x=d.call(_,_.__data__,f,r)+"",g.has(x)?s[f]=_:g.set(x,_));for(f=0;f<b;++f)x=d.call(t,l[f],f,l)+"",(_=g.get(x))?(i[f]=_,_.__data__=l[f],g.delete(x)):n[f]=new Ss(t,l[f]);for(f=0;f<v;++f)(_=r[f])&&g.get(C[f])===_&&(s[f]=_)}function el(t){return t.__data__}function dp(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function hp(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}Ss.prototype={constructor:Ss,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ws="http://www.w3.org/1999/xhtml";const nl={svg:"http://www.w3.org/2000/svg",xhtml:ws,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mr(t){var r=t+="",n=r.indexOf(":");return n>=0&&"xmlns"!==(r=t.slice(0,n))&&(t=t.slice(n+1)),nl.hasOwnProperty(r)?{space:nl[r],local:t}:t}function ou(t){return function(){this.removeAttribute(t)}}function iu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wi(t,r){return function(){this.setAttribute(t,r)}}function xp(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function Cp(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function kp(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ol(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _r(t){return function(){this.style.removeProperty(t)}}function hr(t,r,n){return function(){this.style.setProperty(t,r,n)}}function Sp(t,r,n){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ni(t,r){return t.style.getPropertyValue(r)||ol(t).getComputedStyle(t,null).getPropertyValue(r)}function su(t){return function(){delete this[t]}}function il(t,r){return function(){this[t]=r}}function rl(t,r){return function(){var n=r.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function sl(t){return t.trim().split(/^|\s+/)}function Es(t){return t.classList||new lu(t)}function lu(t){this._node=t,this._names=sl(t.getAttribute("class")||"")}function cu(t,r){for(var n=Es(t),i=-1,s=r.length;++i<s;)n.add(r[i])}function uu(t,r){for(var n=Es(t),i=-1,s=r.length;++i<s;)n.remove(r[i])}function wp(t){return function(){cu(this,t)}}function Np(t){return function(){uu(this,t)}}function Dn(t,r){return function(){(r.apply(this,arguments)?cu:uu)(this,t)}}function du(){this.textContent=""}function pu(t){return function(){this.textContent=t}}function fu(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function al(){this.innerHTML=""}function Ep(t){return function(){this.innerHTML=t}}function Ip(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function ll(){this.nextSibling&&this.parentNode.appendChild(this)}function cl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Is(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===ws&&r.documentElement.namespaceURI===ws?r.createElement(t):r.createElementNS(n,t)}}function Ii(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ts(t){var r=mr(t);return(r.local?Ii:Is)(r)}function As(){return null}function vu(){var t=this.parentNode;t&&t.removeChild(this)}function bu(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function xu(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Tp(t){return function(){var r=this.__on;if(r){for(var l,n=0,i=-1,s=r.length;n<s;++n)l=r[n],t.type&&l.type!==t.type||l.name!==t.name?r[++i]=l:this.removeEventListener(l.type,l.listener,l.options);++i?r.length=i:delete this.__on}}}function Ap(t,r,n){return function(){var s,i=this.__on,l=function ul(t){return function(r){t.call(this,r,this.__data__)}}(r);if(i)for(var d=0,f=i.length;d<f;++d)if((s=i[d]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=l,s.options=n),void(s.value=r);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:r,listener:l,options:n},i?i.push(s):this.__on=[s]}}function ku(t,r,n){var i=ol(t),s=i.CustomEvent;"function"==typeof s?s=new s(r,n):(s=i.document.createEvent("Event"),n?(s.initEvent(r,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(r,!1,!1)),t.dispatchEvent(s)}function Su(t,r){return function(){return ku(this,t,r)}}function wu(t,r){return function(){return ku(this,t,r.apply(this,arguments))}}lu.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var br=[null];function jt(t,r){this._groups=t,this._parents=r}function fl(){return new jt([[document.documentElement]],br)}jt.prototype=fl.prototype={constructor:jt,select:function ki(t){"function"!=typeof t&&(t=Kt(t));for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s)for(var _,g,l=r[s],d=l.length,f=i[s]=new Array(d),v=0;v<d;++v)(_=l[v])&&(g=t.call(_,_.__data__,v,l))&&("__data__"in _&&(g.__data__=_.__data__),f[v]=g);return new jt(i,this._parents)},selectAll:function qa(t){t="function"==typeof t?function Ka(t){return function(){return function Ja(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):qc(t);for(var r=this._groups,n=r.length,i=[],s=[],l=0;l<n;++l)for(var _,d=r[l],f=d.length,g=0;g<f;++g)(_=d[g])&&(i.push(t.call(_,_.__data__,g,d)),s.push(_));return new jt(i,s)},selectChild:function np(t){return this.select(null==t?tp:function ep(t){return function(){return Qc.call(this.children,t)}}("function"==typeof t?t:pr(t)))},selectChildren:function rp(t){return this.selectAll(null==t?op:function ip(t){return function(){return Qa.call(this.children,t)}}("function"==typeof t?t:pr(t)))},filter:function sp(t){"function"!=typeof t&&(t=Si(t));for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s)for(var _,l=r[s],d=l.length,f=i[s]=[],g=0;g<d;++g)(_=l[g])&&t.call(_,_.__data__,g,l)&&f.push(_);return new jt(i,this._parents)},data:function up(t,r){if(!arguments.length)return Array.from(this,el);var n=r?cp:lp,i=this._parents,s=this._groups;"function"!=typeof t&&(t=function ap(t){return function(){return t}}(t));for(var l=s.length,d=new Array(l),f=new Array(l),_=new Array(l),g=0;g<l;++g){var v=i[g],b=s[g],C=b.length,x=dp(t.call(v,v&&v.__data__,g,i)),I=x.length,T=f[g]=new Array(I),R=d[g]=new Array(I);n(v,b,T,R,_[g]=new Array(C),x,r);for(var j,Y,$=0,V=0;$<I;++$)if(j=T[$]){for($>=V&&(V=$+1);!(Y=R[V])&&++V<I;);j._next=Y||null}}return(d=new jt(d,i))._enter=f,d._exit=_,d},enter:function tu(){return new jt(this._enter||this._groups.map(eu),this._parents)},exit:function pp(){return new jt(this._exit||this._groups.map(eu),this._parents)},join:function nu(t,r,n){var i=this.enter(),s=this,l=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=r&&(s=r(s))&&(s=s.selection()),null==n?l.remove():n(l),i&&s?i.merge(s).order():s},merge:function fp(t){for(var r=t.selection?t.selection():t,n=this._groups,i=r._groups,s=n.length,d=Math.min(s,i.length),f=new Array(s),_=0;_<d;++_)for(var x,g=n[_],v=i[_],b=g.length,C=f[_]=new Array(b),I=0;I<b;++I)(x=g[I]||v[I])&&(C[I]=x);for(;_<s;++_)f[_]=n[_];return new jt(f,this._parents)},selection:function ml(){return this},order:function mp(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var d,i=t[r],s=i.length-1,l=i[s];--s>=0;)(d=i[s])&&(l&&4^d.compareDocumentPosition(l)&&l.parentNode.insertBefore(d,l),l=d);return this},sort:function _p(t){function r(b,C){return b&&C?t(b.__data__,C.__data__):!b-!C}t||(t=hp);for(var n=this._groups,i=n.length,s=new Array(i),l=0;l<i;++l){for(var g,d=n[l],f=d.length,_=s[l]=new Array(f),v=0;v<f;++v)(g=d[v])&&(_[v]=g);_.sort(r)}return new jt(s,this._parents).order()},call:function gp(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function vp(){return Array.from(this)},node:function yp(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,l=i.length;s<l;++s){var d=i[s];if(d)return d}return null},size:function tl(){let t=0;for(const r of this)++t;return t},empty:function fr(){return!this.node()},each:function bp(t){for(var r=this._groups,n=0,i=r.length;n<i;++n)for(var f,s=r[n],l=0,d=s.length;l<d;++l)(f=s[l])&&t.call(f,f.__data__,l,s);return this},attr:function ru(t,r){var n=mr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==r?n.local?iu:ou:"function"==typeof r?n.local?kp:Cp:n.local?xp:wi)(n,r))},style:function Ns(t,r,n){return arguments.length>1?this.each((null==r?_r:"function"==typeof r?Sp:hr)(t,r,n??"")):Ni(this.node(),t)},property:function au(t,r){return arguments.length>1?this.each((null==r?su:"function"==typeof r?rl:il)(t,r)):this.node()[t]},classed:function gr(t,r){var n=sl(t+"");if(arguments.length<2){for(var i=Es(this.node()),s=-1,l=n.length;++s<l;)if(!i.contains(n[s]))return!1;return!0}return this.each(("function"==typeof r?Dn:r?wp:Np)(n,r))},text:function mu(t){return arguments.length?this.each(null==t?du:("function"==typeof t?fu:pu)(t)):this.node().textContent},html:function Ei(t){return arguments.length?this.each(null==t?al:("function"==typeof t?Ip:Ep)(t)):this.node().innerHTML},raise:function vr(){return this.each(ll)},lower:function _u(){return this.each(cl)},append:function hu(t){var r="function"==typeof t?t:Ts(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function gu(t,r){var n="function"==typeof t?t:Ts(t),i=null==r?As:"function"==typeof r?r:Kt(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function yu(){return this.each(vu)},clone:function Cu(t){return this.select(t?xu:bu)},datum:function Ao(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function yr(t,r,n){var s,d,i=function dl(t){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");return i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),{type:r,name:n}})}(t+""),l=i.length;if(!(arguments.length<2)){for(f=r?Ap:Tp,s=0;s<l;++s)this.each(f(i[s],r,n));return this}var f=this.node().__on;if(f)for(var v,_=0,g=f.length;_<g;++_)for(s=0,v=f[_];s<l;++s)if((d=i[s]).type===v.type&&d.name===v.name)return v.value},dispatch:function Ke(t,r){return this.each(("function"==typeof r?wu:Su)(t,r))},[Symbol.iterator]:function*pl(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var d,i=t[r],s=0,l=i.length;s<l;++s)(d=i[s])&&(yield d)}};const uo=fl;function un(t){return"string"==typeof t?new jt([[document.querySelector(t)]],[document.documentElement]):new jt([[t]],br)}const Ti={passive:!1},Ai={capture:!0,passive:!1};function _l(t){t.stopImmediatePropagation()}function Ri(t){t.preventDefault(),t.stopImmediatePropagation()}function hl(t){var r=t.document.documentElement,n=un(t).on("dragstart.drag",Ri,Ai);"onselectstart"in r?n.on("selectstart.drag",Ri,Ai):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function xr(t,r){var n=t.document.documentElement,i=un(t).on("dragstart.drag",null);r&&(i.on("click.drag",Ri,Ai),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Fs(t){return((t=Math.exp(t))+1/t)/2}const yl=function t(r,n,i){function s(l,d){var R,E,f=l[0],_=l[1],g=l[2],C=d[2],x=d[0]-f,I=d[1]-_,T=x*x+I*I;if(T<1e-12)E=Math.log(C/g)/r,R=function(X){return[f+X*x,_+X*I,g*Math.exp(r*X*E)]};else{var $=Math.sqrt(T),V=(C*C-g*g+i*T)/(2*g*n*$),j=(C*C-g*g-i*T)/(2*C*n*$),Y=Math.log(Math.sqrt(V*V+1)-V),H=Math.log(Math.sqrt(j*j+1)-j);E=(H-Y)/r,R=function(X){var ee=X*E,U=Fs(Y),ce=g/(n*$)*(U*function vl(t){return((t=Math.exp(2*t))-1)/(t+1)}(r*ee+Y)-function gl(t){return((t=Math.exp(t))-1/t)/2}(Y));return[f+ce*x,_+ce*I,g*U/Fs(r*ee+Y)]}}return R.duration=1e3*E*r/Math.SQRT2,R}return s.rho=function(l){var d=Math.max(.001,+l),f=d*d;return t(d,f,f*f)},s}(Math.SQRT2,2,4);function Vn(t,r){if(t=function Rp(t){let r;for(;r=t.sourceEvent;)t=r;return t}(t),void 0===r&&(r=t.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(r.getScreenCTM().inverse())).x,i.y]}if(r.getBoundingClientRect){var s=r.getBoundingClientRect();return[t.clientX-s.left-r.clientLeft,t.clientY-s.top-r.clientTop]}}return[t.pageX,t.pageY]}var kr,Zn,Fi=0,Cr=0,qo=0,po=1e3,yn=0,On=0,wn=0,Qo="object"==typeof performance&&performance.now?performance:Date,Nu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bl(){return On||(Nu(ei),On=Qo.now()+wn)}function ei(){On=0}function Ro(){this._call=this._time=this._next=null}function ti(t,r,n){var i=new Ro;return i.restart(t,r,n),i}function js(){On=(yn=Qo.now())+wn,Fi=Cr=0;try{!function Ms(){bl(),++Fi;for(var r,t=kr;t;)(r=On-t._time)>=0&&t._call.call(void 0,r),t=t._next;--Fi}()}finally{Fi=0,function Fo(){for(var t,n,r=kr,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:kr=n);Zn=t,Ue(i)}(),On=0}}function Mi(){var t=Qo.now(),r=t-yn;r>po&&(wn-=r,yn=t)}function Ue(t){Fi||(Cr&&(Cr=clearTimeout(Cr)),t-On>24?(t<1/0&&(Cr=setTimeout(js,t-Qo.now()-wn)),qo&&(qo=clearInterval(qo))):(qo||(yn=Qo.now(),qo=setInterval(Mi,po)),Fi=1,Nu(js)))}function We(t,r,n){var i=new Ro;return i.restart(s=>{i.stop(),t(s+r)},r=null==r?0:+r,n),i}Ro.prototype=ti.prototype={constructor:Ro,restart:function(t,r,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?bl():+n)+(null==r?0:+r),!this._next&&Zn!==this&&(Zn?Zn._next=this:kr=this,Zn=this),this._call=t,this._time=n,Ue()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ue())}};var Mo=Ci("start","end","cancel","interrupt"),Pt=[],qt=0,$t=3;function ni(t,r,n,i,s,l){var d=t.__transition;if(d){if(n in d)return}else t.__transition={};!function xl(t,r,n){var s,i=t.__transition;function d(g){var v,b,C,x;if(1!==n.state)return _();for(v in i)if((x=i[v]).name===n.name){if(x.state===$t)return We(d);4===x.state?(x.state=6,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[v]):+v<r&&(x.state=6,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[v])}if(We(function(){n.state===$t&&(n.state=4,n.timer.restart(f,n.delay,n.time),f(g))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=$t,s=new Array(C=n.tween.length),v=0,b=-1;v<C;++v)(x=n.tween[v].value.call(t,t.__data__,n.index,n.group))&&(s[++b]=x);s.length=b+1}}function f(g){for(var v=g<n.duration?n.ease.call(null,g/n.duration):(n.timer.restart(_),n.state=5,1),b=-1,C=s.length;++b<C;)s[b].call(t,v);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){for(var g in n.state=6,n.timer.stop(),delete i[r],i)return;delete t.__transition}i[r]=n,n.timer=ti(function l(g){n.state=1,n.timer.restart(d,n.delay,n.time),n.delay<=g&&d(g-n.delay)},0,n.time)}(t,n,{name:r,index:i,group:s,on:Mo,tween:Pt,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:qt})}function Gs(t,r){var n=dn(t,r);if(n.state>qt)throw new Error("too late; already scheduled");return n}function Tt(t,r){var n=dn(t,r);if(n.state>$t)throw new Error("too late; already running");return n}function dn(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function Nr(t,r){var i,s,d,n=t.__transition,l=!0;if(n){for(d in r=null==r?null:r+"",n)(i=n[d]).name===r?(s=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[d]):l=!1;l&&delete t.__transition}}function Qt(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var ii,oi=180/Math.PI,Go={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Er(t,r,n,i,s,l){var d,f,_;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(_=t*n+r*i)&&(n-=t*_,i-=r*_),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,_/=f),t*i<r*n&&(t=-t,r=-r,_=-_,d=-d),{translateX:s,translateY:l,rotate:Math.atan2(r,t)*oi,skewX:Math.atan(_)*oi,scaleX:d,scaleY:f}}function Do(t,r,n,i){function s(g){return g.length?g.pop()+" ":""}return function(g,v){var b=[],C=[];return g=t(g),v=t(v),function l(g,v,b,C,x,I){if(g!==b||v!==C){var T=x.push("translate(",null,r,null,n);I.push({i:T-4,x:Qt(g,b)},{i:T-2,x:Qt(v,C)})}else(b||C)&&x.push("translate("+b+r+C+n)}(g.translateX,g.translateY,v.translateX,v.translateY,b,C),function d(g,v,b,C){g!==v?(g-v>180?v+=360:v-g>180&&(g+=360),C.push({i:b.push(s(b)+"rotate(",null,i)-2,x:Qt(g,v)})):v&&b.push(s(b)+"rotate("+v+i)}(g.rotate,v.rotate,b,C),function f(g,v,b,C){g!==v?C.push({i:b.push(s(b)+"skewX(",null,i)-2,x:Qt(g,v)}):v&&b.push(s(b)+"skewX("+v+i)}(g.skewX,v.skewX,b,C),function _(g,v,b,C,x,I){if(g!==b||v!==C){var T=x.push(s(x)+"scale(",null,",",null,")");I.push({i:T-4,x:Qt(g,b)},{i:T-2,x:Qt(v,C)})}else(1!==b||1!==C)&&x.push(s(x)+"scale("+b+","+C+")")}(g.scaleX,g.scaleY,v.scaleX,v.scaleY,b,C),g=v=null,function(x){for(var R,I=-1,T=C.length;++I<T;)b[(R=C[I]).i]=R.x(x);return b.join("")}}}var fo=Do(function Nn(t){const r=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?Go:Er(r.a,r.b,r.c,r.d,r.e,r.f)},"px, ","px)","deg)"),mo=Do(function En(t){return null!=t&&(ii||(ii=document.createElementNS("http://www.w3.org/2000/svg","g")),ii.setAttribute("transform",t),t=ii.transform.baseVal.consolidate())?Er((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Go},", ",")",")");function ri(t,r){var n,i;return function(){var s=Tt(this,t),l=s.tween;if(l!==n)for(var d=0,f=(i=n=l).length;d<f;++d)if(i[d].name===r){(i=i.slice()).splice(d,1);break}s.tween=i}}function Eu(t,r,n){var i,s;if("function"!=typeof n)throw new Error;return function(){var l=Tt(this,t),d=l.tween;if(d!==i){s=(i=d).slice();for(var f={name:r,value:n},_=0,g=s.length;_<g;++_)if(s[_].name===r){s[_]=f;break}_===g&&s.push(f)}l.tween=s}}function Ir(t,r,n){var i=t._id;return t.each(function(){var s=Tt(this,i);(s.value||(s.value={}))[r]=n.apply(this,arguments)}),function(s){return dn(s,i).value[r]}}function en(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function pn(t,r){var n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n}function Ye(){}var Tr=1/.7,si="\\s*([+-]?\\d+)\\s*",ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",In="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iu=/^#([0-9a-f]{3,8})$/,Ds=new RegExp(`^rgb\\(${si},${si},${si}\\)$`),Tu=new RegExp(`^rgb\\(${In},${In},${In}\\)$`),ji=new RegExp(`^rgba\\(${si},${si},${si},${ai}\\)$`),kl=new RegExp(`^rgba\\(${In},${In},${In},${ai}\\)$`),Mp=new RegExp(`^hsl\\(${ai},${In},${In}\\)$`),Ar=new RegExp(`^hsla\\(${ai},${In},${In},${ai}\\)$`),Rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sl(){return this.rgb().formatHex()}function wl(){return this.rgb().formatRgb()}function Vo(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=Iu.exec(t))?(n=r[1].length,r=parseInt(r[1],16),6===n?Fr(r):3===n?new Xt(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===n?_o(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===n?_o(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=Ds.exec(t))?new Xt(r[1],r[2],r[3],1):(r=Tu.exec(t))?new Xt(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=ji.exec(t))?_o(r[1],r[2],r[3],r[4]):(r=kl.exec(t))?_o(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Mp.exec(t))?Kn(r[1],r[2]/100,r[3]/100,1):(r=Ar.exec(t))?Kn(r[1],r[2]/100,r[3]/100,r[4]):Rr.hasOwnProperty(t)?Fr(Rr[t]):"transparent"===t?new Xt(NaN,NaN,NaN,0):null}function Fr(t){return new Xt(t>>16&255,t>>8&255,255&t,1)}function _o(t,r,n,i){return i<=0&&(t=r=n=NaN),new Xt(t,r,n,i)}function Gi(t,r,n,i){return 1===arguments.length?function Nl(t){return t instanceof Ye||(t=Vo(t)),t?new Xt((t=t.rgb()).r,t.g,t.b,t.opacity):new Xt}(t):new Xt(t,r,n,i??1)}function Xt(t,r,n,i){this.r=+t,this.g=+r,this.b=+n,this.opacity=+i}function Vs(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}`}function bn(){const t=Jn(this.opacity);return`${1===t?"rgb(":"rgba("}${ho(this.r)}, ${ho(this.g)}, ${ho(this.b)}${1===t?")":`, ${t})`}`}function Jn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ho(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Oo(t){return((t=ho(t))<16?"0":"")+t.toString(16)}function Kn(t,r,n,i){return i<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new Tn(t,r,n,i)}function go(t){if(t instanceof Tn)return new Tn(t.h,t.s,t.l,t.opacity);if(t instanceof Ye||(t=Vo(t)),!t)return new Tn;if(t instanceof Tn)return t;var r=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,s=Math.min(r,n,i),l=Math.max(r,n,i),d=NaN,f=l-s,_=(l+s)/2;return f?(d=r===l?(n-i)/f+6*(n<i):n===l?(i-r)/f+2:(r-n)/f+4,f/=_<.5?l+s:2-l-s,d*=60):f=_>0&&_<1?0:d,new Tn(d,f,_,t.opacity)}function Tn(t,r,n,i){this.h=+t,this.s=+r,this.l=+n,this.opacity=+i}function qn(t){return(t=(t||0)%360)<0?t+360:t}function zn(t){return Math.max(0,Math.min(1,t||0))}function Vi(t,r,n){return 255*(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)}function Il(t,r,n,i,s){var l=t*t,d=l*t;return((1-3*t+3*l-d)*r+(4-6*l+3*d)*n+(1+3*t+3*l-3*d)*i+d*s)/6}en(Ye,Vo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Sl,formatHex:Sl,formatHex8:function Au(){return this.rgb().formatHex8()},formatHsl:function $i(){return go(this).formatHsl()},formatRgb:wl,toString:wl}),en(Xt,Gi,pn(Ye,{brighter(t){return t=null==t?Tr:Math.pow(Tr,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xt(ho(this.r),ho(this.g),ho(this.b),Jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vs,formatHex:Vs,formatHex8:function Di(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}${Oo(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:bn,toString:bn})),en(Tn,function El(t,r,n,i){return 1===arguments.length?go(t):new Tn(t,r,n,i??1)},pn(Ye,{brighter(t){return t=null==t?Tr:Math.pow(Tr,t),new Tn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Tn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,s=2*n-i;return new Xt(Vi(t>=240?t-240:t+120,s,i),Vi(t,s,i),Vi(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new Tn(qn(this.h),zn(this.s),zn(this.l),Jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jn(this.opacity);return`${1===t?"hsl(":"hsla("}${qn(this.h)}, ${100*zn(this.s)}%, ${100*zn(this.l)}%${1===t?")":`, ${t})`}`}}));const Oi=t=>()=>t;function Bs(t,r){var n=r-t;return n?function Bn(t,r){return function(n){return t+n*r}}(t,n):Oi(isNaN(t)?r:t)}const ci=function t(r){var n=function li(t){return 1==(t=+t)?Bs:function(r,n){return n-r?function Mr(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(i){return Math.pow(t+i*r,n)}}(r,n,t):Oi(isNaN(r)?n:r)}}(r);function i(s,l){var d=n((s=Gi(s)).r,(l=Gi(l)).r),f=n(s.g,l.g),_=n(s.b,l.b),g=Bs(s.opacity,l.opacity);return function(v){return s.r=d(v),s.g=f(v),s.b=_(v),s.opacity=g(v),s+""}}return i.gamma=t,i}(1);function Tl(t){return function(r){var d,f,n=r.length,i=new Array(n),s=new Array(n),l=new Array(n);for(d=0;d<n;++d)f=Gi(r[d]),i[d]=f.r||0,s[d]=f.g||0,l[d]=f.b||0;return i=t(i),s=t(s),l=t(l),f.opacity=1,function(_){return f.r=i(_),f.g=s(_),f.b=l(_),f+""}}}Tl(function Os(t){var r=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),s=t[i],l=t[i+1];return Il((n-i/r)*r,i>0?t[i-1]:2*s-l,s,l,i<r-1?t[i+2]:2*l-s)}}),Tl(function Ru(t){var r=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*r);return Il((n-i/r)*r,t[(i+r-1)%r],t[i%r],t[(i+1)%r],t[(i+2)%r])}});var zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jr=new RegExp(zi.source,"g");function Rl(t,r){var i,s,l,n=zi.lastIndex=jr.lastIndex=0,d=-1,f=[],_=[];for(t+="",r+="";(i=zi.exec(t))&&(s=jr.exec(r));)(l=s.index)>n&&(l=r.slice(n,l),f[d]?f[d]+=l:f[++d]=l),(i=i[0])===(s=s[0])?f[d]?f[d]+=s:f[++d]=s:(f[++d]=null,_.push({i:d,x:Qt(i,s)})),n=jr.lastIndex;return n<r.length&&(l=r.slice(n),f[d]?f[d]+=l:f[++d]=l),f.length<2?_[0]?function Ls(t){return function(r){return t(r)+""}}(_[0].x):function Al(t){return function(){return t}}(r):(r=_.length,function(g){for(var b,v=0;v<r;++v)f[(b=_[v]).i]=b.x(g);return f.join("")})}function zo(t,r){var n;return("number"==typeof r?Qt:r instanceof Vo?ci:(n=Vo(r))?(r=n,ci):Rl)(t,r)}function st(t){return function(){this.removeAttribute(t)}}function St(t){return function(){this.removeAttributeNS(t.space,t.local)}}function At(t,r,n){var i,l,s=n+"";return function(){var d=this.getAttribute(t);return d===s?null:d===i?l:l=r(i=d,n)}}function Ps(t,r,n){var i,l,s=n+"";return function(){var d=this.getAttributeNS(t.space,t.local);return d===s?null:d===i?l:l=r(i=d,n)}}function $r(t,r,n){var i,s,l;return function(){var d,_,f=n(this);return null==f?void this.removeAttribute(t):(d=this.getAttribute(t))===(_=f+"")?null:d===i&&_===s?l:(s=_,l=r(i=d,f))}}function Gr(t,r,n){var i,s,l;return function(){var d,_,f=n(this);return null==f?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local))===(_=f+"")?null:d===i&&_===s?l:(s=_,l=r(i=d,f))}}function Ml(t,r){var n,i;function s(){var l=r.apply(this,arguments);return l!==i&&(n=(i=l)&&function Fl(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}(t,l)),n}return s._value=r,s}function jl(t,r){var n,i;function s(){var l=r.apply(this,arguments);return l!==i&&(n=(i=l)&&function Yt(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}(t,l)),n}return s._value=r,s}function An(t,r){return function(){Gs(this,t).delay=+r.apply(this,arguments)}}function Dr(t,r){return r=+r,function(){Gs(this,t).delay=r}}function Gl(t,r){return function(){Tt(this,t).duration=+r.apply(this,arguments)}}function Mu(t,r){return r=+r,function(){Tt(this,t).duration=r}}var Xu=uo.prototype.constructor;function Hs(t){return function(){this.style.removeProperty(t)}}var Vl=0;function Rn(t,r,n,i){this._groups=t,this._parents=r,this._name=n,this._id=i}function Ol(){return++Vl}var eo=uo.prototype;Rn.prototype=function ed(t){return uo().transition(t)}.prototype={constructor:Rn,select:function Dl(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=Kt(t));for(var i=this._groups,s=i.length,l=new Array(s),d=0;d<s;++d)for(var v,b,f=i[d],_=f.length,g=l[d]=new Array(_),C=0;C<_;++C)(v=f[C])&&(b=t.call(v,v.__data__,C,f))&&("__data__"in v&&(b.__data__=v.__data__),g[C]=b,ni(g[C],r,n,C,g,dn(v,n)));return new Rn(l,this._parents,r,n)},selectAll:function Pu(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=qc(t));for(var i=this._groups,s=i.length,l=[],d=[],f=0;f<s;++f)for(var v,_=i[f],g=_.length,b=0;b<g;++b)if(v=_[b]){for(var x,C=t.call(v,v.__data__,b,_),I=dn(v,n),T=0,R=C.length;T<R;++T)(x=C[T])&&ni(x,r,n,T,C,I);l.push(C),d.push(v)}return new Rn(l,d,r,n)},selectChild:eo.selectChild,selectChildren:eo.selectChildren,filter:function Ou(t){"function"!=typeof t&&(t=Si(t));for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s)for(var _,l=r[s],d=l.length,f=i[s]=[],g=0;g<d;++g)(_=l[g])&&t.call(_,_.__data__,g,l)&&f.push(_);return new Rn(i,this._parents,this._name,this._id)},merge:function zu(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,i=r.length,l=Math.min(i,n.length),d=new Array(i),f=0;f<l;++f)for(var C,_=r[f],g=n[f],v=_.length,b=d[f]=new Array(v),x=0;x<v;++x)(C=_[x]||g[x])&&(b[x]=C);for(;f<i;++f)d[f]=r[f];return new Rn(d,this._parents,this._name,this._id)},selection:function Yu(){return new Xu(this._groups,this._parents)},transition:function zp(){for(var t=this._name,r=this._id,n=Ol(),i=this._groups,s=i.length,l=0;l<s;++l)for(var _,d=i[l],f=d.length,g=0;g<f;++g)if(_=d[g]){var v=dn(_,r);ni(_,t,n,g,d,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Rn(i,this._parents,t,n)},call:eo.call,nodes:eo.nodes,node:eo.node,size:eo.size,empty:eo.empty,each:eo.each,on:function Xs(t,r){var n=this._id;return arguments.length<2?dn(this.node(),n).on.on(t):this.each(function Bu(t,r,n){var i,s,l=function Vr(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||"start"===r})}(r)?Gs:Tt;return function(){var d=l(this,t),f=d.on;f!==i&&(s=(i=f).copy()).on(r,n),d.on=s}}(n,t,r))},attr:function jp(t,r){var n=mr(t),i="transform"===n?mo:zo;return this.attrTween(t,"function"==typeof r?(n.local?Gr:$r)(n,i,Ir(this,"attr."+t,r)):null==r?(n.local?St:st)(n):(n.local?Ps:At)(n,i,r))},attrTween:function Qn(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!=typeof r)throw new Error;var i=mr(t);return this.tween(n,(i.local?Ml:jl)(i,r))},style:function $p(t,r,n){var i="transform"==(t+="")?fo:zo;return null==r?this.styleTween(t,function Hu(t,r){var n,i,s;return function(){var l=Ni(this,t),d=(this.style.removeProperty(t),Ni(this,t));return l===d?null:l===n&&d===i?s:s=r(n=l,i=d)}}(t,i)).on("end.style."+t,Hs(t)):"function"==typeof r?this.styleTween(t,function Wu(t,r,n){var i,s,l;return function(){var d=Ni(this,t),f=n(this),_=f+"";return null==f&&(this.style.removeProperty(t),_=f=Ni(this,t)),d===_?null:d===i&&_===s?l:(s=_,l=r(i=d,f))}}(t,i,Ir(this,"style."+t,r))).each(function Zu(t,r){var n,i,s,f,l="style."+r,d="end."+l;return function(){var _=Tt(this,t),g=_.on,v=null==_.value[l]?f||(f=Hs(r)):void 0;(g!==n||s!==v)&&(i=(n=g).copy()).on(d,s=v),_.on=i}}(this._id,t)):this.styleTween(t,function Uu(t,r,n){var i,l,s=n+"";return function(){var d=Ni(this,t);return d===s?null:d===i?l:l=r(i=d,n)}}(t,i,r),n).on("end.style."+t,null)},styleTween:function Dp(t,r,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,function Gp(t,r,n){var i,s;function l(){var d=r.apply(this,arguments);return d!==s&&(i=(s=d)&&function Ju(t,r,n){return function(i){this.style.setProperty(t,r.call(this,i),n)}}(t,d,n)),i}return l._value=r,l}(t,r,n??""))},text:function Qu(t){return this.tween("text","function"==typeof t?function qu(t){return function(){var r=t(this);this.textContent=r??""}}(Ir(this,"text",t)):function Ku(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Op(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function Vp(t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&function Us(t){return function(r){this.textContent=t.call(this,r)}}(s)),r}return i._value=t,i}(t))},remove:function Lu(){return this.on("end.remove",function Ys(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}(this._id))},tween:function Cl(t,r){var n=this._id;if(t+="",arguments.length<2){for(var d,i=dn(this.node(),n).tween,s=0,l=i.length;s<l;++s)if((d=i[s]).name===t)return d.value;return null}return this.each((null==r?ri:Eu)(n,t,r))},delay:function $l(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?An:Dr)(r,t)):dn(this.node(),r).delay},duration:function ju(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?Gl:Mu)(r,t)):dn(this.node(),r).duration},ease:function Gu(t){var r=this._id;return arguments.length?this.each(function $u(t,r){if("function"!=typeof r)throw new Error;return function(){Tt(this,t).ease=r}}(r,t)):dn(this.node(),r).ease},easeVarying:function Vu(t){if("function"!=typeof t)throw new Error;return this.each(function Du(t,r){return function(){var n=r.apply(this,arguments);if("function"!=typeof n)throw new Error;Tt(this,t).ease=n}}(this._id,t))},end:function Ln(){var t,r,n=this,i=n._id,s=n.size();return new Promise(function(l,d){var f={value:d},_={value:function(){0==--s&&l()}};n.each(function(){var g=Tt(this,i),v=g.on;v!==t&&((r=(t=v).copy())._.cancel.push(f),r._.interrupt.push(f),r._.end.push(_)),g.on=r}),0===s&&l()})},[Symbol.iterator]:eo[Symbol.iterator]};var Bl={time:null,delay:0,duration:250,ease:function zl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Bp(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}uo.prototype.interrupt=function Fp(t){return this.each(function(){Nr(this,t)})},uo.prototype.transition=function nd(t){var r,n;t instanceof Rn?(r=t._id,t=t._name):(r=Ol(),(n=Bl).time=bl(),t=null==t?null:t+"");for(var i=this._groups,s=i.length,l=0;l<s;++l)for(var _,d=i[l],f=d.length,g=0;g<f;++g)(_=d[g])&&ni(_,t,r,g,d,n||Bp(_,r));return new Rn(i,this._parents,t,r)};const zr=t=>()=>t;function od(t,{sourceEvent:r,target:n,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function to(t,r,n){this.k=t,this.x=r,this.y=n}to.prototype={constructor:to,scale:function(t){return 1===t?this:new to(this.k*t,this.x,this.y)},translate:function(t,r){return 0===t&0===r?this:new to(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var no=new to(1,0,0);function Ht(t){t.stopImmediatePropagation()}function wt(t){t.preventDefault(),t.stopImmediatePropagation()}function id(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function rd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ll(){return this.__zoom||no}function sd(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ad(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pl(t,r,n){var i=t.invertX(r[0][0])-n[0][0],s=t.invertX(r[1][0])-n[1][0],l=t.invertY(r[0][1])-n[0][1],d=t.invertY(r[1][1])-n[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),d>l?(l+d)/2:Math.min(0,l)||Math.max(0,d))}const Bi=t=>()=>t;function Ws(t,{sourceEvent:r,subject:n,target:i,identifier:s,active:l,x:d,y:f,dx:_,dy:g,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:v}})}function cd(t){return!t.ctrlKey&&!t.button}function Xl(){return this.parentNode}function Yl(t,r){return r??{x:t.x,y:t.y}}function ud(){return navigator.maxTouchPoints||"ontouchstart"in this}Ws.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},pe(6046);const Zs=(0,k.createContext)(null),dd=Zs.Provider,fn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,r)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?r.targetHandle:r.sourceHandle}", edge id: ${r.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Wl=fn.error001();function De(t,r){const n=(0,k.useContext)(Zs);if(null===n)throw new Error(Wl);return Hc(n,t,r)}const Le=()=>{const t=(0,k.useContext)(Zs);if(null===t)throw new Error(Wl);return(0,k.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Pp=t=>t.userSelectionActive?"none":"all";function Zl({position:t,children:r,className:n,style:i,...s}){const l=De(Pp),d=`${t}`.split("-");return k.createElement("div",{className:Lt(["react-flow__panel",n,...d]),style:{...i,pointerEvents:l},...s},r)}function Jl({proOptions:t,position:r="bottom-right"}){return t?.hideAttribution?null:k.createElement(Zl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},k.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var fd=(0,k.memo)(({x:t,y:r,label:n,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:l={},labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:_,className:g,...v})=>{const b=(0,k.useRef)(null),[C,x]=(0,k.useState)({x:0,y:0,width:0,height:0}),I=Lt(["react-flow__edge-textwrapper",g]);return(0,k.useEffect)(()=>{if(b.current){const T=b.current.getBBox();x({x:T.x,y:T.y,width:T.width,height:T.height})}},[n]),typeof n>"u"||!n?null:k.createElement("g",{transform:`translate(${t-C.width/2} ${r-C.height/2})`,className:I,visibility:C.width?"visible":"hidden",...v},s&&k.createElement("rect",{width:C.width+2*d[0],x:-d[0],y:-d[1],height:C.height+2*d[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),k.createElement("text",{className:"react-flow__edge-text",y:C.height/2,dy:"0.3em",ref:b,style:i},n),_)});const ui=t=>({width:t.offsetWidth,height:t.offsetHeight}),mt=(t,r=0,n=1)=>Math.min(Math.max(t,r),n),Kl=(t={x:0,y:0},r)=>({x:mt(t.x,r[0][0],r[1][0]),y:mt(t.y,r[0][1],r[1][1])}),md=(t,r,n)=>t<r?mt(Math.abs(t-r),1,50)/50:t>n?-mt(Math.abs(t-n),1,50)/50:0,Br=(t,r)=>[20*md(t.x,35,r.width-35),20*md(t.y,35,r.height-35)],Gt=t=>t.getRootNode?.()||window?.document,fe=({x:t,y:r,width:n,height:i})=>({x:t,y:r,x2:t+n,y2:r+i}),Js=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),ql=(t,r)=>{const n=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(n*i)},nn=t=>!isNaN(t)&&isFinite(t),qe=Symbol.for("internals"),Ql=["Enter"," ","Escape"];function Xr(t){const n=((t=>"nativeEvent"in t)(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Ks=t=>"clientX"in t,tt=(t,r)=>{const n=Ks(t),i=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:i-(r?.left??0),y:s-(r?.top??0)}},mn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Fn=({id:t,path:r,labelX:n,labelY:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:C,interactionWidth:x=20})=>k.createElement(k.Fragment,null,k.createElement("path",{id:t,style:v,d:r,fill:"none",className:"react-flow__edge-path",markerEnd:b,markerStart:C}),x&&k.createElement("path",{d:r,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&nn(n)&&nn(i)?k.createElement(fd,{x:n,y:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:_,labelBgBorderRadius:g}):null);function Li(t,r,n){return void 0===n?n:i=>{const s=r().edges.find(l=>l.id===t);s&&n(i,{...s})}}function Mn({sourceX:t,sourceY:r,targetX:n,targetY:i}){const s=Math.abs(n-t)/2,l=n<t?n+s:n-s,d=Math.abs(i-r)/2;return[l,i<r?i+d:i-d,s,d]}function ec({sourceX:t,sourceY:r,targetX:n,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:d,targetControlY:f}){const _=.125*t+.375*s+.375*d+.125*n,g=.125*r+.375*l+.375*f+.125*i;return[_,g,Math.abs(_-t),Math.abs(g-r)]}Fn.displayName="BaseEdge";var Ut=function(t){return t.Strict="strict",t.Loose="loose",t}(Ut||{}),Pi=function(t){return t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal",t}(Pi||{}),Yr=function(t){return t.Partial="partial",t.Full="full",t}(Yr||{}),Bo=function(t){return t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier",t}(Bo||{}),qs=function(t){return t.Arrow="arrow",t.ArrowClosed="arrowclosed",t}(qs||{}),ve=function(t){return t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom",t}(ve||{});function gd({pos:t,x1:r,y1:n,x2:i,y2:s}){return t===ve.Left||t===ve.Right?[.5*(r+i),n]:[r,.5*(n+s)]}function Hr({sourceX:t,sourceY:r,sourcePosition:n=ve.Bottom,targetX:i,targetY:s,targetPosition:l=ve.Top}){const[d,f]=gd({pos:n,x1:t,y1:r,x2:i,y2:s}),[_,g]=gd({pos:l,x1:i,y1:s,x2:t,y2:r}),[v,b,C,x]=ec({sourceX:t,sourceY:r,targetX:i,targetY:s,sourceControlX:d,sourceControlY:f,targetControlX:_,targetControlY:g});return[`M${t},${r} C${d},${f} ${_},${g} ${i},${s}`,v,b,C,x]}const Ur=(0,k.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,sourcePosition:s=ve.Bottom,targetPosition:l=ve.Top,label:d,labelStyle:f,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,interactionWidth:T})=>{const[R,E,$]=Hr({sourceX:t,sourceY:r,sourcePosition:s,targetX:n,targetY:i,targetPosition:l});return k.createElement(Fn,{path:R,labelX:E,labelY:$,label:d,labelStyle:f,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,interactionWidth:T})});Ur.displayName="SimpleBezierEdge";const xn={[ve.Left]:{x:-1,y:0},[ve.Right]:{x:1,y:0},[ve.Top]:{x:0,y:-1},[ve.Bottom]:{x:0,y:1}},Nt=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function on({sourceX:t,sourceY:r,sourcePosition:n=ve.Bottom,targetX:i,targetY:s,targetPosition:l=ve.Top,borderRadius:d=5,centerX:f,centerY:_,offset:g=20}){const[v,b,C,x,I]=function yt({source:t,sourcePosition:r=ve.Bottom,target:n,targetPosition:i=ve.Top,center:s,offset:l}){const d=xn[r],f=xn[i],_={x:t.x+d.x*l,y:t.y+d.y*l},g={x:n.x+f.x*l,y:n.y+f.y*l},v=(({source:t,sourcePosition:r=ve.Bottom,target:n})=>r===ve.Left||r===ve.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:_,sourcePosition:r,target:g}),b=0!==v.x?"x":"y",C=v[b];let I,T,x=[];const R={x:0,y:0},E={x:0,y:0},[$,V,j,Y]=Mn({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(d[b]*f[b]==-1){I=s.x??$,T=s.y??V;const X=[{x:I,y:_.y},{x:I,y:g.y}],ee=[{x:_.x,y:T},{x:g.x,y:T}];x=d[b]===C?"x"===b?X:ee:"x"===b?ee:X}else{const X=[{x:_.x,y:g.y}],ee=[{x:g.x,y:_.y}];if(x="x"===b?d.x===C?ee:X:d.y===C?X:ee,r===i){const ae=Math.abs(t[b]-n[b]);if(ae<=l){const w=Math.min(l-1,l-ae);d[b]===C?R[b]=(_[b]>t[b]?-1:1)*w:E[b]=(g[b]>n[b]?-1:1)*w}}if(r!==i){const ae="x"===b?"y":"x",w=d[b]===f[ae],P=_[ae]>g[ae],z=_[ae]<g[ae];(1===d[b]&&(!w&&P||w&&z)||1!==d[b]&&(!w&&z||w&&P))&&(x="x"===b?X:ee)}const U={x:_.x+R.x,y:_.y+R.y},ce={x:g.x+E.x,y:g.y+E.y};Math.max(Math.abs(U.x-x[0].x),Math.abs(ce.x-x[0].x))>=Math.max(Math.abs(U.y-x[0].y),Math.abs(ce.y-x[0].y))?(I=(U.x+ce.x)/2,T=x[0].y):(I=x[0].x,T=(U.y+ce.y)/2)}return[[t,{x:_.x+R.x,y:_.y+R.y},...x,{x:g.x+E.x,y:g.y+E.y},n],I,T,j,Y]}({source:{x:t,y:r},sourcePosition:n,target:{x:i,y:s},targetPosition:l,center:{x:f,y:_},offset:g});return[v.reduce((R,E,$)=>{let V="";return V=$>0&&$<v.length-1?function Dt(t,r,n,i){const s=Math.min(Nt(t,r)/2,Nt(r,n)/2,i),{x:l,y:d}=r;return t.x===l&&l===n.x||t.y===d&&d===n.y?`L${l} ${d}`:t.y===d?`L ${l+s*(t.x<n.x?-1:1)},${d}Q ${l},${d} ${l},${d+s*(t.y<n.y?1:-1)}`:`L ${l},${d+s*(t.y<n.y?-1:1)}Q ${l},${d} ${l+s*(t.x<n.x?1:-1)},${d}`}(v[$-1],E,v[$+1],d):`${0===$?"M":"L"}${E.x} ${E.y}`,R+V},""),b,C,x,I]}const vo=(0,k.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:_,labelBgBorderRadius:g,style:v,sourcePosition:b=ve.Bottom,targetPosition:C=ve.Top,markerEnd:x,markerStart:I,pathOptions:T,interactionWidth:R})=>{const[E,$,V]=on({sourceX:t,sourceY:r,sourcePosition:b,targetX:n,targetY:i,targetPosition:C,borderRadius:T?.borderRadius,offset:T?.offset});return k.createElement(Fn,{path:E,labelX:$,labelY:V,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:I,interactionWidth:R})});vo.displayName="SmoothStepEdge";const _t=(0,k.memo)(t=>k.createElement(vo,{...t,pathOptions:(0,k.useMemo)(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));_t.displayName="StepEdge";const yo=(0,k.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:C,interactionWidth:x})=>{const[I,T,R]=function Wr({sourceX:t,sourceY:r,targetX:n,targetY:i}){const[s,l,d,f]=Mn({sourceX:t,sourceY:r,targetX:n,targetY:i});return[`M ${t},${r}L ${n},${i}`,s,l,d,f]}({sourceX:t,sourceY:r,targetX:n,targetY:i});return k.createElement(Fn,{path:I,labelX:T,labelY:R,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:C,interactionWidth:x})});function pi(t,r){return t>=0?.5*t:25*r*Math.sqrt(-t)}function Qs({pos:t,x1:r,y1:n,x2:i,y2:s,c:l}){switch(t){case ve.Left:return[r-pi(r-i,l),n];case ve.Right:return[r+pi(i-r,l),n];case ve.Top:return[r,n-pi(n-s,l)];case ve.Bottom:return[r,n+pi(s-n,l)]}}function Xi({sourceX:t,sourceY:r,sourcePosition:n=ve.Bottom,targetX:i,targetY:s,targetPosition:l=ve.Top,curvature:d=.25}){const[f,_]=Qs({pos:n,x1:t,y1:r,x2:i,y2:s,c:d}),[g,v]=Qs({pos:l,x1:i,y1:s,x2:t,y2:r,c:d}),[b,C,x,I]=ec({sourceX:t,sourceY:r,targetX:i,targetY:s,sourceControlX:f,sourceControlY:_,targetControlX:g,targetControlY:v});return[`M${t},${r} C${f},${_} ${g},${v} ${i},${s}`,b,C,x,I]}yo.displayName="StraightEdge";const Vt=(0,k.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,sourcePosition:s=ve.Bottom,targetPosition:l=ve.Top,label:d,labelStyle:f,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,pathOptions:T,interactionWidth:R})=>{const[E,$,V]=Xi({sourceX:t,sourceY:r,sourcePosition:s,targetX:n,targetY:i,targetPosition:l,curvature:T?.curvature});return k.createElement(Fn,{path:E,labelX:$,labelY:V,label:d,labelStyle:f,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,interactionWidth:R})});Vt.displayName="BezierEdge";const Zr=(0,k.createContext)(null),Yi=Zr.Provider,xo=({source:t,sourceHandle:r,target:n,targetHandle:i})=>`reactflow__edge-${t}${r||""}-${n}${i||""}`,Hi=(t,r)=>typeof t>"u"?"":"string"==typeof t?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,na=(t,r)=>{if(!t.source||!t.target)return fn.error006(),r;let n;return n=(t=>"id"in t&&"source"in t&&"target"in t)(t)?{...t}:{...t,id:xo(t)},((t,r)=>r.some(n=>!(n.source!==t.source||n.target!==t.target||n.sourceHandle!==t.sourceHandle&&(n.sourceHandle||t.sourceHandle)||n.targetHandle!==t.targetHandle&&(n.targetHandle||t.targetHandle))))(n,r)?r:r.concat(n)},Ot=({x:t,y:r},[n,i,s],l,[d,f])=>{const _={x:(t-n)/s,y:(r-i)/s};return l?{x:d*Math.round(_.x/d),y:f*Math.round(_.y/f)}:_},Co=({x:t,y:r},[n,i,s])=>({x:t*s+n,y:r*s+i}),Wt=(t,r=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*r[0],i=(t.height??0)*r[1],s={x:t.position.x-n,y:t.position.y-i};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:s}},zt=(t,r=[0,0])=>{if(0===t.length)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,s)=>{const{x:l,y:d}=Wt(s,r).positionAbsolute;return((t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}))(i,fe({x:l,y:d,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:t,y:r,x2:n,y2:i})=>({x:t,y:r,width:n-t,height:i-r}))(n)},ia=(t,r,[n,i,s]=[0,0,1],l=!1,d=!1,f=[0,0])=>{const _={x:(r.x-n)/s,y:(r.y-i)/s,width:r.width/s,height:r.height/s},g=[];return t.forEach(v=>{const{width:b,height:C,selectable:x=!0,hidden:I=!1}=v;if(d&&!x||I)return!1;const{positionAbsolute:T}=Wt(v,f),E=ql(_,{x:T.x,y:T.y,width:b||0,height:C||0});(typeof b>"u"||typeof C>"u"||null===b||null===C||l&&E>0||E>=(b||0)*(C||0)||v.dragging)&&g.push(v)}),g},ra=(t,r)=>{const n=t.map(i=>i.id);return r.filter(i=>n.includes(i.source)||n.includes(i.target))},oo=(t,r,n,i,s,l=.1)=>{const _=Math.min(r/(t.width*(1+l)),n/(t.height*(1+l))),g=mt(_,i,s);return{x:r/2-(t.x+t.width/2)*g,y:n/2-(t.y+t.height/2)*g,zoom:g}},Lo=(t,r=0)=>t.transition().duration(r);function sa(t,r,n,i){return(r[n]||[]).reduce((s,l)=>(`${t.id}-${l.id}-${n}`!==i&&s.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),s),[])}const oc={source:null,target:null,sourceHandle:null,targetHandle:null},Po=()=>({handleDomNode:null,isValid:!1,connection:oc,endHandle:null});function ic(t,r,n,i,s,l,d){const f="target"===s,_=d.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),g={...Po(),handleDomNode:_};if(_){const v=Kr(void 0,_),b=_.getAttribute("data-nodeid"),C=_.getAttribute("data-handleid"),x=_.classList.contains("connectable"),I=_.classList.contains("connectableend"),T={source:f?b:n,sourceHandle:f?C:i,target:f?n:b,targetHandle:f?i:C};g.connection=T,x&&I&&(r===Ut.Strict?f&&"source"===v||!f&&"target"===v:b!==n||C!==i)&&(g.endHandle={nodeId:b,handleId:C,type:v},g.isValid=l(T))}return g}function Kr(t,r){return t||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function Ui(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Up(t,r){let n=null;return r?n="valid":t&&!r&&(n="invalid"),n}function yd({event:t,handleId:r,nodeId:n,onConnect:i,isTarget:s,getState:l,setState:d,isValidConnection:f,edgeUpdaterType:_,onReconnectEnd:g}){const v=Gt(t.target),{connectionMode:b,domNode:C,autoPanOnConnect:x,connectionRadius:I,onConnectStart:T,panBy:R,getNodes:E,cancelConnection:$}=l();let j,V=0;const{x:Y,y:H}=tt(t),X=v?.elementFromPoint(Y,H),ee=Kr(_,X),U=C?.getBoundingClientRect();if(!U||!ee)return;let ce,ie=tt(t,U),ue=!1,ae=null,w=!1,P=null;const z=function vd({nodes:t,nodeId:r,handleId:n,handleType:i}){return t.reduce((s,l)=>{if(l[qe]){const{handleBounds:d}=l[qe];let f=[],_=[];d&&(f=sa(l,d,"source",`${r}-${n}-${i}`),_=sa(l,d,"target",`${r}-${n}-${i}`)),s.push(...f,..._)}return s},[])}({nodes:E(),nodeId:n,handleId:r,handleType:ee}),K=()=>{if(!x)return;const[Q,re]=Br(ie,U);R({x:Q,y:re}),V=requestAnimationFrame(K)};function se(Q){const{transform:re}=l();ie=tt(Q,U);const{handle:le,validHandleResult:ye}=function mi(t,r,n,i,s,l){const{x:d,y:f}=tt(t),g=r.elementsFromPoint(d,f).find(I=>I.classList.contains("react-flow__handle"));if(g){const I=g.getAttribute("data-nodeid");if(I){const T=Kr(void 0,g),R=g.getAttribute("data-handleid"),E=l({nodeId:I,id:R,type:T});if(E){const $=s.find(V=>V.nodeId===I&&V.type===T&&V.id===R);return{handle:{id:R,type:T,nodeId:I,x:$?.x||n.x,y:$?.y||n.y},validHandleResult:E}}}}let v=[],b=1/0;if(s.forEach(I=>{const T=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(T<=i){const R=l(I);T<=b&&(T<b?v=[{handle:I,validHandleResult:R}]:T===b&&v.push({handle:I,validHandleResult:R}),b=T)}}),!v.length)return{handle:null,validHandleResult:Po()};if(1===v.length)return v[0];const C=v.some(({validHandleResult:I})=>I.isValid),x=v.some(({handle:I})=>"target"===I.type);return v.find(({handle:I,validHandleResult:T})=>x?"target"===I.type:!C||T.isValid)||v[0]}(Q,v,Ot(ie,re,!1,[1,1]),I,z,ge=>ic(ge,b,n,r,s?"target":"source",f,v));if(j=le,ue||(K(),ue=!0),P=ye.handleDomNode,ae=ye.connection,w=ye.isValid,d({connectionPosition:j&&w?Co({x:j.x,y:j.y},re):ie,connectionStatus:Up(!!j,w),connectionEndHandle:ye.endHandle}),!j&&!w&&!P)return Ui(ce);ae.source!==ae.target&&P&&(Ui(ce),ce=P,P.classList.add("connecting","react-flow__handle-connecting"),P.classList.toggle("valid",w),P.classList.toggle("react-flow__handle-valid",w))}function B(Q){(j||P)&&ae&&w&&i?.(ae),l().onConnectEnd?.(Q),_&&g?.(Q),Ui(ce),$(),cancelAnimationFrame(V),ue=!1,w=!1,ae=null,P=null,v.removeEventListener("mousemove",se),v.removeEventListener("mouseup",B),v.removeEventListener("touchmove",se),v.removeEventListener("touchend",B)}d({connectionPosition:ie,connectionStatus:null,connectionNodeId:n,connectionHandleId:r,connectionHandleType:ee,connectionStartHandle:{nodeId:n,handleId:r,type:ee},connectionEndHandle:null}),T?.(t,{nodeId:n,handleId:r,handleType:ee}),v.addEventListener("mousemove",se),v.addEventListener("mouseup",B),v.addEventListener("touchmove",se),v.addEventListener("touchend",B)}const rc=()=>!0,bd=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),xd=(0,k.forwardRef)(({type:t="source",position:r=ve.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:d,onConnect:f,children:_,className:g,onMouseDown:v,onTouchStart:b,...C},x)=>{const I=d||null,T="target"===t,R=Le(),E=(0,k.useContext)(Zr),{connectOnClick:$,noPanClassName:V}=De(bd,vt),{connecting:j,clickConnecting:Y}=De(((t,r,n)=>i=>{const{connectionStartHandle:s,connectionEndHandle:l,connectionClickStartHandle:d}=i;return{connecting:s?.nodeId===t&&s?.handleId===r&&s?.type===n||l?.nodeId===t&&l?.handleId===r&&l?.type===n,clickConnecting:d?.nodeId===t&&d?.handleId===r&&d?.type===n}})(E,I,t),vt);E||R.getState().onError?.("010",fn.error010());const H=U=>{const{defaultEdgeOptions:ce,onConnect:ie,hasDefaultEdges:ue}=R.getState(),ae={...ce,...U};if(ue){const{edges:w,setEdges:P}=R.getState();P(na(ae,w))}ie?.(ae),f?.(ae)},X=U=>{if(!E)return;const ce=Ks(U);s&&(ce&&0===U.button||!ce)&&yd({event:U,handleId:I,nodeId:E,onConnect:H,isTarget:T,getState:R.getState,setState:R.setState,isValidConnection:n||R.getState().isValidConnection||rc}),ce?v?.(U):b?.(U)};return k.createElement("div",{"data-handleid":I,"data-nodeid":E,"data-handlepos":r,"data-id":`${E}-${I}-${t}`,className:Lt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",V,g,{source:!T,target:T,connectable:i,connectablestart:s,connectableend:l,connecting:Y,connectionindicator:i&&(s&&!j||l&&j)}]),onMouseDown:X,onTouchStart:X,onClick:$?U=>{const{onClickConnectStart:ce,onClickConnectEnd:ie,connectionClickStartHandle:ue,connectionMode:ae,isValidConnection:w}=R.getState();if(!E||!ue&&!s)return;if(!ue)return ce?.(U,{nodeId:E,handleId:I,handleType:t}),void R.setState({connectionClickStartHandle:{nodeId:E,type:t,handleId:I}});const P=Gt(U.target),z=n||w||rc,{connection:K,isValid:se}=ic({nodeId:E,id:I,type:t},ae,ue.nodeId,ue.handleId||null,ue.type,z,P);se&&H(K),ie?.(U),R.setState({connectionClickStartHandle:null})}:void 0,ref:x,...C},_)});xd.displayName="Handle";var Pn=(0,k.memo)(xd);const sc=({data:t,isConnectable:r,targetPosition:n=ve.Top,sourcePosition:i=ve.Bottom})=>k.createElement(k.Fragment,null,k.createElement(Pn,{type:"target",position:n,isConnectable:r}),t?.label,k.createElement(Pn,{type:"source",position:i,isConnectable:r}));sc.displayName="DefaultNode";var nt=(0,k.memo)(sc);const Cd=({data:t,isConnectable:r,sourcePosition:n=ve.Bottom})=>k.createElement(k.Fragment,null,t?.label,k.createElement(Pn,{type:"source",position:n,isConnectable:r}));Cd.displayName="InputNode";var ac=(0,k.memo)(Cd);const kd=({data:t,isConnectable:r,targetPosition:n=ve.Top})=>k.createElement(k.Fragment,null,k.createElement(Pn,{type:"target",position:n,isConnectable:r}),t?.label);kd.displayName="OutputNode";var Sd=(0,k.memo)(kd);const aa=()=>null;aa.displayName="GroupNode";const wd=t=>({selectedNodes:t.getNodes().filter(r=>r.selected),selectedEdges:t.edges.filter(r=>r.selected).map(r=>({...r}))}),la=t=>t.id;function jn(t,r){return vt(t.selectedNodes.map(la),r.selectedNodes.map(la))&&vt(t.selectedEdges.map(la),r.selectedEdges.map(la))}const ca=(0,k.memo)(({onSelectionChange:t})=>{const r=Le(),{selectedNodes:n,selectedEdges:i}=De(wd,jn);return(0,k.useEffect)(()=>{const s={nodes:n,edges:i};t?.(s),r.getState().onSelectionChange.forEach(l=>l(s))},[n,i,t]),null});ca.displayName="SelectionListener";const Wp=t=>!!t.onSelectionChange;function Xo({onSelectionChange:t}){const r=De(Wp);return t||r?k.createElement(ca,{onSelectionChange:t}):null}const ua=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function $n(t,r){(0,k.useEffect)(()=>{typeof t<"u"&&r(t)},[t])}function Te(t,r,n){(0,k.useEffect)(()=>{typeof r<"u"&&n({[t]:r})},[r])}const lc=({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,onConnect:s,onConnectStart:l,onConnectEnd:d,onClickConnectStart:f,onClickConnectEnd:_,nodesDraggable:g,nodesConnectable:v,nodesFocusable:b,edgesFocusable:C,edgesUpdatable:x,elevateNodesOnSelect:I,minZoom:T,maxZoom:R,nodeExtent:E,onNodesChange:$,onEdgesChange:V,elementsSelectable:j,connectionMode:Y,snapGrid:H,snapToGrid:X,translateExtent:ee,connectOnClick:U,defaultEdgeOptions:ce,fitView:ie,fitViewOptions:ue,onNodesDelete:ae,onEdgesDelete:w,onNodeDrag:P,onNodeDragStart:z,onNodeDragStop:K,onSelectionDrag:se,onSelectionDragStart:B,onSelectionDragStop:Q,noPanClassName:re,nodeOrigin:le,rfId:ye,autoPanOnConnect:ge,autoPanOnNodeDrag:Re,onError:Pe,connectionRadius:Ze,isValidConnection:Qe,nodeDragThreshold:bt})=>{const{setNodes:at,setEdges:So,setDefaultNodesAndEdges:so,setMinZoom:wo,setMaxZoom:ao,setTranslateExtent:Bt,setNodeExtent:Uo,reset:lt}=De(ua,vt),ke=Le();return(0,k.useEffect)(()=>{const Xn=i?.map(ns=>({...ns,...ce}));return so(n,Xn),()=>{lt()}},[]),Te("defaultEdgeOptions",ce,ke.setState),Te("connectionMode",Y,ke.setState),Te("onConnect",s,ke.setState),Te("onConnectStart",l,ke.setState),Te("onConnectEnd",d,ke.setState),Te("onClickConnectStart",f,ke.setState),Te("onClickConnectEnd",_,ke.setState),Te("nodesDraggable",g,ke.setState),Te("nodesConnectable",v,ke.setState),Te("nodesFocusable",b,ke.setState),Te("edgesFocusable",C,ke.setState),Te("edgesUpdatable",x,ke.setState),Te("elementsSelectable",j,ke.setState),Te("elevateNodesOnSelect",I,ke.setState),Te("snapToGrid",X,ke.setState),Te("snapGrid",H,ke.setState),Te("onNodesChange",$,ke.setState),Te("onEdgesChange",V,ke.setState),Te("connectOnClick",U,ke.setState),Te("fitViewOnInit",ie,ke.setState),Te("fitViewOnInitOptions",ue,ke.setState),Te("onNodesDelete",ae,ke.setState),Te("onEdgesDelete",w,ke.setState),Te("onNodeDrag",P,ke.setState),Te("onNodeDragStart",z,ke.setState),Te("onNodeDragStop",K,ke.setState),Te("onSelectionDrag",se,ke.setState),Te("onSelectionDragStart",B,ke.setState),Te("onSelectionDragStop",Q,ke.setState),Te("noPanClassName",re,ke.setState),Te("nodeOrigin",le,ke.setState),Te("rfId",ye,ke.setState),Te("autoPanOnConnect",ge,ke.setState),Te("autoPanOnNodeDrag",Re,ke.setState),Te("onError",Pe,ke.setState),Te("connectionRadius",Ze,ke.setState),Te("isValidConnection",Qe,ke.setState),Te("nodeDragThreshold",bt,ke.setState),$n(t,at),$n(r,So),$n(T,wo),$n(R,ao),$n(ee,Bt),$n(E,Uo),null},da={display:"none"},Zp={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},pa="react-flow__node-desc",Nd="react-flow__edge-desc",Ed="react-flow__aria-live",Id=t=>t.ariaLiveMessage;function fa({rfId:t}){const r=De(Id);return k.createElement("div",{id:`${Ed}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Zp},r)}function ma({rfId:t,disableKeyboardA11y:r}){return k.createElement(k.Fragment,null,k.createElement("div",{id:`${pa}-${t}`,style:da},"Press enter or space to select a node.",!r&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),k.createElement("div",{id:`${Nd}-${t}`,style:da},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!r&&k.createElement(fa,{rfId:t}))}var Wi=(t=null,r={actInsideInputWithModifier:!0})=>{const[n,i]=(0,k.useState)(!1),s=(0,k.useRef)(!1),l=(0,k.useRef)(new Set([])),[d,f]=(0,k.useMemo)(()=>{if(null!==t){const g=(Array.isArray(t)?t:[t]).filter(b=>"string"==typeof b).map(b=>b.split("+")),v=g.reduce((b,C)=>b.concat(...C),[]);return[g,v]}return[[],[]]},[t]);return(0,k.useEffect)(()=>{const _=typeof document<"u"?document:null,g=r?.target||_;if(null!==t){const v=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!r.actInsideInputWithModifier)&&Xr(x))return!1;const T=Td(x.code,f);l.current.add(x[T]),_a(d,l.current,!1)&&(x.preventDefault(),i(!0))},b=x=>{if((!s.current||s.current&&!r.actInsideInputWithModifier)&&Xr(x))return!1;const T=Td(x.code,f);_a(d,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(x[T]),"Meta"===x.key&&l.current.clear(),s.current=!1},C=()=>{l.current.clear(),i(!1)};return g?.addEventListener("keydown",v),g?.addEventListener("keyup",b),window.addEventListener("blur",C),()=>{g?.removeEventListener("keydown",v),g?.removeEventListener("keyup",b),window.removeEventListener("blur",C)}}},[t,i]),n};function _a(t,r,n){return t.filter(i=>n||i.length===r.size).some(i=>i.every(s=>r.has(s)))}function Td(t,r){return r.includes(t)?"code":"key"}function cc(t,r,n,i){const s=t.parentNode||t.parentId;if(!s)return n;const l=r.get(s),d=Wt(l,i);return cc(l,r,{x:(n.x??0)+d.x,y:(n.y??0)+d.y,z:(l[qe]?.z??0)>(n.z??0)?l[qe]?.z??0:n.z??0},i)}function ha(t,r,n){t.forEach(i=>{const s=i.parentNode||i.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[i.id]){const{x:l,y:d,z:f}=cc(i,t,{...i.position,z:i[qe]?.z??0},r);i.positionAbsolute={x:l,y:d},i[qe].z=f,n?.[i.id]&&(i[qe].isParent=!0)}})}function Zi(t,r,n,i){const s=new Map,l={},d=i?1e3:0;return t.forEach(f=>{const _=(nn(f.zIndex)?f.zIndex:0)+(f.selected?d:0),g=r.get(f.id),v={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},b=f.parentNode||f.parentId;b&&(l[b]=!0),Object.defineProperty(v,qe,{enumerable:!1,value:{handleBounds:g?.type&&g?.type!==f.type?void 0:g?.[qe]?.handleBounds,z:_}}),s.set(f.id,v)}),ha(s,n,l),s}function ga(t,r={}){const{getNodes:n,width:i,height:s,minZoom:l,maxZoom:d,d3Zoom:f,d3Selection:_,fitViewOnInitDone:g,fitViewOnInit:v,nodeOrigin:b}=t();if(f&&_&&(r.initial&&!g&&v||!r.initial)){const I=n().filter(R=>{const E=r.includeHiddenNodes?R.width&&R.height:!R.hidden;return r.nodes?.length?E&&r.nodes.some($=>$.id===R.id):E}),T=I.every(R=>R.width&&R.height);if(I.length>0&&T){const R=zt(I,b),{x:E,y:$,zoom:V}=oo(R,i,s,r.minZoom??l,r.maxZoom??d,r.padding??.1),j=no.translate(E,$).scale(V);return f.transform("number"==typeof r.duration&&r.duration>0?Lo(_,r.duration):_,j),!0}}return!1}function va(t,r){return t.forEach(n=>{const i=r.get(n.id);i&&r.set(i.id,{...i,[qe]:i[qe],selected:n.selected})}),new Map(r)}function Ad(t,r){return r.map(n=>{const i=t.find(s=>s.id===n.id);return i&&(n.selected=i.selected),n})}function ya({changedNodes:t,changedEdges:r,get:n,set:i}){const{nodeInternals:s,edges:l,onNodesChange:d,onEdgesChange:f,hasDefaultNodes:_,hasDefaultEdges:g}=n();t?.length&&(_&&i({nodeInternals:va(t,s)}),d?.(t)),r?.length&&(g&&i({edges:Ad(r,l)}),f?.(r))}const ko=()=>{},Jp={zoomIn:ko,zoomOut:ko,zoomTo:ko,getZoom:()=>1,setViewport:ko,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ko,fitBounds:ko,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},qr=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function Ji(){const t=(()=>{const t=Le(),{d3Zoom:r,d3Selection:n}=De(qr,vt);return(0,k.useMemo)(()=>n&&r?{zoomIn:s=>r.scaleBy(Lo(n,s?.duration),1.2),zoomOut:s=>r.scaleBy(Lo(n,s?.duration),1/1.2),zoomTo:(s,l)=>r.scaleTo(Lo(n,l?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,l)=>{const[d,f,_]=t.getState().transform,g=no.translate(s.x??d,s.y??f).scale(s.zoom??_);r.transform(Lo(n,l?.duration),g)},getViewport:()=>{const[s,l,d]=t.getState().transform;return{x:s,y:l,zoom:d}},fitView:s=>ga(t.getState,s),setCenter:(s,l,d)=>{const{width:f,height:_,maxZoom:g}=t.getState(),v=typeof d?.zoom<"u"?d.zoom:g,x=no.translate(f/2-s*v,_/2-l*v).scale(v);r.transform(Lo(n,d?.duration),x)},fitBounds:(s,l)=>{const{width:d,height:f,minZoom:_,maxZoom:g}=t.getState(),{x:v,y:b,zoom:C}=oo(s,d,f,_,g,l?.padding??.1),x=no.translate(v,b).scale(C);r.transform(Lo(n,l?.duration),x)},project:s=>{const{transform:l,snapToGrid:d,snapGrid:f}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ot(s,l,d,f)},screenToFlowPosition:s=>{const{transform:l,snapToGrid:d,snapGrid:f,domNode:_}=t.getState();if(!_)return s;const{x:g,y:v}=_.getBoundingClientRect();return Ot({x:s.x-g,y:s.y-v},l,d,f)},flowToScreenPosition:s=>{const{transform:l,domNode:d}=t.getState();if(!d)return s;const{x:f,y:_}=d.getBoundingClientRect(),g=Co(s,l);return{x:g.x+f,y:g.y+_}},viewportInitialized:!0}:Jp,[r,n])})(),r=Le(),n=(0,k.useCallback)(()=>r.getState().getNodes().map(T=>({...T})),[]),i=(0,k.useCallback)(T=>r.getState().nodeInternals.get(T),[]),s=(0,k.useCallback)(()=>{const{edges:T=[]}=r.getState();return T.map(R=>({...R}))},[]),l=(0,k.useCallback)(T=>{const{edges:R=[]}=r.getState();return R.find(E=>E.id===T)},[]),d=(0,k.useCallback)(T=>{const{getNodes:R,setNodes:E,hasDefaultNodes:$,onNodesChange:V}=r.getState(),j=R(),Y="function"==typeof T?T(j):T;$?E(Y):V&&V(0===Y.length?j.map(X=>({type:"remove",id:X.id})):Y.map(X=>({item:X,type:"reset"})))},[]),f=(0,k.useCallback)(T=>{const{edges:R=[],setEdges:E,hasDefaultEdges:$,onEdgesChange:V}=r.getState(),j="function"==typeof T?T(R):T;$?E(j):V&&V(0===j.length?R.map(H=>({type:"remove",id:H.id})):j.map(H=>({item:H,type:"reset"})))},[]),_=(0,k.useCallback)(T=>{const R=Array.isArray(T)?T:[T],{getNodes:E,setNodes:$,hasDefaultNodes:V,onNodesChange:j}=r.getState();V?$([...E(),...R]):j&&j(R.map(H=>({item:H,type:"add"})))},[]),g=(0,k.useCallback)(T=>{const R=Array.isArray(T)?T:[T],{edges:E=[],setEdges:$,hasDefaultEdges:V,onEdgesChange:j}=r.getState();V?$([...E,...R]):j&&j(R.map(H=>({item:H,type:"add"})))},[]),v=(0,k.useCallback)(()=>{const{getNodes:T,edges:R=[],transform:E}=r.getState(),[$,V,j]=E;return{nodes:T().map(Y=>({...Y})),edges:R.map(Y=>({...Y})),viewport:{x:$,y:V,zoom:j}}},[]),b=(0,k.useCallback)(({nodes:T,edges:R})=>{const{nodeInternals:E,getNodes:$,edges:V,hasDefaultNodes:j,hasDefaultEdges:Y,onNodesDelete:H,onEdgesDelete:X,onNodesChange:ee,onEdgesChange:U}=r.getState(),ce=(T||[]).map(P=>P.id),ie=(R||[]).map(P=>P.id),ue=$().reduce((P,z)=>{const K=z.parentNode||z.parentId,se=!ce.includes(z.id)&&K&&P.find(Q=>Q.id===K);return("boolean"!=typeof z.deletable||z.deletable)&&(ce.includes(z.id)||se)&&P.push(z),P},[]),ae=V.filter(P=>"boolean"!=typeof P.deletable||P.deletable),w=ae.filter(P=>ie.includes(P.id));if(ue||w){const P=ra(ue,ae),z=[...w,...P],K=z.reduce((se,B)=>(se.includes(B.id)||se.push(B.id),se),[]);(Y||j)&&(Y&&r.setState({edges:V.filter(se=>!K.includes(se.id))}),j&&(ue.forEach(se=>{E.delete(se.id)}),r.setState({nodeInternals:new Map(E)}))),K.length>0&&(X?.(z),U&&U(K.map(se=>({id:se,type:"remove"})))),ue.length>0&&(H?.(ue),ee)&&ee(ue.map(B=>({id:B.id,type:"remove"})))}},[]),C=(0,k.useCallback)(T=>{const R=(t=>nn(t.width)&&nn(t.height)&&nn(t.x)&&nn(t.y))(T),E=R?null:r.getState().nodeInternals.get(T.id);return R||E?[R?T:Js(E),E,R]:[null,null,R]},[]),x=(0,k.useCallback)((T,R=!0,E)=>{const[$,V,j]=C(T);return $?(E||r.getState().getNodes()).filter(Y=>{if(!(j||Y.id!==V.id&&Y.positionAbsolute))return!1;const H=Js(Y),X=ql(H,$);return R&&X>0||X>=$.width*$.height}):[]},[]),I=(0,k.useCallback)((T,R,E=!0)=>{const[$]=C(T);if(!$)return!1;const V=ql($,R);return E&&V>0||V>=$.width*$.height},[]);return(0,k.useMemo)(()=>({...t,getNodes:n,getNode:i,getEdges:s,getEdge:l,setNodes:d,setEdges:f,addNodes:_,addEdges:g,toObject:v,deleteElements:b,getIntersectingNodes:x,isNodeIntersecting:I}),[t,n,i,s,l,d,f,_,g,v,b,x,I])}const o={actInsideInputWithModifier:!1},u={position:"absolute",width:"100%",height:"100%",top:0,left:0},h=t=>({x:t.x,y:t.y,zoom:t.k}),y=(t,r)=>t.target.closest(`.${r}`),S=(t,r)=>2===r&&Array.isArray(t)&&t.includes(2),A=t=>{const r=t.ctrlKey&&mn()?10:1;return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*r},O=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),J=({onMove:t,onMoveStart:r,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:l=!0,panOnScroll:d=!1,panOnScrollSpeed:f=.5,panOnScrollMode:_=Pi.Free,zoomOnDoubleClick:g=!0,elementsSelectable:v,panOnDrag:b=!0,defaultViewport:C,translateExtent:x,minZoom:I,maxZoom:T,zoomActivationKeyCode:R,preventScrolling:E=!0,children:$,noWheelClassName:V,noPanClassName:j})=>{const Y=(0,k.useRef)(),H=Le(),X=(0,k.useRef)(!1),ee=(0,k.useRef)(!1),U=(0,k.useRef)(null),ce=(0,k.useRef)({x:0,y:0,zoom:0}),{d3Zoom:ie,d3Selection:ue,d3ZoomHandler:ae,userSelectionActive:w}=De(O,vt),P=Wi(R),z=(0,k.useRef)(0),K=(0,k.useRef)(!1),se=(0,k.useRef)();return function c(t){const r=Le();(0,k.useEffect)(()=>{let n;const i=()=>{if(!t.current)return;const s=ui(t.current);(0===s.height||0===s.width)&&r.getState().onError?.("004",fn.error004()),r.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}(U),(0,k.useEffect)(()=>{if(U.current){const B=U.current.getBoundingClientRect(),Q=function ld(){var v,b,C,t=id,r=rd,n=Pl,i=sd,s=ad,l=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,_=yl,g=Ci("start","zoom","end"),x=500,I=150,T=0,R=10;function E(w){w.property("__zoom",Ll).on("wheel.zoom",ee,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",ce).filter(s).on("touchstart.zoom",ie).on("touchmove.zoom",ue).on("touchend.zoom touchcancel.zoom",ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(w,P){return(P=Math.max(l[0],Math.min(l[1],P)))===w.k?w:new to(P,w.x,w.y)}function V(w,P,z){var K=P[0]-z[0]*w.k,se=P[1]-z[1]*w.k;return K===w.x&&se===w.y?w:new to(w.k,K,se)}function j(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function Y(w,P,z,K){w.on("start.zoom",function(){H(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(K).end()}).tween("zoom",function(){var se=this,B=arguments,Q=H(se,B).event(K),re=r.apply(se,B),le=null==z?j(re):"function"==typeof z?z.apply(se,B):z,ye=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ge=se.__zoom,Re="function"==typeof P?P.apply(se,B):P,Pe=_(ge.invert(le).concat(ye/ge.k),Re.invert(le).concat(ye/Re.k));return function(Ze){if(1===Ze)Ze=Re;else{var Qe=Pe(Ze),bt=ye/Qe[2];Ze=new to(bt,le[0]-Qe[0]*bt,le[1]-Qe[1]*bt)}Q.zoom(null,Ze)}})}function H(w,P,z){return!z&&w.__zooming||new X(w,P)}function X(w,P){this.that=w,this.args=P,this.active=0,this.sourceEvent=null,this.extent=r.apply(w,P),this.taps=0}function ee(w,...P){if(t.apply(this,arguments)){var z=H(this,P).event(w),K=this.__zoom,se=Math.max(l[0],Math.min(l[1],K.k*Math.pow(2,i.apply(this,arguments)))),B=Vn(w);if(z.wheel)(z.mouse[0][0]!==B[0]||z.mouse[0][1]!==B[1])&&(z.mouse[1]=K.invert(z.mouse[0]=B)),clearTimeout(z.wheel);else{if(K.k===se)return;z.mouse=[B,K.invert(B)],Nr(this),z.start()}wt(w),z.wheel=setTimeout(function Q(){z.wheel=null,z.end()},I),z.zoom("mouse",n(V($(K,se),z.mouse[0],z.mouse[1]),z.extent,d))}}function U(w,...P){if(!C&&t.apply(this,arguments)){var z=w.currentTarget,K=H(this,P,!0).event(w),se=un(w.view).on("mousemove.zoom",function le(ge){if(wt(ge),!K.moved){var Re=ge.clientX-Q,Pe=ge.clientY-re;K.moved=Re*Re+Pe*Pe>T}K.event(ge).zoom("mouse",n(V(K.that.__zoom,K.mouse[0]=Vn(ge,z),K.mouse[1]),K.extent,d))},!0).on("mouseup.zoom",function ye(ge){se.on("mousemove.zoom mouseup.zoom",null),xr(ge.view,K.moved),wt(ge),K.event(ge).end()},!0),B=Vn(w,z),Q=w.clientX,re=w.clientY;hl(w.view),Ht(w),K.mouse=[B,this.__zoom.invert(B)],Nr(this),K.start()}}function ce(w,...P){if(t.apply(this,arguments)){var z=this.__zoom,K=Vn(w.changedTouches?w.changedTouches[0]:w,this),se=z.invert(K),Q=n(V($(z,z.k*(w.shiftKey?.5:2)),K,se),r.apply(this,P),d);wt(w),f>0?un(this).transition().duration(f).call(Y,Q,K,w):un(this).call(E.transform,Q,K,w)}}function ie(w,...P){if(t.apply(this,arguments)){var B,Q,re,le,z=w.touches,K=z.length,se=H(this,P,w.changedTouches.length===K).event(w);for(Ht(w),Q=0;Q<K;++Q)le=[le=Vn(re=z[Q],this),this.__zoom.invert(le),re.identifier],se.touch0?!se.touch1&&se.touch0[2]!==le[2]&&(se.touch1=le,se.taps=0):(se.touch0=le,B=!0,se.taps=1+!!v);v&&(v=clearTimeout(v)),B&&(se.taps<2&&(b=le[0],v=setTimeout(function(){v=null},x)),Nr(this),se.start())}}function ue(w,...P){if(this.__zooming){var B,Q,re,le,z=H(this,P).event(w),K=w.changedTouches,se=K.length;for(wt(w),B=0;B<se;++B)re=Vn(Q=K[B],this),z.touch0&&z.touch0[2]===Q.identifier?z.touch0[0]=re:z.touch1&&z.touch1[2]===Q.identifier&&(z.touch1[0]=re);if(Q=z.that.__zoom,z.touch1){var ye=z.touch0[0],ge=z.touch0[1],Re=z.touch1[0],Pe=z.touch1[1],Ze=(Ze=Re[0]-ye[0])*Ze+(Ze=Re[1]-ye[1])*Ze,Qe=(Qe=Pe[0]-ge[0])*Qe+(Qe=Pe[1]-ge[1])*Qe;Q=$(Q,Math.sqrt(Ze/Qe)),re=[(ye[0]+Re[0])/2,(ye[1]+Re[1])/2],le=[(ge[0]+Pe[0])/2,(ge[1]+Pe[1])/2]}else{if(!z.touch0)return;re=z.touch0[0],le=z.touch0[1]}z.zoom("touch",n(V(Q,re,le),z.extent,d))}}function ae(w,...P){if(this.__zooming){var B,Q,z=H(this,P).event(w),K=w.changedTouches,se=K.length;for(Ht(w),C&&clearTimeout(C),C=setTimeout(function(){C=null},x),B=0;B<se;++B)Q=K[B],z.touch0&&z.touch0[2]===Q.identifier?delete z.touch0:z.touch1&&z.touch1[2]===Q.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),2===z.taps&&(Q=Vn(Q,this),Math.hypot(b[0]-Q[0],b[1]-Q[1])<R)){var re=un(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return E.transform=function(w,P,z,K){var se=w.selection?w.selection():w;se.property("__zoom",Ll),w!==se?Y(w,P,z,K):se.interrupt().each(function(){H(this,arguments).event(K).start().zoom(null,"function"==typeof P?P.apply(this,arguments):P).end()})},E.scaleBy=function(w,P,z,K){E.scaleTo(w,function(){return this.__zoom.k*("function"==typeof P?P.apply(this,arguments):P)},z,K)},E.scaleTo=function(w,P,z,K){E.transform(w,function(){var se=r.apply(this,arguments),B=this.__zoom,Q=null==z?j(se):"function"==typeof z?z.apply(this,arguments):z,re=B.invert(Q),le="function"==typeof P?P.apply(this,arguments):P;return n(V($(B,le),Q,re),se,d)},z,K)},E.translateBy=function(w,P,z,K){E.transform(w,function(){return n(this.__zoom.translate("function"==typeof P?P.apply(this,arguments):P,"function"==typeof z?z.apply(this,arguments):z),r.apply(this,arguments),d)},null,K)},E.translateTo=function(w,P,z,K,se){E.transform(w,function(){var B=r.apply(this,arguments),Q=this.__zoom,re=null==K?j(B):"function"==typeof K?K.apply(this,arguments):K;return n(no.translate(re[0],re[1]).scale(Q.k).translate("function"==typeof P?-P.apply(this,arguments):-P,"function"==typeof z?-z.apply(this,arguments):-z),B,d)},K,se)},X.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,P){return this.mouse&&"mouse"!==w&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&"touch"!==w&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&"touch"!==w&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var P=un(this.that).datum();g.call(w,this.that,new od(w,{sourceEvent:this.sourceEvent,target:E,type:w,transform:this.that.__zoom,dispatch:g}),P)}},E.wheelDelta=function(w){return arguments.length?(i="function"==typeof w?w:zr(+w),E):i},E.filter=function(w){return arguments.length?(t="function"==typeof w?w:zr(!!w),E):t},E.touchable=function(w){return arguments.length?(s="function"==typeof w?w:zr(!!w),E):s},E.extent=function(w){return arguments.length?(r="function"==typeof w?w:zr([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),E):r},E.scaleExtent=function(w){return arguments.length?(l[0]=+w[0],l[1]=+w[1],E):[l[0],l[1]]},E.translateExtent=function(w){return arguments.length?(d[0][0]=+w[0][0],d[1][0]=+w[1][0],d[0][1]=+w[0][1],d[1][1]=+w[1][1],E):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},E.constrain=function(w){return arguments.length?(n=w,E):n},E.duration=function(w){return arguments.length?(f=+w,E):f},E.interpolate=function(w){return arguments.length?(_=w,E):_},E.on=function(){var w=g.on.apply(g,arguments);return w===g?E:w},E.clickDistance=function(w){return arguments.length?(T=(w=+w)*w,E):Math.sqrt(T)},E.tapDistance=function(w){return arguments.length?(R=+w,E):R},E}().scaleExtent([I,T]).translateExtent(x),re=un(U.current).call(Q),le=no.translate(C.x,C.y).scale(mt(C.zoom,I,T)),ye=[[0,0],[B.width,B.height]],ge=Q.constrain()(le,ye,x);Q.transform(re,ge),Q.wheelDelta(A),H.setState({d3Zoom:Q,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:U.current.closest(".react-flow")})}},[]),(0,k.useEffect)(()=>{ue&&ie&&(!d||P||w?typeof ae<"u"&&ue.on("wheel.zoom",function(B,Q){if(!E&&"wheel"===B.type&&!B.ctrlKey||y(B,V))return null;B.preventDefault(),ae.call(this,B,Q)},{passive:!1}):ue.on("wheel.zoom",B=>{if(y(B,V))return!1;B.preventDefault(),B.stopImmediatePropagation();const Q=ue.property("__zoom").k||1;if(B.ctrlKey&&l){const Qe=Vn(B),bt=A(B),at=Q*Math.pow(2,bt);return void ie.scaleTo(ue,at,Qe,B)}const re=1===B.deltaMode?20:1;let le=_===Pi.Vertical?0:B.deltaX*re,ye=_===Pi.Horizontal?0:B.deltaY*re;!mn()&&B.shiftKey&&_!==Pi.Vertical&&(le=B.deltaY*re,ye=0),ie.translateBy(ue,-le/Q*f,-ye/Q*f,{internal:!0});const ge=h(ue.property("__zoom")),{onViewportChangeStart:Re,onViewportChange:Pe,onViewportChangeEnd:Ze}=H.getState();clearTimeout(se.current),K.current||(K.current=!0,r?.(B,ge),Re?.(ge)),K.current&&(t?.(B,ge),Pe?.(ge),se.current=setTimeout(()=>{n?.(B,ge),Ze?.(ge),K.current=!1},150))},{passive:!1}))},[w,d,_,ue,ie,ae,P,l,E,V,r,t,n]),(0,k.useEffect)(()=>{ie&&ie.on("start",B=>{if(!B.sourceEvent||B.sourceEvent.internal)return null;z.current=B.sourceEvent?.button;const{onViewportChangeStart:Q}=H.getState(),re=h(B.transform);X.current=!0,ce.current=re,"mousedown"===B.sourceEvent?.type&&H.setState({paneDragging:!0}),Q?.(re),r?.(B.sourceEvent,re)})},[ie,r]),(0,k.useEffect)(()=>{ie&&(w&&!X.current?ie.on("zoom",null):w||ie.on("zoom",B=>{const{onViewportChange:Q}=H.getState();if(H.setState({transform:[B.transform.x,B.transform.y,B.transform.k]}),ee.current=!(!i||!S(b,z.current??0)),(t||Q)&&!B.sourceEvent?.internal){const re=h(B.transform);Q?.(re),t?.(B.sourceEvent,re)}}))},[w,ie,t,b,i]),(0,k.useEffect)(()=>{ie&&ie.on("end",B=>{if(!B.sourceEvent||B.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=H.getState();if(X.current=!1,H.setState({paneDragging:!1}),i&&S(b,z.current??0)&&!ee.current&&i(B.sourceEvent),ee.current=!1,(n||Q)&&((t,r)=>t.x!==r.x||t.y!==r.y||t.zoom!==r.k)(ce.current,B.transform)){const re=h(B.transform);ce.current=re,clearTimeout(Y.current),Y.current=setTimeout(()=>{Q?.(re),n?.(B.sourceEvent,re)},d?150:0)}})},[ie,d,b,n,i]),(0,k.useEffect)(()=>{ie&&ie.filter(B=>{const Q=P||s,re=l&&B.ctrlKey;if((!0===b||Array.isArray(b)&&b.includes(1))&&1===B.button&&"mousedown"===B.type&&(y(B,"react-flow__node")||y(B,"react-flow__edge")))return!0;if(!b&&!Q&&!d&&!g&&!l||w||!g&&"dblclick"===B.type||y(B,V)&&"wheel"===B.type||y(B,j)&&("wheel"!==B.type||d&&"wheel"===B.type&&!P)||!l&&B.ctrlKey&&"wheel"===B.type||!Q&&!d&&!re&&"wheel"===B.type||!b&&("mousedown"===B.type||"touchstart"===B.type)||Array.isArray(b)&&!b.includes(B.button)&&"mousedown"===B.type)return!1;const le=Array.isArray(b)&&b.includes(B.button)||!B.button||B.button<=1;return(!B.ctrlKey||"wheel"===B.type)&&le})},[w,ie,s,l,d,g,b,v,P]),k.createElement("div",{className:"react-flow__renderer",ref:U,style:u},$)},q=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function W(){const{userSelectionActive:t,userSelectionRect:r}=De(q,vt);return t&&r?k.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}function de(t,r){const n=r.parentNode||r.parentId,i=t.find(s=>s.id===n);if(i){const s=r.position.x+r.width-i.width,l=r.position.y+r.height-i.height;if(s>0||l>0||r.position.x<0||r.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),l>0&&(i.style.height+=l),r.position.x<0){const d=Math.abs(r.position.x);i.position.x=i.position.x-d,i.style.width+=d,r.position.x=0}if(r.position.y<0){const d=Math.abs(r.position.y);i.position.y=i.position.y-d,i.style.height+=d,r.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function me(t,r){if(t.some(i=>"reset"===i.type))return t.filter(i=>"reset"===i.type).map(i=>i.item);const n=t.filter(i=>"add"===i.type).map(i=>i.item);return r.reduce((i,s)=>{const l=t.filter(f=>f.id===s.id);if(0===l.length)return i.push(s),i;const d={...s};for(const f of l)if(f)switch(f.type){case"select":d.selected=f.selected;break;case"position":typeof f.position<"u"&&(d.position=f.position),typeof f.positionAbsolute<"u"&&(d.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(d.dragging=f.dragging),d.expandParent&&de(i,d);break;case"dimensions":typeof f.dimensions<"u"&&(d.width=f.dimensions.width,d.height=f.dimensions.height),typeof f.updateStyle<"u"&&(d.style={...d.style||{},...f.dimensions}),"boolean"==typeof f.resizing&&(d.resizing=f.resizing),d.expandParent&&de(i,d);break;case"remove":return i}return i.push(d),i},n)}function _e(t,r){return me(t,r)}function pt(t,r){return me(t,r)}const G=(t,r)=>({id:t,type:"select",selected:r});function F(t,r){return t.reduce((n,i)=>{const s=r.includes(i.id);return!i.selected&&s?(i.selected=!0,n.push(G(i.id,!0))):i.selected&&!s&&(i.selected=!1,n.push(G(i.id,!1))),n},[])}const D=(t,r)=>n=>{n.target===r.current&&t?.(n)},ne=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),he=(0,k.memo)(({isSelecting:t,selectionMode:r=Yr.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:s,onPaneClick:l,onPaneContextMenu:d,onPaneScroll:f,onPaneMouseEnter:_,onPaneMouseMove:g,onPaneMouseLeave:v,children:b})=>{const C=(0,k.useRef)(null),x=Le(),I=(0,k.useRef)(0),T=(0,k.useRef)(0),R=(0,k.useRef)(),{userSelectionActive:E,elementsSelectable:$,dragging:V}=De(ne,vt),j=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,T.current=0},Y=ae=>{l?.(ae),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},X=f?ae=>f(ae):void 0,ue=$&&(t||E);return k.createElement("div",{className:Lt(["react-flow__pane",{dragging:V,selection:t}]),onClick:ue?void 0:D(Y,C),onContextMenu:D(ae=>{Array.isArray(n)&&n?.includes(2)?ae.preventDefault():d?.(ae)},C),onWheel:D(X,C),onMouseEnter:ue?void 0:_,onMouseDown:ue?ae=>{const{resetSelectedElements:w,domNode:P}=x.getState();if(R.current=P?.getBoundingClientRect(),!$||!t||0!==ae.button||ae.target!==C.current||!R.current)return;const{x:z,y:K}=tt(ae,R.current);w(),x.setState({userSelectionRect:{width:0,height:0,startX:z,startY:K,x:z,y:K}}),i?.(ae)}:void 0,onMouseMove:ue?ae=>{const{userSelectionRect:w,nodeInternals:P,edges:z,transform:K,onNodesChange:se,onEdgesChange:B,nodeOrigin:Q,getNodes:re}=x.getState();if(!t||!R.current||!w)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const le=tt(ae,R.current),ye=w.startX??0,ge=w.startY??0,Re={...w,x:le.x<ye?le.x:ye,y:le.y<ge?le.y:ge,width:Math.abs(le.x-ye),height:Math.abs(le.y-ge)},Pe=re(),Ze=ia(P,Re,K,r===Yr.Partial,!0,Q),Qe=ra(Ze,z).map(at=>at.id),bt=Ze.map(at=>at.id);if(I.current!==bt.length){I.current=bt.length;const at=F(Pe,bt);at.length&&se?.(at)}if(T.current!==Qe.length){T.current=Qe.length;const at=F(z,Qe);at.length&&B?.(at)}x.setState({userSelectionRect:Re})}:g,onMouseUp:ue?ae=>{if(0!==ae.button)return;const{userSelectionRect:w}=x.getState();!E&&w&&ae.target===C.current&&Y?.(ae),x.setState({nodesSelectionActive:I.current>0}),j(),s?.(ae)}:void 0,onMouseLeave:ue?ae=>{E&&(x.setState({nodesSelectionActive:I.current>0}),s?.(ae)),j()}:v,ref:C,style:u},b,k.createElement(W,null))});function be(t,r){const n=t.parentNode||t.parentId;if(!n)return!1;const i=r.get(n);return!!i&&(!!i.selected||be(i,r))}function xe(t,r,n){let i=t;do{if(i?.matches(r))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function we(t,r,n,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!be(s,t))&&(s.draggable||r&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function Ge(t,r,n,i,s=[0,0],l){const d=function Rt(t,r){return r&&"parent"!==r?[r[0],[r[1][0]-(t.width||0),r[1][1]-(t.height||0)]]:r}(t,t.extent||i);let f=d;const _=t.parentNode||t.parentId;if("parent"!==t.extent||t.expandParent){if(t.extent&&_&&"parent"!==t.extent){const b=n.get(_),{x:C,y:x}=Wt(b,s).positionAbsolute;f=[[t.extent[0][0]+C,t.extent[0][1]+x],[t.extent[1][0]+C,t.extent[1][1]+x]]}}else if(_&&t.width&&t.height){const b=n.get(_),{x:C,y:x}=Wt(b,s).positionAbsolute;f=b&&nn(C)&&nn(x)&&nn(b.width)&&nn(b.height)?[[C+t.width*s[0],x+t.height*s[1]],[C+b.width-t.width+t.width*s[0],x+b.height-t.height+t.height*s[1]]]:f}else l?.("005",fn.error005()),f=d;let g={x:0,y:0};if(_){const b=n.get(_);g=Wt(b,s).positionAbsolute}const v=f&&"parent"!==f?Kl(r,f):r;return{position:{x:v.x-g.x,y:v.y-g.y},positionAbsolute:v}}function io({nodeId:t,dragItems:r,nodeInternals:n}){const i=r.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?i.find(s=>s.id===t):i[0],i]}he.displayName="Pane";const Rd=(t,r,n,i)=>{const s=r.querySelectorAll(t);if(!s||!s.length)return null;const l=Array.from(s),d=r.getBoundingClientRect(),f_x=d.width*i[0],f_y=d.height*i[1];return l.map(_=>{const g=_.getBoundingClientRect();return{id:_.getAttribute("data-handleid"),position:_.getAttribute("data-handlepos"),x:(g.left-d.left-f_x)/n,y:(g.top-d.top-f_y)/n,...ui(_)}})};function uc(t,r,n){return void 0===n?n:i=>{const s=r().nodeInternals.get(t);s&&n(i,{...s})}}function qp({id:t,store:r,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:l,multiSelectionActive:d,nodeInternals:f,onError:_}=r.getState(),g=f.get(t);g?(r.setState({nodesSelectionActive:!1}),g.selected?(n||g.selected&&d)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):s([t])):_?.("012",fn.error012(t))}function Qp(t){return(r,n,i)=>t?.(r,i)}function mf({nodeRef:t,disabled:r=!1,noDragClassName:n,handleSelector:i,nodeId:s,isSelectable:l,selectNodesOnDrag:d}){const f=Le(),[_,g]=(0,k.useState)(!1),v=(0,k.useRef)([]),b=(0,k.useRef)({x:null,y:null}),C=(0,k.useRef)(0),x=(0,k.useRef)(null),I=(0,k.useRef)({x:0,y:0}),T=(0,k.useRef)(null),R=(0,k.useRef)(!1),E=(0,k.useRef)(!1),$=(0,k.useRef)(!1),V=function km(){const t=Le();return(0,k.useCallback)(({sourceEvent:n})=>{const{transform:i,snapGrid:s,snapToGrid:l}=t.getState(),_={x:((n.touches?n.touches[0].clientX:n.clientX)-i[0])/i[2],y:((n.touches?n.touches[0].clientY:n.clientY)-i[1])/i[2]};return{xSnapped:l?s[0]*Math.round(_.x/s[0]):_.x,ySnapped:l?s[1]*Math.round(_.y/s[1]):_.y,..._}},[])}();return(0,k.useEffect)(()=>{if(t?.current){const j=un(t.current),Y=({x:ee,y:U})=>{const{nodeInternals:ce,onNodeDrag:ie,onSelectionDrag:ue,updateNodePositions:ae,nodeExtent:w,snapGrid:P,snapToGrid:z,nodeOrigin:K,onError:se}=f.getState();b.current={x:ee,y:U};let B=!1,Q={x:0,y:0,x2:0,y2:0};if(v.current.length>1&&w){const le=zt(v.current,K);Q=fe(le)}if(v.current=v.current.map(le=>{const ye={x:ee-le.distance.x,y:U-le.distance.y};z&&(ye.x=P[0]*Math.round(ye.x/P[0]),ye.y=P[1]*Math.round(ye.y/P[1]));const ge=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];v.current.length>1&&w&&!le.extent&&(ge[0][0]=le.positionAbsolute.x-Q.x+w[0][0],ge[1][0]=le.positionAbsolute.x+(le.width??0)-Q.x2+w[1][0],ge[0][1]=le.positionAbsolute.y-Q.y+w[0][1],ge[1][1]=le.positionAbsolute.y+(le.height??0)-Q.y2+w[1][1]);const Re=Ge(le,ye,ce,ge,K,se);return B=B||le.position.x!==Re.position.x||le.position.y!==Re.position.y,le.position=Re.position,le.positionAbsolute=Re.positionAbsolute,le}),!B)return;ae(v.current,!0,!0),g(!0);const re=s?ie:Qp(ue);if(re&&T.current){const[le,ye]=io({nodeId:s,dragItems:v.current,nodeInternals:ce});re(T.current,le,ye)}},H=()=>{if(!x.current)return;const[ee,U]=Br(I.current,x.current);if(0!==ee||0!==U){const{transform:ce,panBy:ie}=f.getState();b.current.x=(b.current.x??0)-ee/ce[2],b.current.y=(b.current.y??0)-U/ce[2],ie({x:ee,y:U})&&Y(b.current)}C.current=requestAnimationFrame(H)},X=ee=>{const{nodeInternals:U,multiSelectionActive:ce,nodesDraggable:ie,unselectNodesAndEdges:ue,onNodeDragStart:ae,onSelectionDragStart:w}=f.getState();E.current=!0;const P=s?ae:Qp(w);(!d||!l)&&!ce&&s&&(U.get(s)?.selected||ue()),s&&l&&d&&qp({id:s,store:f,nodeRef:t});const z=V(ee);if(b.current=z,v.current=we(U,ie,z,s),P&&v.current){const[K,se]=io({nodeId:s,dragItems:v.current,nodeInternals:U});P(ee.sourceEvent,K,se)}};if(!r){const ee=function Hl(){var f,_,g,v,t=cd,r=Xl,n=Yl,i=ud,s={},l=Ci("start","drag","end"),d=0,b=0;function C(j){j.on("mousedown.drag",x).filter(i).on("touchstart.drag",R).on("touchmove.drag",E,Ti).on("touchend.drag touchcancel.drag",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,Y){if(!v&&t.call(this,j,Y)){var H=V(this,r.call(this,j,Y),j,Y,"mouse");H&&(un(j.view).on("mousemove.drag",I,Ai).on("mouseup.drag",T,Ai),hl(j.view),_l(j),g=!1,f=j.clientX,_=j.clientY,H("start",j))}}function I(j){if(Ri(j),!g){var Y=j.clientX-f,H=j.clientY-_;g=Y*Y+H*H>b}s.mouse("drag",j)}function T(j){un(j.view).on("mousemove.drag mouseup.drag",null),xr(j.view,g),Ri(j),s.mouse("end",j)}function R(j,Y){if(t.call(this,j,Y)){var U,ce,H=j.changedTouches,X=r.call(this,j,Y),ee=H.length;for(U=0;U<ee;++U)(ce=V(this,X,j,Y,H[U].identifier,H[U]))&&(_l(j),ce("start",j,H[U]))}}function E(j){var X,ee,Y=j.changedTouches,H=Y.length;for(X=0;X<H;++X)(ee=s[Y[X].identifier])&&(Ri(j),ee("drag",j,Y[X]))}function $(j){var X,ee,Y=j.changedTouches,H=Y.length;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),X=0;X<H;++X)(ee=s[Y[X].identifier])&&(_l(j),ee("end",j,Y[X]))}function V(j,Y,H,X,ee,U){var ue,ae,w,ce=l.copy(),ie=Vn(U||H,Y);if(null!=(w=n.call(j,new Ws("beforestart",{sourceEvent:H,target:C,identifier:ee,active:d,x:ie[0],y:ie[1],dx:0,dy:0,dispatch:ce}),X)))return ue=w.x-ie[0]||0,ae=w.y-ie[1]||0,function P(z,K,se){var Q,B=ie;switch(z){case"start":s[ee]=P,Q=d++;break;case"end":delete s[ee],--d;case"drag":ie=Vn(se||K,Y),Q=d}ce.call(z,j,new Ws(z,{sourceEvent:K,subject:w,target:C,identifier:ee,active:Q,x:ie[0]+ue,y:ie[1]+ae,dx:ie[0]-B[0],dy:ie[1]-B[1],dispatch:ce}),X)}}return C.filter=function(j){return arguments.length?(t="function"==typeof j?j:Bi(!!j),C):t},C.container=function(j){return arguments.length?(r="function"==typeof j?j:Bi(j),C):r},C.subject=function(j){return arguments.length?(n="function"==typeof j?j:Bi(j),C):n},C.touchable=function(j){return arguments.length?(i="function"==typeof j?j:Bi(!!j),C):i},C.on=function(){var j=l.on.apply(l,arguments);return j===l?C:j},C.clickDistance=function(j){return arguments.length?(b=(j=+j)*j,C):Math.sqrt(b)},C}().on("start",U=>{const{domNode:ce,nodeDragThreshold:ie}=f.getState();0===ie&&X(U),$.current=!1;const ue=V(U);b.current=ue,x.current=ce?.getBoundingClientRect()||null,I.current=tt(U.sourceEvent,x.current)}).on("drag",U=>{const ce=V(U),{autoPanOnNodeDrag:ie,nodeDragThreshold:ue}=f.getState();if("touchmove"===U.sourceEvent.type&&U.sourceEvent.touches.length>1&&($.current=!0),!$.current){if(!R.current&&E.current&&ie&&(R.current=!0,H()),!E.current){const ae=ce.xSnapped-(b?.current?.x??0),w=ce.ySnapped-(b?.current?.y??0);Math.sqrt(ae*ae+w*w)>ue&&X(U)}(b.current.x!==ce.xSnapped||b.current.y!==ce.ySnapped)&&v.current&&E.current&&(T.current=U.sourceEvent,I.current=tt(U.sourceEvent,x.current),Y(ce))}}).on("end",U=>{if(E.current&&!$.current&&(g(!1),R.current=!1,E.current=!1,cancelAnimationFrame(C.current),v.current)){const{updateNodePositions:ce,nodeInternals:ie,onNodeDragStop:ue,onSelectionDragStop:ae}=f.getState(),w=s?ue:Qp(ae);if(ce(v.current,!1,!1),w){const[P,z]=io({nodeId:s,dragItems:v.current,nodeInternals:ie});w(U.sourceEvent,P,z)}}}).filter(U=>{const ce=U.target;return!U.button&&(!n||!xe(ce,`.${n}`,t))&&(!i||xe(ce,i,t))});return j.call(ee),()=>{j.on(".drag",null)}}j.on(".drag",null)}},[t,r,n,i,l,f,s,d,V]),_}function _f(){const t=Le();return(0,k.useCallback)(n=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:l,getNodes:d,snapToGrid:f,snapGrid:_,onError:g,nodesDraggable:v}=t.getState(),b=d().filter($=>$.selected&&($.draggable||v&&typeof $.draggable>"u")),I=n.isShiftPressed?4:1,T=n.x*(f?_[0]:5)*I,R=n.y*(f?_[1]:5)*I;l(b.map($=>{if($.positionAbsolute){const V={x:$.positionAbsolute.x+T,y:$.positionAbsolute.y+R};f&&(V.x=_[0]*Math.round(V.x/_[0]),V.y=_[1]*Math.round(V.y/_[1]));const{positionAbsolute:j,position:Y}=Ge($,V,i,s,void 0,g);$.position=Y,$.positionAbsolute=j}return $}),!0,!1)},[])}const ba={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var dc=t=>{const r=({id:n,type:i,data:s,xPos:l,yPos:d,xPosOrigin:f,yPosOrigin:_,selected:g,onClick:v,onMouseEnter:b,onMouseMove:C,onMouseLeave:x,onContextMenu:I,onDoubleClick:T,style:R,className:E,isDraggable:$,isSelectable:V,isConnectable:j,isFocusable:Y,selectNodesOnDrag:H,sourcePosition:X,targetPosition:ee,hidden:U,resizeObserver:ce,dragHandle:ie,zIndex:ue,isParent:ae,noDragClassName:w,noPanClassName:P,initialized:z,disableKeyboardA11y:K,ariaLabel:se,rfId:B,hasHandleBounds:Q})=>{const re=Le(),le=(0,k.useRef)(null),ye=(0,k.useRef)(null),ge=(0,k.useRef)(X),Re=(0,k.useRef)(ee),Pe=(0,k.useRef)(i),Ze=V||$||v||b||C||x,Qe=_f(),bt=uc(n,re.getState,b),at=uc(n,re.getState,C),So=uc(n,re.getState,x),so=uc(n,re.getState,I),wo=uc(n,re.getState,T);(0,k.useEffect)(()=>()=>{ye.current&&(ce?.unobserve(ye.current),ye.current=null)},[]),(0,k.useEffect)(()=>{if(le.current&&!U){const lt=le.current;(!z||!Q||ye.current!==lt)&&(ye.current&&ce?.unobserve(ye.current),ce?.observe(lt),ye.current=lt)}},[U,z,Q]),(0,k.useEffect)(()=>{const lt=Pe.current!==i,ke=ge.current!==X,Xn=Re.current!==ee;le.current&&(lt||ke||Xn)&&(lt&&(Pe.current=i),ke&&(ge.current=X),Xn&&(Re.current=ee),re.getState().updateNodeDimensions([{id:n,nodeElement:le.current,forceUpdate:!0}]))},[n,i,X,ee]);const Uo=mf({nodeRef:le,disabled:U||!$,noDragClassName:w,handleSelector:ie,nodeId:n,isSelectable:V,selectNodesOnDrag:H});return U?null:k.createElement("div",{className:Lt(["react-flow__node",`react-flow__node-${i}`,{[P]:$},E,{selected:g,selectable:V,parent:ae,dragging:Uo}]),ref:le,style:{zIndex:ue,transform:`translate(${f}px,${_}px)`,pointerEvents:Ze?"all":"none",visibility:z?"visible":"hidden",...R},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:bt,onMouseMove:at,onMouseLeave:So,onContextMenu:so,onClick:lt=>{const{nodeDragThreshold:ke}=re.getState();if(V&&(!H||!$||ke>0)&&qp({id:n,store:re,nodeRef:le}),v){const Xn=re.getState().nodeInternals.get(n);Xn&&v(lt,{...Xn})}},onDoubleClick:wo,onKeyDown:Y?lt=>{Xr(lt)||K||(Ql.includes(lt.key)&&V?qp({id:n,store:re,unselect:"Escape"===lt.key,nodeRef:le}):$&&g&&Object.prototype.hasOwnProperty.call(ba,lt.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~d}`}),Qe({x:ba[lt.key].x,y:ba[lt.key].y,isShiftPressed:lt.shiftKey})))}:void 0,tabIndex:Y?0:void 0,role:Y?"button":void 0,"aria-describedby":K?void 0:`${pa}-${B}`,"aria-label":se},k.createElement(Yi,{value:n},k.createElement(t,{id:n,data:s,type:i,xPos:l,yPos:d,selected:g,isConnectable:j,sourcePosition:X,targetPosition:ee,dragging:Uo,dragHandle:ie,zIndex:ue})))};return r.displayName="NodeWrapper",(0,k.memo)(r)};const Sm=t=>{const r=t.getNodes().filter(n=>n.selected);return{...zt(r,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var Nm=(0,k.memo)(function wm({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:n}){const i=Le(),{width:s,height:l,x:d,y:f,transformString:_,userSelectionActive:g}=De(Sm,vt),v=_f(),b=(0,k.useRef)(null);if((0,k.useEffect)(()=>{n||b.current?.focus({preventScroll:!0})},[n]),mf({nodeRef:b}),g||!s||!l)return null;const C=t?I=>{const T=i.getState().getNodes().filter(R=>R.selected);t(I,T)}:void 0;return k.createElement("div",{className:Lt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:_}},k.createElement("div",{ref:b,className:"react-flow__nodesselection-rect",onContextMenu:C,tabIndex:n?void 0:-1,onKeyDown:n?void 0:I=>{Object.prototype.hasOwnProperty.call(ba,I.key)&&v({x:ba[I.key].x,y:ba[I.key].y,isShiftPressed:I.shiftKey})},style:{width:s,height:l,top:f,left:d}}))});const Em=t=>t.nodesSelectionActive,hf=({children:t,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:d,deleteKeyCode:f,onMove:_,onMoveStart:g,onMoveEnd:v,selectionKeyCode:b,selectionOnDrag:C,selectionMode:x,onSelectionStart:I,onSelectionEnd:T,multiSelectionKeyCode:R,panActivationKeyCode:E,zoomActivationKeyCode:$,elementsSelectable:V,zoomOnScroll:j,zoomOnPinch:Y,panOnScroll:H,panOnScrollSpeed:X,panOnScrollMode:ee,zoomOnDoubleClick:U,panOnDrag:ce,defaultViewport:ie,translateExtent:ue,minZoom:ae,maxZoom:w,preventScrolling:P,onSelectionContextMenu:z,noWheelClassName:K,noPanClassName:se,disableKeyboardA11y:B})=>{const Q=De(Em),re=Wi(b),le=Wi(E),ye=le||ce,ge=le||H,Re=re||C&&!0!==ye;return(({deleteKeyCode:t,multiSelectionKeyCode:r})=>{const n=Le(),{deleteElements:i}=Ji(),s=Wi(t,o),l=Wi(r);(0,k.useEffect)(()=>{if(s){const{edges:d,getNodes:f}=n.getState(),_=f().filter(v=>v.selected),g=d.filter(v=>v.selected);i({nodes:_,edges:g}),n.setState({nodesSelectionActive:!1})}},[s]),(0,k.useEffect)(()=>{n.setState({multiSelectionActive:l})},[l])})({deleteKeyCode:f,multiSelectionKeyCode:R}),k.createElement(J,{onMove:_,onMoveStart:g,onMoveEnd:v,onPaneContextMenu:l,elementsSelectable:V,zoomOnScroll:j,zoomOnPinch:Y,panOnScroll:ge,panOnScrollSpeed:X,panOnScrollMode:ee,zoomOnDoubleClick:U,panOnDrag:!re&&ye,defaultViewport:ie,translateExtent:ue,minZoom:ae,maxZoom:w,zoomActivationKeyCode:$,preventScrolling:P,noWheelClassName:K,noPanClassName:se},k.createElement(he,{onSelectionStart:I,onSelectionEnd:T,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:d,panOnDrag:ye,isSelecting:!!Re,selectionMode:x},t,Q&&k.createElement(Nm,{onSelectionContextMenu:z,noPanClassName:se,disableKeyboardA11y:B})))};hf.displayName="FlowRenderer";var Im=(0,k.memo)(hf);function Am(t){return{input:dc(t.input||ac),default:dc(t.default||nt),output:dc(t.output||Sd),group:dc(t.group||aa),...Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,l)=>(s[l]=dc(t[l]||nt),s),{})}}const Fm=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),gf=t=>{const{nodesDraggable:r,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:l,onError:d}=De(Fm,vt),f=function Tm(t){return De((0,k.useCallback)(n=>t?ia(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}(t.onlyRenderVisibleElements),_=(0,k.useRef)(),g=(0,k.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;const v=new ResizeObserver(b=>{const C=b.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));l(C)});return _.current=v,v},[]);return(0,k.useEffect)(()=>()=>{_?.current?.disconnect()},[]),k.createElement("div",{className:"react-flow__nodes",style:u},f.map(v=>{let b=v.type||"default";t.nodeTypes[b]||(d?.("003",fn.error003(b)),b="default");const C=t.nodeTypes[b]||t.nodeTypes.default,x=!!(v.draggable||r&&typeof v.draggable>"u"),I=!!(v.selectable||s&&typeof v.selectable>"u"),T=!!(v.connectable||n&&typeof v.connectable>"u"),R=!!(v.focusable||i&&typeof v.focusable>"u"),E=t.nodeExtent?Kl(v.positionAbsolute,t.nodeExtent):v.positionAbsolute,$=E?.x??0,V=E?.y??0,j=(({x:t,y:r,width:n,height:i,origin:s})=>n&&i?s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:r}:{x:t-n*s[0],y:r-i*s[1]}:{x:t,y:r})({x:$,y:V,width:v.width??0,height:v.height??0,origin:t.nodeOrigin});return k.createElement(C,{key:v.id,id:v.id,className:v.className,style:v.style,type:b,data:v.data,sourcePosition:v.sourcePosition||ve.Bottom,targetPosition:v.targetPosition||ve.Top,hidden:v.hidden,xPos:$,yPos:V,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!v.selected,isDraggable:x,isSelectable:I,isConnectable:T,isFocusable:R,resizeObserver:g,dragHandle:v.dragHandle,zIndex:v[qe]?.z??0,isParent:!!v[qe]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!v.width&&!!v.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:v.ariaLabel,hasHandleBounds:!!v[qe]?.handleBounds})}))};gf.displayName="NodeRenderer";var Mm=(0,k.memo)(gf);const jm=(t,r,n)=>n===ve.Left?t-r:n===ve.Right?t+r:t,$m=(t,r,n)=>n===ve.Top?t-r:n===ve.Bottom?t+r:t,vf="react-flow__edgeupdater",yf=({position:t,centerX:r,centerY:n,radius:i=10,onMouseDown:s,onMouseEnter:l,onMouseOut:d,type:f})=>k.createElement("circle",{onMouseDown:s,onMouseEnter:l,onMouseOut:d,className:Lt([vf,`${vf}-${f}`]),cx:jm(r,i,t),cy:$m(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),Gm=()=>!0;var xa=t=>{const r=({id:n,className:i,type:s,data:l,onClick:d,onEdgeDoubleClick:f,selected:_,animated:g,label:v,labelStyle:b,labelShowBg:C,labelBgStyle:x,labelBgPadding:I,labelBgBorderRadius:T,style:R,source:E,target:$,sourceX:V,sourceY:j,targetX:Y,targetY:H,sourcePosition:X,targetPosition:ee,elementsSelectable:U,hidden:ce,sourceHandleId:ie,targetHandleId:ue,onContextMenu:ae,onMouseEnter:w,onMouseMove:P,onMouseLeave:z,reconnectRadius:K,onReconnect:se,onReconnectStart:B,onReconnectEnd:Q,markerEnd:re,markerStart:le,rfId:ye,ariaLabel:ge,isFocusable:Re,isReconnectable:Pe,pathOptions:Ze,interactionWidth:Qe,disableKeyboardA11y:bt})=>{const at=(0,k.useRef)(null),[So,so]=(0,k.useState)(!1),[wo,ao]=(0,k.useState)(!1),Bt=Le(),Uo=(0,k.useMemo)(()=>`url('#${Hi(le,ye)}')`,[le,ye]),lt=(0,k.useMemo)(()=>`url('#${Hi(re,ye)}')`,[re,ye]);if(ce)return null;const Xn=Li(n,Bt.getState,f),ns=Li(n,Bt.getState,ae),fc=Li(n,Bt.getState,w),ka=Li(n,Bt.getState,P),Sa=Li(n,Bt.getState,z),hi=(hn,Wo)=>{if(0!==hn.button)return;const{edges:rs,isValidConnection:ss}=Bt.getState(),Ia=Wo?$:E,Zo=(Wo?ue:ie)||null,as=Wo?"target":"source",cf=ss||Gm,uf=Wo,_c=rs.find(ls=>ls.id===n);ao(!0),B?.(hn,_c,as),yd({event:hn,handleId:Zo,nodeId:Ia,onConnect:ls=>se?.(_c,ls),isTarget:uf,getState:Bt.getState,setState:Bt.setState,isValidConnection:cf,edgeUpdaterType:as,onReconnectEnd:ls=>{ao(!1),Q?.(ls,_c,as)}})},is=()=>so(!0),Na=()=>so(!1);return k.createElement("g",{className:Lt(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:_,animated:g,inactive:!U&&!d,updating:So}]),onClick:hn=>{const{edges:Wo,addSelectedEdges:rs,unselectNodesAndEdges:ss,multiSelectionActive:Ia}=Bt.getState(),Zo=Wo.find(as=>as.id===n);Zo&&(U&&(Bt.setState({nodesSelectionActive:!1}),Zo.selected&&Ia?(ss({nodes:[],edges:[Zo]}),at.current?.blur()):rs([n])),d&&d(hn,Zo))},onDoubleClick:Xn,onContextMenu:ns,onMouseEnter:fc,onMouseMove:ka,onMouseLeave:Sa,onKeyDown:Re?hn=>{if(!bt&&Ql.includes(hn.key)&&U){const{unselectNodesAndEdges:Wo,addSelectedEdges:rs,edges:ss}=Bt.getState();"Escape"===hn.key?(at.current?.blur(),Wo({edges:[ss.find(Zo=>Zo.id===n)]})):rs([n])}}:void 0,tabIndex:Re?0:void 0,role:Re?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===ge?void 0:ge||`Edge from ${E} to ${$}`,"aria-describedby":Re?`${Nd}-${ye}`:void 0,ref:at},!wo&&k.createElement(t,{id:n,source:E,target:$,selected:_,animated:g,label:v,labelStyle:b,labelShowBg:C,labelBgStyle:x,labelBgPadding:I,labelBgBorderRadius:T,data:l,style:R,sourceX:V,sourceY:j,targetX:Y,targetY:H,sourcePosition:X,targetPosition:ee,sourceHandleId:ie,targetHandleId:ue,markerStart:Uo,markerEnd:lt,pathOptions:Ze,interactionWidth:Qe}),Pe&&k.createElement(k.Fragment,null,("source"===Pe||!0===Pe)&&k.createElement(yf,{position:X,centerX:V,centerY:j,radius:K,onMouseDown:hn=>hi(hn,!0),onMouseEnter:is,onMouseOut:Na,type:"source"}),("target"===Pe||!0===Pe)&&k.createElement(yf,{position:ee,centerX:Y,centerY:H,radius:K,onMouseDown:hn=>hi(hn,!1),onMouseEnter:is,onMouseOut:Na,type:"target"})))};return r.displayName="EdgeWrapper",(0,k.memo)(r)};function Dm(t){return{default:xa(t.default||Vt),straight:xa(t.bezier||yo),step:xa(t.step||_t),smoothstep:xa(t.step||vo),simplebezier:xa(t.simplebezier||Ur),...Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,l)=>(s[l]=xa(t[l]||Vt),s),{})}}function bf(t,r,n=null){const i=(n?.x||0)+r.x,s=(n?.y||0)+r.y,l=n?.width||r.width,d=n?.height||r.height;switch(t){case ve.Top:return{x:i+l/2,y:s};case ve.Right:return{x:i+l,y:s+d/2};case ve.Bottom:return{x:i+l/2,y:s+d};case ve.Left:return{x:i,y:s+d/2}}}function xf(t,r){return t?1!==t.length&&r?r&&t.find(n=>n.id===r)||null:t[0]:null}function Cf(t){const r=t?.[qe]?.handleBounds||null,n=r&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},r,!!n]}const zm=[{level:0,isMaxLevel:!0,edges:[]}];const kf={[qs.Arrow]:({color:t="none",strokeWidth:r=1})=>k.createElement("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[qs.ArrowClosed]:({color:t="none",strokeWidth:r=1})=>k.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Hm=({id:t,type:r,color:n,width:i=12.5,height:s=12.5,markerUnits:l="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const _=function Ym(t){const r=Le();return(0,k.useMemo)(()=>Object.prototype.hasOwnProperty.call(kf,t)?kf[t]:(r.getState().onError?.("009",fn.error009(t)),null),[t])}(r);return _?k.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0"},k.createElement(_,{color:n,strokeWidth:d})):null},Sf=({defaultColor:t,rfId:r})=>{const n=De((0,k.useCallback)((({defaultColor:t,rfId:r})=>n=>{const i=[];return n.edges.reduce((s,l)=>([l.markerStart,l.markerEnd].forEach(d=>{if(d&&"object"==typeof d){const f=Hi(d,r);i.includes(f)||(s.push({id:f,color:d.color||t,...d}),i.push(f))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))})({defaultColor:t,rfId:r}),[t,r]),(i,s)=>!(i.length!==s.length||i.some((l,d)=>l.id!==s[d].id)));return k.createElement("defs",null,n.map(i=>k.createElement(Hm,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Sf.displayName="MarkerDefinitions";var Wm=(0,k.memo)(Sf);const Zm=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),wf=({defaultMarkerColor:t,onlyRenderVisibleElements:r,elevateEdgesOnSelect:n,rfId:i,edgeTypes:s,noPanClassName:l,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:_,onEdgeMouseLeave:g,onEdgeClick:v,onEdgeDoubleClick:b,onReconnect:C,onReconnectStart:x,onReconnectEnd:I,reconnectRadius:T,children:R,disableKeyboardA11y:E})=>{const{edgesFocusable:$,edgesUpdatable:V,elementsSelectable:j,width:Y,height:H,connectionMode:X,nodeInternals:ee,onError:U}=De(Zm,vt),ce=function Lm(t,r,n){const i=De((0,k.useCallback)(s=>t?s.edges.filter(l=>{const d=r.get(l.source),f=r.get(l.target);return d?.width&&d?.height&&f?.width&&f?.height&&function Om({sourcePos:t,targetPos:r,sourceWidth:n,sourceHeight:i,targetWidth:s,targetHeight:l,width:d,height:f,transform:_}){const g={x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x+n,r.x+s),y2:Math.max(t.y+i,r.y+l)};g.x===g.x2&&(g.x2+=1),g.y===g.y2&&(g.y2+=1);const v=fe({x:(0-_[0])/_[2],y:(0-_[1])/_[2],width:d/_[2],height:f/_[2]}),b=Math.max(0,Math.min(v.x2,g.x2)-Math.max(v.x,g.x)),C=Math.max(0,Math.min(v.y2,g.y2)-Math.max(v.y,g.y));return Math.ceil(b*C)>0}({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:f.width,targetHeight:f.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,r]));return function Bm(t,r,n=!1){let i=-1;const s=t.reduce((d,f)=>{const _=nn(f.zIndex);let g=_?f.zIndex:0;if(n){const v=r.get(f.target),b=r.get(f.source),C=f.selected||v?.selected||b?.selected,x=Math.max(b?.[qe]?.z||0,v?.[qe]?.z||0,1e3);g=(_?f.zIndex:0)+(C?x:0)}return d[g]?d[g].push(f):d[g]=[f],i=g>i?g:i,d},{}),l=Object.entries(s).map(([d,f])=>{const _=+d;return{edges:f,level:_,isMaxLevel:_===i}});return 0===l.length?zm:l}(i,r,n)}(r,ee,n);return Y?k.createElement(k.Fragment,null,ce.map(({level:ie,edges:ue,isMaxLevel:ae})=>k.createElement("svg",{key:ie,style:{zIndex:ie},width:Y,height:H,className:"react-flow__edges react-flow__container"},ae&&k.createElement(Wm,{defaultColor:t,rfId:i}),k.createElement("g",null,ue.map(w=>{const[P,z,K]=Cf(ee.get(w.source)),[se,B,Q]=Cf(ee.get(w.target));if(!K||!Q)return null;let re=w.type||"default";s[re]||(U?.("011",fn.error011(re)),re="default");const le=s[re]||s.default,ye=X===Ut.Strict?B.target:(B.target??[]).concat(B.source??[]),ge=xf(z.source,w.sourceHandle),Re=xf(ye,w.targetHandle),Pe=ge?.position||ve.Bottom,Ze=Re?.position||ve.Top,Qe=!!(w.focusable||$&&typeof w.focusable>"u"),bt=w.reconnectable||w.updatable,at=typeof C<"u"&&(bt||V&&typeof bt>"u");if(!ge||!Re)return U?.("008",fn.error008(ge,w)),null;const{sourceX:So,sourceY:so,targetX:wo,targetY:ao}=((t,r,n,i,s,l)=>{const d=bf(n,t,r),f=bf(l,i,s);return{sourceX:d.x,sourceY:d.y,targetX:f.x,targetY:f.y}})(P,ge,Pe,se,Re,Ze);return k.createElement(le,{key:w.id,id:w.id,className:Lt([w.className,l]),type:re,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:So,sourceY:so,targetX:wo,targetY:ao,sourcePosition:Pe,targetPosition:Ze,elementsSelectable:j,onContextMenu:d,onMouseEnter:f,onMouseMove:_,onMouseLeave:g,onClick:v,onEdgeDoubleClick:b,onReconnect:C,onReconnectStart:x,onReconnectEnd:I,reconnectRadius:T,rfId:i,ariaLabel:w.ariaLabel,isFocusable:Qe,isReconnectable:at,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth,disableKeyboardA11y:E})})))),R):null};wf.displayName="EdgeRenderer";var Jm=(0,k.memo)(wf);const Km=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function qm({children:t}){const r=De(Km);return k.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:r}},t)}const e_={[ve.Left]:ve.Right,[ve.Right]:ve.Left,[ve.Top]:ve.Bottom,[ve.Bottom]:ve.Top},Nf=({nodeId:t,handleType:r,style:n,type:i=Bo.Bezier,CustomComponent:s,connectionStatus:l})=>{const{fromNode:d,handleId:f,toX:_,toY:g,connectionMode:v}=De((0,k.useCallback)(H=>({fromNode:H.nodeInternals.get(t),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[t]),vt),b=d?.[qe]?.handleBounds;let C=b?.[r];if(v===Ut.Loose&&(C=C||b?.["source"===r?"target":"source"]),!d||!C)return null;const x=f?C.find(H=>H.id===f):C[0],I=x?x.x+x.width/2:(d.width??0)/2,T=x?x.y+x.height/2:d.height??0,R=(d.positionAbsolute?.x??0)+I,E=(d.positionAbsolute?.y??0)+T,$=x?.position,V=$?e_[$]:null;if(!$||!V)return null;if(s)return k.createElement(s,{connectionLineType:i,connectionLineStyle:n,fromNode:d,fromHandle:x,fromX:R,fromY:E,toX:_,toY:g,fromPosition:$,toPosition:V,connectionStatus:l});let j="";const Y={sourceX:R,sourceY:E,sourcePosition:$,targetX:_,targetY:g,targetPosition:V};return i===Bo.Bezier?[j]=Xi(Y):i===Bo.Step?[j]=on({...Y,borderRadius:0}):i===Bo.SmoothStep?[j]=on(Y):i===Bo.SimpleBezier?[j]=Hr(Y):j=`M${R},${E} ${_},${g}`,k.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};Nf.displayName="ConnectionLine";const t_=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function n_({containerStyle:t,style:r,type:n,component:i}){const{nodeId:s,handleType:l,nodesConnectable:d,width:f,height:_,connectionStatus:g}=De(t_,vt);return s&&l&&f&&d?k.createElement("svg",{style:t,width:f,height:_,className:"react-flow__edges react-flow__connectionline react-flow__container"},k.createElement("g",{className:Lt(["react-flow__connection",g])},k.createElement(Nf,{nodeId:s,handleType:l,style:r,type:n,CustomComponent:i,connectionStatus:g}))):null}function Ef(t,r){return(0,k.useRef)(null),Le(),(0,k.useMemo)(()=>r(t),[t])}const If=({nodeTypes:t,edgeTypes:r,onMove:n,onMoveStart:i,onMoveEnd:s,onInit:l,onNodeClick:d,onEdgeClick:f,onNodeDoubleClick:_,onEdgeDoubleClick:g,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:C,onNodeContextMenu:x,onSelectionContextMenu:I,onSelectionStart:T,onSelectionEnd:R,connectionLineType:E,connectionLineStyle:$,connectionLineComponent:V,connectionLineContainerStyle:j,selectionKeyCode:Y,selectionOnDrag:H,selectionMode:X,multiSelectionKeyCode:ee,panActivationKeyCode:U,zoomActivationKeyCode:ce,deleteKeyCode:ie,onlyRenderVisibleElements:ue,elementsSelectable:ae,selectNodesOnDrag:w,defaultViewport:P,translateExtent:z,minZoom:K,maxZoom:se,preventScrolling:B,defaultMarkerColor:Q,zoomOnScroll:re,zoomOnPinch:le,panOnScroll:ye,panOnScrollSpeed:ge,panOnScrollMode:Re,zoomOnDoubleClick:Pe,panOnDrag:Ze,onPaneClick:Qe,onPaneMouseEnter:bt,onPaneMouseMove:at,onPaneMouseLeave:So,onPaneScroll:so,onPaneContextMenu:wo,onEdgeContextMenu:ao,onEdgeMouseEnter:Bt,onEdgeMouseMove:Uo,onEdgeMouseLeave:lt,onReconnect:ke,onReconnectStart:Xn,onReconnectEnd:ns,reconnectRadius:fc,noDragClassName:ka,noWheelClassName:Sa,noPanClassName:hi,elevateEdgesOnSelect:wa,disableKeyboardA11y:os,nodeOrigin:is,nodeExtent:Na,rfId:Ea})=>{const mc=Ef(t,Am),hn=Ef(r,Dm);return function Qm(t){const r=Ji(),n=(0,k.useRef)(!1);(0,k.useEffect)(()=>{!n.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),n.current=!0)},[t,r.viewportInitialized])}(l),k.createElement(Im,{onPaneClick:Qe,onPaneMouseEnter:bt,onPaneMouseMove:at,onPaneMouseLeave:So,onPaneContextMenu:wo,onPaneScroll:so,deleteKeyCode:ie,selectionKeyCode:Y,selectionOnDrag:H,selectionMode:X,onSelectionStart:T,onSelectionEnd:R,multiSelectionKeyCode:ee,panActivationKeyCode:U,zoomActivationKeyCode:ce,elementsSelectable:ae,onMove:n,onMoveStart:i,onMoveEnd:s,zoomOnScroll:re,zoomOnPinch:le,zoomOnDoubleClick:Pe,panOnScroll:ye,panOnScrollSpeed:ge,panOnScrollMode:Re,panOnDrag:Ze,defaultViewport:P,translateExtent:z,minZoom:K,maxZoom:se,onSelectionContextMenu:I,preventScrolling:B,noDragClassName:ka,noWheelClassName:Sa,noPanClassName:hi,disableKeyboardA11y:os},k.createElement(qm,null,k.createElement(Jm,{edgeTypes:hn,onEdgeClick:f,onEdgeDoubleClick:g,onlyRenderVisibleElements:ue,onEdgeContextMenu:ao,onEdgeMouseEnter:Bt,onEdgeMouseMove:Uo,onEdgeMouseLeave:lt,onReconnect:ke,onReconnectStart:Xn,onReconnectEnd:ns,reconnectRadius:fc,defaultMarkerColor:Q,noPanClassName:hi,elevateEdgesOnSelect:!!wa,disableKeyboardA11y:os,rfId:Ea},k.createElement(n_,{style:$,type:E,component:V,containerStyle:j})),k.createElement("div",{className:"react-flow__edgelabel-renderer"}),k.createElement(Mm,{nodeTypes:mc,onNodeClick:d,onNodeDoubleClick:_,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:C,onNodeContextMenu:x,selectNodesOnDrag:w,onlyRenderVisibleElements:ue,noPanClassName:hi,noDragClassName:ka,disableKeyboardA11y:os,nodeOrigin:is,nodeExtent:Na,rfId:Ea})))};If.displayName="GraphView";var o_=(0,k.memo)(If);const ef=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ki={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ef,nodeExtent:ef,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ut.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,r)=>{},isValidConnection:void 0},tf=({children:t})=>{const r=(0,k.useRef)(null);return r.current||(r.current=(()=>{return t=(t,r)=>({...Ki,setNodes:n=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:l}=r();t({nodeInternals:Zi(n,i,s,l)})},getNodes:()=>Array.from(r().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=r();t({edges:n.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(n,i)=>{const s=typeof n<"u",l=typeof i<"u",d=s?Zi(n,new Map,r().nodeOrigin,r().elevateNodesOnSelect):new Map;t({nodeInternals:d,edges:l?i:[],hasDefaultNodes:s,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:l,fitViewOnInitDone:d,fitViewOnInitOptions:f,domNode:_,nodeOrigin:g}=r(),v=_?.querySelector(".react-flow__viewport");if(!v)return;const b=window.getComputedStyle(v),{m22:C}=new window.DOMMatrixReadOnly(b.transform),x=n.reduce((T,R)=>{const E=s.get(R.id);if(E?.hidden)s.set(E.id,{...E,[qe]:{...E[qe],handleBounds:void 0}});else if(E){const $=ui(R.nodeElement);$.width&&$.height&&(E.width!==$.width||E.height!==$.height||R.forceUpdate)&&(s.set(E.id,{...E,[qe]:{...E[qe],handleBounds:{source:Rd(".source",R.nodeElement,C,g),target:Rd(".target",R.nodeElement,C,g)}},...$}),T.push({id:E.id,type:"dimensions",dimensions:$}))}return T},[]);ha(s,g);const I=d||l&&!d&&ga(r,{initial:!0,...f});t({nodeInternals:new Map(s),fitViewOnInitDone:I}),x?.length>0&&i?.(x)},updateNodePositions:(n,i=!0,s=!1)=>{const{triggerNodeChanges:l}=r();l(n.map(f=>{const _={id:f.id,type:"position",dragging:s};return i&&(_.positionAbsolute=f.positionAbsolute,_.position=f.position),_}))},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:l,nodeOrigin:d,getNodes:f,elevateNodesOnSelect:_}=r();if(n?.length){if(l){const v=Zi(_e(n,f()),s,d,_);t({nodeInternals:v})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:s,getNodes:l}=r();let d,f=null;i?d=n.map(_=>G(_,!0)):(d=F(l(),n),f=F(s,[])),ya({changedNodes:d,changedEdges:f,get:r,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:s,getNodes:l}=r();let d,f=null;i?d=n.map(_=>G(_,!0)):(d=F(s,n),f=F(l(),[])),ya({changedNodes:f,changedEdges:d,get:r,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:s,getNodes:l}=r(),f=i||s;ya({changedNodes:(n||l()).map(v=>(v.selected=!1,G(v.id,!1))),changedEdges:f.map(v=>G(v.id,!1)),get:r,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:s}=r();i?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:s}=r();i?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{r().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=r();ya({changedNodes:i().filter(f=>f.selected).map(f=>G(f.id,!1)),changedEdges:n.filter(f=>f.selected).map(f=>G(f.id,!1)),get:r,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=r();i.forEach(s=>{s.positionAbsolute=Kl(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:s,height:l,d3Zoom:d,d3Selection:f,translateExtent:_}=r();if(!d||!f||!n.x&&!n.y)return!1;const g=no.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),v=[[0,0],[s,l]],b=d?.constrain()(g,v,_);return d.transform(f,b),i[0]!==b.x||i[1]!==b.y||i[2]!==b.k},cancelConnection:()=>t({connectionNodeId:Ki.connectionNodeId,connectionHandleId:Ki.connectionHandleId,connectionHandleType:Ki.connectionHandleType,connectionStatus:Ki.connectionStatus,connectionStartHandle:Ki.connectionStartHandle,connectionEndHandle:Ki.connectionEndHandle}),reset:()=>t({...Ki})}),t?Uc(t,Object.is):Uc;var t})()),k.createElement(dd,{value:r.current},t)};tf.displayName="ReactFlowProvider";const Tf=({children:t})=>(0,k.useContext)(Zs)?k.createElement(k.Fragment,null,t):k.createElement(tf,null,t);Tf.displayName="ReactFlowWrapper";const r_={input:ac,default:nt,output:Sd,group:aa},s_={default:Vt,straight:yo,step:_t,smoothstep:vo,simplebezier:Ur},a_=[0,0],l_=[15,15],c_={x:0,y:0,zoom:1},u_={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Af=(0,k.forwardRef)(({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,className:s,nodeTypes:l=r_,edgeTypes:d=s_,onNodeClick:f,onEdgeClick:_,onInit:g,onMove:v,onMoveStart:b,onMoveEnd:C,onConnect:x,onConnectStart:I,onConnectEnd:T,onClickConnectStart:R,onClickConnectEnd:E,onNodeMouseEnter:$,onNodeMouseMove:V,onNodeMouseLeave:j,onNodeContextMenu:Y,onNodeDoubleClick:H,onNodeDragStart:X,onNodeDrag:ee,onNodeDragStop:U,onNodesDelete:ce,onEdgesDelete:ie,onSelectionChange:ue,onSelectionDragStart:ae,onSelectionDrag:w,onSelectionDragStop:P,onSelectionContextMenu:z,onSelectionStart:K,onSelectionEnd:se,connectionMode:B=Ut.Strict,connectionLineType:Q=Bo.Bezier,connectionLineStyle:re,connectionLineComponent:le,connectionLineContainerStyle:ye,deleteKeyCode:ge="Backspace",selectionKeyCode:Re="Shift",selectionOnDrag:Pe=!1,selectionMode:Ze=Yr.Full,panActivationKeyCode:Qe="Space",multiSelectionKeyCode:bt=(mn()?"Meta":"Control"),zoomActivationKeyCode:at=(mn()?"Meta":"Control"),snapToGrid:So=!1,snapGrid:so=l_,onlyRenderVisibleElements:wo=!1,selectNodesOnDrag:ao=!0,nodesDraggable:Bt,nodesConnectable:Uo,nodesFocusable:lt,nodeOrigin:ke=a_,edgesFocusable:Xn,edgesUpdatable:ns,elementsSelectable:fc,defaultViewport:ka=c_,minZoom:Sa=.5,maxZoom:hi=2,translateExtent:wa=ef,preventScrolling:os=!0,nodeExtent:is,defaultMarkerColor:Na="#b1b1b7",zoomOnScroll:Ea=!0,zoomOnPinch:mc=!0,panOnScroll:hn=!1,panOnScrollSpeed:Wo=.5,panOnScrollMode:rs=Pi.Free,zoomOnDoubleClick:ss=!0,panOnDrag:Ia=!0,onPaneClick:Zo,onPaneMouseEnter:as,onPaneMouseMove:cf,onPaneMouseLeave:uf,onPaneScroll:_c,onPaneContextMenu:df,children:ym,onEdgeContextMenu:ls,onEdgeDoubleClick:Ay,onEdgeMouseEnter:Ry,onEdgeMouseMove:Fy,onEdgeMouseLeave:My,onEdgeUpdate:jy,onEdgeUpdateStart:$y,onEdgeUpdateEnd:Gy,onReconnect:Dy,onReconnectStart:Vy,onReconnectEnd:Oy,reconnectRadius:zy=10,edgeUpdaterRadius:By=10,onNodesChange:Ly,onEdgesChange:Py,noDragClassName:Xy="nodrag",noWheelClassName:Yy="nowheel",noPanClassName:bm="nopan",fitView:Hy=!1,fitViewOptions:Uy,connectOnClick:Wy=!0,attributionPosition:Zy,proOptions:Jy,defaultEdgeOptions:Ky,elevateNodesOnSelect:qy=!0,elevateEdgesOnSelect:Qy=!1,disableKeyboardA11y:xm=!1,autoPanOnConnect:eb=!0,autoPanOnNodeDrag:tb=!0,connectionRadius:nb=20,isValidConnection:ob,onError:ib,style:rb,id:Cm,nodeDragThreshold:sb,...ab},lb)=>{const pf=Cm||"1";return k.createElement("div",{...ab,style:{...rb,...u_},ref:lb,className:Lt(["react-flow",s]),"data-testid":"rf__wrapper",id:Cm},k.createElement(Tf,null,k.createElement(o_,{onInit:g,onMove:v,onMoveStart:b,onMoveEnd:C,onNodeClick:f,onEdgeClick:_,onNodeMouseEnter:$,onNodeMouseMove:V,onNodeMouseLeave:j,onNodeContextMenu:Y,onNodeDoubleClick:H,nodeTypes:l,edgeTypes:d,connectionLineType:Q,connectionLineStyle:re,connectionLineComponent:le,connectionLineContainerStyle:ye,selectionKeyCode:Re,selectionOnDrag:Pe,selectionMode:Ze,deleteKeyCode:ge,multiSelectionKeyCode:bt,panActivationKeyCode:Qe,zoomActivationKeyCode:at,onlyRenderVisibleElements:wo,selectNodesOnDrag:ao,defaultViewport:ka,translateExtent:wa,minZoom:Sa,maxZoom:hi,preventScrolling:os,zoomOnScroll:Ea,zoomOnPinch:mc,zoomOnDoubleClick:ss,panOnScroll:hn,panOnScrollSpeed:Wo,panOnScrollMode:rs,panOnDrag:Ia,onPaneClick:Zo,onPaneMouseEnter:as,onPaneMouseMove:cf,onPaneMouseLeave:uf,onPaneScroll:_c,onPaneContextMenu:df,onSelectionContextMenu:z,onSelectionStart:K,onSelectionEnd:se,onEdgeContextMenu:ls,onEdgeDoubleClick:Ay,onEdgeMouseEnter:Ry,onEdgeMouseMove:Fy,onEdgeMouseLeave:My,onReconnect:Dy??jy,onReconnectStart:Vy??$y,onReconnectEnd:Oy??Gy,reconnectRadius:zy??By,defaultMarkerColor:Na,noDragClassName:Xy,noWheelClassName:Yy,noPanClassName:bm,elevateEdgesOnSelect:Qy,rfId:pf,disableKeyboardA11y:xm,nodeOrigin:ke,nodeExtent:is}),k.createElement(lc,{nodes:t,edges:r,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:I,onConnectEnd:T,onClickConnectStart:R,onClickConnectEnd:E,nodesDraggable:Bt,nodesConnectable:Uo,nodesFocusable:lt,edgesFocusable:Xn,edgesUpdatable:ns,elementsSelectable:fc,elevateNodesOnSelect:qy,minZoom:Sa,maxZoom:hi,nodeExtent:is,onNodesChange:Ly,onEdgesChange:Py,snapToGrid:So,snapGrid:so,connectionMode:B,translateExtent:wa,connectOnClick:Wy,defaultEdgeOptions:Ky,fitView:Hy,fitViewOptions:Uy,onNodesDelete:ce,onEdgesDelete:ie,onNodeDragStart:X,onNodeDrag:ee,onNodeDragStop:U,onSelectionDrag:w,onSelectionDragStart:ae,onSelectionDragStop:P,noPanClassName:bm,nodeOrigin:ke,rfId:pf,autoPanOnConnect:eb,autoPanOnNodeDrag:tb,onError:ib,connectionRadius:nb,isValidConnection:ob,nodeDragThreshold:sb}),k.createElement(Xo,{onSelectionChange:ue}),ym,k.createElement(Jl,{proOptions:Jy,position:Zy}),k.createElement(ma,{rfId:pf,disableKeyboardA11y:xm})))});function Rf(t){return r=>{const[n,i]=(0,k.useState)(r),s=(0,k.useCallback)(l=>i(d=>t(l,d)),[]);return[n,i,s]}}Af.displayName="ReactFlow",Rf(_e),Rf(pt);var Qr=pe(1810),g_=pe(3726),Ff=pe(8405);const v_=["editorContainer"];let jf,Mf=!1,y_=(()=>{var t;class r{set insideNg(i){this._insideNg=i,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(i){(0,m.A)(this,"config",void 0),(0,m.A)(this,"_editorContainer",void 0),(0,m.A)(this,"onInit",new e.bkB),(0,m.A)(this,"_editor",void 0),(0,m.A)(this,"_options",void 0),(0,m.A)(this,"_autoHeight",!1),(0,m.A)(this,"_height",200),(0,m.A)(this,"_windowResizeSubscription",void 0),(0,m.A)(this,"_insideNg",!1),this.config=i}ngAfterViewInit(){Mf?jf.then(()=>{this.initMonaco(this._options,this.insideNg)}):(Mf=!0,jf=new Promise(i=>{const s=this.config.baseUrl??"./assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void i();const l=d=>{let f=d||window.require,_={paths:{vs:`${s}/monaco/min/vs`}};Object.assign(_,this.config.requireConfig??{}),f.config(_),f(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),i()})};if(this.config.monacoRequire)l(this.config.monacoRequire);else if(window.require)if(window.require.config)l();else{let d=`${s}/monaco/min/vs/loader.js`,f=new XMLHttpRequest;f.addEventListener("load",()=>{let _=document.createElement("script");_.type="text/javascript",_.text=["var nodeRequire = require;",f.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join("\n"),document.body.appendChild(_),l(window.monacoAmdRequire)}),f.open("GET",d),f.send()}else{const d=document.createElement("script");d.type="text/javascript",d.src=`${s}/monaco/min/vs/loader.js`,d.addEventListener("load",()=>{l()}),document.body.appendChild(d)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Ff.R))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(i,s){if(1&i&&e.GBs(v_,7),2&i){let l;e.mGM(l=e.lsd())&&(s._editorContainer=l.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(i,s){},encapsulation:2})),r})();class ht{static renderMathInElement(r){MathJax.typesetPromise([r]).then(()=>{})}static markdownToHtml(r){let n=document.createElement("div");n.innerHTML=r;let i=new showdown.Converter({headerLevelStart:3,tables:!0});return MathJax.typesetPromise([n]).then(()=>{}),i.makeHtml(n.innerHTML)}static parseIncompleteJson(r){if(!r||""==r.trim()||!/^[{[].*/.test(r.trim()))return r;r.startsWith("```json")&&(r=r.substring(7).trim()),r.endsWith("```")&&(r=r.substring(0,r.length-3));try{return JSON.parse(r)}catch{}r.endsWith(",")&&(r=r.substring(0,r.length-1));let n=[],i=['"',"[","{"],s=['"',"]","}"];for(let l=0;l<r.length;l++){if(l>0&&"\\"==r.charAt(l-1))continue;let f=r.charAt(l);if('"'==n[n.length-1]){'"'==f&&n.splice(n.length-1);continue}if(i.includes(f)){n.push(f);continue}let _=s.indexOf(f);_>=0&&n[n.length-1]==i[_]&&n.splice(n.length-1)}if(n.length>0)for(let l=n.length-1;l>=0;l--)r+=s[i.indexOf(n[l])];try{return JSON.parse(r)}catch{}return null}static fileToBase64(r){return new Promise((n,i)=>{const s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=()=>{i(new Error("Failed to convert file to Base64."))},s.readAsDataURL(r)})}static base64ToObjectURL(r,n){const i=atob(r),s=[];for(let d=0;d<i.length;d+=512){const f=i.slice(d,d+512),_=new Array(f.length);for(let v=0;v<f.length;v++)_[v]=f.charCodeAt(v);const g=new Uint8Array(_);s.push(g)}const l=new Blob(s,{type:n});return URL.createObjectURL(l)}static distinctArray(r){return Array.from(new Set(r))}static getTextFromMarkdown(r){return r.replace(/(?:__|[*#])|\[(.*?)\]\(.*?\)|<[^>]*>/g,"$1").replace(/\n+/g," ").trim()}static getFileExt(r){let n=r.split(".");return n.length>1?n[n.length-1].trim().toLowerCase():""}static isImageFile(r){if(!r)return!1;const i=r.slice((Math.max(0,r.lastIndexOf("."))||1/0)+1).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff"].includes(`.${i}`)}static parseJson(r){return JSON.parse(r.replaceAll(/},\s*]/g,"}]"))}static minusToCamelCase(r){return r.replace(/-([a-z0-9])/g,(n,i)=>i.toUpperCase())}static replaceAllBase64Urls(r,n=""){return r.replace(/data:(?:image\/\w+|audio\/\w+|video\/\w+);base64,[\w\+/0-9]+(?:=[\w\+/0-9]{2})?(?:=[\w\+/0-9])?/,n)}static loadScript(r){return new Promise((n,i)=>{const s=document.createElement("script");s.src=r,s.type="text/javascript",s.async=!0,s.onload=()=>{n()},s.onerror=l=>{console.error(`Failed to load script from ${r}`,l),i(new Error(`Script load error: ${r}`))},document.head.appendChild(s)})}static downloadTextAsFile(r,n){const i=n??this.getFormattedDate(),s=new Blob([r],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download=i,document.body.appendChild(l),l.click(),document.body.removeChild(l)}static uploadTextFile(r){const n=document.createElement("input");n.type="file",n.accept=".txt",n.addEventListener("change",i=>{const s=i.target;if(!s.files||0===s.files.length)return;const l=s.files[0],d=new FileReader;d.onload=f=>{const _=f.target?.result;r(_)},d.readAsText(l)}),n.click()}static getFormattedDate(){const r=new Date;return`${String(r.getDate()).padStart(2,"0")}-${String(r.getMonth()+1).padStart(2,"0")}-${r.getFullYear()}-${String(r.getHours()).padStart(2,"0")}-${String(r.getMinutes()).padStart(2,"0")}.txt`}static wrapWords(r,n){const i=r.split(" ");let s="",l=0;return i.forEach((d,f)=>{s+=d+" ",l++,l===n&&(s+="\n",l=0)}),s.trim()}static zipFiles(r,n,i){var s=this;return(0,Ce.A)(function*(){const l=new JSZip;let d=0;for(const _ of r){if(_.isText)l.file(_.filename,_.url);else{const v=(yield s.fetchUrlAsBase64(_.url)).split(",")[1];l.file(_.filename,v,{base64:!0})}d++,i&&i(d)}return yield l.generateAsync({type:"blob"})})()}static fetchUrlAsBase64(r){return(0,Ce.A)(function*(){const i=yield(yield fetch(r)).blob();return new Promise((s,l)=>{const d=new FileReader;d.onloadend=()=>s(d.result),d.onerror=l,d.readAsDataURL(i)})})()}static urlToFile(r,n){var i=this;return(0,Ce.A)(function*(){let l=(yield i.fetchUrlAsBase64(r)).split(",")[1];const d=atob(l);let f=d.length;const _=new Uint8Array(f);for(;f--;)_[f]=d.charCodeAt(f);let g=ht.getContentType(n);return new File([_],n,{type:g})})()}static getContentType(r){const n=r.split(".").pop()?.toLowerCase();return n?{txt:"text/plain",script:"text/json",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",mp3:"audio/mpeg",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",zip:"application/zip",rar:"application/x-rar-compressed"}[n]:void 0}static convertToTitleCase(r){return r.toLowerCase().replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}static toCamelCase(r){return r.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(n,i)=>0===i?n.toLowerCase():n.toUpperCase()).replace(/[^a-zA-Z0-9]+/g,"")}static createDemoDataForJsonSchema(r){return function i(s){switch(s.type){case"string":return"demo string";case"number":return 42;case"boolean":return!0;case"object":const l={};if(s.properties)for(const d in s.properties)l[d]=i(s.properties[d]);return l;case"array":return[i(s.items)];default:return null}}(JSON.parse(r))}static compileTemplate(r,n){let i=r;const s=[...i.matchAll(/\$\(([a-zA-Z]+):([^\$]+)\)\$/g)],l=[];for(const b of s){i=i.replaceAll(b[0],"").trim();const C=b[2].split("|").map(x=>this.compileTemplate(x.trim(),n));for(let x=0;x<C[0].length;x++){const I=[],T=[];for(const R of C)T.push(R[x]);I.push(b[1].trim()),I.push(...T),l.push(I)}}i=i.replaceAll(/\*for="([a-zA-Z0-9_-]+) of \{([a-zA-Z0-9._-]+)\}"/g,'id="sys___loop-node" data-for="$2=>$1"'),i=i.replaceAll(/\*for="([a-zA-Z0-9_-]+) of ([a-zA-Z0-9._-]+)"/g,'id="sys___loop-node" data-for="$2=>$1"');let d=document.createElement("div");for(d.innerHTML=i;;){let b=d.querySelector("#sys___loop-node");if(!b)break;let C=b.getAttribute("data-for").split("=>");b.removeAttribute("data-for"),b.removeAttribute("id");let x=C[0],I=C[1],T=C[0].split("."),R=[];if(1==T.length)R=JSON.parse(n.get(C[0])??"[]");else{let H=JSON.parse(n.get(T[0]));for(var f=1;f<T.length;f++)H=H[T[f]];R=H??[]}let E=b.parentNode,$=b.outerHTML,V=$.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),j=[];for(let H of V)j.push(H[1]);let Y=-1;for(let H of R){Y++;let X=$;for(let U of j){if("index"==U){X=X.replaceAll("{index}",Y+"");continue}let ie,ce=U.split(".");for(let ue of ce){if(!ie&&ue==C[1]){ie=H;continue}let ae=!1;ue.endsWith("[index]")&&(ue=ue.split("[")[0],ae=!0),ie&&(ie=ie[ue]),ie&&ae&&(ie=ie[Y])}ie||(ie=""),X=X.replaceAll(`{${U}}`,ie)}X=X.replaceAll("[index]",`[${Y}]`),X=X.replaceAll(`[${I}]`,`${x}[${Y}]`);let ee=document.createElement("div");ee.innerHTML=X,E?.insertBefore(ee.firstChild,b)}E?.removeChild(b)}let _=d.innerHTML,g=_.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),v=[];for(let b of g)v.push(b[1]);for(let b of v){let C=b.split(".");if(C.length>1){let x=JSON.parse(n.get(C[0])),I=0;for(let T of C)0!=I?(x=x[T],I++):I++;_=_.replaceAll(`{${b}}`,x??"")}else _=_.replaceAll(`{${b}}`,n.get(C[0])??"")}for(const b of l)"replace"===b[0]&&(_=_.replaceAll(b[1],b[2]));return _}static extractProperties(r,n){return r?Object.keys(r).flatMap(i=>{const s=r[i],l=Array.isArray(s)?"array":typeof s,d={name:i,type:l,level:n};return"object"!==l||null===s||Array.isArray(s)?[d]:[d,...this.extractProperties(s,n+1)]}):[]}}class $f{static init(r){r.languages.register({id:"demo"}),r.languages.setMonarchTokensProvider("demo",{tokenizer:{root:[[/\{([\[\]a-zA-Z0-9|#$._-]+)\}/,"custom-var"],[/"[^"]+"/,"custom-string"],[/'[^']+'/,"custom-string"],[/`[^`]+`/,"custom-string"],[/^\*\*[A-Z_]+:\s*$/,"custom-keyword"],[/^##.*/,"custom-bold"]]}}),r.languages.setLanguageConfiguration("demo",{brackets:[["{","}"]]}),r.editor.defineTheme("myCoolTheme",{base:"vs",inherit:!0,rules:[{token:"custom-var",foreground:"a31515"},{token:"custom-string",foreground:"a31515"},{token:"custom-keyword",foreground:"516eff"},{token:"custom-bold",fontStyle:"bold"}],colors:{"editor.foreground":"#000000"}}),r.languages.registerDocumentRangeFormattingEditProvider("demo",{provideDocumentRangeFormattingEdits:function(n,i){const s=n.getValueInRange(i);return[{range:i,text:JSON.stringify(JSON.parse(s),void 0,4)}]}})}static initSuggestion(r,n,i){r.languages.registerCompletionItemProvider(n,{triggerCharacters:["."],provideCompletionItems:(s,l)=>{let d=s.getWordUntilPosition(l),_=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}).split("\n"),g=_.filter(R=>R.indexOf('*for="')>=0),v=g.length>0?g[g.length-1]:"",b=_[_.length-1].split(/[^_#$\[\].0-9a-zA-Z-]/g),C=b[b.length-1].replaceAll("{","").replaceAll("}",""),x={startLineNumber:l.lineNumber,endLineNumber:l.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn},I=C.split("."),T=[];if(1==I.length){if(T=i.map(R=>({label:R.name,kind:r.languages.CompletionItemKind.Text,insertText:R.name,range:x})),v){let R=v.split('*for="')[1].split(" "),E="let"==R[0]?R[1]:R[0];T.push({label:E,kind:r.languages.CompletionItemKind.Text,insertText:E,range:x})}}else{if(v){let E=v.split('*for="')[1].split(" of ")[1].split('"')[0].replaceAll("{","").replaceAll("}","").trim(),$=v.split('*for="')[1].split(" "),V="let"==$[0]?$[1]:$[0];if(I[0].trim()==V.trim()){let j=[...E.split(".")];I.splice(0,1),j.push(...I),I=j}}let R=i.find(E=>E.name==I[0]);if(R&&"json"==R.type){let E=JSON.parse(R.demo);for(let V=1;V<I.length-1;V++)E=E[I[V]];T=ht.extractProperties(E,1).map(V=>({label:V.name,kind:r.languages.CompletionItemKind.Text,insertText:V.name,range:x}))}}return{suggestions:ht.distinctArray(T)}}})}}let nf=(()=>{var t;class r extends y_{set options(i){this._options={...this.config.defaultOptions,...i},this._editor&&(this._editor.dispose(),this.initMonaco(i,this.insideNg))}set autoHeight(i){this._autoHeight=i}set height(i){this._height=i}get options(){return this._options}set model(i){this.options.model=i,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(i,s){super(s),(0,m.A)(this,"zone",void 0),(0,m.A)(this,"editorConfig",void 0),(0,m.A)(this,"_value",""),(0,m.A)(this,"propagateChange",l=>{}),(0,m.A)(this,"onTouched",()=>{}),(0,m.A)(this,"resizeObserver",new ResizeObserver(()=>{this._editor&&this._editor.layout()})),(0,m.A)(this,"vars",[]),(0,m.A)(this,"onChange",new e.bkB),(0,m.A)(this,"onFocus",new e.bkB),this.zone=i,this.editorConfig=s}writeValue(i){this._value=i||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}formatCode(){this._editor.getAction("editor.action.formatDocument").run()}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){this.onTouched=i}focus(){this._editor?.focus()}insertText(i){this._editor.executeEdits("my-source",[{range:this._editor.getSelection(),text:i}])}getSelected(){let i=this._editor.getSelection();return this._editor.getModel().getValueInRange(i)}initMonaco(i,s){0==monaco.languages.getLanguages().filter(d=>"demo"==d.id).length&&$f.init(monaco),this.vars.length>0&&$f.initSuggestion(monaco,this.options.language,this.vars);const l=!!i.model;if(l){const d=monaco.editor.getModel(i.model.uri||"");d?(i.model=d,i.model.setValue(this._value)):i.model=monaco.editor.createModel(i.model.value,i.model.language,i.model.uri)}this._editorContainer&&(this._editorContainer.nativeElement.parentNode.style.height=this._height+"px"),s?this._editor=monaco.editor.create(this._editorContainer?.nativeElement,i):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer?.nativeElement,i)}),l||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(d=>{const f=this._editor.getValue();this.zone.run(()=>{this.propagateChange(f),this._value=f,this.onChange.emit(f)})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._editor.onDidFocusEditorText(()=>{this.onFocus.emit(this)}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,g_.R)(window,"resize").subscribe(()=>this._editor.layout()),this.resizeObserver.observe(this._editorContainer?.nativeElement),this._editor.onDidContentSizeChange(d=>{let f=Math.max(this._height,d.contentHeight);this._editorContainer&&this._autoHeight&&(this._editorContainer.nativeElement.parentNode.style.height=f+15+"px")}),setTimeout(()=>{this._editor.focus(),this._editor.setPosition({column:1,lineNumber:2})},200),this.onInit.emit(this._editor)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(Ff.R))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",autoHeight:"autoHeight",height:"height",model:"model",vars:"vars"},outputs:{onChange:"onChange",onFocus:"onFocus"},features:[e.Jv_([{provide:N.kq,useExisting:(0,e.Rfq)(()=>t),multi:!0}]),e.Vt3],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(i,s){1&i&&e.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]})),r})(),b_=(()=>{var t;class r{constructor(){(0,m.A)(this,"data",""),(0,m.A)(this,"editorConf",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0}),(0,m.A)(this,"onChange",new e.bkB)}change(){this.onChange.emit(this.data)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-json-editor"]],inputs:{data:"data"},outputs:{onChange:"onChange"},standalone:!0,features:[e.aNF],decls:3,vars:4,consts:[["editor",""],[1,"card","shadow-none","bg-transparent","border","border-label-secondary","ps-0","pt-4","pe-4","pb-4"],[1,"my-code-editor",3,"onChange","ngModelChange","height","autoHeight","options","ngModel"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div",1)(1,"ngx-monaco-editor",2,0),e.bIt("onChange",function(){return e.eBV(l),e.Njj(s.change())}),e.mxI("ngModelChange",function(f){return e.eBV(l),e.DH7(s.data,f)||(s.data=f),e.Njj(f)}),e.k0s()()}2&i&&(e.R7$(),e.Y8G("height",200)("autoHeight",!0)("options",s.editorConf),e.R50("ngModel",s.data))},dependencies:[Qr.V,nf,L.MD,N.YN,N.BC,N.vS]})),r})();var Gf=pe(345);let Df=(()=>{var t;class r{constructor(i){(0,m.A)(this,"sanitized",void 0),this.sanitized=i}transform(i){return this.sanitized.bypassSecurityTrustHtml(i)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Gf.up,16))}),(0,m.A)(r,"\u0275pipe",e.EJ8({name:"safeHtml",type:t,pure:!0,standalone:!0})),r})(),Zt=(()=>{var t;class r{constructor(i){(0,m.A)(this,"sanitized",void 0),this.sanitized=i}transform(i,s,l){if(!i)return i;let d=s??200;if(i.length<d)return i;let f=i;return l&&(f=f.replaceAll(l,"")),f.substring(0,d)+"..."}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Gf.up,16))}),(0,m.A)(r,"\u0275pipe",e.EJ8({name:"trunc",type:t,pure:!0,standalone:!0})),r})(),x_=(()=>{var t;class r{transform(i){if(isNaN(i)||i<0)return"00:00";i=Math.round(i);const s=Math.floor(i/60),l=i%60;return`${s<10?"0"+s:s.toString()}:${l<10?"0"+l:l.toString()}`}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275pipe",e.EJ8({name:"secondsToTime",type:t,pure:!0,standalone:!0})),r})();var C_=pe(2663);function of(t){if(!rf(t))throw new Error("Parameter was not an error")}function rf(t){return!!t&&"object"==typeof t&&"[object Error]"===function k_(t){return Object.prototype.toString.call(t)}(t)||t instanceof Error}class Yo extends Error{constructor(r,n){const i=[...arguments],{options:s,shortMessage:l}=function w_(t){let r,n="";if(0===t.length)r={};else if(rf(t[0]))r={cause:t[0]},n=t.slice(1).join(" ")||"";else if(t[0]&&"object"==typeof t[0])r=Object.assign({},t[0]),n=t.slice(1).join(" ")||"";else{if("string"!=typeof t[0])throw new Error("Invalid arguments passed to Layerr");r={},n=n=t.join(" ")||""}return{options:r,shortMessage:n}}(i);let d=l;s.cause&&(d=`${d}: ${s.cause.message}`),super(d),this.message=d,this.name=s.name&&"string"==typeof s.name?s.name:"Layerr",s.cause&&Object.defineProperty(this,"_cause",{value:s.cause}),Object.defineProperty(this,"_info",{value:{}}),s.info&&"object"==typeof s.info&&Object.assign(this._info,s.info),Error.captureStackTrace&&Error.captureStackTrace(this,s.constructorOpt||this.constructor)}static cause(r){return of(r),r._cause&&rf(r._cause)?r._cause:null}static fullStack(r){of(r);const n=Yo.cause(r);return n?`${r.stack}\ncaused by: ${Yo.fullStack(n)}`:r.stack??""}static info(r){of(r);const n={},i=Yo.cause(r);return i&&Object.assign(n,Yo.info(i)),r._info&&Object.assign(n,r._info),n}toString(){let r=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(r=`${r}: ${this.message}`),r}}const es="0123456789ABCDEFGHJKMNPQRSTVWXYZ",ts=32,sf=0xffffffffffff,ro=Object.freeze({source:"ulid"});function M_(t){let r=Math.floor(t()*ts);return r===ts&&(r=ts-1),es.charAt(r)}var $_=pe(4412);let G_=(()=>{var t;class r extends $_.t{constructor(){super("light"),this.subscribe(i=>{!i||"undefined"==i||(document.body.classList.contains("dark")&&"light"==i&&document.body.classList.remove("dark"),document.body.classList.contains("light")&&"dark"==i&&document.body.classList.remove("light"),document.body.classList.add(i))})}setTheme(i){this.next(i)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Xf=(()=>{var t;class r{constructor(i,s,l){(0,m.A)(this,"ngContainer",void 0),(0,m.A)(this,"ngTheme",void 0),(0,m.A)(this,"ngZone",void 0),(0,m.A)(this,"ngReactComponent",void 0),(0,m.A)(this,"_root",void 0),(0,m.A)(this,"theme",void 0),(0,m.A)(this,"ngSubscriptions",void 0),this.ngContainer=i,this.ngTheme=s,this.ngZone=l,this.ngSubscriptions=[this.ngTheme.subscribe(d=>{this.theme=d,this.ngOnChanges()})]}ngOnInit(){if(!this.ngReactComponent)throw console.error("NO"),new Error("ReactMagicWrapperComponent cannot start without a provided ngReactComponent!")}ngOnChanges(i){this._render()}ngAfterViewInit(){this._render()}ngOnDestroy(){this._root.unmount(),this.ngSubscriptions.forEach(i=>i.unsubscribe())}_render(){this.ngReactComponent?this.ngZone.runOutsideAngular(()=>{try{this._root||(this._root=(0,C_.H)(this.ngContainer.element.nativeElement));const i=Object.keys(this).filter(f=>!/^(?:_|ng)/.test(f)),s=i.filter(f=>!f.startsWith("on")),l=i.filter(f=>f.startsWith("on")),d={};s.forEach(f=>d[f]=this[f]),this.ngZone.runGuarded(()=>{l.forEach(f=>d[f]=(..._)=>this[f].next(_))}),this._root.render(k.createElement(this.ngReactComponent,{props:d}))}catch(i){console.error(i)}}):console.log("Render no component. May be context issue")}}return t=r,(0,m.A)(r,"WrapAngularComponent",({component:n,appRef:i,injector:s,ngZone:l,staticInputs:d,staticOutputs:f,additionalChildren:_})=>k.memo(g=>{const v=function j_(t,r){const n=r||function Bf(t){const r=t||function A_(){return function F_(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}(),n=r&&(r.crypto||r.msCrypto)||null;if("function"==typeof n?.getRandomValues)return()=>{const i=new Uint8Array(1);return n.getRandomValues(i),i[0]/255};if("function"==typeof n?.randomBytes)return()=>n.randomBytes(1).readUInt8()/255;throw new Yo({info:{code:"PRNG_DETECT",...ro}},"Failed to find a reliable PRNG")}();return function af(t,r){if(isNaN(t))throw new Yo({info:{code:"ENC_TIME_NAN",...ro}},`Time must be a number: ${t}`);if(t>sf)throw new Yo({info:{code:"ENC_TIME_SIZE_EXCEED",...ro}},`Cannot encode a time larger than ${sf}: ${t}`);if(t<0)throw new Yo({info:{code:"ENC_TIME_NEG",...ro}},`Time must be positive: ${t}`);if(!1===Number.isInteger(t))throw new Yo({info:{code:"ENC_TIME_TYPE",...ro}},`Time must be an integer: ${t}`);let n,i="";for(let s=r;s>0;s--)n=t%ts,i=es.charAt(n)+i,t=(t-n)/ts;return i}(isNaN(t)?Date.now():t,10)+function Lf(t,r){let n="";for(;t>0;t--)n=M_(r)+n;return n}(16,n)}();return k.useEffect(()=>{try{const b=(0,e.a0P)(n,{environmentInjector:i.injector,elementInjector:s,hostElement:document.getElementById(v)??void 0});i.attachView(b.hostView),Object.assign(d,g);const{inputs:C,outputs:x}=n.\u0275cmp;Object.entries(C).filter(([$,V])=>b.instance[V]!=d[$]).forEach(([$,V])=>{d.hasOwnProperty($)&&(b.instance[V]=d[$])});const T={};Object.entries(x).filter(([$,V])=>!T[$]).forEach(([$,V])=>{if(!f.hasOwnProperty($))return;const Y=f,H=b.instance[V].subscribe((...X)=>{l.run(()=>{Y[$](...X)})});T[$]=H});const E=b.onDestroy?.bind(b);b.onDestroy=$=>{Object.values(T).forEach(V=>V.unsubscribe()),E?.($)},b.changeDetectorRef.detectChanges()}catch(b){console.error(b)}},[]),k.createElement("div",{},k.createElement("div",{id:v}),..._)})),(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.c1b),e.rXU(G_),e.rXU(e.SKi))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-react-magic-wrapper"]],standalone:!0,features:[e.OA$,e.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2})),r})(),rn=(()=>{var t;class r{set data(i){this.nodeData=i}noticeUpdate(){this.updateOutput(),this.onDataChange.emit(this.nodeData)}constructor(i,s){(0,m.A)(this,"ngZone",void 0),(0,m.A)(this,"appService",void 0),(0,m.A)(this,"nodeData",void 0),(0,m.A)(this,"id",""),(0,m.A)(this,"displayName",void 0),(0,m.A)(this,"type","base"),(0,m.A)(this,"desc",""),(0,m.A)(this,"err",""),(0,m.A)(this,"mode",""),(0,m.A)(this,"onDataChange",new e.bkB),(0,m.A)(this,"settingConf",void 0),this.ngZone=i,this.appService=s}ngOnInit(){this.updateOutput()}ngDoCheck(){}ngAfterViewInit(){let i=document.getElementById("settingModal-"+this.id);i&&(i.parentNode?.removeChild(i),document.body.appendChild(i),this.upgradeConf())}upgradeConf(){let i=this.getConfig();for(let s of i){let l=this.nodeData.conf.find(d=>d.key==s.key);l&&(s.value=l.value)}this.nodeData.conf=i}updateOutput(){}focusSettingModal(){let i=document.getElementById("settingModal-"+this.id);i&&i.querySelector(".form-control")?.focus()}openSetting(i){this.ngZone?.run(()=>{i&&(this.settingConf=this.nodeData.conf.filter(l=>l.key==i)[0]??{key:i,value:""})});let s=document.getElementById("btnShowModal-"+this.id);if(s){let l=s.getAttribute("data-bs-target")?.substring(1)??"",d=document.getElementById(l);d&&(d.querySelectorAll(".content").forEach(f=>{f.classList.remove("content")}),setTimeout(()=>{d.querySelectorAll('[data-bs-dismiss="modal"]').forEach(f=>{f.addEventListener("click",()=>{d.classList.remove("show")})})},400),d.classList.add("show")),s.click(),setTimeout(()=>{this.focusSettingModal()},400)}}closeSetting(){this.settingConf=void 0}getClassType(){return r}build(i,s,l,d){return Xf.WrapAngularComponent({component:this.getClassType(),appRef:i,injector:s,ngZone:l,staticInputs:{},staticOutputs:{onDataChange:f=>{d(f)}},additionalChildren:[k.createElement(Pn,{type:"target",position:ve.Left}),k.createElement(Pn,{type:"source",position:ve.Right})]})}getConfig(){return[]}setConfig(i,s){let l=this.nodeData.conf.filter(d=>d.key==i)[0];l?l.value=s:this.nodeData.conf.push({key:i,value:s}),this.noticeUpdate()}findConfig(i,s){return s||(s=this.nodeData),s.conf.filter(d=>d.key==i)[0]?.value??""}getNodeSpec(){return{id:"",type:this.type,desc:this.desc,displayName:this.displayName,conf:this.getConfig(),links:[],inputs:[],outputs:[]}}run(i,s,l,d,f,_){_(new Map)}parseTempate(i,s){let l=i.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g);for(let d of l){let f=s.get(d[1]);f?"string"==typeof f?i=i.replaceAll(d[0],f??""):f instanceof File&&(i=i.replaceAll(d[0],"Filename: "+f.name)):i=i.replaceAll(d[0],"")}return i}setupOutputValue(i,s){let l=new Map;for(let d of s.outputs)l.set(d.name,i);return l}showAddCollectionModal(){document.getElementById("btnShowAddCollectionModal")?.click()}showAddVCollectionModal(){document.getElementById("btnShowAddVCollectionModal")?.click()}showAddApiModal(){document.getElementById("btnShowAddApiModal")?.click()}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(je))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-base-node"]],inputs:{data:"data",id:"id",mode:"mode"},outputs:{onDataChange:"onDataChange"},standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(i,s){}})),r})();class D_{onMsgUpdate(r,n){}onDone(r){}onMsgAdd(r){}onClear(){}onFunctionCall(r,n){}onBeforeSend(){}onSend(){}}class Md extends D_{constructor(r,n,i,s){super(),(0,m.A)(this,"onUpdate",void 0),(0,m.A)(this,"done",void 0),(0,m.A)(this,"beforeSend",void 0),(0,m.A)(this,"functionCall",void 0),this.onUpdate=r,this.done=n,this.beforeSend=i,this.functionCall=s}onFunctionCall(r,n){this.functionCall&&this.functionCall(r,n)}onMsgUpdate(r,n){this.onUpdate&&this.onUpdate(r,n)}onDone(r){this.done&&this.done(r)}onBeforeSend(){this.beforeSend&&this.beforeSend()}}class jd{constructor(r,n,i){(0,m.A)(this,"api",void 0),(0,m.A)(this,"callback",void 0),(0,m.A)(this,"memType",void 0),(0,m.A)(this,"agentType",{name:"default",placeholder:"Enter your message..."}),(0,m.A)(this,"aiVars",[]),(0,m.A)(this,"lstMessage",[]),this.api=r,this.callback=n,this.memType=i}setMemType(r){this.memType=r}setCallback(r){this.callback=r}send(){this.callback?.onBeforeSend(),this.api.live({name:this.agentType.name,messages:this.lstMessage,vars:this.aiVars,type:this.memType}).subscribe(r=>{this.callback?.onSend();let n=r.data,i="",s="",l={Role:"assistant",Content:""};this.addMessage(l),this.api.stream(n,d=>{if(i+=d.Content??"",l.Content=i,d.ToolCalls){l.ToolCalls||(l.ToolCalls=[]);for(let _ of d.ToolCalls){let g=+(_.Type??"0"),v=l.ToolCalls[g];v?v.FunctionCall.Arguments+=_.FunctionCall.Arguments:(l.ToolCalls[g]=_,l.Generating=!0)}}let f=i.replace(s,"");this.noticeUpdate(i,f),s=i,l.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!0)},d=>{""==d&&(l.Generating=!1,l.Content=i,this.callback?.onDone(i),this.getLastMessage()?.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!1),console.log(this.lstMessage))})})}reSend(){this.removeLastMessage(),this.send()}addMessage(r){this.lstMessage.push(r),this.callback?.onMsgAdd(r)}addUserMessage(r,n){let i=[];n&&(i.push({Type:Cn.Text,Content:r}),i.push(...n.map(l=>({Type:Cn.ImageUrl,Content:l}))));let s=i.length>0?{Role:"user",Contents:i,Content:r}:{Role:"user",Content:r};this.lstMessage.push(s),this.callback?.onMsgAdd(s)}addToolMessage(r,n){let i={Role:"tool",ToolCallId:r,Content:n};this.lstMessage.push(i),this.callback?.onMsgAdd(i)}addAssistantMessage(r){let n={Role:"assistant",Content:r};this.lstMessage.push(n),this.callback?.onMsgAdd(n)}getMessage(r){return this.lstMessage[r]}getLastMessage(){return this.lstMessage[this.lstMessage.length-1]}removeLastMessage(){this.lstMessage.length>0&&this.removeMessage(this.lstMessage.length-1)}clearChat(){this.lstMessage=[],this.callback?.onClear()}setVars(r){this.aiVars=r}getVars(){return this.aiVars}setAgent(r){this.agentType=r}setAgentName(r){this.agentType={name:r,placeholder:""}}getName(){return this.agentType.name}removeMessage(r){this.lstMessage.splice(r,1)}noticeUpdate(r,n){this.callback?.onMsgUpdate(r,n)}}const V_=[{name:"Markdown View",html:' bs-data="markdown-view"'},{name:"Loop",html:' *for="item of listVars"'},{name:"Selectable",html:' bs-select="img.src=>selectedImgs"'},{name:"Run JS",html:' bs-run="varName"'}],O_=["editor"];function z_(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertUserInterface(s))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.ZvI("bx bx-",n.icon," scaleX-n1-rtl me-2"),e.R7$(),e.SpI(" ",n.name," ")}}function B_(t,r){if(1&t&&(e.j41(0,"div",8)(1,"button",9),e.nrm(2,"span",21),e.EFF(3," User interface "),e.k0s(),e.j41(4,"mat-menu",null,3)(6,"div",11)(7,"ul",12),e.DNE(8,z_,4,4,"li",13),e.k0s()()()()),2&t){const n=e.sdS(5),i=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",i.userInterfaces)}}function L_(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertAttr(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function P_(t,r){if(1&t&&(e.j41(0,"div",8)(1,"button",9),e.nrm(2,"span",21),e.EFF(3," Html Attributes "),e.k0s(),e.j41(4,"mat-menu",null,4)(6,"div",11)(7,"ul",12),e.DNE(8,L_,3,1,"li",13),e.k0s()()()()),2&t){const n=e.sdS(5),i=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",i.htmlAttrs)}}function X_(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertInputVar(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(),e.ZvI("ms-",n.level," dropdown-item d-flex align-items-center"),e.FS9("title",n.demo),e.R7$(),e.SpI(" ",n.name," ")}}function Y_(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertKey(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.key," ")}}function H_(t,r){if(1&t&&(e.j41(0,"div",24),e.nrm(1,"div",25),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("innerHTML",n.inputStr,e.npT)}}function U_(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genWithAI())}),e.nrm(1,"i",27),e.EFF(2),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.isLoading),e.R7$(2),e.SpI(" ",n.isLoading?"Generating...":"Generate with AI"," ")}}let _n=(()=>{var t;class r extends Md{constructor(i,s,l){super(),(0,m.A)(this,"appService",void 0),(0,m.A)(this,"aiApi",void 0),(0,m.A)(this,"zone",void 0),(0,m.A)(this,"userInterfaces",[]),(0,m.A)(this,"htmlAttrs",V_),(0,m.A)(this,"editor",void 0),(0,m.A)(this,"onSave",new e.bkB),(0,m.A)(this,"inputStr",""),(0,m.A)(this,"vars",[]),(0,m.A)(this,"html",!1),(0,m.A)(this,"agentName",""),(0,m.A)(this,"editorConf",void 0),(0,m.A)(this,"varBtnLabel","Input Variables"),(0,m.A)(this,"onClose",new e.bkB),(0,m.A)(this,"isLoading",!1),(0,m.A)(this,"agentRunner",void 0),(0,m.A)(this,"queue",[]),(0,m.A)(this,"varFormat","{@@}"),(0,m.A)(this,"lstKeys",[]),(0,m.A)(this,"lstVars",[]),(0,m.A)(this,"textData",""),this.appService=i,this.aiApi=s,this.zone=l}save(){this.textData=this.inputStr,this.onSave.emit(this.inputStr)}close(){this.inputStr=this.textData,this.onClose.emit()}genWithAI(){if(!this.isLoading){if(this.isLoading=!0,this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr),this.inputStr="",this.html){let i=JSON.stringify(this.lstVars.map(s=>s.name.trim()));this.agentRunner.setVars(["vars::"+i])}this.agentRunner.send(),this.editor?.focus()}}onMsgUpdate(i,s){let l=s?s.length:0,d=0;for(;d<l;){const f=Math.floor(9*Math.random())+2,_=Math.floor(16*Math.random())+5;this.queue.push({str:s.substring(d,d+f),t:_}),0==d&&1==this.queue.length&&this.startInsertAnim(),d+=f}}startInsertAnim(){let i=this.queue.shift();i&&(this.editor?.insertText(i.str),setTimeout(()=>{this.startInsertAnim()},i.t))}onDone(i){this.zone.run(()=>{this.isLoading=!1})}insertInputVar(i){i.name.startsWith("*")?(this.editor?.insertText(i.demo),this.editor?.formatCode()):this.editor?.insertText(this.varFormat.replaceAll("@@",i.name)),this.editor?.focus()}insertAttr(i){this.editor?.insertText(i.html),this.editor?.focus()}insertKey(i){this.editor?.insertText("{"+i.key+"}"),this.editor?.focus()}insertUserInterface(i){this.editor?.insertText(i.html),this.editor?.focus()}loadConf(){this.appService.getConf("app-ui-interfaces").subscribe(i=>{let s=i.data.split("====");this.userInterfaces=[];for(let l of s){if(""==l.trim())continue;let d=l.trim().split("\n"),f=d[0],_=d[1];d.splice(0,2);let g=d.join("\n");this.userInterfaces.push({name:f,icon:_,html:g})}})}loadKeys(){this.appService?.listKeys().subscribe(i=>{this.lstKeys=i})}ngOnInit(){this.agentRunner=new jd(this.aiApi,this),this.agentRunner.setAgentName(this.agentName),this.loadConf(),this.loadKeys(),this.textData=this.inputStr,this.editorConf={theme:"myCoolTheme",language:this.html?"html":"demo",wordWrap:this.html?"off":"on",lineNumbers:this.html?"on":"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0};for(let i of this.vars){if(this.lstVars.push({name:i.name,level:0,demo:i.demo}),"json"==i.type){let l=ht.extractProperties(JSON.parse(i.demo),1);for(let d of l)this.lstVars.push({name:i.name+"."+d.name,level:d.level,demo:""})}i.type.endsWith("[]")&&this.lstVars.push({name:`*for="item of ${i.name}"`,level:0,demo:`<div class="box mb-3" *for="item of ${i.name}">\n    <div class="box-body">\n        <p class="box-text">\n            {item}\n        </p>\n    </div>\n</div>`})}}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(je),e.rXU(ct),e.rXU(e.SKi))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-input-format"]],viewQuery:function(i,s){if(1&i&&e.GBs(O_,5),2&i){let l;e.mGM(l=e.lsd())&&(s.editor=l.first)}},inputs:{inputStr:"inputStr",vars:"vars",html:"html",agentName:"agentName",varBtnLabel:"varBtnLabel",varFormat:"varFormat"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:17,consts:[["menu3",""],["menu4",""],["editor",""],["menu1",""],["menu2",""],[1,"row"],[1,"mb-3"],["class","btn-group me-3",4,"ngIf"],[1,"btn-group","me-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","p-0",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-18px","me-1"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","vars","height","autoHeight","options","ngModel"],["class","col-lg-4 p-3 bg-label-secondary rounded",4,"ngIf"],[1,"mt-3","text-end"],["type","button","class","btn btn-text-primary me-3","title","Enter what do you want your agent do and click this button",3,"disabled","click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"tf-icons","bx","bx-tv","bx-18px","me-1"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],["href","javascript:void(0);",3,"click","title"],[1,"col-lg-4","p-3","bg-label-secondary","rounded"],[3,"innerHTML"],["type","button","title","Enter what do you want your agent do and click this button",1,"btn","btn-text-primary","me-3",3,"click","disabled"],[1,"bx","bxs-magic-wand","me-2"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div")(1,"div",5)(2,"div")(3,"div",6),e.DNE(4,B_,9,2,"div",7)(5,P_,9,2,"div",7),e.j41(6,"div",8)(7,"button",9),e.nrm(8,"span",10),e.EFF(9),e.k0s(),e.j41(10,"mat-menu",null,0)(12,"div",11)(13,"ul",12),e.DNE(14,X_,3,5,"li",13),e.k0s()()()(),e.j41(15,"div",8)(16,"button",9),e.nrm(17,"span",10),e.EFF(18," Access Keys "),e.k0s(),e.j41(19,"mat-menu",null,1)(21,"div",11)(22,"ul",12),e.DNE(23,Y_,3,1,"li",13),e.k0s()()()()(),e.j41(24,"div",14)(25,"ngx-monaco-editor",15,2),e.mxI("ngModelChange",function(f){return e.eBV(l),e.DH7(s.inputStr,f)||(s.inputStr=f),e.Njj(f)}),e.k0s()()(),e.DNE(27,H_,2,1,"div",16),e.k0s(),e.j41(28,"div",17),e.DNE(29,U_,3,2,"button",18),e.j41(30,"button",19),e.bIt("click",function(){return e.eBV(l),e.Njj(s.close())}),e.EFF(31,"Close"),e.k0s(),e.j41(32,"button",20),e.bIt("click",function(){return e.eBV(l),e.Njj(s.save())}),e.EFF(33," Save "),e.k0s()()()}if(2&i){const l=e.sdS(11),d=e.sdS(20);e.R7$(2),e.ZvI("col-lg-",s.html?"8":"12",""),e.R7$(2),e.Y8G("ngIf",s.html),e.R7$(),e.Y8G("ngIf",s.html),e.R7$(2),e.Y8G("matMenuTriggerFor",l),e.R7$(2),e.SpI(" ",s.varBtnLabel," "),e.R7$(5),e.Y8G("ngForOf",s.lstVars),e.R7$(2),e.Y8G("matMenuTriggerFor",d),e.R7$(7),e.Y8G("ngForOf",s.lstKeys),e.R7$(2),e.Y8G("vars",s.vars)("height",450)("autoHeight",!0)("options",s.editorConf),e.R50("ngModel",s.inputStr),e.R7$(2),e.Y8G("ngIf",s.html),e.R7$(2),e.Y8G("ngIf",s.agentName)}},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.BC,N.vS,Qr.V,nf,Z.Cn,Z.kk,Z.Cp],styles:[".zoom-out-80[_ngcontent-%COMP%]{transform:scale(.8)}"]})),r})();function W_(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Z_(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function J_(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add url "),e.k0s()()}}function K_(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Url "),e.k0s(),e.DNE(3,Z_,3,5,"div",20)(4,J_,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function q_(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Q_(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add headers "),e.k0s()()}}function eh(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Headers "),e.k0s(),e.DNE(3,q_,3,5,"div",20)(4,Q_,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function th(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Method "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function nh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function oh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add body "),e.k0s()()}}function ih(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Request body "),e.k0s(),e.DNE(3,nh,3,5,"div",20)(4,oh,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function rh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function sh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add specs "),e.k0s()()}}function ah(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Response specs "),e.k0s(),e.DNE(3,rh,3,5,"div",20)(4,sh,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function lh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function ch(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function uh(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Check success "),e.k0s(),e.DNE(3,lh,3,5,"div",20)(4,ch,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function dh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function ph(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function fh(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat until "),e.k0s(),e.DNE(3,dh,3,5,"div",20)(4,ph,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function mh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat timeout (second) "),e.k0s(),e.j41(3,"input",26),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function _h(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,K_,5,2,"div",17)(2,eh,5,2,"div",17)(3,th,4,1,"div",17)(4,ih,5,2,"div",17)(5,ah,5,2,"div",17)(6,uh,5,2,"div",17)(7,fh,5,2,"div",17)(8,mh,4,1,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","headers"==n.key),e.R7$(),e.Y8G("ngIf","method"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key),e.R7$(),e.Y8G("ngIf","response"==n.key),e.R7$(),e.Y8G("ngIf","check"==n.key),e.R7$(),e.Y8G("ngIf","repeat"==n.key),e.R7$(),e.Y8G("ngIf","wait"==n.key)}}function hh(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function gh(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,hh,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function vh(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function yh(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function bh(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function xh(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Ch(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function kh(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Yf=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"headers",[{key:"User-Agent",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:127.0) Gecko/20100101 Firefox/127.0"},{key:"Cookie",value:""},{key:"Authorization",value:""}]),(0,m.A)(this,"type","apiInvoker"),(0,m.A)(this,"desc","Invoke external api")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"headers",value:this.headers.map(s=>s.key+": "+s.value).join("\n")},{key:"method",value:"POST"},{key:"body",value:""},{key:"check",value:""},{key:"repeat",value:""},{key:"wait",value:"180"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-data",type:"json",demo:"{}"}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}run(i,s,l,d,f,_){}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-api-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:23,vars:15,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Time in second",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,W_,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,_h,9,8,"div",5),e.k0s()(),e.DNE(8,gh,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,vh,1,2,"app-input-format",14)(18,yh,1,2,"app-input-format",14)(19,bh,1,2,"app-input-format",14)(20,xh,1,2,"app-input-format",14)(21,Ch,1,2,"app-input-format",14)(22,kh,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","headers"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","body"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","response"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","repeat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","check"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","url"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,Zt,_n]})),r})();function Sh(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function wh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Nh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Eh(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,wh,3,5,"div",21)(4,Nh,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Ih(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Th(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Voice Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.bIt("change",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.playAu(s))}),e.DNE(4,Ih,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.settings.value)}}function Ah(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",28),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",29),e.EFF(5,"tts-1"),e.k0s(),e.j41(6,"option",30),e.EFF(7,"tts-1-hd"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Rh(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Eh,5,2,"div",17)(2,Th,5,2,"div",18)(3,Ah,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","voice"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function Fh(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Mh(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Fh,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function jh(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Hf=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"settings",{key:"style",name:"Voice Style",value:["alloy","echo","fable","onyx","nova","shimmer"],default:"alloy",demo:["https://cdn.openai.com/API/docs/audio/alloy.wav","https://cdn.openai.com/API/docs/audio/echo.wav","https://cdn.openai.com/API/docs/audio/fable.wav","https://cdn.openai.com/API/docs/audio/onyx.wav","https://cdn.openai.com/API/docs/audio/nova.wav","https://cdn.openai.com/API/docs/audio/shimmer.wav"]}),(0,m.A)(this,"type","textToAudio"),(0,m.A)(this,"desc","Generate audio from text"),(0,m.A)(this,"currentAudio",void 0)}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"tts-1"},{key:"voice",value:this.settings.default}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-audio",type:"json",demo:'{"url": "", "duration": 5}'}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}playAu(i){let s=this.findConfig("voice"),l=this.settings.value.indexOf(s),d=this.settings.demo[l];this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(d),this.currentAudio.play().catch(f=>{console.error("Error playing audio:",f)})}run(i,s,l,d,f,_){}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-audio-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","tts-1"],["value","tts-1-hd"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Sh,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Rh,4,3,"div",5),e.k0s()(),e.DNE(8,Mh,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,jh,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,_n,Zt]})),r})();function $h(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Gh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Dh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Vh(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Gh,3,5,"div",21)(4,Dh,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Oh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",26),e.EFF(5,"text-embedding-3-small"),e.k0s(),e.j41(6,"option",27),e.EFF(7,"text-embedding-3-large"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function zh(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Vh,5,2,"div",17)(2,Oh,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function Bh(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Lh(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Bh,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Ph(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Uf=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","embedding"),(0,m.A)(this,"desc","Embedding data for symantic search")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"text-embedding-3-small"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-embeddingVector",type:"vector",demo:""},{name:this.id+"-content",type:"string",demo:""}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,f,_){}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-embedding-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","text-embedding-3-small"],["value","text-embedding-3-large"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,$h,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,zh,3,2,"div",5),e.k0s()(),e.DNE(8,Lh,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Ph,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Zt,_n]})),r})();class lf{readUrl(r){return new Promise(n=>{ht.urlToFile(r,"filename").then(i=>{let s=this.readFile(i);n(s)})})}}class Xh{constructor(r){(0,m.A)(this,"iamges",void 0),this.iamges=r}render(r){let n=r;for(let i of this.iamges){let s=i.cssStyle?i.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";n=n.replaceAll("[img:$"+i.id+"$]",`<img id="${i.id}" src="${i.link}" style="${s}">`)}return n}}class Yh{constructor(r,n=!1){(0,m.A)(this,"mathMap",void 0),(0,m.A)(this,"raw",void 0),this.mathMap=r,this.raw=n}render(r){let n=r,s=n.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let d=l.value[0],f=l.value[1],_=this.mathMap.get(f),g="";if(_){let v=this.isPureTextMathML(_.str);if(""!=v)g=v;else{const b=document.createElement("span");b.id=f,b.innerHTML=this.cleanMathML(_.str),this.raw&&_.raw&&b.setAttribute("data-azt-math-raw",_.raw),g=b.outerHTML}}n=n.replace(d,g)}return n}cleanMathML(r){let n=r;return n=n.replaceAll('display="block"',""),n=n.replaceAll(/<\?xml[^>]+\?>/g,""),n=n.replaceAll(/\s*xmlns="[^"]+"/g,""),n=n.replaceAll("\n",""),n}isPureTextMathML(r){let i=(new DOMParser).parseFromString(r,"application/xml");if(i.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let s=i.documentElement.children,l=["mi","mn","mo","ms","mspace","mtext"],d="";for(let _=0;_<s.length;_++){let g=s[_];if(l.indexOf(g.tagName.toLowerCase())<0)return"";d+=g.textContent?.trim()??""}return/^[0-9.,-]+$/.test(d.replaceAll("\u2212","-"))?d:""}}class Wf{render(r){let n=r;n=n.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let s=n.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let d=l.value[0],f=l.value[1],_=d.split(":")[0].split("!");_.shift(),_.filter(g=>"a"==g).length>0&&(f=f.toUpperCase());for(let g=_.length-1;g>=0;g--){let v=_[g];f="hl"==v||"cl"==v?`<span class='cl'>${f}</span>`:`<${v}>${f}</${v}>`}n=n.replace(d,f)}return n}clean(r){let n=r.split("\n"),i=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,s=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,l=[],d=0;for(let _ of n){let g=_;s.test(n[d].replaceAll(i,"$1"))&&(n[d]=n[d].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),g=n[d]);let C,v=g.matchAll(i),b=0;for(;;){let x=v.next();if(x.done)break;let I=x.value[0],T=I.indexOf(":"),R=I.substring(1,T),$=(x.value.index??0)-b,V=$+x.value[1].length;C&&$==C.e&&C.style==R?C.e=V:(C={lineIdx:d,s:$,e:V,style:R},l.push(C)),b+=T+4}n[d]=g.replaceAll(i,"$1"),d++}return{res:n.join("\n"),styles:l}}applyStyle(r,n,i=!1){for(let s=r.length-1;s>=0;s--){let l=r[s],d=n.filter(_=>_.lineIdx==l.lineIdx&&this.isRangeIntersec(_.s,_.e,l.s,l.e??999999)),f=[];for(let _ of d){let g=_.s>=l.s?_.s:l.s,v=_.e<=(l.e??9999999)?_.e:l.e??9999999;g-=l.s,v-=l.s;let b=i?_.style:_.style.replaceAll("!hl","").replaceAll("!cl","");g<v&&""!=b&&l.text&&""!=(l.text.substring(g,v)??"").trim()&&(f.push({idx:g,str:`[${b}:$`}),f.push({idx:v,str:"$]"}))}f.sort((_,g)=>{let v=g.idx-_.idx;return 0!=v?v:g.str.length-_.str.length});for(let _ of f)l.text=l.text?.substring(0,_.idx)+_.str+l.text?.substring(_.idx)}}getAnsStyle(r,n,i){if(!n)return"";let s=[],l={...n};this.applyStyle([l],i,!0),l.text!=n.text&&""==l.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&s.push("!fl");for(let _ of i)_.lineIdx==n.lineIdx&&_.s<=n.b&&n.b<_.e&&s.push(_.style);let f=s&&s.length>0?s.join():"";return f.indexOf("!u")>=0||f.indexOf("!b")>=0||f.indexOf("!hl")>=0||f.indexOf("!cl")>=0||f.indexOf("!fl")>=0?f:""}isRangeIntersec(r,n,i,s){return r<=i&&i<=n||i<=r&&r<=s}getStyleScore(r){let n=0;return r.indexOf("!cl")>=0&&(n+=8),r.indexOf("!u")>=0&&(n+=4),r.indexOf("!i")>=0&&(n+=2),r.indexOf("!b")>=0&&(n+=1),n}}class Hh{constructor(r){(0,m.A)(this,"infos",void 0),this.infos=r}render(r,n="\n"){let s=r.split(n),l=[],d=[],f="";for(let _ of s){let g=_;if(g.trim().startsWith("[*")&&g.trim().endsWith("*]")){let v=g.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(v.value){d.length>0&&(l.push(`<table class="q-table ${f}">${d.join("")}</table>`),d=[]);let C=this.infos.get(+v.value[1]);f=C&&C.borderTopSize>0?"border-1":"border-0",g=g.replace(v.value[0],"[*")}let b=g.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");b=b.replaceAll("|","</td><td>"),d.push(b)}else d.length>0&&(l.push(`<table class="q-table ${f}">${d.join("")}</table>`),d=[]),l.push(g)}return d.length>0&&l.push(`<table class="q-table ${f}">`+d.join("")+"</table>"),l.join(n)}}class Zf extends lf{constructor(r=!0){super(),(0,m.A)(this,"wmf",void 0),r&&(this.wmf=new WMFConverter)}readFile(r){return new Promise(n=>{this.read(r,!1,i=>{n(i.text)})})}readFileInputEventAsArrayBuffer(r,n){let i=new FileReader;i.onload=function(s){n(s.target.result)},i.readAsArrayBuffer(r)}read(r,n,i,s,l){let d=this,f=(_,g)=>{s&&s(_,g,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(r,function(_){azotaDocx.readDocx(_,f).then(function(g){console.log(g);for(let C of g.data)"img"==C.type&&("image/x-wmf"==C.contentType||"image/x-emf"==C.contentType?d.convert(C):C.value="data:"+C.contentType+";base64, "+C.value,!C.cssStyle&&C.height&&C.width&&"EMU"==C.measureUnit)&&(C.cssStyle=`width:${+C.width/12700}pt;height:${+C.height/12700}pt;margin-top:0px;`);let v=new Map,b=0;for(let C of g.data)"img"==C.type&&C.cropInfo&&v.set(b,1),b++;if(i&&0==v.size)i(d.parse(g,n));else{b=0;for(let C of g.data){if("img"==C.type&&C.cropInfo){const x=b,I=document.createElement("img");I.src=C.value,I.onload=()=>{d.cropImage(C,I),v.delete(x),0==v.size&&i&&i(d.parse(g,n))},I.onerror=()=>{v.delete(x),0==v.size&&i&&i(d.parse(g,n))}}b++}}}).catch(g=>{l&&l(g.message)})})}parseText(r,n=!1){let i=r.split("\n");i=this.processUnderlineAns(i);let s=i.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),l=s,d=new Wf,f=[];if(n){let _=d.clean(s);s=_.res,f=_.styles}else s=d.render(s);return{text:s,orgText:l,images:[],mathMap:new Map,tableMap:new Map,styles:f}}parse(r,n=!1){let i="",s=[],l=new Map,d=new Map,f=[];for(let x of r.data)if("img"==x.type)s.push({id:x.key,link:x.value,cssStyle:x.cssStyle}),x.cssStyle&&x.cssStyle.split(";").length>2&&f.push([`^\\[img:\\$${x.key}\\$\\]`,`[img:$${x.key}$]\n`]);else if("mathml"==x.type){let I=+x.key.split("_")[1];l.set(x.key,{id:I,str:x.value,raw:x.docx})}else"table"==x.type&&d.set(x.position,x);let _=[],g=-1;for(let x of r.lines){if(g++,0==x.length)continue;let I="";if(Array.isArray(x[0])&&Array.isArray(x[x.length-1])&&Array.isArray(x[Math.floor(x.length/2)])){let R=r.data.filter(V=>V.position==g&&"table"==V.type)[0],E=R?`!!${R.position}!!:`:"";I=R&&+R.borderBottomSize>0||_.length>0&&_[_.length-1].startsWith("[*")?`[*${E} `+x.map(V=>V.map(j=>j.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":x.map(V=>V.map(j=>j.join("")).join("\n")).join(" \t ")}else I=x.join("");for(let R of f)I=I.replaceAll(new RegExp(R[0],"g"),R[1]);let T=I.split("\n");for(let R of T)_.push(R)}_=this.processUnderlineAns(_),i=_.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let v=i,b=new Wf,C=[];if(n){let x=b.clean(i);i=x.res,C=x.styles}else i=b.render(i),i=new Xh(s).render(i),i=new Yh(l).render(i),i=new Hh(d).render(i);return{text:i,orgText:v,images:s,mathMap:l,tableMap:d,styles:C}}processUnderlineAns(r){let n=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,i=0,s=[];for(let l of r){let d=l;if(d=d.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(d)&&""!=d.trim()&&i>0){d=d.replaceAll(/[\s.]+/g,"");let f=d.indexOf("*"),_=0;if(d=d.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(d)>=0){let g=r[i-1].match(n);if(g&&d.length==g.length){for(let b of g)r[i-1]=r[i-1].replace(b,b.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${f==_?"*":""}${d.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=r[i-1],d=d.substring(1),_++;i++;continue}}}s.push(l),i++}return s}convert(r){return new Promise(n=>{if("image/x-wmf"==r.contentType)r.value=this.wmf.toPNG("data:"+r.contentType+";base64, "+r.value),n();else{let l=new ToContext2D(0,1),d=this.decodeBase64(r.value);try{FromEMF.Parse(d,l)}catch{}let f=this.scaleCanvas(l.canvas,200,200);r.value=f.toDataURL(),n()}})}decodeBase64(r){return Uint8Array.from(atob(r),function(n){return n.charCodeAt(0)})}scaleCanvas(r,n,i){let s=document.createElement("canvas");return s.width=n,s.height=i,s.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,n,i),s}cropImage(r,n){if(!r.cropInfo)return;let i=r.cropInfo.left?+r.cropInfo.left:0,s=r.cropInfo.top?+r.cropInfo.top:0,l=r.cropInfo.right?+r.cropInfo.right:0,d=r.cropInfo.bottom?+r.cropInfo.bottom:0;if(i+s+l+d==0)return;let f=n.width,_=n.height,g=i*f/1e5,v=s*_/1e5,x=f-l*f/1e5-g,I=_-d*_/1e5-v;const T=document.createElement("canvas");T.width=x,T.height=I,T.getContext("2d")?.drawImage(n,g,v,x,I,0,0,x,I),r.value=T.toDataURL()}}class Jf extends lf{readFile(r){return new Promise((n,i)=>{const s=new FileReader;s.onload=()=>{s.result?n(`<img src="${s.result}">`):i(new Error("Failed to read file."))},s.onerror=()=>{i(new Error("Error occurred while reading the file."))},s.readAsDataURL(r)})}}class Kf extends lf{readFile(r){return new Promise(n=>{const i=new FileReader;i.onload=function(){var s=(0,Ce.A)(function*(l){n("")});return function(l){return s.apply(this,arguments)}}(),i.readAsArrayBuffer(r)})}}function Uh(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function Wh(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function Zh(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function Jh(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function Kh(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,Wh,7,0,"div",13)(4,Zh,3,4,"span",14)(5,Jh,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(s))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",i.isReading),e.R7$(),e.Y8G("ngIf",!i.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!i.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let qh=(()=>{var t;class r{constructor(){(0,m.A)(this,"name",""),(0,m.A)(this,"onAddFile",new e.bkB),(0,m.A)(this,"onStartReading",new e.bkB),(0,m.A)(this,"files",[]),(0,m.A)(this,"isReading",!1),(0,m.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",s=>{if(this.err="",s.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,d={file:s,name:this.name,content:""};switch(this.files.push(d),ht.getFileExt(s.name)){case"pdf":_=new Kf;break;case"docx":_=new Zf;break;case"jpg":case"png":case"jpeg":_=new Jf}this.isReading=!0,this.onStartReading.emit(),_?.readFile(s).then(g=>{d.content=g,this.isReading=!1,this.onAddFile.emit(d)})})},200)}remove(i){this.files.splice(i,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(i,s){1&i&&(e.DNE(0,Uh,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,Kh,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&i&&(e.Y8G("ngIf",s.err),e.R7$(),e.Mz_("id","dropzone-basic-",s.name,""),e.R7$(8),e.Y8G("ngForOf",s.files))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.qT,N.cb,N.cV,Zt]})),r})();function Qh(t,r){if(1&t&&e.nrm(0,"i",21),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function eg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24)(2,"span",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",27),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function tg(t,r){if(1&t&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function ng(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24)(2,"span",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"select",28),e.DNE(6,tg,2,2,"option",29),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(3),e.Y8G("ngForOf",n.value.listOptions)}}function og(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24)(2,"span",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"textarea",31),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function ig(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24)(2,"span",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"div",32)(6,"p",33),e.EFF(7,"Drag and drop your file here"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function rg(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,eg,6,2,"div",22)(2,ng,7,2,"div",22)(3,og,6,1,"div",22)(4,ig,8,1,"div",22),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type)}}function sg(t,r){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ag(t,r){if(1&t&&(e.j41(0,"div",34)(1,"div",35),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,sg,2,2,"div",36),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function lg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Qh,1,1,"i",7),e.k0s(),e.j41(5,"div",8)(6,"div",9),e.DNE(7,rg,5,4,"div",10),e.k0s(),e.j41(8,"div")(9,"div",11)(10,"button",12),e.nrm(11,"i",13),e.EFF(12," Add form control"),e.k0s(),e.j41(13,"mat-menu",null,0)(15,"div",14)(16,"ul",15)(17,"li")(18,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("textbox"))}),e.nrm(19,"i",17),e.EFF(20,"Textbox "),e.k0s()(),e.j41(21,"li")(22,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("select"))}),e.nrm(23,"i",17),e.EFF(24,"SelectBox "),e.k0s()(),e.j41(25,"li")(26,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("textarea"))}),e.nrm(27,"i",18),e.EFF(28,"Textarea "),e.k0s()(),e.j41(29,"li")(30,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("file"))}),e.nrm(31,"i",19),e.EFF(32,"File Upload "),e.k0s()(),e.j41(33,"li")(34,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("key"))}),e.nrm(35,"i",19),e.EFF(36,"Access Key "),e.k0s()()()()()()()(),e.DNE(37,ag,4,1,"div",20),e.k0s()}if(2&t){const n=e.sdS(14),i=e.XpG();e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(27),e.Y8G("ngIf",i.nodeData.outputs.length>0)}}function cg(t,r){if(1&t&&e.nrm(0,"button",38),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function ug(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24),e.EFF(2,"List Options (One option per line, format: `Text=>Value`)"),e.k0s(),e.j41(3,"textarea",46),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.listOptions,s)||(l.listOptions=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.listOptions)}}function dg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",42)(4,"h5",43),e.EFF(5," Add form control "),e.k0s()(),e.j41(6,"div",44)(7,"div",23)(8,"label",24),e.EFF(9,"Label"),e.k0s(),e.j41(10,"input",45),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addLabel,s)||(l.addLabel=s),e.Njj(s)}),e.bIt("keyup",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.onLabelChange())}),e.k0s()(),e.j41(11,"div",23)(12,"label",24),e.EFF(13,"Var Name"),e.k0s(),e.j41(14,"input",46),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addVarName,s)||(l.addVarName=s),e.Njj(s)}),e.k0s()(),e.j41(15,"div",23)(16,"label",24),e.EFF(17,"Description"),e.k0s(),e.j41(18,"textarea",46),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addDesc,s)||(l.addDesc=s),e.Njj(s)}),e.k0s()(),e.DNE(19,ug,4,1,"div",22),e.j41(20,"div")(21,"button",47),e.EFF(22,"Close"),e.k0s(),e.j41(23,"button",48),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.saveControl())}),e.EFF(24),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(10),e.R50("ngModel",n.addLabel),e.R7$(4),e.R50("ngModel",n.addVarName),e.R7$(4),e.R50("ngModel",n.addDesc),e.R7$(),e.Y8G("ngIf","select"==n.addType),e.R7$(5),e.SpI("",n.curConf?"Save":"Add"," Control")}}function pg(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function fg(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2),e.DNE(3,pg,1,0,"i",50),e.k0s(),e.nrm(4,"input",51),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function mg(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function _g(t,r){if(1&t&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function hg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24),e.EFF(2),e.DNE(3,mg,1,0,"i",50),e.k0s(),e.j41(4,"select",53),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,_g,2,2,"option",29),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function gg(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function vg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24),e.EFF(2),e.DNE(3,gg,1,0,"i",50),e.k0s(),e.j41(4,"textarea",54),e.bIt("input",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.autoResize(s.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function yg(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function bg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24),e.EFF(2),e.DNE(3,yg,1,0,"i",50),e.k0s(),e.j41(4,"app-file-control",55),e.bIt("onStartReading",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onStartReadingFile())})("onAddFile",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onAddFile(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",i.nodeData.id+"-"+n.key)}}function xg(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Cg(t,r){if(1&t&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function kg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23)(1,"label",24),e.EFF(2),e.DNE(3,xg,1,0,"i",50),e.k0s(),e.j41(4,"select",53),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,Cg,2,2,"option",29),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",i.lstKeys)}}function Sg(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,fg,5,6,"div",22)(2,hg,6,5,"div",22)(3,vg,6,6,"div",22)(4,bg,5,3,"div",22)(5,kg,6,5,"div",22),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}function wg(t,r){if(1&t&&(e.j41(0,"div",49)(1,"div",9),e.DNE(2,Sg,6,5,"div",10),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.nodeData.conf)}}let qf=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"appId",0),(0,m.A)(this,"type","form"),(0,m.A)(this,"desc","User interaction form"),(0,m.A)(this,"lstKeys",[]),(0,m.A)(this,"addType",""),(0,m.A)(this,"addLabel",""),(0,m.A)(this,"addVarName",""),(0,m.A)(this,"addDesc",""),(0,m.A)(this,"listOptions",""),(0,m.A)(this,"curConf",void 0),(0,m.A)(this,"onUploaded",new e.bkB),(0,m.A)(this,"onStartUpload",new e.bkB)}getClassType(){return r}updateOutput(){this.nodeData.outputs=[];for(let i of this.nodeData.conf)this.nodeData.outputs.push({name:this.id+"-"+i.key,type:"file"==i.value.type?"File":"string",demo:'{name: "filename"}|"text value"'}),"file"==i.value.type&&this.nodeData.outputs.push({name:this.id+"-"+i.key+"-dataUrl",type:"string",demo:""})}upgradeConf(){}ngOnInit(){if(super.ngOnInit(),"render"!=this.mode)return;let i=!1;for(let s of this.nodeData.conf)s.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+s.key)??"","key"==s.value.type&&(i=!0);i&&this.appService?.listKeys().subscribe(s=>{this.lstKeys=s}),setTimeout(()=>{let s=document.querySelectorAll(".form-node-renderred textarea");for(let l of s)this.autoResize(l)},200)}getConfig(){return[]}addControl(i){this.ngZone?.run(()=>{this.addType=i,this.addLabel="",this.addVarName=""}),this.curConf=void 0,this.openSetting()}autoResize(i){i.style.height="50px",i.style.overflowY="hidden",i.style.height=i.scrollHeight+10+"px"}showInfo(i){alert(i)}saveControl(){let i=":";this.listOptions.includes("=>")&&(i="=>");let s=this.listOptions.split("\n").map(l=>l.split(i));this.curConf?(this.curConf.value.label=this.addLabel,this.curConf.value.desc=this.addDesc,this.curConf.value.listOptions=s.map(l=>({value:l[1],text:l[0]})),this.curConf.key=this.addVarName):this.nodeData.conf.push({key:this.addVarName,value:{type:this.addType,label:this.addLabel,desc:this.addDesc,listOptions:s.map(l=>({value:l[1],text:l[0]}))}}),this.noticeUpdate()}removeControl(i){this.nodeData.conf.splice(i,1),this.noticeUpdate()}editConf(i){this.curConf=i,this.addType=i.value.type,this.addLabel=i.value.label,this.addVarName=i.key,this.addDesc=i.value.desc,this.listOptions=i.value.listOptions?i.value.listOptions.map(s=>`${s.text}=>${s.value}`).join("\n"):"",this.openSetting()}ngDoCheck(){this.err=0==this.nodeData.conf.length?'No Control. Click "Add form control" to add control to your form':""}onLabelChange(){this.ngZone?.run(()=>{this.addVarName=ht.toCamelCase(this.addLabel)})}onAddFile(i){this.onUploaded.emit(i)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],inputs:{appId:"appId"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["menu",""],["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],["class","form-node-renderred",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"bx","bx-plus","me-2"],[1,"dropdown-menu","show","w-48","mt-1"],[1,"dropdown-content"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"bx","bx-text","me-3"],[1,"bx","bx-detail","me-3"],[1,"bx","bx-paperclip","me-3"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"cursor-pointer",3,"click"],[1,"bx","bx-x","cursor-pointer",3,"click"],["type","text","autocomplete","off",1,"form-control",3,"placeholder"],[1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control"],[1,"dropzone"],[1,"h6","text-center","mt-4","text-small"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],["type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary","me-3",3,"click"],[1,"form-node-renderred"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(i,s){1&i&&e.DNE(0,lg,38,5,"div",1)(1,cg,1,3,"button",2)(2,dg,25,7,"div",3)(3,wg,3,1,"div",4),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf","render"==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.me,N.wz,N.BC,N.vS,qh,Z.Cn,Z.kk,Z.Cp]})),r})();function Ng(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Eg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ig(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Tg(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Eg,3,5,"div",21)(4,Ig,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Ag(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Rg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,Ag,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.settings.style)}}function Fg(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Mg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Size "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,Fg,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.settings.size)}}function jg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",28),e.EFF(5,"dall-e-2"),e.k0s(),e.j41(6,"option",29),e.EFF(7,"dall-e-3"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function $g(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Cookie "),e.k0s(),e.j41(3,"input",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Gg(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Tg,5,2,"div",17)(2,Rg,5,2,"div",18)(3,Mg,5,2,"div",18)(4,jg,8,1,"div",18)(5,$g,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","style"==n.key),e.R7$(),e.Y8G("ngIf","size"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.Y8G("ngIf","cookie"==n.key)}}function Dg(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Vg(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Dg,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Og(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Qf=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"settings",{style:["natural","vivid"],size:["1024x1024","1792x1024","1024x1792"]}),(0,m.A)(this,"type","textToImage"),(0,m.A)(this,"desc","Generate image from text")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"dall-e-3"},{key:"style",value:"natural"},{key:"size",value:"1792x1024"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-image",type:"image",demo:""}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,f,_){}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-image-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","dall-e-2"],["value","dall-e-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Ng,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Gg,6,5,"div",5),e.k0s()(),e.DNE(8,Vg,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Og,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.me,N.wz,N.BC,N.vS,Zt,_n]})),r})();const zg=["outputEditor"];function Bg(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Type your output format in free style and click 'Generate' button. "),e.nrm(2,"br"),e.EFF(3,"Example: "),e.j41(4,"code"),e.EFF(5,"name: string, listItem: string[]"),e.k0s()())}function Lg(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Describe your example and click 'Generate' button. "),e.k0s())}function Pg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div"),e.DNE(1,Bg,6,0,"div",2)(2,Lg,2,0,"div",2),e.j41(3,"div",3)(4,"ngx-monaco-editor",4,0),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.inputStr,s)||(l.inputStr=s),e.Njj(s)}),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"button",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.generate())}),e.nrm(9,"i",8),e.EFF(10," Generate "),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"button",11),e.EFF(14,"Close"),e.k0s(),e.j41(15,"button",12),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.save())}),e.EFF(16),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf","UserOutputFormatBuilder"==n.agentName),e.R7$(),e.Y8G("ngIf","ExamplesBuilder"==n.agentName),e.R7$(2),e.Y8G("height",200)("autoHeight",!0)("options",n.editorFuncOptions),e.R50("ngModel",n.inputStr),e.R7$(4),e.Y8G("disabled",""==n.inputStr&&"UserOutputFormatBuilder"==n.agentName),e.R7$(7),e.Y8G("disabled",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"Generating...":"Save"," ")}}function Xg(t,r){1&t&&(e.j41(0,"div")(1,"div"),e.EFF(2," Please add agent Prompt first! "),e.k0s(),e.j41(3,"div",10)(4,"button",11),e.EFF(5,"Close"),e.k0s()()())}let Yg=(()=>{var t;class r extends Md{constructor(i,s){super(),(0,m.A)(this,"zone",void 0),(0,m.A)(this,"aiApi",void 0),(0,m.A)(this,"editorFuncOptions",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!1}),(0,m.A)(this,"inputStr",""),(0,m.A)(this,"prompt",""),(0,m.A)(this,"genMsg",""),(0,m.A)(this,"agentName","UserOutputFormatBuilder"),(0,m.A)(this,"agentRunner",void 0),(0,m.A)(this,"outputEditor",void 0),(0,m.A)(this,"isLoading",!1),(0,m.A)(this,"onSave",new e.bkB),this.zone=i,this.aiApi=s,this.agentRunner=new jd(this.aiApi,this)}generate(){this.isLoading=!0,this.outputEditor?.writeValue(""),this.agentRunner.setAgentName(this.agentName),this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr);let i=[`agent::${this.prompt}`];""!=this.genMsg&&i.push(this.genMsg),this.agentRunner.setVars(i),this.agentRunner.send()}save(){this.onSave.emit(this.inputStr)}onMsgUpdate(i,s){this.outputEditor?.insertText(s??"")}onDone(i){this.outputEditor?.formatCode(),this.zone.run(()=>{this.isLoading=!1})}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(ct))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-output-format"]],viewQuery:function(i,s){if(1&i&&e.GBs(zg,5),2&i){let l;e.mGM(l=e.lsd())&&(s.outputEditor=l.first)}},inputs:{inputStr:"inputStr",prompt:"prompt",genMsg:"genMsg",agentName:"agentName"},outputs:{onSave:"onSave"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["outputEditor",""],[4,"ngIf"],["class","small mb-3",4,"ngIf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","height","autoHeight","options","ngModel"],[1,"row"],[1,"col-lg-5","mt-3"],["type","button",1,"btn","btn-text-primary",3,"click","disabled"],[1,"bx","bxs-magic-wand","me-2"],[1,"col-lg-7"],[1,"mt-3","text-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],[1,"small","mb-3"]],template:function(i,s){1&i&&e.DNE(0,Pg,17,9,"div",1)(1,Xg,6,0,"div",1),2&i&&(e.Y8G("ngIf",s.prompt),e.R7$(),e.Y8G("ngIf",!s.prompt))},dependencies:[Qr.V,nf,L.MD,L.bT,N.YN,N.BC,N.vS]})),r})();function Hg(t,r){if(1&t&&e.nrm(0,"i",19),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Ug(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.brH(2,2,n.value,50,"**SYSTEM:")," ")}}function Wg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",28),e.EFF(3," Add prompt "),e.k0s()()}}function Zg(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," System Instructions "),e.k0s(),e.DNE(3,Ug,3,6,"div",25)(4,Wg,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Jg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Kg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",29),e.EFF(3," Add prompt template "),e.k0s()()}}function qg(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Prompt Template "),e.k0s(),e.DNE(3,Jg,3,5,"div",25)(4,Kg,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Qg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function e0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",29),e.EFF(3," Add examples "),e.k0s()()}}function t0(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Examples "),e.k0s(),e.DNE(3,Qg,3,5,"div",25)(4,e0,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function n0(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function o0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",24),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,n0,2,2,"option",31),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.modelNames)}}function r0(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function s0(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",35),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(1,r0,2,2,"option",31),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function a0(t,r){1&t&&(e.j41(0,"div",36)(1,"small",37),e.EFF(2,"No Vector Collection"),e.k0s()())}function l0(t,r){if(1&t&&(e.j41(0,"div")(1,"label",24),e.EFF(2," Documents "),e.k0s(),e.j41(3,"div"),e.DNE(4,s0,2,2,"select",33)(5,a0,3,0,"div",34),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function c0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li",46),e.nrm(1,"i",47),e.EFF(2),e.j41(3,"i",48),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(4);return e.Njj(l.delTool(s))}),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n," ")}}function u0(t,r){if(1&t&&(e.j41(0,"div",43)(1,"ul",44),e.DNE(2,c0,4,1,"li",45),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",n.tools)}}function d0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.addTool(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function p0(t,r){if(1&t&&(e.j41(0,"div",38)(1,"label",24),e.EFF(2," Tools "),e.k0s(),e.DNE(3,u0,3,1,"div",39),e.j41(4,"div")(5,"div",40)(6,"button",41),e.nrm(7,"i",29),e.EFF(8," Add tool "),e.k0s(),e.j41(9,"ul",42),e.DNE(10,d0,3,1,"li",5),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",n.tools.length>0),e.R7$(7),e.Y8G("ngForOf",n.lstTool)}}function f0(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Zg,5,2,"div",20)(2,qg,5,2,"div",20)(3,t0,5,2,"div",20)(4,o0,5,2,"div",21),e.j41(5,"div"),e.DNE(6,l0,6,2,"div",21)(7,p0,11,2,"div",22),e.k0s()()),2&t){const n=r.$implicit,i=e.XpG();e.R7$(),e.Y8G("ngIf","prompt"==n.key),e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","examples"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.ZvI("mt-2 ",i.moreSetting?"":"d-none",""),e.R7$(),e.Y8G("ngIf","doc"==n.key),e.R7$(),e.Y8G("ngIf","tools"==n.key)}}function m0(t,r){if(1&t&&(e.j41(0,"div",54),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function _0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",50)(1,"div",51),e.EFF(2," Outputs "),e.j41(3,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.openSetting("outputFormat"))}),e.k0s()(),e.DNE(4,m0,2,2,"div",53),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.nodeData.outputs)}}function h0(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Add Prompt "),e.k0s())}function g0(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Input Template "),e.k0s())}function v0(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Set Output Format "),e.k0s())}function y0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",56),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onAddPrompt(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("agentName","UserAgentBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function b0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",57),e.bIt("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateOutputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function x0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",58),e.bIt("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateExamples(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("genMsg",n.genExampleMsg)("agentName","ExamplesBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function C0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",59),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let em=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","agent"),(0,m.A)(this,"desc","An AI Agent to process your data"),(0,m.A)(this,"moreSetting",!1),(0,m.A)(this,"modelNames",["gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-002","gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp-1219"]),(0,m.A)(this,"prompt",""),(0,m.A)(this,"genExampleMsg",""),(0,m.A)(this,"selectedCollection",""),(0,m.A)(this,"lstCollections",[]),(0,m.A)(this,"lstCollection",[]),(0,m.A)(this,"lstTool",[{name:"code_execution"},{name:"google_search_retrieval"}]),(0,m.A)(this,"tools",[]),(0,m.A)(this,"agentRunner",void 0)}getClassType(){return r}getConfig(){return[{key:"prompt",value:""},{key:"input",value:""},{key:"examples",value:""},{key:"model",value:"gemini-1.5-flash"},{key:"doc",value:""},{key:"tools",value:[]},{key:"outputFormat",value:""}]}showMore(){this.ngZone?.run(()=>{this.moreSetting=!this.moreSetting})}updateOutput(){let i=this.findConfig("outputFormat").trim();this.nodeData.outputs=""==i?[{name:this.id+"-agentResponse",type:"string",demo:""}]:[{name:this.id+"-agentResponse",type:"json",demo:JSON.stringify(ht.createDemoDataForJsonSchema(i))}]}openSetting(i){this.prompt=this.findConfig("prompt"),this.genExampleMsg=this.findConfig("outputFormat"),""!=this.genExampleMsg&&(this.genExampleMsg="output_format::"+this.genExampleMsg),super.openSetting(i)}onAddPrompt(i){this.setConfig("prompt",i)}updateOutputFormat(i){this.setConfig("outputFormat",i),this.updateOutput()}updateExamples(i){this.setConfig("examples",i),this.updateOutput()}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}loadCols(){this.appService?.listVCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateCol(){this.setConfig("doc",this.selectedCollection)}ngOnInit(){super.ngOnInit(),this.appService?.listVCollection().subscribe(i=>{this.lstCollection=i}),this.tools=this.findConfig("tools")??[],this.selectedCollection=this.findConfig("doc"),this.loadCols(),(this.selectedCollection||this.tools.length>0)&&(this.moreSetting=!0)}addTool(i){this.ngZone?.run(()=>{0==this.tools.filter(l=>l==i.name).length&&(this.tools.push(i.name),this.setConfig("tools",this.tools))})}delTool(i){this.ngZone?.run(()=>{this.tools.splice(i,1),this.setConfig("tools",this.tools)})}ngDoCheck(){this.err=""==this.findConfig("prompt")?'No Prompt. Click "Add prompt" to instruct your agent':""}run(i,s,l,d,f,_){let g=this.findConfig("doc",l),v=this.findConfig("input",l);v=this.parseTempate(v,d);let b=[];for(let x of d.entries())b.push(`${x[0]}::${x[1]}`);let C=new ct(i);this.agentRunner=new jd(C,new Md(void 0,x=>{let I=new Map,T=null;try{T=JSON.parse(x)}catch{}for(let R of l.outputs)I.set(R.name,T??x);_(I)})),this.agentRunner.setAgentName(`flow-${s}.${l.id}`),this.agentRunner.setVars(b),this.agentRunner.addUserMessage(v),g&&this.agentRunner.setMemType(g),this.agentRunner.send()}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-llm-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:24,vars:19,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"p-1","text-center",3,"click"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body","content"],[3,"agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"inputStr","prompt","onSave",4,"ngIf"],[3,"genMsg","agentName","inputStr","prompt","onSave",4,"ngIf"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bxs-magic-wand","me-2"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change","click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[1,"mb-3"],[1,"text-muted"],[1,"mt-2"],["class","small",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow"],[1,"dropdown-menu"],[1,"small"],[1,"list-group"],["class","p-0 list-group-item d-flex align-items-center border-0 small",4,"ngFor","ngForOf"],[1,"p-0","list-group-item","d-flex","align-items-center","border-0","small"],[1,"bx","bx-code","me-2"],[1,"bx","bx-x","ms-3","cursor-pointer",3,"click"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-small",3,"click"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["title","Set Output Format",1,"bx","bx-code-alt","cursor-pointer","text-link",3,"click"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[1,"modal-title"],[3,"onClose","onSave","agentName","inputStr","vars"],[3,"onSave","inputStr","prompt"],[3,"onSave","genMsg","agentName","inputStr","prompt"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Hg,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,f0,8,9,"div",5),e.j41(8,"div",6),e.bIt("click",function(){return s.showMore()}),e.nrm(9,"i"),e.k0s()()(),e.DNE(10,_0,5,1,"div",7),e.k0s(),e.nrm(11,"button",8),e.j41(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),e.DNE(16,h0,2,0,"h5",13)(17,g0,2,0,"h5",13)(18,v0,2,0,"h5",13),e.k0s(),e.j41(19,"div",14),e.DNE(20,y0,1,3,"app-input-format",15)(21,b0,1,2,"app-output-format",16)(22,x0,1,4,"app-output-format",17)(23,C0,1,2,"app-input-format",18),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(2),e.ZvI("bx bx-chevron-",s.moreSetting?"up":"down"," cursor-pointer"),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(4),e.Y8G("ngIf","prompt"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(2),e.Y8G("ngIf","prompt"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","examples"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Yg,Zt,_n]})),r})();function k0(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function S0(t,r){if(1&t&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function w0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",18),e.EFF(2," Run App "),e.k0s(),e.j41(3,"select",19),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedApp,s)||(l.selectedApp=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateApp())}),e.DNE(4,S0,2,2,"option",20),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.selectedApp),e.R7$(),e.Y8G("ngForOf",n.lstApp)}}function N0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function E0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",25),e.EFF(3," Set Value "),e.k0s()()}}function I0(t,r){if(1&t&&(e.j41(0,"div")(1,"label",18),e.EFF(2),e.k0s(),e.DNE(3,N0,3,5,"div",22)(4,E0,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",i.getAppVar(n.key)," "),e.R7$(),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function T0(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,w0,5,2,"div",17)(2,I0,5,3,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","app"==n.key),e.R7$(),e.Y8G("ngIf",n.key.startsWith("app-args::"))}}function A0(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function R0(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,A0,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function F0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",n.settingConf.value)("vars",n.nodeData.inputs)}}let tm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","router"),(0,m.A)(this,"desc","Execute other app"),(0,m.A)(this,"lstApp",[]),(0,m.A)(this,"selectedApp",0)}getClassType(){return r}getConfig(){return[{key:"app",value:0}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-appResult",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedApp=this.findConfig("app"),this.appService.listAppRoute().subscribe(i=>{this.ngZone.run(()=>{this.lstApp=i})})}upgradeConf(){}getAppVar(i){return i.split("::")[1]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}updateApp(){this.setConfig("app",this.selectedApp);let i=this.lstApp.filter(s=>s.id==this.selectedApp)[0];this.nodeData.conf=this.nodeData.conf.slice(0,1);for(let s of i.args)this.nodeData.conf.push({key:`app-args::${s}`,value:""});this.noticeUpdate()}run(i,s,l,d,f,_){let v="/runner/"+this.findConfig("app",l);f.navigate([v]),_(new Map)}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-route-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,k0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,T0,3,2,"div",5),e.k0s()(),e.DNE(8,R0,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,F0,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf",s.settingConf))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Zt,_n]})),r})();function M0(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function j0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function $0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add query template "),e.k0s()()}}function G0(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Query Template "),e.k0s(),e.DNE(3,j0,3,5,"div",21)(4,$0,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function D0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Type "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(5,"option",26),e.EFF(6,"Data"),e.k0s(),e.j41(7,"option",27),e.EFF(8,"Vector"),e.k0s()()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function V0(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FCK("value","",n.id,":",n.name,""),e.R7$(),e.SpI("",n.name," ")}}function O0(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(1,V0,2,4,"option",31),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function z0(t,r){1&t&&(e.j41(0,"div",33)(1,"small",34),e.EFF(2,"No Collection"),e.k0s()())}function B0(t,r){if(1&t&&(e.j41(0,"div")(1,"label",20),e.EFF(2," Select Collection "),e.k0s(),e.j41(3,"div"),e.DNE(4,O0,2,2,"select",28)(5,z0,3,0,"div",29),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function L0(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,G0,5,2,"div",17)(2,D0,9,1,"div",18)(3,B0,6,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","type"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function P0(t,r){if(1&t&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function X0(t,r){if(1&t&&(e.j41(0,"div",35)(1,"div",36),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,P0,2,2,"div",37),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Y0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",39),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.vars)("varFormat",n.varFormat)("varBtnLabel","Add Condition")}}let nm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","search"),(0,m.A)(this,"desc","Search your storage data"),(0,m.A)(this,"selectedCollection",""),(0,m.A)(this,"lstCollections",[]),(0,m.A)(this,"vars",[]),(0,m.A)(this,"varFormat",'"@@":"<your_search_value>"\n')}getClassType(){return r}getConfig(){return[{key:"type",value:"data"},{key:"collection",value:""},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-lstData",type:"array",demo:'{"Id": "1", "CreatedDate": "yyyy-mm-dd", "Content": "json"}'}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){"vector"==this.findConfig("type")?this.appService?.listVCollection().subscribe(s=>{this.ngZone?.run(()=>{this.lstCollections=s})}):this.appService?.listCollection().subscribe(s=>{this.ngZone?.run(()=>{this.lstCollections=s,this.loadVars()})})}loadVars(){this.vars=[],this.vars.push(...this.nodeData.inputs);let i=this.lstCollections.filter(s=>s.id+":"+s.name==this.selectedCollection)[0];if(i?.spec){let s=ht.extractProperties(JSON.parse(i.spec),0);for(let l of s)this.vars.push({name:l.name,type:l.type,demo:""})}}updateCol(){this.setConfig("collection",this.selectedCollection),this.loadVars()}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,f,_){let g=this.findConfig("input",l);g=this.parseTempate(g,d);let v=this.findConfig("collection",l).split(":"),b=this.findConfig("type",l),C=new je(i);"data"==b?C.listData({id:+v[0],name:g,type:b}).subscribe(x=>{let I=this.setupOutputValue(x,l);_(I)}):"vector"==b&&C.searchVector({collection:v[1],content:g,id:0,vector:[]}).subscribe(x=>{let I=this.setupOutputValue(x,l);_(I)})}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-search-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","varFormat","varBtnLabel","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","data"],["value","vector"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change","click",4,"ngIf"],["class","mb-5",4,"ngIf"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mb-5"],[1,"text-muted"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars","varFormat","varBtnLabel"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,M0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,L0,4,3,"div",5),e.k0s()(),e.DNE(8,X0,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Query Template "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Y0,1,4,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Zt,_n]})),r})();class om{}class H0 extends om{constructor(r){super(),(0,m.A)(this,"idxPattern",void 0),this.idxPattern=r}parse(r){let n=[],i=this.cleanText(r).split("<br>");console.log(i);let s=null;for(let f of i){let _=this.removeVietnameseTones(f);if(_=this.removeHtmlTag(_),""==_)continue;let g=!1;for(let v of this.idxPattern){let b=v.split("==>"),C=b[0],x=new RegExp(b[1].trim()),I=this.getPatLevel(C);if(new RegExp(C.trim()).test(_)){let R={title:f,childs:[],content:""};if(0==I&&(n.length>0||x.test(_)))n.push(R),s=R;else if(n.length>0){let E=n[n.length-1];for(let $=0;$<I-1;$++){if(!(E.childs.length>0)){E=null;break}E=E.childs[E.childs.length-1]}null!=E&&(E.childs.length>0||x.test(_))&&(E.childs.push(R),s=R)}g=!0;break}}s&&!g&&(s.content+=(""==s.content?"":"<br>")+f,s.hasTable||(s.hasTable=f.indexOf("<table>")>=0))}let l=[],d=new RegExp(this.idxPattern[0].split("==>")[1].trim());for(let f of n)0==f.childs.length&&0==f.content.length||(l.length>0||d.test(this.removeHtmlTag(f.title)))&&l.push(f);return l}getPatLevel(r){let n=0;for(const i of r){if("\t"!=i)break;n++}return n}cleanText(r){let n=["div"],i=r;for(let s of n)i=i.replaceAll(`<${s}>`,"").replaceAll(`</${s}>`,"");return i=i.replaceAll(/<\/table>\s*\d+[\sbr<>\d]+<end-page\/>\s*<table>/g,""),i=i.replaceAll(/\d+[\sbr<>\d]+<end-page\/>/g,'<hr class="solid"><br>'),i=i.replaceAll("</table>","</table><br>"),i=i.replaceAll("\n","").trim(),i}removeHtmlTag(r){let n=["div","b","i","u"],i=r;for(let s of n)i=i.replaceAll(`<${s}>`,"").replaceAll(`</${s}>`,"");return i.trim()}removeVietnameseTones(r){return(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()}}class U0 extends om{parse(r){return[]}}function W0(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Z0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function J0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function K0(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Z0,3,5,"div",21)(4,J0,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function q0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Split character "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Q0(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,K0,5,2,"div",17)(2,q0,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","character"==n.key)}}function e1(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function t1(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,e1,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function n1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let im=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"spliters",new Map([["character-spliter",new U0],["heading-spliter",new H0(["^[IVX]+\\.\\s*[A-Z][A-Z0-9.,\\s]*$ ==> ^I\\.","\t^\\d+\\.\\s*[A-Z].+ ==> ^1\\.","\t\t^\\d+\\.\\d+\\.\\s*[A-Z].+ ==> ^\\d+\\.1\\."])]])),(0,m.A)(this,"type","spliter"),(0,m.A)(this,"desc","Split text content into multiple parts for embedding")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"character",value:"\\n\\n"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-parts",type:"string[]",demo:'["text"]'}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,f,_){let g=this.findConfig("input",l);g=this.parseTempate(g,d);let v=this.findConfig("model",l),b=this.spliters.get(v);if(!b)return void _(new Map);let C=b.parse(g);_(this.setupOutputValue(C,l))}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-spliter-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,W0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Q0,3,2,"div",5),e.k0s()(),e.DNE(8,t1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,n1,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,Zt,_n]})),r})();function o1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function r1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function s1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function a1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Data Template "),e.k0s(),e.DNE(3,r1,3,5,"div",21)(4,s1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function l1(t,r){if(1&t&&(e.j41(0,"option",28),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function c1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.DNE(5,l1,2,2,"option",26),e.k0s(),e.j41(6,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.showAddCollectionModal())}),e.nrm(7,"i",24),e.EFF(8," New folder "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function u1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,a1,5,2,"div",17)(2,c1,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function d1(t,r){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function p1(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,d1,2,2,"div",31),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function f1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",33),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){let n;const i=e.XpG();e.Y8G("inputStr",null!==(n=null==i.settingConf?null:i.settingConf.value)&&void 0!==n?n:i.curColSpec)("vars",i.nodeData.inputs)}}let rm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","database"),(0,m.A)(this,"displayName","SaveFile"),(0,m.A)(this,"desc","Save your data"),(0,m.A)(this,"selectedCollection",0),(0,m.A)(this,"lstCollections",[]),(0,m.A)(this,"curColSpec","")}getClassType(){return r}getConfig(){return[{key:"collection",value:0},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateCol(){this.setConfig("collection",this.selectedCollection);let i=this.lstCollections.filter(s=>s.id==this.selectedCollection)[0];this.curColSpec=i?.spec??""}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,f,_){}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,o1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,u1,3,2,"div",5),e.k0s()(),e.DNE(8,p1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,f1,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,L.MD,L.Sq,L.bT,Zt,_n]})),r})();function m1(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function _1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function h1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function g1(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Template "),e.k0s(),e.DNE(3,_1,3,5,"div",14)(4,h1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function v1(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,g1,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key)}}function y1(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function b1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,y1,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function x1(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,m1,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,v1,2,1,"div",8),e.k0s()(),e.DNE(8,b1,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function C1(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function k1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function S1(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,k1,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key))}}let sm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","text"),(0,m.A)(this,"desc","Create text data")}getClassType(){return r}getConfig(){return[{key:"html",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-text",type:"string",demo:""}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-text-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,x1,9,4,"div",0)(1,C1,1,3,"button",1)(2,S1,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Qr.V,_n,Zt]})),r})();function w1(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function N1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function E1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add audio "),e.k0s()()}}function I1(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Audio data "),e.k0s(),e.DNE(3,N1,3,5,"div",14)(4,E1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function T1(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,I1,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","audio"==n.key)}}function A1(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function R1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,A1,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function F1(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,w1,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,T1,2,1,"div",8),e.k0s()(),e.DNE(8,R1,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function M1(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function j1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function $1(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,j1,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","audio"==(null==n.settingConf?null:n.settingConf.key))}}let am=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","transcription"),(0,m.A)(this,"desc","Generate transcription for audio file")}getClassType(){return r}getConfig(){return[{key:"audio",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-transcription",type:"json",demo:JSON.stringify({language:"english",duration:8.47,text:"Some long text",words:[{word:"The",start:0,end:.23}]})}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-transcription-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,F1,9,4,"div",0)(1,M1,1,3,"button",1)(2,$1,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,_n,Zt]})),r})();function G1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function D1(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("string"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function V1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Content "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,D1,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.nodeData.inputs)}}function O1(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("vector"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function z1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Vector "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,O1,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.nodeData.inputs)}}function B1(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function L1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",24),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.DNE(5,B1,2,2,"option",25),e.k0s(),e.j41(6,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.showAddVCollectionModal())}),e.nrm(7,"i",27),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function P1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,V1,5,2,"div",17)(2,z1,5,2,"div",17)(3,L1,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","content"==n.key),e.R7$(),e.Y8G("ngIf","vector"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function X1(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Y1(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,X1,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function H1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let lm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","vectorDatabase"),(0,m.A)(this,"desc","Save embedded vector to db"),(0,m.A)(this,"selectedCollection",""),(0,m.A)(this,"lstCollections",[])}getClassType(){return r}getConfig(){return[{key:"content",value:""},{key:"vector",value:""},{key:"collection",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngDoCheck(){for(let i of this.nodeData.conf)"content"==i.key&&""==i.value&&(i.value=this.nodeData.inputs.filter(s=>"string"==s.type)[0]?.name??""),"vector"==i.key&&""==i.value&&(i.value=this.nodeData.inputs.filter(s=>"vector"==s.type)[0]?.name??"")}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listVCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateInputFormat(i){this.setConfig("content",i),this.noticeUpdate()}updateCol(){this.setConfig("collection",this.selectedCollection)}run(i,s,l,d,f,_){}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-vector-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value","class",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,G1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,P1,4,3,"div",5),e.k0s()(),e.DNE(8,Y1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,H1,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,L.MD,L.Sq,L.bT,_n]})),r})();function U1(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function W1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Z1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function J1(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Video Template "),e.k0s(),e.DNE(3,W1,3,5,"div",14)(4,Z1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function K1(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,J1,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","source"==n.key)}}function q1(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Q1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,q1,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function ev(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,U1,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,K1,2,1,"div",8),e.k0s()(),e.DNE(8,Q1,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function tv(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function nv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function ov(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,nv,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","source"==(null==n.settingConf?null:n.settingConf.key))}}let cm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","videoRender"),(0,m.A)(this,"desc","Render video")}getClassType(){return r}getConfig(){return[{key:"source",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-videoUrl",type:"string",demo:""}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-video-render-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,ev,9,4,"div",0)(1,tv,1,3,"button",1)(2,ov,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Qr.V,_n,Zt]})),r})();function iv(t,r){if(1&t&&e.nrm(0,"i",11),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function sv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",19),e.EFF(3," Add Design "),e.k0s()()}}function av(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Design "),e.k0s(),e.DNE(3,rv,3,5,"div",16)(4,sv,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function lv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function cv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",19),e.EFF(3," Add Template "),e.k0s()()}}function uv(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Save Template "),e.k0s(),e.DNE(3,lv,3,5,"div",16)(4,cv,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function dv(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function pv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",15),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(5,dv,2,2,"option",21),e.k0s(),e.j41(6,"button",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.showAddCollectionModal())}),e.nrm(7,"i",19),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function fv(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,av,5,2,"div",12)(2,uv,5,2,"div",12)(3,pv,9,2,"div",13),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key),e.R7$(),e.Y8G("ngIf","saveTemplate"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function mv(t,r){if(1&t&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function _v(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,mv,2,2,"div",26),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function hv(t,r){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,iv,1,1,"i",6),e.k0s(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,fv,4,3,"div",9),e.k0s()(),e.DNE(8,_v,4,1,"div",10),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function gv(t,r){if(1&t&&e.nrm(0,"button",28),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function vv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.save(s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("agentName","UserHtmlViewBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function yv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",36),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateSaveTemplate(s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function bv(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32),e.DNE(4,vv,1,4,"app-input-format",33)(5,yv,1,3,"app-input-format",34),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","saveTemplate"==(null==n.settingConf?null:n.settingConf.key))}}function xv(t,r){if(1&t&&e.nrm(0,"div",37),2&t){const n=e.XpG();e.Y8G("innerHTML",n.rendered,e.npT)}}let um=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"vars",new Map),(0,m.A)(this,"type","htmlViewer"),(0,m.A)(this,"desc","View output data"),(0,m.A)(this,"selectedCollection",0),(0,m.A)(this,"lstCollections",[]),(0,m.A)(this,"html",""),(0,m.A)(this,"rendered","")}getClassType(){return r}updateOutput(){let i=this.findConfig("html"),s=this.getAllSelectablePairs(i).map(l=>l.varName);s=ht.distinctArray(s),this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}];for(let l of s)this.nodeData.outputs.push({name:l,type:"array",demo:"[]"})}getConfig(){return[{key:"html",value:""}]}save(i){this.setConfig("html",i),this.noticeUpdate()}updateSaveTemplate(i){this.setConfig("saveTemplate",i),this.noticeUpdate()}loadCols(){this.appService?.listCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateCol(){this.setConfig("collection",this.selectedCollection)}ngOnInit(){this.html=this.findConfig("html"),"render"==this.mode&&(this.rendered=this.compileTemplate()),this.selectedCollection=this.findConfig("collection"),this.loadCols()}getAllSelectablePairs(i){const s=/bs-select="([^=>]+)=>([^"]+)"/g,l=[];let d;for(;null!==(d=s.exec(i));){const[f,_,g]=d;l.push({attr:_,varName:g})}return l}compileTemplate(){return ht.compileTemplate(this.html,this.vars)}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-viewer-node"]],inputs:{vars:"vars"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","agentName","inputStr","vars"],[3,"onClose","onSave","html","inputStr","vars"],[3,"innerHTML"]],template:function(i,s){1&i&&e.DNE(0,hv,9,4,"div",0)(1,gv,1,3,"button",1)(2,bv,6,4,"div",2)(3,xv,1,1,"div",3),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf","render"==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Qr.V,_n,Zt]})),r})();function Cv(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function kv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Url "),e.k0s(),e.j41(3,"div")(4,"input",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function Sv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Cookies (`name: value` per line) "),e.k0s(),e.j41(3,"div")(4,"textarea",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function wv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Nv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",26),e.EFF(3," Add new "),e.k0s()()}}function Ev(t,r){if(1&t&&(e.j41(0,"div",22)(1,"label",19),e.EFF(2," Request Body "),e.k0s(),e.DNE(3,wv,3,5,"div",23)(4,Nv,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Iv(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,kv,5,1,"div",17)(2,Sv,5,1,"div",17)(3,Ev,5,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","cookies"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key)}}function Tv(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Av(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Tv,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let dm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","webAccess"),(0,m.A)(this,"desc","Get content from a websize")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"cookies",value:""},{key:"body",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}]}updateInputFormat(i){this.setConfig("body",i),this.noticeUpdate()}run(i,s,l,d,f,_){let g=this.findConfig("url",l),v=this.findConfig("cookies",l),b=this.findConfig("body",l);new je(i).fetchUrl({url:g,key:v,args:b}).subscribe(x=>{let I=this.setupOutputValue(x.data,l);_(I)})}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-web-access-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"form-label"],["type","text",1,"form-control","text-small",3,"ngModelChange","ngModel"],["rows","3","wrap","off",1,"form-control","text-small",2,"white-space","pre",3,"ngModelChange","ngModel"],[1,"mb-2"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Cv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Iv,4,3,"div",5),e.k0s()(),e.DNE(8,Av,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Request Body Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Rv,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","body"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,Zt,_n]})),r})();function Fv(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Mv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function jv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Inputs "),e.k0s()()}}function $v(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Inputs "),e.k0s(),e.DNE(3,Mv,3,5,"div",14)(4,jv,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Gv(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,$v,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key)}}function Dv(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Vv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Dv,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Ov(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Fv,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Gv,2,1,"div",8),e.k0s()(),e.DNE(8,Vv,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function zv(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Bv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Lv(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Bv,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key))}}let pm=(()=>{var t;class r extends rn{constructor(...i){super(...i),(0,m.A)(this,"type","zip"),(0,m.A)(this,"desc","Zip your files")}getClassType(){return r}getConfig(){return[{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-zipData",type:"string",demo:""}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,Ov,9,4,"div",0)(1,zv,1,3,"button",1)(2,Lv,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Qr.V,_n,Zt]})),r})();function Pv(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Xv(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},k.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Yv(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},k.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Hv(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Uv(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const pc=({children:t,className:r,...n})=>k.createElement("button",{type:"button",className:Lt(["react-flow__controls-button",r]),...n},t);pc.displayName="ControlButton";const Wv=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),fm=({style:t,showZoom:r=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:l,onZoomOut:d,onFitView:f,onInteractiveChange:_,className:g,children:v,position:b="bottom-left"})=>{const C=Le(),[x,I]=(0,k.useState)(!1),{isInteractive:T,minZoomReached:R,maxZoomReached:E}=De(Wv,vt),{zoomIn:$,zoomOut:V,fitView:j}=Ji();return(0,k.useEffect)(()=>{I(!0)},[]),x?k.createElement(Zl,{className:Lt(["react-flow__controls",g]),position:b,style:t,"data-testid":"rf__controls"},r&&k.createElement(k.Fragment,null,k.createElement(pc,{onClick:()=>{$(),l?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},k.createElement(Pv,null)),k.createElement(pc,{onClick:()=>{V(),d?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:R},k.createElement(Xv,null))),n&&k.createElement(pc,{className:"react-flow__controls-fitview",onClick:()=>{j(s),f?.()},title:"fit view","aria-label":"fit view"},k.createElement(Yv,null)),i&&k.createElement(pc,{className:"react-flow__controls-interactive",onClick:()=>{C.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),_?.(!T)},title:"toggle interactivity","aria-label":"toggle interactivity"},k.createElement(T?Uv:Hv,null)),v):null};fm.displayName="Controls";var Zv=(0,k.memo)(fm),Ho=function(t){return t.Lines="lines",t.Dots="dots",t.Cross="cross",t}(Ho||{});function Jv({color:t,dimensions:r,lineWidth:n}){return k.createElement("path",{stroke:t,strokeWidth:n,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function Kv({color:t,radius:r}){return k.createElement("circle",{cx:r,cy:r,r,fill:t})}const qv={[Ho.Dots]:"#91919a",[Ho.Lines]:"#eee",[Ho.Cross]:"#e2e2e2"},Qv={[Ho.Dots]:1,[Ho.Lines]:1,[Ho.Cross]:6},e2=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function mm({id:t,variant:r=Ho.Dots,gap:n=20,size:i,lineWidth:s=1,offset:l=2,color:d,style:f,className:_}){const g=(0,k.useRef)(null),{transform:v,patternId:b}=De(e2,vt),C=d||qv[r],x=i||Qv[r],I=r===Ho.Dots,T=r===Ho.Cross,R=Array.isArray(n)?n:[n,n],E=[R[0]*v[2]||1,R[1]*v[2]||1],$=x*v[2],V=T?[$,$]:E,j=I?[$/l,$/l]:[V[0]/l,V[1]/l];return k.createElement("svg",{className:Lt(["react-flow__background",_]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:g,"data-testid":"rf__background"},k.createElement("pattern",{id:b+t,x:v[0]%E[0],y:v[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},I?k.createElement(Kv,{color:C,radius:$/l}):k.createElement(Jv,{dimensions:V,color:C,lineWidth:s})),k.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${b+t})`}))}mm.displayName="Background";var t2=(0,k.memo)(mm);const n2=({props:t})=>(t.minZoom=.25,t.maxZoom=1,t.autoPanOnConnect=!0,t.autoPanOnNodeDrag=!0,t.connectionRadius=20,t.elementsSelectable=!0,t.elevateNodesOnSelect=!0,t.fitView=!1,t.connectOnClick=!0,t.edgesFocusable=!0,t.nodesFocusable=!0,t.nodesDraggable=!0,t.nodesConnectable=!0,t.snapToGrid=!1,t.snapGrid=[15,15],t.nodeOrigin=[0,0],t.noPanClassName="nopan",t.connectionMode=Ut.Strict,k.createElement(Af,{...t},k.createElement(Zv,null),k.createElement(t2,{color:"dark"==t.theme?"#383948":"#dadadf",gap:20,size:2}))),o2=({props:t})=>k.createElement(tf,null,k.createElement(n2,{props:t}));let _m=(()=>{var t;class r extends Xf{constructor(...i){super(...i),(0,m.A)(this,"ngReactComponent",o2),(0,m.A)(this,"nodes",void 0),(0,m.A)(this,"edges",void 0),(0,m.A)(this,"defaultEdgeOptions",void 0),(0,m.A)(this,"onNodeClick",new e.bkB),(0,m.A)(this,"onNodeDoubleClick",new e.bkB),(0,m.A)(this,"onNodeMouseEnter",new e.bkB),(0,m.A)(this,"onNodeMouseMove",new e.bkB),(0,m.A)(this,"onNodeMouseLeave",new e.bkB),(0,m.A)(this,"onNodeContextMenu",new e.bkB),(0,m.A)(this,"onNodeDragStart",new e.bkB),(0,m.A)(this,"onNodeDrag",new e.bkB),(0,m.A)(this,"onNodeDragStop",new e.bkB),(0,m.A)(this,"onEdgeClick",new e.bkB),(0,m.A)(this,"onEdgeUpdate",new e.bkB),(0,m.A)(this,"onEdgeContextMenu",new e.bkB),(0,m.A)(this,"onEdgeMouseEnter",new e.bkB),(0,m.A)(this,"onEdgeMouseMove",new e.bkB),(0,m.A)(this,"onEdgeMouseLeave",new e.bkB),(0,m.A)(this,"onEdgeDoubleClick",new e.bkB),(0,m.A)(this,"onEdgeUpdateStart",new e.bkB),(0,m.A)(this,"onEdgeUpdateEnd",new e.bkB),(0,m.A)(this,"onNodesChange",new e.bkB),(0,m.A)(this,"onEdgesChange",new e.bkB),(0,m.A)(this,"onNodesDelete",new e.bkB),(0,m.A)(this,"onEdgesDelete",new e.bkB),(0,m.A)(this,"onSelectionDragStart",new e.bkB),(0,m.A)(this,"onSelectionDrag",new e.bkB),(0,m.A)(this,"onSelectionDragStop",new e.bkB),(0,m.A)(this,"onSelectionStart",new e.bkB),(0,m.A)(this,"onSelectionEnd",new e.bkB),(0,m.A)(this,"onSelectionContextMenu",new e.bkB),(0,m.A)(this,"onConnect",new e.bkB),(0,m.A)(this,"onConnectStart",new e.bkB),(0,m.A)(this,"onConnectEnd",new e.bkB),(0,m.A)(this,"onClickConnectStart",new e.bkB),(0,m.A)(this,"onClickConnectEnd",new e.bkB),(0,m.A)(this,"onInit",new e.bkB),(0,m.A)(this,"onMove",new e.bkB),(0,m.A)(this,"onMoveStart",new e.bkB),(0,m.A)(this,"onMoveEnd",new e.bkB),(0,m.A)(this,"onSelectionChange",new e.bkB),(0,m.A)(this,"onPaneScroll",new e.bkB),(0,m.A)(this,"onPaneClick",new e.bkB),(0,m.A)(this,"onPaneContextMenu",new e.bkB),(0,m.A)(this,"onPaneMouseEnter",new e.bkB),(0,m.A)(this,"onPaneMouseMove",new e.bkB),(0,m.A)(this,"onPaneMouseLeave",new e.bkB),(0,m.A)(this,"onError",new e.bkB),(0,m.A)(this,"id",void 0),(0,m.A)(this,"nodeTypes",void 0),(0,m.A)(this,"edgeTypes",void 0),(0,m.A)(this,"connectionLineType",void 0),(0,m.A)(this,"connectionLineStyle",void 0),(0,m.A)(this,"connectionLineComponent",void 0),(0,m.A)(this,"connectionLineContainerStyle",void 0),(0,m.A)(this,"connectionMode",void 0),(0,m.A)(this,"deleteKeyCode",void 0),(0,m.A)(this,"selectionKeyCode",void 0),(0,m.A)(this,"selectionOnDrag",void 0),(0,m.A)(this,"selectionMode",void 0),(0,m.A)(this,"panActivationKeyCode",void 0),(0,m.A)(this,"multiSelectionKeyCode",void 0),(0,m.A)(this,"zoomActivationKeyCode",void 0),(0,m.A)(this,"snapToGrid",void 0),(0,m.A)(this,"snapGrid",void 0),(0,m.A)(this,"onlyRenderVisibleElements",void 0),(0,m.A)(this,"nodesDraggable",void 0),(0,m.A)(this,"nodesConnectable",void 0),(0,m.A)(this,"nodesFocusable",void 0),(0,m.A)(this,"nodeOrigin",void 0),(0,m.A)(this,"edgesFocusable",void 0),(0,m.A)(this,"elementsSelectable",void 0),(0,m.A)(this,"selectNodesOnDrag",void 0),(0,m.A)(this,"panOnDrag",void 0),(0,m.A)(this,"minZoom",void 0),(0,m.A)(this,"maxZoom",void 0),(0,m.A)(this,"defaultViewport",void 0),(0,m.A)(this,"translateExtent",void 0),(0,m.A)(this,"preventScrolling",void 0),(0,m.A)(this,"nodeExtent",void 0),(0,m.A)(this,"defaultMarkerColor",void 0),(0,m.A)(this,"zoomOnScroll",void 0),(0,m.A)(this,"zoomOnPinch",void 0),(0,m.A)(this,"panOnScroll",void 0),(0,m.A)(this,"panOnScrollSpeed",void 0),(0,m.A)(this,"panOnScrollMode",void 0),(0,m.A)(this,"zoomOnDoubleClick",void 0),(0,m.A)(this,"edgeUpdaterRadius",void 0),(0,m.A)(this,"noDragClassName",void 0),(0,m.A)(this,"noWheelClassName",void 0),(0,m.A)(this,"noPanClassName",void 0),(0,m.A)(this,"fitView",void 0),(0,m.A)(this,"fitViewOptions",void 0),(0,m.A)(this,"connectOnClick",void 0),(0,m.A)(this,"attributionPosition",void 0),(0,m.A)(this,"proOptions",void 0),(0,m.A)(this,"elevateNodesOnSelect",void 0),(0,m.A)(this,"elevateEdgesOnSelect",void 0),(0,m.A)(this,"disableKeyboardA11y",void 0),(0,m.A)(this,"autoPanOnNodeDrag",void 0),(0,m.A)(this,"autoPanOnConnect",void 0),(0,m.A)(this,"connectionRadius",void 0)}}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-reactflow"]],inputs:{nodes:"nodes",edges:"edges",defaultEdgeOptions:"defaultEdgeOptions",id:"id",nodeTypes:"nodeTypes",edgeTypes:"edgeTypes",connectionLineType:"connectionLineType",connectionLineStyle:"connectionLineStyle",connectionLineComponent:"connectionLineComponent",connectionLineContainerStyle:"connectionLineContainerStyle",connectionMode:"connectionMode",deleteKeyCode:"deleteKeyCode",selectionKeyCode:"selectionKeyCode",selectionOnDrag:"selectionOnDrag",selectionMode:"selectionMode",panActivationKeyCode:"panActivationKeyCode",multiSelectionKeyCode:"multiSelectionKeyCode",zoomActivationKeyCode:"zoomActivationKeyCode",snapToGrid:"snapToGrid",snapGrid:"snapGrid",onlyRenderVisibleElements:"onlyRenderVisibleElements",nodesDraggable:"nodesDraggable",nodesConnectable:"nodesConnectable",nodesFocusable:"nodesFocusable",nodeOrigin:"nodeOrigin",edgesFocusable:"edgesFocusable",elementsSelectable:"elementsSelectable",selectNodesOnDrag:"selectNodesOnDrag",panOnDrag:"panOnDrag",minZoom:"minZoom",maxZoom:"maxZoom",defaultViewport:"defaultViewport",translateExtent:"translateExtent",preventScrolling:"preventScrolling",nodeExtent:"nodeExtent",defaultMarkerColor:"defaultMarkerColor",zoomOnScroll:"zoomOnScroll",zoomOnPinch:"zoomOnPinch",panOnScroll:"panOnScroll",panOnScrollSpeed:"panOnScrollSpeed",panOnScrollMode:"panOnScrollMode",zoomOnDoubleClick:"zoomOnDoubleClick",edgeUpdaterRadius:"edgeUpdaterRadius",noDragClassName:"noDragClassName",noWheelClassName:"noWheelClassName",noPanClassName:"noPanClassName",fitView:"fitView",fitViewOptions:"fitViewOptions",connectOnClick:"connectOnClick",attributionPosition:"attributionPosition",proOptions:"proOptions",elevateNodesOnSelect:"elevateNodesOnSelect",elevateEdgesOnSelect:"elevateEdgesOnSelect",disableKeyboardA11y:"disableKeyboardA11y",autoPanOnNodeDrag:"autoPanOnNodeDrag",autoPanOnConnect:"autoPanOnConnect",connectionRadius:"connectionRadius"},outputs:{onNodeClick:"onNodeClick",onNodeDoubleClick:"onNodeDoubleClick",onNodeMouseEnter:"onNodeMouseEnter",onNodeMouseMove:"onNodeMouseMove",onNodeMouseLeave:"onNodeMouseLeave",onNodeContextMenu:"onNodeContextMenu",onNodeDragStart:"onNodeDragStart",onNodeDrag:"onNodeDrag",onNodeDragStop:"onNodeDragStop",onEdgeClick:"onEdgeClick",onEdgeUpdate:"onEdgeUpdate",onEdgeContextMenu:"onEdgeContextMenu",onEdgeMouseEnter:"onEdgeMouseEnter",onEdgeMouseMove:"onEdgeMouseMove",onEdgeMouseLeave:"onEdgeMouseLeave",onEdgeDoubleClick:"onEdgeDoubleClick",onEdgeUpdateStart:"onEdgeUpdateStart",onEdgeUpdateEnd:"onEdgeUpdateEnd",onNodesChange:"onNodesChange",onEdgesChange:"onEdgesChange",onNodesDelete:"onNodesDelete",onEdgesDelete:"onEdgesDelete",onSelectionDragStart:"onSelectionDragStart",onSelectionDrag:"onSelectionDrag",onSelectionDragStop:"onSelectionDragStop",onSelectionStart:"onSelectionStart",onSelectionEnd:"onSelectionEnd",onSelectionContextMenu:"onSelectionContextMenu",onConnect:"onConnect",onConnectStart:"onConnectStart",onConnectEnd:"onConnectEnd",onClickConnectStart:"onClickConnectStart",onClickConnectEnd:"onClickConnectEnd",onInit:"onInit",onMove:"onMove",onMoveStart:"onMoveStart",onMoveEnd:"onMoveEnd",onSelectionChange:"onSelectionChange",onPaneScroll:"onPaneScroll",onPaneClick:"onPaneClick",onPaneContextMenu:"onPaneContextMenu",onPaneMouseEnter:"onPaneMouseEnter",onPaneMouseMove:"onPaneMouseMove",onPaneMouseLeave:"onPaneMouseLeave",onError:"onError"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,s){},styles:[".react-flow{direction:ltr}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1;cursor:grab}.react-flow__pane.selection{cursor:pointer}.react-flow__pane.dragging{cursor:grabbing}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow .react-flow__edges{pointer-events:none;overflow:visible}.react-flow__edge-path,.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1;fill:none}.react-flow__edge{pointer-events:visibleStroke;cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge:focus .react-flow__edge-path,.react-flow__edge:focus-visible .react-flow__edge-path{stroke:#555}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-textbg{fill:#fff}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__connectionline{z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:grab}.react-flow__node.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background:#1a192b;border:1px solid white;border-radius:100%}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:-4px;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{top:50%;left:-4px;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:#ffffff80;padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:3px;width:150px;font-size:12px;color:#222;text-align:center;border-width:1px;border-style:solid;border-color:#1a192b;background-color:#fff}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:0 1px 4px 1px #00000014}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background-color:#f0f0f040}.react-flow__nodesselection-rect,.react-flow__selection{background:#0059dc14;border:1px dotted rgba(0,89,220,.8)}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls{box-shadow:0 0 2px 1px #00000014}.react-flow__controls-button{border:none;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;display:flex;justify-content:center;align-items:center;width:16px;height:16px;cursor:pointer;-webkit-user-select:none;user-select:none;padding:5px}.react-flow__controls-button:hover{background:#f4f4f4}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__minimap{background-color:#fff}.react-flow__minimap svg{display:block}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:#3367d9;transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:#3367d9;border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}\n","ngx-reactflow .react-flow__handle{height:12px;width:12px;border-width:2px}ngx-reactflow .selected .card{border:2px solid #696cff!important}\n"],encapsulation:2})),r})();const i2=()=>["Backspace","Delete"];function r2(t,r){if(1&t){const n=e.RV6();e.j41(0,"a",38),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.addNode(s))}),e.j41(1,"div",39)(2,"span",40),e.EFF(3),e.k0s()(),e.j41(4,"div",41)(5,"h6",42),e.EFF(6),e.k0s(),e.j41(7,"small",43),e.EFF(8),e.k0s()()()}if(2&t){let n;const i=e.XpG().$implicit;e.R7$(3),e.JRh(i.type[0]),e.R7$(3),e.JRh(null!==(n=i.displayName)&&void 0!==n?n:i.type),e.R7$(2),e.JRh(i.desc)}}function s2(t,r){if(1&t&&(e.j41(0,"h6",44),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(n)}}function a2(t,r){if(1&t&&(e.j41(0,"li"),e.DNE(1,r2,9,3,"a",36)(2,s2,2,1,"h6",37),e.k0s()),2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!i.isString(n)),e.R7$(),e.Y8G("ngIf",i.isString(n))}}function l2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",19)(2,"ngx-reactflow",20),e.bIt("onConnect",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onConnect(s))})("onEdgesDelete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesDelete(s))})("onNodesDelete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesDelete(s))})("onEdgesChange",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesChange(s))})("onNodesChange",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesChange(s))}),e.k0s()(),e.j41(3,"div",21)(4,"div",22)(5,"button",23),e.nrm(6,"span",24),e.k0s(),e.j41(7,"mat-menu",null,0)(9,"div",25)(10,"ul",26),e.DNE(11,a2,3,2,"li",27),e.k0s()()()(),e.j41(12,"button",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.save())}),e.nrm(13,"span"),e.k0s(),e.j41(14,"span",29),e.EFF(15),e.k0s()(),e.j41(16,"div",30)(17,"button",31),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.close())}),e.nrm(18,"span",32),e.k0s()(),e.j41(19,"div",33)(20,"button",34),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.run())}),e.nrm(21,"span",35),e.k0s()()()}if(2&t){const n=e.sdS(8),i=e.XpG();e.R7$(2),e.Y8G("nodes",i.nodes)("edges",i.edges)("nodeTypes",i.nodeTypes)("deleteKeyCode",e.lJ4(13,i2)),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(6),e.Y8G("ngForOf",i.avaiableNodes),e.R7$(),e.ZvI("btn btn-icon btn-",i.saved?"success":"secondary"," mt-3 ml-3"),e.R7$(),e.ZvI("tf-icons bx bx-",i.saved?"check":"save"," bx-22px"),e.R7$(2),e.JRh(null==i.curApp?null:i.curApp.name)}}let c2=(()=>{var t;class r{isString(i){return"string"==typeof i}constructor(i,s,l,d,f){(0,m.A)(this,"route",void 0),(0,m.A)(this,"appRef",void 0),(0,m.A)(this,"injector",void 0),(0,m.A)(this,"ngZone",void 0),(0,m.A)(this,"appService",void 0),(0,m.A)(this,"reactFlow",void 0),(0,m.A)(this,"nodes",[]),(0,m.A)(this,"edges",[]),(0,m.A)(this,"avaiableNodes",["Input",(new qf).getNodeSpec(),"Data Processor",(new em).getNodeSpec(),(new Uf).getNodeSpec(),(new im).getNodeSpec(),(new Yf).getNodeSpec(),(new dm).getNodeSpec(),(new Hf).getNodeSpec(),(new am).getNodeSpec(),(new Qf).getNodeSpec(),(new sm).getNodeSpec(),(new cm).getNodeSpec(),"Storage",(new rm).getNodeSpec(),(new lm).getNodeSpec(),"Data Query",(new nm).getNodeSpec(),"Output",(new um).getNodeSpec(),(new pm).getNodeSpec(),(new tm).getNodeSpec()]),(0,m.A)(this,"data",[]),(0,m.A)(this,"nodeTypes",void 0),(0,m.A)(this,"id",0),(0,m.A)(this,"saved",!1),(0,m.A)(this,"curApp",void 0),(0,m.A)(this,"showMenu",!1),(0,m.A)(this,"newCollectionName",""),(0,m.A)(this,"newCollectionSpec",""),this.route=i,this.appRef=s,this.injector=l,this.ngZone=d,this.appService=f,this.nodeTypes={form:(new qf).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),embedding:(new Uf).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),database:(new rm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),search:(new nm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),agent:(new em).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),htmlViewer:(new um).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),router:(new tm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),spliter:(new im).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),vectorDatabase:(new lm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),apiInvoker:(new Yf).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToAudio:(new Hf).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),transcription:(new am).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToImage:(new Qf).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),text:(new sm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),videoRender:(new cm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),zip:(new pm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),webAccess:(new dm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)})}}ngOnInit(){var i=this;document.addEventListener("keydown",function(){var s=(0,Ce.A)(function*(l){let d=i.nodes.filter(_=>_.selected)[0],f=window.getSelection()?.toString();if(d&&!f&&l.ctrlKey&&"c"===l.key)try{yield navigator.clipboard.writeText(JSON.stringify(d.data))}catch(_){console.error("Failed to copy text: ",_)}});return function(l){return s.apply(this,arguments)}}()),document.addEventListener("paste",function(){var s=(0,Ce.A)(function*(l){try{const d=yield navigator.clipboard.readText();if(!d.startsWith('{"id":"n'))return;l.preventDefault();let f=JSON.parse(d);f.x+=20,f.y+=20,f.inputs=[],f.links=[],i.addNode(f)}catch(d){console.error("Failed to read from clipboard: ",d)}});return function(l){return s.apply(this,arguments)}}()),this.route.paramMap.subscribe(s=>{this.id=+(s.get("id")??"0"),this.load()})}save(i){this.curApp.config=JSON.stringify(this.data),this.appService.save(this.curApp).subscribe(s=>{this.curApp.id=+s.data,this.saved=!0,i&&i(+s.data),setTimeout(()=>{this.saved=!1},2e3)})}onNodesChange(i){this.ngZone.run(()=>{this.nodes=_e(i[0],this.nodes);let s=i[0][0].id,l=this.nodes.find(f=>f.id==s),d=this.data.find(f=>f.id==s);d&&(d.x=l.position.x,d.y=l.position.y)})}onEdgesChange(i){this.ngZone.run(()=>{this.edges=pt(i[0],this.edges)})}onNodesDelete(i){let s=i[0][0].id;this.data=this.data.filter(d=>d.id!=s);for(let d of this.data){let f=d.links.indexOf(s);f>=0&&d.links.splice(f,1)}let l=document.getElementById("settingModal-"+s);l&&l.parentNode?.removeChild(l)}onEdgesDelete(i){let s=i[0][0].source,l=i[0][0].target,d=this.data.filter(_=>_.id==s)[0],f=d.links.indexOf(l);f>=0&&d.links.splice(f,1),this.updateInput(this.data.filter(_=>_.id==l)[0]),this.reRender()}onConnect(i){let s=this.data.filter(l=>l.id==i[0].source)[0];s.links.push(i[0].target),this.updateInput(s),this.ngZone.run(()=>{let l=na(i[0],this.edges);for(let d of l)d.animated=!0,d.type="bezier",d.style={strokeWidth:2,stroke:"#009688"};this.edges=l,this.reRender()})}distinctByName(i){const s=new Set;return i.filter(l=>!s.has(l.name)&&(s.add(l.name),!0))}updateInput(i){i.inputs=[];let s=this.data.filter(d=>d.links.includes(i.id));for(let d of s)i.inputs.push(...d.inputs),i.inputs.push(...d.outputs);i.inputs=this.distinctByName(i.inputs);let l=this.data.filter(d=>i.links.includes(d.id));if(l&&0!=l.length)for(let d of l)this.updateInput(d)}reRender(){let i=[...this.nodes];this.nodes=i}onNodeConfigChange(i){i&&(this.updateInput(i),this.reRender())}addNode(i){let s=0==this.data.length?1:Math.max(...this.data.map(_=>+_.id.substring(1)))+1,l=JSON.parse(JSON.stringify(i));l.id=`n${s}`,this.data.push(l),this.showMenu=!1;let d=this.nodes.filter(_=>_.selected)[0];d&&(d.selected=!1,l.x=d.position.x+20,l.y=d.position.y+20);let f=[...this.nodes];f.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,selected:!0,position:{x:l.x??150,y:l.y??150}}),this.nodes=f}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(i=>{this.curApp=i,this.data=JSON.parse(i.config),this.renderGraph()})}newApp(){this.renderGraph()}close(){window.location.href="/vi/admin/ai/dashboard"}run(i){i&&(this.curApp=i),this.save(s=>{window.location.href="/vi/admin/ai/"+s})}renderGraph(){const i=[],s=[];for(let l of this.data){s.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,position:{x:l.x??0,y:l.y??0}});for(let d of l.links)i.push({source:l.id,target:d,id:l.id+"_"+d,type:"bezier",animated:!0,style:{strokeWidth:2,stroke:"#009688"}})}this.edges=i,this.nodes=s}toggleMenu(){this.showMenu=!this.showMenu}setupNewCollection(){let i=this.nodes.filter(s=>s.selected)[0];if(i){let s={};for(let l of i.data.inputs){let d=l.name.split("-")[0];s[l.name.substring(d.length+1)]="json"==l.type?l.demo:l.type}this.newCollectionSpec=JSON.stringify(s,null,4)}}closeNewCollection(){this.newCollectionName="",this.newCollectionSpec=""}addCollection(){this.appService.addCollection({name:this.newCollectionName,spec:this.newCollectionSpec}).subscribe(i=>{})}addVCollection(){this.appService.addVCollection({name:this.newCollectionName}).subscribe(i=>{})}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(xt.nX),e.rXU(e.o8S),e.rXU(e.zZn),e.rXU(e.SKi),e.rXU(je))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow"]],viewQuery:function(i,s){if(1&i&&e.GBs(_m,5),2&i){let l;e.mGM(l=e.lsd())&&(s.reactFlow=l.first)}},standalone:!0,features:[e.aNF],decls:39,vars:6,consts:[["menu",""],[4,"ngIf"],["id","btnShowAddCollectionModal","data-bs-toggle","modal",1,"d-none",3,"click"],["data-bs-backdrop","static","id","AddCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","Folder Name",1,"form-control",3,"ngModelChange","ngModel"],[3,"onChange","data"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click"],["id","btnShowAddVCollectionModal","data-bs-toggle","modal",1,"d-none"],["data-bs-backdrop","static","id","AddVCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","Collection Name",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3"],[2,"width","100%","height","100vh","position","absolute"],[3,"onConnect","onEdgesDelete","onNodesDelete","onEdgesChange","onNodesChange","nodes","edges","nodeTypes","deleteKeyCode"],[2,"position","absolute","z-index","999"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-icon","btn-primary","mt-3","ml-3","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-22px"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"ml-3"],[2,"position","absolute","z-index","999","right","10px","top","15px"],["type","button",1,"btn","btn-label-secondary","p-2",3,"click"],[1,"tf-icons","bx","bx-x","bx-22px"],[2,"position","absolute","z-index","999","bottom","40px","right","40px"],["type","button",1,"btn","btn-icon","btn-success",3,"click"],[1,"tf-icons","bx","bx-play","bx-22px"],["href","javascript:void(0);","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-header text-uppercase",4,"ngIf"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"avatar","mr-3"],[1,"avatar-initial","rounded-circle","bg-label-success"],[1,"list-content"],[1,"mb-0","text-capitalize"],[1,"text-muted"],[1,"dropdown-header","text-uppercase"]],template:function(i,s){1&i&&(e.DNE(0,l2,22,14,"div",1),e.j41(1,"button",2),e.bIt("click",function(){return s.setupNewCollection()}),e.k0s(),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),e.EFF(7," Your Folders "),e.k0s()(),e.j41(8,"div",8)(9,"div",9)(10,"label",10),e.EFF(11,"Folder Name"),e.k0s(),e.j41(12,"input",11),e.mxI("ngModelChange",function(d){return e.DH7(s.newCollectionName,d)||(s.newCollectionName=d),d}),e.k0s()(),e.j41(13,"div",9)(14,"label",10),e.EFF(15,"Data Specification"),e.k0s(),e.j41(16,"app-json-editor",12),e.bIt("onChange",function(d){return s.newCollectionSpec=d}),e.k0s()(),e.j41(17,"div")(18,"button",13),e.bIt("click",function(){return s.closeNewCollection()}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",14),e.bIt("click",function(){return s.addCollection()}),e.EFF(21,"Create Folder"),e.k0s()()()()()(),e.nrm(22,"button",15),e.j41(23,"div",16)(24,"div",4)(25,"div",5)(26,"div",6)(27,"h5",7),e.EFF(28," Manage Vector Collections "),e.k0s()(),e.j41(29,"div",8)(30,"div",9)(31,"label",10),e.EFF(32,"Collection Name"),e.k0s(),e.j41(33,"input",17),e.mxI("ngModelChange",function(d){return e.DH7(s.newCollectionName,d)||(s.newCollectionName=d),d}),e.k0s()(),e.j41(34,"div")(35,"button",18),e.EFF(36,"Close"),e.k0s(),e.j41(37,"button",14),e.bIt("click",function(){return s.addVCollection()}),e.EFF(38,"Create Collection"),e.k0s()()()()()()),2&i&&(e.Y8G("ngIf",null==s.curApp?null:s.curApp.name),e.R7$(),e.BMQ("data-bs-target","#AddCollectionModal"),e.R7$(11),e.R50("ngModel",s.newCollectionName),e.R7$(4),e.Y8G("data",s.newCollectionSpec),e.R7$(6),e.BMQ("data-bs-target","#AddVCollectionModal"),e.R7$(11),e.R50("ngModel",s.newCollectionName))},dependencies:[_m,L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,b_,Z.Cn,Z.kk,Z.Cp],styles:[".avatar[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%]{background:#3dbe3d;padding:10px;color:#fff;border-radius:50%;margin-right:10px;text-transform:uppercase;display:inline-block;width:39px;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})),r})(),u2=(()=>{var t;class r extends Ae.H{}return t=r,(0,m.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ai-master-page"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[xt.n3],encapsulation:2})),r})();function d2(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function p2(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function f2(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function m2(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function _2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,p2,7,0,"div",13)(4,f2,3,4,"span",14)(5,m2,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(s))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",i.isReading),e.R7$(),e.Y8G("ngIf",!i.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!i.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let h2=(()=>{var t;class r{constructor(){(0,m.A)(this,"name",""),(0,m.A)(this,"onAddFile",new e.bkB),(0,m.A)(this,"onStartReading",new e.bkB),(0,m.A)(this,"files",[]),(0,m.A)(this,"isReading",!1),(0,m.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",s=>{if(this.err="",s.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,d={file:s,name:this.name,content:""};switch(this.files.push(d),ht.getFileExt(s.name)){case"pdf":_=new Kf;break;case"docx":_=new Zf;break;case"jpg":case"png":case"jpeg":_=new Jf}this.isReading=!0,this.onStartReading.emit(),_?.readFile(s).then(g=>{d.content=g,this.isReading=!1,this.onAddFile.emit(d)})})},200)}remove(i){this.files.splice(i,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(i,s){1&i&&(e.DNE(0,d2,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,_2,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&i&&(e.Y8G("ngIf",s.err),e.R7$(),e.Mz_("id","dropzone-basic-",s.name,""),e.R7$(8),e.Y8G("ngForOf",s.files))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.qT,N.cb,N.cV,Zt]})),r})();function g2(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function v2(t,r){if(1&t&&(e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,g2,1,0,"i",6),e.k0s(),e.nrm(4,"input",7),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function y2(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function b2(t,r){if(1&t&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function x2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,y2,1,0,"i",6),e.k0s(),e.j41(4,"select",9),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,b2,2,2,"option",10),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function C2(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function k2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,C2,1,0,"i",6),e.k0s(),e.j41(4,"textarea",12),e.bIt("input",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.autoResize(s.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function S2(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function w2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,S2,1,0,"i",6),e.k0s(),e.j41(4,"app-file-control",13),e.bIt("onStartReading",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onStartReadingFile())})("onAddFile",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.onAddFile(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",i.nodeData.id+"-"+n.key)}}function N2(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",8),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function E2(t,r){if(1&t&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function I2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2),e.DNE(3,N2,1,0,"i",6),e.k0s(),e.j41(4,"select",9),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,E2,2,2,"option",10),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",i.lstKeys)}}function T2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,v2,5,6,"div",3)(2,x2,6,5,"div",3)(3,k2,6,6,"div",3)(4,w2,5,3,"div",3)(5,I2,6,5,"div",3),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}let A2=(()=>{var t;class r{set data(i){this.nodeData=i}constructor(i,s){(0,m.A)(this,"ngZone",void 0),(0,m.A)(this,"appService",void 0),(0,m.A)(this,"appId",0),(0,m.A)(this,"nodeData",void 0),(0,m.A)(this,"lstKeys",[]),(0,m.A)(this,"onUploaded",new e.bkB),(0,m.A)(this,"onStartUpload",new e.bkB),this.ngZone=i,this.appService=s}ngOnInit(){let i=!1;for(let s of this.nodeData.conf)s.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+s.key)??"","key"==s.value.type&&(i=!0);i&&this.appService?.listKeys().subscribe(s=>{this.lstKeys=s}),setTimeout(()=>{document.querySelectorAll(".form-node-renderred textarea").forEach(l=>{this.autoResize(l)})},200)}autoResize(i){i.style.height="50px",i.style.overflowY="hidden",i.style.height=i.scrollHeight+10+"px"}showInfo(i){alert(i)}onAddFile(i){this.onUploaded.emit(i)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(je))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],inputs:{appId:"appId",data:"data"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"form-node-renderred"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,T2,6,5,"div",2),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("ngForOf",s.nodeData.conf))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,h2]})),r})();function R2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",3)(1,"img",4),e.bIt("mousedown",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.setSelection(s))}),e.k0s()()}if(2&t){const n=r.$implicit,i=r.index,s=e.XpG();e.ZvI("scene-layer scene-mode-player-",s.ratio916?"9-16":"16-9",""),e.Mz_("id","dom-",n.objName,""),e.R7$(),e.ZvI("s-element player scene-mode-player-",s.ratio916?"9-16":"16-9"," h-100"),e.Y8G("src",s.ratio916?s.demo916[i]:s.demo169[i],e.B4B)}}function F2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"span",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.play())}),e.k0s(),e.j41(2,"span",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.resetPos())}),e.k0s(),e.j41(3,"span",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.edit())}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px cursor-pointer me-3"),e.R7$(2),e.ZvI("tf-icons bx bx-",n.isEditMode?"x":"pencil"," bx-22px cursor-pointer me-3")}}let hm=(()=>{var t;class r{constructor(){(0,m.A)(this,"varname",""),(0,m.A)(this,"mode","editor"),(0,m.A)(this,"lstObj",[]),(0,m.A)(this,"animName",""),(0,m.A)(this,"ratio916",!1),(0,m.A)(this,"demo169",["/ai-mod-assets/images/demo-16-9.png","/ai-mod-assets/images/demo-16-9-1.png"]),(0,m.A)(this,"demo916",["/ai-mod-assets/images/demo-9-16.png","/ai-mod-assets/images/demo-9-16-1.png"]),(0,m.A)(this,"info",""),(0,m.A)(this,"projectId","ObjAnim"),(0,m.A)(this,"sheet",void 0),(0,m.A)(this,"isPlaying",!1),(0,m.A)(this,"isEditMode",!1),(0,m.A)(this,"animObjs",[]),(0,m.A)(this,"canMove",{}),(0,m.A)(this,"startPos",[0,0]),(0,m.A)(this,"curTranslate",[]),(0,m.A)(this,"isDrag",!1),(0,m.A)(this,"obj",void 0),(0,m.A)(this,"curIdx",0)}set conf(i){let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("anim-editor");if(l){let d=JSON.parse(l.innerHTML);this.varname=l.getAttribute("var-name")??"",this.animName=d.animName,this.lstObj=d.listObj}}ngAfterViewInit(){localStorage.removeItem("theatre-0.4.persistent");let s=!1;this.projectId="ObjAnim"+(new Date).getTime();try{Theatre.studio.onSelectionChange(l=>{this.obj=l[0],this.obj&&(this.curIdx=this.lstObj.findIndex(d=>d.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),s=!0}catch{ht.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js").then(()=>{Theatre.studio.initialize(),Theatre.studio.onSelectionChange(d=>{this.obj=d[0],this.obj&&(this.curIdx=this.lstObj.findIndex(f=>f.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),this.loadAnim()})}s&&this.loadAnim(),this.info=JSON.stringify(this.lstObj,null,2)}setSelection(i){Theatre.studio.setSelection([this.animObjs[i]])}play(){this.sheet&&(this.isPlaying?(this.isPlaying=!1,this.sheet.sequence.pause()):(this.isPlaying=!0,this.sheet.sequence.play({iterationCount:1/0})))}edit(){this.isEditMode?(this.isEditMode=!1,Theatre.studio.ui.hide()):(this.isEditMode=!0,Theatre.studio.ui.restore())}loadAnim(){localStorage.removeItem("theatre-0.4.persistent");let i={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:2.5,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]};this.curIdx=0,this.curTranslate=[];let l=0;for(let _ of this.lstObj){this.canMove[_.objName]={},this.curTranslate.push([0,0]);let g={};for(let x of _.propAnims)g[x.propName]=x.keyframes.length>0?x.keyframes[0].value:0,"x"==x.propName&&(this.canMove[_.objName].x=!0),"y"==x.propName&&(this.canMove[_.objName].y=!0);i.sheetsById.Sheet1.staticOverrides.byObject[_.objName]=g;let v={},b={},C=0;for(let x of _.propAnims){let I=`${C}-vfsKxxzE`,T={type:"BasicKeyframedTrack",__debugName:`${_.objName}:["${x.propName}"]`,keyframes:[]},R=0,E=[];for(let $ of x.keyframes)0==R&&E.push([$.cubicBezier[0],$.cubicBezier[1]]),E.push([$.cubicBezier[0],$.cubicBezier[1]]),E.push([$.cubicBezier[2],$.cubicBezier[3]]),T.keyframes.push({id:`${l}F${C}zl_kv${R}V`,position:$.timePosition,connectedRight:!0,handles:[E[2*R][0],E[2*R][1],E[2*R+1][0],E[2*R+1][1]],value:$.value,type:"bezier"}),R++;v[I]=T,b[`["${x.propName}"]`]=I,C++}i.sheetsById.Sheet1.sequence.tracksByObject[_.objName]={trackData:v,trackIdByPropPath:b},l++}const f=Theatre.core.getProject(this.projectId,{state:i}).sheet("Sheet1");this.sheet=f,this.animObjs=[];for(let _ of this.lstObj){let g={};const v={};for(let x of _.propAnims){g[x.propName]=x.range&&x.range.length>0?Theatre.core.types.number(x.default,{range:x.range}):x.default;let I=x.domStyle.split(":"),T=ht.minusToCamelCase(I[0].trim()),R=I[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+x.propName+"}");v[T]=v[T]?v[T]+" "+R:R}let b=f.object(_.objName,g);this.animObjs.push(b);const C=_.objName;b.onValuesChange(x=>{const I=document.getElementById("dom-"+C),T=/\$\{(.*?)\}/g;for(const R in v)if(v.hasOwnProperty(R)){let $,E=v[R];for(;null!==($=T.exec(v[R]));)E=E.replaceAll($[0],x[$[1]]);I&&(I.style[R]=E.replaceAll(";",""))}}),Theatre.studio.setSelection([b])}document.onmouseup=_=>{_.preventDefault(),this.endDrag(_)},document.onmousemove=_=>{_.preventDefault(),this.onMove(_)}}startDrag(i){i.preventDefault(),this.obj&&"editor"==this.mode&&(this.isDrag=!0,this.startPos=[i.x,i.y])}onMove(i){if(!this.isDrag)return;let s=i.x-this.startPos[0]+this.curTranslate[this.curIdx][0],l=i.y-this.startPos[1]+this.curTranslate[this.curIdx][1];Theatre.studio.transaction(({set:d})=>{this.canMove[this.lstObj[this.curIdx].objName].x&&d(this.obj.props.x,s),this.canMove[this.lstObj[this.curIdx].objName].y&&d(this.obj.props.y,l)})}endDrag(i){this.isDrag&&(this.isDrag=!1,this.curTranslate[this.curIdx]=[i.x-this.startPos[0]+this.curTranslate[this.curIdx][0],i.y-this.startPos[1]+this.curTranslate[this.curIdx][1]])}resetPos(){this.curTranslate[this.curIdx]=[0,0],Theatre.studio.transaction(({set:i})=>{i(this.obj.props.x,0),i(this.obj.props.y,0)})}getValue(){const i=Theatre.studio.createContentOfSaveFile(this.projectId),s=this.convertProjectStateToList(i);return{varName:this.varname,value:JSON.stringify({animName:this.animName,listObj:s})}}convertProjectStateToList(i){const s=[],l=i.sheetsById;for(const d in l){const _=l[d].sequence.tracksByObject;let g=0;for(const v in _){const{trackData:b,trackIdByPropPath:C}=_[v],x=[];let I=0;for(const T in C){const E=b[C[T]];if(E&&E.keyframes){const $=E.keyframes.map(X=>({timePosition:X.position,cubicBezier:X.handles,value:X.value}));let V=[];for(let X of $)V.push([X.cubicBezier[0],X.cubicBezier[1]]),V.push([X.cubicBezier[2],X.cubicBezier[3]]);V.push(V[0]);for(let X=0;X<$.length;X++)$[X].cubicBezier=[V[2*X+1][0],V[2*X+1][1],V[2*X+2][0],V[2*X+2][1]];const j=T.replace(/\["|\"]/g,"");x.push({propName:j,domStyle:this.lstObj[g].propAnims[I].domStyle,default:$[0]?.value||0,keyframes:$})}I++}s.push({objName:v,propAnims:x}),g++}}return s}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-anim-editor"]],inputs:{varname:"varname",mode:"mode",conf:"conf",ratio916:"ratio916"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[[3,"mousedown"],[3,"id","class",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[3,"id"],["alt","imgElement",3,"mousedown","src"],[1,"text-center","mt-2"],[3,"click"],[1,"tf-icons","bx","bx-reset","bx-22px","cursor-pointer","me-3",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.bIt("mousedown",function(d){return s.startDrag(d)}),e.DNE(1,R2,2,9,"div",1),e.k0s(),e.DNE(2,F2,4,6,"div",2)),2&i&&(e.ZvI("scene-container player scene-mode-player-",s.ratio916?"9-16":"16-9",""),e.R7$(),e.Y8G("ngForOf",s.lstObj),e.R7$(),e.Y8G("ngIf","editor"==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto;background-color:#282b2fcc}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 16);height:calc(var(--video-16) / 16);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 16 + 7px);top:calc(var(--video-9) / 32 - 9px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 16 + 7px);top:calc(var(--video-16) / 32 - 9px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}"]})),r})();function M2(t,r){if(1&t&&(e.j41(0,"div",3)(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.jsCode,"\n        ")}}let gm=(()=>{var t;class r{constructor(){(0,m.A)(this,"varname",""),(0,m.A)(this,"jsCode",""),(0,m.A)(this,"html",""),(0,m.A)(this,"err",""),(0,m.A)(this,"showCode",!1)}set jsInfo(i){let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("js-runner");l&&(this.jsCode=l.innerHTML.split("```javascript")[1].split("```")[0].replaceAll("&lt;","<").replaceAll("&gt;",">"),this.varname=l.getAttribute("var-name")??"",s.removeChild(l),this.html=s.innerHTML,setTimeout(()=>{this.run()},400))}getValue(){return{varName:this.varname,value:this.jsCode}}run(){try{this.err="",new Function(this.jsCode)()}catch(i){this.err=i.message}}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-js-runner"]],inputs:{varname:"varname",jsInfo:"jsInfo"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[["id","js-result-view"],["id","js-source-code",4,"ngIf"],["title","Show/Hide source code",1,"bx","bx-code","text-white","cursor-pointer",3,"click"],["id","js-source-code"]],template:function(i,s){1&i&&(e.nrm(0,"div",0),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,M2,6,1,"div",1),e.j41(4,"i",2),e.bIt("click",function(){return s.showCode=!s.showCode}),e.k0s()),2&i&&(e.R7$(2),e.JRh(s.err),e.R7$(),e.Y8G("ngIf",s.showCode))},dependencies:[L.MD,L.bT,N.YN]})),r})();function j2(t,r){if(1&t){const n=e.RV6();e.j41(0,"img",7),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.selectImg(s))}),e.k0s()}if(2&t){let n;const i=r.$implicit,s=r.index,l=e.XpG(2);e.ZvI("img-small-pick ",(null!==(n=null==l._scene?null:l._scene.selectedImg)&&void 0!==n?n:0)==s?"selected":"",""),e.Y8G("src",i,e.B4B)}}function $2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,j2,1,4,"img",6),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-mode-",n.mode,"-pick"),e.R7$(),e.Y8G("ngForOf",null==n._scene?null:n._scene.imageUrl)}}function G2(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-num-",n.getSize(),""),e.R7$(),e.JRh(n.idx)}}function D2(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==i._scene?null:i._scene.transitionName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function V2(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"i",8),e.j41(2,"ul",9)(3,"li")(4,"a",10),e.nrm(5,"i"),e.EFF(6,"None"),e.k0s()(),e.DNE(7,D2,4,4,"li",11),e.k0s()()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-transit-",n.getSize(),""),e.R7$(),e.ZvI("dropdown-toggle hide-arrow bx bx-exit cursor-pointer ",null!=n._scene&&n._scene.transitionName?"text-link":"text-muted",""),e.R7$(4),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.transitionName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstTransition)}}function O2(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"div",12),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-time scene-time-progress-",n.getSize(),""),e.R7$(),e.Aen("width:"+n.progress+"%")}}function z2(t,r){if(1&t&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"secondsToTime"),e.nI1(4,"secondsToTime"),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,2,n.curTime),"/",e.bMT(4,4,n.duration),"")}}function B2(t,r){if(1&t){const n=e.RV6();e.j41(0,"audio",15),e.bIt("timeupdate",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.updatePlayTime())})("ended",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.isPlaying=!1)}),e.nrm(1,"source",16),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("src",null==n._scene?null:n._scene.audioUrl,e.B4B)}}function L2(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.setAnim(s.animName))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==i._scene?null:i._scene.animationName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function P2(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",i.capStyle==n?"text-link":"invisible",""),e.R7$(),e.JRh(n)}}function X2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.play())}),e.nrm(2,"span"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.nrm(5,"i",21),e.k0s(),e.j41(6,"ul",9)(7,"li")(8,"a",10),e.nrm(9,"i"),e.EFF(10,"None"),e.k0s()(),e.DNE(11,L2,4,4,"li",11),e.k0s()(),e.j41(12,"div",19)(13,"button",22),e.nrm(14,"i",23),e.k0s(),e.j41(15,"ul",9)(16,"li")(17,"a",10),e.nrm(18,"i"),e.EFF(19,"None"),e.k0s()(),e.DNE(20,P2,4,4,"li",11),e.k0s()(),e.j41(21,"div",19)(22,"button",24),e.nrm(23,"i",25),e.k0s(),e.j41(24,"ul",9)(25,"li",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genImage())}),e.j41(26,"a",10),e.nrm(27,"i",27),e.EFF(28,"Re-Generate Image"),e.k0s()(),e.j41(29,"li",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genVideo())}),e.j41(30,"a",10),e.nrm(31,"i",28),e.EFF(32,"Image to Video"),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px"),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.animationName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstImgAnim),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==n.capStyle?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstCapStyle)}}let Y2=(()=>{var t;class r{constructor(){(0,m.A)(this,"_scene",void 0),(0,m.A)(this,"mode","player"),(0,m.A)(this,"size","9:16"),(0,m.A)(this,"idx",0),(0,m.A)(this,"selected",!1),(0,m.A)(this,"showTransit",!0),(0,m.A)(this,"capStyle",""),(0,m.A)(this,"animCore",void 0),(0,m.A)(this,"projectId",""),(0,m.A)(this,"onChangeCapStyle",new e.bkB),(0,m.A)(this,"onChangeAnim",new e.bkB),(0,m.A)(this,"lstCapStyle",["wordHighlight","lineHighlight"]),(0,m.A)(this,"lstImgAnim",[]),(0,m.A)(this,"lstTransition",[]),(0,m.A)(this,"isPlaying",!1),(0,m.A)(this,"sheet",void 0),(0,m.A)(this,"curTime",0),(0,m.A)(this,"curAnimName",""),(0,m.A)(this,"progress",0),(0,m.A)(this,"duration",0)}set scene(i){this._scene=i,this.progress=0,this.duration=this._scene.duration,this.curTime=0;let s=document.getElementById("audioElement");s&&(s.pause(),s.currentTime=0,setTimeout(()=>{s.load()},400)),this.curAnimName="",this.sheet=void 0}ngAfterViewInit(){if("player"!=this.mode)return;localStorage.removeItem("theatre-0.4.persistent");let s=!1;try{this.animCore=Theatre.core,s=!0}catch{ht.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js").then(()=>{this.animCore=Theatre.core})}}changeCapStyle(i){this.capStyle=i,this.onChangeCapStyle.emit(i)}changeAnim(i){this._scene.animationName=i,this.onChangeAnim.emit(i)}set lstAnim(i){"player"==this.mode&&(this.lstImgAnim=i.filter(s=>1==s.listObj.length),this.lstTransition=i.filter(s=>2==s.listObj.length))}ngOnInit(){}setAnim(i){this._scene.animationName=i,this.loadAnim()}getSize(){return this.size.replace(":","-")}genImage(){alert(this._scene?.imagePrompt)}genVideo(){alert(this._scene?.imagePrompt)}getAnimation(i){return this.lstImgAnim.find(s=>s.animName==i)}selectImg(i){this._scene&&(this._scene.selectedImg=i)}play(){let i=10;!this.curAnimName&&this._scene?.animationName&&(this.loadAnim(),i=500),setTimeout(()=>{let s=document.getElementById("audioElement");this.isPlaying?(s&&s.pause(),this.sheet&&this.sheet.sequence.pause()):(s&&s.play(),this.sheet&&this.sheet.sequence.play().then(()=>{this.isPlaying=!1})),this.isPlaying=!this.isPlaying},i)}loadAnim(){this.animCore&&this._scene?.animationName&&(this.curAnimName=this._scene.animationName,this.projectId="ObjAnim"+(new Date).getTime(),this.parseAnim(["dom-img-player"],this.duration))}parseAnim(i,s){localStorage.removeItem("theatre-0.4.persistent");let d={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:s,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]},_=0,g=this.getAnimation(this._scene?.animationName??"")?.listObj??[];if(0==g.length)return;let v=0;for(let T of g)for(let R of T.propAnims)for(let E of R.keyframes)E.timePosition>v&&(v=E.timePosition);for(let T of g){let R={};for(let j of T.propAnims)R[j.propName]=j.keyframes.length>0?j.keyframes[0].value:0;d.sheetsById.Sheet1.staticOverrides.byObject[T.objName]=R;let E={},$={},V=0;for(let j of T.propAnims){let Y=`${V}-vfsKxxzE`,H={type:"BasicKeyframedTrack",__debugName:`${T.objName}:["${j.propName}"]`,keyframes:[]},X=0,ee=[];for(let U of j.keyframes)0==X&&ee.push([U.cubicBezier[0],U.cubicBezier[1]]),ee.push([U.cubicBezier[0],U.cubicBezier[1]]),ee.push([U.cubicBezier[2],U.cubicBezier[3]]),H.keyframes.push({id:`${_}F${V}zl_kv${X}V`,position:1*U.timePosition,connectedRight:!0,handles:[ee[2*X][0],ee[2*X][1],ee[2*X+1][0],ee[2*X+1][1]],value:U.value,type:"bezier"}),X++;E[Y]=H,$[`["${j.propName}"]`]=Y,V++}d.sheetsById.Sheet1.sequence.tracksByObject[T.objName]={trackData:E,trackIdByPropPath:$},_++}const C=Theatre.core.getProject(this.projectId,{state:d}),x=C.sheet("Sheet1");this.sheet=x;let I=[];_=0;for(let T of g){let R={};const E={};for(let j of T.propAnims){R[j.propName]=j.range&&j.range.length>0?Theatre.core.types.number(j.default,{range:j.range}):j.default;let Y=j.domStyle.split(":"),H=Y[0].trim(),X=Y[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+j.propName+"}");E[H]=E[H]?E[H]+" "+X:X}let $=x.object(T.objName,R);I.push($);const V=i[_];$.onValuesChange(j=>{const Y=document.getElementById(V),H=/\$\{(.*?)\}/g;for(const X in E)if(E.hasOwnProperty(X)){let U,ee=E[X];for(;null!==(U=H.exec(E[X]));)ee=ee.replaceAll(U[0],j[U[1]]);Y&&(Y.style[X]=ee.replaceAll(";",""))}}),_++}C.ready.then(()=>{this.sheet=x})}updatePlayTime(){let i=document.getElementById("audioElement");i&&(this.progress=i.currentTime/i.duration*100,this.duration=i.duration,this.curTime=i.currentTime)}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-view"]],inputs:{scene:"scene",mode:"mode",size:"size",idx:"idx",selected:"selected",showTransit:"showTransit",capStyle:"capStyle",lstAnim:"lstAnim"},outputs:{onChangeCapStyle:"onChangeCapStyle",onChangeAnim:"onChangeAnim"},standalone:!0,features:[e.aNF],decls:10,vars:25,consts:[[3,"id"],["alt","imgElement",3,"src"],[3,"class",4,"ngIf"],["class","scene-layer scene-duration small",4,"ngIf"],["id","audioElement","class","d-none",3,"timeupdate","ended",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],["alt","imgElement",3,"class","src","click",4,"ngFor","ngForOf"],["alt","imgElement",3,"click","src"],["matTooltip","Transition","data-bs-toggle","dropdown","aria-expanded","false"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"scene-layer","scene-duration","small"],[1,"duration"],["id","audioElement",1,"d-none",3,"timeupdate","ended"],["type","audio/mpeg",3,"src"],[1,"text-center","mt-2"],["type","button","matTooltip","Play",1,"btn","btn-icon","btn-label-primary",3,"click"],[1,"btn-group","ms-3"],["type","button","matTooltip","Animation","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-timer"],["type","button","matTooltip","Caption Style","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-captions"],["type","button","matTooltip","Generate with AI","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bxs-magic-wand"],[3,"click"],[1,"bx","bx-image","scaleX-n1-rtl","me-3"],[1,"bx","bx-movie-play","scaleX-n1-rtl","me-3"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"]],template:function(i,s){if(1&i&&(e.j41(0,"div")(1,"div",0),e.nrm(2,"img",1),e.k0s(),e.DNE(3,$2,2,4,"div",2)(4,G2,2,4,"div",2)(5,V2,8,10,"div",2)(6,O2,2,5,"div",2)(7,z2,5,6,"div",3)(8,B2,2,1,"audio",4),e.k0s(),e.DNE(9,X2,33,11,"div",5)),2&i){let l;e.ee0("scene-container ",s.mode," scene-mode-",s.mode,"-",s.getSize()," ",s.selected?"selected":"",""),e.R7$(),e.STu("scene-layer scene-mode-",s.mode,"-",s.getSize(),""),e.Mz_("id","dom-img-",s.mode,""),e.R7$(),e.ZWY("s-element ",s.mode," scene-mode-",s.mode,"-",s.getSize()," h-100"),e.Y8G("src",null==s._scene?null:s._scene.imageUrl[null!==(l=null==s._scene?null:s._scene.selectedImg)&&void 0!==l?l:0],e.B4B),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","thumb"==s.mode),e.R7$(),e.Y8G("ngIf",s.showTransit&&"thumb"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode&&(null==s._scene?null:s._scene.audioUrl)),e.R7$(),e.Y8G("ngIf","player"==s.mode)}},dependencies:[L.MD,L.Sq,L.bT,N.YN,ln.uc,ln.oV,x_],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 24);height:calc(var(--video-16) / 24);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 24 + 7px);top:calc(var(--video-9) / 46 - 11px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 24 + 7px);top:calc(var(--video-16) / 46 - 11px)}.scene-num-16-9[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-9) / 46 - 11px)}.scene-num-9-16[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-16) / 46 - 11px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}.img-small-pick[_ngcontent-%COMP%]{width:40px;display:block;margin-bottom:5px;border-radius:5px}.scene-mode-player-pick[_ngcontent-%COMP%]{position:fixed;margin-left:-45px}.img-small-pick.selected[_ngcontent-%COMP%]{outline:2px solid #fff}.btn-label-secondary[_ngcontent-%COMP%]{color:#8592a3!important;border-color:#0000;background:#393c50}.btn-label-secondary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#788393!important;color:#fff!important;box-shadow:0 .125rem .25rem #8592a366!important}.btn-label-primary[_ngcontent-%COMP%]{color:#696cff!important;border-color:#0000;background:#35365f}.btn-label-primary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#5f61e6!important;color:#fff!important;box-shadow:0 .125rem .25rem #696cff66!important}.scene-duration[_ngcontent-%COMP%]{bottom:5px;right:10px;opacity:.8}"]})),r})();function H2(t,r){if(1&t&&(e.j41(0,"div")(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.error,"\n        ")}}function U2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-scene-view",5),e.bIt("onChangeCapStyle",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.changeCapStyle(s))}),e.k0s()}if(2&t){let n;const i=e.XpG(2);e.Y8G("mode","player")("lstAnim",i.lstAnim)("capStyle",null!==(n=null==i.lstScene?null:i.lstScene.cap_style)&&void 0!==n?n:"")("scene",i.curScene)}}function W2(t,r){if(1&t&&(e.j41(0,"div",3),e.DNE(1,U2,1,4,"app-scene-view",4),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curScene)}}function Z2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.select(s))}),e.nrm(1,"app-scene-view",11),e.k0s()}if(2&t){const n=r.$implicit,i=r.index,s=e.XpG(2);e.R7$(),e.Y8G("mode","thumb")("selected",i==s.curIdx)("showTransit",i+1<s.lstScene.list_scenes.length)("idx",i+1)("scene",n)}}function J2(t,r){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.DNE(3,Z2,2,5,"div",9),e.k0s()()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",null==n.lstScene?null:n.lstScene.list_scenes)}}let vm=(()=>{var t;class r{constructor(i){(0,m.A)(this,"app",void 0),(0,m.A)(this,"sceneInfo",'<scene-editor var-name="final-scene" anim-db="anim">{\n        "list_scenes": [\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/188693b0fa2147719389523c4192c99a.png","https://images.piclumen.com/normal/20241221/16/49df6b1abde1419b803ed7cbe74dc7c9.png","https://images.piclumen.com/normal/20241221/16/f05705a71df94fec9d1dfaffb348ef3e.png","https://images.piclumen.com/normal/20241221/16/33c4764f82a441588e68d903837ff0e8.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A beautiful, enchanting garden with luminescent flowers, sparkling streams, and fairy lights hanging from the trees. In the center, Lila the Curious Fairy hovers gently above a bed of multicolored tulips, her lavender wings shimmering in the moonlight\'s glow. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/170fe0d8ab564847aa974469f74f4992.png","https://images.piclumen.com/normal/20241221/16/9b2469bc7bc6421fae9caeeb8d9584b5.png","https://images.piclumen.com/normal/20241221/16/a7609dac63a445bd86a050af174072c1.png","https://images.piclumen.com/normal/20241221/16/cc4e75cc24974e379825ef30d006b761.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Oliver the Wise Owl perched on a sturdy oak branch, wearing his ornate monocle. Lila sits nearby, listening intently, her eyes wide with curiosity. The backdrop showcases a scenic view of the garden bathed in golden twilight, with gentle breezes rustling the leaves. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/251ec29683514a0086fa73f60725f1d4.png","https://images.piclumen.com/normal/20241221/16/f71fd6e1fb21418886f377ba82e1dc39.png","https://images.piclumen.com/normal/20241221/16/f89496edc9e548b596a4698f1e672365.png","https://images.piclumen.com/normal/20241221/16/fdce48c02d68445080e2d988b29d71b3.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Close-up of Oliver as he narrates his tale with deep, expressive gestures. Lila, full of wonder, leans closer, her wings shimmering faintly behind her. Sunbeams dance across the garden, illuminating their faces with soft, magical light. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/cabeb362c9164eebb2683241a21518b9.png","https://images.piclumen.com/normal/20241221/16/14dbdcd6af4c49b78c046748cf83c8d0.png","https://images.piclumen.com/normal/20241221/16/25ff7aeb238f4c6da80bfdba627e811a.png","https://images.piclumen.com/normal/20241221/16/df8754a9c2ea4420ac94771805f4c3fb.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila the Curious Fairy flying gracefully over a vibrant garden path. Below, Hugo the Playful Squirrel follows with spirited leaps. The path is lined with flowers that seem to sway with excitement and tall, whispering grasses. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/1da1c0ae592244ee9e35aa1c471a4ddd.png","https://images.piclumen.com/normal/20241221/16/fd8a08e51ec24e68b313763c84d64af0.png","https://images.piclumen.com/normal/20241221/16/ba3b4cefb2154578a5f5659a5604ee93.png","https://images.piclumen.com/normal/20241221/16/6735728d42164b099d6916f731135dad.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila and Hugo amidst an enchanting section of the garden, surrounded by clusters of bioluminescent mushrooms and arches of luminous roses. A gentle breeze guides them, ruffling Hugo\u2019s fluffy tail. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/a4233ab51efe4e1a95da8cfd4907af49.png","https://images.piclumen.com/normal/20241221/16/623cdcd0371e46af9f415e3f342feac5.png","https://images.piclumen.com/normal/20241221/16/59311e5a2b594637b46fc3363321475a.png","https://images.piclumen.com/normal/20241221/16/ebf8d09d89a14da4b57c299b1c894daa.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A small, intricately designed door, partially obscured by leafy vines. Lila hovers right in front of it, eyes wide with excitement, while Hugo stands beside her, tapping the door eagerly. The maple tree casts dappled sunlight onto the ground, creating a mystical atmosphere. style: whimsical 3D Pixar style"\n            },\n        \n        ],\n        "size": "9:16",\n        "cap_style": "word"\n    }</scene-editor>'),(0,m.A)(this,"onSave",new e.bkB),(0,m.A)(this,"lstScene",void 0),(0,m.A)(this,"lstAnim",[]),(0,m.A)(this,"varName",""),(0,m.A)(this,"error",""),(0,m.A)(this,"curIdx",0),(0,m.A)(this,"curScene",void 0),this.app=i}getValue(){return{varName:this.varName,value:JSON.stringify(this.lstScene)}}ngOnInit(){let i=document.createElement("div");i.innerHTML=this.sceneInfo;let s=i.querySelector("scene-editor"),l=this.sceneInfo,d="";s&&(l=s.innerHTML,this.varName=s.getAttribute("var-name")??"",d=s.getAttribute("anim-db")??"");try{this.lstScene=ht.parseJson(l)}catch(f){this.error=f+"\n"+ht.replaceAllBase64Urls(l)}(this.lstScene?.list_scenes.length??0)>0&&(this.curScene=this.lstScene?.list_scenes[0]),this.app.listData({name:"",spec:d}).subscribe(f=>{this.lstAnim=f.map(_=>JSON.parse(_.content))})}select(i){this.curIdx=i,this.curScene=this.lstScene?.list_scenes[i]}changeCapStyle(i){this.lstScene.cap_style=i}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(je))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-editor"]],inputs:{sceneInfo:"sceneInfo"},outputs:{onSave:"onSave"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","layout-bot",4,"ngIf"],[1,"mb-3"],[3,"mode","lstAnim","capStyle","scene","onChangeCapStyle",4,"ngIf"],[3,"onChangeCapStyle","mode","lstAnim","capStyle","scene"],[1,"layout-bot"],[1,"card"],[1,"card-body","list-scenes"],["class","mb-3",3,"click",4,"ngFor","ngForOf"],[1,"mb-3",3,"click"],[3,"mode","selected","showTransit","idx","scene"]],template:function(i,s){1&i&&e.DNE(0,H2,6,1,"div",0)(1,W2,2,1,"div",1)(2,J2,4,1,"div",2),2&i&&(e.Y8G("ngIf",s.error),e.R7$(),e.Y8G("ngIf",!s.error),e.R7$(),e.Y8G("ngIf",!s.error))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Y2],styles:[".list-scenes[_ngcontent-%COMP%]{width:115px;max-height:95vh;overflow-y:auto}.layout-bot[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px}"]})),r})();const K2=["chatInput"],q2=["interacComp"];function Q2(t,r){if(1&t&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.chatboxInfo.msg),e.npT)}}function ey(t,r){if(1&t&&e.nrm(0,"app-anim-editor",11,0),2&t){const n=e.XpG(2);e.Y8G("conf",n.animEditorInfo)}}function ty(t,r){if(1&t&&e.nrm(0,"app-js-runner",12,0),2&t){const n=e.XpG(2);e.Y8G("jsInfo",n.jsRunnerInfo)}}function ny(t,r){if(1&t&&e.nrm(0,"app-scene-editor",13,0),2&t){const n=e.XpG(2);e.Y8G("sceneInfo",n.sceneEditorInfo)}}function oy(t,r){if(1&t&&(e.j41(0,"div",7),e.DNE(1,ey,2,1,"app-anim-editor",8)(2,ty,2,1,"app-js-runner",9)(3,ny,2,1,"app-scene-editor",10),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.animEditorInfo),e.R7$(),e.Y8G("ngIf",n.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",n.sceneEditorInfo)}}function iy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"textarea",14,1),e.bIt("input",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.autoResize())})("keydown",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.keydown(s))}),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.userMsg,s)||(l.userMsg=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("readOnly",n.isRunning),e.R50("ngModel",n.userMsg)}}let ry=(()=>{var t;class r{constructor(i,s){(0,m.A)(this,"api",void 0),(0,m.A)(this,"zone",void 0),(0,m.A)(this,"chatInput",void 0),(0,m.A)(this,"interacComp",void 0),(0,m.A)(this,"chatboxInfo",void 0),(0,m.A)(this,"elId",""),(0,m.A)(this,"agentRunner",void 0),(0,m.A)(this,"onAgentResponseComplete",new e.bkB),(0,m.A)(this,"lastValue",void 0),(0,m.A)(this,"sceneEditorInfo",""),(0,m.A)(this,"animEditorInfo",""),(0,m.A)(this,"jsRunnerInfo",""),(0,m.A)(this,"animDB",""),(0,m.A)(this,"default",!0),(0,m.A)(this,"isRunning",!1),(0,m.A)(this,"userMsg",""),(0,m.A)(this,"onAction",new e.bkB),(0,m.A)(this,"onRunJS",new e.bkB),(0,m.A)(this,"onBind",new e.bkB),(0,m.A)(this,"showChatBox",!1),(0,m.A)(this,"queue",[]),(0,m.A)(this,"curFullmsg",""),this.api=i,this.zone=s}getValue(){return this.interacComp&&!this.default?this.interacComp.getValue():this.showChatBox?this.lastValue:void 0}ngOnInit(){this.agentRunner=new jd(this.api,new Md((i,s)=>{this.renderChunk(s)},i=>{this.queue.push({str:i,t:-1})})),this.agentRunner.setAgentName(this.chatboxInfo.req.Req.Name),this.agentRunner.setVars(this.chatboxInfo.req.Req.Vars??[]);for(let i of this.chatboxInfo.req.Req.Messages)this.agentRunner.addMessage(i);this.chatboxInfo.req?.Req.Type&&this.agentRunner.setMemType(this.chatboxInfo.req?.Req.Type),"__AGENT_STREAM___"==this.chatboxInfo.msg&&setTimeout(()=>{this.send()},500)}agentDone(i){this.zone.run(()=>{this.isRunning=!1;let s=document.querySelector(".msg-loading"),l=s?s.innerHTML:"",d=s?.querySelector("chatbox")?.getAttribute("var-name")??"";this.lastValue={value:i,varName:d},document.querySelector(".msg-loading").className="msg-assistant",this.onAgentResponseComplete.emit({msg:i,html:l}),this.renderExternalUI(l),this.renderAction(i)})}reset(){this.sceneEditorInfo="",this.animEditorInfo="",this.jsRunnerInfo="",this.animDB="",this.default=!0}renderExternalUI(i){this.reset();let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("scene-editor");return l?(this.sceneEditorInfo=i,void(this.default=!1)):(l=s.querySelector("anim-editor"),l?(this.animEditorInfo=i,void(this.default=!1)):(l=s.querySelector("js-runner"),l?(this.jsRunnerInfo=i,void(this.default=!1)):void 0))}send(i){if(i?.preventDefault(),this.isRunning)return;let s=document.getElementById("chat-his-"+this.elId);if(s){if(this.userMsg){let d=document.createElement("div");d.className="msg-user badge bg-label-primary p-3 mb-3 text-wrap text-start",d.innerHTML=this.userMsg,s.appendChild(d)}let l=document.createElement("div");l.className="msg-loading",l.innerHTML='<div class="card p-5 mb-3">Running...</div>',s.appendChild(l)}this.isRunning=!0,this.userMsg&&this.agentRunner.addUserMessage(this.userMsg),this.agentRunner.send(),this.userMsg="",this.curFullmsg=""}renderAction(i){setTimeout(()=>{let s=this,l=document.querySelectorAll("[bs-action]");for(let _ of l){let g=_.getAttribute("bs-action"),v=document.createElement("div");v.className="pt-3 text-center",v.innerHTML=`<span class="btn text-link p-0">${g.split("->")[0].split(":")[2]}</span>`,_.appendChild(v),_.removeAttribute("bs-action"),v.addEventListener("click",function(){s.onAction.emit({act:g,el:_})})}let d=document.querySelectorAll("[bs-run]");for(let _ of d){let g=_.getAttribute("bs-run");s.onRunJS.emit({act:g,el:_})}let f=document.querySelectorAll("[bs-edit]");for(let _ of f){let g=_.getAttribute("bs-edit");s.onBind.emit({act:g,el:_})}},2e3)}renderControl(){let s=document.querySelector("#chat-his-"+this.elId)?.querySelector(".language-json"),l=s?.innerHTML;if(l)try{l=JSON.stringify(JSON.parse(l.trim()),null,2),s.innerHTML=l.trim()}catch{}}renderChunk(i){let s=i?i.length:0,l=0;for(;l<s;){const d=Math.floor(9*Math.random())+2,f=Math.floor(16*Math.random())+5;this.queue.push({str:i.substring(l,l+d),t:f}),0==l&&1==this.queue.length&&this.startInsertAnim(),l+=d}}startInsertAnim(){let i=this.queue.shift();if(i){if(-1==i.t)return void this.agentDone(i.str);this.curFullmsg+=i.str,this.renderMsg(this.curFullmsg),setTimeout(()=>{this.startInsertAnim()},i.t)}}renderMsg(i){let s=ht.parseIncompleteJson(i);if(s&&s!=i&&(s=JSON.stringify(s)),!s)return"";let l=new Map,d=this.chatboxInfo.req?.Req.Vars;for(let g of d){let v=g.split("::");l.set(v[0],g.substring(v[0].length+2))}l.set(this.chatboxInfo.req.Output.Name,s);let f=ht.compileTemplate(this.chatboxInfo.html,l);if(document.getElementById("chat-his-"+this.elId)){let g=document.querySelector(".msg-loading");if(g){let v=document.createElement("code");v.innerHTML=f,v.querySelector("chatbox")&&(this.showChatBox=!0);let C=v.querySelectorAll('[bs-data="markdown-view"]');for(let x of C)x.innerHTML=ht.markdownToHtml(x.innerHTML.trim());return g.innerHTML=v.innerHTML,this.renderControl(),g.innerHTML}}return""}autoResize(){const i=this.chatInput?.nativeElement;i.style.height="37px",i.style.overflowY="hidden";let s=i.scrollHeight;s>120&&(s=120,i.style.overflowY="auto"),i.style.height=s+"px"}keydown(i){!i.shiftKey&&"Enter"==i.key&&(i.preventDefault(),""!=this.userMsg.trim()&&this.send(i),setTimeout(()=>{this.autoResize()},100))}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(ct),e.rXU(e.SKi))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-chatbox"]],viewQuery:function(i,s){if(1&i&&(e.GBs(K2,5),e.GBs(q2,5)),2&i){let l;e.mGM(l=e.lsd())&&(s.chatInput=l.first),e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{chatboxInfo:"chatboxInfo",elId:"elId"},outputs:{onAgentResponseComplete:"onAgentResponseComplete",onAction:"onAction",onRunJS:"onRunJS",onBind:"onBind"},standalone:!0,features:[e.aNF],decls:5,vars:8,consts:[["interacComp",""],["chatInput",""],[1,"chatbox"],[3,"id"],[3,"innerHTML",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"innerHTML"],[1,"mt-3"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf"],[3,"jsInfo"],[3,"sceneInfo"],["rows","1","placeholder","Enter your message...",1,"form-control",3,"input","keydown","ngModelChange","readOnly","ngModel"]],template:function(i,s){1&i&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,Q2,2,3,"div",4),e.k0s(),e.DNE(3,oy,4,3,"div",5)(4,iy,3,2,"div",5),e.k0s()),2&i&&(e.R7$(),e.HbH(s.default||s.isRunning?"":"d-none"),e.Mz_("id","chat-his-",s.elId,""),e.R7$(),e.Y8G("ngIf","__AGENT_STREAM___"!=s.chatboxInfo.msg),e.R7$(),e.Y8G("ngIf",!s.default&&!s.isRunning),e.R7$(),e.Y8G("ngIf",s.showChatBox))},dependencies:[L.MD,L.bT,N.YN,N.me,N.BC,N.vS,Df,hm,vm,gm],styles:["textarea[_ngcontent-%COMP%]{resize:none;overflow-y:hidden;height:37px}"]})),r})(),sy=(()=>{var t;class r{constructor(){(0,m.A)(this,"zipInfo","")}ngOnInit(){let i=JSON.parse(this.decodeHtml(this.zipInfo.trim()));setTimeout((0,Ce.A)(function*(){let s=yield ht.zipFiles(i,"file.zip",_=>{let g=document.querySelector(".__ZIP_FILE__");g&&(g.innerHTML="Zipping..."+_+"/"+i.length)});const l=URL.createObjectURL(s),d=document.createElement("a");d.href=l,d.download="file.zip",d.innerHTML="Download (file.zip)";let f=document.querySelector(".__ZIP_FILE__");f&&(f.innerHTML="",f.appendChild(d))}),500)}decodeHtml(i){const s=document.createElement("textarea");return s.innerHTML=i,s.value}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip"]],inputs:{zipInfo:"zipInfo"},standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[[1,"__ZIP_FILE__"]],template:function(i,s){1&i&&e.nrm(0,"div",0)},dependencies:[L.MD,N.YN]})),r})();const ay=["interacComp"];function ly(t,r){if(1&t&&e.nrm(0,"app-chatbox",7,0),2&t){const n=e.XpG();e.Y8G("chatboxInfo",n.chatboxInfo)}}function cy(t,r){if(1&t&&e.nrm(0,"app-scene-editor",8,0),2&t){const n=e.XpG();e.Y8G("sceneInfo",n.sceneEditorInfo)}}function uy(t,r){if(1&t&&e.nrm(0,"app-anim-editor",9,0),2&t){const n=e.XpG();e.Y8G("conf",n.animEditorInfo)}}function dy(t,r){if(1&t&&e.nrm(0,"app-js-runner",10,0),2&t){const n=e.XpG();e.Y8G("jsInfo",n.jsRunnerInfo)}}function py(t,r){if(1&t&&e.nrm(0,"app-zip",11),2&t){const n=e.XpG();e.Y8G("zipInfo",n.zipInfo)}}function fy(t,r){if(1&t&&(e.nrm(0,"div",12),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.template),e.npT)}}let my=(()=>{var t;class r{constructor(){(0,m.A)(this,"interacComp",void 0),(0,m.A)(this,"template",""),(0,m.A)(this,"vars",[]),(0,m.A)(this,"chatboxInfo",void 0),(0,m.A)(this,"sceneEditorInfo",""),(0,m.A)(this,"animEditorInfo",""),(0,m.A)(this,"jsRunnerInfo",""),(0,m.A)(this,"zipInfo",""),(0,m.A)(this,"default",!1)}getValue(){return this.interacComp?.getValue()}reset(){this.chatboxInfo=void 0,this.sceneEditorInfo="",this.animEditorInfo="",this.zipInfo="",this.default=!1}ngOnInit(){this.reset();let i=this.template.trim();if("__AGENT_STREAM___"==i)return void(this.chatboxInfo={msg:this.template.trim(),req:JSON.parse(this.vars.find(d=>d.startsWith("__chatbox-agent::"))?.substring(17)??""),html:JSON.parse(this.vars.find(d=>d.startsWith("__chatbox-template::"))?.substring(20)??"")});let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("scene-editor");l?this.sceneEditorInfo=i:(l=s.querySelector("anim-editor"),l?this.animEditorInfo=i:(l=s.querySelector("js-runner"),l?this.jsRunnerInfo=i:(l=s.querySelector("zip"),l?this.zipInfo=l.innerHTML:this.default=!0)))}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-runner-main-view"]],viewQuery:function(i,s){if(1&i&&e.GBs(ay,5),2&i){let l;e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{template:"template",vars:"vars"},standalone:!0,features:[e.aNF],decls:6,vars:6,consts:[["interacComp",""],[3,"chatboxInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"zipInfo",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"chatboxInfo"],[3,"sceneInfo"],[3,"conf"],[3,"jsInfo"],[3,"zipInfo"],[3,"innerHTML"]],template:function(i,s){1&i&&e.DNE(0,ly,2,1,"app-chatbox",1)(1,cy,2,1,"app-scene-editor",2)(2,uy,2,1,"app-anim-editor",3)(3,dy,2,1,"app-js-runner",4)(4,py,1,1,"app-zip",5)(5,fy,2,3,"div",6),2&i&&(e.Y8G("ngIf",s.chatboxInfo),e.R7$(),e.Y8G("ngIf",s.sceneEditorInfo),e.R7$(),e.Y8G("ngIf",s.animEditorInfo),e.R7$(),e.Y8G("ngIf",s.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",s.zipInfo),e.R7$(),e.Y8G("ngIf",s.default))},dependencies:[L.MD,L.bT,N.YN,Df,ry,vm,hm,sy,gm]})),r})();const _y=["interacComp"];function hy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",31)(1,"app-form-node",32),e.bIt("onStartUpload",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onStartUpload())})("onUploaded",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onUploaded(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("data",n)("appId",i.id)}}function gy(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,hy,2,2,"div",30),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","form"==n.type)}}function vy(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.cancelApp())}),e.EFF(1," H\u1ee7y "),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("disabled",n.isCancelling)}}function yy(t,r){if(1&t&&(e.j41(0,"div",33),e.DNE(1,vy,2,1,"button",34),e.j41(2,"button",35),e.EFF(3),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.isRunning),e.R7$(),e.Y8G("disabled",n.isRunning||n.isUploading),e.R7$(),e.SpI(" ",n.isRunning?"\u0110ang x\u1eed l\xfd...":"B\u1eaft \u0111\u1ea7u"," ")}}function by(t,r){if(1&t){const n=e.RV6();e.j41(0,"form",27),e.bIt("submit",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.submit(s))}),e.DNE(1,gy,2,1,"div",28)(2,yy,4,3,"div",29),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.forms),e.R7$(),e.Y8G("ngIf",n.forms.length>0)}}function xy(t,r){if(1&t&&(e.j41(0,"div",43),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,n.lastInfo,100))}}function Cy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",37)(1,"div",38),e.nrm(2,"azt-loading-ui"),e.j41(3,"div",39)(4,"div"),e.EFF(5),e.k0s(),e.DNE(6,xy,3,4,"div",40),e.k0s()(),e.j41(7,"div",41)(8,"button",42),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.cancelApp())}),e.EFF(9,"H\u1ee7y"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.JRh(n.lastStatus?n.lastStatus:"\u0110ang x\u1eed l\xfd..."),e.R7$(),e.Y8G("ngIf",n.lastInfo)}}function ky(t,r){if(1&t&&e.nrm(0,"app-runner-main-view",46,0),2&t){const n=e.XpG(2);e.Y8G("vars",n.runInfo.vars)("template",n.runInfo.data)}}function Sy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",33)(1,"button",47),e.bIt("click",function(){let s;e.eBV(n);const l=e.XpG(2);return e.Njj(l.resumeApp(null!==(s=null==l.runInfo?null:l.runInfo.next)&&void 0!==s?s:""))}),e.EFF(2," Ti\u1ebfp t\u1ee5c "),e.k0s()()}}function wy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",33)(1,"button",47),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.restart())}),e.EFF(2," B\u1eaft \u0111\u1ea7u l\u1ea1i "),e.k0s()()}}function Ny(t,r){if(1&t&&(e.j41(0,"div",37)(1,"div",44),e.DNE(2,ky,2,2,"app-runner-main-view",45),e.k0s(),e.DNE(3,Sy,3,0,"div",29)(4,wy,3,0,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.data),e.R7$(),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.next),e.R7$(),e.Y8G("ngIf",!(null!=n.runInfo&&n.runInfo.next))}}const Ey=[{path:"",component:u2,children:[{path:"",component:Ua},{path:"demo",component:lr,canActivate:[gt]},{path:"dashboard",component:Ua},{path:"app/:id",component:(()=>{var t;class r{constructor(i,s){(0,m.A)(this,"route",void 0),(0,m.A)(this,"appService",void 0),(0,m.A)(this,"interacComp",void 0),(0,m.A)(this,"isShowLog",!1),(0,m.A)(this,"apiEndpoint",""),(0,m.A)(this,"reqBody",""),(0,m.A)(this,"resBody",""),(0,m.A)(this,"appInfo",void 0),(0,m.A)(this,"data",[]),(0,m.A)(this,"id",0),(0,m.A)(this,"forms",[]),(0,m.A)(this,"his",void 0),(0,m.A)(this,"isDone",!1),(0,m.A)(this,"isAsync",!0),(0,m.A)(this,"isUploading",!1),(0,m.A)(this,"files",[]),(0,m.A)(this,"vars",new Map),(0,m.A)(this,"isRunning",!1),(0,m.A)(this,"strResult",""),(0,m.A)(this,"isCancelling",!1),(0,m.A)(this,"showLogDetail",!1),(0,m.A)(this,"strStatus",[]),(0,m.A)(this,"lastStatus",""),(0,m.A)(this,"lastInfo",""),(0,m.A)(this,"runInfo",void 0),(0,m.A)(this,"curToken",""),this.route=i,this.appService=s}getInteracValue(){return this.interacComp?.getValue()}showLog(){this.isShowLog=!this.isShowLog}copy(i,s){let l=s.target;navigator.clipboard.writeText(i).then(()=>{l.classList.remove("bx-copy"),l.classList.add("bx-check","text-success"),setTimeout(()=>{l.classList.add("bx-copy"),l.classList.remove("bx-check","text-success")},1e3)}).catch(d=>{console.error("Failed to copy text: ",d)})}showApiInfo(){this.apiEndpoint=Et+"/api/App/run/"+this.id;let i={};for(let d of this.forms)for(let f of d.conf)i[f.key]="";let s=this.data.filter(d=>0==d.links.length),l={};for(let d of s)for(let f of d.outputs)l[f.name]=f.demo;this.reqBody=JSON.stringify(i,null,4),this.resBody=JSON.stringify(l,null,4)}ngOnInit(){this.route.paramMap.subscribe(i=>{this.id=+(i.get("id")??"0"),this.load()})}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(i=>{this.appService.history(this.id).subscribe(l=>{this.his=l}),this.appInfo=i,this.isAsync=1==i.pinTaskbar,this.data=JSON.parse(i.config);let s=[];for(let l of this.data)s.push(...l.links);this.forms=this.data.filter(l=>-1==s.indexOf(l.id)&&"form"==l.type),0==this.forms.length&&(this.isRunning=!0,this.isDone=!1,this.runApp({}))})}onStartUpload(){this.isUploading=!0}onUploaded(i){let s=this.files.filter(l=>l.name==i.name)[0];s?(s.file=i.file,s.content=i.content):this.files.push(i),this.isUploading=!1}close(){window.history.back()}showDetails(i){document.querySelector(".sts-"+i)?.classList.remove("d-none")}submit(i){var s=this;return(0,Ce.A)(function*(){i.preventDefault(),s.isRunning=!0,s.isDone=!1;let l=yield s.getFormArgs();s.runApp(l)})()}getFormArgs(){var i=this;return(0,Ce.A)(function*(){let s=document.getElementById("nodeForms");const l=new FormData(s);for(let f of i.files){l.set(f.name,f.content);let _=yield ht.fileToBase64(f.file);l.set(f.name+"-dataUrl",_)}let d={};return l.forEach((f,_)=>{i.vars.set(_,f instanceof File?f:JSON.stringify(f)),d[_]=f}),d})()}cancelApp(){this.isCancelling=!0,this.appService.cancel(this.curToken).subscribe(i=>{this.isCancelling=!1})}checkStatus(i){this.isRunning&&""!=i?this.appService.status(i).subscribe({next:s=>{if("success"==s.status)this.renderRunInfo(JSON.parse(s.data??"{}"));else{let l=s.message?.split("\n")??[];this.strStatus=[],this.lastInfo="";for(let _ of l)_.startsWith("[i]:")?(this.strStatus[this.strStatus.length-1].startsWith("[i]:")?this.strStatus[this.strStatus.length-1]+=_.substring(4):this.strStatus.push(_),this.lastInfo=_.substring(4)):(this.lastInfo="",this.strStatus.push(_));let f=this.strStatus.filter(_=>!_.startsWith("[i]:"));this.lastStatus=f.length>0?f[f.length-1]:this.lastStatus}setTimeout(()=>{this.checkStatus(i)},1e3)},error:s=>{this.strStatus=[s.message]}}):this.strStatus=[]}loadPrevRunning(){this.his?.token&&(this.isRunning=!0,this.isDone=!1,this.curToken=this.his.token,this.checkStatus(this.his.token))}onRunJS(i){if(!this.runInfo)return;let s=this.getVarValue(i.act);new Function(s)(i.el)}setValue(i,s){if(!this.runInfo)return;let l=i.split("."),d=l[0],f=-1;if(d.endsWith("]")){let C=d.split("[");f=+C[1].split("]")[0],d=C[0]}let _=this.runInfo.vars.filter(C=>C.startsWith(`${d}::`))[0],g=this.runInfo.vars.indexOf(_),v=JSON.parse(_.substring(d.length+2)),b=v;if(f>=0&&(b=b[f],1==l.length))return v[f]=s,void(this.runInfo.vars[g]=d+"::"+JSON.stringify(v,null,2));if(1!=l.length){for(let C=1;C<l.length-1;C++){let x=l[C].split("[");if(x.length>1){let I=+x[1].replace("]","");b=b[x[0]][I]}else b=b[x[0]]}b[l[l.length-1]]=s,this.runInfo.vars[g]=d+"::"+JSON.stringify(v,null,2)}else this.runInfo.vars[g]=d+"::"+s}getVarValue(i){if(!this.runInfo)return"";let s=i.split("."),l=s[0],d=-1;if(l.endsWith("]")){let g=l.split("[");d=+g[1].split("]")[0],l=g[0]}let f=this.runInfo.vars.filter(g=>g.startsWith(`${l}::`))[0],_=JSON.parse(f.substring(l.length+2));d>=0&&(_=_[d]);for(let g=1;g<s.length;g++){let v=s[g].split("[");if(v.length>1){let b=+v[1].replace("]","");_=_[v[0]][b]}else _=_[v[0]]}return _}restart(){location.reload()}resumeApp(i){var s=this;return(0,Ce.A)(function*(){let l=s.getInteracValue(),d=i.split(":"),f={};for(let g of s.runInfo?.vars??[]){let v=g.split("::");f[v[0]]=v[1]}l?.varName&&(f[l.varName]=l.value);let _=yield s.getFormArgs();for(let g in _)f[g]=_[g];s.isRunning=!0,s.isDone=!1,s.runApp(f,`${d[0]}:${d[1]}`)})()}runApp(i,s){this.curToken="",this.isAsync?this.appService.runAppAsync((s??this.id)+"",i).subscribe({next:l=>{this.checkStatus(l.data),this.curToken=l.data},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}}):this.appService.runApp((s??this.id)+"",i).subscribe({next:l=>{this.renderRunInfo(l)},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}})}renderRunInfo(i){this.runInfo=i,this.isRunning=!1,this.isDone=!0}}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(xt.nX),e.rXU(je))}),(0,m.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow-runner"]],viewQuery:function(i,s){if(1&i&&e.GBs(_y,5),2&i){let l;e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},standalone:!0,features:[e.aNF],decls:62,vars:9,consts:[["interacComp",""],[1,"box","p-0","mt-5","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","w-2/4","mx-auto"],[1,"window-container","window-container-sm"],["data-windowbackdrop","true",1,"window","window--active"],[1,"w-100","overflow-hidden",2,"margin-top","10px"],[1,"window-top-btn"],[1,"window__controls","text-right"],[1,"window__close","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x"],["d","M18 6 6 18","key","1bl5f8"],["d","m6 6 12 12","key","d8bk6v"],[1,"window-content","window-content-sm","pb-3"],[1,"pb-3","window-dark","window-dark-sm"],["class","ml-5 mr-5 mt-2 position-relative","id","nodeForms",3,"submit",4,"ngIf"],["class","ml-5 mr-5 position-relative",4,"ngIf"],["data-bs-backdrop","static","id","apiInfo","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"p-0","mb-2"],[1,"bx","bx-copy","small","ms-3","cursor-pointer",3,"click"],[1,"mb-3"],["lang","json"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-backdrop","static","id","logInfo","tabindex","-1","aria-hidden","true",1,"modal","fade"],["id","nodeForms",1,"ml-5","mr-5","mt-2","position-relative",3,"submit"],[4,"ngFor","ngForOf"],["class","mt-3 text-right",4,"ngIf"],["class","node-form mb-3",4,"ngIf"],[1,"node-form","mb-3"],[3,"onStartUpload","onUploaded","data","appId"],[1,"mt-3","text-right"],["class","btn btn-secondary mr-3","type","button",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"ml-5","mr-5","position-relative"],[1,"mt-5","flex","items-center"],["id","run-msg",1,"inline-block","ml-2"],["class","small text-muted",4,"ngIf"],[1,"text-right","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"small","text-muted"],[1,"mt-3"],[3,"vars","template",4,"ngIf"],[3,"vars","template"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),e.bIt("click",function(){return s.close()}),e.qSk(),e.j41(8,"svg",8),e.nrm(9,"path",9)(10,"path",10),e.k0s()()()(),e.joV(),e.j41(11,"div",11)(12,"div",12),e.DNE(13,by,3,2,"form",13)(14,Cy,10,2,"div",14)(15,Ny,5,3,"div",14),e.k0s()()()()()(),e.j41(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18)(20,"h5",19),e.EFF(21," Api Info "),e.k0s()(),e.j41(22,"div",20)(23,"h5",21),e.EFF(24," Endpoint "),e.j41(25,"i",22),e.bIt("click",function(d){return s.copy(s.apiEndpoint,d)}),e.k0s()(),e.j41(26,"div",23)(27,"pre")(28,"code",24),e.EFF(29),e.k0s()()(),e.j41(30,"h5",21),e.EFF(31," Request Body "),e.j41(32,"i",22),e.bIt("click",function(d){return s.copy(s.reqBody,d)}),e.k0s()(),e.j41(33,"div",23)(34,"pre")(35,"code",24),e.EFF(36),e.k0s()()(),e.j41(37,"h5",21),e.EFF(38," Response "),e.j41(39,"i",22),e.bIt("click",function(d){return s.copy(s.resBody,d)}),e.k0s()(),e.j41(40,"div")(41,"pre")(42,"code",24),e.EFF(43),e.k0s()()(),e.j41(44,"div")(45,"button",25),e.EFF(46,"Close"),e.k0s()()()()()(),e.j41(47,"div",26)(48,"div",16)(49,"div",17)(50,"div",18)(51,"h5",19),e.EFF(52," Logs "),e.k0s()(),e.j41(53,"div",20)(54,"pre"),e.EFF(55,"                    "),e.j41(56,"code"),e.EFF(57),e.k0s(),e.EFF(58,"\n                "),e.k0s(),e.j41(59,"div")(60,"button",25),e.EFF(61,"Close"),e.k0s()()()()()()()),2&i&&(e.R7$(13),e.Y8G("ngIf",!s.isRunning&&!s.isDone),e.R7$(),e.Y8G("ngIf",s.isRunning),e.R7$(),e.Y8G("ngIf",s.isDone&&!s.isRunning),e.R7$(14),e.JRh(s.apiEndpoint),e.R7$(7),e.JRh(s.reqBody),e.R7$(7),e.JRh(s.resBody),e.R7$(14),e.E5c("\n                        Status:\n                        ",null==s.his?null:s.his.status,"\n                        Data:\n                        ",null==s.his?null:s.his.data,"\n                        Message:\n                        ",null==s.his?null:s.his.message,"\n                    "))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.qT,N.cb,N.cV,A2,my,Zt,Xe.b,yi,Me.Q,Ne.R],styles:[".position-relative[_ngcontent-%COMP%]{position:relative}"]})),r})(),canActivate:[gt]},{path:"flow/:id",component:c2,canActivate:[gt]}]}];let Iy=(()=>{var t;class r{}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275mod",e.$C({type:t})),(0,m.A)(r,"\u0275inj",e.G2t({imports:[xt.iI.forChild(Ey),xt.iI,ze.XE]})),r})(),Ty=(()=>{var t;class r{}return t=r,(0,m.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,m.A)(r,"\u0275mod",e.$C({type:t})),(0,m.A)(r,"\u0275inj",e.G2t({imports:[xt.iI,L.MD,N.YN,et.s,N.X1,Iy,Me.Q,Xe.b,gn.L,ot.Id,Ct.flO.pick(Ct.Ptg),Jt.An]})),r})()},7578:(sn,oe,pe)=>{var m=pe(1395),L=pe(1605);function N(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xt=new Set,Ct={};function Jt(o,a){ot(o,a),ot(o+"Capture",a)}function ot(o,a){for(Ct[o]=a,o=0;o<a.length;o++)xt.add(a[o])}var et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gn=Object.prototype.hasOwnProperty,Xe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Me={},ze={};function Ce(o,a,c,u,p,h,y){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=u,this.attributeNamespace=p,this.mustUseProperty=c,this.propertyName=o,this.type=a,this.sanitizeURL=h,this.removeEmptyString=y}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Ae[o]=new Ce(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];Ae[a]=new Ce(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){Ae[o]=new Ce(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Ae[o]=new Ce(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Ae[o]=new Ce(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){Ae[o]=new Ce(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){Ae[o]=new Ce(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){Ae[o]=new Ce(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){Ae[o]=new Ce(o,5,!1,o.toLowerCase(),null,!1,!1)});var an=/[\-:]([a-z])/g;function kt(o){return o[1].toUpperCase()}function Ft(o,a,c,u){var p=Ae.hasOwnProperty(a)?Ae[a]:null;(null!==p?0!==p.type:u||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(function gt(o,a,c,u){if(null===a||typeof a>"u"||function Je(o,a,c,u){if(null!==c&&0===c.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!u&&(null!==c?!c.acceptsBooleans:"data-"!==(o=o.toLowerCase().slice(0,5))&&"aria-"!==o);default:return!1}}(o,a,c,u))return!0;if(u)return!1;if(null!==c)switch(c.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}(a,c,p,u)&&(c=null),u||null===p?function e(o){return!!gn.call(ze,o)||!gn.call(Me,o)&&(Xe.test(o)?ze[o]=!0:(Me[o]=!0,!1))}(a)&&(null===c?o.removeAttribute(a):o.setAttribute(a,""+c)):p.mustUseProperty?o[p.propertyName]=null===c?3!==p.type&&"":c:(a=p.attributeName,u=p.attributeNamespace,null===c?o.removeAttribute(a):(c=3===(p=p.type)||4===p&&!0===c?"":""+c,u?o.setAttributeNS(u,a,c):o.setAttribute(a,c))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(an,kt);Ae[a]=new Ce(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(an,kt);Ae[a]=new Ce(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(an,kt);Ae[a]=new Ce(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){Ae[o]=new Ce(o,1,!1,o.toLowerCase(),null,!1,!1)}),Ae.xlinkHref=new Ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){Ae[o]=new Ce(o,1,!1,o.toLowerCase(),null,!0,!0)});var it=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Et=Symbol.for("react.element"),je=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),Yn=Symbol.for("react.strict_mode"),Cn=Symbol.for("react.profiler"),Hn=Symbol.for("react.provider"),kn=Symbol.for("react.context"),Sn=Symbol.for("react.forward_ref"),ln=Symbol.for("react.suspense"),vn=Symbol.for("react.suspense_list"),lo=Symbol.for("react.memo"),te=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Se=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Ie=Symbol.iterator;function Ve(o){return null===o||"object"!=typeof o?null:"function"==typeof(o=Ie&&o[Ie]||o["@@iterator"])?o:null}var Z,M=Object.assign;function Ne(o){if(void 0===Z)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||""}return"\n"+Z+o}var Ee=!1;function Fe(o,a){if(!o||Ee)return"";Ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(O){var u=O}Reflect.construct(o,[],a)}else{try{a.call()}catch(O){u=O}o.call(a.prototype)}else{try{throw Error()}catch(O){u=O}o()}}catch(O){if(O&&u&&"string"==typeof O.stack){for(var p=O.stack.split("\n"),h=u.stack.split("\n"),y=p.length-1,S=h.length-1;1<=y&&0<=S&&p[y]!==h[S];)S--;for(;1<=y&&0<=S;y--,S--)if(p[y]!==h[S]){if(1!==y||1!==S)do{if(y--,0>--S||p[y]!==h[S]){var A="\n"+p[y].replace(" at new "," at ");return o.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",o.displayName)),A}}while(1<=y&&0<=S);break}}}finally{Ee=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?Ne(o):""}function He(o){switch(o.tag){case 5:return Ne(o.type);case 16:return Ne("Lazy");case 13:return Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 2:case 15:return Fe(o.type,!1);case 11:return Fe(o.type.render,!1);case 1:return Fe(o.type,!0);default:return""}}function rt(o){if(null==o)return null;if("function"==typeof o)return o.displayName||o.name||null;if("string"==typeof o)return o;switch(o){case ct:return"Fragment";case je:return"Portal";case Cn:return"Profiler";case Yn:return"StrictMode";case ln:return"Suspense";case vn:return"SuspenseList"}if("object"==typeof o)switch(o.$$typeof){case kn:return(o.displayName||"Context")+".Consumer";case Hn:return(o._context.displayName||"Context")+".Provider";case Sn:var a=o.render;return(o=o.displayName)||(o=""!==(o=a.displayName||a.name||"")?"ForwardRef("+o+")":"ForwardRef"),o;case lo:return null!==(a=o.displayName||null)?a:rt(o.type)||"Memo";case te:a=o._payload,o=o._init;try{return rt(o(a))}catch{}}return null}function ut(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=(o=a.render).displayName||o.name||"",a.displayName||(""!==o?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rt(a);case 8:return a===Yn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function Oe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":case"object":return o;default:return""}}function cn(o){var a=o.type;return(o=o.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a||"radio"===a)}function cs(o){o._valueTracker||(o._valueTracker=function $d(o){var a=cn(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),u=""+o[a];if(!o.hasOwnProperty(a)&&typeof c<"u"&&"function"==typeof c.get&&"function"==typeof c.set){var p=c.get,h=c.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return p.call(this)},set:function(y){u=""+y,h.call(this,y)}}),Object.defineProperty(o,a,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}(o))}function hc(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var c=a.getValue(),u="";return o&&(u=cn(o)?o.checked?"true":"false":o.value),(o=u)!==c&&(a.setValue(o),!0)}function us(o){if(typeof(o=o||(typeof document<"u"?document:void 0))>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ta(o,a){return M({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a.checked??o._wrapperState.initialChecked})}function gc(o,a){var c=null==a.defaultValue?"":a.defaultValue,u=null!=a.checked?a.checked:a.defaultChecked;c=Oe(null!=a.value?a.value:c),o._wrapperState={initialChecked:u,initialValue:c,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function vc(o,a){null!=(a=a.checked)&&Ft(o,"checked",a,!1)}function Aa(o,a){vc(o,a);var c=Oe(a.value),u=a.type;if(null!=c)"number"===u?(0===c&&""===o.value||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if("submit"===u||"reset"===u)return void o.removeAttribute("value");a.hasOwnProperty("value")?Ra(o,a.type,c):a.hasOwnProperty("defaultValue")&&Ra(o,a.type,Oe(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(o.defaultChecked=!!a.defaultChecked)}function yc(o,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var u=a.type;if(("submit"===u||"reset"===u)&&null==a.value)return;a=""+o._wrapperState.initialValue,c||a===o.value||(o.value=a),o.defaultValue=a}""!==(c=o.name)&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,""!==c&&(o.name=c)}function Ra(o,a,c){("number"!==a||us(o.ownerDocument)!==o)&&(null==c?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var qi=Array.isArray;function Jo(o,a,c,u){if(o=o.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<o.length;c++)p=a.hasOwnProperty("$"+o[c].value),o[c].selected!==p&&(o[c].selected=p),p&&u&&(o[c].defaultSelected=!0)}else{for(c=""+Oe(c),a=null,p=0;p<o.length;p++){if(o[p].value===c)return o[p].selected=!0,void(u&&(o[p].defaultSelected=!0));null!==a||o[p].disabled||(a=o[p])}null!==a&&(a.selected=!0)}}function It(o,a){if(null!=a.dangerouslySetInnerHTML)throw Error(N(91));return M({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function bc(o,a){var c=a.value;if(null==c){if(c=a.children,a=a.defaultValue,null!=c){if(null!=a)throw Error(N(92));if(qi(c)){if(1<c.length)throw Error(N(93));c=c[0]}a=c}null==a&&(a=""),c=a}o._wrapperState={initialValue:Oe(c)}}function xc(o,a){var c=Oe(a.value),u=Oe(a.defaultValue);null!=c&&((c=""+c)!==o.value&&(o.value=c),null==a.defaultValue&&o.defaultValue!==c&&(o.defaultValue=c)),null!=u&&(o.defaultValue=""+u)}function Un(o){var a=o.textContent;a===o._wrapperState.initialValue&&""!==a&&null!==a&&(o.value=a)}function Cc(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fa(o,a){return null==o||"http://www.w3.org/1999/xhtml"===o?Cc(a):"http://www.w3.org/2000/svg"===o&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":o}var ds,o,kc=(o=function(o,a){if("http://www.w3.org/2000/svg"!==o.namespaceURI||"innerHTML"in o)o.innerHTML=a;else{for((ds=ds||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ds.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,u,p){MSApp.execUnsafeLocalFunction(function(){return o(a,c)})}:o);function Qi(o,a){if(a){var c=o.firstChild;if(c&&c===o.lastChild&&3===c.nodeType)return void(c.nodeValue=a)}o.textContent=a}var er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gd=["Webkit","ms","Moz","O"];function Sc(o,a,c){return null==a||"boolean"==typeof a||""===a?"":c||"number"!=typeof a||0===a||er.hasOwnProperty(o)&&er[o]?(""+a).trim():a+"px"}function wc(o,a){for(var c in o=o.style,a)if(a.hasOwnProperty(c)){var u=0===c.indexOf("--"),p=Sc(c,a[c],u);"float"===c&&(c="cssFloat"),u?o.setProperty(c,p):o[c]=p}}Object.keys(er).forEach(function(o){Gd.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),er[a]=er[o]})});var Dd=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(o,a){if(a){if(Dd[o]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(N(137,o));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(N(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(N(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(N(62))}}function ja(o,a){if(-1===o.indexOf("-"))return"string"==typeof a.is;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $a=null;function Ga(o){return(o=o.target||o.srcElement||window).correspondingUseElement&&(o=o.correspondingUseElement),3===o.nodeType?o.parentNode:o}var Da=null,gi=null,vi=null;function Nc(o){if(o=Ro(o)){if("function"!=typeof Da)throw Error(N(280));var a=o.stateNode;a&&(a=Ms(a),Da(o.stateNode,o.type,a))}}function Ec(o){gi?vi?vi.push(o):vi=[o]:gi=o}function Ic(){if(gi){var o=gi,a=vi;if(vi=gi=null,Nc(o),a)for(o=0;o<a.length;o++)Nc(a[o])}}function Tc(o,a){return o(a)}function Va(){}var Oa=!1;function Ac(o,a,c){if(Oa)return o(a,c);Oa=!0;try{return Tc(o,a,c)}finally{Oa=!1,(null!==gi||null!==vi)&&(Va(),Ic())}}function tr(o,a){var c=o.stateNode;if(null===c)return null;var u=Ms(c);if(null===u)return null;c=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(u=!("button"===(o=o.type)||"input"===o||"select"===o||"textarea"===o)),o=!u;break e;default:o=!1}if(o)return null;if(c&&"function"!=typeof c)throw Error(N(231,a,typeof c));return c}var za=!1;if(et)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){za=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{za=!1}function Vd(o,a,c,u,p,h,y,S,A){var O=Array.prototype.slice.call(arguments,3);try{a.apply(c,O)}catch(J){this.onError(J)}}var or=!1,ps=null,fs=!1,Ba=null,Od={onError:function(o){or=!0,ps=o}};function zd(o,a,c,u,p,h,y,S,A){or=!1,ps=null,Vd.apply(Od,arguments)}function Ko(o){var a=o,c=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do{4098&(a=o).flags&&(c=a.return),o=a.return}while(o)}return 3===a.tag?c:null}function Rc(o){if(13===o.tag){var a=o.memoizedState;if(null===a&&null!==(o=o.alternate)&&(a=o.memoizedState),null!==a)return a.dehydrated}return null}function Fc(o){if(Ko(o)!==o)throw Error(N(188))}function Mc(o){return null!==(o=function Ld(o){var a=o.alternate;if(!a){if(null===(a=Ko(o)))throw Error(N(188));return a!==o?null:o}for(var c=o,u=a;;){var p=c.return;if(null===p)break;var h=p.alternate;if(null===h){if(null!==(u=p.return)){c=u;continue}break}if(p.child===h.child){for(h=p.child;h;){if(h===c)return Fc(p),o;if(h===u)return Fc(p),a;h=h.sibling}throw Error(N(188))}if(c.return!==u.return)c=p,u=h;else{for(var y=!1,S=p.child;S;){if(S===c){y=!0,c=p,u=h;break}if(S===u){y=!0,u=p,c=h;break}S=S.sibling}if(!y){for(S=h.child;S;){if(S===c){y=!0,c=h,u=p;break}if(S===u){y=!0,u=h,c=p;break}S=S.sibling}if(!y)throw Error(N(189))}}if(c.alternate!==u)throw Error(N(190))}if(3!==c.tag)throw Error(N(188));return c.stateNode.current===c?o:a}(o))?jc(o):null}function jc(o){if(5===o.tag||6===o.tag)return o;for(o=o.child;null!==o;){var a=jc(o);if(null!==a)return a;o=o.sibling}return null}var $c=L.unstable_scheduleCallback,Gc=L.unstable_cancelCallback,Pd=L.unstable_shouldYield,Xd=L.unstable_requestPaint,ft=L.unstable_now,Yd=L.unstable_getCurrentPriorityLevel,La=L.unstable_ImmediatePriority,Dc=L.unstable_UserBlockingPriority,ms=L.unstable_NormalPriority,Hd=L.unstable_LowPriority,Vc=L.unstable_IdlePriority,_s=null,Wn=null,Gn=Math.clz32?Math.clz32:function Jd(o){return 0===(o>>>=0)?32:31-(Wd(o)/Zd|0)|0},Wd=Math.log,Zd=Math.LN2,hs=64,gs=4194304;function ir(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&o;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&o;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function vs(o,a){var c=o.pendingLanes;if(0===c)return 0;var u=0,p=o.suspendedLanes,h=o.pingedLanes,y=268435455&c;if(0!==y){var S=y&~p;0!==S?u=ir(S):0!=(h&=y)&&(u=ir(h))}else 0!=(y=c&~p)?u=ir(y):0!==h&&(u=ir(h));if(0===u)return 0;if(0!==a&&a!==u&&!(a&p)&&((p=u&-u)>=(h=a&-a)||16===p&&4194240&h))return a;if(4&u&&(u|=16&c),0!==(a=o.entangledLanes))for(o=o.entanglements,a&=u;0<a;)u|=o[c=31-Gn(a)],a&=~(p=1<<c);return u}function Kd(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function Pa(o){return 0!=(o=-1073741825&o.pendingLanes)?o:1073741824&o?1073741824:0}function Oc(){var o=hs;return!(4194240&(hs<<=1))&&(hs=64),o}function Xa(o){for(var a=[],c=0;31>c;c++)a.push(o);return a}function rr(o,a,c){o.pendingLanes|=a,536870912!==a&&(o.suspendedLanes=0,o.pingedLanes=0),(o=o.eventTimes)[a=31-Gn(a)]=c}function ys(o,a){var c=o.entangledLanes|=a;for(o=o.entanglements;c;){var u=31-Gn(c),p=1<<u;p&a|o[u]&a&&(o[u]|=a),c&=~p}}var Be=0;function zc(o){return 1<(o&=-o)?4<o?268435455&o?16:536870912:4:1}var Bc,Ya,Lc,Pc,Xc,Ha=!1,yi=[],No=null,Eo=null,Io=null,sr=new Map,ar=new Map,To=[],Qd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ua(o,a){switch(o){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":sr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ar.delete(a.pointerId)}}function lr(o,a,c,u,p,h){return null===o||o.nativeEvent!==h?(o={blockedOn:a,domEventName:c,eventSystemFlags:u,nativeEvent:h,targetContainers:[p]},null!==a&&null!==(a=Ro(a))&&Ya(a),o):(o.eventSystemFlags|=u,a=o.targetContainers,null!==p&&-1===a.indexOf(p)&&a.push(p),o)}function Lt(o){var a=ei(o.target);if(null!==a){var c=Ko(a);if(null!==c)if(13===(a=c.tag)){if(null!==(a=Rc(c)))return o.blockedOn=a,void Xc(o.priority,function(){Lc(c)})}else if(3===a&&c.stateNode.current.memoizedState.isDehydrated)return void(o.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}o.blockedOn=null}function bs(o){if(null!==o.blockedOn)return!1;for(var a=o.targetContainers;0<a.length;){var c=Wc(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(null!==c)return null!==(a=Ro(c))&&Ya(a),o.blockedOn=c,!1;var u=new(c=o.nativeEvent).constructor(c.type,c);$a=u,c.target.dispatchEvent(u),$a=null,a.shift()}return!0}function Wa(o,a,c){bs(o)&&c.delete(a)}function Yc(){Ha=!1,null!==No&&bs(No)&&(No=null),null!==Eo&&bs(Eo)&&(Eo=null),null!==Io&&bs(Io)&&(Io=null),sr.forEach(Wa),ar.forEach(Wa)}function xs(o,a){o.blockedOn===a&&(o.blockedOn=null,Ha||(Ha=!0,L.unstable_scheduleCallback(L.unstable_NormalPriority,Yc)))}function cr(o){function a(p){return xs(p,o)}if(0<yi.length){xs(yi[0],o);for(var c=1;c<yi.length;c++){var u=yi[c];u.blockedOn===o&&(u.blockedOn=null)}}for(null!==No&&xs(No,o),null!==Eo&&xs(Eo,o),null!==Io&&xs(Io,o),sr.forEach(a),ar.forEach(a),c=0;c<To.length;c++)(u=To[c]).blockedOn===o&&(u.blockedOn=null);for(;0<To.length&&null===(c=To[0]).blockedOn;)Lt(c),null===c.blockedOn&&To.shift()}var bi=it.ReactCurrentBatchConfig,Cs=!0;function Hc(o,a,c,u){var p=Be,h=bi.transition;bi.transition=null;try{Be=1,Za(o,a,c,u)}finally{Be=p,bi.transition=h}}function Uc(o,a,c,u){var p=Be,h=bi.transition;bi.transition=null;try{Be=4,Za(o,a,c,u)}finally{Be=p,bi.transition=h}}function Za(o,a,c,u){if(Cs){var p=Wc(o,a,c,u);if(null===p)ml(o,a,u,vt,c),Ua(o,u);else if(function k(o,a,c,u,p){switch(a){case"focusin":return No=lr(No,o,a,c,u,p),!0;case"dragenter":return Eo=lr(Eo,o,a,c,u,p),!0;case"mouseover":return Io=lr(Io,o,a,c,u,p),!0;case"pointerover":var h=p.pointerId;return sr.set(h,lr(sr.get(h)||null,o,a,c,u,p)),!0;case"gotpointercapture":return ar.set(h=p.pointerId,lr(ar.get(h)||null,o,a,c,u,p)),!0}return!1}(p,o,a,c,u))u.stopPropagation();else if(Ua(o,u),4&a&&-1<Qd.indexOf(o)){for(;null!==p;){var h=Ro(p);if(null!==h&&Bc(h),null===(h=Wc(o,a,c,u))&&ml(o,a,u,vt,c),h===p)break;p=h}null!==p&&u.stopPropagation()}else ml(o,a,u,null,c)}}var vt=null;function Wc(o,a,c,u){if(vt=null,null!==(o=ei(o=Ga(u))))if(null===(a=Ko(o)))o=null;else if(13===(c=a.tag)){if(null!==(o=Rc(a)))return o;o=null}else if(3===c){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return vt=o,null}function Zc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yd()){case La:return 1;case Dc:return 4;case ms:case Hd:return 16;case Vc:return 536870912;default:return 16}default:return 16}}var co=null,xi=null,ks=null;function Jc(){if(ks)return ks;var o,u,a=xi,c=a.length,p="value"in co?co.value:co.textContent,h=p.length;for(o=0;o<c&&a[o]===p[o];o++);var y=c-o;for(u=1;u<=y&&a[c-u]===p[h-u];u++);return ks=p.slice(o,1<u?1-u:void 0)}function ur(o){var a=o.keyCode;return"charCode"in o?0===(o=o.charCode)&&13===a&&(o=13):o=a,10===o&&(o=13),32<=o||13===o?o:0}function Ci(){return!0}function Kc(){return!1}function Kt(o){function a(c,u,p,h,y){for(var S in this._reactName=c,this._targetInst=p,this.type=u,this.nativeEvent=h,this.target=y,this.currentTarget=null,o)o.hasOwnProperty(S)&&(this[S]=(c=o[S])?c(h):h[S]);return this.isDefaultPrevented=(null!=h.defaultPrevented?h.defaultPrevented:!1===h.returnValue)?Ci:Kc,this.isPropagationStopped=Kc,this}return M(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():"unknown"!=typeof c.returnValue&&(c.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():"unknown"!=typeof c.cancelBubble&&(c.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),a}var Ka,qa,Si,ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=Kt(ki),dr=M({},ki,{view:0,detail:0}),qc=Kt(dr),pr=M({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(o){return void 0===o.relatedTarget?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Si&&(Si&&"mousemove"===o.type?(Ka=o.screenX-Si.screenX,qa=o.screenY-Si.screenY):qa=Ka=0,Si=o),Ka)},movementY:function(o){return"movementY"in o?o.movementY:qa}}),Qc=Kt(pr),tp=Kt(M({},pr,{dataTransfer:0})),Qa=Kt(M({},dr,{relatedTarget:0})),ip=Kt(M({},ki,{animationName:0,elapsedTime:0,pseudoElement:0})),rp=M({},ki,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sp=Kt(rp),tu=Kt(M({},ki,{data:0})),Ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ap={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):!!(o=lp[o])&&!!a[o]}function el(){return cp}var up=M({},dr,{key:function(o){if(o.key){var a=Ss[o.key]||o.key;if("Unidentified"!==a)return a}return"keypress"===o.type?13===(o=ur(o))?"Enter":String.fromCharCode(o):"keydown"===o.type||"keyup"===o.type?ap[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(o){return"keypress"===o.type?ur(o):0},keyCode:function(o){return"keydown"===o.type||"keyup"===o.type?o.keyCode:0},which:function(o){return"keypress"===o.type?ur(o):"keydown"===o.type||"keyup"===o.type?o.keyCode:0}}),dp=Kt(up),nu=Kt(M({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mp=Kt(M({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el})),hp=Kt(M({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0})),gp=M({},pr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),vp=Kt(gp),yp=[9,13,27,32],tl=et&&"CompositionEvent"in window,fr=null;et&&"documentMode"in document&&(fr=document.documentMode);var bp=et&&"TextEvent"in window&&!fr,ws=et&&(!tl||fr&&8<fr&&11>=fr),nl=" ",mr=!1;function ou(o,a){switch(o){case"keyup":return-1!==yp.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(o){return"object"==typeof(o=o.detail)&&"data"in o?o.data:null}var wi=!1,kp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ru(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return"input"===a?!!kp[o.type]:"textarea"===a}function ol(o,a,c,u){Ec(u),0<(a=un(a,"onChange")).length&&(c=new Ja("onChange","change",null,c,u),o.push({event:c,listeners:a}))}var _r=null,hr=null;function Sp(o){wu(o,0)}function Ns(o){if(hc(ti(o)))return o}function Ni(o,a){if("change"===o)return a}var su=!1;if(et){var il;if(et){var rl="oninput"in document;if(!rl){var au=document.createElement("div");au.setAttribute("oninput","return;"),rl="function"==typeof au.oninput}il=rl}else il=!1;su=il&&(!document.documentMode||9<document.documentMode)}function sl(){_r&&(_r.detachEvent("onpropertychange",Es),hr=_r=null)}function Es(o){if("value"===o.propertyName&&Ns(hr)){var a=[];ol(a,hr,o,Ga(o)),Ac(Sp,a)}}function lu(o,a,c){"focusin"===o?(sl(),hr=c,(_r=a).attachEvent("onpropertychange",Es)):"focusout"===o&&sl()}function cu(o){if("selectionchange"===o||"keyup"===o||"keydown"===o)return Ns(hr)}function uu(o,a){if("click"===o)return Ns(a)}function wp(o,a){if("input"===o||"change"===o)return Ns(a)}var Dn="function"==typeof Object.is?Object.is:function Np(o,a){return o===a&&(0!==o||1/o==1/a)||o!=o&&a!=a};function gr(o,a){if(Dn(o,a))return!0;if("object"!=typeof o||null===o||"object"!=typeof a||null===a)return!1;var c=Object.keys(o),u=Object.keys(a);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var p=c[u];if(!gn.call(a,p)||!Dn(o[p],a[p]))return!1}return!0}function du(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function pu(o,a){var u,c=du(o);for(o=0;c;){if(3===c.nodeType){if(u=o+c.textContent.length,o<=a&&u>=a)return{node:c,offset:a-o};o=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=du(c)}}function fu(o,a){return!(!o||!a)&&(o===a||(!o||3!==o.nodeType)&&(a&&3===a.nodeType?fu(o,a.parentNode):"contains"in o?o.contains(a):!!o.compareDocumentPosition&&!!(16&o.compareDocumentPosition(a))))}function mu(){for(var o=window,a=us();a instanceof o.HTMLIFrameElement;){try{var c="string"==typeof a.contentWindow.location.href}catch{c=!1}if(!c)break;a=us((o=a.contentWindow).document)}return a}function al(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&("input"===a&&("text"===o.type||"search"===o.type||"tel"===o.type||"url"===o.type||"password"===o.type)||"textarea"===a||"true"===o.contentEditable)}function Ep(o){var a=mu(),c=o.focusedElem,u=o.selectionRange;if(a!==c&&c&&c.ownerDocument&&fu(c.ownerDocument.documentElement,c)){if(null!==u&&al(c))if(a=u.start,void 0===(o=u.end)&&(o=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(o,c.value.length);else if((o=(a=c.ownerDocument||document)&&a.defaultView||window).getSelection){o=o.getSelection();var p=c.textContent.length,h=Math.min(u.start,p);u=void 0===u.end?h:Math.min(u.end,p),!o.extend&&h>u&&(p=u,u=h,h=p),p=pu(c,h);var y=pu(c,u);p&&y&&(1!==o.rangeCount||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==y.node||o.focusOffset!==y.offset)&&((a=a.createRange()).setStart(p.node,p.offset),o.removeAllRanges(),h>u?(o.addRange(a),o.extend(y.node,y.offset)):(a.setEnd(y.node,y.offset),o.addRange(a)))}for(a=[],o=c;o=o.parentNode;)1===o.nodeType&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for("function"==typeof c.focus&&c.focus(),c=0;c<a.length;c++)(o=a[c]).element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ip=et&&"documentMode"in document&&11>=document.documentMode,Ei=null,ll=null,vr=null,cl=!1;function _u(o,a,c){var u=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;cl||null==Ei||Ei!==us(u)||(u="selectionStart"in(u=Ei)&&al(u)?{start:u.selectionStart,end:u.selectionEnd}:{anchorNode:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset},vr&&gr(vr,u)||(vr=u,0<(u=un(ll,"onSelect")).length&&(a=new Ja("onSelect","select",null,a,c),o.push({event:a,listeners:u}),a.target=Ei)))}function Is(o,a){var c={};return c[o.toLowerCase()]=a.toLowerCase(),c["Webkit"+o]="webkit"+a,c["Moz"+o]="moz"+a,c}var Ii={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionend:Is("Transition","TransitionEnd")},Ts={},hu={};function As(o){if(Ts[o])return Ts[o];if(!Ii[o])return o;var c,a=Ii[o];for(c in a)if(a.hasOwnProperty(c)&&c in hu)return Ts[o]=a[c];return o}et&&(hu=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);var gu=As("animationend"),vu=As("animationiteration"),yu=As("animationstart"),bu=As("transitionend"),xu=new Map,Cu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(o,a){xu.set(o,a),Jt(a,[o])}for(var ul=0;ul<Cu.length;ul++){var dl=Cu[ul];Ao(dl.toLowerCase(),"on"+(dl[0].toUpperCase()+dl.slice(1)))}Ao(gu,"onAnimationEnd"),Ao(vu,"onAnimationIteration"),Ao(yu,"onAnimationStart"),Ao("dblclick","onDoubleClick"),Ao("focusin","onFocus"),Ao("focusout","onBlur"),Ao(bu,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),Jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ku=new Set("cancel close invalid load scroll toggle".split(" ").concat(yr));function Su(o,a,c){var u=o.type||"unknown-event";o.currentTarget=c,function Bd(o,a,c,u,p,h,y,S,A){if(zd.apply(this,arguments),or){if(!or)throw Error(N(198));var O=ps;or=!1,ps=null,fs||(fs=!0,Ba=O)}}(u,a,void 0,o),o.currentTarget=null}function wu(o,a){a=!!(4&a);for(var c=0;c<o.length;c++){var u=o[c],p=u.event;u=u.listeners;e:{var h=void 0;if(a)for(var y=u.length-1;0<=y;y--){var S=u[y],A=S.instance,O=S.currentTarget;if(S=S.listener,A!==h&&p.isPropagationStopped())break e;Su(p,S,O),h=A}else for(y=0;y<u.length;y++){if(A=(S=u[y]).instance,O=S.currentTarget,S=S.listener,A!==h&&p.isPropagationStopped())break e;Su(p,S,O),h=A}}}if(fs)throw o=Ba,fs=!1,Ba=null,o}function Ke(o,a){var c=a[Qo];void 0===c&&(c=a[Qo]=new Set);var u=o+"__bubble";c.has(u)||(fl(a,o,2,!1),c.add(u))}function pl(o,a,c){var u=0;a&&(u|=4),fl(c,o,u,a)}var br="_reactListening"+Math.random().toString(36).slice(2);function jt(o){if(!o[br]){o[br]=!0,xt.forEach(function(c){"selectionchange"!==c&&(ku.has(c)||pl(c,!1,o),pl(c,!0,o))});var a=9===o.nodeType?o:o.ownerDocument;null===a||a[br]||(a[br]=!0,pl("selectionchange",!1,a))}}function fl(o,a,c,u){switch(Zc(a)){case 1:var p=Hc;break;case 4:p=Uc;break;default:p=Za}c=p.bind(null,a,c,o),p=void 0,!za||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(p=!0),o.addEventListener(a,c,u?void 0===p||{capture:!0,passive:p}:void 0!==p&&{passive:p})}function ml(o,a,c,u,p){var h=u;if(!(1&a||2&a||null===u))e:for(;;){if(null===u)return;var y=u.tag;if(3===y||4===y){var S=u.stateNode.containerInfo;if(S===p||8===S.nodeType&&S.parentNode===p)break;if(4===y)for(y=u.return;null!==y;){var A=y.tag;if((3===A||4===A)&&((A=y.stateNode.containerInfo)===p||8===A.nodeType&&A.parentNode===p))return;y=y.return}for(;null!==S;){if(null===(y=ei(S)))return;if(5===(A=y.tag)||6===A){u=h=y;continue e}S=S.parentNode}}u=u.return}Ac(function(){var O=h,J=Ga(c),q=[];e:{var W=xu.get(o);if(void 0!==W){var de=Ja,me=o;switch(o){case"keypress":if(0===ur(c))break e;case"keydown":case"keyup":de=dp;break;case"focusin":me="focus",de=Qa;break;case"focusout":me="blur",de=Qa;break;case"beforeblur":case"afterblur":de=Qa;break;case"click":if(2===c.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=mp;break;case gu:case vu:case yu:de=ip;break;case bu:de=hp;break;case"scroll":de=qc;break;case"wheel":de=vp;break;case"copy":case"cut":case"paste":de=sp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=nu}var _e=!!(4&a),pt=!_e&&"scroll"===o,G=_e?null!==W?W+"Capture":null:W;_e=[];for(var D,F=O;null!==F;){var ne=(D=F).stateNode;if(5===D.tag&&null!==ne&&(D=ne,null!==G&&null!=(ne=tr(F,G))&&_e.push(uo(F,ne,D))),pt)break;F=F.return}0<_e.length&&(W=new de(W,me,null,c,J),q.push({event:W,listeners:_e}))}}if(!(7&a)){if(de="mouseout"===o||"pointerout"===o,(!(W="mouseover"===o||"pointerover"===o)||c===$a||!(me=c.relatedTarget||c.fromElement)||!ei(me)&&!me[wn])&&(de||W)&&(W=J.window===J?J:(W=J.ownerDocument)?W.defaultView||W.parentWindow:window,de?(de=O,null!==(me=(me=c.relatedTarget||c.toElement)?ei(me):null)&&(me!==(pt=Ko(me))||5!==me.tag&&6!==me.tag)&&(me=null)):(de=null,me=O),de!==me)){if(_e=Qc,ne="onMouseLeave",G="onMouseEnter",F="mouse",("pointerout"===o||"pointerover"===o)&&(_e=nu,ne="onPointerLeave",G="onPointerEnter",F="pointer"),pt=null==de?W:ti(de),D=null==me?W:ti(me),(W=new _e(ne,F+"leave",de,c,J)).target=pt,W.relatedTarget=D,ne=null,ei(J)===O&&((_e=new _e(G,F+"enter",me,c,J)).target=D,_e.relatedTarget=pt,ne=_e),pt=ne,de&&me)t:{for(G=me,F=0,D=_e=de;D;D=Ti(D))F++;for(D=0,ne=G;ne;ne=Ti(ne))D++;for(;0<F-D;)_e=Ti(_e),F--;for(;0<D-F;)G=Ti(G),D--;for(;F--;){if(_e===G||null!==G&&_e===G.alternate)break t;_e=Ti(_e),G=Ti(G)}_e=null}else _e=null;null!==de&&Ai(q,W,de,_e,!1),null!==me&&null!==pt&&Ai(q,pt,me,_e,!0)}if("select"===(de=(W=O?ti(O):window).nodeName&&W.nodeName.toLowerCase())||"input"===de&&"file"===W.type)var he=Ni;else if(ru(W))if(su)he=wp;else{he=cu;var be=lu}else(de=W.nodeName)&&"input"===de.toLowerCase()&&("checkbox"===W.type||"radio"===W.type)&&(he=uu);switch(he&&(he=he(o,O))?ol(q,he,c,J):(be&&be(o,W,O),"focusout"===o&&(be=W._wrapperState)&&be.controlled&&"number"===W.type&&Ra(W,"number",W.value)),be=O?ti(O):window,o){case"focusin":(ru(be)||"true"===be.contentEditable)&&(Ei=be,ll=O,vr=null);break;case"focusout":vr=ll=Ei=null;break;case"mousedown":cl=!0;break;case"contextmenu":case"mouseup":case"dragend":cl=!1,_u(q,c,J);break;case"selectionchange":if(Ip)break;case"keydown":case"keyup":_u(q,c,J)}var xe;if(tl)e:{switch(o){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else wi?ou(o,c)&&(we="onCompositionEnd"):"keydown"===o&&229===c.keyCode&&(we="onCompositionStart");we&&(ws&&"ko"!==c.locale&&(wi||"onCompositionStart"!==we?"onCompositionEnd"===we&&wi&&(xe=Jc()):(xi="value"in(co=J)?co.value:co.textContent,wi=!0)),0<(be=un(O,we)).length&&(we=new tu(we,o,null,c,J),q.push({event:we,listeners:be}),(xe||null!==(xe=iu(c)))&&(we.data=xe))),(xe=bp?function xp(o,a){switch(o){case"compositionend":return iu(a);case"keypress":return 32!==a.which?null:(mr=!0,nl);case"textInput":return(o=a.data)===nl&&mr?null:o;default:return null}}(o,c):function Cp(o,a){if(wi)return"compositionend"===o||!tl&&ou(o,a)?(o=Jc(),ks=xi=co=null,wi=!1,o):null;switch(o){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ws&&"ko"!==a.locale?null:a.data}}(o,c))&&0<(O=un(O,"onBeforeInput")).length&&(J=new tu("onBeforeInput","beforeinput",null,c,J),q.push({event:J,listeners:O}),J.data=xe)}wu(q,a)})}function uo(o,a,c){return{instance:o,listener:a,currentTarget:c}}function un(o,a){for(var c=a+"Capture",u=[];null!==o;){var p=o,h=p.stateNode;5===p.tag&&null!==h&&(p=h,null!=(h=tr(o,c))&&u.unshift(uo(o,h,p)),null!=(h=tr(o,a))&&u.push(uo(o,h,p))),o=o.return}return u}function Ti(o){if(null===o)return null;do{o=o.return}while(o&&5!==o.tag);return o||null}function Ai(o,a,c,u,p){for(var h=a._reactName,y=[];null!==c&&c!==u;){var S=c,A=S.alternate,O=S.stateNode;if(null!==A&&A===u)break;5===S.tag&&null!==O&&(S=O,p?null!=(A=tr(c,h))&&y.unshift(uo(c,A,S)):p||null!=(A=tr(c,h))&&y.push(uo(c,A,S))),c=c.return}0!==y.length&&o.push({event:a,listeners:y})}var _l=/\r\n?/g,Ri=/\u0000|\uFFFD/g;function hl(o){return("string"==typeof o?o:""+o).replace(_l,"\n").replace(Ri,"")}function xr(o,a,c){if(a=hl(a),hl(o)!==a&&c)throw Error(N(425))}function Rs(){}var Fs=null,gl=null;function vl(o,a){return"textarea"===o||"noscript"===o||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var yl="function"==typeof setTimeout?setTimeout:void 0,Rp="function"==typeof clearTimeout?clearTimeout:void 0,Vn="function"==typeof Promise?Promise:void 0,Fi="function"==typeof queueMicrotask?queueMicrotask:typeof Vn<"u"?function(o){return Vn.resolve(null).then(o).catch(Cr)}:yl;function Cr(o){setTimeout(function(){throw o})}function qo(o,a){var c=a,u=0;do{var p=c.nextSibling;if(o.removeChild(c),p&&8===p.nodeType)if("/$"===(c=p.data)){if(0===u)return o.removeChild(p),void cr(a);u--}else"$"!==c&&"$?"!==c&&"$!"!==c||u++;c=p}while(c);cr(a)}function po(o){for(;null!=o;o=o.nextSibling){var a=o.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=o.data)||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return o}function kr(o){o=o.previousSibling;for(var a=0;o;){if(8===o.nodeType){var c=o.data;if("$"===c||"$!"===c||"$?"===c){if(0===a)return o;a--}else"/$"===c&&a++}o=o.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),yn="__reactFiber$"+Zn,On="__reactProps$"+Zn,wn="__reactContainer$"+Zn,Qo="__reactEvents$"+Zn,Nu="__reactListeners$"+Zn,bl="__reactHandles$"+Zn;function ei(o){var a=o[yn];if(a)return a;for(var c=o.parentNode;c;){if(a=c[wn]||c[yn]){if(c=a.alternate,null!==a.child||null!==c&&null!==c.child)for(o=kr(o);null!==o;){if(c=o[yn])return c;o=kr(o)}return a}c=(o=c).parentNode}return null}function Ro(o){return!(o=o[yn]||o[wn])||5!==o.tag&&6!==o.tag&&13!==o.tag&&3!==o.tag?null:o}function ti(o){if(5===o.tag||6===o.tag)return o.stateNode;throw Error(N(33))}function Ms(o){return o[On]||null}var js=[],Mi=-1;function Fo(o){return{current:o}}function Ue(o){0>Mi||(o.current=js[Mi],js[Mi]=null,Mi--)}function We(o,a){Mi++,js[Mi]=o.current,o.current=a}var Mo={},Pt=Fo(Mo),qt=Fo(!1),jo=Mo;function $o(o,a){var c=o.type.contextTypes;if(!c)return Mo;var u=o.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===a)return u.__reactInternalMemoizedMaskedChildContext;var h,p={};for(h in c)p[h]=a[h];return u&&((o=o.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=p),p}function $t(o){return null!=o.childContextTypes}function Sr(){Ue(qt),Ue(Pt)}function $s(o,a,c){if(Pt.current!==Mo)throw Error(N(168));We(Pt,a),We(qt,c)}function wr(o,a,c){var u=o.stateNode;if(a=a.childContextTypes,"function"!=typeof u.getChildContext)return c;for(var p in u=u.getChildContext())if(!(p in a))throw Error(N(108,ut(o)||"Unknown",p));return M({},c,u)}function ni(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Mo,jo=Pt.current,We(Pt,o),We(qt,qt.current),!0}function Gs(o,a,c){var u=o.stateNode;if(!u)throw Error(N(169));c?(o=wr(o,a,jo),u.__reactInternalMemoizedMergedChildContext=o,Ue(qt),Ue(Pt),We(Pt,o)):Ue(qt),We(qt,c)}var Tt=null,dn=!1,xl=!1;function Nr(o){null===Tt?Tt=[o]:Tt.push(o)}function Qt(){if(!xl&&null!==Tt){xl=!0;var o=0,a=Be;try{var c=Tt;for(Be=1;o<c.length;o++){var u=c[o];do{u=u(!0)}while(null!==u)}Tt=null,dn=!1}catch(p){throw null!==Tt&&(Tt=Tt.slice(o+1)),$c(La,Qt),p}finally{Be=a,xl=!1}}return null}var oi=[],Go=0,Er=null,ii=0,Nn=[],En=0,Do=null,fo=1,mo="";function ri(o,a){oi[Go++]=ii,oi[Go++]=Er,Er=o,ii=a}function Eu(o,a,c){Nn[En++]=fo,Nn[En++]=mo,Nn[En++]=Do,Do=o;var u=fo;o=mo;var p=32-Gn(u)-1;u&=~(1<<p),c+=1;var h=32-Gn(a)+p;if(30<h){var y=p-p%5;h=(u&(1<<y)-1).toString(32),u>>=y,p-=y,fo=1<<32-Gn(a)+p|c<<p|u,mo=h+o}else fo=1<<h|c<<p|u,mo=o}function Cl(o){null!==o.return&&(ri(o,1),Eu(o,1,0))}function Ir(o){for(;o===Er;)Er=oi[--Go],oi[Go]=null,ii=oi[--Go],oi[Go]=null;for(;o===Do;)Do=Nn[--En],Nn[En]=null,mo=Nn[--En],Nn[En]=null,fo=Nn[--En],Nn[En]=null}var en=null,pn=null,Ye=!1,tn=null;function Tr(o,a){var c=jn(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=o,null===(a=o.deletions)?(o.deletions=[c],o.flags|=16):a.push(c)}function si(o,a){switch(o.tag){case 5:var c=o.type;return null!==(a=1!==a.nodeType||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(o.stateNode=a,en=o,pn=po(a.firstChild),!0);case 6:return null!==(a=""===o.pendingProps||3!==a.nodeType?null:a)&&(o.stateNode=a,en=o,pn=null,!0);case 13:return null!==(a=8!==a.nodeType?null:a)&&(o.memoizedState={dehydrated:a,treeContext:c=null!==Do?{id:fo,overflow:mo}:null,retryLane:1073741824},(c=jn(18,null,null,0)).stateNode=a,c.return=o,o.child=c,en=o,pn=null,!0);default:return!1}}function ai(o){return!(!(1&o.mode)||128&o.flags)}function In(o){if(Ye){var a=pn;if(a){var c=a;if(!si(o,a)){if(ai(o))throw Error(N(418));a=po(c.nextSibling);var u=en;a&&si(o,a)?Tr(u,c):(o.flags=-4097&o.flags|2,Ye=!1,en=o)}}else{if(ai(o))throw Error(N(418));o.flags=-4097&o.flags|2,Ye=!1,en=o}}}function Iu(o){for(o=o.return;null!==o&&5!==o.tag&&3!==o.tag&&13!==o.tag;)o=o.return;en=o}function Ds(o){if(o!==en)return!1;if(!Ye)return Iu(o),Ye=!0,!1;var a;if((a=3!==o.tag)&&!(a=5!==o.tag)&&(a="head"!==(a=o.type)&&"body"!==a&&!vl(o.type,o.memoizedProps)),a&&(a=pn)){if(ai(o))throw Tu(),Error(N(418));for(;a;)Tr(o,a),a=po(a.nextSibling)}if(Iu(o),13===o.tag){if(!(o=null!==(o=o.memoizedState)?o.dehydrated:null))throw Error(N(317));e:{for(o=o.nextSibling,a=0;o;){if(8===o.nodeType){var c=o.data;if("/$"===c){if(0===a){pn=po(o.nextSibling);break e}a--}else"$"!==c&&"$!"!==c&&"$?"!==c||a++}o=o.nextSibling}pn=null}}else pn=en?po(o.stateNode.nextSibling):null;return!0}function Tu(){for(var o=pn;o;)o=po(o.nextSibling)}function ji(){pn=en=null,Ye=!1}function kl(o){null===tn?tn=[o]:tn.push(o)}var Mp=it.ReactCurrentBatchConfig;function Ar(o,a,c){if(null!==(o=c.ref)&&"function"!=typeof o&&"object"!=typeof o){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(N(309));var u=c.stateNode}if(!u)throw Error(N(147,o));var p=u,h=""+o;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===h?a.ref:((a=function(y){var S=p.refs;null===y?delete S[h]:S[h]=y})._stringRef=h,a)}if("string"!=typeof o)throw Error(N(284));if(!c._owner)throw Error(N(290,o))}return o}function Rr(o,a){throw o=Object.prototype.toString.call(a),Error(N(31,"[object Object]"===o?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function Sl(o){return(0,o._init)(o._payload)}function Au(o){function a(G,F){if(o){var D=G.deletions;null===D?(G.deletions=[F],G.flags|=16):D.push(F)}}function c(G,F){if(!o)return null;for(;null!==F;)a(G,F),F=F.sibling;return null}function u(G,F){for(G=new Map;null!==F;)G.set(null!==F.key?F.key:F.index,F),F=F.sibling;return G}function p(G,F){return(G=Xo(G,F)).index=0,G.sibling=null,G}function h(G,F,D){return G.index=D,o?null!==(D=G.alternate)?(D=D.index)<F?(G.flags|=2,F):D:(G.flags|=2,F):(G.flags|=1048576,F)}function y(G){return o&&null===G.alternate&&(G.flags|=2),G}function S(G,F,D,ne){return null===F||6!==F.tag?((F=lc(D,G.mode,ne)).return=G,F):((F=p(F,D)).return=G,F)}function A(G,F,D,ne){var he=D.type;return he===ct?J(G,F,D.props.children,ne,D.key):null!==F&&(F.elementType===he||"object"==typeof he&&null!==he&&he.$$typeof===te&&Sl(he)===F.type)?((ne=p(F,D.props)).ref=Ar(G,F,D),ne.return=G,ne):((ne=ua(D.type,D.key,D.props,null,G.mode,ne)).ref=Ar(G,F,D),ne.return=G,ne)}function O(G,F,D,ne){return null===F||4!==F.tag||F.stateNode.containerInfo!==D.containerInfo||F.stateNode.implementation!==D.implementation?((F=da(D,G.mode,ne)).return=G,F):((F=p(F,D.children||[])).return=G,F)}function J(G,F,D,ne,he){return null===F||7!==F.tag?((F=$n(D,G.mode,ne,he)).return=G,F):((F=p(F,D)).return=G,F)}function q(G,F,D){if("string"==typeof F&&""!==F||"number"==typeof F)return(F=lc(""+F,G.mode,D)).return=G,F;if("object"==typeof F&&null!==F){switch(F.$$typeof){case Et:return(D=ua(F.type,F.key,F.props,null,G.mode,D)).ref=Ar(G,null,F),D.return=G,D;case je:return(F=da(F,G.mode,D)).return=G,F;case te:return q(G,(0,F._init)(F._payload),D)}if(qi(F)||Ve(F))return(F=$n(F,G.mode,D,null)).return=G,F;Rr(G,F)}return null}function W(G,F,D,ne){var he=null!==F?F.key:null;if("string"==typeof D&&""!==D||"number"==typeof D)return null!==he?null:S(G,F,""+D,ne);if("object"==typeof D&&null!==D){switch(D.$$typeof){case Et:return D.key===he?A(G,F,D,ne):null;case je:return D.key===he?O(G,F,D,ne):null;case te:return W(G,F,(he=D._init)(D._payload),ne)}if(qi(D)||Ve(D))return null!==he?null:J(G,F,D,ne,null);Rr(G,D)}return null}function de(G,F,D,ne,he){if("string"==typeof ne&&""!==ne||"number"==typeof ne)return S(F,G=G.get(D)||null,""+ne,he);if("object"==typeof ne&&null!==ne){switch(ne.$$typeof){case Et:return A(F,G=G.get(null===ne.key?D:ne.key)||null,ne,he);case je:return O(F,G=G.get(null===ne.key?D:ne.key)||null,ne,he);case te:return de(G,F,D,(0,ne._init)(ne._payload),he)}if(qi(ne)||Ve(ne))return J(F,G=G.get(D)||null,ne,he,null);Rr(F,ne)}return null}return function pt(G,F,D,ne){if("object"==typeof D&&null!==D&&D.type===ct&&null===D.key&&(D=D.props.children),"object"==typeof D&&null!==D){switch(D.$$typeof){case Et:e:{for(var he=D.key,be=F;null!==be;){if(be.key===he){if((he=D.type)===ct){if(7===be.tag){c(G,be.sibling),(F=p(be,D.props.children)).return=G,G=F;break e}}else if(be.elementType===he||"object"==typeof he&&null!==he&&he.$$typeof===te&&Sl(he)===be.type){c(G,be.sibling),(F=p(be,D.props)).ref=Ar(G,be,D),F.return=G,G=F;break e}c(G,be);break}a(G,be),be=be.sibling}D.type===ct?((F=$n(D.props.children,G.mode,ne,D.key)).return=G,G=F):((ne=ua(D.type,D.key,D.props,null,G.mode,ne)).ref=Ar(G,F,D),ne.return=G,G=ne)}return y(G);case je:e:{for(be=D.key;null!==F;){if(F.key===be){if(4===F.tag&&F.stateNode.containerInfo===D.containerInfo&&F.stateNode.implementation===D.implementation){c(G,F.sibling),(F=p(F,D.children||[])).return=G,G=F;break e}c(G,F);break}a(G,F),F=F.sibling}(F=da(D,G.mode,ne)).return=G,G=F}return y(G);case te:return pt(G,F,(be=D._init)(D._payload),ne)}if(qi(D))return function me(G,F,D,ne){for(var he=null,be=null,xe=F,we=F=0,Rt=null;null!==xe&&we<D.length;we++){xe.index>we?(Rt=xe,xe=null):Rt=xe.sibling;var Ge=W(G,xe,D[we],ne);if(null===Ge){null===xe&&(xe=Rt);break}o&&xe&&null===Ge.alternate&&a(G,xe),F=h(Ge,F,we),null===be?he=Ge:be.sibling=Ge,be=Ge,xe=Rt}if(we===D.length)return c(G,xe),Ye&&ri(G,we),he;if(null===xe){for(;we<D.length;we++)null!==(xe=q(G,D[we],ne))&&(F=h(xe,F,we),null===be?he=xe:be.sibling=xe,be=xe);return Ye&&ri(G,we),he}for(xe=u(G,xe);we<D.length;we++)null!==(Rt=de(xe,G,we,D[we],ne))&&(o&&null!==Rt.alternate&&xe.delete(null===Rt.key?we:Rt.key),F=h(Rt,F,we),null===be?he=Rt:be.sibling=Rt,be=Rt);return o&&xe.forEach(function(io){return a(G,io)}),Ye&&ri(G,we),he}(G,F,D,ne);if(Ve(D))return function _e(G,F,D,ne){var he=Ve(D);if("function"!=typeof he)throw Error(N(150));if(null==(D=he.call(D)))throw Error(N(151));for(var be=he=null,xe=F,we=F=0,Rt=null,Ge=D.next();null!==xe&&!Ge.done;we++,Ge=D.next()){xe.index>we?(Rt=xe,xe=null):Rt=xe.sibling;var io=W(G,xe,Ge.value,ne);if(null===io){null===xe&&(xe=Rt);break}o&&xe&&null===io.alternate&&a(G,xe),F=h(io,F,we),null===be?he=io:be.sibling=io,be=io,xe=Rt}if(Ge.done)return c(G,xe),Ye&&ri(G,we),he;if(null===xe){for(;!Ge.done;we++,Ge=D.next())null!==(Ge=q(G,Ge.value,ne))&&(F=h(Ge,F,we),null===be?he=Ge:be.sibling=Ge,be=Ge);return Ye&&ri(G,we),he}for(xe=u(G,xe);!Ge.done;we++,Ge=D.next())null!==(Ge=de(xe,G,we,Ge.value,ne))&&(o&&null!==Ge.alternate&&xe.delete(null===Ge.key?we:Ge.key),F=h(Ge,F,we),null===be?he=Ge:be.sibling=Ge,be=Ge);return o&&xe.forEach(function(Rd){return a(G,Rd)}),Ye&&ri(G,we),he}(G,F,D,ne);Rr(G,D)}return"string"==typeof D&&""!==D||"number"==typeof D?(D=""+D,null!==F&&6===F.tag?(c(G,F.sibling),(F=p(F,D)).return=G,G=F):(c(G,F),(F=lc(D,G.mode,ne)).return=G,G=F),y(G)):c(G,F)}}var $i=Au(!0),wl=Au(!1),Vo=Fo(null),Fr=null,_o=null,Nl=null;function Gi(){Nl=_o=Fr=null}function Xt(o){var a=Vo.current;Ue(Vo),o._currentValue=a}function Vs(o,a,c){for(;null!==o;){var u=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,null!==u&&(u.childLanes|=a)):null!==u&&(u.childLanes&a)!==a&&(u.childLanes|=a),o===c)break;o=o.return}}function Di(o,a){Fr=o,Nl=_o=null,null!==(o=o.dependencies)&&null!==o.firstContext&&(o.lanes&a&&(Ht=!0),o.firstContext=null)}function bn(o){var a=o._currentValue;if(Nl!==o)if(o={context:o,memoizedValue:a,next:null},null===_o){if(null===Fr)throw Error(N(308));_o=o,Fr.dependencies={lanes:0,firstContext:o}}else _o=_o.next=o;return a}var Jn=null;function ho(o){null===Jn?Jn=[o]:Jn.push(o)}function Oo(o,a,c,u){var p=a.interleaved;return null===p?(c.next=c,ho(a)):(c.next=p.next,p.next=c),a.interleaved=c,Kn(o,u)}function Kn(o,a){o.lanes|=a;var c=o.alternate;for(null!==c&&(c.lanes|=a),c=o,o=o.return;null!==o;)o.childLanes|=a,null!==(c=o.alternate)&&(c.childLanes|=a),c=o,o=o.return;return 3===c.tag?c.stateNode:null}var go=!1;function El(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tn(o,a){a.updateQueue===(o=o.updateQueue)&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function qn(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function zn(o,a,c){var u=o.updateQueue;if(null===u)return null;if(u=u.shared,2&$e){var p=u.pending;return null===p?a.next=a:(a.next=p.next,p.next=a),u.pending=a,Kn(o,c)}return null===(p=u.interleaved)?(a.next=a,ho(u)):(a.next=p.next,p.next=a),u.interleaved=a,Kn(o,c)}function Vi(o,a,c){if(null!==(a=a.updateQueue)&&(a=a.shared,4194240&c)){var u=a.lanes;a.lanes=c|=u&=o.pendingLanes,ys(o,c)}}function Il(o,a){var c=o.updateQueue,u=o.alternate;if(null===u||c!==(u=u.updateQueue))null===(o=c.lastBaseUpdate)?c.firstBaseUpdate=a:o.next=a,c.lastBaseUpdate=a;else{var p=null,h=null;if(null!==(c=c.firstBaseUpdate)){do{var y={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===h?p=h=y:h=h.next=y,c=c.next}while(null!==c);null===h?p=h=a:h=h.next=a}else p=h=a;o.updateQueue=c={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:h,shared:u.shared,effects:u.effects}}}function Os(o,a,c,u){var p=o.updateQueue;go=!1;var h=p.firstBaseUpdate,y=p.lastBaseUpdate,S=p.shared.pending;if(null!==S){p.shared.pending=null;var A=S,O=A.next;A.next=null,null===y?h=O:y.next=O,y=A;var J=o.alternate;null!==J&&(S=(J=J.updateQueue).lastBaseUpdate)!==y&&(null===S?J.firstBaseUpdate=O:S.next=O,J.lastBaseUpdate=A)}if(null!==h){var q=p.baseState;for(y=0,J=O=A=null,S=h;;){var W=S.lane,de=S.eventTime;if((u&W)===W){null!==J&&(J=J.next={eventTime:de,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var me=o,_e=S;switch(W=a,de=c,_e.tag){case 1:if("function"==typeof(me=_e.payload)){q=me.call(de,q,W);break e}q=me;break e;case 3:me.flags=-65537&me.flags|128;case 0:if(null==(W="function"==typeof(me=_e.payload)?me.call(de,q,W):me))break e;q=M({},q,W);break e;case 2:go=!0}}null!==S.callback&&0!==S.lane&&(o.flags|=64,null===(W=p.effects)?p.effects=[S]:W.push(S))}else de={eventTime:de,lane:W,tag:S.tag,payload:S.payload,callback:S.callback,next:null},null===J?(O=J=de,A=q):J=J.next=de,y|=W;if(null===(S=S.next)){if(null===(S=p.shared.pending))break;S=(W=S).next,W.next=null,p.lastBaseUpdate=W,p.shared.pending=null}}if(null===J&&(A=q),p.baseState=A,p.firstBaseUpdate=O,p.lastBaseUpdate=J,null!==(a=p.shared.interleaved)){p=a;do{y|=p.lane,p=p.next}while(p!==a)}else null===h&&(p.shared.lanes=0);yo|=y,o.lanes=y,o.memoizedState=q}}function Ru(o,a,c){if(o=a.effects,a.effects=null,null!==o)for(a=0;a<o.length;a++){var u=o[a],p=u.callback;if(null!==p){if(u.callback=null,u=c,"function"!=typeof p)throw Error(N(191,p));p.call(u)}}}var Oi={},Bn=Fo(Oi),Mr=Fo(Oi),zs=Fo(Oi);function li(o){if(o===Oi)throw Error(N(174));return o}function Bs(o,a){switch(We(zs,a),We(Mr,o),We(Bn,Oi),o=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Fa(null,"");break;default:a=Fa(a=(o=8===o?a.parentNode:a).namespaceURI||null,o=o.tagName)}Ue(Bn),We(Bn,a)}function ci(){Ue(Bn),Ue(Mr),Ue(zs)}function Tl(o){li(zs.current);var a=li(Bn.current),c=Fa(a,o.type);a!==c&&(We(Mr,o),We(Bn,c))}function Fu(o){Mr.current===o&&(Ue(Bn),Ue(Mr))}var dt=Fo(0);function zi(o){for(var a=o;null!==a;){if(13===a.tag){var c=a.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var jr=[];function Al(){for(var o=0;o<jr.length;o++)jr[o]._workInProgressVersionPrimary=null;jr.length=0}var Ls=it.ReactCurrentDispatcher,Rl=it.ReactCurrentBatchConfig,zo=0,st=null,St=null,At=null,Ps=!1,$r=!1,Gr=0,jp=0;function Yt(){throw Error(N(321))}function Fl(o,a){if(null===a)return!1;for(var c=0;c<a.length&&c<o.length;c++)if(!Dn(o[c],a[c]))return!1;return!0}function Ml(o,a,c,u,p,h){if(zo=h,st=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ls.current=null===o||null===o.memoizedState?Vp:Op,o=c(u,p),$r){h=0;do{if($r=!1,Gr=0,25<=h)throw Error(N(301));h+=1,At=St=null,a.updateQueue=null,Ls.current=zp,o=c(u,p)}while($r)}if(Ls.current=Us,a=null!==St&&null!==St.next,zo=0,At=St=st=null,Ps=!1,a)throw Error(N(300));return o}function jl(){var o=0!==Gr;return Gr=0,o}function Qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===At?st.memoizedState=At=o:At=At.next=o,At}function An(){if(null===St){var o=st.alternate;o=null!==o?o.memoizedState:null}else o=St.next;var a=null===At?st.memoizedState:At.next;if(null!==a)At=a,St=o;else{if(null===o)throw Error(N(310));o={memoizedState:(St=o).memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},null===At?st.memoizedState=At=o:At=At.next=o}return At}function Dr(o,a){return"function"==typeof a?a(o):a}function $l(o){var a=An(),c=a.queue;if(null===c)throw Error(N(311));c.lastRenderedReducer=o;var u=St,p=u.baseQueue,h=c.pending;if(null!==h){if(null!==p){var y=p.next;p.next=h.next,h.next=y}u.baseQueue=p=h,c.pending=null}if(null!==p){u=u.baseState;var S=y=null,A=null,O=h=p.next;do{var J=O.lane;if((zo&J)===J)null!==A&&(A=A.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:o(u,O.action);else{var q={lane:J,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};null===A?(S=A=q,y=u):A=A.next=q,st.lanes|=J,yo|=J}O=O.next}while(null!==O&&O!==h);null===A?y=u:A.next=S,Dn(u,a.memoizedState)||(Ht=!0),a.memoizedState=u,a.baseState=y,a.baseQueue=A,c.lastRenderedState=u}if(null!==(o=c.interleaved)){p=o;do{st.lanes|=h=p.lane,yo|=h,p=p.next}while(p!==o)}else null===p&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Gl(o){var a=An(),c=a.queue;if(null===c)throw Error(N(311));c.lastRenderedReducer=o;var u=c.dispatch,p=c.pending,h=a.memoizedState;if(null!==p){c.pending=null;var y=p=p.next;do{h=o(h,y.action),y=y.next}while(y!==p);Dn(h,a.memoizedState)||(Ht=!0),a.memoizedState=h,null===a.baseQueue&&(a.baseState=h),c.lastRenderedState=h}return[h,u]}function Mu(){}function ju(o,a){var c=st,u=An(),p=a(),h=!Dn(u.memoizedState,p);if(h&&(u.memoizedState=p,Ht=!0),Dl(Du.bind(null,c,u=u.queue,o),[o]),u.getSnapshot!==a||h||null!==At&&1&At.memoizedState.tag){if(c.flags|=2048,Vr(9,Gu.bind(null,c,u,p,a),void 0,null),null===Nt)throw Error(N(349));30&zo||$u(c,a,p)}return p}function $u(o,a,c){o.flags|=16384,o={getSnapshot:a,value:c},null===(a=st.updateQueue)?(st.updateQueue=a={lastEffect:null,stores:null},a.stores=[o]):null===(c=a.stores)?a.stores=[o]:c.push(o)}function Gu(o,a,c,u){a.value=c,a.getSnapshot=u,Vu(a)&&Ou(o)}function Du(o,a,c){return c(function(){Vu(a)&&Ou(o)})}function Vu(o){var a=o.getSnapshot;o=o.value;try{var c=a();return!Dn(o,c)}catch{return!0}}function Ou(o){var a=Kn(o,1);null!==a&&Wt(a,o,1,-1)}function zu(o){var a=Qn();return"function"==typeof o&&(o=o()),a.memoizedState=a.baseState=o,a.queue=o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:o},o=o.dispatch=Dp.bind(null,st,o),[a.memoizedState,o]}function Vr(o,a,c,u){return o={tag:o,create:a,destroy:c,deps:u,next:null},null===(a=st.updateQueue)?(st.updateQueue=a={lastEffect:null,stores:null},a.lastEffect=o.next=o):null===(c=a.lastEffect)?a.lastEffect=o.next=o:(u=c.next,c.next=o,o.next=u,a.lastEffect=o),o}function Bu(){return An().memoizedState}function Xs(o,a,c,u){var p=Qn();st.flags|=o,p.memoizedState=Vr(1|a,c,void 0,void 0===u?null:u)}function Ys(o,a,c,u){var p=An();u=void 0===u?null:u;var h=void 0;if(null!==St){var y=St.memoizedState;if(h=y.destroy,null!==u&&Fl(u,y.deps))return void(p.memoizedState=Vr(a,c,h,u))}st.flags|=o,p.memoizedState=Vr(1|a,c,h,u)}function Lu(o,a){return Xs(8390656,8,o,a)}function Dl(o,a){return Ys(2048,8,o,a)}function Pu(o,a){return Ys(4,2,o,a)}function Xu(o,a){return Ys(4,4,o,a)}function Yu(o,a){return"function"==typeof a?(o=o(),a(o),function(){a(null)}):null!=a?(o=o(),a.current=o,function(){a.current=null}):void 0}function Hu(o,a,c){return c=null!=c?c.concat([o]):null,Ys(4,4,Yu.bind(null,a,o),c)}function Hs(){}function Uu(o,a){var c=An();a=void 0===a?null:a;var u=c.memoizedState;return null!==u&&null!==a&&Fl(a,u[1])?u[0]:(c.memoizedState=[o,a],o)}function Wu(o,a){var c=An();a=void 0===a?null:a;var u=c.memoizedState;return null!==u&&null!==a&&Fl(a,u[1])?u[0]:(o=o(),c.memoizedState=[o,a],o)}function Zu(o,a,c){return 21&zo?(Dn(c,a)||(c=Oc(),st.lanes|=c,yo|=c,o.baseState=!0),a):(o.baseState&&(o.baseState=!1,Ht=!0),o.memoizedState=c)}function $p(o,a){var c=Be;Be=0!==c&&4>c?c:4,o(!0);var u=Rl.transition;Rl.transition={};try{o(!1),a()}finally{Be=c,Rl.transition=u}}function Ju(){return An().memoizedState}function Gp(o,a,c){var u=Co(o);c={lane:u,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(o)?qu(a,c):null!==(c=Oo(o,a,c,u))&&(Wt(c,o,u,Ot()),Qu(c,a,u))}function Dp(o,a,c){var u=Co(o),p={lane:u,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(o))qu(a,p);else{var h=o.alternate;if(0===o.lanes&&(null===h||0===h.lanes)&&null!==(h=a.lastRenderedReducer))try{var y=a.lastRenderedState,S=h(y,c);if(p.hasEagerState=!0,p.eagerState=S,Dn(S,y)){var A=a.interleaved;return null===A?(p.next=p,ho(a)):(p.next=A.next,A.next=p),void(a.interleaved=p)}}catch{}null!==(c=Oo(o,a,p,u))&&(Wt(c,o,u,p=Ot()),Qu(c,a,u))}}function Ku(o){var a=o.alternate;return o===st||null!==a&&a===st}function qu(o,a){$r=Ps=!0;var c=o.pending;null===c?a.next=a:(a.next=c.next,c.next=a),o.pending=a}function Qu(o,a,c){if(4194240&c){var u=a.lanes;a.lanes=c|=u&=o.pendingLanes,ys(o,c)}}var Us={readContext:bn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},Vp={readContext:bn,useCallback:function(o,a){return Qn().memoizedState=[o,void 0===a?null:a],o},useContext:bn,useEffect:Lu,useImperativeHandle:function(o,a,c){return c=null!=c?c.concat([o]):null,Xs(4194308,4,Yu.bind(null,a,o),c)},useLayoutEffect:function(o,a){return Xs(4194308,4,o,a)},useInsertionEffect:function(o,a){return Xs(4,2,o,a)},useMemo:function(o,a){var c=Qn();return a=void 0===a?null:a,o=o(),c.memoizedState=[o,a],o},useReducer:function(o,a,c){var u=Qn();return a=void 0!==c?c(a):a,u.memoizedState=u.baseState=a,u.queue=o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},o=o.dispatch=Gp.bind(null,st,o),[u.memoizedState,o]},useRef:function(o){return Qn().memoizedState={current:o}},useState:zu,useDebugValue:Hs,useDeferredValue:function(o){return Qn().memoizedState=o},useTransition:function(){var o=zu(!1),a=o[0];return o=$p.bind(null,o[1]),Qn().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,c){var u=st,p=Qn();if(Ye){if(void 0===c)throw Error(N(407));c=c()}else{if(c=a(),null===Nt)throw Error(N(349));30&zo||$u(u,a,c)}p.memoizedState=c;var h={value:c,getSnapshot:a};return p.queue=h,Lu(Du.bind(null,u,h,o),[o]),u.flags|=2048,Vr(9,Gu.bind(null,u,h,c,a),void 0,null),c},useId:function(){var o=Qn(),a=Nt.identifierPrefix;if(Ye){var c=mo;a=":"+a+"R"+(c=(fo&~(1<<32-Gn(fo)-1)).toString(32)+c),0<(c=Gr++)&&(a+="H"+c.toString(32)),a+=":"}else a=":"+a+"r"+(c=jp++).toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},Op={readContext:bn,useCallback:Uu,useContext:bn,useEffect:Dl,useImperativeHandle:Hu,useInsertionEffect:Pu,useLayoutEffect:Xu,useMemo:Wu,useReducer:$l,useRef:Bu,useState:function(){return $l(Dr)},useDebugValue:Hs,useDeferredValue:function(o){return Zu(An(),St.memoizedState,o)},useTransition:function(){return[$l(Dr)[0],An().memoizedState]},useMutableSource:Mu,useSyncExternalStore:ju,useId:Ju,unstable_isNewReconciler:!1},zp={readContext:bn,useCallback:Uu,useContext:bn,useEffect:Dl,useImperativeHandle:Hu,useInsertionEffect:Pu,useLayoutEffect:Xu,useMemo:Wu,useReducer:Gl,useRef:Bu,useState:function(){return Gl(Dr)},useDebugValue:Hs,useDeferredValue:function(o){var a=An();return null===St?a.memoizedState=o:Zu(a,St.memoizedState,o)},useTransition:function(){return[Gl(Dr)[0],An().memoizedState]},useMutableSource:Mu,useSyncExternalStore:ju,useId:Ju,unstable_isNewReconciler:!1};function Ln(o,a){if(o&&o.defaultProps){for(var c in a=M({},a),o=o.defaultProps)void 0===a[c]&&(a[c]=o[c]);return a}return a}function Vl(o,a,c,u){c=null==(c=c(u,a=o.memoizedState))?a:M({},a,c),o.memoizedState=c,0===o.lanes&&(o.updateQueue.baseState=c)}var Rn={isMounted:function(o){return!!(o=o._reactInternals)&&Ko(o)===o},enqueueSetState:function(o,a,c){o=o._reactInternals;var u=Ot(),p=Co(o),h=qn(u,p);h.payload=a,null!=c&&(h.callback=c),null!==(a=zn(o,h,p))&&(Wt(a,o,p,u),Vi(a,o,p))},enqueueReplaceState:function(o,a,c){o=o._reactInternals;var u=Ot(),p=Co(o),h=qn(u,p);h.tag=1,h.payload=a,null!=c&&(h.callback=c),null!==(a=zn(o,h,p))&&(Wt(a,o,p,u),Vi(a,o,p))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var c=Ot(),u=Co(o),p=qn(c,u);p.tag=2,null!=a&&(p.callback=a),null!==(a=zn(o,p,u))&&(Wt(a,o,u,c),Vi(a,o,u))}};function ed(o,a,c,u,p,h,y){return"function"==typeof(o=o.stateNode).shouldComponentUpdate?o.shouldComponentUpdate(u,h,y):!(a.prototype&&a.prototype.isPureReactComponent&&gr(c,u)&&gr(p,h))}function Ol(o,a,c){var u=!1,p=Mo,h=a.contextType;return"object"==typeof h&&null!==h?h=bn(h):(p=$t(a)?jo:Pt.current,h=(u=null!=(u=a.contextTypes))?$o(o,p):Mo),a=new a(c,h),o.memoizedState=null!=a.state?a.state:null,a.updater=Rn,o.stateNode=a,a._reactInternals=o,u&&((o=o.stateNode).__reactInternalMemoizedUnmaskedChildContext=p,o.__reactInternalMemoizedMaskedChildContext=h),a}function eo(o,a,c,u){o=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(c,u),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(c,u),a.state!==o&&Rn.enqueueReplaceState(a,a.state,null)}function td(o,a,c,u){var p=o.stateNode;p.props=c,p.state=o.memoizedState,p.refs={},El(o);var h=a.contextType;"object"==typeof h&&null!==h?p.context=bn(h):(h=$t(a)?jo:Pt.current,p.context=$o(o,h)),p.state=o.memoizedState,"function"==typeof(h=a.getDerivedStateFromProps)&&(Vl(o,a,h,c),p.state=o.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof p.getSnapshotBeforeUpdate||"function"!=typeof p.UNSAFE_componentWillMount&&"function"!=typeof p.componentWillMount||(a=p.state,"function"==typeof p.componentWillMount&&p.componentWillMount(),"function"==typeof p.UNSAFE_componentWillMount&&p.UNSAFE_componentWillMount(),a!==p.state&&Rn.enqueueReplaceState(p,p.state,null),Os(o,c,p,u),p.state=o.memoizedState),"function"==typeof p.componentDidMount&&(o.flags|=4194308)}function Or(o,a){try{var c="",u=a;do{c+=He(u),u=u.return}while(u);var p=c}catch(h){p="\nError generating stack: "+h.message+"\n"+h.stack}return{value:o,source:a,stack:p,digest:null}}function zl(o,a,c){return{value:o,source:null,stack:c??null,digest:a??null}}function Bl(o,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var Bp="function"==typeof WeakMap?WeakMap:Map;function nd(o,a,c){(c=qn(-1,c)).tag=3,c.payload={element:null};var u=a.value;return c.callback=function(){ea||(ea=!0,ta=u),Bl(0,a)},c}function zr(o,a,c){(c=qn(-1,c)).tag=3;var u=o.type.getDerivedStateFromError;if("function"==typeof u){var p=a.value;c.payload=function(){return u(p)},c.callback=function(){Bl(0,a)}}var h=o.stateNode;return null!==h&&"function"==typeof h.componentDidCatch&&(c.callback=function(){Bl(0,a),"function"!=typeof u&&(null===fi?fi=new Set([this]):fi.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:null!==y?y:""})}),c}function od(o,a,c){var u=o.pingCache;if(null===u){u=o.pingCache=new Bp;var p=new Set;u.set(a,p)}else void 0===(p=u.get(a))&&u.set(a,p=new Set);p.has(c)||(p.add(c),o=Cd.bind(null,o,a,c),a.then(o,o))}function to(o){do{var a;if((a=13===o.tag)&&(a=null===(a=o.memoizedState)||null!==a.dehydrated),a)return o;o=o.return}while(null!==o);return null}function no(o,a,c,u,p){return 1&o.mode?(o.flags|=65536,o.lanes=p,o):(o===a?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:((a=qn(-1,1)).tag=2,zn(c,a,1))),c.lanes|=1),o)}var Lp=it.ReactCurrentOwner,Ht=!1;function wt(o,a,c,u){a.child=null===o?wl(a,null,c,u):$i(a,o.child,c,u)}function id(o,a,c,u,p){c=c.render;var h=a.ref;return Di(a,p),u=Ml(o,a,c,u,h,p),c=jl(),null===o||Ht?(Ye&&c&&Cl(a),a.flags|=1,wt(o,a,u,p),a.child):(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~p,Le(o,a,p))}function rd(o,a,c,u,p){if(null===o){var h=c.type;return"function"!=typeof h||ca(h)||void 0!==h.defaultProps||null!==c.compare||void 0!==c.defaultProps?((o=ua(c.type,null,u,a,a.mode,p)).ref=a.ref,o.return=a,a.child=o):(a.tag=15,a.type=h,Ll(o,a,h,u,p))}return h=o.child,o.lanes&p||!(c=null!==(c=c.compare)?c:gr)(h.memoizedProps,u)||o.ref!==a.ref?(a.flags|=1,(o=Xo(h,u)).ref=a.ref,o.return=a,a.child=o):Le(o,a,p)}function Ll(o,a,c,u,p){if(null!==o){var h=o.memoizedProps;if(gr(h,u)&&o.ref===a.ref){if(Ht=!1,a.pendingProps=u=h,!(o.lanes&p))return a.lanes=o.lanes,Le(o,a,p);131072&o.flags&&(Ht=!0)}}return Pl(o,a,c,u,p)}function sd(o,a,c){var u=a.pendingProps,p=u.children,h=null!==o?o.memoizedState:null;if("hidden"===u.mode)if(1&a.mode){if(!(1073741824&c))return o=null!==h?h.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,We(vo,on),on|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=null!==h?h.baseLanes:c,We(vo,on),on|=u}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(vo,on),on|=c;else null!==h?(u=h.baseLanes|c,a.memoizedState=null):u=c,We(vo,on),on|=u;return wt(o,a,p,c),a.child}function ad(o,a){var c=a.ref;(null===o&&null!==c||null!==o&&o.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Pl(o,a,c,u,p){var h=$t(c)?jo:Pt.current;return h=$o(a,h),Di(a,p),c=Ml(o,a,c,u,h,p),u=jl(),null===o||Ht?(Ye&&u&&Cl(a),a.flags|=1,wt(o,a,c,p),a.child):(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~p,Le(o,a,p))}function ld(o,a,c,u,p){if($t(c)){var h=!0;ni(a)}else h=!1;if(Di(a,p),null===a.stateNode)De(o,a),Ol(a,c,u),td(a,c,u,p),u=!0;else if(null===o){var y=a.stateNode,S=a.memoizedProps;y.props=S;var A=y.context,O=c.contextType;O="object"==typeof O&&null!==O?bn(O):$o(a,O=$t(c)?jo:Pt.current);var J=c.getDerivedStateFromProps,q="function"==typeof J||"function"==typeof y.getSnapshotBeforeUpdate;q||"function"!=typeof y.UNSAFE_componentWillReceiveProps&&"function"!=typeof y.componentWillReceiveProps||(S!==u||A!==O)&&eo(a,y,u,O),go=!1;var W=a.memoizedState;y.state=W,Os(a,u,y,p),A=a.memoizedState,S!==u||W!==A||qt.current||go?("function"==typeof J&&(Vl(a,c,J,u),A=a.memoizedState),(S=go||ed(a,c,S,u,W,A,O))?(q||"function"!=typeof y.UNSAFE_componentWillMount&&"function"!=typeof y.componentWillMount||("function"==typeof y.componentWillMount&&y.componentWillMount(),"function"==typeof y.UNSAFE_componentWillMount&&y.UNSAFE_componentWillMount()),"function"==typeof y.componentDidMount&&(a.flags|=4194308)):("function"==typeof y.componentDidMount&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=A),y.props=u,y.state=A,y.context=O,u=S):("function"==typeof y.componentDidMount&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,Tn(o,a),S=a.memoizedProps,O=a.type===a.elementType?S:Ln(a.type,S),y.props=O,q=a.pendingProps,W=y.context,A="object"==typeof(A=c.contextType)&&null!==A?bn(A):$o(a,A=$t(c)?jo:Pt.current);var de=c.getDerivedStateFromProps;(J="function"==typeof de||"function"==typeof y.getSnapshotBeforeUpdate)||"function"!=typeof y.UNSAFE_componentWillReceiveProps&&"function"!=typeof y.componentWillReceiveProps||(S!==q||W!==A)&&eo(a,y,u,A),go=!1,y.state=W=a.memoizedState,Os(a,u,y,p);var me=a.memoizedState;S!==q||W!==me||qt.current||go?("function"==typeof de&&(Vl(a,c,de,u),me=a.memoizedState),(O=go||ed(a,c,O,u,W,me,A)||!1)?(J||"function"!=typeof y.UNSAFE_componentWillUpdate&&"function"!=typeof y.componentWillUpdate||("function"==typeof y.componentWillUpdate&&y.componentWillUpdate(u,me,A),"function"==typeof y.UNSAFE_componentWillUpdate&&y.UNSAFE_componentWillUpdate(u,me,A)),"function"==typeof y.componentDidUpdate&&(a.flags|=4),"function"==typeof y.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof y.componentDidUpdate||S===o.memoizedProps&&W===o.memoizedState||(a.flags|=4),"function"!=typeof y.getSnapshotBeforeUpdate||S===o.memoizedProps&&W===o.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=me),y.props=u,y.state=me,y.context=A,u=O):("function"!=typeof y.componentDidUpdate||S===o.memoizedProps&&W===o.memoizedState||(a.flags|=4),"function"!=typeof y.getSnapshotBeforeUpdate||S===o.memoizedProps&&W===o.memoizedState||(a.flags|=1024),u=!1)}return Bi(o,a,c,u,h,p)}function Bi(o,a,c,u,p,h){ad(o,a);var y=!!(128&a.flags);if(!u&&!y)return p&&Gs(a,c,!1),Le(o,a,h);u=a.stateNode,Lp.current=a;var S=y&&"function"!=typeof c.getDerivedStateFromError?null:u.render();return a.flags|=1,null!==o&&y?(a.child=$i(a,o.child,null,h),a.child=$i(a,null,S,h)):wt(o,a,S,h),a.memoizedState=u.state,p&&Gs(a,c,!0),a.child}function Ws(o){var a=o.stateNode;a.pendingContext?$s(0,a.pendingContext,a.pendingContext!==a.context):a.context&&$s(0,a.context,!1),Bs(o,a.containerInfo)}function cd(o,a,c,u,p){return ji(),kl(p),a.flags|=256,wt(o,a,c,u),a.child}var Zl,Jl,pd,fd,Xl={dehydrated:null,treeContext:null,retryLane:0};function Yl(o){return{baseLanes:o,cachePool:null,transitions:null}}function ud(o,a,c){var S,u=a.pendingProps,p=dt.current,h=!1,y=!!(128&a.flags);if((S=y)||(S=(null===o||null!==o.memoizedState)&&!!(2&p)),S?(h=!0,a.flags&=-129):(null===o||null!==o.memoizedState)&&(p|=1),We(dt,1&p),null===o)return In(a),null!==(o=a.memoizedState)&&null!==(o=o.dehydrated)?(a.lanes=1&a.mode?"$!"===o.data?8:1073741824:1,null):(y=u.children,o=u.fallback,h?(h=a.child,y={mode:"hidden",children:y},1&(u=a.mode)||null===h?h=Te(y,u,0,null):(h.childLanes=0,h.pendingProps=y),o=$n(o,u,c,null),h.return=a,o.return=a,h.sibling=o,a.child=h,a.child.memoizedState=Yl(c),a.memoizedState=Xl,o):Hl(a,y));if(null!==(p=o.memoizedState)&&null!==(S=p.dehydrated))return function Zs(o,a,c,u,p,h,y){if(c)return 256&a.flags?(a.flags&=-257,Ul(o,a,y,u=zl(Error(N(422))))):null!==a.memoizedState?(a.child=o.child,a.flags|=128,null):(h=u.fallback,u=Te({mode:"visible",children:u.children},p=a.mode,0,null),(h=$n(h,p,y,null)).flags|=2,u.return=a,h.return=a,u.sibling=h,a.child=u,1&a.mode&&$i(a,o.child,null,y),a.child.memoizedState=Yl(y),a.memoizedState=Xl,h);if(!(1&a.mode))return Ul(o,a,y,null);if("$!"===p.data){if(u=p.nextSibling&&p.nextSibling.dataset)var S=u.dgst;return u=S,Ul(o,a,y,u=zl(h=Error(N(419)),u,void 0))}if(S=!!(y&o.childLanes),Ht||S){if(null!==(u=Nt)){switch(y&-y){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}0!==(p=p&(u.suspendedLanes|y)?0:p)&&p!==h.retryLane&&(h.retryLane=p,Kn(o,p),Wt(u,o,p,-1))}return Kr(),Ul(o,a,y,u=zl(Error(N(421))))}return"$?"===p.data?(a.flags|=128,a.child=o.child,a=kd.bind(null,o),p._reactRetry=a,null):(o=h.treeContext,pn=po(p.nextSibling),en=a,Ye=!0,tn=null,null!==o&&(Nn[En++]=fo,Nn[En++]=mo,Nn[En++]=Do,fo=o.id,mo=o.overflow,Do=a),(a=Hl(a,u.children)).flags|=4096,a)}(o,a,y,u,S,p,c);if(h){h=u.fallback,S=(p=o.child).sibling;var A={mode:"hidden",children:u.children};return 1&(y=a.mode)||a.child===p?(u=Xo(p,A)).subtreeFlags=14680064&p.subtreeFlags:((u=a.child).childLanes=0,u.pendingProps=A,a.deletions=null),null!==S?h=Xo(S,h):(h=$n(h,y,c,null)).flags|=2,h.return=a,u.return=a,u.sibling=h,a.child=u,u=h,h=a.child,y=null===(y=o.child.memoizedState)?Yl(c):{baseLanes:y.baseLanes|c,cachePool:null,transitions:y.transitions},h.memoizedState=y,h.childLanes=o.childLanes&~c,a.memoizedState=Xl,u}return o=(h=o.child).sibling,u=Xo(h,{mode:"visible",children:u.children}),!(1&a.mode)&&(u.lanes=c),u.return=a,u.sibling=null,null!==o&&(null===(c=a.deletions)?(a.deletions=[o],a.flags|=16):c.push(o)),a.child=u,a.memoizedState=null,u}function Hl(o,a){return(a=Te({mode:"visible",children:a},o.mode,0,null)).return=o,o.child=a}function Ul(o,a,c,u){return null!==u&&kl(u),$i(a,o.child,null,c),(o=Hl(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,o}function dd(o,a,c){o.lanes|=a;var u=o.alternate;null!==u&&(u.lanes|=a),Vs(o.return,a,c)}function fn(o,a,c,u,p){var h=o.memoizedState;null===h?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:p}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=c,h.tailMode=p)}function Wl(o,a,c){var u=a.pendingProps,p=u.revealOrder,h=u.tail;if(wt(o,a,u.children,c),2&(u=dt.current))u=1&u|2,a.flags|=128;else{if(null!==o&&128&o.flags)e:for(o=a.child;null!==o;){if(13===o.tag)null!==o.memoizedState&&dd(o,c,a);else if(19===o.tag)dd(o,c,a);else if(null!==o.child){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;null===o.sibling;){if(null===o.return||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}u&=1}if(We(dt,u),1&a.mode)switch(p){case"forwards":for(c=a.child,p=null;null!==c;)null!==(o=c.alternate)&&null===zi(o)&&(p=c),c=c.sibling;null===(c=p)?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),fn(a,!1,p,c,h);break;case"backwards":for(c=null,p=a.child,a.child=null;null!==p;){if(null!==(o=p.alternate)&&null===zi(o)){a.child=p;break}o=p.sibling,p.sibling=c,c=p,p=o}fn(a,!0,c,null,h);break;case"together":fn(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function De(o,a){!(1&a.mode)&&null!==o&&(o.alternate=null,a.alternate=null,a.flags|=2)}function Le(o,a,c){if(null!==o&&(a.dependencies=o.dependencies),yo|=a.lanes,!(c&a.childLanes))return null;if(null!==o&&a.child!==o.child)throw Error(N(153));if(null!==a.child){for(c=Xo(o=a.child,o.pendingProps),a.child=c,c.return=a;null!==o.sibling;)(c=c.sibling=Xo(o=o.sibling,o.pendingProps)).return=a;c.sibling=null}return a.child}function ui(o,a){if(!Ye)switch(o.tailMode){case"hidden":a=o.tail;for(var c=null;null!==a;)null!==a.alternate&&(c=a),a=a.sibling;null===c?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var u=null;null!==c;)null!==c.alternate&&(u=c),c=c.sibling;null===u?a||null===o.tail?o.tail=null:o.tail.sibling=null:u.sibling=null}}function mt(o){var a=null!==o.alternate&&o.alternate.child===o.child,c=0,u=0;if(a)for(var p=o.child;null!==p;)c|=p.lanes|p.childLanes,u|=14680064&p.subtreeFlags,u|=14680064&p.flags,p.return=o,p=p.sibling;else for(p=o.child;null!==p;)c|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=o,p=p.sibling;return o.subtreeFlags|=u,o.childLanes=c,a}function Kl(o,a,c){var u=a.pendingProps;switch(Ir(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(a),null;case 1:case 17:return $t(a.type)&&Sr(),mt(a),null;case 3:return u=a.stateNode,ci(),Ue(qt),Ue(Pt),Al(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(null===o||null===o.child)&&(Ds(a)?a.flags|=4:null===o||o.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==tn&&(ra(tn),tn=null))),Jl(o,a),mt(a),null;case 5:Fu(a);var p=li(zs.current);if(c=a.type,null!==o&&null!=a.stateNode)pd(o,a,c,u,p),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!u){if(null===a.stateNode)throw Error(N(166));return mt(a),null}if(o=li(Bn.current),Ds(a)){c=a.type;var h=a.memoizedProps;switch((u=a.stateNode)[yn]=a,u[On]=h,o=!!(1&a.mode),c){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(p=0;p<yr.length;p++)Ke(yr[p],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":gc(u,h),Ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!h.multiple},Ke("invalid",u);break;case"textarea":bc(u,h),Ke("invalid",u)}for(var y in Ma(c,h),p=null,h)if(h.hasOwnProperty(y)){var S=h[y];"children"===y?"string"==typeof S?u.textContent!==S&&(!0!==h.suppressHydrationWarning&&xr(u.textContent,S,o),p=["children",S]):"number"==typeof S&&u.textContent!==""+S&&(!0!==h.suppressHydrationWarning&&xr(u.textContent,S,o),p=["children",""+S]):Ct.hasOwnProperty(y)&&null!=S&&"onScroll"===y&&Ke("scroll",u)}switch(c){case"input":cs(u),yc(u,h,!0);break;case"textarea":cs(u),Un(u);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(u.onclick=Rs)}a.updateQueue=u=p,null!==u&&(a.flags|=4)}else{y=9===p.nodeType?p:p.ownerDocument,"http://www.w3.org/1999/xhtml"===o&&(o=Cc(c)),"http://www.w3.org/1999/xhtml"===o?"script"===c?((o=y.createElement("div")).innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):"string"==typeof u.is?o=y.createElement(c,{is:u.is}):(o=y.createElement(c),"select"===c&&(y=o,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):o=y.createElementNS(o,c),o[yn]=a,o[On]=u,Zl(o,a,!1,!1),a.stateNode=o;e:{switch(y=ja(c,u),c){case"dialog":Ke("cancel",o),Ke("close",o),p=u;break;case"iframe":case"object":case"embed":Ke("load",o),p=u;break;case"video":case"audio":for(p=0;p<yr.length;p++)Ke(yr[p],o);p=u;break;case"source":Ke("error",o),p=u;break;case"img":case"image":case"link":Ke("error",o),Ke("load",o),p=u;break;case"details":Ke("toggle",o),p=u;break;case"input":gc(o,u),p=Ta(o,u),Ke("invalid",o);break;case"option":default:p=u;break;case"select":o._wrapperState={wasMultiple:!!u.multiple},p=M({},u,{value:void 0}),Ke("invalid",o);break;case"textarea":bc(o,u),p=It(o,u),Ke("invalid",o)}for(h in Ma(c,p),S=p)if(S.hasOwnProperty(h)){var A=S[h];"style"===h?wc(o,A):"dangerouslySetInnerHTML"===h?null!=(A=A?A.__html:void 0)&&kc(o,A):"children"===h?"string"==typeof A?("textarea"!==c||""!==A)&&Qi(o,A):"number"==typeof A&&Qi(o,""+A):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(Ct.hasOwnProperty(h)?null!=A&&"onScroll"===h&&Ke("scroll",o):null!=A&&Ft(o,h,A,y))}switch(c){case"input":cs(o),yc(o,u,!1);break;case"textarea":cs(o),Un(o);break;case"option":null!=u.value&&o.setAttribute("value",""+Oe(u.value));break;case"select":o.multiple=!!u.multiple,null!=(h=u.value)?Jo(o,!!u.multiple,h,!1):null!=u.defaultValue&&Jo(o,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof p.onClick&&(o.onclick=Rs)}switch(c){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}return mt(a),null;case 6:if(o&&null!=a.stateNode)fd(o,a,o.memoizedProps,u);else{if("string"!=typeof u&&null===a.stateNode)throw Error(N(166));if(c=li(zs.current),li(Bn.current),Ds(a)){if(c=a.memoizedProps,(u=a.stateNode)[yn]=a,(h=u.nodeValue!==c)&&null!==(o=en))switch(o.tag){case 3:xr(u.nodeValue,c,!!(1&o.mode));break;case 5:!0!==o.memoizedProps.suppressHydrationWarning&&xr(u.nodeValue,c,!!(1&o.mode))}h&&(a.flags|=4)}else(u=(9===c.nodeType?c:c.ownerDocument).createTextNode(u))[yn]=a,a.stateNode=u}return mt(a),null;case 13:if(Ue(dt),u=a.memoizedState,null===o||null!==o.memoizedState&&null!==o.memoizedState.dehydrated){if(Ye&&null!==pn&&1&a.mode&&!(128&a.flags))Tu(),ji(),a.flags|=98560,h=!1;else if(h=Ds(a),null!==u&&null!==u.dehydrated){if(null===o){if(!h)throw Error(N(318));if(!(h=null!==(h=a.memoizedState)?h.dehydrated:null))throw Error(N(317));h[yn]=a}else ji(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;mt(a),h=!1}else null!==tn&&(ra(tn),tn=null),h=!0;if(!h)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=c,a):((u=null!==u)!=(null!==o&&null!==o.memoizedState)&&u&&(a.child.flags|=8192,1&a.mode&&(null===o||1&dt.current?0===_t&&(_t=3):Kr())),null!==a.updateQueue&&(a.flags|=4),mt(a),null);case 4:return ci(),Jl(o,a),null===o&&jt(a.stateNode.containerInfo),mt(a),null;case 10:return Xt(a.type._context),mt(a),null;case 19:if(Ue(dt),null===(h=a.memoizedState))return mt(a),null;if(u=!!(128&a.flags),null===(y=h.rendering))if(u)ui(h,!1);else{if(0!==_t||null!==o&&128&o.flags)for(o=a.child;null!==o;){if(null!==(y=zi(o))){for(a.flags|=128,ui(h,!1),null!==(u=y.updateQueue)&&(a.updateQueue=u,a.flags|=4),a.subtreeFlags=0,u=c,c=a.child;null!==c;)o=u,(h=c).flags&=14680066,null===(y=h.alternate)?(h.childLanes=0,h.lanes=o,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=y.childLanes,h.lanes=y.lanes,h.child=y.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=y.memoizedProps,h.memoizedState=y.memoizedState,h.updateQueue=y.updateQueue,h.type=y.type,h.dependencies=null===(o=y.dependencies)?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return We(dt,1&dt.current|2),a.child}o=o.sibling}null!==h.tail&&ft()>Yi&&(a.flags|=128,u=!0,ui(h,!1),a.lanes=4194304)}else{if(!u)if(null!==(o=zi(y))){if(a.flags|=128,u=!0,null!==(c=o.updateQueue)&&(a.updateQueue=c,a.flags|=4),ui(h,!0),null===h.tail&&"hidden"===h.tailMode&&!y.alternate&&!Ye)return mt(a),null}else 2*ft()-h.renderingStartTime>Yi&&1073741824!==c&&(a.flags|=128,u=!0,ui(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(null!==(c=h.last)?c.sibling=y:a.child=y,h.last=y)}return null!==h.tail?(h.rendering=a=h.tail,h.tail=a.sibling,h.renderingStartTime=ft(),a.sibling=null,c=dt.current,We(dt,u?1&c|2:1&c),a):(mt(a),null);case 22:case 23:return oc(),u=null!==a.memoizedState,null!==o&&null!==o.memoizedState!==u&&(a.flags|=8192),u&&1&a.mode?1073741824&on&&(mt(a),6&a.subtreeFlags&&(a.flags|=8192)):mt(a),null;case 24:case 25:return null}throw Error(N(156,a.tag))}function md(o,a){switch(Ir(a),a.tag){case 1:return $t(a.type)&&Sr(),65536&(o=a.flags)?(a.flags=-65537&o|128,a):null;case 3:return ci(),Ue(qt),Ue(Pt),Al(),65536&(o=a.flags)&&!(128&o)?(a.flags=-65537&o|128,a):null;case 5:return Fu(a),null;case 13:if(Ue(dt),null!==(o=a.memoizedState)&&null!==o.dehydrated){if(null===a.alternate)throw Error(N(340));ji()}return 65536&(o=a.flags)?(a.flags=-65537&o|128,a):null;case 19:return Ue(dt),null;case 4:return ci(),null;case 10:return Xt(a.type._context),null;case 22:case 23:return oc(),null;default:return null}}Zl=function(o,a){for(var c=a.child;null!==c;){if(5===c.tag||6===c.tag)o.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Jl=function(){},pd=function(o,a,c,u){var p=o.memoizedProps;if(p!==u){o=a.stateNode,li(Bn.current);var y,h=null;switch(c){case"input":p=Ta(o,p),u=Ta(o,u),h=[];break;case"select":p=M({},p,{value:void 0}),u=M({},u,{value:void 0}),h=[];break;case"textarea":p=It(o,p),u=It(o,u),h=[];break;default:"function"!=typeof p.onClick&&"function"==typeof u.onClick&&(o.onclick=Rs)}for(O in Ma(c,u),c=null,p)if(!u.hasOwnProperty(O)&&p.hasOwnProperty(O)&&null!=p[O])if("style"===O){var S=p[O];for(y in S)S.hasOwnProperty(y)&&(c||(c={}),c[y]="")}else"dangerouslySetInnerHTML"!==O&&"children"!==O&&"suppressContentEditableWarning"!==O&&"suppressHydrationWarning"!==O&&"autoFocus"!==O&&(Ct.hasOwnProperty(O)?h||(h=[]):(h=h||[]).push(O,null));for(O in u){var A=u[O];if(S=p?.[O],u.hasOwnProperty(O)&&A!==S&&(null!=A||null!=S))if("style"===O)if(S){for(y in S)!S.hasOwnProperty(y)||A&&A.hasOwnProperty(y)||(c||(c={}),c[y]="");for(y in A)A.hasOwnProperty(y)&&S[y]!==A[y]&&(c||(c={}),c[y]=A[y])}else c||(h||(h=[]),h.push(O,c)),c=A;else"dangerouslySetInnerHTML"===O?(S=S?S.__html:void 0,null!=(A=A?A.__html:void 0)&&S!==A&&(h=h||[]).push(O,A)):"children"===O?"string"!=typeof A&&"number"!=typeof A||(h=h||[]).push(O,""+A):"suppressContentEditableWarning"!==O&&"suppressHydrationWarning"!==O&&(Ct.hasOwnProperty(O)?(null!=A&&"onScroll"===O&&Ke("scroll",o),h||S===A||(h=[])):(h=h||[]).push(O,A))}c&&(h=h||[]).push("style",c);var O=h;(a.updateQueue=O)&&(a.flags|=4)}},fd=function(o,a,c,u){c!==u&&(a.flags|=4)};var Br=!1,Gt=!1,_d="function"==typeof WeakSet?WeakSet:Set,fe=null;function di(o,a){var c=o.ref;if(null!==c)if("function"==typeof c)try{c(null)}catch(u){nt(o,a,u)}else c.current=null}function Js(o,a,c){try{c()}catch(u){nt(o,a,u)}}var Xp=!1;function Lr(o,a,c){var u=a.updateQueue;if(null!==(u=null!==u?u.lastEffect:null)){var p=u=u.next;do{if((p.tag&o)===o){var h=p.destroy;p.destroy=void 0,void 0!==h&&Js(a,c,h)}p=p.next}while(p!==u)}}function nn(o,a){if(null!==(a=null!==(a=a.updateQueue)?a.lastEffect:null)){var c=a=a.next;do{(c.tag&o)===o&&(c.destroy=(0,c.create)()),c=c.next}while(c!==a)}}function qe(o){var a=o.ref;null!==a&&(o=o.stateNode,"function"==typeof a?a(o):a.current=o)}function Ql(o){var a=o.alternate;null!==a&&(o.alternate=null,Ql(a)),o.child=null,o.deletions=null,o.sibling=null,5===o.tag&&null!==(a=o.stateNode)&&(delete a[yn],delete a[On],delete a[Qo],delete a[Nu],delete a[bl]),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Pr(o){return 5===o.tag||3===o.tag||4===o.tag}function hd(o){e:for(;;){for(;null===o.sibling;){if(null===o.return||Pr(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;5!==o.tag&&6!==o.tag&&18!==o.tag;){if(2&o.flags||null===o.child||4===o.tag)continue e;o.child.return=o,o=o.child}if(!(2&o.flags))return o.stateNode}}function Xr(o,a,c){var u=o.tag;if(5===u||6===u)o=o.stateNode,a?8===c.nodeType?c.parentNode.insertBefore(o,a):c.insertBefore(o,a):(8===c.nodeType?(a=c.parentNode).insertBefore(o,c):(a=c).appendChild(o),null!=(c=c._reactRootContainer)||null!==a.onclick||(a.onclick=Rs));else if(4!==u&&null!==(o=o.child))for(Xr(o,a,c),o=o.sibling;null!==o;)Xr(o,a,c),o=o.sibling}function Ks(o,a,c){var u=o.tag;if(5===u||6===u)o=o.stateNode,a?c.insertBefore(o,a):c.appendChild(o);else if(4!==u&&null!==(o=o.child))for(Ks(o,a,c),o=o.sibling;null!==o;)Ks(o,a,c),o=o.sibling}var tt=null,mn=!1;function Fn(o,a,c){for(c=c.child;null!==c;)Yp(o,a,c),c=c.sibling}function Yp(o,a,c){if(Wn&&"function"==typeof Wn.onCommitFiberUnmount)try{Wn.onCommitFiberUnmount(_s,c)}catch{}switch(c.tag){case 5:Gt||di(c,a);case 6:var u=tt,p=mn;tt=null,Fn(o,a,c),mn=p,null!==(tt=u)&&(mn?(c=c.stateNode,8===(o=tt).nodeType?o.parentNode.removeChild(c):o.removeChild(c)):tt.removeChild(c.stateNode));break;case 18:null!==tt&&(mn?(c=c.stateNode,8===(o=tt).nodeType?qo(o.parentNode,c):1===o.nodeType&&qo(o,c),cr(o)):qo(tt,c.stateNode));break;case 4:u=tt,p=mn,tt=c.stateNode.containerInfo,mn=!0,Fn(o,a,c),tt=u,mn=p;break;case 0:case 11:case 14:case 15:if(!Gt&&null!==(u=c.updateQueue)&&null!==(u=u.lastEffect)){p=u=u.next;do{var h=p,y=h.destroy;h=h.tag,void 0!==y&&(2&h||4&h)&&Js(c,a,y),p=p.next}while(p!==u)}Fn(o,a,c);break;case 1:if(!Gt&&(di(c,a),"function"==typeof(u=c.stateNode).componentWillUnmount))try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(S){nt(c,a,S)}Fn(o,a,c);break;case 21:Fn(o,a,c);break;case 22:1&c.mode?(Gt=(u=Gt)||null!==c.memoizedState,Fn(o,a,c),Gt=u):Fn(o,a,c);break;default:Fn(o,a,c)}}function Li(o){var a=o.updateQueue;if(null!==a){o.updateQueue=null;var c=o.stateNode;null===c&&(c=o.stateNode=new _d),a.forEach(function(u){var p=Sd.bind(null,o,u);c.has(u)||(c.add(u),u.then(p,p))})}}function Mn(o,a){var c=a.deletions;if(null!==c)for(var u=0;u<c.length;u++){var p=c[u];try{var h=o,y=a,S=y;e:for(;null!==S;){switch(S.tag){case 5:tt=S.stateNode,mn=!1;break e;case 3:case 4:tt=S.stateNode.containerInfo,mn=!0;break e}S=S.return}if(null===tt)throw Error(N(160));Yp(h,y,p),tt=null,mn=!1;var A=p.alternate;null!==A&&(A.return=null),p.return=null}catch(O){nt(p,a,O)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)ec(a,o),a=a.sibling}function ec(o,a){var c=o.alternate,u=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Mn(a,o),Ut(o),4&u){try{Lr(3,o,o.return),nn(3,o)}catch(_e){nt(o,o.return,_e)}try{Lr(5,o,o.return)}catch(_e){nt(o,o.return,_e)}}break;case 1:Mn(a,o),Ut(o),512&u&&null!==c&&di(c,c.return);break;case 5:if(Mn(a,o),Ut(o),512&u&&null!==c&&di(c,c.return),32&o.flags){var p=o.stateNode;try{Qi(p,"")}catch(_e){nt(o,o.return,_e)}}if(4&u&&null!=(p=o.stateNode)){var h=o.memoizedProps,y=null!==c?c.memoizedProps:h,S=o.type,A=o.updateQueue;if(o.updateQueue=null,null!==A)try{"input"===S&&"radio"===h.type&&null!=h.name&&vc(p,h),ja(S,y);var O=ja(S,h);for(y=0;y<A.length;y+=2){var J=A[y],q=A[y+1];"style"===J?wc(p,q):"dangerouslySetInnerHTML"===J?kc(p,q):"children"===J?Qi(p,q):Ft(p,J,q,O)}switch(S){case"input":Aa(p,h);break;case"textarea":xc(p,h);break;case"select":var W=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!h.multiple;var de=h.value;null!=de?Jo(p,!!h.multiple,de,!1):W!==!!h.multiple&&(null!=h.defaultValue?Jo(p,!!h.multiple,h.defaultValue,!0):Jo(p,!!h.multiple,h.multiple?[]:"",!1))}p[On]=h}catch(_e){nt(o,o.return,_e)}}break;case 6:if(Mn(a,o),Ut(o),4&u){if(null===o.stateNode)throw Error(N(162));p=o.stateNode,h=o.memoizedProps;try{p.nodeValue=h}catch(_e){nt(o,o.return,_e)}}break;case 3:if(Mn(a,o),Ut(o),4&u&&null!==c&&c.memoizedState.isDehydrated)try{cr(a.containerInfo)}catch(_e){nt(o,o.return,_e)}break;case 4:default:Mn(a,o),Ut(o);break;case 13:Mn(a,o),Ut(o),8192&(p=o.child).flags&&(p.stateNode.isHidden=h=null!==p.memoizedState,!h||null!==p.alternate&&null!==p.alternate.memoizedState||(Zr=ft())),4&u&&Li(o);break;case 22:if(J=null!==c&&null!==c.memoizedState,1&o.mode?(Gt=(O=Gt)||J,Mn(a,o),Gt=O):Mn(a,o),Ut(o),8192&u){if((o.stateNode.isHidden=O=null!==o.memoizedState)&&!J&&1&o.mode)for(fe=o,J=o.child;null!==J;){for(q=fe=J;null!==fe;){switch(de=(W=fe).child,W.tag){case 0:case 11:case 14:case 15:Lr(4,W,W.return);break;case 1:di(W,W.return);var me=W.stateNode;if("function"==typeof me.componentWillUnmount){u=W,c=W.return;try{me.props=(a=u).memoizedProps,me.state=a.memoizedState,me.componentWillUnmount()}catch(_e){nt(u,c,_e)}}break;case 5:di(W,W.return);break;case 22:if(null!==W.memoizedState){qs(q);continue}}null!==de?(de.return=W,fe=de):qs(q)}J=J.sibling}e:for(J=null,q=o;;){if(5===q.tag){if(null===J){J=q;try{p=q.stateNode,O?"function"==typeof(h=p.style).setProperty?h.setProperty("display","none","important"):h.display="none":(S=q.stateNode,y=null!=(A=q.memoizedProps.style)&&A.hasOwnProperty("display")?A.display:null,S.style.display=Sc("display",y))}catch(_e){nt(o,o.return,_e)}}}else if(6===q.tag){if(null===J)try{q.stateNode.nodeValue=O?"":q.memoizedProps}catch(_e){nt(o,o.return,_e)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===o)&&null!==q.child){q.child.return=q,q=q.child;continue}if(q===o)break e;for(;null===q.sibling;){if(null===q.return||q.return===o)break e;J===q&&(J=null),q=q.return}J===q&&(J=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Mn(a,o),Ut(o),4&u&&Li(o);case 21:}}function Ut(o){var a=o.flags;if(2&a){try{e:{for(var c=o.return;null!==c;){if(Pr(c)){var u=c;break e}c=c.return}throw Error(N(160))}switch(u.tag){case 5:var p=u.stateNode;32&u.flags&&(Qi(p,""),u.flags&=-33),Ks(o,hd(o),p);break;case 3:case 4:var y=u.stateNode.containerInfo;Xr(o,hd(o),y);break;default:throw Error(N(161))}}catch(A){nt(o,o.return,A)}o.flags&=-3}4096&a&&(o.flags&=-4097)}function Pi(o,a,c){fe=o,Yr(o,a,c)}function Yr(o,a,c){for(var u=!!(1&o.mode);null!==fe;){var p=fe,h=p.child;if(22===p.tag&&u){var y=null!==p.memoizedState||Br;if(!y){var S=p.alternate,A=null!==S&&null!==S.memoizedState||Gt;S=Br;var O=Gt;if(Br=y,(Gt=A)&&!O)for(fe=p;null!==fe;)A=(y=fe).child,22===y.tag&&null!==y.memoizedState?ve(p):null!==A?(A.return=y,fe=A):ve(p);for(;null!==h;)fe=h,Yr(h,a,c),h=h.sibling;fe=p,Br=S,Gt=O}Bo(o)}else 8772&p.subtreeFlags&&null!==h?(h.return=p,fe=h):Bo(o)}}function Bo(o){for(;null!==fe;){var a=fe;if(8772&a.flags){var c=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:Gt||nn(5,a);break;case 1:var u=a.stateNode;if(4&a.flags&&!Gt)if(null===c)u.componentDidMount();else{var p=a.elementType===a.type?c.memoizedProps:Ln(a.type,c.memoizedProps);u.componentDidUpdate(p,c.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var h=a.updateQueue;null!==h&&Ru(a,h,u);break;case 3:var y=a.updateQueue;if(null!==y){if(c=null,null!==a.child)switch(a.child.tag){case 5:case 1:c=a.child.stateNode}Ru(a,y,c)}break;case 5:if(null===c&&4&a.flags){c=a.stateNode;var A=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&c.focus();break;case"img":A.src&&(c.src=A.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var O=a.alternate;if(null!==O){var J=O.memoizedState;if(null!==J){var q=J.dehydrated;null!==q&&cr(q)}}}break;default:throw Error(N(163))}Gt||512&a.flags&&qe(a)}catch(W){nt(a,a.return,W)}}if(a===o){fe=null;break}if(null!==(c=a.sibling)){c.return=a.return,fe=c;break}fe=a.return}}function qs(o){for(;null!==fe;){var a=fe;if(a===o){fe=null;break}var c=a.sibling;if(null!==c){c.return=a.return,fe=c;break}fe=a.return}}function ve(o){for(;null!==fe;){var a=fe;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{nn(4,a)}catch(A){nt(a,c,A)}break;case 1:var u=a.stateNode;if("function"==typeof u.componentDidMount){var p=a.return;try{u.componentDidMount()}catch(A){nt(a,p,A)}}var h=a.return;try{qe(a)}catch(A){nt(a,h,A)}break;case 5:var y=a.return;try{qe(a)}catch(A){nt(a,y,A)}}}catch(A){nt(a,a.return,A)}if(a===o){fe=null;break}var S=a.sibling;if(null!==S){S.return=a.return,fe=S;break}fe=a.return}}var aa,gd=Math.ceil,Hr=it.ReactCurrentDispatcher,Ur=it.ReactCurrentOwner,xn=it.ReactCurrentBatchConfig,$e=0,Nt=null,yt=null,Dt=0,on=0,vo=Fo(0),_t=0,Wr=null,yo=0,pi=0,Qs=0,Xi=null,Vt=null,Zr=0,Yi=1/0,bo=null,ea=!1,ta=null,fi=null,tc=!1,xo=null,Hi=0,Jr=0,na=null,oa=-1,nc=0;function Ot(){return 6&$e?ft():-1!==oa?oa:oa=ft()}function Co(o){return 1&o.mode?2&$e&&0!==Dt?Dt&-Dt:null!==Mp.transition?(0===nc&&(nc=Oc()),nc):(0!==(o=Be)||(o=void 0===(o=window.event)?16:Zc(o.type)),o):1}function Wt(o,a,c,u){if(50<Jr)throw Jr=0,na=null,Error(N(185));rr(o,c,u),(!(2&$e)||o!==Nt)&&(o===Nt&&(!(2&$e)&&(pi|=c),4===_t&&oo(o,Dt)),zt(o,u),1===c&&0===$e&&!(1&a.mode)&&(Yi=ft()+500,dn&&Qt()))}function zt(o,a){var c=o.callbackNode;!function qd(o,a){for(var c=o.suspendedLanes,u=o.pingedLanes,p=o.expirationTimes,h=o.pendingLanes;0<h;){var y=31-Gn(h),S=1<<y,A=p[y];-1===A?(!(S&c)||S&u)&&(p[y]=Kd(S,a)):A<=a&&(o.expiredLanes|=S),h&=~S}}(o,a);var u=vs(o,o===Nt?Dt:0);if(0===u)null!==c&&Gc(c),o.callbackNode=null,o.callbackPriority=0;else if(o.callbackPriority!==(a=u&-u)){if(null!=c&&Gc(c),1===a)0===o.tag?function Fp(o){dn=!0,Nr(o)}(Lo.bind(null,o)):Nr(Lo.bind(null,o)),Fi(function(){!(6&$e)&&Qt()}),c=null;else{switch(zc(u)){case 1:c=La;break;case 4:c=Dc;break;case 16:default:c=ms;break;case 536870912:c=Vc}c=wd(c,Hp.bind(null,o))}o.callbackPriority=a,o.callbackNode=c}}function Hp(o,a){if(oa=-1,nc=0,6&$e)throw Error(N(327));var c=o.callbackNode;if(Pn()&&o.callbackNode!==c)return null;var u=vs(o,o===Nt?Dt:0);if(0===u)return null;if(30&u||u&o.expiredLanes||a)a=Ui(o,u);else{a=u;var p=$e;$e|=2;var h=vd();for((Nt!==o||Dt!==a)&&(bo=null,Yi=ft()+500,Po(o,a));;)try{yd();break}catch(S){ic(o,S)}Gi(),Hr.current=h,$e=p,null!==yt?a=0:(Nt=null,Dt=0,a=_t)}if(0!==a){if(2===a&&0!==(p=Pa(o))&&(u=p,a=ia(o,p)),1===a)throw c=Wr,Po(o,0),oo(o,u),zt(o,ft()),c;if(6===a)oo(o,u);else{if(p=o.current.alternate,!(30&u||function ff(o){for(var a=o;;){if(16384&a.flags){var c=a.updateQueue;if(null!==c&&null!==(c=c.stores))for(var u=0;u<c.length;u++){var p=c[u],h=p.getSnapshot;p=p.value;try{if(!Dn(h(),p))return!1}catch{return!1}}}if(c=a.child,16384&a.subtreeFlags&&null!==c)c.return=a,a=c;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}(p)||(a=Ui(o,u),2===a&&(h=Pa(o),0!==h&&(u=h,a=ia(o,h))),1!==a)))throw c=Wr,Po(o,0),oo(o,u),zt(o,ft()),c;switch(o.finishedWork=p,o.finishedLanes=u,a){case 0:case 1:throw Error(N(345));case 2:case 5:_i(o,Vt,bo);break;case 3:if(oo(o,u),(130023424&u)===u&&10<(a=Zr+500-ft())){if(0!==vs(o,0))break;if(((p=o.suspendedLanes)&u)!==u){Ot(),o.pingedLanes|=o.suspendedLanes&p;break}o.timeoutHandle=yl(_i.bind(null,o,Vt,bo),a);break}_i(o,Vt,bo);break;case 4:if(oo(o,u),(4194240&u)===u)break;for(a=o.eventTimes,p=-1;0<u;){var y=31-Gn(u);h=1<<y,(y=a[y])>p&&(p=y),u&=~h}if(u=p,10<(u=(120>(u=ft()-u)?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*gd(u/1960))-u)){o.timeoutHandle=yl(_i.bind(null,o,Vt,bo),u);break}_i(o,Vt,bo);break;default:throw Error(N(329))}}}return zt(o,ft()),o.callbackNode===c?Hp.bind(null,o):null}function ia(o,a){var c=Xi;return o.current.memoizedState.isDehydrated&&(Po(o,a).flags|=256),2!==(o=Ui(o,a))&&(a=Vt,Vt=c,null!==a&&ra(a)),o}function ra(o){null===Vt?Vt=o:Vt.push.apply(Vt,o)}function oo(o,a){for(a&=~Qs,o.suspendedLanes|=a&=~pi,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var c=31-Gn(a),u=1<<c;o[c]=-1,a&=~u}}function Lo(o){if(6&$e)throw Error(N(327));Pn();var a=vs(o,0);if(!(1&a))return zt(o,ft()),null;var c=Ui(o,a);if(0!==o.tag&&2===c){var u=Pa(o);0!==u&&(a=u,c=ia(o,u))}if(1===c)throw c=Wr,Po(o,0),oo(o,a),zt(o,ft()),c;if(6===c)throw Error(N(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,_i(o,Vt,bo),zt(o,ft()),null}function sa(o,a){var c=$e;$e|=1;try{return o(a)}finally{0===($e=c)&&(Yi=ft()+500,dn&&Qt())}}function mi(o){null!==xo&&0===xo.tag&&!(6&$e)&&Pn();var a=$e;$e|=1;var c=xn.transition,u=Be;try{if(xn.transition=null,Be=1,o)return o()}finally{Be=u,xn.transition=c,!(6&($e=a))&&Qt()}}function oc(){on=vo.current,Ue(vo)}function Po(o,a){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(-1!==c&&(o.timeoutHandle=-1,Rp(c)),null!==yt)for(c=yt.return;null!==c;){var u=c;switch(Ir(u),u.tag){case 1:null!=(u=u.type.childContextTypes)&&Sr();break;case 3:ci(),Ue(qt),Ue(Pt),Al();break;case 5:Fu(u);break;case 4:ci();break;case 13:case 19:Ue(dt);break;case 10:Xt(u.type._context);break;case 22:case 23:oc()}c=c.return}if(Nt=o,yt=o=Xo(o.current,null),Dt=on=a,_t=0,Wr=null,Qs=pi=yo=0,Vt=Xi=null,null!==Jn){for(a=0;a<Jn.length;a++)if(null!==(u=(c=Jn[a]).interleaved)){c.interleaved=null;var h=c.pending;if(null!==h){var y=h.next;h.next=u.next,u.next=y}c.pending=u}Jn=null}return o}function ic(o,a){for(;;){var c=yt;try{if(Gi(),Ls.current=Us,Ps){for(var u=st.memoizedState;null!==u;){var p=u.queue;null!==p&&(p.pending=null),u=u.next}Ps=!1}if(zo=0,At=St=st=null,$r=!1,Gr=0,Ur.current=null,null===c||null===c.return){_t=1,Wr=a,yt=null;break}e:{var h=o,y=c.return,S=c,A=a;if(a=Dt,S.flags|=32768,null!==A&&"object"==typeof A&&"function"==typeof A.then){var O=A,J=S,q=J.tag;if(!(1&J.mode||0!==q&&11!==q&&15!==q)){var W=J.alternate;W?(J.updateQueue=W.updateQueue,J.memoizedState=W.memoizedState,J.lanes=W.lanes):(J.updateQueue=null,J.memoizedState=null)}var de=to(y);if(null!==de){de.flags&=-257,no(de,y,S,0,a),1&de.mode&&od(h,O,a),A=O;var me=(a=de).updateQueue;if(null===me){var _e=new Set;_e.add(A),a.updateQueue=_e}else me.add(A);break e}if(!(1&a)){od(h,O,a),Kr();break e}A=Error(N(426))}else if(Ye&&1&S.mode){var pt=to(y);if(null!==pt){!(65536&pt.flags)&&(pt.flags|=256),no(pt,y,S,0,a),kl(Or(A,S));break e}}h=A=Or(A,S),4!==_t&&(_t=2),null===Xi?Xi=[h]:Xi.push(h),h=y;do{switch(h.tag){case 3:h.flags|=65536,h.lanes|=a&=-a,Il(h,nd(0,A,a));break e;case 1:S=A;var D=h.stateNode;if(!(128&h.flags||"function"!=typeof h.type.getDerivedStateFromError&&(null===D||"function"!=typeof D.componentDidCatch||null!==fi&&fi.has(D)))){h.flags|=65536,h.lanes|=a&=-a,Il(h,zr(h,S,a));break e}}h=h.return}while(null!==h)}bd(c)}catch(he){a=he,yt===c&&null!==c&&(yt=c=c.return);continue}break}}function vd(){var o=Hr.current;return Hr.current=Us,null===o?Us:o}function Kr(){(0===_t||3===_t||2===_t)&&(_t=4),null===Nt||!(268435455&yo)&&!(268435455&pi)||oo(Nt,Dt)}function Ui(o,a){var c=$e;$e|=2;var u=vd();for((Nt!==o||Dt!==a)&&(bo=null,Po(o,a));;)try{Up();break}catch(p){ic(o,p)}if(Gi(),$e=c,Hr.current=u,null!==yt)throw Error(N(261));return Nt=null,Dt=0,_t}function Up(){for(;null!==yt;)rc(yt)}function yd(){for(;null!==yt&&!Pd();)rc(yt)}function rc(o){var a=aa(o.alternate,o,on);o.memoizedProps=o.pendingProps,null===a?bd(o):yt=a,Ur.current=null}function bd(o){var a=o;do{var c=a.alternate;if(o=a.return,32768&a.flags){if(null!==(c=md(c,a)))return c.flags&=32767,void(yt=c);if(null===o)return _t=6,void(yt=null);o.flags|=32768,o.subtreeFlags=0,o.deletions=null}else if(null!==(c=Kl(c,a,on)))return void(yt=c);if(null!==(a=a.sibling))return void(yt=a);yt=a=o}while(null!==a);0===_t&&(_t=5)}function _i(o,a,c){var u=Be,p=xn.transition;try{xn.transition=null,Be=1,function xd(o,a,c,u){do{Pn()}while(null!==xo);if(6&$e)throw Error(N(327));var p=o.finishedLanes;if(null===(c=o.finishedWork))return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(N(177));o.callbackNode=null,o.callbackPriority=0;var h=c.lanes|c.childLanes;if(function Mt(o,a){var c=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var u=o.eventTimes;for(o=o.expirationTimes;0<c;){var p=31-Gn(c),h=1<<p;a[p]=0,u[p]=-1,o[p]=-1,c&=~h}}(o,h),o===Nt&&(yt=Nt=null,Dt=0),!(2064&c.subtreeFlags)&&!(2064&c.flags)||tc||(tc=!0,wd(ms,function(){return Pn(),null})),h=!!(15990&c.flags),15990&c.subtreeFlags||h){h=xn.transition,xn.transition=null;var y=Be;Be=1;var S=$e;$e|=4,Ur.current=null,function ql(o,a){if(Fs=Cs,al(o=mu())){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else{var u=(c=(c=o.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var p=u.anchorOffset,h=u.focusNode;u=u.focusOffset;var y=0,S=-1,A=-1,O=0,J=0,q=o,W=null;t:for(;;){for(var de;q!==c||0!==p&&3!==q.nodeType||(S=y+p),q!==h||0!==u&&3!==q.nodeType||(A=y+u),3===q.nodeType&&(y+=q.nodeValue.length),null!==(de=q.firstChild);)W=q,q=de;for(;;){if(q===o)break t;if(W===c&&++O===p&&(S=y),W===h&&++J===u&&(A=y),null!==(de=q.nextSibling))break;W=(q=W).parentNode}q=de}c=-1===S||-1===A?null:{start:S,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(gl={focusedElem:o,selectionRange:c},Cs=!1,fe=a;null!==fe;)if(o=(a=fe).child,1028&a.subtreeFlags&&null!==o)o.return=a,fe=o;else for(;null!==fe;){a=fe;try{var me=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==me){var _e=me.memoizedProps,pt=me.memoizedState,G=a.stateNode,F=G.getSnapshotBeforeUpdate(a.elementType===a.type?_e:Ln(a.type,_e),pt);G.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var D=a.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(N(163))}}catch(ne){nt(a,a.return,ne)}if(null!==(o=a.sibling)){o.return=a.return,fe=o;break}fe=a.return}me=Xp,Xp=!1}(o,c),ec(c,o),Ep(gl),Cs=!!Fs,gl=Fs=null,o.current=c,Pi(c,o,p),Xd(),$e=S,Be=y,xn.transition=h}else o.current=c;if(tc&&(tc=!1,xo=o,Hi=p),0===(h=o.pendingLanes)&&(fi=null),function Ud(o){if(Wn&&"function"==typeof Wn.onCommitFiberRoot)try{Wn.onCommitFiberRoot(_s,o,void 0,!(128&~o.current.flags))}catch{}}(c.stateNode),zt(o,ft()),null!==a)for(u=o.onRecoverableError,c=0;c<a.length;c++)u((p=a[c]).value,{componentStack:p.stack,digest:p.digest});if(ea)throw ea=!1,o=ta,ta=null,o;1&Hi&&0!==o.tag&&Pn(),1&(h=o.pendingLanes)?o===na?Jr++:(Jr=0,na=o):Jr=0,Qt()}(o,a,c,u)}finally{xn.transition=p,Be=u}return null}function Pn(){if(null!==xo){var o=zc(Hi),a=xn.transition,c=Be;try{if(xn.transition=null,Be=16>o?16:o,null===xo)var u=!1;else{if(o=xo,xo=null,Hi=0,6&$e)throw Error(N(331));var p=$e;for($e|=4,fe=o.current;null!==fe;){var h=fe,y=h.child;if(16&fe.flags){var S=h.deletions;if(null!==S){for(var A=0;A<S.length;A++){var O=S[A];for(fe=O;null!==fe;){var J=fe;switch(J.tag){case 0:case 11:case 15:Lr(8,J,h)}var q=J.child;if(null!==q)q.return=J,fe=q;else for(;null!==fe;){var W=(J=fe).sibling,de=J.return;if(Ql(J),J===O){fe=null;break}if(null!==W){W.return=de,fe=W;break}fe=de}}}var me=h.alternate;if(null!==me){var _e=me.child;if(null!==_e){me.child=null;do{var pt=_e.sibling;_e.sibling=null,_e=pt}while(null!==_e)}}fe=h}}if(2064&h.subtreeFlags&&null!==y)y.return=h,fe=y;else e:for(;null!==fe;){if(2048&(h=fe).flags)switch(h.tag){case 0:case 11:case 15:Lr(9,h,h.return)}var G=h.sibling;if(null!==G){G.return=h.return,fe=G;break e}fe=h.return}}var F=o.current;for(fe=F;null!==fe;){var D=(y=fe).child;if(2064&y.subtreeFlags&&null!==D)D.return=y,fe=D;else e:for(y=F;null!==fe;){if(2048&(S=fe).flags)try{switch(S.tag){case 0:case 11:case 15:nn(9,S)}}catch(he){nt(S,S.return,he)}if(S===y){fe=null;break e}var ne=S.sibling;if(null!==ne){ne.return=S.return,fe=ne;break e}fe=S.return}}if($e=p,Qt(),Wn&&"function"==typeof Wn.onPostCommitFiberRoot)try{Wn.onPostCommitFiberRoot(_s,o)}catch{}u=!0}return u}finally{Be=c,xn.transition=a}}return!1}function sc(o,a,c){o=zn(o,a=nd(0,a=Or(c,a),1),1),a=Ot(),null!==o&&(rr(o,1,a),zt(o,a))}function nt(o,a,c){if(3===o.tag)sc(o,o,c);else for(;null!==a;){if(3===a.tag){sc(a,o,c);break}if(1===a.tag){var u=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof u.componentDidCatch&&(null===fi||!fi.has(u))){a=zn(a,o=zr(a,o=Or(c,o),1),1),o=Ot(),null!==a&&(rr(a,1,o),zt(a,o));break}}a=a.return}}function Cd(o,a,c){var u=o.pingCache;null!==u&&u.delete(a),a=Ot(),o.pingedLanes|=o.suspendedLanes&c,Nt===o&&(Dt&c)===c&&(4===_t||3===_t&&(130023424&Dt)===Dt&&500>ft()-Zr?Po(o,0):Qs|=c),zt(o,a)}function ac(o,a){0===a&&(1&o.mode?(a=gs,!(130023424&(gs<<=1))&&(gs=4194304)):a=1);var c=Ot();null!==(o=Kn(o,a))&&(rr(o,a,c),zt(o,c))}function kd(o){var a=o.memoizedState,c=0;null!==a&&(c=a.retryLane),ac(o,c)}function Sd(o,a){var c=0;switch(o.tag){case 13:var u=o.stateNode,p=o.memoizedState;null!==p&&(c=p.retryLane);break;case 19:u=o.stateNode;break;default:throw Error(N(314))}null!==u&&u.delete(a),ac(o,c)}function wd(o,a){return $c(o,a)}function la(o,a,c,u){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(o,a,c,u){return new la(o,a,c,u)}function ca(o){return!(!(o=o.prototype)||!o.isReactComponent)}function Xo(o,a){var c=o.alternate;return null===c?((c=jn(o.tag,a,o.key,o.mode)).elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=a,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&o.flags,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,c.dependencies=null===(a=o.dependencies)?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function ua(o,a,c,u,p,h){var y=2;if(u=o,"function"==typeof o)ca(o)&&(y=1);else if("string"==typeof o)y=5;else e:switch(o){case ct:return $n(c.children,p,h,a);case Yn:y=8,p|=8;break;case Cn:return(o=jn(12,c,a,2|p)).elementType=Cn,o.lanes=h,o;case ln:return(o=jn(13,c,a,p)).elementType=ln,o.lanes=h,o;case vn:return(o=jn(19,c,a,p)).elementType=vn,o.lanes=h,o;case Se:return Te(c,p,h,a);default:if("object"==typeof o&&null!==o)switch(o.$$typeof){case Hn:y=10;break e;case kn:y=9;break e;case Sn:y=11;break e;case lo:y=14;break e;case te:y=16,u=null;break e}throw Error(N(130,null==o?o:typeof o,""))}return(a=jn(y,c,a,p)).elementType=o,a.type=u,a.lanes=h,a}function $n(o,a,c,u){return(o=jn(7,o,u,a)).lanes=c,o}function Te(o,a,c,u){return(o=jn(22,o,u,a)).elementType=Se,o.lanes=c,o.stateNode={isHidden:!1},o}function lc(o,a,c){return(o=jn(6,o,null,a)).lanes=c,o}function da(o,a,c){return(a=jn(4,null!==o.children?o.children:[],o.key,a)).lanes=c,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function Zp(o,a,c,u,p){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=u,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function pa(o,a,c,u,p,h,y,S,A){return o=new Zp(o,a,c,S,A),1===a?(a=1,!0===h&&(a|=8)):a=0,h=jn(3,null,null,a),o.current=h,h.stateNode=o,h.memoizedState={element:u,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},El(h),o}function Ed(o){if(!o)return Mo;e:{if(Ko(o=o._reactInternals)!==o||1!==o.tag)throw Error(N(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if($t(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(N(171))}if(1===o.tag){var c=o.type;if($t(c))return wr(o,c,a)}return a}function Id(o,a,c,u,p,h,y,S,A){return(o=pa(c,u,!0,o,0,h,0,S,A)).context=Ed(null),c=o.current,(h=qn(u=Ot(),p=Co(c))).callback=a??null,zn(c,h,p),o.current.lanes=p,rr(o,p,u),zt(o,u),o}function fa(o,a,c,u){var p=a.current,h=Ot(),y=Co(p);return c=Ed(c),null===a.context?a.context=c:a.pendingContext=c,(a=qn(h,y)).payload={element:o},null!==(u=void 0===u?null:u)&&(a.callback=u),null!==(o=zn(p,a,y))&&(Wt(o,p,y,h),Vi(o,p,y)),y}function ma(o){return(o=o.current).child?o.child.stateNode:null}function Wi(o,a){if(null!==(o=o.memoizedState)&&null!==o.dehydrated){var c=o.retryLane;o.retryLane=0!==c&&c<a?c:a}}function _a(o,a){Wi(o,a),(o=o.alternate)&&Wi(o,a)}aa=function(o,a,c){if(null!==o)if(o.memoizedProps!==a.pendingProps||qt.current)Ht=!0;else{if(!(o.lanes&c||128&a.flags))return Ht=!1,function Pp(o,a,c){switch(a.tag){case 3:Ws(a),ji();break;case 5:Tl(a);break;case 1:$t(a.type)&&ni(a);break;case 4:Bs(a,a.stateNode.containerInfo);break;case 10:var u=a.type._context,p=a.memoizedProps.value;We(Vo,u._currentValue),u._currentValue=p;break;case 13:if(null!==(u=a.memoizedState))return null!==u.dehydrated?(We(dt,1&dt.current),a.flags|=128,null):c&a.child.childLanes?ud(o,a,c):(We(dt,1&dt.current),null!==(o=Le(o,a,c))?o.sibling:null);We(dt,1&dt.current);break;case 19:if(u=!!(c&a.childLanes),128&o.flags){if(u)return Wl(o,a,c);a.flags|=128}if(null!==(p=a.memoizedState)&&(p.rendering=null,p.tail=null,p.lastEffect=null),We(dt,dt.current),u)break;return null;case 22:case 23:return a.lanes=0,sd(o,a,c)}return Le(o,a,c)}(o,a,c);Ht=!!(131072&o.flags)}else Ht=!1,Ye&&1048576&a.flags&&Eu(a,ii,a.index);switch(a.lanes=0,a.tag){case 2:var u=a.type;De(o,a),o=a.pendingProps;var p=$o(a,Pt.current);Di(a,c),p=Ml(null,a,u,o,p,c);var h=jl();return a.flags|=1,"object"==typeof p&&null!==p&&"function"==typeof p.render&&void 0===p.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,$t(u)?(h=!0,ni(a)):h=!1,a.memoizedState=null!=p.state?p.state:null,El(a),p.updater=Rn,a.stateNode=p,p._reactInternals=a,td(a,u,o,c),a=Bi(null,a,u,!0,h,c)):(a.tag=0,Ye&&h&&Cl(a),wt(null,a,p,c),a=a.child),a;case 16:u=a.elementType;e:{switch(De(o,a),o=a.pendingProps,u=(p=u._init)(u._payload),a.type=u,p=a.tag=function Wp(o){if("function"==typeof o)return ca(o)?1:0;if(null!=o){if((o=o.$$typeof)===Sn)return 11;if(o===lo)return 14}return 2}(u),o=Ln(u,o),p){case 0:a=Pl(null,a,u,o,c);break e;case 1:a=ld(null,a,u,o,c);break e;case 11:a=id(null,a,u,o,c);break e;case 14:a=rd(null,a,u,Ln(u.type,o),c);break e}throw Error(N(306,u,""))}return a;case 0:return p=a.pendingProps,Pl(o,a,u=a.type,p=a.elementType===u?p:Ln(u,p),c);case 1:return p=a.pendingProps,ld(o,a,u=a.type,p=a.elementType===u?p:Ln(u,p),c);case 3:e:{if(Ws(a),null===o)throw Error(N(387));u=a.pendingProps,p=(h=a.memoizedState).element,Tn(o,a),Os(a,u,null,c);var y=a.memoizedState;if(u=y.element,h.isDehydrated){if(a.updateQueue.baseState=h={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},a.memoizedState=h,256&a.flags){a=cd(o,a,u,c,p=Or(Error(N(423)),a));break e}if(u!==p){a=cd(o,a,u,c,p=Or(Error(N(424)),a));break e}for(pn=po(a.stateNode.containerInfo.firstChild),en=a,Ye=!0,tn=null,c=wl(a,null,u,c),a.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(ji(),u===p){a=Le(o,a,c);break e}wt(o,a,u,c)}a=a.child}return a;case 5:return Tl(a),null===o&&In(a),h=null!==o?o.memoizedProps:null,y=(p=a.pendingProps).children,vl(u=a.type,p)?y=null:null!==h&&vl(u,h)&&(a.flags|=32),ad(o,a),wt(o,a,y,c),a.child;case 6:return null===o&&In(a),null;case 13:return ud(o,a,c);case 4:return Bs(a,a.stateNode.containerInfo),u=a.pendingProps,null===o?a.child=$i(a,null,u,c):wt(o,a,u,c),a.child;case 11:return p=a.pendingProps,id(o,a,u=a.type,p=a.elementType===u?p:Ln(u,p),c);case 7:return wt(o,a,a.pendingProps,c),a.child;case 8:case 12:return wt(o,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.memoizedProps,y=(p=a.pendingProps).value,We(Vo,(u=a.type._context)._currentValue),u._currentValue=y,null!==h)if(Dn(h.value,y)){if(h.children===p.children&&!qt.current){a=Le(o,a,c);break e}}else for(null!==(h=a.child)&&(h.return=a);null!==h;){var S=h.dependencies;if(null!==S){y=h.child;for(var A=S.firstContext;null!==A;){if(A.context===u){if(1===h.tag){(A=qn(-1,c&-c)).tag=2;var O=h.updateQueue;if(null!==O){var J=(O=O.shared).pending;null===J?A.next=A:(A.next=J.next,J.next=A),O.pending=A}}h.lanes|=c,null!==(A=h.alternate)&&(A.lanes|=c),Vs(h.return,c,a),S.lanes|=c;break}A=A.next}}else if(10===h.tag)y=h.type===a.type?null:h.child;else if(18===h.tag){if(null===(y=h.return))throw Error(N(341));y.lanes|=c,null!==(S=y.alternate)&&(S.lanes|=c),Vs(y,c,a),y=h.sibling}else y=h.child;if(null!==y)y.return=h;else for(y=h;null!==y;){if(y===a){y=null;break}if(null!==(h=y.sibling)){h.return=y.return,y=h;break}y=y.return}h=y}wt(o,a,p.children,c),a=a.child}return a;case 9:return p=a.type,u=a.pendingProps.children,Di(a,c),u=u(p=bn(p)),a.flags|=1,wt(o,a,u,c),a.child;case 14:return p=Ln(u=a.type,a.pendingProps),rd(o,a,u,p=Ln(u.type,p),c);case 15:return Ll(o,a,a.type,a.pendingProps,c);case 17:return p=a.pendingProps,p=a.elementType===(u=a.type)?p:Ln(u,p),De(o,a),a.tag=1,$t(u)?(o=!0,ni(a)):o=!1,Di(a,c),Ol(a,u,p),td(a,u,p,c),Bi(null,a,u,!0,o,c);case 19:return Wl(o,a,c);case 22:return sd(o,a,c)}throw Error(N(156,a.tag))};var cc="function"==typeof reportError?reportError:function(o){console.error(o)};function ha(o){this._internalRoot=o}function Zi(o){this._internalRoot=o}function ga(o){return!(!o||1!==o.nodeType&&9!==o.nodeType&&11!==o.nodeType)}function va(o){return!(!o||1!==o.nodeType&&9!==o.nodeType&&11!==o.nodeType&&(8!==o.nodeType||" react-mount-point-unstable "!==o.nodeValue))}function Ad(){}function ko(o,a,c,u,p){var h=c._reactRootContainer;if(h){var y=h;if("function"==typeof p){var S=p;p=function(){var A=ma(y);S.call(A)}}fa(a,y,o,p)}else y=function ya(o,a,c,u,p){if(p){if("function"==typeof u){var h=u;u=function(){var O=ma(y);h.call(O)}}var y=Id(a,u,o,0,null,!1,0,"",Ad);return o._reactRootContainer=y,o[wn]=y.current,jt(8===o.nodeType?o.parentNode:o),mi(),y}for(;p=o.lastChild;)o.removeChild(p);if("function"==typeof u){var S=u;u=function(){var O=ma(A);S.call(O)}}var A=pa(o,0,!1,null,0,!1,0,"",Ad);return o._reactRootContainer=A,o[wn]=A.current,jt(8===o.nodeType?o.parentNode:o),mi(function(){fa(a,A,c,u)}),A}(c,a,o,p,u);return ma(y)}Zi.prototype.render=ha.prototype.render=function(o){var a=this._internalRoot;if(null===a)throw Error(N(409));fa(o,a,null,null)},Zi.prototype.unmount=ha.prototype.unmount=function(){var o=this._internalRoot;if(null!==o){this._internalRoot=null;var a=o.containerInfo;mi(function(){fa(null,o,null,null)}),a[wn]=null}},Zi.prototype.unstable_scheduleHydration=function(o){if(o){var a=Pc();o={blockedOn:null,target:o,priority:a};for(var c=0;c<To.length&&0!==a&&a<To[c].priority;c++);To.splice(c,0,o),0===c&&Lt(o)}},Bc=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var c=ir(a.pendingLanes);0!==c&&(ys(a,1|c),zt(a,ft()),!(6&$e)&&(Yi=ft()+500,Qt()))}break;case 13:mi(function(){var u=Kn(o,1);if(null!==u){var p=Ot();Wt(u,o,1,p)}}),_a(o,1)}},Ya=function(o){if(13===o.tag){var a=Kn(o,134217728);null!==a&&Wt(a,o,134217728,Ot()),_a(o,134217728)}},Lc=function(o){if(13===o.tag){var a=Co(o),c=Kn(o,a);null!==c&&Wt(c,o,a,Ot()),_a(o,a)}},Pc=function(){return Be},Xc=function(o,a){var c=Be;try{return Be=o,a()}finally{Be=c}},Da=function(o,a,c){switch(a){case"input":if(Aa(o,c),a=c.name,"radio"===c.type&&null!=a){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var u=c[a];if(u!==o&&u.form===o.form){var p=Ms(u);if(!p)throw Error(N(90));hc(u),Aa(u,p)}}}break;case"textarea":xc(o,c);break;case"select":null!=(a=c.value)&&Jo(o,!!c.multiple,a,!1)}},Tc=sa,Va=mi;var Jp={usingClientEntryPoint:!1,Events:[Ro,ti,Ms,Ec,Ic,sa]},qr={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kp={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:it.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return null===(o=Mc(o))?null:o.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||function Td(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{_s=Ji.inject(Kp),Wn=Ji}catch{}}oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jp,oe.createPortal=function(o,a){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ga(a))throw Error(N(200));return function Nd(o,a,c){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:je,key:null==u?null:""+u,children:o,containerInfo:a,implementation:c}}(o,a,null,c)},oe.createRoot=function(o,a){if(!ga(o))throw Error(N(299));var c=!1,u="",p=cc;return null!=a&&(!0===a.unstable_strictMode&&(c=!0),void 0!==a.identifierPrefix&&(u=a.identifierPrefix),void 0!==a.onRecoverableError&&(p=a.onRecoverableError)),a=pa(o,1,!1,null,0,c,0,u,p),o[wn]=a.current,jt(8===o.nodeType?o.parentNode:o),new ha(a)},oe.findDOMNode=function(o){if(null==o)return null;if(1===o.nodeType)return o;var a=o._reactInternals;if(void 0===a)throw"function"==typeof o.render?Error(N(188)):(o=Object.keys(o).join(","),Error(N(268,o)));return null===(o=Mc(a))?null:o.stateNode},oe.flushSync=function(o){return mi(o)},oe.hydrate=function(o,a,c){if(!va(a))throw Error(N(200));return ko(null,o,a,!0,c)},oe.hydrateRoot=function(o,a,c){if(!ga(o))throw Error(N(405));var u=null!=c&&c.hydratedSources||null,p=!1,h="",y=cc;if(null!=c&&(!0===c.unstable_strictMode&&(p=!0),void 0!==c.identifierPrefix&&(h=c.identifierPrefix),void 0!==c.onRecoverableError&&(y=c.onRecoverableError)),a=Id(a,null,o,1,c??null,p,0,h,y),o[wn]=a.current,jt(o),u)for(o=0;o<u.length;o++)p=(p=(c=u[o])._getVersion)(c._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[c,p]:a.mutableSourceEagerHydrationData.push(c,p);return new Zi(a)},oe.render=function(o,a,c){if(!va(a))throw Error(N(200));return ko(null,o,a,!1,c)},oe.unmountComponentAtNode=function(o){if(!va(o))throw Error(N(40));return!!o._reactRootContainer&&(mi(function(){ko(null,null,o,!1,function(){o._reactRootContainer=null,o[wn]=null})}),!0)},oe.unstable_batchedUpdates=sa,oe.unstable_renderSubtreeIntoContainer=function(o,a,c,u){if(!va(c))throw Error(N(200));if(null==o||void 0===o._reactInternals)throw Error(N(38));return ko(o,a,c,!1,u)},oe.version="18.3.1-next-f1338f8080-20240426"},2663:(sn,oe,pe)=>{var L=pe(6046);oe.H=L.createRoot},6046:(sn,oe,pe)=>{(function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(L){console.error(L)}})(),sn.exports=pe(7578)},330:(sn,oe)=>{var pe=Symbol.for("react.element"),m=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),xt=Symbol.for("react.profiler"),Ct=Symbol.for("react.provider"),Jt=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),gn=Symbol.for("react.memo"),Xe=Symbol.for("react.lazy"),Me=Symbol.iterator,e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Je=Object.assign,gt={};function Ce(M,Z,Ne){this.props=M,this.context=Z,this.refs=gt,this.updater=Ne||e}function Ae(){}function an(M,Z,Ne){this.props=M,this.context=Z,this.refs=gt,this.updater=Ne||e}Ce.prototype.isReactComponent={},Ce.prototype.setState=function(M,Z){if("object"!=typeof M&&"function"!=typeof M&&null!=M)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},Ce.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")},Ae.prototype=Ce.prototype;var kt=an.prototype=new Ae;kt.constructor=an,Je(kt,Ce.prototype),kt.isPureReactComponent=!0;var Ft=Array.isArray,it=Object.prototype.hasOwnProperty,Et={current:null},je={key:!0,ref:!0,__self:!0,__source:!0};function ct(M,Z,Ne){var Ee,Fe={},He=null,rt=null;if(null!=Z)for(Ee in void 0!==Z.ref&&(rt=Z.ref),void 0!==Z.key&&(He=""+Z.key),Z)it.call(Z,Ee)&&!je.hasOwnProperty(Ee)&&(Fe[Ee]=Z[Ee]);var ut=arguments.length-2;if(1===ut)Fe.children=Ne;else if(1<ut){for(var Oe=Array(ut),cn=0;cn<ut;cn++)Oe[cn]=arguments[cn+2];Fe.children=Oe}if(M&&M.defaultProps)for(Ee in ut=M.defaultProps)void 0===Fe[Ee]&&(Fe[Ee]=ut[Ee]);return{$$typeof:pe,type:M,key:He,ref:rt,props:Fe,_owner:Et.current}}function Cn(M){return"object"==typeof M&&null!==M&&M.$$typeof===pe}var kn=/\/+/g;function Sn(M,Z){return"object"==typeof M&&null!==M&&null!=M.key?function Hn(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Ne){return Z[Ne]})}(""+M.key):Z.toString(36)}function ln(M,Z,Ne,Ee,Fe){var He=typeof M;("undefined"===He||"boolean"===He)&&(M=null);var rt=!1;if(null===M)rt=!0;else switch(He){case"string":case"number":rt=!0;break;case"object":switch(M.$$typeof){case pe:case m:rt=!0}}if(rt)return Fe=Fe(rt=M),M=""===Ee?"."+Sn(rt,0):Ee,Ft(Fe)?(Ne="",null!=M&&(Ne=M.replace(kn,"$&/")+"/"),ln(Fe,Z,Ne,"",function(cn){return cn})):null!=Fe&&(Cn(Fe)&&(Fe=function Yn(M,Z){return{$$typeof:pe,type:M.type,key:Z,ref:M.ref,props:M.props,_owner:M._owner}}(Fe,Ne+(!Fe.key||rt&&rt.key===Fe.key?"":(""+Fe.key).replace(kn,"$&/")+"/")+M)),Z.push(Fe)),1;if(rt=0,Ee=""===Ee?".":Ee+":",Ft(M))for(var ut=0;ut<M.length;ut++){var Oe=Ee+Sn(He=M[ut],ut);rt+=ln(He,Z,Ne,Oe,Fe)}else if(Oe=function ze(M){return null===M||"object"!=typeof M?null:"function"==typeof(M=Me&&M[Me]||M["@@iterator"])?M:null}(M),"function"==typeof Oe)for(M=Oe.call(M),ut=0;!(He=M.next()).done;)rt+=ln(He=He.value,Z,Ne,Oe=Ee+Sn(He,ut++),Fe);else if("object"===He)throw Z=String(M),Error("Objects are not valid as a React child (found: "+("[object Object]"===Z?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return rt}function vn(M,Z,Ne){if(null==M)return M;var Ee=[],Fe=0;return ln(M,Ee,"","",function(He){return Z.call(Ne,He,Fe++)}),Ee}function lo(M){if(-1===M._status){var Z=M._result;(Z=Z()).then(function(Ne){(0===M._status||-1===M._status)&&(M._status=1,M._result=Ne)},function(Ne){(0===M._status||-1===M._status)&&(M._status=2,M._result=Ne)}),-1===M._status&&(M._status=0,M._result=Z)}if(1===M._status)return M._result.default;throw M._result}var te={current:null},Se={transition:null},Ie={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Se,ReactCurrentOwner:Et};function Ve(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:vn,forEach:function(M,Z,Ne){vn(M,function(){Z.apply(this,arguments)},Ne)},count:function(M){var Z=0;return vn(M,function(){Z++}),Z},toArray:function(M){return vn(M,function(Z){return Z})||[]},only:function(M){if(!Cn(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},oe.Component=Ce,oe.Fragment=L,oe.Profiler=xt,oe.PureComponent=an,oe.StrictMode=N,oe.Suspense=et,oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,oe.act=Ve,oe.cloneElement=function(M,Z,Ne){if(null==M)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ee=Je({},M.props),Fe=M.key,He=M.ref,rt=M._owner;if(null!=Z){if(void 0!==Z.ref&&(He=Z.ref,rt=Et.current),void 0!==Z.key&&(Fe=""+Z.key),M.type&&M.type.defaultProps)var ut=M.type.defaultProps;for(Oe in Z)it.call(Z,Oe)&&!je.hasOwnProperty(Oe)&&(Ee[Oe]=void 0===Z[Oe]&&void 0!==ut?ut[Oe]:Z[Oe])}var Oe=arguments.length-2;if(1===Oe)Ee.children=Ne;else if(1<Oe){ut=Array(Oe);for(var cn=0;cn<Oe;cn++)ut[cn]=arguments[cn+2];Ee.children=ut}return{$$typeof:pe,type:M.type,key:Fe,ref:He,props:Ee,_owner:rt}},oe.createContext=function(M){return(M={$$typeof:Jt,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Ct,_context:M},M.Consumer=M},oe.createElement=ct,oe.createFactory=function(M){var Z=ct.bind(null,M);return Z.type=M,Z},oe.createRef=function(){return{current:null}},oe.forwardRef=function(M){return{$$typeof:ot,render:M}},oe.isValidElement=Cn,oe.lazy=function(M){return{$$typeof:Xe,_payload:{_status:-1,_result:M},_init:lo}},oe.memo=function(M,Z){return{$$typeof:gn,type:M,compare:void 0===Z?null:Z}},oe.startTransition=function(M){var Z=Se.transition;Se.transition={};try{M()}finally{Se.transition=Z}},oe.unstable_act=Ve,oe.useCallback=function(M,Z){return te.current.useCallback(M,Z)},oe.useContext=function(M){return te.current.useContext(M)},oe.useDebugValue=function(){},oe.useDeferredValue=function(M){return te.current.useDeferredValue(M)},oe.useEffect=function(M,Z){return te.current.useEffect(M,Z)},oe.useId=function(){return te.current.useId()},oe.useImperativeHandle=function(M,Z,Ne){return te.current.useImperativeHandle(M,Z,Ne)},oe.useInsertionEffect=function(M,Z){return te.current.useInsertionEffect(M,Z)},oe.useLayoutEffect=function(M,Z){return te.current.useLayoutEffect(M,Z)},oe.useMemo=function(M,Z){return te.current.useMemo(M,Z)},oe.useReducer=function(M,Z,Ne){return te.current.useReducer(M,Z,Ne)},oe.useRef=function(M){return te.current.useRef(M)},oe.useState=function(M){return te.current.useState(M)},oe.useSyncExternalStore=function(M,Z,Ne){return te.current.useSyncExternalStore(M,Z,Ne)},oe.useTransition=function(){return te.current.useTransition()},oe.version="18.3.1"},1395:(sn,oe,pe)=>{sn.exports=pe(330)},6290:(sn,oe)=>{function pe(te,Se){var Ie=te.length;te.push(Se);e:for(;0<Ie;){var Ve=Ie-1>>>1,M=te[Ve];if(!(0<N(M,Se)))break e;te[Ve]=Se,te[Ie]=M,Ie=Ve}}function m(te){return 0===te.length?null:te[0]}function L(te){if(0===te.length)return null;var Se=te[0],Ie=te.pop();if(Ie!==Se){te[0]=Ie;e:for(var Ve=0,M=te.length,Z=M>>>1;Ve<Z;){var Ne=2*(Ve+1)-1,Ee=te[Ne],Fe=Ne+1,He=te[Fe];if(0>N(Ee,Ie))Fe<M&&0>N(He,Ee)?(te[Ve]=He,te[Fe]=Ie,Ve=Fe):(te[Ve]=Ee,te[Ne]=Ie,Ve=Ne);else{if(!(Fe<M&&0>N(He,Ie)))break e;te[Ve]=He,te[Fe]=Ie,Ve=Fe}}}return Se}function N(te,Se){var Ie=te.sortIndex-Se.sortIndex;return 0!==Ie?Ie:te.id-Se.id}if("object"==typeof performance&&"function"==typeof performance.now){var xt=performance;oe.unstable_now=function(){return xt.now()}}else{var Ct=Date,Jt=Ct.now();oe.unstable_now=function(){return Ct.now()-Jt}}var ot=[],et=[],gn=1,Xe=null,Me=3,ze=!1,e=!1,Je=!1,gt="function"==typeof setTimeout?setTimeout:null,Ce="function"==typeof clearTimeout?clearTimeout:null,Ae=typeof setImmediate<"u"?setImmediate:null;function an(te){for(var Se=m(et);null!==Se;){if(null===Se.callback)L(et);else{if(!(Se.startTime<=te))break;L(et),Se.sortIndex=Se.expirationTime,pe(ot,Se)}Se=m(et)}}function kt(te){if(Je=!1,an(te),!e)if(null!==m(ot))e=!0,vn(Ft);else{var Se=m(et);null!==Se&&lo(kt,Se.startTime-te)}}function Ft(te,Se){e=!1,Je&&(Je=!1,Ce(je),je=-1),ze=!0;var Ie=Me;try{for(an(Se),Xe=m(ot);null!==Xe&&(!(Xe.expirationTime>Se)||te&&!Cn());){var Ve=Xe.callback;if("function"==typeof Ve){Xe.callback=null,Me=Xe.priorityLevel;var M=Ve(Xe.expirationTime<=Se);Se=oe.unstable_now(),"function"==typeof M?Xe.callback=M:Xe===m(ot)&&L(ot),an(Se)}else L(ot);Xe=m(ot)}if(null!==Xe)var Z=!0;else{var Ne=m(et);null!==Ne&&lo(kt,Ne.startTime-Se),Z=!1}return Z}finally{Xe=null,Me=Ie,ze=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var kn,it=!1,Et=null,je=-1,ct=5,Yn=-1;function Cn(){return!(oe.unstable_now()-Yn<ct)}function Hn(){if(null!==Et){var te=oe.unstable_now();Yn=te;var Se=!0;try{Se=Et(!0,te)}finally{Se?kn():(it=!1,Et=null)}}else it=!1}if("function"==typeof Ae)kn=function(){Ae(Hn)};else if(typeof MessageChannel<"u"){var Sn=new MessageChannel,ln=Sn.port2;Sn.port1.onmessage=Hn,kn=function(){ln.postMessage(null)}}else kn=function(){gt(Hn,0)};function vn(te){Et=te,it||(it=!0,kn())}function lo(te,Se){je=gt(function(){te(oe.unstable_now())},Se)}oe.unstable_IdlePriority=5,oe.unstable_ImmediatePriority=1,oe.unstable_LowPriority=4,oe.unstable_NormalPriority=3,oe.unstable_Profiling=null,oe.unstable_UserBlockingPriority=2,oe.unstable_cancelCallback=function(te){te.callback=null},oe.unstable_continueExecution=function(){e||ze||(e=!0,vn(Ft))},oe.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<te?Math.floor(1e3/te):5},oe.unstable_getCurrentPriorityLevel=function(){return Me},oe.unstable_getFirstCallbackNode=function(){return m(ot)},oe.unstable_next=function(te){switch(Me){case 1:case 2:case 3:var Se=3;break;default:Se=Me}var Ie=Me;Me=Se;try{return te()}finally{Me=Ie}},oe.unstable_pauseExecution=function(){},oe.unstable_requestPaint=function(){},oe.unstable_runWithPriority=function(te,Se){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ie=Me;Me=te;try{return Se()}finally{Me=Ie}},oe.unstable_scheduleCallback=function(te,Se,Ie){var Ve=oe.unstable_now();switch(Ie="object"==typeof Ie&&null!==Ie&&"number"==typeof(Ie=Ie.delay)&&0<Ie?Ve+Ie:Ve,te){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return te={id:gn++,callback:Se,priorityLevel:te,startTime:Ie,expirationTime:M=Ie+M,sortIndex:-1},Ie>Ve?(te.sortIndex=Ie,pe(et,te),null===m(ot)&&te===m(et)&&(Je?(Ce(je),je=-1):Je=!0,lo(kt,Ie-Ve))):(te.sortIndex=M,pe(ot,te),e||ze||(e=!0,vn(Ft))),te},oe.unstable_shouldYield=Cn,oe.unstable_wrapCallback=function(te){var Se=Me;return function(){var Ie=Me;Me=Se;try{return te.apply(this,arguments)}finally{Me=Ie}}}},1605:(sn,oe,pe)=>{sn.exports=pe(6290)},2058:(sn,oe,pe)=>{var m=pe(1395),N="function"==typeof Object.is?Object.is:function L(ze,e){return ze===e&&(0!==ze||1/ze==1/e)||ze!=ze&&e!=e},xt=m.useState,Ct=m.useEffect,Jt=m.useLayoutEffect,ot=m.useDebugValue;function gn(ze){var e=ze.getSnapshot;ze=ze.value;try{var Je=e();return!N(ze,Je)}catch{return!0}}var Me=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function Xe(ze,e){return e()}:function et(ze,e){var Je=e(),gt=xt({inst:{value:Je,getSnapshot:e}}),Ce=gt[0].inst,Ae=gt[1];return Jt(function(){Ce.value=Je,Ce.getSnapshot=e,gn(Ce)&&Ae({inst:Ce})},[ze,Je,e]),Ct(function(){return gn(Ce)&&Ae({inst:Ce}),ze(function(){gn(Ce)&&Ae({inst:Ce})})},[ze]),ot(Je),Je};oe.useSyncExternalStore=void 0!==m.useSyncExternalStore?m.useSyncExternalStore:Me},7973:(sn,oe,pe)=>{var m=pe(1395),L=pe(6485),xt="function"==typeof Object.is?Object.is:function N(Xe,Me){return Xe===Me&&(0!==Xe||1/Xe==1/Me)||Xe!=Xe&&Me!=Me},Ct=L.useSyncExternalStore,Jt=m.useRef,ot=m.useEffect,et=m.useMemo,gn=m.useDebugValue;oe.useSyncExternalStoreWithSelector=function(Xe,Me,ze,e,Je){var gt=Jt(null);if(null===gt.current){var Ce={hasValue:!1,value:null};gt.current=Ce}else Ce=gt.current;gt=et(function(){function an(je){if(!kt){if(kt=!0,Ft=je,je=e(je),void 0!==Je&&Ce.hasValue){var ct=Ce.value;if(Je(ct,je))return it=ct}return it=je}if(ct=it,xt(Ft,je))return ct;var Yn=e(je);return void 0!==Je&&Je(ct,Yn)?(Ft=je,ct):(Ft=je,it=Yn)}var Ft,it,kt=!1,Et=void 0===ze?null:ze;return[function(){return an(Me())},null===Et?void 0:function(){return an(Et())}]},[Me,ze,e,Je]);var Ae=Ct(Xe,gt[0],gt[1]);return ot(function(){Ce.hasValue=!0,Ce.value=Ae},[Ae]),gn(Ae),Ae}},6485:(sn,oe,pe)=>{sn.exports=pe(2058)},7528:(sn,oe,pe)=>{sn.exports=pe(7973)}}]);