"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[639],{7639:(tn,oe,se)=>{se.r(oe),se.d(oe,{AIModule:()=>Ox});var f=se(9842),V=se(177),w=se(9417),ht=se(2994),St=se(8516),qt=se(4110),nt=se(7163),tt=se(7091),pn=se(3424),Oe=se(1064),Me=se(8567),Be=se(7005),e=se(3953),We=se(9822);let ut=(()=>{var t;class i{constructor(o){(0,f.A)(this,"redirectService",void 0),this.redirectService=o}canActivate(o,r){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/"),!1)}canActivateChild(o,r){return this.canActivate(o,r)}canLoad(o){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/"),!1)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(We.m))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var he=se(467),Ae=se(3617),Pt=se(671),gt=se(4025),Mt=se(5312),Pe=se(1626);const $t=Mt.c.apiPlatformBaseUrl;let $e=(()=>{var t;class i{constructor(o){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",$t+"/api/App/"),this.http=o}getList(){return this.http.get(`${this.apiUrl}list`)}listTemplate(){return this.http.get(`${this.apiUrl}listTemplate`)}getListShare(){return this.http.get(`${this.apiUrl}listShare`)}credit(){return this.http.get(`${this.apiUrl}credit`)}download(o){return this.http.post(`${this.apiUrl}download`,o)}load(o){return this.http.post(`${this.apiUrl}load`,o)}save(o){return this.http.post(`${this.apiUrl}save`,o)}delete(o){return this.http.post(`${this.apiUrl}delete`,o)}share(o){return this.http.post(`${this.apiUrl}share`,o)}addCollection(o){return this.http.post(`${this.apiUrl}addCollection`,o)}addVCollection(o){return this.http.post(`${this.apiUrl}addVCollection`,o)}getAppInfo(o){return this.http.get(`${this.apiUrl}getAppInfo/${o}`)}listAppRoute(){return this.http.get(`${this.apiUrl}listAppRoute`)}listApp(){return this.http.get(`${this.apiUrl}listApp`)}runAppAsync(o,r){return this.http.post(`${this.apiUrl}runAsync/`+o+"?stream=1",r)}runApp(o,r){return this.http.post(`${this.apiUrl}run/`+o+"?stream=1",r)}cancel(o){return this.http.post(`${this.apiUrl}cancel/${o}`,{})}logAppDone(o,r){return this.http.post(`${this.apiUrl}logAppDone/`+o,{data:r})}status(o){return this.http.get(`${this.apiUrl}status/`+o)}history(o){return this.http.get(`${this.apiUrl}history/`+o)}fetchUrl(o){return this.http.post(`${this.apiUrl}fetchUrl`,o)}delColection(o){return this.http.post(`${this.apiUrl}delColection`,o)}listCollection(){return this.http.get(`${this.apiUrl}listCollection`)}listVCollection(){return this.http.get(`${this.apiUrl}listVCollection`)}listData(o){return this.http.post(`${this.apiUrl}listData`,o)}delData(o){return this.http.post(`${this.apiUrl}delData`,o)}saveData(o){return this.http.post(`${this.apiUrl}saveData`,o)}searchVector(o){return this.http.post(`${this.apiUrl}searchVector`,o)}getConf(o){return this.http.post(`${this.apiUrl}getConf`,{data:o})}getKey(o){return this.http.post(`${this.apiUrl}getKey`,{data:o})}listKeys(){return this.http.get(`${this.apiUrl}listKeys`)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(Pe.Qq))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),dt=(()=>{var t;class i{constructor(o){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",$t+"/api/Admin/"),this.http=o}run(o){return this.http.post(`${this.apiUrl}run`,o)}live(o){return this.http.post(`${this.apiUrl}live`,o)}stream(o,r,l){const u=new EventSource(`${this.apiUrl}stream?t=${o}`);u.onmessage=function(p){p.data.trim().startsWith("[__FINISH__] => ")?l(p.data.substr(16)):r(JSON.parse(p.data))},u.onerror=function(p){u.close(),l("")}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(Pe.Qq))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var hn=function(t){return t.Text="text",t.ImageUrl="image_url",t}(hn||{}),gn=se(661);let vn=(()=>{var t;class i{constructor(o){(0,f.A)(this,"commonService",void 0),this.commonService=o}getTypeObjNotice(o){return"NEW_SHARE_CLASS_PERMISSION"==o.type?"L\u1edbp: "+o.classroomName:"NEW_SHARE_HOMEWORK_PERMISSION"==o.type?"B\xe0i t\u1eadp: "+o.homeworkName:"NEW_SHARE_EXAM_PERMISSION"==o.type?"\u0110\u1ec1 thi: "+o.examName:"NEW_SHARE_CATEGORY_PERMISSION"==o.type?"Th\u01b0 m\u1ee5c: "+o.examName:""}getRouterLinkForNoticeObj(o,r){var l=this.redirectToPage(o,!0,r);return"string"==typeof l?l:""}getQueryParamForNoticeObj(o){var r=this.redirectToPage(o,!1);return"object"==typeof r?r:null}redirectToPage(o,r,l){switch(o.type){case"NEW_ANSWER":case"NEW_SHARE_HOMEWORK_PERMISSION":return r?`/admin/testbank/homework-results-list/${o.classroomId}/${o.homeworkId}/${o.homeworkHashId}`:null;case"HAS_MARK":case"NEW_HOMEWORK":case"RESEND_ANSWER":return r?`/bai-tap/${o.homeworkHashId}`:null;case"NEW_EXAM_SUBMIT":return r?`/admin/testbank/test-review/${o.examId}/${o.parentId}/${o.studentId}/${o.examResultId??0}`:null;case"NEW_EXAM":return r?`/de-thi/${o.examHashId}`:"";case"EXAM_HAS_MARK":return r?`/test/answer-test/${o.parentId}/0/${o.examHashId}/${o.examResultId}`:null;case"NEW_SHARE_CLASS_PERMISSION":return 1==o.isMultipleClassroom?r?"/admin/student/manage-classroom/0":"":r?"/admin/student/classroom-details/"+o.classroomId+"/0":"";case"NEW_SHARE_CATEGORY_PERMISSION":return r?`/admin/testbank/document-management/0/${o.examId}/1`:{data:this.commonService.serializeJson({shareType:`user_${o.senderId}`})};case"NEW_SHARE_EXAM_PERMISSION":return r?`/admin/testbank/exam-results-list/0/${o.examId}/0`:null;case"NEW_QA_EXAM_ASK":case"NEW_QA_HOMEWORK_ASK":return r?"/admin/teacher-qa/view-question/"+Number(o.extraDataObj?.qaQuestionId):null;case"NEW_QA_EXAM_ANSWER":case"NEW_QA_HOMEWORK_ANSWER":return r?"/student-qa/view-question/"+Number(o.extraDataObj?.qaQuestionId):null;case"NEW_ASSIGN":return r?"/admin/student/manage-classroom/0":null;case"SHARE_AZOTA_BANK_QUESTION":return r?"/auth/account-setting/0/3?tab=1":null;case"NEW_REQUEST_REAPPROVE":return r?`/admin/student/classroom-details/${o.classroomId}/0`:null;case"NEW_SHARE_PERMISSION":return null;case"NEW_CLASSROOM_NEWS":return r?l?`/student/classroom-details/${o.classroomId}/2`:`/admin/student/classroom-details/${o.classroomId}/2`:null;default:return r?"/student/classroom/0":null}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(gn.R))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var yn=se(9311),nn=se(4823),on=se(867);let qn=(()=>{var t;class i{redirectToNewLanguage(o){if(o&&o!=this.commonService.getCurrentLang()){let _=this.commonService.getCurrentDomain();var r=_+"/"+this.commonService.getCurrentLang()+"/",l=_+"/"+o+"/",u=this.commonService.getFullCurrentUrl(),p=u.replace(r,l);p!=u&&(this.browserStorageService.saveStorage(this.defaultLangueInLocalStorageKey,o),window.location.replace(p))}}redirectToUserLanguage(){if(this.userService.isLogin()){var o=this.userService.getUserObj();this.redirectToNewLanguage(o.language?o.language:this.commonService.getDefaultLang())}else{var r=this.browserStorageService.getStorage(this.defaultLangueInLocalStorageKey);this.redirectToNewLanguage(r||this.commonService.getDefaultLang())}}constructor(o,r,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"defaultLangueInLocalStorageKey","switch_language_code"),this.commonService=o,this.userService=r,this.browserStorageService=l}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(gn.R),e.KVO(gt.R),e.KVO(yn.z))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var ee=se(1413);let Ve=(()=>{var t;class i{logInDev(o,r){if(!Mt.c.production){if(null!=r&&null!=o)return console.log(o,r);if(null!=r&&null==o)return console.log(r);null!=o&&console.log(o)}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),j=(()=>{var t;class i{getHeaderReloadNoticeSubscriber(){return this.headerReloadNoticeListener}sendChangeLanguage(o){this._sendMessage({type:"CHANGE_LANGUAGE",status:1,message:"send_from_angular",data:{language:o}})}sendSimpleMessage(o){this._sendMessage({type:o,status:1,message:"send_from_angular",data:{}})}_sendMessage(o){this.aztCustomConsoleLogService.logInDev("To fluter data: ",o),this._sendRawMessage(JSON.stringify(o))}_sendRawMessage(o){try{let r=function Ie(){return typeof MessageInvoker<"u"?MessageInvoker:void 0}();typeof r<"u"&&r&&(this.aztCustomConsoleLogService.logInDev("Have MessageInvoker"),r.postMessage(o));let l=function ke(){return typeof flutter_inappwebview<"u"?flutter_inappwebview:void 0}();typeof l<"u"&&l&&(this.aztCustomConsoleLogService.logInDev("Have flutter_inappwebview"),l.callHandler("toFlutter",o))}catch(r){this.aztCustomConsoleLogService.logInDev(void 0,r)}}constructor(o){(0,f.A)(this,"aztCustomConsoleLogService",void 0),(0,f.A)(this,"headerReloadNoticeListener",new ee.B),this.aztCustomConsoleLogService=o}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(Ve))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var Z=se(9115),we=se(665),Ee=se(7347);function Fe(t,i){1&t&&(e.j41(0,"span",9),e.nrm(1,"azt-loading-ui"),e.k0s())}function Ye(t,i){if(1&t&&(e.j41(0,"button",5),e.DNE(1,Fe,2,0,"span",6),e.j41(2,"span",7),e.EFF(3,"\xa0"),e.k0s(),e.nrm(4,"img",8),e.nI1(5,"coreModConvertCdnLinkOfGitHub"),e.k0s()),2&t){const n=e.XpG(),o=e.sdS(2);e.Y8G("matMenuTriggerFor",o),e.R7$(),e.Y8G("ngIf",n.statusObj.loading),e.R7$(),e.Y8G("hidden",!n.statusObj.loading),e.R7$(2),e.FS9("alt",n.imgLanguage),e.Y8G("src",e.bMT(5,5,n.imgLanguage),e.B4B)}}function ot(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",10),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.switchLanguage(r.value))}),e.nrm(2,"img",11),e.nI1(3,"coreModConvertCdnLinkOfGitHub"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.FS9("alt",n),e.Y8G("src",e.bMT(3,3,n.img),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(5,5,n.label)," ")}}let pt=(()=>{var t;class i extends Ae.H{getImgLanguage(o){this.imgLanguage=this.listSupportedLanguages.find(r=>r.value==o)?.img??""}initLanguages(){this.listSupportedLanguages=this.supportedLanguagesArr.map(o=>({value:o,label:"lang_core_language_"+o,img:"flag/"+o+".svg"}))}switchLanguage(o){o&&o!=this.commonService.getCurrentLang()&&(this.userService.isLogin()?(this.initStatusObj(),this.waitDestroy(this.userLangService.apiUserLangSwitchLangGet(o).subscribe(r=>{1==r.success?(this.mobileWebviewService.sendChangeLanguage(o),setTimeout(()=>{this.stopStatusObj(),this.switchLanguageService.redirectToNewLanguage(o)},100)):this.errorStatusObj(r.message??"",!0)}))):(this.mobileWebviewService.sendChangeLanguage(o),setTimeout(()=>{this.switchLanguageService.redirectToNewLanguage(o)},100)))}ngOnInit(){this.initLanguages(),this.getImgLanguage(this.commonService.getCurrentLang()),this.imgLanguage||this.getImgLanguage(Mt.c.defaultLanguage)}constructor(o,r,l,u){super(),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"userLangService",void 0),(0,f.A)(this,"switchLanguageService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"imgLanguage",""),(0,f.A)(this,"listSupportedLanguages",[]),this.userService=o,this.userLangService=r,this.switchLanguageService=l,this.mobileWebviewService=u}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(gt.R),e.rXU(on.f$),e.rXU(qn),e.rXU(j))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["azt-switch-language"]],features:[e.Vt3],decls:6,vars:2,consts:[["switchlanguage","matMenu"],["class","btn btn-transparent p-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"dropdown-menu","show","w-32","relative"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"btn","btn-transparent","p-1",3,"matMenuTriggerFor"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[3,"hidden"],[3,"src","alt"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","azt-switch-language-2NtpICqDxdj",1,"dropdown-item",3,"click"],[1,"w-5","h-5","mr-2",3,"src","alt"]],template:function(o,r){1&o&&(e.DNE(0,Ye,6,7,"button",1),e.j41(1,"mat-menu",null,0)(3,"div",2)(4,"ul",3),e.DNE(5,ot,6,7,"li",4),e.k0s()()()),2&o&&(e.Y8G("ngIf",r.listSupportedLanguages.length>1),e.R7$(5),e.Y8G("ngForOf",r.listSupportedLanguages))},dependencies:[V.Sq,V.bT,Z.kk,Z.Cp,we.R,Ee.wp,Ee.Vs],encapsulation:2})),i})(),ze=(()=>{var t;class i{mouseEnter(){this.isMousePosition="mouseEnter",window.setTimeout(()=>{"mouseEnter"==this.isMousePosition&&this.menuTrigger?.openMenu()},100)}mouseLeave(){this.isMousePosition="mouseLeave",window.setTimeout(()=>{"mouseLeave"==this.isMousePosition&&this.menuTrigger?.closeMenu()},300)}constructor(o){(0,f.A)(this,"menuTrigger",void 0),(0,f.A)(this,"isMousePosition","mouseLeave"),this.menuTrigger=o}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(Z.Cp))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var rn=se(3861),sp=se(2909),Jr=se(4006);let $c=(()=>{var t;class i{constructor(o){(0,f.A)(this,"dialog",void 0),(0,f.A)(this,"open",(r,l)=>this.dialog.open(r,l)),(0,f.A)(this,"closeAll",()=>this.dialog.closeAll()),this.dialog=o}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(Jr.bZ))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),Kr=(()=>{var t;class i{removeInvalidChars(o){try{return o?.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")??""}catch{return o??""}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();const Ra=(t,i)=>({width:t,height:i}),Gc=(t,i,n)=>({width:t,height:i,borderColor:n}),Dc=(t,i,n,o)=>({width:t,height:i,"font-size":n,borderColor:o});function ja(t,i){1&t&&e.nrm(0,"lucide-icon",5)}function Oc(t,i){if(1&t&&(e.qex(0),e.j41(1,"div",2),e.nrm(2,"img",3),e.nI1(3,"mycdn"),e.DNE(4,ja,1,0,"lucide-icon",4),e.k0s(),e.bVm()),2&t){let n;const o=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(8,Ra,o.size+"px",o.size+"px")),e.R7$(),e.FS9("matTooltip",o.showTooltip?o.customTooltip?o.customTooltip:o.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!o.showTooltip||!o.customTooltip&&!o.nameCreateAvatar)("src",e.bMT(3,6,o.linkAvatar),e.B4B)("ngStyle",e.sMw(11,Gc,o.size+"px",o.size+"px",null!==(n=o.borderAvatar)&&void 0!==n?n:"")),e.R7$(2),e.Y8G("ngIf",o.showCheckUser)}}function Ma(t,i){1&t&&e.nrm(0,"lucide-icon",5)}function Xi(t,i){if(1&t&&(e.j41(0,"div",6),e.EFF(1),e.DNE(2,Ma,1,0,"lucide-icon",4),e.k0s()),2&t){let n;const o=e.XpG();e.FS9("matTooltip",o.showTooltip?o.customTooltip?o.customTooltip:o.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!o.showTooltip||!o.customTooltip&&!o.nameCreateAvatar)("ngStyle",e.ziG(5,Dc,o.size+"px",o.size+"px",(o.size/2>48?48:o.size/2)+"px",null!==(n=o.borderAvatar)&&void 0!==n?n:"")),e.R7$(),e.SpI(" ",o.returnNameAvatar," "),e.R7$(),e.Y8G("ngIf",o.showCheckUser)}}let $o=(()=>{var t;class i extends Ae.H{createNewAvatar(){try{this.nameCreateAvatar=this.homeworkExamService.removeInvalidChars(this.nameCreateAvatar).trim()}catch{this.nameCreateAvatar=this.nameCreateAvatar}var r=this.commonService.convertVietnameseToEnglish(this.nameCreateAvatar??"").toUpperCase().split(" ");this.returnNameAvatar=1==r.length?r[0]?r[0].charAt(0):"A":r[0]?.charAt(0)+(r[r.length-1]?.charAt(0)??"")}ngOnInit(){this.createNewAvatar()}ngOnChanges(){this.createNewAvatar()}constructor(o){super(),(0,f.A)(this,"homeworkExamService",void 0),(0,f.A)(this,"nameCreateAvatar",void 0),(0,f.A)(this,"linkAvatar",void 0),(0,f.A)(this,"size",0),(0,f.A)(this,"customTooltip",void 0),(0,f.A)(this,"showTooltip",!0),(0,f.A)(this,"showCheckUser",!1),(0,f.A)(this,"borderAvatar",""),(0,f.A)(this,"returnNameAvatar",""),this.homeworkExamService=o}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(Kr))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["azt-create-avatar"]],inputs:{nameCreateAvatar:"nameCreateAvatar",linkAvatar:"linkAvatar",size:"size",customTooltip:"customTooltip",showTooltip:"showTooltip",showCheckUser:"showCheckUser",borderAvatar:"borderAvatar"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["elseTemplate",""],[4,"ngIf","ngIfElse"],[3,"ngStyle"],[1,"border","border-slate-200","dark:border-darkmode-400",2,"border-radius","50%",3,"matTooltip","matTooltipDisabled","src","ngStyle"],["name","check","size","11","class","check-user-icon stroke-width-2.5","strokeWidth","2",4,"ngIf"],["name","check","size","11","strokeWidth","2",1,"check-user-icon","stroke-width-2.5"],["id","create-avatar",1,"create-avatar-class","border","border-slate-200","dark:border-darkmode-400",2,"display","inline-flex","justify-content","center","align-items","center","background-color","#dddddd","border-radius","50%","color","#000","font-weight","500","margin","auto",3,"matTooltip","matTooltipDisabled","ngStyle"]],template:function(o,r){if(1&o&&e.DNE(0,Oc,5,15,"ng-container",1)(1,Xi,3,10,"ng-template",null,0,e.C5r),2&o){const l=e.sdS(2);e.Y8G("ngIf",r.linkAvatar)("ngIfElse",l)}},dependencies:[V.bT,V.B3,nn.oV,St.WGl,Ee.nf],styles:[".check-user-icon[_ngcontent-%COMP%]{align-items:center;height:13px;width:13px;position:absolute;justify-content:center;bottom:-4px;right:0;background:#65ce8c;border-radius:50%;color:#fff}.check-user-icon[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin-bottom:8px;stroke-width:4.5px!important}.w-content[_ngcontent-%COMP%]{margin-left:10px;width:calc(100% - 46px)}.mw-name[_ngcontent-%COMP%]{max-width:calc(100% - 12px - .25rem)}"]})),i})();const It=()=>({"mr-2":!0}),Vc=(t,i)=>({"pl-2":t,"px-2":i}),zc=t=>({"max-width":t}),Vn=t=>[t],Bc=t=>({return_url:t,from:"register",user_click:"true"}),$a=t=>({return_url:t,user_click:"true"});function Qr(t,i){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"button",7),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.gotoLogin())}),e.nrm(2,"lucide-icon",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dang_nhap")," "))}function Pc(t,i){if(1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"isParentViewOnly"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"")?e.bMT(3,3,"lang_auto_phu_huynh"):null!=n.userObj&&null!=n.userObj.roles&&n.userObj.roles.includes("TEACHER")?e.bMT(4,5,"lang_auto_giao_vien"):e.bMT(5,7,"lang_auto_hoc_sinh")," ")}}function Yi(t,i){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Pc,6,9,"div",16),e.k0s()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.l_i(6,Vc,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(9,zc,n.isTqbDomain&&n.isMobileWebView?"80px":"auto")),e.R7$(),e.SpI(" ",n.isAnonymous?e.bMT(3,4,"lang_auto_tai_khoan_an_danh"):null==n.userObj?null:n.userObj.fullName," "),e.R7$(2),e.Y8G("ngIf",!n.isTqbDomain)}}function Hi(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",9),e.bIt("mouseenter",function(){e.eBV(n);const r=e.XpG();return e.Njj(null==r.mouseEventObj?null:r.mouseEventObj.mouseEnter())})("mouseleave",function(){e.eBV(n);const r=e.XpG();return e.Njj(null==r.mouseEventObj?null:r.mouseEventObj.mouseLeave())}),e.j41(1,"div",10),e.bIt("click",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.isMobileWebView?l.avtClick():!l.isMobileDevice&&r.stopPropagation())}),e.j41(2,"div",11),e.nrm(3,"azt-create-avatar",12),e.k0s(),e.DNE(4,Yi,5,11,"div",13),e.k0s()()}if(2&t){const n=e.XpG(),o=e.sdS(4);e.Y8G("matMenuTriggerFor",n.isMobileWebView?null:o),e.R7$(3),e.Y8G("nameCreateAvatar",null==n.userObj?null:n.userObj.fullName)("size",32)("showTooltip",n.isMobileDevice)("linkAvatar",null==n.userObj?null:n.userObj.avatar),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice||n.isTqbDomain)}}function ap(t,i){if(1&t&&(e.j41(0,"li")(1,"a",24),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",25),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(8,Vn,e.bMT(2,4,"/auth/register")))("queryParams",e.eq3(10,$a,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,It)),e.R7$(),e.SpI(" \xa0",e.bMT(5,6,"lang_auto_dang_ky")," ")}}function Lc(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Uc(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function lp(t,i){if(1&t){const n=e.RV6();e.qex(0),e.DNE(1,ap,6,13,"li",18),e.j41(2,"li")(3,"a",19),e.nI1(4,"navigationLocalize"),e.nrm(5,"lucide-icon",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,Lc,5,5,"li",18)(9,Uc,5,5,"li",18),e.j41(10,"li")(11,"a",20),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.reloadBrowser())}),e.nrm(12,"lucide-icon",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"li"),e.nrm(16,"hr",22),e.k0s(),e.j41(17,"li")(18,"a",23),e.nI1(19,"navigationLocalize"),e.nrm(20,"lucide-icon",8),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.bVm()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(22,Vn,e.bMT(4,12,"/auth/login")))("queryParams",e.eq3(24,Bc,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,It)),e.R7$(),e.SpI(" ",e.bMT(7,14,"lang_auto_dang_nhap")," "),e.R7$(2),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(3),e.Y8G("ngClass",e.lJ4(27,It)),e.R7$(),e.SpI(" ",e.bMT(14,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(28,Vn,e.bMT(19,18,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(30,It)),e.R7$(),e.SpI(" ",e.bMT(22,20,"lang_auto_dang_xuat")," ")}}function Ga(t,i){if(1&t&&(e.j41(0,"li")(1,"a",34),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",35),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(7,Vn,e.bMT(2,3,n.isTeacherDashboard?"/student/classroom/0":"/admin/dashboard"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,It)),e.R7$(),e.SpI(" ",e.bMT(5,5,n.isTeacherDashboard?"lang_auto_vao_man_hoc_sinh":"lang_auto_vao_man_giao_vien")," ")}}function Da(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Oa(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,It)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function Va(t,i){1&t&&(e.j41(0,"li")(1,"a",36),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,Vn,e.bMT(2,3,"/auth/account-setting/0/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,It)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_remove_teacher_role")," "))}function za(t,i){1&t&&(e.j41(0,"li")(1,"a",38),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,Vn,e.bMT(2,3,"/auth/account-setting/1/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,It)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_become_teacher_role")," "))}function di(t,i){if(1&t){const n=e.RV6();e.DNE(0,Ga,6,10,"li",18)(1,Da,5,5,"li",18)(2,Oa,5,5,"li",18)(3,Va,6,10,"li",18)(4,za,6,10,"li",18),e.j41(5,"li")(6,"a",20),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.reloadBrowser())}),e.nrm(7,"lucide-icon",21),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"li"),e.nrm(11,"hr",22),e.k0s(),e.j41(12,"li")(13,"a",30),e.nI1(14,"navigationLocalize"),e.nrm(15,"lucide-icon",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"li")(19,"a",32),e.nI1(20,"navigationLocalize"),e.nrm(21,"lucide-icon",33),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"li")(25,"a",23),e.nI1(26,"navigationLocalize"),e.nrm(27,"lucide-icon",8),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()}if(2&t){const n=e.XpG();e.Y8G("ngIf",n.isTeacherRole),e.R7$(),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(),e.Y8G("ngIf",n.isTeacherDashboard),e.R7$(),e.Y8G("ngIf",!(n.isTeacherRole||n.isTeacherDashboard||n.isBusinessDomain||n.beCreatedStudent)),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,It)),e.R7$(),e.SpI(" ",e.bMT(9,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(31,Vn,e.bMT(14,18,"/auth/login-scan/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(33,It)),e.R7$(),e.SpI(" ",e.bMT(17,20,"lang_auto_qr_dang_nhap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(34,Vn,e.bMT(20,22,"/auth/create-qr-forgot-pass/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(36,It)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_auto_tao_qr_quen_mat_khau")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(37,Vn,e.bMT(26,26,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(39,It)),e.R7$(),e.SpI(" ",e.bMT(29,28,"lang_auto_dang_xuat")," ")}}let pi=(()=>{var t;class i extends Ae.H{set menuTrigger(o){this.mouseEventObj=new ze(o)}avtClick(){this.isMobileWebView&&this.redirectService.redirectToPath(`/auth/account-setting/${this.isTeacherDashboard?0:1}/0`)}gotoLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}reloadBrowser(){var r=this.commonService.getCurrentUrl();if(r.match(/(\?|&)+t=(\d)+/)){var l=r.includes("&t=")?r.replace(/\&t=(\d)+/,"&t="+this.timeService.getCurrentSecond()):r.replace(/\?t=(\d)+/,"?t="+this.timeService.getCurrentSecond());location.replace(l)}else r=r.includes("?")?r+"&t="+this.timeService.getCurrentSecond():r+"?t="+this.timeService.getCurrentSecond(),location.replace(r)}switchModeUI(o){let r=document.getElementById("azota-app-html");this.modeUI=o,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?r&&(r.classList.remove("dark"),r.classList.add("light")):r&&(r.classList.remove("light"),r.classList.add("dark"))}changeAccountStudent(){}ngOnInit(){this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getCurrentUrl(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser(),this.isTeacherRole=this.userService.isTeacherRole(),this.userLoginStateService.loginMessage.subscribe(o=>{this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser()}),super.ngOnInit()}constructor(o,r,l,u,p,_,v){super(),(0,f.A)(this,"router",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"userLoginStateService",void 0),(0,f.A)(this,"timeService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"sAztDialogService",void 0),(0,f.A)(this,"isTeacherDashboard",!0),(0,f.A)(this,"beCreatedStudent",!1),(0,f.A)(this,"mouseEventObj",void 0),(0,f.A)(this,"returnUrl",""),(0,f.A)(this,"userObj",void 0),(0,f.A)(this,"modeUI",""),(0,f.A)(this,"isAnonymous",!1),(0,f.A)(this,"isTeacherRole",!1),this.router=o,this.userService=r,this.browserStorageService=l,this.userLoginStateService=u,this.timeService=p,this.redirectService=_,this.sAztDialogService=v}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(ht.Ix),e.rXU(gt.R),e.rXU(yn.z),e.rXU(rn.X),e.rXU(sp.F),e.rXU(We.m),e.rXU($c))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["header-account-menu"]],viewQuery:function(o,r){if(1&o&&e.GBs(Z.Cp,5),2&o){let l;e.mGM(l=e.lsd())&&(r.menuTrigger=l.first)}},inputs:{isTeacherDashboard:"isTeacherDashboard",beCreatedStudent:"beCreatedStudent"},features:[e.Vt3],decls:10,vars:5,consts:[["loggedIn",""],["accountMenu","matMenu"],["notAnonymous",""],[4,"ngIf","ngIfElse"],[3,"hasBackdrop"],[1,"dropdown-menu","show","relative","w-56",3,"mouseenter","mouseleave"],[1,"dropdown-content"],["azt-track-service","header-account-menu-zWAvNkVhjVM",1,"btn","btn-sm","btn-outline-primary",3,"click"],["name","log-out","size","16",3,"ngClass"],["azt-track-service","header-account-menu-S984kCyEl",3,"mouseenter","mouseleave","matMenuTriggerFor"],["azt-track-service","header-account-menu-_z5kaOQTx",1,"dropdown-toggle","w-full","h-10","rounded-full","flex","trigger-menu",2,"align-items","center",3,"click"],[1,"relative"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"font-medium",3,"ngStyle"],["class","text-xs text-slate-600 -mt-0.5 dark:text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-600","-mt-0.5","dark:text-slate-500"],[4,"ngIf"],["azt-track-service","header-account-menu-eSx-v39GRMc",1,"dropdown-item",3,"routerLink","queryParams"],["azt-track-service","header-account-menu-SEi5xr4uPic",1,"dropdown-item",3,"click"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","header-account-menu-mn5LIp-0AtS",1,"dropdown-item",3,"routerLink"],["azt-track-service","header-account-menu-vlcN2DxtbR2",1,"dropdown-item",3,"routerLink","queryParams"],["name","circle-arrow-right","size","16",3,"ngClass"],["azt-track-service","header-account-menu-iNoUc0CT5wP",1,"dropdown-item",3,"click"],["name","moon","size","16",3,"ngClass"],["azt-track-service","header-account-menu-CI1BdC7HViT",1,"dropdown-item",3,"click"],["name","sun","size","16",3,"ngClass"],["azt-track-service","header-account-menu--T0bM_cz_i7",1,"dropdown-item",3,"routerLink"],["name","scan-line","size","16",3,"ngClass"],["azt-track-service","header-account-menu-XYfAXj_Jl4e",1,"dropdown-item",3,"routerLink"],["name","qr-code","size","16",3,"ngClass"],["azt-track-service","header-account-menu-Q26_sXs6gkC",1,"dropdown-item",3,"routerLink"],["name","arrow-right-left","size","16",3,"ngClass"],["azt-track-service","header-account-menu-VzCUMIT5BDg",1,"dropdown-item",3,"routerLink"],["name","shield-check","size","16",3,"ngClass"],["azt-track-service","header-account-menu-jozmhaRatuz",1,"dropdown-item",3,"routerLink"]],template:function(o,r){if(1&o){const l=e.RV6();e.DNE(0,Qr,5,5,"ng-container",3)(1,Hi,5,6,"ng-template",null,0,e.C5r),e.j41(3,"mat-menu",4,1)(5,"div",5),e.bIt("mouseenter",function(){return e.eBV(l),e.Njj(null==r.mouseEventObj?null:r.mouseEventObj.mouseEnter())})("mouseleave",function(){return e.eBV(l),e.Njj(null==r.mouseEventObj?null:r.mouseEventObj.mouseLeave())}),e.j41(6,"ul",6),e.DNE(7,lp,23,31,"ng-container",3)(8,di,30,40,"ng-template",null,2,e.C5r),e.k0s()()()}if(2&o){const l=e.sdS(2),u=e.sdS(9);e.Y8G("ngIf",!r.userService.isLogin())("ngIfElse",l),e.R7$(3),e.Y8G("hasBackdrop",!1),e.R7$(4),e.Y8G("ngIf",r.isAnonymous)("ngIfElse",u)}},dependencies:[ht.Wk,V.YU,V.bT,V.B3,Z.kk,Z.Cp,$o,St.WGl,Ee.F2,Ee.wp,Ee.hx],encapsulation:2})),i})(),Xc=(()=>{var t;class i{constructor(o){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"globalDataObj",{}),this.commonService=o}setGlobalData(o,r){this.globalDataObj[o]=r}getGlobalData(o){let r=this.globalDataObj[o];if(r)return this.commonService.castJsonToObj(r)}removeGlobalData(o){this.globalDataObj.hasOwnProperty(o)&&delete this.globalDataObj[o]}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(gn.R))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),Yc=(()=>{var t;class i{sendReadNoticeToWebviewOfFlutter(o){(o||!this.sendMarkAsReadToFluter)&&(this.mobileWebviewService.sendSimpleMessage("OPEN_NOTIFICATION"),this.sendMarkAsReadToFluter=!0)}constructor(o){(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sendMarkAsReadToFluter",!1),this.mobileWebviewService=o}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(j))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),Hc=(()=>{var t;class i{constructor(o){(0,f.A)(this,"elementRef",void 0),(0,f.A)(this,"isDisabled",!1),this.elementRef=o}onEnter(){const o=this.elementRef.nativeElement;this.isDisabled=o.offsetWidth==o.scrollWidth}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(e.aKT))}),(0,f.A)(i,"\u0275dir",e.FsC({type:t,selectors:[["","isDisabledTooltip",""]],hostBindings:function(o,r){1&o&&e.bIt("mouseenter",function(){return r.onEnter()})},inputs:{isDisabled:[0,"isDisabledTooltip","isDisabled"]},exportAs:["isDisabled"]})),i})();const Wc=()=>({"notification__icon dark:text-slate-500":!0}),Ba=t=>[t],Pa=t=>({"mt-3":t});function Zc(t,i){1&t&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui"),e.k0s())}function Wi(t,i){if(1&t&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.unreadNotification," ")}}function La(t,i){1&t&&(e.j41(0,"div",18),e.nrm(1,"azt-loading-ui",19),e.k0s())}function Zi(t,i){if(1&t&&(e.j41(0,"div",21),e.eu8(1,22),e.k0s()),2&t){e.XpG(3);const n=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function cp(t,i){1&t&&(e.j41(0,"div",23),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_thong_bao_nao")," "))}function qi(t,i){if(1&t&&e.DNE(0,Zi,2,1,"div",20)(1,cp,3,3,"ng-template",null,3,e.C5r),2&t){const n=e.sdS(2),o=e.XpG(2);e.Y8G("ngIf",o.commonNoticeData.length>0)("ngIfElse",n)}}function es(t,i){if(1&t&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,La,2,0,"div",17)(6,qi,3,2,"ng-template",null,2,e.C5r),e.k0s()()),2&t){const n=e.sdS(7),o=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_thong_bao")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",n)}}function ts(t,i){if(1&t&&(e.qex(0),e.nrm(1,"azt-create-avatar",39),e.bVm()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("linkAvatar",n.senderAvatar)("nameCreateAvatar",n.senderName)("size",48)}}function Ua(t,i){if(1&t&&e.nrm(0,"azt-create-avatar",42),2&t){const n=e.XpG(3).$implicit;e.Y8G("nameCreateAvatar",n.senderName)("size",48)}}function up(t,i){1&t&&(e.nrm(0,"azt-create-avatar",43),e.nI1(1,"coreModConvertCdnLinkOfGitHub")),2&t&&e.Y8G("linkAvatar",e.bMT(1,2,"images/logo.svg"))("size",48)}function dp(t,i){if(1&t&&e.DNE(0,Ua,1,2,"azt-create-avatar",40)(1,up,2,4,"azt-create-avatar",41),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function pp(t,i){if(1&t&&(e.qex(0),e.j41(1,"span",44,6),e.EFF(3),e.k0s(),e.bVm()),2&t){const n=e.sdS(2),o=e.XpG(2).$implicit;e.R7$(),e.FS9("matTooltip",o.senderName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",o.senderName," ")}}function Go(t,i){if(1&t&&(e.j41(0,"span",44,6),e.EFF(2),e.k0s()),2&t){const n=e.sdS(1),o=e.XpG(3).$implicit;e.FS9("matTooltip",o.studentName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",o.studentName," ")}}function qc(t,i){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_re_approved_student_account")," "))}function Jc(t,i){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_bank_question")," "))}function fp(t,i){if(1&t&&e.DNE(0,Go,3,4,"span",45)(1,qc,3,3,"span",46)(2,Jc,3,3,"span",46),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type&&"NEW_REQUEST_REAPPROVE"!=n.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Kc(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.j41(2,"span",48),e.EFF(3),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ","lang_auto_ban_moi_duoc_phan_quyen_cho_lop"," "),e.R7$(2),e.JRh(n.classroomName)}}function Qc(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_cham_diem_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function eu(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function tu(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_co_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_moi_duoc_giao")," ")}}function mp(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_yeu_cau_nop_lai_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function _p(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_thi")," "),e.R7$(3),e.JRh(n.examName)}}function vt(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_bai_thi_moi")," "),e.R7$(3),e.JRh(n.examName)}}function hp(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_bai_thi")," "),e.R7$(3),e.JRh(n.examName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_da_duco_cham_diem")," ")}}function Xa(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit,o=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ban_moi_duoc_phan_quyen_cho")," "),e.R7$(3),e.JRh(o.processNoticeService.getTypeObjNotice(n))}}function nu(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ns(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function gp(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ou(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function os(t,i){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_you")+" "+(n.totalApproved?e.bMT(3,3,"lang_notice_approved")+" "+n.totalApproved+" "+e.bMT(4,5,"lang_notice_question"):"")+(n.totalApproved&&n.totalRejected?", ":" ")+(n.totalRejected?e.bMT(5,7,"lang_notice_rejected")+" "+n.totalRejected+" "+e.bMT(6,9,"lang_notice_question"):"")," ")}}function zn(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_news_feed_notice_has_new")," "),e.R7$(3),e.JRh(n.classroomName)}}function vp(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"b"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,7,"lang_auto_lop")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_auto_khong_chon_duoc_ten_do_da_co_ban_chon_mat")," ")}}function An(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_not_paid_your_current_months_tuition_please_complete_your_tuition")," ")}}function yp(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_some_unfinished_exams_please_complete_them_on_time")," ")}}function bp(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_vang_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function xp(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_co_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function is(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_gui_nhan_xet_den_hoc_sinh")," ",n.classroomName," ")}}function rs(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_thay_doi_trang_thai_hoc_phi_cho_hoc_sinh")," ",n.studentName," ")}}function Ji(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_co_de_thi_moi_duoc_giao_den_hoc_sinh")," ",n.studentName," ")}}function ss(t,i){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"getContentFromCustomBodyNotice"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.E5c(" ",e.bMT(7,7,"lang_core_co_thong_bao_moi_den_hoc_sinh")," ",n.studentName,' "',e.bMT(8,9,n.data),'" ')}}function Cp(t,i){if(1&t&&(e.j41(0,"a",30),e.nI1(1,"navigationLocalize"),e.j41(2,"div",31)(3,"div",32),e.DNE(4,ts,2,3,"ng-container",33)(5,dp,2,2,"ng-template",null,4,e.C5r),e.k0s(),e.j41(7,"div",34)(8,"div",35),e.DNE(9,pp,4,4,"ng-container",33)(10,fp,3,3,"ng-template",null,5,e.C5r),e.j41(12,"div",36),e.EFF(13),e.nI1(14,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.j41(15,"div",37),e.DNE(16,Kc,4,2,"span",38)(17,Qc,5,4,"span",38)(18,eu,5,4,"span",38)(19,tu,7,7,"span",38)(20,mp,5,4,"span",38)(21,_p,5,4,"span",38)(22,vt,5,4,"span",38)(23,hp,7,7,"span",38)(24,Xa,5,4,"span",38)(25,nu,5,4,"span",38)(26,ns,5,4,"span",38)(27,gp,5,4,"span",38)(28,ou,5,4,"span",38)(29,os,7,11,"span",38)(30,zn,6,4,"span",38)(31,vp,12,11,"span",38)(32,An,8,7,"span",38)(33,yp,8,7,"span",38)(34,bp,12,14,"span",38)(35,xp,12,14,"span",38)(36,is,8,8,"span",38)(37,rs,8,8,"span",38)(38,Ji,8,8,"span",38)(39,ss,9,11,"span",38),e.k0s()()()()),2&t){const n=e.sdS(6),o=e.sdS(11),r=e.XpG(),l=r.$implicit,u=r.index,p=e.XpG(2);e.Y8G("routerLink",e.eq3(36,Ba,e.bMT(1,32,p.processNoticeService.getRouterLinkForNoticeObj(l,p.role))))("queryParams",p.processNoticeService.getQueryParamForNoticeObj(l)),e.R7$(2),e.Y8G("ngClass",e.eq3(38,Pa,0!==u)),e.R7$(2),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",n),e.R7$(5),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",o),e.R7$(4),e.SpI(" ",e.bMT(14,34,l.createdAt)," "),e.R7$(3),e.Y8G("ngIf","NEW_ASSIGN"==l.type),e.R7$(),e.Y8G("ngIf","HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_HOMEWORK"==l.type),e.R7$(),e.Y8G("ngIf","RESEND_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM_SUBMIT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM"==l.type),e.R7$(),e.Y8G("ngIf","EXAM_HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==l.type&&(l.totalApproved>0||l.totalRejected>0)),e.R7$(),e.Y8G("ngIf","NEW_CLASSROOM_NEWS"==l.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==l.type),e.R7$(),e.Y8G("ngIf","TUITION_NOT_PAID"==l.type),e.R7$(),e.Y8G("ngIf","DONT_FINISHED_LESSON_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_DONT_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_COMMENT_FOR_YOU"==l.type),e.R7$(),e.Y8G("ngIf","UPDATE_TUITION_PAYMENT"==l.type),e.R7$(),e.Y8G("ngIf","HAS_EXAM_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","CUSTOM_CONTENT_CLASSROOM"==l.type)}}function Sp(t,i){if(1&t&&(e.qex(0),e.DNE(1,Cp,40,40,"a",29),e.bVm()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","NEW_SHARE_PERMISSION"!=n.type)}}function Ya(t,i){if(1&t&&(e.DNE(0,Sp,2,1,"ng-container",24),e.nrm(1,"hr",25),e.j41(2,"div",26),e.nI1(3,"navigationLocalize"),e.j41(4,"div",27)(5,"a",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&t){const n=e.XpG();e.Y8G("ngForOf",n.commonNoticeData),e.R7$(2),e.Y8G("routerLink",e.eq3(7,Ba,e.bMT(3,3,"/notify/"+n.role+"/0/0/0"))),e.R7$(4),e.SpI(" ",e.bMT(7,5,"lang_auto_xem_tat_ca")," ")}}let iu=(()=>{var t;class i extends Ae.H{removeNoticeNumber(){this.frontSAztCommonService.apiFrontCommonMarkNotificationAsReadGet(this.role).subscribe(o=>{1==o.success&&(this.resetNotification(0),this.getHeaderInfo())}),this.isMobileWebView&&this.redirectService.redirectToPath(`/notify/${this.role}/0/0/0`)}resetNotification(o){var r="back_header_infors_"+this.userService.getUserObj().id,l=this.globalService.getGlobalData(r);l&&l.data&&(0==o&&(l.data.unreadNotification=0,this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!0)),this.globalService.setGlobalData(r,this.serializeJson(l)))}reGetNoticeObjs(){var o="back_header_infors_"+this.userService.getUserObj().id;this.globalService.removeGlobalData(o),this.getHeaderInfo()}getHeaderInfo(){var o="back_header_infors_"+this.userService.getUserObj().id,r=this.globalService.getGlobalData(o);r?(this.unreadNotification=r.data?.unreadNotification??0,this.commonNoticeData=r.data?.commonNoticeObjs??[],this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)):(this.initStatusObj(),this.frontSAztCommonService.apiFrontCommonGetHeaderInfoGet(this.role).subscribe(l=>{1==l.success&&(this.unreadNotification=l.data?.unreadNotification??0,this.globalService.setGlobalData(o,this.serializeJson(l)),this.commonNoticeData=l.data?.commonNoticeObjs??new Array,this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getHeaderInfo()}constructor(o,r,l,u,p,_,v){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"frontSAztCommonService",void 0),(0,f.A)(this,"globalService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sAztHeaderNoticeService",void 0),(0,f.A)(this,"role",0),(0,f.A)(this,"commonNoticeData",[]),(0,f.A)(this,"unreadNotification",0),this.processNoticeService=o,this.userService=r,this.frontSAztCommonService=l,this.globalService=u,this.redirectService=p,this.mobileWebviewService=_,this.sAztHeaderNoticeService=v,this.waitDestroy(this.mobileWebviewService.getHeaderReloadNoticeSubscriber().subscribe(()=>{this.reGetNoticeObjs()}))}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(vn),e.rXU(gt.R),e.rXU(on.s1),e.rXU(Xc),e.rXU(We.m),e.rXU(j),e.rXU(Yc))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["header-notice-box"]],inputs:{role:"role"},features:[e.Vt3],decls:9,vars:6,consts:[["notification","matMenu"],["listNoticeBox",""],["doneLoading",""],["noNotification",""],["otherTemplate",""],["notSharePermission",""],["c","isDisabled"],["azt-track-service","header-notice-box-DtIJA3xWHnn",1,"dropdown-toggle","notification","cursor-pointer","relative",3,"click","matMenuTriggerFor"],["name","bell","size","24",3,"ngClass"],["class","w-3 h-3 mx-auto inline-block",4,"ngIf"],["class","absolute bg-danger text-white rounded-full font-bold","style","top: -5px; right: -5px; font-size: 7px; overflow: hidden; width: 15px; height: 15px; line-height: 15px; text-align: center",4,"ngIf"],["class","notification-content dropdown-menu show relative pt-2",4,"ngIf"],[1,"w-3","h-3","mx-auto","inline-block"],[1,"absolute","bg-danger","text-white","rounded-full","font-bold",2,"top","-5px","right","-5px","font-size","7px","overflow","hidden","width","15px","height","15px","line-height","15px","text-align","center"],[1,"notification-content","dropdown-menu","show","relative","pt-2"],[1,"notification-content__box","dropdown-content",2,"padding","10px"],[1,"notification-content__title"],["class","w-4 h-4 mx-auto mb-4",4,"ngIf","ngIfElse"],[1,"w-4","h-4","mx-auto","mb-4"],["type","bootstrap-spinner"],["class","notice-azt",4,"ngIf","ngIfElse"],[1,"notice-azt"],[3,"ngTemplateOutlet"],[1,"w-full","text-center","text-slate-500","mt-0.5","mb-4"],[4,"ngFor","ngForOf"],[1,"dropdown-divider","border-gray/[0.08]","mt-3"],["azt-track-service","header-notice-box-m_8Z0tdYOsZ",1,"clickable","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"routerLink"],[1,"text-center","p-3"],[1,"text-primary","text-center"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams"],[1,"cursor-pointer","dropdown-item","relative","flex","items-center",3,"ngClass"],[1,"w-12","h-12","flex-none","image-fit","mr-1"],[4,"ngIf","ngIfElse"],[1,"ml-2","overflow-hidden","w-full"],[1,"flex","items-center"],[1,"text-xs","text-slate-400","ml-auto","whitespace-nowrap"],[1,"text-slate-500","mt-0.5"],[4,"ngIf"],[3,"linkAvatar","nameCreateAvatar","size"],[3,"nameCreateAvatar","size",4,"ngIf"],[3,"linkAvatar","size",4,"ngIf"],[3,"nameCreateAvatar","size"],[3,"linkAvatar","size"],[1,"font-medium","truncate","mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","font-medium truncate mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],["class","font-medium mr-5",4,"ngIf"],[1,"font-medium","mr-5"],[1,"notify__name"]],template:function(o,r){if(1&o){const l=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){return e.eBV(l),e.Njj(r.statusObj.loading?"":r.removeNoticeNumber())}),e.nrm(1,"lucide-icon",8),e.DNE(2,Zc,2,0,"div",9)(3,Wi,2,1,"div",10),e.k0s(),e.j41(4,"mat-menu",null,0),e.DNE(6,es,8,5,"div",11),e.k0s(),e.DNE(7,Ya,8,9,"ng-template",null,1,e.C5r)}if(2&o){const l=e.sdS(5);e.Y8G("matMenuTriggerFor",r.isMobileWebView?null:l),e.R7$(),e.Y8G("ngClass",e.lJ4(5,Wc)),e.R7$(),e.Y8G("ngIf",r.statusObj.loading),e.R7$(),e.Y8G("ngIf",r.unreadNotification&&!r.statusObj.loading),e.R7$(3),e.Y8G("ngIf",!r.isMobileWebView)}},dependencies:[ht.Wk,V.YU,V.Sq,V.bT,V.T3,Z.kk,Z.Cp,nn.oV,$o,Hc,we.R,St.WGl,Ee.F2,Ee.wp,Ee.Vs,Ee.bH,Ee.OR],encapsulation:2})),i})();const Ha=["*"],Ki=()=>({"mr-1":!0}),Gt=t=>[t],as=()=>({"text-white transform -rotate-90":!0});function Le(t,i){1&t&&e.SdG(0)}function ru(t,i){if(1&t&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.headerTitle," ")}}function su(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div")(3,"button",13),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.goBack())}),e.nrm(4,"lucide-icon",14),e.j41(5,"span",15),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()(),e.j41(8,"div",16)(9,"span",17),e.EFF(10),e.k0s()(),e.j41(11,"div",12)(12,"div",18),e.nrm(13,"azt-switch-language"),e.k0s(),e.j41(14,"div",18),e.nrm(15,"header-notice-box",19),e.k0s(),e.j41(16,"div",20),e.nrm(17,"header-account-menu",21),e.k0s()()(),e.DNE(18,ru,2,1,"div",22),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngClass",e.lJ4(8,Ki)),e.R7$(2),e.JRh(e.bMT(7,6,"lang_auto_quay_lai")),e.R7$(4),e.JRh(n.headerTitle),e.R7$(5),e.Y8G("role",0),e.R7$(2),e.Y8G("isTeacherDashboard",!0),e.R7$(),e.Y8G("ngIf",n.headerTitle)}}function Wa(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeMenuMobile())}),e.j41(3,"div",35),e.nrm(4,"lucide-icon",50),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(6,Gt,e.bMT(2,2,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(7,4,"lang_document_market_title")))}function au(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"a",26),e.nI1(3,"navigationLocalize"),e.nrm(4,"img",27),e.nI1(5,"getLinkLogo"),e.k0s(),e.j41(6,"a",28),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.openMenuMobile())}),e.nrm(7,"lucide-icon",29),e.k0s()(),e.j41(8,"div",30)(9,"a",31),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.nrm(10,"lucide-icon",32),e.k0s(),e.j41(11,"ul",33)(12,"li")(13,"a",34),e.nI1(14,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.j41(15,"div",35),e.nrm(16,"lucide-icon",36),e.k0s(),e.j41(17,"div",37),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()(),e.j41(20,"li")(21,"a",38),e.nI1(22,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.j41(23,"div",35),e.nrm(24,"lucide-icon",39),e.k0s(),e.j41(25,"div",37),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()(),e.j41(28,"li")(29,"a",40),e.nI1(30,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.j41(31,"div",35),e.nrm(32,"lucide-icon",41),e.k0s(),e.j41(33,"div",37),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"li")(37,"a",42),e.nI1(38,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.j41(39,"div",35),e.nrm(40,"lucide-icon",43),e.k0s(),e.j41(41,"div",37),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",44),e.nI1(46,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.j41(47,"div",35),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",37),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,Wa,8,8,"li",46),e.j41(53,"li")(54,"a",47),e.nI1(55,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeMenuMobile())}),e.j41(56,"div",35),e.nrm(57,"lucide-icon",48),e.k0s(),e.j41(58,"div",37),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(45,Gt,e.bMT(3,17,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(5,19,"smallLogo"),e.B4B),e.R7$(3),e.Y8G("ngClass",e.lJ4(47,as)),e.R7$(3),e.Y8G("ngClass",e.lJ4(48,as)),e.R7$(3),e.Y8G("routerLink",e.eq3(49,Gt,e.bMT(14,21,"/admin/dashboard"))),e.R7$(5),e.JRh(e.bMT(19,23,"lang_auto_dashboard")),e.R7$(3),e.Y8G("routerLink",e.eq3(51,Gt,e.bMT(22,25,"/admin/testbank/document-management/1/0/1"))),e.R7$(5),e.SpI(" ",e.bMT(27,27,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(53,Gt,e.bMT(30,29,"/admin/testbank/document-management/0/0/1"))),e.R7$(5),e.JRh(e.bMT(35,31,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(55,Gt,e.bMT(38,33,"/admin/student/manage-classroom/0"))),e.R7$(5),e.JRh(e.bMT(43,35,"lang_auto_quan_ly_lop")),e.R7$(3),e.Y8G("routerLink",e.eq3(57,Gt,e.bMT(46,37,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,39,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(59,Gt,e.bMT(55,41,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(60,43,"lang_cms_business_dashboard_title"))}}function lu(t,i){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",65),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",50),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_document_market_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Gt,e.bMT(3,6,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_document_market_title")))}function cu(t,i){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",66),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",67),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_notice_bank_question")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Gt,e.bMT(3,6,"/admin/question-library/dashboard"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_notice_bank_question")))}function Za(t,i){if(1&t&&(e.j41(0,"nav",51)(1,"a",52),e.nI1(2,"navigationLocalize"),e.nrm(3,"img",27),e.nI1(4,"getLinkLogo"),e.k0s(),e.nrm(5,"div",53),e.j41(6,"ul")(7,"li")(8,"a",54),e.nI1(9,"navigationLocalize"),e.j41(10,"div",55),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",36),e.k0s(),e.j41(13,"div",56),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()(),e.j41(16,"li")(17,"a",57),e.nI1(18,"navigationLocalize"),e.j41(19,"div",55),e.nI1(20,"mytranslate"),e.nrm(21,"lucide-icon",39),e.k0s(),e.j41(22,"div",56),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.j41(25,"li")(26,"a",58),e.nI1(27,"navigationLocalize"),e.j41(28,"div",55),e.nI1(29,"mytranslate"),e.nrm(30,"lucide-icon",41),e.k0s(),e.j41(31,"div",56),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"li")(35,"a",59),e.nI1(36,"navigationLocalize"),e.j41(37,"div",55),e.nI1(38,"mytranslate"),e.nrm(39,"lucide-icon",43),e.k0s(),e.j41(40,"div",56),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()(),e.j41(43,"li",60),e.nI1(44,"mytranslate"),e.j41(45,"a",61),e.nI1(46,"navigationLocalize"),e.j41(47,"div",62),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",56),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,lu,9,12,"li",63)(53,cu,9,12,"li",63),e.j41(54,"li",60),e.nI1(55,"mytranslate"),e.j41(56,"a",64),e.nI1(57,"navigationLocalize"),e.j41(58,"div",62),e.nrm(59,"lucide-icon",48),e.k0s(),e.j41(60,"div",56),e.EFF(61),e.nI1(62,"mytranslate"),e.k0s()()()()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(68,Gt,e.bMT(2,28,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(4,30,"smallLogo"),e.B4B),e.R7$(5),e.Y8G("routerLink",e.eq3(70,Gt,e.bMT(9,32,"/admin/dashboard"))),e.R7$(2),e.FS9("matTooltip",e.bMT(11,34,"lang_auto_dashboard")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(15,36,"lang_auto_dashboard")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(72,Gt,e.bMT(18,38,"/admin/testbank/document-management/1/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(20,40,"lang_auto_bai_tap")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(24,42,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(74,Gt,e.bMT(27,44,"/admin/testbank/document-management/0/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(29,46,"lang_auto_de_thi")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.JRh(e.bMT(33,48,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(76,Gt,e.bMT(36,50,"/admin/student/manage-classroom/0"))),e.R7$(2),e.FS9("matTooltip",e.bMT(38,52,"lang_auto_quan_ly_lop")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(42,54,"lang_auto_quan_ly_lop")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(44,56,"lang_dashboard_teacher_management_box")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(78,Gt,e.bMT(46,58,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,60,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.FS9("matTooltip",e.bMT(55,62,"lang_cms_business_dashboard_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(80,Gt,e.bMT(57,64,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(62,66,"lang_cms_business_dashboard_title"))}}let Do=(()=>{var t;class i extends Ae.H{goBack(){this.commonService.myNavigationBySpecialQueryString(this.headerBackToLink)}openMenuMobile(){document.getElementById("toggle-menu")?.classList.add("mobile-menu--active")}closeMenuMobile(){document.getElementById("toggle-menu")?.classList.remove("mobile-menu--active")}initActiveNav(){this.activeTagHomeUrlList=["/admin/dashboard","/auth/account-setting","/notify","/admin/trash","/admin/testbank/create-website","/admin/testbank/create-website-result","/payment/azo-package","/super-role/","/azota-ads/","/auth/vip-packages","/azota-tools/"],this.activeTagHomeworkUrlList=["/admin/testbank/document-management/1","/admin/testbank/homework-results-list","/admin/testbank/config-homework","/admin/testbank/publish-document/1","/create-homework-success/","/admin/homework/add-new-homework","/admin/homework/mark-exercise"],this.activeTagExamUrlList=["/admin/testbank/matrix-list/","/admin/testbank/document-management/0","/admin/testbank/create-new-document","/admin/testbank/create-tree-document","/admin/testbank/exam-results-list","/admin/testbank/statistic/","/admin/testbank/action-online-offline/","/admin/testbank/analyze-knowledge/","/admin/testbank/config-exam-online","/admin/testbank/publish-document/0","/admin/testbank/add-student","/admin/testbank/test-review","/admin/testbank/create-exam-by-excel/","/admin/testbank/create-manual-offline-exam/","/admin/testbank/config-exam-offline/","/admin/testbank/update-exam/","/admin/testbank/update-offline-exam-code/","/admin/testbank/test-result-tracking/","/admin/testbank/download-file-print/","/admin/testbank/print-exam-and-ticket/","/admin/test-market/introduce","/admin/testbank/update-offline-exam","/admin/testbank/ai-create-exam/","/admin/testbank/create-exam-by-text/","/ladingpage/","/admin/testbank/update-capacity-exam","/admin/testbank/create-capacity-exam"],this.activeTagQuestionLibraryUrlList=["/admin/question-library/"],this.activeTagClassroomUrlList=["/admin/student"],this.activeTagGroupUrlList=["/admin/teacher-group"],this.activeTagDocumentMarketUrlList=["/document-market/"],this.activeTagBusinessUrlList=["/business/"],this.activeTagBusinessTableUrlList=["/table-honored"]}ngOnInit(){super.ngOnInit(),this.initActiveNav()}constructor(o,r,l){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"headerBackToLink",""),(0,f.A)(this,"headerTitle",""),(0,f.A)(this,"checkBackDialog",!1),(0,f.A)(this,"handleBackDialog",new e.bkB),(0,f.A)(this,"activeTagHomeUrlList",[]),(0,f.A)(this,"activeTagHomeworkUrlList",[]),(0,f.A)(this,"activeTagExamUrlList",[]),(0,f.A)(this,"activeTagClassroomUrlList",[]),(0,f.A)(this,"activeTagGroupUrlList",[]),(0,f.A)(this,"activeTagDocumentMarketUrlList",[]),(0,f.A)(this,"activeTagQuestionLibraryUrlList",[]),(0,f.A)(this,"activeTagBusinessUrlList",[]),(0,f.A)(this,"activeTagBusinessTableUrlList",[]),this.processNoticeService=o,this.userService=r,this.browserStorageService=l}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(vn),e.rXU(gt.R),e.rXU(yn.z))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["teacher-layout"]],inputs:{headerBackToLink:"headerBackToLink",headerTitle:"headerTitle",checkBackDialog:"checkBackDialog"},outputs:{handleBackDialog:"handleBackDialog"},features:[e.Vt3],ngContentSelectors:Ha,decls:18,vars:4,consts:[["BodyContentTpl",""],["TopBarTpl",""],["mobileMenuTpl",""],["DesktopMenuTpl",""],["id","azt-layout",1,"azt-layout"],[1,"azt-body"],[3,"ngTemplateOutlet"],[1,"flex","mt-[4.7rem]","md:mt-0"],[1,"content","relative"],[1,"top-bar"],[1,"azt-content"],[1,"block","w-full"],[1,"flex","items-center"],["azt-track-service","teacher-layout-txPc6qxNl",1,"btn","btn-transparent",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[1,"azt-hidden","sm:block"],[1,"font-medium","flex-one","text-center"],[1,"azt-hidden","md:block"],[1,"dropdown","mr-2","sm:mr-4"],[3,"role"],[1,"dropdown","header-account-menu"],[3,"isTeacherDashboard"],["class","block md:hidden text-center pt-2 pb-2 font-medium",4,"ngIf"],[1,"block","md:hidden","text-center","pt-2","pb-2","font-medium"],["id","toggle-menu",1,"mobile-menu","md:hidden"],[1,"mobile-menu-bar"],["azt-track-service","teacher-layout-eJLgd2yvySJ",1,"flex","mr-auto",3,"routerLink"],["alt","Azota",1,"w-10",3,"src"],["azt-track-service","teacher-layout-kPh_SLquONL",1,"mobile-menu-toggler",3,"click"],["name","bar-chart-2","size","20",3,"ngClass"],[1,"scrollable"],["azt-track-service","teacher-layout-p3XQvJS7FuD",1,"mobile-menu-toggler",3,"click"],["name","circle-x","size","32",3,"ngClass"],[1,"scrollable__content","py-2"],["azt-track-service","teacher-layout-67rbSb3dLPU",1,"menu",3,"click","routerLink"],[1,"menu__icon"],["name","house","size","24"],[1,"menu__title"],["azt-track-service","teacher-layout-J8TmW2BMwsH",1,"menu",3,"click","routerLink"],["name","file-text","size","24"],["azt-track-service","teacher-layout-U1Xi4mAqmKv",1,"menu",3,"click","routerLink"],["name","folder","size","24"],["azt-track-service","teacher-layout-nV8vMAnzV7_",1,"menu",3,"click","routerLink"],["name","layers","size","24"],["azt-track-service","teacher-layout-27U-GtoLLKH",1,"menu",3,"click","routerLink"],["name","users","size","24"],[4,"ngIf"],["azt-track-service","teacher-layout-QY_BVpu7d",1,"menu",3,"click","routerLink"],["name","plug","size","24",2,"transform","rotate(45deg)"],["azt-track-service","teacher-layout-bYWbXjGnRw",1,"menu",3,"click","routerLink"],["name","book-open","size","24"],[1,"side-nav","side-nav--simple"],["azt-track-service","teacher-layout-VhZ51QnFiPG",1,"flex","items-center","pl-5","pt-4","relative",3,"routerLink"],[1,"side-nav__devider","my-6"],["azt-track-service","teacher-layout-qPpeOjyQiU6",1,"side-menu",3,"routerLink"],[1,"side-menu__icon",3,"matTooltip","matTooltipPosition"],[1,"side-menu__title"],["azt-track-service","teacher-layout-JuqCTNWN4XT",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-tB87TxUcBLf",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-FmXRsM0ZL-Y",1,"side-menu",3,"routerLink"],[3,"matTooltip","matTooltipPosition"],["azt-track-service","teacher-layout-dUjdIyx6m3F",1,"side-menu",3,"routerLink"],[1,"side-menu__icon"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["azt-track-service","teacher-layout-Qn0hMZhPEp",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-hn8q-bW1M",1,"side-menu",3,"routerLink"],[1,"side-menu",3,"routerLink"],["name","landmark","size","24"]],template:function(o,r){if(1&o&&(e.NAR(),e.j41(0,"div",4)(1,"div",5),e.eu8(2,6),e.j41(3,"div",7),e.eu8(4,6),e.j41(5,"div",8)(6,"div",9),e.eu8(7,6),e.k0s(),e.j41(8,"div",10),e.eu8(9,6),e.k0s()()()()(),e.DNE(10,Le,1,0,"ng-template",null,0,e.C5r)(12,su,19,9,"ng-template",null,1,e.C5r)(14,au,61,61,"ng-template",null,2,e.C5r)(16,Za,63,82,"ng-template",null,3,e.C5r)),2&o){const l=e.sdS(11),u=e.sdS(13),p=e.sdS(15),_=e.sdS(17);e.R7$(2),e.Y8G("ngTemplateOutlet",p),e.R7$(2),e.Y8G("ngTemplateOutlet",_),e.R7$(3),e.Y8G("ngTemplateOutlet",u),e.R7$(2),e.Y8G("ngTemplateOutlet",l)}},dependencies:[ht.Wk,V.YU,V.bT,V.T3,nn.oV,pt,St.WGl,pi,iu,Ee.F2,Ee.wp,Ee.ph],encapsulation:2})),i})();function po(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.create())}),e.nrm(2,"i",7),e.EFF(3," Create new App "),e.k0s()()}}function fo(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",13)(1,"button",14),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.edit(r))}),e.nrm(2,"i",15),e.k0s()()}}function mo(t,i){if(1&t&&(e.j41(0,"div",8)(1,"a",9)(2,"div",10),e.nrm(3,"i"),e.j41(4,"div",11),e.EFF(5),e.k0s()()(),e.DNE(6,fo,3,0,"div",12),e.k0s()),2&t){const n=i.$implicit,o=i.index,r=e.XpG(2);e.BMQ("touranchor","azt-tour-"+(o+1)),e.R7$(),e.Mz_("href","/vi/admin/ai/app/",n.id,"",e.B4B),e.R7$(2),e.ZvI("",n.icon," text-4xl"),e.R7$(2),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngIf",r.isAdmin)}}function Qi(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,po,4,0,"div",2),e.j41(2,"div",3),e.DNE(3,mo,7,8,"div",4),e.k0s()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.isAdmin),e.R7$(2),e.Y8G("ngForOf",n.listApp)}}function er(t,i){if(1&t){const n=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.editFlow())}),e.EFF(1,"Flow"),e.k0s()}}function _o(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",17)(2,"label",18),e.EFF(3,"App Name"),e.k0s(),e.j41(4,"input",19),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.name,r)||(l.curApp.name=r),e.Njj(r)}),e.k0s()(),e.j41(5,"div",17)(6,"label",18),e.EFF(7,"Run Async"),e.k0s(),e.j41(8,"input",20),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.pinTaskbar,r)||(l.curApp.pinTaskbar=r),e.Njj(r)}),e.k0s()(),e.j41(9,"div",17)(10,"label",18),e.EFF(11,"Description"),e.k0s(),e.j41(12,"textarea",21),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.desc,r)||(l.curApp.desc=r),e.Njj(r)}),e.k0s()(),e.j41(13,"div",17)(14,"label",18),e.EFF(15,"Icon"),e.k0s(),e.j41(16,"input",22),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.icon,r)||(l.curApp.icon=r),e.Njj(r)}),e.k0s()(),e.j41(17,"div",23)(18,"button",24),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.close())}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",24),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.copyApp())}),e.EFF(21,"Copy"),e.k0s(),e.j41(22,"button",25),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.deleteApp())}),e.EFF(23,"Delete"),e.k0s(),e.j41(24,"button",24),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.shareApp())}),e.EFF(25),e.k0s(),e.DNE(26,er,2,0,"button",26),e.j41(27,"button",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.save())}),e.EFF(28),e.k0s()()()}if(2&t){let n;const o=e.XpG(2);e.R7$(4),e.R50("ngModel",o.curApp.name),e.R7$(4),e.R50("ngModel",o.curApp.pinTaskbar),e.R7$(4),e.R50("ngModel",o.curApp.desc),e.R7$(4),e.R50("ngModel",o.curApp.icon),e.R7$(9),e.JRh(o.curApp.share&&o.curApp.share>0?"Remove from Shared":"Share"),e.R7$(),e.Y8G("ngIf",null!==(n=null==o.curApp?null:o.curApp.id)&&void 0!==n&&n),e.R7$(),e.Y8G("disabled",o.saving),e.R7$(),e.JRh(o.curApp.id>0?"Save":"Create App")}}function kp(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,_o,29,8,"div",0),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curApp)}}let qa=(()=>{var t;class i extends Ae.H{constructor(o,r,l){super(),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"isAdmin",!1),(0,f.A)(this,"isPasting",!1),(0,f.A)(this,"listApp",[]),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"saving",!1),this.auth=o,this.userSv=r,this.appService=l}ngOnInit(){var o=this;document.addEventListener("paste",function(){var r=(0,he.A)(function*(l){if(!o.isPasting){o.isPasting=!0;try{o.listApp.push({icon:"bx bx-loader-circle",name:"Creating..."});const u=yield navigator.clipboard.readText();if(u.indexOf('"icon"')>0&&u.indexOf('"config"')>0){l.preventDefault();let p=JSON.parse(u);o.appService.save(p).subscribe(_=>{o.isPasting=!1,o.loadApp()})}}catch(u){o.isPasting=!1,console.error("Failed to read from clipboard: ",u)}}});return function(l){return r.apply(this,arguments)}}()),this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),r=>{this.loadApp()})}loadApp(){this.isAdmin=1==this.userSv.getUserObj().id,this.isAdmin?this.appService.getList().subscribe(o=>{this.listApp=o}):this.appService.getListShare().subscribe(o=>{this.listApp=o})}edit(o){this.curApp=o}create(){this.curApp={id:0,config:"[]",name:"",icon:""}}editFlow(){window.location.href="/vi/admin/ai/flow/"+this.curApp.id}save(){this.curApp&&(this.saving=!0,this.appService.save(this.curApp).subscribe(o=>{0==this.curApp.id?window.location.href="/vi/admin/ai/flow/"+o.data:(this.saving=!1,this.close(),this.loadApp())}))}close(){this.curApp=void 0}deleteApp(){this.curApp&&confirm(`Delete this app? [${this.curApp.name}]`)&&this.appService.delete(this.curApp).subscribe(o=>{this.close(),this.loadApp()})}copyApp(){var o=this;return(0,he.A)(function*(){if(!o.curApp)return;let r=JSON.parse(JSON.stringify(o.curApp));r.id=0;try{yield navigator.clipboard.writeText(JSON.stringify(r))}catch(l){console.error("Failed to copy text: ",l)}})()}shareApp(){this.curApp&&confirm(`Share this app to Public Library mean everyone can access it. Do you want to share? [${this.curApp.name}]`)&&(this.curApp.share=this.curApp.share&&this.curApp.share>0?0:1,this.appService.share(this.curApp).subscribe(o=>{alert("Share successful! We will review you app soon.")}))}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(Pt.u),e.rXU(gt.R),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[4,"ngIf"],["class","box p-3 w-1/2 mx-auto mt-3",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-4 md:col-span-2 intro-y h-full",4,"ngFor","ngForOf"],[1,"text-center"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bx","bx-plus","mr-2"],[1,"col-span-4","md:col-span-2","intro-y","h-full"],["azt-track-service","dashboard-main-rF6MSAArUsY",3,"href"],[1,"box","p-8","zoom-in","h-full","text-center"],[1,"font-medium","text-center","text-base","mt-3"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],[1,"p-0",3,"click"],[1,"bx","bx-pencil"],[1,"box","p-3","w-1/2","mx-auto","mt-3"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","App Name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","1 or 0",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","bx bx-pencil",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-right"],["type","button",1,"btn","btn-label-secondary","mr-3",3,"click"],["type","button",1,"btn","text-danger","btn-label-secondary","mr-3",3,"click"],["type","button","class","btn btn-label-secondary mr-3",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click","disabled"]],template:function(o,r){1&o&&(e.j41(0,"teacher-layout"),e.DNE(1,Qi,4,2,"div",0)(2,kp,2,1,"div",1),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",!r.curApp),e.R7$(),e.Y8G("ngIf",r.curApp))},dependencies:[Oe.b,Do,V.MD,V.Sq,V.bT,w.YN,w.me,w.BC,w.vS]})),i})();var Oo=function(t){return t.HOMEWORK="homework",t.EXAM_QUESTIONS="exam_questions",t.GET_PUBLIC_UPLOAD_URL_FOR_ID_NUMBER="get_public_upload_url_for_id_number",t.GET_PUBLIC_UPLOAD_URL_FOR_DOCUMENT_BANK="get_public_upload_url_for_document_bank",t.FRONT_EXAM_MOBILE_QR="front_exam_mobile_qr",t.FRONT_HOMEWORK="front_homework",t.FRONT_EXAM="front_exam",t.AVATAR="avatar",t.BUSINESS_PLUGINS="business_plugins",t.BUSINESS_NEWS="business_news",t.EXAM_EDITOR="exam_editor",t.ADMIN="admin",t.ADMIN_DIGITALIZE="admin_digitalize",t}(Oo||{}),Ja=function(t){return t.ALL="*",t.WORD=".doc, .docx",t.PPT=".ppt, .pptx",t.EXCEL=".xls, .xlsx",t.PDF=".pdf",t.VIDEO="video/*",t.IMAGE="image/*, capture=camera",t.AUDIO="audio/*",t.SYNTHETIC=".doc, .docx, .ppt, .pptx, .xls, .xlsx, .pdf, video/*, image/*, audio/*",t.AZT=".azt",t}(Ja||{}),Ka=function(t){return t.NONE="",t.WMV=".wmv",t}(Ka||{});function tr(t){return/^(?:application\/pdf)$/i.test(t)}function cs(t){return t<=0?0:(t/=1048576,Number(t.toFixed(2)))}const Po={MAX_WIDTH:1280,MAX_HEIGHT:1280,MIME_TYPE:"image/jpeg",QUALITY:.9};function Jt(){return(Jt=(0,he.A)(function*(t){try{return function Vo(t){return/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump|image\/webp)$/i.test(t)}(t.type)?yield function ds(t){return new Promise(i=>{const n=function us(t){const i=t.name,n=i.lastIndexOf(".");return-1!==n&&n>0?i.slice(0,n):i}(t)+".jpeg",o=URL.createObjectURL(t),r=new Image;r.src=o,r.onerror=function(){URL.revokeObjectURL(this.src),i(t)},r.onload=()=>{try{URL.revokeObjectURL(r.src);var l=function du(t,i,n){let o=t.width,r=t.height;return o>r?o>i&&(r=Math.round(r*i/o),o=i):r>n&&(o=Math.round(o*n/r),r=n),{width:o,height:r}}(r,Po.MAX_WIDTH,Po.MAX_HEIGHT);const u=l.width,p=l.height,_=document.createElement("canvas");_.width=u,_.height=p,_.getContext("2d").drawImage(r,0,0,u,p),_.toBlob(g=>{if(null!=g){const y=new File([g],n,{type:g.type});i(y)}else i(t)},Po.MIME_TYPE,Po.QUALITY)}catch{i(t)}}})}(t):t}catch{return t}})).apply(this,arguments)}var Lo=se(1985),sr=se(7673);let Tp=(()=>{var t;class i{result(o){const r=o;return 1===o.success&&o.data&&o.data.content&&(r.data=this.decode(o.data.content)),r}payload(o){return{content:this.encode(o),typeHash:Math.floor(256*Math.random()),keyHash:"U5gleH2CsWW"}}encode(o){const r=JSON.stringify(o),l=new TextEncoder;let u=Math.floor(10*Math.random());const p=l.encode(r);for(let g=0;g<p.length;g++)p[g]=this.hashExtractTemplate[u][p[g]];let _=new Uint8Array(p.length+1);return _.set(p),_[_.length-1]=u,btoa(String.fromCharCode(..._))}decode(o){const r=atob(o).split(""),l=r.pop(),u=new Uint8Array(r.map(g=>g.charCodeAt(0))),p=l?.charCodeAt(0)??0;for(let g=0;g<u.length;g++){const y=this.hashExtractTemplate[p].indexOf(u[g]);u[g]=y}const v=new TextDecoder("utf-8").decode(u);return this.commonService.castJsonToObj(v)}constructor(o){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"hashExtractTemplate",void 0),this.commonService=o,this.hashExtractTemplate=this.commonService.castJsonToObj(this.commonService.getContentHashConfigSystem())??[]}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(gn.R))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var _u=se(8750),Rp=se(9974),hu=se(4360);function _s(t){return(0,Rp.N)((i,n)=>{let o,l,r=!1;const u=()=>{o=i.subscribe((0,hu._)(n,void 0,void 0,p=>{l||(l=new ee.B,(0,_u.Tg)(t(l)).subscribe((0,hu._)(n,()=>o?u():r=!0))),l&&l.next(p)})),r&&(o.unsubscribe(),o=null,r=!1,u())};u()})}var hs=se(1986),mi=se(6697),gs=se(9437),nl=se(7018);let jp=(()=>{var t;class i{constructor(){(0,f.A)(this,"http",(0,e.WQX)(Pe.Qq))}commonPutHttpProgress(o,r,l){return this.http.put(o,l,{headers:r,reportProgress:!0,observe:"events"}).pipe(_s(u=>u.pipe((0,hs.c)(1e3),(0,mi.s)(3))),(0,gs.W)(this.handleError))}commonPutHttp(o,r,l){return this.http.put(o,l,{headers:r}).pipe(_s(u=>u.pipe((0,hs.c)(1e3),(0,mi.s)(3))),(0,nl.H)(),(0,gs.W)(this.handleError))}commonPutHttpWithRetry(o,r,l){return this.http.put(o,l,{headers:r,observe:"response"}).pipe(_s(u=>u.pipe((0,hs.c)(1e3),(0,mi.s)(3))),(0,nl.H)(),(0,gs.W)(this.handleError))}handleError(o){if(o&&401==o.status)var r={success:0,message:"lang_cms_error_un_auth",data:{},code:401};else r=o.error instanceof ErrorEvent?{success:0,message:"lang_cms_error_javascript",data:{},code:999}:{success:0,message:"lang_cms_error_lost_connect_to_server",data:{},code:1e3};return new Lo.c(l=>{l.next(r)})}commonGetHttp(o){return this.http.get(o).pipe(_s(r=>r.pipe((0,hs.c)(1e3),(0,mi.s)(3))),(0,nl.H)(),(0,gs.W)(this.handleError))}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),gu=(()=>{var t;class i extends jp{commonUploadFile(o,r,l){return new Lo.c(u=>{if(!r)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();if(r.size<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=r.type?r.type:"image/jpeg",g=this._commonGetAppendUrl(o,r.name?r.name:"none",r.size.toString(),v,l);g?g.subscribe(y=>{1==y.success?this.commonPutHttp(y?.data?.upload_url??"",this._getHeaderRequest(y.data?.cloudStorageHeaderObjs??[]),r).subscribe(x=>{if(x&&x.hasOwnProperty("success")&&0==x.success)u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete();else{var C=y.data?this.convertServerFileDataToClientFileData(y.data):void 0;u.next({success:1,message:"successful",data:C,code:200}),u.complete()}}):(u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete())}):u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999})})}commonUploadFileProgress(o,r,l){return new Lo.c(u=>{if(!r)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();if(r.size<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=r.type,g=this._commonGetAppendUrl(o,r.name,r.size.toString(),v,l);if(!g)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();g.subscribe(y=>{1==y.success?this.commonPutHttpProgress(y?.data?.upload_url??"",this._getHeaderRequest(y.data?.cloudStorageHeaderObjs??[]),r).subscribe(x=>{if(x.type===Pe.hv.UploadProgress)u.next({type:Pe.hv.UploadProgress,loaded:x.loaded,total:x.total});else if(x.type===Pe.hv.Response)if(x&&x.hasOwnProperty("success")&&0==x.success)u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete();else{let I={success:1,message:"successful",data:y.data?this.convertServerFileDataToClientFileData(y.data):void 0,code:200};u.next(I),u.complete()}else x&&x.hasOwnProperty("success")&&0==x.success&&(u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete())}):(u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete())})})}reactiveUploadBase64ToCdnWithRetry(o,r,l){return r.length<=0||r.indexOf("base64")<=-1?(0,sr.of)({success:1,message:"successfull",data:r,code:200}):new Lo.c(u=>{var p=function Fp(t){var i;i=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(i.length),r=0;r<i.length;r++)o[r]=i.charCodeAt(r);return new Blob([o],{type:n})}(r),y=this._commonGetAppendUrl(o,l??"question-image-cropper-v2.png",p.size.toString(),"image/png","");if(!y)return u.next({success:0,message:"Error upload base64 to cdn!",data:r,code:999}),void u.complete();y.subscribe(x=>{x.success?this.commonPutHttpWithRetry(x.data?.upload_url??"",this._getHeaderRequest(x.data?.cloudStorageHeaderObjs??[]),p).subscribe(C=>{C&&0==C.success?(u.next({success:0,message:"Error upload base64 to cdn!",data:r,code:999}),u.complete()):(u.next({success:1,message:"successful",data:x.data?.url??"",code:200}),u.complete())}):(u.next({success:0,message:"Error upload base64 to cdn!",data:r,code:999}),u.complete())})})}commonUploadLadiPageFile(o,r){return new Lo.c(l=>{let u=o.length;u<=0&&(l.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),l.complete());var v=this._commonGetAppendUrl("website_ladipage",r,u.toString(),"text/html","");if(!v)return l.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void l.complete();v.subscribe(g=>{1==g.success?this.commonPutHttp(g?.data?.upload_url??"",this._getHeaderRequest(g.data?.cloudStorageHeaderObjs??[]),o).subscribe(y=>{if(y&&y.hasOwnProperty("success")&&0==y.success)l.next({success:0,message:y.message,data:void 0,code:y.code}),l.complete();else{let C={success:1,message:"successful",data:g.data?this.convertServerFileDataToClientFileData(g.data):void 0,code:200};l.next(C),l.complete()}}):(l.next({success:0,message:g.message,data:void 0,code:g.code}),l.complete())})})}commonUploadForMarkResult(o,r,l){return new Lo.c(u=>{let p=o.size;if(p<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=this._commonGetAppendUrl("mark_result",r,p.toString(),l,"");if(!v)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();v.subscribe(g=>{1==g.success?this.commonPutHttp(g?.data?.upload_url??"",this._getHeaderRequest(g.data?.cloudStorageHeaderObjs??[]),o).subscribe(y=>{if(y&&y.hasOwnProperty("success")&&0==y.success)u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete();else{let C={success:1,message:"successful",data:g.data?this.convertServerFileDataToClientFileData(g.data):void 0,code:200};u.next(C),u.complete()}}):(u.next({success:0,message:g.message,data:void 0,code:g.code}),u.complete())})})}uploadToVimeoProgress(o,r,l){return!r||r.size<=0||cs(r.size)>2e3?(0,sr.of)({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}):this.commonUploadFile(o,r,l?.qrcode??"")}uploadToCdnQuestionRawMathTypeData(o){return this.commonUploadFile("question_math_type",o,"")}uploadToCdnForHomework(o){return this.commonUploadFile("homework",o,"")}uploadToCdnProgressForExamQuestionContent(o){return this.commonUploadFileProgress("exam_questions",o,"")}uploadToCdnProgressForTestbankQuestionAttachment(o){return this.commonUploadFileProgress("exam_question_attachment",o,"")}uploadToCdnProgressForTestbankPdf(o){return this.commonUploadFileProgress("exam_pdf",o,"")}uploadToCdnProgressForTestbankDocx(o){return this.commonUploadFileProgress("exam_docx",o,"")}uploadToCdnForExamEditor(o){return this.commonUploadFile("exam_editor",o,"")}uploadToCdnProgressForFrontendHomework(o){return this.commonUploadFileProgress("front_homework",o,"")}uploadToCdnProgressForFrontendExam(o){return this.commonUploadFileProgress("front_exam",o,"")}convertServerFileDataToClientFileData(o){return{extension:o.extension,index:void 0,lastModified:void 0,mimes:o.mimes,name:o.name,path:o.path,size:o.size,thumb:void 0,url:o.url,is_video:void 0,video_id:void 0,log_id:void 0,is_vimeo:void 0}}_commonGetAppendUrl(o,r,l,u,p){return"ppt"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForPptPost(this.encryptUploadRequest(r,l,u))):"homework"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForHomeworkPost(this.encryptUploadRequest(r,l,u))):"exam_questions"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamQuestionsPost(this.encryptUploadRequest(r,l,u))):"exam_question_attachment"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamQuestionAttachmentPost(this.encryptUploadRequest(r,l,u))):"exam_pdf"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamPdfPost(this.encryptUploadRequest(r,l,u))):"exam_docx"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamDocxPost(this.encryptUploadRequest(r,l,u))):"exam_editor"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamEditorPost(this.encryptUploadRequest(r,l,u))):"file_scan_test_offline"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMobileScanPost(this.encryptUploadRequest(r,l,u))):"file_scan_name_test_offline"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMobileScanNamePost(this.encryptUploadRequest(r,l,u))):"file_scan_test_error"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForWebScanErrorPost(this.encryptUploadRequest(r,l,u))):"get_public_upload_url_for_id_number"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForIdNumberPost(this.encryptUploadRequest(r,l,u))):"question_math_type"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlExamQuestionsDocxDataPost(this.encryptUploadRequest(r,l,u))):"get_public_upload_url_for_document_bank"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForDocumentBankPost(this.encryptUploadRequest(r,l,u))):"business_news"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForBusinessNewsPost(this.encryptUploadRequest(r,l,u))):"business_plugins"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForBusinessPluginsPost(this.encryptUploadRequest(r,l,u))):"front_homework"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontHomeworkPost(this.encryptUploadRequest(r,l,u))):"front_exam"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontExamPost(this.encryptUploadRequest(r,l,u))):"front_exam_mobile_qr"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontExamMobileQrPost(this.encryptUploadRequestForQrCode(p,r,l,u))):"front_qa_question"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontQaQuestionPost(this.encryptUploadRequest(r,l,u))):"qa_answer"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForQaAnswerPost(this.encryptUploadRequest(r,l,u))):"avatar"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForAvatarPost(this.encryptUploadRequest(r,l,u))):"website_ladipage"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForLadipagePost(this.encryptUploadRequest(r,l,u))):"report_error"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForErrorPost(this.encryptUploadRequest(r,l,u))):"mark_result"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMarkPost(this.encryptUploadRequest(r,l,u))):"admin"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForCommonAdminPost(this.encryptUploadRequest(r,l,u))):"admin_digitalize"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForDigitalizeAdminPost(this.encryptUploadRequest(r,l,u))):void 0}_getHeaderRequest(o){var r={};for(var l of o)null!=l.headerName&&null!=l.headerValue&&(r[l.headerName]=l.headerValue);return r}encryptUploadRequest(o,r,l){let u={fileName:o,fileSize:Number(r),mimetype:l};return this.encryptionHelper.payload(u)}encryptUploadRequestForQrCode(o,r,l,u){let p={fileName:r,fileSize:Number(l),mimetype:u,qrcode:o};return this.encryptionHelper.payload(p)}decryptUploadResponse(o){return new Lo.c(r=>{o.subscribe(l=>{if(!l.success||!l.data){let p={...l,data:void 0};return r.next(p),void r.complete()}let u=this.encryptionHelper.result(l);r.next(u),r.complete()})})}constructor(){super(),(0,f.A)(this,"encryptionHelper",(0,e.WQX)(Tp)),(0,f.A)(this,"s3EncryptSpaceService",(0,e.WQX)(on.TZ))}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();var Mp=se(5682),$p=se(2583);let Gp=(()=>{var t;class i{getImageWithPdf(o){var r=this;return(0,he.A)(function*(){var l=[];try{var u=yield r.pdfToImageDataURLAsync(o);for(let p=0;p<u.length;p++)l.push(r.b64toFile(u[p],`${o.name}_${p}`))}catch{r.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}return l})()}b64toFile(o,r,l){var u="",_=[];try{l?(o=o.replace("data:"+l+";base64,",""),u=l):(o=o.replace("data:image/png;base64,",""),u="image/png");for(var v=window.atob(o),g=0;g<v.length;g+=512){for(var y=v.slice(g,g+512),x=new Array(y.length),C=0;C<y.length;C++)x[C]=y.charCodeAt(C);var I=new Uint8Array(x);_.push(I)}}catch{this.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}return new File(_,r,{type:u})}pdfToImageDataURLAsync(o){var r=this;return(0,he.A)(function*(){return new Promise((l,u)=>{r.loadPdfJsScript().then((0,he.A)(function*(){var p=[];try{const C=yield new Response(o).arrayBuffer(),I=r.document.createElement("canvas"),A=I.getContext("2d"),T=yield pdfjsLib.getDocument(new Uint8Array(C)).promise;for(let E=1;E<=T.numPages;E++){var _=yield T.getPage(E),v=1200/_.getViewport({scale:1}).width,y=_.getViewport({scale:v});I.height=y.height,I.width=y.width;const M={canvasContext:A,viewport:y};yield _.render(M).promise;var x=I.toDataURL();p.push(x)}T?.destroy(),l(p)}catch{r.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}}))})})()}loadPdfJsScript(){var o=this;return(0,he.A)(function*(){return new Promise((r,l)=>{o.commonService.loadScriptPromises([{source:o.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:o.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"}]).then((0,he.A)(function*(){r()})).catch(u=>{l(new Error("lang_core_lib_not_load"))})})})()}constructor(o,r,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"configService",void 0),(0,f.A)(this,"sAztCommonCdnService",void 0),(0,f.A)(this,"document",void 0),this.commonService=o,this.configService=r,this.sAztCommonCdnService=l,this.document=document}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.KVO(gn.R),e.KVO(Mp.u),e.KVO($p.c))}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})();const vu={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let vs;const Dp=new Uint8Array(16);function ol(){if(!vs&&(vs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vs(Dp)}const yt=[];for(let t=0;t<256;++t)yt.push((t+256).toString(16).slice(1));const xu=function bu(t,i,n){if(vu.randomUUID&&!i&&!t)return vu.randomUUID();const o=(t=t||{}).random||(t.rng||ol)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,i){n=n||0;for(let r=0;r<16;++r)i[n+r]=o[r];return i}return function yu(t,i=0){return(yt[t[i+0]]+yt[t[i+1]]+yt[t[i+2]]+yt[t[i+3]]+"-"+yt[t[i+4]]+yt[t[i+5]]+"-"+yt[t[i+6]]+yt[t[i+7]]+"-"+yt[t[i+8]]+yt[t[i+9]]+"-"+yt[t[i+10]]+yt[t[i+11]]+yt[t[i+12]]+yt[t[i+13]]+yt[t[i+14]]+yt[t[i+15]]).toLowerCase()}(o)};let Cu=(()=>{var t;class i{getUuid(){return xu()}getSmallUuid(){let l="";for(let u=0;u<8;u++)l+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*Math.random())];return l}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),Uo=(()=>{var t;class i extends Ae.H{uploadFile(o,r){return new Promise(l=>{this.checkCompressImage(o,u=>{this.fileUploadQueue=[],this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,u,this.qrUploadHashCode).subscribe(p=>{if(p.type!==Pe.hv.UploadProgress)if(1===p.success){const _={...p.data};l(_)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",p.message??"none")),l(null);else{let _=(p.loaded??0)/(p.total??1)*100,v=this.fileUploadQueue.find(g=>g.uuid==r);v?v.uploadProgress=_:this.fileUploadQueue.push({uuid:r,uploadProgress:0,fileName:o.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,u,this.qrUploadHashCode).subscribe(p=>{if(p.type!==Pe.hv.UploadProgress)if(1===p.success){const _={...p.data};l(_)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",p.message??"none")),l(null)})})})}onOpenFileDictionary(){return this.uploadActionsEvent.emit("SELECT_FILE"),!0}onFileSelected(o){this.uploadActionsEvent.emit("SELECTED");const r=o.target,l=r.files;l&&(this.emitFile(l),r.files=null)}onCancelSelect(o){this.uploadActionsEvent.emit("SELECTED")}onDrop(o){this.emitFile(o)}emitFile(o){return this.isDisabled?(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(o).find(u=>cs(u.size)>=this.limitSize)?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB")):Array.from(o).find(u=>this.isNotSupportedFile(u))?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile)):(this.isUploadFile=!0,this.isUploading.emit(this.isUploadFile),void this.checkConvertPdfToImages(Array.from(o),u=>{const p=u.map(_=>this.uploadFile(_,this.uuidService.getUuid()));Promise.all(p).then(_=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);let v=_.filter(this.commonService.notEmpty);this.emitUploadComplete(v)})}))):this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")??"")}checkConvertPdfToImages(o,r){if(!this.convertPdfToImages)return r(o);this.convertAllPdfToImages(o).then(l=>{r(l)})}convertAllPdfToImages(o){var r=this;return new Promise(function(){var l=(0,he.A)(function*(u,p){let _=[];for(let v of o)if(tr(v.type))try{const g=1e3*r.convertPdfTimeout;let y=yield r.withTimeout(r.myPdfService.getImageWithPdf(v),g);_.push(...y)}catch{r.showErrorSnack("lang_common_convert_pdf_to_image_timeout"),u([])}else _.push(v);u(_)});return function(u,p){return l.apply(this,arguments)}}())}checkCompressImage(o,r){this.allowCompressImage?function pu(t){return Jt.apply(this,arguments)}(o).then(l=>{r(l)}):r(o)}isNotSupportedFile(o){const r=[this.notSupportedFile],l=o.name.split(".").pop()?.toLowerCase();return r.includes(`.${l}`)}withTimeout(o,r){return new Promise((l,u)=>{const p=setTimeout(()=>{u(new Error("Operation timed out"))},r);o.then(_=>{clearTimeout(p),l(_)}).catch(_=>{clearTimeout(p),u(_)})})}constructor(o,r,l,u){super(),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"apiUploadService",void 0),(0,f.A)(this,"myPdfService",void 0),(0,f.A)(this,"uuidService",void 0),(0,f.A)(this,"convertPdfTimeout",30),(0,f.A)(this,"fileType",void 0),(0,f.A)(this,"uploadToCdnMenu",void 0),(0,f.A)(this,"isDisabled",!0),(0,f.A)(this,"notSupportedFile",Ka.NONE),(0,f.A)(this,"limitSize",200),(0,f.A)(this,"allowCompressImage",!0),(0,f.A)(this,"convertPdfToImages",!1),(0,f.A)(this,"qrUploadHashCode",""),(0,f.A)(this,"showProgress",!1),(0,f.A)(this,"isUploading",new e.bkB),(0,f.A)(this,"uploadActionsEvent",new e.bkB),(0,f.A)(this,"isUploadFile",!1),(0,f.A)(this,"fileUploadQueue",[]),this.mobileWebviewService=o,this.apiUploadService=r,this.myPdfService=l,this.uuidService=u}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(j),e.rXU(gu),e.rXU(Gp),e.rXU(Cu))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],inputs:{convertPdfTimeout:"convertPdfTimeout",fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",convertPdfToImages:"convertPdfToImages",qrUploadHashCode:"qrUploadHashCode",showProgress:"showProgress"},outputs:{isUploading:"isUploading",uploadActionsEvent:"uploadActionsEvent"},features:[e.Vt3],decls:0,vars:0,template:function(o,r){},encapsulation:2})),i})();const zp=["*"];function Bp(t,i){1&t&&e.SdG(0,0,["*ngIf","!isUploadFile"])}function Pp(t,i){1&t&&(e.j41(0,"span",5),e.nrm(1,"azt-loading-ui"),e.k0s())}let Su=(()=>{var t;class i extends Uo{constructor(...o){super(...o),(0,f.A)(this,"uploadComplete",new e.bkB)}emitUploadComplete(o){o.length>0&&this.uploadComplete.emit(o[0])}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},features:[e.Vt3],ngContentSelectors:zp,decls:6,vars:3,consts:[["formChoseFile",""],[1,"flex","items-center","justify-center","h-full",3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(o,r){if(1&o){const l=e.RV6();e.NAR(),e.j41(0,"div",1),e.bIt("click",function(){e.eBV(l);const p=e.sdS(2);return e.Njj(r.onOpenFileDictionary()&&p.click())}),e.j41(1,"input",2,0),e.bIt("change",function(p){return e.eBV(l),e.Njj(r.onFileSelected(p))})("cancel",function(p){return e.eBV(l),e.Njj(r.onCancelSelect(p))}),e.k0s(),e.DNE(3,Bp,1,0,"ng-content",3),e.j41(4,"div"),e.DNE(5,Pp,2,0,"span",4),e.k0s()()}2&o&&(e.R7$(),e.FS9("accept",r.fileType),e.R7$(2),e.Y8G("ngIf",!r.isUploadFile),e.R7$(2),e.Y8G("ngIf",r.isUploadFile))},dependencies:[V.bT,we.R],encapsulation:2})),i})(),ku=(()=>{var t;class i{constructor(){(0,f.A)(this,"fileDrop",new e.bkB),(0,f.A)(this,"preventBodyDrop",!0),(0,f.A)(this,"active",!1)}onDrop(o){o.preventDefault(),this.active=!1;const{dataTransfer:r}=o;if(r?.items){const l=[];for(let u=0;u<r.items.length;u++)"file"===r.items[u].kind&&r.items[u].getAsFile()&&l.push(r.items[u].getAsFile());r.items.clear(),Array.isArray(l)&&this.fileDrop.emit(this.removeNullFile(l))}else{const l=r?.files;r?.clearData(),l&&this.fileDrop.emit(Array.from(l))}}removeNullFile(o){for(var r=[],l=0;l<o.length;l++)o[l]&&r.push(o[l]);return r}onDragOver(o){o.stopPropagation(),o.preventDefault(),this.active=!0}onDragLeave(o){this.active=!1}onBodyDragOver(o){this.preventBodyDrop&&(o.preventDefault(),o.stopPropagation())}onBodyDrop(o){this.preventBodyDrop&&o.preventDefault()}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275dir",e.FsC({type:t,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(o,r){1&o&&e.bIt("drop",function(u){return r.onDrop(u)})("dragover",function(u){return r.onDragOver(u)})("dragleave",function(u){return r.onDragLeave(u)})("dragover",function(u){return r.onBodyDragOver(u)},!1,e.N_X)("drop",function(u){return r.onBodyDrop(u)},!1,e.N_X),2&o&&e.AVh("drop-zone-active",r.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}})),i})();const ar=["*"];function lr(t,i){1&t&&e.SdG(0,0,["*ngIf","!isUploadFile"])}function Lp(t,i){if(1&t&&(e.j41(0,"div",8)(1,"h5",9),e.EFF(2),e.k0s(),e.j41(3,"div",10),e.nrm(4,"progress",11),e.k0s()()),2&t){const n=i.$implicit;e.R7$(2),e.JRh(n.fileName),e.R7$(2),e.FS9("value",n.uploadProgress)}}function ys(t,i){if(1&t&&(e.qex(0),e.j41(1,"span",6),e.nrm(2,"azt-loading-ui"),e.k0s(),e.DNE(3,Lp,5,2,"div",7),e.bVm()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.fileUploadQueue)}}function Up(t,i){1&t&&(e.j41(0,"span",6),e.nrm(1,"azt-loading-ui"),e.k0s())}function wu(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,ys,4,1,"ng-container",5)(2,Up,2,0,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.showProgress)("ngIfElse",n)}}let bs=(()=>{var t;class i extends Uo{constructor(...o){super(...o),(0,f.A)(this,"uploadComplete",new e.bkB),(0,f.A)(this,"files",void 0)}emitUploadComplete(o){this.uploadComplete.emit(o)}ngOnInit(){this.files&&this.files.length>0&&this.emitFile(this.files)}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["azt-upload-multiple-box"]],inputs:{files:"files"},outputs:{uploadComplete:"uploadComplete"},features:[e.Vt3],ngContentSelectors:ar,decls:5,vars:3,consts:[["formChoseFile",""],["notShowProgress",""],[1,"flex","items-center","justify-center","h-full",3,"appDropZone","click"],["type","file","id","box-left-file-input","multiple","",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"w-4","h-4","inline-block","mr-2"],["class","w-48",4,"ngFor","ngForOf"],[1,"w-48"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","background-color","#1e40af",3,"value"]],template:function(o,r){if(1&o){const l=e.RV6();e.NAR(),e.j41(0,"div",2),e.bIt("appDropZone",function(p){return e.eBV(l),e.Njj(r.onDrop(p))})("click",function(){e.eBV(l);const p=e.sdS(2);return e.Njj(p.click())}),e.j41(1,"input",3,0),e.bIt("change",function(p){return e.eBV(l),e.Njj(r.onFileSelected(p))})("cancel",function(p){return e.eBV(l),e.Njj(r.onCancelSelect(p))})("cancel",function(p){return e.eBV(l),e.Njj(r.onCancelSelect(p))}),e.k0s(),e.DNE(3,lr,1,0,"ng-content",4)(4,wu,4,2,"div",4),e.k0s()}2&o&&(e.R7$(),e.FS9("accept",r.fileType),e.R7$(2),e.Y8G("ngIf",!r.isUploadFile),e.R7$(),e.Y8G("ngIf",r.isUploadFile))},dependencies:[V.Sq,V.bT,ku,we.R],styles:['.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:10px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']})),i})();const xs=(t,i)=>[t,i];let Nu=(()=>{var t;class i extends Ae.H{uploadMultipleFiles(o){console.log(o)}uploadSingleFile(o){console.log(o)}ngOnInit(){super.ngOnInit()}constructor(){super(),(0,f.A)(this,"allUploadToCdnMenuTypes",Oo),(0,f.A)(this,"allUploadFileTypes",Ja)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-demo"]],features:[e.Vt3],decls:10,vars:16,consts:[[1,"p-3","box"],[1,"mb-3"],[3,"uploadComplete","uploadToCdnMenu","fileType","convertPdfTimeout","convertPdfToImages","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2,"Test upload file"),e.k0s(),e.j41(3,"azt-upload-multiple-box",2),e.bIt("uploadComplete",function(u){return r.uploadMultipleFiles(u)}),e.j41(4,"div",3),e.EFF(5,"Upload nhi\u1ec1u file \u1ea2nh, Pdf s\u1ebd convert qua \u1ea3nh"),e.k0s()(),e.nrm(6,"br"),e.j41(7,"azt-upload-single-box",2),e.bIt("uploadComplete",function(u){return r.uploadSingleFile(u)}),e.j41(8,"div",3),e.EFF(9,"Upload 1 file \u1ea3nh, pdf s\u1ebd convert qua \u1ea3nh"),e.k0s()()()),2&o&&(e.R7$(3),e.Y8G("uploadToCdnMenu",r.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(10,xs,r.allUploadFileTypes.IMAGE,r.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!1)("showProgress",!0),e.R7$(4),e.Y8G("uploadToCdnMenu",r.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(13,xs,r.allUploadFileTypes.IMAGE,r.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!0)("showProgress",!0))},dependencies:[Su,bs],encapsulation:2})),i})();var il=se(345);let Cs=(()=>{var t;class i{constructor(o){(0,f.A)(this,"sanitized",void 0),this.sanitized=o}transform(o){return this.sanitized.bypassSecurityTrustHtml(o)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(il.up,16))}),(0,f.A)(i,"\u0275pipe",e.EJ8({name:"safeHtml",type:t,pure:!0,standalone:!0})),i})(),kt=(()=>{var t;class i{constructor(o){(0,f.A)(this,"sanitized",void 0),this.sanitized=o}transform(o,r,l){if(!o)return o;let u=r??200;if(o.length<u)return o;let p=o;return l&&(p=p.replaceAll(l,"")),p.substring(0,u)+"..."}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(il.up,16))}),(0,f.A)(i,"\u0275pipe",e.EJ8({name:"trunc",type:t,pure:!0,standalone:!0})),i})(),Xp=(()=>{var t;class i{transform(o){if(isNaN(o)||o<0)return"00:00";o=Math.round(o);const r=Math.floor(o/60),l=o%60;return`${r<10?"0"+r:r.toString()}:${l<10?"0"+l:l.toString()}`}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275pipe",e.EJ8({name:"secondsToTime",type:t,pure:!0,standalone:!0})),i})();class De{static renderMathInElement(i){MathJax.typesetPromise([i]).then(()=>{})}static markdownToHtml(i){let n=document.createElement("div");n.innerHTML=i;let o=new showdown.Converter({headerLevelStart:3,tables:!0});return MathJax.typesetPromise([n]).then(()=>{}),o.makeHtml(n.innerHTML)}static parseIncompleteJson(i){if(!i||""==i.trim()||!/^[{[].*/.test(i.trim()))return i;i.startsWith("```json")&&(i=i.substring(7).trim()),i.endsWith("```")&&(i=i.substring(0,i.length-3));try{return JSON.parse(i)}catch{}i.endsWith(",")&&(i=i.substring(0,i.length-1));let n=[],o=['"',"[","{"],r=['"',"]","}"];for(let l=0;l<i.length;l++){if(l>0&&"\\"==i.charAt(l-1))continue;let p=i.charAt(l);if('"'==n[n.length-1]){'"'==p&&n.splice(n.length-1);continue}if(o.includes(p)){n.push(p);continue}let _=r.indexOf(p);_>=0&&n[n.length-1]==o[_]&&n.splice(n.length-1)}if(n.length>0)for(let l=n.length-1;l>=0;l--)i+=r[o.indexOf(n[l])];try{return JSON.parse(i)}catch{}return null}static fileToBase64(i){return new Promise((n,o)=>{const r=new FileReader;r.onload=()=>{n(r.result)},r.onerror=()=>{o(new Error("Failed to convert file to Base64."))},r.readAsDataURL(i)})}static base64ToObjectURL(i,n){const o=atob(i),r=[];for(let u=0;u<o.length;u+=512){const p=o.slice(u,u+512),_=new Array(p.length);for(let g=0;g<p.length;g++)_[g]=p.charCodeAt(g);const v=new Uint8Array(_);r.push(v)}const l=new Blob(r,{type:n});return URL.createObjectURL(l)}static distinctArray(i){return Array.from(new Set(i))}static getTextFromMarkdown(i){return i.replace(/(?:__|[*#])|\[(.*?)\]\(.*?\)|<[^>]*>/g,"$1").replace(/\n+/g," ").trim()}static getFileExt(i){let n=i.split(".");return n.length>1?n[n.length-1].trim().toLowerCase():""}static isImageFile(i){if(!i)return!1;const o=i.slice((Math.max(0,i.lastIndexOf("."))||1/0)+1).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff"].includes(`.${o}`)}static parseJson(i){return JSON.parse(i.replaceAll(/},\s*]/g,"}]"))}static minusToCamelCase(i){return i.replace(/-([a-z0-9])/g,(n,o)=>o.toUpperCase())}static replaceAllBase64Urls(i,n=""){return i.replace(/data:(?:image\/\w+|audio\/\w+|video\/\w+);base64,[\w\+/0-9]+(?:=[\w\+/0-9]{2})?(?:=[\w\+/0-9])?/,n)}static loadScript(i){return new Promise((n,o)=>{const r=document.createElement("script");r.src=i,r.type="text/javascript",r.async=!0,r.onload=()=>{n()},r.onerror=l=>{console.error(`Failed to load script from ${i}`,l),o(new Error(`Script load error: ${i}`))},document.head.appendChild(r)})}static downloadTextAsFile(i,n){const o=n??this.getFormattedDate(),r=new Blob([i],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(r),l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l)}static uploadTextFile(i){const n=document.createElement("input");n.type="file",n.accept=".txt",n.addEventListener("change",o=>{const r=o.target;if(!r.files||0===r.files.length)return;const l=r.files[0],u=new FileReader;u.onload=p=>{const _=p.target?.result;i(_)},u.readAsText(l)}),n.click()}static getFormattedDate(){const i=new Date;return`${String(i.getDate()).padStart(2,"0")}-${String(i.getMonth()+1).padStart(2,"0")}-${i.getFullYear()}-${String(i.getHours()).padStart(2,"0")}-${String(i.getMinutes()).padStart(2,"0")}.txt`}static wrapWords(i,n){const o=i.split(" ");let r="",l=0;return o.forEach((u,p)=>{r+=u+" ",l++,l===n&&(r+="\n",l=0)}),r.trim()}static removeVietnameseAccents(i){return i.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}static zipFiles(i,n,o){var r=this;return(0,he.A)(function*(){const l=new JSZip;let u=0;for(const _ of i){if(_.isText)l.file(_.filename,_.url);else{const g=(yield r.fetchUrlAsBase64(_.url)).split(",")[1];l.file(_.filename,g,{base64:!0})}u++,o&&o(u)}return yield l.generateAsync({type:"blob"})})()}static fetchUrlAsBase64(i){return(0,he.A)(function*(){const o=yield(yield fetch(i)).blob();return new Promise((r,l)=>{const u=new FileReader;u.onloadend=()=>r(u.result),u.onerror=l,u.readAsDataURL(o)})})()}static urlToFile(i,n){var o=this;return(0,he.A)(function*(){let l=(yield o.fetchUrlAsBase64(i)).split(",")[1];const u=atob(l);let p=u.length;const _=new Uint8Array(p);for(;p--;)_[p]=u.charCodeAt(p);let v=De.getContentType(n);return new File([_],n,{type:v})})()}static getContentType(i){const n=i.split(".").pop()?.toLowerCase();return n?{txt:"text/plain",script:"text/json",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",mp3:"audio/mpeg",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",zip:"application/zip",rar:"application/x-rar-compressed"}[n]:void 0}static convertToTitleCase(i){return i.toLowerCase().replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}static toCamelCase(i){return De.removeVietnameseAccents(i).replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(n,o)=>0===o?n.toLowerCase():n.toUpperCase()).replace(/[^a-zA-Z0-9]+/g,"")}static createDemoDataForJsonSchema(i){return function o(r){switch(r.type){case"string":return"demo string";case"number":return 42;case"boolean":return!0;case"object":const l={};if(r.properties)for(const u in r.properties)l[u]=o(r.properties[u]);return l;case"array":return[o(r.items)];default:return null}}(JSON.parse(i))}static compileTemplate(i,n){let o=i;const r=[...o.matchAll(/\$\(([a-zA-Z]+):([^\$]+)\)\$/g)],l=[];for(const y of r){o=o.replaceAll(y[0],"").trim();const x=y[2].split("|").map(C=>this.compileTemplate(C.trim(),n));for(let C=0;C<x[0].length;C++){const I=[],A=[];for(const T of x)A.push(T[C]);I.push(y[1].trim()),I.push(...A),l.push(I)}}o=o.replaceAll(/\*for="([a-zA-Z0-9_-]+) of \{([a-zA-Z0-9._-]+)\}"/g,'id="sys___loop-node" data-for="$2=>$1"'),o=o.replaceAll(/\*for="([a-zA-Z0-9_-]+) of ([a-zA-Z0-9._-]+)"/g,'id="sys___loop-node" data-for="$2=>$1"');let u=document.createElement("div");for(u.innerHTML=o;;){let y=u.querySelector("#sys___loop-node");if(!y)break;let x=y.getAttribute("data-for").split("=>");y.removeAttribute("data-for"),y.removeAttribute("id");let C=x[0],I=x[1],A=x[0].split("."),T=[];if(1==A.length)T=JSON.parse(n.get(x[0])??"[]");else{let Y=JSON.parse(n.get(A[0]));for(var p=1;p<A.length;p++)Y=Y[A[p]];T=Y??[]}let E=y.parentNode,M=y.outerHTML,O=M.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),$=[];for(let Y of O)$.push(Y[1]);let X=-1;for(let Y of T){X++;let U=M;for(let H of $){if("index"==H){U=U.replaceAll("{index}",X+"");continue}let ie,ue=H.split(".");for(let de of ue){if(!ie&&de==x[1]){ie=Y;continue}let le=!1;de.endsWith("[index]")&&(de=de.split("[")[0],le=!0),ie&&(ie=ie[de]),ie&&le&&(ie=ie[X])}ie||(ie=""),U=U.replaceAll(`{${H}}`,ie)}U=U.replaceAll("[index]",`[${X}]`),U=U.replaceAll(`[${I}]`,`${C}[${X}]`);let te=document.createElement("div");te.innerHTML=U,E?.insertBefore(te.firstChild,y)}E?.removeChild(y)}let _=u.innerHTML,v=_.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),g=[];for(let y of v)g.push(y[1]);for(let y of g){let x=y.split(".");if(x.length>1){let C=JSON.parse(n.get(x[0])),I=0;for(let A of x)0!=I?(C=C[A],I++):I++;_=_.replaceAll(`{${y}}`,C??"")}else _=_.replaceAll(`{${y}}`,n.get(x[0])??"")}for(const y of l)"replace"===y[0]&&(_=_.replaceAll(y[1],y[2]));return _}static extractProperties(i,n){return i?Object.keys(i).flatMap(o=>{const r=i[o],l=Array.isArray(r)?"array":typeof r,u={name:o,type:l,level:n};return"object"!==l||null===r||Array.isArray(r)?[u]:[u,...this.extractProperties(r,n+1)]}):[]}}var Tn=se(8910),Eu=se(5084),Ss=se(2102),rl=se(9631);class ks{readUrl(i){return new Promise(n=>{De.urlToFile(i,"filename").then(o=>{let r=this.readFile(o);n(r)})})}}class sl{constructor(i){(0,f.A)(this,"iamges",void 0),this.iamges=i}render(i){let n=i;for(let o of this.iamges){let r=o.cssStyle?o.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";n=n.replaceAll("[img:$"+o.id+"$]",`<img id="${o.id}" src="${o.link}" style="${r}">`)}return n}}class Yp{constructor(i,n=!1){(0,f.A)(this,"mathMap",void 0),(0,f.A)(this,"raw",void 0),this.mathMap=i,this.raw=n}render(i){let n=i,r=n.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let l=r.next();if(l.done)break;let u=l.value[0],p=l.value[1],_=this.mathMap.get(p),v="";if(_){let g=this.isPureTextMathML(_.str);if(""!=g)v=g;else{const y=document.createElement("span");y.id=p,y.innerHTML=this.cleanMathML(_.str),this.raw&&_.raw&&y.setAttribute("data-azt-math-raw",_.raw),v=y.outerHTML}}n=n.replace(u,v)}return n}cleanMathML(i){let n=i;return n=n.replaceAll('display="block"',""),n=n.replaceAll(/<\?xml[^>]+\?>/g,""),n=n.replaceAll(/\s*xmlns="[^"]+"/g,""),n=n.replaceAll("\n",""),n}isPureTextMathML(i){let o=(new DOMParser).parseFromString(i,"application/xml");if(o.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let r=o.documentElement.children,l=["mi","mn","mo","ms","mspace","mtext"],u="";for(let _=0;_<r.length;_++){let v=r[_];if(l.indexOf(v.tagName.toLowerCase())<0)return"";u+=v.textContent?.trim()??""}return/^[0-9.,-]+$/.test(u.replaceAll("\u2212","-"))?u:""}}class Iu{render(i){let n=i;n=n.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let r=n.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let l=r.next();if(l.done)break;let u=l.value[0],p=l.value[1],_=u.split(":")[0].split("!");_.shift(),_.filter(v=>"a"==v).length>0&&(p=p.toUpperCase());for(let v=_.length-1;v>=0;v--){let g=_[v];p="hl"==g||"cl"==g?`<span class='cl'>${p}</span>`:`<${g}>${p}</${g}>`}n=n.replace(u,p)}return n}clean(i){let n=i.split("\n"),o=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,r=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,l=[],u=0;for(let _ of n){let v=_;r.test(n[u].replaceAll(o,"$1"))&&(n[u]=n[u].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),v=n[u]);let x,g=v.matchAll(o),y=0;for(;;){let C=g.next();if(C.done)break;let I=C.value[0],A=I.indexOf(":"),T=I.substring(1,A),M=(C.value.index??0)-y,O=M+C.value[1].length;x&&M==x.e&&x.style==T?x.e=O:(x={lineIdx:u,s:M,e:O,style:T},l.push(x)),y+=A+4}n[u]=v.replaceAll(o,"$1"),u++}return{res:n.join("\n"),styles:l}}applyStyle(i,n,o=!1){for(let r=i.length-1;r>=0;r--){let l=i[r],u=n.filter(_=>_.lineIdx==l.lineIdx&&this.isRangeIntersec(_.s,_.e,l.s,l.e??999999)),p=[];for(let _ of u){let v=_.s>=l.s?_.s:l.s,g=_.e<=(l.e??9999999)?_.e:l.e??9999999;v-=l.s,g-=l.s;let y=o?_.style:_.style.replaceAll("!hl","").replaceAll("!cl","");v<g&&""!=y&&l.text&&""!=(l.text.substring(v,g)??"").trim()&&(p.push({idx:v,str:`[${y}:$`}),p.push({idx:g,str:"$]"}))}p.sort((_,v)=>{let g=v.idx-_.idx;return 0!=g?g:v.str.length-_.str.length});for(let _ of p)l.text=l.text?.substring(0,_.idx)+_.str+l.text?.substring(_.idx)}}getAnsStyle(i,n,o){if(!n)return"";let r=[],l={...n};this.applyStyle([l],o,!0),l.text!=n.text&&""==l.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&r.push("!fl");for(let _ of o)_.lineIdx==n.lineIdx&&_.s<=n.b&&n.b<_.e&&r.push(_.style);let p=r&&r.length>0?r.join():"";return p.indexOf("!u")>=0||p.indexOf("!b")>=0||p.indexOf("!hl")>=0||p.indexOf("!cl")>=0||p.indexOf("!fl")>=0?p:""}isRangeIntersec(i,n,o,r){return i<=o&&o<=n||o<=i&&i<=r}getStyleScore(i){let n=0;return i.indexOf("!cl")>=0&&(n+=8),i.indexOf("!u")>=0&&(n+=4),i.indexOf("!i")>=0&&(n+=2),i.indexOf("!b")>=0&&(n+=1),n}}class _i{constructor(i){(0,f.A)(this,"infos",void 0),this.infos=i}render(i,n="\n"){let r=i.split(n),l=[],u=[],p="";for(let _ of r){let v=_;if(v.trim().startsWith("[*")&&v.trim().endsWith("*]")){let g=v.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(g.value){u.length>0&&(l.push(`<table class="q-table ${p}">${u.join("")}</table>`),u=[]);let x=this.infos.get(+g.value[1]);p=x&&x.borderTopSize>0?"border-1":"border-0",v=v.replace(g.value[0],"[*")}let y=v.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");y=y.replaceAll("|","</td><td>"),u.push(y)}else u.length>0&&(l.push(`<table class="q-table ${p}">${u.join("")}</table>`),u=[]),l.push(v)}return u.length>0&&l.push(`<table class="q-table ${p}">`+u.join("")+"</table>"),l.join(n)}}class ws extends ks{constructor(i=!0){super(),(0,f.A)(this,"wmf",void 0),i&&(this.wmf=new WMFConverter)}readFile(i){return new Promise(n=>{this.read(i,!1,o=>{n(o.text)})})}readFileInputEventAsArrayBuffer(i,n){let o=new FileReader;o.onload=function(r){n(r.target.result)},o.readAsArrayBuffer(i)}read(i,n,o,r,l){let u=this,p=(_,v)=>{r&&r(_,v,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(i,function(_){azotaDocx.readDocx(_,p).then(function(v){console.log(v);for(let x of v.data)"img"==x.type&&("image/x-wmf"==x.contentType||"image/x-emf"==x.contentType?u.convert(x):x.value="data:"+x.contentType+";base64, "+x.value,!x.cssStyle&&x.height&&x.width&&"EMU"==x.measureUnit)&&(x.cssStyle=`width:${+x.width/12700}pt;height:${+x.height/12700}pt;margin-top:0px;`);let g=new Map,y=0;for(let x of v.data)"img"==x.type&&x.cropInfo&&g.set(y,1),y++;if(o&&0==g.size)o(u.parse(v,n));else{y=0;for(let x of v.data){if("img"==x.type&&x.cropInfo){const C=y,I=document.createElement("img");I.src=x.value,I.onload=()=>{u.cropImage(x,I),g.delete(C),0==g.size&&o&&o(u.parse(v,n))},I.onerror=()=>{g.delete(C),0==g.size&&o&&o(u.parse(v,n))}}y++}}}).catch(v=>{l&&l(v.message)})})}parseText(i,n=!1){let o=i.split("\n");o=this.processUnderlineAns(o);let r=o.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),l=r,u=new Iu,p=[];if(n){let _=u.clean(r);r=_.res,p=_.styles}else r=u.render(r);return{text:r,orgText:l,images:[],mathMap:new Map,tableMap:new Map,styles:p}}parse(i,n=!1){let o="",r=[],l=new Map,u=new Map,p=[];for(let C of i.data)if("img"==C.type)r.push({id:C.key,link:C.value,cssStyle:C.cssStyle}),C.cssStyle&&C.cssStyle.split(";").length>2&&p.push([`^\\[img:\\$${C.key}\\$\\]`,`[img:$${C.key}$]\n`]);else if("mathml"==C.type){let I=+C.key.split("_")[1];l.set(C.key,{id:I,str:C.value,raw:C.docx})}else"table"==C.type&&u.set(C.position,C);let _=[],v=-1;for(let C of i.lines){if(v++,0==C.length)continue;let I="";if(Array.isArray(C[0])&&Array.isArray(C[C.length-1])&&Array.isArray(C[Math.floor(C.length/2)])){let T=i.data.filter(O=>O.position==v&&"table"==O.type)[0],E=T?`!!${T.position}!!:`:"";I=T&&+T.borderBottomSize>0||_.length>0&&_[_.length-1].startsWith("[*")?`[*${E} `+C.map(O=>O.map($=>$.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":C.map(O=>O.map($=>$.join("")).join("\n")).join(" \t ")}else I=C.join("");for(let T of p)I=I.replaceAll(new RegExp(T[0],"g"),T[1]);let A=I.split("\n");for(let T of A)_.push(T)}_=this.processUnderlineAns(_),o=_.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let g=o,y=new Iu,x=[];if(n){let C=y.clean(o);o=C.res,x=C.styles}else o=y.render(o),o=new sl(r).render(o),o=new Yp(l).render(o),o=new _i(u).render(o);return{text:o,orgText:g,images:r,mathMap:l,tableMap:u,styles:x}}processUnderlineAns(i){let n=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,o=0,r=[];for(let l of i){let u=l;if(u=u.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(u)&&""!=u.trim()&&o>0){u=u.replaceAll(/[\s.]+/g,"");let p=u.indexOf("*"),_=0;if(u=u.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(u)>=0){let v=i[o-1].match(n);if(v&&u.length==v.length){for(let y of v)i[o-1]=i[o-1].replace(y,y.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${p==_?"*":""}${u.substring(0,1)}:`).replace("$]","]")),r[r.length-1]=i[o-1],u=u.substring(1),_++;o++;continue}}}r.push(l),o++}return r}convert(i){return new Promise(n=>{if("image/x-wmf"==i.contentType)i.value=this.wmf.toPNG("data:"+i.contentType+";base64, "+i.value),n();else{let l=new ToContext2D(0,1),u=this.decodeBase64(i.value);try{FromEMF.Parse(u,l)}catch{}let p=this.scaleCanvas(l.canvas,200,200);i.value=p.toDataURL(),n()}})}decodeBase64(i){return Uint8Array.from(atob(i),function(n){return n.charCodeAt(0)})}scaleCanvas(i,n,o){let r=document.createElement("canvas");return r.width=n,r.height=o,r.getContext("2d")?.drawImage(i,0,0,i.width,i.height,0,0,n,o),r}cropImage(i,n){if(!i.cropInfo)return;let o=i.cropInfo.left?+i.cropInfo.left:0,r=i.cropInfo.top?+i.cropInfo.top:0,l=i.cropInfo.right?+i.cropInfo.right:0,u=i.cropInfo.bottom?+i.cropInfo.bottom:0;if(o+r+l+u==0)return;let p=n.width,_=n.height,v=o*p/1e5,g=r*_/1e5,C=p-l*p/1e5-v,I=_-u*_/1e5-g;const A=document.createElement("canvas");A.width=C,A.height=I,A.getContext("2d")?.drawImage(n,v,g,C,I,0,0,C,I),i.value=A.toDataURL()}}class hi extends ks{readFile(i){return new Promise((n,o)=>{const r=new FileReader;r.onload=()=>{r.result?n(`<img src="${r.result}">`):o(new Error("Failed to read file."))},r.onerror=()=>{o(new Error("Error occurred while reading the file."))},r.readAsDataURL(i)})}}class Ns extends ks{readFile(i){return new Promise(n=>{const o=new FileReader;o.onload=function(){var r=(0,he.A)(function*(l){n("")});return function(l){return r.apply(this,arguments)}}(),o.readAsArrayBuffer(i)})}}function Au(t,i){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function Es(t,i){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function gi(t,i){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function al(t,i){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function Tu(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,Es,7,0,"div",13)(4,gi,3,4,"span",14)(5,al,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const r=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(r))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=i.$implicit,o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isReading),e.R7$(),e.Y8G("ngIf",!o.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!o.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let Is=(()=>{var t;class i{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",r=>{if(this.err="",r.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,u={file:r,name:this.name,content:""};switch(this.files.push(u),De.getFileExt(r.name)){case"pdf":_=new Ns;break;case"docx":_=new ws;break;case"jpg":case"png":case"jpeg":_=new hi}this.isReading=!0,this.onStartReading.emit(),_?.readFile(r).then(v=>{u.content=v,this.isReading=!1,this.onAddFile.emit(u)})})},200)}remove(o){this.files.splice(o,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(o,r){1&o&&(e.DNE(0,Au,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,Tu,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&o&&(e.Y8G("ngIf",r.err),e.R7$(),e.Mz_("id","dropzone-basic-",r.name,""),e.R7$(8),e.Y8G("ngForOf",r.files))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.qT,w.cb,w.cV,kt]})),i})();const Fu=["startTime"];function Ru(t,i){if(1&t&&(e.j41(0,"div",5),e.nrm(1,"div",6),e.nI1(2,"safeHtml"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,n.value.desc),e.npT)}}function ju(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Mu(t,i){if(1&t&&(e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,ju,1,0,"i",8),e.k0s(),e.nrm(4,"input",9),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function $u(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Gu(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,$u,1,0,"i",8),e.k0s(),e.j41(4,"div")(5,"mat-form-field",11)(6,"input",12),e.bIt("click",function(r){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(r.stopPropagation())}),e.k0s(),e.j41(7,"a",13),e.bIt("click",function(r){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(r.stopPropagation())}),e.nrm(8,"i",14),e.k0s(),e.j41(9,"ngx-mat-datetime-picker",15,0)(11,"ngx-mat-datepicker-actions")(12,"a",16),e.EFF(13,"Cancel"),e.k0s(),e.j41(14,"a",17),e.EFF(15,"OK"),e.k0s()()()()()()}if(2&t){const n=e.sdS(10),o=e.XpG().$implicit,r=e.XpG();e.R7$(2),e.SpI(" ",o.value.label," "),e.R7$(),e.Y8G("ngIf",o.value.desc),e.R7$(3),e.FCK("name","",r.nodeData.id,"-",o.key,""),e.Y8G("ngxMatDatetimePicker",n)("value",o.value.data),e.R7$(3),e.Y8G("touchUi",!0)("showSeconds",!1)}}function ho(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function ll(t,i){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function cl(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,ho,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,r)||(l.value.data=r),e.Njj(r)}),e.DNE(5,ll,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function Hp(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Wp(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Hp,1,0,"i",8),e.k0s(),e.j41(4,"textarea",21),e.bIt("input",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.autoResize(r.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function cr(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Zp(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,cr,1,0,"i",8),e.k0s(),e.j41(4,"app-file-control",22),e.bIt("onStartReading",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.onStartReadingFile())})("onAddFile",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.onAddFile(r))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",o.nodeData.id+"-"+n.key)}}function Du(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Ou(t,i){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function Je(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Du,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,r)||(l.value.data=r),e.Njj(r)}),e.DNE(5,Ou,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",o.lstKeys)}}function ul(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,Ru,3,3,"div",4)(2,Mu,5,6,"div",4)(3,Gu,16,9,"div",4)(4,cl,6,5,"div",4)(5,Wp,6,6,"div",4)(6,Zp,5,3,"div",4)(7,Je,6,5,"div",4),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}let As=(()=>{var t;class i{set data(o){this.nodeData=o}constructor(o,r){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"startTime",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB),this.ngZone=o,this.appService=r}ngOnInit(){let o=!1;for(let r of this.nodeData.conf)r.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+r.key)??"","key"==r.value.type&&(o=!0);o&&this.appService?.listKeys().subscribe(r=>{this.lstKeys=r}),setTimeout(()=>{document.querySelectorAll(".form-node-renderred textarea").forEach(l=>{this.autoResize(l)})},200)}autoResize(o){o.style.height="50px",o.style.overflowY="hidden",o.style.height=o.scrollHeight+10+"px"}showInfo(o){}openDateTimePicker(){this.startTime?.open()}onAddFile(o){this.onUploaded.emit(o)}onStartReadingFile(){this.onStartUpload.emit()}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],viewQuery:function(o,r){if(1&o&&e.GBs(Fu,5),2&o){let l;e.mGM(l=e.lsd())&&(r.startTime=l.first)}},inputs:{appId:"appId",data:"data"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[["startTime",""],[1,"form-node-renderred"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[3,"innerHTML"],[1,"form-label"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],["appearance","outline"],["type","text","matInput","",3,"click","ngxMatDatetimePicker","value","name"],["matSuffix","",2,"font-size","18px",3,"click"],[1,"bx","bx-calendar"],[3,"touchUi","showSeconds"],["ngxMatDatepickerCancel","",1,"mr-3"],["ngxMatDatepickerApply",""],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(o,r){1&o&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,ul,8,7,"div",3),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngForOf",r.nodeData.conf))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,Is,Cs,Tn.T_,Ss.RG,Ss.rl,Ss.yw,rl.fS,rl.fg,Tn.Hw,Tn.m7,Tn.yF,Tn.HF,Tn.gx,Tn.Uq,Eu.X6]})),i})();function ur(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",3)(1,"img",4),e.bIt("mousedown",function(){const r=e.eBV(n).index,l=e.XpG();return e.Njj(l.setSelection(r))}),e.k0s()()}if(2&t){const n=i.$implicit,o=i.index,r=e.XpG();e.ZvI("scene-layer scene-mode-player-",r.ratio916?"9-16":"16-9",""),e.Mz_("id","dom-",n.objName,""),e.R7$(),e.ZvI("s-element player scene-mode-player-",r.ratio916?"9-16":"16-9"," h-100"),e.Y8G("src",r.ratio916?r.demo916[o]:r.demo169[o],e.B4B)}}function Vu(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"span",6),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.play())}),e.k0s(),e.j41(2,"span",7),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.resetPos())}),e.k0s(),e.j41(3,"span",6),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.edit())}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px cursor-pointer me-3"),e.R7$(2),e.ZvI("tf-icons bx bx-",n.isEditMode?"x":"pencil"," bx-22px cursor-pointer me-3")}}let Ts=(()=>{var t;class i{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"mode","editor"),(0,f.A)(this,"lstObj",[]),(0,f.A)(this,"animName",""),(0,f.A)(this,"ratio916",!1),(0,f.A)(this,"demo169",["/ai-mod-assets/images/demo-16-9.png","/ai-mod-assets/images/demo-16-9-1.png"]),(0,f.A)(this,"demo916",["/ai-mod-assets/images/demo-9-16.png","/ai-mod-assets/images/demo-9-16-1.png"]),(0,f.A)(this,"info",""),(0,f.A)(this,"projectId","ObjAnim"),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"isEditMode",!1),(0,f.A)(this,"animObjs",[]),(0,f.A)(this,"canMove",{}),(0,f.A)(this,"startPos",[0,0]),(0,f.A)(this,"curTranslate",[]),(0,f.A)(this,"isDrag",!1),(0,f.A)(this,"obj",void 0),(0,f.A)(this,"curIdx",0)}set conf(o){let r=document.createElement("div");r.innerHTML=o;let l=r.querySelector("anim-editor");if(l){let u=JSON.parse(l.innerHTML);this.varname=l.getAttribute("var-name")??"",this.animName=u.animName,this.lstObj=u.listObj}}ngAfterViewInit(){localStorage.removeItem("theatre-0.4.persistent");let r=!1;this.projectId="ObjAnim"+(new Date).getTime();try{Theatre.studio.onSelectionChange(l=>{this.obj=l[0],this.obj&&(this.curIdx=this.lstObj.findIndex(u=>u.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),r=!0}catch{De.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js").then(()=>{Theatre.studio.initialize(),Theatre.studio.onSelectionChange(u=>{this.obj=u[0],this.obj&&(this.curIdx=this.lstObj.findIndex(p=>p.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),this.loadAnim()})}r&&this.loadAnim(),this.info=JSON.stringify(this.lstObj,null,2)}setSelection(o){Theatre.studio.setSelection([this.animObjs[o]])}play(){this.sheet&&(this.isPlaying?(this.isPlaying=!1,this.sheet.sequence.pause()):(this.isPlaying=!0,this.sheet.sequence.play({iterationCount:1/0})))}edit(){this.isEditMode?(this.isEditMode=!1,Theatre.studio.ui.hide()):(this.isEditMode=!0,Theatre.studio.ui.restore())}loadAnim(){localStorage.removeItem("theatre-0.4.persistent");let o={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:2.5,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]};this.curIdx=0,this.curTranslate=[];let l=0;for(let _ of this.lstObj){this.canMove[_.objName]={},this.curTranslate.push([0,0]);let v={};for(let C of _.propAnims)v[C.propName]=C.keyframes.length>0?C.keyframes[0].value:0,"x"==C.propName&&(this.canMove[_.objName].x=!0),"y"==C.propName&&(this.canMove[_.objName].y=!0);o.sheetsById.Sheet1.staticOverrides.byObject[_.objName]=v;let g={},y={},x=0;for(let C of _.propAnims){let I=`${x}-vfsKxxzE`,A={type:"BasicKeyframedTrack",__debugName:`${_.objName}:["${C.propName}"]`,keyframes:[]},T=0,E=[];for(let M of C.keyframes)0==T&&E.push([M.cubicBezier[0],M.cubicBezier[1]]),E.push([M.cubicBezier[0],M.cubicBezier[1]]),E.push([M.cubicBezier[2],M.cubicBezier[3]]),A.keyframes.push({id:`${l}F${x}zl_kv${T}V`,position:M.timePosition,connectedRight:!0,handles:[E[2*T][0],E[2*T][1],E[2*T+1][0],E[2*T+1][1]],value:M.value,type:"bezier"}),T++;g[I]=A,y[`["${C.propName}"]`]=I,x++}o.sheetsById.Sheet1.sequence.tracksByObject[_.objName]={trackData:g,trackIdByPropPath:y},l++}const p=Theatre.core.getProject(this.projectId,{state:o}).sheet("Sheet1");this.sheet=p,this.animObjs=[];for(let _ of this.lstObj){let v={};const g={};for(let C of _.propAnims){v[C.propName]=C.range&&C.range.length>0?Theatre.core.types.number(C.default,{range:C.range}):C.default;let I=C.domStyle.split(":"),A=De.minusToCamelCase(I[0].trim()),T=I[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+C.propName+"}");g[A]=g[A]?g[A]+" "+T:T}let y=p.object(_.objName,v);this.animObjs.push(y);const x=_.objName;y.onValuesChange(C=>{const I=document.getElementById("dom-"+x),A=/\$\{(.*?)\}/g;for(const T in g)if(g.hasOwnProperty(T)){let M,E=g[T];for(;null!==(M=A.exec(g[T]));)E=E.replaceAll(M[0],C[M[1]]);I&&(I.style[T]=E.replaceAll(";",""))}}),Theatre.studio.setSelection([y])}document.onmouseup=_=>{_.preventDefault(),this.endDrag(_)},document.onmousemove=_=>{_.preventDefault(),this.onMove(_)}}startDrag(o){o.preventDefault(),this.obj&&"editor"==this.mode&&(this.isDrag=!0,this.startPos=[o.x,o.y])}onMove(o){if(!this.isDrag)return;let r=o.x-this.startPos[0]+this.curTranslate[this.curIdx][0],l=o.y-this.startPos[1]+this.curTranslate[this.curIdx][1];Theatre.studio.transaction(({set:u})=>{this.canMove[this.lstObj[this.curIdx].objName].x&&u(this.obj.props.x,r),this.canMove[this.lstObj[this.curIdx].objName].y&&u(this.obj.props.y,l)})}endDrag(o){this.isDrag&&(this.isDrag=!1,this.curTranslate[this.curIdx]=[o.x-this.startPos[0]+this.curTranslate[this.curIdx][0],o.y-this.startPos[1]+this.curTranslate[this.curIdx][1]])}resetPos(){this.curTranslate[this.curIdx]=[0,0],Theatre.studio.transaction(({set:o})=>{o(this.obj.props.x,0),o(this.obj.props.y,0)})}getValue(){const o=Theatre.studio.createContentOfSaveFile(this.projectId),r=this.convertProjectStateToList(o);return{varName:this.varname,value:JSON.stringify({animName:this.animName,listObj:r})}}convertProjectStateToList(o){const r=[],l=o.sheetsById;for(const u in l){const _=l[u].sequence.tracksByObject;let v=0;for(const g in _){const{trackData:y,trackIdByPropPath:x}=_[g],C=[];let I=0;for(const A in x){const E=y[x[A]];if(E&&E.keyframes){const M=E.keyframes.map(U=>({timePosition:U.position,cubicBezier:U.handles,value:U.value}));let O=[];for(let U of M)O.push([U.cubicBezier[0],U.cubicBezier[1]]),O.push([U.cubicBezier[2],U.cubicBezier[3]]);O.push(O[0]);for(let U=0;U<M.length;U++)M[U].cubicBezier=[O[2*U+1][0],O[2*U+1][1],O[2*U+2][0],O[2*U+2][1]];const $=A.replace(/\["|\"]/g,"");C.push({propName:$,domStyle:this.lstObj[v].propAnims[I].domStyle,default:M[0]?.value||0,keyframes:M})}I++}r.push({objName:g,propAnims:C}),v++}}return r}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-anim-editor"]],inputs:{varname:"varname",mode:"mode",conf:"conf",ratio916:"ratio916"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[[3,"mousedown"],[3,"id","class",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[3,"id"],["alt","imgElement",3,"mousedown","src"],[1,"text-center","mt-2"],[3,"click"],[1,"tf-icons","bx","bx-reset","bx-22px","cursor-pointer","me-3",3,"click"]],template:function(o,r){1&o&&(e.j41(0,"div",0),e.bIt("mousedown",function(u){return r.startDrag(u)}),e.DNE(1,ur,2,9,"div",1),e.k0s(),e.DNE(2,Vu,4,6,"div",2)),2&o&&(e.ZvI("scene-container player scene-mode-player-",r.ratio916?"9-16":"16-9",""),e.R7$(),e.Y8G("ngForOf",r.lstObj),e.R7$(),e.Y8G("ngIf","editor"==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto;background-color:#282b2fcc}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 16);height:calc(var(--video-16) / 16);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 16 + 7px);top:calc(var(--video-9) / 32 - 9px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 16 + 7px);top:calc(var(--video-16) / 32 - 9px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}"]})),i})();class dr{onMsgUpdate(i,n){}onDone(i){}onMsgAdd(i){}onClear(){}onFunctionCall(i,n){}onBeforeSend(){}onSend(){}}class Xo extends dr{constructor(i,n,o,r){super(),(0,f.A)(this,"onUpdate",void 0),(0,f.A)(this,"done",void 0),(0,f.A)(this,"beforeSend",void 0),(0,f.A)(this,"functionCall",void 0),this.onUpdate=i,this.done=n,this.beforeSend=o,this.functionCall=r}onFunctionCall(i,n){this.functionCall&&this.functionCall(i,n)}onMsgUpdate(i,n){this.onUpdate&&this.onUpdate(i,n)}onDone(i){this.done&&this.done(i)}onBeforeSend(){this.beforeSend&&this.beforeSend()}}class Jn{constructor(i,n,o){(0,f.A)(this,"api",void 0),(0,f.A)(this,"callback",void 0),(0,f.A)(this,"memType",void 0),(0,f.A)(this,"agentType",{name:"default",placeholder:"Enter your message..."}),(0,f.A)(this,"aiVars",[]),(0,f.A)(this,"lstMessage",[]),this.api=i,this.callback=n,this.memType=o}setMemType(i){this.memType=i}setCallback(i){this.callback=i}send(){this.callback?.onBeforeSend(),this.api.live({name:this.agentType.name,messages:this.lstMessage,vars:this.aiVars,type:this.memType}).subscribe(i=>{this.callback?.onSend();let n=i.data,o="",r="",l={Role:"assistant",Content:""};this.addMessage(l),this.api.stream(n,u=>{if(o+=u.Content??"",l.Content=o,u.ToolCalls){l.ToolCalls||(l.ToolCalls=[]);for(let _ of u.ToolCalls){let v=+(_.Type??"0"),g=l.ToolCalls[v];g?g.FunctionCall.Arguments+=_.FunctionCall.Arguments:(l.ToolCalls[v]=_,l.Generating=!0)}}let p=o.replace(r,"");this.noticeUpdate(o,p),r=o,l.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!0)},u=>{""==u&&(l.Generating=!1,l.Content=o,this.callback?.onDone(o),this.getLastMessage()?.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!1),console.log(this.lstMessage))})})}reSend(){this.removeLastMessage(),this.send()}addMessage(i){this.lstMessage.push(i),this.callback?.onMsgAdd(i)}addUserMessage(i,n){let o=[];n&&(o.push({Type:hn.Text,Content:i}),o.push(...n.map(l=>({Type:hn.ImageUrl,Content:l}))));let r=o.length>0?{Role:"user",Contents:o,Content:i}:{Role:"user",Content:i};this.lstMessage.push(r),this.callback?.onMsgAdd(r)}addToolMessage(i,n){let o={Role:"tool",ToolCallId:i,Content:n};this.lstMessage.push(o),this.callback?.onMsgAdd(o)}addAssistantMessage(i){let n={Role:"assistant",Content:i};this.lstMessage.push(n),this.callback?.onMsgAdd(n)}getMessage(i){return this.lstMessage[i]}getLastMessage(){return this.lstMessage[this.lstMessage.length-1]}removeLastMessage(){this.lstMessage.length>0&&this.removeMessage(this.lstMessage.length-1)}clearChat(){this.lstMessage=[],this.callback?.onClear()}setVars(i){this.aiVars=i}getVars(){return this.aiVars}setAgent(i){this.agentType=i}setAgentName(i){this.agentType={name:i,placeholder:""}}getName(){return this.agentType.name}removeMessage(i){this.lstMessage.splice(i,1)}noticeUpdate(i,n){this.callback?.onMsgUpdate(i,n)}}function zu(t,i){if(1&t&&(e.j41(0,"div",3)(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.jsCode,"\n        ")}}let Bu=(()=>{var t;class i{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"jsCode",""),(0,f.A)(this,"html",""),(0,f.A)(this,"err",""),(0,f.A)(this,"showCode",!1)}set jsInfo(o){let r=document.createElement("div");r.innerHTML=o;let l=r.querySelector("js-runner");l&&(this.jsCode=l.innerHTML.split("```javascript")[1].split("```")[0].replaceAll("&lt;","<").replaceAll("&gt;",">"),this.varname=l.getAttribute("var-name")??"",r.removeChild(l),this.html=r.innerHTML,setTimeout(()=>{this.run()},400))}getValue(){return{varName:this.varname,value:this.jsCode}}run(){try{this.err="",new Function(this.jsCode)()}catch(o){this.err=o.message}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-js-runner"]],inputs:{varname:"varname",jsInfo:"jsInfo"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[["id","js-result-view"],["id","js-source-code",4,"ngIf"],["title","Show/Hide source code",1,"bx","bx-code","text-white","cursor-pointer",3,"click"],["id","js-source-code"]],template:function(o,r){1&o&&(e.nrm(0,"div",0),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,zu,6,1,"div",1),e.j41(4,"i",2),e.bIt("click",function(){return r.showCode=!r.showCode}),e.k0s()),2&o&&(e.R7$(2),e.JRh(r.err),e.R7$(),e.Y8G("ngIf",r.showCode))},dependencies:[V.MD,V.bT,w.YN]})),i})();function qp(t,i){if(1&t){const n=e.RV6();e.j41(0,"img",7),e.bIt("click",function(){const r=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.selectImg(r))}),e.k0s()}if(2&t){let n;const o=i.$implicit,r=i.index,l=e.XpG(2);e.ZvI("img-small-pick ",(null!==(n=null==l._scene?null:l._scene.selectedImg)&&void 0!==n?n:0)==r?"selected":"",""),e.Y8G("src",o,e.B4B)}}function Pu(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,qp,1,4,"img",6),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-mode-",n.mode,"-pick"),e.R7$(),e.Y8G("ngForOf",null==n._scene?null:n._scene.imageUrl)}}function Fs(t,i){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-num-",n.getSize(),""),e.R7$(),e.JRh(n.idx)}}function Rs(t,i){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=i.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==o._scene?null:o._scene.transitionName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function dl(t,i){if(1&t&&(e.j41(0,"div"),e.nrm(1,"i",8),e.j41(2,"ul",9)(3,"li")(4,"a",10),e.nrm(5,"i"),e.EFF(6,"None"),e.k0s()(),e.DNE(7,Rs,4,4,"li",11),e.k0s()()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-transit-",n.getSize(),""),e.R7$(),e.ZvI("dropdown-toggle hide-arrow bx bx-exit cursor-pointer ",null!=n._scene&&n._scene.transitionName?"text-link":"text-muted",""),e.R7$(4),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.transitionName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstTransition)}}function pl(t,i){if(1&t&&(e.j41(0,"div"),e.nrm(1,"div",12),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-time scene-time-progress-",n.getSize(),""),e.R7$(),e.Aen("width:"+n.progress+"%")}}function fl(t,i){if(1&t&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"secondsToTime"),e.nI1(4,"secondsToTime"),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,2,n.curTime),"/",e.bMT(4,4,n.duration),"")}}function ml(t,i){if(1&t){const n=e.RV6();e.j41(0,"audio",15),e.bIt("timeupdate",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.updatePlayTime())})("ended",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.isPlaying=!1)}),e.nrm(1,"source",16),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("src",null==n._scene?null:n._scene.audioUrl,e.B4B)}}function Jp(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.setAnim(r.animName))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=i.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==o._scene?null:o._scene.animationName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function Lu(t,i){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=i.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",o.capStyle==n?"text-link":"invisible",""),e.R7$(),e.JRh(n)}}function Kp(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.play())}),e.nrm(2,"span"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.nrm(5,"i",21),e.k0s(),e.j41(6,"ul",9)(7,"li")(8,"a",10),e.nrm(9,"i"),e.EFF(10,"None"),e.k0s()(),e.DNE(11,Jp,4,4,"li",11),e.k0s()(),e.j41(12,"div",19)(13,"button",22),e.nrm(14,"i",23),e.k0s(),e.j41(15,"ul",9)(16,"li")(17,"a",10),e.nrm(18,"i"),e.EFF(19,"None"),e.k0s()(),e.DNE(20,Lu,4,4,"li",11),e.k0s()(),e.j41(21,"div",19)(22,"button",24),e.nrm(23,"i",25),e.k0s(),e.j41(24,"ul",9)(25,"li",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.genImage())}),e.j41(26,"a",10),e.nrm(27,"i",27),e.EFF(28,"Re-Generate Image"),e.k0s()(),e.j41(29,"li",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.genVideo())}),e.j41(30,"a",10),e.nrm(31,"i",28),e.EFF(32,"Image to Video"),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px"),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.animationName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstImgAnim),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==n.capStyle?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstCapStyle)}}let Qp=(()=>{var t;class i{constructor(){(0,f.A)(this,"_scene",void 0),(0,f.A)(this,"mode","player"),(0,f.A)(this,"size","9:16"),(0,f.A)(this,"idx",0),(0,f.A)(this,"selected",!1),(0,f.A)(this,"showTransit",!0),(0,f.A)(this,"capStyle",""),(0,f.A)(this,"animCore",void 0),(0,f.A)(this,"projectId",""),(0,f.A)(this,"onChangeCapStyle",new e.bkB),(0,f.A)(this,"onChangeAnim",new e.bkB),(0,f.A)(this,"lstCapStyle",["wordHighlight","lineHighlight"]),(0,f.A)(this,"lstImgAnim",[]),(0,f.A)(this,"lstTransition",[]),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"curTime",0),(0,f.A)(this,"curAnimName",""),(0,f.A)(this,"progress",0),(0,f.A)(this,"duration",0)}set scene(o){this._scene=o,this.progress=0,this.duration=this._scene.duration,this.curTime=0;let r=document.getElementById("audioElement");r&&(r.pause(),r.currentTime=0,setTimeout(()=>{r.load()},400)),this.curAnimName="",this.sheet=void 0}ngAfterViewInit(){if("player"!=this.mode)return;localStorage.removeItem("theatre-0.4.persistent");let r=!1;try{this.animCore=Theatre.core,r=!0}catch{De.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js").then(()=>{this.animCore=Theatre.core})}}changeCapStyle(o){this.capStyle=o,this.onChangeCapStyle.emit(o)}changeAnim(o){this._scene.animationName=o,this.onChangeAnim.emit(o)}set lstAnim(o){"player"==this.mode&&(this.lstImgAnim=o.filter(r=>1==r.listObj.length),this.lstTransition=o.filter(r=>2==r.listObj.length))}ngOnInit(){}setAnim(o){this._scene.animationName=o,this.loadAnim()}getSize(){return this.size.replace(":","-")}genImage(){alert(this._scene?.imagePrompt)}genVideo(){alert(this._scene?.imagePrompt)}getAnimation(o){return this.lstImgAnim.find(r=>r.animName==o)}selectImg(o){this._scene&&(this._scene.selectedImg=o)}play(){let o=10;!this.curAnimName&&this._scene?.animationName&&(this.loadAnim(),o=500),setTimeout(()=>{let r=document.getElementById("audioElement");this.isPlaying?(r&&r.pause(),this.sheet&&this.sheet.sequence.pause()):(r&&r.play(),this.sheet&&this.sheet.sequence.play().then(()=>{this.isPlaying=!1})),this.isPlaying=!this.isPlaying},o)}loadAnim(){this.animCore&&this._scene?.animationName&&(this.curAnimName=this._scene.animationName,this.projectId="ObjAnim"+(new Date).getTime(),this.parseAnim(["dom-img-player"],this.duration))}parseAnim(o,r){localStorage.removeItem("theatre-0.4.persistent");let u={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:r,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]},_=0,v=this.getAnimation(this._scene?.animationName??"")?.listObj??[];if(0==v.length)return;let g=0;for(let A of v)for(let T of A.propAnims)for(let E of T.keyframes)E.timePosition>g&&(g=E.timePosition);for(let A of v){let T={};for(let $ of A.propAnims)T[$.propName]=$.keyframes.length>0?$.keyframes[0].value:0;u.sheetsById.Sheet1.staticOverrides.byObject[A.objName]=T;let E={},M={},O=0;for(let $ of A.propAnims){let X=`${O}-vfsKxxzE`,Y={type:"BasicKeyframedTrack",__debugName:`${A.objName}:["${$.propName}"]`,keyframes:[]},U=0,te=[];for(let H of $.keyframes)0==U&&te.push([H.cubicBezier[0],H.cubicBezier[1]]),te.push([H.cubicBezier[0],H.cubicBezier[1]]),te.push([H.cubicBezier[2],H.cubicBezier[3]]),Y.keyframes.push({id:`${_}F${O}zl_kv${U}V`,position:1*H.timePosition,connectedRight:!0,handles:[te[2*U][0],te[2*U][1],te[2*U+1][0],te[2*U+1][1]],value:H.value,type:"bezier"}),U++;E[X]=Y,M[`["${$.propName}"]`]=X,O++}u.sheetsById.Sheet1.sequence.tracksByObject[A.objName]={trackData:E,trackIdByPropPath:M},_++}const x=Theatre.core.getProject(this.projectId,{state:u}),C=x.sheet("Sheet1");this.sheet=C;let I=[];_=0;for(let A of v){let T={};const E={};for(let $ of A.propAnims){T[$.propName]=$.range&&$.range.length>0?Theatre.core.types.number($.default,{range:$.range}):$.default;let X=$.domStyle.split(":"),Y=X[0].trim(),U=X[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+$.propName+"}");E[Y]=E[Y]?E[Y]+" "+U:U}let M=C.object(A.objName,T);I.push(M);const O=o[_];M.onValuesChange($=>{const X=document.getElementById(O),Y=/\$\{(.*?)\}/g;for(const U in E)if(E.hasOwnProperty(U)){let H,te=E[U];for(;null!==(H=Y.exec(E[U]));)te=te.replaceAll(H[0],$[H[1]]);X&&(X.style[U]=te.replaceAll(";",""))}}),_++}x.ready.then(()=>{this.sheet=C})}updatePlayTime(){let o=document.getElementById("audioElement");o&&(this.progress=o.currentTime/o.duration*100,this.duration=o.duration,this.curTime=o.currentTime)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-view"]],inputs:{scene:"scene",mode:"mode",size:"size",idx:"idx",selected:"selected",showTransit:"showTransit",capStyle:"capStyle",lstAnim:"lstAnim"},outputs:{onChangeCapStyle:"onChangeCapStyle",onChangeAnim:"onChangeAnim"},standalone:!0,features:[e.aNF],decls:10,vars:25,consts:[[3,"id"],["alt","imgElement",3,"src"],[3,"class",4,"ngIf"],["class","scene-layer scene-duration small",4,"ngIf"],["id","audioElement","class","d-none",3,"timeupdate","ended",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],["alt","imgElement",3,"class","src","click",4,"ngFor","ngForOf"],["alt","imgElement",3,"click","src"],["matTooltip","Transition","data-bs-toggle","dropdown","aria-expanded","false"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"scene-layer","scene-duration","small"],[1,"duration"],["id","audioElement",1,"d-none",3,"timeupdate","ended"],["type","audio/mpeg",3,"src"],[1,"text-center","mt-2"],["type","button","matTooltip","Play",1,"btn","btn-icon","btn-label-primary",3,"click"],[1,"btn-group","ms-3"],["type","button","matTooltip","Animation","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-timer"],["type","button","matTooltip","Caption Style","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-captions"],["type","button","matTooltip","Generate with AI","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bxs-magic-wand"],[3,"click"],[1,"bx","bx-image","scaleX-n1-rtl","me-3"],[1,"bx","bx-movie-play","scaleX-n1-rtl","me-3"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"]],template:function(o,r){if(1&o&&(e.j41(0,"div")(1,"div",0),e.nrm(2,"img",1),e.k0s(),e.DNE(3,Pu,2,4,"div",2)(4,Fs,2,4,"div",2)(5,dl,8,10,"div",2)(6,pl,2,5,"div",2)(7,fl,5,6,"div",3)(8,ml,2,1,"audio",4),e.k0s(),e.DNE(9,Kp,33,11,"div",5)),2&o){let l;e.ee0("scene-container ",r.mode," scene-mode-",r.mode,"-",r.getSize()," ",r.selected?"selected":"",""),e.R7$(),e.STu("scene-layer scene-mode-",r.mode,"-",r.getSize(),""),e.Mz_("id","dom-img-",r.mode,""),e.R7$(),e.ZWY("s-element ",r.mode," scene-mode-",r.mode,"-",r.getSize()," h-100"),e.Y8G("src",null==r._scene?null:r._scene.imageUrl[null!==(l=null==r._scene?null:r._scene.selectedImg)&&void 0!==l?l:0],e.B4B),e.R7$(),e.Y8G("ngIf","player"==r.mode),e.R7$(),e.Y8G("ngIf","thumb"==r.mode),e.R7$(),e.Y8G("ngIf",r.showTransit&&"thumb"==r.mode),e.R7$(),e.Y8G("ngIf","player"==r.mode),e.R7$(),e.Y8G("ngIf","player"==r.mode),e.R7$(),e.Y8G("ngIf","player"==r.mode&&(null==r._scene?null:r._scene.audioUrl)),e.R7$(),e.Y8G("ngIf","player"==r.mode)}},dependencies:[V.MD,V.Sq,V.bT,w.YN,nn.uc,nn.oV,Xp],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 24);height:calc(var(--video-16) / 24);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 24 + 7px);top:calc(var(--video-9) / 46 - 11px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 24 + 7px);top:calc(var(--video-16) / 46 - 11px)}.scene-num-16-9[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-9) / 46 - 11px)}.scene-num-9-16[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-16) / 46 - 11px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}.img-small-pick[_ngcontent-%COMP%]{width:40px;display:block;margin-bottom:5px;border-radius:5px}.scene-mode-player-pick[_ngcontent-%COMP%]{position:fixed;margin-left:-45px}.img-small-pick.selected[_ngcontent-%COMP%]{outline:2px solid #fff}.btn-label-secondary[_ngcontent-%COMP%]{color:#8592a3!important;border-color:#0000;background:#393c50}.btn-label-secondary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#788393!important;color:#fff!important;box-shadow:0 .125rem .25rem #8592a366!important}.btn-label-primary[_ngcontent-%COMP%]{color:#696cff!important;border-color:#0000;background:#35365f}.btn-label-primary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#5f61e6!important;color:#fff!important;box-shadow:0 .125rem .25rem #696cff66!important}.scene-duration[_ngcontent-%COMP%]{bottom:5px;right:10px;opacity:.8}"]})),i})();function _l(t,i){if(1&t&&(e.j41(0,"div")(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.error,"\n        ")}}function go(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-scene-view",5),e.bIt("onChangeCapStyle",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.changeCapStyle(r))}),e.k0s()}if(2&t){let n;const o=e.XpG(2);e.Y8G("mode","player")("lstAnim",o.lstAnim)("capStyle",null!==(n=null==o.lstScene?null:o.lstScene.cap_style)&&void 0!==n?n:"")("scene",o.curScene)}}function Uu(t,i){if(1&t&&(e.j41(0,"div",3),e.DNE(1,go,1,4,"app-scene-view",4),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curScene)}}function vi(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const r=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.select(r))}),e.nrm(1,"app-scene-view",11),e.k0s()}if(2&t){const n=i.$implicit,o=i.index,r=e.XpG(2);e.R7$(),e.Y8G("mode","thumb")("selected",o==r.curIdx)("showTransit",o+1<r.lstScene.list_scenes.length)("idx",o+1)("scene",n)}}function Bn(t,i){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.DNE(3,vi,2,5,"div",9),e.k0s()()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",null==n.lstScene?null:n.lstScene.list_scenes)}}let yi=(()=>{var t;class i{constructor(o){(0,f.A)(this,"app",void 0),(0,f.A)(this,"sceneInfo",'<scene-editor var-name="final-scene" anim-db="anim">{\n        "list_scenes": [\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/188693b0fa2147719389523c4192c99a.png","https://images.piclumen.com/normal/20241221/16/49df6b1abde1419b803ed7cbe74dc7c9.png","https://images.piclumen.com/normal/20241221/16/f05705a71df94fec9d1dfaffb348ef3e.png","https://images.piclumen.com/normal/20241221/16/33c4764f82a441588e68d903837ff0e8.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A beautiful, enchanting garden with luminescent flowers, sparkling streams, and fairy lights hanging from the trees. In the center, Lila the Curious Fairy hovers gently above a bed of multicolored tulips, her lavender wings shimmering in the moonlight\'s glow. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/170fe0d8ab564847aa974469f74f4992.png","https://images.piclumen.com/normal/20241221/16/9b2469bc7bc6421fae9caeeb8d9584b5.png","https://images.piclumen.com/normal/20241221/16/a7609dac63a445bd86a050af174072c1.png","https://images.piclumen.com/normal/20241221/16/cc4e75cc24974e379825ef30d006b761.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Oliver the Wise Owl perched on a sturdy oak branch, wearing his ornate monocle. Lila sits nearby, listening intently, her eyes wide with curiosity. The backdrop showcases a scenic view of the garden bathed in golden twilight, with gentle breezes rustling the leaves. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/251ec29683514a0086fa73f60725f1d4.png","https://images.piclumen.com/normal/20241221/16/f71fd6e1fb21418886f377ba82e1dc39.png","https://images.piclumen.com/normal/20241221/16/f89496edc9e548b596a4698f1e672365.png","https://images.piclumen.com/normal/20241221/16/fdce48c02d68445080e2d988b29d71b3.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Close-up of Oliver as he narrates his tale with deep, expressive gestures. Lila, full of wonder, leans closer, her wings shimmering faintly behind her. Sunbeams dance across the garden, illuminating their faces with soft, magical light. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/cabeb362c9164eebb2683241a21518b9.png","https://images.piclumen.com/normal/20241221/16/14dbdcd6af4c49b78c046748cf83c8d0.png","https://images.piclumen.com/normal/20241221/16/25ff7aeb238f4c6da80bfdba627e811a.png","https://images.piclumen.com/normal/20241221/16/df8754a9c2ea4420ac94771805f4c3fb.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila the Curious Fairy flying gracefully over a vibrant garden path. Below, Hugo the Playful Squirrel follows with spirited leaps. The path is lined with flowers that seem to sway with excitement and tall, whispering grasses. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/1da1c0ae592244ee9e35aa1c471a4ddd.png","https://images.piclumen.com/normal/20241221/16/fd8a08e51ec24e68b313763c84d64af0.png","https://images.piclumen.com/normal/20241221/16/ba3b4cefb2154578a5f5659a5604ee93.png","https://images.piclumen.com/normal/20241221/16/6735728d42164b099d6916f731135dad.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila and Hugo amidst an enchanting section of the garden, surrounded by clusters of bioluminescent mushrooms and arches of luminous roses. A gentle breeze guides them, ruffling Hugo\u2019s fluffy tail. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/a4233ab51efe4e1a95da8cfd4907af49.png","https://images.piclumen.com/normal/20241221/16/623cdcd0371e46af9f415e3f342feac5.png","https://images.piclumen.com/normal/20241221/16/59311e5a2b594637b46fc3363321475a.png","https://images.piclumen.com/normal/20241221/16/ebf8d09d89a14da4b57c299b1c894daa.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A small, intricately designed door, partially obscured by leafy vines. Lila hovers right in front of it, eyes wide with excitement, while Hugo stands beside her, tapping the door eagerly. The maple tree casts dappled sunlight onto the ground, creating a mystical atmosphere. style: whimsical 3D Pixar style"\n            },\n        \n        ],\n        "size": "9:16",\n        "cap_style": "word"\n    }</scene-editor>'),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"lstScene",void 0),(0,f.A)(this,"lstAnim",[]),(0,f.A)(this,"varName",""),(0,f.A)(this,"error",""),(0,f.A)(this,"curIdx",0),(0,f.A)(this,"curScene",void 0),this.app=o}getValue(){return{varName:this.varName,value:JSON.stringify(this.lstScene)}}ngOnInit(){let o=document.createElement("div");o.innerHTML=this.sceneInfo;let r=o.querySelector("scene-editor"),l=this.sceneInfo,u="";r&&(l=r.innerHTML,this.varName=r.getAttribute("var-name")??"",u=r.getAttribute("anim-db")??"");try{this.lstScene=De.parseJson(l)}catch(p){this.error=p+"\n"+De.replaceAllBase64Urls(l)}(this.lstScene?.list_scenes.length??0)>0&&(this.curScene=this.lstScene?.list_scenes[0]),this.app.listData({name:"",spec:u}).subscribe(p=>{this.lstAnim=p.map(_=>JSON.parse(_.content))})}select(o){this.curIdx=o,this.curScene=this.lstScene?.list_scenes[o]}changeCapStyle(o){this.lstScene.cap_style=o}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-editor"]],inputs:{sceneInfo:"sceneInfo"},outputs:{onSave:"onSave"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","layout-bot",4,"ngIf"],[1,"mb-3"],[3,"mode","lstAnim","capStyle","scene","onChangeCapStyle",4,"ngIf"],[3,"onChangeCapStyle","mode","lstAnim","capStyle","scene"],[1,"layout-bot"],[1,"card"],[1,"card-body","list-scenes"],["class","mb-3",3,"click",4,"ngFor","ngForOf"],[1,"mb-3",3,"click"],[3,"mode","selected","showTransit","idx","scene"]],template:function(o,r){1&o&&e.DNE(0,_l,6,1,"div",0)(1,Uu,2,1,"div",1)(2,Bn,4,1,"div",2),2&o&&(e.Y8G("ngIf",r.error),e.R7$(),e.Y8G("ngIf",!r.error),e.R7$(),e.Y8G("ngIf",!r.error))},dependencies:[V.MD,V.Sq,V.bT,w.YN,Qp],styles:[".list-scenes[_ngcontent-%COMP%]{width:115px;max-height:95vh;overflow-y:auto}.layout-bot[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px}"]})),i})();const Kn=["chatInput"],hl=["interacComp"];function ef(t,i){if(1&t&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.chatboxInfo.msg),e.npT)}}function tf(t,i){if(1&t&&e.nrm(0,"app-anim-editor",11,0),2&t){const n=e.XpG(2);e.Y8G("conf",n.animEditorInfo)}}function Yo(t,i){if(1&t&&e.nrm(0,"app-js-runner",12,0),2&t){const n=e.XpG(2);e.Y8G("jsInfo",n.jsRunnerInfo)}}function pr(t,i){if(1&t&&e.nrm(0,"app-scene-editor",13,0),2&t){const n=e.XpG(2);e.Y8G("sceneInfo",n.sceneEditorInfo)}}function bi(t,i){if(1&t&&(e.j41(0,"div",7),e.DNE(1,tf,2,1,"app-anim-editor",8)(2,Yo,2,1,"app-js-runner",9)(3,pr,2,1,"app-scene-editor",10),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.animEditorInfo),e.R7$(),e.Y8G("ngIf",n.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",n.sceneEditorInfo)}}function js(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"textarea",14,1),e.bIt("input",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.autoResize())})("keydown",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.keydown(r))}),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG();return e.DH7(l.userMsg,r)||(l.userMsg=r),e.Njj(r)}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("readOnly",n.isRunning),e.R50("ngModel",n.userMsg)}}let gl=(()=>{var t;class i{constructor(o,r){(0,f.A)(this,"api",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"chatInput",void 0),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"elId",""),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"onAgentResponseComplete",new e.bkB),(0,f.A)(this,"lastValue",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"animDB",""),(0,f.A)(this,"default",!0),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"userMsg",""),(0,f.A)(this,"onAction",new e.bkB),(0,f.A)(this,"onRunJS",new e.bkB),(0,f.A)(this,"onBind",new e.bkB),(0,f.A)(this,"showChatBox",!1),(0,f.A)(this,"queue",[]),(0,f.A)(this,"curFullmsg",""),this.api=o,this.zone=r}getValue(){return this.interacComp&&!this.default?this.interacComp.getValue():this.showChatBox?this.lastValue:void 0}ngOnInit(){this.agentRunner=new Jn(this.api,new Xo((o,r)=>{this.renderChunk(r)},o=>{this.queue.push({str:o,t:-1})})),this.agentRunner.setAgentName(this.chatboxInfo.req.Req.Name),this.agentRunner.setVars(this.chatboxInfo.req.Req.Vars??[]);for(let o of this.chatboxInfo.req.Req.Messages)this.agentRunner.addMessage(o);this.chatboxInfo.req?.Req.Type&&this.agentRunner.setMemType(this.chatboxInfo.req?.Req.Type),"__AGENT_STREAM___"==this.chatboxInfo.msg&&setTimeout(()=>{this.send()},500)}agentDone(o){this.zone.run(()=>{this.isRunning=!1;let r=document.querySelector(".msg-loading"),l=r?r.innerHTML:"",u=r?.querySelector("chatbox")?.getAttribute("var-name")??"";this.lastValue={value:o,varName:u},document.querySelector(".msg-loading").className="msg-assistant",this.onAgentResponseComplete.emit({msg:o,html:l}),this.renderExternalUI(l),this.renderAction(o)})}reset(){this.sceneEditorInfo="",this.animEditorInfo="",this.jsRunnerInfo="",this.animDB="",this.default=!0}renderExternalUI(o){this.reset();let r=document.createElement("div");r.innerHTML=o;let l=r.querySelector("scene-editor");return l?(this.sceneEditorInfo=o,void(this.default=!1)):(l=r.querySelector("anim-editor"),l?(this.animEditorInfo=o,void(this.default=!1)):(l=r.querySelector("js-runner"),l?(this.jsRunnerInfo=o,void(this.default=!1)):void 0))}send(o){if(o?.preventDefault(),this.isRunning)return;let r=document.getElementById("chat-his-"+this.elId);if(r){if(this.userMsg){let u=document.createElement("div");u.className="msg-user badge bg-label-primary p-3 mb-3 text-wrap text-start",u.innerHTML=this.userMsg,r.appendChild(u)}let l=document.createElement("div");l.className="msg-loading",l.innerHTML='<div class="card p-5 mb-3">Running...</div>',r.appendChild(l)}this.isRunning=!0,this.userMsg&&this.agentRunner.addUserMessage(this.userMsg),this.agentRunner.send(),this.userMsg="",this.curFullmsg=""}renderAction(o){setTimeout(()=>{let r=this,l=document.querySelectorAll("[bs-action]");for(let _ of l){let v=_.getAttribute("bs-action"),g=document.createElement("div");g.className="pt-3 text-center",g.innerHTML=`<span class="btn text-link p-0">${v.split("->")[0].split(":")[2]}</span>`,_.appendChild(g),_.removeAttribute("bs-action"),g.addEventListener("click",function(){r.onAction.emit({act:v,el:_})})}let u=document.querySelectorAll("[bs-run]");for(let _ of u){let v=_.getAttribute("bs-run");r.onRunJS.emit({act:v,el:_})}let p=document.querySelectorAll("[bs-edit]");for(let _ of p){let v=_.getAttribute("bs-edit");r.onBind.emit({act:v,el:_})}},2e3)}renderControl(){let r=document.querySelector("#chat-his-"+this.elId)?.querySelector(".language-json"),l=r?.innerHTML;if(l)try{l=JSON.stringify(JSON.parse(l.trim()),null,2),r.innerHTML=l.trim()}catch{}}renderChunk(o){let r=o?o.length:0,l=0;for(;l<r;){const u=Math.floor(9*Math.random())+2,p=Math.floor(16*Math.random())+5;this.queue.push({str:o.substring(l,l+u),t:p}),0==l&&1==this.queue.length&&this.startInsertAnim(),l+=u}}startInsertAnim(){let o=this.queue.shift();if(o){if(-1==o.t)return void this.agentDone(o.str);this.curFullmsg+=o.str,this.renderMsg(this.curFullmsg),setTimeout(()=>{this.startInsertAnim()},o.t)}}renderMsg(o){let r=De.parseIncompleteJson(o);if(r&&r!=o&&(r=JSON.stringify(r)),!r)return"";let l=new Map,u=this.chatboxInfo.req?.Req.Vars;for(let v of u){let g=v.split("::");l.set(g[0],v.substring(g[0].length+2))}l.set(this.chatboxInfo.req.Output.Name,r);let p=De.compileTemplate(this.chatboxInfo.html,l);if(document.getElementById("chat-his-"+this.elId)){let v=document.querySelector(".msg-loading");if(v){let g=document.createElement("code");g.innerHTML=p,g.querySelector("chatbox")&&(this.showChatBox=!0);let x=g.querySelectorAll('[bs-data="markdown-view"]');for(let C of x)C.innerHTML=De.markdownToHtml(C.innerHTML.trim());return v.innerHTML=g.innerHTML,this.renderControl(),v.innerHTML}}return""}autoResize(){const o=this.chatInput?.nativeElement;o.style.height="37px",o.style.overflowY="hidden";let r=o.scrollHeight;r>120&&(r=120,o.style.overflowY="auto"),o.style.height=r+"px"}keydown(o){!o.shiftKey&&"Enter"==o.key&&(o.preventDefault(),""!=this.userMsg.trim()&&this.send(o),setTimeout(()=>{this.autoResize()},100))}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(dt),e.rXU(e.SKi))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-chatbox"]],viewQuery:function(o,r){if(1&o&&(e.GBs(Kn,5),e.GBs(hl,5)),2&o){let l;e.mGM(l=e.lsd())&&(r.chatInput=l.first),e.mGM(l=e.lsd())&&(r.interacComp=l.first)}},inputs:{chatboxInfo:"chatboxInfo",elId:"elId"},outputs:{onAgentResponseComplete:"onAgentResponseComplete",onAction:"onAction",onRunJS:"onRunJS",onBind:"onBind"},standalone:!0,features:[e.aNF],decls:5,vars:8,consts:[["interacComp",""],["chatInput",""],[1,"chatbox"],[3,"id"],[3,"innerHTML",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"innerHTML"],[1,"mt-3"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf"],[3,"jsInfo"],[3,"sceneInfo"],["rows","1","placeholder","Enter your message...",1,"form-control",3,"input","keydown","ngModelChange","readOnly","ngModel"]],template:function(o,r){1&o&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,ef,2,3,"div",4),e.k0s(),e.DNE(3,bi,4,3,"div",5)(4,js,3,2,"div",5),e.k0s()),2&o&&(e.R7$(),e.HbH(r.default||r.isRunning?"":"d-none"),e.Mz_("id","chat-his-",r.elId,""),e.R7$(),e.Y8G("ngIf","__AGENT_STREAM___"!=r.chatboxInfo.msg),e.R7$(),e.Y8G("ngIf",!r.default&&!r.isRunning),e.R7$(),e.Y8G("ngIf",r.showChatBox))},dependencies:[V.MD,V.bT,w.YN,w.me,w.BC,w.vS,Cs,Ts,yi,Bu],styles:["textarea[_ngcontent-%COMP%]{resize:none;overflow-y:hidden;height:37px}"]})),i})(),xi=(()=>{var t;class i{constructor(){(0,f.A)(this,"zipInfo","")}ngOnInit(){let o=JSON.parse(this.decodeHtml(this.zipInfo.trim()));setTimeout((0,he.A)(function*(){let r=yield De.zipFiles(o,"file.zip",_=>{let v=document.querySelector(".__ZIP_FILE__");v&&(v.innerHTML="Zipping..."+_+"/"+o.length)});const l=URL.createObjectURL(r),u=document.createElement("a");u.href=l,u.download="file.zip",u.innerHTML="Download (file.zip)";let p=document.querySelector(".__ZIP_FILE__");p&&(p.innerHTML="",p.appendChild(u))}),500)}decodeHtml(o){const r=document.createElement("textarea");return r.innerHTML=o,r.value}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip"]],inputs:{zipInfo:"zipInfo"},standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[[1,"__ZIP_FILE__"]],template:function(o,r){1&o&&e.nrm(0,"div",0)},dependencies:[V.MD,w.YN]})),i})();const vo=["interacComp"],Ke=(t,i)=>[t,i];function Ze(t,i){if(1&t&&e.nrm(0,"app-chatbox",8,0),2&t){const n=e.XpG();e.Y8G("chatboxInfo",n.chatboxInfo)}}function yo(t,i){if(1&t&&e.nrm(0,"app-scene-editor",9,0),2&t){const n=e.XpG();e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Lt(t,i){if(1&t&&e.nrm(0,"app-anim-editor",10,0),2&t){const n=e.XpG();e.Y8G("conf",n.animEditorInfo)}}function sn(t,i){if(1&t&&e.nrm(0,"app-js-runner",11,0),2&t){const n=e.XpG();e.Y8G("jsInfo",n.jsRunnerInfo)}}function Ho(t,i){if(1&t&&e.nrm(0,"app-zip",12),2&t){const n=e.XpG();e.Y8G("zipInfo",n.zipInfo)}}function Ci(t,i){if(1&t&&(e.nrm(0,"div",13),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.template),e.npT)}}function an(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",14)(1,"azt-upload-multiple-box",15),e.bIt("uploadComplete",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.uploadMultipleFiles(r))}),e.nrm(2,"div",16),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("uploadToCdnMenu",n.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(5,Ke,n.allUploadFileTypes.IMAGE,n.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!1)("showProgress",!0)}}let Ms=(()=>{var t;class i{constructor(){(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"template",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"zipInfo",""),(0,f.A)(this,"uploadInfo",""),(0,f.A)(this,"default",!1),(0,f.A)(this,"allUploadToCdnMenuTypes",Oo),(0,f.A)(this,"allUploadFileTypes",Ja),(0,f.A)(this,"lstFile",[])}getValue(){return this.interacComp?.getValue()}reset(){this.chatboxInfo=void 0,this.sceneEditorInfo="",this.animEditorInfo="",this.zipInfo="",this.default=!1}ngOnInit(){this.reset();let o=this.template.trim();if("__AGENT_STREAM___"==o)return void(this.chatboxInfo={msg:this.template.trim(),req:JSON.parse(this.vars.find(u=>u.startsWith("__chatbox-agent::"))?.substring(17)??""),html:JSON.parse(this.vars.find(u=>u.startsWith("__chatbox-template::"))?.substring(20)??"")});let r=document.createElement("div");r.innerHTML=o;let l=r.querySelector("scene-editor");if(l)this.sceneEditorInfo=o;else if(l=r.querySelector("anim-editor"),l)this.animEditorInfo=o;else if(l=r.querySelector("js-runner"),l)this.jsRunnerInfo=o;else if(l=r.querySelector("zip"),l)this.zipInfo=l.innerHTML;else{if(l=r.querySelector("azt-upload-files"),l){let u=l.querySelector('textarea[class="d-none"]');u&&(this.uploadInfo=""==u.value.trim()?"[]":u.value.trim(),setTimeout(()=>{document.querySelector("azt-upload-files").addEventListener("click",()=>{document.querySelector('#azt-upload-btn input[type="file"]')?.click()}),this.updateFileView()},1e3))}this.default=!0}}uploadMultipleFiles(o){this.lstFile=o;const r=document.querySelector('azt-upload-files textarea[class="d-none"]');r&&(r.value=JSON.stringify(o),this.updateFileView())}updateFileView(){const o=document.querySelector('azt-upload-files textarea[class="d-none"]'),r=o.value;if(document.querySelector("#azt-list-files")?.remove(),""==r.trim())return;const l=JSON.parse(r),u=document.createElement("div");u.id="azt-list-files",u.className="mb-2";for(let p of l){let _=document.createElement("div");_.innerHTML=`<span>${p.name} <i class="bx bx-x ml-2"></i></span>`,_.querySelector("i")?.addEventListener("click",()=>{this.lstFile=this.lstFile.filter(v=>v.url!=p.url),o.value=JSON.stringify(this.lstFile),this.updateFileView()}),u.appendChild(_),document.querySelector("azt-upload-files").parentNode.prepend(u)}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-runner-main-view"]],viewQuery:function(o,r){if(1&o&&e.GBs(vo,5),2&o){let l;e.mGM(l=e.lsd())&&(r.interacComp=l.first)}},inputs:{template:"template",vars:"vars"},standalone:!0,features:[e.aNF],decls:7,vars:7,consts:[["interacComp",""],[3,"chatboxInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"zipInfo",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["id","azt-upload-btn","class","d-none",4,"ngIf"],[3,"chatboxInfo"],[3,"sceneInfo"],[3,"conf"],[3,"jsInfo"],[3,"zipInfo"],[3,"innerHTML"],["id","azt-upload-btn",1,"d-none"],[3,"uploadComplete","uploadToCdnMenu","fileType","convertPdfTimeout","convertPdfToImages","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"]],template:function(o,r){1&o&&e.DNE(0,Ze,2,1,"app-chatbox",1)(1,yo,2,1,"app-scene-editor",2)(2,Lt,2,1,"app-anim-editor",3)(3,sn,2,1,"app-js-runner",4)(4,Ho,1,1,"app-zip",5)(5,Ci,2,3,"div",6)(6,an,3,8,"div",7),2&o&&(e.Y8G("ngIf",r.chatboxInfo),e.R7$(),e.Y8G("ngIf",r.sceneEditorInfo),e.R7$(),e.Y8G("ngIf",r.animEditorInfo),e.R7$(),e.Y8G("ngIf",r.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",r.zipInfo),e.R7$(),e.Y8G("ngIf",r.default),e.R7$(),e.Y8G("ngIf",r.uploadInfo))},dependencies:[V.MD,V.bT,w.YN,Cs,gl,yi,Ts,xi,Bu,Me.Q,bs]})),i})();const Xu=["interacComp"];function Yu(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"a",12),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.close())}),e.qSk(),e.j41(3,"svg",13),e.nrm(4,"path",14)(5,"path",15),e.k0s()()()()}}function $s(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",20)(1,"app-form-node",21),e.bIt("onStartUpload",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.onStartUpload())})("onUploaded",function(r){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onUploaded(r))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.Y8G("data",n)("appId",o.id)}}function Hu(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,$s,2,2,"div",19),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","form"==n.type)}}function Qn(t,i){if(1&t){const n=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.cancelApp())}),e.EFF(1," H\u1ee7y "),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("disabled",n.isCancelling)}}function Gs(t,i){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(3);e.ZvI("",n.submitBtn.icon," mr-2")}}function vl(t,i){if(1&t&&(e.j41(0,"div",22),e.DNE(1,Qn,2,1,"button",23),e.j41(2,"button",24),e.DNE(3,Gs,1,3,"i",25),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.isRunning),e.R7$(),e.Y8G("disabled",n.isRunning||n.isUploading),e.R7$(),e.Y8G("ngIf",n.submitBtn.icon),e.R7$(),e.SpI(" ",n.isRunning?"\u0110ang x\u1eed l\xfd...":n.submitBtn.title," ")}}function Wu(t,i){if(1&t){const n=e.RV6();e.j41(0,"form",16),e.bIt("submit",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.submit(r))}),e.DNE(1,Hu,2,1,"div",17)(2,vl,5,4,"div",18),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.forms),e.R7$(),e.Y8G("ngIf",n.forms.length>0)}}function nf(t,i){if(1&t&&(e.j41(0,"div",33),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,n.lastInfo,100))}}function bo(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",27)(1,"div",28),e.nrm(2,"azt-loading-ui"),e.j41(3,"div",29)(4,"div"),e.EFF(5),e.k0s(),e.DNE(6,nf,3,4,"div",30),e.k0s()(),e.j41(7,"div",31)(8,"button",32),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.cancelApp())}),e.EFF(9,"H\u1ee7y"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.JRh(n.lastStatus?n.lastStatus:"\u0110ang x\u1eed l\xfd..."),e.R7$(),e.Y8G("ngIf",n.lastInfo)}}function Si(t,i){if(1&t&&e.nrm(0,"app-runner-main-view",36,0),2&t){const n=e.XpG(2);e.Y8G("vars",n.runInfo.vars)("template",n.runInfo.data)}}function ki(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22)(1,"button",37),e.bIt("click",function(){let r;e.eBV(n);const l=e.XpG(2);return e.Njj(l.resumeApp(null!==(r=null==l.runInfo?null:l.runInfo.next)&&void 0!==r?r:""))}),e.EFF(2," Ti\u1ebfp t\u1ee5c "),e.k0s()()}}function Ds(t,i){if(1&t&&(e.j41(0,"div",27)(1,"div",34),e.DNE(2,Si,2,2,"app-runner-main-view",35),e.k0s(),e.DNE(3,ki,3,0,"div",18),e.k0s()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.data),e.R7$(),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.next)}}let wi=(()=>{var t;class i{constructor(o,r,l,u){(0,f.A)(this,"route",void 0),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"showActions",!0),(0,f.A)(this,"queryParamsObject",{}),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"appInfo",void 0),(0,f.A)(this,"data",[]),(0,f.A)(this,"id",0),(0,f.A)(this,"forms",[]),(0,f.A)(this,"his",void 0),(0,f.A)(this,"isDone",!1),(0,f.A)(this,"isAsync",!0),(0,f.A)(this,"isFullScreen",!1),(0,f.A)(this,"hasCustomSubmitBtn",!1),(0,f.A)(this,"submitBtn",{title:"B\u1eaft \u0111\u1ea7u",icon:""}),(0,f.A)(this,"isUploading",!1),(0,f.A)(this,"files",[]),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"strResult",""),(0,f.A)(this,"isCancelling",!1),(0,f.A)(this,"showLogDetail",!1),(0,f.A)(this,"strStatus",[]),(0,f.A)(this,"lastStatus",""),(0,f.A)(this,"lastInfo",""),(0,f.A)(this,"runInfo",void 0),(0,f.A)(this,"curToken",""),this.route=o,this.auth=r,this.userSv=l,this.appService=u}getInteracValue(){return this.interacComp?.getValue()}ngOnInit(){this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),o=>{this.loadApp()})}loadApp(){this.id=this.appId,this.load()}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(o=>{this.appService.history(this.id).subscribe(u=>{this.his=u}),this.appInfo=o,this.isAsync=1==o.pinTaskbar,this.data=JSON.parse(o.config);let r=[];for(let u of this.data)r.push(...u.links);this.forms=this.data.filter(u=>-1==r.indexOf(u.id)&&"form"==u.type);let l=this.forms[0]?.conf.filter(u=>"submit"==u.value.type)[0]?.value;this.submitBtn={title:l?.label??"B\u1eaft \u0111\u1ea7u",icon:l?.desc??""},0==this.forms.length&&(this.isRunning=!0,this.isDone=!1,this.runApp(this.queryParamsObject))})}onStartUpload(){this.isUploading=!0}onUploaded(o){let r=this.files.filter(l=>l.name==o.name)[0];r?(r.file=o.file,r.content=o.content):this.files.push(o),this.isUploading=!1}close(){window.history.back()}submit(o){var r=this;return(0,he.A)(function*(){o.preventDefault(),r.isRunning=!0,r.isDone=!1;let l=yield r.getFormArgs();r.runApp(l)})()}getFormArgs(){var o=this;return(0,he.A)(function*(){let r=document.getElementById("nodeForms");const l=new FormData(r);for(let p of o.files){l.set(p.name,p.content);let _=yield De.fileToBase64(p.file);l.set(p.name+"-dataUrl",_)}let u={};return l.forEach((p,_)=>{o.vars.set(_,p instanceof File?p:JSON.stringify(p)),u[_]=p}),u})()}cancelApp(){this.isCancelling=!0,this.appService.cancel(this.curToken).subscribe(o=>{this.isCancelling=!1})}checkStatus(o){this.isRunning&&""!=o?this.appService.status(o).subscribe({next:r=>{if("success"==r.status)this.renderRunInfo(JSON.parse(r.data??"{}"));else{let l=r.message?.split("\n")??[];this.strStatus=[],this.lastInfo="";for(let _ of l)_.startsWith("[i]:")?(this.strStatus[this.strStatus.length-1].startsWith("[i]:")?this.strStatus[this.strStatus.length-1]+=_.substring(4):this.strStatus.push(_),this.lastInfo=_.substring(4)):(this.lastInfo="",this.strStatus.push(_));let p=this.strStatus.filter(_=>!_.startsWith("[i]:"));this.lastStatus=p.length>0?p[p.length-1]:this.lastStatus}setTimeout(()=>{this.checkStatus(o)},1e3)},error:r=>{this.strStatus=[r.message]}}):this.strStatus=[]}loadPrevRunning(){this.his?.token&&(this.isRunning=!0,this.isDone=!1,this.curToken=this.his.token,this.checkStatus(this.his.token))}onRunJS(o){if(!this.runInfo)return;let r=this.getVarValue(o.act);new Function(r)(o.el)}setValue(o,r){if(!this.runInfo)return;let l=o.split("."),u=l[0],p=-1;if(u.endsWith("]")){let x=u.split("[");p=+x[1].split("]")[0],u=x[0]}let _=this.runInfo.vars.filter(x=>x.startsWith(`${u}::`))[0],v=this.runInfo.vars.indexOf(_),g=JSON.parse(_.substring(u.length+2)),y=g;if(p>=0&&(y=y[p],1==l.length))return g[p]=r,void(this.runInfo.vars[v]=u+"::"+JSON.stringify(g,null,2));if(1!=l.length){for(let x=1;x<l.length-1;x++){let C=l[x].split("[");if(C.length>1){let I=+C[1].replace("]","");y=y[C[0]][I]}else y=y[C[0]]}y[l[l.length-1]]=r,this.runInfo.vars[v]=u+"::"+JSON.stringify(g,null,2)}else this.runInfo.vars[v]=u+"::"+r}getVarValue(o){if(!this.runInfo)return"";let r=o.split("."),l=r[0],u=-1;if(l.endsWith("]")){let v=l.split("[");u=+v[1].split("]")[0],l=v[0]}let p=this.runInfo.vars.filter(v=>v.startsWith(`${l}::`))[0],_=JSON.parse(p.substring(l.length+2));u>=0&&(_=_[u]);for(let v=1;v<r.length;v++){let g=r[v].split("[");if(g.length>1){let y=+g[1].replace("]","");_=_[g[0]][y]}else _=_[g[0]]}return _}restart(){location.reload()}resumeApp(o){var r=this;return(0,he.A)(function*(){let l=r.getInteracValue(),u=o.split(":"),p={};for(let v of r.runInfo?.vars??[]){let g=v.split("::");p[g[0]]=g[1]}l?.varName&&(p[l.varName]=l.value);let _=yield r.getFormArgs();for(let v in _)p[v]=_[v];r.isRunning=!0,r.isDone=!1,r.runApp(p,`${u[0]}:${u[1]}`)})()}runApp(o,r){this.curToken="",this.isAsync?this.appService.runAppAsync((r??this.id)+"",o).subscribe({next:l=>{this.checkStatus(l.data),this.curToken=l.data},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}}):this.appService.runApp((r??this.id)+"",o).subscribe({next:l=>{this.renderRunInfo(l)},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}})}renderRunInfo(o){this.runInfo=o,this.isRunning=!1,this.isDone=!0}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(ht.nX),e.rXU(Pt.u),e.rXU(gt.R),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-app-view"]],viewQuery:function(o,r){if(1&o&&e.GBs(Xu,5),2&o){let l;e.mGM(l=e.lsd())&&(r.interacComp=l.first)}},inputs:{appId:"appId",showActions:"showActions",queryParamsObject:"queryParamsObject"},standalone:!0,features:[e.aNF],decls:10,vars:4,consts:[["interacComp",""],[1,"app-main"],[1,"window-container","window-container-sm"],["data-windowbackdrop","true",1,"window","window--active"],[1,"w-100","overflow-hidden",2,"margin-top","10px"],["class","window-top-btn",4,"ngIf"],[1,"window-content","window-content-sm","pb-3"],[1,"pb-3","window-dark","window-dark-sm"],["class","ml-5 mr-5 mt-2 position-relative","id","nodeForms",3,"submit",4,"ngIf"],["class","ml-5 mr-5 position-relative",4,"ngIf"],[1,"window-top-btn"],[1,"window__controls","text-right"],[1,"window__close","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x"],["d","M18 6 6 18","key","1bl5f8"],["d","m6 6 12 12","key","d8bk6v"],["id","nodeForms",1,"ml-5","mr-5","mt-2","position-relative",3,"submit"],[4,"ngFor","ngForOf"],["class","mt-3 text-right",4,"ngIf"],["class","node-form mb-3",4,"ngIf"],[1,"node-form","mb-3"],[3,"onStartUpload","onUploaded","data","appId"],[1,"mt-3","text-right"],["class","btn btn-secondary mr-3","type","button",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"class",4,"ngIf"],["type","button",1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"ml-5","mr-5","position-relative"],[1,"mt-5","flex","items-center"],["id","run-msg",1,"inline-block","ml-2"],["class","small text-muted",4,"ngIf"],[1,"text-right","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"small","text-muted"],[1,"mt-3"],[3,"vars","template",4,"ngIf"],[3,"vars","template"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,r){1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e.DNE(4,Yu,6,0,"div",5),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Wu,3,2,"form",8)(8,bo,10,2,"div",9)(9,Ds,4,2,"div",9),e.k0s()()()()()()),2&o&&(e.R7$(4),e.Y8G("ngIf",r.showActions),e.R7$(3),e.Y8G("ngIf",!r.isRunning&&!r.isDone),e.R7$(),e.Y8G("ngIf",r.isRunning),e.R7$(),e.Y8G("ngIf",r.isDone&&!r.isRunning))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.qT,w.cb,w.cV,As,Ms,kt,Oe.b,Me.Q,we.R],styles:[".position-relative[_ngcontent-%COMP%]{position:relative}"]})),i})();function bn(t,i){1&t&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.EFF(3,"PHI\xcaN D\u1ea0Y \u0110\u1ec0 XU\u1ea4T CHO B\u1ea0N"),e.k0s()(),e.j41(4,"div",2)(5,"div",3),e.EFF(6,"DANH S\xc1CH PHI\xcaN D\u1ea0Y B\u1ea0N \u0110\xc3 \u0110\u0102NG K\xdd"),e.k0s(),e.j41(7,"div",3)(8,"a",4),e.nrm(9,"i",5),e.EFF(10," \u0110\u0103ng k\xfd phi\xean d\u1ea1y m\u1edbi "),e.k0s()(),e.nrm(11,"app-app-view",6),e.k0s()()),2&t&&(e.R7$(11),e.Y8G("appId",11)("showActions",!1))}let xn=(()=>{var t;class i extends Ae.H{constructor(o,r,l){super(),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"isLogged",!1),this.auth=o,this.userSv=r,this.appService=l}ngOnInit(){this.auth.isLoggedIn()?this.isLogged=!0:this.auth.login("",this.userSv.getToken(),o=>{this.isLogged=!0})}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(Pt.u),e.rXU(gt.R),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-edu-store-teacher"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:1,consts:[["class","grid grid-cols-2 gap-4 mt-3",4,"ngIf"],[1,"grid","grid-cols-2","gap-4","mt-3"],[1,"box"],[1,"text-center","mt-3"],["href","/vi/admin/ai/app/10",1,"btn","btn-primary"],[1,"bx","bx-plus","mr-2"],[3,"appId","showActions"]],template:function(o,r){1&o&&(e.j41(0,"teacher-layout"),e.DNE(1,bn,12,2,"div",0),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",r.isLogged))},dependencies:[Oe.b,Do,wi,V.MD,V.bT,w.YN]})),i})();var S=se(1395);function it(t){if("string"==typeof t||"number"==typeof t)return""+t;let i="";if(Array.isArray(t))for(let o,n=0;n<t.length;n++)""!==(o=it(t[n]))&&(i+=(i&&" ")+o);else for(let n in t)t[n]&&(i+=(i&&" ")+n);return i}var eo=se(7528);const xo=t=>{let i;const n=new Set,o=(g,y)=>{const x="function"==typeof g?g(i):g;if(!Object.is(x,i)){const C=i;i=y??("object"!=typeof x||null===x)?x:Object.assign({},i,x),n.forEach(I=>I(i,C))}},r=()=>i,_={setState:o,getState:r,getInitialState:()=>v,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},v=i=t(o,r,_);return _},{useDebugValue:bl}=S,{useSyncExternalStoreWithSelector:fn}=eo,mn=t=>t;function Qe(t,i=mn,n){const o=fn(t.subscribe,t.getState,t.getServerState||t.getInitialState,i,n);return bl(o),o}const Cn=(t,i)=>{const n=(t=>t?xo(t):xo)(t),o=(r,l=i)=>Qe(n,r,l);return Object.assign(o,n),o};function At(t,i){if(Object.is(t,i))return!0;if("object"!=typeof t||null===t||"object"!=typeof i||null===i)return!1;if(t instanceof Map&&i instanceof Map){if(t.size!==i.size)return!1;for(const[o,r]of t)if(!Object.is(r,i.get(o)))return!1;return!0}if(t instanceof Set&&i instanceof Set){if(t.size!==i.size)return!1;for(const o of t)if(!i.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(i).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(i,o)||!Object.is(t[o],i[o]))return!1;return!0}var xl={value:()=>{}};function Cl(){for(var o,t=0,i=arguments.length,n={};t<i;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Wo(n)}function Wo(t){this._=t}function Ni(t,i){for(var r,n=0,o=t.length;n<o;++n)if((r=t[n]).name===i)return r.value}function Os(t,i,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===i){t[o]=xl,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:i,value:n}),t}Wo.prototype=Cl.prototype={constructor:Wo,on:function(t,i){var r,n=this._,o=function Ku(t,i){return t.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!i.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}(t+"",n),l=-1,u=o.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++l<u;)if(r=(t=o[l]).type)n[r]=Os(n[r],t.name,i);else if(null==i)for(r in n)n[r]=Os(n[r],t.name,null);return this}for(;++l<u;)if((r=(t=o[l]).type)&&(r=Ni(n[r],t.name)))return r},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new Wo(t)},call:function(t,i){if((r=arguments.length-2)>0)for(var r,l,n=new Array(r),o=0;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,r=(l=this._[t]).length;o<r;++o)l[o].value.apply(i,n)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,l=o.length;r<l;++r)o[r].value.apply(i,n)}};const Sl=Cl;function fr(){}function Ei(t){return null==t?fr:function(){return this.querySelector(t)}}function Ii(){return[]}function kl(t){return null==t?Ii:function(){return this.querySelectorAll(t)}}function Zo(t){return function(){return this.matches(t)}}function Bs(t){return function(i){return i.matches(t)}}var wl=Array.prototype.find;function El(){return this.firstElementChild}var Sn=Array.prototype.filter;function qo(){return Array.from(this.children)}function no(t){return new Array(t.length)}function mr(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function Co(t,i,n,o,r,l){for(var p,u=0,_=i.length,v=l.length;u<v;++u)(p=i[u])?(p.__data__=l[u],o[u]=p):n[u]=new mr(t,l[u]);for(;u<_;++u)(p=i[u])&&(r[u]=p)}function Ps(t,i,n,o,r,l,u){var p,_,C,v=new Map,g=i.length,y=l.length,x=new Array(g);for(p=0;p<g;++p)(_=i[p])&&(x[p]=C=u.call(_,_.__data__,p,i)+"",v.has(C)?r[p]=_:v.set(C,_));for(p=0;p<y;++p)C=u.call(t,l[p],p,l)+"",(_=v.get(C))?(o[p]=_,_.__data__=l[p],v.delete(C)):n[p]=new mr(t,l[p]);for(p=0;p<g;++p)(_=i[p])&&v.get(x[p])===_&&(r[p]=_)}function nd(t){return t.__data__}function od(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Tl(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}mr.prototype={constructor:mr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var vr="http://www.w3.org/1999/xhtml";const yr={svg:"http://www.w3.org/2000/svg",xhtml:vr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fi(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),yr.hasOwnProperty(i)?{space:yr[i],local:t}:t}function Ko(t){return function(){this.removeAttribute(t)}}function st(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wt(t,i){return function(){this.setAttribute(t,i)}}function Tt(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Xs(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function br(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function rd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ut(t){return function(){this.style.removeProperty(t)}}function jl(t,i,n){return function(){this.style.setProperty(t,i,n)}}function Ml(t,i,n){return function(){var o=i.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Kt(t,i){return t.style.getPropertyValue(i)||rd(t).getComputedStyle(t,null).getPropertyValue(i)}function kn(t){return function(){delete this[t]}}function Cr(t,i){return function(){this[t]=i}}function Gl(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ol(t){return t.trim().split(/^|\s+/)}function Ys(t){return t.classList||new Vl(t)}function Vl(t){this._node=t,this._names=Ol(t.getAttribute("class")||"")}function zl(t,i){for(var n=Ys(t),o=-1,r=i.length;++o<r;)n.add(i[o])}function Bl(t,i){for(var n=Ys(t),o=-1,r=i.length;++o<r;)n.remove(i[o])}function sd(t){return function(){zl(this,t)}}function ad(t){return function(){Bl(this,t)}}function ld(t,i){return function(){(i.apply(this,arguments)?zl:Bl)(this,t)}}function cd(){this.textContent=""}function Hs(t){return function(){this.textContent=t}}function Ws(t){return function(){var i=t.apply(this,arguments);this.textContent=i??""}}function Pl(){this.innerHTML=""}function dd(t){return function(){this.innerHTML=t}}function pd(t){return function(){var i=t.apply(this,arguments);this.innerHTML=i??""}}function md(){this.nextSibling&&this.parentNode.appendChild(this)}function _d(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gd(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===vr&&i.documentElement.namespaceURI===vr?i.createElement(t):i.createElementNS(n,t)}}function of(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ul(t){var i=Fi(t);return(i.local?of:gd)(i)}function sf(){return null}function yd(){var t=this.parentNode;t&&t.removeChild(this)}function Zs(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function af(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function qs(t){return function(){var i=this.__on;if(i){for(var l,n=0,o=-1,r=i.length;n<r;++n)l=i[n],t.type&&l.type!==t.type||l.name!==t.name?i[++o]=l:this.removeEventListener(l.type,l.listener,l.options);++o?i.length=o:delete this.__on}}}function xd(t,i,n){return function(){var r,o=this.__on,l=function Fn(t){return function(i){t.call(this,i,this.__data__)}}(i);if(o)for(var u=0,p=o.length;u<p;++u)if((r=o[u]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=l,r.options=n),void(r.value=i);this.addEventListener(t.type,l,n),r={type:t.type,name:t.name,value:i,listener:l,options:n},o?o.push(r):this.__on=[r]}}function Yl(t,i,n){var o=rd(t),r=o.CustomEvent;"function"==typeof r?r=new r(i,n):(r=o.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Hl(t,i){return function(){return Yl(this,t,i)}}function Ri(t,i){return function(){return Yl(this,t,i.apply(this,arguments))}}Vl.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Sd=[null];function ln(t,i){this._groups=t,this._parents=i}function ql(){return new ln([[document.documentElement]],Sd)}ln.prototype=ql.prototype={constructor:ln,select:function Qu(t){"function"!=typeof t&&(t=Ei(t));for(var i=this._groups,n=i.length,o=new Array(n),r=0;r<n;++r)for(var _,v,l=i[r],u=l.length,p=o[r]=new Array(u),g=0;g<u;++g)(_=l[g])&&(v=t.call(_,_.__data__,g,l))&&("__data__"in _&&(v.__data__=_.__data__),p[g]=v);return new ln(o,this._parents)},selectAll:function zs(t){t="function"==typeof t?function Vs(t){return function(){return function ed(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):kl(t);for(var i=this._groups,n=i.length,o=[],r=[],l=0;l<n;++l)for(var _,u=i[l],p=u.length,v=0;v<p;++v)(_=u[v])&&(o.push(t.call(_,_.__data__,v,u)),r.push(_));return new ln(o,r)},selectChild:function Ai(t){return this.select(null==t?El:function Nl(t){return function(){return wl.call(this.children,t)}}("function"==typeof t?t:Bs(t)))},selectChildren:function td(t){return this.selectAll(null==t?qo:function Il(t){return function(){return Sn.call(this.children,t)}}("function"==typeof t?t:Bs(t)))},filter:function to(t){"function"!=typeof t&&(t=Zo(t));for(var i=this._groups,n=i.length,o=new Array(n),r=0;r<n;++r)for(var _,l=i[r],u=l.length,p=o[r]=[],v=0;v<u;++v)(_=l[v])&&t.call(_,_.__data__,v,l)&&p.push(_);return new ln(o,this._parents)},data:function Ls(t,i){if(!arguments.length)return Array.from(this,nd);var n=i?Ps:Co,o=this._parents,r=this._groups;"function"!=typeof t&&(t=function oo(t){return function(){return t}}(t));for(var l=r.length,u=new Array(l),p=new Array(l),_=new Array(l),v=0;v<l;++v){var g=o[v],y=r[v],x=y.length,C=od(t.call(g,g&&g.__data__,v,o)),I=C.length,A=p[v]=new Array(I),T=u[v]=new Array(I);n(g,y,A,T,_[v]=new Array(x),C,i);for(var $,X,M=0,O=0;M<I;++M)if($=A[M]){for(M>=O&&(O=M+1);!(X=T[O])&&++O<I;);$._next=X||null}}return(u=new ln(u,o))._enter=p,u._exit=_,u},enter:function Al(){return new ln(this._enter||this._groups.map(no),this._parents)},exit:function _r(){return new ln(this._exit||this._groups.map(no),this._parents)},join:function Pn(t,i,n){var o=this.enter(),r=this,l=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=i&&(r=i(r))&&(r=r.selection()),null==n?l.remove():n(l),o&&r?o.merge(r).order():r},merge:function hr(t){for(var i=t.selection?t.selection():t,n=this._groups,o=i._groups,r=n.length,u=Math.min(r,o.length),p=new Array(r),_=0;_<u;++_)for(var C,v=n[_],g=o[_],y=v.length,x=p[_]=new Array(y),I=0;I<y;++I)(C=v[I]||g[I])&&(x[I]=C);for(;_<r;++_)p[_]=n[_];return new ln(p,this._parents)},selection:function kd(){return this},order:function gr(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var u,o=t[i],r=o.length-1,l=o[r];--r>=0;)(u=o[r])&&(l&&4^u.compareDocumentPosition(l)&&l.parentNode.insertBefore(u,l),l=u);return this},sort:function Jo(t){function i(y,x){return y&&x?t(y.__data__,x.__data__):!y-!x}t||(t=Tl);for(var n=this._groups,o=n.length,r=new Array(o),l=0;l<o;++l){for(var v,u=n[l],p=u.length,_=r[l]=new Array(p),g=0;g<p;++g)(v=u[g])&&(_[g]=v);_.sort(i)}return new ln(r,this._parents).order()},call:function Ti(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function id(){return Array.from(this)},node:function Fl(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var o=t[i],r=0,l=o.length;r<l;++r){var u=o[r];if(u)return u}return null},size:function rt(){let t=0;for(const i of this)++t;return t},empty:function Us(){return!this.node()},each:function Rl(t){for(var i=this._groups,n=0,o=i.length;n<o;++n)for(var p,r=i[n],l=0,u=r.length;l<u;++l)(p=r[l])&&t.call(p,p.__data__,l,r);return this},attr:function xr(t,i){var n=Fi(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==i?n.local?st:Ko:"function"==typeof i?n.local?br:Xs:n.local?Tt:wt)(n,i))},style:function $l(t,i,n){return arguments.length>1?this.each((null==i?Ut:"function"==typeof i?Ml:jl)(t,i,n??"")):Kt(this.node(),t)},property:function Dl(t,i){return arguments.length>1?this.each((null==i?kn:"function"==typeof i?Gl:Cr)(t,i)):this.node()[t]},classed:function Sr(t,i){var n=Ol(t+"");if(arguments.length<2){for(var o=Ys(this.node()),r=-1,l=n.length;++r<l;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?ld:i?sd:ad)(n,i))},text:function ud(t){return arguments.length?this.each(null==t?cd:("function"==typeof t?Ws:Hs)(t)):this.node().textContent},html:function fd(t){return arguments.length?this.each(null==t?Pl:("function"==typeof t?pd:dd)(t)):this.node().innerHTML},raise:function Ll(){return this.each(md)},lower:function hd(){return this.each(_d)},append:function rf(t){var i="function"==typeof t?t:Ul(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})},insert:function vd(t,i){var n="function"==typeof t?t:Ul(t),o=null==i?sf:"function"==typeof i?i:Ei(i);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function bd(){return this.each(yd)},clone:function lf(t){return this.select(t?af:Zs)},datum:function cf(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function Cd(t,i,n){var r,u,o=function Xl(t){return t.trim().split(/^|\s+/).map(function(i){var n="",o=i.indexOf(".");return o>=0&&(n=i.slice(o+1),i=i.slice(0,o)),{type:i,name:n}})}(t+""),l=o.length;if(!(arguments.length<2)){for(p=i?xd:qs,r=0;r<l;++r)this.each(p(o[r],i,n));return this}var p=this.node().__on;if(p)for(var g,_=0,v=p.length;_<v;++_)for(r=0,g=p[_];r<l;++r)if((u=o[r]).type===g.type&&u.name===g.name)return g.value},dispatch:function Wl(t,i){return this.each(("function"==typeof i?Ri:Hl)(t,i))},[Symbol.iterator]:function*Zl(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var u,o=t[i],r=0,l=o.length;r<l;++r)(u=o[r])&&(yield u)}};const ji=ql;function wn(t){return"string"==typeof t?new ln([[document.querySelector(t)]],[document.documentElement]):new ln([[t]],Sd)}const uf={passive:!1},Ft={capture:!0,passive:!1};function Dt(t){t.stopImmediatePropagation()}function Qo(t){t.preventDefault(),t.stopImmediatePropagation()}function Jl(t){var i=t.document.documentElement,n=wn(t).on("dragstart.drag",Qo,Ft);"onselectstart"in i?n.on("selectstart.drag",Qo,Ft):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function Kl(t,i){var n=t.document.documentElement,o=wn(t).on("dragstart.drag",null);i&&(o.on("click.drag",Qo,Ft),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ql(t){return((t=Math.exp(t))+1/t)/2}const tc=function t(i,n,o){function r(l,u){var T,E,p=l[0],_=l[1],v=l[2],x=u[2],C=u[0]-p,I=u[1]-_,A=C*C+I*I;if(A<1e-12)E=Math.log(x/v)/i,T=function(U){return[p+U*C,_+U*I,v*Math.exp(i*U*E)]};else{var M=Math.sqrt(A),O=(x*x-v*v+o*A)/(2*v*n*M),$=(x*x-v*v-o*A)/(2*x*n*M),X=Math.log(Math.sqrt(O*O+1)-O),Y=Math.log(Math.sqrt($*$+1)-$);E=(Y-X)/i,T=function(U){var te=U*E,H=Ql(X),ue=v/(n*M)*(H*function Nd(t){return((t=Math.exp(2*t))-1)/(t+1)}(i*te+X)-function ec(t){return((t=Math.exp(t))-1/t)/2}(X));return[p+ue*C,_+ue*I,v*H/Ql(i*te+X)]}}return T.duration=1e3*E*i/Math.SQRT2,T}return r.rho=function(l){var u=Math.max(.001,+l),p=u*u;return t(u,p,p*p)},r}(Math.SQRT2,2,4);function Rn(t,i){if(t=function Ed(t){let i;for(;i=t.sourceEvent;)t=i;return t}(t),void 0===i&&(i=t.currentTarget),i){var n=i.ownerSVGElement||i;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(i.getScreenCTM().inverse())).x,o.y]}if(i.getBoundingClientRect){var r=i.getBoundingClientRect();return[t.clientX-r.left-i.clientLeft,t.clientY-r.top-i.clientTop]}}return[t.pageX,t.pageY]}var ti,kr,So=0,ei=0,Mi=0,Js=1e3,wr=0,io=0,Nr=0,ko="object"==typeof performance&&performance.now?performance:Date,Ln="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nc(){return io||(Ln(Id),io=ko.now()+Nr)}function Id(){io=0}function $i(){this._call=this._time=this._next=null}function oc(t,i,n){var o=new $i;return o.restart(t,i,n),o}function Gi(){io=(wr=ko.now())+Nr,So=ei=0;try{!function Ad(){nc(),++So;for(var i,t=ti;t;)(i=io-t._time)>=0&&t._call.call(void 0,i),t=t._next;--So}()}finally{So=0,function df(){for(var t,n,i=ti,o=1/0;i;)i._call?(o>i._time&&(o=i._time),t=i,i=i._next):(n=i._next,i._next=null,i=t?t._next=n:ti=n);kr=t,ic(o)}(),io=0}}function Xt(){var t=ko.now(),i=t-wr;i>Js&&(Nr-=i,wr=t)}function ic(t){So||(ei&&(ei=clearTimeout(ei)),t-io>24?(t<1/0&&(ei=setTimeout(Gi,t-ko.now()-Nr)),Mi&&(Mi=clearInterval(Mi))):(Mi||(wr=ko.now(),Mi=setInterval(Xt,Js)),So=1,Ln(Gi)))}function Er(t,i,n){var o=new $i;return o.restart(r=>{o.stop(),t(r+i)},i=null==i?0:+i,n),o}$i.prototype=oc.prototype={constructor:$i,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?nc():+n)+(null==i?0:+i),!this._next&&kr!==this&&(kr?kr._next=this:ti=this,kr=this),this._call=t,this._time=n,ic()},stop:function(){this._call&&(this._call=null,this._time=1/0,ic())}};var Yt=Sl("start","end","cancel","interrupt"),pf=[],fe=0,Ar=3;function Di(t,i,n,o,r,l){var u=t.__transition;if(u){if(n in u)return}else t.__transition={};!function rc(t,i,n){var r,o=t.__transition;function u(v){var g,y,x,C;if(1!==n.state)return _();for(g in o)if((C=o[g]).name===n.name){if(C.state===Ar)return Er(u);4===C.state?(C.state=6,C.timer.stop(),C.on.call("interrupt",t,t.__data__,C.index,C.group),delete o[g]):+g<i&&(C.state=6,C.timer.stop(),C.on.call("cancel",t,t.__data__,C.index,C.group),delete o[g])}if(Er(function(){n.state===Ar&&(n.state=4,n.timer.restart(p,n.delay,n.time),p(v))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=Ar,r=new Array(x=n.tween.length),g=0,y=-1;g<x;++g)(C=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(r[++y]=C);r.length=y+1}}function p(v){for(var g=v<n.duration?n.ease.call(null,v/n.duration):(n.timer.restart(_),n.state=5,1),y=-1,x=r.length;++y<x;)r[y].call(t,g);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){for(var v in n.state=6,n.timer.stop(),delete o[i],o)return;delete t.__transition}o[i]=n,n.timer=oc(function l(v){n.state=1,n.timer.restart(u,n.delay,n.time),n.delay<=v&&u(v-n.delay)},0,n.time)}(t,n,{name:i,index:o,group:r,on:Yt,tween:pf,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:fe})}function Ks(t,i){var n=Nn(t,i);if(n.state>fe)throw new Error("too late; already scheduled");return n}function jn(t,i){var n=Nn(t,i);if(n.state>Ar)throw new Error("too late; already running");return n}function Nn(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function Oi(t,i){var o,r,u,n=t.__transition,l=!0;if(n){for(u in i=null==i?null:i+"",n)(o=n[u]).name===i?(r=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[u]):l=!1;l&&delete t.__transition}}function Rt(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}var cn,ro=180/Math.PI,Qs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sc(t,i,n,o,r,l){var u,p,_;return(u=Math.sqrt(t*t+i*i))&&(t/=u,i/=u),(_=t*n+i*o)&&(n-=t*_,o-=i*_),(p=Math.sqrt(n*n+o*o))&&(n/=p,o/=p,_/=p),t*o<i*n&&(t=-t,i=-i,_=-_,u=-u),{translateX:r,translateY:l,rotate:Math.atan2(i,t)*ro,skewX:Math.atan(_)*ro,scaleX:u,scaleY:p}}function Rd(t,i,n,o){function r(v){return v.length?v.pop()+" ":""}return function(v,g){var y=[],x=[];return v=t(v),g=t(g),function l(v,g,y,x,C,I){if(v!==y||g!==x){var A=C.push("translate(",null,i,null,n);I.push({i:A-4,x:Rt(v,y)},{i:A-2,x:Rt(g,x)})}else(y||x)&&C.push("translate("+y+i+x+n)}(v.translateX,v.translateY,g.translateX,g.translateY,y,x),function u(v,g,y,x){v!==g?(v-g>180?g+=360:g-v>180&&(v+=360),x.push({i:y.push(r(y)+"rotate(",null,o)-2,x:Rt(v,g)})):g&&y.push(r(y)+"rotate("+g+o)}(v.rotate,g.rotate,y,x),function p(v,g,y,x){v!==g?x.push({i:y.push(r(y)+"skewX(",null,o)-2,x:Rt(v,g)}):g&&y.push(r(y)+"skewX("+g+o)}(v.skewX,g.skewX,y,x),function _(v,g,y,x,C,I){if(v!==y||g!==x){var A=C.push(r(C)+"scale(",null,",",null,")");I.push({i:A-4,x:Rt(v,y)},{i:A-2,x:Rt(g,x)})}else(1!==y||1!==x)&&C.push(r(C)+"scale("+y+","+x+")")}(v.scaleX,v.scaleY,g.scaleX,g.scaleY,y,x),v=g=null,function(C){for(var T,I=-1,A=x.length;++I<A;)y[(T=x[I]).i]=T.x(C);return y.join("")}}}var jd=Rd(function Fd(t){const i=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return i.isIdentity?Qs:sc(i.a,i.b,i.c,i.d,i.e,i.f)},"px, ","px)","deg)"),Md=Rd(function Un(t){return null!=t&&(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),t=cn.transform.baseVal.consolidate())?sc((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Qs},", ",")",")");function $d(t,i){var n,o;return function(){var r=jn(this,t),l=r.tween;if(l!==n)for(var u=0,p=(o=n=l).length;u<p;++u)if(o[u].name===i){(o=o.slice()).splice(u,1);break}r.tween=o}}function Gd(t,i,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var l=jn(this,t),u=l.tween;if(u!==o){r=(o=u).slice();for(var p={name:i,value:n},_=0,v=r.length;_<v;++_)if(r[_].name===i){r[_]=p;break}_===v&&r.push(p)}l.tween=r}}function Vi(t,i,n){var o=t._id;return t.each(function(){var r=jn(this,o);(r.value||(r.value={}))[i]=n.apply(this,arguments)}),function(r){return Nn(r,o).value[i]}}function Tr(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function _n(t,i){var n=Object.create(t.prototype);for(var o in i)n[o]=i[o];return n}function Re(){}var at=1/.7,mt="\\s*([+-]?\\d+)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nt=/^#([0-9a-f]{3,8})$/,Fr=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),ri=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),ea=new RegExp(`^rgba\\(${mt},${mt},${mt},${Vt}\\)$`),ac=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${Vt}\\)$`),Rr=new RegExp(`^hsl\\(${Vt},${Qt},${Qt}\\)$`),un=new RegExp(`^hsla\\(${Vt},${Qt},${Qt},${Vt}\\)$`),ta={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function si(){return this.rgb().formatHex()}function oa(){return this.rgb().formatRgb()}function En(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=Nt.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?jr(i):3===n?new Ht(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?Mn(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?Mn(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Fr.exec(t))?new Ht(i[1],i[2],i[3],1):(i=ri.exec(t))?new Ht(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=ea.exec(t))?Mn(i[1],i[2],i[3],i[4]):(i=ac.exec(t))?Mn(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Rr.exec(t))?lc(i[1],i[2]/100,i[3]/100,1):(i=un.exec(t))?lc(i[1],i[2]/100,i[3]/100,i[4]):ta.hasOwnProperty(t)?jr(ta[t]):"transparent"===t?new Ht(NaN,NaN,NaN,0):null}function jr(t){return new Ht(t>>16&255,t>>8&255,255&t,1)}function Mn(t,i,n,o){return o<=0&&(t=i=n=NaN),new Ht(t,i,n,o)}function wo(t,i,n,o){return 1===arguments.length?function ia(t){return t instanceof Re||(t=En(t)),t?new Ht((t=t.rgb()).r,t.g,t.b,t.opacity):new Ht}(t):new Ht(t,i,n,o??1)}function Ht(t,i,n,o){this.r=+t,this.g=+i,this.b=+n,this.opacity=+o}function Mr(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function Wt(){const t=$n(this.opacity);return`${1===t?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${1===t?")":`, ${t})`}`}function $n(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xt(t){return((t=zt(t))<16?"0":"")+t.toString(16)}function lc(t,i,n,o){return o<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new Gn(t,i,n,o)}function sa(t){if(t instanceof Gn)return new Gn(t.h,t.s,t.l,t.opacity);if(t instanceof Re||(t=En(t)),!t)return new Gn;if(t instanceof Gn)return t;var i=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=Math.min(i,n,o),l=Math.max(i,n,o),u=NaN,p=l-r,_=(l+r)/2;return p?(u=i===l?(n-o)/p+6*(n<o):n===l?(o-i)/p+2:(i-n)/p+4,p/=_<.5?l+r:2-l-r,u*=60):p=_>0&&_<1?0:u,new Gn(u,p,_,t.opacity)}function Gn(t,i,n,o){this.h=+t,this.s=+i,this.l=+n,this.opacity=+o}function ao(t){return(t=(t||0)%360)<0?t+360:t}function $r(t){return Math.max(0,Math.min(1,t||0))}function Gr(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function No(t,i,n,o,r){var l=t*t,u=l*t;return((1-3*t+3*l-u)*i+(4-6*l+3*u)*n+(1+3*t+3*l-3*u)*o+u*r)/6}Tr(Re,En,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:si,formatHex:si,formatHex8:function so(){return this.rgb().formatHex8()},formatHsl:function na(){return sa(this).formatHsl()},formatRgb:oa,toString:oa}),Tr(Ht,wo,_n(Re,{brighter(t){return t=null==t?at:Math.pow(at,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ht(zt(this.r),zt(this.g),zt(this.b),$n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mr,formatHex:Mr,formatHex8:function ra(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Wt,toString:Wt})),Tr(Gn,function cc(t,i,n,o){return 1===arguments.length?sa(t):new Gn(t,i,n,o??1)},_n(Re,{brighter(t){return t=null==t?at:Math.pow(at,t),new Gn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Gn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*i,r=2*n-o;return new Ht(Gr(t>=240?t-240:t+120,r,o),Gr(t,r,o),Gr(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new Gn(ao(this.h),$r(this.s),$r(this.l),$n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$n(this.opacity);return`${1===t?"hsl(":"hsla("}${ao(this.h)}, ${100*$r(this.s)}%, ${100*$r(this.l)}%${1===t?")":`, ${t})`}`}}));const dc=t=>()=>t;function Dd(t,i){var n=i-t;return n?function pc(t,i){return function(n){return t+n*i}}(t,n):dc(isNaN(t)?i:t)}const _c=function t(i){var n=function mf(t){return 1==(t=+t)?Dd:function(i,n){return n-i?function fc(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(o){return Math.pow(t+o*i,n)}}(i,n,t):dc(isNaN(i)?n:i)}}(i);function o(r,l){var u=n((r=wo(r)).r,(l=wo(l)).r),p=n(r.g,l.g),_=n(r.b,l.b),v=Dd(r.opacity,l.opacity);return function(g){return r.r=u(g),r.g=p(g),r.b=_(g),r.opacity=v(g),r+""}}return o.gamma=t,o}(1);function hc(t){return function(i){var u,p,n=i.length,o=new Array(n),r=new Array(n),l=new Array(n);for(u=0;u<n;++u)p=wo(i[u]),o[u]=p.r||0,r[u]=p.g||0,l[u]=p.b||0;return o=t(o),r=t(r),l=t(l),p.opacity=1,function(_){return p.r=o(_),p.g=r(_),p.b=l(_),p+""}}}hc(function uc(t){var i=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,i-1):Math.floor(n*i),r=t[o],l=t[o+1];return No((n-o/i)*i,o>0?t[o-1]:2*r-l,r,l,o<i-1?t[o+2]:2*l-r)}}),hc(function ai(t){var i=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*i);return No((n-o/i)*i,t[(o+i-1)%i],t[o%i],t[(o+1)%i],t[(o+2)%i])}});var Eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aa=new RegExp(Eo.source,"g");function Od(t,i){var o,r,l,n=Eo.lastIndex=aa.lastIndex=0,u=-1,p=[],_=[];for(t+="",i+="";(o=Eo.exec(t))&&(r=aa.exec(i));)(l=r.index)>n&&(l=i.slice(n,l),p[u]?p[u]+=l:p[++u]=l),(o=o[0])===(r=r[0])?p[u]?p[u]+=r:p[++u]=r:(p[++u]=null,_.push({i:u,x:Rt(o,r)})),n=aa.lastIndex;return n<i.length&&(l=i.slice(n),p[u]?p[u]+=l:p[++u]=l),p.length<2?_[0]?function _f(t){return function(i){return t(i)+""}}(_[0].x):function _t(t){return function(){return t}}(i):(i=_.length,function(v){for(var y,g=0;g<i;++g)p[(y=_[g]).i]=y.x(v);return p.join("")})}function Vd(t,i){var n;return("number"==typeof i?Rt:i instanceof En?_c:(n=En(i))?(i=n,_c):Od)(t,i)}function hf(t){return function(){this.removeAttribute(t)}}function zd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bd(t,i,n){var o,l,r=n+"";return function(){var u=this.getAttribute(t);return u===r?null:u===o?l:l=i(o=u,n)}}function gf(t,i,n){var o,l,r=n+"";return function(){var u=this.getAttributeNS(t.space,t.local);return u===r?null:u===o?l:l=i(o=u,n)}}function In(t,i,n){var o,r,l;return function(){var u,_,p=n(this);return null==p?void this.removeAttribute(t):(u=this.getAttribute(t))===(_=p+"")?null:u===o&&_===r?l:(r=_,l=i(o=u,p))}}function gc(t,i,n){var o,r,l;return function(){var u,_,p=n(this);return null==p?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local))===(_=p+"")?null:u===o&&_===r?l:(r=_,l=i(o=u,p))}}function li(t,i){var n,o;function r(){var l=i.apply(this,arguments);return l!==o&&(n=(o=l)&&function la(t,i){return function(n){this.setAttributeNS(t.space,t.local,i.call(this,n))}}(t,l)),n}return r._value=i,r}function ca(t,i){var n,o;function r(){var l=i.apply(this,arguments);return l!==o&&(n=(o=l)&&function Io(t,i){return function(n){this.setAttribute(t,i.call(this,n))}}(t,l)),n}return r._value=i,r}function yc(t,i){return function(){Ks(this,t).delay=+i.apply(this,arguments)}}function yf(t,i){return i=+i,function(){Ks(this,t).delay=i}}function bf(t,i){return function(){jn(this,t).duration=+i.apply(this,arguments)}}function Pd(t,i){return i=+i,function(){jn(this,t).duration=i}}var Sf=ji.prototype.constructor;function Or(t){return function(){this.style.removeProperty(t)}}var _e=0;function Ue(t,i,n,o){this._groups=t,this._parents=i,this._name=n,this._id=o}function R(){return++_e}var D=ji.prototype;Ue.prototype=function G(t){return ji().transition(t)}.prototype={constructor:Ue,select:function Cf(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=Ei(t));for(var o=this._groups,r=o.length,l=new Array(r),u=0;u<r;++u)for(var g,y,p=o[u],_=p.length,v=l[u]=new Array(_),x=0;x<_;++x)(g=p[x])&&(y=t.call(g,g.__data__,x,p))&&("__data__"in g&&(y.__data__=g.__data__),v[x]=y,Di(v[x],i,n,x,v,Nn(g,n)));return new Ue(l,this._parents,i,n)},selectAll:function ma(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=kl(t));for(var o=this._groups,r=o.length,l=[],u=[],p=0;p<r;++p)for(var g,_=o[p],v=_.length,y=0;y<v;++y)if(g=_[y]){for(var C,x=t.call(g,g.__data__,y,_),I=Nn(g,n),A=0,T=x.length;A<T;++A)(C=x[A])&&Di(C,i,n,A,x,I);l.push(x),u.push(g)}return new Ue(l,u,i,n)},selectChild:D.selectChild,selectChildren:D.selectChildren,filter:function xf(t){"function"!=typeof t&&(t=Zo(t));for(var i=this._groups,n=i.length,o=new Array(n),r=0;r<n;++r)for(var _,l=i[r],u=l.length,p=o[r]=[],v=0;v<u;++v)(_=l[v])&&t.call(_,_.__data__,v,l)&&p.push(_);return new Ue(o,this._parents,this._name,this._id)},merge:function Xd(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,o=i.length,l=Math.min(o,n.length),u=new Array(o),p=0;p<l;++p)for(var x,_=i[p],v=n[p],g=_.length,y=u[p]=new Array(g),C=0;C<g;++C)(x=_[C]||v[C])&&(y[C]=x);for(;p<o;++p)u[p]=i[p];return new Ue(u,this._parents,this._name,this._id)},selection:function Dr(){return new Sf(this._groups,this._parents)},transition:function pe(){for(var t=this._name,i=this._id,n=R(),o=this._groups,r=o.length,l=0;l<r;++l)for(var _,u=o[l],p=u.length,v=0;v<p;++v)if(_=u[v]){var g=Nn(_,i);Di(_,t,n,v,u,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Ue(o,this._parents,t,n)},call:D.call,nodes:D.nodes,node:D.node,size:D.size,empty:D.empty,each:D.each,on:function Sc(t,i){var n=this._id;return arguments.length<2?Nn(this.node(),n).on.on(t):this.each(function pa(t,i,n){var o,r,l=function Cc(t){return(t+"").trim().split(/^|\s+/).every(function(i){var n=i.indexOf(".");return n>=0&&(i=i.slice(0,n)),!i||"start"===i})}(i)?Ks:jn;return function(){var u=l(this,t),p=u.on;p!==o&&(r=(o=p).copy()).on(i,n),u.on=r}}(n,t,i))},attr:function vf(t,i){var n=Fi(t),o="transform"===n?Md:Vd;return this.attrTween(t,"function"==typeof i?(n.local?gc:In)(n,o,Vi(this,"attr."+t,i)):null==i?(n.local?zd:hf)(n):(n.local?gf:Bd)(n,o,i))},attrTween:function vc(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var o=Fi(t);return this.tween(n,(o.local?li:ca)(o,i))},style:function d(t,i,n){var o="transform"==(t+="")?jd:Vd;return null==i?this.styleTween(t,function kf(t,i){var n,o,r;return function(){var l=Kt(this,t),u=(this.style.removeProperty(t),Kt(this,t));return l===u?null:l===n&&u===o?r:r=i(n=l,o=u)}}(t,o)).on("end.style."+t,Or(t)):"function"==typeof i?this.styleTween(t,function a(t,i,n){var o,r,l;return function(){var u=Kt(this,t),p=n(this),_=p+"";return null==p&&(this.style.removeProperty(t),_=p=Kt(this,t)),u===_?null:u===o&&_===r?l:(r=_,l=i(o=u,p))}}(t,o,Vi(this,"style."+t,i))).each(function c(t,i){var n,o,r,p,l="style."+i,u="end."+l;return function(){var _=jn(this,t),v=_.on,g=null==_.value[l]?p||(p=Or(i)):void 0;(v!==n||r!==g)&&(o=(n=v).copy()).on(u,r=g),_.on=o}}(this._id,t)):this.styleTween(t,function s(t,i,n){var o,l,r=n+"";return function(){var u=Kt(this,t);return u===r?null:u===o?l:l=i(o=u,n)}}(t,o,i),n).on("end.style."+t,null)},styleTween:function b(t,i,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==i)return this.tween(o,null);if("function"!=typeof i)throw new Error;return this.tween(o,function h(t,i,n){var o,r;function l(){var u=i.apply(this,arguments);return u!==r&&(o=(r=u)&&function m(t,i,n){return function(o){this.style.setProperty(t,i.call(this,o),n)}}(t,u,n)),o}return l._value=i,l}(t,i,n??""))},text:function z(t){return this.tween("text","function"==typeof t?function F(t){return function(){var i=t(this);this.textContent=i??""}}(Vi(this,"text",t)):function k(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function W(t){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function K(t){var i,n;function o(){var r=t.apply(this,arguments);return r!==n&&(i=(n=r)&&function q(t){return function(i){this.textContent=t.call(this,i)}}(r)),i}return o._value=t,o}(t))},remove:function Yd(){return this.on("end.remove",function fa(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function ff(t,i){var n=this._id;if(t+="",arguments.length<2){for(var u,o=Nn(this.node(),n).tween,r=0,l=o.length;r<l;++r)if((u=o[r]).name===t)return u.value;return null}return this.each((null==i?$d:Gd)(n,t,i))},delay:function bc(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?yc:yf)(i,t)):Nn(this.node(),i).delay},duration:function Ld(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?bf:Pd)(i,t)):Nn(this.node(),i).duration},ease:function da(t){var i=this._id;return arguments.length?this.each(function ua(t,i){if("function"!=typeof i)throw new Error;return function(){jn(this,t).ease=i}}(i,t)):Nn(this.node(),i).ease},easeVarying:function xc(t){if("function"!=typeof t)throw new Error;return this.each(function Ud(t,i){return function(){var n=i.apply(this,arguments);if("function"!=typeof n)throw new Error;jn(this,t).ease=n}}(this._id,t))},end:function me(){var t,i,n=this,o=n._id,r=n.size();return new Promise(function(l,u){var p={value:u},_={value:function(){0==--r&&l()}};n.each(function(){var v=jn(this,o),g=v.on;g!==t&&((i=(t=g).copy())._.cancel.push(p),i._.interrupt.push(p),i._.end.push(_)),v.on=i}),0===r&&l()})},[Symbol.iterator]:D[Symbol.iterator]};var Ce={time:null,delay:0,duration:250,ease:function xe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ne(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))throw new Error(`transition ${i} not found`);return n}ji.prototype.interrupt=function Ot(t){return this.each(function(){Oi(this,t)})},ji.prototype.transition=function jt(t){var i,n;t instanceof Ue?(i=t._id,t=t._name):(i=R(),(n=Ce).time=nc(),t=null==t?null:t+"");for(var o=this._groups,r=o.length,l=0;l<r;++l)for(var _,u=o[l],p=u.length,v=0;v<p;++v)(_=u[v])&&Di(_,t,i,v,u,n||Ne(_,i));return new Ue(o,this._parents,t,i)};const Ge=t=>()=>t;function Ao(t,{sourceEvent:i,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function lo(t,i,n){this.k=t,this.x=i,this.y=n}lo.prototype={constructor:lo,scale:function(t){return 1===t?this:new lo(this.k*t,this.x,this.y)},translate:function(t,i){return 0===t&0===i?this:new lo(this.k,this.x+this.k*t,this.y+this.k*i)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ci=new lo(1,0,0);function wf(t){t.stopImmediatePropagation()}function kc(t){t.preventDefault(),t.stopImmediatePropagation()}function Ch(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Sh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function vm(){return this.__zoom||ci}function kh(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function wh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nh(t,i,n){var o=t.invertX(i[0][0])-n[0][0],r=t.invertX(i[1][0])-n[1][0],l=t.invertY(i[0][1])-n[0][1],u=t.invertY(i[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}const Hd=t=>()=>t;function Nf(t,{sourceEvent:i,subject:n,target:o,identifier:r,active:l,x:u,y:p,dx:_,dy:v,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:g}})}function Ih(t){return!t.ctrlKey&&!t.button}function Ah(){return this.parentNode}function Th(t,i){return i??{x:t.x,y:t.y}}function Fh(){return navigator.maxTouchPoints||"ontouchstart"in this}Nf.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},se(6046);const Wd=(0,S.createContext)(null),jh=Wd.Provider,Xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,i)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?i.targetHandle:i.sourceHandle}", edge id: ${i.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ym=Xn.error001();function qe(t,i){const n=(0,S.useContext)(Wd);if(null===n)throw new Error(ym);return Qe(n,t,i)}const Et=()=>{const t=(0,S.useContext)(Wd);if(null===t)throw new Error(ym);return(0,S.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Mh=t=>t.userSelectionActive?"none":"all";function bm({position:t,children:i,className:n,style:o,...r}){const l=qe(Mh),u=`${t}`.split("-");return S.createElement("div",{className:it(["react-flow__panel",n,...u]),style:{...o,pointerEvents:l},...r},i)}function $h({proOptions:t,position:i="bottom-right"}){return t?.hideAttribution?null:S.createElement(bm,{position:i,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},S.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var Dh=(0,S.memo)(({x:t,y:i,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:l={},labelBgPadding:u=[2,4],labelBgBorderRadius:p=2,children:_,className:v,...g})=>{const y=(0,S.useRef)(null),[x,C]=(0,S.useState)({x:0,y:0,width:0,height:0}),I=it(["react-flow__edge-textwrapper",v]);return(0,S.useEffect)(()=>{if(y.current){const A=y.current.getBBox();C({x:A.x,y:A.y,width:A.width,height:A.height})}},[n]),typeof n>"u"||!n?null:S.createElement("g",{transform:`translate(${t-x.width/2} ${i-x.height/2})`,className:I,visibility:x.width?"visible":"hidden",...g},r&&S.createElement("rect",{width:x.width+2*u[0],x:-u[0],y:-u[1],height:x.height+2*u[1],className:"react-flow__edge-textbg",style:l,rx:p,ry:p}),S.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:y,style:o},n),_)});const Ef=t=>({width:t.offsetWidth,height:t.offsetHeight}),_a=(t,i=0,n=1)=>Math.min(Math.max(t,i),n),If=(t={x:0,y:0},i)=>({x:_a(t.x,i[0][0],i[1][0]),y:_a(t.y,i[0][1],i[1][1])}),xm=(t,i,n)=>t<i?_a(Math.abs(t-i),1,50)/50:t>n?-_a(Math.abs(t-n),1,50)/50:0,Cm=(t,i)=>[20*xm(t.x,35,i.width-35),20*xm(t.y,35,i.height-35)],Sm=t=>t.getRootNode?.()||window?.document,wc=({x:t,y:i,width:n,height:o})=>({x:t,y:i,x2:t+n,y2:i+o}),Nm=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Af=(t,i)=>{const n=Math.max(0,Math.min(t.x+t.width,i.x+i.width)-Math.max(t.x,i.x)),o=Math.max(0,Math.min(t.y+t.height,i.y+i.height)-Math.max(t.y,i.y));return Math.ceil(n*o)},Yn=t=>!isNaN(t)&&isFinite(t),bt=Symbol.for("internals"),Em=["Enter"," ","Escape"];function Tf(t){const n=((t=>"nativeEvent"in t)(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Im=t=>"clientX"in t,Bi=(t,i)=>{const n=Im(t),o=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:o-(i?.left??0),y:r-(i?.top??0)}},qd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Nc=({id:t,path:i,labelX:n,labelY:o,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C=20})=>S.createElement(S.Fragment,null,S.createElement("path",{id:t,style:g,d:i,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:x}),C&&S.createElement("path",{d:i,fill:"none",strokeOpacity:0,strokeWidth:C,className:"react-flow__edge-interaction"}),r&&Yn(n)&&Yn(o)?S.createElement(Dh,{x:n,y:o,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v}):null);function Ec(t,i,n){return void 0===n?n:o=>{const r=i().edges.find(l=>l.id===t);r&&n(o,{...r})}}function Am({sourceX:t,sourceY:i,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,l=n<t?n+r:n-r,u=Math.abs(o-i)/2;return[l,o<i?o+u:o-u,r,u]}function Tm({sourceX:t,sourceY:i,targetX:n,targetY:o,sourceControlX:r,sourceControlY:l,targetControlX:u,targetControlY:p}){const _=.125*t+.375*r+.375*u+.125*n,v=.125*i+.375*l+.375*p+.125*o;return[_,v,Math.abs(_-t),Math.abs(v-i)]}Nc.displayName="BaseEdge";var Vr=function(t){return t.Strict="strict",t.Loose="loose",t}(Vr||{}),ha=function(t){return t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal",t}(ha||{}),Jd=function(t){return t.Partial="partial",t.Full="full",t}(Jd||{}),zr=function(t){return t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier",t}(zr||{}),Ff=function(t){return t.Arrow="arrow",t.ArrowClosed="arrowclosed",t}(Ff||{}),be=function(t){return t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom",t}(be||{});function Fm({pos:t,x1:i,y1:n,x2:o,y2:r}){return t===be.Left||t===be.Right?[.5*(i+o),n]:[i,.5*(n+r)]}function Rm({sourceX:t,sourceY:i,sourcePosition:n=be.Bottom,targetX:o,targetY:r,targetPosition:l=be.Top}){const[u,p]=Fm({pos:n,x1:t,y1:i,x2:o,y2:r}),[_,v]=Fm({pos:l,x1:o,y1:r,x2:t,y2:i}),[g,y,x,C]=Tm({sourceX:t,sourceY:i,targetX:o,targetY:r,sourceControlX:u,sourceControlY:p,targetControlX:_,targetControlY:v});return[`M${t},${i} C${u},${p} ${_},${v} ${o},${r}`,g,y,x,C]}const Rf=(0,S.memo)(({sourceX:t,sourceY:i,targetX:n,targetY:o,sourcePosition:r=be.Bottom,targetPosition:l=be.Top,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,interactionWidth:A})=>{const[T,E,M]=Rm({sourceX:t,sourceY:i,sourcePosition:r,targetX:n,targetY:o,targetPosition:l});return S.createElement(Nc,{path:T,labelX:E,labelY:M,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,interactionWidth:A})});Rf.displayName="SimpleBezierEdge";const jm={[be.Left]:{x:-1,y:0},[be.Right]:{x:1,y:0},[be.Top]:{x:0,y:-1},[be.Bottom]:{x:0,y:1}},Mm=(t,i)=>Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2));function jf({sourceX:t,sourceY:i,sourcePosition:n=be.Bottom,targetX:o,targetY:r,targetPosition:l=be.Top,borderRadius:u=5,centerX:p,centerY:_,offset:v=20}){const[g,y,x,C,I]=function Bh({source:t,sourcePosition:i=be.Bottom,target:n,targetPosition:o=be.Top,center:r,offset:l}){const u=jm[i],p=jm[o],_={x:t.x+u.x*l,y:t.y+u.y*l},v={x:n.x+p.x*l,y:n.y+p.y*l},g=(({source:t,sourcePosition:i=be.Bottom,target:n})=>i===be.Left||i===be.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:_,sourcePosition:i,target:v}),y=0!==g.x?"x":"y",x=g[y];let I,A,C=[];const T={x:0,y:0},E={x:0,y:0},[M,O,$,X]=Am({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*p[y]==-1){I=r.x??M,A=r.y??O;const U=[{x:I,y:_.y},{x:I,y:v.y}],te=[{x:_.x,y:A},{x:v.x,y:A}];C=u[y]===x?"x"===y?U:te:"x"===y?te:U}else{const U=[{x:_.x,y:v.y}],te=[{x:v.x,y:_.y}];if(C="x"===y?u.x===x?te:U:u.y===x?U:te,i===o){const le=Math.abs(t[y]-n[y]);if(le<=l){const N=Math.min(l-1,l-le);u[y]===x?T[y]=(_[y]>t[y]?-1:1)*N:E[y]=(v[y]>n[y]?-1:1)*N}}if(i!==o){const le="x"===y?"y":"x",N=u[y]===p[le],L=_[le]>v[le],B=_[le]<v[le];(1===u[y]&&(!N&&L||N&&B)||1!==u[y]&&(!N&&B||N&&L))&&(C="x"===y?U:te)}const H={x:_.x+T.x,y:_.y+T.y},ue={x:v.x+E.x,y:v.y+E.y};Math.max(Math.abs(H.x-C[0].x),Math.abs(ue.x-C[0].x))>=Math.max(Math.abs(H.y-C[0].y),Math.abs(ue.y-C[0].y))?(I=(H.x+ue.x)/2,A=C[0].y):(I=C[0].x,A=(H.y+ue.y)/2)}return[[t,{x:_.x+T.x,y:_.y+T.y},...C,{x:v.x+E.x,y:v.y+E.y},n],I,A,$,X]}({source:{x:t,y:i},sourcePosition:n,target:{x:o,y:r},targetPosition:l,center:{x:p,y:_},offset:v});return[g.reduce((T,E,M)=>{let O="";return O=M>0&&M<g.length-1?function Ph(t,i,n,o){const r=Math.min(Mm(t,i)/2,Mm(i,n)/2,o),{x:l,y:u}=i;return t.x===l&&l===n.x||t.y===u&&u===n.y?`L${l} ${u}`:t.y===u?`L ${l+r*(t.x<n.x?-1:1)},${u}Q ${l},${u} ${l},${u+r*(t.y<n.y?1:-1)}`:`L ${l},${u+r*(t.y<n.y?-1:1)}Q ${l},${u} ${l+r*(t.x<n.x?1:-1)},${u}`}(g[M-1],E,g[M+1],u):`${0===M?"M":"L"}${E.x} ${E.y}`,T+O},""),y,x,C,I]}const Kd=(0,S.memo)(({sourceX:t,sourceY:i,targetX:n,targetY:o,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,sourcePosition:y=be.Bottom,targetPosition:x=be.Top,markerEnd:C,markerStart:I,pathOptions:A,interactionWidth:T})=>{const[E,M,O]=jf({sourceX:t,sourceY:i,sourcePosition:y,targetX:n,targetY:o,targetPosition:x,borderRadius:A?.borderRadius,offset:A?.offset});return S.createElement(Nc,{path:E,labelX:M,labelY:O,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:C,markerStart:I,interactionWidth:T})});Kd.displayName="SmoothStepEdge";const Mf=(0,S.memo)(t=>S.createElement(Kd,{...t,pathOptions:(0,S.useMemo)(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Mf.displayName="StepEdge";const $f=(0,S.memo)(({sourceX:t,sourceY:i,targetX:n,targetY:o,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C})=>{const[I,A,T]=function Lh({sourceX:t,sourceY:i,targetX:n,targetY:o}){const[r,l,u,p]=Am({sourceX:t,sourceY:i,targetX:n,targetY:o});return[`M ${t},${i}L ${n},${o}`,r,l,u,p]}({sourceX:t,sourceY:i,targetX:n,targetY:o});return S.createElement(Nc,{path:I,labelX:A,labelY:T,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C})});function Qd(t,i){return t>=0?.5*t:25*i*Math.sqrt(-t)}function $m({pos:t,x1:i,y1:n,x2:o,y2:r,c:l}){switch(t){case be.Left:return[i-Qd(i-o,l),n];case be.Right:return[i+Qd(o-i,l),n];case be.Top:return[i,n-Qd(n-r,l)];case be.Bottom:return[i,n+Qd(r-n,l)]}}function Gm({sourceX:t,sourceY:i,sourcePosition:n=be.Bottom,targetX:o,targetY:r,targetPosition:l=be.Top,curvature:u=.25}){const[p,_]=$m({pos:n,x1:t,y1:i,x2:o,y2:r,c:u}),[v,g]=$m({pos:l,x1:o,y1:r,x2:t,y2:i,c:u}),[y,x,C,I]=Tm({sourceX:t,sourceY:i,targetX:o,targetY:r,sourceControlX:p,sourceControlY:_,targetControlX:v,targetControlY:g});return[`M${t},${i} C${p},${_} ${v},${g} ${o},${r}`,y,x,C,I]}$f.displayName="StraightEdge";const ep=(0,S.memo)(({sourceX:t,sourceY:i,targetX:n,targetY:o,sourcePosition:r=be.Bottom,targetPosition:l=be.Top,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,pathOptions:A,interactionWidth:T})=>{const[E,M,O]=Gm({sourceX:t,sourceY:i,sourcePosition:r,targetX:n,targetY:o,targetPosition:l,curvature:A?.curvature});return S.createElement(Nc,{path:E,labelX:M,labelY:O,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:I,interactionWidth:T})});ep.displayName="BezierEdge";const Gf=(0,S.createContext)(null),Uh=Gf.Provider,Om=({source:t,sourceHandle:i,target:n,targetHandle:o})=>`reactflow__edge-${t}${i||""}-${n}${o||""}`,Df=(t,i)=>typeof t>"u"?"":"string"==typeof t?t:`${i?`${i}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`,Vm=(t,i)=>{if(!t.source||!t.target)return Xn.error006(),i;let n;return n=(t=>"id"in t&&"source"in t&&"target"in t)(t)?{...t}:{...t,id:Om(t)},((t,i)=>i.some(n=>!(n.source!==t.source||n.target!==t.target||n.sourceHandle!==t.sourceHandle&&(n.sourceHandle||t.sourceHandle)||n.targetHandle!==t.targetHandle&&(n.targetHandle||t.targetHandle))))(n,i)?i:i.concat(n)},Of=({x:t,y:i},[n,o,r],l,[u,p])=>{const _={x:(t-n)/r,y:(i-o)/r};return l?{x:u*Math.round(_.x/u),y:p*Math.round(_.y/p)}:_},zm=({x:t,y:i},[n,o,r])=>({x:t*r+n,y:i*r+o}),ga=(t,i=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*i[0],o=(t.height??0)*i[1],r={x:t.position.x-n,y:t.position.y-o};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:r}},tp=(t,i=[0,0])=>{if(0===t.length)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const{x:l,y:u}=ga(r,i).positionAbsolute;return((t,i)=>({x:Math.min(t.x,i.x),y:Math.min(t.y,i.y),x2:Math.max(t.x2,i.x2),y2:Math.max(t.y2,i.y2)}))(o,wc({x:l,y:u,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:t,y:i,x2:n,y2:o})=>({x:t,y:i,width:n-t,height:o-i}))(n)},Bm=(t,i,[n,o,r]=[0,0,1],l=!1,u=!1,p=[0,0])=>{const _={x:(i.x-n)/r,y:(i.y-o)/r,width:i.width/r,height:i.height/r},v=[];return t.forEach(g=>{const{width:y,height:x,selectable:C=!0,hidden:I=!1}=g;if(u&&!C||I)return!1;const{positionAbsolute:A}=ga(g,p),E=Af(_,{x:A.x,y:A.y,width:y||0,height:x||0});(typeof y>"u"||typeof x>"u"||null===y||null===x||l&&E>0||E>=(y||0)*(x||0)||g.dragging)&&v.push(g)}),v},Pm=(t,i)=>{const n=t.map(o=>o.id);return i.filter(o=>n.includes(o.source)||n.includes(o.target))},Vf=(t,i,n,o,r,l=.1)=>{const _=Math.min(i/(t.width*(1+l)),n/(t.height*(1+l))),v=_a(_,o,r);return{x:i/2-(t.x+t.width/2)*v,y:n/2-(t.y+t.height/2)*v,zoom:v}},Br=(t,i=0)=>t.transition().duration(i);function Lm(t,i,n,o){return(i[n]||[]).reduce((r,l)=>(`${t.id}-${l.id}-${n}`!==o&&r.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),r),[])}const qh={source:null,target:null,sourceHandle:null,targetHandle:null},Um=()=>({handleDomNode:null,isValid:!1,connection:qh,endHandle:null});function Xm(t,i,n,o,r,l,u){const p="target"===r,_=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),v={...Um(),handleDomNode:_};if(_){const g=zf(void 0,_),y=_.getAttribute("data-nodeid"),x=_.getAttribute("data-handleid"),C=_.classList.contains("connectable"),I=_.classList.contains("connectableend"),A={source:p?y:n,sourceHandle:p?x:o,target:p?n:y,targetHandle:p?o:x};v.connection=A,C&&I&&(i===Vr.Strict?p&&"source"===g||!p&&"target"===g:y!==n||x!==o)&&(v.endHandle={nodeId:y,handleId:x,type:g},v.isValid=l(A))}return v}function zf(t,i){return t||(i?.classList.contains("target")?"target":i?.classList.contains("source")?"source":null)}function Bf(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Kh(t,i){let n=null;return i?n="valid":t&&!i&&(n="invalid"),n}function Ym({event:t,handleId:i,nodeId:n,onConnect:o,isTarget:r,getState:l,setState:u,isValidConnection:p,edgeUpdaterType:_,onReconnectEnd:v}){const g=Sm(t.target),{connectionMode:y,domNode:x,autoPanOnConnect:C,connectionRadius:I,onConnectStart:A,panBy:T,getNodes:E,cancelConnection:M}=l();let $,O=0;const{x:X,y:Y}=Bi(t),U=g?.elementFromPoint(X,Y),te=zf(_,U),H=x?.getBoundingClientRect();if(!H||!te)return;let ue,ie=Bi(t,H),de=!1,le=null,N=!1,L=null;const B=function Jh({nodes:t,nodeId:i,handleId:n,handleType:o}){return t.reduce((r,l)=>{if(l[bt]){const{handleBounds:u}=l[bt];let p=[],_=[];u&&(p=Lm(l,u,"source",`${i}-${n}-${o}`),_=Lm(l,u,"target",`${i}-${n}-${o}`)),r.push(...p,..._)}return r},[])}({nodes:E(),nodeId:n,handleId:i,handleType:te}),J=()=>{if(!C)return;const[Q,re]=Cm(ie,H);T({x:Q,y:re}),O=requestAnimationFrame(J)};function ae(Q){const{transform:re}=l();ie=Bi(Q,H);const{handle:ce,validHandleResult:ye}=function Zh(t,i,n,o,r,l){const{x:u,y:p}=Bi(t),v=i.elementsFromPoint(u,p).find(I=>I.classList.contains("react-flow__handle"));if(v){const I=v.getAttribute("data-nodeid");if(I){const A=zf(void 0,v),T=v.getAttribute("data-handleid"),E=l({nodeId:I,id:T,type:A});if(E){const M=r.find(O=>O.nodeId===I&&O.type===A&&O.id===T);return{handle:{id:T,type:A,nodeId:I,x:M?.x||n.x,y:M?.y||n.y},validHandleResult:E}}}}let g=[],y=1/0;if(r.forEach(I=>{const A=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(A<=o){const T=l(I);A<=y&&(A<y?g=[{handle:I,validHandleResult:T}]:A===y&&g.push({handle:I,validHandleResult:T}),y=A)}}),!g.length)return{handle:null,validHandleResult:Um()};if(1===g.length)return g[0];const x=g.some(({validHandleResult:I})=>I.isValid),C=g.some(({handle:I})=>"target"===I.type);return g.find(({handle:I,validHandleResult:A})=>C?"target"===I.type:!x||A.isValid)||g[0]}(Q,g,Of(ie,re,!1,[1,1]),I,B,ve=>Xm(ve,y,n,i,r?"target":"source",p,g));if($=ce,de||(J(),de=!0),L=ye.handleDomNode,le=ye.connection,N=ye.isValid,u({connectionPosition:$&&N?zm({x:$.x,y:$.y},re):ie,connectionStatus:Kh(!!$,N),connectionEndHandle:ye.endHandle}),!$&&!N&&!L)return Bf(ue);le.source!==le.target&&L&&(Bf(ue),ue=L,L.classList.add("connecting","react-flow__handle-connecting"),L.classList.toggle("valid",N),L.classList.toggle("react-flow__handle-valid",N))}function P(Q){($||L)&&le&&N&&o?.(le),l().onConnectEnd?.(Q),_&&v?.(Q),Bf(ue),M(),cancelAnimationFrame(O),de=!1,N=!1,le=null,L=null,g.removeEventListener("mousemove",ae),g.removeEventListener("mouseup",P),g.removeEventListener("touchmove",ae),g.removeEventListener("touchend",P)}u({connectionPosition:ie,connectionStatus:null,connectionNodeId:n,connectionHandleId:i,connectionHandleType:te,connectionStartHandle:{nodeId:n,handleId:i,type:te},connectionEndHandle:null}),A?.(t,{nodeId:n,handleId:i,handleType:te}),g.addEventListener("mousemove",ae),g.addEventListener("mouseup",P),g.addEventListener("touchmove",ae),g.addEventListener("touchend",P)}const Hm=()=>!0,Qh=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Wm=(0,S.forwardRef)(({type:t="source",position:i=be.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:l=!0,id:u,onConnect:p,children:_,className:v,onMouseDown:g,onTouchStart:y,...x},C)=>{const I=u||null,A="target"===t,T=Et(),E=(0,S.useContext)(Gf),{connectOnClick:M,noPanClassName:O}=qe(Qh,At),{connecting:$,clickConnecting:X}=qe(((t,i,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:l,connectionClickStartHandle:u}=o;return{connecting:r?.nodeId===t&&r?.handleId===i&&r?.type===n||l?.nodeId===t&&l?.handleId===i&&l?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===i&&u?.type===n}})(E,I,t),At);E||T.getState().onError?.("010",Xn.error010());const Y=H=>{const{defaultEdgeOptions:ue,onConnect:ie,hasDefaultEdges:de}=T.getState(),le={...ue,...H};if(de){const{edges:N,setEdges:L}=T.getState();L(Vm(le,N))}ie?.(le),p?.(le)},U=H=>{if(!E)return;const ue=Im(H);r&&(ue&&0===H.button||!ue)&&Ym({event:H,handleId:I,nodeId:E,onConnect:Y,isTarget:A,getState:T.getState,setState:T.setState,isValidConnection:n||T.getState().isValidConnection||Hm}),ue?g?.(H):y?.(H)};return S.createElement("div",{"data-handleid":I,"data-nodeid":E,"data-handlepos":i,"data-id":`${E}-${I}-${t}`,className:it(["react-flow__handle",`react-flow__handle-${i}`,"nodrag",O,v,{source:!A,target:A,connectable:o,connectablestart:r,connectableend:l,connecting:X,connectionindicator:o&&(r&&!$||l&&$)}]),onMouseDown:U,onTouchStart:U,onClick:M?H=>{const{onClickConnectStart:ue,onClickConnectEnd:ie,connectionClickStartHandle:de,connectionMode:le,isValidConnection:N}=T.getState();if(!E||!de&&!r)return;if(!de)return ue?.(H,{nodeId:E,handleId:I,handleType:t}),void T.setState({connectionClickStartHandle:{nodeId:E,type:t,handleId:I}});const L=Sm(H.target),B=n||N||Hm,{connection:J,isValid:ae}=Xm({nodeId:E,id:I,type:t},le,de.nodeId,de.handleId||null,de.type,B,L);ae&&Y(J),ie?.(H),T.setState({connectionClickStartHandle:null})}:void 0,ref:C,...x},_)});Wm.displayName="Handle";var va=(0,S.memo)(Wm);const Zm=({data:t,isConnectable:i,targetPosition:n=be.Top,sourcePosition:o=be.Bottom})=>S.createElement(S.Fragment,null,S.createElement(va,{type:"target",position:n,isConnectable:i}),t?.label,S.createElement(va,{type:"source",position:o,isConnectable:i}));Zm.displayName="DefaultNode";var Pf=(0,S.memo)(Zm);const qm=({data:t,isConnectable:i,sourcePosition:n=be.Bottom})=>S.createElement(S.Fragment,null,t?.label,S.createElement(va,{type:"source",position:n,isConnectable:i}));qm.displayName="InputNode";var Jm=(0,S.memo)(qm);const Km=({data:t,isConnectable:i,targetPosition:n=be.Top})=>S.createElement(S.Fragment,null,S.createElement(va,{type:"target",position:n,isConnectable:i}),t?.label);Km.displayName="OutputNode";var Qm=(0,S.memo)(Km);const Lf=()=>null;Lf.displayName="GroupNode";const tg=t=>({selectedNodes:t.getNodes().filter(i=>i.selected),selectedEdges:t.edges.filter(i=>i.selected).map(i=>({...i}))}),np=t=>t.id;function ng(t,i){return At(t.selectedNodes.map(np),i.selectedNodes.map(np))&&At(t.selectedEdges.map(np),i.selectedEdges.map(np))}const e_=(0,S.memo)(({onSelectionChange:t})=>{const i=Et(),{selectedNodes:n,selectedEdges:o}=qe(tg,ng);return(0,S.useEffect)(()=>{const r={nodes:n,edges:o};t?.(r),i.getState().onSelectionChange.forEach(l=>l(r))},[n,o,t]),null});e_.displayName="SelectionListener";const og=t=>!!t.onSelectionChange;function ig({onSelectionChange:t}){const i=qe(og);return t||i?S.createElement(e_,{onSelectionChange:t}):null}const rg=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function ya(t,i){(0,S.useEffect)(()=>{typeof t<"u"&&i(t)},[t])}function je(t,i,n){(0,S.useEffect)(()=>{typeof i<"u"&&n({[t]:i})},[i])}const sg=({nodes:t,edges:i,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:l,onConnectEnd:u,onClickConnectStart:p,onClickConnectEnd:_,nodesDraggable:v,nodesConnectable:g,nodesFocusable:y,edgesFocusable:x,edgesUpdatable:C,elevateNodesOnSelect:I,minZoom:A,maxZoom:T,nodeExtent:E,onNodesChange:M,onEdgesChange:O,elementsSelectable:$,connectionMode:X,snapGrid:Y,snapToGrid:U,translateExtent:te,connectOnClick:H,defaultEdgeOptions:ue,fitView:ie,fitViewOptions:de,onNodesDelete:le,onEdgesDelete:N,onNodeDrag:L,onNodeDragStart:B,onNodeDragStop:J,onSelectionDrag:ae,onSelectionDragStart:P,onSelectionDragStop:Q,noPanClassName:re,nodeOrigin:ce,rfId:ye,autoPanOnConnect:ve,autoPanOnNodeDrag:Te,onError:Xe,connectionRadius:He,isValidConnection:et,nodeDragThreshold:Ct})=>{const{setNodes:lt,setEdges:co,setDefaultNodesAndEdges:Wn,setMinZoom:uo,setMaxZoom:Zn,setTranslateExtent:Bt,setNodeExtent:Ro,reset:ct}=qe(rg,At),Se=Et();return(0,S.useEffect)(()=>{const Dn=o?.map(Ur=>({...Ur,...ue}));return Wn(n,Dn),()=>{ct()}},[]),je("defaultEdgeOptions",ue,Se.setState),je("connectionMode",X,Se.setState),je("onConnect",r,Se.setState),je("onConnectStart",l,Se.setState),je("onConnectEnd",u,Se.setState),je("onClickConnectStart",p,Se.setState),je("onClickConnectEnd",_,Se.setState),je("nodesDraggable",v,Se.setState),je("nodesConnectable",g,Se.setState),je("nodesFocusable",y,Se.setState),je("edgesFocusable",x,Se.setState),je("edgesUpdatable",C,Se.setState),je("elementsSelectable",$,Se.setState),je("elevateNodesOnSelect",I,Se.setState),je("snapToGrid",U,Se.setState),je("snapGrid",Y,Se.setState),je("onNodesChange",M,Se.setState),je("onEdgesChange",O,Se.setState),je("connectOnClick",H,Se.setState),je("fitViewOnInit",ie,Se.setState),je("fitViewOnInitOptions",de,Se.setState),je("onNodesDelete",le,Se.setState),je("onEdgesDelete",N,Se.setState),je("onNodeDrag",L,Se.setState),je("onNodeDragStart",B,Se.setState),je("onNodeDragStop",J,Se.setState),je("onSelectionDrag",ae,Se.setState),je("onSelectionDragStart",P,Se.setState),je("onSelectionDragStop",Q,Se.setState),je("noPanClassName",re,Se.setState),je("nodeOrigin",ce,Se.setState),je("rfId",ye,Se.setState),je("autoPanOnConnect",ve,Se.setState),je("autoPanOnNodeDrag",Te,Se.setState),je("onError",Xe,Se.setState),je("connectionRadius",He,Se.setState),je("isValidConnection",et,Se.setState),je("nodeDragThreshold",Ct,Se.setState),ya(t,lt),ya(i,co),ya(A,uo),ya(T,Zn),ya(te,Bt),ya(E,Ro),null},t_={display:"none"},ag={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},n_="react-flow__node-desc",o_="react-flow__edge-desc",lg="react-flow__aria-live",cg=t=>t.ariaLiveMessage;function ug({rfId:t}){const i=qe(cg);return S.createElement("div",{id:`${lg}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:ag},i)}function dg({rfId:t,disableKeyboardA11y:i}){return S.createElement(S.Fragment,null,S.createElement("div",{id:`${n_}-${t}`,style:t_},"Press enter or space to select a node.",!i&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),S.createElement("div",{id:`${o_}-${t}`,style:t_},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!i&&S.createElement(ug,{rfId:t}))}var Ic=(t=null,i={actInsideInputWithModifier:!0})=>{const[n,o]=(0,S.useState)(!1),r=(0,S.useRef)(!1),l=(0,S.useRef)(new Set([])),[u,p]=(0,S.useMemo)(()=>{if(null!==t){const v=(Array.isArray(t)?t:[t]).filter(y=>"string"==typeof y).map(y=>y.split("+")),g=v.reduce((y,x)=>y.concat(...x),[]);return[v,g]}return[[],[]]},[t]);return(0,S.useEffect)(()=>{const _=typeof document<"u"?document:null,v=i?.target||_;if(null!==t){const g=C=>{if(r.current=C.ctrlKey||C.metaKey||C.shiftKey,(!r.current||r.current&&!i.actInsideInputWithModifier)&&Tf(C))return!1;const A=r_(C.code,p);l.current.add(C[A]),i_(u,l.current,!1)&&(C.preventDefault(),o(!0))},y=C=>{if((!r.current||r.current&&!i.actInsideInputWithModifier)&&Tf(C))return!1;const A=r_(C.code,p);i_(u,l.current,!0)?(o(!1),l.current.clear()):l.current.delete(C[A]),"Meta"===C.key&&l.current.clear(),r.current=!1},x=()=>{l.current.clear(),o(!1)};return v?.addEventListener("keydown",g),v?.addEventListener("keyup",y),window.addEventListener("blur",x),()=>{v?.removeEventListener("keydown",g),v?.removeEventListener("keyup",y),window.removeEventListener("blur",x)}}},[t,o]),n};function i_(t,i,n){return t.filter(o=>n||o.length===i.size).some(o=>o.every(r=>i.has(r)))}function r_(t,i){return i.includes(t)?"code":"key"}function s_(t,i,n,o){const r=t.parentNode||t.parentId;if(!r)return n;const l=i.get(r),u=ga(l,o);return s_(l,i,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(l[bt]?.z??0)>(n.z??0)?l[bt]?.z??0:n.z??0},o)}function a_(t,i,n){t.forEach(o=>{const r=o.parentNode||o.parentId;if(r&&!t.has(r))throw new Error(`Parent node ${r} not found`);if(r||n?.[o.id]){const{x:l,y:u,z:p}=s_(o,t,{...o.position,z:o[bt]?.z??0},i);o.positionAbsolute={x:l,y:u},o[bt].z=p,n?.[o.id]&&(o[bt].isParent=!0)}})}function Uf(t,i,n,o){const r=new Map,l={},u=o?1e3:0;return t.forEach(p=>{const _=(Yn(p.zIndex)?p.zIndex:0)+(p.selected?u:0),v=i.get(p.id),g={...p,positionAbsolute:{x:p.position.x,y:p.position.y}},y=p.parentNode||p.parentId;y&&(l[y]=!0),Object.defineProperty(g,bt,{enumerable:!1,value:{handleBounds:v?.type&&v?.type!==p.type?void 0:v?.[bt]?.handleBounds,z:_}}),r.set(p.id,g)}),a_(r,n,l),r}function l_(t,i={}){const{getNodes:n,width:o,height:r,minZoom:l,maxZoom:u,d3Zoom:p,d3Selection:_,fitViewOnInitDone:v,fitViewOnInit:g,nodeOrigin:y}=t();if(p&&_&&(i.initial&&!v&&g||!i.initial)){const I=n().filter(T=>{const E=i.includeHiddenNodes?T.width&&T.height:!T.hidden;return i.nodes?.length?E&&i.nodes.some(M=>M.id===T.id):E}),A=I.every(T=>T.width&&T.height);if(I.length>0&&A){const T=tp(I,y),{x:E,y:M,zoom:O}=Vf(T,o,r,i.minZoom??l,i.maxZoom??u,i.padding??.1),$=ci.translate(E,M).scale(O);return p.transform("number"==typeof i.duration&&i.duration>0?Br(_,i.duration):_,$),!0}}return!1}function pg(t,i){return t.forEach(n=>{const o=i.get(n.id);o&&i.set(o.id,{...o,[bt]:o[bt],selected:n.selected})}),new Map(i)}function fg(t,i){return i.map(n=>{const o=t.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function op({changedNodes:t,changedEdges:i,get:n,set:o}){const{nodeInternals:r,edges:l,onNodesChange:u,onEdgesChange:p,hasDefaultNodes:_,hasDefaultEdges:v}=n();t?.length&&(_&&o({nodeInternals:pg(t,r)}),u?.(t)),i?.length&&(v&&o({edges:fg(i,l)}),p?.(i))}const ba=()=>{},mg={zoomIn:ba,zoomOut:ba,zoomTo:ba,getZoom:()=>1,setViewport:ba,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ba,fitBounds:ba,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},_g=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function Xf(){const t=(()=>{const t=Et(),{d3Zoom:i,d3Selection:n}=qe(_g,At);return(0,S.useMemo)(()=>n&&i?{zoomIn:r=>i.scaleBy(Br(n,r?.duration),1.2),zoomOut:r=>i.scaleBy(Br(n,r?.duration),1/1.2),zoomTo:(r,l)=>i.scaleTo(Br(n,l?.duration),r),getZoom:()=>t.getState().transform[2],setViewport:(r,l)=>{const[u,p,_]=t.getState().transform,v=ci.translate(r.x??u,r.y??p).scale(r.zoom??_);i.transform(Br(n,l?.duration),v)},getViewport:()=>{const[r,l,u]=t.getState().transform;return{x:r,y:l,zoom:u}},fitView:r=>l_(t.getState,r),setCenter:(r,l,u)=>{const{width:p,height:_,maxZoom:v}=t.getState(),g=typeof u?.zoom<"u"?u.zoom:v,C=ci.translate(p/2-r*g,_/2-l*g).scale(g);i.transform(Br(n,u?.duration),C)},fitBounds:(r,l)=>{const{width:u,height:p,minZoom:_,maxZoom:v}=t.getState(),{x:g,y,zoom:x}=Vf(r,u,p,_,v,l?.padding??.1),C=ci.translate(g,y).scale(x);i.transform(Br(n,l?.duration),C)},project:r=>{const{transform:l,snapToGrid:u,snapGrid:p}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Of(r,l,u,p)},screenToFlowPosition:r=>{const{transform:l,snapToGrid:u,snapGrid:p,domNode:_}=t.getState();if(!_)return r;const{x:v,y:g}=_.getBoundingClientRect();return Of({x:r.x-v,y:r.y-g},l,u,p)},flowToScreenPosition:r=>{const{transform:l,domNode:u}=t.getState();if(!u)return r;const{x:p,y:_}=u.getBoundingClientRect(),v=zm(r,l);return{x:v.x+p,y:v.y+_}},viewportInitialized:!0}:mg,[i,n])})(),i=Et(),n=(0,S.useCallback)(()=>i.getState().getNodes().map(A=>({...A})),[]),o=(0,S.useCallback)(A=>i.getState().nodeInternals.get(A),[]),r=(0,S.useCallback)(()=>{const{edges:A=[]}=i.getState();return A.map(T=>({...T}))},[]),l=(0,S.useCallback)(A=>{const{edges:T=[]}=i.getState();return T.find(E=>E.id===A)},[]),u=(0,S.useCallback)(A=>{const{getNodes:T,setNodes:E,hasDefaultNodes:M,onNodesChange:O}=i.getState(),$=T(),X="function"==typeof A?A($):A;M?E(X):O&&O(0===X.length?$.map(U=>({type:"remove",id:U.id})):X.map(U=>({item:U,type:"reset"})))},[]),p=(0,S.useCallback)(A=>{const{edges:T=[],setEdges:E,hasDefaultEdges:M,onEdgesChange:O}=i.getState(),$="function"==typeof A?A(T):A;M?E($):O&&O(0===$.length?T.map(Y=>({type:"remove",id:Y.id})):$.map(Y=>({item:Y,type:"reset"})))},[]),_=(0,S.useCallback)(A=>{const T=Array.isArray(A)?A:[A],{getNodes:E,setNodes:M,hasDefaultNodes:O,onNodesChange:$}=i.getState();O?M([...E(),...T]):$&&$(T.map(Y=>({item:Y,type:"add"})))},[]),v=(0,S.useCallback)(A=>{const T=Array.isArray(A)?A:[A],{edges:E=[],setEdges:M,hasDefaultEdges:O,onEdgesChange:$}=i.getState();O?M([...E,...T]):$&&$(T.map(Y=>({item:Y,type:"add"})))},[]),g=(0,S.useCallback)(()=>{const{getNodes:A,edges:T=[],transform:E}=i.getState(),[M,O,$]=E;return{nodes:A().map(X=>({...X})),edges:T.map(X=>({...X})),viewport:{x:M,y:O,zoom:$}}},[]),y=(0,S.useCallback)(({nodes:A,edges:T})=>{const{nodeInternals:E,getNodes:M,edges:O,hasDefaultNodes:$,hasDefaultEdges:X,onNodesDelete:Y,onEdgesDelete:U,onNodesChange:te,onEdgesChange:H}=i.getState(),ue=(A||[]).map(L=>L.id),ie=(T||[]).map(L=>L.id),de=M().reduce((L,B)=>{const J=B.parentNode||B.parentId,ae=!ue.includes(B.id)&&J&&L.find(Q=>Q.id===J);return("boolean"!=typeof B.deletable||B.deletable)&&(ue.includes(B.id)||ae)&&L.push(B),L},[]),le=O.filter(L=>"boolean"!=typeof L.deletable||L.deletable),N=le.filter(L=>ie.includes(L.id));if(de||N){const L=Pm(de,le),B=[...N,...L],J=B.reduce((ae,P)=>(ae.includes(P.id)||ae.push(P.id),ae),[]);(X||$)&&(X&&i.setState({edges:O.filter(ae=>!J.includes(ae.id))}),$&&(de.forEach(ae=>{E.delete(ae.id)}),i.setState({nodeInternals:new Map(E)}))),J.length>0&&(U?.(B),H&&H(J.map(ae=>({id:ae,type:"remove"})))),de.length>0&&(Y?.(de),te)&&te(de.map(P=>({id:P.id,type:"remove"})))}},[]),x=(0,S.useCallback)(A=>{const T=(t=>Yn(t.width)&&Yn(t.height)&&Yn(t.x)&&Yn(t.y))(A),E=T?null:i.getState().nodeInternals.get(A.id);return T||E?[T?A:Nm(E),E,T]:[null,null,T]},[]),C=(0,S.useCallback)((A,T=!0,E)=>{const[M,O,$]=x(A);return M?(E||i.getState().getNodes()).filter(X=>{if(!($||X.id!==O.id&&X.positionAbsolute))return!1;const Y=Nm(X),U=Af(Y,M);return T&&U>0||U>=M.width*M.height}):[]},[]),I=(0,S.useCallback)((A,T,E=!0)=>{const[M]=x(A);if(!M)return!1;const O=Af(M,T);return E&&O>0||O>=M.width*M.height},[]);return(0,S.useMemo)(()=>({...t,getNodes:n,getNode:o,getEdges:r,getEdge:l,setNodes:u,setEdges:p,addNodes:_,addEdges:v,toObject:g,deleteElements:y,getIntersectingNodes:C,isNodeIntersecting:I}),[t,n,o,r,l,u,p,_,v,g,y,C,I])}const gg={actInsideInputWithModifier:!1},Yf={position:"absolute",width:"100%",height:"100%",top:0,left:0},ip=t=>({x:t.x,y:t.y,zoom:t.k}),xa=(t,i)=>t.target.closest(`.${i}`),c_=(t,i)=>2===i&&Array.isArray(t)&&t.includes(2),u_=t=>{const i=t.ctrlKey&&qd()?10:1;return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*i},xg=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Cg=({onMove:t,onMoveStart:i,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:l=!0,panOnScroll:u=!1,panOnScrollSpeed:p=.5,panOnScrollMode:_=ha.Free,zoomOnDoubleClick:v=!0,elementsSelectable:g,panOnDrag:y=!0,defaultViewport:x,translateExtent:C,minZoom:I,maxZoom:A,zoomActivationKeyCode:T,preventScrolling:E=!0,children:M,noWheelClassName:O,noPanClassName:$})=>{const X=(0,S.useRef)(),Y=Et(),U=(0,S.useRef)(!1),te=(0,S.useRef)(!1),H=(0,S.useRef)(null),ue=(0,S.useRef)({x:0,y:0,zoom:0}),{d3Zoom:ie,d3Selection:de,d3ZoomHandler:le,userSelectionActive:N}=qe(xg,At),L=Ic(T),B=(0,S.useRef)(0),J=(0,S.useRef)(!1),ae=(0,S.useRef)();return function yg(t){const i=Et();(0,S.useEffect)(()=>{let n;const o=()=>{if(!t.current)return;const r=Ef(t.current);(0===r.height||0===r.width)&&i.getState().onError?.("004",Xn.error004()),i.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.removeEventListener("resize",o),n&&t.current&&n.unobserve(t.current)}},[])}(H),(0,S.useEffect)(()=>{if(H.current){const P=H.current.getBoundingClientRect(),Q=function Eh(){var g,y,x,t=Ch,i=Sh,n=Nh,o=kh,r=wh,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],p=250,_=tc,v=Sl("start","zoom","end"),C=500,I=150,A=0,T=10;function E(N){N.property("__zoom",vm).on("wheel.zoom",te,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",ue).filter(r).on("touchstart.zoom",ie).on("touchmove.zoom",de).on("touchend.zoom touchcancel.zoom",le).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function M(N,L){return(L=Math.max(l[0],Math.min(l[1],L)))===N.k?N:new lo(L,N.x,N.y)}function O(N,L,B){var J=L[0]-B[0]*N.k,ae=L[1]-B[1]*N.k;return J===N.x&&ae===N.y?N:new lo(N.k,J,ae)}function $(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function X(N,L,B,J){N.on("start.zoom",function(){Y(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(J).end()}).tween("zoom",function(){var ae=this,P=arguments,Q=Y(ae,P).event(J),re=i.apply(ae,P),ce=null==B?$(re):"function"==typeof B?B.apply(ae,P):B,ye=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ve=ae.__zoom,Te="function"==typeof L?L.apply(ae,P):L,Xe=_(ve.invert(ce).concat(ye/ve.k),Te.invert(ce).concat(ye/Te.k));return function(He){if(1===He)He=Te;else{var et=Xe(He),Ct=ye/et[2];He=new lo(Ct,ce[0]-et[0]*Ct,ce[1]-et[1]*Ct)}Q.zoom(null,He)}})}function Y(N,L,B){return!B&&N.__zooming||new U(N,L)}function U(N,L){this.that=N,this.args=L,this.active=0,this.sourceEvent=null,this.extent=i.apply(N,L),this.taps=0}function te(N,...L){if(t.apply(this,arguments)){var B=Y(this,L).event(N),J=this.__zoom,ae=Math.max(l[0],Math.min(l[1],J.k*Math.pow(2,o.apply(this,arguments)))),P=Rn(N);if(B.wheel)(B.mouse[0][0]!==P[0]||B.mouse[0][1]!==P[1])&&(B.mouse[1]=J.invert(B.mouse[0]=P)),clearTimeout(B.wheel);else{if(J.k===ae)return;B.mouse=[P,J.invert(P)],Oi(this),B.start()}kc(N),B.wheel=setTimeout(function Q(){B.wheel=null,B.end()},I),B.zoom("mouse",n(O(M(J,ae),B.mouse[0],B.mouse[1]),B.extent,u))}}function H(N,...L){if(!x&&t.apply(this,arguments)){var B=N.currentTarget,J=Y(this,L,!0).event(N),ae=wn(N.view).on("mousemove.zoom",function ce(ve){if(kc(ve),!J.moved){var Te=ve.clientX-Q,Xe=ve.clientY-re;J.moved=Te*Te+Xe*Xe>A}J.event(ve).zoom("mouse",n(O(J.that.__zoom,J.mouse[0]=Rn(ve,B),J.mouse[1]),J.extent,u))},!0).on("mouseup.zoom",function ye(ve){ae.on("mousemove.zoom mouseup.zoom",null),Kl(ve.view,J.moved),kc(ve),J.event(ve).end()},!0),P=Rn(N,B),Q=N.clientX,re=N.clientY;Jl(N.view),wf(N),J.mouse=[P,this.__zoom.invert(P)],Oi(this),J.start()}}function ue(N,...L){if(t.apply(this,arguments)){var B=this.__zoom,J=Rn(N.changedTouches?N.changedTouches[0]:N,this),ae=B.invert(J),Q=n(O(M(B,B.k*(N.shiftKey?.5:2)),J,ae),i.apply(this,L),u);kc(N),p>0?wn(this).transition().duration(p).call(X,Q,J,N):wn(this).call(E.transform,Q,J,N)}}function ie(N,...L){if(t.apply(this,arguments)){var P,Q,re,ce,B=N.touches,J=B.length,ae=Y(this,L,N.changedTouches.length===J).event(N);for(wf(N),Q=0;Q<J;++Q)ce=[ce=Rn(re=B[Q],this),this.__zoom.invert(ce),re.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==ce[2]&&(ae.touch1=ce,ae.taps=0):(ae.touch0=ce,P=!0,ae.taps=1+!!g);g&&(g=clearTimeout(g)),P&&(ae.taps<2&&(y=ce[0],g=setTimeout(function(){g=null},C)),Oi(this),ae.start())}}function de(N,...L){if(this.__zooming){var P,Q,re,ce,B=Y(this,L).event(N),J=N.changedTouches,ae=J.length;for(kc(N),P=0;P<ae;++P)re=Rn(Q=J[P],this),B.touch0&&B.touch0[2]===Q.identifier?B.touch0[0]=re:B.touch1&&B.touch1[2]===Q.identifier&&(B.touch1[0]=re);if(Q=B.that.__zoom,B.touch1){var ye=B.touch0[0],ve=B.touch0[1],Te=B.touch1[0],Xe=B.touch1[1],He=(He=Te[0]-ye[0])*He+(He=Te[1]-ye[1])*He,et=(et=Xe[0]-ve[0])*et+(et=Xe[1]-ve[1])*et;Q=M(Q,Math.sqrt(He/et)),re=[(ye[0]+Te[0])/2,(ye[1]+Te[1])/2],ce=[(ve[0]+Xe[0])/2,(ve[1]+Xe[1])/2]}else{if(!B.touch0)return;re=B.touch0[0],ce=B.touch0[1]}B.zoom("touch",n(O(Q,re,ce),B.extent,u))}}function le(N,...L){if(this.__zooming){var P,Q,B=Y(this,L).event(N),J=N.changedTouches,ae=J.length;for(wf(N),x&&clearTimeout(x),x=setTimeout(function(){x=null},C),P=0;P<ae;++P)Q=J[P],B.touch0&&B.touch0[2]===Q.identifier?delete B.touch0:B.touch1&&B.touch1[2]===Q.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),2===B.taps&&(Q=Rn(Q,this),Math.hypot(y[0]-Q[0],y[1]-Q[1])<T)){var re=wn(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return E.transform=function(N,L,B,J){var ae=N.selection?N.selection():N;ae.property("__zoom",vm),N!==ae?X(N,L,B,J):ae.interrupt().each(function(){Y(this,arguments).event(J).start().zoom(null,"function"==typeof L?L.apply(this,arguments):L).end()})},E.scaleBy=function(N,L,B,J){E.scaleTo(N,function(){return this.__zoom.k*("function"==typeof L?L.apply(this,arguments):L)},B,J)},E.scaleTo=function(N,L,B,J){E.transform(N,function(){var ae=i.apply(this,arguments),P=this.__zoom,Q=null==B?$(ae):"function"==typeof B?B.apply(this,arguments):B,re=P.invert(Q),ce="function"==typeof L?L.apply(this,arguments):L;return n(O(M(P,ce),Q,re),ae,u)},B,J)},E.translateBy=function(N,L,B,J){E.transform(N,function(){return n(this.__zoom.translate("function"==typeof L?L.apply(this,arguments):L,"function"==typeof B?B.apply(this,arguments):B),i.apply(this,arguments),u)},null,J)},E.translateTo=function(N,L,B,J,ae){E.transform(N,function(){var P=i.apply(this,arguments),Q=this.__zoom,re=null==J?$(P):"function"==typeof J?J.apply(this,arguments):J;return n(ci.translate(re[0],re[1]).scale(Q.k).translate("function"==typeof L?-L.apply(this,arguments):-L,"function"==typeof B?-B.apply(this,arguments):-B),P,u)},J,ae)},U.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,L){return this.mouse&&"mouse"!==N&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&"touch"!==N&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&"touch"!==N&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var L=wn(this.that).datum();v.call(N,this.that,new Ao(N,{sourceEvent:this.sourceEvent,target:E,type:N,transform:this.that.__zoom,dispatch:v}),L)}},E.wheelDelta=function(N){return arguments.length?(o="function"==typeof N?N:Ge(+N),E):o},E.filter=function(N){return arguments.length?(t="function"==typeof N?N:Ge(!!N),E):t},E.touchable=function(N){return arguments.length?(r="function"==typeof N?N:Ge(!!N),E):r},E.extent=function(N){return arguments.length?(i="function"==typeof N?N:Ge([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),E):i},E.scaleExtent=function(N){return arguments.length?(l[0]=+N[0],l[1]=+N[1],E):[l[0],l[1]]},E.translateExtent=function(N){return arguments.length?(u[0][0]=+N[0][0],u[1][0]=+N[1][0],u[0][1]=+N[0][1],u[1][1]=+N[1][1],E):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},E.constrain=function(N){return arguments.length?(n=N,E):n},E.duration=function(N){return arguments.length?(p=+N,E):p},E.interpolate=function(N){return arguments.length?(_=N,E):_},E.on=function(){var N=v.on.apply(v,arguments);return N===v?E:N},E.clickDistance=function(N){return arguments.length?(A=(N=+N)*N,E):Math.sqrt(A)},E.tapDistance=function(N){return arguments.length?(T=+N,E):T},E}().scaleExtent([I,A]).translateExtent(C),re=wn(H.current).call(Q),ce=ci.translate(x.x,x.y).scale(_a(x.zoom,I,A)),ye=[[0,0],[P.width,P.height]],ve=Q.constrain()(ce,ye,C);Q.transform(re,ve),Q.wheelDelta(u_),Y.setState({d3Zoom:Q,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ve.x,ve.y,ve.k],domNode:H.current.closest(".react-flow")})}},[]),(0,S.useEffect)(()=>{de&&ie&&(!u||L||N?typeof le<"u"&&de.on("wheel.zoom",function(P,Q){if(!E&&"wheel"===P.type&&!P.ctrlKey||xa(P,O))return null;P.preventDefault(),le.call(this,P,Q)},{passive:!1}):de.on("wheel.zoom",P=>{if(xa(P,O))return!1;P.preventDefault(),P.stopImmediatePropagation();const Q=de.property("__zoom").k||1;if(P.ctrlKey&&l){const et=Rn(P),Ct=u_(P),lt=Q*Math.pow(2,Ct);return void ie.scaleTo(de,lt,et,P)}const re=1===P.deltaMode?20:1;let ce=_===ha.Vertical?0:P.deltaX*re,ye=_===ha.Horizontal?0:P.deltaY*re;!qd()&&P.shiftKey&&_!==ha.Vertical&&(ce=P.deltaY*re,ye=0),ie.translateBy(de,-ce/Q*p,-ye/Q*p,{internal:!0});const ve=ip(de.property("__zoom")),{onViewportChangeStart:Te,onViewportChange:Xe,onViewportChangeEnd:He}=Y.getState();clearTimeout(ae.current),J.current||(J.current=!0,i?.(P,ve),Te?.(ve)),J.current&&(t?.(P,ve),Xe?.(ve),ae.current=setTimeout(()=>{n?.(P,ve),He?.(ve),J.current=!1},150))},{passive:!1}))},[N,u,_,de,ie,le,L,l,E,O,i,t,n]),(0,S.useEffect)(()=>{ie&&ie.on("start",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;B.current=P.sourceEvent?.button;const{onViewportChangeStart:Q}=Y.getState(),re=ip(P.transform);U.current=!0,ue.current=re,"mousedown"===P.sourceEvent?.type&&Y.setState({paneDragging:!0}),Q?.(re),i?.(P.sourceEvent,re)})},[ie,i]),(0,S.useEffect)(()=>{ie&&(N&&!U.current?ie.on("zoom",null):N||ie.on("zoom",P=>{const{onViewportChange:Q}=Y.getState();if(Y.setState({transform:[P.transform.x,P.transform.y,P.transform.k]}),te.current=!(!o||!c_(y,B.current??0)),(t||Q)&&!P.sourceEvent?.internal){const re=ip(P.transform);Q?.(re),t?.(P.sourceEvent,re)}}))},[N,ie,t,y,o]),(0,S.useEffect)(()=>{ie&&ie.on("end",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=Y.getState();if(U.current=!1,Y.setState({paneDragging:!1}),o&&c_(y,B.current??0)&&!te.current&&o(P.sourceEvent),te.current=!1,(n||Q)&&((t,i)=>t.x!==i.x||t.y!==i.y||t.zoom!==i.k)(ue.current,P.transform)){const re=ip(P.transform);ue.current=re,clearTimeout(X.current),X.current=setTimeout(()=>{Q?.(re),n?.(P.sourceEvent,re)},u?150:0)}})},[ie,u,y,n,o]),(0,S.useEffect)(()=>{ie&&ie.filter(P=>{const Q=L||r,re=l&&P.ctrlKey;if((!0===y||Array.isArray(y)&&y.includes(1))&&1===P.button&&"mousedown"===P.type&&(xa(P,"react-flow__node")||xa(P,"react-flow__edge")))return!0;if(!y&&!Q&&!u&&!v&&!l||N||!v&&"dblclick"===P.type||xa(P,O)&&"wheel"===P.type||xa(P,$)&&("wheel"!==P.type||u&&"wheel"===P.type&&!L)||!l&&P.ctrlKey&&"wheel"===P.type||!Q&&!u&&!re&&"wheel"===P.type||!y&&("mousedown"===P.type||"touchstart"===P.type)||Array.isArray(y)&&!y.includes(P.button)&&"mousedown"===P.type)return!1;const ce=Array.isArray(y)&&y.includes(P.button)||!P.button||P.button<=1;return(!P.ctrlKey||"wheel"===P.type)&&ce})},[N,ie,r,l,u,v,y,g,L]),S.createElement("div",{className:"react-flow__renderer",ref:H,style:Yf},M)},Sg=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function kg(){const{userSelectionActive:t,userSelectionRect:i}=qe(Sg,At);return t&&i?S.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:i.width,height:i.height,transform:`translate(${i.x}px, ${i.y}px)`}}):null}function d_(t,i){const n=i.parentNode||i.parentId,o=t.find(r=>r.id===n);if(o){const r=i.position.x+i.width-o.width,l=i.position.y+i.height-o.height;if(r>0||l>0||i.position.x<0||i.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),l>0&&(o.style.height+=l),i.position.x<0){const u=Math.abs(i.position.x);o.position.x=o.position.x-u,o.style.width+=u,i.position.x=0}if(i.position.y<0){const u=Math.abs(i.position.y);o.position.y=o.position.y-u,o.style.height+=u,i.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function p_(t,i){if(t.some(o=>"reset"===o.type))return t.filter(o=>"reset"===o.type).map(o=>o.item);const n=t.filter(o=>"add"===o.type).map(o=>o.item);return i.reduce((o,r)=>{const l=t.filter(p=>p.id===r.id);if(0===l.length)return o.push(r),o;const u={...r};for(const p of l)if(p)switch(p.type){case"select":u.selected=p.selected;break;case"position":typeof p.position<"u"&&(u.position=p.position),typeof p.positionAbsolute<"u"&&(u.positionAbsolute=p.positionAbsolute),typeof p.dragging<"u"&&(u.dragging=p.dragging),u.expandParent&&d_(o,u);break;case"dimensions":typeof p.dimensions<"u"&&(u.width=p.dimensions.width,u.height=p.dimensions.height),typeof p.updateStyle<"u"&&(u.style={...u.style||{},...p.dimensions}),"boolean"==typeof p.resizing&&(u.resizing=p.resizing),u.expandParent&&d_(o,u);break;case"remove":return o}return o.push(u),o},n)}function Hf(t,i){return p_(t,i)}function f_(t,i){return p_(t,i)}const Pi=(t,i)=>({id:t,type:"select",selected:i});function Ca(t,i){return t.reduce((n,o)=>{const r=i.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Pi(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Pi(o.id,!1))),n},[])}const Wf=(t,i)=>n=>{n.target===i.current&&t?.(n)},wg=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),m_=(0,S.memo)(({isSelecting:t,selectionMode:i=Jd.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:p,onPaneMouseEnter:_,onPaneMouseMove:v,onPaneMouseLeave:g,children:y})=>{const x=(0,S.useRef)(null),C=Et(),I=(0,S.useRef)(0),A=(0,S.useRef)(0),T=(0,S.useRef)(),{userSelectionActive:E,elementsSelectable:M,dragging:O}=qe(wg,At),$=()=>{C.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,A.current=0},X=le=>{l?.(le),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},U=p?le=>p(le):void 0,de=M&&(t||E);return S.createElement("div",{className:it(["react-flow__pane",{dragging:O,selection:t}]),onClick:de?void 0:Wf(X,x),onContextMenu:Wf(le=>{Array.isArray(n)&&n?.includes(2)?le.preventDefault():u?.(le)},x),onWheel:Wf(U,x),onMouseEnter:de?void 0:_,onMouseDown:de?le=>{const{resetSelectedElements:N,domNode:L}=C.getState();if(T.current=L?.getBoundingClientRect(),!M||!t||0!==le.button||le.target!==x.current||!T.current)return;const{x:B,y:J}=Bi(le,T.current);N(),C.setState({userSelectionRect:{width:0,height:0,startX:B,startY:J,x:B,y:J}}),o?.(le)}:void 0,onMouseMove:de?le=>{const{userSelectionRect:N,nodeInternals:L,edges:B,transform:J,onNodesChange:ae,onEdgesChange:P,nodeOrigin:Q,getNodes:re}=C.getState();if(!t||!T.current||!N)return;C.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ce=Bi(le,T.current),ye=N.startX??0,ve=N.startY??0,Te={...N,x:ce.x<ye?ce.x:ye,y:ce.y<ve?ce.y:ve,width:Math.abs(ce.x-ye),height:Math.abs(ce.y-ve)},Xe=re(),He=Bm(L,Te,J,i===Jd.Partial,!0,Q),et=Pm(He,B).map(lt=>lt.id),Ct=He.map(lt=>lt.id);if(I.current!==Ct.length){I.current=Ct.length;const lt=Ca(Xe,Ct);lt.length&&ae?.(lt)}if(A.current!==et.length){A.current=et.length;const lt=Ca(B,et);lt.length&&P?.(lt)}C.setState({userSelectionRect:Te})}:v,onMouseUp:de?le=>{if(0!==le.button)return;const{userSelectionRect:N}=C.getState();!E&&N&&le.target===x.current&&X?.(le),C.setState({nodesSelectionActive:I.current>0}),$(),r?.(le)}:void 0,onMouseLeave:de?le=>{E&&(C.setState({nodesSelectionActive:I.current>0}),r?.(le)),$()}:g,ref:x,style:Yf},y,S.createElement(kg,null))});function __(t,i){const n=t.parentNode||t.parentId;if(!n)return!1;const o=i.get(n);return!!o&&(!!o.selected||__(o,i))}function h_(t,i,n){let o=t;do{if(o?.matches(i))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Ng(t,i,n,o){return Array.from(t.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!__(r,t))&&(r.draggable||i&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}))}function g_(t,i,n,o,r=[0,0],l){const u=function Eg(t,i){return i&&"parent"!==i?[i[0],[i[1][0]-(t.width||0),i[1][1]-(t.height||0)]]:i}(t,t.extent||o);let p=u;const _=t.parentNode||t.parentId;if("parent"!==t.extent||t.expandParent){if(t.extent&&_&&"parent"!==t.extent){const y=n.get(_),{x,y:C}=ga(y,r).positionAbsolute;p=[[t.extent[0][0]+x,t.extent[0][1]+C],[t.extent[1][0]+x,t.extent[1][1]+C]]}}else if(_&&t.width&&t.height){const y=n.get(_),{x,y:C}=ga(y,r).positionAbsolute;p=y&&Yn(x)&&Yn(C)&&Yn(y.width)&&Yn(y.height)?[[x+t.width*r[0],C+t.height*r[1]],[x+y.width-t.width+t.width*r[0],C+y.height-t.height+t.height*r[1]]]:p}else l?.("005",Xn.error005()),p=u;let v={x:0,y:0};if(_){const y=n.get(_);v=ga(y,r).positionAbsolute}const g=p&&"parent"!==p?If(i,p):i;return{position:{x:g.x-v.x,y:g.y-v.y},positionAbsolute:g}}function Zf({nodeId:t,dragItems:i,nodeInternals:n}){const o=i.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?o.find(r=>r.id===t):o[0],o]}m_.displayName="Pane";const v_=(t,i,n,o)=>{const r=i.querySelectorAll(t);if(!r||!r.length)return null;const l=Array.from(r),u=i.getBoundingClientRect(),p_x=u.width*o[0],p_y=u.height*o[1];return l.map(_=>{const v=_.getBoundingClientRect();return{id:_.getAttribute("data-handleid"),position:_.getAttribute("data-handlepos"),x:(v.left-u.left-p_x)/n,y:(v.top-u.top-p_y)/n,...Ef(_)}})};function Ac(t,i,n){return void 0===n?n:o=>{const r=i().nodeInternals.get(t);r&&n(o,{...r})}}function qf({id:t,store:i,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:l,multiSelectionActive:u,nodeInternals:p,onError:_}=i.getState(),v=p.get(t);v?(i.setState({nodesSelectionActive:!1}),v.selected?(n||v.selected&&u)&&(l({nodes:[v],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([t])):_?.("012",Xn.error012(t))}function Jf(t){return(i,n,o)=>t?.(i,o)}function y_({nodeRef:t,disabled:i=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:l,selectNodesOnDrag:u}){const p=Et(),[_,v]=(0,S.useState)(!1),g=(0,S.useRef)([]),y=(0,S.useRef)({x:null,y:null}),x=(0,S.useRef)(0),C=(0,S.useRef)(null),I=(0,S.useRef)({x:0,y:0}),A=(0,S.useRef)(null),T=(0,S.useRef)(!1),E=(0,S.useRef)(!1),M=(0,S.useRef)(!1),O=function Ig(){const t=Et();return(0,S.useCallback)(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:l}=t.getState(),_={x:((n.touches?n.touches[0].clientX:n.clientX)-o[0])/o[2],y:((n.touches?n.touches[0].clientY:n.clientY)-o[1])/o[2]};return{xSnapped:l?r[0]*Math.round(_.x/r[0]):_.x,ySnapped:l?r[1]*Math.round(_.y/r[1]):_.y,..._}},[])}();return(0,S.useEffect)(()=>{if(t?.current){const $=wn(t.current),X=({x:te,y:H})=>{const{nodeInternals:ue,onNodeDrag:ie,onSelectionDrag:de,updateNodePositions:le,nodeExtent:N,snapGrid:L,snapToGrid:B,nodeOrigin:J,onError:ae}=p.getState();y.current={x:te,y:H};let P=!1,Q={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&N){const ce=tp(g.current,J);Q=wc(ce)}if(g.current=g.current.map(ce=>{const ye={x:te-ce.distance.x,y:H-ce.distance.y};B&&(ye.x=L[0]*Math.round(ye.x/L[0]),ye.y=L[1]*Math.round(ye.y/L[1]));const ve=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];g.current.length>1&&N&&!ce.extent&&(ve[0][0]=ce.positionAbsolute.x-Q.x+N[0][0],ve[1][0]=ce.positionAbsolute.x+(ce.width??0)-Q.x2+N[1][0],ve[0][1]=ce.positionAbsolute.y-Q.y+N[0][1],ve[1][1]=ce.positionAbsolute.y+(ce.height??0)-Q.y2+N[1][1]);const Te=g_(ce,ye,ue,ve,J,ae);return P=P||ce.position.x!==Te.position.x||ce.position.y!==Te.position.y,ce.position=Te.position,ce.positionAbsolute=Te.positionAbsolute,ce}),!P)return;le(g.current,!0,!0),v(!0);const re=r?ie:Jf(de);if(re&&A.current){const[ce,ye]=Zf({nodeId:r,dragItems:g.current,nodeInternals:ue});re(A.current,ce,ye)}},Y=()=>{if(!C.current)return;const[te,H]=Cm(I.current,C.current);if(0!==te||0!==H){const{transform:ue,panBy:ie}=p.getState();y.current.x=(y.current.x??0)-te/ue[2],y.current.y=(y.current.y??0)-H/ue[2],ie({x:te,y:H})&&X(y.current)}x.current=requestAnimationFrame(Y)},U=te=>{const{nodeInternals:H,multiSelectionActive:ue,nodesDraggable:ie,unselectNodesAndEdges:de,onNodeDragStart:le,onSelectionDragStart:N}=p.getState();E.current=!0;const L=r?le:Jf(N);(!u||!l)&&!ue&&r&&(H.get(r)?.selected||de()),r&&l&&u&&qf({id:r,store:p,nodeRef:t});const B=O(te);if(y.current=B,g.current=Ng(H,ie,B,r),L&&g.current){const[J,ae]=Zf({nodeId:r,dragItems:g.current,nodeInternals:H});L(te.sourceEvent,J,ae)}};if(!i){const te=function Rh(){var p,_,v,g,t=Ih,i=Ah,n=Th,o=Fh,r={},l=Sl("start","drag","end"),u=0,y=0;function x($){$.on("mousedown.drag",C).filter(o).on("touchstart.drag",T).on("touchmove.drag",E,uf).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C($,X){if(!g&&t.call(this,$,X)){var Y=O(this,i.call(this,$,X),$,X,"mouse");Y&&(wn($.view).on("mousemove.drag",I,Ft).on("mouseup.drag",A,Ft),Jl($.view),Dt($),v=!1,p=$.clientX,_=$.clientY,Y("start",$))}}function I($){if(Qo($),!v){var X=$.clientX-p,Y=$.clientY-_;v=X*X+Y*Y>y}r.mouse("drag",$)}function A($){wn($.view).on("mousemove.drag mouseup.drag",null),Kl($.view,v),Qo($),r.mouse("end",$)}function T($,X){if(t.call(this,$,X)){var H,ue,Y=$.changedTouches,U=i.call(this,$,X),te=Y.length;for(H=0;H<te;++H)(ue=O(this,U,$,X,Y[H].identifier,Y[H]))&&(Dt($),ue("start",$,Y[H]))}}function E($){var U,te,X=$.changedTouches,Y=X.length;for(U=0;U<Y;++U)(te=r[X[U].identifier])&&(Qo($),te("drag",$,X[U]))}function M($){var U,te,X=$.changedTouches,Y=X.length;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),U=0;U<Y;++U)(te=r[X[U].identifier])&&(Dt($),te("end",$,X[U]))}function O($,X,Y,U,te,H){var de,le,N,ue=l.copy(),ie=Rn(H||Y,X);if(null!=(N=n.call($,new Nf("beforestart",{sourceEvent:Y,target:x,identifier:te,active:u,x:ie[0],y:ie[1],dx:0,dy:0,dispatch:ue}),U)))return de=N.x-ie[0]||0,le=N.y-ie[1]||0,function L(B,J,ae){var Q,P=ie;switch(B){case"start":r[te]=L,Q=u++;break;case"end":delete r[te],--u;case"drag":ie=Rn(ae||J,X),Q=u}ue.call(B,$,new Nf(B,{sourceEvent:J,subject:N,target:x,identifier:te,active:Q,x:ie[0]+de,y:ie[1]+le,dx:ie[0]-P[0],dy:ie[1]-P[1],dispatch:ue}),U)}}return x.filter=function($){return arguments.length?(t="function"==typeof $?$:Hd(!!$),x):t},x.container=function($){return arguments.length?(i="function"==typeof $?$:Hd($),x):i},x.subject=function($){return arguments.length?(n="function"==typeof $?$:Hd($),x):n},x.touchable=function($){return arguments.length?(o="function"==typeof $?$:Hd(!!$),x):o},x.on=function(){var $=l.on.apply(l,arguments);return $===l?x:$},x.clickDistance=function($){return arguments.length?(y=($=+$)*$,x):Math.sqrt(y)},x}().on("start",H=>{const{domNode:ue,nodeDragThreshold:ie}=p.getState();0===ie&&U(H),M.current=!1;const de=O(H);y.current=de,C.current=ue?.getBoundingClientRect()||null,I.current=Bi(H.sourceEvent,C.current)}).on("drag",H=>{const ue=O(H),{autoPanOnNodeDrag:ie,nodeDragThreshold:de}=p.getState();if("touchmove"===H.sourceEvent.type&&H.sourceEvent.touches.length>1&&(M.current=!0),!M.current){if(!T.current&&E.current&&ie&&(T.current=!0,Y()),!E.current){const le=ue.xSnapped-(y?.current?.x??0),N=ue.ySnapped-(y?.current?.y??0);Math.sqrt(le*le+N*N)>de&&U(H)}(y.current.x!==ue.xSnapped||y.current.y!==ue.ySnapped)&&g.current&&E.current&&(A.current=H.sourceEvent,I.current=Bi(H.sourceEvent,C.current),X(ue))}}).on("end",H=>{if(E.current&&!M.current&&(v(!1),T.current=!1,E.current=!1,cancelAnimationFrame(x.current),g.current)){const{updateNodePositions:ue,nodeInternals:ie,onNodeDragStop:de,onSelectionDragStop:le}=p.getState(),N=r?de:Jf(le);if(ue(g.current,!1,!1),N){const[L,B]=Zf({nodeId:r,dragItems:g.current,nodeInternals:ie});N(H.sourceEvent,L,B)}}}).filter(H=>{const ue=H.target;return!H.button&&(!n||!h_(ue,`.${n}`,t))&&(!o||h_(ue,o,t))});return $.call(te),()=>{$.on(".drag",null)}}$.on(".drag",null)}},[t,i,n,o,l,p,r,u,O]),_}function b_(){const t=Et();return(0,S.useCallback)(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:l,getNodes:u,snapToGrid:p,snapGrid:_,onError:v,nodesDraggable:g}=t.getState(),y=u().filter(M=>M.selected&&(M.draggable||g&&typeof M.draggable>"u")),I=n.isShiftPressed?4:1,A=n.x*(p?_[0]:5)*I,T=n.y*(p?_[1]:5)*I;l(y.map(M=>{if(M.positionAbsolute){const O={x:M.positionAbsolute.x+A,y:M.positionAbsolute.y+T};p&&(O.x=_[0]*Math.round(O.x/_[0]),O.y=_[1]*Math.round(O.y/_[1]));const{positionAbsolute:$,position:X}=g_(M,O,o,r,void 0,v);M.position=X,M.positionAbsolute=$}return M}),!0,!1)},[])}const Sa={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Tc=t=>{const i=({id:n,type:o,data:r,xPos:l,yPos:u,xPosOrigin:p,yPosOrigin:_,selected:v,onClick:g,onMouseEnter:y,onMouseMove:x,onMouseLeave:C,onContextMenu:I,onDoubleClick:A,style:T,className:E,isDraggable:M,isSelectable:O,isConnectable:$,isFocusable:X,selectNodesOnDrag:Y,sourcePosition:U,targetPosition:te,hidden:H,resizeObserver:ue,dragHandle:ie,zIndex:de,isParent:le,noDragClassName:N,noPanClassName:L,initialized:B,disableKeyboardA11y:J,ariaLabel:ae,rfId:P,hasHandleBounds:Q})=>{const re=Et(),ce=(0,S.useRef)(null),ye=(0,S.useRef)(null),ve=(0,S.useRef)(U),Te=(0,S.useRef)(te),Xe=(0,S.useRef)(o),He=O||M||g||y||x||C,et=b_(),Ct=Ac(n,re.getState,y),lt=Ac(n,re.getState,x),co=Ac(n,re.getState,C),Wn=Ac(n,re.getState,I),uo=Ac(n,re.getState,A);(0,S.useEffect)(()=>()=>{ye.current&&(ue?.unobserve(ye.current),ye.current=null)},[]),(0,S.useEffect)(()=>{if(ce.current&&!H){const ct=ce.current;(!B||!Q||ye.current!==ct)&&(ye.current&&ue?.unobserve(ye.current),ue?.observe(ct),ye.current=ct)}},[H,B,Q]),(0,S.useEffect)(()=>{const ct=Xe.current!==o,Se=ve.current!==U,Dn=Te.current!==te;ce.current&&(ct||Se||Dn)&&(ct&&(Xe.current=o),Se&&(ve.current=U),Dn&&(Te.current=te),re.getState().updateNodeDimensions([{id:n,nodeElement:ce.current,forceUpdate:!0}]))},[n,o,U,te]);const Ro=y_({nodeRef:ce,disabled:H||!M,noDragClassName:N,handleSelector:ie,nodeId:n,isSelectable:O,selectNodesOnDrag:Y});return H?null:S.createElement("div",{className:it(["react-flow__node",`react-flow__node-${o}`,{[L]:M},E,{selected:v,selectable:O,parent:le,dragging:Ro}]),ref:ce,style:{zIndex:de,transform:`translate(${p}px,${_}px)`,pointerEvents:He?"all":"none",visibility:B?"visible":"hidden",...T},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ct,onMouseMove:lt,onMouseLeave:co,onContextMenu:Wn,onClick:ct=>{const{nodeDragThreshold:Se}=re.getState();if(O&&(!Y||!M||Se>0)&&qf({id:n,store:re,nodeRef:ce}),g){const Dn=re.getState().nodeInternals.get(n);Dn&&g(ct,{...Dn})}},onDoubleClick:uo,onKeyDown:X?ct=>{Tf(ct)||J||(Em.includes(ct.key)&&O?qf({id:n,store:re,unselect:"Escape"===ct.key,nodeRef:ce}):M&&v&&Object.prototype.hasOwnProperty.call(Sa,ct.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${ct.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~u}`}),et({x:Sa[ct.key].x,y:Sa[ct.key].y,isShiftPressed:ct.shiftKey})))}:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":J?void 0:`${n_}-${P}`,"aria-label":ae},S.createElement(Uh,{value:n},S.createElement(t,{id:n,data:r,type:o,xPos:l,yPos:u,selected:v,isConnectable:$,sourcePosition:U,targetPosition:te,dragging:Ro,dragHandle:ie,zIndex:de})))};return i.displayName="NodeWrapper",(0,S.memo)(i)};const Ag=t=>{const i=t.getNodes().filter(n=>n.selected);return{...tp(i,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var Fg=(0,S.memo)(function Tg({onSelectionContextMenu:t,noPanClassName:i,disableKeyboardA11y:n}){const o=Et(),{width:r,height:l,x:u,y:p,transformString:_,userSelectionActive:v}=qe(Ag,At),g=b_(),y=(0,S.useRef)(null);if((0,S.useEffect)(()=>{n||y.current?.focus({preventScroll:!0})},[n]),y_({nodeRef:y}),v||!r||!l)return null;const x=t?I=>{const A=o.getState().getNodes().filter(T=>T.selected);t(I,A)}:void 0;return S.createElement("div",{className:it(["react-flow__nodesselection","react-flow__container",i]),style:{transform:_}},S.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:I=>{Object.prototype.hasOwnProperty.call(Sa,I.key)&&g({x:Sa[I.key].x,y:Sa[I.key].y,isShiftPressed:I.shiftKey})},style:{width:r,height:l,top:p,left:u}}))});const Rg=t=>t.nodesSelectionActive,x_=({children:t,onPaneClick:i,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:l,onPaneScroll:u,deleteKeyCode:p,onMove:_,onMoveStart:v,onMoveEnd:g,selectionKeyCode:y,selectionOnDrag:x,selectionMode:C,onSelectionStart:I,onSelectionEnd:A,multiSelectionKeyCode:T,panActivationKeyCode:E,zoomActivationKeyCode:M,elementsSelectable:O,zoomOnScroll:$,zoomOnPinch:X,panOnScroll:Y,panOnScrollSpeed:U,panOnScrollMode:te,zoomOnDoubleClick:H,panOnDrag:ue,defaultViewport:ie,translateExtent:de,minZoom:le,maxZoom:N,preventScrolling:L,onSelectionContextMenu:B,noWheelClassName:J,noPanClassName:ae,disableKeyboardA11y:P})=>{const Q=qe(Rg),re=Ic(y),ce=Ic(E),ye=ce||ue,ve=ce||Y,Te=re||x&&!0!==ye;return(({deleteKeyCode:t,multiSelectionKeyCode:i})=>{const n=Et(),{deleteElements:o}=Xf(),r=Ic(t,gg),l=Ic(i);(0,S.useEffect)(()=>{if(r){const{edges:u,getNodes:p}=n.getState(),_=p().filter(g=>g.selected),v=u.filter(g=>g.selected);o({nodes:_,edges:v}),n.setState({nodesSelectionActive:!1})}},[r]),(0,S.useEffect)(()=>{n.setState({multiSelectionActive:l})},[l])})({deleteKeyCode:p,multiSelectionKeyCode:T}),S.createElement(Cg,{onMove:_,onMoveStart:v,onMoveEnd:g,onPaneContextMenu:l,elementsSelectable:O,zoomOnScroll:$,zoomOnPinch:X,panOnScroll:ve,panOnScrollSpeed:U,panOnScrollMode:te,zoomOnDoubleClick:H,panOnDrag:!re&&ye,defaultViewport:ie,translateExtent:de,minZoom:le,maxZoom:N,zoomActivationKeyCode:M,preventScrolling:L,noWheelClassName:J,noPanClassName:ae},S.createElement(m_,{onSelectionStart:I,onSelectionEnd:A,onPaneClick:i,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:l,onPaneScroll:u,panOnDrag:ye,isSelecting:!!Te,selectionMode:C},t,Q&&S.createElement(Fg,{onSelectionContextMenu:B,noPanClassName:ae,disableKeyboardA11y:P})))};x_.displayName="FlowRenderer";var jg=(0,S.memo)(x_);function $g(t){return{input:Tc(t.input||Jm),default:Tc(t.default||Pf),output:Tc(t.output||Qm),group:Tc(t.group||Lf),...Object.keys(t).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,l)=>(r[l]=Tc(t[l]||Pf),r),{})}}const Dg=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),C_=t=>{const{nodesDraggable:i,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:l,onError:u}=qe(Dg,At),p=function Mg(t){return qe((0,S.useCallback)(n=>t?Bm(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}(t.onlyRenderVisibleElements),_=(0,S.useRef)(),v=(0,S.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(y=>{const x=y.map(C=>({id:C.target.getAttribute("data-id"),nodeElement:C.target,forceUpdate:!0}));l(x)});return _.current=g,g},[]);return(0,S.useEffect)(()=>()=>{_?.current?.disconnect()},[]),S.createElement("div",{className:"react-flow__nodes",style:Yf},p.map(g=>{let y=g.type||"default";t.nodeTypes[y]||(u?.("003",Xn.error003(y)),y="default");const x=t.nodeTypes[y]||t.nodeTypes.default,C=!!(g.draggable||i&&typeof g.draggable>"u"),I=!!(g.selectable||r&&typeof g.selectable>"u"),A=!!(g.connectable||n&&typeof g.connectable>"u"),T=!!(g.focusable||o&&typeof g.focusable>"u"),E=t.nodeExtent?If(g.positionAbsolute,t.nodeExtent):g.positionAbsolute,M=E?.x??0,O=E?.y??0,$=(({x:t,y:i,width:n,height:o,origin:r})=>n&&o?r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:i}:{x:t-n*r[0],y:i-o*r[1]}:{x:t,y:i})({x:M,y:O,width:g.width??0,height:g.height??0,origin:t.nodeOrigin});return S.createElement(x,{key:g.id,id:g.id,className:g.className,style:g.style,type:y,data:g.data,sourcePosition:g.sourcePosition||be.Bottom,targetPosition:g.targetPosition||be.Top,hidden:g.hidden,xPos:M,yPos:O,xPosOrigin:$.x,yPosOrigin:$.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!g.selected,isDraggable:C,isSelectable:I,isConnectable:A,isFocusable:T,resizeObserver:v,dragHandle:g.dragHandle,zIndex:g[bt]?.z??0,isParent:!!g[bt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!g.width&&!!g.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!g[bt]?.handleBounds})}))};C_.displayName="NodeRenderer";var Og=(0,S.memo)(C_);const Vg=(t,i,n)=>n===be.Left?t-i:n===be.Right?t+i:t,zg=(t,i,n)=>n===be.Top?t-i:n===be.Bottom?t+i:t,S_="react-flow__edgeupdater",k_=({position:t,centerX:i,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:l,onMouseOut:u,type:p})=>S.createElement("circle",{onMouseDown:r,onMouseEnter:l,onMouseOut:u,className:it([S_,`${S_}-${p}`]),cx:Vg(i,o,t),cy:zg(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),Bg=()=>!0;var ka=t=>{const i=({id:n,className:o,type:r,data:l,onClick:u,onEdgeDoubleClick:p,selected:_,animated:v,label:g,labelStyle:y,labelShowBg:x,labelBgStyle:C,labelBgPadding:I,labelBgBorderRadius:A,style:T,source:E,target:M,sourceX:O,sourceY:$,targetX:X,targetY:Y,sourcePosition:U,targetPosition:te,elementsSelectable:H,hidden:ue,sourceHandleId:ie,targetHandleId:de,onContextMenu:le,onMouseEnter:N,onMouseMove:L,onMouseLeave:B,reconnectRadius:J,onReconnect:ae,onReconnectStart:P,onReconnectEnd:Q,markerEnd:re,markerStart:ce,rfId:ye,ariaLabel:ve,isFocusable:Te,isReconnectable:Xe,pathOptions:He,interactionWidth:et,disableKeyboardA11y:Ct})=>{const lt=(0,S.useRef)(null),[co,Wn]=(0,S.useState)(!1),[uo,Zn]=(0,S.useState)(!1),Bt=Et(),Ro=(0,S.useMemo)(()=>`url('#${Df(ce,ye)}')`,[ce,ye]),ct=(0,S.useMemo)(()=>`url('#${Df(re,ye)}')`,[re,ye]);if(ue)return null;const Dn=Ec(n,Bt.getState,p),Ur=Ec(n,Bt.getState,le),Rc=Ec(n,Bt.getState,N),Na=Ec(n,Bt.getState,L),Ea=Ec(n,Bt.getState,B),ui=(dn,jo)=>{if(0!==dn.button)return;const{edges:Hr,isValidConnection:Wr}=Bt.getState(),Fa=jo?M:E,Mo=(jo?de:ie)||null,Zr=jo?"target":"source",rm=Wr||Bg,sm=jo,Mc=Hr.find(qr=>qr.id===n);Zn(!0),P?.(dn,Mc,Zr),Ym({event:dn,handleId:Mo,nodeId:Fa,onConnect:qr=>ae?.(Mc,qr),isTarget:sm,getState:Bt.getState,setState:Bt.setState,isValidConnection:rm,edgeUpdaterType:Zr,onReconnectEnd:qr=>{Zn(!1),Q?.(qr,Mc,Zr)}})},Yr=()=>Wn(!0),Aa=()=>Wn(!1);return S.createElement("g",{className:it(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:_,animated:v,inactive:!H&&!u,updating:co}]),onClick:dn=>{const{edges:jo,addSelectedEdges:Hr,unselectNodesAndEdges:Wr,multiSelectionActive:Fa}=Bt.getState(),Mo=jo.find(Zr=>Zr.id===n);Mo&&(H&&(Bt.setState({nodesSelectionActive:!1}),Mo.selected&&Fa?(Wr({nodes:[],edges:[Mo]}),lt.current?.blur()):Hr([n])),u&&u(dn,Mo))},onDoubleClick:Dn,onContextMenu:Ur,onMouseEnter:Rc,onMouseMove:Na,onMouseLeave:Ea,onKeyDown:Te?dn=>{if(!Ct&&Em.includes(dn.key)&&H){const{unselectNodesAndEdges:jo,addSelectedEdges:Hr,edges:Wr}=Bt.getState();"Escape"===dn.key?(lt.current?.blur(),jo({edges:[Wr.find(Mo=>Mo.id===n)]})):Hr([n])}}:void 0,tabIndex:Te?0:void 0,role:Te?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===ve?void 0:ve||`Edge from ${E} to ${M}`,"aria-describedby":Te?`${o_}-${ye}`:void 0,ref:lt},!uo&&S.createElement(t,{id:n,source:E,target:M,selected:_,animated:v,label:g,labelStyle:y,labelShowBg:x,labelBgStyle:C,labelBgPadding:I,labelBgBorderRadius:A,data:l,style:T,sourceX:O,sourceY:$,targetX:X,targetY:Y,sourcePosition:U,targetPosition:te,sourceHandleId:ie,targetHandleId:de,markerStart:Ro,markerEnd:ct,pathOptions:He,interactionWidth:et}),Xe&&S.createElement(S.Fragment,null,("source"===Xe||!0===Xe)&&S.createElement(k_,{position:U,centerX:O,centerY:$,radius:J,onMouseDown:dn=>ui(dn,!0),onMouseEnter:Yr,onMouseOut:Aa,type:"source"}),("target"===Xe||!0===Xe)&&S.createElement(k_,{position:te,centerX:X,centerY:Y,radius:J,onMouseDown:dn=>ui(dn,!1),onMouseEnter:Yr,onMouseOut:Aa,type:"target"})))};return i.displayName="EdgeWrapper",(0,S.memo)(i)};function Pg(t){return{default:ka(t.default||ep),straight:ka(t.bezier||$f),step:ka(t.step||Mf),smoothstep:ka(t.step||Kd),simplebezier:ka(t.simplebezier||Rf),...Object.keys(t).filter(r=>!["default","bezier"].includes(r)).reduce((r,l)=>(r[l]=ka(t[l]||ep),r),{})}}function w_(t,i,n=null){const o=(n?.x||0)+i.x,r=(n?.y||0)+i.y,l=n?.width||i.width,u=n?.height||i.height;switch(t){case be.Top:return{x:o+l/2,y:r};case be.Right:return{x:o+l,y:r+u/2};case be.Bottom:return{x:o+l/2,y:r+u};case be.Left:return{x:o,y:r+u/2}}}function N_(t,i){return t?1!==t.length&&i?i&&t.find(n=>n.id===i)||null:t[0]:null}function E_(t){const i=t?.[bt]?.handleBounds||null,n=i&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},i,!!n]}const Xg=[{level:0,isMaxLevel:!0,edges:[]}];const I_={[Ff.Arrow]:({color:t="none",strokeWidth:i=1})=>S.createElement("polyline",{style:{stroke:t,strokeWidth:i},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Ff.ArrowClosed]:({color:t="none",strokeWidth:i=1})=>S.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:i},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Jg=({id:t,type:i,color:n,width:o=12.5,height:r=12.5,markerUnits:l="strokeWidth",strokeWidth:u,orient:p="auto-start-reverse"})=>{const _=function qg(t){const i=Et();return(0,S.useMemo)(()=>Object.prototype.hasOwnProperty.call(I_,t)?I_[t]:(i.getState().onError?.("009",Xn.error009(t)),null),[t])}(i);return _?S.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:p,refX:"0",refY:"0"},S.createElement(_,{color:n,strokeWidth:u})):null},A_=({defaultColor:t,rfId:i})=>{const n=qe((0,S.useCallback)((({defaultColor:t,rfId:i})=>n=>{const o=[];return n.edges.reduce((r,l)=>([l.markerStart,l.markerEnd].forEach(u=>{if(u&&"object"==typeof u){const p=Df(u,i);o.includes(p)||(r.push({id:p,color:u.color||t,...u}),o.push(p))}}),r),[]).sort((r,l)=>r.id.localeCompare(l.id))})({defaultColor:t,rfId:i}),[t,i]),(o,r)=>!(o.length!==r.length||o.some((l,u)=>l.id!==r[u].id)));return S.createElement("defs",null,n.map(o=>S.createElement(Jg,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};A_.displayName="MarkerDefinitions";var Qg=(0,S.memo)(A_);const e0=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),T_=({defaultMarkerColor:t,onlyRenderVisibleElements:i,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:l,onEdgeContextMenu:u,onEdgeMouseEnter:p,onEdgeMouseMove:_,onEdgeMouseLeave:v,onEdgeClick:g,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:C,onReconnectEnd:I,reconnectRadius:A,children:T,disableKeyboardA11y:E})=>{const{edgesFocusable:M,edgesUpdatable:O,elementsSelectable:$,width:X,height:Y,connectionMode:U,nodeInternals:te,onError:H}=qe(e0,At),ue=function Hg(t,i,n){const o=qe((0,S.useCallback)(r=>t?r.edges.filter(l=>{const u=i.get(l.source),p=i.get(l.target);return u?.width&&u?.height&&p?.width&&p?.height&&function Ug({sourcePos:t,targetPos:i,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:l,width:u,height:p,transform:_}){const v={x:Math.min(t.x,i.x),y:Math.min(t.y,i.y),x2:Math.max(t.x+n,i.x+r),y2:Math.max(t.y+o,i.y+l)};v.x===v.x2&&(v.x2+=1),v.y===v.y2&&(v.y2+=1);const g=wc({x:(0-_[0])/_[2],y:(0-_[1])/_[2],width:u/_[2],height:p/_[2]}),y=Math.max(0,Math.min(g.x2,v.x2)-Math.max(g.x,v.x)),x=Math.max(0,Math.min(g.y2,v.y2)-Math.max(g.y,v.y));return Math.ceil(y*x)>0}({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:p.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:p.width,targetHeight:p.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[t,i]));return function Yg(t,i,n=!1){let o=-1;const r=t.reduce((u,p)=>{const _=Yn(p.zIndex);let v=_?p.zIndex:0;if(n){const g=i.get(p.target),y=i.get(p.source),x=p.selected||g?.selected||y?.selected,C=Math.max(y?.[bt]?.z||0,g?.[bt]?.z||0,1e3);v=(_?p.zIndex:0)+(x?C:0)}return u[v]?u[v].push(p):u[v]=[p],o=v>o?v:o,u},{}),l=Object.entries(r).map(([u,p])=>{const _=+u;return{edges:p,level:_,isMaxLevel:_===o}});return 0===l.length?Xg:l}(o,i,n)}(i,te,n);return X?S.createElement(S.Fragment,null,ue.map(({level:ie,edges:de,isMaxLevel:le})=>S.createElement("svg",{key:ie,style:{zIndex:ie},width:X,height:Y,className:"react-flow__edges react-flow__container"},le&&S.createElement(Qg,{defaultColor:t,rfId:o}),S.createElement("g",null,de.map(N=>{const[L,B,J]=E_(te.get(N.source)),[ae,P,Q]=E_(te.get(N.target));if(!J||!Q)return null;let re=N.type||"default";r[re]||(H?.("011",Xn.error011(re)),re="default");const ce=r[re]||r.default,ye=U===Vr.Strict?P.target:(P.target??[]).concat(P.source??[]),ve=N_(B.source,N.sourceHandle),Te=N_(ye,N.targetHandle),Xe=ve?.position||be.Bottom,He=Te?.position||be.Top,et=!!(N.focusable||M&&typeof N.focusable>"u"),Ct=N.reconnectable||N.updatable,lt=typeof x<"u"&&(Ct||O&&typeof Ct>"u");if(!ve||!Te)return H?.("008",Xn.error008(ve,N)),null;const{sourceX:co,sourceY:Wn,targetX:uo,targetY:Zn}=((t,i,n,o,r,l)=>{const u=w_(n,t,i),p=w_(l,o,r);return{sourceX:u.x,sourceY:u.y,targetX:p.x,targetY:p.y}})(L,ve,Xe,ae,Te,He);return S.createElement(ce,{key:N.id,id:N.id,className:it([N.className,l]),type:re,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:co,sourceY:Wn,targetX:uo,targetY:Zn,sourcePosition:Xe,targetPosition:He,elementsSelectable:$,onContextMenu:u,onMouseEnter:p,onMouseMove:_,onMouseLeave:v,onClick:g,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:C,onReconnectEnd:I,reconnectRadius:A,rfId:o,ariaLabel:N.ariaLabel,isFocusable:et,isReconnectable:lt,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:E})})))),T):null};T_.displayName="EdgeRenderer";var t0=(0,S.memo)(T_);const n0=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function o0({children:t}){const i=qe(n0);return S.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:i}},t)}const s0={[be.Left]:be.Right,[be.Right]:be.Left,[be.Top]:be.Bottom,[be.Bottom]:be.Top},F_=({nodeId:t,handleType:i,style:n,type:o=zr.Bezier,CustomComponent:r,connectionStatus:l})=>{const{fromNode:u,handleId:p,toX:_,toY:v,connectionMode:g}=qe((0,S.useCallback)(Y=>({fromNode:Y.nodeInternals.get(t),handleId:Y.connectionHandleId,toX:(Y.connectionPosition.x-Y.transform[0])/Y.transform[2],toY:(Y.connectionPosition.y-Y.transform[1])/Y.transform[2],connectionMode:Y.connectionMode}),[t]),At),y=u?.[bt]?.handleBounds;let x=y?.[i];if(g===Vr.Loose&&(x=x||y?.["source"===i?"target":"source"]),!u||!x)return null;const C=p?x.find(Y=>Y.id===p):x[0],I=C?C.x+C.width/2:(u.width??0)/2,A=C?C.y+C.height/2:u.height??0,T=(u.positionAbsolute?.x??0)+I,E=(u.positionAbsolute?.y??0)+A,M=C?.position,O=M?s0[M]:null;if(!M||!O)return null;if(r)return S.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:u,fromHandle:C,fromX:T,fromY:E,toX:_,toY:v,fromPosition:M,toPosition:O,connectionStatus:l});let $="";const X={sourceX:T,sourceY:E,sourcePosition:M,targetX:_,targetY:v,targetPosition:O};return o===zr.Bezier?[$]=Gm(X):o===zr.Step?[$]=jf({...X,borderRadius:0}):o===zr.SmoothStep?[$]=jf(X):o===zr.SimpleBezier?[$]=Rm(X):$=`M${T},${E} ${_},${v}`,S.createElement("path",{d:$,fill:"none",className:"react-flow__connection-path",style:n})};F_.displayName="ConnectionLine";const a0=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function l0({containerStyle:t,style:i,type:n,component:o}){const{nodeId:r,handleType:l,nodesConnectable:u,width:p,height:_,connectionStatus:v}=qe(a0,At);return r&&l&&p&&u?S.createElement("svg",{style:t,width:p,height:_,className:"react-flow__edges react-flow__connectionline react-flow__container"},S.createElement("g",{className:it(["react-flow__connection",v])},S.createElement(F_,{nodeId:r,handleType:l,style:i,type:n,CustomComponent:o,connectionStatus:v}))):null}function R_(t,i){return(0,S.useRef)(null),Et(),(0,S.useMemo)(()=>i(t),[t])}const j_=({nodeTypes:t,edgeTypes:i,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:l,onNodeClick:u,onEdgeClick:p,onNodeDoubleClick:_,onEdgeDoubleClick:v,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:C,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:T,connectionLineType:E,connectionLineStyle:M,connectionLineComponent:O,connectionLineContainerStyle:$,selectionKeyCode:X,selectionOnDrag:Y,selectionMode:U,multiSelectionKeyCode:te,panActivationKeyCode:H,zoomActivationKeyCode:ue,deleteKeyCode:ie,onlyRenderVisibleElements:de,elementsSelectable:le,selectNodesOnDrag:N,defaultViewport:L,translateExtent:B,minZoom:J,maxZoom:ae,preventScrolling:P,defaultMarkerColor:Q,zoomOnScroll:re,zoomOnPinch:ce,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:Te,zoomOnDoubleClick:Xe,panOnDrag:He,onPaneClick:et,onPaneMouseEnter:Ct,onPaneMouseMove:lt,onPaneMouseLeave:co,onPaneScroll:Wn,onPaneContextMenu:uo,onEdgeContextMenu:Zn,onEdgeMouseEnter:Bt,onEdgeMouseMove:Ro,onEdgeMouseLeave:ct,onReconnect:Se,onReconnectStart:Dn,onReconnectEnd:Ur,reconnectRadius:Rc,noDragClassName:Na,noWheelClassName:Ea,noPanClassName:ui,elevateEdgesOnSelect:Ia,disableKeyboardA11y:Xr,nodeOrigin:Yr,nodeExtent:Aa,rfId:Ta})=>{const jc=R_(t,$g),dn=R_(i,Pg);return function r0(t){const i=Xf(),n=(0,S.useRef)(!1);(0,S.useEffect)(()=>{!n.current&&i.viewportInitialized&&t&&(setTimeout(()=>t(i),1),n.current=!0)},[t,i.viewportInitialized])}(l),S.createElement(jg,{onPaneClick:et,onPaneMouseEnter:Ct,onPaneMouseMove:lt,onPaneMouseLeave:co,onPaneContextMenu:uo,onPaneScroll:Wn,deleteKeyCode:ie,selectionKeyCode:X,selectionOnDrag:Y,selectionMode:U,onSelectionStart:A,onSelectionEnd:T,multiSelectionKeyCode:te,panActivationKeyCode:H,zoomActivationKeyCode:ue,elementsSelectable:le,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:re,zoomOnPinch:ce,zoomOnDoubleClick:Xe,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:Te,panOnDrag:He,defaultViewport:L,translateExtent:B,minZoom:J,maxZoom:ae,onSelectionContextMenu:I,preventScrolling:P,noDragClassName:Na,noWheelClassName:Ea,noPanClassName:ui,disableKeyboardA11y:Xr},S.createElement(o0,null,S.createElement(t0,{edgeTypes:dn,onEdgeClick:p,onEdgeDoubleClick:v,onlyRenderVisibleElements:de,onEdgeContextMenu:Zn,onEdgeMouseEnter:Bt,onEdgeMouseMove:Ro,onEdgeMouseLeave:ct,onReconnect:Se,onReconnectStart:Dn,onReconnectEnd:Ur,reconnectRadius:Rc,defaultMarkerColor:Q,noPanClassName:ui,elevateEdgesOnSelect:!!Ia,disableKeyboardA11y:Xr,rfId:Ta},S.createElement(l0,{style:M,type:E,component:O,containerStyle:$})),S.createElement("div",{className:"react-flow__edgelabel-renderer"}),S.createElement(Og,{nodeTypes:jc,onNodeClick:u,onNodeDoubleClick:_,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:C,selectNodesOnDrag:N,onlyRenderVisibleElements:de,noPanClassName:ui,noDragClassName:Na,disableKeyboardA11y:Xr,nodeOrigin:Yr,nodeExtent:Aa,rfId:Ta})))};j_.displayName="GraphView";var c0=(0,S.memo)(j_);const Kf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Li={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Kf,nodeExtent:Kf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Vr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,i)=>{},isValidConnection:void 0},Qf=({children:t})=>{const i=(0,S.useRef)(null);return i.current||(i.current=(()=>{return t=(t,i)=>({...Li,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:l}=i();t({nodeInternals:Uf(n,o,r,l)})},getNodes:()=>Array.from(i().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=i();t({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",l=typeof o<"u",u=r?Uf(n,new Map,i().nodeOrigin,i().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:l?o:[],hasDefaultNodes:r,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:l,fitViewOnInitDone:u,fitViewOnInitOptions:p,domNode:_,nodeOrigin:v}=i(),g=_?.querySelector(".react-flow__viewport");if(!g)return;const y=window.getComputedStyle(g),{m22:x}=new window.DOMMatrixReadOnly(y.transform),C=n.reduce((A,T)=>{const E=r.get(T.id);if(E?.hidden)r.set(E.id,{...E,[bt]:{...E[bt],handleBounds:void 0}});else if(E){const M=Ef(T.nodeElement);M.width&&M.height&&(E.width!==M.width||E.height!==M.height||T.forceUpdate)&&(r.set(E.id,{...E,[bt]:{...E[bt],handleBounds:{source:v_(".source",T.nodeElement,x,v),target:v_(".target",T.nodeElement,x,v)}},...M}),A.push({id:E.id,type:"dimensions",dimensions:M}))}return A},[]);a_(r,v);const I=u||l&&!u&&l_(i,{initial:!0,...p});t({nodeInternals:new Map(r),fitViewOnInitDone:I}),C?.length>0&&o?.(C)},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:l}=i();l(n.map(p=>{const _={id:p.id,type:"position",dragging:r};return o&&(_.positionAbsolute=p.positionAbsolute,_.position=p.position),_}))},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:l,nodeOrigin:u,getNodes:p,elevateNodesOnSelect:_}=i();if(n?.length){if(l){const g=Uf(Hf(n,p()),r,u,_);t({nodeInternals:g})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:l}=i();let u,p=null;o?u=n.map(_=>Pi(_,!0)):(u=Ca(l(),n),p=Ca(r,[])),op({changedNodes:u,changedEdges:p,get:i,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:l}=i();let u,p=null;o?u=n.map(_=>Pi(_,!0)):(u=Ca(r,n),p=Ca(l(),[])),op({changedNodes:p,changedEdges:u,get:i,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:l}=i(),p=o||r;op({changedNodes:(n||l()).map(g=>(g.selected=!1,Pi(g.id,!1))),changedEdges:p.map(g=>Pi(g.id,!1)),get:i,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=i();o?.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=i();o?.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{i().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=i();op({changedNodes:o().filter(p=>p.selected).map(p=>Pi(p.id,!1)),changedEdges:n.filter(p=>p.selected).map(p=>Pi(p.id,!1)),get:i,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=i();o.forEach(r=>{r.positionAbsolute=If(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:l,d3Zoom:u,d3Selection:p,translateExtent:_}=i();if(!u||!p||!n.x&&!n.y)return!1;const v=ci.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),g=[[0,0],[r,l]],y=u?.constrain()(v,g,_);return u.transform(p,y),o[0]!==y.x||o[1]!==y.y||o[2]!==y.k},cancelConnection:()=>t({connectionNodeId:Li.connectionNodeId,connectionHandleId:Li.connectionHandleId,connectionHandleType:Li.connectionHandleType,connectionStatus:Li.connectionStatus,connectionStartHandle:Li.connectionStartHandle,connectionEndHandle:Li.connectionEndHandle}),reset:()=>t({...Li})}),t?Cn(t,Object.is):Cn;var t})()),S.createElement(jh,{value:i.current},t)};Qf.displayName="ReactFlowProvider";const M_=({children:t})=>(0,S.useContext)(Wd)?S.createElement(S.Fragment,null,t):S.createElement(Qf,null,t);M_.displayName="ReactFlowWrapper";const d0={input:Jm,default:Pf,output:Qm,group:Lf},p0={default:ep,straight:$f,step:Mf,smoothstep:Kd,simplebezier:Rf},f0=[0,0],m0=[15,15],_0={x:0,y:0,zoom:1},h0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},$_=(0,S.forwardRef)(({nodes:t,edges:i,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:l=d0,edgeTypes:u=p0,onNodeClick:p,onEdgeClick:_,onInit:v,onMove:g,onMoveStart:y,onMoveEnd:x,onConnect:C,onConnectStart:I,onConnectEnd:A,onClickConnectStart:T,onClickConnectEnd:E,onNodeMouseEnter:M,onNodeMouseMove:O,onNodeMouseLeave:$,onNodeContextMenu:X,onNodeDoubleClick:Y,onNodeDragStart:U,onNodeDrag:te,onNodeDragStop:H,onNodesDelete:ue,onEdgesDelete:ie,onSelectionChange:de,onSelectionDragStart:le,onSelectionDrag:N,onSelectionDragStop:L,onSelectionContextMenu:B,onSelectionStart:J,onSelectionEnd:ae,connectionMode:P=Vr.Strict,connectionLineType:Q=zr.Bezier,connectionLineStyle:re,connectionLineComponent:ce,connectionLineContainerStyle:ye,deleteKeyCode:ve="Backspace",selectionKeyCode:Te="Shift",selectionOnDrag:Xe=!1,selectionMode:He=Jd.Full,panActivationKeyCode:et="Space",multiSelectionKeyCode:Ct=(qd()?"Meta":"Control"),zoomActivationKeyCode:lt=(qd()?"Meta":"Control"),snapToGrid:co=!1,snapGrid:Wn=m0,onlyRenderVisibleElements:uo=!1,selectNodesOnDrag:Zn=!0,nodesDraggable:Bt,nodesConnectable:Ro,nodesFocusable:ct,nodeOrigin:Se=f0,edgesFocusable:Dn,edgesUpdatable:Ur,elementsSelectable:Rc,defaultViewport:Na=_0,minZoom:Ea=.5,maxZoom:ui=2,translateExtent:Ia=Kf,preventScrolling:Xr=!0,nodeExtent:Yr,defaultMarkerColor:Aa="#b1b1b7",zoomOnScroll:Ta=!0,zoomOnPinch:jc=!0,panOnScroll:dn=!1,panOnScrollSpeed:jo=.5,panOnScrollMode:Hr=ha.Free,zoomOnDoubleClick:Wr=!0,panOnDrag:Fa=!0,onPaneClick:Mo,onPaneMouseEnter:Zr,onPaneMouseMove:rm,onPaneMouseLeave:sm,onPaneScroll:Mc,onPaneContextMenu:am,children:gh,onEdgeContextMenu:qr,onEdgeDoubleClick:Vx,onEdgeMouseEnter:zx,onEdgeMouseMove:Bx,onEdgeMouseLeave:Px,onEdgeUpdate:Lx,onEdgeUpdateStart:Ux,onEdgeUpdateEnd:Xx,onReconnect:Yx,onReconnectStart:Hx,onReconnectEnd:Wx,reconnectRadius:Zx=10,edgeUpdaterRadius:qx=10,onNodesChange:Jx,onEdgesChange:Kx,noDragClassName:Qx="nodrag",noWheelClassName:eC="nowheel",noPanClassName:vh="nopan",fitView:tC=!1,fitViewOptions:nC,connectOnClick:oC=!0,attributionPosition:iC,proOptions:rC,defaultEdgeOptions:sC,elevateNodesOnSelect:aC=!0,elevateEdgesOnSelect:lC=!1,disableKeyboardA11y:yh=!1,autoPanOnConnect:cC=!0,autoPanOnNodeDrag:uC=!0,connectionRadius:dC=20,isValidConnection:pC,onError:fC,style:mC,id:bh,nodeDragThreshold:_C,...hC},gC)=>{const lm=bh||"1";return S.createElement("div",{...hC,style:{...mC,...h0},ref:gC,className:it(["react-flow",r]),"data-testid":"rf__wrapper",id:bh},S.createElement(M_,null,S.createElement(c0,{onInit:v,onMove:g,onMoveStart:y,onMoveEnd:x,onNodeClick:p,onEdgeClick:_,onNodeMouseEnter:M,onNodeMouseMove:O,onNodeMouseLeave:$,onNodeContextMenu:X,onNodeDoubleClick:Y,nodeTypes:l,edgeTypes:u,connectionLineType:Q,connectionLineStyle:re,connectionLineComponent:ce,connectionLineContainerStyle:ye,selectionKeyCode:Te,selectionOnDrag:Xe,selectionMode:He,deleteKeyCode:ve,multiSelectionKeyCode:Ct,panActivationKeyCode:et,zoomActivationKeyCode:lt,onlyRenderVisibleElements:uo,selectNodesOnDrag:Zn,defaultViewport:Na,translateExtent:Ia,minZoom:Ea,maxZoom:ui,preventScrolling:Xr,zoomOnScroll:Ta,zoomOnPinch:jc,zoomOnDoubleClick:Wr,panOnScroll:dn,panOnScrollSpeed:jo,panOnScrollMode:Hr,panOnDrag:Fa,onPaneClick:Mo,onPaneMouseEnter:Zr,onPaneMouseMove:rm,onPaneMouseLeave:sm,onPaneScroll:Mc,onPaneContextMenu:am,onSelectionContextMenu:B,onSelectionStart:J,onSelectionEnd:ae,onEdgeContextMenu:qr,onEdgeDoubleClick:Vx,onEdgeMouseEnter:zx,onEdgeMouseMove:Bx,onEdgeMouseLeave:Px,onReconnect:Yx??Lx,onReconnectStart:Hx??Ux,onReconnectEnd:Wx??Xx,reconnectRadius:Zx??qx,defaultMarkerColor:Aa,noDragClassName:Qx,noWheelClassName:eC,noPanClassName:vh,elevateEdgesOnSelect:lC,rfId:lm,disableKeyboardA11y:yh,nodeOrigin:Se,nodeExtent:Yr}),S.createElement(sg,{nodes:t,edges:i,defaultNodes:n,defaultEdges:o,onConnect:C,onConnectStart:I,onConnectEnd:A,onClickConnectStart:T,onClickConnectEnd:E,nodesDraggable:Bt,nodesConnectable:Ro,nodesFocusable:ct,edgesFocusable:Dn,edgesUpdatable:Ur,elementsSelectable:Rc,elevateNodesOnSelect:aC,minZoom:Ea,maxZoom:ui,nodeExtent:Yr,onNodesChange:Jx,onEdgesChange:Kx,snapToGrid:co,snapGrid:Wn,connectionMode:P,translateExtent:Ia,connectOnClick:oC,defaultEdgeOptions:sC,fitView:tC,fitViewOptions:nC,onNodesDelete:ue,onEdgesDelete:ie,onNodeDragStart:U,onNodeDrag:te,onNodeDragStop:H,onSelectionDrag:N,onSelectionDragStart:le,onSelectionDragStop:L,noPanClassName:vh,nodeOrigin:Se,rfId:lm,autoPanOnConnect:cC,autoPanOnNodeDrag:uC,onError:fC,connectionRadius:dC,isValidConnection:pC,nodeDragThreshold:_C}),S.createElement(ig,{onSelectionChange:de}),gh,S.createElement($h,{proOptions:rC,position:iC}),S.createElement(dg,{rfId:lm,disableKeyboardA11y:yh})))});function G_(t){return i=>{const[n,o]=(0,S.useState)(i),r=(0,S.useCallback)(l=>o(u=>t(l,u)),[]);return[n,o,r]}}$_.displayName="ReactFlow",G_(Hf),G_(f_);var Ui=se(1810),S0=se(3726),D_=se(8405);const k0=["editorContainer"];let V_,O_=!1,w0=(()=>{var t;class i{set insideNg(o){this._insideNg=o,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(o){(0,f.A)(this,"config",void 0),(0,f.A)(this,"_editorContainer",void 0),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"_editor",void 0),(0,f.A)(this,"_options",void 0),(0,f.A)(this,"_autoHeight",!1),(0,f.A)(this,"_height",200),(0,f.A)(this,"_windowResizeSubscription",void 0),(0,f.A)(this,"_insideNg",!1),this.config=o}ngAfterViewInit(){O_?V_.then(()=>{this.initMonaco(this._options,this.insideNg)}):(O_=!0,V_=new Promise(o=>{const r=this.config.baseUrl??"./ai-mod-assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void o();const l=u=>{let p=u||window.require,_={paths:{vs:`${r}/monaco/min/vs`}};Object.assign(_,this.config.requireConfig??{}),p.config(_),p(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),o()})};if(this.config.monacoRequire)l(this.config.monacoRequire);else if(window.require)if(window.require.config)l();else{let u=`${r}/monaco/min/vs/loader.js`,p=new XMLHttpRequest;p.addEventListener("load",()=>{let _=document.createElement("script");_.type="text/javascript",_.text=["var nodeRequire = require;",p.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join("\n"),document.body.appendChild(_),l(window.monacoAmdRequire)}),p.open("GET",u),p.send()}else{const u=document.createElement("script");u.type="text/javascript",u.src=`${r}/monaco/min/vs/loader.js`,u.addEventListener("load",()=>{l()}),document.body.appendChild(u)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(D_.R))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(o,r){if(1&o&&e.GBs(k0,7),2&o){let l;e.mGM(l=e.lsd())&&(r._editorContainer=l.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(o,r){},encapsulation:2})),i})();class z_{static init(i){i.languages.register({id:"demo"}),i.languages.setMonarchTokensProvider("demo",{tokenizer:{root:[[/\{([\[\]a-zA-Z0-9|#$._-]+)\}/,"custom-var"],[/"[^"]+"/,"custom-string"],[/'[^']+'/,"custom-string"],[/`[^`]+`/,"custom-string"],[/^\*\*[A-Z_]+:\s*$/,"custom-keyword"],[/^##.*/,"custom-bold"]]}}),i.languages.setLanguageConfiguration("demo",{brackets:[["{","}"]]}),i.editor.defineTheme("myCoolTheme",{base:"vs",inherit:!0,rules:[{token:"custom-var",foreground:"a31515"},{token:"custom-string",foreground:"a31515"},{token:"custom-keyword",foreground:"516eff"},{token:"custom-bold",fontStyle:"bold"}],colors:{"editor.foreground":"#000000"}}),i.languages.registerDocumentRangeFormattingEditProvider("demo",{provideDocumentRangeFormattingEdits:function(n,o){const r=n.getValueInRange(o);return[{range:o,text:JSON.stringify(JSON.parse(r),void 0,4)}]}})}static initSuggestion(i,n,o){i.languages.registerCompletionItemProvider(n,{triggerCharacters:["."],provideCompletionItems:(r,l)=>{let u=r.getWordUntilPosition(l),_=r.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}).split("\n"),v=_.filter(T=>T.indexOf('*for="')>=0),g=v.length>0?v[v.length-1]:"",y=_[_.length-1].split(/[^_#$\[\].0-9a-zA-Z-]/g),x=y[y.length-1].replaceAll("{","").replaceAll("}",""),C={startLineNumber:l.lineNumber,endLineNumber:l.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn},I=x.split("."),A=[];if(1==I.length){if(A=o.map(T=>({label:T.name,kind:i.languages.CompletionItemKind.Text,insertText:T.name,range:C})),g){let T=g.split('*for="')[1].split(" "),E="let"==T[0]?T[1]:T[0];A.push({label:E,kind:i.languages.CompletionItemKind.Text,insertText:E,range:C})}}else{if(g){let E=g.split('*for="')[1].split(" of ")[1].split('"')[0].replaceAll("{","").replaceAll("}","").trim(),M=g.split('*for="')[1].split(" "),O="let"==M[0]?M[1]:M[0];if(I[0].trim()==O.trim()){let $=[...E.split(".")];I.splice(0,1),$.push(...I),I=$}}let T=o.find(E=>E.name==I[0]);if(T&&"json"==T.type){let E=JSON.parse(T.demo);for(let O=1;O<I.length-1;O++)E=E[I[O]];A=De.extractProperties(E,1).map(O=>({label:O.name,kind:i.languages.CompletionItemKind.Text,insertText:O.name,range:C}))}}return{suggestions:De.distinctArray(A)}}})}}let em=(()=>{var t;class i extends w0{set options(o){this._options={...this.config.defaultOptions,...o},this._editor&&(this._editor.dispose(),this.initMonaco(o,this.insideNg))}set autoHeight(o){this._autoHeight=o}set height(o){this._height=o}get options(){return this._options}set model(o){this.options.model=o,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(o,r){super(r),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"editorConfig",void 0),(0,f.A)(this,"_value",""),(0,f.A)(this,"propagateChange",l=>{}),(0,f.A)(this,"onTouched",()=>{}),(0,f.A)(this,"resizeObserver",new ResizeObserver(()=>{this._editor&&this._editor.layout()})),(0,f.A)(this,"vars",[]),(0,f.A)(this,"onChange",new e.bkB),(0,f.A)(this,"onFocus",new e.bkB),this.zone=o,this.editorConfig=r}writeValue(o){this._value=o||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}formatCode(){this._editor.getAction("editor.action.formatDocument").run()}registerOnChange(o){this.propagateChange=o}registerOnTouched(o){this.onTouched=o}focus(){this._editor?.focus()}insertText(o){this._editor.executeEdits("my-source",[{range:this._editor.getSelection(),text:o}])}getSelected(){let o=this._editor.getSelection();return this._editor.getModel().getValueInRange(o)}initMonaco(o,r){0==monaco.languages.getLanguages().filter(u=>"demo"==u.id).length&&z_.init(monaco),this.vars.length>0&&z_.initSuggestion(monaco,this.options.language,this.vars);const l=!!o.model;if(l){const u=monaco.editor.getModel(o.model.uri||"");u?(o.model=u,o.model.setValue(this._value)):o.model=monaco.editor.createModel(o.model.value,o.model.language,o.model.uri)}this._editorContainer&&(this._editorContainer.nativeElement.parentNode.style.height=this._height+"px"),r?this._editor=monaco.editor.create(this._editorContainer?.nativeElement,o):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer?.nativeElement,o)}),l||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(u=>{const p=this._editor.getValue();this.zone.run(()=>{this.propagateChange(p),this._value=p,this.onChange.emit(p)})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._editor.onDidFocusEditorText(()=>{this.onFocus.emit(this)}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,S0.R)(window,"resize").subscribe(()=>this._editor.layout()),this.resizeObserver.observe(this._editorContainer?.nativeElement),this._editor.onDidContentSizeChange(u=>{let p=Math.max(this._height,u.contentHeight);this._editorContainer&&this._autoHeight&&(this._editorContainer.nativeElement.parentNode.style.height=p+15+"px")}),setTimeout(()=>{this._editor.focus(),this._editor.setPosition({column:1,lineNumber:2})},200),this.onInit.emit(this._editor)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(D_.R))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",autoHeight:"autoHeight",height:"height",model:"model",vars:"vars"},outputs:{onChange:"onChange",onFocus:"onFocus"},features:[e.Jv_([{provide:w.kq,useExisting:(0,e.Rfq)(()=>t),multi:!0}]),e.Vt3],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(o,r){1&o&&e.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]})),i})(),N0=(()=>{var t;class i{constructor(){(0,f.A)(this,"data",""),(0,f.A)(this,"editorConf",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0}),(0,f.A)(this,"onChange",new e.bkB)}change(){this.onChange.emit(this.data)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-json-editor"]],inputs:{data:"data"},outputs:{onChange:"onChange"},standalone:!0,features:[e.aNF],decls:3,vars:4,consts:[["editor",""],[1,"card","shadow-none","bg-transparent","border","border-label-secondary","ps-0","pt-4","pe-4","pb-4"],[1,"my-code-editor",3,"onChange","ngModelChange","height","autoHeight","options","ngModel"]],template:function(o,r){if(1&o){const l=e.RV6();e.j41(0,"div",1)(1,"ngx-monaco-editor",2,0),e.bIt("onChange",function(){return e.eBV(l),e.Njj(r.change())}),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(r.data,p)||(r.data=p),e.Njj(p)}),e.k0s()()}2&o&&(e.R7$(),e.Y8G("height",200)("autoHeight",!0)("options",r.editorConf),e.R50("ngModel",r.data))},dependencies:[Ui.V,em,V.MD,w.YN,w.BC,w.vS]})),i})();var E0=se(2663);function tm(t){if(!nm(t))throw new Error("Parameter was not an error")}function nm(t){return!!t&&"object"==typeof t&&"[object Error]"===function I0(t){return Object.prototype.toString.call(t)}(t)||t instanceof Error}class To extends Error{constructor(i,n){const o=[...arguments],{options:r,shortMessage:l}=function T0(t){let i,n="";if(0===t.length)i={};else if(nm(t[0]))i={cause:t[0]},n=t.slice(1).join(" ")||"";else if(t[0]&&"object"==typeof t[0])i=Object.assign({},t[0]),n=t.slice(1).join(" ")||"";else{if("string"!=typeof t[0])throw new Error("Invalid arguments passed to Layerr");i={},n=n=t.join(" ")||""}return{options:i,shortMessage:n}}(o);let u=l;r.cause&&(u=`${u}: ${r.cause.message}`),super(u),this.message=u,this.name=r.name&&"string"==typeof r.name?r.name:"Layerr",r.cause&&Object.defineProperty(this,"_cause",{value:r.cause}),Object.defineProperty(this,"_info",{value:{}}),r.info&&"object"==typeof r.info&&Object.assign(this._info,r.info),Error.captureStackTrace&&Error.captureStackTrace(this,r.constructorOpt||this.constructor)}static cause(i){return tm(i),i._cause&&nm(i._cause)?i._cause:null}static fullStack(i){tm(i);const n=To.cause(i);return n?`${i.stack}\ncaused by: ${To.fullStack(n)}`:i.stack??""}static info(i){tm(i);const n={},o=To.cause(i);return o&&Object.assign(n,To.info(o)),i._info&&Object.assign(n,i._info),n}toString(){let i=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(i=`${i}: ${this.message}`),i}}const Pr="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Lr=32,om=0xffffffffffff,Hn=Object.freeze({source:"ulid"});function O0(t){let i=Math.floor(t()*Lr);return i===Lr&&(i=Lr-1),Pr.charAt(i)}var z0=se(4412);let B0=(()=>{var t;class i extends z0.t{constructor(){super("light"),this.subscribe(o=>{!o||"undefined"==o||(document.body.classList.contains("dark")&&"light"==o&&document.body.classList.remove("dark"),document.body.classList.contains("light")&&"dark"==o&&document.body.classList.remove("light"),document.body.classList.add(o))})}setTheme(o){this.next(o)}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),i})(),H_=(()=>{var t;class i{constructor(o,r,l){(0,f.A)(this,"ngContainer",void 0),(0,f.A)(this,"ngTheme",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"ngReactComponent",void 0),(0,f.A)(this,"_root",void 0),(0,f.A)(this,"theme",void 0),(0,f.A)(this,"ngSubscriptions",void 0),this.ngContainer=o,this.ngTheme=r,this.ngZone=l,this.ngSubscriptions=[this.ngTheme.subscribe(u=>{this.theme=u,this.ngOnChanges()})]}ngOnInit(){if(!this.ngReactComponent)throw console.error("NO"),new Error("ReactMagicWrapperComponent cannot start without a provided ngReactComponent!")}ngOnChanges(o){this._render()}ngAfterViewInit(){this._render()}ngOnDestroy(){this._root.unmount(),this.ngSubscriptions.forEach(o=>o.unsubscribe())}_render(){this.ngReactComponent?this.ngZone.runOutsideAngular(()=>{try{this._root||(this._root=(0,E0.H)(this.ngContainer.element.nativeElement));const o=Object.keys(this).filter(p=>!/^(?:_|ng)/.test(p)),r=o.filter(p=>!p.startsWith("on")),l=o.filter(p=>p.startsWith("on")),u={};r.forEach(p=>u[p]=this[p]),this.ngZone.runGuarded(()=>{l.forEach(p=>u[p]=(..._)=>this[p].next(_))}),this._root.render(S.createElement(this.ngReactComponent,{props:u}))}catch(o){console.error(o)}}):console.log("Render no component. May be context issue")}}return t=i,(0,f.A)(i,"WrapAngularComponent",({component:n,appRef:o,injector:r,ngZone:l,staticInputs:u,staticOutputs:p,additionalChildren:_})=>S.memo(v=>{const g=function V0(t,i){const n=i||function U_(t){const i=t||function $0(){return function D0(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}(),n=i&&(i.crypto||i.msCrypto)||null;if("function"==typeof n?.getRandomValues)return()=>{const o=new Uint8Array(1);return n.getRandomValues(o),o[0]/255};if("function"==typeof n?.randomBytes)return()=>n.randomBytes(1).readUInt8()/255;throw new To({info:{code:"PRNG_DETECT",...Hn}},"Failed to find a reliable PRNG")}();return function im(t,i){if(isNaN(t))throw new To({info:{code:"ENC_TIME_NAN",...Hn}},`Time must be a number: ${t}`);if(t>om)throw new To({info:{code:"ENC_TIME_SIZE_EXCEED",...Hn}},`Cannot encode a time larger than ${om}: ${t}`);if(t<0)throw new To({info:{code:"ENC_TIME_NEG",...Hn}},`Time must be positive: ${t}`);if(!1===Number.isInteger(t))throw new To({info:{code:"ENC_TIME_TYPE",...Hn}},`Time must be an integer: ${t}`);let n,o="";for(let r=i;r>0;r--)n=t%Lr,o=Pr.charAt(n)+o,t=(t-n)/Lr;return o}(isNaN(t)?Date.now():t,10)+function X_(t,i){let n="";for(;t>0;t--)n=O0(i)+n;return n}(16,n)}();return S.useEffect(()=>{try{const y=(0,e.a0P)(n,{environmentInjector:o.injector,elementInjector:r,hostElement:document.getElementById(g)??void 0});o.attachView(y.hostView),Object.assign(u,v);const{inputs:x,outputs:C}=n.\u0275cmp;Object.entries(x).filter(([M,O])=>y.instance[O]!=u[M]).forEach(([M,O])=>{u.hasOwnProperty(M)&&(y.instance[O]=u[M])});const A={};Object.entries(C).filter(([M,O])=>!A[M]).forEach(([M,O])=>{if(!p.hasOwnProperty(M))return;const X=p,Y=y.instance[O].subscribe((...U)=>{l.run(()=>{X[M](...U)})});A[M]=Y});const E=y.onDestroy?.bind(y);y.onDestroy=M=>{Object.values(A).forEach(O=>O.unsubscribe()),E?.(M)},y.changeDetectorRef.detectChanges()}catch(y){console.error(y)}},[]),S.createElement("div",{},S.createElement("div",{id:g}),..._)})),(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(e.c1b),e.rXU(B0),e.rXU(e.SKi))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-react-magic-wrapper"]],standalone:!0,features:[e.OA$,e.aNF],decls:0,vars:0,template:function(o,r){},encapsulation:2})),i})(),Zt=(()=>{var t;class i{set data(o){this.nodeData=o}noticeUpdate(){this.updateOutput(),this.onDataChange.emit(this.nodeData)}constructor(o,r){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"id",""),(0,f.A)(this,"displayName",void 0),(0,f.A)(this,"type","base"),(0,f.A)(this,"desc",""),(0,f.A)(this,"err",""),(0,f.A)(this,"mode",""),(0,f.A)(this,"onDataChange",new e.bkB),(0,f.A)(this,"settingConf",void 0),this.ngZone=o,this.appService=r}ngOnInit(){this.updateOutput()}ngDoCheck(){}ngAfterViewInit(){let o=document.getElementById("settingModal-"+this.id);o&&(o.parentNode?.removeChild(o),document.body.appendChild(o),this.upgradeConf())}upgradeConf(){let o=this.getConfig();for(let r of o){let l=this.nodeData.conf.find(u=>u.key==r.key);l&&(r.value=l.value)}this.nodeData.conf=o}updateOutput(){}focusSettingModal(){let o=document.getElementById("settingModal-"+this.id);o&&o.querySelector(".form-control")?.focus()}openModal(o){let r=document.getElementById(o);if(r){let l=r.getAttribute("data-bs-target")?.substring(1)??"",u=document.getElementById(l);u&&(u.querySelectorAll(".content").forEach(p=>{p.classList.remove("content")}),setTimeout(()=>{u.querySelectorAll('[data-bs-dismiss="modal"]').forEach(p=>{p.addEventListener("click",()=>{u.classList.remove("show")})})},400),u.classList.add("show")),r.click()}}openSetting(o){this.ngZone?.run(()=>{o&&(this.settingConf=this.nodeData.conf.filter(r=>r.key==o)[0]??{key:o,value:""})}),this.openModal("btnShowModal-"+this.id)}closeSetting(){this.settingConf=void 0}getClassType(){return i}build(o,r,l,u){return H_.WrapAngularComponent({component:this.getClassType(),appRef:o,injector:r,ngZone:l,staticInputs:{},staticOutputs:{onDataChange:p=>{u(p)}},additionalChildren:[S.createElement(va,{type:"target",position:be.Left}),S.createElement(va,{type:"source",position:be.Right})]})}getConfig(){return[]}setConfig(o,r){let l=this.nodeData.conf.filter(u=>u.key==o)[0];l?l.value=r:this.nodeData.conf.push({key:o,value:r}),this.noticeUpdate()}findConfig(o,r){return r||(r=this.nodeData),r.conf.filter(u=>u.key==o)[0]?.value??""}getNodeSpec(){return{id:"",type:this.type,desc:this.desc,displayName:this.displayName,conf:this.getConfig(),links:[],inputs:[],outputs:[]}}run(o,r,l,u,p,_){_(new Map)}parseTempate(o,r){let l=o.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g);for(let u of l){let p=r.get(u[1]);p?"string"==typeof p?o=o.replaceAll(u[0],p??""):p instanceof File&&(o=o.replaceAll(u[0],"Filename: "+p.name)):o=o.replaceAll(u[0],"")}return o}setupOutputValue(o,r){let l=new Map;for(let u of r.outputs)l.set(u.name,o);return l}showAddCollectionModal(){this.openModal("btnShowAddCollectionModal")}showAddVCollectionModal(){this.openModal("btnShowAddVCollectionModal")}showAddApiModal(){this.openModal("btnShowAddApiModal")}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-base-node"]],inputs:{data:"data",id:"id",mode:"mode"},outputs:{onDataChange:"onDataChange"},standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(o,r){}})),i})();const P0=[{name:"Markdown View",html:' bs-data="markdown-view"'},{name:"Loop",html:' *for="item of listVars"'},{name:"Selectable",html:' bs-select="img.src=>selectedImgs"'},{name:"Run JS",html:' bs-run="varName"'}],L0=["editor"];function U0(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertUserInterface(r))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.ZvI("bx bx-",n.icon," scaleX-n1-rtl mr-2"),e.R7$(),e.SpI(" ",n.name," ")}}function X0(t,i){if(1&t&&(e.j41(0,"div",7)(1,"button",8),e.nrm(2,"span",22),e.EFF(3," User interface "),e.k0s(),e.j41(4,"mat-menu",null,3)(6,"div",10)(7,"ul",11),e.DNE(8,U0,4,4,"li",12),e.k0s()()()()),2&t){const n=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",o.userInterfaces)}}function Y0(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertAttr(r))}),e.EFF(2),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function H0(t,i){if(1&t&&(e.j41(0,"div",7)(1,"button",8),e.nrm(2,"span",22),e.EFF(3," Html Attributes "),e.k0s(),e.j41(4,"mat-menu",null,4)(6,"div",10)(7,"ul",11),e.DNE(8,Y0,3,1,"li",12),e.k0s()()()()),2&t){const n=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",o.htmlAttrs)}}function W0(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",24),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertInputVar(r))}),e.EFF(2),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(),e.ZvI("ms-",n.level," dropdown-item d-flex align-items-center"),e.FS9("title",n.demo),e.R7$(),e.SpI(" ",n.name," ")}}function Z0(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertKey(r))}),e.EFF(2),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.SpI(" ",n.key," ")}}function q0(t,i){if(1&t&&(e.j41(0,"div",25),e.nrm(1,"div",26),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("innerHTML",n.inputStr,e.npT)}}function J0(t,i){if(1&t){const n=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.genWithAI())}),e.nrm(1,"i",28),e.EFF(2),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.isLoading),e.R7$(2),e.SpI(" ",n.isLoading?"Generating...":"Generate with AI"," ")}}let en=(()=>{var t;class i extends Xo{constructor(o,r,l){super(),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"userInterfaces",[]),(0,f.A)(this,"htmlAttrs",P0),(0,f.A)(this,"editor",void 0),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"html",!1),(0,f.A)(this,"agentName",""),(0,f.A)(this,"editorConf",void 0),(0,f.A)(this,"varBtnLabel","Input Variables"),(0,f.A)(this,"onClose",new e.bkB),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"queue",[]),(0,f.A)(this,"varFormat","{@@}"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"lstVars",[]),(0,f.A)(this,"textData",""),this.appService=o,this.aiApi=r,this.zone=l}save(){this.textData=this.inputStr,this.onSave.emit(this.inputStr)}close(){this.inputStr=this.textData,this.onClose.emit()}genWithAI(){if(!this.isLoading){if(this.isLoading=!0,this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr),this.inputStr="",this.html){let o=JSON.stringify(this.lstVars.map(r=>r.name.trim()));this.agentRunner.setVars(["vars::"+o])}this.agentRunner.send(),this.editor?.focus()}}onMsgUpdate(o,r){let l=r?r.length:0,u=0;for(;u<l;){const p=Math.floor(9*Math.random())+2,_=Math.floor(16*Math.random())+5;this.queue.push({str:r.substring(u,u+p),t:_}),0==u&&1==this.queue.length&&this.startInsertAnim(),u+=p}}startInsertAnim(){let o=this.queue.shift();o&&(this.editor?.insertText(o.str),setTimeout(()=>{this.startInsertAnim()},o.t))}onDone(o){this.zone.run(()=>{this.isLoading=!1})}insertInputVar(o){o.name.startsWith("*")?(this.editor?.insertText(o.demo),this.editor?.formatCode()):this.editor?.insertText(this.varFormat.replaceAll("@@",o.name)),this.editor?.focus()}insertAttr(o){this.editor?.insertText(o.html),this.editor?.focus()}insertKey(o){this.editor?.insertText("{"+o.key+"}"),this.editor?.focus()}insertUserInterface(o){this.editor?.insertText(o.html),this.editor?.focus()}loadConf(){this.appService.getConf("app-ui-interfaces").subscribe(o=>{let r=o.data.split("====");this.userInterfaces=[];for(let l of r){if(""==l.trim())continue;let u=l.trim().split("\n"),p=u[0],_=u[1];u.splice(0,2);let v=u.join("\n");this.userInterfaces.push({name:p,icon:_,html:v})}})}loadKeys(){this.appService?.listKeys().subscribe(o=>{this.lstKeys=o})}ngOnInit(){this.agentRunner=new Jn(this.aiApi,this),this.agentRunner.setAgentName(this.agentName),this.loadConf(),this.loadKeys(),this.textData=this.inputStr,this.editorConf={theme:"myCoolTheme",language:this.html?"html":"demo",wordWrap:this.html?"off":"on",lineNumbers:this.html?"on":"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0};for(let o of this.vars){if(this.lstVars.push({name:o.name,level:0,demo:o.demo}),"json"==o.type){let l=De.extractProperties(JSON.parse(o.demo),1);for(let u of l)this.lstVars.push({name:o.name+"."+u.name,level:u.level,demo:""})}o.type.endsWith("[]")&&this.lstVars.push({name:`*for="item of ${o.name}"`,level:0,demo:`<div class="box mb-3" *for="item of ${o.name}">\n    <div class="box-body">\n        <p class="box-text">\n            {item}\n        </p>\n    </div>\n</div>`})}}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU($e),e.rXU(dt),e.rXU(e.SKi))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-input-format"]],viewQuery:function(o,r){if(1&o&&e.GBs(L0,5),2&o){let l;e.mGM(l=e.lsd())&&(r.editor=l.first)}},inputs:{inputStr:"inputStr",vars:"vars",html:"html",agentName:"agentName",varBtnLabel:"varBtnLabel",varFormat:"varFormat"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:17,consts:[["menu3",""],["menu4",""],["editor",""],["menu1",""],["menu2",""],[1,"mb-3"],["class","btn-group mr-3",4,"ngIf"],[1,"btn-group","mr-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","p-0",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-18px","mr-1"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[2,"max-height","550px","overflow-y","auto","overflow-x","hidden"],[1,"col-span-2"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","vars","height","autoHeight","options","ngModel"],["class","col-lg-4 p-3 rounded",4,"ngIf"],[1,"mt-3","text-end"],["type","button","class","btn btn-text-primary mr-3","title","Enter what do you want your agent do and click this button",3,"disabled","click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"tf-icons","bx","bx-tv","bx-18px","mr-1"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],["href","javascript:void(0);",3,"click","title"],[1,"col-lg-4","p-3","rounded"],[3,"innerHTML"],["type","button","title","Enter what do you want your agent do and click this button",1,"btn","btn-text-primary","mr-3",3,"click","disabled"],[1,"bx","bxs-magic-wand","mr-2"]],template:function(o,r){if(1&o){const l=e.RV6();e.j41(0,"div")(1,"div",5),e.DNE(2,X0,9,2,"div",6)(3,H0,9,2,"div",6),e.j41(4,"div",7)(5,"button",8),e.nrm(6,"span",9),e.EFF(7),e.k0s(),e.j41(8,"mat-menu",null,0)(10,"div",10)(11,"ul",11),e.DNE(12,W0,3,5,"li",12),e.k0s()()()(),e.j41(13,"div",7)(14,"button",8),e.nrm(15,"span",9),e.EFF(16," Access Keys "),e.k0s(),e.j41(17,"mat-menu",null,1)(19,"div",10)(20,"ul",11),e.DNE(21,Z0,3,1,"li",12),e.k0s()()()()(),e.j41(22,"div",13)(23,"div",14)(24,"div",15)(25,"ngx-monaco-editor",16,2),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(r.inputStr,p)||(r.inputStr=p),e.Njj(p)}),e.k0s()()(),e.DNE(27,q0,2,1,"div",17),e.k0s(),e.j41(28,"div",18),e.DNE(29,J0,3,2,"button",19),e.j41(30,"button",20),e.bIt("click",function(){return e.eBV(l),e.Njj(r.close())}),e.EFF(31,"Close"),e.k0s(),e.j41(32,"button",21),e.bIt("click",function(){return e.eBV(l),e.Njj(r.save())}),e.EFF(33," Save "),e.k0s()()()}if(2&o){const l=e.sdS(9),u=e.sdS(18);e.R7$(2),e.Y8G("ngIf",r.html),e.R7$(),e.Y8G("ngIf",r.html),e.R7$(2),e.Y8G("matMenuTriggerFor",l),e.R7$(2),e.SpI(" ",r.varBtnLabel," "),e.R7$(5),e.Y8G("ngForOf",r.lstVars),e.R7$(2),e.Y8G("matMenuTriggerFor",u),e.R7$(7),e.Y8G("ngForOf",r.lstKeys),e.R7$(),e.ZvI("grid grid-cols-",r.html?"3":"1"," gap-1"),e.R7$(3),e.Y8G("vars",r.vars)("height",450)("autoHeight",!0)("options",r.editorConf),e.R50("ngModel",r.inputStr),e.R7$(2),e.Y8G("ngIf",r.html),e.R7$(2),e.Y8G("ngIf",r.agentName)}},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.BC,w.vS,Ui.V,em,Z.Cn,Z.kk,Z.Cp],styles:[".zoom-out-80[_ngcontent-%COMP%]{transform:scale(.8)}"]})),i})();function K0(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Q0(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function e1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add url "),e.k0s()()}}function t1(t,i){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Url "),e.k0s(),e.DNE(3,Q0,3,5,"div",20)(4,e1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function n1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function o1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add headers "),e.k0s()()}}function r1(t,i){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Headers "),e.k0s(),e.DNE(3,n1,3,5,"div",20)(4,o1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function s1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Method "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function a1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function l1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add body "),e.k0s()()}}function c1(t,i){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Request body "),e.k0s(),e.DNE(3,a1,3,5,"div",20)(4,l1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function u1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function d1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add specs "),e.k0s()()}}function p1(t,i){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Response specs "),e.k0s(),e.DNE(3,u1,3,5,"div",20)(4,d1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function f1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function m1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function _1(t,i){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Check success "),e.k0s(),e.DNE(3,f1,3,5,"div",20)(4,m1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function h1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function g1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function v1(t,i){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat until "),e.k0s(),e.DNE(3,h1,3,5,"div",20)(4,g1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function y1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat timeout (second) "),e.k0s(),e.j41(3,"input",26),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function b1(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,t1,5,2,"div",17)(2,r1,5,2,"div",17)(3,s1,4,1,"div",17)(4,c1,5,2,"div",17)(5,p1,5,2,"div",17)(6,_1,5,2,"div",17)(7,v1,5,2,"div",17)(8,y1,4,1,"div",17),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","headers"==n.key),e.R7$(),e.Y8G("ngIf","method"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key),e.R7$(),e.Y8G("ngIf","response"==n.key),e.R7$(),e.Y8G("ngIf","check"==n.key),e.R7$(),e.Y8G("ngIf","repeat"==n.key),e.R7$(),e.Y8G("ngIf","wait"==n.key)}}function x1(t,i){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function C1(t,i){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,x1,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function S1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function k1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function w1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function N1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function E1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function I1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let W_=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"headers",[{key:"User-Agent",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:127.0) Gecko/20100101 Firefox/127.0"},{key:"Cookie",value:""},{key:"Authorization",value:""}]),(0,f.A)(this,"type","apiInvoker"),(0,f.A)(this,"desc","Invoke external api")}getClassType(){return i}getConfig(){return[{key:"url",value:""},{key:"headers",value:this.headers.map(r=>r.key+": "+r.value).join("\n")},{key:"method",value:"POST"},{key:"body",value:""},{key:"check",value:""},{key:"repeat",value:""},{key:"wait",value:"180"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-data",type:"json",demo:"{}"}]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}run(o,r,l,u,p,_){}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-api-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:23,vars:15,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Time in second",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,K0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,b1,9,8,"div",5),e.k0s()(),e.DNE(8,C1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,S1,1,2,"app-input-format",14)(18,k1,1,2,"app-input-format",14)(19,w1,1,2,"app-input-format",14)(20,N1,1,2,"app-input-format",14)(21,E1,1,2,"app-input-format",14)(22,I1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","headers"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","body"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","response"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","repeat"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","check"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","url"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.me,w.BC,w.vS,kt,en]})),i})();function A1(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function T1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function F1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function R1(t,i){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,T1,3,5,"div",21)(4,F1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function j1(t,i){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function M1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Voice Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.bIt("change",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.playAu(r))}),e.DNE(4,j1,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.value)}}function $1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",28),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.j41(4,"option",29),e.EFF(5,"tts-1"),e.k0s(),e.j41(6,"option",30),e.EFF(7,"tts-1-hd"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function G1(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,R1,5,2,"div",17)(2,M1,5,2,"div",18)(3,$1,8,1,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","voice"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function D1(t,i){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function O1(t,i){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,D1,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function V1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Z_=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"settings",{key:"style",name:"Voice Style",value:["alloy","echo","fable","onyx","nova","shimmer"],default:"alloy",demo:["https://cdn.openai.com/API/docs/audio/alloy.wav","https://cdn.openai.com/API/docs/audio/echo.wav","https://cdn.openai.com/API/docs/audio/fable.wav","https://cdn.openai.com/API/docs/audio/onyx.wav","https://cdn.openai.com/API/docs/audio/nova.wav","https://cdn.openai.com/API/docs/audio/shimmer.wav"]}),(0,f.A)(this,"type","textToAudio"),(0,f.A)(this,"desc","Generate audio from text"),(0,f.A)(this,"currentAudio",void 0)}getClassType(){return i}getConfig(){return[{key:"input",value:""},{key:"model",value:"tts-1"},{key:"voice",value:this.settings.default}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-audio",type:"json",demo:'{"url": "", "duration": 5}'}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}playAu(o){let r=this.findConfig("voice"),l=this.settings.value.indexOf(r),u=this.settings.demo[l];this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(u),this.currentAudio.play().catch(p=>{console.error("Error playing audio:",p)})}run(o,r,l,u,p,_){}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-audio-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","tts-1"],["value","tts-1-hd"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,A1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,G1,4,3,"div",5),e.k0s()(),e.DNE(8,O1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,V1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,en,kt]})),i})();function z1(t,i){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function B1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function P1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function L1(t,i){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Conditions "),e.k0s(),e.DNE(3,B1,3,5,"div",14)(4,P1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function U1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function X1(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function Y1(t,i){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Message "),e.k0s(),e.DNE(3,U1,3,5,"div",14)(4,X1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function H1(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,L1,5,2,"div",11)(2,Y1,5,2,"div",11),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","message"==n.key)}}function W1(t,i){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Z1(t,i){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,W1,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function q1(t,i){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,z1,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,H1,3,2,"div",8),e.k0s()(),e.DNE(8,Z1,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function J1(t,i){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function K1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Q1(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function ev(t,i){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,K1,1,3,"app-input-format",28)(5,Q1,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","message"==(null==n.settingConf?null:n.settingConf.key))}}let q_=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","check"),(0,f.A)(this,"desc","Check data")}getClassType(){return i}getConfig(){return[{key:"input",value:""},{key:"message",value:"401"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-checkVal",type:"string",demo:""}]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-check-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,r){1&o&&e.DNE(0,q1,9,4,"div",0)(1,J1,1,3,"button",1)(2,ev,6,4,"div",2),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,Ui.V,en,kt]})),i})();function tv(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function nv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function ov(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function iv(t,i){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,nv,3,5,"div",21)(4,ov,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function rv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.j41(4,"option",26),e.EFF(5,"text-embedding-3-small"),e.k0s(),e.j41(6,"option",27),e.EFF(7,"text-embedding-3-large"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function sv(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,iv,5,2,"div",17)(2,rv,8,1,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function av(t,i){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function lv(t,i){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,av,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function cv(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let J_=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","embedding"),(0,f.A)(this,"desc","Embedding data for symantic search")}getClassType(){return i}getConfig(){return[{key:"input",value:""},{key:"model",value:"text-embedding-3-small"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-embeddingVector",type:"vector",demo:""},{name:this.id+"-content",type:"string",demo:""}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,r,l,u,p,_){}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-embedding-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","text-embedding-3-small"],["value","text-embedding-3-large"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,tv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,sv,3,2,"div",5),e.k0s()(),e.DNE(8,lv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,cv,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,kt,en]})),i})();function uv(t,i){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function dv(t,i){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function pv(t,i){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function fv(t,i){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function mv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,dv,7,0,"div",13)(4,pv,3,4,"span",14)(5,fv,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const r=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(r))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=i.$implicit,o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isReading),e.R7$(),e.Y8G("ngIf",!o.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!o.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let _v=(()=>{var t;class i{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",r=>{if(this.err="",r.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,u={file:r,name:this.name,content:""};switch(this.files.push(u),De.getFileExt(r.name)){case"pdf":_=new Ns;break;case"docx":_=new ws;break;case"jpg":case"png":case"jpeg":_=new hi}this.isReading=!0,this.onStartReading.emit(),_?.readFile(r).then(v=>{u.content=v,this.isReading=!1,this.onAddFile.emit(u)})})},200)}remove(o){this.files.splice(o,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(o,r){1&o&&(e.DNE(0,uv,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,mv,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&o&&(e.Y8G("ngIf",r.err),e.R7$(),e.Mz_("id","dropzone-basic-",r.name,""),e.R7$(8),e.Y8G("ngForOf",r.files))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.qT,w.cb,w.cV,kt]})),i})();function hv(t,i){if(1&t&&e.nrm(0,"i",22),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function gv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function vv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function yv(t,i){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(2).$implicit;e.ZvI("",n.value.desc," mr-2")}}function bv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.j41(5,"div")(6,"button",29),e.DNE(7,yv,1,3,"i",30),e.EFF(8),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(4),e.Y8G("ngIf",n.value.desc),e.R7$(),e.SpI(" ",n.value.label,"")}}function xv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.nrm(5,"input",31),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function Cv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.nrm(5,"input",32),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function Sv(t,i){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function kv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.j41(5,"select",33),e.DNE(6,Sv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(3),e.Y8G("ngForOf",n.value.listOptions)}}function wv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.nrm(5,"textarea",36),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function Nv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(r))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(r))}),e.k0s()(),e.j41(5,"div",37)(6,"p",38),e.EFF(7,"Drag and drop your file here"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function Ev(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,gv,6,2,"div",23)(2,vv,6,2,"div",23)(3,bv,9,3,"div",23)(4,xv,6,1,"div",23)(5,Cv,6,1,"div",23)(6,kv,7,2,"div",23)(7,wv,6,1,"div",23)(8,Nv,8,1,"div",23),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","submit"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type),e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type)}}function Iv(t,i){if(1&t&&(e.j41(0,"div",42),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Av(t,i){if(1&t&&(e.j41(0,"div",39)(1,"div",40),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Iv,2,2,"div",41),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Tv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,hv,1,1,"i",7),e.k0s(),e.j41(5,"div",8)(6,"div",9),e.DNE(7,Ev,9,8,"div",10),e.k0s(),e.j41(8,"div")(9,"div",11)(10,"button",12),e.nrm(11,"i",13),e.EFF(12," Add form control"),e.k0s(),e.j41(13,"mat-menu",null,0)(15,"div",14)(16,"ul",15)(17,"li")(18,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("textbox"))}),e.nrm(19,"i",17),e.EFF(20,"Textbox "),e.k0s()(),e.j41(21,"li")(22,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("select"))}),e.nrm(23,"i",17),e.EFF(24,"SelectBox "),e.k0s()(),e.j41(25,"li")(26,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("textarea"))}),e.nrm(27,"i",18),e.EFF(28,"Textarea "),e.k0s()(),e.j41(29,"li")(30,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("datetime"))}),e.nrm(31,"i",18),e.EFF(32,"DateTime "),e.k0s()(),e.j41(33,"li")(34,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("file"))}),e.nrm(35,"i",19),e.EFF(36,"File Upload "),e.k0s()(),e.j41(37,"li")(38,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("key"))}),e.nrm(39,"i",19),e.EFF(40,"Access Key "),e.k0s()(),e.j41(41,"li")(42,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("html"))}),e.nrm(43,"i",20),e.EFF(44,"Html View "),e.k0s()(),e.j41(45,"li")(46,"a",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addControl("submit"))}),e.nrm(47,"i",20),e.EFF(48,"Submit Button "),e.k0s()()()()()()()(),e.DNE(49,Av,4,1,"div",21),e.k0s()}if(2&t){const n=e.sdS(14),o=e.XpG();e.R7$(3),e.JRh(o.type),e.R7$(),e.Y8G("ngIf",o.err),e.R7$(3),e.Y8G("ngForOf",o.nodeData.conf),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(39),e.Y8G("ngIf",o.nodeData.outputs.length>0)}}function Fv(t,i){if(1&t&&e.nrm(0,"button",43),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Rv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2,"List Options (One option per line, format: `Text=>Value`)"),e.k0s(),e.j41(3,"textarea",51),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.listOptions,r)||(l.listOptions=r),e.Njj(r)}),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.listOptions)}}function jv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46)(3,"div",47)(4,"h5",48),e.EFF(5," Add form control "),e.k0s()(),e.j41(6,"div",49)(7,"div",24)(8,"label",25),e.EFF(9,"Label"),e.k0s(),e.j41(10,"input",50),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG();return e.DH7(l.addLabel,r)||(l.addLabel=r),e.Njj(r)}),e.bIt("keyup",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.onLabelChange())}),e.k0s()(),e.j41(11,"div",24)(12,"label",25),e.EFF(13,"Var Name"),e.k0s(),e.j41(14,"input",51),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG();return e.DH7(l.addVarName,r)||(l.addVarName=r),e.Njj(r)}),e.k0s()(),e.j41(15,"div",24)(16,"label",25),e.EFF(17,"Description"),e.k0s(),e.j41(18,"textarea",51),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG();return e.DH7(l.addDesc,r)||(l.addDesc=r),e.Njj(r)}),e.k0s()(),e.DNE(19,Rv,4,1,"div",23),e.j41(20,"div")(21,"button",52),e.EFF(22,"Close"),e.k0s(),e.j41(23,"button",53),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.saveControl())}),e.EFF(24),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(10),e.R50("ngModel",n.addLabel),e.R7$(4),e.R50("ngModel",n.addVarName),e.R7$(4),e.R50("ngModel",n.addDesc),e.R7$(),e.Y8G("ngIf","select"==n.addType),e.R7$(5),e.SpI("",n.curConf?"Save":"Add"," Control")}}function Mv(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function $v(t,i){if(1&t&&(e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Mv,1,0,"i",55),e.k0s(),e.nrm(4,"input",56),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function Gv(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Dv(t,i){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function Ov(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Gv,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,r)||(l.value.data=r),e.Njj(r)}),e.DNE(5,Dv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function Vv(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function zv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Vv,1,0,"i",55),e.k0s(),e.j41(4,"textarea",59),e.bIt("input",function(r){e.eBV(n);const l=e.XpG(3);return e.Njj(l.autoResize(r.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function Bv(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Pv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Bv,1,0,"i",55),e.k0s(),e.j41(4,"app-file-control",60),e.bIt("onStartReading",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.onStartReadingFile())})("onAddFile",function(r){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onAddFile(r))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",o.nodeData.id+"-"+n.key)}}function Lv(t,i){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(r.value.desc))}),e.k0s()}}function Uv(t,i){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function Xv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Lv,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,r)||(l.value.data=r),e.Njj(r)}),e.DNE(5,Uv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",o.lstKeys)}}function Yv(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,$v,5,6,"div",23)(2,Ov,6,5,"div",23)(3,zv,6,6,"div",23)(4,Pv,5,3,"div",23)(5,Xv,6,5,"div",23),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}function Hv(t,i){if(1&t&&(e.j41(0,"div",54)(1,"div",9),e.DNE(2,Yv,6,5,"div",10),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.nodeData.conf)}}let K_=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"appId",0),(0,f.A)(this,"type","form"),(0,f.A)(this,"desc","User interaction form"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"addType",""),(0,f.A)(this,"addLabel",""),(0,f.A)(this,"addVarName",""),(0,f.A)(this,"addDesc",""),(0,f.A)(this,"listOptions",""),(0,f.A)(this,"curConf",void 0),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB)}getClassType(){return i}updateOutput(){this.nodeData.outputs=[];for(let o of this.nodeData.conf)"file"!=o.value.type&&(this.nodeData.outputs.push({name:this.id+"-"+o.key,type:"file"==o.value.type?"File":"string",demo:'{name: "filename"}|"text value"'}),"file"==o.value.type&&this.nodeData.outputs.push({name:this.id+"-"+o.key+"-dataUrl",type:"string",demo:""}))}upgradeConf(){}ngOnInit(){if(super.ngOnInit(),"render"!=this.mode)return;let o=!1;for(let r of this.nodeData.conf)r.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+r.key)??"","key"==r.value.type&&(o=!0);o&&this.appService?.listKeys().subscribe(r=>{this.lstKeys=r}),setTimeout(()=>{let r=document.querySelectorAll(".form-node-renderred textarea");for(let l of r)this.autoResize(l)},200)}getConfig(){return[]}addControl(o){this.ngZone?.run(()=>{this.addType=o,this.addLabel="",this.addVarName=""}),this.curConf=void 0,this.openSetting()}autoResize(o){o.style.height="50px",o.style.overflowY="hidden",o.style.height=o.scrollHeight+10+"px"}showInfo(o){alert(o)}saveControl(){let o=":";this.listOptions.includes("=>")&&(o="=>");let r=this.listOptions.split("\n").map(l=>l.split(o));this.curConf?(this.curConf.value.label=this.addLabel,this.curConf.value.desc=this.addDesc,this.curConf.value.listOptions=r.map(l=>({value:l[1],text:l[0]})),this.curConf.key=this.addVarName):this.nodeData.conf.push({key:this.addVarName,value:{type:this.addType,label:this.addLabel,desc:this.addDesc,listOptions:r.map(l=>({value:l[1],text:l[0]}))}}),this.noticeUpdate()}removeControl(o){this.nodeData.conf.splice(o,1),this.noticeUpdate()}editConf(o){this.curConf=o,this.addType=o.value.type,this.addLabel=o.value.label,this.addVarName=o.key,this.addDesc=o.value.desc,this.listOptions=o.value.listOptions?o.value.listOptions.map(r=>`${r.text}=>${r.value}`).join("\n"):"",this.openSetting()}ngDoCheck(){this.err=0==this.nodeData.conf.length?'No Control. Click "Add form control" to add control to your form':""}onLabelChange(){this.ngZone?.run(()=>{this.addVarName=De.toCamelCase(this.addLabel)})}onAddFile(o){this.onUploaded.emit(o)}onStartReadingFile(){this.onStartUpload.emit()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],inputs:{appId:"appId"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["menu",""],["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],["class","form-node-renderred",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"bx","bx-plus","me-2"],[1,"dropdown-menu","show","w-48","mt-1"],[1,"dropdown-content"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"bx","bx-text","me-3"],[1,"bx","bx-detail","me-3"],[1,"bx","bx-paperclip","me-3"],[1,"bx","bx-align-left","me-3"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"cursor-pointer",3,"click"],[1,"bx","bx-x","cursor-pointer",3,"click"],["type","text","autocomplete","off",1,"form-control",3,"placeholder"],[1,"btn","btn-primary"],[3,"class",4,"ngIf"],["type","text","autocomplete","off","placeholder","Key",1,"form-control"],["type","text","autocomplete","off","placeholder","Html View",1,"form-control"],[1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control"],[1,"dropzone"],[1,"h6","text-center","mt-4","text-small"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],["type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary","me-3",3,"click"],[1,"form-node-renderred"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(o,r){1&o&&e.DNE(0,Tv,50,5,"div",1)(1,Fv,1,3,"button",2)(2,jv,25,7,"div",3)(3,Hv,3,1,"div",4),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf","render"==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.me,w.wz,w.BC,w.vS,_v,Z.Cn,Z.kk,Z.Cp]})),i})();function Wv(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Zv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function qv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Jv(t,i){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Zv,3,5,"div",21)(4,qv,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Kv(t,i){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Qv(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.DNE(4,Kv,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.style)}}function e2(t,i){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function t2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Size "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.DNE(4,e2,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.size)}}function n2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.j41(4,"option",28),e.EFF(5,"dall-e-2"),e.k0s(),e.j41(6,"option",29),e.EFF(7,"dall-e-3"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function o2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Cookie "),e.k0s(),e.j41(3,"input",30),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function i2(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Jv,5,2,"div",17)(2,Qv,5,2,"div",18)(3,t2,5,2,"div",18)(4,n2,8,1,"div",18)(5,o2,4,1,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","style"==n.key),e.R7$(),e.Y8G("ngIf","size"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.Y8G("ngIf","cookie"==n.key)}}function r2(t,i){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function s2(t,i){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,r2,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function a2(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Q_=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"settings",{style:["natural","vivid"],size:["1024x1024","1792x1024","1024x1792"]}),(0,f.A)(this,"type","textToImage"),(0,f.A)(this,"desc","Generate image from text")}getClassType(){return i}getConfig(){return[{key:"input",value:""},{key:"model",value:"dall-e-3"},{key:"style",value:"natural"},{key:"size",value:"1792x1024"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-image",type:"image",demo:""}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,r,l,u,p,_){}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-image-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","dall-e-2"],["value","dall-e-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Wv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,i2,6,5,"div",5),e.k0s()(),e.DNE(8,s2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,a2,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.me,w.wz,w.BC,w.vS,kt,en]})),i})();const l2=["outputEditor"];function c2(t,i){1&t&&(e.j41(0,"div",13),e.EFF(1," Type your output format in free style and click 'Generate' button. "),e.nrm(2,"br"),e.EFF(3,"Example: "),e.j41(4,"code"),e.EFF(5,"name: string, listItem: string[]"),e.k0s()())}function u2(t,i){1&t&&(e.j41(0,"div",13),e.EFF(1," Describe your example and click 'Generate' button. "),e.k0s())}function d2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div"),e.DNE(1,c2,6,0,"div",2)(2,u2,2,0,"div",2),e.j41(3,"div",3)(4,"ngx-monaco-editor",4,0),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG();return e.DH7(l.inputStr,r)||(l.inputStr=r),e.Njj(r)}),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"button",7),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.generate())}),e.nrm(9,"i",8),e.EFF(10," Generate "),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"button",11),e.EFF(14,"Close"),e.k0s(),e.j41(15,"button",12),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.save())}),e.EFF(16),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf","UserOutputFormatBuilder"==n.agentName),e.R7$(),e.Y8G("ngIf","ExamplesBuilder"==n.agentName),e.R7$(2),e.Y8G("height",200)("autoHeight",!0)("options",n.editorFuncOptions),e.R50("ngModel",n.inputStr),e.R7$(4),e.Y8G("disabled",""==n.inputStr&&"UserOutputFormatBuilder"==n.agentName),e.R7$(7),e.Y8G("disabled",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"Generating...":"Save"," ")}}function p2(t,i){1&t&&(e.j41(0,"div")(1,"div"),e.EFF(2," Please add agent Prompt first! "),e.k0s(),e.j41(3,"div",10)(4,"button",11),e.EFF(5,"Close"),e.k0s()()())}let f2=(()=>{var t;class i extends Xo{constructor(o,r){super(),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"editorFuncOptions",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!1}),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genMsg",""),(0,f.A)(this,"agentName","UserOutputFormatBuilder"),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"outputEditor",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"onSave",new e.bkB),this.zone=o,this.aiApi=r,this.agentRunner=new Jn(this.aiApi,this)}generate(){this.isLoading=!0,this.outputEditor?.writeValue(""),this.agentRunner.setAgentName(this.agentName),this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr);let o=[`agent::${this.prompt}`];""!=this.genMsg&&o.push(this.genMsg),this.agentRunner.setVars(o),this.agentRunner.send()}save(){this.onSave.emit(this.inputStr)}onMsgUpdate(o,r){this.outputEditor?.insertText(r??"")}onDone(o){this.outputEditor?.formatCode(),this.zone.run(()=>{this.isLoading=!1})}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(dt))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-output-format"]],viewQuery:function(o,r){if(1&o&&e.GBs(l2,5),2&o){let l;e.mGM(l=e.lsd())&&(r.outputEditor=l.first)}},inputs:{inputStr:"inputStr",prompt:"prompt",genMsg:"genMsg",agentName:"agentName"},outputs:{onSave:"onSave"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["outputEditor",""],[4,"ngIf"],["class","small mb-3",4,"ngIf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","height","autoHeight","options","ngModel"],[1,"row"],[1,"col-lg-5","mt-3"],["type","button",1,"btn","btn-text-primary",3,"click","disabled"],[1,"bx","bxs-magic-wand","me-2"],[1,"col-lg-7"],[1,"mt-3","text-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],[1,"small","mb-3"]],template:function(o,r){1&o&&e.DNE(0,d2,17,9,"div",1)(1,p2,6,0,"div",1),2&o&&(e.Y8G("ngIf",r.prompt),e.R7$(),e.Y8G("ngIf",!r.prompt))},dependencies:[Ui.V,em,V.MD,V.bT,w.YN,w.BC,w.vS]})),i})();function m2(t,i){if(1&t&&e.nrm(0,"i",19),2&t){const n=e.XpG();e.FS9("title",n.err)}}function _2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.brH(2,2,n.value,50,"**SYSTEM:")," ")}}function h2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",28),e.EFF(3," Add prompt "),e.k0s()()}}function g2(t,i){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," System Instructions "),e.k0s(),e.DNE(3,_2,3,6,"div",25)(4,h2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function v2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function y2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",29),e.EFF(3," Add prompt template "),e.k0s()()}}function b2(t,i){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Prompt Template "),e.k0s(),e.DNE(3,v2,3,5,"div",25)(4,y2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function x2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function C2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",29),e.EFF(3," Add examples "),e.k0s()()}}function S2(t,i){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Examples "),e.k0s(),e.DNE(3,x2,3,5,"div",25)(4,C2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function k2(t,i){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function w2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",24),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",30),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.DNE(4,k2,2,2,"option",31),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.modelNames)}}function N2(t,i){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function E2(t,i){if(1&t){const n=e.RV6();e.j41(0,"select",35),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,r)||(l.selectedCollection=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.updateCol())})("click",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.loadCols())}),e.DNE(1,N2,2,2,"option",31),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function I2(t,i){1&t&&(e.j41(0,"div",36)(1,"small",37),e.EFF(2,"No Vector Collection"),e.k0s()())}function A2(t,i){if(1&t&&(e.j41(0,"div")(1,"label",24),e.EFF(2," Documents "),e.k0s(),e.j41(3,"div"),e.DNE(4,E2,2,2,"select",33)(5,I2,3,0,"div",34),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function T2(t,i){if(1&t){const n=e.RV6();e.j41(0,"li",46),e.nrm(1,"i",47),e.EFF(2),e.j41(3,"i",48),e.bIt("click",function(){const r=e.eBV(n).index,l=e.XpG(4);return e.Njj(l.delTool(r))}),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.SpI(" ",n," ")}}function F2(t,i){if(1&t&&(e.j41(0,"div",43)(1,"ul",44),e.DNE(2,T2,4,1,"li",45),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",n.tools)}}function R2(t,i){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.addTool(r))}),e.EFF(2),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function j2(t,i){if(1&t&&(e.j41(0,"div",38)(1,"label",24),e.EFF(2," Tools "),e.k0s(),e.DNE(3,F2,3,1,"div",39),e.j41(4,"div")(5,"div",40)(6,"button",41),e.nrm(7,"i",29),e.EFF(8," Add tool "),e.k0s(),e.j41(9,"ul",42),e.DNE(10,R2,3,1,"li",5),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",n.tools.length>0),e.R7$(7),e.Y8G("ngForOf",n.lstTool)}}function M2(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,g2,5,2,"div",20)(2,b2,5,2,"div",20)(3,S2,5,2,"div",20)(4,w2,5,2,"div",21),e.j41(5,"div"),e.DNE(6,A2,6,2,"div",21)(7,j2,11,2,"div",22),e.k0s()()),2&t){const n=i.$implicit,o=e.XpG();e.R7$(),e.Y8G("ngIf","prompt"==n.key),e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","examples"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.ZvI("mt-2 ",o.moreSetting?"":"d-none",""),e.R7$(),e.Y8G("ngIf","doc"==n.key),e.R7$(),e.Y8G("ngIf","tools"==n.key)}}function $2(t,i){if(1&t&&(e.j41(0,"div",54),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function G2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",50)(1,"div",51),e.EFF(2," Outputs "),e.j41(3,"i",52),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.openSetting("outputFormat"))}),e.k0s()(),e.DNE(4,$2,2,2,"div",53),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.nodeData.outputs)}}function D2(t,i){1&t&&(e.j41(0,"h5",55),e.EFF(1," Add Prompt "),e.k0s())}function O2(t,i){1&t&&(e.j41(0,"h5",55),e.EFF(1," Input Template "),e.k0s())}function V2(t,i){1&t&&(e.j41(0,"h5",55),e.EFF(1," Set Output Format "),e.k0s())}function z2(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",56),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.onAddPrompt(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("agentName","UserAgentBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function B2(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",57),e.bIt("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateOutputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function P2(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",58),e.bIt("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateExamples(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("genMsg",n.genExampleMsg)("agentName","ExamplesBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function L2(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",59),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let eh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","agent"),(0,f.A)(this,"desc","An AI Agent to process your data"),(0,f.A)(this,"moreSetting",!1),(0,f.A)(this,"modelNames",["gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-002","gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp-1219"]),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genExampleMsg",""),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"lstCollection",[]),(0,f.A)(this,"lstTool",[{name:"code_execution"},{name:"google_search_retrieval"}]),(0,f.A)(this,"tools",[]),(0,f.A)(this,"agentRunner",void 0)}getClassType(){return i}getConfig(){return[{key:"prompt",value:""},{key:"input",value:""},{key:"examples",value:""},{key:"model",value:"gemini-1.5-flash"},{key:"doc",value:""},{key:"tools",value:[]},{key:"outputFormat",value:""}]}showMore(){this.ngZone?.run(()=>{this.moreSetting=!this.moreSetting})}updateOutput(){let o=this.findConfig("outputFormat").trim();this.nodeData.outputs=""==o?[{name:this.id+"-agentResponse",type:"string",demo:""}]:[{name:this.id+"-agentResponse",type:"json",demo:JSON.stringify(De.createDemoDataForJsonSchema(o))}]}openSetting(o){this.prompt=this.findConfig("prompt"),this.genExampleMsg=this.findConfig("outputFormat"),""!=this.genExampleMsg&&(this.genExampleMsg="output_format::"+this.genExampleMsg),super.openSetting(o)}onAddPrompt(o){this.setConfig("prompt",o)}updateOutputFormat(o){this.setConfig("outputFormat",o),this.updateOutput()}updateExamples(o){this.setConfig("examples",o),this.updateOutput()}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}loadCols(){this.appService?.listVCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("doc",this.selectedCollection)}ngOnInit(){super.ngOnInit(),this.appService?.listVCollection().subscribe(o=>{this.lstCollection=o}),this.tools=this.findConfig("tools")??[],this.selectedCollection=this.findConfig("doc"),this.loadCols(),(this.selectedCollection||this.tools.length>0)&&(this.moreSetting=!0)}addTool(o){this.ngZone?.run(()=>{0==this.tools.filter(l=>l==o.name).length&&(this.tools.push(o.name),this.setConfig("tools",this.tools))})}delTool(o){this.ngZone?.run(()=>{this.tools.splice(o,1),this.setConfig("tools",this.tools)})}ngDoCheck(){this.err=""==this.findConfig("prompt")?'No Prompt. Click "Add prompt" to instruct your agent':""}run(o,r,l,u,p,_){let v=this.findConfig("doc",l),g=this.findConfig("input",l);g=this.parseTempate(g,u);let y=[];for(let C of u.entries())y.push(`${C[0]}::${C[1]}`);let x=new dt(o);this.agentRunner=new Jn(x,new Xo(void 0,C=>{let I=new Map,A=null;try{A=JSON.parse(C)}catch{}for(let T of l.outputs)I.set(T.name,A??C);_(I)})),this.agentRunner.setAgentName(`flow-${r}.${l.id}`),this.agentRunner.setVars(y),this.agentRunner.addUserMessage(g),v&&this.agentRunner.setMemType(v),this.agentRunner.send()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-llm-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:24,vars:19,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"p-1","text-center",3,"click"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body","content"],[3,"agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"inputStr","prompt","onSave",4,"ngIf"],[3,"genMsg","agentName","inputStr","prompt","onSave",4,"ngIf"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bxs-magic-wand","me-2"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change","click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[1,"mb-3"],[1,"text-muted"],[1,"mt-2"],["class","small",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow"],[1,"dropdown-menu"],[1,"small"],[1,"list-group"],["class","p-0 list-group-item d-flex align-items-center border-0 small",4,"ngFor","ngForOf"],[1,"p-0","list-group-item","d-flex","align-items-center","border-0","small"],[1,"bx","bx-code","me-2"],[1,"bx","bx-x","ms-3","cursor-pointer",3,"click"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-small",3,"click"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["title","Set Output Format",1,"bx","bx-code-alt","cursor-pointer","text-link",3,"click"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[1,"modal-title"],[3,"onClose","onSave","agentName","inputStr","vars"],[3,"onSave","inputStr","prompt"],[3,"onSave","genMsg","agentName","inputStr","prompt"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,m2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,M2,8,9,"div",5),e.j41(8,"div",6),e.bIt("click",function(){return r.showMore()}),e.nrm(9,"i"),e.k0s()()(),e.DNE(10,G2,5,1,"div",7),e.k0s(),e.nrm(11,"button",8),e.j41(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),e.DNE(16,D2,2,0,"h5",13)(17,O2,2,0,"h5",13)(18,V2,2,0,"h5",13),e.k0s(),e.j41(19,"div",14),e.DNE(20,z2,1,3,"app-input-format",15)(21,B2,1,2,"app-output-format",16)(22,P2,1,4,"app-output-format",17)(23,L2,1,2,"app-input-format",18),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(2),e.ZvI("bx bx-chevron-",r.moreSetting?"up":"down"," cursor-pointer"),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(4),e.Y8G("ngIf","prompt"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(2),e.Y8G("ngIf","prompt"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","examples"==(null==r.settingConf?null:r.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,f2,kt,en]})),i})();function U2(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function X2(t,i){if(1&t&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function Y2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",18),e.EFF(2," Run App "),e.k0s(),e.j41(3,"select",19),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedApp,r)||(l.selectedApp=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.updateApp())}),e.DNE(4,X2,2,2,"option",20),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.selectedApp),e.R7$(),e.Y8G("ngForOf",n.lstApp)}}function H2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function W2(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",24),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",25),e.EFF(3," Set Value "),e.k0s()()}}function Z2(t,i){if(1&t&&(e.j41(0,"div")(1,"label",18),e.EFF(2),e.k0s(),e.DNE(3,H2,3,5,"div",22)(4,W2,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",o.getAppVar(n.key)," "),e.R7$(),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function q2(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Y2,5,2,"div",17)(2,Z2,5,3,"div",17),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","app"==n.key),e.R7$(),e.Y8G("ngIf",n.key.startsWith("app-args::"))}}function J2(t,i){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function K2(t,i){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,J2,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Q2(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",n.settingConf.value)("vars",n.nodeData.inputs)}}let th=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","router"),(0,f.A)(this,"desc","Execute other app"),(0,f.A)(this,"lstApp",[]),(0,f.A)(this,"selectedApp",0)}getClassType(){return i}getConfig(){return[{key:"app",value:0}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-appResult",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedApp=this.findConfig("app"),this.appService.listAppRoute().subscribe(o=>{this.ngZone.run(()=>{this.lstApp=o})})}upgradeConf(){}getAppVar(o){return o.split("::")[1]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}updateApp(){this.setConfig("app",this.selectedApp);let o=this.lstApp.filter(r=>r.id==this.selectedApp)[0];this.nodeData.conf=this.nodeData.conf.slice(0,1);for(let r of o.args)this.nodeData.conf.push({key:`app-args::${r}`,value:""});this.noticeUpdate()}run(o,r,l,u,p,_){let g="/runner/"+this.findConfig("app",l);p.navigate([g]),_(new Map)}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-route-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,U2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,q2,3,2,"div",5),e.k0s()(),e.DNE(8,K2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Q2,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf",r.settingConf))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,kt,en]})),i})();function ey(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function ty(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function ny(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add query template "),e.k0s()()}}function oy(t,i){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Query Template "),e.k0s(),e.DNE(3,ty,3,5,"div",21)(4,ny,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function iy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Type "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.loadCols())}),e.j41(5,"option",26),e.EFF(6,"Data"),e.k0s(),e.j41(7,"option",27),e.EFF(8,"Vector"),e.k0s()()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function ry(t,i){if(1&t&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FCK("value","",n.id,":",n.name,""),e.R7$(),e.SpI("",n.name," ")}}function sy(t,i){if(1&t){const n=e.RV6();e.j41(0,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,r)||(l.selectedCollection=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.updateCol())}),e.DNE(1,ry,2,4,"option",30),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function ay(t,i){1&t&&(e.j41(0,"div",32)(1,"small",33),e.EFF(2,"No Collection"),e.k0s()())}function ly(t,i){if(1&t&&(e.j41(0,"div")(1,"label",20),e.EFF(2," Select Collection "),e.k0s(),e.j41(3,"div"),e.DNE(4,sy,2,2,"select",28)(5,ay,3,0,"div",29),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function cy(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,oy,5,2,"div",17)(2,iy,9,1,"div",18)(3,ly,6,2,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","type"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function uy(t,i){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function dy(t,i){if(1&t&&(e.j41(0,"div",34)(1,"div",35),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,uy,2,2,"div",36),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function py(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",38),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.vars)("varFormat",n.varFormat)("varBtnLabel","Add Condition")}}let nh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","search"),(0,f.A)(this,"desc","Search your storage data"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"vars",[]),(0,f.A)(this,"varFormat",'"@@":"<your_search_value>"\n')}getClassType(){return i}getConfig(){return[{key:"type",value:"data"},{key:"collection",value:""},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-lstData",type:"array",demo:'{"Id": "1", "CreatedDate": "yyyy-mm-dd", "Content": "json"}'}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){"vector"==this.findConfig("type")?this.appService?.listVCollection().subscribe(r=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...r)})}):this.appService?.listCollection().subscribe(r=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...r),this.loadVars()})})}loadVars(){this.vars=[],this.vars.push(...this.nodeData.inputs);let o=this.lstCollections.filter(r=>r.id+":"+r.name==this.selectedCollection)[0];if(o?.spec){let r=De.extractProperties(JSON.parse(o.spec),0);for(let l of r)this.vars.push({name:l.name,type:l.type,demo:""})}}updateCol(){this.setConfig("collection",this.selectedCollection),this.loadVars()}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,r,l,u,p,_){let v=this.findConfig("input",l);v=this.parseTempate(v,u);let g=this.findConfig("collection",l).split(":"),y=this.findConfig("type",l),x=new $e(o);"data"==y?x.listData({id:+g[0],name:v,type:y}).subscribe(C=>{let I=this.setupOutputValue(C,l);_(I)}):"vector"==y&&x.searchVector({collection:g[1],content:v,id:0,vector:[]}).subscribe(C=>{let I=this.setupOutputValue(C,l);_(I)})}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-search-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","varFormat","varBtnLabel","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","data"],["value","vector"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","mb-5",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mb-5"],[1,"text-muted"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars","varFormat","varBtnLabel"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,ey,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,cy,4,3,"div",5),e.k0s()(),e.DNE(8,dy,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Query Template "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,py,1,4,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,kt,en]})),i})();class oh{}class fy extends oh{constructor(i){super(),(0,f.A)(this,"idxPattern",void 0),this.idxPattern=i}parse(i){let n=[],o=this.cleanText(i).split("<br>");console.log(o);let r=null;for(let p of o){let _=this.removeVietnameseTones(p);if(_=this.removeHtmlTag(_),""==_)continue;let v=!1;for(let g of this.idxPattern){let y=g.split("==>"),x=y[0],C=new RegExp(y[1].trim()),I=this.getPatLevel(x);if(new RegExp(x.trim()).test(_)){let T={title:p,childs:[],content:""};if(0==I&&(n.length>0||C.test(_)))n.push(T),r=T;else if(n.length>0){let E=n[n.length-1];for(let M=0;M<I-1;M++){if(!(E.childs.length>0)){E=null;break}E=E.childs[E.childs.length-1]}null!=E&&(E.childs.length>0||C.test(_))&&(E.childs.push(T),r=T)}v=!0;break}}r&&!v&&(r.content+=(""==r.content?"":"<br>")+p,r.hasTable||(r.hasTable=p.indexOf("<table>")>=0))}let l=[],u=new RegExp(this.idxPattern[0].split("==>")[1].trim());for(let p of n)0==p.childs.length&&0==p.content.length||(l.length>0||u.test(this.removeHtmlTag(p.title)))&&l.push(p);return l}getPatLevel(i){let n=0;for(const o of i){if("\t"!=o)break;n++}return n}cleanText(i){let n=["div"],o=i;for(let r of n)o=o.replaceAll(`<${r}>`,"").replaceAll(`</${r}>`,"");return o=o.replaceAll(/<\/table>\s*\d+[\sbr<>\d]+<end-page\/>\s*<table>/g,""),o=o.replaceAll(/\d+[\sbr<>\d]+<end-page\/>/g,'<hr class="solid"><br>'),o=o.replaceAll("</table>","</table><br>"),o=o.replaceAll("\n","").trim(),o}removeHtmlTag(i){let n=["div","b","i","u"],o=i;for(let r of n)o=o.replaceAll(`<${r}>`,"").replaceAll(`</${r}>`,"");return o.trim()}removeVietnameseTones(i){return(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()}}class my extends oh{parse(i){return[]}}function _y(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function hy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function gy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function vy(t,i){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,hy,3,5,"div",21)(4,gy,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function yy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Split character "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function by(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,vy,5,2,"div",17)(2,yy,4,1,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","character"==n.key)}}function xy(t,i){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Cy(t,i){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,xy,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Sy(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let ih=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"spliters",new Map([["character-spliter",new my],["heading-spliter",new fy(["^[IVX]+\\.\\s*[A-Z][A-Z0-9.,\\s]*$ ==> ^I\\.","\t^\\d+\\.\\s*[A-Z].+ ==> ^1\\.","\t\t^\\d+\\.\\d+\\.\\s*[A-Z].+ ==> ^\\d+\\.1\\."])]])),(0,f.A)(this,"type","spliter"),(0,f.A)(this,"desc","Split text content into multiple parts for embedding")}getClassType(){return i}getConfig(){return[{key:"input",value:""},{key:"character",value:"\\n\\n"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-parts",type:"string[]",demo:'["text"]'}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,r,l,u,p,_){let v=this.findConfig("input",l);v=this.parseTempate(v,u);let g=this.findConfig("model",l),y=this.spliters.get(g);if(!y)return void _(new Map);let x=y.parse(v);_(this.setupOutputValue(x,l))}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-spliter-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,_y,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,by,3,2,"div",5),e.k0s()(),e.DNE(8,Cy,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Sy,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.me,w.BC,w.vS,kt,en]})),i})();function ky(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function wy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ny(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Ey(t,i){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Data Template "),e.k0s(),e.DNE(3,wy,3,5,"div",21)(4,Ny,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Iy(t,i){if(1&t&&(e.j41(0,"option",28),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function Ay(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,r)||(l.selectedCollection=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.updateCol())})("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.loadCols())}),e.DNE(5,Iy,2,2,"option",26),e.k0s(),e.j41(6,"button",27),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.showAddCollectionModal())}),e.nrm(7,"i",24),e.EFF(8," New folder "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function Ty(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Ey,5,2,"div",17)(2,Ay,9,2,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Fy(t,i){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Ry(t,i){if(1&t&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Fy,2,2,"div",31),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function jy(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",33),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){let n;const o=e.XpG();e.Y8G("inputStr",null!==(n=null==o.settingConf?null:o.settingConf.value)&&void 0!==n?n:o.curColSpec)("vars",o.nodeData.inputs)}}let rh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","database"),(0,f.A)(this,"displayName","SaveFile"),(0,f.A)(this,"desc","Save your data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"curColSpec","")}getClassType(){return i}getConfig(){return[{key:"collection",value:0},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("collection",this.selectedCollection);let o=this.lstCollections.filter(r=>r.id==this.selectedCollection)[0];this.curColSpec=o?.spec??""}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,r,l,u,p,_){}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,ky,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Ty,3,2,"div",5),e.k0s()(),e.DNE(8,Ry,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,jy,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,V.MD,V.Sq,V.bT,kt,en]})),i})();function My(t,i){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function $y(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Gy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function Dy(t,i){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Template "),e.k0s(),e.DNE(3,$y,3,5,"div",14)(4,Gy,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Oy(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,Dy,5,2,"div",11),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key)}}function Vy(t,i){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function zy(t,i){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Vy,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function By(t,i){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,My,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Oy,2,1,"div",8),e.k0s()(),e.DNE(8,zy,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Py(t,i){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Ly(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Uy(t,i){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Ly,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key))}}let sh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","text"),(0,f.A)(this,"desc","Create text data")}getClassType(){return i}getConfig(){return[{key:"html",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-text",type:"string",demo:""}]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-text-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,r){1&o&&e.DNE(0,By,9,4,"div",0)(1,Py,1,3,"button",1)(2,Uy,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,Ui.V,en,kt]})),i})();function Xy(t,i){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Yy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Hy(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",18),e.EFF(3," Add audio "),e.k0s()()}}function Wy(t,i){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Audio data "),e.k0s(),e.DNE(3,Yy,3,5,"div",14)(4,Hy,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Zy(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,Wy,5,2,"div",11),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","audio"==n.key)}}function qy(t,i){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Jy(t,i){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,qy,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Ky(t,i){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Xy,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Zy,2,1,"div",8),e.k0s()(),e.DNE(8,Jy,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Qy(t,i){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function eb(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function tb(t,i){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,eb,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","audio"==(null==n.settingConf?null:n.settingConf.key))}}let ah=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","transcription"),(0,f.A)(this,"desc","Generate transcription for audio file")}getClassType(){return i}getConfig(){return[{key:"audio",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-transcription",type:"json",demo:JSON.stringify({language:"english",duration:8.47,text:"Some long text",words:[{word:"The",start:0,end:.23}]})}]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-transcription-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,r){1&o&&e.DNE(0,Ky,9,4,"div",0)(1,Qy,1,3,"button",1)(2,tb,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,en,kt]})),i})();function nb(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function ob(t,i){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.HbH("string"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function ib(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Content "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.DNE(4,ob,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.nodeData.inputs)}}function rb(t,i){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.HbH("vector"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function sb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Vector "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.DNE(4,rb,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.nodeData.inputs)}}function ab(t,i){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function lb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",24),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,r)||(l.selectedCollection=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.updateCol())})("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.loadCols())}),e.DNE(5,ab,2,2,"option",25),e.k0s(),e.j41(6,"button",26),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.showAddVCollectionModal())}),e.nrm(7,"i",27),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function cb(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,ib,5,2,"div",17)(2,sb,5,2,"div",17)(3,lb,9,2,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","content"==n.key),e.R7$(),e.Y8G("ngIf","vector"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function ub(t,i){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function db(t,i){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,ub,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function pb(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let lh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","vectorDatabase"),(0,f.A)(this,"desc","Save embedded vector to db"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[])}getClassType(){return i}getConfig(){return[{key:"content",value:""},{key:"vector",value:""},{key:"collection",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngDoCheck(){for(let o of this.nodeData.conf)"content"==o.key&&""==o.value&&(o.value=this.nodeData.inputs.filter(r=>"string"==r.type)[0]?.name??""),"vector"==o.key&&""==o.value&&(o.value=this.nodeData.inputs.filter(r=>"vector"==r.type)[0]?.name??"")}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listVCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateInputFormat(o){this.setConfig("content",o),this.noticeUpdate()}updateCol(){this.setConfig("collection",this.selectedCollection)}run(o,r,l,u,p,_){}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-vector-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value","class",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,nb,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,cb,4,3,"div",5),e.k0s()(),e.DNE(8,db,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,pb,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,V.MD,V.Sq,V.bT,en]})),i})();function fb(t,i){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function mb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function _b(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function hb(t,i){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Video Template "),e.k0s(),e.DNE(3,mb,3,5,"div",14)(4,_b,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function gb(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,hb,5,2,"div",11),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","source"==n.key)}}function vb(t,i){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function yb(t,i){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,vb,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function bb(t,i){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,fb,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,gb,2,1,"div",8),e.k0s()(),e.DNE(8,yb,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function xb(t,i){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Cb(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Sb(t,i){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Cb,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","source"==(null==n.settingConf?null:n.settingConf.key))}}let ch=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","videoRender"),(0,f.A)(this,"desc","Render video")}getClassType(){return i}getConfig(){return[{key:"source",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-videoUrl",type:"string",demo:""}]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-video-render-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,r){1&o&&e.DNE(0,bb,9,4,"div",0)(1,xb,1,3,"button",1)(2,Sb,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,Ui.V,en,kt]})),i})();function kb(t,i){if(1&t&&e.nrm(0,"i",11),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function wb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Nb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",19),e.EFF(3," Add Design "),e.k0s()()}}function Eb(t,i){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Design "),e.k0s(),e.DNE(3,wb,3,5,"div",16)(4,Nb,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Ib(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ab(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",19),e.EFF(3," Add Template "),e.k0s()()}}function Tb(t,i){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Save Template "),e.k0s(),e.DNE(3,Ib,3,5,"div",16)(4,Ab,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Fb(t,i){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function Rb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",15),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",20),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,r)||(l.selectedCollection=r),e.Njj(r)}),e.bIt("change",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.updateCol())})("click",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.loadCols())}),e.DNE(5,Fb,2,2,"option",21),e.k0s(),e.j41(6,"button",22),e.bIt("click",function(){e.eBV(n);const r=e.XpG(3);return e.Njj(r.showAddCollectionModal())}),e.nrm(7,"i",19),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function jb(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,Eb,5,2,"div",12)(2,Tb,5,2,"div",12)(3,Rb,9,2,"div",13),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key),e.R7$(),e.Y8G("ngIf","saveTemplate"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Mb(t,i){if(1&t&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function $b(t,i){if(1&t&&(e.j41(0,"div",24)(1,"div",25),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Mb,2,2,"div",26),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Gb(t,i){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,kb,1,1,"i",6),e.k0s(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,jb,4,3,"div",9),e.k0s()(),e.DNE(8,$b,4,1,"div",10),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Db(t,i){if(1&t&&e.nrm(0,"button",28),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Ob(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.save(r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("agentName","UserHtmlViewBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Vb(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",36),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateSaveTemplate(r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function zb(t,i){if(1&t&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32),e.DNE(4,Ob,1,4,"app-input-format",33)(5,Vb,1,3,"app-input-format",34),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","saveTemplate"==(null==n.settingConf?null:n.settingConf.key))}}function Bb(t,i){if(1&t&&e.nrm(0,"div",37),2&t){const n=e.XpG();e.Y8G("innerHTML",n.rendered,e.npT)}}let uh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"type","htmlViewer"),(0,f.A)(this,"desc","View output data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"html",""),(0,f.A)(this,"rendered","")}getClassType(){return i}updateOutput(){let o=this.findConfig("html"),r=this.getAllSelectablePairs(o).map(l=>l.varName);r=De.distinctArray(r),this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}];for(let l of r)this.nodeData.outputs.push({name:l,type:"array",demo:"[]"})}getConfig(){return[{key:"html",value:""}]}save(o){this.setConfig("html",o),this.noticeUpdate()}updateSaveTemplate(o){this.setConfig("saveTemplate",o),this.noticeUpdate()}loadCols(){this.appService?.listCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("collection",this.selectedCollection)}ngOnInit(){this.html=this.findConfig("html"),"render"==this.mode&&(this.rendered=this.compileTemplate()),this.selectedCollection=this.findConfig("collection"),this.loadCols()}getAllSelectablePairs(o){const r=/bs-select="([^=>]+)=>([^"]+)"/g,l=[];let u;for(;null!==(u=r.exec(o));){const[p,_,v]=u;l.push({attr:_,varName:v})}return l}compileTemplate(){return De.compileTemplate(this.html,this.vars)}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-viewer-node"]],inputs:{vars:"vars"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-full"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","agentName","inputStr","vars"],[3,"onClose","onSave","html","inputStr","vars"],[3,"innerHTML"]],template:function(o,r){1&o&&e.DNE(0,Gb,9,4,"div",0)(1,Db,1,3,"button",1)(2,zb,6,4,"div",2)(3,Bb,1,1,"div",3),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf","render"==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.xH,w.y7,w.wz,w.BC,w.vS,Ui.V,en,kt]})),i})();function Pb(t,i){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Lb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Url "),e.k0s(),e.j41(3,"div")(4,"input",20),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function Ub(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Cookies (`name: value` per line) "),e.k0s(),e.j41(3,"div")(4,"textarea",21),e.mxI("ngModelChange",function(r){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,r)||(l.value=r),e.Njj(r)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function Xb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Yb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",25),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",26),e.EFF(3," Add new "),e.k0s()()}}function Hb(t,i){if(1&t&&(e.j41(0,"div",22)(1,"label",19),e.EFF(2," Request Body "),e.k0s(),e.DNE(3,Xb,3,5,"div",23)(4,Yb,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Wb(t,i){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Lb,5,1,"div",17)(2,Ub,5,1,"div",17)(3,Hb,5,2,"div",18),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","cookies"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key)}}function Zb(t,i){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function qb(t,i){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Zb,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Jb(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(r))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let dh=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","webAccess"),(0,f.A)(this,"desc","Get content from a websize")}getClassType(){return i}getConfig(){return[{key:"url",value:""},{key:"cookies",value:""},{key:"body",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}]}updateInputFormat(o){this.setConfig("body",o),this.noticeUpdate()}run(o,r,l,u,p,_){let v=this.findConfig("url",l),g=this.findConfig("cookies",l),y=this.findConfig("body",l);new $e(o).fetchUrl({url:v,key:g,args:y}).subscribe(C=>{let I=this.setupOutputValue(C.data,l);_(I)})}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-web-access-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"form-label"],["type","text",1,"form-control","text-small",3,"ngModelChange","ngModel"],["rows","3","wrap","off",1,"form-control","text-small",2,"white-space","pre",3,"ngModelChange","ngModel"],[1,"mb-2"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Pb,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Wb,4,3,"div",5),e.k0s()(),e.DNE(8,qb,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Request Body Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Jb,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(r.type),e.R7$(),e.Y8G("ngIf",r.err),e.R7$(3),e.Y8G("ngForOf",r.nodeData.conf),e.R7$(),e.Y8G("ngIf",r.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",r.id,""),e.BMQ("data-bs-target","#settingModal-"+r.id),e.R7$(),e.Mz_("id","settingModal-",r.id,""),e.R7$(7),e.Y8G("ngIf","body"==(null==r.settingConf?null:r.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.me,w.BC,w.vS,kt,en]})),i})();function Kb(t,i){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Qb(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function ex(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(r.key))}),e.nrm(2,"i",18),e.EFF(3," Add Inputs "),e.k0s()()}}function tx(t,i){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Inputs "),e.k0s(),e.DNE(3,Qb,3,5,"div",14)(4,ex,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function nx(t,i){if(1&t&&(e.j41(0,"div"),e.DNE(1,tx,5,2,"div",11),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key)}}function ox(t,i){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=i.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ix(t,i){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,ox,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function rx(t,i){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Kb,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,nx,2,1,"div",8),e.k0s()(),e.DNE(8,ix,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function sx(t,i){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function ax(t,i){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.closeSetting())})("onSave",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,r))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function lx(t,i){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,ax,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key))}}let ph=(()=>{var t;class i extends Zt{constructor(...o){super(...o),(0,f.A)(this,"type","zip"),(0,f.A)(this,"desc","Zip your files")}getClassType(){return i}getConfig(){return[{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-zipData",type:"string",demo:""}]}updateConf(o,r){this.setConfig(o,r),this.noticeUpdate()}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,r){1&o&&e.DNE(0,rx,9,4,"div",0)(1,sx,1,3,"button",1)(2,lx,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode),e.R7$(),e.Y8G("ngIf",""==r.mode))},dependencies:[V.MD,V.Sq,V.bT,w.YN,Ui.V,en,kt]})),i})();function cx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function ux(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},S.createElement("path",{d:"M0 0h32v4.2H0z"}))}function dx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},S.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function px(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function fx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Fc=({children:t,className:i,...n})=>S.createElement("button",{type:"button",className:it(["react-flow__controls-button",i]),...n},t);Fc.displayName="ControlButton";const mx=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),fh=({style:t,showZoom:i=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:l,onZoomOut:u,onFitView:p,onInteractiveChange:_,className:v,children:g,position:y="bottom-left"})=>{const x=Et(),[C,I]=(0,S.useState)(!1),{isInteractive:A,minZoomReached:T,maxZoomReached:E}=qe(mx,At),{zoomIn:M,zoomOut:O,fitView:$}=Xf();return(0,S.useEffect)(()=>{I(!0)},[]),C?S.createElement(bm,{className:it(["react-flow__controls",v]),position:y,style:t,"data-testid":"rf__controls"},i&&S.createElement(S.Fragment,null,S.createElement(Fc,{onClick:()=>{M(),l?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},S.createElement(cx,null)),S.createElement(Fc,{onClick:()=>{O(),u?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:T},S.createElement(ux,null))),n&&S.createElement(Fc,{className:"react-flow__controls-fitview",onClick:()=>{$(r),p?.()},title:"fit view","aria-label":"fit view"},S.createElement(dx,null)),o&&S.createElement(Fc,{className:"react-flow__controls-interactive",onClick:()=>{x.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),_?.(!A)},title:"toggle interactivity","aria-label":"toggle interactivity"},S.createElement(A?fx:px,null)),g):null};fh.displayName="Controls";var _x=(0,S.memo)(fh),Fo=function(t){return t.Lines="lines",t.Dots="dots",t.Cross="cross",t}(Fo||{});function hx({color:t,dimensions:i,lineWidth:n}){return S.createElement("path",{stroke:t,strokeWidth:n,d:`M${i[0]/2} 0 V${i[1]} M0 ${i[1]/2} H${i[0]}`})}function gx({color:t,radius:i}){return S.createElement("circle",{cx:i,cy:i,r:i,fill:t})}const vx={[Fo.Dots]:"#91919a",[Fo.Lines]:"#eee",[Fo.Cross]:"#e2e2e2"},yx={[Fo.Dots]:1,[Fo.Lines]:1,[Fo.Cross]:6},bx=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function mh({id:t,variant:i=Fo.Dots,gap:n=20,size:o,lineWidth:r=1,offset:l=2,color:u,style:p,className:_}){const v=(0,S.useRef)(null),{transform:g,patternId:y}=qe(bx,At),x=u||vx[i],C=o||yx[i],I=i===Fo.Dots,A=i===Fo.Cross,T=Array.isArray(n)?n:[n,n],E=[T[0]*g[2]||1,T[1]*g[2]||1],M=C*g[2],O=A?[M,M]:E,$=I?[M/l,M/l]:[O[0]/l,O[1]/l];return S.createElement("svg",{className:it(["react-flow__background",_]),style:{...p,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:v,"data-testid":"rf__background"},S.createElement("pattern",{id:y+t,x:g[0]%E[0],y:g[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`},I?S.createElement(gx,{color:x,radius:M/l}):S.createElement(hx,{dimensions:O,color:x,lineWidth:r})),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}mh.displayName="Background";var xx=(0,S.memo)(mh);const Cx=({props:t})=>(t.minZoom=.25,t.maxZoom=1,t.autoPanOnConnect=!0,t.autoPanOnNodeDrag=!0,t.connectionRadius=20,t.elementsSelectable=!0,t.elevateNodesOnSelect=!0,t.fitView=!1,t.connectOnClick=!0,t.edgesFocusable=!0,t.nodesFocusable=!0,t.nodesDraggable=!0,t.nodesConnectable=!0,t.snapToGrid=!1,t.snapGrid=[15,15],t.nodeOrigin=[0,0],t.noPanClassName="nopan",t.connectionMode=Vr.Strict,S.createElement($_,{...t},S.createElement(_x,null),S.createElement(xx,{color:"dark"==t.theme?"#383948":"#dadadf",gap:20,size:2}))),Sx=({props:t})=>S.createElement(Qf,null,S.createElement(Cx,{props:t}));let _h=(()=>{var t;class i extends H_{constructor(...o){super(...o),(0,f.A)(this,"ngReactComponent",Sx),(0,f.A)(this,"nodes",void 0),(0,f.A)(this,"edges",void 0),(0,f.A)(this,"defaultEdgeOptions",void 0),(0,f.A)(this,"onNodeClick",new e.bkB),(0,f.A)(this,"onNodeDoubleClick",new e.bkB),(0,f.A)(this,"onNodeMouseEnter",new e.bkB),(0,f.A)(this,"onNodeMouseMove",new e.bkB),(0,f.A)(this,"onNodeMouseLeave",new e.bkB),(0,f.A)(this,"onNodeContextMenu",new e.bkB),(0,f.A)(this,"onNodeDragStart",new e.bkB),(0,f.A)(this,"onNodeDrag",new e.bkB),(0,f.A)(this,"onNodeDragStop",new e.bkB),(0,f.A)(this,"onEdgeClick",new e.bkB),(0,f.A)(this,"onEdgeUpdate",new e.bkB),(0,f.A)(this,"onEdgeContextMenu",new e.bkB),(0,f.A)(this,"onEdgeMouseEnter",new e.bkB),(0,f.A)(this,"onEdgeMouseMove",new e.bkB),(0,f.A)(this,"onEdgeMouseLeave",new e.bkB),(0,f.A)(this,"onEdgeDoubleClick",new e.bkB),(0,f.A)(this,"onEdgeUpdateStart",new e.bkB),(0,f.A)(this,"onEdgeUpdateEnd",new e.bkB),(0,f.A)(this,"onNodesChange",new e.bkB),(0,f.A)(this,"onEdgesChange",new e.bkB),(0,f.A)(this,"onNodesDelete",new e.bkB),(0,f.A)(this,"onEdgesDelete",new e.bkB),(0,f.A)(this,"onSelectionDragStart",new e.bkB),(0,f.A)(this,"onSelectionDrag",new e.bkB),(0,f.A)(this,"onSelectionDragStop",new e.bkB),(0,f.A)(this,"onSelectionStart",new e.bkB),(0,f.A)(this,"onSelectionEnd",new e.bkB),(0,f.A)(this,"onSelectionContextMenu",new e.bkB),(0,f.A)(this,"onConnect",new e.bkB),(0,f.A)(this,"onConnectStart",new e.bkB),(0,f.A)(this,"onConnectEnd",new e.bkB),(0,f.A)(this,"onClickConnectStart",new e.bkB),(0,f.A)(this,"onClickConnectEnd",new e.bkB),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"onMove",new e.bkB),(0,f.A)(this,"onMoveStart",new e.bkB),(0,f.A)(this,"onMoveEnd",new e.bkB),(0,f.A)(this,"onSelectionChange",new e.bkB),(0,f.A)(this,"onPaneScroll",new e.bkB),(0,f.A)(this,"onPaneClick",new e.bkB),(0,f.A)(this,"onPaneContextMenu",new e.bkB),(0,f.A)(this,"onPaneMouseEnter",new e.bkB),(0,f.A)(this,"onPaneMouseMove",new e.bkB),(0,f.A)(this,"onPaneMouseLeave",new e.bkB),(0,f.A)(this,"onError",new e.bkB),(0,f.A)(this,"id",void 0),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"edgeTypes",void 0),(0,f.A)(this,"connectionLineType",void 0),(0,f.A)(this,"connectionLineStyle",void 0),(0,f.A)(this,"connectionLineComponent",void 0),(0,f.A)(this,"connectionLineContainerStyle",void 0),(0,f.A)(this,"connectionMode",void 0),(0,f.A)(this,"deleteKeyCode",void 0),(0,f.A)(this,"selectionKeyCode",void 0),(0,f.A)(this,"selectionOnDrag",void 0),(0,f.A)(this,"selectionMode",void 0),(0,f.A)(this,"panActivationKeyCode",void 0),(0,f.A)(this,"multiSelectionKeyCode",void 0),(0,f.A)(this,"zoomActivationKeyCode",void 0),(0,f.A)(this,"snapToGrid",void 0),(0,f.A)(this,"snapGrid",void 0),(0,f.A)(this,"onlyRenderVisibleElements",void 0),(0,f.A)(this,"nodesDraggable",void 0),(0,f.A)(this,"nodesConnectable",void 0),(0,f.A)(this,"nodesFocusable",void 0),(0,f.A)(this,"nodeOrigin",void 0),(0,f.A)(this,"edgesFocusable",void 0),(0,f.A)(this,"elementsSelectable",void 0),(0,f.A)(this,"selectNodesOnDrag",void 0),(0,f.A)(this,"panOnDrag",void 0),(0,f.A)(this,"minZoom",void 0),(0,f.A)(this,"maxZoom",void 0),(0,f.A)(this,"defaultViewport",void 0),(0,f.A)(this,"translateExtent",void 0),(0,f.A)(this,"preventScrolling",void 0),(0,f.A)(this,"nodeExtent",void 0),(0,f.A)(this,"defaultMarkerColor",void 0),(0,f.A)(this,"zoomOnScroll",void 0),(0,f.A)(this,"zoomOnPinch",void 0),(0,f.A)(this,"panOnScroll",void 0),(0,f.A)(this,"panOnScrollSpeed",void 0),(0,f.A)(this,"panOnScrollMode",void 0),(0,f.A)(this,"zoomOnDoubleClick",void 0),(0,f.A)(this,"edgeUpdaterRadius",void 0),(0,f.A)(this,"noDragClassName",void 0),(0,f.A)(this,"noWheelClassName",void 0),(0,f.A)(this,"noPanClassName",void 0),(0,f.A)(this,"fitView",void 0),(0,f.A)(this,"fitViewOptions",void 0),(0,f.A)(this,"connectOnClick",void 0),(0,f.A)(this,"attributionPosition",void 0),(0,f.A)(this,"proOptions",void 0),(0,f.A)(this,"elevateNodesOnSelect",void 0),(0,f.A)(this,"elevateEdgesOnSelect",void 0),(0,f.A)(this,"disableKeyboardA11y",void 0),(0,f.A)(this,"autoPanOnNodeDrag",void 0),(0,f.A)(this,"autoPanOnConnect",void 0),(0,f.A)(this,"connectionRadius",void 0)}}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-reactflow"]],inputs:{nodes:"nodes",edges:"edges",defaultEdgeOptions:"defaultEdgeOptions",id:"id",nodeTypes:"nodeTypes",edgeTypes:"edgeTypes",connectionLineType:"connectionLineType",connectionLineStyle:"connectionLineStyle",connectionLineComponent:"connectionLineComponent",connectionLineContainerStyle:"connectionLineContainerStyle",connectionMode:"connectionMode",deleteKeyCode:"deleteKeyCode",selectionKeyCode:"selectionKeyCode",selectionOnDrag:"selectionOnDrag",selectionMode:"selectionMode",panActivationKeyCode:"panActivationKeyCode",multiSelectionKeyCode:"multiSelectionKeyCode",zoomActivationKeyCode:"zoomActivationKeyCode",snapToGrid:"snapToGrid",snapGrid:"snapGrid",onlyRenderVisibleElements:"onlyRenderVisibleElements",nodesDraggable:"nodesDraggable",nodesConnectable:"nodesConnectable",nodesFocusable:"nodesFocusable",nodeOrigin:"nodeOrigin",edgesFocusable:"edgesFocusable",elementsSelectable:"elementsSelectable",selectNodesOnDrag:"selectNodesOnDrag",panOnDrag:"panOnDrag",minZoom:"minZoom",maxZoom:"maxZoom",defaultViewport:"defaultViewport",translateExtent:"translateExtent",preventScrolling:"preventScrolling",nodeExtent:"nodeExtent",defaultMarkerColor:"defaultMarkerColor",zoomOnScroll:"zoomOnScroll",zoomOnPinch:"zoomOnPinch",panOnScroll:"panOnScroll",panOnScrollSpeed:"panOnScrollSpeed",panOnScrollMode:"panOnScrollMode",zoomOnDoubleClick:"zoomOnDoubleClick",edgeUpdaterRadius:"edgeUpdaterRadius",noDragClassName:"noDragClassName",noWheelClassName:"noWheelClassName",noPanClassName:"noPanClassName",fitView:"fitView",fitViewOptions:"fitViewOptions",connectOnClick:"connectOnClick",attributionPosition:"attributionPosition",proOptions:"proOptions",elevateNodesOnSelect:"elevateNodesOnSelect",elevateEdgesOnSelect:"elevateEdgesOnSelect",disableKeyboardA11y:"disableKeyboardA11y",autoPanOnNodeDrag:"autoPanOnNodeDrag",autoPanOnConnect:"autoPanOnConnect",connectionRadius:"connectionRadius"},outputs:{onNodeClick:"onNodeClick",onNodeDoubleClick:"onNodeDoubleClick",onNodeMouseEnter:"onNodeMouseEnter",onNodeMouseMove:"onNodeMouseMove",onNodeMouseLeave:"onNodeMouseLeave",onNodeContextMenu:"onNodeContextMenu",onNodeDragStart:"onNodeDragStart",onNodeDrag:"onNodeDrag",onNodeDragStop:"onNodeDragStop",onEdgeClick:"onEdgeClick",onEdgeUpdate:"onEdgeUpdate",onEdgeContextMenu:"onEdgeContextMenu",onEdgeMouseEnter:"onEdgeMouseEnter",onEdgeMouseMove:"onEdgeMouseMove",onEdgeMouseLeave:"onEdgeMouseLeave",onEdgeDoubleClick:"onEdgeDoubleClick",onEdgeUpdateStart:"onEdgeUpdateStart",onEdgeUpdateEnd:"onEdgeUpdateEnd",onNodesChange:"onNodesChange",onEdgesChange:"onEdgesChange",onNodesDelete:"onNodesDelete",onEdgesDelete:"onEdgesDelete",onSelectionDragStart:"onSelectionDragStart",onSelectionDrag:"onSelectionDrag",onSelectionDragStop:"onSelectionDragStop",onSelectionStart:"onSelectionStart",onSelectionEnd:"onSelectionEnd",onSelectionContextMenu:"onSelectionContextMenu",onConnect:"onConnect",onConnectStart:"onConnectStart",onConnectEnd:"onConnectEnd",onClickConnectStart:"onClickConnectStart",onClickConnectEnd:"onClickConnectEnd",onInit:"onInit",onMove:"onMove",onMoveStart:"onMoveStart",onMoveEnd:"onMoveEnd",onSelectionChange:"onSelectionChange",onPaneScroll:"onPaneScroll",onPaneClick:"onPaneClick",onPaneContextMenu:"onPaneContextMenu",onPaneMouseEnter:"onPaneMouseEnter",onPaneMouseMove:"onPaneMouseMove",onPaneMouseLeave:"onPaneMouseLeave",onError:"onError"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(o,r){},styles:[".react-flow{direction:ltr}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1;cursor:grab}.react-flow__pane.selection{cursor:pointer}.react-flow__pane.dragging{cursor:grabbing}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow .react-flow__edges{pointer-events:none;overflow:visible}.react-flow__edge-path,.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1;fill:none}.react-flow__edge{pointer-events:visibleStroke;cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge:focus .react-flow__edge-path,.react-flow__edge:focus-visible .react-flow__edge-path{stroke:#555}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-textbg{fill:#fff}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__connectionline{z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:grab}.react-flow__node.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background:#1a192b;border:1px solid white;border-radius:100%}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:-4px;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{top:50%;left:-4px;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:#ffffff80;padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:3px;width:150px;font-size:12px;color:#222;text-align:center;border-width:1px;border-style:solid;border-color:#1a192b;background-color:#fff}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:0 1px 4px 1px #00000014}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background-color:#f0f0f040}.react-flow__nodesselection-rect,.react-flow__selection{background:#0059dc14;border:1px dotted rgba(0,89,220,.8)}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls{box-shadow:0 0 2px 1px #00000014}.react-flow__controls-button{border:none;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;display:flex;justify-content:center;align-items:center;width:16px;height:16px;cursor:pointer;-webkit-user-select:none;user-select:none;padding:5px}.react-flow__controls-button:hover{background:#f4f4f4}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__minimap{background-color:#fff}.react-flow__minimap svg{display:block}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:#3367d9;transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:#3367d9;border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}\n","ngx-reactflow .react-flow__handle{height:12px;width:12px;border-width:2px}ngx-reactflow .selected .card{border:2px solid #696cff!important}\n"],encapsulation:2})),i})();const kx=()=>["Backspace","Delete"];function wx(t,i){if(1&t){const n=e.RV6();e.j41(0,"a",38),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.addNode(r))}),e.j41(1,"div",39)(2,"span",40),e.EFF(3),e.k0s()(),e.j41(4,"div",41)(5,"h6",42),e.EFF(6),e.k0s(),e.j41(7,"small",43),e.EFF(8),e.k0s()()()}if(2&t){let n;const o=e.XpG().$implicit;e.R7$(3),e.JRh(o.type[0]),e.R7$(3),e.JRh(null!==(n=o.displayName)&&void 0!==n?n:o.type),e.R7$(2),e.JRh(o.desc)}}function Nx(t,i){if(1&t&&(e.j41(0,"h6",44),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(n)}}function Ex(t,i){if(1&t&&(e.j41(0,"li"),e.DNE(1,wx,9,3,"a",36)(2,Nx,2,1,"h6",37),e.k0s()),2&t){const n=i.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!o.isString(n)),e.R7$(),e.Y8G("ngIf",o.isString(n))}}function Ix(t,i){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",19)(2,"ngx-reactflow",20),e.bIt("onConnect",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.onConnect(r))})("onEdgesDelete",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesDelete(r))})("onNodesDelete",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesDelete(r))})("onEdgesChange",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesChange(r))})("onNodesChange",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesChange(r))}),e.k0s()(),e.j41(3,"div",21)(4,"div",22)(5,"button",23),e.nrm(6,"span",24),e.k0s(),e.j41(7,"mat-menu",null,0)(9,"div",25)(10,"ul",26),e.DNE(11,Ex,3,2,"li",27),e.k0s()()()(),e.j41(12,"button",28),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.save())}),e.nrm(13,"span"),e.k0s(),e.j41(14,"span",29),e.EFF(15),e.k0s()(),e.j41(16,"div",30)(17,"button",31),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.close())}),e.nrm(18,"span",32),e.k0s()(),e.j41(19,"div",33)(20,"button",34),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.run())}),e.nrm(21,"span",35),e.k0s()()()}if(2&t){const n=e.sdS(8),o=e.XpG();e.R7$(2),e.Y8G("nodes",o.nodes)("edges",o.edges)("nodeTypes",o.nodeTypes)("deleteKeyCode",e.lJ4(13,kx)),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(6),e.Y8G("ngForOf",o.avaiableNodes),e.R7$(),e.ZvI("btn btn-icon btn-",o.saved?"success":"secondary"," mt-3 ml-3"),e.R7$(),e.ZvI("tf-icons bx bx-",o.saved?"check":"save"," bx-22px"),e.R7$(2),e.JRh(null==o.curApp?null:o.curApp.name)}}let Ax=(()=>{var t;class i{isString(o){return"string"==typeof o}constructor(o,r,l,u,p){(0,f.A)(this,"route",void 0),(0,f.A)(this,"appRef",void 0),(0,f.A)(this,"injector",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"reactFlow",void 0),(0,f.A)(this,"nodes",[]),(0,f.A)(this,"edges",[]),(0,f.A)(this,"avaiableNodes",["Input",(new K_).getNodeSpec(),"Data Processor",(new eh).getNodeSpec(),(new J_).getNodeSpec(),(new ih).getNodeSpec(),(new W_).getNodeSpec(),(new dh).getNodeSpec(),(new Z_).getNodeSpec(),(new ah).getNodeSpec(),(new Q_).getNodeSpec(),(new sh).getNodeSpec(),(new q_).getNodeSpec(),(new ch).getNodeSpec(),"Storage",(new rh).getNodeSpec(),(new lh).getNodeSpec(),"Data Query",(new nh).getNodeSpec(),"Output",(new uh).getNodeSpec(),(new ph).getNodeSpec(),(new th).getNodeSpec()]),(0,f.A)(this,"data",[]),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"saved",!1),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"showMenu",!1),(0,f.A)(this,"newCollectionName",""),(0,f.A)(this,"newCollectionSpec",""),this.route=o,this.appRef=r,this.injector=l,this.ngZone=u,this.appService=p,this.nodeTypes={form:(new K_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),embedding:(new J_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),database:(new rh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),search:(new nh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),agent:(new eh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),htmlViewer:(new uh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),router:(new th).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),spliter:(new ih).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),vectorDatabase:(new lh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),apiInvoker:(new W_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToAudio:(new Z_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),transcription:(new ah).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToImage:(new Q_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),text:(new sh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),check:(new q_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),videoRender:(new ch).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),zip:(new ph).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),webAccess:(new dh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)})}}ngOnInit(){var o=this;document.addEventListener("keydown",function(){var r=(0,he.A)(function*(l){let u=o.nodes.filter(_=>_.selected)[0],p=window.getSelection()?.toString();if(u&&!p&&l.ctrlKey&&"c"===l.key)try{yield navigator.clipboard.writeText(JSON.stringify(u.data))}catch(_){console.error("Failed to copy text: ",_)}});return function(l){return r.apply(this,arguments)}}()),document.addEventListener("paste",function(){var r=(0,he.A)(function*(l){try{const u=yield navigator.clipboard.readText();if(!u.startsWith('{"id":"n'))return;l.preventDefault();let p=JSON.parse(u);p.x+=20,p.y+=20,p.inputs=[],p.links=[],o.addNode(p)}catch(u){console.error("Failed to read from clipboard: ",u)}});return function(l){return r.apply(this,arguments)}}()),this.route.paramMap.subscribe(r=>{this.id=+(r.get("id")??"0"),this.load()})}save(o){this.curApp.config=JSON.stringify(this.data),this.appService.save(this.curApp).subscribe(r=>{this.curApp.id=+r.data,this.saved=!0,o&&o(+r.data),setTimeout(()=>{this.saved=!1},2e3)})}onNodesChange(o){this.ngZone.run(()=>{this.nodes=Hf(o[0],this.nodes);let r=o[0][0].id,l=this.nodes.find(p=>p.id==r),u=this.data.find(p=>p.id==r);u&&(u.x=l.position.x,u.y=l.position.y)})}onEdgesChange(o){this.ngZone.run(()=>{this.edges=f_(o[0],this.edges)})}onNodesDelete(o){let r=o[0][0].id;this.data=this.data.filter(u=>u.id!=r);for(let u of this.data){let p=u.links.indexOf(r);p>=0&&u.links.splice(p,1)}let l=document.getElementById("settingModal-"+r);l&&l.parentNode?.removeChild(l)}onEdgesDelete(o){let r=o[0][0].source,l=o[0][0].target,u=this.data.filter(_=>_.id==r)[0],p=u.links.indexOf(l);p>=0&&u.links.splice(p,1),this.updateInput(this.data.filter(_=>_.id==l)[0]),this.reRender()}onConnect(o){let r=this.data.filter(l=>l.id==o[0].source)[0];r.links.push(o[0].target),this.updateInput(r),this.ngZone.run(()=>{let l=Vm(o[0],this.edges);for(let u of l)u.animated=!0,u.type="bezier",u.style={strokeWidth:2,stroke:"#009688"};this.edges=l,this.reRender()})}distinctByName(o){const r=new Set;return o.filter(l=>!r.has(l.name)&&(r.add(l.name),!0))}updateInput(o){o.inputs=[];let r=this.data.filter(u=>u.links.includes(o.id));for(let u of r)o.inputs.push(...u.inputs),o.inputs.push(...u.outputs);o.inputs=this.distinctByName(o.inputs);let l=this.data.filter(u=>o.links.includes(u.id));if(l&&0!=l.length)for(let u of l)this.updateInput(u)}reRender(){let o=[...this.nodes];this.nodes=o}onNodeConfigChange(o){o&&(this.updateInput(o),this.reRender())}addNode(o){let r=0==this.data.length?1:Math.max(...this.data.map(_=>+_.id.substring(1)))+1,l=JSON.parse(JSON.stringify(o));l.id=`n${r}`,this.data.push(l),this.showMenu=!1;let u=this.nodes.filter(_=>_.selected)[0];u&&(u.selected=!1,l.x=u.position.x+20,l.y=u.position.y+20);let p=[...this.nodes];p.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,selected:!0,position:{x:l.x??150,y:l.y??150}}),this.nodes=p}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(o=>{this.curApp=o,this.data=JSON.parse(o.config),this.renderGraph()})}newApp(){this.renderGraph()}close(){window.location.href="/vi/admin/ai/dashboard"}run(o){o&&(this.curApp=o),this.save(r=>{window.location.href="/vi/admin/ai/app/"+r})}renderGraph(){const o=[],r=[];for(let l of this.data){r.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,position:{x:l.x??0,y:l.y??0}});for(let u of l.links)o.push({source:l.id,target:u,id:l.id+"_"+u,type:"bezier",animated:!0,style:{strokeWidth:2,stroke:"#009688"}})}this.edges=o,this.nodes=r}toggleMenu(){this.showMenu=!this.showMenu}setupNewCollection(){let o=this.nodes.filter(r=>r.selected)[0];if(o){let r={};for(let l of o.data.inputs){let u=l.name.split("-")[0];r[l.name.substring(u.length+1)]="json"==l.type?l.demo:l.type}this.newCollectionSpec=JSON.stringify(r,null,4)}}closeNewCollection(){this.newCollectionName="",this.newCollectionSpec=""}addCollection(){this.appService.addCollection({name:this.newCollectionName,spec:this.newCollectionSpec}).subscribe(o=>{})}addVCollection(){this.appService.addVCollection({name:this.newCollectionName}).subscribe(o=>{})}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(ht.nX),e.rXU(e.o8S),e.rXU(e.zZn),e.rXU(e.SKi),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow"]],viewQuery:function(o,r){if(1&o&&e.GBs(_h,5),2&o){let l;e.mGM(l=e.lsd())&&(r.reactFlow=l.first)}},standalone:!0,features:[e.aNF],decls:39,vars:6,consts:[["menu",""],[4,"ngIf"],["id","btnShowAddCollectionModal","data-bs-toggle","modal",1,"d-none",3,"click"],["data-bs-backdrop","static","id","AddCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","Folder Name",1,"form-control",3,"ngModelChange","ngModel"],[3,"onChange","data"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click"],["id","btnShowAddVCollectionModal","data-bs-toggle","modal",1,"d-none"],["data-bs-backdrop","static","id","AddVCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","Collection Name",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3"],[2,"width","100%","height","100vh","position","absolute"],[3,"onConnect","onEdgesDelete","onNodesDelete","onEdgesChange","onNodesChange","nodes","edges","nodeTypes","deleteKeyCode"],[2,"position","absolute","z-index","999"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-icon","btn-primary","mt-3","ml-3","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-22px"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"ml-3"],[2,"position","absolute","z-index","999","right","10px","top","15px"],["type","button",1,"btn","btn-label-secondary","p-2",3,"click"],[1,"tf-icons","bx","bx-x","bx-22px"],[2,"position","absolute","z-index","999","bottom","40px","right","40px"],["type","button",1,"btn","btn-icon","btn-success",3,"click"],[1,"tf-icons","bx","bx-play","bx-22px"],["href","javascript:void(0);","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-header text-uppercase",4,"ngIf"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"avatar","mr-3"],[1,"avatar-initial","rounded-circle","bg-label-success"],[1,"list-content"],[1,"mb-0","text-capitalize"],[1,"text-muted"],[1,"dropdown-header","text-uppercase"]],template:function(o,r){1&o&&(e.DNE(0,Ix,22,14,"div",1),e.j41(1,"button",2),e.bIt("click",function(){return r.setupNewCollection()}),e.k0s(),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),e.EFF(7," Your Folders "),e.k0s()(),e.j41(8,"div",8)(9,"div",9)(10,"label",10),e.EFF(11,"Folder Name"),e.k0s(),e.j41(12,"input",11),e.mxI("ngModelChange",function(u){return e.DH7(r.newCollectionName,u)||(r.newCollectionName=u),u}),e.k0s()(),e.j41(13,"div",9)(14,"label",10),e.EFF(15,"Data Specification"),e.k0s(),e.j41(16,"app-json-editor",12),e.bIt("onChange",function(u){return r.newCollectionSpec=u}),e.k0s()(),e.j41(17,"div")(18,"button",13),e.bIt("click",function(){return r.closeNewCollection()}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",14),e.bIt("click",function(){return r.addCollection()}),e.EFF(21,"Create Folder"),e.k0s()()()()()(),e.nrm(22,"button",15),e.j41(23,"div",16)(24,"div",4)(25,"div",5)(26,"div",6)(27,"h5",7),e.EFF(28," Manage Vector Collections "),e.k0s()(),e.j41(29,"div",8)(30,"div",9)(31,"label",10),e.EFF(32,"Collection Name"),e.k0s(),e.j41(33,"input",17),e.mxI("ngModelChange",function(u){return e.DH7(r.newCollectionName,u)||(r.newCollectionName=u),u}),e.k0s()(),e.j41(34,"div")(35,"button",18),e.EFF(36,"Close"),e.k0s(),e.j41(37,"button",14),e.bIt("click",function(){return r.addVCollection()}),e.EFF(38,"Create Collection"),e.k0s()()()()()()),2&o&&(e.Y8G("ngIf",null==r.curApp?null:r.curApp.name),e.R7$(),e.BMQ("data-bs-target","#AddCollectionModal"),e.R7$(11),e.R50("ngModel",r.newCollectionName),e.R7$(4),e.Y8G("data",r.newCollectionSpec),e.R7$(6),e.BMQ("data-bs-target","#AddVCollectionModal"),e.R7$(11),e.R50("ngModel",r.newCollectionName))},dependencies:[_h,V.MD,V.Sq,V.bT,w.YN,w.me,w.BC,w.vS,N0,Z.Cn,Z.kk,Z.Cp],styles:[".avatar[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%]{background:#3dbe3d;padding:10px;color:#fff;border-radius:50%;margin-right:10px;text-transform:uppercase;display:inline-block;width:39px;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})),i})(),Tx=(()=>{var t;class i extends Ae.H{}return t=i,(0,f.A)(i,"\u0275fac",(()=>{let n;return function(r){return(n||(n=e.xGo(t)))(r||t)}})()),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["ai-master-page"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(o,r){1&o&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[ht.n3],encapsulation:2})),i})();function Fx(t,i){1&t&&(e.j41(0,"div",1),e.EFF(1,"Loading..."),e.k0s())}function Rx(t,i){1&t&&(e.j41(0,"div",8),e.EFF(1," No data "),e.k0s())}function jx(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"textarea",11),e.mxI("ngModelChange",function(r){const l=e.eBV(n).$implicit;return e.DH7(l.content,r)||(l.content=r),e.Njj(r)}),e.k0s(),e.j41(3,"p",12)(4,"small",13),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.delData(r))}),e.EFF(5,"Delete"),e.k0s(),e.j41(6,"small",14),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.saveData(r))}),e.EFF(7,"Save"),e.k0s()()()()}if(2&t){const n=i.$implicit;e.R7$(2),e.R50("ngModel",n.content),e.R7$(2),e.Mz_("id","btn-del-",n.id,""),e.R7$(2),e.Mz_("id","btn-save-",n.id,"")}}let Mx=(()=>{var t;class i{constructor(o,r){(0,f.A)(this,"route",void 0),(0,f.A)(this,"app",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"curCol",void 0),(0,f.A)(this,"searchStr",""),(0,f.A)(this,"lstContent",[]),this.route=o,this.app=r}ngOnInit(){this.route.paramMap.subscribe(o=>{let r=o.get("id")??"";r.startsWith("v-")?this.app.listVCollection().subscribe(l=>{this.curCol=l.find(u=>u.id==+r.substring(2)),this.loadData()}):this.app.listCollection().subscribe(l=>{this.curCol=l.find(u=>u.id==+r),this.loadData()})})}deleteDb(){this.curCol&&confirm("Are you sure to delete this Storage?")&&this.app.delColection(this.curCol).subscribe(o=>{document.location.href="/home"})}loadData(){this.search()}search(){this.lstContent=[],this.isLoading=!0,"data"==this.curCol?.type?this.app.listData({id:this.curCol.id,name:this.searchStr}).subscribe(o=>{this.lstContent=o,this.isLoading=!1,setTimeout(()=>{this.autoResizeTextareas()},1e3)}):this.app.searchVector({collection:this.curCol?.name,content:this.searchStr,id:0,vector:[]}).subscribe(o=>{this.lstContent=o.map(r=>({content:r})),this.isLoading=!1})}delData(o){document.getElementById("btn-del-"+o.id).innerHTML="Deleting...","data"==this.curCol?.type&&this.app.delData(o).subscribe(r=>{this.lstContent=this.lstContent.filter(l=>l.id!=o.id)})}saveData(o){document.getElementById("btn-save-"+o.id).innerHTML="Saving...","data"==this.curCol?.type&&this.app.saveData(o).subscribe(r=>{document.getElementById("btn-save-"+o.id).innerHTML="Saved OK",setTimeout(()=>{document.getElementById("btn-save-"+o.id).innerHTML="Save"},2e3)})}close(){window.location.href="/home"}autoResizeTextareas(){document.querySelectorAll("textarea").forEach(r=>{const l=()=>{r.style.height="auto",r.style.height=r.scrollHeight+"px"};r.addEventListener("input",l),l()})}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(ht.nX),e.rXU($e))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-database"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"box","p-3"],[1,"mt-3"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["class","mt-3",4,"ngIf"],["class","p-3",4,"ngIf"],["class","card mt-3",4,"ngFor","ngForOf"],[1,"mt-3","text-end"],["type","button",1,"btn","btn-text-danger",3,"click"],[1,"p-3"],[1,"card","mt-3"],[1,"card-body"],[1,"form-control",2,"min-height","150px",3,"ngModelChange","ngModel"],[1,"card-text"],[1,"text-danger","cursor-pointer","mr-5",3,"click","id"],[1,"text-primary","cursor-pointer","mr-5",3,"click","id"]],template:function(o,r){1&o&&(e.j41(0,"teacher-layout")(1,"div",0)(2,"div",1)(3,"div")(4,"input",2),e.mxI("ngModelChange",function(u){return e.DH7(r.searchStr,u)||(r.searchStr=u),u}),e.bIt("keydown.enter",function(){return r.search()}),e.k0s(),e.DNE(5,Fx,2,0,"div",3)(6,Rx,2,0,"div",4)(7,jx,8,5,"div",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return r.deleteDb()}),e.EFF(10),e.k0s()()()()),2&o&&(e.R7$(4),e.R50("ngModel",r.searchStr),e.R7$(),e.Y8G("ngIf",r.isLoading),e.R7$(),e.Y8G("ngIf",0==r.lstContent.length),e.R7$(),e.Y8G("ngForOf",r.lstContent),e.R7$(3),e.SpI(" Delete ",null==r.curCol?null:r.curCol.name," Storage "))},dependencies:[V.MD,V.Sq,V.bT,w.YN,w.me,w.BC,w.vS,Oe.b,Do]})),i})();function $x(t,i){if(1&t&&e.nrm(0,"app-app-view",2),2&t){const n=e.XpG();e.Y8G("appId",n.id)("queryParamsObject",n.queryParamsObject)}}let hh=(()=>{var t;class i{constructor(o){(0,f.A)(this,"route",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"queryParamsObject",{}),this.route=o}ngOnInit(){this.route.paramMap.subscribe(o=>{this.id=+(o.get("id")??"0"),this.route.queryParams.subscribe(r=>{this.queryParamsObject={...r},console.log("Mapped Query Params:",this.queryParamsObject)})})}}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)(e.rXU(ht.nX))}),(0,f.A)(i,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow-runner"]],standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"box","p-0","mt-5","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","w-md-50","mx-auto"],[3,"appId","queryParamsObject",4,"ngIf"],[3,"appId","queryParamsObject"]],template:function(o,r){1&o&&(e.j41(0,"teacher-layout")(1,"div",0),e.DNE(2,$x,1,2,"app-app-view",1),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngIf",r.id))},dependencies:[V.MD,V.bT,w.YN,Oe.b,Do,Me.Q,wi]})),i})();const Gx=[{path:"",component:Tx,children:[{path:"",component:qa},{path:"demo",component:Nu,canActivate:[ut]},{path:"dashboard",component:qa,canActivate:[ut]},{path:"edu-store-teacher",component:xn},{path:"app/:id",component:hh,canActivate:[ut]},{path:"db/:id",component:Mx,canActivate:[ut]},{path:"flow/:id",component:Ax,canActivate:[ut]}]}];let Dx=(()=>{var t;class i{}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275mod",e.$C({type:t})),(0,f.A)(i,"\u0275inj",e.G2t({imports:[ht.iI.forChild(Gx),ht.iI,Be.XE]})),i})(),Ox=(()=>{var t;class i{}return t=i,(0,f.A)(i,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(i,"\u0275mod",e.$C({type:t})),(0,f.A)(i,"\u0275inj",e.G2t({imports:[ht.iI,V.MD,w.YN,tt.s,w.X1,Dx,Me.Q,Oe.b,pn.L,nt.Id,St.flO.pick(St.Ptg),qt.An,hh,wi]})),i})()},7578:(tn,oe,se)=>{var f=se(1395),V=se(1605);function w(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ht=new Set,St={};function qt(s,a){nt(s,a),nt(s+"Capture",a)}function nt(s,a){for(St[s]=a,s=0;s<a.length;s++)ht.add(a[s])}var tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pn=Object.prototype.hasOwnProperty,Oe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Me={},Be={};function he(s,a,c,d,m,h,b){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=h,this.removeEmptyString=b}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ae[s]=new he(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];Ae[a]=new he(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ae[s]=new he(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ae[s]=new he(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ae[s]=new he(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){Ae[s]=new he(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){Ae[s]=new he(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){Ae[s]=new he(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){Ae[s]=new he(s,5,!1,s.toLowerCase(),null,!1,!1)});var Pt=/[\-:]([a-z])/g;function gt(s){return s[1].toUpperCase()}function Mt(s,a,c,d){var m=Ae.hasOwnProperty(a)?Ae[a]:null;(null!==m?0!==m.type:d||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(function ut(s,a,c,d){if(null===a||typeof a>"u"||function We(s,a,c,d){if(null!==c&&0===c.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(s=s.toLowerCase().slice(0,5))&&"aria-"!==s);default:return!1}}(s,a,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}(a,c,m,d)&&(c=null),d||null===m?function e(s){return!!pn.call(Be,s)||!pn.call(Me,s)&&(Oe.test(s)?Be[s]=!0:(Me[s]=!0,!1))}(a)&&(null===c?s.removeAttribute(a):s.setAttribute(a,""+c)):m.mustUseProperty?s[m.propertyName]=null===c?3!==m.type&&"":c:(a=m.attributeName,d=m.attributeNamespace,null===c?s.removeAttribute(a):(c=3===(m=m.type)||4===m&&!0===c?"":""+c,d?s.setAttributeNS(d,a,c):s.setAttribute(a,c))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(Pt,gt);Ae[a]=new he(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(Pt,gt);Ae[a]=new he(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(Pt,gt);Ae[a]=new he(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){Ae[s]=new he(s,1,!1,s.toLowerCase(),null,!1,!1)}),Ae.xlinkHref=new he("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){Ae[s]=new he(s,1,!1,s.toLowerCase(),null,!0,!0)});var Pe=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$t=Symbol.for("react.element"),$e=Symbol.for("react.portal"),dt=Symbol.for("react.fragment"),On=Symbol.for("react.strict_mode"),hn=Symbol.for("react.profiler"),gn=Symbol.for("react.provider"),vn=Symbol.for("react.context"),yn=Symbol.for("react.forward_ref"),nn=Symbol.for("react.suspense"),on=Symbol.for("react.suspense_list"),qn=Symbol.for("react.memo"),ee=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ke=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Ie=Symbol.iterator;function Ve(s){return null===s||"object"!=typeof s?null:"function"==typeof(s=Ie&&s[Ie]||s["@@iterator"])?s:null}var Z,j=Object.assign;function we(s){if(void 0===Z)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||""}return"\n"+Z+s}var Ee=!1;function Fe(s,a){if(!s||Ee)return"";Ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(z){var d=z}Reflect.construct(s,[],a)}else{try{a.call()}catch(z){d=z}s.call(a.prototype)}else{try{throw Error()}catch(z){d=z}s()}}catch(z){if(z&&d&&"string"==typeof z.stack){for(var m=z.stack.split("\n"),h=d.stack.split("\n"),b=m.length-1,k=h.length-1;1<=b&&0<=k&&m[b]!==h[k];)k--;for(;1<=b&&0<=k;b--,k--)if(m[b]!==h[k]){if(1!==b||1!==k)do{if(b--,0>--k||m[b]!==h[k]){var F="\n"+m[b].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}}while(1<=b&&0<=k);break}}}finally{Ee=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?we(s):""}function Ye(s){switch(s.tag){case 5:return we(s.type);case 16:return we("Lazy");case 13:return we("Suspense");case 19:return we("SuspenseList");case 0:case 2:case 15:return Fe(s.type,!1);case 11:return Fe(s.type.render,!1);case 1:return Fe(s.type,!0);default:return""}}function ot(s){if(null==s)return null;if("function"==typeof s)return s.displayName||s.name||null;if("string"==typeof s)return s;switch(s){case dt:return"Fragment";case $e:return"Portal";case hn:return"Profiler";case On:return"StrictMode";case nn:return"Suspense";case on:return"SuspenseList"}if("object"==typeof s)switch(s.$$typeof){case vn:return(s.displayName||"Context")+".Consumer";case gn:return(s._context.displayName||"Context")+".Provider";case yn:var a=s.render;return(s=s.displayName)||(s=""!==(s=a.displayName||a.name||"")?"ForwardRef("+s+")":"ForwardRef"),s;case qn:return null!==(a=s.displayName||null)?a:ot(s.type)||"Memo";case ee:a=s._payload,s=s._init;try{return ot(s(a))}catch{}}return null}function pt(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=(s=a.render).displayName||s.name||"",a.displayName||(""!==s?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ot(a);case 8:return a===On?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function ze(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":case"object":return s;default:return""}}function rn(s){var a=s.type;return(s=s.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===a||"radio"===a)}function Jr(s){s._valueTracker||(s._valueTracker=function sp(s){var a=rn(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&"function"==typeof c.get&&"function"==typeof c.set){var m=c.get,h=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){d=""+b,h.call(this,b)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}(s))}function $c(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=rn(s)?s.checked?"true":"false":s.value),(s=d)!==c&&(a.setValue(s),!0)}function Kr(s){if(typeof(s=s||(typeof document<"u"?document:void 0))>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ra(s,a){return j({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a.checked??s._wrapperState.initialChecked})}function Gc(s,a){var c=null==a.defaultValue?"":a.defaultValue,d=null!=a.checked?a.checked:a.defaultChecked;c=ze(null!=a.value?a.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function Dc(s,a){null!=(a=a.checked)&&Mt(s,"checked",a,!1)}function ja(s,a){Dc(s,a);var c=ze(a.value),d=a.type;if(null!=c)"number"===d?(0===c&&""===s.value||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if("submit"===d||"reset"===d)return void s.removeAttribute("value");a.hasOwnProperty("value")?Ma(s,a.type,c):a.hasOwnProperty("defaultValue")&&Ma(s,a.type,ze(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(s.defaultChecked=!!a.defaultChecked)}function Oc(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var d=a.type;if(("submit"===d||"reset"===d)&&null==a.value)return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}""!==(c=s.name)&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,""!==c&&(s.name=c)}function Ma(s,a,c){("number"!==a||Kr(s.ownerDocument)!==s)&&(null==c?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Xi=Array.isArray;function $o(s,a,c,d){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&d&&(s[c].defaultSelected=!0)}else{for(c=""+ze(c),a=null,m=0;m<s.length;m++){if(s[m].value===c)return s[m].selected=!0,void(d&&(s[m].defaultSelected=!0));null!==a||s[m].disabled||(a=s[m])}null!==a&&(a.selected=!0)}}function It(s,a){if(null!=a.dangerouslySetInnerHTML)throw Error(w(91));return j({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Vc(s,a){var c=a.value;if(null==c){if(c=a.children,a=a.defaultValue,null!=c){if(null!=a)throw Error(w(92));if(Xi(c)){if(1<c.length)throw Error(w(93));c=c[0]}a=c}null==a&&(a=""),c=a}s._wrapperState={initialValue:ze(c)}}function zc(s,a){var c=ze(a.value),d=ze(a.defaultValue);null!=c&&((c=""+c)!==s.value&&(s.value=c),null==a.defaultValue&&s.defaultValue!==c&&(s.defaultValue=c)),null!=d&&(s.defaultValue=""+d)}function Vn(s){var a=s.textContent;a===s._wrapperState.initialValue&&""!==a&&null!==a&&(s.value=a)}function Bc(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $a(s,a){return null==s||"http://www.w3.org/1999/xhtml"===s?Bc(a):"http://www.w3.org/2000/svg"===s&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":s}var Qr,s,Pc=(s=function(s,a){if("http://www.w3.org/2000/svg"!==s.namespaceURI||"innerHTML"in s)s.innerHTML=a;else{for((Qr=Qr||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Qr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,d,m){MSApp.execUnsafeLocalFunction(function(){return s(a,c)})}:s);function Yi(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&3===c.nodeType)return void(c.nodeValue=a)}s.textContent=a}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ap=["Webkit","ms","Moz","O"];function Lc(s,a,c){return null==a||"boolean"==typeof a||""===a?"":c||"number"!=typeof a||0===a||Hi.hasOwnProperty(s)&&Hi[s]?(""+a).trim():a+"px"}function Uc(s,a){for(var c in s=s.style,a)if(a.hasOwnProperty(c)){var d=0===c.indexOf("--"),m=Lc(c,a[c],d);"float"===c&&(c="cssFloat"),d?s.setProperty(c,m):s[c]=m}}Object.keys(Hi).forEach(function(s){ap.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Hi[a]=Hi[s]})});var lp=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ga(s,a){if(a){if(lp[s]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(w(137,s));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(w(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(w(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(w(62))}}function Da(s,a){if(-1===s.indexOf("-"))return"string"==typeof a.is;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oa=null;function Va(s){return(s=s.target||s.srcElement||window).correspondingUseElement&&(s=s.correspondingUseElement),3===s.nodeType?s.parentNode:s}var za=null,di=null,pi=null;function Xc(s){if(s=pr(s)){if("function"!=typeof za)throw Error(w(280));var a=s.stateNode;a&&(a=js(a),za(s.stateNode,s.type,a))}}function Yc(s){di?pi?pi.push(s):pi=[s]:di=s}function Hc(){if(di){var s=di,a=pi;if(pi=di=null,Xc(s),a)for(s=0;s<a.length;s++)Xc(a[s])}}function Wc(s,a){return s(a)}function Ba(){}var Pa=!1;function Zc(s,a,c){if(Pa)return s(a,c);Pa=!0;try{return Wc(s,a,c)}finally{Pa=!1,(null!==di||null!==pi)&&(Ba(),Hc())}}function Wi(s,a){var c=s.stateNode;if(null===c)return null;var d=js(c);if(null===d)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(d=!("button"===(s=s.type)||"input"===s||"select"===s||"textarea"===s)),s=!d;break e;default:s=!1}if(s)return null;if(c&&"function"!=typeof c)throw Error(w(231,a,typeof c));return c}var La=!1;if(tt)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){La=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{La=!1}function cp(s,a,c,d,m,h,b,k,F){var z=Array.prototype.slice.call(arguments,3);try{a.apply(c,z)}catch(q){this.onError(q)}}var qi=!1,es=null,ts=!1,Ua=null,up={onError:function(s){qi=!0,es=s}};function dp(s,a,c,d,m,h,b,k,F){qi=!1,es=null,cp.apply(up,arguments)}function Go(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do{4098&(a=s).flags&&(c=a.return),s=a.return}while(s)}return 3===a.tag?c:null}function qc(s){if(13===s.tag){var a=s.memoizedState;if(null===a&&null!==(s=s.alternate)&&(a=s.memoizedState),null!==a)return a.dehydrated}return null}function Jc(s){if(Go(s)!==s)throw Error(w(188))}function Kc(s){return null!==(s=function fp(s){var a=s.alternate;if(!a){if(null===(a=Go(s)))throw Error(w(188));return a!==s?null:s}for(var c=s,d=a;;){var m=c.return;if(null===m)break;var h=m.alternate;if(null===h){if(null!==(d=m.return)){c=d;continue}break}if(m.child===h.child){for(h=m.child;h;){if(h===c)return Jc(m),s;if(h===d)return Jc(m),a;h=h.sibling}throw Error(w(188))}if(c.return!==d.return)c=m,d=h;else{for(var b=!1,k=m.child;k;){if(k===c){b=!0,c=m,d=h;break}if(k===d){b=!0,d=m,c=h;break}k=k.sibling}if(!b){for(k=h.child;k;){if(k===c){b=!0,c=h,d=m;break}if(k===d){b=!0,d=h,c=m;break}k=k.sibling}if(!b)throw Error(w(189))}}if(c.alternate!==d)throw Error(w(190))}if(3!==c.tag)throw Error(w(188));return c.stateNode.current===c?s:a}(s))?Qc(s):null}function Qc(s){if(5===s.tag||6===s.tag)return s;for(s=s.child;null!==s;){var a=Qc(s);if(null!==a)return a;s=s.sibling}return null}var eu=V.unstable_scheduleCallback,tu=V.unstable_cancelCallback,mp=V.unstable_shouldYield,_p=V.unstable_requestPaint,vt=V.unstable_now,hp=V.unstable_getCurrentPriorityLevel,Xa=V.unstable_ImmediatePriority,nu=V.unstable_UserBlockingPriority,ns=V.unstable_NormalPriority,gp=V.unstable_LowPriority,ou=V.unstable_IdlePriority,os=null,zn=null,An=Math.clz32?Math.clz32:function xp(s){return 0===(s>>>=0)?32:31-(yp(s)/bp|0)|0},yp=Math.log,bp=Math.LN2,is=64,rs=4194304;function Ji(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&s;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&s;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ss(s,a){var c=s.pendingLanes;if(0===c)return 0;var d=0,m=s.suspendedLanes,h=s.pingedLanes,b=268435455&c;if(0!==b){var k=b&~m;0!==k?d=Ji(k):0!=(h&=b)&&(d=Ji(h))}else 0!=(b=c&~m)?d=Ji(b):0!==h&&(d=Ji(h));if(0===d)return 0;if(0!==a&&a!==d&&!(a&m)&&((m=d&-d)>=(h=a&-a)||16===m&&4194240&h))return a;if(4&d&&(d|=16&c),0!==(a=s.entangledLanes))for(s=s.entanglements,a&=d;0<a;)d|=s[c=31-An(a)],a&=~(m=1<<c);return d}function Cp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function Ya(s){return 0!=(s=-1073741825&s.pendingLanes)?s:1073741824&s?1073741824:0}function iu(){var s=is;return!(4194240&(is<<=1))&&(is=64),s}function Ha(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function Ki(s,a,c){s.pendingLanes|=a,536870912!==a&&(s.suspendedLanes=0,s.pingedLanes=0),(s=s.eventTimes)[a=31-An(a)]=c}function as(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-An(c),m=1<<d;m&a|s[d]&a&&(s[d]|=a),c&=~m}}var Le=0;function ru(s){return 1<(s&=-s)?4<s?268435455&s?16:536870912:4:1}var su,Wa,au,lu,cu,Za=!1,Do=[],po=null,fo=null,mo=null,Qi=new Map,er=new Map,_o=[],kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qa(s,a){switch(s){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Qi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(a.pointerId)}}function Oo(s,a,c,d,m,h){return null===s||s.nativeEvent!==h?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:h,targetContainers:[m]},null!==a&&null!==(a=pr(a))&&Wa(a),s):(s.eventSystemFlags|=d,a=s.targetContainers,null!==m&&-1===a.indexOf(m)&&a.push(m),s)}function Ka(s){var a=Yo(s.target);if(null!==a){var c=Go(a);if(null!==c)if(13===(a=c.tag)){if(null!==(a=qc(c)))return s.blockedOn=a,void cu(s.priority,function(){au(c)})}else if(3===a&&c.stateNode.current.memoizedState.isDehydrated)return void(s.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}s.blockedOn=null}function Vo(s){if(null!==s.blockedOn)return!1;for(var a=s.targetContainers;0<a.length;){var c=uu(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(null!==c)return null!==(a=pr(c))&&Wa(a),s.blockedOn=c,!1;var d=new(c=s.nativeEvent).constructor(c.type,c);Oa=d,c.target.dispatchEvent(d),Oa=null,a.shift()}return!0}function tr(s,a,c){Vo(s)&&c.delete(a)}function wp(){Za=!1,null!==po&&Vo(po)&&(po=null),null!==fo&&Vo(fo)&&(fo=null),null!==mo&&Vo(mo)&&(mo=null),Qi.forEach(tr),er.forEach(tr)}function fi(s,a){s.blockedOn===a&&(s.blockedOn=null,Za||(Za=!0,V.unstable_scheduleCallback(V.unstable_NormalPriority,wp)))}function zo(s){function a(m){return fi(m,s)}if(0<Do.length){fi(Do[0],s);for(var c=1;c<Do.length;c++){var d=Do[c];d.blockedOn===s&&(d.blockedOn=null)}}for(null!==po&&fi(po,s),null!==fo&&fi(fo,s),null!==mo&&fi(mo,s),Qi.forEach(a),er.forEach(a),c=0;c<_o.length;c++)(d=_o[c]).blockedOn===s&&(d.blockedOn=null);for(;0<_o.length&&null===(c=_o[0]).blockedOn;)Ka(c),null===c.blockedOn&&_o.shift()}var nr=Pe.ReactCurrentBatchConfig,ls=!0;function Np(s,a,c,d){var m=Le,h=nr.transition;nr.transition=null;try{Le=1,Qa(s,a,c,d)}finally{Le=m,nr.transition=h}}function cm(s,a,c,d){var m=Le,h=nr.transition;nr.transition=null;try{Le=4,Qa(s,a,c,d)}finally{Le=m,nr.transition=h}}function Qa(s,a,c,d){if(ls){var m=uu(s,a,c,d);if(null===m)Ts(s,a,d,el,c),qa(s,d);else if(function Ja(s,a,c,d,m){switch(a){case"focusin":return po=Oo(po,s,a,c,d,m),!0;case"dragenter":return fo=Oo(fo,s,a,c,d,m),!0;case"mouseover":return mo=Oo(mo,s,a,c,d,m),!0;case"pointerover":var h=m.pointerId;return Qi.set(h,Oo(Qi.get(h)||null,s,a,c,d,m)),!0;case"gotpointercapture":return er.set(h=m.pointerId,Oo(er.get(h)||null,s,a,c,d,m)),!0}return!1}(m,s,a,c,d))d.stopPropagation();else if(qa(s,d),4&a&&-1<kp.indexOf(s)){for(;null!==m;){var h=pr(m);if(null!==h&&su(h),null===(h=uu(s,a,c,d))&&Ts(s,a,d,el,c),h===m)break;m=h}null!==m&&d.stopPropagation()}else Ts(s,a,d,null,c)}}var el=null;function uu(s,a,c,d){if(el=null,null!==(s=Yo(s=Va(d))))if(null===(a=Go(s)))s=null;else if(13===(c=a.tag)){if(null!==(s=qc(a)))return s;s=null}else if(3===c){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return el=s,null}function Ep(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hp()){case Xa:return 1;case nu:return 4;case ns:case gp:return 16;case ou:return 536870912;default:return 16}default:return 16}}var Bo=null,cs=null,Po=null;function du(){if(Po)return Po;var s,d,a=cs,c=a.length,m="value"in Bo?Bo.value:Bo.textContent,h=m.length;for(s=0;s<c&&a[s]===m[s];s++);var b=c-s;for(d=1;d<=b&&a[c-d]===m[h-d];d++);return Po=m.slice(s,1<d?1-d:void 0)}function us(s){var a=s.keyCode;return"charCode"in s?0===(s=s.charCode)&&13===a&&(s=13):s=a,10===s&&(s=13),32<=s||13===s?s:0}function ds(){return!0}function pu(){return!1}function Jt(s){function a(c,d,m,h,b){for(var k in this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=h,this.target=b,this.currentTarget=null,s)s.hasOwnProperty(k)&&(this[k]=(c=s[k])?c(h):h[k]);return this.isDefaultPrevented=(null!=h.defaultPrevented?h.defaultPrevented:!1===h.returnValue)?ds:pu,this.isPropagationStopped=pu,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():"unknown"!=typeof c.returnValue&&(c.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():"unknown"!=typeof c.cancelBubble&&(c.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),a}var fs,tl,rr,or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ps=Jt(or),ir=j({},or,{view:0,detail:0}),Ip=Jt(ir),ms=j({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(s){return void 0===s.relatedTarget?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==rr&&(rr&&"mousemove"===s.type?(fs=s.screenX-rr.screenX,tl=s.screenY-rr.screenY):tl=fs=0,rr=s),fs)},movementY:function(s){return"movementY"in s?s.movementY:tl}}),fu=Jt(ms),um=Jt(j({},ms,{dataTransfer:0})),mu=Jt(j({},ir,{relatedTarget:0})),Lo=Jt(j({},or,{animationName:0,elapsedTime:0,pseudoElement:0})),sr=j({},or,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Tp=Jt(sr),_u=Jt(j({},or,{data:0})),Rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_s={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hs(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):!!(s=_s[s])&&!!a[s]}function mi(){return hs}var gs=j({},ir,{key:function(s){if(s.key){var a=Rp[s.key]||s.key;if("Unidentified"!==a)return a}return"keypress"===s.type?13===(s=us(s))?"Enter":String.fromCharCode(s):"keydown"===s.type||"keyup"===s.type?hu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(s){return"keypress"===s.type?us(s):0},keyCode:function(s){return"keydown"===s.type||"keyup"===s.type?s.keyCode:0},which:function(s){return"keypress"===s.type?us(s):"keydown"===s.type||"keyup"===s.type?s.keyCode:0}}),nl=Jt(gs),gu=Jt(j({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),$p=Jt(j({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi})),fm=Jt(j({},or,{propertyName:0,elapsedTime:0,pseudoElement:0})),vu=j({},ms,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),vs=Jt(vu),Dp=[9,13,27,32],ol=tt&&"CompositionEvent"in window,yt=null;tt&&"documentMode"in document&&(yt=document.documentMode);var yu=tt&&"TextEvent"in window&&!yt,Op=tt&&(!ol||yt&&8<yt&&11>=yt),Vp=" ",bu=!1;function xu(s,a){switch(s){case"keyup":return-1!==Dp.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cu(s){return"object"==typeof(s=s.detail)&&"data"in s?s.data:null}var Uo=!1,Pp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return"input"===a?!!Pp[s.type]:"textarea"===a}function ku(s,a,c,d){Yc(d),0<(a=Xo(a,"onChange")).length&&(c=new ps("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var ar=null,lr=null;function Lp(s){Ou(s,0)}function ys(s){if($c(bi(s)))return s}function Up(s,a){if("change"===s)return a}var wu=!1;if(tt){var bs;if(tt){var xs="oninput"in document;if(!xs){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),xs="function"==typeof Nu.oninput}bs=xs}else bs=!1;wu=bs&&(!document.documentMode||9<document.documentMode)}function il(){ar&&(ar.detachEvent("onpropertychange",Cs),lr=ar=null)}function Cs(s){if("value"===s.propertyName&&ys(lr)){var a=[];ku(a,lr,s,Va(s)),Zc(Lp,a)}}function mm(s,a,c){"focusin"===s?(il(),lr=c,(ar=a).attachEvent("onpropertychange",Cs)):"focusout"===s&&il()}function kt(s){if("selectionchange"===s||"keyup"===s||"keydown"===s)return ys(lr)}function _m(s,a){if("click"===s)return ys(a)}function hm(s,a){if("input"===s||"change"===s)return ys(a)}var De="function"==typeof Object.is?Object.is:function Xp(s,a){return s===a&&(0!==s||1/s==1/a)||s!=s&&a!=a};function Tn(s,a){if(De(s,a))return!0;if("object"!=typeof s||null===s||"object"!=typeof a||null===a)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!pn.call(a,m)||!De(s[m],a[m]))return!1}return!0}function Eu(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ss(s,a){var d,c=Eu(s);for(s=0;c;){if(3===c.nodeType){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Eu(c)}}function rl(s,a){return!(!s||!a)&&(s===a||(!s||3!==s.nodeType)&&(a&&3===a.nodeType?rl(s,a.parentNode):"contains"in s?s.contains(a):!!s.compareDocumentPosition&&!!(16&s.compareDocumentPosition(a))))}function ks(){for(var s=window,a=Kr();a instanceof s.HTMLIFrameElement;){try{var c="string"==typeof a.contentWindow.location.href}catch{c=!1}if(!c)break;a=Kr((s=a.contentWindow).document)}return a}function sl(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&("input"===a&&("text"===s.type||"search"===s.type||"tel"===s.type||"url"===s.type||"password"===s.type)||"textarea"===a||"true"===s.contentEditable)}function Yp(s){var a=ks(),c=s.focusedElem,d=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&rl(c.ownerDocument.documentElement,c)){if(null!==d&&sl(c))if(a=d.start,void 0===(s=d.end)&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if((s=(a=c.ownerDocument||document)&&a.defaultView||window).getSelection){s=s.getSelection();var m=c.textContent.length,h=Math.min(d.start,m);d=void 0===d.end?h:Math.min(d.end,m),!s.extend&&h>d&&(m=d,d=h,h=m),m=Ss(c,h);var b=Ss(c,d);m&&b&&(1!==s.rangeCount||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&((a=a.createRange()).setStart(m.node,m.offset),s.removeAllRanges(),h>d?(s.addRange(a),s.extend(b.node,b.offset)):(a.setEnd(b.node,b.offset),s.addRange(a)))}for(a=[],s=c;s=s.parentNode;)1===s.nodeType&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for("function"==typeof c.focus&&c.focus(),c=0;c<a.length;c++)(s=a[c]).element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Iu=tt&&"documentMode"in document&&11>=document.documentMode,_i=null,ws=null,hi=null,Ns=!1;function Au(s,a,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Ns||null==_i||_i!==Kr(d)||(d="selectionStart"in(d=_i)&&sl(d)?{start:d.selectionStart,end:d.selectionEnd}:{anchorNode:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset},hi&&Tn(hi,d)||(hi=d,0<(d=Xo(ws,"onSelect")).length&&(a=new ps("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=_i)))}function Es(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var gi={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionend:Es("Transition","TransitionEnd")},al={},Tu={};function Is(s){if(al[s])return al[s];if(!gi[s])return s;var c,a=gi[s];for(c in a)if(a.hasOwnProperty(c)&&c in Tu)return al[s]=a[c];return s}tt&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);var Fu=Is("animationend"),Ru=Is("animationiteration"),ju=Is("animationstart"),Mu=Is("transitionend"),$u=new Map,Gu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(s,a){$u.set(s,a),qt(a,[s])}for(var ll=0;ll<Gu.length;ll++){var cl=Gu[ll];ho(cl.toLowerCase(),"on"+(cl[0].toUpperCase()+cl.slice(1)))}ho(Fu,"onAnimationEnd"),ho(Ru,"onAnimationIteration"),ho(ju,"onAnimationStart"),ho("dblclick","onDoubleClick"),ho("focusin","onFocus"),ho("focusout","onBlur"),ho(Mu,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),qt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qt("onBeforeInput",["compositionend","keypress","textInput","paste"]),qt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zp=new Set("cancel close invalid load scroll toggle".split(" ").concat(cr));function Du(s,a,c){var d=s.type||"unknown-event";s.currentTarget=c,function pp(s,a,c,d,m,h,b,k,F){if(dp.apply(this,arguments),qi){if(!qi)throw Error(w(198));var z=es;qi=!1,es=null,ts||(ts=!0,Ua=z)}}(d,a,void 0,s),s.currentTarget=null}function Ou(s,a){a=!!(4&a);for(var c=0;c<s.length;c++){var d=s[c],m=d.event;d=d.listeners;e:{var h=void 0;if(a)for(var b=d.length-1;0<=b;b--){var k=d[b],F=k.instance,z=k.currentTarget;if(k=k.listener,F!==h&&m.isPropagationStopped())break e;Du(m,k,z),h=F}else for(b=0;b<d.length;b++){if(F=(k=d[b]).instance,z=k.currentTarget,k=k.listener,F!==h&&m.isPropagationStopped())break e;Du(m,k,z),h=F}}}if(ts)throw s=Ua,ts=!1,Ua=null,s}function Je(s,a){var c=a[hl];void 0===c&&(c=a[hl]=new Set);var d=s+"__bubble";c.has(d)||(Vu(a,s,2,!1),c.add(d))}function ul(s,a,c){var d=0;a&&(d|=4),Vu(c,s,d,a)}var As="_reactListening"+Math.random().toString(36).slice(2);function ur(s){if(!s[As]){s[As]=!0,ht.forEach(function(c){"selectionchange"!==c&&(Zp.has(c)||ul(c,!1,s),ul(c,!0,s))});var a=9===s.nodeType?s:s.ownerDocument;null===a||a[As]||(a[As]=!0,ul("selectionchange",!1,a))}}function Vu(s,a,c,d){switch(Ep(a)){case 1:var m=Np;break;case 4:m=cm;break;default:m=Qa}c=m.bind(null,a,c,s),m=void 0,!La||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(m=!0),s.addEventListener(a,c,d?void 0===m||{capture:!0,passive:m}:void 0!==m&&{passive:m})}function Ts(s,a,c,d,m){var h=d;if(!(1&a||2&a||null===d))e:for(;;){if(null===d)return;var b=d.tag;if(3===b||4===b){var k=d.stateNode.containerInfo;if(k===m||8===k.nodeType&&k.parentNode===m)break;if(4===b)for(b=d.return;null!==b;){var F=b.tag;if((3===F||4===F)&&((F=b.stateNode.containerInfo)===m||8===F.nodeType&&F.parentNode===m))return;b=b.return}for(;null!==k;){if(null===(b=Yo(k)))return;if(5===(F=b.tag)||6===F){d=h=b;continue e}k=k.parentNode}}d=d.return}Zc(function(){var z=h,q=Va(c),K=[];e:{var W=$u.get(s);if(void 0!==W){var pe=ps,me=s;switch(s){case"keypress":if(0===us(c))break e;case"keydown":case"keyup":pe=nl;break;case"focusin":me="focus",pe=mu;break;case"focusout":me="blur",pe=mu;break;case"beforeblur":case"afterblur":pe=mu;break;case"click":if(2===c.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=$p;break;case Fu:case Ru:case ju:pe=Lo;break;case Mu:pe=fm;break;case"scroll":pe=Ip;break;case"wheel":pe=vs;break;case"copy":case"cut":case"paste":pe=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=gu}var _e=!!(4&a),Ue=!_e&&"scroll"===s,G=_e?null!==W?W+"Capture":null:W;_e=[];for(var D,R=z;null!==R;){var ne=(D=R).stateNode;if(5===D.tag&&null!==ne&&(D=ne,null!==G&&null!=(ne=Wi(R,G))&&_e.push(dr(R,ne,D))),Ue)break;R=R.return}0<_e.length&&(W=new pe(W,me,null,c,q),K.push({event:W,listeners:_e}))}}if(!(7&a)){if(pe="mouseout"===s||"pointerout"===s,(!(W="mouseover"===s||"pointerover"===s)||c===Oa||!(me=c.relatedTarget||c.fromElement)||!Yo(me)&&!me[Kn])&&(pe||W)&&(W=q.window===q?q:(W=q.ownerDocument)?W.defaultView||W.parentWindow:window,pe?(pe=z,null!==(me=(me=c.relatedTarget||c.toElement)?Yo(me):null)&&(me!==(Ue=Go(me))||5!==me.tag&&6!==me.tag)&&(me=null)):(pe=null,me=z),pe!==me)){if(_e=fu,ne="onMouseLeave",G="onMouseEnter",R="mouse",("pointerout"===s||"pointerover"===s)&&(_e=gu,ne="onPointerLeave",G="onPointerEnter",R="pointer"),Ue=null==pe?W:bi(pe),D=null==me?W:bi(me),(W=new _e(ne,R+"leave",pe,c,q)).target=Ue,W.relatedTarget=D,ne=null,Yo(q)===z&&((_e=new _e(G,R+"enter",me,c,q)).target=D,_e.relatedTarget=Ue,ne=_e),Ue=ne,pe&&me)t:{for(G=me,R=0,D=_e=pe;D;D=Jn(D))R++;for(D=0,ne=G;ne;ne=Jn(ne))D++;for(;0<R-D;)_e=Jn(_e),R--;for(;0<D-R;)G=Jn(G),D--;for(;R--;){if(_e===G||null!==G&&_e===G.alternate)break t;_e=Jn(_e),G=Jn(G)}_e=null}else _e=null;null!==pe&&zu(K,W,pe,_e,!1),null!==me&&null!==Ue&&zu(K,Ue,me,_e,!0)}if("select"===(pe=(W=z?bi(z):window).nodeName&&W.nodeName.toLowerCase())||"input"===pe&&"file"===W.type)var ge=Up;else if(Su(W))if(wu)ge=hm;else{ge=kt;var xe=mm}else(pe=W.nodeName)&&"input"===pe.toLowerCase()&&("checkbox"===W.type||"radio"===W.type)&&(ge=_m);switch(ge&&(ge=ge(s,z))?ku(K,ge,c,q):(xe&&xe(s,W,z),"focusout"===s&&(xe=W._wrapperState)&&xe.controlled&&"number"===W.type&&Ma(W,"number",W.value)),xe=z?bi(z):window,s){case"focusin":(Su(xe)||"true"===xe.contentEditable)&&(_i=xe,ws=z,hi=null);break;case"focusout":hi=ws=_i=null;break;case"mousedown":Ns=!0;break;case"contextmenu":case"mouseup":case"dragend":Ns=!1,Au(K,c,q);break;case"selectionchange":if(Iu)break;case"keydown":case"keyup":Au(K,c,q)}var Ce;if(ol)e:{switch(s){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Uo?xu(s,c)&&(Ne="onCompositionEnd"):"keydown"===s&&229===c.keyCode&&(Ne="onCompositionStart");Ne&&(Op&&"ko"!==c.locale&&(Uo||"onCompositionStart"!==Ne?"onCompositionEnd"===Ne&&Uo&&(Ce=du()):(cs="value"in(Bo=q)?Bo.value:Bo.textContent,Uo=!0)),0<(xe=Xo(z,Ne)).length&&(Ne=new _u(Ne,s,null,c,q),K.push({event:Ne,listeners:xe}),(Ce||null!==(Ce=Cu(c)))&&(Ne.data=Ce))),(Ce=yu?function zp(s,a){switch(s){case"compositionend":return Cu(a);case"keypress":return 32!==a.which?null:(bu=!0,Vp);case"textInput":return(s=a.data)===Vp&&bu?null:s;default:return null}}(s,c):function Bp(s,a){if(Uo)return"compositionend"===s||!ol&&xu(s,a)?(s=du(),Po=cs=Bo=null,Uo=!1,s):null;switch(s){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Op&&"ko"!==a.locale?null:a.data}}(s,c))&&0<(z=Xo(z,"onBeforeInput")).length&&(q=new _u("onBeforeInput","beforeinput",null,c,q),K.push({event:q,listeners:z}),q.data=Ce)}Ou(K,a)})}function dr(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Xo(s,a){for(var c=a+"Capture",d=[];null!==s;){var m=s,h=m.stateNode;5===m.tag&&null!==h&&(m=h,null!=(h=Wi(s,c))&&d.unshift(dr(s,h,m)),null!=(h=Wi(s,a))&&d.push(dr(s,h,m))),s=s.return}return d}function Jn(s){if(null===s)return null;do{s=s.return}while(s&&5!==s.tag);return s||null}function zu(s,a,c,d,m){for(var h=a._reactName,b=[];null!==c&&c!==d;){var k=c,F=k.alternate,z=k.stateNode;if(null!==F&&F===d)break;5===k.tag&&null!==z&&(k=z,m?null!=(F=Wi(c,h))&&b.unshift(dr(c,F,k)):m||null!=(F=Wi(c,h))&&b.push(dr(c,F,k))),c=c.return}0!==b.length&&s.push({event:a,listeners:b})}var Bu=/\r\n?/g,qp=/\u0000|\uFFFD/g;function Pu(s){return("string"==typeof s?s:""+s).replace(Bu,"\n").replace(qp,"")}function Fs(s,a,c){if(a=Pu(a),Pu(s)!==a&&c)throw Error(w(425))}function Rs(){}var dl=null,pl=null;function fl(s,a){return"textarea"===s||"noscript"===s||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var ml="function"==typeof setTimeout?setTimeout:void 0,Jp="function"==typeof clearTimeout?clearTimeout:void 0,Lu="function"==typeof Promise?Promise:void 0,Kp="function"==typeof queueMicrotask?queueMicrotask:typeof Lu<"u"?function(s){return Lu.resolve(null).then(s).catch(Qp)}:ml;function Qp(s){setTimeout(function(){throw s})}function _l(s,a){var c=a,d=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&8===m.nodeType)if("/$"===(c=m.data)){if(0===d)return s.removeChild(m),void zo(a);d--}else"$"!==c&&"$?"!==c&&"$!"!==c||d++;c=m}while(c);zo(a)}function go(s){for(;null!=s;s=s.nextSibling){var a=s.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=s.data)||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return s}function Uu(s){s=s.previousSibling;for(var a=0;s;){if(8===s.nodeType){var c=s.data;if("$"===c||"$!"===c||"$?"===c){if(0===a)return s;a--}else"/$"===c&&a++}s=s.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Bn="__reactFiber$"+vi,yi="__reactProps$"+vi,Kn="__reactContainer$"+vi,hl="__reactEvents$"+vi,ef="__reactListeners$"+vi,tf="__reactHandles$"+vi;function Yo(s){var a=s[Bn];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Kn]||c[Bn]){if(c=a.alternate,null!==a.child||null!==c&&null!==c.child)for(s=Uu(s);null!==s;){if(c=s[Bn])return c;s=Uu(s)}return a}c=(s=c).parentNode}return null}function pr(s){return!(s=s[Bn]||s[Kn])||5!==s.tag&&6!==s.tag&&13!==s.tag&&3!==s.tag?null:s}function bi(s){if(5===s.tag||6===s.tag)return s.stateNode;throw Error(w(33))}function js(s){return s[yi]||null}var gl=[],xi=-1;function vo(s){return{current:s}}function Ke(s){0>xi||(s.current=gl[xi],gl[xi]=null,xi--)}function Ze(s,a){xi++,gl[xi]=s.current,s.current=a}var yo={},Lt=vo(yo),sn=vo(!1),Ho=yo;function Ci(s,a){var c=s.type.contextTypes;if(!c)return yo;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===a)return d.__reactInternalMemoizedMaskedChildContext;var h,m={};for(h in c)m[h]=a[h];return d&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function an(s){return null!=s.childContextTypes}function Ms(){Ke(sn),Ke(Lt)}function Xu(s,a,c){if(Lt.current!==yo)throw Error(w(168));Ze(Lt,a),Ze(sn,c)}function Yu(s,a,c){var d=s.stateNode;if(a=a.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var m in d=d.getChildContext())if(!(m in a))throw Error(w(108,pt(s)||"Unknown",m));return j({},c,d)}function $s(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||yo,Ho=Lt.current,Ze(Lt,s),Ze(sn,sn.current),!0}function Hu(s,a,c){var d=s.stateNode;if(!d)throw Error(w(169));c?(s=Yu(s,a,Ho),d.__reactInternalMemoizedMergedChildContext=s,Ke(sn),Ke(Lt),Ze(Lt,s)):Ke(sn),Ze(sn,c)}var Qn=null,Gs=!1,vl=!1;function Wu(s){null===Qn?Qn=[s]:Qn.push(s)}function bo(){if(!vl&&null!==Qn){vl=!0;var s=0,a=Le;try{var c=Qn;for(Le=1;s<c.length;s++){var d=c[s];do{d=d(!0)}while(null!==d)}Qn=null,Gs=!1}catch(m){throw null!==Qn&&(Qn=Qn.slice(s+1)),eu(Xa,bo),m}finally{Le=a,vl=!1}}return null}var Si=[],ki=0,Ds=null,wi=0,bn=[],xn=0,S=null,it=1,eo="";function xo(s,a){Si[ki++]=wi,Si[ki++]=Ds,Ds=s,wi=a}function yl(s,a,c){bn[xn++]=it,bn[xn++]=eo,bn[xn++]=S,S=s;var d=it;s=eo;var m=32-An(d)-1;d&=~(1<<m),c+=1;var h=32-An(a)+m;if(30<h){var b=m-m%5;h=(d&(1<<b)-1).toString(32),d>>=b,m-=b,it=1<<32-An(a)+m|c<<m|d,eo=h+s}else it=1<<h|c<<m|d,eo=s}function Zu(s){null!==s.return&&(xo(s,1),yl(s,1,0))}function bl(s){for(;s===Ds;)Ds=Si[--ki],Si[ki]=null,wi=Si[--ki],Si[ki]=null;for(;s===S;)S=bn[--xn],bn[xn]=null,eo=bn[--xn],bn[xn]=null,it=bn[--xn],bn[xn]=null}var fn=null,mn=null,Qe=!1,Cn=null;function qu(s,a){var c=In(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,null===(a=s.deletions)?(s.deletions=[c],s.flags|=16):a.push(c)}function At(s,a){switch(s.tag){case 5:var c=s.type;return null!==(a=1!==a.nodeType||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(s.stateNode=a,fn=s,mn=go(a.firstChild),!0);case 6:return null!==(a=""===s.pendingProps||3!==a.nodeType?null:a)&&(s.stateNode=a,fn=s,mn=null,!0);case 13:return null!==(a=8!==a.nodeType?null:a)&&(s.memoizedState={dehydrated:a,treeContext:c=null!==S?{id:it,overflow:eo}:null,retryLane:1073741824},(c=In(18,null,null,0)).stateNode=a,c.return=s,s.child=c,fn=s,mn=null,!0);default:return!1}}function Ju(s){return!(!(1&s.mode)||128&s.flags)}function xl(s){if(Qe){var a=mn;if(a){var c=a;if(!At(s,a)){if(Ju(s))throw Error(w(418));a=go(c.nextSibling);var d=fn;a&&At(s,a)?qu(d,c):(s.flags=-4097&s.flags|2,Qe=!1,fn=s)}}else{if(Ju(s))throw Error(w(418));s.flags=-4097&s.flags|2,Qe=!1,fn=s}}}function Cl(s){for(s=s.return;null!==s&&5!==s.tag&&3!==s.tag&&13!==s.tag;)s=s.return;fn=s}function Wo(s){if(s!==fn)return!1;if(!Qe)return Cl(s),Qe=!0,!1;var a;if((a=3!==s.tag)&&!(a=5!==s.tag)&&(a="head"!==(a=s.type)&&"body"!==a&&!fl(s.type,s.memoizedProps)),a&&(a=mn)){if(Ju(s))throw Ku(),Error(w(418));for(;a;)qu(s,a),a=go(a.nextSibling)}if(Cl(s),13===s.tag){if(!(s=null!==(s=s.memoizedState)?s.dehydrated:null))throw Error(w(317));e:{for(s=s.nextSibling,a=0;s;){if(8===s.nodeType){var c=s.data;if("/$"===c){if(0===a){mn=go(s.nextSibling);break e}a--}else"$"!==c&&"$!"!==c&&"$?"!==c||a++}s=s.nextSibling}mn=null}}else mn=fn?go(s.stateNode.nextSibling):null;return!0}function Ku(){for(var s=mn;s;)s=go(s.nextSibling)}function Ni(){mn=fn=null,Qe=!1}function Os(s){null===Cn?Cn=[s]:Cn.push(s)}var Sl=Pe.ReactCurrentBatchConfig;function fr(s,a,c){if(null!==(s=c.ref)&&"function"!=typeof s&&"object"!=typeof s){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(w(309));var d=c.stateNode}if(!d)throw Error(w(147,s));var m=d,h=""+s;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===h?a.ref:((a=function(b){var k=m.refs;null===b?delete k[h]:k[h]=b})._stringRef=h,a)}if("string"!=typeof s)throw Error(w(284));if(!c._owner)throw Error(w(290,s))}return s}function Ei(s,a){throw s=Object.prototype.toString.call(a),Error(w(31,"[object Object]"===s?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Qu(s){return(0,s._init)(s._payload)}function ed(s){function a(G,R){if(s){var D=G.deletions;null===D?(G.deletions=[R],G.flags|=16):D.push(R)}}function c(G,R){if(!s)return null;for(;null!==R;)a(G,R),R=R.sibling;return null}function d(G,R){for(G=new Map;null!==R;)G.set(null!==R.key?R.key:R.index,R),R=R.sibling;return G}function m(G,R){return(G=Io(G,R)).index=0,G.sibling=null,G}function h(G,R,D){return G.index=D,s?null!==(D=G.alternate)?(D=D.index)<R?(G.flags|=2,R):D:(G.flags|=2,R):(G.flags|=1048576,R)}function b(G){return s&&null===G.alternate&&(G.flags|=2),G}function k(G,R,D,ne){return null===R||6!==R.tag?((R=vc(D,G.mode,ne)).return=G,R):((R=m(R,D)).return=G,R)}function F(G,R,D,ne){var ge=D.type;return ge===dt?q(G,R,D.props.children,ne,D.key):null!==R&&(R.elementType===ge||"object"==typeof ge&&null!==ge&&ge.$$typeof===ee&&Qu(ge)===R.type)?((ne=m(R,D.props)).ref=fr(G,R,D),ne.return=G,ne):((ne=la(D.type,D.key,D.props,null,G.mode,ne)).ref=fr(G,R,D),ne.return=G,ne)}function z(G,R,D,ne){return null===R||4!==R.tag||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?((R=yc(D,G.mode,ne)).return=G,R):((R=m(R,D.children||[])).return=G,R)}function q(G,R,D,ne,ge){return null===R||7!==R.tag?((R=li(D,G.mode,ne,ge)).return=G,R):((R=m(R,D)).return=G,R)}function K(G,R,D){if("string"==typeof R&&""!==R||"number"==typeof R)return(R=vc(""+R,G.mode,D)).return=G,R;if("object"==typeof R&&null!==R){switch(R.$$typeof){case $t:return(D=la(R.type,R.key,R.props,null,G.mode,D)).ref=fr(G,null,R),D.return=G,D;case $e:return(R=yc(R,G.mode,D)).return=G,R;case ee:return K(G,(0,R._init)(R._payload),D)}if(Xi(R)||Ve(R))return(R=li(R,G.mode,D,null)).return=G,R;Ei(G,R)}return null}function W(G,R,D,ne){var ge=null!==R?R.key:null;if("string"==typeof D&&""!==D||"number"==typeof D)return null!==ge?null:k(G,R,""+D,ne);if("object"==typeof D&&null!==D){switch(D.$$typeof){case $t:return D.key===ge?F(G,R,D,ne):null;case $e:return D.key===ge?z(G,R,D,ne):null;case ee:return W(G,R,(ge=D._init)(D._payload),ne)}if(Xi(D)||Ve(D))return null!==ge?null:q(G,R,D,ne,null);Ei(G,D)}return null}function pe(G,R,D,ne,ge){if("string"==typeof ne&&""!==ne||"number"==typeof ne)return k(R,G=G.get(D)||null,""+ne,ge);if("object"==typeof ne&&null!==ne){switch(ne.$$typeof){case $t:return F(R,G=G.get(null===ne.key?D:ne.key)||null,ne,ge);case $e:return z(R,G=G.get(null===ne.key?D:ne.key)||null,ne,ge);case ee:return pe(G,R,D,(0,ne._init)(ne._payload),ge)}if(Xi(ne)||Ve(ne))return q(R,G=G.get(D)||null,ne,ge,null);Ei(R,ne)}return null}return function Ue(G,R,D,ne){if("object"==typeof D&&null!==D&&D.type===dt&&null===D.key&&(D=D.props.children),"object"==typeof D&&null!==D){switch(D.$$typeof){case $t:e:{for(var ge=D.key,xe=R;null!==xe;){if(xe.key===ge){if((ge=D.type)===dt){if(7===xe.tag){c(G,xe.sibling),(R=m(xe,D.props.children)).return=G,G=R;break e}}else if(xe.elementType===ge||"object"==typeof ge&&null!==ge&&ge.$$typeof===ee&&Qu(ge)===xe.type){c(G,xe.sibling),(R=m(xe,D.props)).ref=fr(G,xe,D),R.return=G,G=R;break e}c(G,xe);break}a(G,xe),xe=xe.sibling}D.type===dt?((R=li(D.props.children,G.mode,ne,D.key)).return=G,G=R):((ne=la(D.type,D.key,D.props,null,G.mode,ne)).ref=fr(G,R,D),ne.return=G,G=ne)}return b(G);case $e:e:{for(xe=D.key;null!==R;){if(R.key===xe){if(4===R.tag&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){c(G,R.sibling),(R=m(R,D.children||[])).return=G,G=R;break e}c(G,R);break}a(G,R),R=R.sibling}(R=yc(D,G.mode,ne)).return=G,G=R}return b(G);case ee:return Ue(G,R,(xe=D._init)(D._payload),ne)}if(Xi(D))return function me(G,R,D,ne){for(var ge=null,xe=null,Ce=R,Ne=R=0,jt=null;null!==Ce&&Ne<D.length;Ne++){Ce.index>Ne?(jt=Ce,Ce=null):jt=Ce.sibling;var Ge=W(G,Ce,D[Ne],ne);if(null===Ge){null===Ce&&(Ce=jt);break}s&&Ce&&null===Ge.alternate&&a(G,Ce),R=h(Ge,R,Ne),null===xe?ge=Ge:xe.sibling=Ge,xe=Ge,Ce=jt}if(Ne===D.length)return c(G,Ce),Qe&&xo(G,Ne),ge;if(null===Ce){for(;Ne<D.length;Ne++)null!==(Ce=K(G,D[Ne],ne))&&(R=h(Ce,R,Ne),null===xe?ge=Ce:xe.sibling=Ce,xe=Ce);return Qe&&xo(G,Ne),ge}for(Ce=d(G,Ce);Ne<D.length;Ne++)null!==(jt=pe(Ce,G,Ne,D[Ne],ne))&&(s&&null!==jt.alternate&&Ce.delete(null===jt.key?Ne:jt.key),R=h(jt,R,Ne),null===xe?ge=jt:xe.sibling=jt,xe=jt);return s&&Ce.forEach(function(Ao){return a(G,Ao)}),Qe&&xo(G,Ne),ge}(G,R,D,ne);if(Ve(D))return function _e(G,R,D,ne){var ge=Ve(D);if("function"!=typeof ge)throw Error(w(150));if(null==(D=ge.call(D)))throw Error(w(151));for(var xe=ge=null,Ce=R,Ne=R=0,jt=null,Ge=D.next();null!==Ce&&!Ge.done;Ne++,Ge=D.next()){Ce.index>Ne?(jt=Ce,Ce=null):jt=Ce.sibling;var Ao=W(G,Ce,Ge.value,ne);if(null===Ao){null===Ce&&(Ce=jt);break}s&&Ce&&null===Ao.alternate&&a(G,Ce),R=h(Ao,R,Ne),null===xe?ge=Ao:xe.sibling=Ao,xe=Ao,Ce=jt}if(Ge.done)return c(G,Ce),Qe&&xo(G,Ne),ge;if(null===Ce){for(;!Ge.done;Ne++,Ge=D.next())null!==(Ge=K(G,Ge.value,ne))&&(R=h(Ge,R,Ne),null===xe?ge=Ge:xe.sibling=Ge,xe=Ge);return Qe&&xo(G,Ne),ge}for(Ce=d(G,Ce);!Ge.done;Ne++,Ge=D.next())null!==(Ge=pe(Ce,G,Ne,Ge.value,ne))&&(s&&null!==Ge.alternate&&Ce.delete(null===Ge.key?Ne:Ge.key),R=h(Ge,R,Ne),null===xe?ge=Ge:xe.sibling=Ge,xe=Ge);return s&&Ce.forEach(function(lo){return a(G,lo)}),Qe&&xo(G,Ne),ge}(G,R,D,ne);Ei(G,D)}return"string"==typeof D&&""!==D||"number"==typeof D?(D=""+D,null!==R&&6===R.tag?(c(G,R.sibling),(R=m(R,D)).return=G,G=R):(c(G,R),(R=vc(D,G.mode,ne)).return=G,G=R),b(G)):c(G,R)}}var Ii=ed(!0),kl=ed(!1),Vs=vo(null),zs=null,Zo=null,Bs=null;function wl(){Bs=Zo=zs=null}function Nl(s){var a=Vs.current;Ke(Vs),s._currentValue=a}function El(s,a,c){for(;null!==s;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,null!==d&&(d.childLanes|=a)):null!==d&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function Ai(s,a){zs=s,Bs=Zo=null,null!==(s=s.dependencies)&&null!==s.firstContext&&(s.lanes&a&&(Ft=!0),s.firstContext=null)}function Sn(s){var a=s._currentValue;if(Bs!==s)if(s={context:s,memoizedValue:a,next:null},null===Zo){if(null===zs)throw Error(w(308));Zo=s,zs.dependencies={lanes:0,firstContext:s}}else Zo=Zo.next=s;return a}var qo=null;function Il(s){null===qo?qo=[s]:qo.push(s)}function td(s,a,c,d){var m=a.interleaved;return null===m?(c.next=c,Il(a)):(c.next=m.next,m.next=c),a.interleaved=c,to(s,d)}function to(s,a){s.lanes|=a;var c=s.alternate;for(null!==c&&(c.lanes|=a),c=s,s=s.return;null!==s;)s.childLanes|=a,null!==(c=s.alternate)&&(c.childLanes|=a),c=s,s=s.return;return 3===c.tag?c.stateNode:null}var no=!1;function Al(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mr(s,a){a.updateQueue===(s=s.updateQueue)&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function oo(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Co(s,a,c){var d=s.updateQueue;if(null===d)return null;if(d=d.shared,2&Re){var m=d.pending;return null===m?a.next=a:(a.next=m.next,m.next=a),d.pending=a,to(s,c)}return null===(m=d.interleaved)?(a.next=a,Il(d)):(a.next=m.next,m.next=a),d.interleaved=a,to(s,c)}function Ps(s,a,c){if(null!==(a=a.updateQueue)&&(a=a.shared,4194240&c)){var d=a.lanes;a.lanes=c|=d&=s.pendingLanes,as(s,c)}}function nd(s,a){var c=s.updateQueue,d=s.alternate;if(null===d||c!==(d=d.updateQueue))null===(s=c.lastBaseUpdate)?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a;else{var m=null,h=null;if(null!==(c=c.firstBaseUpdate)){do{var b={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===h?m=h=b:h=h.next=b,c=c.next}while(null!==c);null===h?m=h=a:h=h.next=a}else m=h=a;s.updateQueue=c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:h,shared:d.shared,effects:d.effects}}}function Ls(s,a,c,d){var m=s.updateQueue;no=!1;var h=m.firstBaseUpdate,b=m.lastBaseUpdate,k=m.shared.pending;if(null!==k){m.shared.pending=null;var F=k,z=F.next;F.next=null,null===b?h=z:b.next=z,b=F;var q=s.alternate;null!==q&&(k=(q=q.updateQueue).lastBaseUpdate)!==b&&(null===k?q.firstBaseUpdate=z:k.next=z,q.lastBaseUpdate=F)}if(null!==h){var K=m.baseState;for(b=0,q=z=F=null,k=h;;){var W=k.lane,pe=k.eventTime;if((d&W)===W){null!==q&&(q=q.next={eventTime:pe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var me=s,_e=k;switch(W=a,pe=c,_e.tag){case 1:if("function"==typeof(me=_e.payload)){K=me.call(pe,K,W);break e}K=me;break e;case 3:me.flags=-65537&me.flags|128;case 0:if(null==(W="function"==typeof(me=_e.payload)?me.call(pe,K,W):me))break e;K=j({},K,W);break e;case 2:no=!0}}null!==k.callback&&0!==k.lane&&(s.flags|=64,null===(W=m.effects)?m.effects=[k]:W.push(k))}else pe={eventTime:pe,lane:W,tag:k.tag,payload:k.payload,callback:k.callback,next:null},null===q?(z=q=pe,F=K):q=q.next=pe,b|=W;if(null===(k=k.next)){if(null===(k=m.shared.pending))break;k=(W=k).next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}if(null===q&&(F=K),m.baseState=F,m.firstBaseUpdate=z,m.lastBaseUpdate=q,null!==(a=m.shared.interleaved)){m=a;do{b|=m.lane,m=m.next}while(m!==a)}else null===h&&(m.shared.lanes=0);ri|=b,s.lanes=b,s.memoizedState=K}}function od(s,a,c){if(s=a.effects,a.effects=null,null!==s)for(a=0;a<s.length;a++){var d=s[a],m=d.callback;if(null!==m){if(d.callback=null,d=c,"function"!=typeof m)throw Error(w(191,m));m.call(d)}}}var _r={},Pn=vo(_r),hr=vo(_r),gr=vo(_r);function Jo(s){if(s===_r)throw Error(w(174));return s}function Tl(s,a){switch(Ze(gr,a),Ze(hr,s),Ze(Pn,_r),s=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:$a(null,"");break;default:a=$a(a=(s=8===s?a.parentNode:a).namespaceURI||null,s=s.tagName)}Ke(Pn),Ze(Pn,a)}function Ti(){Ke(Pn),Ke(hr),Ke(gr)}function id(s){Jo(gr.current);var a=Jo(Pn.current),c=$a(a,s.type);a!==c&&(Ze(hr,s),Ze(Pn,c))}function Fl(s){hr.current===s&&(Ke(Pn),Ke(hr))}var rt=vo(0);function Us(s){for(var a=s;null!==a;){if(13===a.tag){var c=a.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===s)break;for(;null===a.sibling;){if(null===a.return||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Rl=[];function vr(){for(var s=0;s<Rl.length;s++)Rl[s]._workInProgressVersionPrimary=null;Rl.length=0}var yr=Pe.ReactCurrentDispatcher,Fi=Pe.ReactCurrentBatchConfig,Ko=0,st=null,wt=null,Tt=null,Xs=!1,br=!1,xr=0,rd=0;function Ut(){throw Error(w(321))}function jl(s,a){if(null===a)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!De(s[c],a[c]))return!1;return!0}function Ml(s,a,c,d,m,h){if(Ko=h,st=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,yr.current=null===s||null===s.memoizedState?af:lf,s=c(d,m),br){h=0;do{if(br=!1,xr=0,25<=h)throw Error(w(301));h+=1,Tt=wt=null,a.updateQueue=null,yr.current=cf,s=c(d,m)}while(br)}if(yr.current=Zs,a=null!==wt&&null!==wt.next,Ko=0,Tt=wt=st=null,Xs=!1,a)throw Error(w(300));return s}function $l(){var s=0!==xr;return xr=0,s}function Kt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Tt?st.memoizedState=Tt=s:Tt=Tt.next=s,Tt}function kn(){if(null===wt){var s=st.alternate;s=null!==s?s.memoizedState:null}else s=wt.next;var a=null===Tt?st.memoizedState:Tt.next;if(null!==a)Tt=a,wt=s;else{if(null===s)throw Error(w(310));s={memoizedState:(wt=s).memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},null===Tt?st.memoizedState=Tt=s:Tt=Tt.next=s}return Tt}function Cr(s,a){return"function"==typeof a?a(s):a}function Gl(s){var a=kn(),c=a.queue;if(null===c)throw Error(w(311));c.lastRenderedReducer=s;var d=wt,m=d.baseQueue,h=c.pending;if(null!==h){if(null!==m){var b=m.next;m.next=h.next,h.next=b}d.baseQueue=m=h,c.pending=null}if(null!==m){d=d.baseState;var k=b=null,F=null,z=h=m.next;do{var q=z.lane;if((Ko&q)===q)null!==F&&(F=F.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),d=z.hasEagerState?z.eagerState:s(d,z.action);else{var K={lane:q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};null===F?(k=F=K,b=d):F=F.next=K,st.lanes|=q,ri|=q}z=z.next}while(null!==z&&z!==h);null===F?b=d:F.next=k,De(d,a.memoizedState)||(Ft=!0),a.memoizedState=d,a.baseState=b,a.baseQueue=F,c.lastRenderedState=d}if(null!==(s=c.interleaved)){m=s;do{st.lanes|=h=m.lane,ri|=h,m=m.next}while(m!==s)}else null===m&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Dl(s){var a=kn(),c=a.queue;if(null===c)throw Error(w(311));c.lastRenderedReducer=s;var d=c.dispatch,m=c.pending,h=a.memoizedState;if(null!==m){c.pending=null;var b=m=m.next;do{h=s(h,b.action),b=b.next}while(b!==m);De(h,a.memoizedState)||(Ft=!0),a.memoizedState=h,null===a.baseQueue&&(a.baseState=h),c.lastRenderedState=h}return[h,d]}function Ol(){}function Ys(s,a){var c=st,d=kn(),m=a(),h=!De(d.memoizedState,m);if(h&&(d.memoizedState=m,Ft=!0),Pl(Bl.bind(null,c,d=d.queue,s),[s]),d.getSnapshot!==a||h||null!==Tt&&1&Tt.memoizedState.tag){if(c.flags|=2048,Sr(9,zl.bind(null,c,d,m,a),void 0,null),null===ft)throw Error(w(349));30&Ko||Vl(c,a,m)}return m}function Vl(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},null===(a=st.updateQueue)?(st.updateQueue=a={lastEffect:null,stores:null},a.stores=[s]):null===(c=a.stores)?a.stores=[s]:c.push(s)}function zl(s,a,c,d){a.value=c,a.getSnapshot=d,sd(a)&&ad(s)}function Bl(s,a,c){return c(function(){sd(a)&&ad(s)})}function sd(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!De(s,c)}catch{return!0}}function ad(s){var a=to(s,1);null!==a&&zt(a,s,1,-1)}function ld(s){var a=Kt();return"function"==typeof s&&(s=s()),a.memoizedState=a.baseState=s,a.queue=s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:s},s=s.dispatch=sf.bind(null,st,s),[a.memoizedState,s]}function Sr(s,a,c,d){return s={tag:s,create:a,destroy:c,deps:d,next:null},null===(a=st.updateQueue)?(st.updateQueue=a={lastEffect:null,stores:null},a.lastEffect=s.next=s):null===(c=a.lastEffect)?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s),s}function cd(){return kn().memoizedState}function Hs(s,a,c,d){var m=Kt();st.flags|=s,m.memoizedState=Sr(1|a,c,void 0,void 0===d?null:d)}function Ws(s,a,c,d){var m=kn();d=void 0===d?null:d;var h=void 0;if(null!==wt){var b=wt.memoizedState;if(h=b.destroy,null!==d&&jl(d,b.deps))return void(m.memoizedState=Sr(a,c,h,d))}st.flags|=s,m.memoizedState=Sr(1|a,c,h,d)}function ud(s,a){return Hs(8390656,8,s,a)}function Pl(s,a){return Ws(2048,8,s,a)}function dd(s,a){return Ws(4,2,s,a)}function pd(s,a){return Ws(4,4,s,a)}function fd(s,a){return"function"==typeof a?(s=s(),a(s),function(){a(null)}):null!=a?(s=s(),a.current=s,function(){a.current=null}):void 0}function md(s,a,c){return c=null!=c?c.concat([s]):null,Ws(4,4,fd.bind(null,a,s),c)}function Ll(){}function _d(s,a){var c=kn();a=void 0===a?null:a;var d=c.memoizedState;return null!==d&&null!==a&&jl(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function hd(s,a){var c=kn();a=void 0===a?null:a;var d=c.memoizedState;return null!==d&&null!==a&&jl(a,d[1])?d[0]:(s=s(),c.memoizedState=[s,a],s)}function gd(s,a,c){return 21&Ko?(De(c,a)||(c=iu(),st.lanes|=c,ri|=c,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,Ft=!0),s.memoizedState=c)}function of(s,a){var c=Le;Le=0!==c&&4>c?c:4,s(!0);var d=Fi.transition;Fi.transition={};try{s(!1),a()}finally{Le=c,Fi.transition=d}}function Ul(){return kn().memoizedState}function rf(s,a,c){var d=$n(s);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},vd(s)?yd(a,c):null!==(c=td(s,a,c,d))&&(zt(c,s,d,Wt()),bd(c,a,d))}function sf(s,a,c){var d=$n(s),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(vd(s))yd(a,m);else{var h=s.alternate;if(0===s.lanes&&(null===h||0===h.lanes)&&null!==(h=a.lastRenderedReducer))try{var b=a.lastRenderedState,k=h(b,c);if(m.hasEagerState=!0,m.eagerState=k,De(k,b)){var F=a.interleaved;return null===F?(m.next=m,Il(a)):(m.next=F.next,F.next=m),void(a.interleaved=m)}}catch{}null!==(c=td(s,a,m,d))&&(zt(c,s,d,m=Wt()),bd(c,a,d))}}function vd(s){var a=s.alternate;return s===st||null!==a&&a===st}function yd(s,a){br=Xs=!0;var c=s.pending;null===c?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function bd(s,a,c){if(4194240&c){var d=a.lanes;a.lanes=c|=d&=s.pendingLanes,as(s,c)}}var Zs={readContext:Sn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},af={readContext:Sn,useCallback:function(s,a){return Kt().memoizedState=[s,void 0===a?null:a],s},useContext:Sn,useEffect:ud,useImperativeHandle:function(s,a,c){return c=null!=c?c.concat([s]):null,Hs(4194308,4,fd.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Hs(4194308,4,s,a)},useInsertionEffect:function(s,a){return Hs(4,2,s,a)},useMemo:function(s,a){var c=Kt();return a=void 0===a?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var d=Kt();return a=void 0!==c?c(a):a,d.memoizedState=d.baseState=a,d.queue=s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},s=s.dispatch=rf.bind(null,st,s),[d.memoizedState,s]},useRef:function(s){return Kt().memoizedState={current:s}},useState:ld,useDebugValue:Ll,useDeferredValue:function(s){return Kt().memoizedState=s},useTransition:function(){var s=ld(!1),a=s[0];return s=of.bind(null,s[1]),Kt().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var d=st,m=Kt();if(Qe){if(void 0===c)throw Error(w(407));c=c()}else{if(c=a(),null===ft)throw Error(w(349));30&Ko||Vl(d,a,c)}m.memoizedState=c;var h={value:c,getSnapshot:a};return m.queue=h,ud(Bl.bind(null,d,h,s),[s]),d.flags|=2048,Sr(9,zl.bind(null,d,h,c,a),void 0,null),c},useId:function(){var s=Kt(),a=ft.identifierPrefix;if(Qe){var c=eo;a=":"+a+"R"+(c=(it&~(1<<32-An(it)-1)).toString(32)+c),0<(c=xr++)&&(a+="H"+c.toString(32)),a+=":"}else a=":"+a+"r"+(c=rd++).toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},lf={readContext:Sn,useCallback:_d,useContext:Sn,useEffect:Pl,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:hd,useReducer:Gl,useRef:cd,useState:function(){return Gl(Cr)},useDebugValue:Ll,useDeferredValue:function(s){return gd(kn(),wt.memoizedState,s)},useTransition:function(){return[Gl(Cr)[0],kn().memoizedState]},useMutableSource:Ol,useSyncExternalStore:Ys,useId:Ul,unstable_isNewReconciler:!1},cf={readContext:Sn,useCallback:_d,useContext:Sn,useEffect:Pl,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:hd,useReducer:Dl,useRef:cd,useState:function(){return Dl(Cr)},useDebugValue:Ll,useDeferredValue:function(s){var a=kn();return null===wt?a.memoizedState=s:gd(a,wt.memoizedState,s)},useTransition:function(){return[Dl(Cr)[0],kn().memoizedState]},useMutableSource:Ol,useSyncExternalStore:Ys,useId:Ul,unstable_isNewReconciler:!1};function Fn(s,a){if(s&&s.defaultProps){for(var c in a=j({},a),s=s.defaultProps)void 0===a[c]&&(a[c]=s[c]);return a}return a}function Xl(s,a,c,d){c=null==(c=c(d,a=s.memoizedState))?a:j({},a,c),s.memoizedState=c,0===s.lanes&&(s.updateQueue.baseState=c)}var qs={isMounted:function(s){return!!(s=s._reactInternals)&&Go(s)===s},enqueueSetState:function(s,a,c){s=s._reactInternals;var d=Wt(),m=$n(s),h=oo(d,m);h.payload=a,null!=c&&(h.callback=c),null!==(a=Co(s,h,m))&&(zt(a,s,m,d),Ps(a,s,m))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=Wt(),m=$n(s),h=oo(d,m);h.tag=1,h.payload=a,null!=c&&(h.callback=c),null!==(a=Co(s,h,m))&&(zt(a,s,m,d),Ps(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Wt(),d=$n(s),m=oo(c,d);m.tag=2,null!=a&&(m.callback=a),null!==(a=Co(s,m,d))&&(zt(a,s,d,c),Ps(a,s,d))}};function xd(s,a,c,d,m,h,b){return"function"==typeof(s=s.stateNode).shouldComponentUpdate?s.shouldComponentUpdate(d,h,b):!(a.prototype&&a.prototype.isPureReactComponent&&Tn(c,d)&&Tn(m,h))}function Cd(s,a,c){var d=!1,m=yo,h=a.contextType;return"object"==typeof h&&null!==h?h=Sn(h):(m=an(a)?Ho:Lt.current,h=(d=null!=(d=a.contextTypes))?Ci(s,m):yo),a=new a(c,h),s.memoizedState=null!=a.state?a.state:null,a.updater=qs,s.stateNode=a,a._reactInternals=s,d&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=h),a}function Yl(s,a,c,d){s=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(c,d),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&qs.enqueueReplaceState(a,a.state,null)}function Hl(s,a,c,d){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},Al(s);var h=a.contextType;"object"==typeof h&&null!==h?m.context=Sn(h):(h=an(a)?Ho:Lt.current,m.context=Ci(s,h)),m.state=s.memoizedState,"function"==typeof(h=a.getDerivedStateFromProps)&&(Xl(s,a,h,c),m.state=s.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof m.getSnapshotBeforeUpdate||"function"!=typeof m.UNSAFE_componentWillMount&&"function"!=typeof m.componentWillMount||(a=m.state,"function"==typeof m.componentWillMount&&m.componentWillMount(),"function"==typeof m.UNSAFE_componentWillMount&&m.UNSAFE_componentWillMount(),a!==m.state&&qs.enqueueReplaceState(m,m.state,null),Ls(s,c,m,d),m.state=s.memoizedState),"function"==typeof m.componentDidMount&&(s.flags|=4194308)}function Ri(s,a){try{var c="",d=a;do{c+=Ye(d),d=d.return}while(d);var m=c}catch(h){m="\nError generating stack: "+h.message+"\n"+h.stack}return{value:s,source:a,stack:m,digest:null}}function Wl(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}function Zl(s,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var Sd="function"==typeof WeakMap?WeakMap:Map;function ln(s,a,c){(c=oo(-1,c)).tag=3,c.payload={element:null};var d=a.value;return c.callback=function(){na||(na=!0,oa=d),Zl(0,a)},c}function ql(s,a,c){(c=oo(-1,c)).tag=3;var d=s.type.getDerivedStateFromError;if("function"==typeof d){var m=a.value;c.payload=function(){return d(m)},c.callback=function(){Zl(0,a)}}var h=s.stateNode;return null!==h&&"function"==typeof h.componentDidCatch&&(c.callback=function(){Zl(0,a),"function"!=typeof d&&(null===En?En=new Set([this]):En.add(this));var b=a.stack;this.componentDidCatch(a.value,{componentStack:null!==b?b:""})}),c}function kd(s,a,c){var d=s.pingCache;if(null===d){d=s.pingCache=new Sd;var m=new Set;d.set(a,m)}else void 0===(m=d.get(a))&&d.set(a,m=new Set);m.has(c)||(m.add(c),s=_f.bind(null,s,a,c),a.then(s,s))}function ji(s){do{var a;if((a=13===s.tag)&&(a=null===(a=s.memoizedState)||null!==a.dehydrated),a)return s;s=s.return}while(null!==s);return null}function wn(s,a,c,d,m){return 1&s.mode?(s.flags|=65536,s.lanes=m,s):(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:((a=oo(-1,1)).tag=2,Co(c,a,1))),c.lanes|=1),s)}var uf=Pe.ReactCurrentOwner,Ft=!1;function Dt(s,a,c,d){a.child=null===s?kl(a,null,c,d):Ii(a,s.child,c,d)}function Qo(s,a,c,d,m){c=c.render;var h=a.ref;return Ai(a,m),d=Ml(s,a,c,d,h,m),c=$l(),null===s||Ft?(Qe&&c&&Zu(a),a.flags|=1,Dt(s,a,d,m),a.child):(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,Ln(s,a,m))}function Jl(s,a,c,d,m){if(null===s){var h=c.type;return"function"!=typeof h||gc(h)||void 0!==h.defaultProps||null!==c.compare||void 0!==c.defaultProps?((s=la(c.type,null,d,a,a.mode,m)).ref=a.ref,s.return=a,a.child=s):(a.tag=15,a.type=h,Kl(s,a,h,d,m))}return h=s.child,s.lanes&m||!(c=null!==(c=c.compare)?c:Tn)(h.memoizedProps,d)||s.ref!==a.ref?(a.flags|=1,(s=Io(h,d)).ref=a.ref,s.return=a,a.child=s):Ln(s,a,m)}function Kl(s,a,c,d,m){if(null!==s){var h=s.memoizedProps;if(Tn(h,d)&&s.ref===a.ref){if(Ft=!1,a.pendingProps=d=h,!(s.lanes&m))return a.lanes=s.lanes,Ln(s,a,m);131072&s.flags&&(Ft=!0)}}return ec(s,a,c,d,m)}function wd(s,a,c){var d=a.pendingProps,m=d.children,h=null!==s?s.memoizedState:null;if("hidden"===d.mode)if(1&a.mode){if(!(1073741824&c))return s=null!==h?h.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Ze(Qt,Vt),Vt|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=null!==h?h.baseLanes:c,Ze(Qt,Vt),Vt|=d}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Qt,Vt),Vt|=c;else null!==h?(d=h.baseLanes|c,a.memoizedState=null):d=c,Ze(Qt,Vt),Vt|=d;return Dt(s,a,m,c),a.child}function Ql(s,a){var c=a.ref;(null===s&&null!==c||null!==s&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function ec(s,a,c,d,m){var h=an(c)?Ho:Lt.current;return h=Ci(a,h),Ai(a,m),c=Ml(s,a,c,d,h,m),d=$l(),null===s||Ft?(Qe&&d&&Zu(a),a.flags|=1,Dt(s,a,c,m),a.child):(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,Ln(s,a,m))}function Nd(s,a,c,d,m){if(an(c)){var h=!0;$s(a)}else h=!1;if(Ai(a,m),null===a.stateNode)ko(s,a),Cd(a,c,d),Hl(a,c,d,m),d=!0;else if(null===s){var b=a.stateNode,k=a.memoizedProps;b.props=k;var F=b.context,z=c.contextType;z="object"==typeof z&&null!==z?Sn(z):Ci(a,z=an(c)?Ho:Lt.current);var q=c.getDerivedStateFromProps,K="function"==typeof q||"function"==typeof b.getSnapshotBeforeUpdate;K||"function"!=typeof b.UNSAFE_componentWillReceiveProps&&"function"!=typeof b.componentWillReceiveProps||(k!==d||F!==z)&&Yl(a,b,d,z),no=!1;var W=a.memoizedState;b.state=W,Ls(a,d,b,m),F=a.memoizedState,k!==d||W!==F||sn.current||no?("function"==typeof q&&(Xl(a,c,q,d),F=a.memoizedState),(k=no||xd(a,c,k,d,W,F,z))?(K||"function"!=typeof b.UNSAFE_componentWillMount&&"function"!=typeof b.componentWillMount||("function"==typeof b.componentWillMount&&b.componentWillMount(),"function"==typeof b.UNSAFE_componentWillMount&&b.UNSAFE_componentWillMount()),"function"==typeof b.componentDidMount&&(a.flags|=4194308)):("function"==typeof b.componentDidMount&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=F),b.props=d,b.state=F,b.context=z,d=k):("function"==typeof b.componentDidMount&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,mr(s,a),k=a.memoizedProps,z=a.type===a.elementType?k:Fn(a.type,k),b.props=z,K=a.pendingProps,W=b.context,F="object"==typeof(F=c.contextType)&&null!==F?Sn(F):Ci(a,F=an(c)?Ho:Lt.current);var pe=c.getDerivedStateFromProps;(q="function"==typeof pe||"function"==typeof b.getSnapshotBeforeUpdate)||"function"!=typeof b.UNSAFE_componentWillReceiveProps&&"function"!=typeof b.componentWillReceiveProps||(k!==K||W!==F)&&Yl(a,b,d,F),no=!1,b.state=W=a.memoizedState,Ls(a,d,b,m);var me=a.memoizedState;k!==K||W!==me||sn.current||no?("function"==typeof pe&&(Xl(a,c,pe,d),me=a.memoizedState),(z=no||xd(a,c,z,d,W,me,F)||!1)?(q||"function"!=typeof b.UNSAFE_componentWillUpdate&&"function"!=typeof b.componentWillUpdate||("function"==typeof b.componentWillUpdate&&b.componentWillUpdate(d,me,F),"function"==typeof b.UNSAFE_componentWillUpdate&&b.UNSAFE_componentWillUpdate(d,me,F)),"function"==typeof b.componentDidUpdate&&(a.flags|=4),"function"==typeof b.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof b.componentDidUpdate||k===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),"function"!=typeof b.getSnapshotBeforeUpdate||k===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=me),b.props=d,b.state=me,b.context=F,d=z):("function"!=typeof b.componentDidUpdate||k===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),"function"!=typeof b.getSnapshotBeforeUpdate||k===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),d=!1)}return tc(s,a,c,d,h,m)}function tc(s,a,c,d,m,h){Ql(s,a);var b=!!(128&a.flags);if(!d&&!b)return m&&Hu(a,c,!1),Ln(s,a,h);d=a.stateNode,uf.current=a;var k=b&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return a.flags|=1,null!==s&&b?(a.child=Ii(a,s.child,null,h),a.child=Ii(a,null,k,h)):Dt(s,a,k,h),a.memoizedState=d.state,m&&Hu(a,c,!0),a.child}function Ed(s){var a=s.stateNode;a.pendingContext?Xu(0,a.pendingContext,a.pendingContext!==a.context):a.context&&Xu(0,a.context,!1),Tl(s,a.containerInfo)}function Rn(s,a,c,d,m){return Ni(),Os(m),a.flags|=256,Dt(s,a,c,d),a.child}var Id,$i,oc,Ad,So={dehydrated:null,treeContext:null,retryLane:0};function ei(s){return{baseLanes:s,cachePool:null,transitions:null}}function Mi(s,a,c){var k,d=a.pendingProps,m=rt.current,h=!1,b=!!(128&a.flags);if((k=b)||(k=(null===s||null!==s.memoizedState)&&!!(2&m)),k?(h=!0,a.flags&=-129):(null===s||null!==s.memoizedState)&&(m|=1),Ze(rt,1&m),null===s)return xl(a),null!==(s=a.memoizedState)&&null!==(s=s.dehydrated)?(a.lanes=1&a.mode?"$!"===s.data?8:1073741824:1,null):(b=d.children,s=d.fallback,h?(h=a.child,b={mode:"hidden",children:b},1&(d=a.mode)||null===h?h=ca(b,d,0,null):(h.childLanes=0,h.pendingProps=b),s=li(s,d,c,null),h.return=a,s.return=a,h.sibling=s,a.child=h,a.child.memoizedState=ei(c),a.memoizedState=So,s):Js(a,b));if(null!==(m=s.memoizedState)&&null!==(k=m.dehydrated))return function kr(s,a,c,d,m,h,b){if(c)return 256&a.flags?(a.flags&=-257,ti(s,a,b,d=Wl(Error(w(422))))):null!==a.memoizedState?(a.child=s.child,a.flags|=128,null):(h=d.fallback,d=ca({mode:"visible",children:d.children},m=a.mode,0,null),(h=li(h,m,b,null)).flags|=2,d.return=a,h.return=a,d.sibling=h,a.child=d,1&a.mode&&Ii(a,s.child,null,b),a.child.memoizedState=ei(b),a.memoizedState=So,h);if(!(1&a.mode))return ti(s,a,b,null);if("$!"===m.data){if(d=m.nextSibling&&m.nextSibling.dataset)var k=d.dgst;return d=k,ti(s,a,b,d=Wl(h=Error(w(419)),d,void 0))}if(k=!!(b&s.childLanes),Ft||k){if(null!==(d=ft)){switch(b&-b){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}0!==(m=m&(d.suspendedLanes|b)?0:m)&&m!==h.retryLane&&(h.retryLane=m,to(s,m),zt(d,s,m,-1))}return fc(),ti(s,a,b,d=Wl(Error(w(421))))}return"$?"===m.data?(a.flags|=128,a.child=s.child,a=Vd.bind(null,s),m._reactRetry=a,null):(s=h.treeContext,mn=go(m.nextSibling),fn=a,Qe=!0,Cn=null,null!==s&&(bn[xn++]=it,bn[xn++]=eo,bn[xn++]=S,it=s.id,eo=s.overflow,S=a),(a=Js(a,d.children)).flags|=4096,a)}(s,a,b,d,k,m,c);if(h){h=d.fallback,k=(m=s.child).sibling;var F={mode:"hidden",children:d.children};return 1&(b=a.mode)||a.child===m?(d=Io(m,F)).subtreeFlags=14680064&m.subtreeFlags:((d=a.child).childLanes=0,d.pendingProps=F,a.deletions=null),null!==k?h=Io(k,h):(h=li(h,b,c,null)).flags|=2,h.return=a,d.return=a,d.sibling=h,a.child=d,d=h,h=a.child,b=null===(b=s.child.memoizedState)?ei(c):{baseLanes:b.baseLanes|c,cachePool:null,transitions:b.transitions},h.memoizedState=b,h.childLanes=s.childLanes&~c,a.memoizedState=So,d}return s=(h=s.child).sibling,d=Io(h,{mode:"visible",children:d.children}),!(1&a.mode)&&(d.lanes=c),d.return=a,d.sibling=null,null!==s&&(null===(c=a.deletions)?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=d,a.memoizedState=null,d}function Js(s,a){return(a=ca({mode:"visible",children:a},s.mode,0,null)).return=s,s.child=a}function ti(s,a,c,d){return null!==d&&Os(d),Ii(a,s.child,null,c),(s=Js(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,s}function wr(s,a,c){s.lanes|=a;var d=s.alternate;null!==d&&(d.lanes|=a),El(s.return,a,c)}function io(s,a,c,d,m){var h=s.memoizedState;null===h?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=d,h.tail=c,h.tailMode=m)}function Nr(s,a,c){var d=a.pendingProps,m=d.revealOrder,h=d.tail;if(Dt(s,a,d.children,c),2&(d=rt.current))d=1&d|2,a.flags|=128;else{if(null!==s&&128&s.flags)e:for(s=a.child;null!==s;){if(13===s.tag)null!==s.memoizedState&&wr(s,c,a);else if(19===s.tag)wr(s,c,a);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Ze(rt,d),1&a.mode)switch(m){case"forwards":for(c=a.child,m=null;null!==c;)null!==(s=c.alternate)&&null===Us(s)&&(m=c),c=c.sibling;null===(c=m)?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),io(a,!1,m,c,h);break;case"backwards":for(c=null,m=a.child,a.child=null;null!==m;){if(null!==(s=m.alternate)&&null===Us(s)){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}io(a,!0,c,null,h);break;case"together":io(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function ko(s,a){!(1&a.mode)&&null!==s&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Ln(s,a,c){if(null!==s&&(a.dependencies=s.dependencies),ri|=a.lanes,!(c&a.childLanes))return null;if(null!==s&&a.child!==s.child)throw Error(w(153));if(null!==a.child){for(c=Io(s=a.child,s.pendingProps),a.child=c,c.return=a;null!==s.sibling;)(c=c.sibling=Io(s=s.sibling,s.pendingProps)).return=a;c.sibling=null}return a.child}function Gi(s,a){if(!Qe)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;null!==a;)null!==a.alternate&&(c=a),a=a.sibling;null===c?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?a||null===s.tail?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Xt(s){var a=null!==s.alternate&&s.alternate.child===s.child,c=0,d=0;if(a)for(var m=s.child;null!==m;)c|=m.lanes|m.childLanes,d|=14680064&m.subtreeFlags,d|=14680064&m.flags,m.return=s,m=m.sibling;else for(m=s.child;null!==m;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function df(s,a,c){var d=a.pendingProps;switch(bl(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(a),null;case 1:case 17:return an(a.type)&&Ms(),Xt(a),null;case 3:return d=a.stateNode,Ti(),Ke(sn),Ke(Lt),vr(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(null===s||null===s.child)&&(Wo(a)?a.flags|=4:null===s||s.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==Cn&&(cc(Cn),Cn=null))),$i(s,a),Xt(a),null;case 5:Fl(a);var m=Jo(gr.current);if(c=a.type,null!==s&&null!=a.stateNode)oc(s,a,c,d,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!d){if(null===a.stateNode)throw Error(w(166));return Xt(a),null}if(s=Jo(Pn.current),Wo(a)){c=a.type;var h=a.memoizedProps;switch((d=a.stateNode)[Bn]=a,d[yi]=h,s=!!(1&a.mode),c){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(m=0;m<cr.length;m++)Je(cr[m],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":Gc(d,h),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},Je("invalid",d);break;case"textarea":Vc(d,h),Je("invalid",d)}for(var b in Ga(c,h),m=null,h)if(h.hasOwnProperty(b)){var k=h[b];"children"===b?"string"==typeof k?d.textContent!==k&&(!0!==h.suppressHydrationWarning&&Fs(d.textContent,k,s),m=["children",k]):"number"==typeof k&&d.textContent!==""+k&&(!0!==h.suppressHydrationWarning&&Fs(d.textContent,k,s),m=["children",""+k]):St.hasOwnProperty(b)&&null!=k&&"onScroll"===b&&Je("scroll",d)}switch(c){case"input":Jr(d),Oc(d,h,!0);break;case"textarea":Jr(d),Vn(d);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(d.onclick=Rs)}a.updateQueue=d=m,null!==d&&(a.flags|=4)}else{b=9===m.nodeType?m:m.ownerDocument,"http://www.w3.org/1999/xhtml"===s&&(s=Bc(c)),"http://www.w3.org/1999/xhtml"===s?"script"===c?((s=b.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):"string"==typeof d.is?s=b.createElement(c,{is:d.is}):(s=b.createElement(c),"select"===c&&(b=s,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):s=b.createElementNS(s,c),s[Bn]=a,s[yi]=d,Id(s,a,!1,!1),a.stateNode=s;e:{switch(b=Da(c,d),c){case"dialog":Je("cancel",s),Je("close",s),m=d;break;case"iframe":case"object":case"embed":Je("load",s),m=d;break;case"video":case"audio":for(m=0;m<cr.length;m++)Je(cr[m],s);m=d;break;case"source":Je("error",s),m=d;break;case"img":case"image":case"link":Je("error",s),Je("load",s),m=d;break;case"details":Je("toggle",s),m=d;break;case"input":Gc(s,d),m=Ra(s,d),Je("invalid",s);break;case"option":default:m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=j({},d,{value:void 0}),Je("invalid",s);break;case"textarea":Vc(s,d),m=It(s,d),Je("invalid",s)}for(h in Ga(c,m),k=m)if(k.hasOwnProperty(h)){var F=k[h];"style"===h?Uc(s,F):"dangerouslySetInnerHTML"===h?null!=(F=F?F.__html:void 0)&&Pc(s,F):"children"===h?"string"==typeof F?("textarea"!==c||""!==F)&&Yi(s,F):"number"==typeof F&&Yi(s,""+F):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(St.hasOwnProperty(h)?null!=F&&"onScroll"===h&&Je("scroll",s):null!=F&&Mt(s,h,F,b))}switch(c){case"input":Jr(s),Oc(s,d,!1);break;case"textarea":Jr(s),Vn(s);break;case"option":null!=d.value&&s.setAttribute("value",""+ze(d.value));break;case"select":s.multiple=!!d.multiple,null!=(h=d.value)?$o(s,!!d.multiple,h,!1):null!=d.defaultValue&&$o(s,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof m.onClick&&(s.onclick=Rs)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}return Xt(a),null;case 6:if(s&&null!=a.stateNode)Ad(s,a,s.memoizedProps,d);else{if("string"!=typeof d&&null===a.stateNode)throw Error(w(166));if(c=Jo(gr.current),Jo(Pn.current),Wo(a)){if(c=a.memoizedProps,(d=a.stateNode)[Bn]=a,(h=d.nodeValue!==c)&&null!==(s=fn))switch(s.tag){case 3:Fs(d.nodeValue,c,!!(1&s.mode));break;case 5:!0!==s.memoizedProps.suppressHydrationWarning&&Fs(d.nodeValue,c,!!(1&s.mode))}h&&(a.flags|=4)}else(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d))[Bn]=a,a.stateNode=d}return Xt(a),null;case 13:if(Ke(rt),d=a.memoizedState,null===s||null!==s.memoizedState&&null!==s.memoizedState.dehydrated){if(Qe&&null!==mn&&1&a.mode&&!(128&a.flags))Ku(),Ni(),a.flags|=98560,h=!1;else if(h=Wo(a),null!==d&&null!==d.dehydrated){if(null===s){if(!h)throw Error(w(318));if(!(h=null!==(h=a.memoizedState)?h.dehydrated:null))throw Error(w(317));h[Bn]=a}else Ni(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;Xt(a),h=!1}else null!==Cn&&(cc(Cn),Cn=null),h=!0;if(!h)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=c,a):((d=null!==d)!=(null!==s&&null!==s.memoizedState)&&d&&(a.child.flags|=8192,1&a.mode&&(null===s||1&rt.current?0===Nt&&(Nt=3):fc())),null!==a.updateQueue&&(a.flags|=4),Xt(a),null);case 4:return Ti(),$i(s,a),null===s&&ur(a.stateNode.containerInfo),Xt(a),null;case 10:return Nl(a.type._context),Xt(a),null;case 19:if(Ke(rt),null===(h=a.memoizedState))return Xt(a),null;if(d=!!(128&a.flags),null===(b=h.rendering))if(d)Gi(h,!1);else{if(0!==Nt||null!==s&&128&s.flags)for(s=a.child;null!==s;){if(null!==(b=Us(s))){for(a.flags|=128,Gi(h,!1),null!==(d=b.updateQueue)&&(a.updateQueue=d,a.flags|=4),a.subtreeFlags=0,d=c,c=a.child;null!==c;)s=d,(h=c).flags&=14680066,null===(b=h.alternate)?(h.childLanes=0,h.lanes=s,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,h.dependencies=null===(s=b.dependencies)?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Ze(rt,1&rt.current|2),a.child}s=s.sibling}null!==h.tail&&vt()>si&&(a.flags|=128,d=!0,Gi(h,!1),a.lanes=4194304)}else{if(!d)if(null!==(s=Us(b))){if(a.flags|=128,d=!0,null!==(c=s.updateQueue)&&(a.updateQueue=c,a.flags|=4),Gi(h,!0),null===h.tail&&"hidden"===h.tailMode&&!b.alternate&&!Qe)return Xt(a),null}else 2*vt()-h.renderingStartTime>si&&1073741824!==c&&(a.flags|=128,d=!0,Gi(h,!1),a.lanes=4194304);h.isBackwards?(b.sibling=a.child,a.child=b):(null!==(c=h.last)?c.sibling=b:a.child=b,h.last=b)}return null!==h.tail?(h.rendering=a=h.tail,h.tail=a.sibling,h.renderingStartTime=vt(),a.sibling=null,c=rt.current,Ze(rt,d?1&c|2:1&c),a):(Xt(a),null);case 22:case 23:return uc(),d=null!==a.memoizedState,null!==s&&null!==s.memoizedState!==d&&(a.flags|=8192),d&&1&a.mode?1073741824&Vt&&(Xt(a),6&a.subtreeFlags&&(a.flags|=8192)):Xt(a),null;case 24:case 25:return null}throw Error(w(156,a.tag))}function ic(s,a){switch(bl(a),a.tag){case 1:return an(a.type)&&Ms(),65536&(s=a.flags)?(a.flags=-65537&s|128,a):null;case 3:return Ti(),Ke(sn),Ke(Lt),vr(),65536&(s=a.flags)&&!(128&s)?(a.flags=-65537&s|128,a):null;case 5:return Fl(a),null;case 13:if(Ke(rt),null!==(s=a.memoizedState)&&null!==s.dehydrated){if(null===a.alternate)throw Error(w(340));Ni()}return 65536&(s=a.flags)?(a.flags=-65537&s|128,a):null;case 19:return Ke(rt),null;case 4:return Ti(),null;case 10:return Nl(a.type._context),null;case 22:case 23:return uc(),null;default:return null}}Id=function(s,a){for(var c=a.child;null!==c;){if(5===c.tag||6===c.tag)s.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},$i=function(){},oc=function(s,a,c,d){var m=s.memoizedProps;if(m!==d){s=a.stateNode,Jo(Pn.current);var b,h=null;switch(c){case"input":m=Ra(s,m),d=Ra(s,d),h=[];break;case"select":m=j({},m,{value:void 0}),d=j({},d,{value:void 0}),h=[];break;case"textarea":m=It(s,m),d=It(s,d),h=[];break;default:"function"!=typeof m.onClick&&"function"==typeof d.onClick&&(s.onclick=Rs)}for(z in Ga(c,d),c=null,m)if(!d.hasOwnProperty(z)&&m.hasOwnProperty(z)&&null!=m[z])if("style"===z){var k=m[z];for(b in k)k.hasOwnProperty(b)&&(c||(c={}),c[b]="")}else"dangerouslySetInnerHTML"!==z&&"children"!==z&&"suppressContentEditableWarning"!==z&&"suppressHydrationWarning"!==z&&"autoFocus"!==z&&(St.hasOwnProperty(z)?h||(h=[]):(h=h||[]).push(z,null));for(z in d){var F=d[z];if(k=m?.[z],d.hasOwnProperty(z)&&F!==k&&(null!=F||null!=k))if("style"===z)if(k){for(b in k)!k.hasOwnProperty(b)||F&&F.hasOwnProperty(b)||(c||(c={}),c[b]="");for(b in F)F.hasOwnProperty(b)&&k[b]!==F[b]&&(c||(c={}),c[b]=F[b])}else c||(h||(h=[]),h.push(z,c)),c=F;else"dangerouslySetInnerHTML"===z?(k=k?k.__html:void 0,null!=(F=F?F.__html:void 0)&&k!==F&&(h=h||[]).push(z,F)):"children"===z?"string"!=typeof F&&"number"!=typeof F||(h=h||[]).push(z,""+F):"suppressContentEditableWarning"!==z&&"suppressHydrationWarning"!==z&&(St.hasOwnProperty(z)?(null!=F&&"onScroll"===z&&Je("scroll",s),h||k===F||(h=[])):(h=h||[]).push(z,F))}c&&(h=h||[]).push("style",c);var z=h;(a.updateQueue=z)&&(a.flags|=4)}},Ad=function(s,a,c,d){c!==d&&(a.flags|=4)};var Er=!1,Yt=!1,pf="function"==typeof WeakSet?WeakSet:Set,fe=null;function ni(s,a){var c=s.ref;if(null!==c)if("function"==typeof c)try{c(null)}catch(d){_t(s,a,d)}else c.current=null}function Ir(s,a,c){try{c()}catch(d){_t(s,a,d)}}var Ar=!1;function oi(s,a,c){var d=a.updateQueue;if(null!==(d=null!==d?d.lastEffect:null)){var m=d=d.next;do{if((m.tag&s)===s){var h=m.destroy;m.destroy=void 0,void 0!==h&&Ir(a,c,h)}m=m.next}while(m!==d)}}function ii(s,a){if(null!==(a=null!==(a=a.updateQueue)?a.lastEffect:null)){var c=a=a.next;do{(c.tag&s)===s&&(c.destroy=(0,c.create)()),c=c.next}while(c!==a)}}function Di(s){var a=s.ref;null!==a&&(s=s.stateNode,"function"==typeof a?a(s):a.current=s)}function Ks(s){var a=s.alternate;null!==a&&(s.alternate=null,Ks(a)),s.child=null,s.deletions=null,s.sibling=null,5===s.tag&&null!==(a=s.stateNode)&&(delete a[Bn],delete a[yi],delete a[hl],delete a[ef],delete a[tf]),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function jn(s){return 5===s.tag||3===s.tag||4===s.tag}function Nn(s){e:for(;;){for(;null===s.sibling;){if(null===s.return||jn(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;5!==s.tag&&6!==s.tag&&18!==s.tag;){if(2&s.flags||null===s.child||4===s.tag)continue e;s.child.return=s,s=s.child}if(!(2&s.flags))return s.stateNode}}function rc(s,a,c){var d=s.tag;if(5===d||6===d)s=s.stateNode,a?8===c.nodeType?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(8===c.nodeType?(a=c.parentNode).insertBefore(s,c):(a=c).appendChild(s),null!=(c=c._reactRootContainer)||null!==a.onclick||(a.onclick=Rs));else if(4!==d&&null!==(s=s.child))for(rc(s,a,c),s=s.sibling;null!==s;)rc(s,a,c),s=s.sibling}function Oi(s,a,c){var d=s.tag;if(5===d||6===d)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(4!==d&&null!==(s=s.child))for(Oi(s,a,c),s=s.sibling;null!==s;)Oi(s,a,c),s=s.sibling}var Ot=null,Rt=!1;function ro(s,a,c){for(c=c.child;null!==c;)Qs(s,a,c),c=c.sibling}function Qs(s,a,c){if(zn&&"function"==typeof zn.onCommitFiberUnmount)try{zn.onCommitFiberUnmount(os,c)}catch{}switch(c.tag){case 5:Yt||ni(c,a);case 6:var d=Ot,m=Rt;Ot=null,ro(s,a,c),Rt=m,null!==(Ot=d)&&(Rt?(c=c.stateNode,8===(s=Ot).nodeType?s.parentNode.removeChild(c):s.removeChild(c)):Ot.removeChild(c.stateNode));break;case 18:null!==Ot&&(Rt?(c=c.stateNode,8===(s=Ot).nodeType?_l(s.parentNode,c):1===s.nodeType&&_l(s,c),zo(s)):_l(Ot,c.stateNode));break;case 4:d=Ot,m=Rt,Ot=c.stateNode.containerInfo,Rt=!0,ro(s,a,c),Ot=d,Rt=m;break;case 0:case 11:case 14:case 15:if(!Yt&&null!==(d=c.updateQueue)&&null!==(d=d.lastEffect)){m=d=d.next;do{var h=m,b=h.destroy;h=h.tag,void 0!==b&&(2&h||4&h)&&Ir(c,a,b),m=m.next}while(m!==d)}ro(s,a,c);break;case 1:if(!Yt&&(ni(c,a),"function"==typeof(d=c.stateNode).componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(k){_t(c,a,k)}ro(s,a,c);break;case 21:ro(s,a,c);break;case 22:1&c.mode?(Yt=(d=Yt)||null!==c.memoizedState,ro(s,a,c),Yt=d):ro(s,a,c);break;default:ro(s,a,c)}}function sc(s){var a=s.updateQueue;if(null!==a){s.updateQueue=null;var c=s.stateNode;null===c&&(c=s.stateNode=new pf),a.forEach(function(d){var m=hf.bind(null,s,d);c.has(d)||(c.add(d),d.then(m,m))})}}function cn(s,a){var c=a.deletions;if(null!==c)for(var d=0;d<c.length;d++){var m=c[d];try{var h=s,b=a,k=b;e:for(;null!==k;){switch(k.tag){case 5:Ot=k.stateNode,Rt=!1;break e;case 3:case 4:Ot=k.stateNode.containerInfo,Rt=!0;break e}k=k.return}if(null===Ot)throw Error(w(160));Qs(h,b,m),Ot=null,Rt=!1;var F=m.alternate;null!==F&&(F.return=null),m.return=null}catch(z){_t(m,a,z)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)Fd(a,s),a=a.sibling}function Fd(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(cn(a,s),Un(s),4&d){try{oi(3,s,s.return),ii(3,s)}catch(_e){_t(s,s.return,_e)}try{oi(5,s,s.return)}catch(_e){_t(s,s.return,_e)}}break;case 1:cn(a,s),Un(s),512&d&&null!==c&&ni(c,c.return);break;case 5:if(cn(a,s),Un(s),512&d&&null!==c&&ni(c,c.return),32&s.flags){var m=s.stateNode;try{Yi(m,"")}catch(_e){_t(s,s.return,_e)}}if(4&d&&null!=(m=s.stateNode)){var h=s.memoizedProps,b=null!==c?c.memoizedProps:h,k=s.type,F=s.updateQueue;if(s.updateQueue=null,null!==F)try{"input"===k&&"radio"===h.type&&null!=h.name&&Dc(m,h),Da(k,b);var z=Da(k,h);for(b=0;b<F.length;b+=2){var q=F[b],K=F[b+1];"style"===q?Uc(m,K):"dangerouslySetInnerHTML"===q?Pc(m,K):"children"===q?Yi(m,K):Mt(m,q,K,z)}switch(k){case"input":ja(m,h);break;case"textarea":zc(m,h);break;case"select":var W=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!h.multiple;var pe=h.value;null!=pe?$o(m,!!h.multiple,pe,!1):W!==!!h.multiple&&(null!=h.defaultValue?$o(m,!!h.multiple,h.defaultValue,!0):$o(m,!!h.multiple,h.multiple?[]:"",!1))}m[yi]=h}catch(_e){_t(s,s.return,_e)}}break;case 6:if(cn(a,s),Un(s),4&d){if(null===s.stateNode)throw Error(w(162));m=s.stateNode,h=s.memoizedProps;try{m.nodeValue=h}catch(_e){_t(s,s.return,_e)}}break;case 3:if(cn(a,s),Un(s),4&d&&null!==c&&c.memoizedState.isDehydrated)try{zo(a.containerInfo)}catch(_e){_t(s,s.return,_e)}break;case 4:default:cn(a,s),Un(s);break;case 13:cn(a,s),Un(s),8192&(m=s.child).flags&&(m.stateNode.isHidden=h=null!==m.memoizedState,!h||null!==m.alternate&&null!==m.alternate.memoizedState||(ta=vt())),4&d&&sc(s);break;case 22:if(q=null!==c&&null!==c.memoizedState,1&s.mode?(Yt=(z=Yt)||q,cn(a,s),Yt=z):cn(a,s),Un(s),8192&d){if((s.stateNode.isHidden=z=null!==s.memoizedState)&&!q&&1&s.mode)for(fe=s,q=s.child;null!==q;){for(K=fe=q;null!==fe;){switch(pe=(W=fe).child,W.tag){case 0:case 11:case 14:case 15:oi(4,W,W.return);break;case 1:ni(W,W.return);var me=W.stateNode;if("function"==typeof me.componentWillUnmount){d=W,c=W.return;try{me.props=(a=d).memoizedProps,me.state=a.memoizedState,me.componentWillUnmount()}catch(_e){_t(d,c,_e)}}break;case 5:ni(W,W.return);break;case 22:if(null!==W.memoizedState){$d(K);continue}}null!==pe?(pe.return=W,fe=pe):$d(K)}q=q.sibling}e:for(q=null,K=s;;){if(5===K.tag){if(null===q){q=K;try{m=K.stateNode,z?"function"==typeof(h=m.style).setProperty?h.setProperty("display","none","important"):h.display="none":(k=K.stateNode,b=null!=(F=K.memoizedProps.style)&&F.hasOwnProperty("display")?F.display:null,k.style.display=Lc("display",b))}catch(_e){_t(s,s.return,_e)}}}else if(6===K.tag){if(null===q)try{K.stateNode.nodeValue=z?"":K.memoizedProps}catch(_e){_t(s,s.return,_e)}}else if((22!==K.tag&&23!==K.tag||null===K.memoizedState||K===s)&&null!==K.child){K.child.return=K,K=K.child;continue}if(K===s)break e;for(;null===K.sibling;){if(null===K.return||K.return===s)break e;q===K&&(q=null),K=K.return}q===K&&(q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:cn(a,s),Un(s),4&d&&sc(s);case 21:}}function Un(s){var a=s.flags;if(2&a){try{e:{for(var c=s.return;null!==c;){if(jn(c)){var d=c;break e}c=c.return}throw Error(w(160))}switch(d.tag){case 5:var m=d.stateNode;32&d.flags&&(Yi(m,""),d.flags&=-33),Oi(s,Nn(s),m);break;case 3:case 4:var b=d.stateNode.containerInfo;rc(s,Nn(s),b);break;default:throw Error(w(161))}}catch(F){_t(s,s.return,F)}s.flags&=-3}4096&a&&(s.flags&=-4097)}function Rd(s,a,c){fe=s,jd(s,a,c)}function jd(s,a,c){for(var d=!!(1&s.mode);null!==fe;){var m=fe,h=m.child;if(22===m.tag&&d){var b=null!==m.memoizedState||Er;if(!b){var k=m.alternate,F=null!==k&&null!==k.memoizedState||Yt;k=Er;var z=Yt;if(Er=b,(Yt=F)&&!z)for(fe=m;null!==fe;)F=(b=fe).child,22===b.tag&&null!==b.memoizedState?Gd(m):null!==F?(F.return=b,fe=F):Gd(m);for(;null!==h;)fe=h,jd(h,a,c),h=h.sibling;fe=m,Er=k,Yt=z}Md(s)}else 8772&m.subtreeFlags&&null!==h?(h.return=m,fe=h):Md(s)}}function Md(s){for(;null!==fe;){var a=fe;if(8772&a.flags){var c=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:Yt||ii(5,a);break;case 1:var d=a.stateNode;if(4&a.flags&&!Yt)if(null===c)d.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:Fn(a.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var h=a.updateQueue;null!==h&&od(a,h,d);break;case 3:var b=a.updateQueue;if(null!==b){if(c=null,null!==a.child)switch(a.child.tag){case 5:case 1:c=a.child.stateNode}od(a,b,c)}break;case 5:if(null===c&&4&a.flags){c=a.stateNode;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var z=a.alternate;if(null!==z){var q=z.memoizedState;if(null!==q){var K=q.dehydrated;null!==K&&zo(K)}}}break;default:throw Error(w(163))}Yt||512&a.flags&&Di(a)}catch(W){_t(a,a.return,W)}}if(a===s){fe=null;break}if(null!==(c=a.sibling)){c.return=a.return,fe=c;break}fe=a.return}}function $d(s){for(;null!==fe;){var a=fe;if(a===s){fe=null;break}var c=a.sibling;if(null!==c){c.return=a.return,fe=c;break}fe=a.return}}function Gd(s){for(;null!==fe;){var a=fe;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{ii(4,a)}catch(F){_t(a,c,F)}break;case 1:var d=a.stateNode;if("function"==typeof d.componentDidMount){var m=a.return;try{d.componentDidMount()}catch(F){_t(a,m,F)}}var h=a.return;try{Di(a)}catch(F){_t(a,h,F)}break;case 5:var b=a.return;try{Di(a)}catch(F){_t(a,b,F)}}}catch(F){_t(a,a.return,F)}if(a===s){fe=null;break}var k=a.sibling;if(null!==k){k.return=a.return,fe=k;break}fe=a.return}}var zd,ff=Math.ceil,Vi=Pe.ReactCurrentDispatcher,Tr=Pe.ReactCurrentOwner,_n=Pe.ReactCurrentBatchConfig,Re=0,ft=null,at=null,mt=0,Vt=0,Qt=vo(0),Nt=0,Fr=null,ri=0,ea=0,ac=0,Rr=null,un=null,ta=0,si=1/0,so=null,na=!1,oa=null,En=null,jr=!1,Mn=null,ia=0,wo=0,Ht=null,Mr=-1,ra=0;function Wt(){return 6&Re?vt():-1!==Mr?Mr:Mr=vt()}function $n(s){return 1&s.mode?2&Re&&0!==mt?mt&-mt:null!==Sl.transition?(0===ra&&(ra=iu()),ra):(0!==(s=Le)||(s=void 0===(s=window.event)?16:Ep(s.type)),s):1}function zt(s,a,c,d){if(50<wo)throw wo=0,Ht=null,Error(w(185));Ki(s,c,d),(!(2&Re)||s!==ft)&&(s===ft&&(!(2&Re)&&(ea|=c),4===Nt&&ao(s,mt)),xt(s,d),1===c&&0===Re&&!(1&a.mode)&&(si=vt()+500,Gs&&bo()))}function xt(s,a){var c=s.callbackNode;!function Sp(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,h=s.pendingLanes;0<h;){var b=31-An(h),k=1<<b,F=m[b];-1===F?(!(k&c)||k&d)&&(m[b]=Cp(k,a)):F<=a&&(s.expiredLanes|=k),h&=~k}}(s,a);var d=ss(s,s===ft?mt:0);if(0===d)null!==c&&tu(c),s.callbackNode=null,s.callbackPriority=0;else if(s.callbackPriority!==(a=d&-d)){if(null!=c&&tu(c),1===a)0===s.tag?function nf(s){Gs=!0,Wu(s)}($r.bind(null,s)):Wu($r.bind(null,s)),Kp(function(){!(6&Re)&&bo()}),c=null;else{switch(ru(d)){case 1:c=Xa;break;case 4:c=nu;break;case 16:default:c=ns;break;case 536870912:c=ou}c=Bd(c,lc.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function lc(s,a){if(Mr=-1,ra=0,6&Re)throw Error(w(327));var c=s.callbackNode;if(Eo()&&s.callbackNode!==c)return null;var d=ss(s,s===ft?mt:0);if(0===d)return null;if(30&d||d&s.expiredLanes||a)a=mc(s,d);else{a=d;var m=Re;Re|=2;var h=pc();for((ft!==s||mt!==a)&&(so=null,si=vt()+500,ai(s,a));;)try{Dd();break}catch(k){dc(s,k)}wl(),Vi.current=h,Re=m,null!==at?a=0:(ft=null,mt=0,a=Nt)}if(0!==a){if(2===a&&0!==(m=Ya(s))&&(d=m,a=sa(s,m)),1===a)throw c=Fr,ai(s,0),ao(s,d),xt(s,vt()),c;if(6===a)ao(s,d);else{if(m=s.current.alternate,!(30&d||function Gn(s){for(var a=s;;){if(16384&a.flags){var c=a.updateQueue;if(null!==c&&null!==(c=c.stores))for(var d=0;d<c.length;d++){var m=c[d],h=m.getSnapshot;m=m.value;try{if(!De(h(),m))return!1}catch{return!1}}}if(c=a.child,16384&a.subtreeFlags&&null!==c)c.return=a,a=c;else{if(a===s)break;for(;null===a.sibling;){if(null===a.return||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}(m)||(a=mc(s,d),2===a&&(h=Ya(s),0!==h&&(d=h,a=sa(s,h))),1!==a)))throw c=Fr,ai(s,0),ao(s,d),xt(s,vt()),c;switch(s.finishedWork=m,s.finishedLanes=d,a){case 0:case 1:throw Error(w(345));case 2:case 5:zi(s,un,so);break;case 3:if(ao(s,d),(130023424&d)===d&&10<(a=ta+500-vt())){if(0!==ss(s,0))break;if(((m=s.suspendedLanes)&d)!==d){Wt(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=ml(zi.bind(null,s,un,so),a);break}zi(s,un,so);break;case 4:if(ao(s,d),(4194240&d)===d)break;for(a=s.eventTimes,m=-1;0<d;){var b=31-An(d);h=1<<b,(b=a[b])>m&&(m=b),d&=~h}if(d=m,10<(d=(120>(d=vt()-d)?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*ff(d/1960))-d)){s.timeoutHandle=ml(zi.bind(null,s,un,so),d);break}zi(s,un,so);break;default:throw Error(w(329))}}}return xt(s,vt()),s.callbackNode===c?lc.bind(null,s):null}function sa(s,a){var c=Rr;return s.current.memoizedState.isDehydrated&&(ai(s,a).flags|=256),2!==(s=mc(s,a))&&(a=un,un=c,null!==a&&cc(a)),s}function cc(s){null===un?un=s:un.push.apply(un,s)}function ao(s,a){for(a&=~ac,s.suspendedLanes|=a&=~ea,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-An(a),d=1<<c;s[c]=-1,a&=~d}}function $r(s){if(6&Re)throw Error(w(327));Eo();var a=ss(s,0);if(!(1&a))return xt(s,vt()),null;var c=mc(s,a);if(0!==s.tag&&2===c){var d=Ya(s);0!==d&&(a=d,c=sa(s,d))}if(1===c)throw c=Fr,ai(s,0),ao(s,a),xt(s,vt()),c;if(6===c)throw Error(w(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,zi(s,un,so),xt(s,vt()),null}function Gr(s,a){var c=Re;Re|=1;try{return s(a)}finally{0===(Re=c)&&(si=vt()+500,Gs&&bo())}}function No(s){null!==Mn&&0===Mn.tag&&!(6&Re)&&Eo();var a=Re;Re|=1;var c=_n.transition,d=Le;try{if(_n.transition=null,Le=1,s)return s()}finally{Le=d,_n.transition=c,!(6&(Re=a))&&bo()}}function uc(){Vt=Qt.current,Ke(Qt)}function ai(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(-1!==c&&(s.timeoutHandle=-1,Jp(c)),null!==at)for(c=at.return;null!==c;){var d=c;switch(bl(d),d.tag){case 1:null!=(d=d.type.childContextTypes)&&Ms();break;case 3:Ti(),Ke(sn),Ke(Lt),vr();break;case 5:Fl(d);break;case 4:Ti();break;case 13:case 19:Ke(rt);break;case 10:Nl(d.type._context);break;case 22:case 23:uc()}c=c.return}if(ft=s,at=s=Io(s.current,null),mt=Vt=a,Nt=0,Fr=null,ac=ea=ri=0,un=Rr=null,null!==qo){for(a=0;a<qo.length;a++)if(null!==(d=(c=qo[a]).interleaved)){c.interleaved=null;var h=c.pending;if(null!==h){var b=h.next;h.next=d.next,d.next=b}c.pending=d}qo=null}return s}function dc(s,a){for(;;){var c=at;try{if(wl(),yr.current=Zs,Xs){for(var d=st.memoizedState;null!==d;){var m=d.queue;null!==m&&(m.pending=null),d=d.next}Xs=!1}if(Ko=0,Tt=wt=st=null,br=!1,xr=0,Tr.current=null,null===c||null===c.return){Nt=1,Fr=a,at=null;break}e:{var h=s,b=c.return,k=c,F=a;if(a=mt,k.flags|=32768,null!==F&&"object"==typeof F&&"function"==typeof F.then){var z=F,q=k,K=q.tag;if(!(1&q.mode||0!==K&&11!==K&&15!==K)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var pe=ji(b);if(null!==pe){pe.flags&=-257,wn(pe,b,k,0,a),1&pe.mode&&kd(h,z,a),F=z;var me=(a=pe).updateQueue;if(null===me){var _e=new Set;_e.add(F),a.updateQueue=_e}else me.add(F);break e}if(!(1&a)){kd(h,z,a),fc();break e}F=Error(w(426))}else if(Qe&&1&k.mode){var Ue=ji(b);if(null!==Ue){!(65536&Ue.flags)&&(Ue.flags|=256),wn(Ue,b,k,0,a),Os(Ri(F,k));break e}}h=F=Ri(F,k),4!==Nt&&(Nt=2),null===Rr?Rr=[h]:Rr.push(h),h=b;do{switch(h.tag){case 3:h.flags|=65536,h.lanes|=a&=-a,nd(h,ln(0,F,a));break e;case 1:k=F;var D=h.stateNode;if(!(128&h.flags||"function"!=typeof h.type.getDerivedStateFromError&&(null===D||"function"!=typeof D.componentDidCatch||null!==En&&En.has(D)))){h.flags|=65536,h.lanes|=a&=-a,nd(h,ql(h,k,a));break e}}h=h.return}while(null!==h)}hc(c)}catch(ge){a=ge,at===c&&null!==c&&(at=c=c.return);continue}break}}function pc(){var s=Vi.current;return Vi.current=Zs,null===s?Zs:s}function fc(){(0===Nt||3===Nt||2===Nt)&&(Nt=4),null===ft||!(268435455&ri)&&!(268435455&ea)||ao(ft,mt)}function mc(s,a){var c=Re;Re|=2;var d=pc();for((ft!==s||mt!==a)&&(so=null,ai(s,a));;)try{mf();break}catch(m){dc(s,m)}if(wl(),Re=c,Vi.current=d,null!==at)throw Error(w(261));return ft=null,mt=0,Nt}function mf(){for(;null!==at;)_c(at)}function Dd(){for(;null!==at&&!mp();)_c(at)}function _c(s){var a=zd(s.alternate,s,Vt);s.memoizedProps=s.pendingProps,null===a?hc(s):at=a,Tr.current=null}function hc(s){var a=s;do{var c=a.alternate;if(s=a.return,32768&a.flags){if(null!==(c=ic(c,a)))return c.flags&=32767,void(at=c);if(null===s)return Nt=6,void(at=null);s.flags|=32768,s.subtreeFlags=0,s.deletions=null}else if(null!==(c=df(c,a,Vt)))return void(at=c);if(null!==(a=a.sibling))return void(at=a);at=a=s}while(null!==a);0===Nt&&(Nt=5)}function zi(s,a,c){var d=Le,m=_n.transition;try{_n.transition=null,Le=1,function gm(s,a,c,d){do{Eo()}while(null!==Mn);if(6&Re)throw Error(w(327));var m=s.finishedLanes;if(null===(c=s.finishedWork))return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(w(177));s.callbackNode=null,s.callbackPriority=0;var h=c.lanes|c.childLanes;if(function Gt(s,a){var c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-An(c),h=1<<m;a[m]=0,d[m]=-1,s[m]=-1,c&=~h}}(s,h),s===ft&&(at=ft=null,mt=0),!(2064&c.subtreeFlags)&&!(2064&c.flags)||jr||(jr=!0,Bd(ns,function(){return Eo(),null})),h=!!(15990&c.flags),15990&c.subtreeFlags||h){h=_n.transition,_n.transition=null;var b=Le;Le=1;var k=Re;Re|=4,Tr.current=null,function Td(s,a){if(dl=ls,sl(s=ks())){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else{var d=(c=(c=s.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var m=d.anchorOffset,h=d.focusNode;d=d.focusOffset;var b=0,k=-1,F=-1,z=0,q=0,K=s,W=null;t:for(;;){for(var pe;K!==c||0!==m&&3!==K.nodeType||(k=b+m),K!==h||0!==d&&3!==K.nodeType||(F=b+d),3===K.nodeType&&(b+=K.nodeValue.length),null!==(pe=K.firstChild);)W=K,K=pe;for(;;){if(K===s)break t;if(W===c&&++z===m&&(k=b),W===h&&++q===d&&(F=b),null!==(pe=K.nextSibling))break;W=(K=W).parentNode}K=pe}c=-1===k||-1===F?null:{start:k,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(pl={focusedElem:s,selectionRange:c},ls=!1,fe=a;null!==fe;)if(s=(a=fe).child,1028&a.subtreeFlags&&null!==s)s.return=a,fe=s;else for(;null!==fe;){a=fe;try{var me=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==me){var _e=me.memoizedProps,Ue=me.memoizedState,G=a.stateNode,R=G.getSnapshotBeforeUpdate(a.elementType===a.type?_e:Fn(a.type,_e),Ue);G.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var D=a.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(w(163))}}catch(ne){_t(a,a.return,ne)}if(null!==(s=a.sibling)){s.return=a.return,fe=s;break}fe=a.return}me=Ar,Ar=!1}(s,c),Fd(c,s),Yp(pl),ls=!!dl,pl=dl=null,s.current=c,Rd(c,s,m),_p(),Re=k,Le=b,_n.transition=h}else s.current=c;if(jr&&(jr=!1,Mn=s,ia=m),0===(h=s.pendingLanes)&&(En=null),function vp(s){if(zn&&"function"==typeof zn.onCommitFiberRoot)try{zn.onCommitFiberRoot(os,s,void 0,!(128&~s.current.flags))}catch{}}(c.stateNode),xt(s,vt()),null!==a)for(d=s.onRecoverableError,c=0;c<a.length;c++)d((m=a[c]).value,{componentStack:m.stack,digest:m.digest});if(na)throw na=!1,s=oa,oa=null,s;1&ia&&0!==s.tag&&Eo(),1&(h=s.pendingLanes)?s===Ht?wo++:(wo=0,Ht=s):wo=0,bo()}(s,a,c,d)}finally{_n.transition=m,Le=d}return null}function Eo(){if(null!==Mn){var s=ru(ia),a=_n.transition,c=Le;try{if(_n.transition=null,Le=16>s?16:s,null===Mn)var d=!1;else{if(s=Mn,Mn=null,ia=0,6&Re)throw Error(w(331));var m=Re;for(Re|=4,fe=s.current;null!==fe;){var h=fe,b=h.child;if(16&fe.flags){var k=h.deletions;if(null!==k){for(var F=0;F<k.length;F++){var z=k[F];for(fe=z;null!==fe;){var q=fe;switch(q.tag){case 0:case 11:case 15:oi(8,q,h)}var K=q.child;if(null!==K)K.return=q,fe=K;else for(;null!==fe;){var W=(q=fe).sibling,pe=q.return;if(Ks(q),q===z){fe=null;break}if(null!==W){W.return=pe,fe=W;break}fe=pe}}}var me=h.alternate;if(null!==me){var _e=me.child;if(null!==_e){me.child=null;do{var Ue=_e.sibling;_e.sibling=null,_e=Ue}while(null!==_e)}}fe=h}}if(2064&h.subtreeFlags&&null!==b)b.return=h,fe=b;else e:for(;null!==fe;){if(2048&(h=fe).flags)switch(h.tag){case 0:case 11:case 15:oi(9,h,h.return)}var G=h.sibling;if(null!==G){G.return=h.return,fe=G;break e}fe=h.return}}var R=s.current;for(fe=R;null!==fe;){var D=(b=fe).child;if(2064&b.subtreeFlags&&null!==D)D.return=b,fe=D;else e:for(b=R;null!==fe;){if(2048&(k=fe).flags)try{switch(k.tag){case 0:case 11:case 15:ii(9,k)}}catch(ge){_t(k,k.return,ge)}if(k===b){fe=null;break e}var ne=k.sibling;if(null!==ne){ne.return=k.return,fe=ne;break e}fe=k.return}}if(Re=m,bo(),zn&&"function"==typeof zn.onPostCommitFiberRoot)try{zn.onPostCommitFiberRoot(os,s)}catch{}d=!0}return d}finally{Le=c,_n.transition=a}}return!1}function aa(s,a,c){s=Co(s,a=ln(0,a=Ri(c,a),1),1),a=Wt(),null!==s&&(Ki(s,1,a),xt(s,a))}function _t(s,a,c){if(3===s.tag)aa(s,s,c);else for(;null!==a;){if(3===a.tag){aa(a,s,c);break}if(1===a.tag){var d=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===En||!En.has(d))){a=Co(a,s=ql(a,s=Ri(c,s),1),1),s=Wt(),null!==a&&(Ki(a,1,s),xt(a,s));break}}a=a.return}}function _f(s,a,c){var d=s.pingCache;null!==d&&d.delete(a),a=Wt(),s.pingedLanes|=s.suspendedLanes&c,ft===s&&(mt&c)===c&&(4===Nt||3===Nt&&(130023424&mt)===mt&&500>vt()-ta?ai(s,0):ac|=c),xt(s,a)}function Od(s,a){0===a&&(1&s.mode?(a=rs,!(130023424&(rs<<=1))&&(rs=4194304)):a=1);var c=Wt();null!==(s=to(s,a))&&(Ki(s,a,c),xt(s,c))}function Vd(s){var a=s.memoizedState,c=0;null!==a&&(c=a.retryLane),Od(s,c)}function hf(s,a){var c=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;null!==m&&(c=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(w(314))}null!==d&&d.delete(a),Od(s,c)}function Bd(s,a){return eu(s,a)}function gf(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(s,a,c,d){return new gf(s,a,c,d)}function gc(s){return!(!(s=s.prototype)||!s.isReactComponent)}function Io(s,a){var c=s.alternate;return null===c?((c=In(s.tag,a,s.key,s.mode)).elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&s.flags,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,c.dependencies=null===(a=s.dependencies)?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function la(s,a,c,d,m,h){var b=2;if(d=s,"function"==typeof s)gc(s)&&(b=1);else if("string"==typeof s)b=5;else e:switch(s){case dt:return li(c.children,m,h,a);case On:b=8,m|=8;break;case hn:return(s=In(12,c,a,2|m)).elementType=hn,s.lanes=h,s;case nn:return(s=In(13,c,a,m)).elementType=nn,s.lanes=h,s;case on:return(s=In(19,c,a,m)).elementType=on,s.lanes=h,s;case ke:return ca(c,m,h,a);default:if("object"==typeof s&&null!==s)switch(s.$$typeof){case gn:b=10;break e;case vn:b=9;break e;case yn:b=11;break e;case qn:b=14;break e;case ee:b=16,d=null;break e}throw Error(w(130,null==s?s:typeof s,""))}return(a=In(b,c,a,m)).elementType=s,a.type=d,a.lanes=h,a}function li(s,a,c,d){return(s=In(7,s,d,a)).lanes=c,s}function ca(s,a,c,d){return(s=In(22,s,d,a)).elementType=ke,s.lanes=c,s.stateNode={isHidden:!1},s}function vc(s,a,c){return(s=In(6,s,null,a)).lanes=c,s}function yc(s,a,c){return(a=In(4,null!==s.children?s.children:[],s.key,a)).lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function yf(s,a,c,d,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ha(0),this.expirationTimes=Ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function bc(s,a,c,d,m,h,b,k,F){return s=new yf(s,a,c,k,F),1===a?(a=1,!0===h&&(a|=8)):a=0,h=In(3,null,null,a),s.current=h,h.stateNode=s,h.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Al(h),s}function Pd(s){if(!s)return yo;e:{if(Go(s=s._reactInternals)!==s||1!==s.tag)throw Error(w(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(an(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(w(171))}if(1===s.tag){var c=s.type;if(an(c))return Yu(s,c,a)}return a}function Ld(s,a,c,d,m,h,b,k,F){return(s=bc(c,d,!0,s,0,h,0,k,F)).context=Pd(null),c=s.current,(h=oo(d=Wt(),m=$n(c))).callback=a??null,Co(c,h,m),s.current.lanes=m,Ki(s,m,d),xt(s,d),s}function ua(s,a,c,d){var m=a.current,h=Wt(),b=$n(m);return c=Pd(c),null===a.context?a.context=c:a.pendingContext=c,(a=oo(h,b)).payload={element:s},null!==(d=void 0===d?null:d)&&(a.callback=d),null!==(s=Co(m,a,b))&&(zt(s,m,b,h),Ps(s,m,b)),b}function da(s){return(s=s.current).child?s.child.stateNode:null}function Ud(s,a){if(null!==(s=s.memoizedState)&&null!==s.dehydrated){var c=s.retryLane;s.retryLane=0!==c&&c<a?c:a}}function xc(s,a){Ud(s,a),(s=s.alternate)&&Ud(s,a)}zd=function(s,a,c){if(null!==s)if(s.memoizedProps!==a.pendingProps||sn.current)Ft=!0;else{if(!(s.lanes&c||128&a.flags))return Ft=!1,function nc(s,a,c){switch(a.tag){case 3:Ed(a),Ni();break;case 5:id(a);break;case 1:an(a.type)&&$s(a);break;case 4:Tl(a,a.stateNode.containerInfo);break;case 10:var d=a.type._context,m=a.memoizedProps.value;Ze(Vs,d._currentValue),d._currentValue=m;break;case 13:if(null!==(d=a.memoizedState))return null!==d.dehydrated?(Ze(rt,1&rt.current),a.flags|=128,null):c&a.child.childLanes?Mi(s,a,c):(Ze(rt,1&rt.current),null!==(s=Ln(s,a,c))?s.sibling:null);Ze(rt,1&rt.current);break;case 19:if(d=!!(c&a.childLanes),128&s.flags){if(d)return Nr(s,a,c);a.flags|=128}if(null!==(m=a.memoizedState)&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ze(rt,rt.current),d)break;return null;case 22:case 23:return a.lanes=0,wd(s,a,c)}return Ln(s,a,c)}(s,a,c);Ft=!!(131072&s.flags)}else Ft=!1,Qe&&1048576&a.flags&&yl(a,wi,a.index);switch(a.lanes=0,a.tag){case 2:var d=a.type;ko(s,a),s=a.pendingProps;var m=Ci(a,Lt.current);Ai(a,c),m=Ml(null,a,d,s,m,c);var h=$l();return a.flags|=1,"object"==typeof m&&null!==m&&"function"==typeof m.render&&void 0===m.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,an(d)?(h=!0,$s(a)):h=!1,a.memoizedState=null!=m.state?m.state:null,Al(a),m.updater=qs,a.stateNode=m,m._reactInternals=a,Hl(a,d,s,c),a=tc(null,a,d,!0,h,c)):(a.tag=0,Qe&&h&&Zu(a),Dt(null,a,m,c),a=a.child),a;case 16:d=a.elementType;e:{switch(ko(s,a),s=a.pendingProps,d=(m=d._init)(d._payload),a.type=d,m=a.tag=function vf(s){if("function"==typeof s)return gc(s)?1:0;if(null!=s){if((s=s.$$typeof)===yn)return 11;if(s===qn)return 14}return 2}(d),s=Fn(d,s),m){case 0:a=ec(null,a,d,s,c);break e;case 1:a=Nd(null,a,d,s,c);break e;case 11:a=Qo(null,a,d,s,c);break e;case 14:a=Jl(null,a,d,Fn(d.type,s),c);break e}throw Error(w(306,d,""))}return a;case 0:return m=a.pendingProps,ec(s,a,d=a.type,m=a.elementType===d?m:Fn(d,m),c);case 1:return m=a.pendingProps,Nd(s,a,d=a.type,m=a.elementType===d?m:Fn(d,m),c);case 3:e:{if(Ed(a),null===s)throw Error(w(387));d=a.pendingProps,m=(h=a.memoizedState).element,mr(s,a),Ls(a,d,null,c);var b=a.memoizedState;if(d=b.element,h.isDehydrated){if(a.updateQueue.baseState=h={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},a.memoizedState=h,256&a.flags){a=Rn(s,a,d,c,m=Ri(Error(w(423)),a));break e}if(d!==m){a=Rn(s,a,d,c,m=Ri(Error(w(424)),a));break e}for(mn=go(a.stateNode.containerInfo.firstChild),fn=a,Qe=!0,Cn=null,c=kl(a,null,d,c),a.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(Ni(),d===m){a=Ln(s,a,c);break e}Dt(s,a,d,c)}a=a.child}return a;case 5:return id(a),null===s&&xl(a),h=null!==s?s.memoizedProps:null,b=(m=a.pendingProps).children,fl(d=a.type,m)?b=null:null!==h&&fl(d,h)&&(a.flags|=32),Ql(s,a),Dt(s,a,b,c),a.child;case 6:return null===s&&xl(a),null;case 13:return Mi(s,a,c);case 4:return Tl(a,a.stateNode.containerInfo),d=a.pendingProps,null===s?a.child=Ii(a,null,d,c):Dt(s,a,d,c),a.child;case 11:return m=a.pendingProps,Qo(s,a,d=a.type,m=a.elementType===d?m:Fn(d,m),c);case 7:return Dt(s,a,a.pendingProps,c),a.child;case 8:case 12:return Dt(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.memoizedProps,b=(m=a.pendingProps).value,Ze(Vs,(d=a.type._context)._currentValue),d._currentValue=b,null!==h)if(De(h.value,b)){if(h.children===m.children&&!sn.current){a=Ln(s,a,c);break e}}else for(null!==(h=a.child)&&(h.return=a);null!==h;){var k=h.dependencies;if(null!==k){b=h.child;for(var F=k.firstContext;null!==F;){if(F.context===d){if(1===h.tag){(F=oo(-1,c&-c)).tag=2;var z=h.updateQueue;if(null!==z){var q=(z=z.shared).pending;null===q?F.next=F:(F.next=q.next,q.next=F),z.pending=F}}h.lanes|=c,null!==(F=h.alternate)&&(F.lanes|=c),El(h.return,c,a),k.lanes|=c;break}F=F.next}}else if(10===h.tag)b=h.type===a.type?null:h.child;else if(18===h.tag){if(null===(b=h.return))throw Error(w(341));b.lanes|=c,null!==(k=b.alternate)&&(k.lanes|=c),El(b,c,a),b=h.sibling}else b=h.child;if(null!==b)b.return=h;else for(b=h;null!==b;){if(b===a){b=null;break}if(null!==(h=b.sibling)){h.return=b.return,b=h;break}b=b.return}h=b}Dt(s,a,m.children,c),a=a.child}return a;case 9:return m=a.type,d=a.pendingProps.children,Ai(a,c),d=d(m=Sn(m)),a.flags|=1,Dt(s,a,d,c),a.child;case 14:return m=Fn(d=a.type,a.pendingProps),Jl(s,a,d,m=Fn(d.type,m),c);case 15:return Kl(s,a,a.type,a.pendingProps,c);case 17:return m=a.pendingProps,m=a.elementType===(d=a.type)?m:Fn(d,m),ko(s,a),a.tag=1,an(d)?(s=!0,$s(a)):s=!1,Ai(a,c),Cd(a,d,m),Hl(a,d,m,c),tc(null,a,d,!0,s,c);case 19:return Nr(s,a,c);case 22:return wd(s,a,c)}throw Error(w(156,a.tag))};var Xd="function"==typeof reportError?reportError:function(s){console.error(s)};function Cc(s){this._internalRoot=s}function pa(s){this._internalRoot=s}function Sc(s){return!(!s||1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType)}function fa(s){return!(!s||1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType&&(8!==s.nodeType||" react-mount-point-unstable "!==s.nodeValue))}function Yd(){}function ma(s,a,c,d,m){var h=c._reactRootContainer;if(h){var b=h;if("function"==typeof m){var k=m;m=function(){var F=da(b);k.call(F)}}ua(a,b,s,m)}else b=function Cf(s,a,c,d,m){if(m){if("function"==typeof d){var h=d;d=function(){var z=da(b);h.call(z)}}var b=Ld(a,d,s,0,null,!1,0,"",Yd);return s._reactRootContainer=b,s[Kn]=b.current,ur(8===s.nodeType?s.parentNode:s),No(),b}for(;m=s.lastChild;)s.removeChild(m);if("function"==typeof d){var k=d;d=function(){var z=da(F);k.call(z)}}var F=bc(s,0,!1,null,0,!1,0,"",Yd);return s._reactRootContainer=F,s[Kn]=F.current,ur(8===s.nodeType?s.parentNode:s),No(function(){ua(a,F,c,d)}),F}(c,a,s,m,d);return da(b)}pa.prototype.render=Cc.prototype.render=function(s){var a=this._internalRoot;if(null===a)throw Error(w(409));ua(s,a,null,null)},pa.prototype.unmount=Cc.prototype.unmount=function(){var s=this._internalRoot;if(null!==s){this._internalRoot=null;var a=s.containerInfo;No(function(){ua(null,s,null,null)}),a[Kn]=null}},pa.prototype.unstable_scheduleHydration=function(s){if(s){var a=lu();s={blockedOn:null,target:s,priority:a};for(var c=0;c<_o.length&&0!==a&&a<_o[c].priority;c++);_o.splice(c,0,s),0===c&&Ka(s)}},su=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=Ji(a.pendingLanes);0!==c&&(as(a,1|c),xt(a,vt()),!(6&Re)&&(si=vt()+500,bo()))}break;case 13:No(function(){var d=to(s,1);if(null!==d){var m=Wt();zt(d,s,1,m)}}),xc(s,1)}},Wa=function(s){if(13===s.tag){var a=to(s,134217728);null!==a&&zt(a,s,134217728,Wt()),xc(s,134217728)}},au=function(s){if(13===s.tag){var a=$n(s),c=to(s,a);null!==c&&zt(c,s,a,Wt()),xc(s,a)}},lu=function(){return Le},cu=function(s,a){var c=Le;try{return Le=s,a()}finally{Le=c}},za=function(s,a,c){switch(a){case"input":if(ja(s,c),a=c.name,"radio"===c.type&&null!=a){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var m=js(d);if(!m)throw Error(w(90));$c(d),ja(d,m)}}}break;case"textarea":zc(s,c);break;case"select":null!=(a=c.value)&&$o(s,!!c.multiple,a,!1)}},Wc=Gr,Ba=No;var Sf={usingClientEntryPoint:!1,Events:[pr,bi,js,Yc,Hc,Gr]},Dr={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kf={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return null===(s=Kc(s))?null:s.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||function xf(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Or=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Or.isDisabled&&Or.supportsFiber)try{os=Or.inject(kf),zn=Or}catch{}}oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sf,oe.createPortal=function(s,a){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Sc(a))throw Error(w(200));return function bf(s,a,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$e,key:null==d?null:""+d,children:s,containerInfo:a,implementation:c}}(s,a,null,c)},oe.createRoot=function(s,a){if(!Sc(s))throw Error(w(299));var c=!1,d="",m=Xd;return null!=a&&(!0===a.unstable_strictMode&&(c=!0),void 0!==a.identifierPrefix&&(d=a.identifierPrefix),void 0!==a.onRecoverableError&&(m=a.onRecoverableError)),a=bc(s,1,!1,null,0,c,0,d,m),s[Kn]=a.current,ur(8===s.nodeType?s.parentNode:s),new Cc(a)},oe.findDOMNode=function(s){if(null==s)return null;if(1===s.nodeType)return s;var a=s._reactInternals;if(void 0===a)throw"function"==typeof s.render?Error(w(188)):(s=Object.keys(s).join(","),Error(w(268,s)));return null===(s=Kc(a))?null:s.stateNode},oe.flushSync=function(s){return No(s)},oe.hydrate=function(s,a,c){if(!fa(a))throw Error(w(200));return ma(null,s,a,!0,c)},oe.hydrateRoot=function(s,a,c){if(!Sc(s))throw Error(w(405));var d=null!=c&&c.hydratedSources||null,m=!1,h="",b=Xd;if(null!=c&&(!0===c.unstable_strictMode&&(m=!0),void 0!==c.identifierPrefix&&(h=c.identifierPrefix),void 0!==c.onRecoverableError&&(b=c.onRecoverableError)),a=Ld(a,null,s,1,c??null,m,0,h,b),s[Kn]=a.current,ur(s),d)for(s=0;s<d.length;s++)m=(m=(c=d[s])._getVersion)(c._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new pa(a)},oe.render=function(s,a,c){if(!fa(a))throw Error(w(200));return ma(null,s,a,!1,c)},oe.unmountComponentAtNode=function(s){if(!fa(s))throw Error(w(40));return!!s._reactRootContainer&&(No(function(){ma(null,null,s,!1,function(){s._reactRootContainer=null,s[Kn]=null})}),!0)},oe.unstable_batchedUpdates=Gr,oe.unstable_renderSubtreeIntoContainer=function(s,a,c,d){if(!fa(c))throw Error(w(200));if(null==s||void 0===s._reactInternals)throw Error(w(38));return ma(s,a,c,!1,d)},oe.version="18.3.1-next-f1338f8080-20240426"},2663:(tn,oe,se)=>{var V=se(6046);oe.H=V.createRoot},6046:(tn,oe,se)=>{(function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(V){console.error(V)}})(),tn.exports=se(7578)},330:(tn,oe)=>{var se=Symbol.for("react.element"),f=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),St=Symbol.for("react.provider"),qt=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),pn=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Me=Symbol.iterator,e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},We=Object.assign,ut={};function he(j,Z,we){this.props=j,this.context=Z,this.refs=ut,this.updater=we||e}function Ae(){}function Pt(j,Z,we){this.props=j,this.context=Z,this.refs=ut,this.updater=we||e}he.prototype.isReactComponent={},he.prototype.setState=function(j,Z){if("object"!=typeof j&&"function"!=typeof j&&null!=j)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},he.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")},Ae.prototype=he.prototype;var gt=Pt.prototype=new Ae;gt.constructor=Pt,We(gt,he.prototype),gt.isPureReactComponent=!0;var Mt=Array.isArray,Pe=Object.prototype.hasOwnProperty,$t={current:null},$e={key:!0,ref:!0,__self:!0,__source:!0};function dt(j,Z,we){var Ee,Fe={},Ye=null,ot=null;if(null!=Z)for(Ee in void 0!==Z.ref&&(ot=Z.ref),void 0!==Z.key&&(Ye=""+Z.key),Z)Pe.call(Z,Ee)&&!$e.hasOwnProperty(Ee)&&(Fe[Ee]=Z[Ee]);var pt=arguments.length-2;if(1===pt)Fe.children=we;else if(1<pt){for(var ze=Array(pt),rn=0;rn<pt;rn++)ze[rn]=arguments[rn+2];Fe.children=ze}if(j&&j.defaultProps)for(Ee in pt=j.defaultProps)void 0===Fe[Ee]&&(Fe[Ee]=pt[Ee]);return{$$typeof:se,type:j,key:Ye,ref:ot,props:Fe,_owner:$t.current}}function hn(j){return"object"==typeof j&&null!==j&&j.$$typeof===se}var vn=/\/+/g;function yn(j,Z){return"object"==typeof j&&null!==j&&null!=j.key?function gn(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(we){return Z[we]})}(""+j.key):Z.toString(36)}function nn(j,Z,we,Ee,Fe){var Ye=typeof j;("undefined"===Ye||"boolean"===Ye)&&(j=null);var ot=!1;if(null===j)ot=!0;else switch(Ye){case"string":case"number":ot=!0;break;case"object":switch(j.$$typeof){case se:case f:ot=!0}}if(ot)return Fe=Fe(ot=j),j=""===Ee?"."+yn(ot,0):Ee,Mt(Fe)?(we="",null!=j&&(we=j.replace(vn,"$&/")+"/"),nn(Fe,Z,we,"",function(rn){return rn})):null!=Fe&&(hn(Fe)&&(Fe=function On(j,Z){return{$$typeof:se,type:j.type,key:Z,ref:j.ref,props:j.props,_owner:j._owner}}(Fe,we+(!Fe.key||ot&&ot.key===Fe.key?"":(""+Fe.key).replace(vn,"$&/")+"/")+j)),Z.push(Fe)),1;if(ot=0,Ee=""===Ee?".":Ee+":",Mt(j))for(var pt=0;pt<j.length;pt++){var ze=Ee+yn(Ye=j[pt],pt);ot+=nn(Ye,Z,we,ze,Fe)}else if(ze=function Be(j){return null===j||"object"!=typeof j?null:"function"==typeof(j=Me&&j[Me]||j["@@iterator"])?j:null}(j),"function"==typeof ze)for(j=ze.call(j),pt=0;!(Ye=j.next()).done;)ot+=nn(Ye=Ye.value,Z,we,ze=Ee+yn(Ye,pt++),Fe);else if("object"===Ye)throw Z=String(j),Error("Objects are not valid as a React child (found: "+("[object Object]"===Z?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ot}function on(j,Z,we){if(null==j)return j;var Ee=[],Fe=0;return nn(j,Ee,"","",function(Ye){return Z.call(we,Ye,Fe++)}),Ee}function qn(j){if(-1===j._status){var Z=j._result;(Z=Z()).then(function(we){(0===j._status||-1===j._status)&&(j._status=1,j._result=we)},function(we){(0===j._status||-1===j._status)&&(j._status=2,j._result=we)}),-1===j._status&&(j._status=0,j._result=Z)}if(1===j._status)return j._result.default;throw j._result}var ee={current:null},ke={transition:null},Ie={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:ke,ReactCurrentOwner:$t};function Ve(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:on,forEach:function(j,Z,we){on(j,function(){Z.apply(this,arguments)},we)},count:function(j){var Z=0;return on(j,function(){Z++}),Z},toArray:function(j){return on(j,function(Z){return Z})||[]},only:function(j){if(!hn(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},oe.Component=he,oe.Fragment=V,oe.Profiler=ht,oe.PureComponent=Pt,oe.StrictMode=w,oe.Suspense=tt,oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,oe.act=Ve,oe.cloneElement=function(j,Z,we){if(null==j)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ee=We({},j.props),Fe=j.key,Ye=j.ref,ot=j._owner;if(null!=Z){if(void 0!==Z.ref&&(Ye=Z.ref,ot=$t.current),void 0!==Z.key&&(Fe=""+Z.key),j.type&&j.type.defaultProps)var pt=j.type.defaultProps;for(ze in Z)Pe.call(Z,ze)&&!$e.hasOwnProperty(ze)&&(Ee[ze]=void 0===Z[ze]&&void 0!==pt?pt[ze]:Z[ze])}var ze=arguments.length-2;if(1===ze)Ee.children=we;else if(1<ze){pt=Array(ze);for(var rn=0;rn<ze;rn++)pt[rn]=arguments[rn+2];Ee.children=pt}return{$$typeof:se,type:j.type,key:Fe,ref:Ye,props:Ee,_owner:ot}},oe.createContext=function(j){return(j={$$typeof:qt,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:St,_context:j},j.Consumer=j},oe.createElement=dt,oe.createFactory=function(j){var Z=dt.bind(null,j);return Z.type=j,Z},oe.createRef=function(){return{current:null}},oe.forwardRef=function(j){return{$$typeof:nt,render:j}},oe.isValidElement=hn,oe.lazy=function(j){return{$$typeof:Oe,_payload:{_status:-1,_result:j},_init:qn}},oe.memo=function(j,Z){return{$$typeof:pn,type:j,compare:void 0===Z?null:Z}},oe.startTransition=function(j){var Z=ke.transition;ke.transition={};try{j()}finally{ke.transition=Z}},oe.unstable_act=Ve,oe.useCallback=function(j,Z){return ee.current.useCallback(j,Z)},oe.useContext=function(j){return ee.current.useContext(j)},oe.useDebugValue=function(){},oe.useDeferredValue=function(j){return ee.current.useDeferredValue(j)},oe.useEffect=function(j,Z){return ee.current.useEffect(j,Z)},oe.useId=function(){return ee.current.useId()},oe.useImperativeHandle=function(j,Z,we){return ee.current.useImperativeHandle(j,Z,we)},oe.useInsertionEffect=function(j,Z){return ee.current.useInsertionEffect(j,Z)},oe.useLayoutEffect=function(j,Z){return ee.current.useLayoutEffect(j,Z)},oe.useMemo=function(j,Z){return ee.current.useMemo(j,Z)},oe.useReducer=function(j,Z,we){return ee.current.useReducer(j,Z,we)},oe.useRef=function(j){return ee.current.useRef(j)},oe.useState=function(j){return ee.current.useState(j)},oe.useSyncExternalStore=function(j,Z,we){return ee.current.useSyncExternalStore(j,Z,we)},oe.useTransition=function(){return ee.current.useTransition()},oe.version="18.3.1"},1395:(tn,oe,se)=>{tn.exports=se(330)},6290:(tn,oe)=>{function se(ee,ke){var Ie=ee.length;ee.push(ke);e:for(;0<Ie;){var Ve=Ie-1>>>1,j=ee[Ve];if(!(0<w(j,ke)))break e;ee[Ve]=ke,ee[Ie]=j,Ie=Ve}}function f(ee){return 0===ee.length?null:ee[0]}function V(ee){if(0===ee.length)return null;var ke=ee[0],Ie=ee.pop();if(Ie!==ke){ee[0]=Ie;e:for(var Ve=0,j=ee.length,Z=j>>>1;Ve<Z;){var we=2*(Ve+1)-1,Ee=ee[we],Fe=we+1,Ye=ee[Fe];if(0>w(Ee,Ie))Fe<j&&0>w(Ye,Ee)?(ee[Ve]=Ye,ee[Fe]=Ie,Ve=Fe):(ee[Ve]=Ee,ee[we]=Ie,Ve=we);else{if(!(Fe<j&&0>w(Ye,Ie)))break e;ee[Ve]=Ye,ee[Fe]=Ie,Ve=Fe}}}return ke}function w(ee,ke){var Ie=ee.sortIndex-ke.sortIndex;return 0!==Ie?Ie:ee.id-ke.id}if("object"==typeof performance&&"function"==typeof performance.now){var ht=performance;oe.unstable_now=function(){return ht.now()}}else{var St=Date,qt=St.now();oe.unstable_now=function(){return St.now()-qt}}var nt=[],tt=[],pn=1,Oe=null,Me=3,Be=!1,e=!1,We=!1,ut="function"==typeof setTimeout?setTimeout:null,he="function"==typeof clearTimeout?clearTimeout:null,Ae=typeof setImmediate<"u"?setImmediate:null;function Pt(ee){for(var ke=f(tt);null!==ke;){if(null===ke.callback)V(tt);else{if(!(ke.startTime<=ee))break;V(tt),ke.sortIndex=ke.expirationTime,se(nt,ke)}ke=f(tt)}}function gt(ee){if(We=!1,Pt(ee),!e)if(null!==f(nt))e=!0,on(Mt);else{var ke=f(tt);null!==ke&&qn(gt,ke.startTime-ee)}}function Mt(ee,ke){e=!1,We&&(We=!1,he($e),$e=-1),Be=!0;var Ie=Me;try{for(Pt(ke),Oe=f(nt);null!==Oe&&(!(Oe.expirationTime>ke)||ee&&!hn());){var Ve=Oe.callback;if("function"==typeof Ve){Oe.callback=null,Me=Oe.priorityLevel;var j=Ve(Oe.expirationTime<=ke);ke=oe.unstable_now(),"function"==typeof j?Oe.callback=j:Oe===f(nt)&&V(nt),Pt(ke)}else V(nt);Oe=f(nt)}if(null!==Oe)var Z=!0;else{var we=f(tt);null!==we&&qn(gt,we.startTime-ke),Z=!1}return Z}finally{Oe=null,Me=Ie,Be=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var vn,Pe=!1,$t=null,$e=-1,dt=5,On=-1;function hn(){return!(oe.unstable_now()-On<dt)}function gn(){if(null!==$t){var ee=oe.unstable_now();On=ee;var ke=!0;try{ke=$t(!0,ee)}finally{ke?vn():(Pe=!1,$t=null)}}else Pe=!1}if("function"==typeof Ae)vn=function(){Ae(gn)};else if(typeof MessageChannel<"u"){var yn=new MessageChannel,nn=yn.port2;yn.port1.onmessage=gn,vn=function(){nn.postMessage(null)}}else vn=function(){ut(gn,0)};function on(ee){$t=ee,Pe||(Pe=!0,vn())}function qn(ee,ke){$e=ut(function(){ee(oe.unstable_now())},ke)}oe.unstable_IdlePriority=5,oe.unstable_ImmediatePriority=1,oe.unstable_LowPriority=4,oe.unstable_NormalPriority=3,oe.unstable_Profiling=null,oe.unstable_UserBlockingPriority=2,oe.unstable_cancelCallback=function(ee){ee.callback=null},oe.unstable_continueExecution=function(){e||Be||(e=!0,on(Mt))},oe.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dt=0<ee?Math.floor(1e3/ee):5},oe.unstable_getCurrentPriorityLevel=function(){return Me},oe.unstable_getFirstCallbackNode=function(){return f(nt)},oe.unstable_next=function(ee){switch(Me){case 1:case 2:case 3:var ke=3;break;default:ke=Me}var Ie=Me;Me=ke;try{return ee()}finally{Me=Ie}},oe.unstable_pauseExecution=function(){},oe.unstable_requestPaint=function(){},oe.unstable_runWithPriority=function(ee,ke){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ie=Me;Me=ee;try{return ke()}finally{Me=Ie}},oe.unstable_scheduleCallback=function(ee,ke,Ie){var Ve=oe.unstable_now();switch(Ie="object"==typeof Ie&&null!==Ie&&"number"==typeof(Ie=Ie.delay)&&0<Ie?Ve+Ie:Ve,ee){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return ee={id:pn++,callback:ke,priorityLevel:ee,startTime:Ie,expirationTime:j=Ie+j,sortIndex:-1},Ie>Ve?(ee.sortIndex=Ie,se(tt,ee),null===f(nt)&&ee===f(tt)&&(We?(he($e),$e=-1):We=!0,qn(gt,Ie-Ve))):(ee.sortIndex=j,se(nt,ee),e||Be||(e=!0,on(Mt))),ee},oe.unstable_shouldYield=hn,oe.unstable_wrapCallback=function(ee){var ke=Me;return function(){var Ie=Me;Me=ke;try{return ee.apply(this,arguments)}finally{Me=Ie}}}},1605:(tn,oe,se)=>{tn.exports=se(6290)},2058:(tn,oe,se)=>{var f=se(1395),w="function"==typeof Object.is?Object.is:function V(Be,e){return Be===e&&(0!==Be||1/Be==1/e)||Be!=Be&&e!=e},ht=f.useState,St=f.useEffect,qt=f.useLayoutEffect,nt=f.useDebugValue;function pn(Be){var e=Be.getSnapshot;Be=Be.value;try{var We=e();return!w(Be,We)}catch{return!0}}var Me=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function Oe(Be,e){return e()}:function tt(Be,e){var We=e(),ut=ht({inst:{value:We,getSnapshot:e}}),he=ut[0].inst,Ae=ut[1];return qt(function(){he.value=We,he.getSnapshot=e,pn(he)&&Ae({inst:he})},[Be,We,e]),St(function(){return pn(he)&&Ae({inst:he}),Be(function(){pn(he)&&Ae({inst:he})})},[Be]),nt(We),We};oe.useSyncExternalStore=void 0!==f.useSyncExternalStore?f.useSyncExternalStore:Me},7973:(tn,oe,se)=>{var f=se(1395),V=se(6485),ht="function"==typeof Object.is?Object.is:function w(Oe,Me){return Oe===Me&&(0!==Oe||1/Oe==1/Me)||Oe!=Oe&&Me!=Me},St=V.useSyncExternalStore,qt=f.useRef,nt=f.useEffect,tt=f.useMemo,pn=f.useDebugValue;oe.useSyncExternalStoreWithSelector=function(Oe,Me,Be,e,We){var ut=qt(null);if(null===ut.current){var he={hasValue:!1,value:null};ut.current=he}else he=ut.current;ut=tt(function(){function Pt($e){if(!gt){if(gt=!0,Mt=$e,$e=e($e),void 0!==We&&he.hasValue){var dt=he.value;if(We(dt,$e))return Pe=dt}return Pe=$e}if(dt=Pe,ht(Mt,$e))return dt;var On=e($e);return void 0!==We&&We(dt,On)?(Mt=$e,dt):(Mt=$e,Pe=On)}var Mt,Pe,gt=!1,$t=void 0===Be?null:Be;return[function(){return Pt(Me())},null===$t?void 0:function(){return Pt($t())}]},[Me,Be,e,We]);var Ae=St(Oe,ut[0],ut[1]);return nt(function(){he.hasValue=!0,he.value=Ae},[Ae]),pn(Ae),Ae}},6485:(tn,oe,se)=>{tn.exports=se(2058)},7528:(tn,oe,se)=>{tn.exports=se(7973)}}]);