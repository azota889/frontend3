"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[556],{4556:(F,h,s)=>{s.r(h),s.d(h,{AIRoutingModule:()=>D});var n=s(9842),l=s(5245),p=s(7005),v=s(177),c=s(9417),A=s(3617),e=s(3953),m=s(2096),g=s(1626),f=s(7673),I=s(1985),S=s(4724),M=s(867);let C=(()=>{var r;class o{exchangeToken(){let t=this.userService.getUserObj();return this.token&&this.userId==t.id?(0,f.of)({token:this.token,error:void 0}):new I.c(a=>{this.authService.apiAuthExchangeAccessTokenGet().subscribe(d=>{if(!d.success||!d.data){let u=new g.cS({status:200,body:(new S.h).getSimpleErrorMessage(d.code,d.message)});return a.next({token:"",error:u}),void a.complete()}this.userId=t.id,this.token=d.data,a.next({token:d.data,error:void 0}),a.complete()})})}constructor(t,a){(0,n.A)(this,"userService",void 0),(0,n.A)(this,"authService",void 0),(0,n.A)(this,"token",void 0),(0,n.A)(this,"userId",void 0),this.userService=t,this.authService=a}}return r=o,(0,n.A)(o,"\u0275fac",function(t){return new(t||r)(e.KVO(m.R),e.KVO(M.uR))}),(0,n.A)(o,"\u0275prov",e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})),o})(),y=(()=>{var r;class o extends A.H{constructor(t,a,d){super(),(0,n.A)(this,"userSv",void 0),(0,n.A)(this,"zone",void 0),(0,n.A)(this,"tokenSv",void 0),(0,n.A)(this,"isAdmin",!1),(0,n.A)(this,"userId",0),(0,n.A)(this,"messages",[]),(0,n.A)(this,"app",void 0),this.userSv=t,this.zone=a,this.tokenSv=d}ngOnInit(){this.isAdmin=1==this.userSv.getUserObj().id,this.userId=this.userSv.getUserObj().id,this.isAdmin&&setTimeout(()=>{this.initApp()},300)}initApp(){let t={onClientFunctionCall:(u,j)=>(console.log(u,j),"Approved"),onUpdateMessages:u=>{this.zone.run(()=>{this.messages=u})}},a={hideMessages:!1},d=window.aztAgent;this.tokenSv.exchangeToken().subscribe(u=>{this.app=d.initAgent("haiau","https://agent.azota.io",u.token,t,a)})}renderMsg(t){return this.app?this.app.renderMessage(t).outerHTML:void 0}}return r=o,(0,n.A)(o,"\u0275fac",function(t){return new(t||r)(e.rXU(m.R),e.rXU(e.SKi),e.rXU(C))}),(0,n.A)(o,"\u0275cmp",e.VBU({type:r,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["id","haiau","app-name","azota_agent"]],template:function(t,a){1&t&&e.nrm(0,"div",0),2&t&&e.BMQ("user-id",a.userId)},dependencies:[v.MD,c.YN]})),o})();var z=s(8516),O=s(7163),T=s(172),x=s(3424);const U=[{path:"",component:(()=>{var r;class o extends A.H{}return r=o,(0,n.A)(o,"\u0275fac",(()=>{let i;return function(a){return(i||(i=e.xGo(r)))(a||r)}})()),(0,n.A)(o,"\u0275cmp",e.VBU({type:r,selectors:[["ai-master-page"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(t,a){1&t&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[T.s,v.MD,c.X1,l.iI,l.n3,c.YN,z.flO,x.L,O.Id],encapsulation:2})),o})(),children:[{path:"dashboard",component:y}]}];let D=(()=>{var r;class o{}return r=o,(0,n.A)(o,"\u0275fac",function(t){return new(t||r)}),(0,n.A)(o,"\u0275mod",e.$C({type:r})),(0,n.A)(o,"\u0275inj",e.G2t({imports:[l.iI.forChild(U),l.iI,p.XE]})),o})()}}]);