"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[320],{3320:(qt,oe,le)=>{le.r(oe),le.d(oe,{AIRoutingModule:()=>jx});var f=le(9842),Ne=le(2994),W=le(7005),e=le(3953),Ot=le(9822);let kt=(()=>{var t;class r{constructor(o){(0,f.A)(this,"redirectService",void 0),this.redirectService=o}canActivate(o,i){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/"),!1)}canActivateChild(o,i){return this.canActivate(o,i)}canLoad(o){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/"),!1)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Ot.m))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Fe=le(467),V=le(177),G=le(9417),Pe=le(3617),Ae=le(8516),Ve=le(7163),De=le(1934),Oe=le(7347),Le=le(9115),we=le(3424);let Ue=(()=>{var t;class r{removeInvalidChars(o){try{return o?.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")??""}catch{return o??""}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Tt=le(4823);const Zt=(t,r)=>({width:t,height:r}),Xt=(t,r,n)=>({width:t,height:r,borderColor:n}),mt=(t,r,n,o)=>({width:t,height:r,"font-size":n,borderColor:o});function Vt(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function ot(t,r){if(1&t&&(e.qex(0),e.j41(1,"div",2),e.nrm(2,"img",3),e.nI1(3,"mycdn"),e.DNE(4,Vt,1,0,"lucide-icon",4),e.k0s(),e.bVm()),2&t){let n;const o=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(8,Zt,o.size+"px",o.size+"px")),e.R7$(),e.FS9("matTooltip",o.showTooltip?o.customTooltip?o.customTooltip:o.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!o.showTooltip||!o.customTooltip&&!o.nameCreateAvatar)("src",e.bMT(3,6,o.linkAvatar),e.B4B)("ngStyle",e.sMw(11,Xt,o.size+"px",o.size+"px",null!==(n=o.borderAvatar)&&void 0!==n?n:"")),e.R7$(2),e.Y8G("ngIf",o.showCheckUser)}}function wt(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function Nn(t,r){if(1&t&&(e.j41(0,"div",6),e.EFF(1),e.DNE(2,wt,1,0,"lucide-icon",4),e.k0s()),2&t){let n;const o=e.XpG();e.FS9("matTooltip",o.showTooltip?o.customTooltip?o.customTooltip:o.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!o.showTooltip||!o.customTooltip&&!o.nameCreateAvatar)("ngStyle",e.ziG(5,mt,o.size+"px",o.size+"px",(o.size/2>48?48:o.size/2)+"px",null!==(n=o.borderAvatar)&&void 0!==n?n:"")),e.R7$(),e.SpI(" ",o.returnNameAvatar," "),e.R7$(),e.Y8G("ngIf",o.showCheckUser)}}let En=(()=>{var t;class r extends Pe.H{createNewAvatar(){try{this.nameCreateAvatar=this.homeworkExamService.removeInvalidChars(this.nameCreateAvatar).trim()}catch{this.nameCreateAvatar=this.nameCreateAvatar}var i=this.commonService.convertVietnameseToEnglish(this.nameCreateAvatar??"").toUpperCase().split(" ");this.returnNameAvatar=1==i.length?i[0]?i[0].charAt(0):"A":i[0]?.charAt(0)+(i[i.length-1]?.charAt(0)??"")}ngOnInit(){this.createNewAvatar()}ngOnChanges(){this.createNewAvatar()}constructor(o){super(),(0,f.A)(this,"homeworkExamService",void 0),(0,f.A)(this,"nameCreateAvatar",void 0),(0,f.A)(this,"linkAvatar",void 0),(0,f.A)(this,"size",0),(0,f.A)(this,"customTooltip",void 0),(0,f.A)(this,"showTooltip",!0),(0,f.A)(this,"showCheckUser",!1),(0,f.A)(this,"borderAvatar",""),(0,f.A)(this,"returnNameAvatar",""),this.homeworkExamService=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ue))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-create-avatar"]],inputs:{nameCreateAvatar:"nameCreateAvatar",linkAvatar:"linkAvatar",size:"size",customTooltip:"customTooltip",showTooltip:"showTooltip",showCheckUser:"showCheckUser",borderAvatar:"borderAvatar"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:3,vars:2,consts:[["elseTemplate",""],[4,"ngIf","ngIfElse"],[3,"ngStyle"],[1,"border","border-slate-200","dark:border-darkmode-400",2,"border-radius","50%",3,"matTooltip","matTooltipDisabled","src","ngStyle"],["name","check","size","11","class","check-user-icon stroke-width-2.5","strokeWidth","2",4,"ngIf"],["name","check","size","11","strokeWidth","2",1,"check-user-icon","stroke-width-2.5"],["id","create-avatar",1,"create-avatar-class","border","border-slate-200","dark:border-darkmode-400",2,"display","inline-flex","justify-content","center","align-items","center","background-color","#dddddd","border-radius","50%","color","#000","font-weight","500","margin","auto",3,"matTooltip","matTooltipDisabled","ngStyle"]],template:function(o,i){if(1&o&&e.DNE(0,ot,5,15,"ng-container",1)(1,Nn,3,10,"ng-template",null,0,e.C5r),2&o){const l=e.sdS(2);e.Y8G("ngIf",i.linkAvatar)("ngIfElse",l)}},dependencies:[De.s,Tt.oV,V.MD,V.bT,V.B3,G.X1,Ne.iI,G.YN,Ae.flO,Ae.WGl,we.L,Oe.nf,Ve.Id],styles:[".check-user-icon[_ngcontent-%COMP%]{align-items:center;height:13px;width:13px;position:absolute;justify-content:center;bottom:-4px;right:0;background:#65ce8c;border-radius:50%;color:#fff}.check-user-icon[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin-bottom:8px;stroke-width:4.5px!important}.w-content[_ngcontent-%COMP%]{margin-left:10px;width:calc(100% - 46px)}.mw-name[_ngcontent-%COMP%]{max-width:calc(100% - 12px - .25rem)}"]})),r})(),lo=(()=>{var t;class r{mouseEnter(){this.isMousePosition="mouseEnter",window.setTimeout(()=>{"mouseEnter"==this.isMousePosition&&this.menuTrigger?.openMenu()},100)}mouseLeave(){this.isMousePosition="mouseLeave",window.setTimeout(()=>{"mouseLeave"==this.isMousePosition&&this.menuTrigger?.closeMenu()},300)}constructor(o){(0,f.A)(this,"menuTrigger",void 0),(0,f.A)(this,"isMousePosition","mouseLeave"),this.menuTrigger=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Le.Cp))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Ft=le(4025),pn=le(9311),Mn=le(3861),fn=le(2909),Jn=le(4006);let te=(()=>{var t;class r{constructor(o){(0,f.A)(this,"dialog",void 0),(0,f.A)(this,"open",(i,l)=>this.dialog.open(i,l)),(0,f.A)(this,"closeAll",()=>this.dialog.closeAll()),this.dialog=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Jn.bZ))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const _e=()=>({"mr-2":!0}),Te=(t,r)=>({"pl-2":t,"px-2":r}),Ye=t=>({"max-width":t}),F=t=>[t],se=t=>({return_url:t,from:"register",user_click:"true"}),Ie=t=>({return_url:t,user_click:"true"});function Xe(t,r){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"button",7),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.gotoLogin())}),e.nrm(2,"lucide-icon",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,_e)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dang_nhap")," "))}function $e(t,r){if(1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"isParentViewOnly"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"")?e.bMT(3,3,"lang_auto_phu_huynh"):null!=n.userObj&&null!=n.userObj.roles&&n.userObj.roles.includes("TEACHER")?e.bMT(4,5,"lang_auto_giao_vien"):e.bMT(5,7,"lang_auto_hoc_sinh")," ")}}function Je(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,$e,6,9,"div",16),e.k0s()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.l_i(6,Te,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(9,Ye,n.isTqbDomain&&n.isMobileWebView?"80px":"auto")),e.R7$(),e.SpI(" ",n.isAnonymous?e.bMT(3,4,"lang_auto_tai_khoan_an_danh"):null==n.userObj?null:n.userObj.fullName," "),e.R7$(2),e.Y8G("ngIf",!n.isTqbDomain)}}function ct(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9),e.bIt("mouseenter",function(){e.eBV(n);const i=e.XpG();return e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseEnter())})("mouseleave",function(){e.eBV(n);const i=e.XpG();return e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseLeave())}),e.j41(1,"div",10),e.bIt("click",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.isMobileWebView?l.avtClick():!l.isMobileDevice&&i.stopPropagation())}),e.j41(2,"div",11),e.nrm(3,"azt-create-avatar",12),e.k0s(),e.DNE(4,Je,5,11,"div",13),e.k0s()()}if(2&t){const n=e.XpG(),o=e.sdS(4);e.Y8G("matMenuTriggerFor",n.isMobileWebView?null:o),e.R7$(3),e.Y8G("nameCreateAvatar",null==n.userObj?null:n.userObj.fullName)("size",32)("showTooltip",n.isMobileDevice)("linkAvatar",null==n.userObj?null:n.userObj.avatar),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice||n.isTqbDomain)}}function _t(t,r){if(1&t&&(e.j41(0,"li")(1,"a",24),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",25),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(8,F,e.bMT(2,4,"/auth/register")))("queryParams",e.eq3(10,Ie,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,_e)),e.R7$(),e.SpI(" \xa0",e.bMT(5,6,"lang_auto_dang_ky")," ")}}function He(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,_e)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Jt(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,_e)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function np(t,r){if(1&t){const n=e.RV6();e.qex(0),e.DNE(1,_t,6,13,"li",18),e.j41(2,"li")(3,"a",19),e.nI1(4,"navigationLocalize"),e.nrm(5,"lucide-icon",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,He,5,5,"li",18)(9,Jt,5,5,"li",18),e.j41(10,"li")(11,"a",20),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.reloadBrowser())}),e.nrm(12,"lucide-icon",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"li"),e.nrm(16,"hr",22),e.k0s(),e.j41(17,"li")(18,"a",23),e.nI1(19,"navigationLocalize"),e.nrm(20,"lucide-icon",8),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.bVm()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(22,F,e.bMT(4,12,"/auth/login")))("queryParams",e.eq3(24,se,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,_e)),e.R7$(),e.SpI(" ",e.bMT(7,14,"lang_auto_dang_nhap")," "),e.R7$(2),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(3),e.Y8G("ngClass",e.lJ4(27,_e)),e.R7$(),e.SpI(" ",e.bMT(14,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(28,F,e.bMT(19,18,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(30,_e)),e.R7$(),e.SpI(" ",e.bMT(22,20,"lang_auto_dang_xuat")," ")}}function as(t,r){if(1&t&&(e.j41(0,"li")(1,"a",34),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",35),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(7,F,e.bMT(2,3,n.isTeacherDashboard?"/student/classroom/0":"/admin/dashboard"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,_e)),e.R7$(),e.SpI(" ",e.bMT(5,5,n.isTeacherDashboard?"lang_auto_vao_man_hoc_sinh":"lang_auto_vao_man_giao_vien")," ")}}function Rc(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,_e)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function ls(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,_e)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function Ua(t,r){1&t&&(e.j41(0,"li")(1,"a",36),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,F,e.bMT(2,3,"/auth/account-setting/0/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,_e)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_remove_teacher_role")," "))}function jc(t,r){1&t&&(e.j41(0,"li")(1,"a",38),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,F,e.bMT(2,3,"/auth/account-setting/1/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,_e)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_become_teacher_role")," "))}function Mc(t,r){if(1&t){const n=e.RV6();e.DNE(0,as,6,10,"li",18)(1,Rc,5,5,"li",18)(2,ls,5,5,"li",18)(3,Ua,6,10,"li",18)(4,jc,6,10,"li",18),e.j41(5,"li")(6,"a",20),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.reloadBrowser())}),e.nrm(7,"lucide-icon",21),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"li"),e.nrm(11,"hr",22),e.k0s(),e.j41(12,"li")(13,"a",30),e.nI1(14,"navigationLocalize"),e.nrm(15,"lucide-icon",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"li")(19,"a",32),e.nI1(20,"navigationLocalize"),e.nrm(21,"lucide-icon",33),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"li")(25,"a",23),e.nI1(26,"navigationLocalize"),e.nrm(27,"lucide-icon",8),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()}if(2&t){const n=e.XpG();e.Y8G("ngIf",n.isTeacherRole),e.R7$(),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(),e.Y8G("ngIf",n.isTeacherDashboard),e.R7$(),e.Y8G("ngIf",!(n.isTeacherRole||n.isTeacherDashboard||n.isBusinessDomain||n.beCreatedStudent)),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,_e)),e.R7$(),e.SpI(" ",e.bMT(9,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(31,F,e.bMT(14,18,"/auth/login-scan/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(33,_e)),e.R7$(),e.SpI(" ",e.bMT(17,20,"lang_auto_qr_dang_nhap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(34,F,e.bMT(20,22,"/auth/create-qr-forgot-pass/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(36,_e)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_auto_tao_qr_quen_mat_khau")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(37,F,e.bMT(26,26,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(39,_e)),e.R7$(),e.SpI(" ",e.bMT(29,28,"lang_auto_dang_xuat")," ")}}let Ya=(()=>{var t;class r extends Pe.H{set menuTrigger(o){this.mouseEventObj=new lo(o)}avtClick(){this.isMobileWebView&&this.redirectService.redirectToPath(`/auth/account-setting/${this.isTeacherDashboard?0:1}/0`)}gotoLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}reloadBrowser(){var i=this.commonService.getCurrentUrl();if(i.match(/(\?|&)+t=(\d)+/)){var l=i.includes("&t=")?i.replace(/\&t=(\d)+/,"&t="+this.timeService.getCurrentSecond()):i.replace(/\?t=(\d)+/,"?t="+this.timeService.getCurrentSecond());location.replace(l)}else i=i.includes("?")?i+"&t="+this.timeService.getCurrentSecond():i+"?t="+this.timeService.getCurrentSecond(),location.replace(i)}switchModeUI(o){let i=document.getElementById("azota-app-html");this.modeUI=o,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?i&&(i.classList.remove("dark"),i.classList.add("light")):i&&(i.classList.remove("light"),i.classList.add("dark"))}changeAccountStudent(){}ngOnInit(){this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getCurrentUrl(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser(),this.isTeacherRole=this.userService.isTeacherRole(),this.userLoginStateService.loginMessage.subscribe(o=>{this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser()}),super.ngOnInit()}constructor(o,i,l,u,p,_,v){super(),(0,f.A)(this,"router",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"userLoginStateService",void 0),(0,f.A)(this,"timeService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"sAztDialogService",void 0),(0,f.A)(this,"isTeacherDashboard",!0),(0,f.A)(this,"beCreatedStudent",!1),(0,f.A)(this,"mouseEventObj",void 0),(0,f.A)(this,"returnUrl",""),(0,f.A)(this,"userObj",void 0),(0,f.A)(this,"modeUI",""),(0,f.A)(this,"isAnonymous",!1),(0,f.A)(this,"isTeacherRole",!1),this.router=o,this.userService=i,this.browserStorageService=l,this.userLoginStateService=u,this.timeService=p,this.redirectService=_,this.sAztDialogService=v}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ne.Ix),e.rXU(Ft.R),e.rXU(pn.z),e.rXU(Mn.X),e.rXU(fn.F),e.rXU(Ot.m),e.rXU(te))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-account-menu"]],viewQuery:function(o,i){if(1&o&&e.GBs(Le.Cp,5),2&o){let l;e.mGM(l=e.lsd())&&(i.menuTrigger=l.first)}},inputs:{isTeacherDashboard:"isTeacherDashboard",beCreatedStudent:"beCreatedStudent"},standalone:!0,features:[e.Vt3,e.aNF],decls:10,vars:5,consts:[["loggedIn",""],["accountMenu","matMenu"],["notAnonymous",""],[4,"ngIf","ngIfElse"],[3,"hasBackdrop"],[1,"dropdown-menu","show","relative","w-56",3,"mouseenter","mouseleave"],[1,"dropdown-content"],["azt-track-service","header-account-menu-zWAvNkVhjVM",1,"btn","btn-sm","btn-outline-primary",3,"click"],["name","log-out","size","16",3,"ngClass"],["azt-track-service","header-account-menu-S984kCyEl",3,"mouseenter","mouseleave","matMenuTriggerFor"],["azt-track-service","header-account-menu-_z5kaOQTx",1,"dropdown-toggle","w-full","h-10","rounded-full","flex","trigger-menu",2,"align-items","center",3,"click"],[1,"relative"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"font-medium",3,"ngStyle"],["class","text-xs text-slate-600 -mt-0.5 dark:text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-600","-mt-0.5","dark:text-slate-500"],[4,"ngIf"],["azt-track-service","header-account-menu-eSx-v39GRMc",1,"dropdown-item",3,"routerLink","queryParams"],["azt-track-service","header-account-menu-SEi5xr4uPic",1,"dropdown-item",3,"click"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","header-account-menu-mn5LIp-0AtS",1,"dropdown-item",3,"routerLink"],["azt-track-service","header-account-menu-vlcN2DxtbR2",1,"dropdown-item",3,"routerLink","queryParams"],["name","circle-arrow-right","size","16",3,"ngClass"],["azt-track-service","header-account-menu-iNoUc0CT5wP",1,"dropdown-item",3,"click"],["name","moon","size","16",3,"ngClass"],["azt-track-service","header-account-menu-CI1BdC7HViT",1,"dropdown-item",3,"click"],["name","sun","size","16",3,"ngClass"],["azt-track-service","header-account-menu--T0bM_cz_i7",1,"dropdown-item",3,"routerLink"],["name","scan-line","size","16",3,"ngClass"],["azt-track-service","header-account-menu-XYfAXj_Jl4e",1,"dropdown-item",3,"routerLink"],["name","qr-code","size","16",3,"ngClass"],["azt-track-service","header-account-menu-Q26_sXs6gkC",1,"dropdown-item",3,"routerLink"],["name","arrow-right-left","size","16",3,"ngClass"],["azt-track-service","header-account-menu-VzCUMIT5BDg",1,"dropdown-item",3,"routerLink"],["name","shield-check","size","16",3,"ngClass"],["azt-track-service","header-account-menu-jozmhaRatuz",1,"dropdown-item",3,"routerLink"]],template:function(o,i){if(1&o){const l=e.RV6();e.DNE(0,Xe,5,5,"ng-container",3)(1,ct,5,6,"ng-template",null,0,e.C5r),e.j41(3,"mat-menu",4,1)(5,"div",5),e.bIt("mouseenter",function(){return e.eBV(l),e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseEnter())})("mouseleave",function(){return e.eBV(l),e.Njj(null==i.mouseEventObj?null:i.mouseEventObj.mouseLeave())}),e.j41(6,"ul",6),e.DNE(7,np,23,31,"ng-container",3)(8,Mc,30,40,"ng-template",null,2,e.C5r),e.k0s()()()}if(2&o){const l=e.sdS(2),u=e.sdS(9);e.Y8G("ngIf",!i.userService.isLogin())("ngIfElse",l),e.R7$(3),e.Y8G("hasBackdrop",!1),e.R7$(4),e.Y8G("ngIf",i.isAnonymous)("ngIfElse",u)}},dependencies:[En,Oe.F2,De.s,Le.kk,Le.Cp,V.MD,V.YU,V.bT,V.B3,G.X1,Ne.iI,Ne.Wk,G.YN,Ae.flO,Ae.WGl,we.L,Oe.wp,Oe.hx,Ve.Id],encapsulation:2})),r})(),$c=(()=>{var t;class r{constructor(o){(0,f.A)(this,"elementRef",void 0),(0,f.A)(this,"isDisabled",!1),this.elementRef=o}onEnter(){const o=this.elementRef.nativeElement;this.isDisabled=o.offsetWidth==o.scrollWidth}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.aKT))}),(0,f.A)(r,"\u0275dir",e.FsC({type:t,selectors:[["","isDisabledTooltip",""]],hostBindings:function(o,i){1&o&&e.bIt("mouseenter",function(){return i.onEnter()})},inputs:{isDisabled:[0,"isDisabledTooltip","isDisabled"]},exportAs:["isDisabled"],standalone:!0})),r})();var Mo=le(665),Kn=le(661);let $o=(()=>{var t;class r{constructor(o){(0,f.A)(this,"commonService",void 0),this.commonService=o}getTypeObjNotice(o){return"NEW_SHARE_CLASS_PERMISSION"==o.type?"L\u1edbp: "+o.classroomName:"NEW_SHARE_HOMEWORK_PERMISSION"==o.type?"B\xe0i t\u1eadp: "+o.homeworkName:"NEW_SHARE_EXAM_PERMISSION"==o.type?"\u0110\u1ec1 thi: "+o.examName:"NEW_SHARE_CATEGORY_PERMISSION"==o.type?"Th\u01b0 m\u1ee5c: "+o.examName:""}getRouterLinkForNoticeObj(o,i){var l=this.redirectToPage(o,!0,i);return"string"==typeof l?l:""}getQueryParamForNoticeObj(o){var i=this.redirectToPage(o,!1);return"object"==typeof i?i:null}redirectToPage(o,i,l){switch(o.type){case"NEW_ANSWER":case"NEW_SHARE_HOMEWORK_PERMISSION":return i?`/admin/testbank/homework-results-list/${o.classroomId}/${o.homeworkId}/${o.homeworkHashId}`:null;case"HAS_MARK":case"NEW_HOMEWORK":case"RESEND_ANSWER":return i?`/bai-tap/${o.homeworkHashId}`:null;case"NEW_EXAM_SUBMIT":return i?`/admin/testbank/test-review/${o.examId}/${o.parentId}/${o.studentId}/${o.examResultId??0}`:null;case"NEW_EXAM":return i?`/de-thi/${o.examHashId}`:"";case"EXAM_HAS_MARK":return i?`/test/answer-test/${o.parentId}/0/${o.examHashId}/${o.examResultId}`:null;case"NEW_SHARE_CLASS_PERMISSION":return 1==o.isMultipleClassroom?i?"/admin/student/manage-classroom/0":"":i?"/admin/student/classroom-details/"+o.classroomId+"/0":"";case"NEW_SHARE_CATEGORY_PERMISSION":return i?`/admin/testbank/document-management/0/${o.examId}/1`:{data:this.commonService.serializeJson({shareType:`user_${o.senderId}`})};case"NEW_SHARE_EXAM_PERMISSION":return i?`/admin/testbank/exam-results-list/0/${o.examId}/0`:null;case"NEW_QA_EXAM_ASK":case"NEW_QA_HOMEWORK_ASK":return i?"/admin/teacher-qa/view-question/"+Number(o.extraDataObj?.qaQuestionId):null;case"NEW_QA_EXAM_ANSWER":case"NEW_QA_HOMEWORK_ANSWER":return i?"/student-qa/view-question/"+Number(o.extraDataObj?.qaQuestionId):null;case"NEW_ASSIGN":return i?"/admin/student/manage-classroom/0":null;case"SHARE_AZOTA_BANK_QUESTION":return i?"/auth/account-setting/0/3?tab=1":null;case"NEW_REQUEST_REAPPROVE":return i?`/admin/student/classroom-details/${o.classroomId}/0`:null;case"NEW_SHARE_PERMISSION":return null;case"NEW_CLASSROOM_NEWS":return i?l?`/student/classroom-details/${o.classroomId}/2`:`/admin/student/classroom-details/${o.classroomId}/2`:null;default:return i?"/student/classroom/0":null}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Kn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Wi=le(867);let Gc=(()=>{var t;class r{constructor(o){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"globalDataObj",{}),this.commonService=o}setGlobalData(o,i){this.globalDataObj[o]=i}getGlobalData(o){let i=this.globalDataObj[o];if(i)return this.commonService.castJsonToObj(i)}removeGlobalData(o){this.globalDataObj.hasOwnProperty(o)&&delete this.globalDataObj[o]}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Kn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Ha=le(1413),qi=le(5312);let cs=(()=>{var t;class r{logInDev(o,i){if(!qi.c.production){if(null!=i&&null!=o)return console.log(o,i);if(null!=i&&null==o)return console.log(i);null!=o&&console.log(o)}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Zi=(()=>{var t;class r{getHeaderReloadNoticeSubscriber(){return this.headerReloadNoticeListener}sendChangeLanguage(o){this._sendMessage({type:"CHANGE_LANGUAGE",status:1,message:"send_from_angular",data:{language:o}})}sendSimpleMessage(o){this._sendMessage({type:o,status:1,message:"send_from_angular",data:{}})}_sendMessage(o){this.aztCustomConsoleLogService.logInDev("To fluter data: ",o),this._sendRawMessage(JSON.stringify(o))}_sendRawMessage(o){try{let i=function Oc(){return typeof MessageInvoker<"u"?MessageInvoker:void 0}();typeof i<"u"&&i&&(this.aztCustomConsoleLogService.logInDev("Have MessageInvoker"),i.postMessage(o));let l=function Dc(){return typeof flutter_inappwebview<"u"?flutter_inappwebview:void 0}();typeof l<"u"&&l&&(this.aztCustomConsoleLogService.logInDev("Have flutter_inappwebview"),l.callHandler("toFlutter",o))}catch(i){this.aztCustomConsoleLogService.logInDev(void 0,i)}}constructor(o){(0,f.A)(this,"aztCustomConsoleLogService",void 0),(0,f.A)(this,"headerReloadNoticeListener",new Ha.B),this.aztCustomConsoleLogService=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(cs))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Ji=(()=>{var t;class r{sendReadNoticeToWebviewOfFlutter(o){(o||!this.sendMarkAsReadToFluter)&&(this.mobileWebviewService.sendSimpleMessage("OPEN_NOTIFICATION"),this.sendMarkAsReadToFluter=!0)}constructor(o){(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sendMarkAsReadToFluter",!1),this.mobileWebviewService=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Zi))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const Ki=()=>({"notification__icon dark:text-slate-500":!0}),Vc=t=>[t],zc=t=>({"mt-3":t});function Bc(t,r){1&t&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui"),e.k0s())}function op(t,r){if(1&t&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.unreadNotification," ")}}function Wa(t,r){1&t&&(e.j41(0,"div",18),e.nrm(1,"azt-loading-ui",19),e.k0s())}function qa(t,r){if(1&t&&(e.j41(0,"div",21),e.eu8(1,22),e.k0s()),2&t){e.XpG(3);const n=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function Za(t,r){1&t&&(e.j41(0,"div",23),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_thong_bao_nao")," "))}function Ja(t,r){if(1&t&&e.DNE(0,qa,2,1,"div",20)(1,Za,3,3,"ng-template",null,3,e.C5r),2&t){const n=e.sdS(2),o=e.XpG(2);e.Y8G("ngIf",o.commonNoticeData.length>0)("ngIfElse",n)}}function Ka(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,Wa,2,0,"div",17)(6,Ja,3,2,"ng-template",null,2,e.C5r),e.k0s()()),2&t){const n=e.sdS(7),o=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_thong_bao")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",n)}}function ii(t,r){if(1&t&&(e.qex(0),e.nrm(1,"azt-create-avatar",39),e.bVm()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("linkAvatar",n.senderAvatar)("nameCreateAvatar",n.senderName)("size",48)}}function ri(t,r){if(1&t&&e.nrm(0,"azt-create-avatar",42),2&t){const n=e.XpG(3).$implicit;e.Y8G("nameCreateAvatar",n.senderName)("size",48)}}function Pc(t,r){1&t&&(e.nrm(0,"azt-create-avatar",43),e.nI1(1,"coreModConvertCdnLinkOfGitHub")),2&t&&e.Y8G("linkAvatar",e.bMT(1,2,"images/logo.svg"))("size",48)}function Lc(t,r){if(1&t&&e.DNE(0,ri,1,2,"azt-create-avatar",40)(1,Pc,2,4,"azt-create-avatar",41),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Xc(t,r){if(1&t&&(e.qex(0),e.j41(1,"span",44,6),e.EFF(3),e.k0s(),e.bVm()),2&t){const n=e.sdS(2),o=e.XpG(2).$implicit;e.R7$(),e.FS9("matTooltip",o.senderName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",o.senderName," ")}}function Uc(t,r){if(1&t&&(e.j41(0,"span",44,6),e.EFF(2),e.k0s()),2&t){const n=e.sdS(1),o=e.XpG(3).$implicit;e.FS9("matTooltip",o.studentName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",o.studentName," ")}}function Yc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_re_approved_student_account")," "))}function Qa(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_bank_question")," "))}function Hc(t,r){if(1&t&&e.DNE(0,Uc,3,4,"span",45)(1,Yc,3,3,"span",46)(2,Qa,3,3,"span",46),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type&&"NEW_REQUEST_REAPPROVE"!=n.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Qi(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.j41(2,"span",48),e.EFF(3),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ","lang_auto_ban_moi_duoc_phan_quyen_cho_lop"," "),e.R7$(2),e.JRh(n.classroomName)}}function el(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_cham_diem_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function er(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function ip(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_co_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_moi_duoc_giao")," ")}}function tr(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_yeu_cau_nop_lai_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function us(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ds(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_bai_thi_moi")," "),e.R7$(3),e.JRh(n.examName)}}function tl(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_bai_thi")," "),e.R7$(3),e.JRh(n.examName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_da_duco_cham_diem")," ")}}function rp(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit,o=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ban_moi_duoc_phan_quyen_cho")," "),e.R7$(3),e.JRh(o.processNoticeService.getTypeObjNotice(n))}}function sp(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ap(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Go(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Wc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function qc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_you")+" "+(n.totalApproved?e.bMT(3,3,"lang_notice_approved")+" "+n.totalApproved+" "+e.bMT(4,5,"lang_notice_question"):"")+(n.totalApproved&&n.totalRejected?", ":" ")+(n.totalRejected?e.bMT(5,7,"lang_notice_rejected")+" "+n.totalRejected+" "+e.bMT(6,9,"lang_notice_question"):"")," ")}}function lp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_news_feed_notice_has_new")," "),e.R7$(3),e.JRh(n.classroomName)}}function Zc(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"b"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,7,"lang_auto_lop")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_auto_khong_chon_duoc_ten_do_da_co_ban_chon_mat")," ")}}function Jc(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_not_paid_your_current_months_tuition_please_complete_your_tuition")," ")}}function Kc(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_some_unfinished_exams_please_complete_them_on_time")," ")}}function Qc(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_vang_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function cp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_co_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function up(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_gui_nhan_xet_den_hoc_sinh")," ",n.classroomName," ")}}function gt(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_thay_doi_trang_thai_hoc_phi_cho_hoc_sinh")," ",n.studentName," ")}}function dp(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_co_de_thi_moi_duoc_giao_den_hoc_sinh")," ",n.studentName," ")}}function nl(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"getContentFromCustomBodyNotice"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.E5c(" ",e.bMT(7,7,"lang_core_co_thong_bao_moi_den_hoc_sinh")," ",n.studentName,' "',e.bMT(8,9,n.data),'" ')}}function eu(t,r){if(1&t&&(e.j41(0,"a",30),e.nI1(1,"navigationLocalize"),e.j41(2,"div",31)(3,"div",32),e.DNE(4,ii,2,3,"ng-container",33)(5,Lc,2,2,"ng-template",null,4,e.C5r),e.k0s(),e.j41(7,"div",34)(8,"div",35),e.DNE(9,Xc,4,4,"ng-container",33)(10,Hc,3,3,"ng-template",null,5,e.C5r),e.j41(12,"div",36),e.EFF(13),e.nI1(14,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.j41(15,"div",37),e.DNE(16,Qi,4,2,"span",38)(17,el,5,4,"span",38)(18,er,5,4,"span",38)(19,ip,7,7,"span",38)(20,tr,5,4,"span",38)(21,us,5,4,"span",38)(22,ds,5,4,"span",38)(23,tl,7,7,"span",38)(24,rp,5,4,"span",38)(25,sp,5,4,"span",38)(26,ap,5,4,"span",38)(27,Go,5,4,"span",38)(28,Wc,5,4,"span",38)(29,qc,7,11,"span",38)(30,lp,6,4,"span",38)(31,Zc,12,11,"span",38)(32,Jc,8,7,"span",38)(33,Kc,8,7,"span",38)(34,Qc,12,14,"span",38)(35,cp,12,14,"span",38)(36,up,8,8,"span",38)(37,gt,8,8,"span",38)(38,dp,8,8,"span",38)(39,nl,9,11,"span",38),e.k0s()()()()),2&t){const n=e.sdS(6),o=e.sdS(11),i=e.XpG(),l=i.$implicit,u=i.index,p=e.XpG(2);e.Y8G("routerLink",e.eq3(36,Vc,e.bMT(1,32,p.processNoticeService.getRouterLinkForNoticeObj(l,p.role))))("queryParams",p.processNoticeService.getQueryParamForNoticeObj(l)),e.R7$(2),e.Y8G("ngClass",e.eq3(38,zc,0!==u)),e.R7$(2),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",n),e.R7$(5),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",o),e.R7$(4),e.SpI(" ",e.bMT(14,34,l.createdAt)," "),e.R7$(3),e.Y8G("ngIf","NEW_ASSIGN"==l.type),e.R7$(),e.Y8G("ngIf","HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_HOMEWORK"==l.type),e.R7$(),e.Y8G("ngIf","RESEND_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM_SUBMIT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM"==l.type),e.R7$(),e.Y8G("ngIf","EXAM_HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==l.type&&(l.totalApproved>0||l.totalRejected>0)),e.R7$(),e.Y8G("ngIf","NEW_CLASSROOM_NEWS"==l.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==l.type),e.R7$(),e.Y8G("ngIf","TUITION_NOT_PAID"==l.type),e.R7$(),e.Y8G("ngIf","DONT_FINISHED_LESSON_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_DONT_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_COMMENT_FOR_YOU"==l.type),e.R7$(),e.Y8G("ngIf","UPDATE_TUITION_PAYMENT"==l.type),e.R7$(),e.Y8G("ngIf","HAS_EXAM_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","CUSTOM_CONTENT_CLASSROOM"==l.type)}}function ps(t,r){if(1&t&&(e.qex(0),e.DNE(1,eu,40,40,"a",29),e.bVm()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","NEW_SHARE_PERMISSION"!=n.type)}}function pp(t,r){if(1&t&&(e.DNE(0,ps,2,1,"ng-container",24),e.nrm(1,"hr",25),e.j41(2,"div",26),e.nI1(3,"navigationLocalize"),e.j41(4,"div",27)(5,"a",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&t){const n=e.XpG();e.Y8G("ngForOf",n.commonNoticeData),e.R7$(2),e.Y8G("routerLink",e.eq3(7,Vc,e.bMT(3,3,"/notify/"+n.role+"/0/0/0"))),e.R7$(4),e.SpI(" ",e.bMT(7,5,"lang_auto_xem_tat_ca")," ")}}let tu=(()=>{var t;class r extends Pe.H{removeNoticeNumber(){this.frontSAztCommonService.apiFrontCommonMarkNotificationAsReadGet(this.role).subscribe(o=>{1==o.success&&(this.resetNotification(0),this.getHeaderInfo())}),this.isMobileWebView&&this.redirectService.redirectToPath(`/notify/${this.role}/0/0/0`)}resetNotification(o){var i="back_header_infors_"+this.userService.getUserObj().id,l=this.globalService.getGlobalData(i);l&&l.data&&(0==o&&(l.data.unreadNotification=0,this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!0)),this.globalService.setGlobalData(i,this.serializeJson(l)))}reGetNoticeObjs(){var o="back_header_infors_"+this.userService.getUserObj().id;this.globalService.removeGlobalData(o),this.getHeaderInfo()}getHeaderInfo(){var o="back_header_infors_"+this.userService.getUserObj().id,i=this.globalService.getGlobalData(o);i?(this.unreadNotification=i.data?.unreadNotification??0,this.commonNoticeData=i.data?.commonNoticeObjs??[],this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)):(this.initStatusObj(),this.frontSAztCommonService.apiFrontCommonGetHeaderInfoGet(this.role).subscribe(l=>{1==l.success&&(this.unreadNotification=l.data?.unreadNotification??0,this.globalService.setGlobalData(o,this.serializeJson(l)),this.commonNoticeData=l.data?.commonNoticeObjs??new Array,this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getHeaderInfo()}constructor(o,i,l,u,p,_,v){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"frontSAztCommonService",void 0),(0,f.A)(this,"globalService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sAztHeaderNoticeService",void 0),(0,f.A)(this,"role",0),(0,f.A)(this,"commonNoticeData",[]),(0,f.A)(this,"unreadNotification",0),this.processNoticeService=o,this.userService=i,this.frontSAztCommonService=l,this.globalService=u,this.redirectService=p,this.mobileWebviewService=_,this.sAztHeaderNoticeService=v,this.waitDestroy(this.mobileWebviewService.getHeaderReloadNoticeSubscriber().subscribe(()=>{this.reGetNoticeObjs()}))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU($o),e.rXU(Ft.R),e.rXU(Wi.s1),e.rXU(Gc),e.rXU(Ot.m),e.rXU(Zi),e.rXU(Ji))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-notice-box"]],inputs:{role:"role"},standalone:!0,features:[e.Vt3,e.aNF],decls:9,vars:6,consts:[["notification","matMenu"],["listNoticeBox",""],["doneLoading",""],["noNotification",""],["otherTemplate",""],["notSharePermission",""],["c","isDisabled"],["azt-track-service","header-notice-box-DtIJA3xWHnn",1,"dropdown-toggle","notification","cursor-pointer","relative",3,"click","matMenuTriggerFor"],["name","bell","size","24",3,"ngClass"],["class","w-3 h-3 mx-auto inline-block",4,"ngIf"],["class","absolute bg-danger text-white rounded-full font-bold","style","top: -5px; right: -5px; font-size: 7px; overflow: hidden; width: 15px; height: 15px; line-height: 15px; text-align: center",4,"ngIf"],["class","notification-content dropdown-menu show relative pt-2",4,"ngIf"],[1,"w-3","h-3","mx-auto","inline-block"],[1,"absolute","bg-danger","text-white","rounded-full","font-bold",2,"top","-5px","right","-5px","font-size","7px","overflow","hidden","width","15px","height","15px","line-height","15px","text-align","center"],[1,"notification-content","dropdown-menu","show","relative","pt-2"],[1,"notification-content__box","dropdown-content",2,"padding","10px"],[1,"notification-content__title"],["class","w-4 h-4 mx-auto mb-4",4,"ngIf","ngIfElse"],[1,"w-4","h-4","mx-auto","mb-4"],["type","bootstrap-spinner"],["class","notice-azt",4,"ngIf","ngIfElse"],[1,"notice-azt"],[3,"ngTemplateOutlet"],[1,"w-full","text-center","text-slate-500","mt-0.5","mb-4"],[4,"ngFor","ngForOf"],[1,"dropdown-divider","border-gray/[0.08]","mt-3"],["azt-track-service","header-notice-box-m_8Z0tdYOsZ",1,"clickable","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"routerLink"],[1,"text-center","p-3"],[1,"text-primary","text-center"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams"],[1,"cursor-pointer","dropdown-item","relative","flex","items-center",3,"ngClass"],[1,"w-12","h-12","flex-none","image-fit","mr-1"],[4,"ngIf","ngIfElse"],[1,"ml-2","overflow-hidden","w-full"],[1,"flex","items-center"],[1,"text-xs","text-slate-400","ml-auto","whitespace-nowrap"],[1,"text-slate-500","mt-0.5"],[4,"ngIf"],[3,"linkAvatar","nameCreateAvatar","size"],[3,"nameCreateAvatar","size",4,"ngIf"],[3,"linkAvatar","size",4,"ngIf"],[3,"nameCreateAvatar","size"],[3,"linkAvatar","size"],[1,"font-medium","truncate","mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","font-medium truncate mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],["class","font-medium mr-5",4,"ngIf"],[1,"font-medium","mr-5"],[1,"notify__name"]],template:function(o,i){if(1&o){const l=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){return e.eBV(l),e.Njj(i.statusObj.loading?"":i.removeNoticeNumber())}),e.nrm(1,"lucide-icon",8),e.DNE(2,Bc,2,0,"div",9)(3,op,2,1,"div",10),e.k0s(),e.j41(4,"mat-menu",null,0),e.DNE(6,Ka,8,5,"div",11),e.k0s(),e.DNE(7,pp,8,9,"ng-template",null,1,e.C5r)}if(2&o){const l=e.sdS(5);e.Y8G("matMenuTriggerFor",i.isMobileWebView?null:l),e.R7$(),e.Y8G("ngClass",e.lJ4(5,Ki)),e.R7$(),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.Y8G("ngIf",i.unreadNotification&&!i.statusObj.loading),e.R7$(3),e.Y8G("ngIf",!i.isMobileWebView)}},dependencies:[$c,Mo.R,En,Oe.F2,De.s,Le.kk,Le.Cp,Tt.oV,V.MD,V.YU,V.Sq,V.bT,V.T3,G.X1,Ne.iI,Ne.Wk,G.YN,Ae.flO,Ae.WGl,we.L,Oe.wp,Oe.Vs,Oe.bH,Oe.OR,Ve.Id],encapsulation:2})),r})(),fs=(()=>{var t;class r{redirectToNewLanguage(o){if(o&&o!=this.commonService.getCurrentLang()){let _=this.commonService.getCurrentDomain();var i=_+"/"+this.commonService.getCurrentLang()+"/",l=_+"/"+o+"/",u=this.commonService.getFullCurrentUrl(),p=u.replace(i,l);p!=u&&(this.browserStorageService.saveStorage(this.defaultLangueInLocalStorageKey,o),window.location.replace(p))}}redirectToUserLanguage(){if(this.userService.isLogin()){var o=this.userService.getUserObj();this.redirectToNewLanguage(o.language?o.language:this.commonService.getDefaultLang())}else{var i=this.browserStorageService.getStorage(this.defaultLangueInLocalStorageKey);this.redirectToNewLanguage(i||this.commonService.getDefaultLang())}}constructor(o,i,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"defaultLangueInLocalStorageKey","switch_language_code"),this.commonService=o,this.userService=i,this.browserStorageService=l}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Kn.R),e.KVO(Ft.R),e.KVO(pn.z))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();function $n(t,r){1&t&&(e.j41(0,"span",9),e.nrm(1,"azt-loading-ui"),e.k0s())}function fp(t,r){if(1&t&&(e.j41(0,"button",5),e.DNE(1,$n,2,0,"span",6),e.j41(2,"span",7),e.EFF(3,"\xa0"),e.k0s(),e.nrm(4,"img",8),e.nI1(5,"coreModConvertCdnLinkOfGitHub"),e.k0s()),2&t){const n=e.XpG(),o=e.sdS(2);e.Y8G("matMenuTriggerFor",o),e.R7$(),e.Y8G("ngIf",n.statusObj.loading),e.R7$(),e.Y8G("hidden",!n.statusObj.loading),e.R7$(2),e.FS9("alt",n.imgLanguage),e.Y8G("src",e.bMT(5,5,n.imgLanguage),e.B4B)}}function In(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",10),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.switchLanguage(i.value))}),e.nrm(2,"img",11),e.nI1(3,"coreModConvertCdnLinkOfGitHub"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.FS9("alt",n),e.Y8G("src",e.bMT(3,3,n.img),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(5,5,n.label)," ")}}let mp=(()=>{var t;class r extends Pe.H{getImgLanguage(o){this.imgLanguage=this.listSupportedLanguages.find(i=>i.value==o)?.img??""}initLanguages(){this.listSupportedLanguages=this.supportedLanguagesArr.map(o=>({value:o,label:"lang_core_language_"+o,img:"flag/"+o+".svg"}))}switchLanguage(o){o&&o!=this.commonService.getCurrentLang()&&(this.userService.isLogin()?(this.initStatusObj(),this.waitDestroy(this.userLangService.apiUserLangSwitchLangGet(o).subscribe(i=>{1==i.success?(this.mobileWebviewService.sendChangeLanguage(o),setTimeout(()=>{this.stopStatusObj(),this.switchLanguageService.redirectToNewLanguage(o)},100)):this.errorStatusObj(i.message??"",!0)}))):(this.mobileWebviewService.sendChangeLanguage(o),setTimeout(()=>{this.switchLanguageService.redirectToNewLanguage(o)},100)))}ngOnInit(){this.initLanguages(),this.getImgLanguage(this.commonService.getCurrentLang()),this.imgLanguage||this.getImgLanguage(qi.c.defaultLanguage)}constructor(o,i,l,u){super(),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"userLangService",void 0),(0,f.A)(this,"switchLanguageService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"imgLanguage",""),(0,f.A)(this,"listSupportedLanguages",[]),this.userService=o,this.userLangService=i,this.switchLanguageService=l,this.mobileWebviewService=u}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ft.R),e.rXU(Wi.f$),e.rXU(fs),e.rXU(Zi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-switch-language"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:2,consts:[["switchlanguage","matMenu"],["class","btn btn-transparent p-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"dropdown-menu","show","w-32","relative"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"btn","btn-transparent","p-1",3,"matMenuTriggerFor"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[3,"hidden"],[3,"src","alt"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","azt-switch-language-2NtpICqDxdj",1,"dropdown-item",3,"click"],[1,"w-5","h-5","mr-2",3,"src","alt"]],template:function(o,i){1&o&&(e.DNE(0,fp,6,7,"button",1),e.j41(1,"mat-menu",null,0)(3,"div",2)(4,"ul",3),e.DNE(5,In,6,7,"li",4),e.k0s()()()),2&o&&(e.Y8G("ngIf",i.listSupportedLanguages.length>1),e.R7$(5),e.Y8G("ngForOf",i.listSupportedLanguages))},dependencies:[Mo.R,De.s,Le.kk,Le.Cp,V.MD,V.Sq,V.bT,G.X1,Ne.iI,G.YN,Ae.flO,we.L,Oe.wp,Oe.Vs,Ve.Id],encapsulation:2})),r})();const _p=["*"],hp=()=>({"mr-1":!0}),xt=t=>[t],nr=()=>({"text-white transform -rotate-90":!0});function or(t,r){1&t&&e.SdG(0)}function ms(t,r){if(1&t&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.headerTitle," ")}}function gp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div")(3,"button",13),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.goBack())}),e.nrm(4,"lucide-icon",14),e.j41(5,"span",15),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()(),e.j41(8,"div",16)(9,"span",17),e.EFF(10),e.k0s()(),e.j41(11,"div",12)(12,"div",18),e.nrm(13,"azt-switch-language"),e.k0s(),e.j41(14,"div",18),e.nrm(15,"header-notice-box",19),e.k0s(),e.j41(16,"div",20),e.nrm(17,"header-account-menu",21),e.k0s()()(),e.DNE(18,ms,2,1,"div",22),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngClass",e.lJ4(8,hp)),e.R7$(2),e.JRh(e.bMT(7,6,"lang_auto_quay_lai")),e.R7$(4),e.JRh(n.headerTitle),e.R7$(5),e.Y8G("role",0),e.R7$(2),e.Y8G("isTeacherDashboard",!0),e.R7$(),e.Y8G("ngIf",n.headerTitle)}}function vp(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeMenuMobile())}),e.j41(3,"div",35),e.nrm(4,"lucide-icon",50),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(6,xt,e.bMT(2,2,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(7,4,"lang_document_market_title")))}function ol(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"a",26),e.nI1(3,"navigationLocalize"),e.nrm(4,"img",27),e.nI1(5,"getLinkLogo"),e.k0s(),e.j41(6,"a",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.openMenuMobile())}),e.nrm(7,"lucide-icon",29),e.k0s()(),e.j41(8,"div",30)(9,"a",31),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.nrm(10,"lucide-icon",32),e.k0s(),e.j41(11,"ul",33)(12,"li")(13,"a",34),e.nI1(14,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(15,"div",35),e.nrm(16,"lucide-icon",36),e.k0s(),e.j41(17,"div",37),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()(),e.j41(20,"li")(21,"a",38),e.nI1(22,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(23,"div",35),e.nrm(24,"lucide-icon",39),e.k0s(),e.j41(25,"div",37),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()(),e.j41(28,"li")(29,"a",40),e.nI1(30,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(31,"div",35),e.nrm(32,"lucide-icon",41),e.k0s(),e.j41(33,"div",37),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"li")(37,"a",42),e.nI1(38,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(39,"div",35),e.nrm(40,"lucide-icon",43),e.k0s(),e.j41(41,"div",37),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",44),e.nI1(46,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(47,"div",35),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",37),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,vp,8,8,"li",46),e.j41(53,"li")(54,"a",47),e.nI1(55,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeMenuMobile())}),e.j41(56,"div",35),e.nrm(57,"lucide-icon",48),e.k0s(),e.j41(58,"div",37),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(45,xt,e.bMT(3,17,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(5,19,"smallLogo"),e.B4B),e.R7$(3),e.Y8G("ngClass",e.lJ4(47,nr)),e.R7$(3),e.Y8G("ngClass",e.lJ4(48,nr)),e.R7$(3),e.Y8G("routerLink",e.eq3(49,xt,e.bMT(14,21,"/admin/dashboard"))),e.R7$(5),e.JRh(e.bMT(19,23,"lang_auto_dashboard")),e.R7$(3),e.Y8G("routerLink",e.eq3(51,xt,e.bMT(22,25,"/admin/testbank/document-management/1/0/1"))),e.R7$(5),e.SpI(" ",e.bMT(27,27,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(53,xt,e.bMT(30,29,"/admin/testbank/document-management/0/0/1"))),e.R7$(5),e.JRh(e.bMT(35,31,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(55,xt,e.bMT(38,33,"/admin/student/manage-classroom/0"))),e.R7$(5),e.JRh(e.bMT(43,35,"lang_auto_quan_ly_lop")),e.R7$(3),e.Y8G("routerLink",e.eq3(57,xt,e.bMT(46,37,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,39,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(59,xt,e.bMT(55,41,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(60,43,"lang_cms_business_dashboard_title"))}}function nu(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",65),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",50),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_document_market_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,xt,e.bMT(3,6,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_document_market_title")))}function il(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",66),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",67),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_notice_bank_question")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,xt,e.bMT(3,6,"/admin/question-library/dashboard"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_notice_bank_question")))}function ir(t,r){if(1&t&&(e.j41(0,"nav",51)(1,"a",52),e.nI1(2,"navigationLocalize"),e.nrm(3,"img",27),e.nI1(4,"getLinkLogo"),e.k0s(),e.nrm(5,"div",53),e.j41(6,"ul")(7,"li")(8,"a",54),e.nI1(9,"navigationLocalize"),e.j41(10,"div",55),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",36),e.k0s(),e.j41(13,"div",56),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()(),e.j41(16,"li")(17,"a",57),e.nI1(18,"navigationLocalize"),e.j41(19,"div",55),e.nI1(20,"mytranslate"),e.nrm(21,"lucide-icon",39),e.k0s(),e.j41(22,"div",56),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.j41(25,"li")(26,"a",58),e.nI1(27,"navigationLocalize"),e.j41(28,"div",55),e.nI1(29,"mytranslate"),e.nrm(30,"lucide-icon",41),e.k0s(),e.j41(31,"div",56),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"li")(35,"a",59),e.nI1(36,"navigationLocalize"),e.j41(37,"div",55),e.nI1(38,"mytranslate"),e.nrm(39,"lucide-icon",43),e.k0s(),e.j41(40,"div",56),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()(),e.j41(43,"li",60),e.nI1(44,"mytranslate"),e.j41(45,"a",61),e.nI1(46,"navigationLocalize"),e.j41(47,"div",62),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",56),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,nu,9,12,"li",63)(53,il,9,12,"li",63),e.j41(54,"li",60),e.nI1(55,"mytranslate"),e.j41(56,"a",64),e.nI1(57,"navigationLocalize"),e.j41(58,"div",62),e.nrm(59,"lucide-icon",48),e.k0s(),e.j41(60,"div",56),e.EFF(61),e.nI1(62,"mytranslate"),e.k0s()()()()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(68,xt,e.bMT(2,28,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(4,30,"smallLogo"),e.B4B),e.R7$(5),e.Y8G("routerLink",e.eq3(70,xt,e.bMT(9,32,"/admin/dashboard"))),e.R7$(2),e.FS9("matTooltip",e.bMT(11,34,"lang_auto_dashboard")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(15,36,"lang_auto_dashboard")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(72,xt,e.bMT(18,38,"/admin/testbank/document-management/1/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(20,40,"lang_auto_bai_tap")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(24,42,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(74,xt,e.bMT(27,44,"/admin/testbank/document-management/0/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(29,46,"lang_auto_de_thi")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.JRh(e.bMT(33,48,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(76,xt,e.bMT(36,50,"/admin/student/manage-classroom/0"))),e.R7$(2),e.FS9("matTooltip",e.bMT(38,52,"lang_auto_quan_ly_lop")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(42,54,"lang_auto_quan_ly_lop")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(44,56,"lang_dashboard_teacher_management_box")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(78,xt,e.bMT(46,58,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,60,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.FS9("matTooltip",e.bMT(55,62,"lang_cms_business_dashboard_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(80,xt,e.bMT(57,64,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(62,66,"lang_cms_business_dashboard_title"))}}let _s=(()=>{var t;class r extends Pe.H{goBack(){this.commonService.myNavigationBySpecialQueryString(this.headerBackToLink)}openMenuMobile(){document.getElementById("toggle-menu")?.classList.add("mobile-menu--active")}closeMenuMobile(){document.getElementById("toggle-menu")?.classList.remove("mobile-menu--active")}initActiveNav(){this.activeTagHomeUrlList=["/admin/dashboard","/auth/account-setting","/notify","/admin/trash","/admin/testbank/create-website","/admin/testbank/create-website-result","/payment/azo-package","/super-role/","/azota-ads/","/auth/vip-packages","/azota-tools/"],this.activeTagHomeworkUrlList=["/admin/testbank/document-management/1","/admin/testbank/homework-results-list","/admin/testbank/config-homework","/admin/testbank/publish-document/1","/create-homework-success/","/admin/homework/add-new-homework","/admin/homework/mark-exercise"],this.activeTagExamUrlList=["/admin/testbank/matrix-list/","/admin/testbank/document-management/0","/admin/testbank/create-new-document","/admin/testbank/create-tree-document","/admin/testbank/exam-results-list","/admin/testbank/statistic/","/admin/testbank/action-online-offline/","/admin/testbank/analyze-knowledge/","/admin/testbank/config-exam-online","/admin/testbank/publish-document/0","/admin/testbank/add-student","/admin/testbank/test-review","/admin/testbank/create-exam-by-excel/","/admin/testbank/create-manual-offline-exam/","/admin/testbank/config-exam-offline/","/admin/testbank/update-exam/","/admin/testbank/update-offline-exam-code/","/admin/testbank/test-result-tracking/","/admin/testbank/download-file-print/","/admin/testbank/print-exam-and-ticket/","/admin/test-market/introduce","/admin/testbank/update-offline-exam","/admin/testbank/ai-create-exam/","/admin/testbank/create-exam-by-text/","/ladingpage/","/admin/testbank/update-capacity-exam","/admin/testbank/create-capacity-exam"],this.activeTagQuestionLibraryUrlList=["/admin/question-library/"],this.activeTagClassroomUrlList=["/admin/student"],this.activeTagGroupUrlList=["/admin/teacher-group"],this.activeTagDocumentMarketUrlList=["/document-market/"],this.activeTagBusinessUrlList=["/business/"]}ngOnInit(){super.ngOnInit(),this.initActiveNav()}constructor(o,i,l){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"headerBackToLink",""),(0,f.A)(this,"headerTitle",""),(0,f.A)(this,"checkBackDialog",!1),(0,f.A)(this,"handleBackDialog",new e.bkB),(0,f.A)(this,"activeTagHomeUrlList",[]),(0,f.A)(this,"activeTagHomeworkUrlList",[]),(0,f.A)(this,"activeTagExamUrlList",[]),(0,f.A)(this,"activeTagClassroomUrlList",[]),(0,f.A)(this,"activeTagGroupUrlList",[]),(0,f.A)(this,"activeTagDocumentMarketUrlList",[]),(0,f.A)(this,"activeTagQuestionLibraryUrlList",[]),(0,f.A)(this,"activeTagBusinessUrlList",[]),this.processNoticeService=o,this.userService=i,this.browserStorageService=l}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU($o),e.rXU(Ft.R),e.rXU(pn.z))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["teacher-layout"]],inputs:{headerBackToLink:"headerBackToLink",headerTitle:"headerTitle",checkBackDialog:"checkBackDialog"},outputs:{handleBackDialog:"handleBackDialog"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:_p,decls:18,vars:4,consts:[["BodyContentTpl",""],["TopBarTpl",""],["mobileMenuTpl",""],["DesktopMenuTpl",""],["id","azt-layout",1,"azt-layout"],[1,"azt-body"],[3,"ngTemplateOutlet"],[1,"flex","mt-[4.7rem]","md:mt-0"],[1,"content","relative"],[1,"top-bar"],[1,"azt-content"],[1,"block","w-full"],[1,"flex","items-center"],["azt-track-service","teacher-layout-txPc6qxNl",1,"btn","btn-transparent",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[1,"azt-hidden","sm:block"],[1,"font-medium","flex-one","text-center"],[1,"azt-hidden","md:block"],[1,"dropdown","mr-2","sm:mr-4"],[3,"role"],[1,"dropdown","header-account-menu"],[3,"isTeacherDashboard"],["class","block md:hidden text-center pt-2 pb-2 font-medium",4,"ngIf"],[1,"block","md:hidden","text-center","pt-2","pb-2","font-medium"],["id","toggle-menu",1,"mobile-menu","md:hidden"],[1,"mobile-menu-bar"],["azt-track-service","teacher-layout-eJLgd2yvySJ",1,"flex","mr-auto",3,"routerLink"],["alt","Azota",1,"w-10",3,"src"],["azt-track-service","teacher-layout-kPh_SLquONL",1,"mobile-menu-toggler",3,"click"],["name","bar-chart-2","size","20",3,"ngClass"],[1,"scrollable"],["azt-track-service","teacher-layout-p3XQvJS7FuD",1,"mobile-menu-toggler",3,"click"],["name","circle-x","size","32",3,"ngClass"],[1,"scrollable__content","py-2"],["azt-track-service","teacher-layout-67rbSb3dLPU",1,"menu",3,"click","routerLink"],[1,"menu__icon"],["name","house","size","24"],[1,"menu__title"],["azt-track-service","teacher-layout-J8TmW2BMwsH",1,"menu",3,"click","routerLink"],["name","file-text","size","24"],["azt-track-service","teacher-layout-U1Xi4mAqmKv",1,"menu",3,"click","routerLink"],["name","folder","size","24"],["azt-track-service","teacher-layout-nV8vMAnzV7_",1,"menu",3,"click","routerLink"],["name","layers","size","24"],["azt-track-service","teacher-layout-27U-GtoLLKH",1,"menu",3,"click","routerLink"],["name","users","size","24"],[4,"ngIf"],["azt-track-service","teacher-layout-QY_BVpu7d",1,"menu",3,"click","routerLink"],["name","plug","size","24",2,"transform","rotate(45deg)"],["azt-track-service","teacher-layout-bYWbXjGnRw",1,"menu",3,"click","routerLink"],["name","book-open","size","24"],[1,"side-nav","side-nav--simple"],["azt-track-service","teacher-layout-VhZ51QnFiPG",1,"flex","items-center","pl-5","pt-4","relative",3,"routerLink"],[1,"side-nav__devider","my-6"],["azt-track-service","teacher-layout-qPpeOjyQiU6",1,"side-menu",3,"routerLink"],[1,"side-menu__icon",3,"matTooltip","matTooltipPosition"],[1,"side-menu__title"],["azt-track-service","teacher-layout-JuqCTNWN4XT",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-tB87TxUcBLf",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-FmXRsM0ZL-Y",1,"side-menu",3,"routerLink"],[3,"matTooltip","matTooltipPosition"],["azt-track-service","teacher-layout-dUjdIyx6m3F",1,"side-menu",3,"routerLink"],[1,"side-menu__icon"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["azt-track-service","teacher-layout-Qn0hMZhPEp",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-hn8q-bW1M",1,"side-menu",3,"routerLink"],[1,"side-menu",3,"routerLink"],["name","landmark","size","24"]],template:function(o,i){if(1&o&&(e.NAR(),e.j41(0,"div",4)(1,"div",5),e.eu8(2,6),e.j41(3,"div",7),e.eu8(4,6),e.j41(5,"div",8)(6,"div",9),e.eu8(7,6),e.k0s(),e.j41(8,"div",10),e.eu8(9,6),e.k0s()()()()(),e.DNE(10,or,1,0,"ng-template",null,0,e.C5r)(12,gp,19,9,"ng-template",null,1,e.C5r)(14,ol,61,61,"ng-template",null,2,e.C5r)(16,ir,63,82,"ng-template",null,3,e.C5r)),2&o){const l=e.sdS(11),u=e.sdS(13),p=e.sdS(15),_=e.sdS(17);e.R7$(2),e.Y8G("ngTemplateOutlet",p),e.R7$(2),e.Y8G("ngTemplateOutlet",_),e.R7$(3),e.Y8G("ngTemplateOutlet",u),e.R7$(2),e.Y8G("ngTemplateOutlet",l)}},dependencies:[mp,tu,Ya,Oe.F2,De.s,Tt.oV,V.MD,V.YU,V.bT,V.T3,G.X1,Ne.iI,Ne.Wk,G.YN,Ae.flO,Ae.WGl,we.L,Oe.wp,Oe.ph,Ve.Id],encapsulation:2})),r})();var rr=le(671),ze=le(1626);const rl=qi.c.apiPlatformBaseUrl;let mn=(()=>{var t;class r{constructor(o){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",rl+"/api/App/"),this.http=o}getList(){return this.http.get(`${this.apiUrl}list`)}listTemplate(){return this.http.get(`${this.apiUrl}listTemplate`)}getListShare(){return this.http.get(`${this.apiUrl}listShare`)}credit(){return this.http.get(`${this.apiUrl}credit`)}download(o){return this.http.post(`${this.apiUrl}download`,o)}load(o){return this.http.post(`${this.apiUrl}load`,o)}save(o){return this.http.post(`${this.apiUrl}save`,o)}delete(o){return this.http.post(`${this.apiUrl}delete`,o)}share(o){return this.http.post(`${this.apiUrl}share`,o)}addCollection(o){return this.http.post(`${this.apiUrl}addCollection`,o)}addVCollection(o){return this.http.post(`${this.apiUrl}addVCollection`,o)}getAppInfo(o){return this.http.get(`${this.apiUrl}getAppInfo/${o}`)}listAppRoute(){return this.http.get(`${this.apiUrl}listAppRoute`)}listApp(){return this.http.get(`${this.apiUrl}listApp`)}runAppAsync(o,i){return this.http.post(`${this.apiUrl}runAsync/`+o+"?stream=1",i)}runApp(o,i){return this.http.post(`${this.apiUrl}run/`+o+"?stream=1",i)}cancel(o){return this.http.post(`${this.apiUrl}cancel/${o}`,{})}logAppDone(o,i){return this.http.post(`${this.apiUrl}logAppDone/`+o,{data:i})}status(o){return this.http.get(`${this.apiUrl}status/`+o)}history(o){return this.http.get(`${this.apiUrl}history/`+o)}fetchUrl(o){return this.http.post(`${this.apiUrl}fetchUrl`,o)}delColection(o){return this.http.post(`${this.apiUrl}delColection`,o)}listCollection(){return this.http.get(`${this.apiUrl}listCollection`)}listVCollection(){return this.http.get(`${this.apiUrl}listVCollection`)}listData(o){return this.http.post(`${this.apiUrl}listData`,o)}delData(o){return this.http.post(`${this.apiUrl}delData`,o)}saveData(o){return this.http.post(`${this.apiUrl}saveData`,o)}searchVector(o){return this.http.post(`${this.apiUrl}searchVector`,o)}getConf(o){return this.http.post(`${this.apiUrl}getConf`,{data:o})}getKey(o){return this.http.post(`${this.apiUrl}getKey`,{data:o})}listKeys(){return this.http.get(`${this.apiUrl}listKeys`)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(ze.Qq))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),si=(()=>{var t;class r{constructor(o){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",rl+"/api/Admin/"),this.http=o}run(o){return this.http.post(`${this.apiUrl}run`,o)}live(o){return this.http.post(`${this.apiUrl}live`,o)}stream(o,i,l){const u=new EventSource(`${this.apiUrl}stream?t=${o}`);u.onmessage=function(p){p.data.trim().startsWith("[__FINISH__] => ")?l(p.data.substr(16)):i(JSON.parse(p.data))},u.onerror=function(p){u.close(),l("")}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(ze.Qq))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var hs=function(t){return t.Text="text",t.ImageUrl="image_url",t}(hs||{});function ou(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.create())}),e.nrm(2,"i",7),e.EFF(3," Create new App "),e.k0s()()}}function sl(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",13)(1,"button",14),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.edit(i))}),e.nrm(2,"i",15),e.k0s()()}}function gs(t,r){if(1&t&&(e.j41(0,"div",8)(1,"a",9)(2,"div",10),e.nrm(3,"i"),e.j41(4,"div",11),e.EFF(5),e.k0s()()(),e.DNE(6,sl,3,0,"div",12),e.k0s()),2&t){const n=r.$implicit,o=r.index,i=e.XpG(2);e.BMQ("touranchor","azt-tour-"+(o+1)),e.R7$(),e.Mz_("href","/vi/admin/ai/app/",n.id,"",e.B4B),e.R7$(2),e.ZvI("",n.icon," text-4xl"),e.R7$(2),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngIf",i.isAdmin)}}function co(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,ou,4,0,"div",2),e.j41(2,"div",3),e.DNE(3,gs,7,8,"div",4),e.k0s()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.isAdmin),e.R7$(2),e.Y8G("ngForOf",n.listApp)}}function uo(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.editFlow())}),e.EFF(1,"Flow"),e.k0s()}}function po(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",17)(2,"label",18),e.EFF(3,"App Name"),e.k0s(),e.j41(4,"input",19),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.name,i)||(l.curApp.name=i),e.Njj(i)}),e.k0s()(),e.j41(5,"div",17)(6,"label",18),e.EFF(7,"Run Async"),e.k0s(),e.j41(8,"input",20),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.pinTaskbar,i)||(l.curApp.pinTaskbar=i),e.Njj(i)}),e.k0s()(),e.j41(9,"div",17)(10,"label",18),e.EFF(11,"Description"),e.k0s(),e.j41(12,"textarea",21),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.desc,i)||(l.curApp.desc=i),e.Njj(i)}),e.k0s()(),e.j41(13,"div",17)(14,"label",18),e.EFF(15,"Icon"),e.k0s(),e.j41(16,"input",22),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.icon,i)||(l.curApp.icon=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",23)(18,"button",24),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.close())}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",24),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.copyApp())}),e.EFF(21,"Copy"),e.k0s(),e.j41(22,"button",25),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.deleteApp())}),e.EFF(23,"Delete"),e.k0s(),e.j41(24,"button",24),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.shareApp())}),e.EFF(25),e.k0s(),e.DNE(26,uo,2,0,"button",26),e.j41(27,"button",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.save())}),e.EFF(28),e.k0s()()()}if(2&t){let n;const o=e.XpG(2);e.R7$(4),e.R50("ngModel",o.curApp.name),e.R7$(4),e.R50("ngModel",o.curApp.pinTaskbar),e.R7$(4),e.R50("ngModel",o.curApp.desc),e.R7$(4),e.R50("ngModel",o.curApp.icon),e.R7$(9),e.JRh(o.curApp.share&&o.curApp.share>0?"Remove from Shared":"Share"),e.R7$(),e.Y8G("ngIf",null!==(n=null==o.curApp?null:o.curApp.id)&&void 0!==n&&n),e.R7$(),e.Y8G("disabled",o.saving),e.R7$(),e.JRh(o.curApp.id>0?"Save":"Create App")}}function sr(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,po,29,8,"div",0),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curApp)}}let ai=(()=>{var t;class r extends Pe.H{constructor(o,i,l){super(),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"isAdmin",!1),(0,f.A)(this,"isPasting",!1),(0,f.A)(this,"listApp",[]),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"saving",!1),this.auth=o,this.userSv=i,this.appService=l}ngOnInit(){var o=this;document.addEventListener("paste",function(){var i=(0,Fe.A)(function*(l){if(!o.isPasting){o.isPasting=!0;try{o.listApp.push({icon:"bx bx-loader-circle",name:"Creating..."});const u=yield navigator.clipboard.readText();if(u.indexOf('"icon"')>0&&u.indexOf('"config"')>0){l.preventDefault();let p=JSON.parse(u);o.appService.save(p).subscribe(_=>{o.isPasting=!1,o.loadApp()})}}catch(u){o.isPasting=!1,console.error("Failed to read from clipboard: ",u)}}});return function(l){return i.apply(this,arguments)}}()),this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),i=>{this.loadApp()})}loadApp(){this.isAdmin=1==this.userSv.getUserObj().id,this.isAdmin?this.appService.getList().subscribe(o=>{this.listApp=o}):this.appService.getListShare().subscribe(o=>{this.listApp=o})}edit(o){this.curApp=o}create(){this.curApp={id:0,config:"[]",name:"",icon:""}}editFlow(){window.location.href="/vi/admin/ai/flow/"+this.curApp.id}save(){this.curApp&&(this.saving=!0,this.appService.save(this.curApp).subscribe(o=>{0==this.curApp.id?window.location.href="/vi/admin/ai/flow/"+o.data:(this.saving=!1,this.close(),this.loadApp())}))}close(){this.curApp=void 0}deleteApp(){this.curApp&&confirm(`Delete this app? [${this.curApp.name}]`)&&this.appService.delete(this.curApp).subscribe(o=>{this.close(),this.loadApp()})}copyApp(){var o=this;return(0,Fe.A)(function*(){if(!o.curApp)return;let i=JSON.parse(JSON.stringify(o.curApp));i.id=0;try{yield navigator.clipboard.writeText(JSON.stringify(i))}catch(l){console.error("Failed to copy text: ",l)}})()}shareApp(){this.curApp&&confirm(`Share this app to Public Library mean everyone can access it. Do you want to share? [${this.curApp.name}]`)&&(this.curApp.share=this.curApp.share&&this.curApp.share>0?0:1,this.appService.share(this.curApp).subscribe(o=>{alert("Share successful! We will review you app soon.")}))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(rr.u),e.rXU(Ft.R),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[4,"ngIf"],["class","box p-3 w-1/2 mx-auto mt-3",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-4 md:col-span-2 intro-y h-full",4,"ngFor","ngForOf"],[1,"text-center"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bx","bx-plus","mr-2"],[1,"col-span-4","md:col-span-2","intro-y","h-full"],["azt-track-service","dashboard-main-rF6MSAArUsY",3,"href"],[1,"box","p-8","zoom-in","h-full","text-center"],[1,"font-medium","text-center","text-base","mt-3"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],[1,"p-0",3,"click"],[1,"bx","bx-pencil"],[1,"box","p-3","w-1/2","mx-auto","mt-3"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","App Name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","1 or 0",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","bx bx-pencil",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-right"],["type","button",1,"btn","btn-label-secondary","mr-3",3,"click"],["type","button",1,"btn","text-danger","btn-label-secondary","mr-3",3,"click"],["type","button","class","btn btn-label-secondary mr-3",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click","disabled"]],template:function(o,i){1&o&&(e.j41(0,"teacher-layout"),e.DNE(1,co,4,2,"div",0)(2,sr,2,1,"div",1),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",!i.curApp),e.R7$(),e.Y8G("ngIf",i.curApp))},dependencies:[_s,V.MD,V.Sq,V.bT,G.YN,G.me,G.BC,G.vS]})),r})();var Gn=function(t){return t.HOMEWORK="homework",t.EXAM_QUESTIONS="exam_questions",t.GET_PUBLIC_UPLOAD_URL_FOR_ID_NUMBER="get_public_upload_url_for_id_number",t.GET_PUBLIC_UPLOAD_URL_FOR_DOCUMENT_BANK="get_public_upload_url_for_document_bank",t.FRONT_EXAM_MOBILE_QR="front_exam_mobile_qr",t.FRONT_HOMEWORK="front_homework",t.FRONT_EXAM="front_exam",t.AVATAR="avatar",t.BUSINESS_PLUGINS="business_plugins",t.BUSINESS_NEWS="business_news",t.EXAM_EDITOR="exam_editor",t.ADMIN="admin",t.ADMIN_DIGITALIZE="admin_digitalize",t}(Gn||{}),al=function(t){return t.ALL="*",t.WORD=".doc, .docx",t.PPT=".ppt, .pptx",t.EXCEL=".xls, .xlsx",t.PDF=".pdf",t.VIDEO="video/*",t.IMAGE="image/*, capture=camera",t.AUDIO="audio/*",t.SYNTHETIC=".doc, .docx, .ppt, .pptx, .xls, .xlsx, .pdf, video/*, image/*, audio/*",t.AZT=".azt",t}(al||{}),ll=function(t){return t.NONE="",t.WMV=".wmv",t}(ll||{});let ar=(()=>{var t;class r{constructor(){(0,f.A)(this,"fileDrop",new e.bkB),(0,f.A)(this,"preventBodyDrop",!0),(0,f.A)(this,"active",!1)}onDrop(o){o.preventDefault(),this.active=!1;const{dataTransfer:i}=o;if(i?.items){const l=[];for(let u=0;u<i.items.length;u++)"file"===i.items[u].kind&&i.items[u].getAsFile()&&l.push(i.items[u].getAsFile());i.items.clear(),Array.isArray(l)&&this.fileDrop.emit(this.removeNullFile(l))}else{const l=i?.files;i?.clearData(),l&&this.fileDrop.emit(Array.from(l))}}removeNullFile(o){for(var i=[],l=0;l<o.length;l++)o[l]&&i.push(o[l]);return i}onDragOver(o){o.stopPropagation(),o.preventDefault(),this.active=!0}onDragLeave(o){this.active=!1}onBodyDragOver(o){this.preventBodyDrop&&(o.preventDefault(),o.stopPropagation())}onBodyDrop(o){this.preventBodyDrop&&o.preventDefault()}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275dir",e.FsC({type:t,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(o,i){1&o&&e.bIt("drop",function(u){return i.onDrop(u)})("dragover",function(u){return i.onDragOver(u)})("dragleave",function(u){return i.onDragLeave(u)})("dragover",function(u){return i.onBodyDragOver(u)},!1,e.N_X)("drop",function(u){return i.onBodyDrop(u)},!1,e.N_X),2&o&&e.AVh("drop-zone-active",i.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"},standalone:!0})),r})();function lr(t){return/^(?:application\/pdf)$/i.test(t)}function fl(t){return t<=0?0:(t/=1048576,Number(t.toFixed(2)))}const An={MAX_WIDTH:1280,MAX_HEIGHT:1280,MIME_TYPE:"image/jpeg",QUALITY:.9};function ci(){return(ci=(0,Fe.A)(function*(t){try{return function vs(t){return/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump|image\/webp)$/i.test(t)}(t.type)?yield function su(t){return new Promise(r=>{const n=function xs(t){const r=t.name,n=r.lastIndexOf(".");return-1!==n&&n>0?r.slice(0,n):r}(t)+".jpeg",o=URL.createObjectURL(t),i=new Image;i.src=o,i.onerror=function(){URL.revokeObjectURL(this.src),r(t)},i.onload=()=>{try{URL.revokeObjectURL(i.src);var l=function ml(t,r,n){let o=t.width,i=t.height;return o>i?o>r&&(i=Math.round(i*r/o),o=r):i>n&&(o=Math.round(o*n/i),i=n),{width:o,height:i}}(i,An.MAX_WIDTH,An.MAX_HEIGHT);const u=l.width,p=l.height,_=document.createElement("canvas");_.width=u,_.height=p,_.getContext("2d").drawImage(i,0,0,u,p),_.toBlob(g=>{if(null!=g){const y=new File([g],n,{type:g.type});r(y)}else r(t)},An.MIME_TYPE,An.QUALITY)}catch{r(t)}}})}(t):t}catch{return t}})).apply(this,arguments)}var Qn=le(1985),dr=le(7673);let kp=(()=>{var t;class r{result(o){const i=o;return 1===o.success&&o.data&&o.data.content&&(i.data=this.decode(o.data.content)),i}payload(o){return{content:this.encode(o),typeHash:Math.floor(256*Math.random()),keyHash:"U5gleH2CsWW"}}encode(o){const i=JSON.stringify(o),l=new TextEncoder;let u=Math.floor(10*Math.random());const p=l.encode(i);for(let g=0;g<p.length;g++)p[g]=this.hashExtractTemplate[u][p[g]];let _=new Uint8Array(p.length+1);return _.set(p),_[_.length-1]=u,btoa(String.fromCharCode(..._))}decode(o){const i=atob(o).split(""),l=i.pop(),u=new Uint8Array(i.map(g=>g.charCodeAt(0))),p=l?.charCodeAt(0)??0;for(let g=0;g<u.length;g++){const y=this.hashExtractTemplate[p].indexOf(u[g]);u[g]=y}const v=new TextDecoder("utf-8").decode(u);return this.commonService.castJsonToObj(v)}constructor(o){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"hashExtractTemplate",void 0),this.commonService=o,this.hashExtractTemplate=this.commonService.castJsonToObj(this.commonService.getContentHashConfigSystem())??[]}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Kn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Np=le(8750),Ep=le(9974),vl=le(4360);function ks(t){return(0,Ep.N)((r,n)=>{let o,l,i=!1;const u=()=>{o=r.subscribe((0,vl._)(n,void 0,void 0,p=>{l||(l=new Ha.B,(0,Np.Tg)(t(l)).subscribe((0,vl._)(n,()=>o?u():i=!0))),l&&l.next(p)})),i&&(o.unsubscribe(),o=null,i=!1,u())};u()})}var ws=le(1986),Ns=le(6697),Es=le(9437),pr=le(7018);let Ip=(()=>{var t;class r{constructor(){(0,f.A)(this,"http",(0,e.WQX)(ze.Qq))}commonPutHttpProgress(o,i,l){return this.http.put(o,l,{headers:i,reportProgress:!0,observe:"events"}).pipe(ks(u=>u.pipe((0,ws.c)(1e3),(0,Ns.s)(3))),(0,Es.W)(this.handleError))}commonPutHttp(o,i,l){return this.http.put(o,l,{headers:i}).pipe(ks(u=>u.pipe((0,ws.c)(1e3),(0,Ns.s)(3))),(0,pr.H)(),(0,Es.W)(this.handleError))}commonPutHttpWithRetry(o,i,l){return this.http.put(o,l,{headers:i,observe:"response"}).pipe(ks(u=>u.pipe((0,ws.c)(1e3),(0,Ns.s)(3))),(0,pr.H)(),(0,Es.W)(this.handleError))}handleError(o){if(o&&401==o.status)var i={success:0,message:"lang_cms_error_un_auth",data:{},code:401};else i=o.error instanceof ErrorEvent?{success:0,message:"lang_cms_error_javascript",data:{},code:999}:{success:0,message:"lang_cms_error_lost_connect_to_server",data:{},code:1e3};return new Qn.c(l=>{l.next(i)})}commonGetHttp(o){return this.http.get(o).pipe(ks(i=>i.pipe((0,ws.c)(1e3),(0,Ns.s)(3))),(0,pr.H)(),(0,Es.W)(this.handleError))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Ap=(()=>{var t;class r extends Ip{commonUploadFile(o,i,l){return new Qn.c(u=>{if(!i)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();if(i.size<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=i.type?i.type:"image/jpeg",g=this._commonGetAppendUrl(o,i.name?i.name:"none",i.size.toString(),v,l);g?g.subscribe(y=>{1==y.success?this.commonPutHttp(y?.data?.upload_url??"",this._getHeaderRequest(y.data?.cloudStorageHeaderObjs??[]),i).subscribe(x=>{if(x&&x.hasOwnProperty("success")&&0==x.success)u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete();else{var C=y.data?this.convertServerFileDataToClientFileData(y.data):void 0;u.next({success:1,message:"successful",data:C,code:200}),u.complete()}}):(u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete())}):u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999})})}commonUploadFileProgress(o,i,l){return new Qn.c(u=>{if(!i)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();if(i.size<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=i.type,g=this._commonGetAppendUrl(o,i.name,i.size.toString(),v,l);if(!g)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();g.subscribe(y=>{1==y.success?this.commonPutHttpProgress(y?.data?.upload_url??"",this._getHeaderRequest(y.data?.cloudStorageHeaderObjs??[]),i).subscribe(x=>{if(x.type===ze.hv.UploadProgress)u.next({type:ze.hv.UploadProgress,loaded:x.loaded,total:x.total});else if(x.type===ze.hv.Response)if(x&&x.hasOwnProperty("success")&&0==x.success)u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete();else{let E={success:1,message:"successful",data:y.data?this.convertServerFileDataToClientFileData(y.data):void 0,code:200};u.next(E),u.complete()}else x&&x.hasOwnProperty("success")&&0==x.success&&(u.next({success:0,message:x.message,data:void 0,code:x.code}),u.complete())}):(u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete())})})}reactiveUploadBase64ToCdnWithRetry(o,i,l){return i.length<=0||i.indexOf("base64")<=-1?(0,dr.of)({success:1,message:"successfull",data:i,code:200}):new Qn.c(u=>{var p=function wp(t){var r;r=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(r.length),i=0;i<r.length;i++)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}(i),y=this._commonGetAppendUrl(o,l??"question-image-cropper-v2.png",p.size.toString(),"image/png","");if(!y)return u.next({success:0,message:"Error upload base64 to cdn!",data:i,code:999}),void u.complete();y.subscribe(x=>{x.success?this.commonPutHttpWithRetry(x.data?.upload_url??"",this._getHeaderRequest(x.data?.cloudStorageHeaderObjs??[]),p).subscribe(C=>{C&&0==C.success?(u.next({success:0,message:"Error upload base64 to cdn!",data:i,code:999}),u.complete()):(u.next({success:1,message:"successful",data:x.data?.url??"",code:200}),u.complete())}):(u.next({success:0,message:"Error upload base64 to cdn!",data:i,code:999}),u.complete())})})}commonUploadLadiPageFile(o,i){return new Qn.c(l=>{let u=o.length;u<=0&&(l.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),l.complete());var v=this._commonGetAppendUrl("website_ladipage",i,u.toString(),"text/html","");if(!v)return l.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void l.complete();v.subscribe(g=>{1==g.success?this.commonPutHttp(g?.data?.upload_url??"",this._getHeaderRequest(g.data?.cloudStorageHeaderObjs??[]),o).subscribe(y=>{if(y&&y.hasOwnProperty("success")&&0==y.success)l.next({success:0,message:y.message,data:void 0,code:y.code}),l.complete();else{let C={success:1,message:"successful",data:g.data?this.convertServerFileDataToClientFileData(g.data):void 0,code:200};l.next(C),l.complete()}}):(l.next({success:0,message:g.message,data:void 0,code:g.code}),l.complete())})})}commonUploadForMarkResult(o,i,l){return new Qn.c(u=>{let p=o.size;if(p<=0)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();var v=this._commonGetAppendUrl("mark_result",i,p.toString(),l,"");if(!v)return u.next({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}),void u.complete();v.subscribe(g=>{1==g.success?this.commonPutHttp(g?.data?.upload_url??"",this._getHeaderRequest(g.data?.cloudStorageHeaderObjs??[]),o).subscribe(y=>{if(y&&y.hasOwnProperty("success")&&0==y.success)u.next({success:0,message:y.message,data:void 0,code:y.code}),u.complete();else{let C={success:1,message:"successful",data:g.data?this.convertServerFileDataToClientFileData(g.data):void 0,code:200};u.next(C),u.complete()}}):(u.next({success:0,message:g.message,data:void 0,code:g.code}),u.complete())})})}uploadToVimeoProgress(o,i,l){return!i||i.size<=0||fl(i.size)>2e3?(0,dr.of)({success:0,message:"lang_cms_error_missing_file",data:void 0,code:999}):this.commonUploadFile(o,i,l?.qrcode??"")}uploadToCdnQuestionRawMathTypeData(o){return this.commonUploadFile("question_math_type",o,"")}uploadToCdnForHomework(o){return this.commonUploadFile("homework",o,"")}uploadToCdnProgressForExamQuestionContent(o){return this.commonUploadFileProgress("exam_questions",o,"")}uploadToCdnProgressForTestbankQuestionAttachment(o){return this.commonUploadFileProgress("exam_question_attachment",o,"")}uploadToCdnProgressForTestbankPdf(o){return this.commonUploadFileProgress("exam_pdf",o,"")}uploadToCdnProgressForTestbankDocx(o){return this.commonUploadFileProgress("exam_docx",o,"")}uploadToCdnForExamEditor(o){return this.commonUploadFile("exam_editor",o,"")}uploadToCdnProgressForFrontendHomework(o){return this.commonUploadFileProgress("front_homework",o,"")}uploadToCdnProgressForFrontendExam(o){return this.commonUploadFileProgress("front_exam",o,"")}convertServerFileDataToClientFileData(o){return{extension:o.extension,index:void 0,lastModified:void 0,mimes:o.mimes,name:o.name,path:o.path,size:o.size,thumb:void 0,url:o.url,is_video:void 0,video_id:void 0,log_id:void 0,is_vimeo:void 0}}_commonGetAppendUrl(o,i,l,u,p){return"ppt"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForPptPost(this.encryptUploadRequest(i,l,u))):"homework"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForHomeworkPost(this.encryptUploadRequest(i,l,u))):"exam_questions"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamQuestionsPost(this.encryptUploadRequest(i,l,u))):"exam_question_attachment"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamQuestionAttachmentPost(this.encryptUploadRequest(i,l,u))):"exam_pdf"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamPdfPost(this.encryptUploadRequest(i,l,u))):"exam_docx"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamDocxPost(this.encryptUploadRequest(i,l,u))):"exam_editor"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForExamEditorPost(this.encryptUploadRequest(i,l,u))):"file_scan_test_offline"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMobileScanPost(this.encryptUploadRequest(i,l,u))):"file_scan_name_test_offline"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMobileScanNamePost(this.encryptUploadRequest(i,l,u))):"file_scan_test_error"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForWebScanErrorPost(this.encryptUploadRequest(i,l,u))):"get_public_upload_url_for_id_number"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForIdNumberPost(this.encryptUploadRequest(i,l,u))):"question_math_type"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlExamQuestionsDocxDataPost(this.encryptUploadRequest(i,l,u))):"get_public_upload_url_for_document_bank"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForDocumentBankPost(this.encryptUploadRequest(i,l,u))):"business_news"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForBusinessNewsPost(this.encryptUploadRequest(i,l,u))):"business_plugins"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForBusinessPluginsPost(this.encryptUploadRequest(i,l,u))):"front_homework"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontHomeworkPost(this.encryptUploadRequest(i,l,u))):"front_exam"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontExamPost(this.encryptUploadRequest(i,l,u))):"front_exam_mobile_qr"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontExamMobileQrPost(this.encryptUploadRequestForQrCode(p,i,l,u))):"front_qa_question"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForFrontQaQuestionPost(this.encryptUploadRequest(i,l,u))):"qa_answer"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForQaAnswerPost(this.encryptUploadRequest(i,l,u))):"avatar"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForAvatarPost(this.encryptUploadRequest(i,l,u))):"website_ladipage"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForLadipagePost(this.encryptUploadRequest(i,l,u))):"report_error"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForErrorPost(this.encryptUploadRequest(i,l,u))):"mark_result"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForMarkPost(this.encryptUploadRequest(i,l,u))):"admin"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForCommonAdminPost(this.encryptUploadRequest(i,l,u))):"admin_digitalize"==o?this.decryptUploadResponse(this.s3EncryptSpaceService.apiS3EncryptSpaceGetPublicUploadUrlForDigitalizeAdminPost(this.encryptUploadRequest(i,l,u))):void 0}_getHeaderRequest(o){var i={};for(var l of o)null!=l.headerName&&null!=l.headerValue&&(i[l.headerName]=l.headerValue);return i}encryptUploadRequest(o,i,l){let u={fileName:o,fileSize:Number(i),mimetype:l};return this.encryptionHelper.payload(u)}encryptUploadRequestForQrCode(o,i,l,u){let p={fileName:i,fileSize:Number(l),mimetype:u,qrcode:o};return this.encryptionHelper.payload(p)}decryptUploadResponse(o){return new Qn.c(i=>{o.subscribe(l=>{if(!l.success||!l.data){let p={...l,data:void 0};return i.next(p),void i.complete()}let u=this.encryptionHelper.result(l);i.next(u),i.complete()})})}constructor(){super(),(0,f.A)(this,"encryptionHelper",(0,e.WQX)(kp)),(0,f.A)(this,"s3EncryptSpaceService",(0,e.WQX)(Wi.TZ))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Tp=le(5682),au=le(2583);let Fp=(()=>{var t;class r{getImageWithPdf(o){var i=this;return(0,Fe.A)(function*(){var l=[];try{var u=yield i.pdfToImageDataURLAsync(o);for(let p=0;p<u.length;p++)l.push(i.b64toFile(u[p],`${o.name}_${p}`))}catch{i.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}return l})()}b64toFile(o,i,l){var u="",_=[];try{l?(o=o.replace("data:"+l+";base64,",""),u=l):(o=o.replace("data:image/png;base64,",""),u="image/png");for(var v=window.atob(o),g=0;g<v.length;g+=512){for(var y=v.slice(g,g+512),x=new Array(y.length),C=0;C<y.length;C++)x[C]=y.charCodeAt(C);var E=new Uint8Array(x);_.push(E)}}catch{this.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}return new File(_,i,{type:u})}pdfToImageDataURLAsync(o){var i=this;return(0,Fe.A)(function*(){return new Promise((l,u)=>{i.loadPdfJsScript().then((0,Fe.A)(function*(){var p=[];try{const C=yield new Response(o).arrayBuffer(),E=i.document.createElement("canvas"),I=E.getContext("2d"),A=yield pdfjsLib.getDocument(new Uint8Array(C)).promise;for(let N=1;N<=A.numPages;N++){var _=yield A.getPage(N),v=1200/_.getViewport({scale:1}).width,y=_.getViewport({scale:v});E.height=y.height,E.width=y.width;const j={canvasContext:I,viewport:y};yield _.render(j).promise;var x=E.toDataURL();p.push(x)}A?.destroy(),l(p)}catch{i.commonService.snackError("lang_auto_qua_trinh_chuyen_doi_file_bi_loi_hoac_do_trinh_duyet_cua_ban_qua_cu")}}))})})()}loadPdfJsScript(){var o=this;return(0,Fe.A)(function*(){return new Promise((i,l)=>{o.commonService.loadScriptPromises([{source:o.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:o.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"}]).then((0,Fe.A)(function*(){i()})).catch(u=>{l(new Error("lang_core_lib_not_load"))})})})()}constructor(o,i,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"configService",void 0),(0,f.A)(this,"sAztCommonCdnService",void 0),(0,f.A)(this,"document",void 0),this.commonService=o,this.configService=i,this.sAztCommonCdnService=l,this.document=document}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.KVO(Kn.R),e.KVO(Tp.u),e.KVO(au.c))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const lu={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Is;const Rp=new Uint8Array(16);function jp(){if(!Is&&(Is=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Is))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Is(Rp)}const jt=[];for(let t=0;t<256;++t)jt.push((t+256).toString(16).slice(1));const uu=function cu(t,r,n){if(lu.randomUUID&&!r&&!t)return lu.randomUUID();const o=(t=t||{}).random||(t.rng||jp)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){n=n||0;for(let i=0;i<16;++i)r[n+i]=o[i];return r}return function As(t,r=0){return(jt[t[r+0]]+jt[t[r+1]]+jt[t[r+2]]+jt[t[r+3]]+"-"+jt[t[r+4]]+jt[t[r+5]]+"-"+jt[t[r+6]]+jt[t[r+7]]+"-"+jt[t[r+8]]+jt[t[r+9]]+"-"+jt[t[r+10]]+jt[t[r+11]]+jt[t[r+12]]+jt[t[r+13]]+jt[t[r+14]]+jt[t[r+15]]).toLowerCase()}(o)};let du=(()=>{var t;class r{getUuid(){return uu()}getSmallUuid(){let l="";for(let u=0;u<8;u++)l+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*Math.random())];return l}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),yl=(()=>{var t;class r extends Pe.H{uploadFile(o,i){return new Promise(l=>{this.checkCompressImage(o,u=>{this.fileUploadQueue=[],this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,u,this.qrUploadHashCode).subscribe(p=>{if(p.type!==ze.hv.UploadProgress)if(1===p.success){const _={...p.data};l(_)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",p.message??"none")),l(null);else{let _=(p.loaded??0)/(p.total??1)*100,v=this.fileUploadQueue.find(g=>g.uuid==i);v?v.uploadProgress=_:this.fileUploadQueue.push({uuid:i,uploadProgress:0,fileName:o.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,u,this.qrUploadHashCode).subscribe(p=>{if(p.type!==ze.hv.UploadProgress)if(1===p.success){const _={...p.data};l(_)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",p.message??"none")),l(null)})})})}onOpenFileDictionary(){return this.uploadActionsEvent.emit("SELECT_FILE"),!0}onFileSelected(o){this.uploadActionsEvent.emit("SELECTED");const i=o.target,l=i.files;l&&(this.emitFile(l),i.files=null)}onCancelSelect(o){this.uploadActionsEvent.emit("SELECTED")}onDrop(o){this.emitFile(o)}emitFile(o){return this.isDisabled?(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(o).find(u=>fl(u.size)>=this.limitSize)?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB")):Array.from(o).find(u=>this.isNotSupportedFile(u))?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile)):(this.isUploadFile=!0,this.isUploading.emit(this.isUploadFile),void this.checkConvertPdfToImages(Array.from(o),u=>{const p=u.map(_=>this.uploadFile(_,this.uuidService.getUuid()));Promise.all(p).then(_=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);let v=_.filter(this.commonService.notEmpty);this.emitUploadComplete(v)})}))):this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")??"")}checkConvertPdfToImages(o,i){if(!this.convertPdfToImages)return i(o);this.convertAllPdfToImages(o).then(l=>{i(l)})}convertAllPdfToImages(o){var i=this;return new Promise(function(){var l=(0,Fe.A)(function*(u,p){let _=[];for(let v of o)if(lr(v.type))try{const g=1e3*i.convertPdfTimeout;let y=yield i.withTimeout(i.myPdfService.getImageWithPdf(v),g);_.push(...y)}catch{i.showErrorSnack("lang_common_convert_pdf_to_image_timeout"),u([])}else _.push(v);u(_)});return function(u,p){return l.apply(this,arguments)}}())}checkCompressImage(o,i){this.allowCompressImage?function Cs(t){return ci.apply(this,arguments)}(o).then(l=>{i(l)}):i(o)}isNotSupportedFile(o){const i=[this.notSupportedFile],l=o.name.split(".").pop()?.toLowerCase();return i.includes(`.${l}`)}withTimeout(o,i){return new Promise((l,u)=>{const p=setTimeout(()=>{u(new Error("Operation timed out"))},i);o.then(_=>{clearTimeout(p),l(_)}).catch(_=>{clearTimeout(p),u(_)})})}constructor(o,i,l,u){super(),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"apiUploadService",void 0),(0,f.A)(this,"myPdfService",void 0),(0,f.A)(this,"uuidService",void 0),(0,f.A)(this,"convertPdfTimeout",30),(0,f.A)(this,"fileType",void 0),(0,f.A)(this,"uploadToCdnMenu",void 0),(0,f.A)(this,"isDisabled",!0),(0,f.A)(this,"notSupportedFile",ll.NONE),(0,f.A)(this,"limitSize",200),(0,f.A)(this,"allowCompressImage",!0),(0,f.A)(this,"convertPdfToImages",!1),(0,f.A)(this,"qrUploadHashCode",""),(0,f.A)(this,"showProgress",!1),(0,f.A)(this,"isUploading",new e.bkB),(0,f.A)(this,"uploadActionsEvent",new e.bkB),(0,f.A)(this,"isUploadFile",!1),(0,f.A)(this,"fileUploadQueue",[]),this.mobileWebviewService=o,this.apiUploadService=i,this.myPdfService=l,this.uuidService=u}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Zi),e.rXU(Ap),e.rXU(Fp),e.rXU(du))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],inputs:{convertPdfTimeout:"convertPdfTimeout",fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",convertPdfToImages:"convertPdfToImages",qrUploadHashCode:"qrUploadHashCode",showProgress:"showProgress"},outputs:{isUploading:"isUploading",uploadActionsEvent:"uploadActionsEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(o,i){},encapsulation:2})),r})();const pu=["*"];function pi(t,r){1&t&&e.SdG(0,0,["*ngIf","!isUploadFile"])}function Mp(t,r){if(1&t&&(e.j41(0,"div",8)(1,"h5",9),e.EFF(2),e.k0s(),e.j41(3,"div",10),e.nrm(4,"progress",11),e.k0s()()),2&t){const n=r.$implicit;e.R7$(2),e.JRh(n.fileName),e.R7$(2),e.FS9("value",n.uploadProgress)}}function $p(t,r){if(1&t&&(e.qex(0),e.j41(1,"span",6),e.nrm(2,"azt-loading-ui"),e.k0s(),e.DNE(3,Mp,5,2,"div",7),e.bVm()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.fileUploadQueue)}}function Gp(t,r){1&t&&(e.j41(0,"span",6),e.nrm(1,"azt-loading-ui"),e.k0s())}function fu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,$p,4,1,"ng-container",5)(2,Gp,2,0,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.showProgress)("ngIfElse",n)}}let bl=(()=>{var t;class r extends yl{constructor(...o){super(...o),(0,f.A)(this,"uploadComplete",new e.bkB),(0,f.A)(this,"files",void 0)}emitUploadComplete(o){this.uploadComplete.emit(o)}ngOnInit(){this.files&&this.files.length>0&&this.emitFile(this.files)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-upload-multiple-box"]],inputs:{files:"files"},outputs:{uploadComplete:"uploadComplete"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:pu,decls:5,vars:3,consts:[["formChoseFile",""],["notShowProgress",""],[1,"flex","items-center","justify-center","h-full",3,"appDropZone","click"],["type","file","id","box-left-file-input","multiple","",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"w-4","h-4","inline-block","mr-2"],["class","w-48",4,"ngFor","ngForOf"],[1,"w-48"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","background-color","#1e40af",3,"value"]],template:function(o,i){if(1&o){const l=e.RV6();e.NAR(),e.j41(0,"div",2),e.bIt("appDropZone",function(p){return e.eBV(l),e.Njj(i.onDrop(p))})("click",function(){e.eBV(l);const p=e.sdS(2);return e.Njj(p.click())}),e.j41(1,"input",3,0),e.bIt("change",function(p){return e.eBV(l),e.Njj(i.onFileSelected(p))})("cancel",function(p){return e.eBV(l),e.Njj(i.onCancelSelect(p))})("cancel",function(p){return e.eBV(l),e.Njj(i.onCancelSelect(p))}),e.k0s(),e.DNE(3,pi,1,0,"ng-content",4)(4,fu,4,2,"div",4),e.k0s()}2&o&&(e.R7$(),e.FS9("accept",i.fileType),e.R7$(2),e.Y8G("ngIf",!i.isUploadFile),e.R7$(),e.Y8G("ngIf",i.isUploadFile))},dependencies:[ar,Mo.R,De.s,V.MD,V.Sq,V.bT,G.X1,Ne.iI,G.YN,Ae.flO,we.L,Ve.Id],styles:['.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:10px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']})),r})();const fr=["*"];function mr(t,r){1&t&&e.SdG(0,0,["*ngIf","!isUploadFile"])}function Dp(t,r){1&t&&(e.j41(0,"span",5),e.nrm(1,"azt-loading-ui"),e.k0s())}let Fs=(()=>{var t;class r extends yl{constructor(...o){super(...o),(0,f.A)(this,"uploadComplete",new e.bkB)}emitUploadComplete(o){o.length>0&&this.uploadComplete.emit(o[0])}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:fr,decls:6,vars:3,consts:[["formChoseFile",""],[1,"flex","items-center","justify-center","h-full",3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(o,i){if(1&o){const l=e.RV6();e.NAR(),e.j41(0,"div",1),e.bIt("click",function(){e.eBV(l);const p=e.sdS(2);return e.Njj(i.onOpenFileDictionary()&&p.click())}),e.j41(1,"input",2,0),e.bIt("change",function(p){return e.eBV(l),e.Njj(i.onFileSelected(p))})("cancel",function(p){return e.eBV(l),e.Njj(i.onCancelSelect(p))}),e.k0s(),e.DNE(3,mr,1,0,"ng-content",3),e.j41(4,"div"),e.DNE(5,Dp,2,0,"span",4),e.k0s()()}2&o&&(e.R7$(),e.FS9("accept",i.fileType),e.R7$(2),e.Y8G("ngIf",!i.isUploadFile),e.R7$(2),e.Y8G("ngIf",i.isUploadFile))},dependencies:[Mo.R,De.s,V.MD,V.bT,G.X1,Ne.iI,G.YN,Ae.flO,we.L,Ve.Id],encapsulation:2})),r})();const mu=(t,r)=>[t,r];let _u=(()=>{var t;class r extends Pe.H{uploadMultipleFiles(o){console.log(o)}uploadSingleFile(o){console.log(o)}ngOnInit(){super.ngOnInit()}constructor(){super(),(0,f.A)(this,"allUploadToCdnMenuTypes",Gn),(0,f.A)(this,"allUploadFileTypes",al)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-demo"]],standalone:!0,features:[e.Vt3,e.aNF],decls:10,vars:16,consts:[[1,"p-3","box"],[1,"mb-3"],[3,"uploadComplete","uploadToCdnMenu","fileType","convertPdfTimeout","convertPdfToImages","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2,"Test upload file"),e.k0s(),e.j41(3,"azt-upload-multiple-box",2),e.bIt("uploadComplete",function(u){return i.uploadMultipleFiles(u)}),e.j41(4,"div",3),e.EFF(5,"Upload nhi\u1ec1u file \u1ea2nh, Pdf s\u1ebd convert qua \u1ea3nh"),e.k0s()(),e.nrm(6,"br"),e.j41(7,"azt-upload-single-box",2),e.bIt("uploadComplete",function(u){return i.uploadSingleFile(u)}),e.j41(8,"div",3),e.EFF(9,"Upload 1 file \u1ea3nh, pdf s\u1ebd convert qua \u1ea3nh"),e.k0s()()()),2&o&&(e.R7$(3),e.Y8G("uploadToCdnMenu",i.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(10,mu,i.allUploadFileTypes.IMAGE,i.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!1)("showProgress",!0),e.R7$(4),e.Y8G("uploadToCdnMenu",i.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(13,mu,i.allUploadFileTypes.IMAGE,i.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!0)("showProgress",!0))},dependencies:[bl,Fs],encapsulation:2})),r})();var Rs=le(345);let _r=(()=>{var t;class r{constructor(o){(0,f.A)(this,"sanitized",void 0),this.sanitized=o}transform(o){return this.sanitized.bypassSecurityTrustHtml(o)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Rs.up,16))}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"safeHtml",type:t,pure:!0,standalone:!0})),r})(),Ct=(()=>{var t;class r{constructor(o){(0,f.A)(this,"sanitized",void 0),this.sanitized=o}transform(o,i,l){if(!o)return o;let u=i??200;if(o.length<u)return o;let p=o;return l&&(p=p.replaceAll(l,"")),p.substring(0,u)+"..."}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Rs.up,16))}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"trunc",type:t,pure:!0,standalone:!0})),r})(),zp=(()=>{var t;class r{transform(o){if(isNaN(o)||o<0)return"00:00";o=Math.round(o);const i=Math.floor(o/60),l=o%60;return`${i<10?"0"+i:i.toString()}:${l<10?"0"+l:l.toString()}`}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"secondsToTime",type:t,pure:!0,standalone:!0})),r})();class lt{static renderMathInElement(r){MathJax.typesetPromise([r]).then(()=>{})}static markdownToHtml(r){let n=document.createElement("div");n.innerHTML=r;let o=new showdown.Converter({headerLevelStart:3,tables:!0});return MathJax.typesetPromise([n]).then(()=>{}),o.makeHtml(n.innerHTML)}static parseIncompleteJson(r){if(!r||""==r.trim()||!/^[{[].*/.test(r.trim()))return r;r.startsWith("```json")&&(r=r.substring(7).trim()),r.endsWith("```")&&(r=r.substring(0,r.length-3));try{return JSON.parse(r)}catch{}r.endsWith(",")&&(r=r.substring(0,r.length-1));let n=[],o=['"',"[","{"],i=['"',"]","}"];for(let l=0;l<r.length;l++){if(l>0&&"\\"==r.charAt(l-1))continue;let p=r.charAt(l);if('"'==n[n.length-1]){'"'==p&&n.splice(n.length-1);continue}if(o.includes(p)){n.push(p);continue}let _=i.indexOf(p);_>=0&&n[n.length-1]==o[_]&&n.splice(n.length-1)}if(n.length>0)for(let l=n.length-1;l>=0;l--)r+=i[o.indexOf(n[l])];try{return JSON.parse(r)}catch{}return null}static fileToBase64(r){return new Promise((n,o)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=()=>{o(new Error("Failed to convert file to Base64."))},i.readAsDataURL(r)})}static base64ToObjectURL(r,n){const o=atob(r),i=[];for(let u=0;u<o.length;u+=512){const p=o.slice(u,u+512),_=new Array(p.length);for(let g=0;g<p.length;g++)_[g]=p.charCodeAt(g);const v=new Uint8Array(_);i.push(v)}const l=new Blob(i,{type:n});return URL.createObjectURL(l)}static distinctArray(r){return Array.from(new Set(r))}static getTextFromMarkdown(r){return r.replace(/(?:__|[*#])|\[(.*?)\]\(.*?\)|<[^>]*>/g,"$1").replace(/\n+/g," ").trim()}static getFileExt(r){let n=r.split(".");return n.length>1?n[n.length-1].trim().toLowerCase():""}static isImageFile(r){if(!r)return!1;const o=r.slice((Math.max(0,r.lastIndexOf("."))||1/0)+1).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff"].includes(`.${o}`)}static parseJson(r){return JSON.parse(r.replaceAll(/},\s*]/g,"}]"))}static minusToCamelCase(r){return r.replace(/-([a-z0-9])/g,(n,o)=>o.toUpperCase())}static replaceAllBase64Urls(r,n=""){return r.replace(/data:(?:image\/\w+|audio\/\w+|video\/\w+);base64,[\w\+/0-9]+(?:=[\w\+/0-9]{2})?(?:=[\w\+/0-9])?/,n)}static loadScript(r){return new Promise((n,o)=>{const i=document.createElement("script");i.src=r,i.type="text/javascript",i.async=!0,i.onload=()=>{n()},i.onerror=l=>{console.error(`Failed to load script from ${r}`,l),o(new Error(`Script load error: ${r}`))},document.head.appendChild(i)})}static downloadTextAsFile(r,n){const o=n??this.getFormattedDate(),i=new Blob([r],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(i),l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l)}static uploadTextFile(r){const n=document.createElement("input");n.type="file",n.accept=".txt",n.addEventListener("change",o=>{const i=o.target;if(!i.files||0===i.files.length)return;const l=i.files[0],u=new FileReader;u.onload=p=>{const _=p.target?.result;r(_)},u.readAsText(l)}),n.click()}static getFormattedDate(){const r=new Date;return`${String(r.getDate()).padStart(2,"0")}-${String(r.getMonth()+1).padStart(2,"0")}-${r.getFullYear()}-${String(r.getHours()).padStart(2,"0")}-${String(r.getMinutes()).padStart(2,"0")}.txt`}static wrapWords(r,n){const o=r.split(" ");let i="",l=0;return o.forEach((u,p)=>{i+=u+" ",l++,l===n&&(i+="\n",l=0)}),i.trim()}static removeVietnameseAccents(r){return r.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}static zipFiles(r,n,o){var i=this;return(0,Fe.A)(function*(){const l=new JSZip;let u=0;for(const _ of r){if(_.isText)l.file(_.filename,_.url);else{const g=(yield i.fetchUrlAsBase64(_.url)).split(",")[1];l.file(_.filename,g,{base64:!0})}u++,o&&o(u)}return yield l.generateAsync({type:"blob"})})()}static fetchUrlAsBase64(r){return(0,Fe.A)(function*(){const o=yield(yield fetch(r)).blob();return new Promise((i,l)=>{const u=new FileReader;u.onloadend=()=>i(u.result),u.onerror=l,u.readAsDataURL(o)})})()}static urlToFile(r,n){var o=this;return(0,Fe.A)(function*(){let l=(yield o.fetchUrlAsBase64(r)).split(",")[1];const u=atob(l);let p=u.length;const _=new Uint8Array(p);for(;p--;)_[p]=u.charCodeAt(p);let v=lt.getContentType(n);return new File([_],n,{type:v})})()}static getContentType(r){const n=r.split(".").pop()?.toLowerCase();return n?{txt:"text/plain",script:"text/json",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",mp3:"audio/mpeg",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",zip:"application/zip",rar:"application/x-rar-compressed"}[n]:void 0}static convertToTitleCase(r){return r.toLowerCase().replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}static toCamelCase(r){return lt.removeVietnameseAccents(r).replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(n,o)=>0===o?n.toLowerCase():n.toUpperCase()).replace(/[^a-zA-Z0-9]+/g,"")}static createDemoDataForJsonSchema(r){return function o(i){switch(i.type){case"string":return"demo string";case"number":return 42;case"boolean":return!0;case"object":const l={};if(i.properties)for(const u in i.properties)l[u]=o(i.properties[u]);return l;case"array":return[o(i.items)];default:return null}}(JSON.parse(r))}static compileTemplate(r,n){let o=r;const i=[...o.matchAll(/\$\(([a-zA-Z]+):([^\$]+)\)\$/g)],l=[];for(const y of i){o=o.replaceAll(y[0],"").trim();const x=y[2].split("|").map(C=>this.compileTemplate(C.trim(),n));for(let C=0;C<x[0].length;C++){const E=[],I=[];for(const A of x)I.push(A[C]);E.push(y[1].trim()),E.push(...I),l.push(E)}}o=o.replaceAll(/\*for="([a-zA-Z0-9_-]+) of \{([a-zA-Z0-9._-]+)\}"/g,'id="sys___loop-node" data-for="$2=>$1"'),o=o.replaceAll(/\*for="([a-zA-Z0-9_-]+) of ([a-zA-Z0-9._-]+)"/g,'id="sys___loop-node" data-for="$2=>$1"');let u=document.createElement("div");for(u.innerHTML=o;;){let y=u.querySelector("#sys___loop-node");if(!y)break;let x=y.getAttribute("data-for").split("=>");y.removeAttribute("data-for"),y.removeAttribute("id");let C=x[0],E=x[1],I=x[0].split("."),A=[];if(1==I.length)A=JSON.parse(n.get(x[0])??"[]");else{let Y=JSON.parse(n.get(I[0]));for(var p=1;p<I.length;p++)Y=Y[I[p]];A=Y??[]}let N=y.parentNode,j=y.outerHTML,O=j.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),M=[];for(let Y of O)M.push(Y[1]);let U=-1;for(let Y of A){U++;let X=j;for(let H of M){if("index"==H){X=X.replaceAll("{index}",U+"");continue}let ie,pe=H.split(".");for(let fe of pe){if(!ie&&fe==x[1]){ie=Y;continue}let ue=!1;fe.endsWith("[index]")&&(fe=fe.split("[")[0],ue=!0),ie&&(ie=ie[fe]),ie&&ue&&(ie=ie[U])}ie||(ie=""),X=X.replaceAll(`{${H}}`,ie)}X=X.replaceAll("[index]",`[${U}]`),X=X.replaceAll(`[${E}]`,`${C}[${U}]`);let ee=document.createElement("div");ee.innerHTML=X,N?.insertBefore(ee.firstChild,y)}N?.removeChild(y)}let _=u.innerHTML,v=_.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),g=[];for(let y of v)g.push(y[1]);for(let y of g){let x=y.split(".");if(x.length>1){let C=JSON.parse(n.get(x[0])),E=0;for(let I of x)0!=E?(C=C[I],E++):E++;_=_.replaceAll(`{${y}}`,C??"")}else _=_.replaceAll(`{${y}}`,n.get(x[0])??"")}for(const y of l)"replace"===y[0]&&(_=_.replaceAll(y[1],y[2]));return _}static extractProperties(r,n){return r?Object.keys(r).flatMap(o=>{const i=r[o],l=Array.isArray(i)?"array":typeof i,u={name:o,type:l,level:n};return"object"!==l||null===i||Array.isArray(i)?[u]:[u,...this.extractProperties(i,n+1)]}):[]}}var Do=le(8910),Bp=le(5084),sn=le(2102),fi=le(9631);class js{readUrl(r){return new Promise(n=>{lt.urlToFile(r,"filename").then(o=>{let i=this.readFile(o);n(i)})})}}class hu{constructor(r){(0,f.A)(this,"iamges",void 0),this.iamges=r}render(r){let n=r;for(let o of this.iamges){let i=o.cssStyle?o.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";n=n.replaceAll("[img:$"+o.id+"$]",`<img id="${o.id}" src="${o.link}" style="${i}">`)}return n}}class gu{constructor(r,n=!1){(0,f.A)(this,"mathMap",void 0),(0,f.A)(this,"raw",void 0),this.mathMap=r,this.raw=n}render(r){let n=r,i=n.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let l=i.next();if(l.done)break;let u=l.value[0],p=l.value[1],_=this.mathMap.get(p),v="";if(_){let g=this.isPureTextMathML(_.str);if(""!=g)v=g;else{const y=document.createElement("span");y.id=p,y.innerHTML=this.cleanMathML(_.str),this.raw&&_.raw&&y.setAttribute("data-azt-math-raw",_.raw),v=y.outerHTML}}n=n.replace(u,v)}return n}cleanMathML(r){let n=r;return n=n.replaceAll('display="block"',""),n=n.replaceAll(/<\?xml[^>]+\?>/g,""),n=n.replaceAll(/\s*xmlns="[^"]+"/g,""),n=n.replaceAll("\n",""),n}isPureTextMathML(r){let o=(new DOMParser).parseFromString(r,"application/xml");if(o.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let i=o.documentElement.children,l=["mi","mn","mo","ms","mspace","mtext"],u="";for(let _=0;_<i.length;_++){let v=i[_];if(l.indexOf(v.tagName.toLowerCase())<0)return"";u+=v.textContent?.trim()??""}return/^[0-9.,-]+$/.test(u.replaceAll("\u2212","-"))?u:""}}class xl{render(r){let n=r;n=n.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let i=n.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let l=i.next();if(l.done)break;let u=l.value[0],p=l.value[1],_=u.split(":")[0].split("!");_.shift(),_.filter(v=>"a"==v).length>0&&(p=p.toUpperCase());for(let v=_.length-1;v>=0;v--){let g=_[v];p="hl"==g||"cl"==g?`<span class='cl'>${p}</span>`:`<${g}>${p}</${g}>`}n=n.replace(u,p)}return n}clean(r){let n=r.split("\n"),o=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,i=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,l=[],u=0;for(let _ of n){let v=_;i.test(n[u].replaceAll(o,"$1"))&&(n[u]=n[u].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),v=n[u]);let x,g=v.matchAll(o),y=0;for(;;){let C=g.next();if(C.done)break;let E=C.value[0],I=E.indexOf(":"),A=E.substring(1,I),j=(C.value.index??0)-y,O=j+C.value[1].length;x&&j==x.e&&x.style==A?x.e=O:(x={lineIdx:u,s:j,e:O,style:A},l.push(x)),y+=I+4}n[u]=v.replaceAll(o,"$1"),u++}return{res:n.join("\n"),styles:l}}applyStyle(r,n,o=!1){for(let i=r.length-1;i>=0;i--){let l=r[i],u=n.filter(_=>_.lineIdx==l.lineIdx&&this.isRangeIntersec(_.s,_.e,l.s,l.e??999999)),p=[];for(let _ of u){let v=_.s>=l.s?_.s:l.s,g=_.e<=(l.e??9999999)?_.e:l.e??9999999;v-=l.s,g-=l.s;let y=o?_.style:_.style.replaceAll("!hl","").replaceAll("!cl","");v<g&&""!=y&&l.text&&""!=(l.text.substring(v,g)??"").trim()&&(p.push({idx:v,str:`[${y}:$`}),p.push({idx:g,str:"$]"}))}p.sort((_,v)=>{let g=v.idx-_.idx;return 0!=g?g:v.str.length-_.str.length});for(let _ of p)l.text=l.text?.substring(0,_.idx)+_.str+l.text?.substring(_.idx)}}getAnsStyle(r,n,o){if(!n)return"";let i=[],l={...n};this.applyStyle([l],o,!0),l.text!=n.text&&""==l.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&i.push("!fl");for(let _ of o)_.lineIdx==n.lineIdx&&_.s<=n.b&&n.b<_.e&&i.push(_.style);let p=i&&i.length>0?i.join():"";return p.indexOf("!u")>=0||p.indexOf("!b")>=0||p.indexOf("!hl")>=0||p.indexOf("!cl")>=0||p.indexOf("!fl")>=0?p:""}isRangeIntersec(r,n,o,i){return r<=o&&o<=n||o<=r&&r<=i}getStyleScore(r){let n=0;return r.indexOf("!cl")>=0&&(n+=8),r.indexOf("!u")>=0&&(n+=4),r.indexOf("!i")>=0&&(n+=2),r.indexOf("!b")>=0&&(n+=1),n}}class Cl{constructor(r){(0,f.A)(this,"infos",void 0),this.infos=r}render(r,n="\n"){let i=r.split(n),l=[],u=[],p="";for(let _ of i){let v=_;if(v.trim().startsWith("[*")&&v.trim().endsWith("*]")){let g=v.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(g.value){u.length>0&&(l.push(`<table class="q-table ${p}">${u.join("")}</table>`),u=[]);let x=this.infos.get(+g.value[1]);p=x&&x.borderTopSize>0?"border-1":"border-0",v=v.replace(g.value[0],"[*")}let y=v.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");y=y.replaceAll("|","</td><td>"),u.push(y)}else u.length>0&&(l.push(`<table class="q-table ${p}">${u.join("")}</table>`),u=[]),l.push(v)}return u.length>0&&l.push(`<table class="q-table ${p}">`+u.join("")+"</table>"),l.join(n)}}class vu extends js{constructor(r=!0){super(),(0,f.A)(this,"wmf",void 0),r&&(this.wmf=new WMFConverter)}readFile(r){return new Promise(n=>{this.read(r,!1,o=>{n(o.text)})})}readFileInputEventAsArrayBuffer(r,n){let o=new FileReader;o.onload=function(i){n(i.target.result)},o.readAsArrayBuffer(r)}read(r,n,o,i,l){let u=this,p=(_,v)=>{i&&i(_,v,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(r,function(_){azotaDocx.readDocx(_,p).then(function(v){console.log(v);for(let x of v.data)"img"==x.type&&("image/x-wmf"==x.contentType||"image/x-emf"==x.contentType?u.convert(x):x.value="data:"+x.contentType+";base64, "+x.value,!x.cssStyle&&x.height&&x.width&&"EMU"==x.measureUnit)&&(x.cssStyle=`width:${+x.width/12700}pt;height:${+x.height/12700}pt;margin-top:0px;`);let g=new Map,y=0;for(let x of v.data)"img"==x.type&&x.cropInfo&&g.set(y,1),y++;if(o&&0==g.size)o(u.parse(v,n));else{y=0;for(let x of v.data){if("img"==x.type&&x.cropInfo){const C=y,E=document.createElement("img");E.src=x.value,E.onload=()=>{u.cropImage(x,E),g.delete(C),0==g.size&&o&&o(u.parse(v,n))},E.onerror=()=>{g.delete(C),0==g.size&&o&&o(u.parse(v,n))}}y++}}}).catch(v=>{l&&l(v.message)})})}parseText(r,n=!1){let o=r.split("\n");o=this.processUnderlineAns(o);let i=o.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),l=i,u=new xl,p=[];if(n){let _=u.clean(i);i=_.res,p=_.styles}else i=u.render(i);return{text:i,orgText:l,images:[],mathMap:new Map,tableMap:new Map,styles:p}}parse(r,n=!1){let o="",i=[],l=new Map,u=new Map,p=[];for(let C of r.data)if("img"==C.type)i.push({id:C.key,link:C.value,cssStyle:C.cssStyle}),C.cssStyle&&C.cssStyle.split(";").length>2&&p.push([`^\\[img:\\$${C.key}\\$\\]`,`[img:$${C.key}$]\n`]);else if("mathml"==C.type){let E=+C.key.split("_")[1];l.set(C.key,{id:E,str:C.value,raw:C.docx})}else"table"==C.type&&u.set(C.position,C);let _=[],v=-1;for(let C of r.lines){if(v++,0==C.length)continue;let E="";if(Array.isArray(C[0])&&Array.isArray(C[C.length-1])&&Array.isArray(C[Math.floor(C.length/2)])){let A=r.data.filter(O=>O.position==v&&"table"==O.type)[0],N=A?`!!${A.position}!!:`:"";E=A&&+A.borderBottomSize>0||_.length>0&&_[_.length-1].startsWith("[*")?`[*${N} `+C.map(O=>O.map(M=>M.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":C.map(O=>O.map(M=>M.join("")).join("\n")).join(" \t ")}else E=C.join("");for(let A of p)E=E.replaceAll(new RegExp(A[0],"g"),A[1]);let I=E.split("\n");for(let A of I)_.push(A)}_=this.processUnderlineAns(_),o=_.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let g=o,y=new xl,x=[];if(n){let C=y.clean(o);o=C.res,x=C.styles}else o=y.render(o),o=new hu(i).render(o),o=new gu(l).render(o),o=new Cl(u).render(o);return{text:o,orgText:g,images:i,mathMap:l,tableMap:u,styles:x}}processUnderlineAns(r){let n=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,o=0,i=[];for(let l of r){let u=l;if(u=u.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(u)&&""!=u.trim()&&o>0){u=u.replaceAll(/[\s.]+/g,"");let p=u.indexOf("*"),_=0;if(u=u.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(u)>=0){let v=r[o-1].match(n);if(v&&u.length==v.length){for(let y of v)r[o-1]=r[o-1].replace(y,y.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${p==_?"*":""}${u.substring(0,1)}:`).replace("$]","]")),i[i.length-1]=r[o-1],u=u.substring(1),_++;o++;continue}}}i.push(l),o++}return i}convert(r){return new Promise(n=>{if("image/x-wmf"==r.contentType)r.value=this.wmf.toPNG("data:"+r.contentType+";base64, "+r.value),n();else{let l=new ToContext2D(0,1),u=this.decodeBase64(r.value);try{FromEMF.Parse(u,l)}catch{}let p=this.scaleCanvas(l.canvas,200,200);r.value=p.toDataURL(),n()}})}decodeBase64(r){return Uint8Array.from(atob(r),function(n){return n.charCodeAt(0)})}scaleCanvas(r,n,o){let i=document.createElement("canvas");return i.width=n,i.height=o,i.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,n,o),i}cropImage(r,n){if(!r.cropInfo)return;let o=r.cropInfo.left?+r.cropInfo.left:0,i=r.cropInfo.top?+r.cropInfo.top:0,l=r.cropInfo.right?+r.cropInfo.right:0,u=r.cropInfo.bottom?+r.cropInfo.bottom:0;if(o+i+l+u==0)return;let p=n.width,_=n.height,v=o*p/1e5,g=i*_/1e5,C=p-l*p/1e5-v,E=_-u*_/1e5-g;const I=document.createElement("canvas");I.width=C,I.height=E,I.getContext("2d")?.drawImage(n,v,g,C,E,0,0,C,E),r.value=I.toDataURL()}}class yu extends js{readFile(r){return new Promise((n,o)=>{const i=new FileReader;i.onload=()=>{i.result?n(`<img src="${i.result}">`):o(new Error("Failed to read file."))},i.onerror=()=>{o(new Error("Error occurred while reading the file."))},i.readAsDataURL(r)})}}class Oo extends js{readFile(r){return new Promise(n=>{const o=new FileReader;o.onload=function(){var i=(0,Fe.A)(function*(l){n("")});return function(l){return i.apply(this,arguments)}}(),o.readAsArrayBuffer(r)})}}function Sl(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function hr(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function kl(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function bu(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function Ms(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,hr,7,0,"div",13)(4,kl,3,4,"span",14)(5,bu,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const i=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(i))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isReading),e.R7$(),e.Y8G("ngIf",!o.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!o.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let mi=(()=>{var t;class r{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",i=>{if(this.err="",i.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,u={file:i,name:this.name,content:""};switch(this.files.push(u),lt.getFileExt(i.name)){case"pdf":_=new Oo;break;case"docx":_=new vu;break;case"jpg":case"png":case"jpeg":_=new yu}this.isReading=!0,this.onStartReading.emit(),_?.readFile(i).then(v=>{u.content=v,this.isReading=!1,this.onAddFile.emit(u)})})},200)}remove(o){this.files.splice(o,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(o,i){1&o&&(e.DNE(0,Sl,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,Ms,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&o&&(e.Y8G("ngIf",i.err),e.R7$(),e.Mz_("id","dropzone-basic-",i.name,""),e.R7$(8),e.Y8G("ngForOf",i.files))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.qT,G.cb,G.cV,Ct]})),r})();const wl=["startTime"];function xu(t,r){if(1&t&&(e.j41(0,"div",5),e.nrm(1,"div",6),e.nI1(2,"safeHtml"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,n.value.desc),e.npT)}}function $s(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Cu(t,r){if(1&t&&(e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,$s,1,0,"i",8),e.k0s(),e.nrm(4,"input",9),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function Su(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function ku(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Su,1,0,"i",8),e.k0s(),e.j41(4,"div")(5,"mat-form-field",11)(6,"input",12),e.bIt("click",function(i){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(i.stopPropagation())}),e.k0s(),e.j41(7,"a",13),e.bIt("click",function(i){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(i.stopPropagation())}),e.nrm(8,"i",14),e.k0s(),e.j41(9,"ngx-mat-datetime-picker",15,0)(11,"ngx-mat-datepicker-actions")(12,"a",16),e.EFF(13,"Cancel"),e.k0s(),e.j41(14,"a",17),e.EFF(15,"OK"),e.k0s()()()()()()}if(2&t){const n=e.sdS(10),o=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",o.value.label," "),e.R7$(),e.Y8G("ngIf",o.value.desc),e.R7$(3),e.FCK("name","",i.nodeData.id,"-",o.key,""),e.Y8G("ngxMatDatetimePicker",n)("value",o.value.data),e.R7$(3),e.Y8G("touchUi",!0)("showSeconds",!1)}}function wu(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Nu(t,r){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function Eu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,wu,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,i)||(l.value.data=i),e.Njj(i)}),e.DNE(5,Nu,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function fo(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Nl(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,fo,1,0,"i",8),e.k0s(),e.j41(4,"textarea",21),e.bIt("input",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.autoResize(i.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function El(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Pp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,El,1,0,"i",8),e.k0s(),e.j41(4,"app-file-control",22),e.bIt("onStartReading",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onStartReadingFile())})("onAddFile",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.onAddFile(i))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",o.nodeData.id+"-"+n.key)}}function Lp(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function gr(t,r){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function Xp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,Lp,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,i)||(l.value.data=i),e.Njj(i)}),e.DNE(5,gr,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",o.lstKeys)}}function Iu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,xu,3,3,"div",4)(2,Cu,5,6,"div",4)(3,ku,16,9,"div",4)(4,Eu,6,5,"div",4)(5,Nl,6,6,"div",4)(6,Pp,5,3,"div",4)(7,Xp,6,5,"div",4),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}let Au=(()=>{var t;class r{set data(o){this.nodeData=o}constructor(o,i){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"startTime",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB),this.ngZone=o,this.appService=i}ngOnInit(){let o=!1;for(let i of this.nodeData.conf)i.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+i.key)??"","key"==i.value.type&&(o=!0);o&&this.appService?.listKeys().subscribe(i=>{this.lstKeys=i}),setTimeout(()=>{document.querySelectorAll(".form-node-renderred textarea").forEach(l=>{this.autoResize(l)})},200)}autoResize(o){o.style.height="50px",o.style.overflowY="hidden",o.style.height=o.scrollHeight+10+"px"}showInfo(o){}openDateTimePicker(){this.startTime?.open()}onAddFile(o){this.onUploaded.emit(o)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],viewQuery:function(o,i){if(1&o&&e.GBs(wl,5),2&o){let l;e.mGM(l=e.lsd())&&(i.startTime=l.first)}},inputs:{appId:"appId",data:"data"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[["startTime",""],[1,"form-node-renderred"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[3,"innerHTML"],[1,"form-label"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],["appearance","outline"],["type","text","matInput","",3,"click","ngxMatDatetimePicker","value","name"],["matSuffix","",2,"font-size","18px",3,"click"],[1,"bx","bx-calendar"],[3,"touchUi","showSeconds"],["ngxMatDatepickerCancel","",1,"mr-3"],["ngxMatDatepickerApply",""],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(o,i){1&o&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,Iu,8,7,"div",3),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngForOf",i.nodeData.conf))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,mi,_r,Do.T_,sn.RG,sn.rl,sn.yw,fi.fS,fi.fg,Do.Hw,Do.m7,Do.yF,Do.HF,Do.gx,Do.Uq,Bp.X6]})),r})();function it(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",3)(1,"img",4),e.bIt("mousedown",function(){const i=e.eBV(n).index,l=e.XpG();return e.Njj(l.setSelection(i))}),e.k0s()()}if(2&t){const n=r.$implicit,o=r.index,i=e.XpG();e.ZvI("scene-layer scene-mode-player-",i.ratio916?"9-16":"16-9",""),e.Mz_("id","dom-",n.objName,""),e.R7$(),e.ZvI("s-element player scene-mode-player-",i.ratio916?"9-16":"16-9"," h-100"),e.Y8G("src",i.ratio916?i.demo916[o]:i.demo169[o],e.B4B)}}function Il(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"span",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.play())}),e.k0s(),e.j41(2,"span",7),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.resetPos())}),e.k0s(),e.j41(3,"span",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.edit())}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px cursor-pointer me-3"),e.R7$(2),e.ZvI("tf-icons bx bx-",n.isEditMode?"x":"pencil"," bx-22px cursor-pointer me-3")}}let vr=(()=>{var t;class r{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"mode","editor"),(0,f.A)(this,"lstObj",[]),(0,f.A)(this,"animName",""),(0,f.A)(this,"ratio916",!1),(0,f.A)(this,"demo169",["/ai-mod-assets/images/demo-16-9.png","/ai-mod-assets/images/demo-16-9-1.png"]),(0,f.A)(this,"demo916",["/ai-mod-assets/images/demo-9-16.png","/ai-mod-assets/images/demo-9-16-1.png"]),(0,f.A)(this,"info",""),(0,f.A)(this,"projectId","ObjAnim"),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"isEditMode",!1),(0,f.A)(this,"animObjs",[]),(0,f.A)(this,"canMove",{}),(0,f.A)(this,"startPos",[0,0]),(0,f.A)(this,"curTranslate",[]),(0,f.A)(this,"isDrag",!1),(0,f.A)(this,"obj",void 0),(0,f.A)(this,"curIdx",0)}set conf(o){let i=document.createElement("div");i.innerHTML=o;let l=i.querySelector("anim-editor");if(l){let u=JSON.parse(l.innerHTML);this.varname=l.getAttribute("var-name")??"",this.animName=u.animName,this.lstObj=u.listObj}}ngAfterViewInit(){localStorage.removeItem("theatre-0.4.persistent");let i=!1;this.projectId="ObjAnim"+(new Date).getTime();try{Theatre.studio.onSelectionChange(l=>{this.obj=l[0],this.obj&&(this.curIdx=this.lstObj.findIndex(u=>u.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),i=!0}catch{lt.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js").then(()=>{Theatre.studio.initialize(),Theatre.studio.onSelectionChange(u=>{this.obj=u[0],this.obj&&(this.curIdx=this.lstObj.findIndex(p=>p.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),this.loadAnim()})}i&&this.loadAnim(),this.info=JSON.stringify(this.lstObj,null,2)}setSelection(o){Theatre.studio.setSelection([this.animObjs[o]])}play(){this.sheet&&(this.isPlaying?(this.isPlaying=!1,this.sheet.sequence.pause()):(this.isPlaying=!0,this.sheet.sequence.play({iterationCount:1/0})))}edit(){this.isEditMode?(this.isEditMode=!1,Theatre.studio.ui.hide()):(this.isEditMode=!0,Theatre.studio.ui.restore())}loadAnim(){localStorage.removeItem("theatre-0.4.persistent");let o={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:2.5,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]};this.curIdx=0,this.curTranslate=[];let l=0;for(let _ of this.lstObj){this.canMove[_.objName]={},this.curTranslate.push([0,0]);let v={};for(let C of _.propAnims)v[C.propName]=C.keyframes.length>0?C.keyframes[0].value:0,"x"==C.propName&&(this.canMove[_.objName].x=!0),"y"==C.propName&&(this.canMove[_.objName].y=!0);o.sheetsById.Sheet1.staticOverrides.byObject[_.objName]=v;let g={},y={},x=0;for(let C of _.propAnims){let E=`${x}-vfsKxxzE`,I={type:"BasicKeyframedTrack",__debugName:`${_.objName}:["${C.propName}"]`,keyframes:[]},A=0,N=[];for(let j of C.keyframes)0==A&&N.push([j.cubicBezier[0],j.cubicBezier[1]]),N.push([j.cubicBezier[0],j.cubicBezier[1]]),N.push([j.cubicBezier[2],j.cubicBezier[3]]),I.keyframes.push({id:`${l}F${x}zl_kv${A}V`,position:j.timePosition,connectedRight:!0,handles:[N[2*A][0],N[2*A][1],N[2*A+1][0],N[2*A+1][1]],value:j.value,type:"bezier"}),A++;g[E]=I,y[`["${C.propName}"]`]=E,x++}o.sheetsById.Sheet1.sequence.tracksByObject[_.objName]={trackData:g,trackIdByPropPath:y},l++}const p=Theatre.core.getProject(this.projectId,{state:o}).sheet("Sheet1");this.sheet=p,this.animObjs=[];for(let _ of this.lstObj){let v={};const g={};for(let C of _.propAnims){v[C.propName]=C.range&&C.range.length>0?Theatre.core.types.number(C.default,{range:C.range}):C.default;let E=C.domStyle.split(":"),I=lt.minusToCamelCase(E[0].trim()),A=E[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+C.propName+"}");g[I]=g[I]?g[I]+" "+A:A}let y=p.object(_.objName,v);this.animObjs.push(y);const x=_.objName;y.onValuesChange(C=>{const E=document.getElementById("dom-"+x),I=/\$\{(.*?)\}/g;for(const A in g)if(g.hasOwnProperty(A)){let j,N=g[A];for(;null!==(j=I.exec(g[A]));)N=N.replaceAll(j[0],C[j[1]]);E&&(E.style[A]=N.replaceAll(";",""))}}),Theatre.studio.setSelection([y])}document.onmouseup=_=>{_.preventDefault(),this.endDrag(_)},document.onmousemove=_=>{_.preventDefault(),this.onMove(_)}}startDrag(o){o.preventDefault(),this.obj&&"editor"==this.mode&&(this.isDrag=!0,this.startPos=[o.x,o.y])}onMove(o){if(!this.isDrag)return;let i=o.x-this.startPos[0]+this.curTranslate[this.curIdx][0],l=o.y-this.startPos[1]+this.curTranslate[this.curIdx][1];Theatre.studio.transaction(({set:u})=>{this.canMove[this.lstObj[this.curIdx].objName].x&&u(this.obj.props.x,i),this.canMove[this.lstObj[this.curIdx].objName].y&&u(this.obj.props.y,l)})}endDrag(o){this.isDrag&&(this.isDrag=!1,this.curTranslate[this.curIdx]=[o.x-this.startPos[0]+this.curTranslate[this.curIdx][0],o.y-this.startPos[1]+this.curTranslate[this.curIdx][1]])}resetPos(){this.curTranslate[this.curIdx]=[0,0],Theatre.studio.transaction(({set:o})=>{o(this.obj.props.x,0),o(this.obj.props.y,0)})}getValue(){const o=Theatre.studio.createContentOfSaveFile(this.projectId),i=this.convertProjectStateToList(o);return{varName:this.varname,value:JSON.stringify({animName:this.animName,listObj:i})}}convertProjectStateToList(o){const i=[],l=o.sheetsById;for(const u in l){const _=l[u].sequence.tracksByObject;let v=0;for(const g in _){const{trackData:y,trackIdByPropPath:x}=_[g],C=[];let E=0;for(const I in x){const N=y[x[I]];if(N&&N.keyframes){const j=N.keyframes.map(X=>({timePosition:X.position,cubicBezier:X.handles,value:X.value}));let O=[];for(let X of j)O.push([X.cubicBezier[0],X.cubicBezier[1]]),O.push([X.cubicBezier[2],X.cubicBezier[3]]);O.push(O[0]);for(let X=0;X<j.length;X++)j[X].cubicBezier=[O[2*X+1][0],O[2*X+1][1],O[2*X+2][0],O[2*X+2][1]];const M=I.replace(/\["|\"]/g,"");C.push({propName:M,domStyle:this.lstObj[v].propAnims[E].domStyle,default:j[0]?.value||0,keyframes:j})}E++}i.push({objName:g,propAnims:C}),v++}}return i}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-anim-editor"]],inputs:{varname:"varname",mode:"mode",conf:"conf",ratio916:"ratio916"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[[3,"mousedown"],[3,"id","class",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[3,"id"],["alt","imgElement",3,"mousedown","src"],[1,"text-center","mt-2"],[3,"click"],[1,"tf-icons","bx","bx-reset","bx-22px","cursor-pointer","me-3",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.bIt("mousedown",function(u){return i.startDrag(u)}),e.DNE(1,it,2,9,"div",1),e.k0s(),e.DNE(2,Il,4,6,"div",2)),2&o&&(e.ZvI("scene-container player scene-mode-player-",i.ratio916?"9-16":"16-9",""),e.R7$(),e.Y8G("ngForOf",i.lstObj),e.R7$(),e.Y8G("ngIf","editor"==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto;background-color:#282b2fcc}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 16);height:calc(var(--video-16) / 16);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 16 + 7px);top:calc(var(--video-9) / 32 - 9px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 16 + 7px);top:calc(var(--video-16) / 32 - 9px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}"]})),r})();class yr{onMsgUpdate(r,n){}onDone(r){}onMsgAdd(r){}onClear(){}onFunctionCall(r,n){}onBeforeSend(){}onSend(){}}class br extends yr{constructor(r,n,o,i){super(),(0,f.A)(this,"onUpdate",void 0),(0,f.A)(this,"done",void 0),(0,f.A)(this,"beforeSend",void 0),(0,f.A)(this,"functionCall",void 0),this.onUpdate=r,this.done=n,this.beforeSend=o,this.functionCall=i}onFunctionCall(r,n){this.functionCall&&this.functionCall(r,n)}onMsgUpdate(r,n){this.onUpdate&&this.onUpdate(r,n)}onDone(r){this.done&&this.done(r)}onBeforeSend(){this.beforeSend&&this.beforeSend()}}class _i{constructor(r,n,o){(0,f.A)(this,"api",void 0),(0,f.A)(this,"callback",void 0),(0,f.A)(this,"memType",void 0),(0,f.A)(this,"agentType",{name:"default",placeholder:"Enter your message..."}),(0,f.A)(this,"aiVars",[]),(0,f.A)(this,"lstMessage",[]),this.api=r,this.callback=n,this.memType=o}setMemType(r){this.memType=r}setCallback(r){this.callback=r}send(){this.callback?.onBeforeSend(),this.api.live({name:this.agentType.name,messages:this.lstMessage,vars:this.aiVars,type:this.memType}).subscribe(r=>{this.callback?.onSend();let n=r.data,o="",i="",l={Role:"assistant",Content:""};this.addMessage(l),this.api.stream(n,u=>{if(o+=u.Content??"",l.Content=o,u.ToolCalls){l.ToolCalls||(l.ToolCalls=[]);for(let _ of u.ToolCalls){let v=+(_.Type??"0"),g=l.ToolCalls[v];g?g.FunctionCall.Arguments+=_.FunctionCall.Arguments:(l.ToolCalls[v]=_,l.Generating=!0)}}let p=o.replace(i,"");this.noticeUpdate(o,p),i=o,l.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!0)},u=>{""==u&&(l.Generating=!1,l.Content=o,this.callback?.onDone(o),this.getLastMessage()?.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!1),console.log(this.lstMessage))})})}reSend(){this.removeLastMessage(),this.send()}addMessage(r){this.lstMessage.push(r),this.callback?.onMsgAdd(r)}addUserMessage(r,n){let o=[];n&&(o.push({Type:hs.Text,Content:r}),o.push(...n.map(l=>({Type:hs.ImageUrl,Content:l}))));let i=o.length>0?{Role:"user",Contents:o,Content:r}:{Role:"user",Content:r};this.lstMessage.push(i),this.callback?.onMsgAdd(i)}addToolMessage(r,n){let o={Role:"tool",ToolCallId:r,Content:n};this.lstMessage.push(o),this.callback?.onMsgAdd(o)}addAssistantMessage(r){let n={Role:"assistant",Content:r};this.lstMessage.push(n),this.callback?.onMsgAdd(n)}getMessage(r){return this.lstMessage[r]}getLastMessage(){return this.lstMessage[this.lstMessage.length-1]}removeLastMessage(){this.lstMessage.length>0&&this.removeMessage(this.lstMessage.length-1)}clearChat(){this.lstMessage=[],this.callback?.onClear()}setVars(r){this.aiVars=r}getVars(){return this.aiVars}setAgent(r){this.agentType=r}setAgentName(r){this.agentType={name:r,placeholder:""}}getName(){return this.agentType.name}removeMessage(r){this.lstMessage.splice(r,1)}noticeUpdate(r,n){this.callback?.onMsgUpdate(r,n)}}function xr(t,r){if(1&t&&(e.j41(0,"div",3)(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.jsCode,"\n        ")}}let Cr=(()=>{var t;class r{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"jsCode",""),(0,f.A)(this,"html",""),(0,f.A)(this,"err",""),(0,f.A)(this,"showCode",!1)}set jsInfo(o){let i=document.createElement("div");i.innerHTML=o;let l=i.querySelector("js-runner");l&&(this.jsCode=l.innerHTML.split("```javascript")[1].split("```")[0].replaceAll("&lt;","<").replaceAll("&gt;",">"),this.varname=l.getAttribute("var-name")??"",i.removeChild(l),this.html=i.innerHTML,setTimeout(()=>{this.run()},400))}getValue(){return{varName:this.varname,value:this.jsCode}}run(){try{this.err="",new Function(this.jsCode)()}catch(o){this.err=o.message}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-js-runner"]],inputs:{varname:"varname",jsInfo:"jsInfo"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[["id","js-result-view"],["id","js-source-code",4,"ngIf"],["title","Show/Hide source code",1,"bx","bx-code","text-white","cursor-pointer",3,"click"],["id","js-source-code"]],template:function(o,i){1&o&&(e.nrm(0,"div",0),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,xr,6,1,"div",1),e.j41(4,"i",2),e.bIt("click",function(){return i.showCode=!i.showCode}),e.k0s()),2&o&&(e.R7$(2),e.JRh(i.err),e.R7$(),e.Y8G("ngIf",i.showCode))},dependencies:[V.MD,V.bT,G.YN]})),r})();function hi(t,r){if(1&t){const n=e.RV6();e.j41(0,"img",7),e.bIt("click",function(){const i=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.selectImg(i))}),e.k0s()}if(2&t){let n;const o=r.$implicit,i=r.index,l=e.XpG(2);e.ZvI("img-small-pick ",(null!==(n=null==l._scene?null:l._scene.selectedImg)&&void 0!==n?n:0)==i?"selected":"",""),e.Y8G("src",o,e.B4B)}}function Tu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,hi,1,4,"img",6),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-mode-",n.mode,"-pick"),e.R7$(),e.Y8G("ngForOf",null==n._scene?null:n._scene.imageUrl)}}function Up(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-num-",n.getSize(),""),e.R7$(),e.JRh(n.idx)}}function Yp(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==o._scene?null:o._scene.transitionName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function Fu(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"i",8),e.j41(2,"ul",9)(3,"li")(4,"a",10),e.nrm(5,"i"),e.EFF(6,"None"),e.k0s()(),e.DNE(7,Yp,4,4,"li",11),e.k0s()()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-transit-",n.getSize(),""),e.R7$(),e.ZvI("dropdown-toggle hide-arrow bx bx-exit cursor-pointer ",null!=n._scene&&n._scene.transitionName?"text-link":"text-muted",""),e.R7$(4),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.transitionName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstTransition)}}function Gs(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"div",12),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-time scene-time-progress-",n.getSize(),""),e.R7$(),e.Aen("width:"+n.progress+"%")}}function Ds(t,r){if(1&t&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"secondsToTime"),e.nI1(4,"secondsToTime"),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,2,n.curTime),"/",e.bMT(4,4,n.duration),"")}}function Al(t,r){if(1&t){const n=e.RV6();e.j41(0,"audio",15),e.bIt("timeupdate",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.updatePlayTime())})("ended",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.isPlaying=!1)}),e.nrm(1,"source",16),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("src",null==n._scene?null:n._scene.audioUrl,e.B4B)}}function Tl(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.setAnim(i.animName))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==o._scene?null:o._scene.animationName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function Fl(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",o.capStyle==n?"text-link":"invisible",""),e.R7$(),e.JRh(n)}}function Rl(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.play())}),e.nrm(2,"span"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.nrm(5,"i",21),e.k0s(),e.j41(6,"ul",9)(7,"li")(8,"a",10),e.nrm(9,"i"),e.EFF(10,"None"),e.k0s()(),e.DNE(11,Tl,4,4,"li",11),e.k0s()(),e.j41(12,"div",19)(13,"button",22),e.nrm(14,"i",23),e.k0s(),e.j41(15,"ul",9)(16,"li")(17,"a",10),e.nrm(18,"i"),e.EFF(19,"None"),e.k0s()(),e.DNE(20,Fl,4,4,"li",11),e.k0s()(),e.j41(21,"div",19)(22,"button",24),e.nrm(23,"i",25),e.k0s(),e.j41(24,"ul",9)(25,"li",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.genImage())}),e.j41(26,"a",10),e.nrm(27,"i",27),e.EFF(28,"Re-Generate Image"),e.k0s()(),e.j41(29,"li",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.genVideo())}),e.j41(30,"a",10),e.nrm(31,"i",28),e.EFF(32,"Image to Video"),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px"),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.animationName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstImgAnim),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==n.capStyle?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstCapStyle)}}let Hp=(()=>{var t;class r{constructor(){(0,f.A)(this,"_scene",void 0),(0,f.A)(this,"mode","player"),(0,f.A)(this,"size","9:16"),(0,f.A)(this,"idx",0),(0,f.A)(this,"selected",!1),(0,f.A)(this,"showTransit",!0),(0,f.A)(this,"capStyle",""),(0,f.A)(this,"animCore",void 0),(0,f.A)(this,"projectId",""),(0,f.A)(this,"onChangeCapStyle",new e.bkB),(0,f.A)(this,"onChangeAnim",new e.bkB),(0,f.A)(this,"lstCapStyle",["wordHighlight","lineHighlight"]),(0,f.A)(this,"lstImgAnim",[]),(0,f.A)(this,"lstTransition",[]),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"curTime",0),(0,f.A)(this,"curAnimName",""),(0,f.A)(this,"progress",0),(0,f.A)(this,"duration",0)}set scene(o){this._scene=o,this.progress=0,this.duration=this._scene.duration,this.curTime=0;let i=document.getElementById("audioElement");i&&(i.pause(),i.currentTime=0,setTimeout(()=>{i.load()},400)),this.curAnimName="",this.sheet=void 0}ngAfterViewInit(){if("player"!=this.mode)return;localStorage.removeItem("theatre-0.4.persistent");let i=!1;try{this.animCore=Theatre.core,i=!0}catch{lt.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js").then(()=>{this.animCore=Theatre.core})}}changeCapStyle(o){this.capStyle=o,this.onChangeCapStyle.emit(o)}changeAnim(o){this._scene.animationName=o,this.onChangeAnim.emit(o)}set lstAnim(o){"player"==this.mode&&(this.lstImgAnim=o.filter(i=>1==i.listObj.length),this.lstTransition=o.filter(i=>2==i.listObj.length))}ngOnInit(){}setAnim(o){this._scene.animationName=o,this.loadAnim()}getSize(){return this.size.replace(":","-")}genImage(){alert(this._scene?.imagePrompt)}genVideo(){alert(this._scene?.imagePrompt)}getAnimation(o){return this.lstImgAnim.find(i=>i.animName==o)}selectImg(o){this._scene&&(this._scene.selectedImg=o)}play(){let o=10;!this.curAnimName&&this._scene?.animationName&&(this.loadAnim(),o=500),setTimeout(()=>{let i=document.getElementById("audioElement");this.isPlaying?(i&&i.pause(),this.sheet&&this.sheet.sequence.pause()):(i&&i.play(),this.sheet&&this.sheet.sequence.play().then(()=>{this.isPlaying=!1})),this.isPlaying=!this.isPlaying},o)}loadAnim(){this.animCore&&this._scene?.animationName&&(this.curAnimName=this._scene.animationName,this.projectId="ObjAnim"+(new Date).getTime(),this.parseAnim(["dom-img-player"],this.duration))}parseAnim(o,i){localStorage.removeItem("theatre-0.4.persistent");let u={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:i,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]},_=0,v=this.getAnimation(this._scene?.animationName??"")?.listObj??[];if(0==v.length)return;let g=0;for(let I of v)for(let A of I.propAnims)for(let N of A.keyframes)N.timePosition>g&&(g=N.timePosition);for(let I of v){let A={};for(let M of I.propAnims)A[M.propName]=M.keyframes.length>0?M.keyframes[0].value:0;u.sheetsById.Sheet1.staticOverrides.byObject[I.objName]=A;let N={},j={},O=0;for(let M of I.propAnims){let U=`${O}-vfsKxxzE`,Y={type:"BasicKeyframedTrack",__debugName:`${I.objName}:["${M.propName}"]`,keyframes:[]},X=0,ee=[];for(let H of M.keyframes)0==X&&ee.push([H.cubicBezier[0],H.cubicBezier[1]]),ee.push([H.cubicBezier[0],H.cubicBezier[1]]),ee.push([H.cubicBezier[2],H.cubicBezier[3]]),Y.keyframes.push({id:`${_}F${O}zl_kv${X}V`,position:1*H.timePosition,connectedRight:!0,handles:[ee[2*X][0],ee[2*X][1],ee[2*X+1][0],ee[2*X+1][1]],value:H.value,type:"bezier"}),X++;N[U]=Y,j[`["${M.propName}"]`]=U,O++}u.sheetsById.Sheet1.sequence.tracksByObject[I.objName]={trackData:N,trackIdByPropPath:j},_++}const x=Theatre.core.getProject(this.projectId,{state:u}),C=x.sheet("Sheet1");this.sheet=C;let E=[];_=0;for(let I of v){let A={};const N={};for(let M of I.propAnims){A[M.propName]=M.range&&M.range.length>0?Theatre.core.types.number(M.default,{range:M.range}):M.default;let U=M.domStyle.split(":"),Y=U[0].trim(),X=U[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+M.propName+"}");N[Y]=N[Y]?N[Y]+" "+X:X}let j=C.object(I.objName,A);E.push(j);const O=o[_];j.onValuesChange(M=>{const U=document.getElementById(O),Y=/\$\{(.*?)\}/g;for(const X in N)if(N.hasOwnProperty(X)){let H,ee=N[X];for(;null!==(H=Y.exec(N[X]));)ee=ee.replaceAll(H[0],M[H[1]]);U&&(U.style[X]=ee.replaceAll(";",""))}}),_++}x.ready.then(()=>{this.sheet=C})}updatePlayTime(){let o=document.getElementById("audioElement");o&&(this.progress=o.currentTime/o.duration*100,this.duration=o.duration,this.curTime=o.currentTime)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-view"]],inputs:{scene:"scene",mode:"mode",size:"size",idx:"idx",selected:"selected",showTransit:"showTransit",capStyle:"capStyle",lstAnim:"lstAnim"},outputs:{onChangeCapStyle:"onChangeCapStyle",onChangeAnim:"onChangeAnim"},standalone:!0,features:[e.aNF],decls:10,vars:25,consts:[[3,"id"],["alt","imgElement",3,"src"],[3,"class",4,"ngIf"],["class","scene-layer scene-duration small",4,"ngIf"],["id","audioElement","class","d-none",3,"timeupdate","ended",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],["alt","imgElement",3,"class","src","click",4,"ngFor","ngForOf"],["alt","imgElement",3,"click","src"],["matTooltip","Transition","data-bs-toggle","dropdown","aria-expanded","false"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"scene-layer","scene-duration","small"],[1,"duration"],["id","audioElement",1,"d-none",3,"timeupdate","ended"],["type","audio/mpeg",3,"src"],[1,"text-center","mt-2"],["type","button","matTooltip","Play",1,"btn","btn-icon","btn-label-primary",3,"click"],[1,"btn-group","ms-3"],["type","button","matTooltip","Animation","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-timer"],["type","button","matTooltip","Caption Style","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-captions"],["type","button","matTooltip","Generate with AI","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bxs-magic-wand"],[3,"click"],[1,"bx","bx-image","scaleX-n1-rtl","me-3"],[1,"bx","bx-movie-play","scaleX-n1-rtl","me-3"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"]],template:function(o,i){if(1&o&&(e.j41(0,"div")(1,"div",0),e.nrm(2,"img",1),e.k0s(),e.DNE(3,Tu,2,4,"div",2)(4,Up,2,4,"div",2)(5,Fu,8,10,"div",2)(6,Gs,2,5,"div",2)(7,Ds,5,6,"div",3)(8,Al,2,1,"audio",4),e.k0s(),e.DNE(9,Rl,33,11,"div",5)),2&o){let l;e.ee0("scene-container ",i.mode," scene-mode-",i.mode,"-",i.getSize()," ",i.selected?"selected":"",""),e.R7$(),e.STu("scene-layer scene-mode-",i.mode,"-",i.getSize(),""),e.Mz_("id","dom-img-",i.mode,""),e.R7$(),e.ZWY("s-element ",i.mode," scene-mode-",i.mode,"-",i.getSize()," h-100"),e.Y8G("src",null==i._scene?null:i._scene.imageUrl[null!==(l=null==i._scene?null:i._scene.selectedImg)&&void 0!==l?l:0],e.B4B),e.R7$(),e.Y8G("ngIf","player"==i.mode),e.R7$(),e.Y8G("ngIf","thumb"==i.mode),e.R7$(),e.Y8G("ngIf",i.showTransit&&"thumb"==i.mode),e.R7$(),e.Y8G("ngIf","player"==i.mode),e.R7$(),e.Y8G("ngIf","player"==i.mode),e.R7$(),e.Y8G("ngIf","player"==i.mode&&(null==i._scene?null:i._scene.audioUrl)),e.R7$(),e.Y8G("ngIf","player"==i.mode)}},dependencies:[V.MD,V.Sq,V.bT,G.YN,Tt.uc,Tt.oV,zp],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 24);height:calc(var(--video-16) / 24);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 24 + 7px);top:calc(var(--video-9) / 46 - 11px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 24 + 7px);top:calc(var(--video-16) / 46 - 11px)}.scene-num-16-9[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-9) / 46 - 11px)}.scene-num-9-16[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-16) / 46 - 11px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}.img-small-pick[_ngcontent-%COMP%]{width:40px;display:block;margin-bottom:5px;border-radius:5px}.scene-mode-player-pick[_ngcontent-%COMP%]{position:fixed;margin-left:-45px}.img-small-pick.selected[_ngcontent-%COMP%]{outline:2px solid #fff}.btn-label-secondary[_ngcontent-%COMP%]{color:#8592a3!important;border-color:#0000;background:#393c50}.btn-label-secondary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#788393!important;color:#fff!important;box-shadow:0 .125rem .25rem #8592a366!important}.btn-label-primary[_ngcontent-%COMP%]{color:#696cff!important;border-color:#0000;background:#35365f}.btn-label-primary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#5f61e6!important;color:#fff!important;box-shadow:0 .125rem .25rem #696cff66!important}.scene-duration[_ngcontent-%COMP%]{bottom:5px;right:10px;opacity:.8}"]})),r})();function Ru(t,r){if(1&t&&(e.j41(0,"div")(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.error,"\n        ")}}function Wp(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-scene-view",5),e.bIt("onChangeCapStyle",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.changeCapStyle(i))}),e.k0s()}if(2&t){let n;const o=e.XpG(2);e.Y8G("mode","player")("lstAnim",o.lstAnim)("capStyle",null!==(n=null==o.lstScene?null:o.lstScene.cap_style)&&void 0!==n?n:"")("scene",o.curScene)}}function qp(t,r){if(1&t&&(e.j41(0,"div",3),e.DNE(1,Wp,1,4,"app-scene-view",4),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curScene)}}function jl(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const i=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.select(i))}),e.nrm(1,"app-scene-view",11),e.k0s()}if(2&t){const n=r.$implicit,o=r.index,i=e.XpG(2);e.R7$(),e.Y8G("mode","thumb")("selected",o==i.curIdx)("showTransit",o+1<i.lstScene.list_scenes.length)("idx",o+1)("scene",n)}}function mo(t,r){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.DNE(3,jl,2,5,"div",9),e.k0s()()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",null==n.lstScene?null:n.lstScene.list_scenes)}}let Ml=(()=>{var t;class r{constructor(o){(0,f.A)(this,"app",void 0),(0,f.A)(this,"sceneInfo",'<scene-editor var-name="final-scene" anim-db="anim">{\n        "list_scenes": [\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/188693b0fa2147719389523c4192c99a.png","https://images.piclumen.com/normal/20241221/16/49df6b1abde1419b803ed7cbe74dc7c9.png","https://images.piclumen.com/normal/20241221/16/f05705a71df94fec9d1dfaffb348ef3e.png","https://images.piclumen.com/normal/20241221/16/33c4764f82a441588e68d903837ff0e8.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A beautiful, enchanting garden with luminescent flowers, sparkling streams, and fairy lights hanging from the trees. In the center, Lila the Curious Fairy hovers gently above a bed of multicolored tulips, her lavender wings shimmering in the moonlight\'s glow. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/170fe0d8ab564847aa974469f74f4992.png","https://images.piclumen.com/normal/20241221/16/9b2469bc7bc6421fae9caeeb8d9584b5.png","https://images.piclumen.com/normal/20241221/16/a7609dac63a445bd86a050af174072c1.png","https://images.piclumen.com/normal/20241221/16/cc4e75cc24974e379825ef30d006b761.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Oliver the Wise Owl perched on a sturdy oak branch, wearing his ornate monocle. Lila sits nearby, listening intently, her eyes wide with curiosity. The backdrop showcases a scenic view of the garden bathed in golden twilight, with gentle breezes rustling the leaves. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/251ec29683514a0086fa73f60725f1d4.png","https://images.piclumen.com/normal/20241221/16/f71fd6e1fb21418886f377ba82e1dc39.png","https://images.piclumen.com/normal/20241221/16/f89496edc9e548b596a4698f1e672365.png","https://images.piclumen.com/normal/20241221/16/fdce48c02d68445080e2d988b29d71b3.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Close-up of Oliver as he narrates his tale with deep, expressive gestures. Lila, full of wonder, leans closer, her wings shimmering faintly behind her. Sunbeams dance across the garden, illuminating their faces with soft, magical light. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/cabeb362c9164eebb2683241a21518b9.png","https://images.piclumen.com/normal/20241221/16/14dbdcd6af4c49b78c046748cf83c8d0.png","https://images.piclumen.com/normal/20241221/16/25ff7aeb238f4c6da80bfdba627e811a.png","https://images.piclumen.com/normal/20241221/16/df8754a9c2ea4420ac94771805f4c3fb.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila the Curious Fairy flying gracefully over a vibrant garden path. Below, Hugo the Playful Squirrel follows with spirited leaps. The path is lined with flowers that seem to sway with excitement and tall, whispering grasses. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/1da1c0ae592244ee9e35aa1c471a4ddd.png","https://images.piclumen.com/normal/20241221/16/fd8a08e51ec24e68b313763c84d64af0.png","https://images.piclumen.com/normal/20241221/16/ba3b4cefb2154578a5f5659a5604ee93.png","https://images.piclumen.com/normal/20241221/16/6735728d42164b099d6916f731135dad.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila and Hugo amidst an enchanting section of the garden, surrounded by clusters of bioluminescent mushrooms and arches of luminous roses. A gentle breeze guides them, ruffling Hugo\u2019s fluffy tail. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/a4233ab51efe4e1a95da8cfd4907af49.png","https://images.piclumen.com/normal/20241221/16/623cdcd0371e46af9f415e3f342feac5.png","https://images.piclumen.com/normal/20241221/16/59311e5a2b594637b46fc3363321475a.png","https://images.piclumen.com/normal/20241221/16/ebf8d09d89a14da4b57c299b1c894daa.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A small, intricately designed door, partially obscured by leafy vines. Lila hovers right in front of it, eyes wide with excitement, while Hugo stands beside her, tapping the door eagerly. The maple tree casts dappled sunlight onto the ground, creating a mystical atmosphere. style: whimsical 3D Pixar style"\n            },\n        \n        ],\n        "size": "9:16",\n        "cap_style": "word"\n    }</scene-editor>'),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"lstScene",void 0),(0,f.A)(this,"lstAnim",[]),(0,f.A)(this,"varName",""),(0,f.A)(this,"error",""),(0,f.A)(this,"curIdx",0),(0,f.A)(this,"curScene",void 0),this.app=o}getValue(){return{varName:this.varName,value:JSON.stringify(this.lstScene)}}ngOnInit(){let o=document.createElement("div");o.innerHTML=this.sceneInfo;let i=o.querySelector("scene-editor"),l=this.sceneInfo,u="";i&&(l=i.innerHTML,this.varName=i.getAttribute("var-name")??"",u=i.getAttribute("anim-db")??"");try{this.lstScene=lt.parseJson(l)}catch(p){this.error=p+"\n"+lt.replaceAllBase64Urls(l)}(this.lstScene?.list_scenes.length??0)>0&&(this.curScene=this.lstScene?.list_scenes[0]),this.app.listData({name:"",spec:u}).subscribe(p=>{this.lstAnim=p.map(_=>JSON.parse(_.content))})}select(o){this.curIdx=o,this.curScene=this.lstScene?.list_scenes[o]}changeCapStyle(o){this.lstScene.cap_style=o}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-editor"]],inputs:{sceneInfo:"sceneInfo"},outputs:{onSave:"onSave"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","layout-bot",4,"ngIf"],[1,"mb-3"],[3,"mode","lstAnim","capStyle","scene","onChangeCapStyle",4,"ngIf"],[3,"onChangeCapStyle","mode","lstAnim","capStyle","scene"],[1,"layout-bot"],[1,"card"],[1,"card-body","list-scenes"],["class","mb-3",3,"click",4,"ngFor","ngForOf"],[1,"mb-3",3,"click"],[3,"mode","selected","showTransit","idx","scene"]],template:function(o,i){1&o&&e.DNE(0,Ru,6,1,"div",0)(1,qp,2,1,"div",1)(2,mo,4,1,"div",2),2&o&&(e.Y8G("ngIf",i.error),e.R7$(),e.Y8G("ngIf",!i.error),e.R7$(),e.Y8G("ngIf",!i.error))},dependencies:[V.MD,V.Sq,V.bT,G.YN,Hp],styles:[".list-scenes[_ngcontent-%COMP%]{width:115px;max-height:95vh;overflow-y:auto}.layout-bot[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px}"]})),r})();const gi=["chatInput"],Dn=["interacComp"];function Sr(t,r){if(1&t&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.chatboxInfo.msg),e.npT)}}function eo(t,r){if(1&t&&e.nrm(0,"app-anim-editor",11,0),2&t){const n=e.XpG(2);e.Y8G("conf",n.animEditorInfo)}}function $l(t,r){if(1&t&&e.nrm(0,"app-js-runner",12,0),2&t){const n=e.XpG(2);e.Y8G("jsInfo",n.jsRunnerInfo)}}function Zp(t,r){if(1&t&&e.nrm(0,"app-scene-editor",13,0),2&t){const n=e.XpG(2);e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Jp(t,r){if(1&t&&(e.j41(0,"div",7),e.DNE(1,eo,2,1,"app-anim-editor",8)(2,$l,2,1,"app-js-runner",9)(3,Zp,2,1,"app-scene-editor",10),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.animEditorInfo),e.R7$(),e.Y8G("ngIf",n.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",n.sceneEditorInfo)}}function Vo(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"textarea",14,1),e.bIt("input",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.autoResize())})("keydown",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.keydown(i))}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.userMsg,i)||(l.userMsg=i),e.Njj(i)}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("readOnly",n.isRunning),e.R50("ngModel",n.userMsg)}}let kr=(()=>{var t;class r{constructor(o,i){(0,f.A)(this,"api",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"chatInput",void 0),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"elId",""),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"onAgentResponseComplete",new e.bkB),(0,f.A)(this,"lastValue",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"animDB",""),(0,f.A)(this,"default",!0),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"userMsg",""),(0,f.A)(this,"onAction",new e.bkB),(0,f.A)(this,"onRunJS",new e.bkB),(0,f.A)(this,"onBind",new e.bkB),(0,f.A)(this,"showChatBox",!1),(0,f.A)(this,"queue",[]),(0,f.A)(this,"curFullmsg",""),this.api=o,this.zone=i}getValue(){return this.interacComp&&!this.default?this.interacComp.getValue():this.showChatBox?this.lastValue:void 0}ngOnInit(){this.agentRunner=new _i(this.api,new br((o,i)=>{this.renderChunk(i)},o=>{this.queue.push({str:o,t:-1})})),this.agentRunner.setAgentName(this.chatboxInfo.req.Req.Name),this.agentRunner.setVars(this.chatboxInfo.req.Req.Vars??[]);for(let o of this.chatboxInfo.req.Req.Messages)this.agentRunner.addMessage(o);this.chatboxInfo.req?.Req.Type&&this.agentRunner.setMemType(this.chatboxInfo.req?.Req.Type),"__AGENT_STREAM___"==this.chatboxInfo.msg&&setTimeout(()=>{this.send()},500)}agentDone(o){this.zone.run(()=>{this.isRunning=!1;let i=document.querySelector(".msg-loading"),l=i?i.innerHTML:"",u=i?.querySelector("chatbox")?.getAttribute("var-name")??"";this.lastValue={value:o,varName:u},document.querySelector(".msg-loading").className="msg-assistant",this.onAgentResponseComplete.emit({msg:o,html:l}),this.renderExternalUI(l),this.renderAction(o)})}reset(){this.sceneEditorInfo="",this.animEditorInfo="",this.jsRunnerInfo="",this.animDB="",this.default=!0}renderExternalUI(o){this.reset();let i=document.createElement("div");i.innerHTML=o;let l=i.querySelector("scene-editor");return l?(this.sceneEditorInfo=o,void(this.default=!1)):(l=i.querySelector("anim-editor"),l?(this.animEditorInfo=o,void(this.default=!1)):(l=i.querySelector("js-runner"),l?(this.jsRunnerInfo=o,void(this.default=!1)):void 0))}send(o){if(o?.preventDefault(),this.isRunning)return;let i=document.getElementById("chat-his-"+this.elId);if(i){if(this.userMsg){let u=document.createElement("div");u.className="msg-user badge bg-label-primary p-3 mb-3 text-wrap text-start",u.innerHTML=this.userMsg,i.appendChild(u)}let l=document.createElement("div");l.className="msg-loading",l.innerHTML='<div class="card p-5 mb-3">Running...</div>',i.appendChild(l)}this.isRunning=!0,this.userMsg&&this.agentRunner.addUserMessage(this.userMsg),this.agentRunner.send(),this.userMsg="",this.curFullmsg=""}renderAction(o){setTimeout(()=>{let i=this,l=document.querySelectorAll("[bs-action]");for(let _ of l){let v=_.getAttribute("bs-action"),g=document.createElement("div");g.className="pt-3 text-center",g.innerHTML=`<span class="btn text-link p-0">${v.split("->")[0].split(":")[2]}</span>`,_.appendChild(g),_.removeAttribute("bs-action"),g.addEventListener("click",function(){i.onAction.emit({act:v,el:_})})}let u=document.querySelectorAll("[bs-run]");for(let _ of u){let v=_.getAttribute("bs-run");i.onRunJS.emit({act:v,el:_})}let p=document.querySelectorAll("[bs-edit]");for(let _ of p){let v=_.getAttribute("bs-edit");i.onBind.emit({act:v,el:_})}},2e3)}renderControl(){let i=document.querySelector("#chat-his-"+this.elId)?.querySelector(".language-json"),l=i?.innerHTML;if(l)try{l=JSON.stringify(JSON.parse(l.trim()),null,2),i.innerHTML=l.trim()}catch{}}renderChunk(o){let i=o?o.length:0,l=0;for(;l<i;){const u=Math.floor(9*Math.random())+2,p=Math.floor(16*Math.random())+5;this.queue.push({str:o.substring(l,l+u),t:p}),0==l&&1==this.queue.length&&this.startInsertAnim(),l+=u}}startInsertAnim(){let o=this.queue.shift();if(o){if(-1==o.t)return void this.agentDone(o.str);this.curFullmsg+=o.str,this.renderMsg(this.curFullmsg),setTimeout(()=>{this.startInsertAnim()},o.t)}}renderMsg(o){let i=lt.parseIncompleteJson(o);if(i&&i!=o&&(i=JSON.stringify(i)),!i)return"";let l=new Map,u=this.chatboxInfo.req?.Req.Vars;for(let v of u){let g=v.split("::");l.set(g[0],v.substring(g[0].length+2))}l.set(this.chatboxInfo.req.Output.Name,i);let p=lt.compileTemplate(this.chatboxInfo.html,l);if(document.getElementById("chat-his-"+this.elId)){let v=document.querySelector(".msg-loading");if(v){let g=document.createElement("code");g.innerHTML=p,g.querySelector("chatbox")&&(this.showChatBox=!0);let x=g.querySelectorAll('[bs-data="markdown-view"]');for(let C of x)C.innerHTML=lt.markdownToHtml(C.innerHTML.trim());return v.innerHTML=g.innerHTML,this.renderControl(),v.innerHTML}}return""}autoResize(){const o=this.chatInput?.nativeElement;o.style.height="37px",o.style.overflowY="hidden";let i=o.scrollHeight;i>120&&(i=120,o.style.overflowY="auto"),o.style.height=i+"px"}keydown(o){!o.shiftKey&&"Enter"==o.key&&(o.preventDefault(),""!=this.userMsg.trim()&&this.send(o),setTimeout(()=>{this.autoResize()},100))}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(si),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-chatbox"]],viewQuery:function(o,i){if(1&o&&(e.GBs(gi,5),e.GBs(Dn,5)),2&o){let l;e.mGM(l=e.lsd())&&(i.chatInput=l.first),e.mGM(l=e.lsd())&&(i.interacComp=l.first)}},inputs:{chatboxInfo:"chatboxInfo",elId:"elId"},outputs:{onAgentResponseComplete:"onAgentResponseComplete",onAction:"onAction",onRunJS:"onRunJS",onBind:"onBind"},standalone:!0,features:[e.aNF],decls:5,vars:8,consts:[["interacComp",""],["chatInput",""],[1,"chatbox"],[3,"id"],[3,"innerHTML",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"innerHTML"],[1,"mt-3"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf"],[3,"jsInfo"],[3,"sceneInfo"],["rows","1","placeholder","Enter your message...",1,"form-control",3,"input","keydown","ngModelChange","readOnly","ngModel"]],template:function(o,i){1&o&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,Sr,2,3,"div",4),e.k0s(),e.DNE(3,Jp,4,3,"div",5)(4,Vo,3,2,"div",5),e.k0s()),2&o&&(e.R7$(),e.HbH(i.default||i.isRunning?"":"d-none"),e.Mz_("id","chat-his-",i.elId,""),e.R7$(),e.Y8G("ngIf","__AGENT_STREAM___"!=i.chatboxInfo.msg),e.R7$(),e.Y8G("ngIf",!i.default&&!i.isRunning),e.R7$(),e.Y8G("ngIf",i.showChatBox))},dependencies:[V.MD,V.bT,G.YN,G.me,G.BC,G.vS,_r,vr,Ml,Cr],styles:["textarea[_ngcontent-%COMP%]{resize:none;overflow-y:hidden;height:37px}"]})),r})(),vi=(()=>{var t;class r{constructor(){(0,f.A)(this,"zipInfo","")}ngOnInit(){let o=JSON.parse(this.decodeHtml(this.zipInfo.trim()));setTimeout((0,Fe.A)(function*(){let i=yield lt.zipFiles(o,"file.zip",_=>{let v=document.querySelector(".__ZIP_FILE__");v&&(v.innerHTML="Zipping..."+_+"/"+o.length)});const l=URL.createObjectURL(i),u=document.createElement("a");u.href=l,u.download="file.zip",u.innerHTML="Download (file.zip)";let p=document.querySelector(".__ZIP_FILE__");p&&(p.innerHTML="",p.appendChild(u))}),500)}decodeHtml(o){const i=document.createElement("textarea");return i.innerHTML=o,i.value}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip"]],inputs:{zipInfo:"zipInfo"},standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[[1,"__ZIP_FILE__"]],template:function(o,i){1&o&&e.nrm(0,"div",0)},dependencies:[V.MD,G.YN]})),r})();const Os=["interacComp"],Gl=(t,r)=>[t,r];function yi(t,r){if(1&t&&e.nrm(0,"app-chatbox",8,0),2&t){const n=e.XpG();e.Y8G("chatboxInfo",n.chatboxInfo)}}function _o(t,r){if(1&t&&e.nrm(0,"app-scene-editor",9,0),2&t){const n=e.XpG();e.Y8G("sceneInfo",n.sceneEditorInfo)}}function rt(t,r){if(1&t&&e.nrm(0,"app-anim-editor",10,0),2&t){const n=e.XpG();e.Y8G("conf",n.animEditorInfo)}}function Qe(t,r){if(1&t&&e.nrm(0,"app-js-runner",11,0),2&t){const n=e.XpG();e.Y8G("jsInfo",n.jsRunnerInfo)}}function ho(t,r){if(1&t&&e.nrm(0,"app-zip",12),2&t){const n=e.XpG();e.Y8G("zipInfo",n.zipInfo)}}function zt(t,r){if(1&t&&(e.nrm(0,"div",13),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.template),e.npT)}}function Qt(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",14)(1,"azt-upload-multiple-box",15),e.bIt("uploadComplete",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.uploadMultipleFiles(i))}),e.nrm(2,"div",16),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("uploadToCdnMenu",n.allUploadToCdnMenuTypes.ADMIN_DIGITALIZE)("fileType",e.l_i(5,Gl,n.allUploadFileTypes.IMAGE,n.allUploadFileTypes.PDF))("convertPdfTimeout",600)("convertPdfToImages",!1)("showProgress",!0)}}let zo=(()=>{var t;class r{constructor(){(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"template",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"zipInfo",""),(0,f.A)(this,"uploadInfo",""),(0,f.A)(this,"default",!1),(0,f.A)(this,"allUploadToCdnMenuTypes",Gn),(0,f.A)(this,"allUploadFileTypes",al),(0,f.A)(this,"lstFile",[])}getValue(){return this.interacComp?.getValue()}reset(){this.chatboxInfo=void 0,this.sceneEditorInfo="",this.animEditorInfo="",this.zipInfo="",this.default=!1}ngOnInit(){this.reset();let o=this.template.trim();if("__AGENT_STREAM___"==o)return void(this.chatboxInfo={msg:this.template.trim(),req:JSON.parse(this.vars.find(u=>u.startsWith("__chatbox-agent::"))?.substring(17)??""),html:JSON.parse(this.vars.find(u=>u.startsWith("__chatbox-template::"))?.substring(20)??"")});let i=document.createElement("div");i.innerHTML=o;let l=i.querySelector("scene-editor");if(l)this.sceneEditorInfo=o;else if(l=i.querySelector("anim-editor"),l)this.animEditorInfo=o;else if(l=i.querySelector("js-runner"),l)this.jsRunnerInfo=o;else if(l=i.querySelector("zip"),l)this.zipInfo=l.innerHTML;else{if(l=i.querySelector("azt-upload-files"),l){let u=l.querySelector('textarea[class="d-none"]');u&&(this.uploadInfo=""==u.value.trim()?"[]":u.value.trim(),setTimeout(()=>{document.querySelector("azt-upload-files").addEventListener("click",()=>{document.querySelector('#azt-upload-btn input[type="file"]')?.click()}),this.updateFileView()},1e3))}this.default=!0}}uploadMultipleFiles(o){this.lstFile=o;const i=document.querySelector('azt-upload-files textarea[class="d-none"]');i&&(i.value=JSON.stringify(o),this.updateFileView())}updateFileView(){const o=document.querySelector('azt-upload-files textarea[class="d-none"]'),i=o.value;if(document.querySelector("#azt-list-files")?.remove(),""==i.trim())return;const l=JSON.parse(i),u=document.createElement("div");u.id="azt-list-files",u.className="mb-2";for(let p of l){let _=document.createElement("div");_.innerHTML=`<span>${p.name} <i class="bx bx-x ml-2"></i></span>`,_.querySelector("i")?.addEventListener("click",()=>{this.lstFile=this.lstFile.filter(v=>v.url!=p.url),o.value=JSON.stringify(this.lstFile),this.updateFileView()}),u.appendChild(_),document.querySelector("azt-upload-files").parentNode.prepend(u)}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-runner-main-view"]],viewQuery:function(o,i){if(1&o&&e.GBs(Os,5),2&o){let l;e.mGM(l=e.lsd())&&(i.interacComp=l.first)}},inputs:{template:"template",vars:"vars"},standalone:!0,features:[e.aNF],decls:7,vars:7,consts:[["interacComp",""],[3,"chatboxInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"zipInfo",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["id","azt-upload-btn","class","d-none",4,"ngIf"],[3,"chatboxInfo"],[3,"sceneInfo"],[3,"conf"],[3,"jsInfo"],[3,"zipInfo"],[3,"innerHTML"],["id","azt-upload-btn",1,"d-none"],[3,"uploadComplete","uploadToCdnMenu","fileType","convertPdfTimeout","convertPdfToImages","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"]],template:function(o,i){1&o&&e.DNE(0,yi,2,1,"app-chatbox",1)(1,_o,2,1,"app-scene-editor",2)(2,rt,2,1,"app-anim-editor",3)(3,Qe,2,1,"app-js-runner",4)(4,ho,1,1,"app-zip",5)(5,zt,2,3,"div",6)(6,Qt,3,8,"div",7),2&o&&(e.Y8G("ngIf",i.chatboxInfo),e.R7$(),e.Y8G("ngIf",i.sceneEditorInfo),e.R7$(),e.Y8G("ngIf",i.animEditorInfo),e.R7$(),e.Y8G("ngIf",i.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",i.zipInfo),e.R7$(),e.Y8G("ngIf",i.default),e.R7$(),e.Y8G("ngIf",i.uploadInfo))},dependencies:[bl,V.MD,V.bT,G.YN,_r,kr,Ml,vr,vi,Cr]})),r})();const bi=["interacComp"];function en(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"a",12),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.close())}),e.qSk(),e.j41(3,"svg",13),e.nrm(4,"path",14)(5,"path",15),e.k0s()()()()}}function Vs(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",20)(1,"app-form-node",21),e.bIt("onStartUpload",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.onStartUpload())})("onUploaded",function(i){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onUploaded(i))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.Y8G("data",n)("appId",o.id)}}function ju(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Vs,2,2,"div",19),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","form"==n.type)}}function Mu(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.cancelApp())}),e.EFF(1," H\u1ee7y "),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("disabled",n.isCancelling)}}function zs(t,r){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(3);e.ZvI("",n.submitBtn.icon," mr-2")}}function $u(t,r){if(1&t&&(e.j41(0,"div",22),e.DNE(1,Mu,2,1,"button",23),e.j41(2,"button",24),e.DNE(3,zs,1,3,"i",25),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.isRunning),e.R7$(),e.Y8G("disabled",n.isRunning||n.isUploading),e.R7$(),e.Y8G("ngIf",n.submitBtn.icon),e.R7$(),e.SpI(" ",n.isRunning?"\u0110ang x\u1eed l\xfd...":n.submitBtn.title," ")}}function to(t,r){if(1&t){const n=e.RV6();e.j41(0,"form",16),e.bIt("submit",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.submit(i))}),e.DNE(1,ju,2,1,"div",17)(2,$u,5,4,"div",18),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.forms),e.R7$(),e.Y8G("ngIf",n.forms.length>0)}}function Bs(t,r){if(1&t&&(e.j41(0,"div",33),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,n.lastInfo,100))}}function Dl(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",27)(1,"div",28),e.nrm(2,"azt-loading-ui"),e.j41(3,"div",29)(4,"div"),e.EFF(5),e.k0s(),e.DNE(6,Bs,3,4,"div",30),e.k0s()(),e.j41(7,"div",31)(8,"button",32),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cancelApp())}),e.EFF(9,"H\u1ee7y"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.JRh(n.lastStatus?n.lastStatus:"\u0110ang x\u1eed l\xfd..."),e.R7$(),e.Y8G("ngIf",n.lastInfo)}}function Gu(t,r){if(1&t&&e.nrm(0,"app-runner-main-view",36,0),2&t){const n=e.XpG(2);e.Y8G("vars",n.runInfo.vars)("template",n.runInfo.data)}}function Kp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22)(1,"button",37),e.bIt("click",function(){let i;e.eBV(n);const l=e.XpG(2);return e.Njj(l.resumeApp(null!==(i=null==l.runInfo?null:l.runInfo.next)&&void 0!==i?i:""))}),e.EFF(2," Ti\u1ebfp t\u1ee5c "),e.k0s()()}}function go(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",34),e.DNE(2,Gu,2,2,"app-runner-main-view",35),e.k0s(),e.DNE(3,Kp,3,0,"div",18),e.k0s()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.data),e.R7$(),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.next)}}let Bo=(()=>{var t;class r{constructor(o,i,l,u){(0,f.A)(this,"route",void 0),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"showActions",!0),(0,f.A)(this,"queryParamsObject",{}),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"appInfo",void 0),(0,f.A)(this,"data",[]),(0,f.A)(this,"id",0),(0,f.A)(this,"forms",[]),(0,f.A)(this,"his",void 0),(0,f.A)(this,"isDone",!1),(0,f.A)(this,"isAsync",!0),(0,f.A)(this,"isFullScreen",!1),(0,f.A)(this,"hasCustomSubmitBtn",!1),(0,f.A)(this,"submitBtn",{title:"B\u1eaft \u0111\u1ea7u",icon:""}),(0,f.A)(this,"isUploading",!1),(0,f.A)(this,"files",[]),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"strResult",""),(0,f.A)(this,"isCancelling",!1),(0,f.A)(this,"showLogDetail",!1),(0,f.A)(this,"strStatus",[]),(0,f.A)(this,"lastStatus",""),(0,f.A)(this,"lastInfo",""),(0,f.A)(this,"runInfo",void 0),(0,f.A)(this,"curToken",""),this.route=o,this.auth=i,this.userSv=l,this.appService=u}getInteracValue(){return this.interacComp?.getValue()}ngOnInit(){this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),o=>{this.loadApp()})}loadApp(){this.id=this.appId,this.load()}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(o=>{this.appService.history(this.id).subscribe(u=>{this.his=u}),this.appInfo=o,this.isAsync=1==o.pinTaskbar,this.data=JSON.parse(o.config);let i=[];for(let u of this.data)i.push(...u.links);this.forms=this.data.filter(u=>-1==i.indexOf(u.id)&&"form"==u.type);let l=this.forms[0]?.conf.filter(u=>"submit"==u.value.type)[0]?.value;this.submitBtn={title:l?.label??"B\u1eaft \u0111\u1ea7u",icon:l?.desc??""},0==this.forms.length&&(this.isRunning=!0,this.isDone=!1,this.runApp(this.queryParamsObject))})}onStartUpload(){this.isUploading=!0}onUploaded(o){let i=this.files.filter(l=>l.name==o.name)[0];i?(i.file=o.file,i.content=o.content):this.files.push(o),this.isUploading=!1}close(){window.history.back()}submit(o){var i=this;return(0,Fe.A)(function*(){o.preventDefault(),i.isRunning=!0,i.isDone=!1;let l=yield i.getFormArgs();i.runApp(l)})()}getFormArgs(){var o=this;return(0,Fe.A)(function*(){let i=document.getElementById("nodeForms");const l=new FormData(i);for(let p of o.files){l.set(p.name,p.content);let _=yield lt.fileToBase64(p.file);l.set(p.name+"-dataUrl",_)}let u={};return l.forEach((p,_)=>{o.vars.set(_,p instanceof File?p:JSON.stringify(p)),u[_]=p}),u})()}cancelApp(){this.isCancelling=!0,this.appService.cancel(this.curToken).subscribe(o=>{this.isCancelling=!1})}checkStatus(o){this.isRunning&&""!=o?this.appService.status(o).subscribe({next:i=>{if("success"==i.status)this.renderRunInfo(JSON.parse(i.data??"{}"));else{let l=i.message?.split("\n")??[];this.strStatus=[],this.lastInfo="";for(let _ of l)_.startsWith("[i]:")?(this.strStatus[this.strStatus.length-1].startsWith("[i]:")?this.strStatus[this.strStatus.length-1]+=_.substring(4):this.strStatus.push(_),this.lastInfo=_.substring(4)):(this.lastInfo="",this.strStatus.push(_));let p=this.strStatus.filter(_=>!_.startsWith("[i]:"));this.lastStatus=p.length>0?p[p.length-1]:this.lastStatus}setTimeout(()=>{this.checkStatus(o)},1e3)},error:i=>{this.strStatus=[i.message]}}):this.strStatus=[]}loadPrevRunning(){this.his?.token&&(this.isRunning=!0,this.isDone=!1,this.curToken=this.his.token,this.checkStatus(this.his.token))}onRunJS(o){if(!this.runInfo)return;let i=this.getVarValue(o.act);new Function(i)(o.el)}setValue(o,i){if(!this.runInfo)return;let l=o.split("."),u=l[0],p=-1;if(u.endsWith("]")){let x=u.split("[");p=+x[1].split("]")[0],u=x[0]}let _=this.runInfo.vars.filter(x=>x.startsWith(`${u}::`))[0],v=this.runInfo.vars.indexOf(_),g=JSON.parse(_.substring(u.length+2)),y=g;if(p>=0&&(y=y[p],1==l.length))return g[p]=i,void(this.runInfo.vars[v]=u+"::"+JSON.stringify(g,null,2));if(1!=l.length){for(let x=1;x<l.length-1;x++){let C=l[x].split("[");if(C.length>1){let E=+C[1].replace("]","");y=y[C[0]][E]}else y=y[C[0]]}y[l[l.length-1]]=i,this.runInfo.vars[v]=u+"::"+JSON.stringify(g,null,2)}else this.runInfo.vars[v]=u+"::"+i}getVarValue(o){if(!this.runInfo)return"";let i=o.split("."),l=i[0],u=-1;if(l.endsWith("]")){let v=l.split("[");u=+v[1].split("]")[0],l=v[0]}let p=this.runInfo.vars.filter(v=>v.startsWith(`${l}::`))[0],_=JSON.parse(p.substring(l.length+2));u>=0&&(_=_[u]);for(let v=1;v<i.length;v++){let g=i[v].split("[");if(g.length>1){let y=+g[1].replace("]","");_=_[g[0]][y]}else _=_[g[0]]}return _}restart(){location.reload()}resumeApp(o){var i=this;return(0,Fe.A)(function*(){let l=i.getInteracValue(),u=o.split(":"),p={};for(let v of i.runInfo?.vars??[]){let g=v.split("::");p[g[0]]=g[1]}l?.varName&&(p[l.varName]=l.value);let _=yield i.getFormArgs();for(let v in _)p[v]=_[v];i.isRunning=!0,i.isDone=!1,i.runApp(p,`${u[0]}:${u[1]}`)})()}runApp(o,i){this.curToken="",this.isAsync?this.appService.runAppAsync((i??this.id)+"",o).subscribe({next:l=>{this.checkStatus(l.data),this.curToken=l.data},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}}):this.appService.runApp((i??this.id)+"",o).subscribe({next:l=>{this.renderRunInfo(l)},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}})}renderRunInfo(o){this.runInfo=o,this.isRunning=!1,this.isDone=!0}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ne.nX),e.rXU(rr.u),e.rXU(Ft.R),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-app-view"]],viewQuery:function(o,i){if(1&o&&e.GBs(bi,5),2&o){let l;e.mGM(l=e.lsd())&&(i.interacComp=l.first)}},inputs:{appId:"appId",showActions:"showActions",queryParamsObject:"queryParamsObject"},standalone:!0,features:[e.aNF],decls:10,vars:4,consts:[["interacComp",""],[1,"app-main"],[1,"window-container","window-container-sm"],["data-windowbackdrop","true",1,"window","window--active"],[1,"w-100","overflow-hidden",2,"margin-top","10px"],["class","window-top-btn",4,"ngIf"],[1,"window-content","window-content-sm","pb-3"],[1,"pb-3","window-dark","window-dark-sm"],["class","ml-5 mr-5 mt-2 position-relative","id","nodeForms",3,"submit",4,"ngIf"],["class","ml-5 mr-5 position-relative",4,"ngIf"],[1,"window-top-btn"],[1,"window__controls","text-right"],[1,"window__close","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x"],["d","M18 6 6 18","key","1bl5f8"],["d","m6 6 12 12","key","d8bk6v"],["id","nodeForms",1,"ml-5","mr-5","mt-2","position-relative",3,"submit"],[4,"ngFor","ngForOf"],["class","mt-3 text-right",4,"ngIf"],["class","node-form mb-3",4,"ngIf"],[1,"node-form","mb-3"],[3,"onStartUpload","onUploaded","data","appId"],[1,"mt-3","text-right"],["class","btn btn-secondary mr-3","type","button",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"class",4,"ngIf"],["type","button",1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"ml-5","mr-5","position-relative"],[1,"mt-5","flex","items-center"],["id","run-msg",1,"inline-block","ml-2"],["class","small text-muted",4,"ngIf"],[1,"text-right","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"small","text-muted"],[1,"mt-3"],[3,"vars","template",4,"ngIf"],[3,"vars","template"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e.DNE(4,en,6,0,"div",5),e.j41(5,"div",6)(6,"div",7),e.DNE(7,to,3,2,"form",8)(8,Dl,10,2,"div",9)(9,go,4,2,"div",9),e.k0s()()()()()()),2&o&&(e.R7$(4),e.Y8G("ngIf",i.showActions),e.R7$(3),e.Y8G("ngIf",!i.isRunning&&!i.isDone),e.R7$(),e.Y8G("ngIf",i.isRunning),e.R7$(),e.Y8G("ngIf",i.isDone&&!i.isRunning))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.qT,G.cb,G.cV,Au,zo,Ct,Mo.R],styles:[".position-relative[_ngcontent-%COMP%]{position:relative}"]})),r})();function xi(t,r){1&t&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.EFF(3,"PHI\xcaN D\u1ea0Y \u0110\u1ec0 XU\u1ea4T CHO B\u1ea0N"),e.k0s()(),e.j41(4,"div",2)(5,"div",3),e.EFF(6,"DANH S\xc1CH PHI\xcaN D\u1ea0Y B\u1ea0N \u0110\xc3 \u0110\u0102NG K\xdd"),e.k0s(),e.j41(7,"div",3)(8,"a",4),e.nrm(9,"i",5),e.EFF(10," \u0110\u0103ng k\xfd phi\xean d\u1ea1y m\u1edbi "),e.k0s()(),e.nrm(11,"app-app-view",6),e.k0s()()),2&t&&(e.R7$(11),e.Y8G("appId",11)("showActions",!1))}let Ps=(()=>{var t;class r extends Pe.H{constructor(o,i,l){super(),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"isLogged",!1),this.auth=o,this.userSv=i,this.appService=l}ngOnInit(){this.auth.isLoggedIn()?this.isLogged=!0:this.auth.login("",this.userSv.getToken(),o=>{this.isLogged=!0})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(rr.u),e.rXU(Ft.R),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-edu-store-teacher"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:1,consts:[["class","grid grid-cols-2 gap-4 mt-3",4,"ngIf"],[1,"grid","grid-cols-2","gap-4","mt-3"],[1,"box"],[1,"text-center","mt-3"],["href","/vi/admin/ai/app/10",1,"btn","btn-primary"],[1,"bx","bx-plus","mr-2"],[3,"appId","showActions"]],template:function(o,i){1&o&&(e.j41(0,"teacher-layout"),e.DNE(1,xi,12,2,"div",0),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",i.isLogged))},dependencies:[_s,Bo,V.MD,V.bT,G.YN]})),r})();var S=le(1395);function et(t){if("string"==typeof t||"number"==typeof t)return""+t;let r="";if(Array.isArray(t))for(let o,n=0;n<t.length;n++)""!==(o=et(t[n]))&&(r+=(r&&" ")+o);else for(let n in t)t[n]&&(r+=(r&&" ")+n);return r}var _n=le(7528);const vo=t=>{let r;const n=new Set,o=(g,y)=>{const x="function"==typeof g?g(r):g;if(!Object.is(x,r)){const C=r;r=y??("object"!=typeof x||null===x)?x:Object.assign({},r,x),n.forEach(E=>E(r,C))}},i=()=>r,_={setState:o,getState:i,getInitialState:()=>v,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},v=r=t(o,i,_);return _},{useDebugValue:Po}=S,{useSyncExternalStoreWithSelector:Du}=_n,Ol=t=>t;function Ls(t,r=Ol,n){const o=Du(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,n);return Po(o),o}const tn=(t,r)=>{const n=(t=>t?vo(t):vo)(t),o=(i,l=r)=>Ls(n,i,l);return Object.assign(o,n),o};function Re(t,r){if(Object.is(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[o,i]of t)if(!Object.is(i,r.get(o)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const o of t)if(!r.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(r,o)||!Object.is(t[o],r[o]))return!1;return!0}var Ou={value:()=>{}};function Vl(){for(var o,t=0,r=arguments.length,n={};t<r;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ci(n)}function Ci(t){this._=t}function Vu(t,r){for(var i,n=0,o=t.length;n<o;++n)if((i=t[n]).name===r)return i.value}function wr(t,r,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===r){t[o]=Ou,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:r,value:n}),t}Ci.prototype=Vl.prototype={constructor:Ci,on:function(t,r){var i,n=this._,o=function zl(t,r){return t.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}(t+"",n),l=-1,u=o.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++l<u;)if(i=(t=o[l]).type)n[i]=wr(n[i],t.name,r);else if(null==r)for(i in n)n[i]=wr(n[i],t.name,null);return this}for(;++l<u;)if((i=(t=o[l]).type)&&(i=Vu(n[i],t.name)))return i},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new Ci(t)},call:function(t,r){if((i=arguments.length-2)>0)for(var i,l,n=new Array(i),o=0;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,i=(l=this._[t]).length;o<i;++o)l[o].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,l=o.length;i<l;++i)o[i].value.apply(r,n)}};const Xs=Vl;function Si(){}function Nr(t){return null==t?Si:function(){return this.querySelector(t)}}function Us(){return[]}function Bl(t){return null==t?Us:function(){return this.querySelectorAll(t)}}function Pl(t){return function(){return this.matches(t)}}function Ir(t){return function(r){return r.matches(t)}}var Ys=Array.prototype.find;function Ll(){return this.firstElementChild}var Ul=Array.prototype.filter;function Yl(){return Array.from(this.children)}function Hs(t){return new Array(t.length)}function gn(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}function Hl(t,r,n,o,i,l){for(var p,u=0,_=r.length,v=l.length;u<v;++u)(p=r[u])?(p.__data__=l[u],o[u]=p):n[u]=new gn(t,l[u]);for(;u<_;++u)(p=r[u])&&(i[u]=p)}function Pu(t,r,n,o,i,l,u){var p,_,C,v=new Map,g=r.length,y=l.length,x=new Array(g);for(p=0;p<g;++p)(_=r[p])&&(x[p]=C=u.call(_,_.__data__,p,r)+"",v.has(C)?i[p]=_:v.set(C,_));for(p=0;p<y;++p)C=u.call(t,l[p],p,l)+"",(_=v.get(C))?(o[p]=_,_.__data__=l[p],v.delete(C)):n[p]=new gn(t,l[p]);for(p=0;p<g;++p)(_=r[p])&&v.get(x[p])===_&&(i[p]=_)}function no(t){return t.__data__}function Ws(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Tr(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}gn.prototype={constructor:gn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var st="http://www.w3.org/1999/xhtml";const Rr={svg:"http://www.w3.org/2000/svg",xhtml:st,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ii(t){var r=t+="",n=r.indexOf(":");return n>=0&&"xmlns"!==(r=t.slice(0,n))&&(t=t.slice(n+1)),Rr.hasOwnProperty(r)?{space:Rr[r],local:t}:t}function Zl(t){return function(){this.removeAttribute(t)}}function Zs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jl(t,r){return function(){this.setAttribute(t,r)}}function Uo(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function ut(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Nt(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function jr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Mr(t){return function(){this.style.removeProperty(t)}}function $r(t,r,n){return function(){this.style.setProperty(t,r,n)}}function ef(t,r,n){return function(){var o=r.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Co(t,r){return t.style.getPropertyValue(r)||jr(t).getComputedStyle(t,null).getPropertyValue(r)}function Kl(t){return function(){delete this[t]}}function Ql(t,r){return function(){this[t]=r}}function Bn(t,r){return function(){var n=r.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ai(t){return t.trim().split(/^|\s+/)}function Gr(t){return t.classList||new Js(t)}function Js(t){this._node=t,this._names=Ai(t.getAttribute("class")||"")}function ec(t,r){for(var n=Gr(t),o=-1,i=r.length;++o<i;)n.add(r[o])}function tc(t,r){for(var n=Gr(t),o=-1,i=r.length;++o<i;)n.remove(r[o])}function Yu(t){return function(){ec(this,t)}}function Hu(t){return function(){tc(this,t)}}function Wu(t,r){return function(){(r.apply(this,arguments)?ec:tc)(this,t)}}function Zu(){this.textContent=""}function Ju(t){return function(){this.textContent=t}}function Dr(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Ks(){this.innerHTML=""}function Qs(t){return function(){this.innerHTML=t}}function Qu(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function ed(){this.nextSibling&&this.parentNode.appendChild(this)}function nd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oc(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===st&&r.documentElement.namespaceURI===st?r.createElement(t):r.createElementNS(n,t)}}function id(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ic(t){var r=Ii(t);return(r.local?id:oc)(r)}function tf(){return null}function nf(){var t=this.parentNode;t&&t.removeChild(this)}function ad(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function ld(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function af(t){return function(){var r=this.__on;if(r){for(var l,n=0,o=-1,i=r.length;n<i;++n)l=r[n],t.type&&l.type!==t.type||l.name!==t.name?r[++o]=l:this.removeEventListener(l.type,l.listener,l.options);++o?r.length=o:delete this.__on}}}function Tn(t,r,n){return function(){var i,o=this.__on,l=function rf(t){return function(r){t.call(this,r,this.__data__)}}(r);if(o)for(var u=0,p=o.length;u<p;++u)if((i=o[u]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=n),void(i.value=r);this.addEventListener(t.type,l,n),i={type:t.type,name:t.name,value:r,listener:l,options:n},o?o.push(i):this.__on=[i]}}function Or(t,r,n){var o=jr(t),i=o.CustomEvent;"function"==typeof i?i=new i(r,n):(i=o.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),t.dispatchEvent(i)}function ud(t,r){return function(){return Or(this,t,r)}}function dd(t,r){return function(){return Or(this,t,r.apply(this,arguments))}}Js.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Yo=[null];function Ut(t,r){this._groups=t,this._parents=r}function ta(){return new Ut([[document.documentElement]],Yo)}Ut.prototype=ta.prototype={constructor:Ut,select:function Qp(t){"function"!=typeof t&&(t=Nr(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var _,v,l=r[i],u=l.length,p=o[i]=new Array(u),g=0;g<u;++g)(_=l[g])&&(v=t.call(_,_.__data__,g,l))&&("__data__"in _&&(v.__data__=_.__data__),p[g]=v);return new Ut(o,this._parents)},selectAll:function ki(t){t="function"==typeof t?function zu(t){return function(){return function Er(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):Bl(t);for(var r=this._groups,n=r.length,o=[],i=[],l=0;l<n;++l)for(var _,u=r[l],p=u.length,v=0;v<p;++v)(_=u[v])&&(o.push(t.call(_,_.__data__,v,u)),i.push(_));return new Ut(o,i)},selectChild:function Xl(t){return this.select(null==t?Ll:function wi(t){return function(){return Ys.call(this.children,t)}}("function"==typeof t?t:Ir(t)))},selectChildren:function hn(t){return this.selectAll(null==t?Yl:function Ni(t){return function(){return Ul.call(this.children,t)}}("function"==typeof t?t:Ir(t)))},filter:function Lo(t){"function"!=typeof t&&(t=Pl(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var _,l=r[i],u=l.length,p=o[i]=[],v=0;v<u;++v)(_=l[v])&&t.call(_,_.__data__,v,l)&&p.push(_);return new Ut(o,this._parents)},data:function xo(t,r){if(!arguments.length)return Array.from(this,no);var n=r?Pu:Hl,o=this._parents,i=this._groups;"function"!=typeof t&&(t=function bo(t){return function(){return t}}(t));for(var l=i.length,u=new Array(l),p=new Array(l),_=new Array(l),v=0;v<l;++v){var g=o[v],y=i[v],x=y.length,C=Ws(t.call(g,g&&g.__data__,v,o)),E=C.length,I=p[v]=new Array(E),A=u[v]=new Array(E);n(g,y,I,A,_[v]=new Array(x),C,r);for(var M,U,j=0,O=0;j<E;++j)if(M=I[j]){for(j>=O&&(O=j+1);!(U=A[O])&&++O<E;);M._next=U||null}}return(u=new Ut(u,o))._enter=p,u._exit=_,u},enter:function Bu(){return new Ut(this._enter||this._groups.map(Hs),this._parents)},exit:function Lu(){return new Ut(this._exit||this._groups.map(Hs),this._parents)},join:function qs(t,r,n){var o=this.enter(),i=this,l=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=r&&(i=r(i))&&(i=i.selection()),null==n?l.remove():n(l),o&&i?o.merge(i).order():i},merge:function Xu(t){for(var r=t.selection?t.selection():t,n=this._groups,o=r._groups,i=n.length,u=Math.min(i,o.length),p=new Array(i),_=0;_<u;++_)for(var C,v=n[_],g=o[_],y=v.length,x=p[_]=new Array(y),E=0;E<y;++E)(C=v[E]||g[E])&&(x[E]=C);for(;_<i;++_)p[_]=n[_];return new Ut(p,this._parents)},selection:function lf(){return this},order:function Ar(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var u,o=t[r],i=o.length-1,l=o[i];--i>=0;)(u=o[i])&&(l&&4^u.compareDocumentPosition(l)&&l.parentNode.insertBefore(u,l),l=u);return this},sort:function zn(t){function r(y,x){return y&&x?t(y.__data__,x.__data__):!y-!x}t||(t=Tr);for(var n=this._groups,o=n.length,i=new Array(o),l=0;l<o;++l){for(var v,u=n[l],p=u.length,_=i[l]=new Array(p),g=0;g<p;++g)(v=u[g])&&(_[g]=v);_.sort(r)}return new Ut(i,this._parents).order()},call:function Fr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Xo(){return Array.from(this)},node:function Wl(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,l=o.length;i<l;++i){var u=o[i];if(u)return u}return null},size:function Ei(){let t=0;for(const r of this)++t;return t},empty:function Uu(){return!this.node()},each:function ql(t){for(var r=this._groups,n=0,o=r.length;n<o;++n)for(var p,i=r[n],l=0,u=i.length;l<u;++l)(p=i[l])&&t.call(p,p.__data__,l,i);return this},attr:function Rt(t,r){var n=Ii(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==r?n.local?Zs:Zl:"function"==typeof r?n.local?Nt:ut:n.local?Uo:Jl)(n,r))},style:function Bt(t,r,n){return arguments.length>1?this.each((null==r?Mr:"function"==typeof r?ef:$r)(t,r,n??"")):Co(this.node(),t)},property:function vn(t,r){return arguments.length>1?this.each((null==r?Kl:"function"==typeof r?Bn:Ql)(t,r)):this.node()[t]},classed:function qu(t,r){var n=Ai(t+"");if(arguments.length<2){for(var o=Gr(this.node()),i=-1,l=n.length;++i<l;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof r?Wu:r?Yu:Hu)(n,r))},text:function Ku(t){return arguments.length?this.each(null==t?Zu:("function"==typeof t?Dr:Ju)(t)):this.node().textContent},html:function nc(t){return arguments.length?this.each(null==t?Ks:("function"==typeof t?Qu:Qs)(t)):this.node().innerHTML},raise:function td(){return this.each(ed)},lower:function od(){return this.each(nd)},append:function rd(t){var r="function"==typeof t?t:ic(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function sd(t,r){var n="function"==typeof t?t:ic(t),o=null==r?tf:"function"==typeof r?r:Nr(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function of(){return this.each(nf)},clone:function cd(t){return this.select(t?ld:ad)},datum:function ea(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function rc(t,r,n){var i,u,o=function sf(t){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");return o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),{type:r,name:n}})}(t+""),l=o.length;if(!(arguments.length<2)){for(p=r?Tn:af,i=0;i<l;++i)this.each(p(o[i],r,n));return this}var p=this.node().__on;if(p)for(var g,_=0,v=p.length;_<v;++_)for(i=0,g=p[_];i<l;++i)if((u=o[i]).type===g.type&&u.name===g.name)return g.value},dispatch:function pd(t,r){return this.each(("function"==typeof r?dd:ud)(t,r))},[Symbol.iterator]:function*sc(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var u,o=t[r],i=0,l=o.length;i<l;++i)(u=o[i])&&(yield u)}};const Ti=ta;function yn(t){return"string"==typeof t?new Ut([[document.querySelector(t)]],[document.documentElement]):new Ut([[t]],Yo)}const fd={passive:!1},Fi={capture:!0,passive:!1};function na(t){t.stopImmediatePropagation()}function Ri(t){t.preventDefault(),t.stopImmediatePropagation()}function Yt(t){var r=t.document.documentElement,n=yn(t).on("dragstart.drag",Ri,Fi);"onselectstart"in r?n.on("selectstart.drag",Ri,Fi):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Pt(t,r){var n=t.document.documentElement,o=yn(t).on("dragstart.drag",null);r&&(o.on("click.drag",Ri,Fi),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ac(t){return((t=Math.exp(t))+1/t)/2}const gd=function t(r,n,o){function i(l,u){var A,N,p=l[0],_=l[1],v=l[2],x=u[2],C=u[0]-p,E=u[1]-_,I=C*C+E*E;if(I<1e-12)N=Math.log(x/v)/r,A=function(X){return[p+X*C,_+X*E,v*Math.exp(r*X*N)]};else{var j=Math.sqrt(I),O=(x*x-v*v+o*I)/(2*v*n*j),M=(x*x-v*v-o*I)/(2*x*n*j),U=Math.log(Math.sqrt(O*O+1)-O),Y=Math.log(Math.sqrt(M*M+1)-M);N=(Y-U)/r,A=function(X){var ee=X*N,H=ac(U),pe=v/(n*j)*(H*function hd(t){return((t=Math.exp(2*t))-1)/(t+1)}(r*ee+U)-function _d(t){return((t=Math.exp(t))-1/t)/2}(U));return[p+pe*C,_+pe*E,v*H/ac(r*ee+U)]}}return A.duration=1e3*N*r/Math.SQRT2,A}return i.rho=function(l){var u=Math.max(.001,+l),p=u*u;return t(u,p,p*p)},i}(Math.SQRT2,2,4);function Fn(t,r){if(t=function lc(t){let r;for(;r=t.sourceEvent;)t=r;return t}(t),void 0===r&&(r=t.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(r.getScreenCTM().inverse())).x,o.y]}if(r.getBoundingClientRect){var i=r.getBoundingClientRect();return[t.clientX-i.left-r.clientLeft,t.clientY-i.top-r.clientTop]}}return[t.pageX,t.pageY]}var $i,Gi,So=0,ji=0,Mi=0,oa=1e3,Di=0,Pn=0,ia=0,Oi="object"==typeof performance&&performance.now?performance:Date,ra="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function sa(){return Pn||(ra(aa),Pn=Oi.now()+ia)}function aa(){Pn=0}function bn(){this._call=this._time=this._next=null}function vd(t,r,n){var o=new bn;return o.restart(t,r,n),o}function la(){Pn=(Di=Oi.now())+ia,So=ji=0;try{!function yd(){sa(),++So;for(var r,t=$i;t;)(r=Pn-t._time)>=0&&t._call.call(void 0,r),t=t._next;--So}()}finally{So=0,function xd(){for(var t,n,r=$i,o=1/0;r;)r._call?(o>r._time&&(o=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:$i=n);Gi=t,Ho(o)}(),Pn=0}}function bd(){var t=Oi.now(),r=t-Di;r>oa&&(ia-=r,Di=t)}function Ho(t){So||(ji&&(ji=clearTimeout(ji)),t-Pn>24?(t<1/0&&(ji=setTimeout(la,t-Oi.now()-ia)),Mi&&(Mi=clearInterval(Mi))):(Mi||(Di=Oi.now(),Mi=setInterval(bd,oa)),So=1,ra(la)))}function Mt(t,r,n){var o=new bn;return o.restart(i=>{o.stop(),t(i+r)},r=null==r?0:+r,n),o}bn.prototype=vd.prototype={constructor:bn,restart:function(t,r,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?sa():+n)+(null==r?0:+r),!this._next&&Gi!==this&&(Gi?Gi._next=this:$i=this,Gi=this),this._call=t,this._time=n,Ho()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ho())}};var cf=Xs("start","end","cancel","interrupt"),uf=[],Vr=0,me=3;function ca(t,r,n,o,i,l){var u=t.__transition;if(u){if(n in u)return}else t.__transition={};!function Cd(t,r,n){var i,o=t.__transition;function u(v){var g,y,x,C;if(1!==n.state)return _();for(g in o)if((C=o[g]).name===n.name){if(C.state===me)return Mt(u);4===C.state?(C.state=6,C.timer.stop(),C.on.call("interrupt",t,t.__data__,C.index,C.group),delete o[g]):+g<r&&(C.state=6,C.timer.stop(),C.on.call("cancel",t,t.__data__,C.index,C.group),delete o[g])}if(Mt(function(){n.state===me&&(n.state=4,n.timer.restart(p,n.delay,n.time),p(v))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=me,i=new Array(x=n.tween.length),g=0,y=-1;g<x;++g)(C=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(i[++y]=C);i.length=y+1}}function p(v){for(var g=v<n.duration?n.ease.call(null,v/n.duration):(n.timer.restart(_),n.state=5,1),y=-1,x=i.length;++y<x;)i[y].call(t,g);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){for(var v in n.state=6,n.timer.stop(),delete o[r],o)return;delete t.__transition}o[r]=n,n.timer=vd(function l(v){n.state=1,n.timer.restart(u,n.delay,n.time),n.delay<=v&&u(v-n.delay)},0,n.time)}(t,n,{name:r,index:o,group:i,on:cf,tween:uf,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Vr})}function qo(t,r){var n=cn(t,r);if(n.state>Vr)throw new Error("too late; already scheduled");return n}function ln(t,r){var n=cn(t,r);if(n.state>me)throw new Error("too late; already running");return n}function cn(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function Pr(t,r){var o,i,u,n=t.__transition,l=!0;if(n){for(u in r=null==r?null:r+"",n)(o=n[u]).name===r?(i=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(i?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[u]):l=!1;l&&delete t.__transition}}function Ln(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Rn,ua=180/Math.PI,Et={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xn(t,r,n,o,i,l){var u,p,_;return(u=Math.sqrt(t*t+r*r))&&(t/=u,r/=u),(_=t*n+r*o)&&(n-=t*_,o-=r*_),(p=Math.sqrt(n*n+o*o))&&(n/=p,o/=p,_/=p),t*o<r*n&&(t=-t,r=-r,_=-_,u=-u),{translateX:i,translateY:l,rotate:Math.atan2(r,t)*ua,skewX:Math.atan(_)*ua,scaleX:u,scaleY:p}}function Cn(t,r,n,o){function i(v){return v.length?v.pop()+" ":""}return function(v,g){var y=[],x=[];return v=t(v),g=t(g),function l(v,g,y,x,C,E){if(v!==y||g!==x){var I=C.push("translate(",null,r,null,n);E.push({i:I-4,x:Ln(v,y)},{i:I-2,x:Ln(g,x)})}else(y||x)&&C.push("translate("+y+r+x+n)}(v.translateX,v.translateY,g.translateX,g.translateY,y,x),function u(v,g,y,x){v!==g?(v-g>180?g+=360:g-v>180&&(v+=360),x.push({i:y.push(i(y)+"rotate(",null,o)-2,x:Ln(v,g)})):g&&y.push(i(y)+"rotate("+g+o)}(v.rotate,g.rotate,y,x),function p(v,g,y,x){v!==g?x.push({i:y.push(i(y)+"skewX(",null,o)-2,x:Ln(v,g)}):g&&y.push(i(y)+"skewX("+g+o)}(v.skewX,g.skewX,y,x),function _(v,g,y,x,C,E){if(v!==y||g!==x){var I=C.push(i(C)+"scale(",null,",",null,")");E.push({i:I-4,x:Ln(v,y)},{i:I-2,x:Ln(g,x)})}else(1!==y||1!==x)&&C.push(i(C)+"scale("+y+","+x+")")}(v.scaleX,v.scaleY,g.scaleX,g.scaleY,y,x),v=g=null,function(C){for(var A,E=-1,I=x.length;++E<I;)y[(A=x[E]).i]=A.x(C);return y.join("")}}}var Nd=Cn(function kd(t){const r=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?Et:xn(r.a,r.b,r.c,r.d,r.e,r.f)},"px, ","px)","deg)"),Xn=Cn(function wd(t){return null!=t&&(Rn||(Rn=document.createElementNS("http://www.w3.org/2000/svg","g")),Rn.setAttribute("transform",t),t=Rn.transform.baseVal.consolidate())?xn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Et},", ",")",")");function df(t,r){var n,o;return function(){var i=ln(this,t),l=i.tween;if(l!==n)for(var u=0,p=(o=n=l).length;u<p;++u)if(o[u].name===r){(o=o.slice()).splice(u,1);break}i.tween=o}}function Ed(t,r,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var l=ln(this,t),u=l.tween;if(u!==o){i=(o=u).slice();for(var p={name:r,value:n},_=0,v=i.length;_<v;++_)if(i[_].name===r){i[_]=p;break}_===v&&i.push(p)}l.tween=i}}function da(t,r,n){var o=t._id;return t.each(function(){var i=ln(this,o);(i.value||(i.value={}))[r]=n.apply(this,arguments)}),function(i){return cn(i,o).value[r]}}function pa(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function Ad(t,r){var n=Object.create(t.prototype);for(var o in r)n[o]=r[o];return n}function ko(){}var Ht=1/.7,Ge="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gt=/^#([0-9a-f]{3,8})$/,un=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),Vi=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),It=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${ht}\\)$`),Lr=new RegExp(`^rgba\\(${We},${We},${We},${ht}\\)$`),Jo=new RegExp(`^hsl\\(${ht},${We},${We}\\)$`),fa=new RegExp(`^hsla\\(${ht},${We},${We},${ht}\\)$`),ma={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function zi(){return this.rgb().formatHex()}function Ko(){return this.rgb().formatRgb()}function dn(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=Gt.exec(t))?(n=r[1].length,r=parseInt(r[1],16),6===n?Xr(r):3===n?new vt(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===n?Bi(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===n?Bi(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=un.exec(t))?new vt(r[1],r[2],r[3],1):(r=Vi.exec(t))?new vt(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=It.exec(t))?Bi(r[1],r[2],r[3],r[4]):(r=Lr.exec(t))?Bi(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Jo.exec(t))?oo(r[1],r[2]/100,r[3]/100,1):(r=fa.exec(t))?oo(r[1],r[2]/100,r[3]/100,r[4]):ma.hasOwnProperty(t)?Xr(ma[t]):"transparent"===t?new vt(NaN,NaN,NaN,0):null}function Xr(t){return new vt(t>>16&255,t>>8&255,255&t,1)}function Bi(t,r,n,o){return o<=0&&(t=r=n=NaN),new vt(t,r,n,o)}function Qo(t,r,n,o){return 1===arguments.length?function wo(t){return t instanceof ko||(t=dn(t)),t?new vt((t=t.rgb()).r,t.g,t.b,t.opacity):new vt}(t):new vt(t,r,n,o??1)}function vt(t,r,n,o){this.r=+t,this.g=+r,this.b=+n,this.opacity=+o}function Ur(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}`}function _a(){const t=ei(this.opacity);return`${1===t?"rgb(":"rgba("}${Un(this.r)}, ${Un(this.g)}, ${Un(this.b)}${1===t?")":`, ${t})`}`}function ei(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Un(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yt(t){return((t=Un(t))<16?"0":"")+t.toString(16)}function oo(t,r,n,o){return o<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new kn(t,r,n,o)}function Sn(t){if(t instanceof kn)return new kn(t.h,t.s,t.l,t.opacity);if(t instanceof ko||(t=dn(t)),!t)return new kn;if(t instanceof kn)return t;var r=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,i=Math.min(r,n,o),l=Math.max(r,n,o),u=NaN,p=l-i,_=(l+i)/2;return p?(u=r===l?(n-o)/p+6*(n<o):n===l?(o-r)/p+2:(r-n)/p+4,p/=_<.5?l+i:2-l-i,u*=60):p=_>0&&_<1?0:u,new kn(u,p,_,t.opacity)}function kn(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}function ha(t){return(t=(t||0)%360)<0?t+360:t}function Pi(t){return Math.max(0,Math.min(1,t||0))}function dc(t,r,n){return 255*(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)}function io(t,r,n,o,i){var l=t*t,u=l*t;return((1-3*t+3*l-u)*r+(4-6*l+3*u)*n+(1+3*t+3*l-3*u)*o+u*i)/6}pa(ko,dn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zi,formatHex:zi,formatHex8:function nn(){return this.rgb().formatHex8()},formatHsl:function uc(){return Sn(this).formatHsl()},formatRgb:Ko,toString:Ko}),pa(vt,Qo,Ad(ko,{brighter(t){return t=null==t?Ht:Math.pow(Ht,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vt(Un(this.r),Un(this.g),Un(this.b),ei(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ur,formatHex:Ur,formatHex8:function Yr(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}${yt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:_a,toString:_a})),pa(kn,function on(t,r,n,o){return 1===arguments.length?Sn(t):new kn(t,r,n,o??1)},Ad(ko,{brighter(t){return t=null==t?Ht:Math.pow(Ht,t),new kn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new kn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*r,i=2*n-o;return new vt(dc(t>=240?t-240:t+120,i,o),dc(t,i,o),dc(t<120?t+240:t-120,i,o),this.opacity)},clamp(){return new kn(ha(this.h),Pi(this.s),Pi(this.l),ei(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ei(this.opacity);return`${1===t?"hsl(":"hsla("}${ha(this.h)}, ${100*Pi(this.s)}%, ${100*Pi(this.l)}%${1===t?")":`, ${t})`}`}}));const No=t=>()=>t;function va(t,r){var n=r-t;return n?function ga(t,r){return function(n){return t+n*r}}(t,n):No(isNaN(t)?r:t)}const Hr=function t(r){var n=function Fd(t){return 1==(t=+t)?va:function(r,n){return n-r?function ti(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}(r,n,t):No(isNaN(r)?n:r)}}(r);function o(i,l){var u=n((i=Qo(i)).r,(l=Qo(l)).r),p=n(i.g,l.g),_=n(i.b,l.b),v=va(i.opacity,l.opacity);return function(g){return i.r=u(g),i.g=p(g),i.b=_(g),i.opacity=v(g),i+""}}return o.gamma=t,o}(1);function Rd(t){return function(r){var u,p,n=r.length,o=new Array(n),i=new Array(n),l=new Array(n);for(u=0;u<n;++u)p=Qo(r[u]),o[u]=p.r||0,i[u]=p.g||0,l[u]=p.b||0;return o=t(o),i=t(i),l=t(l),p.opacity=1,function(_){return p.r=o(_),p.g=i(_),p.b=l(_),p+""}}}Rd(function Td(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],l=t[o+1];return io((n-o/r)*r,o>0?t[o-1]:2*i-l,i,l,o<r-1?t[o+2]:2*l-i)}}),Rd(function pc(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r);return io((n-o/r)*r,t[(o+r-1)%r],t[o%r],t[(o+1)%r],t[(o+2)%r])}});var ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ro=new RegExp(ya.source,"g");function jd(t,r){var o,i,l,n=ya.lastIndex=ro.lastIndex=0,u=-1,p=[],_=[];for(t+="",r+="";(o=ya.exec(t))&&(i=ro.exec(r));)(l=i.index)>n&&(l=r.slice(n,l),p[u]?p[u]+=l:p[++u]=l),(o=o[0])===(i=i[0])?p[u]?p[u]+=i:p[++u]=i:(p[++u]=null,_.push({i:u,x:Ln(o,i)})),n=ro.lastIndex;return n<r.length&&(l=r.slice(n),p[u]?p[u]+=l:p[++u]=l),p.length<2?_[0]?function Li(t){return function(r){return t(r)+""}}(_[0].x):function mf(t){return function(){return t}}(r):(r=_.length,function(v){for(var y,g=0;g<r;++g)p[(y=_[g]).i]=y.x(v);return p.join("")})}function dt(t,r){var n;return("number"==typeof r?Ln:r instanceof dn?Hr:(n=dn(r))?(r=n,Hr):jd)(t,r)}function _f(t){return function(){this.removeAttribute(t)}}function Md(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hf(t,r,n){var o,l,i=n+"";return function(){var u=this.getAttribute(t);return u===i?null:u===o?l:l=r(o=u,n)}}function gf(t,r,n){var o,l,i=n+"";return function(){var u=this.getAttributeNS(t.space,t.local);return u===i?null:u===o?l:l=r(o=u,n)}}function $d(t,r,n){var o,i,l;return function(){var u,_,p=n(this);return null==p?void this.removeAttribute(t):(u=this.getAttribute(t))===(_=p+"")?null:u===o&&_===i?l:(i=_,l=r(o=u,p))}}function Gd(t,r,n){var o,i,l;return function(){var u,_,p=n(this);return null==p?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local))===(_=p+"")?null:u===o&&_===i?l:(i=_,l=r(o=u,p))}}function yf(t,r){var n,o;function i(){var l=r.apply(this,arguments);return l!==o&&(n=(o=l)&&function fc(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}(t,l)),n}return i._value=r,i}function Eo(t,r){var n,o;function i(){var l=r.apply(this,arguments);return l!==o&&(n=(o=l)&&function wn(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}(t,l)),n}return i._value=r,i}function ni(t,r){return function(){qo(this,t).delay=+r.apply(this,arguments)}}function xa(t,r){return r=+r,function(){qo(this,t).delay=r}}function _c(t,r){return function(){ln(this,t).duration=+r.apply(this,arguments)}}function bf(t,r){return r=+r,function(){ln(this,t).duration=r}}var Bd=Ti.prototype.constructor;function Pd(t){return function(){this.style.removeProperty(t)}}var q=0;function ce(t,r,n,o){this._groups=t,this._parents=r,this._name=n,this._id=o}function ge(){return++q}var qe=Ti.prototype;ce.prototype=function he(t){return Ti().transition(t)}.prototype={constructor:ce,select:function yc(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=Nr(t));for(var o=this._groups,i=o.length,l=new Array(i),u=0;u<i;++u)for(var g,y,p=o[u],_=p.length,v=l[u]=new Array(_),x=0;x<_;++x)(g=p[x])&&(y=t.call(g,g.__data__,x,p))&&("__data__"in g&&(y.__data__=g.__data__),v[x]=y,ca(v[x],r,n,x,v,cn(g,n)));return new ce(l,this._parents,r,n)},selectAll:function wa(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=Bl(t));for(var o=this._groups,i=o.length,l=[],u=[],p=0;p<i;++p)for(var g,_=o[p],v=_.length,y=0;y<v;++y)if(g=_[y]){for(var C,x=t.call(g,g.__data__,y,_),E=cn(g,n),I=0,A=x.length;I<A;++I)(C=x[I])&&ca(C,r,n,I,x,E);l.push(x),u.push(g)}return new ce(l,u,r,n)},selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:function Sa(t){"function"!=typeof t&&(t=Pl(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var _,l=r[i],u=l.length,p=o[i]=[],v=0;v<u;++v)(_=l[v])&&t.call(_,_.__data__,v,l)&&p.push(_);return new ce(o,this._parents,this._name,this._id)},merge:function Vd(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,o=r.length,l=Math.min(o,n.length),u=new Array(o),p=0;p<l;++p)for(var x,_=r[p],v=n[p],g=_.length,y=u[p]=new Array(g),C=0;C<g;++C)(x=_[C]||v[C])&&(y[C]=x);for(;p<o;++p)u[p]=r[p];return new ce(u,this._parents,this._name,this._id)},selection:function Sf(){return new Bd(this._groups,this._parents)},transition:function Z(){for(var t=this._name,r=this._id,n=ge(),o=this._groups,i=o.length,l=0;l<i;++l)for(var _,u=o[l],p=u.length,v=0;v<p;++v)if(_=u[v]){var g=cn(_,r);ca(_,t,n,v,u,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new ce(o,this._parents,t,n)},call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:function zd(t,r){var n=this._id;return arguments.length<2?cn(this.node(),n).on.on(t):this.each(function Cf(t,r,n){var o,i,l=function gc(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||"start"===r})}(r)?qo:ln;return function(){var u=l(this,t),p=u.on;p!==o&&(i=(o=p).copy()).on(r,n),u.on=i}}(n,t,r))},attr:function vf(t,r){var n=Ii(t),o="transform"===n?Xn:dt;return this.attrTween(t,"function"==typeof r?(n.local?Gd:$d)(n,o,da(this,"attr."+t,r)):null==r?(n.local?Md:_f)(n):(n.local?gf:hf)(n,o,r))},attrTween:function ba(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!=typeof r)throw new Error;var o=Ii(t);return this.tween(n,(o.local?yf:Eo)(o,r))},style:function s(t,r,n){var o="transform"==(t+="")?Nd:dt;return null==r?this.styleTween(t,function Na(t,r){var n,o,i;return function(){var l=Co(this,t),u=(this.style.removeProperty(t),Co(this,t));return l===u?null:l===n&&u===o?i:i=r(n=l,o=u)}}(t,o)).on("end.style."+t,Pd(t)):"function"==typeof r?this.styleTween(t,function kf(t,r,n){var o,i,l;return function(){var u=Co(this,t),p=n(this),_=p+"";return null==p&&(this.style.removeProperty(t),_=p=Co(this,t)),u===_?null:u===o&&_===i?l:(i=_,l=r(o=u,p))}}(t,o,da(this,"style."+t,r))).each(function Ea(t,r){var n,o,i,p,l="style."+r,u="end."+l;return function(){var _=ln(this,t),v=_.on,g=null==_.value[l]?p||(p=Pd(r)):void 0;(v!==n||i!==g)&&(o=(n=v).copy()).on(u,i=g),_.on=o}}(this._id,t)):this.styleTween(t,function Wr(t,r,n){var o,l,i=n+"";return function(){var u=Co(this,t);return u===i?null:u===o?l:l=r(o=u,n)}}(t,o,r),n).on("end.style."+t,null)},styleTween:function d(t,r,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==r)return this.tween(o,null);if("function"!=typeof r)throw new Error;return this.tween(o,function c(t,r,n){var o,i;function l(){var u=r.apply(this,arguments);return u!==i&&(o=(i=u)&&function a(t,r,n){return function(o){this.style.setProperty(t,r.call(this,o),n)}}(t,u,n)),o}return l._value=r,l}(t,r,n??""))},text:function b(t){return this.tween("text","function"==typeof t?function h(t){return function(){var r=t(this);this.textContent=r??""}}(da(this,"text",t)):function m(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function z(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function T(t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&function k(t){return function(r){this.textContent=t.call(this,r)}}(i)),r}return o._value=t,o}(t))},remove:function ka(){return this.on("end.remove",function vc(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}(this._id))},tween:function Id(t,r){var n=this._id;if(t+="",arguments.length<2){for(var u,o=cn(this.node(),n).tween,i=0,l=o.length;i<l;++i)if((u=o[i]).name===t)return u.value;return null}return this.each((null==r?df:Ed)(n,t,r))},delay:function mc(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?ni:xa)(r,t)):cn(this.node(),r).delay},duration:function hc(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?_c:bf)(r,t)):cn(this.node(),r).duration},ease:function Dd(t){var r=this._id;return arguments.length?this.each(function xf(t,r){if("function"!=typeof r)throw new Error;return function(){ln(this,t).ease=r}}(r,t)):cn(this.node(),r).ease},easeVarying:function Ca(t){if("function"!=typeof t)throw new Error;return this.each(function Od(t,r){return function(){var n=r.apply(this,arguments);if("function"!=typeof n)throw new Error;ln(this,t).ease=n}}(this._id,t))},end:function K(){var t,r,n=this,o=n._id,i=n.size();return new Promise(function(l,u){var p={value:u},_={value:function(){0==--i&&l()}};n.each(function(){var v=ln(this,o),g=v.on;g!==t&&((r=(t=g).copy())._.cancel.push(p),r._.interrupt.push(p),r._.end.push(_)),v.on=r}),0===i&&l()})},[Symbol.iterator]:qe[Symbol.iterator]};var ne={time:null,delay:0,duration:250,ease:function D(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ve(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}Ti.prototype.interrupt=function Sd(t){return this.each(function(){Pr(this,t)})},Ti.prototype.transition=function Se(t){var r,n;t instanceof ce?(r=t._id,t=t._name):(r=ge(),(n=ne).time=sa(),t=null==t?null:t+"");for(var o=this._groups,i=o.length,l=0;l<i;++l)for(var _,u=o[l],p=u.length,v=0;v<p;++v)(_=u[v])&&ca(_,t,r,v,u,n||ve(_,r));return new ce(o,this._parents,t,r)};const xe=t=>()=>t;function Ee(t,{sourceEvent:r,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function tt(t,r,n){this.k=t,this.x=r,this.y=n}tt.prototype={constructor:tt,scale:function(t){return 1===t?this:new tt(this.k*t,this.x,this.y)},translate:function(t,r){return 0===t&0===r?this:new tt(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var je=new tt(1,0,0);function bc(t){t.stopImmediatePropagation()}function xc(t){t.preventDefault(),t.stopImmediatePropagation()}function vh(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function yh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function hm(){return this.__zoom||je}function bh(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function xh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ch(t,r,n){var o=t.invertX(r[0][0])-n[0][0],i=t.invertX(r[1][0])-n[1][0],l=t.invertY(r[0][1])-n[0][1],u=t.invertY(r[1][1])-n[1][1];return t.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}const Ld=t=>()=>t;function wf(t,{sourceEvent:r,subject:n,target:o,identifier:i,active:l,x:u,y:p,dx:_,dy:v,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:g}})}function kh(t){return!t.ctrlKey&&!t.button}function wh(){return this.parentNode}function Nh(t,r){return r??{x:t.x,y:t.y}}function Eh(){return navigator.maxTouchPoints||"ontouchstart"in this}wf.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},le(6046);const Xd=(0,S.createContext)(null),Ah=Xd.Provider,Yn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,r)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?r.targetHandle:r.sourceHandle}", edge id: ${r.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},gm=Yn.error001();function nt(t,r){const n=(0,S.useContext)(Xd);if(null===n)throw new Error(gm);return Ls(n,t,r)}const At=()=>{const t=(0,S.useContext)(Xd);if(null===t)throw new Error(gm);return(0,S.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Th=t=>t.userSelectionActive?"none":"all";function vm({position:t,children:r,className:n,style:o,...i}){const l=nt(Th),u=`${t}`.split("-");return S.createElement("div",{className:et(["react-flow__panel",n,...u]),style:{...o,pointerEvents:l},...i},r)}function Fh({proOptions:t,position:r="bottom-right"}){return t?.hideAttribution?null:S.createElement(vm,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},S.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var jh=(0,S.memo)(({x:t,y:r,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:l={},labelBgPadding:u=[2,4],labelBgBorderRadius:p=2,children:_,className:v,...g})=>{const y=(0,S.useRef)(null),[x,C]=(0,S.useState)({x:0,y:0,width:0,height:0}),E=et(["react-flow__edge-textwrapper",v]);return(0,S.useEffect)(()=>{if(y.current){const I=y.current.getBBox();C({x:I.x,y:I.y,width:I.width,height:I.height})}},[n]),typeof n>"u"||!n?null:S.createElement("g",{transform:`translate(${t-x.width/2} ${r-x.height/2})`,className:E,visibility:x.width?"visible":"hidden",...g},i&&S.createElement("rect",{width:x.width+2*u[0],x:-u[0],y:-u[1],height:x.height+2*u[1],className:"react-flow__edge-textbg",style:l,rx:p,ry:p}),S.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:y,style:o},n),_)});const Nf=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ia=(t,r=0,n=1)=>Math.min(Math.max(t,r),n),Ef=(t={x:0,y:0},r)=>({x:Ia(t.x,r[0][0],r[1][0]),y:Ia(t.y,r[0][1],r[1][1])}),ym=(t,r,n)=>t<r?Ia(Math.abs(t-r),1,50)/50:t>n?-Ia(Math.abs(t-n),1,50)/50:0,bm=(t,r)=>[20*ym(t.x,35,r.width-35),20*ym(t.y,35,r.height-35)],xm=t=>t.getRootNode?.()||window?.document,Cc=({x:t,y:r,width:n,height:o})=>({x:t,y:r,x2:t+n,y2:r+o}),km=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),If=(t,r)=>{const n=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),o=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(n*o)},Hn=t=>!isNaN(t)&&isFinite(t),bt=Symbol.for("internals"),wm=["Enter"," ","Escape"];function Af(t){const n=((t=>"nativeEvent"in t)(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Nm=t=>"clientX"in t,Xi=(t,r)=>{const n=Nm(t),o=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:o-(r?.left??0),y:i-(r?.top??0)}},Yd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Sc=({id:t,path:r,labelX:n,labelY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C=20})=>S.createElement(S.Fragment,null,S.createElement("path",{id:t,style:g,d:r,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:x}),C&&S.createElement("path",{d:r,fill:"none",strokeOpacity:0,strokeWidth:C,className:"react-flow__edge-interaction"}),i&&Hn(n)&&Hn(o)?S.createElement(jh,{x:n,y:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v}):null);function kc(t,r,n){return void 0===n?n:o=>{const i=r().edges.find(l=>l.id===t);i&&n(o,{...i})}}function Em({sourceX:t,sourceY:r,targetX:n,targetY:o}){const i=Math.abs(n-t)/2,l=n<t?n+i:n-i,u=Math.abs(o-r)/2;return[l,o<r?o+u:o-u,i,u]}function Im({sourceX:t,sourceY:r,targetX:n,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:u,targetControlY:p}){const _=.125*t+.375*i+.375*u+.125*n,v=.125*r+.375*l+.375*p+.125*o;return[_,v,Math.abs(_-t),Math.abs(v-r)]}Sc.displayName="BaseEdge";var qr=function(t){return t.Strict="strict",t.Loose="loose",t}(qr||{}),Aa=function(t){return t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal",t}(Aa||{}),Hd=function(t){return t.Partial="partial",t.Full="full",t}(Hd||{}),Zr=function(t){return t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier",t}(Zr||{}),Tf=function(t){return t.Arrow="arrow",t.ArrowClosed="arrowclosed",t}(Tf||{}),Ce=function(t){return t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom",t}(Ce||{});function Am({pos:t,x1:r,y1:n,x2:o,y2:i}){return t===Ce.Left||t===Ce.Right?[.5*(r+o),n]:[r,.5*(n+i)]}function Tm({sourceX:t,sourceY:r,sourcePosition:n=Ce.Bottom,targetX:o,targetY:i,targetPosition:l=Ce.Top}){const[u,p]=Am({pos:n,x1:t,y1:r,x2:o,y2:i}),[_,v]=Am({pos:l,x1:o,y1:i,x2:t,y2:r}),[g,y,x,C]=Im({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:u,sourceControlY:p,targetControlX:_,targetControlY:v});return[`M${t},${r} C${u},${p} ${_},${v} ${o},${i}`,g,y,x,C]}const Ff=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,sourcePosition:i=Ce.Bottom,targetPosition:l=Ce.Top,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:E,interactionWidth:I})=>{const[A,N,j]=Tm({sourceX:t,sourceY:r,sourcePosition:i,targetX:n,targetY:o,targetPosition:l});return S.createElement(Sc,{path:A,labelX:N,labelY:j,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:E,interactionWidth:I})});Ff.displayName="SimpleBezierEdge";const Fm={[Ce.Left]:{x:-1,y:0},[Ce.Right]:{x:1,y:0},[Ce.Top]:{x:0,y:-1},[Ce.Bottom]:{x:0,y:1}},Rm=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function Rf({sourceX:t,sourceY:r,sourcePosition:n=Ce.Bottom,targetX:o,targetY:i,targetPosition:l=Ce.Top,borderRadius:u=5,centerX:p,centerY:_,offset:v=20}){const[g,y,x,C,E]=function Dh({source:t,sourcePosition:r=Ce.Bottom,target:n,targetPosition:o=Ce.Top,center:i,offset:l}){const u=Fm[r],p=Fm[o],_={x:t.x+u.x*l,y:t.y+u.y*l},v={x:n.x+p.x*l,y:n.y+p.y*l},g=(({source:t,sourcePosition:r=Ce.Bottom,target:n})=>r===Ce.Left||r===Ce.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:_,sourcePosition:r,target:v}),y=0!==g.x?"x":"y",x=g[y];let E,I,C=[];const A={x:0,y:0},N={x:0,y:0},[j,O,M,U]=Em({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*p[y]==-1){E=i.x??j,I=i.y??O;const X=[{x:E,y:_.y},{x:E,y:v.y}],ee=[{x:_.x,y:I},{x:v.x,y:I}];C=u[y]===x?"x"===y?X:ee:"x"===y?ee:X}else{const X=[{x:_.x,y:v.y}],ee=[{x:v.x,y:_.y}];if(C="x"===y?u.x===x?ee:X:u.y===x?X:ee,r===o){const ue=Math.abs(t[y]-n[y]);if(ue<=l){const w=Math.min(l-1,l-ue);u[y]===x?A[y]=(_[y]>t[y]?-1:1)*w:N[y]=(v[y]>n[y]?-1:1)*w}}if(r!==o){const ue="x"===y?"y":"x",w=u[y]===p[ue],L=_[ue]>v[ue],B=_[ue]<v[ue];(1===u[y]&&(!w&&L||w&&B)||1!==u[y]&&(!w&&B||w&&L))&&(C="x"===y?X:ee)}const H={x:_.x+A.x,y:_.y+A.y},pe={x:v.x+N.x,y:v.y+N.y};Math.max(Math.abs(H.x-C[0].x),Math.abs(pe.x-C[0].x))>=Math.max(Math.abs(H.y-C[0].y),Math.abs(pe.y-C[0].y))?(E=(H.x+pe.x)/2,I=C[0].y):(E=C[0].x,I=(H.y+pe.y)/2)}return[[t,{x:_.x+A.x,y:_.y+A.y},...C,{x:v.x+N.x,y:v.y+N.y},n],E,I,M,U]}({source:{x:t,y:r},sourcePosition:n,target:{x:o,y:i},targetPosition:l,center:{x:p,y:_},offset:v});return[g.reduce((A,N,j)=>{let O="";return O=j>0&&j<g.length-1?function Oh(t,r,n,o){const i=Math.min(Rm(t,r)/2,Rm(r,n)/2,o),{x:l,y:u}=r;return t.x===l&&l===n.x||t.y===u&&u===n.y?`L${l} ${u}`:t.y===u?`L ${l+i*(t.x<n.x?-1:1)},${u}Q ${l},${u} ${l},${u+i*(t.y<n.y?1:-1)}`:`L ${l},${u+i*(t.y<n.y?-1:1)}Q ${l},${u} ${l+i*(t.x<n.x?1:-1)},${u}`}(g[j-1],N,g[j+1],u):`${0===j?"M":"L"}${N.x} ${N.y}`,A+O},""),y,x,C,E]}const Wd=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,sourcePosition:y=Ce.Bottom,targetPosition:x=Ce.Top,markerEnd:C,markerStart:E,pathOptions:I,interactionWidth:A})=>{const[N,j,O]=Rf({sourceX:t,sourceY:r,sourcePosition:y,targetX:n,targetY:o,targetPosition:x,borderRadius:I?.borderRadius,offset:I?.offset});return S.createElement(Sc,{path:N,labelX:j,labelY:O,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:C,markerStart:E,interactionWidth:A})});Wd.displayName="SmoothStepEdge";const jf=(0,S.memo)(t=>S.createElement(Wd,{...t,pathOptions:(0,S.useMemo)(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));jf.displayName="StepEdge";const Mf=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C})=>{const[E,I,A]=function Vh({sourceX:t,sourceY:r,targetX:n,targetY:o}){const[i,l,u,p]=Em({sourceX:t,sourceY:r,targetX:n,targetY:o});return[`M ${t},${r}L ${n},${o}`,i,l,u,p]}({sourceX:t,sourceY:r,targetX:n,targetY:o});return S.createElement(Sc,{path:E,labelX:I,labelY:A,label:i,labelStyle:l,labelShowBg:u,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:v,style:g,markerEnd:y,markerStart:x,interactionWidth:C})});function qd(t,r){return t>=0?.5*t:25*r*Math.sqrt(-t)}function jm({pos:t,x1:r,y1:n,x2:o,y2:i,c:l}){switch(t){case Ce.Left:return[r-qd(r-o,l),n];case Ce.Right:return[r+qd(o-r,l),n];case Ce.Top:return[r,n-qd(n-i,l)];case Ce.Bottom:return[r,n+qd(i-n,l)]}}function Mm({sourceX:t,sourceY:r,sourcePosition:n=Ce.Bottom,targetX:o,targetY:i,targetPosition:l=Ce.Top,curvature:u=.25}){const[p,_]=jm({pos:n,x1:t,y1:r,x2:o,y2:i,c:u}),[v,g]=jm({pos:l,x1:o,y1:i,x2:t,y2:r,c:u}),[y,x,C,E]=Im({sourceX:t,sourceY:r,targetX:o,targetY:i,sourceControlX:p,sourceControlY:_,targetControlX:v,targetControlY:g});return[`M${t},${r} C${p},${_} ${v},${g} ${o},${i}`,y,x,C,E]}Mf.displayName="StraightEdge";const Zd=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:o,sourcePosition:i=Ce.Bottom,targetPosition:l=Ce.Top,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:E,pathOptions:I,interactionWidth:A})=>{const[N,j,O]=Mm({sourceX:t,sourceY:r,sourcePosition:i,targetX:n,targetY:o,targetPosition:l,curvature:I?.curvature});return S.createElement(Sc,{path:N,labelX:j,labelY:O,label:u,labelStyle:p,labelShowBg:_,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:E,interactionWidth:A})});Zd.displayName="BezierEdge";const $f=(0,S.createContext)(null),zh=$f.Provider,Gm=({source:t,sourceHandle:r,target:n,targetHandle:o})=>`reactflow__edge-${t}${r||""}-${n}${o||""}`,Gf=(t,r)=>typeof t>"u"?"":"string"==typeof t?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`,Dm=(t,r)=>{if(!t.source||!t.target)return Yn.error006(),r;let n;return n=(t=>"id"in t&&"source"in t&&"target"in t)(t)?{...t}:{...t,id:Gm(t)},((t,r)=>r.some(n=>!(n.source!==t.source||n.target!==t.target||n.sourceHandle!==t.sourceHandle&&(n.sourceHandle||t.sourceHandle)||n.targetHandle!==t.targetHandle&&(n.targetHandle||t.targetHandle))))(n,r)?r:r.concat(n)},Df=({x:t,y:r},[n,o,i],l,[u,p])=>{const _={x:(t-n)/i,y:(r-o)/i};return l?{x:u*Math.round(_.x/u),y:p*Math.round(_.y/p)}:_},Om=({x:t,y:r},[n,o,i])=>({x:t*i+n,y:r*i+o}),Ta=(t,r=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*r[0],o=(t.height??0)*r[1],i={x:t.position.x-n,y:t.position.y-o};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:i}},Jd=(t,r=[0,0])=>{if(0===t.length)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,i)=>{const{x:l,y:u}=Ta(i,r).positionAbsolute;return((t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}))(o,Cc({x:l,y:u,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:t,y:r,x2:n,y2:o})=>({x:t,y:r,width:n-t,height:o-r}))(n)},Vm=(t,r,[n,o,i]=[0,0,1],l=!1,u=!1,p=[0,0])=>{const _={x:(r.x-n)/i,y:(r.y-o)/i,width:r.width/i,height:r.height/i},v=[];return t.forEach(g=>{const{width:y,height:x,selectable:C=!0,hidden:E=!1}=g;if(u&&!C||E)return!1;const{positionAbsolute:I}=Ta(g,p),N=If(_,{x:I.x,y:I.y,width:y||0,height:x||0});(typeof y>"u"||typeof x>"u"||null===y||null===x||l&&N>0||N>=(y||0)*(x||0)||g.dragging)&&v.push(g)}),v},zm=(t,r)=>{const n=t.map(o=>o.id);return r.filter(o=>n.includes(o.source)||n.includes(o.target))},Of=(t,r,n,o,i,l=.1)=>{const _=Math.min(r/(t.width*(1+l)),n/(t.height*(1+l))),v=Ia(_,o,i);return{x:r/2-(t.x+t.width/2)*v,y:n/2-(t.y+t.height/2)*v,zoom:v}},Jr=(t,r=0)=>t.transition().duration(r);function Bm(t,r,n,o){return(r[n]||[]).reduce((i,l)=>(`${t.id}-${l.id}-${n}`!==o&&i.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),i),[])}const Yh={source:null,target:null,sourceHandle:null,targetHandle:null},Pm=()=>({handleDomNode:null,isValid:!1,connection:Yh,endHandle:null});function Lm(t,r,n,o,i,l,u){const p="target"===i,_=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),v={...Pm(),handleDomNode:_};if(_){const g=Vf(void 0,_),y=_.getAttribute("data-nodeid"),x=_.getAttribute("data-handleid"),C=_.classList.contains("connectable"),E=_.classList.contains("connectableend"),I={source:p?y:n,sourceHandle:p?x:o,target:p?n:y,targetHandle:p?o:x};v.connection=I,C&&E&&(r===qr.Strict?p&&"source"===g||!p&&"target"===g:y!==n||x!==o)&&(v.endHandle={nodeId:y,handleId:x,type:g},v.isValid=l(I))}return v}function Vf(t,r){return t||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function zf(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Wh(t,r){let n=null;return r?n="valid":t&&!r&&(n="invalid"),n}function Xm({event:t,handleId:r,nodeId:n,onConnect:o,isTarget:i,getState:l,setState:u,isValidConnection:p,edgeUpdaterType:_,onReconnectEnd:v}){const g=xm(t.target),{connectionMode:y,domNode:x,autoPanOnConnect:C,connectionRadius:E,onConnectStart:I,panBy:A,getNodes:N,cancelConnection:j}=l();let M,O=0;const{x:U,y:Y}=Xi(t),X=g?.elementFromPoint(U,Y),ee=Vf(_,X),H=x?.getBoundingClientRect();if(!H||!ee)return;let pe,ie=Xi(t,H),fe=!1,ue=null,w=!1,L=null;const B=function Hh({nodes:t,nodeId:r,handleId:n,handleType:o}){return t.reduce((i,l)=>{if(l[bt]){const{handleBounds:u}=l[bt];let p=[],_=[];u&&(p=Bm(l,u,"source",`${r}-${n}-${o}`),_=Bm(l,u,"target",`${r}-${n}-${o}`)),i.push(...p,..._)}return i},[])}({nodes:N(),nodeId:n,handleId:r,handleType:ee}),J=()=>{if(!C)return;const[Q,re]=bm(ie,H);A({x:Q,y:re}),O=requestAnimationFrame(J)};function ae(Q){const{transform:re}=l();ie=Xi(Q,H);const{handle:de,validHandleResult:be}=function Uh(t,r,n,o,i,l){const{x:u,y:p}=Xi(t),v=r.elementsFromPoint(u,p).find(E=>E.classList.contains("react-flow__handle"));if(v){const E=v.getAttribute("data-nodeid");if(E){const I=Vf(void 0,v),A=v.getAttribute("data-handleid"),N=l({nodeId:E,id:A,type:I});if(N){const j=i.find(O=>O.nodeId===E&&O.type===I&&O.id===A);return{handle:{id:A,type:I,nodeId:E,x:j?.x||n.x,y:j?.y||n.y},validHandleResult:N}}}}let g=[],y=1/0;if(i.forEach(E=>{const I=Math.sqrt((E.x-n.x)**2+(E.y-n.y)**2);if(I<=o){const A=l(E);I<=y&&(I<y?g=[{handle:E,validHandleResult:A}]:I===y&&g.push({handle:E,validHandleResult:A}),y=I)}}),!g.length)return{handle:null,validHandleResult:Pm()};if(1===g.length)return g[0];const x=g.some(({validHandleResult:E})=>E.isValid),C=g.some(({handle:E})=>"target"===E.type);return g.find(({handle:E,validHandleResult:I})=>C?"target"===E.type:!x||I.isValid)||g[0]}(Q,g,Df(ie,re,!1,[1,1]),E,B,ye=>Lm(ye,y,n,r,i?"target":"source",p,g));if(M=de,fe||(J(),fe=!0),L=be.handleDomNode,ue=be.connection,w=be.isValid,u({connectionPosition:M&&w?Om({x:M.x,y:M.y},re):ie,connectionStatus:Wh(!!M,w),connectionEndHandle:be.endHandle}),!M&&!w&&!L)return zf(pe);ue.source!==ue.target&&L&&(zf(pe),pe=L,L.classList.add("connecting","react-flow__handle-connecting"),L.classList.toggle("valid",w),L.classList.toggle("react-flow__handle-valid",w))}function P(Q){(M||L)&&ue&&w&&o?.(ue),l().onConnectEnd?.(Q),_&&v?.(Q),zf(pe),j(),cancelAnimationFrame(O),fe=!1,w=!1,ue=null,L=null,g.removeEventListener("mousemove",ae),g.removeEventListener("mouseup",P),g.removeEventListener("touchmove",ae),g.removeEventListener("touchend",P)}u({connectionPosition:ie,connectionStatus:null,connectionNodeId:n,connectionHandleId:r,connectionHandleType:ee,connectionStartHandle:{nodeId:n,handleId:r,type:ee},connectionEndHandle:null}),I?.(t,{nodeId:n,handleId:r,handleType:ee}),g.addEventListener("mousemove",ae),g.addEventListener("mouseup",P),g.addEventListener("touchmove",ae),g.addEventListener("touchend",P)}const Um=()=>!0,qh=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Ym=(0,S.forwardRef)(({type:t="source",position:r=Ce.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:i=!0,isConnectableEnd:l=!0,id:u,onConnect:p,children:_,className:v,onMouseDown:g,onTouchStart:y,...x},C)=>{const E=u||null,I="target"===t,A=At(),N=(0,S.useContext)($f),{connectOnClick:j,noPanClassName:O}=nt(qh,Re),{connecting:M,clickConnecting:U}=nt(((t,r,n)=>o=>{const{connectionStartHandle:i,connectionEndHandle:l,connectionClickStartHandle:u}=o;return{connecting:i?.nodeId===t&&i?.handleId===r&&i?.type===n||l?.nodeId===t&&l?.handleId===r&&l?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===r&&u?.type===n}})(N,E,t),Re);N||A.getState().onError?.("010",Yn.error010());const Y=H=>{const{defaultEdgeOptions:pe,onConnect:ie,hasDefaultEdges:fe}=A.getState(),ue={...pe,...H};if(fe){const{edges:w,setEdges:L}=A.getState();L(Dm(ue,w))}ie?.(ue),p?.(ue)},X=H=>{if(!N)return;const pe=Nm(H);i&&(pe&&0===H.button||!pe)&&Xm({event:H,handleId:E,nodeId:N,onConnect:Y,isTarget:I,getState:A.getState,setState:A.setState,isValidConnection:n||A.getState().isValidConnection||Um}),pe?g?.(H):y?.(H)};return S.createElement("div",{"data-handleid":E,"data-nodeid":N,"data-handlepos":r,"data-id":`${N}-${E}-${t}`,className:et(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",O,v,{source:!I,target:I,connectable:o,connectablestart:i,connectableend:l,connecting:U,connectionindicator:o&&(i&&!M||l&&M)}]),onMouseDown:X,onTouchStart:X,onClick:j?H=>{const{onClickConnectStart:pe,onClickConnectEnd:ie,connectionClickStartHandle:fe,connectionMode:ue,isValidConnection:w}=A.getState();if(!N||!fe&&!i)return;if(!fe)return pe?.(H,{nodeId:N,handleId:E,handleType:t}),void A.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:E}});const L=xm(H.target),B=n||w||Um,{connection:J,isValid:ae}=Lm({nodeId:N,id:E,type:t},ue,fe.nodeId,fe.handleId||null,fe.type,B,L);ae&&Y(J),ie?.(H),A.setState({connectionClickStartHandle:null})}:void 0,ref:C,...x},_)});Ym.displayName="Handle";var Fa=(0,S.memo)(Ym);const Hm=({data:t,isConnectable:r,targetPosition:n=Ce.Top,sourcePosition:o=Ce.Bottom})=>S.createElement(S.Fragment,null,S.createElement(Fa,{type:"target",position:n,isConnectable:r}),t?.label,S.createElement(Fa,{type:"source",position:o,isConnectable:r}));Hm.displayName="DefaultNode";var Bf=(0,S.memo)(Hm);const Wm=({data:t,isConnectable:r,sourcePosition:n=Ce.Bottom})=>S.createElement(S.Fragment,null,t?.label,S.createElement(Fa,{type:"source",position:n,isConnectable:r}));Wm.displayName="InputNode";var qm=(0,S.memo)(Wm);const Zm=({data:t,isConnectable:r,targetPosition:n=Ce.Top})=>S.createElement(S.Fragment,null,S.createElement(Fa,{type:"target",position:n,isConnectable:r}),t?.label);Zm.displayName="OutputNode";var Jm=(0,S.memo)(Zm);const Pf=()=>null;Pf.displayName="GroupNode";const Jh=t=>({selectedNodes:t.getNodes().filter(r=>r.selected),selectedEdges:t.edges.filter(r=>r.selected).map(r=>({...r}))}),Kd=t=>t.id;function Kh(t,r){return Re(t.selectedNodes.map(Kd),r.selectedNodes.map(Kd))&&Re(t.selectedEdges.map(Kd),r.selectedEdges.map(Kd))}const Km=(0,S.memo)(({onSelectionChange:t})=>{const r=At(),{selectedNodes:n,selectedEdges:o}=nt(Jh,Kh);return(0,S.useEffect)(()=>{const i={nodes:n,edges:o};t?.(i),r.getState().onSelectionChange.forEach(l=>l(i))},[n,o,t]),null});Km.displayName="SelectionListener";const Qh=t=>!!t.onSelectionChange;function eg({onSelectionChange:t}){const r=nt(Qh);return t||r?S.createElement(Km,{onSelectionChange:t}):null}const tg=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Ra(t,r){(0,S.useEffect)(()=>{typeof t<"u"&&r(t)},[t])}function Be(t,r,n){(0,S.useEffect)(()=>{typeof r<"u"&&n({[t]:r})},[r])}const ng=({nodes:t,edges:r,defaultNodes:n,defaultEdges:o,onConnect:i,onConnectStart:l,onConnectEnd:u,onClickConnectStart:p,onClickConnectEnd:_,nodesDraggable:v,nodesConnectable:g,nodesFocusable:y,edgesFocusable:x,edgesUpdatable:C,elevateNodesOnSelect:E,minZoom:I,maxZoom:A,nodeExtent:N,onNodesChange:j,onEdgesChange:O,elementsSelectable:M,connectionMode:U,snapGrid:Y,snapToGrid:X,translateExtent:ee,connectOnClick:H,defaultEdgeOptions:pe,fitView:ie,fitViewOptions:fe,onNodesDelete:ue,onEdgesDelete:w,onNodeDrag:L,onNodeDragStart:B,onNodeDragStop:J,onSelectionDrag:ae,onSelectionDragStart:P,onSelectionDragStop:Q,noPanClassName:re,nodeOrigin:de,rfId:be,autoPanOnConnect:ye,autoPanOnNodeDrag:Me,onError:Ze,connectionRadius:Ke,isValidConnection:at,nodeDragThreshold:St})=>{const{setNodes:pt,setEdges:so,setDefaultNodesAndEdges:qn,setMinZoom:ao,setMaxZoom:Zn,setTranslateExtent:Dt,setNodeExtent:Fo,reset:ft}=nt(tg,Re),ke=At();return(0,S.useEffect)(()=>{const jn=o?.map(es=>({...es,...pe}));return qn(n,jn),()=>{ft()}},[]),Be("defaultEdgeOptions",pe,ke.setState),Be("connectionMode",U,ke.setState),Be("onConnect",i,ke.setState),Be("onConnectStart",l,ke.setState),Be("onConnectEnd",u,ke.setState),Be("onClickConnectStart",p,ke.setState),Be("onClickConnectEnd",_,ke.setState),Be("nodesDraggable",v,ke.setState),Be("nodesConnectable",g,ke.setState),Be("nodesFocusable",y,ke.setState),Be("edgesFocusable",x,ke.setState),Be("edgesUpdatable",C,ke.setState),Be("elementsSelectable",M,ke.setState),Be("elevateNodesOnSelect",E,ke.setState),Be("snapToGrid",X,ke.setState),Be("snapGrid",Y,ke.setState),Be("onNodesChange",j,ke.setState),Be("onEdgesChange",O,ke.setState),Be("connectOnClick",H,ke.setState),Be("fitViewOnInit",ie,ke.setState),Be("fitViewOnInitOptions",fe,ke.setState),Be("onNodesDelete",ue,ke.setState),Be("onEdgesDelete",w,ke.setState),Be("onNodeDrag",L,ke.setState),Be("onNodeDragStart",B,ke.setState),Be("onNodeDragStop",J,ke.setState),Be("onSelectionDrag",ae,ke.setState),Be("onSelectionDragStart",P,ke.setState),Be("onSelectionDragStop",Q,ke.setState),Be("noPanClassName",re,ke.setState),Be("nodeOrigin",de,ke.setState),Be("rfId",be,ke.setState),Be("autoPanOnConnect",ye,ke.setState),Be("autoPanOnNodeDrag",Me,ke.setState),Be("onError",Ze,ke.setState),Be("connectionRadius",Ke,ke.setState),Be("isValidConnection",at,ke.setState),Be("nodeDragThreshold",St,ke.setState),Ra(t,pt),Ra(r,so),Ra(I,ao),Ra(A,Zn),Ra(ee,Dt),Ra(N,Fo),null},Qm={display:"none"},og={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},e_="react-flow__node-desc",t_="react-flow__edge-desc",ig="react-flow__aria-live",rg=t=>t.ariaLiveMessage;function sg({rfId:t}){const r=nt(rg);return S.createElement("div",{id:`${ig}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:og},r)}function ag({rfId:t,disableKeyboardA11y:r}){return S.createElement(S.Fragment,null,S.createElement("div",{id:`${e_}-${t}`,style:Qm},"Press enter or space to select a node.",!r&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),S.createElement("div",{id:`${t_}-${t}`,style:Qm},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!r&&S.createElement(sg,{rfId:t}))}var wc=(t=null,r={actInsideInputWithModifier:!0})=>{const[n,o]=(0,S.useState)(!1),i=(0,S.useRef)(!1),l=(0,S.useRef)(new Set([])),[u,p]=(0,S.useMemo)(()=>{if(null!==t){const v=(Array.isArray(t)?t:[t]).filter(y=>"string"==typeof y).map(y=>y.split("+")),g=v.reduce((y,x)=>y.concat(...x),[]);return[v,g]}return[[],[]]},[t]);return(0,S.useEffect)(()=>{const _=typeof document<"u"?document:null,v=r?.target||_;if(null!==t){const g=C=>{if(i.current=C.ctrlKey||C.metaKey||C.shiftKey,(!i.current||i.current&&!r.actInsideInputWithModifier)&&Af(C))return!1;const I=o_(C.code,p);l.current.add(C[I]),n_(u,l.current,!1)&&(C.preventDefault(),o(!0))},y=C=>{if((!i.current||i.current&&!r.actInsideInputWithModifier)&&Af(C))return!1;const I=o_(C.code,p);n_(u,l.current,!0)?(o(!1),l.current.clear()):l.current.delete(C[I]),"Meta"===C.key&&l.current.clear(),i.current=!1},x=()=>{l.current.clear(),o(!1)};return v?.addEventListener("keydown",g),v?.addEventListener("keyup",y),window.addEventListener("blur",x),()=>{v?.removeEventListener("keydown",g),v?.removeEventListener("keyup",y),window.removeEventListener("blur",x)}}},[t,o]),n};function n_(t,r,n){return t.filter(o=>n||o.length===r.size).some(o=>o.every(i=>r.has(i)))}function o_(t,r){return r.includes(t)?"code":"key"}function i_(t,r,n,o){const i=t.parentNode||t.parentId;if(!i)return n;const l=r.get(i),u=Ta(l,o);return i_(l,r,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(l[bt]?.z??0)>(n.z??0)?l[bt]?.z??0:n.z??0},o)}function r_(t,r,n){t.forEach(o=>{const i=o.parentNode||o.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n?.[o.id]){const{x:l,y:u,z:p}=i_(o,t,{...o.position,z:o[bt]?.z??0},r);o.positionAbsolute={x:l,y:u},o[bt].z=p,n?.[o.id]&&(o[bt].isParent=!0)}})}function Lf(t,r,n,o){const i=new Map,l={},u=o?1e3:0;return t.forEach(p=>{const _=(Hn(p.zIndex)?p.zIndex:0)+(p.selected?u:0),v=r.get(p.id),g={...p,positionAbsolute:{x:p.position.x,y:p.position.y}},y=p.parentNode||p.parentId;y&&(l[y]=!0),Object.defineProperty(g,bt,{enumerable:!1,value:{handleBounds:v?.type&&v?.type!==p.type?void 0:v?.[bt]?.handleBounds,z:_}}),i.set(p.id,g)}),r_(i,n,l),i}function s_(t,r={}){const{getNodes:n,width:o,height:i,minZoom:l,maxZoom:u,d3Zoom:p,d3Selection:_,fitViewOnInitDone:v,fitViewOnInit:g,nodeOrigin:y}=t();if(p&&_&&(r.initial&&!v&&g||!r.initial)){const E=n().filter(A=>{const N=r.includeHiddenNodes?A.width&&A.height:!A.hidden;return r.nodes?.length?N&&r.nodes.some(j=>j.id===A.id):N}),I=E.every(A=>A.width&&A.height);if(E.length>0&&I){const A=Jd(E,y),{x:N,y:j,zoom:O}=Of(A,o,i,r.minZoom??l,r.maxZoom??u,r.padding??.1),M=je.translate(N,j).scale(O);return p.transform("number"==typeof r.duration&&r.duration>0?Jr(_,r.duration):_,M),!0}}return!1}function lg(t,r){return t.forEach(n=>{const o=r.get(n.id);o&&r.set(o.id,{...o,[bt]:o[bt],selected:n.selected})}),new Map(r)}function cg(t,r){return r.map(n=>{const o=t.find(i=>i.id===n.id);return o&&(n.selected=o.selected),n})}function Qd({changedNodes:t,changedEdges:r,get:n,set:o}){const{nodeInternals:i,edges:l,onNodesChange:u,onEdgesChange:p,hasDefaultNodes:_,hasDefaultEdges:v}=n();t?.length&&(_&&o({nodeInternals:lg(t,i)}),u?.(t)),r?.length&&(v&&o({edges:cg(r,l)}),p?.(r))}const ja=()=>{},ug={zoomIn:ja,zoomOut:ja,zoomTo:ja,getZoom:()=>1,setViewport:ja,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ja,fitBounds:ja,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},dg=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function Xf(){const t=(()=>{const t=At(),{d3Zoom:r,d3Selection:n}=nt(dg,Re);return(0,S.useMemo)(()=>n&&r?{zoomIn:i=>r.scaleBy(Jr(n,i?.duration),1.2),zoomOut:i=>r.scaleBy(Jr(n,i?.duration),1/1.2),zoomTo:(i,l)=>r.scaleTo(Jr(n,l?.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,l)=>{const[u,p,_]=t.getState().transform,v=je.translate(i.x??u,i.y??p).scale(i.zoom??_);r.transform(Jr(n,l?.duration),v)},getViewport:()=>{const[i,l,u]=t.getState().transform;return{x:i,y:l,zoom:u}},fitView:i=>s_(t.getState,i),setCenter:(i,l,u)=>{const{width:p,height:_,maxZoom:v}=t.getState(),g=typeof u?.zoom<"u"?u.zoom:v,C=je.translate(p/2-i*g,_/2-l*g).scale(g);r.transform(Jr(n,u?.duration),C)},fitBounds:(i,l)=>{const{width:u,height:p,minZoom:_,maxZoom:v}=t.getState(),{x:g,y,zoom:x}=Of(i,u,p,_,v,l?.padding??.1),C=je.translate(g,y).scale(x);r.transform(Jr(n,l?.duration),C)},project:i=>{const{transform:l,snapToGrid:u,snapGrid:p}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Df(i,l,u,p)},screenToFlowPosition:i=>{const{transform:l,snapToGrid:u,snapGrid:p,domNode:_}=t.getState();if(!_)return i;const{x:v,y:g}=_.getBoundingClientRect();return Df({x:i.x-v,y:i.y-g},l,u,p)},flowToScreenPosition:i=>{const{transform:l,domNode:u}=t.getState();if(!u)return i;const{x:p,y:_}=u.getBoundingClientRect(),v=Om(i,l);return{x:v.x+p,y:v.y+_}},viewportInitialized:!0}:ug,[r,n])})(),r=At(),n=(0,S.useCallback)(()=>r.getState().getNodes().map(I=>({...I})),[]),o=(0,S.useCallback)(I=>r.getState().nodeInternals.get(I),[]),i=(0,S.useCallback)(()=>{const{edges:I=[]}=r.getState();return I.map(A=>({...A}))},[]),l=(0,S.useCallback)(I=>{const{edges:A=[]}=r.getState();return A.find(N=>N.id===I)},[]),u=(0,S.useCallback)(I=>{const{getNodes:A,setNodes:N,hasDefaultNodes:j,onNodesChange:O}=r.getState(),M=A(),U="function"==typeof I?I(M):I;j?N(U):O&&O(0===U.length?M.map(X=>({type:"remove",id:X.id})):U.map(X=>({item:X,type:"reset"})))},[]),p=(0,S.useCallback)(I=>{const{edges:A=[],setEdges:N,hasDefaultEdges:j,onEdgesChange:O}=r.getState(),M="function"==typeof I?I(A):I;j?N(M):O&&O(0===M.length?A.map(Y=>({type:"remove",id:Y.id})):M.map(Y=>({item:Y,type:"reset"})))},[]),_=(0,S.useCallback)(I=>{const A=Array.isArray(I)?I:[I],{getNodes:N,setNodes:j,hasDefaultNodes:O,onNodesChange:M}=r.getState();O?j([...N(),...A]):M&&M(A.map(Y=>({item:Y,type:"add"})))},[]),v=(0,S.useCallback)(I=>{const A=Array.isArray(I)?I:[I],{edges:N=[],setEdges:j,hasDefaultEdges:O,onEdgesChange:M}=r.getState();O?j([...N,...A]):M&&M(A.map(Y=>({item:Y,type:"add"})))},[]),g=(0,S.useCallback)(()=>{const{getNodes:I,edges:A=[],transform:N}=r.getState(),[j,O,M]=N;return{nodes:I().map(U=>({...U})),edges:A.map(U=>({...U})),viewport:{x:j,y:O,zoom:M}}},[]),y=(0,S.useCallback)(({nodes:I,edges:A})=>{const{nodeInternals:N,getNodes:j,edges:O,hasDefaultNodes:M,hasDefaultEdges:U,onNodesDelete:Y,onEdgesDelete:X,onNodesChange:ee,onEdgesChange:H}=r.getState(),pe=(I||[]).map(L=>L.id),ie=(A||[]).map(L=>L.id),fe=j().reduce((L,B)=>{const J=B.parentNode||B.parentId,ae=!pe.includes(B.id)&&J&&L.find(Q=>Q.id===J);return("boolean"!=typeof B.deletable||B.deletable)&&(pe.includes(B.id)||ae)&&L.push(B),L},[]),ue=O.filter(L=>"boolean"!=typeof L.deletable||L.deletable),w=ue.filter(L=>ie.includes(L.id));if(fe||w){const L=zm(fe,ue),B=[...w,...L],J=B.reduce((ae,P)=>(ae.includes(P.id)||ae.push(P.id),ae),[]);(U||M)&&(U&&r.setState({edges:O.filter(ae=>!J.includes(ae.id))}),M&&(fe.forEach(ae=>{N.delete(ae.id)}),r.setState({nodeInternals:new Map(N)}))),J.length>0&&(X?.(B),H&&H(J.map(ae=>({id:ae,type:"remove"})))),fe.length>0&&(Y?.(fe),ee)&&ee(fe.map(P=>({id:P.id,type:"remove"})))}},[]),x=(0,S.useCallback)(I=>{const A=(t=>Hn(t.width)&&Hn(t.height)&&Hn(t.x)&&Hn(t.y))(I),N=A?null:r.getState().nodeInternals.get(I.id);return A||N?[A?I:km(N),N,A]:[null,null,A]},[]),C=(0,S.useCallback)((I,A=!0,N)=>{const[j,O,M]=x(I);return j?(N||r.getState().getNodes()).filter(U=>{if(!(M||U.id!==O.id&&U.positionAbsolute))return!1;const Y=km(U),X=If(Y,j);return A&&X>0||X>=j.width*j.height}):[]},[]),E=(0,S.useCallback)((I,A,N=!0)=>{const[j]=x(I);if(!j)return!1;const O=If(j,A);return N&&O>0||O>=j.width*j.height},[]);return(0,S.useMemo)(()=>({...t,getNodes:n,getNode:o,getEdges:i,getEdge:l,setNodes:u,setEdges:p,addNodes:_,addEdges:v,toObject:g,deleteElements:y,getIntersectingNodes:C,isNodeIntersecting:E}),[t,n,o,i,l,u,p,_,v,g,y,C,E])}const fg={actInsideInputWithModifier:!1},Uf={position:"absolute",width:"100%",height:"100%",top:0,left:0},ep=t=>({x:t.x,y:t.y,zoom:t.k}),Ma=(t,r)=>t.target.closest(`.${r}`),a_=(t,r)=>2===r&&Array.isArray(t)&&t.includes(2),l_=t=>{const r=t.ctrlKey&&Yd()?10:1;return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*r},gg=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),vg=({onMove:t,onMoveStart:r,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:i=!0,zoomOnPinch:l=!0,panOnScroll:u=!1,panOnScrollSpeed:p=.5,panOnScrollMode:_=Aa.Free,zoomOnDoubleClick:v=!0,elementsSelectable:g,panOnDrag:y=!0,defaultViewport:x,translateExtent:C,minZoom:E,maxZoom:I,zoomActivationKeyCode:A,preventScrolling:N=!0,children:j,noWheelClassName:O,noPanClassName:M})=>{const U=(0,S.useRef)(),Y=At(),X=(0,S.useRef)(!1),ee=(0,S.useRef)(!1),H=(0,S.useRef)(null),pe=(0,S.useRef)({x:0,y:0,zoom:0}),{d3Zoom:ie,d3Selection:fe,d3ZoomHandler:ue,userSelectionActive:w}=nt(gg,Re),L=wc(A),B=(0,S.useRef)(0),J=(0,S.useRef)(!1),ae=(0,S.useRef)();return function _g(t){const r=At();(0,S.useEffect)(()=>{let n;const o=()=>{if(!t.current)return;const i=Nf(t.current);(0===i.height||0===i.width)&&r.getState().onError?.("004",Yn.error004()),r.setState({width:i.width||500,height:i.height||500})};return o(),window.addEventListener("resize",o),t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.removeEventListener("resize",o),n&&t.current&&n.unobserve(t.current)}},[])}(H),(0,S.useEffect)(()=>{if(H.current){const P=H.current.getBoundingClientRect(),Q=function Sh(){var g,y,x,t=vh,r=yh,n=Ch,o=bh,i=xh,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],p=250,_=gd,v=Xs("start","zoom","end"),C=500,E=150,I=0,A=10;function N(w){w.property("__zoom",hm).on("wheel.zoom",ee,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",pe).filter(i).on("touchstart.zoom",ie).on("touchmove.zoom",fe).on("touchend.zoom touchcancel.zoom",ue).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function j(w,L){return(L=Math.max(l[0],Math.min(l[1],L)))===w.k?w:new tt(L,w.x,w.y)}function O(w,L,B){var J=L[0]-B[0]*w.k,ae=L[1]-B[1]*w.k;return J===w.x&&ae===w.y?w:new tt(w.k,J,ae)}function M(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function U(w,L,B,J){w.on("start.zoom",function(){Y(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(J).end()}).tween("zoom",function(){var ae=this,P=arguments,Q=Y(ae,P).event(J),re=r.apply(ae,P),de=null==B?M(re):"function"==typeof B?B.apply(ae,P):B,be=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ye=ae.__zoom,Me="function"==typeof L?L.apply(ae,P):L,Ze=_(ye.invert(de).concat(be/ye.k),Me.invert(de).concat(be/Me.k));return function(Ke){if(1===Ke)Ke=Me;else{var at=Ze(Ke),St=be/at[2];Ke=new tt(St,de[0]-at[0]*St,de[1]-at[1]*St)}Q.zoom(null,Ke)}})}function Y(w,L,B){return!B&&w.__zooming||new X(w,L)}function X(w,L){this.that=w,this.args=L,this.active=0,this.sourceEvent=null,this.extent=r.apply(w,L),this.taps=0}function ee(w,...L){if(t.apply(this,arguments)){var B=Y(this,L).event(w),J=this.__zoom,ae=Math.max(l[0],Math.min(l[1],J.k*Math.pow(2,o.apply(this,arguments)))),P=Fn(w);if(B.wheel)(B.mouse[0][0]!==P[0]||B.mouse[0][1]!==P[1])&&(B.mouse[1]=J.invert(B.mouse[0]=P)),clearTimeout(B.wheel);else{if(J.k===ae)return;B.mouse=[P,J.invert(P)],Pr(this),B.start()}xc(w),B.wheel=setTimeout(function Q(){B.wheel=null,B.end()},E),B.zoom("mouse",n(O(j(J,ae),B.mouse[0],B.mouse[1]),B.extent,u))}}function H(w,...L){if(!x&&t.apply(this,arguments)){var B=w.currentTarget,J=Y(this,L,!0).event(w),ae=yn(w.view).on("mousemove.zoom",function de(ye){if(xc(ye),!J.moved){var Me=ye.clientX-Q,Ze=ye.clientY-re;J.moved=Me*Me+Ze*Ze>I}J.event(ye).zoom("mouse",n(O(J.that.__zoom,J.mouse[0]=Fn(ye,B),J.mouse[1]),J.extent,u))},!0).on("mouseup.zoom",function be(ye){ae.on("mousemove.zoom mouseup.zoom",null),Pt(ye.view,J.moved),xc(ye),J.event(ye).end()},!0),P=Fn(w,B),Q=w.clientX,re=w.clientY;Yt(w.view),bc(w),J.mouse=[P,this.__zoom.invert(P)],Pr(this),J.start()}}function pe(w,...L){if(t.apply(this,arguments)){var B=this.__zoom,J=Fn(w.changedTouches?w.changedTouches[0]:w,this),ae=B.invert(J),Q=n(O(j(B,B.k*(w.shiftKey?.5:2)),J,ae),r.apply(this,L),u);xc(w),p>0?yn(this).transition().duration(p).call(U,Q,J,w):yn(this).call(N.transform,Q,J,w)}}function ie(w,...L){if(t.apply(this,arguments)){var P,Q,re,de,B=w.touches,J=B.length,ae=Y(this,L,w.changedTouches.length===J).event(w);for(bc(w),Q=0;Q<J;++Q)de=[de=Fn(re=B[Q],this),this.__zoom.invert(de),re.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==de[2]&&(ae.touch1=de,ae.taps=0):(ae.touch0=de,P=!0,ae.taps=1+!!g);g&&(g=clearTimeout(g)),P&&(ae.taps<2&&(y=de[0],g=setTimeout(function(){g=null},C)),Pr(this),ae.start())}}function fe(w,...L){if(this.__zooming){var P,Q,re,de,B=Y(this,L).event(w),J=w.changedTouches,ae=J.length;for(xc(w),P=0;P<ae;++P)re=Fn(Q=J[P],this),B.touch0&&B.touch0[2]===Q.identifier?B.touch0[0]=re:B.touch1&&B.touch1[2]===Q.identifier&&(B.touch1[0]=re);if(Q=B.that.__zoom,B.touch1){var be=B.touch0[0],ye=B.touch0[1],Me=B.touch1[0],Ze=B.touch1[1],Ke=(Ke=Me[0]-be[0])*Ke+(Ke=Me[1]-be[1])*Ke,at=(at=Ze[0]-ye[0])*at+(at=Ze[1]-ye[1])*at;Q=j(Q,Math.sqrt(Ke/at)),re=[(be[0]+Me[0])/2,(be[1]+Me[1])/2],de=[(ye[0]+Ze[0])/2,(ye[1]+Ze[1])/2]}else{if(!B.touch0)return;re=B.touch0[0],de=B.touch0[1]}B.zoom("touch",n(O(Q,re,de),B.extent,u))}}function ue(w,...L){if(this.__zooming){var P,Q,B=Y(this,L).event(w),J=w.changedTouches,ae=J.length;for(bc(w),x&&clearTimeout(x),x=setTimeout(function(){x=null},C),P=0;P<ae;++P)Q=J[P],B.touch0&&B.touch0[2]===Q.identifier?delete B.touch0:B.touch1&&B.touch1[2]===Q.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),2===B.taps&&(Q=Fn(Q,this),Math.hypot(y[0]-Q[0],y[1]-Q[1])<A)){var re=yn(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return N.transform=function(w,L,B,J){var ae=w.selection?w.selection():w;ae.property("__zoom",hm),w!==ae?U(w,L,B,J):ae.interrupt().each(function(){Y(this,arguments).event(J).start().zoom(null,"function"==typeof L?L.apply(this,arguments):L).end()})},N.scaleBy=function(w,L,B,J){N.scaleTo(w,function(){return this.__zoom.k*("function"==typeof L?L.apply(this,arguments):L)},B,J)},N.scaleTo=function(w,L,B,J){N.transform(w,function(){var ae=r.apply(this,arguments),P=this.__zoom,Q=null==B?M(ae):"function"==typeof B?B.apply(this,arguments):B,re=P.invert(Q),de="function"==typeof L?L.apply(this,arguments):L;return n(O(j(P,de),Q,re),ae,u)},B,J)},N.translateBy=function(w,L,B,J){N.transform(w,function(){return n(this.__zoom.translate("function"==typeof L?L.apply(this,arguments):L,"function"==typeof B?B.apply(this,arguments):B),r.apply(this,arguments),u)},null,J)},N.translateTo=function(w,L,B,J,ae){N.transform(w,function(){var P=r.apply(this,arguments),Q=this.__zoom,re=null==J?M(P):"function"==typeof J?J.apply(this,arguments):J;return n(je.translate(re[0],re[1]).scale(Q.k).translate("function"==typeof L?-L.apply(this,arguments):-L,"function"==typeof B?-B.apply(this,arguments):-B),P,u)},J,ae)},X.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,L){return this.mouse&&"mouse"!==w&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&"touch"!==w&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&"touch"!==w&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var L=yn(this.that).datum();v.call(w,this.that,new Ee(w,{sourceEvent:this.sourceEvent,target:N,type:w,transform:this.that.__zoom,dispatch:v}),L)}},N.wheelDelta=function(w){return arguments.length?(o="function"==typeof w?w:xe(+w),N):o},N.filter=function(w){return arguments.length?(t="function"==typeof w?w:xe(!!w),N):t},N.touchable=function(w){return arguments.length?(i="function"==typeof w?w:xe(!!w),N):i},N.extent=function(w){return arguments.length?(r="function"==typeof w?w:xe([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),N):r},N.scaleExtent=function(w){return arguments.length?(l[0]=+w[0],l[1]=+w[1],N):[l[0],l[1]]},N.translateExtent=function(w){return arguments.length?(u[0][0]=+w[0][0],u[1][0]=+w[1][0],u[0][1]=+w[0][1],u[1][1]=+w[1][1],N):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},N.constrain=function(w){return arguments.length?(n=w,N):n},N.duration=function(w){return arguments.length?(p=+w,N):p},N.interpolate=function(w){return arguments.length?(_=w,N):_},N.on=function(){var w=v.on.apply(v,arguments);return w===v?N:w},N.clickDistance=function(w){return arguments.length?(I=(w=+w)*w,N):Math.sqrt(I)},N.tapDistance=function(w){return arguments.length?(A=+w,N):A},N}().scaleExtent([E,I]).translateExtent(C),re=yn(H.current).call(Q),de=je.translate(x.x,x.y).scale(Ia(x.zoom,E,I)),be=[[0,0],[P.width,P.height]],ye=Q.constrain()(de,be,C);Q.transform(re,ye),Q.wheelDelta(l_),Y.setState({d3Zoom:Q,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ye.x,ye.y,ye.k],domNode:H.current.closest(".react-flow")})}},[]),(0,S.useEffect)(()=>{fe&&ie&&(!u||L||w?typeof ue<"u"&&fe.on("wheel.zoom",function(P,Q){if(!N&&"wheel"===P.type&&!P.ctrlKey||Ma(P,O))return null;P.preventDefault(),ue.call(this,P,Q)},{passive:!1}):fe.on("wheel.zoom",P=>{if(Ma(P,O))return!1;P.preventDefault(),P.stopImmediatePropagation();const Q=fe.property("__zoom").k||1;if(P.ctrlKey&&l){const at=Fn(P),St=l_(P),pt=Q*Math.pow(2,St);return void ie.scaleTo(fe,pt,at,P)}const re=1===P.deltaMode?20:1;let de=_===Aa.Vertical?0:P.deltaX*re,be=_===Aa.Horizontal?0:P.deltaY*re;!Yd()&&P.shiftKey&&_!==Aa.Vertical&&(de=P.deltaY*re,be=0),ie.translateBy(fe,-de/Q*p,-be/Q*p,{internal:!0});const ye=ep(fe.property("__zoom")),{onViewportChangeStart:Me,onViewportChange:Ze,onViewportChangeEnd:Ke}=Y.getState();clearTimeout(ae.current),J.current||(J.current=!0,r?.(P,ye),Me?.(ye)),J.current&&(t?.(P,ye),Ze?.(ye),ae.current=setTimeout(()=>{n?.(P,ye),Ke?.(ye),J.current=!1},150))},{passive:!1}))},[w,u,_,fe,ie,ue,L,l,N,O,r,t,n]),(0,S.useEffect)(()=>{ie&&ie.on("start",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;B.current=P.sourceEvent?.button;const{onViewportChangeStart:Q}=Y.getState(),re=ep(P.transform);X.current=!0,pe.current=re,"mousedown"===P.sourceEvent?.type&&Y.setState({paneDragging:!0}),Q?.(re),r?.(P.sourceEvent,re)})},[ie,r]),(0,S.useEffect)(()=>{ie&&(w&&!X.current?ie.on("zoom",null):w||ie.on("zoom",P=>{const{onViewportChange:Q}=Y.getState();if(Y.setState({transform:[P.transform.x,P.transform.y,P.transform.k]}),ee.current=!(!o||!a_(y,B.current??0)),(t||Q)&&!P.sourceEvent?.internal){const re=ep(P.transform);Q?.(re),t?.(P.sourceEvent,re)}}))},[w,ie,t,y,o]),(0,S.useEffect)(()=>{ie&&ie.on("end",P=>{if(!P.sourceEvent||P.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=Y.getState();if(X.current=!1,Y.setState({paneDragging:!1}),o&&a_(y,B.current??0)&&!ee.current&&o(P.sourceEvent),ee.current=!1,(n||Q)&&((t,r)=>t.x!==r.x||t.y!==r.y||t.zoom!==r.k)(pe.current,P.transform)){const re=ep(P.transform);pe.current=re,clearTimeout(U.current),U.current=setTimeout(()=>{Q?.(re),n?.(P.sourceEvent,re)},u?150:0)}})},[ie,u,y,n,o]),(0,S.useEffect)(()=>{ie&&ie.filter(P=>{const Q=L||i,re=l&&P.ctrlKey;if((!0===y||Array.isArray(y)&&y.includes(1))&&1===P.button&&"mousedown"===P.type&&(Ma(P,"react-flow__node")||Ma(P,"react-flow__edge")))return!0;if(!y&&!Q&&!u&&!v&&!l||w||!v&&"dblclick"===P.type||Ma(P,O)&&"wheel"===P.type||Ma(P,M)&&("wheel"!==P.type||u&&"wheel"===P.type&&!L)||!l&&P.ctrlKey&&"wheel"===P.type||!Q&&!u&&!re&&"wheel"===P.type||!y&&("mousedown"===P.type||"touchstart"===P.type)||Array.isArray(y)&&!y.includes(P.button)&&"mousedown"===P.type)return!1;const de=Array.isArray(y)&&y.includes(P.button)||!P.button||P.button<=1;return(!P.ctrlKey||"wheel"===P.type)&&de})},[w,ie,i,l,u,v,y,g,L]),S.createElement("div",{className:"react-flow__renderer",ref:H,style:Uf},j)},yg=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function bg(){const{userSelectionActive:t,userSelectionRect:r}=nt(yg,Re);return t&&r?S.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}function c_(t,r){const n=r.parentNode||r.parentId,o=t.find(i=>i.id===n);if(o){const i=r.position.x+r.width-o.width,l=r.position.y+r.height-o.height;if(i>0||l>0||r.position.x<0||r.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,i>0&&(o.style.width+=i),l>0&&(o.style.height+=l),r.position.x<0){const u=Math.abs(r.position.x);o.position.x=o.position.x-u,o.style.width+=u,r.position.x=0}if(r.position.y<0){const u=Math.abs(r.position.y);o.position.y=o.position.y-u,o.style.height+=u,r.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function u_(t,r){if(t.some(o=>"reset"===o.type))return t.filter(o=>"reset"===o.type).map(o=>o.item);const n=t.filter(o=>"add"===o.type).map(o=>o.item);return r.reduce((o,i)=>{const l=t.filter(p=>p.id===i.id);if(0===l.length)return o.push(i),o;const u={...i};for(const p of l)if(p)switch(p.type){case"select":u.selected=p.selected;break;case"position":typeof p.position<"u"&&(u.position=p.position),typeof p.positionAbsolute<"u"&&(u.positionAbsolute=p.positionAbsolute),typeof p.dragging<"u"&&(u.dragging=p.dragging),u.expandParent&&c_(o,u);break;case"dimensions":typeof p.dimensions<"u"&&(u.width=p.dimensions.width,u.height=p.dimensions.height),typeof p.updateStyle<"u"&&(u.style={...u.style||{},...p.dimensions}),"boolean"==typeof p.resizing&&(u.resizing=p.resizing),u.expandParent&&c_(o,u);break;case"remove":return o}return o.push(u),o},n)}function Yf(t,r){return u_(t,r)}function d_(t,r){return u_(t,r)}const Ui=(t,r)=>({id:t,type:"select",selected:r});function $a(t,r){return t.reduce((n,o)=>{const i=r.includes(o.id);return!o.selected&&i?(o.selected=!0,n.push(Ui(o.id,!0))):o.selected&&!i&&(o.selected=!1,n.push(Ui(o.id,!1))),n},[])}const Hf=(t,r)=>n=>{n.target===r.current&&t?.(n)},xg=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),p_=(0,S.memo)(({isSelecting:t,selectionMode:r=Hd.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:i,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:p,onPaneMouseEnter:_,onPaneMouseMove:v,onPaneMouseLeave:g,children:y})=>{const x=(0,S.useRef)(null),C=At(),E=(0,S.useRef)(0),I=(0,S.useRef)(0),A=(0,S.useRef)(),{userSelectionActive:N,elementsSelectable:j,dragging:O}=nt(xg,Re),M=()=>{C.setState({userSelectionActive:!1,userSelectionRect:null}),E.current=0,I.current=0},U=ue=>{l?.(ue),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},X=p?ue=>p(ue):void 0,fe=j&&(t||N);return S.createElement("div",{className:et(["react-flow__pane",{dragging:O,selection:t}]),onClick:fe?void 0:Hf(U,x),onContextMenu:Hf(ue=>{Array.isArray(n)&&n?.includes(2)?ue.preventDefault():u?.(ue)},x),onWheel:Hf(X,x),onMouseEnter:fe?void 0:_,onMouseDown:fe?ue=>{const{resetSelectedElements:w,domNode:L}=C.getState();if(A.current=L?.getBoundingClientRect(),!j||!t||0!==ue.button||ue.target!==x.current||!A.current)return;const{x:B,y:J}=Xi(ue,A.current);w(),C.setState({userSelectionRect:{width:0,height:0,startX:B,startY:J,x:B,y:J}}),o?.(ue)}:void 0,onMouseMove:fe?ue=>{const{userSelectionRect:w,nodeInternals:L,edges:B,transform:J,onNodesChange:ae,onEdgesChange:P,nodeOrigin:Q,getNodes:re}=C.getState();if(!t||!A.current||!w)return;C.setState({userSelectionActive:!0,nodesSelectionActive:!1});const de=Xi(ue,A.current),be=w.startX??0,ye=w.startY??0,Me={...w,x:de.x<be?de.x:be,y:de.y<ye?de.y:ye,width:Math.abs(de.x-be),height:Math.abs(de.y-ye)},Ze=re(),Ke=Vm(L,Me,J,r===Hd.Partial,!0,Q),at=zm(Ke,B).map(pt=>pt.id),St=Ke.map(pt=>pt.id);if(E.current!==St.length){E.current=St.length;const pt=$a(Ze,St);pt.length&&ae?.(pt)}if(I.current!==at.length){I.current=at.length;const pt=$a(B,at);pt.length&&P?.(pt)}C.setState({userSelectionRect:Me})}:v,onMouseUp:fe?ue=>{if(0!==ue.button)return;const{userSelectionRect:w}=C.getState();!N&&w&&ue.target===x.current&&U?.(ue),C.setState({nodesSelectionActive:E.current>0}),M(),i?.(ue)}:void 0,onMouseLeave:fe?ue=>{N&&(C.setState({nodesSelectionActive:E.current>0}),i?.(ue)),M()}:g,ref:x,style:Uf},y,S.createElement(bg,null))});function f_(t,r){const n=t.parentNode||t.parentId;if(!n)return!1;const o=r.get(n);return!!o&&(!!o.selected||f_(o,r))}function m_(t,r,n){let o=t;do{if(o?.matches(r))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Cg(t,r,n,o){return Array.from(t.values()).filter(i=>(i.selected||i.id===o)&&(!i.parentNode||i.parentId||!f_(i,t))&&(i.draggable||r&&typeof i.draggable>"u")).map(i=>({id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(i.positionAbsolute?.x??0),y:n.y-(i.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}))}function __(t,r,n,o,i=[0,0],l){const u=function Sg(t,r){return r&&"parent"!==r?[r[0],[r[1][0]-(t.width||0),r[1][1]-(t.height||0)]]:r}(t,t.extent||o);let p=u;const _=t.parentNode||t.parentId;if("parent"!==t.extent||t.expandParent){if(t.extent&&_&&"parent"!==t.extent){const y=n.get(_),{x,y:C}=Ta(y,i).positionAbsolute;p=[[t.extent[0][0]+x,t.extent[0][1]+C],[t.extent[1][0]+x,t.extent[1][1]+C]]}}else if(_&&t.width&&t.height){const y=n.get(_),{x,y:C}=Ta(y,i).positionAbsolute;p=y&&Hn(x)&&Hn(C)&&Hn(y.width)&&Hn(y.height)?[[x+t.width*i[0],C+t.height*i[1]],[x+y.width-t.width+t.width*i[0],C+y.height-t.height+t.height*i[1]]]:p}else l?.("005",Yn.error005()),p=u;let v={x:0,y:0};if(_){const y=n.get(_);v=Ta(y,i).positionAbsolute}const g=p&&"parent"!==p?Ef(r,p):r;return{position:{x:g.x-v.x,y:g.y-v.y},positionAbsolute:g}}function Wf({nodeId:t,dragItems:r,nodeInternals:n}){const o=r.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?o.find(i=>i.id===t):o[0],o]}p_.displayName="Pane";const h_=(t,r,n,o)=>{const i=r.querySelectorAll(t);if(!i||!i.length)return null;const l=Array.from(i),u=r.getBoundingClientRect(),p_x=u.width*o[0],p_y=u.height*o[1];return l.map(_=>{const v=_.getBoundingClientRect();return{id:_.getAttribute("data-handleid"),position:_.getAttribute("data-handlepos"),x:(v.left-u.left-p_x)/n,y:(v.top-u.top-p_y)/n,...Nf(_)}})};function Nc(t,r,n){return void 0===n?n:o=>{const i=r().nodeInternals.get(t);i&&n(o,{...i})}}function qf({id:t,store:r,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:i,unselectNodesAndEdges:l,multiSelectionActive:u,nodeInternals:p,onError:_}=r.getState(),v=p.get(t);v?(r.setState({nodesSelectionActive:!1}),v.selected?(n||v.selected&&u)&&(l({nodes:[v],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):i([t])):_?.("012",Yn.error012(t))}function Zf(t){return(r,n,o)=>t?.(r,o)}function g_({nodeRef:t,disabled:r=!1,noDragClassName:n,handleSelector:o,nodeId:i,isSelectable:l,selectNodesOnDrag:u}){const p=At(),[_,v]=(0,S.useState)(!1),g=(0,S.useRef)([]),y=(0,S.useRef)({x:null,y:null}),x=(0,S.useRef)(0),C=(0,S.useRef)(null),E=(0,S.useRef)({x:0,y:0}),I=(0,S.useRef)(null),A=(0,S.useRef)(!1),N=(0,S.useRef)(!1),j=(0,S.useRef)(!1),O=function kg(){const t=At();return(0,S.useCallback)(({sourceEvent:n})=>{const{transform:o,snapGrid:i,snapToGrid:l}=t.getState(),_={x:((n.touches?n.touches[0].clientX:n.clientX)-o[0])/o[2],y:((n.touches?n.touches[0].clientY:n.clientY)-o[1])/o[2]};return{xSnapped:l?i[0]*Math.round(_.x/i[0]):_.x,ySnapped:l?i[1]*Math.round(_.y/i[1]):_.y,..._}},[])}();return(0,S.useEffect)(()=>{if(t?.current){const M=yn(t.current),U=({x:ee,y:H})=>{const{nodeInternals:pe,onNodeDrag:ie,onSelectionDrag:fe,updateNodePositions:ue,nodeExtent:w,snapGrid:L,snapToGrid:B,nodeOrigin:J,onError:ae}=p.getState();y.current={x:ee,y:H};let P=!1,Q={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&w){const de=Jd(g.current,J);Q=Cc(de)}if(g.current=g.current.map(de=>{const be={x:ee-de.distance.x,y:H-de.distance.y};B&&(be.x=L[0]*Math.round(be.x/L[0]),be.y=L[1]*Math.round(be.y/L[1]));const ye=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];g.current.length>1&&w&&!de.extent&&(ye[0][0]=de.positionAbsolute.x-Q.x+w[0][0],ye[1][0]=de.positionAbsolute.x+(de.width??0)-Q.x2+w[1][0],ye[0][1]=de.positionAbsolute.y-Q.y+w[0][1],ye[1][1]=de.positionAbsolute.y+(de.height??0)-Q.y2+w[1][1]);const Me=__(de,be,pe,ye,J,ae);return P=P||de.position.x!==Me.position.x||de.position.y!==Me.position.y,de.position=Me.position,de.positionAbsolute=Me.positionAbsolute,de}),!P)return;ue(g.current,!0,!0),v(!0);const re=i?ie:Zf(fe);if(re&&I.current){const[de,be]=Wf({nodeId:i,dragItems:g.current,nodeInternals:pe});re(I.current,de,be)}},Y=()=>{if(!C.current)return;const[ee,H]=bm(E.current,C.current);if(0!==ee||0!==H){const{transform:pe,panBy:ie}=p.getState();y.current.x=(y.current.x??0)-ee/pe[2],y.current.y=(y.current.y??0)-H/pe[2],ie({x:ee,y:H})&&U(y.current)}x.current=requestAnimationFrame(Y)},X=ee=>{const{nodeInternals:H,multiSelectionActive:pe,nodesDraggable:ie,unselectNodesAndEdges:fe,onNodeDragStart:ue,onSelectionDragStart:w}=p.getState();N.current=!0;const L=i?ue:Zf(w);(!u||!l)&&!pe&&i&&(H.get(i)?.selected||fe()),i&&l&&u&&qf({id:i,store:p,nodeRef:t});const B=O(ee);if(y.current=B,g.current=Cg(H,ie,B,i),L&&g.current){const[J,ae]=Wf({nodeId:i,dragItems:g.current,nodeInternals:H});L(ee.sourceEvent,J,ae)}};if(!r){const ee=function Ih(){var p,_,v,g,t=kh,r=wh,n=Nh,o=Eh,i={},l=Xs("start","drag","end"),u=0,y=0;function x(M){M.on("mousedown.drag",C).filter(o).on("touchstart.drag",A).on("touchmove.drag",N,fd).on("touchend.drag touchcancel.drag",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C(M,U){if(!g&&t.call(this,M,U)){var Y=O(this,r.call(this,M,U),M,U,"mouse");Y&&(yn(M.view).on("mousemove.drag",E,Fi).on("mouseup.drag",I,Fi),Yt(M.view),na(M),v=!1,p=M.clientX,_=M.clientY,Y("start",M))}}function E(M){if(Ri(M),!v){var U=M.clientX-p,Y=M.clientY-_;v=U*U+Y*Y>y}i.mouse("drag",M)}function I(M){yn(M.view).on("mousemove.drag mouseup.drag",null),Pt(M.view,v),Ri(M),i.mouse("end",M)}function A(M,U){if(t.call(this,M,U)){var H,pe,Y=M.changedTouches,X=r.call(this,M,U),ee=Y.length;for(H=0;H<ee;++H)(pe=O(this,X,M,U,Y[H].identifier,Y[H]))&&(na(M),pe("start",M,Y[H]))}}function N(M){var X,ee,U=M.changedTouches,Y=U.length;for(X=0;X<Y;++X)(ee=i[U[X].identifier])&&(Ri(M),ee("drag",M,U[X]))}function j(M){var X,ee,U=M.changedTouches,Y=U.length;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),X=0;X<Y;++X)(ee=i[U[X].identifier])&&(na(M),ee("end",M,U[X]))}function O(M,U,Y,X,ee,H){var fe,ue,w,pe=l.copy(),ie=Fn(H||Y,U);if(null!=(w=n.call(M,new wf("beforestart",{sourceEvent:Y,target:x,identifier:ee,active:u,x:ie[0],y:ie[1],dx:0,dy:0,dispatch:pe}),X)))return fe=w.x-ie[0]||0,ue=w.y-ie[1]||0,function L(B,J,ae){var Q,P=ie;switch(B){case"start":i[ee]=L,Q=u++;break;case"end":delete i[ee],--u;case"drag":ie=Fn(ae||J,U),Q=u}pe.call(B,M,new wf(B,{sourceEvent:J,subject:w,target:x,identifier:ee,active:Q,x:ie[0]+fe,y:ie[1]+ue,dx:ie[0]-P[0],dy:ie[1]-P[1],dispatch:pe}),X)}}return x.filter=function(M){return arguments.length?(t="function"==typeof M?M:Ld(!!M),x):t},x.container=function(M){return arguments.length?(r="function"==typeof M?M:Ld(M),x):r},x.subject=function(M){return arguments.length?(n="function"==typeof M?M:Ld(M),x):n},x.touchable=function(M){return arguments.length?(o="function"==typeof M?M:Ld(!!M),x):o},x.on=function(){var M=l.on.apply(l,arguments);return M===l?x:M},x.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,x):Math.sqrt(y)},x}().on("start",H=>{const{domNode:pe,nodeDragThreshold:ie}=p.getState();0===ie&&X(H),j.current=!1;const fe=O(H);y.current=fe,C.current=pe?.getBoundingClientRect()||null,E.current=Xi(H.sourceEvent,C.current)}).on("drag",H=>{const pe=O(H),{autoPanOnNodeDrag:ie,nodeDragThreshold:fe}=p.getState();if("touchmove"===H.sourceEvent.type&&H.sourceEvent.touches.length>1&&(j.current=!0),!j.current){if(!A.current&&N.current&&ie&&(A.current=!0,Y()),!N.current){const ue=pe.xSnapped-(y?.current?.x??0),w=pe.ySnapped-(y?.current?.y??0);Math.sqrt(ue*ue+w*w)>fe&&X(H)}(y.current.x!==pe.xSnapped||y.current.y!==pe.ySnapped)&&g.current&&N.current&&(I.current=H.sourceEvent,E.current=Xi(H.sourceEvent,C.current),U(pe))}}).on("end",H=>{if(N.current&&!j.current&&(v(!1),A.current=!1,N.current=!1,cancelAnimationFrame(x.current),g.current)){const{updateNodePositions:pe,nodeInternals:ie,onNodeDragStop:fe,onSelectionDragStop:ue}=p.getState(),w=i?fe:Zf(ue);if(pe(g.current,!1,!1),w){const[L,B]=Wf({nodeId:i,dragItems:g.current,nodeInternals:ie});w(H.sourceEvent,L,B)}}}).filter(H=>{const pe=H.target;return!H.button&&(!n||!m_(pe,`.${n}`,t))&&(!o||m_(pe,o,t))});return M.call(ee),()=>{M.on(".drag",null)}}M.on(".drag",null)}},[t,r,n,o,l,p,i,u,O]),_}function v_(){const t=At();return(0,S.useCallback)(n=>{const{nodeInternals:o,nodeExtent:i,updateNodePositions:l,getNodes:u,snapToGrid:p,snapGrid:_,onError:v,nodesDraggable:g}=t.getState(),y=u().filter(j=>j.selected&&(j.draggable||g&&typeof j.draggable>"u")),E=n.isShiftPressed?4:1,I=n.x*(p?_[0]:5)*E,A=n.y*(p?_[1]:5)*E;l(y.map(j=>{if(j.positionAbsolute){const O={x:j.positionAbsolute.x+I,y:j.positionAbsolute.y+A};p&&(O.x=_[0]*Math.round(O.x/_[0]),O.y=_[1]*Math.round(O.y/_[1]));const{positionAbsolute:M,position:U}=__(j,O,o,i,void 0,v);j.position=U,j.positionAbsolute=M}return j}),!0,!1)},[])}const Ga={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ec=t=>{const r=({id:n,type:o,data:i,xPos:l,yPos:u,xPosOrigin:p,yPosOrigin:_,selected:v,onClick:g,onMouseEnter:y,onMouseMove:x,onMouseLeave:C,onContextMenu:E,onDoubleClick:I,style:A,className:N,isDraggable:j,isSelectable:O,isConnectable:M,isFocusable:U,selectNodesOnDrag:Y,sourcePosition:X,targetPosition:ee,hidden:H,resizeObserver:pe,dragHandle:ie,zIndex:fe,isParent:ue,noDragClassName:w,noPanClassName:L,initialized:B,disableKeyboardA11y:J,ariaLabel:ae,rfId:P,hasHandleBounds:Q})=>{const re=At(),de=(0,S.useRef)(null),be=(0,S.useRef)(null),ye=(0,S.useRef)(X),Me=(0,S.useRef)(ee),Ze=(0,S.useRef)(o),Ke=O||j||g||y||x||C,at=v_(),St=Nc(n,re.getState,y),pt=Nc(n,re.getState,x),so=Nc(n,re.getState,C),qn=Nc(n,re.getState,E),ao=Nc(n,re.getState,I);(0,S.useEffect)(()=>()=>{be.current&&(pe?.unobserve(be.current),be.current=null)},[]),(0,S.useEffect)(()=>{if(de.current&&!H){const ft=de.current;(!B||!Q||be.current!==ft)&&(be.current&&pe?.unobserve(be.current),pe?.observe(ft),be.current=ft)}},[H,B,Q]),(0,S.useEffect)(()=>{const ft=Ze.current!==o,ke=ye.current!==X,jn=Me.current!==ee;de.current&&(ft||ke||jn)&&(ft&&(Ze.current=o),ke&&(ye.current=X),jn&&(Me.current=ee),re.getState().updateNodeDimensions([{id:n,nodeElement:de.current,forceUpdate:!0}]))},[n,o,X,ee]);const Fo=g_({nodeRef:de,disabled:H||!j,noDragClassName:w,handleSelector:ie,nodeId:n,isSelectable:O,selectNodesOnDrag:Y});return H?null:S.createElement("div",{className:et(["react-flow__node",`react-flow__node-${o}`,{[L]:j},N,{selected:v,selectable:O,parent:ue,dragging:Fo}]),ref:de,style:{zIndex:fe,transform:`translate(${p}px,${_}px)`,pointerEvents:Ke?"all":"none",visibility:B?"visible":"hidden",...A},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:St,onMouseMove:pt,onMouseLeave:so,onContextMenu:qn,onClick:ft=>{const{nodeDragThreshold:ke}=re.getState();if(O&&(!Y||!j||ke>0)&&qf({id:n,store:re,nodeRef:de}),g){const jn=re.getState().nodeInternals.get(n);jn&&g(ft,{...jn})}},onDoubleClick:ao,onKeyDown:U?ft=>{Af(ft)||J||(wm.includes(ft.key)&&O?qf({id:n,store:re,unselect:"Escape"===ft.key,nodeRef:de}):j&&v&&Object.prototype.hasOwnProperty.call(Ga,ft.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${ft.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~u}`}),at({x:Ga[ft.key].x,y:Ga[ft.key].y,isShiftPressed:ft.shiftKey})))}:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":J?void 0:`${e_}-${P}`,"aria-label":ae},S.createElement(zh,{value:n},S.createElement(t,{id:n,data:i,type:o,xPos:l,yPos:u,selected:v,isConnectable:M,sourcePosition:X,targetPosition:ee,dragging:Fo,dragHandle:ie,zIndex:fe})))};return r.displayName="NodeWrapper",(0,S.memo)(r)};const wg=t=>{const r=t.getNodes().filter(n=>n.selected);return{...Jd(r,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var Eg=(0,S.memo)(function Ng({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:n}){const o=At(),{width:i,height:l,x:u,y:p,transformString:_,userSelectionActive:v}=nt(wg,Re),g=v_(),y=(0,S.useRef)(null);if((0,S.useEffect)(()=>{n||y.current?.focus({preventScroll:!0})},[n]),g_({nodeRef:y}),v||!i||!l)return null;const x=t?E=>{const I=o.getState().getNodes().filter(A=>A.selected);t(E,I)}:void 0;return S.createElement("div",{className:et(["react-flow__nodesselection","react-flow__container",r]),style:{transform:_}},S.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:E=>{Object.prototype.hasOwnProperty.call(Ga,E.key)&&g({x:Ga[E.key].x,y:Ga[E.key].y,isShiftPressed:E.shiftKey})},style:{width:i,height:l,top:p,left:u}}))});const Ig=t=>t.nodesSelectionActive,y_=({children:t,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:u,deleteKeyCode:p,onMove:_,onMoveStart:v,onMoveEnd:g,selectionKeyCode:y,selectionOnDrag:x,selectionMode:C,onSelectionStart:E,onSelectionEnd:I,multiSelectionKeyCode:A,panActivationKeyCode:N,zoomActivationKeyCode:j,elementsSelectable:O,zoomOnScroll:M,zoomOnPinch:U,panOnScroll:Y,panOnScrollSpeed:X,panOnScrollMode:ee,zoomOnDoubleClick:H,panOnDrag:pe,defaultViewport:ie,translateExtent:fe,minZoom:ue,maxZoom:w,preventScrolling:L,onSelectionContextMenu:B,noWheelClassName:J,noPanClassName:ae,disableKeyboardA11y:P})=>{const Q=nt(Ig),re=wc(y),de=wc(N),be=de||pe,ye=de||Y,Me=re||x&&!0!==be;return(({deleteKeyCode:t,multiSelectionKeyCode:r})=>{const n=At(),{deleteElements:o}=Xf(),i=wc(t,fg),l=wc(r);(0,S.useEffect)(()=>{if(i){const{edges:u,getNodes:p}=n.getState(),_=p().filter(g=>g.selected),v=u.filter(g=>g.selected);o({nodes:_,edges:v}),n.setState({nodesSelectionActive:!1})}},[i]),(0,S.useEffect)(()=>{n.setState({multiSelectionActive:l})},[l])})({deleteKeyCode:p,multiSelectionKeyCode:A}),S.createElement(vg,{onMove:_,onMoveStart:v,onMoveEnd:g,onPaneContextMenu:l,elementsSelectable:O,zoomOnScroll:M,zoomOnPinch:U,panOnScroll:ye,panOnScrollSpeed:X,panOnScrollMode:ee,zoomOnDoubleClick:H,panOnDrag:!re&&be,defaultViewport:ie,translateExtent:fe,minZoom:ue,maxZoom:w,zoomActivationKeyCode:j,preventScrolling:L,noWheelClassName:J,noPanClassName:ae},S.createElement(p_,{onSelectionStart:E,onSelectionEnd:I,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:u,panOnDrag:be,isSelecting:!!Me,selectionMode:C},t,Q&&S.createElement(Eg,{onSelectionContextMenu:B,noPanClassName:ae,disableKeyboardA11y:P})))};y_.displayName="FlowRenderer";var Ag=(0,S.memo)(y_);function Fg(t){return{input:Ec(t.input||qm),default:Ec(t.default||Bf),output:Ec(t.output||Jm),group:Ec(t.group||Pf),...Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,l)=>(i[l]=Ec(t[l]||Bf),i),{})}}const jg=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),b_=t=>{const{nodesDraggable:r,nodesConnectable:n,nodesFocusable:o,elementsSelectable:i,updateNodeDimensions:l,onError:u}=nt(jg,Re),p=function Tg(t){return nt((0,S.useCallback)(n=>t?Vm(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}(t.onlyRenderVisibleElements),_=(0,S.useRef)(),v=(0,S.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(y=>{const x=y.map(C=>({id:C.target.getAttribute("data-id"),nodeElement:C.target,forceUpdate:!0}));l(x)});return _.current=g,g},[]);return(0,S.useEffect)(()=>()=>{_?.current?.disconnect()},[]),S.createElement("div",{className:"react-flow__nodes",style:Uf},p.map(g=>{let y=g.type||"default";t.nodeTypes[y]||(u?.("003",Yn.error003(y)),y="default");const x=t.nodeTypes[y]||t.nodeTypes.default,C=!!(g.draggable||r&&typeof g.draggable>"u"),E=!!(g.selectable||i&&typeof g.selectable>"u"),I=!!(g.connectable||n&&typeof g.connectable>"u"),A=!!(g.focusable||o&&typeof g.focusable>"u"),N=t.nodeExtent?Ef(g.positionAbsolute,t.nodeExtent):g.positionAbsolute,j=N?.x??0,O=N?.y??0,M=(({x:t,y:r,width:n,height:o,origin:i})=>n&&o?i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:r}:{x:t-n*i[0],y:r-o*i[1]}:{x:t,y:r})({x:j,y:O,width:g.width??0,height:g.height??0,origin:t.nodeOrigin});return S.createElement(x,{key:g.id,id:g.id,className:g.className,style:g.style,type:y,data:g.data,sourcePosition:g.sourcePosition||Ce.Bottom,targetPosition:g.targetPosition||Ce.Top,hidden:g.hidden,xPos:j,yPos:O,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!g.selected,isDraggable:C,isSelectable:E,isConnectable:I,isFocusable:A,resizeObserver:v,dragHandle:g.dragHandle,zIndex:g[bt]?.z??0,isParent:!!g[bt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!g.width&&!!g.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!g[bt]?.handleBounds})}))};b_.displayName="NodeRenderer";var Mg=(0,S.memo)(b_);const $g=(t,r,n)=>n===Ce.Left?t-r:n===Ce.Right?t+r:t,Gg=(t,r,n)=>n===Ce.Top?t-r:n===Ce.Bottom?t+r:t,x_="react-flow__edgeupdater",C_=({position:t,centerX:r,centerY:n,radius:o=10,onMouseDown:i,onMouseEnter:l,onMouseOut:u,type:p})=>S.createElement("circle",{onMouseDown:i,onMouseEnter:l,onMouseOut:u,className:et([x_,`${x_}-${p}`]),cx:$g(r,o,t),cy:Gg(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),Dg=()=>!0;var Da=t=>{const r=({id:n,className:o,type:i,data:l,onClick:u,onEdgeDoubleClick:p,selected:_,animated:v,label:g,labelStyle:y,labelShowBg:x,labelBgStyle:C,labelBgPadding:E,labelBgBorderRadius:I,style:A,source:N,target:j,sourceX:O,sourceY:M,targetX:U,targetY:Y,sourcePosition:X,targetPosition:ee,elementsSelectable:H,hidden:pe,sourceHandleId:ie,targetHandleId:fe,onContextMenu:ue,onMouseEnter:w,onMouseMove:L,onMouseLeave:B,reconnectRadius:J,onReconnect:ae,onReconnectStart:P,onReconnectEnd:Q,markerEnd:re,markerStart:de,rfId:be,ariaLabel:ye,isFocusable:Me,isReconnectable:Ze,pathOptions:Ke,interactionWidth:at,disableKeyboardA11y:St})=>{const pt=(0,S.useRef)(null),[so,qn]=(0,S.useState)(!1),[ao,Zn]=(0,S.useState)(!1),Dt=At(),Fo=(0,S.useMemo)(()=>`url('#${Gf(de,be)}')`,[de,be]),ft=(0,S.useMemo)(()=>`url('#${Gf(re,be)}')`,[re,be]);if(pe)return null;const jn=kc(n,Dt.getState,p),es=kc(n,Dt.getState,ue),Ac=kc(n,Dt.getState,w),Va=kc(n,Dt.getState,L),za=kc(n,Dt.getState,B),oi=(rn,Ro)=>{if(0!==rn.button)return;const{edges:os,isValidConnection:is}=Dt.getState(),Xa=Ro?j:N,jo=(Ro?fe:ie)||null,rs=Ro?"target":"source",im=is||Dg,rm=Ro,Fc=os.find(ss=>ss.id===n);Zn(!0),P?.(rn,Fc,rs),Xm({event:rn,handleId:jo,nodeId:Xa,onConnect:ss=>ae?.(Fc,ss),isTarget:rm,getState:Dt.getState,setState:Dt.setState,isValidConnection:im,edgeUpdaterType:rs,onReconnectEnd:ss=>{Zn(!1),Q?.(ss,Fc,rs)}})},ns=()=>qn(!0),Pa=()=>qn(!1);return S.createElement("g",{className:et(["react-flow__edge",`react-flow__edge-${i}`,o,{selected:_,animated:v,inactive:!H&&!u,updating:so}]),onClick:rn=>{const{edges:Ro,addSelectedEdges:os,unselectNodesAndEdges:is,multiSelectionActive:Xa}=Dt.getState(),jo=Ro.find(rs=>rs.id===n);jo&&(H&&(Dt.setState({nodesSelectionActive:!1}),jo.selected&&Xa?(is({nodes:[],edges:[jo]}),pt.current?.blur()):os([n])),u&&u(rn,jo))},onDoubleClick:jn,onContextMenu:es,onMouseEnter:Ac,onMouseMove:Va,onMouseLeave:za,onKeyDown:Me?rn=>{if(!St&&wm.includes(rn.key)&&H){const{unselectNodesAndEdges:Ro,addSelectedEdges:os,edges:is}=Dt.getState();"Escape"===rn.key?(pt.current?.blur(),Ro({edges:[is.find(jo=>jo.id===n)]})):os([n])}}:void 0,tabIndex:Me?0:void 0,role:Me?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===ye?void 0:ye||`Edge from ${N} to ${j}`,"aria-describedby":Me?`${t_}-${be}`:void 0,ref:pt},!ao&&S.createElement(t,{id:n,source:N,target:j,selected:_,animated:v,label:g,labelStyle:y,labelShowBg:x,labelBgStyle:C,labelBgPadding:E,labelBgBorderRadius:I,data:l,style:A,sourceX:O,sourceY:M,targetX:U,targetY:Y,sourcePosition:X,targetPosition:ee,sourceHandleId:ie,targetHandleId:fe,markerStart:Fo,markerEnd:ft,pathOptions:Ke,interactionWidth:at}),Ze&&S.createElement(S.Fragment,null,("source"===Ze||!0===Ze)&&S.createElement(C_,{position:X,centerX:O,centerY:M,radius:J,onMouseDown:rn=>oi(rn,!0),onMouseEnter:ns,onMouseOut:Pa,type:"source"}),("target"===Ze||!0===Ze)&&S.createElement(C_,{position:ee,centerX:U,centerY:Y,radius:J,onMouseDown:rn=>oi(rn,!1),onMouseEnter:ns,onMouseOut:Pa,type:"target"})))};return r.displayName="EdgeWrapper",(0,S.memo)(r)};function Og(t){return{default:Da(t.default||Zd),straight:Da(t.bezier||Mf),step:Da(t.step||jf),smoothstep:Da(t.step||Wd),simplebezier:Da(t.simplebezier||Ff),...Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,l)=>(i[l]=Da(t[l]||Zd),i),{})}}function S_(t,r,n=null){const o=(n?.x||0)+r.x,i=(n?.y||0)+r.y,l=n?.width||r.width,u=n?.height||r.height;switch(t){case Ce.Top:return{x:o+l/2,y:i};case Ce.Right:return{x:o+l,y:i+u/2};case Ce.Bottom:return{x:o+l/2,y:i+u};case Ce.Left:return{x:o,y:i+u/2}}}function k_(t,r){return t?1!==t.length&&r?r&&t.find(n=>n.id===r)||null:t[0]:null}function w_(t){const r=t?.[bt]?.handleBounds||null,n=r&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},r,!!n]}const Bg=[{level:0,isMaxLevel:!0,edges:[]}];const N_={[Tf.Arrow]:({color:t="none",strokeWidth:r=1})=>S.createElement("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Tf.ArrowClosed]:({color:t="none",strokeWidth:r=1})=>S.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Hg=({id:t,type:r,color:n,width:o=12.5,height:i=12.5,markerUnits:l="strokeWidth",strokeWidth:u,orient:p="auto-start-reverse"})=>{const _=function Yg(t){const r=At();return(0,S.useMemo)(()=>Object.prototype.hasOwnProperty.call(N_,t)?N_[t]:(r.getState().onError?.("009",Yn.error009(t)),null),[t])}(r);return _?S.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:p,refX:"0",refY:"0"},S.createElement(_,{color:n,strokeWidth:u})):null},E_=({defaultColor:t,rfId:r})=>{const n=nt((0,S.useCallback)((({defaultColor:t,rfId:r})=>n=>{const o=[];return n.edges.reduce((i,l)=>([l.markerStart,l.markerEnd].forEach(u=>{if(u&&"object"==typeof u){const p=Gf(u,r);o.includes(p)||(i.push({id:p,color:u.color||t,...u}),o.push(p))}}),i),[]).sort((i,l)=>i.id.localeCompare(l.id))})({defaultColor:t,rfId:r}),[t,r]),(o,i)=>!(o.length!==i.length||o.some((l,u)=>l.id!==i[u].id)));return S.createElement("defs",null,n.map(o=>S.createElement(Hg,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};E_.displayName="MarkerDefinitions";var qg=(0,S.memo)(E_);const Zg=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),I_=({defaultMarkerColor:t,onlyRenderVisibleElements:r,elevateEdgesOnSelect:n,rfId:o,edgeTypes:i,noPanClassName:l,onEdgeContextMenu:u,onEdgeMouseEnter:p,onEdgeMouseMove:_,onEdgeMouseLeave:v,onEdgeClick:g,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:C,onReconnectEnd:E,reconnectRadius:I,children:A,disableKeyboardA11y:N})=>{const{edgesFocusable:j,edgesUpdatable:O,elementsSelectable:M,width:U,height:Y,connectionMode:X,nodeInternals:ee,onError:H}=nt(Zg,Re),pe=function Lg(t,r,n){const o=nt((0,S.useCallback)(i=>t?i.edges.filter(l=>{const u=r.get(l.source),p=r.get(l.target);return u?.width&&u?.height&&p?.width&&p?.height&&function zg({sourcePos:t,targetPos:r,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:l,width:u,height:p,transform:_}){const v={x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x+n,r.x+i),y2:Math.max(t.y+o,r.y+l)};v.x===v.x2&&(v.x2+=1),v.y===v.y2&&(v.y2+=1);const g=Cc({x:(0-_[0])/_[2],y:(0-_[1])/_[2],width:u/_[2],height:p/_[2]}),y=Math.max(0,Math.min(g.x2,v.x2)-Math.max(g.x,v.x)),x=Math.max(0,Math.min(g.y2,v.y2)-Math.max(g.y,v.y));return Math.ceil(y*x)>0}({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:p.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:p.width,targetHeight:p.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,r]));return function Pg(t,r,n=!1){let o=-1;const i=t.reduce((u,p)=>{const _=Hn(p.zIndex);let v=_?p.zIndex:0;if(n){const g=r.get(p.target),y=r.get(p.source),x=p.selected||g?.selected||y?.selected,C=Math.max(y?.[bt]?.z||0,g?.[bt]?.z||0,1e3);v=(_?p.zIndex:0)+(x?C:0)}return u[v]?u[v].push(p):u[v]=[p],o=v>o?v:o,u},{}),l=Object.entries(i).map(([u,p])=>{const _=+u;return{edges:p,level:_,isMaxLevel:_===o}});return 0===l.length?Bg:l}(o,r,n)}(r,ee,n);return U?S.createElement(S.Fragment,null,pe.map(({level:ie,edges:fe,isMaxLevel:ue})=>S.createElement("svg",{key:ie,style:{zIndex:ie},width:U,height:Y,className:"react-flow__edges react-flow__container"},ue&&S.createElement(qg,{defaultColor:t,rfId:o}),S.createElement("g",null,fe.map(w=>{const[L,B,J]=w_(ee.get(w.source)),[ae,P,Q]=w_(ee.get(w.target));if(!J||!Q)return null;let re=w.type||"default";i[re]||(H?.("011",Yn.error011(re)),re="default");const de=i[re]||i.default,be=X===qr.Strict?P.target:(P.target??[]).concat(P.source??[]),ye=k_(B.source,w.sourceHandle),Me=k_(be,w.targetHandle),Ze=ye?.position||Ce.Bottom,Ke=Me?.position||Ce.Top,at=!!(w.focusable||j&&typeof w.focusable>"u"),St=w.reconnectable||w.updatable,pt=typeof x<"u"&&(St||O&&typeof St>"u");if(!ye||!Me)return H?.("008",Yn.error008(ye,w)),null;const{sourceX:so,sourceY:qn,targetX:ao,targetY:Zn}=((t,r,n,o,i,l)=>{const u=S_(n,t,r),p=S_(l,o,i);return{sourceX:u.x,sourceY:u.y,targetX:p.x,targetY:p.y}})(L,ye,Ze,ae,Me,Ke);return S.createElement(de,{key:w.id,id:w.id,className:et([w.className,l]),type:re,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:so,sourceY:qn,targetX:ao,targetY:Zn,sourcePosition:Ze,targetPosition:Ke,elementsSelectable:M,onContextMenu:u,onMouseEnter:p,onMouseMove:_,onMouseLeave:v,onClick:g,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:C,onReconnectEnd:E,reconnectRadius:I,rfId:o,ariaLabel:w.ariaLabel,isFocusable:at,isReconnectable:pt,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth,disableKeyboardA11y:N})})))),A):null};I_.displayName="EdgeRenderer";var Jg=(0,S.memo)(I_);const Kg=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Qg({children:t}){const r=nt(Kg);return S.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:r}},t)}const t0={[Ce.Left]:Ce.Right,[Ce.Right]:Ce.Left,[Ce.Top]:Ce.Bottom,[Ce.Bottom]:Ce.Top},A_=({nodeId:t,handleType:r,style:n,type:o=Zr.Bezier,CustomComponent:i,connectionStatus:l})=>{const{fromNode:u,handleId:p,toX:_,toY:v,connectionMode:g}=nt((0,S.useCallback)(Y=>({fromNode:Y.nodeInternals.get(t),handleId:Y.connectionHandleId,toX:(Y.connectionPosition.x-Y.transform[0])/Y.transform[2],toY:(Y.connectionPosition.y-Y.transform[1])/Y.transform[2],connectionMode:Y.connectionMode}),[t]),Re),y=u?.[bt]?.handleBounds;let x=y?.[r];if(g===qr.Loose&&(x=x||y?.["source"===r?"target":"source"]),!u||!x)return null;const C=p?x.find(Y=>Y.id===p):x[0],E=C?C.x+C.width/2:(u.width??0)/2,I=C?C.y+C.height/2:u.height??0,A=(u.positionAbsolute?.x??0)+E,N=(u.positionAbsolute?.y??0)+I,j=C?.position,O=j?t0[j]:null;if(!j||!O)return null;if(i)return S.createElement(i,{connectionLineType:o,connectionLineStyle:n,fromNode:u,fromHandle:C,fromX:A,fromY:N,toX:_,toY:v,fromPosition:j,toPosition:O,connectionStatus:l});let M="";const U={sourceX:A,sourceY:N,sourcePosition:j,targetX:_,targetY:v,targetPosition:O};return o===Zr.Bezier?[M]=Mm(U):o===Zr.Step?[M]=Rf({...U,borderRadius:0}):o===Zr.SmoothStep?[M]=Rf(U):o===Zr.SimpleBezier?[M]=Tm(U):M=`M${A},${N} ${_},${v}`,S.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:n})};A_.displayName="ConnectionLine";const n0=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function o0({containerStyle:t,style:r,type:n,component:o}){const{nodeId:i,handleType:l,nodesConnectable:u,width:p,height:_,connectionStatus:v}=nt(n0,Re);return i&&l&&p&&u?S.createElement("svg",{style:t,width:p,height:_,className:"react-flow__edges react-flow__connectionline react-flow__container"},S.createElement("g",{className:et(["react-flow__connection",v])},S.createElement(A_,{nodeId:i,handleType:l,style:r,type:n,CustomComponent:o,connectionStatus:v}))):null}function T_(t,r){return(0,S.useRef)(null),At(),(0,S.useMemo)(()=>r(t),[t])}const F_=({nodeTypes:t,edgeTypes:r,onMove:n,onMoveStart:o,onMoveEnd:i,onInit:l,onNodeClick:u,onEdgeClick:p,onNodeDoubleClick:_,onEdgeDoubleClick:v,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:C,onSelectionContextMenu:E,onSelectionStart:I,onSelectionEnd:A,connectionLineType:N,connectionLineStyle:j,connectionLineComponent:O,connectionLineContainerStyle:M,selectionKeyCode:U,selectionOnDrag:Y,selectionMode:X,multiSelectionKeyCode:ee,panActivationKeyCode:H,zoomActivationKeyCode:pe,deleteKeyCode:ie,onlyRenderVisibleElements:fe,elementsSelectable:ue,selectNodesOnDrag:w,defaultViewport:L,translateExtent:B,minZoom:J,maxZoom:ae,preventScrolling:P,defaultMarkerColor:Q,zoomOnScroll:re,zoomOnPinch:de,panOnScroll:be,panOnScrollSpeed:ye,panOnScrollMode:Me,zoomOnDoubleClick:Ze,panOnDrag:Ke,onPaneClick:at,onPaneMouseEnter:St,onPaneMouseMove:pt,onPaneMouseLeave:so,onPaneScroll:qn,onPaneContextMenu:ao,onEdgeContextMenu:Zn,onEdgeMouseEnter:Dt,onEdgeMouseMove:Fo,onEdgeMouseLeave:ft,onReconnect:ke,onReconnectStart:jn,onReconnectEnd:es,reconnectRadius:Ac,noDragClassName:Va,noWheelClassName:za,noPanClassName:oi,elevateEdgesOnSelect:Ba,disableKeyboardA11y:ts,nodeOrigin:ns,nodeExtent:Pa,rfId:La})=>{const Tc=T_(t,Fg),rn=T_(r,Og);return function e0(t){const r=Xf(),n=(0,S.useRef)(!1);(0,S.useEffect)(()=>{!n.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),n.current=!0)},[t,r.viewportInitialized])}(l),S.createElement(Ag,{onPaneClick:at,onPaneMouseEnter:St,onPaneMouseMove:pt,onPaneMouseLeave:so,onPaneContextMenu:ao,onPaneScroll:qn,deleteKeyCode:ie,selectionKeyCode:U,selectionOnDrag:Y,selectionMode:X,onSelectionStart:I,onSelectionEnd:A,multiSelectionKeyCode:ee,panActivationKeyCode:H,zoomActivationKeyCode:pe,elementsSelectable:ue,onMove:n,onMoveStart:o,onMoveEnd:i,zoomOnScroll:re,zoomOnPinch:de,zoomOnDoubleClick:Ze,panOnScroll:be,panOnScrollSpeed:ye,panOnScrollMode:Me,panOnDrag:Ke,defaultViewport:L,translateExtent:B,minZoom:J,maxZoom:ae,onSelectionContextMenu:E,preventScrolling:P,noDragClassName:Va,noWheelClassName:za,noPanClassName:oi,disableKeyboardA11y:ts},S.createElement(Qg,null,S.createElement(Jg,{edgeTypes:rn,onEdgeClick:p,onEdgeDoubleClick:v,onlyRenderVisibleElements:fe,onEdgeContextMenu:Zn,onEdgeMouseEnter:Dt,onEdgeMouseMove:Fo,onEdgeMouseLeave:ft,onReconnect:ke,onReconnectStart:jn,onReconnectEnd:es,reconnectRadius:Ac,defaultMarkerColor:Q,noPanClassName:oi,elevateEdgesOnSelect:!!Ba,disableKeyboardA11y:ts,rfId:La},S.createElement(o0,{style:j,type:N,component:O,containerStyle:M})),S.createElement("div",{className:"react-flow__edgelabel-renderer"}),S.createElement(Mg,{nodeTypes:Tc,onNodeClick:u,onNodeDoubleClick:_,onNodeMouseEnter:g,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:C,selectNodesOnDrag:w,onlyRenderVisibleElements:fe,noPanClassName:oi,noDragClassName:Va,disableKeyboardA11y:ts,nodeOrigin:ns,nodeExtent:Pa,rfId:La})))};F_.displayName="GraphView";var r0=(0,S.memo)(F_);const Jf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Jf,nodeExtent:Jf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:qr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,r)=>{},isValidConnection:void 0},Kf=({children:t})=>{const r=(0,S.useRef)(null);return r.current||(r.current=(()=>{return t=(t,r)=>({...Yi,setNodes:n=>{const{nodeInternals:o,nodeOrigin:i,elevateNodesOnSelect:l}=r();t({nodeInternals:Lf(n,o,i,l)})},getNodes:()=>Array.from(r().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=r();t({edges:n.map(i=>({...o,...i}))})},setDefaultNodesAndEdges:(n,o)=>{const i=typeof n<"u",l=typeof o<"u",u=i?Lf(n,new Map,r().nodeOrigin,r().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:l?o:[],hasDefaultNodes:i,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:i,fitViewOnInit:l,fitViewOnInitDone:u,fitViewOnInitOptions:p,domNode:_,nodeOrigin:v}=r(),g=_?.querySelector(".react-flow__viewport");if(!g)return;const y=window.getComputedStyle(g),{m22:x}=new window.DOMMatrixReadOnly(y.transform),C=n.reduce((I,A)=>{const N=i.get(A.id);if(N?.hidden)i.set(N.id,{...N,[bt]:{...N[bt],handleBounds:void 0}});else if(N){const j=Nf(A.nodeElement);j.width&&j.height&&(N.width!==j.width||N.height!==j.height||A.forceUpdate)&&(i.set(N.id,{...N,[bt]:{...N[bt],handleBounds:{source:h_(".source",A.nodeElement,x,v),target:h_(".target",A.nodeElement,x,v)}},...j}),I.push({id:N.id,type:"dimensions",dimensions:j}))}return I},[]);r_(i,v);const E=u||l&&!u&&s_(r,{initial:!0,...p});t({nodeInternals:new Map(i),fitViewOnInitDone:E}),C?.length>0&&o?.(C)},updateNodePositions:(n,o=!0,i=!1)=>{const{triggerNodeChanges:l}=r();l(n.map(p=>{const _={id:p.id,type:"position",dragging:i};return o&&(_.positionAbsolute=p.positionAbsolute,_.position=p.position),_}))},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:i,hasDefaultNodes:l,nodeOrigin:u,getNodes:p,elevateNodesOnSelect:_}=r();if(n?.length){if(l){const g=Lf(Yf(n,p()),i,u,_);t({nodeInternals:g})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:i,getNodes:l}=r();let u,p=null;o?u=n.map(_=>Ui(_,!0)):(u=$a(l(),n),p=$a(i,[])),Qd({changedNodes:u,changedEdges:p,get:r,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:i,getNodes:l}=r();let u,p=null;o?u=n.map(_=>Ui(_,!0)):(u=$a(i,n),p=$a(l(),[])),Qd({changedNodes:p,changedEdges:u,get:r,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:i,getNodes:l}=r(),p=o||i;Qd({changedNodes:(n||l()).map(g=>(g.selected=!1,Ui(g.id,!1))),changedEdges:p.map(g=>Ui(g.id,!1)),get:r,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:i}=r();o?.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:i}=r();o?.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{r().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=r();Qd({changedNodes:o().filter(p=>p.selected).map(p=>Ui(p.id,!1)),changedEdges:n.filter(p=>p.selected).map(p=>Ui(p.id,!1)),get:r,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=r();o.forEach(i=>{i.positionAbsolute=Ef(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:i,height:l,d3Zoom:u,d3Selection:p,translateExtent:_}=r();if(!u||!p||!n.x&&!n.y)return!1;const v=je.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),g=[[0,0],[i,l]],y=u?.constrain()(v,g,_);return u.transform(p,y),o[0]!==y.x||o[1]!==y.y||o[2]!==y.k},cancelConnection:()=>t({connectionNodeId:Yi.connectionNodeId,connectionHandleId:Yi.connectionHandleId,connectionHandleType:Yi.connectionHandleType,connectionStatus:Yi.connectionStatus,connectionStartHandle:Yi.connectionStartHandle,connectionEndHandle:Yi.connectionEndHandle}),reset:()=>t({...Yi})}),t?tn(t,Object.is):tn;var t})()),S.createElement(Ah,{value:r.current},t)};Kf.displayName="ReactFlowProvider";const R_=({children:t})=>(0,S.useContext)(Xd)?S.createElement(S.Fragment,null,t):S.createElement(Kf,null,t);R_.displayName="ReactFlowWrapper";const a0={input:qm,default:Bf,output:Jm,group:Pf},l0={default:Zd,straight:Mf,step:jf,smoothstep:Wd,simplebezier:Ff},c0=[0,0],u0=[15,15],d0={x:0,y:0,zoom:1},p0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},j_=(0,S.forwardRef)(({nodes:t,edges:r,defaultNodes:n,defaultEdges:o,className:i,nodeTypes:l=a0,edgeTypes:u=l0,onNodeClick:p,onEdgeClick:_,onInit:v,onMove:g,onMoveStart:y,onMoveEnd:x,onConnect:C,onConnectStart:E,onConnectEnd:I,onClickConnectStart:A,onClickConnectEnd:N,onNodeMouseEnter:j,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:U,onNodeDoubleClick:Y,onNodeDragStart:X,onNodeDrag:ee,onNodeDragStop:H,onNodesDelete:pe,onEdgesDelete:ie,onSelectionChange:fe,onSelectionDragStart:ue,onSelectionDrag:w,onSelectionDragStop:L,onSelectionContextMenu:B,onSelectionStart:J,onSelectionEnd:ae,connectionMode:P=qr.Strict,connectionLineType:Q=Zr.Bezier,connectionLineStyle:re,connectionLineComponent:de,connectionLineContainerStyle:be,deleteKeyCode:ye="Backspace",selectionKeyCode:Me="Shift",selectionOnDrag:Ze=!1,selectionMode:Ke=Hd.Full,panActivationKeyCode:at="Space",multiSelectionKeyCode:St=(Yd()?"Meta":"Control"),zoomActivationKeyCode:pt=(Yd()?"Meta":"Control"),snapToGrid:so=!1,snapGrid:qn=u0,onlyRenderVisibleElements:ao=!1,selectNodesOnDrag:Zn=!0,nodesDraggable:Dt,nodesConnectable:Fo,nodesFocusable:ft,nodeOrigin:ke=c0,edgesFocusable:jn,edgesUpdatable:es,elementsSelectable:Ac,defaultViewport:Va=d0,minZoom:za=.5,maxZoom:oi=2,translateExtent:Ba=Jf,preventScrolling:ts=!0,nodeExtent:ns,defaultMarkerColor:Pa="#b1b1b7",zoomOnScroll:La=!0,zoomOnPinch:Tc=!0,panOnScroll:rn=!1,panOnScrollSpeed:Ro=.5,panOnScrollMode:os=Aa.Free,zoomOnDoubleClick:is=!0,panOnDrag:Xa=!0,onPaneClick:jo,onPaneMouseEnter:rs,onPaneMouseMove:im,onPaneMouseLeave:rm,onPaneScroll:Fc,onPaneContextMenu:sm,children:mh,onEdgeContextMenu:ss,onEdgeDoubleClick:Mx,onEdgeMouseEnter:$x,onEdgeMouseMove:Gx,onEdgeMouseLeave:Dx,onEdgeUpdate:Ox,onEdgeUpdateStart:Vx,onEdgeUpdateEnd:zx,onReconnect:Bx,onReconnectStart:Px,onReconnectEnd:Lx,reconnectRadius:Xx=10,edgeUpdaterRadius:Ux=10,onNodesChange:Yx,onEdgesChange:Hx,noDragClassName:Wx="nodrag",noWheelClassName:qx="nowheel",noPanClassName:_h="nopan",fitView:Zx=!1,fitViewOptions:Jx,connectOnClick:Kx=!0,attributionPosition:Qx,proOptions:eC,defaultEdgeOptions:tC,elevateNodesOnSelect:nC=!0,elevateEdgesOnSelect:oC=!1,disableKeyboardA11y:hh=!1,autoPanOnConnect:iC=!0,autoPanOnNodeDrag:rC=!0,connectionRadius:sC=20,isValidConnection:aC,onError:lC,style:cC,id:gh,nodeDragThreshold:uC,...dC},pC)=>{const am=gh||"1";return S.createElement("div",{...dC,style:{...cC,...p0},ref:pC,className:et(["react-flow",i]),"data-testid":"rf__wrapper",id:gh},S.createElement(R_,null,S.createElement(r0,{onInit:v,onMove:g,onMoveStart:y,onMoveEnd:x,onNodeClick:p,onEdgeClick:_,onNodeMouseEnter:j,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:U,onNodeDoubleClick:Y,nodeTypes:l,edgeTypes:u,connectionLineType:Q,connectionLineStyle:re,connectionLineComponent:de,connectionLineContainerStyle:be,selectionKeyCode:Me,selectionOnDrag:Ze,selectionMode:Ke,deleteKeyCode:ye,multiSelectionKeyCode:St,panActivationKeyCode:at,zoomActivationKeyCode:pt,onlyRenderVisibleElements:ao,selectNodesOnDrag:Zn,defaultViewport:Va,translateExtent:Ba,minZoom:za,maxZoom:oi,preventScrolling:ts,zoomOnScroll:La,zoomOnPinch:Tc,zoomOnDoubleClick:is,panOnScroll:rn,panOnScrollSpeed:Ro,panOnScrollMode:os,panOnDrag:Xa,onPaneClick:jo,onPaneMouseEnter:rs,onPaneMouseMove:im,onPaneMouseLeave:rm,onPaneScroll:Fc,onPaneContextMenu:sm,onSelectionContextMenu:B,onSelectionStart:J,onSelectionEnd:ae,onEdgeContextMenu:ss,onEdgeDoubleClick:Mx,onEdgeMouseEnter:$x,onEdgeMouseMove:Gx,onEdgeMouseLeave:Dx,onReconnect:Bx??Ox,onReconnectStart:Px??Vx,onReconnectEnd:Lx??zx,reconnectRadius:Xx??Ux,defaultMarkerColor:Pa,noDragClassName:Wx,noWheelClassName:qx,noPanClassName:_h,elevateEdgesOnSelect:oC,rfId:am,disableKeyboardA11y:hh,nodeOrigin:ke,nodeExtent:ns}),S.createElement(ng,{nodes:t,edges:r,defaultNodes:n,defaultEdges:o,onConnect:C,onConnectStart:E,onConnectEnd:I,onClickConnectStart:A,onClickConnectEnd:N,nodesDraggable:Dt,nodesConnectable:Fo,nodesFocusable:ft,edgesFocusable:jn,edgesUpdatable:es,elementsSelectable:Ac,elevateNodesOnSelect:nC,minZoom:za,maxZoom:oi,nodeExtent:ns,onNodesChange:Yx,onEdgesChange:Hx,snapToGrid:so,snapGrid:qn,connectionMode:P,translateExtent:Ba,connectOnClick:Kx,defaultEdgeOptions:tC,fitView:Zx,fitViewOptions:Jx,onNodesDelete:pe,onEdgesDelete:ie,onNodeDragStart:X,onNodeDrag:ee,onNodeDragStop:H,onSelectionDrag:w,onSelectionDragStart:ue,onSelectionDragStop:L,noPanClassName:_h,nodeOrigin:ke,rfId:am,autoPanOnConnect:iC,autoPanOnNodeDrag:rC,onError:lC,connectionRadius:sC,isValidConnection:aC,nodeDragThreshold:uC}),S.createElement(eg,{onSelectionChange:fe}),mh,S.createElement(Fh,{proOptions:eC,position:Qx}),S.createElement(ag,{rfId:am,disableKeyboardA11y:hh})))});function M_(t){return r=>{const[n,o]=(0,S.useState)(r),i=(0,S.useCallback)(l=>o(u=>t(l,u)),[]);return[n,o,i]}}j_.displayName="ReactFlow",M_(Yf),M_(d_);var Hi=le(1810),y0=le(3726),$_=le(8405);const b0=["editorContainer"];let D_,G_=!1,x0=(()=>{var t;class r{set insideNg(o){this._insideNg=o,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(o){(0,f.A)(this,"config",void 0),(0,f.A)(this,"_editorContainer",void 0),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"_editor",void 0),(0,f.A)(this,"_options",void 0),(0,f.A)(this,"_autoHeight",!1),(0,f.A)(this,"_height",200),(0,f.A)(this,"_windowResizeSubscription",void 0),(0,f.A)(this,"_insideNg",!1),this.config=o}ngAfterViewInit(){G_?D_.then(()=>{this.initMonaco(this._options,this.insideNg)}):(G_=!0,D_=new Promise(o=>{const i=this.config.baseUrl??"./ai-mod-assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void o();const l=u=>{let p=u||window.require,_={paths:{vs:`${i}/monaco/min/vs`}};Object.assign(_,this.config.requireConfig??{}),p.config(_),p(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),o()})};if(this.config.monacoRequire)l(this.config.monacoRequire);else if(window.require)if(window.require.config)l();else{let u=`${i}/monaco/min/vs/loader.js`,p=new XMLHttpRequest;p.addEventListener("load",()=>{let _=document.createElement("script");_.type="text/javascript",_.text=["var nodeRequire = require;",p.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join("\n"),document.body.appendChild(_),l(window.monacoAmdRequire)}),p.open("GET",u),p.send()}else{const u=document.createElement("script");u.type="text/javascript",u.src=`${i}/monaco/min/vs/loader.js`,u.addEventListener("load",()=>{l()}),document.body.appendChild(u)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU($_.R))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(o,i){if(1&o&&e.GBs(b0,7),2&o){let l;e.mGM(l=e.lsd())&&(i._editorContainer=l.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(o,i){},encapsulation:2})),r})();class O_{static init(r){r.languages.register({id:"demo"}),r.languages.setMonarchTokensProvider("demo",{tokenizer:{root:[[/\{([\[\]a-zA-Z0-9|#$._-]+)\}/,"custom-var"],[/"[^"]+"/,"custom-string"],[/'[^']+'/,"custom-string"],[/`[^`]+`/,"custom-string"],[/^\*\*[A-Z_]+:\s*$/,"custom-keyword"],[/^##.*/,"custom-bold"]]}}),r.languages.setLanguageConfiguration("demo",{brackets:[["{","}"]]}),r.editor.defineTheme("myCoolTheme",{base:"vs",inherit:!0,rules:[{token:"custom-var",foreground:"a31515"},{token:"custom-string",foreground:"a31515"},{token:"custom-keyword",foreground:"516eff"},{token:"custom-bold",fontStyle:"bold"}],colors:{"editor.foreground":"#000000"}}),r.languages.registerDocumentRangeFormattingEditProvider("demo",{provideDocumentRangeFormattingEdits:function(n,o){const i=n.getValueInRange(o);return[{range:o,text:JSON.stringify(JSON.parse(i),void 0,4)}]}})}static initSuggestion(r,n,o){r.languages.registerCompletionItemProvider(n,{triggerCharacters:["."],provideCompletionItems:(i,l)=>{let u=i.getWordUntilPosition(l),_=i.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}).split("\n"),v=_.filter(A=>A.indexOf('*for="')>=0),g=v.length>0?v[v.length-1]:"",y=_[_.length-1].split(/[^_#$\[\].0-9a-zA-Z-]/g),x=y[y.length-1].replaceAll("{","").replaceAll("}",""),C={startLineNumber:l.lineNumber,endLineNumber:l.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn},E=x.split("."),I=[];if(1==E.length){if(I=o.map(A=>({label:A.name,kind:r.languages.CompletionItemKind.Text,insertText:A.name,range:C})),g){let A=g.split('*for="')[1].split(" "),N="let"==A[0]?A[1]:A[0];I.push({label:N,kind:r.languages.CompletionItemKind.Text,insertText:N,range:C})}}else{if(g){let N=g.split('*for="')[1].split(" of ")[1].split('"')[0].replaceAll("{","").replaceAll("}","").trim(),j=g.split('*for="')[1].split(" "),O="let"==j[0]?j[1]:j[0];if(E[0].trim()==O.trim()){let M=[...N.split(".")];E.splice(0,1),M.push(...E),E=M}}let A=o.find(N=>N.name==E[0]);if(A&&"json"==A.type){let N=JSON.parse(A.demo);for(let O=1;O<E.length-1;O++)N=N[E[O]];I=lt.extractProperties(N,1).map(O=>({label:O.name,kind:r.languages.CompletionItemKind.Text,insertText:O.name,range:C}))}}return{suggestions:lt.distinctArray(I)}}})}}let Qf=(()=>{var t;class r extends x0{set options(o){this._options={...this.config.defaultOptions,...o},this._editor&&(this._editor.dispose(),this.initMonaco(o,this.insideNg))}set autoHeight(o){this._autoHeight=o}set height(o){this._height=o}get options(){return this._options}set model(o){this.options.model=o,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(o,i){super(i),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"editorConfig",void 0),(0,f.A)(this,"_value",""),(0,f.A)(this,"propagateChange",l=>{}),(0,f.A)(this,"onTouched",()=>{}),(0,f.A)(this,"resizeObserver",new ResizeObserver(()=>{this._editor&&this._editor.layout()})),(0,f.A)(this,"vars",[]),(0,f.A)(this,"onChange",new e.bkB),(0,f.A)(this,"onFocus",new e.bkB),this.zone=o,this.editorConfig=i}writeValue(o){this._value=o||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}formatCode(){this._editor.getAction("editor.action.formatDocument").run()}registerOnChange(o){this.propagateChange=o}registerOnTouched(o){this.onTouched=o}focus(){this._editor?.focus()}insertText(o){this._editor.executeEdits("my-source",[{range:this._editor.getSelection(),text:o}])}getSelected(){let o=this._editor.getSelection();return this._editor.getModel().getValueInRange(o)}initMonaco(o,i){0==monaco.languages.getLanguages().filter(u=>"demo"==u.id).length&&O_.init(monaco),this.vars.length>0&&O_.initSuggestion(monaco,this.options.language,this.vars);const l=!!o.model;if(l){const u=monaco.editor.getModel(o.model.uri||"");u?(o.model=u,o.model.setValue(this._value)):o.model=monaco.editor.createModel(o.model.value,o.model.language,o.model.uri)}this._editorContainer&&(this._editorContainer.nativeElement.parentNode.style.height=this._height+"px"),i?this._editor=monaco.editor.create(this._editorContainer?.nativeElement,o):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer?.nativeElement,o)}),l||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(u=>{const p=this._editor.getValue();this.zone.run(()=>{this.propagateChange(p),this._value=p,this.onChange.emit(p)})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._editor.onDidFocusEditorText(()=>{this.onFocus.emit(this)}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,y0.R)(window,"resize").subscribe(()=>this._editor.layout()),this.resizeObserver.observe(this._editorContainer?.nativeElement),this._editor.onDidContentSizeChange(u=>{let p=Math.max(this._height,u.contentHeight);this._editorContainer&&this._autoHeight&&(this._editorContainer.nativeElement.parentNode.style.height=p+15+"px")}),setTimeout(()=>{this._editor.focus(),this._editor.setPosition({column:1,lineNumber:2})},200),this.onInit.emit(this._editor)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU($_.R))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",autoHeight:"autoHeight",height:"height",model:"model",vars:"vars"},outputs:{onChange:"onChange",onFocus:"onFocus"},standalone:!0,features:[e.Jv_([{provide:G.kq,useExisting:(0,e.Rfq)(()=>t),multi:!0}]),e.Vt3,e.aNF],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(o,i){1&o&&e.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]})),r})(),C0=(()=>{var t;class r{constructor(){(0,f.A)(this,"data",""),(0,f.A)(this,"editorConf",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0}),(0,f.A)(this,"onChange",new e.bkB)}change(){this.onChange.emit(this.data)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-json-editor"]],inputs:{data:"data"},outputs:{onChange:"onChange"},standalone:!0,features:[e.aNF],decls:3,vars:4,consts:[["editor",""],[1,"card","shadow-none","bg-transparent","border","border-label-secondary","ps-0","pt-4","pe-4","pb-4"],[1,"my-code-editor",3,"onChange","ngModelChange","height","autoHeight","options","ngModel"]],template:function(o,i){if(1&o){const l=e.RV6();e.j41(0,"div",1)(1,"ngx-monaco-editor",2,0),e.bIt("onChange",function(){return e.eBV(l),e.Njj(i.change())}),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(i.data,p)||(i.data=p),e.Njj(p)}),e.k0s()()}2&o&&(e.R7$(),e.Y8G("height",200)("autoHeight",!0)("options",i.editorConf),e.R50("ngModel",i.data))},dependencies:[Hi.V,Qf,V.MD,G.YN,G.BC,G.vS]})),r})();var S0=le(2663);function em(t){if(!tm(t))throw new Error("Parameter was not an error")}function tm(t){return!!t&&"object"==typeof t&&"[object Error]"===function k0(t){return Object.prototype.toString.call(t)}(t)||t instanceof Error}class Ao extends Error{constructor(r,n){const o=[...arguments],{options:i,shortMessage:l}=function N0(t){let r,n="";if(0===t.length)r={};else if(tm(t[0]))r={cause:t[0]},n=t.slice(1).join(" ")||"";else if(t[0]&&"object"==typeof t[0])r=Object.assign({},t[0]),n=t.slice(1).join(" ")||"";else{if("string"!=typeof t[0])throw new Error("Invalid arguments passed to Layerr");r={},n=n=t.join(" ")||""}return{options:r,shortMessage:n}}(o);let u=l;i.cause&&(u=`${u}: ${i.cause.message}`),super(u),this.message=u,this.name=i.name&&"string"==typeof i.name?i.name:"Layerr",i.cause&&Object.defineProperty(this,"_cause",{value:i.cause}),Object.defineProperty(this,"_info",{value:{}}),i.info&&"object"==typeof i.info&&Object.assign(this._info,i.info),Error.captureStackTrace&&Error.captureStackTrace(this,i.constructorOpt||this.constructor)}static cause(r){return em(r),r._cause&&tm(r._cause)?r._cause:null}static fullStack(r){em(r);const n=Ao.cause(r);return n?`${r.stack}\ncaused by: ${Ao.fullStack(n)}`:r.stack??""}static info(r){em(r);const n={},o=Ao.cause(r);return o&&Object.assign(n,Ao.info(o)),r._info&&Object.assign(n,r._info),n}toString(){let r=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(r=`${r}: ${this.message}`),r}}const Kr="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Qr=32,nm=0xffffffffffff,Wn=Object.freeze({source:"ulid"});function M0(t){let r=Math.floor(t()*Qr);return r===Qr&&(r=Qr-1),Kr.charAt(r)}var G0=le(4412);let D0=(()=>{var t;class r extends G0.t{constructor(){super("light"),this.subscribe(o=>{!o||"undefined"==o||(document.body.classList.contains("dark")&&"light"==o&&document.body.classList.remove("dark"),document.body.classList.contains("light")&&"dark"==o&&document.body.classList.remove("light"),document.body.classList.add(o))})}setTheme(o){this.next(o)}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),U_=(()=>{var t;class r{constructor(o,i,l){(0,f.A)(this,"ngContainer",void 0),(0,f.A)(this,"ngTheme",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"ngReactComponent",void 0),(0,f.A)(this,"_root",void 0),(0,f.A)(this,"theme",void 0),(0,f.A)(this,"ngSubscriptions",void 0),this.ngContainer=o,this.ngTheme=i,this.ngZone=l,this.ngSubscriptions=[this.ngTheme.subscribe(u=>{this.theme=u,this.ngOnChanges()})]}ngOnInit(){if(!this.ngReactComponent)throw console.error("NO"),new Error("ReactMagicWrapperComponent cannot start without a provided ngReactComponent!")}ngOnChanges(o){this._render()}ngAfterViewInit(){this._render()}ngOnDestroy(){this._root.unmount(),this.ngSubscriptions.forEach(o=>o.unsubscribe())}_render(){this.ngReactComponent?this.ngZone.runOutsideAngular(()=>{try{this._root||(this._root=(0,S0.H)(this.ngContainer.element.nativeElement));const o=Object.keys(this).filter(p=>!/^(?:_|ng)/.test(p)),i=o.filter(p=>!p.startsWith("on")),l=o.filter(p=>p.startsWith("on")),u={};i.forEach(p=>u[p]=this[p]),this.ngZone.runGuarded(()=>{l.forEach(p=>u[p]=(..._)=>this[p].next(_))}),this._root.render(S.createElement(this.ngReactComponent,{props:u}))}catch(o){console.error(o)}}):console.log("Render no component. May be context issue")}}return t=r,(0,f.A)(r,"WrapAngularComponent",({component:n,appRef:o,injector:i,ngZone:l,staticInputs:u,staticOutputs:p,additionalChildren:_})=>S.memo(v=>{const g=function $0(t,r){const n=r||function P_(t){const r=t||function F0(){return function j0(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}(),n=r&&(r.crypto||r.msCrypto)||null;if("function"==typeof n?.getRandomValues)return()=>{const o=new Uint8Array(1);return n.getRandomValues(o),o[0]/255};if("function"==typeof n?.randomBytes)return()=>n.randomBytes(1).readUInt8()/255;throw new Ao({info:{code:"PRNG_DETECT",...Wn}},"Failed to find a reliable PRNG")}();return function om(t,r){if(isNaN(t))throw new Ao({info:{code:"ENC_TIME_NAN",...Wn}},`Time must be a number: ${t}`);if(t>nm)throw new Ao({info:{code:"ENC_TIME_SIZE_EXCEED",...Wn}},`Cannot encode a time larger than ${nm}: ${t}`);if(t<0)throw new Ao({info:{code:"ENC_TIME_NEG",...Wn}},`Time must be positive: ${t}`);if(!1===Number.isInteger(t))throw new Ao({info:{code:"ENC_TIME_TYPE",...Wn}},`Time must be an integer: ${t}`);let n,o="";for(let i=r;i>0;i--)n=t%Qr,o=Kr.charAt(n)+o,t=(t-n)/Qr;return o}(isNaN(t)?Date.now():t,10)+function L_(t,r){let n="";for(;t>0;t--)n=M0(r)+n;return n}(16,n)}();return S.useEffect(()=>{try{const y=(0,e.a0P)(n,{environmentInjector:o.injector,elementInjector:i,hostElement:document.getElementById(g)??void 0});o.attachView(y.hostView),Object.assign(u,v);const{inputs:x,outputs:C}=n.\u0275cmp;Object.entries(x).filter(([j,O])=>y.instance[O]!=u[j]).forEach(([j,O])=>{u.hasOwnProperty(j)&&(y.instance[O]=u[j])});const I={};Object.entries(C).filter(([j,O])=>!I[j]).forEach(([j,O])=>{if(!p.hasOwnProperty(j))return;const U=p,Y=y.instance[O].subscribe((...X)=>{l.run(()=>{U[j](...X)})});I[j]=Y});const N=y.onDestroy?.bind(y);y.onDestroy=j=>{Object.values(I).forEach(O=>O.unsubscribe()),N?.(j)},y.changeDetectorRef.detectChanges()}catch(y){console.error(y)}},[]),S.createElement("div",{},S.createElement("div",{id:g}),..._)})),(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.c1b),e.rXU(D0),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-react-magic-wrapper"]],standalone:!0,features:[e.OA$,e.aNF],decls:0,vars:0,template:function(o,i){},encapsulation:2})),r})(),Lt=(()=>{var t;class r{set data(o){this.nodeData=o}noticeUpdate(){this.updateOutput(),this.onDataChange.emit(this.nodeData)}constructor(o,i){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"id",""),(0,f.A)(this,"displayName",void 0),(0,f.A)(this,"type","base"),(0,f.A)(this,"desc",""),(0,f.A)(this,"err",""),(0,f.A)(this,"mode",""),(0,f.A)(this,"onDataChange",new e.bkB),(0,f.A)(this,"settingConf",void 0),this.ngZone=o,this.appService=i}ngOnInit(){this.updateOutput()}ngDoCheck(){}ngAfterViewInit(){let o=document.getElementById("settingModal-"+this.id);o&&(o.parentNode?.removeChild(o),document.body.appendChild(o),this.upgradeConf())}upgradeConf(){let o=this.getConfig();for(let i of o){let l=this.nodeData.conf.find(u=>u.key==i.key);l&&(i.value=l.value)}this.nodeData.conf=o}updateOutput(){}focusSettingModal(){let o=document.getElementById("settingModal-"+this.id);o&&o.querySelector(".form-control")?.focus()}openModal(o){let i=document.getElementById(o);if(i){let l=i.getAttribute("data-bs-target")?.substring(1)??"",u=document.getElementById(l);u&&(u.querySelectorAll(".content").forEach(p=>{p.classList.remove("content")}),setTimeout(()=>{u.querySelectorAll('[data-bs-dismiss="modal"]').forEach(p=>{p.addEventListener("click",()=>{u.classList.remove("show")})})},400),u.classList.add("show")),i.click()}}openSetting(o){this.ngZone?.run(()=>{o&&(this.settingConf=this.nodeData.conf.filter(i=>i.key==o)[0]??{key:o,value:""})}),this.openModal("btnShowModal-"+this.id)}closeSetting(){this.settingConf=void 0}getClassType(){return r}build(o,i,l,u){return U_.WrapAngularComponent({component:this.getClassType(),appRef:o,injector:i,ngZone:l,staticInputs:{},staticOutputs:{onDataChange:p=>{u(p)}},additionalChildren:[S.createElement(Fa,{type:"target",position:Ce.Left}),S.createElement(Fa,{type:"source",position:Ce.Right})]})}getConfig(){return[]}setConfig(o,i){let l=this.nodeData.conf.filter(u=>u.key==o)[0];l?l.value=i:this.nodeData.conf.push({key:o,value:i}),this.noticeUpdate()}findConfig(o,i){return i||(i=this.nodeData),i.conf.filter(u=>u.key==o)[0]?.value??""}getNodeSpec(){return{id:"",type:this.type,desc:this.desc,displayName:this.displayName,conf:this.getConfig(),links:[],inputs:[],outputs:[]}}run(o,i,l,u,p,_){_(new Map)}parseTempate(o,i){let l=o.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g);for(let u of l){let p=i.get(u[1]);p?"string"==typeof p?o=o.replaceAll(u[0],p??""):p instanceof File&&(o=o.replaceAll(u[0],"Filename: "+p.name)):o=o.replaceAll(u[0],"")}return o}setupOutputValue(o,i){let l=new Map;for(let u of i.outputs)l.set(u.name,o);return l}showAddCollectionModal(){this.openModal("btnShowAddCollectionModal")}showAddVCollectionModal(){this.openModal("btnShowAddVCollectionModal")}showAddApiModal(){this.openModal("btnShowAddApiModal")}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-base-node"]],inputs:{data:"data",id:"id",mode:"mode"},outputs:{onDataChange:"onDataChange"},standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(o,i){}})),r})();const O0=[{name:"Markdown View",html:' bs-data="markdown-view"'},{name:"Loop",html:' *for="item of listVars"'},{name:"Selectable",html:' bs-select="img.src=>selectedImgs"'},{name:"Run JS",html:' bs-run="varName"'}],V0=["editor"];function z0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertUserInterface(i))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.ZvI("bx bx-",n.icon," scaleX-n1-rtl mr-2"),e.R7$(),e.SpI(" ",n.name," ")}}function B0(t,r){if(1&t&&(e.j41(0,"div",7)(1,"button",8),e.nrm(2,"span",22),e.EFF(3," User interface "),e.k0s(),e.j41(4,"mat-menu",null,3)(6,"div",10)(7,"ul",11),e.DNE(8,z0,4,4,"li",12),e.k0s()()()()),2&t){const n=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",o.userInterfaces)}}function P0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertAttr(i))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function L0(t,r){if(1&t&&(e.j41(0,"div",7)(1,"button",8),e.nrm(2,"span",22),e.EFF(3," Html Attributes "),e.k0s(),e.j41(4,"mat-menu",null,4)(6,"div",10)(7,"ul",11),e.DNE(8,P0,3,1,"li",12),e.k0s()()()()),2&t){const n=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",o.htmlAttrs)}}function X0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",24),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertInputVar(i))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(),e.ZvI("ms-",n.level," dropdown-item d-flex align-items-center"),e.FS9("title",n.demo),e.R7$(),e.SpI(" ",n.name," ")}}function U0(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertKey(i))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.key," ")}}function Y0(t,r){if(1&t&&(e.j41(0,"div",25),e.nrm(1,"div",26),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("innerHTML",n.inputStr,e.npT)}}function H0(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.genWithAI())}),e.nrm(1,"i",28),e.EFF(2),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.isLoading),e.R7$(2),e.SpI(" ",n.isLoading?"Generating...":"Generate with AI"," ")}}let Wt=(()=>{var t;class r extends br{constructor(o,i,l){super(),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"userInterfaces",[]),(0,f.A)(this,"htmlAttrs",O0),(0,f.A)(this,"editor",void 0),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"html",!1),(0,f.A)(this,"agentName",""),(0,f.A)(this,"editorConf",void 0),(0,f.A)(this,"varBtnLabel","Input Variables"),(0,f.A)(this,"onClose",new e.bkB),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"queue",[]),(0,f.A)(this,"varFormat","{@@}"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"lstVars",[]),(0,f.A)(this,"textData",""),this.appService=o,this.aiApi=i,this.zone=l}save(){this.textData=this.inputStr,this.onSave.emit(this.inputStr)}close(){this.inputStr=this.textData,this.onClose.emit()}genWithAI(){if(!this.isLoading){if(this.isLoading=!0,this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr),this.inputStr="",this.html){let o=JSON.stringify(this.lstVars.map(i=>i.name.trim()));this.agentRunner.setVars(["vars::"+o])}this.agentRunner.send(),this.editor?.focus()}}onMsgUpdate(o,i){let l=i?i.length:0,u=0;for(;u<l;){const p=Math.floor(9*Math.random())+2,_=Math.floor(16*Math.random())+5;this.queue.push({str:i.substring(u,u+p),t:_}),0==u&&1==this.queue.length&&this.startInsertAnim(),u+=p}}startInsertAnim(){let o=this.queue.shift();o&&(this.editor?.insertText(o.str),setTimeout(()=>{this.startInsertAnim()},o.t))}onDone(o){this.zone.run(()=>{this.isLoading=!1})}insertInputVar(o){o.name.startsWith("*")?(this.editor?.insertText(o.demo),this.editor?.formatCode()):this.editor?.insertText(this.varFormat.replaceAll("@@",o.name)),this.editor?.focus()}insertAttr(o){this.editor?.insertText(o.html),this.editor?.focus()}insertKey(o){this.editor?.insertText("{"+o.key+"}"),this.editor?.focus()}insertUserInterface(o){this.editor?.insertText(o.html),this.editor?.focus()}loadConf(){this.appService.getConf("app-ui-interfaces").subscribe(o=>{let i=o.data.split("====");this.userInterfaces=[];for(let l of i){if(""==l.trim())continue;let u=l.trim().split("\n"),p=u[0],_=u[1];u.splice(0,2);let v=u.join("\n");this.userInterfaces.push({name:p,icon:_,html:v})}})}loadKeys(){this.appService?.listKeys().subscribe(o=>{this.lstKeys=o})}ngOnInit(){this.agentRunner=new _i(this.aiApi,this),this.agentRunner.setAgentName(this.agentName),this.loadConf(),this.loadKeys(),this.textData=this.inputStr,this.editorConf={theme:"myCoolTheme",language:this.html?"html":"demo",wordWrap:this.html?"off":"on",lineNumbers:this.html?"on":"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0};for(let o of this.vars){if(this.lstVars.push({name:o.name,level:0,demo:o.demo}),"json"==o.type){let l=lt.extractProperties(JSON.parse(o.demo),1);for(let u of l)this.lstVars.push({name:o.name+"."+u.name,level:u.level,demo:""})}o.type.endsWith("[]")&&this.lstVars.push({name:`*for="item of ${o.name}"`,level:0,demo:`<div class="box mb-3" *for="item of ${o.name}">\n    <div class="box-body">\n        <p class="box-text">\n            {item}\n        </p>\n    </div>\n</div>`})}}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(mn),e.rXU(si),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-input-format"]],viewQuery:function(o,i){if(1&o&&e.GBs(V0,5),2&o){let l;e.mGM(l=e.lsd())&&(i.editor=l.first)}},inputs:{inputStr:"inputStr",vars:"vars",html:"html",agentName:"agentName",varBtnLabel:"varBtnLabel",varFormat:"varFormat"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:17,consts:[["menu3",""],["menu4",""],["editor",""],["menu1",""],["menu2",""],[1,"mb-3"],["class","btn-group mr-3",4,"ngIf"],[1,"btn-group","mr-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","p-0",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-18px","mr-1"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[2,"max-height","550px","overflow-y","auto","overflow-x","hidden"],[1,"col-span-2"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","vars","height","autoHeight","options","ngModel"],["class","col-lg-4 p-3 rounded",4,"ngIf"],[1,"mt-3","text-end"],["type","button","class","btn btn-text-primary mr-3","title","Enter what do you want your agent do and click this button",3,"disabled","click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"tf-icons","bx","bx-tv","bx-18px","mr-1"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],["href","javascript:void(0);",3,"click","title"],[1,"col-lg-4","p-3","rounded"],[3,"innerHTML"],["type","button","title","Enter what do you want your agent do and click this button",1,"btn","btn-text-primary","mr-3",3,"click","disabled"],[1,"bx","bxs-magic-wand","mr-2"]],template:function(o,i){if(1&o){const l=e.RV6();e.j41(0,"div")(1,"div",5),e.DNE(2,B0,9,2,"div",6)(3,L0,9,2,"div",6),e.j41(4,"div",7)(5,"button",8),e.nrm(6,"span",9),e.EFF(7),e.k0s(),e.j41(8,"mat-menu",null,0)(10,"div",10)(11,"ul",11),e.DNE(12,X0,3,5,"li",12),e.k0s()()()(),e.j41(13,"div",7)(14,"button",8),e.nrm(15,"span",9),e.EFF(16," Access Keys "),e.k0s(),e.j41(17,"mat-menu",null,1)(19,"div",10)(20,"ul",11),e.DNE(21,U0,3,1,"li",12),e.k0s()()()()(),e.j41(22,"div",13)(23,"div",14)(24,"div",15)(25,"ngx-monaco-editor",16,2),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(i.inputStr,p)||(i.inputStr=p),e.Njj(p)}),e.k0s()()(),e.DNE(27,Y0,2,1,"div",17),e.k0s(),e.j41(28,"div",18),e.DNE(29,H0,3,2,"button",19),e.j41(30,"button",20),e.bIt("click",function(){return e.eBV(l),e.Njj(i.close())}),e.EFF(31,"Close"),e.k0s(),e.j41(32,"button",21),e.bIt("click",function(){return e.eBV(l),e.Njj(i.save())}),e.EFF(33," Save "),e.k0s()()()}if(2&o){const l=e.sdS(9),u=e.sdS(18);e.R7$(2),e.Y8G("ngIf",i.html),e.R7$(),e.Y8G("ngIf",i.html),e.R7$(2),e.Y8G("matMenuTriggerFor",l),e.R7$(2),e.SpI(" ",i.varBtnLabel," "),e.R7$(5),e.Y8G("ngForOf",i.lstVars),e.R7$(2),e.Y8G("matMenuTriggerFor",u),e.R7$(7),e.Y8G("ngForOf",i.lstKeys),e.R7$(),e.ZvI("grid grid-cols-",i.html?"3":"1"," gap-1"),e.R7$(3),e.Y8G("vars",i.vars)("height",450)("autoHeight",!0)("options",i.editorConf),e.R50("ngModel",i.inputStr),e.R7$(2),e.Y8G("ngIf",i.html),e.R7$(2),e.Y8G("ngIf",i.agentName)}},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.BC,G.vS,Hi.V,Qf,Le.Cn,Le.kk,Le.Cp],styles:[".zoom-out-80[_ngcontent-%COMP%]{transform:scale(.8)}"]})),r})();function W0(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function q0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Z0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add url "),e.k0s()()}}function J0(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Url "),e.k0s(),e.DNE(3,q0,3,5,"div",20)(4,Z0,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function K0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Q0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add headers "),e.k0s()()}}function e1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Headers "),e.k0s(),e.DNE(3,K0,3,5,"div",20)(4,Q0,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function t1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Method "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function n1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function o1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add body "),e.k0s()()}}function r1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Request body "),e.k0s(),e.DNE(3,n1,3,5,"div",20)(4,o1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function s1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function a1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add specs "),e.k0s()()}}function l1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Response specs "),e.k0s(),e.DNE(3,s1,3,5,"div",20)(4,a1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function c1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function u1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function d1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Check success "),e.k0s(),e.DNE(3,c1,3,5,"div",20)(4,u1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function p1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function f1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function m1(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat until "),e.k0s(),e.DNE(3,p1,3,5,"div",20)(4,f1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function _1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat timeout (second) "),e.k0s(),e.j41(3,"input",26),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function h1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,J0,5,2,"div",17)(2,e1,5,2,"div",17)(3,t1,4,1,"div",17)(4,r1,5,2,"div",17)(5,l1,5,2,"div",17)(6,d1,5,2,"div",17)(7,m1,5,2,"div",17)(8,_1,4,1,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","headers"==n.key),e.R7$(),e.Y8G("ngIf","method"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key),e.R7$(),e.Y8G("ngIf","response"==n.key),e.R7$(),e.Y8G("ngIf","check"==n.key),e.R7$(),e.Y8G("ngIf","repeat"==n.key),e.R7$(),e.Y8G("ngIf","wait"==n.key)}}function g1(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function v1(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,g1,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function y1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function b1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function x1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function C1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function S1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function k1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Y_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"headers",[{key:"User-Agent",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:127.0) Gecko/20100101 Firefox/127.0"},{key:"Cookie",value:""},{key:"Authorization",value:""}]),(0,f.A)(this,"type","apiInvoker"),(0,f.A)(this,"desc","Invoke external api")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"headers",value:this.headers.map(i=>i.key+": "+i.value).join("\n")},{key:"method",value:"POST"},{key:"body",value:""},{key:"check",value:""},{key:"repeat",value:""},{key:"wait",value:"180"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-data",type:"json",demo:"{}"}]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}run(o,i,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-api-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:23,vars:15,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Time in second",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,W0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,h1,9,8,"div",5),e.k0s()(),e.DNE(8,v1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,y1,1,2,"app-input-format",14)(18,b1,1,2,"app-input-format",14)(19,x1,1,2,"app-input-format",14)(20,C1,1,2,"app-input-format",14)(21,S1,1,2,"app-input-format",14)(22,k1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","headers"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","body"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","response"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","repeat"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","check"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","url"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.me,G.BC,G.vS,Ct,Wt]})),r})();function w1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function N1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function E1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function I1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,N1,3,5,"div",21)(4,E1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function A1(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function T1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Voice Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.bIt("change",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.playAu(i))}),e.DNE(4,A1,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.value)}}function F1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",28),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.j41(4,"option",29),e.EFF(5,"tts-1"),e.k0s(),e.j41(6,"option",30),e.EFF(7,"tts-1-hd"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function R1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,I1,5,2,"div",17)(2,T1,5,2,"div",18)(3,F1,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","voice"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function j1(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function M1(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,j1,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function $1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let H_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"settings",{key:"style",name:"Voice Style",value:["alloy","echo","fable","onyx","nova","shimmer"],default:"alloy",demo:["https://cdn.openai.com/API/docs/audio/alloy.wav","https://cdn.openai.com/API/docs/audio/echo.wav","https://cdn.openai.com/API/docs/audio/fable.wav","https://cdn.openai.com/API/docs/audio/onyx.wav","https://cdn.openai.com/API/docs/audio/nova.wav","https://cdn.openai.com/API/docs/audio/shimmer.wav"]}),(0,f.A)(this,"type","textToAudio"),(0,f.A)(this,"desc","Generate audio from text"),(0,f.A)(this,"currentAudio",void 0)}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"tts-1"},{key:"voice",value:this.settings.default}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-audio",type:"json",demo:'{"url": "", "duration": 5}'}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}playAu(o){let i=this.findConfig("voice"),l=this.settings.value.indexOf(i),u=this.settings.demo[l];this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(u),this.currentAudio.play().catch(p=>{console.error("Error playing audio:",p)})}run(o,i,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-audio-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","tts-1"],["value","tts-1-hd"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,w1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,R1,4,3,"div",5),e.k0s()(),e.DNE(8,M1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,$1,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,Wt,Ct]})),r})();function G1(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function D1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function O1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function V1(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Conditions "),e.k0s(),e.DNE(3,D1,3,5,"div",14)(4,O1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function z1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function B1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function P1(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Message "),e.k0s(),e.DNE(3,z1,3,5,"div",14)(4,B1,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function L1(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,V1,5,2,"div",11)(2,P1,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","message"==n.key)}}function X1(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function U1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,X1,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Y1(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,G1,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,L1,3,2,"div",8),e.k0s()(),e.DNE(8,U1,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function H1(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function W1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function q1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Z1(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,W1,1,3,"app-input-format",28)(5,q1,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","message"==(null==n.settingConf?null:n.settingConf.key))}}let W_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","check"),(0,f.A)(this,"desc","Check data")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"message",value:"401"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-checkVal",type:"string",demo:""}]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-check-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,i){1&o&&e.DNE(0,Y1,9,4,"div",0)(1,H1,1,3,"button",1)(2,Z1,6,4,"div",2),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,Hi.V,Wt,Ct]})),r})();function J1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function K1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Q1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function ev(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,K1,3,5,"div",21)(4,Q1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function tv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.j41(4,"option",26),e.EFF(5,"text-embedding-3-small"),e.k0s(),e.j41(6,"option",27),e.EFF(7,"text-embedding-3-large"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function nv(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,ev,5,2,"div",17)(2,tv,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function ov(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function iv(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,ov,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let q_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","embedding"),(0,f.A)(this,"desc","Embedding data for symantic search")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"text-embedding-3-small"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-embeddingVector",type:"vector",demo:""},{name:this.id+"-content",type:"string",demo:""}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,i,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-embedding-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","text-embedding-3-small"],["value","text-embedding-3-large"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,J1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,nv,3,2,"div",5),e.k0s()(),e.DNE(8,iv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,rv,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,Ct,Wt]})),r})();function sv(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function av(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function lv(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function cv(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function uv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,av,7,0,"div",13)(4,lv,3,4,"span",14)(5,cv,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const i=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(i))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isReading),e.R7$(),e.Y8G("ngIf",!o.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!o.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let dv=(()=>{var t;class r{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",i=>{if(this.err="",i.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,u={file:i,name:this.name,content:""};switch(this.files.push(u),lt.getFileExt(i.name)){case"pdf":_=new Oo;break;case"docx":_=new vu;break;case"jpg":case"png":case"jpeg":_=new yu}this.isReading=!0,this.onStartReading.emit(),_?.readFile(i).then(v=>{u.content=v,this.isReading=!1,this.onAddFile.emit(u)})})},200)}remove(o){this.files.splice(o,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(o,i){1&o&&(e.DNE(0,sv,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,uv,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&o&&(e.Y8G("ngIf",i.err),e.R7$(),e.Mz_("id","dropzone-basic-",i.name,""),e.R7$(8),e.Y8G("ngForOf",i.files))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.qT,G.cb,G.cV,Ct]})),r})();function pv(t,r){if(1&t&&e.nrm(0,"i",22),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function fv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function mv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function _v(t,r){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(2).$implicit;e.ZvI("",n.value.desc," mr-2")}}function hv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.j41(5,"div")(6,"button",29),e.DNE(7,_v,1,3,"i",30),e.EFF(8),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(4),e.Y8G("ngIf",n.value.desc),e.R7$(),e.SpI(" ",n.value.label,"")}}function gv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.nrm(5,"input",31),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function vv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.nrm(5,"input",32),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function yv(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function bv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.j41(5,"select",33),e.DNE(6,yv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(3),e.Y8G("ngForOf",n.value.listOptions)}}function xv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.nrm(5,"textarea",36),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function Cv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(i))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(i))}),e.k0s()(),e.j41(5,"div",37)(6,"p",38),e.EFF(7,"Drag and drop your file here"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function Sv(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,fv,6,2,"div",23)(2,mv,6,2,"div",23)(3,hv,9,3,"div",23)(4,gv,6,1,"div",23)(5,vv,6,1,"div",23)(6,bv,7,2,"div",23)(7,xv,6,1,"div",23)(8,Cv,8,1,"div",23),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","submit"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type),e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type)}}function kv(t,r){if(1&t&&(e.j41(0,"div",42),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function wv(t,r){if(1&t&&(e.j41(0,"div",39)(1,"div",40),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,kv,2,2,"div",41),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Nv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,pv,1,1,"i",7),e.k0s(),e.j41(5,"div",8)(6,"div",9),e.DNE(7,Sv,9,8,"div",10),e.k0s(),e.j41(8,"div")(9,"div",11)(10,"button",12),e.nrm(11,"i",13),e.EFF(12," Add form control"),e.k0s(),e.j41(13,"mat-menu",null,0)(15,"div",14)(16,"ul",15)(17,"li")(18,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("textbox"))}),e.nrm(19,"i",17),e.EFF(20,"Textbox "),e.k0s()(),e.j41(21,"li")(22,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("select"))}),e.nrm(23,"i",17),e.EFF(24,"SelectBox "),e.k0s()(),e.j41(25,"li")(26,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("textarea"))}),e.nrm(27,"i",18),e.EFF(28,"Textarea "),e.k0s()(),e.j41(29,"li")(30,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("datetime"))}),e.nrm(31,"i",18),e.EFF(32,"DateTime "),e.k0s()(),e.j41(33,"li")(34,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("file"))}),e.nrm(35,"i",19),e.EFF(36,"File Upload "),e.k0s()(),e.j41(37,"li")(38,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("key"))}),e.nrm(39,"i",19),e.EFF(40,"Access Key "),e.k0s()(),e.j41(41,"li")(42,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("html"))}),e.nrm(43,"i",20),e.EFF(44,"Html View "),e.k0s()(),e.j41(45,"li")(46,"a",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.addControl("submit"))}),e.nrm(47,"i",20),e.EFF(48,"Submit Button "),e.k0s()()()()()()()(),e.DNE(49,wv,4,1,"div",21),e.k0s()}if(2&t){const n=e.sdS(14),o=e.XpG();e.R7$(3),e.JRh(o.type),e.R7$(),e.Y8G("ngIf",o.err),e.R7$(3),e.Y8G("ngForOf",o.nodeData.conf),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(39),e.Y8G("ngIf",o.nodeData.outputs.length>0)}}function Ev(t,r){if(1&t&&e.nrm(0,"button",43),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Iv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2,"List Options (One option per line, format: `Text=>Value`)"),e.k0s(),e.j41(3,"textarea",51),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.listOptions,i)||(l.listOptions=i),e.Njj(i)}),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.listOptions)}}function Av(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46)(3,"div",47)(4,"h5",48),e.EFF(5," Add form control "),e.k0s()(),e.j41(6,"div",49)(7,"div",24)(8,"label",25),e.EFF(9,"Label"),e.k0s(),e.j41(10,"input",50),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.addLabel,i)||(l.addLabel=i),e.Njj(i)}),e.bIt("keyup",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.onLabelChange())}),e.k0s()(),e.j41(11,"div",24)(12,"label",25),e.EFF(13,"Var Name"),e.k0s(),e.j41(14,"input",51),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.addVarName,i)||(l.addVarName=i),e.Njj(i)}),e.k0s()(),e.j41(15,"div",24)(16,"label",25),e.EFF(17,"Description"),e.k0s(),e.j41(18,"textarea",51),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.addDesc,i)||(l.addDesc=i),e.Njj(i)}),e.k0s()(),e.DNE(19,Iv,4,1,"div",23),e.j41(20,"div")(21,"button",52),e.EFF(22,"Close"),e.k0s(),e.j41(23,"button",53),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.saveControl())}),e.EFF(24),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(10),e.R50("ngModel",n.addLabel),e.R7$(4),e.R50("ngModel",n.addVarName),e.R7$(4),e.R50("ngModel",n.addDesc),e.R7$(),e.Y8G("ngIf","select"==n.addType),e.R7$(5),e.SpI("",n.curConf?"Save":"Add"," Control")}}function Tv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Fv(t,r){if(1&t&&(e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Tv,1,0,"i",55),e.k0s(),e.nrm(4,"input",56),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function Rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function jv(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function Mv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Rv,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,i)||(l.value.data=i),e.Njj(i)}),e.DNE(5,jv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function $v(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Gv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,$v,1,0,"i",55),e.k0s(),e.j41(4,"textarea",59),e.bIt("input",function(i){e.eBV(n);const l=e.XpG(3);return e.Njj(l.autoResize(i.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",o.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function Dv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function Ov(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Dv,1,0,"i",55),e.k0s(),e.j41(4,"app-file-control",60),e.bIt("onStartReading",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.onStartReadingFile())})("onAddFile",function(i){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onAddFile(i))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",o.nodeData.id+"-"+n.key)}}function Vv(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(i.value.desc))}),e.k0s()}}function zv(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function Bv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Vv,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,i)||(l.value.data=i),e.Njj(i)}),e.DNE(5,zv,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",o.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",o.lstKeys)}}function Pv(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Fv,5,6,"div",23)(2,Mv,6,5,"div",23)(3,Gv,6,6,"div",23)(4,Ov,5,3,"div",23)(5,Bv,6,5,"div",23),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}function Lv(t,r){if(1&t&&(e.j41(0,"div",54)(1,"div",9),e.DNE(2,Pv,6,5,"div",10),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.nodeData.conf)}}let Z_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"appId",0),(0,f.A)(this,"type","form"),(0,f.A)(this,"desc","User interaction form"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"addType",""),(0,f.A)(this,"addLabel",""),(0,f.A)(this,"addVarName",""),(0,f.A)(this,"addDesc",""),(0,f.A)(this,"listOptions",""),(0,f.A)(this,"curConf",void 0),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB)}getClassType(){return r}updateOutput(){this.nodeData.outputs=[];for(let o of this.nodeData.conf)"file"!=o.value.type&&(this.nodeData.outputs.push({name:this.id+"-"+o.key,type:"file"==o.value.type?"File":"string",demo:'{name: "filename"}|"text value"'}),"file"==o.value.type&&this.nodeData.outputs.push({name:this.id+"-"+o.key+"-dataUrl",type:"string",demo:""}))}upgradeConf(){}ngOnInit(){if(super.ngOnInit(),"render"!=this.mode)return;let o=!1;for(let i of this.nodeData.conf)i.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+i.key)??"","key"==i.value.type&&(o=!0);o&&this.appService?.listKeys().subscribe(i=>{this.lstKeys=i}),setTimeout(()=>{let i=document.querySelectorAll(".form-node-renderred textarea");for(let l of i)this.autoResize(l)},200)}getConfig(){return[]}addControl(o){this.ngZone?.run(()=>{this.addType=o,this.addLabel="",this.addVarName=""}),this.curConf=void 0,this.openSetting()}autoResize(o){o.style.height="50px",o.style.overflowY="hidden",o.style.height=o.scrollHeight+10+"px"}showInfo(o){alert(o)}saveControl(){let o=":";this.listOptions.includes("=>")&&(o="=>");let i=this.listOptions.split("\n").map(l=>l.split(o));this.curConf?(this.curConf.value.label=this.addLabel,this.curConf.value.desc=this.addDesc,this.curConf.value.listOptions=i.map(l=>({value:l[1],text:l[0]})),this.curConf.key=this.addVarName):this.nodeData.conf.push({key:this.addVarName,value:{type:this.addType,label:this.addLabel,desc:this.addDesc,listOptions:i.map(l=>({value:l[1],text:l[0]}))}}),this.noticeUpdate()}removeControl(o){this.nodeData.conf.splice(o,1),this.noticeUpdate()}editConf(o){this.curConf=o,this.addType=o.value.type,this.addLabel=o.value.label,this.addVarName=o.key,this.addDesc=o.value.desc,this.listOptions=o.value.listOptions?o.value.listOptions.map(i=>`${i.text}=>${i.value}`).join("\n"):"",this.openSetting()}ngDoCheck(){this.err=0==this.nodeData.conf.length?'No Control. Click "Add form control" to add control to your form':""}onLabelChange(){this.ngZone?.run(()=>{this.addVarName=lt.toCamelCase(this.addLabel)})}onAddFile(o){this.onUploaded.emit(o)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],inputs:{appId:"appId"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["menu",""],["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],["class","form-node-renderred",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"bx","bx-plus","me-2"],[1,"dropdown-menu","show","w-48","mt-1"],[1,"dropdown-content"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"bx","bx-text","me-3"],[1,"bx","bx-detail","me-3"],[1,"bx","bx-paperclip","me-3"],[1,"bx","bx-align-left","me-3"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"cursor-pointer",3,"click"],[1,"bx","bx-x","cursor-pointer",3,"click"],["type","text","autocomplete","off",1,"form-control",3,"placeholder"],[1,"btn","btn-primary"],[3,"class",4,"ngIf"],["type","text","autocomplete","off","placeholder","Key",1,"form-control"],["type","text","autocomplete","off","placeholder","Html View",1,"form-control"],[1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control"],[1,"dropzone"],[1,"h6","text-center","mt-4","text-small"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],["type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary","me-3",3,"click"],[1,"form-node-renderred"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(o,i){1&o&&e.DNE(0,Nv,50,5,"div",1)(1,Ev,1,3,"button",2)(2,Av,25,7,"div",3)(3,Lv,3,1,"div",4),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf","render"==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.me,G.wz,G.BC,G.vS,dv,Le.Cn,Le.kk,Le.Cp]})),r})();function Xv(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Uv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Yv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Hv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Uv,3,5,"div",21)(4,Yv,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Wv(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function qv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.DNE(4,Wv,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.style)}}function Zv(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function Jv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Size "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.DNE(4,Zv,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.settings.size)}}function Kv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.j41(4,"option",28),e.EFF(5,"dall-e-2"),e.k0s(),e.j41(6,"option",29),e.EFF(7,"dall-e-3"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Qv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Cookie "),e.k0s(),e.j41(3,"input",30),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function e2(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Hv,5,2,"div",17)(2,qv,5,2,"div",18)(3,Jv,5,2,"div",18)(4,Kv,8,1,"div",18)(5,Qv,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","style"==n.key),e.R7$(),e.Y8G("ngIf","size"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.Y8G("ngIf","cookie"==n.key)}}function t2(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function n2(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,t2,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function o2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let J_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"settings",{style:["natural","vivid"],size:["1024x1024","1792x1024","1024x1792"]}),(0,f.A)(this,"type","textToImage"),(0,f.A)(this,"desc","Generate image from text")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"dall-e-3"},{key:"style",value:"natural"},{key:"size",value:"1792x1024"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-image",type:"image",demo:""}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,i,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-image-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","dall-e-2"],["value","dall-e-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Xv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,e2,6,5,"div",5),e.k0s()(),e.DNE(8,n2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,o2,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.me,G.wz,G.BC,G.vS,Ct,Wt]})),r})();const i2=["outputEditor"];function r2(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Type your output format in free style and click 'Generate' button. "),e.nrm(2,"br"),e.EFF(3,"Example: "),e.j41(4,"code"),e.EFF(5,"name: string, listItem: string[]"),e.k0s()())}function s2(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Describe your example and click 'Generate' button. "),e.k0s())}function a2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div"),e.DNE(1,r2,6,0,"div",2)(2,s2,2,0,"div",2),e.j41(3,"div",3)(4,"ngx-monaco-editor",4,0),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.inputStr,i)||(l.inputStr=i),e.Njj(i)}),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"button",7),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.generate())}),e.nrm(9,"i",8),e.EFF(10," Generate "),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"button",11),e.EFF(14,"Close"),e.k0s(),e.j41(15,"button",12),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.save())}),e.EFF(16),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf","UserOutputFormatBuilder"==n.agentName),e.R7$(),e.Y8G("ngIf","ExamplesBuilder"==n.agentName),e.R7$(2),e.Y8G("height",200)("autoHeight",!0)("options",n.editorFuncOptions),e.R50("ngModel",n.inputStr),e.R7$(4),e.Y8G("disabled",""==n.inputStr&&"UserOutputFormatBuilder"==n.agentName),e.R7$(7),e.Y8G("disabled",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"Generating...":"Save"," ")}}function l2(t,r){1&t&&(e.j41(0,"div")(1,"div"),e.EFF(2," Please add agent Prompt first! "),e.k0s(),e.j41(3,"div",10)(4,"button",11),e.EFF(5,"Close"),e.k0s()()())}let c2=(()=>{var t;class r extends br{constructor(o,i){super(),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"editorFuncOptions",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!1}),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genMsg",""),(0,f.A)(this,"agentName","UserOutputFormatBuilder"),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"outputEditor",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"onSave",new e.bkB),this.zone=o,this.aiApi=i,this.agentRunner=new _i(this.aiApi,this)}generate(){this.isLoading=!0,this.outputEditor?.writeValue(""),this.agentRunner.setAgentName(this.agentName),this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr);let o=[`agent::${this.prompt}`];""!=this.genMsg&&o.push(this.genMsg),this.agentRunner.setVars(o),this.agentRunner.send()}save(){this.onSave.emit(this.inputStr)}onMsgUpdate(o,i){this.outputEditor?.insertText(i??"")}onDone(o){this.outputEditor?.formatCode(),this.zone.run(()=>{this.isLoading=!1})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(e.SKi),e.rXU(si))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-output-format"]],viewQuery:function(o,i){if(1&o&&e.GBs(i2,5),2&o){let l;e.mGM(l=e.lsd())&&(i.outputEditor=l.first)}},inputs:{inputStr:"inputStr",prompt:"prompt",genMsg:"genMsg",agentName:"agentName"},outputs:{onSave:"onSave"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["outputEditor",""],[4,"ngIf"],["class","small mb-3",4,"ngIf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","height","autoHeight","options","ngModel"],[1,"row"],[1,"col-lg-5","mt-3"],["type","button",1,"btn","btn-text-primary",3,"click","disabled"],[1,"bx","bxs-magic-wand","me-2"],[1,"col-lg-7"],[1,"mt-3","text-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],[1,"small","mb-3"]],template:function(o,i){1&o&&e.DNE(0,a2,17,9,"div",1)(1,l2,6,0,"div",1),2&o&&(e.Y8G("ngIf",i.prompt),e.R7$(),e.Y8G("ngIf",!i.prompt))},dependencies:[Hi.V,Qf,V.MD,V.bT,G.YN,G.BC,G.vS]})),r})();function u2(t,r){if(1&t&&e.nrm(0,"i",19),2&t){const n=e.XpG();e.FS9("title",n.err)}}function d2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.brH(2,2,n.value,50,"**SYSTEM:")," ")}}function p2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",28),e.EFF(3," Add prompt "),e.k0s()()}}function f2(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," System Instructions "),e.k0s(),e.DNE(3,d2,3,6,"div",25)(4,p2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function m2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function _2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",29),e.EFF(3," Add prompt template "),e.k0s()()}}function h2(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Prompt Template "),e.k0s(),e.DNE(3,m2,3,5,"div",25)(4,_2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function g2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function v2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",29),e.EFF(3," Add examples "),e.k0s()()}}function y2(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Examples "),e.k0s(),e.DNE(3,g2,3,5,"div",25)(4,v2,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function b2(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function x2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",24),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",30),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.DNE(4,b2,2,2,"option",31),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.modelNames)}}function C2(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function S2(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",35),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,i)||(l.selectedCollection=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.updateCol())})("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.loadCols())}),e.DNE(1,C2,2,2,"option",31),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function k2(t,r){1&t&&(e.j41(0,"div",36)(1,"small",37),e.EFF(2,"No Vector Collection"),e.k0s()())}function w2(t,r){if(1&t&&(e.j41(0,"div")(1,"label",24),e.EFF(2," Documents "),e.k0s(),e.j41(3,"div"),e.DNE(4,S2,2,2,"select",33)(5,k2,3,0,"div",34),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function N2(t,r){if(1&t){const n=e.RV6();e.j41(0,"li",46),e.nrm(1,"i",47),e.EFF(2),e.j41(3,"i",48),e.bIt("click",function(){const i=e.eBV(n).index,l=e.XpG(4);return e.Njj(l.delTool(i))}),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n," ")}}function E2(t,r){if(1&t&&(e.j41(0,"div",43)(1,"ul",44),e.DNE(2,N2,4,1,"li",45),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",n.tools)}}function I2(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.addTool(i))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function A2(t,r){if(1&t&&(e.j41(0,"div",38)(1,"label",24),e.EFF(2," Tools "),e.k0s(),e.DNE(3,E2,3,1,"div",39),e.j41(4,"div")(5,"div",40)(6,"button",41),e.nrm(7,"i",29),e.EFF(8," Add tool "),e.k0s(),e.j41(9,"ul",42),e.DNE(10,I2,3,1,"li",5),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",n.tools.length>0),e.R7$(7),e.Y8G("ngForOf",n.lstTool)}}function T2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,f2,5,2,"div",20)(2,h2,5,2,"div",20)(3,y2,5,2,"div",20)(4,x2,5,2,"div",21),e.j41(5,"div"),e.DNE(6,w2,6,2,"div",21)(7,A2,11,2,"div",22),e.k0s()()),2&t){const n=r.$implicit,o=e.XpG();e.R7$(),e.Y8G("ngIf","prompt"==n.key),e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","examples"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.ZvI("mt-2 ",o.moreSetting?"":"d-none",""),e.R7$(),e.Y8G("ngIf","doc"==n.key),e.R7$(),e.Y8G("ngIf","tools"==n.key)}}function F2(t,r){if(1&t&&(e.j41(0,"div",54),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function R2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",50)(1,"div",51),e.EFF(2," Outputs "),e.j41(3,"i",52),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.openSetting("outputFormat"))}),e.k0s()(),e.DNE(4,F2,2,2,"div",53),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.nodeData.outputs)}}function j2(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Add Prompt "),e.k0s())}function M2(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Input Template "),e.k0s())}function $2(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Set Output Format "),e.k0s())}function G2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",56),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onAddPrompt(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("agentName","UserAgentBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function D2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",57),e.bIt("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateOutputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function O2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",58),e.bIt("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateExamples(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("genMsg",n.genExampleMsg)("agentName","ExamplesBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function V2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",59),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let K_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","agent"),(0,f.A)(this,"desc","An AI Agent to process your data"),(0,f.A)(this,"moreSetting",!1),(0,f.A)(this,"modelNames",["gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-002","gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp-1219"]),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genExampleMsg",""),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"lstCollection",[]),(0,f.A)(this,"lstTool",[{name:"code_execution"},{name:"google_search_retrieval"}]),(0,f.A)(this,"tools",[]),(0,f.A)(this,"agentRunner",void 0)}getClassType(){return r}getConfig(){return[{key:"prompt",value:""},{key:"input",value:""},{key:"examples",value:""},{key:"model",value:"gemini-1.5-flash"},{key:"doc",value:""},{key:"tools",value:[]},{key:"outputFormat",value:""}]}showMore(){this.ngZone?.run(()=>{this.moreSetting=!this.moreSetting})}updateOutput(){let o=this.findConfig("outputFormat").trim();this.nodeData.outputs=""==o?[{name:this.id+"-agentResponse",type:"string",demo:""}]:[{name:this.id+"-agentResponse",type:"json",demo:JSON.stringify(lt.createDemoDataForJsonSchema(o))}]}openSetting(o){this.prompt=this.findConfig("prompt"),this.genExampleMsg=this.findConfig("outputFormat"),""!=this.genExampleMsg&&(this.genExampleMsg="output_format::"+this.genExampleMsg),super.openSetting(o)}onAddPrompt(o){this.setConfig("prompt",o)}updateOutputFormat(o){this.setConfig("outputFormat",o),this.updateOutput()}updateExamples(o){this.setConfig("examples",o),this.updateOutput()}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}loadCols(){this.appService?.listVCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("doc",this.selectedCollection)}ngOnInit(){super.ngOnInit(),this.appService?.listVCollection().subscribe(o=>{this.lstCollection=o}),this.tools=this.findConfig("tools")??[],this.selectedCollection=this.findConfig("doc"),this.loadCols(),(this.selectedCollection||this.tools.length>0)&&(this.moreSetting=!0)}addTool(o){this.ngZone?.run(()=>{0==this.tools.filter(l=>l==o.name).length&&(this.tools.push(o.name),this.setConfig("tools",this.tools))})}delTool(o){this.ngZone?.run(()=>{this.tools.splice(o,1),this.setConfig("tools",this.tools)})}ngDoCheck(){this.err=""==this.findConfig("prompt")?'No Prompt. Click "Add prompt" to instruct your agent':""}run(o,i,l,u,p,_){let v=this.findConfig("doc",l),g=this.findConfig("input",l);g=this.parseTempate(g,u);let y=[];for(let C of u.entries())y.push(`${C[0]}::${C[1]}`);let x=new si(o);this.agentRunner=new _i(x,new br(void 0,C=>{let E=new Map,I=null;try{I=JSON.parse(C)}catch{}for(let A of l.outputs)E.set(A.name,I??C);_(E)})),this.agentRunner.setAgentName(`flow-${i}.${l.id}`),this.agentRunner.setVars(y),this.agentRunner.addUserMessage(g),v&&this.agentRunner.setMemType(v),this.agentRunner.send()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-llm-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:24,vars:19,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"p-1","text-center",3,"click"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body","content"],[3,"agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"inputStr","prompt","onSave",4,"ngIf"],[3,"genMsg","agentName","inputStr","prompt","onSave",4,"ngIf"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bxs-magic-wand","me-2"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change","click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[1,"mb-3"],[1,"text-muted"],[1,"mt-2"],["class","small",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow"],[1,"dropdown-menu"],[1,"small"],[1,"list-group"],["class","p-0 list-group-item d-flex align-items-center border-0 small",4,"ngFor","ngForOf"],[1,"p-0","list-group-item","d-flex","align-items-center","border-0","small"],[1,"bx","bx-code","me-2"],[1,"bx","bx-x","ms-3","cursor-pointer",3,"click"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-small",3,"click"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["title","Set Output Format",1,"bx","bx-code-alt","cursor-pointer","text-link",3,"click"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[1,"modal-title"],[3,"onClose","onSave","agentName","inputStr","vars"],[3,"onSave","inputStr","prompt"],[3,"onSave","genMsg","agentName","inputStr","prompt"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,u2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,T2,8,9,"div",5),e.j41(8,"div",6),e.bIt("click",function(){return i.showMore()}),e.nrm(9,"i"),e.k0s()()(),e.DNE(10,R2,5,1,"div",7),e.k0s(),e.nrm(11,"button",8),e.j41(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),e.DNE(16,j2,2,0,"h5",13)(17,M2,2,0,"h5",13)(18,$2,2,0,"h5",13),e.k0s(),e.j41(19,"div",14),e.DNE(20,G2,1,3,"app-input-format",15)(21,D2,1,2,"app-output-format",16)(22,O2,1,4,"app-output-format",17)(23,V2,1,2,"app-input-format",18),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(2),e.ZvI("bx bx-chevron-",i.moreSetting?"up":"down"," cursor-pointer"),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(4),e.Y8G("ngIf","prompt"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(2),e.Y8G("ngIf","prompt"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","examples"==(null==i.settingConf?null:i.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,c2,Ct,Wt]})),r})();function z2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function B2(t,r){if(1&t&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function P2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",18),e.EFF(2," Run App "),e.k0s(),e.j41(3,"select",19),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedApp,i)||(l.selectedApp=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.updateApp())}),e.DNE(4,B2,2,2,"option",20),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.selectedApp),e.R7$(),e.Y8G("ngForOf",n.lstApp)}}function L2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function X2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",24),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",25),e.EFF(3," Set Value "),e.k0s()()}}function U2(t,r){if(1&t&&(e.j41(0,"div")(1,"label",18),e.EFF(2),e.k0s(),e.DNE(3,L2,3,5,"div",22)(4,X2,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.SpI(" ",o.getAppVar(n.key)," "),e.R7$(),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Y2(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,P2,5,2,"div",17)(2,U2,5,3,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","app"==n.key),e.R7$(),e.Y8G("ngIf",n.key.startsWith("app-args::"))}}function H2(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function W2(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,H2,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function q2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",n.settingConf.value)("vars",n.nodeData.inputs)}}let Q_=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","router"),(0,f.A)(this,"desc","Execute other app"),(0,f.A)(this,"lstApp",[]),(0,f.A)(this,"selectedApp",0)}getClassType(){return r}getConfig(){return[{key:"app",value:0}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-appResult",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedApp=this.findConfig("app"),this.appService.listAppRoute().subscribe(o=>{this.ngZone.run(()=>{this.lstApp=o})})}upgradeConf(){}getAppVar(o){return o.split("::")[1]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}updateApp(){this.setConfig("app",this.selectedApp);let o=this.lstApp.filter(i=>i.id==this.selectedApp)[0];this.nodeData.conf=this.nodeData.conf.slice(0,1);for(let i of o.args)this.nodeData.conf.push({key:`app-args::${i}`,value:""});this.noticeUpdate()}run(o,i,l,u,p,_){let g="/runner/"+this.findConfig("app",l);p.navigate([g]),_(new Map)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-route-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,z2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Y2,3,2,"div",5),e.k0s()(),e.DNE(8,W2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,q2,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf",i.settingConf))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,Ct,Wt]})),r})();function Z2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function J2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function K2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add query template "),e.k0s()()}}function Q2(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Query Template "),e.k0s(),e.DNE(3,J2,3,5,"div",21)(4,K2,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function ey(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Type "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.loadCols())}),e.j41(5,"option",26),e.EFF(6,"Data"),e.k0s(),e.j41(7,"option",27),e.EFF(8,"Vector"),e.k0s()()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function ty(t,r){if(1&t&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FCK("value","",n.id,":",n.name,""),e.R7$(),e.SpI("",n.name," ")}}function ny(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,i)||(l.selectedCollection=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.updateCol())}),e.DNE(1,ty,2,4,"option",30),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function oy(t,r){1&t&&(e.j41(0,"div",32)(1,"small",33),e.EFF(2,"No Collection"),e.k0s()())}function iy(t,r){if(1&t&&(e.j41(0,"div")(1,"label",20),e.EFF(2," Select Collection "),e.k0s(),e.j41(3,"div"),e.DNE(4,ny,2,2,"select",28)(5,oy,3,0,"div",29),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function ry(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Q2,5,2,"div",17)(2,ey,9,1,"div",18)(3,iy,6,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","type"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function sy(t,r){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ay(t,r){if(1&t&&(e.j41(0,"div",34)(1,"div",35),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,sy,2,2,"div",36),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function ly(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",38),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.vars)("varFormat",n.varFormat)("varBtnLabel","Add Condition")}}let eh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","search"),(0,f.A)(this,"desc","Search your storage data"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"vars",[]),(0,f.A)(this,"varFormat",'"@@":"<your_search_value>"\n')}getClassType(){return r}getConfig(){return[{key:"type",value:"data"},{key:"collection",value:""},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-lstData",type:"array",demo:'{"Id": "1", "CreatedDate": "yyyy-mm-dd", "Content": "json"}'}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){"vector"==this.findConfig("type")?this.appService?.listVCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...i)})}):this.appService?.listCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...i),this.loadVars()})})}loadVars(){this.vars=[],this.vars.push(...this.nodeData.inputs);let o=this.lstCollections.filter(i=>i.id+":"+i.name==this.selectedCollection)[0];if(o?.spec){let i=lt.extractProperties(JSON.parse(o.spec),0);for(let l of i)this.vars.push({name:l.name,type:l.type,demo:""})}}updateCol(){this.setConfig("collection",this.selectedCollection),this.loadVars()}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,i,l,u,p,_){let v=this.findConfig("input",l);v=this.parseTempate(v,u);let g=this.findConfig("collection",l).split(":"),y=this.findConfig("type",l),x=new mn(o);"data"==y?x.listData({id:+g[0],name:v,type:y}).subscribe(C=>{let E=this.setupOutputValue(C,l);_(E)}):"vector"==y&&x.searchVector({collection:g[1],content:v,id:0,vector:[]}).subscribe(C=>{let E=this.setupOutputValue(C,l);_(E)})}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-search-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","varFormat","varBtnLabel","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","data"],["value","vector"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","mb-5",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mb-5"],[1,"text-muted"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars","varFormat","varBtnLabel"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Z2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,ry,4,3,"div",5),e.k0s()(),e.DNE(8,ay,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Query Template "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,ly,1,4,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,Ct,Wt]})),r})();class th{}class cy extends th{constructor(r){super(),(0,f.A)(this,"idxPattern",void 0),this.idxPattern=r}parse(r){let n=[],o=this.cleanText(r).split("<br>");console.log(o);let i=null;for(let p of o){let _=this.removeVietnameseTones(p);if(_=this.removeHtmlTag(_),""==_)continue;let v=!1;for(let g of this.idxPattern){let y=g.split("==>"),x=y[0],C=new RegExp(y[1].trim()),E=this.getPatLevel(x);if(new RegExp(x.trim()).test(_)){let A={title:p,childs:[],content:""};if(0==E&&(n.length>0||C.test(_)))n.push(A),i=A;else if(n.length>0){let N=n[n.length-1];for(let j=0;j<E-1;j++){if(!(N.childs.length>0)){N=null;break}N=N.childs[N.childs.length-1]}null!=N&&(N.childs.length>0||C.test(_))&&(N.childs.push(A),i=A)}v=!0;break}}i&&!v&&(i.content+=(""==i.content?"":"<br>")+p,i.hasTable||(i.hasTable=p.indexOf("<table>")>=0))}let l=[],u=new RegExp(this.idxPattern[0].split("==>")[1].trim());for(let p of n)0==p.childs.length&&0==p.content.length||(l.length>0||u.test(this.removeHtmlTag(p.title)))&&l.push(p);return l}getPatLevel(r){let n=0;for(const o of r){if("\t"!=o)break;n++}return n}cleanText(r){let n=["div"],o=r;for(let i of n)o=o.replaceAll(`<${i}>`,"").replaceAll(`</${i}>`,"");return o=o.replaceAll(/<\/table>\s*\d+[\sbr<>\d]+<end-page\/>\s*<table>/g,""),o=o.replaceAll(/\d+[\sbr<>\d]+<end-page\/>/g,'<hr class="solid"><br>'),o=o.replaceAll("</table>","</table><br>"),o=o.replaceAll("\n","").trim(),o}removeHtmlTag(r){let n=["div","b","i","u"],o=r;for(let i of n)o=o.replaceAll(`<${i}>`,"").replaceAll(`</${i}>`,"");return o.trim()}removeVietnameseTones(r){return(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()}}class uy extends th{parse(r){return[]}}function dy(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function py(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function fy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function my(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,py,3,5,"div",21)(4,fy,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function _y(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Split character "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function hy(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,my,5,2,"div",17)(2,_y,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","character"==n.key)}}function gy(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function vy(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,gy,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function yy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let nh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"spliters",new Map([["character-spliter",new uy],["heading-spliter",new cy(["^[IVX]+\\.\\s*[A-Z][A-Z0-9.,\\s]*$ ==> ^I\\.","\t^\\d+\\.\\s*[A-Z].+ ==> ^1\\.","\t\t^\\d+\\.\\d+\\.\\s*[A-Z].+ ==> ^\\d+\\.1\\."])]])),(0,f.A)(this,"type","spliter"),(0,f.A)(this,"desc","Split text content into multiple parts for embedding")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"character",value:"\\n\\n"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-parts",type:"string[]",demo:'["text"]'}]}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,i,l,u,p,_){let v=this.findConfig("input",l);v=this.parseTempate(v,u);let g=this.findConfig("model",l),y=this.spliters.get(g);if(!y)return void _(new Map);let x=y.parse(v);_(this.setupOutputValue(x,l))}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-spliter-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,dy,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,hy,3,2,"div",5),e.k0s()(),e.DNE(8,vy,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,yy,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.me,G.BC,G.vS,Ct,Wt]})),r})();function by(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function xy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Cy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Sy(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Data Template "),e.k0s(),e.DNE(3,xy,3,5,"div",21)(4,Cy,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function ky(t,r){if(1&t&&(e.j41(0,"option",28),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function wy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,i)||(l.selectedCollection=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.updateCol())})("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.loadCols())}),e.DNE(5,ky,2,2,"option",26),e.k0s(),e.j41(6,"button",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.showAddCollectionModal())}),e.nrm(7,"i",24),e.EFF(8," New folder "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function Ny(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Sy,5,2,"div",17)(2,wy,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Ey(t,r){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Iy(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Ey,2,2,"div",31),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Ay(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",33),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){let n;const o=e.XpG();e.Y8G("inputStr",null!==(n=null==o.settingConf?null:o.settingConf.value)&&void 0!==n?n:o.curColSpec)("vars",o.nodeData.inputs)}}let oh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","database"),(0,f.A)(this,"displayName","SaveFile"),(0,f.A)(this,"desc","Save your data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"curColSpec","")}getClassType(){return r}getConfig(){return[{key:"collection",value:0},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("collection",this.selectedCollection);let o=this.lstCollections.filter(i=>i.id==this.selectedCollection)[0];this.curColSpec=o?.spec??""}updateInputFormat(o){this.setConfig("input",o),this.noticeUpdate()}run(o,i,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,by,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Ny,3,2,"div",5),e.k0s()(),e.DNE(8,Iy,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Ay,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,V.MD,V.Sq,V.bT,Ct,Wt]})),r})();function Ty(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Fy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ry(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function jy(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Template "),e.k0s(),e.DNE(3,Fy,3,5,"div",14)(4,Ry,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function My(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,jy,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key)}}function $y(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Gy(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,$y,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Dy(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Ty,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,My,2,1,"div",8),e.k0s()(),e.DNE(8,Gy,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Oy(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Vy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function zy(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Vy,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key))}}let ih=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","text"),(0,f.A)(this,"desc","Create text data")}getClassType(){return r}getConfig(){return[{key:"html",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-text",type:"string",demo:""}]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-text-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,i){1&o&&e.DNE(0,Dy,9,4,"div",0)(1,Oy,1,3,"button",1)(2,zy,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,Hi.V,Wt,Ct]})),r})();function By(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Py(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ly(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",18),e.EFF(3," Add audio "),e.k0s()()}}function Xy(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Audio data "),e.k0s(),e.DNE(3,Py,3,5,"div",14)(4,Ly,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Uy(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Xy,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","audio"==n.key)}}function Yy(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Hy(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Yy,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Wy(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,By,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Uy,2,1,"div",8),e.k0s()(),e.DNE(8,Hy,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function qy(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Zy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Jy(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,Zy,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","audio"==(null==n.settingConf?null:n.settingConf.key))}}let rh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","transcription"),(0,f.A)(this,"desc","Generate transcription for audio file")}getClassType(){return r}getConfig(){return[{key:"audio",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-transcription",type:"json",demo:JSON.stringify({language:"english",duration:8.47,text:"Some long text",words:[{word:"The",start:0,end:.23}]})}]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-transcription-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,i){1&o&&e.DNE(0,Wy,9,4,"div",0)(1,qy,1,3,"button",1)(2,Jy,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,Wt,Ct]})),r})();function Ky(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Qy(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("string"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function eb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Content "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.DNE(4,Qy,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.nodeData.inputs)}}function tb(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("vector"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function nb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Vector "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.DNE(4,tb,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,o=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",o.nodeData.inputs)}}function ob(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function ib(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",24),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,i)||(l.selectedCollection=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.updateCol())})("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.loadCols())}),e.DNE(5,ob,2,2,"option",25),e.k0s(),e.j41(6,"button",26),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.showAddVCollectionModal())}),e.nrm(7,"i",27),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function rb(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,eb,5,2,"div",17)(2,nb,5,2,"div",17)(3,ib,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","content"==n.key),e.R7$(),e.Y8G("ngIf","vector"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function sb(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ab(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,sb,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function lb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let sh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","vectorDatabase"),(0,f.A)(this,"desc","Save embedded vector to db"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[])}getClassType(){return r}getConfig(){return[{key:"content",value:""},{key:"vector",value:""},{key:"collection",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngDoCheck(){for(let o of this.nodeData.conf)"content"==o.key&&""==o.value&&(o.value=this.nodeData.inputs.filter(i=>"string"==i.type)[0]?.name??""),"vector"==o.key&&""==o.value&&(o.value=this.nodeData.inputs.filter(i=>"vector"==i.type)[0]?.name??"")}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listVCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateInputFormat(o){this.setConfig("content",o),this.noticeUpdate()}updateCol(){this.setConfig("collection",this.selectedCollection)}run(o,i,l,u,p,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-vector-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value","class",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Ky,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,rb,4,3,"div",5),e.k0s()(),e.DNE(8,ab,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,lb,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,V.MD,V.Sq,V.bT,Wt]})),r})();function cb(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function ub(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function db(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function pb(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Video Template "),e.k0s(),e.DNE(3,ub,3,5,"div",14)(4,db,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function fb(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,pb,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","source"==n.key)}}function mb(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function _b(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,mb,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function hb(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,cb,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,fb,2,1,"div",8),e.k0s()(),e.DNE(8,_b,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function gb(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function vb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function yb(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,vb,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","source"==(null==n.settingConf?null:n.settingConf.key))}}let ah=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","videoRender"),(0,f.A)(this,"desc","Render video")}getClassType(){return r}getConfig(){return[{key:"source",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-videoUrl",type:"string",demo:""}]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-video-render-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,i){1&o&&e.DNE(0,hb,9,4,"div",0)(1,gb,1,3,"button",1)(2,yb,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,Hi.V,Wt,Ct]})),r})();function bb(t,r){if(1&t&&e.nrm(0,"i",11),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function xb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Cb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",19),e.EFF(3," Add Design "),e.k0s()()}}function Sb(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Design "),e.k0s(),e.DNE(3,xb,3,5,"div",16)(4,Cb,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function kb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function wb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",19),e.EFF(3," Add Template "),e.k0s()()}}function Nb(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Save Template "),e.k0s(),e.DNE(3,kb,3,5,"div",16)(4,wb,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Eb(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function Ib(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",15),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",20),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,i)||(l.selectedCollection=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.updateCol())})("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.loadCols())}),e.DNE(5,Eb,2,2,"option",21),e.k0s(),e.j41(6,"button",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.showAddCollectionModal())}),e.nrm(7,"i",19),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function Ab(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Sb,5,2,"div",12)(2,Nb,5,2,"div",12)(3,Ib,9,2,"div",13),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key),e.R7$(),e.Y8G("ngIf","saveTemplate"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Tb(t,r){if(1&t&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Fb(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Tb,2,2,"div",26),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Rb(t,r){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,bb,1,1,"i",6),e.k0s(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,Ab,4,3,"div",9),e.k0s()(),e.DNE(8,Fb,4,1,"div",10),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function jb(t,r){if(1&t&&e.nrm(0,"button",28),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Mb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.save(i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("agentName","UserHtmlViewBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function $b(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",36),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateSaveTemplate(i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Gb(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32),e.DNE(4,Mb,1,4,"app-input-format",33)(5,$b,1,3,"app-input-format",34),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","saveTemplate"==(null==n.settingConf?null:n.settingConf.key))}}function Db(t,r){if(1&t&&e.nrm(0,"div",37),2&t){const n=e.XpG();e.Y8G("innerHTML",n.rendered,e.npT)}}let lh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"type","htmlViewer"),(0,f.A)(this,"desc","View output data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"html",""),(0,f.A)(this,"rendered","")}getClassType(){return r}updateOutput(){let o=this.findConfig("html"),i=this.getAllSelectablePairs(o).map(l=>l.varName);i=lt.distinctArray(i),this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}];for(let l of i)this.nodeData.outputs.push({name:l,type:"array",demo:"[]"})}getConfig(){return[{key:"html",value:""}]}save(o){this.setConfig("html",o),this.noticeUpdate()}updateSaveTemplate(o){this.setConfig("saveTemplate",o),this.noticeUpdate()}loadCols(){this.appService?.listCollection().subscribe(o=>{this.ngZone?.run(()=>{this.lstCollections=o})})}updateCol(){this.setConfig("collection",this.selectedCollection)}ngOnInit(){this.html=this.findConfig("html"),"render"==this.mode&&(this.rendered=this.compileTemplate()),this.selectedCollection=this.findConfig("collection"),this.loadCols()}getAllSelectablePairs(o){const i=/bs-select="([^=>]+)=>([^"]+)"/g,l=[];let u;for(;null!==(u=i.exec(o));){const[p,_,v]=u;l.push({attr:_,varName:v})}return l}compileTemplate(){return lt.compileTemplate(this.html,this.vars)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-viewer-node"]],inputs:{vars:"vars"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-full"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","agentName","inputStr","vars"],[3,"onClose","onSave","html","inputStr","vars"],[3,"innerHTML"]],template:function(o,i){1&o&&e.DNE(0,Rb,9,4,"div",0)(1,jb,1,3,"button",1)(2,Gb,6,4,"div",2)(3,Db,1,1,"div",3),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf","render"==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.xH,G.y7,G.wz,G.BC,G.vS,Hi.V,Wt,Ct]})),r})();function Ob(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Vb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Url "),e.k0s(),e.j41(3,"div")(4,"input",20),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function zb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Cookies (`name: value` per line) "),e.k0s(),e.j41(3,"div")(4,"textarea",21),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,i)||(l.value=i),e.Njj(i)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function Bb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Pb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",25),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",26),e.EFF(3," Add new "),e.k0s()()}}function Lb(t,r){if(1&t&&(e.j41(0,"div",22)(1,"label",19),e.EFF(2," Request Body "),e.k0s(),e.DNE(3,Bb,3,5,"div",23)(4,Pb,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Xb(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Vb,5,1,"div",17)(2,zb,5,1,"div",17)(3,Lb,5,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","cookies"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key)}}function Ub(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Yb(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Ub,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Hb(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(i))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let ch=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","webAccess"),(0,f.A)(this,"desc","Get content from a websize")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"cookies",value:""},{key:"body",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}]}updateInputFormat(o){this.setConfig("body",o),this.noticeUpdate()}run(o,i,l,u,p,_){let v=this.findConfig("url",l),g=this.findConfig("cookies",l),y=this.findConfig("body",l);new mn(o).fetchUrl({url:v,key:g,args:y}).subscribe(C=>{let E=this.setupOutputValue(C.data,l);_(E)})}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-web-access-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"form-label"],["type","text",1,"form-control","text-small",3,"ngModelChange","ngModel"],["rows","3","wrap","off",1,"form-control","text-small",2,"white-space","pre",3,"ngModelChange","ngModel"],[1,"mb-2"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Ob,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Xb,4,3,"div",5),e.k0s()(),e.DNE(8,Yb,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Request Body Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Hb,1,2,"app-input-format",14),e.k0s()()()()),2&o&&(e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(),e.Y8G("ngIf",i.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",i.id,""),e.BMQ("data-bs-target","#settingModal-"+i.id),e.R7$(),e.Mz_("id","settingModal-",i.id,""),e.R7$(7),e.Y8G("ngIf","body"==(null==i.settingConf?null:i.settingConf.key)))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.me,G.BC,G.vS,Ct,Wt]})),r})();function Wb(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function qb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Zb(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(i.key))}),e.nrm(2,"i",18),e.EFF(3," Add Inputs "),e.k0s()()}}function Jb(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Inputs "),e.k0s(),e.DNE(3,qb,3,5,"div",14)(4,Zb,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Kb(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Jb,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key)}}function Qb(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ex(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Qb,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function tx(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Wb,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Kb,2,1,"div",8),e.k0s()(),e.DNE(8,ex,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function nx(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function ox(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.closeSetting())})("onSave",function(i){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,i))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function ix(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,ox,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key))}}let uh=(()=>{var t;class r extends Lt{constructor(...o){super(...o),(0,f.A)(this,"type","zip"),(0,f.A)(this,"desc","Zip your files")}getClassType(){return r}getConfig(){return[{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-zipData",type:"string",demo:""}]}updateConf(o,i){this.setConfig(o,i),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(o,i){1&o&&e.DNE(0,tx,9,4,"div",0)(1,nx,1,3,"button",1)(2,ix,5,3,"div",2),2&o&&(e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode),e.R7$(),e.Y8G("ngIf",""==i.mode))},dependencies:[V.MD,V.Sq,V.bT,G.YN,Hi.V,Wt,Ct]})),r})();function rx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function sx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},S.createElement("path",{d:"M0 0h32v4.2H0z"}))}function ax(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},S.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function lx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function cx(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ic=({children:t,className:r,...n})=>S.createElement("button",{type:"button",className:et(["react-flow__controls-button",r]),...n},t);Ic.displayName="ControlButton";const ux=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),dh=({style:t,showZoom:r=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:i,onZoomIn:l,onZoomOut:u,onFitView:p,onInteractiveChange:_,className:v,children:g,position:y="bottom-left"})=>{const x=At(),[C,E]=(0,S.useState)(!1),{isInteractive:I,minZoomReached:A,maxZoomReached:N}=nt(ux,Re),{zoomIn:j,zoomOut:O,fitView:M}=Xf();return(0,S.useEffect)(()=>{E(!0)},[]),C?S.createElement(vm,{className:et(["react-flow__controls",v]),position:y,style:t,"data-testid":"rf__controls"},r&&S.createElement(S.Fragment,null,S.createElement(Ic,{onClick:()=>{j(),l?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},S.createElement(rx,null)),S.createElement(Ic,{onClick:()=>{O(),u?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:A},S.createElement(sx,null))),n&&S.createElement(Ic,{className:"react-flow__controls-fitview",onClick:()=>{M(i),p?.()},title:"fit view","aria-label":"fit view"},S.createElement(ax,null)),o&&S.createElement(Ic,{className:"react-flow__controls-interactive",onClick:()=>{x.setState({nodesDraggable:!I,nodesConnectable:!I,elementsSelectable:!I}),_?.(!I)},title:"toggle interactivity","aria-label":"toggle interactivity"},S.createElement(I?cx:lx,null)),g):null};dh.displayName="Controls";var dx=(0,S.memo)(dh),To=function(t){return t.Lines="lines",t.Dots="dots",t.Cross="cross",t}(To||{});function px({color:t,dimensions:r,lineWidth:n}){return S.createElement("path",{stroke:t,strokeWidth:n,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function fx({color:t,radius:r}){return S.createElement("circle",{cx:r,cy:r,r,fill:t})}const mx={[To.Dots]:"#91919a",[To.Lines]:"#eee",[To.Cross]:"#e2e2e2"},_x={[To.Dots]:1,[To.Lines]:1,[To.Cross]:6},hx=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function ph({id:t,variant:r=To.Dots,gap:n=20,size:o,lineWidth:i=1,offset:l=2,color:u,style:p,className:_}){const v=(0,S.useRef)(null),{transform:g,patternId:y}=nt(hx,Re),x=u||mx[r],C=o||_x[r],E=r===To.Dots,I=r===To.Cross,A=Array.isArray(n)?n:[n,n],N=[A[0]*g[2]||1,A[1]*g[2]||1],j=C*g[2],O=I?[j,j]:N,M=E?[j/l,j/l]:[O[0]/l,O[1]/l];return S.createElement("svg",{className:et(["react-flow__background",_]),style:{...p,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:v,"data-testid":"rf__background"},S.createElement("pattern",{id:y+t,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},E?S.createElement(fx,{color:x,radius:j/l}):S.createElement(px,{dimensions:O,color:x,lineWidth:i})),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}ph.displayName="Background";var gx=(0,S.memo)(ph);const vx=({props:t})=>(t.minZoom=.25,t.maxZoom=1,t.autoPanOnConnect=!0,t.autoPanOnNodeDrag=!0,t.connectionRadius=20,t.elementsSelectable=!0,t.elevateNodesOnSelect=!0,t.fitView=!1,t.connectOnClick=!0,t.edgesFocusable=!0,t.nodesFocusable=!0,t.nodesDraggable=!0,t.nodesConnectable=!0,t.snapToGrid=!1,t.snapGrid=[15,15],t.nodeOrigin=[0,0],t.noPanClassName="nopan",t.connectionMode=qr.Strict,S.createElement(j_,{...t},S.createElement(dx,null),S.createElement(gx,{color:"dark"==t.theme?"#383948":"#dadadf",gap:20,size:2}))),yx=({props:t})=>S.createElement(Kf,null,S.createElement(vx,{props:t}));let fh=(()=>{var t;class r extends U_{constructor(...o){super(...o),(0,f.A)(this,"ngReactComponent",yx),(0,f.A)(this,"nodes",void 0),(0,f.A)(this,"edges",void 0),(0,f.A)(this,"defaultEdgeOptions",void 0),(0,f.A)(this,"onNodeClick",new e.bkB),(0,f.A)(this,"onNodeDoubleClick",new e.bkB),(0,f.A)(this,"onNodeMouseEnter",new e.bkB),(0,f.A)(this,"onNodeMouseMove",new e.bkB),(0,f.A)(this,"onNodeMouseLeave",new e.bkB),(0,f.A)(this,"onNodeContextMenu",new e.bkB),(0,f.A)(this,"onNodeDragStart",new e.bkB),(0,f.A)(this,"onNodeDrag",new e.bkB),(0,f.A)(this,"onNodeDragStop",new e.bkB),(0,f.A)(this,"onEdgeClick",new e.bkB),(0,f.A)(this,"onEdgeUpdate",new e.bkB),(0,f.A)(this,"onEdgeContextMenu",new e.bkB),(0,f.A)(this,"onEdgeMouseEnter",new e.bkB),(0,f.A)(this,"onEdgeMouseMove",new e.bkB),(0,f.A)(this,"onEdgeMouseLeave",new e.bkB),(0,f.A)(this,"onEdgeDoubleClick",new e.bkB),(0,f.A)(this,"onEdgeUpdateStart",new e.bkB),(0,f.A)(this,"onEdgeUpdateEnd",new e.bkB),(0,f.A)(this,"onNodesChange",new e.bkB),(0,f.A)(this,"onEdgesChange",new e.bkB),(0,f.A)(this,"onNodesDelete",new e.bkB),(0,f.A)(this,"onEdgesDelete",new e.bkB),(0,f.A)(this,"onSelectionDragStart",new e.bkB),(0,f.A)(this,"onSelectionDrag",new e.bkB),(0,f.A)(this,"onSelectionDragStop",new e.bkB),(0,f.A)(this,"onSelectionStart",new e.bkB),(0,f.A)(this,"onSelectionEnd",new e.bkB),(0,f.A)(this,"onSelectionContextMenu",new e.bkB),(0,f.A)(this,"onConnect",new e.bkB),(0,f.A)(this,"onConnectStart",new e.bkB),(0,f.A)(this,"onConnectEnd",new e.bkB),(0,f.A)(this,"onClickConnectStart",new e.bkB),(0,f.A)(this,"onClickConnectEnd",new e.bkB),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"onMove",new e.bkB),(0,f.A)(this,"onMoveStart",new e.bkB),(0,f.A)(this,"onMoveEnd",new e.bkB),(0,f.A)(this,"onSelectionChange",new e.bkB),(0,f.A)(this,"onPaneScroll",new e.bkB),(0,f.A)(this,"onPaneClick",new e.bkB),(0,f.A)(this,"onPaneContextMenu",new e.bkB),(0,f.A)(this,"onPaneMouseEnter",new e.bkB),(0,f.A)(this,"onPaneMouseMove",new e.bkB),(0,f.A)(this,"onPaneMouseLeave",new e.bkB),(0,f.A)(this,"onError",new e.bkB),(0,f.A)(this,"id",void 0),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"edgeTypes",void 0),(0,f.A)(this,"connectionLineType",void 0),(0,f.A)(this,"connectionLineStyle",void 0),(0,f.A)(this,"connectionLineComponent",void 0),(0,f.A)(this,"connectionLineContainerStyle",void 0),(0,f.A)(this,"connectionMode",void 0),(0,f.A)(this,"deleteKeyCode",void 0),(0,f.A)(this,"selectionKeyCode",void 0),(0,f.A)(this,"selectionOnDrag",void 0),(0,f.A)(this,"selectionMode",void 0),(0,f.A)(this,"panActivationKeyCode",void 0),(0,f.A)(this,"multiSelectionKeyCode",void 0),(0,f.A)(this,"zoomActivationKeyCode",void 0),(0,f.A)(this,"snapToGrid",void 0),(0,f.A)(this,"snapGrid",void 0),(0,f.A)(this,"onlyRenderVisibleElements",void 0),(0,f.A)(this,"nodesDraggable",void 0),(0,f.A)(this,"nodesConnectable",void 0),(0,f.A)(this,"nodesFocusable",void 0),(0,f.A)(this,"nodeOrigin",void 0),(0,f.A)(this,"edgesFocusable",void 0),(0,f.A)(this,"elementsSelectable",void 0),(0,f.A)(this,"selectNodesOnDrag",void 0),(0,f.A)(this,"panOnDrag",void 0),(0,f.A)(this,"minZoom",void 0),(0,f.A)(this,"maxZoom",void 0),(0,f.A)(this,"defaultViewport",void 0),(0,f.A)(this,"translateExtent",void 0),(0,f.A)(this,"preventScrolling",void 0),(0,f.A)(this,"nodeExtent",void 0),(0,f.A)(this,"defaultMarkerColor",void 0),(0,f.A)(this,"zoomOnScroll",void 0),(0,f.A)(this,"zoomOnPinch",void 0),(0,f.A)(this,"panOnScroll",void 0),(0,f.A)(this,"panOnScrollSpeed",void 0),(0,f.A)(this,"panOnScrollMode",void 0),(0,f.A)(this,"zoomOnDoubleClick",void 0),(0,f.A)(this,"edgeUpdaterRadius",void 0),(0,f.A)(this,"noDragClassName",void 0),(0,f.A)(this,"noWheelClassName",void 0),(0,f.A)(this,"noPanClassName",void 0),(0,f.A)(this,"fitView",void 0),(0,f.A)(this,"fitViewOptions",void 0),(0,f.A)(this,"connectOnClick",void 0),(0,f.A)(this,"attributionPosition",void 0),(0,f.A)(this,"proOptions",void 0),(0,f.A)(this,"elevateNodesOnSelect",void 0),(0,f.A)(this,"elevateEdgesOnSelect",void 0),(0,f.A)(this,"disableKeyboardA11y",void 0),(0,f.A)(this,"autoPanOnNodeDrag",void 0),(0,f.A)(this,"autoPanOnConnect",void 0),(0,f.A)(this,"connectionRadius",void 0)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-reactflow"]],inputs:{nodes:"nodes",edges:"edges",defaultEdgeOptions:"defaultEdgeOptions",id:"id",nodeTypes:"nodeTypes",edgeTypes:"edgeTypes",connectionLineType:"connectionLineType",connectionLineStyle:"connectionLineStyle",connectionLineComponent:"connectionLineComponent",connectionLineContainerStyle:"connectionLineContainerStyle",connectionMode:"connectionMode",deleteKeyCode:"deleteKeyCode",selectionKeyCode:"selectionKeyCode",selectionOnDrag:"selectionOnDrag",selectionMode:"selectionMode",panActivationKeyCode:"panActivationKeyCode",multiSelectionKeyCode:"multiSelectionKeyCode",zoomActivationKeyCode:"zoomActivationKeyCode",snapToGrid:"snapToGrid",snapGrid:"snapGrid",onlyRenderVisibleElements:"onlyRenderVisibleElements",nodesDraggable:"nodesDraggable",nodesConnectable:"nodesConnectable",nodesFocusable:"nodesFocusable",nodeOrigin:"nodeOrigin",edgesFocusable:"edgesFocusable",elementsSelectable:"elementsSelectable",selectNodesOnDrag:"selectNodesOnDrag",panOnDrag:"panOnDrag",minZoom:"minZoom",maxZoom:"maxZoom",defaultViewport:"defaultViewport",translateExtent:"translateExtent",preventScrolling:"preventScrolling",nodeExtent:"nodeExtent",defaultMarkerColor:"defaultMarkerColor",zoomOnScroll:"zoomOnScroll",zoomOnPinch:"zoomOnPinch",panOnScroll:"panOnScroll",panOnScrollSpeed:"panOnScrollSpeed",panOnScrollMode:"panOnScrollMode",zoomOnDoubleClick:"zoomOnDoubleClick",edgeUpdaterRadius:"edgeUpdaterRadius",noDragClassName:"noDragClassName",noWheelClassName:"noWheelClassName",noPanClassName:"noPanClassName",fitView:"fitView",fitViewOptions:"fitViewOptions",connectOnClick:"connectOnClick",attributionPosition:"attributionPosition",proOptions:"proOptions",elevateNodesOnSelect:"elevateNodesOnSelect",elevateEdgesOnSelect:"elevateEdgesOnSelect",disableKeyboardA11y:"disableKeyboardA11y",autoPanOnNodeDrag:"autoPanOnNodeDrag",autoPanOnConnect:"autoPanOnConnect",connectionRadius:"connectionRadius"},outputs:{onNodeClick:"onNodeClick",onNodeDoubleClick:"onNodeDoubleClick",onNodeMouseEnter:"onNodeMouseEnter",onNodeMouseMove:"onNodeMouseMove",onNodeMouseLeave:"onNodeMouseLeave",onNodeContextMenu:"onNodeContextMenu",onNodeDragStart:"onNodeDragStart",onNodeDrag:"onNodeDrag",onNodeDragStop:"onNodeDragStop",onEdgeClick:"onEdgeClick",onEdgeUpdate:"onEdgeUpdate",onEdgeContextMenu:"onEdgeContextMenu",onEdgeMouseEnter:"onEdgeMouseEnter",onEdgeMouseMove:"onEdgeMouseMove",onEdgeMouseLeave:"onEdgeMouseLeave",onEdgeDoubleClick:"onEdgeDoubleClick",onEdgeUpdateStart:"onEdgeUpdateStart",onEdgeUpdateEnd:"onEdgeUpdateEnd",onNodesChange:"onNodesChange",onEdgesChange:"onEdgesChange",onNodesDelete:"onNodesDelete",onEdgesDelete:"onEdgesDelete",onSelectionDragStart:"onSelectionDragStart",onSelectionDrag:"onSelectionDrag",onSelectionDragStop:"onSelectionDragStop",onSelectionStart:"onSelectionStart",onSelectionEnd:"onSelectionEnd",onSelectionContextMenu:"onSelectionContextMenu",onConnect:"onConnect",onConnectStart:"onConnectStart",onConnectEnd:"onConnectEnd",onClickConnectStart:"onClickConnectStart",onClickConnectEnd:"onClickConnectEnd",onInit:"onInit",onMove:"onMove",onMoveStart:"onMoveStart",onMoveEnd:"onMoveEnd",onSelectionChange:"onSelectionChange",onPaneScroll:"onPaneScroll",onPaneClick:"onPaneClick",onPaneContextMenu:"onPaneContextMenu",onPaneMouseEnter:"onPaneMouseEnter",onPaneMouseMove:"onPaneMouseMove",onPaneMouseLeave:"onPaneMouseLeave",onError:"onError"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(o,i){},styles:[".react-flow{direction:ltr}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1;cursor:grab}.react-flow__pane.selection{cursor:pointer}.react-flow__pane.dragging{cursor:grabbing}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow .react-flow__edges{pointer-events:none;overflow:visible}.react-flow__edge-path,.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1;fill:none}.react-flow__edge{pointer-events:visibleStroke;cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge:focus .react-flow__edge-path,.react-flow__edge:focus-visible .react-flow__edge-path{stroke:#555}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-textbg{fill:#fff}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__connectionline{z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:grab}.react-flow__node.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background:#1a192b;border:1px solid white;border-radius:100%}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:-4px;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{top:50%;left:-4px;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:#ffffff80;padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:3px;width:150px;font-size:12px;color:#222;text-align:center;border-width:1px;border-style:solid;border-color:#1a192b;background-color:#fff}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:0 1px 4px 1px #00000014}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background-color:#f0f0f040}.react-flow__nodesselection-rect,.react-flow__selection{background:#0059dc14;border:1px dotted rgba(0,89,220,.8)}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls{box-shadow:0 0 2px 1px #00000014}.react-flow__controls-button{border:none;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;display:flex;justify-content:center;align-items:center;width:16px;height:16px;cursor:pointer;-webkit-user-select:none;user-select:none;padding:5px}.react-flow__controls-button:hover{background:#f4f4f4}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__minimap{background-color:#fff}.react-flow__minimap svg{display:block}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:#3367d9;transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:#3367d9;border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}\n","ngx-reactflow .react-flow__handle{height:12px;width:12px;border-width:2px}ngx-reactflow .selected .card{border:2px solid #696cff!important}\n"],encapsulation:2})),r})();const bx=()=>["Backspace","Delete"];function xx(t,r){if(1&t){const n=e.RV6();e.j41(0,"a",38),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.addNode(i))}),e.j41(1,"div",39)(2,"span",40),e.EFF(3),e.k0s()(),e.j41(4,"div",41)(5,"h6",42),e.EFF(6),e.k0s(),e.j41(7,"small",43),e.EFF(8),e.k0s()()()}if(2&t){let n;const o=e.XpG().$implicit;e.R7$(3),e.JRh(o.type[0]),e.R7$(3),e.JRh(null!==(n=o.displayName)&&void 0!==n?n:o.type),e.R7$(2),e.JRh(o.desc)}}function Cx(t,r){if(1&t&&(e.j41(0,"h6",44),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(n)}}function Sx(t,r){if(1&t&&(e.j41(0,"li"),e.DNE(1,xx,9,3,"a",36)(2,Cx,2,1,"h6",37),e.k0s()),2&t){const n=r.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!o.isString(n)),e.R7$(),e.Y8G("ngIf",o.isString(n))}}function kx(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",19)(2,"ngx-reactflow",20),e.bIt("onConnect",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onConnect(i))})("onEdgesDelete",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesDelete(i))})("onNodesDelete",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesDelete(i))})("onEdgesChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesChange(i))})("onNodesChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesChange(i))}),e.k0s()(),e.j41(3,"div",21)(4,"div",22)(5,"button",23),e.nrm(6,"span",24),e.k0s(),e.j41(7,"mat-menu",null,0)(9,"div",25)(10,"ul",26),e.DNE(11,Sx,3,2,"li",27),e.k0s()()()(),e.j41(12,"button",28),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.save())}),e.nrm(13,"span"),e.k0s(),e.j41(14,"span",29),e.EFF(15),e.k0s()(),e.j41(16,"div",30)(17,"button",31),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.close())}),e.nrm(18,"span",32),e.k0s()(),e.j41(19,"div",33)(20,"button",34),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.run())}),e.nrm(21,"span",35),e.k0s()()()}if(2&t){const n=e.sdS(8),o=e.XpG();e.R7$(2),e.Y8G("nodes",o.nodes)("edges",o.edges)("nodeTypes",o.nodeTypes)("deleteKeyCode",e.lJ4(13,bx)),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(6),e.Y8G("ngForOf",o.avaiableNodes),e.R7$(),e.ZvI("btn btn-icon btn-",o.saved?"success":"secondary"," mt-3 ml-3"),e.R7$(),e.ZvI("tf-icons bx bx-",o.saved?"check":"save"," bx-22px"),e.R7$(2),e.JRh(null==o.curApp?null:o.curApp.name)}}let wx=(()=>{var t;class r{isString(o){return"string"==typeof o}constructor(o,i,l,u,p){(0,f.A)(this,"route",void 0),(0,f.A)(this,"appRef",void 0),(0,f.A)(this,"injector",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"reactFlow",void 0),(0,f.A)(this,"nodes",[]),(0,f.A)(this,"edges",[]),(0,f.A)(this,"avaiableNodes",["Input",(new Z_).getNodeSpec(),"Data Processor",(new K_).getNodeSpec(),(new q_).getNodeSpec(),(new nh).getNodeSpec(),(new Y_).getNodeSpec(),(new ch).getNodeSpec(),(new H_).getNodeSpec(),(new rh).getNodeSpec(),(new J_).getNodeSpec(),(new ih).getNodeSpec(),(new W_).getNodeSpec(),(new ah).getNodeSpec(),"Storage",(new oh).getNodeSpec(),(new sh).getNodeSpec(),"Data Query",(new eh).getNodeSpec(),"Output",(new lh).getNodeSpec(),(new uh).getNodeSpec(),(new Q_).getNodeSpec()]),(0,f.A)(this,"data",[]),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"saved",!1),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"showMenu",!1),(0,f.A)(this,"newCollectionName",""),(0,f.A)(this,"newCollectionSpec",""),this.route=o,this.appRef=i,this.injector=l,this.ngZone=u,this.appService=p,this.nodeTypes={form:(new Z_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),embedding:(new q_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),database:(new oh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),search:(new eh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),agent:(new K_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),htmlViewer:(new lh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),router:(new Q_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),spliter:(new nh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),vectorDatabase:(new sh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),apiInvoker:(new Y_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToAudio:(new H_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),transcription:(new rh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToImage:(new J_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),text:(new ih).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),check:(new W_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),videoRender:(new ah).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),zip:(new uh).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),webAccess:(new ch).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)})}}ngOnInit(){var o=this;document.addEventListener("keydown",function(){var i=(0,Fe.A)(function*(l){let u=o.nodes.filter(_=>_.selected)[0],p=window.getSelection()?.toString();if(u&&!p&&l.ctrlKey&&"c"===l.key)try{yield navigator.clipboard.writeText(JSON.stringify(u.data))}catch(_){console.error("Failed to copy text: ",_)}});return function(l){return i.apply(this,arguments)}}()),document.addEventListener("paste",function(){var i=(0,Fe.A)(function*(l){try{const u=yield navigator.clipboard.readText();if(!u.startsWith('{"id":"n'))return;l.preventDefault();let p=JSON.parse(u);p.x+=20,p.y+=20,p.inputs=[],p.links=[],o.addNode(p)}catch(u){console.error("Failed to read from clipboard: ",u)}});return function(l){return i.apply(this,arguments)}}()),this.route.paramMap.subscribe(i=>{this.id=+(i.get("id")??"0"),this.load()})}save(o){this.curApp.config=JSON.stringify(this.data),this.appService.save(this.curApp).subscribe(i=>{this.curApp.id=+i.data,this.saved=!0,o&&o(+i.data),setTimeout(()=>{this.saved=!1},2e3)})}onNodesChange(o){this.ngZone.run(()=>{this.nodes=Yf(o[0],this.nodes);let i=o[0][0].id,l=this.nodes.find(p=>p.id==i),u=this.data.find(p=>p.id==i);u&&(u.x=l.position.x,u.y=l.position.y)})}onEdgesChange(o){this.ngZone.run(()=>{this.edges=d_(o[0],this.edges)})}onNodesDelete(o){let i=o[0][0].id;this.data=this.data.filter(u=>u.id!=i);for(let u of this.data){let p=u.links.indexOf(i);p>=0&&u.links.splice(p,1)}let l=document.getElementById("settingModal-"+i);l&&l.parentNode?.removeChild(l)}onEdgesDelete(o){let i=o[0][0].source,l=o[0][0].target,u=this.data.filter(_=>_.id==i)[0],p=u.links.indexOf(l);p>=0&&u.links.splice(p,1),this.updateInput(this.data.filter(_=>_.id==l)[0]),this.reRender()}onConnect(o){let i=this.data.filter(l=>l.id==o[0].source)[0];i.links.push(o[0].target),this.updateInput(i),this.ngZone.run(()=>{let l=Dm(o[0],this.edges);for(let u of l)u.animated=!0,u.type="bezier",u.style={strokeWidth:2,stroke:"#009688"};this.edges=l,this.reRender()})}distinctByName(o){const i=new Set;return o.filter(l=>!i.has(l.name)&&(i.add(l.name),!0))}updateInput(o){o.inputs=[];let i=this.data.filter(u=>u.links.includes(o.id));for(let u of i)o.inputs.push(...u.inputs),o.inputs.push(...u.outputs);o.inputs=this.distinctByName(o.inputs);let l=this.data.filter(u=>o.links.includes(u.id));if(l&&0!=l.length)for(let u of l)this.updateInput(u)}reRender(){let o=[...this.nodes];this.nodes=o}onNodeConfigChange(o){o&&(this.updateInput(o),this.reRender())}addNode(o){let i=0==this.data.length?1:Math.max(...this.data.map(_=>+_.id.substring(1)))+1,l=JSON.parse(JSON.stringify(o));l.id=`n${i}`,this.data.push(l),this.showMenu=!1;let u=this.nodes.filter(_=>_.selected)[0];u&&(u.selected=!1,l.x=u.position.x+20,l.y=u.position.y+20);let p=[...this.nodes];p.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,selected:!0,position:{x:l.x??150,y:l.y??150}}),this.nodes=p}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(o=>{this.curApp=o,this.data=JSON.parse(o.config),this.renderGraph()})}newApp(){this.renderGraph()}close(){window.location.href="/vi/admin/ai/dashboard"}run(o){o&&(this.curApp=o),this.save(i=>{window.location.href="/vi/admin/ai/app/"+i})}renderGraph(){const o=[],i=[];for(let l of this.data){i.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,position:{x:l.x??0,y:l.y??0}});for(let u of l.links)o.push({source:l.id,target:u,id:l.id+"_"+u,type:"bezier",animated:!0,style:{strokeWidth:2,stroke:"#009688"}})}this.edges=o,this.nodes=i}toggleMenu(){this.showMenu=!this.showMenu}setupNewCollection(){let o=this.nodes.filter(i=>i.selected)[0];if(o){let i={};for(let l of o.data.inputs){let u=l.name.split("-")[0];i[l.name.substring(u.length+1)]="json"==l.type?l.demo:l.type}this.newCollectionSpec=JSON.stringify(i,null,4)}}closeNewCollection(){this.newCollectionName="",this.newCollectionSpec=""}addCollection(){this.appService.addCollection({name:this.newCollectionName,spec:this.newCollectionSpec}).subscribe(o=>{})}addVCollection(){this.appService.addVCollection({name:this.newCollectionName}).subscribe(o=>{})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ne.nX),e.rXU(e.o8S),e.rXU(e.zZn),e.rXU(e.SKi),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow"]],viewQuery:function(o,i){if(1&o&&e.GBs(fh,5),2&o){let l;e.mGM(l=e.lsd())&&(i.reactFlow=l.first)}},standalone:!0,features:[e.aNF],decls:39,vars:6,consts:[["menu",""],[4,"ngIf"],["id","btnShowAddCollectionModal","data-bs-toggle","modal",1,"d-none",3,"click"],["data-bs-backdrop","static","id","AddCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","Folder Name",1,"form-control",3,"ngModelChange","ngModel"],[3,"onChange","data"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click"],["id","btnShowAddVCollectionModal","data-bs-toggle","modal",1,"d-none"],["data-bs-backdrop","static","id","AddVCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","Collection Name",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3"],[2,"width","100%","height","100vh","position","absolute"],[3,"onConnect","onEdgesDelete","onNodesDelete","onEdgesChange","onNodesChange","nodes","edges","nodeTypes","deleteKeyCode"],[2,"position","absolute","z-index","999"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-icon","btn-primary","mt-3","ml-3","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-22px"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"ml-3"],[2,"position","absolute","z-index","999","right","10px","top","15px"],["type","button",1,"btn","btn-label-secondary","p-2",3,"click"],[1,"tf-icons","bx","bx-x","bx-22px"],[2,"position","absolute","z-index","999","bottom","40px","right","40px"],["type","button",1,"btn","btn-icon","btn-success",3,"click"],[1,"tf-icons","bx","bx-play","bx-22px"],["href","javascript:void(0);","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-header text-uppercase",4,"ngIf"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"avatar","mr-3"],[1,"avatar-initial","rounded-circle","bg-label-success"],[1,"list-content"],[1,"mb-0","text-capitalize"],[1,"text-muted"],[1,"dropdown-header","text-uppercase"]],template:function(o,i){1&o&&(e.DNE(0,kx,22,14,"div",1),e.j41(1,"button",2),e.bIt("click",function(){return i.setupNewCollection()}),e.k0s(),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),e.EFF(7," Your Folders "),e.k0s()(),e.j41(8,"div",8)(9,"div",9)(10,"label",10),e.EFF(11,"Folder Name"),e.k0s(),e.j41(12,"input",11),e.mxI("ngModelChange",function(u){return e.DH7(i.newCollectionName,u)||(i.newCollectionName=u),u}),e.k0s()(),e.j41(13,"div",9)(14,"label",10),e.EFF(15,"Data Specification"),e.k0s(),e.j41(16,"app-json-editor",12),e.bIt("onChange",function(u){return i.newCollectionSpec=u}),e.k0s()(),e.j41(17,"div")(18,"button",13),e.bIt("click",function(){return i.closeNewCollection()}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",14),e.bIt("click",function(){return i.addCollection()}),e.EFF(21,"Create Folder"),e.k0s()()()()()(),e.nrm(22,"button",15),e.j41(23,"div",16)(24,"div",4)(25,"div",5)(26,"div",6)(27,"h5",7),e.EFF(28," Manage Vector Collections "),e.k0s()(),e.j41(29,"div",8)(30,"div",9)(31,"label",10),e.EFF(32,"Collection Name"),e.k0s(),e.j41(33,"input",17),e.mxI("ngModelChange",function(u){return e.DH7(i.newCollectionName,u)||(i.newCollectionName=u),u}),e.k0s()(),e.j41(34,"div")(35,"button",18),e.EFF(36,"Close"),e.k0s(),e.j41(37,"button",14),e.bIt("click",function(){return i.addVCollection()}),e.EFF(38,"Create Collection"),e.k0s()()()()()()),2&o&&(e.Y8G("ngIf",null==i.curApp?null:i.curApp.name),e.R7$(),e.BMQ("data-bs-target","#AddCollectionModal"),e.R7$(11),e.R50("ngModel",i.newCollectionName),e.R7$(4),e.Y8G("data",i.newCollectionSpec),e.R7$(6),e.BMQ("data-bs-target","#AddVCollectionModal"),e.R7$(11),e.R50("ngModel",i.newCollectionName))},dependencies:[fh,V.MD,V.Sq,V.bT,G.YN,G.me,G.BC,G.vS,C0,Le.Cn,Le.kk,Le.Cp],styles:[".avatar[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%]{background:#3dbe3d;padding:10px;color:#fff;border-radius:50%;margin-right:10px;text-transform:uppercase;display:inline-block;width:39px;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})),r})(),Nx=(()=>{var t;class r extends Pe.H{}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ai-master-page"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[De.s,V.MD,G.X1,Ne.iI,Ne.n3,G.YN,Ae.flO,we.L,Ve.Id],encapsulation:2})),r})();function Ex(t,r){1&t&&(e.j41(0,"div",1),e.EFF(1,"Loading..."),e.k0s())}function Ix(t,r){1&t&&(e.j41(0,"div",8),e.EFF(1," No data "),e.k0s())}function Ax(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"textarea",11),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.content,i)||(l.content=i),e.Njj(i)}),e.k0s(),e.j41(3,"p",12)(4,"small",13),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.delData(i))}),e.EFF(5,"Delete"),e.k0s(),e.j41(6,"small",14),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.saveData(i))}),e.EFF(7,"Save"),e.k0s()()()()}if(2&t){const n=r.$implicit;e.R7$(2),e.R50("ngModel",n.content),e.R7$(2),e.Mz_("id","btn-del-",n.id,""),e.R7$(2),e.Mz_("id","btn-save-",n.id,"")}}let Tx=(()=>{var t;class r{constructor(o,i){(0,f.A)(this,"route",void 0),(0,f.A)(this,"app",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"curCol",void 0),(0,f.A)(this,"searchStr",""),(0,f.A)(this,"lstContent",[]),this.route=o,this.app=i}ngOnInit(){this.route.paramMap.subscribe(o=>{let i=o.get("id")??"";i.startsWith("v-")?this.app.listVCollection().subscribe(l=>{this.curCol=l.find(u=>u.id==+i.substring(2)),this.loadData()}):this.app.listCollection().subscribe(l=>{this.curCol=l.find(u=>u.id==+i),this.loadData()})})}deleteDb(){this.curCol&&confirm("Are you sure to delete this Storage?")&&this.app.delColection(this.curCol).subscribe(o=>{document.location.href="/home"})}loadData(){this.search()}search(){this.lstContent=[],this.isLoading=!0,"data"==this.curCol?.type?this.app.listData({id:this.curCol.id,name:this.searchStr}).subscribe(o=>{this.lstContent=o,this.isLoading=!1,setTimeout(()=>{this.autoResizeTextareas()},1e3)}):this.app.searchVector({collection:this.curCol?.name,content:this.searchStr,id:0,vector:[]}).subscribe(o=>{this.lstContent=o.map(i=>({content:i})),this.isLoading=!1})}delData(o){document.getElementById("btn-del-"+o.id).innerHTML="Deleting...","data"==this.curCol?.type&&this.app.delData(o).subscribe(i=>{this.lstContent=this.lstContent.filter(l=>l.id!=o.id)})}saveData(o){document.getElementById("btn-save-"+o.id).innerHTML="Saving...","data"==this.curCol?.type&&this.app.saveData(o).subscribe(i=>{document.getElementById("btn-save-"+o.id).innerHTML="Saved OK",setTimeout(()=>{document.getElementById("btn-save-"+o.id).innerHTML="Save"},2e3)})}close(){window.location.href="/home"}autoResizeTextareas(){document.querySelectorAll("textarea").forEach(i=>{const l=()=>{i.style.height="auto",i.style.height=i.scrollHeight+"px"};i.addEventListener("input",l),l()})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ne.nX),e.rXU(mn))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-database"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"box","p-3"],[1,"mt-3"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["class","mt-3",4,"ngIf"],["class","p-3",4,"ngIf"],["class","card mt-3",4,"ngFor","ngForOf"],[1,"mt-3","text-end"],["type","button",1,"btn","btn-text-danger",3,"click"],[1,"p-3"],[1,"card","mt-3"],[1,"card-body"],[1,"form-control",2,"min-height","150px",3,"ngModelChange","ngModel"],[1,"card-text"],[1,"text-danger","cursor-pointer","mr-5",3,"click","id"],[1,"text-primary","cursor-pointer","mr-5",3,"click","id"]],template:function(o,i){1&o&&(e.j41(0,"teacher-layout")(1,"div",0)(2,"div",1)(3,"div")(4,"input",2),e.mxI("ngModelChange",function(u){return e.DH7(i.searchStr,u)||(i.searchStr=u),u}),e.bIt("keydown.enter",function(){return i.search()}),e.k0s(),e.DNE(5,Ex,2,0,"div",3)(6,Ix,2,0,"div",4)(7,Ax,8,5,"div",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return i.deleteDb()}),e.EFF(10),e.k0s()()()()),2&o&&(e.R7$(4),e.R50("ngModel",i.searchStr),e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",0==i.lstContent.length),e.R7$(),e.Y8G("ngForOf",i.lstContent),e.R7$(3),e.SpI(" Delete ",null==i.curCol?null:i.curCol.name," Storage "))},dependencies:[V.MD,V.Sq,V.bT,G.YN,G.me,G.BC,G.vS,_s]})),r})();function Fx(t,r){if(1&t&&e.nrm(0,"app-app-view",2),2&t){const n=e.XpG();e.Y8G("appId",n.id)("queryParamsObject",n.queryParamsObject)}}const Rx=[{path:"",component:Nx,children:[{path:"",component:ai},{path:"demo",component:_u,canActivate:[kt]},{path:"dashboard",component:ai,canActivate:[kt]},{path:"edu-store-teacher",component:Ps},{path:"app/:id",component:(()=>{var t;class r{constructor(o){(0,f.A)(this,"route",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"queryParamsObject",{}),this.route=o}ngOnInit(){this.route.paramMap.subscribe(o=>{this.id=+(o.get("id")??"0"),this.route.queryParams.subscribe(i=>{this.queryParamsObject={...i},console.log("Mapped Query Params:",this.queryParamsObject)})})}}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)(e.rXU(Ne.nX))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow-runner"]],standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"box","p-0","mt-5","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","w-md-50","mx-auto"],[3,"appId","queryParamsObject",4,"ngIf"],[3,"appId","queryParamsObject"]],template:function(o,i){1&o&&(e.j41(0,"teacher-layout")(1,"div",0),e.DNE(2,Fx,1,2,"app-app-view",1),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngIf",i.id))},dependencies:[_s,V.MD,V.bT,G.YN,Bo]})),r})(),canActivate:[kt]},{path:"db/:id",component:Tx,canActivate:[kt]},{path:"flow/:id",component:wx,canActivate:[kt]}]}];let jx=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(o){return new(o||t)}),(0,f.A)(r,"\u0275mod",e.$C({type:t})),(0,f.A)(r,"\u0275inj",e.G2t({imports:[Ne.iI.forChild(Rx),Ne.iI,W.XE]})),r})()},7578:(qt,oe,le)=>{var f=le(1395),Ne=le(1605);function W(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e=new Set,Ot={};function kt(s,a){Fe(s,a),Fe(s+"Capture",a)}function Fe(s,a){for(Ot[s]=a,s=0;s<a.length;s++)e.add(a[s])}var V=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G=Object.prototype.hasOwnProperty,Pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ae={},Ve={};function we(s,a,c,d,m,h,b){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=h,this.removeEmptyString=b}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ue[s]=new we(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];Ue[a]=new we(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ue[s]=new we(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ue[s]=new we(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ue[s]=new we(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){Ue[s]=new we(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){Ue[s]=new we(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){Ue[s]=new we(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){Ue[s]=new we(s,5,!1,s.toLowerCase(),null,!1,!1)});var Tt=/[\-:]([a-z])/g;function Zt(s){return s[1].toUpperCase()}function Xt(s,a,c,d){var m=Ue.hasOwnProperty(a)?Ue[a]:null;(null!==m?0!==m.type:d||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(function Le(s,a,c,d){if(null===a||typeof a>"u"||function Oe(s,a,c,d){if(null!==c&&0===c.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(s=s.toLowerCase().slice(0,5))&&"aria-"!==s);default:return!1}}(s,a,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}(a,c,m,d)&&(c=null),d||null===m?function De(s){return!!G.call(Ve,s)||!G.call(Ae,s)&&(Pe.test(s)?Ve[s]=!0:(Ae[s]=!0,!1))}(a)&&(null===c?s.removeAttribute(a):s.setAttribute(a,""+c)):m.mustUseProperty?s[m.propertyName]=null===c?3!==m.type&&"":c:(a=m.attributeName,d=m.attributeNamespace,null===c?s.removeAttribute(a):(c=3===(m=m.type)||4===m&&!0===c?"":""+c,d?s.setAttributeNS(d,a,c):s.setAttribute(a,c))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(Tt,Zt);Ue[a]=new we(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(Tt,Zt);Ue[a]=new we(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(Tt,Zt);Ue[a]=new we(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){Ue[s]=new we(s,1,!1,s.toLowerCase(),null,!1,!1)}),Ue.xlinkHref=new we("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){Ue[s]=new we(s,1,!1,s.toLowerCase(),null,!0,!0)});var mt=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vt=Symbol.for("react.element"),ot=Symbol.for("react.portal"),wt=Symbol.for("react.fragment"),Nn=Symbol.for("react.strict_mode"),En=Symbol.for("react.profiler"),lo=Symbol.for("react.provider"),Ft=Symbol.for("react.context"),pn=Symbol.for("react.forward_ref"),Mn=Symbol.for("react.suspense"),fn=Symbol.for("react.suspense_list"),Jn=Symbol.for("react.memo"),te=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _e=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Te=Symbol.iterator;function Ye(s){return null===s||"object"!=typeof s?null:"function"==typeof(s=Te&&s[Te]||s["@@iterator"])?s:null}var se,F=Object.assign;function Ie(s){if(void 0===se)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);se=a&&a[1]||""}return"\n"+se+s}var Xe=!1;function $e(s,a){if(!s||Xe)return"";Xe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(z){var d=z}Reflect.construct(s,[],a)}else{try{a.call()}catch(z){d=z}s.call(a.prototype)}else{try{throw Error()}catch(z){d=z}s()}}catch(z){if(z&&d&&"string"==typeof z.stack){for(var m=z.stack.split("\n"),h=d.stack.split("\n"),b=m.length-1,k=h.length-1;1<=b&&0<=k&&m[b]!==h[k];)k--;for(;1<=b&&0<=k;b--,k--)if(m[b]!==h[k]){if(1!==b||1!==k)do{if(b--,0>--k||m[b]!==h[k]){var T="\n"+m[b].replace(" at new "," at ");return s.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",s.displayName)),T}}while(1<=b&&0<=k);break}}}finally{Xe=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?Ie(s):""}function Je(s){switch(s.tag){case 5:return Ie(s.type);case 16:return Ie("Lazy");case 13:return Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 2:case 15:return $e(s.type,!1);case 11:return $e(s.type.render,!1);case 1:return $e(s.type,!0);default:return""}}function ct(s){if(null==s)return null;if("function"==typeof s)return s.displayName||s.name||null;if("string"==typeof s)return s;switch(s){case wt:return"Fragment";case ot:return"Portal";case En:return"Profiler";case Nn:return"StrictMode";case Mn:return"Suspense";case fn:return"SuspenseList"}if("object"==typeof s)switch(s.$$typeof){case Ft:return(s.displayName||"Context")+".Consumer";case lo:return(s._context.displayName||"Context")+".Provider";case pn:var a=s.render;return(s=s.displayName)||(s=""!==(s=a.displayName||a.name||"")?"ForwardRef("+s+")":"ForwardRef"),s;case Jn:return null!==(a=s.displayName||null)?a:ct(s.type)||"Memo";case te:a=s._payload,s=s._init;try{return ct(s(a))}catch{}}return null}function _t(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=(s=a.render).displayName||s.name||"",a.displayName||(""!==s?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ct(a);case 8:return a===Nn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function He(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":case"object":return s;default:return""}}function Jt(s){var a=s.type;return(s=s.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===a||"radio"===a)}function as(s){s._valueTracker||(s._valueTracker=function np(s){var a=Jt(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&"function"==typeof c.get&&"function"==typeof c.set){var m=c.get,h=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){d=""+b,h.call(this,b)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}(s))}function Rc(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=Jt(s)?s.checked?"true":"false":s.value),(s=d)!==c&&(a.setValue(s),!0)}function ls(s){if(typeof(s=s||(typeof document<"u"?document:void 0))>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ua(s,a){return F({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a.checked??s._wrapperState.initialChecked})}function jc(s,a){var c=null==a.defaultValue?"":a.defaultValue,d=null!=a.checked?a.checked:a.defaultChecked;c=He(null!=a.value?a.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function Mc(s,a){null!=(a=a.checked)&&Xt(s,"checked",a,!1)}function Ya(s,a){Mc(s,a);var c=He(a.value),d=a.type;if(null!=c)"number"===d?(0===c&&""===s.value||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if("submit"===d||"reset"===d)return void s.removeAttribute("value");a.hasOwnProperty("value")?Mo(s,a.type,c):a.hasOwnProperty("defaultValue")&&Mo(s,a.type,He(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(s.defaultChecked=!!a.defaultChecked)}function $c(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var d=a.type;if(("submit"===d||"reset"===d)&&null==a.value)return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}""!==(c=s.name)&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,""!==c&&(s.name=c)}function Mo(s,a,c){("number"!==a||ls(s.ownerDocument)!==s)&&(null==c?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Kn=Array.isArray;function $o(s,a,c,d){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&d&&(s[c].defaultSelected=!0)}else{for(c=""+He(c),a=null,m=0;m<s.length;m++){if(s[m].value===c)return s[m].selected=!0,void(d&&(s[m].defaultSelected=!0));null!==a||s[m].disabled||(a=s[m])}null!==a&&(a.selected=!0)}}function Wi(s,a){if(null!=a.dangerouslySetInnerHTML)throw Error(W(91));return F({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Gc(s,a){var c=a.value;if(null==c){if(c=a.children,a=a.defaultValue,null!=c){if(null!=a)throw Error(W(92));if(Kn(c)){if(1<c.length)throw Error(W(93));c=c[0]}a=c}null==a&&(a=""),c=a}s._wrapperState={initialValue:He(c)}}function Ha(s,a){var c=He(a.value),d=He(a.defaultValue);null!=c&&((c=""+c)!==s.value&&(s.value=c),null==a.defaultValue&&s.defaultValue!==c&&(s.defaultValue=c)),null!=d&&(s.defaultValue=""+d)}function Dc(s){var a=s.textContent;a===s._wrapperState.initialValue&&""!==a&&null!==a&&(s.value=a)}function Oc(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qi(s,a){return null==s||"http://www.w3.org/1999/xhtml"===s?Oc(a):"http://www.w3.org/2000/svg"===s&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":s}var cs,s,Zi=(s=function(s,a){if("http://www.w3.org/2000/svg"!==s.namespaceURI||"innerHTML"in s)s.innerHTML=a;else{for((cs=cs||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=cs.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,d,m){MSApp.execUnsafeLocalFunction(function(){return s(a,c)})}:s);function Ji(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&3===c.nodeType)return void(c.nodeValue=a)}s.textContent=a}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vc=["Webkit","ms","Moz","O"];function zc(s,a,c){return null==a||"boolean"==typeof a||""===a?"":c||"number"!=typeof a||0===a||Ki.hasOwnProperty(s)&&Ki[s]?(""+a).trim():a+"px"}function Bc(s,a){for(var c in s=s.style,a)if(a.hasOwnProperty(c)){var d=0===c.indexOf("--"),m=zc(c,a[c],d);"float"===c&&(c="cssFloat"),d?s.setProperty(c,m):s[c]=m}}Object.keys(Ki).forEach(function(s){Vc.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ki[a]=Ki[s]})});var op=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wa(s,a){if(a){if(op[s]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(W(137,s));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(W(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(W(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(W(62))}}function qa(s,a){if(-1===s.indexOf("-"))return"string"==typeof a.is;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function Ja(s){return(s=s.target||s.srcElement||window).correspondingUseElement&&(s=s.correspondingUseElement),3===s.nodeType?s.parentNode:s}var Ka=null,ii=null,ri=null;function Pc(s){if(s=kr(s)){if("function"!=typeof Ka)throw Error(W(280));var a=s.stateNode;a&&(a=Os(a),Ka(s.stateNode,s.type,a))}}function Lc(s){ii?ri?ri.push(s):ri=[s]:ii=s}function Xc(){if(ii){var s=ii,a=ri;if(ri=ii=null,Pc(s),a)for(s=0;s<a.length;s++)Pc(a[s])}}function Uc(s,a){return s(a)}function Yc(){}var Qa=!1;function Hc(s,a,c){if(Qa)return s(a,c);Qa=!0;try{return Uc(s,a,c)}finally{Qa=!1,(null!==ii||null!==ri)&&(Yc(),Xc())}}function Qi(s,a){var c=s.stateNode;if(null===c)return null;var d=Os(c);if(null===d)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(d=!("button"===(s=s.type)||"input"===s||"select"===s||"textarea"===s)),s=!d;break e;default:s=!1}if(s)return null;if(c&&"function"!=typeof c)throw Error(W(231,a,typeof c));return c}var el=!1;if(V)try{var er={};Object.defineProperty(er,"passive",{get:function(){el=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{el=!1}function ip(s,a,c,d,m,h,b,k,T){var z=Array.prototype.slice.call(arguments,3);try{a.apply(c,z)}catch(Z){this.onError(Z)}}var tr=!1,us=null,ds=!1,tl=null,rp={onError:function(s){tr=!0,us=s}};function sp(s,a,c,d,m,h,b,k,T){tr=!1,us=null,ip.apply(rp,arguments)}function Go(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do{4098&(a=s).flags&&(c=a.return),s=a.return}while(s)}return 3===a.tag?c:null}function Wc(s){if(13===s.tag){var a=s.memoizedState;if(null===a&&null!==(s=s.alternate)&&(a=s.memoizedState),null!==a)return a.dehydrated}return null}function qc(s){if(Go(s)!==s)throw Error(W(188))}function Zc(s){return null!==(s=function lp(s){var a=s.alternate;if(!a){if(null===(a=Go(s)))throw Error(W(188));return a!==s?null:s}for(var c=s,d=a;;){var m=c.return;if(null===m)break;var h=m.alternate;if(null===h){if(null!==(d=m.return)){c=d;continue}break}if(m.child===h.child){for(h=m.child;h;){if(h===c)return qc(m),s;if(h===d)return qc(m),a;h=h.sibling}throw Error(W(188))}if(c.return!==d.return)c=m,d=h;else{for(var b=!1,k=m.child;k;){if(k===c){b=!0,c=m,d=h;break}if(k===d){b=!0,d=m,c=h;break}k=k.sibling}if(!b){for(k=h.child;k;){if(k===c){b=!0,c=h,d=m;break}if(k===d){b=!0,d=h,c=m;break}k=k.sibling}if(!b)throw Error(W(189))}}if(c.alternate!==d)throw Error(W(190))}if(3!==c.tag)throw Error(W(188));return c.stateNode.current===c?s:a}(s))?Jc(s):null}function Jc(s){if(5===s.tag||6===s.tag)return s;for(s=s.child;null!==s;){var a=Jc(s);if(null!==a)return a;s=s.sibling}return null}var Kc=Ne.unstable_scheduleCallback,Qc=Ne.unstable_cancelCallback,cp=Ne.unstable_shouldYield,up=Ne.unstable_requestPaint,gt=Ne.unstable_now,dp=Ne.unstable_getCurrentPriorityLevel,nl=Ne.unstable_ImmediatePriority,eu=Ne.unstable_UserBlockingPriority,ps=Ne.unstable_NormalPriority,pp=Ne.unstable_LowPriority,tu=Ne.unstable_IdlePriority,fs=null,$n=null,In=Math.clz32?Math.clz32:function hp(s){return 0===(s>>>=0)?32:31-(mp(s)/_p|0)|0},mp=Math.log,_p=Math.LN2,xt=64,nr=4194304;function or(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&s;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&s;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ms(s,a){var c=s.pendingLanes;if(0===c)return 0;var d=0,m=s.suspendedLanes,h=s.pingedLanes,b=268435455&c;if(0!==b){var k=b&~m;0!==k?d=or(k):0!=(h&=b)&&(d=or(h))}else 0!=(b=c&~m)?d=or(b):0!==h&&(d=or(h));if(0===d)return 0;if(0!==a&&a!==d&&!(a&m)&&((m=d&-d)>=(h=a&-a)||16===m&&4194240&h))return a;if(4&d&&(d|=16&c),0!==(a=s.entangledLanes))for(s=s.entanglements,a&=d;0<a;)d|=s[c=31-In(a)],a&=~(m=1<<c);return d}function gp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function ol(s){return 0!=(s=-1073741825&s.pendingLanes)?s:1073741824&s?1073741824:0}function nu(){var s=xt;return!(4194240&(xt<<=1))&&(xt=64),s}function il(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ir(s,a,c){s.pendingLanes|=a,536870912!==a&&(s.suspendedLanes=0,s.pingedLanes=0),(s=s.eventTimes)[a=31-In(a)]=c}function rr(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-In(c),m=1<<d;m&a|s[d]&a&&(s[d]|=a),c&=~m}}var ze=0;function rl(s){return 1<(s&=-s)?4<s?268435455&s?16:536870912:4:1}var mn,si,yp,hs,ou,sl=!1,gs=[],co=null,uo=null,po=null,sr=new Map,ai=new Map,Gn=[],al="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ll(s,a){switch(s){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":sr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(a.pointerId)}}function ar(s,a,c,d,m,h){return null===s||s.nativeEvent!==h?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:h,targetContainers:[m]},null!==a&&null!==(a=kr(a))&&si(a),s):(s.eventSystemFlags|=d,a=s.targetContainers,null!==m&&-1===a.indexOf(m)&&a.push(m),s)}function lr(s){var a=Vo(s.target);if(null!==a){var c=Go(a);if(null!==c)if(13===(a=c.tag)){if(null!==(a=Wc(c)))return s.blockedOn=a,void ou(s.priority,function(){yp(c)})}else if(3===a&&c.stateNode.current.memoizedState.isDehydrated)return void(s.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}s.blockedOn=null}function ys(s){if(null!==s.blockedOn)return!1;for(var a=s.targetContainers;0<a.length;){var c=ru(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(null!==c)return null!==(a=kr(c))&&si(a),s.blockedOn=c,!1;var d=new(c=s.nativeEvent).constructor(c.type,c);Za=d,c.target.dispatchEvent(d),Za=null,a.shift()}return!0}function cl(s,a,c){ys(s)&&c.delete(a)}function ul(){sl=!1,null!==co&&ys(co)&&(co=null),null!==uo&&ys(uo)&&(uo=null),null!==po&&ys(po)&&(po=null),sr.forEach(cl),ai.forEach(cl)}function bs(s,a){s.blockedOn===a&&(s.blockedOn=null,sl||(sl=!0,Ne.unstable_scheduleCallback(Ne.unstable_NormalPriority,ul)))}function cr(s){function a(m){return bs(m,s)}if(0<gs.length){bs(gs[0],s);for(var c=1;c<gs.length;c++){var d=gs[c];d.blockedOn===s&&(d.blockedOn=null)}}for(null!==co&&bs(co,s),null!==uo&&bs(uo,s),null!==po&&bs(po,s),sr.forEach(a),ai.forEach(a),c=0;c<Gn.length;c++)(d=Gn[c]).blockedOn===s&&(d.blockedOn=null);for(;0<Gn.length&&null===(c=Gn[0]).blockedOn;)lr(c),null===c.blockedOn&&Gn.shift()}var li=mt.ReactCurrentBatchConfig,dl=!0;function bp(s,a,c,d){var m=ze,h=li.transition;li.transition=null;try{ze=1,iu(s,a,c,d)}finally{ze=m,li.transition=h}}function lm(s,a,c,d){var m=ze,h=li.transition;li.transition=null;try{ze=4,iu(s,a,c,d)}finally{ze=m,li.transition=h}}function iu(s,a,c,d){if(dl){var m=ru(s,a,c,d);if(null===m)_i(s,a,d,pl,c),ll(s,d);else if(function vs(s,a,c,d,m){switch(a){case"focusin":return co=ar(co,s,a,c,d,m),!0;case"dragenter":return uo=ar(uo,s,a,c,d,m),!0;case"mouseover":return po=ar(po,s,a,c,d,m),!0;case"pointerover":var h=m.pointerId;return sr.set(h,ar(sr.get(h)||null,s,a,c,d,m)),!0;case"gotpointercapture":return ai.set(h=m.pointerId,ar(ai.get(h)||null,s,a,c,d,m)),!0}return!1}(m,s,a,c,d))d.stopPropagation();else if(ll(s,d),4&a&&-1<al.indexOf(s)){for(;null!==m;){var h=kr(m);if(null!==h&&mn(h),null===(h=ru(s,a,c,d))&&_i(s,a,d,pl,c),h===m)break;m=h}null!==m&&d.stopPropagation()}else _i(s,a,d,null,c)}}var pl=null;function ru(s,a,c,d){if(pl=null,null!==(s=Vo(s=Ja(d))))if(null===(a=Go(s)))s=null;else if(13===(c=a.tag)){if(null!==(s=Wc(a)))return s;s=null}else if(3===c){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return pl=s,null}function fl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dp()){case nl:return 1;case eu:return 4;case ps:case pp:return 16;case tu:return 536870912;default:return 16}default:return 16}}var An=null,ml=null,xs=null;function su(){if(xs)return xs;var s,d,a=ml,c=a.length,m="value"in An?An.value:An.textContent,h=m.length;for(s=0;s<c&&a[s]===m[s];s++);var b=c-s;for(d=1;d<=b&&a[c-d]===m[h-d];d++);return xs=m.slice(s,1<d?1-d:void 0)}function Cs(s){var a=s.keyCode;return"charCode"in s?0===(s=s.charCode)&&13===a&&(s=13):s=a,10===s&&(s=13),32<=s||13===s?s:0}function ci(){return!0}function xp(){return!1}function Kt(s){function a(c,d,m,h,b){for(var k in this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=h,this.target=b,this.currentTarget=null,s)s.hasOwnProperty(k)&&(this[k]=(c=s[k])?c(h):h[k]);return this.isDefaultPrevented=(null!=h.defaultPrevented?h.defaultPrevented:!1===h.returnValue)?ci:xp,this.isPropagationStopped=xp,this}return F(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():"unknown"!=typeof c.returnValue&&(c.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():"unknown"!=typeof c.cancelBubble&&(c.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),a}var hl,gl,ur,ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Kt(ui),di=F({},ui,{view:0,detail:0}),Cp=Kt(di),Ss=F({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(s){return void 0===s.relatedTarget?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ur&&(ur&&"mousemove"===s.type?(hl=s.screenX-ur.screenX,gl=s.screenY-ur.screenY):gl=hl=0,ur=s),hl)},movementY:function(s){return"movementY"in s?s.movementY:gl}}),Sp=Kt(Ss),um=Kt(F({},Ss,{dataTransfer:0})),Qn=Kt(F({},di,{relatedTarget:0})),kp=Kt(F({},ui,{animationName:0,elapsedTime:0,pseudoElement:0})),wp=F({},ui,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Np=Kt(wp),vl=Kt(F({},ui,{data:0})),ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ws={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Es(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):!!(s=Ns[s])&&!!a[s]}function pr(){return Es}var Ip=F({},di,{key:function(s){if(s.key){var a=ks[s.key]||s.key;if("Unidentified"!==a)return a}return"keypress"===s.type?13===(s=Cs(s))?"Enter":String.fromCharCode(s):"keydown"===s.type||"keyup"===s.type?ws[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(s){return"keypress"===s.type?Cs(s):0},keyCode:function(s){return"keydown"===s.type||"keyup"===s.type?s.keyCode:0},which:function(s){return"keypress"===s.type?Cs(s):"keydown"===s.type||"keyup"===s.type?s.keyCode:0}}),Ap=Kt(Ip),au=Kt(F({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),pm=Kt(F({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr})),Is=Kt(F({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rp=F({},Ss,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),jp=Kt(Rp),jt=[9,13,27,32],As=V&&"CompositionEvent"in window,Ts=null;V&&"documentMode"in document&&(Ts=document.documentMode);var fm=V&&"TextEvent"in window&&!Ts,cu=V&&(!As||Ts&&8<Ts&&11>=Ts),uu=" ",du=!1;function yl(s,a){switch(s){case"keyup":return-1!==jt.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(s){return"object"==typeof(s=s.detail)&&"data"in s?s.data:null}var pi=!1,Gp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return"input"===a?!!Gp[s.type]:"textarea"===a}function bl(s,a,c,d){Lc(d),0<(a=Cr(a,"onChange")).length&&(c=new _l("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var fr=null,mr=null;function Dp(s){Au(s,0)}function Fs(s){if(Rc(vi(s)))return s}function mu(s,a){if("change"===s)return a}var _u=!1;if(V){var Rs;if(V){var _r="oninput"in document;if(!_r){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),_r="function"==typeof Op.oninput}Rs=_r}else Rs=!1;_u=Rs&&(!document.documentMode||9<document.documentMode)}function Ct(){fr&&(fr.detachEvent("onpropertychange",Vp),mr=fr=null)}function Vp(s){if("value"===s.propertyName&&Fs(mr)){var a=[];bl(a,mr,s,Ja(s)),Hc(Dp,a)}}function mm(s,a,c){"focusin"===s?(Ct(),mr=c,(fr=a).attachEvent("onpropertychange",Vp)):"focusout"===s&&Ct()}function zp(s){if("selectionchange"===s||"keyup"===s||"keydown"===s)return Fs(mr)}function lt(s,a){if("click"===s)return Fs(a)}function Do(s,a){if("input"===s||"change"===s)return Fs(a)}var sn="function"==typeof Object.is?Object.is:function Bp(s,a){return s===a&&(0!==s||1/s==1/a)||s!=s&&a!=a};function fi(s,a){if(sn(s,a))return!0;if("object"!=typeof s||null===s||"object"!=typeof a||null===a)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!G.call(a,m)||!sn(s[m],a[m]))return!1}return!0}function js(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function hu(s,a){var d,c=js(s);for(s=0;c;){if(3===c.nodeType){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=js(c)}}function gu(s,a){return!(!s||!a)&&(s===a||(!s||3!==s.nodeType)&&(a&&3===a.nodeType?gu(s,a.parentNode):"contains"in s?s.contains(a):!!s.compareDocumentPosition&&!!(16&s.compareDocumentPosition(a))))}function xl(){for(var s=window,a=ls();a instanceof s.HTMLIFrameElement;){try{var c="string"==typeof a.contentWindow.location.href}catch{c=!1}if(!c)break;a=ls((s=a.contentWindow).document)}return a}function Cl(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&("input"===a&&("text"===s.type||"search"===s.type||"tel"===s.type||"url"===s.type||"password"===s.type)||"textarea"===a||"true"===s.contentEditable)}function vu(s){var a=xl(),c=s.focusedElem,d=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&gu(c.ownerDocument.documentElement,c)){if(null!==d&&Cl(c))if(a=d.start,void 0===(s=d.end)&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if((s=(a=c.ownerDocument||document)&&a.defaultView||window).getSelection){s=s.getSelection();var m=c.textContent.length,h=Math.min(d.start,m);d=void 0===d.end?h:Math.min(d.end,m),!s.extend&&h>d&&(m=d,d=h,h=m),m=hu(c,h);var b=hu(c,d);m&&b&&(1!==s.rangeCount||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&((a=a.createRange()).setStart(m.node,m.offset),s.removeAllRanges(),h>d?(s.addRange(a),s.extend(b.node,b.offset)):(a.setEnd(b.node,b.offset),s.addRange(a)))}for(a=[],s=c;s=s.parentNode;)1===s.nodeType&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for("function"==typeof c.focus&&c.focus(),c=0;c<a.length;c++)(s=a[c]).element.scrollLeft=s.left,s.element.scrollTop=s.top}}var yu=V&&"documentMode"in document&&11>=document.documentMode,Oo=null,Sl=null,hr=null,kl=!1;function bu(s,a,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;kl||null==Oo||Oo!==ls(d)||(d="selectionStart"in(d=Oo)&&Cl(d)?{start:d.selectionStart,end:d.selectionEnd}:{anchorNode:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset},hr&&fi(hr,d)||(hr=d,0<(d=Cr(Sl,"onSelect")).length&&(a=new _l("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=Oo)))}function Ms(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var mi={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionend:Ms("Transition","TransitionEnd")},wl={},xu={};function $s(s){if(wl[s])return wl[s];if(!mi[s])return s;var c,a=mi[s];for(c in a)if(a.hasOwnProperty(c)&&c in xu)return wl[s]=a[c];return s}V&&(xu=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);var Cu=$s("animationend"),Su=$s("animationiteration"),ku=$s("animationstart"),wu=$s("transitionend"),Nu=new Map,Eu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fo(s,a){Nu.set(s,a),kt(a,[s])}for(var Nl=0;Nl<Eu.length;Nl++){var El=Eu[Nl];fo(El.toLowerCase(),"on"+(El[0].toUpperCase()+El.slice(1)))}fo(Cu,"onAnimationEnd"),fo(Su,"onAnimationIteration"),fo(ku,"onAnimationStart"),fo("dblclick","onDoubleClick"),fo("focusin","onFocus"),fo("focusout","onBlur"),fo(wu,"onTransitionEnd"),Fe("onMouseEnter",["mouseout","mouseover"]),Fe("onMouseLeave",["mouseout","mouseover"]),Fe("onPointerEnter",["pointerout","pointerover"]),Fe("onPointerLeave",["pointerout","pointerover"]),kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xp=new Set("cancel close invalid load scroll toggle".split(" ").concat(gr));function Iu(s,a,c){var d=s.type||"unknown-event";s.currentTarget=c,function ap(s,a,c,d,m,h,b,k,T){if(sp.apply(this,arguments),tr){if(!tr)throw Error(W(198));var z=us;tr=!1,us=null,ds||(ds=!0,tl=z)}}(d,a,void 0,s),s.currentTarget=null}function Au(s,a){a=!!(4&a);for(var c=0;c<s.length;c++){var d=s[c],m=d.event;d=d.listeners;e:{var h=void 0;if(a)for(var b=d.length-1;0<=b;b--){var k=d[b],T=k.instance,z=k.currentTarget;if(k=k.listener,T!==h&&m.isPropagationStopped())break e;Iu(m,k,z),h=T}else for(b=0;b<d.length;b++){if(T=(k=d[b]).instance,z=k.currentTarget,k=k.listener,T!==h&&m.isPropagationStopped())break e;Iu(m,k,z),h=T}}}if(ds)throw s=tl,ds=!1,tl=null,s}function it(s,a){var c=a[$l];void 0===c&&(c=a[$l]=new Set);var d=s+"__bubble";c.has(d)||(br(a,s,2,!1),c.add(d))}function Il(s,a,c){var d=0;a&&(d|=4),br(c,s,d,a)}var vr="_reactListening"+Math.random().toString(36).slice(2);function yr(s){if(!s[vr]){s[vr]=!0,e.forEach(function(c){"selectionchange"!==c&&(Xp.has(c)||Il(c,!1,s),Il(c,!0,s))});var a=9===s.nodeType?s:s.ownerDocument;null===a||a[vr]||(a[vr]=!0,Il("selectionchange",!1,a))}}function br(s,a,c,d){switch(fl(a)){case 1:var m=bp;break;case 4:m=lm;break;default:m=iu}c=m.bind(null,a,c,s),m=void 0,!el||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(m=!0),s.addEventListener(a,c,d?void 0===m||{capture:!0,passive:m}:void 0!==m&&{passive:m})}function _i(s,a,c,d,m){var h=d;if(!(1&a||2&a||null===d))e:for(;;){if(null===d)return;var b=d.tag;if(3===b||4===b){var k=d.stateNode.containerInfo;if(k===m||8===k.nodeType&&k.parentNode===m)break;if(4===b)for(b=d.return;null!==b;){var T=b.tag;if((3===T||4===T)&&((T=b.stateNode.containerInfo)===m||8===T.nodeType&&T.parentNode===m))return;b=b.return}for(;null!==k;){if(null===(b=Vo(k)))return;if(5===(T=b.tag)||6===T){d=h=b;continue e}k=k.parentNode}}d=d.return}Hc(function(){var z=h,Z=Ja(c),K=[];e:{var q=Nu.get(s);if(void 0!==q){var ce=_l,he=s;switch(s){case"keypress":if(0===Cs(c))break e;case"keydown":case"keyup":ce=Ap;break;case"focusin":he="focus",ce=Qn;break;case"focusout":he="blur",ce=Qn;break;case"beforeblur":case"afterblur":ce=Qn;break;case"click":if(2===c.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=pm;break;case Cu:case Su:case ku:ce=kp;break;case wu:ce=Is;break;case"scroll":ce=Cp;break;case"wheel":ce=jp;break;case"copy":case"cut":case"paste":ce=Np;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=au}var ge=!!(4&a),qe=!ge&&"scroll"===s,$=ge?null!==q?q+"Capture":null:q;ge=[];for(var D,R=z;null!==R;){var ne=(D=R).stateNode;if(5===D.tag&&null!==ne&&(D=ne,null!==$&&null!=(ne=Qi(R,$))&&ge.push(xr(R,ne,D))),qe)break;R=R.return}0<ge.length&&(q=new ce(q,he,null,c,Z),K.push({event:q,listeners:ge}))}}if(!(7&a)){if(ce="mouseout"===s||"pointerout"===s,(!(q="mouseover"===s||"pointerover"===s)||c===Za||!(he=c.relatedTarget||c.fromElement)||!Vo(he)&&!he[eo])&&(ce||q)&&(q=Z.window===Z?Z:(q=Z.ownerDocument)?q.defaultView||q.parentWindow:window,ce?(ce=z,null!==(he=(he=c.relatedTarget||c.toElement)?Vo(he):null)&&(he!==(qe=Go(he))||5!==he.tag&&6!==he.tag)&&(he=null)):(ce=null,he=z),ce!==he)){if(ge=Sp,ne="onMouseLeave",$="onMouseEnter",R="mouse",("pointerout"===s||"pointerover"===s)&&(ge=au,ne="onPointerLeave",$="onPointerEnter",R="pointer"),qe=null==ce?q:vi(ce),D=null==he?q:vi(he),(q=new ge(ne,R+"leave",ce,c,Z)).target=qe,q.relatedTarget=D,ne=null,Vo(Z)===z&&((ge=new ge($,R+"enter",he,c,Z)).target=D,ge.relatedTarget=qe,ne=ge),qe=ne,ce&&he)t:{for($=he,R=0,D=ge=ce;D;D=hi(D))R++;for(D=0,ne=$;ne;ne=hi(ne))D++;for(;0<R-D;)ge=hi(ge),R--;for(;0<D-R;)$=hi($),D--;for(;R--;){if(ge===$||null!==$&&ge===$.alternate)break t;ge=hi(ge),$=hi($)}ge=null}else ge=null;null!==ce&&Tu(K,q,ce,ge,!1),null!==he&&null!==qe&&Tu(K,qe,he,ge,!0)}if("select"===(ce=(q=z?vi(z):window).nodeName&&q.nodeName.toLowerCase())||"input"===ce&&"file"===q.type)var ve=mu;else if(fu(q))if(_u)ve=Do;else{ve=zp;var Se=mm}else(ce=q.nodeName)&&"input"===ce.toLowerCase()&&("checkbox"===q.type||"radio"===q.type)&&(ve=lt);switch(ve&&(ve=ve(s,z))?bl(K,ve,c,Z):(Se&&Se(s,q,z),"focusout"===s&&(Se=q._wrapperState)&&Se.controlled&&"number"===q.type&&Mo(q,"number",q.value)),Se=z?vi(z):window,s){case"focusin":(fu(Se)||"true"===Se.contentEditable)&&(Oo=Se,Sl=z,hr=null);break;case"focusout":hr=Sl=Oo=null;break;case"mousedown":kl=!0;break;case"contextmenu":case"mouseup":case"dragend":kl=!1,bu(K,c,Z);break;case"selectionchange":if(yu)break;case"keydown":case"keyup":bu(K,c,Z)}var xe;if(As)e:{switch(s){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else pi?yl(s,c)&&(Ee="onCompositionEnd"):"keydown"===s&&229===c.keyCode&&(Ee="onCompositionStart");Ee&&(cu&&"ko"!==c.locale&&(pi||"onCompositionStart"!==Ee?"onCompositionEnd"===Ee&&pi&&(xe=su()):(ml="value"in(An=Z)?An.value:An.textContent,pi=!0)),0<(Se=Cr(z,Ee)).length&&(Ee=new vl(Ee,s,null,c,Z),K.push({event:Ee,listeners:Se}),(xe||null!==(xe=pu(c)))&&(Ee.data=xe))),(xe=fm?function Mp(s,a){switch(s){case"compositionend":return pu(a);case"keypress":return 32!==a.which?null:(du=!0,uu);case"textInput":return(s=a.data)===uu&&du?null:s;default:return null}}(s,c):function $p(s,a){if(pi)return"compositionend"===s||!As&&yl(s,a)?(s=su(),xs=ml=An=null,pi=!1,s):null;switch(s){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return cu&&"ko"!==a.locale?null:a.data}}(s,c))&&0<(z=Cr(z,"onBeforeInput")).length&&(Z=new vl("onBeforeInput","beforeinput",null,c,Z),K.push({event:Z,listeners:z}),Z.data=xe)}Au(K,a)})}function xr(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Cr(s,a){for(var c=a+"Capture",d=[];null!==s;){var m=s,h=m.stateNode;5===m.tag&&null!==h&&(m=h,null!=(h=Qi(s,c))&&d.unshift(xr(s,h,m)),null!=(h=Qi(s,a))&&d.push(xr(s,h,m))),s=s.return}return d}function hi(s){if(null===s)return null;do{s=s.return}while(s&&5!==s.tag);return s||null}function Tu(s,a,c,d,m){for(var h=a._reactName,b=[];null!==c&&c!==d;){var k=c,T=k.alternate,z=k.stateNode;if(null!==T&&T===d)break;5===k.tag&&null!==z&&(k=z,m?null!=(T=Qi(c,h))&&b.unshift(xr(c,T,k)):m||null!=(T=Qi(c,h))&&b.push(xr(c,T,k))),c=c.return}0!==b.length&&s.push({event:a,listeners:b})}var Up=/\r\n?/g,Yp=/\u0000|\uFFFD/g;function Fu(s){return("string"==typeof s?s:""+s).replace(Up,"\n").replace(Yp,"")}function Gs(s,a,c){if(a=Fu(a),Fu(s)!==a&&c)throw Error(W(425))}function Ds(){}var Al=null,Tl=null;function Fl(s,a){return"textarea"===s||"noscript"===s||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var Rl="function"==typeof setTimeout?setTimeout:void 0,Hp="function"==typeof clearTimeout?clearTimeout:void 0,Ru="function"==typeof Promise?Promise:void 0,Wp="function"==typeof queueMicrotask?queueMicrotask:typeof Ru<"u"?function(s){return Ru.resolve(null).then(s).catch(qp)}:Rl;function qp(s){setTimeout(function(){throw s})}function jl(s,a){var c=a,d=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&8===m.nodeType)if("/$"===(c=m.data)){if(0===d)return s.removeChild(m),void cr(a);d--}else"$"!==c&&"$?"!==c&&"$!"!==c||d++;c=m}while(c);cr(a)}function mo(s){for(;null!=s;s=s.nextSibling){var a=s.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=s.data)||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return s}function Ml(s){s=s.previousSibling;for(var a=0;s;){if(8===s.nodeType){var c=s.data;if("$"===c||"$!"===c||"$?"===c){if(0===a)return s;a--}else"/$"===c&&a++}s=s.previousSibling}return null}var gi=Math.random().toString(36).slice(2),Dn="__reactFiber$"+gi,Sr="__reactProps$"+gi,eo="__reactContainer$"+gi,$l="__reactEvents$"+gi,Zp="__reactListeners$"+gi,Jp="__reactHandles$"+gi;function Vo(s){var a=s[Dn];if(a)return a;for(var c=s.parentNode;c;){if(a=c[eo]||c[Dn]){if(c=a.alternate,null!==a.child||null!==c&&null!==c.child)for(s=Ml(s);null!==s;){if(c=s[Dn])return c;s=Ml(s)}return a}c=(s=c).parentNode}return null}function kr(s){return!(s=s[Dn]||s[eo])||5!==s.tag&&6!==s.tag&&13!==s.tag&&3!==s.tag?null:s}function vi(s){if(5===s.tag||6===s.tag)return s.stateNode;throw Error(W(33))}function Os(s){return s[Sr]||null}var Gl=[],yi=-1;function _o(s){return{current:s}}function rt(s){0>yi||(s.current=Gl[yi],Gl[yi]=null,yi--)}function Qe(s,a){yi++,Gl[yi]=s.current,s.current=a}var ho={},zt=_o(ho),Qt=_o(!1),zo=ho;function bi(s,a){var c=s.type.contextTypes;if(!c)return ho;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===a)return d.__reactInternalMemoizedMaskedChildContext;var h,m={};for(h in c)m[h]=a[h];return d&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function en(s){return null!=s.childContextTypes}function Vs(){rt(Qt),rt(zt)}function ju(s,a,c){if(zt.current!==ho)throw Error(W(168));Qe(zt,a),Qe(Qt,c)}function Mu(s,a,c){var d=s.stateNode;if(a=a.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var m in d=d.getChildContext())if(!(m in a))throw Error(W(108,_t(s)||"Unknown",m));return F({},c,d)}function zs(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ho,zo=zt.current,Qe(zt,s),Qe(Qt,Qt.current),!0}function $u(s,a,c){var d=s.stateNode;if(!d)throw Error(W(169));c?(s=Mu(s,a,zo),d.__reactInternalMemoizedMergedChildContext=s,rt(Qt),rt(zt),Qe(zt,s)):rt(Qt),Qe(Qt,c)}var to=null,Bs=!1,Dl=!1;function Gu(s){null===to?to=[s]:to.push(s)}function go(){if(!Dl&&null!==to){Dl=!0;var s=0,a=ze;try{var c=to;for(ze=1;s<c.length;s++){var d=c[s];do{d=d(!0)}while(null!==d)}to=null,Bs=!1}catch(m){throw null!==to&&(to=to.slice(s+1)),Kc(nl,go),m}finally{ze=a,Dl=!1}}return null}var Bo=[],xi=0,Ps=null,S=0,et=[],_n=0,vo=null,On=1,yo="";function Po(s,a){Bo[xi++]=S,Bo[xi++]=Ps,Ps=s,S=a}function Du(s,a,c){et[_n++]=On,et[_n++]=yo,et[_n++]=vo,vo=s;var d=On;s=yo;var m=32-In(d)-1;d&=~(1<<m),c+=1;var h=32-In(a)+m;if(30<h){var b=m-m%5;h=(d&(1<<b)-1).toString(32),d>>=b,m-=b,On=1<<32-In(a)+m|c<<m|d,yo=h+s}else On=1<<h|c<<m|d,yo=s}function Ol(s){null!==s.return&&(Po(s,1),Du(s,1,0))}function Ls(s){for(;s===Ps;)Ps=Bo[--xi],Bo[xi]=null,S=Bo[--xi],Bo[xi]=null;for(;s===vo;)vo=et[--_n],et[_n]=null,yo=et[--_n],et[_n]=null,On=et[--_n],et[_n]=null}var tn=null,an=null,Re=!1,Vn=null;function Ou(s,a){var c=wn(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,null===(a=s.deletions)?(s.deletions=[c],s.flags|=16):a.push(c)}function Vl(s,a){switch(s.tag){case 5:var c=s.type;return null!==(a=1!==a.nodeType||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(s.stateNode=a,tn=s,an=mo(a.firstChild),!0);case 6:return null!==(a=""===s.pendingProps||3!==a.nodeType?null:a)&&(s.stateNode=a,tn=s,an=null,!0);case 13:return null!==(a=8!==a.nodeType?null:a)&&(s.memoizedState={dehydrated:a,treeContext:c=null!==vo?{id:On,overflow:yo}:null,retryLane:1073741824},(c=wn(18,null,null,0)).stateNode=a,c.return=s,s.child=c,tn=s,an=null,!0);default:return!1}}function Ci(s){return!(!(1&s.mode)||128&s.flags)}function zl(s){if(Re){var a=an;if(a){var c=a;if(!Vl(s,a)){if(Ci(s))throw Error(W(418));a=mo(c.nextSibling);var d=tn;a&&Vl(s,a)?Ou(d,c):(s.flags=-4097&s.flags|2,Re=!1,tn=s)}}else{if(Ci(s))throw Error(W(418));s.flags=-4097&s.flags|2,Re=!1,tn=s}}}function Vu(s){for(s=s.return;null!==s&&5!==s.tag&&3!==s.tag&&13!==s.tag;)s=s.return;tn=s}function wr(s){if(s!==tn)return!1;if(!Re)return Vu(s),Re=!0,!1;var a;if((a=3!==s.tag)&&!(a=5!==s.tag)&&(a="head"!==(a=s.type)&&"body"!==a&&!Fl(s.type,s.memoizedProps)),a&&(a=an)){if(Ci(s))throw Xs(),Error(W(418));for(;a;)Ou(s,a),a=mo(a.nextSibling)}if(Vu(s),13===s.tag){if(!(s=null!==(s=s.memoizedState)?s.dehydrated:null))throw Error(W(317));e:{for(s=s.nextSibling,a=0;s;){if(8===s.nodeType){var c=s.data;if("/$"===c){if(0===a){an=mo(s.nextSibling);break e}a--}else"$"!==c&&"$!"!==c&&"$?"!==c||a++}s=s.nextSibling}an=null}}else an=tn?mo(s.stateNode.nextSibling):null;return!0}function Xs(){for(var s=an;s;)s=mo(s.nextSibling)}function Si(){an=tn=null,Re=!1}function Nr(s){null===Vn?Vn=[s]:Vn.push(s)}var Qp=mt.ReactCurrentBatchConfig;function Er(s,a,c){if(null!==(s=c.ref)&&"function"!=typeof s&&"object"!=typeof s){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(W(309));var d=c.stateNode}if(!d)throw Error(W(147,s));var m=d,h=""+s;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===h?a.ref:((a=function(b){var k=m.refs;null===b?delete k[h]:k[h]=b})._stringRef=h,a)}if("string"!=typeof s)throw Error(W(284));if(!c._owner)throw Error(W(290,s))}return s}function Us(s,a){throw s=Object.prototype.toString.call(a),Error(W(31,"[object Object]"===s?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Bl(s){return(0,s._init)(s._payload)}function zu(s){function a($,R){if(s){var D=$.deletions;null===D?($.deletions=[R],$.flags|=16):D.push(R)}}function c($,R){if(!s)return null;for(;null!==R;)a($,R),R=R.sibling;return null}function d($,R){for($=new Map;null!==R;)$.set(null!==R.key?R.key:R.index,R),R=R.sibling;return $}function m($,R){return($=Eo($,R)).index=0,$.sibling=null,$}function h($,R,D){return $.index=D,s?null!==(D=$.alternate)?(D=D.index)<R?($.flags|=2,R):D:($.flags|=2,R):($.flags|=1048576,R)}function b($){return s&&null===$.alternate&&($.flags|=2),$}function k($,R,D,ne){return null===R||6!==R.tag?((R=mc(D,$.mode,ne)).return=$,R):((R=m(R,D)).return=$,R)}function T($,R,D,ne){var ve=D.type;return ve===wt?Z($,R,D.props.children,ne,D.key):null!==R&&(R.elementType===ve||"object"==typeof ve&&null!==ve&&ve.$$typeof===te&&Bl(ve)===R.type)?((ne=m(R,D.props)).ref=Er($,R,D),ne.return=$,ne):((ne=ba(D.type,D.key,D.props,null,$.mode,ne)).ref=Er($,R,D),ne.return=$,ne)}function z($,R,D,ne){return null===R||4!==R.tag||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?((R=_c(D,$.mode,ne)).return=$,R):((R=m(R,D.children||[])).return=$,R)}function Z($,R,D,ne,ve){return null===R||7!==R.tag?((R=ni(D,$.mode,ne,ve)).return=$,R):((R=m(R,D)).return=$,R)}function K($,R,D){if("string"==typeof R&&""!==R||"number"==typeof R)return(R=mc(""+R,$.mode,D)).return=$,R;if("object"==typeof R&&null!==R){switch(R.$$typeof){case Vt:return(D=ba(R.type,R.key,R.props,null,$.mode,D)).ref=Er($,null,R),D.return=$,D;case ot:return(R=_c(R,$.mode,D)).return=$,R;case te:return K($,(0,R._init)(R._payload),D)}if(Kn(R)||Ye(R))return(R=ni(R,$.mode,D,null)).return=$,R;Us($,R)}return null}function q($,R,D,ne){var ve=null!==R?R.key:null;if("string"==typeof D&&""!==D||"number"==typeof D)return null!==ve?null:k($,R,""+D,ne);if("object"==typeof D&&null!==D){switch(D.$$typeof){case Vt:return D.key===ve?T($,R,D,ne):null;case ot:return D.key===ve?z($,R,D,ne):null;case te:return q($,R,(ve=D._init)(D._payload),ne)}if(Kn(D)||Ye(D))return null!==ve?null:Z($,R,D,ne,null);Us($,D)}return null}function ce($,R,D,ne,ve){if("string"==typeof ne&&""!==ne||"number"==typeof ne)return k(R,$=$.get(D)||null,""+ne,ve);if("object"==typeof ne&&null!==ne){switch(ne.$$typeof){case Vt:return T(R,$=$.get(null===ne.key?D:ne.key)||null,ne,ve);case ot:return z(R,$=$.get(null===ne.key?D:ne.key)||null,ne,ve);case te:return ce($,R,D,(0,ne._init)(ne._payload),ve)}if(Kn(ne)||Ye(ne))return Z(R,$=$.get(D)||null,ne,ve,null);Us(R,ne)}return null}return function qe($,R,D,ne){if("object"==typeof D&&null!==D&&D.type===wt&&null===D.key&&(D=D.props.children),"object"==typeof D&&null!==D){switch(D.$$typeof){case Vt:e:{for(var ve=D.key,Se=R;null!==Se;){if(Se.key===ve){if((ve=D.type)===wt){if(7===Se.tag){c($,Se.sibling),(R=m(Se,D.props.children)).return=$,$=R;break e}}else if(Se.elementType===ve||"object"==typeof ve&&null!==ve&&ve.$$typeof===te&&Bl(ve)===Se.type){c($,Se.sibling),(R=m(Se,D.props)).ref=Er($,Se,D),R.return=$,$=R;break e}c($,Se);break}a($,Se),Se=Se.sibling}D.type===wt?((R=ni(D.props.children,$.mode,ne,D.key)).return=$,$=R):((ne=ba(D.type,D.key,D.props,null,$.mode,ne)).ref=Er($,R,D),ne.return=$,$=ne)}return b($);case ot:e:{for(Se=D.key;null!==R;){if(R.key===Se){if(4===R.tag&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){c($,R.sibling),(R=m(R,D.children||[])).return=$,$=R;break e}c($,R);break}a($,R),R=R.sibling}(R=_c(D,$.mode,ne)).return=$,$=R}return b($);case te:return qe($,R,(Se=D._init)(D._payload),ne)}if(Kn(D))return function he($,R,D,ne){for(var ve=null,Se=null,xe=R,Ee=R=0,tt=null;null!==xe&&Ee<D.length;Ee++){xe.index>Ee?(tt=xe,xe=null):tt=xe.sibling;var je=q($,xe,D[Ee],ne);if(null===je){null===xe&&(xe=tt);break}s&&xe&&null===je.alternate&&a($,xe),R=h(je,R,Ee),null===Se?ve=je:Se.sibling=je,Se=je,xe=tt}if(Ee===D.length)return c($,xe),Re&&Po($,Ee),ve;if(null===xe){for(;Ee<D.length;Ee++)null!==(xe=K($,D[Ee],ne))&&(R=h(xe,R,Ee),null===Se?ve=xe:Se.sibling=xe,Se=xe);return Re&&Po($,Ee),ve}for(xe=d($,xe);Ee<D.length;Ee++)null!==(tt=ce(xe,$,Ee,D[Ee],ne))&&(s&&null!==tt.alternate&&xe.delete(null===tt.key?Ee:tt.key),R=h(tt,R,Ee),null===Se?ve=tt:Se.sibling=tt,Se=tt);return s&&xe.forEach(function(Io){return a($,Io)}),Re&&Po($,Ee),ve}($,R,D,ne);if(Ye(D))return function ge($,R,D,ne){var ve=Ye(D);if("function"!=typeof ve)throw Error(W(150));if(null==(D=ve.call(D)))throw Error(W(151));for(var Se=ve=null,xe=R,Ee=R=0,tt=null,je=D.next();null!==xe&&!je.done;Ee++,je=D.next()){xe.index>Ee?(tt=xe,xe=null):tt=xe.sibling;var Io=q($,xe,je.value,ne);if(null===Io){null===xe&&(xe=tt);break}s&&xe&&null===Io.alternate&&a($,xe),R=h(Io,R,Ee),null===Se?ve=Io:Se.sibling=Io,Se=Io,xe=tt}if(je.done)return c($,xe),Re&&Po($,Ee),ve;if(null===xe){for(;!je.done;Ee++,je=D.next())null!==(je=K($,je.value,ne))&&(R=h(je,R,Ee),null===Se?ve=je:Se.sibling=je,Se=je);return Re&&Po($,Ee),ve}for(xe=d($,xe);!je.done;Ee++,je=D.next())null!==(je=ce(xe,$,Ee,je.value,ne))&&(s&&null!==je.alternate&&xe.delete(null===je.key?Ee:je.key),R=h(je,R,Ee),null===Se?ve=je:Se.sibling=je,Se=je);return s&&xe.forEach(function(bc){return a($,bc)}),Re&&Po($,Ee),ve}($,R,D,ne);Us($,D)}return"string"==typeof D&&""!==D||"number"==typeof D?(D=""+D,null!==R&&6===R.tag?(c($,R.sibling),(R=m(R,D)).return=$,$=R):(c($,R),(R=mc(D,$.mode,ne)).return=$,$=R),b($)):c($,R)}}var ki=zu(!0),Pl=zu(!1),Ir=_o(null),Ys=null,wi=null,Ll=null;function Xl(){Ll=wi=Ys=null}function Ul(s){var a=Ir.current;rt(Ir),s._currentValue=a}function Yl(s,a,c){for(;null!==s;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,null!==d&&(d.childLanes|=a)):null!==d&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function Ni(s,a){Ys=s,Ll=wi=null,null!==(s=s.dependencies)&&null!==s.firstContext&&(s.lanes&a&&(Yt=!0),s.firstContext=null)}function hn(s){var a=s._currentValue;if(Ll!==s)if(s={context:s,memoizedValue:a,next:null},null===wi){if(null===Ys)throw Error(W(308));wi=s,Ys.dependencies={lanes:0,firstContext:s}}else wi=wi.next=s;return a}var Lo=null;function Hs(s){null===Lo?Lo=[s]:Lo.push(s)}function Bu(s,a,c,d){var m=a.interleaved;return null===m?(c.next=c,Hs(a)):(c.next=m.next,m.next=c),a.interleaved=c,gn(s,d)}function gn(s,a){s.lanes|=a;var c=s.alternate;for(null!==c&&(c.lanes|=a),c=s,s=s.return;null!==s;)s.childLanes|=a,null!==(c=s.alternate)&&(c.childLanes|=a),c=s,s=s.return;return 3===c.tag?c.stateNode:null}var bo=!1;function Hl(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pu(s,a){a.updateQueue===(s=s.updateQueue)&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function no(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function xo(s,a,c){var d=s.updateQueue;if(null===d)return null;if(d=d.shared,2&Ge){var m=d.pending;return null===m?a.next=a:(a.next=m.next,m.next=a),d.pending=a,gn(s,c)}return null===(m=d.interleaved)?(a.next=a,Hs(d)):(a.next=m.next,m.next=a),d.interleaved=a,gn(s,c)}function Ws(s,a,c){if(null!==(a=a.updateQueue)&&(a=a.shared,4194240&c)){var d=a.lanes;a.lanes=c|=d&=s.pendingLanes,rr(s,c)}}function Lu(s,a){var c=s.updateQueue,d=s.alternate;if(null===d||c!==(d=d.updateQueue))null===(s=c.lastBaseUpdate)?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a;else{var m=null,h=null;if(null!==(c=c.firstBaseUpdate)){do{var b={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===h?m=h=b:h=h.next=b,c=c.next}while(null!==c);null===h?m=h=a:h=h.next=a}else m=h=a;s.updateQueue=c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:h,shared:d.shared,effects:d.effects}}}function qs(s,a,c,d){var m=s.updateQueue;bo=!1;var h=m.firstBaseUpdate,b=m.lastBaseUpdate,k=m.shared.pending;if(null!==k){m.shared.pending=null;var T=k,z=T.next;T.next=null,null===b?h=z:b.next=z,b=T;var Z=s.alternate;null!==Z&&(k=(Z=Z.updateQueue).lastBaseUpdate)!==b&&(null===k?Z.firstBaseUpdate=z:k.next=z,Z.lastBaseUpdate=T)}if(null!==h){var K=m.baseState;for(b=0,Z=z=T=null,k=h;;){var q=k.lane,ce=k.eventTime;if((d&q)===q){null!==Z&&(Z=Z.next={eventTime:ce,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var he=s,ge=k;switch(q=a,ce=c,ge.tag){case 1:if("function"==typeof(he=ge.payload)){K=he.call(ce,K,q);break e}K=he;break e;case 3:he.flags=-65537&he.flags|128;case 0:if(null==(q="function"==typeof(he=ge.payload)?he.call(ce,K,q):he))break e;K=F({},K,q);break e;case 2:bo=!0}}null!==k.callback&&0!==k.lane&&(s.flags|=64,null===(q=m.effects)?m.effects=[k]:q.push(k))}else ce={eventTime:ce,lane:q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},null===Z?(z=Z=ce,T=K):Z=Z.next=ce,b|=q;if(null===(k=k.next)){if(null===(k=m.shared.pending))break;k=(q=k).next,q.next=null,m.lastBaseUpdate=q,m.shared.pending=null}}if(null===Z&&(T=K),m.baseState=T,m.firstBaseUpdate=z,m.lastBaseUpdate=Z,null!==(a=m.shared.interleaved)){m=a;do{b|=m.lane,m=m.next}while(m!==a)}else null===h&&(m.shared.lanes=0);Jo|=b,s.lanes=b,s.memoizedState=K}}function Xu(s,a,c){if(s=a.effects,a.effects=null,null!==s)for(a=0;a<s.length;a++){var d=s[a],m=d.callback;if(null!==m){if(d.callback=null,d=c,"function"!=typeof m)throw Error(W(191,m));m.call(d)}}}var Ar={},zn=_o(Ar),Tr=_o(Ar),Fr=_o(Ar);function Xo(s){if(s===Ar)throw Error(W(174));return s}function Wl(s,a){switch(Qe(Fr,a),Qe(Tr,s),Qe(zn,Ar),s=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:qi(null,"");break;default:a=qi(a=(s=8===s?a.parentNode:a).namespaceURI||null,s=s.tagName)}rt(zn),Qe(zn,a)}function Ei(){rt(zn),rt(Tr),rt(Fr)}function Uu(s){Xo(Fr.current);var a=Xo(zn.current),c=qi(a,s.type);a!==c&&(Qe(Tr,s),Qe(zn,c))}function ql(s){Tr.current===s&&(rt(zn),rt(Tr))}var st=_o(0);function Rr(s){for(var a=s;null!==a;){if(13===a.tag){var c=a.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===s)break;for(;null===a.sibling;){if(null===a.return||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ii=[];function Zl(){for(var s=0;s<Ii.length;s++)Ii[s]._workInProgressVersionPrimary=null;Ii.length=0}var Zs=mt.ReactCurrentDispatcher,Jl=mt.ReactCurrentBatchConfig,Uo=0,ut=null,Nt=null,Rt=null,jr=!1,Mr=!1,$r=0,ef=0;function Bt(){throw Error(W(321))}function Co(s,a){if(null===a)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!sn(s[c],a[c]))return!1;return!0}function Kl(s,a,c,d,m,h){if(Uo=h,ut=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Zs.current=null===s||null===s.memoizedState?rf:sf,s=c(d,m),Mr){h=0;do{if(Mr=!1,$r=0,25<=h)throw Error(W(301));h+=1,Rt=Nt=null,a.updateQueue=null,Zs.current=af,s=c(d,m)}while(Mr)}if(Zs.current=ea,a=null!==Nt&&null!==Nt.next,Uo=0,Rt=Nt=ut=null,jr=!1,a)throw Error(W(300));return s}function Ql(){var s=0!==$r;return $r=0,s}function Bn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Rt?ut.memoizedState=Rt=s:Rt=Rt.next=s,Rt}function vn(){if(null===Nt){var s=ut.alternate;s=null!==s?s.memoizedState:null}else s=Nt.next;var a=null===Rt?ut.memoizedState:Rt.next;if(null!==a)Rt=a,Nt=s;else{if(null===s)throw Error(W(310));s={memoizedState:(Nt=s).memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},null===Rt?ut.memoizedState=Rt=s:Rt=Rt.next=s}return Rt}function Ai(s,a){return"function"==typeof a?a(s):a}function Gr(s){var a=vn(),c=a.queue;if(null===c)throw Error(W(311));c.lastRenderedReducer=s;var d=Nt,m=d.baseQueue,h=c.pending;if(null!==h){if(null!==m){var b=m.next;m.next=h.next,h.next=b}d.baseQueue=m=h,c.pending=null}if(null!==m){d=d.baseState;var k=b=null,T=null,z=h=m.next;do{var Z=z.lane;if((Uo&Z)===Z)null!==T&&(T=T.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),d=z.hasEagerState?z.eagerState:s(d,z.action);else{var K={lane:Z,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};null===T?(k=T=K,b=d):T=T.next=K,ut.lanes|=Z,Jo|=Z}z=z.next}while(null!==z&&z!==h);null===T?b=d:T.next=k,sn(d,a.memoizedState)||(Yt=!0),a.memoizedState=d,a.baseState=b,a.baseQueue=T,c.lastRenderedState=d}if(null!==(s=c.interleaved)){m=s;do{ut.lanes|=h=m.lane,Jo|=h,m=m.next}while(m!==s)}else null===m&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Js(s){var a=vn(),c=a.queue;if(null===c)throw Error(W(311));c.lastRenderedReducer=s;var d=c.dispatch,m=c.pending,h=a.memoizedState;if(null!==m){c.pending=null;var b=m=m.next;do{h=s(h,b.action),b=b.next}while(b!==m);sn(h,a.memoizedState)||(Yt=!0),a.memoizedState=h,null===a.baseQueue&&(a.baseState=h),c.lastRenderedState=h}return[h,d]}function ec(){}function tc(s,a){var c=ut,d=vn(),m=a(),h=!sn(d.memoizedState,m);if(h&&(d.memoizedState=m,Yt=!0),nc(Wu.bind(null,c,d=d.queue,s),[s]),d.getSnapshot!==a||h||null!==Rt&&1&Rt.memoizedState.tag){if(c.flags|=2048,Dr(9,Hu.bind(null,c,d,m,a),void 0,null),null===ht)throw Error(W(349));30&Uo||Yu(c,a,m)}return m}function Yu(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},null===(a=ut.updateQueue)?(ut.updateQueue=a={lastEffect:null,stores:null},a.stores=[s]):null===(c=a.stores)?a.stores=[s]:c.push(s)}function Hu(s,a,c,d){a.value=c,a.getSnapshot=d,qu(a)&&Zu(s)}function Wu(s,a,c){return c(function(){qu(a)&&Zu(s)})}function qu(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!sn(s,c)}catch{return!0}}function Zu(s){var a=gn(s,1);null!==a&&Sn(a,s,1,-1)}function Ju(s){var a=Bn();return"function"==typeof s&&(s=s()),a.memoizedState=a.baseState=s,a.queue=s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:s},s=s.dispatch=of.bind(null,ut,s),[a.memoizedState,s]}function Dr(s,a,c,d){return s={tag:s,create:a,destroy:c,deps:d,next:null},null===(a=ut.updateQueue)?(ut.updateQueue=a={lastEffect:null,stores:null},a.lastEffect=s.next=s):null===(c=a.lastEffect)?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s),s}function Ku(){return vn().memoizedState}function Ks(s,a,c,d){var m=Bn();ut.flags|=s,m.memoizedState=Dr(1|a,c,void 0,void 0===d?null:d)}function Qs(s,a,c,d){var m=vn();d=void 0===d?null:d;var h=void 0;if(null!==Nt){var b=Nt.memoizedState;if(h=b.destroy,null!==d&&Co(d,b.deps))return void(m.memoizedState=Dr(a,c,h,d))}ut.flags|=s,m.memoizedState=Dr(1|a,c,h,d)}function Qu(s,a){return Ks(8390656,8,s,a)}function nc(s,a){return Qs(2048,8,s,a)}function ed(s,a){return Qs(4,2,s,a)}function td(s,a){return Qs(4,4,s,a)}function nd(s,a){return"function"==typeof a?(s=s(),a(s),function(){a(null)}):null!=a?(s=s(),a.current=s,function(){a.current=null}):void 0}function od(s,a,c){return c=null!=c?c.concat([s]):null,Qs(4,4,nd.bind(null,a,s),c)}function oc(){}function id(s,a){var c=vn();a=void 0===a?null:a;var d=c.memoizedState;return null!==d&&null!==a&&Co(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function ic(s,a){var c=vn();a=void 0===a?null:a;var d=c.memoizedState;return null!==d&&null!==a&&Co(a,d[1])?d[0]:(s=s(),c.memoizedState=[s,a],s)}function rd(s,a,c){return 21&Uo?(sn(c,a)||(c=nu(),ut.lanes|=c,Jo|=c,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,Yt=!0),s.memoizedState=c)}function tf(s,a){var c=ze;ze=0!==c&&4>c?c:4,s(!0);var d=Jl.transition;Jl.transition={};try{s(!1),a()}finally{ze=c,Jl.transition=d}}function sd(){return vn().memoizedState}function nf(s,a,c){var d=oo(s);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},ad(s)?ld(a,c):null!==(c=Bu(s,a,c,d))&&(Sn(c,s,d,yt()),cd(c,a,d))}function of(s,a,c){var d=oo(s),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(ad(s))ld(a,m);else{var h=s.alternate;if(0===s.lanes&&(null===h||0===h.lanes)&&null!==(h=a.lastRenderedReducer))try{var b=a.lastRenderedState,k=h(b,c);if(m.hasEagerState=!0,m.eagerState=k,sn(k,b)){var T=a.interleaved;return null===T?(m.next=m,Hs(a)):(m.next=T.next,T.next=m),void(a.interleaved=m)}}catch{}null!==(c=Bu(s,a,m,d))&&(Sn(c,s,d,m=yt()),cd(c,a,d))}}function ad(s){var a=s.alternate;return s===ut||null!==a&&a===ut}function ld(s,a){Mr=jr=!0;var c=s.pending;null===c?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function cd(s,a,c){if(4194240&c){var d=a.lanes;a.lanes=c|=d&=s.pendingLanes,rr(s,c)}}var ea={readContext:hn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},rf={readContext:hn,useCallback:function(s,a){return Bn().memoizedState=[s,void 0===a?null:a],s},useContext:hn,useEffect:Qu,useImperativeHandle:function(s,a,c){return c=null!=c?c.concat([s]):null,Ks(4194308,4,nd.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Ks(4194308,4,s,a)},useInsertionEffect:function(s,a){return Ks(4,2,s,a)},useMemo:function(s,a){var c=Bn();return a=void 0===a?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var d=Bn();return a=void 0!==c?c(a):a,d.memoizedState=d.baseState=a,d.queue=s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},s=s.dispatch=nf.bind(null,ut,s),[d.memoizedState,s]},useRef:function(s){return Bn().memoizedState={current:s}},useState:Ju,useDebugValue:oc,useDeferredValue:function(s){return Bn().memoizedState=s},useTransition:function(){var s=Ju(!1),a=s[0];return s=tf.bind(null,s[1]),Bn().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var d=ut,m=Bn();if(Re){if(void 0===c)throw Error(W(407));c=c()}else{if(c=a(),null===ht)throw Error(W(349));30&Uo||Yu(d,a,c)}m.memoizedState=c;var h={value:c,getSnapshot:a};return m.queue=h,Qu(Wu.bind(null,d,h,s),[s]),d.flags|=2048,Dr(9,Hu.bind(null,d,h,c,a),void 0,null),c},useId:function(){var s=Bn(),a=ht.identifierPrefix;if(Re){var c=yo;a=":"+a+"R"+(c=(On&~(1<<32-In(On)-1)).toString(32)+c),0<(c=$r++)&&(a+="H"+c.toString(32)),a+=":"}else a=":"+a+"r"+(c=ef++).toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},sf={readContext:hn,useCallback:id,useContext:hn,useEffect:nc,useImperativeHandle:od,useInsertionEffect:ed,useLayoutEffect:td,useMemo:ic,useReducer:Gr,useRef:Ku,useState:function(){return Gr(Ai)},useDebugValue:oc,useDeferredValue:function(s){return rd(vn(),Nt.memoizedState,s)},useTransition:function(){return[Gr(Ai)[0],vn().memoizedState]},useMutableSource:ec,useSyncExternalStore:tc,useId:sd,unstable_isNewReconciler:!1},af={readContext:hn,useCallback:id,useContext:hn,useEffect:nc,useImperativeHandle:od,useInsertionEffect:ed,useLayoutEffect:td,useMemo:ic,useReducer:Js,useRef:Ku,useState:function(){return Js(Ai)},useDebugValue:oc,useDeferredValue:function(s){var a=vn();return null===Nt?a.memoizedState=s:rd(a,Nt.memoizedState,s)},useTransition:function(){return[Js(Ai)[0],vn().memoizedState]},useMutableSource:ec,useSyncExternalStore:tc,useId:sd,unstable_isNewReconciler:!1};function Tn(s,a){if(s&&s.defaultProps){for(var c in a=F({},a),s=s.defaultProps)void 0===a[c]&&(a[c]=s[c]);return a}return a}function rc(s,a,c,d){c=null==(c=c(d,a=s.memoizedState))?a:F({},a,c),s.memoizedState=c,0===s.lanes&&(s.updateQueue.baseState=c)}var Or={isMounted:function(s){return!!(s=s._reactInternals)&&Go(s)===s},enqueueSetState:function(s,a,c){s=s._reactInternals;var d=yt(),m=oo(s),h=no(d,m);h.payload=a,null!=c&&(h.callback=c),null!==(a=xo(s,h,m))&&(Sn(a,s,m,d),Ws(a,s,m))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=yt(),m=oo(s),h=no(d,m);h.tag=1,h.payload=a,null!=c&&(h.callback=c),null!==(a=xo(s,h,m))&&(Sn(a,s,m,d),Ws(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=yt(),d=oo(s),m=no(c,d);m.tag=2,null!=a&&(m.callback=a),null!==(a=xo(s,m,d))&&(Sn(a,s,d,c),Ws(a,s,d))}};function ud(s,a,c,d,m,h,b){return"function"==typeof(s=s.stateNode).shouldComponentUpdate?s.shouldComponentUpdate(d,h,b):!(a.prototype&&a.prototype.isPureReactComponent&&fi(c,d)&&fi(m,h))}function dd(s,a,c){var d=!1,m=ho,h=a.contextType;return"object"==typeof h&&null!==h?h=hn(h):(m=en(a)?zo:zt.current,h=(d=null!=(d=a.contextTypes))?bi(s,m):ho),a=new a(c,h),s.memoizedState=null!=a.state?a.state:null,a.updater=Or,s.stateNode=a,a._reactInternals=s,d&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=h),a}function pd(s,a,c,d){s=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(c,d),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&Or.enqueueReplaceState(a,a.state,null)}function sc(s,a,c,d){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},Hl(s);var h=a.contextType;"object"==typeof h&&null!==h?m.context=hn(h):(h=en(a)?zo:zt.current,m.context=bi(s,h)),m.state=s.memoizedState,"function"==typeof(h=a.getDerivedStateFromProps)&&(rc(s,a,h,c),m.state=s.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof m.getSnapshotBeforeUpdate||"function"!=typeof m.UNSAFE_componentWillMount&&"function"!=typeof m.componentWillMount||(a=m.state,"function"==typeof m.componentWillMount&&m.componentWillMount(),"function"==typeof m.UNSAFE_componentWillMount&&m.UNSAFE_componentWillMount(),a!==m.state&&Or.enqueueReplaceState(m,m.state,null),qs(s,c,m,d),m.state=s.memoizedState),"function"==typeof m.componentDidMount&&(s.flags|=4194308)}function Yo(s,a){try{var c="",d=a;do{c+=Je(d),d=d.return}while(d);var m=c}catch(h){m="\nError generating stack: "+h.message+"\n"+h.stack}return{value:s,source:a,stack:m,digest:null}}function Ut(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}function ta(s,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var lf="function"==typeof WeakMap?WeakMap:Map;function Ti(s,a,c){(c=no(-1,c)).tag=3,c.payload={element:null};var d=a.value;return c.callback=function(){Xr||(Xr=!0,Bi=d),ta(0,a)},c}function yn(s,a,c){(c=no(-1,c)).tag=3;var d=s.type.getDerivedStateFromError;if("function"==typeof d){var m=a.value;c.payload=function(){return d(m)},c.callback=function(){ta(0,a)}}var h=s.stateNode;return null!==h&&"function"==typeof h.componentDidCatch&&(c.callback=function(){ta(0,a),"function"!=typeof d&&(null===wo?wo=new Set([this]):wo.add(this));var b=a.stack;this.componentDidCatch(a.value,{componentStack:null!==b?b:""})}),c}function fd(s,a,c){var d=s.pingCache;if(null===d){d=s.pingCache=new lf;var m=new Set;d.set(a,m)}else void 0===(m=d.get(a))&&d.set(a,m=new Set);m.has(c)||(m.add(c),s=_f.bind(null,s,a,c),a.then(s,s))}function Fi(s){do{var a;if((a=13===s.tag)&&(a=null===(a=s.memoizedState)||null!==a.dehydrated),a)return s;s=s.return}while(null!==s);return null}function na(s,a,c,d,m){return 1&s.mode?(s.flags|=65536,s.lanes=m,s):(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:((a=no(-1,1)).tag=2,xo(c,a,1))),c.lanes|=1),s)}var Ri=mt.ReactCurrentOwner,Yt=!1;function Pt(s,a,c,d){a.child=null===s?Pl(a,null,c,d):ki(a,s.child,c,d)}function md(s,a,c,d,m){c=c.render;var h=a.ref;return Ni(a,m),d=Kl(s,a,c,d,h,m),c=Ql(),null===s||Yt?(Re&&c&&Ol(a),a.flags|=1,Pt(s,a,d,m),a.child):(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,bn(s,a,m))}function ac(s,a,c,d,m){if(null===s){var h=c.type;return"function"!=typeof h||fc(h)||void 0!==h.defaultProps||null!==c.compare||void 0!==c.defaultProps?((s=ba(c.type,null,d,a,a.mode,m)).ref=a.ref,s.return=a,a.child=s):(a.tag=15,a.type=h,_d(s,a,h,d,m))}return h=s.child,s.lanes&m||!(c=null!==(c=c.compare)?c:fi)(h.memoizedProps,d)||s.ref!==a.ref?(a.flags|=1,(s=Eo(h,d)).ref=a.ref,s.return=a,a.child=s):bn(s,a,m)}function _d(s,a,c,d,m){if(null!==s){var h=s.memoizedProps;if(fi(h,d)&&s.ref===a.ref){if(Yt=!1,a.pendingProps=d=h,!(s.lanes&m))return a.lanes=s.lanes,bn(s,a,m);131072&s.flags&&(Yt=!0)}}return lc(s,a,c,d,m)}function hd(s,a,c){var d=a.pendingProps,m=d.children,h=null!==s?s.memoizedState:null;if("hidden"===d.mode)if(1&a.mode){if(!(1073741824&c))return s=null!==h?h.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Qe(Vi,un),un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=null!==h?h.baseLanes:c,Qe(Vi,un),un|=d}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Vi,un),un|=c;else null!==h?(d=h.baseLanes|c,a.memoizedState=null):d=c,Qe(Vi,un),un|=d;return Pt(s,a,m,c),a.child}function gd(s,a){var c=a.ref;(null===s&&null!==c||null!==s&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function lc(s,a,c,d,m){var h=en(c)?zo:zt.current;return h=bi(a,h),Ni(a,m),c=Kl(s,a,c,d,h,m),d=Ql(),null===s||Yt?(Re&&d&&Ol(a),a.flags|=1,Pt(s,a,c,m),a.child):(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,bn(s,a,m))}function Fn(s,a,c,d,m){if(en(c)){var h=!0;zs(a)}else h=!1;if(Ni(a,m),null===a.stateNode)aa(s,a),dd(a,c,d),sc(a,c,d,m),d=!0;else if(null===s){var b=a.stateNode,k=a.memoizedProps;b.props=k;var T=b.context,z=c.contextType;z="object"==typeof z&&null!==z?hn(z):bi(a,z=en(c)?zo:zt.current);var Z=c.getDerivedStateFromProps,K="function"==typeof Z||"function"==typeof b.getSnapshotBeforeUpdate;K||"function"!=typeof b.UNSAFE_componentWillReceiveProps&&"function"!=typeof b.componentWillReceiveProps||(k!==d||T!==z)&&pd(a,b,d,z),bo=!1;var q=a.memoizedState;b.state=q,qs(a,d,b,m),T=a.memoizedState,k!==d||q!==T||Qt.current||bo?("function"==typeof Z&&(rc(a,c,Z,d),T=a.memoizedState),(k=bo||ud(a,c,k,d,q,T,z))?(K||"function"!=typeof b.UNSAFE_componentWillMount&&"function"!=typeof b.componentWillMount||("function"==typeof b.componentWillMount&&b.componentWillMount(),"function"==typeof b.UNSAFE_componentWillMount&&b.UNSAFE_componentWillMount()),"function"==typeof b.componentDidMount&&(a.flags|=4194308)):("function"==typeof b.componentDidMount&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=T),b.props=d,b.state=T,b.context=z,d=k):("function"==typeof b.componentDidMount&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Pu(s,a),k=a.memoizedProps,z=a.type===a.elementType?k:Tn(a.type,k),b.props=z,K=a.pendingProps,q=b.context,T="object"==typeof(T=c.contextType)&&null!==T?hn(T):bi(a,T=en(c)?zo:zt.current);var ce=c.getDerivedStateFromProps;(Z="function"==typeof ce||"function"==typeof b.getSnapshotBeforeUpdate)||"function"!=typeof b.UNSAFE_componentWillReceiveProps&&"function"!=typeof b.componentWillReceiveProps||(k!==K||q!==T)&&pd(a,b,d,T),bo=!1,b.state=q=a.memoizedState,qs(a,d,b,m);var he=a.memoizedState;k!==K||q!==he||Qt.current||bo?("function"==typeof ce&&(rc(a,c,ce,d),he=a.memoizedState),(z=bo||ud(a,c,z,d,q,he,T)||!1)?(Z||"function"!=typeof b.UNSAFE_componentWillUpdate&&"function"!=typeof b.componentWillUpdate||("function"==typeof b.componentWillUpdate&&b.componentWillUpdate(d,he,T),"function"==typeof b.UNSAFE_componentWillUpdate&&b.UNSAFE_componentWillUpdate(d,he,T)),"function"==typeof b.componentDidUpdate&&(a.flags|=4),"function"==typeof b.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof b.componentDidUpdate||k===s.memoizedProps&&q===s.memoizedState||(a.flags|=4),"function"!=typeof b.getSnapshotBeforeUpdate||k===s.memoizedProps&&q===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=he),b.props=d,b.state=he,b.context=T,d=z):("function"!=typeof b.componentDidUpdate||k===s.memoizedProps&&q===s.memoizedState||(a.flags|=4),"function"!=typeof b.getSnapshotBeforeUpdate||k===s.memoizedProps&&q===s.memoizedState||(a.flags|=1024),d=!1)}return So(s,a,c,d,h,m)}function So(s,a,c,d,m,h){gd(s,a);var b=!!(128&a.flags);if(!d&&!b)return m&&$u(a,c,!1),bn(s,a,h);d=a.stateNode,Ri.current=a;var k=b&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return a.flags|=1,null!==s&&b?(a.child=ki(a,s.child,null,h),a.child=ki(a,null,k,h)):Pt(s,a,k,h),a.memoizedState=d.state,m&&$u(a,c,!0),a.child}function ji(s){var a=s.stateNode;a.pendingContext?ju(0,a.pendingContext,a.pendingContext!==a.context):a.context&&ju(0,a.context,!1),Wl(s,a.containerInfo)}function Mi(s,a,c,d,m){return Si(),Nr(m),a.flags|=256,Pt(s,a,c,d),a.child}var yd,la,bd,xd,oa={dehydrated:null,treeContext:null,retryLane:0};function $i(s){return{baseLanes:s,cachePool:null,transitions:null}}function Gi(s,a,c){var k,d=a.pendingProps,m=st.current,h=!1,b=!!(128&a.flags);if((k=b)||(k=(null===s||null!==s.memoizedState)&&!!(2&m)),k?(h=!0,a.flags&=-129):(null===s||null!==s.memoizedState)&&(m|=1),Qe(st,1&m),null===s)return zl(a),null!==(s=a.memoizedState)&&null!==(s=s.dehydrated)?(a.lanes=1&a.mode?"$!"===s.data?8:1073741824:1,null):(b=d.children,s=d.fallback,h?(h=a.child,b={mode:"hidden",children:b},1&(d=a.mode)||null===h?h=xa(b,d,0,null):(h.childLanes=0,h.pendingProps=b),s=ni(s,d,c,null),h.return=a,s.return=a,h.sibling=s,a.child=h,a.child.memoizedState=$i(c),a.memoizedState=oa,s):Di(a,b));if(null!==(m=s.memoizedState)&&null!==(k=m.dehydrated))return function ia(s,a,c,d,m,h,b){if(c)return 256&a.flags?(a.flags&=-257,Pn(s,a,b,d=Ut(Error(W(422))))):null!==a.memoizedState?(a.child=s.child,a.flags|=128,null):(h=d.fallback,d=xa({mode:"visible",children:d.children},m=a.mode,0,null),(h=ni(h,m,b,null)).flags|=2,d.return=a,h.return=a,d.sibling=h,a.child=d,1&a.mode&&ki(a,s.child,null,b),a.child.memoizedState=$i(b),a.memoizedState=oa,h);if(!(1&a.mode))return Pn(s,a,b,null);if("$!"===m.data){if(d=m.nextSibling&&m.nextSibling.dataset)var k=d.dgst;return d=k,Pn(s,a,b,d=Ut(h=Error(W(419)),d,void 0))}if(k=!!(b&s.childLanes),Yt||k){if(null!==(d=ht)){switch(b&-b){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}0!==(m=m&(d.suspendedLanes|b)?0:m)&&m!==h.retryLane&&(h.retryLane=m,gn(s,m),Sn(d,s,m,-1))}return va(),Pn(s,a,b,d=Ut(Error(W(421))))}return"$?"===m.data?(a.flags|=128,a.child=s.child,a=hf.bind(null,s),m._reactRetry=a,null):(s=h.treeContext,an=mo(m.nextSibling),tn=a,Re=!0,Vn=null,null!==s&&(et[_n++]=On,et[_n++]=yo,et[_n++]=vo,On=s.id,yo=s.overflow,vo=a),(a=Di(a,d.children)).flags|=4096,a)}(s,a,b,d,k,m,c);if(h){h=d.fallback,k=(m=s.child).sibling;var T={mode:"hidden",children:d.children};return 1&(b=a.mode)||a.child===m?(d=Eo(m,T)).subtreeFlags=14680064&m.subtreeFlags:((d=a.child).childLanes=0,d.pendingProps=T,a.deletions=null),null!==k?h=Eo(k,h):(h=ni(h,b,c,null)).flags|=2,h.return=a,d.return=a,d.sibling=h,a.child=d,d=h,h=a.child,b=null===(b=s.child.memoizedState)?$i(c):{baseLanes:b.baseLanes|c,cachePool:null,transitions:b.transitions},h.memoizedState=b,h.childLanes=s.childLanes&~c,a.memoizedState=oa,d}return s=(h=s.child).sibling,d=Eo(h,{mode:"visible",children:d.children}),!(1&a.mode)&&(d.lanes=c),d.return=a,d.sibling=null,null!==s&&(null===(c=a.deletions)?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=d,a.memoizedState=null,d}function Di(s,a){return(a=xa({mode:"visible",children:a},s.mode,0,null)).return=s,s.child=a}function Pn(s,a,c,d){return null!==d&&Nr(d),ki(a,s.child,null,c),(s=Di(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,s}function Oi(s,a,c){s.lanes|=a;var d=s.alternate;null!==d&&(d.lanes|=a),Yl(s.return,a,c)}function ra(s,a,c,d,m){var h=s.memoizedState;null===h?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=d,h.tail=c,h.tailMode=m)}function sa(s,a,c){var d=a.pendingProps,m=d.revealOrder,h=d.tail;if(Pt(s,a,d.children,c),2&(d=st.current))d=1&d|2,a.flags|=128;else{if(null!==s&&128&s.flags)e:for(s=a.child;null!==s;){if(13===s.tag)null!==s.memoizedState&&Oi(s,c,a);else if(19===s.tag)Oi(s,c,a);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Qe(st,d),1&a.mode)switch(m){case"forwards":for(c=a.child,m=null;null!==c;)null!==(s=c.alternate)&&null===Rr(s)&&(m=c),c=c.sibling;null===(c=m)?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),ra(a,!1,m,c,h);break;case"backwards":for(c=null,m=a.child,a.child=null;null!==m;){if(null!==(s=m.alternate)&&null===Rr(s)){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}ra(a,!0,c,null,h);break;case"together":ra(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function aa(s,a){!(1&a.mode)&&null!==s&&(s.alternate=null,a.alternate=null,a.flags|=2)}function bn(s,a,c){if(null!==s&&(a.dependencies=s.dependencies),Jo|=a.lanes,!(c&a.childLanes))return null;if(null!==s&&a.child!==s.child)throw Error(W(153));if(null!==a.child){for(c=Eo(s=a.child,s.pendingProps),a.child=c,c.return=a;null!==s.sibling;)(c=c.sibling=Eo(s=s.sibling,s.pendingProps)).return=a;c.sibling=null}return a.child}function Ho(s,a){if(!Re)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;null!==a;)null!==a.alternate&&(c=a),a=a.sibling;null===c?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?a||null===s.tail?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Mt(s){var a=null!==s.alternate&&s.alternate.child===s.child,c=0,d=0;if(a)for(var m=s.child;null!==m;)c|=m.lanes|m.childLanes,d|=14680064&m.subtreeFlags,d|=14680064&m.flags,m.return=s,m=m.sibling;else for(m=s.child;null!==m;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function cf(s,a,c){var d=a.pendingProps;switch(Ls(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(a),null;case 1:case 17:return en(a.type)&&Vs(),Mt(a),null;case 3:return d=a.stateNode,Ei(),rt(Qt),rt(zt),Zl(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(null===s||null===s.child)&&(wr(a)?a.flags|=4:null===s||s.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==Vn&&(Pi(Vn),Vn=null))),la(s,a),Mt(a),null;case 5:ql(a);var m=Xo(Fr.current);if(c=a.type,null!==s&&null!=a.stateNode)bd(s,a,c,d,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!d){if(null===a.stateNode)throw Error(W(166));return Mt(a),null}if(s=Xo(zn.current),wr(a)){c=a.type;var h=a.memoizedProps;switch((d=a.stateNode)[Dn]=a,d[Sr]=h,s=!!(1&a.mode),c){case"dialog":it("cancel",d),it("close",d);break;case"iframe":case"object":case"embed":it("load",d);break;case"video":case"audio":for(m=0;m<gr.length;m++)it(gr[m],d);break;case"source":it("error",d);break;case"img":case"image":case"link":it("error",d),it("load",d);break;case"details":it("toggle",d);break;case"input":jc(d,h),it("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},it("invalid",d);break;case"textarea":Gc(d,h),it("invalid",d)}for(var b in Wa(c,h),m=null,h)if(h.hasOwnProperty(b)){var k=h[b];"children"===b?"string"==typeof k?d.textContent!==k&&(!0!==h.suppressHydrationWarning&&Gs(d.textContent,k,s),m=["children",k]):"number"==typeof k&&d.textContent!==""+k&&(!0!==h.suppressHydrationWarning&&Gs(d.textContent,k,s),m=["children",""+k]):Ot.hasOwnProperty(b)&&null!=k&&"onScroll"===b&&it("scroll",d)}switch(c){case"input":as(d),$c(d,h,!0);break;case"textarea":as(d),Dc(d);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(d.onclick=Ds)}a.updateQueue=d=m,null!==d&&(a.flags|=4)}else{b=9===m.nodeType?m:m.ownerDocument,"http://www.w3.org/1999/xhtml"===s&&(s=Oc(c)),"http://www.w3.org/1999/xhtml"===s?"script"===c?((s=b.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):"string"==typeof d.is?s=b.createElement(c,{is:d.is}):(s=b.createElement(c),"select"===c&&(b=s,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):s=b.createElementNS(s,c),s[Dn]=a,s[Sr]=d,yd(s,a,!1,!1),a.stateNode=s;e:{switch(b=qa(c,d),c){case"dialog":it("cancel",s),it("close",s),m=d;break;case"iframe":case"object":case"embed":it("load",s),m=d;break;case"video":case"audio":for(m=0;m<gr.length;m++)it(gr[m],s);m=d;break;case"source":it("error",s),m=d;break;case"img":case"image":case"link":it("error",s),it("load",s),m=d;break;case"details":it("toggle",s),m=d;break;case"input":jc(s,d),m=Ua(s,d),it("invalid",s);break;case"option":default:m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=F({},d,{value:void 0}),it("invalid",s);break;case"textarea":Gc(s,d),m=Wi(s,d),it("invalid",s)}for(h in Wa(c,m),k=m)if(k.hasOwnProperty(h)){var T=k[h];"style"===h?Bc(s,T):"dangerouslySetInnerHTML"===h?null!=(T=T?T.__html:void 0)&&Zi(s,T):"children"===h?"string"==typeof T?("textarea"!==c||""!==T)&&Ji(s,T):"number"==typeof T&&Ji(s,""+T):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(Ot.hasOwnProperty(h)?null!=T&&"onScroll"===h&&it("scroll",s):null!=T&&Xt(s,h,T,b))}switch(c){case"input":as(s),$c(s,d,!1);break;case"textarea":as(s),Dc(s);break;case"option":null!=d.value&&s.setAttribute("value",""+He(d.value));break;case"select":s.multiple=!!d.multiple,null!=(h=d.value)?$o(s,!!d.multiple,h,!1):null!=d.defaultValue&&$o(s,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof m.onClick&&(s.onclick=Ds)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}return Mt(a),null;case 6:if(s&&null!=a.stateNode)xd(s,a,s.memoizedProps,d);else{if("string"!=typeof d&&null===a.stateNode)throw Error(W(166));if(c=Xo(Fr.current),Xo(zn.current),wr(a)){if(c=a.memoizedProps,(d=a.stateNode)[Dn]=a,(h=d.nodeValue!==c)&&null!==(s=tn))switch(s.tag){case 3:Gs(d.nodeValue,c,!!(1&s.mode));break;case 5:!0!==s.memoizedProps.suppressHydrationWarning&&Gs(d.nodeValue,c,!!(1&s.mode))}h&&(a.flags|=4)}else(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d))[Dn]=a,a.stateNode=d}return Mt(a),null;case 13:if(rt(st),d=a.memoizedState,null===s||null!==s.memoizedState&&null!==s.memoizedState.dehydrated){if(Re&&null!==an&&1&a.mode&&!(128&a.flags))Xs(),Si(),a.flags|=98560,h=!1;else if(h=wr(a),null!==d&&null!==d.dehydrated){if(null===s){if(!h)throw Error(W(318));if(!(h=null!==(h=a.memoizedState)?h.dehydrated:null))throw Error(W(317));h[Dn]=a}else Si(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;Mt(a),h=!1}else null!==Vn&&(Pi(Vn),Vn=null),h=!0;if(!h)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=c,a):((d=null!==d)!=(null!==s&&null!==s.memoizedState)&&d&&(a.child.flags|=8192,1&a.mode&&(null===s||1&st.current?0===It&&(It=3):va())),null!==a.updateQueue&&(a.flags|=4),Mt(a),null);case 4:return Ei(),la(s,a),null===s&&yr(a.stateNode.containerInfo),Mt(a),null;case 10:return Ul(a.type._context),Mt(a),null;case 19:if(rt(st),null===(h=a.memoizedState))return Mt(a),null;if(d=!!(128&a.flags),null===(b=h.rendering))if(d)Ho(h,!1);else{if(0!==It||null!==s&&128&s.flags)for(s=a.child;null!==s;){if(null!==(b=Rr(s))){for(a.flags|=128,Ho(h,!1),null!==(d=b.updateQueue)&&(a.updateQueue=d,a.flags|=4),a.subtreeFlags=0,d=c,c=a.child;null!==c;)s=d,(h=c).flags&=14680066,null===(b=h.alternate)?(h.childLanes=0,h.lanes=s,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,h.dependencies=null===(s=b.dependencies)?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Qe(st,1&st.current|2),a.child}s=s.sibling}null!==h.tail&&gt()>Ko&&(a.flags|=128,d=!0,Ho(h,!1),a.lanes=4194304)}else{if(!d)if(null!==(s=Rr(b))){if(a.flags|=128,d=!0,null!==(c=s.updateQueue)&&(a.updateQueue=c,a.flags|=4),Ho(h,!0),null===h.tail&&"hidden"===h.tailMode&&!b.alternate&&!Re)return Mt(a),null}else 2*gt()-h.renderingStartTime>Ko&&1073741824!==c&&(a.flags|=128,d=!0,Ho(h,!1),a.lanes=4194304);h.isBackwards?(b.sibling=a.child,a.child=b):(null!==(c=h.last)?c.sibling=b:a.child=b,h.last=b)}return null!==h.tail?(h.rendering=a=h.tail,h.tail=a.sibling,h.renderingStartTime=gt(),a.sibling=null,c=st.current,Qe(st,d?1&c|2:1&c),a):(Mt(a),null);case 22:case 23:return ga(),d=null!==a.memoizedState,null!==s&&null!==s.memoizedState!==d&&(a.flags|=8192),d&&1&a.mode?1073741824&un&&(Mt(a),6&a.subtreeFlags&&(a.flags|=8192)):Mt(a),null;case 24:case 25:return null}throw Error(W(156,a.tag))}function uf(s,a){switch(Ls(a),a.tag){case 1:return en(a.type)&&Vs(),65536&(s=a.flags)?(a.flags=-65537&s|128,a):null;case 3:return Ei(),rt(Qt),rt(zt),Zl(),65536&(s=a.flags)&&!(128&s)?(a.flags=-65537&s|128,a):null;case 5:return ql(a),null;case 13:if(rt(st),null!==(s=a.memoizedState)&&null!==s.dehydrated){if(null===a.alternate)throw Error(W(340));Si()}return 65536&(s=a.flags)?(a.flags=-65537&s|128,a):null;case 19:return rt(st),null;case 4:return Ei(),null;case 10:return Ul(a.type._context),null;case 22:case 23:return ga(),null;default:return null}}yd=function(s,a){for(var c=a.child;null!==c;){if(5===c.tag||6===c.tag)s.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},la=function(){},bd=function(s,a,c,d){var m=s.memoizedProps;if(m!==d){s=a.stateNode,Xo(zn.current);var b,h=null;switch(c){case"input":m=Ua(s,m),d=Ua(s,d),h=[];break;case"select":m=F({},m,{value:void 0}),d=F({},d,{value:void 0}),h=[];break;case"textarea":m=Wi(s,m),d=Wi(s,d),h=[];break;default:"function"!=typeof m.onClick&&"function"==typeof d.onClick&&(s.onclick=Ds)}for(z in Wa(c,d),c=null,m)if(!d.hasOwnProperty(z)&&m.hasOwnProperty(z)&&null!=m[z])if("style"===z){var k=m[z];for(b in k)k.hasOwnProperty(b)&&(c||(c={}),c[b]="")}else"dangerouslySetInnerHTML"!==z&&"children"!==z&&"suppressContentEditableWarning"!==z&&"suppressHydrationWarning"!==z&&"autoFocus"!==z&&(Ot.hasOwnProperty(z)?h||(h=[]):(h=h||[]).push(z,null));for(z in d){var T=d[z];if(k=m?.[z],d.hasOwnProperty(z)&&T!==k&&(null!=T||null!=k))if("style"===z)if(k){for(b in k)!k.hasOwnProperty(b)||T&&T.hasOwnProperty(b)||(c||(c={}),c[b]="");for(b in T)T.hasOwnProperty(b)&&k[b]!==T[b]&&(c||(c={}),c[b]=T[b])}else c||(h||(h=[]),h.push(z,c)),c=T;else"dangerouslySetInnerHTML"===z?(k=k?k.__html:void 0,null!=(T=T?T.__html:void 0)&&k!==T&&(h=h||[]).push(z,T)):"children"===z?"string"!=typeof T&&"number"!=typeof T||(h=h||[]).push(z,""+T):"suppressContentEditableWarning"!==z&&"suppressHydrationWarning"!==z&&(Ot.hasOwnProperty(z)?(null!=T&&"onScroll"===z&&it("scroll",s),h||k===T||(h=[])):(h=h||[]).push(z,T))}c&&(h=h||[]).push("style",c);var z=h;(a.updateQueue=z)&&(a.flags|=4)}},xd=function(s,a,c,d){c!==d&&(a.flags|=4)};var Vr=!1,$t=!1,cc="function"==typeof WeakSet?WeakSet:Set,me=null;function Wo(s,a){var c=s.ref;if(null!==c)if("function"==typeof c)try{c(null)}catch(d){dt(s,a,d)}else c.current=null}function zr(s,a,c){try{c()}catch(d){dt(s,a,d)}}var Br=!1;function qo(s,a,c){var d=a.updateQueue;if(null!==(d=null!==d?d.lastEffect:null)){var m=d=d.next;do{if((m.tag&s)===s){var h=m.destroy;m.destroy=void 0,void 0!==h&&zr(a,c,h)}m=m.next}while(m!==d)}}function ln(s,a){if(null!==(a=null!==(a=a.updateQueue)?a.lastEffect:null)){var c=a=a.next;do{(c.tag&s)===s&&(c.destroy=(0,c.create)()),c=c.next}while(c!==a)}}function cn(s){var a=s.ref;null!==a&&(s=s.stateNode,"function"==typeof a?a(s):a.current=s)}function Cd(s){var a=s.alternate;null!==a&&(s.alternate=null,Cd(a)),s.child=null,s.deletions=null,s.sibling=null,5===s.tag&&null!==(a=s.stateNode)&&(delete a[Dn],delete a[Sr],delete a[$l],delete a[Zp],delete a[Jp]),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Pr(s){return 5===s.tag||3===s.tag||4===s.tag}function Sd(s){e:for(;;){for(;null===s.sibling;){if(null===s.return||Pr(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;5!==s.tag&&6!==s.tag&&18!==s.tag;){if(2&s.flags||null===s.child||4===s.tag)continue e;s.child.return=s,s=s.child}if(!(2&s.flags))return s.stateNode}}function Ln(s,a,c){var d=s.tag;if(5===d||6===d)s=s.stateNode,a?8===c.nodeType?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(8===c.nodeType?(a=c.parentNode).insertBefore(s,c):(a=c).appendChild(s),null!=(c=c._reactRootContainer)||null!==a.onclick||(a.onclick=Ds));else if(4!==d&&null!==(s=s.child))for(Ln(s,a,c),s=s.sibling;null!==s;)Ln(s,a,c),s=s.sibling}function ua(s,a,c){var d=s.tag;if(5===d||6===d)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(4!==d&&null!==(s=s.child))for(ua(s,a,c),s=s.sibling;null!==s;)ua(s,a,c),s=s.sibling}var Et=null,xn=!1;function Rn(s,a,c){for(c=c.child;null!==c;)kd(s,a,c),c=c.sibling}function kd(s,a,c){if($n&&"function"==typeof $n.onCommitFiberUnmount)try{$n.onCommitFiberUnmount(fs,c)}catch{}switch(c.tag){case 5:$t||Wo(c,a);case 6:var d=Et,m=xn;Et=null,Rn(s,a,c),xn=m,null!==(Et=d)&&(xn?(c=c.stateNode,8===(s=Et).nodeType?s.parentNode.removeChild(c):s.removeChild(c)):Et.removeChild(c.stateNode));break;case 18:null!==Et&&(xn?(c=c.stateNode,8===(s=Et).nodeType?jl(s.parentNode,c):1===s.nodeType&&jl(s,c),cr(s)):jl(Et,c.stateNode));break;case 4:d=Et,m=xn,Et=c.stateNode.containerInfo,xn=!0,Rn(s,a,c),Et=d,xn=m;break;case 0:case 11:case 14:case 15:if(!$t&&null!==(d=c.updateQueue)&&null!==(d=d.lastEffect)){m=d=d.next;do{var h=m,b=h.destroy;h=h.tag,void 0!==b&&(2&h||4&h)&&zr(c,a,b),m=m.next}while(m!==d)}Rn(s,a,c);break;case 1:if(!$t&&(Wo(c,a),"function"==typeof(d=c.stateNode).componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(k){dt(c,a,k)}Rn(s,a,c);break;case 21:Rn(s,a,c);break;case 22:1&c.mode?($t=(d=$t)||null!==c.memoizedState,Rn(s,a,c),$t=d):Rn(s,a,c);break;default:Rn(s,a,c)}}function wd(s){var a=s.updateQueue;if(null!==a){s.updateQueue=null;var c=s.stateNode;null===c&&(c=s.stateNode=new cc),a.forEach(function(d){var m=gf.bind(null,s,d);c.has(d)||(c.add(d),d.then(m,m))})}}function Cn(s,a){var c=a.deletions;if(null!==c)for(var d=0;d<c.length;d++){var m=c[d];try{var h=s,b=a,k=b;e:for(;null!==k;){switch(k.tag){case 5:Et=k.stateNode,xn=!1;break e;case 3:case 4:Et=k.stateNode.containerInfo,xn=!0;break e}k=k.return}if(null===Et)throw Error(W(160));kd(h,b,m),Et=null,xn=!1;var T=m.alternate;null!==T&&(T.return=null),m.return=null}catch(z){dt(m,a,z)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)Nd(a,s),a=a.sibling}function Nd(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Cn(a,s),Xn(s),4&d){try{qo(3,s,s.return),ln(3,s)}catch(ge){dt(s,s.return,ge)}try{qo(5,s,s.return)}catch(ge){dt(s,s.return,ge)}}break;case 1:Cn(a,s),Xn(s),512&d&&null!==c&&Wo(c,c.return);break;case 5:if(Cn(a,s),Xn(s),512&d&&null!==c&&Wo(c,c.return),32&s.flags){var m=s.stateNode;try{Ji(m,"")}catch(ge){dt(s,s.return,ge)}}if(4&d&&null!=(m=s.stateNode)){var h=s.memoizedProps,b=null!==c?c.memoizedProps:h,k=s.type,T=s.updateQueue;if(s.updateQueue=null,null!==T)try{"input"===k&&"radio"===h.type&&null!=h.name&&Mc(m,h),qa(k,b);var z=qa(k,h);for(b=0;b<T.length;b+=2){var Z=T[b],K=T[b+1];"style"===Z?Bc(m,K):"dangerouslySetInnerHTML"===Z?Zi(m,K):"children"===Z?Ji(m,K):Xt(m,Z,K,z)}switch(k){case"input":Ya(m,h);break;case"textarea":Ha(m,h);break;case"select":var q=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!h.multiple;var ce=h.value;null!=ce?$o(m,!!h.multiple,ce,!1):q!==!!h.multiple&&(null!=h.defaultValue?$o(m,!!h.multiple,h.defaultValue,!0):$o(m,!!h.multiple,h.multiple?[]:"",!1))}m[Sr]=h}catch(ge){dt(s,s.return,ge)}}break;case 6:if(Cn(a,s),Xn(s),4&d){if(null===s.stateNode)throw Error(W(162));m=s.stateNode,h=s.memoizedProps;try{m.nodeValue=h}catch(ge){dt(s,s.return,ge)}}break;case 3:if(Cn(a,s),Xn(s),4&d&&null!==c&&c.memoizedState.isDehydrated)try{cr(a.containerInfo)}catch(ge){dt(s,s.return,ge)}break;case 4:default:Cn(a,s),Xn(s);break;case 13:Cn(a,s),Xn(s),8192&(m=s.child).flags&&(m.stateNode.isHidden=h=null!==m.memoizedState,!h||null!==m.alternate&&null!==m.alternate.memoizedState||(uc=gt())),4&d&&wd(s);break;case 22:if(Z=null!==c&&null!==c.memoizedState,1&s.mode?($t=(z=$t)||Z,Cn(a,s),$t=z):Cn(a,s),Xn(s),8192&d){if((s.stateNode.isHidden=z=null!==s.memoizedState)&&!Z&&1&s.mode)for(me=s,Z=s.child;null!==Z;){for(K=me=Z;null!==me;){switch(ce=(q=me).child,q.tag){case 0:case 11:case 14:case 15:qo(4,q,q.return);break;case 1:Wo(q,q.return);var he=q.stateNode;if("function"==typeof he.componentWillUnmount){d=q,c=q.return;try{he.props=(a=d).memoizedProps,he.state=a.memoizedState,he.componentWillUnmount()}catch(ge){dt(d,c,ge)}}break;case 5:Wo(q,q.return);break;case 22:if(null!==q.memoizedState){da(K);continue}}null!==ce?(ce.return=q,me=ce):da(K)}Z=Z.sibling}e:for(Z=null,K=s;;){if(5===K.tag){if(null===Z){Z=K;try{m=K.stateNode,z?"function"==typeof(h=m.style).setProperty?h.setProperty("display","none","important"):h.display="none":(k=K.stateNode,b=null!=(T=K.memoizedProps.style)&&T.hasOwnProperty("display")?T.display:null,k.style.display=zc("display",b))}catch(ge){dt(s,s.return,ge)}}}else if(6===K.tag){if(null===Z)try{K.stateNode.nodeValue=z?"":K.memoizedProps}catch(ge){dt(s,s.return,ge)}}else if((22!==K.tag&&23!==K.tag||null===K.memoizedState||K===s)&&null!==K.child){K.child.return=K,K=K.child;continue}if(K===s)break e;for(;null===K.sibling;){if(null===K.return||K.return===s)break e;Z===K&&(Z=null),K=K.return}Z===K&&(Z=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Cn(a,s),Xn(s),4&d&&wd(s);case 21:}}function Xn(s){var a=s.flags;if(2&a){try{e:{for(var c=s.return;null!==c;){if(Pr(c)){var d=c;break e}c=c.return}throw Error(W(160))}switch(d.tag){case 5:var m=d.stateNode;32&d.flags&&(Ji(m,""),d.flags&=-33),ua(s,Sd(s),m);break;case 3:case 4:var b=d.stateNode.containerInfo;Ln(s,Sd(s),b);break;default:throw Error(W(161))}}catch(T){dt(s,s.return,T)}s.flags&=-3}4096&a&&(s.flags&=-4097)}function df(s,a,c){me=s,Ed(s,a,c)}function Ed(s,a,c){for(var d=!!(1&s.mode);null!==me;){var m=me,h=m.child;if(22===m.tag&&d){var b=null!==m.memoizedState||Vr;if(!b){var k=m.alternate,T=null!==k&&null!==k.memoizedState||$t;k=Vr;var z=$t;if(Vr=b,($t=T)&&!z)for(me=m;null!==me;)T=(b=me).child,22===b.tag&&null!==b.memoizedState?pa(m):null!==T?(T.return=b,me=T):pa(m);for(;null!==h;)me=h,Ed(h,a,c),h=h.sibling;me=m,Vr=k,$t=z}Id(s)}else 8772&m.subtreeFlags&&null!==h?(h.return=m,me=h):Id(s)}}function Id(s){for(;null!==me;){var a=me;if(8772&a.flags){var c=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:$t||ln(5,a);break;case 1:var d=a.stateNode;if(4&a.flags&&!$t)if(null===c)d.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:Tn(a.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var h=a.updateQueue;null!==h&&Xu(a,h,d);break;case 3:var b=a.updateQueue;if(null!==b){if(c=null,null!==a.child)switch(a.child.tag){case 5:case 1:c=a.child.stateNode}Xu(a,b,c)}break;case 5:if(null===c&&4&a.flags){c=a.stateNode;var T=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&c.focus();break;case"img":T.src&&(c.src=T.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var z=a.alternate;if(null!==z){var Z=z.memoizedState;if(null!==Z){var K=Z.dehydrated;null!==K&&cr(K)}}}break;default:throw Error(W(163))}$t||512&a.flags&&cn(a)}catch(q){dt(a,a.return,q)}}if(a===s){me=null;break}if(null!==(c=a.sibling)){c.return=a.return,me=c;break}me=a.return}}function da(s){for(;null!==me;){var a=me;if(a===s){me=null;break}var c=a.sibling;if(null!==c){c.return=a.return,me=c;break}me=a.return}}function pa(s){for(;null!==me;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{ln(4,a)}catch(T){dt(a,c,T)}break;case 1:var d=a.stateNode;if("function"==typeof d.componentDidMount){var m=a.return;try{d.componentDidMount()}catch(T){dt(a,m,T)}}var h=a.return;try{cn(a)}catch(T){dt(a,h,T)}break;case 5:var b=a.return;try{cn(a)}catch(T){dt(a,b,T)}}}catch(T){dt(a,a.return,T)}if(a===s){me=null;break}var k=a.sibling;if(null!==k){k.return=a.return,me=k;break}me=a.return}}var $d,Ad=Math.ceil,ko=mt.ReactCurrentDispatcher,Zo=mt.ReactCurrentOwner,Ht=mt.ReactCurrentBatchConfig,Ge=0,ht=null,We=null,Gt=0,un=0,Vi=_o(0),It=0,Lr=null,Jo=0,fa=0,ma=0,zi=null,nn=null,uc=0,Ko=1/0,dn=null,Xr=!1,Bi=null,wo=null,Qo=!1,vt=null,Ur=0,Yr=0,_a=null,ei=-1,Un=0;function yt(){return 6&Ge?gt():-1!==ei?ei:ei=gt()}function oo(s){return 1&s.mode?2&Ge&&0!==Gt?Gt&-Gt:null!==Qp.transition?(0===Un&&(Un=nu()),Un):(0!==(s=ze)||(s=void 0===(s=window.event)?16:fl(s.type)),s):1}function Sn(s,a,c,d){if(50<Yr)throw Yr=0,_a=null,Error(W(185));ir(s,c,d),(!(2&Ge)||s!==ht)&&(s===ht&&(!(2&Ge)&&(fa|=c),4===It&&io(s,Gt)),on(s,d),1===c&&0===Ge&&!(1&a.mode)&&(Ko=gt()+500,Bs&&go()))}function on(s,a){var c=s.callbackNode;!function vp(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,h=s.pendingLanes;0<h;){var b=31-In(h),k=1<<b,T=m[b];-1===T?(!(k&c)||k&d)&&(m[b]=gp(k,a)):T<=a&&(s.expiredLanes|=k),h&=~k}}(s,a);var d=ms(s,s===ht?Gt:0);if(0===d)null!==c&&Qc(c),s.callbackNode=null,s.callbackPriority=0;else if(s.callbackPriority!==(a=d&-d)){if(null!=c&&Qc(c),1===a)0===s.tag?function Kp(s){Bs=!0,Gu(s)}(Td.bind(null,s)):Gu(Td.bind(null,s)),Wp(function(){!(6&Ge)&&go()}),c=null;else{switch(rl(d)){case 1:c=nl;break;case 4:c=eu;break;case 16:default:c=ps;break;case 536870912:c=tu}c=Gd(c,kn.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function kn(s,a){if(ei=-1,Un=0,6&Ge)throw Error(W(327));var c=s.callbackNode;if(Li()&&s.callbackNode!==c)return null;var d=ms(s,s===ht?Gt:0);if(0===d)return null;if(30&d||d&s.expiredLanes||a)a=Hr(s,d);else{a=d;var m=Ge;Ge|=2;var h=Fd();for((ht!==s||Gt!==a)&&(dn=null,Ko=gt()+500,ti(s,a));;)try{_m();break}catch(k){pf(s,k)}Xl(),ko.current=h,Ge=m,null!==We?a=0:(ht=null,Gt=0,a=It)}if(0!==a){if(2===a&&0!==(m=ol(s))&&(d=m,a=ha(s,m)),1===a)throw c=Lr,ti(s,0),io(s,d),on(s,gt()),c;if(6===a)io(s,d);else{if(m=s.current.alternate,!(30&d||function dc(s){for(var a=s;;){if(16384&a.flags){var c=a.updateQueue;if(null!==c&&null!==(c=c.stores))for(var d=0;d<c.length;d++){var m=c[d],h=m.getSnapshot;m=m.value;try{if(!sn(h(),m))return!1}catch{return!1}}}if(c=a.child,16384&a.subtreeFlags&&null!==c)c.return=a,a=c;else{if(a===s)break;for(;null===a.sibling;){if(null===a.return||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}(m)||(a=Hr(s,d),2===a&&(h=ol(s),0!==h&&(d=h,a=ha(s,h))),1!==a)))throw c=Lr,ti(s,0),io(s,d),on(s,gt()),c;switch(s.finishedWork=m,s.finishedLanes=d,a){case 0:case 1:throw Error(W(345));case 2:case 5:ro(s,nn,dn);break;case 3:if(io(s,d),(130023424&d)===d&&10<(a=uc+500-gt())){if(0!==ms(s,0))break;if(((m=s.suspendedLanes)&d)!==d){yt(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=Rl(ro.bind(null,s,nn,dn),a);break}ro(s,nn,dn);break;case 4:if(io(s,d),(4194240&d)===d)break;for(a=s.eventTimes,m=-1;0<d;){var b=31-In(d);h=1<<b,(b=a[b])>m&&(m=b),d&=~h}if(d=m,10<(d=(120>(d=gt()-d)?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Ad(d/1960))-d)){s.timeoutHandle=Rl(ro.bind(null,s,nn,dn),d);break}ro(s,nn,dn);break;default:throw Error(W(329))}}}return on(s,gt()),s.callbackNode===c?kn.bind(null,s):null}function ha(s,a){var c=zi;return s.current.memoizedState.isDehydrated&&(ti(s,a).flags|=256),2!==(s=Hr(s,a))&&(a=nn,nn=c,null!==a&&Pi(a)),s}function Pi(s){null===nn?nn=s:nn.push.apply(nn,s)}function io(s,a){for(a&=~ma,s.suspendedLanes|=a&=~fa,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-In(a),d=1<<c;s[c]=-1,a&=~d}}function Td(s){if(6&Ge)throw Error(W(327));Li();var a=ms(s,0);if(!(1&a))return on(s,gt()),null;var c=Hr(s,a);if(0!==s.tag&&2===c){var d=ol(s);0!==d&&(a=d,c=ha(s,d))}if(1===c)throw c=Lr,ti(s,0),io(s,a),on(s,gt()),c;if(6===c)throw Error(W(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ro(s,nn,dn),on(s,gt()),null}function pc(s,a){var c=Ge;Ge|=1;try{return s(a)}finally{0===(Ge=c)&&(Ko=gt()+500,Bs&&go())}}function No(s){null!==vt&&0===vt.tag&&!(6&Ge)&&Li();var a=Ge;Ge|=1;var c=Ht.transition,d=ze;try{if(Ht.transition=null,ze=1,s)return s()}finally{ze=d,Ht.transition=c,!(6&(Ge=a))&&go()}}function ga(){un=Vi.current,rt(Vi)}function ti(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(-1!==c&&(s.timeoutHandle=-1,Hp(c)),null!==We)for(c=We.return;null!==c;){var d=c;switch(Ls(d),d.tag){case 1:null!=(d=d.type.childContextTypes)&&Vs();break;case 3:Ei(),rt(Qt),rt(zt),Zl();break;case 5:ql(d);break;case 4:Ei();break;case 13:case 19:rt(st);break;case 10:Ul(d.type._context);break;case 22:case 23:ga()}c=c.return}if(ht=s,We=s=Eo(s.current,null),Gt=un=a,It=0,Lr=null,ma=fa=Jo=0,nn=zi=null,null!==Lo){for(a=0;a<Lo.length;a++)if(null!==(d=(c=Lo[a]).interleaved)){c.interleaved=null;var h=c.pending;if(null!==h){var b=h.next;h.next=d.next,d.next=b}c.pending=d}Lo=null}return s}function pf(s,a){for(;;){var c=We;try{if(Xl(),Zs.current=ea,jr){for(var d=ut.memoizedState;null!==d;){var m=d.queue;null!==m&&(m.pending=null),d=d.next}jr=!1}if(Uo=0,Rt=Nt=ut=null,Mr=!1,$r=0,Zo.current=null,null===c||null===c.return){It=1,Lr=a,We=null;break}e:{var h=s,b=c.return,k=c,T=a;if(a=Gt,k.flags|=32768,null!==T&&"object"==typeof T&&"function"==typeof T.then){var z=T,Z=k,K=Z.tag;if(!(1&Z.mode||0!==K&&11!==K&&15!==K)){var q=Z.alternate;q?(Z.updateQueue=q.updateQueue,Z.memoizedState=q.memoizedState,Z.lanes=q.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ce=Fi(b);if(null!==ce){ce.flags&=-257,na(ce,b,k,0,a),1&ce.mode&&fd(h,z,a),T=z;var he=(a=ce).updateQueue;if(null===he){var ge=new Set;ge.add(T),a.updateQueue=ge}else he.add(T);break e}if(!(1&a)){fd(h,z,a),va();break e}T=Error(W(426))}else if(Re&&1&k.mode){var qe=Fi(b);if(null!==qe){!(65536&qe.flags)&&(qe.flags|=256),na(qe,b,k,0,a),Nr(Yo(T,k));break e}}h=T=Yo(T,k),4!==It&&(It=2),null===zi?zi=[h]:zi.push(h),h=b;do{switch(h.tag){case 3:h.flags|=65536,h.lanes|=a&=-a,Lu(h,Ti(0,T,a));break e;case 1:k=T;var D=h.stateNode;if(!(128&h.flags||"function"!=typeof h.type.getDerivedStateFromError&&(null===D||"function"!=typeof D.componentDidCatch||null!==wo&&wo.has(D)))){h.flags|=65536,h.lanes|=a&=-a,Lu(h,yn(h,k,a));break e}}h=h.return}while(null!==h)}ya(c)}catch(ve){a=ve,We===c&&null!==c&&(We=c=c.return);continue}break}}function Fd(){var s=ko.current;return ko.current=ea,null===s?ea:s}function va(){(0===It||3===It||2===It)&&(It=4),null===ht||!(268435455&Jo)&&!(268435455&fa)||io(ht,Gt)}function Hr(s,a){var c=Ge;Ge|=2;var d=Fd();for((ht!==s||Gt!==a)&&(dn=null,ti(s,a));;)try{Rd();break}catch(m){pf(s,m)}if(Xl(),Ge=c,ko.current=d,null!==We)throw Error(W(261));return ht=null,Gt=0,It}function Rd(){for(;null!==We;)ff(We)}function _m(){for(;null!==We&&!cp();)ff(We)}function ff(s){var a=$d(s.alternate,s,un);s.memoizedProps=s.pendingProps,null===a?ya(s):We=a,Zo.current=null}function ya(s){var a=s;do{var c=a.alternate;if(s=a.return,32768&a.flags){if(null!==(c=uf(c,a)))return c.flags&=32767,void(We=c);if(null===s)return It=6,void(We=null);s.flags|=32768,s.subtreeFlags=0,s.deletions=null}else if(null!==(c=cf(c,a,un)))return void(We=c);if(null!==(a=a.sibling))return void(We=a);We=a=s}while(null!==a);0===It&&(It=5)}function ro(s,a,c){var d=ze,m=Ht.transition;try{Ht.transition=null,ze=1,function mf(s,a,c,d){do{Li()}while(null!==vt);if(6&Ge)throw Error(W(327));var m=s.finishedLanes;if(null===(c=s.finishedWork))return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(W(177));s.callbackNode=null,s.callbackPriority=0;var h=c.lanes|c.childLanes;if(function _s(s,a){var c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-In(c),h=1<<m;a[m]=0,d[m]=-1,s[m]=-1,c&=~h}}(s,h),s===ht&&(We=ht=null,Gt=0),!(2064&c.subtreeFlags)&&!(2064&c.flags)||Qo||(Qo=!0,Gd(ps,function(){return Li(),null})),h=!!(15990&c.flags),15990&c.subtreeFlags||h){h=Ht.transition,Ht.transition=null;var b=ze;ze=1;var k=Ge;Ge|=4,Zo.current=null,function ca(s,a){if(Al=dl,Cl(s=xl())){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else{var d=(c=(c=s.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var m=d.anchorOffset,h=d.focusNode;d=d.focusOffset;var b=0,k=-1,T=-1,z=0,Z=0,K=s,q=null;t:for(;;){for(var ce;K!==c||0!==m&&3!==K.nodeType||(k=b+m),K!==h||0!==d&&3!==K.nodeType||(T=b+d),3===K.nodeType&&(b+=K.nodeValue.length),null!==(ce=K.firstChild);)q=K,K=ce;for(;;){if(K===s)break t;if(q===c&&++z===m&&(k=b),q===h&&++Z===d&&(T=b),null!==(ce=K.nextSibling))break;q=(K=q).parentNode}K=ce}c=-1===k||-1===T?null:{start:k,end:T}}else c=null}c=c||{start:0,end:0}}else c=null;for(Tl={focusedElem:s,selectionRange:c},dl=!1,me=a;null!==me;)if(s=(a=me).child,1028&a.subtreeFlags&&null!==s)s.return=a,me=s;else for(;null!==me;){a=me;try{var he=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==he){var ge=he.memoizedProps,qe=he.memoizedState,$=a.stateNode,R=$.getSnapshotBeforeUpdate(a.elementType===a.type?ge:Tn(a.type,ge),qe);$.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var D=a.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(W(163))}}catch(ne){dt(a,a.return,ne)}if(null!==(s=a.sibling)){s.return=a.return,me=s;break}me=a.return}he=Br,Br=!1}(s,c),Nd(c,s),vu(Tl),dl=!!Al,Tl=Al=null,s.current=c,df(c,s,m),up(),Ge=k,ze=b,Ht.transition=h}else s.current=c;if(Qo&&(Qo=!1,vt=s,Ur=m),0===(h=s.pendingLanes)&&(wo=null),function fp(s){if($n&&"function"==typeof $n.onCommitFiberRoot)try{$n.onCommitFiberRoot(fs,s,void 0,!(128&~s.current.flags))}catch{}}(c.stateNode),on(s,gt()),null!==a)for(d=s.onRecoverableError,c=0;c<a.length;c++)d((m=a[c]).value,{componentStack:m.stack,digest:m.digest});if(Xr)throw Xr=!1,s=Bi,Bi=null,s;1&Ur&&0!==s.tag&&Li(),1&(h=s.pendingLanes)?s===_a?Yr++:(Yr=0,_a=s):Yr=0,go()}(s,a,c,d)}finally{Ht.transition=m,ze=d}return null}function Li(){if(null!==vt){var s=rl(Ur),a=Ht.transition,c=ze;try{if(Ht.transition=null,ze=16>s?16:s,null===vt)var d=!1;else{if(s=vt,vt=null,Ur=0,6&Ge)throw Error(W(331));var m=Ge;for(Ge|=4,me=s.current;null!==me;){var h=me,b=h.child;if(16&me.flags){var k=h.deletions;if(null!==k){for(var T=0;T<k.length;T++){var z=k[T];for(me=z;null!==me;){var Z=me;switch(Z.tag){case 0:case 11:case 15:qo(8,Z,h)}var K=Z.child;if(null!==K)K.return=Z,me=K;else for(;null!==me;){var q=(Z=me).sibling,ce=Z.return;if(Cd(Z),Z===z){me=null;break}if(null!==q){q.return=ce,me=q;break}me=ce}}}var he=h.alternate;if(null!==he){var ge=he.child;if(null!==ge){he.child=null;do{var qe=ge.sibling;ge.sibling=null,ge=qe}while(null!==ge)}}me=h}}if(2064&h.subtreeFlags&&null!==b)b.return=h,me=b;else e:for(;null!==me;){if(2048&(h=me).flags)switch(h.tag){case 0:case 11:case 15:qo(9,h,h.return)}var $=h.sibling;if(null!==$){$.return=h.return,me=$;break e}me=h.return}}var R=s.current;for(me=R;null!==me;){var D=(b=me).child;if(2064&b.subtreeFlags&&null!==D)D.return=b,me=D;else e:for(b=R;null!==me;){if(2048&(k=me).flags)try{switch(k.tag){case 0:case 11:case 15:ln(9,k)}}catch(ve){dt(k,k.return,ve)}if(k===b){me=null;break e}var ne=k.sibling;if(null!==ne){ne.return=k.return,me=ne;break e}me=k.return}}if(Ge=m,go(),$n&&"function"==typeof $n.onPostCommitFiberRoot)try{$n.onPostCommitFiberRoot(fs,s)}catch{}d=!0}return d}finally{ze=c,Ht.transition=a}}return!1}function jd(s,a,c){s=xo(s,a=Ti(0,a=Yo(c,a),1),1),a=yt(),null!==s&&(ir(s,1,a),on(s,a))}function dt(s,a,c){if(3===s.tag)jd(s,s,c);else for(;null!==a;){if(3===a.tag){jd(a,s,c);break}if(1===a.tag){var d=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===wo||!wo.has(d))){a=xo(a,s=yn(a,s=Yo(c,s),1),1),s=yt(),null!==a&&(ir(a,1,s),on(a,s));break}}a=a.return}}function _f(s,a,c){var d=s.pingCache;null!==d&&d.delete(a),a=yt(),s.pingedLanes|=s.suspendedLanes&c,ht===s&&(Gt&c)===c&&(4===It||3===It&&(130023424&Gt)===Gt&&500>gt()-uc?ti(s,0):ma|=c),on(s,a)}function Md(s,a){0===a&&(1&s.mode?(a=nr,!(130023424&(nr<<=1))&&(nr=4194304)):a=1);var c=yt();null!==(s=gn(s,a))&&(ir(s,a,c),on(s,c))}function hf(s){var a=s.memoizedState,c=0;null!==a&&(c=a.retryLane),Md(s,c)}function gf(s,a){var c=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;null!==m&&(c=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(W(314))}null!==d&&d.delete(a),Md(s,c)}function Gd(s,a){return Kc(s,a)}function vf(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(s,a,c,d){return new vf(s,a,c,d)}function fc(s){return!(!(s=s.prototype)||!s.isReactComponent)}function Eo(s,a){var c=s.alternate;return null===c?((c=wn(s.tag,a,s.key,s.mode)).elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&s.flags,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,c.dependencies=null===(a=s.dependencies)?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function ba(s,a,c,d,m,h){var b=2;if(d=s,"function"==typeof s)fc(s)&&(b=1);else if("string"==typeof s)b=5;else e:switch(s){case wt:return ni(c.children,m,h,a);case Nn:b=8,m|=8;break;case En:return(s=wn(12,c,a,2|m)).elementType=En,s.lanes=h,s;case Mn:return(s=wn(13,c,a,m)).elementType=Mn,s.lanes=h,s;case fn:return(s=wn(19,c,a,m)).elementType=fn,s.lanes=h,s;case _e:return xa(c,m,h,a);default:if("object"==typeof s&&null!==s)switch(s.$$typeof){case lo:b=10;break e;case Ft:b=9;break e;case pn:b=11;break e;case Jn:b=14;break e;case te:b=16,d=null;break e}throw Error(W(130,null==s?s:typeof s,""))}return(a=wn(b,c,a,m)).elementType=s,a.type=d,a.lanes=h,a}function ni(s,a,c,d){return(s=wn(7,s,d,a)).lanes=c,s}function xa(s,a,c,d){return(s=wn(22,s,d,a)).elementType=_e,s.lanes=c,s.stateNode={isHidden:!1},s}function mc(s,a,c){return(s=wn(6,s,null,a)).lanes=c,s}function _c(s,a,c){return(a=wn(4,null!==s.children?s.children:[],s.key,a)).lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function bf(s,a,c,d,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function hc(s,a,c,d,m,h,b,k,T){return s=new bf(s,a,c,k,T),1===a?(a=1,!0===h&&(a|=8)):a=0,h=wn(3,null,null,a),s.current=h,h.stateNode=s,h.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hl(h),s}function Dd(s){if(!s)return ho;e:{if(Go(s=s._reactInternals)!==s||1!==s.tag)throw Error(W(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(en(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(W(171))}if(1===s.tag){var c=s.type;if(en(c))return Mu(s,c,a)}return a}function Od(s,a,c,d,m,h,b,k,T){return(s=hc(c,d,!0,s,0,h,0,k,T)).context=Dd(null),c=s.current,(h=no(d=yt(),m=oo(c))).callback=a??null,xo(c,h,m),s.current.lanes=m,ir(s,m,d),on(s,d),s}function Ca(s,a,c,d){var m=a.current,h=yt(),b=oo(m);return c=Dd(c),null===a.context?a.context=c:a.pendingContext=c,(a=no(h,b)).payload={element:s},null!==(d=void 0===d?null:d)&&(a.callback=d),null!==(s=xo(m,a,b))&&(Sn(s,m,b,h),Ws(s,m,b)),b}function Sa(s){return(s=s.current).child?s.child.stateNode:null}function Vd(s,a){if(null!==(s=s.memoizedState)&&null!==s.dehydrated){var c=s.retryLane;s.retryLane=0!==c&&c<a?c:a}}function gc(s,a){Vd(s,a),(s=s.alternate)&&Vd(s,a)}$d=function(s,a,c){if(null!==s)if(s.memoizedProps!==a.pendingProps||Qt.current)Yt=!0;else{if(!(s.lanes&c||128&a.flags))return Yt=!1,function vd(s,a,c){switch(a.tag){case 3:ji(a),Si();break;case 5:Uu(a);break;case 1:en(a.type)&&zs(a);break;case 4:Wl(a,a.stateNode.containerInfo);break;case 10:var d=a.type._context,m=a.memoizedProps.value;Qe(Ir,d._currentValue),d._currentValue=m;break;case 13:if(null!==(d=a.memoizedState))return null!==d.dehydrated?(Qe(st,1&st.current),a.flags|=128,null):c&a.child.childLanes?Gi(s,a,c):(Qe(st,1&st.current),null!==(s=bn(s,a,c))?s.sibling:null);Qe(st,1&st.current);break;case 19:if(d=!!(c&a.childLanes),128&s.flags){if(d)return sa(s,a,c);a.flags|=128}if(null!==(m=a.memoizedState)&&(m.rendering=null,m.tail=null,m.lastEffect=null),Qe(st,st.current),d)break;return null;case 22:case 23:return a.lanes=0,hd(s,a,c)}return bn(s,a,c)}(s,a,c);Yt=!!(131072&s.flags)}else Yt=!1,Re&&1048576&a.flags&&Du(a,S,a.index);switch(a.lanes=0,a.tag){case 2:var d=a.type;aa(s,a),s=a.pendingProps;var m=bi(a,zt.current);Ni(a,c),m=Kl(null,a,d,s,m,c);var h=Ql();return a.flags|=1,"object"==typeof m&&null!==m&&"function"==typeof m.render&&void 0===m.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,en(d)?(h=!0,zs(a)):h=!1,a.memoizedState=null!=m.state?m.state:null,Hl(a),m.updater=Or,a.stateNode=m,m._reactInternals=a,sc(a,d,s,c),a=So(null,a,d,!0,h,c)):(a.tag=0,Re&&h&&Ol(a),Pt(null,a,m,c),a=a.child),a;case 16:d=a.elementType;e:{switch(aa(s,a),s=a.pendingProps,d=(m=d._init)(d._payload),a.type=d,m=a.tag=function yf(s){if("function"==typeof s)return fc(s)?1:0;if(null!=s){if((s=s.$$typeof)===pn)return 11;if(s===Jn)return 14}return 2}(d),s=Tn(d,s),m){case 0:a=lc(null,a,d,s,c);break e;case 1:a=Fn(null,a,d,s,c);break e;case 11:a=md(null,a,d,s,c);break e;case 14:a=ac(null,a,d,Tn(d.type,s),c);break e}throw Error(W(306,d,""))}return a;case 0:return m=a.pendingProps,lc(s,a,d=a.type,m=a.elementType===d?m:Tn(d,m),c);case 1:return m=a.pendingProps,Fn(s,a,d=a.type,m=a.elementType===d?m:Tn(d,m),c);case 3:e:{if(ji(a),null===s)throw Error(W(387));d=a.pendingProps,m=(h=a.memoizedState).element,Pu(s,a),qs(a,d,null,c);var b=a.memoizedState;if(d=b.element,h.isDehydrated){if(a.updateQueue.baseState=h={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},a.memoizedState=h,256&a.flags){a=Mi(s,a,d,c,m=Yo(Error(W(423)),a));break e}if(d!==m){a=Mi(s,a,d,c,m=Yo(Error(W(424)),a));break e}for(an=mo(a.stateNode.containerInfo.firstChild),tn=a,Re=!0,Vn=null,c=Pl(a,null,d,c),a.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(Si(),d===m){a=bn(s,a,c);break e}Pt(s,a,d,c)}a=a.child}return a;case 5:return Uu(a),null===s&&zl(a),h=null!==s?s.memoizedProps:null,b=(m=a.pendingProps).children,Fl(d=a.type,m)?b=null:null!==h&&Fl(d,h)&&(a.flags|=32),gd(s,a),Pt(s,a,b,c),a.child;case 6:return null===s&&zl(a),null;case 13:return Gi(s,a,c);case 4:return Wl(a,a.stateNode.containerInfo),d=a.pendingProps,null===s?a.child=ki(a,null,d,c):Pt(s,a,d,c),a.child;case 11:return m=a.pendingProps,md(s,a,d=a.type,m=a.elementType===d?m:Tn(d,m),c);case 7:return Pt(s,a,a.pendingProps,c),a.child;case 8:case 12:return Pt(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.memoizedProps,b=(m=a.pendingProps).value,Qe(Ir,(d=a.type._context)._currentValue),d._currentValue=b,null!==h)if(sn(h.value,b)){if(h.children===m.children&&!Qt.current){a=bn(s,a,c);break e}}else for(null!==(h=a.child)&&(h.return=a);null!==h;){var k=h.dependencies;if(null!==k){b=h.child;for(var T=k.firstContext;null!==T;){if(T.context===d){if(1===h.tag){(T=no(-1,c&-c)).tag=2;var z=h.updateQueue;if(null!==z){var Z=(z=z.shared).pending;null===Z?T.next=T:(T.next=Z.next,Z.next=T),z.pending=T}}h.lanes|=c,null!==(T=h.alternate)&&(T.lanes|=c),Yl(h.return,c,a),k.lanes|=c;break}T=T.next}}else if(10===h.tag)b=h.type===a.type?null:h.child;else if(18===h.tag){if(null===(b=h.return))throw Error(W(341));b.lanes|=c,null!==(k=b.alternate)&&(k.lanes|=c),Yl(b,c,a),b=h.sibling}else b=h.child;if(null!==b)b.return=h;else for(b=h;null!==b;){if(b===a){b=null;break}if(null!==(h=b.sibling)){h.return=b.return,b=h;break}b=b.return}h=b}Pt(s,a,m.children,c),a=a.child}return a;case 9:return m=a.type,d=a.pendingProps.children,Ni(a,c),d=d(m=hn(m)),a.flags|=1,Pt(s,a,d,c),a.child;case 14:return m=Tn(d=a.type,a.pendingProps),ac(s,a,d,m=Tn(d.type,m),c);case 15:return _d(s,a,a.type,a.pendingProps,c);case 17:return m=a.pendingProps,m=a.elementType===(d=a.type)?m:Tn(d,m),aa(s,a),a.tag=1,en(d)?(s=!0,zs(a)):s=!1,Ni(a,c),dd(a,d,m),sc(a,d,m,c),So(null,a,d,!0,s,c);case 19:return sa(s,a,c);case 22:return hd(s,a,c)}throw Error(W(156,a.tag))};var zd="function"==typeof reportError?reportError:function(s){console.error(s)};function vc(s){this._internalRoot=s}function ka(s){this._internalRoot=s}function yc(s){return!(!s||1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType)}function wa(s){return!(!s||1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType&&(8!==s.nodeType||" react-mount-point-unstable "!==s.nodeValue))}function Bd(){}function Na(s,a,c,d,m){var h=c._reactRootContainer;if(h){var b=h;if("function"==typeof m){var k=m;m=function(){var T=Sa(b);k.call(T)}}Ca(a,b,s,m)}else b=function Sf(s,a,c,d,m){if(m){if("function"==typeof d){var h=d;d=function(){var z=Sa(b);h.call(z)}}var b=Od(a,d,s,0,null,!1,0,"",Bd);return s._reactRootContainer=b,s[eo]=b.current,yr(8===s.nodeType?s.parentNode:s),No(),b}for(;m=s.lastChild;)s.removeChild(m);if("function"==typeof d){var k=d;d=function(){var z=Sa(T);k.call(z)}}var T=hc(s,0,!1,null,0,!1,0,"",Bd);return s._reactRootContainer=T,s[eo]=T.current,yr(8===s.nodeType?s.parentNode:s),No(function(){Ca(a,T,c,d)}),T}(c,a,s,m,d);return Sa(b)}ka.prototype.render=vc.prototype.render=function(s){var a=this._internalRoot;if(null===a)throw Error(W(409));Ca(s,a,null,null)},ka.prototype.unmount=vc.prototype.unmount=function(){var s=this._internalRoot;if(null!==s){this._internalRoot=null;var a=s.containerInfo;No(function(){Ca(null,s,null,null)}),a[eo]=null}},ka.prototype.unstable_scheduleHydration=function(s){if(s){var a=hs();s={blockedOn:null,target:s,priority:a};for(var c=0;c<Gn.length&&0!==a&&a<Gn[c].priority;c++);Gn.splice(c,0,s),0===c&&lr(s)}},mn=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=or(a.pendingLanes);0!==c&&(rr(a,1|c),on(a,gt()),!(6&Ge)&&(Ko=gt()+500,go()))}break;case 13:No(function(){var d=gn(s,1);if(null!==d){var m=yt();Sn(d,s,1,m)}}),gc(s,1)}},si=function(s){if(13===s.tag){var a=gn(s,134217728);null!==a&&Sn(a,s,134217728,yt()),gc(s,134217728)}},yp=function(s){if(13===s.tag){var a=oo(s),c=gn(s,a);null!==c&&Sn(c,s,a,yt()),gc(s,a)}},hs=function(){return ze},ou=function(s,a){var c=ze;try{return ze=s,a()}finally{ze=c}},Ka=function(s,a,c){switch(a){case"input":if(Ya(s,c),a=c.name,"radio"===c.type&&null!=a){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var m=Os(d);if(!m)throw Error(W(90));Rc(d),Ya(d,m)}}}break;case"textarea":Ha(s,c);break;case"select":null!=(a=c.value)&&$o(s,!!c.multiple,a,!1)}},Uc=pc,Yc=No;var Pd={usingClientEntryPoint:!1,Events:[kr,vi,Os,Lc,Xc,pc]},Wr={findFiberByHostInstance:Vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kf={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return null===(s=Zc(s))?null:s.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||function Cf(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{fs=Ea.inject(kf),$n=Ea}catch{}}oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pd,oe.createPortal=function(s,a){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!yc(a))throw Error(W(200));return function xf(s,a,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ot,key:null==d?null:""+d,children:s,containerInfo:a,implementation:c}}(s,a,null,c)},oe.createRoot=function(s,a){if(!yc(s))throw Error(W(299));var c=!1,d="",m=zd;return null!=a&&(!0===a.unstable_strictMode&&(c=!0),void 0!==a.identifierPrefix&&(d=a.identifierPrefix),void 0!==a.onRecoverableError&&(m=a.onRecoverableError)),a=hc(s,1,!1,null,0,c,0,d,m),s[eo]=a.current,yr(8===s.nodeType?s.parentNode:s),new vc(a)},oe.findDOMNode=function(s){if(null==s)return null;if(1===s.nodeType)return s;var a=s._reactInternals;if(void 0===a)throw"function"==typeof s.render?Error(W(188)):(s=Object.keys(s).join(","),Error(W(268,s)));return null===(s=Zc(a))?null:s.stateNode},oe.flushSync=function(s){return No(s)},oe.hydrate=function(s,a,c){if(!wa(a))throw Error(W(200));return Na(null,s,a,!0,c)},oe.hydrateRoot=function(s,a,c){if(!yc(s))throw Error(W(405));var d=null!=c&&c.hydratedSources||null,m=!1,h="",b=zd;if(null!=c&&(!0===c.unstable_strictMode&&(m=!0),void 0!==c.identifierPrefix&&(h=c.identifierPrefix),void 0!==c.onRecoverableError&&(b=c.onRecoverableError)),a=Od(a,null,s,1,c??null,m,0,h,b),s[eo]=a.current,yr(s),d)for(s=0;s<d.length;s++)m=(m=(c=d[s])._getVersion)(c._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new ka(a)},oe.render=function(s,a,c){if(!wa(a))throw Error(W(200));return Na(null,s,a,!1,c)},oe.unmountComponentAtNode=function(s){if(!wa(s))throw Error(W(40));return!!s._reactRootContainer&&(No(function(){Na(null,null,s,!1,function(){s._reactRootContainer=null,s[eo]=null})}),!0)},oe.unstable_batchedUpdates=pc,oe.unstable_renderSubtreeIntoContainer=function(s,a,c,d){if(!wa(c))throw Error(W(200));if(null==s||void 0===s._reactInternals)throw Error(W(38));return Na(s,a,c,!1,d)},oe.version="18.3.1-next-f1338f8080-20240426"},2663:(qt,oe,le)=>{var Ne=le(6046);oe.H=Ne.createRoot},6046:(qt,oe,le)=>{(function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(Ne){console.error(Ne)}})(),qt.exports=le(7578)},330:(qt,oe)=>{var le=Symbol.for("react.element"),f=Symbol.for("react.portal"),Ne=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),e=Symbol.for("react.profiler"),Ot=Symbol.for("react.provider"),kt=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),G=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Ae=Symbol.iterator,De={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oe=Object.assign,Le={};function we(F,se,Ie){this.props=F,this.context=se,this.refs=Le,this.updater=Ie||De}function Ue(){}function Tt(F,se,Ie){this.props=F,this.context=se,this.refs=Le,this.updater=Ie||De}we.prototype.isReactComponent={},we.prototype.setState=function(F,se){if("object"!=typeof F&&"function"!=typeof F&&null!=F)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,se,"setState")},we.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")},Ue.prototype=we.prototype;var Zt=Tt.prototype=new Ue;Zt.constructor=Tt,Oe(Zt,we.prototype),Zt.isPureReactComponent=!0;var Xt=Array.isArray,mt=Object.prototype.hasOwnProperty,Vt={current:null},ot={key:!0,ref:!0,__self:!0,__source:!0};function wt(F,se,Ie){var Xe,$e={},Je=null,ct=null;if(null!=se)for(Xe in void 0!==se.ref&&(ct=se.ref),void 0!==se.key&&(Je=""+se.key),se)mt.call(se,Xe)&&!ot.hasOwnProperty(Xe)&&($e[Xe]=se[Xe]);var _t=arguments.length-2;if(1===_t)$e.children=Ie;else if(1<_t){for(var He=Array(_t),Jt=0;Jt<_t;Jt++)He[Jt]=arguments[Jt+2];$e.children=He}if(F&&F.defaultProps)for(Xe in _t=F.defaultProps)void 0===$e[Xe]&&($e[Xe]=_t[Xe]);return{$$typeof:le,type:F,key:Je,ref:ct,props:$e,_owner:Vt.current}}function En(F){return"object"==typeof F&&null!==F&&F.$$typeof===le}var Ft=/\/+/g;function pn(F,se){return"object"==typeof F&&null!==F&&null!=F.key?function lo(F){var se={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Ie){return se[Ie]})}(""+F.key):se.toString(36)}function Mn(F,se,Ie,Xe,$e){var Je=typeof F;("undefined"===Je||"boolean"===Je)&&(F=null);var ct=!1;if(null===F)ct=!0;else switch(Je){case"string":case"number":ct=!0;break;case"object":switch(F.$$typeof){case le:case f:ct=!0}}if(ct)return $e=$e(ct=F),F=""===Xe?"."+pn(ct,0):Xe,Xt($e)?(Ie="",null!=F&&(Ie=F.replace(Ft,"$&/")+"/"),Mn($e,se,Ie,"",function(Jt){return Jt})):null!=$e&&(En($e)&&($e=function Nn(F,se){return{$$typeof:le,type:F.type,key:se,ref:F.ref,props:F.props,_owner:F._owner}}($e,Ie+(!$e.key||ct&&ct.key===$e.key?"":(""+$e.key).replace(Ft,"$&/")+"/")+F)),se.push($e)),1;if(ct=0,Xe=""===Xe?".":Xe+":",Xt(F))for(var _t=0;_t<F.length;_t++){var He=Xe+pn(Je=F[_t],_t);ct+=Mn(Je,se,Ie,He,$e)}else if(He=function Ve(F){return null===F||"object"!=typeof F?null:"function"==typeof(F=Ae&&F[Ae]||F["@@iterator"])?F:null}(F),"function"==typeof He)for(F=He.call(F),_t=0;!(Je=F.next()).done;)ct+=Mn(Je=Je.value,se,Ie,He=Xe+pn(Je,_t++),$e);else if("object"===Je)throw se=String(F),Error("Objects are not valid as a React child (found: "+("[object Object]"===se?"object with keys {"+Object.keys(F).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ct}function fn(F,se,Ie){if(null==F)return F;var Xe=[],$e=0;return Mn(F,Xe,"","",function(Je){return se.call(Ie,Je,$e++)}),Xe}function Jn(F){if(-1===F._status){var se=F._result;(se=se()).then(function(Ie){(0===F._status||-1===F._status)&&(F._status=1,F._result=Ie)},function(Ie){(0===F._status||-1===F._status)&&(F._status=2,F._result=Ie)}),-1===F._status&&(F._status=0,F._result=se)}if(1===F._status)return F._result.default;throw F._result}var te={current:null},_e={transition:null},Te={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:_e,ReactCurrentOwner:Vt};function Ye(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:fn,forEach:function(F,se,Ie){fn(F,function(){se.apply(this,arguments)},Ie)},count:function(F){var se=0;return fn(F,function(){se++}),se},toArray:function(F){return fn(F,function(se){return se})||[]},only:function(F){if(!En(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},oe.Component=we,oe.Fragment=Ne,oe.Profiler=e,oe.PureComponent=Tt,oe.StrictMode=W,oe.Suspense=V,oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,oe.act=Ye,oe.cloneElement=function(F,se,Ie){if(null==F)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Xe=Oe({},F.props),$e=F.key,Je=F.ref,ct=F._owner;if(null!=se){if(void 0!==se.ref&&(Je=se.ref,ct=Vt.current),void 0!==se.key&&($e=""+se.key),F.type&&F.type.defaultProps)var _t=F.type.defaultProps;for(He in se)mt.call(se,He)&&!ot.hasOwnProperty(He)&&(Xe[He]=void 0===se[He]&&void 0!==_t?_t[He]:se[He])}var He=arguments.length-2;if(1===He)Xe.children=Ie;else if(1<He){_t=Array(He);for(var Jt=0;Jt<He;Jt++)_t[Jt]=arguments[Jt+2];Xe.children=_t}return{$$typeof:le,type:F.type,key:$e,ref:Je,props:Xe,_owner:ct}},oe.createContext=function(F){return(F={$$typeof:kt,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Ot,_context:F},F.Consumer=F},oe.createElement=wt,oe.createFactory=function(F){var se=wt.bind(null,F);return se.type=F,se},oe.createRef=function(){return{current:null}},oe.forwardRef=function(F){return{$$typeof:Fe,render:F}},oe.isValidElement=En,oe.lazy=function(F){return{$$typeof:Pe,_payload:{_status:-1,_result:F},_init:Jn}},oe.memo=function(F,se){return{$$typeof:G,type:F,compare:void 0===se?null:se}},oe.startTransition=function(F){var se=_e.transition;_e.transition={};try{F()}finally{_e.transition=se}},oe.unstable_act=Ye,oe.useCallback=function(F,se){return te.current.useCallback(F,se)},oe.useContext=function(F){return te.current.useContext(F)},oe.useDebugValue=function(){},oe.useDeferredValue=function(F){return te.current.useDeferredValue(F)},oe.useEffect=function(F,se){return te.current.useEffect(F,se)},oe.useId=function(){return te.current.useId()},oe.useImperativeHandle=function(F,se,Ie){return te.current.useImperativeHandle(F,se,Ie)},oe.useInsertionEffect=function(F,se){return te.current.useInsertionEffect(F,se)},oe.useLayoutEffect=function(F,se){return te.current.useLayoutEffect(F,se)},oe.useMemo=function(F,se){return te.current.useMemo(F,se)},oe.useReducer=function(F,se,Ie){return te.current.useReducer(F,se,Ie)},oe.useRef=function(F){return te.current.useRef(F)},oe.useState=function(F){return te.current.useState(F)},oe.useSyncExternalStore=function(F,se,Ie){return te.current.useSyncExternalStore(F,se,Ie)},oe.useTransition=function(){return te.current.useTransition()},oe.version="18.3.1"},1395:(qt,oe,le)=>{qt.exports=le(330)},6290:(qt,oe)=>{function le(te,_e){var Te=te.length;te.push(_e);e:for(;0<Te;){var Ye=Te-1>>>1,F=te[Ye];if(!(0<W(F,_e)))break e;te[Ye]=_e,te[Te]=F,Te=Ye}}function f(te){return 0===te.length?null:te[0]}function Ne(te){if(0===te.length)return null;var _e=te[0],Te=te.pop();if(Te!==_e){te[0]=Te;e:for(var Ye=0,F=te.length,se=F>>>1;Ye<se;){var Ie=2*(Ye+1)-1,Xe=te[Ie],$e=Ie+1,Je=te[$e];if(0>W(Xe,Te))$e<F&&0>W(Je,Xe)?(te[Ye]=Je,te[$e]=Te,Ye=$e):(te[Ye]=Xe,te[Ie]=Te,Ye=Ie);else{if(!($e<F&&0>W(Je,Te)))break e;te[Ye]=Je,te[$e]=Te,Ye=$e}}}return _e}function W(te,_e){var Te=te.sortIndex-_e.sortIndex;return 0!==Te?Te:te.id-_e.id}if("object"==typeof performance&&"function"==typeof performance.now){var e=performance;oe.unstable_now=function(){return e.now()}}else{var Ot=Date,kt=Ot.now();oe.unstable_now=function(){return Ot.now()-kt}}var Fe=[],V=[],G=1,Pe=null,Ae=3,Ve=!1,De=!1,Oe=!1,Le="function"==typeof setTimeout?setTimeout:null,we="function"==typeof clearTimeout?clearTimeout:null,Ue=typeof setImmediate<"u"?setImmediate:null;function Tt(te){for(var _e=f(V);null!==_e;){if(null===_e.callback)Ne(V);else{if(!(_e.startTime<=te))break;Ne(V),_e.sortIndex=_e.expirationTime,le(Fe,_e)}_e=f(V)}}function Zt(te){if(Oe=!1,Tt(te),!De)if(null!==f(Fe))De=!0,fn(Xt);else{var _e=f(V);null!==_e&&Jn(Zt,_e.startTime-te)}}function Xt(te,_e){De=!1,Oe&&(Oe=!1,we(ot),ot=-1),Ve=!0;var Te=Ae;try{for(Tt(_e),Pe=f(Fe);null!==Pe&&(!(Pe.expirationTime>_e)||te&&!En());){var Ye=Pe.callback;if("function"==typeof Ye){Pe.callback=null,Ae=Pe.priorityLevel;var F=Ye(Pe.expirationTime<=_e);_e=oe.unstable_now(),"function"==typeof F?Pe.callback=F:Pe===f(Fe)&&Ne(Fe),Tt(_e)}else Ne(Fe);Pe=f(Fe)}if(null!==Pe)var se=!0;else{var Ie=f(V);null!==Ie&&Jn(Zt,Ie.startTime-_e),se=!1}return se}finally{Pe=null,Ae=Te,Ve=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var Ft,mt=!1,Vt=null,ot=-1,wt=5,Nn=-1;function En(){return!(oe.unstable_now()-Nn<wt)}function lo(){if(null!==Vt){var te=oe.unstable_now();Nn=te;var _e=!0;try{_e=Vt(!0,te)}finally{_e?Ft():(mt=!1,Vt=null)}}else mt=!1}if("function"==typeof Ue)Ft=function(){Ue(lo)};else if(typeof MessageChannel<"u"){var pn=new MessageChannel,Mn=pn.port2;pn.port1.onmessage=lo,Ft=function(){Mn.postMessage(null)}}else Ft=function(){Le(lo,0)};function fn(te){Vt=te,mt||(mt=!0,Ft())}function Jn(te,_e){ot=Le(function(){te(oe.unstable_now())},_e)}oe.unstable_IdlePriority=5,oe.unstable_ImmediatePriority=1,oe.unstable_LowPriority=4,oe.unstable_NormalPriority=3,oe.unstable_Profiling=null,oe.unstable_UserBlockingPriority=2,oe.unstable_cancelCallback=function(te){te.callback=null},oe.unstable_continueExecution=function(){De||Ve||(De=!0,fn(Xt))},oe.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<te?Math.floor(1e3/te):5},oe.unstable_getCurrentPriorityLevel=function(){return Ae},oe.unstable_getFirstCallbackNode=function(){return f(Fe)},oe.unstable_next=function(te){switch(Ae){case 1:case 2:case 3:var _e=3;break;default:_e=Ae}var Te=Ae;Ae=_e;try{return te()}finally{Ae=Te}},oe.unstable_pauseExecution=function(){},oe.unstable_requestPaint=function(){},oe.unstable_runWithPriority=function(te,_e){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Te=Ae;Ae=te;try{return _e()}finally{Ae=Te}},oe.unstable_scheduleCallback=function(te,_e,Te){var Ye=oe.unstable_now();switch(Te="object"==typeof Te&&null!==Te&&"number"==typeof(Te=Te.delay)&&0<Te?Ye+Te:Ye,te){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return te={id:G++,callback:_e,priorityLevel:te,startTime:Te,expirationTime:F=Te+F,sortIndex:-1},Te>Ye?(te.sortIndex=Te,le(V,te),null===f(Fe)&&te===f(V)&&(Oe?(we(ot),ot=-1):Oe=!0,Jn(Zt,Te-Ye))):(te.sortIndex=F,le(Fe,te),De||Ve||(De=!0,fn(Xt))),te},oe.unstable_shouldYield=En,oe.unstable_wrapCallback=function(te){var _e=Ae;return function(){var Te=Ae;Ae=_e;try{return te.apply(this,arguments)}finally{Ae=Te}}}},1605:(qt,oe,le)=>{qt.exports=le(6290)},2058:(qt,oe,le)=>{var f=le(1395),W="function"==typeof Object.is?Object.is:function Ne(Ve,De){return Ve===De&&(0!==Ve||1/Ve==1/De)||Ve!=Ve&&De!=De},e=f.useState,Ot=f.useEffect,kt=f.useLayoutEffect,Fe=f.useDebugValue;function G(Ve){var De=Ve.getSnapshot;Ve=Ve.value;try{var Oe=De();return!W(Ve,Oe)}catch{return!0}}var Ae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function Pe(Ve,De){return De()}:function V(Ve,De){var Oe=De(),Le=e({inst:{value:Oe,getSnapshot:De}}),we=Le[0].inst,Ue=Le[1];return kt(function(){we.value=Oe,we.getSnapshot=De,G(we)&&Ue({inst:we})},[Ve,Oe,De]),Ot(function(){return G(we)&&Ue({inst:we}),Ve(function(){G(we)&&Ue({inst:we})})},[Ve]),Fe(Oe),Oe};oe.useSyncExternalStore=void 0!==f.useSyncExternalStore?f.useSyncExternalStore:Ae},7973:(qt,oe,le)=>{var f=le(1395),Ne=le(6485),e="function"==typeof Object.is?Object.is:function W(Pe,Ae){return Pe===Ae&&(0!==Pe||1/Pe==1/Ae)||Pe!=Pe&&Ae!=Ae},Ot=Ne.useSyncExternalStore,kt=f.useRef,Fe=f.useEffect,V=f.useMemo,G=f.useDebugValue;oe.useSyncExternalStoreWithSelector=function(Pe,Ae,Ve,De,Oe){var Le=kt(null);if(null===Le.current){var we={hasValue:!1,value:null};Le.current=we}else we=Le.current;Le=V(function(){function Tt(ot){if(!Zt){if(Zt=!0,Xt=ot,ot=De(ot),void 0!==Oe&&we.hasValue){var wt=we.value;if(Oe(wt,ot))return mt=wt}return mt=ot}if(wt=mt,e(Xt,ot))return wt;var Nn=De(ot);return void 0!==Oe&&Oe(wt,Nn)?(Xt=ot,wt):(Xt=ot,mt=Nn)}var Xt,mt,Zt=!1,Vt=void 0===Ve?null:Ve;return[function(){return Tt(Ae())},null===Vt?void 0:function(){return Tt(Vt())}]},[Ae,Ve,De,Oe]);var Ue=Ot(Pe,Le[0],Le[1]);return Fe(function(){we.hasValue=!0,we.value=Ue},[Ue]),G(Ue),Ue}},6485:(qt,oe,le)=>{qt.exports=le(2058)},7528:(qt,oe,le)=>{qt.exports=le(7973)}}]);