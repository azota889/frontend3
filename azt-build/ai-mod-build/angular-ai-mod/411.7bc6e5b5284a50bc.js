"use strict";(self.webpackChunkAIMod=self.webpackChunkAIMod||[]).push([[411],{9792:(Ut,oe,ue)=>{ue.r(oe),ue.d(oe,{AIModule:()=>Zy});var f=ue(9842),L=ue(177),N=ue(9417),mt=ue(5245),kt=ue(8516),zt=ue(4110),it=ue(7163),nt=ue(7091),sn=ue(3424),Ve=ue(1064),Fe=ue(8567),Be=ue(7005),e=ue(3953),We=ue(9822);let _t=(()=>{var t;class r{constructor(i){(0,f.A)(this,"redirectService",void 0),this.redirectService=i}canActivate(i,s){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/admin/ai/dashboard"),!1)}canActivateChild(i,s){return this.canActivate(i,s)}canLoad(i){return null!=localStorage.getItem("currentUser")||(this.redirectService.redirectToPath("/admin/ai/dashboard"),!1)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(We.m))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var xe=ue(467),Ie=ue(3617),Bt=ue(671),vt=ue(4025),At=ue(5312),rt=ue(1626);const Rt=At.c.apiPlatformBaseUrl;let je=(()=>{var t;class r{constructor(i){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",Rt+"/api/App/"),this.http=i}getList(){return this.http.get(`${this.apiUrl}list`)}listTemplate(){return this.http.get(`${this.apiUrl}listTemplate`)}getListShare(){return this.http.get(`${this.apiUrl}listShare`)}credit(){return this.http.get(`${this.apiUrl}credit`)}download(i){return this.http.post(`${this.apiUrl}download`,i)}load(i){return this.http.post(`${this.apiUrl}load`,i)}save(i){return this.http.post(`${this.apiUrl}save`,i)}delete(i){return this.http.post(`${this.apiUrl}delete`,i)}share(i){return this.http.post(`${this.apiUrl}share`,i)}addCollection(i){return this.http.post(`${this.apiUrl}addCollection`,i)}addVCollection(i){return this.http.post(`${this.apiUrl}addVCollection`,i)}getAppInfo(i){return this.http.get(`${this.apiUrl}getAppInfo/${i}`)}listAppRoute(){return this.http.get(`${this.apiUrl}listAppRoute`)}listApp(){return this.http.get(`${this.apiUrl}listApp`)}runAppAsync(i,s){return this.http.post(`${this.apiUrl}runAsync/`+i+"?stream=1",s)}runApp(i,s){return this.http.post(`${this.apiUrl}run/`+i+"?stream=1",s)}cancel(i){return this.http.post(`${this.apiUrl}cancel/${i}`,{})}logAppDone(i,s){return this.http.post(`${this.apiUrl}logAppDone/`+i,{data:s})}status(i){return this.http.get(`${this.apiUrl}status/`+i)}history(i){return this.http.get(`${this.apiUrl}history/`+i)}fetchUrl(i){return this.http.post(`${this.apiUrl}fetchUrl`,i)}delColection(i){return this.http.post(`${this.apiUrl}delColection`,i)}listCollection(){return this.http.get(`${this.apiUrl}listCollection`)}listVCollection(){return this.http.get(`${this.apiUrl}listVCollection`)}listData(i){return this.http.post(`${this.apiUrl}listData`,i)}delData(i){return this.http.post(`${this.apiUrl}delData`,i)}saveData(i){return this.http.post(`${this.apiUrl}saveData`,i)}searchVector(i){return this.http.post(`${this.apiUrl}searchVector`,i)}getConf(i){return this.http.post(`${this.apiUrl}getConf`,{data:i})}getKey(i){return this.http.post(`${this.apiUrl}getKey`,{data:i})}listKeys(){return this.http.get(`${this.apiUrl}listKeys`)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(rt.Qq))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),dt=(()=>{var t;class r{constructor(i){(0,f.A)(this,"http",void 0),(0,f.A)(this,"apiUrl",Rt+"/api/Admin/"),this.http=i}run(i){return this.http.post(`${this.apiUrl}run`,i)}live(i){return this.http.post(`${this.apiUrl}live`,i)}stream(i,s,l){const d=new EventSource(`${this.apiUrl}stream?t=${i}`);d.onmessage=function(m){m.data.trim().startsWith("[__FINISH__] => ")?l(m.data.substr(16)):s(JSON.parse(m.data))},d.onerror=function(m){d.close(),l("")}}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(rt.Qq))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var gn=function(t){return t.Text="text",t.ImageUrl="image_url",t}(gn||{}),Vn=ue(7687);let vn=(()=>{var t;class r{constructor(i){(0,f.A)(this,"commonService",void 0),this.commonService=i}getTypeObjNotice(i){return"NEW_SHARE_CLASS_PERMISSION"==i.type?"L\u1edbp: "+i.classroomName:"NEW_SHARE_HOMEWORK_PERMISSION"==i.type?"B\xe0i t\u1eadp: "+i.homeworkName:"NEW_SHARE_EXAM_PERMISSION"==i.type?"\u0110\u1ec1 thi: "+i.examName:"NEW_SHARE_CATEGORY_PERMISSION"==i.type?"Th\u01b0 m\u1ee5c: "+i.examName:""}getRouterLinkForNoticeObj(i,s){var l=this.redirectToPage(i,!0,s);return"string"==typeof l?l:""}getQueryParamForNoticeObj(i){var s=this.redirectToPage(i,!1);return"object"==typeof s?s:null}redirectToPage(i,s,l){switch(i.type){case"NEW_ANSWER":case"NEW_SHARE_HOMEWORK_PERMISSION":return s?`/admin/testbank/homework-results-list/${i.classroomId}/${i.homeworkId}/${i.homeworkHashId}`:null;case"HAS_MARK":case"NEW_HOMEWORK":case"RESEND_ANSWER":return s?`/bai-tap/${i.homeworkHashId}`:null;case"NEW_EXAM_SUBMIT":return s?`/admin/testbank/test-review/${i.examId}/${i.parentId}/${i.studentId}/${i.examResultId??0}`:null;case"NEW_EXAM":return s?`/de-thi/${i.examHashId}`:"";case"EXAM_HAS_MARK":return s?`/test/answer-test/${i.parentId}/0/${i.examHashId}/${i.examResultId}`:null;case"NEW_SHARE_CLASS_PERMISSION":return 1==i.isMultipleClassroom?s?"/admin/student/manage-classroom/0":"":s?"/admin/student/classroom-details/"+i.classroomId+"/0":"";case"NEW_SHARE_CATEGORY_PERMISSION":return s?`/admin/testbank/document-management/0/${i.examId}/1`:{data:this.commonService.serializeJson({shareType:`user_${i.senderId}`})};case"NEW_SHARE_EXAM_PERMISSION":return s?`/admin/testbank/exam-results-list/0/${i.examId}/0`:null;case"NEW_QA_EXAM_ASK":case"NEW_QA_HOMEWORK_ASK":return s?"/admin/teacher-qa/view-question/"+Number(i.extraDataObj?.qaQuestionId):null;case"NEW_QA_EXAM_ANSWER":case"NEW_QA_HOMEWORK_ANSWER":return s?"/student-qa/view-question/"+Number(i.extraDataObj?.qaQuestionId):null;case"NEW_ASSIGN":return s?"/admin/student/manage-classroom/0":null;case"SHARE_AZOTA_BANK_QUESTION":return s?"/auth/account-setting/0/3?tab=1":null;case"NEW_REQUEST_REAPPROVE":return s?`/admin/student/classroom-details/${i.classroomId}/0`:null;case"NEW_SHARE_PERMISSION":return null;case"NEW_CLASSROOM_NEWS":return s?l?`/student/classroom-details/${i.classroomId}/2`:`/admin/student/classroom-details/${i.classroomId}/2`:null;default:return s?"/student/classroom/0":null}}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Vn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var yn=ue(9311),Wt=ue(4823),an=ue(9489);let eo=(()=>{var t;class r{redirectToNewLanguage(i){if(i&&i!=this.commonService.getCurrentLang()){let _=this.commonService.getCurrentDomain();var s=_+"/"+this.commonService.getCurrentLang()+"/",l=_+"/"+i+"/",d=this.commonService.getFullCurrentUrl(),m=d.replace(s,l);m!=d&&(this.browserStorageService.saveStorage(this.defaultLangueInLocalStorageKey,i),window.location.replace(m))}}redirectToUserLanguage(){if(this.userService.isLogin()){var i=this.userService.getUserObj();this.redirectToNewLanguage(i.language?i.language:this.commonService.getDefaultLang())}else{var s=this.browserStorageService.getStorage(this.defaultLangueInLocalStorageKey);this.redirectToNewLanguage(s||this.commonService.getDefaultLang())}}constructor(i,s,l){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"defaultLangueInLocalStorageKey","switch_language_code"),this.commonService=i,this.userService=s,this.browserStorageService=l}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Vn.R),e.KVO(vt.R),e.KVO(yn.z))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var ne=ue(1413);let Oe=(()=>{var t;class r{logInDev(i,s){if(!At.c.production){if(null!=s&&null!=i)return console.log(i,s);if(null!=s&&null==i)return console.log(s);null!=i&&console.log(i)}}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),j=(()=>{var t;class r{getHeaderReloadNoticeSubscriber(){return this.headerReloadNoticeListener}sendChangeLanguage(i){this._sendMessage({type:"CHANGE_LANGUAGE",status:1,message:"send_from_angular",data:{language:i}})}sendSimpleMessage(i){this._sendMessage({type:i,status:1,message:"send_from_angular",data:{}})}_sendMessage(i){this.aztCustomConsoleLogService.logInDev("To fluter data: ",i),this._sendRawMessage(JSON.stringify(i))}_sendRawMessage(i){try{let s=function Ee(){return typeof MessageInvoker<"u"?MessageInvoker:void 0}();typeof s<"u"&&s&&(this.aztCustomConsoleLogService.logInDev("Have MessageInvoker"),s.postMessage(i));let l=function Se(){return typeof flutter_inappwebview<"u"?flutter_inappwebview:void 0}();typeof l<"u"&&l&&(this.aztCustomConsoleLogService.logInDev("Have flutter_inappwebview"),l.callHandler("toFlutter",i))}catch(s){this.aztCustomConsoleLogService.logInDev(void 0,s)}}constructor(i){(0,f.A)(this,"aztCustomConsoleLogService",void 0),(0,f.A)(this,"headerReloadNoticeListener",new ne.B),this.aztCustomConsoleLogService=i}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Oe))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var J=ue(9115),we=ue(665),Ne=ue(7347);function Ae(t,r){1&t&&(e.j41(0,"span",9),e.nrm(1,"azt-loading-ui"),e.k0s())}function He(t,r){if(1&t&&(e.j41(0,"button",5),e.DNE(1,Ae,2,0,"span",6),e.j41(2,"span",7),e.EFF(3,"\xa0"),e.k0s(),e.nrm(4,"img",8),e.nI1(5,"coreModConvertCdnLinkOfGitHub"),e.k0s()),2&t){const n=e.XpG(),i=e.sdS(2);e.Y8G("matMenuTriggerFor",i),e.R7$(),e.Y8G("ngIf",n.statusObj.loading),e.R7$(),e.Y8G("hidden",!n.statusObj.loading),e.R7$(2),e.FS9("alt",n.imgLanguage),e.Y8G("src",e.bMT(5,5,n.imgLanguage),e.B4B)}}function st(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",10),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.switchLanguage(s.value))}),e.nrm(2,"img",11),e.nI1(3,"coreModConvertCdnLinkOfGitHub"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.FS9("alt",n),e.Y8G("src",e.bMT(3,3,n.img),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(5,5,n.label)," ")}}let pt=(()=>{var t;class r extends Ie.H{getImgLanguage(i){this.imgLanguage=this.listSupportedLanguages.find(s=>s.value==i)?.img??""}initLanguages(){this.listSupportedLanguages=this.supportedLanguagesArr.map(i=>({value:i,label:"lang_core_language_"+i,img:"flag/"+i+".svg"}))}switchLanguage(i){i&&i!=this.commonService.getCurrentLang()&&(this.userService.isLogin()?(this.initStatusObj(),this.waitDestroy(this.userLangService.apiUserLangSwitchLangGet(i).subscribe(s=>{1==s.success?(this.mobileWebviewService.sendChangeLanguage(i),setTimeout(()=>{this.stopStatusObj(),this.switchLanguageService.redirectToNewLanguage(i)},100)):this.errorStatusObj(s.message??"",!0)}))):(this.mobileWebviewService.sendChangeLanguage(i),setTimeout(()=>{this.switchLanguageService.redirectToNewLanguage(i)},100)))}ngOnInit(){this.initLanguages(),this.getImgLanguage(this.commonService.getCurrentLang()),this.imgLanguage||this.getImgLanguage(At.c.defaultLanguage)}constructor(i,s,l,d){super(),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"userLangService",void 0),(0,f.A)(this,"switchLanguageService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"imgLanguage",""),(0,f.A)(this,"listSupportedLanguages",[]),this.userService=i,this.userLangService=s,this.switchLanguageService=l,this.mobileWebviewService=d}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(vt.R),e.rXU(an.f$),e.rXU(eo),e.rXU(j))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-switch-language"]],features:[e.Vt3],decls:6,vars:2,consts:[["switchlanguage","matMenu"],["class","btn btn-transparent p-1",3,"matMenuTriggerFor",4,"ngIf"],[1,"dropdown-menu","show","w-32","relative"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"btn","btn-transparent","p-1",3,"matMenuTriggerFor"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[3,"hidden"],[3,"src","alt"],[1,"w-4","h-4","inline-block","mr-2"],["azt-track-service","azt-switch-language-2NtpICqDxdj",1,"dropdown-item",3,"click"],[1,"w-5","h-5","mr-2",3,"src","alt"]],template:function(i,s){1&i&&(e.DNE(0,He,6,7,"button",1),e.j41(1,"mat-menu",null,0)(3,"div",2)(4,"ul",3),e.DNE(5,st,6,7,"li",4),e.k0s()()()),2&i&&(e.Y8G("ngIf",s.listSupportedLanguages.length>1),e.R7$(5),e.Y8G("ngForOf",s.listSupportedLanguages))},dependencies:[L.Sq,L.bT,J.kk,J.Cp,we.R,Ne.wp,Ne.Vs],encapsulation:2})),r})(),ze=(()=>{var t;class r{mouseEnter(){this.isMousePosition="mouseEnter",window.setTimeout(()=>{"mouseEnter"==this.isMousePosition&&this.menuTrigger?.openMenu()},100)}mouseLeave(){this.isMousePosition="mouseLeave",window.setTimeout(()=>{"mouseLeave"==this.isMousePosition&&this.menuTrigger?.closeMenu()},300)}constructor(i){(0,f.A)(this,"menuTrigger",void 0),(0,f.A)(this,"isMousePosition","mouseLeave"),this.menuTrigger=i}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(J.Cp))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();var Zt=ue(3861),Gd=ue(2909),os=ue(4006);let xc=(()=>{var t;class r{constructor(i){(0,f.A)(this,"dialog",void 0),(0,f.A)(this,"open",(s,l)=>this.dialog.open(s,l)),(0,f.A)(this,"closeAll",()=>this.dialog.closeAll()),this.dialog=i}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(os.bZ))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),is=(()=>{var t;class r{removeInvalidChars(i){try{return i?.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")??""}catch{return i??""}}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})();const Ia=(t,r)=>({width:t,height:r}),Cc=(t,r,n)=>({width:t,height:r,borderColor:n}),kc=(t,r,n,i)=>({width:t,height:r,"font-size":n,borderColor:i});function Ta(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function Sc(t,r){if(1&t&&(e.qex(0),e.j41(1,"div",2),e.nrm(2,"img",3),e.nI1(3,"mycdn"),e.DNE(4,Ta,1,0,"lucide-icon",4),e.k0s(),e.bVm()),2&t){let n;const i=e.XpG();e.R7$(),e.Y8G("ngStyle",e.l_i(8,Ia,i.size+"px",i.size+"px")),e.R7$(),e.FS9("matTooltip",i.showTooltip?i.customTooltip?i.customTooltip:i.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!i.showTooltip||!i.customTooltip&&!i.nameCreateAvatar)("src",e.bMT(3,6,i.linkAvatar),e.B4B)("ngStyle",e.sMw(11,Cc,i.size+"px",i.size+"px",null!==(n=i.borderAvatar)&&void 0!==n?n:"")),e.R7$(2),e.Y8G("ngIf",i.showCheckUser)}}function Aa(t,r){1&t&&e.nrm(0,"lucide-icon",5)}function Wi(t,r){if(1&t&&(e.j41(0,"div",6),e.EFF(1),e.DNE(2,Aa,1,0,"lucide-icon",4),e.k0s()),2&t){let n;const i=e.XpG();e.FS9("matTooltip",i.showTooltip?i.customTooltip?i.customTooltip:i.nameCreateAvatar:""),e.Y8G("matTooltipDisabled",!i.showTooltip||!i.customTooltip&&!i.nameCreateAvatar)("ngStyle",e.ziG(5,kc,i.size+"px",i.size+"px",(i.size/2>48?48:i.size/2)+"px",null!==(n=i.borderAvatar)&&void 0!==n?n:"")),e.R7$(),e.SpI(" ",i.returnNameAvatar," "),e.R7$(),e.Y8G("ngIf",i.showCheckUser)}}let Ho=(()=>{var t;class r extends Ie.H{createNewAvatar(){try{this.nameCreateAvatar=this.homeworkExamService.removeInvalidChars(this.nameCreateAvatar).trim()}catch{this.nameCreateAvatar=this.nameCreateAvatar}var s=this.commonService.convertVietnameseToEnglish(this.nameCreateAvatar??"").toUpperCase().split(" ");this.returnNameAvatar=1==s.length?s[0]?s[0].charAt(0):"A":s[0]?.charAt(0)+(s[s.length-1]?.charAt(0)??"")}ngOnInit(){this.createNewAvatar()}ngOnChanges(){this.createNewAvatar()}constructor(i){super(),(0,f.A)(this,"homeworkExamService",void 0),(0,f.A)(this,"nameCreateAvatar",void 0),(0,f.A)(this,"linkAvatar",void 0),(0,f.A)(this,"size",0),(0,f.A)(this,"customTooltip",void 0),(0,f.A)(this,"showTooltip",!0),(0,f.A)(this,"showCheckUser",!1),(0,f.A)(this,"borderAvatar",""),(0,f.A)(this,"returnNameAvatar",""),this.homeworkExamService=i}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(is))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["azt-create-avatar"]],inputs:{nameCreateAvatar:"nameCreateAvatar",linkAvatar:"linkAvatar",size:"size",customTooltip:"customTooltip",showTooltip:"showTooltip",showCheckUser:"showCheckUser",borderAvatar:"borderAvatar"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["elseTemplate",""],[4,"ngIf","ngIfElse"],[3,"ngStyle"],[1,"border","border-slate-200","dark:border-darkmode-400",2,"border-radius","50%",3,"matTooltip","matTooltipDisabled","src","ngStyle"],["name","check","size","11","class","check-user-icon stroke-width-2.5","strokeWidth","2",4,"ngIf"],["name","check","size","11","strokeWidth","2",1,"check-user-icon","stroke-width-2.5"],["id","create-avatar",1,"create-avatar-class","border","border-slate-200","dark:border-darkmode-400",2,"display","inline-flex","justify-content","center","align-items","center","background-color","#dddddd","border-radius","50%","color","#000","font-weight","500","margin","auto",3,"matTooltip","matTooltipDisabled","ngStyle"]],template:function(i,s){if(1&i&&e.DNE(0,Sc,5,15,"ng-container",1)(1,Wi,3,10,"ng-template",null,0,e.C5r),2&i){const l=e.sdS(2);e.Y8G("ngIf",s.linkAvatar)("ngIfElse",l)}},dependencies:[L.bT,L.B3,Wt.oV,kt.WGl,Ne.nf],styles:[".check-user-icon[_ngcontent-%COMP%]{align-items:center;height:13px;width:13px;position:absolute;justify-content:center;bottom:-4px;right:0;background:#65ce8c;border-radius:50%;color:#fff}.check-user-icon[_ngcontent-%COMP%]   lucide-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin-bottom:8px;stroke-width:4.5px!important}.w-content[_ngcontent-%COMP%]{margin-left:10px;width:calc(100% - 46px)}.mw-name[_ngcontent-%COMP%]{max-width:calc(100% - 12px - .25rem)}"]})),r})();const Et=()=>({"mr-2":!0}),wc=(t,r)=>({"pl-2":t,"px-2":r}),Nc=t=>({"max-width":t}),On=t=>[t],Ec=t=>({return_url:t,from:"register",user_click:"true"}),Ra=t=>({return_url:t,user_click:"true"});function rs(t,r){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"button",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.gotoLogin())}),e.nrm(2,"lucide-icon",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Et)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_dang_nhap")," "))}function Ic(t,r){if(1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"isParentViewOnly"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,"")?e.bMT(3,3,"lang_auto_phu_huynh"):null!=n.userObj&&null!=n.userObj.roles&&n.userObj.roles.includes("TEACHER")?e.bMT(4,5,"lang_auto_giao_vien"):e.bMT(5,7,"lang_auto_hoc_sinh")," ")}}function Zi(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Ic,6,9,"div",16),e.k0s()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.l_i(6,wc,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(9,Nc,n.isTqbDomain&&n.isMobileWebView?"80px":"auto")),e.R7$(),e.SpI(" ",n.isAnonymous?e.bMT(3,4,"lang_auto_tai_khoan_an_danh"):null==n.userObj?null:n.userObj.fullName," "),e.R7$(2),e.Y8G("ngIf",!n.isTqbDomain)}}function Ji(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9),e.bIt("mouseenter",function(){e.eBV(n);const s=e.XpG();return e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseEnter())})("mouseleave",function(){e.eBV(n);const s=e.XpG();return e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseLeave())}),e.j41(1,"div",10),e.bIt("click",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.isMobileWebView?l.avtClick():!l.isMobileDevice&&s.stopPropagation())}),e.j41(2,"div",11),e.nrm(3,"azt-create-avatar",12),e.k0s(),e.DNE(4,Zi,5,11,"div",13),e.k0s()()}if(2&t){const n=e.XpG(),i=e.sdS(4);e.Y8G("matMenuTriggerFor",n.isMobileWebView?null:i),e.R7$(3),e.Y8G("nameCreateAvatar",null==n.userObj?null:n.userObj.fullName)("size",32)("showTooltip",n.isMobileDevice)("linkAvatar",null==n.userObj?null:n.userObj.avatar),e.R7$(),e.Y8G("ngIf",!n.isMobileDevice||n.isTqbDomain)}}function Dd(t,r){if(1&t&&(e.j41(0,"li")(1,"a",24),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",25),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(8,On,e.bMT(2,4,"/auth/register")))("queryParams",e.eq3(10,Ra,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,Et)),e.R7$(),e.SpI(" \xa0",e.bMT(5,6,"lang_auto_dang_ky")," ")}}function Tc(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Et)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Ac(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Et)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function Vd(t,r){if(1&t){const n=e.RV6();e.qex(0),e.DNE(1,Dd,6,13,"li",18),e.j41(2,"li")(3,"a",19),e.nI1(4,"navigationLocalize"),e.nrm(5,"lucide-icon",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,Tc,5,5,"li",18)(9,Ac,5,5,"li",18),e.j41(10,"li")(11,"a",20),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.reloadBrowser())}),e.nrm(12,"lucide-icon",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"li"),e.nrm(16,"hr",22),e.k0s(),e.j41(17,"li")(18,"a",23),e.nI1(19,"navigationLocalize"),e.nrm(20,"lucide-icon",8),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.bVm()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(22,On,e.bMT(4,12,"/auth/login")))("queryParams",e.eq3(24,Ec,n.returnUrl)),e.R7$(2),e.Y8G("ngClass",e.lJ4(26,Et)),e.R7$(),e.SpI(" ",e.bMT(7,14,"lang_auto_dang_nhap")," "),e.R7$(2),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(3),e.Y8G("ngClass",e.lJ4(27,Et)),e.R7$(),e.SpI(" ",e.bMT(14,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(28,On,e.bMT(19,18,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(30,Et)),e.R7$(),e.SpI(" ",e.bMT(22,20,"lang_auto_dang_xuat")," ")}}function Fa(t,r){if(1&t&&(e.j41(0,"li")(1,"a",34),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",35),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(7,On,e.bMT(2,3,n.isTeacherDashboard?"/student/classroom/0":"/admin/dashboard"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,Et)),e.R7$(),e.SpI(" ",e.bMT(5,5,n.isTeacherDashboard?"lang_auto_vao_man_hoc_sinh":"lang_auto_vao_man_giao_vien")," ")}}function ja(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("dark"))}),e.nrm(2,"lucide-icon",27),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Et)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_toi")," "))}function Ma(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.switchModeUI("light"))}),e.nrm(2,"lucide-icon",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(4,Et)),e.R7$(),e.SpI(" ",e.bMT(4,2,"lang_auto_che_de_sang")," "))}function $a(t,r){1&t&&(e.j41(0,"li")(1,"a",36),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,On,e.bMT(2,3,"/auth/account-setting/0/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,Et)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_remove_teacher_role")," "))}function Ga(t,r){1&t&&(e.j41(0,"li")(1,"a",38),e.nI1(2,"navigationLocalize"),e.nrm(3,"lucide-icon",37),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(7,On,e.bMT(2,3,"/auth/account-setting/1/2"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(9,Et)),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_dashboard_become_teacher_role")," "))}function di(t,r){if(1&t){const n=e.RV6();e.DNE(0,Fa,6,10,"li",18)(1,ja,5,5,"li",18)(2,Ma,5,5,"li",18)(3,$a,6,10,"li",18)(4,Ga,6,10,"li",18),e.j41(5,"li")(6,"a",20),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.reloadBrowser())}),e.nrm(7,"lucide-icon",21),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"li"),e.nrm(11,"hr",22),e.k0s(),e.j41(12,"li")(13,"a",30),e.nI1(14,"navigationLocalize"),e.nrm(15,"lucide-icon",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()(),e.j41(18,"li")(19,"a",32),e.nI1(20,"navigationLocalize"),e.nrm(21,"lucide-icon",33),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"li")(25,"a",23),e.nI1(26,"navigationLocalize"),e.nrm(27,"lucide-icon",8),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()()}if(2&t){const n=e.XpG();e.Y8G("ngIf",n.isTeacherRole),e.R7$(),e.Y8G("ngIf","light"==n.modeUI),e.R7$(),e.Y8G("ngIf","dark"==n.modeUI),e.R7$(),e.Y8G("ngIf",n.isTeacherDashboard),e.R7$(),e.Y8G("ngIf",!(n.isTeacherRole||n.isTeacherDashboard||n.isBusinessDomain||n.beCreatedStudent)),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,Et)),e.R7$(),e.SpI(" ",e.bMT(9,16,"lang_dashboard_footer_refresh")," "),e.R7$(5),e.Y8G("routerLink",e.eq3(31,On,e.bMT(14,18,"/auth/login-scan/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(33,Et)),e.R7$(),e.SpI(" ",e.bMT(17,20,"lang_auto_qr_dang_nhap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(34,On,e.bMT(20,22,"/auth/create-qr-forgot-pass/"+(n.isTeacherDashboard?"0":"1")))),e.R7$(2),e.Y8G("ngClass",e.lJ4(36,Et)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_auto_tao_qr_quen_mat_khau")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(37,On,e.bMT(26,26,"/auth/logout"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(39,Et)),e.R7$(),e.SpI(" ",e.bMT(29,28,"lang_auto_dang_xuat")," ")}}let pi=(()=>{var t;class r extends Ie.H{set menuTrigger(i){this.mouseEventObj=new ze(i)}avtClick(){this.isMobileWebView&&this.redirectService.redirectToPath(`/auth/account-setting/${this.isTeacherDashboard?0:1}/0`)}gotoLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}reloadBrowser(){var s=this.commonService.getCurrentUrl();if(s.match(/(\?|&)+t=(\d)+/)){var l=s.includes("&t=")?s.replace(/\&t=(\d)+/,"&t="+this.timeService.getCurrentSecond()):s.replace(/\?t=(\d)+/,"?t="+this.timeService.getCurrentSecond());location.replace(l)}else s=s.includes("?")?s+"&t="+this.timeService.getCurrentSecond():s+"?t="+this.timeService.getCurrentSecond(),location.replace(s)}switchModeUI(i){let s=document.getElementById("azota-app-html");this.modeUI=i,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?s&&(s.classList.remove("dark"),s.classList.add("light")):s&&(s.classList.remove("light"),s.classList.add("dark"))}changeAccountStudent(){}ngOnInit(){this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getCurrentUrl(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser(),this.isTeacherRole=this.userService.isTeacherRole(),this.userLoginStateService.loginMessage.subscribe(i=>{this.userObj=this.userService.getUserObj(),this.isAnonymous=this.userService.isAnonymousRoleOfCurrentUser()}),super.ngOnInit()}constructor(i,s,l,d,m,_,g){super(),(0,f.A)(this,"router",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"userLoginStateService",void 0),(0,f.A)(this,"timeService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"sAztDialogService",void 0),(0,f.A)(this,"isTeacherDashboard",!0),(0,f.A)(this,"beCreatedStudent",!1),(0,f.A)(this,"mouseEventObj",void 0),(0,f.A)(this,"returnUrl",""),(0,f.A)(this,"userObj",void 0),(0,f.A)(this,"modeUI",""),(0,f.A)(this,"isAnonymous",!1),(0,f.A)(this,"isTeacherRole",!1),this.router=i,this.userService=s,this.browserStorageService=l,this.userLoginStateService=d,this.timeService=m,this.redirectService=_,this.sAztDialogService=g}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(mt.Ix),e.rXU(vt.R),e.rXU(yn.z),e.rXU(Zt.X),e.rXU(Gd.F),e.rXU(We.m),e.rXU(xc))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-account-menu"]],viewQuery:function(i,s){if(1&i&&e.GBs(J.Cp,5),2&i){let l;e.mGM(l=e.lsd())&&(s.menuTrigger=l.first)}},inputs:{isTeacherDashboard:"isTeacherDashboard",beCreatedStudent:"beCreatedStudent"},features:[e.Vt3],decls:10,vars:5,consts:[["loggedIn",""],["accountMenu","matMenu"],["notAnonymous",""],[4,"ngIf","ngIfElse"],[3,"hasBackdrop"],[1,"dropdown-menu","show","relative","w-56",3,"mouseenter","mouseleave"],[1,"dropdown-content"],["azt-track-service","header-account-menu-zWAvNkVhjVM",1,"btn","btn-sm","btn-outline-primary",3,"click"],["name","log-out","size","16",3,"ngClass"],["azt-track-service","header-account-menu-S984kCyEl",3,"mouseenter","mouseleave","matMenuTriggerFor"],["azt-track-service","header-account-menu-_z5kaOQTx",1,"dropdown-toggle","w-full","h-10","rounded-full","flex","trigger-menu",2,"align-items","center",3,"click"],[1,"relative"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"font-medium",3,"ngStyle"],["class","text-xs text-slate-600 -mt-0.5 dark:text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-600","-mt-0.5","dark:text-slate-500"],[4,"ngIf"],["azt-track-service","header-account-menu-eSx-v39GRMc",1,"dropdown-item",3,"routerLink","queryParams"],["azt-track-service","header-account-menu-SEi5xr4uPic",1,"dropdown-item",3,"click"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","header-account-menu-mn5LIp-0AtS",1,"dropdown-item",3,"routerLink"],["azt-track-service","header-account-menu-vlcN2DxtbR2",1,"dropdown-item",3,"routerLink","queryParams"],["name","circle-arrow-right","size","16",3,"ngClass"],["azt-track-service","header-account-menu-iNoUc0CT5wP",1,"dropdown-item",3,"click"],["name","moon","size","16",3,"ngClass"],["azt-track-service","header-account-menu-CI1BdC7HViT",1,"dropdown-item",3,"click"],["name","sun","size","16",3,"ngClass"],["azt-track-service","header-account-menu--T0bM_cz_i7",1,"dropdown-item",3,"routerLink"],["name","scan-line","size","16",3,"ngClass"],["azt-track-service","header-account-menu-XYfAXj_Jl4e",1,"dropdown-item",3,"routerLink"],["name","qr-code","size","16",3,"ngClass"],["azt-track-service","header-account-menu-Q26_sXs6gkC",1,"dropdown-item",3,"routerLink"],["name","arrow-right-left","size","16",3,"ngClass"],["azt-track-service","header-account-menu-VzCUMIT5BDg",1,"dropdown-item",3,"routerLink"],["name","shield-check","size","16",3,"ngClass"],["azt-track-service","header-account-menu-jozmhaRatuz",1,"dropdown-item",3,"routerLink"]],template:function(i,s){if(1&i){const l=e.RV6();e.DNE(0,rs,5,5,"ng-container",3)(1,Ji,5,6,"ng-template",null,0,e.C5r),e.j41(3,"mat-menu",4,1)(5,"div",5),e.bIt("mouseenter",function(){return e.eBV(l),e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseEnter())})("mouseleave",function(){return e.eBV(l),e.Njj(null==s.mouseEventObj?null:s.mouseEventObj.mouseLeave())}),e.j41(6,"ul",6),e.DNE(7,Vd,23,31,"ng-container",3)(8,di,30,40,"ng-template",null,2,e.C5r),e.k0s()()()}if(2&i){const l=e.sdS(2),d=e.sdS(9);e.Y8G("ngIf",!s.userService.isLogin())("ngIfElse",l),e.R7$(3),e.Y8G("hasBackdrop",!1),e.R7$(4),e.Y8G("ngIf",s.isAnonymous)("ngIfElse",d)}},dependencies:[mt.Wk,L.YU,L.bT,L.B3,J.kk,J.Cp,Ho,kt.WGl,Ne.F2,Ne.wp,Ne.hx],encapsulation:2})),r})(),Rc=(()=>{var t;class r{constructor(i){(0,f.A)(this,"commonService",void 0),(0,f.A)(this,"globalDataObj",{}),this.commonService=i}setGlobalData(i,s){this.globalDataObj[i]=s}getGlobalData(i){let s=this.globalDataObj[i];if(s)return this.commonService.castJsonToObj(s)}removeGlobalData(i){this.globalDataObj.hasOwnProperty(i)&&delete this.globalDataObj[i]}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(Vn.R))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Fc=(()=>{var t;class r{sendReadNoticeToWebviewOfFlutter(i){(i||!this.sendMarkAsReadToFluter)&&(this.mobileWebviewService.sendSimpleMessage("OPEN_NOTIFICATION"),this.sendMarkAsReadToFluter=!0)}constructor(i){(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sendMarkAsReadToFluter",!1),this.mobileWebviewService=i}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.KVO(j))}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),jc=(()=>{var t;class r{constructor(i){(0,f.A)(this,"elementRef",void 0),(0,f.A)(this,"isDisabled",!1),this.elementRef=i}onEnter(){const i=this.elementRef.nativeElement;this.isDisabled=i.offsetWidth==i.scrollWidth}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.aKT))}),(0,f.A)(r,"\u0275dir",e.FsC({type:t,selectors:[["","isDisabledTooltip",""]],hostBindings:function(i,s){1&i&&e.bIt("mouseenter",function(){return s.onEnter()})},inputs:{isDisabled:[0,"isDisabledTooltip","isDisabled"]},exportAs:["isDisabled"]})),r})();const Mc=()=>({"notification__icon dark:text-slate-500":!0}),Da=t=>[t],Va=t=>({"mt-3":t});function $c(t,r){1&t&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui"),e.k0s())}function Ki(t,r){if(1&t&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.unreadNotification," ")}}function Oa(t,r){1&t&&(e.j41(0,"div",18),e.nrm(1,"azt-loading-ui",19),e.k0s())}function qi(t,r){if(1&t&&(e.j41(0,"div",21),e.eu8(1,22),e.k0s()),2&t){e.XpG(3);const n=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function Od(t,r){1&t&&(e.j41(0,"div",23),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_chua_co_thong_bao_nao")," "))}function Qi(t,r){if(1&t&&e.DNE(0,qi,2,1,"div",20)(1,Od,3,3,"ng-template",null,3,e.C5r),2&t){const n=e.sdS(2),i=e.XpG(2);e.Y8G("ngIf",i.commonNoticeData.length>0)("ngIfElse",n)}}function ss(t,r){if(1&t&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,Oa,2,0,"div",17)(6,Qi,3,2,"ng-template",null,2,e.C5r),e.k0s()()),2&t){const n=e.sdS(7),i=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_thong_bao")),e.R7$(2),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",n)}}function as(t,r){if(1&t&&(e.qex(0),e.nrm(1,"azt-create-avatar",39),e.bVm()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.Y8G("linkAvatar",n.senderAvatar)("nameCreateAvatar",n.senderName)("size",48)}}function za(t,r){if(1&t&&e.nrm(0,"azt-create-avatar",42),2&t){const n=e.XpG(3).$implicit;e.Y8G("nameCreateAvatar",n.senderName)("size",48)}}function zd(t,r){1&t&&(e.nrm(0,"azt-create-avatar",43),e.nI1(1,"coreModConvertCdnLinkOfGitHub")),2&t&&e.Y8G("linkAvatar",e.bMT(1,2,"images/logo.svg"))("size",48)}function Bd(t,r){if(1&t&&e.DNE(0,za,1,2,"azt-create-avatar",40)(1,zd,2,4,"azt-create-avatar",41),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Ld(t,r){if(1&t&&(e.qex(0),e.j41(1,"span",44,6),e.EFF(3),e.k0s(),e.bVm()),2&t){const n=e.sdS(2),i=e.XpG(2).$implicit;e.R7$(),e.FS9("matTooltip",i.senderName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",i.senderName," ")}}function Uo(t,r){if(1&t&&(e.j41(0,"span",44,6),e.EFF(2),e.k0s()),2&t){const n=e.sdS(1),i=e.XpG(3).$implicit;e.FS9("matTooltip",i.studentName),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(2),e.SpI(" ",i.studentName," ")}}function Gc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_re_approved_student_account")," "))}function Dc(t,r){1&t&&(e.j41(0,"span",47),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_bank_question")," "))}function Pd(t,r){if(1&t&&e.DNE(0,Uo,3,4,"span",45)(1,Gc,3,3,"span",46)(2,Dc,3,3,"span",46),2&t){const n=e.XpG(2).$implicit;e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"!=n.type&&"NEW_REQUEST_REAPPROVE"!=n.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==n.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==n.type)}}function Vc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.j41(2,"span",48),e.EFF(3),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ","lang_auto_ban_moi_duoc_phan_quyen_cho_lop"," "),e.R7$(2),e.JRh(n.classroomName)}}function Oc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_cham_diem_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function zc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Bc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_co_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_moi_duoc_giao")," ")}}function Xd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_yeu_cau_nop_lai_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Yd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_da_nop_bai_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ht(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_co_bai_thi_moi")," "),e.R7$(3),e.JRh(n.examName)}}function Hd(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_bai_thi")," "),e.R7$(3),e.JRh(n.examName),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_da_duco_cham_diem")," ")}}function Ba(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit,i=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_ban_moi_duoc_phan_quyen_cho")," "),e.R7$(3),e.JRh(i.processNoticeService.getTypeObjNotice(n))}}function Lc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function ls(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_hoc_sinh_moi_dat_cho_ban_cau_hoi_trong_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function Ud(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_de_thi")," "),e.R7$(3),e.JRh(n.examName)}}function Pc(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"b"),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_giao_vien_da_tra_loi_cau_hoi_cua_ban_o_bai_tap")," "),e.R7$(3),e.JRh(n.homeworkName)}}function cs(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.nI1(6,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_notice_you")+" "+(n.totalApproved?e.bMT(3,3,"lang_notice_approved")+" "+n.totalApproved+" "+e.bMT(4,5,"lang_notice_question"):"")+(n.totalApproved&&n.totalRejected?", ":" ")+(n.totalRejected?e.bMT(5,7,"lang_notice_rejected")+" "+n.totalRejected+" "+e.bMT(6,9,"lang_notice_question"):"")," ")}}function zn(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_news_feed_notice_has_new")," "),e.R7$(3),e.JRh(n.classroomName)}}function Wd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"b"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,7,"lang_auto_lop")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_auto_khong_chon_duoc_ten_do_da_co_ban_chon_mat")," ")}}function Sn(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_not_paid_your_current_months_tuition_please_complete_your_tuition")," ")}}function Zd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.SpI(" ",e.bMT(7,5,"lang_azt_you_have_some_unfinished_exams_please_complete_them_on_time")," ")}}function Jd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_vang_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function Kd(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.nI1(9,"mytranslate"),e.j41(10,"b"),e.EFF(11),e.k0s()()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_hoc_sinh")," "),e.R7$(3),e.JRh(n.studentName),e.R7$(),e.E5c(" ",e.bMT(7,8,"lang_core_da_co_mat_buoi_hoc_luc")," ",e.bMT(8,10,n.createdAt)," ",e.bMT(9,12,"lang_notify_list_class")," "),e.R7$(5),e.JRh(n.classroomName)}}function us(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_gui_nhan_xet_den_hoc_sinh")," ",n.classroomName," ")}}function ds(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.senderName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_da_thay_doi_trang_thai_hoc_phi_cho_hoc_sinh")," ",n.studentName," ")}}function er(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.Lme(" ",e.bMT(7,6,"lang_core_co_de_thi_moi_duoc_giao_den_hoc_sinh")," ",n.studentName," ")}}function ps(t,r){if(1&t&&(e.j41(0,"span")(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.j41(4,"b"),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"getContentFromCustomBodyNotice"),e.k0s()()),2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_giao_vien")," "),e.R7$(3),e.JRh(n.classroomName),e.R7$(),e.E5c(" ",e.bMT(7,7,"lang_core_co_thong_bao_moi_den_hoc_sinh")," ",n.studentName,' "',e.bMT(8,9,n.data),'" ')}}function qd(t,r){if(1&t&&(e.j41(0,"a",30),e.nI1(1,"navigationLocalize"),e.j41(2,"div",31)(3,"div",32),e.DNE(4,as,2,3,"ng-container",33)(5,Bd,2,2,"ng-template",null,4,e.C5r),e.k0s(),e.j41(7,"div",34)(8,"div",35),e.DNE(9,Ld,4,4,"ng-container",33)(10,Pd,3,3,"ng-template",null,5,e.C5r),e.j41(12,"div",36),e.EFF(13),e.nI1(14,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.j41(15,"div",37),e.DNE(16,Vc,4,2,"span",38)(17,Oc,5,4,"span",38)(18,zc,5,4,"span",38)(19,Bc,7,7,"span",38)(20,Xd,5,4,"span",38)(21,Yd,5,4,"span",38)(22,ht,5,4,"span",38)(23,Hd,7,7,"span",38)(24,Ba,5,4,"span",38)(25,Lc,5,4,"span",38)(26,ls,5,4,"span",38)(27,Ud,5,4,"span",38)(28,Pc,5,4,"span",38)(29,cs,7,11,"span",38)(30,zn,6,4,"span",38)(31,Wd,12,11,"span",38)(32,Sn,8,7,"span",38)(33,Zd,8,7,"span",38)(34,Jd,12,14,"span",38)(35,Kd,12,14,"span",38)(36,us,8,8,"span",38)(37,ds,8,8,"span",38)(38,er,8,8,"span",38)(39,ps,9,11,"span",38),e.k0s()()()()),2&t){const n=e.sdS(6),i=e.sdS(11),s=e.XpG(),l=s.$implicit,d=s.index,m=e.XpG(2);e.Y8G("routerLink",e.eq3(36,Da,e.bMT(1,32,m.processNoticeService.getRouterLinkForNoticeObj(l,m.role))))("queryParams",m.processNoticeService.getQueryParamForNoticeObj(l)),e.R7$(2),e.Y8G("ngClass",e.eq3(38,Va,0!==d)),e.R7$(2),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",n),e.R7$(5),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_CLASSROOM_NEWS"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type)("ngIfElse",i),e.R7$(4),e.SpI(" ",e.bMT(14,34,l.createdAt)," "),e.R7$(3),e.Y8G("ngIf","NEW_ASSIGN"==l.type),e.R7$(),e.Y8G("ngIf","HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_HOMEWORK"==l.type),e.R7$(),e.Y8G("ngIf","RESEND_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM_SUBMIT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_EXAM"==l.type),e.R7$(),e.Y8G("ngIf","EXAM_HAS_MARK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_SHARE_CLASS_PERMISSION"==l.type||"NEW_SHARE_CATEGORY_PERMISSION"==l.type||"NEW_SHARE_HOMEWORK_PERMISSION"==l.type||"NEW_SHARE_EXAM_PERMISSION"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ASK"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_EXAM_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","NEW_QA_HOMEWORK_ANSWER"==l.type),e.R7$(),e.Y8G("ngIf","SHARE_AZOTA_BANK_QUESTION"==l.type&&(l.totalApproved>0||l.totalRejected>0)),e.R7$(),e.Y8G("ngIf","NEW_CLASSROOM_NEWS"==l.type),e.R7$(),e.Y8G("ngIf","NEW_REQUEST_REAPPROVE"==l.type),e.R7$(),e.Y8G("ngIf","TUITION_NOT_PAID"==l.type),e.R7$(),e.Y8G("ngIf","DONT_FINISHED_LESSON_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","JUST_BEEN_MARKED_DONT_ABSENT"==l.type),e.R7$(),e.Y8G("ngIf","NEW_COMMENT_FOR_YOU"==l.type),e.R7$(),e.Y8G("ngIf","UPDATE_TUITION_PAYMENT"==l.type),e.R7$(),e.Y8G("ngIf","HAS_EXAM_CLASSROOM"==l.type),e.R7$(),e.Y8G("ngIf","CUSTOM_CONTENT_CLASSROOM"==l.type)}}function Qd(t,r){if(1&t&&(e.qex(0),e.DNE(1,qd,40,40,"a",29),e.bVm()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","NEW_SHARE_PERMISSION"!=n.type)}}function La(t,r){if(1&t&&(e.DNE(0,Qd,2,1,"ng-container",24),e.nrm(1,"hr",25),e.j41(2,"div",26),e.nI1(3,"navigationLocalize"),e.j41(4,"div",27)(5,"a",28),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()),2&t){const n=e.XpG();e.Y8G("ngForOf",n.commonNoticeData),e.R7$(2),e.Y8G("routerLink",e.eq3(7,Da,e.bMT(3,3,"/notify/"+n.role+"/0/0/0"))),e.R7$(4),e.SpI(" ",e.bMT(7,5,"lang_auto_xem_tat_ca")," ")}}let Xc=(()=>{var t;class r extends Ie.H{removeNoticeNumber(){this.frontSAztCommonService.apiFrontCommonMarkNotificationAsReadGet(this.role).subscribe(i=>{1==i.success&&(this.resetNotification(0),this.getHeaderInfo())}),this.isMobileWebView&&this.redirectService.redirectToPath(`/notify/${this.role}/0/0/0`)}resetNotification(i){var s="back_header_infors_"+this.userService.getUserObj().id,l=this.globalService.getGlobalData(s);l&&l.data&&(0==i&&(l.data.unreadNotification=0,this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!0)),this.globalService.setGlobalData(s,this.serializeJson(l)))}reGetNoticeObjs(){var i="back_header_infors_"+this.userService.getUserObj().id;this.globalService.removeGlobalData(i),this.getHeaderInfo()}getHeaderInfo(){var i="back_header_infors_"+this.userService.getUserObj().id,s=this.globalService.getGlobalData(i);s?(this.unreadNotification=s.data?.unreadNotification??0,this.commonNoticeData=s.data?.commonNoticeObjs??[],this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)):(this.initStatusObj(),this.frontSAztCommonService.apiFrontCommonGetHeaderInfoGet(this.role).subscribe(l=>{1==l.success&&(this.unreadNotification=l.data?.unreadNotification??0,this.globalService.setGlobalData(i,this.serializeJson(l)),this.commonNoticeData=l.data?.commonNoticeObjs??new Array,this.unreadNotification<=0&&this.sAztHeaderNoticeService.sendReadNoticeToWebviewOfFlutter(!1)),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getHeaderInfo()}constructor(i,s,l,d,m,_,g){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"frontSAztCommonService",void 0),(0,f.A)(this,"globalService",void 0),(0,f.A)(this,"redirectService",void 0),(0,f.A)(this,"mobileWebviewService",void 0),(0,f.A)(this,"sAztHeaderNoticeService",void 0),(0,f.A)(this,"role",0),(0,f.A)(this,"commonNoticeData",[]),(0,f.A)(this,"unreadNotification",0),this.processNoticeService=i,this.userService=s,this.frontSAztCommonService=l,this.globalService=d,this.redirectService=m,this.mobileWebviewService=_,this.sAztHeaderNoticeService=g,this.waitDestroy(this.mobileWebviewService.getHeaderReloadNoticeSubscriber().subscribe(()=>{this.reGetNoticeObjs()}))}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(vn),e.rXU(vt.R),e.rXU(an.s1),e.rXU(Rc),e.rXU(We.m),e.rXU(j),e.rXU(Fc))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["header-notice-box"]],inputs:{role:"role"},features:[e.Vt3],decls:9,vars:6,consts:[["notification","matMenu"],["listNoticeBox",""],["doneLoading",""],["noNotification",""],["otherTemplate",""],["notSharePermission",""],["c","isDisabled"],["azt-track-service","header-notice-box-DtIJA3xWHnn",1,"dropdown-toggle","notification","cursor-pointer","relative",3,"click","matMenuTriggerFor"],["name","bell","size","24",3,"ngClass"],["class","w-3 h-3 mx-auto inline-block",4,"ngIf"],["class","absolute bg-danger text-white rounded-full font-bold","style","top: -5px; right: -5px; font-size: 7px; overflow: hidden; width: 15px; height: 15px; line-height: 15px; text-align: center",4,"ngIf"],["class","notification-content dropdown-menu show relative pt-2",4,"ngIf"],[1,"w-3","h-3","mx-auto","inline-block"],[1,"absolute","bg-danger","text-white","rounded-full","font-bold",2,"top","-5px","right","-5px","font-size","7px","overflow","hidden","width","15px","height","15px","line-height","15px","text-align","center"],[1,"notification-content","dropdown-menu","show","relative","pt-2"],[1,"notification-content__box","dropdown-content",2,"padding","10px"],[1,"notification-content__title"],["class","w-4 h-4 mx-auto mb-4",4,"ngIf","ngIfElse"],[1,"w-4","h-4","mx-auto","mb-4"],["type","bootstrap-spinner"],["class","notice-azt",4,"ngIf","ngIfElse"],[1,"notice-azt"],[3,"ngTemplateOutlet"],[1,"w-full","text-center","text-slate-500","mt-0.5","mb-4"],[4,"ngFor","ngForOf"],[1,"dropdown-divider","border-gray/[0.08]","mt-3"],["azt-track-service","header-notice-box-m_8Z0tdYOsZ",1,"clickable","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"routerLink"],[1,"text-center","p-3"],[1,"text-primary","text-center"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","header-notice-box-oq6rCRY8JsN",3,"routerLink","queryParams"],[1,"cursor-pointer","dropdown-item","relative","flex","items-center",3,"ngClass"],[1,"w-12","h-12","flex-none","image-fit","mr-1"],[4,"ngIf","ngIfElse"],[1,"ml-2","overflow-hidden","w-full"],[1,"flex","items-center"],[1,"text-xs","text-slate-400","ml-auto","whitespace-nowrap"],[1,"text-slate-500","mt-0.5"],[4,"ngIf"],[3,"linkAvatar","nameCreateAvatar","size"],[3,"nameCreateAvatar","size",4,"ngIf"],[3,"linkAvatar","size",4,"ngIf"],[3,"nameCreateAvatar","size"],[3,"linkAvatar","size"],[1,"font-medium","truncate","mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","font-medium truncate mr-5",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],["class","font-medium mr-5",4,"ngIf"],[1,"font-medium","mr-5"],[1,"notify__name"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){return e.eBV(l),e.Njj(s.statusObj.loading?"":s.removeNoticeNumber())}),e.nrm(1,"lucide-icon",8),e.DNE(2,$c,2,0,"div",9)(3,Ki,2,1,"div",10),e.k0s(),e.j41(4,"mat-menu",null,0),e.DNE(6,ss,8,5,"div",11),e.k0s(),e.DNE(7,La,8,9,"ng-template",null,1,e.C5r)}if(2&i){const l=e.sdS(5);e.Y8G("matMenuTriggerFor",s.isMobileWebView?null:l),e.R7$(),e.Y8G("ngClass",e.lJ4(5,Mc)),e.R7$(),e.Y8G("ngIf",s.statusObj.loading),e.R7$(),e.Y8G("ngIf",s.unreadNotification&&!s.statusObj.loading),e.R7$(3),e.Y8G("ngIf",!s.isMobileWebView)}},dependencies:[mt.Wk,L.YU,L.Sq,L.bT,L.T3,J.kk,J.Cp,Wt.oV,Ho,jc,we.R,kt.WGl,Ne.F2,Ne.wp,Ne.Vs,Ne.bH,Ne.OR],encapsulation:2})),r})();const Pa=["*"],tr=()=>({"mr-1":!0}),Ft=t=>[t],fs=()=>({"text-white transform -rotate-90":!0});function Le(t,r){1&t&&e.SdG(0)}function Yc(t,r){if(1&t&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.headerTitle," ")}}function Hc(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div")(3,"button",13),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.goBack())}),e.nrm(4,"lucide-icon",14),e.j41(5,"span",15),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()(),e.j41(8,"div",16)(9,"span",17),e.EFF(10),e.k0s()(),e.j41(11,"div",12)(12,"div",18),e.nrm(13,"azt-switch-language"),e.k0s(),e.j41(14,"div",18),e.nrm(15,"header-notice-box",19),e.k0s(),e.j41(16,"div",20),e.nrm(17,"header-account-menu",21),e.k0s()()(),e.DNE(18,Yc,2,1,"div",22),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngClass",e.lJ4(8,tr)),e.R7$(2),e.JRh(e.bMT(7,6,"lang_auto_quay_lai")),e.R7$(4),e.JRh(n.headerTitle),e.R7$(5),e.Y8G("role",0),e.R7$(2),e.Y8G("isTeacherDashboard",!0),e.R7$(),e.Y8G("ngIf",n.headerTitle)}}function Xa(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeMenuMobile())}),e.j41(3,"div",35),e.nrm(4,"lucide-icon",50),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(),e.Y8G("routerLink",e.eq3(6,Ft,e.bMT(2,2,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(7,4,"lang_document_market_title")))}function Uc(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"a",26),e.nI1(3,"navigationLocalize"),e.nrm(4,"img",27),e.nI1(5,"getLinkLogo"),e.k0s(),e.j41(6,"a",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.openMenuMobile())}),e.nrm(7,"lucide-icon",29),e.k0s()(),e.j41(8,"div",30)(9,"a",31),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.nrm(10,"lucide-icon",32),e.k0s(),e.j41(11,"ul",33)(12,"li")(13,"a",34),e.nI1(14,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(15,"div",35),e.nrm(16,"lucide-icon",36),e.k0s(),e.j41(17,"div",37),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()(),e.j41(20,"li")(21,"a",38),e.nI1(22,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(23,"div",35),e.nrm(24,"lucide-icon",39),e.k0s(),e.j41(25,"div",37),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()(),e.j41(28,"li")(29,"a",40),e.nI1(30,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(31,"div",35),e.nrm(32,"lucide-icon",41),e.k0s(),e.j41(33,"div",37),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"li")(37,"a",42),e.nI1(38,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(39,"div",35),e.nrm(40,"lucide-icon",43),e.k0s(),e.j41(41,"div",37),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s()()(),e.j41(44,"li")(45,"a",44),e.nI1(46,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(47,"div",35),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",37),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,Xa,8,8,"li",46),e.j41(53,"li")(54,"a",47),e.nI1(55,"navigationLocalize"),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeMenuMobile())}),e.j41(56,"div",35),e.nrm(57,"lucide-icon",48),e.k0s(),e.j41(58,"div",37),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(45,Ft,e.bMT(3,17,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(5,19,"smallLogo"),e.B4B),e.R7$(3),e.Y8G("ngClass",e.lJ4(47,fs)),e.R7$(3),e.Y8G("ngClass",e.lJ4(48,fs)),e.R7$(3),e.Y8G("routerLink",e.eq3(49,Ft,e.bMT(14,21,"/admin/dashboard"))),e.R7$(5),e.JRh(e.bMT(19,23,"lang_auto_dashboard")),e.R7$(3),e.Y8G("routerLink",e.eq3(51,Ft,e.bMT(22,25,"/admin/testbank/document-management/1/0/1"))),e.R7$(5),e.SpI(" ",e.bMT(27,27,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(53,Ft,e.bMT(30,29,"/admin/testbank/document-management/0/0/1"))),e.R7$(5),e.JRh(e.bMT(35,31,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(55,Ft,e.bMT(38,33,"/admin/student/manage-classroom/0"))),e.R7$(5),e.JRh(e.bMT(43,35,"lang_auto_quan_ly_lop")),e.R7$(3),e.Y8G("routerLink",e.eq3(57,Ft,e.bMT(46,37,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,39,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(2),e.Y8G("routerLink",e.eq3(59,Ft,e.bMT(55,41,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(60,43,"lang_cms_business_dashboard_title"))}}function Wc(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",65),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",50),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_document_market_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Ft,e.bMT(3,6,"/document-market/list-documents/all-documents/1"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_document_market_title")))}function Zc(t,r){1&t&&(e.j41(0,"li",60),e.nI1(1,"mytranslate"),e.j41(2,"a",66),e.nI1(3,"navigationLocalize"),e.j41(4,"div",62),e.nrm(5,"lucide-icon",67),e.k0s(),e.j41(6,"div",56),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()()),2&t&&(e.FS9("matTooltip",e.bMT(1,4,"lang_notice_bank_question")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(10,Ft,e.bMT(3,6,"/admin/question-library/dashboard"))),e.R7$(5),e.JRh(e.bMT(8,8,"lang_notice_bank_question")))}function Ya(t,r){if(1&t&&(e.j41(0,"nav",51)(1,"a",52),e.nI1(2,"navigationLocalize"),e.nrm(3,"img",27),e.nI1(4,"getLinkLogo"),e.k0s(),e.nrm(5,"div",53),e.j41(6,"ul")(7,"li")(8,"a",54),e.nI1(9,"navigationLocalize"),e.j41(10,"div",55),e.nI1(11,"mytranslate"),e.nrm(12,"lucide-icon",36),e.k0s(),e.j41(13,"div",56),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()(),e.j41(16,"li")(17,"a",57),e.nI1(18,"navigationLocalize"),e.j41(19,"div",55),e.nI1(20,"mytranslate"),e.nrm(21,"lucide-icon",39),e.k0s(),e.j41(22,"div",56),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()(),e.j41(25,"li")(26,"a",58),e.nI1(27,"navigationLocalize"),e.j41(28,"div",55),e.nI1(29,"mytranslate"),e.nrm(30,"lucide-icon",41),e.k0s(),e.j41(31,"div",56),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.j41(34,"li")(35,"a",59),e.nI1(36,"navigationLocalize"),e.j41(37,"div",55),e.nI1(38,"mytranslate"),e.nrm(39,"lucide-icon",43),e.k0s(),e.j41(40,"div",56),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()(),e.j41(43,"li",60),e.nI1(44,"mytranslate"),e.j41(45,"a",61),e.nI1(46,"navigationLocalize"),e.j41(47,"div",62),e.nrm(48,"lucide-icon",45),e.k0s(),e.j41(49,"div",56),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s()()(),e.DNE(52,Wc,9,12,"li",63)(53,Zc,9,12,"li",63),e.j41(54,"li",60),e.nI1(55,"mytranslate"),e.j41(56,"a",64),e.nI1(57,"navigationLocalize"),e.j41(58,"div",62),e.nrm(59,"lucide-icon",48),e.k0s(),e.j41(60,"div",56),e.EFF(61),e.nI1(62,"mytranslate"),e.k0s()()()()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(68,Ft,e.bMT(2,28,"/admin/dashboard"))),e.R7$(2),e.Y8G("src",e.bMT(4,30,"smallLogo"),e.B4B),e.R7$(5),e.Y8G("routerLink",e.eq3(70,Ft,e.bMT(9,32,"/admin/dashboard"))),e.R7$(2),e.FS9("matTooltip",e.bMT(11,34,"lang_auto_dashboard")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(15,36,"lang_auto_dashboard")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(72,Ft,e.bMT(18,38,"/admin/testbank/document-management/1/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(20,40,"lang_auto_bai_tap")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(24,42,"lang_auto_bai_tap")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(74,Ft,e.bMT(27,44,"/admin/testbank/document-management/0/0/1"))),e.R7$(2),e.FS9("matTooltip",e.bMT(29,46,"lang_auto_de_thi")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.JRh(e.bMT(33,48,"lang_auto_de_thi")),e.R7$(3),e.Y8G("routerLink",e.eq3(76,Ft,e.bMT(36,50,"/admin/student/manage-classroom/0"))),e.R7$(2),e.FS9("matTooltip",e.bMT(38,52,"lang_auto_quan_ly_lop")),e.Y8G("matTooltipPosition","right"),e.R7$(4),e.SpI(" ",e.bMT(42,54,"lang_auto_quan_ly_lop")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(44,56,"lang_dashboard_teacher_management_box")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(78,Ft,e.bMT(46,58,"/admin/teacher-group/0/0"))),e.R7$(5),e.JRh(e.bMT(51,60,"lang_dashboard_teacher_management_box")),e.R7$(2),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.Y8G("ngIf",!n.isBusinessDomain),e.R7$(),e.FS9("matTooltip",e.bMT(55,62,"lang_cms_business_dashboard_title")),e.Y8G("matTooltipPosition","right"),e.R7$(2),e.Y8G("routerLink",e.eq3(80,Ft,e.bMT(57,64,"/business/dashboard"))),e.R7$(5),e.JRh(e.bMT(62,66,"lang_cms_business_dashboard_title"))}}let Wo=(()=>{var t;class r extends Ie.H{goBack(){this.commonService.myNavigationBySpecialQueryString(this.headerBackToLink)}openMenuMobile(){document.getElementById("toggle-menu")?.classList.add("mobile-menu--active")}closeMenuMobile(){document.getElementById("toggle-menu")?.classList.remove("mobile-menu--active")}initActiveNav(){this.activeTagHomeUrlList=["/admin/dashboard","/auth/account-setting","/notify","/admin/trash","/admin/testbank/create-website","/admin/testbank/create-website-result","/payment/azo-package","/super-role/","/azota-ads/","/auth/vip-packages","/azota-tools/"],this.activeTagHomeworkUrlList=["/admin/testbank/document-management/1","/admin/testbank/homework-results-list","/admin/testbank/config-homework","/admin/testbank/publish-document/1","/create-homework-success/","/admin/homework/add-new-homework","/admin/homework/mark-exercise"],this.activeTagExamUrlList=["/admin/testbank/matrix-list/","/admin/testbank/document-management/0","/admin/testbank/create-new-document","/admin/testbank/create-tree-document","/admin/testbank/exam-results-list","/admin/testbank/statistic/","/admin/testbank/action-online-offline/","/admin/testbank/analyze-knowledge/","/admin/testbank/config-exam-online","/admin/testbank/publish-document/0","/admin/testbank/add-student","/admin/testbank/test-review","/admin/testbank/create-exam-by-excel/","/admin/testbank/create-manual-offline-exam/","/admin/testbank/config-exam-offline/","/admin/testbank/update-exam/","/admin/testbank/update-offline-exam-code/","/admin/testbank/test-result-tracking/","/admin/testbank/download-file-print/","/admin/testbank/print-exam-and-ticket/","/admin/test-market/introduce","/admin/testbank/update-offline-exam","/admin/testbank/ai-create-exam/","/admin/testbank/create-exam-by-text/","/ladingpage/","/admin/testbank/update-capacity-exam","/admin/testbank/create-capacity-exam"],this.activeTagQuestionLibraryUrlList=["/admin/question-library/"],this.activeTagClassroomUrlList=["/admin/student"],this.activeTagGroupUrlList=["/admin/teacher-group"],this.activeTagDocumentMarketUrlList=["/document-market/"],this.activeTagBusinessUrlList=["/business/"],this.activeTagBusinessTableUrlList=["/table-honored"]}ngOnInit(){super.ngOnInit(),this.initActiveNav()}constructor(i,s,l){super(),(0,f.A)(this,"processNoticeService",void 0),(0,f.A)(this,"userService",void 0),(0,f.A)(this,"browserStorageService",void 0),(0,f.A)(this,"headerBackToLink",""),(0,f.A)(this,"headerTitle",""),(0,f.A)(this,"checkBackDialog",!1),(0,f.A)(this,"handleBackDialog",new e.bkB),(0,f.A)(this,"activeTagHomeUrlList",[]),(0,f.A)(this,"activeTagHomeworkUrlList",[]),(0,f.A)(this,"activeTagExamUrlList",[]),(0,f.A)(this,"activeTagClassroomUrlList",[]),(0,f.A)(this,"activeTagGroupUrlList",[]),(0,f.A)(this,"activeTagDocumentMarketUrlList",[]),(0,f.A)(this,"activeTagQuestionLibraryUrlList",[]),(0,f.A)(this,"activeTagBusinessUrlList",[]),(0,f.A)(this,"activeTagBusinessTableUrlList",[]),this.processNoticeService=i,this.userService=s,this.browserStorageService=l}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(vn),e.rXU(vt.R),e.rXU(yn.z))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["teacher-layout"]],inputs:{headerBackToLink:"headerBackToLink",headerTitle:"headerTitle",checkBackDialog:"checkBackDialog"},outputs:{handleBackDialog:"handleBackDialog"},features:[e.Vt3],ngContentSelectors:Pa,decls:18,vars:4,consts:[["BodyContentTpl",""],["TopBarTpl",""],["mobileMenuTpl",""],["DesktopMenuTpl",""],["id","azt-layout",1,"azt-layout"],[1,"azt-body"],[3,"ngTemplateOutlet"],[1,"flex","mt-[4.7rem]","md:mt-0"],[1,"content","relative"],[1,"top-bar"],[1,"azt-content"],[1,"block","w-full"],[1,"flex","items-center"],["azt-track-service","teacher-layout-txPc6qxNl",1,"btn","btn-transparent",3,"click"],["name","chevron-left","size","20",3,"ngClass"],[1,"azt-hidden","sm:block"],[1,"font-medium","flex-one","text-center"],[1,"azt-hidden","md:block"],[1,"dropdown","mr-2","sm:mr-4"],[3,"role"],[1,"dropdown","header-account-menu"],[3,"isTeacherDashboard"],["class","block md:hidden text-center pt-2 pb-2 font-medium",4,"ngIf"],[1,"block","md:hidden","text-center","pt-2","pb-2","font-medium"],["id","toggle-menu",1,"mobile-menu","md:hidden"],[1,"mobile-menu-bar"],["azt-track-service","teacher-layout-eJLgd2yvySJ",1,"flex","mr-auto",3,"routerLink"],["alt","Azota",1,"w-10",3,"src"],["azt-track-service","teacher-layout-kPh_SLquONL",1,"mobile-menu-toggler",3,"click"],["name","bar-chart-2","size","20",3,"ngClass"],[1,"scrollable"],["azt-track-service","teacher-layout-p3XQvJS7FuD",1,"mobile-menu-toggler",3,"click"],["name","circle-x","size","32",3,"ngClass"],[1,"scrollable__content","py-2"],["azt-track-service","teacher-layout-67rbSb3dLPU",1,"menu",3,"click","routerLink"],[1,"menu__icon"],["name","house","size","24"],[1,"menu__title"],["azt-track-service","teacher-layout-J8TmW2BMwsH",1,"menu",3,"click","routerLink"],["name","file-text","size","24"],["azt-track-service","teacher-layout-U1Xi4mAqmKv",1,"menu",3,"click","routerLink"],["name","folder","size","24"],["azt-track-service","teacher-layout-nV8vMAnzV7_",1,"menu",3,"click","routerLink"],["name","layers","size","24"],["azt-track-service","teacher-layout-27U-GtoLLKH",1,"menu",3,"click","routerLink"],["name","users","size","24"],[4,"ngIf"],["azt-track-service","teacher-layout-QY_BVpu7d",1,"menu",3,"click","routerLink"],["name","plug","size","24",2,"transform","rotate(45deg)"],["azt-track-service","teacher-layout-bYWbXjGnRw",1,"menu",3,"click","routerLink"],["name","book-open","size","24"],[1,"side-nav","side-nav--simple"],["azt-track-service","teacher-layout-VhZ51QnFiPG",1,"flex","items-center","pl-5","pt-4","relative",3,"routerLink"],[1,"side-nav__devider","my-6"],["azt-track-service","teacher-layout-qPpeOjyQiU6",1,"side-menu",3,"routerLink"],[1,"side-menu__icon",3,"matTooltip","matTooltipPosition"],[1,"side-menu__title"],["azt-track-service","teacher-layout-JuqCTNWN4XT",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-tB87TxUcBLf",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-FmXRsM0ZL-Y",1,"side-menu",3,"routerLink"],[3,"matTooltip","matTooltipPosition"],["azt-track-service","teacher-layout-dUjdIyx6m3F",1,"side-menu",3,"routerLink"],[1,"side-menu__icon"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["azt-track-service","teacher-layout-Qn0hMZhPEp",1,"side-menu",3,"routerLink"],["azt-track-service","teacher-layout-hn8q-bW1M",1,"side-menu",3,"routerLink"],[1,"side-menu",3,"routerLink"],["name","landmark","size","24"]],template:function(i,s){if(1&i&&(e.NAR(),e.j41(0,"div",4)(1,"div",5),e.eu8(2,6),e.j41(3,"div",7),e.eu8(4,6),e.j41(5,"div",8)(6,"div",9),e.eu8(7,6),e.k0s(),e.j41(8,"div",10),e.eu8(9,6),e.k0s()()()()(),e.DNE(10,Le,1,0,"ng-template",null,0,e.C5r)(12,Hc,19,9,"ng-template",null,1,e.C5r)(14,Uc,61,61,"ng-template",null,2,e.C5r)(16,Ya,63,82,"ng-template",null,3,e.C5r)),2&i){const l=e.sdS(11),d=e.sdS(13),m=e.sdS(15),_=e.sdS(17);e.R7$(2),e.Y8G("ngTemplateOutlet",m),e.R7$(2),e.Y8G("ngTemplateOutlet",_),e.R7$(3),e.Y8G("ngTemplateOutlet",d),e.R7$(2),e.Y8G("ngTemplateOutlet",l)}},dependencies:[mt.Wk,L.YU,L.bT,L.T3,Wt.oV,pt,kt.WGl,pi,Xc,Ne.F2,Ne.wp,Ne.ph],encapsulation:2})),r})();function vo(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"button",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.create())}),e.nrm(2,"i",7),e.EFF(3," Create new App "),e.k0s()()}}function yo(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",13)(1,"button",14),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.edit(s))}),e.nrm(2,"i",15),e.k0s()()}}function bo(t,r){if(1&t&&(e.j41(0,"div",8)(1,"a",9)(2,"div",10),e.nrm(3,"i"),e.j41(4,"div",11),e.EFF(5),e.k0s()()(),e.DNE(6,yo,3,0,"div",12),e.k0s()),2&t){const n=r.$implicit,i=r.index,s=e.XpG(2);e.BMQ("touranchor","azt-tour-"+(i+1)),e.R7$(),e.Mz_("href","/vi/admin/ai/app/",n.id,"",e.B4B),e.R7$(2),e.ZvI("",n.icon," text-4xl"),e.R7$(2),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngIf",s.isAdmin)}}function nr(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,vo,4,0,"div",2),e.j41(2,"div",3),e.DNE(3,bo,7,8,"div",4),e.k0s()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.isAdmin),e.R7$(2),e.Y8G("ngForOf",n.listApp)}}function or(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.editFlow())}),e.EFF(1,"Flow"),e.k0s()}}function xo(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",17)(2,"label",18),e.EFF(3,"App Name"),e.k0s(),e.j41(4,"input",19),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.name,s)||(l.curApp.name=s),e.Njj(s)}),e.k0s()(),e.j41(5,"div",17)(6,"label",18),e.EFF(7,"Run Async"),e.k0s(),e.j41(8,"input",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.pinTaskbar,s)||(l.curApp.pinTaskbar=s),e.Njj(s)}),e.k0s()(),e.j41(9,"div",17)(10,"label",18),e.EFF(11,"Description"),e.k0s(),e.j41(12,"textarea",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.desc,s)||(l.curApp.desc=s),e.Njj(s)}),e.k0s()(),e.j41(13,"div",17)(14,"label",18),e.EFF(15,"Icon"),e.k0s(),e.j41(16,"input",22),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.curApp.icon,s)||(l.curApp.icon=s),e.Njj(s)}),e.k0s()(),e.j41(17,"div",23)(18,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.close())}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.copyApp())}),e.EFF(21,"Copy"),e.k0s(),e.j41(22,"button",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.deleteApp())}),e.EFF(23,"Delete"),e.k0s(),e.j41(24,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.shareApp())}),e.EFF(25),e.k0s(),e.DNE(26,or,2,0,"button",26),e.j41(27,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.save())}),e.EFF(28),e.k0s()()()}if(2&t){let n;const i=e.XpG(2);e.R7$(4),e.R50("ngModel",i.curApp.name),e.R7$(4),e.R50("ngModel",i.curApp.pinTaskbar),e.R7$(4),e.R50("ngModel",i.curApp.desc),e.R7$(4),e.R50("ngModel",i.curApp.icon),e.R7$(9),e.JRh(i.curApp.share&&i.curApp.share>0?"Remove from Shared":"Share"),e.R7$(),e.Y8G("ngIf",null!==(n=null==i.curApp?null:i.curApp.id)&&void 0!==n&&n),e.R7$(),e.Y8G("disabled",i.saving),e.R7$(),e.JRh(i.curApp.id>0?"Save":"Create App")}}function ep(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,xo,29,8,"div",0),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curApp)}}let Ha=(()=>{var t;class r extends Ie.H{constructor(i,s,l){super(),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"isAdmin",!1),(0,f.A)(this,"isPasting",!1),(0,f.A)(this,"listApp",[]),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"saving",!1),this.auth=i,this.userSv=s,this.appService=l}ngOnInit(){var i=this;document.addEventListener("paste",function(){var s=(0,xe.A)(function*(l){if(!i.isPasting){i.isPasting=!0;try{i.listApp.push({icon:"bx bx-loader-circle",name:"Creating..."});const d=yield navigator.clipboard.readText();if(d.indexOf('"icon"')>0&&d.indexOf('"config"')>0){l.preventDefault();let m=JSON.parse(d);i.appService.save(m).subscribe(_=>{i.isPasting=!1,i.loadApp()})}}catch(d){i.isPasting=!1,console.error("Failed to read from clipboard: ",d)}}});return function(l){return s.apply(this,arguments)}}()),this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),s=>{this.loadApp()})}loadApp(){this.isAdmin=1==this.userSv.getUserObj().id,this.isAdmin?this.appService.getList().subscribe(i=>{this.listApp=i}):this.appService.getListShare().subscribe(i=>{this.listApp=i})}edit(i){this.curApp=i}create(){this.curApp={id:0,config:"[]",name:"",icon:""}}editFlow(){window.location.href="/vi/admin/ai/flow/"+this.curApp.id}save(){this.curApp&&(this.saving=!0,this.appService.save(this.curApp).subscribe(i=>{0==this.curApp.id?window.location.href="/vi/admin/ai/flow/"+i.data:(this.saving=!1,this.close(),this.loadApp())}))}close(){this.curApp=void 0}deleteApp(){this.curApp&&confirm(`Delete this app? [${this.curApp.name}]`)&&this.appService.delete(this.curApp).subscribe(i=>{this.close(),this.loadApp()})}copyApp(){var i=this;return(0,xe.A)(function*(){if(!i.curApp)return;let s=JSON.parse(JSON.stringify(i.curApp));s.id=0;try{yield navigator.clipboard.writeText(JSON.stringify(s))}catch(l){console.error("Failed to copy text: ",l)}})()}shareApp(){this.curApp&&confirm(`Share this app to Public Library mean everyone can access it. Do you want to share? [${this.curApp.name}]`)&&(this.curApp.share=this.curApp.share&&this.curApp.share>0?0:1,this.appService.share(this.curApp).subscribe(i=>{alert("Share successful! We will review you app soon.")}))}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Bt.u),e.rXU(vt.R),e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[[4,"ngIf"],["class","box p-3 w-1/2 mx-auto mt-3",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-4 md:col-span-2 intro-y h-full",4,"ngFor","ngForOf"],[1,"text-center"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"bx","bx-plus","mr-2"],[1,"col-span-4","md:col-span-2","intro-y","h-full"],["azt-track-service","dashboard-main-rF6MSAArUsY",3,"href"],[1,"box","p-8","zoom-in","h-full","text-center"],[1,"font-medium","text-center","text-base","mt-3"],["class","text-center mt-2",4,"ngIf"],[1,"text-center","mt-2"],[1,"p-0",3,"click"],[1,"bx","bx-pencil"],[1,"box","p-3","w-1/2","mx-auto","mt-3"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","App Name",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","1 or 0",1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","bx bx-pencil",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-right"],["type","button",1,"btn","btn-label-secondary","mr-3",3,"click"],["type","button",1,"btn","text-danger","btn-label-secondary","mr-3",3,"click"],["type","button","class","btn btn-label-secondary mr-3",3,"click",4,"ngIf"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click","disabled"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout"),e.DNE(1,nr,4,2,"div",0)(2,ep,2,1,"div",1),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",!s.curApp),e.R7$(),e.Y8G("ngIf",s.curApp))},dependencies:[Ve.b,Wo,L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS]})),r})(),ir=(()=>{var t;class r extends Ie.H{ngOnInit(){super.ngOnInit()}constructor(){super()}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-demo"]],features:[e.Vt3],decls:0,vars:0,template:function(i,s){},encapsulation:2})),r})();var Jc=ue(345);let ms=(()=>{var t;class r{constructor(i){(0,f.A)(this,"sanitized",void 0),this.sanitized=i}transform(i){return this.sanitized.bypassSecurityTrustHtml(i)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Jc.up,16))}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"safeHtml",type:t,pure:!0,standalone:!0})),r})(),St=(()=>{var t;class r{constructor(i){(0,f.A)(this,"sanitized",void 0),this.sanitized=i}transform(i,s,l){if(!i)return i;let d=s??200;if(i.length<d)return i;let m=i;return l&&(m=m.replaceAll(l,"")),m.substring(0,d)+"..."}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Jc.up,16))}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"trunc",type:t,pure:!0,standalone:!0})),r})(),rr=(()=>{var t;class r{transform(i){if(isNaN(i)||i<0)return"00:00";i=Math.round(i);const s=Math.floor(i/60),l=i%60;return`${s<10?"0"+s:s.toString()}:${l<10?"0"+l:l.toString()}`}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275pipe",e.EJ8({name:"secondsToTime",type:t,pure:!0,standalone:!0})),r})();class Pe{static renderMathInElement(r){MathJax.typesetPromise([r]).then(()=>{})}static markdownToHtml(r){let n=document.createElement("div");n.innerHTML=r;let i=new showdown.Converter({headerLevelStart:3,tables:!0});return MathJax.typesetPromise([n]).then(()=>{}),i.makeHtml(n.innerHTML)}static parseIncompleteJson(r){if(!r||""==r.trim()||!/^[{[].*/.test(r.trim()))return r;r.startsWith("```json")&&(r=r.substring(7).trim()),r.endsWith("```")&&(r=r.substring(0,r.length-3));try{return JSON.parse(r)}catch{}r.endsWith(",")&&(r=r.substring(0,r.length-1));let n=[],i=['"',"[","{"],s=['"',"]","}"];for(let l=0;l<r.length;l++){if(l>0&&"\\"==r.charAt(l-1))continue;let m=r.charAt(l);if('"'==n[n.length-1]){'"'==m&&n.splice(n.length-1);continue}if(i.includes(m)){n.push(m);continue}let _=s.indexOf(m);_>=0&&n[n.length-1]==i[_]&&n.splice(n.length-1)}if(n.length>0)for(let l=n.length-1;l>=0;l--)r+=s[i.indexOf(n[l])];try{return JSON.parse(r)}catch{}return null}static fileToBase64(r){return new Promise((n,i)=>{const s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=()=>{i(new Error("Failed to convert file to Base64."))},s.readAsDataURL(r)})}static base64ToObjectURL(r,n){const i=atob(r),s=[];for(let d=0;d<i.length;d+=512){const m=i.slice(d,d+512),_=new Array(m.length);for(let v=0;v<m.length;v++)_[v]=m.charCodeAt(v);const g=new Uint8Array(_);s.push(g)}const l=new Blob(s,{type:n});return URL.createObjectURL(l)}static distinctArray(r){return Array.from(new Set(r))}static getTextFromMarkdown(r){return r.replace(/(?:__|[*#])|\[(.*?)\]\(.*?\)|<[^>]*>/g,"$1").replace(/\n+/g," ").trim()}static getFileExt(r){let n=r.split(".");return n.length>1?n[n.length-1].trim().toLowerCase():""}static isImageFile(r){if(!r)return!1;const i=r.slice((Math.max(0,r.lastIndexOf("."))||1/0)+1).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff"].includes(`.${i}`)}static parseJson(r){return JSON.parse(r.replaceAll(/},\s*]/g,"}]"))}static minusToCamelCase(r){return r.replace(/-([a-z0-9])/g,(n,i)=>i.toUpperCase())}static replaceAllBase64Urls(r,n=""){return r.replace(/data:(?:image\/\w+|audio\/\w+|video\/\w+);base64,[\w\+/0-9]+(?:=[\w\+/0-9]{2})?(?:=[\w\+/0-9])?/,n)}static loadScript(r){return new Promise((n,i)=>{const s=document.createElement("script");s.src=r,s.type="text/javascript",s.async=!0,s.onload=()=>{n()},s.onerror=l=>{console.error(`Failed to load script from ${r}`,l),i(new Error(`Script load error: ${r}`))},document.head.appendChild(s)})}static downloadTextAsFile(r,n){const i=n??this.getFormattedDate(),s=new Blob([r],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download=i,document.body.appendChild(l),l.click(),document.body.removeChild(l)}static uploadTextFile(r){const n=document.createElement("input");n.type="file",n.accept=".txt",n.addEventListener("change",i=>{const s=i.target;if(!s.files||0===s.files.length)return;const l=s.files[0],d=new FileReader;d.onload=m=>{const _=m.target?.result;r(_)},d.readAsText(l)}),n.click()}static getFormattedDate(){const r=new Date;return`${String(r.getDate()).padStart(2,"0")}-${String(r.getMonth()+1).padStart(2,"0")}-${r.getFullYear()}-${String(r.getHours()).padStart(2,"0")}-${String(r.getMinutes()).padStart(2,"0")}.txt`}static wrapWords(r,n){const i=r.split(" ");let s="",l=0;return i.forEach((d,m)=>{s+=d+" ",l++,l===n&&(s+="\n",l=0)}),s.trim()}static removeVietnameseAccents(r){return r.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}static zipFiles(r,n,i){var s=this;return(0,xe.A)(function*(){const l=new JSZip;let d=0;for(const _ of r){if(_.isText)l.file(_.filename,_.url);else{const v=(yield s.fetchUrlAsBase64(_.url)).split(",")[1];l.file(_.filename,v,{base64:!0})}d++,i&&i(d)}return yield l.generateAsync({type:"blob"})})()}static fetchUrlAsBase64(r){return(0,xe.A)(function*(){const i=yield(yield fetch(r)).blob();return new Promise((s,l)=>{const d=new FileReader;d.onloadend=()=>s(d.result),d.onerror=l,d.readAsDataURL(i)})})()}static urlToFile(r,n){var i=this;return(0,xe.A)(function*(){let l=(yield i.fetchUrlAsBase64(r)).split(",")[1];const d=atob(l);let m=d.length;const _=new Uint8Array(m);for(;m--;)_[m]=d.charCodeAt(m);let g=Pe.getContentType(n);return new File([_],n,{type:g})})()}static getContentType(r){const n=r.split(".").pop()?.toLowerCase();return n?{txt:"text/plain",script:"text/json",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",mp3:"audio/mpeg",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",zip:"application/zip",rar:"application/x-rar-compressed"}[n]:void 0}static convertToTitleCase(r){return r.toLowerCase().replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}static toCamelCase(r){return Pe.removeVietnameseAccents(r).replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,(n,i)=>0===i?n.toLowerCase():n.toUpperCase()).replace(/[^a-zA-Z0-9]+/g,"")}static createDemoDataForJsonSchema(r){return function i(s){switch(s.type){case"string":return"demo string";case"number":return 42;case"boolean":return!0;case"object":const l={};if(s.properties)for(const d in s.properties)l[d]=i(s.properties[d]);return l;case"array":return[i(s.items)];default:return null}}(JSON.parse(r))}static compileTemplate(r,n){let i=r;const s=[...i.matchAll(/\$\(([a-zA-Z]+):([^\$]+)\)\$/g)],l=[];for(const b of s){i=i.replaceAll(b[0],"").trim();const C=b[2].split("|").map(x=>this.compileTemplate(x.trim(),n));for(let x=0;x<C[0].length;x++){const I=[],T=[];for(const R of C)T.push(R[x]);I.push(b[1].trim()),I.push(...T),l.push(I)}}i=i.replaceAll(/\*for="([a-zA-Z0-9_-]+) of \{([a-zA-Z0-9._-]+)\}"/g,'id="sys___loop-node" data-for="$2=>$1"'),i=i.replaceAll(/\*for="([a-zA-Z0-9_-]+) of ([a-zA-Z0-9._-]+)"/g,'id="sys___loop-node" data-for="$2=>$1"');let d=document.createElement("div");for(d.innerHTML=i;;){let b=d.querySelector("#sys___loop-node");if(!b)break;let C=b.getAttribute("data-for").split("=>");b.removeAttribute("data-for"),b.removeAttribute("id");let x=C[0],I=C[1],T=C[0].split("."),R=[];if(1==T.length)R=JSON.parse(n.get(C[0])??"[]");else{let H=JSON.parse(n.get(T[0]));for(var m=1;m<T.length;m++)H=H[T[m]];R=H??[]}let E=b.parentNode,$=b.outerHTML,V=$.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),M=[];for(let H of V)M.push(H[1]);let Y=-1;for(let H of R){Y++;let X=$;for(let U of M){if("index"==U){X=X.replaceAll("{index}",Y+"");continue}let ie,ce=U.split(".");for(let de of ce){if(!ie&&de==C[1]){ie=H;continue}let ae=!1;de.endsWith("[index]")&&(de=de.split("[")[0],ae=!0),ie&&(ie=ie[de]),ie&&ae&&(ie=ie[Y])}ie||(ie=""),X=X.replaceAll(`{${U}}`,ie)}X=X.replaceAll("[index]",`[${Y}]`),X=X.replaceAll(`[${I}]`,`${x}[${Y}]`);let te=document.createElement("div");te.innerHTML=X,E?.insertBefore(te.firstChild,b)}E?.removeChild(b)}let _=d.innerHTML,g=_.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g),v=[];for(let b of g)v.push(b[1]);for(let b of v){let C=b.split(".");if(C.length>1){let x=JSON.parse(n.get(C[0])),I=0;for(let T of C)0!=I?(x=x[T],I++):I++;_=_.replaceAll(`{${b}}`,x??"")}else _=_.replaceAll(`{${b}}`,n.get(C[0])??"")}for(const b of l)"replace"===b[0]&&(_=_.replaceAll(b[1],b[2]));return _}static extractProperties(r,n){return r?Object.keys(r).flatMap(i=>{const s=r[i],l=Array.isArray(s)?"array":typeof s,d={name:i,type:l,level:n};return"object"!==l||null===s||Array.isArray(s)?[d]:[d,...this.extractProperties(s,n+1)]}):[]}}var Bn=ue(8910),tp=ue(5084),Wa=ue(2102),hs=ue(9631);class fi{readUrl(r){return new Promise(n=>{Pe.urlToFile(r,"filename").then(i=>{let s=this.readFile(i);n(s)})})}}class Za{constructor(r){(0,f.A)(this,"iamges",void 0),this.iamges=r}render(r){let n=r;for(let i of this.iamges){let s=i.cssStyle?i.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";n=n.replaceAll("[img:$"+i.id+"$]",`<img id="${i.id}" src="${i.link}" style="${s}">`)}return n}}class Kc{constructor(r,n=!1){(0,f.A)(this,"mathMap",void 0),(0,f.A)(this,"raw",void 0),this.mathMap=r,this.raw=n}render(r){let n=r,s=n.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let d=l.value[0],m=l.value[1],_=this.mathMap.get(m),g="";if(_){let v=this.isPureTextMathML(_.str);if(""!=v)g=v;else{const b=document.createElement("span");b.id=m,b.innerHTML=this.cleanMathML(_.str),this.raw&&_.raw&&b.setAttribute("data-azt-math-raw",_.raw),g=b.outerHTML}}n=n.replace(d,g)}return n}cleanMathML(r){let n=r;return n=n.replaceAll('display="block"',""),n=n.replaceAll(/<\?xml[^>]+\?>/g,""),n=n.replaceAll(/\s*xmlns="[^"]+"/g,""),n=n.replaceAll("\n",""),n}isPureTextMathML(r){let i=(new DOMParser).parseFromString(r,"application/xml");if(i.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let s=i.documentElement.children,l=["mi","mn","mo","ms","mspace","mtext"],d="";for(let _=0;_<s.length;_++){let g=s[_];if(l.indexOf(g.tagName.toLowerCase())<0)return"";d+=g.textContent?.trim()??""}return/^[0-9.,-]+$/.test(d.replaceAll("\u2212","-"))?d:""}}class to{render(r){let n=r;n=n.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let s=n.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let d=l.value[0],m=l.value[1],_=d.split(":")[0].split("!");_.shift(),_.filter(g=>"a"==g).length>0&&(m=m.toUpperCase());for(let g=_.length-1;g>=0;g--){let v=_[g];m="hl"==v||"cl"==v?`<span class='cl'>${m}</span>`:`<${v}>${m}</${v}>`}n=n.replace(d,m)}return n}clean(r){let n=r.split("\n"),i=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,s=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,l=[],d=0;for(let _ of n){let g=_;s.test(n[d].replaceAll(i,"$1"))&&(n[d]=n[d].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),g=n[d]);let C,v=g.matchAll(i),b=0;for(;;){let x=v.next();if(x.done)break;let I=x.value[0],T=I.indexOf(":"),R=I.substring(1,T),$=(x.value.index??0)-b,V=$+x.value[1].length;C&&$==C.e&&C.style==R?C.e=V:(C={lineIdx:d,s:$,e:V,style:R},l.push(C)),b+=T+4}n[d]=g.replaceAll(i,"$1"),d++}return{res:n.join("\n"),styles:l}}applyStyle(r,n,i=!1){for(let s=r.length-1;s>=0;s--){let l=r[s],d=n.filter(_=>_.lineIdx==l.lineIdx&&this.isRangeIntersec(_.s,_.e,l.s,l.e??999999)),m=[];for(let _ of d){let g=_.s>=l.s?_.s:l.s,v=_.e<=(l.e??9999999)?_.e:l.e??9999999;g-=l.s,v-=l.s;let b=i?_.style:_.style.replaceAll("!hl","").replaceAll("!cl","");g<v&&""!=b&&l.text&&""!=(l.text.substring(g,v)??"").trim()&&(m.push({idx:g,str:`[${b}:$`}),m.push({idx:v,str:"$]"}))}m.sort((_,g)=>{let v=g.idx-_.idx;return 0!=v?v:g.str.length-_.str.length});for(let _ of m)l.text=l.text?.substring(0,_.idx)+_.str+l.text?.substring(_.idx)}}getAnsStyle(r,n,i){if(!n)return"";let s=[],l={...n};this.applyStyle([l],i,!0),l.text!=n.text&&""==l.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&s.push("!fl");for(let _ of i)_.lineIdx==n.lineIdx&&_.s<=n.b&&n.b<_.e&&s.push(_.style);let m=s&&s.length>0?s.join():"";return m.indexOf("!u")>=0||m.indexOf("!b")>=0||m.indexOf("!hl")>=0||m.indexOf("!cl")>=0||m.indexOf("!fl")>=0?m:""}isRangeIntersec(r,n,i,s){return r<=i&&i<=n||i<=r&&r<=s}getStyleScore(r){let n=0;return r.indexOf("!cl")>=0&&(n+=8),r.indexOf("!u")>=0&&(n+=4),r.indexOf("!i")>=0&&(n+=2),r.indexOf("!b")>=0&&(n+=1),n}}class Ja{constructor(r){(0,f.A)(this,"infos",void 0),this.infos=r}render(r,n="\n"){let s=r.split(n),l=[],d=[],m="";for(let _ of s){let g=_;if(g.trim().startsWith("[*")&&g.trim().endsWith("*]")){let v=g.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(v.value){d.length>0&&(l.push(`<table class="q-table ${m}">${d.join("")}</table>`),d=[]);let C=this.infos.get(+v.value[1]);m=C&&C.borderTopSize>0?"border-1":"border-0",g=g.replace(v.value[0],"[*")}let b=g.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");b=b.replaceAll("|","</td><td>"),d.push(b)}else d.length>0&&(l.push(`<table class="q-table ${m}">${d.join("")}</table>`),d=[]),l.push(g)}return d.length>0&&l.push(`<table class="q-table ${m}">`+d.join("")+"</table>"),l.join(n)}}class sr extends fi{constructor(r=!0){super(),(0,f.A)(this,"wmf",void 0),r&&(this.wmf=new WMFConverter)}readFile(r){return new Promise(n=>{this.read(r,!1,i=>{n(i.text)})})}readFileInputEventAsArrayBuffer(r,n){let i=new FileReader;i.onload=function(s){n(s.target.result)},i.readAsArrayBuffer(r)}read(r,n,i,s,l){let d=this,m=(_,g)=>{s&&s(_,g,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(r,function(_){azotaDocx.readDocx(_,m).then(function(g){console.log(g);for(let C of g.data)"img"==C.type&&("image/x-wmf"==C.contentType||"image/x-emf"==C.contentType?d.convert(C):C.value="data:"+C.contentType+";base64, "+C.value,!C.cssStyle&&C.height&&C.width&&"EMU"==C.measureUnit)&&(C.cssStyle=`width:${+C.width/12700}pt;height:${+C.height/12700}pt;margin-top:0px;`);let v=new Map,b=0;for(let C of g.data)"img"==C.type&&C.cropInfo&&v.set(b,1),b++;if(i&&0==v.size)i(d.parse(g,n));else{b=0;for(let C of g.data){if("img"==C.type&&C.cropInfo){const x=b,I=document.createElement("img");I.src=C.value,I.onload=()=>{d.cropImage(C,I),v.delete(x),0==v.size&&i&&i(d.parse(g,n))},I.onerror=()=>{v.delete(x),0==v.size&&i&&i(d.parse(g,n))}}b++}}}).catch(g=>{l&&l(g.message)})})}parseText(r,n=!1){let i=r.split("\n");i=this.processUnderlineAns(i);let s=i.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),l=s,d=new to,m=[];if(n){let _=d.clean(s);s=_.res,m=_.styles}else s=d.render(s);return{text:s,orgText:l,images:[],mathMap:new Map,tableMap:new Map,styles:m}}parse(r,n=!1){let i="",s=[],l=new Map,d=new Map,m=[];for(let x of r.data)if("img"==x.type)s.push({id:x.key,link:x.value,cssStyle:x.cssStyle}),x.cssStyle&&x.cssStyle.split(";").length>2&&m.push([`^\\[img:\\$${x.key}\\$\\]`,`[img:$${x.key}$]\n`]);else if("mathml"==x.type){let I=+x.key.split("_")[1];l.set(x.key,{id:I,str:x.value,raw:x.docx})}else"table"==x.type&&d.set(x.position,x);let _=[],g=-1;for(let x of r.lines){if(g++,0==x.length)continue;let I="";if(Array.isArray(x[0])&&Array.isArray(x[x.length-1])&&Array.isArray(x[Math.floor(x.length/2)])){let R=r.data.filter(V=>V.position==g&&"table"==V.type)[0],E=R?`!!${R.position}!!:`:"";I=R&&+R.borderBottomSize>0||_.length>0&&_[_.length-1].startsWith("[*")?`[*${E} `+x.map(V=>V.map(M=>M.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":x.map(V=>V.map(M=>M.join("")).join("\n")).join(" \t ")}else I=x.join("");for(let R of m)I=I.replaceAll(new RegExp(R[0],"g"),R[1]);let T=I.split("\n");for(let R of T)_.push(R)}_=this.processUnderlineAns(_),i=_.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let v=i,b=new to,C=[];if(n){let x=b.clean(i);i=x.res,C=x.styles}else i=b.render(i),i=new Za(s).render(i),i=new Kc(l).render(i),i=new Ja(d).render(i);return{text:i,orgText:v,images:s,mathMap:l,tableMap:d,styles:C}}processUnderlineAns(r){let n=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,i=0,s=[];for(let l of r){let d=l;if(d=d.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(d)&&""!=d.trim()&&i>0){d=d.replaceAll(/[\s.]+/g,"");let m=d.indexOf("*"),_=0;if(d=d.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(d)>=0){let g=r[i-1].match(n);if(g&&d.length==g.length){for(let b of g)r[i-1]=r[i-1].replace(b,b.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${m==_?"*":""}${d.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=r[i-1],d=d.substring(1),_++;i++;continue}}}s.push(l),i++}return s}convert(r){return new Promise(n=>{if("image/x-wmf"==r.contentType)r.value=this.wmf.toPNG("data:"+r.contentType+";base64, "+r.value),n();else{let l=new ToContext2D(0,1),d=this.decodeBase64(r.value);try{FromEMF.Parse(d,l)}catch{}let m=this.scaleCanvas(l.canvas,200,200);r.value=m.toDataURL(),n()}})}decodeBase64(r){return Uint8Array.from(atob(r),function(n){return n.charCodeAt(0)})}scaleCanvas(r,n,i){let s=document.createElement("canvas");return s.width=n,s.height=i,s.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,n,i),s}cropImage(r,n){if(!r.cropInfo)return;let i=r.cropInfo.left?+r.cropInfo.left:0,s=r.cropInfo.top?+r.cropInfo.top:0,l=r.cropInfo.right?+r.cropInfo.right:0,d=r.cropInfo.bottom?+r.cropInfo.bottom:0;if(i+s+l+d==0)return;let m=n.width,_=n.height,g=i*m/1e5,v=s*_/1e5,x=m-l*m/1e5-g,I=_-d*_/1e5-v;const T=document.createElement("canvas");T.width=x,T.height=I,T.getContext("2d")?.drawImage(n,g,v,x,I,0,0,x,I),r.value=T.toDataURL()}}class Ka extends fi{readFile(r){return new Promise((n,i)=>{const s=new FileReader;s.onload=()=>{s.result?n(`<img src="${s.result}">`):i(new Error("Failed to read file."))},s.onerror=()=>{i(new Error("Error occurred while reading the file."))},s.readAsDataURL(r)})}}class ar extends fi{readFile(r){return new Promise(n=>{const i=new FileReader;i.onload=function(){var s=(0,xe.A)(function*(l){n("")});return function(l){return s.apply(this,arguments)}}(),i.readAsArrayBuffer(r)})}}function gs(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function qc(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function ln(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function mi(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function qa(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,qc,7,0,"div",13)(4,ln,3,4,"span",14)(5,mi,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(s))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",i.isReading),e.R7$(),e.Y8G("ngIf",!i.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!i.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let lr=(()=>{var t;class r{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",s=>{if(this.err="",s.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,d={file:s,name:this.name,content:""};switch(this.files.push(d),Pe.getFileExt(s.name)){case"pdf":_=new ar;break;case"docx":_=new sr;break;case"jpg":case"png":case"jpeg":_=new Ka}this.isReading=!0,this.onStartReading.emit(),_?.readFile(s).then(g=>{d.content=g,this.isReading=!1,this.onAddFile.emit(d)})})},200)}remove(i){this.files.splice(i,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(i,s){1&i&&(e.DNE(0,gs,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,qa,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&i&&(e.Y8G("ngIf",s.err),e.R7$(),e.Mz_("id","dropzone-basic-",s.name,""),e.R7$(8),e.Y8G("ngForOf",s.files))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.qT,N.cb,N.cV,St]})),r})();const np=["startTime"];function Qa(t,r){if(1&t&&(e.j41(0,"div",5),e.nrm(1,"div",6),e.nI1(2,"safeHtml"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,n.value.desc),e.npT)}}function el(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function cr(t,r){if(1&t&&(e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,el,1,0,"i",8),e.k0s(),e.nrm(4,"input",9),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function vs(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Qc(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,vs,1,0,"i",8),e.k0s(),e.j41(4,"div")(5,"mat-form-field",11)(6,"input",12),e.bIt("click",function(s){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(s.stopPropagation())}),e.k0s(),e.j41(7,"a",13),e.bIt("click",function(s){return e.eBV(n),e.XpG(2).openDateTimePicker(),e.Njj(s.stopPropagation())}),e.nrm(8,"i",14),e.k0s(),e.j41(9,"ngx-mat-datetime-picker",15,0)(11,"ngx-mat-datepicker-actions")(12,"a",16),e.EFF(13,"Cancel"),e.k0s(),e.j41(14,"a",17),e.EFF(15,"OK"),e.k0s()()()()()()}if(2&t){const n=e.sdS(10),i=e.XpG().$implicit,s=e.XpG();e.R7$(2),e.SpI(" ",i.value.label," "),e.R7$(),e.Y8G("ngIf",i.value.desc),e.R7$(3),e.FCK("name","",s.nodeData.id,"-",i.key,""),e.Y8G("ngxMatDatetimePicker",n)("value",i.value.data),e.R7$(3),e.Y8G("touchUi",!0)("showSeconds",!1)}}function op(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function ip(t,r){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function rp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,op,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,ip,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function tl(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function sp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,tl,1,0,"i",8),e.k0s(),e.j41(4,"textarea",21),e.bIt("input",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.autoResize(s.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function ap(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function lp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,ap,1,0,"i",8),e.k0s(),e.j41(4,"app-file-control",22),e.bIt("onStartReading",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onStartReadingFile())})("onAddFile",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.onAddFile(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",i.nodeData.id+"-"+n.key)}}function cp(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",10),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function up(t,r){if(1&t&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function eu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"label",7),e.EFF(2),e.DNE(3,cp,1,0,"i",8),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,up,2,2,"option",19),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",i.lstKeys)}}function dp(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Qa,3,3,"div",4)(2,cr,5,6,"div",4)(3,Qc,16,9,"div",4)(4,rp,6,5,"div",4)(5,sp,6,6,"div",4)(6,lp,5,3,"div",4)(7,eu,6,5,"div",4),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}let pp=(()=>{var t;class r{set data(i){this.nodeData=i}constructor(i,s){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"startTime",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB),this.ngZone=i,this.appService=s}ngOnInit(){let i=!1;for(let s of this.nodeData.conf)s.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+s.key)??"","key"==s.value.type&&(i=!0);i&&this.appService?.listKeys().subscribe(s=>{this.lstKeys=s}),setTimeout(()=>{document.querySelectorAll(".form-node-renderred textarea").forEach(l=>{this.autoResize(l)})},200)}autoResize(i){i.style.height="50px",i.style.overflowY="hidden",i.style.height=i.scrollHeight+10+"px"}showInfo(i){}openDateTimePicker(){this.startTime?.open()}onAddFile(i){this.onUploaded.emit(i)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],viewQuery:function(i,s){if(1&i&&e.GBs(np,5),2&i){let l;e.mGM(l=e.lsd())&&(s.startTime=l.first)}},inputs:{appId:"appId",data:"data"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[["startTime",""],[1,"form-node-renderred"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[3,"innerHTML"],[1,"form-label"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],["appearance","outline"],["type","text","matInput","",3,"click","ngxMatDatetimePicker","value","name"],["matSuffix","",2,"font-size","18px",3,"click"],[1,"bx","bx-calendar"],[3,"touchUi","showSeconds"],["ngxMatDatepickerCancel","",1,"mr-3"],["ngxMatDatepickerApply",""],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(i,s){1&i&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,dp,8,7,"div",3),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("ngForOf",s.nodeData.conf))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,lr,ms,Bn.T_,Wa.RG,Wa.rl,Wa.yw,hs.fS,hs.fg,Bn.Hw,Bn.m7,Bn.yF,Bn.HF,Bn.gx,Bn.Uq,tp.X6]})),r})();function fp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",3)(1,"img",4),e.bIt("mousedown",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.setSelection(s))}),e.k0s()()}if(2&t){const n=r.$implicit,i=r.index,s=e.XpG();e.ZvI("scene-layer scene-mode-player-",s.ratio916?"9-16":"16-9",""),e.Mz_("id","dom-",n.objName,""),e.R7$(),e.ZvI("s-element player scene-mode-player-",s.ratio916?"9-16":"16-9"," h-100"),e.Y8G("src",s.ratio916?s.demo916[i]:s.demo169[i],e.B4B)}}function mp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"span",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.play())}),e.k0s(),e.j41(2,"span",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.resetPos())}),e.k0s(),e.j41(3,"span",6),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.edit())}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px cursor-pointer me-3"),e.R7$(2),e.ZvI("tf-icons bx bx-",n.isEditMode?"x":"pencil"," bx-22px cursor-pointer me-3")}}let ys=(()=>{var t;class r{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"mode","editor"),(0,f.A)(this,"lstObj",[]),(0,f.A)(this,"animName",""),(0,f.A)(this,"ratio916",!1),(0,f.A)(this,"demo169",["/ai-mod-assets/images/demo-16-9.png","/ai-mod-assets/images/demo-16-9-1.png"]),(0,f.A)(this,"demo916",["/ai-mod-assets/images/demo-9-16.png","/ai-mod-assets/images/demo-9-16-1.png"]),(0,f.A)(this,"info",""),(0,f.A)(this,"projectId","ObjAnim"),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"isEditMode",!1),(0,f.A)(this,"animObjs",[]),(0,f.A)(this,"canMove",{}),(0,f.A)(this,"startPos",[0,0]),(0,f.A)(this,"curTranslate",[]),(0,f.A)(this,"isDrag",!1),(0,f.A)(this,"obj",void 0),(0,f.A)(this,"curIdx",0)}set conf(i){let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("anim-editor");if(l){let d=JSON.parse(l.innerHTML);this.varname=l.getAttribute("var-name")??"",this.animName=d.animName,this.lstObj=d.listObj}}ngAfterViewInit(){localStorage.removeItem("theatre-0.4.persistent");let s=!1;this.projectId="ObjAnim"+(new Date).getTime();try{Theatre.studio.onSelectionChange(l=>{this.obj=l[0],this.obj&&(this.curIdx=this.lstObj.findIndex(d=>d.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),s=!0}catch{Pe.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js").then(()=>{Theatre.studio.initialize(),Theatre.studio.onSelectionChange(d=>{this.obj=d[0],this.obj&&(this.curIdx=this.lstObj.findIndex(m=>m.objName==this.obj.address.objectKey))}),Theatre.studio.ui.hide(),this.loadAnim()})}s&&this.loadAnim(),this.info=JSON.stringify(this.lstObj,null,2)}setSelection(i){Theatre.studio.setSelection([this.animObjs[i]])}play(){this.sheet&&(this.isPlaying?(this.isPlaying=!1,this.sheet.sequence.pause()):(this.isPlaying=!0,this.sheet.sequence.play({iterationCount:1/0})))}edit(){this.isEditMode?(this.isEditMode=!1,Theatre.studio.ui.hide()):(this.isEditMode=!0,Theatre.studio.ui.restore())}loadAnim(){localStorage.removeItem("theatre-0.4.persistent");let i={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:2.5,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]};this.curIdx=0,this.curTranslate=[];let l=0;for(let _ of this.lstObj){this.canMove[_.objName]={},this.curTranslate.push([0,0]);let g={};for(let x of _.propAnims)g[x.propName]=x.keyframes.length>0?x.keyframes[0].value:0,"x"==x.propName&&(this.canMove[_.objName].x=!0),"y"==x.propName&&(this.canMove[_.objName].y=!0);i.sheetsById.Sheet1.staticOverrides.byObject[_.objName]=g;let v={},b={},C=0;for(let x of _.propAnims){let I=`${C}-vfsKxxzE`,T={type:"BasicKeyframedTrack",__debugName:`${_.objName}:["${x.propName}"]`,keyframes:[]},R=0,E=[];for(let $ of x.keyframes)0==R&&E.push([$.cubicBezier[0],$.cubicBezier[1]]),E.push([$.cubicBezier[0],$.cubicBezier[1]]),E.push([$.cubicBezier[2],$.cubicBezier[3]]),T.keyframes.push({id:`${l}F${C}zl_kv${R}V`,position:$.timePosition,connectedRight:!0,handles:[E[2*R][0],E[2*R][1],E[2*R+1][0],E[2*R+1][1]],value:$.value,type:"bezier"}),R++;v[I]=T,b[`["${x.propName}"]`]=I,C++}i.sheetsById.Sheet1.sequence.tracksByObject[_.objName]={trackData:v,trackIdByPropPath:b},l++}const m=Theatre.core.getProject(this.projectId,{state:i}).sheet("Sheet1");this.sheet=m,this.animObjs=[];for(let _ of this.lstObj){let g={};const v={};for(let x of _.propAnims){g[x.propName]=x.range&&x.range.length>0?Theatre.core.types.number(x.default,{range:x.range}):x.default;let I=x.domStyle.split(":"),T=Pe.minusToCamelCase(I[0].trim()),R=I[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+x.propName+"}");v[T]=v[T]?v[T]+" "+R:R}let b=m.object(_.objName,g);this.animObjs.push(b);const C=_.objName;b.onValuesChange(x=>{const I=document.getElementById("dom-"+C),T=/\$\{(.*?)\}/g;for(const R in v)if(v.hasOwnProperty(R)){let $,E=v[R];for(;null!==($=T.exec(v[R]));)E=E.replaceAll($[0],x[$[1]]);I&&(I.style[R]=E.replaceAll(";",""))}}),Theatre.studio.setSelection([b])}document.onmouseup=_=>{_.preventDefault(),this.endDrag(_)},document.onmousemove=_=>{_.preventDefault(),this.onMove(_)}}startDrag(i){i.preventDefault(),this.obj&&"editor"==this.mode&&(this.isDrag=!0,this.startPos=[i.x,i.y])}onMove(i){if(!this.isDrag)return;let s=i.x-this.startPos[0]+this.curTranslate[this.curIdx][0],l=i.y-this.startPos[1]+this.curTranslate[this.curIdx][1];Theatre.studio.transaction(({set:d})=>{this.canMove[this.lstObj[this.curIdx].objName].x&&d(this.obj.props.x,s),this.canMove[this.lstObj[this.curIdx].objName].y&&d(this.obj.props.y,l)})}endDrag(i){this.isDrag&&(this.isDrag=!1,this.curTranslate[this.curIdx]=[i.x-this.startPos[0]+this.curTranslate[this.curIdx][0],i.y-this.startPos[1]+this.curTranslate[this.curIdx][1]])}resetPos(){this.curTranslate[this.curIdx]=[0,0],Theatre.studio.transaction(({set:i})=>{i(this.obj.props.x,0),i(this.obj.props.y,0)})}getValue(){const i=Theatre.studio.createContentOfSaveFile(this.projectId),s=this.convertProjectStateToList(i);return{varName:this.varname,value:JSON.stringify({animName:this.animName,listObj:s})}}convertProjectStateToList(i){const s=[],l=i.sheetsById;for(const d in l){const _=l[d].sequence.tracksByObject;let g=0;for(const v in _){const{trackData:b,trackIdByPropPath:C}=_[v],x=[];let I=0;for(const T in C){const E=b[C[T]];if(E&&E.keyframes){const $=E.keyframes.map(X=>({timePosition:X.position,cubicBezier:X.handles,value:X.value}));let V=[];for(let X of $)V.push([X.cubicBezier[0],X.cubicBezier[1]]),V.push([X.cubicBezier[2],X.cubicBezier[3]]);V.push(V[0]);for(let X=0;X<$.length;X++)$[X].cubicBezier=[V[2*X+1][0],V[2*X+1][1],V[2*X+2][0],V[2*X+2][1]];const M=T.replace(/\["|\"]/g,"");x.push({propName:M,domStyle:this.lstObj[g].propAnims[I].domStyle,default:$[0]?.value||0,keyframes:$})}I++}s.push({objName:v,propAnims:x}),g++}}return s}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-anim-editor"]],inputs:{varname:"varname",mode:"mode",conf:"conf",ratio916:"ratio916"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[[3,"mousedown"],[3,"id","class",4,"ngFor","ngForOf"],["class","text-center mt-2",4,"ngIf"],[3,"id"],["alt","imgElement",3,"mousedown","src"],[1,"text-center","mt-2"],[3,"click"],[1,"tf-icons","bx","bx-reset","bx-22px","cursor-pointer","me-3",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.bIt("mousedown",function(d){return s.startDrag(d)}),e.DNE(1,fp,2,9,"div",1),e.k0s(),e.DNE(2,mp,4,6,"div",2)),2&i&&(e.ZvI("scene-container player scene-mode-player-",s.ratio916?"9-16":"16-9",""),e.R7$(),e.Y8G("ngForOf",s.lstObj),e.R7$(),e.Y8G("ngIf","editor"==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto;background-color:#282b2fcc}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 16);height:calc(var(--video-16) / 16);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 16 + 7px);top:calc(var(--video-9) / 32 - 9px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 16 + 7px);top:calc(var(--video-16) / 32 - 9px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}"]})),r})();class _p{onMsgUpdate(r,n){}onDone(r){}onMsgAdd(r){}onClear(){}onFunctionCall(r,n){}onBeforeSend(){}onSend(){}}class bs extends _p{constructor(r,n,i,s){super(),(0,f.A)(this,"onUpdate",void 0),(0,f.A)(this,"done",void 0),(0,f.A)(this,"beforeSend",void 0),(0,f.A)(this,"functionCall",void 0),this.onUpdate=r,this.done=n,this.beforeSend=i,this.functionCall=s}onFunctionCall(r,n){this.functionCall&&this.functionCall(r,n)}onMsgUpdate(r,n){this.onUpdate&&this.onUpdate(r,n)}onDone(r){this.done&&this.done(r)}onBeforeSend(){this.beforeSend&&this.beforeSend()}}class xs{constructor(r,n,i){(0,f.A)(this,"api",void 0),(0,f.A)(this,"callback",void 0),(0,f.A)(this,"memType",void 0),(0,f.A)(this,"agentType",{name:"default",placeholder:"Enter your message..."}),(0,f.A)(this,"aiVars",[]),(0,f.A)(this,"lstMessage",[]),this.api=r,this.callback=n,this.memType=i}setMemType(r){this.memType=r}setCallback(r){this.callback=r}send(){this.callback?.onBeforeSend(),this.api.live({name:this.agentType.name,messages:this.lstMessage,vars:this.aiVars,type:this.memType}).subscribe(r=>{this.callback?.onSend();let n=r.data,i="",s="",l={Role:"assistant",Content:""};this.addMessage(l),this.api.stream(n,d=>{if(i+=d.Content??"",l.Content=i,d.ToolCalls){l.ToolCalls||(l.ToolCalls=[]);for(let _ of d.ToolCalls){let g=+(_.Type??"0"),v=l.ToolCalls[g];v?v.FunctionCall.Arguments+=_.FunctionCall.Arguments:(l.ToolCalls[g]=_,l.Generating=!0)}}let m=i.replace(s,"");this.noticeUpdate(i,m),s=i,l.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!0)},d=>{""==d&&(l.Generating=!1,l.Content=i,this.callback?.onDone(i),this.getLastMessage()?.ToolCalls&&this.callback?.onFunctionCall(this.getLastMessage()?.ToolCalls??[],!1),console.log(this.lstMessage))})})}reSend(){this.removeLastMessage(),this.send()}addMessage(r){this.lstMessage.push(r),this.callback?.onMsgAdd(r)}addUserMessage(r,n){let i=[];n&&(i.push({Type:gn.Text,Content:r}),i.push(...n.map(l=>({Type:gn.ImageUrl,Content:l}))));let s=i.length>0?{Role:"user",Contents:i,Content:r}:{Role:"user",Content:r};this.lstMessage.push(s),this.callback?.onMsgAdd(s)}addToolMessage(r,n){let i={Role:"tool",ToolCallId:r,Content:n};this.lstMessage.push(i),this.callback?.onMsgAdd(i)}addAssistantMessage(r){let n={Role:"assistant",Content:r};this.lstMessage.push(n),this.callback?.onMsgAdd(n)}getMessage(r){return this.lstMessage[r]}getLastMessage(){return this.lstMessage[this.lstMessage.length-1]}removeLastMessage(){this.lstMessage.length>0&&this.removeMessage(this.lstMessage.length-1)}clearChat(){this.lstMessage=[],this.callback?.onClear()}setVars(r){this.aiVars=r}getVars(){return this.aiVars}setAgent(r){this.agentType=r}setAgentName(r){this.agentType={name:r,placeholder:""}}getName(){return this.agentType.name}removeMessage(r){this.lstMessage.splice(r,1)}noticeUpdate(r,n){this.callback?.onMsgUpdate(r,n)}}function tu(t,r){if(1&t&&(e.j41(0,"div",3)(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.jsCode,"\n        ")}}let nu=(()=>{var t;class r{constructor(){(0,f.A)(this,"varname",""),(0,f.A)(this,"jsCode",""),(0,f.A)(this,"html",""),(0,f.A)(this,"err",""),(0,f.A)(this,"showCode",!1)}set jsInfo(i){let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("js-runner");l&&(this.jsCode=l.innerHTML.split("```javascript")[1].split("```")[0].replaceAll("&lt;","<").replaceAll("&gt;",">"),this.varname=l.getAttribute("var-name")??"",s.removeChild(l),this.html=s.innerHTML,setTimeout(()=>{this.run()},400))}getValue(){return{varName:this.varname,value:this.jsCode}}run(){try{this.err="",new Function(this.jsCode)()}catch(i){this.err=i.message}}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-js-runner"]],inputs:{varname:"varname",jsInfo:"jsInfo"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[["id","js-result-view"],["id","js-source-code",4,"ngIf"],["title","Show/Hide source code",1,"bx","bx-code","text-white","cursor-pointer",3,"click"],["id","js-source-code"]],template:function(i,s){1&i&&(e.nrm(0,"div",0),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,tu,6,1,"div",1),e.j41(4,"i",2),e.bIt("click",function(){return s.showCode=!s.showCode}),e.k0s()),2&i&&(e.R7$(2),e.JRh(s.err),e.R7$(),e.Y8G("ngIf",s.showCode))},dependencies:[L.MD,L.bT,N.YN]})),r})();function hp(t,r){if(1&t){const n=e.RV6();e.j41(0,"img",7),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.selectImg(s))}),e.k0s()}if(2&t){let n;const i=r.$implicit,s=r.index,l=e.XpG(2);e.ZvI("img-small-pick ",(null!==(n=null==l._scene?null:l._scene.selectedImg)&&void 0!==n?n:0)==s?"selected":"",""),e.Y8G("src",i,e.B4B)}}function gp(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,hp,1,4,"img",6),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-mode-",n.mode,"-pick"),e.R7$(),e.Y8G("ngForOf",null==n._scene?null:n._scene.imageUrl)}}function vp(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-num-",n.getSize(),""),e.R7$(),e.JRh(n.idx)}}function yp(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==i._scene?null:i._scene.transitionName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function bp(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"i",8),e.j41(2,"ul",9)(3,"li")(4,"a",10),e.nrm(5,"i"),e.EFF(6,"None"),e.k0s()(),e.DNE(7,yp,4,4,"li",11),e.k0s()()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-transit-",n.getSize(),""),e.R7$(),e.ZvI("dropdown-toggle hide-arrow bx bx-exit cursor-pointer ",null!=n._scene&&n._scene.transitionName?"text-link":"text-muted",""),e.R7$(4),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.transitionName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstTransition)}}function xp(t,r){if(1&t&&(e.j41(0,"div"),e.nrm(1,"div",12),e.k0s()),2&t){const n=e.XpG();e.ZvI("scene-layer scene-time scene-time-progress-",n.getSize(),""),e.R7$(),e.Aen("width:"+n.progress+"%")}}function nl(t,r){if(1&t&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"secondsToTime"),e.nI1(4,"secondsToTime"),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Lme("",e.bMT(3,2,n.curTime),"/",e.bMT(4,4,n.duration),"")}}function ur(t,r){if(1&t){const n=e.RV6();e.j41(0,"audio",15),e.bIt("timeupdate",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.updatePlayTime())})("ended",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.isPlaying=!1)}),e.nrm(1,"source",16),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("src",null==n._scene?null:n._scene.audioUrl,e.B4B)}}function Cp(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",29),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.setAnim(s.animName))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",(null==i._scene?null:i._scene.animationName)==n.animName?"text-link":"invisible",""),e.R7$(),e.JRh(n.animName)}}function ou(t,r){if(1&t&&(e.j41(0,"li")(1,"a",10),e.nrm(2,"i"),e.EFF(3),e.k0s()()),2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(2),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",i.capStyle==n?"text-link":"invisible",""),e.R7$(),e.JRh(n)}}function iu(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.play())}),e.nrm(2,"span"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.nrm(5,"i",21),e.k0s(),e.j41(6,"ul",9)(7,"li")(8,"a",10),e.nrm(9,"i"),e.EFF(10,"None"),e.k0s()(),e.DNE(11,Cp,4,4,"li",11),e.k0s()(),e.j41(12,"div",19)(13,"button",22),e.nrm(14,"i",23),e.k0s(),e.j41(15,"ul",9)(16,"li")(17,"a",10),e.nrm(18,"i"),e.EFF(19,"None"),e.k0s()(),e.DNE(20,ou,4,4,"li",11),e.k0s()(),e.j41(21,"div",19)(22,"button",24),e.nrm(23,"i",25),e.k0s(),e.j41(24,"ul",9)(25,"li",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genImage())}),e.j41(26,"a",10),e.nrm(27,"i",27),e.EFF(28,"Re-Generate Image"),e.k0s()(),e.j41(29,"li",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genVideo())}),e.j41(30,"a",10),e.nrm(31,"i",28),e.EFF(32,"Image to Video"),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(2),e.ZvI("tf-icons bx bx-",n.isPlaying?"pause":"play"," bx-22px"),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==(null==n._scene?null:n._scene.animationName)?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstImgAnim),e.R7$(7),e.ZvI("bx bx-check scaleX-n1-rtl me-3 ",""==n.capStyle?"text-link":"invisible",""),e.R7$(2),e.Y8G("ngForOf",n.lstCapStyle)}}let ru=(()=>{var t;class r{constructor(){(0,f.A)(this,"_scene",void 0),(0,f.A)(this,"mode","player"),(0,f.A)(this,"size","9:16"),(0,f.A)(this,"idx",0),(0,f.A)(this,"selected",!1),(0,f.A)(this,"showTransit",!0),(0,f.A)(this,"capStyle",""),(0,f.A)(this,"animCore",void 0),(0,f.A)(this,"projectId",""),(0,f.A)(this,"onChangeCapStyle",new e.bkB),(0,f.A)(this,"onChangeAnim",new e.bkB),(0,f.A)(this,"lstCapStyle",["wordHighlight","lineHighlight"]),(0,f.A)(this,"lstImgAnim",[]),(0,f.A)(this,"lstTransition",[]),(0,f.A)(this,"isPlaying",!1),(0,f.A)(this,"sheet",void 0),(0,f.A)(this,"curTime",0),(0,f.A)(this,"curAnimName",""),(0,f.A)(this,"progress",0),(0,f.A)(this,"duration",0)}set scene(i){this._scene=i,this.progress=0,this.duration=this._scene.duration,this.curTime=0;let s=document.getElementById("audioElement");s&&(s.pause(),s.currentTime=0,setTimeout(()=>{s.load()},400)),this.curAnimName="",this.sheet=void 0}ngAfterViewInit(){if("player"!=this.mode)return;localStorage.removeItem("theatre-0.4.persistent");let s=!1;try{this.animCore=Theatre.core,s=!0}catch{Pe.loadScript("https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js").then(()=>{this.animCore=Theatre.core})}}changeCapStyle(i){this.capStyle=i,this.onChangeCapStyle.emit(i)}changeAnim(i){this._scene.animationName=i,this.onChangeAnim.emit(i)}set lstAnim(i){"player"==this.mode&&(this.lstImgAnim=i.filter(s=>1==s.listObj.length),this.lstTransition=i.filter(s=>2==s.listObj.length))}ngOnInit(){}setAnim(i){this._scene.animationName=i,this.loadAnim()}getSize(){return this.size.replace(":","-")}genImage(){alert(this._scene?.imagePrompt)}genVideo(){alert(this._scene?.imagePrompt)}getAnimation(i){return this.lstImgAnim.find(s=>s.animName==i)}selectImg(i){this._scene&&(this._scene.selectedImg=i)}play(){let i=10;!this.curAnimName&&this._scene?.animationName&&(this.loadAnim(),i=500),setTimeout(()=>{let s=document.getElementById("audioElement");this.isPlaying?(s&&s.pause(),this.sheet&&this.sheet.sequence.pause()):(s&&s.play(),this.sheet&&this.sheet.sequence.play().then(()=>{this.isPlaying=!1})),this.isPlaying=!this.isPlaying},i)}loadAnim(){this.animCore&&this._scene?.animationName&&(this.curAnimName=this._scene.animationName,this.projectId="ObjAnim"+(new Date).getTime(),this.parseAnim(["dom-img-player"],this.duration))}parseAnim(i,s){localStorage.removeItem("theatre-0.4.persistent");let d={sheetsById:{Sheet1:{staticOverrides:{byObject:{}},sequence:{subUnitsPerUnit:30,length:s,type:"PositionalSequence",tracksByObject:{}}}},definitionVersion:"0.4.0",revisionHistory:["7Impvep3Pk2BfJem"]},_=0,g=this.getAnimation(this._scene?.animationName??"")?.listObj??[];if(0==g.length)return;let v=0;for(let T of g)for(let R of T.propAnims)for(let E of R.keyframes)E.timePosition>v&&(v=E.timePosition);for(let T of g){let R={};for(let M of T.propAnims)R[M.propName]=M.keyframes.length>0?M.keyframes[0].value:0;d.sheetsById.Sheet1.staticOverrides.byObject[T.objName]=R;let E={},$={},V=0;for(let M of T.propAnims){let Y=`${V}-vfsKxxzE`,H={type:"BasicKeyframedTrack",__debugName:`${T.objName}:["${M.propName}"]`,keyframes:[]},X=0,te=[];for(let U of M.keyframes)0==X&&te.push([U.cubicBezier[0],U.cubicBezier[1]]),te.push([U.cubicBezier[0],U.cubicBezier[1]]),te.push([U.cubicBezier[2],U.cubicBezier[3]]),H.keyframes.push({id:`${_}F${V}zl_kv${X}V`,position:1*U.timePosition,connectedRight:!0,handles:[te[2*X][0],te[2*X][1],te[2*X+1][0],te[2*X+1][1]],value:U.value,type:"bezier"}),X++;E[Y]=H,$[`["${M.propName}"]`]=Y,V++}d.sheetsById.Sheet1.sequence.tracksByObject[T.objName]={trackData:E,trackIdByPropPath:$},_++}const C=Theatre.core.getProject(this.projectId,{state:d}),x=C.sheet("Sheet1");this.sheet=x;let I=[];_=0;for(let T of g){let R={};const E={};for(let M of T.propAnims){R[M.propName]=M.range&&M.range.length>0?Theatre.core.types.number(M.default,{range:M.range}):M.default;let Y=M.domStyle.split(":"),H=Y[0].trim(),X=Y[1].trim().replaceAll(/%[.0-9]*[dfs]/g,"${"+M.propName+"}");E[H]=E[H]?E[H]+" "+X:X}let $=x.object(T.objName,R);I.push($);const V=i[_];$.onValuesChange(M=>{const Y=document.getElementById(V),H=/\$\{(.*?)\}/g;for(const X in E)if(E.hasOwnProperty(X)){let U,te=E[X];for(;null!==(U=H.exec(E[X]));)te=te.replaceAll(U[0],M[U[1]]);Y&&(Y.style[X]=te.replaceAll(";",""))}}),_++}C.ready.then(()=>{this.sheet=x})}updatePlayTime(){let i=document.getElementById("audioElement");i&&(this.progress=i.currentTime/i.duration*100,this.duration=i.duration,this.curTime=i.currentTime)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-view"]],inputs:{scene:"scene",mode:"mode",size:"size",idx:"idx",selected:"selected",showTransit:"showTransit",capStyle:"capStyle",lstAnim:"lstAnim"},outputs:{onChangeCapStyle:"onChangeCapStyle",onChangeAnim:"onChangeAnim"},standalone:!0,features:[e.aNF],decls:10,vars:25,consts:[[3,"id"],["alt","imgElement",3,"src"],[3,"class",4,"ngIf"],["class","scene-layer scene-duration small",4,"ngIf"],["id","audioElement","class","d-none",3,"timeupdate","ended",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],["alt","imgElement",3,"class","src","click",4,"ngFor","ngForOf"],["alt","imgElement",3,"click","src"],["matTooltip","Transition","data-bs-toggle","dropdown","aria-expanded","false"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"progress"],[1,"scene-layer","scene-duration","small"],[1,"duration"],["id","audioElement",1,"d-none",3,"timeupdate","ended"],["type","audio/mpeg",3,"src"],[1,"text-center","mt-2"],["type","button","matTooltip","Play",1,"btn","btn-icon","btn-label-primary",3,"click"],[1,"btn-group","ms-3"],["type","button","matTooltip","Animation","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-timer"],["type","button","matTooltip","Caption Style","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bx-captions"],["type","button","matTooltip","Generate with AI","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-label-secondary","btn-icon","dropdown-toggle","hide-arrow"],[1,"bx","bxs-magic-wand"],[3,"click"],[1,"bx","bx-image","scaleX-n1-rtl","me-3"],[1,"bx","bx-movie-play","scaleX-n1-rtl","me-3"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"]],template:function(i,s){if(1&i&&(e.j41(0,"div")(1,"div",0),e.nrm(2,"img",1),e.k0s(),e.DNE(3,gp,2,4,"div",2)(4,vp,2,4,"div",2)(5,bp,8,10,"div",2)(6,xp,2,5,"div",2)(7,nl,5,6,"div",3)(8,ur,2,1,"audio",4),e.k0s(),e.DNE(9,iu,33,11,"div",5)),2&i){let l;e.ee0("scene-container ",s.mode," scene-mode-",s.mode,"-",s.getSize()," ",s.selected?"selected":"",""),e.R7$(),e.STu("scene-layer scene-mode-",s.mode,"-",s.getSize(),""),e.Mz_("id","dom-img-",s.mode,""),e.R7$(),e.ZWY("s-element ",s.mode," scene-mode-",s.mode,"-",s.getSize()," h-100"),e.Y8G("src",null==s._scene?null:s._scene.imageUrl[null!==(l=null==s._scene?null:s._scene.selectedImg)&&void 0!==l?l:0],e.B4B),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","thumb"==s.mode),e.R7$(),e.Y8G("ngIf",s.showTransit&&"thumb"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode),e.R7$(),e.Y8G("ngIf","player"==s.mode&&(null==s._scene?null:s._scene.audioUrl)),e.R7$(),e.Y8G("ngIf","player"==s.mode)}},dependencies:[L.MD,L.Sq,L.bT,N.YN,Wt.uc,Wt.oV,rr],styles:["[_nghost-%COMP%]{--video-9: 768px;--video-16: 1344px}.scene-container[_ngcontent-%COMP%]{position:relative;box-shadow:#00000040 0 1px 1px,#00000026 0 2px 6px;margin:0 auto}.scene-container.player[_ngcontent-%COMP%]{overflow:hidden}.scene-layer[_ngcontent-%COMP%]{position:absolute}.scene-mode-thumb-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) / 16);height:calc(var(--video-9) / 16);border-radius:5px}.scene-mode-thumb-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) / 24);height:calc(var(--video-16) / 24);border-radius:5px}.scene-mode-player-16-9[_ngcontent-%COMP%]{width:calc(var(--video-16) * .35);height:calc(var(--video-9) * .35);border-radius:10px}.scene-mode-player-9-16[_ngcontent-%COMP%]{width:calc(var(--video-9) * .35);height:calc(var(--video-16) * .35);border-radius:10px}.scene-container.selected[_ngcontent-%COMP%]{outline:3px solid #6a45e3}.s-element[_ngcontent-%COMP%]{position:relative;cursor:default}.s-element.selected[_ngcontent-%COMP%]{outline:2px solid #6a45e3}.scene-transit-16-9[_ngcontent-%COMP%]{left:calc(var(--video-16) / 24 + 7px);top:calc(var(--video-9) / 46 - 11px)}.scene-transit-9-16[_ngcontent-%COMP%]{left:calc(var(--video-9) / 24 + 7px);top:calc(var(--video-16) / 46 - 11px)}.scene-num-16-9[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-9) / 46 - 11px)}.scene-num-9-16[_ngcontent-%COMP%]{left:-17px;top:calc(var(--video-16) / 46 - 11px)}.scene-time[_ngcontent-%COMP%]{bottom:0;height:3px;width:100%;background-color:silver;border-bottom-right-radius:10px;border-bottom-left-radius:10px;opacity:.5}.scene-time[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:3px;background-color:#3622b5;border-radius:0}.img-small-pick[_ngcontent-%COMP%]{width:40px;display:block;margin-bottom:5px;border-radius:5px}.scene-mode-player-pick[_ngcontent-%COMP%]{position:fixed;margin-left:-45px}.img-small-pick.selected[_ngcontent-%COMP%]{outline:2px solid #fff}.btn-label-secondary[_ngcontent-%COMP%]{color:#8592a3!important;border-color:#0000;background:#393c50}.btn-label-secondary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#788393!important;color:#fff!important;box-shadow:0 .125rem .25rem #8592a366!important}.btn-label-primary[_ngcontent-%COMP%]{color:#696cff!important;border-color:#0000;background:#35365f}.btn-label-primary[_ngcontent-%COMP%]:hover{border-color:#0000!important;background:#5f61e6!important;color:#fff!important;box-shadow:0 .125rem .25rem #696cff66!important}.scene-duration[_ngcontent-%COMP%]{bottom:5px;right:10px;opacity:.8}"]})),r})();function su(t,r){if(1&t&&(e.j41(0,"div")(1,"pre"),e.EFF(2,"        "),e.j41(3,"code"),e.EFF(4),e.k0s(),e.EFF(5,"\n    "),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.SpI("\n            ",n.error,"\n        ")}}function au(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-scene-view",5),e.bIt("onChangeCapStyle",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.changeCapStyle(s))}),e.k0s()}if(2&t){let n;const i=e.XpG(2);e.Y8G("mode","player")("lstAnim",i.lstAnim)("capStyle",null!==(n=null==i.lstScene?null:i.lstScene.cap_style)&&void 0!==n?n:"")("scene",i.curScene)}}function _i(t,r){if(1&t&&(e.j41(0,"div",3),e.DNE(1,au,1,4,"app-scene-view",4),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.curScene)}}function kp(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(2);return e.Njj(l.select(s))}),e.nrm(1,"app-scene-view",11),e.k0s()}if(2&t){const n=r.$implicit,i=r.index,s=e.XpG(2);e.R7$(),e.Y8G("mode","thumb")("selected",i==s.curIdx)("showTransit",i+1<s.lstScene.list_scenes.length)("idx",i+1)("scene",n)}}function Sp(t,r){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.DNE(3,kp,2,5,"div",9),e.k0s()()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",null==n.lstScene?null:n.lstScene.list_scenes)}}let lu=(()=>{var t;class r{constructor(i){(0,f.A)(this,"app",void 0),(0,f.A)(this,"sceneInfo",'<scene-editor var-name="final-scene" anim-db="anim">{\n        "list_scenes": [\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/188693b0fa2147719389523c4192c99a.png","https://images.piclumen.com/normal/20241221/16/49df6b1abde1419b803ed7cbe74dc7c9.png","https://images.piclumen.com/normal/20241221/16/f05705a71df94fec9d1dfaffb348ef3e.png","https://images.piclumen.com/normal/20241221/16/33c4764f82a441588e68d903837ff0e8.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A beautiful, enchanting garden with luminescent flowers, sparkling streams, and fairy lights hanging from the trees. In the center, Lila the Curious Fairy hovers gently above a bed of multicolored tulips, her lavender wings shimmering in the moonlight\'s glow. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/170fe0d8ab564847aa974469f74f4992.png","https://images.piclumen.com/normal/20241221/16/9b2469bc7bc6421fae9caeeb8d9584b5.png","https://images.piclumen.com/normal/20241221/16/a7609dac63a445bd86a050af174072c1.png","https://images.piclumen.com/normal/20241221/16/cc4e75cc24974e379825ef30d006b761.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Oliver the Wise Owl perched on a sturdy oak branch, wearing his ornate monocle. Lila sits nearby, listening intently, her eyes wide with curiosity. The backdrop showcases a scenic view of the garden bathed in golden twilight, with gentle breezes rustling the leaves. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/251ec29683514a0086fa73f60725f1d4.png","https://images.piclumen.com/normal/20241221/16/f71fd6e1fb21418886f377ba82e1dc39.png","https://images.piclumen.com/normal/20241221/16/f89496edc9e548b596a4698f1e672365.png","https://images.piclumen.com/normal/20241221/16/fdce48c02d68445080e2d988b29d71b3.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Close-up of Oliver as he narrates his tale with deep, expressive gestures. Lila, full of wonder, leans closer, her wings shimmering faintly behind her. Sunbeams dance across the garden, illuminating their faces with soft, magical light. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/cabeb362c9164eebb2683241a21518b9.png","https://images.piclumen.com/normal/20241221/16/14dbdcd6af4c49b78c046748cf83c8d0.png","https://images.piclumen.com/normal/20241221/16/25ff7aeb238f4c6da80bfdba627e811a.png","https://images.piclumen.com/normal/20241221/16/df8754a9c2ea4420ac94771805f4c3fb.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila the Curious Fairy flying gracefully over a vibrant garden path. Below, Hugo the Playful Squirrel follows with spirited leaps. The path is lined with flowers that seem to sway with excitement and tall, whispering grasses. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/1da1c0ae592244ee9e35aa1c471a4ddd.png","https://images.piclumen.com/normal/20241221/16/fd8a08e51ec24e68b313763c84d64af0.png","https://images.piclumen.com/normal/20241221/16/ba3b4cefb2154578a5f5659a5604ee93.png","https://images.piclumen.com/normal/20241221/16/6735728d42164b099d6916f731135dad.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "Lila and Hugo amidst an enchanting section of the garden, surrounded by clusters of bioluminescent mushrooms and arches of luminous roses. A gentle breeze guides them, ruffling Hugo\u2019s fluffy tail. style: whimsical 3D Pixar style"\n            },\n        \n            {\n                "imageUrl": ["https://images.piclumen.com/normal/20241221/16/a4233ab51efe4e1a95da8cfd4907af49.png","https://images.piclumen.com/normal/20241221/16/623cdcd0371e46af9f415e3f342feac5.png","https://images.piclumen.com/normal/20241221/16/59311e5a2b594637b46fc3363321475a.png","https://images.piclumen.com/normal/20241221/16/ebf8d09d89a14da4b57c299b1c894daa.png"],\n                "animationName": "",\n                "audioUrl": "",\n                "transitionName": "",\n                "imagePrompt": "A small, intricately designed door, partially obscured by leafy vines. Lila hovers right in front of it, eyes wide with excitement, while Hugo stands beside her, tapping the door eagerly. The maple tree casts dappled sunlight onto the ground, creating a mystical atmosphere. style: whimsical 3D Pixar style"\n            },\n        \n        ],\n        "size": "9:16",\n        "cap_style": "word"\n    }</scene-editor>'),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"lstScene",void 0),(0,f.A)(this,"lstAnim",[]),(0,f.A)(this,"varName",""),(0,f.A)(this,"error",""),(0,f.A)(this,"curIdx",0),(0,f.A)(this,"curScene",void 0),this.app=i}getValue(){return{varName:this.varName,value:JSON.stringify(this.lstScene)}}ngOnInit(){let i=document.createElement("div");i.innerHTML=this.sceneInfo;let s=i.querySelector("scene-editor"),l=this.sceneInfo,d="";s&&(l=s.innerHTML,this.varName=s.getAttribute("var-name")??"",d=s.getAttribute("anim-db")??"");try{this.lstScene=Pe.parseJson(l)}catch(m){this.error=m+"\n"+Pe.replaceAllBase64Urls(l)}(this.lstScene?.list_scenes.length??0)>0&&(this.curScene=this.lstScene?.list_scenes[0]),this.app.listData({name:"",spec:d}).subscribe(m=>{this.lstAnim=m.map(_=>JSON.parse(_.content))})}select(i){this.curIdx=i,this.curScene=this.lstScene?.list_scenes[i]}changeCapStyle(i){this.lstScene.cap_style=i}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-scene-editor"]],inputs:{sceneInfo:"sceneInfo"},outputs:{onSave:"onSave"},standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","layout-bot",4,"ngIf"],[1,"mb-3"],[3,"mode","lstAnim","capStyle","scene","onChangeCapStyle",4,"ngIf"],[3,"onChangeCapStyle","mode","lstAnim","capStyle","scene"],[1,"layout-bot"],[1,"card"],[1,"card-body","list-scenes"],["class","mb-3",3,"click",4,"ngFor","ngForOf"],[1,"mb-3",3,"click"],[3,"mode","selected","showTransit","idx","scene"]],template:function(i,s){1&i&&e.DNE(0,su,6,1,"div",0)(1,_i,2,1,"div",1)(2,Sp,4,1,"div",2),2&i&&(e.Y8G("ngIf",s.error),e.R7$(),e.Y8G("ngIf",!s.error),e.R7$(),e.Y8G("ngIf",!s.error))},dependencies:[L.MD,L.Sq,L.bT,N.YN,ru],styles:[".list-scenes[_ngcontent-%COMP%]{width:115px;max-height:95vh;overflow-y:auto}.layout-bot[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px}"]})),r})();const cu=["chatInput"],uu=["interacComp"];function dr(t,r){if(1&t&&(e.nrm(0,"div",6),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.chatboxInfo.msg),e.npT)}}function pr(t,r){if(1&t&&e.nrm(0,"app-anim-editor",11,0),2&t){const n=e.XpG(2);e.Y8G("conf",n.animEditorInfo)}}function wp(t,r){if(1&t&&e.nrm(0,"app-js-runner",12,0),2&t){const n=e.XpG(2);e.Y8G("jsInfo",n.jsRunnerInfo)}}function Cs(t,r){if(1&t&&e.nrm(0,"app-scene-editor",13,0),2&t){const n=e.XpG(2);e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Np(t,r){if(1&t&&(e.j41(0,"div",7),e.DNE(1,pr,2,1,"app-anim-editor",8)(2,wp,2,1,"app-js-runner",9)(3,Cs,2,1,"app-scene-editor",10),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.animEditorInfo),e.R7$(),e.Y8G("ngIf",n.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",n.sceneEditorInfo)}}function du(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"textarea",14,1),e.bIt("input",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.autoResize())})("keydown",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.keydown(s))}),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.userMsg,s)||(l.userMsg=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("readOnly",n.isRunning),e.R50("ngModel",n.userMsg)}}let ol=(()=>{var t;class r{constructor(i,s){(0,f.A)(this,"api",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"chatInput",void 0),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"elId",""),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"onAgentResponseComplete",new e.bkB),(0,f.A)(this,"lastValue",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"animDB",""),(0,f.A)(this,"default",!0),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"userMsg",""),(0,f.A)(this,"onAction",new e.bkB),(0,f.A)(this,"onRunJS",new e.bkB),(0,f.A)(this,"onBind",new e.bkB),(0,f.A)(this,"showChatBox",!1),(0,f.A)(this,"queue",[]),(0,f.A)(this,"curFullmsg",""),this.api=i,this.zone=s}getValue(){return this.interacComp&&!this.default?this.interacComp.getValue():this.showChatBox?this.lastValue:void 0}ngOnInit(){this.agentRunner=new xs(this.api,new bs((i,s)=>{this.renderChunk(s)},i=>{this.queue.push({str:i,t:-1})})),this.agentRunner.setAgentName(this.chatboxInfo.req.Req.Name),this.agentRunner.setVars(this.chatboxInfo.req.Req.Vars??[]);for(let i of this.chatboxInfo.req.Req.Messages)this.agentRunner.addMessage(i);this.chatboxInfo.req?.Req.Type&&this.agentRunner.setMemType(this.chatboxInfo.req?.Req.Type),"__AGENT_STREAM___"==this.chatboxInfo.msg&&setTimeout(()=>{this.send()},500)}agentDone(i){this.zone.run(()=>{this.isRunning=!1;let s=document.querySelector(".msg-loading"),l=s?s.innerHTML:"",d=s?.querySelector("chatbox")?.getAttribute("var-name")??"";this.lastValue={value:i,varName:d},document.querySelector(".msg-loading").className="msg-assistant",this.onAgentResponseComplete.emit({msg:i,html:l}),this.renderExternalUI(l),this.renderAction(i)})}reset(){this.sceneEditorInfo="",this.animEditorInfo="",this.jsRunnerInfo="",this.animDB="",this.default=!0}renderExternalUI(i){this.reset();let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("scene-editor");return l?(this.sceneEditorInfo=i,void(this.default=!1)):(l=s.querySelector("anim-editor"),l?(this.animEditorInfo=i,void(this.default=!1)):(l=s.querySelector("js-runner"),l?(this.jsRunnerInfo=i,void(this.default=!1)):void 0))}send(i){if(i?.preventDefault(),this.isRunning)return;let s=document.getElementById("chat-his-"+this.elId);if(s){if(this.userMsg){let d=document.createElement("div");d.className="msg-user badge bg-label-primary p-3 mb-3 text-wrap text-start",d.innerHTML=this.userMsg,s.appendChild(d)}let l=document.createElement("div");l.className="msg-loading",l.innerHTML='<div class="card p-5 mb-3">Running...</div>',s.appendChild(l)}this.isRunning=!0,this.userMsg&&this.agentRunner.addUserMessage(this.userMsg),this.agentRunner.send(),this.userMsg="",this.curFullmsg=""}renderAction(i){setTimeout(()=>{let s=this,l=document.querySelectorAll("[bs-action]");for(let _ of l){let g=_.getAttribute("bs-action"),v=document.createElement("div");v.className="pt-3 text-center",v.innerHTML=`<span class="btn text-link p-0">${g.split("->")[0].split(":")[2]}</span>`,_.appendChild(v),_.removeAttribute("bs-action"),v.addEventListener("click",function(){s.onAction.emit({act:g,el:_})})}let d=document.querySelectorAll("[bs-run]");for(let _ of d){let g=_.getAttribute("bs-run");s.onRunJS.emit({act:g,el:_})}let m=document.querySelectorAll("[bs-edit]");for(let _ of m){let g=_.getAttribute("bs-edit");s.onBind.emit({act:g,el:_})}},2e3)}renderControl(){let s=document.querySelector("#chat-his-"+this.elId)?.querySelector(".language-json"),l=s?.innerHTML;if(l)try{l=JSON.stringify(JSON.parse(l.trim()),null,2),s.innerHTML=l.trim()}catch{}}renderChunk(i){let s=i?i.length:0,l=0;for(;l<s;){const d=Math.floor(9*Math.random())+2,m=Math.floor(16*Math.random())+5;this.queue.push({str:i.substring(l,l+d),t:m}),0==l&&1==this.queue.length&&this.startInsertAnim(),l+=d}}startInsertAnim(){let i=this.queue.shift();if(i){if(-1==i.t)return void this.agentDone(i.str);this.curFullmsg+=i.str,this.renderMsg(this.curFullmsg),setTimeout(()=>{this.startInsertAnim()},i.t)}}renderMsg(i){let s=Pe.parseIncompleteJson(i);if(s&&s!=i&&(s=JSON.stringify(s)),!s)return"";let l=new Map,d=this.chatboxInfo.req?.Req.Vars;for(let g of d){let v=g.split("::");l.set(v[0],g.substring(v[0].length+2))}l.set(this.chatboxInfo.req.Output.Name,s);let m=Pe.compileTemplate(this.chatboxInfo.html,l);if(document.getElementById("chat-his-"+this.elId)){let g=document.querySelector(".msg-loading");if(g){let v=document.createElement("code");v.innerHTML=m,v.querySelector("chatbox")&&(this.showChatBox=!0);let C=v.querySelectorAll('[bs-data="markdown-view"]');for(let x of C)x.innerHTML=Pe.markdownToHtml(x.innerHTML.trim());return g.innerHTML=v.innerHTML,this.renderControl(),g.innerHTML}}return""}autoResize(){const i=this.chatInput?.nativeElement;i.style.height="37px",i.style.overflowY="hidden";let s=i.scrollHeight;s>120&&(s=120,i.style.overflowY="auto"),i.style.height=s+"px"}keydown(i){!i.shiftKey&&"Enter"==i.key&&(i.preventDefault(),""!=this.userMsg.trim()&&this.send(i),setTimeout(()=>{this.autoResize()},100))}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(dt),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-chatbox"]],viewQuery:function(i,s){if(1&i&&(e.GBs(cu,5),e.GBs(uu,5)),2&i){let l;e.mGM(l=e.lsd())&&(s.chatInput=l.first),e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{chatboxInfo:"chatboxInfo",elId:"elId"},outputs:{onAgentResponseComplete:"onAgentResponseComplete",onAction:"onAction",onRunJS:"onRunJS",onBind:"onBind"},standalone:!0,features:[e.aNF],decls:5,vars:8,consts:[["interacComp",""],["chatInput",""],[1,"chatbox"],[3,"id"],[3,"innerHTML",4,"ngIf"],["class","mt-3",4,"ngIf"],[3,"innerHTML"],[1,"mt-3"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf"],[3,"jsInfo"],[3,"sceneInfo"],["rows","1","placeholder","Enter your message...",1,"form-control",3,"input","keydown","ngModelChange","readOnly","ngModel"]],template:function(i,s){1&i&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,dr,2,3,"div",4),e.k0s(),e.DNE(3,Np,4,3,"div",5)(4,du,3,2,"div",5),e.k0s()),2&i&&(e.R7$(),e.HbH(s.default||s.isRunning?"":"d-none"),e.Mz_("id","chat-his-",s.elId,""),e.R7$(),e.Y8G("ngIf","__AGENT_STREAM___"!=s.chatboxInfo.msg),e.R7$(),e.Y8G("ngIf",!s.default&&!s.isRunning),e.R7$(),e.Y8G("ngIf",s.showChatBox))},dependencies:[L.MD,L.bT,N.YN,N.me,N.BC,N.vS,ms,ys,lu,nu],styles:["textarea[_ngcontent-%COMP%]{resize:none;overflow-y:hidden;height:37px}"]})),r})(),il=(()=>{var t;class r{constructor(){(0,f.A)(this,"zipInfo","")}ngOnInit(){let i=JSON.parse(this.decodeHtml(this.zipInfo.trim()));setTimeout((0,xe.A)(function*(){let s=yield Pe.zipFiles(i,"file.zip",_=>{let g=document.querySelector(".__ZIP_FILE__");g&&(g.innerHTML="Zipping..."+_+"/"+i.length)});const l=URL.createObjectURL(s),d=document.createElement("a");d.href=l,d.download="file.zip",d.innerHTML="Download (file.zip)";let m=document.querySelector(".__ZIP_FILE__");m&&(m.innerHTML="",m.appendChild(d))}),500)}decodeHtml(i){const s=document.createElement("textarea");return s.innerHTML=i,s.value}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip"]],inputs:{zipInfo:"zipInfo"},standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[[1,"__ZIP_FILE__"]],template:function(i,s){1&i&&e.nrm(0,"div",0)},dependencies:[L.MD,N.YN]})),r})();const pu=["interacComp"];function fu(t,r){if(1&t&&e.nrm(0,"app-chatbox",7,0),2&t){const n=e.XpG();e.Y8G("chatboxInfo",n.chatboxInfo)}}function mu(t,r){if(1&t&&e.nrm(0,"app-scene-editor",8,0),2&t){const n=e.XpG();e.Y8G("sceneInfo",n.sceneEditorInfo)}}function Ep(t,r){if(1&t&&e.nrm(0,"app-anim-editor",9,0),2&t){const n=e.XpG();e.Y8G("conf",n.animEditorInfo)}}function Ip(t,r){if(1&t&&e.nrm(0,"app-js-runner",10,0),2&t){const n=e.XpG();e.Y8G("jsInfo",n.jsRunnerInfo)}}function Tp(t,r){if(1&t&&e.nrm(0,"app-zip",11),2&t){const n=e.XpG();e.Y8G("zipInfo",n.zipInfo)}}function Ap(t,r){if(1&t&&(e.nrm(0,"div",12),e.nI1(1,"safeHtml")),2&t){const n=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,n.template),e.npT)}}let Rp=(()=>{var t;class r{constructor(){(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"template",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"chatboxInfo",void 0),(0,f.A)(this,"sceneEditorInfo",""),(0,f.A)(this,"animEditorInfo",""),(0,f.A)(this,"jsRunnerInfo",""),(0,f.A)(this,"zipInfo",""),(0,f.A)(this,"default",!1)}getValue(){return this.interacComp?.getValue()}reset(){this.chatboxInfo=void 0,this.sceneEditorInfo="",this.animEditorInfo="",this.zipInfo="",this.default=!1}ngOnInit(){this.reset();let i=this.template.trim();if("__AGENT_STREAM___"==i)return void(this.chatboxInfo={msg:this.template.trim(),req:JSON.parse(this.vars.find(d=>d.startsWith("__chatbox-agent::"))?.substring(17)??""),html:JSON.parse(this.vars.find(d=>d.startsWith("__chatbox-template::"))?.substring(20)??"")});let s=document.createElement("div");s.innerHTML=i;let l=s.querySelector("scene-editor");l?this.sceneEditorInfo=i:(l=s.querySelector("anim-editor"),l?this.animEditorInfo=i:(l=s.querySelector("js-runner"),l?this.jsRunnerInfo=i:(l=s.querySelector("zip"),l?this.zipInfo=l.innerHTML:this.default=!0)))}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-runner-main-view"]],viewQuery:function(i,s){if(1&i&&e.GBs(pu,5),2&i){let l;e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{template:"template",vars:"vars"},standalone:!0,features:[e.aNF],decls:6,vars:6,consts:[["interacComp",""],[3,"chatboxInfo",4,"ngIf"],[3,"sceneInfo",4,"ngIf"],[3,"conf",4,"ngIf"],[3,"jsInfo",4,"ngIf"],[3,"zipInfo",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"chatboxInfo"],[3,"sceneInfo"],[3,"conf"],[3,"jsInfo"],[3,"zipInfo"],[3,"innerHTML"]],template:function(i,s){1&i&&e.DNE(0,fu,2,1,"app-chatbox",1)(1,mu,2,1,"app-scene-editor",2)(2,Ep,2,1,"app-anim-editor",3)(3,Ip,2,1,"app-js-runner",4)(4,Tp,1,1,"app-zip",5)(5,Ap,2,3,"div",6),2&i&&(e.Y8G("ngIf",s.chatboxInfo),e.R7$(),e.Y8G("ngIf",s.sceneEditorInfo),e.R7$(),e.Y8G("ngIf",s.animEditorInfo),e.R7$(),e.Y8G("ngIf",s.jsRunnerInfo),e.R7$(),e.Y8G("ngIf",s.zipInfo),e.R7$(),e.Y8G("ngIf",s.default))},dependencies:[L.MD,L.bT,N.YN,ms,ol,lu,ys,il,nu]})),r})();const wn=["interacComp"];function fr(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"a",12),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.close())}),e.qSk(),e.j41(3,"svg",13),e.nrm(4,"path",14)(5,"path",15),e.k0s()()()()}}function _u(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",20)(1,"app-form-node",21),e.bIt("onStartUpload",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onStartUpload())})("onUploaded",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onUploaded(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("data",n)("appId",i.id)}}function hu(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,_u,2,2,"div",19),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","form"==n.type)}}function gu(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.cancelApp())}),e.EFF(1," H\u1ee7y "),e.k0s()}if(2&t){const n=e.XpG(3);e.Y8G("disabled",n.isCancelling)}}function vu(t,r){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(3);e.ZvI("",n.submitBtn.icon," mr-2")}}function rl(t,r){if(1&t&&(e.j41(0,"div",22),e.DNE(1,gu,2,1,"button",23),e.j41(2,"button",24),e.DNE(3,vu,1,3,"i",25),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.isRunning),e.R7$(),e.Y8G("disabled",n.isRunning||n.isUploading),e.R7$(),e.Y8G("ngIf",n.submitBtn.icon),e.R7$(),e.SpI(" ",n.isRunning?"\u0110ang x\u1eed l\xfd...":n.submitBtn.title," ")}}function Fp(t,r){if(1&t){const n=e.RV6();e.j41(0,"form",16),e.bIt("submit",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.submit(s))}),e.DNE(1,hu,2,1,"div",17)(2,rl,5,4,"div",18),e.k0s()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.forms),e.R7$(),e.Y8G("ngIf",n.forms.length>0)}}function jp(t,r){if(1&t&&(e.j41(0,"div",33),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,n.lastInfo,100))}}function hi(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",27)(1,"div",28),e.nrm(2,"azt-loading-ui"),e.j41(3,"div",29)(4,"div"),e.EFF(5),e.k0s(),e.DNE(6,jp,3,4,"div",30),e.k0s()(),e.j41(7,"div",31)(8,"button",32),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.cancelApp())}),e.EFF(9,"H\u1ee7y"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.JRh(n.lastStatus?n.lastStatus:"\u0110ang x\u1eed l\xfd..."),e.R7$(),e.Y8G("ngIf",n.lastInfo)}}function sl(t,r){if(1&t&&e.nrm(0,"app-runner-main-view",36,0),2&t){const n=e.XpG(2);e.Y8G("vars",n.runInfo.vars)("template",n.runInfo.data)}}function mr(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22)(1,"button",37),e.bIt("click",function(){let s;e.eBV(n);const l=e.XpG(2);return e.Njj(l.resumeApp(null!==(s=null==l.runInfo?null:l.runInfo.next)&&void 0!==s?s:""))}),e.EFF(2," Ti\u1ebfp t\u1ee5c "),e.k0s()()}}function al(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",34),e.DNE(2,sl,2,2,"app-runner-main-view",35),e.k0s(),e.DNE(3,mr,3,0,"div",18),e.k0s()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.data),e.R7$(),e.Y8G("ngIf",null==n.runInfo?null:n.runInfo.next)}}let ks=(()=>{var t;class r{constructor(i,s,l,d){(0,f.A)(this,"route",void 0),(0,f.A)(this,"auth",void 0),(0,f.A)(this,"userSv",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"appId",0),(0,f.A)(this,"showActions",!0),(0,f.A)(this,"queryParamsObject",{}),(0,f.A)(this,"interacComp",void 0),(0,f.A)(this,"appInfo",void 0),(0,f.A)(this,"data",[]),(0,f.A)(this,"id",0),(0,f.A)(this,"forms",[]),(0,f.A)(this,"his",void 0),(0,f.A)(this,"isDone",!1),(0,f.A)(this,"isAsync",!0),(0,f.A)(this,"isFullScreen",!1),(0,f.A)(this,"hasCustomSubmitBtn",!1),(0,f.A)(this,"submitBtn",{title:"B\u1eaft \u0111\u1ea7u",icon:""}),(0,f.A)(this,"isUploading",!1),(0,f.A)(this,"files",[]),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"isRunning",!1),(0,f.A)(this,"strResult",""),(0,f.A)(this,"isCancelling",!1),(0,f.A)(this,"showLogDetail",!1),(0,f.A)(this,"strStatus",[]),(0,f.A)(this,"lastStatus",""),(0,f.A)(this,"lastInfo",""),(0,f.A)(this,"runInfo",void 0),(0,f.A)(this,"curToken",""),this.route=i,this.auth=s,this.userSv=l,this.appService=d}getInteracValue(){return this.interacComp?.getValue()}ngOnInit(){this.auth.isLoggedIn()?this.loadApp():this.auth.login("",this.userSv.getToken(),i=>{this.loadApp()})}loadApp(){this.id=this.appId,this.load()}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(i=>{this.appService.history(this.id).subscribe(d=>{this.his=d}),this.appInfo=i,this.isAsync=1==i.pinTaskbar,this.data=JSON.parse(i.config);let s=[];for(let d of this.data)s.push(...d.links);this.forms=this.data.filter(d=>-1==s.indexOf(d.id)&&"form"==d.type);let l=this.forms[0]?.conf.filter(d=>"submit"==d.value.type)[0]?.value;this.submitBtn={title:l?.label??"B\u1eaft \u0111\u1ea7u",icon:l?.desc??""},0==this.forms.length&&(this.isRunning=!0,this.isDone=!1,this.runApp(this.queryParamsObject))})}onStartUpload(){this.isUploading=!0}onUploaded(i){let s=this.files.filter(l=>l.name==i.name)[0];s?(s.file=i.file,s.content=i.content):this.files.push(i),this.isUploading=!1}close(){window.history.back()}submit(i){var s=this;return(0,xe.A)(function*(){i.preventDefault(),s.isRunning=!0,s.isDone=!1;let l=yield s.getFormArgs();s.runApp(l)})()}getFormArgs(){var i=this;return(0,xe.A)(function*(){let s=document.getElementById("nodeForms");const l=new FormData(s);for(let m of i.files){l.set(m.name,m.content);let _=yield Pe.fileToBase64(m.file);l.set(m.name+"-dataUrl",_)}let d={};return l.forEach((m,_)=>{i.vars.set(_,m instanceof File?m:JSON.stringify(m)),d[_]=m}),d})()}cancelApp(){this.isCancelling=!0,this.appService.cancel(this.curToken).subscribe(i=>{this.isCancelling=!1})}checkStatus(i){this.isRunning&&""!=i?this.appService.status(i).subscribe({next:s=>{if("success"==s.status)this.renderRunInfo(JSON.parse(s.data??"{}"));else{let l=s.message?.split("\n")??[];this.strStatus=[],this.lastInfo="";for(let _ of l)_.startsWith("[i]:")?(this.strStatus[this.strStatus.length-1].startsWith("[i]:")?this.strStatus[this.strStatus.length-1]+=_.substring(4):this.strStatus.push(_),this.lastInfo=_.substring(4)):(this.lastInfo="",this.strStatus.push(_));let m=this.strStatus.filter(_=>!_.startsWith("[i]:"));this.lastStatus=m.length>0?m[m.length-1]:this.lastStatus}setTimeout(()=>{this.checkStatus(i)},1e3)},error:s=>{this.strStatus=[s.message]}}):this.strStatus=[]}loadPrevRunning(){this.his?.token&&(this.isRunning=!0,this.isDone=!1,this.curToken=this.his.token,this.checkStatus(this.his.token))}onRunJS(i){if(!this.runInfo)return;let s=this.getVarValue(i.act);new Function(s)(i.el)}setValue(i,s){if(!this.runInfo)return;let l=i.split("."),d=l[0],m=-1;if(d.endsWith("]")){let C=d.split("[");m=+C[1].split("]")[0],d=C[0]}let _=this.runInfo.vars.filter(C=>C.startsWith(`${d}::`))[0],g=this.runInfo.vars.indexOf(_),v=JSON.parse(_.substring(d.length+2)),b=v;if(m>=0&&(b=b[m],1==l.length))return v[m]=s,void(this.runInfo.vars[g]=d+"::"+JSON.stringify(v,null,2));if(1!=l.length){for(let C=1;C<l.length-1;C++){let x=l[C].split("[");if(x.length>1){let I=+x[1].replace("]","");b=b[x[0]][I]}else b=b[x[0]]}b[l[l.length-1]]=s,this.runInfo.vars[g]=d+"::"+JSON.stringify(v,null,2)}else this.runInfo.vars[g]=d+"::"+s}getVarValue(i){if(!this.runInfo)return"";let s=i.split("."),l=s[0],d=-1;if(l.endsWith("]")){let g=l.split("[");d=+g[1].split("]")[0],l=g[0]}let m=this.runInfo.vars.filter(g=>g.startsWith(`${l}::`))[0],_=JSON.parse(m.substring(l.length+2));d>=0&&(_=_[d]);for(let g=1;g<s.length;g++){let v=s[g].split("[");if(v.length>1){let b=+v[1].replace("]","");_=_[v[0]][b]}else _=_[v[0]]}return _}restart(){location.reload()}resumeApp(i){var s=this;return(0,xe.A)(function*(){let l=s.getInteracValue(),d=i.split(":"),m={};for(let g of s.runInfo?.vars??[]){let v=g.split("::");m[v[0]]=v[1]}l?.varName&&(m[l.varName]=l.value);let _=yield s.getFormArgs();for(let g in _)m[g]=_[g];s.isRunning=!0,s.isDone=!1,s.runApp(m,`${d[0]}:${d[1]}`)})()}runApp(i,s){this.curToken="",this.isAsync?this.appService.runAppAsync((s??this.id)+"",i).subscribe({next:l=>{this.checkStatus(l.data),this.curToken=l.data},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}}):this.appService.runApp((s??this.id)+"",i).subscribe({next:l=>{this.renderRunInfo(l)},error:l=>{this.isRunning=!1,this.isDone=!0,this.strResult=l.message}})}renderRunInfo(i){this.runInfo=i,this.isRunning=!1,this.isDone=!0}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(mt.nX),e.rXU(Bt.u),e.rXU(vt.R),e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-app-view"]],viewQuery:function(i,s){if(1&i&&e.GBs(wn,5),2&i){let l;e.mGM(l=e.lsd())&&(s.interacComp=l.first)}},inputs:{appId:"appId",showActions:"showActions",queryParamsObject:"queryParamsObject"},standalone:!0,features:[e.aNF],decls:10,vars:4,consts:[["interacComp",""],[1,"app-main"],[1,"window-container","window-container-sm"],["data-windowbackdrop","true",1,"window","window--active"],[1,"w-100","overflow-hidden",2,"margin-top","10px"],["class","window-top-btn",4,"ngIf"],[1,"window-content","window-content-sm","pb-3"],[1,"pb-3","window-dark","window-dark-sm"],["class","ml-5 mr-5 mt-2 position-relative","id","nodeForms",3,"submit",4,"ngIf"],["class","ml-5 mr-5 position-relative",4,"ngIf"],[1,"window-top-btn"],[1,"window__controls","text-right"],[1,"window__close","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x"],["d","M18 6 6 18","key","1bl5f8"],["d","m6 6 12 12","key","d8bk6v"],["id","nodeForms",1,"ml-5","mr-5","mt-2","position-relative",3,"submit"],[4,"ngFor","ngForOf"],["class","mt-3 text-right",4,"ngIf"],["class","node-form mb-3",4,"ngIf"],[1,"node-form","mb-3"],[3,"onStartUpload","onUploaded","data","appId"],[1,"mt-3","text-right"],["class","btn btn-secondary mr-3","type","button",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"class",4,"ngIf"],["type","button",1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"ml-5","mr-5","position-relative"],[1,"mt-5","flex","items-center"],["id","run-msg",1,"inline-block","ml-2"],["class","small text-muted",4,"ngIf"],[1,"text-right","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"small","text-muted"],[1,"mt-3"],[3,"vars","template",4,"ngIf"],[3,"vars","template"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e.DNE(4,fr,6,0,"div",5),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Fp,3,2,"form",8)(8,hi,10,2,"div",9)(9,al,4,2,"div",9),e.k0s()()()()()()),2&i&&(e.R7$(4),e.Y8G("ngIf",s.showActions),e.R7$(3),e.Y8G("ngIf",!s.isRunning&&!s.isDone),e.R7$(),e.Y8G("ngIf",s.isRunning),e.R7$(),e.Y8G("ngIf",s.isDone&&!s.isRunning))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.qT,N.cb,N.cV,pp,Rp,St,Ve.b,Fe.Q,we.R],styles:[".position-relative[_ngcontent-%COMP%]{position:relative}"]})),r})(),Ss=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-edu-store-teacher"]],standalone:!0,features:[e.aNF],decls:13,vars:2,consts:[[1,"grid","grid-cols-2","gap-4","mt-3"],[1,"box"],[1,"text-center","mt-3"],["href","/vi/admin/ai/app/10",1,"btn","btn-primary"],[1,"bx","bx-plus","mr-2"],[3,"appId","showActions"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout")(1,"div",0)(2,"div",1)(3,"div",2),e.EFF(4,"PHI\xcaN D\u1ea0Y \u0110\u1ec0 XU\u1ea4T CHO B\u1ea0N"),e.k0s()(),e.j41(5,"div",1)(6,"div",2),e.EFF(7,"DANH S\xc1CH PHI\xcaN D\u1ea0Y B\u1ea0N \u0110\xc3 \u0110\u0102NG K\xdd"),e.k0s(),e.j41(8,"div",2)(9,"a",3),e.nrm(10,"i",4),e.EFF(11," \u0110\u0103ng k\xfd phi\xean d\u1ea1y m\u1edbi "),e.k0s()(),e.nrm(12,"app-app-view",5),e.k0s()()()),2&i&&(e.R7$(12),e.Y8G("appId",11)("showActions",!1))},dependencies:[Ve.b,Wo,ks]})),r})();var S=ue(1395);function jt(t){if("string"==typeof t||"number"==typeof t)return""+t;let r="";if(Array.isArray(t))for(let i,n=0;n<t.length;n++)""!==(i=jt(t[n]))&&(r+=(r&&" ")+i);else for(let n in t)t[n]&&(r+=(r&&" ")+n);return r}var yu=ue(7528);const _r=t=>{let r;const n=new Set,i=(v,b)=>{const C="function"==typeof v?v(r):v;if(!Object.is(C,r)){const x=r;r=b??("object"!=typeof C||null===C)?C:Object.assign({},r,C),n.forEach(I=>I(r,x))}},s=()=>r,_={setState:i,getState:s,getInitialState:()=>g,subscribe:v=>(n.add(v),()=>n.delete(v)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},g=r=t(i,s,_);return _},{useDebugValue:bu}=S,{useSyncExternalStoreWithSelector:xu}=yu,Cu=t=>t;function cl(t,r=Cu,n){const i=xu(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,n);return bu(i),i}const no=(t,r)=>{const n=(t=>t?_r(t):_r)(t),i=(s,l=r)=>cl(n,s,l);return Object.assign(i,n),i};function wt(t,r){if(Object.is(t,r))return!0;if("object"!=typeof t||null===t||"object"!=typeof r||null===r)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[i,s]of t)if(!Object.is(s,r.get(i)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(r,i)||!Object.is(t[i],r[i]))return!1;return!0}var $p={value:()=>{}};function gi(){for(var i,t=0,r=arguments.length,n={};t<r;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ws(n)}function ws(t){this._=t}function Su(t,r){for(var s,n=0,i=t.length;n<i;++n)if((s=t[n]).name===r)return s.value}function Ze(t,r,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===r){t[i]=$p,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:r,value:n}),t}ws.prototype=gi.prototype={constructor:ws,on:function(t,r){var s,n=this._,i=function ku(t,r){return t.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}(t+"",n),l=-1,d=i.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++l<d;)if(s=(t=i[l]).type)n[s]=Ze(n[s],t.name,r);else if(null==r)for(s in n)n[s]=Ze(n[s],t.name,null);return this}for(;++l<d;)if((s=(t=i[l]).type)&&(s=Su(n[s],t.name)))return s},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new ws(t)},call:function(t,r){if((s=arguments.length-2)>0)for(var s,l,n=new Array(s),i=0;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,s=(l=this._[t]).length;i<s;++i)l[i].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(r,n)}};const hr=gi;function Ns(){}function Zo(t){return null==t?Ns:function(){return this.querySelector(t)}}function gr(){return[]}function vr(t){return null==t?gr:function(){return this.querySelectorAll(t)}}function Eu(t){return function(){return this.matches(t)}}function Iu(t){return function(r){return r.matches(t)}}var Tu=Array.prototype.find;function Is(){return this.firstElementChild}var fl=Array.prototype.filter;function ml(){return Array.from(this.children)}function Ru(t){return new Array(t.length)}function yi(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}function Fu(t,r,n,i,s,l){for(var m,d=0,_=r.length,g=l.length;d<g;++d)(m=r[d])?(m.__data__=l[d],i[d]=m):n[d]=new yi(t,l[d]);for(;d<_;++d)(m=r[d])&&(s[d]=m)}function bi(t,r,n,i,s,l,d){var m,_,x,g=new Map,v=r.length,b=l.length,C=new Array(v);for(m=0;m<v;++m)(_=r[m])&&(C[m]=x=d.call(_,_.__data__,m,r)+"",g.has(x)?s[m]=_:g.set(x,_));for(m=0;m<b;++m)x=d.call(t,l[m],m,l)+"",(_=g.get(x))?(i[m]=_,_.__data__=l[m],g.delete(x)):n[m]=new yi(t,l[m]);for(m=0;m<v;++m)(_=r[m])&&g.get(C[m])===_&&(s[m]=_)}function Ln(t){return t.__data__}function oo(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function xi(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}yi.prototype={constructor:yi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Pn="http://www.w3.org/1999/xhtml";const Mt={svg:"http://www.w3.org/2000/svg",xhtml:Pn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $t(t){var r=t+="",n=r.indexOf(":");return n>=0&&"xmlns"!==(r=t.slice(0,n))&&(t=t.slice(n+1)),Mt.hasOwnProperty(r)?{space:Mt[r],local:t}:t}function Ko(t){return function(){this.removeAttribute(t)}}function ki(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jt(t,r){return function(){this.setAttribute(t,r)}}function As(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function ju(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Mu(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function vl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function io(t){return function(){this.style.removeProperty(t)}}function Fs(t,r,n){return function(){this.style.setProperty(t,r,n)}}function yl(t,r,n){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Si(t,r){return t.style.getPropertyValue(r)||vl(t).getComputedStyle(t,null).getPropertyValue(r)}function So(t){return function(){delete this[t]}}function wi(t,r){return function(){this[t]=r}}function Ni(t,r){return function(){var n=r.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function xr(t){return t.trim().split(/^|\s+/)}function Kt(t){return t.classList||new cn(t)}function cn(t){this._node=t,this._names=xr(t.getAttribute("class")||"")}function wo(t,r){for(var n=Kt(t),i=-1,s=r.length;++i<s;)n.add(r[i])}function Xn(t,r){for(var n=Kt(t),i=-1,s=r.length;++i<s;)n.remove(r[i])}function ro(t){return function(){wo(this,t)}}function qo(t){return function(){Xn(this,t)}}function Gu(t,r){return function(){(r.apply(this,arguments)?wo:Xn)(this,t)}}function xl(){this.textContent=""}function un(t){return function(){this.textContent=t}}function dn(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Nn(){this.innerHTML=""}function Du(t){return function(){this.innerHTML=t}}function Vu(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function kl(){this.nextSibling&&this.parentNode.appendChild(this)}function Ms(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ei(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===Pn&&r.documentElement.namespaceURI===Pn?r.createElement(t):r.createElementNS(n,t)}}function Sl(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Bu(t){var r=$t(t);return(r.local?Sl:Ei)(r)}function $s(){return null}function Pu(){var t=this.parentNode;t&&t.removeChild(this)}function Xu(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Gs(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function El(t){return function(){var r=this.__on;if(r){for(var l,n=0,i=-1,s=r.length;n<s;++n)l=r[n],t.type&&l.type!==t.type||l.name!==t.name?r[++i]=l:this.removeEventListener(l.type,l.listener,l.options);++i?r.length=i:delete this.__on}}}function Il(t,r,n){return function(){var s,i=this.__on,l=function wl(t){return function(r){t.call(this,r,this.__data__)}}(r);if(i)for(var d=0,m=i.length;d<m;++d)if((s=i[d]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=l,s.options=n),void(s.value=r);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:r,listener:l,options:n},i?i.push(s):this.__on=[s]}}function pn(t,r,n){var i=vl(t),s=i.CustomEvent;"function"==typeof s?s=new s(r,n):(s=i.document.createEvent("Event"),n?(s.initEvent(r,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(r,!1,!1)),t.dispatchEvent(s)}function Qo(t,r){return function(){return pn(this,t,r)}}function Tl(t,r){return function(){return pn(this,t,r.apply(this,arguments))}}cn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ao=[null];function Lt(t,r){this._groups=t,this._parents=r}function Al(){return new Lt([[document.documentElement]],ao)}Lt.prototype=Al.prototype={constructor:Lt,select:function wu(t){"function"!=typeof t&&(t=Zo(t));for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s)for(var _,g,l=r[s],d=l.length,m=i[s]=new Array(d),v=0;v<d;++v)(_=l[v])&&(g=t.call(_,_.__data__,v,l))&&("__data__"in _&&(g.__data__=_.__data__),m[v]=g);return new Lt(i,this._parents)},selectAll:function Nu(t){t="function"==typeof t?function vi(t){return function(){return function dl(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):vr(t);for(var r=this._groups,n=r.length,i=[],s=[],l=0;l<n;++l)for(var _,d=r[l],m=d.length,g=0;g<m;++g)(_=d[g])&&(i.push(t.call(_,_.__data__,g,d)),s.push(_));return new Lt(i,s)},selectChild:function pl(t){return this.select(null==t?Is:function Es(t){return function(){return Tu.call(this.children,t)}}("function"==typeof t?t:Iu(t)))},selectChildren:function Gp(t){return this.selectAll(null==t?ml:function _l(t){return function(){return fl.call(this.children,t)}}("function"==typeof t?t:Iu(t)))},filter:function Au(t){"function"!=typeof t&&(t=Eu(t));for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s)for(var _,l=r[s],d=l.length,m=i[s]=[],g=0;g<d;++g)(_=l[g])&&t.call(_,_.__data__,g,l)&&m.push(_);return new Lt(i,this._parents)},data:function yr(t,r){if(!arguments.length)return Array.from(this,Ln);var n=r?bi:Fu,i=this._parents,s=this._groups;"function"!=typeof t&&(t=function Co(t){return function(){return t}}(t));for(var l=s.length,d=new Array(l),m=new Array(l),_=new Array(l),g=0;g<l;++g){var v=i[g],b=s[g],C=b.length,x=oo(t.call(v,v&&v.__data__,g,i)),I=x.length,T=m[g]=new Array(I),R=d[g]=new Array(I);n(v,b,T,R,_[g]=new Array(C),x,r);for(var M,Y,$=0,V=0;$<I;++$)if(M=T[$]){for($>=V&&(V=$+1);!(Y=R[V])&&++V<I;);M._next=Y||null}}return(d=new Lt(d,i))._enter=m,d._exit=_,d},enter:function Dp(){return new Lt(this._enter||this._groups.map(Ru),this._parents)},exit:function hl(){return new Lt(this._exit||this._groups.map(Ru),this._parents)},join:function Vp(t,r,n){var i=this.enter(),s=this,l=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=r&&(s=r(s))&&(s=s.selection()),null==n?l.remove():n(l),i&&s?i.merge(s).order():s},merge:function Op(t){for(var r=t.selection?t.selection():t,n=this._groups,i=r._groups,s=n.length,d=Math.min(s,i.length),m=new Array(s),_=0;_<d;++_)for(var x,g=n[_],v=i[_],b=g.length,C=m[_]=new Array(b),I=0;I<b;++I)(x=g[I]||v[I])&&(C[I]=x);for(;_<s;++_)m[_]=n[_];return new Lt(m,this._parents)},selection:function lo(){return this},order:function Jo(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var d,i=t[r],s=i.length-1,l=i[s];--s>=0;)(d=i[s])&&(l&&4^d.compareDocumentPosition(l)&&l.parentNode.insertBefore(d,l),l=d);return this},sort:function br(t){function r(b,C){return b&&C?t(b.__data__,C.__data__):!b-!C}t||(t=xi);for(var n=this._groups,i=n.length,s=new Array(i),l=0;l<i;++l){for(var g,d=n[l],m=d.length,_=s[l]=new Array(m),v=0;v<m;++v)(g=d[v])&&(_[v]=g);_.sort(r)}return new Lt(s,this._parents).order()},call:function Ts(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function gl(){return Array.from(this)},node:function Ci(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,l=i.length;s<l;++s){var d=i[s];if(d)return d}return null},size:function ko(){let t=0;for(const r of this)++t;return t},empty:function qe(){return!this.node()},each:function Je(t){for(var r=this._groups,n=0,i=r.length;n<i;++n)for(var m,s=r[n],l=0,d=s.length;l<d;++l)(m=s[l])&&t.call(m,m.__data__,l,s);return this},attr:function Rs(t,r){var n=$t(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==r?n.local?ki:Ko:"function"==typeof r?n.local?Mu:ju:n.local?As:Jt)(n,r))},style:function $u(t,r,n){return arguments.length>1?this.each((null==r?io:"function"==typeof r?yl:Fs)(t,r,n??"")):Si(this.node(),t)},property:function js(t,r){return arguments.length>1?this.each((null==r?So:"function"==typeof r?Ni:wi)(t,r)):this.node()[t]},classed:function bl(t,r){var n=xr(t+"");if(arguments.length<2){for(var i=Kt(this.node()),s=-1,l=n.length;++s<l;)if(!i.contains(n[s]))return!1;return!0}return this.each(("function"==typeof r?Gu:r?ro:qo)(n,r))},text:function ot(t){return arguments.length?this.each(null==t?xl:("function"==typeof t?dn:un)(t)):this.node().textContent},html:function Cl(t){return arguments.length?this.each(null==t?Nn:("function"==typeof t?Vu:Du)(t)):this.node().innerHTML},raise:function Ou(){return this.each(kl)},lower:function zu(){return this.each(Ms)},append:function Cr(t){var r="function"==typeof t?t:Bu(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function Lu(t,r){var n="function"==typeof t?t:Bu(t),i=null==r?$s:"function"==typeof r?r:Zo(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function Ii(){return this.each(Pu)},clone:function Ds(t){return this.select(t?Gs:Xu)},datum:function Ti(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function Ai(t,r,n){var s,d,i=function Nl(t){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");return i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),{type:r,name:n}})}(t+""),l=i.length;if(!(arguments.length<2)){for(m=r?Il:El,s=0;s<l;++s)this.each(m(i[s],r,n));return this}var m=this.node().__on;if(m)for(var v,_=0,g=m.length;_<g;++_)for(s=0,v=m[_];s<l;++s)if((d=i[s]).type===v.type&&d.name===v.name)return v.value},dispatch:function Yu(t,r){return this.each(("function"==typeof r?Tl:Qo)(t,r))},[Symbol.iterator]:function*so(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var d,i=t[r],s=0,l=i.length;s<l;++s)(d=i[s])&&(yield d)}};const bn=Al;function qt(t){return"string"==typeof t?new Lt([[document.querySelector(t)]],[document.documentElement]):new Lt([[t]],ao)}const Hu={passive:!1},No={capture:!0,passive:!1};function Vs(t){t.stopImmediatePropagation()}function Yn(t){t.preventDefault(),t.stopImmediatePropagation()}function En(t){var r=t.document.documentElement,n=qt(t).on("dragstart.drag",Yn,No);"onselectstart"in r?n.on("selectstart.drag",Yn,No):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Ri(t,r){var n=t.document.documentElement,i=qt(t).on("dragstart.drag",null);r&&(i.on("click.drag",Yn,No),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Eo(t){return((t=Math.exp(t))+1/t)/2}const Uu=function t(r,n,i){function s(l,d){var R,E,m=l[0],_=l[1],g=l[2],C=d[2],x=d[0]-m,I=d[1]-_,T=x*x+I*I;if(T<1e-12)E=Math.log(C/g)/r,R=function(X){return[m+X*x,_+X*I,g*Math.exp(r*X*E)]};else{var $=Math.sqrt(T),V=(C*C-g*g+i*T)/(2*g*n*$),M=(C*C-g*g-i*T)/(2*C*n*$),Y=Math.log(Math.sqrt(V*V+1)-V),H=Math.log(Math.sqrt(M*M+1)-M);E=(H-Y)/r,R=function(X){var te=X*E,U=Eo(Y),ce=g/(n*$)*(U*function Fi(t){return((t=Math.exp(2*t))-1)/(t+1)}(r*te+Y)-function Rl(t){return((t=Math.exp(t))-1/t)/2}(Y));return[m+ce*x,_+ce*I,g*U/Eo(r*te+Y)]}}return R.duration=1e3*E*r/Math.SQRT2,R}return s.rho=function(l){var d=Math.max(.001,+l),m=d*d;return t(d,m,m*m)},s}(Math.SQRT2,2,4);function $e(t,r){if(t=function Fl(t){let r;for(;r=t.sourceEvent;)t=r;return t}(t),void 0===r&&(r=t.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(r.getScreenCTM().inverse())).x,i.y]}if(r.getBoundingClientRect){var s=r.getBoundingClientRect();return[t.clientX-s.left-r.clientLeft,t.clientY-s.top-r.clientTop]}}return[t.pageX,t.pageY]}var ji,In,co=0,ei=0,ti=0,Sr=1e3,Ke=0,Qe=0,gt=0,Io="object"==typeof performance&&performance.now?performance:Date,Mi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ni(){return Qe||(Mi(zp),Qe=Io.now()+gt)}function zp(){Qe=0}function Nt(){this._call=this._time=this._next=null}function Os(t,r,n){var i=new Nt;return i.restart(t,r,n),i}function zs(){Qe=(Ke=Io.now())+gt,co=ei=0;try{!function jl(){ni(),++co;for(var r,t=ji;t;)(r=Qe-t._time)>=0&&t._call.call(void 0,r),t=t._next;--co}()}finally{co=0,function xn(){for(var t,n,r=ji,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:ji=n);In=t,oi(i)}(),Qe=0}}function Hn(){var t=Io.now(),r=t-Ke;r>Sr&&(gt-=r,Ke=t)}function oi(t){co||(ei&&(ei=clearTimeout(ei)),t-Qe>24?(t<1/0&&(ei=setTimeout(zs,t-Io.now()-gt)),ti&&(ti=clearInterval(ti))):(ti||(Ke=Io.now(),ti=setInterval(Hn,Sr)),co=1,Mi(zs)))}function Bs(t,r,n){var i=new Nt;return i.restart(s=>{i.stop(),t(s+r)},r=null==r?0:+r,n),i}Nt.prototype=Os.prototype={constructor:Nt,restart:function(t,r,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ni():+n)+(null==r?0:+r),!this._next&&In!==this&&(In?In._next=this:ji=this,In=this),this._call=t,this._time=n,oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,oi())}};var Ml=hr("start","end","cancel","interrupt"),Wu=[],$l=0,wr=3;function To(t,r,n,i,s,l){var d=t.__transition;if(d){if(n in d)return}else t.__transition={};!function Zu(t,r,n){var s,i=t.__transition;function d(g){var v,b,C,x;if(1!==n.state)return _();for(v in i)if((x=i[v]).name===n.name){if(x.state===wr)return Bs(d);4===x.state?(x.state=6,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[v]):+v<r&&(x.state=6,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[v])}if(Bs(function(){n.state===wr&&(n.state=4,n.timer.restart(m,n.delay,n.time),m(g))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=wr,s=new Array(C=n.tween.length),v=0,b=-1;v<C;++v)(x=n.tween[v].value.call(t,t.__data__,n.index,n.group))&&(s[++b]=x);s.length=b+1}}function m(g){for(var v=g<n.duration?n.ease.call(null,g/n.duration):(n.timer.restart(_),n.state=5,1),b=-1,C=s.length;++b<C;)s[b].call(t,v);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){for(var g in n.state=6,n.timer.stop(),delete i[r],i)return;delete t.__transition}i[r]=n,n.timer=Os(function l(g){n.state=1,n.timer.restart(d,n.delay,n.time),n.delay<=g&&d(g-n.delay)},0,n.time)}(t,n,{name:r,index:i,group:s,on:Ml,tween:Wu,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:$l})}function Xs(t,r){var n=Qt(t,r);if(n.state>$l)throw new Error("too late; already scheduled");return n}function fn(t,r){var n=Qt(t,r);if(n.state>wr)throw new Error("too late; already running");return n}function Qt(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function $i(t,r){var i,s,d,n=t.__transition,l=!0;if(n){for(d in r=null==r?null:r+"",n)(i=n[d]).name===r?(s=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[d]):l=!1;l&&delete t.__transition}}function uo(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Er,Vl=180/Math.PI,Ys={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hs(t,r,n,i,s,l){var d,m,_;return(d=Math.sqrt(t*t+r*r))&&(t/=d,r/=d),(_=t*n+r*i)&&(n-=t*_,i-=r*_),(m=Math.sqrt(n*n+i*i))&&(n/=m,i/=m,_/=m),t*i<r*n&&(t=-t,r=-r,_=-_,d=-d),{translateX:s,translateY:l,rotate:Math.atan2(r,t)*Vl,skewX:Math.atan(_)*Vl,scaleX:d,scaleY:m}}function Qu(t,r,n,i){function s(g){return g.length?g.pop()+" ":""}return function(g,v){var b=[],C=[];return g=t(g),v=t(v),function l(g,v,b,C,x,I){if(g!==b||v!==C){var T=x.push("translate(",null,r,null,n);I.push({i:T-4,x:uo(g,b)},{i:T-2,x:uo(v,C)})}else(b||C)&&x.push("translate("+b+r+C+n)}(g.translateX,g.translateY,v.translateX,v.translateY,b,C),function d(g,v,b,C){g!==v?(g-v>180?v+=360:v-g>180&&(g+=360),C.push({i:b.push(s(b)+"rotate(",null,i)-2,x:uo(g,v)})):v&&b.push(s(b)+"rotate("+v+i)}(g.rotate,v.rotate,b,C),function m(g,v,b,C){g!==v?C.push({i:b.push(s(b)+"skewX(",null,i)-2,x:uo(g,v)}):v&&b.push(s(b)+"skewX("+v+i)}(g.skewX,v.skewX,b,C),function _(g,v,b,C,x,I){if(g!==b||v!==C){var T=x.push(s(x)+"scale(",null,",",null,")");I.push({i:T-4,x:uo(g,b)},{i:T-2,x:uo(v,C)})}else(1!==b||1!==C)&&x.push(s(x)+"scale("+b+","+C+")")}(g.scaleX,g.scaleY,v.scaleX,v.scaleY,b,C),g=v=null,function(x){for(var R,I=-1,T=C.length;++I<T;)b[(R=C[I]).i]=R.x(x);return b.join("")}}}var ed=Qu(function Ku(t){const r=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?Ys:Hs(r.a,r.b,r.c,r.d,r.e,r.f)},"px, ","px)","deg)"),Bp=Qu(function qu(t){return null!=t&&(Er||(Er=document.createElementNS("http://www.w3.org/2000/svg","g")),Er.setAttribute("transform",t),t=Er.transform.baseVal.consolidate())?Hs((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ys},", ",")",")");function Lp(t,r){var n,i;return function(){var s=fn(this,t),l=s.tween;if(l!==n)for(var d=0,m=(i=n=l).length;d<m;++d)if(i[d].name===r){(i=i.slice()).splice(d,1);break}s.tween=i}}function td(t,r,n){var i,s;if("function"!=typeof n)throw new Error;return function(){var l=fn(this,t),d=l.tween;if(d!==i){s=(i=d).slice();for(var m={name:r,value:n},_=0,g=s.length;_<g;++_)if(s[_].name===r){s[_]=m;break}_===g&&s.push(m)}l.tween=s}}function Us(t,r,n){var i=t._id;return t.each(function(){var s=fn(this,i);(s.value||(s.value={}))[r]=n.apply(this,arguments)}),function(s){return Qt(s,i).value[r]}}function Gi(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function od(t,r){var n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n}function Ir(){}var en=1/.7,Ao="\\s*([+-]?\\d+)\\s*",Ro="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",id=/^#([0-9a-f]{3,8})$/,rd=new RegExp(`^rgb\\(${Ao},${Ao},${Ao}\\)$`),Ol=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),Di=new RegExp(`^rgba\\(${Ao},${Ao},${Ao},${Ro}\\)$`),zl=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${Ro}\\)$`),Bl=new RegExp(`^hsl\\(${Ro},${Tn},${Tn}\\)$`),Pp=new RegExp(`^hsla\\(${Ro},${Tn},${Tn},${Ro}\\)$`),Ll={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pl(){return this.rgb().formatHex()}function Xl(){return this.rgb().formatRgb()}function Ar(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=id.exec(t))?(n=r[1].length,r=parseInt(r[1],16),6===n?Pt(r):3===n?new Xt(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===n?It(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===n?It(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=rd.exec(t))?new Xt(r[1],r[2],r[3],1):(r=Ol.exec(t))?new Xt(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=Di.exec(t))?It(r[1],r[2],r[3],r[4]):(r=zl.exec(t))?It(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Bl.exec(t))?Hl(r[1],r[2]/100,r[3]/100,1):(r=Pp.exec(t))?Hl(r[1],r[2]/100,r[3]/100,r[4]):Ll.hasOwnProperty(t)?Pt(Ll[t]):"transparent"===t?new Xt(NaN,NaN,NaN,0):null}function Pt(t){return new Xt(t>>16&255,t>>8&255,255&t,1)}function It(t,r,n,i){return i<=0&&(t=r=n=NaN),new Xt(t,r,n,i)}function Rr(t,r,n,i){return 1===arguments.length?function ld(t){return t instanceof Ir||(t=Ar(t)),t?new Xt((t=t.rgb()).r,t.g,t.b,t.opacity):new Xt}(t):new Xt(t,r,n,i??1)}function Xt(t,r,n,i){this.r=+t,this.g=+r,this.b=+n,this.opacity=+i}function Yl(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}`}function Ws(){const t=Fr(this.opacity);return`${1===t?"rgb(":"rgba("}${po(this.r)}, ${po(this.g)}, ${po(this.b)}${1===t?")":`, ${t})`}`}function Fr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function po(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fo(t){return((t=po(t))<16?"0":"")+t.toString(16)}function Hl(t,r,n,i){return i<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new Cn(t,r,n,i)}function Zs(t){if(t instanceof Cn)return new Cn(t.h,t.s,t.l,t.opacity);if(t instanceof Ir||(t=Ar(t)),!t)return new Cn;if(t instanceof Cn)return t;var r=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,s=Math.min(r,n,i),l=Math.max(r,n,i),d=NaN,m=l-s,_=(l+s)/2;return m?(d=r===l?(n-i)/m+6*(n<i):n===l?(i-r)/m+2:(r-n)/m+4,m/=_<.5?l+s:2-l-s,d*=60):m=_>0&&_<1?0:d,new Cn(d,m,_,t.opacity)}function Cn(t,r,n,i){this.h=+t,this.s=+r,this.l=+n,this.opacity=+i}function Js(t){return(t=(t||0)%360)<0?t+360:t}function ii(t){return Math.max(0,Math.min(1,t||0))}function Wl(t,r,n){return 255*(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)}function Zl(t,r,n,i,s){var l=t*t,d=l*t;return((1-3*t+3*l-d)*r+(4-6*l+3*d)*n+(1+3*t+3*l-3*d)*i+d*s)/6}Gi(Ir,Ar,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pl,formatHex:Pl,formatHex8:function sd(){return this.rgb().formatHex8()},formatHsl:function ad(){return Zs(this).formatHsl()},formatRgb:Xl,toString:Xl}),Gi(Xt,Rr,od(Ir,{brighter(t){return t=null==t?en:Math.pow(en,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xt(po(this.r),po(this.g),po(this.b),Fr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yl,formatHex:Yl,formatHex8:function cd(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}${Fo(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ws,toString:Ws})),Gi(Cn,function Ul(t,r,n,i){return 1===arguments.length?Zs(t):new Cn(t,r,n,i??1)},od(Ir,{brighter(t){return t=null==t?en:Math.pow(en,t),new Cn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Cn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,s=2*n-i;return new Xt(Wl(t>=240?t-240:t+120,s,i),Wl(t,s,i),Wl(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new Cn(Js(this.h),ii(this.s),ii(this.l),Fr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fr(this.opacity);return`${1===t?"hsl(":"hsla("}${Js(this.h)}, ${100*ii(this.s)}%, ${100*ii(this.l)}%${1===t?")":`, ${t})`}`}}));const jr=t=>()=>t;function ql(t,r){var n=r-t;return n?function Un(t,r){return function(n){return t+n*r}}(t,n):jr(isNaN(t)?r:t)}const Ql=function t(r){var n=function Kl(t){return 1==(t=+t)?ql:function(r,n){return n-r?function Xp(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(i){return Math.pow(t+i*r,n)}}(r,n,t):jr(isNaN(r)?n:r)}}(r);function i(s,l){var d=n((s=Rr(s)).r,(l=Rr(l)).r),m=n(s.g,l.g),_=n(s.b,l.b),g=ql(s.opacity,l.opacity);return function(v){return s.r=d(v),s.g=m(v),s.b=_(v),s.opacity=g(v),s+""}}return i.gamma=t,i}(1);function Vi(t){return function(r){var d,m,n=r.length,i=new Array(n),s=new Array(n),l=new Array(n);for(d=0;d<n;++d)m=Rr(r[d]),i[d]=m.r||0,s[d]=m.g||0,l[d]=m.b||0;return i=t(i),s=t(s),l=t(l),m.opacity=1,function(_){return m.r=i(_),m.g=s(_),m.b=l(_),m+""}}}Vi(function Jl(t){var r=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),s=t[i],l=t[i+1];return Zl((n-i/r)*r,i>0?t[i-1]:2*s-l,s,l,i<r-1?t[i+2]:2*l-s)}}),Vi(function ud(t){var r=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*r);return Zl((n-i/r)*r,t[(i+r-1)%r],t[i%r],t[(i+1)%r],t[(i+2)%r])}});var ec=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oi=new RegExp(ec.source,"g");function fe(t,r){var i,s,l,n=ec.lastIndex=Oi.lastIndex=0,d=-1,m=[],_=[];for(t+="",r+="";(i=ec.exec(t))&&(s=Oi.exec(r));)(l=s.index)>n&&(l=r.slice(n,l),m[d]?m[d]+=l:m[++d]=l),(i=i[0])===(s=s[0])?m[d]?m[d]+=s:m[++d]=s:(m[++d]=null,_.push({i:d,x:uo(i,s)})),n=Oi.lastIndex;return n<r.length&&(l=r.slice(n),m[d]?m[d]+=l:m[++d]=l),m.length<2?_[0]?function Hp(t){return function(r){return t(r)+""}}(_[0].x):function Ot(t){return function(){return t}}(r):(r=_.length,function(g){for(var b,v=0;v<r;++v)m[(b=_[v]).i]=b.x(g);return m.join("")})}function ri(t,r){var n;return("number"==typeof r?uo:r instanceof Ar?Ql:(n=Ar(r))?(r=n,Ql):fe)(t,r)}function tc(t){return function(){this.removeAttribute(t)}}function dd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Up(t,r,n){var i,l,s=n+"";return function(){var d=this.getAttribute(t);return d===s?null:d===i?l:l=r(i=d,n)}}function Mr(t,r,n){var i,l,s=n+"";return function(){var d=this.getAttributeNS(t.space,t.local);return d===s?null:d===i?l:l=r(i=d,n)}}function Ks(t,r,n){var i,s,l;return function(){var d,_,m=n(this);return null==m?void this.removeAttribute(t):(d=this.getAttribute(t))===(_=m+"")?null:d===i&&_===s?l:(s=_,l=r(i=d,m))}}function nc(t,r,n){var i,s,l;return function(){var d,_,m=n(this);return null==m?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local))===(_=m+"")?null:d===i&&_===s?l:(s=_,l=r(i=d,m))}}function oc(t,r){var n,i;function s(){var l=r.apply(this,arguments);return l!==i&&(n=(i=l)&&function md(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}(t,l)),n}return s._value=r,s}function ic(t,r){var n,i;function s(){var l=r.apply(this,arguments);return l!==i&&(n=(i=l)&&function fd(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}(t,l)),n}return s._value=r,s}function An(t,r){return function(){Xs(this,t).delay=+r.apply(this,arguments)}}function jo(t,r){return r=+r,function(){Xs(this,t).delay=r}}function hd(t,r){return function(){fn(this,t).duration=+r.apply(this,arguments)}}function Rn(t,r){return r=+r,function(){fn(this,t).duration=r}}var Dt=bn.prototype.constructor;function bt(t){return function(){this.style.removeProperty(t)}}var Dr=0;function Fn(t,r,n,i){this._groups=t,this._parents=r,this._name=n,this._id=i}function Vr(){return++Dr}var at=bn.prototype;Fn.prototype=function oa(t){return bn().transition(t)}.prototype={constructor:Fn,select:function Tt(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=Zo(t));for(var i=this._groups,s=i.length,l=new Array(s),d=0;d<s;++d)for(var v,b,m=i[d],_=m.length,g=l[d]=new Array(_),C=0;C<_;++C)(v=m[C])&&(b=t.call(v,v.__data__,C,m))&&("__data__"in v&&(b.__data__=v.__data__),g[C]=b,To(g[C],r,n,C,g,Qt(v,n)));return new Fn(l,this._parents,r,n)},selectAll:function yt(t){var r=this._name,n=this._id;"function"!=typeof t&&(t=vr(t));for(var i=this._groups,s=i.length,l=[],d=[],m=0;m<s;++m)for(var v,_=i[m],g=_.length,b=0;b<g;++b)if(v=_[b]){for(var x,C=t.call(v,v.__data__,b,_),I=Qt(v,n),T=0,R=C.length;T<R;++T)(x=C[T])&&To(x,r,n,T,C,I);l.push(C),d.push(v)}return new Fn(l,d,r,n)},selectChild:at.selectChild,selectChildren:at.selectChildren,filter:function bd(t){"function"!=typeof t&&(t=Eu(t));for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s)for(var _,l=r[s],d=l.length,m=i[s]=[],g=0;g<d;++g)(_=l[g])&&t.call(_,_.__data__,g,l)&&m.push(_);return new Fn(i,this._parents,this._name,this._id)},merge:function xd(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,i=r.length,l=Math.min(i,n.length),d=new Array(i),m=0;m<l;++m)for(var C,_=r[m],g=n[m],v=_.length,b=d[m]=new Array(v),x=0;x<v;++x)(C=_[x]||g[x])&&(b[x]=C);for(;m<i;++m)d[m]=r[m];return new Fn(d,this._parents,this._name,this._id)},selection:function mn(){return new Dt(this._groups,this._parents)},transition:function $o(){for(var t=this._name,r=this._id,n=Vr(),i=this._groups,s=i.length,l=0;l<s;++l)for(var _,d=i[l],m=d.length,g=0;g<m;++g)if(_=d[g]){var v=Qt(_,r);To(_,t,n,g,d,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Fn(i,this._parents,t,n)},call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:function rc(t,r){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(t):this.each(function qs(t,r,n){var i,s,l=function Zp(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||"start"===r})}(r)?Xs:fn;return function(){var d=l(this,t),m=d.on;m!==i&&(s=(i=m).copy()).on(r,n),d.on=s}}(n,t,r))},attr:function pd(t,r){var n=$t(t),i="transform"===n?Bp:ri;return this.attrTween(t,"function"==typeof r?(n.local?nc:Ks)(n,i,Us(this,"attr."+t,r)):null==r?(n.local?dd:tc)(n):(n.local?Mr:Up)(n,i,r))},attrTween:function Gt(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!=typeof r)throw new Error;var i=$t(t);return this.tween(n,(i.local?oc:ic)(i,r))},style:function sc(t,r,n){var i="transform"==(t+="")?ed:ri;return null==r?this.styleTween(t,function zi(t,r){var n,i,s;return function(){var l=Si(this,t),d=(this.style.removeProperty(t),Si(this,t));return l===d?null:l===n&&d===i?s:s=r(n=l,i=d)}}(t,i)).on("end.style."+t,bt(t)):"function"==typeof r?this.styleTween(t,function si(t,r,n){var i,s,l;return function(){var d=Si(this,t),m=n(this),_=m+"";return null==m&&(this.style.removeProperty(t),_=m=Si(this,t)),d===_?null:d===i&&_===s?l:(s=_,l=r(i=d,m))}}(t,i,Us(this,"style."+t,r))).each(function Qs(t,r){var n,i,s,m,l="style."+r,d="end."+l;return function(){var _=fn(this,t),g=_.on,v=null==_.value[l]?m||(m=bt(r)):void 0;(g!==n||s!==v)&&(i=(n=g).copy()).on(d,s=v),_.on=i}}(this._id,t)):this.styleTween(t,function $r(t,r,n){var i,l,s=n+"";return function(){var d=Si(this,t);return d===s?null:d===i?l:l=r(i=d,n)}}(t,i,r),n).on("end.style."+t,null)},styleTween:function ac(t,r,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,function tn(t,r,n){var i,s;function l(){var d=r.apply(this,arguments);return d!==s&&(i=(s=d)&&function Gr(t,r,n){return function(i){this.style.setProperty(t,r.call(this,i),n)}}(t,d,n)),i}return l._value=r,l}(t,r,n??""))},text:function ea(t){return this.tween("text","function"==typeof t?function fo(t){return function(){var r=t(this);this.textContent=r??""}}(Us(this,"text",t)):function Bi(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function ta(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function Mo(t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&function lc(t){return function(r){this.textContent=t.call(this,r)}}(s)),r}return i._value=t,i}(t))},remove:function Me(){return this.on("end.remove",function kn(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}(this._id))},tween:function nd(t,r){var n=this._id;if(t+="",arguments.length<2){for(var d,i=Qt(this.node(),n).tween,s=0,l=i.length;s<l;++s)if((d=i[s]).name===t)return d.value;return null}return this.each((null==r?Lp:td)(n,t,r))},delay:function _d(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?An:jo)(r,t)):Qt(this.node(),r).delay},duration:function gd(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?hd:Rn)(r,t)):Qt(this.node(),r).duration},ease:function Wp(t){var r=this._id;return arguments.length?this.each(function Wn(t,r){if("function"!=typeof r)throw new Error;return function(){fn(this,t).ease=r}}(r,t)):Qt(this.node(),r).ease},easeVarying:function yd(t){if("function"!=typeof t)throw new Error;return this.each(function vd(t,r){return function(){var n=r.apply(this,arguments);if("function"!=typeof n)throw new Error;fn(this,t).ease=n}}(this._id,t))},end:function na(){var t,r,n=this,i=n._id,s=n.size();return new Promise(function(l,d){var m={value:d},_={value:function(){0==--s&&l()}};n.each(function(){var g=fn(this,i),v=g.on;v!==t&&((r=(t=v).copy())._.cancel.push(m),r._.interrupt.push(m),r._.end.push(_)),g.on=r}),0===s&&l()})},[Symbol.iterator]:at[Symbol.iterator]};var Cd={time:null,delay:0,duration:250,ease:function nn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function cc(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}bn.prototype.interrupt=function Ju(t){return this.each(function(){$i(this,t)})},bn.prototype.transition=function uc(t){var r,n;t instanceof Fn?(r=t._id,t=t._name):(r=Vr(),(n=Cd).time=ni(),t=null==t?null:t+"");for(var i=this._groups,s=i.length,l=0;l<s;++l)for(var _,d=i[l],m=d.length,g=0;g<m;++g)(_=d[g])&&To(_,t,r,g,d,n||cc(_,r));return new Fn(i,this._parents,t,r)};const ia=t=>()=>t;function Go(t,{sourceEvent:r,target:n,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Jn(t,r,n){this.k=t,this.x=r,this.y=n}Jn.prototype={constructor:Jn,scale:function(t){return 1===t?this:new Jn(this.k*t,this.x,this.y)},translate:function(t,r){return 0===t&0===r?this:new Jn(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jn=new Jn(1,0,0);function Or(t){t.stopImmediatePropagation()}function Mn(t){t.preventDefault(),t.stopImmediatePropagation()}function kd(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Sd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ra(){return this.__zoom||jn}function sa(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Jp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kp(t,r,n){var i=t.invertX(r[0][0])-n[0][0],s=t.invertX(r[1][0])-n[1][0],l=t.invertY(r[0][1])-n[0][1],d=t.invertY(r[1][1])-n[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),d>l?(l+d)/2:Math.min(0,l)||Math.max(0,d))}const zr=t=>()=>t;function mo(t,{sourceEvent:r,subject:n,target:i,identifier:s,active:l,x:d,y:m,dx:_,dy:g,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:v}})}function qp(t){return!t.ctrlKey&&!t.button}function Li(){return this.parentNode}function Nd(t,r){return r??{x:t.x,y:t.y}}function ft(){return navigator.maxTouchPoints||"ontouchstart"in this}mo.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},ue(6046);const aa=(0,S.createContext)(null),tf=aa.Provider,_n={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,r)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?r.targetHandle:r.sourceHandle}", edge id: ${r.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},dc=_n.error001();function Ye(t,r){const n=(0,S.useContext)(aa);if(null===n)throw new Error(dc);return cl(n,t,r)}const Ge=()=>{const t=(0,S.useContext)(aa);if(null===t)throw new Error(dc);return(0,S.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},pc=t=>t.userSelectionActive?"none":"all";function Ed({position:t,children:r,className:n,style:i,...s}){const l=Ye(pc),d=`${t}`.split("-");return S.createElement("div",{className:jt(["react-flow__panel",n,...d]),style:{...i,pointerEvents:l},...s},r)}function Do({proOptions:t,position:r="bottom-right"}){return t?.hideAttribution?null:S.createElement(Ed,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},S.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var ci=(0,S.memo)(({x:t,y:r,label:n,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:l={},labelBgPadding:d=[2,4],labelBgBorderRadius:m=2,children:_,className:g,...v})=>{const b=(0,S.useRef)(null),[C,x]=(0,S.useState)({x:0,y:0,width:0,height:0}),I=jt(["react-flow__edge-textwrapper",g]);return(0,S.useEffect)(()=>{if(b.current){const T=b.current.getBBox();x({x:T.x,y:T.y,width:T.width,height:T.height})}},[n]),typeof n>"u"||!n?null:S.createElement("g",{transform:`translate(${t-C.width/2} ${r-C.height/2})`,className:I,visibility:C.width?"visible":"hidden",...v},s&&S.createElement("rect",{width:C.width+2*d[0],x:-d[0],y:-d[1],height:C.height+2*d[1],className:"react-flow__edge-textbg",style:l,rx:m,ry:m}),S.createElement("text",{className:"react-flow__edge-text",y:C.height/2,dy:"0.3em",ref:b,style:i},n),_)});const Pi=t=>({width:t.offsetWidth,height:t.offsetHeight}),Vo=(t,r=0,n=1)=>Math.min(Math.max(t,r),n),Br=(t={x:0,y:0},r)=>({x:Vo(t.x,r[0][0],r[1][0]),y:Vo(t.y,r[0][1],r[1][1])}),Id=(t,r,n)=>t<r?Vo(Math.abs(t-r),1,50)/50:t>n?-Vo(Math.abs(t-n),1,50)/50:0,ca=(t,r)=>[20*Id(t.x,35,r.width-35),20*Id(t.y,35,r.height-35)],Td=t=>t.getRootNode?.()||window?.document,Xi=({x:t,y:r,width:n,height:i})=>({x:t,y:r,x2:t+n,y2:r+i}),Pr=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Xr=(t,r)=>{const n=Math.max(0,Math.min(t.x+t.width,r.x+r.width)-Math.max(t.x,r.x)),i=Math.max(0,Math.min(t.y+t.height,r.y+r.height)-Math.max(t.y,r.y));return Math.ceil(n*i)},hn=t=>!isNaN(t)&&isFinite(t),et=Symbol.for("internals"),Yr=["Enter"," ","Escape"];function da(t){const n=((t=>"nativeEvent"in t)(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Ad=t=>"clientX"in t,$n=(t,r)=>{const n=Ad(t),i=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:i-(r?.left??0),y:s-(r?.top??0)}},pa=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,_o=({id:t,path:r,labelX:n,labelY:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:C,interactionWidth:x=20})=>S.createElement(S.Fragment,null,S.createElement("path",{id:t,style:v,d:r,fill:"none",className:"react-flow__edge-path",markerEnd:b,markerStart:C}),x&&S.createElement("path",{d:r,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&hn(n)&&hn(i)?S.createElement(ci,{x:n,y:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g}):null);function Oo(t,r,n){return void 0===n?n:i=>{const s=r().edges.find(l=>l.id===t);s&&n(i,{...s})}}function o({sourceX:t,sourceY:r,targetX:n,targetY:i}){const s=Math.abs(n-t)/2,l=n<t?n+s:n-s,d=Math.abs(i-r)/2;return[l,i<r?i+d:i-d,s,d]}function a({sourceX:t,sourceY:r,targetX:n,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:d,targetControlY:m}){const _=.125*t+.375*s+.375*d+.125*n,g=.125*r+.375*l+.375*m+.125*i;return[_,g,Math.abs(_-t),Math.abs(g-r)]}_o.displayName="BaseEdge";var c=function(t){return t.Strict="strict",t.Loose="loose",t}(c||{}),u=function(t){return t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal",t}(u||{}),p=function(t){return t.Partial="partial",t.Full="full",t}(p||{}),h=function(t){return t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier",t}(h||{}),y=function(t){return t.Arrow="arrow",t.ArrowClosed="arrowclosed",t}(y||{}),k=function(t){return t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom",t}(k||{});function A({pos:t,x1:r,y1:n,x2:i,y2:s}){return t===k.Left||t===k.Right?[.5*(r+i),n]:[r,.5*(n+s)]}function O({sourceX:t,sourceY:r,sourcePosition:n=k.Bottom,targetX:i,targetY:s,targetPosition:l=k.Top}){const[d,m]=A({pos:n,x1:t,y1:r,x2:i,y2:s}),[_,g]=A({pos:l,x1:i,y1:s,x2:t,y2:r}),[v,b,C,x]=a({sourceX:t,sourceY:r,targetX:i,targetY:s,sourceControlX:d,sourceControlY:m,targetControlX:_,targetControlY:g});return[`M${t},${r} C${d},${m} ${_},${g} ${i},${s}`,v,b,C,x]}const W=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,sourcePosition:s=k.Bottom,targetPosition:l=k.Top,label:d,labelStyle:m,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,interactionWidth:T})=>{const[R,E,$]=O({sourceX:t,sourceY:r,sourcePosition:s,targetX:n,targetY:i,targetPosition:l});return S.createElement(_o,{path:R,labelX:E,labelY:$,label:d,labelStyle:m,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,interactionWidth:T})});W.displayName="SimpleBezierEdge";const q={[k.Left]:{x:-1,y:0},[k.Right]:{x:1,y:0},[k.Top]:{x:0,y:-1},[k.Bottom]:{x:0,y:1}},pe=(t,r)=>Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));function lt({sourceX:t,sourceY:r,sourcePosition:n=k.Bottom,targetX:i,targetY:s,targetPosition:l=k.Top,borderRadius:d=5,centerX:m,centerY:_,offset:g=20}){const[v,b,C,x,I]=function me({source:t,sourcePosition:r=k.Bottom,target:n,targetPosition:i=k.Top,center:s,offset:l}){const d=q[r],m=q[i],_={x:t.x+d.x*l,y:t.y+d.y*l},g={x:n.x+m.x*l,y:n.y+m.y*l},v=(({source:t,sourcePosition:r=k.Bottom,target:n})=>r===k.Left||r===k.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:_,sourcePosition:r,target:g}),b=0!==v.x?"x":"y",C=v[b];let I,T,x=[];const R={x:0,y:0},E={x:0,y:0},[$,V,M,Y]=o({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(d[b]*m[b]==-1){I=s.x??$,T=s.y??V;const X=[{x:I,y:_.y},{x:I,y:g.y}],te=[{x:_.x,y:T},{x:g.x,y:T}];x=d[b]===C?"x"===b?X:te:"x"===b?te:X}else{const X=[{x:_.x,y:g.y}],te=[{x:g.x,y:_.y}];if(x="x"===b?d.x===C?te:X:d.y===C?X:te,r===i){const ae=Math.abs(t[b]-n[b]);if(ae<=l){const w=Math.min(l-1,l-ae);d[b]===C?R[b]=(_[b]>t[b]?-1:1)*w:E[b]=(g[b]>n[b]?-1:1)*w}}if(r!==i){const ae="x"===b?"y":"x",w=d[b]===m[ae],P=_[ae]>g[ae],z=_[ae]<g[ae];(1===d[b]&&(!w&&P||w&&z)||1!==d[b]&&(!w&&z||w&&P))&&(x="x"===b?X:te)}const U={x:_.x+R.x,y:_.y+R.y},ce={x:g.x+E.x,y:g.y+E.y};Math.max(Math.abs(U.x-x[0].x),Math.abs(ce.x-x[0].x))>=Math.max(Math.abs(U.y-x[0].y),Math.abs(ce.y-x[0].y))?(I=(U.x+ce.x)/2,T=x[0].y):(I=x[0].x,T=(U.y+ce.y)/2)}return[[t,{x:_.x+R.x,y:_.y+R.y},...x,{x:g.x+E.x,y:g.y+E.y},n],I,T,M,Y]}({source:{x:t,y:r},sourcePosition:n,target:{x:i,y:s},targetPosition:l,center:{x:m,y:_},offset:g});return[v.reduce((R,E,$)=>{let V="";return V=$>0&&$<v.length-1?function he(t,r,n,i){const s=Math.min(pe(t,r)/2,pe(r,n)/2,i),{x:l,y:d}=r;return t.x===l&&l===n.x||t.y===d&&d===n.y?`L${l} ${d}`:t.y===d?`L ${l+s*(t.x<n.x?-1:1)},${d}Q ${l},${d} ${l},${d+s*(t.y<n.y?1:-1)}`:`L ${l},${d+s*(t.y<n.y?-1:1)}Q ${l},${d} ${l+s*(t.x<n.x?1:-1)},${d}`}(v[$-1],E,v[$+1],d):`${0===$?"M":"L"}${E.x} ${E.y}`,R+V},""),b,C,x,I]}const G=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:v,sourcePosition:b=k.Bottom,targetPosition:C=k.Top,markerEnd:x,markerStart:I,pathOptions:T,interactionWidth:R})=>{const[E,$,V]=lt({sourceX:t,sourceY:r,sourcePosition:b,targetX:n,targetY:i,targetPosition:C,borderRadius:T?.borderRadius,offset:T?.offset});return S.createElement(_o,{path:E,labelX:$,labelY:V,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:I,interactionWidth:R})});G.displayName="SmoothStepEdge";const F=(0,S.memo)(t=>S.createElement(G,{...t,pathOptions:(0,S.useMemo)(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));F.displayName="StepEdge";const ee=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:C,interactionWidth:x})=>{const[I,T,R]=function D({sourceX:t,sourceY:r,targetX:n,targetY:i}){const[s,l,d,m]=o({sourceX:t,sourceY:r,targetX:n,targetY:i});return[`M ${t},${r}L ${n},${i}`,s,l,d,m]}({sourceX:t,sourceY:r,targetX:n,targetY:i});return S.createElement(_o,{path:I,labelX:T,labelY:R,label:s,labelStyle:l,labelShowBg:d,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:v,markerEnd:b,markerStart:C,interactionWidth:x})});function _e(t,r){return t>=0?.5*t:25*r*Math.sqrt(-t)}function ye({pos:t,x1:r,y1:n,x2:i,y2:s,c:l}){switch(t){case k.Left:return[r-_e(r-i,l),n];case k.Right:return[r+_e(i-r,l),n];case k.Top:return[r,n-_e(n-s,l)];case k.Bottom:return[r,n+_e(s-n,l)]}}function be({sourceX:t,sourceY:r,sourcePosition:n=k.Bottom,targetX:i,targetY:s,targetPosition:l=k.Top,curvature:d=.25}){const[m,_]=ye({pos:n,x1:t,y1:r,x2:i,y2:s,c:d}),[g,v]=ye({pos:l,x1:i,y1:s,x2:t,y2:r,c:d}),[b,C,x,I]=a({sourceX:t,sourceY:r,targetX:i,targetY:s,sourceControlX:m,sourceControlY:_,targetControlX:g,targetControlY:v});return[`M${t},${r} C${m},${_} ${g},${v} ${i},${s}`,b,C,x,I]}ee.displayName="StraightEdge";const Ce=(0,S.memo)(({sourceX:t,sourceY:r,targetX:n,targetY:i,sourcePosition:s=k.Bottom,targetPosition:l=k.Top,label:d,labelStyle:m,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,pathOptions:T,interactionWidth:R})=>{const[E,$,V]=be({sourceX:t,sourceY:r,sourcePosition:s,targetX:n,targetY:i,targetPosition:l,curvature:T?.curvature});return S.createElement(_o,{path:E,labelX:$,labelY:V,label:d,labelStyle:m,labelShowBg:_,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:b,style:C,markerEnd:x,markerStart:I,interactionWidth:R})});Ce.displayName="BezierEdge";const xt=(0,S.createContext)(null),De=xt.Provider,Df=({source:t,sourceHandle:r,target:n,targetHandle:i})=>`reactflow__edge-${t}${r||""}-${n}${i||""}`,sf=(t,r)=>typeof t>"u"?"":"string"==typeof t?t:`${r?`${r}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,Vf=(t,r)=>{if(!t.source||!t.target)return _n.error006(),r;let n;return n=(t=>"id"in t&&"source"in t&&"target"in t)(t)?{...t}:{...t,id:Df(t)},((t,r)=>r.some(n=>!(n.source!==t.source||n.target!==t.target||n.sourceHandle!==t.sourceHandle&&(n.sourceHandle||t.sourceHandle)||n.targetHandle!==t.targetHandle&&(n.targetHandle||t.targetHandle))))(n,r)?r:r.concat(n)},af=({x:t,y:r},[n,i,s],l,[d,m])=>{const _={x:(t-n)/s,y:(r-i)/s};return l?{x:d*Math.round(_.x/d),y:m*Math.round(_.y/m)}:_},Of=({x:t,y:r},[n,i,s])=>({x:t*s+n,y:r*s+i}),fa=(t,r=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*r[0],i=(t.height??0)*r[1],s={x:t.position.x-n,y:t.position.y-i};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:s}},Rd=(t,r=[0,0])=>{if(0===t.length)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,s)=>{const{x:l,y:d}=fa(s,r).positionAbsolute;return((t,r)=>({x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x2,r.x2),y2:Math.max(t.y2,r.y2)}))(i,Xi({x:l,y:d,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:t,y:r,x2:n,y2:i})=>({x:t,y:r,width:n-t,height:i-r}))(n)},zf=(t,r,[n,i,s]=[0,0,1],l=!1,d=!1,m=[0,0])=>{const _={x:(r.x-n)/s,y:(r.y-i)/s,width:r.width/s,height:r.height/s},g=[];return t.forEach(v=>{const{width:b,height:C,selectable:x=!0,hidden:I=!1}=v;if(d&&!x||I)return!1;const{positionAbsolute:T}=fa(v,m),E=Xr(_,{x:T.x,y:T.y,width:b||0,height:C||0});(typeof b>"u"||typeof C>"u"||null===b||null===C||l&&E>0||E>=(b||0)*(C||0)||v.dragging)&&g.push(v)}),g},Bf=(t,r)=>{const n=t.map(i=>i.id);return r.filter(i=>n.includes(i.source)||n.includes(i.target))},lf=(t,r,n,i,s,l=.1)=>{const _=Math.min(r/(t.width*(1+l)),n/(t.height*(1+l))),g=Vo(_,i,s);return{x:r/2-(t.x+t.width/2)*g,y:n/2-(t.y+t.height/2)*g,zoom:g}},Hr=(t,r=0)=>t.transition().duration(r);function Lf(t,r,n,i){return(r[n]||[]).reduce((s,l)=>(`${t.id}-${l.id}-${n}`!==i&&s.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),s),[])}const C_={source:null,target:null,sourceHandle:null,targetHandle:null},Pf=()=>({handleDomNode:null,isValid:!1,connection:C_,endHandle:null});function Xf(t,r,n,i,s,l,d){const m="target"===s,_=d.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),g={...Pf(),handleDomNode:_};if(_){const v=cf(void 0,_),b=_.getAttribute("data-nodeid"),C=_.getAttribute("data-handleid"),x=_.classList.contains("connectable"),I=_.classList.contains("connectableend"),T={source:m?b:n,sourceHandle:m?C:i,target:m?n:b,targetHandle:m?i:C};g.connection=T,x&&I&&(r===c.Strict?m&&"source"===v||!m&&"target"===v:b!==n||C!==i)&&(g.endHandle={nodeId:b,handleId:C,type:v},g.isValid=l(T))}return g}function cf(t,r){return t||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function uf(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function S_(t,r){let n=null;return r?n="valid":t&&!r&&(n="invalid"),n}function Yf({event:t,handleId:r,nodeId:n,onConnect:i,isTarget:s,getState:l,setState:d,isValidConnection:m,edgeUpdaterType:_,onReconnectEnd:g}){const v=Td(t.target),{connectionMode:b,domNode:C,autoPanOnConnect:x,connectionRadius:I,onConnectStart:T,panBy:R,getNodes:E,cancelConnection:$}=l();let M,V=0;const{x:Y,y:H}=$n(t),X=v?.elementFromPoint(Y,H),te=cf(_,X),U=C?.getBoundingClientRect();if(!U||!te)return;let ce,ie=$n(t,U),de=!1,ae=null,w=!1,P=null;const z=function k_({nodes:t,nodeId:r,handleId:n,handleType:i}){return t.reduce((s,l)=>{if(l[et]){const{handleBounds:d}=l[et];let m=[],_=[];d&&(m=Lf(l,d,"source",`${r}-${n}-${i}`),_=Lf(l,d,"target",`${r}-${n}-${i}`)),s.push(...m,..._)}return s},[])}({nodes:E(),nodeId:n,handleId:r,handleType:te}),K=()=>{if(!x)return;const[Q,re]=ca(ie,U);R({x:Q,y:re}),V=requestAnimationFrame(K)};function se(Q){const{transform:re}=l();ie=$n(Q,U);const{handle:le,validHandleResult:ve}=function x_(t,r,n,i,s,l){const{x:d,y:m}=$n(t),g=r.elementsFromPoint(d,m).find(I=>I.classList.contains("react-flow__handle"));if(g){const I=g.getAttribute("data-nodeid");if(I){const T=cf(void 0,g),R=g.getAttribute("data-handleid"),E=l({nodeId:I,id:R,type:T});if(E){const $=s.find(V=>V.nodeId===I&&V.type===T&&V.id===R);return{handle:{id:R,type:T,nodeId:I,x:$?.x||n.x,y:$?.y||n.y},validHandleResult:E}}}}let v=[],b=1/0;if(s.forEach(I=>{const T=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(T<=i){const R=l(I);T<=b&&(T<b?v=[{handle:I,validHandleResult:R}]:T===b&&v.push({handle:I,validHandleResult:R}),b=T)}}),!v.length)return{handle:null,validHandleResult:Pf()};if(1===v.length)return v[0];const C=v.some(({validHandleResult:I})=>I.isValid),x=v.some(({handle:I})=>"target"===I.type);return v.find(({handle:I,validHandleResult:T})=>x?"target"===I.type:!C||T.isValid)||v[0]}(Q,v,af(ie,re,!1,[1,1]),I,z,ge=>Xf(ge,b,n,r,s?"target":"source",m,v));if(M=le,de||(K(),de=!0),P=ve.handleDomNode,ae=ve.connection,w=ve.isValid,d({connectionPosition:M&&w?Of({x:M.x,y:M.y},re):ie,connectionStatus:S_(!!M,w),connectionEndHandle:ve.endHandle}),!M&&!w&&!P)return uf(ce);ae.source!==ae.target&&P&&(uf(ce),ce=P,P.classList.add("connecting","react-flow__handle-connecting"),P.classList.toggle("valid",w),P.classList.toggle("react-flow__handle-valid",w))}function B(Q){(M||P)&&ae&&w&&i?.(ae),l().onConnectEnd?.(Q),_&&g?.(Q),uf(ce),$(),cancelAnimationFrame(V),de=!1,w=!1,ae=null,P=null,v.removeEventListener("mousemove",se),v.removeEventListener("mouseup",B),v.removeEventListener("touchmove",se),v.removeEventListener("touchend",B)}d({connectionPosition:ie,connectionStatus:null,connectionNodeId:n,connectionHandleId:r,connectionHandleType:te,connectionStartHandle:{nodeId:n,handleId:r,type:te},connectionEndHandle:null}),T?.(t,{nodeId:n,handleId:r,handleType:te}),v.addEventListener("mousemove",se),v.addEventListener("mouseup",B),v.addEventListener("touchmove",se),v.addEventListener("touchend",B)}const Hf=()=>!0,w_=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Uf=(0,S.forwardRef)(({type:t="source",position:r=k.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:d,onConnect:m,children:_,className:g,onMouseDown:v,onTouchStart:b,...C},x)=>{const I=d||null,T="target"===t,R=Ge(),E=(0,S.useContext)(xt),{connectOnClick:$,noPanClassName:V}=Ye(w_,wt),{connecting:M,clickConnecting:Y}=Ye(((t,r,n)=>i=>{const{connectionStartHandle:s,connectionEndHandle:l,connectionClickStartHandle:d}=i;return{connecting:s?.nodeId===t&&s?.handleId===r&&s?.type===n||l?.nodeId===t&&l?.handleId===r&&l?.type===n,clickConnecting:d?.nodeId===t&&d?.handleId===r&&d?.type===n}})(E,I,t),wt);E||R.getState().onError?.("010",_n.error010());const H=U=>{const{defaultEdgeOptions:ce,onConnect:ie,hasDefaultEdges:de}=R.getState(),ae={...ce,...U};if(de){const{edges:w,setEdges:P}=R.getState();P(Vf(ae,w))}ie?.(ae),m?.(ae)},X=U=>{if(!E)return;const ce=Ad(U);s&&(ce&&0===U.button||!ce)&&Yf({event:U,handleId:I,nodeId:E,onConnect:H,isTarget:T,getState:R.getState,setState:R.setState,isValidConnection:n||R.getState().isValidConnection||Hf}),ce?v?.(U):b?.(U)};return S.createElement("div",{"data-handleid":I,"data-nodeid":E,"data-handlepos":r,"data-id":`${E}-${I}-${t}`,className:jt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",V,g,{source:!T,target:T,connectable:i,connectablestart:s,connectableend:l,connecting:Y,connectionindicator:i&&(s&&!M||l&&M)}]),onMouseDown:X,onTouchStart:X,onClick:$?U=>{const{onClickConnectStart:ce,onClickConnectEnd:ie,connectionClickStartHandle:de,connectionMode:ae,isValidConnection:w}=R.getState();if(!E||!de&&!s)return;if(!de)return ce?.(U,{nodeId:E,handleId:I,handleType:t}),void R.setState({connectionClickStartHandle:{nodeId:E,type:t,handleId:I}});const P=Td(U.target),z=n||w||Hf,{connection:K,isValid:se}=Xf({nodeId:E,id:I,type:t},ae,de.nodeId,de.handleId||null,de.type,z,P);se&&H(K),ie?.(U),R.setState({connectionClickStartHandle:null})}:void 0,ref:x,...C},_)});Uf.displayName="Handle";var ma=(0,S.memo)(Uf);const Wf=({data:t,isConnectable:r,targetPosition:n=k.Top,sourcePosition:i=k.Bottom})=>S.createElement(S.Fragment,null,S.createElement(ma,{type:"target",position:n,isConnectable:r}),t?.label,S.createElement(ma,{type:"source",position:i,isConnectable:r}));Wf.displayName="DefaultNode";var df=(0,S.memo)(Wf);const Zf=({data:t,isConnectable:r,sourcePosition:n=k.Bottom})=>S.createElement(S.Fragment,null,t?.label,S.createElement(ma,{type:"source",position:n,isConnectable:r}));Zf.displayName="InputNode";var Jf=(0,S.memo)(Zf);const Kf=({data:t,isConnectable:r,targetPosition:n=k.Top})=>S.createElement(S.Fragment,null,S.createElement(ma,{type:"target",position:n,isConnectable:r}),t?.label);Kf.displayName="OutputNode";var qf=(0,S.memo)(Kf);const pf=()=>null;pf.displayName="GroupNode";const E_=t=>({selectedNodes:t.getNodes().filter(r=>r.selected),selectedEdges:t.edges.filter(r=>r.selected).map(r=>({...r}))}),Fd=t=>t.id;function I_(t,r){return wt(t.selectedNodes.map(Fd),r.selectedNodes.map(Fd))&&wt(t.selectedEdges.map(Fd),r.selectedEdges.map(Fd))}const Qf=(0,S.memo)(({onSelectionChange:t})=>{const r=Ge(),{selectedNodes:n,selectedEdges:i}=Ye(E_,I_);return(0,S.useEffect)(()=>{const s={nodes:n,edges:i};t?.(s),r.getState().onSelectionChange.forEach(l=>l(s))},[n,i,t]),null});Qf.displayName="SelectionListener";const T_=t=>!!t.onSelectionChange;function A_({onSelectionChange:t}){const r=Ye(T_);return t||r?S.createElement(Qf,{onSelectionChange:t}):null}const R_=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function _a(t,r){(0,S.useEffect)(()=>{typeof t<"u"&&r(t)},[t])}function Re(t,r,n){(0,S.useEffect)(()=>{typeof r<"u"&&n({[t]:r})},[r])}const F_=({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,onConnect:s,onConnectStart:l,onConnectEnd:d,onClickConnectStart:m,onClickConnectEnd:_,nodesDraggable:g,nodesConnectable:v,nodesFocusable:b,edgesFocusable:C,edgesUpdatable:x,elevateNodesOnSelect:I,minZoom:T,maxZoom:R,nodeExtent:E,onNodesChange:$,onEdgesChange:V,elementsSelectable:M,connectionMode:Y,snapGrid:H,snapToGrid:X,translateExtent:te,connectOnClick:U,defaultEdgeOptions:ce,fitView:ie,fitViewOptions:de,onNodesDelete:ae,onEdgesDelete:w,onNodeDrag:P,onNodeDragStart:z,onNodeDragStop:K,onSelectionDrag:se,onSelectionDragStart:B,onSelectionDragStop:Q,noPanClassName:re,nodeOrigin:le,rfId:ve,autoPanOnConnect:ge,autoPanOnNodeDrag:Te,onError:Xe,connectionRadius:Ue,isValidConnection:tt,nodeDragThreshold:Ct})=>{const{setNodes:ct,setEdges:ho,setDefaultNodesAndEdges:qn,setMinZoom:go,setMaxZoom:Qn,setTranslateExtent:Vt,setNodeExtent:Po,reset:ut}=Ye(R_,wt),ke=Ge();return(0,S.useEffect)(()=>{const Gn=i?.map(Jr=>({...Jr,...ce}));return qn(n,Gn),()=>{ut()}},[]),Re("defaultEdgeOptions",ce,ke.setState),Re("connectionMode",Y,ke.setState),Re("onConnect",s,ke.setState),Re("onConnectStart",l,ke.setState),Re("onConnectEnd",d,ke.setState),Re("onClickConnectStart",m,ke.setState),Re("onClickConnectEnd",_,ke.setState),Re("nodesDraggable",g,ke.setState),Re("nodesConnectable",v,ke.setState),Re("nodesFocusable",b,ke.setState),Re("edgesFocusable",C,ke.setState),Re("edgesUpdatable",x,ke.setState),Re("elementsSelectable",M,ke.setState),Re("elevateNodesOnSelect",I,ke.setState),Re("snapToGrid",X,ke.setState),Re("snapGrid",H,ke.setState),Re("onNodesChange",$,ke.setState),Re("onEdgesChange",V,ke.setState),Re("connectOnClick",U,ke.setState),Re("fitViewOnInit",ie,ke.setState),Re("fitViewOnInitOptions",de,ke.setState),Re("onNodesDelete",ae,ke.setState),Re("onEdgesDelete",w,ke.setState),Re("onNodeDrag",P,ke.setState),Re("onNodeDragStart",z,ke.setState),Re("onNodeDragStop",K,ke.setState),Re("onSelectionDrag",se,ke.setState),Re("onSelectionDragStart",B,ke.setState),Re("onSelectionDragStop",Q,ke.setState),Re("noPanClassName",re,ke.setState),Re("nodeOrigin",le,ke.setState),Re("rfId",ve,ke.setState),Re("autoPanOnConnect",ge,ke.setState),Re("autoPanOnNodeDrag",Te,ke.setState),Re("onError",Xe,ke.setState),Re("connectionRadius",Ue,ke.setState),Re("isValidConnection",tt,ke.setState),Re("nodeDragThreshold",Ct,ke.setState),_a(t,ct),_a(r,ho),_a(T,go),_a(R,Qn),_a(te,Vt),_a(E,Po),null},em={display:"none"},j_={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},tm="react-flow__node-desc",nm="react-flow__edge-desc",M_="react-flow__aria-live",$_=t=>t.ariaLiveMessage;function G_({rfId:t}){const r=Ye($_);return S.createElement("div",{id:`${M_}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:j_},r)}function D_({rfId:t,disableKeyboardA11y:r}){return S.createElement(S.Fragment,null,S.createElement("div",{id:`${tm}-${t}`,style:em},"Press enter or space to select a node.",!r&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),S.createElement("div",{id:`${nm}-${t}`,style:em},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!r&&S.createElement(G_,{rfId:t}))}var mc=(t=null,r={actInsideInputWithModifier:!0})=>{const[n,i]=(0,S.useState)(!1),s=(0,S.useRef)(!1),l=(0,S.useRef)(new Set([])),[d,m]=(0,S.useMemo)(()=>{if(null!==t){const g=(Array.isArray(t)?t:[t]).filter(b=>"string"==typeof b).map(b=>b.split("+")),v=g.reduce((b,C)=>b.concat(...C),[]);return[g,v]}return[[],[]]},[t]);return(0,S.useEffect)(()=>{const _=typeof document<"u"?document:null,g=r?.target||_;if(null!==t){const v=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!r.actInsideInputWithModifier)&&da(x))return!1;const T=im(x.code,m);l.current.add(x[T]),om(d,l.current,!1)&&(x.preventDefault(),i(!0))},b=x=>{if((!s.current||s.current&&!r.actInsideInputWithModifier)&&da(x))return!1;const T=im(x.code,m);om(d,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(x[T]),"Meta"===x.key&&l.current.clear(),s.current=!1},C=()=>{l.current.clear(),i(!1)};return g?.addEventListener("keydown",v),g?.addEventListener("keyup",b),window.addEventListener("blur",C),()=>{g?.removeEventListener("keydown",v),g?.removeEventListener("keyup",b),window.removeEventListener("blur",C)}}},[t,i]),n};function om(t,r,n){return t.filter(i=>n||i.length===r.size).some(i=>i.every(s=>r.has(s)))}function im(t,r){return r.includes(t)?"code":"key"}function rm(t,r,n,i){const s=t.parentNode||t.parentId;if(!s)return n;const l=r.get(s),d=fa(l,i);return rm(l,r,{x:(n.x??0)+d.x,y:(n.y??0)+d.y,z:(l[et]?.z??0)>(n.z??0)?l[et]?.z??0:n.z??0},i)}function sm(t,r,n){t.forEach(i=>{const s=i.parentNode||i.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[i.id]){const{x:l,y:d,z:m}=rm(i,t,{...i.position,z:i[et]?.z??0},r);i.positionAbsolute={x:l,y:d},i[et].z=m,n?.[i.id]&&(i[et].isParent=!0)}})}function ff(t,r,n,i){const s=new Map,l={},d=i?1e3:0;return t.forEach(m=>{const _=(hn(m.zIndex)?m.zIndex:0)+(m.selected?d:0),g=r.get(m.id),v={...m,positionAbsolute:{x:m.position.x,y:m.position.y}},b=m.parentNode||m.parentId;b&&(l[b]=!0),Object.defineProperty(v,et,{enumerable:!1,value:{handleBounds:g?.type&&g?.type!==m.type?void 0:g?.[et]?.handleBounds,z:_}}),s.set(m.id,v)}),sm(s,n,l),s}function am(t,r={}){const{getNodes:n,width:i,height:s,minZoom:l,maxZoom:d,d3Zoom:m,d3Selection:_,fitViewOnInitDone:g,fitViewOnInit:v,nodeOrigin:b}=t();if(m&&_&&(r.initial&&!g&&v||!r.initial)){const I=n().filter(R=>{const E=r.includeHiddenNodes?R.width&&R.height:!R.hidden;return r.nodes?.length?E&&r.nodes.some($=>$.id===R.id):E}),T=I.every(R=>R.width&&R.height);if(I.length>0&&T){const R=Rd(I,b),{x:E,y:$,zoom:V}=lf(R,i,s,r.minZoom??l,r.maxZoom??d,r.padding??.1),M=jn.translate(E,$).scale(V);return m.transform("number"==typeof r.duration&&r.duration>0?Hr(_,r.duration):_,M),!0}}return!1}function V_(t,r){return t.forEach(n=>{const i=r.get(n.id);i&&r.set(i.id,{...i,[et]:i[et],selected:n.selected})}),new Map(r)}function O_(t,r){return r.map(n=>{const i=t.find(s=>s.id===n.id);return i&&(n.selected=i.selected),n})}function jd({changedNodes:t,changedEdges:r,get:n,set:i}){const{nodeInternals:s,edges:l,onNodesChange:d,onEdgesChange:m,hasDefaultNodes:_,hasDefaultEdges:g}=n();t?.length&&(_&&i({nodeInternals:V_(t,s)}),d?.(t)),r?.length&&(g&&i({edges:O_(r,l)}),m?.(r))}const ha=()=>{},z_={zoomIn:ha,zoomOut:ha,zoomTo:ha,getZoom:()=>1,setViewport:ha,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ha,fitBounds:ha,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},B_=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function mf(){const t=(()=>{const t=Ge(),{d3Zoom:r,d3Selection:n}=Ye(B_,wt);return(0,S.useMemo)(()=>n&&r?{zoomIn:s=>r.scaleBy(Hr(n,s?.duration),1.2),zoomOut:s=>r.scaleBy(Hr(n,s?.duration),1/1.2),zoomTo:(s,l)=>r.scaleTo(Hr(n,l?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,l)=>{const[d,m,_]=t.getState().transform,g=jn.translate(s.x??d,s.y??m).scale(s.zoom??_);r.transform(Hr(n,l?.duration),g)},getViewport:()=>{const[s,l,d]=t.getState().transform;return{x:s,y:l,zoom:d}},fitView:s=>am(t.getState,s),setCenter:(s,l,d)=>{const{width:m,height:_,maxZoom:g}=t.getState(),v=typeof d?.zoom<"u"?d.zoom:g,x=jn.translate(m/2-s*v,_/2-l*v).scale(v);r.transform(Hr(n,d?.duration),x)},fitBounds:(s,l)=>{const{width:d,height:m,minZoom:_,maxZoom:g}=t.getState(),{x:v,y:b,zoom:C}=lf(s,d,m,_,g,l?.padding??.1),x=jn.translate(v,b).scale(C);r.transform(Hr(n,l?.duration),x)},project:s=>{const{transform:l,snapToGrid:d,snapGrid:m}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),af(s,l,d,m)},screenToFlowPosition:s=>{const{transform:l,snapToGrid:d,snapGrid:m,domNode:_}=t.getState();if(!_)return s;const{x:g,y:v}=_.getBoundingClientRect();return af({x:s.x-g,y:s.y-v},l,d,m)},flowToScreenPosition:s=>{const{transform:l,domNode:d}=t.getState();if(!d)return s;const{x:m,y:_}=d.getBoundingClientRect(),g=Of(s,l);return{x:g.x+m,y:g.y+_}},viewportInitialized:!0}:z_,[r,n])})(),r=Ge(),n=(0,S.useCallback)(()=>r.getState().getNodes().map(T=>({...T})),[]),i=(0,S.useCallback)(T=>r.getState().nodeInternals.get(T),[]),s=(0,S.useCallback)(()=>{const{edges:T=[]}=r.getState();return T.map(R=>({...R}))},[]),l=(0,S.useCallback)(T=>{const{edges:R=[]}=r.getState();return R.find(E=>E.id===T)},[]),d=(0,S.useCallback)(T=>{const{getNodes:R,setNodes:E,hasDefaultNodes:$,onNodesChange:V}=r.getState(),M=R(),Y="function"==typeof T?T(M):T;$?E(Y):V&&V(0===Y.length?M.map(X=>({type:"remove",id:X.id})):Y.map(X=>({item:X,type:"reset"})))},[]),m=(0,S.useCallback)(T=>{const{edges:R=[],setEdges:E,hasDefaultEdges:$,onEdgesChange:V}=r.getState(),M="function"==typeof T?T(R):T;$?E(M):V&&V(0===M.length?R.map(H=>({type:"remove",id:H.id})):M.map(H=>({item:H,type:"reset"})))},[]),_=(0,S.useCallback)(T=>{const R=Array.isArray(T)?T:[T],{getNodes:E,setNodes:$,hasDefaultNodes:V,onNodesChange:M}=r.getState();V?$([...E(),...R]):M&&M(R.map(H=>({item:H,type:"add"})))},[]),g=(0,S.useCallback)(T=>{const R=Array.isArray(T)?T:[T],{edges:E=[],setEdges:$,hasDefaultEdges:V,onEdgesChange:M}=r.getState();V?$([...E,...R]):M&&M(R.map(H=>({item:H,type:"add"})))},[]),v=(0,S.useCallback)(()=>{const{getNodes:T,edges:R=[],transform:E}=r.getState(),[$,V,M]=E;return{nodes:T().map(Y=>({...Y})),edges:R.map(Y=>({...Y})),viewport:{x:$,y:V,zoom:M}}},[]),b=(0,S.useCallback)(({nodes:T,edges:R})=>{const{nodeInternals:E,getNodes:$,edges:V,hasDefaultNodes:M,hasDefaultEdges:Y,onNodesDelete:H,onEdgesDelete:X,onNodesChange:te,onEdgesChange:U}=r.getState(),ce=(T||[]).map(P=>P.id),ie=(R||[]).map(P=>P.id),de=$().reduce((P,z)=>{const K=z.parentNode||z.parentId,se=!ce.includes(z.id)&&K&&P.find(Q=>Q.id===K);return("boolean"!=typeof z.deletable||z.deletable)&&(ce.includes(z.id)||se)&&P.push(z),P},[]),ae=V.filter(P=>"boolean"!=typeof P.deletable||P.deletable),w=ae.filter(P=>ie.includes(P.id));if(de||w){const P=Bf(de,ae),z=[...w,...P],K=z.reduce((se,B)=>(se.includes(B.id)||se.push(B.id),se),[]);(Y||M)&&(Y&&r.setState({edges:V.filter(se=>!K.includes(se.id))}),M&&(de.forEach(se=>{E.delete(se.id)}),r.setState({nodeInternals:new Map(E)}))),K.length>0&&(X?.(z),U&&U(K.map(se=>({id:se,type:"remove"})))),de.length>0&&(H?.(de),te)&&te(de.map(B=>({id:B.id,type:"remove"})))}},[]),C=(0,S.useCallback)(T=>{const R=(t=>hn(t.width)&&hn(t.height)&&hn(t.x)&&hn(t.y))(T),E=R?null:r.getState().nodeInternals.get(T.id);return R||E?[R?T:Pr(E),E,R]:[null,null,R]},[]),x=(0,S.useCallback)((T,R=!0,E)=>{const[$,V,M]=C(T);return $?(E||r.getState().getNodes()).filter(Y=>{if(!(M||Y.id!==V.id&&Y.positionAbsolute))return!1;const H=Pr(Y),X=Xr(H,$);return R&&X>0||X>=$.width*$.height}):[]},[]),I=(0,S.useCallback)((T,R,E=!0)=>{const[$]=C(T);if(!$)return!1;const V=Xr($,R);return E&&V>0||V>=$.width*$.height},[]);return(0,S.useMemo)(()=>({...t,getNodes:n,getNode:i,getEdges:s,getEdge:l,setNodes:d,setEdges:m,addNodes:_,addEdges:g,toObject:v,deleteElements:b,getIntersectingNodes:x,isNodeIntersecting:I}),[t,n,i,s,l,d,m,_,g,v,b,x,I])}const P_={actInsideInputWithModifier:!1},_f={position:"absolute",width:"100%",height:"100%",top:0,left:0},Md=t=>({x:t.x,y:t.y,zoom:t.k}),ga=(t,r)=>t.target.closest(`.${r}`),lm=(t,r)=>2===r&&Array.isArray(t)&&t.includes(2),cm=t=>{const r=t.ctrlKey&&pa()?10:1;return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*r},U_=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),W_=({onMove:t,onMoveStart:r,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:l=!0,panOnScroll:d=!1,panOnScrollSpeed:m=.5,panOnScrollMode:_=u.Free,zoomOnDoubleClick:g=!0,elementsSelectable:v,panOnDrag:b=!0,defaultViewport:C,translateExtent:x,minZoom:I,maxZoom:T,zoomActivationKeyCode:R,preventScrolling:E=!0,children:$,noWheelClassName:V,noPanClassName:M})=>{const Y=(0,S.useRef)(),H=Ge(),X=(0,S.useRef)(!1),te=(0,S.useRef)(!1),U=(0,S.useRef)(null),ce=(0,S.useRef)({x:0,y:0,zoom:0}),{d3Zoom:ie,d3Selection:de,d3ZoomHandler:ae,userSelectionActive:w}=Ye(U_,wt),P=mc(R),z=(0,S.useRef)(0),K=(0,S.useRef)(!1),se=(0,S.useRef)();return function Y_(t){const r=Ge();(0,S.useEffect)(()=>{let n;const i=()=>{if(!t.current)return;const s=Pi(t.current);(0===s.height||0===s.width)&&r.getState().onError?.("004",_n.error004()),r.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}(U),(0,S.useEffect)(()=>{if(U.current){const B=U.current.getBoundingClientRect(),Q=function wd(){var v,b,C,t=kd,r=Sd,n=Kp,i=sa,s=Jp,l=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],m=250,_=Uu,g=hr("start","zoom","end"),x=500,I=150,T=0,R=10;function E(w){w.property("__zoom",ra).on("wheel.zoom",te,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",ce).filter(s).on("touchstart.zoom",ie).on("touchmove.zoom",de).on("touchend.zoom touchcancel.zoom",ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(w,P){return(P=Math.max(l[0],Math.min(l[1],P)))===w.k?w:new Jn(P,w.x,w.y)}function V(w,P,z){var K=P[0]-z[0]*w.k,se=P[1]-z[1]*w.k;return K===w.x&&se===w.y?w:new Jn(w.k,K,se)}function M(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function Y(w,P,z,K){w.on("start.zoom",function(){H(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(K).end()}).tween("zoom",function(){var se=this,B=arguments,Q=H(se,B).event(K),re=r.apply(se,B),le=null==z?M(re):"function"==typeof z?z.apply(se,B):z,ve=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ge=se.__zoom,Te="function"==typeof P?P.apply(se,B):P,Xe=_(ge.invert(le).concat(ve/ge.k),Te.invert(le).concat(ve/Te.k));return function(Ue){if(1===Ue)Ue=Te;else{var tt=Xe(Ue),Ct=ve/tt[2];Ue=new Jn(Ct,le[0]-tt[0]*Ct,le[1]-tt[1]*Ct)}Q.zoom(null,Ue)}})}function H(w,P,z){return!z&&w.__zooming||new X(w,P)}function X(w,P){this.that=w,this.args=P,this.active=0,this.sourceEvent=null,this.extent=r.apply(w,P),this.taps=0}function te(w,...P){if(t.apply(this,arguments)){var z=H(this,P).event(w),K=this.__zoom,se=Math.max(l[0],Math.min(l[1],K.k*Math.pow(2,i.apply(this,arguments)))),B=$e(w);if(z.wheel)(z.mouse[0][0]!==B[0]||z.mouse[0][1]!==B[1])&&(z.mouse[1]=K.invert(z.mouse[0]=B)),clearTimeout(z.wheel);else{if(K.k===se)return;z.mouse=[B,K.invert(B)],$i(this),z.start()}Mn(w),z.wheel=setTimeout(function Q(){z.wheel=null,z.end()},I),z.zoom("mouse",n(V($(K,se),z.mouse[0],z.mouse[1]),z.extent,d))}}function U(w,...P){if(!C&&t.apply(this,arguments)){var z=w.currentTarget,K=H(this,P,!0).event(w),se=qt(w.view).on("mousemove.zoom",function le(ge){if(Mn(ge),!K.moved){var Te=ge.clientX-Q,Xe=ge.clientY-re;K.moved=Te*Te+Xe*Xe>T}K.event(ge).zoom("mouse",n(V(K.that.__zoom,K.mouse[0]=$e(ge,z),K.mouse[1]),K.extent,d))},!0).on("mouseup.zoom",function ve(ge){se.on("mousemove.zoom mouseup.zoom",null),Ri(ge.view,K.moved),Mn(ge),K.event(ge).end()},!0),B=$e(w,z),Q=w.clientX,re=w.clientY;En(w.view),Or(w),K.mouse=[B,this.__zoom.invert(B)],$i(this),K.start()}}function ce(w,...P){if(t.apply(this,arguments)){var z=this.__zoom,K=$e(w.changedTouches?w.changedTouches[0]:w,this),se=z.invert(K),Q=n(V($(z,z.k*(w.shiftKey?.5:2)),K,se),r.apply(this,P),d);Mn(w),m>0?qt(this).transition().duration(m).call(Y,Q,K,w):qt(this).call(E.transform,Q,K,w)}}function ie(w,...P){if(t.apply(this,arguments)){var B,Q,re,le,z=w.touches,K=z.length,se=H(this,P,w.changedTouches.length===K).event(w);for(Or(w),Q=0;Q<K;++Q)le=[le=$e(re=z[Q],this),this.__zoom.invert(le),re.identifier],se.touch0?!se.touch1&&se.touch0[2]!==le[2]&&(se.touch1=le,se.taps=0):(se.touch0=le,B=!0,se.taps=1+!!v);v&&(v=clearTimeout(v)),B&&(se.taps<2&&(b=le[0],v=setTimeout(function(){v=null},x)),$i(this),se.start())}}function de(w,...P){if(this.__zooming){var B,Q,re,le,z=H(this,P).event(w),K=w.changedTouches,se=K.length;for(Mn(w),B=0;B<se;++B)re=$e(Q=K[B],this),z.touch0&&z.touch0[2]===Q.identifier?z.touch0[0]=re:z.touch1&&z.touch1[2]===Q.identifier&&(z.touch1[0]=re);if(Q=z.that.__zoom,z.touch1){var ve=z.touch0[0],ge=z.touch0[1],Te=z.touch1[0],Xe=z.touch1[1],Ue=(Ue=Te[0]-ve[0])*Ue+(Ue=Te[1]-ve[1])*Ue,tt=(tt=Xe[0]-ge[0])*tt+(tt=Xe[1]-ge[1])*tt;Q=$(Q,Math.sqrt(Ue/tt)),re=[(ve[0]+Te[0])/2,(ve[1]+Te[1])/2],le=[(ge[0]+Xe[0])/2,(ge[1]+Xe[1])/2]}else{if(!z.touch0)return;re=z.touch0[0],le=z.touch0[1]}z.zoom("touch",n(V(Q,re,le),z.extent,d))}}function ae(w,...P){if(this.__zooming){var B,Q,z=H(this,P).event(w),K=w.changedTouches,se=K.length;for(Or(w),C&&clearTimeout(C),C=setTimeout(function(){C=null},x),B=0;B<se;++B)Q=K[B],z.touch0&&z.touch0[2]===Q.identifier?delete z.touch0:z.touch1&&z.touch1[2]===Q.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),2===z.taps&&(Q=$e(Q,this),Math.hypot(b[0]-Q[0],b[1]-Q[1])<R)){var re=qt(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return E.transform=function(w,P,z,K){var se=w.selection?w.selection():w;se.property("__zoom",ra),w!==se?Y(w,P,z,K):se.interrupt().each(function(){H(this,arguments).event(K).start().zoom(null,"function"==typeof P?P.apply(this,arguments):P).end()})},E.scaleBy=function(w,P,z,K){E.scaleTo(w,function(){return this.__zoom.k*("function"==typeof P?P.apply(this,arguments):P)},z,K)},E.scaleTo=function(w,P,z,K){E.transform(w,function(){var se=r.apply(this,arguments),B=this.__zoom,Q=null==z?M(se):"function"==typeof z?z.apply(this,arguments):z,re=B.invert(Q),le="function"==typeof P?P.apply(this,arguments):P;return n(V($(B,le),Q,re),se,d)},z,K)},E.translateBy=function(w,P,z,K){E.transform(w,function(){return n(this.__zoom.translate("function"==typeof P?P.apply(this,arguments):P,"function"==typeof z?z.apply(this,arguments):z),r.apply(this,arguments),d)},null,K)},E.translateTo=function(w,P,z,K,se){E.transform(w,function(){var B=r.apply(this,arguments),Q=this.__zoom,re=null==K?M(B):"function"==typeof K?K.apply(this,arguments):K;return n(jn.translate(re[0],re[1]).scale(Q.k).translate("function"==typeof P?-P.apply(this,arguments):-P,"function"==typeof z?-z.apply(this,arguments):-z),B,d)},K,se)},X.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,P){return this.mouse&&"mouse"!==w&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&"touch"!==w&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&"touch"!==w&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var P=qt(this.that).datum();g.call(w,this.that,new Go(w,{sourceEvent:this.sourceEvent,target:E,type:w,transform:this.that.__zoom,dispatch:g}),P)}},E.wheelDelta=function(w){return arguments.length?(i="function"==typeof w?w:ia(+w),E):i},E.filter=function(w){return arguments.length?(t="function"==typeof w?w:ia(!!w),E):t},E.touchable=function(w){return arguments.length?(s="function"==typeof w?w:ia(!!w),E):s},E.extent=function(w){return arguments.length?(r="function"==typeof w?w:ia([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),E):r},E.scaleExtent=function(w){return arguments.length?(l[0]=+w[0],l[1]=+w[1],E):[l[0],l[1]]},E.translateExtent=function(w){return arguments.length?(d[0][0]=+w[0][0],d[1][0]=+w[1][0],d[0][1]=+w[0][1],d[1][1]=+w[1][1],E):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},E.constrain=function(w){return arguments.length?(n=w,E):n},E.duration=function(w){return arguments.length?(m=+w,E):m},E.interpolate=function(w){return arguments.length?(_=w,E):_},E.on=function(){var w=g.on.apply(g,arguments);return w===g?E:w},E.clickDistance=function(w){return arguments.length?(T=(w=+w)*w,E):Math.sqrt(T)},E.tapDistance=function(w){return arguments.length?(R=+w,E):R},E}().scaleExtent([I,T]).translateExtent(x),re=qt(U.current).call(Q),le=jn.translate(C.x,C.y).scale(Vo(C.zoom,I,T)),ve=[[0,0],[B.width,B.height]],ge=Q.constrain()(le,ve,x);Q.transform(re,ge),Q.wheelDelta(cm),H.setState({d3Zoom:Q,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:U.current.closest(".react-flow")})}},[]),(0,S.useEffect)(()=>{de&&ie&&(!d||P||w?typeof ae<"u"&&de.on("wheel.zoom",function(B,Q){if(!E&&"wheel"===B.type&&!B.ctrlKey||ga(B,V))return null;B.preventDefault(),ae.call(this,B,Q)},{passive:!1}):de.on("wheel.zoom",B=>{if(ga(B,V))return!1;B.preventDefault(),B.stopImmediatePropagation();const Q=de.property("__zoom").k||1;if(B.ctrlKey&&l){const tt=$e(B),Ct=cm(B),ct=Q*Math.pow(2,Ct);return void ie.scaleTo(de,ct,tt,B)}const re=1===B.deltaMode?20:1;let le=_===u.Vertical?0:B.deltaX*re,ve=_===u.Horizontal?0:B.deltaY*re;!pa()&&B.shiftKey&&_!==u.Vertical&&(le=B.deltaY*re,ve=0),ie.translateBy(de,-le/Q*m,-ve/Q*m,{internal:!0});const ge=Md(de.property("__zoom")),{onViewportChangeStart:Te,onViewportChange:Xe,onViewportChangeEnd:Ue}=H.getState();clearTimeout(se.current),K.current||(K.current=!0,r?.(B,ge),Te?.(ge)),K.current&&(t?.(B,ge),Xe?.(ge),se.current=setTimeout(()=>{n?.(B,ge),Ue?.(ge),K.current=!1},150))},{passive:!1}))},[w,d,_,de,ie,ae,P,l,E,V,r,t,n]),(0,S.useEffect)(()=>{ie&&ie.on("start",B=>{if(!B.sourceEvent||B.sourceEvent.internal)return null;z.current=B.sourceEvent?.button;const{onViewportChangeStart:Q}=H.getState(),re=Md(B.transform);X.current=!0,ce.current=re,"mousedown"===B.sourceEvent?.type&&H.setState({paneDragging:!0}),Q?.(re),r?.(B.sourceEvent,re)})},[ie,r]),(0,S.useEffect)(()=>{ie&&(w&&!X.current?ie.on("zoom",null):w||ie.on("zoom",B=>{const{onViewportChange:Q}=H.getState();if(H.setState({transform:[B.transform.x,B.transform.y,B.transform.k]}),te.current=!(!i||!lm(b,z.current??0)),(t||Q)&&!B.sourceEvent?.internal){const re=Md(B.transform);Q?.(re),t?.(B.sourceEvent,re)}}))},[w,ie,t,b,i]),(0,S.useEffect)(()=>{ie&&ie.on("end",B=>{if(!B.sourceEvent||B.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=H.getState();if(X.current=!1,H.setState({paneDragging:!1}),i&&lm(b,z.current??0)&&!te.current&&i(B.sourceEvent),te.current=!1,(n||Q)&&((t,r)=>t.x!==r.x||t.y!==r.y||t.zoom!==r.k)(ce.current,B.transform)){const re=Md(B.transform);ce.current=re,clearTimeout(Y.current),Y.current=setTimeout(()=>{Q?.(re),n?.(B.sourceEvent,re)},d?150:0)}})},[ie,d,b,n,i]),(0,S.useEffect)(()=>{ie&&ie.filter(B=>{const Q=P||s,re=l&&B.ctrlKey;if((!0===b||Array.isArray(b)&&b.includes(1))&&1===B.button&&"mousedown"===B.type&&(ga(B,"react-flow__node")||ga(B,"react-flow__edge")))return!0;if(!b&&!Q&&!d&&!g&&!l||w||!g&&"dblclick"===B.type||ga(B,V)&&"wheel"===B.type||ga(B,M)&&("wheel"!==B.type||d&&"wheel"===B.type&&!P)||!l&&B.ctrlKey&&"wheel"===B.type||!Q&&!d&&!re&&"wheel"===B.type||!b&&("mousedown"===B.type||"touchstart"===B.type)||Array.isArray(b)&&!b.includes(B.button)&&"mousedown"===B.type)return!1;const le=Array.isArray(b)&&b.includes(B.button)||!B.button||B.button<=1;return(!B.ctrlKey||"wheel"===B.type)&&le})},[w,ie,s,l,d,g,b,v,P]),S.createElement("div",{className:"react-flow__renderer",ref:U,style:_f},$)},Z_=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function J_(){const{userSelectionActive:t,userSelectionRect:r}=Ye(Z_,wt);return t&&r?S.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}function um(t,r){const n=r.parentNode||r.parentId,i=t.find(s=>s.id===n);if(i){const s=r.position.x+r.width-i.width,l=r.position.y+r.height-i.height;if(s>0||l>0||r.position.x<0||r.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),l>0&&(i.style.height+=l),r.position.x<0){const d=Math.abs(r.position.x);i.position.x=i.position.x-d,i.style.width+=d,r.position.x=0}if(r.position.y<0){const d=Math.abs(r.position.y);i.position.y=i.position.y-d,i.style.height+=d,r.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function dm(t,r){if(t.some(i=>"reset"===i.type))return t.filter(i=>"reset"===i.type).map(i=>i.item);const n=t.filter(i=>"add"===i.type).map(i=>i.item);return r.reduce((i,s)=>{const l=t.filter(m=>m.id===s.id);if(0===l.length)return i.push(s),i;const d={...s};for(const m of l)if(m)switch(m.type){case"select":d.selected=m.selected;break;case"position":typeof m.position<"u"&&(d.position=m.position),typeof m.positionAbsolute<"u"&&(d.positionAbsolute=m.positionAbsolute),typeof m.dragging<"u"&&(d.dragging=m.dragging),d.expandParent&&um(i,d);break;case"dimensions":typeof m.dimensions<"u"&&(d.width=m.dimensions.width,d.height=m.dimensions.height),typeof m.updateStyle<"u"&&(d.style={...d.style||{},...m.dimensions}),"boolean"==typeof m.resizing&&(d.resizing=m.resizing),d.expandParent&&um(i,d);break;case"remove":return i}return i.push(d),i},n)}function hf(t,r){return dm(t,r)}function pm(t,r){return dm(t,r)}const Hi=(t,r)=>({id:t,type:"select",selected:r});function va(t,r){return t.reduce((n,i)=>{const s=r.includes(i.id);return!i.selected&&s?(i.selected=!0,n.push(Hi(i.id,!0))):i.selected&&!s&&(i.selected=!1,n.push(Hi(i.id,!1))),n},[])}const gf=(t,r)=>n=>{n.target===r.current&&t?.(n)},K_=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),fm=(0,S.memo)(({isSelecting:t,selectionMode:r=p.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:s,onPaneClick:l,onPaneContextMenu:d,onPaneScroll:m,onPaneMouseEnter:_,onPaneMouseMove:g,onPaneMouseLeave:v,children:b})=>{const C=(0,S.useRef)(null),x=Ge(),I=(0,S.useRef)(0),T=(0,S.useRef)(0),R=(0,S.useRef)(),{userSelectionActive:E,elementsSelectable:$,dragging:V}=Ye(K_,wt),M=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,T.current=0},Y=ae=>{l?.(ae),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},X=m?ae=>m(ae):void 0,de=$&&(t||E);return S.createElement("div",{className:jt(["react-flow__pane",{dragging:V,selection:t}]),onClick:de?void 0:gf(Y,C),onContextMenu:gf(ae=>{Array.isArray(n)&&n?.includes(2)?ae.preventDefault():d?.(ae)},C),onWheel:gf(X,C),onMouseEnter:de?void 0:_,onMouseDown:de?ae=>{const{resetSelectedElements:w,domNode:P}=x.getState();if(R.current=P?.getBoundingClientRect(),!$||!t||0!==ae.button||ae.target!==C.current||!R.current)return;const{x:z,y:K}=$n(ae,R.current);w(),x.setState({userSelectionRect:{width:0,height:0,startX:z,startY:K,x:z,y:K}}),i?.(ae)}:void 0,onMouseMove:de?ae=>{const{userSelectionRect:w,nodeInternals:P,edges:z,transform:K,onNodesChange:se,onEdgesChange:B,nodeOrigin:Q,getNodes:re}=x.getState();if(!t||!R.current||!w)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const le=$n(ae,R.current),ve=w.startX??0,ge=w.startY??0,Te={...w,x:le.x<ve?le.x:ve,y:le.y<ge?le.y:ge,width:Math.abs(le.x-ve),height:Math.abs(le.y-ge)},Xe=re(),Ue=zf(P,Te,K,r===p.Partial,!0,Q),tt=Bf(Ue,z).map(ct=>ct.id),Ct=Ue.map(ct=>ct.id);if(I.current!==Ct.length){I.current=Ct.length;const ct=va(Xe,Ct);ct.length&&se?.(ct)}if(T.current!==tt.length){T.current=tt.length;const ct=va(z,tt);ct.length&&B?.(ct)}x.setState({userSelectionRect:Te})}:g,onMouseUp:de?ae=>{if(0!==ae.button)return;const{userSelectionRect:w}=x.getState();!E&&w&&ae.target===C.current&&Y?.(ae),x.setState({nodesSelectionActive:I.current>0}),M(),s?.(ae)}:void 0,onMouseLeave:de?ae=>{E&&(x.setState({nodesSelectionActive:I.current>0}),s?.(ae)),M()}:v,ref:C,style:_f},b,S.createElement(J_,null))});function mm(t,r){const n=t.parentNode||t.parentId;if(!n)return!1;const i=r.get(n);return!!i&&(!!i.selected||mm(i,r))}function _m(t,r,n){let i=t;do{if(i?.matches(r))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function q_(t,r,n,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!mm(s,t))&&(s.draggable||r&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function hm(t,r,n,i,s=[0,0],l){const d=function Q_(t,r){return r&&"parent"!==r?[r[0],[r[1][0]-(t.width||0),r[1][1]-(t.height||0)]]:r}(t,t.extent||i);let m=d;const _=t.parentNode||t.parentId;if("parent"!==t.extent||t.expandParent){if(t.extent&&_&&"parent"!==t.extent){const b=n.get(_),{x:C,y:x}=fa(b,s).positionAbsolute;m=[[t.extent[0][0]+C,t.extent[0][1]+x],[t.extent[1][0]+C,t.extent[1][1]+x]]}}else if(_&&t.width&&t.height){const b=n.get(_),{x:C,y:x}=fa(b,s).positionAbsolute;m=b&&hn(C)&&hn(x)&&hn(b.width)&&hn(b.height)?[[C+t.width*s[0],x+t.height*s[1]],[C+b.width-t.width+t.width*s[0],x+b.height-t.height+t.height*s[1]]]:m}else l?.("005",_n.error005()),m=d;let g={x:0,y:0};if(_){const b=n.get(_);g=fa(b,s).positionAbsolute}const v=m&&"parent"!==m?Br(r,m):r;return{position:{x:v.x-g.x,y:v.y-g.y},positionAbsolute:v}}function vf({nodeId:t,dragItems:r,nodeInternals:n}){const i=r.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?i.find(s=>s.id===t):i[0],i]}fm.displayName="Pane";const gm=(t,r,n,i)=>{const s=r.querySelectorAll(t);if(!s||!s.length)return null;const l=Array.from(s),d=r.getBoundingClientRect(),m_x=d.width*i[0],m_y=d.height*i[1];return l.map(_=>{const g=_.getBoundingClientRect();return{id:_.getAttribute("data-handleid"),position:_.getAttribute("data-handlepos"),x:(g.left-d.left-m_x)/n,y:(g.top-d.top-m_y)/n,...Pi(_)}})};function _c(t,r,n){return void 0===n?n:i=>{const s=r().nodeInternals.get(t);s&&n(i,{...s})}}function yf({id:t,store:r,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:l,multiSelectionActive:d,nodeInternals:m,onError:_}=r.getState(),g=m.get(t);g?(r.setState({nodesSelectionActive:!1}),g.selected?(n||g.selected&&d)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):s([t])):_?.("012",_n.error012(t))}function bf(t){return(r,n,i)=>t?.(r,i)}function vm({nodeRef:t,disabled:r=!1,noDragClassName:n,handleSelector:i,nodeId:s,isSelectable:l,selectNodesOnDrag:d}){const m=Ge(),[_,g]=(0,S.useState)(!1),v=(0,S.useRef)([]),b=(0,S.useRef)({x:null,y:null}),C=(0,S.useRef)(0),x=(0,S.useRef)(null),I=(0,S.useRef)({x:0,y:0}),T=(0,S.useRef)(null),R=(0,S.useRef)(!1),E=(0,S.useRef)(!1),$=(0,S.useRef)(!1),V=function eh(){const t=Ge();return(0,S.useCallback)(({sourceEvent:n})=>{const{transform:i,snapGrid:s,snapToGrid:l}=t.getState(),_={x:((n.touches?n.touches[0].clientX:n.clientX)-i[0])/i[2],y:((n.touches?n.touches[0].clientY:n.clientY)-i[1])/i[2]};return{xSnapped:l?s[0]*Math.round(_.x/s[0]):_.x,ySnapped:l?s[1]*Math.round(_.y/s[1]):_.y,..._}},[])}();return(0,S.useEffect)(()=>{if(t?.current){const M=qt(t.current),Y=({x:te,y:U})=>{const{nodeInternals:ce,onNodeDrag:ie,onSelectionDrag:de,updateNodePositions:ae,nodeExtent:w,snapGrid:P,snapToGrid:z,nodeOrigin:K,onError:se}=m.getState();b.current={x:te,y:U};let B=!1,Q={x:0,y:0,x2:0,y2:0};if(v.current.length>1&&w){const le=Rd(v.current,K);Q=Xi(le)}if(v.current=v.current.map(le=>{const ve={x:te-le.distance.x,y:U-le.distance.y};z&&(ve.x=P[0]*Math.round(ve.x/P[0]),ve.y=P[1]*Math.round(ve.y/P[1]));const ge=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];v.current.length>1&&w&&!le.extent&&(ge[0][0]=le.positionAbsolute.x-Q.x+w[0][0],ge[1][0]=le.positionAbsolute.x+(le.width??0)-Q.x2+w[1][0],ge[0][1]=le.positionAbsolute.y-Q.y+w[0][1],ge[1][1]=le.positionAbsolute.y+(le.height??0)-Q.y2+w[1][1]);const Te=hm(le,ve,ce,ge,K,se);return B=B||le.position.x!==Te.position.x||le.position.y!==Te.position.y,le.position=Te.position,le.positionAbsolute=Te.positionAbsolute,le}),!B)return;ae(v.current,!0,!0),g(!0);const re=s?ie:bf(de);if(re&&T.current){const[le,ve]=vf({nodeId:s,dragItems:v.current,nodeInternals:ce});re(T.current,le,ve)}},H=()=>{if(!x.current)return;const[te,U]=ca(I.current,x.current);if(0!==te||0!==U){const{transform:ce,panBy:ie}=m.getState();b.current.x=(b.current.x??0)-te/ce[2],b.current.y=(b.current.y??0)-U/ce[2],ie({x:te,y:U})&&Y(b.current)}C.current=requestAnimationFrame(H)},X=te=>{const{nodeInternals:U,multiSelectionActive:ce,nodesDraggable:ie,unselectNodesAndEdges:de,onNodeDragStart:ae,onSelectionDragStart:w}=m.getState();E.current=!0;const P=s?ae:bf(w);(!d||!l)&&!ce&&s&&(U.get(s)?.selected||de()),s&&l&&d&&yf({id:s,store:m,nodeRef:t});const z=V(te);if(b.current=z,v.current=q_(U,ie,z,s),P&&v.current){const[K,se]=vf({nodeId:s,dragItems:v.current,nodeInternals:U});P(te.sourceEvent,K,se)}};if(!r){const te=function Qp(){var m,_,g,v,t=qp,r=Li,n=Nd,i=ft,s={},l=hr("start","drag","end"),d=0,b=0;function C(M){M.on("mousedown.drag",x).filter(i).on("touchstart.drag",R).on("touchmove.drag",E,Hu).on("touchend.drag touchcancel.drag",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(M,Y){if(!v&&t.call(this,M,Y)){var H=V(this,r.call(this,M,Y),M,Y,"mouse");H&&(qt(M.view).on("mousemove.drag",I,No).on("mouseup.drag",T,No),En(M.view),Vs(M),g=!1,m=M.clientX,_=M.clientY,H("start",M))}}function I(M){if(Yn(M),!g){var Y=M.clientX-m,H=M.clientY-_;g=Y*Y+H*H>b}s.mouse("drag",M)}function T(M){qt(M.view).on("mousemove.drag mouseup.drag",null),Ri(M.view,g),Yn(M),s.mouse("end",M)}function R(M,Y){if(t.call(this,M,Y)){var U,ce,H=M.changedTouches,X=r.call(this,M,Y),te=H.length;for(U=0;U<te;++U)(ce=V(this,X,M,Y,H[U].identifier,H[U]))&&(Vs(M),ce("start",M,H[U]))}}function E(M){var X,te,Y=M.changedTouches,H=Y.length;for(X=0;X<H;++X)(te=s[Y[X].identifier])&&(Yn(M),te("drag",M,Y[X]))}function $(M){var X,te,Y=M.changedTouches,H=Y.length;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),X=0;X<H;++X)(te=s[Y[X].identifier])&&(Vs(M),te("end",M,Y[X]))}function V(M,Y,H,X,te,U){var de,ae,w,ce=l.copy(),ie=$e(U||H,Y);if(null!=(w=n.call(M,new mo("beforestart",{sourceEvent:H,target:C,identifier:te,active:d,x:ie[0],y:ie[1],dx:0,dy:0,dispatch:ce}),X)))return de=w.x-ie[0]||0,ae=w.y-ie[1]||0,function P(z,K,se){var Q,B=ie;switch(z){case"start":s[te]=P,Q=d++;break;case"end":delete s[te],--d;case"drag":ie=$e(se||K,Y),Q=d}ce.call(z,M,new mo(z,{sourceEvent:K,subject:w,target:C,identifier:te,active:Q,x:ie[0]+de,y:ie[1]+ae,dx:ie[0]-B[0],dy:ie[1]-B[1],dispatch:ce}),X)}}return C.filter=function(M){return arguments.length?(t="function"==typeof M?M:zr(!!M),C):t},C.container=function(M){return arguments.length?(r="function"==typeof M?M:zr(M),C):r},C.subject=function(M){return arguments.length?(n="function"==typeof M?M:zr(M),C):n},C.touchable=function(M){return arguments.length?(i="function"==typeof M?M:zr(!!M),C):i},C.on=function(){var M=l.on.apply(l,arguments);return M===l?C:M},C.clickDistance=function(M){return arguments.length?(b=(M=+M)*M,C):Math.sqrt(b)},C}().on("start",U=>{const{domNode:ce,nodeDragThreshold:ie}=m.getState();0===ie&&X(U),$.current=!1;const de=V(U);b.current=de,x.current=ce?.getBoundingClientRect()||null,I.current=$n(U.sourceEvent,x.current)}).on("drag",U=>{const ce=V(U),{autoPanOnNodeDrag:ie,nodeDragThreshold:de}=m.getState();if("touchmove"===U.sourceEvent.type&&U.sourceEvent.touches.length>1&&($.current=!0),!$.current){if(!R.current&&E.current&&ie&&(R.current=!0,H()),!E.current){const ae=ce.xSnapped-(b?.current?.x??0),w=ce.ySnapped-(b?.current?.y??0);Math.sqrt(ae*ae+w*w)>de&&X(U)}(b.current.x!==ce.xSnapped||b.current.y!==ce.ySnapped)&&v.current&&E.current&&(T.current=U.sourceEvent,I.current=$n(U.sourceEvent,x.current),Y(ce))}}).on("end",U=>{if(E.current&&!$.current&&(g(!1),R.current=!1,E.current=!1,cancelAnimationFrame(C.current),v.current)){const{updateNodePositions:ce,nodeInternals:ie,onNodeDragStop:de,onSelectionDragStop:ae}=m.getState(),w=s?de:bf(ae);if(ce(v.current,!1,!1),w){const[P,z]=vf({nodeId:s,dragItems:v.current,nodeInternals:ie});w(U.sourceEvent,P,z)}}}).filter(U=>{const ce=U.target;return!U.button&&(!n||!_m(ce,`.${n}`,t))&&(!i||_m(ce,i,t))});return M.call(te),()=>{M.on(".drag",null)}}M.on(".drag",null)}},[t,r,n,i,l,m,s,d,V]),_}function ym(){const t=Ge();return(0,S.useCallback)(n=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:l,getNodes:d,snapToGrid:m,snapGrid:_,onError:g,nodesDraggable:v}=t.getState(),b=d().filter($=>$.selected&&($.draggable||v&&typeof $.draggable>"u")),I=n.isShiftPressed?4:1,T=n.x*(m?_[0]:5)*I,R=n.y*(m?_[1]:5)*I;l(b.map($=>{if($.positionAbsolute){const V={x:$.positionAbsolute.x+T,y:$.positionAbsolute.y+R};m&&(V.x=_[0]*Math.round(V.x/_[0]),V.y=_[1]*Math.round(V.y/_[1]));const{positionAbsolute:M,position:Y}=hm($,V,i,s,void 0,g);$.position=Y,$.positionAbsolute=M}return $}),!0,!1)},[])}const ya={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var hc=t=>{const r=({id:n,type:i,data:s,xPos:l,yPos:d,xPosOrigin:m,yPosOrigin:_,selected:g,onClick:v,onMouseEnter:b,onMouseMove:C,onMouseLeave:x,onContextMenu:I,onDoubleClick:T,style:R,className:E,isDraggable:$,isSelectable:V,isConnectable:M,isFocusable:Y,selectNodesOnDrag:H,sourcePosition:X,targetPosition:te,hidden:U,resizeObserver:ce,dragHandle:ie,zIndex:de,isParent:ae,noDragClassName:w,noPanClassName:P,initialized:z,disableKeyboardA11y:K,ariaLabel:se,rfId:B,hasHandleBounds:Q})=>{const re=Ge(),le=(0,S.useRef)(null),ve=(0,S.useRef)(null),ge=(0,S.useRef)(X),Te=(0,S.useRef)(te),Xe=(0,S.useRef)(i),Ue=V||$||v||b||C||x,tt=ym(),Ct=_c(n,re.getState,b),ct=_c(n,re.getState,C),ho=_c(n,re.getState,x),qn=_c(n,re.getState,I),go=_c(n,re.getState,T);(0,S.useEffect)(()=>()=>{ve.current&&(ce?.unobserve(ve.current),ve.current=null)},[]),(0,S.useEffect)(()=>{if(le.current&&!U){const ut=le.current;(!z||!Q||ve.current!==ut)&&(ve.current&&ce?.unobserve(ve.current),ce?.observe(ut),ve.current=ut)}},[U,z,Q]),(0,S.useEffect)(()=>{const ut=Xe.current!==i,ke=ge.current!==X,Gn=Te.current!==te;le.current&&(ut||ke||Gn)&&(ut&&(Xe.current=i),ke&&(ge.current=X),Gn&&(Te.current=te),re.getState().updateNodeDimensions([{id:n,nodeElement:le.current,forceUpdate:!0}]))},[n,i,X,te]);const Po=vm({nodeRef:le,disabled:U||!$,noDragClassName:w,handleSelector:ie,nodeId:n,isSelectable:V,selectNodesOnDrag:H});return U?null:S.createElement("div",{className:jt(["react-flow__node",`react-flow__node-${i}`,{[P]:$},E,{selected:g,selectable:V,parent:ae,dragging:Po}]),ref:le,style:{zIndex:de,transform:`translate(${m}px,${_}px)`,pointerEvents:Ue?"all":"none",visibility:z?"visible":"hidden",...R},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ct,onMouseMove:ct,onMouseLeave:ho,onContextMenu:qn,onClick:ut=>{const{nodeDragThreshold:ke}=re.getState();if(V&&(!H||!$||ke>0)&&yf({id:n,store:re,nodeRef:le}),v){const Gn=re.getState().nodeInternals.get(n);Gn&&v(ut,{...Gn})}},onDoubleClick:go,onKeyDown:Y?ut=>{da(ut)||K||(Yr.includes(ut.key)&&V?yf({id:n,store:re,unselect:"Escape"===ut.key,nodeRef:le}):$&&g&&Object.prototype.hasOwnProperty.call(ya,ut.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${ut.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~d}`}),tt({x:ya[ut.key].x,y:ya[ut.key].y,isShiftPressed:ut.shiftKey})))}:void 0,tabIndex:Y?0:void 0,role:Y?"button":void 0,"aria-describedby":K?void 0:`${tm}-${B}`,"aria-label":se},S.createElement(De,{value:n},S.createElement(t,{id:n,data:s,type:i,xPos:l,yPos:d,selected:g,isConnectable:M,sourcePosition:X,targetPosition:te,dragging:Po,dragHandle:ie,zIndex:de})))};return r.displayName="NodeWrapper",(0,S.memo)(r)};const th=t=>{const r=t.getNodes().filter(n=>n.selected);return{...Rd(r,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var oh=(0,S.memo)(function nh({onSelectionContextMenu:t,noPanClassName:r,disableKeyboardA11y:n}){const i=Ge(),{width:s,height:l,x:d,y:m,transformString:_,userSelectionActive:g}=Ye(th,wt),v=ym(),b=(0,S.useRef)(null);if((0,S.useEffect)(()=>{n||b.current?.focus({preventScroll:!0})},[n]),vm({nodeRef:b}),g||!s||!l)return null;const C=t?I=>{const T=i.getState().getNodes().filter(R=>R.selected);t(I,T)}:void 0;return S.createElement("div",{className:jt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:_}},S.createElement("div",{ref:b,className:"react-flow__nodesselection-rect",onContextMenu:C,tabIndex:n?void 0:-1,onKeyDown:n?void 0:I=>{Object.prototype.hasOwnProperty.call(ya,I.key)&&v({x:ya[I.key].x,y:ya[I.key].y,isShiftPressed:I.shiftKey})},style:{width:s,height:l,top:m,left:d}}))});const ih=t=>t.nodesSelectionActive,bm=({children:t,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:d,deleteKeyCode:m,onMove:_,onMoveStart:g,onMoveEnd:v,selectionKeyCode:b,selectionOnDrag:C,selectionMode:x,onSelectionStart:I,onSelectionEnd:T,multiSelectionKeyCode:R,panActivationKeyCode:E,zoomActivationKeyCode:$,elementsSelectable:V,zoomOnScroll:M,zoomOnPinch:Y,panOnScroll:H,panOnScrollSpeed:X,panOnScrollMode:te,zoomOnDoubleClick:U,panOnDrag:ce,defaultViewport:ie,translateExtent:de,minZoom:ae,maxZoom:w,preventScrolling:P,onSelectionContextMenu:z,noWheelClassName:K,noPanClassName:se,disableKeyboardA11y:B})=>{const Q=Ye(ih),re=mc(b),le=mc(E),ve=le||ce,ge=le||H,Te=re||C&&!0!==ve;return(({deleteKeyCode:t,multiSelectionKeyCode:r})=>{const n=Ge(),{deleteElements:i}=mf(),s=mc(t,P_),l=mc(r);(0,S.useEffect)(()=>{if(s){const{edges:d,getNodes:m}=n.getState(),_=m().filter(v=>v.selected),g=d.filter(v=>v.selected);i({nodes:_,edges:g}),n.setState({nodesSelectionActive:!1})}},[s]),(0,S.useEffect)(()=>{n.setState({multiSelectionActive:l})},[l])})({deleteKeyCode:m,multiSelectionKeyCode:R}),S.createElement(W_,{onMove:_,onMoveStart:g,onMoveEnd:v,onPaneContextMenu:l,elementsSelectable:V,zoomOnScroll:M,zoomOnPinch:Y,panOnScroll:ge,panOnScrollSpeed:X,panOnScrollMode:te,zoomOnDoubleClick:U,panOnDrag:!re&&ve,defaultViewport:ie,translateExtent:de,minZoom:ae,maxZoom:w,zoomActivationKeyCode:$,preventScrolling:P,noWheelClassName:K,noPanClassName:se},S.createElement(fm,{onSelectionStart:I,onSelectionEnd:T,onPaneClick:r,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:d,panOnDrag:ve,isSelecting:!!Te,selectionMode:x},t,Q&&S.createElement(oh,{onSelectionContextMenu:z,noPanClassName:se,disableKeyboardA11y:B})))};bm.displayName="FlowRenderer";var rh=(0,S.memo)(bm);function ah(t){return{input:hc(t.input||Jf),default:hc(t.default||df),output:hc(t.output||qf),group:hc(t.group||pf),...Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,l)=>(s[l]=hc(t[l]||df),s),{})}}const ch=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),xm=t=>{const{nodesDraggable:r,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:l,onError:d}=Ye(ch,wt),m=function sh(t){return Ye((0,S.useCallback)(n=>t?zf(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}(t.onlyRenderVisibleElements),_=(0,S.useRef)(),g=(0,S.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;const v=new ResizeObserver(b=>{const C=b.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));l(C)});return _.current=v,v},[]);return(0,S.useEffect)(()=>()=>{_?.current?.disconnect()},[]),S.createElement("div",{className:"react-flow__nodes",style:_f},m.map(v=>{let b=v.type||"default";t.nodeTypes[b]||(d?.("003",_n.error003(b)),b="default");const C=t.nodeTypes[b]||t.nodeTypes.default,x=!!(v.draggable||r&&typeof v.draggable>"u"),I=!!(v.selectable||s&&typeof v.selectable>"u"),T=!!(v.connectable||n&&typeof v.connectable>"u"),R=!!(v.focusable||i&&typeof v.focusable>"u"),E=t.nodeExtent?Br(v.positionAbsolute,t.nodeExtent):v.positionAbsolute,$=E?.x??0,V=E?.y??0,M=(({x:t,y:r,width:n,height:i,origin:s})=>n&&i?s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:r}:{x:t-n*s[0],y:r-i*s[1]}:{x:t,y:r})({x:$,y:V,width:v.width??0,height:v.height??0,origin:t.nodeOrigin});return S.createElement(C,{key:v.id,id:v.id,className:v.className,style:v.style,type:b,data:v.data,sourcePosition:v.sourcePosition||k.Bottom,targetPosition:v.targetPosition||k.Top,hidden:v.hidden,xPos:$,yPos:V,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!v.selected,isDraggable:x,isSelectable:I,isConnectable:T,isFocusable:R,resizeObserver:g,dragHandle:v.dragHandle,zIndex:v[et]?.z??0,isParent:!!v[et]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!v.width&&!!v.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:v.ariaLabel,hasHandleBounds:!!v[et]?.handleBounds})}))};xm.displayName="NodeRenderer";var uh=(0,S.memo)(xm);const dh=(t,r,n)=>n===k.Left?t-r:n===k.Right?t+r:t,ph=(t,r,n)=>n===k.Top?t-r:n===k.Bottom?t+r:t,Cm="react-flow__edgeupdater",km=({position:t,centerX:r,centerY:n,radius:i=10,onMouseDown:s,onMouseEnter:l,onMouseOut:d,type:m})=>S.createElement("circle",{onMouseDown:s,onMouseEnter:l,onMouseOut:d,className:jt([Cm,`${Cm}-${m}`]),cx:dh(r,i,t),cy:ph(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),fh=()=>!0;var ba=t=>{const r=({id:n,className:i,type:s,data:l,onClick:d,onEdgeDoubleClick:m,selected:_,animated:g,label:v,labelStyle:b,labelShowBg:C,labelBgStyle:x,labelBgPadding:I,labelBgBorderRadius:T,style:R,source:E,target:$,sourceX:V,sourceY:M,targetX:Y,targetY:H,sourcePosition:X,targetPosition:te,elementsSelectable:U,hidden:ce,sourceHandleId:ie,targetHandleId:de,onContextMenu:ae,onMouseEnter:w,onMouseMove:P,onMouseLeave:z,reconnectRadius:K,onReconnect:se,onReconnectStart:B,onReconnectEnd:Q,markerEnd:re,markerStart:le,rfId:ve,ariaLabel:ge,isFocusable:Te,isReconnectable:Xe,pathOptions:Ue,interactionWidth:tt,disableKeyboardA11y:Ct})=>{const ct=(0,S.useRef)(null),[ho,qn]=(0,S.useState)(!1),[go,Qn]=(0,S.useState)(!1),Vt=Ge(),Po=(0,S.useMemo)(()=>`url('#${sf(le,ve)}')`,[le,ve]),ut=(0,S.useMemo)(()=>`url('#${sf(re,ve)}')`,[re,ve]);if(ce)return null;const Gn=Oo(n,Vt.getState,m),Jr=Oo(n,Vt.getState,ae),vc=Oo(n,Vt.getState,w),Ca=Oo(n,Vt.getState,P),ka=Oo(n,Vt.getState,z),ui=(rn,Xo)=>{if(0!==rn.button)return;const{edges:Qr,isValidConnection:es}=Vt.getState(),Ea=Xo?$:E,Yo=(Xo?de:ie)||null,ts=Xo?"target":"source",If=es||fh,Tf=Xo,bc=Qr.find(ns=>ns.id===n);Qn(!0),B?.(rn,bc,ts),Yf({event:rn,handleId:Yo,nodeId:Ea,onConnect:ns=>se?.(bc,ns),isTarget:Tf,getState:Vt.getState,setState:Vt.setState,isValidConnection:If,edgeUpdaterType:ts,onReconnectEnd:ns=>{Qn(!1),Q?.(ns,bc,ts)}})},qr=()=>qn(!0),wa=()=>qn(!1);return S.createElement("g",{className:jt(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:_,animated:g,inactive:!U&&!d,updating:ho}]),onClick:rn=>{const{edges:Xo,addSelectedEdges:Qr,unselectNodesAndEdges:es,multiSelectionActive:Ea}=Vt.getState(),Yo=Xo.find(ts=>ts.id===n);Yo&&(U&&(Vt.setState({nodesSelectionActive:!1}),Yo.selected&&Ea?(es({nodes:[],edges:[Yo]}),ct.current?.blur()):Qr([n])),d&&d(rn,Yo))},onDoubleClick:Gn,onContextMenu:Jr,onMouseEnter:vc,onMouseMove:Ca,onMouseLeave:ka,onKeyDown:Te?rn=>{if(!Ct&&Yr.includes(rn.key)&&U){const{unselectNodesAndEdges:Xo,addSelectedEdges:Qr,edges:es}=Vt.getState();"Escape"===rn.key?(ct.current?.blur(),Xo({edges:[es.find(Yo=>Yo.id===n)]})):Qr([n])}}:void 0,tabIndex:Te?0:void 0,role:Te?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===ge?void 0:ge||`Edge from ${E} to ${$}`,"aria-describedby":Te?`${nm}-${ve}`:void 0,ref:ct},!go&&S.createElement(t,{id:n,source:E,target:$,selected:_,animated:g,label:v,labelStyle:b,labelShowBg:C,labelBgStyle:x,labelBgPadding:I,labelBgBorderRadius:T,data:l,style:R,sourceX:V,sourceY:M,targetX:Y,targetY:H,sourcePosition:X,targetPosition:te,sourceHandleId:ie,targetHandleId:de,markerStart:Po,markerEnd:ut,pathOptions:Ue,interactionWidth:tt}),Xe&&S.createElement(S.Fragment,null,("source"===Xe||!0===Xe)&&S.createElement(km,{position:X,centerX:V,centerY:M,radius:K,onMouseDown:rn=>ui(rn,!0),onMouseEnter:qr,onMouseOut:wa,type:"source"}),("target"===Xe||!0===Xe)&&S.createElement(km,{position:te,centerX:Y,centerY:H,radius:K,onMouseDown:rn=>ui(rn,!1),onMouseEnter:qr,onMouseOut:wa,type:"target"})))};return r.displayName="EdgeWrapper",(0,S.memo)(r)};function mh(t){return{default:ba(t.default||Ce),straight:ba(t.bezier||ee),step:ba(t.step||F),smoothstep:ba(t.step||G),simplebezier:ba(t.simplebezier||W),...Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,l)=>(s[l]=ba(t[l]||Ce),s),{})}}function Sm(t,r,n=null){const i=(n?.x||0)+r.x,s=(n?.y||0)+r.y,l=n?.width||r.width,d=n?.height||r.height;switch(t){case k.Top:return{x:i+l/2,y:s};case k.Right:return{x:i+l,y:s+d/2};case k.Bottom:return{x:i+l/2,y:s+d};case k.Left:return{x:i,y:s+d/2}}}function wm(t,r){return t?1!==t.length&&r?r&&t.find(n=>n.id===r)||null:t[0]:null}function Nm(t){const r=t?.[et]?.handleBounds||null,n=r&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},r,!!n]}const gh=[{level:0,isMaxLevel:!0,edges:[]}];const Em={[y.Arrow]:({color:t="none",strokeWidth:r=1})=>S.createElement("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[y.ArrowClosed]:({color:t="none",strokeWidth:r=1})=>S.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},kh=({id:t,type:r,color:n,width:i=12.5,height:s=12.5,markerUnits:l="strokeWidth",strokeWidth:d,orient:m="auto-start-reverse"})=>{const _=function Ch(t){const r=Ge();return(0,S.useMemo)(()=>Object.prototype.hasOwnProperty.call(Em,t)?Em[t]:(r.getState().onError?.("009",_n.error009(t)),null),[t])}(r);return _?S.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:m,refX:"0",refY:"0"},S.createElement(_,{color:n,strokeWidth:d})):null},Im=({defaultColor:t,rfId:r})=>{const n=Ye((0,S.useCallback)((({defaultColor:t,rfId:r})=>n=>{const i=[];return n.edges.reduce((s,l)=>([l.markerStart,l.markerEnd].forEach(d=>{if(d&&"object"==typeof d){const m=sf(d,r);i.includes(m)||(s.push({id:m,color:d.color||t,...d}),i.push(m))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))})({defaultColor:t,rfId:r}),[t,r]),(i,s)=>!(i.length!==s.length||i.some((l,d)=>l.id!==s[d].id)));return S.createElement("defs",null,n.map(i=>S.createElement(kh,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Im.displayName="MarkerDefinitions";var wh=(0,S.memo)(Im);const Nh=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Tm=({defaultMarkerColor:t,onlyRenderVisibleElements:r,elevateEdgesOnSelect:n,rfId:i,edgeTypes:s,noPanClassName:l,onEdgeContextMenu:d,onEdgeMouseEnter:m,onEdgeMouseMove:_,onEdgeMouseLeave:g,onEdgeClick:v,onEdgeDoubleClick:b,onReconnect:C,onReconnectStart:x,onReconnectEnd:I,reconnectRadius:T,children:R,disableKeyboardA11y:E})=>{const{edgesFocusable:$,edgesUpdatable:V,elementsSelectable:M,width:Y,height:H,connectionMode:X,nodeInternals:te,onError:U}=Ye(Nh,wt),ce=function yh(t,r,n){const i=Ye((0,S.useCallback)(s=>t?s.edges.filter(l=>{const d=r.get(l.source),m=r.get(l.target);return d?.width&&d?.height&&m?.width&&m?.height&&function hh({sourcePos:t,targetPos:r,sourceWidth:n,sourceHeight:i,targetWidth:s,targetHeight:l,width:d,height:m,transform:_}){const g={x:Math.min(t.x,r.x),y:Math.min(t.y,r.y),x2:Math.max(t.x+n,r.x+s),y2:Math.max(t.y+i,r.y+l)};g.x===g.x2&&(g.x2+=1),g.y===g.y2&&(g.y2+=1);const v=Xi({x:(0-_[0])/_[2],y:(0-_[1])/_[2],width:d/_[2],height:m/_[2]}),b=Math.max(0,Math.min(v.x2,g.x2)-Math.max(v.x,g.x)),C=Math.max(0,Math.min(v.y2,g.y2)-Math.max(v.y,g.y));return Math.ceil(b*C)>0}({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:m.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:m.width,targetHeight:m.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,r]));return function vh(t,r,n=!1){let i=-1;const s=t.reduce((d,m)=>{const _=hn(m.zIndex);let g=_?m.zIndex:0;if(n){const v=r.get(m.target),b=r.get(m.source),C=m.selected||v?.selected||b?.selected,x=Math.max(b?.[et]?.z||0,v?.[et]?.z||0,1e3);g=(_?m.zIndex:0)+(C?x:0)}return d[g]?d[g].push(m):d[g]=[m],i=g>i?g:i,d},{}),l=Object.entries(s).map(([d,m])=>{const _=+d;return{edges:m,level:_,isMaxLevel:_===i}});return 0===l.length?gh:l}(i,r,n)}(r,te,n);return Y?S.createElement(S.Fragment,null,ce.map(({level:ie,edges:de,isMaxLevel:ae})=>S.createElement("svg",{key:ie,style:{zIndex:ie},width:Y,height:H,className:"react-flow__edges react-flow__container"},ae&&S.createElement(wh,{defaultColor:t,rfId:i}),S.createElement("g",null,de.map(w=>{const[P,z,K]=Nm(te.get(w.source)),[se,B,Q]=Nm(te.get(w.target));if(!K||!Q)return null;let re=w.type||"default";s[re]||(U?.("011",_n.error011(re)),re="default");const le=s[re]||s.default,ve=X===c.Strict?B.target:(B.target??[]).concat(B.source??[]),ge=wm(z.source,w.sourceHandle),Te=wm(ve,w.targetHandle),Xe=ge?.position||k.Bottom,Ue=Te?.position||k.Top,tt=!!(w.focusable||$&&typeof w.focusable>"u"),Ct=w.reconnectable||w.updatable,ct=typeof C<"u"&&(Ct||V&&typeof Ct>"u");if(!ge||!Te)return U?.("008",_n.error008(ge,w)),null;const{sourceX:ho,sourceY:qn,targetX:go,targetY:Qn}=((t,r,n,i,s,l)=>{const d=Sm(n,t,r),m=Sm(l,i,s);return{sourceX:d.x,sourceY:d.y,targetX:m.x,targetY:m.y}})(P,ge,Xe,se,Te,Ue);return S.createElement(le,{key:w.id,id:w.id,className:jt([w.className,l]),type:re,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:ho,sourceY:qn,targetX:go,targetY:Qn,sourcePosition:Xe,targetPosition:Ue,elementsSelectable:M,onContextMenu:d,onMouseEnter:m,onMouseMove:_,onMouseLeave:g,onClick:v,onEdgeDoubleClick:b,onReconnect:C,onReconnectStart:x,onReconnectEnd:I,reconnectRadius:T,rfId:i,ariaLabel:w.ariaLabel,isFocusable:tt,isReconnectable:ct,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth,disableKeyboardA11y:E})})))),R):null};Tm.displayName="EdgeRenderer";var Eh=(0,S.memo)(Tm);const Ih=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Th({children:t}){const r=Ye(Ih);return S.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:r}},t)}const Rh={[k.Left]:k.Right,[k.Right]:k.Left,[k.Top]:k.Bottom,[k.Bottom]:k.Top},Am=({nodeId:t,handleType:r,style:n,type:i=h.Bezier,CustomComponent:s,connectionStatus:l})=>{const{fromNode:d,handleId:m,toX:_,toY:g,connectionMode:v}=Ye((0,S.useCallback)(H=>({fromNode:H.nodeInternals.get(t),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[t]),wt),b=d?.[et]?.handleBounds;let C=b?.[r];if(v===c.Loose&&(C=C||b?.["source"===r?"target":"source"]),!d||!C)return null;const x=m?C.find(H=>H.id===m):C[0],I=x?x.x+x.width/2:(d.width??0)/2,T=x?x.y+x.height/2:d.height??0,R=(d.positionAbsolute?.x??0)+I,E=(d.positionAbsolute?.y??0)+T,$=x?.position,V=$?Rh[$]:null;if(!$||!V)return null;if(s)return S.createElement(s,{connectionLineType:i,connectionLineStyle:n,fromNode:d,fromHandle:x,fromX:R,fromY:E,toX:_,toY:g,fromPosition:$,toPosition:V,connectionStatus:l});let M="";const Y={sourceX:R,sourceY:E,sourcePosition:$,targetX:_,targetY:g,targetPosition:V};return i===h.Bezier?[M]=be(Y):i===h.Step?[M]=lt({...Y,borderRadius:0}):i===h.SmoothStep?[M]=lt(Y):i===h.SimpleBezier?[M]=O(Y):M=`M${R},${E} ${_},${g}`,S.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:n})};Am.displayName="ConnectionLine";const Fh=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function jh({containerStyle:t,style:r,type:n,component:i}){const{nodeId:s,handleType:l,nodesConnectable:d,width:m,height:_,connectionStatus:g}=Ye(Fh,wt);return s&&l&&m&&d?S.createElement("svg",{style:t,width:m,height:_,className:"react-flow__edges react-flow__connectionline react-flow__container"},S.createElement("g",{className:jt(["react-flow__connection",g])},S.createElement(Am,{nodeId:s,handleType:l,style:r,type:n,CustomComponent:i,connectionStatus:g}))):null}function Rm(t,r){return(0,S.useRef)(null),Ge(),(0,S.useMemo)(()=>r(t),[t])}const Fm=({nodeTypes:t,edgeTypes:r,onMove:n,onMoveStart:i,onMoveEnd:s,onInit:l,onNodeClick:d,onEdgeClick:m,onNodeDoubleClick:_,onEdgeDoubleClick:g,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:C,onNodeContextMenu:x,onSelectionContextMenu:I,onSelectionStart:T,onSelectionEnd:R,connectionLineType:E,connectionLineStyle:$,connectionLineComponent:V,connectionLineContainerStyle:M,selectionKeyCode:Y,selectionOnDrag:H,selectionMode:X,multiSelectionKeyCode:te,panActivationKeyCode:U,zoomActivationKeyCode:ce,deleteKeyCode:ie,onlyRenderVisibleElements:de,elementsSelectable:ae,selectNodesOnDrag:w,defaultViewport:P,translateExtent:z,minZoom:K,maxZoom:se,preventScrolling:B,defaultMarkerColor:Q,zoomOnScroll:re,zoomOnPinch:le,panOnScroll:ve,panOnScrollSpeed:ge,panOnScrollMode:Te,zoomOnDoubleClick:Xe,panOnDrag:Ue,onPaneClick:tt,onPaneMouseEnter:Ct,onPaneMouseMove:ct,onPaneMouseLeave:ho,onPaneScroll:qn,onPaneContextMenu:go,onEdgeContextMenu:Qn,onEdgeMouseEnter:Vt,onEdgeMouseMove:Po,onEdgeMouseLeave:ut,onReconnect:ke,onReconnectStart:Gn,onReconnectEnd:Jr,reconnectRadius:vc,noDragClassName:Ca,noWheelClassName:ka,noPanClassName:ui,elevateEdgesOnSelect:Sa,disableKeyboardA11y:Kr,nodeOrigin:qr,nodeExtent:wa,rfId:Na})=>{const yc=Rm(t,ah),rn=Rm(r,mh);return function Ah(t){const r=mf(),n=(0,S.useRef)(!1);(0,S.useEffect)(()=>{!n.current&&r.viewportInitialized&&t&&(setTimeout(()=>t(r),1),n.current=!0)},[t,r.viewportInitialized])}(l),S.createElement(rh,{onPaneClick:tt,onPaneMouseEnter:Ct,onPaneMouseMove:ct,onPaneMouseLeave:ho,onPaneContextMenu:go,onPaneScroll:qn,deleteKeyCode:ie,selectionKeyCode:Y,selectionOnDrag:H,selectionMode:X,onSelectionStart:T,onSelectionEnd:R,multiSelectionKeyCode:te,panActivationKeyCode:U,zoomActivationKeyCode:ce,elementsSelectable:ae,onMove:n,onMoveStart:i,onMoveEnd:s,zoomOnScroll:re,zoomOnPinch:le,zoomOnDoubleClick:Xe,panOnScroll:ve,panOnScrollSpeed:ge,panOnScrollMode:Te,panOnDrag:Ue,defaultViewport:P,translateExtent:z,minZoom:K,maxZoom:se,onSelectionContextMenu:I,preventScrolling:B,noDragClassName:Ca,noWheelClassName:ka,noPanClassName:ui,disableKeyboardA11y:Kr},S.createElement(Th,null,S.createElement(Eh,{edgeTypes:rn,onEdgeClick:m,onEdgeDoubleClick:g,onlyRenderVisibleElements:de,onEdgeContextMenu:Qn,onEdgeMouseEnter:Vt,onEdgeMouseMove:Po,onEdgeMouseLeave:ut,onReconnect:ke,onReconnectStart:Gn,onReconnectEnd:Jr,reconnectRadius:vc,defaultMarkerColor:Q,noPanClassName:ui,elevateEdgesOnSelect:!!Sa,disableKeyboardA11y:Kr,rfId:Na},S.createElement(jh,{style:$,type:E,component:V,containerStyle:M})),S.createElement("div",{className:"react-flow__edgelabel-renderer"}),S.createElement(uh,{nodeTypes:yc,onNodeClick:d,onNodeDoubleClick:_,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:C,onNodeContextMenu:x,selectNodesOnDrag:w,onlyRenderVisibleElements:de,noPanClassName:ui,noDragClassName:Ca,disableKeyboardA11y:Kr,nodeOrigin:qr,nodeExtent:wa,rfId:Na})))};Fm.displayName="GraphView";var Mh=(0,S.memo)(Fm);const xf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ui={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:xf,nodeExtent:xf,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:c.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,r)=>{},isValidConnection:void 0},Cf=({children:t})=>{const r=(0,S.useRef)(null);return r.current||(r.current=(()=>{return t=(t,r)=>({...Ui,setNodes:n=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:l}=r();t({nodeInternals:ff(n,i,s,l)})},getNodes:()=>Array.from(r().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=r();t({edges:n.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(n,i)=>{const s=typeof n<"u",l=typeof i<"u",d=s?ff(n,new Map,r().nodeOrigin,r().elevateNodesOnSelect):new Map;t({nodeInternals:d,edges:l?i:[],hasDefaultNodes:s,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:l,fitViewOnInitDone:d,fitViewOnInitOptions:m,domNode:_,nodeOrigin:g}=r(),v=_?.querySelector(".react-flow__viewport");if(!v)return;const b=window.getComputedStyle(v),{m22:C}=new window.DOMMatrixReadOnly(b.transform),x=n.reduce((T,R)=>{const E=s.get(R.id);if(E?.hidden)s.set(E.id,{...E,[et]:{...E[et],handleBounds:void 0}});else if(E){const $=Pi(R.nodeElement);$.width&&$.height&&(E.width!==$.width||E.height!==$.height||R.forceUpdate)&&(s.set(E.id,{...E,[et]:{...E[et],handleBounds:{source:gm(".source",R.nodeElement,C,g),target:gm(".target",R.nodeElement,C,g)}},...$}),T.push({id:E.id,type:"dimensions",dimensions:$}))}return T},[]);sm(s,g);const I=d||l&&!d&&am(r,{initial:!0,...m});t({nodeInternals:new Map(s),fitViewOnInitDone:I}),x?.length>0&&i?.(x)},updateNodePositions:(n,i=!0,s=!1)=>{const{triggerNodeChanges:l}=r();l(n.map(m=>{const _={id:m.id,type:"position",dragging:s};return i&&(_.positionAbsolute=m.positionAbsolute,_.position=m.position),_}))},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:l,nodeOrigin:d,getNodes:m,elevateNodesOnSelect:_}=r();if(n?.length){if(l){const v=ff(hf(n,m()),s,d,_);t({nodeInternals:v})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:s,getNodes:l}=r();let d,m=null;i?d=n.map(_=>Hi(_,!0)):(d=va(l(),n),m=va(s,[])),jd({changedNodes:d,changedEdges:m,get:r,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:s,getNodes:l}=r();let d,m=null;i?d=n.map(_=>Hi(_,!0)):(d=va(s,n),m=va(l(),[])),jd({changedNodes:m,changedEdges:d,get:r,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:s,getNodes:l}=r(),m=i||s;jd({changedNodes:(n||l()).map(v=>(v.selected=!1,Hi(v.id,!1))),changedEdges:m.map(v=>Hi(v.id,!1)),get:r,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:s}=r();i?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:s}=r();i?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{r().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=r();jd({changedNodes:i().filter(m=>m.selected).map(m=>Hi(m.id,!1)),changedEdges:n.filter(m=>m.selected).map(m=>Hi(m.id,!1)),get:r,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=r();i.forEach(s=>{s.positionAbsolute=Br(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:s,height:l,d3Zoom:d,d3Selection:m,translateExtent:_}=r();if(!d||!m||!n.x&&!n.y)return!1;const g=jn.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),v=[[0,0],[s,l]],b=d?.constrain()(g,v,_);return d.transform(m,b),i[0]!==b.x||i[1]!==b.y||i[2]!==b.k},cancelConnection:()=>t({connectionNodeId:Ui.connectionNodeId,connectionHandleId:Ui.connectionHandleId,connectionHandleType:Ui.connectionHandleType,connectionStatus:Ui.connectionStatus,connectionStartHandle:Ui.connectionStartHandle,connectionEndHandle:Ui.connectionEndHandle}),reset:()=>t({...Ui})}),t?no(t,Object.is):no;var t})()),S.createElement(tf,{value:r.current},t)};Cf.displayName="ReactFlowProvider";const jm=({children:t})=>(0,S.useContext)(aa)?S.createElement(S.Fragment,null,t):S.createElement(Cf,null,t);jm.displayName="ReactFlowWrapper";const Gh={input:Jf,default:df,output:qf,group:pf},Dh={default:Ce,straight:ee,step:F,smoothstep:G,simplebezier:W},Vh=[0,0],Oh=[15,15],zh={x:0,y:0,zoom:1},Bh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Mm=(0,S.forwardRef)(({nodes:t,edges:r,defaultNodes:n,defaultEdges:i,className:s,nodeTypes:l=Gh,edgeTypes:d=Dh,onNodeClick:m,onEdgeClick:_,onInit:g,onMove:v,onMoveStart:b,onMoveEnd:C,onConnect:x,onConnectStart:I,onConnectEnd:T,onClickConnectStart:R,onClickConnectEnd:E,onNodeMouseEnter:$,onNodeMouseMove:V,onNodeMouseLeave:M,onNodeContextMenu:Y,onNodeDoubleClick:H,onNodeDragStart:X,onNodeDrag:te,onNodeDragStop:U,onNodesDelete:ce,onEdgesDelete:ie,onSelectionChange:de,onSelectionDragStart:ae,onSelectionDrag:w,onSelectionDragStop:P,onSelectionContextMenu:z,onSelectionStart:K,onSelectionEnd:se,connectionMode:B=c.Strict,connectionLineType:Q=h.Bezier,connectionLineStyle:re,connectionLineComponent:le,connectionLineContainerStyle:ve,deleteKeyCode:ge="Backspace",selectionKeyCode:Te="Shift",selectionOnDrag:Xe=!1,selectionMode:Ue=p.Full,panActivationKeyCode:tt="Space",multiSelectionKeyCode:Ct=(pa()?"Meta":"Control"),zoomActivationKeyCode:ct=(pa()?"Meta":"Control"),snapToGrid:ho=!1,snapGrid:qn=Oh,onlyRenderVisibleElements:go=!1,selectNodesOnDrag:Qn=!0,nodesDraggable:Vt,nodesConnectable:Po,nodesFocusable:ut,nodeOrigin:ke=Vh,edgesFocusable:Gn,edgesUpdatable:Jr,elementsSelectable:vc,defaultViewport:Ca=zh,minZoom:ka=.5,maxZoom:ui=2,translateExtent:Sa=xf,preventScrolling:Kr=!0,nodeExtent:qr,defaultMarkerColor:wa="#b1b1b7",zoomOnScroll:Na=!0,zoomOnPinch:yc=!0,panOnScroll:rn=!1,panOnScrollSpeed:Xo=.5,panOnScrollMode:Qr=u.Free,zoomOnDoubleClick:es=!0,panOnDrag:Ea=!0,onPaneClick:Yo,onPaneMouseEnter:ts,onPaneMouseMove:If,onPaneMouseLeave:Tf,onPaneScroll:bc,onPaneContextMenu:Af,children:__,onEdgeContextMenu:ns,onEdgeDoubleClick:Jy,onEdgeMouseEnter:Ky,onEdgeMouseMove:qy,onEdgeMouseLeave:Qy,onEdgeUpdate:eb,onEdgeUpdateStart:tb,onEdgeUpdateEnd:nb,onReconnect:ob,onReconnectStart:ib,onReconnectEnd:rb,reconnectRadius:sb=10,edgeUpdaterRadius:ab=10,onNodesChange:lb,onEdgesChange:cb,noDragClassName:ub="nodrag",noWheelClassName:db="nowheel",noPanClassName:h_="nopan",fitView:pb=!1,fitViewOptions:fb,connectOnClick:mb=!0,attributionPosition:_b,proOptions:hb,defaultEdgeOptions:gb,elevateNodesOnSelect:vb=!0,elevateEdgesOnSelect:yb=!1,disableKeyboardA11y:g_=!1,autoPanOnConnect:bb=!0,autoPanOnNodeDrag:xb=!0,connectionRadius:Cb=20,isValidConnection:kb,onError:Sb,style:wb,id:v_,nodeDragThreshold:Nb,...Eb},Ib)=>{const Rf=v_||"1";return S.createElement("div",{...Eb,style:{...wb,...Bh},ref:Ib,className:jt(["react-flow",s]),"data-testid":"rf__wrapper",id:v_},S.createElement(jm,null,S.createElement(Mh,{onInit:g,onMove:v,onMoveStart:b,onMoveEnd:C,onNodeClick:m,onEdgeClick:_,onNodeMouseEnter:$,onNodeMouseMove:V,onNodeMouseLeave:M,onNodeContextMenu:Y,onNodeDoubleClick:H,nodeTypes:l,edgeTypes:d,connectionLineType:Q,connectionLineStyle:re,connectionLineComponent:le,connectionLineContainerStyle:ve,selectionKeyCode:Te,selectionOnDrag:Xe,selectionMode:Ue,deleteKeyCode:ge,multiSelectionKeyCode:Ct,panActivationKeyCode:tt,zoomActivationKeyCode:ct,onlyRenderVisibleElements:go,selectNodesOnDrag:Qn,defaultViewport:Ca,translateExtent:Sa,minZoom:ka,maxZoom:ui,preventScrolling:Kr,zoomOnScroll:Na,zoomOnPinch:yc,zoomOnDoubleClick:es,panOnScroll:rn,panOnScrollSpeed:Xo,panOnScrollMode:Qr,panOnDrag:Ea,onPaneClick:Yo,onPaneMouseEnter:ts,onPaneMouseMove:If,onPaneMouseLeave:Tf,onPaneScroll:bc,onPaneContextMenu:Af,onSelectionContextMenu:z,onSelectionStart:K,onSelectionEnd:se,onEdgeContextMenu:ns,onEdgeDoubleClick:Jy,onEdgeMouseEnter:Ky,onEdgeMouseMove:qy,onEdgeMouseLeave:Qy,onReconnect:ob??eb,onReconnectStart:ib??tb,onReconnectEnd:rb??nb,reconnectRadius:sb??ab,defaultMarkerColor:wa,noDragClassName:ub,noWheelClassName:db,noPanClassName:h_,elevateEdgesOnSelect:yb,rfId:Rf,disableKeyboardA11y:g_,nodeOrigin:ke,nodeExtent:qr}),S.createElement(F_,{nodes:t,edges:r,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:I,onConnectEnd:T,onClickConnectStart:R,onClickConnectEnd:E,nodesDraggable:Vt,nodesConnectable:Po,nodesFocusable:ut,edgesFocusable:Gn,edgesUpdatable:Jr,elementsSelectable:vc,elevateNodesOnSelect:vb,minZoom:ka,maxZoom:ui,nodeExtent:qr,onNodesChange:lb,onEdgesChange:cb,snapToGrid:ho,snapGrid:qn,connectionMode:B,translateExtent:Sa,connectOnClick:mb,defaultEdgeOptions:gb,fitView:pb,fitViewOptions:fb,onNodesDelete:ce,onEdgesDelete:ie,onNodeDragStart:X,onNodeDrag:te,onNodeDragStop:U,onSelectionDrag:w,onSelectionDragStart:ae,onSelectionDragStop:P,noPanClassName:h_,nodeOrigin:ke,rfId:Rf,autoPanOnConnect:bb,autoPanOnNodeDrag:xb,onError:Sb,connectionRadius:Cb,isValidConnection:kb,nodeDragThreshold:Nb}),S.createElement(A_,{onSelectionChange:de}),__,S.createElement(Do,{proOptions:hb,position:_b}),S.createElement(D_,{rfId:Rf,disableKeyboardA11y:g_})))});function $m(t){return r=>{const[n,i]=(0,S.useState)(r),s=(0,S.useCallback)(l=>i(d=>t(l,d)),[]);return[n,i,s]}}Mm.displayName="ReactFlow",$m(hf),$m(pm);var Ur=ue(1810),Wh=ue(3726),Gm=ue(8405);const Zh=["editorContainer"];let Vm,Dm=!1,Jh=(()=>{var t;class r{set insideNg(i){this._insideNg=i,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(i){(0,f.A)(this,"config",void 0),(0,f.A)(this,"_editorContainer",void 0),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"_editor",void 0),(0,f.A)(this,"_options",void 0),(0,f.A)(this,"_autoHeight",!1),(0,f.A)(this,"_height",200),(0,f.A)(this,"_windowResizeSubscription",void 0),(0,f.A)(this,"_insideNg",!1),this.config=i}ngAfterViewInit(){Dm?Vm.then(()=>{this.initMonaco(this._options,this.insideNg)}):(Dm=!0,Vm=new Promise(i=>{const s=this.config.baseUrl??"./assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void i();const l=d=>{let m=d||window.require,_={paths:{vs:`${s}/monaco/min/vs`}};Object.assign(_,this.config.requireConfig??{}),m.config(_),m(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),i()})};if(this.config.monacoRequire)l(this.config.monacoRequire);else if(window.require)if(window.require.config)l();else{let d=`${s}/monaco/min/vs/loader.js`,m=new XMLHttpRequest;m.addEventListener("load",()=>{let _=document.createElement("script");_.type="text/javascript",_.text=["var nodeRequire = require;",m.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join("\n"),document.body.appendChild(_),l(window.monacoAmdRequire)}),m.open("GET",d),m.send()}else{const d=document.createElement("script");d.type="text/javascript",d.src=`${s}/monaco/min/vs/loader.js`,d.addEventListener("load",()=>{l()}),document.body.appendChild(d)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(Gm.R))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(i,s){if(1&i&&e.GBs(Zh,7),2&i){let l;e.mGM(l=e.lsd())&&(s._editorContainer=l.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(i,s){},encapsulation:2})),r})();class Om{static init(r){r.languages.register({id:"demo"}),r.languages.setMonarchTokensProvider("demo",{tokenizer:{root:[[/\{([\[\]a-zA-Z0-9|#$._-]+)\}/,"custom-var"],[/"[^"]+"/,"custom-string"],[/'[^']+'/,"custom-string"],[/`[^`]+`/,"custom-string"],[/^\*\*[A-Z_]+:\s*$/,"custom-keyword"],[/^##.*/,"custom-bold"]]}}),r.languages.setLanguageConfiguration("demo",{brackets:[["{","}"]]}),r.editor.defineTheme("myCoolTheme",{base:"vs",inherit:!0,rules:[{token:"custom-var",foreground:"a31515"},{token:"custom-string",foreground:"a31515"},{token:"custom-keyword",foreground:"516eff"},{token:"custom-bold",fontStyle:"bold"}],colors:{"editor.foreground":"#000000"}}),r.languages.registerDocumentRangeFormattingEditProvider("demo",{provideDocumentRangeFormattingEdits:function(n,i){const s=n.getValueInRange(i);return[{range:i,text:JSON.stringify(JSON.parse(s),void 0,4)}]}})}static initSuggestion(r,n,i){r.languages.registerCompletionItemProvider(n,{triggerCharacters:["."],provideCompletionItems:(s,l)=>{let d=s.getWordUntilPosition(l),_=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}).split("\n"),g=_.filter(R=>R.indexOf('*for="')>=0),v=g.length>0?g[g.length-1]:"",b=_[_.length-1].split(/[^_#$\[\].0-9a-zA-Z-]/g),C=b[b.length-1].replaceAll("{","").replaceAll("}",""),x={startLineNumber:l.lineNumber,endLineNumber:l.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn},I=C.split("."),T=[];if(1==I.length){if(T=i.map(R=>({label:R.name,kind:r.languages.CompletionItemKind.Text,insertText:R.name,range:x})),v){let R=v.split('*for="')[1].split(" "),E="let"==R[0]?R[1]:R[0];T.push({label:E,kind:r.languages.CompletionItemKind.Text,insertText:E,range:x})}}else{if(v){let E=v.split('*for="')[1].split(" of ")[1].split('"')[0].replaceAll("{","").replaceAll("}","").trim(),$=v.split('*for="')[1].split(" "),V="let"==$[0]?$[1]:$[0];if(I[0].trim()==V.trim()){let M=[...E.split(".")];I.splice(0,1),M.push(...I),I=M}}let R=i.find(E=>E.name==I[0]);if(R&&"json"==R.type){let E=JSON.parse(R.demo);for(let V=1;V<I.length-1;V++)E=E[I[V]];T=Pe.extractProperties(E,1).map(V=>({label:V.name,kind:r.languages.CompletionItemKind.Text,insertText:V.name,range:x}))}}return{suggestions:Pe.distinctArray(T)}}})}}let kf=(()=>{var t;class r extends Jh{set options(i){this._options={...this.config.defaultOptions,...i},this._editor&&(this._editor.dispose(),this.initMonaco(i,this.insideNg))}set autoHeight(i){this._autoHeight=i}set height(i){this._height=i}get options(){return this._options}set model(i){this.options.model=i,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(i,s){super(s),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"editorConfig",void 0),(0,f.A)(this,"_value",""),(0,f.A)(this,"propagateChange",l=>{}),(0,f.A)(this,"onTouched",()=>{}),(0,f.A)(this,"resizeObserver",new ResizeObserver(()=>{this._editor&&this._editor.layout()})),(0,f.A)(this,"vars",[]),(0,f.A)(this,"onChange",new e.bkB),(0,f.A)(this,"onFocus",new e.bkB),this.zone=i,this.editorConfig=s}writeValue(i){this._value=i||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}formatCode(){this._editor.getAction("editor.action.formatDocument").run()}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){this.onTouched=i}focus(){this._editor?.focus()}insertText(i){this._editor.executeEdits("my-source",[{range:this._editor.getSelection(),text:i}])}getSelected(){let i=this._editor.getSelection();return this._editor.getModel().getValueInRange(i)}initMonaco(i,s){0==monaco.languages.getLanguages().filter(d=>"demo"==d.id).length&&Om.init(monaco),this.vars.length>0&&Om.initSuggestion(monaco,this.options.language,this.vars);const l=!!i.model;if(l){const d=monaco.editor.getModel(i.model.uri||"");d?(i.model=d,i.model.setValue(this._value)):i.model=monaco.editor.createModel(i.model.value,i.model.language,i.model.uri)}this._editorContainer&&(this._editorContainer.nativeElement.parentNode.style.height=this._height+"px"),s?this._editor=monaco.editor.create(this._editorContainer?.nativeElement,i):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer?.nativeElement,i)}),l||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(d=>{const m=this._editor.getValue();this.zone.run(()=>{this.propagateChange(m),this._value=m,this.onChange.emit(m)})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._editor.onDidFocusEditorText(()=>{this.onFocus.emit(this)}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,Wh.R)(window,"resize").subscribe(()=>this._editor.layout()),this.resizeObserver.observe(this._editorContainer?.nativeElement),this._editor.onDidContentSizeChange(d=>{let m=Math.max(this._height,d.contentHeight);this._editorContainer&&this._autoHeight&&(this._editorContainer.nativeElement.parentNode.style.height=m+15+"px")}),setTimeout(()=>{this._editor.focus(),this._editor.setPosition({column:1,lineNumber:2})},200),this.onInit.emit(this._editor)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(Gm.R))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",autoHeight:"autoHeight",height:"height",model:"model",vars:"vars"},outputs:{onChange:"onChange",onFocus:"onFocus"},features:[e.Jv_([{provide:N.kq,useExisting:(0,e.Rfq)(()=>t),multi:!0}]),e.Vt3],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(i,s){1&i&&e.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]})),r})(),Kh=(()=>{var t;class r{constructor(){(0,f.A)(this,"data",""),(0,f.A)(this,"editorConf",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0}),(0,f.A)(this,"onChange",new e.bkB)}change(){this.onChange.emit(this.data)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-json-editor"]],inputs:{data:"data"},outputs:{onChange:"onChange"},standalone:!0,features:[e.aNF],decls:3,vars:4,consts:[["editor",""],[1,"card","shadow-none","bg-transparent","border","border-label-secondary","ps-0","pt-4","pe-4","pb-4"],[1,"my-code-editor",3,"onChange","ngModelChange","height","autoHeight","options","ngModel"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div",1)(1,"ngx-monaco-editor",2,0),e.bIt("onChange",function(){return e.eBV(l),e.Njj(s.change())}),e.mxI("ngModelChange",function(m){return e.eBV(l),e.DH7(s.data,m)||(s.data=m),e.Njj(m)}),e.k0s()()}2&i&&(e.R7$(),e.Y8G("height",200)("autoHeight",!0)("options",s.editorConf),e.R50("ngModel",s.data))},dependencies:[Ur.V,kf,L.MD,N.YN,N.BC,N.vS]})),r})();var qh=ue(2663);function Sf(t){if(!wf(t))throw new Error("Parameter was not an error")}function wf(t){return!!t&&"object"==typeof t&&"[object Error]"===function Qh(t){return Object.prototype.toString.call(t)}(t)||t instanceof Error}class Bo extends Error{constructor(r,n){const i=[...arguments],{options:s,shortMessage:l}=function tg(t){let r,n="";if(0===t.length)r={};else if(wf(t[0]))r={cause:t[0]},n=t.slice(1).join(" ")||"";else if(t[0]&&"object"==typeof t[0])r=Object.assign({},t[0]),n=t.slice(1).join(" ")||"";else{if("string"!=typeof t[0])throw new Error("Invalid arguments passed to Layerr");r={},n=n=t.join(" ")||""}return{options:r,shortMessage:n}}(i);let d=l;s.cause&&(d=`${d}: ${s.cause.message}`),super(d),this.message=d,this.name=s.name&&"string"==typeof s.name?s.name:"Layerr",s.cause&&Object.defineProperty(this,"_cause",{value:s.cause}),Object.defineProperty(this,"_info",{value:{}}),s.info&&"object"==typeof s.info&&Object.assign(this._info,s.info),Error.captureStackTrace&&Error.captureStackTrace(this,s.constructorOpt||this.constructor)}static cause(r){return Sf(r),r._cause&&wf(r._cause)?r._cause:null}static fullStack(r){Sf(r);const n=Bo.cause(r);return n?`${r.stack}\ncaused by: ${Bo.fullStack(n)}`:r.stack??""}static info(r){Sf(r);const n={},i=Bo.cause(r);return i&&Object.assign(n,Bo.info(i)),r._info&&Object.assign(n,r._info),n}toString(){let r=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(r=`${r}: ${this.message}`),r}}const Wr="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Zr=32,Nf=0xffffffffffff,Kn=Object.freeze({source:"ulid"});function cg(t){let r=Math.floor(t()*Zr);return r===Zr&&(r=Zr-1),Wr.charAt(r)}var dg=ue(4412);let pg=(()=>{var t;class r extends dg.t{constructor(){super("light"),this.subscribe(i=>{!i||"undefined"==i||(document.body.classList.contains("dark")&&"light"==i&&document.body.classList.remove("dark"),document.body.classList.contains("light")&&"dark"==i&&document.body.classList.remove("light"),document.body.classList.add(i))})}setTheme(i){this.next(i)}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275prov",e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),r})(),Hm=(()=>{var t;class r{constructor(i,s,l){(0,f.A)(this,"ngContainer",void 0),(0,f.A)(this,"ngTheme",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"ngReactComponent",void 0),(0,f.A)(this,"_root",void 0),(0,f.A)(this,"theme",void 0),(0,f.A)(this,"ngSubscriptions",void 0),this.ngContainer=i,this.ngTheme=s,this.ngZone=l,this.ngSubscriptions=[this.ngTheme.subscribe(d=>{this.theme=d,this.ngOnChanges()})]}ngOnInit(){if(!this.ngReactComponent)throw console.error("NO"),new Error("ReactMagicWrapperComponent cannot start without a provided ngReactComponent!")}ngOnChanges(i){this._render()}ngAfterViewInit(){this._render()}ngOnDestroy(){this._root.unmount(),this.ngSubscriptions.forEach(i=>i.unsubscribe())}_render(){this.ngReactComponent?this.ngZone.runOutsideAngular(()=>{try{this._root||(this._root=(0,qh.H)(this.ngContainer.element.nativeElement));const i=Object.keys(this).filter(m=>!/^(?:_|ng)/.test(m)),s=i.filter(m=>!m.startsWith("on")),l=i.filter(m=>m.startsWith("on")),d={};s.forEach(m=>d[m]=this[m]),this.ngZone.runGuarded(()=>{l.forEach(m=>d[m]=(..._)=>this[m].next(_))}),this._root.render(S.createElement(this.ngReactComponent,{props:d}))}catch(i){console.error(i)}}):console.log("Render no component. May be context issue")}}return t=r,(0,f.A)(r,"WrapAngularComponent",({component:n,appRef:i,injector:s,ngZone:l,staticInputs:d,staticOutputs:m,additionalChildren:_})=>S.memo(g=>{const v=function ug(t,r){const n=r||function Pm(t){const r=t||function sg(){return function lg(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}(),n=r&&(r.crypto||r.msCrypto)||null;if("function"==typeof n?.getRandomValues)return()=>{const i=new Uint8Array(1);return n.getRandomValues(i),i[0]/255};if("function"==typeof n?.randomBytes)return()=>n.randomBytes(1).readUInt8()/255;throw new Bo({info:{code:"PRNG_DETECT",...Kn}},"Failed to find a reliable PRNG")}();return function Ef(t,r){if(isNaN(t))throw new Bo({info:{code:"ENC_TIME_NAN",...Kn}},`Time must be a number: ${t}`);if(t>Nf)throw new Bo({info:{code:"ENC_TIME_SIZE_EXCEED",...Kn}},`Cannot encode a time larger than ${Nf}: ${t}`);if(t<0)throw new Bo({info:{code:"ENC_TIME_NEG",...Kn}},`Time must be positive: ${t}`);if(!1===Number.isInteger(t))throw new Bo({info:{code:"ENC_TIME_TYPE",...Kn}},`Time must be an integer: ${t}`);let n,i="";for(let s=r;s>0;s--)n=t%Zr,i=Wr.charAt(n)+i,t=(t-n)/Zr;return i}(isNaN(t)?Date.now():t,10)+function Xm(t,r){let n="";for(;t>0;t--)n=cg(r)+n;return n}(16,n)}();return S.useEffect(()=>{try{const b=(0,e.a0P)(n,{environmentInjector:i.injector,elementInjector:s,hostElement:document.getElementById(v)??void 0});i.attachView(b.hostView),Object.assign(d,g);const{inputs:C,outputs:x}=n.\u0275cmp;Object.entries(C).filter(([$,V])=>b.instance[V]!=d[$]).forEach(([$,V])=>{d.hasOwnProperty($)&&(b.instance[V]=d[$])});const T={};Object.entries(x).filter(([$,V])=>!T[$]).forEach(([$,V])=>{if(!m.hasOwnProperty($))return;const Y=m,H=b.instance[V].subscribe((...X)=>{l.run(()=>{Y[$](...X)})});T[$]=H});const E=b.onDestroy?.bind(b);b.onDestroy=$=>{Object.values(T).forEach(V=>V.unsubscribe()),E?.($)},b.changeDetectorRef.detectChanges()}catch(b){console.error(b)}},[]),S.createElement("div",{},S.createElement("div",{id:v}),..._)})),(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.c1b),e.rXU(pg),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-react-magic-wrapper"]],standalone:!0,features:[e.OA$,e.aNF],decls:0,vars:0,template:function(i,s){},encapsulation:2})),r})(),Ht=(()=>{var t;class r{set data(i){this.nodeData=i}noticeUpdate(){this.updateOutput(),this.onDataChange.emit(this.nodeData)}constructor(i,s){(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"nodeData",void 0),(0,f.A)(this,"id",""),(0,f.A)(this,"displayName",void 0),(0,f.A)(this,"type","base"),(0,f.A)(this,"desc",""),(0,f.A)(this,"err",""),(0,f.A)(this,"mode",""),(0,f.A)(this,"onDataChange",new e.bkB),(0,f.A)(this,"settingConf",void 0),this.ngZone=i,this.appService=s}ngOnInit(){this.updateOutput()}ngDoCheck(){}ngAfterViewInit(){let i=document.getElementById("settingModal-"+this.id);i&&(i.parentNode?.removeChild(i),document.body.appendChild(i),this.upgradeConf())}upgradeConf(){let i=this.getConfig();for(let s of i){let l=this.nodeData.conf.find(d=>d.key==s.key);l&&(s.value=l.value)}this.nodeData.conf=i}updateOutput(){}focusSettingModal(){let i=document.getElementById("settingModal-"+this.id);i&&i.querySelector(".form-control")?.focus()}openModal(i){let s=document.getElementById(i);if(s){let l=s.getAttribute("data-bs-target")?.substring(1)??"",d=document.getElementById(l);d&&(d.querySelectorAll(".content").forEach(m=>{m.classList.remove("content")}),setTimeout(()=>{d.querySelectorAll('[data-bs-dismiss="modal"]').forEach(m=>{m.addEventListener("click",()=>{d.classList.remove("show")})})},400),d.classList.add("show")),s.click()}}openSetting(i){this.ngZone?.run(()=>{i&&(this.settingConf=this.nodeData.conf.filter(s=>s.key==i)[0]??{key:i,value:""})}),this.openModal("btnShowModal-"+this.id)}closeSetting(){this.settingConf=void 0}getClassType(){return r}build(i,s,l,d){return Hm.WrapAngularComponent({component:this.getClassType(),appRef:i,injector:s,ngZone:l,staticInputs:{},staticOutputs:{onDataChange:m=>{d(m)}},additionalChildren:[S.createElement(ma,{type:"target",position:k.Left}),S.createElement(ma,{type:"source",position:k.Right})]})}getConfig(){return[]}setConfig(i,s){let l=this.nodeData.conf.filter(d=>d.key==i)[0];l?l.value=s:this.nodeData.conf.push({key:i,value:s}),this.noticeUpdate()}findConfig(i,s){return s||(s=this.nodeData),s.conf.filter(d=>d.key==i)[0]?.value??""}getNodeSpec(){return{id:"",type:this.type,desc:this.desc,displayName:this.displayName,conf:this.getConfig(),links:[],inputs:[],outputs:[]}}run(i,s,l,d,m,_){_(new Map)}parseTempate(i,s){let l=i.matchAll(/\{([a-zA-Z0-9#$._-]+)\}/g);for(let d of l){let m=s.get(d[1]);m?"string"==typeof m?i=i.replaceAll(d[0],m??""):m instanceof File&&(i=i.replaceAll(d[0],"Filename: "+m.name)):i=i.replaceAll(d[0],"")}return i}setupOutputValue(i,s){let l=new Map;for(let d of s.outputs)l.set(d.name,i);return l}showAddCollectionModal(){this.openModal("btnShowAddCollectionModal")}showAddVCollectionModal(){this.openModal("btnShowAddVCollectionModal")}showAddApiModal(){this.openModal("btnShowAddApiModal")}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-base-node"]],inputs:{data:"data",id:"id",mode:"mode"},outputs:{onDataChange:"onDataChange"},standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(i,s){}})),r})();const fg=[{name:"Markdown View",html:' bs-data="markdown-view"'},{name:"Loop",html:' *for="item of listVars"'},{name:"Selectable",html:' bs-select="img.src=>selectedImgs"'},{name:"Run JS",html:' bs-run="varName"'}],mg=["editor"];function _g(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertUserInterface(s))}),e.nrm(2,"i"),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.ZvI("bx bx-",n.icon," scaleX-n1-rtl mr-2"),e.R7$(),e.SpI(" ",n.name," ")}}function hg(t,r){if(1&t&&(e.j41(0,"div",8)(1,"button",9),e.nrm(2,"span",21),e.EFF(3," User interface "),e.k0s(),e.j41(4,"mat-menu",null,3)(6,"div",11)(7,"ul",12),e.DNE(8,_g,4,4,"li",13),e.k0s()()()()),2&t){const n=e.sdS(5),i=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",i.userInterfaces)}}function gg(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.insertAttr(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function vg(t,r){if(1&t&&(e.j41(0,"div",8)(1,"button",9),e.nrm(2,"span",21),e.EFF(3," Html Attributes "),e.k0s(),e.j41(4,"mat-menu",null,4)(6,"div",11)(7,"ul",12),e.DNE(8,gg,3,1,"li",13),e.k0s()()()()),2&t){const n=e.sdS(5),i=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(7),e.Y8G("ngForOf",i.htmlAttrs)}}function yg(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",23),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertInputVar(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(),e.ZvI("ms-",n.level," dropdown-item d-flex align-items-center"),e.FS9("title",n.demo),e.R7$(),e.SpI(" ",n.name," ")}}function bg(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.insertKey(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.key," ")}}function xg(t,r){if(1&t&&(e.j41(0,"div",24),e.nrm(1,"div",25),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("innerHTML",n.inputStr,e.npT)}}function Cg(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.genWithAI())}),e.nrm(1,"i",27),e.EFF(2),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.isLoading),e.R7$(2),e.SpI(" ",n.isLoading?"Generating...":"Generate with AI"," ")}}let on=(()=>{var t;class r extends bs{constructor(i,s,l){super(),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"userInterfaces",[]),(0,f.A)(this,"htmlAttrs",fg),(0,f.A)(this,"editor",void 0),(0,f.A)(this,"onSave",new e.bkB),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"vars",[]),(0,f.A)(this,"html",!1),(0,f.A)(this,"agentName",""),(0,f.A)(this,"editorConf",void 0),(0,f.A)(this,"varBtnLabel","Input Variables"),(0,f.A)(this,"onClose",new e.bkB),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"queue",[]),(0,f.A)(this,"varFormat","{@@}"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"lstVars",[]),(0,f.A)(this,"textData",""),this.appService=i,this.aiApi=s,this.zone=l}save(){this.textData=this.inputStr,this.onSave.emit(this.inputStr)}close(){this.inputStr=this.textData,this.onClose.emit()}genWithAI(){if(!this.isLoading){if(this.isLoading=!0,this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr),this.inputStr="",this.html){let i=JSON.stringify(this.lstVars.map(s=>s.name.trim()));this.agentRunner.setVars(["vars::"+i])}this.agentRunner.send(),this.editor?.focus()}}onMsgUpdate(i,s){let l=s?s.length:0,d=0;for(;d<l;){const m=Math.floor(9*Math.random())+2,_=Math.floor(16*Math.random())+5;this.queue.push({str:s.substring(d,d+m),t:_}),0==d&&1==this.queue.length&&this.startInsertAnim(),d+=m}}startInsertAnim(){let i=this.queue.shift();i&&(this.editor?.insertText(i.str),setTimeout(()=>{this.startInsertAnim()},i.t))}onDone(i){this.zone.run(()=>{this.isLoading=!1})}insertInputVar(i){i.name.startsWith("*")?(this.editor?.insertText(i.demo),this.editor?.formatCode()):this.editor?.insertText(this.varFormat.replaceAll("@@",i.name)),this.editor?.focus()}insertAttr(i){this.editor?.insertText(i.html),this.editor?.focus()}insertKey(i){this.editor?.insertText("{"+i.key+"}"),this.editor?.focus()}insertUserInterface(i){this.editor?.insertText(i.html),this.editor?.focus()}loadConf(){this.appService.getConf("app-ui-interfaces").subscribe(i=>{let s=i.data.split("====");this.userInterfaces=[];for(let l of s){if(""==l.trim())continue;let d=l.trim().split("\n"),m=d[0],_=d[1];d.splice(0,2);let g=d.join("\n");this.userInterfaces.push({name:m,icon:_,html:g})}})}loadKeys(){this.appService?.listKeys().subscribe(i=>{this.lstKeys=i})}ngOnInit(){this.agentRunner=new xs(this.aiApi,this),this.agentRunner.setAgentName(this.agentName),this.loadConf(),this.loadKeys(),this.textData=this.inputStr,this.editorConf={theme:"myCoolTheme",language:this.html?"html":"demo",wordWrap:this.html?"off":"on",lineNumbers:this.html?"on":"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!0};for(let i of this.vars){if(this.lstVars.push({name:i.name,level:0,demo:i.demo}),"json"==i.type){let l=Pe.extractProperties(JSON.parse(i.demo),1);for(let d of l)this.lstVars.push({name:i.name+"."+d.name,level:d.level,demo:""})}i.type.endsWith("[]")&&this.lstVars.push({name:`*for="item of ${i.name}"`,level:0,demo:`<div class="box mb-3" *for="item of ${i.name}">\n    <div class="box-body">\n        <p class="box-text">\n            {item}\n        </p>\n    </div>\n</div>`})}}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(je),e.rXU(dt),e.rXU(e.SKi))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-input-format"]],viewQuery:function(i,s){if(1&i&&e.GBs(mg,5),2&i){let l;e.mGM(l=e.lsd())&&(s.editor=l.first)}},inputs:{inputStr:"inputStr",vars:"vars",html:"html",agentName:"agentName",varBtnLabel:"varBtnLabel",varFormat:"varFormat"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[e.Vt3,e.aNF],decls:34,vars:17,consts:[["menu3",""],["menu4",""],["editor",""],["menu1",""],["menu2",""],[1,"col-span-2"],[1,"mb-3"],["class","btn-group mr-3",4,"ngIf"],[1,"btn-group","mr-3"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","p-0",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-18px","mr-1"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","vars","height","autoHeight","options","ngModel"],["class","col-lg-4 p-3 bg-label-secondary rounded",4,"ngIf"],[1,"mt-3","text-end"],["type","button","class","btn btn-text-primary mr-3","title","Enter what do you want your agent do and click this button",3,"disabled","click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"tf-icons","bx","bx-tv","bx-18px","mr-1"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],["href","javascript:void(0);",3,"click","title"],[1,"col-lg-4","p-3","bg-label-secondary","rounded"],[3,"innerHTML"],["type","button","title","Enter what do you want your agent do and click this button",1,"btn","btn-text-primary","mr-3",3,"click","disabled"],[1,"bx","bxs-magic-wand","mr-2"]],template:function(i,s){if(1&i){const l=e.RV6();e.j41(0,"div")(1,"div")(2,"div",5)(3,"div",6),e.DNE(4,hg,9,2,"div",7)(5,vg,9,2,"div",7),e.j41(6,"div",8)(7,"button",9),e.nrm(8,"span",10),e.EFF(9),e.k0s(),e.j41(10,"mat-menu",null,0)(12,"div",11)(13,"ul",12),e.DNE(14,yg,3,5,"li",13),e.k0s()()()(),e.j41(15,"div",8)(16,"button",9),e.nrm(17,"span",10),e.EFF(18," Access Keys "),e.k0s(),e.j41(19,"mat-menu",null,1)(21,"div",11)(22,"ul",12),e.DNE(23,bg,3,1,"li",13),e.k0s()()()()(),e.j41(24,"div",14)(25,"ngx-monaco-editor",15,2),e.mxI("ngModelChange",function(m){return e.eBV(l),e.DH7(s.inputStr,m)||(s.inputStr=m),e.Njj(m)}),e.k0s()()(),e.DNE(27,xg,2,1,"div",16),e.k0s(),e.j41(28,"div",17),e.DNE(29,Cg,3,2,"button",18),e.j41(30,"button",19),e.bIt("click",function(){return e.eBV(l),e.Njj(s.close())}),e.EFF(31,"Close"),e.k0s(),e.j41(32,"button",20),e.bIt("click",function(){return e.eBV(l),e.Njj(s.save())}),e.EFF(33," Save "),e.k0s()()()}if(2&i){const l=e.sdS(11),d=e.sdS(20);e.R7$(),e.ZvI("grid grid-cols-",s.html?"3":"1"," gap-1"),e.R7$(3),e.Y8G("ngIf",s.html),e.R7$(),e.Y8G("ngIf",s.html),e.R7$(2),e.Y8G("matMenuTriggerFor",l),e.R7$(2),e.SpI(" ",s.varBtnLabel," "),e.R7$(5),e.Y8G("ngForOf",s.lstVars),e.R7$(2),e.Y8G("matMenuTriggerFor",d),e.R7$(7),e.Y8G("ngForOf",s.lstKeys),e.R7$(2),e.Y8G("vars",s.vars)("height",450)("autoHeight",!0)("options",s.editorConf),e.R50("ngModel",s.inputStr),e.R7$(2),e.Y8G("ngIf",s.html),e.R7$(2),e.Y8G("ngIf",s.agentName)}},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.BC,N.vS,Ur.V,kf,J.Cn,J.kk,J.Cp],styles:[".zoom-out-80[_ngcontent-%COMP%]{transform:scale(.8)}"]})),r})();function kg(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Sg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function wg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add url "),e.k0s()()}}function Ng(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Url "),e.k0s(),e.DNE(3,Sg,3,5,"div",20)(4,wg,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Eg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Ig(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add headers "),e.k0s()()}}function Tg(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Headers "),e.k0s(),e.DNE(3,Eg,3,5,"div",20)(4,Ig,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Ag(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Method "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Rg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Fg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add body "),e.k0s()()}}function jg(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Request body "),e.k0s(),e.DNE(3,Rg,3,5,"div",20)(4,Fg,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Mg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function $g(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add specs "),e.k0s()()}}function Gg(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Response specs "),e.k0s(),e.DNE(3,Mg,3,5,"div",20)(4,$g,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Dg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Vg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function Og(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Check success "),e.k0s(),e.DNE(3,Dg,3,5,"div",20)(4,Vg,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function zg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Bg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add condition "),e.k0s()()}}function Lg(t,r){if(1&t&&(e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat until "),e.k0s(),e.DNE(3,zg,3,5,"div",20)(4,Bg,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Pg(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"label",19),e.EFF(2," Repeat timeout (second) "),e.k0s(),e.j41(3,"input",26),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Xg(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Ng,5,2,"div",17)(2,Tg,5,2,"div",17)(3,Ag,4,1,"div",17)(4,jg,5,2,"div",17)(5,Gg,5,2,"div",17)(6,Og,5,2,"div",17)(7,Lg,5,2,"div",17)(8,Pg,4,1,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","headers"==n.key),e.R7$(),e.Y8G("ngIf","method"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key),e.R7$(),e.Y8G("ngIf","response"==n.key),e.R7$(),e.Y8G("ngIf","check"==n.key),e.R7$(),e.Y8G("ngIf","repeat"==n.key),e.R7$(),e.Y8G("ngIf","wait"==n.key)}}function Yg(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Hg(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Yg,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Ug(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Wg(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Zg(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Jg(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function Kg(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function qg(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Um=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"headers",[{key:"User-Agent",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:127.0) Gecko/20100101 Firefox/127.0"},{key:"Cookie",value:""},{key:"Authorization",value:""}]),(0,f.A)(this,"type","apiInvoker"),(0,f.A)(this,"desc","Invoke external api")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"headers",value:this.headers.map(s=>s.key+": "+s.value).join("\n")},{key:"method",value:"POST"},{key:"body",value:""},{key:"check",value:""},{key:"repeat",value:""},{key:"wait",value:"180"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-data",type:"json",demo:"{}"}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}run(i,s,l,d,m,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-api-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:23,vars:15,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Time in second",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,kg,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Xg,9,8,"div",5),e.k0s()(),e.DNE(8,Hg,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Ug,1,2,"app-input-format",14)(18,Wg,1,2,"app-input-format",14)(19,Zg,1,2,"app-input-format",14)(20,Jg,1,2,"app-input-format",14)(21,Kg,1,2,"app-input-format",14)(22,qg,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","headers"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","body"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","response"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","repeat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","check"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","url"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,St,on]})),r})();function Qg(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function e0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function t0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function n0(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,e0,3,5,"div",21)(4,t0,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function o0(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function r0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Voice Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.bIt("change",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.playAu(s))}),e.DNE(4,o0,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.settings.value)}}function s0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",28),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",29),e.EFF(5,"tts-1"),e.k0s(),e.j41(6,"option",30),e.EFF(7,"tts-1-hd"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function a0(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,n0,5,2,"div",17)(2,r0,5,2,"div",18)(3,s0,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","voice"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function l0(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function c0(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,l0,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function u0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Wm=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"settings",{key:"style",name:"Voice Style",value:["alloy","echo","fable","onyx","nova","shimmer"],default:"alloy",demo:["https://cdn.openai.com/API/docs/audio/alloy.wav","https://cdn.openai.com/API/docs/audio/echo.wav","https://cdn.openai.com/API/docs/audio/fable.wav","https://cdn.openai.com/API/docs/audio/onyx.wav","https://cdn.openai.com/API/docs/audio/nova.wav","https://cdn.openai.com/API/docs/audio/shimmer.wav"]}),(0,f.A)(this,"type","textToAudio"),(0,f.A)(this,"desc","Generate audio from text"),(0,f.A)(this,"currentAudio",void 0)}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"tts-1"},{key:"voice",value:this.settings.default}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-audio",type:"json",demo:'{"url": "", "duration": 5}'}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}playAu(i){let s=this.findConfig("voice"),l=this.settings.value.indexOf(s),d=this.settings.demo[l];this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(d),this.currentAudio.play().catch(m=>{console.error("Error playing audio:",m)})}run(i,s,l,d,m,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-audio-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","tts-1"],["value","tts-1-hd"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Qg,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,a0,4,3,"div",5),e.k0s()(),e.DNE(8,c0,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,u0,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,on,St]})),r})();function d0(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function p0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function f0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function m0(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,p0,3,5,"div",21)(4,f0,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function _0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",26),e.EFF(5,"text-embedding-3-small"),e.k0s(),e.j41(6,"option",27),e.EFF(7,"text-embedding-3-large"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function h0(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,m0,5,2,"div",17)(2,_0,8,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key)}}function g0(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function v0(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,g0,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function y0(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Zm=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","embedding"),(0,f.A)(this,"desc","Embedding data for symantic search")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"text-embedding-3-small"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-embeddingVector",type:"vector",demo:""},{name:this.id+"-content",type:"string",demo:""}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,m,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-embedding-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","text-embedding-3-small"],["value","text-embedding-3-large"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,d0,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,h0,3,2,"div",5),e.k0s()(),e.DNE(8,v0,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,y0,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,St,on]})),r})();function b0(t,r){if(1&t&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.err)}}function x0(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20)(2,"div",20)(3,"div",20)(4,"div",20)(5,"div",20)(6,"div",20),e.k0s())}function C0(t,r){if(1&t&&(e.j41(0,"span",21),e.EFF(1),e.nI1(2,"trunc"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,n.content,140))}}function k0(t,r){if(1&t&&e.nrm(0,"span",22),2&t){const n=e.XpG().$implicit;e.Y8G("innerHtml",n.content,e.npT)}}function S0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,x0,7,0,"div",13)(4,C0,3,4,"span",14)(5,k0,1,1,"span",15),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",17)(9,"strong"),e.EFF(10),e.k0s(),e.EFF(11," bytes"),e.k0s()(),e.j41(12,"a",18),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG();return e.Njj(l.remove(s))}),e.EFF(13,"Remove file"),e.k0s()()}if(2&t){const n=r.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",i.isReading),e.R7$(),e.Y8G("ngIf",!i.isReading&&!n.content.startsWith("<img")),e.R7$(),e.Y8G("ngIf",!i.isReading&&n.content.startsWith("<img")),e.R7$(2),e.JRh(n.file.name),e.R7$(3),e.JRh(n.file.size)}}let w0=(()=>{var t;class r{constructor(){(0,f.A)(this,"name",""),(0,f.A)(this,"onAddFile",new e.bkB),(0,f.A)(this,"onStartReading",new e.bkB),(0,f.A)(this,"files",[]),(0,f.A)(this,"isReading",!1),(0,f.A)(this,"err","")}ngOnInit(){setTimeout(()=>{new Dropzone("#dropzone-basic-"+this.name,{disablePreviews:!0}).on("addedfile",s=>{if(this.err="",s.size/1024/1024>10)return void(this.err="Only support for file less than 10MB");let _,d={file:s,name:this.name,content:""};switch(this.files.push(d),Pe.getFileExt(s.name)){case"pdf":_=new ar;break;case"docx":_=new sr;break;case"jpg":case"png":case"jpeg":_=new Ka}this.isReading=!0,this.onStartReading.emit(),_?.readFile(s).then(g=>{d.content=g,this.isReading=!1,this.onAddFile.emit(d)})})},200)}remove(i){this.files.splice(i,1),0==this.files.length&&document.getElementById("dropzone-basic-"+this.name)?.classList.remove("dz-started")}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-file-control"]],inputs:{name:"name"},outputs:{onAddFile:"onAddFile",onStartReading:"onStartReading"},standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[["class","alert alert-danger mt-2 mb-2","role","alert",4,"ngIf"],["action","/upload",1,"dropzone","needsclick","p-0",3,"id"],[1,"dz-message","needsclick"],[1,"h4","needsclick","pt-4","mb-2"],[1,"h6","text-muted","d-block","fw-normal","mb-2"],["id","btnBrowse",1,"note","needsclick","btn","btn-sm","btn-primary"],["class","dz-preview dz-file-preview",4,"ngFor","ngForOf"],[1,"fallback"],["name","file","type","file"],["role","alert",1,"alert","alert-danger","mt-2","mb-2"],[1,"dz-preview","dz-file-preview"],[1,"dz-details"],[1,"dz-thumbnail"],["class","sk-chase sk-primary m-auto mt-10",4,"ngIf"],["class","text-start",4,"ngIf"],["class","text-start",3,"innerHtml",4,"ngIf"],[1,"dz-filename"],[1,"dz-size"],["href","javascript:undefined;",1,"dz-remove",3,"click"],[1,"sk-chase","sk-primary","m-auto","mt-10"],[1,"sk-chase-dot"],[1,"text-start"],[1,"text-start",3,"innerHtml"]],template:function(i,s){1&i&&(e.DNE(0,b0,2,1,"div",0),e.j41(1,"form",1)(2,"div",2)(3,"p",3),e.EFF(4,"Drag and drop your file here"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"or"),e.k0s(),e.j41(7,"span",5),e.EFF(8,"Browse file"),e.k0s()(),e.DNE(9,S0,14,5,"div",6),e.j41(10,"div",7),e.nrm(11,"input",8),e.k0s()()),2&i&&(e.Y8G("ngIf",s.err),e.R7$(),e.Mz_("id","dropzone-basic-",s.name,""),e.R7$(8),e.Y8G("ngForOf",s.files))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.qT,N.cb,N.cV,St]})),r})();function N0(t,r){if(1&t&&e.nrm(0,"i",22),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function E0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function I0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",28),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(2),e.FS9("placeholder",n.value.label)}}function T0(t,r){if(1&t&&e.nrm(0,"i"),2&t){const n=e.XpG(2).$implicit;e.ZvI("",n.value.desc," mr-2")}}function A0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"div")(6,"button",29),e.DNE(7,T0,1,3,"i",30),e.EFF(8),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(4),e.Y8G("ngIf",n.value.desc),e.R7$(),e.SpI(" ",n.value.label,"")}}function R0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",31),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function F0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"input",32),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function j0(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function M0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"select",33),e.DNE(6,j0,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label),e.R7$(3),e.Y8G("ngForOf",n.value.listOptions)}}function $0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.nrm(5,"textarea",36),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function G0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25)(2,"span",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.editConf(s))}),e.EFF(3),e.k0s(),e.j41(4,"i",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeControl(s))}),e.k0s()(),e.j41(5,"div",37)(6,"p",38),e.EFF(7,"Drag and drop your file here"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.value.label)}}function D0(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,E0,6,2,"div",23)(2,I0,6,2,"div",23)(3,A0,9,3,"div",23)(4,R0,6,1,"div",23)(5,F0,6,1,"div",23)(6,M0,7,2,"div",23)(7,$0,6,1,"div",23)(8,G0,8,1,"div",23),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","datetime"==n.value.type),e.R7$(),e.Y8G("ngIf","submit"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type),e.R7$(),e.Y8G("ngIf","html"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type)}}function V0(t,r){if(1&t&&(e.j41(0,"div",42),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function O0(t,r){if(1&t&&(e.j41(0,"div",39)(1,"div",40),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,V0,2,2,"div",41),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function z0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,N0,1,1,"i",7),e.k0s(),e.j41(5,"div",8)(6,"div",9),e.DNE(7,D0,9,8,"div",10),e.k0s(),e.j41(8,"div")(9,"div",11)(10,"button",12),e.nrm(11,"i",13),e.EFF(12," Add form control"),e.k0s(),e.j41(13,"mat-menu",null,0)(15,"div",14)(16,"ul",15)(17,"li")(18,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("textbox"))}),e.nrm(19,"i",17),e.EFF(20,"Textbox "),e.k0s()(),e.j41(21,"li")(22,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("select"))}),e.nrm(23,"i",17),e.EFF(24,"SelectBox "),e.k0s()(),e.j41(25,"li")(26,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("textarea"))}),e.nrm(27,"i",18),e.EFF(28,"Textarea "),e.k0s()(),e.j41(29,"li")(30,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("datetime"))}),e.nrm(31,"i",18),e.EFF(32,"DateTime "),e.k0s()(),e.j41(33,"li")(34,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("file"))}),e.nrm(35,"i",19),e.EFF(36,"File Upload "),e.k0s()(),e.j41(37,"li")(38,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("key"))}),e.nrm(39,"i",19),e.EFF(40,"Access Key "),e.k0s()(),e.j41(41,"li")(42,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("html"))}),e.nrm(43,"i",20),e.EFF(44,"Html View "),e.k0s()(),e.j41(45,"li")(46,"a",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.addControl("submit"))}),e.nrm(47,"i",20),e.EFF(48,"Submit Button "),e.k0s()()()()()()()(),e.DNE(49,O0,4,1,"div",21),e.k0s()}if(2&t){const n=e.sdS(14),i=e.XpG();e.R7$(3),e.JRh(i.type),e.R7$(),e.Y8G("ngIf",i.err),e.R7$(3),e.Y8G("ngForOf",i.nodeData.conf),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(39),e.Y8G("ngIf",i.nodeData.outputs.length>0)}}function B0(t,r){if(1&t&&e.nrm(0,"button",43),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function L0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2,"List Options (One option per line, format: `Text=>Value`)"),e.k0s(),e.j41(3,"textarea",51),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.listOptions,s)||(l.listOptions=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.listOptions)}}function P0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46)(3,"div",47)(4,"h5",48),e.EFF(5," Add form control "),e.k0s()(),e.j41(6,"div",49)(7,"div",24)(8,"label",25),e.EFF(9,"Label"),e.k0s(),e.j41(10,"input",50),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addLabel,s)||(l.addLabel=s),e.Njj(s)}),e.bIt("keyup",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.onLabelChange())}),e.k0s()(),e.j41(11,"div",24)(12,"label",25),e.EFF(13,"Var Name"),e.k0s(),e.j41(14,"input",51),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addVarName,s)||(l.addVarName=s),e.Njj(s)}),e.k0s()(),e.j41(15,"div",24)(16,"label",25),e.EFF(17,"Description"),e.k0s(),e.j41(18,"textarea",51),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.addDesc,s)||(l.addDesc=s),e.Njj(s)}),e.k0s()(),e.DNE(19,L0,4,1,"div",23),e.j41(20,"div")(21,"button",52),e.EFF(22,"Close"),e.k0s(),e.j41(23,"button",53),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.saveControl())}),e.EFF(24),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(10),e.R50("ngModel",n.addLabel),e.R7$(4),e.R50("ngModel",n.addVarName),e.R7$(4),e.R50("ngModel",n.addDesc),e.R7$(),e.Y8G("ngIf","select"==n.addType),e.R7$(5),e.SpI("",n.curConf?"Save":"Add"," Control")}}function X0(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function Y0(t,r){if(1&t&&(e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,X0,1,0,"i",55),e.k0s(),e.nrm(4,"input",56),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.Y8G("value",n.value.data)}}function H0(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function U0(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.value),e.R7$(),e.JRh(n.text)}}function W0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,H0,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,U0,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",n.value.listOptions)}}function Z0(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function J0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Z0,1,0,"i",55),e.k0s(),e.j41(4,"textarea",59),e.bIt("input",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.autoResize(s.target))}),e.EFF(5),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.FCK("name","",i.nodeData.id,"-",n.key,""),e.R7$(),e.JRh(n.value.data)}}function K0(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function q0(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,K0,1,0,"i",55),e.k0s(),e.j41(4,"app-file-control",60),e.bIt("onStartReading",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.onStartReadingFile())})("onAddFile",function(s){e.eBV(n);const l=e.XpG(3);return e.Njj(l.onAddFile(s))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.Y8G("name",i.nodeData.id+"-"+n.key)}}function Q0(t,r){if(1&t){const n=e.RV6();e.j41(0,"i",57),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.showInfo(s.value.desc))}),e.k0s()}}function e1(t,r){if(1&t&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.key),e.R7$(),e.JRh(n.key)}}function t1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24)(1,"label",25),e.EFF(2),e.DNE(3,Q0,1,0,"i",55),e.k0s(),e.j41(4,"select",58),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value.data,s)||(l.value.data=s),e.Njj(s)}),e.DNE(5,e1,2,2,"option",34),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.value.label," "),e.R7$(),e.Y8G("ngIf",n.value.desc),e.R7$(),e.R50("ngModel",n.value.data),e.BMQ("name",i.nodeData.id+"-"+n.key),e.R7$(),e.Y8G("ngForOf",i.lstKeys)}}function n1(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Y0,5,6,"div",23)(2,W0,6,5,"div",23)(3,J0,6,6,"div",23)(4,q0,5,3,"div",23)(5,t1,6,5,"div",23),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","textbox"==n.value.type),e.R7$(),e.Y8G("ngIf","select"==n.value.type),e.R7$(),e.Y8G("ngIf","textarea"==n.value.type),e.R7$(),e.Y8G("ngIf","file"==n.value.type),e.R7$(),e.Y8G("ngIf","key"==n.value.type)}}function o1(t,r){if(1&t&&(e.j41(0,"div",54)(1,"div",9),e.DNE(2,n1,6,5,"div",10),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.nodeData.conf)}}let Jm=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"appId",0),(0,f.A)(this,"type","form"),(0,f.A)(this,"desc","User interaction form"),(0,f.A)(this,"lstKeys",[]),(0,f.A)(this,"addType",""),(0,f.A)(this,"addLabel",""),(0,f.A)(this,"addVarName",""),(0,f.A)(this,"addDesc",""),(0,f.A)(this,"listOptions",""),(0,f.A)(this,"curConf",void 0),(0,f.A)(this,"onUploaded",new e.bkB),(0,f.A)(this,"onStartUpload",new e.bkB)}getClassType(){return r}updateOutput(){this.nodeData.outputs=[];for(let i of this.nodeData.conf)"file"!=i.value.type&&(this.nodeData.outputs.push({name:this.id+"-"+i.key,type:"file"==i.value.type?"File":"string",demo:'{name: "filename"}|"text value"'}),"file"==i.value.type&&this.nodeData.outputs.push({name:this.id+"-"+i.key+"-dataUrl",type:"string",demo:""}))}upgradeConf(){}ngOnInit(){if(super.ngOnInit(),"render"!=this.mode)return;let i=!1;for(let s of this.nodeData.conf)s.value.data=localStorage.getItem(this.appId+"-"+this.nodeData.id+"-"+s.key)??"","key"==s.value.type&&(i=!0);i&&this.appService?.listKeys().subscribe(s=>{this.lstKeys=s}),setTimeout(()=>{let s=document.querySelectorAll(".form-node-renderred textarea");for(let l of s)this.autoResize(l)},200)}getConfig(){return[]}addControl(i){this.ngZone?.run(()=>{this.addType=i,this.addLabel="",this.addVarName=""}),this.curConf=void 0,this.openSetting()}autoResize(i){i.style.height="50px",i.style.overflowY="hidden",i.style.height=i.scrollHeight+10+"px"}showInfo(i){alert(i)}saveControl(){let i=":";this.listOptions.includes("=>")&&(i="=>");let s=this.listOptions.split("\n").map(l=>l.split(i));this.curConf?(this.curConf.value.label=this.addLabel,this.curConf.value.desc=this.addDesc,this.curConf.value.listOptions=s.map(l=>({value:l[1],text:l[0]})),this.curConf.key=this.addVarName):this.nodeData.conf.push({key:this.addVarName,value:{type:this.addType,label:this.addLabel,desc:this.addDesc,listOptions:s.map(l=>({value:l[1],text:l[0]}))}}),this.noticeUpdate()}removeControl(i){this.nodeData.conf.splice(i,1),this.noticeUpdate()}editConf(i){this.curConf=i,this.addType=i.value.type,this.addLabel=i.value.label,this.addVarName=i.key,this.addDesc=i.value.desc,this.listOptions=i.value.listOptions?i.value.listOptions.map(s=>`${s.text}=>${s.value}`).join("\n"):"",this.openSetting()}ngDoCheck(){this.err=0==this.nodeData.conf.length?'No Control. Click "Add form control" to add control to your form':""}onLabelChange(){this.ngZone?.run(()=>{this.addVarName=Pe.toCamelCase(this.addLabel)})}onAddFile(i){this.onUploaded.emit(i)}onStartReadingFile(){this.onStartUpload.emit()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-form-node"]],inputs:{appId:"appId"},outputs:{onUploaded:"onUploaded",onStartUpload:"onStartUpload"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["menu",""],["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],["class","form-node-renderred",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"bx","bx-plus","me-2"],[1,"dropdown-menu","show","w-48","mt-1"],[1,"dropdown-content"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"bx","bx-text","me-3"],[1,"bx","bx-detail","me-3"],[1,"bx","bx-paperclip","me-3"],[1,"bx","bx-align-left","me-3"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"cursor-pointer",3,"click"],[1,"bx","bx-x","cursor-pointer",3,"click"],["type","text","autocomplete","off",1,"form-control",3,"placeholder"],[1,"btn","btn-primary"],[3,"class",4,"ngIf"],["type","text","autocomplete","off","placeholder","Key",1,"form-control"],["type","text","autocomplete","off","placeholder","Html View",1,"form-control"],[1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","3",1,"form-control"],[1,"dropzone"],[1,"h6","text-center","mt-4","text-small"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],["type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary","me-3",3,"click"],[1,"form-node-renderred"],["class","bx bx-info-circle small",3,"click",4,"ngIf"],["type","text","autocomplete","off",1,"form-control",3,"value","name"],[1,"bx","bx-info-circle","small",3,"click"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"input","name"],[3,"onStartReading","onAddFile","name"]],template:function(i,s){1&i&&e.DNE(0,z0,50,5,"div",1)(1,B0,1,3,"button",2)(2,P0,25,7,"div",3)(3,o1,3,1,"div",4),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf","render"==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.me,N.wz,N.BC,N.vS,w0,J.Cn,J.kk,J.Cp]})),r})();function r1(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function s1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function a1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function l1(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,s1,3,5,"div",21)(4,a1,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function c1(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function u1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Style "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,c1,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.settings.style)}}function d1(t,r){if(1&t&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function p1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Size "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,d1,2,2,"option",26),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.settings.size)}}function f1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.j41(4,"option",28),e.EFF(5,"dall-e-2"),e.k0s(),e.j41(6,"option",29),e.EFF(7,"dall-e-3"),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function m1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Cookie "),e.k0s(),e.j41(3,"input",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function _1(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,l1,5,2,"div",17)(2,u1,5,2,"div",18)(3,p1,5,2,"div",18)(4,f1,8,1,"div",18)(5,m1,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","style"==n.key),e.R7$(),e.Y8G("ngIf","size"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.Y8G("ngIf","cookie"==n.key)}}function h1(t,r){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function g1(t,r){if(1&t&&(e.j41(0,"div",31)(1,"div",32),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,h1,2,2,"div",33),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function v1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let Km=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"settings",{style:["natural","vivid"],size:["1024x1024","1792x1024","1024x1792"]}),(0,f.A)(this,"type","textToImage"),(0,f.A)(this,"desc","Generate image from text")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"model",value:"dall-e-3"},{key:"style",value:"natural"},{key:"size",value:"1792x1024"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-image",type:"image",demo:""}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,m,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-image-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","dall-e-2"],["value","dall-e-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,r1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,_1,6,5,"div",5),e.k0s()(),e.DNE(8,g1,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,v1,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.me,N.wz,N.BC,N.vS,St,on]})),r})();const y1=["outputEditor"];function b1(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Type your output format in free style and click 'Generate' button. "),e.nrm(2,"br"),e.EFF(3,"Example: "),e.j41(4,"code"),e.EFF(5,"name: string, listItem: string[]"),e.k0s()())}function x1(t,r){1&t&&(e.j41(0,"div",13),e.EFF(1," Describe your example and click 'Generate' button. "),e.k0s())}function C1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div"),e.DNE(1,b1,6,0,"div",2)(2,x1,2,0,"div",2),e.j41(3,"div",3)(4,"ngx-monaco-editor",4,0),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG();return e.DH7(l.inputStr,s)||(l.inputStr=s),e.Njj(s)}),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"button",7),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.generate())}),e.nrm(9,"i",8),e.EFF(10," Generate "),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"button",11),e.EFF(14,"Close"),e.k0s(),e.j41(15,"button",12),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.save())}),e.EFF(16),e.k0s()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf","UserOutputFormatBuilder"==n.agentName),e.R7$(),e.Y8G("ngIf","ExamplesBuilder"==n.agentName),e.R7$(2),e.Y8G("height",200)("autoHeight",!0)("options",n.editorFuncOptions),e.R50("ngModel",n.inputStr),e.R7$(4),e.Y8G("disabled",""==n.inputStr&&"UserOutputFormatBuilder"==n.agentName),e.R7$(7),e.Y8G("disabled",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"Generating...":"Save"," ")}}function k1(t,r){1&t&&(e.j41(0,"div")(1,"div"),e.EFF(2," Please add agent Prompt first! "),e.k0s(),e.j41(3,"div",10)(4,"button",11),e.EFF(5,"Close"),e.k0s()()())}let S1=(()=>{var t;class r extends bs{constructor(i,s){super(),(0,f.A)(this,"zone",void 0),(0,f.A)(this,"aiApi",void 0),(0,f.A)(this,"editorFuncOptions",{theme:"myCoolTheme",language:"json",wordWrap:"on",lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,scrollbar:{vertical:"hidden",useShadows:!1,alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},automaticLayout:!1,renderLineHighlight:"none",scrollBeyondLastLine:!1,contextmenu:!1}),(0,f.A)(this,"inputStr",""),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genMsg",""),(0,f.A)(this,"agentName","UserOutputFormatBuilder"),(0,f.A)(this,"agentRunner",void 0),(0,f.A)(this,"outputEditor",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"onSave",new e.bkB),this.zone=i,this.aiApi=s,this.agentRunner=new xs(this.aiApi,this)}generate(){this.isLoading=!0,this.outputEditor?.writeValue(""),this.agentRunner.setAgentName(this.agentName),this.agentRunner.clearChat(),this.agentRunner.addUserMessage(this.inputStr);let i=[`agent::${this.prompt}`];""!=this.genMsg&&i.push(this.genMsg),this.agentRunner.setVars(i),this.agentRunner.send()}save(){this.onSave.emit(this.inputStr)}onMsgUpdate(i,s){this.outputEditor?.insertText(s??"")}onDone(i){this.outputEditor?.formatCode(),this.zone.run(()=>{this.isLoading=!1})}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(e.SKi),e.rXU(dt))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-output-format"]],viewQuery:function(i,s){if(1&i&&e.GBs(y1,5),2&i){let l;e.mGM(l=e.lsd())&&(s.outputEditor=l.first)}},inputs:{inputStr:"inputStr",prompt:"prompt",genMsg:"genMsg",agentName:"agentName"},outputs:{onSave:"onSave"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["outputEditor",""],[4,"ngIf"],["class","small mb-3",4,"ngIf"],[1,"box","shadow-none","bg-transparent","border","border-label-secondary","p-4"],[1,"my-code-editor",3,"ngModelChange","height","autoHeight","options","ngModel"],[1,"row"],[1,"col-lg-5","mt-3"],["type","button",1,"btn","btn-text-primary",3,"click","disabled"],[1,"bx","bxs-magic-wand","me-2"],[1,"col-lg-7"],[1,"mt-3","text-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","me-3"],["data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],[1,"small","mb-3"]],template:function(i,s){1&i&&e.DNE(0,C1,17,9,"div",1)(1,k1,6,0,"div",1),2&i&&(e.Y8G("ngIf",s.prompt),e.R7$(),e.Y8G("ngIf",!s.prompt))},dependencies:[Ur.V,kf,L.MD,L.bT,N.YN,N.BC,N.vS]})),r})();function w1(t,r){if(1&t&&e.nrm(0,"i",19),2&t){const n=e.XpG();e.FS9("title",n.err)}}function N1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.brH(2,2,n.value,50,"**SYSTEM:")," ")}}function E1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",28),e.EFF(3," Add prompt "),e.k0s()()}}function I1(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," System Instructions "),e.k0s(),e.DNE(3,N1,3,6,"div",25)(4,E1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function T1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function A1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",29),e.EFF(3," Add prompt template "),e.k0s()()}}function R1(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Prompt Template "),e.k0s(),e.DNE(3,T1,3,5,"div",25)(4,A1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function F1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function j1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",29),e.EFF(3," Add examples "),e.k0s()()}}function M1(t,r){if(1&t&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2," Examples "),e.k0s(),e.DNE(3,F1,3,5,"div",25)(4,j1,4,0,"div",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function $1(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n),e.R7$(),e.JRh(n)}}function G1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",24),e.EFF(2," Model "),e.k0s(),e.j41(3,"select",30),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,$1,2,2,"option",31),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.modelNames)}}function D1(t,r){if(1&t&&(e.j41(0,"option",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function V1(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",35),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(1,D1,2,2,"option",31),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function O1(t,r){1&t&&(e.j41(0,"div",36)(1,"small",37),e.EFF(2,"No Vector Collection"),e.k0s()())}function z1(t,r){if(1&t&&(e.j41(0,"div")(1,"label",24),e.EFF(2," Documents "),e.k0s(),e.j41(3,"div"),e.DNE(4,V1,2,2,"select",33)(5,O1,3,0,"div",34),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function B1(t,r){if(1&t){const n=e.RV6();e.j41(0,"li",46),e.nrm(1,"i",47),e.EFF(2),e.j41(3,"i",48),e.bIt("click",function(){const s=e.eBV(n).index,l=e.XpG(4);return e.Njj(l.delTool(s))}),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n," ")}}function L1(t,r){if(1&t&&(e.j41(0,"div",43)(1,"ul",44),e.DNE(2,B1,4,1,"li",45),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",n.tools)}}function P1(t,r){if(1&t){const n=e.RV6();e.j41(0,"li")(1,"a",49),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.addTool(s))}),e.EFF(2),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(2),e.SpI(" ",n.name," ")}}function X1(t,r){if(1&t&&(e.j41(0,"div",38)(1,"label",24),e.EFF(2," Tools "),e.k0s(),e.DNE(3,L1,3,1,"div",39),e.j41(4,"div")(5,"div",40)(6,"button",41),e.nrm(7,"i",29),e.EFF(8," Add tool "),e.k0s(),e.j41(9,"ul",42),e.DNE(10,P1,3,1,"li",5),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",n.tools.length>0),e.R7$(7),e.Y8G("ngForOf",n.lstTool)}}function Y1(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,I1,5,2,"div",20)(2,R1,5,2,"div",20)(3,M1,5,2,"div",20)(4,G1,5,2,"div",21),e.j41(5,"div"),e.DNE(6,z1,6,2,"div",21)(7,X1,11,2,"div",22),e.k0s()()),2&t){const n=r.$implicit,i=e.XpG();e.R7$(),e.Y8G("ngIf","prompt"==n.key),e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","examples"==n.key),e.R7$(),e.Y8G("ngIf","model"==n.key),e.R7$(),e.ZvI("mt-2 ",i.moreSetting?"":"d-none",""),e.R7$(),e.Y8G("ngIf","doc"==n.key),e.R7$(),e.Y8G("ngIf","tools"==n.key)}}function H1(t,r){if(1&t&&(e.j41(0,"div",54),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function U1(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",50)(1,"div",51),e.EFF(2," Outputs "),e.j41(3,"i",52),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.openSetting("outputFormat"))}),e.k0s()(),e.DNE(4,H1,2,2,"div",53),e.k0s()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.nodeData.outputs)}}function W1(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Add Prompt "),e.k0s())}function Z1(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Input Template "),e.k0s())}function J1(t,r){1&t&&(e.j41(0,"h5",55),e.EFF(1," Set Output Format "),e.k0s())}function K1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",56),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onAddPrompt(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("agentName","UserAgentBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function q1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",57),e.bIt("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateOutputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function Q1(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-output-format",58),e.bIt("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateExamples(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("genMsg",n.genExampleMsg)("agentName","ExamplesBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("prompt",n.prompt)}}function ev(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",59),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let qm=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","agent"),(0,f.A)(this,"desc","An AI Agent to process your data"),(0,f.A)(this,"moreSetting",!1),(0,f.A)(this,"modelNames",["gemini-1.5-flash","gemini-1.5-pro","gemini-1.5-pro-002","gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp-1219"]),(0,f.A)(this,"prompt",""),(0,f.A)(this,"genExampleMsg",""),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"lstCollection",[]),(0,f.A)(this,"lstTool",[{name:"code_execution"},{name:"google_search_retrieval"}]),(0,f.A)(this,"tools",[]),(0,f.A)(this,"agentRunner",void 0)}getClassType(){return r}getConfig(){return[{key:"prompt",value:""},{key:"input",value:""},{key:"examples",value:""},{key:"model",value:"gemini-1.5-flash"},{key:"doc",value:""},{key:"tools",value:[]},{key:"outputFormat",value:""}]}showMore(){this.ngZone?.run(()=>{this.moreSetting=!this.moreSetting})}updateOutput(){let i=this.findConfig("outputFormat").trim();this.nodeData.outputs=""==i?[{name:this.id+"-agentResponse",type:"string",demo:""}]:[{name:this.id+"-agentResponse",type:"json",demo:JSON.stringify(Pe.createDemoDataForJsonSchema(i))}]}openSetting(i){this.prompt=this.findConfig("prompt"),this.genExampleMsg=this.findConfig("outputFormat"),""!=this.genExampleMsg&&(this.genExampleMsg="output_format::"+this.genExampleMsg),super.openSetting(i)}onAddPrompt(i){this.setConfig("prompt",i)}updateOutputFormat(i){this.setConfig("outputFormat",i),this.updateOutput()}updateExamples(i){this.setConfig("examples",i),this.updateOutput()}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}loadCols(){this.appService?.listVCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateCol(){this.setConfig("doc",this.selectedCollection)}ngOnInit(){super.ngOnInit(),this.appService?.listVCollection().subscribe(i=>{this.lstCollection=i}),this.tools=this.findConfig("tools")??[],this.selectedCollection=this.findConfig("doc"),this.loadCols(),(this.selectedCollection||this.tools.length>0)&&(this.moreSetting=!0)}addTool(i){this.ngZone?.run(()=>{0==this.tools.filter(l=>l==i.name).length&&(this.tools.push(i.name),this.setConfig("tools",this.tools))})}delTool(i){this.ngZone?.run(()=>{this.tools.splice(i,1),this.setConfig("tools",this.tools)})}ngDoCheck(){this.err=""==this.findConfig("prompt")?'No Prompt. Click "Add prompt" to instruct your agent':""}run(i,s,l,d,m,_){let g=this.findConfig("doc",l),v=this.findConfig("input",l);v=this.parseTempate(v,d);let b=[];for(let x of d.entries())b.push(`${x[0]}::${x[1]}`);let C=new dt(i);this.agentRunner=new xs(C,new bs(void 0,x=>{let I=new Map,T=null;try{T=JSON.parse(x)}catch{}for(let R of l.outputs)I.set(R.name,T??x);_(I)})),this.agentRunner.setAgentName(`flow-${s}.${l.id}`),this.agentRunner.setVars(b),this.agentRunner.addUserMessage(v),g&&this.agentRunner.setMemType(g),this.agentRunner.send()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-llm-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:24,vars:19,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],[1,"p-1","text-center",3,"click"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body","content"],[3,"agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"inputStr","prompt","onSave",4,"ngIf"],[3,"genMsg","agentName","inputStr","prompt","onSave",4,"ngIf"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bxs-magic-wand","me-2"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change","click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[1,"mb-3"],[1,"text-muted"],[1,"mt-2"],["class","small",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","p-0","btn-text-primary","dropdown-toggle","hide-arrow"],[1,"dropdown-menu"],[1,"small"],[1,"list-group"],["class","p-0 list-group-item d-flex align-items-center border-0 small",4,"ngFor","ngForOf"],[1,"p-0","list-group-item","d-flex","align-items-center","border-0","small"],[1,"bx","bx-code","me-2"],[1,"bx","bx-x","ms-3","cursor-pointer",3,"click"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-small",3,"click"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["title","Set Output Format",1,"bx","bx-code-alt","cursor-pointer","text-link",3,"click"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[1,"modal-title"],[3,"onClose","onSave","agentName","inputStr","vars"],[3,"onSave","inputStr","prompt"],[3,"onSave","genMsg","agentName","inputStr","prompt"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,w1,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Y1,8,9,"div",5),e.j41(8,"div",6),e.bIt("click",function(){return s.showMore()}),e.nrm(9,"i"),e.k0s()()(),e.DNE(10,U1,5,1,"div",7),e.k0s(),e.nrm(11,"button",8),e.j41(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),e.DNE(16,W1,2,0,"h5",13)(17,Z1,2,0,"h5",13)(18,J1,2,0,"h5",13),e.k0s(),e.j41(19,"div",14),e.DNE(20,K1,1,3,"app-input-format",15)(21,q1,1,2,"app-output-format",16)(22,Q1,1,4,"app-output-format",17)(23,ev,1,2,"app-input-format",18),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(2),e.ZvI("bx bx-chevron-",s.moreSetting?"up":"down"," cursor-pointer"),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(4),e.Y8G("ngIf","prompt"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(2),e.Y8G("ngIf","prompt"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","outputFormat"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","examples"==(null==s.settingConf?null:s.settingConf.key)),e.R7$(),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,S1,St,on]})),r})();function tv(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function nv(t,r){if(1&t&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function ov(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",18),e.EFF(2," Run App "),e.k0s(),e.j41(3,"select",19),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedApp,s)||(l.selectedApp=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateApp())}),e.DNE(4,nv,2,2,"option",20),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.selectedApp),e.R7$(),e.Y8G("ngForOf",n.lstApp)}}function iv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function rv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",25),e.EFF(3," Set Value "),e.k0s()()}}function sv(t,r){if(1&t&&(e.j41(0,"div")(1,"label",18),e.EFF(2),e.k0s(),e.DNE(3,iv,3,5,"div",22)(4,rv,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.SpI(" ",i.getAppVar(n.key)," "),e.R7$(),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function av(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,ov,5,2,"div",17)(2,sv,5,3,"div",17),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","app"==n.key),e.R7$(),e.Y8G("ngIf",n.key.startsWith("app-args::"))}}function lv(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function cv(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,lv,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function uv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",n.settingConf.value)("vars",n.nodeData.inputs)}}let Qm=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","router"),(0,f.A)(this,"desc","Execute other app"),(0,f.A)(this,"lstApp",[]),(0,f.A)(this,"selectedApp",0)}getClassType(){return r}getConfig(){return[{key:"app",value:0}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-appResult",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedApp=this.findConfig("app"),this.appService.listAppRoute().subscribe(i=>{this.ngZone.run(()=>{this.lstApp=i})})}upgradeConf(){}getAppVar(i){return i.split("::")[1]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}updateApp(){this.setConfig("app",this.selectedApp);let i=this.lstApp.filter(s=>s.id==this.selectedApp)[0];this.nodeData.conf=this.nodeData.conf.slice(0,1);for(let s of i.args)this.nodeData.conf.push({key:`app-args::${s}`,value:""});this.noticeUpdate()}run(i,s,l,d,m,_){let v="/runner/"+this.findConfig("app",l);m.navigate([v]),_(new Map)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-route-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,tv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,av,3,2,"div",5),e.k0s()(),e.DNE(8,cv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,uv,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf",s.settingConf))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,St,on]})),r})();function dv(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function pv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function fv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add query template "),e.k0s()()}}function mv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Query Template "),e.k0s(),e.DNE(3,pv,3,5,"div",21)(4,fv,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function _v(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Type "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.j41(5,"option",26),e.EFF(6,"Data"),e.k0s(),e.j41(7,"option",27),e.EFF(8,"Vector"),e.k0s()()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function hv(t,r){if(1&t&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FCK("value","",n.id,":",n.name,""),e.R7$(),e.SpI("",n.name," ")}}function gv(t,r){if(1&t){const n=e.RV6();e.j41(0,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())}),e.DNE(1,hv,2,4,"option",30),e.k0s()}if(2&t){const n=e.XpG(3);e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function vv(t,r){1&t&&(e.j41(0,"div",32)(1,"small",33),e.EFF(2,"No Collection"),e.k0s()())}function yv(t,r){if(1&t&&(e.j41(0,"div")(1,"label",20),e.EFF(2," Select Collection "),e.k0s(),e.j41(3,"div"),e.DNE(4,gv,2,2,"select",28)(5,vv,3,0,"div",29),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf",n.lstCollections.length>0),e.R7$(),e.Y8G("ngIf",0==n.lstCollections.length)}}function bv(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,mv,5,2,"div",17)(2,_v,9,1,"div",18)(3,yv,6,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","type"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function xv(t,r){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Cv(t,r){if(1&t&&(e.j41(0,"div",34)(1,"div",35),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,xv,2,2,"div",36),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function kv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",38),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.vars)("varFormat",n.varFormat)("varBtnLabel","Add Condition")}}let e_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","search"),(0,f.A)(this,"desc","Search your storage data"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"vars",[]),(0,f.A)(this,"varFormat",'"@@":"<your_search_value>"\n')}getClassType(){return r}getConfig(){return[{key:"type",value:"data"},{key:"collection",value:""},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-lstData",type:"array",demo:'{"Id": "1", "CreatedDate": "yyyy-mm-dd", "Content": "json"}'}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){"vector"==this.findConfig("type")?this.appService?.listVCollection().subscribe(s=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...s)})}):this.appService?.listCollection().subscribe(s=>{this.ngZone?.run(()=>{this.lstCollections=[{id:0,name:""}],this.lstCollections.push(...s),this.loadVars()})})}loadVars(){this.vars=[],this.vars.push(...this.nodeData.inputs);let i=this.lstCollections.filter(s=>s.id+":"+s.name==this.selectedCollection)[0];if(i?.spec){let s=Pe.extractProperties(JSON.parse(i.spec),0);for(let l of s)this.vars.push({name:l.name,type:l.type,demo:""})}}updateCol(){this.setConfig("collection",this.selectedCollection),this.loadVars()}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,m,_){let g=this.findConfig("input",l);g=this.parseTempate(g,d);let v=this.findConfig("collection",l).split(":"),b=this.findConfig("type",l),C=new je(i);"data"==b?C.listData({id:+v[0],name:g,type:b}).subscribe(x=>{let I=this.setupOutputValue(x,l);_(I)}):"vector"==b&&C.searchVector({collection:v[1],content:g,id:0,vector:[]}).subscribe(x=>{let I=this.setupOutputValue(x,l);_(I)})}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-search-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","varFormat","varBtnLabel","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","data"],["value","vector"],["class","form-select form-select-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","mb-5",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mb-5"],[1,"text-muted"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars","varFormat","varBtnLabel"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,dv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,bv,4,3,"div",5),e.k0s()(),e.DNE(8,Cv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Query Template "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,kv,1,4,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,St,on]})),r})();class t_{}class Sv extends t_{constructor(r){super(),(0,f.A)(this,"idxPattern",void 0),this.idxPattern=r}parse(r){let n=[],i=this.cleanText(r).split("<br>");console.log(i);let s=null;for(let m of i){let _=this.removeVietnameseTones(m);if(_=this.removeHtmlTag(_),""==_)continue;let g=!1;for(let v of this.idxPattern){let b=v.split("==>"),C=b[0],x=new RegExp(b[1].trim()),I=this.getPatLevel(C);if(new RegExp(C.trim()).test(_)){let R={title:m,childs:[],content:""};if(0==I&&(n.length>0||x.test(_)))n.push(R),s=R;else if(n.length>0){let E=n[n.length-1];for(let $=0;$<I-1;$++){if(!(E.childs.length>0)){E=null;break}E=E.childs[E.childs.length-1]}null!=E&&(E.childs.length>0||x.test(_))&&(E.childs.push(R),s=R)}g=!0;break}}s&&!g&&(s.content+=(""==s.content?"":"<br>")+m,s.hasTable||(s.hasTable=m.indexOf("<table>")>=0))}let l=[],d=new RegExp(this.idxPattern[0].split("==>")[1].trim());for(let m of n)0==m.childs.length&&0==m.content.length||(l.length>0||d.test(this.removeHtmlTag(m.title)))&&l.push(m);return l}getPatLevel(r){let n=0;for(const i of r){if("\t"!=i)break;n++}return n}cleanText(r){let n=["div"],i=r;for(let s of n)i=i.replaceAll(`<${s}>`,"").replaceAll(`</${s}>`,"");return i=i.replaceAll(/<\/table>\s*\d+[\sbr<>\d]+<end-page\/>\s*<table>/g,""),i=i.replaceAll(/\d+[\sbr<>\d]+<end-page\/>/g,'<hr class="solid"><br>'),i=i.replaceAll("</table>","</table><br>"),i=i.replaceAll("\n","").trim(),i}removeHtmlTag(r){let n=["div","b","i","u"],i=r;for(let s of n)i=i.replaceAll(`<${s}>`,"").replaceAll(`</${s}>`,"");return i.trim()}removeVietnameseTones(r){return(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()}}class wv extends t_{parse(r){return[]}}function Nv(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Ev(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Iv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Tv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Input Template "),e.k0s(),e.DNE(3,Ev,3,5,"div",21)(4,Iv,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Av(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Split character "),e.k0s(),e.j41(3,"input",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",n.value)}}function Rv(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Tv,5,2,"div",17)(2,Av,4,1,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","character"==n.key)}}function Fv(t,r){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function jv(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Fv,2,2,"div",28),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Mv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",30),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let n_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"spliters",new Map([["character-spliter",new wv],["heading-spliter",new Sv(["^[IVX]+\\.\\s*[A-Z][A-Z0-9.,\\s]*$ ==> ^I\\.","\t^\\d+\\.\\s*[A-Z].+ ==> ^1\\.","\t\t^\\d+\\.\\d+\\.\\s*[A-Z].+ ==> ^\\d+\\.1\\."])]])),(0,f.A)(this,"type","spliter"),(0,f.A)(this,"desc","Split text content into multiple parts for embedding")}getClassType(){return r}getConfig(){return[{key:"input",value:""},{key:"character",value:"\\n\\n"}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-parts",type:"string[]",demo:'["text"]'}]}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,m,_){let g=this.findConfig("input",l);g=this.parseTempate(g,d);let v=this.findConfig("model",l),b=this.spliters.get(v);if(!b)return void _(new Map);let C=b.parse(g);_(this.setupOutputValue(C,l))}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-spliter-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Nv,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Rv,3,2,"div",5),e.k0s()(),e.DNE(8,jv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Mv,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,St,on]})),r})();function $v(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function Gv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Dv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",23),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",24),e.EFF(3," Add input template "),e.k0s()()}}function Vv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"label",20),e.EFF(2," Data Template "),e.k0s(),e.DNE(3,Gv,3,5,"div",21)(4,Dv,4,0,"div",18),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Ov(t,r){if(1&t&&(e.j41(0,"option",28),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function zv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",25),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.DNE(5,Ov,2,2,"option",26),e.k0s(),e.j41(6,"button",27),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.showAddCollectionModal())}),e.nrm(7,"i",24),e.EFF(8," New folder "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function Bv(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Vv,5,2,"div",17)(2,zv,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Lv(t,r){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Pv(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Lv,2,2,"div",31),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function Xv(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",33),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){let n;const i=e.XpG();e.Y8G("inputStr",null!==(n=null==i.settingConf?null:i.settingConf.value)&&void 0!==n?n:i.curColSpec)("vars",i.nodeData.inputs)}}let o_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","database"),(0,f.A)(this,"displayName","SaveFile"),(0,f.A)(this,"desc","Save your data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"curColSpec","")}getClassType(){return r}getConfig(){return[{key:"collection",value:0},{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateCol(){this.setConfig("collection",this.selectedCollection);let i=this.lstCollections.filter(s=>s.id==this.selectedCollection)[0];this.curColSpec=i?.spec??""}updateInputFormat(i){this.setConfig("input",i),this.noticeUpdate()}run(i,s,l,d,m,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,$v,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,Bv,3,2,"div",5),e.k0s()(),e.DNE(8,Pv,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,Xv,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,L.MD,L.Sq,L.bT,St,on]})),r})();function Yv(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function Hv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function Uv(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function Wv(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Template "),e.k0s(),e.DNE(3,Hv,3,5,"div",14)(4,Uv,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function Zv(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Wv,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key)}}function Jv(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function Kv(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Jv,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function qv(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Yv,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,Zv,2,1,"div",8),e.k0s()(),e.DNE(8,Kv,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function Qv(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function e2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function t2(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,e2,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key))}}let i_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","text"),(0,f.A)(this,"desc","Create text data")}getClassType(){return r}getConfig(){return[{key:"html",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-text",type:"string",demo:""}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-text-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,qv,9,4,"div",0)(1,Qv,1,3,"button",1)(2,t2,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Ur.V,on,St]})),r})();function n2(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function o2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function i2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add audio "),e.k0s()()}}function r2(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Audio data "),e.k0s(),e.DNE(3,o2,3,5,"div",14)(4,i2,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function s2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,r2,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","audio"==n.key)}}function a2(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function l2(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,a2,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function c2(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,n2,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,s2,2,1,"div",8),e.k0s()(),e.DNE(8,l2,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function u2(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function d2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function p2(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,d2,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","audio"==(null==n.settingConf?null:n.settingConf.key))}}let r_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","transcription"),(0,f.A)(this,"desc","Generate transcription for audio file")}getClassType(){return r}getConfig(){return[{key:"audio",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-transcription",type:"json",demo:JSON.stringify({language:"english",duration:8.47,text:"Some long text",words:[{word:"The",start:0,end:.23}]})}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-transcription-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,c2,9,4,"div",0)(1,u2,1,3,"button",1)(2,p2,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,on,St]})),r})();function f2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function m2(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("string"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function _2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Content "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,m2,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.nodeData.inputs)}}function h2(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.HbH("vector"==n.type?"":"d-none"),e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function g2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"label",20),e.EFF(2," Vector "),e.k0s(),e.j41(3,"select",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.DNE(4,h2,2,5,"option",22),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.R50("ngModel",n.value),e.R7$(),e.Y8G("ngForOf",i.nodeData.inputs)}}function v2(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.name),e.R7$(),e.JRh(n.name)}}function y2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",20),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",24),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(2);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.loadCols())}),e.DNE(5,v2,2,2,"option",25),e.k0s(),e.j41(6,"button",26),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.showAddVCollectionModal())}),e.nrm(7,"i",27),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function b2(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,_2,5,2,"div",17)(2,g2,5,2,"div",17)(3,y2,9,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","content"==n.key),e.R7$(),e.Y8G("ngIf","vector"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function x2(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function C2(t,r){if(1&t&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,x2,2,2,"div",30),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function k2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",32),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let s_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","vectorDatabase"),(0,f.A)(this,"desc","Save embedded vector to db"),(0,f.A)(this,"selectedCollection",""),(0,f.A)(this,"lstCollections",[])}getClassType(){return r}getConfig(){return[{key:"content",value:""},{key:"vector",value:""},{key:"collection",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-dataID",type:"string",demo:""}]}ngDoCheck(){for(let i of this.nodeData.conf)"content"==i.key&&""==i.value&&(i.value=this.nodeData.inputs.filter(s=>"string"==s.type)[0]?.name??""),"vector"==i.key&&""==i.value&&(i.value=this.nodeData.inputs.filter(s=>"vector"==s.type)[0]?.name??"")}ngOnInit(){super.ngOnInit(),this.selectedCollection=this.findConfig("collection"),this.loadCols()}loadCols(){this.appService?.listVCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateInputFormat(i){this.setConfig("content",i),this.noticeUpdate()}updateCol(){this.setConfig("collection",this.selectedCollection)}run(i,s,l,d,m,_){}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-vector-storage-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value","class",4,"ngFor","ngForOf"],[3,"value"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,f2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,b2,4,3,"div",5),e.k0s()(),e.DNE(8,C2,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Input Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,k2,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","input"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,L.MD,L.Sq,L.bT,on]})),r})();function S2(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function w2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function N2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Template "),e.k0s()()}}function E2(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Video Template "),e.k0s(),e.DNE(3,w2,3,5,"div",14)(4,N2,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function I2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,E2,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","source"==n.key)}}function T2(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function A2(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,T2,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function R2(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,S2,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,I2,2,1,"div",8),e.k0s()(),e.DNE(8,A2,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function F2(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function j2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function M2(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,j2,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","source"==(null==n.settingConf?null:n.settingConf.key))}}let a_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","videoRender"),(0,f.A)(this,"desc","Render video")}getClassType(){return r}getConfig(){return[{key:"source",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-videoUrl",type:"string",demo:""}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-video-render-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,R2,9,4,"div",0)(1,F2,1,3,"button",1)(2,M2,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Ur.V,on,St]})),r})();function $2(t,r){if(1&t&&e.nrm(0,"i",11),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function G2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function D2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",19),e.EFF(3," Add Design "),e.k0s()()}}function V2(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Design "),e.k0s(),e.DNE(3,G2,3,5,"div",16)(4,D2,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function O2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function z2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",18),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",19),e.EFF(3," Add Template "),e.k0s()()}}function B2(t,r){if(1&t&&(e.j41(0,"div",14)(1,"label",15),e.EFF(2," Save Template "),e.k0s(),e.DNE(3,O2,3,5,"div",16)(4,z2,4,0,"div",13),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function L2(t,r){if(1&t&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.FS9("value",n.id),e.R7$(),e.JRh(n.name)}}function P2(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",15),e.EFF(2," Save To "),e.k0s(),e.j41(3,"div")(4,"select",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG(3);return e.DH7(l.selectedCollection,s)||(l.selectedCollection=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.updateCol())})("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.loadCols())}),e.DNE(5,L2,2,2,"option",21),e.k0s(),e.j41(6,"button",22),e.bIt("click",function(){e.eBV(n);const s=e.XpG(3);return e.Njj(s.showAddCollectionModal())}),e.nrm(7,"i",19),e.EFF(8," New collection "),e.k0s()()()}if(2&t){const n=e.XpG(3);e.R7$(4),e.R50("ngModel",n.selectedCollection),e.R7$(),e.Y8G("ngForOf",n.lstCollections)}}function X2(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,V2,5,2,"div",12)(2,B2,5,2,"div",12)(3,P2,9,2,"div",13),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","html"==n.key),e.R7$(),e.Y8G("ngIf","saveTemplate"==n.key),e.R7$(),e.Y8G("ngIf","collection"==n.key)}}function Y2(t,r){if(1&t&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function H2(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,Y2,2,2,"div",26),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function U2(t,r){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,$2,1,1,"i",6),e.k0s(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,X2,4,3,"div",9),e.k0s()(),e.DNE(8,H2,4,1,"div",10),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function W2(t,r){if(1&t&&e.nrm(0,"button",28),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function Z2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",35),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.save(s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("agentName","UserHtmlViewBuilder")("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function J2(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",36),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateSaveTemplate(s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!1)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function K2(t,r){if(1&t&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32),e.DNE(4,Z2,1,4,"app-input-format",33)(5,J2,1,3,"app-input-format",34),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","html"==(null==n.settingConf?null:n.settingConf.key)),e.R7$(),e.Y8G("ngIf","saveTemplate"==(null==n.settingConf?null:n.settingConf.key))}}function q2(t,r){if(1&t&&e.nrm(0,"div",37),2&t){const n=e.XpG();e.Y8G("innerHTML",n.rendered,e.npT)}}let l_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"vars",new Map),(0,f.A)(this,"type","htmlViewer"),(0,f.A)(this,"desc","View output data"),(0,f.A)(this,"selectedCollection",0),(0,f.A)(this,"lstCollections",[]),(0,f.A)(this,"html",""),(0,f.A)(this,"rendered","")}getClassType(){return r}updateOutput(){let i=this.findConfig("html"),s=this.getAllSelectablePairs(i).map(l=>l.varName);s=Pe.distinctArray(s),this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}];for(let l of s)this.nodeData.outputs.push({name:l,type:"array",demo:"[]"})}getConfig(){return[{key:"html",value:""}]}save(i){this.setConfig("html",i),this.noticeUpdate()}updateSaveTemplate(i){this.setConfig("saveTemplate",i),this.noticeUpdate()}loadCols(){this.appService?.listCollection().subscribe(i=>{this.ngZone?.run(()=>{this.lstCollections=i})})}updateCol(){this.setConfig("collection",this.selectedCollection)}ngOnInit(){this.html=this.findConfig("html"),"render"==this.mode&&(this.rendered=this.compileTemplate()),this.selectedCollection=this.findConfig("collection"),this.loadCols()}getAllSelectablePairs(i){const s=/bs-select="([^=>]+)=>([^"]+)"/g,l=[];let d;for(;null!==(d=s.exec(i));){const[m,_,g]=d;l.push({attr:_,varName:g})}return l}compileTemplate(){return Pe.compileTemplate(this.html,this.vars)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-viewer-node"]],inputs:{vars:"vars"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"form-select","form-select-sm",3,"ngModelChange","change","click","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","p-0","btn-text-primary","mt-2",3,"click"],[3,"value"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","agentName","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","agentName","inputStr","vars"],[3,"onClose","onSave","html","inputStr","vars"],[3,"innerHTML"]],template:function(i,s){1&i&&e.DNE(0,U2,9,4,"div",0)(1,W2,1,3,"button",1)(2,K2,6,4,"div",2)(3,q2,1,1,"div",3),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf","render"==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.xH,N.y7,N.wz,N.BC,N.vS,Ur.V,on,St]})),r})();function Q2(t,r){if(1&t&&e.nrm(0,"i",15),2&t){const n=e.XpG();e.FS9("title",n.err)}}function ey(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Url "),e.k0s(),e.j41(3,"div")(4,"input",20),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function ty(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"label",19),e.EFF(2," Cookies (`name: value` per line) "),e.k0s(),e.j41(3,"div")(4,"textarea",21),e.mxI("ngModelChange",function(s){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.value,s)||(l.value=s),e.Njj(s)}),e.k0s()()()}if(2&t){const n=e.XpG().$implicit;e.R7$(4),e.R50("ngModel",n.value)}}function ny(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function oy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",25),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",26),e.EFF(3," Add new "),e.k0s()()}}function iy(t,r){if(1&t&&(e.j41(0,"div",22)(1,"label",19),e.EFF(2," Request Body "),e.k0s(),e.DNE(3,ny,3,5,"div",23)(4,oy,4,0,"div",17),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function ry(t,r){if(1&t&&(e.j41(0,"div",16),e.DNE(1,ey,5,1,"div",17)(2,ty,5,1,"div",17)(3,iy,5,2,"div",18),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","url"==n.key),e.R7$(),e.Y8G("ngIf","cookies"==n.key),e.R7$(),e.Y8G("ngIf","body"==n.key)}}function sy(t,r){if(1&t&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function ay(t,r){if(1&t&&(e.j41(0,"div",27)(1,"div",28),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,sy,2,2,"div",29),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function ly(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",31),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.updateInputFormat(s))}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}let c_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","webAccess"),(0,f.A)(this,"desc","Get content from a websize")}getClassType(){return r}getConfig(){return[{key:"url",value:""},{key:"cookies",value:""},{key:"body",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-html",type:"string",demo:""}]}updateInputFormat(i){this.setConfig("body",i),this.noticeUpdate()}run(i,s,l,d,m,_){let g=this.findConfig("url",l),v=this.findConfig("cookies",l),b=this.findConfig("body",l);new je(i).fetchUrl({url:g,key:v,args:b}).subscribe(x=>{let I=this.setupOutputValue(x.data,l);_(I)})}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-web-access-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],["class","mb-3",4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[3,"inputStr","vars","onClose","onSave",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],[1,"mb-3"],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"form-label"],["type","text",1,"form-control","text-small",3,"ngModelChange","ngModel"],["rows","3","wrap","off",1,"form-control","text-small",2,"white-space","pre",3,"ngModelChange","ngModel"],[1,"mb-2"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],[3,"onClose","onSave","inputStr","vars"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,Q2,1,1,"i",2),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.DNE(7,ry,4,3,"div",5),e.k0s()(),e.DNE(8,ay,4,1,"div",6),e.k0s(),e.nrm(9,"button",7),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e.EFF(15," Request Body Format "),e.k0s()(),e.j41(16,"div",13),e.DNE(17,ly,1,2,"app-input-format",14),e.k0s()()()()),2&i&&(e.R7$(3),e.JRh(s.type),e.R7$(),e.Y8G("ngIf",s.err),e.R7$(3),e.Y8G("ngForOf",s.nodeData.conf),e.R7$(),e.Y8G("ngIf",s.nodeData.outputs.length>0),e.R7$(),e.Mz_("id","btnShowModal-",s.id,""),e.BMQ("data-bs-target","#settingModal-"+s.id),e.R7$(),e.Mz_("id","settingModal-",s.id,""),e.R7$(7),e.Y8G("ngIf","body"==(null==s.settingConf?null:s.settingConf.key)))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,St,on]})),r})();function cy(t,r){if(1&t&&e.nrm(0,"i",10),2&t){const n=e.XpG(2);e.FS9("title",n.err)}}function uy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.EFF(1),e.nI1(2,"trunc"),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.FS9("title",n.value),e.R7$(),e.SpI(" ",e.i5U(2,2,n.value,50)," ")}}function dy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const s=e.XpG(2).$implicit,l=e.XpG(2);return e.Njj(l.openSetting(s.key))}),e.nrm(2,"i",18),e.EFF(3," Add Inputs "),e.k0s()()}}function py(t,r){if(1&t&&(e.j41(0,"div",12)(1,"label",13),e.EFF(2," Inputs "),e.k0s(),e.DNE(3,uy,3,5,"div",14)(4,dy,4,0,"div",15),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.Y8G("ngIf",n.value),e.R7$(),e.Y8G("ngIf",!n.value)}}function fy(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,py,5,2,"div",11),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","input"==n.key)}}function my(t,r){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=r.$implicit;e.R7$(),e.Lme(" ",n.name,": ",n.type," ")}}function _y(t,r){if(1&t&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2," Outputs "),e.k0s(),e.DNE(3,my,2,2,"div",21),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.nodeData.outputs)}}function hy(t,r){if(1&t&&(e.j41(0,"div",3)(1,"div",4)(2,"b"),e.EFF(3),e.k0s(),e.DNE(4,cy,1,1,"i",5),e.k0s(),e.j41(5,"div",6)(6,"div",7),e.DNE(7,fy,2,1,"div",8),e.k0s()(),e.DNE(8,_y,4,1,"div",9),e.k0s()),2&t){const n=e.XpG();e.R7$(3),e.JRh(n.type),e.R7$(),e.Y8G("ngIf",n.err),e.R7$(3),e.Y8G("ngForOf",n.nodeData.conf),e.R7$(),e.Y8G("ngIf",n.nodeData.outputs.length>0)}}function gy(t,r){if(1&t&&e.nrm(0,"button",23),2&t){const n=e.XpG();e.Mz_("id","btnShowModal-",n.id,""),e.BMQ("data-bs-target","#settingModal-"+n.id)}}function vy(t,r){if(1&t){const n=e.RV6();e.j41(0,"app-input-format",29),e.bIt("onClose",function(){e.eBV(n);const s=e.XpG(2);return e.Njj(s.closeSetting())})("onSave",function(s){e.eBV(n);const l=e.XpG(2);return e.Njj(l.updateConf(l.settingConf.key,s))}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("html",!0)("inputStr",null==n.settingConf?null:n.settingConf.value)("vars",n.nodeData.inputs)}}function yy(t,r){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27),e.DNE(4,vy,1,3,"app-input-format",28),e.k0s()()()()),2&t){const n=e.XpG();e.Mz_("id","settingModal-",n.id,""),e.R7$(4),e.Y8G("ngIf","input"==(null==n.settingConf?null:n.settingConf.key))}}let u_=(()=>{var t;class r extends Ht{constructor(...i){super(...i),(0,f.A)(this,"type","zip"),(0,f.A)(this,"desc","Zip your files")}getClassType(){return r}getConfig(){return[{key:"input",value:""}]}updateOutput(){this.nodeData.outputs=[{name:this.id+"-zipData",type:"string",demo:""}]}updateConf(i,s){this.setConfig(i,s),this.noticeUpdate()}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-zip-node"]],standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:3,consts:[["class","box border border-label-secondary",4,"ngIf"],["class","d-none","data-bs-toggle","modal",3,"id",4,"ngIf"],["class","modal fade","data-bs-backdrop","static","tabindex","-1","aria-hidden","true",3,"id",4,"ngIf"],[1,"box","border","border-label-secondary"],[1,"p-3","border-bottom","bg-label-secondary","rounded-top","text-capitalize"],["class","bx bx-error text-danger ms-3",3,"title",4,"ngIf"],[1,"p-3"],[1,"form-controls"],[4,"ngFor","ngForOf"],["class","text-small",4,"ngIf"],[1,"bx","bx-error","text-danger","ms-3",3,"title"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["class","w-px-200 small cursor-pointer",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"w-px-200","small","cursor-pointer",3,"click","title"],[1,"btn","btn-sm","p-0","btn-text-primary",3,"click"],[1,"bx","bx-plus","me-2"],[1,"text-small"],[1,"mb-3","p-1","border-top","border-bottom","text-center","bg-label-secondary"],["class","text-right mr-3 mb-3 ml-3",4,"ngFor","ngForOf"],[1,"text-right","mr-3","mb-3","ml-3"],["data-bs-toggle","modal",1,"d-none",3,"id"],["data-bs-backdrop","static","tabindex","-1","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-body","content"],[3,"html","inputStr","vars","onClose","onSave",4,"ngIf"],[3,"onClose","onSave","html","inputStr","vars"]],template:function(i,s){1&i&&e.DNE(0,hy,9,4,"div",0)(1,gy,1,3,"button",1)(2,yy,5,3,"div",2),2&i&&(e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode),e.R7$(),e.Y8G("ngIf",""==s.mode))},dependencies:[L.MD,L.Sq,L.bT,N.YN,Ur.V,on,St]})),r})();function by(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function xy(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},S.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Cy(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},S.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function ky(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Sy(){return S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},S.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const gc=({children:t,className:r,...n})=>S.createElement("button",{type:"button",className:jt(["react-flow__controls-button",r]),...n},t);gc.displayName="ControlButton";const wy=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),d_=({style:t,showZoom:r=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:l,onZoomOut:d,onFitView:m,onInteractiveChange:_,className:g,children:v,position:b="bottom-left"})=>{const C=Ge(),[x,I]=(0,S.useState)(!1),{isInteractive:T,minZoomReached:R,maxZoomReached:E}=Ye(wy,wt),{zoomIn:$,zoomOut:V,fitView:M}=mf();return(0,S.useEffect)(()=>{I(!0)},[]),x?S.createElement(Ed,{className:jt(["react-flow__controls",g]),position:b,style:t,"data-testid":"rf__controls"},r&&S.createElement(S.Fragment,null,S.createElement(gc,{onClick:()=>{$(),l?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},S.createElement(by,null)),S.createElement(gc,{onClick:()=>{V(),d?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:R},S.createElement(xy,null))),n&&S.createElement(gc,{className:"react-flow__controls-fitview",onClick:()=>{M(s),m?.()},title:"fit view","aria-label":"fit view"},S.createElement(Cy,null)),i&&S.createElement(gc,{className:"react-flow__controls-interactive",onClick:()=>{C.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),_?.(!T)},title:"toggle interactivity","aria-label":"toggle interactivity"},S.createElement(T?Sy:ky,null)),v):null};d_.displayName="Controls";var Ny=(0,S.memo)(d_),Lo=function(t){return t.Lines="lines",t.Dots="dots",t.Cross="cross",t}(Lo||{});function Ey({color:t,dimensions:r,lineWidth:n}){return S.createElement("path",{stroke:t,strokeWidth:n,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function Iy({color:t,radius:r}){return S.createElement("circle",{cx:r,cy:r,r,fill:t})}const Ty={[Lo.Dots]:"#91919a",[Lo.Lines]:"#eee",[Lo.Cross]:"#e2e2e2"},Ay={[Lo.Dots]:1,[Lo.Lines]:1,[Lo.Cross]:6},Ry=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function p_({id:t,variant:r=Lo.Dots,gap:n=20,size:i,lineWidth:s=1,offset:l=2,color:d,style:m,className:_}){const g=(0,S.useRef)(null),{transform:v,patternId:b}=Ye(Ry,wt),C=d||Ty[r],x=i||Ay[r],I=r===Lo.Dots,T=r===Lo.Cross,R=Array.isArray(n)?n:[n,n],E=[R[0]*v[2]||1,R[1]*v[2]||1],$=x*v[2],V=T?[$,$]:E,M=I?[$/l,$/l]:[V[0]/l,V[1]/l];return S.createElement("svg",{className:jt(["react-flow__background",_]),style:{...m,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:g,"data-testid":"rf__background"},S.createElement("pattern",{id:b+t,x:v[0]%E[0],y:v[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},I?S.createElement(Iy,{color:C,radius:$/l}):S.createElement(Ey,{dimensions:V,color:C,lineWidth:s})),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${b+t})`}))}p_.displayName="Background";var Fy=(0,S.memo)(p_);const jy=({props:t})=>(t.minZoom=.25,t.maxZoom=1,t.autoPanOnConnect=!0,t.autoPanOnNodeDrag=!0,t.connectionRadius=20,t.elementsSelectable=!0,t.elevateNodesOnSelect=!0,t.fitView=!1,t.connectOnClick=!0,t.edgesFocusable=!0,t.nodesFocusable=!0,t.nodesDraggable=!0,t.nodesConnectable=!0,t.snapToGrid=!1,t.snapGrid=[15,15],t.nodeOrigin=[0,0],t.noPanClassName="nopan",t.connectionMode=c.Strict,S.createElement(Mm,{...t},S.createElement(Ny,null),S.createElement(Fy,{color:"dark"==t.theme?"#383948":"#dadadf",gap:20,size:2}))),My=({props:t})=>S.createElement(Cf,null,S.createElement(jy,{props:t}));let f_=(()=>{var t;class r extends Hm{constructor(...i){super(...i),(0,f.A)(this,"ngReactComponent",My),(0,f.A)(this,"nodes",void 0),(0,f.A)(this,"edges",void 0),(0,f.A)(this,"defaultEdgeOptions",void 0),(0,f.A)(this,"onNodeClick",new e.bkB),(0,f.A)(this,"onNodeDoubleClick",new e.bkB),(0,f.A)(this,"onNodeMouseEnter",new e.bkB),(0,f.A)(this,"onNodeMouseMove",new e.bkB),(0,f.A)(this,"onNodeMouseLeave",new e.bkB),(0,f.A)(this,"onNodeContextMenu",new e.bkB),(0,f.A)(this,"onNodeDragStart",new e.bkB),(0,f.A)(this,"onNodeDrag",new e.bkB),(0,f.A)(this,"onNodeDragStop",new e.bkB),(0,f.A)(this,"onEdgeClick",new e.bkB),(0,f.A)(this,"onEdgeUpdate",new e.bkB),(0,f.A)(this,"onEdgeContextMenu",new e.bkB),(0,f.A)(this,"onEdgeMouseEnter",new e.bkB),(0,f.A)(this,"onEdgeMouseMove",new e.bkB),(0,f.A)(this,"onEdgeMouseLeave",new e.bkB),(0,f.A)(this,"onEdgeDoubleClick",new e.bkB),(0,f.A)(this,"onEdgeUpdateStart",new e.bkB),(0,f.A)(this,"onEdgeUpdateEnd",new e.bkB),(0,f.A)(this,"onNodesChange",new e.bkB),(0,f.A)(this,"onEdgesChange",new e.bkB),(0,f.A)(this,"onNodesDelete",new e.bkB),(0,f.A)(this,"onEdgesDelete",new e.bkB),(0,f.A)(this,"onSelectionDragStart",new e.bkB),(0,f.A)(this,"onSelectionDrag",new e.bkB),(0,f.A)(this,"onSelectionDragStop",new e.bkB),(0,f.A)(this,"onSelectionStart",new e.bkB),(0,f.A)(this,"onSelectionEnd",new e.bkB),(0,f.A)(this,"onSelectionContextMenu",new e.bkB),(0,f.A)(this,"onConnect",new e.bkB),(0,f.A)(this,"onConnectStart",new e.bkB),(0,f.A)(this,"onConnectEnd",new e.bkB),(0,f.A)(this,"onClickConnectStart",new e.bkB),(0,f.A)(this,"onClickConnectEnd",new e.bkB),(0,f.A)(this,"onInit",new e.bkB),(0,f.A)(this,"onMove",new e.bkB),(0,f.A)(this,"onMoveStart",new e.bkB),(0,f.A)(this,"onMoveEnd",new e.bkB),(0,f.A)(this,"onSelectionChange",new e.bkB),(0,f.A)(this,"onPaneScroll",new e.bkB),(0,f.A)(this,"onPaneClick",new e.bkB),(0,f.A)(this,"onPaneContextMenu",new e.bkB),(0,f.A)(this,"onPaneMouseEnter",new e.bkB),(0,f.A)(this,"onPaneMouseMove",new e.bkB),(0,f.A)(this,"onPaneMouseLeave",new e.bkB),(0,f.A)(this,"onError",new e.bkB),(0,f.A)(this,"id",void 0),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"edgeTypes",void 0),(0,f.A)(this,"connectionLineType",void 0),(0,f.A)(this,"connectionLineStyle",void 0),(0,f.A)(this,"connectionLineComponent",void 0),(0,f.A)(this,"connectionLineContainerStyle",void 0),(0,f.A)(this,"connectionMode",void 0),(0,f.A)(this,"deleteKeyCode",void 0),(0,f.A)(this,"selectionKeyCode",void 0),(0,f.A)(this,"selectionOnDrag",void 0),(0,f.A)(this,"selectionMode",void 0),(0,f.A)(this,"panActivationKeyCode",void 0),(0,f.A)(this,"multiSelectionKeyCode",void 0),(0,f.A)(this,"zoomActivationKeyCode",void 0),(0,f.A)(this,"snapToGrid",void 0),(0,f.A)(this,"snapGrid",void 0),(0,f.A)(this,"onlyRenderVisibleElements",void 0),(0,f.A)(this,"nodesDraggable",void 0),(0,f.A)(this,"nodesConnectable",void 0),(0,f.A)(this,"nodesFocusable",void 0),(0,f.A)(this,"nodeOrigin",void 0),(0,f.A)(this,"edgesFocusable",void 0),(0,f.A)(this,"elementsSelectable",void 0),(0,f.A)(this,"selectNodesOnDrag",void 0),(0,f.A)(this,"panOnDrag",void 0),(0,f.A)(this,"minZoom",void 0),(0,f.A)(this,"maxZoom",void 0),(0,f.A)(this,"defaultViewport",void 0),(0,f.A)(this,"translateExtent",void 0),(0,f.A)(this,"preventScrolling",void 0),(0,f.A)(this,"nodeExtent",void 0),(0,f.A)(this,"defaultMarkerColor",void 0),(0,f.A)(this,"zoomOnScroll",void 0),(0,f.A)(this,"zoomOnPinch",void 0),(0,f.A)(this,"panOnScroll",void 0),(0,f.A)(this,"panOnScrollSpeed",void 0),(0,f.A)(this,"panOnScrollMode",void 0),(0,f.A)(this,"zoomOnDoubleClick",void 0),(0,f.A)(this,"edgeUpdaterRadius",void 0),(0,f.A)(this,"noDragClassName",void 0),(0,f.A)(this,"noWheelClassName",void 0),(0,f.A)(this,"noPanClassName",void 0),(0,f.A)(this,"fitView",void 0),(0,f.A)(this,"fitViewOptions",void 0),(0,f.A)(this,"connectOnClick",void 0),(0,f.A)(this,"attributionPosition",void 0),(0,f.A)(this,"proOptions",void 0),(0,f.A)(this,"elevateNodesOnSelect",void 0),(0,f.A)(this,"elevateEdgesOnSelect",void 0),(0,f.A)(this,"disableKeyboardA11y",void 0),(0,f.A)(this,"autoPanOnNodeDrag",void 0),(0,f.A)(this,"autoPanOnConnect",void 0),(0,f.A)(this,"connectionRadius",void 0)}}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ngx-reactflow"]],inputs:{nodes:"nodes",edges:"edges",defaultEdgeOptions:"defaultEdgeOptions",id:"id",nodeTypes:"nodeTypes",edgeTypes:"edgeTypes",connectionLineType:"connectionLineType",connectionLineStyle:"connectionLineStyle",connectionLineComponent:"connectionLineComponent",connectionLineContainerStyle:"connectionLineContainerStyle",connectionMode:"connectionMode",deleteKeyCode:"deleteKeyCode",selectionKeyCode:"selectionKeyCode",selectionOnDrag:"selectionOnDrag",selectionMode:"selectionMode",panActivationKeyCode:"panActivationKeyCode",multiSelectionKeyCode:"multiSelectionKeyCode",zoomActivationKeyCode:"zoomActivationKeyCode",snapToGrid:"snapToGrid",snapGrid:"snapGrid",onlyRenderVisibleElements:"onlyRenderVisibleElements",nodesDraggable:"nodesDraggable",nodesConnectable:"nodesConnectable",nodesFocusable:"nodesFocusable",nodeOrigin:"nodeOrigin",edgesFocusable:"edgesFocusable",elementsSelectable:"elementsSelectable",selectNodesOnDrag:"selectNodesOnDrag",panOnDrag:"panOnDrag",minZoom:"minZoom",maxZoom:"maxZoom",defaultViewport:"defaultViewport",translateExtent:"translateExtent",preventScrolling:"preventScrolling",nodeExtent:"nodeExtent",defaultMarkerColor:"defaultMarkerColor",zoomOnScroll:"zoomOnScroll",zoomOnPinch:"zoomOnPinch",panOnScroll:"panOnScroll",panOnScrollSpeed:"panOnScrollSpeed",panOnScrollMode:"panOnScrollMode",zoomOnDoubleClick:"zoomOnDoubleClick",edgeUpdaterRadius:"edgeUpdaterRadius",noDragClassName:"noDragClassName",noWheelClassName:"noWheelClassName",noPanClassName:"noPanClassName",fitView:"fitView",fitViewOptions:"fitViewOptions",connectOnClick:"connectOnClick",attributionPosition:"attributionPosition",proOptions:"proOptions",elevateNodesOnSelect:"elevateNodesOnSelect",elevateEdgesOnSelect:"elevateEdgesOnSelect",disableKeyboardA11y:"disableKeyboardA11y",autoPanOnNodeDrag:"autoPanOnNodeDrag",autoPanOnConnect:"autoPanOnConnect",connectionRadius:"connectionRadius"},outputs:{onNodeClick:"onNodeClick",onNodeDoubleClick:"onNodeDoubleClick",onNodeMouseEnter:"onNodeMouseEnter",onNodeMouseMove:"onNodeMouseMove",onNodeMouseLeave:"onNodeMouseLeave",onNodeContextMenu:"onNodeContextMenu",onNodeDragStart:"onNodeDragStart",onNodeDrag:"onNodeDrag",onNodeDragStop:"onNodeDragStop",onEdgeClick:"onEdgeClick",onEdgeUpdate:"onEdgeUpdate",onEdgeContextMenu:"onEdgeContextMenu",onEdgeMouseEnter:"onEdgeMouseEnter",onEdgeMouseMove:"onEdgeMouseMove",onEdgeMouseLeave:"onEdgeMouseLeave",onEdgeDoubleClick:"onEdgeDoubleClick",onEdgeUpdateStart:"onEdgeUpdateStart",onEdgeUpdateEnd:"onEdgeUpdateEnd",onNodesChange:"onNodesChange",onEdgesChange:"onEdgesChange",onNodesDelete:"onNodesDelete",onEdgesDelete:"onEdgesDelete",onSelectionDragStart:"onSelectionDragStart",onSelectionDrag:"onSelectionDrag",onSelectionDragStop:"onSelectionDragStop",onSelectionStart:"onSelectionStart",onSelectionEnd:"onSelectionEnd",onSelectionContextMenu:"onSelectionContextMenu",onConnect:"onConnect",onConnectStart:"onConnectStart",onConnectEnd:"onConnectEnd",onClickConnectStart:"onClickConnectStart",onClickConnectEnd:"onClickConnectEnd",onInit:"onInit",onMove:"onMove",onMoveStart:"onMoveStart",onMoveEnd:"onMoveEnd",onSelectionChange:"onSelectionChange",onPaneScroll:"onPaneScroll",onPaneClick:"onPaneClick",onPaneContextMenu:"onPaneContextMenu",onPaneMouseEnter:"onPaneMouseEnter",onPaneMouseMove:"onPaneMouseMove",onPaneMouseLeave:"onPaneMouseLeave",onError:"onError"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(i,s){},styles:[".react-flow{direction:ltr}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1;cursor:grab}.react-flow__pane.selection{cursor:pointer}.react-flow__pane.dragging{cursor:grabbing}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow .react-flow__edges{pointer-events:none;overflow:visible}.react-flow__edge-path,.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1;fill:none}.react-flow__edge{pointer-events:visibleStroke;cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge:focus .react-flow__edge-path,.react-flow__edge:focus-visible .react-flow__edge-path{stroke:#555}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-textbg{fill:#fff}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__connectionline{z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:grab}.react-flow__node.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background:#1a192b;border:1px solid white;border-radius:100%}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:-4px;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{top:50%;left:-4px;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:#ffffff80;padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:3px;width:150px;font-size:12px;color:#222;text-align:center;border-width:1px;border-style:solid;border-color:#1a192b;background-color:#fff}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:0 1px 4px 1px #00000014}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background-color:#f0f0f040}.react-flow__nodesselection-rect,.react-flow__selection{background:#0059dc14;border:1px dotted rgba(0,89,220,.8)}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls{box-shadow:0 0 2px 1px #00000014}.react-flow__controls-button{border:none;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;display:flex;justify-content:center;align-items:center;width:16px;height:16px;cursor:pointer;-webkit-user-select:none;user-select:none;padding:5px}.react-flow__controls-button:hover{background:#f4f4f4}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__minimap{background-color:#fff}.react-flow__minimap svg{display:block}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:#3367d9;transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:#3367d9;border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}\n","ngx-reactflow .react-flow__handle{height:12px;width:12px;border-width:2px}ngx-reactflow .selected .card{border:2px solid #696cff!important}\n"],encapsulation:2})),r})();const $y=()=>["Backspace","Delete"];function Gy(t,r){if(1&t){const n=e.RV6();e.j41(0,"a",38),e.bIt("click",function(){e.eBV(n);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.addNode(s))}),e.j41(1,"div",39)(2,"span",40),e.EFF(3),e.k0s()(),e.j41(4,"div",41)(5,"h6",42),e.EFF(6),e.k0s(),e.j41(7,"small",43),e.EFF(8),e.k0s()()()}if(2&t){let n;const i=e.XpG().$implicit;e.R7$(3),e.JRh(i.type[0]),e.R7$(3),e.JRh(null!==(n=i.displayName)&&void 0!==n?n:i.type),e.R7$(2),e.JRh(i.desc)}}function Dy(t,r){if(1&t&&(e.j41(0,"h6",44),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.JRh(n)}}function Vy(t,r){if(1&t&&(e.j41(0,"li"),e.DNE(1,Gy,9,3,"a",36)(2,Dy,2,1,"h6",37),e.k0s()),2&t){const n=r.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!i.isString(n)),e.R7$(),e.Y8G("ngIf",i.isString(n))}}function Oy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",19)(2,"ngx-reactflow",20),e.bIt("onConnect",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onConnect(s))})("onEdgesDelete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesDelete(s))})("onNodesDelete",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesDelete(s))})("onEdgesChange",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onEdgesChange(s))})("onNodesChange",function(s){e.eBV(n);const l=e.XpG();return e.Njj(l.onNodesChange(s))}),e.k0s()(),e.j41(3,"div",21)(4,"div",22)(5,"button",23),e.nrm(6,"span",24),e.k0s(),e.j41(7,"mat-menu",null,0)(9,"div",25)(10,"ul",26),e.DNE(11,Vy,3,2,"li",27),e.k0s()()()(),e.j41(12,"button",28),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.save())}),e.nrm(13,"span"),e.k0s(),e.j41(14,"span",29),e.EFF(15),e.k0s()(),e.j41(16,"div",30)(17,"button",31),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.close())}),e.nrm(18,"span",32),e.k0s()(),e.j41(19,"div",33)(20,"button",34),e.bIt("click",function(){e.eBV(n);const s=e.XpG();return e.Njj(s.run())}),e.nrm(21,"span",35),e.k0s()()()}if(2&t){const n=e.sdS(8),i=e.XpG();e.R7$(2),e.Y8G("nodes",i.nodes)("edges",i.edges)("nodeTypes",i.nodeTypes)("deleteKeyCode",e.lJ4(13,$y)),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(6),e.Y8G("ngForOf",i.avaiableNodes),e.R7$(),e.ZvI("btn btn-icon btn-",i.saved?"success":"secondary"," mt-3 ml-3"),e.R7$(),e.ZvI("tf-icons bx bx-",i.saved?"check":"save"," bx-22px"),e.R7$(2),e.JRh(null==i.curApp?null:i.curApp.name)}}let zy=(()=>{var t;class r{isString(i){return"string"==typeof i}constructor(i,s,l,d,m){(0,f.A)(this,"route",void 0),(0,f.A)(this,"appRef",void 0),(0,f.A)(this,"injector",void 0),(0,f.A)(this,"ngZone",void 0),(0,f.A)(this,"appService",void 0),(0,f.A)(this,"reactFlow",void 0),(0,f.A)(this,"nodes",[]),(0,f.A)(this,"edges",[]),(0,f.A)(this,"avaiableNodes",["Input",(new Jm).getNodeSpec(),"Data Processor",(new qm).getNodeSpec(),(new Zm).getNodeSpec(),(new n_).getNodeSpec(),(new Um).getNodeSpec(),(new c_).getNodeSpec(),(new Wm).getNodeSpec(),(new r_).getNodeSpec(),(new Km).getNodeSpec(),(new i_).getNodeSpec(),(new a_).getNodeSpec(),"Storage",(new o_).getNodeSpec(),(new s_).getNodeSpec(),"Data Query",(new e_).getNodeSpec(),"Output",(new l_).getNodeSpec(),(new u_).getNodeSpec(),(new Qm).getNodeSpec()]),(0,f.A)(this,"data",[]),(0,f.A)(this,"nodeTypes",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"saved",!1),(0,f.A)(this,"curApp",void 0),(0,f.A)(this,"showMenu",!1),(0,f.A)(this,"newCollectionName",""),(0,f.A)(this,"newCollectionSpec",""),this.route=i,this.appRef=s,this.injector=l,this.ngZone=d,this.appService=m,this.nodeTypes={form:(new Jm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),embedding:(new Zm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),database:(new o_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),search:(new e_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),agent:(new qm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),htmlViewer:(new l_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),router:(new Qm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),spliter:(new n_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),vectorDatabase:(new s_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),apiInvoker:(new Um).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToAudio:(new Wm).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),transcription:(new r_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),textToImage:(new Km).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),text:(new i_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),videoRender:(new a_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),zip:(new u_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)}),webAccess:(new c_).build(this.appRef,this.injector,this.ngZone,_=>{this.onNodeConfigChange(_)})}}ngOnInit(){var i=this;document.addEventListener("keydown",function(){var s=(0,xe.A)(function*(l){let d=i.nodes.filter(_=>_.selected)[0],m=window.getSelection()?.toString();if(d&&!m&&l.ctrlKey&&"c"===l.key)try{yield navigator.clipboard.writeText(JSON.stringify(d.data))}catch(_){console.error("Failed to copy text: ",_)}});return function(l){return s.apply(this,arguments)}}()),document.addEventListener("paste",function(){var s=(0,xe.A)(function*(l){try{const d=yield navigator.clipboard.readText();if(!d.startsWith('{"id":"n'))return;l.preventDefault();let m=JSON.parse(d);m.x+=20,m.y+=20,m.inputs=[],m.links=[],i.addNode(m)}catch(d){console.error("Failed to read from clipboard: ",d)}});return function(l){return s.apply(this,arguments)}}()),this.route.paramMap.subscribe(s=>{this.id=+(s.get("id")??"0"),this.load()})}save(i){this.curApp.config=JSON.stringify(this.data),this.appService.save(this.curApp).subscribe(s=>{this.curApp.id=+s.data,this.saved=!0,i&&i(+s.data),setTimeout(()=>{this.saved=!1},2e3)})}onNodesChange(i){this.ngZone.run(()=>{this.nodes=hf(i[0],this.nodes);let s=i[0][0].id,l=this.nodes.find(m=>m.id==s),d=this.data.find(m=>m.id==s);d&&(d.x=l.position.x,d.y=l.position.y)})}onEdgesChange(i){this.ngZone.run(()=>{this.edges=pm(i[0],this.edges)})}onNodesDelete(i){let s=i[0][0].id;this.data=this.data.filter(d=>d.id!=s);for(let d of this.data){let m=d.links.indexOf(s);m>=0&&d.links.splice(m,1)}let l=document.getElementById("settingModal-"+s);l&&l.parentNode?.removeChild(l)}onEdgesDelete(i){let s=i[0][0].source,l=i[0][0].target,d=this.data.filter(_=>_.id==s)[0],m=d.links.indexOf(l);m>=0&&d.links.splice(m,1),this.updateInput(this.data.filter(_=>_.id==l)[0]),this.reRender()}onConnect(i){let s=this.data.filter(l=>l.id==i[0].source)[0];s.links.push(i[0].target),this.updateInput(s),this.ngZone.run(()=>{let l=Vf(i[0],this.edges);for(let d of l)d.animated=!0,d.type="bezier",d.style={strokeWidth:2,stroke:"#009688"};this.edges=l,this.reRender()})}distinctByName(i){const s=new Set;return i.filter(l=>!s.has(l.name)&&(s.add(l.name),!0))}updateInput(i){i.inputs=[];let s=this.data.filter(d=>d.links.includes(i.id));for(let d of s)i.inputs.push(...d.inputs),i.inputs.push(...d.outputs);i.inputs=this.distinctByName(i.inputs);let l=this.data.filter(d=>i.links.includes(d.id));if(l&&0!=l.length)for(let d of l)this.updateInput(d)}reRender(){let i=[...this.nodes];this.nodes=i}onNodeConfigChange(i){i&&(this.updateInput(i),this.reRender())}addNode(i){let s=0==this.data.length?1:Math.max(...this.data.map(_=>+_.id.substring(1)))+1,l=JSON.parse(JSON.stringify(i));l.id=`n${s}`,this.data.push(l),this.showMenu=!1;let d=this.nodes.filter(_=>_.selected)[0];d&&(d.selected=!1,l.x=d.position.x+20,l.y=d.position.y+20);let m=[...this.nodes];m.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,selected:!0,position:{x:l.x??150,y:l.y??150}}),this.nodes=m}load(){0!=this.id&&this.appService.load({id:this.id}).subscribe(i=>{this.curApp=i,this.data=JSON.parse(i.config),this.renderGraph()})}newApp(){this.renderGraph()}close(){window.location.href="/vi/admin/ai/dashboard"}run(i){i&&(this.curApp=i),this.save(s=>{window.location.href="/vi/admin/ai/app/"+s})}renderGraph(){const i=[],s=[];for(let l of this.data){s.push({id:l.id,width:l.w??64,height:l.h??64,type:l.type,data:l,position:{x:l.x??0,y:l.y??0}});for(let d of l.links)i.push({source:l.id,target:d,id:l.id+"_"+d,type:"bezier",animated:!0,style:{strokeWidth:2,stroke:"#009688"}})}this.edges=i,this.nodes=s}toggleMenu(){this.showMenu=!this.showMenu}setupNewCollection(){let i=this.nodes.filter(s=>s.selected)[0];if(i){let s={};for(let l of i.data.inputs){let d=l.name.split("-")[0];s[l.name.substring(d.length+1)]="json"==l.type?l.demo:l.type}this.newCollectionSpec=JSON.stringify(s,null,4)}}closeNewCollection(){this.newCollectionName="",this.newCollectionSpec=""}addCollection(){this.appService.addCollection({name:this.newCollectionName,spec:this.newCollectionSpec}).subscribe(i=>{})}addVCollection(){this.appService.addVCollection({name:this.newCollectionName}).subscribe(i=>{})}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(mt.nX),e.rXU(e.o8S),e.rXU(e.zZn),e.rXU(e.SKi),e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow"]],viewQuery:function(i,s){if(1&i&&e.GBs(f_,5),2&i){let l;e.mGM(l=e.lsd())&&(s.reactFlow=l.first)}},standalone:!0,features:[e.aNF],decls:39,vars:6,consts:[["menu",""],[4,"ngIf"],["id","btnShowAddCollectionModal","data-bs-toggle","modal",1,"d-none",3,"click"],["data-bs-backdrop","static","id","AddCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","content"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","Folder Name",1,"form-control",3,"ngModelChange","ngModel"],[3,"onChange","data"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary","mr-3",3,"click"],["id","btnShowAddVCollectionModal","data-bs-toggle","modal",1,"d-none"],["data-bs-backdrop","static","id","AddVCollectionModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","Collection Name",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","mr-3"],[2,"width","100%","height","100vh","position","absolute"],[3,"onConnect","onEdgesDelete","onNodesDelete","onEdgesChange","onNodesChange","nodes","edges","nodeTypes","deleteKeyCode"],[2,"position","absolute","z-index","999"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-icon","btn-primary","mt-3","ml-3","dropdown-toggle","hide-arrow",3,"matMenuTriggerFor"],[1,"tf-icons","bx","bx-plus","bx-22px"],[1,"dropdown-menu","show","w-72","mt-1"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"ml-3"],[2,"position","absolute","z-index","999","right","10px","top","15px"],["type","button",1,"btn","btn-label-secondary","p-2",3,"click"],[1,"tf-icons","bx","bx-x","bx-22px"],[2,"position","absolute","z-index","999","bottom","40px","right","40px"],["type","button",1,"btn","btn-icon","btn-success",3,"click"],[1,"tf-icons","bx","bx-play","bx-22px"],["href","javascript:void(0);","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-header text-uppercase",4,"ngIf"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"avatar","mr-3"],[1,"avatar-initial","rounded-circle","bg-label-success"],[1,"list-content"],[1,"mb-0","text-capitalize"],[1,"text-muted"],[1,"dropdown-header","text-uppercase"]],template:function(i,s){1&i&&(e.DNE(0,Oy,22,14,"div",1),e.j41(1,"button",2),e.bIt("click",function(){return s.setupNewCollection()}),e.k0s(),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),e.EFF(7," Your Folders "),e.k0s()(),e.j41(8,"div",8)(9,"div",9)(10,"label",10),e.EFF(11,"Folder Name"),e.k0s(),e.j41(12,"input",11),e.mxI("ngModelChange",function(d){return e.DH7(s.newCollectionName,d)||(s.newCollectionName=d),d}),e.k0s()(),e.j41(13,"div",9)(14,"label",10),e.EFF(15,"Data Specification"),e.k0s(),e.j41(16,"app-json-editor",12),e.bIt("onChange",function(d){return s.newCollectionSpec=d}),e.k0s()(),e.j41(17,"div")(18,"button",13),e.bIt("click",function(){return s.closeNewCollection()}),e.EFF(19,"Close"),e.k0s(),e.j41(20,"button",14),e.bIt("click",function(){return s.addCollection()}),e.EFF(21,"Create Folder"),e.k0s()()()()()(),e.nrm(22,"button",15),e.j41(23,"div",16)(24,"div",4)(25,"div",5)(26,"div",6)(27,"h5",7),e.EFF(28," Manage Vector Collections "),e.k0s()(),e.j41(29,"div",8)(30,"div",9)(31,"label",10),e.EFF(32,"Collection Name"),e.k0s(),e.j41(33,"input",17),e.mxI("ngModelChange",function(d){return e.DH7(s.newCollectionName,d)||(s.newCollectionName=d),d}),e.k0s()(),e.j41(34,"div")(35,"button",18),e.EFF(36,"Close"),e.k0s(),e.j41(37,"button",14),e.bIt("click",function(){return s.addVCollection()}),e.EFF(38,"Create Collection"),e.k0s()()()()()()),2&i&&(e.Y8G("ngIf",null==s.curApp?null:s.curApp.name),e.R7$(),e.BMQ("data-bs-target","#AddCollectionModal"),e.R7$(11),e.R50("ngModel",s.newCollectionName),e.R7$(4),e.Y8G("data",s.newCollectionSpec),e.R7$(6),e.BMQ("data-bs-target","#AddVCollectionModal"),e.R7$(11),e.R50("ngModel",s.newCollectionName))},dependencies:[f_,L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,Kh,J.Cn,J.kk,J.Cp],styles:[".avatar[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%]{background:#3dbe3d;padding:10px;color:#fff;border-radius:50%;margin-right:10px;text-transform:uppercase;display:inline-block;width:39px;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}"]})),r})(),By=(()=>{var t;class r extends Ie.H{}return t=r,(0,f.A)(r,"\u0275fac",(()=>{let n;return function(s){return(n||(n=e.xGo(t)))(s||t)}})()),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["ai-master-page"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","ai-layout"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[mt.n3],encapsulation:2})),r})();function Ly(t,r){1&t&&(e.j41(0,"div",1),e.EFF(1,"Loading..."),e.k0s())}function Py(t,r){1&t&&(e.j41(0,"div",8),e.EFF(1," No data "),e.k0s())}function Xy(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"textarea",11),e.mxI("ngModelChange",function(s){const l=e.eBV(n).$implicit;return e.DH7(l.content,s)||(l.content=s),e.Njj(s)}),e.k0s(),e.j41(3,"p",12)(4,"small",13),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.delData(s))}),e.EFF(5,"Delete"),e.k0s(),e.j41(6,"small",14),e.bIt("click",function(){const s=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.saveData(s))}),e.EFF(7,"Save"),e.k0s()()()()}if(2&t){const n=r.$implicit;e.R7$(2),e.R50("ngModel",n.content),e.R7$(2),e.Mz_("id","btn-del-",n.id,""),e.R7$(2),e.Mz_("id","btn-save-",n.id,"")}}let Yy=(()=>{var t;class r{constructor(i,s){(0,f.A)(this,"route",void 0),(0,f.A)(this,"app",void 0),(0,f.A)(this,"isLoading",!1),(0,f.A)(this,"curCol",void 0),(0,f.A)(this,"searchStr",""),(0,f.A)(this,"lstContent",[]),this.route=i,this.app=s}ngOnInit(){this.route.paramMap.subscribe(i=>{let s=i.get("id")??"";s.startsWith("v-")?this.app.listVCollection().subscribe(l=>{this.curCol=l.find(d=>d.id==+s.substring(2)),this.loadData()}):this.app.listCollection().subscribe(l=>{this.curCol=l.find(d=>d.id==+s),this.loadData()})})}deleteDb(){this.curCol&&confirm("Are you sure to delete this Storage?")&&this.app.delColection(this.curCol).subscribe(i=>{document.location.href="/home"})}loadData(){this.search()}search(){this.lstContent=[],this.isLoading=!0,"data"==this.curCol?.type?this.app.listData({id:this.curCol.id,name:this.searchStr}).subscribe(i=>{this.lstContent=i,this.isLoading=!1,setTimeout(()=>{this.autoResizeTextareas()},1e3)}):this.app.searchVector({collection:this.curCol?.name,content:this.searchStr,id:0,vector:[]}).subscribe(i=>{this.lstContent=i.map(s=>({content:s})),this.isLoading=!1})}delData(i){document.getElementById("btn-del-"+i.id).innerHTML="Deleting...","data"==this.curCol?.type&&this.app.delData(i).subscribe(s=>{this.lstContent=this.lstContent.filter(l=>l.id!=i.id)})}saveData(i){document.getElementById("btn-save-"+i.id).innerHTML="Saving...","data"==this.curCol?.type&&this.app.saveData(i).subscribe(s=>{document.getElementById("btn-save-"+i.id).innerHTML="Saved OK",setTimeout(()=>{document.getElementById("btn-save-"+i.id).innerHTML="Save"},2e3)})}close(){window.location.href="/home"}autoResizeTextareas(){document.querySelectorAll("textarea").forEach(s=>{const l=()=>{s.style.height="auto",s.style.height=s.scrollHeight+"px"};s.addEventListener("input",l),l()})}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(mt.nX),e.rXU(je))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-database"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"box","p-3"],[1,"mt-3"],["type","text","placeholder","Search...",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["class","mt-3",4,"ngIf"],["class","p-3",4,"ngIf"],["class","card mt-3",4,"ngFor","ngForOf"],[1,"mt-3","text-end"],["type","button",1,"btn","btn-text-danger",3,"click"],[1,"p-3"],[1,"card","mt-3"],[1,"card-body"],[1,"form-control",2,"min-height","150px",3,"ngModelChange","ngModel"],[1,"card-text"],[1,"text-danger","cursor-pointer","mr-5",3,"click","id"],[1,"text-primary","cursor-pointer","mr-5",3,"click","id"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout")(1,"div",0)(2,"div",1)(3,"div")(4,"input",2),e.mxI("ngModelChange",function(d){return e.DH7(s.searchStr,d)||(s.searchStr=d),d}),e.bIt("keydown.enter",function(){return s.search()}),e.k0s(),e.DNE(5,Ly,2,0,"div",3)(6,Py,2,0,"div",4)(7,Xy,8,5,"div",5),e.k0s()(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return s.deleteDb()}),e.EFF(10),e.k0s()()()()),2&i&&(e.R7$(4),e.R50("ngModel",s.searchStr),e.R7$(),e.Y8G("ngIf",s.isLoading),e.R7$(),e.Y8G("ngIf",0==s.lstContent.length),e.R7$(),e.Y8G("ngForOf",s.lstContent),e.R7$(3),e.SpI(" Delete ",null==s.curCol?null:s.curCol.name," Storage "))},dependencies:[L.MD,L.Sq,L.bT,N.YN,N.me,N.BC,N.vS,Ve.b,Wo]})),r})();function Hy(t,r){if(1&t&&e.nrm(0,"app-app-view",2),2&t){const n=e.XpG();e.Y8G("appId",n.id)("queryParamsObject",n.queryParamsObject)}}let m_=(()=>{var t;class r{constructor(i){(0,f.A)(this,"route",void 0),(0,f.A)(this,"id",0),(0,f.A)(this,"queryParamsObject",{}),this.route=i}ngOnInit(){this.route.paramMap.subscribe(i=>{this.id=+(i.get("id")??"0"),this.route.queryParams.subscribe(s=>{this.queryParamsObject={...s},console.log("Mapped Query Params:",this.queryParamsObject)})})}}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)(e.rXU(mt.nX))}),(0,f.A)(r,"\u0275cmp",e.VBU({type:t,selectors:[["app-flow-runner"]],standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"box","p-0","mt-5","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","w-md-50","mx-auto"],[3,"appId","queryParamsObject",4,"ngIf"],[3,"appId","queryParamsObject"]],template:function(i,s){1&i&&(e.j41(0,"teacher-layout")(1,"div",0),e.DNE(2,Hy,1,2,"app-app-view",1),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("ngIf",s.id))},dependencies:[L.MD,L.bT,N.YN,Ve.b,Wo,Fe.Q,ks]})),r})();const Uy=[{path:"",component:By,children:[{path:"",component:Ha},{path:"demo",component:ir,canActivate:[_t]},{path:"dashboard",component:Ha},{path:"edu-store-teacher",component:Ss},{path:"app/:id",component:m_,canActivate:[_t]},{path:"db/:id",component:Yy,canActivate:[_t]},{path:"flow/:id",component:zy,canActivate:[_t]}]}];let Wy=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275mod",e.$C({type:t})),(0,f.A)(r,"\u0275inj",e.G2t({imports:[mt.iI.forChild(Uy),mt.iI,Be.XE]})),r})(),Zy=(()=>{var t;class r{}return t=r,(0,f.A)(r,"\u0275fac",function(i){return new(i||t)}),(0,f.A)(r,"\u0275mod",e.$C({type:t})),(0,f.A)(r,"\u0275inj",e.G2t({imports:[mt.iI,L.MD,N.YN,nt.s,N.X1,Wy,Fe.Q,Ve.b,sn.L,it.Id,kt.flO.pick(kt.Ptg),zt.An,m_,ks]})),r})()},7578:(Ut,oe,ue)=>{var f=ue(1395),L=ue(1605);function N(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mt=new Set,kt={};function zt(o,a){it(o,a),it(o+"Capture",a)}function it(o,a){for(kt[o]=a,o=0;o<a.length;o++)mt.add(a[o])}var nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sn=Object.prototype.hasOwnProperty,Ve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fe={},Be={};function xe(o,a,c,u,p,h,y){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=u,this.attributeNamespace=p,this.mustUseProperty=c,this.propertyName=o,this.type=a,this.sanitizeURL=h,this.removeEmptyString=y}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Ie[o]=new xe(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];Ie[a]=new xe(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){Ie[o]=new xe(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Ie[o]=new xe(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Ie[o]=new xe(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){Ie[o]=new xe(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){Ie[o]=new xe(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){Ie[o]=new xe(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){Ie[o]=new xe(o,5,!1,o.toLowerCase(),null,!1,!1)});var Bt=/[\-:]([a-z])/g;function vt(o){return o[1].toUpperCase()}function At(o,a,c,u){var p=Ie.hasOwnProperty(a)?Ie[a]:null;(null!==p?0!==p.type:u||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(function _t(o,a,c,u){if(null===a||typeof a>"u"||function We(o,a,c,u){if(null!==c&&0===c.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!u&&(null!==c?!c.acceptsBooleans:"data-"!==(o=o.toLowerCase().slice(0,5))&&"aria-"!==o);default:return!1}}(o,a,c,u))return!0;if(u)return!1;if(null!==c)switch(c.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}(a,c,p,u)&&(c=null),u||null===p?function e(o){return!!sn.call(Be,o)||!sn.call(Fe,o)&&(Ve.test(o)?Be[o]=!0:(Fe[o]=!0,!1))}(a)&&(null===c?o.removeAttribute(a):o.setAttribute(a,""+c)):p.mustUseProperty?o[p.propertyName]=null===c?3!==p.type&&"":c:(a=p.attributeName,u=p.attributeNamespace,null===c?o.removeAttribute(a):(c=3===(p=p.type)||4===p&&!0===c?"":""+c,u?o.setAttributeNS(u,a,c):o.setAttribute(a,c))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(Bt,vt);Ie[a]=new xe(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(Bt,vt);Ie[a]=new xe(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(Bt,vt);Ie[a]=new xe(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){Ie[o]=new xe(o,1,!1,o.toLowerCase(),null,!1,!1)}),Ie.xlinkHref=new xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){Ie[o]=new xe(o,1,!1,o.toLowerCase(),null,!0,!0)});var rt=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rt=Symbol.for("react.element"),je=Symbol.for("react.portal"),dt=Symbol.for("react.fragment"),Dn=Symbol.for("react.strict_mode"),gn=Symbol.for("react.profiler"),Vn=Symbol.for("react.provider"),vn=Symbol.for("react.context"),yn=Symbol.for("react.forward_ref"),Wt=Symbol.for("react.suspense"),an=Symbol.for("react.suspense_list"),eo=Symbol.for("react.memo"),ne=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Se=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Ee=Symbol.iterator;function Oe(o){return null===o||"object"!=typeof o?null:"function"==typeof(o=Ee&&o[Ee]||o["@@iterator"])?o:null}var J,j=Object.assign;function we(o){if(void 0===J)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);J=a&&a[1]||""}return"\n"+J+o}var Ne=!1;function Ae(o,a){if(!o||Ne)return"";Ne=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(O){var u=O}Reflect.construct(o,[],a)}else{try{a.call()}catch(O){u=O}o.call(a.prototype)}else{try{throw Error()}catch(O){u=O}o()}}catch(O){if(O&&u&&"string"==typeof O.stack){for(var p=O.stack.split("\n"),h=u.stack.split("\n"),y=p.length-1,k=h.length-1;1<=y&&0<=k&&p[y]!==h[k];)k--;for(;1<=y&&0<=k;y--,k--)if(p[y]!==h[k]){if(1!==y||1!==k)do{if(y--,0>--k||p[y]!==h[k]){var A="\n"+p[y].replace(" at new "," at ");return o.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",o.displayName)),A}}while(1<=y&&0<=k);break}}}finally{Ne=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?we(o):""}function He(o){switch(o.tag){case 5:return we(o.type);case 16:return we("Lazy");case 13:return we("Suspense");case 19:return we("SuspenseList");case 0:case 2:case 15:return Ae(o.type,!1);case 11:return Ae(o.type.render,!1);case 1:return Ae(o.type,!0);default:return""}}function st(o){if(null==o)return null;if("function"==typeof o)return o.displayName||o.name||null;if("string"==typeof o)return o;switch(o){case dt:return"Fragment";case je:return"Portal";case gn:return"Profiler";case Dn:return"StrictMode";case Wt:return"Suspense";case an:return"SuspenseList"}if("object"==typeof o)switch(o.$$typeof){case vn:return(o.displayName||"Context")+".Consumer";case Vn:return(o._context.displayName||"Context")+".Provider";case yn:var a=o.render;return(o=o.displayName)||(o=""!==(o=a.displayName||a.name||"")?"ForwardRef("+o+")":"ForwardRef"),o;case eo:return null!==(a=o.displayName||null)?a:st(o.type)||"Memo";case ne:a=o._payload,o=o._init;try{return st(o(a))}catch{}}return null}function pt(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=(o=a.render).displayName||o.name||"",a.displayName||(""!==o?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return st(a);case 8:return a===Dn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function ze(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":case"object":return o;default:return""}}function Zt(o){var a=o.type;return(o=o.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a||"radio"===a)}function os(o){o._valueTracker||(o._valueTracker=function Gd(o){var a=Zt(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),u=""+o[a];if(!o.hasOwnProperty(a)&&typeof c<"u"&&"function"==typeof c.get&&"function"==typeof c.set){var p=c.get,h=c.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return p.call(this)},set:function(y){u=""+y,h.call(this,y)}}),Object.defineProperty(o,a,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}(o))}function xc(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var c=a.getValue(),u="";return o&&(u=Zt(o)?o.checked?"true":"false":o.value),(o=u)!==c&&(a.setValue(o),!0)}function is(o){if(typeof(o=o||(typeof document<"u"?document:void 0))>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ia(o,a){return j({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a.checked??o._wrapperState.initialChecked})}function Cc(o,a){var c=null==a.defaultValue?"":a.defaultValue,u=null!=a.checked?a.checked:a.defaultChecked;c=ze(null!=a.value?a.value:c),o._wrapperState={initialChecked:u,initialValue:c,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function kc(o,a){null!=(a=a.checked)&&At(o,"checked",a,!1)}function Ta(o,a){kc(o,a);var c=ze(a.value),u=a.type;if(null!=c)"number"===u?(0===c&&""===o.value||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if("submit"===u||"reset"===u)return void o.removeAttribute("value");a.hasOwnProperty("value")?Aa(o,a.type,c):a.hasOwnProperty("defaultValue")&&Aa(o,a.type,ze(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(o.defaultChecked=!!a.defaultChecked)}function Sc(o,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var u=a.type;if(("submit"===u||"reset"===u)&&null==a.value)return;a=""+o._wrapperState.initialValue,c||a===o.value||(o.value=a),o.defaultValue=a}""!==(c=o.name)&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,""!==c&&(o.name=c)}function Aa(o,a,c){("number"!==a||is(o.ownerDocument)!==o)&&(null==c?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var Wi=Array.isArray;function Ho(o,a,c,u){if(o=o.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<o.length;c++)p=a.hasOwnProperty("$"+o[c].value),o[c].selected!==p&&(o[c].selected=p),p&&u&&(o[c].defaultSelected=!0)}else{for(c=""+ze(c),a=null,p=0;p<o.length;p++){if(o[p].value===c)return o[p].selected=!0,void(u&&(o[p].defaultSelected=!0));null!==a||o[p].disabled||(a=o[p])}null!==a&&(a.selected=!0)}}function Et(o,a){if(null!=a.dangerouslySetInnerHTML)throw Error(N(91));return j({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function wc(o,a){var c=a.value;if(null==c){if(c=a.children,a=a.defaultValue,null!=c){if(null!=a)throw Error(N(92));if(Wi(c)){if(1<c.length)throw Error(N(93));c=c[0]}a=c}null==a&&(a=""),c=a}o._wrapperState={initialValue:ze(c)}}function Nc(o,a){var c=ze(a.value),u=ze(a.defaultValue);null!=c&&((c=""+c)!==o.value&&(o.value=c),null==a.defaultValue&&o.defaultValue!==c&&(o.defaultValue=c)),null!=u&&(o.defaultValue=""+u)}function On(o){var a=o.textContent;a===o._wrapperState.initialValue&&""!==a&&null!==a&&(o.value=a)}function Ec(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(o,a){return null==o||"http://www.w3.org/1999/xhtml"===o?Ec(a):"http://www.w3.org/2000/svg"===o&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":o}var rs,o,Ic=(o=function(o,a){if("http://www.w3.org/2000/svg"!==o.namespaceURI||"innerHTML"in o)o.innerHTML=a;else{for((rs=rs||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=rs.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,u,p){MSApp.execUnsafeLocalFunction(function(){return o(a,c)})}:o);function Zi(o,a){if(a){var c=o.firstChild;if(c&&c===o.lastChild&&3===c.nodeType)return void(c.nodeValue=a)}o.textContent=a}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dd=["Webkit","ms","Moz","O"];function Tc(o,a,c){return null==a||"boolean"==typeof a||""===a?"":c||"number"!=typeof a||0===a||Ji.hasOwnProperty(o)&&Ji[o]?(""+a).trim():a+"px"}function Ac(o,a){for(var c in o=o.style,a)if(a.hasOwnProperty(c)){var u=0===c.indexOf("--"),p=Tc(c,a[c],u);"float"===c&&(c="cssFloat"),u?o.setProperty(c,p):o[c]=p}}Object.keys(Ji).forEach(function(o){Dd.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),Ji[a]=Ji[o]})});var Vd=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fa(o,a){if(a){if(Vd[o]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(N(137,o));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(N(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(N(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(N(62))}}function ja(o,a){if(-1===o.indexOf("-"))return"string"==typeof a.is;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=null;function $a(o){return(o=o.target||o.srcElement||window).correspondingUseElement&&(o=o.correspondingUseElement),3===o.nodeType?o.parentNode:o}var Ga=null,di=null,pi=null;function Rc(o){if(o=br(o)){if("function"!=typeof Ga)throw Error(N(280));var a=o.stateNode;a&&(a=Ts(a),Ga(o.stateNode,o.type,a))}}function Fc(o){di?pi?pi.push(o):pi=[o]:di=o}function jc(){if(di){var o=di,a=pi;if(pi=di=null,Rc(o),a)for(o=0;o<a.length;o++)Rc(a[o])}}function Mc(o,a){return o(a)}function Da(){}var Va=!1;function $c(o,a,c){if(Va)return o(a,c);Va=!0;try{return Mc(o,a,c)}finally{Va=!1,(null!==di||null!==pi)&&(Da(),jc())}}function Ki(o,a){var c=o.stateNode;if(null===c)return null;var u=Ts(c);if(null===u)return null;c=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(u=!("button"===(o=o.type)||"input"===o||"select"===o||"textarea"===o)),o=!u;break e;default:o=!1}if(o)return null;if(c&&"function"!=typeof c)throw Error(N(231,a,typeof c));return c}var Oa=!1;if(nt)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Oa=!1}function Od(o,a,c,u,p,h,y,k,A){var O=Array.prototype.slice.call(arguments,3);try{a.apply(c,O)}catch(W){this.onError(W)}}var Qi=!1,ss=null,as=!1,za=null,zd={onError:function(o){Qi=!0,ss=o}};function Bd(o,a,c,u,p,h,y,k,A){Qi=!1,ss=null,Od.apply(zd,arguments)}function Uo(o){var a=o,c=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do{4098&(a=o).flags&&(c=a.return),o=a.return}while(o)}return 3===a.tag?c:null}function Gc(o){if(13===o.tag){var a=o.memoizedState;if(null===a&&null!==(o=o.alternate)&&(a=o.memoizedState),null!==a)return a.dehydrated}return null}function Dc(o){if(Uo(o)!==o)throw Error(N(188))}function Vc(o){return null!==(o=function Pd(o){var a=o.alternate;if(!a){if(null===(a=Uo(o)))throw Error(N(188));return a!==o?null:o}for(var c=o,u=a;;){var p=c.return;if(null===p)break;var h=p.alternate;if(null===h){if(null!==(u=p.return)){c=u;continue}break}if(p.child===h.child){for(h=p.child;h;){if(h===c)return Dc(p),o;if(h===u)return Dc(p),a;h=h.sibling}throw Error(N(188))}if(c.return!==u.return)c=p,u=h;else{for(var y=!1,k=p.child;k;){if(k===c){y=!0,c=p,u=h;break}if(k===u){y=!0,u=p,c=h;break}k=k.sibling}if(!y){for(k=h.child;k;){if(k===c){y=!0,c=h,u=p;break}if(k===u){y=!0,u=h,c=p;break}k=k.sibling}if(!y)throw Error(N(189))}}if(c.alternate!==u)throw Error(N(190))}if(3!==c.tag)throw Error(N(188));return c.stateNode.current===c?o:a}(o))?Oc(o):null}function Oc(o){if(5===o.tag||6===o.tag)return o;for(o=o.child;null!==o;){var a=Oc(o);if(null!==a)return a;o=o.sibling}return null}var zc=L.unstable_scheduleCallback,Bc=L.unstable_cancelCallback,Xd=L.unstable_shouldYield,Yd=L.unstable_requestPaint,ht=L.unstable_now,Hd=L.unstable_getCurrentPriorityLevel,Ba=L.unstable_ImmediatePriority,Lc=L.unstable_UserBlockingPriority,ls=L.unstable_NormalPriority,Ud=L.unstable_LowPriority,Pc=L.unstable_IdlePriority,cs=null,zn=null,Sn=Math.clz32?Math.clz32:function Kd(o){return 0===(o>>>=0)?32:31-(Zd(o)/Jd|0)|0},Zd=Math.log,Jd=Math.LN2,us=64,ds=4194304;function er(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&o;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&o;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ps(o,a){var c=o.pendingLanes;if(0===c)return 0;var u=0,p=o.suspendedLanes,h=o.pingedLanes,y=268435455&c;if(0!==y){var k=y&~p;0!==k?u=er(k):0!=(h&=y)&&(u=er(h))}else 0!=(y=c&~p)?u=er(y):0!==h&&(u=er(h));if(0===u)return 0;if(0!==a&&a!==u&&!(a&p)&&((p=u&-u)>=(h=a&-a)||16===p&&4194240&h))return a;if(4&u&&(u|=16&c),0!==(a=o.entangledLanes))for(o=o.entanglements,a&=u;0<a;)u|=o[c=31-Sn(a)],a&=~(p=1<<c);return u}function qd(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function La(o){return 0!=(o=-1073741825&o.pendingLanes)?o:1073741824&o?1073741824:0}function Xc(){var o=us;return!(4194240&(us<<=1))&&(us=64),o}function Pa(o){for(var a=[],c=0;31>c;c++)a.push(o);return a}function tr(o,a,c){o.pendingLanes|=a,536870912!==a&&(o.suspendedLanes=0,o.pingedLanes=0),(o=o.eventTimes)[a=31-Sn(a)]=c}function fs(o,a){var c=o.entangledLanes|=a;for(o=o.entanglements;c;){var u=31-Sn(c),p=1<<u;p&a|o[u]&a&&(o[u]|=a),c&=~p}}var Le=0;function Yc(o){return 1<(o&=-o)?4<o?268435455&o?16:536870912:4:1}var Hc,Xa,Uc,Wc,Zc,Ya=!1,Wo=[],vo=null,yo=null,bo=null,nr=new Map,or=new Map,xo=[],ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ha(o,a){switch(o){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":nr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":or.delete(a.pointerId)}}function ir(o,a,c,u,p,h){return null===o||o.nativeEvent!==h?(o={blockedOn:a,domEventName:c,eventSystemFlags:u,nativeEvent:h,targetContainers:[p]},null!==a&&null!==(a=br(a))&&Xa(a),o):(o.eventSystemFlags|=u,a=o.targetContainers,null!==p&&-1===a.indexOf(p)&&a.push(p),o)}function ms(o){var a=Jo(o.target);if(null!==a){var c=Uo(a);if(null!==c)if(13===(a=c.tag)){if(null!==(a=Gc(c)))return o.blockedOn=a,void Zc(o.priority,function(){Uc(c)})}else if(3===a&&c.stateNode.current.memoizedState.isDehydrated)return void(o.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}o.blockedOn=null}function Ua(o){if(null!==o.blockedOn)return!1;for(var a=o.targetContainers;0<a.length;){var c=Za(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(null!==c)return null!==(a=br(c))&&Xa(a),o.blockedOn=c,!1;var u=new(c=o.nativeEvent).constructor(c.type,c);Ma=u,c.target.dispatchEvent(u),Ma=null,a.shift()}return!0}function St(o,a,c){Ua(o)&&c.delete(a)}function Ff(){Ya=!1,null!==vo&&Ua(vo)&&(vo=null),null!==yo&&Ua(yo)&&(yo=null),null!==bo&&Ua(bo)&&(bo=null),nr.forEach(St),or.forEach(St)}function _s(o,a){o.blockedOn===a&&(o.blockedOn=null,Ya||(Ya=!0,L.unstable_scheduleCallback(L.unstable_NormalPriority,Ff)))}function rr(o){function a(p){return _s(p,o)}if(0<Wo.length){_s(Wo[0],o);for(var c=1;c<Wo.length;c++){var u=Wo[c];u.blockedOn===o&&(u.blockedOn=null)}}for(null!==vo&&_s(vo,o),null!==yo&&_s(yo,o),null!==bo&&_s(bo,o),nr.forEach(a),or.forEach(a),c=0;c<xo.length;c++)(u=xo[c]).blockedOn===o&&(u.blockedOn=null);for(;0<xo.length&&null===(c=xo[0]).blockedOn;)ms(c),null===c.blockedOn&&xo.shift()}var Pe=rt.ReactCurrentBatchConfig,Bn=!0;function tp(o,a,c,u){var p=Le,h=Pe.transition;Pe.transition=null;try{Le=1,hs(o,a,c,u)}finally{Le=p,Pe.transition=h}}function Wa(o,a,c,u){var p=Le,h=Pe.transition;Pe.transition=null;try{Le=4,hs(o,a,c,u)}finally{Le=p,Pe.transition=h}}function hs(o,a,c,u){if(Bn){var p=Za(o,a,c,u);if(null===p)dl(o,a,u,fi,c),Ha(o,u);else if(function Jc(o,a,c,u,p){switch(a){case"focusin":return vo=ir(vo,o,a,c,u,p),!0;case"dragenter":return yo=ir(yo,o,a,c,u,p),!0;case"mouseover":return bo=ir(bo,o,a,c,u,p),!0;case"pointerover":var h=p.pointerId;return nr.set(h,ir(nr.get(h)||null,o,a,c,u,p)),!0;case"gotpointercapture":return or.set(h=p.pointerId,ir(or.get(h)||null,o,a,c,u,p)),!0}return!1}(p,o,a,c,u))u.stopPropagation();else if(Ha(o,u),4&a&&-1<ep.indexOf(o)){for(;null!==p;){var h=br(p);if(null!==h&&Hc(h),null===(h=Za(o,a,c,u))&&dl(o,a,u,fi,c),h===p)break;p=h}null!==p&&u.stopPropagation()}else dl(o,a,u,null,c)}}var fi=null;function Za(o,a,c,u){if(fi=null,null!==(o=Jo(o=$a(u))))if(null===(a=Uo(o)))o=null;else if(13===(c=a.tag)){if(null!==(o=Gc(a)))return o;o=null}else if(3===c){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return fi=o,null}function Kc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hd()){case Ba:return 1;case Lc:return 4;case ls:case Ud:return 16;case Pc:return 536870912;default:return 16}default:return 16}}var to=null,Ja=null,sr=null;function Ka(){if(sr)return sr;var o,u,a=Ja,c=a.length,p="value"in to?to.value:to.textContent,h=p.length;for(o=0;o<c&&a[o]===p[o];o++);var y=c-o;for(u=1;u<=y&&a[c-u]===p[h-u];u++);return sr=p.slice(o,1<u?1-u:void 0)}function ar(o){var a=o.keyCode;return"charCode"in o?0===(o=o.charCode)&&13===a&&(o=13):o=a,10===o&&(o=13),32<=o||13===o?o:0}function gs(){return!0}function qc(){return!1}function ln(o){function a(c,u,p,h,y){for(var k in this._reactName=c,this._targetInst=p,this.type=u,this.nativeEvent=h,this.target=y,this.currentTarget=null,o)o.hasOwnProperty(k)&&(this[k]=(c=o[k])?c(h):h[k]);return this.isDefaultPrevented=(null!=h.defaultPrevented?h.defaultPrevented:!1===h.returnValue)?gs:qc,this.isPropagationStopped=qc,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():"unknown"!=typeof c.returnValue&&(c.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():"unknown"!=typeof c.cancelBubble&&(c.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),a}var Qa,el,cr,mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=ln(mi),lr=j({},mi,{view:0,detail:0}),np=ln(lr),vs=j({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(o){return void 0===o.relatedTarget?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==cr&&(cr&&"mousemove"===o.type?(Qa=o.screenX-cr.screenX,el=o.screenY-cr.screenY):el=Qa=0,cr=o),Qa)},movementY:function(o){return"movementY"in o?o.movementY:el}}),Qc=ln(vs),ip=ln(j({},vs,{dataTransfer:0})),tl=ln(j({},lr,{relatedTarget:0})),ap=ln(j({},mi,{animationName:0,elapsedTime:0,pseudoElement:0})),lp=j({},mi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),cp=ln(lp),eu=ln(j({},mi,{data:0})),dp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mp(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):!!(o=fp[o])&&!!a[o]}function ys(){return mp}var _p=j({},lr,{key:function(o){if(o.key){var a=dp[o.key]||o.key;if("Unidentified"!==a)return a}return"keypress"===o.type?13===(o=ar(o))?"Enter":String.fromCharCode(o):"keydown"===o.type||"keyup"===o.type?pp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(o){return"keypress"===o.type?ar(o):0},keyCode:function(o){return"keydown"===o.type||"keyup"===o.type?o.keyCode:0},which:function(o){return"keypress"===o.type?ar(o):"keydown"===o.type||"keyup"===o.type?o.keyCode:0}}),bs=ln(_p),tu=ln(j({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),hp=ln(j({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys})),vp=ln(j({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0})),yp=j({},vs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),bp=ln(yp),xp=[9,13,27,32],nl=nt&&"CompositionEvent"in window,ur=null;nt&&"documentMode"in document&&(ur=document.documentMode);var Cp=nt&&"TextEvent"in window&&!ur,ou=nt&&(!nl||ur&&8<ur&&11>=ur),iu=" ",ru=!1;function su(o,a){switch(o){case"keyup":return-1!==xp.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function au(o){return"object"==typeof(o=o.detail)&&"data"in o?o.data:null}var _i=!1,lu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return"input"===a?!!lu[o.type]:"textarea"===a}function uu(o,a,c,u){Fc(u),0<(a=vr(a,"onChange")).length&&(c=new qa("onChange","change",null,c,u),o.push({event:c,listeners:a}))}var dr=null,pr=null;function wp(o){Su(o,0)}function Cs(o){if(xc(xi(o)))return o}function Np(o,a){if("change"===o)return a}var du=!1;if(nt){var ol;if(nt){var il="oninput"in document;if(!il){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),il="function"==typeof pu.oninput}ol=il}else ol=!1;du=ol&&(!document.documentMode||9<document.documentMode)}function fu(){dr&&(dr.detachEvent("onpropertychange",mu),pr=dr=null)}function mu(o){if("value"===o.propertyName&&Cs(pr)){var a=[];uu(a,pr,o,$a(o)),$c(wp,a)}}function Ep(o,a,c){"focusin"===o?(fu(),pr=c,(dr=a).attachEvent("onpropertychange",mu)):"focusout"===o&&fu()}function Ip(o){if("selectionchange"===o||"keyup"===o||"keydown"===o)return Cs(pr)}function Tp(o,a){if("click"===o)return Cs(a)}function Ap(o,a){if("input"===o||"change"===o)return Cs(a)}var wn="function"==typeof Object.is?Object.is:function Rp(o,a){return o===a&&(0!==o||1/o==1/a)||o!=o&&a!=a};function fr(o,a){if(wn(o,a))return!0;if("object"!=typeof o||null===o||"object"!=typeof a||null===a)return!1;var c=Object.keys(o),u=Object.keys(a);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var p=c[u];if(!sn.call(a,p)||!wn(o[p],a[p]))return!1}return!0}function _u(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function hu(o,a){var u,c=_u(o);for(o=0;c;){if(3===c.nodeType){if(u=o+c.textContent.length,o<=a&&u>=a)return{node:c,offset:a-o};o=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_u(c)}}function gu(o,a){return!(!o||!a)&&(o===a||(!o||3!==o.nodeType)&&(a&&3===a.nodeType?gu(o,a.parentNode):"contains"in o?o.contains(a):!!o.compareDocumentPosition&&!!(16&o.compareDocumentPosition(a))))}function vu(){for(var o=window,a=is();a instanceof o.HTMLIFrameElement;){try{var c="string"==typeof a.contentWindow.location.href}catch{c=!1}if(!c)break;a=is((o=a.contentWindow).document)}return a}function rl(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&("input"===a&&("text"===o.type||"search"===o.type||"tel"===o.type||"url"===o.type||"password"===o.type)||"textarea"===a||"true"===o.contentEditable)}function Fp(o){var a=vu(),c=o.focusedElem,u=o.selectionRange;if(a!==c&&c&&c.ownerDocument&&gu(c.ownerDocument.documentElement,c)){if(null!==u&&rl(c))if(a=u.start,void 0===(o=u.end)&&(o=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(o,c.value.length);else if((o=(a=c.ownerDocument||document)&&a.defaultView||window).getSelection){o=o.getSelection();var p=c.textContent.length,h=Math.min(u.start,p);u=void 0===u.end?h:Math.min(u.end,p),!o.extend&&h>u&&(p=u,u=h,h=p),p=hu(c,h);var y=hu(c,u);p&&y&&(1!==o.rangeCount||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==y.node||o.focusOffset!==y.offset)&&((a=a.createRange()).setStart(p.node,p.offset),o.removeAllRanges(),h>u?(o.addRange(a),o.extend(y.node,y.offset)):(a.setEnd(y.node,y.offset),o.addRange(a)))}for(a=[],o=c;o=o.parentNode;)1===o.nodeType&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for("function"==typeof c.focus&&c.focus(),c=0;c<a.length;c++)(o=a[c]).element.scrollLeft=o.left,o.element.scrollTop=o.top}}var jp=nt&&"documentMode"in document&&11>=document.documentMode,hi=null,sl=null,mr=null,al=!1;function ks(o,a,c){var u=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;al||null==hi||hi!==is(u)||(u="selectionStart"in(u=hi)&&rl(u)?{start:u.selectionStart,end:u.selectionEnd}:{anchorNode:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset},mr&&fr(mr,u)||(mr=u,0<(u=vr(sl,"onSelect")).length&&(a=new qa("onSelect","select",null,a,c),o.push({event:a,listeners:u}),a.target=hi)))}function Ss(o,a){var c={};return c[o.toLowerCase()]=a.toLowerCase(),c["Webkit"+o]="webkit"+a,c["Moz"+o]="moz"+a,c}var S={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionend:Ss("Transition","TransitionEnd")},jt={},yu={};function _r(o){if(jt[o])return jt[o];if(!S[o])return o;var c,a=S[o];for(c in a)if(a.hasOwnProperty(c)&&c in yu)return jt[o]=a[c];return o}nt&&(yu=document.createElement("div").style,"AnimationEvent"in window||(delete S.animationend.animation,delete S.animationiteration.animation,delete S.animationstart.animation),"TransitionEvent"in window||delete S.transitionend.transition);var ll=_r("animationend"),Mp=_r("animationiteration"),bu=_r("animationstart"),xu=_r("transitionend"),Cu=new Map,cl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(o,a){Cu.set(o,a),zt(a,[o])}for(var ul=0;ul<cl.length;ul++){var wt=cl[ul];no(wt.toLowerCase(),"on"+(wt[0].toUpperCase()+wt.slice(1)))}no(ll,"onAnimationEnd"),no(Mp,"onAnimationIteration"),no(bu,"onAnimationStart"),no("dblclick","onDoubleClick"),no("focusin","onFocus"),no("focusout","onBlur"),no(xu,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zt("onBeforeInput",["compositionend","keypress","textInput","paste"]),zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ws=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function ku(o,a,c){var u=o.type||"unknown-event";o.currentTarget=c,function Ld(o,a,c,u,p,h,y,k,A){if(Bd.apply(this,arguments),Qi){if(!Qi)throw Error(N(198));var O=ss;Qi=!1,ss=null,as||(as=!0,za=O)}}(u,a,void 0,o),o.currentTarget=null}function Su(o,a){a=!!(4&a);for(var c=0;c<o.length;c++){var u=o[c],p=u.event;u=u.listeners;e:{var h=void 0;if(a)for(var y=u.length-1;0<=y;y--){var k=u[y],A=k.instance,O=k.currentTarget;if(k=k.listener,A!==h&&p.isPropagationStopped())break e;ku(p,k,O),h=A}else for(y=0;y<u.length;y++){if(A=(k=u[y]).instance,O=k.currentTarget,k=k.listener,A!==h&&p.isPropagationStopped())break e;ku(p,k,O),h=A}}}if(as)throw o=za,as=!1,za=null,o}function Ze(o,a){var c=a[hl];void 0===c&&(c=a[hl]=new Set);var u=o+"__bubble";c.has(u)||(wu(a,o,2,!1),c.add(u))}function hr(o,a,c){var u=0;a&&(u|=4),wu(c,o,u,a)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function Zo(o){if(!o[Ns]){o[Ns]=!0,mt.forEach(function(c){"selectionchange"!==c&&(ws.has(c)||hr(c,!1,o),hr(c,!0,o))});var a=9===o.nodeType?o:o.ownerDocument;null===a||a[Ns]||(a[Ns]=!0,hr("selectionchange",!1,a))}}function wu(o,a,c,u){switch(Kc(a)){case 1:var p=tp;break;case 4:p=Wa;break;default:p=hs}c=p.bind(null,a,c,o),p=void 0,!Oa||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(p=!0),o.addEventListener(a,c,u?void 0===p||{capture:!0,passive:p}:void 0!==p&&{passive:p})}function dl(o,a,c,u,p){var h=u;if(!(1&a||2&a||null===u))e:for(;;){if(null===u)return;var y=u.tag;if(3===y||4===y){var k=u.stateNode.containerInfo;if(k===p||8===k.nodeType&&k.parentNode===p)break;if(4===y)for(y=u.return;null!==y;){var A=y.tag;if((3===A||4===A)&&((A=y.stateNode.containerInfo)===p||8===A.nodeType&&A.parentNode===p))return;y=y.return}for(;null!==k;){if(null===(y=Jo(k)))return;if(5===(A=y.tag)||6===A){u=h=y;continue e}k=k.parentNode}}u=u.return}$c(function(){var O=h,W=$a(c),q=[];e:{var Z=Cu.get(o);if(void 0!==Z){var pe=qa,me=o;switch(o){case"keypress":if(0===ar(c))break e;case"keydown":case"keyup":pe=bs;break;case"focusin":me="focus",pe=tl;break;case"focusout":me="blur",pe=tl;break;case"beforeblur":case"afterblur":pe=tl;break;case"click":if(2===c.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=hp;break;case ll:case Mp:case bu:pe=ap;break;case xu:pe=vp;break;case"scroll":pe=np;break;case"wheel":pe=bp;break;case"copy":case"cut":case"paste":pe=cp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=tu}var he=!!(4&a),lt=!he&&"scroll"===o,G=he?null!==Z?Z+"Capture":null:Z;he=[];for(var D,F=O;null!==F;){var ee=(D=F).stateNode;if(5===D.tag&&null!==ee&&(D=ee,null!==G&&null!=(ee=Ki(F,G))&&he.push(gr(F,ee,D))),lt)break;F=F.return}0<he.length&&(Z=new pe(Z,me,null,c,W),q.push({event:Z,listeners:he}))}}if(!(7&a)){if(pe="mouseout"===o||"pointerout"===o,(!(Z="mouseover"===o||"pointerover"===o)||c===Ma||!(me=c.relatedTarget||c.fromElement)||!Jo(me)&&!me[oo])&&(pe||Z)&&(Z=W.window===W?W:(Z=W.ownerDocument)?Z.defaultView||Z.parentWindow:window,pe?(pe=O,null!==(me=(me=c.relatedTarget||c.toElement)?Jo(me):null)&&(me!==(lt=Uo(me))||5!==me.tag&&6!==me.tag)&&(me=null)):(pe=null,me=O),pe!==me)){if(he=Qc,ee="onMouseLeave",G="onMouseEnter",F="mouse",("pointerout"===o||"pointerover"===o)&&(he=tu,ee="onPointerLeave",G="onPointerEnter",F="pointer"),lt=null==pe?Z:xi(pe),D=null==me?Z:xi(me),(Z=new he(ee,F+"leave",pe,c,W)).target=lt,Z.relatedTarget=D,ee=null,Jo(W)===O&&((he=new he(G,F+"enter",me,c,W)).target=D,he.relatedTarget=lt,ee=he),lt=ee,pe&&me)t:{for(G=me,F=0,D=he=pe;D;D=vi(D))F++;for(D=0,ee=G;ee;ee=vi(ee))D++;for(;0<F-D;)he=vi(he),F--;for(;0<D-F;)G=vi(G),D--;for(;F--;){if(he===G||null!==G&&he===G.alternate)break t;he=vi(he),G=vi(G)}he=null}else he=null;null!==pe&&Nu(q,Z,pe,he,!1),null!==me&&null!==lt&&Nu(q,lt,me,he,!0)}if("select"===(pe=(Z=O?xi(O):window).nodeName&&Z.nodeName.toLowerCase())||"input"===pe&&"file"===Z.type)var _e=Np;else if(cu(Z))if(du)_e=Ap;else{_e=Ip;var ye=Ep}else(pe=Z.nodeName)&&"input"===pe.toLowerCase()&&("checkbox"===Z.type||"radio"===Z.type)&&(_e=Tp);switch(_e&&(_e=_e(o,O))?uu(q,_e,c,W):(ye&&ye(o,Z,O),"focusout"===o&&(ye=Z._wrapperState)&&ye.controlled&&"number"===Z.type&&Aa(Z,"number",Z.value)),ye=O?xi(O):window,o){case"focusin":(cu(ye)||"true"===ye.contentEditable)&&(hi=ye,sl=O,mr=null);break;case"focusout":mr=sl=hi=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,ks(q,c,W);break;case"selectionchange":if(jp)break;case"keydown":case"keyup":ks(q,c,W)}var be;if(nl)e:{switch(o){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else _i?su(o,c)&&(Ce="onCompositionEnd"):"keydown"===o&&229===c.keyCode&&(Ce="onCompositionStart");Ce&&(ou&&"ko"!==c.locale&&(_i||"onCompositionStart"!==Ce?"onCompositionEnd"===Ce&&_i&&(be=Ka()):(Ja="value"in(to=W)?to.value:to.textContent,_i=!0)),0<(ye=vr(O,Ce)).length&&(Ce=new eu(Ce,o,null,c,W),q.push({event:Ce,listeners:ye}),(be||null!==(be=au(c)))&&(Ce.data=be))),(be=Cp?function kp(o,a){switch(o){case"compositionend":return au(a);case"keypress":return 32!==a.which?null:(ru=!0,iu);case"textInput":return(o=a.data)===iu&&ru?null:o;default:return null}}(o,c):function Sp(o,a){if(_i)return"compositionend"===o||!nl&&su(o,a)?(o=Ka(),sr=Ja=to=null,_i=!1,o):null;switch(o){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ou&&"ko"!==a.locale?null:a.data}}(o,c))&&0<(O=vr(O,"onBeforeInput")).length&&(W=new eu("onBeforeInput","beforeinput",null,c,W),q.push({event:W,listeners:O}),W.data=be)}Su(q,a)})}function gr(o,a,c){return{instance:o,listener:a,currentTarget:c}}function vr(o,a){for(var c=a+"Capture",u=[];null!==o;){var p=o,h=p.stateNode;5===p.tag&&null!==h&&(p=h,null!=(h=Ki(o,c))&&u.unshift(gr(o,h,p)),null!=(h=Ki(o,a))&&u.push(gr(o,h,p))),o=o.return}return u}function vi(o){if(null===o)return null;do{o=o.return}while(o&&5!==o.tag);return o||null}function Nu(o,a,c,u,p){for(var h=a._reactName,y=[];null!==c&&c!==u;){var k=c,A=k.alternate,O=k.stateNode;if(null!==A&&A===u)break;5===k.tag&&null!==O&&(k=O,p?null!=(A=Ki(c,h))&&y.unshift(gr(c,A,k)):p||null!=(A=Ki(c,h))&&y.push(gr(c,A,k))),c=c.return}0!==y.length&&o.push({event:a,listeners:y})}var Eu=/\r\n?/g,Iu=/\u0000|\uFFFD/g;function Tu(o){return("string"==typeof o?o:""+o).replace(Eu,"\n").replace(Iu,"")}function Es(o,a,c){if(a=Tu(a),Tu(o)!==a&&c)throw Error(N(425))}function Is(){}var pl=null,fl=null;function ml(o,a){return"textarea"===o||"noscript"===o||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var _l="function"==typeof setTimeout?setTimeout:void 0,Gp="function"==typeof clearTimeout?clearTimeout:void 0,Au="function"==typeof Promise?Promise:void 0,Ru="function"==typeof queueMicrotask?queueMicrotask:typeof Au<"u"?function(o){return Au.resolve(null).then(o).catch(Dp)}:_l;function Dp(o){setTimeout(function(){throw o})}function yi(o,a){var c=a,u=0;do{var p=c.nextSibling;if(o.removeChild(c),p&&8===p.nodeType)if("/$"===(c=p.data)){if(0===u)return o.removeChild(p),void rr(a);u--}else"$"!==c&&"$?"!==c&&"$!"!==c||u++;c=p}while(c);rr(a)}function Co(o){for(;null!=o;o=o.nextSibling){var a=o.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=o.data)||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return o}function Fu(o){o=o.previousSibling;for(var a=0;o;){if(8===o.nodeType){var c=o.data;if("$"===c||"$!"===c||"$?"===c){if(0===a)return o;a--}else"/$"===c&&a++}o=o.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Ln="__reactFiber$"+bi,yr="__reactProps$"+bi,oo="__reactContainer$"+bi,hl="__reactEvents$"+bi,Vp="__reactListeners$"+bi,Op="__reactHandles$"+bi;function Jo(o){var a=o[Ln];if(a)return a;for(var c=o.parentNode;c;){if(a=c[oo]||c[Ln]){if(c=a.alternate,null!==a.child||null!==c&&null!==c.child)for(o=Fu(o);null!==o;){if(c=o[Ln])return c;o=Fu(o)}return a}c=(o=c).parentNode}return null}function br(o){return!(o=o[Ln]||o[oo])||5!==o.tag&&6!==o.tag&&13!==o.tag&&3!==o.tag?null:o}function xi(o){if(5===o.tag||6===o.tag)return o.stateNode;throw Error(N(33))}function Ts(o){return o[yr]||null}var gl=[],Ci=-1;function ko(o){return{current:o}}function qe(o){0>Ci||(o.current=gl[Ci],gl[Ci]=null,Ci--)}function Je(o,a){Ci++,gl[Ci]=o.current,o.current=a}var Pn={},Mt=ko(Pn),$t=ko(!1),Ko=Pn;function ki(o,a){var c=o.type.contextTypes;if(!c)return Pn;var u=o.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===a)return u.__reactInternalMemoizedMaskedChildContext;var h,p={};for(h in c)p[h]=a[h];return u&&((o=o.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=p),p}function Jt(o){return null!=o.childContextTypes}function As(){qe($t),qe(Mt)}function ju(o,a,c){if(Mt.current!==Pn)throw Error(N(168));Je(Mt,a),Je($t,c)}function Mu(o,a,c){var u=o.stateNode;if(a=a.childContextTypes,"function"!=typeof u.getChildContext)return c;for(var p in u=u.getChildContext())if(!(p in a))throw Error(N(108,pt(o)||"Unknown",p));return j({},c,u)}function Rs(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Pn,Ko=Mt.current,Je(Mt,o),Je($t,$t.current),!0}function vl(o,a,c){var u=o.stateNode;if(!u)throw Error(N(169));c?(o=Mu(o,a,Ko),u.__reactInternalMemoizedMergedChildContext=o,qe($t),qe(Mt),Je(Mt,o)):qe($t),Je($t,c)}var io=null,Fs=!1,yl=!1;function $u(o){null===io?io=[o]:io.push(o)}function So(){if(!yl&&null!==io){yl=!0;var o=0,a=Le;try{var c=io;for(Le=1;o<c.length;o++){var u=c[o];do{u=u(!0)}while(null!==u)}io=null,Fs=!1}catch(p){throw null!==io&&(io=io.slice(o+1)),zc(Ba,So),p}finally{Le=a,yl=!1}}return null}var wi=[],Ni=0,js=null,xr=0,Kt=[],cn=0,wo=null,Xn=1,ro="";function qo(o,a){wi[Ni++]=xr,wi[Ni++]=js,js=o,xr=a}function Gu(o,a,c){Kt[cn++]=Xn,Kt[cn++]=ro,Kt[cn++]=wo,wo=o;var u=Xn;o=ro;var p=32-Sn(u)-1;u&=~(1<<p),c+=1;var h=32-Sn(a)+p;if(30<h){var y=p-p%5;h=(u&(1<<y)-1).toString(32),u>>=y,p-=y,Xn=1<<32-Sn(a)+p|c<<p|u,ro=h+o}else Xn=1<<h|c<<p|u,ro=o}function bl(o){null!==o.return&&(qo(o,1),Gu(o,1,0))}function xl(o){for(;o===js;)js=wi[--Ni],wi[Ni]=null,xr=wi[--Ni],wi[Ni]=null;for(;o===wo;)wo=Kt[--cn],Kt[cn]=null,ro=Kt[--cn],Kt[cn]=null,Xn=Kt[--cn],Kt[cn]=null}var un=null,dn=null,ot=!1,Nn=null;function Du(o,a){var c=Ge(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=o,null===(a=o.deletions)?(o.deletions=[c],o.flags|=16):a.push(c)}function Vu(o,a){switch(o.tag){case 5:var c=o.type;return null!==(a=1!==a.nodeType||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(o.stateNode=a,un=o,dn=Co(a.firstChild),!0);case 6:return null!==(a=""===o.pendingProps||3!==a.nodeType?null:a)&&(o.stateNode=a,un=o,dn=null,!0);case 13:return null!==(a=8!==a.nodeType?null:a)&&(o.memoizedState={dehydrated:a,treeContext:c=null!==wo?{id:Xn,overflow:ro}:null,retryLane:1073741824},(c=Ge(18,null,null,0)).stateNode=a,c.return=o,o.child=c,un=o,dn=null,!0);default:return!1}}function Cl(o){return!(!(1&o.mode)||128&o.flags)}function kl(o){if(ot){var a=dn;if(a){var c=a;if(!Vu(o,a)){if(Cl(o))throw Error(N(418));a=Co(c.nextSibling);var u=un;a&&Vu(o,a)?Du(u,c):(o.flags=-4097&o.flags|2,ot=!1,un=o)}}else{if(Cl(o))throw Error(N(418));o.flags=-4097&o.flags|2,ot=!1,un=o}}}function Ou(o){for(o=o.return;null!==o&&5!==o.tag&&3!==o.tag&&13!==o.tag;)o=o.return;un=o}function Ms(o){if(o!==un)return!1;if(!ot)return Ou(o),ot=!0,!1;var a;if((a=3!==o.tag)&&!(a=5!==o.tag)&&(a="head"!==(a=o.type)&&"body"!==a&&!ml(o.type,o.memoizedProps)),a&&(a=dn)){if(Cl(o))throw zu(),Error(N(418));for(;a;)Du(o,a),a=Co(a.nextSibling)}if(Ou(o),13===o.tag){if(!(o=null!==(o=o.memoizedState)?o.dehydrated:null))throw Error(N(317));e:{for(o=o.nextSibling,a=0;o;){if(8===o.nodeType){var c=o.data;if("/$"===c){if(0===a){dn=Co(o.nextSibling);break e}a--}else"$"!==c&&"$!"!==c&&"$?"!==c||a++}o=o.nextSibling}dn=null}}else dn=un?Co(o.stateNode.nextSibling):null;return!0}function zu(){for(var o=dn;o;)o=Co(o.nextSibling)}function Ei(){dn=un=null,ot=!1}function Sl(o){null===Nn?Nn=[o]:Nn.push(o)}var Bu=rt.ReactCurrentBatchConfig;function Cr(o,a,c){if(null!==(o=c.ref)&&"function"!=typeof o&&"object"!=typeof o){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(N(309));var u=c.stateNode}if(!u)throw Error(N(147,o));var p=u,h=""+o;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===h?a.ref:((a=function(y){var k=p.refs;null===y?delete k[h]:k[h]=y})._stringRef=h,a)}if("string"!=typeof o)throw Error(N(284));if(!c._owner)throw Error(N(290,o))}return o}function $s(o,a){throw o=Object.prototype.toString.call(a),Error(N(31,"[object Object]"===o?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function Lu(o){return(0,o._init)(o._payload)}function Pu(o){function a(G,F){if(o){var D=G.deletions;null===D?(G.deletions=[F],G.flags|=16):D.push(F)}}function c(G,F){if(!o)return null;for(;null!==F;)a(G,F),F=F.sibling;return null}function u(G,F){for(G=new Map;null!==F;)G.set(null!==F.key?F.key:F.index,F),F=F.sibling;return G}function p(G,F){return(G=Do(G,F)).index=0,G.sibling=null,G}function h(G,F,D){return G.index=D,o?null!==(D=G.alternate)?(D=D.index)<F?(G.flags|=2,F):D:(G.flags|=2,F):(G.flags|=1048576,F)}function y(G){return o&&null===G.alternate&&(G.flags|=2),G}function k(G,F,D,ee){return null===F||6!==F.tag?((F=Vo(D,G.mode,ee)).return=G,F):((F=p(F,D)).return=G,F)}function A(G,F,D,ee){var _e=D.type;return _e===dt?W(G,F,D.props.children,ee,D.key):null!==F&&(F.elementType===_e||"object"==typeof _e&&null!==_e&&_e.$$typeof===ne&&Lu(_e)===F.type)?((ee=p(F,D.props)).ref=Cr(G,F,D),ee.return=G,ee):((ee=la(D.type,D.key,D.props,null,G.mode,ee)).ref=Cr(G,F,D),ee.return=G,ee)}function O(G,F,D,ee){return null===F||4!==F.tag||F.stateNode.containerInfo!==D.containerInfo||F.stateNode.implementation!==D.implementation?((F=Br(D,G.mode,ee)).return=G,F):((F=p(F,D.children||[])).return=G,F)}function W(G,F,D,ee,_e){return null===F||7!==F.tag?((F=ci(D,G.mode,ee,_e)).return=G,F):((F=p(F,D)).return=G,F)}function q(G,F,D){if("string"==typeof F&&""!==F||"number"==typeof F)return(F=Vo(""+F,G.mode,D)).return=G,F;if("object"==typeof F&&null!==F){switch(F.$$typeof){case Rt:return(D=la(F.type,F.key,F.props,null,G.mode,D)).ref=Cr(G,null,F),D.return=G,D;case je:return(F=Br(F,G.mode,D)).return=G,F;case ne:return q(G,(0,F._init)(F._payload),D)}if(Wi(F)||Oe(F))return(F=ci(F,G.mode,D,null)).return=G,F;$s(G,F)}return null}function Z(G,F,D,ee){var _e=null!==F?F.key:null;if("string"==typeof D&&""!==D||"number"==typeof D)return null!==_e?null:k(G,F,""+D,ee);if("object"==typeof D&&null!==D){switch(D.$$typeof){case Rt:return D.key===_e?A(G,F,D,ee):null;case je:return D.key===_e?O(G,F,D,ee):null;case ne:return Z(G,F,(_e=D._init)(D._payload),ee)}if(Wi(D)||Oe(D))return null!==_e?null:W(G,F,D,ee,null);$s(G,D)}return null}function pe(G,F,D,ee,_e){if("string"==typeof ee&&""!==ee||"number"==typeof ee)return k(F,G=G.get(D)||null,""+ee,_e);if("object"==typeof ee&&null!==ee){switch(ee.$$typeof){case Rt:return A(F,G=G.get(null===ee.key?D:ee.key)||null,ee,_e);case je:return O(F,G=G.get(null===ee.key?D:ee.key)||null,ee,_e);case ne:return pe(G,F,D,(0,ee._init)(ee._payload),_e)}if(Wi(ee)||Oe(ee))return W(F,G=G.get(D)||null,ee,_e,null);$s(F,ee)}return null}return function lt(G,F,D,ee){if("object"==typeof D&&null!==D&&D.type===dt&&null===D.key&&(D=D.props.children),"object"==typeof D&&null!==D){switch(D.$$typeof){case Rt:e:{for(var _e=D.key,ye=F;null!==ye;){if(ye.key===_e){if((_e=D.type)===dt){if(7===ye.tag){c(G,ye.sibling),(F=p(ye,D.props.children)).return=G,G=F;break e}}else if(ye.elementType===_e||"object"==typeof _e&&null!==_e&&_e.$$typeof===ne&&Lu(_e)===ye.type){c(G,ye.sibling),(F=p(ye,D.props)).ref=Cr(G,ye,D),F.return=G,G=F;break e}c(G,ye);break}a(G,ye),ye=ye.sibling}D.type===dt?((F=ci(D.props.children,G.mode,ee,D.key)).return=G,G=F):((ee=la(D.type,D.key,D.props,null,G.mode,ee)).ref=Cr(G,F,D),ee.return=G,G=ee)}return y(G);case je:e:{for(ye=D.key;null!==F;){if(F.key===ye){if(4===F.tag&&F.stateNode.containerInfo===D.containerInfo&&F.stateNode.implementation===D.implementation){c(G,F.sibling),(F=p(F,D.children||[])).return=G,G=F;break e}c(G,F);break}a(G,F),F=F.sibling}(F=Br(D,G.mode,ee)).return=G,G=F}return y(G);case ne:return lt(G,F,(ye=D._init)(D._payload),ee)}if(Wi(D))return function me(G,F,D,ee){for(var _e=null,ye=null,be=F,Ce=F=0,xt=null;null!==be&&Ce<D.length;Ce++){be.index>Ce?(xt=be,be=null):xt=be.sibling;var De=Z(G,be,D[Ce],ee);if(null===De){null===be&&(be=xt);break}o&&be&&null===De.alternate&&a(G,be),F=h(De,F,Ce),null===ye?_e=De:ye.sibling=De,ye=De,be=xt}if(Ce===D.length)return c(G,be),ot&&qo(G,Ce),_e;if(null===be){for(;Ce<D.length;Ce++)null!==(be=q(G,D[Ce],ee))&&(F=h(be,F,Ce),null===ye?_e=be:ye.sibling=be,ye=be);return ot&&qo(G,Ce),_e}for(be=u(G,be);Ce<D.length;Ce++)null!==(xt=pe(be,G,Ce,D[Ce],ee))&&(o&&null!==xt.alternate&&be.delete(null===xt.key?Ce:xt.key),F=h(xt,F,Ce),null===ye?_e=xt:ye.sibling=xt,ye=xt);return o&&be.forEach(function(zo){return a(G,zo)}),ot&&qo(G,Ce),_e}(G,F,D,ee);if(Oe(D))return function he(G,F,D,ee){var _e=Oe(D);if("function"!=typeof _e)throw Error(N(150));if(null==(D=_e.call(D)))throw Error(N(151));for(var ye=_e=null,be=F,Ce=F=0,xt=null,De=D.next();null!==be&&!De.done;Ce++,De=D.next()){be.index>Ce?(xt=be,be=null):xt=be.sibling;var zo=Z(G,be,De.value,ee);if(null===zo){null===be&&(be=xt);break}o&&be&&null===zo.alternate&&a(G,be),F=h(zo,F,Ce),null===ye?_e=zo:ye.sibling=zo,ye=zo,be=xt}if(De.done)return c(G,be),ot&&qo(G,Ce),_e;if(null===be){for(;!De.done;Ce++,De=D.next())null!==(De=q(G,De.value,ee))&&(F=h(De,F,Ce),null===ye?_e=De:ye.sibling=De,ye=De);return ot&&qo(G,Ce),_e}for(be=u(G,be);!De.done;Ce++,De=D.next())null!==(De=pe(be,G,Ce,De.value,ee))&&(o&&null!==De.alternate&&be.delete(null===De.key?Ce:De.key),F=h(De,F,Ce),null===ye?_e=De:ye.sibling=De,ye=De);return o&&be.forEach(function(rf){return a(G,rf)}),ot&&qo(G,Ce),_e}(G,F,D,ee);$s(G,D)}return"string"==typeof D&&""!==D||"number"==typeof D?(D=""+D,null!==F&&6===F.tag?(c(G,F.sibling),(F=p(F,D)).return=G,G=F):(c(G,F),(F=Vo(D,G.mode,ee)).return=G,G=F),y(G)):c(G,F)}}var Ii=Pu(!0),Xu=Pu(!1),Gs=ko(null),Ds=null,Ti=null,wl=null;function Nl(){wl=Ti=Ds=null}function El(o){var a=Gs.current;qe(Gs),o._currentValue=a}function Il(o,a,c){for(;null!==o;){var u=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,null!==u&&(u.childLanes|=a)):null!==u&&(u.childLanes&a)!==a&&(u.childLanes|=a),o===c)break;o=o.return}}function Ai(o,a){Ds=o,wl=Ti=null,null!==(o=o.dependencies)&&null!==o.firstContext&&(o.lanes&a&&(Pt=!0),o.firstContext=null)}function pn(o){var a=o._currentValue;if(wl!==o)if(o={context:o,memoizedValue:a,next:null},null===Ti){if(null===Ds)throw Error(N(308));Ti=o,Ds.dependencies={lanes:0,firstContext:o}}else Ti=Ti.next=o;return a}var Qo=null;function Tl(o){null===Qo?Qo=[o]:Qo.push(o)}function Yu(o,a,c,u){var p=a.interleaved;return null===p?(c.next=c,Tl(a)):(c.next=p.next,p.next=c),a.interleaved=c,so(o,u)}function so(o,a){o.lanes|=a;var c=o.alternate;for(null!==c&&(c.lanes|=a),c=o,o=o.return;null!==o;)o.childLanes|=a,null!==(c=o.alternate)&&(c.childLanes|=a),c=o,o=o.return;return 3===c.tag?c.stateNode:null}var ao=!1;function Lt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Al(o,a){a.updateQueue===(o=o.updateQueue)&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function lo(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function bn(o,a,c){var u=o.updateQueue;if(null===u)return null;if(u=u.shared,2&Me){var p=u.pending;return null===p?a.next=a:(a.next=p.next,p.next=a),u.pending=a,so(o,c)}return null===(p=u.interleaved)?(a.next=a,Tl(u)):(a.next=p.next,p.next=a),u.interleaved=a,so(o,c)}function qt(o,a,c){if(null!==(a=a.updateQueue)&&(a=a.shared,4194240&c)){var u=a.lanes;a.lanes=c|=u&=o.pendingLanes,fs(o,c)}}function Hu(o,a){var c=o.updateQueue,u=o.alternate;if(null===u||c!==(u=u.updateQueue))null===(o=c.lastBaseUpdate)?c.firstBaseUpdate=a:o.next=a,c.lastBaseUpdate=a;else{var p=null,h=null;if(null!==(c=c.firstBaseUpdate)){do{var y={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===h?p=h=y:h=h.next=y,c=c.next}while(null!==c);null===h?p=h=a:h=h.next=a}else p=h=a;o.updateQueue=c={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:h,shared:u.shared,effects:u.effects}}}function No(o,a,c,u){var p=o.updateQueue;ao=!1;var h=p.firstBaseUpdate,y=p.lastBaseUpdate,k=p.shared.pending;if(null!==k){p.shared.pending=null;var A=k,O=A.next;A.next=null,null===y?h=O:y.next=O,y=A;var W=o.alternate;null!==W&&(k=(W=W.updateQueue).lastBaseUpdate)!==y&&(null===k?W.firstBaseUpdate=O:k.next=O,W.lastBaseUpdate=A)}if(null!==h){var q=p.baseState;for(y=0,W=O=A=null,k=h;;){var Z=k.lane,pe=k.eventTime;if((u&Z)===Z){null!==W&&(W=W.next={eventTime:pe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var me=o,he=k;switch(Z=a,pe=c,he.tag){case 1:if("function"==typeof(me=he.payload)){q=me.call(pe,q,Z);break e}q=me;break e;case 3:me.flags=-65537&me.flags|128;case 0:if(null==(Z="function"==typeof(me=he.payload)?me.call(pe,q,Z):me))break e;q=j({},q,Z);break e;case 2:ao=!0}}null!==k.callback&&0!==k.lane&&(o.flags|=64,null===(Z=p.effects)?p.effects=[k]:Z.push(k))}else pe={eventTime:pe,lane:Z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},null===W?(O=W=pe,A=q):W=W.next=pe,y|=Z;if(null===(k=k.next)){if(null===(k=p.shared.pending))break;k=(Z=k).next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}if(null===W&&(A=q),p.baseState=A,p.firstBaseUpdate=O,p.lastBaseUpdate=W,null!==(a=p.shared.interleaved)){p=a;do{y|=p.lane,p=p.next}while(p!==a)}else null===h&&(p.shared.lanes=0);si|=y,o.lanes=y,o.memoizedState=q}}function Vs(o,a,c){if(o=a.effects,a.effects=null,null!==o)for(a=0;a<o.length;a++){var u=o[a],p=u.callback;if(null!==p){if(u.callback=null,u=c,"function"!=typeof p)throw Error(N(191,p));p.call(u)}}}var Yn={},En=ko(Yn),Ri=ko(Yn),kr=ko(Yn);function Eo(o){if(o===Yn)throw Error(N(174));return o}function Rl(o,a){switch(Je(kr,a),Je(Ri,o),Je(En,Yn),o=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ra(null,"");break;default:a=Ra(a=(o=8===o?a.parentNode:a).namespaceURI||null,o=o.tagName)}qe(En),Je(En,a)}function Fi(){qe(En),qe(Ri),qe(kr)}function Uu(o){Eo(kr.current);var a=Eo(En.current),c=Ra(a,o.type);a!==c&&(Je(Ri,o),Je(En,c))}function Fl(o){Ri.current===o&&(qe(En),qe(Ri))}var $e=ko(0);function co(o){for(var a=o;null!==a;){if(13===a.tag){var c=a.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ei=[];function ti(){for(var o=0;o<ei.length;o++)ei[o]._workInProgressVersionPrimary=null;ei.length=0}var Sr=rt.ReactCurrentDispatcher,ji=rt.ReactCurrentBatchConfig,In=0,Ke=null,Qe=null,gt=null,Io=!1,Mi=!1,ni=0,zp=0;function Nt(){throw Error(N(321))}function Os(o,a){if(null===a)return!1;for(var c=0;c<a.length&&c<o.length;c++)if(!wn(o[c],a[c]))return!1;return!0}function jl(o,a,c,u,p,h){if(In=h,Ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Sr.current=null===o||null===o.memoizedState?od:Ir,o=c(u,p),Mi){h=0;do{if(Mi=!1,ni=0,25<=h)throw Error(N(301));h+=1,gt=Qe=null,a.updateQueue=null,Sr.current=Tr,o=c(u,p)}while(Mi)}if(Sr.current=Gi,a=null!==Qe&&null!==Qe.next,In=0,gt=Qe=Ke=null,Io=!1,a)throw Error(N(300));return o}function zs(){var o=0!==ni;return ni=0,o}function Hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gt?Ke.memoizedState=gt=o:gt=gt.next=o,gt}function xn(){if(null===Qe){var o=Ke.alternate;o=null!==o?o.memoizedState:null}else o=Qe.next;var a=null===gt?Ke.memoizedState:gt.next;if(null!==a)gt=a,Qe=o;else{if(null===o)throw Error(N(310));o={memoizedState:(Qe=o).memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},null===gt?Ke.memoizedState=gt=o:gt=gt.next=o}return gt}function oi(o,a){return"function"==typeof a?a(o):a}function Bs(o){var a=xn(),c=a.queue;if(null===c)throw Error(N(311));c.lastRenderedReducer=o;var u=Qe,p=u.baseQueue,h=c.pending;if(null!==h){if(null!==p){var y=p.next;p.next=h.next,h.next=y}u.baseQueue=p=h,c.pending=null}if(null!==p){u=u.baseState;var k=y=null,A=null,O=h=p.next;do{var W=O.lane;if((In&W)===W)null!==A&&(A=A.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:o(u,O.action);else{var q={lane:W,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};null===A?(k=A=q,y=u):A=A.next=q,Ke.lanes|=W,si|=W}O=O.next}while(null!==O&&O!==h);null===A?y=u:A.next=k,wn(u,a.memoizedState)||(Pt=!0),a.memoizedState=u,a.baseState=y,a.baseQueue=A,c.lastRenderedState=u}if(null!==(o=c.interleaved)){p=o;do{Ke.lanes|=h=p.lane,si|=h,p=p.next}while(p!==o)}else null===p&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Ml(o){var a=xn(),c=a.queue;if(null===c)throw Error(N(311));c.lastRenderedReducer=o;var u=c.dispatch,p=c.pending,h=a.memoizedState;if(null!==p){c.pending=null;var y=p=p.next;do{h=o(h,y.action),y=y.next}while(y!==p);wn(h,a.memoizedState)||(Pt=!0),a.memoizedState=h,null===a.baseQueue&&(a.baseState=h),c.lastRenderedState=h}return[h,u]}function Wu(){}function $l(o,a){var c=Ke,u=xn(),p=a(),h=!wn(u.memoizedState,p);if(h&&(u.memoizedState=p,Pt=!0),$i(wr.bind(null,c,u=u.queue,o),[o]),u.getSnapshot!==a||h||null!==gt&&1&gt.memoizedState.tag){if(c.flags|=2048,To(9,Ls.bind(null,c,u,p,a),void 0,null),null===Tt)throw Error(N(349));30&In||Gl(c,a,p)}return p}function Gl(o,a,c){o.flags|=16384,o={getSnapshot:a,value:c},null===(a=Ke.updateQueue)?(Ke.updateQueue=a={lastEffect:null,stores:null},a.stores=[o]):null===(c=a.stores)?a.stores=[o]:c.push(o)}function Ls(o,a,c,u){a.value=c,a.getSnapshot=u,Dl(a)&&Ps(o)}function wr(o,a,c){return c(function(){Dl(a)&&Ps(o)})}function Dl(o){var a=o.getSnapshot;o=o.value;try{var c=a();return!wn(o,c)}catch{return!0}}function Ps(o){var a=so(o,1);null!==a&&Zn(a,o,1,-1)}function Nr(o){var a=Hn();return"function"==typeof o&&(o=o()),a.memoizedState=a.baseState=o,a.queue=o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:o},o=o.dispatch=Lp.bind(null,Ke,o),[a.memoizedState,o]}function To(o,a,c,u){return o={tag:o,create:a,destroy:c,deps:u,next:null},null===(a=Ke.updateQueue)?(Ke.updateQueue=a={lastEffect:null,stores:null},a.lastEffect=o.next=o):null===(c=a.lastEffect)?a.lastEffect=o.next=o:(u=c.next,c.next=o,o.next=u,a.lastEffect=o),o}function Xs(){return xn().memoizedState}function fn(o,a,c,u){var p=Hn();Ke.flags|=o,p.memoizedState=To(1|a,c,void 0,void 0===u?null:u)}function Qt(o,a,c,u){var p=xn();u=void 0===u?null:u;var h=void 0;if(null!==Qe){var y=Qe.memoizedState;if(h=y.destroy,null!==u&&Os(u,y.deps))return void(p.memoizedState=To(a,c,h,u))}Ke.flags|=o,p.memoizedState=To(1|a,c,h,u)}function Zu(o,a){return fn(8390656,8,o,a)}function $i(o,a){return Qt(2048,8,o,a)}function Ju(o,a){return Qt(4,2,o,a)}function uo(o,a){return Qt(4,4,o,a)}function Vl(o,a){return"function"==typeof a?(o=o(),a(o),function(){a(null)}):null!=a?(o=o(),a.current=o,function(){a.current=null}):void 0}function Ys(o,a,c){return c=null!=c?c.concat([o]):null,Qt(4,4,Vl.bind(null,a,o),c)}function Hs(){}function Er(o,a){var c=xn();a=void 0===a?null:a;var u=c.memoizedState;return null!==u&&null!==a&&Os(a,u[1])?u[0]:(c.memoizedState=[o,a],o)}function Ku(o,a){var c=xn();a=void 0===a?null:a;var u=c.memoizedState;return null!==u&&null!==a&&Os(a,u[1])?u[0]:(o=o(),c.memoizedState=[o,a],o)}function qu(o,a,c){return 21&In?(wn(c,a)||(c=Xc(),Ke.lanes|=c,si|=c,o.baseState=!0),a):(o.baseState&&(o.baseState=!1,Pt=!0),o.memoizedState=c)}function Qu(o,a){var c=Le;Le=0!==c&&4>c?c:4,o(!0);var u=ji.transition;ji.transition={};try{o(!1),a()}finally{Le=c,ji.transition=u}}function ed(){return xn().memoizedState}function Bp(o,a,c){var u=ai(o);c={lane:u,action:c,hasEagerState:!1,eagerState:null,next:null},td(o)?nd(a,c):null!==(c=Yu(o,a,c,u))&&(Zn(c,o,u,at()),Us(c,a,u))}function Lp(o,a,c){var u=ai(o),p={lane:u,action:c,hasEagerState:!1,eagerState:null,next:null};if(td(o))nd(a,p);else{var h=o.alternate;if(0===o.lanes&&(null===h||0===h.lanes)&&null!==(h=a.lastRenderedReducer))try{var y=a.lastRenderedState,k=h(y,c);if(p.hasEagerState=!0,p.eagerState=k,wn(k,y)){var A=a.interleaved;return null===A?(p.next=p,Tl(a)):(p.next=A.next,A.next=p),void(a.interleaved=p)}}catch{}null!==(c=Yu(o,a,p,u))&&(Zn(c,o,u,p=at()),Us(c,a,u))}}function td(o){var a=o.alternate;return o===Ke||null!==a&&a===Ke}function nd(o,a){Mi=Io=!0;var c=o.pending;null===c?a.next=a:(a.next=c.next,c.next=a),o.pending=a}function Us(o,a,c){if(4194240&c){var u=a.lanes;a.lanes=c|=u&=o.pendingLanes,fs(o,c)}}var Gi={readContext:pn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},od={readContext:pn,useCallback:function(o,a){return Hn().memoizedState=[o,void 0===a?null:a],o},useContext:pn,useEffect:Zu,useImperativeHandle:function(o,a,c){return c=null!=c?c.concat([o]):null,fn(4194308,4,Vl.bind(null,a,o),c)},useLayoutEffect:function(o,a){return fn(4194308,4,o,a)},useInsertionEffect:function(o,a){return fn(4,2,o,a)},useMemo:function(o,a){var c=Hn();return a=void 0===a?null:a,o=o(),c.memoizedState=[o,a],o},useReducer:function(o,a,c){var u=Hn();return a=void 0!==c?c(a):a,u.memoizedState=u.baseState=a,u.queue=o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},o=o.dispatch=Bp.bind(null,Ke,o),[u.memoizedState,o]},useRef:function(o){return Hn().memoizedState={current:o}},useState:Nr,useDebugValue:Hs,useDeferredValue:function(o){return Hn().memoizedState=o},useTransition:function(){var o=Nr(!1),a=o[0];return o=Qu.bind(null,o[1]),Hn().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,c){var u=Ke,p=Hn();if(ot){if(void 0===c)throw Error(N(407));c=c()}else{if(c=a(),null===Tt)throw Error(N(349));30&In||Gl(u,a,c)}p.memoizedState=c;var h={value:c,getSnapshot:a};return p.queue=h,Zu(wr.bind(null,u,h,o),[o]),u.flags|=2048,To(9,Ls.bind(null,u,h,c,a),void 0,null),c},useId:function(){var o=Hn(),a=Tt.identifierPrefix;if(ot){var c=ro;a=":"+a+"R"+(c=(Xn&~(1<<32-Sn(Xn)-1)).toString(32)+c),0<(c=ni++)&&(a+="H"+c.toString(32)),a+=":"}else a=":"+a+"r"+(c=zp++).toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},Ir={readContext:pn,useCallback:Er,useContext:pn,useEffect:$i,useImperativeHandle:Ys,useInsertionEffect:Ju,useLayoutEffect:uo,useMemo:Ku,useReducer:Bs,useRef:Xs,useState:function(){return Bs(oi)},useDebugValue:Hs,useDeferredValue:function(o){return qu(xn(),Qe.memoizedState,o)},useTransition:function(){return[Bs(oi)[0],xn().memoizedState]},useMutableSource:Wu,useSyncExternalStore:$l,useId:ed,unstable_isNewReconciler:!1},Tr={readContext:pn,useCallback:Er,useContext:pn,useEffect:$i,useImperativeHandle:Ys,useInsertionEffect:Ju,useLayoutEffect:uo,useMemo:Ku,useReducer:Ml,useRef:Xs,useState:function(){return Ml(oi)},useDebugValue:Hs,useDeferredValue:function(o){var a=xn();return null===Qe?a.memoizedState=o:qu(a,Qe.memoizedState,o)},useTransition:function(){return[Ml(oi)[0],xn().memoizedState]},useMutableSource:Wu,useSyncExternalStore:$l,useId:ed,unstable_isNewReconciler:!1};function en(o,a){if(o&&o.defaultProps){for(var c in a=j({},a),o=o.defaultProps)void 0===a[c]&&(a[c]=o[c]);return a}return a}function Ao(o,a,c,u){c=null==(c=c(u,a=o.memoizedState))?a:j({},a,c),o.memoizedState=c,0===o.lanes&&(o.updateQueue.baseState=c)}var Ro={isMounted:function(o){return!!(o=o._reactInternals)&&Uo(o)===o},enqueueSetState:function(o,a,c){o=o._reactInternals;var u=at(),p=ai(o),h=lo(u,p);h.payload=a,null!=c&&(h.callback=c),null!==(a=bn(o,h,p))&&(Zn(a,o,p,u),qt(a,o,p))},enqueueReplaceState:function(o,a,c){o=o._reactInternals;var u=at(),p=ai(o),h=lo(u,p);h.tag=1,h.payload=a,null!=c&&(h.callback=c),null!==(a=bn(o,h,p))&&(Zn(a,o,p,u),qt(a,o,p))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var c=at(),u=ai(o),p=lo(c,u);p.tag=2,null!=a&&(p.callback=a),null!==(a=bn(o,p,u))&&(Zn(a,o,u,c),qt(a,o,u))}};function Tn(o,a,c,u,p,h,y){return"function"==typeof(o=o.stateNode).shouldComponentUpdate?o.shouldComponentUpdate(u,h,y):!(a.prototype&&a.prototype.isPureReactComponent&&fr(c,u)&&fr(p,h))}function id(o,a,c){var u=!1,p=Pn,h=a.contextType;return"object"==typeof h&&null!==h?h=pn(h):(p=Jt(a)?Ko:Mt.current,h=(u=null!=(u=a.contextTypes))?ki(o,p):Pn),a=new a(c,h),o.memoizedState=null!=a.state?a.state:null,a.updater=Ro,o.stateNode=a,a._reactInternals=o,u&&((o=o.stateNode).__reactInternalMemoizedUnmaskedChildContext=p,o.__reactInternalMemoizedMaskedChildContext=h),a}function rd(o,a,c,u){o=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(c,u),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(c,u),a.state!==o&&Ro.enqueueReplaceState(a,a.state,null)}function Ol(o,a,c,u){var p=o.stateNode;p.props=c,p.state=o.memoizedState,p.refs={},Lt(o);var h=a.contextType;"object"==typeof h&&null!==h?p.context=pn(h):(h=Jt(a)?Ko:Mt.current,p.context=ki(o,h)),p.state=o.memoizedState,"function"==typeof(h=a.getDerivedStateFromProps)&&(Ao(o,a,h,c),p.state=o.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof p.getSnapshotBeforeUpdate||"function"!=typeof p.UNSAFE_componentWillMount&&"function"!=typeof p.componentWillMount||(a=p.state,"function"==typeof p.componentWillMount&&p.componentWillMount(),"function"==typeof p.UNSAFE_componentWillMount&&p.UNSAFE_componentWillMount(),a!==p.state&&Ro.enqueueReplaceState(p,p.state,null),No(o,c,p,u),p.state=o.memoizedState),"function"==typeof p.componentDidMount&&(o.flags|=4194308)}function Di(o,a){try{var c="",u=a;do{c+=He(u),u=u.return}while(u);var p=c}catch(h){p="\nError generating stack: "+h.message+"\n"+h.stack}return{value:o,source:a,stack:p,digest:null}}function zl(o,a,c){return{value:o,source:null,stack:c??null,digest:a??null}}function Bl(o,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var Pp="function"==typeof WeakMap?WeakMap:Map;function Ll(o,a,c){(c=lo(-1,c)).tag=3,c.payload={element:null};var u=a.value;return c.callback=function(){ea||(ea=!0,lc=u),Bl(0,a)},c}function Pl(o,a,c){(c=lo(-1,c)).tag=3;var u=o.type.getDerivedStateFromError;if("function"==typeof u){var p=a.value;c.payload=function(){return u(p)},c.callback=function(){Bl(0,a)}}var h=o.stateNode;return null!==h&&"function"==typeof h.componentDidCatch&&(c.callback=function(){Bl(0,a),"function"!=typeof u&&(null===Mo?Mo=new Set([this]):Mo.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:null!==y?y:""})}),c}function sd(o,a,c){var u=o.pingCache;if(null===u){u=o.pingCache=new Pp;var p=new Set;u.set(a,p)}else void 0===(p=u.get(a))&&u.set(a,p=new Set);p.has(c)||(p.add(c),o=Qp.bind(null,o,a,c),a.then(o,o))}function ad(o){do{var a;if((a=13===o.tag)&&(a=null===(a=o.memoizedState)||null!==a.dehydrated),a)return o;o=o.return}while(null!==o);return null}function Xl(o,a,c,u,p){return 1&o.mode?(o.flags|=65536,o.lanes=p,o):(o===a?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:((a=lo(-1,1)).tag=2,bn(c,a,1))),c.lanes|=1),o)}var Ar=rt.ReactCurrentOwner,Pt=!1;function It(o,a,c,u){a.child=null===o?Xu(a,null,c,u):Ii(a,o.child,c,u)}function ld(o,a,c,u,p){c=c.render;var h=a.ref;return Ai(a,p),u=jl(o,a,c,u,h,p),c=zs(),null===o||Pt?(ot&&c&&bl(a),a.flags|=1,It(o,a,u,p),a.child):(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~p,Un(o,a,p))}function Rr(o,a,c,u,p){if(null===o){var h=c.type;return"function"!=typeof h||pc(h)||void 0!==h.defaultProps||null!==c.compare||void 0!==c.defaultProps?((o=la(c.type,null,u,a,a.mode,p)).ref=a.ref,o.return=a,a.child=o):(a.tag=15,a.type=h,Xt(o,a,h,u,p))}return h=o.child,o.lanes&p||!(c=null!==(c=c.compare)?c:fr)(h.memoizedProps,u)||o.ref!==a.ref?(a.flags|=1,(o=Do(h,u)).ref=a.ref,o.return=a,a.child=o):Un(o,a,p)}function Xt(o,a,c,u,p){if(null!==o){var h=o.memoizedProps;if(fr(h,u)&&o.ref===a.ref){if(Pt=!1,a.pendingProps=u=h,!(o.lanes&p))return a.lanes=o.lanes,Un(o,a,p);131072&o.flags&&(Pt=!0)}}return Ws(o,a,c,u,p)}function Yl(o,a,c){var u=a.pendingProps,p=u.children,h=null!==o?o.memoizedState:null;if("hidden"===u.mode)if(1&a.mode){if(!(1073741824&c))return o=null!==h?h.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,Je(zi,mn),mn|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=null!==h?h.baseLanes:c,Je(zi,mn),mn|=u}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(zi,mn),mn|=c;else null!==h?(u=h.baseLanes|c,a.memoizedState=null):u=c,Je(zi,mn),mn|=u;return It(o,a,p,c),a.child}function cd(o,a){var c=a.ref;(null===o&&null!==c||null!==o&&o.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Ws(o,a,c,u,p){var h=Jt(c)?Ko:Mt.current;return h=ki(a,h),Ai(a,p),c=jl(o,a,c,u,h,p),u=zs(),null===o||Pt?(ot&&u&&bl(a),a.flags|=1,It(o,a,c,p),a.child):(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~p,Un(o,a,p))}function Fr(o,a,c,u,p){if(Jt(c)){var h=!0;Rs(a)}else h=!1;if(Ai(a,p),null===a.stateNode)jr(o,a),id(a,c,u),Ol(a,c,u,p),u=!0;else if(null===o){var y=a.stateNode,k=a.memoizedProps;y.props=k;var A=y.context,O=c.contextType;O="object"==typeof O&&null!==O?pn(O):ki(a,O=Jt(c)?Ko:Mt.current);var W=c.getDerivedStateFromProps,q="function"==typeof W||"function"==typeof y.getSnapshotBeforeUpdate;q||"function"!=typeof y.UNSAFE_componentWillReceiveProps&&"function"!=typeof y.componentWillReceiveProps||(k!==u||A!==O)&&rd(a,y,u,O),ao=!1;var Z=a.memoizedState;y.state=Z,No(a,u,y,p),A=a.memoizedState,k!==u||Z!==A||$t.current||ao?("function"==typeof W&&(Ao(a,c,W,u),A=a.memoizedState),(k=ao||Tn(a,c,k,u,Z,A,O))?(q||"function"!=typeof y.UNSAFE_componentWillMount&&"function"!=typeof y.componentWillMount||("function"==typeof y.componentWillMount&&y.componentWillMount(),"function"==typeof y.UNSAFE_componentWillMount&&y.UNSAFE_componentWillMount()),"function"==typeof y.componentDidMount&&(a.flags|=4194308)):("function"==typeof y.componentDidMount&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=A),y.props=u,y.state=A,y.context=O,u=k):("function"==typeof y.componentDidMount&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,Al(o,a),k=a.memoizedProps,O=a.type===a.elementType?k:en(a.type,k),y.props=O,q=a.pendingProps,Z=y.context,A="object"==typeof(A=c.contextType)&&null!==A?pn(A):ki(a,A=Jt(c)?Ko:Mt.current);var pe=c.getDerivedStateFromProps;(W="function"==typeof pe||"function"==typeof y.getSnapshotBeforeUpdate)||"function"!=typeof y.UNSAFE_componentWillReceiveProps&&"function"!=typeof y.componentWillReceiveProps||(k!==q||Z!==A)&&rd(a,y,u,A),ao=!1,y.state=Z=a.memoizedState,No(a,u,y,p);var me=a.memoizedState;k!==q||Z!==me||$t.current||ao?("function"==typeof pe&&(Ao(a,c,pe,u),me=a.memoizedState),(O=ao||Tn(a,c,O,u,Z,me,A)||!1)?(W||"function"!=typeof y.UNSAFE_componentWillUpdate&&"function"!=typeof y.componentWillUpdate||("function"==typeof y.componentWillUpdate&&y.componentWillUpdate(u,me,A),"function"==typeof y.UNSAFE_componentWillUpdate&&y.UNSAFE_componentWillUpdate(u,me,A)),"function"==typeof y.componentDidUpdate&&(a.flags|=4),"function"==typeof y.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof y.componentDidUpdate||k===o.memoizedProps&&Z===o.memoizedState||(a.flags|=4),"function"!=typeof y.getSnapshotBeforeUpdate||k===o.memoizedProps&&Z===o.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=me),y.props=u,y.state=me,y.context=A,u=O):("function"!=typeof y.componentDidUpdate||k===o.memoizedProps&&Z===o.memoizedState||(a.flags|=4),"function"!=typeof y.getSnapshotBeforeUpdate||k===o.memoizedProps&&Z===o.memoizedState||(a.flags|=1024),u=!1)}return po(o,a,c,u,h,p)}function po(o,a,c,u,p,h){cd(o,a);var y=!!(128&a.flags);if(!u&&!y)return p&&vl(a,c,!1),Un(o,a,h);u=a.stateNode,Ar.current=a;var k=y&&"function"!=typeof c.getDerivedStateFromError?null:u.render();return a.flags|=1,null!==o&&y?(a.child=Ii(a,o.child,null,h),a.child=Ii(a,null,k,h)):It(o,a,k,h),a.memoizedState=u.state,p&&vl(a,c,!0),a.child}function Fo(o){var a=o.stateNode;a.pendingContext?ju(0,a.pendingContext,a.pendingContext!==a.context):a.context&&ju(0,a.context,!1),Rl(o,a.containerInfo)}function Hl(o,a,c,u,p){return Ei(),Sl(p),a.flags|=256,It(o,a,c,u),a.child}var Yp,Kl,ql,Ql,Zs={dehydrated:null,treeContext:null,retryLane:0};function Ul(o){return{baseLanes:o,cachePool:null,transitions:null}}function Cn(o,a,c){var k,u=a.pendingProps,p=$e.current,h=!1,y=!!(128&a.flags);if((k=y)||(k=(null===o||null!==o.memoizedState)&&!!(2&p)),k?(h=!0,a.flags&=-129):(null===o||null!==o.memoizedState)&&(p|=1),Je($e,1&p),null===o)return kl(a),null!==(o=a.memoizedState)&&null!==(o=o.dehydrated)?(a.lanes=1&a.mode?"$!"===o.data?8:1073741824:1,null):(y=u.children,o=u.fallback,h?(h=a.child,y={mode:"hidden",children:y},1&(u=a.mode)||null===h?h=Pi(y,u,0,null):(h.childLanes=0,h.pendingProps=y),o=ci(o,u,c,null),h.return=a,o.return=a,h.sibling=o,a.child=h,a.child.memoizedState=Ul(c),a.memoizedState=Zs,o):Js(a,y));if(null!==(p=o.memoizedState)&&null!==(k=p.dehydrated))return function Wl(o,a,c,u,p,h,y){if(c)return 256&a.flags?(a.flags&=-257,ii(o,a,y,u=zl(Error(N(422))))):null!==a.memoizedState?(a.child=o.child,a.flags|=128,null):(h=u.fallback,u=Pi({mode:"visible",children:u.children},p=a.mode,0,null),(h=ci(h,p,y,null)).flags|=2,u.return=a,h.return=a,u.sibling=h,a.child=u,1&a.mode&&Ii(a,o.child,null,y),a.child.memoizedState=Ul(y),a.memoizedState=Zs,h);if(!(1&a.mode))return ii(o,a,y,null);if("$!"===p.data){if(u=p.nextSibling&&p.nextSibling.dataset)var k=u.dgst;return u=k,ii(o,a,y,u=zl(h=Error(N(419)),u,void 0))}if(k=!!(y&o.childLanes),Pt||k){if(null!==(u=Tt)){switch(y&-y){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}0!==(p=p&(u.suspendedLanes|y)?0:p)&&p!==h.retryLane&&(h.retryLane=p,so(o,p),Zn(u,o,p,-1))}return ra(),ii(o,a,y,u=zl(Error(N(421))))}return"$?"===p.data?(a.flags|=128,a.child=o.child,a=aa.bind(null,o),p._reactRetry=a,null):(o=h.treeContext,dn=Co(p.nextSibling),un=a,ot=!0,Nn=null,null!==o&&(Kt[cn++]=Xn,Kt[cn++]=ro,Kt[cn++]=wo,Xn=o.id,ro=o.overflow,wo=a),(a=Js(a,u.children)).flags|=4096,a)}(o,a,y,u,k,p,c);if(h){h=u.fallback,k=(p=o.child).sibling;var A={mode:"hidden",children:u.children};return 1&(y=a.mode)||a.child===p?(u=Do(p,A)).subtreeFlags=14680064&p.subtreeFlags:((u=a.child).childLanes=0,u.pendingProps=A,a.deletions=null),null!==k?h=Do(k,h):(h=ci(h,y,c,null)).flags|=2,h.return=a,u.return=a,u.sibling=h,a.child=u,u=h,h=a.child,y=null===(y=o.child.memoizedState)?Ul(c):{baseLanes:y.baseLanes|c,cachePool:null,transitions:y.transitions},h.memoizedState=y,h.childLanes=o.childLanes&~c,a.memoizedState=Zs,u}return o=(h=o.child).sibling,u=Do(h,{mode:"visible",children:u.children}),!(1&a.mode)&&(u.lanes=c),u.return=a,u.sibling=null,null!==o&&(null===(c=a.deletions)?(a.deletions=[o],a.flags|=16):c.push(o)),a.child=u,a.memoizedState=null,u}function Js(o,a){return(a=Pi({mode:"visible",children:a},o.mode,0,null)).return=o,o.child=a}function ii(o,a,c,u){return null!==u&&Sl(u),Ii(a,o.child,null,c),(o=Js(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,o}function Zl(o,a,c){o.lanes|=a;var u=o.alternate;null!==u&&(u.lanes|=a),Il(o.return,a,c)}function Jl(o,a,c,u,p){var h=o.memoizedState;null===h?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:p}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=c,h.tailMode=p)}function ud(o,a,c){var u=a.pendingProps,p=u.revealOrder,h=u.tail;if(It(o,a,u.children,c),2&(u=$e.current))u=1&u|2,a.flags|=128;else{if(null!==o&&128&o.flags)e:for(o=a.child;null!==o;){if(13===o.tag)null!==o.memoizedState&&Zl(o,c,a);else if(19===o.tag)Zl(o,c,a);else if(null!==o.child){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;null===o.sibling;){if(null===o.return||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}u&=1}if(Je($e,u),1&a.mode)switch(p){case"forwards":for(c=a.child,p=null;null!==c;)null!==(o=c.alternate)&&null===co(o)&&(p=c),c=c.sibling;null===(c=p)?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),Jl(a,!1,p,c,h);break;case"backwards":for(c=null,p=a.child,a.child=null;null!==p;){if(null!==(o=p.alternate)&&null===co(o)){a.child=p;break}o=p.sibling,p.sibling=c,c=p,p=o}Jl(a,!0,c,null,h);break;case"together":Jl(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function jr(o,a){!(1&a.mode)&&null!==o&&(o.alternate=null,a.alternate=null,a.flags|=2)}function Un(o,a,c){if(null!==o&&(a.dependencies=o.dependencies),si|=a.lanes,!(c&a.childLanes))return null;if(null!==o&&a.child!==o.child)throw Error(N(153));if(null!==a.child){for(c=Do(o=a.child,o.pendingProps),a.child=c,c.return=a;null!==o.sibling;)(c=c.sibling=Do(o=o.sibling,o.pendingProps)).return=a;c.sibling=null}return a.child}function Vi(o,a){if(!ot)switch(o.tailMode){case"hidden":a=o.tail;for(var c=null;null!==a;)null!==a.alternate&&(c=a),a=a.sibling;null===c?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var u=null;null!==c;)null!==c.alternate&&(u=c),c=c.sibling;null===u?a||null===o.tail?o.tail=null:o.tail.sibling=null:u.sibling=null}}function Yt(o){var a=null!==o.alternate&&o.alternate.child===o.child,c=0,u=0;if(a)for(var p=o.child;null!==p;)c|=p.lanes|p.childLanes,u|=14680064&p.subtreeFlags,u|=14680064&p.flags,p.return=o,p=p.sibling;else for(p=o.child;null!==p;)c|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=o,p=p.sibling;return o.subtreeFlags|=u,o.childLanes=c,a}function Mf(o,a,c){var u=a.pendingProps;switch(xl(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:case 17:return Jt(a.type)&&As(),Yt(a),null;case 3:return u=a.stateNode,Fi(),qe($t),qe(Mt),ti(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(null===o||null===o.child)&&(Ms(a)?a.flags|=4:null===o||o.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==Nn&&(uc(Nn),Nn=null))),Kl(o,a),Yt(a),null;case 5:Fl(a);var p=Eo(kr.current);if(c=a.type,null!==o&&null!=a.stateNode)ql(o,a,c,u,p),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!u){if(null===a.stateNode)throw Error(N(166));return Yt(a),null}if(o=Eo(En.current),Ms(a)){c=a.type;var h=a.memoizedProps;switch((u=a.stateNode)[Ln]=a,u[yr]=h,o=!!(1&a.mode),c){case"dialog":Ze("cancel",u),Ze("close",u);break;case"iframe":case"object":case"embed":Ze("load",u);break;case"video":case"audio":for(p=0;p<gi.length;p++)Ze(gi[p],u);break;case"source":Ze("error",u);break;case"img":case"image":case"link":Ze("error",u),Ze("load",u);break;case"details":Ze("toggle",u);break;case"input":Cc(u,h),Ze("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!h.multiple},Ze("invalid",u);break;case"textarea":wc(u,h),Ze("invalid",u)}for(var y in Fa(c,h),p=null,h)if(h.hasOwnProperty(y)){var k=h[y];"children"===y?"string"==typeof k?u.textContent!==k&&(!0!==h.suppressHydrationWarning&&Es(u.textContent,k,o),p=["children",k]):"number"==typeof k&&u.textContent!==""+k&&(!0!==h.suppressHydrationWarning&&Es(u.textContent,k,o),p=["children",""+k]):kt.hasOwnProperty(y)&&null!=k&&"onScroll"===y&&Ze("scroll",u)}switch(c){case"input":os(u),Sc(u,h,!0);break;case"textarea":os(u),On(u);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(u.onclick=Is)}a.updateQueue=u=p,null!==u&&(a.flags|=4)}else{y=9===p.nodeType?p:p.ownerDocument,"http://www.w3.org/1999/xhtml"===o&&(o=Ec(c)),"http://www.w3.org/1999/xhtml"===o?"script"===c?((o=y.createElement("div")).innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):"string"==typeof u.is?o=y.createElement(c,{is:u.is}):(o=y.createElement(c),"select"===c&&(y=o,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):o=y.createElementNS(o,c),o[Ln]=a,o[yr]=u,Yp(o,a,!1,!1),a.stateNode=o;e:{switch(y=ja(c,u),c){case"dialog":Ze("cancel",o),Ze("close",o),p=u;break;case"iframe":case"object":case"embed":Ze("load",o),p=u;break;case"video":case"audio":for(p=0;p<gi.length;p++)Ze(gi[p],o);p=u;break;case"source":Ze("error",o),p=u;break;case"img":case"image":case"link":Ze("error",o),Ze("load",o),p=u;break;case"details":Ze("toggle",o),p=u;break;case"input":Cc(o,u),p=Ia(o,u),Ze("invalid",o);break;case"option":default:p=u;break;case"select":o._wrapperState={wasMultiple:!!u.multiple},p=j({},u,{value:void 0}),Ze("invalid",o);break;case"textarea":wc(o,u),p=Et(o,u),Ze("invalid",o)}for(h in Fa(c,p),k=p)if(k.hasOwnProperty(h)){var A=k[h];"style"===h?Ac(o,A):"dangerouslySetInnerHTML"===h?null!=(A=A?A.__html:void 0)&&Ic(o,A):"children"===h?"string"==typeof A?("textarea"!==c||""!==A)&&Zi(o,A):"number"==typeof A&&Zi(o,""+A):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(kt.hasOwnProperty(h)?null!=A&&"onScroll"===h&&Ze("scroll",o):null!=A&&At(o,h,A,y))}switch(c){case"input":os(o),Sc(o,u,!1);break;case"textarea":os(o),On(o);break;case"option":null!=u.value&&o.setAttribute("value",""+ze(u.value));break;case"select":o.multiple=!!u.multiple,null!=(h=u.value)?Ho(o,!!u.multiple,h,!1):null!=u.defaultValue&&Ho(o,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof p.onClick&&(o.onclick=Is)}switch(c){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}return Yt(a),null;case 6:if(o&&null!=a.stateNode)Ql(o,a,o.memoizedProps,u);else{if("string"!=typeof u&&null===a.stateNode)throw Error(N(166));if(c=Eo(kr.current),Eo(En.current),Ms(a)){if(c=a.memoizedProps,(u=a.stateNode)[Ln]=a,(h=u.nodeValue!==c)&&null!==(o=un))switch(o.tag){case 3:Es(u.nodeValue,c,!!(1&o.mode));break;case 5:!0!==o.memoizedProps.suppressHydrationWarning&&Es(u.nodeValue,c,!!(1&o.mode))}h&&(a.flags|=4)}else(u=(9===c.nodeType?c:c.ownerDocument).createTextNode(u))[Ln]=a,a.stateNode=u}return Yt(a),null;case 13:if(qe($e),u=a.memoizedState,null===o||null!==o.memoizedState&&null!==o.memoizedState.dehydrated){if(ot&&null!==dn&&1&a.mode&&!(128&a.flags))zu(),Ei(),a.flags|=98560,h=!1;else if(h=Ms(a),null!==u&&null!==u.dehydrated){if(null===o){if(!h)throw Error(N(318));if(!(h=null!==(h=a.memoizedState)?h.dehydrated:null))throw Error(N(317));h[Ln]=a}else Ei(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;Yt(a),h=!1}else null!==Nn&&(uc(Nn),Nn=null),h=!0;if(!h)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=c,a):((u=null!==u)!=(null!==o&&null!==o.memoizedState)&&u&&(a.child.flags|=8192,1&a.mode&&(null===o||1&$e.current?0===bt&&(bt=3):ra())),null!==a.updateQueue&&(a.flags|=4),Yt(a),null);case 4:return Fi(),Kl(o,a),null===o&&Zo(a.stateNode.containerInfo),Yt(a),null;case 10:return El(a.type._context),Yt(a),null;case 19:if(qe($e),null===(h=a.memoizedState))return Yt(a),null;if(u=!!(128&a.flags),null===(y=h.rendering))if(u)Vi(h,!1);else{if(0!==bt||null!==o&&128&o.flags)for(o=a.child;null!==o;){if(null!==(y=co(o))){for(a.flags|=128,Vi(h,!1),null!==(u=y.updateQueue)&&(a.updateQueue=u,a.flags|=4),a.subtreeFlags=0,u=c,c=a.child;null!==c;)o=u,(h=c).flags&=14680066,null===(y=h.alternate)?(h.childLanes=0,h.lanes=o,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=y.childLanes,h.lanes=y.lanes,h.child=y.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=y.memoizedProps,h.memoizedState=y.memoizedState,h.updateQueue=y.updateQueue,h.type=y.type,h.dependencies=null===(o=y.dependencies)?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return Je($e,1&$e.current|2),a.child}o=o.sibling}null!==h.tail&&ht()>Bi&&(a.flags|=128,u=!0,Vi(h,!1),a.lanes=4194304)}else{if(!u)if(null!==(o=co(y))){if(a.flags|=128,u=!0,null!==(c=o.updateQueue)&&(a.updateQueue=c,a.flags|=4),Vi(h,!0),null===h.tail&&"hidden"===h.tailMode&&!y.alternate&&!ot)return Yt(a),null}else 2*ht()-h.renderingStartTime>Bi&&1073741824!==c&&(a.flags|=128,u=!0,Vi(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(null!==(c=h.last)?c.sibling=y:a.child=y,h.last=y)}return null!==h.tail?(h.rendering=a=h.tail,h.tail=a.sibling,h.renderingStartTime=ht(),a.sibling=null,c=$e.current,Je($e,u?1&c|2:1&c),a):(Yt(a),null);case 22:case 23:return Or(),u=null!==a.memoizedState,null!==o&&null!==o.memoizedState!==u&&(a.flags|=8192),u&&1&a.mode?1073741824&mn&&(Yt(a),6&a.subtreeFlags&&(a.flags|=8192)):Yt(a),null;case 24:case 25:return null}throw Error(N(156,a.tag))}function ec(o,a){switch(xl(a),a.tag){case 1:return Jt(a.type)&&As(),65536&(o=a.flags)?(a.flags=-65537&o|128,a):null;case 3:return Fi(),qe($t),qe(Mt),ti(),65536&(o=a.flags)&&!(128&o)?(a.flags=-65537&o|128,a):null;case 5:return Fl(a),null;case 13:if(qe($e),null!==(o=a.memoizedState)&&null!==o.dehydrated){if(null===a.alternate)throw Error(N(340));Ei()}return 65536&(o=a.flags)?(a.flags=-65537&o|128,a):null;case 19:return qe($e),null;case 4:return Fi(),null;case 10:return El(a.type._context),null;case 22:case 23:return Or(),null;default:return null}}Yp=function(o,a){for(var c=a.child;null!==c;){if(5===c.tag||6===c.tag)o.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Kl=function(){},ql=function(o,a,c,u){var p=o.memoizedProps;if(p!==u){o=a.stateNode,Eo(En.current);var y,h=null;switch(c){case"input":p=Ia(o,p),u=Ia(o,u),h=[];break;case"select":p=j({},p,{value:void 0}),u=j({},u,{value:void 0}),h=[];break;case"textarea":p=Et(o,p),u=Et(o,u),h=[];break;default:"function"!=typeof p.onClick&&"function"==typeof u.onClick&&(o.onclick=Is)}for(O in Fa(c,u),c=null,p)if(!u.hasOwnProperty(O)&&p.hasOwnProperty(O)&&null!=p[O])if("style"===O){var k=p[O];for(y in k)k.hasOwnProperty(y)&&(c||(c={}),c[y]="")}else"dangerouslySetInnerHTML"!==O&&"children"!==O&&"suppressContentEditableWarning"!==O&&"suppressHydrationWarning"!==O&&"autoFocus"!==O&&(kt.hasOwnProperty(O)?h||(h=[]):(h=h||[]).push(O,null));for(O in u){var A=u[O];if(k=p?.[O],u.hasOwnProperty(O)&&A!==k&&(null!=A||null!=k))if("style"===O)if(k){for(y in k)!k.hasOwnProperty(y)||A&&A.hasOwnProperty(y)||(c||(c={}),c[y]="");for(y in A)A.hasOwnProperty(y)&&k[y]!==A[y]&&(c||(c={}),c[y]=A[y])}else c||(h||(h=[]),h.push(O,c)),c=A;else"dangerouslySetInnerHTML"===O?(k=k?k.__html:void 0,null!=(A=A?A.__html:void 0)&&k!==A&&(h=h||[]).push(O,A)):"children"===O?"string"!=typeof A&&"number"!=typeof A||(h=h||[]).push(O,""+A):"suppressContentEditableWarning"!==O&&"suppressHydrationWarning"!==O&&(kt.hasOwnProperty(O)?(null!=A&&"onScroll"===O&&Ze("scroll",o),h||k===A||(h=[])):(h=h||[]).push(O,A))}c&&(h=h||[]).push("style",c);var O=h;(a.updateQueue=O)&&(a.flags|=4)}},Ql=function(o,a,c,u){c!==u&&(a.flags|=4)};var Oi=!1,Ot=!1,Hp="function"==typeof WeakSet?WeakSet:Set,fe=null;function ri(o,a){var c=o.ref;if(null!==c)if("function"==typeof c)try{c(null)}catch(u){ft(o,a,u)}else c.current=null}function tc(o,a,c){try{c()}catch(u){ft(o,a,u)}}var dd=!1;function Mr(o,a,c){var u=a.updateQueue;if(null!==(u=null!==u?u.lastEffect:null)){var p=u=u.next;do{if((p.tag&o)===o){var h=p.destroy;p.destroy=void 0,void 0!==h&&tc(a,c,h)}p=p.next}while(p!==u)}}function Ks(o,a){if(null!==(a=null!==(a=a.updateQueue)?a.lastEffect:null)){var c=a=a.next;do{(c.tag&o)===o&&(c.destroy=(0,c.create)()),c=c.next}while(c!==a)}}function nc(o){var a=o.ref;null!==a&&(o=o.stateNode,"function"==typeof a?a(o):a.current=o)}function pd(o){var a=o.alternate;null!==a&&(o.alternate=null,pd(a)),o.child=null,o.deletions=null,o.sibling=null,5===o.tag&&null!==(a=o.stateNode)&&(delete a[Ln],delete a[yr],delete a[hl],delete a[Vp],delete a[Op]),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function fd(o){return 5===o.tag||3===o.tag||4===o.tag}function md(o){e:for(;;){for(;null===o.sibling;){if(null===o.return||fd(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;5!==o.tag&&6!==o.tag&&18!==o.tag;){if(2&o.flags||null===o.child||4===o.tag)continue e;o.child.return=o,o=o.child}if(!(2&o.flags))return o.stateNode}}function oc(o,a,c){var u=o.tag;if(5===u||6===u)o=o.stateNode,a?8===c.nodeType?c.parentNode.insertBefore(o,a):c.insertBefore(o,a):(8===c.nodeType?(a=c.parentNode).insertBefore(o,c):(a=c).appendChild(o),null!=(c=c._reactRootContainer)||null!==a.onclick||(a.onclick=Is));else if(4!==u&&null!==(o=o.child))for(oc(o,a,c),o=o.sibling;null!==o;)oc(o,a,c),o=o.sibling}function ic(o,a,c){var u=o.tag;if(5===u||6===u)o=o.stateNode,a?c.insertBefore(o,a):c.appendChild(o);else if(4!==u&&null!==(o=o.child))for(ic(o,a,c),o=o.sibling;null!==o;)ic(o,a,c),o=o.sibling}var Gt=null,An=!1;function jo(o,a,c){for(c=c.child;null!==c;)_d(o,a,c),c=c.sibling}function _d(o,a,c){if(zn&&"function"==typeof zn.onCommitFiberUnmount)try{zn.onCommitFiberUnmount(cs,c)}catch{}switch(c.tag){case 5:Ot||ri(c,a);case 6:var u=Gt,p=An;Gt=null,jo(o,a,c),An=p,null!==(Gt=u)&&(An?(c=c.stateNode,8===(o=Gt).nodeType?o.parentNode.removeChild(c):o.removeChild(c)):Gt.removeChild(c.stateNode));break;case 18:null!==Gt&&(An?(c=c.stateNode,8===(o=Gt).nodeType?yi(o.parentNode,c):1===o.nodeType&&yi(o,c),rr(o)):yi(Gt,c.stateNode));break;case 4:u=Gt,p=An,Gt=c.stateNode.containerInfo,An=!0,jo(o,a,c),Gt=u,An=p;break;case 0:case 11:case 14:case 15:if(!Ot&&null!==(u=c.updateQueue)&&null!==(u=u.lastEffect)){p=u=u.next;do{var h=p,y=h.destroy;h=h.tag,void 0!==y&&(2&h||4&h)&&tc(c,a,y),p=p.next}while(p!==u)}jo(o,a,c);break;case 1:if(!Ot&&(ri(c,a),"function"==typeof(u=c.stateNode).componentWillUnmount))try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(k){ft(c,a,k)}jo(o,a,c);break;case 21:jo(o,a,c);break;case 22:1&c.mode?(Ot=(u=Ot)||null!==c.memoizedState,jo(o,a,c),Ot=u):jo(o,a,c);break;default:jo(o,a,c)}}function hd(o){var a=o.updateQueue;if(null!==a){o.updateQueue=null;var c=o.stateNode;null===c&&(c=o.stateNode=new Hp),a.forEach(function(u){var p=tf.bind(null,o,u);c.has(u)||(c.add(u),u.then(p,p))})}}function Rn(o,a){var c=a.deletions;if(null!==c)for(var u=0;u<c.length;u++){var p=c[u];try{var h=o,y=a,k=y;e:for(;null!==k;){switch(k.tag){case 5:Gt=k.stateNode,An=!1;break e;case 3:case 4:Gt=k.stateNode.containerInfo,An=!0;break e}k=k.return}if(null===Gt)throw Error(N(160));_d(h,y,p),Gt=null,An=!1;var A=p.alternate;null!==A&&(A.return=null),p.return=null}catch(O){ft(p,a,O)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)gd(a,o),a=a.sibling}function gd(o,a){var c=o.alternate,u=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Rn(a,o),Wn(o),4&u){try{Mr(3,o,o.return),Ks(3,o)}catch(he){ft(o,o.return,he)}try{Mr(5,o,o.return)}catch(he){ft(o,o.return,he)}}break;case 1:Rn(a,o),Wn(o),512&u&&null!==c&&ri(c,c.return);break;case 5:if(Rn(a,o),Wn(o),512&u&&null!==c&&ri(c,c.return),32&o.flags){var p=o.stateNode;try{Zi(p,"")}catch(he){ft(o,o.return,he)}}if(4&u&&null!=(p=o.stateNode)){var h=o.memoizedProps,y=null!==c?c.memoizedProps:h,k=o.type,A=o.updateQueue;if(o.updateQueue=null,null!==A)try{"input"===k&&"radio"===h.type&&null!=h.name&&kc(p,h),ja(k,y);var O=ja(k,h);for(y=0;y<A.length;y+=2){var W=A[y],q=A[y+1];"style"===W?Ac(p,q):"dangerouslySetInnerHTML"===W?Ic(p,q):"children"===W?Zi(p,q):At(p,W,q,O)}switch(k){case"input":Ta(p,h);break;case"textarea":Nc(p,h);break;case"select":var Z=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!h.multiple;var pe=h.value;null!=pe?Ho(p,!!h.multiple,pe,!1):Z!==!!h.multiple&&(null!=h.defaultValue?Ho(p,!!h.multiple,h.defaultValue,!0):Ho(p,!!h.multiple,h.multiple?[]:"",!1))}p[yr]=h}catch(he){ft(o,o.return,he)}}break;case 6:if(Rn(a,o),Wn(o),4&u){if(null===o.stateNode)throw Error(N(162));p=o.stateNode,h=o.memoizedProps;try{p.nodeValue=h}catch(he){ft(o,o.return,he)}}break;case 3:if(Rn(a,o),Wn(o),4&u&&null!==c&&c.memoizedState.isDehydrated)try{rr(a.containerInfo)}catch(he){ft(o,o.return,he)}break;case 4:default:Rn(a,o),Wn(o);break;case 13:Rn(a,o),Wn(o),8192&(p=o.child).flags&&(p.stateNode.isHidden=h=null!==p.memoizedState,!h||null!==p.alternate&&null!==p.alternate.memoizedState||(ac=ht())),4&u&&hd(o);break;case 22:if(W=null!==c&&null!==c.memoizedState,1&o.mode?(Ot=(O=Ot)||W,Rn(a,o),Ot=O):Rn(a,o),Wn(o),8192&u){if((o.stateNode.isHidden=O=null!==o.memoizedState)&&!W&&1&o.mode)for(fe=o,W=o.child;null!==W;){for(q=fe=W;null!==fe;){switch(pe=(Z=fe).child,Z.tag){case 0:case 11:case 14:case 15:Mr(4,Z,Z.return);break;case 1:ri(Z,Z.return);var me=Z.stateNode;if("function"==typeof me.componentWillUnmount){u=Z,c=Z.return;try{me.props=(a=u).memoizedProps,me.state=a.memoizedState,me.componentWillUnmount()}catch(he){ft(u,c,he)}}break;case 5:ri(Z,Z.return);break;case 22:if(null!==Z.memoizedState){bd(q);continue}}null!==pe?(pe.return=Z,fe=pe):bd(q)}W=W.sibling}e:for(W=null,q=o;;){if(5===q.tag){if(null===W){W=q;try{p=q.stateNode,O?"function"==typeof(h=p.style).setProperty?h.setProperty("display","none","important"):h.display="none":(k=q.stateNode,y=null!=(A=q.memoizedProps.style)&&A.hasOwnProperty("display")?A.display:null,k.style.display=Tc("display",y))}catch(he){ft(o,o.return,he)}}}else if(6===q.tag){if(null===W)try{q.stateNode.nodeValue=O?"":q.memoizedProps}catch(he){ft(o,o.return,he)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===o)&&null!==q.child){q.child.return=q,q=q.child;continue}if(q===o)break e;for(;null===q.sibling;){if(null===q.return||q.return===o)break e;W===q&&(W=null),q=q.return}W===q&&(W=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Rn(a,o),Wn(o),4&u&&hd(o);case 21:}}function Wn(o){var a=o.flags;if(2&a){try{e:{for(var c=o.return;null!==c;){if(fd(c)){var u=c;break e}c=c.return}throw Error(N(160))}switch(u.tag){case 5:var p=u.stateNode;32&u.flags&&(Zi(p,""),u.flags&=-33),ic(o,md(o),p);break;case 3:case 4:var y=u.stateNode.containerInfo;oc(o,md(o),y);break;default:throw Error(N(161))}}catch(A){ft(o,o.return,A)}o.flags&=-3}4096&a&&(o.flags&=-4097)}function Wp(o,a,c){fe=o,vd(o,a,c)}function vd(o,a,c){for(var u=!!(1&o.mode);null!==fe;){var p=fe,h=p.child;if(22===p.tag&&u){var y=null!==p.memoizedState||Oi;if(!y){var k=p.alternate,A=null!==k&&null!==k.memoizedState||Ot;k=Oi;var O=Ot;if(Oi=y,(Ot=A)&&!O)for(fe=p;null!==fe;)A=(y=fe).child,22===y.tag&&null!==y.memoizedState?xd(p):null!==A?(A.return=y,fe=A):xd(p);for(;null!==h;)fe=h,vd(h,a,c),h=h.sibling;fe=p,Oi=k,Ot=O}yd(o)}else 8772&p.subtreeFlags&&null!==h?(h.return=p,fe=h):yd(o)}}function yd(o){for(;null!==fe;){var a=fe;if(8772&a.flags){var c=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:Ot||Ks(5,a);break;case 1:var u=a.stateNode;if(4&a.flags&&!Ot)if(null===c)u.componentDidMount();else{var p=a.elementType===a.type?c.memoizedProps:en(a.type,c.memoizedProps);u.componentDidUpdate(p,c.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var h=a.updateQueue;null!==h&&Vs(a,h,u);break;case 3:var y=a.updateQueue;if(null!==y){if(c=null,null!==a.child)switch(a.child.tag){case 5:case 1:c=a.child.stateNode}Vs(a,y,c)}break;case 5:if(null===c&&4&a.flags){c=a.stateNode;var A=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&c.focus();break;case"img":A.src&&(c.src=A.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var O=a.alternate;if(null!==O){var W=O.memoizedState;if(null!==W){var q=W.dehydrated;null!==q&&rr(q)}}}break;default:throw Error(N(163))}Ot||512&a.flags&&nc(a)}catch(Z){ft(a,a.return,Z)}}if(a===o){fe=null;break}if(null!==(c=a.sibling)){c.return=a.return,fe=c;break}fe=a.return}}function bd(o){for(;null!==fe;){var a=fe;if(a===o){fe=null;break}var c=a.sibling;if(null!==c){c.return=a.return,fe=c;break}fe=a.return}}function xd(o){for(;null!==fe;){var a=fe;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Ks(4,a)}catch(A){ft(a,c,A)}break;case 1:var u=a.stateNode;if("function"==typeof u.componentDidMount){var p=a.return;try{u.componentDidMount()}catch(A){ft(a,p,A)}}var h=a.return;try{nc(a)}catch(A){ft(a,h,A)}break;case 5:var y=a.return;try{nc(a)}catch(A){ft(a,y,A)}}}catch(A){ft(a,a.return,A)}if(a===o){fe=null;break}var k=a.sibling;if(null!==k){k.return=a.return,fe=k;break}fe=a.return}}var _n,Zp=Math.ceil,qs=rt.ReactCurrentDispatcher,rc=rt.ReactCurrentOwner,kn=rt.ReactCurrentBatchConfig,Me=0,Tt=null,yt=null,Dt=0,mn=0,zi=ko(0),bt=0,$r=null,si=0,Qs=0,sc=0,Gr=null,tn=null,ac=0,Bi=1/0,fo=null,ea=!1,lc=null,Mo=null,ta=!1,$o=null,na=0,Dr=0,Fn=null,oa=-1,Vr=0;function at(){return 6&Me?ht():-1!==oa?oa:oa=ht()}function ai(o){return 1&o.mode?2&Me&&0!==Dt?Dt&-Dt:null!==Bu.transition?(0===Vr&&(Vr=Xc()),Vr):(0!==(o=Le)||(o=void 0===(o=window.event)?16:Kc(o.type)),o):1}function Zn(o,a,c,u){if(50<Dr)throw Dr=0,Fn=null,Error(N(185));tr(o,c,u),(!(2&Me)||o!==Tt)&&(o===Tt&&(!(2&Me)&&(Qs|=c),4===bt&&Go(o,Dt)),nn(o,u),1===c&&0===Me&&!(1&a.mode)&&(Bi=ht()+500,Fs&&So()))}function nn(o,a){var c=o.callbackNode;!function Qd(o,a){for(var c=o.suspendedLanes,u=o.pingedLanes,p=o.expirationTimes,h=o.pendingLanes;0<h;){var y=31-Sn(h),k=1<<y,A=p[y];-1===A?(!(k&c)||k&u)&&(p[y]=qd(k,a)):A<=a&&(o.expiredLanes|=k),h&=~k}}(o,a);var u=ps(o,o===Tt?Dt:0);if(0===u)null!==c&&Bc(c),o.callbackNode=null,o.callbackPriority=0;else if(o.callbackPriority!==(a=u&-u)){if(null!=c&&Bc(c),1===a)0===o.tag?function Si(o){Fs=!0,$u(o)}(Jn.bind(null,o)):$u(Jn.bind(null,o)),Ru(function(){!(6&Me)&&So()}),c=null;else{switch(Yc(u)){case 1:c=Ba;break;case 4:c=Lc;break;case 16:default:c=ls;break;case 536870912:c=Pc}c=dc(c,Cd.bind(null,o))}o.callbackPriority=a,o.callbackNode=c}}function Cd(o,a){if(oa=-1,Vr=0,6&Me)throw Error(N(327));var c=o.callbackNode;if(Li()&&o.callbackNode!==c)return null;var u=ps(o,o===Tt?Dt:0);if(0===u)return null;if(30&u||u&o.expiredLanes||a)a=sa(o,u);else{a=u;var p=Me;Me|=2;var h=Sd();for((Tt!==o||Dt!==a)&&(fo=null,Bi=ht()+500,Mn(o,a));;)try{Kp();break}catch(k){kd(o,k)}Nl(),qs.current=h,Me=p,null!==yt?a=0:(Tt=null,Dt=0,a=bt)}if(0!==a){if(2===a&&0!==(p=La(o))&&(u=p,a=cc(o,p)),1===a)throw c=$r,Mn(o,0),Go(o,u),nn(o,ht()),c;if(6===a)Go(o,u);else{if(p=o.current.alternate,!(30&u||function ia(o){for(var a=o;;){if(16384&a.flags){var c=a.updateQueue;if(null!==c&&null!==(c=c.stores))for(var u=0;u<c.length;u++){var p=c[u],h=p.getSnapshot;p=p.value;try{if(!wn(h(),p))return!1}catch{return!1}}}if(c=a.child,16384&a.subtreeFlags&&null!==c)c.return=a,a=c;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}(p)||(a=sa(o,u),2===a&&(h=La(o),0!==h&&(u=h,a=cc(o,h))),1!==a)))throw c=$r,Mn(o,0),Go(o,u),nn(o,ht()),c;switch(o.finishedWork=p,o.finishedLanes=u,a){case 0:case 1:throw Error(N(345));case 2:case 5:mo(o,tn,fo);break;case 3:if(Go(o,u),(130023424&u)===u&&10<(a=ac+500-ht())){if(0!==ps(o,0))break;if(((p=o.suspendedLanes)&u)!==u){at(),o.pingedLanes|=o.suspendedLanes&p;break}o.timeoutHandle=_l(mo.bind(null,o,tn,fo),a);break}mo(o,tn,fo);break;case 4:if(Go(o,u),(4194240&u)===u)break;for(a=o.eventTimes,p=-1;0<u;){var y=31-Sn(u);h=1<<y,(y=a[y])>p&&(p=y),u&=~h}if(u=p,10<(u=(120>(u=ht()-u)?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Zp(u/1960))-u)){o.timeoutHandle=_l(mo.bind(null,o,tn,fo),u);break}mo(o,tn,fo);break;default:throw Error(N(329))}}}return nn(o,ht()),o.callbackNode===c?Cd.bind(null,o):null}function cc(o,a){var c=Gr;return o.current.memoizedState.isDehydrated&&(Mn(o,a).flags|=256),2!==(o=sa(o,a))&&(a=tn,tn=c,null!==a&&uc(a)),o}function uc(o){null===tn?tn=o:tn.push.apply(tn,o)}function Go(o,a){for(a&=~sc,o.suspendedLanes|=a&=~Qs,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var c=31-Sn(a),u=1<<c;o[c]=-1,a&=~u}}function Jn(o){if(6&Me)throw Error(N(327));Li();var a=ps(o,0);if(!(1&a))return nn(o,ht()),null;var c=sa(o,a);if(0!==o.tag&&2===c){var u=La(o);0!==u&&(a=u,c=cc(o,u))}if(1===c)throw c=$r,Mn(o,0),Go(o,a),nn(o,ht()),c;if(6===c)throw Error(N(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,mo(o,tn,fo),nn(o,ht()),null}function jn(o,a){var c=Me;Me|=1;try{return o(a)}finally{0===(Me=c)&&(Bi=ht()+500,Fs&&So())}}function li(o){null!==$o&&0===$o.tag&&!(6&Me)&&Li();var a=Me;Me|=1;var c=kn.transition,u=Le;try{if(kn.transition=null,Le=1,o)return o()}finally{Le=u,kn.transition=c,!(6&(Me=a))&&So()}}function Or(){mn=zi.current,qe(zi)}function Mn(o,a){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(-1!==c&&(o.timeoutHandle=-1,Gp(c)),null!==yt)for(c=yt.return;null!==c;){var u=c;switch(xl(u),u.tag){case 1:null!=(u=u.type.childContextTypes)&&As();break;case 3:Fi(),qe($t),qe(Mt),ti();break;case 5:Fl(u);break;case 4:Fi();break;case 13:case 19:qe($e);break;case 10:El(u.type._context);break;case 22:case 23:Or()}c=c.return}if(Tt=o,yt=o=Do(o.current,null),Dt=mn=a,bt=0,$r=null,sc=Qs=si=0,tn=Gr=null,null!==Qo){for(a=0;a<Qo.length;a++)if(null!==(u=(c=Qo[a]).interleaved)){c.interleaved=null;var h=c.pending;if(null!==h){var y=h.next;h.next=u.next,u.next=y}c.pending=u}Qo=null}return o}function kd(o,a){for(;;){var c=yt;try{if(Nl(),Sr.current=Gi,Io){for(var u=Ke.memoizedState;null!==u;){var p=u.queue;null!==p&&(p.pending=null),u=u.next}Io=!1}if(In=0,gt=Qe=Ke=null,Mi=!1,ni=0,rc.current=null,null===c||null===c.return){bt=1,$r=a,yt=null;break}e:{var h=o,y=c.return,k=c,A=a;if(a=Dt,k.flags|=32768,null!==A&&"object"==typeof A&&"function"==typeof A.then){var O=A,W=k,q=W.tag;if(!(1&W.mode||0!==q&&11!==q&&15!==q)){var Z=W.alternate;Z?(W.updateQueue=Z.updateQueue,W.memoizedState=Z.memoizedState,W.lanes=Z.lanes):(W.updateQueue=null,W.memoizedState=null)}var pe=ad(y);if(null!==pe){pe.flags&=-257,Xl(pe,y,k,0,a),1&pe.mode&&sd(h,O,a),A=O;var me=(a=pe).updateQueue;if(null===me){var he=new Set;he.add(A),a.updateQueue=he}else me.add(A);break e}if(!(1&a)){sd(h,O,a),ra();break e}A=Error(N(426))}else if(ot&&1&k.mode){var lt=ad(y);if(null!==lt){!(65536&lt.flags)&&(lt.flags|=256),Xl(lt,y,k,0,a),Sl(Di(A,k));break e}}h=A=Di(A,k),4!==bt&&(bt=2),null===Gr?Gr=[h]:Gr.push(h),h=y;do{switch(h.tag){case 3:h.flags|=65536,h.lanes|=a&=-a,Hu(h,Ll(0,A,a));break e;case 1:k=A;var D=h.stateNode;if(!(128&h.flags||"function"!=typeof h.type.getDerivedStateFromError&&(null===D||"function"!=typeof D.componentDidCatch||null!==Mo&&Mo.has(D)))){h.flags|=65536,h.lanes|=a&=-a,Hu(h,Pl(h,k,a));break e}}h=h.return}while(null!==h)}zr(c)}catch(_e){a=_e,yt===c&&null!==c&&(yt=c=c.return);continue}break}}function Sd(){var o=qs.current;return qs.current=Gi,null===o?Gi:o}function ra(){(0===bt||3===bt||2===bt)&&(bt=4),null===Tt||!(268435455&si)&&!(268435455&Qs)||Go(Tt,Dt)}function sa(o,a){var c=Me;Me|=2;var u=Sd();for((Tt!==o||Dt!==a)&&(fo=null,Mn(o,a));;)try{Jp();break}catch(p){kd(o,p)}if(Nl(),Me=c,qs.current=u,null!==yt)throw Error(N(261));return Tt=null,Dt=0,bt}function Jp(){for(;null!==yt;)wd(yt)}function Kp(){for(;null!==yt&&!Xd();)wd(yt)}function wd(o){var a=_n(o.alternate,o,mn);o.memoizedProps=o.pendingProps,null===a?zr(o):yt=a,rc.current=null}function zr(o){var a=o;do{var c=a.alternate;if(o=a.return,32768&a.flags){if(null!==(c=ec(c,a)))return c.flags&=32767,void(yt=c);if(null===o)return bt=6,void(yt=null);o.flags|=32768,o.subtreeFlags=0,o.deletions=null}else if(null!==(c=Mf(c,a,mn)))return void(yt=c);if(null!==(a=a.sibling))return void(yt=a);yt=a=o}while(null!==a);0===bt&&(bt=5)}function mo(o,a,c){var u=Le,p=kn.transition;try{kn.transition=null,Le=1,function qp(o,a,c,u){do{Li()}while(null!==$o);if(6&Me)throw Error(N(327));var p=o.finishedLanes;if(null===(c=o.finishedWork))return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(N(177));o.callbackNode=null,o.callbackPriority=0;var h=c.lanes|c.childLanes;if(function Ft(o,a){var c=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var u=o.eventTimes;for(o=o.expirationTimes;0<c;){var p=31-Sn(c),h=1<<p;a[p]=0,u[p]=-1,o[p]=-1,c&=~h}}(o,h),o===Tt&&(yt=Tt=null,Dt=0),!(2064&c.subtreeFlags)&&!(2064&c.flags)||ta||(ta=!0,dc(ls,function(){return Li(),null})),h=!!(15990&c.flags),15990&c.subtreeFlags||h){h=kn.transition,kn.transition=null;var y=Le;Le=1;var k=Me;Me|=4,rc.current=null,function Up(o,a){if(pl=Bn,rl(o=vu())){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else{var u=(c=(c=o.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var p=u.anchorOffset,h=u.focusNode;u=u.focusOffset;var y=0,k=-1,A=-1,O=0,W=0,q=o,Z=null;t:for(;;){for(var pe;q!==c||0!==p&&3!==q.nodeType||(k=y+p),q!==h||0!==u&&3!==q.nodeType||(A=y+u),3===q.nodeType&&(y+=q.nodeValue.length),null!==(pe=q.firstChild);)Z=q,q=pe;for(;;){if(q===o)break t;if(Z===c&&++O===p&&(k=y),Z===h&&++W===u&&(A=y),null!==(pe=q.nextSibling))break;Z=(q=Z).parentNode}q=pe}c=-1===k||-1===A?null:{start:k,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(fl={focusedElem:o,selectionRange:c},Bn=!1,fe=a;null!==fe;)if(o=(a=fe).child,1028&a.subtreeFlags&&null!==o)o.return=a,fe=o;else for(;null!==fe;){a=fe;try{var me=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==me){var he=me.memoizedProps,lt=me.memoizedState,G=a.stateNode,F=G.getSnapshotBeforeUpdate(a.elementType===a.type?he:en(a.type,he),lt);G.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var D=a.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(N(163))}}catch(ee){ft(a,a.return,ee)}if(null!==(o=a.sibling)){o.return=a.return,fe=o;break}fe=a.return}me=dd,dd=!1}(o,c),gd(c,o),Fp(fl),Bn=!!pl,fl=pl=null,o.current=c,Wp(c,o,p),Yd(),Me=k,Le=y,kn.transition=h}else o.current=c;if(ta&&(ta=!1,$o=o,na=p),0===(h=o.pendingLanes)&&(Mo=null),function Wd(o){if(zn&&"function"==typeof zn.onCommitFiberRoot)try{zn.onCommitFiberRoot(cs,o,void 0,!(128&~o.current.flags))}catch{}}(c.stateNode),nn(o,ht()),null!==a)for(u=o.onRecoverableError,c=0;c<a.length;c++)u((p=a[c]).value,{componentStack:p.stack,digest:p.digest});if(ea)throw ea=!1,o=lc,lc=null,o;1&na&&0!==o.tag&&Li(),1&(h=o.pendingLanes)?o===Fn?Dr++:(Dr=0,Fn=o):Dr=0,So()}(o,a,c,u)}finally{kn.transition=p,Le=u}return null}function Li(){if(null!==$o){var o=Yc(na),a=kn.transition,c=Le;try{if(kn.transition=null,Le=16>o?16:o,null===$o)var u=!1;else{if(o=$o,$o=null,na=0,6&Me)throw Error(N(331));var p=Me;for(Me|=4,fe=o.current;null!==fe;){var h=fe,y=h.child;if(16&fe.flags){var k=h.deletions;if(null!==k){for(var A=0;A<k.length;A++){var O=k[A];for(fe=O;null!==fe;){var W=fe;switch(W.tag){case 0:case 11:case 15:Mr(8,W,h)}var q=W.child;if(null!==q)q.return=W,fe=q;else for(;null!==fe;){var Z=(W=fe).sibling,pe=W.return;if(pd(W),W===O){fe=null;break}if(null!==Z){Z.return=pe,fe=Z;break}fe=pe}}}var me=h.alternate;if(null!==me){var he=me.child;if(null!==he){me.child=null;do{var lt=he.sibling;he.sibling=null,he=lt}while(null!==he)}}fe=h}}if(2064&h.subtreeFlags&&null!==y)y.return=h,fe=y;else e:for(;null!==fe;){if(2048&(h=fe).flags)switch(h.tag){case 0:case 11:case 15:Mr(9,h,h.return)}var G=h.sibling;if(null!==G){G.return=h.return,fe=G;break e}fe=h.return}}var F=o.current;for(fe=F;null!==fe;){var D=(y=fe).child;if(2064&y.subtreeFlags&&null!==D)D.return=y,fe=D;else e:for(y=F;null!==fe;){if(2048&(k=fe).flags)try{switch(k.tag){case 0:case 11:case 15:Ks(9,k)}}catch(_e){ft(k,k.return,_e)}if(k===y){fe=null;break e}var ee=k.sibling;if(null!==ee){ee.return=k.return,fe=ee;break e}fe=k.return}}if(Me=p,So(),zn&&"function"==typeof zn.onPostCommitFiberRoot)try{zn.onPostCommitFiberRoot(cs,o)}catch{}u=!0}return u}finally{Le=c,kn.transition=a}}return!1}function Nd(o,a,c){o=bn(o,a=Ll(0,a=Di(c,a),1),1),a=at(),null!==o&&(tr(o,1,a),nn(o,a))}function ft(o,a,c){if(3===o.tag)Nd(o,o,c);else for(;null!==a;){if(3===a.tag){Nd(a,o,c);break}if(1===a.tag){var u=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof u.componentDidCatch&&(null===Mo||!Mo.has(u))){a=bn(a,o=Pl(a,o=Di(c,o),1),1),o=at(),null!==a&&(tr(a,1,o),nn(a,o));break}}a=a.return}}function Qp(o,a,c){var u=o.pingCache;null!==u&&u.delete(a),a=at(),o.pingedLanes|=o.suspendedLanes&c,Tt===o&&(Dt&c)===c&&(4===bt||3===bt&&(130023424&Dt)===Dt&&500>ht()-ac?Mn(o,0):sc|=c),nn(o,a)}function ef(o,a){0===a&&(1&o.mode?(a=ds,!(130023424&(ds<<=1))&&(ds=4194304)):a=1);var c=at();null!==(o=so(o,a))&&(tr(o,a,c),nn(o,c))}function aa(o){var a=o.memoizedState,c=0;null!==a&&(c=a.retryLane),ef(o,c)}function tf(o,a){var c=0;switch(o.tag){case 13:var u=o.stateNode,p=o.memoizedState;null!==p&&(c=p.retryLane);break;case 19:u=o.stateNode;break;default:throw Error(N(314))}null!==u&&u.delete(a),ef(o,c)}function dc(o,a){return zc(o,a)}function Ye(o,a,c,u){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(o,a,c,u){return new Ye(o,a,c,u)}function pc(o){return!(!(o=o.prototype)||!o.isReactComponent)}function Do(o,a){var c=o.alternate;return null===c?((c=Ge(o.tag,a,o.key,o.mode)).elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=a,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&o.flags,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,c.dependencies=null===(a=o.dependencies)?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function la(o,a,c,u,p,h){var y=2;if(u=o,"function"==typeof o)pc(o)&&(y=1);else if("string"==typeof o)y=5;else e:switch(o){case dt:return ci(c.children,p,h,a);case Dn:y=8,p|=8;break;case gn:return(o=Ge(12,c,a,2|p)).elementType=gn,o.lanes=h,o;case Wt:return(o=Ge(13,c,a,p)).elementType=Wt,o.lanes=h,o;case an:return(o=Ge(19,c,a,p)).elementType=an,o.lanes=h,o;case Se:return Pi(c,p,h,a);default:if("object"==typeof o&&null!==o)switch(o.$$typeof){case Vn:y=10;break e;case vn:y=9;break e;case yn:y=11;break e;case eo:y=14;break e;case ne:y=16,u=null;break e}throw Error(N(130,null==o?o:typeof o,""))}return(a=Ge(y,c,a,p)).elementType=o,a.type=u,a.lanes=h,a}function ci(o,a,c,u){return(o=Ge(7,o,u,a)).lanes=c,o}function Pi(o,a,c,u){return(o=Ge(22,o,u,a)).elementType=Se,o.lanes=c,o.stateNode={isHidden:!1},o}function Vo(o,a,c){return(o=Ge(6,o,null,a)).lanes=c,o}function Br(o,a,c){return(a=Ge(4,null!==o.children?o.children:[],o.key,a)).lanes=c,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function Id(o,a,c,u,p){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pa(0),this.expirationTimes=Pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.identifierPrefix=u,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function ca(o,a,c,u,p,h,y,k,A){return o=new Id(o,a,c,k,A),1===a?(a=1,!0===h&&(a|=8)):a=0,h=Ge(3,null,null,a),o.current=h,h.stateNode=o,h.memoizedState={element:u,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lt(h),o}function fc(o){if(!o)return Pn;e:{if(Uo(o=o._reactInternals)!==o||1!==o.tag)throw Error(N(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Jt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(N(171))}if(1===o.tag){var c=o.type;if(Jt(c))return Mu(o,c,a)}return a}function Xi(o,a,c,u,p,h,y,k,A){return(o=ca(c,u,!0,o,0,h,0,k,A)).context=fc(null),c=o.current,(h=lo(u=at(),p=ai(c))).callback=a??null,bn(c,h,p),o.current.lanes=p,tr(o,p,u),nn(o,u),o}function Lr(o,a,c,u){var p=a.current,h=at(),y=ai(p);return c=fc(c),null===a.context?a.context=c:a.pendingContext=c,(a=lo(h,y)).payload={element:o},null!==(u=void 0===u?null:u)&&(a.callback=u),null!==(o=bn(p,a,y))&&(Zn(o,p,y,h),qt(o,p,y)),y}function Pr(o){return(o=o.current).child?o.child.stateNode:null}function nf(o,a){if(null!==(o=o.memoizedState)&&null!==o.dehydrated){var c=o.retryLane;o.retryLane=0!==c&&c<a?c:a}}function Xr(o,a){nf(o,a),(o=o.alternate)&&nf(o,a)}_n=function(o,a,c){if(null!==o)if(o.memoizedProps!==a.pendingProps||$t.current)Pt=!0;else{if(!(o.lanes&c||128&a.flags))return Pt=!1,function Xp(o,a,c){switch(a.tag){case 3:Fo(a),Ei();break;case 5:Uu(a);break;case 1:Jt(a.type)&&Rs(a);break;case 4:Rl(a,a.stateNode.containerInfo);break;case 10:var u=a.type._context,p=a.memoizedProps.value;Je(Gs,u._currentValue),u._currentValue=p;break;case 13:if(null!==(u=a.memoizedState))return null!==u.dehydrated?(Je($e,1&$e.current),a.flags|=128,null):c&a.child.childLanes?Cn(o,a,c):(Je($e,1&$e.current),null!==(o=Un(o,a,c))?o.sibling:null);Je($e,1&$e.current);break;case 19:if(u=!!(c&a.childLanes),128&o.flags){if(u)return ud(o,a,c);a.flags|=128}if(null!==(p=a.memoizedState)&&(p.rendering=null,p.tail=null,p.lastEffect=null),Je($e,$e.current),u)break;return null;case 22:case 23:return a.lanes=0,Yl(o,a,c)}return Un(o,a,c)}(o,a,c);Pt=!!(131072&o.flags)}else Pt=!1,ot&&1048576&a.flags&&Gu(a,xr,a.index);switch(a.lanes=0,a.tag){case 2:var u=a.type;jr(o,a),o=a.pendingProps;var p=ki(a,Mt.current);Ai(a,c),p=jl(null,a,u,o,p,c);var h=zs();return a.flags|=1,"object"==typeof p&&null!==p&&"function"==typeof p.render&&void 0===p.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Jt(u)?(h=!0,Rs(a)):h=!1,a.memoizedState=null!=p.state?p.state:null,Lt(a),p.updater=Ro,a.stateNode=p,p._reactInternals=a,Ol(a,u,o,c),a=po(null,a,u,!0,h,c)):(a.tag=0,ot&&h&&bl(a),It(null,a,p,c),a=a.child),a;case 16:u=a.elementType;e:{switch(jr(o,a),o=a.pendingProps,u=(p=u._init)(u._payload),a.type=u,p=a.tag=function Ed(o){if("function"==typeof o)return pc(o)?1:0;if(null!=o){if((o=o.$$typeof)===yn)return 11;if(o===eo)return 14}return 2}(u),o=en(u,o),p){case 0:a=Ws(null,a,u,o,c);break e;case 1:a=Fr(null,a,u,o,c);break e;case 11:a=ld(null,a,u,o,c);break e;case 14:a=Rr(null,a,u,en(u.type,o),c);break e}throw Error(N(306,u,""))}return a;case 0:return p=a.pendingProps,Ws(o,a,u=a.type,p=a.elementType===u?p:en(u,p),c);case 1:return p=a.pendingProps,Fr(o,a,u=a.type,p=a.elementType===u?p:en(u,p),c);case 3:e:{if(Fo(a),null===o)throw Error(N(387));u=a.pendingProps,p=(h=a.memoizedState).element,Al(o,a),No(a,u,null,c);var y=a.memoizedState;if(u=y.element,h.isDehydrated){if(a.updateQueue.baseState=h={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},a.memoizedState=h,256&a.flags){a=Hl(o,a,u,c,p=Di(Error(N(423)),a));break e}if(u!==p){a=Hl(o,a,u,c,p=Di(Error(N(424)),a));break e}for(dn=Co(a.stateNode.containerInfo.firstChild),un=a,ot=!0,Nn=null,c=Xu(a,null,u,c),a.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(Ei(),u===p){a=Un(o,a,c);break e}It(o,a,u,c)}a=a.child}return a;case 5:return Uu(a),null===o&&kl(a),h=null!==o?o.memoizedProps:null,y=(p=a.pendingProps).children,ml(u=a.type,p)?y=null:null!==h&&ml(u,h)&&(a.flags|=32),cd(o,a),It(o,a,y,c),a.child;case 6:return null===o&&kl(a),null;case 13:return Cn(o,a,c);case 4:return Rl(a,a.stateNode.containerInfo),u=a.pendingProps,null===o?a.child=Ii(a,null,u,c):It(o,a,u,c),a.child;case 11:return p=a.pendingProps,ld(o,a,u=a.type,p=a.elementType===u?p:en(u,p),c);case 7:return It(o,a,a.pendingProps,c),a.child;case 8:case 12:return It(o,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.memoizedProps,y=(p=a.pendingProps).value,Je(Gs,(u=a.type._context)._currentValue),u._currentValue=y,null!==h)if(wn(h.value,y)){if(h.children===p.children&&!$t.current){a=Un(o,a,c);break e}}else for(null!==(h=a.child)&&(h.return=a);null!==h;){var k=h.dependencies;if(null!==k){y=h.child;for(var A=k.firstContext;null!==A;){if(A.context===u){if(1===h.tag){(A=lo(-1,c&-c)).tag=2;var O=h.updateQueue;if(null!==O){var W=(O=O.shared).pending;null===W?A.next=A:(A.next=W.next,W.next=A),O.pending=A}}h.lanes|=c,null!==(A=h.alternate)&&(A.lanes|=c),Il(h.return,c,a),k.lanes|=c;break}A=A.next}}else if(10===h.tag)y=h.type===a.type?null:h.child;else if(18===h.tag){if(null===(y=h.return))throw Error(N(341));y.lanes|=c,null!==(k=y.alternate)&&(k.lanes|=c),Il(y,c,a),y=h.sibling}else y=h.child;if(null!==y)y.return=h;else for(y=h;null!==y;){if(y===a){y=null;break}if(null!==(h=y.sibling)){h.return=y.return,y=h;break}y=y.return}h=y}It(o,a,p.children,c),a=a.child}return a;case 9:return p=a.type,u=a.pendingProps.children,Ai(a,c),u=u(p=pn(p)),a.flags|=1,It(o,a,u,c),a.child;case 14:return p=en(u=a.type,a.pendingProps),Rr(o,a,u,p=en(u.type,p),c);case 15:return Xt(o,a,a.type,a.pendingProps,c);case 17:return p=a.pendingProps,p=a.elementType===(u=a.type)?p:en(u,p),jr(o,a),a.tag=1,Jt(u)?(o=!0,Rs(a)):o=!1,Ai(a,c),id(a,u,p),Ol(a,u,p,c),po(null,a,u,!0,o,c);case 19:return ud(o,a,c);case 22:return Yl(o,a,c)}throw Error(N(156,a.tag))};var hn="function"==typeof reportError?reportError:function(o){console.error(o)};function et(o){this._internalRoot=o}function Yr(o){this._internalRoot=o}function Yi(o){return!(!o||1!==o.nodeType&&9!==o.nodeType&&11!==o.nodeType)}function ua(o){return!(!o||1!==o.nodeType&&9!==o.nodeType&&11!==o.nodeType&&(8!==o.nodeType||" react-mount-point-unstable "!==o.nodeValue))}function da(){}function $n(o,a,c,u,p){var h=c._reactRootContainer;if(h){var y=h;if("function"==typeof p){var k=p;p=function(){var A=Pr(y);k.call(A)}}Lr(a,y,o,p)}else y=function Ad(o,a,c,u,p){if(p){if("function"==typeof u){var h=u;u=function(){var O=Pr(y);h.call(O)}}var y=Xi(a,u,o,0,null,!1,0,"",da);return o._reactRootContainer=y,o[oo]=y.current,Zo(8===o.nodeType?o.parentNode:o),li(),y}for(;p=o.lastChild;)o.removeChild(p);if("function"==typeof u){var k=u;u=function(){var O=Pr(A);k.call(O)}}var A=ca(o,0,!1,null,0,!1,0,"",da);return o._reactRootContainer=A,o[oo]=A.current,Zo(8===o.nodeType?o.parentNode:o),li(function(){Lr(a,A,c,u)}),A}(c,a,o,p,u);return Pr(y)}Yr.prototype.render=et.prototype.render=function(o){var a=this._internalRoot;if(null===a)throw Error(N(409));Lr(o,a,null,null)},Yr.prototype.unmount=et.prototype.unmount=function(){var o=this._internalRoot;if(null!==o){this._internalRoot=null;var a=o.containerInfo;li(function(){Lr(null,o,null,null)}),a[oo]=null}},Yr.prototype.unstable_scheduleHydration=function(o){if(o){var a=Wc();o={blockedOn:null,target:o,priority:a};for(var c=0;c<xo.length&&0!==a&&a<xo[c].priority;c++);xo.splice(c,0,o),0===c&&ms(o)}},Hc=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var c=er(a.pendingLanes);0!==c&&(fs(a,1|c),nn(a,ht()),!(6&Me)&&(Bi=ht()+500,So()))}break;case 13:li(function(){var u=so(o,1);if(null!==u){var p=at();Zn(u,o,1,p)}}),Xr(o,1)}},Xa=function(o){if(13===o.tag){var a=so(o,134217728);null!==a&&Zn(a,o,134217728,at()),Xr(o,134217728)}},Uc=function(o){if(13===o.tag){var a=ai(o),c=so(o,a);null!==c&&Zn(c,o,a,at()),Xr(o,a)}},Wc=function(){return Le},Zc=function(o,a){var c=Le;try{return Le=o,a()}finally{Le=c}},Ga=function(o,a,c){switch(a){case"input":if(Ta(o,c),a=c.name,"radio"===c.type&&null!=a){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var u=c[a];if(u!==o&&u.form===o.form){var p=Ts(u);if(!p)throw Error(N(90));xc(u),Ta(u,p)}}}break;case"textarea":Nc(o,c);break;case"select":null!=(a=c.value)&&Ho(o,!!c.multiple,a,!1)}},Mc=jn,Da=li;var pa={usingClientEntryPoint:!1,Events:[br,xi,Ts,Fc,jc,jn]},_o={findFiberByHostInstance:Jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$f={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return null===(o=Vc(o))?null:o.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||function of(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{cs=Oo.inject($f),zn=Oo}catch{}}oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pa,oe.createPortal=function(o,a){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yi(a))throw Error(N(200));return function Td(o,a,c){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:je,key:null==u?null:""+u,children:o,containerInfo:a,implementation:c}}(o,a,null,c)},oe.createRoot=function(o,a){if(!Yi(o))throw Error(N(299));var c=!1,u="",p=hn;return null!=a&&(!0===a.unstable_strictMode&&(c=!0),void 0!==a.identifierPrefix&&(u=a.identifierPrefix),void 0!==a.onRecoverableError&&(p=a.onRecoverableError)),a=ca(o,1,!1,null,0,c,0,u,p),o[oo]=a.current,Zo(8===o.nodeType?o.parentNode:o),new et(a)},oe.findDOMNode=function(o){if(null==o)return null;if(1===o.nodeType)return o;var a=o._reactInternals;if(void 0===a)throw"function"==typeof o.render?Error(N(188)):(o=Object.keys(o).join(","),Error(N(268,o)));return null===(o=Vc(a))?null:o.stateNode},oe.flushSync=function(o){return li(o)},oe.hydrate=function(o,a,c){if(!ua(a))throw Error(N(200));return $n(null,o,a,!0,c)},oe.hydrateRoot=function(o,a,c){if(!Yi(o))throw Error(N(405));var u=null!=c&&c.hydratedSources||null,p=!1,h="",y=hn;if(null!=c&&(!0===c.unstable_strictMode&&(p=!0),void 0!==c.identifierPrefix&&(h=c.identifierPrefix),void 0!==c.onRecoverableError&&(y=c.onRecoverableError)),a=Xi(a,null,o,1,c??null,p,0,h,y),o[oo]=a.current,Zo(o),u)for(o=0;o<u.length;o++)p=(p=(c=u[o])._getVersion)(c._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[c,p]:a.mutableSourceEagerHydrationData.push(c,p);return new Yr(a)},oe.render=function(o,a,c){if(!ua(a))throw Error(N(200));return $n(null,o,a,!1,c)},oe.unmountComponentAtNode=function(o){if(!ua(o))throw Error(N(40));return!!o._reactRootContainer&&(li(function(){$n(null,null,o,!1,function(){o._reactRootContainer=null,o[oo]=null})}),!0)},oe.unstable_batchedUpdates=jn,oe.unstable_renderSubtreeIntoContainer=function(o,a,c,u){if(!ua(c))throw Error(N(200));if(null==o||void 0===o._reactInternals)throw Error(N(38));return $n(o,a,c,!1,u)},oe.version="18.3.1-next-f1338f8080-20240426"},2663:(Ut,oe,ue)=>{var L=ue(6046);oe.H=L.createRoot},6046:(Ut,oe,ue)=>{(function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||"function"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(L){console.error(L)}})(),Ut.exports=ue(7578)},330:(Ut,oe)=>{var ue=Symbol.for("react.element"),f=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),mt=Symbol.for("react.profiler"),kt=Symbol.for("react.provider"),zt=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),sn=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),Fe=Symbol.iterator,e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},We=Object.assign,_t={};function xe(j,J,we){this.props=j,this.context=J,this.refs=_t,this.updater=we||e}function Ie(){}function Bt(j,J,we){this.props=j,this.context=J,this.refs=_t,this.updater=we||e}xe.prototype.isReactComponent={},xe.prototype.setState=function(j,J){if("object"!=typeof j&&"function"!=typeof j&&null!=j)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},xe.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")},Ie.prototype=xe.prototype;var vt=Bt.prototype=new Ie;vt.constructor=Bt,We(vt,xe.prototype),vt.isPureReactComponent=!0;var At=Array.isArray,rt=Object.prototype.hasOwnProperty,Rt={current:null},je={key:!0,ref:!0,__self:!0,__source:!0};function dt(j,J,we){var Ne,Ae={},He=null,st=null;if(null!=J)for(Ne in void 0!==J.ref&&(st=J.ref),void 0!==J.key&&(He=""+J.key),J)rt.call(J,Ne)&&!je.hasOwnProperty(Ne)&&(Ae[Ne]=J[Ne]);var pt=arguments.length-2;if(1===pt)Ae.children=we;else if(1<pt){for(var ze=Array(pt),Zt=0;Zt<pt;Zt++)ze[Zt]=arguments[Zt+2];Ae.children=ze}if(j&&j.defaultProps)for(Ne in pt=j.defaultProps)void 0===Ae[Ne]&&(Ae[Ne]=pt[Ne]);return{$$typeof:ue,type:j,key:He,ref:st,props:Ae,_owner:Rt.current}}function gn(j){return"object"==typeof j&&null!==j&&j.$$typeof===ue}var vn=/\/+/g;function yn(j,J){return"object"==typeof j&&null!==j&&null!=j.key?function Vn(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(we){return J[we]})}(""+j.key):J.toString(36)}function Wt(j,J,we,Ne,Ae){var He=typeof j;("undefined"===He||"boolean"===He)&&(j=null);var st=!1;if(null===j)st=!0;else switch(He){case"string":case"number":st=!0;break;case"object":switch(j.$$typeof){case ue:case f:st=!0}}if(st)return Ae=Ae(st=j),j=""===Ne?"."+yn(st,0):Ne,At(Ae)?(we="",null!=j&&(we=j.replace(vn,"$&/")+"/"),Wt(Ae,J,we,"",function(Zt){return Zt})):null!=Ae&&(gn(Ae)&&(Ae=function Dn(j,J){return{$$typeof:ue,type:j.type,key:J,ref:j.ref,props:j.props,_owner:j._owner}}(Ae,we+(!Ae.key||st&&st.key===Ae.key?"":(""+Ae.key).replace(vn,"$&/")+"/")+j)),J.push(Ae)),1;if(st=0,Ne=""===Ne?".":Ne+":",At(j))for(var pt=0;pt<j.length;pt++){var ze=Ne+yn(He=j[pt],pt);st+=Wt(He,J,we,ze,Ae)}else if(ze=function Be(j){return null===j||"object"!=typeof j?null:"function"==typeof(j=Fe&&j[Fe]||j["@@iterator"])?j:null}(j),"function"==typeof ze)for(j=ze.call(j),pt=0;!(He=j.next()).done;)st+=Wt(He=He.value,J,we,ze=Ne+yn(He,pt++),Ae);else if("object"===He)throw J=String(j),Error("Objects are not valid as a React child (found: "+("[object Object]"===J?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return st}function an(j,J,we){if(null==j)return j;var Ne=[],Ae=0;return Wt(j,Ne,"","",function(He){return J.call(we,He,Ae++)}),Ne}function eo(j){if(-1===j._status){var J=j._result;(J=J()).then(function(we){(0===j._status||-1===j._status)&&(j._status=1,j._result=we)},function(we){(0===j._status||-1===j._status)&&(j._status=2,j._result=we)}),-1===j._status&&(j._status=0,j._result=J)}if(1===j._status)return j._result.default;throw j._result}var ne={current:null},Se={transition:null},Ee={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Se,ReactCurrentOwner:Rt};function Oe(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:an,forEach:function(j,J,we){an(j,function(){J.apply(this,arguments)},we)},count:function(j){var J=0;return an(j,function(){J++}),J},toArray:function(j){return an(j,function(J){return J})||[]},only:function(j){if(!gn(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},oe.Component=xe,oe.Fragment=L,oe.Profiler=mt,oe.PureComponent=Bt,oe.StrictMode=N,oe.Suspense=nt,oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,oe.act=Oe,oe.cloneElement=function(j,J,we){if(null==j)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ne=We({},j.props),Ae=j.key,He=j.ref,st=j._owner;if(null!=J){if(void 0!==J.ref&&(He=J.ref,st=Rt.current),void 0!==J.key&&(Ae=""+J.key),j.type&&j.type.defaultProps)var pt=j.type.defaultProps;for(ze in J)rt.call(J,ze)&&!je.hasOwnProperty(ze)&&(Ne[ze]=void 0===J[ze]&&void 0!==pt?pt[ze]:J[ze])}var ze=arguments.length-2;if(1===ze)Ne.children=we;else if(1<ze){pt=Array(ze);for(var Zt=0;Zt<ze;Zt++)pt[Zt]=arguments[Zt+2];Ne.children=pt}return{$$typeof:ue,type:j.type,key:Ae,ref:He,props:Ne,_owner:st}},oe.createContext=function(j){return(j={$$typeof:zt,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:kt,_context:j},j.Consumer=j},oe.createElement=dt,oe.createFactory=function(j){var J=dt.bind(null,j);return J.type=j,J},oe.createRef=function(){return{current:null}},oe.forwardRef=function(j){return{$$typeof:it,render:j}},oe.isValidElement=gn,oe.lazy=function(j){return{$$typeof:Ve,_payload:{_status:-1,_result:j},_init:eo}},oe.memo=function(j,J){return{$$typeof:sn,type:j,compare:void 0===J?null:J}},oe.startTransition=function(j){var J=Se.transition;Se.transition={};try{j()}finally{Se.transition=J}},oe.unstable_act=Oe,oe.useCallback=function(j,J){return ne.current.useCallback(j,J)},oe.useContext=function(j){return ne.current.useContext(j)},oe.useDebugValue=function(){},oe.useDeferredValue=function(j){return ne.current.useDeferredValue(j)},oe.useEffect=function(j,J){return ne.current.useEffect(j,J)},oe.useId=function(){return ne.current.useId()},oe.useImperativeHandle=function(j,J,we){return ne.current.useImperativeHandle(j,J,we)},oe.useInsertionEffect=function(j,J){return ne.current.useInsertionEffect(j,J)},oe.useLayoutEffect=function(j,J){return ne.current.useLayoutEffect(j,J)},oe.useMemo=function(j,J){return ne.current.useMemo(j,J)},oe.useReducer=function(j,J,we){return ne.current.useReducer(j,J,we)},oe.useRef=function(j){return ne.current.useRef(j)},oe.useState=function(j){return ne.current.useState(j)},oe.useSyncExternalStore=function(j,J,we){return ne.current.useSyncExternalStore(j,J,we)},oe.useTransition=function(){return ne.current.useTransition()},oe.version="18.3.1"},1395:(Ut,oe,ue)=>{Ut.exports=ue(330)},6290:(Ut,oe)=>{function ue(ne,Se){var Ee=ne.length;ne.push(Se);e:for(;0<Ee;){var Oe=Ee-1>>>1,j=ne[Oe];if(!(0<N(j,Se)))break e;ne[Oe]=Se,ne[Ee]=j,Ee=Oe}}function f(ne){return 0===ne.length?null:ne[0]}function L(ne){if(0===ne.length)return null;var Se=ne[0],Ee=ne.pop();if(Ee!==Se){ne[0]=Ee;e:for(var Oe=0,j=ne.length,J=j>>>1;Oe<J;){var we=2*(Oe+1)-1,Ne=ne[we],Ae=we+1,He=ne[Ae];if(0>N(Ne,Ee))Ae<j&&0>N(He,Ne)?(ne[Oe]=He,ne[Ae]=Ee,Oe=Ae):(ne[Oe]=Ne,ne[we]=Ee,Oe=we);else{if(!(Ae<j&&0>N(He,Ee)))break e;ne[Oe]=He,ne[Ae]=Ee,Oe=Ae}}}return Se}function N(ne,Se){var Ee=ne.sortIndex-Se.sortIndex;return 0!==Ee?Ee:ne.id-Se.id}if("object"==typeof performance&&"function"==typeof performance.now){var mt=performance;oe.unstable_now=function(){return mt.now()}}else{var kt=Date,zt=kt.now();oe.unstable_now=function(){return kt.now()-zt}}var it=[],nt=[],sn=1,Ve=null,Fe=3,Be=!1,e=!1,We=!1,_t="function"==typeof setTimeout?setTimeout:null,xe="function"==typeof clearTimeout?clearTimeout:null,Ie=typeof setImmediate<"u"?setImmediate:null;function Bt(ne){for(var Se=f(nt);null!==Se;){if(null===Se.callback)L(nt);else{if(!(Se.startTime<=ne))break;L(nt),Se.sortIndex=Se.expirationTime,ue(it,Se)}Se=f(nt)}}function vt(ne){if(We=!1,Bt(ne),!e)if(null!==f(it))e=!0,an(At);else{var Se=f(nt);null!==Se&&eo(vt,Se.startTime-ne)}}function At(ne,Se){e=!1,We&&(We=!1,xe(je),je=-1),Be=!0;var Ee=Fe;try{for(Bt(Se),Ve=f(it);null!==Ve&&(!(Ve.expirationTime>Se)||ne&&!gn());){var Oe=Ve.callback;if("function"==typeof Oe){Ve.callback=null,Fe=Ve.priorityLevel;var j=Oe(Ve.expirationTime<=Se);Se=oe.unstable_now(),"function"==typeof j?Ve.callback=j:Ve===f(it)&&L(it),Bt(Se)}else L(it);Ve=f(it)}if(null!==Ve)var J=!0;else{var we=f(nt);null!==we&&eo(vt,we.startTime-Se),J=!1}return J}finally{Ve=null,Fe=Ee,Be=!1}}typeof navigator<"u"&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var vn,rt=!1,Rt=null,je=-1,dt=5,Dn=-1;function gn(){return!(oe.unstable_now()-Dn<dt)}function Vn(){if(null!==Rt){var ne=oe.unstable_now();Dn=ne;var Se=!0;try{Se=Rt(!0,ne)}finally{Se?vn():(rt=!1,Rt=null)}}else rt=!1}if("function"==typeof Ie)vn=function(){Ie(Vn)};else if(typeof MessageChannel<"u"){var yn=new MessageChannel,Wt=yn.port2;yn.port1.onmessage=Vn,vn=function(){Wt.postMessage(null)}}else vn=function(){_t(Vn,0)};function an(ne){Rt=ne,rt||(rt=!0,vn())}function eo(ne,Se){je=_t(function(){ne(oe.unstable_now())},Se)}oe.unstable_IdlePriority=5,oe.unstable_ImmediatePriority=1,oe.unstable_LowPriority=4,oe.unstable_NormalPriority=3,oe.unstable_Profiling=null,oe.unstable_UserBlockingPriority=2,oe.unstable_cancelCallback=function(ne){ne.callback=null},oe.unstable_continueExecution=function(){e||Be||(e=!0,an(At))},oe.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dt=0<ne?Math.floor(1e3/ne):5},oe.unstable_getCurrentPriorityLevel=function(){return Fe},oe.unstable_getFirstCallbackNode=function(){return f(it)},oe.unstable_next=function(ne){switch(Fe){case 1:case 2:case 3:var Se=3;break;default:Se=Fe}var Ee=Fe;Fe=Se;try{return ne()}finally{Fe=Ee}},oe.unstable_pauseExecution=function(){},oe.unstable_requestPaint=function(){},oe.unstable_runWithPriority=function(ne,Se){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Ee=Fe;Fe=ne;try{return Se()}finally{Fe=Ee}},oe.unstable_scheduleCallback=function(ne,Se,Ee){var Oe=oe.unstable_now();switch(Ee="object"==typeof Ee&&null!==Ee&&"number"==typeof(Ee=Ee.delay)&&0<Ee?Oe+Ee:Oe,ne){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return ne={id:sn++,callback:Se,priorityLevel:ne,startTime:Ee,expirationTime:j=Ee+j,sortIndex:-1},Ee>Oe?(ne.sortIndex=Ee,ue(nt,ne),null===f(it)&&ne===f(nt)&&(We?(xe(je),je=-1):We=!0,eo(vt,Ee-Oe))):(ne.sortIndex=j,ue(it,ne),e||Be||(e=!0,an(At))),ne},oe.unstable_shouldYield=gn,oe.unstable_wrapCallback=function(ne){var Se=Fe;return function(){var Ee=Fe;Fe=Se;try{return ne.apply(this,arguments)}finally{Fe=Ee}}}},1605:(Ut,oe,ue)=>{Ut.exports=ue(6290)},2058:(Ut,oe,ue)=>{var f=ue(1395),N="function"==typeof Object.is?Object.is:function L(Be,e){return Be===e&&(0!==Be||1/Be==1/e)||Be!=Be&&e!=e},mt=f.useState,kt=f.useEffect,zt=f.useLayoutEffect,it=f.useDebugValue;function sn(Be){var e=Be.getSnapshot;Be=Be.value;try{var We=e();return!N(Be,We)}catch{return!0}}var Fe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function Ve(Be,e){return e()}:function nt(Be,e){var We=e(),_t=mt({inst:{value:We,getSnapshot:e}}),xe=_t[0].inst,Ie=_t[1];return zt(function(){xe.value=We,xe.getSnapshot=e,sn(xe)&&Ie({inst:xe})},[Be,We,e]),kt(function(){return sn(xe)&&Ie({inst:xe}),Be(function(){sn(xe)&&Ie({inst:xe})})},[Be]),it(We),We};oe.useSyncExternalStore=void 0!==f.useSyncExternalStore?f.useSyncExternalStore:Fe},7973:(Ut,oe,ue)=>{var f=ue(1395),L=ue(6485),mt="function"==typeof Object.is?Object.is:function N(Ve,Fe){return Ve===Fe&&(0!==Ve||1/Ve==1/Fe)||Ve!=Ve&&Fe!=Fe},kt=L.useSyncExternalStore,zt=f.useRef,it=f.useEffect,nt=f.useMemo,sn=f.useDebugValue;oe.useSyncExternalStoreWithSelector=function(Ve,Fe,Be,e,We){var _t=zt(null);if(null===_t.current){var xe={hasValue:!1,value:null};_t.current=xe}else xe=_t.current;_t=nt(function(){function Bt(je){if(!vt){if(vt=!0,At=je,je=e(je),void 0!==We&&xe.hasValue){var dt=xe.value;if(We(dt,je))return rt=dt}return rt=je}if(dt=rt,mt(At,je))return dt;var Dn=e(je);return void 0!==We&&We(dt,Dn)?(At=je,dt):(At=je,rt=Dn)}var At,rt,vt=!1,Rt=void 0===Be?null:Be;return[function(){return Bt(Fe())},null===Rt?void 0:function(){return Bt(Rt())}]},[Fe,Be,e,We]);var Ie=kt(Ve,_t[0],_t[1]);return it(function(){xe.hasValue=!0,xe.value=Ie},[Ie]),sn(Ie),Ie}},6485:(Ut,oe,ue)=>{Ut.exports=ue(2058)},7528:(Ut,oe,ue)=>{Ut.exports=ue(7973)}}]);