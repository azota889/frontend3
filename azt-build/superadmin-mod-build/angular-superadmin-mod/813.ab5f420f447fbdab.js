(self.webpackChunkSuperadminMod=self.webpackChunkSuperadminMod||[]).push([[813],{55443:(ie,l,S)=>{"use strict";S.d(l,{q:()=>p});var e=S(93953),U=S(1654),F=S(25919),X=S(88048),N=S(60177),c=S(89417),v=S(32108),V=S(46412),H=S(8516),z=S(23424),B=S(11782),W=S(9788);const g=a=>({active:a}),M=a=>[a];function _(a,k){if(1&a){const x=e.RV6();e.j41(0,"li",5)(1,"a",6),e.bIt("click",function(){e.eBV(x);const G=e.XpG(2);return e.Njj(G.clickPage(G.page-1))}),e.j41(2,"span",7),e.EFF(3,"\xab"),e.k0s(),e.j41(4,"span",8),e.EFF(5,"Previous"),e.k0s()()()}}function A(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",13),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(2),e.k0s()}if(2&a){const x=e.XpG().$implicit,T=e.XpG(3);e.Y8G("routerLink",e.eq3(5,M,e.bMT(1,3,T.linkPage)))("queryParams",T.eventSearchHandle(x)),e.R7$(2),e.JRh(x)}}function I(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",14),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(2),e.k0s()}if(2&a){const x=e.XpG().$implicit,T=e.XpG(3);e.Y8G("routerLink",e.eq3(5,M,e.bMT(1,3,T.linkPage)))("queryParams",T.eventSearchHandle(x)),e.R7$(2),e.JRh(x)}}function y(a,k){if(1&a&&(e.j41(0,"li",10),e.DNE(1,A,3,7,"a",11)(2,I,3,7,"a",12),e.k0s()),2&a){const x=k.$implicit,T=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,T.page==x)),e.R7$(),e.Y8G("ngIf",T.page==x),e.R7$(),e.Y8G("ngIf",T.page!=x&&x<=T.page+3&&x>=T.page-3)}}function n(a,k){if(1&a&&(e.qex(0),e.DNE(1,y,3,5,"li",9),e.bVm()),2&a){const x=e.XpG(2);e.R7$(),e.Y8G("ngForOf",x.pageObj.arrayPag)}}function i(a,k){if(1&a){const x=e.RV6();e.j41(0,"li",5)(1,"a",17),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(x);const G=e.XpG(3);return e.Njj(G.clickPage(1))}),e.EFF(3,"1"),e.k0s()()}if(2&a){const x=e.XpG(3);e.R7$(),e.Y8G("routerLink",e.eq3(4,M,e.bMT(2,2,x.linkPage)))("queryParams",x.eventSearchHandle(1))}}function d(a,k){1&a&&(e.j41(0,"a",18),e.EFF(1,"..."),e.k0s())}function P(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",20),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(2),e.k0s()}if(2&a){const x=e.XpG().$implicit,T=e.XpG(3);e.Y8G("routerLink",e.eq3(5,M,e.bMT(1,3,T.linkPage)))("queryParams",T.eventSearchHandle(x)),e.R7$(2),e.JRh(x)}}function f(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",14),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(2),e.k0s()}if(2&a){const x=e.XpG().$implicit,T=e.XpG(3);e.Y8G("routerLink",e.eq3(5,M,e.bMT(1,3,T.linkPage)))("queryParams",T.eventSearchHandle(x)),e.R7$(2),e.JRh(x)}}function w(a,k){if(1&a&&(e.j41(0,"li",10),e.DNE(1,P,3,7,"a",19)(2,f,3,7,"a",12),e.k0s()),2&a){const x=k.$implicit,T=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,T.page==x)),e.R7$(),e.Y8G("ngIf",T.page==x),e.R7$(),e.Y8G("ngIf",T.page!=x&&x<T.page+3&&x>=T.page-1)}}function b(a,k){1&a&&(e.j41(0,"span",18),e.EFF(1,"..."),e.k0s())}function h(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",21),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(x);const G=e.XpG(3);return e.Njj(G.clickPage(G.pageObj.totalPaginationPage))}),e.EFF(2),e.k0s()}if(2&a){const x=e.XpG(3);e.Y8G("routerLink",e.eq3(5,M,e.bMT(1,3,x.linkPage)))("queryParams",x.eventSearchHandle(x.pageObj.totalPaginationPage)),e.R7$(2),e.SpI(" ",x.pageObj.totalPaginationPage," ")}}function E(a,k){if(1&a&&(e.qex(0),e.DNE(1,i,4,6,"li",3),e.j41(2,"li",5),e.DNE(3,d,2,0,"a",15),e.k0s(),e.DNE(4,w,3,5,"li",9),e.j41(5,"li",5),e.DNE(6,b,2,0,"span",15),e.k0s(),e.j41(7,"li",5),e.DNE(8,h,3,7,"a",16),e.k0s(),e.bVm()),2&a){const x=e.XpG(2);e.R7$(),e.Y8G("ngIf",x.page>=3),e.R7$(2),e.Y8G("ngIf",x.page>=4),e.R7$(),e.Y8G("ngForOf",x.pageObj.arrayPag),e.R7$(2),e.Y8G("ngIf",x.page<x.pageObj.totalPaginationPage-3),e.R7$(2),e.Y8G("ngIf",x.page<x.pageObj.totalPaginationPage-2)}}function D(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",24),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(1),e.k0s()}if(2&a){const x=e.XpG().$implicit;e.R7$(),e.JRh(x)}}function j(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(1),e.k0s()}if(2&a){const x=e.XpG().$implicit;e.R7$(),e.JRh(x)}}function $(a,k){if(1&a&&(e.j41(0,"li",10),e.DNE(1,D,2,1,"a",22)(2,j,2,1,"a",23),e.k0s()),2&a){const x=k.$implicit,T=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,T.page==x)),e.R7$(),e.Y8G("ngIf",T.page==x),e.R7$(),e.Y8G("ngIf",T.page!=x&&x<=T.page+3&&x>=T.page-3)}}function Z(a,k){if(1&a&&(e.qex(0),e.DNE(1,$,3,5,"li",9),e.bVm()),2&a){const x=e.XpG(2);e.R7$(),e.Y8G("ngForOf",x.pageObj.arrayPag)}}function K(a,k){if(1&a){const x=e.RV6();e.j41(0,"li",5)(1,"a",27),e.bIt("click",function(){e.eBV(x);const G=e.XpG(3);return e.Njj(G.clickPage(1))}),e.EFF(2,"1"),e.k0s()()}}function ee(a,k){1&a&&(e.j41(0,"a",18),e.EFF(1,"..."),e.k0s())}function ue(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",29),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(1),e.k0s()}if(2&a){const x=e.XpG().$implicit;e.R7$(),e.JRh(x)}}function ce(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){e.eBV(x);const G=e.XpG().$implicit,q=e.XpG(3);return e.Njj(q.clickPage(G))}),e.EFF(1),e.k0s()}if(2&a){const x=e.XpG().$implicit;e.R7$(),e.JRh(x)}}function O(a,k){if(1&a&&(e.j41(0,"li",10),e.DNE(1,ue,2,1,"a",28)(2,ce,2,1,"a",23),e.k0s()),2&a){const x=k.$implicit,T=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,T.page==x)),e.R7$(),e.Y8G("ngIf",T.page==x),e.R7$(),e.Y8G("ngIf",T.page!=x&&x<T.page+3&&x>=T.page-1)}}function r(a,k){1&a&&(e.j41(0,"span",18),e.EFF(1,"..."),e.k0s())}function t(a,k){if(1&a){const x=e.RV6();e.j41(0,"a",30),e.bIt("click",function(){e.eBV(x);const G=e.XpG(3);return e.Njj(G.clickPage(G.pageObj.totalPaginationPage))}),e.EFF(1),e.k0s()}if(2&a){const x=e.XpG(3);e.R7$(),e.JRh(x.pageObj.totalPaginationPage)}}function s(a,k){if(1&a&&(e.qex(0),e.DNE(1,K,3,0,"li",3),e.j41(2,"li",5),e.DNE(3,ee,2,0,"a",15),e.k0s(),e.DNE(4,O,3,5,"li",9),e.j41(5,"li",5),e.DNE(6,r,2,0,"span",15),e.k0s(),e.j41(7,"li",5),e.DNE(8,t,2,1,"a",26),e.k0s(),e.bVm()),2&a){const x=e.XpG(2);e.R7$(),e.Y8G("ngIf",x.page>=3),e.R7$(2),e.Y8G("ngIf",x.page>=4),e.R7$(),e.Y8G("ngForOf",x.pageObj.arrayPag),e.R7$(2),e.Y8G("ngIf",x.page<x.pageObj.totalPaginationPage-3),e.R7$(2),e.Y8G("ngIf",x.page<x.pageObj.totalPaginationPage-2)}}function o(a,k){if(1&a){const x=e.RV6();e.j41(0,"li",5)(1,"a",31),e.bIt("click",function(){e.eBV(x);const G=e.XpG(2);return e.Njj(G.clickPage(G.page+1))}),e.j41(2,"span",7),e.EFF(3,"\xbb"),e.k0s(),e.j41(4,"span",8),e.EFF(5,"Next"),e.k0s()()()}}function u(a,k){if(1&a&&(e.j41(0,"nav",1)(1,"ul",2),e.DNE(2,_,6,0,"li",3)(3,n,2,1,"ng-container",4)(4,E,9,5,"ng-container",4)(5,Z,2,1,"ng-container",4)(6,s,9,5,"ng-container",4)(7,o,6,0,"li",3),e.k0s()()),2&a){const x=e.XpG();e.R7$(2),e.Y8G("ngIf",x.page>1),e.R7$(),e.Y8G("ngIf",x.pageObj.totalPaginationPage<=4&&"report_error"==x.screen),e.R7$(),e.Y8G("ngIf",x.pageObj.totalPaginationPage>4&&"report_error"==x.screen),e.R7$(),e.Y8G("ngIf",x.pageObj.totalPaginationPage<=4&&"report_error"!=x.screen),e.R7$(),e.Y8G("ngIf",x.pageObj.totalPaginationPage>4&&"report_error"!=x.screen),e.R7$(),e.Y8G("ngIf",x.pageObj.totalPaginationPage>x.page&&x.pageObj.totalPaginationPage>=2)}}let p=(()=>{var a;class k extends U.H{constructor(){super(...arguments),this.pageObj=new F.d(10),this.screen="",this.linkPage="",this.goToPaginationPage=new e.bkB,this.page=1}eventSearchHandle(T){return""!=this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:T,userPhone:this.eventSearch?.userPhone}:""==this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:T,userId:Number(this.eventSearch?.userId)}:""==this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:T,urls:this.eventSearch?.urls}:""!=this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:T,userPhone:this.eventSearch?.userPhone,userId:Number(this.eventSearch?.userId)}:""!=this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:T,userPhone:this.eventSearch?.userPhone,urls:this.eventSearch?.urls}:""==this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:T,userId:Number(this.eventSearch?.userId),urls:this.eventSearch?.urls}:""==this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:T}:""!=this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:T,userPhone:this.eventSearch?.userPhone,userId:Number(this.eventSearch?.userId),urls:this.eventSearch?.urls}:void 0}clickPage(T){this.page=T,this.goToPaginationPage.emit(T)}ngOnInit(){this.pageObj.arrayPag=[],this.page=this.pageObj.page??0,this.pageObj.arrayPage(),super.ngOnInit()}ngOnChanges(){this.pageObj.arrayPag=[],this.page=this.pageObj.page??0,this.pageObj.arrayPage()}}return(a=k).\u0275fac=(()=>{let x;return function(G){return(x||(x=e.xGo(a)))(G||a)}})(),a.\u0275cmp=e.VBU({type:a,selectors:[["azt-paging"]],inputs:{pageObj:"pageObj",screen:"screen",eventSearch:"eventSearch",linkPage:"linkPage"},outputs:{goToPaginationPage:"goToPaginationPage"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:1,vars:1,consts:[["class","inline-block",4,"ngIf"],[1,"inline-block"],[1,"pagination"],["class","page-item",4,"ngIf"],[4,"ngIf"],[1,"page-item"],["azt-track-service","azt-paging-rX0eXqN4qW","aria-label","Previous",1,"page-link","zoom-in",3,"click"],["aria-hidden","true"],[1,"sr-only"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],["azt-track-service","azt-paging-Vt48iF7KWz","class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","azt-paging-Vt48iF7KWz",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],[1,"page-link","zoom-in",3,"click","routerLink","queryParams"],["class","page-link zoom-in",4,"ngIf"],["azt-track-service","azt-paging-8E_Z21XPV1","class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","azt-paging-SXAS3r66ZG",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],[1,"page-link","zoom-in"],["azt-track-service","azt-paging-_MTfjoX-Or","class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","azt-paging-_MTfjoX-Or",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],["azt-track-service","azt-paging-8E_Z21XPV1",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],["azt-track-service","azt-paging-sdAfPVcahq","class","page-link zoom-in",3,"click",4,"ngIf"],["class","page-link zoom-in",3,"click",4,"ngIf"],["azt-track-service","azt-paging-sdAfPVcahq",1,"page-link","zoom-in",3,"click"],[1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-L-1rQPYpcp","class","page-link zoom-in",3,"click",4,"ngIf"],["azt-track-service","azt-paging-U-yHiMo-V7",1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-bk-6smj4RZ","class","page-link zoom-in",3,"click",4,"ngIf"],["azt-track-service","azt-paging-bk-6smj4RZ",1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-L-1rQPYpcp",1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-RU-mjdPzDz","aria-label","Next",1,"page-link","zoom-in",3,"click"]],template:function(T,G){1&T&&e.DNE(0,u,8,6,"nav",0),2&T&&e.Y8G("ngIf",G.pageObj.totalPaginationPage&&G.pageObj.totalPaginationPage>1)},dependencies:[X.F2,N.MD,N.YU,N.Sq,N.bT,c.X1,v.iI,v.Wk,c.YN,V.s,H.flO,z.L,B.Id,W.k],encapsulation:2}),k})()},25919:(ie,l,S)=>{"use strict";S.d(l,{d:()=>e});class e{constructor(F){this.totalPaginationPage=0,this.page=1,this.arrayPag=[],this.pageSize=F}arrayPage(){for(let F=1;F<=(this.totalPaginationPage??0);F++)this.arrayPag.push(F)}setTotalPages(F){return this.totalPaginationPage=F%this.pageSize>0?(F-F%this.pageSize)/this.pageSize+1:F>0?F/this.pageSize:1,this.page>this.totalPaginationPage&&(this.page=this.totalPaginationPage),this.totalPaginationPage}setPageNumber(F){return this.page=F,this.page}getViewObjsOfCurrentPage(F){return F.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}}},60126:(ie,l,S)=>{"use strict";S.d(l,{V:()=>J});var e=S(60177),U=S(89417),F=S(34006),X=S(32108),N=S(8516),c=S(93953),v=S(33726),V=S(21413),H=S(86648),z=S(56977),B=S(70152),W=S(5964),g=S(20717),M=S.t(g,2),_=S(33876),A=S.t(_,2);const I=["pdfViewerContainer"];function i(L,te,R){L[te]=R}function d(){return typeof window>"u"}d()||i(M,"verbosity",g.VerbosityLevel.INFOS);var P=function(L){return L[L.DISABLED=0]="DISABLED",L[L.ENABLED=1]="ENABLED",L[L.ENHANCED=2]="ENHANCED",L}(P||{});let f=(()=>{class L{constructor(R,se){if(this.element=R,this.ngZone=se,this.isVisible=!1,this._cMapsUrl=typeof M<"u"?`https://unpkg.com/pdfjs-dist@${g.version}/cmaps/`:null,this._imageResourcesPath=typeof M<"u"?`https://unpkg.com/pdfjs-dist@${g.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=P.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new V.B,this.afterLoadComplete=new c.bkB,this.pageRendered=new c.bkB,this.pageInitialized=new c.bkB,this.textLayerRendered=new c.bkB,this.onError=new c.bkB,this.onProgress=new c.bkB,this.pageChange=new c.bkB(!0),d())return;let le;const me=g.version;le=window[`pdfWorkerSrc${me}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${me}/legacy/build/pdf.worker.min.js`),i(g.GlobalWorkerOptions,"workerSrc",le)}set cMapsUrl(R){this._cMapsUrl=R}set page(R){const se=R=parseInt(R,10)||1;this._pdf&&(R=this.getValidPageNumber(R)),this._page=R,se!==R&&this.pageChange.emit(R)}set renderText(R){this._renderText=R}set renderTextMode(R){this._renderTextMode=R}set originalSize(R){this._originalSize=R}set showAll(R){this._showAll=R}set stickToPage(R){this._stickToPage=R}set zoom(R){R<=0||(this._zoom=R)}get zoom(){return this._zoom}set zoomScale(R){this._zoomScale=R}get zoomScale(){return this._zoomScale}set rotation(R){"number"==typeof R&&R%90==0?this._rotation=R:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(R){this._externalLinkTarget=R}set autoresize(R){this._canAutoResize=!!R}set fitToPage(R){this._fitToPage=!!R}set showBorders(R){this._showBorders=!!R}static getLinkTarget(R){switch(R){case"blank":return _.LinkTarget.BLANK;case"none":return _.LinkTarget.NONE;case"self":return _.LinkTarget.SELF;case"parent":return _.LinkTarget.PARENT;case"top":return _.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const R=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=R?!1===this.isVisible&&null!=R&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(R){if(!d()&&this.isVisible)if("src"in R)this.loadPDF();else if(this._pdf){if("renderText"in R?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:P.DISABLED,this.resetPdfDocument()):"showAll"in R&&(this.setupViewer(),this.resetPdfDocument()),"page"in R){const{page:se}=R;if(se.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,H.H)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,z.Q)(this.destroy$)).subscribe({next:R=>{const se=this._rotation+R.rotate,le=R.getViewport({scale:this._zoom,rotation:se}).width*L.CSS_UNITS;let me=this._zoom,ve=!0;if(!this._originalSize||this._fitToPage&&le>this.pdfViewerContainer.nativeElement.clientWidth){const ae=R.getViewport({scale:1,rotation:se});me=this.getScale(ae.width,ae.height),ve=!this._stickToPage}this.pdfViewer._setScale(me,ve)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const R=L.getLinkTarget(this._externalLinkTarget);return R?{externalLinkTarget:R}:{}}initEventBus(){this.eventBus=function y(L,te){const R=new L.EventBus;return function n(L,te){(0,v.R)(L,"documentload").pipe((0,z.Q)(te)).subscribe(()=>{const R=document.createEvent("CustomEvent");R.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(R)}),(0,v.R)(L,"pagerendered").pipe((0,z.Q)(te)).subscribe(({pageNumber:R,cssTransform:se,source:le})=>{const me=document.createEvent("CustomEvent");me.initCustomEvent("pagerendered",!0,!0,{pageNumber:R,cssTransform:se}),le.div.dispatchEvent(me)}),(0,v.R)(L,"textlayerrendered").pipe((0,z.Q)(te)).subscribe(({pageNumber:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:R}),se.textLayerDiv.dispatchEvent(le)}),(0,v.R)(L,"pagechanging").pipe((0,z.Q)(te)).subscribe(({pageNumber:R,source:se})=>{const le=document.createEvent("UIEvents");le.initEvent("pagechanging",!0,!0),le.pageNumber=R,se.container.dispatchEvent(le)}),(0,v.R)(L,"pagesinit").pipe((0,z.Q)(te)).subscribe(({source:R})=>{const se=document.createEvent("CustomEvent");se.initCustomEvent("pagesinit",!0,!0,null),R.container.dispatchEvent(se)}),(0,v.R)(L,"pagesloaded").pipe((0,z.Q)(te)).subscribe(({pagesCount:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("pagesloaded",!0,!0,{pagesCount:R}),se.container.dispatchEvent(le)}),(0,v.R)(L,"scalechange").pipe((0,z.Q)(te)).subscribe(({scale:R,presetValue:se,source:le})=>{const me=document.createEvent("UIEvents");me.initEvent("scalechange",!0,!0),me.scale=R,me.presetValue=se,le.container.dispatchEvent(me)}),(0,v.R)(L,"updateviewarea").pipe((0,z.Q)(te)).subscribe(({location:R,source:se})=>{const le=document.createEvent("UIEvents");le.initEvent("updateviewarea",!0,!0),le.location=R,se.container.dispatchEvent(le)}),(0,v.R)(L,"find").pipe((0,z.Q)(te)).subscribe(({source:R,type:se,query:le,phraseSearch:me,caseSensitive:ve,highlightAll:ae,findPrevious:Y})=>{if(R===window)return;const Q=document.createEvent("CustomEvent");Q.initCustomEvent("find"+se,!0,!0,{query:le,phraseSearch:me,caseSensitive:ve,highlightAll:ae,findPrevious:Y}),window.dispatchEvent(Q)}),(0,v.R)(L,"attachmentsloaded").pipe((0,z.Q)(te)).subscribe(({attachmentsCount:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:R}),se.container.dispatchEvent(le)}),(0,v.R)(L,"sidebarviewchanged").pipe((0,z.Q)(te)).subscribe(({view:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("sidebarviewchanged",!0,!0,{view:R}),se.outerContainer.dispatchEvent(le)}),(0,v.R)(L,"pagemode").pipe((0,z.Q)(te)).subscribe(({mode:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("pagemode",!0,!0,{mode:R}),se.pdfViewer.container.dispatchEvent(le)}),(0,v.R)(L,"namedaction").pipe((0,z.Q)(te)).subscribe(({action:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("namedaction",!0,!0,{action:R}),se.pdfViewer.container.dispatchEvent(le)}),(0,v.R)(L,"presentationmodechanged").pipe((0,z.Q)(te)).subscribe(({active:R,switchInProgress:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("presentationmodechanged",!0,!0,{active:R,switchInProgress:se}),window.dispatchEvent(le)}),(0,v.R)(L,"outlineloaded").pipe((0,z.Q)(te)).subscribe(({outlineCount:R,source:se})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("outlineloaded",!0,!0,{outlineCount:R}),se.container.dispatchEvent(le)})}(R,te),R}(A,this.destroy$),(0,v.R)(this.eventBus,"pagerendered").pipe((0,z.Q)(this.destroy$)).subscribe(R=>{this.pageRendered.emit(R)}),(0,v.R)(this.eventBus,"pagesinit").pipe((0,z.Q)(this.destroy$)).subscribe(R=>{this.pageInitialized.emit(R)}),(0,v.R)(this.eventBus,"pagechanging").pipe((0,z.Q)(this.destroy$)).subscribe(({pageNumber:R})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=R,this.pageChange.emit(R)},100)}),(0,v.R)(this.eventBus,"textlayerrendered").pipe((0,z.Q)(this.destroy$)).subscribe(R=>{this.textLayerRendered.emit(R)})}initPDFServices(){this.pdfLinkService=new _.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new _.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:P.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){i(M,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new _.PDFViewer(this.getPDFOptions()):new _.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(R){return R<1?1:R>this._pdf.numPages?this._pdf.numPages:R}getDocumentParams(){const R=typeof this.src;if(!this._cMapsUrl)return this.src;const se={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===R?se.url=this.src:"object"===R&&(void 0!==this.src.byteLength?se.data=this.src:Object.assign(se,this.src)),se}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=g.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=se=>{this.onProgress.emit(se)};const R=this.src;(0,H.H)(this.loadingTask.promise).pipe((0,z.Q)(this.destroy$)).subscribe({next:se=>{this._pdf=se,this.lastLoaded=R,this.afterLoadComplete.emit(se),this.resetPdfDocument(),this.update()},error:se=>{this.lastLoaded=null,this.onError.emit(se)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(R,se){const le=this._showBorders?2*L.BORDER_WIDTH:0,me=this.pdfViewerContainer.nativeElement.clientWidth-le,ve=this.pdfViewerContainer.nativeElement.clientHeight-le;if(0===ve||0===se||0===me||0===R)return 1;let ae=1;switch(this._zoomScale){case"page-fit":ae=Math.min(ve/se,me/R);break;case"page-height":ae=ve/se;break;default:ae=me/R}return this._zoom*ae/L.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){d()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){d()||this.ngZone.runOutsideAngular(()=>{(0,v.R)(window,"resize").pipe((0,B.B)(100),(0,W.p)(()=>this._canAutoResize&&!!this._pdf),(0,z.Q)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return L.CSS_UNITS=96/72,L.BORDER_WIDTH=9,L.\u0275fac=function(R){return new(R||L)(c.rXU(c.aKT),c.rXU(c.SKi))},L.\u0275cmp=c.VBU({type:L,selectors:[["pdf-viewer"]],viewQuery:function(R,se){if(1&R&&c.GBs(I,5),2&R){let le;c.mGM(le=c.lsd())&&(se.pdfViewerContainer=le.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[c.OA$],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(R,se){1&R&&(c.j41(0,"div",1,0),c.nrm(2,"div",2),c.k0s())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),L})(),w=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=c.$C({type:L}),L.\u0275inj=c.G2t({}),L})();var b=S(11782),h=S(46412),E=S(85389),D=S(88048),j=S(23424),$=S(44764),Z=S(1654),K=S(9788);let ee=(()=>{var L;class te extends Z.H{constructor(){super(...arguments),this.audioMimesType="",this.loadedEvent=new c.bkB}onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}}return(L=te).\u0275fac=(()=>{let R;return function(le){return(R||(R=c.xGo(L)))(le||L)}})(),L.\u0275cmp=c.VBU({type:L,selectors:[["azt-audio-embed"]],inputs:{cdnLink:"cdnLink",audioMimesType:"audioMimesType"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[c.Vt3,c.aNF],decls:3,vars:2,consts:[["controls",""],[3,"load","src"]],template:function(se,le){1&se&&(c.j41(0,"audio",0)(1,"source",1),c.bIt("load",function(){return le.onLoad()}),c.k0s(),c.EFF(2," Your browser does not support the audio element.\n"),c.k0s()),2&se&&(c.R7$(),c.Y8G("src",le.cdnLink,c.B4B),c.BMQ("type",le.audioMimesType))},dependencies:[e.MD,U.X1,X.iI,U.YN,h.s,N.flO,j.L,b.Id,K.k],encapsulation:2}),te})();var ue=S(45312),ce=S(75682);let O=(()=>{var L;class te{constructor(se){this.configService=se}getCurrentVersion(){return ue.c.versionTime}getGlobalNotice(){return this.configService.getConfig("globalNotice")}getEnvValue(se){return this.configService.getConfig(se)}getLinkEmbedDocument(se){var le=this.configService.getConfig("docView");return le&&"MICROSOFT"!=le?`https://docs.google.com/viewer?url=${se}&embedded=true`:`https://view.officeapps.live.com/op/embed.aspx?src=${se}`}getVersionMarkNote(se){if(!se)return 1000009;const ve=se.match(/ver=(\d+)/);return Number(ve?.[1]??1000009)}}return(L=te).\u0275fac=function(se){return new(se||L)(c.KVO(ce.u))},L.\u0275prov=c.jDH({token:L,factory:L.\u0275fac,providedIn:"root"}),te})(),r=(()=>{var L;class te extends Z.H{onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}checkValidLink(){this.whiteListOfficeIframeSrc=this.envService.getLinkEmbedDocument(this.cdnLink)}ngOnChanges(){this.checkValidLink()}ngOnInit(){super.ngOnInit(),this.checkValidLink()}constructor(se){super(),this.envService=se,this.videoMimesType="",this.classNames="",this.styles="",this.loadedEvent=new c.bkB,this.whiteListOfficeIframeSrc=""}}return(L=te).\u0275fac=function(se){return new(se||L)(c.rXU(O))},L.\u0275cmp=c.VBU({type:L,selectors:[["azt-office-embed"]],inputs:{cdnLink:"cdnLink",videoMimesType:"videoMimesType",classNames:"classNames",styles:"styles"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[c.Vt3,c.OA$,c.aNF],decls:2,vars:6,consts:[["frameborder","0",3,"load","src"]],template:function(se,le){1&se&&(c.j41(0,"iframe",0),c.nI1(1,"safe"),c.bIt("load",function(){return le.onLoad()}),c.k0s()),2&se&&(c.HbH(le.classNames),c.Y8G("src",c.bMT(1,4,le.whiteListOfficeIframeSrc),c.f$h),c.BMQ("style",le.styles,c.$dS))},dependencies:[e.MD,U.X1,X.iI,U.YN,h.s,N.flO,j.L,D.JI,b.Id,K.k],encapsulation:2}),te})();var t=S(30766),s=S(30665),o=function(L){return L.unknown="unknown",L.xlsx="xlsx",L.image="image",L.jpeg="jpeg",L.doc="doc",L.docx="docx",L.ppt="ppt",L.pptx="pptx",L.pdf="pdf",L.video="video",L.mp4="mp4",L.mov="mov",L.webm="webm",L.quicktime="quicktime",L.audio="audio",L.mp3="mp3",L.wav="wav",L.google_docs="google_docs",L.exam="exam",L.homework="homework",L.powerpoint="powerpoint",L}(o||{}),u=S(345),p=S(58850);const a=L=>({flex:L});function k(L,te){1&L&&(c.j41(0,"div",3)(1,"span",4),c.nrm(2,"azt-loading-ui"),c.k0s(),c.j41(3,"span",5),c.EFF(4,"Loading..."),c.k0s()())}function x(L,te){if(1&L&&(c.j41(0,"span"),c.EFF(1),c.nI1(2,"mytranslate"),c.k0s()),2&L){const R=c.XpG(3);c.R7$(),c.Lme("",c.bMT(2,2,"lang_auto_dung_luong"),": ",R.fileMb," MB |")}}function T(L,te){if(1&L&&(c.j41(0,"div",20),c.DNE(1,x,3,4,"span",21),c.EFF(2),c.nI1(3,"mytranslate"),c.k0s()),2&L){const R=c.XpG(2);c.R7$(),c.Y8G("ngIf",0!=R.fileMb),c.R7$(),c.Lme(" ",c.bMT(3,3,"lang_auto_loai"),": ",R.fileOption.mimes," ")}}function G(L,te){1&L&&(c.j41(0,"div",20),c.EFF(1),c.nI1(2,"mytranslate"),c.k0s()),2&L&&(c.R7$(),c.JRh(c.bMT(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function q(L,te){if(1&L&&(c.j41(0,"a",22),c.nrm(1,"lucide-icon",23),c.k0s()),2&L){const R=c.XpG(2);c.BMQ("href",R.rootLink,c.B4B)("download",R.fileOption.name)}}function he(L,te){if(1&L){const R=c.RV6();c.j41(0,"azt-audio-embed",30),c.bIt("onLoad",function(){c.eBV(R);const le=c.XpG(4);return c.Njj(le.onLoad())}),c.k0s()}if(2&L){let R;const se=c.XpG(4);c.Y8G("cdnLink",se.cdnLink)("audioMimesType",null!==(R=se.fileOption.mimes)&&void 0!==R?R:"")}}function de(L,te){if(1&L&&(c.j41(0,"div")(1,"div",28),c.DNE(2,he,1,2,"azt-audio-embed",29),c.k0s()()),2&L){const R=c.XpG(3);c.R7$(2),c.Y8G("ngIf",R.cdnLink)}}function ge(L,te){if(1&L){const R=c.RV6();c.j41(0,"div")(1,"div",31)(2,"azt-video-embed",32),c.bIt("loadedEvent",function(){c.eBV(R);const le=c.XpG(3);return c.Njj(le.onLoad())}),c.k0s()()()}if(2&L){let R;const se=c.XpG(3);c.R7$(2),c.Y8G("cdnLink",se.cdnLink)("videoMimesType",null!==(R=se.fileOption.mimes)&&void 0!==R?R:"")("videoThumbUrl",se.videoThumbUrl)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function _e(L,te){if(1&L){const R=c.RV6();c.j41(0,"div")(1,"div",33)(2,"azt-office-embed",34),c.bIt("loadedEvent",function(){c.eBV(R);const le=c.XpG(3);return c.Njj(le.onLoad())}),c.k0s()()()}if(2&L){const R=c.XpG(3);c.R7$(2),c.Y8G("cdnLink",R.cdnLink)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function fe(L,te){if(1&L){const R=c.RV6();c.j41(0,"div")(1,"div",35)(2,"pdf-viewer",36),c.bIt("load",function(){c.eBV(R);const le=c.XpG(3);return c.Njj(le.onLoad())}),c.k0s()()()}if(2&L){const R=c.XpG(3);c.R7$(2),c.Y8G("src",R.cdnLink)("show-all",!0)}}function m(L,te){if(1&L){const R=c.RV6();c.j41(0,"div")(1,"div",31)(2,"img",37),c.bIt("load",function(){c.eBV(R);const le=c.XpG(3);return c.Njj(le.onLoad())}),c.k0s()()()}if(2&L){const R=c.XpG(3);c.R7$(2),c.BMQ("src",R.cdnLink,c.B4B)}}function C(L,te){if(1&L&&(c.j41(0,"div")(1,"div",31),c.nrm(2,"iframe",38),c.nI1(3,"safe"),c.k0s()()),2&L){const R=c.XpG(3);c.R7$(2),c.HbH("mx-auto"),c.Y8G("src",c.bMT(3,3,R.cdnLink),c.f$h)}}function re(L,te){if(1&L&&(c.qex(0),c.j41(1,"div",24)(2,"div",25),c.DNE(3,de,3,1,"div",21)(4,ge,3,4,"div",21)(5,_e,3,2,"div",21)(6,fe,3,2,"div",21)(7,m,3,1,"div",21)(8,C,4,5,"div",21),c.nrm(9,"div",26),c.k0s(),c.nrm(10,"div",27),c.k0s(),c.bVm()),2&L){const R=c.XpG(2);c.R7$(3),c.Y8G("ngIf","audio"===R.typeFile),c.R7$(),c.Y8G("ngIf","video"===R.typeFile),c.R7$(),c.Y8G("ngIf","officeapps"===R.typeFile),c.R7$(),c.Y8G("ngIf","pdf"===R.typeFile),c.R7$(),c.Y8G("ngIf","image"===R.typeFile),c.R7$(),c.Y8G("ngIf","google_docs"===R.typeFile)}}function oe(L,te){if(1&L){const R=c.RV6();c.j41(0,"div",24)(1,"div",25)(2,"div",39)(3,"img",40),c.bIt("load",function(){c.eBV(R);const le=c.XpG(2);return c.Njj(le.onLoad())}),c.k0s()()()()}if(2&L){const R=c.XpG(2);c.R7$(3),c.BMQ("src",R.fileOption.url,c.B4B)}}function ne(L,te){if(1&L){const R=c.RV6();c.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),c.nrm(4,"div",10),c.nI1(5,"coreModConvertCdnLinkOfGitHub"),c.k0s(),c.j41(6,"div",11),c.EFF(7),c.k0s(),c.DNE(8,T,4,5,"div",12)(9,G,3,3,"div",12),c.k0s(),c.j41(10,"div",13)(11,"span",14),c.DNE(12,q,2,2,"a",15),c.k0s(),c.j41(13,"button",16),c.bIt("click",function(){c.eBV(R);const le=c.XpG();return c.Njj(le.btnClosePreview())}),c.nrm(14,"lucide-icon",17),c.k0s()()(),c.j41(15,"div",18),c.DNE(16,re,11,6,"ng-container",19)(17,oe,4,1,"ng-template",null,0,c.C5r),c.k0s()()}if(2&L){const R=c.sdS(18),se=c.XpG();c.R7$(2),c.Y8G("ngClass",c.eq3(11,a,""==se.fileOption.name)),c.R7$(2),c.xc7("background-image",c.bMT(5,9,"images/documents.png")),c.R7$(3),c.JRh(se.fileOption.name),c.R7$(),c.Y8G("ngIf",se.fileOption.mimes),c.R7$(),c.Y8G("ngIf",!se.fileOption.mimes),c.R7$(3),c.Y8G("ngIf",se.showDownloadIcon),c.R7$(4),c.Y8G("ngIf",!se.viewFullImageWithScroll)("ngIfElse",R)}}let J=(()=>{var L;class te extends E._{onLoad(){this.stopStatusObj()}initData(){let se=this.fileOption?.size?Number(this.fileOption.size):0,le=this.fileOption?.mimes?this.fileOption.mimes:"";this.cdnLink=this.sAztCommonCdnService.getMyCdn(this.fileOption?.url??""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(se),this.typeFile=(0,$.yY)(le),(0,$.VJ)(this.cdnLink)&&(this.typeFile="video"),(0,$.si)(this.cdnLink)&&(this.typeFile="google_docs"),setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.dialogRef.close(!1)}getFileMB(se){return se&&se>0?(se/=1048576).toFixed(2):0}ngOnInit(){if(super.ngOnInit(),document.body.classList.add("overflow-hidden"),this.videoThumbUrl=this.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("images/video-thumb.png"),this.initStatusObj(),this.initData(),this.fileOption?.type===this.allDocumentTypes.google_docs)return window.open(this.fileOption?.url,"_blank")?.focus(),void this.dialogRef.close()}constructor(se,le,me,ve){super(ve,me),this.dom=se,this.sAztCommonCdnService=le,this.dialogRef=me,this.viewFullImageWithScroll=!1,this.showDownloadIcon=!0,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.allDocumentTypes=o,this.fileOption=ve.fileOption,this.viewFullImageWithScroll=ve.viewFullImageWithScroll??!1,this.showDownloadIcon=ve.showDownloadIcon??this.showDownloadIcon}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return(L=te).\u0275fac=function(se){return new(se||L)(c.rXU(u.up),c.rXU(p.c),c.rXU(F.CP,8),c.rXU(F.Vh,8))},L.\u0275cmp=c.VBU({type:L,selectors:[["azt-preview-media-new"]],standalone:!0,features:[c.Vt3,c.aNF],decls:2,vars:2,consts:[["viewFullImage",""],["class","loading-block",4,"ngIf"],["class","box h-full","style","border-radius: 0px",4,"ngIf"],[1,"loading-block"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","h-full",2,"border-radius","0px"],[1,"flex","fixed","top-0","pt-3","border-b","border-slate-200/60","dark:border-darkmode-400","items-center","w-full"],[1,"file-preview__header-left",2,"align-items","center",3,"ngClass"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-size","cover"],[1,"file-preview__header__title"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"mr-4"],["class","btn btn-outline-primary btn-transparent","target","_blank",4,"ngIf"],["azt-track-service","azt-preview-media-c4Ztzr2oIZj",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["name","x","size","24"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],[1,"file-preview__header__send-time"],[4,"ngIf"],["target","_blank",1,"btn","btn-outline-primary","btn-transparent"],["name","download","size","24"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],[3,"cdnLink","audioMimesType","onLoad",4,"ngIf"],[3,"onLoad","cdnLink","audioMimesType"],[1,"pl-2","pr-2","mt-3"],[3,"loadedEvent","cdnLink","videoMimesType","videoThumbUrl","styles"],[1,"pl-2","pr-2","mp-0"],[3,"loadedEvent","cdnLink","styles"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"load","src","show-all"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],["width","850","height","600","frameborder","0","allowfullscreen","",3,"src"],[1,"pl-2","pr-2","mt-3","block-img"],[1,"img-fluid","image-preview",3,"load"]],template:function(se,le){1&se&&c.DNE(0,k,5,0,"div",1)(1,ne,19,13,"div",2),2&se&&(c.Y8G("ngIf",le.statusObj.loading),c.R7$(),c.Y8G("ngIf",null!=le.fileOption&&!le.statusObj.loading))},dependencies:[w,f,s.R,ee,t.y,r,e.MD,e.YU,e.bT,U.X1,X.iI,U.YN,D.wp,D.Vs,h.s,N.flO,N.WGl,j.L,D.JI,b.Id,K.k],styles:[".file-preview[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0;border-radius:0}.block-img[_ngcontent-%COMP%]{width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),te})()},20717:function(module,__unused_webpack_exports,__webpack_require__){var _defineProperty=__webpack_require__(40829).default,_classPrivateMethodInitSpec=__webpack_require__(80816).default,_classPrivateFieldInitSpec=__webpack_require__(43723).default,_classPrivateFieldSet=__webpack_require__(7920).default,_classPrivateFieldGet=__webpack_require__(18188).default,_assertClassBrand=__webpack_require__(45804).default,_asyncToGenerator=__webpack_require__(75453).default,S;S=()=>(()=>{"use strict";var __webpack_modules__=[,(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.UNSUPPORTED_FEATURES=l.TextRenderingMode=l.StreamType=l.RenderingIntentFlag=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FontType=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.AnnotationType=l.AnnotationStateModelType=l.AnnotationReviewState=l.AnnotationReplyType=l.AnnotationMode=l.AnnotationMarkedState=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.arrayByteLength=T,l.arraysToBytes=function G(ae){const Y=ae.length;if(1===Y&&ae[0]instanceof Uint8Array)return ae[0];let Q=0;for(let ye=0;ye<Y;ye++)Q+=T(ae[ye]);let pe=0;const be=new Uint8Array(Q);for(let ye=0;ye<Y;ye++){let Ae=ae[ye];Ae instanceof Uint8Array||(Ae="string"==typeof Ae?x(Ae):new Uint8Array(Ae));const xe=Ae.byteLength;be.set(Ae,pe),pe+=xe}return be},l.assert=function K(ae,Y){ae||Z(Y)},l.bytesToString=function k(ae){("object"!=typeof ae||null===ae||void 0===ae.length)&&Z("Invalid argument for bytesToString");const Y=ae.length,Q=8192;if(Y<Q)return String.fromCharCode.apply(null,ae);const pe=[];for(let be=0;be<Y;be+=Q){const ye=Math.min(be+Q,Y),Ae=ae.subarray(be,ye);pe.push(String.fromCharCode.apply(null,Ae))}return pe.join("")},l.createPromiseCapability=function ve(){const ae=Object.create(null);let Y=!1;return Object.defineProperty(ae,"settled",{get:()=>Y}),ae.promise=new Promise(function(Q,pe){ae.resolve=function(be){Y=!0,Q(be)},ae.reject=function(be){Y=!0,pe(be)}}),ae},l.createValidAbsoluteUrl=function ue(ae,Y=null,Q=null){if(!ae)return null;try{if(Q&&"string"==typeof ae){if(Q.addDefaultProtocol&&ae.startsWith("www.")){const be=ae.match(/\./g);be&&be.length>=2&&(ae=`http://${ae}`)}if(Q.tryConvertEncoding)try{ae=te(ae)}catch{}}const pe=Y?new URL(ae,Y):new URL(ae);if(function ee(ae){if(!ae)return!1;switch(ae.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(pe))return pe}catch{}return null},l.escapeString=function ne(ae){return ae.replace(/([()\\\n\r])/g,Y=>"\n"===Y?"\\n":"\r"===Y?"\\r":`\\${Y}`)},l.getModificationDate=function me(ae=new Date){return[ae.getUTCFullYear().toString(),(ae.getUTCMonth()+1).toString().padStart(2,"0"),ae.getUTCDate().toString().padStart(2,"0"),ae.getUTCHours().toString().padStart(2,"0"),ae.getUTCMinutes().toString().padStart(2,"0"),ae.getUTCSeconds().toString().padStart(2,"0")].join("")},l.getVerbosityLevel=function D(){return h},l.info=function j(ae){h>=d.INFOS&&console.log(`Info: ${ae}`)},l.isArrayBuffer=function se(ae){return"object"==typeof ae&&null!==ae&&void 0!==ae.byteLength},l.isArrayEqual=function le(ae,Y){if(ae.length!==Y.length)return!1;for(let Q=0,pe=ae.length;Q<pe;Q++)if(ae[Q]!==Y[Q])return!1;return!0},l.isAscii=function J(ae){return/^[\x00-\x7F]*$/.test(ae)},l.objectFromMap=function de(ae){const Y=Object.create(null);for(const[Q,pe]of ae)Y[Q]=pe;return Y},l.objectSize=function he(ae){return Object.keys(ae).length},l.setVerbosityLevel=function E(ae){Number.isInteger(ae)&&(h=ae)},l.shadow=ce,l.string32=function q(ae){return String.fromCharCode(ae>>24&255,ae>>16&255,ae>>8&255,255&ae)},l.stringToBytes=x,l.stringToPDFString=function oe(ae){if(ae[0]>="\xef"){let Q;if("\xfe"===ae[0]&&"\xff"===ae[1]?Q="utf-16be":"\xff"===ae[0]&&"\xfe"===ae[1]?Q="utf-16le":"\xef"===ae[0]&&"\xbb"===ae[1]&&"\xbf"===ae[2]&&(Q="utf-8"),Q)try{const pe=new TextDecoder(Q,{fatal:!0}),be=x(ae);return pe.decode(be)}catch(pe){$(`stringToPDFString: "${pe}".`)}}const Y=[];for(let Q=0,pe=ae.length;Q<pe;Q++){const be=re[ae.charCodeAt(Q)];Y.push(be?String.fromCharCode(be):ae.charAt(Q))}return Y.join("")},l.stringToUTF16BEString=function L(ae){const Y=["\xfe\xff"];for(let Q=0,pe=ae.length;Q<pe;Q++){const be=ae.charCodeAt(Q);Y.push(String.fromCharCode(be>>8&255),String.fromCharCode(255&be))}return Y.join("")},l.stringToUTF8String=te,l.unreachable=Z,l.utf8StringToString=function R(ae){return unescape(encodeURIComponent(ae))},l.warn=$,S(2),l.IDENTITY_MATRIX=[1,0,0,1,0,0],l.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],l.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},l.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},l.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},l.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},l.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},l.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},l.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},l.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},l.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},l.AnnotationReplyType={GROUP:"Group",REPLY:"R"},l.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},l.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},l.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},l.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},l.PageActionEventType={O:"PageOpen",C:"PageClose"},l.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},l.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const d={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=d,l.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},l.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},l.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},l.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let h=d.WARNINGS;function $(ae){h>=d.WARNINGS&&console.log(`Warning: ${ae}`)}function Z(ae){throw new Error(ae)}function ce(ae,Y,Q){return Object.defineProperty(ae,Y,{value:Q,enumerable:!0,configurable:!0,writable:!1}),Q}const O=function(){function Y(Q,pe){this.constructor===Y&&Z("Cannot initialize BaseException."),this.message=Q,this.name=pe}return Y.prototype=new Error,Y.constructor=Y,Y}();function x(ae){"string"!=typeof ae&&Z("Invalid argument for stringToBytes");const Y=ae.length,Q=new Uint8Array(Y);for(let pe=0;pe<Y;++pe)Q[pe]=255&ae.charCodeAt(pe);return Q}function T(ae){return void 0!==ae.length?ae.length:void 0!==ae.byteLength?ae.byteLength:void Z("Invalid argument for arrayByteLength")}l.BaseException=O,l.PasswordException=class r extends O{constructor(Y,Q){super(Y,"PasswordException"),this.code=Q}},l.UnknownErrorException=class t extends O{constructor(Y,Q){super(Y,"UnknownErrorException"),this.details=Q}},l.InvalidPDFException=class s extends O{constructor(Y){super(Y,"InvalidPDFException")}},l.MissingPDFException=class o extends O{constructor(Y){super(Y,"MissingPDFException")}},l.UnexpectedResponseException=class u extends O{constructor(Y,Q){super(Y,"UnexpectedResponseException"),this.status=Q}},l.FormatError=class p extends O{constructor(Y){super(Y,"FormatError")}},l.AbortException=class a extends O{constructor(Y){super(Y,"AbortException")}},l.FeatureTest=class fe{static get isLittleEndian(){return ce(this,"isLittleEndian",function ge(){const ae=new Uint8Array(4);return ae[0]=1,1===new Uint32Array(ae.buffer,0,1)[0]}())}static get isEvalSupported(){return ce(this,"isEvalSupported",function _e(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return ce(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const m=[...Array(256).keys()].map(ae=>ae.toString(16).padStart(2,"0"));class C{static makeHexColor(Y,Q,pe){return`#${m[Y]}${m[Q]}${m[pe]}`}static scaleMinMax(Y,Q){let pe;Y[0]?(Y[0]<0&&(pe=Q[0],Q[0]=Q[1],Q[1]=pe),Q[0]*=Y[0],Q[1]*=Y[0],Y[3]<0&&(pe=Q[2],Q[2]=Q[3],Q[3]=pe),Q[2]*=Y[3],Q[3]*=Y[3]):(pe=Q[0],Q[0]=Q[2],Q[2]=pe,pe=Q[1],Q[1]=Q[3],Q[3]=pe,Y[1]<0&&(pe=Q[2],Q[2]=Q[3],Q[3]=pe),Q[2]*=Y[1],Q[3]*=Y[1],Y[2]<0&&(pe=Q[0],Q[0]=Q[1],Q[1]=pe),Q[0]*=Y[2],Q[1]*=Y[2]),Q[0]+=Y[4],Q[1]+=Y[4],Q[2]+=Y[5],Q[3]+=Y[5]}static transform(Y,Q){return[Y[0]*Q[0]+Y[2]*Q[1],Y[1]*Q[0]+Y[3]*Q[1],Y[0]*Q[2]+Y[2]*Q[3],Y[1]*Q[2]+Y[3]*Q[3],Y[0]*Q[4]+Y[2]*Q[5]+Y[4],Y[1]*Q[4]+Y[3]*Q[5]+Y[5]]}static applyTransform(Y,Q){return[Y[0]*Q[0]+Y[1]*Q[2]+Q[4],Y[0]*Q[1]+Y[1]*Q[3]+Q[5]]}static applyInverseTransform(Y,Q){const pe=Q[0]*Q[3]-Q[1]*Q[2];return[(Y[0]*Q[3]-Y[1]*Q[2]+Q[2]*Q[5]-Q[4]*Q[3])/pe,(-Y[0]*Q[1]+Y[1]*Q[0]+Q[4]*Q[1]-Q[5]*Q[0])/pe]}static getAxialAlignedBoundingBox(Y,Q){const pe=C.applyTransform(Y,Q),be=C.applyTransform(Y.slice(2,4),Q),ye=C.applyTransform([Y[0],Y[3]],Q),Ae=C.applyTransform([Y[2],Y[1]],Q);return[Math.min(pe[0],be[0],ye[0],Ae[0]),Math.min(pe[1],be[1],ye[1],Ae[1]),Math.max(pe[0],be[0],ye[0],Ae[0]),Math.max(pe[1],be[1],ye[1],Ae[1])]}static inverseTransform(Y){const Q=Y[0]*Y[3]-Y[1]*Y[2];return[Y[3]/Q,-Y[1]/Q,-Y[2]/Q,Y[0]/Q,(Y[2]*Y[5]-Y[4]*Y[3])/Q,(Y[4]*Y[1]-Y[5]*Y[0])/Q]}static apply3dTransform(Y,Q){return[Y[0]*Q[0]+Y[1]*Q[1]+Y[2]*Q[2],Y[3]*Q[0]+Y[4]*Q[1]+Y[5]*Q[2],Y[6]*Q[0]+Y[7]*Q[1]+Y[8]*Q[2]]}static singularValueDecompose2dScale(Y){const Q=[Y[0],Y[2],Y[1],Y[3]],pe=Y[0]*Q[0]+Y[1]*Q[2],Ae=Y[2]*Q[1]+Y[3]*Q[3],xe=(pe+Ae)/2,Me=Math.sqrt((pe+Ae)**2-4*(pe*Ae-(Y[2]*Q[0]+Y[3]*Q[2])*(Y[0]*Q[1]+Y[1]*Q[3])))/2,Pe=xe-Me||1;return[Math.sqrt(xe+Me||1),Math.sqrt(Pe)]}static normalizeRect(Y){const Q=Y.slice(0);return Y[0]>Y[2]&&(Q[0]=Y[2],Q[2]=Y[0]),Y[1]>Y[3]&&(Q[1]=Y[3],Q[3]=Y[1]),Q}static intersect(Y,Q){const pe=Math.max(Math.min(Y[0],Y[2]),Math.min(Q[0],Q[2])),be=Math.min(Math.max(Y[0],Y[2]),Math.max(Q[0],Q[2]));if(pe>be)return null;const ye=Math.max(Math.min(Y[1],Y[3]),Math.min(Q[1],Q[3])),Ae=Math.min(Math.max(Y[1],Y[3]),Math.max(Q[1],Q[3]));return ye>Ae?null:[pe,ye,be,Ae]}static bezierBoundingBox(Y,Q,pe,be,ye,Ae,xe,Me){const Te=[],Pe=[[],[]];let Ce,we,ke,Se,Le,Re,De,Oe;for(let Ne=0;Ne<2;++Ne)if(0===Ne?(we=6*Y-12*pe+6*ye,Ce=-3*Y+9*pe-9*ye+3*xe,ke=3*pe-3*Y):(we=6*Q-12*be+6*Ae,Ce=-3*Q+9*be-9*Ae+3*Me,ke=3*be-3*Q),Math.abs(Ce)<1e-12){if(Math.abs(we)<1e-12)continue;Se=-ke/we,0<Se&&Se<1&&Te.push(Se)}else De=we*we-4*ke*Ce,Oe=Math.sqrt(De),!(De<0)&&(Le=(-we+Oe)/(2*Ce),0<Le&&Le<1&&Te.push(Le),Re=(-we-Oe)/(2*Ce),0<Re&&Re<1&&Te.push(Re));let Ee,Fe=Te.length;const Ie=Fe;for(;Fe--;)Se=Te[Fe],Ee=1-Se,Pe[0][Fe]=Ee*Ee*Ee*Y+3*Ee*Ee*Se*pe+3*Ee*Se*Se*ye+Se*Se*Se*xe,Pe[1][Fe]=Ee*Ee*Ee*Q+3*Ee*Ee*Se*be+3*Ee*Se*Se*Ae+Se*Se*Se*Me;return Pe[0][Ie]=Y,Pe[1][Ie]=Q,Pe[0][Ie+1]=xe,Pe[1][Ie+1]=Me,Pe[0].length=Pe[1].length=Ie+2,[Math.min(...Pe[0]),Math.min(...Pe[1]),Math.max(...Pe[0]),Math.max(...Pe[1])]}}l.Util=C;const re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function te(ae){return decodeURIComponent(escape(ae))}},(ie,l,S)=>{S(3)},(ie,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isNodeJS=void 0;const S=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);l.isNodeJS=S},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:ie,NodeCMapReaderFactory:l,NodeStandardFontDataFactory:S}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=ie,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=l,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=S}function setPDFNetworkStreamFactory(ie){createPDFNetworkStream=ie}function getDocument(ie){const l=new PDFDocumentLoadingTask;let S;if("string"==typeof ie||ie instanceof URL)S={url:ie};else if((0,_util.isArrayBuffer)(ie))S={data:ie};else if(ie instanceof PDFDataRangeTransport)S={range:ie};else{if("object"!=typeof ie)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!ie.url&&!ie.data&&!ie.range)throw new Error("Invalid parameter object: need either .data, .range or .url");S=ie}const e=Object.create(null);let U=null,F=null;for(const N in S){const c=S[N];switch(N){case"url":if(typeof window<"u")try{e[N]=new URL(c,window.location).href;continue}catch(v){(0,_util.warn)(`Cannot create valid URL: "${v}".`)}else if("string"==typeof c||c instanceof URL){e[N]=c.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":U=c;continue;case"worker":F=c;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)e[N]=new Uint8Array(c);else{if(c instanceof Uint8Array)break;if("string"==typeof c)e[N]=(0,_util.stringToBytes)(c);else if("object"!=typeof c||null===c||isNaN(c.length)){if(!(0,_util.isArrayBuffer)(c))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");e[N]=new Uint8Array(c)}else e[N]=new Uint8Array(c)}continue}e[N]=c}if(e.CMapReaderFactory=e.CMapReaderFactory||DefaultCMapReaderFactory,e.StandardFontDataFactory=e.StandardFontDataFactory||DefaultStandardFontDataFactory,e.ignoreErrors=!0!==e.stopAtErrors,e.fontExtraProperties=!0===e.fontExtraProperties,e.pdfBug=!0===e.pdfBug,e.enableXfa=!0===e.enableXfa,(!Number.isInteger(e.rangeChunkSize)||e.rangeChunkSize<1)&&(e.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl))&&(e.docBaseUrl=null),(!Number.isInteger(e.maxImageSize)||e.maxImageSize<-1)&&(e.maxImageSize=-1),"string"!=typeof e.cMapUrl&&(e.cMapUrl=null),"string"!=typeof e.standardFontDataUrl&&(e.standardFontDataUrl=null),"boolean"!=typeof e.useWorkerFetch&&(e.useWorkerFetch=e.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&e.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof e.isEvalSupported&&(e.isEvalSupported=!0),"boolean"!=typeof e.disableFontFace&&(e.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof e.useSystemFonts&&(e.useSystemFonts=!_is_node.isNodeJS&&!e.disableFontFace),("object"!=typeof e.ownerDocument||null===e.ownerDocument)&&(e.ownerDocument=globalThis.document),"boolean"!=typeof e.disableRange&&(e.disableRange=!1),"boolean"!=typeof e.disableStream&&(e.disableStream=!1),"boolean"!=typeof e.disableAutoFetch&&(e.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(e.verbosity),!F){const N={verbosity:e.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};F=N.port?PDFWorker.fromPort(N):new PDFWorker(N),l._worker=F}const X=l.docId;return F.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const N=_fetchDocument(F,e,U,X),c=new Promise(function(v){let V;U?V=new _transport_stream.PDFDataTransportStream({length:e.length,initialData:e.initialData,progressiveDone:e.progressiveDone,contentDispositionFilename:e.contentDispositionFilename,disableRange:e.disableRange,disableStream:e.disableStream},U):e.data||(V=createPDFNetworkStream({url:e.url,length:e.length,httpHeaders:e.httpHeaders,withCredentials:e.withCredentials,rangeChunkSize:e.rangeChunkSize,disableRange:e.disableRange,disableStream:e.disableStream})),v(V)});return Promise.all([N,c]).then(function([v,V]){if(l.destroyed)throw new Error("Loading aborted");const H=new _message_handler.MessageHandler(X,v,F.port),z=new WorkerTransport(H,l,V,e);l._transport=z,H.send("Ready",null)})}).catch(l._capability.reject),l}function _fetchDocument(ie,l,S,e){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(ie,l,S,e){if(ie.destroyed)throw new Error("Worker was destroyed");S&&(l.length=S.length,l.initialData=S.initialData,l.progressiveDone=S.progressiveDone,l.contentDispositionFilename=S.contentDispositionFilename);const U=yield ie.messageHandler.sendWithPromise("GetDocRequest",{docId:e,apiVersion:"2.14.305",source:{data:l.data,url:l.url,password:l.password,disableAutoFetch:l.disableAutoFetch,rangeChunkSize:l.rangeChunkSize,length:l.length},maxImageSize:l.maxImageSize,disableFontFace:l.disableFontFace,docBaseUrl:l.docBaseUrl,ignoreErrors:l.ignoreErrors,isEvalSupported:l.isEvalSupported,fontExtraProperties:l.fontExtraProperties,enableXfa:l.enableXfa,useSystemFonts:l.useSystemFonts,cMapUrl:l.useWorkerFetch?l.cMapUrl:null,standardFontDataUrl:l.useWorkerFetch?l.standardFontDataUrl:null});if(ie.destroyed)throw new Error("Worker was destroyed");return U})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var l,S;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_docId._=(l=_docId._,S=l++,l),S}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var l=this;return _asyncToGenerator(function*(){l.destroyed=!0,yield l._transport?.destroy(),l._transport=null,l._worker&&(l._worker.destroy(),l._worker=null)})()}}var _docId={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,S,e=!1,U=null){this.length=l,this.initialData=S,this.progressiveDone=e,this.contentDispositionFilename=U,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,S){for(const e of this._rangeListeners)e(l,S)}onDataProgress(l,S){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(l,S)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const S of this._progressiveReadListeners)S(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,S){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,S){var U,e=this;this._pdfInfo=l,this._transport=S,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(U=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),e.stats||{streamTypes:{},fontTypes:{}}}),function(){return U.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,S,e,U,F=!1){this._pageIndex=l,this._pageInfo=S,this._ownerDocument=U,this._transport=e,this._stats=F?new _display_utils.StatTimer:null,this._pdfBug=F,this.commonObjs=e.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:S=this.rotate,offsetX:e=0,offsetY:U=0,dontFlip:F=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:S,offsetX:e,offsetY:U,dontFlip:F})}getAnnotations({intent:l="display"}={}){const S=this._transport.getRenderingIntent(l);let e=this._annotationPromises.get(S.cacheKey);return e||(e=this._transport.getAnnotations(this._pageIndex,S.renderingIntent),this._annotationPromises.set(S.cacheKey,e),e=e.then(U=>{for(const F of U)void 0!==F.titleObj&&Object.defineProperty(F,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),F.titleObj.str)}),void 0!==F.contentsObj&&Object.defineProperty(F,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),F.contentsObj.str)});return U})),e}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var l=this;return _asyncToGenerator(function*(){return l._transport._htmlForXfa?.children[l._pageIndex]||null})()}render({canvasContext:l,viewport:S,intent:e="display",annotationMode:U=_util.AnnotationMode.ENABLE,transform:F=null,imageLayer:X=null,canvasFactory:N=null,background:c=null,optionalContentConfigPromise:v=null,annotationCanvasMap:V=null,pageColors:H=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&U===_util.AnnotationMode.ENABLE&&(U=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&U===_util.AnnotationMode.ENABLE&&(U=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const z=this._transport.getRenderingIntent(e,U);this.pendingCleanup=!1,v||(v=this._transport.getOptionalContentConfig());let B=this._intentStates.get(z.cacheKey);B||(B=Object.create(null),this._intentStates.set(z.cacheKey,B)),B.streamReaderCancelTimeout&&(clearTimeout(B.streamReaderCancelTimeout),B.streamReaderCancelTimeout=null);const W=N||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),g=!!(z.renderingIntent&_util.RenderingIntentFlag.PRINT);B.displayReadyCapability||(B.displayReadyCapability=(0,_util.createPromiseCapability)(),B.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(z));const M=I=>{B.renderTasks.delete(_),(this.cleanupAfterRender||g)&&(this.pendingCleanup=!0),this._tryCleanup(),I?(_.capability.reject(I),this._abortOperatorList({intentState:B,reason:I instanceof Error?I:new Error(I)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},_=new InternalRenderTask({callback:M,params:{canvasContext:l,viewport:S,transform:F,imageLayer:X,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:V,operatorList:B.operatorList,pageIndex:this._pageIndex,canvasFactory:W,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:H});(B.renderTasks||=new Set).add(_);const A=_.task;return Promise.all([B.displayReadyCapability.promise,v]).then(([I,y])=>{this.pendingCleanup?M():(this._stats&&this._stats.time("Rendering"),_.initializeGraphics({transparency:I,optionalContentConfig:y}),_.operatorListChanged())}).catch(M),A}getOperatorList({intent:l="display",annotationMode:S=_util.AnnotationMode.ENABLE}={}){const U=this._transport.getRenderingIntent(l,S,!0);let X,F=this._intentStates.get(U.cacheKey);return F||(F=Object.create(null),this._intentStates.set(U.cacheKey,F)),F.opListReadCapability||(X=Object.create(null),X.operatorListChanged=function e(){F.operatorList.lastChunk&&(F.opListReadCapability.resolve(F.operatorList),F.renderTasks.delete(X))},F.opListReadCapability=(0,_util.createPromiseCapability)(),(F.renderTasks||=new Set).add(X),F.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(U)),F.opListReadCapability.promise}streamTextContent({disableCombineTextItems:l=!1,includeMarkedContent:S=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==l,includeMarkedContent:!0===S},{highWaterMark:100,size:U=>U.items.length})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>_xfa_text.XfaText.textContent(e));const S=this.streamTextContent(l);return new Promise(function(e,U){const X=S.getReader(),N={items:[],styles:Object.create(null)};!function F(){X.read().then(function({value:c,done:v}){v?e(N):(Object.assign(N.styles,c.styles),N.items.push(...c.items),F())},U)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const S of this._intentStates.values())if(this._abortOperatorList({intentState:S,reason:new Error("Page was destroyed."),force:!0}),!S.opListReadCapability)for(const e of S.renderTasks)l.push(e.completed),e.cancel();this.objs.clear();for(const S of this._bitmaps)S.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(l)}cleanup(l=!1){return this.pendingCleanup=!0,this._tryCleanup(l)}_tryCleanup(l=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:S,operatorList:e}of this._intentStates.values())if(S.size>0||!e.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,l&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const S of this._bitmaps)S.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(l,S){const e=this._intentStates.get(S);e&&(this._stats&&this._stats.timeEnd("Page Request"),e.displayReadyCapability&&e.displayReadyCapability.resolve(l))}_renderPageChunk(l,S){for(let e=0,U=l.length;e<U;e++)S.operatorList.fnArray.push(l.fnArray[e]),S.operatorList.argsArray.push(l.argsArray[e]);S.operatorList.lastChunk=l.lastChunk;for(const e of S.renderTasks)e.operatorListChanged();l.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:l,cacheKey:S}){const U=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:S,annotationStorage:l&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),F=this._intentStates.get(S);F.streamReader=U;const X=()=>{U.read().then(({value:N,done:c})=>{c?F.streamReader=null:this._transport.destroyed||(this._renderPageChunk(N,F),X())},N=>{if(F.streamReader=null,!this._transport.destroyed){if(F.operatorList){F.operatorList.lastChunk=!0;for(const c of F.renderTasks)c.operatorListChanged();this._tryCleanup()}if(F.displayReadyCapability)F.displayReadyCapability.reject(N);else{if(!F.opListReadCapability)throw N;F.opListReadCapability.reject(N)}}})};X()}_abortOperatorList({intentState:l,reason:S,force:e=!1}){if(l.streamReader){if(!e){if(l.renderTasks.size>0)return;if(S instanceof _display_utils.RenderingCancelledException)return void(l.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:l,reason:S,force:!0}),l.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(l.streamReader.cancel(new _util.AbortException(S.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[U,F]of this._intentStates)if(F===l){this._intentStates.delete(U);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(l,S){const e={data:structuredClone(l,S)};this._deferred.then(()=>{for(const U of this._listeners)U.call(this,e)})}addEventListener(l,S){this._listeners.push(S)}removeEventListener(l,S){const e=this._listeners.indexOf(S);this._listeners.splice(e,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const ie=document?.currentScript?.src;ie&&(PDFWorkerUtil.fallbackWorkerSrc=ie.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(ie,l){let S;try{if(S=new URL(ie),!S.origin||"null"===S.origin)return!1}catch{return!1}const e=new URL(l,S);return S.origin===e.origin},PDFWorkerUtil.createCDNWrapper=function(ie){return URL.createObjectURL(new Blob([`importScripts("${ie}");`]))};class PDFWorker{constructor({name:ie=null,port:l=null,verbosity:S=(0,_util.getVerbosityLevel)()}={}){if(l&&_workerPorts._.has(l))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=ie,this.destroyed=!1,this.verbosity=S,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l)return _workerPorts._.set(l,this),void this._initializeFromPort(l);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(ie){this._port=ie,this._messageHandler=new _message_handler.MessageHandler("main","worker",ie),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let ie=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,ie)||(ie=PDFWorkerUtil.createCDNWrapper(new URL(ie,window.location).href));const l=new Worker(ie),S=new _message_handler.MessageHandler("main","worker",l),e=()=>{l.removeEventListener("error",U),S.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},U=()=>{this._webWorker||e()};l.addEventListener("error",U),S.on("test",X=>{l.removeEventListener("error",U),this.destroyed?e():X?(this._messageHandler=S,this._port=l,this._webWorker=l,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),S.destroy(),l.terminate())}),S.on("ready",X=>{if(l.removeEventListener("error",U),this.destroyed)e();else try{F()}catch{this._setupFakeWorker()}});const F=()=>{const X=new Uint8Array;S.send("test",X,[X.buffer])};return void F()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(ie=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const l=new LoopbackPort;this._port=l;const S="fake"+PDFWorkerUtil.fakeWorkerId++,e=new _message_handler.MessageHandler(S+"_worker",S,l);ie.setup(e,l);const U=new _message_handler.MessageHandler(S,S+"_worker",l);this._messageHandler=U,this._readyCapability.resolve(),U.send("configure",{verbosity:this.verbosity})}).catch(ie=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${ie.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_workerPorts._.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(ie){if(!ie?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _assertClassBrand(PDFWorker,this,_workerPorts)._.has(ie.port)?_assertClassBrand(PDFWorker,this,_workerPorts)._.get(ie.port):new PDFWorker(ie)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function ie(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={_:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(l,S,e,U){_classPrivateFieldInitSpec(this,_docStats,null),_classPrivateFieldInitSpec(this,_pageCache,new Map),_classPrivateFieldInitSpec(this,_pagePromises,new Map),_classPrivateFieldInitSpec(this,_metadataPromise,null),this.messageHandler=l,this.loadingTask=S,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:S.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:U.ownerDocument,styleElement:U.styleElement}),this._params=U,U.useWorkerFetch||(this.CMapReaderFactory=new U.CMapReaderFactory({baseUrl:U.cMapUrl,isCompressed:U.cMapPacked}),this.StandardFontDataFactory=new U.StandardFontDataFactory({baseUrl:U.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=e,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(_docStats,this)}getRenderingIntent(l,S=_util.AnnotationMode.ENABLE,e=!1){let U=_util.RenderingIntentFlag.DISPLAY,F="";switch(l){case"any":U=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":U=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(S){case _util.AnnotationMode.DISABLE:U+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:U+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:U+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,F=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${S}`)}return e&&(U+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:U,cacheKey:`${U}_${F}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const e of _classPrivateFieldGet(_pageCache,this).values())l.push(e._destroy());_classPrivateFieldGet(_pageCache,this).clear(),_classPrivateFieldGet(_pagePromises,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const S=this.messageHandler.sendWithPromise("Terminate",null);return l.push(S),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,this,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:S}=this;l.on("GetReader",(e,U)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=F=>{this._lastProgress={loaded:F.loaded,total:F.total}},U.onPull=()=>{this._fullReader.read().then(function({value:F,done:X}){X?U.close():((0,_util.assert)((0,_util.isArrayBuffer)(F),"GetReader - expected an ArrayBuffer."),U.enqueue(new Uint8Array(F),1,[F]))}).catch(F=>{U.error(F)})},U.onCancel=F=>{this._fullReader.cancel(F),U.ready.catch(X=>{if(!this.destroyed)throw X})}}),l.on("ReaderHeadersReady",e=>{const U=(0,_util.createPromiseCapability)(),F=this._fullReader;return F.headersReady.then(()=>{(!F.isStreamingSupported||!F.isRangeSupported)&&(this._lastProgress&&S.onProgress?.(this._lastProgress),F.onProgress=X=>{S.onProgress?.({loaded:X.loaded,total:X.total})}),U.resolve({isStreamingSupported:F.isStreamingSupported,isRangeSupported:F.isRangeSupported,contentLength:F.contentLength})},U.reject),U.promise}),l.on("GetRangeReader",(e,U)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const F=this._networkStream.getRangeReader(e.begin,e.end);F?(U.onPull=()=>{F.read().then(function({value:X,done:N}){N?U.close():((0,_util.assert)((0,_util.isArrayBuffer)(X),"GetRangeReader - expected an ArrayBuffer."),U.enqueue(new Uint8Array(X),1,[X]))}).catch(X=>{U.error(X)})},U.onCancel=X=>{F.cancel(X),U.ready.catch(N=>{if(!this.destroyed)throw N})}):U.close()}),l.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,S._capability.resolve(new PDFDocumentProxy(e,this))}),l.on("DocException",function(e){let U;switch(e.name){case"PasswordException":U=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":U=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":U=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":U=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":U=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}S._capability.reject(U)}),l.on("PasswordRequest",e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),S.onPassword){const U=F=>{F instanceof Error?this._passwordCapability.reject(F):this._passwordCapability.resolve({password:F})};try{S.onPassword(U,e.code)}catch(F){this._passwordCapability.reject(F)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}),l.on("DataLoaded",e=>{S.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),l.on("StartRenderPage",e=>{this.destroyed||_classPrivateFieldGet(_pageCache,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),l.on("commonobj",([e,U,F])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(U){case"Font":const X=this._params;if("error"in F){const v=F.error;(0,_util.warn)(`Error during font loading: ${v}`),this.commonObjs.resolve(e,v);break}let N=null;X.pdfBug&&globalThis.FontInspector?.enabled&&(N={registerFont(v,V){globalThis.FontInspector.fontAdded(v,V)}});const c=new _font_loader.FontFaceObject(F,{isEvalSupported:X.isEvalSupported,disableFontFace:X.disableFontFace,ignoreErrors:X.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:N});this.fontLoader.bind(c).catch(v=>l.sendWithPromise("FontFallback",{id:e})).finally(()=>{!X.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(e,c)});break;case"FontPath":case"Image":this.commonObjs.resolve(e,F);break;default:throw new Error(`Got unknown common object type ${U}`)}}),l.on("obj",([e,U,F,X])=>{if(this.destroyed)return;const N=_classPrivateFieldGet(_pageCache,this).get(U);if(!N.objs.has(e))switch(F){case"Image":N.objs.resolve(e,X);const c=8e6;if(X){let v;if(X.bitmap){const{bitmap:V,width:H,height:z}=X;v=H*z*4,N._bitmaps.add(V)}else v=X.data?.length||0;v>c&&(N.cleanupAfterRender=!0)}break;case"Pattern":N.objs.resolve(e,X);break;default:throw new Error(`Got unknown object type ${F}`)}}),l.on("DocProgress",e=>{this.destroyed||S.onProgress?.({loaded:e.loaded,total:e.total})}),l.on("DocStats",e=>{this.destroyed||_classPrivateFieldSet(_docStats,this,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))}),l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),l.on("FetchBuiltInCMap",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:l}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(l)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const S=l-1,e=_classPrivateFieldGet(_pagePromises,this).get(S);if(e)return e;const U=this.messageHandler.sendWithPromise("GetPage",{pageIndex:S}).then(F=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(S,F,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(_pageCache,this).set(S,X),X});return _classPrivateFieldGet(_pagePromises,this).set(S,U),U}getPageIndex(l){return"object"!=typeof l||null===l||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,S){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:S})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return"string"!=typeof l?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(_metadataPromise,this)||_classPrivateFieldSet(_metadataPromise,this,this.messageHandler.sendWithPromise("GetMetadata",null).then(l=>({info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(l=!1){var S=this;return _asyncToGenerator(function*(){if(yield S.messageHandler.sendWithPromise("Cleanup",null),!S.destroyed){for(const e of _classPrivateFieldGet(_pageCache,S).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);S.commonObjs.clear(),l||S.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,S,null),S._getFieldObjectsPromise=null,S._hasJSActionsPromise=null}})()}get loadingParams(){const l=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l.disableAutoFetch,enableXfa:l.enableXfa})}}var _objs=new WeakMap,_PDFObjects_brand=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand),_classPrivateFieldInitSpec(this,_objs,Object.create(null))}get(l,S=null){if(S){const U=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,l);return U.capability.promise.then(()=>S(U.data)),null}const e=_classPrivateFieldGet(_objs,this)[l];if(!e?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${l}.`);return e.data}has(l){return _classPrivateFieldGet(_objs,this)[l]?.capability.settled||!1}resolve(l,S=null){const e=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,l);e.data=S,e.capability.resolve()}clear(){_classPrivateFieldSet(_objs,this,Object.create(null))}}function _ensureObj(ie){return _classPrivateFieldGet(_objs,this)[ie]||(_classPrivateFieldGet(_objs,this)[ie]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(l){this._internalRenderTask=l,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:l,params:S,objs:e,commonObjs:U,annotationCanvasMap:F,operatorList:X,pageIndex:N,canvasFactory:c,useRequestAnimationFrame:v=!1,pdfBug:V=!1,pageColors:H=null}){this.callback=l,this.params=S,this.objs=e,this.commonObjs=U,this.annotationCanvasMap=F,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=N,this.canvasFactory=c,this._pdfBug=V,this.pageColors=H,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===v&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=S.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:S}){if(this.cancelled)return;if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:e,viewport:U,transform:F,imageLayer:X,background:N}=this.params;this.gfx=new _canvas.CanvasGraphics(e,this.commonObjs,this.objs,this.canvasFactory,X,S,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:F,viewport:U,transparency:l,background:N}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(l=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var l=this;return _asyncToGenerator(function*(){l.cancelled||(l.operatorListIdx=l.gfx.executeOperatorList(l.operatorList,l.operatorListIdx,l._continueBound,l.stepper),l.operatorListIdx===l.operatorList.argsArray.length&&(l.running=!1,l.operatorList.lastChunk&&(l.gfx.endDrawing(),l._canvas&&_canvasInUse._.delete(l._canvas),l.callback())))})()}}var _canvasInUse={_:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(ie,l,S)=>{var e;Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=void 0,l.deprecated=function d(b){console.log("Deprecated API usage: "+b)},l.getFilenameFromUrl=function A(b){const h=b.indexOf("#"),E=b.indexOf("?"),D=Math.min(h>0?h:b.length,E>0?E:b.length);return b.substring(b.lastIndexOf("/",D)+1,D)},l.getPdfFilenameFromUrl=function I(b,h="document.pdf"){if("string"!=typeof b)return h;if(M(b))return(0,F.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),h;const D=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,j=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(b);let $=D.exec(j[1])||D.exec(j[2])||D.exec(j[3]);if($&&($=$[0],$.includes("%")))try{$=D.exec(decodeURIComponent($))[0]}catch{}return $||h},l.getXfaPageViewport=function w(b,{scale:h=1,rotation:E=0}){const{width:D,height:j}=b.attributes.style,$=[0,0,parseInt(D),parseInt(j)];return new W({viewBox:$,scale:h,rotation:E})},l.isDataScheme=M,l.isPdfFile=function _(b){return"string"==typeof b&&/\.pdf$/i.test(b)},l.isValidFetchUrl=n,l.loadScript=function i(b,h=!1){return new Promise((E,D)=>{const j=document.createElement("script");j.src=b,j.onload=function($){h&&j.remove(),E($)},j.onerror=function(){D(new Error(`Cannot load script at: ${j.src}`))},(document.head||document.documentElement).appendChild(j)})};var U=S(6),F=S(1);class N{}function v(b){return V.apply(this,arguments)}function V(){return(V=_asyncToGenerator(function*(b,h=!1){if(n(b,document.baseURI)){const E=yield fetch(b);if(!E.ok)throw new Error(E.statusText);return h?new Uint8Array(yield E.arrayBuffer()):(0,F.stringToBytes)(yield E.text())}return new Promise((E,D)=>{const j=new XMLHttpRequest;j.open("GET",b,!0),h&&(j.responseType="arraybuffer"),j.onreadystatechange=()=>{if(j.readyState===XMLHttpRequest.DONE){if(200===j.status||0===j.status){let $;if(h&&j.response?$=new Uint8Array(j.response):!h&&j.responseText&&($=(0,F.stringToBytes)(j.responseText)),$)return void E($)}D(new Error(j.statusText))}},j.send(null)})})).apply(this,arguments)}e=N,_defineProperty(N,"CSS",96),_defineProperty(N,"PDF",72),_defineProperty(N,"PDF_TO_CSS_UNITS",e.CSS/e.PDF),l.PixelsPerInch=N,l.DOMCanvasFactory=class c extends U.BaseCanvasFactory{constructor({ownerDocument:h=globalThis.document}={}){super(),this._document=h}_createCanvas(h,E){const D=this._document.createElement("canvas");return D.width=h,D.height=E,D}},l.DOMCMapReaderFactory=class H extends U.BaseCMapReaderFactory{_fetchData(h,E){return v(h,this.isCompressed).then(D=>({cMapData:D,compressionType:E}))}},l.DOMStandardFontDataFactory=class z extends U.BaseStandardFontDataFactory{_fetchData(h){return v(h,!0)}},l.DOMSVGFactory=class B extends U.BaseSVGFactory{_createSVG(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}};class W{constructor({viewBox:h,scale:E,rotation:D,offsetX:j=0,offsetY:$=0,dontFlip:Z=!1}){this.viewBox=h,this.scale=E,this.rotation=D,this.offsetX=j,this.offsetY=$;const K=(h[2]+h[0])/2,ee=(h[3]+h[1])/2;let ue,ce,O,r,t,s,o,u;switch((D%=360)<0&&(D+=360),D){case 180:ue=-1,ce=0,O=0,r=1;break;case 90:ue=0,ce=1,O=1,r=0;break;case 270:ue=0,ce=-1,O=-1,r=0;break;case 0:ue=1,ce=0,O=0,r=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Z&&(O=-O,r=-r),0===ue?(t=Math.abs(ee-h[1])*E+j,s=Math.abs(K-h[0])*E+$,o=Math.abs(h[3]-h[1])*E,u=Math.abs(h[2]-h[0])*E):(t=Math.abs(K-h[0])*E+j,s=Math.abs(ee-h[1])*E+$,o=Math.abs(h[2]-h[0])*E,u=Math.abs(h[3]-h[1])*E),this.transform=[ue*E,ce*E,O*E,r*E,t-ue*E*K-O*E*ee,s-ce*E*K-r*E*ee],this.width=o,this.height=u}clone({scale:h=this.scale,rotation:E=this.rotation,offsetX:D=this.offsetX,offsetY:j=this.offsetY,dontFlip:$=!1}={}){return new W({viewBox:this.viewBox.slice(),scale:h,rotation:E,offsetX:D,offsetY:j,dontFlip:$})}convertToViewportPoint(h,E){return F.Util.applyTransform([h,E],this.transform)}convertToViewportRectangle(h){const E=F.Util.applyTransform([h[0],h[1]],this.transform),D=F.Util.applyTransform([h[2],h[3]],this.transform);return[E[0],E[1],D[0],D[1]]}convertToPdfPoint(h,E){return F.Util.applyInverseTransform([h,E],this.transform)}}function M(b){const h=b.length;let E=0;for(;E<h&&""===b[E].trim();)E++;return"data:"===b.substring(E,E+5).toLowerCase()}function n(b,h){try{const{protocol:E}=h?new URL(b,h):new URL(b);return"http:"===E||"https:"===E}catch{return!1}}let P;l.PageViewport=W,l.RenderingCancelledException=class g extends F.BaseException{constructor(h,E){super(h,"RenderingCancelledException"),this.type=E}},l.StatTimer=class y{constructor(){this.started=Object.create(null),this.times=[]}time(h){h in this.started&&(0,F.warn)(`Timer is already running for ${h}`),this.started[h]=Date.now()}timeEnd(h){h in this.started||(0,F.warn)(`Timer has not been started for ${h}`),this.times.push({name:h,start:this.started[h],end:Date.now()}),delete this.started[h]}toString(){const h=[];let E=0;for(const D of this.times){const j=D.name;j.length>E&&(E=j.length)}for(const D of this.times){const j=D.end-D.start;h.push(`${D.name.padEnd(E)} ${j}ms\n`)}return h.join("")}},l.PDFDateString=class f{static toDateObject(h){if(!h||"string"!=typeof h)return null;P||(P=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const E=P.exec(h);if(!E)return null;const D=parseInt(E[1],10);let j=parseInt(E[2],10);j=j>=1&&j<=12?j-1:0;let $=parseInt(E[3],10);$=$>=1&&$<=31?$:1;let Z=parseInt(E[4],10);Z=Z>=0&&Z<=23?Z:0;let K=parseInt(E[5],10);K=K>=0&&K<=59?K:0;let ee=parseInt(E[6],10);ee=ee>=0&&ee<=59?ee:0;const ue=E[7]||"Z";let ce=parseInt(E[8],10);ce=ce>=0&&ce<=23?ce:0;let O=parseInt(E[9],10)||0;return O=O>=0&&O<=59?O:0,"-"===ue?(Z+=ce,K+=O):"+"===ue&&(Z-=ce,K-=O),new Date(Date.UTC(D,j,$,Z,K,ee))}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0;var e=S(1);class U{constructor(){this.constructor===U&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,V){if(v<=0||V<=0)throw new Error("Invalid canvas size");const H=this._createCanvas(v,V);return{canvas:H,context:H.getContext("2d")}}reset(v,V,H){if(!v.canvas)throw new Error("Canvas is not specified");if(V<=0||H<=0)throw new Error("Invalid canvas size");v.canvas.width=V,v.canvas.height=H}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,V){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=U;class F{constructor({baseUrl:v=null,isCompressed:V=!1}){this.constructor===F&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=V}fetch({name:v}){var V=this;return _asyncToGenerator(function*(){if(!V.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const H=V.baseUrl+v+(V.isCompressed?".bcmap":"");return V._fetchData(H,V.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE).catch(B=>{throw new Error(`Unable to load ${V.isCompressed?"binary ":""}CMap at: ${H}`)})})()}_fetchData(v,V){(0,e.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=F;class X{constructor({baseUrl:v=null}){this.constructor===X&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}fetch({filename:v}){var V=this;return _asyncToGenerator(function*(){if(!V.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const H=`${V.baseUrl}${v}`;return V._fetchData(H).catch(z=>{throw new Error(`Unable to load font data at: ${H}`)})})()}_fetchData(v){(0,e.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=X;class N{constructor(){this.constructor===N&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,V){if(v<=0||V<=0)throw new Error("Invalid SVG dimensions");const H=this._createSVG("svg:svg");return H.setAttribute("version","1.1"),H.setAttribute("width",`${v}px`),H.setAttribute("height",`${V}px`),H.setAttribute("preserveAspectRatio","none"),H.setAttribute("viewBox",`0 0 ${v} ${V}`),H}createElement(v){if("string"!=typeof v)throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,e.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=N},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0;var e=S(1);class U{constructor({docId:c,onUnsupportedFeature:v,ownerDocument:V=globalThis.document,styleElement:H=null}){this.constructor===U&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=c,this._onUnsupportedFeature=v,this._document=V,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(c){this.nativeFontFaces.push(c),this._document.fonts.add(c)}insertRule(c){let v=this.styleElement;v||(v=this.styleElement=this._document.createElement("style"),v.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(v));const V=v.sheet;V.insertRule(c,V.cssRules.length)}clear(){for(const c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(c){var v=this;return _asyncToGenerator(function*(){if(c.attached||c.missingFile)return;if(c.attached=!0,v.isFontLoadingAPISupported){const H=c.createNativeFontFace();if(H){v.addNativeFontFace(H);try{yield H.loaded}catch(z){throw v._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${H.family}': '${z}'.`),c.disableFontFace=!0,z}}return}const V=c.createFontFaceRule();if(V){if(v.insertRule(V),v.isSyncFontLoadingSupported)return;yield new Promise(H=>{const z=v._queueLoadingCallback(H);v._prepareFontLoadEvent([V],[c],z)})}})()}_queueLoadingCallback(c){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,e.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(c,v,V){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;l.FontLoader=F,l.FontLoader=F=class extends U{constructor(c){super(c),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let c=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(c=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){const V=this.loadingContext,H={id:"pdfjs-font-loading-"+V.nextRequestId++,done:!1,complete:function v(){for((0,e.assert)(!H.done,"completeRequest() cannot be called twice."),H.done=!0;V.requests.length>0&&V.requests[0].done;){const z=V.requests.shift();setTimeout(z.callback,0)}},callback:c};return V.requests.push(H),H}get _loadTestFont(){return(0,e.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(c,v,V){function H(E,D){return E.charCodeAt(D)<<24|E.charCodeAt(D+1)<<16|E.charCodeAt(D+2)<<8|255&E.charCodeAt(D+3)}function z(E,D,j,$){return E.substring(0,D)+$+E.substring(D+j)}let B,W;const g=this._document.createElement("canvas");g.width=1,g.height=1;const M=g.getContext("2d");let _=0;const I=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=z(y,976,I.length,I);const d=1482184792;let P=H(y,16);for(B=0,W=I.length-3;B<W;B+=4)P=P-d+H(I,B)|0;B<I.length&&(P=P-d+H(I+"XXX",B)|0),y=z(y,16,4,(0,e.string32)(P));const f=`url(data:font/opentype;base64,${btoa(y)});`;this.insertRule(`@font-face {font-family:"${I}";src:${f}}`);const b=[];for(const E of v)b.push(E.loadedName);b.push(I);const h=this._document.createElement("div");h.style.visibility="hidden",h.style.width=h.style.height="10px",h.style.position="absolute",h.style.top=h.style.left="0px";for(const E of b){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=E,h.appendChild(D)}this._document.body.appendChild(h),function A(E,D){if(_++,_>30)return(0,e.warn)("Load test font never loaded."),void D();M.font="30px "+E,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0?D():setTimeout(A.bind(null,E,D))}(I,()=>{h.remove(),V.complete()})}},l.FontFaceObject=class X{constructor(c,{isEvalSupported:v=!0,disableFontFace:V=!1,ignoreErrors:H=!1,onUnsupportedFeature:z,fontRegistry:B=null}){this.compiledGlyphs=Object.create(null);for(const W in c)this[W]=c[W];this.isEvalSupported=!1!==v,this.disableFontFace=!0===V,this.ignoreErrors=!0===H,this._onUnsupportedFeature=z,this.fontRegistry=B}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let c;if(this.cssFontInfo){const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}else c=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),c}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const c=(0,e.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(c)});`;let V;if(this.cssFontInfo){let H=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(H+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),V=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${H}src:${v}}`}else V=`@font-face {font-family:"${this.loadedName}";src:${v}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,v),V}getPathGenerator(c,v){if(void 0!==this.compiledGlyphs[v])return this.compiledGlyphs[v];let V;try{V=c.get(this.loadedName+"_path_"+v)}catch(H){if(!this.ignoreErrors)throw H;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${H}".`),this.compiledGlyphs[v]=function(z,B){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const H=[];for(const z of V){const B=void 0!==z.args?z.args.join(","):"";H.push("c.",z.cmd,"(",B,");\n")}return this.compiledGlyphs[v]=new Function("c","size",H.join(""))}return this.compiledGlyphs[v]=function(H,z){for(const B of V)"scale"===B.cmd&&(B.args=[z,-z]),H[B.cmd].apply(H,B.args)}}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationStorage=void 0;var e=S(9),U=S(1);l.AnnotationStorage=class F{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(N,c){const v=this._storage.get(N);return void 0===v?c:Object.assign(c,v)}getRawValue(N){return this._storage.get(N)}setValue(N,c){const v=this._storage.get(N);let V=!1;if(void 0!==v)for(const[H,z]of Object.entries(c))v[H]!==z&&(V=!0,v[H]=z);else V=!0,this._storage.set(N,c);V&&this._setModified()}getAll(){return this._storage.size>0?(0,U.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const N=new e.MurmurHash3_64;for(const[c,v]of this._storage)N.update(`${c}:${JSON.stringify(v)}`);return N.hexdigest()}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0;var e=S(1);const U=3285377520,F=4294901760,X=65535;l.MurmurHash3_64=class N{constructor(v){this.h1=v?4294967295&v:U,this.h2=v?4294967295&v:U}update(v){let V,H;if("string"==typeof v){V=new Uint8Array(2*v.length),H=0;for(let d=0,P=v.length;d<P;d++){const f=v.charCodeAt(d);f<=255?V[H++]=f:(V[H++]=f>>>8,V[H++]=255&f)}}else{if(!(0,e.isArrayBuffer)(v))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");V=v.slice(),H=V.byteLength}const z=H>>2,B=H-4*z,W=new Uint32Array(V.buffer,0,z);let g=0,M=0,_=this.h1,A=this.h2;const I=3432918353,y=461845907,n=I&X,i=y&X;for(let d=0;d<z;d++)1&d?(g=W[d],g=g*I&F|g*n&X,g=g<<15|g>>>17,g=g*y&F|g*i&X,_^=g,_=_<<13|_>>>19,_=5*_+3864292196):(M=W[d],M=M*I&F|M*n&X,M=M<<15|M>>>17,M=M*y&F|M*i&X,A^=M,A=A<<13|A>>>19,A=5*A+3864292196);switch(g=0,B){case 3:g^=V[4*z+2]<<16;case 2:g^=V[4*z+1]<<8;case 1:g^=V[4*z],g=g*I&F|g*n&X,g=g<<15|g>>>17,g=g*y&F|g*i&X,1&z?_^=g:A^=g}this.h1=_,this.h2=A}hexdigest(){let v=this.h1,V=this.h2;v^=V>>>1,v=3981806797*v&F|36045*v&X,V=4283543511*V&F|(2950163797*(V<<16|v>>>16)&F)>>>16,v^=V>>>1,v=444984403*v&F|60499*v&X,V=3301882366*V&F|(3120437893*(V<<16|v>>>16)&F)>>>16,v^=V>>>1;const H=(v>>>0).toString(16),z=(V>>>0).toString(16);return H.padStart(8,"0")+z.padStart(8,"0")}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0;var e=S(1),U=S(11),F=S(12),X=S(3),N=S(5);const V=4096,g=16;function A(O){if(O._transformStack&&(O._transformStack=[]),!O.mozCurrentTransform){O._originalSave=O.save,O._originalRestore=O.restore,O._originalRotate=O.rotate,O._originalScale=O.scale,O._originalTranslate=O.translate,O._originalTransform=O.transform,O._originalSetTransform=O.setTransform,O._originalResetTransform=O.resetTransform,O._transformMatrix=O._transformMatrix||[1,0,0,1,0,0],O._transformStack=[];try{const r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(O),"lineWidth");O._setLineWidth=r.set,O._getLineWidth=r.get,Object.defineProperty(O,"lineWidth",{set:function(s){this._setLineWidth(1.000001*s)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(O,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(O,"mozCurrentTransformInverse",{get:function(){const[t,s,o,u,p,a]=this._transformMatrix,k=t*u-s*o,x=s*o-t*u;return[u/k,s/x,o/x,t/k,(u*p-o*a)/x,(s*p-t*a)/k]}}),O.save=function(){const t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},O.restore=function(){0===this._transformStack.length&&(0,e.warn)("Tried to restore a ctx when the stack was already empty.");const t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},O.translate=function(t,s){const o=this._transformMatrix;o[4]=o[0]*t+o[2]*s+o[4],o[5]=o[1]*t+o[3]*s+o[5],this._originalTranslate(t,s)},O.scale=function(t,s){const o=this._transformMatrix;o[0]*=t,o[1]*=t,o[2]*=s,o[3]*=s,this._originalScale(t,s)},O.transform=function(t,s,o,u,p,a){const k=this._transformMatrix;this._transformMatrix=[k[0]*t+k[2]*s,k[1]*t+k[3]*s,k[0]*o+k[2]*u,k[1]*o+k[3]*u,k[0]*p+k[2]*a+k[4],k[1]*p+k[3]*a+k[5]],O._originalTransform(t,s,o,u,p,a)},O.setTransform=function(t,s,o,u,p,a){this._transformMatrix=[t,s,o,u,p,a],O._originalSetTransform(t,s,o,u,p,a)},O.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],O._originalResetTransform()},O.rotate=function(t){const s=Math.cos(t),o=Math.sin(t),u=this._transformMatrix;this._transformMatrix=[u[0]*s+u[2]*o,u[1]*s+u[3]*o,u[0]*-o+u[2]*s,u[1]*-o+u[3]*s,u[4],u[5]],this._originalRotate(t)}}}class I{constructor(r){this.canvasFactory=r,this.cache=Object.create(null)}getCanvas(r,t,s,o){let u;return void 0!==this.cache[r]?(u=this.cache[r],this.canvasFactory.reset(u,t,s),u.context.setTransform(1,0,0,1,0,0)):(u=this.canvasFactory.create(t,s),this.cache[r]=u),o&&A(u.context),u}delete(r){delete this.cache[r]}clear(){for(const r in this.cache)this.canvasFactory.destroy(this.cache[r]),delete this.cache[r]}}function y(O,r,t,s,o,u,p,a,k,x){const[T,G,q,he,de,ge]=O.mozCurrentTransform;if(0===G&&0===q){const C=Math.round(p*T+de),oe=Math.round(a*he+ge),J=Math.abs(Math.round((p+k)*T+de)-C)||1,te=Math.abs(Math.round((a+x)*he+ge)-oe)||1;return O.setTransform(Math.sign(T),0,0,Math.sign(he),C,oe),O.drawImage(r,t,s,o,u,0,0,J,te),O.setTransform(T,G,q,he,de,ge),[J,te]}if(0===T&&0===he){const C=Math.round(a*q+de),oe=Math.round(p*G+ge),J=Math.abs(Math.round((a+x)*q+de)-C)||1,te=Math.abs(Math.round((p+k)*G+ge)-oe)||1;return O.setTransform(0,Math.sign(G),Math.sign(q),0,C,oe),O.drawImage(r,t,s,o,u,0,0,te,J),O.setTransform(T,G,q,he,de,ge),[te,J]}return O.drawImage(r,t,s,o,u,p,a,k,x),[Math.hypot(T,G)*k,Math.hypot(q,he)*x]}class i{constructor(r,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,r,t])}clone(){const r=Object.create(this);return r.clipBox=this.clipBox.slice(),r}setCurrentPoint(r,t){this.x=r,this.y=t}updatePathMinMax(r,t,s){[t,s]=e.Util.applyTransform([t,s],r),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(r,t){const s=e.Util.applyTransform(t,r),o=e.Util.applyTransform(t.slice(2),r);this.minX=Math.min(this.minX,s[0],o[0]),this.minY=Math.min(this.minY,s[1],o[1]),this.maxX=Math.max(this.maxX,s[0],o[0]),this.maxY=Math.max(this.maxY,s[1],o[1])}updateScalingPathMinMax(r,t){e.Util.scaleMinMax(r,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(r,t,s,o,u,p,a,k,x,T){const G=e.Util.bezierBoundingBox(t,s,o,u,p,a,k,x);if(T)return T[0]=Math.min(T[0],G[0],G[2]),T[1]=Math.max(T[1],G[0],G[2]),T[2]=Math.min(T[2],G[1],G[3]),void(T[3]=Math.max(T[3],G[1],G[3]));this.updateRectMinMax(r,G)}getPathBoundingBox(r=U.PathType.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(r===U.PathType.STROKE){t||(0,e.unreachable)("Stroke bounding box must include transform.");const o=e.Util.singularValueDecompose2dScale(t),u=o[0]*this.lineWidth/2,p=o[1]*this.lineWidth/2;s[0]-=u,s[1]-=p,s[2]+=u,s[3]+=p}return s}updateClipFromPath(){const r=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(r||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(r){this.clipBox=r,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(r=U.PathType.FILL,t=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(r,t))}}function d(O,r,t=null){if(typeof ImageData<"u"&&r instanceof ImageData)return void O.putImageData(r,0,0);const s=r.height,o=r.width,u=s%g,p=(s-u)/g,a=0===u?p:p+1,k=O.createImageData(o,g);let T,x=0;const G=r.data,q=k.data;let he,de,ge,_e,fe,m,C,re;if(t)switch(t.length){case 1:fe=t[0],m=t[0],C=t[0],re=t[0];break;case 4:fe=t[0],m=t[1],C=t[2],re=t[3]}if(r.kind===e.ImageKind.GRAYSCALE_1BPP){const oe=G.byteLength,ne=new Uint32Array(q.buffer,0,q.byteLength>>2),J=ne.length,L=o+7>>3;let te=4294967295,R=e.FeatureTest.isLittleEndian?4278190080:255;for(re&&255===re[0]&&0===re[255]&&([te,R]=[R,te]),he=0;he<a;he++){for(ge=he<p?g:u,T=0,de=0;de<ge;de++){const se=oe-x;let le=0;const me=se>L?o:8*se-7,ve=-8&me;let ae=0,Y=0;for(;le<ve;le+=8)Y=G[x++],ne[T++]=128&Y?te:R,ne[T++]=64&Y?te:R,ne[T++]=32&Y?te:R,ne[T++]=16&Y?te:R,ne[T++]=8&Y?te:R,ne[T++]=4&Y?te:R,ne[T++]=2&Y?te:R,ne[T++]=1&Y?te:R;for(;le<me;le++)0===ae&&(Y=G[x++],ae=128),ne[T++]=Y&ae?te:R,ae>>=1}for(;T<J;)ne[T++]=0;O.putImageData(k,0,he*g)}}else if(r.kind===e.ImageKind.RGBA_32BPP){const oe=!!(fe||m||C);for(de=0,_e=o*g*4,he=0;he<p;he++){if(q.set(G.subarray(x,x+_e)),x+=_e,oe)for(let ne=0;ne<_e;ne+=4)fe&&(q[ne+0]=fe[q[ne+0]]),m&&(q[ne+1]=m[q[ne+1]]),C&&(q[ne+2]=C[q[ne+2]]);O.putImageData(k,0,de),de+=g}if(he<a){if(_e=o*u*4,q.set(G.subarray(x,x+_e)),oe)for(let ne=0;ne<_e;ne+=4)fe&&(q[ne+0]=fe[q[ne+0]]),m&&(q[ne+1]=m[q[ne+1]]),C&&(q[ne+2]=C[q[ne+2]]);O.putImageData(k,0,de)}}else{if(r.kind!==e.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${r.kind}`);{const oe=!!(fe||m||C);for(ge=g,_e=o*ge,he=0;he<a;he++){for(he>=p&&(ge=u,_e=o*ge),T=0,de=_e;de--;)q[T++]=G[x++],q[T++]=G[x++],q[T++]=G[x++],q[T++]=255;if(oe)for(let ne=0;ne<T;ne+=4)fe&&(q[ne+0]=fe[q[ne+0]]),m&&(q[ne+1]=m[q[ne+1]]),C&&(q[ne+2]=C[q[ne+2]]);O.putImageData(k,0,he*g)}}}}function P(O,r){if(r.bitmap)return void O.drawImage(r.bitmap,0,0);const t=r.height,s=r.width,o=t%g,u=(t-o)/g,p=0===o?u:u+1,a=O.createImageData(s,g);let k=0;const x=r.data,T=a.data;for(let G=0;G<p;G++){const q=G<u?g:o;({srcPos:k}=(0,F.applyMaskImageData)({src:x,srcPos:k,dest:T,width:s,height:q})),O.putImageData(a,0,G*g)}}function f(O,r){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let s=0,o=t.length;s<o;s++){const u=t[s];void 0!==O[u]&&(r[u]=O[u])}void 0!==O.setLineDash&&(r.setLineDash(O.getLineDash()),r.lineDashOffset=O.lineDashOffset)}function w(O,r){O.strokeStyle=O.fillStyle=r||"#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",void 0!==O.setLineDash&&(O.setLineDash([]),O.lineDashOffset=0)}function b(O,r,t,s){const o=O.length;for(let u=3;u<o;u+=4){const p=O[u];if(0===p)O[u-3]=r,O[u-2]=t,O[u-1]=s;else if(p<255){const a=255-p;O[u-3]=O[u-3]*p+r*a>>8,O[u-2]=O[u-2]*p+t*a>>8,O[u-1]=O[u-1]*p+s*a>>8}}}function h(O,r,t){const s=O.length,o=1/255;for(let u=3;u<s;u+=4)r[u]=r[u]*(t?t[O[u]]:O[u])*o|0}function E(O,r,t){const s=O.length;for(let o=3;o<s;o+=4){const u=77*O[o-3]+152*O[o-2]+28*O[o-1];r[o]=t?r[o]*t[u>>8]>>8:r[o]*u>>16}}function $(O,r){const t=e.Util.singularValueDecompose2dScale(O);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*N.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==r?r:t[0]<=s||t[1]<=s}const Z=["butt","round","square"],K=["miter","round","bevel"],ee={},ue={};class ce{constructor(r,t,s,o,u,p,a,k){this.ctx=r,this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=o,this.imageLayer=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=p,this.cachedCanvases=new I(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=k?.background||null,this.foregroundColor=k?.foreground||null,r&&A(r),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(r,t=null){return"string"==typeof r?r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r):t}beginDrawing({transform:r,viewport:t,transparency:s=!1,background:o=null}){const u=this.ctx.canvas.width,p=this.ctx.canvas.height,a=o||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const k=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const x=this.backgroundColor=this.ctx.fillStyle;let T=!0,G=a;if(this.ctx.fillStyle=a,G=this.ctx.fillStyle,T="string"==typeof G&&/^#[0-9A-Fa-f]{6}$/.test(G),"#000000"===k&&"#ffffff"===x||k===x||!T)this.foregroundColor=this.backgroundColor=null;else{const q=parseInt(G.slice(1),16),de=(q&&65280)>>8,ge=q&&255,_e=m=>(m/=255)<=.03928?m/12.92:((m+.055)/1.055)**2.4,fe=Math.round(.2126*_e((q&&16711680)>>16)+.7152*_e(de)+.0722*_e(ge));this.selectColor=(m,C,re)=>{const oe=.2126*_e(m)+.7152*_e(C)+.0722*_e(re);return Math.round(oe)===fe?x:k}}}if(this.ctx.fillStyle=this.backgroundColor||a,this.ctx.fillRect(0,0,u,p),this.ctx.restore(),s){const k=this.cachedCanvases.getCanvas("transparent",u,p,!0);this.compositeCtx=this.ctx,this.transparentCanvas=k.canvas,this.ctx=k.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),w(this.ctx,this.foregroundColor),r&&(this.ctx.transform.apply(this.ctx,r),this.outputScaleX=r[0],this.outputScaleY=r[0]),this.ctx.transform.apply(this.ctx,t.transform),this.viewportScale=t.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(r,t,s,o){const u=r.argsArray,p=r.fnArray;let a=t||0;const k=u.length;if(k===a)return a;const x=k-a>10&&"function"==typeof s,T=x?Date.now()+15:0;let G=0;const q=this.commonObjs,he=this.objs;let de;for(;;){if(void 0!==o&&a===o.nextBreakPoint)return o.breakIt(a,s),a;if(de=p[a],de!==e.OPS.dependency)this[de].apply(this,u[a]);else for(const ge of u[a]){const _e=ge.startsWith("g_")?q:he;if(!_e.has(ge))return _e.get(ge,s),a}if(a++,a===k)return a;if(x&&++G>10){if(Date.now()>T)return s(),a;G=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const r of this._cachedBitmapsMap.values()){for(const t of r.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);r.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(r,t){const s=r.width,o=r.height;let T,G,u=Math.max(Math.hypot(t[0],t[1]),1),p=Math.max(Math.hypot(t[2],t[3]),1),a=s,k=o,x="prescale1";for(;u>2&&a>1||p>2&&k>1;){let q=a,he=k;u>2&&a>1&&(q=Math.ceil(a/2),u/=a/q),p>2&&k>1&&(he=Math.ceil(k/2),p/=k/he),T=this.cachedCanvases.getCanvas(x,q,he,!1),G=T.context,G.clearRect(0,0,q,he),G.drawImage(r,0,0,a,k,0,0,q,he),r=T.canvas,a=q,k=he,x="prescale1"===x?"prescale2":"prescale1"}return{img:r,paintWidth:a,paintHeight:k}}_createMaskCanvas(r){const t=this.ctx,{width:s,height:o}=r,u=this.current.fillColor,p=this.current.patternFill,a=t.mozCurrentTransform;let k,x,T,G;if((r.bitmap||r.data)&&r.count>1){const J=r.bitmap||r.data.buffer,L=a.slice(0,4);x=JSON.stringify(p?L:[L,u]),k=this._cachedBitmapsMap.get(J),k||(k=new Map,this._cachedBitmapsMap.set(J,k));const te=k.get(x);if(te&&!p)return{canvas:te,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])};T=te}T||(G=this.cachedCanvases.getCanvas("maskCanvas",s,o,!1),P(G.context,r));let q=e.Util.transform(a,[1/s,0,0,-1/o,0,0]);q=e.Util.transform(q,[1,0,0,1,0,-o]);const he=e.Util.applyTransform([0,0],q),de=e.Util.applyTransform([s,o],q),ge=e.Util.normalizeRect([he[0],he[1],de[0],de[1]]),_e=Math.round(ge[2]-ge[0])||1,fe=Math.round(ge[3]-ge[1])||1,m=this.cachedCanvases.getCanvas("fillCanvas",_e,fe,!0),C=m.context,re=Math.min(he[0],de[0]),oe=Math.min(he[1],de[1]);C.translate(-re,-oe),C.transform.apply(C,q),T||(T=this._scaleImage(G.canvas,C.mozCurrentTransformInverse),T=T.img,k&&p&&k.set(x,T)),C.imageSmoothingEnabled=$(C.mozCurrentTransform,r.interpolate),y(C,T,0,0,T.width,T.height,0,0,s,o),C.globalCompositeOperation="source-in";const ne=e.Util.transform(C.mozCurrentTransformInverse,[1,0,0,1,-re,-oe]);return C.fillStyle=p?u.getPattern(t,this,ne,U.PathType.FILL):u,C.fillRect(0,0,s,o),k&&!p&&(this.cachedCanvases.delete("fillCanvas"),k.set(x,m.canvas)),{canvas:m.canvas,offsetX:Math.round(re),offsetY:Math.round(oe)}}setLineWidth(r){r!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=r,this.ctx.lineWidth=r}setLineCap(r){this.ctx.lineCap=Z[r]}setLineJoin(r){this.ctx.lineJoin=K[r]}setMiterLimit(r){this.ctx.miterLimit=r}setDash(r,t){const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(r),s.lineDashOffset=t)}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(let t=0,s=r.length;t<s;t++){const o=r[t],p=o[1];switch(o[0]){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=o[1];break;case"ca":this.current.fillAlpha=o[1],this.ctx.globalAlpha=o[1];break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=p}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const r=this.inSMaskMode;this.current.activeSMask&&!r?this.beginSMaskMode():!this.current.activeSMask&&r&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=o.context;const u=this.ctx;u.setTransform.apply(u,this.suspendedCtx.mozCurrentTransform),f(this.suspendedCtx,u),function _(O,r){if(O._removeMirroring)throw new Error("Context is already forwarding operations.");O.__originalSave=O.save,O.__originalRestore=O.restore,O.__originalRotate=O.rotate,O.__originalScale=O.scale,O.__originalTranslate=O.translate,O.__originalTransform=O.transform,O.__originalSetTransform=O.setTransform,O.__originalResetTransform=O.resetTransform,O.__originalClip=O.clip,O.__originalMoveTo=O.moveTo,O.__originalLineTo=O.lineTo,O.__originalBezierCurveTo=O.bezierCurveTo,O.__originalRect=O.rect,O.__originalClosePath=O.closePath,O.__originalBeginPath=O.beginPath,O._removeMirroring=()=>{O.save=O.__originalSave,O.restore=O.__originalRestore,O.rotate=O.__originalRotate,O.scale=O.__originalScale,O.translate=O.__originalTranslate,O.transform=O.__originalTransform,O.setTransform=O.__originalSetTransform,O.resetTransform=O.__originalResetTransform,O.clip=O.__originalClip,O.moveTo=O.__originalMoveTo,O.lineTo=O.__originalLineTo,O.bezierCurveTo=O.__originalBezierCurveTo,O.rect=O.__originalRect,O.closePath=O.__originalClosePath,O.beginPath=O.__originalBeginPath,delete O._removeMirroring},O.save=function(){r.save(),this.__originalSave()},O.restore=function(){r.restore(),this.__originalRestore()},O.translate=function(s,o){r.translate(s,o),this.__originalTranslate(s,o)},O.scale=function(s,o){r.scale(s,o),this.__originalScale(s,o)},O.transform=function(s,o,u,p,a,k){r.transform(s,o,u,p,a,k),this.__originalTransform(s,o,u,p,a,k)},O.setTransform=function(s,o,u,p,a,k){r.setTransform(s,o,u,p,a,k),this.__originalSetTransform(s,o,u,p,a,k)},O.resetTransform=function(){r.resetTransform(),this.__originalResetTransform()},O.rotate=function(s){r.rotate(s),this.__originalRotate(s)},O.clip=function(s){r.clip(s),this.__originalClip(s)},O.moveTo=function(t,s){r.moveTo(t,s),this.__originalMoveTo(t,s)},O.lineTo=function(t,s){r.lineTo(t,s),this.__originalLineTo(t,s)},O.bezierCurveTo=function(t,s,o,u,p,a){r.bezierCurveTo(t,s,o,u,p,a),this.__originalBezierCurveTo(t,s,o,u,p,a)},O.rect=function(t,s,o,u){r.rect(t,s,o,u),this.__originalRect(t,s,o,u)},O.closePath=function(){r.closePath(),this.__originalClosePath()},O.beginPath=function(){r.beginPath(),this.__originalBeginPath()}}(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(r){this.current.activeSMask&&(r?(r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r[2]=Math.ceil(r[2]),r[3]=Math.ceil(r[3])):r=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function j(O,r,t,s){const o=s[0],u=s[1],p=s[2]-o,a=s[3]-u;0===p||0===a||(function D(O,r,t,s,o,u,p,a,k,x,T){const G=!!u,q=G?u[0]:0,he=G?u[1]:0,de=G?u[2]:0;let ge;ge="Luminosity"===o?E:h;const fe=Math.min(s,Math.ceil(1048576/t));for(let m=0;m<s;m+=fe){const C=Math.min(fe,s-m),re=O.getImageData(a-x,m+(k-T),t,C),oe=r.getImageData(a,m+k,t,C);G&&b(re.data,q,he,de),ge(re.data,oe.data,p),r.putImageData(oe,a,m+k)}}(r.context,t,p,a,r.subtype,r.backdrop,r.transferMap,o,u,r.offsetX,r.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(t.canvas,0,0),O.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,r),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const r=this.current;this.stateStack.push(r),this.current=r.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(r,t,s,o,u,p){this.ctx.transform(r,t,s,o,u,p),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(r,t,s){const o=this.ctx,u=this.current;let k,x,p=u.x,a=u.y;const T=o.mozCurrentTransform,G=0===T[0]&&0===T[3]||0===T[1]&&0===T[2],q=G?s.slice(0):null;for(let he=0,de=0,ge=r.length;he<ge;he++)switch(0|r[he]){case e.OPS.rectangle:p=t[de++],a=t[de++];const _e=t[de++],fe=t[de++],m=p+_e,C=a+fe;o.moveTo(p,a),0===_e||0===fe?o.lineTo(m,C):(o.lineTo(m,a),o.lineTo(m,C),o.lineTo(p,C)),G||u.updateRectMinMax(T,[p,a,m,C]),o.closePath();break;case e.OPS.moveTo:p=t[de++],a=t[de++],o.moveTo(p,a),G||u.updatePathMinMax(T,p,a);break;case e.OPS.lineTo:p=t[de++],a=t[de++],o.lineTo(p,a),G||u.updatePathMinMax(T,p,a);break;case e.OPS.curveTo:k=p,x=a,p=t[de+4],a=t[de+5],o.bezierCurveTo(t[de],t[de+1],t[de+2],t[de+3],p,a),u.updateCurvePathMinMax(T,k,x,t[de],t[de+1],t[de+2],t[de+3],p,a,q),de+=6;break;case e.OPS.curveTo2:k=p,x=a,o.bezierCurveTo(p,a,t[de],t[de+1],t[de+2],t[de+3]),u.updateCurvePathMinMax(T,k,x,p,a,t[de],t[de+1],t[de+2],t[de+3],q),p=t[de+2],a=t[de+3],de+=4;break;case e.OPS.curveTo3:k=p,x=a,p=t[de+2],a=t[de+3],o.bezierCurveTo(t[de],t[de+1],p,a,p,a),u.updateCurvePathMinMax(T,k,x,t[de],t[de+1],p,a,p,a,q),de+=4;break;case e.OPS.closePath:o.closePath()}G&&u.updateScalingPathMinMax(T,q),u.setCurrentPoint(p,a)}closePath(){this.ctx.closePath()}stroke(r){r=!(typeof r<"u")||r;const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof s&&s?.getPattern?(t.save(),t.strokeStyle=s.getPattern(t,this,t.mozCurrentTransformInverse,U.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),r&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(r){r=!(typeof r<"u")||r;const t=this.ctx,s=this.current.fillColor;let u=!1;this.current.patternFill&&(t.save(),t.fillStyle=s.getPattern(t,this,t.mozCurrentTransformInverse,U.PathType.FILL),u=!0);const p=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==p&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),u&&t.restore(),r&&this.consumePath(p)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ee}eoClip(){this.pendingClip=ue}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const r=this.pendingTextPaths,t=this.ctx;if(void 0!==r){t.save(),t.beginPath();for(let s=0;s<r.length;s++){const o=r[s];t.setTransform.apply(t,o.transform),t.translate(o.x,o.y),o.addToPath(t,o.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(r){this.current.charSpacing=r}setWordSpacing(r){this.current.wordSpacing=r}setHScale(r){this.current.textHScale=r/100}setLeading(r){this.current.leading=-r}setFont(r,t){const s=this.commonObjs.get(r),o=this.current;if(!s)throw new Error(`Can't find font for ${r}`);if(o.fontMatrix=s.fontMatrix||e.FONT_IDENTITY_MATRIX,(0===o.fontMatrix[0]||0===o.fontMatrix[3])&&(0,e.warn)("Invalid font matrix for font "+r),t<0?(t=-t,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;let p="normal";s.black?p="900":s.bold&&(p="bold");const a=s.italic?"italic":"normal",k=`"${s.loadedName||"sans-serif"}", ${s.fallbackName}`;let x=t;t<16?x=16:t>100&&(x=100),this.current.fontSizeScale=t/x,this.ctx.font=`${a} ${p} ${x}px ${k}`}setTextRenderingMode(r){this.current.textRenderingMode=r}setTextRise(r){this.current.textRise=r}moveText(r,t){this.current.x=this.current.lineX+=r,this.current.y=this.current.lineY+=t}setLeadingMoveText(r,t){this.setLeading(-t),this.moveText(r,t)}setTextMatrix(r,t,s,o,u,p){this.current.textMatrix=[r,t,s,o,u,p],this.current.textMatrixScale=Math.hypot(r,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(r,t,s,o){const u=this.ctx,p=this.current,a=p.font,k=p.textRenderingMode,x=p.fontSize/p.fontSizeScale,T=k&e.TextRenderingMode.FILL_STROKE_MASK,G=!!(k&e.TextRenderingMode.ADD_TO_PATH_FLAG),q=p.patternFill&&!a.missingFile;let he;(a.disableFontFace||G||q)&&(he=a.getPathGenerator(this.commonObjs,r)),a.disableFontFace||q?(u.save(),u.translate(t,s),u.beginPath(),he(u,x),o&&u.setTransform.apply(u,o),(T===e.TextRenderingMode.FILL||T===e.TextRenderingMode.FILL_STROKE)&&u.fill(),(T===e.TextRenderingMode.STROKE||T===e.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((T===e.TextRenderingMode.FILL||T===e.TextRenderingMode.FILL_STROKE)&&u.fillText(r,t,s),(T===e.TextRenderingMode.STROKE||T===e.TextRenderingMode.FILL_STROKE)&&u.strokeText(r,t,s)),G&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:u.mozCurrentTransform,x:t,y:s,fontSize:x,addToPath:he})}get isFontSubpixelAAEnabled(){const{context:r}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);r.scale(1.5,1),r.fillText("I",0,10);const t=r.getImageData(0,0,10,10).data;let s=!1;for(let o=3;o<t.length;o+=4)if(t[o]>0&&t[o]<255){s=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(r){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(r);const o=t.fontSize;if(0===o)return;const u=this.ctx,p=t.fontSizeScale,a=t.charSpacing,k=t.wordSpacing,x=t.fontDirection,T=t.textHScale*x,G=r.length,q=s.vertical,he=q?1:-1,de=s.defaultVMetrics,ge=o*t.fontMatrix[0],_e=t.textRenderingMode===e.TextRenderingMode.FILL&&!s.disableFontFace&&!t.patternFill;let fe;if(u.save(),u.transform.apply(u,t.textMatrix),u.translate(t.x,t.y+t.textRise),u.scale(T,x>0?-1:1),t.patternFill){u.save();const ne=t.fillColor.getPattern(u,this,u.mozCurrentTransformInverse,U.PathType.FILL);fe=u.mozCurrentTransform,u.restore(),u.fillStyle=ne}let m=t.lineWidth;const C=t.textMatrixScale;if(0===C||0===m){const ne=t.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(ne===e.TextRenderingMode.STROKE||ne===e.TextRenderingMode.FILL_STROKE)&&(m=this.getSinglePixelWidth())}else m/=C;1!==p&&(u.scale(p,p),m/=p),u.lineWidth=m;let oe,re=0;for(oe=0;oe<G;++oe){const ne=r[oe];if("number"==typeof ne){re+=he*ne*o/1e3;continue}let J=!1;const L=(ne.isSpace?k:0)+a,te=ne.fontChar,R=ne.accent;let se,le,ve,me=ne.width;if(q){const ae=ne.vmetric||de,Y=-(ne.vmetric?ae[1]:.5*me)*ge;me=ae?-ae[0]:me,se=Y/p,le=(re+ae[2]*ge)/p}else se=re/p,le=0;if(s.remeasure&&me>0){const ae=1e3*u.measureText(te).width/o*p;if(me<ae&&this.isFontSubpixelAAEnabled){const Y=me/ae;J=!0,u.save(),u.scale(Y,1),se/=Y}else me!==ae&&(se+=(me-ae)/2e3*o/p)}this.contentVisible&&(ne.isInFont||s.missingFile)&&(_e&&!R?u.fillText(te,se,le):(this.paintChar(te,se,le,fe),R&&this.paintChar(R.fontChar,se+o*R.offset.x/p,le-o*R.offset.y/p,fe))),ve=q?me*ge-L*x:me*ge+L*x,re+=ve,J&&u.restore()}q?t.y-=re:t.x+=re*T,u.restore(),this.compose()}showType3Text(r){const t=this.ctx,s=this.current,o=s.font,u=s.fontSize,p=s.fontDirection,a=o.vertical?1:-1,k=s.charSpacing,x=s.wordSpacing,T=s.textHScale*p,G=s.fontMatrix||e.FONT_IDENTITY_MATRIX,q=r.length;let de,ge,_e,fe;if(s.textRenderingMode!==e.TextRenderingMode.INVISIBLE&&0!==u){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,t.save(),t.transform.apply(t,s.textMatrix),t.translate(s.x,s.y),t.scale(T,p),de=0;de<q;++de){if(ge=r[de],"number"==typeof ge){fe=a*ge*u/1e3,this.ctx.translate(fe,0),s.x+=fe*T;continue}const m=(ge.isSpace?x:0)+k,C=o.charProcOperatorList[ge.operatorListId];C?(this.contentVisible&&(this.processingType3=ge,this.save(),t.scale(u,u),t.transform.apply(t,G),this.executeOperatorList(C),this.restore()),_e=e.Util.applyTransform([ge.width,0],G)[0]*u+m,t.translate(_e,0),s.x+=_e*T):(0,e.warn)(`Type3 character "${ge.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(r,t){}setCharWidthAndBounds(r,t,s,o,u,p){this.ctx.rect(s,o,u-s,p-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(r){let t;if("TilingPattern"===r[0]){const s=r[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice();t=new U.TilingPattern(r,s,this.ctx,{createCanvasGraphics:p=>new ce(p,this.commonObjs,this.objs,this.canvasFactory)},o)}else t=this._getPattern(r[1],r[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,t,s){const o=this.selectColor?.(r,t,s)||e.Util.makeHexColor(r,t,s);this.ctx.strokeStyle=o,this.current.strokeColor=o}setFillRGBColor(r,t,s){const o=this.selectColor?.(r,t,s)||e.Util.makeHexColor(r,t,s);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}_getPattern(r,t=null){let s;return this.cachedPatterns.has(r)?s=this.cachedPatterns.get(r):(s=(0,U.getShadingPattern)(this.objs.get(r)),this.cachedPatterns.set(r,s)),t&&(s.matrix=t),s}shadingFill(r){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(r);t.fillStyle=s.getPattern(t,this,t.mozCurrentTransformInverse,U.PathType.SHADING);const o=t.mozCurrentTransformInverse;if(o){const u=t.canvas,p=u.width,a=u.height,k=e.Util.applyTransform([0,0],o),x=e.Util.applyTransform([0,a],o),T=e.Util.applyTransform([p,0],o),G=e.Util.applyTransform([p,a],o),q=Math.min(k[0],x[0],T[0],G[0]),he=Math.min(k[1],x[1],T[1],G[1]),de=Math.max(k[0],x[0],T[0],G[0]),ge=Math.max(k[1],x[1],T[1],G[1]);this.ctx.fillRect(q,he,de-q,ge-he)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(r,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(r)&&6===r.length&&this.transform.apply(this,r),this.baseTransform=this.ctx.mozCurrentTransform,t)&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(r){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;r.isolated||(0,e.info)("TODO: Support non-isolated groups."),r.knockout&&(0,e.warn)("Knockout groups not supported.");const s=t.mozCurrentTransform;if(r.matrix&&t.transform.apply(t,r.matrix),!r.bbox)throw new Error("Bounding box is required.");let o=e.Util.getAxialAlignedBoundingBox(r.bbox,t.mozCurrentTransform);o=e.Util.intersect(o,[0,0,t.canvas.width,t.canvas.height])||[0,0,0,0];const p=Math.floor(o[0]),a=Math.floor(o[1]);let k=Math.max(Math.ceil(o[2])-p,1),x=Math.max(Math.ceil(o[3])-a,1),T=1,G=1;k>V&&(T=k/V,k=V),x>V&&(G=x/V,x=V),this.current.startNewPathAndClipBox([0,0,k,x]);let q="groupAt"+this.groupLevel;r.smask&&(q+="_smask_"+this.smaskCounter++%2);const he=this.cachedCanvases.getCanvas(q,k,x,!0),de=he.context;de.scale(1/T,1/G),de.translate(-p,-a),de.transform.apply(de,s),r.smask?this.smaskStack.push({canvas:he.canvas,context:de,offsetX:p,offsetY:a,scaleX:T,scaleY:G,subtype:r.smask.subtype,backdrop:r.smask.backdrop,transferMap:r.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(p,a),t.scale(T,G),t.save()),f(t,de),this.ctx=de,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(r){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,r.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,o);const u=e.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],o);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(r,t,s,o,u){if(this.save(),Array.isArray(t)&&4===t.length){const p=t[2]-t[0],a=t[3]-t[1];if(u&&this.annotationCanvasMap){(s=s.slice())[4]-=t[0],s[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=p,t[3]=a;const[k,x]=e.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:T}=this,G=Math.ceil(p*this.outputScaleX*T),q=Math.ceil(a*this.outputScaleY*T);this.annotationCanvas=this.canvasFactory.create(G,q);const{canvas:he,context:de}=this.annotationCanvas,ge=`var(--zoom-factor) * ${N.PixelsPerInch.PDF_TO_CSS_UNITS}`;he.style.width=`calc(${p}px * ${ge})`,he.style.height=`calc(${a}px * ${ge})`,this.annotationCanvasMap.set(r,he),this.annotationCanvas.savedCtx=this.ctx,this.ctx=de,this.ctx.setTransform(k,0,0,-x,0,a*x),A(this.ctx),w(this.ctx,this.foregroundColor)}else w(this.ctx,this.foregroundColor),this.ctx.rect(t[0],t[1],p,a),this.ctx.clip(),this.endPath()}this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,s),this.transform.apply(this,o)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(r){if(!this.contentVisible)return;const t=r.count;(r=this.getObject(r.data,r)).count=t;const s=this.ctx,o=this.processingType3;if(o&&(void 0===o.compiled&&(o.compiled=function n(O){const{width:r,height:t}=O;if(r>1e3||t>1e3)return null;const o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=r+1;let a,k,x,p=new Uint8Array(u*(t+1));const T=r+7&-8;let G=new Uint8Array(T*t),q=0;for(const C of O.data){let re=128;for(;re>0;)G[q++]=C&re?0:255,re>>=1}let he=0;for(q=0,0!==G[q]&&(p[0]=1,++he),k=1;k<r;k++)G[q]!==G[q+1]&&(p[k]=G[q]?2:1,++he),q++;for(0!==G[q]&&(p[k]=2,++he),a=1;a<t;a++){q=a*T,x=a*u,G[q-T]!==G[q]&&(p[x]=G[q]?1:8,++he);let C=(G[q]?4:0)+(G[q-T]?8:0);for(k=1;k<r;k++)C=(C>>2)+(G[q+1]?4:0)+(G[q-T+1]?8:0),o[C]&&(p[x+k]=o[C],++he),q++;if(G[q-T]!==G[q]&&(p[x+k]=G[q]?2:4,++he),he>1e3)return null}for(q=T*(t-1),x=a*u,0!==G[q]&&(p[x]=8,++he),k=1;k<r;k++)G[q]!==G[q+1]&&(p[x+k]=G[q]?4:8,++he),q++;if(0!==G[q]&&(p[x+k]=4,++he),he>1e3)return null;const de=new Int32Array([0,u,-1,0,-u,0,0,0,1]);let ge,_e,fe;for(X.isNodeJS?_e=[]:ge=new Path2D,a=0;he&&a<=t;a++){let C=a*u;const re=C+r;for(;C<re&&!p[C];)C++;if(C===re)continue;ge?ge.moveTo(C%u,a):fe=[C%u,a];const oe=C;let ne=p[C];do{const J=de[ne];do{C+=J}while(!p[C]);const L=p[C];5!==L&&10!==L?(ne=L,p[C]=0):(ne=L&51*ne>>4,p[C]&=ne>>2|ne<<2),ge?ge.lineTo(C%u,C/u|0):fe.push(C%u,C/u|0),p[C]||--he}while(oe!==C);ge||_e.push(fe),--a}return G=null,p=null,function(C){if(C.save(),C.scale(1/r,-1/t),C.translate(0,-t),ge)C.fill(ge);else{C.beginPath();for(const re of _e){C.moveTo(re[0],re[1]);for(let oe=2,ne=re.length;oe<ne;oe+=2)C.lineTo(re[oe],re[oe+1])}C.fill()}C.beginPath(),C.restore()}}(r)),o.compiled))return void o.compiled(s);const u=this._createMaskCanvas(r),p=u.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(p,u.offsetX,u.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(r,t,s=0,o=0,u,p){if(!this.contentVisible)return;r=this.getObject(r.data,r);const a=this.ctx;a.save();const k=a.mozCurrentTransform;a.transform(t,s,o,u,0,0);const x=this._createMaskCanvas(r);a.setTransform(1,0,0,1,0,0);for(let T=0,G=p.length;T<G;T+=2){const q=e.Util.transform(k,[t,s,o,u,p[T],p[T+1]]),[he,de]=e.Util.applyTransform([0,0],q);a.drawImage(x.canvas,he,de)}a.restore(),this.compose()}paintImageMaskXObjectGroup(r){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,o=this.current.patternFill;for(let u=0,p=r.length;u<p;u++){const a=r[u],k=a.width,x=a.height,T=this.cachedCanvases.getCanvas("maskCanvas",k,x,!1),G=T.context;G.save(),P(G,a),G.globalCompositeOperation="source-in",G.fillStyle=o?s.getPattern(G,this,t.mozCurrentTransformInverse,U.PathType.FILL):s,G.fillRect(0,0,k,x),G.restore(),t.save(),t.transform.apply(t,a.transform),t.scale(1,-1),y(t,T.canvas,0,0,k,x,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(r){if(!this.contentVisible)return;const t=this.getObject(r);t?this.paintInlineImageXObject(t):(0,e.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(r,t,s,o){if(!this.contentVisible)return;const u=this.getObject(r);if(!u)return void(0,e.warn)("Dependent image isn't ready yet");const p=u.width,a=u.height,k=[];for(let x=0,T=o.length;x<T;x+=2)k.push({transform:[t,0,0,s,o[x],o[x+1]],x:0,y:0,w:p,h:a});this.paintInlineImageXObjectGroup(u,k)}paintInlineImageXObject(r){if(!this.contentVisible)return;const t=r.width,s=r.height,o=this.ctx;let u;if(this.save(),o.scale(1/t,-1/s),"function"==typeof HTMLElement&&r instanceof HTMLElement||!r.data)u=r;else{const x=this.cachedCanvases.getCanvas("inlineImage",t,s,!1);d(x.context,r,this.current.transferMaps),u=x.canvas}const p=this._scaleImage(u,o.mozCurrentTransformInverse);o.imageSmoothingEnabled=$(o.mozCurrentTransform,r.interpolate);const[a,k]=y(o,p.img,0,0,p.paintWidth,p.paintHeight,0,-s,t,s);if(this.imageLayer){const x=this.getCanvasPosition(0,-s);this.imageLayer.appendImage({imgData:r,left:x[0],top:x[1],width:a,height:k})}this.compose(),this.restore()}paintInlineImageXObjectGroup(r,t){if(!this.contentVisible)return;const s=this.ctx,o=r.width,u=r.height,p=this.cachedCanvases.getCanvas("inlineImage",o,u,!1);d(p.context,r,this.current.transferMaps);for(let k=0,x=t.length;k<x;k++){const T=t[k];if(s.save(),s.transform.apply(s,T.transform),s.scale(1,-1),y(s,p.canvas,T.x,T.y,T.w,T.h,0,-1,1,1),this.imageLayer){const G=this.getCanvasPosition(T.x,T.y);this.imageLayer.appendImage({imgData:r,left:G[0],top:G[1],width:o,height:u})}s.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(r){}markPointProps(r,t){}beginMarkedContent(r){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(r,t){this.markedContentStack.push("OC"===r?{visible:this.optionalContentConfig.isVisible(t)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(r){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===ue?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const r=this.ctx.mozCurrentTransform;if(0===r[1]&&0===r[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(r[0]),Math.abs(r[3]));else{const t=Math.abs(r[0]*r[3]-r[2]*r[1]),s=Math.hypot(r[0],r[2]),o=Math.hypot(r[1],r[3]);this._cachedGetSinglePixelWidth=Math.max(s,o)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:r}=this.current,t=this.ctx.mozCurrentTransform;let s,o;if(0===t[1]&&0===t[2]){const u=Math.abs(t[0]),p=Math.abs(t[3]);if(0===r)s=1/u,o=1/p;else{const a=u*r,k=p*r;s=a<1?1/a:1,o=k<1?1/k:1}}else{const u=Math.abs(t[0]*t[3]-t[2]*t[1]),p=Math.hypot(t[0],t[1]),a=Math.hypot(t[2],t[3]);if(0===r)s=a/u,o=p/u;else{const k=r*u;s=a>k?a/k:1,o=p>k?p/k:1}}this._cachedScaleForStroking=[s,o]}return this._cachedScaleForStroking}rescaleAndStroke(r){const{ctx:t}=this,{lineWidth:s}=this.current,[o,u]=this.getScaleForStroking();if(t.lineWidth=s||1,1===o&&1===u)return void t.stroke();let p,a,k;r&&(p=t.mozCurrentTransform.slice(),a=t.getLineDash().slice(),k=t.lineDashOffset),t.scale(o,u);const x=Math.max(o,u);t.setLineDash(t.getLineDash().map(T=>T/x)),t.lineDashOffset/=x,t.stroke(),r&&(t.setTransform(...p),t.setLineDash(a),t.lineDashOffset=k)}getCanvasPosition(r,t){const s=this.ctx.mozCurrentTransform;return[s[0]*r+s[2]*t+s[4],s[1]*r+s[3]*t+s[5]]}isContentVisible(){for(let r=this.markedContentStack.length-1;r>=0;r--)if(!this.markedContentStack[r].visible)return!1;return!0}}l.CanvasGraphics=ce;for(const O in e.OPS)void 0!==ce.prototype[O]&&(ce.prototype[e.OPS[O]]=ce.prototype[O])},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=function B(M){switch(M[0]){case"RadialAxial":return new c(M);case"Mesh":return new H(M);case"Dummy":return new z}throw new Error(`Unknown IR type: ${M[0]}`)};var e=S(1),U=S(3);const F={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function X(M,_){if(!_||U.isNodeJS)return;const A=_[2]-_[0],I=_[3]-_[1],y=new Path2D;y.rect(_[0],_[1],A,I),M.clip(y)}l.PathType=F;class N{constructor(){this.constructor===N&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class c extends N{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let A;"axial"===this._type?A=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(A=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const I of this._colorStops)A.addColorStop(I[0],I[1]);return A}getPattern(_,A,I,y){let n;if(y===F.STROKE||y===F.FILL){const i=A.current.getClippedPathBoundingBox(y,_.mozCurrentTransform)||[0,0,0,0],d=Math.ceil(i[2]-i[0])||1,P=Math.ceil(i[3]-i[1])||1,f=A.cachedCanvases.getCanvas("pattern",d,P,!0),w=f.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-i[0],-i[1]),I=e.Util.transform(I,[1,0,0,1,i[0],i[1]]),w.transform.apply(w,A.baseTransform),this.matrix&&w.transform.apply(w,this.matrix),X(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),n=_.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(I);try{n.setTransform(b)}catch(h){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${h?.message}".`)}}else X(_,this._bbox),n=this._createGradient(_);return n}}function v(M,_,A,I,y,n,i,d){const P=_.coords,f=_.colors,w=M.data,b=4*M.width;let h;P[A+1]>P[I+1]&&(h=A,A=I,I=h,h=n,n=i,i=h),P[I+1]>P[y+1]&&(h=I,I=y,y=h,h=i,i=d,d=h),P[A+1]>P[I+1]&&(h=A,A=I,I=h,h=n,n=i,i=h);const E=(P[A]+_.offsetX)*_.scaleX,D=(P[A+1]+_.offsetY)*_.scaleY,j=(P[I]+_.offsetX)*_.scaleX,$=(P[I+1]+_.offsetY)*_.scaleY,Z=(P[y]+_.offsetX)*_.scaleX,K=(P[y+1]+_.offsetY)*_.scaleY;if(D>=K)return;const ee=f[n],ue=f[n+1],ce=f[n+2],O=f[i],r=f[i+1],t=f[i+2],s=f[d],o=f[d+1],u=f[d+2],p=Math.round(D),a=Math.round(K);let k,x,T,G,q,he,de,ge;for(let _e=p;_e<=a;_e++){if(_e<$){let oe;oe=_e<D?0:(D-_e)/(D-$),k=E-(E-j)*oe,x=ee-(ee-O)*oe,T=ue-(ue-r)*oe,G=ce-(ce-t)*oe}else{let oe;oe=_e>K?1:$===K?0:($-_e)/($-K),k=j-(j-Z)*oe,x=O-(O-s)*oe,T=r-(r-o)*oe,G=t-(t-u)*oe}let fe;fe=_e<D?0:_e>K?1:(D-_e)/(D-K),q=E-(E-Z)*fe,he=ee-(ee-s)*fe,de=ue-(ue-o)*fe,ge=ce-(ce-u)*fe;const m=Math.round(Math.min(k,q)),C=Math.round(Math.max(k,q));let re=b*_e+4*m;for(let oe=m;oe<=C;oe++)fe=(k-oe)/(k-q),fe<0?fe=0:fe>1&&(fe=1),w[re++]=x-(x-he)*fe|0,w[re++]=T-(T-de)*fe|0,w[re++]=G-(G-ge)*fe|0,w[re++]=255}}function V(M,_,A){const I=_.coords,y=_.colors;let n,i;switch(_.type){case"lattice":const d=_.verticesPerRow,P=Math.floor(I.length/d)-1,f=d-1;for(n=0;n<P;n++){let w=n*d;for(let b=0;b<f;b++,w++)v(M,A,I[w],I[w+1],I[w+d],y[w],y[w+1],y[w+d]),v(M,A,I[w+d+1],I[w+1],I[w+d],y[w+d+1],y[w+1],y[w+d])}break;case"triangles":for(n=0,i=I.length;n<i;n+=3)v(M,A,I[n],I[n+1],I[n+2],y[n],y[n+1],y[n+2]);break;default:throw new Error("illegal figure")}}class H extends N{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,A,I){const d=Math.floor(this._bounds[0]),P=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,w=Math.ceil(this._bounds[3])-P,b=Math.min(Math.ceil(Math.abs(f*_[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(w*_[1]*1.1)),3e3),E=f/b,D=w/h,j={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-P,scaleX:1/E,scaleY:1/D},K=I.getCanvas("mesh",b+4,h+4,!1),ee=K.context,ue=ee.createImageData(b,h);if(A){const O=ue.data;for(let r=0,t=O.length;r<t;r+=4)O[r]=A[0],O[r+1]=A[1],O[r+2]=A[2],O[r+3]=255}for(const O of this._figures)V(ue,O,j);return ee.putImageData(ue,2,2),{canvas:K.canvas,offsetX:d-2*E,offsetY:P-2*D,scaleX:E,scaleY:D}}getPattern(_,A,I,y){let n;if(X(_,this._bbox),y===F.SHADING)n=e.Util.singularValueDecompose2dScale(_.mozCurrentTransform);else if(n=e.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const d=e.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*d[0],n[1]*d[1]]}const i=this._createMeshCanvas(n,y===F.SHADING?null:this._background,A.cachedCanvases);return y!==F.SHADING&&(_.setTransform.apply(_,A.baseTransform),this.matrix&&_.transform.apply(_,this.matrix)),_.translate(i.offsetX,i.offsetY),_.scale(i.scaleX,i.scaleY),_.createPattern(i.canvas,"no-repeat")}}class z extends N{getPattern(){return"hotpink"}}class g{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(_,A,I,y,n){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=A,this.ctx=I,this.canvasGraphicsFactory=y,this.baseTransform=n}createPatternCanvas(_){const A=this.operatorList,I=this.bbox,y=this.xstep,n=this.ystep,i=this.paintType,P=this.color,f=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+this.tilingType);const w=I[0],b=I[1],h=I[2],E=I[3],D=e.Util.singularValueDecompose2dScale(this.matrix),j=e.Util.singularValueDecompose2dScale(this.baseTransform),$=[D[0]*j[0],D[1]*j[1]],Z=this.getSizeAndScale(y,this.ctx.canvas.width,$[0]),K=this.getSizeAndScale(n,this.ctx.canvas.height,$[1]),ee=_.cachedCanvases.getCanvas("pattern",Z.size,K.size,!0),ue=ee.context,ce=f.createCanvasGraphics(ue);ce.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(ce,i,P);let O=w,r=b,t=h,s=E;return w<0&&(O=0,t+=Math.abs(w)),b<0&&(r=0,s+=Math.abs(b)),ue.translate(-Z.scale*O,-K.scale*r),ce.transform(Z.scale,0,0,K.scale,0,0),ue.save(),this.clipBbox(ce,O,r,t,s),ce.baseTransform=ce.ctx.mozCurrentTransform.slice(),ce.executeOperatorList(A),ce.endDrawing(),{canvas:ee.canvas,scaleX:Z.scale,scaleY:K.scale,offsetX:O,offsetY:r}}getSizeAndScale(_,A,I){_=Math.abs(_);const y=Math.max(g.MAX_PATTERN_SIZE,A);let n=Math.ceil(_*I);return n>=y?n=y:I=n/_,{scale:I,size:n}}clipBbox(_,A,I,y,n){_.ctx.rect(A,I,y-A,n-I),_.current.updateRectMinMax(_.ctx.mozCurrentTransform,[A,I,y,n]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,A,I){const y=_.ctx,n=_.current;switch(A){case 1:const i=this.ctx;y.fillStyle=i.fillStyle,y.strokeStyle=i.strokeStyle,n.fillColor=i.fillStyle,n.strokeColor=i.strokeStyle;break;case 2:const d=e.Util.makeHexColor(I[0],I[1],I[2]);y.fillStyle=d,y.strokeStyle=d,n.fillColor=d,n.strokeColor=d;break;default:throw new e.FormatError(`Unsupported paint type: ${A}`)}}getPattern(_,A,I,y){let n=I;y!==F.SHADING&&(n=e.Util.transform(n,A.baseTransform),this.matrix&&(n=e.Util.transform(n,this.matrix)));const i=this.createPatternCanvas(A);let d=new DOMMatrix(n);d=d.translate(i.offsetX,i.offsetY),d=d.scale(1/i.scaleX,1/i.scaleY);const P=_.createPattern(i.canvas,"repeat");try{P.setTransform(d)}catch(f){(0,e.warn)(`TilingPattern.getPattern: "${f?.message}".`)}return P}}l.TilingPattern=g},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.applyMaskImageData=function U({src:F,srcPos:X=0,dest:N,destPos:c=0,width:v,height:V,inverseDecode:H=!1}){const z=e.FeatureTest.isLittleEndian?4278190080:255,[B,W]=H?[0,z]:[z,0],g=v>>3,M=7&v,_=F.length;N=new Uint32Array(N.buffer);for(let A=0;A<V;A++){for(const y=X+g;X<y;X++){const n=X<_?F[X]:255;N[c++]=128&n?W:B,N[c++]=64&n?W:B,N[c++]=32&n?W:B,N[c++]=16&n?W:B,N[c++]=8&n?W:B,N[c++]=4&n?W:B,N[c++]=2&n?W:B,N[c++]=1&n?W:B}if(0===M)continue;const I=X<_?F[X++]:255;for(let y=0;y<M;y++)N[c++]=I&1<<7-y?W:B}return{srcPos:X,destPos:c}};var e=S(1)},(ie,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;const S=Object.create(null);l.GlobalWorkerOptions=S,S.workerPort=void 0===S.workerPort?null:S.workerPort,S.workerSrc=void 0===S.workerSrc?"":S.workerSrc},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0;var e=S(1);function X(c){switch(c instanceof Error||"object"==typeof c&&null!==c||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new e.AbortException(c.message);case"MissingPDFException":return new e.MissingPDFException(c.message);case"PasswordException":return new e.PasswordException(c.message,c.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new e.UnknownErrorException(c.message,c.details);default:return new e.UnknownErrorException(c.message,c.toString())}}l.MessageHandler=class N{constructor(v,V,H){this.sourceName=v,this.targetName=V,this.comObj=H,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=z=>{const B=z.data;if(B.targetName!==this.sourceName)return;if(B.stream)return void this._processStreamMessage(B);if(B.callback){const g=B.callbackId,M=this.callbackCapabilities[g];if(!M)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],1===B.callback)M.resolve(B.data);else{if(2!==B.callback)throw new Error("Unexpected callback case");M.reject(X(B.reason))}return}const W=this.actionHandler[B.action];if(!W)throw new Error(`Unknown action from worker: ${B.action}`);if(B.callbackId){const g=this.sourceName,M=B.sourceName;new Promise(function(_){_(W(B.data))}).then(function(_){H.postMessage({sourceName:g,targetName:M,callback:1,callbackId:B.callbackId,data:_})},function(_){H.postMessage({sourceName:g,targetName:M,callback:2,callbackId:B.callbackId,reason:X(_)})})}else B.streamId?this._createStreamSink(B):W(B.data)},H.addEventListener("message",this._onComObjOnMessage)}on(v,V){const H=this.actionHandler;if(H[v])throw new Error(`There is already an actionName called "${v}"`);H[v]=V}send(v,V,H){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:V},H)}sendWithPromise(v,V,H){const z=this.callbackId++,B=(0,e.createPromiseCapability)();this.callbackCapabilities[z]=B;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:z,data:V},H)}catch(W){B.reject(W)}return B.promise}sendWithStream(v,V,H,z){const B=this.streamId++,W=this.sourceName,g=this.targetName,M=this.comObj;return new ReadableStream({start:_=>{const A=(0,e.createPromiseCapability)();return this.streamControllers[B]={controller:_,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},M.postMessage({sourceName:W,targetName:g,action:v,streamId:B,data:V,desiredSize:_.desiredSize},z),A.promise},pull:_=>{const A=(0,e.createPromiseCapability)();return this.streamControllers[B].pullCall=A,M.postMessage({sourceName:W,targetName:g,stream:6,streamId:B,desiredSize:_.desiredSize}),A.promise},cancel:_=>{(0,e.assert)(_ instanceof Error,"cancel must have a valid reason");const A=(0,e.createPromiseCapability)();return this.streamControllers[B].cancelCall=A,this.streamControllers[B].isClosed=!0,M.postMessage({sourceName:W,targetName:g,stream:1,streamId:B,reason:X(_)}),A.promise}},H)}_createStreamSink(v){const V=v.streamId,H=this.sourceName,z=v.sourceName,B=this.comObj,W=this,g=this.actionHandler[v.action],M={enqueue(_,A=1,I){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=A,y>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),B.postMessage({sourceName:H,targetName:z,stream:4,streamId:V,chunk:_},I)},close(){this.isCancelled||(this.isCancelled=!0,B.postMessage({sourceName:H,targetName:z,stream:3,streamId:V}),delete W.streamSinks[V])},error(_){(0,e.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,B.postMessage({sourceName:H,targetName:z,stream:5,streamId:V,reason:X(_)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};M.sinkCapability.resolve(),M.ready=M.sinkCapability.promise,this.streamSinks[V]=M,new Promise(function(_){_(g(v.data,M))}).then(function(){B.postMessage({sourceName:H,targetName:z,stream:8,streamId:V,success:!0})},function(_){B.postMessage({sourceName:H,targetName:z,stream:8,streamId:V,reason:X(_)})})}_processStreamMessage(v){const V=v.streamId,H=this.sourceName,z=v.sourceName,B=this.comObj,W=this.streamControllers[V],g=this.streamSinks[V];switch(v.stream){case 8:v.success?W.startCall.resolve():W.startCall.reject(X(v.reason));break;case 7:v.success?W.pullCall.resolve():W.pullCall.reject(X(v.reason));break;case 6:if(!g){B.postMessage({sourceName:H,targetName:z,stream:7,streamId:V,success:!0});break}g.desiredSize<=0&&v.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=v.desiredSize,new Promise(function(M){M(g.onPull&&g.onPull())}).then(function(){B.postMessage({sourceName:H,targetName:z,stream:7,streamId:V,success:!0})},function(M){B.postMessage({sourceName:H,targetName:z,stream:7,streamId:V,reason:X(M)})});break;case 4:if((0,e.assert)(W,"enqueue should have stream controller"),W.isClosed)break;W.controller.enqueue(v.chunk);break;case 3:if((0,e.assert)(W,"close should have stream controller"),W.isClosed)break;W.isClosed=!0,W.controller.close(),this._deleteStreamController(W,V);break;case 5:(0,e.assert)(W,"error should have stream controller"),W.controller.error(X(v.reason)),this._deleteStreamController(W,V);break;case 2:v.success?W.cancelCall.resolve():W.cancelCall.reject(X(v.reason)),this._deleteStreamController(W,V);break;case 1:if(!g)break;new Promise(function(M){M(g.onCancel&&g.onCancel(X(v.reason)))}).then(function(){B.postMessage({sourceName:H,targetName:z,stream:2,streamId:V,success:!0})},function(M){B.postMessage({sourceName:H,targetName:z,stream:2,streamId:V,reason:X(M)})}),g.sinkCapability.reject(X(v.reason)),g.isCancelled=!0,delete this.streamSinks[V];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(v,V){var H=this;return _asyncToGenerator(function*(){yield Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]),delete H.streamControllers[V]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var e=S(1),U=new WeakMap,F=new WeakMap;l.Metadata=class X{constructor({parsedData:c,rawData:v}){_classPrivateFieldInitSpec(this,U,void 0),_classPrivateFieldInitSpec(this,F,void 0),_classPrivateFieldSet(U,this,c),_classPrivateFieldSet(F,this,v)}getRaw(){return _classPrivateFieldGet(F,this)}get(c){return _classPrivateFieldGet(U,this).get(c)??null}getAll(){return(0,e.objectFromMap)(_classPrivateFieldGet(U,this))}has(c){return _classPrivateFieldGet(U,this).has(c)}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var e=S(1);class U{constructor(N,c){this.visible=!0,this.name=N,this.intent=c}}l.OptionalContentConfig=class F{constructor(N){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==N){this.name=N.name,this.creator=N.creator,this._order=N.order;for(const c of N.groups)this._groups.set(c.id,new U(c.name,c.intent));if("OFF"===N.baseState)for(const c of this._groups)c.visible=!1;for(const c of N.on)this._groups.get(c).visible=!0;for(const c of N.off)this._groups.get(c).visible=!1}}_evaluateVisibilityExpression(N){const c=N.length;if(c<2)return!0;const v=N[0];for(let V=1;V<c;V++){const H=N[V];let z;if(Array.isArray(H))z=this._evaluateVisibilityExpression(H);else{if(!this._groups.has(H))return(0,e.warn)(`Optional content group not found: ${H}`),!0;z=this._groups.get(H).visible}switch(v){case"And":if(!z)return!1;break;case"Or":if(z)return!0;break;case"Not":return!z;default:return!0}}return"And"===v}isVisible(N){if(0===this._groups.size)return!0;if(!N)return(0,e.warn)("Optional content group not defined."),!0;if("OCG"===N.type)return this._groups.has(N.id)?this._groups.get(N.id).visible:((0,e.warn)(`Optional content group not found: ${N.id}`),!0);if("OCMD"===N.type){if(N.expression)return this._evaluateVisibilityExpression(N.expression);if(!N.policy||"AnyOn"===N.policy){for(const c of N.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(this._groups.get(c).visible)return!0}return!1}if("AllOn"===N.policy){for(const c of N.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(!this._groups.get(c).visible)return!1}return!0}if("AnyOff"===N.policy){for(const c of N.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(!this._groups.get(c).visible)return!0}return!1}if("AllOff"===N.policy){for(const c of N.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(this._groups.get(c).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${N.policy}.`),!0}return(0,e.warn)(`Unknown group type ${N.type}.`),!0}setVisibility(N,c=!0){this._groups.has(N)?this._groups.get(N).visible=!!c:(0,e.warn)(`Optional content group not found: ${N}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,e.objectFromMap)(this._groups):null}getGroup(N){return this._groups.get(N)||null}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0;var e=S(1),U=S(5);l.PDFDataTransportStream=class F{constructor(v,V){(0,e.assert)(V,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1,this._contentDispositionFilename=v.contentDispositionFilename||null;const H=v.initialData;if(H?.length>0){const z=new Uint8Array(H).buffer;this._queuedChunks.push(z)}this._pdfDataRangeTransport=V,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((z,B)=>{this._onReceiveData({begin:z,chunk:B})}),this._pdfDataRangeTransport.addProgressListener((z,B)=>{this._onProgress({loaded:z,total:B})}),this._pdfDataRangeTransport.addProgressiveReadListener(z=>{this._onReceiveData({chunk:z})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const V=new Uint8Array(v.chunk).buffer;if(void 0===v.begin)this._fullRequestReader?this._fullRequestReader._enqueue(V):this._queuedChunks.push(V);else{const H=this._rangeReaders.some(function(z){return z._begin===v.begin&&(z._enqueue(V),!0)});(0,e.assert)(H,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(v){if(void 0===v.total){const V=this._rangeReaders[0];V?.onProgress&&V.onProgress({loaded:v.loaded})}else{const V=this._fullRequestReader;V?.onProgress&&V.onProgress({loaded:v.loaded,total:v.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const V=this._rangeReaders.indexOf(v);V>=0&&this._rangeReaders.splice(V,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new X(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,V){if(V<=this._progressiveDataLength)return null;const H=new N(this,v,V);return this._pdfDataRangeTransport.requestDataRange(v,V),this._rangeReaders.push(H),H}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const V of this._rangeReaders.slice(0))V.cancel(v);this._pdfDataRangeTransport.abort()}};class X{constructor(v,V,H=!1,z=null){this._stream=v,this._done=H||!1,this._filename=(0,U.isPdfFile)(z)?z:null,this._queuedChunks=V||[],this._loaded=0;for(const B of this._queuedChunks)this._loaded+=B.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunks.length>0)return{value:v._queuedChunks.shift(),done:!1};if(v._done)return{value:void 0,done:!0};const V=(0,e.createPromiseCapability)();return v._requests.push(V),V.promise})()}cancel(v){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class N{constructor(v,V,H){this._stream=v,this._begin=V,this._end=H,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(0===this._requests.length)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunk){const H=v._queuedChunk;return v._queuedChunk=null,{value:H,done:!1}}if(v._done)return{value:void 0,done:!0};const V=(0,e.createPromiseCapability)();return v._requests.push(V),V.promise})()}cancel(v){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ie,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0;class S{static textContent(U){const F=[],X={items:F,styles:Object.create(null)};return function N(c){if(!c)return;let v=null;const V=c.name;if("#text"===V)v=c.value;else{if(!S.shouldBuildText(V))return;c?.attributes?.textContent?v=c.attributes.textContent:c.value&&(v=c.value)}if(null!==v&&F.push({str:v}),c.children)for(const H of c.children)N(H)}(U),X}static shouldBuildText(U){return!("textarea"===U||"input"===U||"option"===U||"select"===U)}}l.XfaText=S},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0;var e=S(6);const U=function(c){return new Promise((v,V)=>{__webpack_require__(23237).readFile(c,(z,B)=>{!z&&B?v(new Uint8Array(B)):V(new Error(z))})})};l.NodeCanvasFactory=class F extends e.BaseCanvasFactory{_createCanvas(v,V){return __webpack_require__(17640).createCanvas(v,V)}},l.NodeCMapReaderFactory=class X extends e.BaseCMapReaderFactory{_fetchData(v,V){return U(v).then(H=>({cMapData:H,compressionType:V}))}},l.NodeStandardFontDataFactory=class N extends e.BaseStandardFontDataFactory{_fetchData(v){return U(v)}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationLayer=void 0;var e=S(1),U=S(5),F=S(8),X=S(21),N=S(22);const c=1e3,v=new WeakSet;function V(r){return{width:r[2]-r[0],height:r[3]-r[1]}}class H{static create(t){switch(t.data.annotationType){case e.AnnotationType.LINK:return new B(t);case e.AnnotationType.TEXT:return new W(t);case e.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new M(t);case"Btn":return t.data.radioButton?new A(t):t.data.checkBox?new _(t):new I(t);case"Ch":return new y(t)}return new g(t);case e.AnnotationType.POPUP:return new n(t);case e.AnnotationType.FREETEXT:return new d(t);case e.AnnotationType.LINE:return new P(t);case e.AnnotationType.SQUARE:return new f(t);case e.AnnotationType.CIRCLE:return new w(t);case e.AnnotationType.POLYLINE:return new b(t);case e.AnnotationType.CARET:return new E(t);case e.AnnotationType.INK:return new D(t);case e.AnnotationType.POLYGON:return new h(t);case e.AnnotationType.HIGHLIGHT:return new j(t);case e.AnnotationType.UNDERLINE:return new $(t);case e.AnnotationType.SQUIGGLY:return new Z(t);case e.AnnotationType.STRIKEOUT:return new K(t);case e.AnnotationType.STAMP:return new ee(t);case e.AnnotationType.FILEATTACHMENT:return new ue(t);default:return new z(t)}}}class z{constructor(t,{isRenderable:s=!1,ignoreBorder:o=!1,createQuadrilaterals:u=!1}={}){this.isRenderable=s,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,s&&(this.container=this._createContainer(o)),u&&(this.quadrilaterals=this._createQuadrilaterals(o))}_createContainer(t=!1){const s=this.data,o=this.page,u=this.viewport,p=document.createElement("section");let{width:a,height:k}=V(s.rect);p.setAttribute("data-annotation-id",s.id);const x=e.Util.normalizeRect([s.rect[0],o.view[3]-s.rect[1]+o.view[1],s.rect[2],o.view[3]-s.rect[3]+o.view[1]]);if(s.hasOwnCanvas){const T=u.transform.slice(),[G,q]=e.Util.singularValueDecompose2dScale(T);a=Math.ceil(a*G),k=Math.ceil(k*q),x[0]*=G,x[1]*=q;for(let he=0;he<4;he++)T[he]=Math.sign(T[he]);p.style.transform=`matrix(${T.join(",")})`}else p.style.transform=`matrix(${u.transform.join(",")})`;if(p.style.transformOrigin=`${-x[0]}px ${-x[1]}px`,!t&&s.borderStyle.width>0){p.style.borderWidth=`${s.borderStyle.width}px`,s.borderStyle.style!==e.AnnotationBorderStyleType.UNDERLINE&&(a-=2*s.borderStyle.width,k-=2*s.borderStyle.width);const T=s.borderStyle.horizontalCornerRadius,G=s.borderStyle.verticalCornerRadius;switch((T>0||G>0)&&(p.style.borderRadius=`${T}px / ${G}px`),s.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid"}s.borderColor||s.color?p.style.borderColor=e.Util.makeHexColor(0|s.color[0],0|s.color[1],0|s.color[2]):p.style.borderWidth=0}return p.style.left=`${x[0]}px`,p.style.top=`${x[1]}px`,s.hasOwnCanvas?p.style.width=p.style.height="auto":(p.style.width=`${a}px`,p.style.height=`${k}px`),p}get _commonActions(){const t=(s,o,u)=>{const p=u.detail[s];u.target.style[o]=X.ColorConverters[`${p[0]}_HTML`](p.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:s=>{const o=s.detail.display%2==1;s.target.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o,print:0===s.detail.display||3===s.detail.display})},print:s=>{this.annotationStorage.setValue(this.data.id,{print:s.detail.print})},hidden:s=>{s.target.style.visibility=s.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:s.detail.hidden})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.detail.readonly?s.target.setAttribute("readonly",""):s.target.removeAttribute("readonly")},required:s=>{s.detail.required?s.target.setAttribute("required",""):s.target.removeAttribute("required")},bgColor:s=>{t("bgColor","backgroundColor",s)},fillColor:s=>{t("fillColor","backgroundColor",s)},fgColor:s=>{t("fgColor","color",s)},textColor:s=>{t("textColor","color",s)},borderColor:s=>{t("borderColor","borderColor",s)},strokeColor:s=>{t("strokeColor","borderColor",s)}})}_dispatchEventFromSandbox(t,s){const o=this._commonActions;for(const u of Object.keys(s.detail)){const p=t[u]||o[u];p&&p(s)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const o=this._commonActions;for(const[u,p]of Object.entries(s)){const a=o[u];a&&(a({detail:p,target:t}),delete s[u])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const s=[],o=this.data.rect;for(const u of this.data.quadPoints)this.data.rect=[u[2].x,u[2].y,u[1].x,u[1].y],s.push(this._createContainer(t));return this.data.rect=o,s}_createPopup(t,s){let o=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,o=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=o.style.height,t.style.width=o.style.width,o.appendChild(t));const p=new i({container:o,trigger:t,color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,hideWrapper:!0}).render();p.style.left=o.style.width,o.appendChild(p)}_renderQuadrilaterals(t){for(const s of this.quadrilaterals)s.className=t;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,s=null){const o=[];if(this._fieldObjects){const u=this._fieldObjects[t];if(u)for(const{page:p,id:a,exportValues:k}of u){if(-1===p||a===s)continue;const x="string"==typeof k?k:null,T=document.getElementById(a);!T||v.has(T)?o.push({id:a,exportValue:x,domElement:T}):(0,e.warn)(`_getElementsByName - element not allowed: ${a}`)}return o}for(const u of document.getElementsByName(t)){const{id:p,exportValue:a}=u;p!==s&&v.has(u)&&o.push({id:p,exportValue:a,domElement:u})}return o}static get platform(){const t=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class B extends z{constructor(t,s=null){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),ignoreBorder:!!s?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:t,linkService:s}=this,o=document.createElement("a");if(t.url)s.addLinkAttributes(o,t.url,t.newWindow);else if(t.action)this._bindNamedAction(o,t.action);else if(t.dest)this._bindLink(o,t.dest);else{let u=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(u=!0,this._bindJSAction(o,t)),t.resetForm?this._bindResetFormAction(o,t.resetForm):u||this._bindLink(o,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((u,p)=>{const a=0===p?o:o.cloneNode();return u.appendChild(a),u}):(this.container.className="linkAnnotation",this.container.appendChild(o),this.container)}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||""===s)&&(t.className="internalLink")}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),t.className="internalLink"}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const u of Object.keys(s.actions)){const p=o.get(u);p&&(t[p]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:u}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,s){const o=t.onclick;if(o||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(o||(t.onclick=()=>!1));t.onclick=()=>{o&&o();const{fields:u,refs:p,include:a}=s,k=[];if(0!==u.length||0!==p.length){const G=new Set(p);for(const q of u){const he=this._fieldObjects[q]||[];for(const{id:de}of he)G.add(de)}for(const q of Object.values(this._fieldObjects))for(const he of q)G.has(he.id)===a&&k.push(he)}else for(const G of Object.values(this._fieldObjects))k.push(...G);const x=this.annotationStorage,T=[];for(const G of k){const{id:q}=G;switch(T.push(q),G.type){case"text":case"combobox":case"listbox":x.setValue(q,{value:G.defaultValue||""});break;case"checkbox":case"radiobutton":x.setValue(q,{value:G.defaultValue===G.exportValues});break;default:continue}const he=document.getElementById(q);!he||!v.has(he)||he.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:T,name:"ResetForm"}}),!1}}}class W extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class g extends z{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:s,isMac:o}=z.platform;return s&&t.ctrlKey||o&&t.metaKey}_setEventListener(t,s,o,u){s.includes("mouse")?t.addEventListener(s,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:u(p),shift:p.shiftKey,modifier:this._getKeyModifier(p)}})}):t.addEventListener(s,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:u(p)}})})}_setEventListeners(t,s,o){for(const[u,p]of s)("Action"===p||this.data.actions?.[p])&&this._setEventListener(t,u,p,o)}_setBackgroundColor(t){const s=this.data.backgroundColor||null;t.style.backgroundColor=null===s?"transparent":e.Util.makeHexColor(s[0],s[1],s[2])}}class M extends g{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,s,o,u){const p=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[s]=o),p.setValue(a.id,{[u]:o})}render(){const t=this.annotationStorage,s=this.data.id;this.container.className="textWidgetAnnotation";let o=null;if(this.renderForms){const u=t.getValue(s,{value:this.data.fieldValue}),p=u.formattedValue||u.value||"",a={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(o=document.createElement("textarea"),o.textContent=p):(o=document.createElement("input"),o.type="text",o.setAttribute("value",p)),v.add(o),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=c,a.userValue=p,o.setAttribute("id",s),o.addEventListener("input",x=>{t.setValue(s,{value:x.target.value}),this.setPropertyOnSiblings(o,"value",x.target.value,"value")}),o.addEventListener("resetform",x=>{o.value=a.userValue=this.data.defaultFieldValue??"",a.formattedValue=null});let k=x=>{const{formattedValue:T}=a;null!=T&&(x.target.value=T),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",T=>{a.userValue&&(T.target.value=a.userValue),a.valueOnFocus=T.target.value}),o.addEventListener("updatefromsandbox",T=>{this._dispatchEventFromSandbox({value(q){a.userValue=q.detail.value??"",t.setValue(s,{value:a.userValue.toString()}),q.target.value=a.userValue},formattedValue(q){const{formattedValue:he}=q.detail;a.formattedValue=he,null!=he&&q.target!==document.activeElement&&(q.target.value=he),t.setValue(s,{formattedValue:he})},selRange(q){q.target.setSelectionRange(...q.detail.selRange)}},T)}),o.addEventListener("keydown",T=>{let G=-1;if("Escape"===T.key?G=0:"Enter"===T.key?G=2:"Tab"===T.key&&(G=3),-1===G)return;const{value:q}=T.target;a.valueOnFocus!==q&&(a.userValue=q,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:q,willCommit:!0,commitKey:G,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}}))});const x=k;k=null,o.addEventListener("blur",T=>{const{value:G}=T.target;a.userValue=G,this._mouseState.isDown&&a.valueOnFocus!==G&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:G,willCommit:!0,commitKey:1,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}}),x(T)}),this.data.actions?.Keystroke&&o.addEventListener("beforeinput",T=>{const{data:G,target:q}=T,{value:he,selectionStart:de,selectionEnd:ge}=q;let _e=de,fe=ge;switch(T.inputType){case"deleteWordBackward":{const m=he.substring(0,de).match(/\w*[^\w]*$/);m&&(_e-=m[0].length);break}case"deleteWordForward":{const m=he.substring(de).match(/^[^\w]*\w*/);m&&(fe+=m[0].length);break}case"deleteContentBackward":de===ge&&(_e-=1);break;case"deleteContentForward":de===ge&&(fe+=1)}T.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:he,change:G||"",willCommit:!1,selStart:_e,selEnd:fe}})}),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],T=>T.target.value)}if(k&&o.addEventListener("blur",k),null!==this.data.maxLen&&(o.maxLength=this.data.maxLen),this.data.comb){const T=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;o.classList.add("comb"),o.style.letterSpacing=`calc(${T}px - 1ch)`}}else o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.appendChild(o),this.container}_setTextStyle(t){const{fontSize:o,fontColor:u}=this.data.defaultAppearanceData,p=t.style;o&&(p.fontSize=`${o}px`),p.color=e.Util.makeHexColor(u[0],u[1],u[2]),null!==this.data.textAlignment&&(p.textAlign=["left","center","right"][this.data.textAlignment])}}class _ extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,s=this.data,o=s.id;let u=t.getValue(o,{value:s.exportValue===s.fieldValue}).value;"string"==typeof u&&(u="Off"!==u,t.setValue(o,{value:u})),this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return v.add(p),p.disabled=s.readOnly,p.type="checkbox",p.name=s.fieldName,u&&p.setAttribute("checked",!0),p.setAttribute("id",o),p.setAttribute("exportValue",s.exportValue),p.tabIndex=c,p.addEventListener("change",a=>{const{name:k,checked:x}=a.target;for(const T of this._getElementsByName(k,o)){const G=x&&T.exportValue===s.exportValue;T.domElement&&(T.domElement.checked=G),t.setValue(T.id,{value:G})}t.setValue(o,{value:x})}),p.addEventListener("resetform",a=>{a.target.checked=(s.defaultFieldValue||"Off")===s.exportValue}),this.enableScripting&&this.hasJSActions&&(p.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({value(x){x.target.checked="Off"!==x.detail.value,t.setValue(o,{value:x.target.checked})}},a)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class A extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,s=this.data,o=s.id;let u=t.getValue(o,{value:s.fieldValue===s.buttonValue}).value;"string"==typeof u&&(u=u!==s.buttonValue,t.setValue(o,{value:u}));const p=document.createElement("input");if(v.add(p),p.disabled=s.readOnly,p.type="radio",p.name=s.fieldName,u&&p.setAttribute("checked",!0),p.setAttribute("id",o),p.tabIndex=c,p.addEventListener("change",a=>{const{name:k,checked:x}=a.target;for(const T of this._getElementsByName(k,o))t.setValue(T.id,{value:!1});t.setValue(o,{value:x})}),p.addEventListener("resetform",a=>{const k=s.defaultFieldValue;a.target.checked=null!=k&&k===s.buttonValue}),this.enableScripting&&this.hasJSActions){const a=s.buttonValue;p.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({value:T=>{const G=a===T.detail.value;for(const q of this._getElementsByName(T.target.name)){const he=G&&q.id===o;q.domElement&&(q.domElement.checked=he),t.setValue(q.id,{value:he})}}},k)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.checked)}return this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class I extends B{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class y extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,s=this.data.id,o=t.getValue(s,{value:this.data.fieldValue});let{fontSize:u}=this.data.defaultAppearanceData;u||(u=9);const p=`calc(${u}px * var(--zoom-factor))`,a=document.createElement("select");v.add(a),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.setAttribute("id",s),a.tabIndex=c,a.style.fontSize=`${u}px`,this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",T=>{const G=this.data.defaultFieldValue;for(const q of a.options)q.selected=q.value===G});for(const T of this.data.options){const G=document.createElement("option");G.textContent=T.displayValue,G.value=T.exportValue,this.data.combo&&(G.style.fontSize=p),o.value.includes(T.exportValue)&&G.setAttribute("selected",!0),a.appendChild(G)}const k=(T,G)=>{const q=G?"value":"textContent",he=T.target.options;return T.target.multiple?Array.prototype.filter.call(he,de=>de.selected).map(de=>de[q]):-1===he.selectedIndex?null:he[he.selectedIndex][q]},x=T=>Array.prototype.map.call(T.target.options,q=>({displayValue:q.textContent,exportValue:q.value}));return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",T=>{this._dispatchEventFromSandbox({value(q){const he=q.detail.value,de=new Set(Array.isArray(he)?he:[he]);for(const ge of a.options)ge.selected=de.has(ge.value);t.setValue(s,{value:k(q,!0)})},multipleSelection(q){a.multiple=!0},remove(q){const he=a.options,de=q.detail.remove;he[de].selected=!1,a.remove(de),he.length>0&&-1===Array.prototype.findIndex.call(he,_e=>_e.selected)&&(he[0].selected=!0),t.setValue(s,{value:k(q,!0),items:x(q)})},clear(q){for(;0!==a.length;)a.remove(0);t.setValue(s,{value:null,items:[]})},insert(q){const{index:he,displayValue:de,exportValue:ge}=q.detail.insert,_e=document.createElement("option");_e.textContent=de,_e.value=ge,a.insertBefore(_e,a.children[he]),t.setValue(s,{value:k(q,!0),items:x(q)})},items(q){const{items:he}=q.detail;for(;0!==a.length;)a.remove(0);for(const de of he){const{displayValue:ge,exportValue:_e}=de,fe=document.createElement("option");fe.textContent=ge,fe.value=_e,a.appendChild(fe)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(s,{value:k(q,!0),items:x(q)})},indices(q){const he=new Set(q.detail.indices);for(const de of q.target.options)de.selected=he.has(de.index);t.setValue(s,{value:k(q,!0)})},editable(q){q.target.disabled=!q.detail.editable}},T)}),a.addEventListener("input",T=>{const G=k(T,!0),q=k(T,!1);t.setValue(s,{value:G}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:q,changeEx:G,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],T=>T.target.checked)):a.addEventListener("input",function(T){t.setValue(s,{value:k(T,!0)})}),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.appendChild(a),this.container}}class n extends z{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const o=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===o.length)return this.container;const u=new i({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),p=this.page,a=e.Util.normalizeRect([this.data.parentRect[0],p.view[3]-this.data.parentRect[1]+p.view[1],this.data.parentRect[2],p.view[3]-this.data.parentRect[3]+p.view[1]]),k=a[0]+this.data.parentRect[2]-this.data.parentRect[0],x=a[1];return this.container.style.transformOrigin=`${-k}px ${-x}px`,this.container.style.left=`${k}px`,this.container.style.top=`${x}px`,this.container.appendChild(u.render()),this.container}}class i{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const s=document.createElement("div");s.className="popupWrapper",this.hideElement=this.hideWrapper?s:this.container,this.hideElement.hidden=!0;const o=document.createElement("div");o.className="popup";const u=this.color;u&&(o.style.backgroundColor=e.Util.makeHexColor(0|.7*(255-u[0])+u[0],0|.7*(255-u[1])+u[1],0|.7*(255-u[2])+u[2]));const p=document.createElement("h1");p.dir=this.titleObj.dir,p.textContent=this.titleObj.str,o.appendChild(p);const a=U.PDFDateString.toDateObject(this.modificationDate);if(a){const k=document.createElement("span");k.className="popupDate",k.textContent="{{date}}, {{time}}",k.dataset.l10nId="annotation_date_string",k.dataset.l10nArgs=JSON.stringify({date:a.toLocaleDateString(),time:a.toLocaleTimeString()}),o.appendChild(k)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const k=this._formatContents(this.contentsObj);o.appendChild(k)}else N.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:o}),o.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const k of this.trigger)k.addEventListener("click",this._toggle.bind(this)),k.addEventListener("mouseover",this._show.bind(this,!1)),k.addEventListener("mouseout",this._hide.bind(this,!1));return o.addEventListener("click",this._hide.bind(this,!0)),s.appendChild(o),s}_formatContents({str:t,dir:s}){const o=document.createElement("p");o.className="popupContent",o.dir=s;const u=t.split(/(?:\r\n?|\n)/);for(let p=0,a=u.length;p<a;++p)o.appendChild(document.createTextNode(u[p])),p<a-1&&o.appendChild(document.createElement("br"));return o}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class d extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:s,height:o}=V(t.rect),u=this.svgFactory.create(s,o),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),p.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),p.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),p.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),p.setAttribute("stroke-width",t.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.appendChild(p),this.container.append(u),this._createPopup(p,t),this.container}}class f extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:s,height:o}=V(t.rect),u=this.svgFactory.create(s,o),p=t.borderStyle.width,a=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",p/2),a.setAttribute("y",p/2),a.setAttribute("width",s-p),a.setAttribute("height",o-p),a.setAttribute("stroke-width",p||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),u.appendChild(a),this.container.append(u),this._createPopup(a,t),this.container}}class w extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:s,height:o}=V(t.rect),u=this.svgFactory.create(s,o),p=t.borderStyle.width,a=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",s/2),a.setAttribute("cy",o/2),a.setAttribute("rx",s/2-p/2),a.setAttribute("ry",o/2-p/2),a.setAttribute("stroke-width",p||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),u.appendChild(a),this.container.append(u),this._createPopup(a,t),this.container}}class b extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:s,height:o}=V(t.rect),u=this.svgFactory.create(s,o);let p=[];for(const k of t.vertices)p.push(k.x-t.rect[0]+","+(t.rect[3]-k.y));p=p.join(" ");const a=this.svgFactory.createElement(this.svgElementName);return a.setAttribute("points",p),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),u.appendChild(a),this.container.append(u),this._createPopup(a,t),this.container}}class h extends b{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class E extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class D extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:s,height:o}=V(t.rect),u=this.svgFactory.create(s,o);for(const p of t.inkLists){let a=[];for(const x of p)a.push(`${x.x-t.rect[0]},${t.rect[3]-x.y}`);a=a.join(" ");const k=this.svgFactory.createElement(this.svgElementName);k.setAttribute("points",a),k.setAttribute("stroke-width",t.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),this._createPopup(k,t),u.appendChild(k)}return this.container.append(u),this.container}}class j extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Z extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class K extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ee extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ue extends z{constructor(t){super(t,{isRenderable:!0});const{filename:s,content:o}=this.data.file;this.filename=(0,U.getFilenameFromUrl)(s),this.content=o,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:s,content:o})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ce{static render(t){const s=[],o=[];for(const p of t.annotations){if(!p)continue;const{width:a,height:k}=V(p.rect);if(!(a<=0||k<=0)){if(p.annotationType===e.AnnotationType.POPUP){o.push(p);continue}s.push(p)}}o.length&&s.push(...o);const u=t.div;for(const p of s){const a=H.create({data:p,layer:u,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new U.DOMSVGFactory,annotationStorage:t.annotationStorage||new F.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(a.isRenderable){const k=a.render();if(p.hidden&&(k.style.visibility="hidden"),Array.isArray(k))for(const x of k)u.appendChild(x);else a instanceof n?u.prepend(k):u.appendChild(k)}}_assertClassBrand(ce,this,O).call(this,u,t.annotationCanvasMap)}static update(t){const{page:s,viewport:o,annotations:u,annotationCanvasMap:p,div:a}=t,k=o.transform,x=`matrix(${k.join(",")})`;let T,G;for(const q of u){const he=a.querySelectorAll(`[data-annotation-id="${q.id}"]`);if(he)for(const de of he)if(q.hasOwnCanvas){const ge=e.Util.normalizeRect([q.rect[0],s.view[3]-q.rect[1]+s.view[1],q.rect[2],s.view[3]-q.rect[3]+s.view[1]]);if(!G){T=Math.abs(k[0]||k[1]);const m=k.slice();for(let C=0;C<4;C++)m[C]=Math.sign(m[C]);G=`matrix(${m.join(",")})`}const _e=ge[0]*T,fe=ge[1]*T;de.style.left=`${_e}px`,de.style.top=`${fe}px`,de.style.transformOrigin=`${-_e}px ${-fe}px`,de.style.transform=G}else de.style.transform=x}_assertClassBrand(ce,this,O).call(this,a,p),a.hidden=!1}}function O(r,t){if(t){for(const[s,o]of t){const u=r.querySelector(`[data-annotation-id="${s}"]`);if(!u)continue;const{firstChild:p}=u;"CANVAS"===p.nodeName?u.replaceChild(o,p):u.insertBefore(o,p)}t.clear()}}l.AnnotationLayer=ce},(ie,l)=>{function S(U){return Math.floor(255*Math.max(0,Math.min(1,U))).toString(16).padStart(2,"0")}Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0,l.ColorConverters=class e{static CMYK_G([F,X,N,c]){return["G",1-Math.min(1,.3*F+.59*N+.11*X+c)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_HTML([F]){const X=S(F);return`#${X}${X}${X}`}static RGB_G([F,X,N]){return["G",.3*F+.59*X+.11*N]}static RGB_HTML([F,X,N]){return`#${S(F)}${S(X)}${S(N)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([F,X,N,c]){return["RGB",1-Math.min(1,F+c),1-Math.min(1,N+c),1-Math.min(1,X+c)]}static CMYK_HTML(F){return this.RGB_HTML(this.CMYK_RGB(F))}static RGB_CMYK([F,X,N]){const c=1-F,v=1-X,V=1-N;return["CMYK",c,v,V,Math.min(c,v,V)]}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0;var e=S(18);l.XfaLayer=class U{static setupStorage(X,N,c,v,V){const H=v.getValue(N,{value:null});switch(c.name){case"textarea":if(null!==H.value&&(X.textContent=H.value),"print"===V)break;X.addEventListener("input",z=>{v.setValue(N,{value:z.target.value})});break;case"input":if("radio"===c.attributes.type||"checkbox"===c.attributes.type){if(H.value===c.attributes.xfaOn?X.setAttribute("checked",!0):H.value===c.attributes.xfaOff&&X.removeAttribute("checked"),"print"===V)break;X.addEventListener("change",z=>{v.setValue(N,{value:z.target.getAttribute(z.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==H.value&&X.setAttribute("value",H.value),"print"===V)break;X.addEventListener("input",z=>{v.setValue(N,{value:z.target.value})})}break;case"select":if(null!==H.value)for(const z of c.children)z.attributes.value===H.value&&(z.attributes.selected=!0);X.addEventListener("input",z=>{const B=z.target.options;v.setValue(N,{value:-1===B.selectedIndex?"":B[B.selectedIndex].value})})}}static setAttributes({html:X,element:N,storage:c=null,intent:v,linkService:V}){const{attributes:H}=N,z=X instanceof HTMLAnchorElement;"radio"===H.type&&(H.name=`${H.name}-${v}`);for(const[B,W]of Object.entries(H))if(null!=W&&"dataId"!==B)if("style"!==B)if("textContent"===B)X.textContent=W;else if("class"===B)W.length&&X.setAttribute(B,W.join(" "));else{if(z&&("href"===B||"newWindow"===B))continue;X.setAttribute(B,W)}else Object.assign(X.style,W);z&&V.addLinkAttributes(X,H.href,H.newWindow),c&&H.dataId&&this.setupStorage(X,H.dataId,N,c)}static render(X){const N=X.annotationStorage,c=X.linkService,v=X.xfaHtml,V=X.intent||"display",H=document.createElement(v.name);v.attributes&&this.setAttributes({html:H,element:v,intent:V,linkService:c});const z=[[v,-1,H]],B=X.div;if(B.appendChild(H),X.viewport){const g=`matrix(${X.viewport.transform.join(",")})`;B.style.transform=g}"richText"!==V&&B.setAttribute("class","xfaLayer xfaFont");const W=[];for(;z.length>0;){const[g,M,_]=z[z.length-1];if(M+1===g.children.length){z.pop();continue}const A=g.children[++z[z.length-1][1]];if(null===A)continue;const{name:I}=A;if("#text"===I){const n=document.createTextNode(A.value);W.push(n),_.appendChild(n);continue}let y;if(y=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,I):document.createElement(I),_.appendChild(y),A.attributes&&this.setAttributes({html:y,element:A,storage:N,intent:V,linkService:c}),A.children&&A.children.length>0)z.push([A,-1,y]);else if(A.value){const n=document.createTextNode(A.value);e.XfaText.shouldBuildText(I)&&W.push(n),y.appendChild(n)}}for(const g of B.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:W}}static update(X){const N=`matrix(${X.viewport.transform.join(",")})`;X.div.style.transform=N,X.div.hidden=!1}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.renderTextLayer=function _(A){const I=new M({textContent:A.textContent,textContentStream:A.textContentStream,container:A.container,viewport:A.viewport,textDivs:A.textDivs,textContentItemsStr:A.textContentItemsStr,enhanceTextSelection:A.enhanceTextSelection});return I._render(A.timeout),I};var e=S(1);const F=30,N=new Map,c=/^\s+$/g;function V(A,I,y,n){const i=document.createElement("span"),d=A._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==I.str,hasEOL:I.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==I.str,hasEOL:I.hasEOL};A._textDivs.push(i);const P=e.Util.transform(A._viewport.transform,I.transform);let f=Math.atan2(P[1],P[0]);const w=y[I.fontName];w.vertical&&(f+=Math.PI/2);const b=Math.hypot(P[2],P[3]),h=b*function v(A,I){const y=N.get(A);if(y)return y;I.save(),I.font=`30px ${A}`;const n=I.measureText("");let i=n.fontBoundingBoxAscent,d=Math.abs(n.fontBoundingBoxDescent);if(i){I.restore();const f=i/(i+d);return N.set(A,f),f}I.strokeStyle="red",I.clearRect(0,0,F,F),I.strokeText("g",0,0);let P=I.getImageData(0,0,F,F).data;d=0;for(let f=P.length-1-3;f>=0;f-=4)if(P[f]>0){d=Math.ceil(f/4/F);break}I.clearRect(0,0,F,F),I.strokeText("A",0,F),P=I.getImageData(0,0,F,F).data,i=0;for(let f=0,w=P.length;f<w;f+=4)if(P[f]>0){i=F-Math.floor(f/4/F);break}if(I.restore(),i){const f=i/(i+d);return N.set(A,f),f}return N.set(A,.8),.8}(w.fontFamily,n);let E,D;0===f?(E=P[4],D=P[5]-h):(E=P[4]+h*Math.sin(f),D=P[5]-h*Math.cos(f)),i.style.left=`${E}px`,i.style.top=`${D}px`,i.style.fontSize=`${b}px`,i.style.fontFamily=w.fontFamily,i.setAttribute("role","presentation"),i.textContent=I.str,i.dir=I.dir,A._fontInspectorEnabled&&(i.dataset.fontName=I.fontName),0!==f&&(d.angle=f*(180/Math.PI));let j=!1;if(I.str.length>1||A._enhanceTextSelection&&c.test(I.str))j=!0;else if(" "!==I.str&&I.transform[0]!==I.transform[3]){const $=Math.abs(I.transform[0]),Z=Math.abs(I.transform[3]);$!==Z&&Math.max($,Z)/Math.min($,Z)>1.5&&(j=!0)}if(j&&(d.canvasWidth=w.vertical?I.height*A._viewport.scale:I.width*A._viewport.scale),A._textDivProperties.set(i,d),A._textContentStream&&A._layoutText(i),A._enhanceTextSelection&&d.hasText){let $=1,Z=0;0!==f&&($=Math.cos(f),Z=Math.sin(f));const K=(w.vertical?I.height:I.width)*A._viewport.scale,ee=b;let ue,ce;0!==f?(ue=[$,Z,-Z,$,E,D],ce=e.Util.getAxialAlignedBoundingBox([0,0,K,ee],ue)):ce=[E,D,E+K,D+ee],A._bounds.push({left:ce[0],top:ce[1],right:ce[2],bottom:ce[3],div:i,size:[K,ee],m:ue})}}function H(A){if(A._canceled)return;const I=A._textDivs,y=A._capability,n=I.length;if(n>1e5)return A._renderingDone=!0,void y.resolve();if(!A._textContentStream)for(let i=0;i<n;i++)A._layoutText(I[i]);A._renderingDone=!0,y.resolve()}function z(A,I,y){let n=0;for(let i=0;i<y;i++){const d=A[I++];d>0&&(n=n?Math.min(d,n):d)}return n}function g(A,I){I.sort(function(i,d){return i.x1-d.x1||i.index-d.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const i of I){let d=0;for(;d<n.length&&n[d].end<=i.y1;)d++;let P=n.length-1;for(;P>=0&&n[P].start>=i.y2;)P--;let f,w,b,h,E=-1/0;for(b=d;b<=P;b++){let $;f=n[b],w=f.boundary,$=w.x2>i.x1?w.index>i.index?w.x1New:i.x1:void 0===w.x2New?(w.x2+i.x1)/2:w.x2New,$>E&&(E=$)}for(i.x1New=E,b=d;b<=P;b++)f=n[b],w=f.boundary,void 0===w.x2New?w.x2>i.x1?w.index>i.index&&(w.x2New=w.x2):w.x2New=E:w.x2New>E&&(w.x2New=Math.max(E,w.x2));const D=[];let j=null;for(b=d;b<=P;b++){f=n[b],w=f.boundary;const $=w.x2>i.x2?w:i;j===$?D[D.length-1].end=f.end:(D.push({start:f.start,end:f.end,boundary:$}),j=$)}for(n[d].start<i.y1&&(D[0].start=i.y1,D.unshift({start:n[d].start,end:i.y1,boundary:n[d].boundary})),i.y2<n[P].end&&(D[D.length-1].end=i.y2,D.push({start:i.y2,end:n[P].end,boundary:n[P].boundary})),b=d;b<=P;b++){if(f=n[b],w=f.boundary,void 0!==w.x2New)continue;let $=!1;for(h=d-1;!$&&h>=0&&n[h].start>=w.y1;h--)$=n[h].boundary===w;for(h=P+1;!$&&h<n.length&&n[h].end<=w.y2;h++)$=n[h].boundary===w;for(h=0;!$&&h<D.length;h++)$=D[h].boundary===w;$||(w.x2New=E)}Array.prototype.splice.apply(n,[d,P-d+1].concat(D))}for(const i of n){const d=i.boundary;void 0===d.x2New&&(d.x2New=Math.max(A,d.x2))}}class M{constructor({textContent:I,textContentStream:y,container:n,viewport:i,textDivs:d,textContentItemsStr:P,enhanceTextSelection:f}){this._textContent=I,this._textContentStream=y,this._container=n,this._document=n.ownerDocument,this._viewport=i,this._textDivs=d||[],this._textContentItemsStr=P||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(I,y){for(let n=0,i=I.length;n<i;n++)if(void 0!==I[n].str)this._textContentItemsStr.push(I[n].str),V(this,I[n],y,this._layoutTextCtx);else if("beginMarkedContentProps"===I[n].type||"beginMarkedContent"===I[n].type){const d=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==I[n].id&&this._container.setAttribute("id",`${I[n].id}`),d.appendChild(this._container)}else"endMarkedContent"===I[n].type&&(this._container=this._container.parentNode)}_layoutText(I){const y=this._textDivProperties.get(I);let n="";if(0!==y.canvasWidth&&y.hasText){const{fontSize:i,fontFamily:d}=I.style;(i!==this._layoutTextLastFontSize||d!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${i} ${d}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=d);const{width:P}=this._layoutTextCtx.measureText(I.textContent);if(P>0){const f=y.canvasWidth/P;this._enhanceTextSelection&&(y.scale=f),n=`scaleX(${f})`}}if(0!==y.angle&&(n=`rotate(${y.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(y.originalTransform=n),I.style.transform=n),y.hasText&&this._container.appendChild(I),y.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.appendChild(i)}}_render(I=0){const y=(0,e.createPromiseCapability)();let n=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=F,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),y.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const d=()=>{this._reader.read().then(({value:P,done:f})=>{f?y.resolve():(Object.assign(n,P.styles),this._processItems(P.items,n),d())},y.reject)};this._reader=this._textContentStream.getReader(),d()}}y.promise.then(()=>{n=null,I?this._renderTimer=setTimeout(()=>{H(this),this._renderTimer=null},I):H(this)},this._capability.reject)}expandTextDivs(I=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function B(A){const I=A._bounds,y=A._viewport,n=function W(A,I,y){const n=y.map(function(d,P){return{x1:d.left,y1:d.top,x2:d.right,y2:d.bottom,index:P,x1New:void 0,x2New:void 0}});g(A,n);const i=new Array(y.length);for(const d of n)i[d.index]={left:d.x1New,top:0,right:d.x2New,bottom:0};y.map(function(d,P){const f=i[P],w=n[P];w.x1=d.top,w.y1=A-f.right,w.x2=d.bottom,w.y2=A-f.left,w.index=P,w.x1New=void 0,w.x2New=void 0}),g(I,n);for(const d of n){const P=d.index;i[P].top=d.x1New,i[P].bottom=d.x2New}return i}(y.width,y.height,I);for(let i=0;i<n.length;i++){const d=I[i].div,P=A._textDivProperties.get(d);if(0===P.angle){P.paddingLeft=I[i].left-n[i].left,P.paddingTop=I[i].top-n[i].top,P.paddingRight=n[i].right-I[i].right,P.paddingBottom=n[i].bottom-I[i].bottom,A._textDivProperties.set(d,P);continue}const f=n[i],w=I[i],b=w.m,h=b[0],E=b[1],D=[[0,0],[0,w.size[1]],[w.size[0],0],w.size],j=new Float64Array(64);for(let Z=0,K=D.length;Z<K;Z++){const ee=e.Util.applyTransform(D[Z],b);j[Z+0]=h&&(f.left-ee[0])/h,j[Z+4]=E&&(f.top-ee[1])/E,j[Z+8]=h&&(f.right-ee[0])/h,j[Z+12]=E&&(f.bottom-ee[1])/E,j[Z+16]=E&&(f.left-ee[0])/-E,j[Z+20]=h&&(f.top-ee[1])/h,j[Z+24]=E&&(f.right-ee[0])/-E,j[Z+28]=h&&(f.bottom-ee[1])/h,j[Z+32]=h&&(f.left-ee[0])/-h,j[Z+36]=E&&(f.top-ee[1])/-E,j[Z+40]=h&&(f.right-ee[0])/-h,j[Z+44]=E&&(f.bottom-ee[1])/-E,j[Z+48]=E&&(f.left-ee[0])/E,j[Z+52]=h&&(f.top-ee[1])/-h,j[Z+56]=E&&(f.right-ee[0])/E,j[Z+60]=h&&(f.bottom-ee[1])/-h}const $=1+Math.min(Math.abs(h),Math.abs(E));P.paddingLeft=z(j,32,16)/$,P.paddingTop=z(j,48,16)/$,P.paddingRight=z(j,0,16)/$,P.paddingBottom=z(j,16,16)/$,A._textDivProperties.set(d,P)}}(this),this._bounds=null);const y=[],n=[];for(let i=0,d=this._textDivs.length;i<d;i++){const P=this._textDivs[i],f=this._textDivProperties.get(P);f.hasText&&(I?(y.length=0,n.length=0,f.originalTransform&&y.push(f.originalTransform),f.paddingTop>0?(n.push(`${f.paddingTop}px`),y.push(`translateY(${-f.paddingTop}px)`)):n.push(0),n.push(f.paddingRight>0?f.paddingRight/f.scale+"px":0),n.push(f.paddingBottom>0?`${f.paddingBottom}px`:0),f.paddingLeft>0?(n.push(f.paddingLeft/f.scale+"px"),y.push(`translateX(${-f.paddingLeft/f.scale}px)`)):n.push(0),P.style.padding=n.join(" "),y.length&&(P.style.transform=y.join(" "))):(P.style.padding=null,P.style.transform=f.originalTransform))}}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0;var e=S(1),U=S(5),F=S(3);let X=class{constructor(){(0,e.unreachable)("Not implemented: SVGGraphics")}};l.SVGGraphics=X;{let g=function(n){let i=[];const d=[];for(const P of n)"save"!==P.fn?"restore"===P.fn?i=d.pop():i.push(P):(i.push({fnId:92,fn:"group",items:[]}),d.push(i),i=i[i.length-1].items);return i},M=function(n){if(Number.isInteger(n))return n.toString();const i=n.toFixed(10);let d=i.length-1;if("0"!==i[d])return i;do{d--}while("0"===i[d]);return i.substring(0,"."===i[d]?d:d+1)},_=function(n){if(0===n[4]&&0===n[5]){if(0===n[1]&&0===n[2])return 1===n[0]&&1===n[3]?"":`scale(${M(n[0])} ${M(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const i=180*Math.acos(n[0])/Math.PI;return`rotate(${M(i)})`}}else if(1===n[0]&&0===n[1]&&0===n[2]&&1===n[3])return`translate(${M(n[4])} ${M(n[5])})`;return`matrix(${M(n[0])} ${M(n[1])} ${M(n[2])} ${M(n[3])} ${M(n[4])} ${M(n[5])})`};const N={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",V=["butt","round","square"],H=["miter","round","bevel"],z=function(n,i="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([n],{type:i}));const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let f=`data:${i};base64,`;for(let w=0,b=n.length;w<b;w+=3){const h=255&n[w],E=255&n[w+1],D=255&n[w+2];f+=P[h>>2]+P[(3&h)<<4|E>>4]+P[w+1<b?(15&E)<<2|D>>6:64]+P[w+2<b?63&D:64]}return f},B=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),d=new Int32Array(256);for(let D=0;D<256;D++){let j=D;for(let $=0;$<8;$++)j=1&j?3988292384^j>>1&2147483647:j>>1&2147483647;d[D]=j}function f(D,j,$,Z){let K=Z;const ee=j.length;$[K]=ee>>24&255,$[K+1]=ee>>16&255,$[K+2]=ee>>8&255,$[K+3]=255&ee,K+=4,$[K]=255&D.charCodeAt(0),$[K+1]=255&D.charCodeAt(1),$[K+2]=255&D.charCodeAt(2),$[K+3]=255&D.charCodeAt(3),K+=4,$.set(j,K),K+=j.length;const ue=function P(D,j,$){let Z=-1;for(let K=j;K<$;K++)Z=Z>>>8^d[255&(Z^D[K])];return~Z}($,Z+4,K);$[K]=ue>>24&255,$[K+1]=ue>>16&255,$[K+2]=ue>>8&255,$[K+3]=255&ue}function h(D){let j=D.length;const $=65535,Z=Math.ceil(j/$),K=new Uint8Array(2+j+5*Z+4);let ee=0;K[ee++]=120,K[ee++]=156;let ue=0;for(;j>$;)K[ee++]=0,K[ee++]=255,K[ee++]=255,K[ee++]=0,K[ee++]=0,K.set(D.subarray(ue,ue+$),ee),ee+=$,ue+=$,j-=$;K[ee++]=1,K[ee++]=255&j,K[ee++]=j>>8&255,K[ee++]=255&~j,K[ee++]=(65535&~j)>>8&255,K.set(D.subarray(ue),ee),ee+=D.length-ue;const ce=function w(D,j,$){let Z=1,K=0;for(let ee=j;ee<$;++ee)Z=(Z+(255&D[ee]))%65521,K=(K+Z)%65521;return K<<16|Z}(D,0,D.length);return K[ee++]=ce>>24&255,K[ee++]=ce>>16&255,K[ee++]=ce>>8&255,K[ee++]=255&ce,K}return function(j,$,Z){return function E(D,j,$,Z){const K=D.width,ee=D.height;let ue,ce,O;const r=D.data;switch(j){case e.ImageKind.GRAYSCALE_1BPP:ce=0,ue=1,O=K+7>>3;break;case e.ImageKind.RGB_24BPP:ce=2,ue=8,O=3*K;break;case e.ImageKind.RGBA_32BPP:ce=6,ue=8,O=4*K;break;default:throw new Error("invalid format")}const t=new Uint8Array((1+O)*ee);let s=0,o=0;for(let T=0;T<ee;++T)t[s++]=0,t.set(r.subarray(o,o+O),s),o+=O,s+=O;if(j===e.ImageKind.GRAYSCALE_1BPP&&Z){s=0;for(let T=0;T<ee;T++){s++;for(let G=0;G<O;G++)t[s++]^=255}}const u=new Uint8Array([K>>24&255,K>>16&255,K>>8&255,255&K,ee>>24&255,ee>>16&255,ee>>8&255,255&ee,ue,ce,0,0,0]),p=function b(D){if(!F.isNodeJS)return h(D);try{let j;j=parseInt(process.versions.node)>=8?D:Buffer.from(D);const $=__webpack_require__(82787).deflateSync(j,{level:9});return $ instanceof Uint8Array?$:new Uint8Array($)}catch(j){(0,e.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return h(D)}(t),k=new Uint8Array(n.length+36+u.length+p.length);let x=0;return k.set(n,x),x+=n.length,f("IHDR",u,k,x),x+=12+u.length,f("IDATA",p,k,x),x+=12+p.length,f("IEND",new Uint8Array(0),k,x),z(k,"image/png",$)}(j,void 0===j.kind?e.ImageKind.GRAYSCALE_1BPP:j.kind,$,Z)}}();class W{constructor(){this.fontSizeScale=1,this.fontWeight=N.fontWeight,this.fontSize=0,this.textMatrix=e.IDENTITY_MATRIX,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=e.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=N.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,d){this.x=i,this.y=d}}let A=0,I=0,y=0;l.SVGGraphics=X=class{constructor(n,i,d=!1){this.svgFactory=new U.DOMSVGFactory,this.current=new W,this.transformMatrix=e.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const P in e.OPS)this._operatorIdMapping[e.OPS[P]]=P}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const i=n.fnArray,d=n.argsArray;for(let P=0,f=i.length;P<f;P++)if(i[P]===e.OPS.dependency)for(const w of d[P]){const b=w.startsWith("g_")?this.commonObjs:this.objs,h=new Promise(E=>{b.get(w,E)});this.current.dependencies.push(h)}return Promise.all(this.current.dependencies)}transform(n,i,d,P,f,w){this.transformMatrix=e.Util.transform(this.transformMatrix,[n,i,d,P,f,w]),this.tgrp=null}getSVG(n,i){this.viewport=i;const d=this._initialize(i);return this.loadDependencies(n).then(()=>(this.transformMatrix=e.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),d))}convertOpList(n){const i=this._operatorIdMapping,d=n.argsArray,P=n.fnArray,f=[];for(let w=0,b=P.length;w<b;w++){const h=P[w];f.push({fnId:h,fn:i[h],args:d[w]})}return g(f)}executeOpTree(n){for(const i of n){const d=i.fn,f=i.args;switch(0|i.fnId){case e.OPS.beginText:this.beginText();break;case e.OPS.dependency:break;case e.OPS.setLeading:this.setLeading(f);break;case e.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case e.OPS.setFont:this.setFont(f);break;case e.OPS.showText:case e.OPS.showSpacedText:this.showText(f[0]);break;case e.OPS.endText:this.endText();break;case e.OPS.moveText:this.moveText(f[0],f[1]);break;case e.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case e.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case e.OPS.setHScale:this.setHScale(f[0]);break;case e.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case e.OPS.setTextRise:this.setTextRise(f[0]);break;case e.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case e.OPS.setLineWidth:this.setLineWidth(f[0]);break;case e.OPS.setLineJoin:this.setLineJoin(f[0]);break;case e.OPS.setLineCap:this.setLineCap(f[0]);break;case e.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case e.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case e.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case e.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case e.OPS.setFillColorN:this.setFillColorN(f);break;case e.OPS.shadingFill:this.shadingFill(f[0]);break;case e.OPS.setDash:this.setDash(f[0],f[1]);break;case e.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case e.OPS.setFlatness:this.setFlatness(f[0]);break;case e.OPS.setGState:this.setGState(f[0]);break;case e.OPS.fill:this.fill();break;case e.OPS.eoFill:this.eoFill();break;case e.OPS.stroke:this.stroke();break;case e.OPS.fillStroke:this.fillStroke();break;case e.OPS.eoFillStroke:this.eoFillStroke();break;case e.OPS.clip:this.clip("nonzero");break;case e.OPS.eoClip:this.clip("evenodd");break;case e.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case e.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case e.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case e.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case e.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case e.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case e.OPS.closePath:this.closePath();break;case e.OPS.closeStroke:this.closeStroke();break;case e.OPS.closeFillStroke:this.closeFillStroke();break;case e.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case e.OPS.nextLine:this.nextLine();break;case e.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case e.OPS.constructPath:this.constructPath(f[0],f[1]);break;case e.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,e.warn)(`Unimplemented operator ${d}`)}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,i,d,P,f,w){const b=this.current;b.textMatrix=b.lineMatrix=[n,i,d,P,f,w],b.textMatrixScale=Math.hypot(n,i),b.x=b.lineX=0,b.y=b.lineY=0,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${M(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",M(-b.y)),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtElement.appendChild(b.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=e.IDENTITY_MATRIX,n.lineMatrix=e.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,i){const d=this.current;d.x=d.lineX+=n,d.y=d.lineY+=i,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${M(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",M(-d.y))}showText(n){const i=this.current,d=i.font,P=i.fontSize;if(0===P)return;const f=i.fontSizeScale,w=i.charSpacing,b=i.wordSpacing,h=i.fontDirection,E=i.textHScale*h,D=d.vertical,j=D?1:-1,$=d.defaultVMetrics,Z=P*i.fontMatrix[0];let K=0;for(const ce of n){if(null===ce){K+=h*b;continue}if("number"==typeof ce){K+=j*ce*P/1e3;continue}const O=(ce.isSpace?b:0)+w,r=ce.fontChar;let t,s,u,o=ce.width;if(D){let p;const a=ce.vmetric||$;p=ce.vmetric?a[1]:.5*o,p=-p*Z,o=a?-a[0]:o,t=p/f,s=(K+a[2]*Z)/f}else t=K/f,s=0;(ce.isInFont||d.missingFile)&&(i.xcoords.push(i.x+t),D&&i.ycoords.push(-i.y+s),i.tspan.textContent+=r),u=D?o*Z-O*h:o*Z+O*h,K+=u}i.tspan.setAttributeNS(null,"x",i.xcoords.map(M).join(" ")),i.tspan.setAttributeNS(null,"y",D?i.ycoords.map(M).join(" "):M(-i.y)),D?i.y-=K:i.x+=K*E,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${M(i.fontSize)}px`),i.fontStyle!==N.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==N.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const ee=i.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;ee===e.TextRenderingMode.FILL||ee===e.TextRenderingMode.FILL_STROKE?(i.fillColor!==N.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===e.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(ee===e.TextRenderingMode.STROKE||ee===e.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let ue=i.textMatrix;0!==i.textRise&&(ue=ue.slice(),ue[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${_(ue)} scale(${M(E)}, -1)`),i.txtElement.setAttributeNS(c,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(n,i){this.setLeading(-i),this.moveText(n,i)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=z(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${i}); }\n`}setFont(n){const i=this.current,d=this.commonObjs.get(n[0]);let P=n[1];i.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),i.fontMatrix=d.fontMatrix||e.FONT_IDENTITY_MATRIX;let f="normal";d.black?f="900":d.bold&&(f="bold");const w=d.italic?"italic":"normal";P<0?(P=-P,i.fontDirection=-1):i.fontDirection=1,i.fontSize=P,i.fontFamily=d.loadedName,i.fontWeight=f,i.fontStyle=w,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",M(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&e.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=V[n]}setLineJoin(n){this.current.lineJoin=H[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,i,d){this.current.strokeColor=e.Util.makeHexColor(n,i,d)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,i,d){this.current.fillColor=e.Util.makeHexColor(n,i,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const i=this.viewport.width,d=this.viewport.height,P=e.Util.inverseTransform(this.transformMatrix),f=e.Util.applyTransform([0,0],P),w=e.Util.applyTransform([0,d],P),b=e.Util.applyTransform([i,0],P),h=e.Util.applyTransform([i,d],P),E=Math.min(f[0],w[0],b[0],h[0]),D=Math.min(f[1],w[1],b[1],h[1]),j=Math.max(f[0],w[0],b[0],h[0]),$=Math.max(f[1],w[1],b[1],h[1]),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",E),Z.setAttributeNS(null,"y",D),Z.setAttributeNS(null,"width",j-E),Z.setAttributeNS(null,"height",$-D),Z.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(Z)}_makeColorN_Pattern(n){return"TilingPattern"===n[0]?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const i=n[1],d=n[2],P=n[3]||e.IDENTITY_MATRIX,[f,w,b,h]=n[4],E=n[5],D=n[6],j=n[7],$="shading"+y++,[Z,K,ee,ue]=e.Util.normalizeRect([...e.Util.applyTransform([f,w],P),...e.Util.applyTransform([b,h],P)]),[ce,O]=e.Util.singularValueDecompose2dScale(P),r=E*ce,t=D*O,s=this.svgFactory.createElement("svg:pattern");s.setAttributeNS(null,"id",$),s.setAttributeNS(null,"patternUnits","userSpaceOnUse"),s.setAttributeNS(null,"width",r),s.setAttributeNS(null,"height",t),s.setAttributeNS(null,"x",`${Z}`),s.setAttributeNS(null,"y",`${K}`);const o=this.svg,u=this.transformMatrix,p=this.current.fillColor,a=this.current.strokeColor,k=this.svgFactory.create(ee-Z,ue-K);if(this.svg=k,this.transformMatrix=P,2===j){const x=e.Util.makeHexColor(...i);this.current.fillColor=x,this.current.strokeColor=x}return this.executeOpTree(this.convertOpList(d)),this.svg=o,this.transformMatrix=u,this.current.fillColor=p,this.current.strokeColor=a,s.appendChild(k.childNodes[0]),this.defs.appendChild(s),`url(#${$})`}_makeShadingPattern(n){switch("string"==typeof n&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const i="shading"+y++,d=n[3];let P;switch(n[1]){case"axial":const f=n[4],w=n[5];P=this.svgFactory.createElement("svg:linearGradient"),P.setAttributeNS(null,"id",i),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",f[0]),P.setAttributeNS(null,"y1",f[1]),P.setAttributeNS(null,"x2",w[0]),P.setAttributeNS(null,"y2",w[1]);break;case"radial":const b=n[4],h=n[5],E=n[6],D=n[7];P=this.svgFactory.createElement("svg:radialGradient"),P.setAttributeNS(null,"id",i),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",h[0]),P.setAttributeNS(null,"cy",h[1]),P.setAttributeNS(null,"r",D),P.setAttributeNS(null,"fx",b[0]),P.setAttributeNS(null,"fy",b[1]),P.setAttributeNS(null,"fr",E);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const f of d){const w=this.svgFactory.createElement("svg:stop");w.setAttributeNS(null,"offset",f[0]),w.setAttributeNS(null,"stop-color",f[1]),P.appendChild(w)}return this.defs.appendChild(P),`url(#${i})`;case"Mesh":return(0,e.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,i){this.current.dashArray=n,this.current.dashPhase=i}constructPath(n,i){const d=this.current;let P=d.x,f=d.y,w=[],b=0;for(const h of n)switch(0|h){case e.OPS.rectangle:P=i[b++],f=i[b++];const j=P+i[b++],$=f+i[b++];w.push("M",M(P),M(f),"L",M(j),M(f),"L",M(j),M($),"L",M(P),M($),"Z");break;case e.OPS.moveTo:P=i[b++],f=i[b++],w.push("M",M(P),M(f));break;case e.OPS.lineTo:P=i[b++],f=i[b++],w.push("L",M(P),M(f));break;case e.OPS.curveTo:P=i[b+4],f=i[b+5],w.push("C",M(i[b]),M(i[b+1]),M(i[b+2]),M(i[b+3]),M(P),M(f)),b+=6;break;case e.OPS.curveTo2:w.push("C",M(P),M(f),M(i[b]),M(i[b+1]),M(i[b+2]),M(i[b+3])),P=i[b+2],f=i[b+3],b+=4;break;case e.OPS.curveTo3:P=i[b+2],f=i[b+3],w.push("C",M(i[b]),M(i[b+1]),M(P),M(f),M(P),M(f)),b+=4;break;case e.OPS.closePath:w.push("Z")}w=w.join(" "),d.path&&n.length>0&&n[0]!==e.OPS.rectangle&&n[0]!==e.OPS.moveTo?w=d.path.getAttributeNS(null,"d")+w:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(d.path)),d.path.setAttributeNS(null,"d",w),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(P,f)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element)return void(this.pendingClip=null);const i="clippath"+A++,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",i),d.setAttributeNS(null,"transform",_(this.transformMatrix));const P=n.element.cloneNode(!0);if(P.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,d.appendChild(P),this.defs.appendChild(d),n.activeClipUrl){n.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;d.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const i=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",i)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[i,d]of n)switch(i){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,e.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,i=1){const d=this.current;let P=d.dashArray;1!==i&&P.length>0&&(P=P.map(function(f){return i*f})),n.setAttributeNS(null,"stroke",d.strokeColor),n.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",M(d.miterLimit)),n.setAttributeNS(null,"stroke-linecap",d.lineCap),n.setAttributeNS(null,"stroke-linejoin",d.lineJoin),n.setAttributeNS(null,"stroke-width",M(i*d.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",P.map(M).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",M(i*d.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const i=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);i?this.paintInlineImageXObject(i):(0,e.warn)(`Dependent image with object ID ${n} is not ready yet`)}paintInlineImageXObject(n,i){const d=n.width,P=n.height,f=B(n,this.forceDataSchema,!!i),w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",M(d)),w.setAttributeNS(null,"height",M(P)),this.current.element=w,this.clip("nonzero");const b=this.svgFactory.createElement("svg:image");b.setAttributeNS(v,"xlink:href",f),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y",M(-P)),b.setAttributeNS(null,"width",M(d)+"px"),b.setAttributeNS(null,"height",M(P)+"px"),b.setAttributeNS(null,"transform",`scale(${M(1/d)} ${M(-1/P)})`),i?i.appendChild(b):this._ensureTransformGroup().appendChild(b)}paintImageMaskXObject(n){const i=this.current,d=n.width,P=n.height,f=i.fillColor;i.maskId="mask"+I++;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",i.maskId);const b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width",M(d)),b.setAttributeNS(null,"height",M(P)),b.setAttributeNS(null,"fill",f),b.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(w),this._ensureTransformGroup().appendChild(b),this.paintInlineImageXObject(n,w)}paintFormXObjectBegin(n,i){if(Array.isArray(n)&&6===n.length&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i){const d=i[2]-i[0],P=i[3]-i[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",i[0]),f.setAttributeNS(null,"y",i[1]),f.setAttributeNS(null,"width",M(d)),f.setAttributeNS(null,"height",M(P)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const i=this.svgFactory.create(n.width,n.height),d=this.svgFactory.createElement("svg:defs");i.appendChild(d),this.defs=d;const P=this.svgFactory.createElement("svg:g");return P.setAttributeNS(null,"transform",_(n.transform)),i.appendChild(P),this.svg=P,i}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0;var e=S(1),U=S(26);const F=__webpack_require__(23237),X=__webpack_require__(97492),N=__webpack_require__(31815),c=__webpack_require__(66671),v=/^file:\/\/\/[a-zA-Z]:\//;l.PDFNodeStream=class H{constructor(y){this.source=y,this.url=function V(I){const y=c.parse(I);return"file:"===y.protocol||y.host?y:/^[a-z]:[/\\]/i.test(I)?c.parse(`file:///${I}`):(y.host||(y.protocol="file:"),y)}(y.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new g(this),this._fullRequestReader}getRangeReader(y,n){if(n<=this._progressiveDataLength)return null;const i=this.isFsUrl?new A(this,y,n):new M(this,y,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const n of this._rangeRequestReaders.slice(0))n.cancel(y)}};class z{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=y.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var y=this;return _asyncToGenerator(function*(){if(yield y._readCapability.promise,y._done)return{value:void 0,done:!0};if(y._storedError)throw y._storedError;const n=y._readableStream.read();return null===n?(y._readCapability=(0,e.createPromiseCapability)(),y.read()):(y._loaded+=n.length,y.onProgress&&y.onProgress({loaded:y._loaded,total:y._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(y){this._readableStream?this._readableStream.destroy(y):this._error(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class B{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!y.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var y=this;return _asyncToGenerator(function*(){if(yield y._readCapability.promise,y._done)return{value:void 0,done:!0};if(y._storedError)throw y._storedError;const n=y._readableStream.read();return null===n?(y._readCapability=(0,e.createPromiseCapability)(),y.read()):(y._loaded+=n.length,y.onProgress&&y.onProgress({loaded:y._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(y){this._readableStream?this._readableStream.destroy(y):this._error(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(I,y){return{protocol:I.protocol,auth:I.auth,host:I.hostname,port:I.port,path:I.path,method:"GET",headers:y}}class g extends z{constructor(y){super(y);const n=i=>{if(404===i.statusCode){const w=new e.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=w,void this._headersCapability.reject(w)}this._headersCapability.resolve(),this._setReadableStream(i);const d=w=>this._readableStream.headers[w.toLowerCase()],{allowRangeRequests:P,suggestedLength:f}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:y.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=f||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(d)};this._request=null,this._request="http:"===this._url.protocol?X.request(W(this._url,y.httpHeaders),n):N.request(W(this._url,y.httpHeaders),n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class M extends B{constructor(y,n,i){super(y),this._httpHeaders={};for(const P in y.httpHeaders){const f=y.httpHeaders[P];typeof f>"u"||(this._httpHeaders[P]=f)}this._httpHeaders.Range=`bytes=${n}-${i-1}`;const d=P=>{if(404!==P.statusCode)this._setReadableStream(P);else{const f=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f}};this._request=null,this._request="http:"===this._url.protocol?X.request(W(this._url,this._httpHeaders),d):N.request(W(this._url,this._httpHeaders),d),this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class _ extends z{constructor(y){super(y);let n=decodeURIComponent(this._url.path);v.test(this._url.href)&&(n=n.replace(/^\//,"")),F.lstat(n,(i,d)=>{if(i)return"ENOENT"===i.code&&(i=new e.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=d.size,this._setReadableStream(F.createReadStream(n)),this._headersCapability.resolve()})}}class A extends B{constructor(y,n,i){super(y);let d=decodeURIComponent(this._url.path);v.test(this._url.href)&&(d=d.replace(/^\//,"")),this._setReadableStream(F.createReadStream(d,{start:n,end:i-1}))}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=function c(V,H){return 404===V||0===V&&H.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+H+'".'):new e.UnexpectedResponseException(`Unexpected server response (${V}) while retrieving PDF "${H}".`,V)},l.extractFilenameFromHeader=function N(V){const H=V("Content-Disposition");if(H){let z=(0,U.getFilenameFromContentDispositionHeader)(H);if(z.includes("%"))try{z=decodeURIComponent(z)}catch{}if((0,F.isPdfFile)(z))return z}return null},l.validateRangeRequestCapabilities=function X({getResponseHeader:V,isHttp:H,rangeChunkSize:z,disableRange:B}){const W={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(V("Content-Length"),10);return!Number.isInteger(g)||(W.suggestedLength=g,g<=2*z)||B||!H||"bytes"!==V("Accept-Ranges")||"identity"!==(V("Content-Encoding")||"identity")||(W.allowRangeRequests=!0),W},l.validateResponseStatus=function v(V){return 200===V||206===V};var e=S(1),U=S(27),F=S(5)},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=function U(F){let X=!0,N=c("filename\\*","i").exec(F);if(N){N=N[1];let g=z(N);return g=unescape(g),g=B(g),g=W(g),V(g)}if(N=function H(g){const M=[];let _;const A=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(_=A.exec(g));){let[,y,n,i]=_;if(y=parseInt(y,10),y in M){if(0===y)break}else M[y]=[n,i]}const I=[];for(let y=0;y<M.length&&y in M;++y){let[n,i]=M[y];i=z(i),n&&(i=unescape(i),0===y&&(i=B(i))),I.push(i)}return I.join("")}(F),N)return V(W(N));if(N=c("filename","i").exec(F),N){N=N[1];let g=z(N);return g=W(g),V(g)}function c(g,M){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',M)}function v(g,M){if(g){if(!/^[\x00-\xFF]+$/.test(M))return M;try{const _=new TextDecoder(g,{fatal:!0}),A=(0,e.stringToBytes)(M);M=_.decode(A),X=!1}catch{}}return M}function V(g){return X&&/[\x80-\xff]/.test(g)&&(g=v("utf-8",g),X&&(g=v("iso-8859-1",g))),g}function z(g){if(g.startsWith('"')){const M=g.slice(1).split('\\"');for(let _=0;_<M.length;++_){const A=M[_].indexOf('"');-1!==A&&(M[_]=M[_].slice(0,A),M.length=_+1),M[_]=M[_].replace(/\\(.)/g,"$1")}g=M.join('"')}return g}function B(g){const M=g.indexOf("'");return-1===M?g:v(g.slice(0,M),g.slice(M+1).replace(/^[^']*'/,""))}function W(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(M,_,A,I){if("q"===A||"Q"===A)return v(_,I=(I=I.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(y,n){return String.fromCharCode(parseInt(n,16))}));try{I=atob(I)}catch{}return v(_,I)})}return""};var e=S(1)},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0;var e=S(1),U=S(26);class c{constructor(B,W={}){this.url=B,this.isHttp=/^https?:/i.test(B),this.httpHeaders=this.isHttp&&W.httpHeaders||Object.create(null),this.withCredentials=W.withCredentials||!1,this.getXhr=W.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(B,W,g){const M={begin:B,end:W};for(const _ in g)M[_]=g[_];return this.request(M)}requestFull(B){return this.request(B)}request(B){const W=this.getXhr(),g=this.currXhrId++,M=this.pendingRequests[g]={xhr:W};W.open("GET",this.url),W.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const A=this.httpHeaders[_];typeof A>"u"||W.setRequestHeader(_,A)}return this.isHttp&&"begin"in B&&"end"in B?(W.setRequestHeader("Range",`bytes=${B.begin}-${B.end-1}`),M.expectedStatus=206):M.expectedStatus=200,W.responseType="arraybuffer",B.onError&&(W.onerror=function(_){B.onError(W.status)}),W.onreadystatechange=this.onStateChange.bind(this,g),W.onprogress=this.onProgress.bind(this,g),M.onHeadersReceived=B.onHeadersReceived,M.onDone=B.onDone,M.onError=B.onError,M.onProgress=B.onProgress,W.send(null),g}onProgress(B,W){const g=this.pendingRequests[B];g&&g.onProgress?.(W)}onStateChange(B,W){const g=this.pendingRequests[B];if(!g)return;const M=g.xhr;if(M.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),4!==M.readyState||!(B in this.pendingRequests))return;if(delete this.pendingRequests[B],0===M.status&&this.isHttp)return void g.onError?.(M.status);const _=M.status||200;if((200!==_||206!==g.expectedStatus)&&_!==g.expectedStatus)return void g.onError?.(M.status);const I=function N(z){const B=z.response;return"string"!=typeof B?B:(0,e.stringToBytes)(B).buffer}(M);if(206===_){const y=M.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);g.onDone({begin:parseInt(n[1],10),chunk:I})}else I?g.onDone({begin:0,chunk:I}):g.onError?.(M.status)}getRequestXhr(B){return this.pendingRequests[B].xhr}isPendingRequest(B){return B in this.pendingRequests}abortRequest(B){const W=this.pendingRequests[B].xhr;delete this.pendingRequests[B],W.abort()}}l.PDFNetworkStream=class v{constructor(B){this._source=B,this._manager=new c(B.url,{httpHeaders:B.httpHeaders,withCredentials:B.withCredentials}),this._rangeChunkSize=B.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(B){const W=this._rangeRequestReaders.indexOf(B);W>=0&&this._rangeRequestReaders.splice(W,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new V(this._manager,this._source),this._fullRequestReader}getRangeReader(B,W){const g=new H(this._manager,B,W);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(B){this._fullRequestReader?.cancel(B);for(const W of this._rangeRequestReaders.slice(0))W.cancel(B)}};class V{constructor(B,W){this._manager=B;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=W.url,this._fullRequestId=B.requestFull(g),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._contentLength=W.length,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const B=this._fullRequestId,W=this._manager.getRequestXhr(B),g=A=>W.getResponseHeader(A),{allowRangeRequests:M,suggestedLength:_}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});M&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(B),this._headersReceivedCapability.resolve()}_onDone(B){if(B&&(this._requests.length>0?this._requests.shift().resolve({value:B.chunk,done:!1}):this._cachedChunks.push(B.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(B){this._storedError=(0,U.createResponseStatusError)(B,this._url),this._headersReceivedCapability.reject(this._storedError);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(B){this.onProgress?.({loaded:B.loaded,total:B.lengthComputable?B.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var B=this;return _asyncToGenerator(function*(){if(B._storedError)throw B._storedError;if(B._cachedChunks.length>0)return{value:B._cachedChunks.shift(),done:!1};if(B._done)return{value:void 0,done:!0};const W=(0,e.createPromiseCapability)();return B._requests.push(W),W.promise})()}cancel(B){this._done=!0,this._headersReceivedCapability.reject(B);for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H{constructor(B,W,g){this._manager=B;const M={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=B.url,this._requestId=B.requestRange(W,g,M),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(B){const W=B.chunk;this._requests.length>0?this._requests.shift().resolve({value:W,done:!1}):this._queuedChunk=W,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(B){this._storedError=(0,U.createResponseStatusError)(B,this._url);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(B){this.isStreamingSupported||this.onProgress?.({loaded:B.loaded})}get isStreamingSupported(){return!1}read(){var B=this;return _asyncToGenerator(function*(){if(B._storedError)throw B._storedError;if(null!==B._queuedChunk){const g=B._queuedChunk;return B._queuedChunk=null,{value:g,done:!1}}if(B._done)return{value:void 0,done:!0};const W=(0,e.createPromiseCapability)();return B._requests.push(W),W.promise})()}cancel(B){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ie,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0;var e=S(1),U=S(26);function F(V,H,z){return{method:"GET",headers:V,signal:z?.signal,mode:"cors",credentials:H?"include":"same-origin",redirect:"follow"}}function X(V){const H=new Headers;for(const z in V){const B=V[z];typeof B>"u"||H.append(z,B)}return H}l.PDFFetchStream=class N{constructor(H){this.source=H,this.isHttp=/^https?:/i.test(H.url),this.httpHeaders=this.isHttp&&H.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(H,z){if(z<=this._progressiveDataLength)return null;const B=new v(this,H,z);return this._rangeRequestReaders.push(B),B}cancelAllRequests(H){this._fullRequestReader&&this._fullRequestReader.cancel(H);for(const z of this._rangeRequestReaders.slice(0))z.cancel(H)}};class c{constructor(H){this._stream=H,this._reader=null,this._loaded=0,this._filename=null;const z=H.source;this._withCredentials=z.withCredentials||!1,this._contentLength=z.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=z.disableRange||!1,this._rangeChunkSize=z.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!z.disableStream,this._isRangeSupported=!z.disableRange,this._headers=X(this._stream.httpHeaders);const B=z.url;fetch(B,F(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,U.validateResponseStatus)(W.status))throw(0,U.createResponseStatusError)(W.status,B);this._reader=W.body.getReader(),this._headersCapability.resolve();const g=A=>W.headers.get(A),{allowRangeRequests:M,suggestedLength:_}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=_||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var H=this;return _asyncToGenerator(function*(){yield H._headersCapability.promise;const{value:z,done:B}=yield H._reader.read();return B?{value:z,done:B}:(H._loaded+=z.byteLength,H.onProgress&&H.onProgress({loaded:H._loaded,total:H._contentLength}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(H){this._reader&&this._reader.cancel(H),this._abortController&&this._abortController.abort()}}class v{constructor(H,z,B){this._stream=H,this._reader=null,this._loaded=0;const W=H.source;this._withCredentials=W.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!W.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=X(this._stream.httpHeaders),this._headers.append("Range",`bytes=${z}-${B-1}`);const g=W.url;fetch(g,F(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,U.validateResponseStatus)(M.status))throw(0,U.createResponseStatusError)(M.status,g);this._readCapability.resolve(),this._reader=M.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var H=this;return _asyncToGenerator(function*(){yield H._readCapability.promise;const{value:z,done:B}=yield H._reader.read();return B?{value:z,done:B}:(H._loaded+=z.byteLength,H.onProgress&&H.onProgress({loaded:H._loaded}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(H){this._reader&&this._reader.cancel(H),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(ie){var l=__webpack_module_cache__[ie];if(void 0!==l)return l.exports;var S=__webpack_module_cache__[ie]={exports:{}};return __webpack_modules__[ie](S,S.exports,__w_pdfjs_require__),S.exports}var __nested_webpack_exports__={};return(()=>{var ie=__nested_webpack_exports__;Object.defineProperty(ie,"__esModule",{value:!0}),Object.defineProperty(ie,"AnnotationLayer",{enumerable:!0,get:function(){return U.AnnotationLayer}}),Object.defineProperty(ie,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(ie,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(ie,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(ie,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(ie,"LoopbackPort",{enumerable:!0,get:function(){return S.LoopbackPort}}),Object.defineProperty(ie,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(ie,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(ie,"PDFDataRangeTransport",{enumerable:!0,get:function(){return S.PDFDataRangeTransport}}),Object.defineProperty(ie,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(ie,"PDFWorker",{enumerable:!0,get:function(){return S.PDFWorker}}),Object.defineProperty(ie,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(ie,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(ie,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(ie,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(ie,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(ie,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return l.UNSUPPORTED_FEATURES}}),Object.defineProperty(ie,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(ie,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(ie,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(ie,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(ie,"build",{enumerable:!0,get:function(){return S.build}}),Object.defineProperty(ie,"createPromiseCapability",{enumerable:!0,get:function(){return l.createPromiseCapability}}),Object.defineProperty(ie,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(ie,"getDocument",{enumerable:!0,get:function(){return S.getDocument}}),Object.defineProperty(ie,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(ie,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(ie,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(ie,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(ie,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(ie,"renderTextLayer",{enumerable:!0,get:function(){return N.renderTextLayer}}),Object.defineProperty(ie,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(ie,"version",{enumerable:!0,get:function(){return S.version}});var l=__w_pdfjs_require__(1),S=__w_pdfjs_require__(4),e=__w_pdfjs_require__(5),U=__w_pdfjs_require__(20),F=__w_pdfjs_require__(13),X=__w_pdfjs_require__(3),N=__w_pdfjs_require__(23),c=__w_pdfjs_require__(24),v=__w_pdfjs_require__(22);if(X.isNodeJS){const{PDFNodeStream:z}=__w_pdfjs_require__(25);(0,S.setPDFNetworkStreamFactory)(B=>new z(B))}else{const{PDFNetworkStream:z}=__w_pdfjs_require__(28),{PDFFetchStream:B}=__w_pdfjs_require__(29);(0,S.setPDFNetworkStreamFactory)(W=>(0,e.isValidFetchUrl)(W.url)?new B(W):new z(W))}})(),__nested_webpack_exports__})(),module.exports=S()},33876:function(ie,l,S){var z,e=S(93831).default,U=S(7920).default,F=S(80816).default,X=S(43723).default,N=S(45804).default,c=S(18188).default,v=S(75453).default;z=()=>(()=>{"use strict";var V=[,(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DefaultXfaLayerFactory=g.DefaultTextLayerFactory=g.DefaultStructTreeLayerFactory=g.DefaultAnnotationLayerFactory=void 0;var _=M(2),A=M(4),I=M(5),y=M(7),n=M(8),i=M(9);g.DefaultAnnotationLayerFactory=class d{createAnnotationLayerBuilder(h,E,D=null,j="",$=!0,Z=A.NullL10n,K=!1,ee=null,ue=null,ce=null,O=null){return new _.AnnotationLayerBuilder({pageDiv:h,pdfPage:E,imageResourcesPath:j,renderForms:$,linkService:new I.SimpleLinkService,l10n:Z,annotationStorage:D,enableScripting:K,hasJSActionsPromise:ee,fieldObjectsPromise:ce,mouseState:ue,annotationCanvasMap:O})}},g.DefaultStructTreeLayerFactory=class P{createStructTreeLayerBuilder(h){return new y.StructTreeLayerBuilder({pdfPage:h})}},g.DefaultTextLayerFactory=class f{createTextLayerBuilder(h,E,D,j=!1,$,Z){return new n.TextLayerBuilder({textLayerDiv:h,pageIndex:E,viewport:D,enhanceTextSelection:j,eventBus:$,highlighter:Z})}},g.DefaultXfaLayerFactory=class w{createXfaLayerBuilder(h,E,D=null,j=null){return new i.XfaLayerBuilder({pageDiv:h,pdfPage:E,annotationStorage:D,linkService:new I.SimpleLinkService,xfaHtml:j})}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationLayerBuilder=void 0;var _=M(3),A=M(4);g.AnnotationLayerBuilder=class I{constructor({pageDiv:n,pdfPage:i,linkService:d,downloadManager:P,annotationStorage:f=null,imageResourcesPath:w="",renderForms:b=!0,l10n:h=A.NullL10n,enableScripting:E=!1,hasJSActionsPromise:D=null,fieldObjectsPromise:j=null,mouseState:$=null,annotationCanvasMap:Z=null}){this.pageDiv=n,this.pdfPage=i,this.linkService=d,this.downloadManager=P,this.imageResourcesPath=w,this.renderForms=b,this.l10n=h,this.annotationStorage=f,this.enableScripting=E,this._hasJSActionsPromise=D,this._fieldObjectsPromise=j,this._mouseState=$,this._annotationCanvasMap=Z,this.div=null,this._cancelled=!1}render(n,i="display"){var d=this;return v(function*(){const[P,f=!1,w=null]=yield Promise.all([d.pdfPage.getAnnotations({intent:i}),d._hasJSActionsPromise,d._fieldObjectsPromise]);if(d._cancelled||0===P.length)return;const b={viewport:n.clone({dontFlip:!0}),div:d.div,annotations:P,page:d.pdfPage,imageResourcesPath:d.imageResourcesPath,renderForms:d.renderForms,linkService:d.linkService,downloadManager:d.downloadManager,annotationStorage:d.annotationStorage,enableScripting:d.enableScripting,hasJSActions:f,fieldObjects:w,mouseState:d._mouseState,annotationCanvasMap:d._annotationCanvasMap};d.div?_.AnnotationLayer.update(b):(d.div=document.createElement("div"),d.div.className="annotationLayer",d.pageDiv.appendChild(d.div),b.div=d.div,_.AnnotationLayer.render(b),d.l10n.translate(d.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},W=>{let g;g=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:S(20717),W.exports=g},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NullL10n=void 0,g.fixupLangCode=function I(i){return A[i?.toLowerCase()]||i},g.getL10nFallback=_;const M={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function _(i,d){switch(i){case"find_match_count":i=`find_match_count[${1===d.total?"one":"other"}]`;break;case"find_match_count_limit":i=`find_match_count_limit[${1===d.limit?"one":"other"}]`}return M[i]||""}const A={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};g.NullL10n={getLanguage:()=>v(function*(){return"en-us"})(),getDirection:()=>v(function*(){return"ltr"})(),get:(i,d=null,P=_(i,d))=>v(function*(){return function y(i,d){return d?i.replace(/\{\{\s*(\w+)\s*\}\}/g,(P,f)=>f in d?d[f]:"{{"+f+"}}"):i}(P,d)})(),translate:i=>v(function*(){})()}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SimpleLinkService=g.PDFLinkService=g.LinkTarget=void 0;var _=M(6);const I={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function y(b,{url:h,target:E,rel:D,enabled:j=!0}={}){if(!h||"string"!=typeof h)throw new Error('A valid "url" parameter must provided.');const $=(0,_.removeNullCharacters)(h);j?b.href=b.title=$:(b.href="",b.title=`Disabled: ${$}`,b.onclick=()=>!1);let Z="";switch(E){case I.NONE:break;case I.SELF:Z="_self";break;case I.BLANK:Z="_blank";break;case I.PARENT:Z="_parent";break;case I.TOP:Z="_top"}b.target=Z,b.rel="string"==typeof D?D:"noopener noreferrer nofollow"}g.LinkTarget=I;var n=new WeakMap,i=new WeakSet;class d{constructor({eventBus:h,externalLinkTarget:E=null,externalLinkRel:D=null,ignoreDestinationZoom:j=!1}={}){F(this,i),X(this,n,new Map),this.eventBus=h,this.externalLinkTarget=E,this.externalLinkRel=D,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=j,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(h,E=null){this.baseUrl=E,this.pdfDocument=h,c(n,this).clear()}setViewer(h){this.pdfViewer=h}setHistory(h){this.pdfHistory=h}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(h){this.pdfViewer.currentPageNumber=h}get rotation(){return this.pdfViewer.pagesRotation}set rotation(h){this.pdfViewer.pagesRotation=h}goToDestination(h){var E=this;return v(function*(){if(!E.pdfDocument)return;let D,j;"string"==typeof h?(D=h,j=yield E.pdfDocument.getDestination(h)):(D=null,j=yield h),Array.isArray(j)?N(i,E,P).call(E,h,D,j):console.error(`PDFLinkService.goToDestination: "${j}" is not a valid destination array, for dest="${h}".`)})()}goToPage(h){if(!this.pdfDocument)return;const E="string"==typeof h&&this.pdfViewer.pageLabelToPageNumber(h)||0|h;Number.isInteger(E)&&E>0&&E<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(E)),this.pdfViewer.scrollPageIntoView({pageNumber:E})):console.error(`PDFLinkService.goToPage: "${h}" is not a valid page.`)}addLinkAttributes(h,E,D=!1){y(h,{url:E,target:D?I.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(h){if("string"==typeof h){if(h.length>0)return this.getAnchorUrl("#"+escape(h))}else if(Array.isArray(h)){const E=JSON.stringify(h);if(E.length>0)return this.getAnchorUrl("#"+escape(E))}return this.getAnchorUrl("")}getAnchorUrl(h){return(this.baseUrl||"")+h}setHash(h){if(!this.pdfDocument)return;let E,D;if(h.includes("=")){const j=(0,_.parseQueryString)(h);if(j.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:j.get("search").replace(/"/g,""),phraseSearch:"true"===j.get("phrase")}),j.has("page")&&(E=0|j.get("page")||1),j.has("zoom")){const $=j.get("zoom").split(","),Z=$[0],K=parseFloat(Z);Z.includes("Fit")?"Fit"===Z||"FitB"===Z?D=[null,{name:Z}]:"FitH"===Z||"FitBH"===Z||"FitV"===Z||"FitBV"===Z?D=[null,{name:Z},$.length>1?0|$[1]:null]:"FitR"===Z?5!==$.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):D=[null,{name:Z},0|$[1],0|$[2],0|$[3],0|$[4]]:console.error(`PDFLinkService.setHash: "${Z}" is not a valid zoom value.`):D=[null,{name:"XYZ"},$.length>1?0|$[1]:null,$.length>2?0|$[2]:null,K?K/100:Z]}D?this.pdfViewer.scrollPageIntoView({pageNumber:E||this.page,destArray:D,allowNegativeOffset:!0}):E&&(this.page=E),j.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:j.get("pagemode")}),j.has("nameddest")&&this.goToDestination(j.get("nameddest"))}else{D=unescape(h);try{D=JSON.parse(D),Array.isArray(D)||(D=D.toString())}catch{}if("string"==typeof D||f.call(d,D))return void this.goToDestination(D);console.error(`PDFLinkService.setHash: "${unescape(h)}" is not a valid destination.`)}}executeNamedAction(h){switch(h){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:h})}cachePageRef(h,E){if(!E)return;const D=0===E.gen?`${E.num}R`:`${E.num}R${E.gen}`;c(n,this).set(D,h)}_cachedPageNumber(h){if(!h)return null;const E=0===h.gen?`${h.num}R`:`${h.num}R${h.gen}`;return c(n,this).get(E)||null}isPageVisible(h){return this.pdfViewer.isPageVisible(h)}isPageCached(h){return this.pdfViewer.isPageCached(h)}}function P(b,h=null,E){const D=E[0];let j;if("object"==typeof D&&null!==D){if(j=this._cachedPageNumber(D),!j)return void this.pdfDocument.getPageIndex(D).then($=>{this.cachePageRef($+1,D),N(i,this,P).call(this,b,h,E)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${D}" is not a valid page reference, for dest="${b}".`)})}else{if(!Number.isInteger(D))return void console.error(`PDFLinkService.#goToDestinationHelper: "${D}" is not a valid destination reference, for dest="${b}".`);j=D+1}!j||j<1||j>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${j}" is not a valid page number, for dest="${b}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:h,explicitDest:E,pageNumber:j})),this.pdfViewer.scrollPageIntoView({pageNumber:j,destArray:E,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function f(b){if(!Array.isArray(b))return!1;const h=b.length;if(h<2)return!1;const E=b[0];if(!("object"==typeof E&&Number.isInteger(E.num)&&Number.isInteger(E.gen)||Number.isInteger(E)&&E>=0))return!1;const D=b[1];if("object"!=typeof D||"string"!=typeof D.name)return!1;let j=!0;switch(D.name){case"XYZ":if(5!==h)return!1;break;case"Fit":case"FitB":return 2===h;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==h)return!1;break;case"FitR":if(6!==h)return!1;j=!1;break;default:return!1}for(let $=2;$<h;$++){const Z=b[$];if(!("number"==typeof Z||j&&null===Z))return!1}return!0}g.PDFLinkService=d,g.SimpleLinkService=class w{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(h){}get rotation(){return 0}set rotation(h){}goToDestination(h){return v(function*(){})()}goToPage(h){}addLinkAttributes(h,E,D=!1){y(h,{url:E,enabled:this.externalLinkEnabled})}getDestinationHash(h){return"#"}getAnchorUrl(h){return"#"}setHash(h){}executeNamedAction(h){}cachePageRef(h,E){}isPageVisible(h){return!0}isPageCached(h){return!0}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.animationStarted=g.VERTICAL_PADDING=g.UNKNOWN_SCALE=g.TextLayerMode=g.SpreadMode=g.SidebarView=g.ScrollMode=g.SCROLLBAR_PADDING=g.RenderingStates=g.RendererType=g.ProgressBar=g.PresentationModeState=g.OutputScale=g.MIN_SCALE=g.MAX_SCALE=g.MAX_AUTO_SCALE=g.DEFAULT_SCALE_VALUE=g.DEFAULT_SCALE_DELTA=g.DEFAULT_SCALE=g.AutoPrintRegExp=void 0,g.apiPageLayoutToViewerModes=function oe(J){let L=D.VERTICAL,te=j.NONE;switch(J){case"SinglePage":L=D.PAGE;break;case"OneColumn":break;case"TwoPageLeft":L=D.PAGE;case"TwoColumnLeft":te=j.ODD;break;case"TwoPageRight":L=D.PAGE;case"TwoColumnRight":te=j.EVEN}return{scrollMode:L,spreadMode:te}},g.apiPageModeToSidebarView=function ne(J){switch(J){case"UseNone":return b.NONE;case"UseThumbs":return b.THUMBS;case"UseOutlines":return b.OUTLINE;case"UseAttachments":return b.ATTACHMENTS;case"UseOC":return b.LAYERS}return b.NONE},g.approximateFraction=function s(J){if(Math.floor(J)===J)return[J,1];const L=1/J;if(L>8)return[1,8];if(Math.floor(L)===L)return[1,L];const R=J>1?L:J;let ae,se=0,le=1,me=1,ve=1;for(;;){const Y=se+me,Q=le+ve;if(Q>8)break;R<=Y/Q?(me=Y,ve=Q):(se=Y,le=Q)}return ae=R-se/le<me/ve-R?R===J?[se,le]:[le,se]:R===J?[me,ve]:[ve,me],ae},g.backtrackBeforeAllVisibleElements=p,g.binarySearchFirstItem=t,g.getActiveOrFocusedElement=function re(){let J=document,L=J.activeElement||J.querySelector(":focus");for(;L?.shadowRoot;)J=L.shadowRoot,L=J.activeElement||J.querySelector(":focus");return L},g.getPageSizeInches=function u({view:J,userUnit:L,rotate:te}){const[R,se,le,me]=J,ve=te%180!=0,ae=(le-R)/72*L,Y=(me-se)/72*L;return{width:ve?Y:ae,height:ve?ae:Y}},g.getVisibleElements=function a({scrollEl:J,views:L,sortByVisibility:te=!1,horizontal:R=!1,rtl:se=!1}){const le=J.scrollTop,me=le+J.clientHeight,ve=J.scrollLeft,ae=ve+J.clientWidth,pe=[],be=new Set,ye=L.length;let Ae=t(L,R?function Q(Pe){const Ce=Pe.div,we=Ce.offsetLeft+Ce.clientLeft;return se?we<ae:we+Ce.clientWidth>ve}:function Y(Pe){const Ce=Pe.div;return Ce.offsetTop+Ce.clientTop+Ce.clientHeight>le});Ae>0&&Ae<ye&&!R&&(Ae=p(Ae,L,le));let xe=R?ae:-1;for(let Pe=Ae;Pe<ye;Pe++){const Ce=L[Pe],we=Ce.div,ke=we.offsetLeft+we.clientLeft,Se=we.offsetTop+we.clientTop,Le=we.clientWidth,Re=we.clientHeight,De=ke+Le,Oe=Se+Re;if(-1===xe)Oe>=me&&(xe=Oe);else if((R?ke:Se)>xe)break;if(Oe<=le||Se>=me||De<=ve||ke>=ae)continue;const Fe=Math.max(0,le-Se)+Math.max(0,Oe-me),Ne=(Le-(Math.max(0,ve-ke)+Math.max(0,De-ae)))/Le;pe.push({id:Ce.id,x:ke,y:Se,view:Ce,percent:(Re-Fe)/Re*Ne*100|0,widthPercent:100*Ne|0}),be.add(Ce.id)}const Me=pe[0],Te=pe[pe.length-1];return te&&pe.sort(function(Pe,Ce){const we=Pe.percent-Ce.percent;return Math.abs(we)>.001?-we:Pe.id-Ce.id}),{first:Me,last:Te,views:pe,ids:be}},g.isPortraitOrientation=function de(J){return J.width<=J.height},g.isValidRotation=function G(J){return Number.isInteger(J)&&J%90==0},g.isValidScrollMode=function q(J){return Number.isInteger(J)&&Object.values(D).includes(J)&&J!==D.UNKNOWN},g.isValidSpreadMode=function he(J){return Number.isInteger(J)&&Object.values(j).includes(J)&&J!==j.UNKNOWN},g.noContextMenuHandler=function k(J){J.preventDefault()},g.normalizeWheelEventDelta=function T(J){let L=x(J);return 0===J.deltaMode?L/=900:1===J.deltaMode&&(L/=30),L},g.normalizeWheelEventDirection=x,g.parseQueryString=function ue(J){const L=new Map;for(const[te,R]of new URLSearchParams(J))L.set(te.toLowerCase(),R);return L},g.removeNullCharacters=function r(J,L=!1){return"string"!=typeof J?(console.error("The argument must be a string."),J):(L&&(J=J.replace(O," ")),J.replace(ce,""))},g.roundToDivide=function o(J,L){const te=J%L;return 0===te?J:Math.round(J-te+L)},g.scrollIntoView=function K(J,L,te=!1){let R=J.offsetParent;if(!R)return void console.error("offsetParent is not set -- cannot scroll");let se=J.offsetTop+J.clientTop,le=J.offsetLeft+J.clientLeft;for(;R.clientHeight===R.scrollHeight&&R.clientWidth===R.scrollWidth||te&&(R.classList.contains("markedContent")||"hidden"===getComputedStyle(R).overflow);)if(se+=R.offsetTop,le+=R.offsetLeft,R=R.offsetParent,!R)return;L&&(void 0!==L.top&&(se+=L.top),void 0!==L.left&&(le+=L.left,R.scrollLeft=le)),R.scrollTop=se},g.watchScroll=function ee(J,L){const te=function(le){se||(se=window.requestAnimationFrame(function(){se=null;const ve=J.scrollLeft,ae=R.lastX;ve!==ae&&(R.right=ve>ae),R.lastX=ve;const Y=J.scrollTop,Q=R.lastY;Y!==Q&&(R.down=Y>Q),R.lastY=Y,L(R)}))},R={right:!0,down:!0,lastX:J.scrollLeft,lastY:J.scrollTop,_eventHandler:te};let se=null;return J.addEventListener("scroll",te,!0),R},g.DEFAULT_SCALE_VALUE="auto",g.DEFAULT_SCALE=1,g.DEFAULT_SCALE_DELTA=1.1,g.MIN_SCALE=.1,g.MAX_SCALE=10,g.UNKNOWN_SCALE=0,g.MAX_AUTO_SCALE=1.25,g.SCROLLBAR_PADDING=40,g.VERTICAL_PADDING=5,g.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},g.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const b={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};g.SidebarView=b,g.RendererType={CANVAS:"canvas",SVG:"svg"},g.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const D={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};g.ScrollMode=D;const j={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};g.SpreadMode=j,g.AutoPrintRegExp=/\bprint\s*\(/,g.OutputScale=class Z{constructor(){const L=window.devicePixelRatio||1;this.sx=L,this.sy=L}get scaled(){return 1!==this.sx||1!==this.sy}};const ce=/\x00/g,O=/[\x01-\x1F]/g;function t(J,L,te=0){let R=te,se=J.length-1;if(se<0||!L(J[se]))return J.length;if(L(J[R]))return R;for(;R<se;){const le=R+se>>1;L(J[le])?se=le:R=le+1}return R}function p(J,L,te){if(J<2)return J;let R=L[J].div,se=R.offsetTop+R.clientTop;se>=te&&(R=L[J-1].div,se=R.offsetTop+R.clientTop);for(let le=J-2;le>=0&&(R=L[le].div,!(R.offsetTop+R.clientTop+R.clientHeight<=se));--le)J=le;return J}function x(J){let L=Math.hypot(J.deltaX,J.deltaY);const te=Math.atan2(J.deltaY,J.deltaX);return-.25*Math.PI<te&&te<.75*Math.PI&&(L=-L),L}const ge=new Promise(function(J){window.requestAnimationFrame(J)});g.animationStarted=ge;var fe=new WeakSet;function C(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}g.ProgressBar=class m{constructor(L){if(F(this,fe),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(L+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(L){this._indeterminate=isNaN(L),this._percent=function _e(J,L,te){return Math.min(Math.max(J,L),te)}(L,0,100),N(fe,this,C).call(this)}setWidth(L){if(!L)return;const R=L.parentNode.offsetWidth-L.offsetWidth;R>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${R}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.StructTreeLayerBuilder=void 0;const M={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},_=/^H(\d+)$/;g.StructTreeLayerBuilder=class A{constructor({pdfPage:y}){this.pdfPage=y}render(y){return this._walk(y)}_setAttributes(y,n){void 0!==y.alt&&n.setAttribute("aria-label",y.alt),void 0!==y.id&&n.setAttribute("aria-owns",y.id),void 0!==y.lang&&n.setAttribute("lang",y.lang)}_walk(y){if(!y)return null;const n=document.createElement("span");if("role"in y){const{role:i}=y,d=i.match(_);d?(n.setAttribute("role","heading"),n.setAttribute("aria-level",d[1])):M[i]&&n.setAttribute("role",M[i])}if(this._setAttributes(y,n),y.children)if(1===y.children.length&&"id"in y.children[0])this._setAttributes(y.children[0],n);else for(const i of y.children)n.appendChild(this._walk(i));return n}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerBuilder=void 0;var _=M(3);g.TextLayerBuilder=class I{constructor({textLayerDiv:n,eventBus:i,pageIndex:d,viewport:P,highlighter:f=null,enhanceTextSelection:w=!1}){this.textLayerDiv=n,this.eventBus=i,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=d+1,this.viewport=P,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=f,this.enhanceTextSelection=w,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const n=document.createElement("div");n.className="endOfContent",this.textLayerDiv.appendChild(n)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(n=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const i=document.createDocumentFragment();this.textLayerRenderTask=(0,_.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:i,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:n,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(i),this._finishRendering(),this.highlighter?.enable()},function(d){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(n){this.cancel(),this.textContentStream=n}setTextContent(n){this.cancel(),this.textContent=n}_bindMouse(){const n=this.textLayerDiv;let i=null;n.addEventListener("mousedown",d=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(i&&(clearTimeout(i),i=null));const P=n.querySelector(".endOfContent");if(!P)return;let f=d.target!==n;if(f=f&&"none"!==window.getComputedStyle(P).getPropertyValue("-moz-user-select"),f){const w=n.getBoundingClientRect(),b=Math.max(0,(d.pageY-w.top)/w.height);P.style.top=(100*b).toFixed(2)+"%"}P.classList.add("active")}),n.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(i=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),i=null},300));const d=n.querySelector(".endOfContent");d&&(d.style.top="",d.classList.remove("active"))})}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayerBuilder=void 0;var _=M(3);g.XfaLayerBuilder=class A{constructor({pageDiv:y,pdfPage:n,annotationStorage:i=null,linkService:d,xfaHtml:P=null}){this.pageDiv=y,this.pdfPage=n,this.annotationStorage=i,this.linkService=d,this.xfaHtml=P,this.div=null,this._cancelled=!1}render(y,n="display"){if("print"===n){const i={viewport:y.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},d=document.createElement("div");this.pageDiv.appendChild(d),i.div=d;const P=_.XfaLayer.render(i);return Promise.resolve(P)}return this.pdfPage.getXfa().then(i=>{if(this._cancelled||!i)return{textDivs:[]};const d={viewport:y.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?_.XfaLayer.update(d):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),d.div=this.div,_.XfaLayer.render(d))}).catch(i=>{console.error(i)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFViewer=g.PDFSinglePageViewer=void 0;var _=M(6),A=M(11);g.PDFViewer=class I extends A.BaseViewer{},g.PDFSinglePageViewer=class y extends A.BaseViewer{_resetView(){super._resetView(),this._scrollMode=_.ScrollMode.PAGE,this._spreadMode=_.SpreadMode.NONE}set scrollMode(i){}_updateScrollMode(){}set spreadMode(i){}_updateSpreadMode(){}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PagesCountLimit=g.PDFPageViewBuffer=g.BaseViewer=void 0;var _=M(3),A=M(6),I=M(2),y=M(4),n=M(12),i=M(14),d=M(5),P=M(7),f=M(15),w=M(8),b=M(9);const E="enablePermissions",D={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};g.PagesCountLimit=D;var j=new WeakMap,$=new WeakMap,Z=new WeakSet;class K{constructor(m){F(this,Z),X(this,j,new Set),X(this,$,0),U($,this,m)}push(m){const C=c(j,this);C.has(m)&&C.delete(m),C.add(m),C.size>c($,this)&&N(Z,this,ee).call(this)}resize(m,C=null){U($,this,m);const re=c(j,this);if(C){const oe=re.size;let ne=1;for(const J of re)if(C.has(J.id)&&(re.delete(J),re.add(J)),++ne>oe)break}for(;re.size>c($,this);)N(Z,this,ee).call(this)}has(m){return c(j,this).has(m)}[Symbol.iterator](){return c(j,this).keys()}}function ee(){const fe=c(j,this).keys().next().value;fe?.destroy(),c(j,this).delete(fe)}g.PDFPageViewBuffer=K;var ue=new WeakMap,ce=new WeakMap,O=new WeakMap,r=new WeakMap,t=new WeakMap,s=new WeakMap,o=new WeakMap,u=new WeakSet;class p{constructor(m){if(F(this,u),X(this,ue,null),X(this,ce,_.AnnotationMode.ENABLE_FORMS),X(this,O,null),X(this,r,!1),X(this,t,0),X(this,s,null),X(this,o,null),this.constructor===p)throw new Error("Cannot initialize BaseViewer.");const C="2.14.305";if(_.version!==C)throw new Error(`The API version "${_.version}" does not match the Viewer version "${C}".`);if(this.container=m.container,this.viewer=m.viewer||m.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=m.eventBus,this.linkService=m.linkService||new d.SimpleLinkService,this.downloadManager=m.downloadManager||null,this.findController=m.findController||null,this._scriptingManager=m.scriptingManager||null,this.removePageBorders=m.removePageBorders||!1,this.textLayerMode=m.textLayerMode??A.TextLayerMode.ENABLE,U(ce,this,m.annotationMode??_.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=m.imageResourcesPath||"",this.enablePrintAutoRotate=m.enablePrintAutoRotate||!1,this.renderer=m.renderer||A.RendererType.CANVAS,this.useOnlyCssZoom=m.useOnlyCssZoom||!1,this.maxCanvasPixels=m.maxCanvasPixels,this.l10n=m.l10n||y.NullL10n,U(r,this,m.enablePermissions||!1),this.pageColors=m.pageColors||null,m.pageColors&&(!CSS.supports("color",m.pageColors.background)||!CSS.supports("color",m.pageColors.foreground))&&((m.pageColors.background||m.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!m.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new i.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=m.renderingQueue,this._doc=document.documentElement,this.scroll=(0,A.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=A.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(m){return this._pages[m]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(m){return m?.pdfPage})}get renderForms(){return c(ce,this)===_.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(m){if(!Number.isInteger(m))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(m,!0)||console.error(`currentPageNumber: "${m}" is not a valid page.`))}_setCurrentPageNumber(m,C=!1){if(this._currentPageNumber===m)return C&&N(u,this,q).call(this),!0;if(!(0<m&&m<=this.pagesCount))return!1;const re=this._currentPageNumber;return this._currentPageNumber=m,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:m,pageLabel:this._pageLabels?.[m-1]??null,previous:re}),C&&N(u,this,q).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(m){if(!this.pdfDocument)return;let C=0|m;if(this._pageLabels){const re=this._pageLabels.indexOf(m);re>=0&&(C=re+1)}this._setCurrentPageNumber(C,!0)||console.error(`currentPageLabel: "${m}" is not a valid page.`)}get currentScale(){return this._currentScale!==A.UNKNOWN_SCALE?this._currentScale:A.DEFAULT_SCALE}set currentScale(m){if(isNaN(m))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(m,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(m){this.pdfDocument&&this._setScale(m,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(m){if(!(0,A.isValidRotation)(m))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((m%=360)<0&&(m+=360),this._pagesRotation===m))return;this._pagesRotation=m;const C=this._currentPageNumber,re={rotation:m};for(const oe of this._pages)oe.update(re);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:m,pageNumber:C}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(m){var C=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=m,!m)return;const re=m.isPureXfa,oe=m.numPages,ne=m.getPage(1),J=m.getOptionalContentConfig(),L=c(r,this)?m.getPermissions():Promise.resolve();if(oe>D.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const te=this._scrollMode=A.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:te})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:oe})},()=>{}),this._onBeforeDraw=te=>{const R=this._pages[te.pageNumber-1];R&&c(ue,this).push(R)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=te=>{te.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:te.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,c(o,this)&&(document.removeEventListener("visibilitychange",c(o,this)),U(o,this,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([ne,L]).then(([te,R])=>{if(m!==this.pdfDocument)return;this._firstPageCapability.resolve(te),this._optionalContentConfigPromise=J,N(u,this,a).call(this,R);const se=this._scrollMode===A.ScrollMode.PAGE?null:this.viewer,le=this.currentScale,me=te.getViewport({scale:le*_.PixelsPerInch.PDF_TO_CSS_UNITS}),ve=this.textLayerMode===A.TextLayerMode.DISABLE||re?null:this,ae=c(ce,this)!==_.AnnotationMode.DISABLE?this:null,Y=re?this:null;for(let pe=1;pe<=oe;++pe){const be=new n.PDFPageView({container:se,eventBus:this.eventBus,id:pe,scale:le,defaultViewport:me.clone(),optionalContentConfigPromise:J,renderingQueue:this.renderingQueue,textLayerFactory:ve,textLayerMode:this.textLayerMode,annotationLayerFactory:ae,annotationMode:c(ce,this),xfaLayerFactory:Y,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(be)}const Q=this._pages[0];Q&&(Q.setPdfPage(te),this.linkService.cachePageRef(1,te.ref)),this._scrollMode===A.ScrollMode.PAGE?N(u,this,x).call(this):this._spreadMode!==A.SpreadMode.NONE&&this._updateSpreadMode(),N(u,this,k).call(this).then(v(function*(){if(C.findController&&C.findController.setDocument(m),C._scriptingManager&&C._scriptingManager.setDocument(m),m.loadingParams.disableAutoFetch||oe>D.FORCE_LAZY_PAGE_INIT)return void C._pagesCapability.resolve();let pe=oe-1;if(pe<=0)C._pagesCapability.resolve();else for(let be=2;be<=oe;++be){const ye=m.getPage(be).then(Ae=>{const xe=C._pages[be-1];xe.pdfPage||xe.setPdfPage(Ae),C.linkService.cachePageRef(be,Ae.ref),0==--pe&&C._pagesCapability.resolve()},Ae=>{console.error(`Unable to get page ${be} to initialize viewer`,Ae),0==--pe&&C._pagesCapability.resolve()});be%D.PAUSE_EAGER_PAGE_INIT==0&&(yield ye)}})),this.eventBus.dispatch("pagesinit",{source:this}),m.getMetadata().then(({info:pe})=>{m===this.pdfDocument&&pe.Language&&(this.viewer.lang=pe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(te=>{console.error("Unable to initialize viewer",te),this._pagesCapability.reject(te)})}setPageLabels(m){if(this.pdfDocument){m?Array.isArray(m)&&this.pdfDocument.numPages===m.length?this._pageLabels=m:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let C=0,re=this._pages.length;C<re;C++)this._pages[C].setPageLabel(this._pageLabels?.[C]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=A.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,U(ue,this,new K(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,_.createPromiseCapability)(),this._onePageRenderedCapability=(0,_.createPromiseCapability)(),this._pagesCapability=(0,_.createPromiseCapability)(),this._scrollMode=A.ScrollMode.VERTICAL,this._previousScrollMode=A.ScrollMode.UNKNOWN,this._spreadMode=A.SpreadMode.NONE,U(s,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),c(o,this)&&(document.removeEventListener("visibilitychange",c(o,this)),U(o,this,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(E),null!==c(O,this)&&(U(ce,this,c(O,this)),U(O,this,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(m,C,re=!1,oe=!1){if(this._currentScaleValue=C.toString(),N(u,this,G).call(this,m))return void(oe&&this.eventBus.dispatch("scalechanging",{source:this,scale:m,presetValue:C}));this._doc.style.setProperty("--zoom-factor",m);const ne={scale:m};for(const J of this._pages)J.update(ne);if(this._currentScale=m,!re){let L,J=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(J=this._location.pageNumber,L=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:J,destArray:L,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:m,presetValue:oe?C:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL?2:1}_setScale(m,C=!1){let re=parseFloat(m);if(re>0)this._setScaleUpdatePages(re,m,C,!1);else{const oe=this._pages[this._currentPageNumber-1];if(!oe)return;let ne=A.SCROLLBAR_PADDING,J=A.VERTICAL_PADDING;this.isInPresentationMode?ne=J=4:this.removePageBorders?ne=J=0:this._scrollMode===A.ScrollMode.HORIZONTAL&&([ne,J]=[J,ne]);const L=(this.container.clientWidth-ne)/oe.width*oe.scale/this._pageWidthScaleFactor,te=(this.container.clientHeight-J)/oe.height*oe.scale;switch(m){case"page-actual":re=1;break;case"page-width":re=L;break;case"page-height":re=te;break;case"page-fit":re=Math.min(L,te);break;case"auto":const R=(0,A.isPortraitOrientation)(oe)?L:Math.min(te,L);re=Math.min(A.MAX_AUTO_SCALE,R);break;default:return void console.error(`_setScale: "${m}" is an unknown zoom value.`)}this._setScaleUpdatePages(re,m,C,!0)}}pageLabelToPageNumber(m){if(!this._pageLabels)return null;const C=this._pageLabels.indexOf(m);return C<0?null:C+1}scrollPageIntoView({pageNumber:m,destArray:C=null,allowNegativeOffset:re=!1,ignoreDestinationZoom:oe=!1}){if(!this.pdfDocument)return;const ne=Number.isInteger(m)&&this._pages[m-1];if(!ne)return void console.error(`scrollPageIntoView: "${m}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!C)return void this._setCurrentPageNumber(m,!0);let se,le,J=0,L=0,te=0,R=0;const me=ne.rotation%180!=0,ve=(me?ne.height:ne.width)/ne.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS,ae=(me?ne.width:ne.height)/ne.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS;let Y=0;switch(C[1].name){case"XYZ":J=C[2],L=C[3],Y=C[4],J=null!==J?J:0,L=null!==L?L:ae;break;case"Fit":case"FitB":Y="page-fit";break;case"FitH":case"FitBH":L=C[2],Y="page-width",null===L&&this._location?(J=this._location.left,L=this._location.top):("number"!=typeof L||L<0)&&(L=ae);break;case"FitV":case"FitBV":J=C[2],te=ve,R=ae,Y="page-height";break;case"FitR":J=C[2],L=C[3],te=C[4]-J,R=C[5]-L,se=(this.container.clientWidth-(this.removePageBorders?0:A.SCROLLBAR_PADDING))/te/_.PixelsPerInch.PDF_TO_CSS_UNITS,le=(this.container.clientHeight-(this.removePageBorders?0:A.VERTICAL_PADDING))/R/_.PixelsPerInch.PDF_TO_CSS_UNITS,Y=Math.min(Math.abs(se),Math.abs(le));break;default:return void console.error(`scrollPageIntoView: "${C[1].name}" is not a valid destination type.`)}if(oe||(Y&&Y!==this._currentScale?this.currentScaleValue=Y:this._currentScale===A.UNKNOWN_SCALE&&(this.currentScaleValue=A.DEFAULT_SCALE_VALUE)),"page-fit"===Y&&!C[4])return void N(u,this,T).call(this,ne);const Q=[ne.viewport.convertToViewportPoint(J,L),ne.viewport.convertToViewportPoint(J+te,L+R)];let pe=Math.min(Q[0][0],Q[1][0]),be=Math.min(Q[0][1],Q[1][1]);re||(pe=Math.max(pe,0),be=Math.max(be,0)),N(u,this,T).call(this,ne,{left:pe,top:be})}_updateLocation(m){const C=this._currentScale,re=this._currentScaleValue,oe=parseFloat(re)===C?Math.round(1e4*C)/100:re,ne=m.id,L=this.container,te=this._pages[ne-1].getPagePoint(L.scrollLeft-m.x,L.scrollTop-m.y),R=Math.round(te[0]),se=Math.round(te[1]);let le=`#page=${ne}`;this.isInPresentationMode||(le+=`&zoom=${oe},${R},${se}`),this._location={pageNumber:ne,scale:oe,top:se,left:R,rotation:this._pagesRotation,pdfOpenParams:le}}update(){const m=this._getVisiblePages(),C=m.views,re=C.length;if(0===re)return;const oe=Math.max(10,2*re+1);c(ue,this).resize(oe,m.ids),this.renderingQueue.renderHighestPriority(m);const ne=this._spreadMode===A.SpreadMode.NONE&&(this._scrollMode===A.ScrollMode.PAGE||this._scrollMode===A.ScrollMode.VERTICAL),J=this._currentPageNumber;let L=!1;for(const te of C){if(te.percent<100)break;if(te.id===J&&ne){L=!0;break}}this._setCurrentPageNumber(L?J:C[0].id),this._updateLocation(m.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(m){return this.container.contains(m)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===A.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===A.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const m=this._scrollMode===A.ScrollMode.PAGE?c(s,this).pages:this._pages,C=this._scrollMode===A.ScrollMode.HORIZONTAL;return(0,A.getVisibleElements)({scrollEl:this.container,views:m,sortByVisibility:!0,horizontal:C,rtl:C&&this._isContainerRtl})}isPageVisible(m){return!!this.pdfDocument&&(Number.isInteger(m)&&m>0&&m<=this.pagesCount?this._getVisiblePages().ids.has(m):(console.error(`isPageVisible: "${m}" is not a valid page.`),!1))}isPageCached(m){if(!this.pdfDocument)return!1;if(!(Number.isInteger(m)&&m>0&&m<=this.pagesCount))return console.error(`isPageCached: "${m}" is not a valid page.`),!1;const C=this._pages[m-1];return c(ue,this).has(C)}cleanup(){for(const m of this._pages)m.renderingState!==A.RenderingStates.FINISHED&&m.reset()}_cancelRendering(){for(const m of this._pages)m.cancelRendering()}forceRendering(m){const C=m||this._getVisiblePages(),re=N(u,this,ge).call(this,C),ne=this.renderingQueue.getHighestPriority(C,this._pages,re,this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL);return N(u,this,_e).call(this,C.ids),!!ne&&(N(u,this,he).call(this,ne).then(()=>{this.renderingQueue.renderView(ne)}),!0)}createTextLayerBuilder(m,C,re,oe=!1,ne,J){return new w.TextLayerBuilder({textLayerDiv:m,eventBus:ne,pageIndex:C,viewport:re,enhanceTextSelection:!this.isInPresentationMode&&oe,highlighter:J})}createTextHighlighter(m,C){return new f.TextHighlighter({eventBus:C,pageIndex:m,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(m,C,re=null,oe="",ne=!0,J=y.NullL10n,L=null,te=null,R=null,se=null,le=null){return new I.AnnotationLayerBuilder({pageDiv:m,pdfPage:C,annotationStorage:re||this.pdfDocument?.annotationStorage,imageResourcesPath:oe,renderForms:ne,linkService:this.linkService,downloadManager:this.downloadManager,l10n:J,enableScripting:L??this.enableScripting,hasJSActionsPromise:te||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:se||this.pdfDocument?.getFieldObjects(),mouseState:R||this._scriptingManager?.mouseState,annotationCanvasMap:le})}createXfaLayerBuilder(m,C,re=null){return new b.XfaLayerBuilder({pageDiv:m,pdfPage:C,annotationStorage:re||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(m){return new P.StructTreeLayerBuilder({pdfPage:m})}get hasEqualPageSizes(){const m=this._pages[0];for(let C=1,re=this._pages.length;C<re;++C){const oe=this._pages[C];if(oe.width!==m.width||oe.height!==m.height)return!1}return!0}getPagesOverview(){return this._pages.map(m=>{const C=m.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,A.isPortraitOrientation)(C)?{width:C.width,height:C.height,rotation:C.rotation}:{width:C.height,height:C.width,rotation:(C.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(m){if(!(m instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${m}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=m;const C={optionalContentConfigPromise:m};for(const re of this._pages)re.update(C);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:m})}get scrollMode(){return this._scrollMode}set scrollMode(m){if(this._scrollMode!==m){if(!(0,A.isValidScrollMode)(m))throw new Error(`Invalid scroll mode: ${m}`);this.pagesCount>D.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=m,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:m}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(m=null){const C=this._scrollMode,re=this.viewer;re.classList.toggle("scrollHorizontal",C===A.ScrollMode.HORIZONTAL),re.classList.toggle("scrollWrapped",C===A.ScrollMode.WRAPPED),this.pdfDocument&&m&&(C===A.ScrollMode.PAGE?N(u,this,x).call(this):this._previousScrollMode===A.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(m,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(m){if(this._spreadMode!==m){if(!(0,A.isValidSpreadMode)(m))throw new Error(`Invalid spread mode: ${m}`);this._spreadMode=m,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:m}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(m=null){if(!this.pdfDocument)return;const C=this.viewer,re=this._pages;if(this._scrollMode===A.ScrollMode.PAGE)N(u,this,x).call(this);else if(C.textContent="",this._spreadMode===A.SpreadMode.NONE)for(const oe of this._pages)C.appendChild(oe.div);else{const oe=this._spreadMode-1;let ne=null;for(let J=0,L=re.length;J<L;++J)null===ne?(ne=document.createElement("div"),ne.className="spread",C.appendChild(ne)):J%2===oe&&(ne=ne.cloneNode(!1),C.appendChild(ne)),ne.appendChild(re[J].div)}m&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(m,!0),this.update())}_getPageAdvance(m,C=!1){switch(this._scrollMode){case A.ScrollMode.WRAPPED:{const{views:re}=this._getVisiblePages(),oe=new Map;for(const{id:ne,y:J,percent:L,widthPercent:te}of re){if(0===L||te<100)continue;let R=oe.get(J);R||oe.set(J,R||=[]),R.push(ne)}for(const ne of oe.values()){const J=ne.indexOf(m);if(-1===J)continue;const L=ne.length;if(1===L)break;if(C)for(let te=J-1,R=0;te>=R;te--){const le=ne[te+1]-1;if(ne[te]<le)return m-le}else for(let te=J+1,R=L;te<R;te++){const le=ne[te-1]+1;if(ne[te]>le)return le-m}if(C){const te=ne[0];if(te<m)return m-te+1}else{const te=ne[L-1];if(te>m)return te-m+1}break}break}case A.ScrollMode.HORIZONTAL:break;case A.ScrollMode.PAGE:case A.ScrollMode.VERTICAL:{if(this._spreadMode===A.SpreadMode.NONE)break;const re=this._spreadMode-1;if(C&&m%2!==re)break;if(!C&&m%2===re)break;const{views:oe}=this._getVisiblePages(),ne=C?m-1:m+1;for(const{id:J,percent:L,widthPercent:te}of oe)if(J===ne){if(L>0&&100===te)return 2;break}break}}return 1}nextPage(){const m=this._currentPageNumber,C=this.pagesCount;if(m>=C)return!1;const re=this._getPageAdvance(m,!1)||1;return this.currentPageNumber=Math.min(m+re,C),!0}previousPage(){const m=this._currentPageNumber;if(m<=1)return!1;const C=this._getPageAdvance(m,!0)||1;return this.currentPageNumber=Math.max(m-C,1),!0}increaseScale(m=1){let C=this._currentScale;do{C=(C*A.DEFAULT_SCALE_DELTA).toFixed(2),C=Math.ceil(10*C)/10,C=Math.min(A.MAX_SCALE,C)}while(--m>0&&C<A.MAX_SCALE);this.currentScaleValue=C}decreaseScale(m=1){let C=this._currentScale;do{C=(C/A.DEFAULT_SCALE_DELTA).toFixed(2),C=Math.floor(10*C)/10,C=Math.max(A.MIN_SCALE,C)}while(--m>0&&C>A.MIN_SCALE);this.currentScaleValue=C}updateContainerHeightCss(){const m=this.container.clientHeight;m!==c(t,this)&&(U(t,this,m),this._doc.style.setProperty("--viewer-container-height",`${m}px`))}}function a(fe){fe&&(fe.includes(_.PermissionFlag.COPY)||this.viewer.classList.add(E),!fe.includes(_.PermissionFlag.MODIFY_ANNOTATIONS)&&!fe.includes(_.PermissionFlag.FILL_INTERACTIVE_FORMS)&&c(ce,this)===_.AnnotationMode.ENABLE_FORMS&&(U(O,this,c(ce,this)),U(ce,this,_.AnnotationMode.ENABLE)))}function k(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const fe=new Promise(m=>{U(o,this,()=>{"hidden"===document.visibilityState&&(m(),document.removeEventListener("visibilitychange",c(o,this)),U(o,this,null))}),document.addEventListener("visibilitychange",c(o,this))});return Promise.race([this._onePageRenderedCapability.promise,fe])}function x(){if(this._scrollMode!==A.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const fe=this._currentPageNumber,m=c(s,this),C=this.viewer;if(C.textContent="",m.pages.length=0,this._spreadMode!==A.SpreadMode.NONE||this.isInPresentationMode){const re=new Set,oe=this._spreadMode-1;-1===oe?re.add(fe-1):fe%2!==oe?(re.add(fe-1),re.add(fe)):(re.add(fe-2),re.add(fe-1));const ne=document.createElement("div");if(ne.className="spread",this.isInPresentationMode){const J=document.createElement("div");J.className="dummyPage",ne.appendChild(J)}for(const J of re){const L=this._pages[J];L&&(ne.appendChild(L.div),m.pages.push(L))}C.appendChild(ne)}else{const re=this._pages[fe-1];C.appendChild(re.div),m.pages.push(re)}m.scrollDown=fe>=m.previousPageNumber,m.previousPageNumber=fe}function T(fe,m=null){const{div:C,id:re}=fe;if(this._scrollMode===A.ScrollMode.PAGE&&(this._setCurrentPageNumber(re),N(u,this,x).call(this),this.update()),!m&&!this.isInPresentationMode){const oe=C.offsetLeft+C.clientLeft,ne=oe+C.clientWidth,{scrollLeft:J,clientWidth:L}=this.container;(this._scrollMode===A.ScrollMode.HORIZONTAL||oe<J||ne>J+L)&&(m={left:0,top:0})}(0,A.scrollIntoView)(C,m)}function G(fe){return fe===this._currentScale||Math.abs(fe-this._currentScale)<1e-15}function q(){const fe=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),N(u,this,T).call(this,fe)}function he(fe){return de.apply(this,arguments)}function de(){return(de=v(function*(fe){if(fe.pdfPage)return fe.pdfPage;try{const m=yield this.pdfDocument.getPage(fe.id);return fe.pdfPage||fe.setPdfPage(m),this.linkService._cachedPageNumber?.(m.ref)||this.linkService.cachePageRef(fe.id,m.ref),m}catch(m){return console.error("Unable to get page for page view",m),null}})).apply(this,arguments)}function ge(fe){if(1===fe.first?.id)return!0;if(fe.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case A.ScrollMode.PAGE:return c(s,this).scrollDown;case A.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _e(fe){for(const m of fe)this._pages[m-1]?.toggleLoadingIconSpinner(!0);for(const m of c(ue,this))fe.has(m.id)||m.toggleLoadingIconSpinner(!1)}g.BaseViewer=p},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFPageView=void 0;var _=M(3),A=M(6),I=M(13),y=M(4);const n=I.compatibilityParams.maxCanvasPixels||16777216;var i=new WeakMap;g.PDFPageView=class d{constructor(f){X(this,i,_.AnnotationMode.ENABLE_FORMS);const w=f.container,b=f.defaultViewport;this.id=f.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=f.scale||A.DEFAULT_SCALE,this.viewport=b,this.pdfPageRotate=b.rotation,this._optionalContentConfigPromise=f.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=f.textLayerMode??A.TextLayerMode.ENABLE,U(i,this,f.annotationMode??_.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=f.imageResourcesPath||"",this.useOnlyCssZoom=f.useOnlyCssZoom||!1,this.maxCanvasPixels=f.maxCanvasPixels||n,this.pageColors=f.pageColors||null,this.eventBus=f.eventBus,this.renderingQueue=f.renderingQueue,this.textLayerFactory=f.textLayerFactory,this.annotationLayerFactory=f.annotationLayerFactory,this.xfaLayerFactory=f.xfaLayerFactory,this.textHighlighter=f.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=f.structTreeLayerFactory,this.renderer=f.renderer||A.RendererType.CANVAS,this.l10n=f.l10n||y.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=A.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const h=document.createElement("div");h.className="page",h.style.width=Math.floor(this.viewport.width)+"px",h.style.height=Math.floor(this.viewport.height)+"px",h.setAttribute("data-page-number",this.id),h.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(E=>{h.setAttribute("aria-label",E)}),this.div=h,w?.appendChild(h)}setPdfPage(f){this.pdfPage=f,this.pdfPageRotate=f.rotate,this.viewport=f.getViewport({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var f=this;return v(function*(){let w=null;try{yield f.annotationLayer.render(f.viewport,"display")}catch(b){w=b}finally{f.eventBus.dispatch("annotationlayerrendered",{source:f,pageNumber:f.id,error:w})}})()}_renderXfaLayer(){var f=this;return v(function*(){let w=null;try{const b=yield f.xfaLayer.render(f.viewport,"display");f.textHighlighter&&f._buildXfaTextContentItems(b.textDivs)}catch(b){w=b}finally{f.eventBus.dispatch("xfalayerrendered",{source:f,pageNumber:f.id,error:w})}})()}_buildXfaTextContentItems(f){var w=this;return v(function*(){const b=yield w.pdfPage.getTextContent(),h=[];for(const E of b.items)h.push(E.str);w.textHighlighter.setTextMapping(f,h),w.textHighlighter.enable()})()}_resetZoomLayer(f=!1){if(!this.zoomLayer)return;const w=this.zoomLayer.firstChild;this.paintedViewportMap.delete(w),w.width=0,w.height=0,f&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:f=!1,keepAnnotationLayer:w=!1,keepXfaLayer:b=!1}={}){this.cancelRendering({keepAnnotationLayer:w,keepXfaLayer:b}),this.renderingState=A.RenderingStates.INITIAL;const h=this.div;h.style.width=Math.floor(this.viewport.width)+"px",h.style.height=Math.floor(this.viewport.height)+"px";const E=h.childNodes,D=f&&this.zoomLayer||null,j=w&&this.annotationLayer?.div||null,$=b&&this.xfaLayer?.div||null;for(let Z=E.length-1;Z>=0;Z--){const K=E[Z];switch(K){case D:case j:case $:continue}K.remove()}h.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),$&&this.xfaLayer.hide(),D||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(Z=>{this.loadingIconDiv?.setAttribute("aria-label",Z)}),h.appendChild(this.loadingIconDiv)}update({scale:f=0,rotation:w=null,optionalContentConfigPromise:b=null}){if(this.scale=f||this.scale,"number"==typeof w&&(this.rotation=w),b instanceof Promise&&(this._optionalContentConfigPromise=b),this.viewport=this.viewport.clone({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:D}=document.documentElement;D.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let E=!1;if(this.canvas&&this.maxCanvasPixels>0){const D=this.outputScale;(Math.floor(this.viewport.width)*D.sx|0)*(Math.floor(this.viewport.height)*D.sy|0)>this.maxCanvasPixels&&(E=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&E)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:f=!1,keepXfaLayer:w=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!f||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!w||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:f,redrawAnnotationLayer:w=!1,redrawXfaLayer:b=!1}){const h=this.viewport.width,E=this.viewport.height,D=this.div;f.style.width=f.parentNode.style.width=D.style.width=Math.floor(h)+"px",f.style.height=f.parentNode.style.height=D.style.height=Math.floor(E)+"px";const j=this.viewport.rotation-this.paintedViewportMap.get(f).rotation,$=Math.abs(j);let Z=1,K=1;if((90===$||270===$)&&(Z=E/h,K=h/E),f.style.transform=`rotate(${j}deg) scale(${Z}, ${K})`,this.textLayer){const ee=this.textLayer.viewport,ce=Math.abs(this.viewport.rotation-ee.rotation);let O=h/ee.width;(90===ce||270===ce)&&(O=h/ee.height);const r=this.textLayer.textLayerDiv;let t,s;switch(ce){case 0:t=s=0;break;case 90:t=0,s="-"+r.style.height;break;case 180:t="-"+r.style.width,s="-"+r.style.height;break;case 270:t="-"+r.style.width,s=0;break;default:console.error("Bad rotation value.")}r.style.transform=`rotate(${ce}deg) scale(${O}) translate(${t}, ${s})`,r.style.transformOrigin="0% 0%"}w&&this.annotationLayer&&this._renderAnnotationLayer(),b&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(f,w){return this.viewport.convertToPdfPoint(f,w)}toggleLoadingIconSpinner(f=!1){this.loadingIconDiv?.classList.toggle("notVisible",!f)}draw(){var f=this;this.renderingState!==A.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:w,pdfPage:b}=this;if(!b)return this.renderingState=A.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=A.RenderingStates.RUNNING;const h=document.createElement("div");h.style.width=w.style.width,h.style.height=w.style.height,h.classList.add("canvasWrapper"),this.annotationLayer?.div?w.insertBefore(h,this.annotationLayer.div):w.appendChild(h);let E=null;if(this.textLayerMode!==A.TextLayerMode.DISABLE&&this.textLayerFactory){const K=document.createElement("div");K.className="textLayer",K.style.width=h.style.width,K.style.height=h.style.height,this.annotationLayer?.div?w.insertBefore(K,this.annotationLayer.div):w.appendChild(K),E=this.textLayerFactory.createTextLayerBuilder(K,this.id-1,this.viewport,this.textLayerMode===A.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=E,c(i,this)!==_.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(w,b,null,this.imageResourcesPath,c(i,this)===_.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&w.appendChild(this.xfaLayer.div);let D=null;this.renderingQueue&&(D=K=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=A.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=A.RenderingStates.RUNNING,K()});K()});const j=function(){var K=v(function*(ee=null){if($===f.paintTask&&(f.paintTask=null),ee instanceof _.RenderingCancelledException)f._renderError=null;else if(f._renderError=ee,f.renderingState=A.RenderingStates.FINISHED,f.loadingIconDiv&&(f.loadingIconDiv.remove(),delete f.loadingIconDiv),f._resetZoomLayer(!0),f.eventBus.dispatch("pagerendered",{source:f,pageNumber:f.id,cssTransform:!1,timestamp:performance.now(),error:f._renderError}),ee)throw ee});return function(){return K.apply(this,arguments)}}(),$=this.renderer===A.RendererType.SVG?this.paintOnSvg(h):this.paintOnCanvas(h);$.onRenderContinue=D,this.paintTask=$;const Z=$.promise.then(()=>j(null).then(()=>{if(E){const K=b.streamTextContent({includeMarkedContent:!0});E.setTextContentStream(K),E.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(K){return j(K)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(w,b,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=K=>{K.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(ee=>{if(!ee||!this.canvas)return;const ue=this.structTreeLayer.render(ee);ue.classList.add("structTree"),this.canvas.appendChild(ue)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(b)),w.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Z}paintOnCanvas(f){const w=(0,_.createPromiseCapability)(),b={promise:w.promise,onRenderContinue(r){r()},cancel(){O.cancel()}},h=this.viewport,E=document.createElement("canvas");E.hidden=!0;let D=!0;const j=function(){D&&(E.hidden=!1,D=!1)};f.appendChild(E),this.canvas=E;const $=E.getContext("2d",{alpha:!1}),Z=this.outputScale=new A.OutputScale;if(this.useOnlyCssZoom){const r=h.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});Z.sx*=r.width/h.width,Z.sy*=r.height/h.height}if(this.maxCanvasPixels>0){const t=Math.sqrt(this.maxCanvasPixels/(h.width*h.height));Z.sx>t||Z.sy>t?(Z.sx=t,Z.sy=t,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const K=(0,A.approximateFraction)(Z.sx),ee=(0,A.approximateFraction)(Z.sy);E.width=(0,A.roundToDivide)(h.width*Z.sx,K[0]),E.height=(0,A.roundToDivide)(h.height*Z.sy,ee[0]),E.style.width=(0,A.roundToDivide)(h.width,K[1])+"px",E.style.height=(0,A.roundToDivide)(h.height,ee[1])+"px",this.paintedViewportMap.set(E,h);const ce={canvasContext:$,transform:Z.scaled?[Z.sx,0,0,Z.sy,0,0]:null,viewport:this.viewport,annotationMode:c(i,this),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},O=this.pdfPage.render(ce);return O.onContinue=function(r){j(),b.onRenderContinue?b.onRenderContinue(r):r()},O.promise.then(function(){j(),w.resolve()},function(r){j(),w.reject(r)}),b}paintOnSvg(f){let w=!1;const b=()=>{if(w)throw new _.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},h=this.pdfPage,E=this.viewport.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:h.getOperatorList({annotationMode:c(i,this)}).then(j=>(b(),new _.SVGGraphics(h.commonObjs,h.objs).getSVG(j,E).then(Z=>{b(),this.svg=Z,this.paintedViewportMap.set(Z,E),Z.style.width=f.style.width,Z.style.height=f.style.height,this.renderingState=A.RenderingStates.FINISHED,f.appendChild(Z)}))),onRenderContinue(j){j()},cancel(){w=!0}}}setPageLabel(f){this.pageLabel="string"==typeof f?f:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.compatibilityParams=g.OptionKind=g.AppOptions=void 0;const M=Object.create(null);g.compatibilityParams=M;{const n=navigator.userAgent||"",i=navigator.platform||"",d=navigator.maxTouchPoints||1,P=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===i&&d>1||P)&&(M.maxCanvasPixels=5242880)}const _={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};g.OptionKind=_;const A={annotationMode:{value:2,kind:_.VIEWER+_.PREFERENCE},cursorToolOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:_.VIEWER},defaultZoomValue:{value:"",kind:_.VIEWER+_.PREFERENCE},disableHistory:{value:!1,kind:_.VIEWER},disablePageLabels:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePermissions:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:_.VIEWER+_.PREFERENCE},enableScripting:{value:!0,kind:_.VIEWER+_.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:_.VIEWER},externalLinkTarget:{value:0,kind:_.VIEWER+_.PREFERENCE},historyUpdateUrl:{value:!1,kind:_.VIEWER+_.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},imageResourcesPath:{value:"./images/",kind:_.VIEWER},maxCanvasPixels:{value:16777216,compatibility:M.maxCanvasPixels,kind:_.VIEWER},pageColorsBackground:{value:"Canvas",kind:_.VIEWER+_.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:_.VIEWER+_.PREFERENCE},pdfBugEnabled:{value:!1,kind:_.VIEWER+_.PREFERENCE},printResolution:{value:150,kind:_.VIEWER},renderer:{value:"canvas",kind:_.VIEWER},sidebarViewOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},scrollModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},spreadModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},textLayerMode:{value:1,kind:_.VIEWER+_.PREFERENCE},useOnlyCssZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},viewerCssTheme:{value:0,kind:_.VIEWER+_.PREFERENCE},viewOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},cMapPacked:{value:!0,kind:_.API},cMapUrl:{value:"../web/cmaps/",kind:_.API},disableAutoFetch:{value:!1,kind:_.API+_.PREFERENCE},disableFontFace:{value:!1,kind:_.API+_.PREFERENCE},disableRange:{value:!1,kind:_.API+_.PREFERENCE},disableStream:{value:!1,kind:_.API+_.PREFERENCE},docBaseUrl:{value:"",kind:_.API},enableXfa:{value:!0,kind:_.API+_.PREFERENCE},fontExtraProperties:{value:!1,kind:_.API},isEvalSupported:{value:!0,kind:_.API},maxImageSize:{value:-1,kind:_.API},pdfBug:{value:!1,kind:_.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:_.API},verbosity:{value:1,kind:_.API},workerPort:{value:null,kind:_.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:_.WORKER}};A.disablePreferences={value:!1,kind:_.VIEWER},A.locale={value:navigator.language||"en-US",kind:_.VIEWER},A.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:_.VIEWER},A.renderer.kind+=_.PREFERENCE;const I=Object.create(null);g.AppOptions=class y{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(i){const d=I[i];if(void 0!==d)return d;const P=A[i];return void 0!==P?P.compatibility??P.value:void 0}static getAll(i=null){const d=Object.create(null);for(const P in A){const f=A[P];if(i){if(!(i&f.kind))continue;if(i===_.PREFERENCE){const b=f.value,h=typeof b;if("boolean"===h||"string"===h||"number"===h&&Number.isInteger(b)){d[P]=b;continue}throw new Error(`Invalid type for preference: ${P}`)}}const w=I[P];d[P]=void 0!==w?w:f.compatibility??f.value}return d}static set(i,d){I[i]=d}static setAll(i){for(const d in i)I[d]=i[d]}static remove(i){delete I[i]}static _hasUserOptions(){return Object.keys(I).length>0}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFRenderingQueue=void 0;var _=M(3),A=M(6);g.PDFRenderingQueue=class y{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(i){this.pdfViewer=i}setThumbnailViewer(i){this.pdfThumbnailViewer=i}isHighestPriority(i){return this.highestPriorityPage===i.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(i){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(i)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(i,d,P,f=!1){const w=i.views,b=w.length;if(0===b)return null;for(let $=0;$<b;$++){const Z=w[$].view;if(!this.isViewFinished(Z))return Z}const h=i.first.id,E=i.last.id;if(E-h+1>b){const $=i.ids;for(let Z=1,K=E-h;Z<K;Z++){const ee=P?h+Z:E-Z;if($.has(ee))continue;const ue=d[ee-1];if(!this.isViewFinished(ue))return ue}}let D=P?E:h-2,j=d[D];return j&&!this.isViewFinished(j)||f&&(D+=P?1:-1,j=d[D],j&&!this.isViewFinished(j))?j:null}isViewFinished(i){return i.renderingState===A.RenderingStates.FINISHED}renderView(i){switch(i.renderingState){case A.RenderingStates.FINISHED:return!1;case A.RenderingStates.PAUSED:this.highestPriorityPage=i.renderingId,i.resume();break;case A.RenderingStates.RUNNING:this.highestPriorityPage=i.renderingId;break;case A.RenderingStates.INITIAL:this.highestPriorityPage=i.renderingId,i.draw().finally(()=>{this.renderHighestPriority()}).catch(d=>{d instanceof _.RenderingCancelledException||console.error(`renderView: "${d}"`)})}return!0}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextHighlighter=void 0,g.TextHighlighter=class M{constructor({findController:A,eventBus:I,pageIndex:y}){this.findController=A,this.matches=[],this.eventBus=I,this.pageIdx=y,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(A,I){this.textDivs=A,this.textContentItemsStr=I}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=A=>{(A.pageIndex===this.pageIdx||-1===A.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(A,I){if(!A)return[];const{textContentItemsStr:y}=this;let n=0,i=0;const d=y.length-1,P=[];for(let f=0,w=A.length;f<w;f++){let b=A[f];for(;n!==d&&b>=i+y[n].length;)i+=y[n].length,n++;n===y.length&&console.error("Could not find a matching mapping");const h={begin:{divIdx:n,offset:b-i}};for(b+=I[f];n!==d&&b>i+y[n].length;)i+=y[n].length,n++;h.end={divIdx:n,offset:b-i},P.push(h)}return P}_renderMatches(A){if(0===A.length)return;const{findController:I,pageIdx:y}=this,{textContentItemsStr:n,textDivs:i}=this,d=y===I.selected.pageIdx,P=I.selected.matchIdx;let w=null;function h($,Z){const K=$.divIdx;return i[K].textContent="",E(K,0,$.offset,Z)}function E($,Z,K,ee){let ue=i[$];if(ue.nodeType===Node.TEXT_NODE){const r=document.createElement("span");ue.parentNode.insertBefore(r,ue),r.appendChild(ue),i[$]=r,ue=r}const ce=n[$].substring(Z,K),O=document.createTextNode(ce);if(ee){const r=document.createElement("span");return r.className=`${ee} appended`,r.appendChild(O),ue.appendChild(r),ee.includes("selected")?r.offsetLeft:0}return ue.appendChild(O),0}let D=P,j=D+1;if(I.state.highlightAll)D=0,j=A.length;else if(!d)return;for(let $=D;$<j;$++){const Z=A[$],K=Z.begin,ee=Z.end,ue=d&&$===P,ce=ue?" selected":"";let O=0;if(w&&K.divIdx===w.divIdx?E(w.divIdx,w.offset,K.offset):(null!==w&&E(w.divIdx,w.offset,undefined),h(K)),K.divIdx===ee.divIdx)O=E(K.divIdx,K.offset,ee.offset,"highlight"+ce);else{O=E(K.divIdx,K.offset,undefined,"highlight begin"+ce);for(let r=K.divIdx+1,t=ee.divIdx;r<t;r++)i[r].className="highlight middle"+ce;h(ee,"highlight end"+ce)}w=ee,ue&&I.scrollMatchIntoView({element:i[K.divIdx],selectedLeft:O,pageIndex:y,matchIndex:P})}w&&E(w.divIdx,w.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:A,matches:I,pageIdx:y}=this,{textContentItemsStr:n,textDivs:i}=this;let d=-1;for(let w=0,b=I.length;w<b;w++){const h=I[w];for(let D=Math.max(d,h.begin.divIdx),j=h.end.divIdx;D<=j;D++){const $=i[D];$.textContent=n[D],$.className=""}d=h.end.divIdx+1}A?.highlightMatches&&(this.matches=this._convertMatches(A.pageMatches[y]||null,A.pageMatchesLength[y]||null),this._renderMatches(this.matches))}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DownloadManager=void 0;var _=M(3);function A(y,n){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=y,i.target="_parent","download"in i&&(i.download=n),(document.body||document.documentElement).appendChild(i),i.click(),i.remove()}g.DownloadManager=class I{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(n,i){(0,_.createValidAbsoluteUrl)(n,"http://example.com")?A(n+"#pdfjs.action=download",i):console.error(`downloadUrl - not a valid URL: ${n}`)}downloadData(n,i,d){A(URL.createObjectURL(new Blob([n],{type:d})),i)}openOrDownloadData(n,i,d){const P=(0,_.isPdfFile)(d),f=P?"application/pdf":"";if(P){let b,w=this._openBlobUrls.get(n);w||(w=URL.createObjectURL(new Blob([i],{type:f})),this._openBlobUrls.set(n,w)),b="?file="+encodeURIComponent(w+"#"+d);try{return window.open(b),!0}catch(h){console.error(`openOrDownloadData: ${h}`),URL.revokeObjectURL(w),this._openBlobUrls.delete(n)}}return this.downloadData(i,d,f),!1}download(n,i,d,P="download"){A(URL.createObjectURL(n),d)}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WaitOnType=g.EventBus=g.AutomationEventBus=void 0,g.waitOnEventOrTimeout=function _({target:y,name:n,delay:i=0}){return new Promise(function(d,P){if("object"!=typeof y||!n||"string"!=typeof n||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function f(E){y instanceof A?y._off(n,w):y.removeEventListener(n,w),h&&clearTimeout(h),d(E)}const w=f.bind(null,M.EVENT);y instanceof A?y._on(n,w):y.addEventListener(n,w);const b=f.bind(null,M.TIMEOUT),h=setTimeout(b,i)})};const M={EVENT:"event",TIMEOUT:"timeout"};g.WaitOnType=M;class A{constructor(){this._listeners=Object.create(null)}on(n,i,d=null){this._on(n,i,{external:!0,once:d?.once})}off(n,i,d=null){this._off(n,i,{external:!0,once:d?.once})}dispatch(n,i){const d=this._listeners[n];if(!d||0===d.length)return;let P;for(const{listener:f,external:w,once:b}of d.slice(0))b&&this._off(n,f),w?(P||=[]).push(f):f(i);if(P){for(const f of P)f(i);P=null}}_on(n,i,d=null){(this._listeners[n]||=[]).push({listener:i,external:!0===d?.external,once:!0===d?.once})}_off(n,i,d=null){const P=this._listeners[n];if(P)for(let f=0,w=P.length;f<w;f++)if(P[f].listener===i)return void P.splice(f,1)}}g.EventBus=A,g.AutomationEventBus=class I extends A{dispatch(n,i){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericL10n=void 0,M(19);var _=M(4);const A=document.webL10n;g.GenericL10n=class I{constructor(n){this._lang=n,this._ready=new Promise((i,d)=>{A.setLanguage((0,_.fixupLangCode)(n),()=>{i(A)})})}getLanguage(){var n=this;return v(function*(){return(yield n._ready).getLanguage()})()}getDirection(){var n=this;return v(function*(){return(yield n._ready).getDirection()})()}get(n,i=null,d=(0,_.getL10nFallback)(n,i)){var P=this;return v(function*(){return(yield P._ready).get(n,i,d)})()}translate(n){var i=this;return v(function*(){return(yield i._ready).translate(n)})()}}},()=>{document.webL10n=function(W,g){var _={},A="",I="textContent",y="",n={},i="loading",d=!0;function h(r,t,s){t=t||function(p){},s=s||function(){};var o=new XMLHttpRequest;o.open("GET",r,d),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=utf-8"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0===o.status?t(o.responseText):s())},o.onerror=s,o.ontimeout=s;try{o.send(null)}catch{s()}}function D(r,t){r&&(r=r.toLowerCase()),t=t||function(){},function j(){_={},A="",y=""}(),y=r;var s=function P(){return g.querySelectorAll('link[type="application/l10n"]')}(),o=s.length;if(0!==o){var k,x=0;k=function(){++x>=o&&(t(),i="complete")};for(var G=0;G<o;G++)new T(s[G]).load(r,k)}else{var u=function f(){var r=g.querySelector('script[type="application/l10n"]');return r?JSON.parse(r.innerHTML):null}();if(u&&u.locales&&u.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(_=u.locales[r])){var p=u.default_locale.toLowerCase();for(var a in u.locales){if((a=a.toLowerCase())===r){_=u.locales[r];break}a===p&&(_=u.locales[p])}}t()}else console.log("no resource to load, early way out");i="complete"}function T(he){var de=he.href;this.load=function(ge,_e){!function E(r,t,s,o){var u=r.replace(/[^\/]*$/,"")||"./";function p(k){return k.lastIndexOf("\\")<0?k:k.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}h(r,function(k){A+=k,function a(k,x){var T={},G=/^\s*|\s*$/,q=/^\s*#|^\s*$/,he=/^\s*\[(.*)\]\s*$/,de=/^\s*@import\s+url\((.*)\)\s*$/i,ge=/^([^=\s]*)\s*=\s*(.+)$/;function _e(m,C,re){var oe=m.replace(G,"").split(/[\r\n]+/),ne="*",J=t.split("-",1)[0],L=!1,te="";!function R(){for(;;){if(!oe.length)return void re();var se=oe.shift();if(!q.test(se)){if(C){if(te=he.exec(se)){ne=te[1].toLowerCase(),L="*"!==ne&&ne!==t&&ne!==J;continue}if(L)continue;if(te=de.exec(se))return void fe(u+te[1],R)}var le=se.match(ge);le&&3==le.length&&(T[le[1]]=p(le[2]))}}}()}function fe(m,C){h(m,function(re){_e(re,!1,C)},function(){console.warn(m+" not found."),C()})}_e(k,!0,function(){x(T)})}(k,function(x){for(var T in x){var G,q,he=T.lastIndexOf(".");he>0?(G=T.substring(0,he),q=T.substring(he+1)):(G=T,q=I),_[G]||(_[G]={}),_[G][q]=x[T]}s&&s()})},o)}(de,ge,_e,function(){console.warn(de+" not found."),console.warn('"'+ge+'" resource not found'),y="",_e()})}}}function Z(r,t,s){var o=_[r];if(!o){if(console.warn("#"+r+" is undefined."),!s)return null;o=s}var u={};for(var p in o){var a=o[p];a=ee(a=K(a,t,r,p),t,r),u[p]=a}return u}function K(r,t,s,o){var p=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(r);if(!p||!p.length)return r;var x,a=p[1],k=p[2];return t&&k in t?x=t[k]:k in _&&(x=_[k]),a in n&&(r=(0,n[a])(r,x,s,o)),r}function ee(r,t,s){return r.replace(/\{\{\s*(.+?)\s*\}\}/g,function(u,p){return t&&p in t?t[p]:p in _?_[p]:(console.log("argument {{"+p+"}} for #"+s+" is undefined."),u)})}function ue(r){var t=function b(r){if(!r)return{};var t=r.getAttribute("data-l10n-id"),s=r.getAttribute("data-l10n-args"),o={};if(s)try{o=JSON.parse(s)}catch{console.warn("could not parse arguments for #"+t)}return{id:t,args:o}}(r);if(t.id){var s=Z(t.id,t.args);if(!s)return void console.warn("#"+t.id+" is undefined.");if(s[I]){if(0===function ce(r){if(r.children)return r.children.length;if(typeof r.childElementCount<"u")return r.childElementCount;for(var t=0,s=0;s<r.childNodes.length;s++)t+=1===r.nodeType?1:0;return t}(r))r[I]=s[I];else{for(var o=r.childNodes,u=!1,p=0,a=o.length;p<a;p++)3===o[p].nodeType&&/\S/.test(o[p].nodeValue)&&(u?o[p].nodeValue="":(o[p].nodeValue=s[I],u=!0));if(!u){var k=g.createTextNode(s[I]);r.insertBefore(k,r.firstChild)}}delete s[I]}for(var x in s)r[x]=s[x]}}return n.plural=function(r,t,s,o){var u=parseFloat(t);if(isNaN(u)||o!=I)return r;n._pluralRules||(n._pluralRules=function $(r){function s(a,k){return-1!==k.indexOf(a)}function o(a,k,x){return k<=a&&a<=x}var u={0:function(a){return"other"},1:function(a){return o(a%100,3,10)?"few":0===a?"zero":o(a%100,11,99)?"many":2==a?"two":1==a?"one":"other"},2:function(a){return 0!==a&&a%10==0?"many":2==a?"two":1==a?"one":"other"},3:function(a){return 1==a?"one":"other"},4:function(a){return o(a,0,1)?"one":"other"},5:function(a){return o(a,0,2)&&2!=a?"one":"other"},6:function(a){return 0===a?"zero":a%10==1&&a%100!=11?"one":"other"},7:function(a){return 2==a?"two":1==a?"one":"other"},8:function(a){return o(a,3,6)?"few":o(a,7,10)?"many":2==a?"two":1==a?"one":"other"},9:function(a){return 0===a||1!=a&&o(a%100,1,19)?"few":1==a?"one":"other"},10:function(a){return o(a%10,2,9)&&!o(a%100,11,19)?"few":a%10!=1||o(a%100,11,19)?"other":"one"},11:function(a){return o(a%10,2,4)&&!o(a%100,12,14)?"few":a%10==0||o(a%10,5,9)||o(a%100,11,14)?"many":a%10==1&&a%100!=11?"one":"other"},12:function(a){return o(a,2,4)?"few":1==a?"one":"other"},13:function(a){return o(a%10,2,4)&&!o(a%100,12,14)?"few":1!=a&&o(a%10,0,1)||o(a%10,5,9)||o(a%100,12,14)?"many":1==a?"one":"other"},14:function(a){return o(a%100,3,4)?"few":a%100==2?"two":a%100==1?"one":"other"},15:function(a){return 0===a||o(a%100,2,10)?"few":o(a%100,11,19)?"many":1==a?"one":"other"},16:function(a){return a%10==1&&11!=a?"one":"other"},17:function(a){return 3==a?"few":0===a?"zero":6==a?"many":2==a?"two":1==a?"one":"other"},18:function(a){return 0===a?"zero":o(a,0,2)&&0!==a&&2!=a?"one":"other"},19:function(a){return o(a,2,10)?"few":o(a,0,1)?"one":"other"},20:function(a){return!o(a%10,3,4)&&a%10!=9||o(a%100,10,19)||o(a%100,70,79)||o(a%100,90,99)?a%1e6==0&&0!==a?"many":a%10!=2||s(a%100,[12,72,92])?a%10!=1||s(a%100,[11,71,91])?"other":"one":"two":"few"},21:function(a){return 0===a?"zero":1==a?"one":"other"},22:function(a){return o(a,0,1)||o(a,11,99)?"one":"other"},23:function(a){return o(a%10,1,2)||a%20==0?"one":"other"},24:function(a){return o(a,3,10)||o(a,13,19)?"few":s(a,[2,12])?"two":s(a,[1,11])?"one":"other"}},p={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[r.replace(/-.*$/,"")];return p in u?u[p]:(console.warn("plural form unknown for ["+r+"]"),function(){return"other"})}(y));var p="["+n._pluralRules(u)+"]";return 0===u&&s+"[zero]"in _?r=_[s+"[zero]"][o]:1==u&&s+"[one]"in _?r=_[s+"[one]"][o]:2==u&&s+"[two]"in _?r=_[s+"[two]"][o]:s+p in _?r=_[s+p][o]:s+"[other]"in _&&(r=_[s+"[other]"][o]),r},{get:function(r,t,s){var p,o=r.lastIndexOf("."),u=I;o>0&&(u=r.substring(o+1),r=r.substring(0,o)),s&&((p={})[u]=s);var a=Z(r,t,p);return a&&u in a?a[u]:"{{"+r+"}}"},getData:function(){return _},getText:function(){return A},getLanguage:function(){return y},setLanguage:function(r,t){D(r,function(){t&&t()})},getDirection:function(){var t=y.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function O(r){for(var t=function w(r){return r?r.querySelectorAll("*[data-l10n-id]"):[]}(r=r||g.documentElement),s=t.length,o=0;o<s;o++)ue(t[o]);ue(r)},getReadyState:function(){return i},ready:function(r){r&&("complete"==i||"interactive"==i?W.setTimeout(function(){r()}):g.addEventListener&&g.addEventListener("localized",function t(){g.removeEventListener("localized",t),r()}))}}}(window,document)},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFindController=g.FindState=void 0;var _=M(6),A=M(3),I=M(21);const y={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};g.FindState=y;const P={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},f=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),w=[...f.values()].map(m=>String.fromCharCode(m)).join(""),b=new RegExp("\\p{M}+","gu"),h=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),E=new RegExp("([^\\p{M}])\\p{M}*$","u"),D=new RegExp("^\\p{M}*([^\\p{M}])","u");let j=null;function $(m){if(!j){const le=Object.keys(P).join("");j=new RegExp(`([${le}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const C=[];let re;for(;null!==(re=b.exec(m));)C.push([re[0].length,re.index]);let oe=m.normalize("NFD");const ne=[[0,0]];let J=0,L=0,te=0,R=0,se=!1;return oe=oe.replace(j,(le,me,ve,ae,Y,Q)=>{if(Q-=te,me){const pe=P[le],be=pe.length;for(let ye=1;ye<be;ye++)ne.push([Q-L+ye,L-ye]);return L-=be-1,pe}if(ve){const pe=ve.endsWith("\n"),be=pe?ve.length-2:ve.length;se=!0;let ye=be;Q+R===C[J]?.[1]&&(ye-=C[J][0],++J);for(let Ae=1;Ae<ye+1;Ae++)ne.push([Q-1-L+Ae,L-Ae]);return L-=ye,te+=ye,pe?(ne.push([(Q+=be-1)-L+1,1+L]),L+=1,te+=1,R+=1,ve.slice(0,be)):ve}return ae?(ne.push([Q-L+1,1+L]),L+=1,te+=1,R+=1,ae.charAt(0)):(ne.push([Q-L+1,L-1]),L-=1,te+=1,R+=1," ")}),ne.push([oe.length,L]),[oe,ne,se]}function Z(m,C,re){if(!m)return[C,re];const oe=C,ne=C+re;let J=(0,_.binarySearchFirstItem)(m,te=>te[0]>=oe);m[J][0]>oe&&--J;let L=(0,_.binarySearchFirstItem)(m,te=>te[0]>=ne,J);return m[L][0]>ne&&--L,[oe+m[J][1],re+m[L][1]-m[J][1]]}var K=new WeakSet;function ue(m){if(!m)return;const C=this._pdfDocument,{type:re}=m;(null===this._state||N(K,this,r).call(this,m))&&(this._dirtyMatch=!0),this._state=m,"highlightallchange"!==re&&N(K,this,fe).call(this,y.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||C&&this._pdfDocument!==C)return;N(K,this,p).call(this);const oe=!this._highlightMatches,ne=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),re?this._dirtyMatch?N(K,this,x).call(this):"again"===re?(N(K,this,x).call(this),oe&&this._state.highlightAll&&N(K,this,k).call(this)):"highlightallchange"===re?(ne?N(K,this,x).call(this):this._highlightMatches=!0,N(K,this,k).call(this)):N(K,this,x).call(this):this._findTimeout=setTimeout(()=>{N(K,this,x).call(this),this._findTimeout=null},250)})}function ce(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,A.createPromiseCapability)()}function O(m){return m._state.query!==m._rawQuery&&(m._rawQuery=m._state.query,[m._normalizedQuery]=$(m._state.query)),m._normalizedQuery}function r(m){if(m.query!==this._state.query)return!0;switch(m.type){case"again":const C=this._selected.pageIdx+1,re=this._linkService;return C>=1&&C<=re.pagesCount&&C!==re.page&&!re.isPageVisible(C);case"highlightallchange":return!1}return!0}function t(m,C,re){let oe=m.slice(0,C).match(E);if(oe){const ne=m.charCodeAt(C),J=oe[1].charCodeAt(0);if((0,I.getCharacterType)(ne)===(0,I.getCharacterType)(J))return!1}if(oe=m.slice(C+re).match(D),oe){const ne=m.charCodeAt(C+re-1),J=oe[1].charCodeAt(0);if((0,I.getCharacterType)(ne)===(0,I.getCharacterType)(J))return!1}return!0}function s(m,C,re,oe){const ne=[],J=[],L=this._pageDiffs[re];let te;for(;null!==(te=m.exec(oe));){if(C&&!N(K,this,t).call(this,oe,te.index,te[0].length))continue;const[R,se]=Z(L,te.index,te[0].length);se&&(ne.push(R),J.push(se))}this._pageMatches[re]=ne,this._pageMatchesLength[re]=J}function o(m,C){const{matchDiacritics:re}=this._state;let oe=!1;return(m=m.replace(h,(J,L,te,R,se,le)=>L?`[ ]*\\${L}[ ]*`:te?`[ ]*${te}[ ]*`:R?"[ ]+":re?se||le:se?f.has(se.charCodeAt(0))?se:"":C?(oe=!0,`${le}\\p{M}*`):le)).endsWith("[ ]*")&&(m=m.slice(0,m.length-4)),re&&C&&(oe=!0,m=`${m}(?=[${w}]|[^\\p{M}]|$)`),[oe,m]}function u(m){let C=e(K,this,O);if(0===C.length)return;const{caseSensitive:re,entireWord:oe,phraseSearch:ne}=this._state,J=this._pageContents[m],L=this._hasDiacritics[m];let te=!1;if(ne)[te,C]=N(K,this,o).call(this,C,L);else{const le=C.match(/\S+/g);le&&(C=le.sort().reverse().map(me=>{const[ve,ae]=N(K,this,o).call(this,me,L);return te||=ve,`(${ae})`}).join("|"))}C=new RegExp(C,`g${te?"u":""}${re?"":"i"}`),N(K,this,s).call(this,C,oe,m,J),this._state.highlightAll&&N(K,this,a).call(this,m),this._resumePageIdx===m&&(this._resumePageIdx=null,N(K,this,G).call(this));const se=this._pageMatches[m].length;se>0&&(this._matchesCountTotal+=se,N(K,this,_e).call(this))}function p(){if(this._extractTextPromises.length>0)return;let m=Promise.resolve();for(let C=0,re=this._linkService.pagesCount;C<re;C++){const oe=(0,A.createPromiseCapability)();this._extractTextPromises[C]=oe.promise,m=m.then(()=>this._pdfDocument.getPage(C+1).then(ne=>ne.getTextContent()).then(ne=>{const J=[];for(const L of ne.items)J.push(L.str),L.hasEOL&&J.push("\n");[this._pageContents[C],this._pageDiffs[C],this._hasDiacritics[C]]=$(J.join("")),oe.resolve()},ne=>{console.error(`Unable to get text content for page ${C+1}`,ne),this._pageContents[C]="",this._pageDiffs[C]=null,this._hasDiacritics[C]=!1,oe.resolve()}))}}function a(m){this._scrollMatches&&this._selected.pageIdx===m&&(this._linkService.page=m+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:m})}function k(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function x(){const m=this._state.findPrevious,C=this._linkService.page-1,re=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=C,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,N(K,this,k).call(this);for(let ne=0;ne<re;ne++)this._pendingFindMatches.has(ne)||(this._pendingFindMatches.add(ne),this._extractTextPromises[ne].then(()=>{this._pendingFindMatches.delete(ne),N(K,this,u).call(this,ne)}))}if(""===e(K,this,O))return void N(K,this,fe).call(this,y.FOUND);if(this._resumePageIdx)return;const oe=this._offset;if(this._pagesToSearch=re,null!==oe.matchIdx){if(!m&&oe.matchIdx+1<this._pageMatches[oe.pageIdx].length||m&&oe.matchIdx>0)return oe.matchIdx=m?oe.matchIdx-1:oe.matchIdx+1,void N(K,this,he).call(this,!0);N(K,this,q).call(this,m)}N(K,this,G).call(this)}function T(m){const C=this._offset,re=m.length,oe=this._state.findPrevious;return re?(C.matchIdx=oe?re-1:0,N(K,this,he).call(this,!0),!0):(N(K,this,q).call(this,oe),!!(C.wrapped&&(C.matchIdx=null,this._pagesToSearch<0))&&(N(K,this,he).call(this,!1),!0))}function G(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let m=null;do{const C=this._offset.pageIdx;if(m=this._pageMatches[C],!m){this._resumePageIdx=C;break}}while(!N(K,this,T).call(this,m))}function q(m){const C=this._offset,re=this._linkService.pagesCount;C.pageIdx=m?C.pageIdx-1:C.pageIdx+1,C.matchIdx=null,this._pagesToSearch--,(C.pageIdx>=re||C.pageIdx<0)&&(C.pageIdx=m?re-1:0,C.wrapped=!0)}function he(m=!1){let C=y.NOT_FOUND;const re=this._offset.wrapped;if(this._offset.wrapped=!1,m){const oe=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,C=re?y.WRAPPED:y.FOUND,-1!==oe&&oe!==this._selected.pageIdx&&N(K,this,a).call(this,oe)}N(K,this,fe).call(this,C,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,N(K,this,a).call(this,this._selected.pageIdx))}function de(m){const C=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||C&&this._pdfDocument!==C||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),N(K,this,fe).call(this,y.FOUND),this._highlightMatches=!1,N(K,this,k).call(this))})}function ge(){const{pageIdx:m,matchIdx:C}=this._selected;let re=0,oe=this._matchesCountTotal;if(-1!==C){for(let ne=0;ne<m;ne++)re+=this._pageMatches[ne]?.length||0;re+=C+1}return(re<1||re>oe)&&(re=oe=0),{current:re,total:oe}}function _e(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:N(K,this,ge).call(this)})}function fe(m,C=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:m,previous:C,matchesCount:N(K,this,ge).call(this),rawQuery:this._state?.query??null})}g.PDFFindController=class ee{constructor({linkService:C,eventBus:re}){F(this,K),this._linkService=C,this._eventBus=re,N(K,this,ce).call(this),re._on("find",N(K,this,ue).bind(this)),re._on("findbarclose",N(K,this,de).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(C){this._pdfDocument&&N(K,this,ce).call(this),C&&(this._pdfDocument=C,this._firstPageCapability.resolve())}scrollMatchIntoView({element:C=null,selectedLeft:re=0,pageIndex:oe=-1,matchIndex:ne=-1}){this._scrollMatches&&C&&-1!==ne&&ne===this._selected.matchIdx&&-1!==oe&&oe===this._selected.pageIdx&&(this._scrollMatches=!1,(0,_.scrollIntoView)(C,{top:-50,left:re+-400},!0))}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterType=void 0,g.getCharacterType=function b(h){return function _(h){return h<11904}(h)?function A(h){return!(65408&h)}(h)?function n(h){return 32===h||9===h||13===h||10===h}(h)?M.SPACE:function I(h){return h>=97&&h<=122||h>=65&&h<=90}(h)||function y(h){return h>=48&&h<=57}(h)||95===h?M.ALPHA_LETTER:M.PUNCT:function w(h){return 3584==(65408&h)}(h)?M.THAI_LETTER:160===h?M.SPACE:M.ALPHA_LETTER:function i(h){return h>=13312&&h<=40959||h>=63744&&h<=64255}(h)?M.HAN_LETTER:function d(h){return h>=12448&&h<=12543}(h)?M.KATAKANA_LETTER:function P(h){return h>=12352&&h<=12447}(h)?M.HIRAGANA_LETTER:function f(h){return h>=65376&&h<=65439}(h)?M.HALFWIDTH_KATAKANA_LETTER:M.ALPHA_LETTER};const M={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};g.CharacterType=M},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFHistory=void 0,g.isDestArraysEqual=f,g.isDestHashesEqual=P;var _=M(6),A=M(17);function i(){return document.location.hash}function P(w,b){return"string"==typeof w&&"string"==typeof b&&(w===b||(0,_.parseQueryString)(w).get("nameddest")===b)}function f(w,b){function h(E,D){if(typeof E!=typeof D||Array.isArray(E)||Array.isArray(D))return!1;if(null!==E&&"object"==typeof E&&null!==D){if(Object.keys(E).length!==Object.keys(D).length)return!1;for(const j in E)if(!h(E[j],D[j]))return!1;return!0}return E===D||Number.isNaN(E)&&Number.isNaN(D)}if(!Array.isArray(w)||!Array.isArray(b)||w.length!==b.length)return!1;for(let E=0,D=w.length;E<D;E++)if(!h(w[E],b[E]))return!1;return!0}g.PDFHistory=class d{constructor({linkService:b,eventBus:h}){this.linkService=b,this.eventBus=h,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",E=>{this._isPagesLoaded=!!E.pagesCount},{once:!0})})}initialize({fingerprint:b,resetHistory:h=!1,updateUrl:E=!1}){if(!b||"string"!=typeof b)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const D=""!==this._fingerprint&&this._fingerprint!==b;this._fingerprint=b,this._updateUrl=!0===E,this._initialized=!0,this._bindEvents();const j=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=i(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(j,!0)||h){const{hash:Z,page:K,rotation:ee}=this._parseCurrentHash(!0);return!Z||D||h?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:Z,page:K,rotation:ee},!0)}const $=j.destination;this._updateInternalState($,j.uid,!0),void 0!==$.rotation&&(this._initialRotation=$.rotation),$.dest?(this._initialBookmark=JSON.stringify($.dest),this._destination.page=null):$.hash?this._initialBookmark=$.hash:$.page&&(this._initialBookmark=`page=${$.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:b=null,explicitDest:h,pageNumber:E}){if(!this._initialized)return;if(b&&"string"!=typeof b)return void console.error(`PDFHistory.push: "${b}" is not a valid namedDest parameter.`);if(!Array.isArray(h))return void console.error(`PDFHistory.push: "${h}" is not a valid explicitDest parameter.`);if(!this._isValidPage(E)&&(null!==E||this._destination))return void console.error(`PDFHistory.push: "${E}" is not a valid pageNumber parameter.`);const D=b||JSON.stringify(h);if(!D)return;let j=!1;if(this._destination&&(P(this._destination.hash,D)||f(this._destination.dest,h))){if(this._destination.page)return;j=!0}this._popStateInProgress&&!j||(this._pushOrReplaceState({dest:h,hash:D,page:E,rotation:this.linkService.rotation},j),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(b){if(this._initialized){if(!this._isValidPage(b))return void console.error(`PDFHistory.pushPage: "${b}" is not a valid page number.`);this._destination?.page!==b&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${b}`,page:b,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(b,h=!1){const E=h||!this._destination,D={fingerprint:this._fingerprint,uid:E?this._uid:this._uid+1,destination:b};let j;if(this._updateInternalState(b,D.uid),this._updateUrl&&b?.hash){const $=document.location.href.split("#")[0];$.startsWith("file://")||(j=`${$}#${b.hash}`)}E?window.history.replaceState(D,"",j):window.history.pushState(D,"",j)}_tryPushCurrentPosition(b=!1){if(!this._position)return;let h=this._position;if(b&&(h=Object.assign(Object.create(null),this._position),h.temporary=!0),!this._destination)return void this._pushOrReplaceState(h);if(this._destination.temporary)return void this._pushOrReplaceState(h,!0);if(this._destination.hash===h.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let E=!1;if(this._destination.page>=h.first&&this._destination.page<=h.page){if(void 0!==this._destination.dest||!this._destination.first)return;E=!0}this._pushOrReplaceState(h,E)}_isValidPage(b){return Number.isInteger(b)&&b>0&&b<=this.linkService.pagesCount}_isValidState(b,h=!1){if(!b)return!1;if(b.fingerprint!==this._fingerprint){if(!h)return!1;{if("string"!=typeof b.fingerprint||b.fingerprint.length!==this._fingerprint.length)return!1;const[E]=performance.getEntriesByType("navigation");if("reload"!==E?.type)return!1}}return!(!Number.isInteger(b.uid)||b.uid<0||null===b.destination||"object"!=typeof b.destination)}_updateInternalState(b,h,E=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),E&&b?.temporary&&delete b.temporary,this._destination=b,this._uid=h,this._maxUid=Math.max(this._maxUid,h),this._numPositionUpdates=0}_parseCurrentHash(b=!1){const h=unescape(i()).substring(1),E=(0,_.parseQueryString)(h),D=E.get("nameddest")||"";let j=0|E.get("page");return(!this._isValidPage(j)||b&&D.length>0)&&(j=null),{hash:h,page:j,rotation:this.linkService.rotation}}_updateViewarea({location:b}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:b.pdfOpenParams.substring(1),page:this.linkService.page,first:b.pageNumber,rotation:b.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:b}){const h=i(),E=this._currentHash!==h;if(this._currentHash=h,!b){this._uid++;const{hash:j,page:$,rotation:Z}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:j,page:$,rotation:Z},!0)}if(!this._isValidState(b))return;this._popStateInProgress=!0,E&&(this._blockHashChange++,(0,A.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const D=b.destination;this._updateInternalState(D,b.uid,!0),(0,_.isValidRotation)(D.rotation)&&(this.linkService.rotation=D.rotation),D.dest?this.linkService.goToDestination(D.dest):D.hash?this.linkService.setHash(D.hash):D.page&&(this.linkService.page=D.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFScriptingManager=void 0;var _=M(6),A=M(3);g.PDFScriptingManager=class I{constructor({eventBus:n,sandboxBundleSrc:i=null,scriptingFactory:d=null,docPropertiesLookup:P=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=i,this._scriptingFactory=d,this._docPropertiesLookup=P,this._scriptingFactory||window.addEventListener("updatefromsandbox",f=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:f.detail})})}setViewer(n){this._pdfViewer=n}setDocument(n){var i=this;return v(function*(){if(i._pdfDocument&&(yield i._destroyScripting()),i._pdfDocument=n,!n)return;const[d,P,f]=yield Promise.all([n.getFieldObjects(),n.getCalculationOrderIds(),n.getJSActions()]);if(d||f){if(n===i._pdfDocument){try{i._scripting=i._createScripting()}catch(w){return console.error(`PDFScriptingManager.setDocument: "${w?.message}".`),void(yield i._destroyScripting())}i._internalEvents.set("updatefromsandbox",w=>{w?.source===window&&i._updateFromSandbox(w.detail)}),i._internalEvents.set("dispatcheventinsandbox",w=>{i._scripting?.dispatchEventInSandbox(w.detail)}),i._internalEvents.set("pagechanging",({pageNumber:w,previous:b})=>{w!==b&&(i._dispatchPageClose(b),i._dispatchPageOpen(w))}),i._internalEvents.set("pagerendered",({pageNumber:w})=>{i._pageOpenPending.has(w)&&w===i._pdfViewer.currentPageNumber&&i._dispatchPageOpen(w)}),i._internalEvents.set("pagesdestroy",function(){var w=v(function*(b){yield i._dispatchPageClose(i._pdfViewer.currentPageNumber),yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),i._closeCapability?.resolve()});return function(b){return w.apply(this,arguments)}}()),i._domEvents.set("mousedown",w=>{i._mouseState.isDown=!0}),i._domEvents.set("mouseup",w=>{i._mouseState.isDown=!1});for(const[w,b]of i._internalEvents)i._eventBus._on(w,b);for(const[w,b]of i._domEvents)window.addEventListener(w,b,!0);try{const w=yield i._getDocProperties();if(n!==i._pdfDocument)return;yield i._scripting.createSandbox({objects:d,calculationOrder:P,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...w,actions:f}}),i._eventBus.dispatch("sandboxcreated",{source:i})}catch(w){return console.error(`PDFScriptingManager.setDocument: "${w?.message}".`),void(yield i._destroyScripting())}yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield i._dispatchPageOpen(i._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{n===i._pdfDocument&&(i._ready=!0)})}}else yield i._destroyScripting()})()}dispatchWillSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,A.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,A.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,A.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,A.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(n){var i=this;return v(function*(){const d=i._pdfViewer.isInPresentationMode||i._pdfViewer.isChangingPresentationMode,{id:P,siblings:f,command:w,value:b}=n;if(!P){switch(w){case"clear":console.clear();break;case"error":console.error(b);break;case"layout":if(d)return;const E=(0,_.apiPageLayoutToViewerModes)(b);i._pdfViewer.spreadMode=E.spreadMode;break;case"page-num":i._pdfViewer.currentPageNumber=b+1;break;case"print":yield i._pdfViewer.pagesPromise,i._eventBus.dispatch("print",{source:i});break;case"println":console.log(b);break;case"zoom":if(d)return;i._pdfViewer.currentScaleValue=b;break;case"SaveAs":i._eventBus.dispatch("save",{source:i});break;case"FirstPage":i._pdfViewer.currentPageNumber=1;break;case"LastPage":i._pdfViewer.currentPageNumber=i._pdfViewer.pagesCount;break;case"NextPage":i._pdfViewer.nextPage();break;case"PrevPage":i._pdfViewer.previousPage();break;case"ZoomViewIn":if(d)return;i._pdfViewer.increaseScale();break;case"ZoomViewOut":if(d)return;i._pdfViewer.decreaseScale()}return}if(d&&n.focus)return;delete n.id,delete n.siblings;const h=f?[P,...f]:[P];for(const E of h){const D=document.getElementById(E);D?D.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:n})):i._pdfDocument?.annotationStorage.setValue(E,n)}})()}_dispatchPageOpen(n,i=!1){var d=this;return v(function*(){const P=d._pdfDocument,f=d._visitedPages;if(i&&(d._closeCapability=(0,A.createPromiseCapability)()),!d._closeCapability)return;const w=d._pdfViewer.getPageView(n-1);if(w?.renderingState!==_.RenderingStates.FINISHED)return void d._pageOpenPending.add(n);d._pageOpenPending.delete(n);const b=v(function*(){const h=yield f.has(n)?null:w.pdfPage?.getJSActions();P===d._pdfDocument&&(yield d._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:n,actions:h}))})();f.set(n,b)})()}_dispatchPageClose(n){var i=this;return v(function*(){const d=i._pdfDocument,P=i._visitedPages;if(!i._closeCapability||i._pageOpenPending.has(n))return;const f=P.get(n);f&&(P.set(n,null),yield f,d===i._pdfDocument&&(yield i._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:n})))})()}_getDocProperties(){var n=this;return v(function*(){if(n._docPropertiesLookup)return n._docPropertiesLookup(n._pdfDocument);const{docPropertiesLookup:i}=M(24);return i(n._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,A.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:n}=M(24);return new n(this._sandboxBundleSrc)}_destroyScripting(){var n=this;return v(function*(){if(!n._scripting)return n._pdfDocument=null,void n._destroyCapability?.resolve();n._closeCapability&&(yield Promise.race([n._closeCapability.promise,new Promise(i=>{setTimeout(i,1e3)})]).catch(i=>{}),n._closeCapability=null),n._pdfDocument=null;try{yield n._scripting.destroySandbox()}catch{}for(const[i,d]of n._internalEvents)n._eventBus._off(i,d);n._internalEvents.clear();for(const[i,d]of n._domEvents)window.removeEventListener(i,d,!0);n._domEvents.clear(),n._pageOpenPending.clear(),n._visitedPages.clear(),n._scripting=null,delete n._mouseState.isDown,n._ready=!1,n._destroyCapability?.resolve()})()}}},(W,g,M)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericScripting=void 0,g.docPropertiesLookup=function A(n){return I.apply(this,arguments)};var _=M(3);function I(){return(I=v(function*(n){const d="".split("#")[0];let{info:P,metadata:f,contentDispositionFilename:w,contentLength:b}=yield n.getMetadata();if(!b){const{length:h}=yield n.getDownloadInfo();b=h}return{...P,baseURL:d,filesize:b,filename:w||(0,_.getPdfFilenameFromUrl)(""),metadata:f?.getRaw(),authors:f?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}g.GenericScripting=class y{constructor(i){this._ready=(0,_.loadScript)(i,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(i){var d=this;return v(function*(){(yield d._ready).create(i)})()}dispatchEventInSandbox(i){var d=this;return v(function*(){const P=yield d._ready;setTimeout(()=>P.dispatchEvent(i),0)})()}destroySandbox(){var i=this;return v(function*(){(yield i._ready).nukeSandbox()})()}}}],H={};function z(W){var g=H[W];if(void 0!==g)return g.exports;var M=H[W]={exports:{}};return V[W](M,M.exports,z),M.exports}var B={};return(()=>{var W=B;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return I.AnnotationLayerBuilder}}),Object.defineProperty(W,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return g.DefaultAnnotationLayerFactory}}),Object.defineProperty(W,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return g.DefaultStructTreeLayerFactory}}),Object.defineProperty(W,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return g.DefaultTextLayerFactory}}),Object.defineProperty(W,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return g.DefaultXfaLayerFactory}}),Object.defineProperty(W,"DownloadManager",{enumerable:!0,get:function(){return y.DownloadManager}}),Object.defineProperty(W,"EventBus",{enumerable:!0,get:function(){return n.EventBus}}),Object.defineProperty(W,"GenericL10n",{enumerable:!0,get:function(){return i.GenericL10n}}),Object.defineProperty(W,"LinkTarget",{enumerable:!0,get:function(){return M.LinkTarget}}),Object.defineProperty(W,"NullL10n",{enumerable:!0,get:function(){return d.NullL10n}}),Object.defineProperty(W,"PDFFindController",{enumerable:!0,get:function(){return P.PDFFindController}}),Object.defineProperty(W,"PDFHistory",{enumerable:!0,get:function(){return f.PDFHistory}}),Object.defineProperty(W,"PDFLinkService",{enumerable:!0,get:function(){return M.PDFLinkService}}),Object.defineProperty(W,"PDFPageView",{enumerable:!0,get:function(){return w.PDFPageView}}),Object.defineProperty(W,"PDFScriptingManager",{enumerable:!0,get:function(){return b.PDFScriptingManager}}),Object.defineProperty(W,"PDFSinglePageViewer",{enumerable:!0,get:function(){return A.PDFSinglePageViewer}}),Object.defineProperty(W,"PDFViewer",{enumerable:!0,get:function(){return A.PDFViewer}}),Object.defineProperty(W,"ProgressBar",{enumerable:!0,get:function(){return _.ProgressBar}}),Object.defineProperty(W,"SimpleLinkService",{enumerable:!0,get:function(){return M.SimpleLinkService}}),Object.defineProperty(W,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return h.StructTreeLayerBuilder}}),Object.defineProperty(W,"TextLayerBuilder",{enumerable:!0,get:function(){return E.TextLayerBuilder}}),Object.defineProperty(W,"XfaLayerBuilder",{enumerable:!0,get:function(){return D.XfaLayerBuilder}}),Object.defineProperty(W,"parseQueryString",{enumerable:!0,get:function(){return _.parseQueryString}});var g=z(1),M=z(5),_=z(6),A=z(10),I=z(2),y=z(16),n=z(17),i=z(18),d=z(4),P=z(20),f=z(22),w=z(12),b=z(23),h=z(7),E=z(8),D=z(9)})(),B})(),ie.exports=z()},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{},45804:ie=>{ie.exports=function l(S,e,U){if("function"==typeof S?S===e:S.has(e))return arguments.length<3?e:U;throw new TypeError("Private element is not present on this object")},ie.exports.__esModule=!0,ie.exports.default=ie.exports},91485:ie=>{ie.exports=function l(S,e){if(e.has(S))throw new TypeError("Cannot initialize the same private elements twice on an object")},ie.exports.__esModule=!0,ie.exports.default=ie.exports},18188:(ie,l,S)=>{var e=S(45804);ie.exports=function U(F,X){return F.get(e(F,X))},ie.exports.__esModule=!0,ie.exports.default=ie.exports},43723:(ie,l,S)=>{var e=S(91485);ie.exports=function U(F,X,N){e(F,X),X.set(F,N)},ie.exports.__esModule=!0,ie.exports.default=ie.exports},7920:(ie,l,S)=>{var e=S(45804);ie.exports=function U(F,X,N){return F.set(e(F,X),N),N},ie.exports.__esModule=!0,ie.exports.default=ie.exports},93831:(ie,l,S)=>{var e=S(45804);ie.exports=function U(F,X,N){return N(e(F,X))},ie.exports.__esModule=!0,ie.exports.default=ie.exports},80816:(ie,l,S)=>{var e=S(91485);ie.exports=function U(F,X){e(F,X),X.add(F)},ie.exports.__esModule=!0,ie.exports.default=ie.exports},40829:(ie,l,S)=>{var e=S(47320);ie.exports=function U(F,X,N){return(X=e(X))in F?Object.defineProperty(F,X,{value:N,enumerable:!0,configurable:!0,writable:!0}):F[X]=N,F},ie.exports.__esModule=!0,ie.exports.default=ie.exports},96549:(ie,l,S)=>{var e=S(54042).default;ie.exports=function U(F,X){if("object"!=e(F)||!F)return F;var N=F[Symbol.toPrimitive];if(void 0!==N){var c=N.call(F,X||"default");if("object"!=e(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===X?String:Number)(F)},ie.exports.__esModule=!0,ie.exports.default=ie.exports},47320:(ie,l,S)=>{var e=S(54042).default,U=S(96549);ie.exports=function F(X){var N=U(X,"string");return"symbol"==e(N)?N:N+""},ie.exports.__esModule=!0,ie.exports.default=ie.exports},54042:ie=>{function l(S){return ie.exports=l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie.exports.__esModule=!0,ie.exports.default=ie.exports,l(S)}ie.exports=l,ie.exports.__esModule=!0,ie.exports.default=ie.exports},93630:(ie,l,S)=>{"use strict";S.d(l,{sv:()=>K,xn:()=>Z});var e=S(93953),U=S(60177),F=S(89417),X=S(33726),N=S(59030),c=S(21413),v=S(56977),V=S(96697),H=S(73703),z=S(44668);function B(ee,ue){}const W=()=>{const ee=typeof window<"u"?window:void 0;return ee&&ee.tinymce?ee.tinymce:null};let g=(()=>{class ee{constructor(){this.onBeforePaste=new e.bkB,this.onBlur=new e.bkB,this.onClick=new e.bkB,this.onContextMenu=new e.bkB,this.onCopy=new e.bkB,this.onCut=new e.bkB,this.onDblclick=new e.bkB,this.onDrag=new e.bkB,this.onDragDrop=new e.bkB,this.onDragEnd=new e.bkB,this.onDragGesture=new e.bkB,this.onDragOver=new e.bkB,this.onDrop=new e.bkB,this.onFocus=new e.bkB,this.onFocusIn=new e.bkB,this.onFocusOut=new e.bkB,this.onKeyDown=new e.bkB,this.onKeyPress=new e.bkB,this.onKeyUp=new e.bkB,this.onMouseDown=new e.bkB,this.onMouseEnter=new e.bkB,this.onMouseLeave=new e.bkB,this.onMouseMove=new e.bkB,this.onMouseOut=new e.bkB,this.onMouseOver=new e.bkB,this.onMouseUp=new e.bkB,this.onPaste=new e.bkB,this.onSelectionChange=new e.bkB,this.onActivate=new e.bkB,this.onAddUndo=new e.bkB,this.onBeforeAddUndo=new e.bkB,this.onBeforeExecCommand=new e.bkB,this.onBeforeGetContent=new e.bkB,this.onBeforeRenderUI=new e.bkB,this.onBeforeSetContent=new e.bkB,this.onChange=new e.bkB,this.onClearUndos=new e.bkB,this.onDeactivate=new e.bkB,this.onDirty=new e.bkB,this.onExecCommand=new e.bkB,this.onGetContent=new e.bkB,this.onHide=new e.bkB,this.onInit=new e.bkB,this.onInitNgModel=new e.bkB,this.onLoadContent=new e.bkB,this.onNodeChange=new e.bkB,this.onPostProcess=new e.bkB,this.onPostRender=new e.bkB,this.onPreInit=new e.bkB,this.onPreProcess=new e.bkB,this.onProgressState=new e.bkB,this.onRedo=new e.bkB,this.onRemove=new e.bkB,this.onReset=new e.bkB,this.onResizeEditor=new e.bkB,this.onSaveContent=new e.bkB,this.onSetAttrib=new e.bkB,this.onObjectResizeStart=new e.bkB,this.onObjectResized=new e.bkB,this.onObjectSelected=new e.bkB,this.onSetContent=new e.bkB,this.onShow=new e.bkB,this.onSubmit=new e.bkB,this.onUndo=new e.bkB,this.onVisualAid=new e.bkB}}return ee.\u0275fac=function(ce){return new(ce||ee)},ee.\u0275dir=e.FsC({type:ee,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),ee})();const M=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],_=(ee,ue,ce)=>(0,X.R)(ee,ue).pipe((0,v.Q)(ce)),y=(ee,ue)=>"string"==typeof ee?ee.split(",").map(ce=>ce.trim()):Array.isArray(ee)?ee:ue;let n=0;const d=ee=>typeof ee<"u"&&"textarea"===ee.tagName.toLowerCase(),P=ee=>typeof ee>"u"||""===ee?[]:Array.isArray(ee)?ee:ee.split(" "),f=(ee,ue)=>P(ee).concat(P(ue)),w=()=>{},b=ee=>null==ee,D=(()=>{let ee={script$:null};return{load:(O,r)=>ee.script$||(ee.script$=(0,N.v)(()=>{const t=O.createElement("script");return t.referrerPolicy="origin",t.type="application/javascript",t.src=r,O.head.appendChild(t),(0,X.R)(t,"load").pipe((0,V.s)(1),(0,H.u)(void 0))}).pipe((0,z.t)({bufferSize:1,refCount:!0}))),reinitialize:()=>{ee={script$:null}}}})(),j=new e.nKC("TINYMCE_SCRIPT_SRC"),$={provide:F.kq,useExisting:(0,e.Rfq)(()=>Z),multi:!0};let Z=(()=>{class ee extends g{constructor(ce,O,r,t){super(),this.platformId=r,this.tinymceScriptSrc=t,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=w,this.destroy$=new c.B,this.initialise=()=>{const s={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:f(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:o=>{this._editor=o,_(o,"init",this.destroy$).subscribe(()=>{this.initEditor(o)}),((ee,ue,ce)=>{(ee=>{const ue=y(ee.ignoreEvents,[]);return y(ee.allowedEvents,M).filter(O=>M.includes(O)&&!ue.includes(O))})(ee).forEach(r=>{const t=ee[r];_(ue,r.substring(2),ce).subscribe(s=>{t.observers.length>0&&ee.ngZone.run(()=>t.emit({event:s,editor:ue}))})})})(this,o,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(o)}};d(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{W().init(s)})},this._elementRef=ce,this.ngZone=O}set disabled(ce){this._disabled=ce,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(ce?"readonly":"design"):this._editor.setMode(ce?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(ce){this._editor&&this._editor.initialized?this._editor.setContent(b(ce)?"":ce):this.initialValue=null===ce?void 0:ce}registerOnChange(ce){this.onChangeCallback=ce}registerOnTouched(ce){this.onTouchedCallback=ce}setDisabledState(ce){this.disabled=ce}ngAfterViewInit(){(0,U.UE)(this.platformId)&&(this.id=this.id||(()=>{const ce=(new Date).getTime(),O=Math.floor(1e9*Math.random());return n++,"tiny-angular_"+O+n+String(ce)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==W()?this.initialise():this._element&&this._element.ownerDocument&&D.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,v.Q)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==W()&&W().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,d(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return b(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(ce){_(ce,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),_(ce,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(ce))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{ce.setContent(this.initialValue),ce.getContent()!==this.initialValue&&this.emitOnChange(ce),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(ce)})}emitOnChange(ce){this.onChangeCallback&&this.onChangeCallback(ce.getContent({format:this.outputFormat}))}}return ee.\u0275fac=function(ce){return new(ce||ee)(e.rXU(e.aKT),e.rXU(e.SKi),e.rXU(e.Agw),e.rXU(j,8))},ee.\u0275cmp=e.VBU({type:ee,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[e.Jv_([$]),e.Vt3,e.aNF],decls:1,vars:0,template:function(ce,O){1&ce&&e.DNE(0,B,0,0,"ng-template")},dependencies:[U.MD,F.YN],styles:["[_nghost-%COMP%]{display:block}"]}),ee})(),K=(()=>{class ee{}return ee.\u0275fac=function(ce){return new(ce||ee)},ee.\u0275mod=e.$C({type:ee}),ee.\u0275inj=e.G2t({imports:[Z]}),ee})()}}]);