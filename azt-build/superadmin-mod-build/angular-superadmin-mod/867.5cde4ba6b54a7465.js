"use strict";(self.webpackChunkSuperadminMod=self.webpackChunkSuperadminMod||[]).push([[867],{99867:(va,ue,p)=>{p.r(ue),p.d(ue,{AzotaToolsRoutingModule:()=>ba});var l=p(14042),g=p(32108),Re=p(74341),ze=p(82242),d=p(60177),c=p(89417),Me=p(57258),b=p(83409),_=p(89819),h=p(98697),j=p(51451),I=p(25155),e=p(93953),N=p(7),m=p(8516),y=p(24110),f=p(11782),v=p(46412),Ge=p(11836),w=p(57399),z=p(86600),Q=p(53719),M=p(82798);const De=n=>({grid:n}),L=(n,s)=>({"mt-2":n,"ml-2":s}),_e=n=>({width:n}),$e=n=>({flex:n});function Be(n,s){if(1&n&&e.eu8(0,8),2&n){e.XpG();const i=e.sdS(5);e.Y8G("ngTemplateOutlet",i)}}function Pe(n,s){if(1&n&&e.eu8(0,8),2&n){e.XpG();const i=e.sdS(7);e.Y8G("ngTemplateOutlet",i)}}function Ne(n,s){if(1&n&&e.eu8(0,8),2&n){e.XpG();const i=e.sdS(9);e.Y8G("ngTemplateOutlet",i)}}function Qe(n,s){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Le(n,s){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Ke(n,s){if(1&n&&(e.qex(0),e.j41(1,"mat-option",22),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(3,2,i.title)," ")}}function Ye(n,s){if(1&n&&(e.j41(0,"div",23)(1,"div",12)(2,"label",24),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"mat-form-field",14)(6,"mat-select",15,5)(8,"mat-option"),e.nrm(9,"ngx-mat-select-search",16),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"mat-option",22),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,Ke,4,4,"ng-container",25),e.k0s()()()),2&n){const i=e.sdS(7),t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,8,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",t.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(10,10,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(11,12,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(14,14,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",i.filter(t.listBookObjs,"title"))}}function qe(n,s){1&n&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function Ve(n,s){if(1&n&&(e.j41(0,"form",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"label",13),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"mat-form-field",14)(8,"mat-select",15,3)(10,"mat-option"),e.nrm(11,"ngx-mat-select-search",16),e.nI1(12,"mytranslate"),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"mat-option",17),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.DNE(17,Qe,3,4,"mat-option",18),e.k0s()()(),e.j41(18,"div",11)(19,"div",12)(20,"label",19),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"mat-form-field",14)(24,"mat-select",15,4)(26,"mat-option"),e.nrm(27,"ngx-mat-select-search",16),e.nI1(28,"mytranslate"),e.nI1(29,"mytranslate"),e.k0s(),e.j41(30,"mat-option",17),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.DNE(33,Le,3,4,"mat-option",18),e.k0s()()(),e.DNE(34,Ye,16,16,"div",20)(35,qe,4,3,"div",21),e.k0s()()),2&n){const i=e.sdS(9),t=e.sdS(25),o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(5),e.SpI(" ",e.bMT(6,19,"lang_auto_khoi_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(12,21,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(13,23,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(16,25,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(i.mergeSchoolLevel(o.schoolLevelObjs),"key")),e.R7$(4),e.SpI(" ",e.bMT(22,27,"lang_auto_mon_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(28,29,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(29,31,"lang_search_not_found")),e.Y8G("formControl",t.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(32,33,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",t.filter(o.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",o.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.invalid||o.form.controls.schoolSubject.invalid)}}function Xe(n,s){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Ue(n,s){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Je(n,s){if(1&n&&(e.qex(0),e.j41(1,"mat-option",22),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(3,2,i.title)," ")}}function We(n,s){if(1&n&&(e.j41(0,"div",36)(1,"label",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"mat-form-field",31)(5,"mat-select",15,5)(7,"mat-option"),e.nrm(8,"ngx-mat-select-search",16),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-option",22),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Je,4,4,"ng-container",25),e.k0s()()()),2&n){const i=e.sdS(6),t=e.XpG(2);e.Y8G("ngClass",e.l_i(18,L,t.isMobileDevice,!t.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(21,_e,t.isMobileDevice?"54px":"")),e.R7$(),e.SpI(" ",e.bMT(3,10,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",t.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(9,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(10,14,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(13,16,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",i.filter(t.listBookObjs,"title"))}}function He(n,s){1&n&&(e.j41(0,"div",38)(1,"div",27),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function Ze(n,s){if(1&n&&(e.j41(0,"form",9)(1,"div",28)(2,"div",29)(3,"label",30),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"mat-form-field",31)(7,"mat-select",15,3)(9,"mat-option"),e.nrm(10,"ngx-mat-select-search",16),e.nI1(11,"mytranslate"),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"mat-option",17),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.DNE(16,Xe,3,4,"mat-option",18),e.k0s()()(),e.j41(17,"div",32)(18,"label",33),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"mat-form-field",31)(22,"mat-select",15,4)(24,"mat-option"),e.nrm(25,"ngx-mat-select-search",16),e.nI1(26,"mytranslate"),e.nI1(27,"mytranslate"),e.k0s(),e.j41(28,"mat-option",17),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.DNE(31,Ue,3,4,"mat-option",18),e.k0s()()(),e.DNE(32,We,15,23,"div",34),e.k0s(),e.DNE(33,He,4,3,"div",35),e.k0s()),2&n){const i=e.sdS(8),t=e.sdS(23),o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngClass",e.eq3(37,De,!o.isMobileDevice)),e.R7$(3),e.SpI(" ",e.bMT(5,21,"lang_auto_khoi_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(11,23,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(12,25,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(15,27,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(i.mergeSchoolLevel(o.schoolLevelObjs),"key")),e.R7$(),e.Y8G("ngClass",e.l_i(39,L,o.isMobileDevice,!o.isMobileDevice)),e.R7$(2),e.SpI(" ",e.bMT(20,29,"lang_auto_mon_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(26,31,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(27,33,"lang_search_not_found")),e.Y8G("formControl",t.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(30,35,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",t.filter(o.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",o.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.invalid||o.form.controls.schoolSubject.invalid)}}function et(n,s){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function tt(n,s){if(1&n&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function nt(n,s){if(1&n&&(e.qex(0),e.j41(1,"mat-option",22),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(3,2,i.title)," ")}}function ot(n,s){if(1&n&&(e.j41(0,"div",36)(1,"label",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"mat-form-field",31)(5,"mat-select",15,5)(7,"mat-option"),e.nrm(8,"ngx-mat-select-search",16),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-option",22),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,nt,4,4,"ng-container",25),e.k0s()()()),2&n){const i=e.sdS(6),t=e.XpG(2);e.Y8G("ngClass",e.l_i(18,L,t.isMobileDevice,!t.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(21,_e,t.isMobileDevice?"54px":"")),e.R7$(),e.SpI(" ",e.bMT(3,10,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",t.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(9,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(10,14,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(13,16,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",i.filter(t.listBookObjs,"title"))}}function it(n,s){1&n&&(e.j41(0,"div",38)(1,"div",27),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function st(n,s){if(1&n&&(e.j41(0,"form",9)(1,"div",39)(2,"div",29)(3,"mat-form-field",31)(4,"mat-select",15,3)(6,"mat-option"),e.nrm(7,"ngx-mat-select-search",16),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"mat-option",17),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.DNE(13,et,3,4,"mat-option",18),e.k0s()()(),e.j41(14,"div",32)(15,"mat-form-field",31)(16,"mat-select",15,4)(18,"mat-option"),e.nrm(19,"ngx-mat-select-search",16),e.nI1(20,"mytranslate"),e.nI1(21,"mytranslate"),e.k0s(),e.j41(22,"mat-option",17),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.DNE(25,tt,3,4,"mat-option",18),e.k0s()()(),e.DNE(26,ot,15,23,"div",34),e.k0s(),e.DNE(27,it,4,3,"div",35),e.k0s()),2&n){const i=e.sdS(5),t=e.sdS(17),o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngClass",e.eq3(31,$e,!o.useDynamicMobile||o.useDynamicMobile&&!o.isMobileDevice)),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(8,19,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(9,21,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(12,23,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(i.mergeSchoolLevel(o.schoolLevelObjs),"key")),e.R7$(),e.Y8G("ngClass",e.l_i(33,L,o.isMobileDevice,!o.isMobileDevice)),e.R7$(2),e.Y8G("formControl",o.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(20,25,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(21,27,"lang_search_not_found")),e.Y8G("formControl",t.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(24,29,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",t.filter(o.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",o.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.invalid||o.form.controls.schoolSubject.invalid)}}let G=(()=>{var n;class s extends j.H{getChangeKey(){let t=this.form.getRawValue();return t.schoolLevel+"_"+t.schoolSubject+"_"+(t.bookIdFormControl??0)}updateLevelAndSubjectToForm(t,o,a){let r=this.commonService.concatMultipleArray(this.schoolLevelObjs.map(O=>O.schoolSubjectObjs)).find(O=>O.id==o)?.key,u=this.schoolLevelObjs.find(O=>O.schoolLevel?.id==t);this.schoolSubjectObjs=u?.schoolSubjectObjs??[];let C=this.schoolSubjectObjs.find(O=>O.id==o||O.key?.toLowerCase()==r?.toLowerCase());t=u?.schoolLevel?.id??0,o=C?.id??0,a=a??0;let T=this.form.getRawValue();T.schoolLevel!=t&&t&&this.form.controls.schoolLevel.setValue(t,{emitEvent:!1}),T.schoolSubject!=o&&o&&this.form.controls.schoolSubject.setValue(o,{emitEvent:!1}),T.bookIdFormControl!=a&&a&&this.form.controls.bookIdFormControl?.setValue(a,{emitEvent:!1}),(0!==t||0!==o||0!==a)&&this.getBookObjs(t,o,a,O=>{let ee=this.form.getRawValue();if(ee.schoolLevel!=O.schoolLevelId||ee.schoolSubject!=O.schoolSubjectId||(ee.bookIdFormControl??0)!=O.bookId)return;this.listBookObjs=O.books;let Fe=this.listBookObjs.find(ha=>ha.id==a);a=Fe?.id??0,this.showBookData&&ee.bookIdFormControl!=a&&this.form.controls.bookIdFormControl?.setValue(a,{emitEvent:!1});let Ee=this.getChangeKey();this.lastChangeKey!=Ee&&(this.lastChangeKey=Ee,this.changeDataEvent.emit({bookName:Fe?.title}))})}getBookObjs(t,o,a,r){if(!this.showBookData)return r({schoolLevelId:t,schoolSubjectId:o,bookId:a,books:[]});if(!t||!o)return r({schoolLevelId:t,schoolSubjectId:o,bookId:a,books:[]});let u=this.listBookByLevelSubject.find(C=>C.levelId==t&&C.subjectId==o);if(null!=u)return r({schoolLevelId:t,schoolSubjectId:o,bookId:a,books:u.books});this.isLoadingBook=!0,this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetElearningBookGet(t,o)).subscribe(C=>{if(!C.success)return this.isLoadingBook=!1,this.errorStatusObj(C.message,!0),r({schoolLevelId:t,schoolSubjectId:o,bookId:a,books:[]});C.data=C.data?.filter(T=>T.isActive),this.listBookByLevelSubject.push({levelId:t,subjectId:o,books:C.data??[]}),this.isLoadingBook=!1,r({schoolLevelId:t,schoolSubjectId:o,bookId:a,books:C.data??[]})}))}getSubjectAndLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);if(this.schoolLevelObjs=t.data?.schoolLevelSubjectObjs??[],this.removeLevelSubjectWithOtherName&&(this.schoolLevelObjs=this.schoolLevelObjs.filter(o=>"azt_lang_core_khoi_khac"!=o.schoolLevel?.key),this.schoolLevelObjs.forEach(o=>o.schoolSubjectObjs=o.schoolSubjectObjs.filter(a=>"azt_auto_lang_khac"!=a.key))),this.useExamSchoolLogData&&0==this.form.controls.schoolLevel.value)return this.updateLevelAndSubjectToForm(t.data?.examSchoolLogObj?.lastSchoolLevelId??0,t.data?.examSchoolLogObj?.lastSchoolSubjectId??0,void 0),this.stopStatusObj();if(this.useFirstAsDefault&&0==this.form.controls.schoolLevel.value){let o=this.commonService.getLastOfArray(this.schoolLevelObjs),a=this.commonService.getFirstOfArray(o?.schoolSubjectObjs??[]);if(o&&a)return this.updateLevelAndSubjectToForm(o.schoolLevel?.id??0,a.id,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}this.updateLevelAndSubjectToForm(this.form.controls.schoolLevel.value,this.form.controls.schoolSubject.value,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}))}listenChangeLevelSubjectBook(){this.form.controls.schoolLevel.valueChanges.subscribe(t=>{let o=this.form.getRawValue();this.updateLevelAndSubjectToForm(o.schoolLevel,o.schoolSubject,o.bookIdFormControl)}),this.form.controls.schoolSubject.valueChanges.subscribe(t=>{let o=this.form.getRawValue();this.updateLevelAndSubjectToForm(o.schoolLevel,o.schoolSubject,o.bookIdFormControl)}),this.form.controls.bookIdFormControl?.valueChanges.subscribe(t=>{let o=this.form.getRawValue();this.updateLevelAndSubjectToForm(o.schoolLevel,o.schoolSubject,o.bookIdFormControl)})}ngOnInit(){this.getSubjectAndLevel(),this.listenChangeLevelSubjectBook()}constructor(t,o){super(),(0,l.A)(this,"commonListService",void 0),(0,l.A)(this,"aiElearningService",void 0),(0,l.A)(this,"form",void 0),(0,l.A)(this,"removeLevelSubjectWithOtherName",!1),(0,l.A)(this,"showBookData",!1),(0,l.A)(this,"useExamSchoolLogData",!1),(0,l.A)(this,"useFirstAsDefault",!1),(0,l.A)(this,"useDynamicMobile",!1),(0,l.A)(this,"layout","default"),(0,l.A)(this,"changeDataEvent",new e.bkB),(0,l.A)(this,"schoolLevelObjs",[]),(0,l.A)(this,"schoolSubjectObjs",[]),(0,l.A)(this,"listBookObjs",[]),(0,l.A)(this,"lastChangeKey",void 0),(0,l.A)(this,"listBookByLevelSubject",[]),(0,l.A)(this,"isLoadingBook",!1),this.commonListService=t,this.aiElearningService=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(Ge.Nz),e.rXU(w.T5))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["config-level-subject-book"]],inputs:{form:"form",removeLevelSubjectWithOtherName:"removeLevelSubjectWithOtherName",showBookData:"showBookData",useExamSchoolLogData:"useExamSchoolLogData",useFirstAsDefault:"useFirstAsDefault",useDynamicMobile:"useDynamicMobile",layout:"layout"},outputs:{changeDataEvent:"changeDataEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:10,vars:3,consts:[["defaultLayoutTpl",""],["labelInOneLineTpl",""],["labelHiddenTpl",""],["searchInListSchoolLevel","searchInList"],["searchInListSchoolSubject","searchInList"],["searchInListBook","searchInList"],[1,"config-level-subject"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],["for","schoolLevel",1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","schoolSubject",1,"form-label","flex","items-center"],["class","col-span-12",4,"ngIf"],["class","col-span-12","style","margin-top: -20px",4,"ngIf"],[3,"value"],[1,"col-span-12"],["for","bookSelected",1,"form-label","flex","items-center"],[4,"ngFor","ngForOf"],[1,"col-span-12",2,"margin-top","-20px"],[1,"text-xs","mt-2","text-danger"],["id","azt-config-level-subject",1,"grid-cols-12","gap-4",3,"ngClass"],[1,"col-span-12","sm:col-span-3","flex","items-center"],["for","schoolLevel",1,"mr-1","flex-none","whitespace-nowrap"],["appearance","outline",1,"box",2,"width","100%"],[1,"col-span-12","sm:col-span-4","flex","items-center",3,"ngClass"],["for","schoolSubject",1,"mr-1","whitespace-nowrap","flex-none"],["class","col-span-5 flex items-center",3,"ngClass",4,"ngIf"],["style","margin-top: -20px",4,"ngIf"],[1,"col-span-5","flex","items-center",3,"ngClass"],["for","bookSelected",1,"mr-1","flex-none","whitespace-nowrap",3,"ngStyle"],[2,"margin-top","-20px"],["id","azt-config-level-subject",1,"justify-end","ml-auto",3,"ngClass"]],template:function(t,o){1&t&&(e.j41(0,"div",6),e.DNE(1,Be,1,1,"ng-container",7)(2,Pe,1,1,"ng-container",7)(3,Ne,1,1,"ng-container",7),e.k0s(),e.DNE(4,Ve,36,35,"ng-template",null,0,e.C5r)(6,Ze,34,42,"ng-template",null,1,e.C5r)(8,st,28,36,"ng-template",null,2,e.C5r)),2&t&&(e.R7$(),e.Y8G("ngIf","default"==o.layout),e.R7$(),e.Y8G("ngIf","label_in_one_line"==o.layout),e.R7$(),e.Y8G("ngIf","label_hidden"==o.layout))},dependencies:[y.An,y.U9,N.x,d.MD,d.YU,d.Sq,d.bT,d.T3,d.B3,c.X1,c.qT,c.BC,c.cb,c.l_,c.j4,g.iI,c.YN,_.wp,v.s,z.wT,Q.rl,M.VO,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();var k=p(18068),A=p(29097),pe=p(80826),K=p(14823);const at=n=>({"border-b":n}),lt=()=>({"mr-2":!0}),me=()=>({"text-pending":!0});function rt(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",5),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function ct(n,s){1&n&&(e.j41(0,"div",14)(1,"h3",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")))}function dt(n,s){1&n&&(e.j41(0,"div",14),e.nrm(1,"azt-loading-ui",16),e.j41(2,"h3",15),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&n&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_cms_common_loading")))}function ut(n,s){if(1&n&&(e.qex(0),e.DNE(1,ct,4,3,"div",13)(2,dt,5,3,"div",13),e.bVm()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(i.loadingExamObjs||i.form.controls.schoolLevel.value&&i.form.controls.schoolSubject.value)),e.R7$(),e.Y8G("ngIf",i.loadingExamObjs)}}function _t(n,s){1&n&&(e.nrm(0,"lucide-icon",28),e.nI1(1,"mytranslate")),2&n&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_published")),e.Y8G("ngClass",e.lJ4(4,me)))}function pt(n,s){1&n&&(e.nrm(0,"lucide-icon",29),e.nI1(1,"mytranslate")),2&n&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_unpublished")),e.Y8G("ngClass",e.lJ4(4,me)))}function mt(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),e.DNE(4,_t,2,5,"lucide-icon",22)(5,pt,2,5,"lucide-icon",23),e.k0s(),e.j41(6,"div",24,2)(8,"span"),e.EFF(9),e.k0s()()()(),e.j41(10,"div",25)(11,"button",26),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.goAnalyzeExam(o.id))}),e.nrm(12,"lucide-icon",27),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()}if(2&n){const i=s.$implicit,t=s.last,o=e.sdS(7),a=e.XpG(3);e.Y8G("ngClass",e.eq3(15,at,!t)),e.R7$(4),e.Y8G("ngIf",i.isPublished),e.R7$(),e.Y8G("ngIf",!i.isPublished),e.R7$(),e.Mz_("matTooltip"," ",i.name,""),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.ZvI("mb-0 d-block ",a.isMobileWebView?"azt-wv-item-name":"",""),e.R7$(),e.JRh(i.name),e.R7$(3),e.Y8G("ngClass",e.lJ4(17,lt)),e.R7$(),e.SpI(" ",e.bMT(14,13,"lang_core_auto_analyze")," ")}}function gt(n,s){if(1&n&&e.DNE(0,mt,15,18,"div",17),2&n){const i=e.XpG(2);e.Y8G("ngForOf",i.listExamObjs)}}function ft(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"h3",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",9)(6,"config-level-subject-book",10),e.bIt("changeDataEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.getExamObjsByLevelSubject())}),e.k0s()(),e.j41(7,"div",11),e.DNE(8,ut,3,2,"ng-container",12)(9,gt,1,1,"ng-template",null,1,e.C5r),e.k0s()()}if(2&n){const i=e.sdS(10),t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,7,"lang_core_suggest_objective_and_difficulty_level")),e.R7$(3),e.Y8G("form",t.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useExamSchoolLogData",!1),e.R7$(2),e.Y8G("ngIf",!t.form.controls.schoolLevel.value||!t.form.controls.schoolSubject.value||t.loadingExamObjs)("ngIfElse",i)}}let bt=(()=>{var n;class s extends j.H{getExamObjsByLevelSubject(){!this.form.controls.schoolLevel.value||!this.form.controls.schoolSubject.value||this.getDataExamObjs()}goAnalyzeExam(t){this.myNavigationWithQueryString("/azota-tools/auto-suggestion-for-one-exam/"+t+"/"+(this.form.controls.schoolLevel?.value??0)+"/"+(this.form.controls.schoolSubject?.value??0),"?backTo="+encodeURIComponent("/azota-tools/auto-suggestion-for-exams"))}getDataExamObjs(){let t=this.form.controls.schoolLevel?.value??0,o=this.form.controls.schoolSubject?.value??0;this.loadingExamObjs=!0,this.waitDestroy(this.adminExamService.apiAdminExamGetTopExamsGet(t,o).subscribe(a=>{if(!a.success)return this.loadingExamObjs=!1,this.errorStatusObj(a.message,!0);this.listExamObjs=a.data?.objs??[],this.loadingExamObjs=!1,this.successStatusObj()}))}ngOnInit(){this.initStatusObj(),this.getDataExamObjs()}constructor(t){super(),(0,l.A)(this,"adminExamService",void 0),(0,l.A)(this,"backTo","/super-role/admin-tool"),(0,l.A)(this,"form",void 0),(0,l.A)(this,"listExamObjs",[]),(0,l.A)(this,"loadingExamObjs",!1),this.adminExamService=t,this.form=new c.gE({schoolLevel:new c.MJ(0,{nonNullable:!0}),schoolSubject:new c.MJ(0,{nonNullable:!0})})}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(pe.g0))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["auto-suggestion-for-exams"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],["showData",""],["c","isDisabled"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-2","box","p-2"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useExamSchoolLogData"],[1,"box","mt-2","relative","py-5","px-5",2,"height","calc(100vh - 250px)","overflow-y","auto"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"mr-2"],["class","border-slate-200 py-2 flex justify-between",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-slate-200","py-2","flex","justify-between",3,"ngClass"],[1,"flex","align-center"],[1,"title-exam","flex","items-center","clickable","ml-3","w-52","sm:w-full"],[1,"image-fit"],["name","file-check","size","24",3,"matTooltip","ngClass",4,"ngIf"],["name","file","size","24",3,"matTooltip","ngClass",4,"ngIf"],[1,"ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"ml-auto"],[1,"btn","btn-primary-soft",3,"click"],["name","pie-chart","size","20",3,"ngClass"],["name","file-check","size","24",3,"matTooltip","ngClass"],["name","file","size","24",3,"matTooltip","ngClass"]],template:function(t,o){if(1&t&&(e.j41(0,"teacher-layout",3),e.DNE(1,rt,1,1,"azt-loading-effect",4)(2,ft,11,9,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",a)}},dependencies:[Me.f,I.Q,A.K,G,k.R,d.MD,d.YU,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,K.oV,m.flO,m.WGl,h.L,f.Id,b.k],encapsulation:2})),s})();var Y=p(53688),D=p(86020),q=p(21413);let te=(()=>{var n;class s{constructor(){(0,l.A)(this,"checkQuestion",new q.B)}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(t){this.checkQuestion.next(t)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})();var ge=p(83186),$=p(60293),B=p(93881),ne=p(23360);let V=(()=>{var n;class s{constructor(){(0,l.A)(this,"commonService",(0,e.WQX)(B.R)),(0,l.A)(this,"sAztAnswerTypeService",(0,e.WQX)(ne._))}changeObjectiveForCommonQuestion(t,o){return t.knowledgeId=o.id,t.objectiveId=o.objectiveId,t.ebankFrameId=o.id,t}changeObjectiveForTrueFalseQuestion(t,o,a){return t.configAnswers.find(r=>r.key==a)?(t.configAnswers.forEach(r=>{r.key==a&&(r.objectiveId=o?.objectiveId,r.knowledgeId=o?.id,r.ebankFrameId=o.id)}),t):(t.configAnswers.push({key:a,objectiveId:o.objectiveId,knowledgeId:o.id,ebankFrameId:o.id}),t)}changeTagForCommonQuestion(t,o){return t.tags=o,t}changeTagForTrueFalseQuestion(t,o,a){let r=this.commonService.getFirstOfArray(a);return t.configAnswers.find(u=>u.key==o)?(t.configAnswers.forEach(u=>{u.key==o&&(u.tagId=r?.id,u.tagName=r?.name,u.tagCode=r?.code)}),t):(t.configAnswers.push({key:o,knowledgeId:void 0,objectiveId:void 0,tagCode:r?.code,tagId:r?.id,tagName:r?.name}),t)}changeTagForCommonQuestView(t,o){return t.tag=o,t}changeTagForTrueFalseQuestView(t,o,a){let r=this.commonService.getFirstOfArray(a);return t.configAnswers||(t.configAnswers=[]),t.configAnswers.find(u=>u.key==o)?(t.configAnswers.forEach(u=>{u.key==o&&(u.tagId=r?.id,u.tagName=r?.name,u.tagCode=r?.code)}),t):(t.configAnswers.push({key:o,knowledgeId:void 0,objectiveId:void 0,tagCode:r?.code,tagId:r?.id,tagName:r?.name}),t)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})();var oe=p(18359),ie=p(71985),fe=p(44668);let R=(()=>{var n;class s{constructor(){(0,l.A)(this,"subscriptions",new oe.yU),(0,l.A)(this,"aiElearningService",(0,e.WQX)(w.T5)),(0,l.A)(this,"commonService",(0,e.WQX)(B.R)),(0,l.A)(this,"mapCacheSubscribers$",new Map)}getKnowledgeByApi(t,o,a,r){let u=this.getCacheKey(t,o,a,r),C=this.mapCacheSubscribers$.get(u);return C||(C=new ie.c(T=>{this.subscriptions.add(this.commonService.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(t,o,a,r||void 0)).subscribe(O=>{if(!O.success)return this.mapCacheSubscribers$.set(u,null),T.next({errorMessage:O.message,data:void 0}),void T.complete();T.next({errorMessage:void 0,data:{objs:O.data?.nodes??[]}}),T.complete()}))}).pipe((0,fe.t)(1)),this.mapCacheSubscribers$.set(u,C),C)}getObjByObjectiveId(t,o){for(var a of t){if(a.objectiveId==o)return a;let r=this.getObjByObjectiveId(a.children,o);if(null!=r)return r}}getObjById(t,o){for(var a of t){if(a.id==o)return a;let r=this.getObjById(a.children,o);if(null!=r)return r}}getObjByKnowledgeIdOrObjectiveId(t,o,a){for(var r of t){if(r.knowledgeId==o||r.objectiveId==a)return r;let u=this.getObjByKnowledgeIdOrObjectiveId(r.children,o,a);if(null!=u)return u}}getAllObjectiveObjs(t,o){return t.forEach(a=>{a.objectiveId&&o.push({id:a.objectiveId,name:a.title,questionHistories:[]}),a.children.length&&(o=o.concat(this.getAllObjectiveObjs(a.children,[])))}),o}getCacheKey(t,o,a,r){return`${t}_${o}_${a?"true":"false"}_${r??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})();var ht=p(92771),vt=p(88141),Ct=p(73028),jt=p(56977);class Ot{addTask(s,i){if(null!=i&&this.baseResultCache.has(i))return this.baseResultCache.get(i).asObservable();const t=new ht.m(1);return null!=i&&this.baseResultCache.set(i,t),this.baseTaskQueue$?.next(s.pipe((0,vt.M)({next:o=>{!o.success&&null!=i&&this.baseResultCache.delete(i),t.next(o)},error:()=>{null!=i&&this.baseResultCache.delete(i),t.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),t.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new q.B,this.baseSubscription=new oe.yU,this.initializeQueue()}resetConcurrency(s){this.baseLimitConcurrency!=s&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new q.B;const s=this.baseTaskQueue$.pipe((0,Ct.Z)(i=>i.pipe((0,jt.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:i=>{},error:i=>{},complete:()=>{}});this.baseSubscription.add(s)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(s=10){(0,l.A)(this,"baseLimitConcurrency",void 0),(0,l.A)(this,"baseTaskQueue$",null),(0,l.A)(this,"baseDestroy$",new q.B),(0,l.A)(this,"baseSubscription",new oe.yU),(0,l.A)(this,"baseResultCache",new Map),this.baseLimitConcurrency=s,this.initializeQueue()}}var Tt=p(9618),wt=p(72241);let X=(()=>{var n;class s extends Ot{callApiToGuestKnowledge(t,o,a,r){if(""==this.standardQuestionData(o))return a(void 0,void 0,void 0);let C={questionId:t?o.questionId:void 0,text:t?void 0:this.standardQuestionData(o),levelId:o.levelId,subjectId:o.subjectId,ebankId:o.ebankId},T=this.aiService.apiAiPredictQuestionKnowledgePost(C);this.addTask(T,this.sAztEncryptService.createMd5(this.commonService.serializeJson(C))).subscribe(O=>O.success?"vip_required"==O.errorCode?r("lang_core_need_vip_upgrade"):!O.data||O.data.score<this.AI_MIN_SCORE?a(void 0,void 0,void 0):void a(O.data.knowledgeId,O.data.objectiveId,O.data.tagId):r(O.message))}standardQuestionData(t){let o=this.commonService.parseQuestionContent(t.questionContent);return o+=" "+this.commonService.parseQuestionContent(t.answerContents.join(" - ")),o.trim()}constructor(){super(2),(0,l.A)(this,"commonService",(0,e.WQX)(B.R)),(0,l.A)(this,"aiService",(0,e.WQX)(Tt.Ee)),(0,l.A)(this,"sAztEncryptService",(0,e.WQX)(wt.v)),(0,l.A)(this,"AI_MIN_SCORE",2.8)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})();const xt=()=>({"text-warning":!0,"mr-1":!0}),At=()=>({"mr-1":!0});function kt(n,s){1&n&&e.nrm(0,"azt-loading-ui",4),2&n&&e.Y8G("size",16)}function It(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",8)(1,"span",9),e.nrm(2,"lucide-icon",10),e.j41(3,"span",11),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"a",12),e.nrm(7,"lucide-icon",13),e.j41(8,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.guessKnowledgeUnit())}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&n&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(8,xt)),e.R7$(2),e.JRh(e.bMT(5,4,"lang_knowledge_suggest_api_call_again")),e.R7$(3),e.Y8G("ngClass",e.lJ4(9,At)),e.R7$(2),e.JRh(e.bMT(10,6,"lang_auto_thu_lai")))}function St(n,s){if(1&n&&(e.j41(0,"div",8),e.nrm(1,"azt-dynamic-hook",15),e.nI1(2,"mytranslate"),e.k0s()),2&n){let i;const t=e.XpG(3);e.R7$(),e.Y8G("content",null!==(i=null==t.currentKnowledgeTreeNode?null:t.currentKnowledgeTreeNode.title)&&void 0!==i?i:e.bMT(2,1,"long_core_chon_khung_kien_thuc"))}}function yt(n,s){if(1&n&&(e.qex(0),e.j41(1,"div",6),e.DNE(2,It,11,10,"div",7)(3,St,3,3,"div",7),e.k0s(),e.bVm()),2&n){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf","callApiFail"==i.currentStatus),e.R7$(),e.Y8G("ngIf",null==i.currentStatus)}}function Ft(n,s){1&n&&(e.j41(0,"div",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function Et(n,s){if(1&n&&e.DNE(0,yt,4,2,"ng-container",5)(1,Ft,3,3,"ng-template",null,1,e.C5r),2&n){const i=e.sdS(2),t=e.XpG();e.Y8G("ngIf",t.knowledgeObjs.length>0)("ngIfElse",i)}}let Rt=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"levelId",void 0),(0,l.A)(this,"subjectId",void 0),(0,l.A)(this,"selectKnowledgeEmit",new e.bkB),(0,l.A)(this,"sAztChangeObjectiveTagForQuestionService",(0,e.WQX)(V)),(0,l.A)(this,"sAztKnowledgeObjectiveService",(0,e.WQX)(R)),(0,l.A)(this,"sAztControlSuggestionKnowledgeUnitService",(0,e.WQX)(X)),(0,l.A)(this,"ebankFrameId",0),(0,l.A)(this,"currentKnowledgeTreeNode",void 0),(0,l.A)(this,"currentStatus",void 0),(0,l.A)(this,"knowledgeObjs",[])}guessKnowledgeUnit(){if(this.ebankFrameId||this.currentKnowledgeTreeNode)return;this.currentStatus="loadingSuggestion";let t={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.isExistInArray(this.questionObj.answerResult,o.key)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,t,(o,a,r)=>{this.updateKnowledgeAndObjective(a??0,!0),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}updateKnowledgeAndObjective(t,o){this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(this.knowledgeObjs,t),this.currentKnowledgeTreeNode&&(this.ebankFrameId=this.currentKnowledgeTreeNode.id,this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForCommonQuestion(this.questionObj,{id:this.currentKnowledgeTreeNode.id,objectiveId:this.currentKnowledgeTreeNode.objectiveId}),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){super.ngOnInit(),this.ebankFrameId=this.questionObj.ebankFrameId??0,this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.levelId,this.subjectId,!1,void 0).subscribe(t=>{if(t.errorMessage||!t.data)return this.errorStatusObj(t.errorMessage??"",!0);this.knowledgeObjs=t.data.objs,this.updateKnowledgeAndObjective(this.ebankFrameId,!1),this.guessKnowledgeUnit()})}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-admin-common-question-knowledge-unit-to-auto-suggestion"]],inputs:{questionObj:"questionObj",levelId:"levelId",subjectId:"subjectId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["notLoading",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[2,"padding","5px 0px"],["class","flex",4,"ngIf"],[1,"flex"],[2,"display","inline-flex","align-items","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"ml-2","link__hover","link__color",2,"display","inline-flex","align-items","center"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"clickable",3,"click"],[3,"content"],[1,"pl-3","pb-3"]],template:function(t,o){if(1&t&&(e.j41(0,"div",2),e.DNE(1,kt,1,1,"azt-loading-ui",3)(2,Et,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus)("ngIfElse",a)}},dependencies:[k.R,$.x,d.MD,d.YU,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,f.Id,b.k],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]})),s})();const zt=["*"],Mt=()=>({"text-warning":!0,"mr-1":!0}),Gt=()=>({"mr-1":!0});function Dt(n,s){1&n&&e.nrm(0,"azt-loading-ui",4),2&n&&e.Y8G("size",16)}function $t(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",8)(1,"span",9),e.nrm(2,"lucide-icon",10),e.j41(3,"span",11),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"a",12),e.nrm(7,"lucide-icon",13),e.j41(8,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.guessKnowledgeUnit())}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&n&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(8,Mt)),e.R7$(2),e.JRh(e.bMT(5,4,"lang_knowledge_suggest_api_call_again")),e.R7$(3),e.Y8G("ngClass",e.lJ4(9,Gt)),e.R7$(2),e.JRh(e.bMT(10,6,"lang_auto_thu_lai")))}function Bt(n,s){if(1&n&&(e.j41(0,"div",8),e.nrm(1,"azt-dynamic-hook",15),e.nI1(2,"mytranslate"),e.k0s()),2&n){let i;const t=e.XpG(3);e.R7$(),e.Y8G("content",null!==(i=null==t.currentKnowledgeTreeNode?null:t.currentKnowledgeTreeNode.title)&&void 0!==i?i:e.bMT(2,1,"long_core_chon_khung_kien_thuc"))}}function Pt(n,s){if(1&n&&(e.qex(0),e.j41(1,"div",6),e.DNE(2,$t,11,10,"div",7)(3,Bt,3,3,"div",7),e.k0s(),e.bVm()),2&n){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf","callApiFail"==i.currentStatus),e.R7$(),e.Y8G("ngIf",null==i.currentStatus)}}function Nt(n,s){1&n&&(e.j41(0,"div",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function Qt(n,s){if(1&n&&(e.DNE(0,Pt,4,2,"ng-container",5)(1,Nt,3,3,"ng-template",null,1,e.C5r),e.SdG(3)),2&n){const i=e.sdS(2),t=e.XpG();e.Y8G("ngIf",t.knowledgeObjs.length>0)("ngIfElse",i)}}let Lt=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"currentAnswerKey",void 0),(0,l.A)(this,"levelId",void 0),(0,l.A)(this,"subjectId",void 0),(0,l.A)(this,"selectKnowledgeEmit",new e.bkB),(0,l.A)(this,"sAztChangeObjectiveTagForQuestionService",(0,e.WQX)(V)),(0,l.A)(this,"sAztKnowledgeObjectiveService",(0,e.WQX)(R)),(0,l.A)(this,"sAztControlSuggestionKnowledgeUnitService",(0,e.WQX)(X)),(0,l.A)(this,"currentKnowledgeTreeNode",void 0),(0,l.A)(this,"currentStatus",void 0),(0,l.A)(this,"knowledgeObjs",[]),(0,l.A)(this,"ebankFrameId",void 0)}guessKnowledgeUnit(){if(this.ebankFrameId||this.currentKnowledgeTreeNode)return;this.currentStatus="loadingSuggestion";let t={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,t,(o,a,r)=>{this.updateKnowledgeAndObjective(a,!0),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}updateKnowledgeAndObjective(t,o){this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(this.knowledgeObjs,t??0),this.currentKnowledgeTreeNode&&(this.ebankFrameId=this.currentKnowledgeTreeNode.id,this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForTrueFalseQuestion(this.questionObj,{id:this.ebankFrameId,objectiveId:this.currentKnowledgeTreeNode.objectiveId},this.currentAnswerKey),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){super.ngOnInit(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.levelId,this.subjectId,!1,void 0).subscribe(t=>{if(t.errorMessage||!t.data)return this.errorStatusObj(t.errorMessage??"",!0);this.knowledgeObjs=t.data.objs,this.ebankFrameId=this.questionObj.configAnswers.find(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey))?.objectiveId,this.updateKnowledgeAndObjective(this.ebankFrameId,!1),this.guessKnowledgeUnit()})}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-admin-true-false-question-knowledge-unit-to-auto-suggestion"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",levelId:"levelId",subjectId:"subjectId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:zt,decls:4,vars:2,consts:[["notLoading",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[2,"padding","5px 0px"],["class","flex",4,"ngIf"],[1,"flex"],[2,"display","inline-flex","align-items","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"ml-2","link__hover","link__color",2,"display","inline-flex","align-items","center"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"clickable",3,"click"],[3,"content"],[1,"pl-3","pb-3"]],template:function(t,o){if(1&t&&(e.NAR(),e.j41(0,"div",2),e.DNE(1,Dt,1,1,"azt-loading-ui",3)(2,Qt,4,2,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus)("ngIfElse",a)}},dependencies:[k.R,$.x,d.MD,d.YU,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,f.Id,b.k],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]})),s})();var U=p(26747);let be=(()=>{var n;class s{constructor(){(0,l.A)(this,"questionService",(0,e.WQX)(U.wP)),(0,l.A)(this,"commonService",(0,e.WQX)(B.R)),(0,l.A)(this,"replayCache$",null)}callApiSetTagForTrueFalseQuestion(t,o,a){return new ie.c(r=>{let u=t.configAnswers.find(T=>T.key==o);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:t.id,answers:[{answerKey:o,objectiveId:u?.objectiveId,tag:a?.code??""}]}]}).subscribe(T=>{if(!T)return r.next(!1),r.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),r.next(!0),r.complete()})})}formatTag(t){return t.map(o=>({...o,showName:this.commonService.getValueOfKeyInObject(o,this.commonService.getCurrentLang()+"Name")??o.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new ie.c(t=>{this.questionService.apiQuestionGetTagsGet().subscribe(o=>{if(!o.success)return this.commonService.snackError(o.message);t.next(o.data?.objs?.filter(a=>"VDC"!=a.code)??[]),t.complete()})}).pipe((0,fe.t)(1))),this.replayCache$}findCurrentTag(t,o,a){let r=o.find(C=>this.commonService.compareLowerCase(C.key,a))?.tagId,u=t.find(C=>C.id==r);return u?"azt_lang_tag_"+u.code:""}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})();function Kt(n,s){1&n&&e.nrm(0,"azt-loading-ui",3),2&n&&e.Y8G("size",16)}function Yt(n,s){if(1&n&&(e.j41(0,"span",6),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&n){const i=e.XpG(2);e.FS9("matTooltip",e.bMT(1,2,i.currentQuestionTagName+"_name")),e.R7$(2),e.SpI(" ",e.bMT(3,4,i.currentQuestionTagName)," ")}}function qt(n,s){1&n&&(e.nrm(0,"lucide-icon",9),e.nI1(1,"mytranslate")),2&n&&e.FS9("matTooltip",e.bMT(1,1,"lang_core_nang_vip_de_tu_don_du_doan_ket_qua_can_dat"))}function Vt(n,s){if(1&n&&(e.j41(0,"div",4)(1,"span",7),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,qt,2,3,"lucide-icon",8),e.k0s()),2&n){const i=e.XpG(2);e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),""),e.R7$(2),e.Y8G("ngIf","vipRequired"==i.currentStatus)}}function Xt(n,s){if(1&n&&(e.j41(0,"div",4),e.DNE(1,Yt,4,6,"span",5)(2,Vt,5,4,"ng-template",null,0,e.C5r),e.k0s()),2&n){const i=e.sdS(3),t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentQuestionTagName)("ngIfElse",i)}}let Ut=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"currentQuestionTags",void 0),(0,l.A)(this,"useQuestionIdToSuggestion",void 0),(0,l.A)(this,"levelId",void 0),(0,l.A)(this,"subjectId",void 0),(0,l.A)(this,"sAztChangeObjectiveTagForQuestionService",(0,e.WQX)(V)),(0,l.A)(this,"sAztQuestionTagService",(0,e.WQX)(be)),(0,l.A)(this,"sAztControlSuggestionKnowledgeUnitService",(0,e.WQX)(X)),(0,l.A)(this,"sAztListenQuestionTagChangesService",(0,e.WQX)(te)),(0,l.A)(this,"questionTags",[]),(0,l.A)(this,"viewQuestionTags",void 0),(0,l.A)(this,"currentQuestionTagName",void 0),(0,l.A)(this,"currentStatus",void 0)}setTag(t){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForCommonQuestion(this.questionObj,t),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"common_question",tagType:"CURRENT_QUESTION",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:t}),this.initData()}suggestionTag(){if(this.currentQuestionTagName)return;this.currentStatus="loadingSuggestion";let t={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(this.useQuestionIdToSuggestion,t,(o,a,r)=>{let u=this.questionTags.find(C=>C.id==r);u&&this.setTag([u]),this.currentStatus=void 0},o=>this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail")}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags);let t=this.commonService.getFirstOfArray(this.questionObj.tags??[])?.code;this.currentQuestionTagName=t?"azt_lang_tag_"+t:void 0,this.currentQuestionTagName&&(this.currentStatus=void 0)}ngOnChanges(){this.initData()}ngOnInit(){this.sAztQuestionTagService.getQuestionTags().subscribe(t=>{this.questionTags=t,this.initData(),this.suggestionTag()})}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-admin-common-question-tag-in-analyze-tool"]],inputs:{questionObj:"questionObj",currentQuestionTags:"currentQuestionTags",useQuestionIdToSuggestion:"useQuestionIdToSuggestion",levelId:"levelId",subjectId:"subjectId"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:3,vars:2,consts:[["notHaveQuestionTag",""],["class","ml-3",3,"size",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"ml-3",3,"size"],[1,"flex","items-center"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",3,"matTooltip"],[1,"text-danger"],["size","16","class","text-warning ml-2","name","octagon-alert",3,"matTooltip",4,"ngIf"],["size","16","name","octagon-alert",1,"text-warning","ml-2",3,"matTooltip"]],template:function(t,o){1&t&&(e.j41(0,"span"),e.DNE(1,Kt,1,1,"azt-loading-ui",1)(2,Xt,4,2,"div",2),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus),e.R7$(),e.Y8G("ngIf","callApiFail"==o.currentStatus||"vipRequired"==o.currentStatus||null==o.currentStatus))},dependencies:[k.R,d.MD,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,K.oV,m.flO,m.WGl,h.L,f.Id,b.k],encapsulation:2})),s})();function Jt(n,s){1&n&&e.nrm(0,"azt-loading-ui",3),2&n&&e.Y8G("size",16)}function Wt(n,s){if(1&n&&(e.j41(0,"span",5),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&n){const i=e.XpG(2);e.FS9("matTooltip",e.bMT(1,2,i.currentQuestionTagName+"_name")),e.R7$(2),e.SpI(" ",e.bMT(3,4,i.currentQuestionTagName)," ")}}function Ht(n,s){1&n&&(e.nrm(0,"lucide-icon",9),e.nI1(1,"mytranslate")),2&n&&e.FS9("matTooltip",e.bMT(1,1,"lang_core_nang_vip_de_tu_don_du_doan_ket_qua_can_dat"))}function Zt(n,s){if(1&n&&(e.j41(0,"div",6)(1,"span",7),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Ht,2,3,"lucide-icon",8),e.k0s()),2&n){const i=e.XpG(2);e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),""),e.R7$(2),e.Y8G("ngIf","vipRequired"==i.currentStatus)}}function en(n,s){if(1&n&&(e.qex(0),e.DNE(1,Wt,4,6,"span",4)(2,Zt,5,4,"ng-template",null,0,e.C5r),e.bVm()),2&n){const i=e.sdS(3),t=e.XpG();e.R7$(),e.Y8G("ngIf",t.currentQuestionTagName)("ngIfElse",i)}}let tn=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"currentAnswerKey",void 0),(0,l.A)(this,"levelId",void 0),(0,l.A)(this,"subjectId",void 0),(0,l.A)(this,"sAztChangeObjectiveTagForQuestionService",(0,e.WQX)(V)),(0,l.A)(this,"sAztQuestionTagService",(0,e.WQX)(be)),(0,l.A)(this,"sAztControlSuggestionKnowledgeUnitService",(0,e.WQX)(X)),(0,l.A)(this,"sAztListenQuestionTagChangesService",(0,e.WQX)(te)),(0,l.A)(this,"questionTags",[]),(0,l.A)(this,"viewQuestionTags",void 0),(0,l.A)(this,"currentQuestionTagName",void 0),(0,l.A)(this,"currentStatus",void 0)}setTag(t){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForTrueFalseQuestion(this.questionObj,this.currentAnswerKey,t),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"true_false_question",tagType:"CURRENT_ANSWER",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:t}),this.initData()}suggestionTag(){if(this.currentQuestionTagName)return;this.currentStatus="loadingSuggestion";let t={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,t,(o,a,r)=>{let u=this.questionTags.find(C=>C.id==r);u&&this.setTag([u]),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags),this.currentQuestionTagName=this.sAztQuestionTagService.findCurrentTag(this.questionTags,this.questionObj.configAnswers,this.currentAnswerKey),this.currentQuestionTagName&&(this.currentStatus=void 0)}ngOnChanges(){this.sAztQuestionTagService.getQuestionTags().subscribe(t=>{this.questionTags=t,this.initData()})}ngOnInit(){this.sAztQuestionTagService.getQuestionTags().subscribe(t=>{this.questionTags=t,this.initData(),this.suggestionTag()})}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-admin-true-false-question-tag-in-analyze-tool"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",levelId:"levelId",subjectId:"subjectId"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:3,vars:2,consts:[["notHaveQuestionTag",""],["class","ml-3",3,"size",4,"ngIf"],[4,"ngIf"],[1,"ml-3",3,"size"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center","style","max-width: 100px",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",2,"max-width","100px",3,"matTooltip"],[1,"flex","items-center"],[1,"text-danger"],["size","16","class","text-warning ml-2","name","octagon-alert",3,"matTooltip",4,"ngIf"],["size","16","name","octagon-alert",1,"text-warning","ml-2",3,"matTooltip"]],template:function(t,o){1&t&&(e.j41(0,"span"),e.DNE(1,Jt,1,1,"azt-loading-ui",1)(2,en,4,2,"ng-container",2),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus),e.R7$(),e.Y8G("ngIf","callApiFail"==o.currentStatus||"vipRequired"==o.currentStatus||null==o.currentStatus))},dependencies:[k.R,d.MD,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,K.oV,m.flO,m.WGl,h.L,f.Id,b.k],encapsulation:2})),s})();function nn(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"mytranslate"),e.bVm()),2&n){const i=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.questionObj.answerResult.length?i.questionObj.answerResult.join(" | "):""," ")}}function on(n,s){if(1&n&&(e.qex(0),e.j41(1,"span",5),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&n){const i=s.$implicit,t=e.XpG(3);e.R7$(2),e.Lme("",i.alpha?i.alpha.toLowerCase():i.key?i.key.toLowerCase():i,") - ",e.bMT(3,2,t.questionObj.answerResult.includes(i.alpha?i.alpha:i.key?i.key:"")?"lang_auto_dung":"lang_auto_sai"),"\xa0")}}function sn(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"mytranslate"),e.DNE(3,on,4,4,"ng-container",4),e.bVm()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_dap_an"),": "),e.R7$(2),e.Y8G("ngForOf",i.questionObj.answers)}}function an(n,s){if(1&n&&(e.j41(0,"h2",2),e.DNE(1,nn,3,4,"ng-container",3),e.nI1(2,"isTrueFalseAnswer"),e.DNE(3,sn,4,4,"ng-container",3),e.nI1(4,"isTrueFalseAnswer"),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",!e.bMT(2,2,i.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,4,i.questionObj))}}function ln(n,s){1&n&&(e.j41(0,"h2",2),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}let rn=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionObj",void 0)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-question-answer-view-with-simple-result-box-for-teacher"]],inputs:{questionObj:"questionObj"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["essayAnswer",""],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"lalala","ml-1"]],template:function(t,o){if(1&t&&(e.DNE(0,an,5,6,"h2",1),e.nI1(1,"isEssayAnswer"),e.DNE(2,ln,3,3,"ng-template",null,0,e.C5r)),2&t){const a=e.sdS(3);e.Y8G("ngIf",o.questionObj.answerResult&&!e.bMT(1,2,o.questionObj))("ngIfElse",a)}},dependencies:[d.MD,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.Zm,_.FC,f.Id,b.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']})),s})();const cn=()=>({"mr-1":!0});function dn(n,s){1&n&&(e.j41(0,"span",9),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI("\xa0",e.bMT(2,1,"lang_auto_het_luot"),""))}function un(n,s){if(1&n){const i=e.RV6();e.j41(0,"lucide-icon",15),e.nI1(1,"mytranslate"),e.bIt("click",function(){let o;e.eBV(i);const a=e.XpG().$implicit,r=e.XpG(4);return e.Njj(r.playAudio(r.questionObj.id,null!==(o=a.index)&&void 0!==o?o:0))}),e.k0s()}2&n&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_bat_dau_audio"))}function _n(n,s){if(1&n){const i=e.RV6();e.j41(0,"span",10),e.DNE(1,un,2,3,"lucide-icon",11),e.j41(2,"lucide-icon",12),e.nI1(3,"mytranslate"),e.bIt("click",function(){let o;const a=e.eBV(i).$implicit,r=e.XpG(4);return e.Njj(r.stopAudio(r.questionObj.id,null!==(o=a.index)&&void 0!==o?o:0))}),e.k0s(),e.j41(4,"audio",13),e.nrm(5,"source",14),e.nI1(6,"mycdn"),e.nI1(7,"safe"),e.k0s()()}if(2&n){let i;const t=s.$implicit,o=e.XpG(4);e.Y8G("hidden",!t.status),e.R7$(),e.Y8G("ngIf",!o.checkAudioPlay(o.questionObj.id,null!==(i=t.index)&&void 0!==i?i:0)),e.R7$(),e.FS9("matTooltip",e.bMT(3,6,"lang_auto_ket_thuc")),e.Y8G("ngClass",e.lJ4(12,cn)),e.R7$(2),e.FS9("id",o.isShowList?"audio_list_"+o.questionObj.id+"_"+t.index:"audio_unit_"+o.questionObj.id+"_"+t.index),e.R7$(),e.Y8G("src",e.bMT(7,10,e.bMT(6,8,o.questionObj.attachments[0].url)),e.B4B)}}function pn(n,s){if(1&n&&(e.j41(0,"div",5)(1,"span",6),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,dn,3,3,"span",7)(5,_n,8,13,"ng-template",8),e.k0s()),2&n){const i=e.XpG(3);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_so_luot_nghe"),": "),e.R7$(2),e.Y8G("ngIf",i.questionObj.limitAudio==i.totalLimit),e.R7$(),e.Y8G("ngForOf",i.questionObj.audioLimitObjs)}}function mn(n,s){if(1&n&&(e.j41(0,"div",3),e.DNE(1,pn,6,5,"div",4),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",(null!=i.questionObj.limitAudio?i.questionObj.limitAudio:i.totalLimit+1)<=i.totalLimit)}}function gn(n,s){if(1&n&&(e.j41(0,"div"),e.DNE(1,mn,2,1,"div",2),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.questionObj.attachments&&i.questionObj.attachments.length>0)}}function fn(n,s){if(1&n&&(e.j41(0,"div",17)(1,"audio",18),e.nrm(2,"source",14),e.nI1(3,"mycdn"),e.nI1(4,"safe"),e.k0s()()),2&n){const i=e.XpG(2);e.R7$(),e.FS9("id","audio_"+i.questionObj.id),e.R7$(),e.Y8G("src",e.bMT(4,4,e.bMT(3,2,i.questionObj.attachments[0].url)),e.B4B)}}function bn(n,s){if(1&n&&e.DNE(0,fn,5,6,"div",16),2&n){const i=e.XpG();e.Y8G("ngIf",i.questionObj.attachments&&i.questionObj.attachments.length>0)}}let hn=(()=>{var n;class s extends j.H{haveOnceAudioIsPlaying(){var t=!1;let o=document.getElementsByTagName("audio");for(let a=0;a<o.length;a++)if(o[a].duration>0&&!o[a].paused){t=!0;break}return t}playAudio(t,o){var a=this.isShowList?document.getElementById("audio_list_"+t+"_"+o):document.getElementById("audio_unit_"+t+"_"+o);if(a){if(this.haveOnceAudioIsPlaying())return this.commonService.snackWarning("lang_auto_file_dang_duoc_phat");this.sendAudioEmitter.emit({obj:this.questionObj,play:1,index:o}),a.play()}}stopAudio(t,o){var a=this.isShowList?document.getElementById("audio_list_"+t+"_"+o):document.getElementById("audio_unit_"+t+"_"+o);a&&a.duration>0&&!a.paused&&(a.pause(),a.currentTime=0,a.setAttribute("src",""),this.sendAudioEmitter.emit({obj:this.questionObj,play:0,index:o}))}checkAudioPlay(t,o){var a=this.isShowList?document.getElementById("audio_list_"+t+"_"+o):document.getElementById("audio_unit_"+t+"_"+o);return!!a&&(a.duration>0&&!a.paused||((a.ended||a.currentTime>0&&a.paused)&&(a.currentTime=0,a.setAttribute("src",""),this.sendAudioEmitter.emit({obj:this.questionObj,play:0,index:o})),!1))}ngOnInit(){super.ngOnInit()}constructor(t){super(),(0,l.A)(this,"commonService",void 0),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"totalLimit",0),(0,l.A)(this,"isShowList",!0),(0,l.A)(this,"sendAudioEmitter",new e.bkB),this.commonService=t}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(B.R))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-test-audio-ui"]],inputs:{questionObj:"questionObj",totalLimit:"totalLimit",isShowList:"isShowList"},outputs:{sendAudioEmitter:"sendAudioEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["NormalAudio",""],[4,"ngIf","ngIfElse"],["class","text-left ml-auto mr-auto",4,"ngIf"],[1,"text-left","ml-auto","mr-auto"],["class","limit_audio",4,"ngIf"],[1,"limit_audio"],[1,"mb-0",2,"font-size","14px","font-weight","400"],["class","mb-0","style","font-size: 14px; font-weight: 450;color: #da0522 ",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-0",2,"font-size","14px","font-weight","450","color","#da0522"],[1,"audio-control",3,"hidden"],["name","circle-play","size","24","style","vertical-align: middle; line-height: 1; color: #000",3,"matTooltip","click",4,"ngIf"],["name","trash-2","size","24",2,"vertical-align","middle","line-height","1","color","#da0522",3,"click","ngClass","matTooltip"],["preload","true",3,"id"],[3,"src"],["name","circle-play","size","24",2,"vertical-align","middle","line-height","1","color","#000",3,"click","matTooltip"],["class","text-center ml-auto mr-auto",4,"ngIf"],[1,"text-center","ml-auto","mr-auto"],["controls","","preload","true",2,"margin-left","10px","margin-right","10px","max-width","70%",3,"id"]],template:function(t,o){if(1&t&&e.DNE(0,gn,2,1,"div",1)(1,bn,1,1,"ng-template",null,0,e.C5r),2&t){const a=e.sdS(2);e.Y8G("ngIf",o.totalLimit>0)("ngIfElse",a)}},dependencies:[d.MD,d.YU,d.Sq,d.bT,c.X1,g.iI,c.YN,_.nf,_.wp,v.s,K.oV,m.flO,m.WGl,h.L,_.JI,f.Id,b.k],styles:[".limit_audio[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.audio-control[_ngcontent-%COMP%]{border-radius:50%;background-color:#f0f3f4;color:#000;padding:5px;height:35px;width:35px;margin-left:5px;cursor:pointer;text-align:center}"]})),s})();var vn=p(99323),P=p(90623);let he=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionRenderService",(0,e.WQX)(P.g)),(0,l.A)(this,"sAztAnswerTrueFalseService",(0,e.WQX)(vn.j)),(0,l.A)(this,"isDestroyed",!1),(0,l.A)(this,"isInitData",!1),(0,l.A)(this,"followerRender",void 0),(0,l.A)(this,"baseQuestionObj",void 0),(0,l.A)(this,"renderConfigObj",void 0)}startRenderQuestion(t){if(this.renderConfigObj.disableRender)return this.emitHaveRended(void 0);t&&!this.renderConfigObj.isFirstRender||(t&&this.renderConfigObj.isFirstRender&&(this.renderConfigObj.isFirstRender=!1,this.followerRender.doneItemPartQuest()),this.questionRenderService.parseRenderQuestion(this.baseQuestionObj,this.renderConfigObj.configRenderService).then(()=>{this.baseQuestionObj.answersOrigin=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.baseQuestionObj.answers,!0),this.emitHaveRended(void 0)}).catch(o=>{this.emitHaveRended(o.message)}))}emitHaveRended(t){if(!this.isDestroyed&&t)return this.showErrorSnack(t)}initData(t,o,a){this.renderConfigObj=t,this.followerRender=o,this.baseQuestionObj=a,this.isInitData=!0}reRenderContent(){this.isInitData&&this.startRenderQuestion(!1)}ngDoCheck(){if(!this.isInitData||this.renderConfigObj.isRenderElement)return;let t=document.getElementById("question_render_element_"+this.baseQuestionObj.id);if(!t)return;let o=t.getAttribute("start_loading");(this.renderConfigObj.disableLazy||o&&"true"==o)&&(this.renderConfigObj.isRenderElement||(this.startRenderQuestion(!0),this.renderConfigObj.isRenderElement=!0))}ngOnDestroy(){this.isDestroyed=!0,super.ngOnDestroy()}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["ng-component"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(t,o){},dependencies:[d.MD,c.X1,g.iI,c.YN,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();class ve{constructor(s,i,t){(0,l.A)(this,"mathJaxImage",!1),(0,l.A)(this,"disableLazy",!1),(0,l.A)(this,"disableRender",!1),(0,l.A)(this,"isFirstRender",!0),(0,l.A)(this,"isRenderElement",!1),(0,l.A)(this,"configRenderService",new D.y),this.disableLazy=s,this.disableRender=i,this.mathJaxImage=t,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg")}}class E{constructor(){(0,l.A)(this,"totalQuestionRender",0),(0,l.A)(this,"numFollow",{renderDone:{num:0,isRun:!1},firstDone:{num:0,isRun:!1},startDone:{num:0,isRun:!1}})}checker(){this.totalQuestionRender===this.numFollow.renderDone.num&&!this.numFollow.renderDone.isRun&&(this.numFollow.renderDone.isRun=!0),this.totalQuestionRender===this.numFollow.firstDone.num&&!this.numFollow.firstDone.isRun&&(this.numFollow.firstDone.isRun=!0)}setNumQuest(s){this.totalQuestionRender=s}doneItemPartQuest(){this.numFollow.firstDone.num++,this.checker()}}let Cn=(()=>{var n;class s{constructor(){(0,l.A)(this,"observer",void 0),this.observer=new IntersectionObserver(t=>{t.forEach(o=>{const a=o.target;o.isIntersecting?(this.reUpdateHeightAttribute(a),a.setAttribute("start_loading","true")):a.setAttribute("start_loading","false")})})}reUpdateHeightAttribute(t){const o=t.getBoundingClientRect();o.height>0&&t.setAttribute("data-current-height",o.height+"px")}observe(t){this.observer.observe(t)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})(),J=(()=>{var n;class s{constructor(t,o){(0,l.A)(this,"injector",void 0),(0,l.A)(this,"el",void 0),this.injector=t,this.el=o;const a=this.el.nativeElement;this.injector.get(Cn).observe(a)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(e.zZn),e.rXU(e.aKT))}),(0,l.A)(s,"\u0275dir",e.FsC({type:n,selectors:[["","load_effect_lazy",""]],standalone:!0})),s})();const jn=n=>({"skeleton-box-loading":n}),On=n=>({"pb-2":n}),Tn=n=>({flex:n}),wn=n=>({"flex-wrap":n}),xn=n=>({"padding-mobile":n});function An(n,s){if(1&n&&e.nrm(0,"div",3),2&n){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,jn,i.renderConfigObj.isFirstRender))}}function kn(n,s){if(1&n&&(e.j41(0,"div",20),e.nrm(1,"azt-dynamic-hook",15),e.k0s()),2&n){let i;const t=e.XpG(2);e.R7$(),e.Y8G("content",null!==(i=null==t.question.groupInfo?null:t.question.groupInfo.groupContent)&&void 0!==i?i:"")}}function In(n,s){if(1&n&&e.nrm(0,"azt-test-audio-ui",21),2&n){const i=e.XpG(2);e.Y8G("questionObj",i.question)("isShowList",!0)}}function Sn(n,s){if(1&n&&(e.j41(0,"div",22),e.nrm(1,"azt-admin-common-question-tag-in-analyze-tool",23),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("levelId",i.levelId)("subjectId",i.subjectId)("questionObj",i.question)("currentQuestionTags",i.question.tags)("useQuestionIdToSuggestion",!0)}}function yn(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",32)(7,"azt-admin-true-false-question-knowledge-unit-to-auto-suggestion",33),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const a=e.XpG(4);return e.Njj(a.selectKnowledgeEmit.emit(o))}),e.j41(8,"div",34)(9,"div",35)(10,"span",36),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",37),e.nrm(14,"azt-admin-true-false-question-tag-in-analyze-tool",38),e.k0s()()()()()()}if(2&n){const i=e.XpG().$implicit,t=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(16,xn,t.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,12,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("levelId",t.levelId)("subjectId",t.subjectId)("ngClass",t.isMobileDevice?"w-full":"")("questionObj",t.question)("currentAnswerKey",i.key),e.R7$(4),e.SpI("",e.bMT(12,14,"lang_auto_gan_nhan"),":"),e.R7$(3),e.Y8G("levelId",t.levelId)("subjectId",t.subjectId)("questionObj",t.question)("currentAnswerKey",i.key)}}function Fn(n,s){if(1&n&&(e.j41(0,"div",26),e.nI1(1,"isTrueFalseAnswer"),e.j41(2,"b",27),e.EFF(3),e.nI1(4,"isTrueFalseAnswer"),e.k0s(),e.nrm(5,"azt-dynamic-hook",15),e.DNE(6,yn,15,18,"div",28),e.nI1(7,"isTrueFalseAnswer"),e.k0s()),2&n){let i;const t=s.$implicit,o=e.XpG(3);e.Y8G("ngStyle",e.eq3(10,wn,e.bMT(1,4,o.question)?"wrap":"")),e.R7$(3),e.JRh(e.bMT(4,6,o.question)?(null!==(i=t.alpha)&&void 0!==i?i:t.key).toLowerCase()+")":(null!==(i=t.alpha)&&void 0!==i?i:t.key)+"."),e.R7$(2),e.Y8G("content",t.content),e.R7$(),e.Y8G("ngIf",e.bMT(7,8,o.question))}}function En(n,s){if(1&n&&(e.j41(0,"div",24),e.DNE(1,Fn,8,12,"div",25),e.k0s()),2&n){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",i.question.answersOrigin)}}function Rn(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",39)(1,"div",31)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",32)(6,"azt-admin-common-question-knowledge-unit-to-auto-suggestion",40),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectKnowledgeEmit.emit(o))}),e.k0s()()()}if(2&n){const i=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("questionObj",i.question)("levelId",i.levelId)("subjectId",i.subjectId)}}function zn(n,s){if(1&n&&(e.j41(0,"div",4)(1,"div",5),e.DNE(2,kn,2,1,"div",6),e.j41(3,"div",7),e.DNE(4,In,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9)(6,"div",10)(7,"div",10)(8,"div",11),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-select",12)(12,"mat-option",13),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"mat-option",13),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"mat-option",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"mat-option",13),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()(),e.DNE(24,Sn,2,5,"div",14),e.nI1(25,"isTrueFalseAnswer"),e.k0s()(),e.nrm(26,"azt-dynamic-hook",15),e.k0s(),e.DNE(27,En,2,2,"div",16),e.nI1(28,"isOneChoiceAnswer"),e.nI1(29,"isTrueFalseAnswer"),e.j41(30,"div",17),e.nrm(31,"azt-question-answer-view-with-simple-result-box-for-teacher",18),e.k0s(),e.DNE(32,Rn,7,6,"div",19),e.nI1(33,"isTrueFalseAnswer"),e.k0s()()),2&n){let i;const t=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),e.Y8G("id","question_render_container_"+t.question.id)("ngClass",e.eq3(45,On,t.question.attachments.length>0)),e.R7$(),e.Y8G("ngIf",null==t.question.groupInfo?null:t.question.groupInfo.isFirstInGroup),e.R7$(2),e.Y8G("ngIf",t.question.attachments.length>0),e.R7$(),e.Y8G("ngClass",e.eq3(47,Tn,!t.isMobileDevice)),e.R7$(4),e.SpI(" ",e.bMT(10,27,"lang_auto_cau")+" "+(null!=t.question.labelIndex?t.question.labelIndex:t.index+1)," "),e.R7$(2),e.Y8G("ngModel",t.question.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(14,29,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(17,31,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(20,33,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(23,35,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",!e.bMT(25,37,t.question)),e.R7$(2),e.Y8G("content",null!==(i=t.question.content)&&void 0!==i?i:""),e.R7$(),e.Y8G("ngIf",(e.bMT(28,39,t.question)||e.bMT(29,41,t.question))&&t.question.answers&&t.question.answers.length>0),e.R7$(4),e.Y8G("questionObj",t.question),e.R7$(),e.Y8G("ngIf",!e.bMT(33,43,t.question))}}let Mn=(()=>{var n;class s extends he{constructor(...t){super(...t),(0,l.A)(this,"currentQuestionObjs",void 0),(0,l.A)(this,"question",void 0),(0,l.A)(this,"index",void 0),(0,l.A)(this,"levelId",void 0),(0,l.A)(this,"subjectId",void 0),(0,l.A)(this,"follower",new E),(0,l.A)(this,"selectKnowledgeEmit",new e.bkB)}ngOnInit(){super.ngOnInit();let t=new ve(!0,!1,!1);super.initData(t,this.follower,this.question)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-question-standalone-for-admin-objective-analyze-tool"]],inputs:{currentQuestionObjs:"currentQuestionObjs",question:"question",index:"index",levelId:"levelId",subjectId:"subjectId",follower:"follower"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container-ebank","p-3","border-none",3,"id","ngClass"],["class","group-content-of-question-standalone",4,"ngIf"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"items-center",3,"ngClass"],[1,"flex","items-center"],[1,"question-standalone-label","whitespace-nowrap","mr-2"],[3,"ngModel","disabled"],[3,"value"],["class","ml-3",4,"ngIf"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex"],[3,"questionObj"],["class","box-help p-2",4,"ngIf"],[1,"group-content-of-question-standalone"],[3,"questionObj","isShowList"],[1,"ml-3"],[3,"levelId","subjectId","questionObj","currentQuestionTags","useQuestionIdToSuggestion"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",3,"ngStyle",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6",3,"ngStyle"],[1,"answer-label"],["class","w-full",4,"ngIf"],[1,"w-full"],[1,"box-help",2,"margin-top","20px",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","levelId","subjectId","ngClass","questionObj","currentAnswerKey"],[1,"flex","mt-2"],[1,"items-center"],[2,"vertical-align","middle"],[1,"ml-2"],[3,"levelId","subjectId","questionObj","currentAnswerKey"],[1,"box-help","p-2"],[3,"selectKnowledgeEmit","questionObj","levelId","subjectId"]],template:function(t,o){if(1&t&&(e.j41(0,"div",1),e.DNE(1,An,1,3,"div",2)(2,zn,34,49,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.question.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[ge.C,$.x,hn,Ut,Lt,tn,rn,Rt,d.MD,d.YU,d.Sq,d.bT,d.B3,c.X1,c.BC,g.iI,c.YN,c.vS,_.wp,v.s,z.wT,M.VO,m.flO,h.L,_.V6,_.FC,f.Id,b.k,J],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']})),s})();var Ce=p(84572);function Gn(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",3),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Dn(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"div",10)(2,"azt-question-standalone-for-admin-objective-analyze-tool",11),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectKnowledgeEmit(o))}),e.k0s()(),e.bVm()}if(2&n){const i=s.$implicit,t=s.index,o=e.XpG(2);e.R7$(2),e.Y8G("levelId",o.levelId)("subjectId",o.subjectId)("currentQuestionObjs",o.questionObjs)("question",i)("index",t)("follower",o.followerRenderQuest)}}function $n(n,s){if(1&n&&(e.j41(0,"div",4)(1,"div",5)(2,"h3",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"h3",8),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"div",7)(10,"h3",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()(),e.DNE(13,Dn,3,6,"ng-container",9)),2&n){const i=e.XpG();e.R7$(3),e.JRh(e.bMT(4,8,"lang_core_analyze_objective_for_question")),e.R7$(4),e.E5c("",e.bMT(8,10,"lang_core_analyze_objective_for_question_success"),": ",i.totalObjectiveAnalyze,"/",i.totalAnalyze,""),e.R7$(4),e.E5c("",e.bMT(12,12,"lang_core_analyze_difficulty_for_question_success"),": ",i.totalTagAnalyze,"/",i.totalAnalyze,""),e.R7$(2),e.Y8G("ngForOf",i.questionObjs)}}let Bn=(()=>{var n;class s extends j.H{calculateTotalObjectiveAnalyze(){this.totalObjectiveAnalyze=0,this.questionObjs.forEach(t=>{!this.sAztAnswerTypeService.isTrueFalseAnswer(t)&&(t.objectiveId||t.knowledgeId)&&this.totalObjectiveAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(t)&&(this.totalObjectiveAnalyze+=t.configAnswers.filter(o=>o.objectiveId||o.knowledgeId).length)})}calculateTotalTagAnalyze(){this.totalTagAnalyze=0,this.questionObjs.forEach(t=>{!this.sAztAnswerTypeService.isTrueFalseAnswer(t)&&(t.objectiveId||t.knowledgeId)&&this.totalTagAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(t)&&(this.totalTagAnalyze+=t.configAnswers.filter(o=>o.tagId).length)})}selectKnowledgeEmit(t){this.calculateTotalObjectiveAnalyze()}getDataExamObj(t){this.waitDestroy(this.adminExamService.apiAdminExamGetQuestionsOfExamIdGet(t).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],a=>{this.questionObjs=a,this.questionObjs.forEach(r=>{this.sAztAnswerTypeService.isTrueFalseAnswer(r)||this.totalAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(r)&&(this.totalAnalyze+=r.answers.length)}),this.calculateTotalObjectiveAnalyze(),this.calculateTotalTagAnalyze(),this.stopStatusObj()})}))}loadQuest(t,o){const a=this.commonService.castJsonToClassObjs(Y.I,JSON.stringify(t));this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a??[])})}ngOnInit(){this.initStatusObj(),this.waitDestroy((0,Ce.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{const t=Number(this.commonService.getMyParam(this.activeRoute,"examId")??0);this.levelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.subjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.getDataExamObj(t)})),this.waitDestroy(this.sAztListenQuestionTagChangesService.listenSetTagEventOfAllQuestions().subscribe(t=>this.calculateTotalTagAnalyze()))}constructor(t,o,a){super(),(0,l.A)(this,"adminExamService",void 0),(0,l.A)(this,"activeRoute",void 0),(0,l.A)(this,"sAztAnswerTypeService",void 0),(0,l.A)(this,"backTo","/azota-tools/auto-suggestion-for-exams"),(0,l.A)(this,"questionRenderService",(0,e.WQX)(P.g)),(0,l.A)(this,"configRenderService",new D.y(!0)),(0,l.A)(this,"sAztListenQuestionTagChangesService",(0,e.WQX)(te)),(0,l.A)(this,"followerRenderQuest",new E),(0,l.A)(this,"questionObjs",[]),(0,l.A)(this,"totalAnalyze",0),(0,l.A)(this,"totalObjectiveAnalyze",0),(0,l.A)(this,"totalTagAnalyze",0),(0,l.A)(this,"levelId",0),(0,l.A)(this,"subjectId",0),this.adminExamService=t,this.activeRoute=o,this.sAztAnswerTypeService=a}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(pe.g0),e.rXU(g.nX),e.rXU(ne._))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["auto-suggestion-for-one-exam"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"flex","flex-col","sm:flex-row","sm:items-center","mt-2"],[1,"text-md","font-medium","mr-4"],[4,"ngFor","ngForOf"],[1,"box","mt-5"],[3,"selectKnowledgeEmit","levelId","subjectId","currentQuestionObjs","question","index","follower"]],template:function(t,o){if(1&t&&(e.j41(0,"teacher-layout",1),e.DNE(1,Gn,1,1,"azt-loading-effect",2)(2,$n,14,14,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,A.K,Mn,d.MD,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();var se=p(55893),je=p(93877);class W extends j.H{constructor(...s){super(...s),(0,l.A)(this,"nodeObjs",[])}searchByText(s){this.nodeObjs=(s=this.standardSearchText(s)).trim()?this.doSearchByText(s,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(s){s.isExpand=!0}collapse(s){s.isExpand=!1}doSearchByText(s,i,t){for(var o of i){o.isShow=!1;let a=this.standardSearchText(o.text);(s.includes(a)||a.includes(s))&&(o.isShow=!0,o.isExpand=!0,t.forEach(r=>{r.isShow=!0,r.isExpand=!0})),o.children.length&&(o.children=this.doSearchByText(s,o.children,t.concat(o)))}return i}showAndExpandAll(s){for(var i of s)i.isShow=!0,i.isExpand=!0,i.children=this.showAndExpandAll(i.children);return s}standardSearchText(s){return s=s.toLowerCase(),s=this.commonService.removeSpecialStringInSearch(s),this.commonService.convertVietnameseToEnglish(s)}}const Oe=n=>({nodeObjs:n}),Pn=n=>({"padding-left":n}),Nn=n=>({"font-medium":n}),Qn=()=>({"mr-2":!0});function Ln(n,s){1&n&&e.eu8(0)}function Kn(n,s){if(1&n&&(e.j41(0,"div",5)(1,"ng-scrollbar",6,2),e.DNE(3,Ln,1,0,"ng-container",7),e.k0s()()),2&n){e.XpG();const i=e.sdS(3);e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngTemplateOutlet",i)}}function Yn(n,s){1&n&&e.eu8(0)}function qn(n,s){if(1&n&&(e.j41(0,"div",8),e.DNE(1,Yn,1,0,"ng-container",7),e.k0s()),2&n){e.XpG();const i=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function Vn(n,s){1&n&&e.eu8(0)}function Xn(n,s){if(1&n&&(e.j41(0,"div",9),e.DNE(1,Vn,1,0,"ng-container",10),e.k0s()),2&n){const i=e.XpG(),t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,Oe,i.nodeObjs))}}function Un(n,s){1&n&&e.nrm(0,"lucide-icon",22)}function Jn(n,s){1&n&&e.nrm(0,"lucide-icon",23)}function Wn(n,s){if(1&n){const i=e.RV6();e.j41(0,"i",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(1,Un,1,0,"lucide-icon",20)(2,Jn,1,0,"lucide-icon",21),e.k0s()}if(2&n){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!i.isExpand),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function Hn(n,s){1&n&&e.nrm(0,"lucide-icon",24),2&n&&e.Y8G("ngClass",e.lJ4(1,Qn))}function Zn(n,s){1&n&&e.eu8(0)}function eo(n,s){if(1&n&&(e.qex(0),e.j41(1,"div",25),e.DNE(2,Zn,1,0,"ng-container",10),e.k0s(),e.bVm()),2&n){const i=e.XpG().$implicit;e.XpG(3);const t=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,Oe,i.children))}}function to(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14),e.DNE(3,Wn,3,2,"i",15),e.j41(4,"label",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(5,Hn,1,2,"lucide-icon",17),e.nrm(6,"span",18),e.nI1(7,"mathJaxContent"),e.nI1(8,"async"),e.nI1(9,"safeContentQuestion"),e.k0s()(),e.DNE(10,eo,3,4,"ng-container",11),e.k0s(),e.bVm()}if(2&n){const i=s.$implicit;e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.yjJ("id","node-",i.randomHashId,"-",i.level,"-",i.nodeIndex,""),e.Y8G("ngStyle",e.eq3(17,Pn,12*i.level+"px")),e.R7$(),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngClass",e.eq3(19,Nn,0===i.level)),e.R7$(),e.Y8G("ngIf","objective"==i.typeNode),e.R7$(),e.Y8G("innerHTML",e.bMT(9,15,e.bMT(8,13,e.bMT(7,11,i.text))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}function no(n,s){if(1&n&&(e.qex(0),e.DNE(1,to,11,21,"ng-container",12),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function oo(n,s){if(1&n&&e.DNE(0,no,2,1,"ng-container",11),2&n){const i=s.nodeObjs,t=e.XpG();e.Y8G("ngIf",t.asTemplateDataObj(i))}}let io=(()=>{var n;class s extends W{constructor(...t){super(...t),(0,l.A)(this,"rawNodes",void 0),(0,l.A)(this,"useScrollBar",void 0),(0,l.A)(this,"nodeObjs",[]),(0,l.A)(this,"uuidService",(0,e.WQX)(je.D))}clickToNode(t){t.children.length&&(t.isExpand?this.collapse(t):this.expand(t))}asTemplateDataObj(t){return t}standardTreeNodes(t,o){let a=[];return this.convertTreeWithObjectivesToNodes(t).forEach((u,C)=>{let T={level:o,typeNode:u.nodes.length?"knowledge":"objective",isExpand:!0,isShow:!0,nodeIndex:C,selected:!1,randomHashId:this.uuidService.getUuid(),text:u.title,data:{...u,nodes:[]},nodes:[],children:[]};T.children=this.standardTreeNodes(u.nodes,o+1),a.push(T)}),a}convertTreeWithObjectivesToNodes(t){return t.map(o=>{const a=[...o.nodes.map(r=>({...r,nodes:this.convertTreeWithObjectivesToNodes(r.nodes)})),...o.objectives.map((r,u)=>({id:r.objectiveId,title:r.title,position:u+1,nodes:[],objectives:[]}))];return{...o,nodes:a}})}removeOneNodeById(t,o){return(t=t.filter(a=>a.randomHashId!=o.randomHashId)).forEach(a=>a.nodes=this.removeOneNodeById(a.nodes,o)),t}ngOnChanges(t){t.rawNodes&&(this.nodeObjs=this.standardTreeNodes(this.rawNodes,0))}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-book-detail-tree-component"]],inputs:{rawNodes:"rawNodes",useScrollBar:"useScrollBar"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:6,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["perfectScroll",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf"],["class","relative",4,"ngIf"],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[4,"ngTemplateOutlet"],[1,"relative"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[2,"line-height","1.6",3,"click","ngClass"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(t,o){1&t&&e.DNE(0,Kn,4,2,"div",3)(1,qn,2,1,"div",4)(2,Xn,2,4,"ng-template",null,0,e.C5r)(4,oo,1,1,"ng-template",null,1,e.C5r),2&t&&(e.Y8G("ngIf",o.useScrollBar),e.R7$(),e.Y8G("ngIf",!o.useScrollBar))},dependencies:[d.MD,d.YU,d.Sq,d.bT,d.T3,d.B3,d.Jj,c.X1,g.iI,c.YN,v.s,m.flO,m.WGl,h.L,_.km,_.ep,f.Id,f.Yh,b.k],encapsulation:2})),s})();var x=p(34006),S=p(81174);const so=()=>({"ml-2":!0});function ao(n,s){1&n&&e.nrm(0,"azt-loading-ui",8),2&n&&e.Y8G("size",16)("ngClass",e.lJ4(2,so))}let lo=(()=>{var n;class s extends S._{handelCloseDialog(){this.dialogRef.close(!1)}handelSubmit(){if(this.content.invalid)return this.content.markAllAsTouched();this.initStatusObj(),this.waitDestroy(this.commonService.wrapApiResponse(this.elearningBookService.aiApiV1ElearningBookInsertElearningBookContentsPost({bookId:this.data.id,data:this.content.value})).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.dialogRef.close(!0),this.successStatusObj("lang_auto_them_thanh_cong",!0)}))}ngOnInit(){}constructor(t,o,a){super(a,o),(0,l.A)(this,"elearningBookService",void 0),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"content",new c.MJ("",{nonNullable:!0,validators:c.k0.required})),this.elearningBookService=t,this.dialogRef=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(w.UC),e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["add-book-content-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:16,vars:14,consts:[[1,"box"],[1,"text-base","font-medium","p-3","pb-0"],[1,"p-3"],["id","book-content",1,"form-control","w-full","h-full",2,"height","350px",3,"placeholder","formControl"],[1,"flex","items-center","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","min-width-100","ml-auto",3,"click"],[1,"btn","btn-primary","min-width-100","ml-3",3,"click"],[3,"size","ngClass",4,"ngIf"],[3,"size","ngClass"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",2),e.nrm(5,"textarea",3),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",4)(8,"button",5),e.bIt("click",function(){return o.handelCloseDialog()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return o.handelSubmit()}),e.j41(12,"span"),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,ao,1,3,"azt-loading-ui",7),e.k0s()()()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_azt_add_book_content")," "),e.R7$(3),e.FS9("placeholder",e.bMT(6,8,"lang_auto_nhap_noi_dung")+"..."),e.Y8G("formControl",o.content),e.R7$(4),e.SpI(" ",e.bMT(10,10,"lang_auto_dong")," "),e.R7$(4),e.JRh(e.bMT(14,12,"lang_auto_xac_nhan")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading))},dependencies:[k.R,d.MD,d.YU,d.bT,c.X1,c.me,c.BC,c.l_,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();var F=p(81538);const ro=(n,s)=>({"bg-success":n,"bg-slate-500":s});function co(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",4),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function uo(n,s){if(1&n&&(e.qex(0),e.nrm(1,"app-book-detail-tree-component",18),e.bVm()),2&n){const i=e.XpG(3);e.R7$(),e.Y8G("rawNodes",i.bookDetail.nodes)("useScrollBar",!1)}}function _o(n,s){1&n&&(e.j41(0,"div",19),e.nrm(1,"lucide-icon",20),e.j41(2,"div",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"lang_auto_khong_co_du_lieu")," "))}function po(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",7)(3,"h3",8),e.EFF(4),e.k0s(),e.j41(5,"div",9)(6,"span"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"button",10),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.removeBookDetail())}),e.nrm(10,"lucide-icon",11),e.k0s()(),e.j41(11,"div",12)(12,"button",13),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.addBookContent())}),e.nrm(13,"lucide-icon",14),e.j41(14,"span",15),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()(),e.j41(17,"div",16),e.DNE(18,uo,2,2,"ng-container",17)(19,_o,5,3,"ng-template",null,1,e.C5r),e.k0s()()}if(2&n){const i=e.sdS(20),t=e.XpG(2);e.R7$(4),e.JRh(t.bookDetail.title),e.R7$(),e.Y8G("ngClass",e.l_i(10,ro,t.bookDetail.isActive,!t.bookDetail.isActive)),e.R7$(2),e.JRh(e.bMT(8,6,t.bookDetail.isActive?"lang_auto_hoat_dong":"lang_core_khong_hoat_dong")),e.R7$(8),e.JRh(e.bMT(16,8,"lang_azt_add_book_content")),e.R7$(3),e.Y8G("ngIf",t.bookDetail.nodes.length)("ngIfElse",i)}}function mo(n,s){if(1&n&&e.DNE(0,po,21,13,"div",5),2&n){const i=e.XpG();e.Y8G("ngIf",i.bookDetail)}}let go=(()=>{var n;class s extends j.H{addBookContent(){this.sAztDialogService.open(lo,{data:{id:this.bookId},width:"1000px"}).afterClosed().subscribe(o=>{o&&this.getBookDetail(this.bookId)})}removeBookDetail(){const t={content:`<span class="font-medium">${this.commonService.myTranslateInstant("lang_azt_deleting_data_will_cause_errors_with_questions_created_from_the_matrix_based_on_the_above_book")}!</span>`,iconName:"trash-2",textConfirm:"OK"};this.sAztDialogService.open(se.u,{data:t,width:"500px"}).afterClosed().subscribe(o=>{o&&this.callApiRemoveBook(this.bookId)})}getBookDetail(t){this.initStatusObj(),this.waitDestroy(this.elearningBookService.aiApiV1ElearningBookGetElearningBookContentsGet(t).subscribe({next:o=>{this.bookDetail=o,this.successStatusObj()},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}callApiRemoveBook(t){this.waitDestroy(this.elearningBookService.aiApiV1ElearningBookDeleteElearningBookContentsDelete(t).subscribe({next:()=>{this.showSuccessSnack("lang_admin_guide_delete_success"),this.getBookDetail(this.bookId)},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}ngOnInit(){this.bookId=Number(this.getMyParam(this.activatedRoute,"bookId")??0),this.headerBackTo=this.getMyQueryParam("backto")??"/azota-tools/book-management",this.getBookDetail(this.bookId)}constructor(t,o,a){super(),(0,l.A)(this,"elearningBookService",void 0),(0,l.A)(this,"activatedRoute",void 0),(0,l.A)(this,"sAztDialogService",void 0),(0,l.A)(this,"bookDetail",void 0),(0,l.A)(this,"headerBackTo",""),(0,l.A)(this,"bookId",0),this.elearningBookService=t,this.activatedRoute=o,this.sAztDialogService=a}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(w.UC),e.rXU(g.nX),e.rXU(F.i))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-book-detail"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],["emptyNode",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","mt-8",4,"ngIf"],[1,"mt-8"],[1,"flex","items-center"],[1,"text-lg","font-medium","mr-2"],[1,"py-1","px-2","rounded-full","text-xs","text-white","font-medium",3,"ngClass"],[1,"btn","btn-sm","p-1","btn-danger-soft","ml-2",3,"click"],["name","trash-2","size","18"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],["name","plus","size","16"],[1,"ml-2"],[1,"box","p-3","mt-5"],[4,"ngIf","ngIfElse"],[3,"rawNodes","useScrollBar"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","300px"],["name","list-tree","size","90",1,"mx-auto"],[1,"text-lg","font-medium"]],template:function(t,o){if(1&t&&(e.j41(0,"teacher-layout",2),e.DNE(1,co,1,1,"azt-loading-effect",3)(2,mo,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.Y8G("headerBackToLink",o.headerBackTo),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,A.K,io,d.MD,d.YU,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,f.Id,b.k],encapsulation:2})),s})();function fo(n,s){1&n&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}let bo=(()=>{var n;class s extends S._{callApiSave(){this.initStatusObj();let t={id:this.bookData?.id??0,title:this.titleControl.value,schoolSubjectId:this.form.controls.schoolSubject.value,schoolLevelId:this.form.controls.schoolLevel.value,isActive:this.activeControl.value?1:0},o=this.data.isUpdate?this.elearningBookService.aiApiV1ElearningBookUpdateElearningBookPost(t):this.elearningBookService.aiApiV1ElearningBookInsertElearningBookPost(t);this.waitDestroy(this.wrapApiResponse(o).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message??"lang_core_invalid_data",!0);this.dialogRef.close(!0),this.successStatusObj()}))}ngOnInit(){super.ngOnInit()}constructor(t,o,a){super(a,o),(0,l.A)(this,"elearningBookService",void 0),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"titleControl",void 0),(0,l.A)(this,"activeControl",void 0),(0,l.A)(this,"bookData",void 0),(0,l.A)(this,"form",void 0),this.elearningBookService=t,this.dialogRef=o,this.bookData=this.data.bookData,this.form=new c.gE({schoolLevel:new c.MJ(this.data.levelId,{nonNullable:!0}),schoolSubject:new c.MJ(this.data.subjectId,{nonNullable:!0})}),this.titleControl=new c.MJ(this.bookData?.title??"",{nonNullable:!0,validators:[c.k0.required]}),this.activeControl=new c.MJ(this.bookData?.isActive??0,{nonNullable:!0})}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(w.UC),e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["add-edit-book-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:28,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","relative","p-3","intro-y"],[1,"overflow-auto","relative"],[1,"font-medium","text-lg","mb-2"],[1,"p-5","pt-0"],[1,"items-center","w-full","mt-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[1,"mt-3"],["for","titleBook",1,"form-label","font-bold"],["type","text","id","titleBook",1,"form-control",3,"formControl","value"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"form-check","form-switch"],["id","active-control","type","checkbox",1,"form-check-input","mr-2",3,"formControl","value"],["for","active-control",1,"form-check-label","ml-0"],[1,"p-3","text-right"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"text-xs","text-danger","mt-1"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",4)(7,"div",5),e.nrm(8,"config-level-subject-book",6),e.k0s(),e.j41(9,"div",7)(10,"label",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.nrm(13,"input",9),e.DNE(14,fo,3,3,"div",10),e.k0s(),e.j41(15,"div",7)(16,"div",11),e.nrm(17,"input",12),e.j41(18,"label",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()(),e.j41(21,"div",14)(22,"button",15),e.bIt("click",function(){return o.dialogRef.close()}),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"button",16),e.bIt("click",function(){return o.callApiSave()}),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(4),e.SpI(" ",e.bMT(5,16,o.data.isUpdate?"Ch\u1ec9nh s\u1eeda s\xe1ch":"Th\xeam m\u1edbi s\xe1ch")," "),e.R7$(4),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useFirstAsDefault",!0)("layout","default"),e.R7$(3),e.SpI(" ",e.bMT(12,18,"Ti\xeau \u0111\u1ec1 s\xe1ch")," "),e.R7$(2),e.Y8G("formControl",o.titleControl)("value",o.titleControl.value),e.R7$(),e.Y8G("ngIf",o.titleControl.dirty&&o.titleControl.errors),e.R7$(3),e.Y8G("formControl",o.activeControl)("value",!!o.activeControl.value),e.R7$(2),e.SpI(" ",o.activeControl.value?"Ho\u1ea1t \u0111\u1ed9ng":e.bMT(20,20,"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng")," "),e.R7$(4),e.SpI(" ",e.bMT(24,22,"lang_button_cancel")," "),e.R7$(2),e.Y8G("disabled",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(27,24,o.data.isUpdate?"lang_button_save":"lang_button_confirm")," "))},dependencies:[G,d.MD,d.bT,c.X1,c.me,c.Zm,c.BC,c.l_,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();const ho=(n,s)=>({"w-full":n,"w-32 ml-2":s});function vo(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",14),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Co(n,s){1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",24)(3,"p",25)(4,"span",26),e.EFF(5),e.k0s()()()(),e.bVm()),2&n&&(e.R7$(5),e.JRh("Ch\u01b0a c\xf3 \u0111\u1ea7u m\u1ee5c s\xe1ch n\xe0o v\u1edbi kh\u1ed1i - m\xf4n h\u1ecdc \u0111\xe3 ch\u1ecdn!"))}function jo(n,s){1&n&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"Ho\u1ea1t \u0111\u1ed9ng")))}function Oo(n,s){1&n&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng")))}function To(n,s){if(1&n){const i=e.RV6();e.j41(0,"tr")(1,"td")(2,"p",25)(3,"span",26),e.EFF(4),e.k0s()()(),e.j41(5,"td")(6,"p",25)(7,"span",26),e.EFF(8),e.k0s()()(),e.j41(9,"td")(10,"p",25),e.DNE(11,jo,3,3,"span",28)(12,Oo,3,3,"span",28),e.k0s()(),e.j41(13,"td")(14,"div",29)(15,"button",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.redirectToBookDetail(o))}),e.nrm(16,"lucide-icon",31),e.j41(17,"span",12),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"button",32),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.addOrEditBook(o))}),e.nrm(21,"lucide-icon",33),e.j41(22,"span",12),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()()}if(2&n){const i=s.$implicit;e.R7$(4),e.JRh(i.id),e.R7$(4),e.JRh(i.title),e.R7$(3),e.Y8G("ngIf",i.isActive),e.R7$(),e.Y8G("ngIf",!i.isActive),e.R7$(6),e.JRh(e.bMT(19,6,"lang_common_view")),e.R7$(5),e.JRh(e.bMT(24,8,"lang_auto_sua"))}}function wo(n,s){if(1&n&&e.DNE(0,To,25,10,"tr",27),2&n){const i=e.XpG(2);e.Y8G("ngForOf",i.bookList)}}function xo(n,s){if(1&n&&(e.j41(0,"div",15)(1,"div",16)(2,"table",17)(3,"thead",18)(4,"tr")(5,"th",19),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",20),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"th",21),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"th",22),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,Co,6,1,"ng-container",23)(19,wo,1,1,"ng-template",null,1,e.C5r),e.k0s()()()()),2&n){const i=e.sdS(20),t=e.XpG();e.R7$(6),e.SpI(" ",e.bMT(7,6,"ID")," "),e.R7$(3),e.SpI(" ",e.bMT(10,8,"T\xean s\xe1ch")," "),e.R7$(3),e.SpI(" ",e.bMT(13,10,"Tr\u1ea1ng th\xe1i")," "),e.R7$(3),e.SpI(" ",e.bMT(16,12,"lang_auto_hanh_dong")," "),e.R7$(3),e.Y8G("ngIf",!t.bookList.length)("ngIfElse",i)}}let Te=(()=>{var n;class s extends j.H{changeData(){this.myNavigation(`/azota-tools/book-management/${this.form.controls.schoolLevel.value}/${this.form.controls.schoolSubject.value}`)}addOrEditBook(t){this.sAztDialogService.open(bo,{width:"750px",data:{isUpdate:!!t,bookData:t,levelId:this.form.controls.schoolLevel.value,subjectId:this.form.controls.schoolSubject.value},restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.getBookList()})}redirectToBookDetail(t){t&&this.myNavigationWithQueryString(`/azota-tools/book-detail/${t.id}`,`?backto=/azota-tools/book-management/${this.form.controls.schoolLevel.value}/${this.form.controls.schoolSubject.value}`)}getBookList(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.elearningBookService.aiApiV1ElearningBookSearchElearningBookPost({schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value})).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);this.bookList=t.data??[],this.successStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,Ce.z)([this.activatedRoute.params,this.activatedRoute.queryParams]).subscribe(([])=>{const t=Number(this.getMyParam(this.activatedRoute,"levelId")??12),o=Number(this.getMyParam(this.activatedRoute,"subjectId")??40);this.form.patchValue({schoolLevel:t,schoolSubject:o}),this.getBookList()}))}constructor(t,o,a){super(),(0,l.A)(this,"elearningBookService",void 0),(0,l.A)(this,"sAztDialogService",void 0),(0,l.A)(this,"activatedRoute",void 0),(0,l.A)(this,"bookList",[]),(0,l.A)(this,"form",void 0),this.elearningBookService=t,this.sAztDialogService=o,this.activatedRoute=a,this.form=new c.gE({schoolLevel:new c.MJ(0,{nonNullable:!0}),schoolSubject:new c.MJ(0,{nonNullable:!0})})}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(w.UC),e.rXU(F.i),e.rXU(g.nX))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["book-management"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:18,consts:[["doneLoading",""],["hasBook",""],[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","flex-col","sm:flex-row","items-center"],[1,"text-xl","font-medium","mr-auto"],[1,"mt-2"],[1,"w-full","flex","justify-between","box","p-3"],[1,"items-center","w-full","sm:w-auto","mt-3","sm:mt-0"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[1,"btn","btn-success","text-white",3,"click","ngClass"],["name","plus","size","18"],[1,"ml-2"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6","mt-2"],[1,"intro-y","col-span-12","overflow-auto"],[1,"table","table-report","mt-2","table-sticky","overflow-auto",2,"min-width","1200px"],[1,"box"],[1,"whitespace-nowrap",2,"width","220px"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap",2,"width","280px"],[1,"whitespace-nowrap","text-center",2,"width","220px"],[4,"ngIf","ngIfElse"],["colspan","4",1,"text-center"],[1,"mb-0","whitespace-nowrap"],[1,"font-medium"],[4,"ngFor","ngForOf"],["class","font-medium",4,"ngIf"],[1,"flex","items-center"],[1,"btn","btn-sm","btn-success-soft","mr-3",3,"click"],["name","eye","size","18"],[1,"btn","btn-sm","btn-primary-soft",3,"click"],["name","square-pen","size","18"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"teacher-layout",2)(1,"div",3)(2,"div",4)(3,"h3",5),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"config-level-subject-book",9),e.bIt("changeDataEvent",function(){return e.eBV(a),e.Njj(o.changeData())}),e.k0s()(),e.j41(10,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.addOrEditBook())}),e.nrm(11,"lucide-icon",11),e.j41(12,"span",12),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()(),e.DNE(15,vo,1,1,"azt-loading-effect",13)(16,xo,21,14,"ng-template",null,0,e.C5r),e.k0s()()}if(2&t){const a=e.sdS(17);e.Y8G("headerBackToLink","/super-role/admin-tool"),e.R7$(4),e.SpI(" ",e.bMT(5,11,"Danh m\u1ee5c s\xe1ch")," "),e.R7$(5),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngClass",e.l_i(15,ho,o.isMobileDevice,!o.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(14,13,"Th\xeam s\xe1ch")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,G,A.K,d.MD,d.YU,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,f.Id,b.k],encapsulation:2})),s})();var Ao=p(85057);function ko(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",3),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Io(n,s){if(1&n&&(e.j41(0,"p")(1,"span",11),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"lang_core_mo_ta_loi")),e.R7$(2),e.SpI(" : ",i.lastMessage," ")}}function So(n,s){if(1&n&&(e.j41(0,"div",10)(1,"p")(2,"span",11),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"span",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"span",11),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"span",11),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.EFF(20),e.nI1(21,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(22,"p")(23,"span",11),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s(),e.EFF(26),e.nI1(27,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(28,"p")(29,"span",11),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s(),e.EFF(32),e.k0s(),e.j41(33,"p")(34,"span",11),e.EFF(35),e.nI1(36,"mytranslate"),e.k0s(),e.EFF(37),e.k0s(),e.DNE(38,Io,5,4,"p",12),e.k0s()),2&n){const i=s.$implicit;e.R7$(3),e.JRh(e.bMT(4,15,"lang_core_m\xe3_tien_trinh")),e.R7$(2),e.SpI(" : ",i.code," "),e.R7$(3),e.JRh(e.bMT(9,17,"lang_core_ten_tien_trinh")),e.R7$(2),e.SpI(" : ",i.name," "),e.R7$(3),e.JRh(e.bMT(14,19,"lang_core_id_da_chay_duoc")),e.R7$(2),e.SpI(" : ",i.currentId," "),e.R7$(3),e.JRh(e.bMT(19,21,"lang_core_ngay_cap_nhat_cuoi")),e.R7$(2),e.SpI(" : ",e.bMT(21,23,i.updatedAt)," "),e.R7$(4),e.JRh(e.bMT(25,25,"lang_core_thoi_gian_du_kien_xong")),e.R7$(2),e.SpI(" : ",e.bMT(27,27,i.estimateEndAt)," "),e.R7$(4),e.JRh(e.bMT(31,29,"lang_auto_trang_thai")),e.R7$(2),e.SpI(" : ",i.status," "),e.R7$(3),e.JRh(e.bMT(36,31,"lang_core_so_luong_dang_xu_ly")),e.R7$(2),e.SpI(" : ",i.remainingItems," "),e.R7$(),e.Y8G("ngIf",i.lastMessage)}}function yo(n,s){if(1&n&&(e.j41(0,"div",4)(1,"div",5)(2,"h3",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,So,39,33,"div",9),e.k0s()()()),2&n){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,3,"lang_core_danh_sach_cac_tien_chinh_chay_ngam")," (",i.singleJobs.length,")"),e.R7$(4),e.Y8G("ngForOf",i.singleJobs)}}let Fo=(()=>{var n;class s extends j.H{getSingleJob(){this.waitDestroy(this.wrapApiResponse(this.singleJobService.aiApiV1SingleJobGetAllSingleJobsGet()).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0),void setTimeout(()=>this.getSingleJob(),1e4);this.singleJobs=t.data??[],this.stopStatusObj(),setTimeout(()=>this.getSingleJob(),1e4)}))}ngOnInit(){this.initStatusObj(),this.getSingleJob()}constructor(t,o){super(),(0,l.A)(this,"shareBankService",void 0),(0,l.A)(this,"singleJobService",void 0),(0,l.A)(this,"backTo","/super-role/admin-tool"),(0,l.A)(this,"singleJobs",[]),this.shareBankService=t,this.singleJobService=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(Ao.x),e.rXU(w.V$))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["job-progress-management"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-3"],[1,"intro-y","h-full"],["class","box p-3 mt-5",4,"ngFor","ngForOf"],[1,"box","p-3","mt-5"],[1,"font-medium","text-slate-500"],[4,"ngIf"]],template:function(t,o){if(1&t&&(e.j41(0,"teacher-layout",1),e.DNE(1,ko,1,1,"azt-loading-effect",2)(2,yo,8,5,"ng-template",null,0,e.C5r),e.k0s()),2&t){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,A.K,d.MD,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.bH,f.Id,b.k],encapsulation:2})),s})();var Eo=p(43885),we=p(97767),Ro=p(96797);const zo=(n,s)=>({"pt-1 pb-3":n,"pt-3":s}),Mo=n=>({display:n});function Go(n,s){1&n&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}let Do=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"isShowExplain",!1),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"renderConfigObj",void 0)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:9,consts:[["elementGroup",""],["elementHook",""],["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","mt-1","px-3",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngClass","ngStyle"],[2,"width","fit-content"],[3,"content"],[1,"mt-1","box","p-2"]],template:function(t,o){if(1&t&&(e.DNE(0,Go,3,3,"div",2),e.j41(1,"div",3,0)(3,"div",4,1),e.nrm(5,"azt-dynamic-hook",5),e.k0s()()),2&t){let a;const r=e.sdS(2),u=e.sdS(4);e.Y8G("ngIf",r.offsetWidth<u.offsetWidth&&o.isMobileDevice),e.R7$(),e.Y8G("ngClass",e.l_i(4,zo,!o.isMobileDevice,o.isMobileDevice))("ngStyle",e.eq3(7,Mo,o.isShowExplain&&o.questionObj.help?"inherit":"none")),e.R7$(4),e.Y8G("content",null!==(a=o.questionObj.help)&&void 0!==a?a:"")}},dependencies:[$.x,d.MD,d.YU,d.bT,d.B3,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,b.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']})),s})();const $o=n=>({"skeleton-box-loading":n});function Bo(n,s){if(1&n&&e.nrm(0,"div",3),2&n){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,$o,i.renderConfigObj.isFirstRender))}}function Po(n,s){if(1&n&&(e.j41(0,"div",13)(1,"b",14),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.nrm(4,"azt-dynamic-hook",5),e.k0s()),2&n){let i;const t=s.$implicit,o=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,o.questionObj)?(null!==(i=t.alpha)&&void 0!==i?i:t.key).toLowerCase()+")":(null!==(i=t.alpha)&&void 0!==i?i:t.key)+"."),e.R7$(2),e.Y8G("content",t.content)}}function No(n,s){if(1&n&&(e.j41(0,"div",11),e.DNE(1,Po,5,4,"div",12),e.k0s()),2&n){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",i.questionObj.answers)}}function Qo(n,s){if(1&n&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.questionObj.answerResult.length?i.questionObj.answerResult.join(" | "):""," ")}}function Lo(n,s){1&n&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}function Ko(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",16)(1,"a",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showExplainBox())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&n){const i=e.XpG(2);e.R7$(2),e.SpI(" ",i.isShowExplain?e.bMT(3,1,"lang_auto_an_giai_thich"):e.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function Yo(n,s){if(1&n&&(e.j41(0,"div",4)(1,"div"),e.nrm(2,"azt-dynamic-hook",5),e.DNE(3,No,2,2,"div",6),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isTrueFalseAnswer"),e.j41(6,"div",7),e.DNE(7,Qo,3,4,"h2",8),e.nI1(8,"isEssayAnswer"),e.DNE(9,Lo,3,3,"ng-template",null,1,e.C5r)(11,Ko,5,5,"div",9),e.k0s()(),e.nrm(12,"azt-question-explain-box",10),e.k0s()),2&n){let i;const t=e.sdS(10),o=e.XpG();e.R7$(2),e.Y8G("content",null!==(i=o.questionObj.content)&&void 0!==i?i:""),e.R7$(),e.Y8G("ngIf",(e.bMT(4,8,o.questionObj)||e.bMT(5,10,o.questionObj))&&o.questionObj.answers&&o.questionObj.answers.length>0),e.R7$(4),e.Y8G("ngIf",o.questionObj.answerResult&&!e.bMT(8,12,o.questionObj))("ngIfElse",t),e.R7$(4),e.Y8G("ngIf",o.questionObj.help),e.R7$(),e.Y8G("isShowExplain",o.isShowExplain)("questionObj",o.questionObj)("renderConfigObj",o.renderConfigObj)}}let ae=(()=>{var n;class s extends he{constructor(...t){super(...t),(0,l.A)(this,"questionObj",void 0),(0,l.A)(this,"follower",new E),(0,l.A)(this,"questionLabel",""),(0,l.A)(this,"isShowExplain",!1)}customQuestionLabel(t){const o=this.commonService.castJsonToObj(t??"")??void 0;return o?.label?o.label:"C\xe2u"}showExplainBox(){this.isShowExplain=!this.isShowExplain}initRenderBox(){let t=new ve(!0,!1,!1);super.initData(t,this.follower,this.questionObj),this.questionLabel=this.customQuestionLabel(this.questionObj.expandInfo)+" "+(null!=this.questionObj.labelIndex?this.questionObj.labelIndex:this.questionObj.rawIndex)}ngOnInit(){super.ngOnInit(),this.initRenderBox()}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-question-standalone-for-classification-tool"]],inputs:{questionObj:"questionObj",follower:"follower"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["elementRended",""],["essayAnswer",""],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"box","p-3"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex","justify-between"],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],["class","ml-auto mt-1",4,"ngIf"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(t,o){if(1&t&&(e.qex(0),e.DNE(1,Bo,1,3,"div",2)(2,Yo,13,14,"ng-template",null,0,e.C5r),e.bVm()),2&t){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[ge.C,$.x,Do,d.MD,d.YU,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.V6,_.Zm,_.FC,f.Id,b.k],styles:[".box-content[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #fafafa;margin:15px;box-shadow:2px 2px 5px #eee}.button-icon-feedback[_ngcontent-%COMP%]{color:gray;float:right}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}",'.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']})),s})();const qo=n=>({"td-question-selected":n}),le=()=>({"mr-1":!0});function Vo(n,s){1&n&&e.nrm(0,"azt-loading-ui",18)}function Xo(n,s){1&n&&e.nrm(0,"azt-loading-ui",18)}function Uo(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"tr",2)(2,"td")(3,"div",3)(4,"div",4)(5,"input",5),e.bIt("change",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChangeEvent.emit())}),e.k0s(),e.EFF(6," \xa0 "),e.j41(7,"label",6),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",7)(11,"div",8),e.nrm(12,"azt-question-standalone-for-classification-tool",9),e.k0s()(),e.j41(13,"div",7)(14,"span",10),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.openEditObjectiveDialogEvent.emit(o))}),e.nrm(15,"lucide-icon",11),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"span"),e.EFF(19," \xa0\xa0|\xa0\xa0 "),e.j41(20,"a",10),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.filterBySimilarQuestionEvent.emit(o))}),e.nrm(21,"lucide-icon",12),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()(),e.j41(24,"td",13)(25,"span",14),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.approvedThisQuestionsEvent.emit({objs:[o],objectiveId:a.objectiveId}))}),e.DNE(26,Vo,1,0,"azt-loading-ui",15),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.j41(29,"span",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.rejectQuestionsEvent.emit([o]))}),e.DNE(30,Xo,1,0,"azt-loading-ui",15),e.nrm(31,"lucide-icon",17),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.bVm()}if(2&n){const i=s.$implicit,t=e.XpG();e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(2),e.Y8G("ngClass",e.eq3(30,qo,i.selectedCheckBoxFormControl.value)),e.R7$(2),e.Mz_("id","checkbox_for_question_",i.id,""),e.Y8G("formControl",i.selectedCheckBoxFormControl),e.R7$(2),e.Mz_("for","checkbox_for_question_",i.id,""),e.R7$(),e.JRh(e.bMT(9,20,"lang_azota_tool_knowledge_choose_this_question")),e.R7$(3),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",t.followerRenderQuest)("questionObj",i),e.R7$(3),e.Y8G("ngClass",e.lJ4(32,le)),e.R7$(),e.SpI(" ",e.bMT(17,22,"lang_azota_tool_knowledge_edit_objective_button")," "),e.R7$(5),e.Y8G("ngClass",e.lJ4(33,le)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_azota_tool_knowledge_approved_by_similar_question_button")," "),e.R7$(4),e.Y8G("ngIf",i.isApproving),e.R7$(),e.SpI(" ",e.bMT(28,26,"lang_azota_tool_knowledge_approved_objective_button")," "),e.R7$(3),e.Y8G("ngIf",i.isRejecting),e.R7$(),e.Y8G("ngClass",e.lJ4(34,le)),e.R7$(),e.SpI(" ",e.bMT(33,28,"lang_azota_tool_knowledge_question_is_low_quality_button")," ")}}let Jo=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"objs",[]),(0,l.A)(this,"schoolLevelId",void 0),(0,l.A)(this,"schoolSubjectId",void 0),(0,l.A)(this,"bookId",void 0),(0,l.A)(this,"objectiveId",void 0),(0,l.A)(this,"totalSelectedCheckBox",void 0),(0,l.A)(this,"followerRenderQuest",void 0),(0,l.A)(this,"selectedCheckBoxChangeEvent",new e.bkB),(0,l.A)(this,"openEditObjectiveDialogEvent",new e.bkB),(0,l.A)(this,"approvedThisQuestionsEvent",new e.bkB),(0,l.A)(this,"rejectQuestionsEvent",new e.bkB),(0,l.A)(this,"filterBySimilarQuestionEvent",new e.bkB)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-approve-classification-table"]],inputs:{objs:"objs",schoolLevelId:"schoolLevelId",schoolSubjectId:"schoolSubjectId",bookId:"bookId",objectiveId:"objectiveId",totalSelectedCheckBox:"totalSelectedCheckBox",followerRenderQuest:"followerRenderQuest"},outputs:{selectedCheckBoxChangeEvent:"selectedCheckBoxChangeEvent",openEditObjectiveDialogEvent:"openEditObjectiveDialogEvent",approvedThisQuestionsEvent:"approvedThisQuestionsEvent",rejectQuestionsEvent:"rejectQuestionsEvent",filterBySimilarQuestionEvent:"filterBySimilarQuestionEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:1,consts:[[1,"table","table-report","mt-3"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"p-3",3,"ngClass"],[1,"flex","items-centers"],["type","checkbox",1,"show-code","form-check-input",3,"change","id","formControl"],[1,"form-check-label",3,"for"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"],[1,"clickable","link-color","link-text",3,"click"],["name","tags","size","16",3,"ngClass"],["name","layers-3","size","16",3,"ngClass"],[1,"w-60","text-center"],[1,"btn","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"text-danger","mt-8","inline-block","clickable","flex","items-center",3,"click"],["name","octagon-alert","size","16",3,"ngClass"],[1,"mr-1"]],template:function(t,o){1&t&&(e.j41(0,"table",0)(1,"tbody"),e.DNE(2,Uo,34,35,"ng-container",1),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",o.objs))},dependencies:[ae,k.R,d.MD,d.YU,d.Sq,d.bT,c.X1,c.Zm,c.BC,c.l_,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,f.Id,b.k,J],encapsulation:2})),s})();class H{constructor(){(0,l.A)(this,"similarQuestionId",void 0),(0,l.A)(this,"searchKeyword","")}isFilter(){return null!=this.similarQuestionId||""!=this.searchKeyword}}function Wo(n,s){if(1&n){const i=e.RV6();e.j41(0,"span",2),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&n){const i=e.XpG();e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_azota_tool_knowledge_approved_similar_question_filter"),": ",i.filterObj.similarQuestionId," "),e.R7$(3),e.JRh(e.bMT(5,5,"lang_common_remove"))}}function Ho(n,s){if(1&n){const i=e.RV6();e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_azota_tool_knowledge_approved_search_by_keyword_filter")," "),e.R7$(3),e.JRh(e.bMT(5,4,"lang_common_remove")))}let Zo=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"filterObj",void 0),(0,l.A)(this,"changeFilterObjEvent",new e.bkB)}removeFilter(){this.filterObj=new H,this.changeFilterObjEvent.emit(this.filterObj)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-approve-classification-filter-box"]],inputs:{filterObj:"filterObj"},outputs:{changeFilterObjEvent:"changeFilterObjEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["class","mr-3",4,"ngIf"],[4,"ngIf"],[1,"mr-3"],[1,"text-danger","clickable",3,"click"]],template:function(t,o){1&t&&e.DNE(0,Wo,6,7,"span",0)(1,Ho,6,6,"span",1),2&t&&(e.Y8G("ngIf",o.filterObj.similarQuestionId),e.R7$(),e.Y8G("ngIf",""!=o.filterObj.searchKeyword))},dependencies:[d.MD,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();var ei=p(36258);const xe=n=>({nodeObjs:n}),ti=(n,s)=>({"text-pending":n," link-color-hover":s});function ni(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",3),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function oi(n,s){1&n&&e.eu8(0)}function ii(n,s){if(1&n&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,oi,1,0,"ng-container",4),e.k0s()()),2&n){const i=e.XpG(),t=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,xe,i.nodeObjs))}}function si(n,s){1&n&&e.nrm(0,"lucide-icon",13)}function ai(n,s){1&n&&e.nrm(0,"lucide-icon",14)}function li(n,s){if(1&n&&(e.j41(0,"i"),e.DNE(1,si,1,0,"lucide-icon",11)(2,ai,1,0,"lucide-icon",12),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function ri(n,s){1&n&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function ci(n,s){1&n&&e.eu8(0)}function di(n,s){if(1&n&&(e.qex(0),e.DNE(1,ci,1,0,"ng-container",4),e.bVm()),2&n){const i=e.XpG().$implicit;e.XpG(3);const t=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,xe,i.children))}}function ui(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(4,li,3,2,"i",5)(5,ri,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()()(),e.DNE(11,di,2,4,"ng-container",5),e.bVm()}if(2&n){const i=s.$implicit;e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(),e.Y8G("ngClass",e.l_i(14,ti,i.isSelected,!i.isSelected)),e.R7$(),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}function _i(n,s){if(1&n&&(e.qex(0),e.DNE(1,ui,12,17,"ng-container",6),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function pi(n,s){if(1&n&&e.DNE(0,_i,2,1,"ng-container",5),2&n){const i=s.nodeObjs,t=e.XpG();e.Y8G("ngIf",t.asTemplateDataObj(i))}}let mi=(()=>{var n;class s extends W{constructor(...t){super(...t),(0,l.A)(this,"levelId",void 0),(0,l.A)(this,"subjectId",void 0),(0,l.A)(this,"bookId",void 0),(0,l.A)(this,"selectedObj",void 0),(0,l.A)(this,"searchContent",void 0),(0,l.A)(this,"allowSelectKnowledgeOrObjective","only_objective"),(0,l.A)(this,"selectKnowledgeOrObjectiveEvent",new e.bkB),(0,l.A)(this,"nodeObjs",[]),(0,l.A)(this,"sAztKnowledgeObjectiveService",(0,e.WQX)(R))}clickToNode(t){return"only_objective"==this.allowSelectKnowledgeOrObjective&&t.data.objectiveId||"knowledge_or_objective"==this.allowSelectKnowledgeOrObjective&&(t.data.knowledgeId||t.data.objectiveId)?this.selectKnowledgeOrObjectiveEvent.emit(t.data):void(t.isExpand?this.collapse(t):this.expand(t))}asTemplateDataObj(t){return t}initData(t,o,a){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(t,o,!1,a).subscribe(r=>{if(r.errorMessage||!r.data)return this.errorStatusObj(r.errorMessage??"",!0);this.nodeObjs=this.standardTreeNodes(r.data.objs,0),this.stopStatusObj()})}standardTreeNodes(t,o){let a=[];return t.forEach(r=>{let u=!1;this.selectedObj?.knowledgeId&&r.knowledgeId==this.selectedObj.knowledgeId&&(u=!0),this.selectedObj?.objectiveId&&r.objectiveId==this.selectedObj.objectiveId&&(u=!0);let C={level:o,typeNode:r.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:u,text:r.title,data:{...r,children:[]},children:[]};C.children=this.standardTreeNodes(r.children,o+1),a.push(C)}),a}ngOnChanges(t){t.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["coazt-knowledge-objective-tree-for-common-question"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",selectedObj:"selectedObj",searchContent:"searchContent",allowSelectKnowledgeOrObjective:"allowSelectKnowledgeOrObjective"},outputs:{selectKnowledgeOrObjectiveEvent:"selectKnowledgeOrObjectiveEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:5,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"click","ngClass"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"]],template:function(t,o){if(1&t&&e.DNE(0,ni,1,1,"azt-loading-effect",2)(1,ii,3,4,"ng-template",null,0,e.C5r)(3,pi,1,1,"ng-template",null,1,e.C5r),2&t){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[A.K,d.MD,d.YU,d.Sq,d.bT,d.T3,d.Jj,c.X1,g.iI,c.YN,v.s,m.flO,m.WGl,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})(),Ae=(()=>{var n;class s extends S._{searchByText(t){this.searchContent=t}selectKnowledgeOrObjective(t){this.dialogRef.close(t)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(t,o){super(o,t),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),(0,l.A)(this,"searchContent",void 0),this.dialogRef=t,this.data=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["coazt-knowledge-objective-dialog-for-common-question"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"onSearch","isServerSearch","placeholder"],[3,"minHeight"],[3,"selectKnowledgeOrObjectiveEvent","levelId","subjectId","bookId","selectedObj","searchContent","allowSelectKnowledgeOrObjective"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.nI1(5,"mytranslate"),e.bIt("onSearch",function(r){return o.searchByText(r.searchObj)}),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree-for-common-question",6),e.bIt("selectKnowledgeOrObjectiveEvent",function(r){return o.selectKnowledgeOrObjective(r)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&t&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,10,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(),e.Y8G("levelId",o.data.levelId)("subjectId",o.data.subjectId)("bookId",o.data.bookId)("selectedObj",o.data.selectedObj)("searchContent",null==o.searchContent?null:o.searchContent.searchContent)("allowSelectKnowledgeOrObjective",o.data.allowSelectKnowledgeOrObjective),e.R7$(3),e.SpI(" ",e.bMT(11,12,"lang_button_close")," "))},dependencies:[we.W,ei.U,mi,d.MD,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})(),gi=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"questionRenderService",(0,e.WQX)(P.g)),(0,l.A)(this,"configRenderService",new D.y(!0)),(0,l.A)(this,"sAztDialogService",(0,e.WQX)(F.i)),(0,l.A)(this,"sAztKnowledgeObjectiveService",(0,e.WQX)(R)),(0,l.A)(this,"aiQuestionBankService",(0,e.WQX)(w.gK)),(0,l.A)(this,"questionService",(0,e.WQX)(U.wP)),(0,l.A)(this,"activeRoute",(0,e.WQX)(g.nX)),(0,l.A)(this,"followerRenderQuest",new E),(0,l.A)(this,"backTo",""),(0,l.A)(this,"schoolLevelId",0),(0,l.A)(this,"schoolSubjectId",0),(0,l.A)(this,"bookId",0),(0,l.A)(this,"objectiveId",0),(0,l.A)(this,"objs",[]),(0,l.A)(this,"curObjectiveObj",void 0),(0,l.A)(this,"totalSelectedCheckBox",0),(0,l.A)(this,"totalQuestionsAreShow",0),(0,l.A)(this,"filterObj",new H)}checkAll(){this.objs.forEach(t=>t.selectedCheckBoxFormControl.setValue(!0)),this.selectedCheckBoxChange()}unCheckAll(){this.objs.forEach(t=>t.selectedCheckBoxFormControl.setValue(!1)),this.selectedCheckBoxChange()}selectedCheckBoxChange(){this.totalSelectedCheckBox=this.objs.filter(t=>t.isShow&&t.selectedCheckBoxFormControl.value).length,this.totalQuestionsAreShow=this.objs.filter(t=>t.isShow).length}rejectQuestions(t){let o={items:t.map(a=>({questionId:a.id,objectiveId:-1}))};t.forEach(a=>a.isRejecting=!0),this.waitDestroy(this.wrapApiResponse(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(o)).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0),void t.forEach(r=>r.isRejecting=!1);t.forEach(r=>(r.isShow=!1,r.isRejecting=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)}))}approvedThisQuestions(t,o){let a={items:t.map(r=>({questionId:r.id,objectiveId:o}))};t.forEach(r=>r.isApproving=!0),this.waitDestroy(this.wrapApiResponse(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(a)).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0),void t.forEach(u=>u.isApproving=!1);t.forEach(u=>(u.isShow=!1,u.isApproving=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)}))}approvedAllSelectedQuestions(t){this.approvedThisQuestions(this.objs.filter(o=>o.isShow&&o.selectedCheckBoxFormControl.value),t)}openEditObjectiveDialog(t){this.sAztDialogService.open(Ae,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(a=>{a?.objectiveId&&this.approvedThisQuestions([t],a.objectiveId)})}openEditObjectiveForSelectedDialog(){this.sAztDialogService.open(Ae,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{o?.objectiveId&&this.approvedAllSelectedQuestions(o.objectiveId)})}loadMoreQuestions(){this.followerRenderQuest=new E,this.initStatusObj();let t=this.aiQuestionBankService.aiApiV1QuestionBankGetNotManualAssignObjectiveQuestionsGet(this.objectiveId,50);this.filterObj.similarQuestionId&&(t=this.aiQuestionBankService.aiApiV1QuestionBankGetSimilarQuestionsInObjectiveGet(this.objectiveId,this.filterObj.similarQuestionId)),""!=this.filterObj.searchKeyword&&(t=this.aiQuestionBankService.aiApiV1QuestionBankSearchQuestionsByChatGptInObjectivePost({objectiveId:this.objectiveId,description:this.filterObj.searchKeyword})),this.waitDestroy(this.wrapApiResponse(t).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.waitDestroy(this.questionService.apiQuestionsListPost({ids:o.data}).subscribe(a=>{this.loadQuest(a.data??[],r=>{this.followerRenderQuest.setNumQuest(this.objs.length),this.objs=r.map(u=>({...u,isApproving:!1,isRejecting:!1,isShow:!0,selectedCheckBoxFormControl:new c.MJ(!!this.filterObj.similarQuestionId,{nonNullable:!0})})),this.selectedCheckBoxChange(),this.stopStatusObj()})}))}))}loadQuest(t,o){const a=this.commonService.castJsonToClassObjs(Y.I,JSON.stringify(t))??[];this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>{o(r)}).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a)})}getObjectiveInfo(){this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(t=>{if(t.errorMessage||!t.data)return this.errorStatusObj(t.errorMessage??"",!0);this.curObjectiveObj=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(t.data.objs,this.objectiveId)})}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-base-classification-questions"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(t,o){},dependencies:[d.MD,c.X1,g.iI,c.YN,v.s,m.flO,h.L,f.Id,b.k],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}.td-question-selected[_ngcontent-%COMP%]{border:1px solid green;border-radius:3px}"]})),s})();function fi(n,s){if(1&n){const i=e.RV6();e.j41(0,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.totalSelectedCheckBox!=o.totalQuestionsAreShow?o.checkAll():o.unCheckAll())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&n){const i=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,i.totalSelectedCheckBox!=i.totalQuestionsAreShow?"lang_select_all":"lang_remove_all")," ")}}function bi(n,s){if(1&n){const i=e.RV6();e.j41(0,"span"),e.EFF(1," \xa0\xa0|\xa0\xa0 "),e.j41(2,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())}),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5," \xa0\xa0|\xa0\xa0 "),e.j41(6,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.approvedAllSelectedQuestions(o.objectiveId))}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()}if(2&n){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,4,"lang_azota_tool_knowledge_edit_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")"),e.R7$(4),e.Lme("",e.bMT(8,6,"lang_azota_tool_knowledge_approved_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")")}}function hi(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",13),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function vi(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.loadMoreQuestions())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_reload_list_questions")," "))}function Ci(n,s){1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_list_questions_are_empty")," "))}function ji(n,s){if(1&n){const i=e.RV6();e.j41(0,"app-tools-knowledge-approve-classification-table",14),e.bIt("selectedCheckBoxChangeEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChange())})("openEditObjectiveDialogEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.openEditObjectiveDialog(o))})("openEditObjectiveForSelectedDialogEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())})("approvedThisQuestionsEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.approvedThisQuestions(o.objs,o.objectiveId))})("rejectQuestionsEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.rejectQuestions(o))})("filterBySimilarQuestionEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.filterBySimilarQuestion(o))}),e.k0s(),e.DNE(1,vi,3,3,"div",15)(2,Ci,3,3,"span",10)}if(2&n){const i=e.XpG();e.Y8G("objs",i.objs)("schoolLevelId",i.schoolLevelId)("schoolSubjectId",i.schoolSubjectId)("bookId",i.bookId)("objectiveId",i.objectiveId)("totalSelectedCheckBox",i.totalSelectedCheckBox)("followerRenderQuest",i.followerRenderQuest),e.R7$(),e.Y8G("ngIf",i.objs.length>0&&!i.filterObj.isFilter()),e.R7$(),e.Y8G("ngIf",i.objs.length<=0||i.totalQuestionsAreShow<=0&&i.filterObj.isFilter())}}let Oi=(()=>{var n;class s extends gi{constructor(...t){super(...t),(0,l.A)(this,"searchContentObj",new Ro.Z)}onChangeFilterObj(t){this.filterObj=t,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}filterBySimilarQuestion(t){this.filterObj=new H,this.filterObj.similarQuestionId=t.id,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}onSearchBox(t){this.filterObj=new H,this.filterObj.searchKeyword=t.searchContent,this.searchContentObj=t,this.loadMoreQuestions()}ngOnInit(){super.ngOnInit(),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo=`/azota-tools/knowledge-tree-classification/${this.schoolLevelId}/${this.schoolSubjectId}/${this.bookId}`,this.loadMoreQuestions(),this.getObjectiveInfo()}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-approve-classification-for-objective"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:20,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"colorBackground","defaultHeight"],[1,"w-full"],[1,"mt-3","font-medium","box","p-3"],[3,"innerHtml"],[1,"mt-3"],[3,"onSearch","isManualSearch","searchContentObj","placeholder"],[1,"block","mt-3",3,"changeFilterObjEvent","filterObj"],["class","clickable link-color",3,"click",4,"ngIf"],[4,"ngIf"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"clickable","link-color",3,"click"],[3,"currentStatusObj"],[3,"selectedCheckBoxChangeEvent","openEditObjectiveDialogEvent","openEditObjectiveForSelectedDialogEvent","approvedThisQuestionsEvent","rejectQuestionsEvent","filterBySimilarQuestionEvent","objs","schoolLevelId","schoolSubjectId","bookId","objectiveId","totalSelectedCheckBox","followerRenderQuest"],["class","text-center clickable link-color link-text mt-3",3,"click",4,"ngIf"],[1,"text-center","clickable","link-color","link-text","mt-3",3,"click"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"teacher-layout",1)(1,"flexed-on-the-top",2)(2,"div",3)(3,"div",4),e.nrm(4,"div",5),e.nI1(5,"mathJaxContent"),e.nI1(6,"async"),e.nI1(7,"safeContentQuestion"),e.j41(8,"div",6)(9,"azt-search-box",7),e.nI1(10,"mytranslate"),e.bIt("onSearch",function(u){return e.eBV(a),e.Njj(o.onSearchBox(u.searchObj))}),e.k0s(),e.j41(11,"app-tools-knowledge-approve-classification-filter-box",8),e.bIt("changeFilterObjEvent",function(u){return e.eBV(a),e.Njj(o.onChangeFilterObj(u))}),e.k0s()(),e.j41(12,"div",6),e.DNE(13,fi,3,3,"span",9)(14,bi,9,8,"span",10),e.k0s()()()(),e.DNE(15,hi,1,1,"azt-loading-effect",11)(16,ji,3,9,"ng-template",null,0,e.C5r),e.k0s()}if(2&t){const a=e.sdS(17);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("colorBackground","#f0f8ffe8")("defaultHeight",""),e.R7$(3),e.Y8G("innerHtml",e.bMT(7,16,e.bMT(6,14,e.bMT(5,12,null==o.curObjectiveObj?null:o.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("isManualSearch",!0)("searchContentObj",o.searchContentObj)("placeholder",e.bMT(10,18,"lang_common_search_by_name")),e.R7$(2),e.Y8G("filterObj",o.filterObj),e.R7$(2),e.Y8G("ngIf",o.totalQuestionsAreShow>0),e.R7$(),e.Y8G("ngIf",o.totalSelectedCheckBox>0),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,Eo.$,we.W,Zo,A.K,Jo,d.MD,d.bT,d.Jj,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})();const ke=n=>({nodeObjs:n}),Ti=n=>({"text-danger":n}),re=n=>[n];function wi(n,s){1&n&&e.nrm(0,"azt-loading-ui")}function xi(n,s){1&n&&e.eu8(0)}function Ai(n,s){1&n&&e.nrm(0,"lucide-icon",18)}function ki(n,s){1&n&&e.nrm(0,"lucide-icon",19)}function Ii(n,s){if(1&n&&(e.j41(0,"i"),e.DNE(1,Ai,1,0,"lucide-icon",16)(2,ki,1,0,"lucide-icon",17),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function Si(n,s){1&n&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",20),e.k0s())}function yi(n,s){if(1&n&&(e.j41(0,"span",21),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&n){const i=e.XpG().$implicit,t=e.XpG(3);e.Y8G("routerLink",e.eq3(6,re,e.bMT(1,2,"/azota-tools/knowledge-tree-manage-practice/"+t.form.controls.schoolLevel.value+"/"+t.form.controls.schoolSubject.value+"/"+t.form.controls.bookIdFormControl.value+"/"+i.data.id))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_manage_practice")," ")}}function Fi(n,s){if(1&n&&(e.j41(0,"span",24),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&n){const i=e.XpG(2).$implicit,t=e.XpG(3);e.Y8G("routerLink",e.eq3(6,re,e.bMT(1,2,"/azota-tools/knowledge-tree-approve-classification-for-objective/"+t.form.controls.schoolLevel.value+"/"+t.form.controls.schoolSubject.value+"/"+t.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_approve_questions")," ")}}function Ei(n,s){1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_approved_all_questions")))}function Ri(n,s){if(1&n&&(e.qex(0),e.j41(1,"span",22),e.nI1(2,"navigationLocalize"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,Fi,4,8,"span",23)(6,Ei,3,3,"span",6),e.bVm()),2&n){const i=e.XpG().$implicit,t=e.XpG(3);e.R7$(),e.Y8G("routerLink",e.eq3(8,re,e.bMT(2,4,"/azota-tools/knowledge-tree-view-practice-for-objective/"+t.form.controls.schoolLevel.value+"/"+t.form.controls.schoolSubject.value+"/"+t.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(4,6,"lang_tool_knowledge_practice_for_objective")," "),e.R7$(2),e.Y8G("ngIf",i.data.numberOfNotManualQuestions>0),e.R7$(),e.Y8G("ngIf",i.data.numberOfNotManualQuestions<=0)}}function zi(n,s){1&n&&e.eu8(0)}function Mi(n,s){if(1&n&&(e.qex(0),e.DNE(1,zi,1,0,"ng-container",7),e.bVm()),2&n){const i=e.XpG().$implicit;e.XpG(3);const t=e.sdS(17);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,ke,i.children))}}function Gi(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"tr",9)(2,"td",10)(3,"div",11),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(4,Ii,3,2,"i",6)(5,Si,2,0,"i",6),e.j41(6,"label",12),e.nrm(7,"span",13),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()(),e.j41(11,"td",4),e.EFF(12),e.j41(13,"span",14),e.EFF(14),e.k0s()(),e.j41(15,"td",4),e.DNE(16,yi,4,8,"span",15)(17,Ri,7,10,"ng-container",6),e.k0s()(),e.DNE(18,Mi,2,4,"ng-container",6),e.bVm()}if(2&n){const i=s.$implicit,t=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,16,e.bMT(9,14,e.bMT(8,12,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(5),e.SpI(" ",i.data.numberOfManualQuestions," / "),e.R7$(),e.Y8G("ngClass",e.eq3(18,Ti,i.data.numberOfNotManualQuestions>0)),e.R7$(),e.JRh(i.data.numberOfNotManualQuestions),e.R7$(2),e.Y8G("ngIf",!i.data.objectiveId&&t.form.controls.bookIdFormControl.value>0),e.R7$(),e.Y8G("ngIf",i.data.objectiveId),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function Di(n,s){if(1&n&&(e.qex(0),e.DNE(1,Gi,19,20,"ng-container",8),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function $i(n,s){if(1&n&&e.DNE(0,Di,2,1,"ng-container",6),2&n){const i=s.nodeObjs,t=e.XpG();e.Y8G("ngIf",t.asTemplateDataObj(i))}}let Bi=(()=>{var n;class s extends W{constructor(...t){super(...t),(0,l.A)(this,"rawNodes",void 0),(0,l.A)(this,"form",void 0),(0,l.A)(this,"nodeObjs",[]),(0,l.A)(this,"loadingExport",!1),(0,l.A)(this,"txtDataExport","")}clickToNode(t){t.children.length&&(t.isExpand?this.collapse(t):this.expand(t))}asTemplateDataObj(t){return t}standardTreeNodes(t,o){let a=[];return t.forEach(r=>{let u={level:o,typeNode:r.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:r.title,data:{...r,children:[]},children:[]};u.children=this.standardTreeNodes(r.children,o+1),a.push(u)}),a}convertDataLineForChild(t){t.forEach(o=>{let a="";for(let r=0;r<o.level;r++)a+="\t";a+=1==o.data.nodeType?`[O-${o.data.objectiveId}]`:`[L${o.level+1}-${o.data.id}]`,a+=o.text,this.txtDataExport+=a+"\n",this.convertDataLineForChild(o.children)})}exportData(){let t=new Date;this.txtDataExport="",this.loadingExport=!0,this.nodeObjs.forEach(r=>{let u="";for(let C=0;C<r.level;C++)u+="\t";u+=1==r.data.nodeType?`[O-${r.data.objectiveId}]`:`[L${r.level+1}-${r.data.id}]`,u+=r.text,this.txtDataExport+=u+"\n",this.convertDataLineForChild(r.children)});let o=`azota-tree-knowledge-${this.form.controls.schoolLevel.value}-${this.form.controls.schoolSubject.value}-${t.getTime()}.txt`;const a=new Blob([this.txtDataExport],{type:"text/plain"});a&&this.commonService.downloadFileByUrl(window.URL.createObjectURL(a),o),this.loadingExport=!1}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-view-knowledge-tree-for-classification"]],inputs:{rawNodes:"rawNodes",form:"form"},standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:15,consts:[["recursiveListTmpl",""],[1,"table","table-report"],[1,"text-center"],[1,"text-center","w-48"],[1,"text-right"],[1,"btn","btn-success","text-white","ml-auto",3,"click","disabled"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],[3,"ngClass"],["class","link-color clickable",3,"routerLink",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"],[1,"link-color","clickable",3,"routerLink"],[1,"btn","btn-secondary","mr-3",3,"routerLink"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),e.EFF(4,"\xa0"),e.k0s(),e.j41(5,"th",3),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"th",4)(10,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(o.exportData())}),e.DNE(11,wi,1,0,"azt-loading-ui",6),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.j41(14,"tbody"),e.DNE(15,xi,1,0,"ng-container",7),e.k0s()(),e.DNE(16,$i,1,1,"ng-template",null,0,e.C5r)}if(2&t){const a=e.sdS(17);e.R7$(6),e.Lme("",e.bMT(7,7,"lang_tool_knowledge_manual_approved")," / ",e.bMT(8,9,"lang_tool_knowledge_manual_not_approved"),""),e.R7$(4),e.Y8G("disabled",o.loadingExport),e.R7$(),e.Y8G("ngIf",o.loadingExport),e.R7$(),e.SpI(" ",e.bMT(13,11,"lang_azt_export"),"\xa0.txt "),e.R7$(3),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.eq3(13,ke,o.nodeObjs))}},dependencies:[k.R,_.F2,d.MD,d.YU,d.Sq,d.bT,d.T3,d.Jj,c.X1,g.iI,g.Wk,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})();function Pi(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",5),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ni(n,s){if(1&n&&e.nrm(0,"app-tools-view-knowledge-tree-for-classification",7),2&n){const i=e.XpG(2);e.Y8G("form",i.form)("rawNodes",i.nodes)}}function Qi(n,s){if(1&n&&e.DNE(0,Ni,1,2,"app-tools-view-knowledge-tree-for-classification",6),2&n){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}let Li=(()=>{var n;class s extends j.H{changeLevelSubjectBookEvent(){let t=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-classification/"+t.schoolLevel+"/"+t.schoolSubject+"/"+t.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeForClassificationGet(t.schoolLevel,t.schoolSubject,t.bookIdFormControl>0?t.bookIdFormControl:void 0)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.nodes=o.data?.nodes??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_classification_title",description:"lang_cms_admin_tools_knowledge_tree_classification_title",image:"lang_cms_test_image"});let t=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),a=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(t),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(a)}constructor(t,o){super(),(0,l.A)(this,"aiElearningService",void 0),(0,l.A)(this,"activeRoute",void 0),(0,l.A)(this,"backTo","/super-role/admin-tool"),(0,l.A)(this,"form",void 0),(0,l.A)(this,"nodes",[]),this.aiElearningService=t,this.activeRoute=o,this.form=new c.gE({schoolLevel:new c.MJ(0,{nonNullable:!0}),schoolSubject:new c.MJ(0,{nonNullable:!0}),bookIdFormControl:new c.MJ(0,{nonNullable:!0})})}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(w.T5),e.rXU(g.nX))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:8,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"form","rawNodes",4,"ngIf"],[3,"form","rawNodes"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"config-level-subject-book",3),e.bIt("changeDataEvent",function(){return e.eBV(a),e.Njj(o.changeLevelSubjectBookEvent())}),e.k0s()(),e.DNE(3,Pi,1,1,"azt-loading-effect",4)(4,Qi,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&t){const a=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,G,A.K,Bi,d.MD,d.bT,c.X1,g.iI,c.YN,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();var Ki=p(57191);function Yi(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",9),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function qi(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",10),e.nrm(1,"div",11),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"breakLine"),e.nI1(5,"safeContentQuestion"),e.k0s(),e.j41(6,"div",12)(7,"span",13),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.getAiData(!0))}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()}if(2&n){let i;const t=e.XpG();e.R7$(),e.Y8G("innerHTML",e.bMT(5,8,e.bMT(4,6,null!==(i=e.bMT(3,4,e.bMT(2,2,t.resultData)))&&void 0!==i?i:"")),e.npT),e.R7$(7),e.JRh(e.bMT(9,10,"lang_tool_knowledge_practice_re_ask_ai"))}}let Vi=(()=>{var n;class s extends S._{getAiData(t){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeSuggestObjectiveForPracticeGet(this.data.practiceId,t)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.resultData=o.data.data,this.stopStatusObj()}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){this.getAiData(!1)}constructor(t,o){super(o,t),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"resultData",""),this.dialogRef=t,this.data=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-ask-practice-by-ai-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:6,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[3,"currentStatusObj"],[1,"box","p-3"],[1,"mt-2",3,"innerHTML"],[1,"text-center","mt-3"],[1,"btn","btn-primary",3,"click"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0),e.DNE(5,Yi,1,1,"azt-loading-effect",6)(6,qi,10,12,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()}if(2&t){const a=e.sdS(7);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(11,4,"lang_auto_dong")," ")}},dependencies:[A.K,d.MD,d.bT,d.Jj,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.km,_.ep,_.bt,f.Id,f.Yh,b.k],encapsulation:2})),s})();function Xi(n,s){if(1&n&&(e.j41(0,"mat-option",11),e.nrm(1,"span",12),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function Ui(n,s){1&n&&e.nrm(0,"azt-loading-ui",13)}function Ji(n,s){1&n&&e.nrm(0,"azt-loading-ui",13)}let Wi=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"obj",void 0),(0,l.A)(this,"objectiveObjs",void 0),(0,l.A)(this,"updateEvent",new e.bkB),(0,l.A)(this,"viewObjectiveObjs",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"sAztDialogService",(0,e.WQX)(F.i)),(0,l.A)(this,"objectiveIdFormControl",new c.MJ(0,{nonNullable:!0,validators:[]}))}checkByAI(){this.sAztDialogService.open(Vi,{data:{practiceId:this.obj.id},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}updateObj(){let t=this.objectiveIdFormControl.value;(this.obj.objectiveId??0)!=t&&(this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:this.obj.id,objectiveId:t||void 0})).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.obj.objectiveId=t,this.obj.objectiveName=this.objectiveObjs.find(a=>a.id==t)?.name??"",this.updateEvent.emit(this.obj),this.successStatusObj("lang_cms_update_success",!0)})))}ngOnInit(){this.viewObjectiveObjs=[{id:0,name:this.commonService.myTranslateInstant("lang_tool_knowledge_non_objective")??"none",questionHistories:[]}],this.viewObjectiveObjs=this.viewObjectiveObjs.concat(this.objectiveObjs),this.objectiveIdFormControl.setValue(this.obj.objectiveId??0)}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-update-objective"]],inputs:{obj:"obj",objectiveObjs:"objectiveObjs"},outputs:{updateEvent:"updateEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:20,vars:20,consts:[["searchInListObjective","searchInList"],[1,"flex","items-center"],[1,"w-full"],["appearance","fill",1,"box","mb-5","w-full",2,"margin-bottom","0px"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-none"],[1,"btn","btn-secondary","ml-3",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary","ml-3",3,"click"],[3,"value"],[3,"innerHTML"],[1,"mr-1"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-select",4,0),e.nI1(5,"mytranslate"),e.j41(6,"mat-option"),e.nrm(7,"ngx-mat-select-search",5),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,Xi,5,8,"mat-option",6),e.k0s()()(),e.j41(11,"div",7)(12,"span",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.checkByAI())}),e.DNE(13,Ui,1,0,"azt-loading-ui",9),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"span",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.updateObj())}),e.DNE(17,Ji,1,0,"azt-loading-ui",9),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()()}if(2&t){const a=e.sdS(4);e.R7$(3),e.FS9("placeholder","---"+e.bMT(5,10,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.objectiveIdFormControl),e.R7$(4),e.FS9("placeholderLabel",e.bMT(8,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(9,14,"lang_search_not_found")),e.Y8G("formControl",a.searchControl),e.R7$(3),e.Y8G("ngForOf",a.filter(o.viewObjectiveObjs,"name")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(15,16,"lang_tool_knowledge_practice_ask_ai")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(19,18,"lang_common_save")," ")}},dependencies:[y.An,y.U9,N.x,k.R,d.MD,d.Sq,d.bT,d.Jj,c.X1,c.BC,c.l_,g.iI,c.YN,_.wp,v.s,z.wT,Q.rl,M.VO,m.flO,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})();function Hi(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",10),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Zi(n,s){if(1&n&&(e.qex(0),e.j41(1,"div",12)(2,"div",13),e.nrm(3,"azt-question-standalone-for-classification-tool",14),e.k0s()(),e.bVm()),2&n){const i=s.$implicit,t=e.XpG(2);e.R7$(2),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",t.followerRenderQuest)("questionObj",i)}}function es(n,s){if(1&n&&e.DNE(0,Zi,4,3,"ng-container",11),2&n){const i=e.XpG();e.Y8G("ngForOf",i.questionObjs)}}let ts=(()=>{var n;class s extends S._{btnCloseDialog(){this.dialogRef.close(!1)}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetQuestionsOfPracticeGet(this.data.id)).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);this.getListQuestions(t.data??[])}))}getListQuestions(t){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsListPost({ids:t}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],a=>{this.followerRenderQuest.setNumQuest(a.length),this.questionObjs=a,this.stopStatusObj()})}))}loadQuest(t,o){const a=this.commonService.castJsonToClassObjs(Y.I,JSON.stringify(t))??[];this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>{o(r)}).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a)})}ngOnInit(){this.initData()}constructor(t,o){super(o,t),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"questionService",(0,e.WQX)(U.wP)),(0,l.A)(this,"followerRenderQuest",new E),(0,l.A)(this,"questionRenderService",(0,e.WQX)(P.g)),(0,l.A)(this,"configRenderService",new D.y(!0)),(0,l.A)(this,"questionObjs",[]),this.dialogRef=t,this.data=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-split-practice-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:13,vars:6,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[3,"currentStatusObj"],[4,"ngFor","ngForOf"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6),e.DNE(6,Hi,1,1,"azt-loading-effect",7)(7,es,1,1,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()}if(2&t){const a=e.sdS(8);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(12,4,"lang_auto_dong")," ")}},dependencies:[A.K,ae,d.MD,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,f.Yh,b.k,J],encapsulation:2})),s})();function ns(n,s){if(1&n&&(e.qex(0),e.nrm(1,"div",14),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"breakLine"),e.nI1(5,"safeContentQuestion"),e.bVm()),2&n){let i;const t=s.$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(5,7,e.bMT(4,5,null!==(i=e.bMT(3,3,e.bMT(2,1,"- "+t)))&&void 0!==i?i:"")),e.npT)}}function os(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",15)(1,"span",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.viewQuestionsOfPractice(o))}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4," \xa0\xa0|\xa0\xa0 "),e.j41(5,"span",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.splitEvent.emit(o))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8," \xa0\xa0|\xa0\xa0 "),e.j41(9,"span",18),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.editEvent.emit(o))}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.EFF(12," \xa0\xa0|\xa0\xa0 "),e.j41(13,"span",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.deleteEvent.emit(o))}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()}2&n&&(e.R7$(2),e.JRh(e.bMT(3,4,"lang_tool_knowledge_manage_show_questions_of_practice")),e.R7$(4),e.JRh(e.bMT(7,6,"lang_tool_knowledge_manage_split_practice_question_prompt")),e.R7$(4),e.JRh(e.bMT(11,8,"lang_common_edit")),e.R7$(4),e.JRh(e.bMT(15,10,"lang_common_delete")))}function is(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",6)(1,"app-tools-knowledge-tree-classification-update-objective",20),e.bIt("updateEvent",function(o){e.eBV(i);const a=e.XpG(3);return e.Njj(a.updateEvent.emit(o))}),e.k0s()()}if(2&n){const i=e.XpG(2).$implicit,t=e.XpG();e.R7$(),e.Y8G("obj",i)("objectiveObjs",t.allObjectiveObjs)}}function ss(n,s){if(1&n&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.nrm(7,"div",11),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"breakLine"),e.nI1(11,"safeContentQuestion"),e.k0s(),e.j41(12,"div",9)(13,"div",10),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"div",12),e.DNE(17,ns,6,9,"ng-container",0),e.k0s()()(),e.DNE(18,os,16,12,"div",13),e.k0s(),e.DNE(19,is,2,2,"div",5),e.k0s()),2&n){let i;const t=e.XpG().$implicit,o=e.XpG();e.R7$(5),e.SpI("- ** ",e.bMT(6,6,"lang_tool_knowledge_manage_practice_description")," :**"),e.R7$(2),e.Y8G("innerHTML",e.bMT(11,14,e.bMT(10,12,null!==(i=e.bMT(9,10,e.bMT(8,8,"- "+t.description)))&&void 0!==i?i:"")),e.npT),e.R7$(7),e.SpI("- **",e.bMT(15,16,"lang_tool_knowledge_manage_practice_example"),":**"),e.R7$(3),e.Y8G("ngForOf",t.examples),e.R7$(),e.Y8G("ngIf",o.showAction),e.R7$(),e.Y8G("ngIf",o.showAction)}}function as(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"span",2),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.collapseByObjectiveId(o))}),e.nrm(3,"lucide-icon",3)(4,"span",4),e.nI1(5,"mathJaxContent"),e.nI1(6,"async"),e.nI1(7,"safeContentQuestion"),e.k0s(),e.DNE(8,ss,20,18,"div",5),e.k0s(),e.bVm()}if(2&n){const i=s.$implicit;e.R7$(3),e.Y8G("name",i.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(),e.Y8G("innerHTML",e.bMT(7,8,e.bMT(6,6,e.bMT(5,4,i.name))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}let Z=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"objs",void 0),(0,l.A)(this,"objectiveObjs",void 0),(0,l.A)(this,"allObjectiveObjs",void 0),(0,l.A)(this,"showAction",!0),(0,l.A)(this,"editEvent",new e.bkB),(0,l.A)(this,"deleteEvent",new e.bkB),(0,l.A)(this,"splitEvent",new e.bkB),(0,l.A)(this,"updateEvent",new e.bkB),(0,l.A)(this,"sAztDialogService",(0,e.WQX)(F.i)),(0,l.A)(this,"viewObjs",[])}viewQuestionsOfPractice(t){this.sAztDialogService.open(ts,{data:t,restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}collapseByObjectiveId(t){t.isExpand=!t.isExpand}initViewData(){let t=this.objs.map(o=>({...o,isExpand:this.viewObjs.find(a=>a.id==o.id)?.isExpand??!1}));this.viewObjs=t}ngOnChanges(){this.initViewData()}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-list-practice-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",allObjectiveObjs:"allObjectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"box","p-3","mb-3"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[3,"innerHTML"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"flex","items-center"],[1,"w-full"],[1,"mb-3"],[1,"font-medium"],[1,"mt-2",2,"padding-left","20px",3,"innerHTML"],[2,"padding-left","20px"],["class","flex-none text-right",4,"ngIf"],[1,"mt-2",3,"innerHTML"],[1,"flex-none","text-right"],[1,"text-secondary","clickable",3,"click"],[1,"text-pending","clickable",3,"click"],[1,"link-color","clickable",3,"click"],[1,"text-danger","clickable",3,"click"],[3,"updateEvent","obj","objectiveObjs"]],template:function(t,o){1&t&&e.DNE(0,as,9,10,"ng-container",0),2&t&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[Wi,d.MD,d.Sq,d.bT,d.Jj,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,_.km,_.ep,_.bt,f.Id,b.k],encapsulation:2})),s})();const ls=n=>({"text-slate-400":n});function rs(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"app-tools-knowledge-tree-classification-list-practice-box",11),e.bIt("editEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.editEvent.emit(o))})("deleteEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.deleteEvent.emit(o))})("splitEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.splitEvent.emit(o))})("updateEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.updateEvent.emit(o))}),e.k0s()()()}if(2&n){const i=e.XpG().$implicit,t=e.XpG();e.R7$(2),e.Y8G("objs",i.childrenObjs)("objectiveObjs",t.objectiveObjs)("allObjectiveObjs",t.allObjectiveObjs)}}function cs(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.collapseByGroupId(null==o?null:o.objectiveObj))}),e.nrm(5,"lucide-icon",5),e.j41(6,"h2",6),e.nrm(7,"span",7),e.nI1(8,"mytranslate"),e.nI1(9,"mathJaxContent"),e.nI1(10,"async"),e.nI1(11,"safeContentQuestion"),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.DNE(14,rs,3,3,"div",8),e.k0s(),e.bVm()}if(2&n){let i;const t=s.$implicit;e.R7$(3),e.Y8G("ngClass",e.eq3(16,ls,t.childrenObjs.length<=0)),e.R7$(2),e.Y8G("name",t.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(2),e.Y8G("innerHTML",e.bMT(11,12,e.bMT(10,10,e.bMT(9,8,null!==(i=null==t||null==t.objectiveObj?null:t.objectiveObj.name)&&void 0!==i?i:e.bMT(8,6,"lang_tool_knowledge_manage_not_select_objective")))),e.npT),e.R7$(5),e.SpI(" ","("+t.childrenObjs.length+" "+e.bMT(13,14,"lang_tool_knowledge_manage_total_children_practice")+")"," "),e.R7$(2),e.Y8G("ngIf",t.isExpand)}}let ds=(()=>{var n;class s extends j.H{constructor(...t){super(...t),(0,l.A)(this,"objs",void 0),(0,l.A)(this,"objectiveObjs",void 0),(0,l.A)(this,"allObjectiveObjs",void 0),(0,l.A)(this,"showAction",!0),(0,l.A)(this,"editEvent",new e.bkB),(0,l.A)(this,"deleteEvent",new e.bkB),(0,l.A)(this,"splitEvent",new e.bkB),(0,l.A)(this,"updateEvent",new e.bkB),(0,l.A)(this,"viewObjs",[])}collapseByGroupId(t){let o=this.viewObjs.find(a=>a.objectiveObj?.id==t?.id);o&&(o.isExpand=!o.isExpand)}isExpandAll(){return this.viewObjs.every(t=>t.isExpand)}expandAll(){this.viewObjs.forEach(t=>t.isExpand=!0)}collapseAll(){this.viewObjs.forEach(t=>t.isExpand=!1)}initGroupData(){let t=[];this.objectiveObjs.forEach(a=>{let r=this.objs.filter(C=>C.objectiveId==a.id),u=this.viewObjs.find(C=>C.objectiveObj?.id==a?.id)?.isExpand??!1;t.push({isExpand:u,objectiveObj:a,childrenObjs:r})});let o=this.objs.filter(a=>null==a.objectiveId);o.length&&(t=[{isExpand:this.viewObjs.find(u=>null==u.objectiveObj?.id)?.isExpand??!1,objectiveObj:void 0,childrenObjs:o}].concat(t)),this.viewObjs=t}ngOnChanges(){this.initGroupData()}}return n=s,(0,l.A)(s,"\u0275fac",(()=>{let i;return function(o){return(i||(i=e.xGo(n)))(o||n)}})()),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-practice-group-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",allObjectiveObjs:"allObjectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mb-3"],[1,"flex","items-center"],[1,"font-medium",3,"ngClass"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[1,"font-medium"],[3,"innerHTML"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"box","p-3"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"]],template:function(t,o){1&t&&e.DNE(0,cs,15,18,"ng-container",0),2&t&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[Z,d.MD,d.YU,d.Sq,d.bT,d.Jj,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})(),Ie=(()=>{var n;class s extends j.H{removeExample(t){this.form.controls.examples=new c.Yp(this.form.controls.examples.controls.filter(o=>o.controls.id.value!=t)),this.form.controls.examples.controls.length||this.addMoreExample()}addMoreExample(){this.form.controls.examples.push(new c.gE({id:new c.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new c.MJ("",{nonNullable:!0})}))}emitResult(){this.saveResultEvent.emit(this.hasNewResult)}initForm(){this.form=new c.gE({name:new c.MJ("",{nonNullable:!0,validators:[c.k0.required]}),description:new c.MJ("",{nonNullable:!0,validators:[]}),examples:new c.Yp([],{validators:[]}),objectiveId:new c.MJ(0,{nonNullable:!0,validators:[]})})}constructor(){super(),(0,l.A)(this,"saveResultEvent",new e.bkB),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"sAztUuidService",(0,e.WQX)(je.D)),(0,l.A)(this,"form",void 0),(0,l.A)(this,"hasNewResult",!1),this.initForm()}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-base-practice-form"]],outputs:{saveResultEvent:"saveResultEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(t,o){},dependencies:[d.MD,c.X1,g.iI,c.YN,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})(),ce=(()=>{var n;class s{constructor(t){(0,l.A)(this,"el",void 0),this.el=t}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(t){t.parentElement&&(t.parentElement.style.minHeight=t.parentElement.clientHeight+"px"),t.style.overflow="hidden",t.style.height="auto";let o=t.scrollHeight+30;o=o<57?57:o,t.style.height=o+"px",t.parentElement&&(t.parentElement.style.minHeight="auto")}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(e.aKT))}),(0,l.A)(s,"\u0275dir",e.FsC({type:n,selectors:[["textarea","autoResize",""]],hostBindings:function(t,o){1&t&&e.bIt("input",function(r){return o.onInput(r.target.value)})("focus",function(){return o.onFocus()})},standalone:!0})),s})();const us=n=>({"border-danger":n});function _s(n,s){if(1&n&&(e.j41(0,"mat-option",27),e.nrm(1,"span",28),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function ps(n,s){if(1&n){const i=e.RV6();e.j41(0,"div")(1,"div",29)(2,"div",30),e.nrm(3,"textarea",12),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",31),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.removeExample(o.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&n){const i=s.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function ms(n,s){1&n&&e.nrm(0,"azt-loading-ui",32)}function gs(n,s){1&n&&e.nrm(0,"azt-loading-ui",32)}function fs(n,s){1&n&&e.nrm(0,"azt-loading-ui",32)}let bs=(()=>{var n;class s extends Ie{saveObj(t){this.initStatusObj();let o={bookContentId:this.bookContentId,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(a=>a.name?.trim()).filter(a=>""!=a).filter(this.commonService.notEmpty)};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeInsertPracticePost(o)).subscribe(a=>{if(!a.success||!a.data)return this.errorStatusObj(a.message,!0);this.updateObjectiveId(a.data.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.initFormData(),t&&this.emitResult()})}))}updateObjectiveId(t,o,a){if(!o)return a();this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:t,objectiveId:o})).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0),a();a()}))}initFormData(){this.initForm(),this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super(),(0,l.A)(this,"objectiveObjs",void 0),(0,l.A)(this,"bookContentId",void 0)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-add-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId"},standalone:!0,features:[e.Vt3,e.aNF],decls:56,vars:50,consts:[["perfectScroll",""],["searchInListObjective","searchInList"],[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary-soft","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"ng-scrollbar",4,0)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"label",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",11)(14,"label",9),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",12),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",13)(21,"label",9),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",14)(25,"mat-select",15,1),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,_s,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",13)(35,"label",9),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,ps,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.addMoreExample())}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.emitResult())}),e.DNE(45,ms,1,0,"azt-loading-ui",24),e.EFF(46),e.nI1(47,"mytranslate"),e.k0s(),e.j41(48,"span",25),e.bIt("click",function(){return e.eBV(a),e.Njj(o.saveObj(!1))}),e.DNE(49,gs,1,0,"azt-loading-ui",24),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s(),e.j41(52,"span",26),e.bIt("click",function(){return e.eBV(a),e.Njj(o.saveObj(!0))}),e.DNE(53,fs,1,0,"azt-loading-ui",24),e.EFF(54),e.nI1(55,"mytranslate"),e.k0s()()()}if(2&t){const a=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,24,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(48,us,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,26,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,28,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,30,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,32,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,34,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,36,"lang_search_not_found")),e.Y8G("formControl",a.searchControl),e.R7$(3),e.Y8G("ngForOf",a.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,38,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,40,"lang_common_add_more"),""),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(47,42,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(51,44,"lang_common_save")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(55,46,"lang_common_save_and_close")," ")}},dependencies:[y.An,y.U9,N.x,k.R,d.MD,d.YU,d.Sq,d.bT,d.Jj,c.X1,c.qT,c.me,c.BC,c.cb,c.l_,c.j4,g.iI,c.YN,_.wp,v.s,z.wT,Q.rl,M.VO,m.flO,h.L,_.km,_.ep,f.Id,f.Yh,b.k,ce],encapsulation:2})),s})();const hs=n=>({"border-danger":n});function vs(n,s){if(1&n&&(e.j41(0,"mat-option",26),e.nrm(1,"span",27),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&n){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function Cs(n,s){if(1&n){const i=e.RV6();e.j41(0,"div")(1,"div",28)(2,"div",29),e.nrm(3,"textarea",12),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.removeExample(o.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&n){const i=s.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function js(n,s){1&n&&e.nrm(0,"azt-loading-ui",31)}let Os=(()=>{var n;class s extends Ie{saveObj(t){this.initStatusObj();let o={id:this.obj.id,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(a=>a.name?.trim()).filter(a=>""!=a).filter(this.commonService.notEmpty)};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticePost(o)).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.updateObjectiveId(this.obj.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.emitResult()})}))}updateObjectiveId(t,o,a){if((this.obj.objectiveId??0)==o)return a();this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:t,objectiveId:o})).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0),a();a()}))}initFormData(){this.initForm(),this.form.controls.name.setValue(this.obj.name),this.form.controls.description.setValue(this.obj.description??""),this.form.controls.objectiveId.setValue(this.obj.objectiveId??0),this.obj.examples.forEach(t=>{this.form.controls.examples.push(new c.gE({id:new c.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new c.MJ(t,{nonNullable:!0})}))}),this.form.controls.examples.controls.length||this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super(),(0,l.A)(this,"objectiveObjs",void 0),(0,l.A)(this,"bookContentId",void 0),(0,l.A)(this,"obj",void 0)}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-edit-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId",obj:"obj"},standalone:!0,features:[e.Vt3,e.aNF],decls:51,vars:45,consts:[["perfectScroll",""],["searchInListObjective","searchInList"],[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],["class","mr-1",4,"ngIf"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"ng-scrollbar",4,0)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"label",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",11)(14,"label",9),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",12),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",13)(21,"label",9),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",14)(25,"mat-select",15,1),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,vs,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",13)(35,"label",9),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,Cs,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.addMoreExample())}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.emitResult())}),e.EFF(45),e.nI1(46,"mytranslate"),e.k0s(),e.j41(47,"span",24),e.bIt("click",function(){return e.eBV(a),e.Njj(o.saveObj(!0))}),e.DNE(48,js,1,0,"azt-loading-ui",25),e.EFF(49),e.nI1(50,"mytranslate"),e.k0s()()()}if(2&t){const a=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,21,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(43,hs,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,23,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,25,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,27,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,29,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,31,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,33,"lang_search_not_found")),e.Y8G("formControl",a.searchControl),e.R7$(3),e.Y8G("ngForOf",a.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,35,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,37,"lang_common_add_more"),""),e.R7$(4),e.SpI(" ",e.bMT(46,39,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(50,41,"lang_common_save_and_close")," ")}},dependencies:[y.An,y.U9,N.x,k.R,d.MD,d.YU,d.Sq,d.bT,d.Jj,c.X1,c.qT,c.me,c.BC,c.cb,c.l_,c.j4,g.iI,c.YN,_.wp,v.s,z.wT,Q.rl,M.VO,m.flO,h.L,_.km,_.ep,f.Id,f.Yh,b.k,ce],encapsulation:2})),s})();function Ts(n,s){if(1&n){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-add-practice",5),e.bIt("saveResultEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.emitResult(o))}),e.k0s()}if(2&n){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)}}function ws(n,s){if(1&n){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-edit-practice",6),e.bIt("saveResultEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.emitResult(o))}),e.k0s()}if(2&n){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)("obj",i.data.obj)}}let de=(()=>{var n;class s extends S._{emitResult(t){this.dialogRef.close(t)}btnCloseDialog(){this.dialogRef.close(!1)}constructor(t,o){super(o,t),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),this.dialogRef=t,this.data=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-dialog-select-student-account"]],standalone:!0,features:[e.Vt3,e.aNF],decls:5,vars:2,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[3,"bookContentId","objectiveObjs","saveResultEvent",4,"ngIf"],[3,"bookContentId","objectiveObjs","obj","saveResultEvent",4,"ngIf"],[3,"saveResultEvent","bookContentId","objectiveObjs"],[3,"saveResultEvent","bookContentId","objectiveObjs","obj"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,Ts,1,2,"app-tools-knowledge-tree-classification-add-practice",3)(4,ws,1,3,"app-tools-knowledge-tree-classification-edit-practice",4),e.k0s()()()),2&t&&(e.R7$(3),e.Y8G("ngIf",!o.data.obj),e.R7$(),e.Y8G("ngIf",o.data.obj))},dependencies:[bs,Os,d.MD,d.bT,c.X1,g.iI,c.YN,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})();var xs=p(79471);const As=n=>({"border-danger":n});function ks(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",17),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Is(n,s){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",19),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("allObjectiveObjs",i.data.allObjectiveObjs)("showAction",!1)}}function Ss(n,s){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function ys(n,s){if(1&n&&e.DNE(0,Is,2,4,"div",18)(1,Ss,3,3,"div",18),2&n){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(),e.Y8G("ngIf",i.objs.length<=0)}}function Fs(n,s){1&n&&e.nrm(0,"azt-loading-ui",20)}let Se=(()=>{var n;class s extends S._{waitResultApi(t,o,a){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(t)).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0);if("fail"==r.data?.status)return a("lang_tool_ai_call_long_prompt_fail");if("running"==r.data?.status)return setTimeout(()=>this.waitResultApi(t,o,a),5e3);let u=this.commonService.castJsonToObj(r.data?.result??"");return null==u?a("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(u)}))}callPromptApi(){let t={id:this.data.obj.id,prompt:this.promptFormControl.value};this.initStatusObj(),this.objs=[],this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailSuggestionPost(t)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.waitResultApi(o.data.id,a=>{this.objs=a.map(r=>({...r,id:0,objectiveName:""})),this.stopStatusObj()},a=>this.errorStatusObj(a,!0))}))}confirmOk(){this.savingData=!1;let t={id:this.data.obj.id,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailPost(t)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(t,o){super(o,t),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"aiLongRunningTaskService",(0,e.WQX)(xs.Q)),(0,l.A)(this,"promptFormControl",new c.MJ("",{nonNullable:!0,validators:[c.k0.required]})),(0,l.A)(this,"objs",[]),(0,l.A)(this,"savingData",!1),this.dialogRef=t,this.data=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-split-practice-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:25,vars:22,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[1,"w-full"],["autoResize","",1,"form-control",3,"ngClass","placeholder","formControl"],[1,"text-center","mt-3"],[1,"btn","btn-primary",2,"height","100%",3,"click","disabled"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"btn","btn-primary","w-32",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","allObjectiveObjs","showAction"],[1,"mr-1"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6)(6,"div",7),e.nrm(7,"textarea",8),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",9)(10,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.callPromptApi())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",11),e.DNE(14,ks,1,1,"azt-loading-effect",12)(15,ys,2,2,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(17,"div",13)(18,"button",14),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",15),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmOk())}),e.DNE(22,Fs,1,0,"azt-loading-ui",16),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()}if(2&t){const a=e.sdS(16);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"lang_tool_knowledge_split_practice_prompt")),e.Y8G("ngClass",e.eq3(20,As,o.promptFormControl.invalid))("formControl",o.promptFormControl),e.R7$(3),e.Y8G("disabled",o.promptFormControl.invalid),e.R7$(),e.JRh(e.bMT(12,14,"lang_tool_knowledge_split_practice_call_prompt_api")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(20,16,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(24,18,"lang_auto_luu")," ")}},dependencies:[A.K,Z,k.R,d.MD,d.YU,d.bT,c.X1,c.me,c.BC,c.l_,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,f.Yh,b.k,ce],encapsulation:2})),s})();function Es(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",8),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}let Rs=(()=>{var n;class s extends j.H{addNew(){this.sAztDialogService.open(de,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(t){this.sAztDialogService.open(de,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs,obj:t},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}deleteObj(t){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${t.name}<b/>?`;this.sAztDialogService.open(se.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(a=>{a&&this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:t.id})).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0);this.objs=this.objs.filter(u=>u.id!=t.id)}))})}splitObj(t){this.sAztDialogService.open(Se,{data:{obj:t,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}updateObj(t){this.objs=this.objs.map(o=>o.id!=t.id?o:{...t})}getObjectiveInfo(t){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.knowledgeObjs=o.data.objs,this.curBookContentObj=this.sAztKnowledgeObjectiveService.getObjById(o.data.objs,this.bookContentId),t()})}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesAndObjectivesOfBookContentGet(this.bookContentId)).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);this.objectiveObjs=t.data?.objectives??[];let a=this.sAztKnowledgeObjectiveService.getAllObjectiveObjs(this.knowledgeObjs,[]).filter(r=>!this.objectiveObjs.map(u=>u.id).includes(r.id));this.allObjectiveObjs=this.objectiveObjs.concat(a),this.objs=t.data?.practices.map(r=>({...r,objectiveName:t.data?.objectives.find(u=>u.id==r.objectiveId)?.name??""}))??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",description:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.bookContentId=Number(this.commonService.getMyParam(this.activeRoute,"bookContentId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.getObjectiveInfo(()=>{this.initData()})}constructor(t){super(),(0,l.A)(this,"activeRoute",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(Ki.U)),(0,l.A)(this,"sAztDialogService",(0,e.WQX)(F.i)),(0,l.A)(this,"sAztKnowledgeObjectiveService",(0,e.WQX)(R)),(0,l.A)(this,"schoolLevelId",0),(0,l.A)(this,"schoolSubjectId",0),(0,l.A)(this,"bookId",0),(0,l.A)(this,"bookContentId",0),(0,l.A)(this,"curBookContentObj",void 0),(0,l.A)(this,"objectiveObjs",[]),(0,l.A)(this,"allObjectiveObjs",[]),(0,l.A)(this,"knowledgeObjs",[]),(0,l.A)(this,"backTo",""),(0,l.A)(this,"objs",[]),this.activeRoute=t}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(g.nX))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-classification-manage-practice"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:15,consts:[[3,"headerBackToLink"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[1,"flex-none"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj",4,"ngIf"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"],[3,"currentStatusObj"]],template:function(t,o){1&t&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.nI1(4,"mathJaxContent"),e.nI1(5,"async"),e.nI1(6,"safeContentQuestion"),e.j41(7,"div",4)(8,"span",5),e.bIt("click",function(){return o.addNew()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",1),e.DNE(12,Es,1,1,"azt-loading-effect",6),e.j41(13,"app-tools-knowledge-tree-classification-practice-group-box",7),e.bIt("editEvent",function(r){return o.editObj(r)})("deleteEvent",function(r){return o.deleteObj(r)})("splitEvent",function(r){return o.splitObj(r)})("updateEvent",function(r){return o.updateObj(r)}),e.k0s()()()()),2&t&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(3),e.Y8G("innerHTML",e.bMT(6,11,e.bMT(5,9,e.bMT(4,7,null==o.curBookContentObj?null:o.curBookContentObj.title))),e.npT),e.R7$(6),e.JRh(e.bMT(10,13,"lang_common_create")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.Y8G("objs",o.objs)("objectiveObjs",o.objectiveObjs)("allObjectiveObjs",o.allObjectiveObjs))},dependencies:[I.Q,A.K,ds,d.MD,d.bT,d.Jj,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})();function zs(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",14),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ms(n,s){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",16),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("allObjectiveObjs",i.data.allObjectiveObjs)("showAction",!1)}}function Gs(n,s){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function Ds(n,s){if(1&n&&e.DNE(0,Ms,2,4,"div",15)(1,Gs,3,3,"div",15),2&n){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(),e.Y8G("ngIf",i.objs.length<=0)}}function $s(n,s){1&n&&e.nrm(0,"azt-loading-ui",17)}let Bs=(()=>{var n;class s extends S._{waitResultApi(t,o,a){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(t)).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0);if("fail"==r.data?.status)return a("lang_tool_ai_call_long_prompt_fail");if("running"==r.data?.status)return setTimeout(()=>this.waitResultApi(t,o,a),5e3);let u=this.commonService.castJsonToObj(r.data?.result??"");return null==u?a("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(u)}))}callPromptApi(){this.initStatusObj(),this.objs=[],this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeSuggestPracticesOfObjectiveGet(this.data.obj.objectiveId)).subscribe(t=>{if(!t.success||!t.data)return this.errorStatusObj(t.message,!0);this.waitResultApi(t.data.id,o=>{this.objs=o.map(a=>({...a,id:0,objectiveName:""})),this.stopStatusObj()},o=>this.errorStatusObj(o,!0))}))}confirmOk(){this.savingData=!1;let t={objectiveId:this.data.obj.objectiveId??0,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticesOfObjectivePost(t)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){this.callPromptApi()}constructor(t,o){super(o,t),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"aiLongRunningTaskService",(0,e.WQX)(w.Qk)),(0,l.A)(this,"objs",[]),(0,l.A)(this,"savingData",!1),this.dialogRef=t,this.data=o}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["azt-re-classification-practice-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:21,vars:14,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"btn","btn-pending-soft","w-32","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","allObjectiveObjs","showAction"],[1,"mr-1"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6)(6,"div",7),e.DNE(7,zs,1,1,"azt-loading-effect",8)(8,Ds,2,2,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(10,"div",9)(11,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(o.callPromptApi())}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"button",12),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmOk())}),e.DNE(18,$s,1,0,"azt-loading-ui",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()}if(2&t){const a=e.sdS(9);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(13,8,"lang_auto_dong")," "),e.R7$(3),e.SpI(" ",e.bMT(16,10,"lang_tool_knowledge_re_classification_call_api_again")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(20,12,"lang_tool_knowledge_re_classification_practice_agree_with_result")," ")}},dependencies:[A.K,Z,k.R,d.MD,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,f.Yh,b.k],encapsulation:2})),s})();function Ps(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",9),2&n){const i=e.XpG(2);e.Y8G("currentStatusObj",i.statusObj)}}function Ns(n,s){if(1&n){const i=e.RV6();e.j41(0,"div",2)(1,"div",3),e.nrm(2,"div",4),e.nI1(3,"mathJaxContent"),e.nI1(4,"async"),e.nI1(5,"safeContentQuestion"),e.k0s(),e.j41(6,"div",2),e.DNE(7,Ps,1,1,"azt-loading-effect",5),e.j41(8,"app-tools-knowledge-tree-classification-list-practice-box",6),e.bIt("editEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.editObj(o))})("deleteEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.deleteObj(o))})("splitEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.splitObj(o))})("updateEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.updateObj(o))}),e.k0s()(),e.j41(9,"div",7)(10,"span",8),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.reClassificationPractice())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()}if(2&n){const i=e.XpG();e.R7$(2),e.Y8G("innerHTML",e.bMT(5,10,e.bMT(4,8,e.bMT(3,6,i.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.objectiveObjs)("allObjectiveObjs",i.allObjectiveObjs),e.R7$(3),e.JRh(e.bMT(12,12,"lang_tool_knowledge_practice_re_classification_practice"))}}let Qs=(()=>{var n;class s extends j.H{reClassificationPractice(){this.sAztDialogService.open(Bs,{data:{obj:this.curObjectiveObj,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(t){this.sAztDialogService.open(de,{data:{bookContentId:this.objectiveId,objectiveObjs:this.objectiveObjs,obj:t},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}deleteObj(t){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${t.name}<b/>?`;this.sAztDialogService.open(se.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(a=>{a&&this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:t.id})).subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0);this.objs=this.objs.filter(u=>u.id!=t.id)}))})}splitObj(t){this.sAztDialogService.open(Se,{data:{obj:t,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}updateObj(t){this.objs=this.objs.map(o=>o.id!=t.id?o:{...t})}getObjectiveInfo(t){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.knowledgeObjs=o.data.objs;let a=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(o.data.objs,this.objectiveId);if(!a)return this.errorStatusObj("lang_tool_knowledge_not_found_objective_id",!0);this.curObjectiveObj=a,t()})}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesOfObjectiveGet(this.objectiveId)).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);this.allObjectiveObjs=this.sAztKnowledgeObjectiveService.getAllObjectiveObjs(this.knowledgeObjs,[]),this.objectiveObjs=this.allObjectiveObjs,this.objs=t.data?.map(o=>({...o,objectiveName:this.allObjectiveObjs.find(a=>a.id==o.objectiveId)?.name??""}))??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_view_practice_of_one_objective_title",description:"lang_cms_admin_tools_knowledge_tree_view_practice_of_one_objective_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.getObjectiveInfo(()=>{this.initData()})}constructor(t){super(),(0,l.A)(this,"activeRoute",void 0),(0,l.A)(this,"aiElearningPracticeService",(0,e.WQX)(w.UO)),(0,l.A)(this,"sAztDialogService",(0,e.WQX)(F.i)),(0,l.A)(this,"sAztKnowledgeObjectiveService",(0,e.WQX)(R)),(0,l.A)(this,"schoolLevelId",0),(0,l.A)(this,"schoolSubjectId",0),(0,l.A)(this,"bookId",0),(0,l.A)(this,"objectiveId",0),(0,l.A)(this,"curObjectiveObj",void 0),(0,l.A)(this,"objectiveObjs",[]),(0,l.A)(this,"allObjectiveObjs",[]),(0,l.A)(this,"knowledgeObjs",[]),(0,l.A)(this,"backTo",""),(0,l.A)(this,"objs",[]),this.activeRoute=t}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(g.nX))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-view-practice-for-objective"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[[3,"headerBackToLink"],["class","pt-3",4,"ngIf"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[3,"currentStatusObj",4,"ngIf"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"],[1,"text-center"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj"]],template:function(t,o){1&t&&(e.j41(0,"teacher-layout",0),e.DNE(1,Ns,13,14,"div",1),e.k0s()),2&t&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",o.curObjectiveObj))},dependencies:[I.Q,A.K,Z,d.MD,d.bT,d.Jj,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,_.km,_.ep,f.Id,b.k],encapsulation:2})),s})(),Ls=(()=>{var n;class s{constructor(){(0,l.A)(this,"recognition",1),(0,l.A)(this,"understanding",2),(0,l.A)(this,"practicalApplication",3)}isRecognition(t){return t==this.recognition}isUnderstanding(t){return t==this.understanding}isPracticalApplication(t){return t==this.practicalApplication}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275prov",e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})),s})();var Ks=p(24551);function Ys(n,s){if(1&n&&(e.j41(0,"div",6),e.nrm(1,"azt-loading-effect",7),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("currentStatusObj",i.statusObj)}}function qs(n,s){if(1&n&&(e.qex(0),e.j41(1,"div",12)(2,"div",13),e.nrm(3,"azt-question-standalone-for-classification-tool",14),e.k0s()(),e.bVm()),2&n){const i=s.$implicit,t=e.XpG(2);e.R7$(2),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",t.followerRenderQuest)("questionObj",i)}}function Vs(n,s){if(1&n&&(e.j41(0,"div",8)(1,"ng-scrollbar",9,1)(3,"div",10),e.DNE(4,qs,4,3,"ng-container",11),e.k0s()()()),2&n){const i=e.XpG();e.R7$(),e.Y8G("visibility","hover"),e.R7$(3),e.Y8G("ngForOf",i.questionObjs)}}let Xs=(()=>{var n;class s extends S._{getQuestionsByKey(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.questionBankService.aiApiV1QuestionBankGetQuestionsByKeyGet(this.data.questionKey,this.data.answerType)).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!0);this.getListQuestions(t.data??[])}))}getListQuestions(t){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsListPost({ids:t}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],a=>{this.followerRenderQuest.setNumQuest(a.length),this.questionObjs=a,this.stopStatusObj()})}))}loadQuest(t,o){const a=this.commonService.castJsonToClassObjs(Y.I,JSON.stringify(t))??[];this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>{o(r)}).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a)})}ngOnInit(){this.getQuestionsByKey(),super.ngOnInit()}constructor(t,o,a){super(a,o),(0,l.A)(this,"questionBankService",void 0),(0,l.A)(this,"dialogRef",void 0),(0,l.A)(this,"data",void 0),(0,l.A)(this,"questionService",(0,e.WQX)(U.wP)),(0,l.A)(this,"followerRenderQuest",new E),(0,l.A)(this,"questionRenderService",(0,e.WQX)(P.g)),(0,l.A)(this,"configRenderService",new D.y(!0)),(0,l.A)(this,"questionObjs",[]),this.questionBankService=t,this.dialogRef=o,this.data=a}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(Ks.g),e.rXU(x.CP,8),e.rXU(x.Vh,8))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["knowledge-questions-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:8,vars:5,consts:[["doneLoading",""],["perfectScroll",""],[1,"box","p-3",2,"height","100%"],["class","flex justify-center items-center","style","height: 100%",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"flex","justify-center","items-center",2,"height","100%"],[3,"currentStatusObj"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[4,"ngFor","ngForOf"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"div",2),e.DNE(1,Ys,2,1,"div",3)(2,Vs,5,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(o.dialogRef.close())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()}if(2&t){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(7,3,"lang_auto_dong")," ")}},dependencies:[A.K,ae,d.MD,d.Sq,d.bT,c.X1,g.iI,c.YN,_.wp,v.s,m.flO,h.L,f.Id,f.Yh,b.k,J],encapsulation:2})),s})();const ye=n=>({nodeObjs:n}),Us=n=>({"text-danger":n});function Js(n,s){if(1&n&&(e.j41(0,"th",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_answer_type_"+i))}}function Ws(n,s){if(1&n&&(e.j41(0,"th",12),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n){const i=s.$implicit;e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_difficulty_index_"+i))}}function Hs(n,s){if(1&n&&(e.qex(0),e.DNE(1,Ws,3,3,"th",11),e.bVm()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.difficultyIndexes)}}function Zs(n,s){1&n&&e.eu8(0)}function ea(n,s){1&n&&e.nrm(0,"lucide-icon",21)}function ta(n,s){1&n&&e.nrm(0,"lucide-icon",22)}function na(n,s){if(1&n&&(e.j41(0,"i"),e.DNE(1,ea,1,0,"lucide-icon",19)(2,ta,1,0,"lucide-icon",20),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function oa(n,s){1&n&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",23),e.k0s())}function ia(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"td",24),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,a=e.XpG().$implicit,r=e.XpG(3);return e.Njj(r.openKnowledgeQuestionsDialog(a.data.getQuestionKey,o))}),e.EFF(2),e.k0s(),e.bVm()}if(2&n){let i,t;const o=s.$implicit,a=e.XpG().$implicit,r=e.XpG().$implicit,u=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(2,Us,(null!==(i=null==(i=u.findQuestionObj(r.data.questions,a,o))?null:i.total)&&void 0!==i?i:0)<=u.filterTotalQuestionFormControl.value)),e.R7$(),e.SpI(" ",null!==(t=null==(t=u.findQuestionObj(r.data.questions,a,o))?null:t.total)&&void 0!==t?t:0," ")}}function sa(n,s){if(1&n&&(e.qex(0),e.DNE(1,ia,3,4,"ng-container",8),e.bVm()),2&n){const i=e.XpG(4);e.R7$(),e.Y8G("ngForOf",i.difficultyIndexes)}}function aa(n,s){1&n&&e.eu8(0)}function la(n,s){if(1&n&&(e.qex(0),e.DNE(1,aa,1,0,"ng-container",9),e.bVm()),2&n){const i=e.XpG().$implicit;e.XpG(3);const t=e.sdS(17);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,ye,i.children))}}function ra(n,s){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"tr",14)(2,"td",15)(3,"div",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(4,na,3,2,"i",13)(5,oa,2,0,"i",13),e.j41(6,"label",17),e.nrm(7,"span",18),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()(),e.DNE(11,sa,2,1,"ng-container",8),e.k0s(),e.DNE(12,la,2,4,"ng-container",13),e.bVm()}if(2&n){const i=s.$implicit,t=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(4),e.Y8G("ngForOf",t.answerTypes),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function ca(n,s){if(1&n&&(e.qex(0),e.DNE(1,ra,13,14,"ng-container",8),e.bVm()),2&n){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function da(n,s){if(1&n&&e.DNE(0,ca,2,1,"ng-container",13),2&n){const i=s.nodeObjs,t=e.XpG();e.Y8G("ngIf",t.asTemplateDataObj(i))}}let ua=(()=>{var n;class s extends W{openKnowledgeQuestionsDialog(t,o){this.sAztDialogService.open(Xs,{data:{questionKey:t,answerType:o},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}clickToNode(t){t.children.length&&(t.isExpand?this.collapse(t):this.expand(t))}findQuestionObj(t,o,a){return t.find(r=>r.answerType==o&&r.difficultyIndex==a)}asTemplateDataObj(t){return t}standardTreeNodes(t,o){let a=[];return t.forEach(r=>{let u={level:o,typeNode:r.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:r.title,data:{...r,children:[]},children:[]};u.children=this.standardTreeNodes(r.children,o+1),a.push(u)}),a}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}constructor(t){super(),(0,l.A)(this,"sAztDialogService",void 0),(0,l.A)(this,"rawNodes",void 0),(0,l.A)(this,"nodeObjs",[]),(0,l.A)(this,"filterTotalQuestionFormControl",new c.MJ(20,{nonNullable:!0})),(0,l.A)(this,"sAztAnswerTypeService",(0,e.WQX)(ne._)),(0,l.A)(this,"sAztQuestionDifficultyIndexService",(0,e.WQX)(Ls)),(0,l.A)(this,"answerTypes",[this.sAztAnswerTypeService.oneChoiceAnswer,this.sAztAnswerTypeService.fillAnswer,this.sAztAnswerTypeService.trueFalseAnswer]),(0,l.A)(this,"difficultyIndexes",[this.sAztQuestionDifficultyIndexService.recognition,this.sAztQuestionDifficultyIndexService.understanding,this.sAztQuestionDifficultyIndexService.practicalApplication]),this.sAztDialogService=t}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(F.i))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-view-knowledge-tree-for-statistic"]],inputs:{rawNodes:"rawNodes"},standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[["recursiveListTmpl",""],[1,"mb-3","box","p-3"],[1,"flex","items-center"],[1,"mr-2","flex-none"],["type","number","min","0",1,"form-control","ml-2",3,"formControl"],[1,"table","table-report"],["rowspan","2",1,"text-center"],["colspan","3","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["colspan","3",1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"],[1,"text-center","clickable","open-question",3,"click","ngClass"]],template:function(t,o){if(1&t&&(e.j41(0,"div",1)(1,"div",2)(2,"label",3),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",4),e.k0s()(),e.j41(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),e.EFF(10,"\xa0"),e.k0s(),e.DNE(11,Js,3,3,"th",7),e.k0s(),e.j41(12,"tr"),e.DNE(13,Hs,2,1,"ng-container",8),e.k0s()(),e.j41(14,"tbody"),e.DNE(15,Zs,1,0,"ng-container",9),e.k0s()(),e.DNE(16,da,1,1,"ng-template",null,0,e.C5r)),2&t){const a=e.sdS(17);e.R7$(3),e.JRh(e.bMT(4,6,"lang_tool_knowledge_filter_by_total_question")),e.R7$(2),e.Y8G("formControl",o.filterTotalQuestionFormControl),e.R7$(6),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.eq3(8,ye,o.nodeObjs))}},dependencies:[d.MD,d.YU,d.Sq,d.bT,d.T3,d.Jj,c.X1,c.me,c.Q0,c.BC,c.VZ,c.l_,g.iI,c.YN,_.wp,v.s,m.flO,m.WGl,h.L,_.km,_.ep,f.Id,b.k],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}open-question[_ngcontent-%COMP%]:hover{background:#f0f8ff}"]})),s})();function _a(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",5),2&n){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function pa(n,s){if(1&n&&e.nrm(0,"app-tools-view-knowledge-tree-for-statistic",7),2&n){const i=e.XpG(2);e.Y8G("rawNodes",i.nodes)}}function ma(n,s){if(1&n&&e.DNE(0,pa,1,1,"app-tools-view-knowledge-tree-for-statistic",6),2&n){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}const fa=[{path:"",component:ze.z,children:[{path:"knowledge-tree-statistic/:levelId/:subjectId/:bookId",component:(()=>{var n;class s extends j.H{changeLevelSubjectBookEvent(){let t=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-statistic/"+t.schoolLevel+"/"+t.schoolSubject+"/"+t.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(t.schoolLevel,t.schoolSubject,!0,t.bookIdFormControl>0?t.bookIdFormControl:void 0)).subscribe(o=>{if(!o.success)return this.nodes=[],this.errorStatusObj(o.message,!0);this.nodes=o.data?.nodes??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_statistic_title",description:"lang_cms_admin_tools_knowledge_tree_statistic_title",image:"lang_cms_test_image"});let t=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),a=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(t),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(a)}constructor(t,o){super(),(0,l.A)(this,"aiElearningService",void 0),(0,l.A)(this,"activeRoute",void 0),(0,l.A)(this,"backTo","/super-role/admin-tool"),(0,l.A)(this,"form",void 0),(0,l.A)(this,"nodes",[]),this.aiElearningService=t,this.activeRoute=o,this.form=new c.gE({schoolLevel:new c.MJ(0,{nonNullable:!0}),schoolSubject:new c.MJ(0,{nonNullable:!0}),bookIdFormControl:new c.MJ(0,{nonNullable:!0})})}}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)(e.rXU(w.T5),e.rXU(g.nX))}),(0,l.A)(s,"\u0275cmp",e.VBU({type:n,selectors:[["app-tools-knowledge-tree-statistic"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:8,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"rawNodes",4,"ngIf"],[3,"rawNodes"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"config-level-subject-book",3),e.bIt("changeDataEvent",function(){return e.eBV(a),e.Njj(o.changeLevelSubjectBookEvent())}),e.k0s()(),e.DNE(3,_a,1,1,"azt-loading-effect",4)(4,ma,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&t){const a=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,G,A.K,ua,d.MD,d.bT,c.X1,g.iI,c.YN,v.s,m.flO,h.L,f.Id,b.k],encapsulation:2})),s})()},{path:"knowledge-tree-classification/:levelId/:subjectId/:bookId",component:Li},{path:"knowledge-tree-approve-classification-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:Oi},{path:"knowledge-tree-manage-practice/:levelId/:subjectId/:bookId/:bookContentId",component:Rs},{path:"knowledge-tree-view-practice-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:Qs},{path:"job-progress-management",component:Fo},{path:"auto-suggestion-for-exams",component:bt},{path:"auto-suggestion-for-one-exam/:examId/:levelId/:subjectId",component:Bn},{path:"book-management",component:Te},{path:"book-management/:levelId/:subjectId",component:Te},{path:"book-detail/:bookId",component:go}]}];let ba=(()=>{var n;class s{}return n=s,(0,l.A)(s,"\u0275fac",function(t){return new(t||n)}),(0,l.A)(s,"\u0275mod",e.$C({type:n})),(0,l.A)(s,"\u0275inj",e.G2t({imports:[g.iI.forChild(fa),g.iI,Re.XE]})),s})()}}]);