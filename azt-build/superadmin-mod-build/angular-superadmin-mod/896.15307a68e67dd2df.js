(self.webpackChunkSuperadminMod=self.webpackChunkSuperadminMod||[]).push([[896],{55443:(ie,l,x)=>{"use strict";x.d(l,{q:()=>p});var e=x(93953),U=x(1654),O=x(25919),$=x(88048),D=x(60177),c=x(89417),v=x(32108),V=x(46412),H=x(8516),z=x(23424),B=x(11782),W=x(9788);const g=s=>({active:s}),L=s=>[s];function _(s,T){if(1&s){const C=e.RV6();e.j41(0,"li",5)(1,"a",6),e.bIt("click",function(){e.eBV(C);const G=e.XpG(2);return e.Njj(G.clickPage(G.page-1))}),e.j41(2,"span",7),e.EFF(3,"\xab"),e.k0s(),e.j41(4,"span",8),e.EFF(5,"Previous"),e.k0s()()()}}function A(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",13),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(2),e.k0s()}if(2&s){const C=e.XpG().$implicit,k=e.XpG(3);e.Y8G("routerLink",e.eq3(5,L,e.bMT(1,3,k.linkPage)))("queryParams",k.eventSearchHandle(C)),e.R7$(2),e.JRh(C)}}function F(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",14),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(2),e.k0s()}if(2&s){const C=e.XpG().$implicit,k=e.XpG(3);e.Y8G("routerLink",e.eq3(5,L,e.bMT(1,3,k.linkPage)))("queryParams",k.eventSearchHandle(C)),e.R7$(2),e.JRh(C)}}function y(s,T){if(1&s&&(e.j41(0,"li",10),e.DNE(1,A,3,7,"a",11)(2,F,3,7,"a",12),e.k0s()),2&s){const C=T.$implicit,k=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,k.page==C)),e.R7$(),e.Y8G("ngIf",k.page==C),e.R7$(),e.Y8G("ngIf",k.page!=C&&C<=k.page+3&&C>=k.page-3)}}function n(s,T){if(1&s&&(e.qex(0),e.DNE(1,y,3,5,"li",9),e.bVm()),2&s){const C=e.XpG(2);e.R7$(),e.Y8G("ngForOf",C.pageObj.arrayPag)}}function i(s,T){if(1&s){const C=e.RV6();e.j41(0,"li",5)(1,"a",17),e.nI1(2,"navigationLocalize"),e.bIt("click",function(){e.eBV(C);const G=e.XpG(3);return e.Njj(G.clickPage(1))}),e.EFF(3,"1"),e.k0s()()}if(2&s){const C=e.XpG(3);e.R7$(),e.Y8G("routerLink",e.eq3(4,L,e.bMT(2,2,C.linkPage)))("queryParams",C.eventSearchHandle(1))}}function d(s,T){1&s&&(e.j41(0,"a",18),e.EFF(1,"..."),e.k0s())}function P(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",20),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(2),e.k0s()}if(2&s){const C=e.XpG().$implicit,k=e.XpG(3);e.Y8G("routerLink",e.eq3(5,L,e.bMT(1,3,k.linkPage)))("queryParams",k.eventSearchHandle(C)),e.R7$(2),e.JRh(C)}}function f(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",14),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(2),e.k0s()}if(2&s){const C=e.XpG().$implicit,k=e.XpG(3);e.Y8G("routerLink",e.eq3(5,L,e.bMT(1,3,k.linkPage)))("queryParams",k.eventSearchHandle(C)),e.R7$(2),e.JRh(C)}}function w(s,T){if(1&s&&(e.j41(0,"li",10),e.DNE(1,P,3,7,"a",19)(2,f,3,7,"a",12),e.k0s()),2&s){const C=T.$implicit,k=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,k.page==C)),e.R7$(),e.Y8G("ngIf",k.page==C),e.R7$(),e.Y8G("ngIf",k.page!=C&&C<k.page+3&&C>=k.page-1)}}function b(s,T){1&s&&(e.j41(0,"span",18),e.EFF(1,"..."),e.k0s())}function h(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",21),e.nI1(1,"navigationLocalize"),e.bIt("click",function(){e.eBV(C);const G=e.XpG(3);return e.Njj(G.clickPage(G.pageObj.totalPaginationPage))}),e.EFF(2),e.k0s()}if(2&s){const C=e.XpG(3);e.Y8G("routerLink",e.eq3(5,L,e.bMT(1,3,C.linkPage)))("queryParams",C.eventSearchHandle(C.pageObj.totalPaginationPage)),e.R7$(2),e.SpI(" ",C.pageObj.totalPaginationPage," ")}}function E(s,T){if(1&s&&(e.qex(0),e.DNE(1,i,4,6,"li",3),e.j41(2,"li",5),e.DNE(3,d,2,0,"a",15),e.k0s(),e.DNE(4,w,3,5,"li",9),e.j41(5,"li",5),e.DNE(6,b,2,0,"span",15),e.k0s(),e.j41(7,"li",5),e.DNE(8,h,3,7,"a",16),e.k0s(),e.bVm()),2&s){const C=e.XpG(2);e.R7$(),e.Y8G("ngIf",C.page>=3),e.R7$(2),e.Y8G("ngIf",C.page>=4),e.R7$(),e.Y8G("ngForOf",C.pageObj.arrayPag),e.R7$(2),e.Y8G("ngIf",C.page<C.pageObj.totalPaginationPage-3),e.R7$(2),e.Y8G("ngIf",C.page<C.pageObj.totalPaginationPage-2)}}function I(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",24),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(1),e.k0s()}if(2&s){const C=e.XpG().$implicit;e.R7$(),e.JRh(C)}}function j(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(1),e.k0s()}if(2&s){const C=e.XpG().$implicit;e.R7$(),e.JRh(C)}}function q(s,T){if(1&s&&(e.j41(0,"li",10),e.DNE(1,I,2,1,"a",22)(2,j,2,1,"a",23),e.k0s()),2&s){const C=T.$implicit,k=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,k.page==C)),e.R7$(),e.Y8G("ngIf",k.page==C),e.R7$(),e.Y8G("ngIf",k.page!=C&&C<=k.page+3&&C>=k.page-3)}}function ee(s,T){if(1&s&&(e.qex(0),e.DNE(1,q,3,5,"li",9),e.bVm()),2&s){const C=e.XpG(2);e.R7$(),e.Y8G("ngForOf",C.pageObj.arrayPag)}}function Q(s,T){if(1&s){const C=e.RV6();e.j41(0,"li",5)(1,"a",27),e.bIt("click",function(){e.eBV(C);const G=e.XpG(3);return e.Njj(G.clickPage(1))}),e.EFF(2,"1"),e.k0s()()}}function he(s,T){1&s&&(e.j41(0,"a",18),e.EFF(1,"..."),e.k0s())}function fe(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",29),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(1),e.k0s()}if(2&s){const C=e.XpG().$implicit;e.R7$(),e.JRh(C)}}function ue(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){e.eBV(C);const G=e.XpG().$implicit,X=e.XpG(3);return e.Njj(X.clickPage(G))}),e.EFF(1),e.k0s()}if(2&s){const C=e.XpG().$implicit;e.R7$(),e.JRh(C)}}function N(s,T){if(1&s&&(e.j41(0,"li",10),e.DNE(1,fe,2,1,"a",28)(2,ue,2,1,"a",23),e.k0s()),2&s){const C=T.$implicit,k=e.XpG(3);e.Y8G("ngClass",e.eq3(3,g,k.page==C)),e.R7$(),e.Y8G("ngIf",k.page==C),e.R7$(),e.Y8G("ngIf",k.page!=C&&C<k.page+3&&C>=k.page-1)}}function a(s,T){1&s&&(e.j41(0,"span",18),e.EFF(1,"..."),e.k0s())}function t(s,T){if(1&s){const C=e.RV6();e.j41(0,"a",30),e.bIt("click",function(){e.eBV(C);const G=e.XpG(3);return e.Njj(G.clickPage(G.pageObj.totalPaginationPage))}),e.EFF(1),e.k0s()}if(2&s){const C=e.XpG(3);e.R7$(),e.JRh(C.pageObj.totalPaginationPage)}}function r(s,T){if(1&s&&(e.qex(0),e.DNE(1,Q,3,0,"li",3),e.j41(2,"li",5),e.DNE(3,he,2,0,"a",15),e.k0s(),e.DNE(4,N,3,5,"li",9),e.j41(5,"li",5),e.DNE(6,a,2,0,"span",15),e.k0s(),e.j41(7,"li",5),e.DNE(8,t,2,1,"a",26),e.k0s(),e.bVm()),2&s){const C=e.XpG(2);e.R7$(),e.Y8G("ngIf",C.page>=3),e.R7$(2),e.Y8G("ngIf",C.page>=4),e.R7$(),e.Y8G("ngForOf",C.pageObj.arrayPag),e.R7$(2),e.Y8G("ngIf",C.page<C.pageObj.totalPaginationPage-3),e.R7$(2),e.Y8G("ngIf",C.page<C.pageObj.totalPaginationPage-2)}}function o(s,T){if(1&s){const C=e.RV6();e.j41(0,"li",5)(1,"a",31),e.bIt("click",function(){e.eBV(C);const G=e.XpG(2);return e.Njj(G.clickPage(G.page+1))}),e.j41(2,"span",7),e.EFF(3,"\xbb"),e.k0s(),e.j41(4,"span",8),e.EFF(5,"Next"),e.k0s()()()}}function u(s,T){if(1&s&&(e.j41(0,"nav",1)(1,"ul",2),e.DNE(2,_,6,0,"li",3)(3,n,2,1,"ng-container",4)(4,E,9,5,"ng-container",4)(5,ee,2,1,"ng-container",4)(6,r,9,5,"ng-container",4)(7,o,6,0,"li",3),e.k0s()()),2&s){const C=e.XpG();e.R7$(2),e.Y8G("ngIf",C.page>1),e.R7$(),e.Y8G("ngIf",C.pageObj.totalPaginationPage<=4&&"report_error"==C.screen),e.R7$(),e.Y8G("ngIf",C.pageObj.totalPaginationPage>4&&"report_error"==C.screen),e.R7$(),e.Y8G("ngIf",C.pageObj.totalPaginationPage<=4&&"report_error"!=C.screen),e.R7$(),e.Y8G("ngIf",C.pageObj.totalPaginationPage>4&&"report_error"!=C.screen),e.R7$(),e.Y8G("ngIf",C.pageObj.totalPaginationPage>C.page&&C.pageObj.totalPaginationPage>=2)}}let p=(()=>{var s;class T extends U.H{constructor(){super(...arguments),this.pageObj=new O.d(10),this.screen="",this.linkPage="",this.goToPaginationPage=new e.bkB,this.page=1}eventSearchHandle(k){return""!=this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:k,userPhone:this.eventSearch?.userPhone}:""==this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:k,userId:Number(this.eventSearch?.userId)}:""==this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:k,urls:this.eventSearch?.urls}:""!=this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:k,userPhone:this.eventSearch?.userPhone,userId:Number(this.eventSearch?.userId)}:""!=this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:k,userPhone:this.eventSearch?.userPhone,urls:this.eventSearch?.urls}:""==this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:k,userId:Number(this.eventSearch?.userId),urls:this.eventSearch?.urls}:""==this.eventSearch?.userPhone&&""==this.eventSearch?.userId&&""==this.eventSearch?.urls?{page:k}:""!=this.eventSearch?.userPhone&&""!=this.eventSearch?.userId&&""!=this.eventSearch?.urls?{page:k,userPhone:this.eventSearch?.userPhone,userId:Number(this.eventSearch?.userId),urls:this.eventSearch?.urls}:void 0}clickPage(k){this.page=k,this.goToPaginationPage.emit(k)}ngOnInit(){this.pageObj.arrayPag=[],this.page=this.pageObj.page??0,this.pageObj.arrayPage(),super.ngOnInit()}ngOnChanges(){this.pageObj.arrayPag=[],this.page=this.pageObj.page??0,this.pageObj.arrayPage()}}return(s=T).\u0275fac=(()=>{let C;return function(G){return(C||(C=e.xGo(s)))(G||s)}})(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-paging"]],inputs:{pageObj:"pageObj",screen:"screen",eventSearch:"eventSearch",linkPage:"linkPage"},outputs:{goToPaginationPage:"goToPaginationPage"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:1,vars:1,consts:[["class","inline-block",4,"ngIf"],[1,"inline-block"],[1,"pagination"],["class","page-item",4,"ngIf"],[4,"ngIf"],[1,"page-item"],["azt-track-service","azt-paging-rX0eXqN4qW","aria-label","Previous",1,"page-link","zoom-in",3,"click"],["aria-hidden","true"],[1,"sr-only"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],["azt-track-service","azt-paging-Vt48iF7KWz","class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","azt-paging-Vt48iF7KWz",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],[1,"page-link","zoom-in",3,"click","routerLink","queryParams"],["class","page-link zoom-in",4,"ngIf"],["azt-track-service","azt-paging-8E_Z21XPV1","class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","azt-paging-SXAS3r66ZG",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],[1,"page-link","zoom-in"],["azt-track-service","azt-paging-_MTfjoX-Or","class","page-link zoom-in",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","azt-paging-_MTfjoX-Or",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],["azt-track-service","azt-paging-8E_Z21XPV1",1,"page-link","zoom-in",3,"click","routerLink","queryParams"],["azt-track-service","azt-paging-sdAfPVcahq","class","page-link zoom-in",3,"click",4,"ngIf"],["class","page-link zoom-in",3,"click",4,"ngIf"],["azt-track-service","azt-paging-sdAfPVcahq",1,"page-link","zoom-in",3,"click"],[1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-L-1rQPYpcp","class","page-link zoom-in",3,"click",4,"ngIf"],["azt-track-service","azt-paging-U-yHiMo-V7",1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-bk-6smj4RZ","class","page-link zoom-in",3,"click",4,"ngIf"],["azt-track-service","azt-paging-bk-6smj4RZ",1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-L-1rQPYpcp",1,"page-link","zoom-in",3,"click"],["azt-track-service","azt-paging-RU-mjdPzDz","aria-label","Next",1,"page-link","zoom-in",3,"click"]],template:function(k,G){1&k&&e.DNE(0,u,8,6,"nav",0),2&k&&e.Y8G("ngIf",G.pageObj.totalPaginationPage&&G.pageObj.totalPaginationPage>1)},dependencies:[$.F2,D.MD,D.YU,D.Sq,D.bT,c.X1,v.iI,v.Wk,c.YN,V.s,H.flO,z.L,B.Id,W.k],encapsulation:2}),T})()},25919:(ie,l,x)=>{"use strict";x.d(l,{d:()=>e});class e{constructor(O){this.totalPaginationPage=0,this.page=1,this.arrayPag=[],this.pageSize=O}arrayPage(){for(let O=1;O<=(this.totalPaginationPage??0);O++)this.arrayPag.push(O)}setTotalPages(O){return this.totalPaginationPage=O%this.pageSize>0?(O-O%this.pageSize)/this.pageSize+1:O>0?O/this.pageSize:1,this.page>this.totalPaginationPage&&(this.page=this.totalPaginationPage),this.totalPaginationPage}setPageNumber(O){return this.page=O,this.page}getViewObjsOfCurrentPage(O){return O.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}}},60126:(ie,l,x)=>{"use strict";x.d(l,{V:()=>J});var e=x(60177),U=x(89417),O=x(34006),$=x(32108),D=x(8516),c=x(93953),v=x(33726),V=x(21413),H=x(86648),z=x(56977),B=x(70152),W=x(5964),g=x(20717),L=x.t(g,2),_=x(33876),A=x.t(_,2);const F=["pdfViewerContainer"];function i(M,Z,R){M[Z]=R}function d(){return typeof window>"u"}d()||i(L,"verbosity",g.VerbosityLevel.INFOS);var P=function(M){return M[M.DISABLED=0]="DISABLED",M[M.ENABLED=1]="ENABLED",M[M.ENHANCED=2]="ENHANCED",M}(P||{});let f=(()=>{class M{constructor(R,ne){if(this.element=R,this.ngZone=ne,this.isVisible=!1,this._cMapsUrl=typeof L<"u"?`https://unpkg.com/pdfjs-dist@${g.version}/cmaps/`:null,this._imageResourcesPath=typeof L<"u"?`https://unpkg.com/pdfjs-dist@${g.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=P.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new V.B,this.afterLoadComplete=new c.bkB,this.pageRendered=new c.bkB,this.pageInitialized=new c.bkB,this.textLayerRendered=new c.bkB,this.onError=new c.bkB,this.onProgress=new c.bkB,this.pageChange=new c.bkB(!0),d())return;let oe;const me=g.version;oe=window[`pdfWorkerSrc${me}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${me}/legacy/build/pdf.worker.min.js`),i(g.GlobalWorkerOptions,"workerSrc",oe)}set cMapsUrl(R){this._cMapsUrl=R}set page(R){const ne=R=parseInt(R,10)||1;this._pdf&&(R=this.getValidPageNumber(R)),this._page=R,ne!==R&&this.pageChange.emit(R)}set renderText(R){this._renderText=R}set renderTextMode(R){this._renderTextMode=R}set originalSize(R){this._originalSize=R}set showAll(R){this._showAll=R}set stickToPage(R){this._stickToPage=R}set zoom(R){R<=0||(this._zoom=R)}get zoom(){return this._zoom}set zoomScale(R){this._zoomScale=R}get zoomScale(){return this._zoomScale}set rotation(R){"number"==typeof R&&R%90==0?this._rotation=R:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(R){this._externalLinkTarget=R}set autoresize(R){this._canAutoResize=!!R}set fitToPage(R){this._fitToPage=!!R}set showBorders(R){this._showBorders=!!R}static getLinkTarget(R){switch(R){case"blank":return _.LinkTarget.BLANK;case"none":return _.LinkTarget.NONE;case"self":return _.LinkTarget.SELF;case"parent":return _.LinkTarget.PARENT;case"top":return _.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const R=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=R?!1===this.isVisible&&null!=R&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(R){if(!d()&&this.isVisible)if("src"in R)this.loadPDF();else if(this._pdf){if("renderText"in R?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:P.DISABLED,this.resetPdfDocument()):"showAll"in R&&(this.setupViewer(),this.resetPdfDocument()),"page"in R){const{page:ne}=R;if(ne.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,H.H)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,z.Q)(this.destroy$)).subscribe({next:R=>{const ne=this._rotation+R.rotate,oe=R.getViewport({scale:this._zoom,rotation:ne}).width*M.CSS_UNITS;let me=this._zoom,ve=!0;if(!this._originalSize||this._fitToPage&&oe>this.pdfViewerContainer.nativeElement.clientWidth){const se=R.getViewport({scale:1,rotation:ne});me=this.getScale(se.width,se.height),ve=!this._stickToPage}this.pdfViewer._setScale(me,ve)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const R=M.getLinkTarget(this._externalLinkTarget);return R?{externalLinkTarget:R}:{}}initEventBus(){this.eventBus=function y(M,Z){const R=new M.EventBus;return function n(M,Z){(0,v.R)(M,"documentload").pipe((0,z.Q)(Z)).subscribe(()=>{const R=document.createEvent("CustomEvent");R.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(R)}),(0,v.R)(M,"pagerendered").pipe((0,z.Q)(Z)).subscribe(({pageNumber:R,cssTransform:ne,source:oe})=>{const me=document.createEvent("CustomEvent");me.initCustomEvent("pagerendered",!0,!0,{pageNumber:R,cssTransform:ne}),oe.div.dispatchEvent(me)}),(0,v.R)(M,"textlayerrendered").pipe((0,z.Q)(Z)).subscribe(({pageNumber:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:R}),ne.textLayerDiv.dispatchEvent(oe)}),(0,v.R)(M,"pagechanging").pipe((0,z.Q)(Z)).subscribe(({pageNumber:R,source:ne})=>{const oe=document.createEvent("UIEvents");oe.initEvent("pagechanging",!0,!0),oe.pageNumber=R,ne.container.dispatchEvent(oe)}),(0,v.R)(M,"pagesinit").pipe((0,z.Q)(Z)).subscribe(({source:R})=>{const ne=document.createEvent("CustomEvent");ne.initCustomEvent("pagesinit",!0,!0,null),R.container.dispatchEvent(ne)}),(0,v.R)(M,"pagesloaded").pipe((0,z.Q)(Z)).subscribe(({pagesCount:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("pagesloaded",!0,!0,{pagesCount:R}),ne.container.dispatchEvent(oe)}),(0,v.R)(M,"scalechange").pipe((0,z.Q)(Z)).subscribe(({scale:R,presetValue:ne,source:oe})=>{const me=document.createEvent("UIEvents");me.initEvent("scalechange",!0,!0),me.scale=R,me.presetValue=ne,oe.container.dispatchEvent(me)}),(0,v.R)(M,"updateviewarea").pipe((0,z.Q)(Z)).subscribe(({location:R,source:ne})=>{const oe=document.createEvent("UIEvents");oe.initEvent("updateviewarea",!0,!0),oe.location=R,ne.container.dispatchEvent(oe)}),(0,v.R)(M,"find").pipe((0,z.Q)(Z)).subscribe(({source:R,type:ne,query:oe,phraseSearch:me,caseSensitive:ve,highlightAll:se,findPrevious:Y})=>{if(R===window)return;const K=document.createEvent("CustomEvent");K.initCustomEvent("find"+ne,!0,!0,{query:oe,phraseSearch:me,caseSensitive:ve,highlightAll:se,findPrevious:Y}),window.dispatchEvent(K)}),(0,v.R)(M,"attachmentsloaded").pipe((0,z.Q)(Z)).subscribe(({attachmentsCount:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:R}),ne.container.dispatchEvent(oe)}),(0,v.R)(M,"sidebarviewchanged").pipe((0,z.Q)(Z)).subscribe(({view:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("sidebarviewchanged",!0,!0,{view:R}),ne.outerContainer.dispatchEvent(oe)}),(0,v.R)(M,"pagemode").pipe((0,z.Q)(Z)).subscribe(({mode:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("pagemode",!0,!0,{mode:R}),ne.pdfViewer.container.dispatchEvent(oe)}),(0,v.R)(M,"namedaction").pipe((0,z.Q)(Z)).subscribe(({action:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("namedaction",!0,!0,{action:R}),ne.pdfViewer.container.dispatchEvent(oe)}),(0,v.R)(M,"presentationmodechanged").pipe((0,z.Q)(Z)).subscribe(({active:R,switchInProgress:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("presentationmodechanged",!0,!0,{active:R,switchInProgress:ne}),window.dispatchEvent(oe)}),(0,v.R)(M,"outlineloaded").pipe((0,z.Q)(Z)).subscribe(({outlineCount:R,source:ne})=>{const oe=document.createEvent("CustomEvent");oe.initCustomEvent("outlineloaded",!0,!0,{outlineCount:R}),ne.container.dispatchEvent(oe)})}(R,Z),R}(A,this.destroy$),(0,v.R)(this.eventBus,"pagerendered").pipe((0,z.Q)(this.destroy$)).subscribe(R=>{this.pageRendered.emit(R)}),(0,v.R)(this.eventBus,"pagesinit").pipe((0,z.Q)(this.destroy$)).subscribe(R=>{this.pageInitialized.emit(R)}),(0,v.R)(this.eventBus,"pagechanging").pipe((0,z.Q)(this.destroy$)).subscribe(({pageNumber:R})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=R,this.pageChange.emit(R)},100)}),(0,v.R)(this.eventBus,"textlayerrendered").pipe((0,z.Q)(this.destroy$)).subscribe(R=>{this.textLayerRendered.emit(R)})}initPDFServices(){this.pdfLinkService=new _.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new _.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:P.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){i(L,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new _.PDFViewer(this.getPDFOptions()):new _.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(R){return R<1?1:R>this._pdf.numPages?this._pdf.numPages:R}getDocumentParams(){const R=typeof this.src;if(!this._cMapsUrl)return this.src;const ne={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===R?ne.url=this.src:"object"===R&&(void 0!==this.src.byteLength?ne.data=this.src:Object.assign(ne,this.src)),ne}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=g.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=ne=>{this.onProgress.emit(ne)};const R=this.src;(0,H.H)(this.loadingTask.promise).pipe((0,z.Q)(this.destroy$)).subscribe({next:ne=>{this._pdf=ne,this.lastLoaded=R,this.afterLoadComplete.emit(ne),this.resetPdfDocument(),this.update()},error:ne=>{this.lastLoaded=null,this.onError.emit(ne)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(R,ne){const oe=this._showBorders?2*M.BORDER_WIDTH:0,me=this.pdfViewerContainer.nativeElement.clientWidth-oe,ve=this.pdfViewerContainer.nativeElement.clientHeight-oe;if(0===ve||0===ne||0===me||0===R)return 1;let se=1;switch(this._zoomScale){case"page-fit":se=Math.min(ve/ne,me/R);break;case"page-height":se=ve/ne;break;default:se=me/R}return this._zoom*se/M.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){d()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){d()||this.ngZone.runOutsideAngular(()=>{(0,v.R)(window,"resize").pipe((0,B.B)(100),(0,W.p)(()=>this._canAutoResize&&!!this._pdf),(0,z.Q)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return M.CSS_UNITS=96/72,M.BORDER_WIDTH=9,M.\u0275fac=function(R){return new(R||M)(c.rXU(c.aKT),c.rXU(c.SKi))},M.\u0275cmp=c.VBU({type:M,selectors:[["pdf-viewer"]],viewQuery:function(R,ne){if(1&R&&c.GBs(F,5),2&R){let oe;c.mGM(oe=c.lsd())&&(ne.pdfViewerContainer=oe.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[c.OA$],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(R,ne){1&R&&(c.j41(0,"div",1,0),c.nrm(2,"div",2),c.k0s())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),M})(),w=(()=>{class M{}return M.\u0275fac=function(R){return new(R||M)},M.\u0275mod=c.$C({type:M}),M.\u0275inj=c.G2t({}),M})();var b=x(11782),h=x(46412),E=x(85389),I=x(88048),j=x(23424),q=x(44764),ee=x(1654),Q=x(9788);let he=(()=>{var M;class Z extends ee.H{constructor(){super(...arguments),this.audioMimesType="",this.loadedEvent=new c.bkB}onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}}return(M=Z).\u0275fac=(()=>{let R;return function(oe){return(R||(R=c.xGo(M)))(oe||M)}})(),M.\u0275cmp=c.VBU({type:M,selectors:[["azt-audio-embed"]],inputs:{cdnLink:"cdnLink",audioMimesType:"audioMimesType"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[c.Vt3,c.aNF],decls:3,vars:2,consts:[["controls",""],[3,"load","src"]],template:function(ne,oe){1&ne&&(c.j41(0,"audio",0)(1,"source",1),c.bIt("load",function(){return oe.onLoad()}),c.k0s(),c.EFF(2," Your browser does not support the audio element.\n"),c.k0s()),2&ne&&(c.R7$(),c.Y8G("src",oe.cdnLink,c.B4B),c.BMQ("type",oe.audioMimesType))},dependencies:[e.MD,U.X1,$.iI,U.YN,h.s,D.flO,j.L,b.Id,Q.k],encapsulation:2}),Z})();var fe=x(45312),ue=x(75682);let N=(()=>{var M;class Z{constructor(ne){this.configService=ne}getCurrentVersion(){return fe.c.versionTime}getGlobalNotice(){return this.configService.getConfig("globalNotice")}getEnvValue(ne){return this.configService.getConfig(ne)}getLinkEmbedDocument(ne){var oe=this.configService.getConfig("docView");return oe&&"MICROSOFT"!=oe?`https://docs.google.com/viewer?url=${ne}&embedded=true`:`https://view.officeapps.live.com/op/embed.aspx?src=${ne}`}getVersionMarkNote(ne){if(!ne)return 1000009;const ve=ne.match(/ver=(\d+)/);return Number(ve?.[1]??1000009)}}return(M=Z).\u0275fac=function(ne){return new(ne||M)(c.KVO(ue.u))},M.\u0275prov=c.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),Z})(),a=(()=>{var M;class Z extends ee.H{onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}checkValidLink(){this.whiteListOfficeIframeSrc=this.envService.getLinkEmbedDocument(this.cdnLink)}ngOnChanges(){this.checkValidLink()}ngOnInit(){super.ngOnInit(),this.checkValidLink()}constructor(ne){super(),this.envService=ne,this.videoMimesType="",this.classNames="",this.styles="",this.loadedEvent=new c.bkB,this.whiteListOfficeIframeSrc=""}}return(M=Z).\u0275fac=function(ne){return new(ne||M)(c.rXU(N))},M.\u0275cmp=c.VBU({type:M,selectors:[["azt-office-embed"]],inputs:{cdnLink:"cdnLink",videoMimesType:"videoMimesType",classNames:"classNames",styles:"styles"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[c.Vt3,c.OA$,c.aNF],decls:2,vars:6,consts:[["frameborder","0",3,"load","src"]],template:function(ne,oe){1&ne&&(c.j41(0,"iframe",0),c.nI1(1,"safe"),c.bIt("load",function(){return oe.onLoad()}),c.k0s()),2&ne&&(c.HbH(oe.classNames),c.Y8G("src",c.bMT(1,4,oe.whiteListOfficeIframeSrc),c.f$h),c.BMQ("style",oe.styles,c.$dS))},dependencies:[e.MD,U.X1,$.iI,U.YN,h.s,D.flO,j.L,I.JI,b.Id,Q.k],encapsulation:2}),Z})();var t=x(30766),r=x(30665),o=function(M){return M.unknown="unknown",M.xlsx="xlsx",M.image="image",M.jpeg="jpeg",M.doc="doc",M.docx="docx",M.ppt="ppt",M.pptx="pptx",M.pdf="pdf",M.video="video",M.mp4="mp4",M.mov="mov",M.webm="webm",M.quicktime="quicktime",M.audio="audio",M.mp3="mp3",M.wav="wav",M.google_docs="google_docs",M.exam="exam",M.homework="homework",M.powerpoint="powerpoint",M}(o||{}),u=x(345),p=x(58850);const s=M=>({flex:M});function T(M,Z){1&M&&(c.j41(0,"div",3)(1,"span",4),c.nrm(2,"azt-loading-ui"),c.k0s(),c.j41(3,"span",5),c.EFF(4,"Loading..."),c.k0s()())}function C(M,Z){if(1&M&&(c.j41(0,"span"),c.EFF(1),c.nI1(2,"mytranslate"),c.k0s()),2&M){const R=c.XpG(3);c.R7$(),c.Lme("",c.bMT(2,2,"lang_auto_dung_luong"),": ",R.fileMb," MB |")}}function k(M,Z){if(1&M&&(c.j41(0,"div",20),c.DNE(1,C,3,4,"span",21),c.EFF(2),c.nI1(3,"mytranslate"),c.k0s()),2&M){const R=c.XpG(2);c.R7$(),c.Y8G("ngIf",0!=R.fileMb),c.R7$(),c.Lme(" ",c.bMT(3,3,"lang_auto_loai"),": ",R.fileOption.mimes," ")}}function G(M,Z){1&M&&(c.j41(0,"div",20),c.EFF(1),c.nI1(2,"mytranslate"),c.k0s()),2&M&&(c.R7$(),c.JRh(c.bMT(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function X(M,Z){if(1&M&&(c.j41(0,"a",22),c.nrm(1,"lucide-icon",23),c.k0s()),2&M){const R=c.XpG(2);c.BMQ("href",R.rootLink,c.B4B)("download",R.fileOption.name)}}function le(M,Z){if(1&M){const R=c.RV6();c.j41(0,"azt-audio-embed",30),c.bIt("onLoad",function(){c.eBV(R);const oe=c.XpG(4);return c.Njj(oe.onLoad())}),c.k0s()}if(2&M){let R;const ne=c.XpG(4);c.Y8G("cdnLink",ne.cdnLink)("audioMimesType",null!==(R=ne.fileOption.mimes)&&void 0!==R?R:"")}}function ce(M,Z){if(1&M&&(c.j41(0,"div")(1,"div",28),c.DNE(2,le,1,2,"azt-audio-embed",29),c.k0s()()),2&M){const R=c.XpG(3);c.R7$(2),c.Y8G("ngIf",R.cdnLink)}}function ge(M,Z){if(1&M){const R=c.RV6();c.j41(0,"div")(1,"div",31)(2,"azt-video-embed",32),c.bIt("loadedEvent",function(){c.eBV(R);const oe=c.XpG(3);return c.Njj(oe.onLoad())}),c.k0s()()()}if(2&M){let R;const ne=c.XpG(3);c.R7$(2),c.Y8G("cdnLink",ne.cdnLink)("videoMimesType",null!==(R=ne.fileOption.mimes)&&void 0!==R?R:"")("videoThumbUrl",ne.videoThumbUrl)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function _e(M,Z){if(1&M){const R=c.RV6();c.j41(0,"div")(1,"div",33)(2,"azt-office-embed",34),c.bIt("loadedEvent",function(){c.eBV(R);const oe=c.XpG(3);return c.Njj(oe.onLoad())}),c.k0s()()()}if(2&M){const R=c.XpG(3);c.R7$(2),c.Y8G("cdnLink",R.cdnLink)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function de(M,Z){if(1&M){const R=c.RV6();c.j41(0,"div")(1,"div",35)(2,"pdf-viewer",36),c.bIt("load",function(){c.eBV(R);const oe=c.XpG(3);return c.Njj(oe.onLoad())}),c.k0s()()()}if(2&M){const R=c.XpG(3);c.R7$(2),c.Y8G("src",R.cdnLink)("show-all",!0)}}function m(M,Z){if(1&M){const R=c.RV6();c.j41(0,"div")(1,"div",31)(2,"img",37),c.bIt("load",function(){c.eBV(R);const oe=c.XpG(3);return c.Njj(oe.onLoad())}),c.k0s()()()}if(2&M){const R=c.XpG(3);c.R7$(2),c.BMQ("src",R.cdnLink,c.B4B)}}function S(M,Z){if(1&M&&(c.j41(0,"div")(1,"div",31),c.nrm(2,"iframe",38),c.nI1(3,"safe"),c.k0s()()),2&M){const R=c.XpG(3);c.R7$(2),c.HbH("mx-auto"),c.Y8G("src",c.bMT(3,3,R.cdnLink),c.f$h)}}function re(M,Z){if(1&M&&(c.qex(0),c.j41(1,"div",24)(2,"div",25),c.DNE(3,ce,3,1,"div",21)(4,ge,3,4,"div",21)(5,_e,3,2,"div",21)(6,de,3,2,"div",21)(7,m,3,1,"div",21)(8,S,4,5,"div",21),c.nrm(9,"div",26),c.k0s(),c.nrm(10,"div",27),c.k0s(),c.bVm()),2&M){const R=c.XpG(2);c.R7$(3),c.Y8G("ngIf","audio"===R.typeFile),c.R7$(),c.Y8G("ngIf","video"===R.typeFile),c.R7$(),c.Y8G("ngIf","officeapps"===R.typeFile),c.R7$(),c.Y8G("ngIf","pdf"===R.typeFile),c.R7$(),c.Y8G("ngIf","image"===R.typeFile),c.R7$(),c.Y8G("ngIf","google_docs"===R.typeFile)}}function ae(M,Z){if(1&M){const R=c.RV6();c.j41(0,"div",24)(1,"div",25)(2,"div",39)(3,"img",40),c.bIt("load",function(){c.eBV(R);const oe=c.XpG(2);return c.Njj(oe.onLoad())}),c.k0s()()()()}if(2&M){const R=c.XpG(2);c.R7$(3),c.BMQ("src",R.fileOption.url,c.B4B)}}function te(M,Z){if(1&M){const R=c.RV6();c.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),c.nrm(4,"div",10),c.nI1(5,"coreModConvertCdnLinkOfGitHub"),c.k0s(),c.j41(6,"div",11),c.EFF(7),c.k0s(),c.DNE(8,k,4,5,"div",12)(9,G,3,3,"div",12),c.k0s(),c.j41(10,"div",13)(11,"span",14),c.DNE(12,X,2,2,"a",15),c.k0s(),c.j41(13,"button",16),c.bIt("click",function(){c.eBV(R);const oe=c.XpG();return c.Njj(oe.btnClosePreview())}),c.nrm(14,"lucide-icon",17),c.k0s()()(),c.j41(15,"div",18),c.DNE(16,re,11,6,"ng-container",19)(17,ae,4,1,"ng-template",null,0,c.C5r),c.k0s()()}if(2&M){const R=c.sdS(18),ne=c.XpG();c.R7$(2),c.Y8G("ngClass",c.eq3(11,s,""==ne.fileOption.name)),c.R7$(2),c.xc7("background-image",c.bMT(5,9,"images/documents.png")),c.R7$(3),c.JRh(ne.fileOption.name),c.R7$(),c.Y8G("ngIf",ne.fileOption.mimes),c.R7$(),c.Y8G("ngIf",!ne.fileOption.mimes),c.R7$(3),c.Y8G("ngIf",ne.showDownloadIcon),c.R7$(4),c.Y8G("ngIf",!ne.viewFullImageWithScroll)("ngIfElse",R)}}let J=(()=>{var M;class Z extends E._{onLoad(){this.stopStatusObj()}initData(){let ne=this.fileOption?.size?Number(this.fileOption.size):0,oe=this.fileOption?.mimes?this.fileOption.mimes:"";this.cdnLink=this.sAztCommonCdnService.getMyCdn(this.fileOption?.url??""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(ne),this.typeFile=(0,q.yY)(oe),(0,q.VJ)(this.cdnLink)&&(this.typeFile="video"),(0,q.si)(this.cdnLink)&&(this.typeFile="google_docs"),setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.dialogRef.close(!1)}getFileMB(ne){return ne&&ne>0?(ne/=1048576).toFixed(2):0}ngOnInit(){if(super.ngOnInit(),document.body.classList.add("overflow-hidden"),this.videoThumbUrl=this.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("images/video-thumb.png"),this.initStatusObj(),this.initData(),this.fileOption?.type===this.allDocumentTypes.google_docs)return window.open(this.fileOption?.url,"_blank")?.focus(),void this.dialogRef.close()}constructor(ne,oe,me,ve){super(ve,me),this.dom=ne,this.sAztCommonCdnService=oe,this.dialogRef=me,this.viewFullImageWithScroll=!1,this.showDownloadIcon=!0,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.allDocumentTypes=o,this.fileOption=ve.fileOption,this.viewFullImageWithScroll=ve.viewFullImageWithScroll??!1,this.showDownloadIcon=ve.showDownloadIcon??this.showDownloadIcon}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return(M=Z).\u0275fac=function(ne){return new(ne||M)(c.rXU(u.up),c.rXU(p.c),c.rXU(O.CP,8),c.rXU(O.Vh,8))},M.\u0275cmp=c.VBU({type:M,selectors:[["azt-preview-media-new"]],standalone:!0,features:[c.Vt3,c.aNF],decls:2,vars:2,consts:[["viewFullImage",""],["class","loading-block",4,"ngIf"],["class","box h-full","style","border-radius: 0px",4,"ngIf"],[1,"loading-block"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","h-full",2,"border-radius","0px"],[1,"flex","fixed","top-0","pt-3","border-b","border-slate-200/60","dark:border-darkmode-400","items-center","w-full"],[1,"file-preview__header-left",2,"align-items","center",3,"ngClass"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-size","cover"],[1,"file-preview__header__title"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"mr-4"],["class","btn btn-outline-primary btn-transparent","target","_blank",4,"ngIf"],["azt-track-service","azt-preview-media-c4Ztzr2oIZj",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["name","x","size","24"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],[1,"file-preview__header__send-time"],[4,"ngIf"],["target","_blank",1,"btn","btn-outline-primary","btn-transparent"],["name","download","size","24"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],[3,"cdnLink","audioMimesType","onLoad",4,"ngIf"],[3,"onLoad","cdnLink","audioMimesType"],[1,"pl-2","pr-2","mt-3"],[3,"loadedEvent","cdnLink","videoMimesType","videoThumbUrl","styles"],[1,"pl-2","pr-2","mp-0"],[3,"loadedEvent","cdnLink","styles"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"load","src","show-all"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],["width","850","height","600","frameborder","0","allowfullscreen","",3,"src"],[1,"pl-2","pr-2","mt-3","block-img"],[1,"img-fluid","image-preview",3,"load"]],template:function(ne,oe){1&ne&&c.DNE(0,T,5,0,"div",1)(1,te,19,13,"div",2),2&ne&&(c.Y8G("ngIf",oe.statusObj.loading),c.R7$(),c.Y8G("ngIf",null!=oe.fileOption&&!oe.statusObj.loading))},dependencies:[w,f,r.R,he,t.y,a,e.MD,e.YU,e.bT,U.X1,$.iI,U.YN,I.wp,I.Vs,h.s,D.flO,D.WGl,j.L,I.JI,b.Id,Q.k],styles:[".file-preview[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0;border-radius:0}.block-img[_ngcontent-%COMP%]{width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),Z})()},20717:function(module,__unused_webpack_exports,__webpack_require__){var _defineProperty=__webpack_require__(40829).default,_classPrivateMethodInitSpec=__webpack_require__(80816).default,_classPrivateFieldInitSpec=__webpack_require__(43723).default,_classPrivateFieldSet=__webpack_require__(7920).default,_classPrivateFieldGet=__webpack_require__(18188).default,_assertClassBrand=__webpack_require__(45804).default,_asyncToGenerator=__webpack_require__(75453).default,x;x=()=>(()=>{"use strict";var __webpack_modules__=[,(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.UNSUPPORTED_FEATURES=l.TextRenderingMode=l.StreamType=l.RenderingIntentFlag=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FontType=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.AnnotationType=l.AnnotationStateModelType=l.AnnotationReviewState=l.AnnotationReplyType=l.AnnotationMode=l.AnnotationMarkedState=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.arrayByteLength=k,l.arraysToBytes=function G(se){const Y=se.length;if(1===Y&&se[0]instanceof Uint8Array)return se[0];let K=0;for(let ye=0;ye<Y;ye++)K+=k(se[ye]);let pe=0;const be=new Uint8Array(K);for(let ye=0;ye<Y;ye++){let Ae=se[ye];Ae instanceof Uint8Array||(Ae="string"==typeof Ae?C(Ae):new Uint8Array(Ae));const xe=Ae.byteLength;be.set(Ae,pe),pe+=xe}return be},l.assert=function Q(se,Y){se||ee(Y)},l.bytesToString=function T(se){("object"!=typeof se||null===se||void 0===se.length)&&ee("Invalid argument for bytesToString");const Y=se.length,K=8192;if(Y<K)return String.fromCharCode.apply(null,se);const pe=[];for(let be=0;be<Y;be+=K){const ye=Math.min(be+K,Y),Ae=se.subarray(be,ye);pe.push(String.fromCharCode.apply(null,Ae))}return pe.join("")},l.createPromiseCapability=function ve(){const se=Object.create(null);let Y=!1;return Object.defineProperty(se,"settled",{get:()=>Y}),se.promise=new Promise(function(K,pe){se.resolve=function(be){Y=!0,K(be)},se.reject=function(be){Y=!0,pe(be)}}),se},l.createValidAbsoluteUrl=function fe(se,Y=null,K=null){if(!se)return null;try{if(K&&"string"==typeof se){if(K.addDefaultProtocol&&se.startsWith("www.")){const be=se.match(/\./g);be&&be.length>=2&&(se=`http://${se}`)}if(K.tryConvertEncoding)try{se=Z(se)}catch{}}const pe=Y?new URL(se,Y):new URL(se);if(function he(se){if(!se)return!1;switch(se.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(pe))return pe}catch{}return null},l.escapeString=function te(se){return se.replace(/([()\\\n\r])/g,Y=>"\n"===Y?"\\n":"\r"===Y?"\\r":`\\${Y}`)},l.getModificationDate=function me(se=new Date){return[se.getUTCFullYear().toString(),(se.getUTCMonth()+1).toString().padStart(2,"0"),se.getUTCDate().toString().padStart(2,"0"),se.getUTCHours().toString().padStart(2,"0"),se.getUTCMinutes().toString().padStart(2,"0"),se.getUTCSeconds().toString().padStart(2,"0")].join("")},l.getVerbosityLevel=function I(){return h},l.info=function j(se){h>=d.INFOS&&console.log(`Info: ${se}`)},l.isArrayBuffer=function ne(se){return"object"==typeof se&&null!==se&&void 0!==se.byteLength},l.isArrayEqual=function oe(se,Y){if(se.length!==Y.length)return!1;for(let K=0,pe=se.length;K<pe;K++)if(se[K]!==Y[K])return!1;return!0},l.isAscii=function J(se){return/^[\x00-\x7F]*$/.test(se)},l.objectFromMap=function ce(se){const Y=Object.create(null);for(const[K,pe]of se)Y[K]=pe;return Y},l.objectSize=function le(se){return Object.keys(se).length},l.setVerbosityLevel=function E(se){Number.isInteger(se)&&(h=se)},l.shadow=ue,l.string32=function X(se){return String.fromCharCode(se>>24&255,se>>16&255,se>>8&255,255&se)},l.stringToBytes=C,l.stringToPDFString=function ae(se){if(se[0]>="\xef"){let K;if("\xfe"===se[0]&&"\xff"===se[1]?K="utf-16be":"\xff"===se[0]&&"\xfe"===se[1]?K="utf-16le":"\xef"===se[0]&&"\xbb"===se[1]&&"\xbf"===se[2]&&(K="utf-8"),K)try{const pe=new TextDecoder(K,{fatal:!0}),be=C(se);return pe.decode(be)}catch(pe){q(`stringToPDFString: "${pe}".`)}}const Y=[];for(let K=0,pe=se.length;K<pe;K++){const be=re[se.charCodeAt(K)];Y.push(be?String.fromCharCode(be):se.charAt(K))}return Y.join("")},l.stringToUTF16BEString=function M(se){const Y=["\xfe\xff"];for(let K=0,pe=se.length;K<pe;K++){const be=se.charCodeAt(K);Y.push(String.fromCharCode(be>>8&255),String.fromCharCode(255&be))}return Y.join("")},l.stringToUTF8String=Z,l.unreachable=ee,l.utf8StringToString=function R(se){return unescape(encodeURIComponent(se))},l.warn=q,x(2),l.IDENTITY_MATRIX=[1,0,0,1,0,0],l.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],l.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},l.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},l.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},l.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},l.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},l.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},l.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},l.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},l.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},l.AnnotationReplyType={GROUP:"Group",REPLY:"R"},l.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},l.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},l.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},l.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},l.PageActionEventType={O:"PageOpen",C:"PageClose"},l.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},l.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const d={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=d,l.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},l.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},l.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},l.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let h=d.WARNINGS;function q(se){h>=d.WARNINGS&&console.log(`Warning: ${se}`)}function ee(se){throw new Error(se)}function ue(se,Y,K){return Object.defineProperty(se,Y,{value:K,enumerable:!0,configurable:!0,writable:!1}),K}const N=function(){function Y(K,pe){this.constructor===Y&&ee("Cannot initialize BaseException."),this.message=K,this.name=pe}return Y.prototype=new Error,Y.constructor=Y,Y}();function C(se){"string"!=typeof se&&ee("Invalid argument for stringToBytes");const Y=se.length,K=new Uint8Array(Y);for(let pe=0;pe<Y;++pe)K[pe]=255&se.charCodeAt(pe);return K}function k(se){return void 0!==se.length?se.length:void 0!==se.byteLength?se.byteLength:void ee("Invalid argument for arrayByteLength")}l.BaseException=N,l.PasswordException=class a extends N{constructor(Y,K){super(Y,"PasswordException"),this.code=K}},l.UnknownErrorException=class t extends N{constructor(Y,K){super(Y,"UnknownErrorException"),this.details=K}},l.InvalidPDFException=class r extends N{constructor(Y){super(Y,"InvalidPDFException")}},l.MissingPDFException=class o extends N{constructor(Y){super(Y,"MissingPDFException")}},l.UnexpectedResponseException=class u extends N{constructor(Y,K){super(Y,"UnexpectedResponseException"),this.status=K}},l.FormatError=class p extends N{constructor(Y){super(Y,"FormatError")}},l.AbortException=class s extends N{constructor(Y){super(Y,"AbortException")}},l.FeatureTest=class de{static get isLittleEndian(){return ue(this,"isLittleEndian",function ge(){const se=new Uint8Array(4);return se[0]=1,1===new Uint32Array(se.buffer,0,1)[0]}())}static get isEvalSupported(){return ue(this,"isEvalSupported",function _e(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return ue(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const m=[...Array(256).keys()].map(se=>se.toString(16).padStart(2,"0"));class S{static makeHexColor(Y,K,pe){return`#${m[Y]}${m[K]}${m[pe]}`}static scaleMinMax(Y,K){let pe;Y[0]?(Y[0]<0&&(pe=K[0],K[0]=K[1],K[1]=pe),K[0]*=Y[0],K[1]*=Y[0],Y[3]<0&&(pe=K[2],K[2]=K[3],K[3]=pe),K[2]*=Y[3],K[3]*=Y[3]):(pe=K[0],K[0]=K[2],K[2]=pe,pe=K[1],K[1]=K[3],K[3]=pe,Y[1]<0&&(pe=K[2],K[2]=K[3],K[3]=pe),K[2]*=Y[1],K[3]*=Y[1],Y[2]<0&&(pe=K[0],K[0]=K[1],K[1]=pe),K[0]*=Y[2],K[1]*=Y[2]),K[0]+=Y[4],K[1]+=Y[4],K[2]+=Y[5],K[3]+=Y[5]}static transform(Y,K){return[Y[0]*K[0]+Y[2]*K[1],Y[1]*K[0]+Y[3]*K[1],Y[0]*K[2]+Y[2]*K[3],Y[1]*K[2]+Y[3]*K[3],Y[0]*K[4]+Y[2]*K[5]+Y[4],Y[1]*K[4]+Y[3]*K[5]+Y[5]]}static applyTransform(Y,K){return[Y[0]*K[0]+Y[1]*K[2]+K[4],Y[0]*K[1]+Y[1]*K[3]+K[5]]}static applyInverseTransform(Y,K){const pe=K[0]*K[3]-K[1]*K[2];return[(Y[0]*K[3]-Y[1]*K[2]+K[2]*K[5]-K[4]*K[3])/pe,(-Y[0]*K[1]+Y[1]*K[0]+K[4]*K[1]-K[5]*K[0])/pe]}static getAxialAlignedBoundingBox(Y,K){const pe=S.applyTransform(Y,K),be=S.applyTransform(Y.slice(2,4),K),ye=S.applyTransform([Y[0],Y[3]],K),Ae=S.applyTransform([Y[2],Y[1]],K);return[Math.min(pe[0],be[0],ye[0],Ae[0]),Math.min(pe[1],be[1],ye[1],Ae[1]),Math.max(pe[0],be[0],ye[0],Ae[0]),Math.max(pe[1],be[1],ye[1],Ae[1])]}static inverseTransform(Y){const K=Y[0]*Y[3]-Y[1]*Y[2];return[Y[3]/K,-Y[1]/K,-Y[2]/K,Y[0]/K,(Y[2]*Y[5]-Y[4]*Y[3])/K,(Y[4]*Y[1]-Y[5]*Y[0])/K]}static apply3dTransform(Y,K){return[Y[0]*K[0]+Y[1]*K[1]+Y[2]*K[2],Y[3]*K[0]+Y[4]*K[1]+Y[5]*K[2],Y[6]*K[0]+Y[7]*K[1]+Y[8]*K[2]]}static singularValueDecompose2dScale(Y){const K=[Y[0],Y[2],Y[1],Y[3]],pe=Y[0]*K[0]+Y[1]*K[2],Ae=Y[2]*K[1]+Y[3]*K[3],xe=(pe+Ae)/2,Me=Math.sqrt((pe+Ae)**2-4*(pe*Ae-(Y[2]*K[0]+Y[3]*K[2])*(Y[0]*K[1]+Y[1]*K[3])))/2,Pe=xe-Me||1;return[Math.sqrt(xe+Me||1),Math.sqrt(Pe)]}static normalizeRect(Y){const K=Y.slice(0);return Y[0]>Y[2]&&(K[0]=Y[2],K[2]=Y[0]),Y[1]>Y[3]&&(K[1]=Y[3],K[3]=Y[1]),K}static intersect(Y,K){const pe=Math.max(Math.min(Y[0],Y[2]),Math.min(K[0],K[2])),be=Math.min(Math.max(Y[0],Y[2]),Math.max(K[0],K[2]));if(pe>be)return null;const ye=Math.max(Math.min(Y[1],Y[3]),Math.min(K[1],K[3])),Ae=Math.min(Math.max(Y[1],Y[3]),Math.max(K[1],K[3]));return ye>Ae?null:[pe,ye,be,Ae]}static bezierBoundingBox(Y,K,pe,be,ye,Ae,xe,Me){const ke=[],Pe=[[],[]];let Ce,we,Te,Se,Le,Re,De,Oe;for(let Ne=0;Ne<2;++Ne)if(0===Ne?(we=6*Y-12*pe+6*ye,Ce=-3*Y+9*pe-9*ye+3*xe,Te=3*pe-3*Y):(we=6*K-12*be+6*Ae,Ce=-3*K+9*be-9*Ae+3*Me,Te=3*be-3*K),Math.abs(Ce)<1e-12){if(Math.abs(we)<1e-12)continue;Se=-Te/we,0<Se&&Se<1&&ke.push(Se)}else De=we*we-4*Te*Ce,Oe=Math.sqrt(De),!(De<0)&&(Le=(-we+Oe)/(2*Ce),0<Le&&Le<1&&ke.push(Le),Re=(-we-Oe)/(2*Ce),0<Re&&Re<1&&ke.push(Re));let Ee,Fe=ke.length;const Ie=Fe;for(;Fe--;)Se=ke[Fe],Ee=1-Se,Pe[0][Fe]=Ee*Ee*Ee*Y+3*Ee*Ee*Se*pe+3*Ee*Se*Se*ye+Se*Se*Se*xe,Pe[1][Fe]=Ee*Ee*Ee*K+3*Ee*Ee*Se*be+3*Ee*Se*Se*Ae+Se*Se*Se*Me;return Pe[0][Ie]=Y,Pe[1][Ie]=K,Pe[0][Ie+1]=xe,Pe[1][Ie+1]=Me,Pe[0].length=Pe[1].length=Ie+2,[Math.min(...Pe[0]),Math.min(...Pe[1]),Math.max(...Pe[0]),Math.max(...Pe[1])]}}l.Util=S;const re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Z(se){return decodeURIComponent(escape(se))}},(ie,l,x)=>{x(3)},(ie,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isNodeJS=void 0;const x=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);l.isNodeJS=x},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:ie,NodeCMapReaderFactory:l,NodeStandardFontDataFactory:x}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=ie,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=l,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=x}function setPDFNetworkStreamFactory(ie){createPDFNetworkStream=ie}function getDocument(ie){const l=new PDFDocumentLoadingTask;let x;if("string"==typeof ie||ie instanceof URL)x={url:ie};else if((0,_util.isArrayBuffer)(ie))x={data:ie};else if(ie instanceof PDFDataRangeTransport)x={range:ie};else{if("object"!=typeof ie)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!ie.url&&!ie.data&&!ie.range)throw new Error("Invalid parameter object: need either .data, .range or .url");x=ie}const e=Object.create(null);let U=null,O=null;for(const D in x){const c=x[D];switch(D){case"url":if(typeof window<"u")try{e[D]=new URL(c,window.location).href;continue}catch(v){(0,_util.warn)(`Cannot create valid URL: "${v}".`)}else if("string"==typeof c||c instanceof URL){e[D]=c.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":U=c;continue;case"worker":O=c;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)e[D]=new Uint8Array(c);else{if(c instanceof Uint8Array)break;if("string"==typeof c)e[D]=(0,_util.stringToBytes)(c);else if("object"!=typeof c||null===c||isNaN(c.length)){if(!(0,_util.isArrayBuffer)(c))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");e[D]=new Uint8Array(c)}else e[D]=new Uint8Array(c)}continue}e[D]=c}if(e.CMapReaderFactory=e.CMapReaderFactory||DefaultCMapReaderFactory,e.StandardFontDataFactory=e.StandardFontDataFactory||DefaultStandardFontDataFactory,e.ignoreErrors=!0!==e.stopAtErrors,e.fontExtraProperties=!0===e.fontExtraProperties,e.pdfBug=!0===e.pdfBug,e.enableXfa=!0===e.enableXfa,(!Number.isInteger(e.rangeChunkSize)||e.rangeChunkSize<1)&&(e.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl))&&(e.docBaseUrl=null),(!Number.isInteger(e.maxImageSize)||e.maxImageSize<-1)&&(e.maxImageSize=-1),"string"!=typeof e.cMapUrl&&(e.cMapUrl=null),"string"!=typeof e.standardFontDataUrl&&(e.standardFontDataUrl=null),"boolean"!=typeof e.useWorkerFetch&&(e.useWorkerFetch=e.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&e.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof e.isEvalSupported&&(e.isEvalSupported=!0),"boolean"!=typeof e.disableFontFace&&(e.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof e.useSystemFonts&&(e.useSystemFonts=!_is_node.isNodeJS&&!e.disableFontFace),("object"!=typeof e.ownerDocument||null===e.ownerDocument)&&(e.ownerDocument=globalThis.document),"boolean"!=typeof e.disableRange&&(e.disableRange=!1),"boolean"!=typeof e.disableStream&&(e.disableStream=!1),"boolean"!=typeof e.disableAutoFetch&&(e.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(e.verbosity),!O){const D={verbosity:e.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};O=D.port?PDFWorker.fromPort(D):new PDFWorker(D),l._worker=O}const $=l.docId;return O.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const D=_fetchDocument(O,e,U,$),c=new Promise(function(v){let V;U?V=new _transport_stream.PDFDataTransportStream({length:e.length,initialData:e.initialData,progressiveDone:e.progressiveDone,contentDispositionFilename:e.contentDispositionFilename,disableRange:e.disableRange,disableStream:e.disableStream},U):e.data||(V=createPDFNetworkStream({url:e.url,length:e.length,httpHeaders:e.httpHeaders,withCredentials:e.withCredentials,rangeChunkSize:e.rangeChunkSize,disableRange:e.disableRange,disableStream:e.disableStream})),v(V)});return Promise.all([D,c]).then(function([v,V]){if(l.destroyed)throw new Error("Loading aborted");const H=new _message_handler.MessageHandler($,v,O.port),z=new WorkerTransport(H,l,V,e);l._transport=z,H.send("Ready",null)})}).catch(l._capability.reject),l}function _fetchDocument(ie,l,x,e){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(ie,l,x,e){if(ie.destroyed)throw new Error("Worker was destroyed");x&&(l.length=x.length,l.initialData=x.initialData,l.progressiveDone=x.progressiveDone,l.contentDispositionFilename=x.contentDispositionFilename);const U=yield ie.messageHandler.sendWithPromise("GetDocRequest",{docId:e,apiVersion:"2.14.305",source:{data:l.data,url:l.url,password:l.password,disableAutoFetch:l.disableAutoFetch,rangeChunkSize:l.rangeChunkSize,length:l.length},maxImageSize:l.maxImageSize,disableFontFace:l.disableFontFace,docBaseUrl:l.docBaseUrl,ignoreErrors:l.ignoreErrors,isEvalSupported:l.isEvalSupported,fontExtraProperties:l.fontExtraProperties,enableXfa:l.enableXfa,useSystemFonts:l.useSystemFonts,cMapUrl:l.useWorkerFetch?l.cMapUrl:null,standardFontDataUrl:l.useWorkerFetch?l.standardFontDataUrl:null});if(ie.destroyed)throw new Error("Worker was destroyed");return U})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var l,x;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_docId._=(l=_docId._,x=l++,l),x}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var l=this;return _asyncToGenerator(function*(){l.destroyed=!0,yield l._transport?.destroy(),l._transport=null,l._worker&&(l._worker.destroy(),l._worker=null)})()}}var _docId={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,x,e=!1,U=null){this.length=l,this.initialData=x,this.progressiveDone=e,this.contentDispositionFilename=U,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,x){for(const e of this._rangeListeners)e(l,x)}onDataProgress(l,x){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(l,x)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const x of this._progressiveReadListeners)x(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,x){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,x){var U,e=this;this._pdfInfo=l,this._transport=x,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(U=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),e.stats||{streamTypes:{},fontTypes:{}}}),function(){return U.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,x,e,U,O=!1){this._pageIndex=l,this._pageInfo=x,this._ownerDocument=U,this._transport=e,this._stats=O?new _display_utils.StatTimer:null,this._pdfBug=O,this.commonObjs=e.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:x=this.rotate,offsetX:e=0,offsetY:U=0,dontFlip:O=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:x,offsetX:e,offsetY:U,dontFlip:O})}getAnnotations({intent:l="display"}={}){const x=this._transport.getRenderingIntent(l);let e=this._annotationPromises.get(x.cacheKey);return e||(e=this._transport.getAnnotations(this._pageIndex,x.renderingIntent),this._annotationPromises.set(x.cacheKey,e),e=e.then(U=>{for(const O of U)void 0!==O.titleObj&&Object.defineProperty(O,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),O.titleObj.str)}),void 0!==O.contentsObj&&Object.defineProperty(O,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),O.contentsObj.str)});return U})),e}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var l=this;return _asyncToGenerator(function*(){return l._transport._htmlForXfa?.children[l._pageIndex]||null})()}render({canvasContext:l,viewport:x,intent:e="display",annotationMode:U=_util.AnnotationMode.ENABLE,transform:O=null,imageLayer:$=null,canvasFactory:D=null,background:c=null,optionalContentConfigPromise:v=null,annotationCanvasMap:V=null,pageColors:H=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&U===_util.AnnotationMode.ENABLE&&(U=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&U===_util.AnnotationMode.ENABLE&&(U=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const z=this._transport.getRenderingIntent(e,U);this.pendingCleanup=!1,v||(v=this._transport.getOptionalContentConfig());let B=this._intentStates.get(z.cacheKey);B||(B=Object.create(null),this._intentStates.set(z.cacheKey,B)),B.streamReaderCancelTimeout&&(clearTimeout(B.streamReaderCancelTimeout),B.streamReaderCancelTimeout=null);const W=D||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),g=!!(z.renderingIntent&_util.RenderingIntentFlag.PRINT);B.displayReadyCapability||(B.displayReadyCapability=(0,_util.createPromiseCapability)(),B.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(z));const L=F=>{B.renderTasks.delete(_),(this.cleanupAfterRender||g)&&(this.pendingCleanup=!0),this._tryCleanup(),F?(_.capability.reject(F),this._abortOperatorList({intentState:B,reason:F instanceof Error?F:new Error(F)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},_=new InternalRenderTask({callback:L,params:{canvasContext:l,viewport:x,transform:O,imageLayer:$,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:V,operatorList:B.operatorList,pageIndex:this._pageIndex,canvasFactory:W,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:H});(B.renderTasks||=new Set).add(_);const A=_.task;return Promise.all([B.displayReadyCapability.promise,v]).then(([F,y])=>{this.pendingCleanup?L():(this._stats&&this._stats.time("Rendering"),_.initializeGraphics({transparency:F,optionalContentConfig:y}),_.operatorListChanged())}).catch(L),A}getOperatorList({intent:l="display",annotationMode:x=_util.AnnotationMode.ENABLE}={}){const U=this._transport.getRenderingIntent(l,x,!0);let $,O=this._intentStates.get(U.cacheKey);return O||(O=Object.create(null),this._intentStates.set(U.cacheKey,O)),O.opListReadCapability||($=Object.create(null),$.operatorListChanged=function e(){O.operatorList.lastChunk&&(O.opListReadCapability.resolve(O.operatorList),O.renderTasks.delete($))},O.opListReadCapability=(0,_util.createPromiseCapability)(),(O.renderTasks||=new Set).add($),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(U)),O.opListReadCapability.promise}streamTextContent({disableCombineTextItems:l=!1,includeMarkedContent:x=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==l,includeMarkedContent:!0===x},{highWaterMark:100,size:U=>U.items.length})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>_xfa_text.XfaText.textContent(e));const x=this.streamTextContent(l);return new Promise(function(e,U){const $=x.getReader(),D={items:[],styles:Object.create(null)};!function O(){$.read().then(function({value:c,done:v}){v?e(D):(Object.assign(D.styles,c.styles),D.items.push(...c.items),O())},U)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const x of this._intentStates.values())if(this._abortOperatorList({intentState:x,reason:new Error("Page was destroyed."),force:!0}),!x.opListReadCapability)for(const e of x.renderTasks)l.push(e.completed),e.cancel();this.objs.clear();for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(l)}cleanup(l=!1){return this.pendingCleanup=!0,this._tryCleanup(l)}_tryCleanup(l=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:x,operatorList:e}of this._intentStates.values())if(x.size>0||!e.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,l&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(l,x){const e=this._intentStates.get(x);e&&(this._stats&&this._stats.timeEnd("Page Request"),e.displayReadyCapability&&e.displayReadyCapability.resolve(l))}_renderPageChunk(l,x){for(let e=0,U=l.length;e<U;e++)x.operatorList.fnArray.push(l.fnArray[e]),x.operatorList.argsArray.push(l.argsArray[e]);x.operatorList.lastChunk=l.lastChunk;for(const e of x.renderTasks)e.operatorListChanged();l.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:l,cacheKey:x}){const U=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:x,annotationStorage:l&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),O=this._intentStates.get(x);O.streamReader=U;const $=()=>{U.read().then(({value:D,done:c})=>{c?O.streamReader=null:this._transport.destroyed||(this._renderPageChunk(D,O),$())},D=>{if(O.streamReader=null,!this._transport.destroyed){if(O.operatorList){O.operatorList.lastChunk=!0;for(const c of O.renderTasks)c.operatorListChanged();this._tryCleanup()}if(O.displayReadyCapability)O.displayReadyCapability.reject(D);else{if(!O.opListReadCapability)throw D;O.opListReadCapability.reject(D)}}})};$()}_abortOperatorList({intentState:l,reason:x,force:e=!1}){if(l.streamReader){if(!e){if(l.renderTasks.size>0)return;if(x instanceof _display_utils.RenderingCancelledException)return void(l.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:l,reason:x,force:!0}),l.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(l.streamReader.cancel(new _util.AbortException(x.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[U,O]of this._intentStates)if(O===l){this._intentStates.delete(U);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(l,x){const e={data:structuredClone(l,x)};this._deferred.then(()=>{for(const U of this._listeners)U.call(this,e)})}addEventListener(l,x){this._listeners.push(x)}removeEventListener(l,x){const e=this._listeners.indexOf(x);this._listeners.splice(e,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const ie=document?.currentScript?.src;ie&&(PDFWorkerUtil.fallbackWorkerSrc=ie.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(ie,l){let x;try{if(x=new URL(ie),!x.origin||"null"===x.origin)return!1}catch{return!1}const e=new URL(l,x);return x.origin===e.origin},PDFWorkerUtil.createCDNWrapper=function(ie){return URL.createObjectURL(new Blob([`importScripts("${ie}");`]))};class PDFWorker{constructor({name:ie=null,port:l=null,verbosity:x=(0,_util.getVerbosityLevel)()}={}){if(l&&_workerPorts._.has(l))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=ie,this.destroyed=!1,this.verbosity=x,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l)return _workerPorts._.set(l,this),void this._initializeFromPort(l);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(ie){this._port=ie,this._messageHandler=new _message_handler.MessageHandler("main","worker",ie),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let ie=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,ie)||(ie=PDFWorkerUtil.createCDNWrapper(new URL(ie,window.location).href));const l=new Worker(ie),x=new _message_handler.MessageHandler("main","worker",l),e=()=>{l.removeEventListener("error",U),x.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},U=()=>{this._webWorker||e()};l.addEventListener("error",U),x.on("test",$=>{l.removeEventListener("error",U),this.destroyed?e():$?(this._messageHandler=x,this._port=l,this._webWorker=l,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),x.destroy(),l.terminate())}),x.on("ready",$=>{if(l.removeEventListener("error",U),this.destroyed)e();else try{O()}catch{this._setupFakeWorker()}});const O=()=>{const $=new Uint8Array;x.send("test",$,[$.buffer])};return void O()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(ie=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const l=new LoopbackPort;this._port=l;const x="fake"+PDFWorkerUtil.fakeWorkerId++,e=new _message_handler.MessageHandler(x+"_worker",x,l);ie.setup(e,l);const U=new _message_handler.MessageHandler(x,x+"_worker",l);this._messageHandler=U,this._readyCapability.resolve(),U.send("configure",{verbosity:this.verbosity})}).catch(ie=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${ie.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_workerPorts._.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(ie){if(!ie?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _assertClassBrand(PDFWorker,this,_workerPorts)._.has(ie.port)?_assertClassBrand(PDFWorker,this,_workerPorts)._.get(ie.port):new PDFWorker(ie)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function ie(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={_:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(l,x,e,U){_classPrivateFieldInitSpec(this,_docStats,null),_classPrivateFieldInitSpec(this,_pageCache,new Map),_classPrivateFieldInitSpec(this,_pagePromises,new Map),_classPrivateFieldInitSpec(this,_metadataPromise,null),this.messageHandler=l,this.loadingTask=x,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:x.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:U.ownerDocument,styleElement:U.styleElement}),this._params=U,U.useWorkerFetch||(this.CMapReaderFactory=new U.CMapReaderFactory({baseUrl:U.cMapUrl,isCompressed:U.cMapPacked}),this.StandardFontDataFactory=new U.StandardFontDataFactory({baseUrl:U.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=e,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(_docStats,this)}getRenderingIntent(l,x=_util.AnnotationMode.ENABLE,e=!1){let U=_util.RenderingIntentFlag.DISPLAY,O="";switch(l){case"any":U=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":U=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(x){case _util.AnnotationMode.DISABLE:U+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:U+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:U+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,O=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${x}`)}return e&&(U+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:U,cacheKey:`${U}_${O}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const e of _classPrivateFieldGet(_pageCache,this).values())l.push(e._destroy());_classPrivateFieldGet(_pageCache,this).clear(),_classPrivateFieldGet(_pagePromises,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const x=this.messageHandler.sendWithPromise("Terminate",null);return l.push(x),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,this,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:x}=this;l.on("GetReader",(e,U)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},U.onPull=()=>{this._fullReader.read().then(function({value:O,done:$}){$?U.close():((0,_util.assert)((0,_util.isArrayBuffer)(O),"GetReader - expected an ArrayBuffer."),U.enqueue(new Uint8Array(O),1,[O]))}).catch(O=>{U.error(O)})},U.onCancel=O=>{this._fullReader.cancel(O),U.ready.catch($=>{if(!this.destroyed)throw $})}}),l.on("ReaderHeadersReady",e=>{const U=(0,_util.createPromiseCapability)(),O=this._fullReader;return O.headersReady.then(()=>{(!O.isStreamingSupported||!O.isRangeSupported)&&(this._lastProgress&&x.onProgress?.(this._lastProgress),O.onProgress=$=>{x.onProgress?.({loaded:$.loaded,total:$.total})}),U.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},U.reject),U.promise}),l.on("GetRangeReader",(e,U)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const O=this._networkStream.getRangeReader(e.begin,e.end);O?(U.onPull=()=>{O.read().then(function({value:$,done:D}){D?U.close():((0,_util.assert)((0,_util.isArrayBuffer)($),"GetRangeReader - expected an ArrayBuffer."),U.enqueue(new Uint8Array($),1,[$]))}).catch($=>{U.error($)})},U.onCancel=$=>{O.cancel($),U.ready.catch(D=>{if(!this.destroyed)throw D})}):U.close()}),l.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,x._capability.resolve(new PDFDocumentProxy(e,this))}),l.on("DocException",function(e){let U;switch(e.name){case"PasswordException":U=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":U=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":U=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":U=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":U=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}x._capability.reject(U)}),l.on("PasswordRequest",e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),x.onPassword){const U=O=>{O instanceof Error?this._passwordCapability.reject(O):this._passwordCapability.resolve({password:O})};try{x.onPassword(U,e.code)}catch(O){this._passwordCapability.reject(O)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}),l.on("DataLoaded",e=>{x.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),l.on("StartRenderPage",e=>{this.destroyed||_classPrivateFieldGet(_pageCache,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),l.on("commonobj",([e,U,O])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(U){case"Font":const $=this._params;if("error"in O){const v=O.error;(0,_util.warn)(`Error during font loading: ${v}`),this.commonObjs.resolve(e,v);break}let D=null;$.pdfBug&&globalThis.FontInspector?.enabled&&(D={registerFont(v,V){globalThis.FontInspector.fontAdded(v,V)}});const c=new _font_loader.FontFaceObject(O,{isEvalSupported:$.isEvalSupported,disableFontFace:$.disableFontFace,ignoreErrors:$.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:D});this.fontLoader.bind(c).catch(v=>l.sendWithPromise("FontFallback",{id:e})).finally(()=>{!$.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(e,c)});break;case"FontPath":case"Image":this.commonObjs.resolve(e,O);break;default:throw new Error(`Got unknown common object type ${U}`)}}),l.on("obj",([e,U,O,$])=>{if(this.destroyed)return;const D=_classPrivateFieldGet(_pageCache,this).get(U);if(!D.objs.has(e))switch(O){case"Image":D.objs.resolve(e,$);const c=8e6;if($){let v;if($.bitmap){const{bitmap:V,width:H,height:z}=$;v=H*z*4,D._bitmaps.add(V)}else v=$.data?.length||0;v>c&&(D.cleanupAfterRender=!0)}break;case"Pattern":D.objs.resolve(e,$);break;default:throw new Error(`Got unknown object type ${O}`)}}),l.on("DocProgress",e=>{this.destroyed||x.onProgress?.({loaded:e.loaded,total:e.total})}),l.on("DocStats",e=>{this.destroyed||_classPrivateFieldSet(_docStats,this,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))}),l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),l.on("FetchBuiltInCMap",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:l}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(l)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const x=l-1,e=_classPrivateFieldGet(_pagePromises,this).get(x);if(e)return e;const U=this.messageHandler.sendWithPromise("GetPage",{pageIndex:x}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");const $=new PDFPageProxy(x,O,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(_pageCache,this).set(x,$),$});return _classPrivateFieldGet(_pagePromises,this).set(x,U),U}getPageIndex(l){return"object"!=typeof l||null===l||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,x){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:x})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return"string"!=typeof l?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(_metadataPromise,this)||_classPrivateFieldSet(_metadataPromise,this,this.messageHandler.sendWithPromise("GetMetadata",null).then(l=>({info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(l=!1){var x=this;return _asyncToGenerator(function*(){if(yield x.messageHandler.sendWithPromise("Cleanup",null),!x.destroyed){for(const e of _classPrivateFieldGet(_pageCache,x).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);x.commonObjs.clear(),l||x.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,x,null),x._getFieldObjectsPromise=null,x._hasJSActionsPromise=null}})()}get loadingParams(){const l=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l.disableAutoFetch,enableXfa:l.enableXfa})}}var _objs=new WeakMap,_PDFObjects_brand=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand),_classPrivateFieldInitSpec(this,_objs,Object.create(null))}get(l,x=null){if(x){const U=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,l);return U.capability.promise.then(()=>x(U.data)),null}const e=_classPrivateFieldGet(_objs,this)[l];if(!e?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${l}.`);return e.data}has(l){return _classPrivateFieldGet(_objs,this)[l]?.capability.settled||!1}resolve(l,x=null){const e=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,l);e.data=x,e.capability.resolve()}clear(){_classPrivateFieldSet(_objs,this,Object.create(null))}}function _ensureObj(ie){return _classPrivateFieldGet(_objs,this)[ie]||(_classPrivateFieldGet(_objs,this)[ie]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(l){this._internalRenderTask=l,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:l,params:x,objs:e,commonObjs:U,annotationCanvasMap:O,operatorList:$,pageIndex:D,canvasFactory:c,useRequestAnimationFrame:v=!1,pdfBug:V=!1,pageColors:H=null}){this.callback=l,this.params=x,this.objs=e,this.commonObjs=U,this.annotationCanvasMap=O,this.operatorListIdx=null,this.operatorList=$,this._pageIndex=D,this.canvasFactory=c,this._pdfBug=V,this.pageColors=H,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===v&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=x.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:x}){if(this.cancelled)return;if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:e,viewport:U,transform:O,imageLayer:$,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(e,this.commonObjs,this.objs,this.canvasFactory,$,x,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:O,viewport:U,transparency:l,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(l=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var l=this;return _asyncToGenerator(function*(){l.cancelled||(l.operatorListIdx=l.gfx.executeOperatorList(l.operatorList,l.operatorListIdx,l._continueBound,l.stepper),l.operatorListIdx===l.operatorList.argsArray.length&&(l.running=!1,l.operatorList.lastChunk&&(l.gfx.endDrawing(),l._canvas&&_canvasInUse._.delete(l._canvas),l.callback())))})()}}var _canvasInUse={_:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(ie,l,x)=>{var e;Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=void 0,l.deprecated=function d(b){console.log("Deprecated API usage: "+b)},l.getFilenameFromUrl=function A(b){const h=b.indexOf("#"),E=b.indexOf("?"),I=Math.min(h>0?h:b.length,E>0?E:b.length);return b.substring(b.lastIndexOf("/",I)+1,I)},l.getPdfFilenameFromUrl=function F(b,h="document.pdf"){if("string"!=typeof b)return h;if(L(b))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),h;const I=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,j=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(b);let q=I.exec(j[1])||I.exec(j[2])||I.exec(j[3]);if(q&&(q=q[0],q.includes("%")))try{q=I.exec(decodeURIComponent(q))[0]}catch{}return q||h},l.getXfaPageViewport=function w(b,{scale:h=1,rotation:E=0}){const{width:I,height:j}=b.attributes.style,q=[0,0,parseInt(I),parseInt(j)];return new W({viewBox:q,scale:h,rotation:E})},l.isDataScheme=L,l.isPdfFile=function _(b){return"string"==typeof b&&/\.pdf$/i.test(b)},l.isValidFetchUrl=n,l.loadScript=function i(b,h=!1){return new Promise((E,I)=>{const j=document.createElement("script");j.src=b,j.onload=function(q){h&&j.remove(),E(q)},j.onerror=function(){I(new Error(`Cannot load script at: ${j.src}`))},(document.head||document.documentElement).appendChild(j)})};var U=x(6),O=x(1);class D{}function v(b){return V.apply(this,arguments)}function V(){return(V=_asyncToGenerator(function*(b,h=!1){if(n(b,document.baseURI)){const E=yield fetch(b);if(!E.ok)throw new Error(E.statusText);return h?new Uint8Array(yield E.arrayBuffer()):(0,O.stringToBytes)(yield E.text())}return new Promise((E,I)=>{const j=new XMLHttpRequest;j.open("GET",b,!0),h&&(j.responseType="arraybuffer"),j.onreadystatechange=()=>{if(j.readyState===XMLHttpRequest.DONE){if(200===j.status||0===j.status){let q;if(h&&j.response?q=new Uint8Array(j.response):!h&&j.responseText&&(q=(0,O.stringToBytes)(j.responseText)),q)return void E(q)}I(new Error(j.statusText))}},j.send(null)})})).apply(this,arguments)}e=D,_defineProperty(D,"CSS",96),_defineProperty(D,"PDF",72),_defineProperty(D,"PDF_TO_CSS_UNITS",e.CSS/e.PDF),l.PixelsPerInch=D,l.DOMCanvasFactory=class c extends U.BaseCanvasFactory{constructor({ownerDocument:h=globalThis.document}={}){super(),this._document=h}_createCanvas(h,E){const I=this._document.createElement("canvas");return I.width=h,I.height=E,I}},l.DOMCMapReaderFactory=class H extends U.BaseCMapReaderFactory{_fetchData(h,E){return v(h,this.isCompressed).then(I=>({cMapData:I,compressionType:E}))}},l.DOMStandardFontDataFactory=class z extends U.BaseStandardFontDataFactory{_fetchData(h){return v(h,!0)}},l.DOMSVGFactory=class B extends U.BaseSVGFactory{_createSVG(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}};class W{constructor({viewBox:h,scale:E,rotation:I,offsetX:j=0,offsetY:q=0,dontFlip:ee=!1}){this.viewBox=h,this.scale=E,this.rotation=I,this.offsetX=j,this.offsetY=q;const Q=(h[2]+h[0])/2,he=(h[3]+h[1])/2;let fe,ue,N,a,t,r,o,u;switch((I%=360)<0&&(I+=360),I){case 180:fe=-1,ue=0,N=0,a=1;break;case 90:fe=0,ue=1,N=1,a=0;break;case 270:fe=0,ue=-1,N=-1,a=0;break;case 0:fe=1,ue=0,N=0,a=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ee&&(N=-N,a=-a),0===fe?(t=Math.abs(he-h[1])*E+j,r=Math.abs(Q-h[0])*E+q,o=Math.abs(h[3]-h[1])*E,u=Math.abs(h[2]-h[0])*E):(t=Math.abs(Q-h[0])*E+j,r=Math.abs(he-h[1])*E+q,o=Math.abs(h[2]-h[0])*E,u=Math.abs(h[3]-h[1])*E),this.transform=[fe*E,ue*E,N*E,a*E,t-fe*E*Q-N*E*he,r-ue*E*Q-a*E*he],this.width=o,this.height=u}clone({scale:h=this.scale,rotation:E=this.rotation,offsetX:I=this.offsetX,offsetY:j=this.offsetY,dontFlip:q=!1}={}){return new W({viewBox:this.viewBox.slice(),scale:h,rotation:E,offsetX:I,offsetY:j,dontFlip:q})}convertToViewportPoint(h,E){return O.Util.applyTransform([h,E],this.transform)}convertToViewportRectangle(h){const E=O.Util.applyTransform([h[0],h[1]],this.transform),I=O.Util.applyTransform([h[2],h[3]],this.transform);return[E[0],E[1],I[0],I[1]]}convertToPdfPoint(h,E){return O.Util.applyInverseTransform([h,E],this.transform)}}function L(b){const h=b.length;let E=0;for(;E<h&&""===b[E].trim();)E++;return"data:"===b.substring(E,E+5).toLowerCase()}function n(b,h){try{const{protocol:E}=h?new URL(b,h):new URL(b);return"http:"===E||"https:"===E}catch{return!1}}let P;l.PageViewport=W,l.RenderingCancelledException=class g extends O.BaseException{constructor(h,E){super(h,"RenderingCancelledException"),this.type=E}},l.StatTimer=class y{constructor(){this.started=Object.create(null),this.times=[]}time(h){h in this.started&&(0,O.warn)(`Timer is already running for ${h}`),this.started[h]=Date.now()}timeEnd(h){h in this.started||(0,O.warn)(`Timer has not been started for ${h}`),this.times.push({name:h,start:this.started[h],end:Date.now()}),delete this.started[h]}toString(){const h=[];let E=0;for(const I of this.times){const j=I.name;j.length>E&&(E=j.length)}for(const I of this.times){const j=I.end-I.start;h.push(`${I.name.padEnd(E)} ${j}ms\n`)}return h.join("")}},l.PDFDateString=class f{static toDateObject(h){if(!h||"string"!=typeof h)return null;P||(P=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const E=P.exec(h);if(!E)return null;const I=parseInt(E[1],10);let j=parseInt(E[2],10);j=j>=1&&j<=12?j-1:0;let q=parseInt(E[3],10);q=q>=1&&q<=31?q:1;let ee=parseInt(E[4],10);ee=ee>=0&&ee<=23?ee:0;let Q=parseInt(E[5],10);Q=Q>=0&&Q<=59?Q:0;let he=parseInt(E[6],10);he=he>=0&&he<=59?he:0;const fe=E[7]||"Z";let ue=parseInt(E[8],10);ue=ue>=0&&ue<=23?ue:0;let N=parseInt(E[9],10)||0;return N=N>=0&&N<=59?N:0,"-"===fe?(ee+=ue,Q+=N):"+"===fe&&(ee-=ue,Q-=N),new Date(Date.UTC(I,j,q,ee,Q,he))}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0;var e=x(1);class U{constructor(){this.constructor===U&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,V){if(v<=0||V<=0)throw new Error("Invalid canvas size");const H=this._createCanvas(v,V);return{canvas:H,context:H.getContext("2d")}}reset(v,V,H){if(!v.canvas)throw new Error("Canvas is not specified");if(V<=0||H<=0)throw new Error("Invalid canvas size");v.canvas.width=V,v.canvas.height=H}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,V){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=U;class O{constructor({baseUrl:v=null,isCompressed:V=!1}){this.constructor===O&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=V}fetch({name:v}){var V=this;return _asyncToGenerator(function*(){if(!V.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const H=V.baseUrl+v+(V.isCompressed?".bcmap":"");return V._fetchData(H,V.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE).catch(B=>{throw new Error(`Unable to load ${V.isCompressed?"binary ":""}CMap at: ${H}`)})})()}_fetchData(v,V){(0,e.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=O;class ${constructor({baseUrl:v=null}){this.constructor===$&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}fetch({filename:v}){var V=this;return _asyncToGenerator(function*(){if(!V.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const H=`${V.baseUrl}${v}`;return V._fetchData(H).catch(z=>{throw new Error(`Unable to load font data at: ${H}`)})})()}_fetchData(v){(0,e.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=$;class D{constructor(){this.constructor===D&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,V){if(v<=0||V<=0)throw new Error("Invalid SVG dimensions");const H=this._createSVG("svg:svg");return H.setAttribute("version","1.1"),H.setAttribute("width",`${v}px`),H.setAttribute("height",`${V}px`),H.setAttribute("preserveAspectRatio","none"),H.setAttribute("viewBox",`0 0 ${v} ${V}`),H}createElement(v){if("string"!=typeof v)throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,e.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=D},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0;var e=x(1);class U{constructor({docId:c,onUnsupportedFeature:v,ownerDocument:V=globalThis.document,styleElement:H=null}){this.constructor===U&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=c,this._onUnsupportedFeature=v,this._document=V,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(c){this.nativeFontFaces.push(c),this._document.fonts.add(c)}insertRule(c){let v=this.styleElement;v||(v=this.styleElement=this._document.createElement("style"),v.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(v));const V=v.sheet;V.insertRule(c,V.cssRules.length)}clear(){for(const c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(c){var v=this;return _asyncToGenerator(function*(){if(c.attached||c.missingFile)return;if(c.attached=!0,v.isFontLoadingAPISupported){const H=c.createNativeFontFace();if(H){v.addNativeFontFace(H);try{yield H.loaded}catch(z){throw v._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${H.family}': '${z}'.`),c.disableFontFace=!0,z}}return}const V=c.createFontFaceRule();if(V){if(v.insertRule(V),v.isSyncFontLoadingSupported)return;yield new Promise(H=>{const z=v._queueLoadingCallback(H);v._prepareFontLoadEvent([V],[c],z)})}})()}_queueLoadingCallback(c){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,e.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(c,v,V){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let O;l.FontLoader=O,l.FontLoader=O=class extends U{constructor(c){super(c),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let c=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(c=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){const V=this.loadingContext,H={id:"pdfjs-font-loading-"+V.nextRequestId++,done:!1,complete:function v(){for((0,e.assert)(!H.done,"completeRequest() cannot be called twice."),H.done=!0;V.requests.length>0&&V.requests[0].done;){const z=V.requests.shift();setTimeout(z.callback,0)}},callback:c};return V.requests.push(H),H}get _loadTestFont(){return(0,e.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(c,v,V){function H(E,I){return E.charCodeAt(I)<<24|E.charCodeAt(I+1)<<16|E.charCodeAt(I+2)<<8|255&E.charCodeAt(I+3)}function z(E,I,j,q){return E.substring(0,I)+q+E.substring(I+j)}let B,W;const g=this._document.createElement("canvas");g.width=1,g.height=1;const L=g.getContext("2d");let _=0;const F=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=z(y,976,F.length,F);const d=1482184792;let P=H(y,16);for(B=0,W=F.length-3;B<W;B+=4)P=P-d+H(F,B)|0;B<F.length&&(P=P-d+H(F+"XXX",B)|0),y=z(y,16,4,(0,e.string32)(P));const f=`url(data:font/opentype;base64,${btoa(y)});`;this.insertRule(`@font-face {font-family:"${F}";src:${f}}`);const b=[];for(const E of v)b.push(E.loadedName);b.push(F);const h=this._document.createElement("div");h.style.visibility="hidden",h.style.width=h.style.height="10px",h.style.position="absolute",h.style.top=h.style.left="0px";for(const E of b){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=E,h.appendChild(I)}this._document.body.appendChild(h),function A(E,I){if(_++,_>30)return(0,e.warn)("Load test font never loaded."),void I();L.font="30px "+E,L.fillText(".",0,20),L.getImageData(0,0,1,1).data[3]>0?I():setTimeout(A.bind(null,E,I))}(F,()=>{h.remove(),V.complete()})}},l.FontFaceObject=class ${constructor(c,{isEvalSupported:v=!0,disableFontFace:V=!1,ignoreErrors:H=!1,onUnsupportedFeature:z,fontRegistry:B=null}){this.compiledGlyphs=Object.create(null);for(const W in c)this[W]=c[W];this.isEvalSupported=!1!==v,this.disableFontFace=!0===V,this.ignoreErrors=!0===H,this._onUnsupportedFeature=z,this.fontRegistry=B}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let c;if(this.cssFontInfo){const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}else c=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),c}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const c=(0,e.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(c)});`;let V;if(this.cssFontInfo){let H=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(H+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),V=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${H}src:${v}}`}else V=`@font-face {font-family:"${this.loadedName}";src:${v}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,v),V}getPathGenerator(c,v){if(void 0!==this.compiledGlyphs[v])return this.compiledGlyphs[v];let V;try{V=c.get(this.loadedName+"_path_"+v)}catch(H){if(!this.ignoreErrors)throw H;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${H}".`),this.compiledGlyphs[v]=function(z,B){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const H=[];for(const z of V){const B=void 0!==z.args?z.args.join(","):"";H.push("c.",z.cmd,"(",B,");\n")}return this.compiledGlyphs[v]=new Function("c","size",H.join(""))}return this.compiledGlyphs[v]=function(H,z){for(const B of V)"scale"===B.cmd&&(B.args=[z,-z]),H[B.cmd].apply(H,B.args)}}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationStorage=void 0;var e=x(9),U=x(1);l.AnnotationStorage=class O{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(D,c){const v=this._storage.get(D);return void 0===v?c:Object.assign(c,v)}getRawValue(D){return this._storage.get(D)}setValue(D,c){const v=this._storage.get(D);let V=!1;if(void 0!==v)for(const[H,z]of Object.entries(c))v[H]!==z&&(V=!0,v[H]=z);else V=!0,this._storage.set(D,c);V&&this._setModified()}getAll(){return this._storage.size>0?(0,U.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const D=new e.MurmurHash3_64;for(const[c,v]of this._storage)D.update(`${c}:${JSON.stringify(v)}`);return D.hexdigest()}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0;var e=x(1);const U=3285377520,O=4294901760,$=65535;l.MurmurHash3_64=class D{constructor(v){this.h1=v?4294967295&v:U,this.h2=v?4294967295&v:U}update(v){let V,H;if("string"==typeof v){V=new Uint8Array(2*v.length),H=0;for(let d=0,P=v.length;d<P;d++){const f=v.charCodeAt(d);f<=255?V[H++]=f:(V[H++]=f>>>8,V[H++]=255&f)}}else{if(!(0,e.isArrayBuffer)(v))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");V=v.slice(),H=V.byteLength}const z=H>>2,B=H-4*z,W=new Uint32Array(V.buffer,0,z);let g=0,L=0,_=this.h1,A=this.h2;const F=3432918353,y=461845907,n=F&$,i=y&$;for(let d=0;d<z;d++)1&d?(g=W[d],g=g*F&O|g*n&$,g=g<<15|g>>>17,g=g*y&O|g*i&$,_^=g,_=_<<13|_>>>19,_=5*_+3864292196):(L=W[d],L=L*F&O|L*n&$,L=L<<15|L>>>17,L=L*y&O|L*i&$,A^=L,A=A<<13|A>>>19,A=5*A+3864292196);switch(g=0,B){case 3:g^=V[4*z+2]<<16;case 2:g^=V[4*z+1]<<8;case 1:g^=V[4*z],g=g*F&O|g*n&$,g=g<<15|g>>>17,g=g*y&O|g*i&$,1&z?_^=g:A^=g}this.h1=_,this.h2=A}hexdigest(){let v=this.h1,V=this.h2;v^=V>>>1,v=3981806797*v&O|36045*v&$,V=4283543511*V&O|(2950163797*(V<<16|v>>>16)&O)>>>16,v^=V>>>1,v=444984403*v&O|60499*v&$,V=3301882366*V&O|(3120437893*(V<<16|v>>>16)&O)>>>16,v^=V>>>1;const H=(v>>>0).toString(16),z=(V>>>0).toString(16);return H.padStart(8,"0")+z.padStart(8,"0")}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0;var e=x(1),U=x(11),O=x(12),$=x(3),D=x(5);const V=4096,g=16;function A(N){if(N._transformStack&&(N._transformStack=[]),!N.mozCurrentTransform){N._originalSave=N.save,N._originalRestore=N.restore,N._originalRotate=N.rotate,N._originalScale=N.scale,N._originalTranslate=N.translate,N._originalTransform=N.transform,N._originalSetTransform=N.setTransform,N._originalResetTransform=N.resetTransform,N._transformMatrix=N._transformMatrix||[1,0,0,1,0,0],N._transformStack=[];try{const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(N),"lineWidth");N._setLineWidth=a.set,N._getLineWidth=a.get,Object.defineProperty(N,"lineWidth",{set:function(r){this._setLineWidth(1.000001*r)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(N,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(N,"mozCurrentTransformInverse",{get:function(){const[t,r,o,u,p,s]=this._transformMatrix,T=t*u-r*o,C=r*o-t*u;return[u/T,r/C,o/C,t/T,(u*p-o*s)/C,(r*p-t*s)/T]}}),N.save=function(){const t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},N.restore=function(){0===this._transformStack.length&&(0,e.warn)("Tried to restore a ctx when the stack was already empty.");const t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},N.translate=function(t,r){const o=this._transformMatrix;o[4]=o[0]*t+o[2]*r+o[4],o[5]=o[1]*t+o[3]*r+o[5],this._originalTranslate(t,r)},N.scale=function(t,r){const o=this._transformMatrix;o[0]*=t,o[1]*=t,o[2]*=r,o[3]*=r,this._originalScale(t,r)},N.transform=function(t,r,o,u,p,s){const T=this._transformMatrix;this._transformMatrix=[T[0]*t+T[2]*r,T[1]*t+T[3]*r,T[0]*o+T[2]*u,T[1]*o+T[3]*u,T[0]*p+T[2]*s+T[4],T[1]*p+T[3]*s+T[5]],N._originalTransform(t,r,o,u,p,s)},N.setTransform=function(t,r,o,u,p,s){this._transformMatrix=[t,r,o,u,p,s],N._originalSetTransform(t,r,o,u,p,s)},N.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],N._originalResetTransform()},N.rotate=function(t){const r=Math.cos(t),o=Math.sin(t),u=this._transformMatrix;this._transformMatrix=[u[0]*r+u[2]*o,u[1]*r+u[3]*o,u[0]*-o+u[2]*r,u[1]*-o+u[3]*r,u[4],u[5]],this._originalRotate(t)}}}class F{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,t,r,o){let u;return void 0!==this.cache[a]?(u=this.cache[a],this.canvasFactory.reset(u,t,r),u.context.setTransform(1,0,0,1,0,0)):(u=this.canvasFactory.create(t,r),this.cache[a]=u),o&&A(u.context),u}delete(a){delete this.cache[a]}clear(){for(const a in this.cache)this.canvasFactory.destroy(this.cache[a]),delete this.cache[a]}}function y(N,a,t,r,o,u,p,s,T,C){const[k,G,X,le,ce,ge]=N.mozCurrentTransform;if(0===G&&0===X){const S=Math.round(p*k+ce),ae=Math.round(s*le+ge),J=Math.abs(Math.round((p+T)*k+ce)-S)||1,Z=Math.abs(Math.round((s+C)*le+ge)-ae)||1;return N.setTransform(Math.sign(k),0,0,Math.sign(le),S,ae),N.drawImage(a,t,r,o,u,0,0,J,Z),N.setTransform(k,G,X,le,ce,ge),[J,Z]}if(0===k&&0===le){const S=Math.round(s*X+ce),ae=Math.round(p*G+ge),J=Math.abs(Math.round((s+C)*X+ce)-S)||1,Z=Math.abs(Math.round((p+T)*G+ge)-ae)||1;return N.setTransform(0,Math.sign(G),Math.sign(X),0,S,ae),N.drawImage(a,t,r,o,u,0,0,Z,J),N.setTransform(k,G,X,le,ce,ge),[Z,J]}return N.drawImage(a,t,r,o,u,p,s,T,C),[Math.hypot(k,G)*T,Math.hypot(X,le)*C]}class i{constructor(a,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,a,t])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,t){this.x=a,this.y=t}updatePathMinMax(a,t,r){[t,r]=e.Util.applyTransform([t,r],a),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(a,t){const r=e.Util.applyTransform(t,a),o=e.Util.applyTransform(t.slice(2),a);this.minX=Math.min(this.minX,r[0],o[0]),this.minY=Math.min(this.minY,r[1],o[1]),this.maxX=Math.max(this.maxX,r[0],o[0]),this.maxY=Math.max(this.maxY,r[1],o[1])}updateScalingPathMinMax(a,t){e.Util.scaleMinMax(a,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(a,t,r,o,u,p,s,T,C,k){const G=e.Util.bezierBoundingBox(t,r,o,u,p,s,T,C);if(k)return k[0]=Math.min(k[0],G[0],G[2]),k[1]=Math.max(k[1],G[0],G[2]),k[2]=Math.min(k[2],G[1],G[3]),void(k[3]=Math.max(k[3],G[1],G[3]));this.updateRectMinMax(a,G)}getPathBoundingBox(a=U.PathType.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(a===U.PathType.STROKE){t||(0,e.unreachable)("Stroke bounding box must include transform.");const o=e.Util.singularValueDecompose2dScale(t),u=o[0]*this.lineWidth/2,p=o[1]*this.lineWidth/2;r[0]-=u,r[1]-=p,r[2]+=u,r[3]+=p}return r}updateClipFromPath(){const a=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=U.PathType.FILL,t=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(a,t))}}function d(N,a,t=null){if(typeof ImageData<"u"&&a instanceof ImageData)return void N.putImageData(a,0,0);const r=a.height,o=a.width,u=r%g,p=(r-u)/g,s=0===u?p:p+1,T=N.createImageData(o,g);let k,C=0;const G=a.data,X=T.data;let le,ce,ge,_e,de,m,S,re;if(t)switch(t.length){case 1:de=t[0],m=t[0],S=t[0],re=t[0];break;case 4:de=t[0],m=t[1],S=t[2],re=t[3]}if(a.kind===e.ImageKind.GRAYSCALE_1BPP){const ae=G.byteLength,te=new Uint32Array(X.buffer,0,X.byteLength>>2),J=te.length,M=o+7>>3;let Z=4294967295,R=e.FeatureTest.isLittleEndian?4278190080:255;for(re&&255===re[0]&&0===re[255]&&([Z,R]=[R,Z]),le=0;le<s;le++){for(ge=le<p?g:u,k=0,ce=0;ce<ge;ce++){const ne=ae-C;let oe=0;const me=ne>M?o:8*ne-7,ve=-8&me;let se=0,Y=0;for(;oe<ve;oe+=8)Y=G[C++],te[k++]=128&Y?Z:R,te[k++]=64&Y?Z:R,te[k++]=32&Y?Z:R,te[k++]=16&Y?Z:R,te[k++]=8&Y?Z:R,te[k++]=4&Y?Z:R,te[k++]=2&Y?Z:R,te[k++]=1&Y?Z:R;for(;oe<me;oe++)0===se&&(Y=G[C++],se=128),te[k++]=Y&se?Z:R,se>>=1}for(;k<J;)te[k++]=0;N.putImageData(T,0,le*g)}}else if(a.kind===e.ImageKind.RGBA_32BPP){const ae=!!(de||m||S);for(ce=0,_e=o*g*4,le=0;le<p;le++){if(X.set(G.subarray(C,C+_e)),C+=_e,ae)for(let te=0;te<_e;te+=4)de&&(X[te+0]=de[X[te+0]]),m&&(X[te+1]=m[X[te+1]]),S&&(X[te+2]=S[X[te+2]]);N.putImageData(T,0,ce),ce+=g}if(le<s){if(_e=o*u*4,X.set(G.subarray(C,C+_e)),ae)for(let te=0;te<_e;te+=4)de&&(X[te+0]=de[X[te+0]]),m&&(X[te+1]=m[X[te+1]]),S&&(X[te+2]=S[X[te+2]]);N.putImageData(T,0,ce)}}else{if(a.kind!==e.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${a.kind}`);{const ae=!!(de||m||S);for(ge=g,_e=o*ge,le=0;le<s;le++){for(le>=p&&(ge=u,_e=o*ge),k=0,ce=_e;ce--;)X[k++]=G[C++],X[k++]=G[C++],X[k++]=G[C++],X[k++]=255;if(ae)for(let te=0;te<k;te+=4)de&&(X[te+0]=de[X[te+0]]),m&&(X[te+1]=m[X[te+1]]),S&&(X[te+2]=S[X[te+2]]);N.putImageData(T,0,le*g)}}}}function P(N,a){if(a.bitmap)return void N.drawImage(a.bitmap,0,0);const t=a.height,r=a.width,o=t%g,u=(t-o)/g,p=0===o?u:u+1,s=N.createImageData(r,g);let T=0;const C=a.data,k=s.data;for(let G=0;G<p;G++){const X=G<u?g:o;({srcPos:T}=(0,O.applyMaskImageData)({src:C,srcPos:T,dest:k,width:r,height:X})),N.putImageData(s,0,G*g)}}function f(N,a){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,o=t.length;r<o;r++){const u=t[r];void 0!==N[u]&&(a[u]=N[u])}void 0!==N.setLineDash&&(a.setLineDash(N.getLineDash()),a.lineDashOffset=N.lineDashOffset)}function w(N,a){N.strokeStyle=N.fillStyle=a||"#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",void 0!==N.setLineDash&&(N.setLineDash([]),N.lineDashOffset=0)}function b(N,a,t,r){const o=N.length;for(let u=3;u<o;u+=4){const p=N[u];if(0===p)N[u-3]=a,N[u-2]=t,N[u-1]=r;else if(p<255){const s=255-p;N[u-3]=N[u-3]*p+a*s>>8,N[u-2]=N[u-2]*p+t*s>>8,N[u-1]=N[u-1]*p+r*s>>8}}}function h(N,a,t){const r=N.length,o=1/255;for(let u=3;u<r;u+=4)a[u]=a[u]*(t?t[N[u]]:N[u])*o|0}function E(N,a,t){const r=N.length;for(let o=3;o<r;o+=4){const u=77*N[o-3]+152*N[o-2]+28*N[o-1];a[o]=t?a[o]*t[u>>8]>>8:a[o]*u>>16}}function q(N,a){const t=e.Util.singularValueDecompose2dScale(N);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*D.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==a?a:t[0]<=r||t[1]<=r}const ee=["butt","round","square"],Q=["miter","round","bevel"],he={},fe={};class ue{constructor(a,t,r,o,u,p,s,T){this.ctx=a,this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=o,this.imageLayer=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=p,this.cachedCanvases=new F(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=T?.background||null,this.foregroundColor=T?.foreground||null,a&&A(a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,t=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):t}beginDrawing({transform:a,viewport:t,transparency:r=!1,background:o=null}){const u=this.ctx.canvas.width,p=this.ctx.canvas.height,s=o||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const T=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const C=this.backgroundColor=this.ctx.fillStyle;let k=!0,G=s;if(this.ctx.fillStyle=s,G=this.ctx.fillStyle,k="string"==typeof G&&/^#[0-9A-Fa-f]{6}$/.test(G),"#000000"===T&&"#ffffff"===C||T===C||!k)this.foregroundColor=this.backgroundColor=null;else{const X=parseInt(G.slice(1),16),ce=(X&&65280)>>8,ge=X&&255,_e=m=>(m/=255)<=.03928?m/12.92:((m+.055)/1.055)**2.4,de=Math.round(.2126*_e((X&&16711680)>>16)+.7152*_e(ce)+.0722*_e(ge));this.selectColor=(m,S,re)=>{const ae=.2126*_e(m)+.7152*_e(S)+.0722*_e(re);return Math.round(ae)===de?C:T}}}if(this.ctx.fillStyle=this.backgroundColor||s,this.ctx.fillRect(0,0,u,p),this.ctx.restore(),r){const T=this.cachedCanvases.getCanvas("transparent",u,p,!0);this.compositeCtx=this.ctx,this.transparentCanvas=T.canvas,this.ctx=T.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),w(this.ctx,this.foregroundColor),a&&(this.ctx.transform.apply(this.ctx,a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform.apply(this.ctx,t.transform),this.viewportScale=t.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(a,t,r,o){const u=a.argsArray,p=a.fnArray;let s=t||0;const T=u.length;if(T===s)return s;const C=T-s>10&&"function"==typeof r,k=C?Date.now()+15:0;let G=0;const X=this.commonObjs,le=this.objs;let ce;for(;;){if(void 0!==o&&s===o.nextBreakPoint)return o.breakIt(s,r),s;if(ce=p[s],ce!==e.OPS.dependency)this[ce].apply(this,u[s]);else for(const ge of u[s]){const _e=ge.startsWith("g_")?X:le;if(!_e.has(ge))return _e.get(ge,r),s}if(s++,s===T)return s;if(C&&++G>10){if(Date.now()>k)return r(),s;G=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const t of a.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(a,t){const r=a.width,o=a.height;let k,G,u=Math.max(Math.hypot(t[0],t[1]),1),p=Math.max(Math.hypot(t[2],t[3]),1),s=r,T=o,C="prescale1";for(;u>2&&s>1||p>2&&T>1;){let X=s,le=T;u>2&&s>1&&(X=Math.ceil(s/2),u/=s/X),p>2&&T>1&&(le=Math.ceil(T/2),p/=T/le),k=this.cachedCanvases.getCanvas(C,X,le,!1),G=k.context,G.clearRect(0,0,X,le),G.drawImage(a,0,0,s,T,0,0,X,le),a=k.canvas,s=X,T=le,C="prescale1"===C?"prescale2":"prescale1"}return{img:a,paintWidth:s,paintHeight:T}}_createMaskCanvas(a){const t=this.ctx,{width:r,height:o}=a,u=this.current.fillColor,p=this.current.patternFill,s=t.mozCurrentTransform;let T,C,k,G;if((a.bitmap||a.data)&&a.count>1){const J=a.bitmap||a.data.buffer,M=s.slice(0,4);C=JSON.stringify(p?M:[M,u]),T=this._cachedBitmapsMap.get(J),T||(T=new Map,this._cachedBitmapsMap.set(J,T));const Z=T.get(C);if(Z&&!p)return{canvas:Z,offsetX:Math.round(Math.min(s[0],s[2])+s[4]),offsetY:Math.round(Math.min(s[1],s[3])+s[5])};k=Z}k||(G=this.cachedCanvases.getCanvas("maskCanvas",r,o,!1),P(G.context,a));let X=e.Util.transform(s,[1/r,0,0,-1/o,0,0]);X=e.Util.transform(X,[1,0,0,1,0,-o]);const le=e.Util.applyTransform([0,0],X),ce=e.Util.applyTransform([r,o],X),ge=e.Util.normalizeRect([le[0],le[1],ce[0],ce[1]]),_e=Math.round(ge[2]-ge[0])||1,de=Math.round(ge[3]-ge[1])||1,m=this.cachedCanvases.getCanvas("fillCanvas",_e,de,!0),S=m.context,re=Math.min(le[0],ce[0]),ae=Math.min(le[1],ce[1]);S.translate(-re,-ae),S.transform.apply(S,X),k||(k=this._scaleImage(G.canvas,S.mozCurrentTransformInverse),k=k.img,T&&p&&T.set(C,k)),S.imageSmoothingEnabled=q(S.mozCurrentTransform,a.interpolate),y(S,k,0,0,k.width,k.height,0,0,r,o),S.globalCompositeOperation="source-in";const te=e.Util.transform(S.mozCurrentTransformInverse,[1,0,0,1,-re,-ae]);return S.fillStyle=p?u.getPattern(t,this,te,U.PathType.FILL):u,S.fillRect(0,0,r,o),T&&!p&&(this.cachedCanvases.delete("fillCanvas"),T.set(C,m.canvas)),{canvas:m.canvas,offsetX:Math.round(re),offsetY:Math.round(ae)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=ee[a]}setLineJoin(a){this.ctx.lineJoin=Q[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,t){const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(a),r.lineDashOffset=t)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let t=0,r=a.length;t<r;t++){const o=a[t],p=o[1];switch(o[0]){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=o[1];break;case"ca":this.current.fillAlpha=o[1],this.ctx.globalAlpha=o[1];break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=p}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=o.context;const u=this.ctx;u.setTransform.apply(u,this.suspendedCtx.mozCurrentTransform),f(this.suspendedCtx,u),function _(N,a){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){a.save(),this.__originalSave()},N.restore=function(){a.restore(),this.__originalRestore()},N.translate=function(r,o){a.translate(r,o),this.__originalTranslate(r,o)},N.scale=function(r,o){a.scale(r,o),this.__originalScale(r,o)},N.transform=function(r,o,u,p,s,T){a.transform(r,o,u,p,s,T),this.__originalTransform(r,o,u,p,s,T)},N.setTransform=function(r,o,u,p,s,T){a.setTransform(r,o,u,p,s,T),this.__originalSetTransform(r,o,u,p,s,T)},N.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},N.rotate=function(r){a.rotate(r),this.__originalRotate(r)},N.clip=function(r){a.clip(r),this.__originalClip(r)},N.moveTo=function(t,r){a.moveTo(t,r),this.__originalMoveTo(t,r)},N.lineTo=function(t,r){a.lineTo(t,r),this.__originalLineTo(t,r)},N.bezierCurveTo=function(t,r,o,u,p,s){a.bezierCurveTo(t,r,o,u,p,s),this.__originalBezierCurveTo(t,r,o,u,p,s)},N.rect=function(t,r,o,u){a.rect(t,r,o,u),this.__originalRect(t,r,o,u)},N.closePath=function(){a.closePath(),this.__originalClosePath()},N.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){this.current.activeSMask&&(a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function j(N,a,t,r){const o=r[0],u=r[1],p=r[2]-o,s=r[3]-u;0===p||0===s||(function I(N,a,t,r,o,u,p,s,T,C,k){const G=!!u,X=G?u[0]:0,le=G?u[1]:0,ce=G?u[2]:0;let ge;ge="Luminosity"===o?E:h;const de=Math.min(r,Math.ceil(1048576/t));for(let m=0;m<r;m+=de){const S=Math.min(de,r-m),re=N.getImageData(s-C,m+(T-k),t,S),ae=a.getImageData(s,m+T,t,S);G&&b(re.data,X,le,ce),ge(re.data,ae.data,p),a.putImageData(ae,s,m+T)}}(a.context,t,p,s,a.subtype,a.backdrop,a.transferMap,o,u,a.offsetX,a.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(t.canvas,0,0),N.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,t,r,o,u,p){this.ctx.transform(a,t,r,o,u,p),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,t,r){const o=this.ctx,u=this.current;let T,C,p=u.x,s=u.y;const k=o.mozCurrentTransform,G=0===k[0]&&0===k[3]||0===k[1]&&0===k[2],X=G?r.slice(0):null;for(let le=0,ce=0,ge=a.length;le<ge;le++)switch(0|a[le]){case e.OPS.rectangle:p=t[ce++],s=t[ce++];const _e=t[ce++],de=t[ce++],m=p+_e,S=s+de;o.moveTo(p,s),0===_e||0===de?o.lineTo(m,S):(o.lineTo(m,s),o.lineTo(m,S),o.lineTo(p,S)),G||u.updateRectMinMax(k,[p,s,m,S]),o.closePath();break;case e.OPS.moveTo:p=t[ce++],s=t[ce++],o.moveTo(p,s),G||u.updatePathMinMax(k,p,s);break;case e.OPS.lineTo:p=t[ce++],s=t[ce++],o.lineTo(p,s),G||u.updatePathMinMax(k,p,s);break;case e.OPS.curveTo:T=p,C=s,p=t[ce+4],s=t[ce+5],o.bezierCurveTo(t[ce],t[ce+1],t[ce+2],t[ce+3],p,s),u.updateCurvePathMinMax(k,T,C,t[ce],t[ce+1],t[ce+2],t[ce+3],p,s,X),ce+=6;break;case e.OPS.curveTo2:T=p,C=s,o.bezierCurveTo(p,s,t[ce],t[ce+1],t[ce+2],t[ce+3]),u.updateCurvePathMinMax(k,T,C,p,s,t[ce],t[ce+1],t[ce+2],t[ce+3],X),p=t[ce+2],s=t[ce+3],ce+=4;break;case e.OPS.curveTo3:T=p,C=s,p=t[ce+2],s=t[ce+3],o.bezierCurveTo(t[ce],t[ce+1],p,s,p,s),u.updateCurvePathMinMax(k,T,C,t[ce],t[ce+1],p,s,p,s,X),ce+=4;break;case e.OPS.closePath:o.closePath()}G&&u.updateScalingPathMinMax(k,X),u.setCurrentPoint(p,s)}closePath(){this.ctx.closePath()}stroke(a){a=!(typeof a<"u")||a;const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof r&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,t.mozCurrentTransformInverse,U.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a){a=!(typeof a<"u")||a;const t=this.ctx,r=this.current.fillColor;let u=!1;this.current.patternFill&&(t.save(),t.fillStyle=r.getPattern(t,this,t.mozCurrentTransformInverse,U.PathType.FILL),u=!0);const p=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==p&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),u&&t.restore(),a&&this.consumePath(p)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=he}eoClip(){this.pendingClip=fe}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,t=this.ctx;if(void 0!==a){t.save(),t.beginPath();for(let r=0;r<a.length;r++){const o=a[r];t.setTransform.apply(t,o.transform),t.translate(o.x,o.y),o.addToPath(t,o.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,t){const r=this.commonObjs.get(a),o=this.current;if(!r)throw new Error(`Can't find font for ${a}`);if(o.fontMatrix=r.fontMatrix||e.FONT_IDENTITY_MATRIX,(0===o.fontMatrix[0]||0===o.fontMatrix[3])&&(0,e.warn)("Invalid font matrix for font "+a),t<0?(t=-t,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;let p="normal";r.black?p="900":r.bold&&(p="bold");const s=r.italic?"italic":"normal",T=`"${r.loadedName||"sans-serif"}", ${r.fallbackName}`;let C=t;t<16?C=16:t>100&&(C=100),this.current.fontSizeScale=t/C,this.ctx.font=`${s} ${p} ${C}px ${T}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,t){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=t}setLeadingMoveText(a,t){this.setLeading(-t),this.moveText(a,t)}setTextMatrix(a,t,r,o,u,p){this.current.textMatrix=[a,t,r,o,u,p],this.current.textMatrixScale=Math.hypot(a,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,t,r,o){const u=this.ctx,p=this.current,s=p.font,T=p.textRenderingMode,C=p.fontSize/p.fontSizeScale,k=T&e.TextRenderingMode.FILL_STROKE_MASK,G=!!(T&e.TextRenderingMode.ADD_TO_PATH_FLAG),X=p.patternFill&&!s.missingFile;let le;(s.disableFontFace||G||X)&&(le=s.getPathGenerator(this.commonObjs,a)),s.disableFontFace||X?(u.save(),u.translate(t,r),u.beginPath(),le(u,C),o&&u.setTransform.apply(u,o),(k===e.TextRenderingMode.FILL||k===e.TextRenderingMode.FILL_STROKE)&&u.fill(),(k===e.TextRenderingMode.STROKE||k===e.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((k===e.TextRenderingMode.FILL||k===e.TextRenderingMode.FILL_STROKE)&&u.fillText(a,t,r),(k===e.TextRenderingMode.STROKE||k===e.TextRenderingMode.FILL_STROKE)&&u.strokeText(a,t,r)),G&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:u.mozCurrentTransform,x:t,y:r,fontSize:C,addToPath:le})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);a.scale(1.5,1),a.fillText("I",0,10);const t=a.getImageData(0,0,10,10).data;let r=!1;for(let o=3;o<t.length;o+=4)if(t[o]>0&&t[o]<255){r=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(a){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(a);const o=t.fontSize;if(0===o)return;const u=this.ctx,p=t.fontSizeScale,s=t.charSpacing,T=t.wordSpacing,C=t.fontDirection,k=t.textHScale*C,G=a.length,X=r.vertical,le=X?1:-1,ce=r.defaultVMetrics,ge=o*t.fontMatrix[0],_e=t.textRenderingMode===e.TextRenderingMode.FILL&&!r.disableFontFace&&!t.patternFill;let de;if(u.save(),u.transform.apply(u,t.textMatrix),u.translate(t.x,t.y+t.textRise),u.scale(k,C>0?-1:1),t.patternFill){u.save();const te=t.fillColor.getPattern(u,this,u.mozCurrentTransformInverse,U.PathType.FILL);de=u.mozCurrentTransform,u.restore(),u.fillStyle=te}let m=t.lineWidth;const S=t.textMatrixScale;if(0===S||0===m){const te=t.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(te===e.TextRenderingMode.STROKE||te===e.TextRenderingMode.FILL_STROKE)&&(m=this.getSinglePixelWidth())}else m/=S;1!==p&&(u.scale(p,p),m/=p),u.lineWidth=m;let ae,re=0;for(ae=0;ae<G;++ae){const te=a[ae];if("number"==typeof te){re+=le*te*o/1e3;continue}let J=!1;const M=(te.isSpace?T:0)+s,Z=te.fontChar,R=te.accent;let ne,oe,ve,me=te.width;if(X){const se=te.vmetric||ce,Y=-(te.vmetric?se[1]:.5*me)*ge;me=se?-se[0]:me,ne=Y/p,oe=(re+se[2]*ge)/p}else ne=re/p,oe=0;if(r.remeasure&&me>0){const se=1e3*u.measureText(Z).width/o*p;if(me<se&&this.isFontSubpixelAAEnabled){const Y=me/se;J=!0,u.save(),u.scale(Y,1),ne/=Y}else me!==se&&(ne+=(me-se)/2e3*o/p)}this.contentVisible&&(te.isInFont||r.missingFile)&&(_e&&!R?u.fillText(Z,ne,oe):(this.paintChar(Z,ne,oe,de),R&&this.paintChar(R.fontChar,ne+o*R.offset.x/p,oe-o*R.offset.y/p,de))),ve=X?me*ge-M*C:me*ge+M*C,re+=ve,J&&u.restore()}X?t.y-=re:t.x+=re*k,u.restore(),this.compose()}showType3Text(a){const t=this.ctx,r=this.current,o=r.font,u=r.fontSize,p=r.fontDirection,s=o.vertical?1:-1,T=r.charSpacing,C=r.wordSpacing,k=r.textHScale*p,G=r.fontMatrix||e.FONT_IDENTITY_MATRIX,X=a.length;let ce,ge,_e,de;if(r.textRenderingMode!==e.TextRenderingMode.INVISIBLE&&0!==u){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,t.save(),t.transform.apply(t,r.textMatrix),t.translate(r.x,r.y),t.scale(k,p),ce=0;ce<X;++ce){if(ge=a[ce],"number"==typeof ge){de=s*ge*u/1e3,this.ctx.translate(de,0),r.x+=de*k;continue}const m=(ge.isSpace?C:0)+T,S=o.charProcOperatorList[ge.operatorListId];S?(this.contentVisible&&(this.processingType3=ge,this.save(),t.scale(u,u),t.transform.apply(t,G),this.executeOperatorList(S),this.restore()),_e=e.Util.applyTransform([ge.width,0],G)[0]*u+m,t.translate(_e,0),r.x+=_e*k):(0,e.warn)(`Type3 character "${ge.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(a,t){}setCharWidthAndBounds(a,t,r,o,u,p){this.ctx.rect(r,o,u-r,p-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let t;if("TilingPattern"===a[0]){const r=a[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice();t=new U.TilingPattern(a,r,this.ctx,{createCanvasGraphics:p=>new ue(p,this.commonObjs,this.objs,this.canvasFactory)},o)}else t=this._getPattern(a[1],a[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,t,r){const o=this.selectColor?.(a,t,r)||e.Util.makeHexColor(a,t,r);this.ctx.strokeStyle=o,this.current.strokeColor=o}setFillRGBColor(a,t,r){const o=this.selectColor?.(a,t,r)||e.Util.makeHexColor(a,t,r);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}_getPattern(a,t=null){let r;return this.cachedPatterns.has(a)?r=this.cachedPatterns.get(a):(r=(0,U.getShadingPattern)(this.objs.get(a)),this.cachedPatterns.set(a,r)),t&&(r.matrix=t),r}shadingFill(a){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(a);t.fillStyle=r.getPattern(t,this,t.mozCurrentTransformInverse,U.PathType.SHADING);const o=t.mozCurrentTransformInverse;if(o){const u=t.canvas,p=u.width,s=u.height,T=e.Util.applyTransform([0,0],o),C=e.Util.applyTransform([0,s],o),k=e.Util.applyTransform([p,0],o),G=e.Util.applyTransform([p,s],o),X=Math.min(T[0],C[0],k[0],G[0]),le=Math.min(T[1],C[1],k[1],G[1]),ce=Math.max(T[0],C[0],k[0],G[0]),ge=Math.max(T[1],C[1],k[1],G[1]);this.ctx.fillRect(X,le,ce-X,ge-le)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,t)&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;a.isolated||(0,e.info)("TODO: Support non-isolated groups."),a.knockout&&(0,e.warn)("Knockout groups not supported.");const r=t.mozCurrentTransform;if(a.matrix&&t.transform.apply(t,a.matrix),!a.bbox)throw new Error("Bounding box is required.");let o=e.Util.getAxialAlignedBoundingBox(a.bbox,t.mozCurrentTransform);o=e.Util.intersect(o,[0,0,t.canvas.width,t.canvas.height])||[0,0,0,0];const p=Math.floor(o[0]),s=Math.floor(o[1]);let T=Math.max(Math.ceil(o[2])-p,1),C=Math.max(Math.ceil(o[3])-s,1),k=1,G=1;T>V&&(k=T/V,T=V),C>V&&(G=C/V,C=V),this.current.startNewPathAndClipBox([0,0,T,C]);let X="groupAt"+this.groupLevel;a.smask&&(X+="_smask_"+this.smaskCounter++%2);const le=this.cachedCanvases.getCanvas(X,T,C,!0),ce=le.context;ce.scale(1/k,1/G),ce.translate(-p,-s),ce.transform.apply(ce,r),a.smask?this.smaskStack.push({canvas:le.canvas,context:ce,offsetX:p,offsetY:s,scaleX:k,scaleY:G,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(p,s),t.scale(k,G),t.save()),f(t,ce),this.ctx=ce,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,o);const u=e.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],o);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(a,t,r,o,u){if(this.save(),Array.isArray(t)&&4===t.length){const p=t[2]-t[0],s=t[3]-t[1];if(u&&this.annotationCanvasMap){(r=r.slice())[4]-=t[0],r[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=p,t[3]=s;const[T,C]=e.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:k}=this,G=Math.ceil(p*this.outputScaleX*k),X=Math.ceil(s*this.outputScaleY*k);this.annotationCanvas=this.canvasFactory.create(G,X);const{canvas:le,context:ce}=this.annotationCanvas,ge=`var(--zoom-factor) * ${D.PixelsPerInch.PDF_TO_CSS_UNITS}`;le.style.width=`calc(${p}px * ${ge})`,le.style.height=`calc(${s}px * ${ge})`,this.annotationCanvasMap.set(a,le),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ce,this.ctx.setTransform(T,0,0,-C,0,s*C),A(this.ctx),w(this.ctx,this.foregroundColor)}else w(this.ctx,this.foregroundColor),this.ctx.rect(t[0],t[1],p,s),this.ctx.clip(),this.endPath()}this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,r),this.transform.apply(this,o)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(a){if(!this.contentVisible)return;const t=a.count;(a=this.getObject(a.data,a)).count=t;const r=this.ctx,o=this.processingType3;if(o&&(void 0===o.compiled&&(o.compiled=function n(N){const{width:a,height:t}=N;if(a>1e3||t>1e3)return null;const o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=a+1;let s,T,C,p=new Uint8Array(u*(t+1));const k=a+7&-8;let G=new Uint8Array(k*t),X=0;for(const S of N.data){let re=128;for(;re>0;)G[X++]=S&re?0:255,re>>=1}let le=0;for(X=0,0!==G[X]&&(p[0]=1,++le),T=1;T<a;T++)G[X]!==G[X+1]&&(p[T]=G[X]?2:1,++le),X++;for(0!==G[X]&&(p[T]=2,++le),s=1;s<t;s++){X=s*k,C=s*u,G[X-k]!==G[X]&&(p[C]=G[X]?1:8,++le);let S=(G[X]?4:0)+(G[X-k]?8:0);for(T=1;T<a;T++)S=(S>>2)+(G[X+1]?4:0)+(G[X-k+1]?8:0),o[S]&&(p[C+T]=o[S],++le),X++;if(G[X-k]!==G[X]&&(p[C+T]=G[X]?2:4,++le),le>1e3)return null}for(X=k*(t-1),C=s*u,0!==G[X]&&(p[C]=8,++le),T=1;T<a;T++)G[X]!==G[X+1]&&(p[C+T]=G[X]?4:8,++le),X++;if(0!==G[X]&&(p[C+T]=4,++le),le>1e3)return null;const ce=new Int32Array([0,u,-1,0,-u,0,0,0,1]);let ge,_e,de;for($.isNodeJS?_e=[]:ge=new Path2D,s=0;le&&s<=t;s++){let S=s*u;const re=S+a;for(;S<re&&!p[S];)S++;if(S===re)continue;ge?ge.moveTo(S%u,s):de=[S%u,s];const ae=S;let te=p[S];do{const J=ce[te];do{S+=J}while(!p[S]);const M=p[S];5!==M&&10!==M?(te=M,p[S]=0):(te=M&51*te>>4,p[S]&=te>>2|te<<2),ge?ge.lineTo(S%u,S/u|0):de.push(S%u,S/u|0),p[S]||--le}while(ae!==S);ge||_e.push(de),--s}return G=null,p=null,function(S){if(S.save(),S.scale(1/a,-1/t),S.translate(0,-t),ge)S.fill(ge);else{S.beginPath();for(const re of _e){S.moveTo(re[0],re[1]);for(let ae=2,te=re.length;ae<te;ae+=2)S.lineTo(re[ae],re[ae+1])}S.fill()}S.beginPath(),S.restore()}}(a)),o.compiled))return void o.compiled(r);const u=this._createMaskCanvas(a),p=u.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(p,u.offsetX,u.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(a,t,r=0,o=0,u,p){if(!this.contentVisible)return;a=this.getObject(a.data,a);const s=this.ctx;s.save();const T=s.mozCurrentTransform;s.transform(t,r,o,u,0,0);const C=this._createMaskCanvas(a);s.setTransform(1,0,0,1,0,0);for(let k=0,G=p.length;k<G;k+=2){const X=e.Util.transform(T,[t,r,o,u,p[k],p[k+1]]),[le,ce]=e.Util.applyTransform([0,0],X);s.drawImage(C.canvas,le,ce)}s.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,o=this.current.patternFill;for(let u=0,p=a.length;u<p;u++){const s=a[u],T=s.width,C=s.height,k=this.cachedCanvases.getCanvas("maskCanvas",T,C,!1),G=k.context;G.save(),P(G,s),G.globalCompositeOperation="source-in",G.fillStyle=o?r.getPattern(G,this,t.mozCurrentTransformInverse,U.PathType.FILL):r,G.fillRect(0,0,T,C),G.restore(),t.save(),t.transform.apply(t,s.transform),t.scale(1,-1),y(t,k.canvas,0,0,T,C,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const t=this.getObject(a);t?this.paintInlineImageXObject(t):(0,e.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,t,r,o){if(!this.contentVisible)return;const u=this.getObject(a);if(!u)return void(0,e.warn)("Dependent image isn't ready yet");const p=u.width,s=u.height,T=[];for(let C=0,k=o.length;C<k;C+=2)T.push({transform:[t,0,0,r,o[C],o[C+1]],x:0,y:0,w:p,h:s});this.paintInlineImageXObjectGroup(u,T)}paintInlineImageXObject(a){if(!this.contentVisible)return;const t=a.width,r=a.height,o=this.ctx;let u;if(this.save(),o.scale(1/t,-1/r),"function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)u=a;else{const C=this.cachedCanvases.getCanvas("inlineImage",t,r,!1);d(C.context,a,this.current.transferMaps),u=C.canvas}const p=this._scaleImage(u,o.mozCurrentTransformInverse);o.imageSmoothingEnabled=q(o.mozCurrentTransform,a.interpolate);const[s,T]=y(o,p.img,0,0,p.paintWidth,p.paintHeight,0,-r,t,r);if(this.imageLayer){const C=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:a,left:C[0],top:C[1],width:s,height:T})}this.compose(),this.restore()}paintInlineImageXObjectGroup(a,t){if(!this.contentVisible)return;const r=this.ctx,o=a.width,u=a.height,p=this.cachedCanvases.getCanvas("inlineImage",o,u,!1);d(p.context,a,this.current.transferMaps);for(let T=0,C=t.length;T<C;T++){const k=t[T];if(r.save(),r.transform.apply(r,k.transform),r.scale(1,-1),y(r,p.canvas,k.x,k.y,k.w,k.h,0,-1,1,1),this.imageLayer){const G=this.getCanvasPosition(k.x,k.y);this.imageLayer.appendImage({imgData:a,left:G[0],top:G[1],width:o,height:u})}r.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,t){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,t){this.markedContentStack.push("OC"===a?{visible:this.optionalContentConfig.isVisible(t)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===fe?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=this.ctx.mozCurrentTransform;if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const t=Math.abs(a[0]*a[3]-a[2]*a[1]),r=Math.hypot(a[0],a[2]),o=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(r,o)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:a}=this.current,t=this.ctx.mozCurrentTransform;let r,o;if(0===t[1]&&0===t[2]){const u=Math.abs(t[0]),p=Math.abs(t[3]);if(0===a)r=1/u,o=1/p;else{const s=u*a,T=p*a;r=s<1?1/s:1,o=T<1?1/T:1}}else{const u=Math.abs(t[0]*t[3]-t[2]*t[1]),p=Math.hypot(t[0],t[1]),s=Math.hypot(t[2],t[3]);if(0===a)r=s/u,o=p/u;else{const T=a*u;r=s>T?s/T:1,o=p>T?p/T:1}}this._cachedScaleForStroking=[r,o]}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:t}=this,{lineWidth:r}=this.current,[o,u]=this.getScaleForStroking();if(t.lineWidth=r||1,1===o&&1===u)return void t.stroke();let p,s,T;a&&(p=t.mozCurrentTransform.slice(),s=t.getLineDash().slice(),T=t.lineDashOffset),t.scale(o,u);const C=Math.max(o,u);t.setLineDash(t.getLineDash().map(k=>k/C)),t.lineDashOffset/=C,t.stroke(),a&&(t.setTransform(...p),t.setLineDash(s),t.lineDashOffset=T)}getCanvasPosition(a,t){const r=this.ctx.mozCurrentTransform;return[r[0]*a+r[2]*t+r[4],r[1]*a+r[3]*t+r[5]]}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}l.CanvasGraphics=ue;for(const N in e.OPS)void 0!==ue.prototype[N]&&(ue.prototype[e.OPS[N]]=ue.prototype[N])},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=function B(L){switch(L[0]){case"RadialAxial":return new c(L);case"Mesh":return new H(L);case"Dummy":return new z}throw new Error(`Unknown IR type: ${L[0]}`)};var e=x(1),U=x(3);const O={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $(L,_){if(!_||U.isNodeJS)return;const A=_[2]-_[0],F=_[3]-_[1],y=new Path2D;y.rect(_[0],_[1],A,F),L.clip(y)}l.PathType=O;class D{constructor(){this.constructor===D&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class c extends D{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let A;"axial"===this._type?A=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(A=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const F of this._colorStops)A.addColorStop(F[0],F[1]);return A}getPattern(_,A,F,y){let n;if(y===O.STROKE||y===O.FILL){const i=A.current.getClippedPathBoundingBox(y,_.mozCurrentTransform)||[0,0,0,0],d=Math.ceil(i[2]-i[0])||1,P=Math.ceil(i[3]-i[1])||1,f=A.cachedCanvases.getCanvas("pattern",d,P,!0),w=f.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-i[0],-i[1]),F=e.Util.transform(F,[1,0,0,1,i[0],i[1]]),w.transform.apply(w,A.baseTransform),this.matrix&&w.transform.apply(w,this.matrix),$(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),n=_.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(F);try{n.setTransform(b)}catch(h){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${h?.message}".`)}}else $(_,this._bbox),n=this._createGradient(_);return n}}function v(L,_,A,F,y,n,i,d){const P=_.coords,f=_.colors,w=L.data,b=4*L.width;let h;P[A+1]>P[F+1]&&(h=A,A=F,F=h,h=n,n=i,i=h),P[F+1]>P[y+1]&&(h=F,F=y,y=h,h=i,i=d,d=h),P[A+1]>P[F+1]&&(h=A,A=F,F=h,h=n,n=i,i=h);const E=(P[A]+_.offsetX)*_.scaleX,I=(P[A+1]+_.offsetY)*_.scaleY,j=(P[F]+_.offsetX)*_.scaleX,q=(P[F+1]+_.offsetY)*_.scaleY,ee=(P[y]+_.offsetX)*_.scaleX,Q=(P[y+1]+_.offsetY)*_.scaleY;if(I>=Q)return;const he=f[n],fe=f[n+1],ue=f[n+2],N=f[i],a=f[i+1],t=f[i+2],r=f[d],o=f[d+1],u=f[d+2],p=Math.round(I),s=Math.round(Q);let T,C,k,G,X,le,ce,ge;for(let _e=p;_e<=s;_e++){if(_e<q){let ae;ae=_e<I?0:(I-_e)/(I-q),T=E-(E-j)*ae,C=he-(he-N)*ae,k=fe-(fe-a)*ae,G=ue-(ue-t)*ae}else{let ae;ae=_e>Q?1:q===Q?0:(q-_e)/(q-Q),T=j-(j-ee)*ae,C=N-(N-r)*ae,k=a-(a-o)*ae,G=t-(t-u)*ae}let de;de=_e<I?0:_e>Q?1:(I-_e)/(I-Q),X=E-(E-ee)*de,le=he-(he-r)*de,ce=fe-(fe-o)*de,ge=ue-(ue-u)*de;const m=Math.round(Math.min(T,X)),S=Math.round(Math.max(T,X));let re=b*_e+4*m;for(let ae=m;ae<=S;ae++)de=(T-ae)/(T-X),de<0?de=0:de>1&&(de=1),w[re++]=C-(C-le)*de|0,w[re++]=k-(k-ce)*de|0,w[re++]=G-(G-ge)*de|0,w[re++]=255}}function V(L,_,A){const F=_.coords,y=_.colors;let n,i;switch(_.type){case"lattice":const d=_.verticesPerRow,P=Math.floor(F.length/d)-1,f=d-1;for(n=0;n<P;n++){let w=n*d;for(let b=0;b<f;b++,w++)v(L,A,F[w],F[w+1],F[w+d],y[w],y[w+1],y[w+d]),v(L,A,F[w+d+1],F[w+1],F[w+d],y[w+d+1],y[w+1],y[w+d])}break;case"triangles":for(n=0,i=F.length;n<i;n+=3)v(L,A,F[n],F[n+1],F[n+2],y[n],y[n+1],y[n+2]);break;default:throw new Error("illegal figure")}}class H extends D{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,A,F){const d=Math.floor(this._bounds[0]),P=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,w=Math.ceil(this._bounds[3])-P,b=Math.min(Math.ceil(Math.abs(f*_[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(w*_[1]*1.1)),3e3),E=f/b,I=w/h,j={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-P,scaleX:1/E,scaleY:1/I},Q=F.getCanvas("mesh",b+4,h+4,!1),he=Q.context,fe=he.createImageData(b,h);if(A){const N=fe.data;for(let a=0,t=N.length;a<t;a+=4)N[a]=A[0],N[a+1]=A[1],N[a+2]=A[2],N[a+3]=255}for(const N of this._figures)V(fe,N,j);return he.putImageData(fe,2,2),{canvas:Q.canvas,offsetX:d-2*E,offsetY:P-2*I,scaleX:E,scaleY:I}}getPattern(_,A,F,y){let n;if($(_,this._bbox),y===O.SHADING)n=e.Util.singularValueDecompose2dScale(_.mozCurrentTransform);else if(n=e.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const d=e.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*d[0],n[1]*d[1]]}const i=this._createMeshCanvas(n,y===O.SHADING?null:this._background,A.cachedCanvases);return y!==O.SHADING&&(_.setTransform.apply(_,A.baseTransform),this.matrix&&_.transform.apply(_,this.matrix)),_.translate(i.offsetX,i.offsetY),_.scale(i.scaleX,i.scaleY),_.createPattern(i.canvas,"no-repeat")}}class z extends D{getPattern(){return"hotpink"}}class g{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(_,A,F,y,n){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=A,this.ctx=F,this.canvasGraphicsFactory=y,this.baseTransform=n}createPatternCanvas(_){const A=this.operatorList,F=this.bbox,y=this.xstep,n=this.ystep,i=this.paintType,P=this.color,f=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+this.tilingType);const w=F[0],b=F[1],h=F[2],E=F[3],I=e.Util.singularValueDecompose2dScale(this.matrix),j=e.Util.singularValueDecompose2dScale(this.baseTransform),q=[I[0]*j[0],I[1]*j[1]],ee=this.getSizeAndScale(y,this.ctx.canvas.width,q[0]),Q=this.getSizeAndScale(n,this.ctx.canvas.height,q[1]),he=_.cachedCanvases.getCanvas("pattern",ee.size,Q.size,!0),fe=he.context,ue=f.createCanvasGraphics(fe);ue.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(ue,i,P);let N=w,a=b,t=h,r=E;return w<0&&(N=0,t+=Math.abs(w)),b<0&&(a=0,r+=Math.abs(b)),fe.translate(-ee.scale*N,-Q.scale*a),ue.transform(ee.scale,0,0,Q.scale,0,0),fe.save(),this.clipBbox(ue,N,a,t,r),ue.baseTransform=ue.ctx.mozCurrentTransform.slice(),ue.executeOperatorList(A),ue.endDrawing(),{canvas:he.canvas,scaleX:ee.scale,scaleY:Q.scale,offsetX:N,offsetY:a}}getSizeAndScale(_,A,F){_=Math.abs(_);const y=Math.max(g.MAX_PATTERN_SIZE,A);let n=Math.ceil(_*F);return n>=y?n=y:F=n/_,{scale:F,size:n}}clipBbox(_,A,F,y,n){_.ctx.rect(A,F,y-A,n-F),_.current.updateRectMinMax(_.ctx.mozCurrentTransform,[A,F,y,n]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,A,F){const y=_.ctx,n=_.current;switch(A){case 1:const i=this.ctx;y.fillStyle=i.fillStyle,y.strokeStyle=i.strokeStyle,n.fillColor=i.fillStyle,n.strokeColor=i.strokeStyle;break;case 2:const d=e.Util.makeHexColor(F[0],F[1],F[2]);y.fillStyle=d,y.strokeStyle=d,n.fillColor=d,n.strokeColor=d;break;default:throw new e.FormatError(`Unsupported paint type: ${A}`)}}getPattern(_,A,F,y){let n=F;y!==O.SHADING&&(n=e.Util.transform(n,A.baseTransform),this.matrix&&(n=e.Util.transform(n,this.matrix)));const i=this.createPatternCanvas(A);let d=new DOMMatrix(n);d=d.translate(i.offsetX,i.offsetY),d=d.scale(1/i.scaleX,1/i.scaleY);const P=_.createPattern(i.canvas,"repeat");try{P.setTransform(d)}catch(f){(0,e.warn)(`TilingPattern.getPattern: "${f?.message}".`)}return P}}l.TilingPattern=g},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.applyMaskImageData=function U({src:O,srcPos:$=0,dest:D,destPos:c=0,width:v,height:V,inverseDecode:H=!1}){const z=e.FeatureTest.isLittleEndian?4278190080:255,[B,W]=H?[0,z]:[z,0],g=v>>3,L=7&v,_=O.length;D=new Uint32Array(D.buffer);for(let A=0;A<V;A++){for(const y=$+g;$<y;$++){const n=$<_?O[$]:255;D[c++]=128&n?W:B,D[c++]=64&n?W:B,D[c++]=32&n?W:B,D[c++]=16&n?W:B,D[c++]=8&n?W:B,D[c++]=4&n?W:B,D[c++]=2&n?W:B,D[c++]=1&n?W:B}if(0===L)continue;const F=$<_?O[$++]:255;for(let y=0;y<L;y++)D[c++]=F&1<<7-y?W:B}return{srcPos:$,destPos:c}};var e=x(1)},(ie,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;const x=Object.create(null);l.GlobalWorkerOptions=x,x.workerPort=void 0===x.workerPort?null:x.workerPort,x.workerSrc=void 0===x.workerSrc?"":x.workerSrc},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0;var e=x(1);function $(c){switch(c instanceof Error||"object"==typeof c&&null!==c||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new e.AbortException(c.message);case"MissingPDFException":return new e.MissingPDFException(c.message);case"PasswordException":return new e.PasswordException(c.message,c.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new e.UnknownErrorException(c.message,c.details);default:return new e.UnknownErrorException(c.message,c.toString())}}l.MessageHandler=class D{constructor(v,V,H){this.sourceName=v,this.targetName=V,this.comObj=H,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=z=>{const B=z.data;if(B.targetName!==this.sourceName)return;if(B.stream)return void this._processStreamMessage(B);if(B.callback){const g=B.callbackId,L=this.callbackCapabilities[g];if(!L)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],1===B.callback)L.resolve(B.data);else{if(2!==B.callback)throw new Error("Unexpected callback case");L.reject($(B.reason))}return}const W=this.actionHandler[B.action];if(!W)throw new Error(`Unknown action from worker: ${B.action}`);if(B.callbackId){const g=this.sourceName,L=B.sourceName;new Promise(function(_){_(W(B.data))}).then(function(_){H.postMessage({sourceName:g,targetName:L,callback:1,callbackId:B.callbackId,data:_})},function(_){H.postMessage({sourceName:g,targetName:L,callback:2,callbackId:B.callbackId,reason:$(_)})})}else B.streamId?this._createStreamSink(B):W(B.data)},H.addEventListener("message",this._onComObjOnMessage)}on(v,V){const H=this.actionHandler;if(H[v])throw new Error(`There is already an actionName called "${v}"`);H[v]=V}send(v,V,H){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:V},H)}sendWithPromise(v,V,H){const z=this.callbackId++,B=(0,e.createPromiseCapability)();this.callbackCapabilities[z]=B;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:z,data:V},H)}catch(W){B.reject(W)}return B.promise}sendWithStream(v,V,H,z){const B=this.streamId++,W=this.sourceName,g=this.targetName,L=this.comObj;return new ReadableStream({start:_=>{const A=(0,e.createPromiseCapability)();return this.streamControllers[B]={controller:_,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},L.postMessage({sourceName:W,targetName:g,action:v,streamId:B,data:V,desiredSize:_.desiredSize},z),A.promise},pull:_=>{const A=(0,e.createPromiseCapability)();return this.streamControllers[B].pullCall=A,L.postMessage({sourceName:W,targetName:g,stream:6,streamId:B,desiredSize:_.desiredSize}),A.promise},cancel:_=>{(0,e.assert)(_ instanceof Error,"cancel must have a valid reason");const A=(0,e.createPromiseCapability)();return this.streamControllers[B].cancelCall=A,this.streamControllers[B].isClosed=!0,L.postMessage({sourceName:W,targetName:g,stream:1,streamId:B,reason:$(_)}),A.promise}},H)}_createStreamSink(v){const V=v.streamId,H=this.sourceName,z=v.sourceName,B=this.comObj,W=this,g=this.actionHandler[v.action],L={enqueue(_,A=1,F){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=A,y>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),B.postMessage({sourceName:H,targetName:z,stream:4,streamId:V,chunk:_},F)},close(){this.isCancelled||(this.isCancelled=!0,B.postMessage({sourceName:H,targetName:z,stream:3,streamId:V}),delete W.streamSinks[V])},error(_){(0,e.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,B.postMessage({sourceName:H,targetName:z,stream:5,streamId:V,reason:$(_)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};L.sinkCapability.resolve(),L.ready=L.sinkCapability.promise,this.streamSinks[V]=L,new Promise(function(_){_(g(v.data,L))}).then(function(){B.postMessage({sourceName:H,targetName:z,stream:8,streamId:V,success:!0})},function(_){B.postMessage({sourceName:H,targetName:z,stream:8,streamId:V,reason:$(_)})})}_processStreamMessage(v){const V=v.streamId,H=this.sourceName,z=v.sourceName,B=this.comObj,W=this.streamControllers[V],g=this.streamSinks[V];switch(v.stream){case 8:v.success?W.startCall.resolve():W.startCall.reject($(v.reason));break;case 7:v.success?W.pullCall.resolve():W.pullCall.reject($(v.reason));break;case 6:if(!g){B.postMessage({sourceName:H,targetName:z,stream:7,streamId:V,success:!0});break}g.desiredSize<=0&&v.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=v.desiredSize,new Promise(function(L){L(g.onPull&&g.onPull())}).then(function(){B.postMessage({sourceName:H,targetName:z,stream:7,streamId:V,success:!0})},function(L){B.postMessage({sourceName:H,targetName:z,stream:7,streamId:V,reason:$(L)})});break;case 4:if((0,e.assert)(W,"enqueue should have stream controller"),W.isClosed)break;W.controller.enqueue(v.chunk);break;case 3:if((0,e.assert)(W,"close should have stream controller"),W.isClosed)break;W.isClosed=!0,W.controller.close(),this._deleteStreamController(W,V);break;case 5:(0,e.assert)(W,"error should have stream controller"),W.controller.error($(v.reason)),this._deleteStreamController(W,V);break;case 2:v.success?W.cancelCall.resolve():W.cancelCall.reject($(v.reason)),this._deleteStreamController(W,V);break;case 1:if(!g)break;new Promise(function(L){L(g.onCancel&&g.onCancel($(v.reason)))}).then(function(){B.postMessage({sourceName:H,targetName:z,stream:2,streamId:V,success:!0})},function(L){B.postMessage({sourceName:H,targetName:z,stream:2,streamId:V,reason:$(L)})}),g.sinkCapability.reject($(v.reason)),g.isCancelled=!0,delete this.streamSinks[V];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(v,V){var H=this;return _asyncToGenerator(function*(){yield Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]),delete H.streamControllers[V]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var e=x(1),U=new WeakMap,O=new WeakMap;l.Metadata=class ${constructor({parsedData:c,rawData:v}){_classPrivateFieldInitSpec(this,U,void 0),_classPrivateFieldInitSpec(this,O,void 0),_classPrivateFieldSet(U,this,c),_classPrivateFieldSet(O,this,v)}getRaw(){return _classPrivateFieldGet(O,this)}get(c){return _classPrivateFieldGet(U,this).get(c)??null}getAll(){return(0,e.objectFromMap)(_classPrivateFieldGet(U,this))}has(c){return _classPrivateFieldGet(U,this).has(c)}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var e=x(1);class U{constructor(D,c){this.visible=!0,this.name=D,this.intent=c}}l.OptionalContentConfig=class O{constructor(D){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==D){this.name=D.name,this.creator=D.creator,this._order=D.order;for(const c of D.groups)this._groups.set(c.id,new U(c.name,c.intent));if("OFF"===D.baseState)for(const c of this._groups)c.visible=!1;for(const c of D.on)this._groups.get(c).visible=!0;for(const c of D.off)this._groups.get(c).visible=!1}}_evaluateVisibilityExpression(D){const c=D.length;if(c<2)return!0;const v=D[0];for(let V=1;V<c;V++){const H=D[V];let z;if(Array.isArray(H))z=this._evaluateVisibilityExpression(H);else{if(!this._groups.has(H))return(0,e.warn)(`Optional content group not found: ${H}`),!0;z=this._groups.get(H).visible}switch(v){case"And":if(!z)return!1;break;case"Or":if(z)return!0;break;case"Not":return!z;default:return!0}}return"And"===v}isVisible(D){if(0===this._groups.size)return!0;if(!D)return(0,e.warn)("Optional content group not defined."),!0;if("OCG"===D.type)return this._groups.has(D.id)?this._groups.get(D.id).visible:((0,e.warn)(`Optional content group not found: ${D.id}`),!0);if("OCMD"===D.type){if(D.expression)return this._evaluateVisibilityExpression(D.expression);if(!D.policy||"AnyOn"===D.policy){for(const c of D.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(this._groups.get(c).visible)return!0}return!1}if("AllOn"===D.policy){for(const c of D.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(!this._groups.get(c).visible)return!1}return!0}if("AnyOff"===D.policy){for(const c of D.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(!this._groups.get(c).visible)return!0}return!1}if("AllOff"===D.policy){for(const c of D.ids){if(!this._groups.has(c))return(0,e.warn)(`Optional content group not found: ${c}`),!0;if(this._groups.get(c).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${D.policy}.`),!0}return(0,e.warn)(`Unknown group type ${D.type}.`),!0}setVisibility(D,c=!0){this._groups.has(D)?this._groups.get(D).visible=!!c:(0,e.warn)(`Optional content group not found: ${D}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,e.objectFromMap)(this._groups):null}getGroup(D){return this._groups.get(D)||null}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0;var e=x(1),U=x(5);l.PDFDataTransportStream=class O{constructor(v,V){(0,e.assert)(V,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1,this._contentDispositionFilename=v.contentDispositionFilename||null;const H=v.initialData;if(H?.length>0){const z=new Uint8Array(H).buffer;this._queuedChunks.push(z)}this._pdfDataRangeTransport=V,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((z,B)=>{this._onReceiveData({begin:z,chunk:B})}),this._pdfDataRangeTransport.addProgressListener((z,B)=>{this._onProgress({loaded:z,total:B})}),this._pdfDataRangeTransport.addProgressiveReadListener(z=>{this._onReceiveData({chunk:z})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const V=new Uint8Array(v.chunk).buffer;if(void 0===v.begin)this._fullRequestReader?this._fullRequestReader._enqueue(V):this._queuedChunks.push(V);else{const H=this._rangeReaders.some(function(z){return z._begin===v.begin&&(z._enqueue(V),!0)});(0,e.assert)(H,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(v){if(void 0===v.total){const V=this._rangeReaders[0];V?.onProgress&&V.onProgress({loaded:v.loaded})}else{const V=this._fullRequestReader;V?.onProgress&&V.onProgress({loaded:v.loaded,total:v.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const V=this._rangeReaders.indexOf(v);V>=0&&this._rangeReaders.splice(V,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new $(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,V){if(V<=this._progressiveDataLength)return null;const H=new D(this,v,V);return this._pdfDataRangeTransport.requestDataRange(v,V),this._rangeReaders.push(H),H}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const V of this._rangeReaders.slice(0))V.cancel(v);this._pdfDataRangeTransport.abort()}};class ${constructor(v,V,H=!1,z=null){this._stream=v,this._done=H||!1,this._filename=(0,U.isPdfFile)(z)?z:null,this._queuedChunks=V||[],this._loaded=0;for(const B of this._queuedChunks)this._loaded+=B.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunks.length>0)return{value:v._queuedChunks.shift(),done:!1};if(v._done)return{value:void 0,done:!0};const V=(0,e.createPromiseCapability)();return v._requests.push(V),V.promise})()}cancel(v){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class D{constructor(v,V,H){this._stream=v,this._begin=V,this._end=H,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(0===this._requests.length)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunk){const H=v._queuedChunk;return v._queuedChunk=null,{value:H,done:!1}}if(v._done)return{value:void 0,done:!0};const V=(0,e.createPromiseCapability)();return v._requests.push(V),V.promise})()}cancel(v){this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ie,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0;class x{static textContent(U){const O=[],$={items:O,styles:Object.create(null)};return function D(c){if(!c)return;let v=null;const V=c.name;if("#text"===V)v=c.value;else{if(!x.shouldBuildText(V))return;c?.attributes?.textContent?v=c.attributes.textContent:c.value&&(v=c.value)}if(null!==v&&O.push({str:v}),c.children)for(const H of c.children)D(H)}(U),$}static shouldBuildText(U){return!("textarea"===U||"input"===U||"option"===U||"select"===U)}}l.XfaText=x},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0;var e=x(6);const U=function(c){return new Promise((v,V)=>{__webpack_require__(23237).readFile(c,(z,B)=>{!z&&B?v(new Uint8Array(B)):V(new Error(z))})})};l.NodeCanvasFactory=class O extends e.BaseCanvasFactory{_createCanvas(v,V){return __webpack_require__(17640).createCanvas(v,V)}},l.NodeCMapReaderFactory=class $ extends e.BaseCMapReaderFactory{_fetchData(v,V){return U(v).then(H=>({cMapData:H,compressionType:V}))}},l.NodeStandardFontDataFactory=class D extends e.BaseStandardFontDataFactory{_fetchData(v){return U(v)}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationLayer=void 0;var e=x(1),U=x(5),O=x(8),$=x(21),D=x(22);const c=1e3,v=new WeakSet;function V(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class H{static create(t){switch(t.data.annotationType){case e.AnnotationType.LINK:return new B(t);case e.AnnotationType.TEXT:return new W(t);case e.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new L(t);case"Btn":return t.data.radioButton?new A(t):t.data.checkBox?new _(t):new F(t);case"Ch":return new y(t)}return new g(t);case e.AnnotationType.POPUP:return new n(t);case e.AnnotationType.FREETEXT:return new d(t);case e.AnnotationType.LINE:return new P(t);case e.AnnotationType.SQUARE:return new f(t);case e.AnnotationType.CIRCLE:return new w(t);case e.AnnotationType.POLYLINE:return new b(t);case e.AnnotationType.CARET:return new E(t);case e.AnnotationType.INK:return new I(t);case e.AnnotationType.POLYGON:return new h(t);case e.AnnotationType.HIGHLIGHT:return new j(t);case e.AnnotationType.UNDERLINE:return new q(t);case e.AnnotationType.SQUIGGLY:return new ee(t);case e.AnnotationType.STRIKEOUT:return new Q(t);case e.AnnotationType.STAMP:return new he(t);case e.AnnotationType.FILEATTACHMENT:return new fe(t);default:return new z(t)}}}class z{constructor(t,{isRenderable:r=!1,ignoreBorder:o=!1,createQuadrilaterals:u=!1}={}){this.isRenderable=r,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,r&&(this.container=this._createContainer(o)),u&&(this.quadrilaterals=this._createQuadrilaterals(o))}_createContainer(t=!1){const r=this.data,o=this.page,u=this.viewport,p=document.createElement("section");let{width:s,height:T}=V(r.rect);p.setAttribute("data-annotation-id",r.id);const C=e.Util.normalizeRect([r.rect[0],o.view[3]-r.rect[1]+o.view[1],r.rect[2],o.view[3]-r.rect[3]+o.view[1]]);if(r.hasOwnCanvas){const k=u.transform.slice(),[G,X]=e.Util.singularValueDecompose2dScale(k);s=Math.ceil(s*G),T=Math.ceil(T*X),C[0]*=G,C[1]*=X;for(let le=0;le<4;le++)k[le]=Math.sign(k[le]);p.style.transform=`matrix(${k.join(",")})`}else p.style.transform=`matrix(${u.transform.join(",")})`;if(p.style.transformOrigin=`${-C[0]}px ${-C[1]}px`,!t&&r.borderStyle.width>0){p.style.borderWidth=`${r.borderStyle.width}px`,r.borderStyle.style!==e.AnnotationBorderStyleType.UNDERLINE&&(s-=2*r.borderStyle.width,T-=2*r.borderStyle.width);const k=r.borderStyle.horizontalCornerRadius,G=r.borderStyle.verticalCornerRadius;switch((k>0||G>0)&&(p.style.borderRadius=`${k}px / ${G}px`),r.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid"}r.borderColor||r.color?p.style.borderColor=e.Util.makeHexColor(0|r.color[0],0|r.color[1],0|r.color[2]):p.style.borderWidth=0}return p.style.left=`${C[0]}px`,p.style.top=`${C[1]}px`,r.hasOwnCanvas?p.style.width=p.style.height="auto":(p.style.width=`${s}px`,p.style.height=`${T}px`),p}get _commonActions(){const t=(r,o,u)=>{const p=u.detail[r];u.target.style[o]=$.ColorConverters[`${p[0]}_HTML`](p.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:r=>{const o=r.detail.display%2==1;r.target.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o,print:0===r.detail.display||3===r.detail.display})},print:r=>{this.annotationStorage.setValue(this.data.id,{print:r.detail.print})},hidden:r=>{r.target.style.visibility=r.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:r.detail.hidden})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.detail.readonly?r.target.setAttribute("readonly",""):r.target.removeAttribute("readonly")},required:r=>{r.detail.required?r.target.setAttribute("required",""):r.target.removeAttribute("required")},bgColor:r=>{t("bgColor","backgroundColor",r)},fillColor:r=>{t("fillColor","backgroundColor",r)},fgColor:r=>{t("fgColor","color",r)},textColor:r=>{t("textColor","color",r)},borderColor:r=>{t("borderColor","borderColor",r)},strokeColor:r=>{t("strokeColor","borderColor",r)}})}_dispatchEventFromSandbox(t,r){const o=this._commonActions;for(const u of Object.keys(r.detail)){const p=t[u]||o[u];p&&p(r)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const o=this._commonActions;for(const[u,p]of Object.entries(r)){const s=o[u];s&&(s({detail:p,target:t}),delete r[u])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const r=[],o=this.data.rect;for(const u of this.data.quadPoints)this.data.rect=[u[2].x,u[2].y,u[1].x,u[1].y],r.push(this._createContainer(t));return this.data.rect=o,r}_createPopup(t,r){let o=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,o=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=o.style.height,t.style.width=o.style.width,o.appendChild(t));const p=new i({container:o,trigger:t,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();p.style.left=o.style.width,o.appendChild(p)}_renderQuadrilaterals(t){for(const r of this.quadrilaterals)r.className=t;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,r=null){const o=[];if(this._fieldObjects){const u=this._fieldObjects[t];if(u)for(const{page:p,id:s,exportValues:T}of u){if(-1===p||s===r)continue;const C="string"==typeof T?T:null,k=document.getElementById(s);!k||v.has(k)?o.push({id:s,exportValue:C,domElement:k}):(0,e.warn)(`_getElementsByName - element not allowed: ${s}`)}return o}for(const u of document.getElementsByName(t)){const{id:p,exportValue:s}=u;p!==r&&v.has(u)&&o.push({id:p,exportValue:s,domElement:u})}return o}static get platform(){const t=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class B extends z{constructor(t,r=null){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:t,linkService:r}=this,o=document.createElement("a");if(t.url)r.addLinkAttributes(o,t.url,t.newWindow);else if(t.action)this._bindNamedAction(o,t.action);else if(t.dest)this._bindLink(o,t.dest);else{let u=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(u=!0,this._bindJSAction(o,t)),t.resetForm?this._bindResetFormAction(o,t.resetForm):u||this._bindLink(o,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((u,p)=>{const s=0===p?o:o.cloneNode();return u.appendChild(s),u}):(this.container.className="linkAnnotation",this.container.appendChild(o),this.container)}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||""===r)&&(t.className="internalLink")}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),t.className="internalLink"}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const u of Object.keys(r.actions)){const p=o.get(u);p&&(t[p]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:u}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,r){const o=t.onclick;if(o||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(o||(t.onclick=()=>!1));t.onclick=()=>{o&&o();const{fields:u,refs:p,include:s}=r,T=[];if(0!==u.length||0!==p.length){const G=new Set(p);for(const X of u){const le=this._fieldObjects[X]||[];for(const{id:ce}of le)G.add(ce)}for(const X of Object.values(this._fieldObjects))for(const le of X)G.has(le.id)===s&&T.push(le)}else for(const G of Object.values(this._fieldObjects))T.push(...G);const C=this.annotationStorage,k=[];for(const G of T){const{id:X}=G;switch(k.push(X),G.type){case"text":case"combobox":case"listbox":C.setValue(X,{value:G.defaultValue||""});break;case"checkbox":case"radiobutton":C.setValue(X,{value:G.defaultValue===G.exportValues});break;default:continue}const le=document.getElementById(X);!le||!v.has(le)||le.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:k,name:"ResetForm"}}),!1}}}class W extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class g extends z{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:r,isMac:o}=z.platform;return r&&t.ctrlKey||o&&t.metaKey}_setEventListener(t,r,o,u){r.includes("mouse")?t.addEventListener(r,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:u(p),shift:p.shiftKey,modifier:this._getKeyModifier(p)}})}):t.addEventListener(r,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:u(p)}})})}_setEventListeners(t,r,o){for(const[u,p]of r)("Action"===p||this.data.actions?.[p])&&this._setEventListener(t,u,p,o)}_setBackgroundColor(t){const r=this.data.backgroundColor||null;t.style.backgroundColor=null===r?"transparent":e.Util.makeHexColor(r[0],r[1],r[2])}}class L extends g{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,r,o,u){const p=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[r]=o),p.setValue(s.id,{[u]:o})}render(){const t=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";let o=null;if(this.renderForms){const u=t.getValue(r,{value:this.data.fieldValue}),p=u.formattedValue||u.value||"",s={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(o=document.createElement("textarea"),o.textContent=p):(o=document.createElement("input"),o.type="text",o.setAttribute("value",p)),v.add(o),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=c,s.userValue=p,o.setAttribute("id",r),o.addEventListener("input",C=>{t.setValue(r,{value:C.target.value}),this.setPropertyOnSiblings(o,"value",C.target.value,"value")}),o.addEventListener("resetform",C=>{o.value=s.userValue=this.data.defaultFieldValue??"",s.formattedValue=null});let T=C=>{const{formattedValue:k}=s;null!=k&&(C.target.value=k),C.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",k=>{s.userValue&&(k.target.value=s.userValue),s.valueOnFocus=k.target.value}),o.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({value(X){s.userValue=X.detail.value??"",t.setValue(r,{value:s.userValue.toString()}),X.target.value=s.userValue},formattedValue(X){const{formattedValue:le}=X.detail;s.formattedValue=le,null!=le&&X.target!==document.activeElement&&(X.target.value=le),t.setValue(r,{formattedValue:le})},selRange(X){X.target.setSelectionRange(...X.detail.selRange)}},k)}),o.addEventListener("keydown",k=>{let G=-1;if("Escape"===k.key?G=0:"Enter"===k.key?G=2:"Tab"===k.key&&(G=3),-1===G)return;const{value:X}=k.target;s.valueOnFocus!==X&&(s.userValue=X,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:X,willCommit:!0,commitKey:G,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}))});const C=T;T=null,o.addEventListener("blur",k=>{const{value:G}=k.target;s.userValue=G,this._mouseState.isDown&&s.valueOnFocus!==G&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:G,willCommit:!0,commitKey:1,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}),C(k)}),this.data.actions?.Keystroke&&o.addEventListener("beforeinput",k=>{const{data:G,target:X}=k,{value:le,selectionStart:ce,selectionEnd:ge}=X;let _e=ce,de=ge;switch(k.inputType){case"deleteWordBackward":{const m=le.substring(0,ce).match(/\w*[^\w]*$/);m&&(_e-=m[0].length);break}case"deleteWordForward":{const m=le.substring(ce).match(/^[^\w]*\w*/);m&&(de+=m[0].length);break}case"deleteContentBackward":ce===ge&&(_e-=1);break;case"deleteContentForward":ce===ge&&(de+=1)}k.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:le,change:G||"",willCommit:!1,selStart:_e,selEnd:de}})}),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.value)}if(T&&o.addEventListener("blur",T),null!==this.data.maxLen&&(o.maxLength=this.data.maxLen),this.data.comb){const k=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;o.classList.add("comb"),o.style.letterSpacing=`calc(${k}px - 1ch)`}}else o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.appendChild(o),this.container}_setTextStyle(t){const{fontSize:o,fontColor:u}=this.data.defaultAppearanceData,p=t.style;o&&(p.fontSize=`${o}px`),p.color=e.Util.makeHexColor(u[0],u[1],u[2]),null!==this.data.textAlignment&&(p.textAlign=["left","center","right"][this.data.textAlignment])}}class _ extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,r=this.data,o=r.id;let u=t.getValue(o,{value:r.exportValue===r.fieldValue}).value;"string"==typeof u&&(u="Off"!==u,t.setValue(o,{value:u})),this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return v.add(p),p.disabled=r.readOnly,p.type="checkbox",p.name=r.fieldName,u&&p.setAttribute("checked",!0),p.setAttribute("id",o),p.setAttribute("exportValue",r.exportValue),p.tabIndex=c,p.addEventListener("change",s=>{const{name:T,checked:C}=s.target;for(const k of this._getElementsByName(T,o)){const G=C&&k.exportValue===r.exportValue;k.domElement&&(k.domElement.checked=G),t.setValue(k.id,{value:G})}t.setValue(o,{value:C})}),p.addEventListener("resetform",s=>{s.target.checked=(r.defaultFieldValue||"Off")===r.exportValue}),this.enableScripting&&this.hasJSActions&&(p.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({value(C){C.target.checked="Off"!==C.detail.value,t.setValue(o,{value:C.target.checked})}},s)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class A extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,r=this.data,o=r.id;let u=t.getValue(o,{value:r.fieldValue===r.buttonValue}).value;"string"==typeof u&&(u=u!==r.buttonValue,t.setValue(o,{value:u}));const p=document.createElement("input");if(v.add(p),p.disabled=r.readOnly,p.type="radio",p.name=r.fieldName,u&&p.setAttribute("checked",!0),p.setAttribute("id",o),p.tabIndex=c,p.addEventListener("change",s=>{const{name:T,checked:C}=s.target;for(const k of this._getElementsByName(T,o))t.setValue(k.id,{value:!1});t.setValue(o,{value:C})}),p.addEventListener("resetform",s=>{const T=r.defaultFieldValue;s.target.checked=null!=T&&T===r.buttonValue}),this.enableScripting&&this.hasJSActions){const s=r.buttonValue;p.addEventListener("updatefromsandbox",T=>{this._dispatchEventFromSandbox({value:k=>{const G=s===k.detail.value;for(const X of this._getElementsByName(k.target.name)){const le=G&&X.id===o;X.domElement&&(X.domElement.checked=le),t.setValue(X.id,{value:le})}}},T)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],T=>T.target.checked)}return this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class F extends B{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class y extends g{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,r=this.data.id,o=t.getValue(r,{value:this.data.fieldValue});let{fontSize:u}=this.data.defaultAppearanceData;u||(u=9);const p=`calc(${u}px * var(--zoom-factor))`,s=document.createElement("select");v.add(s),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.setAttribute("id",r),s.tabIndex=c,s.style.fontSize=`${u}px`,this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",k=>{const G=this.data.defaultFieldValue;for(const X of s.options)X.selected=X.value===G});for(const k of this.data.options){const G=document.createElement("option");G.textContent=k.displayValue,G.value=k.exportValue,this.data.combo&&(G.style.fontSize=p),o.value.includes(k.exportValue)&&G.setAttribute("selected",!0),s.appendChild(G)}const T=(k,G)=>{const X=G?"value":"textContent",le=k.target.options;return k.target.multiple?Array.prototype.filter.call(le,ce=>ce.selected).map(ce=>ce[X]):-1===le.selectedIndex?null:le[le.selectedIndex][X]},C=k=>Array.prototype.map.call(k.target.options,X=>({displayValue:X.textContent,exportValue:X.value}));return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({value(X){const le=X.detail.value,ce=new Set(Array.isArray(le)?le:[le]);for(const ge of s.options)ge.selected=ce.has(ge.value);t.setValue(r,{value:T(X,!0)})},multipleSelection(X){s.multiple=!0},remove(X){const le=s.options,ce=X.detail.remove;le[ce].selected=!1,s.remove(ce),le.length>0&&-1===Array.prototype.findIndex.call(le,_e=>_e.selected)&&(le[0].selected=!0),t.setValue(r,{value:T(X,!0),items:C(X)})},clear(X){for(;0!==s.length;)s.remove(0);t.setValue(r,{value:null,items:[]})},insert(X){const{index:le,displayValue:ce,exportValue:ge}=X.detail.insert,_e=document.createElement("option");_e.textContent=ce,_e.value=ge,s.insertBefore(_e,s.children[le]),t.setValue(r,{value:T(X,!0),items:C(X)})},items(X){const{items:le}=X.detail;for(;0!==s.length;)s.remove(0);for(const ce of le){const{displayValue:ge,exportValue:_e}=ce,de=document.createElement("option");de.textContent=ge,de.value=_e,s.appendChild(de)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(r,{value:T(X,!0),items:C(X)})},indices(X){const le=new Set(X.detail.indices);for(const ce of X.target.options)ce.selected=le.has(ce.index);t.setValue(r,{value:T(X,!0)})},editable(X){X.target.disabled=!X.detail.editable}},k)}),s.addEventListener("input",k=>{const G=T(k,!0),X=T(k,!1);t.setValue(r,{value:G}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:X,changeEx:G,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],k=>k.target.checked)):s.addEventListener("input",function(k){t.setValue(r,{value:T(k,!0)})}),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.appendChild(s),this.container}}class n extends z{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const o=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===o.length)return this.container;const u=new i({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),p=this.page,s=e.Util.normalizeRect([this.data.parentRect[0],p.view[3]-this.data.parentRect[1]+p.view[1],this.data.parentRect[2],p.view[3]-this.data.parentRect[3]+p.view[1]]),T=s[0]+this.data.parentRect[2]-this.data.parentRect[0],C=s[1];return this.container.style.transformOrigin=`${-T}px ${-C}px`,this.container.style.left=`${T}px`,this.container.style.top=`${C}px`,this.container.appendChild(u.render()),this.container}}class i{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const r=document.createElement("div");r.className="popupWrapper",this.hideElement=this.hideWrapper?r:this.container,this.hideElement.hidden=!0;const o=document.createElement("div");o.className="popup";const u=this.color;u&&(o.style.backgroundColor=e.Util.makeHexColor(0|.7*(255-u[0])+u[0],0|.7*(255-u[1])+u[1],0|.7*(255-u[2])+u[2]));const p=document.createElement("h1");p.dir=this.titleObj.dir,p.textContent=this.titleObj.str,o.appendChild(p);const s=U.PDFDateString.toDateObject(this.modificationDate);if(s){const T=document.createElement("span");T.className="popupDate",T.textContent="{{date}}, {{time}}",T.dataset.l10nId="annotation_date_string",T.dataset.l10nArgs=JSON.stringify({date:s.toLocaleDateString(),time:s.toLocaleTimeString()}),o.appendChild(T)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const T=this._formatContents(this.contentsObj);o.appendChild(T)}else D.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:o}),o.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const T of this.trigger)T.addEventListener("click",this._toggle.bind(this)),T.addEventListener("mouseover",this._show.bind(this,!1)),T.addEventListener("mouseout",this._hide.bind(this,!1));return o.addEventListener("click",this._hide.bind(this,!0)),r.appendChild(o),r}_formatContents({str:t,dir:r}){const o=document.createElement("p");o.className="popupContent",o.dir=r;const u=t.split(/(?:\r\n?|\n)/);for(let p=0,s=u.length;p<s;++p)o.appendChild(document.createTextNode(u[p])),p<s-1&&o.appendChild(document.createElement("br"));return o}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class d extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:r,height:o}=V(t.rect),u=this.svgFactory.create(r,o),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),p.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),p.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),p.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),p.setAttribute("stroke-width",t.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.appendChild(p),this.container.append(u),this._createPopup(p,t),this.container}}class f extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:r,height:o}=V(t.rect),u=this.svgFactory.create(r,o),p=t.borderStyle.width,s=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",p/2),s.setAttribute("y",p/2),s.setAttribute("width",r-p),s.setAttribute("height",o-p),s.setAttribute("stroke-width",p||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),u.appendChild(s),this.container.append(u),this._createPopup(s,t),this.container}}class w extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:r,height:o}=V(t.rect),u=this.svgFactory.create(r,o),p=t.borderStyle.width,s=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",r/2),s.setAttribute("cy",o/2),s.setAttribute("rx",r/2-p/2),s.setAttribute("ry",o/2-p/2),s.setAttribute("stroke-width",p||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),u.appendChild(s),this.container.append(u),this._createPopup(s,t),this.container}}class b extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:r,height:o}=V(t.rect),u=this.svgFactory.create(r,o);let p=[];for(const T of t.vertices)p.push(T.x-t.rect[0]+","+(t.rect[3]-T.y));p=p.join(" ");const s=this.svgFactory.createElement(this.svgElementName);return s.setAttribute("points",p),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),u.appendChild(s),this.container.append(u),this._createPopup(s,t),this.container}}class h extends b{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class E extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:r,height:o}=V(t.rect),u=this.svgFactory.create(r,o);for(const p of t.inkLists){let s=[];for(const C of p)s.push(`${C.x-t.rect[0]},${t.rect[3]-C.y}`);s=s.join(" ");const T=this.svgFactory.createElement(this.svgElementName);T.setAttribute("points",s),T.setAttribute("stroke-width",t.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),this._createPopup(T,t),u.appendChild(T)}return this.container.append(u),this.container}}class j extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class q extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class ee extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Q extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class he extends z{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class fe extends z{constructor(t){super(t,{isRenderable:!0});const{filename:r,content:o}=this.data.file;this.filename=(0,U.getFilenameFromUrl)(r),this.content=o,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:r,content:o})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ue{static render(t){const r=[],o=[];for(const p of t.annotations){if(!p)continue;const{width:s,height:T}=V(p.rect);if(!(s<=0||T<=0)){if(p.annotationType===e.AnnotationType.POPUP){o.push(p);continue}r.push(p)}}o.length&&r.push(...o);const u=t.div;for(const p of r){const s=H.create({data:p,layer:u,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new U.DOMSVGFactory,annotationStorage:t.annotationStorage||new O.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(s.isRenderable){const T=s.render();if(p.hidden&&(T.style.visibility="hidden"),Array.isArray(T))for(const C of T)u.appendChild(C);else s instanceof n?u.prepend(T):u.appendChild(T)}}_assertClassBrand(ue,this,N).call(this,u,t.annotationCanvasMap)}static update(t){const{page:r,viewport:o,annotations:u,annotationCanvasMap:p,div:s}=t,T=o.transform,C=`matrix(${T.join(",")})`;let k,G;for(const X of u){const le=s.querySelectorAll(`[data-annotation-id="${X.id}"]`);if(le)for(const ce of le)if(X.hasOwnCanvas){const ge=e.Util.normalizeRect([X.rect[0],r.view[3]-X.rect[1]+r.view[1],X.rect[2],r.view[3]-X.rect[3]+r.view[1]]);if(!G){k=Math.abs(T[0]||T[1]);const m=T.slice();for(let S=0;S<4;S++)m[S]=Math.sign(m[S]);G=`matrix(${m.join(",")})`}const _e=ge[0]*k,de=ge[1]*k;ce.style.left=`${_e}px`,ce.style.top=`${de}px`,ce.style.transformOrigin=`${-_e}px ${-de}px`,ce.style.transform=G}else ce.style.transform=C}_assertClassBrand(ue,this,N).call(this,s,p),s.hidden=!1}}function N(a,t){if(t){for(const[r,o]of t){const u=a.querySelector(`[data-annotation-id="${r}"]`);if(!u)continue;const{firstChild:p}=u;"CANVAS"===p.nodeName?u.replaceChild(o,p):u.insertBefore(o,p)}t.clear()}}l.AnnotationLayer=ue},(ie,l)=>{function x(U){return Math.floor(255*Math.max(0,Math.min(1,U))).toString(16).padStart(2,"0")}Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0,l.ColorConverters=class e{static CMYK_G([O,$,D,c]){return["G",1-Math.min(1,.3*O+.59*D+.11*$+c)]}static G_CMYK([O]){return["CMYK",0,0,0,1-O]}static G_RGB([O]){return["RGB",O,O,O]}static G_HTML([O]){const $=x(O);return`#${$}${$}${$}`}static RGB_G([O,$,D]){return["G",.3*O+.59*$+.11*D]}static RGB_HTML([O,$,D]){return`#${x(O)}${x($)}${x(D)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([O,$,D,c]){return["RGB",1-Math.min(1,O+c),1-Math.min(1,D+c),1-Math.min(1,$+c)]}static CMYK_HTML(O){return this.RGB_HTML(this.CMYK_RGB(O))}static RGB_CMYK([O,$,D]){const c=1-O,v=1-$,V=1-D;return["CMYK",c,v,V,Math.min(c,v,V)]}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0;var e=x(18);l.XfaLayer=class U{static setupStorage($,D,c,v,V){const H=v.getValue(D,{value:null});switch(c.name){case"textarea":if(null!==H.value&&($.textContent=H.value),"print"===V)break;$.addEventListener("input",z=>{v.setValue(D,{value:z.target.value})});break;case"input":if("radio"===c.attributes.type||"checkbox"===c.attributes.type){if(H.value===c.attributes.xfaOn?$.setAttribute("checked",!0):H.value===c.attributes.xfaOff&&$.removeAttribute("checked"),"print"===V)break;$.addEventListener("change",z=>{v.setValue(D,{value:z.target.getAttribute(z.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==H.value&&$.setAttribute("value",H.value),"print"===V)break;$.addEventListener("input",z=>{v.setValue(D,{value:z.target.value})})}break;case"select":if(null!==H.value)for(const z of c.children)z.attributes.value===H.value&&(z.attributes.selected=!0);$.addEventListener("input",z=>{const B=z.target.options;v.setValue(D,{value:-1===B.selectedIndex?"":B[B.selectedIndex].value})})}}static setAttributes({html:$,element:D,storage:c=null,intent:v,linkService:V}){const{attributes:H}=D,z=$ instanceof HTMLAnchorElement;"radio"===H.type&&(H.name=`${H.name}-${v}`);for(const[B,W]of Object.entries(H))if(null!=W&&"dataId"!==B)if("style"!==B)if("textContent"===B)$.textContent=W;else if("class"===B)W.length&&$.setAttribute(B,W.join(" "));else{if(z&&("href"===B||"newWindow"===B))continue;$.setAttribute(B,W)}else Object.assign($.style,W);z&&V.addLinkAttributes($,H.href,H.newWindow),c&&H.dataId&&this.setupStorage($,H.dataId,D,c)}static render($){const D=$.annotationStorage,c=$.linkService,v=$.xfaHtml,V=$.intent||"display",H=document.createElement(v.name);v.attributes&&this.setAttributes({html:H,element:v,intent:V,linkService:c});const z=[[v,-1,H]],B=$.div;if(B.appendChild(H),$.viewport){const g=`matrix(${$.viewport.transform.join(",")})`;B.style.transform=g}"richText"!==V&&B.setAttribute("class","xfaLayer xfaFont");const W=[];for(;z.length>0;){const[g,L,_]=z[z.length-1];if(L+1===g.children.length){z.pop();continue}const A=g.children[++z[z.length-1][1]];if(null===A)continue;const{name:F}=A;if("#text"===F){const n=document.createTextNode(A.value);W.push(n),_.appendChild(n);continue}let y;if(y=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,F):document.createElement(F),_.appendChild(y),A.attributes&&this.setAttributes({html:y,element:A,storage:D,intent:V,linkService:c}),A.children&&A.children.length>0)z.push([A,-1,y]);else if(A.value){const n=document.createTextNode(A.value);e.XfaText.shouldBuildText(F)&&W.push(n),y.appendChild(n)}}for(const g of B.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:W}}static update($){const D=`matrix(${$.viewport.transform.join(",")})`;$.div.style.transform=D,$.div.hidden=!1}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.renderTextLayer=function _(A){const F=new L({textContent:A.textContent,textContentStream:A.textContentStream,container:A.container,viewport:A.viewport,textDivs:A.textDivs,textContentItemsStr:A.textContentItemsStr,enhanceTextSelection:A.enhanceTextSelection});return F._render(A.timeout),F};var e=x(1);const O=30,D=new Map,c=/^\s+$/g;function V(A,F,y,n){const i=document.createElement("span"),d=A._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==F.str,hasEOL:F.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==F.str,hasEOL:F.hasEOL};A._textDivs.push(i);const P=e.Util.transform(A._viewport.transform,F.transform);let f=Math.atan2(P[1],P[0]);const w=y[F.fontName];w.vertical&&(f+=Math.PI/2);const b=Math.hypot(P[2],P[3]),h=b*function v(A,F){const y=D.get(A);if(y)return y;F.save(),F.font=`30px ${A}`;const n=F.measureText("");let i=n.fontBoundingBoxAscent,d=Math.abs(n.fontBoundingBoxDescent);if(i){F.restore();const f=i/(i+d);return D.set(A,f),f}F.strokeStyle="red",F.clearRect(0,0,O,O),F.strokeText("g",0,0);let P=F.getImageData(0,0,O,O).data;d=0;for(let f=P.length-1-3;f>=0;f-=4)if(P[f]>0){d=Math.ceil(f/4/O);break}F.clearRect(0,0,O,O),F.strokeText("A",0,O),P=F.getImageData(0,0,O,O).data,i=0;for(let f=0,w=P.length;f<w;f+=4)if(P[f]>0){i=O-Math.floor(f/4/O);break}if(F.restore(),i){const f=i/(i+d);return D.set(A,f),f}return D.set(A,.8),.8}(w.fontFamily,n);let E,I;0===f?(E=P[4],I=P[5]-h):(E=P[4]+h*Math.sin(f),I=P[5]-h*Math.cos(f)),i.style.left=`${E}px`,i.style.top=`${I}px`,i.style.fontSize=`${b}px`,i.style.fontFamily=w.fontFamily,i.setAttribute("role","presentation"),i.textContent=F.str,i.dir=F.dir,A._fontInspectorEnabled&&(i.dataset.fontName=F.fontName),0!==f&&(d.angle=f*(180/Math.PI));let j=!1;if(F.str.length>1||A._enhanceTextSelection&&c.test(F.str))j=!0;else if(" "!==F.str&&F.transform[0]!==F.transform[3]){const q=Math.abs(F.transform[0]),ee=Math.abs(F.transform[3]);q!==ee&&Math.max(q,ee)/Math.min(q,ee)>1.5&&(j=!0)}if(j&&(d.canvasWidth=w.vertical?F.height*A._viewport.scale:F.width*A._viewport.scale),A._textDivProperties.set(i,d),A._textContentStream&&A._layoutText(i),A._enhanceTextSelection&&d.hasText){let q=1,ee=0;0!==f&&(q=Math.cos(f),ee=Math.sin(f));const Q=(w.vertical?F.height:F.width)*A._viewport.scale,he=b;let fe,ue;0!==f?(fe=[q,ee,-ee,q,E,I],ue=e.Util.getAxialAlignedBoundingBox([0,0,Q,he],fe)):ue=[E,I,E+Q,I+he],A._bounds.push({left:ue[0],top:ue[1],right:ue[2],bottom:ue[3],div:i,size:[Q,he],m:fe})}}function H(A){if(A._canceled)return;const F=A._textDivs,y=A._capability,n=F.length;if(n>1e5)return A._renderingDone=!0,void y.resolve();if(!A._textContentStream)for(let i=0;i<n;i++)A._layoutText(F[i]);A._renderingDone=!0,y.resolve()}function z(A,F,y){let n=0;for(let i=0;i<y;i++){const d=A[F++];d>0&&(n=n?Math.min(d,n):d)}return n}function g(A,F){F.sort(function(i,d){return i.x1-d.x1||i.index-d.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const i of F){let d=0;for(;d<n.length&&n[d].end<=i.y1;)d++;let P=n.length-1;for(;P>=0&&n[P].start>=i.y2;)P--;let f,w,b,h,E=-1/0;for(b=d;b<=P;b++){let q;f=n[b],w=f.boundary,q=w.x2>i.x1?w.index>i.index?w.x1New:i.x1:void 0===w.x2New?(w.x2+i.x1)/2:w.x2New,q>E&&(E=q)}for(i.x1New=E,b=d;b<=P;b++)f=n[b],w=f.boundary,void 0===w.x2New?w.x2>i.x1?w.index>i.index&&(w.x2New=w.x2):w.x2New=E:w.x2New>E&&(w.x2New=Math.max(E,w.x2));const I=[];let j=null;for(b=d;b<=P;b++){f=n[b],w=f.boundary;const q=w.x2>i.x2?w:i;j===q?I[I.length-1].end=f.end:(I.push({start:f.start,end:f.end,boundary:q}),j=q)}for(n[d].start<i.y1&&(I[0].start=i.y1,I.unshift({start:n[d].start,end:i.y1,boundary:n[d].boundary})),i.y2<n[P].end&&(I[I.length-1].end=i.y2,I.push({start:i.y2,end:n[P].end,boundary:n[P].boundary})),b=d;b<=P;b++){if(f=n[b],w=f.boundary,void 0!==w.x2New)continue;let q=!1;for(h=d-1;!q&&h>=0&&n[h].start>=w.y1;h--)q=n[h].boundary===w;for(h=P+1;!q&&h<n.length&&n[h].end<=w.y2;h++)q=n[h].boundary===w;for(h=0;!q&&h<I.length;h++)q=I[h].boundary===w;q||(w.x2New=E)}Array.prototype.splice.apply(n,[d,P-d+1].concat(I))}for(const i of n){const d=i.boundary;void 0===d.x2New&&(d.x2New=Math.max(A,d.x2))}}class L{constructor({textContent:F,textContentStream:y,container:n,viewport:i,textDivs:d,textContentItemsStr:P,enhanceTextSelection:f}){this._textContent=F,this._textContentStream=y,this._container=n,this._document=n.ownerDocument,this._viewport=i,this._textDivs=d||[],this._textContentItemsStr=P||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(F,y){for(let n=0,i=F.length;n<i;n++)if(void 0!==F[n].str)this._textContentItemsStr.push(F[n].str),V(this,F[n],y,this._layoutTextCtx);else if("beginMarkedContentProps"===F[n].type||"beginMarkedContent"===F[n].type){const d=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==F[n].id&&this._container.setAttribute("id",`${F[n].id}`),d.appendChild(this._container)}else"endMarkedContent"===F[n].type&&(this._container=this._container.parentNode)}_layoutText(F){const y=this._textDivProperties.get(F);let n="";if(0!==y.canvasWidth&&y.hasText){const{fontSize:i,fontFamily:d}=F.style;(i!==this._layoutTextLastFontSize||d!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${i} ${d}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=d);const{width:P}=this._layoutTextCtx.measureText(F.textContent);if(P>0){const f=y.canvasWidth/P;this._enhanceTextSelection&&(y.scale=f),n=`scaleX(${f})`}}if(0!==y.angle&&(n=`rotate(${y.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(y.originalTransform=n),F.style.transform=n),y.hasText&&this._container.appendChild(F),y.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.appendChild(i)}}_render(F=0){const y=(0,e.createPromiseCapability)();let n=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=O,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),y.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const d=()=>{this._reader.read().then(({value:P,done:f})=>{f?y.resolve():(Object.assign(n,P.styles),this._processItems(P.items,n),d())},y.reject)};this._reader=this._textContentStream.getReader(),d()}}y.promise.then(()=>{n=null,F?this._renderTimer=setTimeout(()=>{H(this),this._renderTimer=null},F):H(this)},this._capability.reject)}expandTextDivs(F=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function B(A){const F=A._bounds,y=A._viewport,n=function W(A,F,y){const n=y.map(function(d,P){return{x1:d.left,y1:d.top,x2:d.right,y2:d.bottom,index:P,x1New:void 0,x2New:void 0}});g(A,n);const i=new Array(y.length);for(const d of n)i[d.index]={left:d.x1New,top:0,right:d.x2New,bottom:0};y.map(function(d,P){const f=i[P],w=n[P];w.x1=d.top,w.y1=A-f.right,w.x2=d.bottom,w.y2=A-f.left,w.index=P,w.x1New=void 0,w.x2New=void 0}),g(F,n);for(const d of n){const P=d.index;i[P].top=d.x1New,i[P].bottom=d.x2New}return i}(y.width,y.height,F);for(let i=0;i<n.length;i++){const d=F[i].div,P=A._textDivProperties.get(d);if(0===P.angle){P.paddingLeft=F[i].left-n[i].left,P.paddingTop=F[i].top-n[i].top,P.paddingRight=n[i].right-F[i].right,P.paddingBottom=n[i].bottom-F[i].bottom,A._textDivProperties.set(d,P);continue}const f=n[i],w=F[i],b=w.m,h=b[0],E=b[1],I=[[0,0],[0,w.size[1]],[w.size[0],0],w.size],j=new Float64Array(64);for(let ee=0,Q=I.length;ee<Q;ee++){const he=e.Util.applyTransform(I[ee],b);j[ee+0]=h&&(f.left-he[0])/h,j[ee+4]=E&&(f.top-he[1])/E,j[ee+8]=h&&(f.right-he[0])/h,j[ee+12]=E&&(f.bottom-he[1])/E,j[ee+16]=E&&(f.left-he[0])/-E,j[ee+20]=h&&(f.top-he[1])/h,j[ee+24]=E&&(f.right-he[0])/-E,j[ee+28]=h&&(f.bottom-he[1])/h,j[ee+32]=h&&(f.left-he[0])/-h,j[ee+36]=E&&(f.top-he[1])/-E,j[ee+40]=h&&(f.right-he[0])/-h,j[ee+44]=E&&(f.bottom-he[1])/-E,j[ee+48]=E&&(f.left-he[0])/E,j[ee+52]=h&&(f.top-he[1])/-h,j[ee+56]=E&&(f.right-he[0])/E,j[ee+60]=h&&(f.bottom-he[1])/-h}const q=1+Math.min(Math.abs(h),Math.abs(E));P.paddingLeft=z(j,32,16)/q,P.paddingTop=z(j,48,16)/q,P.paddingRight=z(j,0,16)/q,P.paddingBottom=z(j,16,16)/q,A._textDivProperties.set(d,P)}}(this),this._bounds=null);const y=[],n=[];for(let i=0,d=this._textDivs.length;i<d;i++){const P=this._textDivs[i],f=this._textDivProperties.get(P);f.hasText&&(F?(y.length=0,n.length=0,f.originalTransform&&y.push(f.originalTransform),f.paddingTop>0?(n.push(`${f.paddingTop}px`),y.push(`translateY(${-f.paddingTop}px)`)):n.push(0),n.push(f.paddingRight>0?f.paddingRight/f.scale+"px":0),n.push(f.paddingBottom>0?`${f.paddingBottom}px`:0),f.paddingLeft>0?(n.push(f.paddingLeft/f.scale+"px"),y.push(`translateX(${-f.paddingLeft/f.scale}px)`)):n.push(0),P.style.padding=n.join(" "),y.length&&(P.style.transform=y.join(" "))):(P.style.padding=null,P.style.transform=f.originalTransform))}}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0;var e=x(1),U=x(5),O=x(3);let $=class{constructor(){(0,e.unreachable)("Not implemented: SVGGraphics")}};l.SVGGraphics=$;{let g=function(n){let i=[];const d=[];for(const P of n)"save"!==P.fn?"restore"===P.fn?i=d.pop():i.push(P):(i.push({fnId:92,fn:"group",items:[]}),d.push(i),i=i[i.length-1].items);return i},L=function(n){if(Number.isInteger(n))return n.toString();const i=n.toFixed(10);let d=i.length-1;if("0"!==i[d])return i;do{d--}while("0"===i[d]);return i.substring(0,"."===i[d]?d:d+1)},_=function(n){if(0===n[4]&&0===n[5]){if(0===n[1]&&0===n[2])return 1===n[0]&&1===n[3]?"":`scale(${L(n[0])} ${L(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const i=180*Math.acos(n[0])/Math.PI;return`rotate(${L(i)})`}}else if(1===n[0]&&0===n[1]&&0===n[2]&&1===n[3])return`translate(${L(n[4])} ${L(n[5])})`;return`matrix(${L(n[0])} ${L(n[1])} ${L(n[2])} ${L(n[3])} ${L(n[4])} ${L(n[5])})`};const D={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",V=["butt","round","square"],H=["miter","round","bevel"],z=function(n,i="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([n],{type:i}));const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let f=`data:${i};base64,`;for(let w=0,b=n.length;w<b;w+=3){const h=255&n[w],E=255&n[w+1],I=255&n[w+2];f+=P[h>>2]+P[(3&h)<<4|E>>4]+P[w+1<b?(15&E)<<2|I>>6:64]+P[w+2<b?63&I:64]}return f},B=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),d=new Int32Array(256);for(let I=0;I<256;I++){let j=I;for(let q=0;q<8;q++)j=1&j?3988292384^j>>1&2147483647:j>>1&2147483647;d[I]=j}function f(I,j,q,ee){let Q=ee;const he=j.length;q[Q]=he>>24&255,q[Q+1]=he>>16&255,q[Q+2]=he>>8&255,q[Q+3]=255&he,Q+=4,q[Q]=255&I.charCodeAt(0),q[Q+1]=255&I.charCodeAt(1),q[Q+2]=255&I.charCodeAt(2),q[Q+3]=255&I.charCodeAt(3),Q+=4,q.set(j,Q),Q+=j.length;const fe=function P(I,j,q){let ee=-1;for(let Q=j;Q<q;Q++)ee=ee>>>8^d[255&(ee^I[Q])];return~ee}(q,ee+4,Q);q[Q]=fe>>24&255,q[Q+1]=fe>>16&255,q[Q+2]=fe>>8&255,q[Q+3]=255&fe}function h(I){let j=I.length;const q=65535,ee=Math.ceil(j/q),Q=new Uint8Array(2+j+5*ee+4);let he=0;Q[he++]=120,Q[he++]=156;let fe=0;for(;j>q;)Q[he++]=0,Q[he++]=255,Q[he++]=255,Q[he++]=0,Q[he++]=0,Q.set(I.subarray(fe,fe+q),he),he+=q,fe+=q,j-=q;Q[he++]=1,Q[he++]=255&j,Q[he++]=j>>8&255,Q[he++]=255&~j,Q[he++]=(65535&~j)>>8&255,Q.set(I.subarray(fe),he),he+=I.length-fe;const ue=function w(I,j,q){let ee=1,Q=0;for(let he=j;he<q;++he)ee=(ee+(255&I[he]))%65521,Q=(Q+ee)%65521;return Q<<16|ee}(I,0,I.length);return Q[he++]=ue>>24&255,Q[he++]=ue>>16&255,Q[he++]=ue>>8&255,Q[he++]=255&ue,Q}return function(j,q,ee){return function E(I,j,q,ee){const Q=I.width,he=I.height;let fe,ue,N;const a=I.data;switch(j){case e.ImageKind.GRAYSCALE_1BPP:ue=0,fe=1,N=Q+7>>3;break;case e.ImageKind.RGB_24BPP:ue=2,fe=8,N=3*Q;break;case e.ImageKind.RGBA_32BPP:ue=6,fe=8,N=4*Q;break;default:throw new Error("invalid format")}const t=new Uint8Array((1+N)*he);let r=0,o=0;for(let k=0;k<he;++k)t[r++]=0,t.set(a.subarray(o,o+N),r),o+=N,r+=N;if(j===e.ImageKind.GRAYSCALE_1BPP&&ee){r=0;for(let k=0;k<he;k++){r++;for(let G=0;G<N;G++)t[r++]^=255}}const u=new Uint8Array([Q>>24&255,Q>>16&255,Q>>8&255,255&Q,he>>24&255,he>>16&255,he>>8&255,255&he,fe,ue,0,0,0]),p=function b(I){if(!O.isNodeJS)return h(I);try{let j;j=parseInt(process.versions.node)>=8?I:Buffer.from(I);const q=__webpack_require__(82787).deflateSync(j,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(j){(0,e.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return h(I)}(t),T=new Uint8Array(n.length+36+u.length+p.length);let C=0;return T.set(n,C),C+=n.length,f("IHDR",u,T,C),C+=12+u.length,f("IDATA",p,T,C),C+=12+p.length,f("IEND",new Uint8Array(0),T,C),z(T,"image/png",q)}(j,void 0===j.kind?e.ImageKind.GRAYSCALE_1BPP:j.kind,q,ee)}}();class W{constructor(){this.fontSizeScale=1,this.fontWeight=D.fontWeight,this.fontSize=0,this.textMatrix=e.IDENTITY_MATRIX,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=e.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=D.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,d){this.x=i,this.y=d}}let A=0,F=0,y=0;l.SVGGraphics=$=class{constructor(n,i,d=!1){this.svgFactory=new U.DOMSVGFactory,this.current=new W,this.transformMatrix=e.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const P in e.OPS)this._operatorIdMapping[e.OPS[P]]=P}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const i=n.fnArray,d=n.argsArray;for(let P=0,f=i.length;P<f;P++)if(i[P]===e.OPS.dependency)for(const w of d[P]){const b=w.startsWith("g_")?this.commonObjs:this.objs,h=new Promise(E=>{b.get(w,E)});this.current.dependencies.push(h)}return Promise.all(this.current.dependencies)}transform(n,i,d,P,f,w){this.transformMatrix=e.Util.transform(this.transformMatrix,[n,i,d,P,f,w]),this.tgrp=null}getSVG(n,i){this.viewport=i;const d=this._initialize(i);return this.loadDependencies(n).then(()=>(this.transformMatrix=e.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),d))}convertOpList(n){const i=this._operatorIdMapping,d=n.argsArray,P=n.fnArray,f=[];for(let w=0,b=P.length;w<b;w++){const h=P[w];f.push({fnId:h,fn:i[h],args:d[w]})}return g(f)}executeOpTree(n){for(const i of n){const d=i.fn,f=i.args;switch(0|i.fnId){case e.OPS.beginText:this.beginText();break;case e.OPS.dependency:break;case e.OPS.setLeading:this.setLeading(f);break;case e.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case e.OPS.setFont:this.setFont(f);break;case e.OPS.showText:case e.OPS.showSpacedText:this.showText(f[0]);break;case e.OPS.endText:this.endText();break;case e.OPS.moveText:this.moveText(f[0],f[1]);break;case e.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case e.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case e.OPS.setHScale:this.setHScale(f[0]);break;case e.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case e.OPS.setTextRise:this.setTextRise(f[0]);break;case e.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case e.OPS.setLineWidth:this.setLineWidth(f[0]);break;case e.OPS.setLineJoin:this.setLineJoin(f[0]);break;case e.OPS.setLineCap:this.setLineCap(f[0]);break;case e.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case e.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case e.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case e.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case e.OPS.setFillColorN:this.setFillColorN(f);break;case e.OPS.shadingFill:this.shadingFill(f[0]);break;case e.OPS.setDash:this.setDash(f[0],f[1]);break;case e.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case e.OPS.setFlatness:this.setFlatness(f[0]);break;case e.OPS.setGState:this.setGState(f[0]);break;case e.OPS.fill:this.fill();break;case e.OPS.eoFill:this.eoFill();break;case e.OPS.stroke:this.stroke();break;case e.OPS.fillStroke:this.fillStroke();break;case e.OPS.eoFillStroke:this.eoFillStroke();break;case e.OPS.clip:this.clip("nonzero");break;case e.OPS.eoClip:this.clip("evenodd");break;case e.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case e.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case e.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case e.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case e.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case e.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case e.OPS.closePath:this.closePath();break;case e.OPS.closeStroke:this.closeStroke();break;case e.OPS.closeFillStroke:this.closeFillStroke();break;case e.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case e.OPS.nextLine:this.nextLine();break;case e.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case e.OPS.constructPath:this.constructPath(f[0],f[1]);break;case e.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,e.warn)(`Unimplemented operator ${d}`)}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,i,d,P,f,w){const b=this.current;b.textMatrix=b.lineMatrix=[n,i,d,P,f,w],b.textMatrixScale=Math.hypot(n,i),b.x=b.lineX=0,b.y=b.lineY=0,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${L(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",L(-b.y)),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtElement.appendChild(b.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=e.IDENTITY_MATRIX,n.lineMatrix=e.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,i){const d=this.current;d.x=d.lineX+=n,d.y=d.lineY+=i,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${L(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",L(-d.y))}showText(n){const i=this.current,d=i.font,P=i.fontSize;if(0===P)return;const f=i.fontSizeScale,w=i.charSpacing,b=i.wordSpacing,h=i.fontDirection,E=i.textHScale*h,I=d.vertical,j=I?1:-1,q=d.defaultVMetrics,ee=P*i.fontMatrix[0];let Q=0;for(const ue of n){if(null===ue){Q+=h*b;continue}if("number"==typeof ue){Q+=j*ue*P/1e3;continue}const N=(ue.isSpace?b:0)+w,a=ue.fontChar;let t,r,u,o=ue.width;if(I){let p;const s=ue.vmetric||q;p=ue.vmetric?s[1]:.5*o,p=-p*ee,o=s?-s[0]:o,t=p/f,r=(Q+s[2]*ee)/f}else t=Q/f,r=0;(ue.isInFont||d.missingFile)&&(i.xcoords.push(i.x+t),I&&i.ycoords.push(-i.y+r),i.tspan.textContent+=a),u=I?o*ee-N*h:o*ee+N*h,Q+=u}i.tspan.setAttributeNS(null,"x",i.xcoords.map(L).join(" ")),i.tspan.setAttributeNS(null,"y",I?i.ycoords.map(L).join(" "):L(-i.y)),I?i.y-=Q:i.x+=Q*E,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${L(i.fontSize)}px`),i.fontStyle!==D.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==D.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const he=i.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;he===e.TextRenderingMode.FILL||he===e.TextRenderingMode.FILL_STROKE?(i.fillColor!==D.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===e.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(he===e.TextRenderingMode.STROKE||he===e.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let fe=i.textMatrix;0!==i.textRise&&(fe=fe.slice(),fe[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${_(fe)} scale(${L(E)}, -1)`),i.txtElement.setAttributeNS(c,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(n,i){this.setLeading(-i),this.moveText(n,i)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=z(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${i}); }\n`}setFont(n){const i=this.current,d=this.commonObjs.get(n[0]);let P=n[1];i.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),i.fontMatrix=d.fontMatrix||e.FONT_IDENTITY_MATRIX;let f="normal";d.black?f="900":d.bold&&(f="bold");const w=d.italic?"italic":"normal";P<0?(P=-P,i.fontDirection=-1):i.fontDirection=1,i.fontSize=P,i.fontFamily=d.loadedName,i.fontWeight=f,i.fontStyle=w,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",L(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&e.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=V[n]}setLineJoin(n){this.current.lineJoin=H[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,i,d){this.current.strokeColor=e.Util.makeHexColor(n,i,d)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,i,d){this.current.fillColor=e.Util.makeHexColor(n,i,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const i=this.viewport.width,d=this.viewport.height,P=e.Util.inverseTransform(this.transformMatrix),f=e.Util.applyTransform([0,0],P),w=e.Util.applyTransform([0,d],P),b=e.Util.applyTransform([i,0],P),h=e.Util.applyTransform([i,d],P),E=Math.min(f[0],w[0],b[0],h[0]),I=Math.min(f[1],w[1],b[1],h[1]),j=Math.max(f[0],w[0],b[0],h[0]),q=Math.max(f[1],w[1],b[1],h[1]),ee=this.svgFactory.createElement("svg:rect");ee.setAttributeNS(null,"x",E),ee.setAttributeNS(null,"y",I),ee.setAttributeNS(null,"width",j-E),ee.setAttributeNS(null,"height",q-I),ee.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&ee.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(ee)}_makeColorN_Pattern(n){return"TilingPattern"===n[0]?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const i=n[1],d=n[2],P=n[3]||e.IDENTITY_MATRIX,[f,w,b,h]=n[4],E=n[5],I=n[6],j=n[7],q="shading"+y++,[ee,Q,he,fe]=e.Util.normalizeRect([...e.Util.applyTransform([f,w],P),...e.Util.applyTransform([b,h],P)]),[ue,N]=e.Util.singularValueDecompose2dScale(P),a=E*ue,t=I*N,r=this.svgFactory.createElement("svg:pattern");r.setAttributeNS(null,"id",q),r.setAttributeNS(null,"patternUnits","userSpaceOnUse"),r.setAttributeNS(null,"width",a),r.setAttributeNS(null,"height",t),r.setAttributeNS(null,"x",`${ee}`),r.setAttributeNS(null,"y",`${Q}`);const o=this.svg,u=this.transformMatrix,p=this.current.fillColor,s=this.current.strokeColor,T=this.svgFactory.create(he-ee,fe-Q);if(this.svg=T,this.transformMatrix=P,2===j){const C=e.Util.makeHexColor(...i);this.current.fillColor=C,this.current.strokeColor=C}return this.executeOpTree(this.convertOpList(d)),this.svg=o,this.transformMatrix=u,this.current.fillColor=p,this.current.strokeColor=s,r.appendChild(T.childNodes[0]),this.defs.appendChild(r),`url(#${q})`}_makeShadingPattern(n){switch("string"==typeof n&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const i="shading"+y++,d=n[3];let P;switch(n[1]){case"axial":const f=n[4],w=n[5];P=this.svgFactory.createElement("svg:linearGradient"),P.setAttributeNS(null,"id",i),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",f[0]),P.setAttributeNS(null,"y1",f[1]),P.setAttributeNS(null,"x2",w[0]),P.setAttributeNS(null,"y2",w[1]);break;case"radial":const b=n[4],h=n[5],E=n[6],I=n[7];P=this.svgFactory.createElement("svg:radialGradient"),P.setAttributeNS(null,"id",i),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",h[0]),P.setAttributeNS(null,"cy",h[1]),P.setAttributeNS(null,"r",I),P.setAttributeNS(null,"fx",b[0]),P.setAttributeNS(null,"fy",b[1]),P.setAttributeNS(null,"fr",E);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const f of d){const w=this.svgFactory.createElement("svg:stop");w.setAttributeNS(null,"offset",f[0]),w.setAttributeNS(null,"stop-color",f[1]),P.appendChild(w)}return this.defs.appendChild(P),`url(#${i})`;case"Mesh":return(0,e.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,i){this.current.dashArray=n,this.current.dashPhase=i}constructPath(n,i){const d=this.current;let P=d.x,f=d.y,w=[],b=0;for(const h of n)switch(0|h){case e.OPS.rectangle:P=i[b++],f=i[b++];const j=P+i[b++],q=f+i[b++];w.push("M",L(P),L(f),"L",L(j),L(f),"L",L(j),L(q),"L",L(P),L(q),"Z");break;case e.OPS.moveTo:P=i[b++],f=i[b++],w.push("M",L(P),L(f));break;case e.OPS.lineTo:P=i[b++],f=i[b++],w.push("L",L(P),L(f));break;case e.OPS.curveTo:P=i[b+4],f=i[b+5],w.push("C",L(i[b]),L(i[b+1]),L(i[b+2]),L(i[b+3]),L(P),L(f)),b+=6;break;case e.OPS.curveTo2:w.push("C",L(P),L(f),L(i[b]),L(i[b+1]),L(i[b+2]),L(i[b+3])),P=i[b+2],f=i[b+3],b+=4;break;case e.OPS.curveTo3:P=i[b+2],f=i[b+3],w.push("C",L(i[b]),L(i[b+1]),L(P),L(f),L(P),L(f)),b+=4;break;case e.OPS.closePath:w.push("Z")}w=w.join(" "),d.path&&n.length>0&&n[0]!==e.OPS.rectangle&&n[0]!==e.OPS.moveTo?w=d.path.getAttributeNS(null,"d")+w:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(d.path)),d.path.setAttributeNS(null,"d",w),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(P,f)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element)return void(this.pendingClip=null);const i="clippath"+A++,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",i),d.setAttributeNS(null,"transform",_(this.transformMatrix));const P=n.element.cloneNode(!0);if(P.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,d.appendChild(P),this.defs.appendChild(d),n.activeClipUrl){n.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;d.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const i=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",i)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[i,d]of n)switch(i){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,e.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,i=1){const d=this.current;let P=d.dashArray;1!==i&&P.length>0&&(P=P.map(function(f){return i*f})),n.setAttributeNS(null,"stroke",d.strokeColor),n.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",L(d.miterLimit)),n.setAttributeNS(null,"stroke-linecap",d.lineCap),n.setAttributeNS(null,"stroke-linejoin",d.lineJoin),n.setAttributeNS(null,"stroke-width",L(i*d.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",P.map(L).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",L(i*d.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const i=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);i?this.paintInlineImageXObject(i):(0,e.warn)(`Dependent image with object ID ${n} is not ready yet`)}paintInlineImageXObject(n,i){const d=n.width,P=n.height,f=B(n,this.forceDataSchema,!!i),w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",L(d)),w.setAttributeNS(null,"height",L(P)),this.current.element=w,this.clip("nonzero");const b=this.svgFactory.createElement("svg:image");b.setAttributeNS(v,"xlink:href",f),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y",L(-P)),b.setAttributeNS(null,"width",L(d)+"px"),b.setAttributeNS(null,"height",L(P)+"px"),b.setAttributeNS(null,"transform",`scale(${L(1/d)} ${L(-1/P)})`),i?i.appendChild(b):this._ensureTransformGroup().appendChild(b)}paintImageMaskXObject(n){const i=this.current,d=n.width,P=n.height,f=i.fillColor;i.maskId="mask"+F++;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",i.maskId);const b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width",L(d)),b.setAttributeNS(null,"height",L(P)),b.setAttributeNS(null,"fill",f),b.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(w),this._ensureTransformGroup().appendChild(b),this.paintInlineImageXObject(n,w)}paintFormXObjectBegin(n,i){if(Array.isArray(n)&&6===n.length&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i){const d=i[2]-i[0],P=i[3]-i[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",i[0]),f.setAttributeNS(null,"y",i[1]),f.setAttributeNS(null,"width",L(d)),f.setAttributeNS(null,"height",L(P)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const i=this.svgFactory.create(n.width,n.height),d=this.svgFactory.createElement("svg:defs");i.appendChild(d),this.defs=d;const P=this.svgFactory.createElement("svg:g");return P.setAttributeNS(null,"transform",_(n.transform)),i.appendChild(P),this.svg=P,i}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0;var e=x(1),U=x(26);const O=__webpack_require__(23237),$=__webpack_require__(97492),D=__webpack_require__(31815),c=__webpack_require__(66671),v=/^file:\/\/\/[a-zA-Z]:\//;l.PDFNodeStream=class H{constructor(y){this.source=y,this.url=function V(F){const y=c.parse(F);return"file:"===y.protocol||y.host?y:/^[a-z]:[/\\]/i.test(F)?c.parse(`file:///${F}`):(y.host||(y.protocol="file:"),y)}(y.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new g(this),this._fullRequestReader}getRangeReader(y,n){if(n<=this._progressiveDataLength)return null;const i=this.isFsUrl?new A(this,y,n):new L(this,y,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const n of this._rangeRequestReaders.slice(0))n.cancel(y)}};class z{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=y.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var y=this;return _asyncToGenerator(function*(){if(yield y._readCapability.promise,y._done)return{value:void 0,done:!0};if(y._storedError)throw y._storedError;const n=y._readableStream.read();return null===n?(y._readCapability=(0,e.createPromiseCapability)(),y.read()):(y._loaded+=n.length,y.onProgress&&y.onProgress({loaded:y._loaded,total:y._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(y){this._readableStream?this._readableStream.destroy(y):this._error(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class B{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!y.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var y=this;return _asyncToGenerator(function*(){if(yield y._readCapability.promise,y._done)return{value:void 0,done:!0};if(y._storedError)throw y._storedError;const n=y._readableStream.read();return null===n?(y._readCapability=(0,e.createPromiseCapability)(),y.read()):(y._loaded+=n.length,y.onProgress&&y.onProgress({loaded:y._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(y){this._readableStream?this._readableStream.destroy(y):this._error(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(F,y){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:y}}class g extends z{constructor(y){super(y);const n=i=>{if(404===i.statusCode){const w=new e.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=w,void this._headersCapability.reject(w)}this._headersCapability.resolve(),this._setReadableStream(i);const d=w=>this._readableStream.headers[w.toLowerCase()],{allowRangeRequests:P,suggestedLength:f}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:y.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=f||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(d)};this._request=null,this._request="http:"===this._url.protocol?$.request(W(this._url,y.httpHeaders),n):D.request(W(this._url,y.httpHeaders),n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class L extends B{constructor(y,n,i){super(y),this._httpHeaders={};for(const P in y.httpHeaders){const f=y.httpHeaders[P];typeof f>"u"||(this._httpHeaders[P]=f)}this._httpHeaders.Range=`bytes=${n}-${i-1}`;const d=P=>{if(404!==P.statusCode)this._setReadableStream(P);else{const f=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f}};this._request=null,this._request="http:"===this._url.protocol?$.request(W(this._url,this._httpHeaders),d):D.request(W(this._url,this._httpHeaders),d),this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class _ extends z{constructor(y){super(y);let n=decodeURIComponent(this._url.path);v.test(this._url.href)&&(n=n.replace(/^\//,"")),O.lstat(n,(i,d)=>{if(i)return"ENOENT"===i.code&&(i=new e.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=d.size,this._setReadableStream(O.createReadStream(n)),this._headersCapability.resolve()})}}class A extends B{constructor(y,n,i){super(y);let d=decodeURIComponent(this._url.path);v.test(this._url.href)&&(d=d.replace(/^\//,"")),this._setReadableStream(O.createReadStream(d,{start:n,end:i-1}))}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=function c(V,H){return 404===V||0===V&&H.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+H+'".'):new e.UnexpectedResponseException(`Unexpected server response (${V}) while retrieving PDF "${H}".`,V)},l.extractFilenameFromHeader=function D(V){const H=V("Content-Disposition");if(H){let z=(0,U.getFilenameFromContentDispositionHeader)(H);if(z.includes("%"))try{z=decodeURIComponent(z)}catch{}if((0,O.isPdfFile)(z))return z}return null},l.validateRangeRequestCapabilities=function $({getResponseHeader:V,isHttp:H,rangeChunkSize:z,disableRange:B}){const W={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(V("Content-Length"),10);return!Number.isInteger(g)||(W.suggestedLength=g,g<=2*z)||B||!H||"bytes"!==V("Accept-Ranges")||"identity"!==(V("Content-Encoding")||"identity")||(W.allowRangeRequests=!0),W},l.validateResponseStatus=function v(V){return 200===V||206===V};var e=x(1),U=x(27),O=x(5)},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=function U(O){let $=!0,D=c("filename\\*","i").exec(O);if(D){D=D[1];let g=z(D);return g=unescape(g),g=B(g),g=W(g),V(g)}if(D=function H(g){const L=[];let _;const A=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(_=A.exec(g));){let[,y,n,i]=_;if(y=parseInt(y,10),y in L){if(0===y)break}else L[y]=[n,i]}const F=[];for(let y=0;y<L.length&&y in L;++y){let[n,i]=L[y];i=z(i),n&&(i=unescape(i),0===y&&(i=B(i))),F.push(i)}return F.join("")}(O),D)return V(W(D));if(D=c("filename","i").exec(O),D){D=D[1];let g=z(D);return g=W(g),V(g)}function c(g,L){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',L)}function v(g,L){if(g){if(!/^[\x00-\xFF]+$/.test(L))return L;try{const _=new TextDecoder(g,{fatal:!0}),A=(0,e.stringToBytes)(L);L=_.decode(A),$=!1}catch{}}return L}function V(g){return $&&/[\x80-\xff]/.test(g)&&(g=v("utf-8",g),$&&(g=v("iso-8859-1",g))),g}function z(g){if(g.startsWith('"')){const L=g.slice(1).split('\\"');for(let _=0;_<L.length;++_){const A=L[_].indexOf('"');-1!==A&&(L[_]=L[_].slice(0,A),L.length=_+1),L[_]=L[_].replace(/\\(.)/g,"$1")}g=L.join('"')}return g}function B(g){const L=g.indexOf("'");return-1===L?g:v(g.slice(0,L),g.slice(L+1).replace(/^[^']*'/,""))}function W(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(L,_,A,F){if("q"===A||"Q"===A)return v(_,F=(F=F.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(y,n){return String.fromCharCode(parseInt(n,16))}));try{F=atob(F)}catch{}return v(_,F)})}return""};var e=x(1)},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0;var e=x(1),U=x(26);class c{constructor(B,W={}){this.url=B,this.isHttp=/^https?:/i.test(B),this.httpHeaders=this.isHttp&&W.httpHeaders||Object.create(null),this.withCredentials=W.withCredentials||!1,this.getXhr=W.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(B,W,g){const L={begin:B,end:W};for(const _ in g)L[_]=g[_];return this.request(L)}requestFull(B){return this.request(B)}request(B){const W=this.getXhr(),g=this.currXhrId++,L=this.pendingRequests[g]={xhr:W};W.open("GET",this.url),W.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const A=this.httpHeaders[_];typeof A>"u"||W.setRequestHeader(_,A)}return this.isHttp&&"begin"in B&&"end"in B?(W.setRequestHeader("Range",`bytes=${B.begin}-${B.end-1}`),L.expectedStatus=206):L.expectedStatus=200,W.responseType="arraybuffer",B.onError&&(W.onerror=function(_){B.onError(W.status)}),W.onreadystatechange=this.onStateChange.bind(this,g),W.onprogress=this.onProgress.bind(this,g),L.onHeadersReceived=B.onHeadersReceived,L.onDone=B.onDone,L.onError=B.onError,L.onProgress=B.onProgress,W.send(null),g}onProgress(B,W){const g=this.pendingRequests[B];g&&g.onProgress?.(W)}onStateChange(B,W){const g=this.pendingRequests[B];if(!g)return;const L=g.xhr;if(L.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),4!==L.readyState||!(B in this.pendingRequests))return;if(delete this.pendingRequests[B],0===L.status&&this.isHttp)return void g.onError?.(L.status);const _=L.status||200;if((200!==_||206!==g.expectedStatus)&&_!==g.expectedStatus)return void g.onError?.(L.status);const F=function D(z){const B=z.response;return"string"!=typeof B?B:(0,e.stringToBytes)(B).buffer}(L);if(206===_){const y=L.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);g.onDone({begin:parseInt(n[1],10),chunk:F})}else F?g.onDone({begin:0,chunk:F}):g.onError?.(L.status)}getRequestXhr(B){return this.pendingRequests[B].xhr}isPendingRequest(B){return B in this.pendingRequests}abortRequest(B){const W=this.pendingRequests[B].xhr;delete this.pendingRequests[B],W.abort()}}l.PDFNetworkStream=class v{constructor(B){this._source=B,this._manager=new c(B.url,{httpHeaders:B.httpHeaders,withCredentials:B.withCredentials}),this._rangeChunkSize=B.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(B){const W=this._rangeRequestReaders.indexOf(B);W>=0&&this._rangeRequestReaders.splice(W,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new V(this._manager,this._source),this._fullRequestReader}getRangeReader(B,W){const g=new H(this._manager,B,W);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(B){this._fullRequestReader?.cancel(B);for(const W of this._rangeRequestReaders.slice(0))W.cancel(B)}};class V{constructor(B,W){this._manager=B;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=W.url,this._fullRequestId=B.requestFull(g),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._contentLength=W.length,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const B=this._fullRequestId,W=this._manager.getRequestXhr(B),g=A=>W.getResponseHeader(A),{allowRangeRequests:L,suggestedLength:_}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});L&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(B),this._headersReceivedCapability.resolve()}_onDone(B){if(B&&(this._requests.length>0?this._requests.shift().resolve({value:B.chunk,done:!1}):this._cachedChunks.push(B.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(B){this._storedError=(0,U.createResponseStatusError)(B,this._url),this._headersReceivedCapability.reject(this._storedError);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(B){this.onProgress?.({loaded:B.loaded,total:B.lengthComputable?B.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var B=this;return _asyncToGenerator(function*(){if(B._storedError)throw B._storedError;if(B._cachedChunks.length>0)return{value:B._cachedChunks.shift(),done:!1};if(B._done)return{value:void 0,done:!0};const W=(0,e.createPromiseCapability)();return B._requests.push(W),W.promise})()}cancel(B){this._done=!0,this._headersReceivedCapability.reject(B);for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H{constructor(B,W,g){this._manager=B;const L={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=B.url,this._requestId=B.requestRange(W,g,L),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(B){const W=B.chunk;this._requests.length>0?this._requests.shift().resolve({value:W,done:!1}):this._queuedChunk=W,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(B){this._storedError=(0,U.createResponseStatusError)(B,this._url);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(B){this.isStreamingSupported||this.onProgress?.({loaded:B.loaded})}get isStreamingSupported(){return!1}read(){var B=this;return _asyncToGenerator(function*(){if(B._storedError)throw B._storedError;if(null!==B._queuedChunk){const g=B._queuedChunk;return B._queuedChunk=null,{value:g,done:!1}}if(B._done)return{value:void 0,done:!0};const W=(0,e.createPromiseCapability)();return B._requests.push(W),W.promise})()}cancel(B){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ie,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0;var e=x(1),U=x(26);function O(V,H,z){return{method:"GET",headers:V,signal:z?.signal,mode:"cors",credentials:H?"include":"same-origin",redirect:"follow"}}function $(V){const H=new Headers;for(const z in V){const B=V[z];typeof B>"u"||H.append(z,B)}return H}l.PDFFetchStream=class D{constructor(H){this.source=H,this.isHttp=/^https?:/i.test(H.url),this.httpHeaders=this.isHttp&&H.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(H,z){if(z<=this._progressiveDataLength)return null;const B=new v(this,H,z);return this._rangeRequestReaders.push(B),B}cancelAllRequests(H){this._fullRequestReader&&this._fullRequestReader.cancel(H);for(const z of this._rangeRequestReaders.slice(0))z.cancel(H)}};class c{constructor(H){this._stream=H,this._reader=null,this._loaded=0,this._filename=null;const z=H.source;this._withCredentials=z.withCredentials||!1,this._contentLength=z.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=z.disableRange||!1,this._rangeChunkSize=z.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!z.disableStream,this._isRangeSupported=!z.disableRange,this._headers=$(this._stream.httpHeaders);const B=z.url;fetch(B,O(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,U.validateResponseStatus)(W.status))throw(0,U.createResponseStatusError)(W.status,B);this._reader=W.body.getReader(),this._headersCapability.resolve();const g=A=>W.headers.get(A),{allowRangeRequests:L,suggestedLength:_}=(0,U.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=L,this._contentLength=_||this._contentLength,this._filename=(0,U.extractFilenameFromHeader)(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var H=this;return _asyncToGenerator(function*(){yield H._headersCapability.promise;const{value:z,done:B}=yield H._reader.read();return B?{value:z,done:B}:(H._loaded+=z.byteLength,H.onProgress&&H.onProgress({loaded:H._loaded,total:H._contentLength}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(H){this._reader&&this._reader.cancel(H),this._abortController&&this._abortController.abort()}}class v{constructor(H,z,B){this._stream=H,this._reader=null,this._loaded=0;const W=H.source;this._withCredentials=W.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!W.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=$(this._stream.httpHeaders),this._headers.append("Range",`bytes=${z}-${B-1}`);const g=W.url;fetch(g,O(this._headers,this._withCredentials,this._abortController)).then(L=>{if(!(0,U.validateResponseStatus)(L.status))throw(0,U.createResponseStatusError)(L.status,g);this._readCapability.resolve(),this._reader=L.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var H=this;return _asyncToGenerator(function*(){yield H._readCapability.promise;const{value:z,done:B}=yield H._reader.read();return B?{value:z,done:B}:(H._loaded+=z.byteLength,H.onProgress&&H.onProgress({loaded:H._loaded}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(H){this._reader&&this._reader.cancel(H),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(ie){var l=__webpack_module_cache__[ie];if(void 0!==l)return l.exports;var x=__webpack_module_cache__[ie]={exports:{}};return __webpack_modules__[ie](x,x.exports,__w_pdfjs_require__),x.exports}var __nested_webpack_exports__={};return(()=>{var ie=__nested_webpack_exports__;Object.defineProperty(ie,"__esModule",{value:!0}),Object.defineProperty(ie,"AnnotationLayer",{enumerable:!0,get:function(){return U.AnnotationLayer}}),Object.defineProperty(ie,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(ie,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(ie,"GlobalWorkerOptions",{enumerable:!0,get:function(){return O.GlobalWorkerOptions}}),Object.defineProperty(ie,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(ie,"LoopbackPort",{enumerable:!0,get:function(){return x.LoopbackPort}}),Object.defineProperty(ie,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(ie,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(ie,"PDFDataRangeTransport",{enumerable:!0,get:function(){return x.PDFDataRangeTransport}}),Object.defineProperty(ie,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(ie,"PDFWorker",{enumerable:!0,get:function(){return x.PDFWorker}}),Object.defineProperty(ie,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(ie,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(ie,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(ie,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(ie,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(ie,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return l.UNSUPPORTED_FEATURES}}),Object.defineProperty(ie,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(ie,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(ie,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(ie,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(ie,"build",{enumerable:!0,get:function(){return x.build}}),Object.defineProperty(ie,"createPromiseCapability",{enumerable:!0,get:function(){return l.createPromiseCapability}}),Object.defineProperty(ie,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(ie,"getDocument",{enumerable:!0,get:function(){return x.getDocument}}),Object.defineProperty(ie,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(ie,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(ie,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(ie,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(ie,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(ie,"renderTextLayer",{enumerable:!0,get:function(){return D.renderTextLayer}}),Object.defineProperty(ie,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(ie,"version",{enumerable:!0,get:function(){return x.version}});var l=__w_pdfjs_require__(1),x=__w_pdfjs_require__(4),e=__w_pdfjs_require__(5),U=__w_pdfjs_require__(20),O=__w_pdfjs_require__(13),$=__w_pdfjs_require__(3),D=__w_pdfjs_require__(23),c=__w_pdfjs_require__(24),v=__w_pdfjs_require__(22);if($.isNodeJS){const{PDFNodeStream:z}=__w_pdfjs_require__(25);(0,x.setPDFNetworkStreamFactory)(B=>new z(B))}else{const{PDFNetworkStream:z}=__w_pdfjs_require__(28),{PDFFetchStream:B}=__w_pdfjs_require__(29);(0,x.setPDFNetworkStreamFactory)(W=>(0,e.isValidFetchUrl)(W.url)?new B(W):new z(W))}})(),__nested_webpack_exports__})(),module.exports=x()},33876:function(ie,l,x){var z,e=x(93831).default,U=x(7920).default,O=x(80816).default,$=x(43723).default,D=x(45804).default,c=x(18188).default,v=x(75453).default;z=()=>(()=>{"use strict";var V=[,(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DefaultXfaLayerFactory=g.DefaultTextLayerFactory=g.DefaultStructTreeLayerFactory=g.DefaultAnnotationLayerFactory=void 0;var _=L(2),A=L(4),F=L(5),y=L(7),n=L(8),i=L(9);g.DefaultAnnotationLayerFactory=class d{createAnnotationLayerBuilder(h,E,I=null,j="",q=!0,ee=A.NullL10n,Q=!1,he=null,fe=null,ue=null,N=null){return new _.AnnotationLayerBuilder({pageDiv:h,pdfPage:E,imageResourcesPath:j,renderForms:q,linkService:new F.SimpleLinkService,l10n:ee,annotationStorage:I,enableScripting:Q,hasJSActionsPromise:he,fieldObjectsPromise:ue,mouseState:fe,annotationCanvasMap:N})}},g.DefaultStructTreeLayerFactory=class P{createStructTreeLayerBuilder(h){return new y.StructTreeLayerBuilder({pdfPage:h})}},g.DefaultTextLayerFactory=class f{createTextLayerBuilder(h,E,I,j=!1,q,ee){return new n.TextLayerBuilder({textLayerDiv:h,pageIndex:E,viewport:I,enhanceTextSelection:j,eventBus:q,highlighter:ee})}},g.DefaultXfaLayerFactory=class w{createXfaLayerBuilder(h,E,I=null,j=null){return new i.XfaLayerBuilder({pageDiv:h,pdfPage:E,annotationStorage:I,linkService:new F.SimpleLinkService,xfaHtml:j})}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationLayerBuilder=void 0;var _=L(3),A=L(4);g.AnnotationLayerBuilder=class F{constructor({pageDiv:n,pdfPage:i,linkService:d,downloadManager:P,annotationStorage:f=null,imageResourcesPath:w="",renderForms:b=!0,l10n:h=A.NullL10n,enableScripting:E=!1,hasJSActionsPromise:I=null,fieldObjectsPromise:j=null,mouseState:q=null,annotationCanvasMap:ee=null}){this.pageDiv=n,this.pdfPage=i,this.linkService=d,this.downloadManager=P,this.imageResourcesPath=w,this.renderForms=b,this.l10n=h,this.annotationStorage=f,this.enableScripting=E,this._hasJSActionsPromise=I,this._fieldObjectsPromise=j,this._mouseState=q,this._annotationCanvasMap=ee,this.div=null,this._cancelled=!1}render(n,i="display"){var d=this;return v(function*(){const[P,f=!1,w=null]=yield Promise.all([d.pdfPage.getAnnotations({intent:i}),d._hasJSActionsPromise,d._fieldObjectsPromise]);if(d._cancelled||0===P.length)return;const b={viewport:n.clone({dontFlip:!0}),div:d.div,annotations:P,page:d.pdfPage,imageResourcesPath:d.imageResourcesPath,renderForms:d.renderForms,linkService:d.linkService,downloadManager:d.downloadManager,annotationStorage:d.annotationStorage,enableScripting:d.enableScripting,hasJSActions:f,fieldObjects:w,mouseState:d._mouseState,annotationCanvasMap:d._annotationCanvasMap};d.div?_.AnnotationLayer.update(b):(d.div=document.createElement("div"),d.div.className="annotationLayer",d.pageDiv.appendChild(d.div),b.div=d.div,_.AnnotationLayer.render(b),d.l10n.translate(d.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},W=>{let g;g=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:x(20717),W.exports=g},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NullL10n=void 0,g.fixupLangCode=function F(i){return A[i?.toLowerCase()]||i},g.getL10nFallback=_;const L={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function _(i,d){switch(i){case"find_match_count":i=`find_match_count[${1===d.total?"one":"other"}]`;break;case"find_match_count_limit":i=`find_match_count_limit[${1===d.limit?"one":"other"}]`}return L[i]||""}const A={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};g.NullL10n={getLanguage:()=>v(function*(){return"en-us"})(),getDirection:()=>v(function*(){return"ltr"})(),get:(i,d=null,P=_(i,d))=>v(function*(){return function y(i,d){return d?i.replace(/\{\{\s*(\w+)\s*\}\}/g,(P,f)=>f in d?d[f]:"{{"+f+"}}"):i}(P,d)})(),translate:i=>v(function*(){})()}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SimpleLinkService=g.PDFLinkService=g.LinkTarget=void 0;var _=L(6);const F={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function y(b,{url:h,target:E,rel:I,enabled:j=!0}={}){if(!h||"string"!=typeof h)throw new Error('A valid "url" parameter must provided.');const q=(0,_.removeNullCharacters)(h);j?b.href=b.title=q:(b.href="",b.title=`Disabled: ${q}`,b.onclick=()=>!1);let ee="";switch(E){case F.NONE:break;case F.SELF:ee="_self";break;case F.BLANK:ee="_blank";break;case F.PARENT:ee="_parent";break;case F.TOP:ee="_top"}b.target=ee,b.rel="string"==typeof I?I:"noopener noreferrer nofollow"}g.LinkTarget=F;var n=new WeakMap,i=new WeakSet;class d{constructor({eventBus:h,externalLinkTarget:E=null,externalLinkRel:I=null,ignoreDestinationZoom:j=!1}={}){O(this,i),$(this,n,new Map),this.eventBus=h,this.externalLinkTarget=E,this.externalLinkRel=I,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=j,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(h,E=null){this.baseUrl=E,this.pdfDocument=h,c(n,this).clear()}setViewer(h){this.pdfViewer=h}setHistory(h){this.pdfHistory=h}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(h){this.pdfViewer.currentPageNumber=h}get rotation(){return this.pdfViewer.pagesRotation}set rotation(h){this.pdfViewer.pagesRotation=h}goToDestination(h){var E=this;return v(function*(){if(!E.pdfDocument)return;let I,j;"string"==typeof h?(I=h,j=yield E.pdfDocument.getDestination(h)):(I=null,j=yield h),Array.isArray(j)?D(i,E,P).call(E,h,I,j):console.error(`PDFLinkService.goToDestination: "${j}" is not a valid destination array, for dest="${h}".`)})()}goToPage(h){if(!this.pdfDocument)return;const E="string"==typeof h&&this.pdfViewer.pageLabelToPageNumber(h)||0|h;Number.isInteger(E)&&E>0&&E<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(E)),this.pdfViewer.scrollPageIntoView({pageNumber:E})):console.error(`PDFLinkService.goToPage: "${h}" is not a valid page.`)}addLinkAttributes(h,E,I=!1){y(h,{url:E,target:I?F.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(h){if("string"==typeof h){if(h.length>0)return this.getAnchorUrl("#"+escape(h))}else if(Array.isArray(h)){const E=JSON.stringify(h);if(E.length>0)return this.getAnchorUrl("#"+escape(E))}return this.getAnchorUrl("")}getAnchorUrl(h){return(this.baseUrl||"")+h}setHash(h){if(!this.pdfDocument)return;let E,I;if(h.includes("=")){const j=(0,_.parseQueryString)(h);if(j.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:j.get("search").replace(/"/g,""),phraseSearch:"true"===j.get("phrase")}),j.has("page")&&(E=0|j.get("page")||1),j.has("zoom")){const q=j.get("zoom").split(","),ee=q[0],Q=parseFloat(ee);ee.includes("Fit")?"Fit"===ee||"FitB"===ee?I=[null,{name:ee}]:"FitH"===ee||"FitBH"===ee||"FitV"===ee||"FitBV"===ee?I=[null,{name:ee},q.length>1?0|q[1]:null]:"FitR"===ee?5!==q.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):I=[null,{name:ee},0|q[1],0|q[2],0|q[3],0|q[4]]:console.error(`PDFLinkService.setHash: "${ee}" is not a valid zoom value.`):I=[null,{name:"XYZ"},q.length>1?0|q[1]:null,q.length>2?0|q[2]:null,Q?Q/100:ee]}I?this.pdfViewer.scrollPageIntoView({pageNumber:E||this.page,destArray:I,allowNegativeOffset:!0}):E&&(this.page=E),j.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:j.get("pagemode")}),j.has("nameddest")&&this.goToDestination(j.get("nameddest"))}else{I=unescape(h);try{I=JSON.parse(I),Array.isArray(I)||(I=I.toString())}catch{}if("string"==typeof I||f.call(d,I))return void this.goToDestination(I);console.error(`PDFLinkService.setHash: "${unescape(h)}" is not a valid destination.`)}}executeNamedAction(h){switch(h){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:h})}cachePageRef(h,E){if(!E)return;const I=0===E.gen?`${E.num}R`:`${E.num}R${E.gen}`;c(n,this).set(I,h)}_cachedPageNumber(h){if(!h)return null;const E=0===h.gen?`${h.num}R`:`${h.num}R${h.gen}`;return c(n,this).get(E)||null}isPageVisible(h){return this.pdfViewer.isPageVisible(h)}isPageCached(h){return this.pdfViewer.isPageCached(h)}}function P(b,h=null,E){const I=E[0];let j;if("object"==typeof I&&null!==I){if(j=this._cachedPageNumber(I),!j)return void this.pdfDocument.getPageIndex(I).then(q=>{this.cachePageRef(q+1,I),D(i,this,P).call(this,b,h,E)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${I}" is not a valid page reference, for dest="${b}".`)})}else{if(!Number.isInteger(I))return void console.error(`PDFLinkService.#goToDestinationHelper: "${I}" is not a valid destination reference, for dest="${b}".`);j=I+1}!j||j<1||j>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${j}" is not a valid page number, for dest="${b}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:h,explicitDest:E,pageNumber:j})),this.pdfViewer.scrollPageIntoView({pageNumber:j,destArray:E,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function f(b){if(!Array.isArray(b))return!1;const h=b.length;if(h<2)return!1;const E=b[0];if(!("object"==typeof E&&Number.isInteger(E.num)&&Number.isInteger(E.gen)||Number.isInteger(E)&&E>=0))return!1;const I=b[1];if("object"!=typeof I||"string"!=typeof I.name)return!1;let j=!0;switch(I.name){case"XYZ":if(5!==h)return!1;break;case"Fit":case"FitB":return 2===h;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==h)return!1;break;case"FitR":if(6!==h)return!1;j=!1;break;default:return!1}for(let q=2;q<h;q++){const ee=b[q];if(!("number"==typeof ee||j&&null===ee))return!1}return!0}g.PDFLinkService=d,g.SimpleLinkService=class w{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(h){}get rotation(){return 0}set rotation(h){}goToDestination(h){return v(function*(){})()}goToPage(h){}addLinkAttributes(h,E,I=!1){y(h,{url:E,enabled:this.externalLinkEnabled})}getDestinationHash(h){return"#"}getAnchorUrl(h){return"#"}setHash(h){}executeNamedAction(h){}cachePageRef(h,E){}isPageVisible(h){return!0}isPageCached(h){return!0}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.animationStarted=g.VERTICAL_PADDING=g.UNKNOWN_SCALE=g.TextLayerMode=g.SpreadMode=g.SidebarView=g.ScrollMode=g.SCROLLBAR_PADDING=g.RenderingStates=g.RendererType=g.ProgressBar=g.PresentationModeState=g.OutputScale=g.MIN_SCALE=g.MAX_SCALE=g.MAX_AUTO_SCALE=g.DEFAULT_SCALE_VALUE=g.DEFAULT_SCALE_DELTA=g.DEFAULT_SCALE=g.AutoPrintRegExp=void 0,g.apiPageLayoutToViewerModes=function ae(J){let M=I.VERTICAL,Z=j.NONE;switch(J){case"SinglePage":M=I.PAGE;break;case"OneColumn":break;case"TwoPageLeft":M=I.PAGE;case"TwoColumnLeft":Z=j.ODD;break;case"TwoPageRight":M=I.PAGE;case"TwoColumnRight":Z=j.EVEN}return{scrollMode:M,spreadMode:Z}},g.apiPageModeToSidebarView=function te(J){switch(J){case"UseNone":return b.NONE;case"UseThumbs":return b.THUMBS;case"UseOutlines":return b.OUTLINE;case"UseAttachments":return b.ATTACHMENTS;case"UseOC":return b.LAYERS}return b.NONE},g.approximateFraction=function r(J){if(Math.floor(J)===J)return[J,1];const M=1/J;if(M>8)return[1,8];if(Math.floor(M)===M)return[1,M];const R=J>1?M:J;let se,ne=0,oe=1,me=1,ve=1;for(;;){const Y=ne+me,K=oe+ve;if(K>8)break;R<=Y/K?(me=Y,ve=K):(ne=Y,oe=K)}return se=R-ne/oe<me/ve-R?R===J?[ne,oe]:[oe,ne]:R===J?[me,ve]:[ve,me],se},g.backtrackBeforeAllVisibleElements=p,g.binarySearchFirstItem=t,g.getActiveOrFocusedElement=function re(){let J=document,M=J.activeElement||J.querySelector(":focus");for(;M?.shadowRoot;)J=M.shadowRoot,M=J.activeElement||J.querySelector(":focus");return M},g.getPageSizeInches=function u({view:J,userUnit:M,rotate:Z}){const[R,ne,oe,me]=J,ve=Z%180!=0,se=(oe-R)/72*M,Y=(me-ne)/72*M;return{width:ve?Y:se,height:ve?se:Y}},g.getVisibleElements=function s({scrollEl:J,views:M,sortByVisibility:Z=!1,horizontal:R=!1,rtl:ne=!1}){const oe=J.scrollTop,me=oe+J.clientHeight,ve=J.scrollLeft,se=ve+J.clientWidth,pe=[],be=new Set,ye=M.length;let Ae=t(M,R?function K(Pe){const Ce=Pe.div,we=Ce.offsetLeft+Ce.clientLeft;return ne?we<se:we+Ce.clientWidth>ve}:function Y(Pe){const Ce=Pe.div;return Ce.offsetTop+Ce.clientTop+Ce.clientHeight>oe});Ae>0&&Ae<ye&&!R&&(Ae=p(Ae,M,oe));let xe=R?se:-1;for(let Pe=Ae;Pe<ye;Pe++){const Ce=M[Pe],we=Ce.div,Te=we.offsetLeft+we.clientLeft,Se=we.offsetTop+we.clientTop,Le=we.clientWidth,Re=we.clientHeight,De=Te+Le,Oe=Se+Re;if(-1===xe)Oe>=me&&(xe=Oe);else if((R?Te:Se)>xe)break;if(Oe<=oe||Se>=me||De<=ve||Te>=se)continue;const Fe=Math.max(0,oe-Se)+Math.max(0,Oe-me),Ne=(Le-(Math.max(0,ve-Te)+Math.max(0,De-se)))/Le;pe.push({id:Ce.id,x:Te,y:Se,view:Ce,percent:(Re-Fe)/Re*Ne*100|0,widthPercent:100*Ne|0}),be.add(Ce.id)}const Me=pe[0],ke=pe[pe.length-1];return Z&&pe.sort(function(Pe,Ce){const we=Pe.percent-Ce.percent;return Math.abs(we)>.001?-we:Pe.id-Ce.id}),{first:Me,last:ke,views:pe,ids:be}},g.isPortraitOrientation=function ce(J){return J.width<=J.height},g.isValidRotation=function G(J){return Number.isInteger(J)&&J%90==0},g.isValidScrollMode=function X(J){return Number.isInteger(J)&&Object.values(I).includes(J)&&J!==I.UNKNOWN},g.isValidSpreadMode=function le(J){return Number.isInteger(J)&&Object.values(j).includes(J)&&J!==j.UNKNOWN},g.noContextMenuHandler=function T(J){J.preventDefault()},g.normalizeWheelEventDelta=function k(J){let M=C(J);return 0===J.deltaMode?M/=900:1===J.deltaMode&&(M/=30),M},g.normalizeWheelEventDirection=C,g.parseQueryString=function fe(J){const M=new Map;for(const[Z,R]of new URLSearchParams(J))M.set(Z.toLowerCase(),R);return M},g.removeNullCharacters=function a(J,M=!1){return"string"!=typeof J?(console.error("The argument must be a string."),J):(M&&(J=J.replace(N," ")),J.replace(ue,""))},g.roundToDivide=function o(J,M){const Z=J%M;return 0===Z?J:Math.round(J-Z+M)},g.scrollIntoView=function Q(J,M,Z=!1){let R=J.offsetParent;if(!R)return void console.error("offsetParent is not set -- cannot scroll");let ne=J.offsetTop+J.clientTop,oe=J.offsetLeft+J.clientLeft;for(;R.clientHeight===R.scrollHeight&&R.clientWidth===R.scrollWidth||Z&&(R.classList.contains("markedContent")||"hidden"===getComputedStyle(R).overflow);)if(ne+=R.offsetTop,oe+=R.offsetLeft,R=R.offsetParent,!R)return;M&&(void 0!==M.top&&(ne+=M.top),void 0!==M.left&&(oe+=M.left,R.scrollLeft=oe)),R.scrollTop=ne},g.watchScroll=function he(J,M){const Z=function(oe){ne||(ne=window.requestAnimationFrame(function(){ne=null;const ve=J.scrollLeft,se=R.lastX;ve!==se&&(R.right=ve>se),R.lastX=ve;const Y=J.scrollTop,K=R.lastY;Y!==K&&(R.down=Y>K),R.lastY=Y,M(R)}))},R={right:!0,down:!0,lastX:J.scrollLeft,lastY:J.scrollTop,_eventHandler:Z};let ne=null;return J.addEventListener("scroll",Z,!0),R},g.DEFAULT_SCALE_VALUE="auto",g.DEFAULT_SCALE=1,g.DEFAULT_SCALE_DELTA=1.1,g.MIN_SCALE=.1,g.MAX_SCALE=10,g.UNKNOWN_SCALE=0,g.MAX_AUTO_SCALE=1.25,g.SCROLLBAR_PADDING=40,g.VERTICAL_PADDING=5,g.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},g.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const b={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};g.SidebarView=b,g.RendererType={CANVAS:"canvas",SVG:"svg"},g.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const I={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};g.ScrollMode=I;const j={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};g.SpreadMode=j,g.AutoPrintRegExp=/\bprint\s*\(/,g.OutputScale=class ee{constructor(){const M=window.devicePixelRatio||1;this.sx=M,this.sy=M}get scaled(){return 1!==this.sx||1!==this.sy}};const ue=/\x00/g,N=/[\x01-\x1F]/g;function t(J,M,Z=0){let R=Z,ne=J.length-1;if(ne<0||!M(J[ne]))return J.length;if(M(J[R]))return R;for(;R<ne;){const oe=R+ne>>1;M(J[oe])?ne=oe:R=oe+1}return R}function p(J,M,Z){if(J<2)return J;let R=M[J].div,ne=R.offsetTop+R.clientTop;ne>=Z&&(R=M[J-1].div,ne=R.offsetTop+R.clientTop);for(let oe=J-2;oe>=0&&(R=M[oe].div,!(R.offsetTop+R.clientTop+R.clientHeight<=ne));--oe)J=oe;return J}function C(J){let M=Math.hypot(J.deltaX,J.deltaY);const Z=Math.atan2(J.deltaY,J.deltaX);return-.25*Math.PI<Z&&Z<.75*Math.PI&&(M=-M),M}const ge=new Promise(function(J){window.requestAnimationFrame(J)});g.animationStarted=ge;var de=new WeakSet;function S(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}g.ProgressBar=class m{constructor(M){if(O(this,de),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(M+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(M){this._indeterminate=isNaN(M),this._percent=function _e(J,M,Z){return Math.min(Math.max(J,M),Z)}(M,0,100),D(de,this,S).call(this)}setWidth(M){if(!M)return;const R=M.parentNode.offsetWidth-M.offsetWidth;R>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${R}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.StructTreeLayerBuilder=void 0;const L={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},_=/^H(\d+)$/;g.StructTreeLayerBuilder=class A{constructor({pdfPage:y}){this.pdfPage=y}render(y){return this._walk(y)}_setAttributes(y,n){void 0!==y.alt&&n.setAttribute("aria-label",y.alt),void 0!==y.id&&n.setAttribute("aria-owns",y.id),void 0!==y.lang&&n.setAttribute("lang",y.lang)}_walk(y){if(!y)return null;const n=document.createElement("span");if("role"in y){const{role:i}=y,d=i.match(_);d?(n.setAttribute("role","heading"),n.setAttribute("aria-level",d[1])):L[i]&&n.setAttribute("role",L[i])}if(this._setAttributes(y,n),y.children)if(1===y.children.length&&"id"in y.children[0])this._setAttributes(y.children[0],n);else for(const i of y.children)n.appendChild(this._walk(i));return n}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerBuilder=void 0;var _=L(3);g.TextLayerBuilder=class F{constructor({textLayerDiv:n,eventBus:i,pageIndex:d,viewport:P,highlighter:f=null,enhanceTextSelection:w=!1}){this.textLayerDiv=n,this.eventBus=i,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=d+1,this.viewport=P,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=f,this.enhanceTextSelection=w,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const n=document.createElement("div");n.className="endOfContent",this.textLayerDiv.appendChild(n)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(n=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const i=document.createDocumentFragment();this.textLayerRenderTask=(0,_.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:i,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:n,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(i),this._finishRendering(),this.highlighter?.enable()},function(d){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(n){this.cancel(),this.textContentStream=n}setTextContent(n){this.cancel(),this.textContent=n}_bindMouse(){const n=this.textLayerDiv;let i=null;n.addEventListener("mousedown",d=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(i&&(clearTimeout(i),i=null));const P=n.querySelector(".endOfContent");if(!P)return;let f=d.target!==n;if(f=f&&"none"!==window.getComputedStyle(P).getPropertyValue("-moz-user-select"),f){const w=n.getBoundingClientRect(),b=Math.max(0,(d.pageY-w.top)/w.height);P.style.top=(100*b).toFixed(2)+"%"}P.classList.add("active")}),n.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(i=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),i=null},300));const d=n.querySelector(".endOfContent");d&&(d.style.top="",d.classList.remove("active"))})}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayerBuilder=void 0;var _=L(3);g.XfaLayerBuilder=class A{constructor({pageDiv:y,pdfPage:n,annotationStorage:i=null,linkService:d,xfaHtml:P=null}){this.pageDiv=y,this.pdfPage=n,this.annotationStorage=i,this.linkService=d,this.xfaHtml=P,this.div=null,this._cancelled=!1}render(y,n="display"){if("print"===n){const i={viewport:y.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},d=document.createElement("div");this.pageDiv.appendChild(d),i.div=d;const P=_.XfaLayer.render(i);return Promise.resolve(P)}return this.pdfPage.getXfa().then(i=>{if(this._cancelled||!i)return{textDivs:[]};const d={viewport:y.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?_.XfaLayer.update(d):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),d.div=this.div,_.XfaLayer.render(d))}).catch(i=>{console.error(i)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFViewer=g.PDFSinglePageViewer=void 0;var _=L(6),A=L(11);g.PDFViewer=class F extends A.BaseViewer{},g.PDFSinglePageViewer=class y extends A.BaseViewer{_resetView(){super._resetView(),this._scrollMode=_.ScrollMode.PAGE,this._spreadMode=_.SpreadMode.NONE}set scrollMode(i){}_updateScrollMode(){}set spreadMode(i){}_updateSpreadMode(){}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PagesCountLimit=g.PDFPageViewBuffer=g.BaseViewer=void 0;var _=L(3),A=L(6),F=L(2),y=L(4),n=L(12),i=L(14),d=L(5),P=L(7),f=L(15),w=L(8),b=L(9);const E="enablePermissions",I={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};g.PagesCountLimit=I;var j=new WeakMap,q=new WeakMap,ee=new WeakSet;class Q{constructor(m){O(this,ee),$(this,j,new Set),$(this,q,0),U(q,this,m)}push(m){const S=c(j,this);S.has(m)&&S.delete(m),S.add(m),S.size>c(q,this)&&D(ee,this,he).call(this)}resize(m,S=null){U(q,this,m);const re=c(j,this);if(S){const ae=re.size;let te=1;for(const J of re)if(S.has(J.id)&&(re.delete(J),re.add(J)),++te>ae)break}for(;re.size>c(q,this);)D(ee,this,he).call(this)}has(m){return c(j,this).has(m)}[Symbol.iterator](){return c(j,this).keys()}}function he(){const de=c(j,this).keys().next().value;de?.destroy(),c(j,this).delete(de)}g.PDFPageViewBuffer=Q;var fe=new WeakMap,ue=new WeakMap,N=new WeakMap,a=new WeakMap,t=new WeakMap,r=new WeakMap,o=new WeakMap,u=new WeakSet;class p{constructor(m){if(O(this,u),$(this,fe,null),$(this,ue,_.AnnotationMode.ENABLE_FORMS),$(this,N,null),$(this,a,!1),$(this,t,0),$(this,r,null),$(this,o,null),this.constructor===p)throw new Error("Cannot initialize BaseViewer.");const S="2.14.305";if(_.version!==S)throw new Error(`The API version "${_.version}" does not match the Viewer version "${S}".`);if(this.container=m.container,this.viewer=m.viewer||m.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=m.eventBus,this.linkService=m.linkService||new d.SimpleLinkService,this.downloadManager=m.downloadManager||null,this.findController=m.findController||null,this._scriptingManager=m.scriptingManager||null,this.removePageBorders=m.removePageBorders||!1,this.textLayerMode=m.textLayerMode??A.TextLayerMode.ENABLE,U(ue,this,m.annotationMode??_.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=m.imageResourcesPath||"",this.enablePrintAutoRotate=m.enablePrintAutoRotate||!1,this.renderer=m.renderer||A.RendererType.CANVAS,this.useOnlyCssZoom=m.useOnlyCssZoom||!1,this.maxCanvasPixels=m.maxCanvasPixels,this.l10n=m.l10n||y.NullL10n,U(a,this,m.enablePermissions||!1),this.pageColors=m.pageColors||null,m.pageColors&&(!CSS.supports("color",m.pageColors.background)||!CSS.supports("color",m.pageColors.foreground))&&((m.pageColors.background||m.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!m.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new i.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=m.renderingQueue,this._doc=document.documentElement,this.scroll=(0,A.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=A.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(m){return this._pages[m]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(m){return m?.pdfPage})}get renderForms(){return c(ue,this)===_.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(m){if(!Number.isInteger(m))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(m,!0)||console.error(`currentPageNumber: "${m}" is not a valid page.`))}_setCurrentPageNumber(m,S=!1){if(this._currentPageNumber===m)return S&&D(u,this,X).call(this),!0;if(!(0<m&&m<=this.pagesCount))return!1;const re=this._currentPageNumber;return this._currentPageNumber=m,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:m,pageLabel:this._pageLabels?.[m-1]??null,previous:re}),S&&D(u,this,X).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(m){if(!this.pdfDocument)return;let S=0|m;if(this._pageLabels){const re=this._pageLabels.indexOf(m);re>=0&&(S=re+1)}this._setCurrentPageNumber(S,!0)||console.error(`currentPageLabel: "${m}" is not a valid page.`)}get currentScale(){return this._currentScale!==A.UNKNOWN_SCALE?this._currentScale:A.DEFAULT_SCALE}set currentScale(m){if(isNaN(m))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(m,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(m){this.pdfDocument&&this._setScale(m,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(m){if(!(0,A.isValidRotation)(m))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((m%=360)<0&&(m+=360),this._pagesRotation===m))return;this._pagesRotation=m;const S=this._currentPageNumber,re={rotation:m};for(const ae of this._pages)ae.update(re);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:m,pageNumber:S}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(m){var S=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=m,!m)return;const re=m.isPureXfa,ae=m.numPages,te=m.getPage(1),J=m.getOptionalContentConfig(),M=c(a,this)?m.getPermissions():Promise.resolve();if(ae>I.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const Z=this._scrollMode=A.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:Z})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:ae})},()=>{}),this._onBeforeDraw=Z=>{const R=this._pages[Z.pageNumber-1];R&&c(fe,this).push(R)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=Z=>{Z.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:Z.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,c(o,this)&&(document.removeEventListener("visibilitychange",c(o,this)),U(o,this,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([te,M]).then(([Z,R])=>{if(m!==this.pdfDocument)return;this._firstPageCapability.resolve(Z),this._optionalContentConfigPromise=J,D(u,this,s).call(this,R);const ne=this._scrollMode===A.ScrollMode.PAGE?null:this.viewer,oe=this.currentScale,me=Z.getViewport({scale:oe*_.PixelsPerInch.PDF_TO_CSS_UNITS}),ve=this.textLayerMode===A.TextLayerMode.DISABLE||re?null:this,se=c(ue,this)!==_.AnnotationMode.DISABLE?this:null,Y=re?this:null;for(let pe=1;pe<=ae;++pe){const be=new n.PDFPageView({container:ne,eventBus:this.eventBus,id:pe,scale:oe,defaultViewport:me.clone(),optionalContentConfigPromise:J,renderingQueue:this.renderingQueue,textLayerFactory:ve,textLayerMode:this.textLayerMode,annotationLayerFactory:se,annotationMode:c(ue,this),xfaLayerFactory:Y,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(be)}const K=this._pages[0];K&&(K.setPdfPage(Z),this.linkService.cachePageRef(1,Z.ref)),this._scrollMode===A.ScrollMode.PAGE?D(u,this,C).call(this):this._spreadMode!==A.SpreadMode.NONE&&this._updateSpreadMode(),D(u,this,T).call(this).then(v(function*(){if(S.findController&&S.findController.setDocument(m),S._scriptingManager&&S._scriptingManager.setDocument(m),m.loadingParams.disableAutoFetch||ae>I.FORCE_LAZY_PAGE_INIT)return void S._pagesCapability.resolve();let pe=ae-1;if(pe<=0)S._pagesCapability.resolve();else for(let be=2;be<=ae;++be){const ye=m.getPage(be).then(Ae=>{const xe=S._pages[be-1];xe.pdfPage||xe.setPdfPage(Ae),S.linkService.cachePageRef(be,Ae.ref),0==--pe&&S._pagesCapability.resolve()},Ae=>{console.error(`Unable to get page ${be} to initialize viewer`,Ae),0==--pe&&S._pagesCapability.resolve()});be%I.PAUSE_EAGER_PAGE_INIT==0&&(yield ye)}})),this.eventBus.dispatch("pagesinit",{source:this}),m.getMetadata().then(({info:pe})=>{m===this.pdfDocument&&pe.Language&&(this.viewer.lang=pe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(Z=>{console.error("Unable to initialize viewer",Z),this._pagesCapability.reject(Z)})}setPageLabels(m){if(this.pdfDocument){m?Array.isArray(m)&&this.pdfDocument.numPages===m.length?this._pageLabels=m:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let S=0,re=this._pages.length;S<re;S++)this._pages[S].setPageLabel(this._pageLabels?.[S]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=A.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,U(fe,this,new Q(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,_.createPromiseCapability)(),this._onePageRenderedCapability=(0,_.createPromiseCapability)(),this._pagesCapability=(0,_.createPromiseCapability)(),this._scrollMode=A.ScrollMode.VERTICAL,this._previousScrollMode=A.ScrollMode.UNKNOWN,this._spreadMode=A.SpreadMode.NONE,U(r,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),c(o,this)&&(document.removeEventListener("visibilitychange",c(o,this)),U(o,this,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(E),null!==c(N,this)&&(U(ue,this,c(N,this)),U(N,this,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(m,S,re=!1,ae=!1){if(this._currentScaleValue=S.toString(),D(u,this,G).call(this,m))return void(ae&&this.eventBus.dispatch("scalechanging",{source:this,scale:m,presetValue:S}));this._doc.style.setProperty("--zoom-factor",m);const te={scale:m};for(const J of this._pages)J.update(te);if(this._currentScale=m,!re){let M,J=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(J=this._location.pageNumber,M=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:J,destArray:M,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:m,presetValue:ae?S:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL?2:1}_setScale(m,S=!1){let re=parseFloat(m);if(re>0)this._setScaleUpdatePages(re,m,S,!1);else{const ae=this._pages[this._currentPageNumber-1];if(!ae)return;let te=A.SCROLLBAR_PADDING,J=A.VERTICAL_PADDING;this.isInPresentationMode?te=J=4:this.removePageBorders?te=J=0:this._scrollMode===A.ScrollMode.HORIZONTAL&&([te,J]=[J,te]);const M=(this.container.clientWidth-te)/ae.width*ae.scale/this._pageWidthScaleFactor,Z=(this.container.clientHeight-J)/ae.height*ae.scale;switch(m){case"page-actual":re=1;break;case"page-width":re=M;break;case"page-height":re=Z;break;case"page-fit":re=Math.min(M,Z);break;case"auto":const R=(0,A.isPortraitOrientation)(ae)?M:Math.min(Z,M);re=Math.min(A.MAX_AUTO_SCALE,R);break;default:return void console.error(`_setScale: "${m}" is an unknown zoom value.`)}this._setScaleUpdatePages(re,m,S,!0)}}pageLabelToPageNumber(m){if(!this._pageLabels)return null;const S=this._pageLabels.indexOf(m);return S<0?null:S+1}scrollPageIntoView({pageNumber:m,destArray:S=null,allowNegativeOffset:re=!1,ignoreDestinationZoom:ae=!1}){if(!this.pdfDocument)return;const te=Number.isInteger(m)&&this._pages[m-1];if(!te)return void console.error(`scrollPageIntoView: "${m}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!S)return void this._setCurrentPageNumber(m,!0);let ne,oe,J=0,M=0,Z=0,R=0;const me=te.rotation%180!=0,ve=(me?te.height:te.width)/te.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS,se=(me?te.width:te.height)/te.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS;let Y=0;switch(S[1].name){case"XYZ":J=S[2],M=S[3],Y=S[4],J=null!==J?J:0,M=null!==M?M:se;break;case"Fit":case"FitB":Y="page-fit";break;case"FitH":case"FitBH":M=S[2],Y="page-width",null===M&&this._location?(J=this._location.left,M=this._location.top):("number"!=typeof M||M<0)&&(M=se);break;case"FitV":case"FitBV":J=S[2],Z=ve,R=se,Y="page-height";break;case"FitR":J=S[2],M=S[3],Z=S[4]-J,R=S[5]-M,ne=(this.container.clientWidth-(this.removePageBorders?0:A.SCROLLBAR_PADDING))/Z/_.PixelsPerInch.PDF_TO_CSS_UNITS,oe=(this.container.clientHeight-(this.removePageBorders?0:A.VERTICAL_PADDING))/R/_.PixelsPerInch.PDF_TO_CSS_UNITS,Y=Math.min(Math.abs(ne),Math.abs(oe));break;default:return void console.error(`scrollPageIntoView: "${S[1].name}" is not a valid destination type.`)}if(ae||(Y&&Y!==this._currentScale?this.currentScaleValue=Y:this._currentScale===A.UNKNOWN_SCALE&&(this.currentScaleValue=A.DEFAULT_SCALE_VALUE)),"page-fit"===Y&&!S[4])return void D(u,this,k).call(this,te);const K=[te.viewport.convertToViewportPoint(J,M),te.viewport.convertToViewportPoint(J+Z,M+R)];let pe=Math.min(K[0][0],K[1][0]),be=Math.min(K[0][1],K[1][1]);re||(pe=Math.max(pe,0),be=Math.max(be,0)),D(u,this,k).call(this,te,{left:pe,top:be})}_updateLocation(m){const S=this._currentScale,re=this._currentScaleValue,ae=parseFloat(re)===S?Math.round(1e4*S)/100:re,te=m.id,M=this.container,Z=this._pages[te-1].getPagePoint(M.scrollLeft-m.x,M.scrollTop-m.y),R=Math.round(Z[0]),ne=Math.round(Z[1]);let oe=`#page=${te}`;this.isInPresentationMode||(oe+=`&zoom=${ae},${R},${ne}`),this._location={pageNumber:te,scale:ae,top:ne,left:R,rotation:this._pagesRotation,pdfOpenParams:oe}}update(){const m=this._getVisiblePages(),S=m.views,re=S.length;if(0===re)return;const ae=Math.max(10,2*re+1);c(fe,this).resize(ae,m.ids),this.renderingQueue.renderHighestPriority(m);const te=this._spreadMode===A.SpreadMode.NONE&&(this._scrollMode===A.ScrollMode.PAGE||this._scrollMode===A.ScrollMode.VERTICAL),J=this._currentPageNumber;let M=!1;for(const Z of S){if(Z.percent<100)break;if(Z.id===J&&te){M=!0;break}}this._setCurrentPageNumber(M?J:S[0].id),this._updateLocation(m.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(m){return this.container.contains(m)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===A.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===A.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const m=this._scrollMode===A.ScrollMode.PAGE?c(r,this).pages:this._pages,S=this._scrollMode===A.ScrollMode.HORIZONTAL;return(0,A.getVisibleElements)({scrollEl:this.container,views:m,sortByVisibility:!0,horizontal:S,rtl:S&&this._isContainerRtl})}isPageVisible(m){return!!this.pdfDocument&&(Number.isInteger(m)&&m>0&&m<=this.pagesCount?this._getVisiblePages().ids.has(m):(console.error(`isPageVisible: "${m}" is not a valid page.`),!1))}isPageCached(m){if(!this.pdfDocument)return!1;if(!(Number.isInteger(m)&&m>0&&m<=this.pagesCount))return console.error(`isPageCached: "${m}" is not a valid page.`),!1;const S=this._pages[m-1];return c(fe,this).has(S)}cleanup(){for(const m of this._pages)m.renderingState!==A.RenderingStates.FINISHED&&m.reset()}_cancelRendering(){for(const m of this._pages)m.cancelRendering()}forceRendering(m){const S=m||this._getVisiblePages(),re=D(u,this,ge).call(this,S),te=this.renderingQueue.getHighestPriority(S,this._pages,re,this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL);return D(u,this,_e).call(this,S.ids),!!te&&(D(u,this,le).call(this,te).then(()=>{this.renderingQueue.renderView(te)}),!0)}createTextLayerBuilder(m,S,re,ae=!1,te,J){return new w.TextLayerBuilder({textLayerDiv:m,eventBus:te,pageIndex:S,viewport:re,enhanceTextSelection:!this.isInPresentationMode&&ae,highlighter:J})}createTextHighlighter(m,S){return new f.TextHighlighter({eventBus:S,pageIndex:m,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(m,S,re=null,ae="",te=!0,J=y.NullL10n,M=null,Z=null,R=null,ne=null,oe=null){return new F.AnnotationLayerBuilder({pageDiv:m,pdfPage:S,annotationStorage:re||this.pdfDocument?.annotationStorage,imageResourcesPath:ae,renderForms:te,linkService:this.linkService,downloadManager:this.downloadManager,l10n:J,enableScripting:M??this.enableScripting,hasJSActionsPromise:Z||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:ne||this.pdfDocument?.getFieldObjects(),mouseState:R||this._scriptingManager?.mouseState,annotationCanvasMap:oe})}createXfaLayerBuilder(m,S,re=null){return new b.XfaLayerBuilder({pageDiv:m,pdfPage:S,annotationStorage:re||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(m){return new P.StructTreeLayerBuilder({pdfPage:m})}get hasEqualPageSizes(){const m=this._pages[0];for(let S=1,re=this._pages.length;S<re;++S){const ae=this._pages[S];if(ae.width!==m.width||ae.height!==m.height)return!1}return!0}getPagesOverview(){return this._pages.map(m=>{const S=m.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,A.isPortraitOrientation)(S)?{width:S.width,height:S.height,rotation:S.rotation}:{width:S.height,height:S.width,rotation:(S.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(m){if(!(m instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${m}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=m;const S={optionalContentConfigPromise:m};for(const re of this._pages)re.update(S);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:m})}get scrollMode(){return this._scrollMode}set scrollMode(m){if(this._scrollMode!==m){if(!(0,A.isValidScrollMode)(m))throw new Error(`Invalid scroll mode: ${m}`);this.pagesCount>I.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=m,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:m}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(m=null){const S=this._scrollMode,re=this.viewer;re.classList.toggle("scrollHorizontal",S===A.ScrollMode.HORIZONTAL),re.classList.toggle("scrollWrapped",S===A.ScrollMode.WRAPPED),this.pdfDocument&&m&&(S===A.ScrollMode.PAGE?D(u,this,C).call(this):this._previousScrollMode===A.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(m,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(m){if(this._spreadMode!==m){if(!(0,A.isValidSpreadMode)(m))throw new Error(`Invalid spread mode: ${m}`);this._spreadMode=m,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:m}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(m=null){if(!this.pdfDocument)return;const S=this.viewer,re=this._pages;if(this._scrollMode===A.ScrollMode.PAGE)D(u,this,C).call(this);else if(S.textContent="",this._spreadMode===A.SpreadMode.NONE)for(const ae of this._pages)S.appendChild(ae.div);else{const ae=this._spreadMode-1;let te=null;for(let J=0,M=re.length;J<M;++J)null===te?(te=document.createElement("div"),te.className="spread",S.appendChild(te)):J%2===ae&&(te=te.cloneNode(!1),S.appendChild(te)),te.appendChild(re[J].div)}m&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(m,!0),this.update())}_getPageAdvance(m,S=!1){switch(this._scrollMode){case A.ScrollMode.WRAPPED:{const{views:re}=this._getVisiblePages(),ae=new Map;for(const{id:te,y:J,percent:M,widthPercent:Z}of re){if(0===M||Z<100)continue;let R=ae.get(J);R||ae.set(J,R||=[]),R.push(te)}for(const te of ae.values()){const J=te.indexOf(m);if(-1===J)continue;const M=te.length;if(1===M)break;if(S)for(let Z=J-1,R=0;Z>=R;Z--){const oe=te[Z+1]-1;if(te[Z]<oe)return m-oe}else for(let Z=J+1,R=M;Z<R;Z++){const oe=te[Z-1]+1;if(te[Z]>oe)return oe-m}if(S){const Z=te[0];if(Z<m)return m-Z+1}else{const Z=te[M-1];if(Z>m)return Z-m+1}break}break}case A.ScrollMode.HORIZONTAL:break;case A.ScrollMode.PAGE:case A.ScrollMode.VERTICAL:{if(this._spreadMode===A.SpreadMode.NONE)break;const re=this._spreadMode-1;if(S&&m%2!==re)break;if(!S&&m%2===re)break;const{views:ae}=this._getVisiblePages(),te=S?m-1:m+1;for(const{id:J,percent:M,widthPercent:Z}of ae)if(J===te){if(M>0&&100===Z)return 2;break}break}}return 1}nextPage(){const m=this._currentPageNumber,S=this.pagesCount;if(m>=S)return!1;const re=this._getPageAdvance(m,!1)||1;return this.currentPageNumber=Math.min(m+re,S),!0}previousPage(){const m=this._currentPageNumber;if(m<=1)return!1;const S=this._getPageAdvance(m,!0)||1;return this.currentPageNumber=Math.max(m-S,1),!0}increaseScale(m=1){let S=this._currentScale;do{S=(S*A.DEFAULT_SCALE_DELTA).toFixed(2),S=Math.ceil(10*S)/10,S=Math.min(A.MAX_SCALE,S)}while(--m>0&&S<A.MAX_SCALE);this.currentScaleValue=S}decreaseScale(m=1){let S=this._currentScale;do{S=(S/A.DEFAULT_SCALE_DELTA).toFixed(2),S=Math.floor(10*S)/10,S=Math.max(A.MIN_SCALE,S)}while(--m>0&&S>A.MIN_SCALE);this.currentScaleValue=S}updateContainerHeightCss(){const m=this.container.clientHeight;m!==c(t,this)&&(U(t,this,m),this._doc.style.setProperty("--viewer-container-height",`${m}px`))}}function s(de){de&&(de.includes(_.PermissionFlag.COPY)||this.viewer.classList.add(E),!de.includes(_.PermissionFlag.MODIFY_ANNOTATIONS)&&!de.includes(_.PermissionFlag.FILL_INTERACTIVE_FORMS)&&c(ue,this)===_.AnnotationMode.ENABLE_FORMS&&(U(N,this,c(ue,this)),U(ue,this,_.AnnotationMode.ENABLE)))}function T(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const de=new Promise(m=>{U(o,this,()=>{"hidden"===document.visibilityState&&(m(),document.removeEventListener("visibilitychange",c(o,this)),U(o,this,null))}),document.addEventListener("visibilitychange",c(o,this))});return Promise.race([this._onePageRenderedCapability.promise,de])}function C(){if(this._scrollMode!==A.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const de=this._currentPageNumber,m=c(r,this),S=this.viewer;if(S.textContent="",m.pages.length=0,this._spreadMode!==A.SpreadMode.NONE||this.isInPresentationMode){const re=new Set,ae=this._spreadMode-1;-1===ae?re.add(de-1):de%2!==ae?(re.add(de-1),re.add(de)):(re.add(de-2),re.add(de-1));const te=document.createElement("div");if(te.className="spread",this.isInPresentationMode){const J=document.createElement("div");J.className="dummyPage",te.appendChild(J)}for(const J of re){const M=this._pages[J];M&&(te.appendChild(M.div),m.pages.push(M))}S.appendChild(te)}else{const re=this._pages[de-1];S.appendChild(re.div),m.pages.push(re)}m.scrollDown=de>=m.previousPageNumber,m.previousPageNumber=de}function k(de,m=null){const{div:S,id:re}=de;if(this._scrollMode===A.ScrollMode.PAGE&&(this._setCurrentPageNumber(re),D(u,this,C).call(this),this.update()),!m&&!this.isInPresentationMode){const ae=S.offsetLeft+S.clientLeft,te=ae+S.clientWidth,{scrollLeft:J,clientWidth:M}=this.container;(this._scrollMode===A.ScrollMode.HORIZONTAL||ae<J||te>J+M)&&(m={left:0,top:0})}(0,A.scrollIntoView)(S,m)}function G(de){return de===this._currentScale||Math.abs(de-this._currentScale)<1e-15}function X(){const de=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),D(u,this,k).call(this,de)}function le(de){return ce.apply(this,arguments)}function ce(){return(ce=v(function*(de){if(de.pdfPage)return de.pdfPage;try{const m=yield this.pdfDocument.getPage(de.id);return de.pdfPage||de.setPdfPage(m),this.linkService._cachedPageNumber?.(m.ref)||this.linkService.cachePageRef(de.id,m.ref),m}catch(m){return console.error("Unable to get page for page view",m),null}})).apply(this,arguments)}function ge(de){if(1===de.first?.id)return!0;if(de.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case A.ScrollMode.PAGE:return c(r,this).scrollDown;case A.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _e(de){for(const m of de)this._pages[m-1]?.toggleLoadingIconSpinner(!0);for(const m of c(fe,this))de.has(m.id)||m.toggleLoadingIconSpinner(!1)}g.BaseViewer=p},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFPageView=void 0;var _=L(3),A=L(6),F=L(13),y=L(4);const n=F.compatibilityParams.maxCanvasPixels||16777216;var i=new WeakMap;g.PDFPageView=class d{constructor(f){$(this,i,_.AnnotationMode.ENABLE_FORMS);const w=f.container,b=f.defaultViewport;this.id=f.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=f.scale||A.DEFAULT_SCALE,this.viewport=b,this.pdfPageRotate=b.rotation,this._optionalContentConfigPromise=f.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=f.textLayerMode??A.TextLayerMode.ENABLE,U(i,this,f.annotationMode??_.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=f.imageResourcesPath||"",this.useOnlyCssZoom=f.useOnlyCssZoom||!1,this.maxCanvasPixels=f.maxCanvasPixels||n,this.pageColors=f.pageColors||null,this.eventBus=f.eventBus,this.renderingQueue=f.renderingQueue,this.textLayerFactory=f.textLayerFactory,this.annotationLayerFactory=f.annotationLayerFactory,this.xfaLayerFactory=f.xfaLayerFactory,this.textHighlighter=f.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=f.structTreeLayerFactory,this.renderer=f.renderer||A.RendererType.CANVAS,this.l10n=f.l10n||y.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=A.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const h=document.createElement("div");h.className="page",h.style.width=Math.floor(this.viewport.width)+"px",h.style.height=Math.floor(this.viewport.height)+"px",h.setAttribute("data-page-number",this.id),h.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(E=>{h.setAttribute("aria-label",E)}),this.div=h,w?.appendChild(h)}setPdfPage(f){this.pdfPage=f,this.pdfPageRotate=f.rotate,this.viewport=f.getViewport({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var f=this;return v(function*(){let w=null;try{yield f.annotationLayer.render(f.viewport,"display")}catch(b){w=b}finally{f.eventBus.dispatch("annotationlayerrendered",{source:f,pageNumber:f.id,error:w})}})()}_renderXfaLayer(){var f=this;return v(function*(){let w=null;try{const b=yield f.xfaLayer.render(f.viewport,"display");f.textHighlighter&&f._buildXfaTextContentItems(b.textDivs)}catch(b){w=b}finally{f.eventBus.dispatch("xfalayerrendered",{source:f,pageNumber:f.id,error:w})}})()}_buildXfaTextContentItems(f){var w=this;return v(function*(){const b=yield w.pdfPage.getTextContent(),h=[];for(const E of b.items)h.push(E.str);w.textHighlighter.setTextMapping(f,h),w.textHighlighter.enable()})()}_resetZoomLayer(f=!1){if(!this.zoomLayer)return;const w=this.zoomLayer.firstChild;this.paintedViewportMap.delete(w),w.width=0,w.height=0,f&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:f=!1,keepAnnotationLayer:w=!1,keepXfaLayer:b=!1}={}){this.cancelRendering({keepAnnotationLayer:w,keepXfaLayer:b}),this.renderingState=A.RenderingStates.INITIAL;const h=this.div;h.style.width=Math.floor(this.viewport.width)+"px",h.style.height=Math.floor(this.viewport.height)+"px";const E=h.childNodes,I=f&&this.zoomLayer||null,j=w&&this.annotationLayer?.div||null,q=b&&this.xfaLayer?.div||null;for(let ee=E.length-1;ee>=0;ee--){const Q=E[ee];switch(Q){case I:case j:case q:continue}Q.remove()}h.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),q&&this.xfaLayer.hide(),I||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(ee=>{this.loadingIconDiv?.setAttribute("aria-label",ee)}),h.appendChild(this.loadingIconDiv)}update({scale:f=0,rotation:w=null,optionalContentConfigPromise:b=null}){if(this.scale=f||this.scale,"number"==typeof w&&(this.rotation=w),b instanceof Promise&&(this._optionalContentConfigPromise=b),this.viewport=this.viewport.clone({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:I}=document.documentElement;I.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let E=!1;if(this.canvas&&this.maxCanvasPixels>0){const I=this.outputScale;(Math.floor(this.viewport.width)*I.sx|0)*(Math.floor(this.viewport.height)*I.sy|0)>this.maxCanvasPixels&&(E=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&E)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:f=!1,keepXfaLayer:w=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!f||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!w||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:f,redrawAnnotationLayer:w=!1,redrawXfaLayer:b=!1}){const h=this.viewport.width,E=this.viewport.height,I=this.div;f.style.width=f.parentNode.style.width=I.style.width=Math.floor(h)+"px",f.style.height=f.parentNode.style.height=I.style.height=Math.floor(E)+"px";const j=this.viewport.rotation-this.paintedViewportMap.get(f).rotation,q=Math.abs(j);let ee=1,Q=1;if((90===q||270===q)&&(ee=E/h,Q=h/E),f.style.transform=`rotate(${j}deg) scale(${ee}, ${Q})`,this.textLayer){const he=this.textLayer.viewport,ue=Math.abs(this.viewport.rotation-he.rotation);let N=h/he.width;(90===ue||270===ue)&&(N=h/he.height);const a=this.textLayer.textLayerDiv;let t,r;switch(ue){case 0:t=r=0;break;case 90:t=0,r="-"+a.style.height;break;case 180:t="-"+a.style.width,r="-"+a.style.height;break;case 270:t="-"+a.style.width,r=0;break;default:console.error("Bad rotation value.")}a.style.transform=`rotate(${ue}deg) scale(${N}) translate(${t}, ${r})`,a.style.transformOrigin="0% 0%"}w&&this.annotationLayer&&this._renderAnnotationLayer(),b&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(f,w){return this.viewport.convertToPdfPoint(f,w)}toggleLoadingIconSpinner(f=!1){this.loadingIconDiv?.classList.toggle("notVisible",!f)}draw(){var f=this;this.renderingState!==A.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:w,pdfPage:b}=this;if(!b)return this.renderingState=A.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=A.RenderingStates.RUNNING;const h=document.createElement("div");h.style.width=w.style.width,h.style.height=w.style.height,h.classList.add("canvasWrapper"),this.annotationLayer?.div?w.insertBefore(h,this.annotationLayer.div):w.appendChild(h);let E=null;if(this.textLayerMode!==A.TextLayerMode.DISABLE&&this.textLayerFactory){const Q=document.createElement("div");Q.className="textLayer",Q.style.width=h.style.width,Q.style.height=h.style.height,this.annotationLayer?.div?w.insertBefore(Q,this.annotationLayer.div):w.appendChild(Q),E=this.textLayerFactory.createTextLayerBuilder(Q,this.id-1,this.viewport,this.textLayerMode===A.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=E,c(i,this)!==_.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(w,b,null,this.imageResourcesPath,c(i,this)===_.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&w.appendChild(this.xfaLayer.div);let I=null;this.renderingQueue&&(I=Q=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=A.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=A.RenderingStates.RUNNING,Q()});Q()});const j=function(){var Q=v(function*(he=null){if(q===f.paintTask&&(f.paintTask=null),he instanceof _.RenderingCancelledException)f._renderError=null;else if(f._renderError=he,f.renderingState=A.RenderingStates.FINISHED,f.loadingIconDiv&&(f.loadingIconDiv.remove(),delete f.loadingIconDiv),f._resetZoomLayer(!0),f.eventBus.dispatch("pagerendered",{source:f,pageNumber:f.id,cssTransform:!1,timestamp:performance.now(),error:f._renderError}),he)throw he});return function(){return Q.apply(this,arguments)}}(),q=this.renderer===A.RendererType.SVG?this.paintOnSvg(h):this.paintOnCanvas(h);q.onRenderContinue=I,this.paintTask=q;const ee=q.promise.then(()=>j(null).then(()=>{if(E){const Q=b.streamTextContent({includeMarkedContent:!0});E.setTextContentStream(Q),E.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(Q){return j(Q)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(w,b,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=Q=>{Q.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(he=>{if(!he||!this.canvas)return;const fe=this.structTreeLayer.render(he);fe.classList.add("structTree"),this.canvas.appendChild(fe)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(b)),w.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ee}paintOnCanvas(f){const w=(0,_.createPromiseCapability)(),b={promise:w.promise,onRenderContinue(a){a()},cancel(){N.cancel()}},h=this.viewport,E=document.createElement("canvas");E.hidden=!0;let I=!0;const j=function(){I&&(E.hidden=!1,I=!1)};f.appendChild(E),this.canvas=E;const q=E.getContext("2d",{alpha:!1}),ee=this.outputScale=new A.OutputScale;if(this.useOnlyCssZoom){const a=h.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});ee.sx*=a.width/h.width,ee.sy*=a.height/h.height}if(this.maxCanvasPixels>0){const t=Math.sqrt(this.maxCanvasPixels/(h.width*h.height));ee.sx>t||ee.sy>t?(ee.sx=t,ee.sy=t,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const Q=(0,A.approximateFraction)(ee.sx),he=(0,A.approximateFraction)(ee.sy);E.width=(0,A.roundToDivide)(h.width*ee.sx,Q[0]),E.height=(0,A.roundToDivide)(h.height*ee.sy,he[0]),E.style.width=(0,A.roundToDivide)(h.width,Q[1])+"px",E.style.height=(0,A.roundToDivide)(h.height,he[1])+"px",this.paintedViewportMap.set(E,h);const ue={canvasContext:q,transform:ee.scaled?[ee.sx,0,0,ee.sy,0,0]:null,viewport:this.viewport,annotationMode:c(i,this),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},N=this.pdfPage.render(ue);return N.onContinue=function(a){j(),b.onRenderContinue?b.onRenderContinue(a):a()},N.promise.then(function(){j(),w.resolve()},function(a){j(),w.reject(a)}),b}paintOnSvg(f){let w=!1;const b=()=>{if(w)throw new _.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},h=this.pdfPage,E=this.viewport.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:h.getOperatorList({annotationMode:c(i,this)}).then(j=>(b(),new _.SVGGraphics(h.commonObjs,h.objs).getSVG(j,E).then(ee=>{b(),this.svg=ee,this.paintedViewportMap.set(ee,E),ee.style.width=f.style.width,ee.style.height=f.style.height,this.renderingState=A.RenderingStates.FINISHED,f.appendChild(ee)}))),onRenderContinue(j){j()},cancel(){w=!0}}}setPageLabel(f){this.pageLabel="string"==typeof f?f:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.compatibilityParams=g.OptionKind=g.AppOptions=void 0;const L=Object.create(null);g.compatibilityParams=L;{const n=navigator.userAgent||"",i=navigator.platform||"",d=navigator.maxTouchPoints||1,P=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===i&&d>1||P)&&(L.maxCanvasPixels=5242880)}const _={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};g.OptionKind=_;const A={annotationMode:{value:2,kind:_.VIEWER+_.PREFERENCE},cursorToolOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:_.VIEWER},defaultZoomValue:{value:"",kind:_.VIEWER+_.PREFERENCE},disableHistory:{value:!1,kind:_.VIEWER},disablePageLabels:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePermissions:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:_.VIEWER+_.PREFERENCE},enableScripting:{value:!0,kind:_.VIEWER+_.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:_.VIEWER},externalLinkTarget:{value:0,kind:_.VIEWER+_.PREFERENCE},historyUpdateUrl:{value:!1,kind:_.VIEWER+_.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},imageResourcesPath:{value:"./images/",kind:_.VIEWER},maxCanvasPixels:{value:16777216,compatibility:L.maxCanvasPixels,kind:_.VIEWER},pageColorsBackground:{value:"Canvas",kind:_.VIEWER+_.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:_.VIEWER+_.PREFERENCE},pdfBugEnabled:{value:!1,kind:_.VIEWER+_.PREFERENCE},printResolution:{value:150,kind:_.VIEWER},renderer:{value:"canvas",kind:_.VIEWER},sidebarViewOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},scrollModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},spreadModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},textLayerMode:{value:1,kind:_.VIEWER+_.PREFERENCE},useOnlyCssZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},viewerCssTheme:{value:0,kind:_.VIEWER+_.PREFERENCE},viewOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},cMapPacked:{value:!0,kind:_.API},cMapUrl:{value:"../web/cmaps/",kind:_.API},disableAutoFetch:{value:!1,kind:_.API+_.PREFERENCE},disableFontFace:{value:!1,kind:_.API+_.PREFERENCE},disableRange:{value:!1,kind:_.API+_.PREFERENCE},disableStream:{value:!1,kind:_.API+_.PREFERENCE},docBaseUrl:{value:"",kind:_.API},enableXfa:{value:!0,kind:_.API+_.PREFERENCE},fontExtraProperties:{value:!1,kind:_.API},isEvalSupported:{value:!0,kind:_.API},maxImageSize:{value:-1,kind:_.API},pdfBug:{value:!1,kind:_.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:_.API},verbosity:{value:1,kind:_.API},workerPort:{value:null,kind:_.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:_.WORKER}};A.disablePreferences={value:!1,kind:_.VIEWER},A.locale={value:navigator.language||"en-US",kind:_.VIEWER},A.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:_.VIEWER},A.renderer.kind+=_.PREFERENCE;const F=Object.create(null);g.AppOptions=class y{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(i){const d=F[i];if(void 0!==d)return d;const P=A[i];return void 0!==P?P.compatibility??P.value:void 0}static getAll(i=null){const d=Object.create(null);for(const P in A){const f=A[P];if(i){if(!(i&f.kind))continue;if(i===_.PREFERENCE){const b=f.value,h=typeof b;if("boolean"===h||"string"===h||"number"===h&&Number.isInteger(b)){d[P]=b;continue}throw new Error(`Invalid type for preference: ${P}`)}}const w=F[P];d[P]=void 0!==w?w:f.compatibility??f.value}return d}static set(i,d){F[i]=d}static setAll(i){for(const d in i)F[d]=i[d]}static remove(i){delete F[i]}static _hasUserOptions(){return Object.keys(F).length>0}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFRenderingQueue=void 0;var _=L(3),A=L(6);g.PDFRenderingQueue=class y{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(i){this.pdfViewer=i}setThumbnailViewer(i){this.pdfThumbnailViewer=i}isHighestPriority(i){return this.highestPriorityPage===i.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(i){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(i)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(i,d,P,f=!1){const w=i.views,b=w.length;if(0===b)return null;for(let q=0;q<b;q++){const ee=w[q].view;if(!this.isViewFinished(ee))return ee}const h=i.first.id,E=i.last.id;if(E-h+1>b){const q=i.ids;for(let ee=1,Q=E-h;ee<Q;ee++){const he=P?h+ee:E-ee;if(q.has(he))continue;const fe=d[he-1];if(!this.isViewFinished(fe))return fe}}let I=P?E:h-2,j=d[I];return j&&!this.isViewFinished(j)||f&&(I+=P?1:-1,j=d[I],j&&!this.isViewFinished(j))?j:null}isViewFinished(i){return i.renderingState===A.RenderingStates.FINISHED}renderView(i){switch(i.renderingState){case A.RenderingStates.FINISHED:return!1;case A.RenderingStates.PAUSED:this.highestPriorityPage=i.renderingId,i.resume();break;case A.RenderingStates.RUNNING:this.highestPriorityPage=i.renderingId;break;case A.RenderingStates.INITIAL:this.highestPriorityPage=i.renderingId,i.draw().finally(()=>{this.renderHighestPriority()}).catch(d=>{d instanceof _.RenderingCancelledException||console.error(`renderView: "${d}"`)})}return!0}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextHighlighter=void 0,g.TextHighlighter=class L{constructor({findController:A,eventBus:F,pageIndex:y}){this.findController=A,this.matches=[],this.eventBus=F,this.pageIdx=y,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(A,F){this.textDivs=A,this.textContentItemsStr=F}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=A=>{(A.pageIndex===this.pageIdx||-1===A.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(A,F){if(!A)return[];const{textContentItemsStr:y}=this;let n=0,i=0;const d=y.length-1,P=[];for(let f=0,w=A.length;f<w;f++){let b=A[f];for(;n!==d&&b>=i+y[n].length;)i+=y[n].length,n++;n===y.length&&console.error("Could not find a matching mapping");const h={begin:{divIdx:n,offset:b-i}};for(b+=F[f];n!==d&&b>i+y[n].length;)i+=y[n].length,n++;h.end={divIdx:n,offset:b-i},P.push(h)}return P}_renderMatches(A){if(0===A.length)return;const{findController:F,pageIdx:y}=this,{textContentItemsStr:n,textDivs:i}=this,d=y===F.selected.pageIdx,P=F.selected.matchIdx;let w=null;function h(q,ee){const Q=q.divIdx;return i[Q].textContent="",E(Q,0,q.offset,ee)}function E(q,ee,Q,he){let fe=i[q];if(fe.nodeType===Node.TEXT_NODE){const a=document.createElement("span");fe.parentNode.insertBefore(a,fe),a.appendChild(fe),i[q]=a,fe=a}const ue=n[q].substring(ee,Q),N=document.createTextNode(ue);if(he){const a=document.createElement("span");return a.className=`${he} appended`,a.appendChild(N),fe.appendChild(a),he.includes("selected")?a.offsetLeft:0}return fe.appendChild(N),0}let I=P,j=I+1;if(F.state.highlightAll)I=0,j=A.length;else if(!d)return;for(let q=I;q<j;q++){const ee=A[q],Q=ee.begin,he=ee.end,fe=d&&q===P,ue=fe?" selected":"";let N=0;if(w&&Q.divIdx===w.divIdx?E(w.divIdx,w.offset,Q.offset):(null!==w&&E(w.divIdx,w.offset,undefined),h(Q)),Q.divIdx===he.divIdx)N=E(Q.divIdx,Q.offset,he.offset,"highlight"+ue);else{N=E(Q.divIdx,Q.offset,undefined,"highlight begin"+ue);for(let a=Q.divIdx+1,t=he.divIdx;a<t;a++)i[a].className="highlight middle"+ue;h(he,"highlight end"+ue)}w=he,fe&&F.scrollMatchIntoView({element:i[Q.divIdx],selectedLeft:N,pageIndex:y,matchIndex:P})}w&&E(w.divIdx,w.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:A,matches:F,pageIdx:y}=this,{textContentItemsStr:n,textDivs:i}=this;let d=-1;for(let w=0,b=F.length;w<b;w++){const h=F[w];for(let I=Math.max(d,h.begin.divIdx),j=h.end.divIdx;I<=j;I++){const q=i[I];q.textContent=n[I],q.className=""}d=h.end.divIdx+1}A?.highlightMatches&&(this.matches=this._convertMatches(A.pageMatches[y]||null,A.pageMatchesLength[y]||null),this._renderMatches(this.matches))}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DownloadManager=void 0;var _=L(3);function A(y,n){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=y,i.target="_parent","download"in i&&(i.download=n),(document.body||document.documentElement).appendChild(i),i.click(),i.remove()}g.DownloadManager=class F{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(n,i){(0,_.createValidAbsoluteUrl)(n,"http://example.com")?A(n+"#pdfjs.action=download",i):console.error(`downloadUrl - not a valid URL: ${n}`)}downloadData(n,i,d){A(URL.createObjectURL(new Blob([n],{type:d})),i)}openOrDownloadData(n,i,d){const P=(0,_.isPdfFile)(d),f=P?"application/pdf":"";if(P){let b,w=this._openBlobUrls.get(n);w||(w=URL.createObjectURL(new Blob([i],{type:f})),this._openBlobUrls.set(n,w)),b="?file="+encodeURIComponent(w+"#"+d);try{return window.open(b),!0}catch(h){console.error(`openOrDownloadData: ${h}`),URL.revokeObjectURL(w),this._openBlobUrls.delete(n)}}return this.downloadData(i,d,f),!1}download(n,i,d,P="download"){A(URL.createObjectURL(n),d)}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WaitOnType=g.EventBus=g.AutomationEventBus=void 0,g.waitOnEventOrTimeout=function _({target:y,name:n,delay:i=0}){return new Promise(function(d,P){if("object"!=typeof y||!n||"string"!=typeof n||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function f(E){y instanceof A?y._off(n,w):y.removeEventListener(n,w),h&&clearTimeout(h),d(E)}const w=f.bind(null,L.EVENT);y instanceof A?y._on(n,w):y.addEventListener(n,w);const b=f.bind(null,L.TIMEOUT),h=setTimeout(b,i)})};const L={EVENT:"event",TIMEOUT:"timeout"};g.WaitOnType=L;class A{constructor(){this._listeners=Object.create(null)}on(n,i,d=null){this._on(n,i,{external:!0,once:d?.once})}off(n,i,d=null){this._off(n,i,{external:!0,once:d?.once})}dispatch(n,i){const d=this._listeners[n];if(!d||0===d.length)return;let P;for(const{listener:f,external:w,once:b}of d.slice(0))b&&this._off(n,f),w?(P||=[]).push(f):f(i);if(P){for(const f of P)f(i);P=null}}_on(n,i,d=null){(this._listeners[n]||=[]).push({listener:i,external:!0===d?.external,once:!0===d?.once})}_off(n,i,d=null){const P=this._listeners[n];if(P)for(let f=0,w=P.length;f<w;f++)if(P[f].listener===i)return void P.splice(f,1)}}g.EventBus=A,g.AutomationEventBus=class F extends A{dispatch(n,i){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericL10n=void 0,L(19);var _=L(4);const A=document.webL10n;g.GenericL10n=class F{constructor(n){this._lang=n,this._ready=new Promise((i,d)=>{A.setLanguage((0,_.fixupLangCode)(n),()=>{i(A)})})}getLanguage(){var n=this;return v(function*(){return(yield n._ready).getLanguage()})()}getDirection(){var n=this;return v(function*(){return(yield n._ready).getDirection()})()}get(n,i=null,d=(0,_.getL10nFallback)(n,i)){var P=this;return v(function*(){return(yield P._ready).get(n,i,d)})()}translate(n){var i=this;return v(function*(){return(yield i._ready).translate(n)})()}}},()=>{document.webL10n=function(W,g){var _={},A="",F="textContent",y="",n={},i="loading",d=!0;function h(a,t,r){t=t||function(p){},r=r||function(){};var o=new XMLHttpRequest;o.open("GET",a,d),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=utf-8"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0===o.status?t(o.responseText):r())},o.onerror=r,o.ontimeout=r;try{o.send(null)}catch{r()}}function I(a,t){a&&(a=a.toLowerCase()),t=t||function(){},function j(){_={},A="",y=""}(),y=a;var r=function P(){return g.querySelectorAll('link[type="application/l10n"]')}(),o=r.length;if(0!==o){var T,C=0;T=function(){++C>=o&&(t(),i="complete")};for(var G=0;G<o;G++)new k(r[G]).load(a,T)}else{var u=function f(){var a=g.querySelector('script[type="application/l10n"]');return a?JSON.parse(a.innerHTML):null}();if(u&&u.locales&&u.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(_=u.locales[a])){var p=u.default_locale.toLowerCase();for(var s in u.locales){if((s=s.toLowerCase())===a){_=u.locales[a];break}s===p&&(_=u.locales[p])}}t()}else console.log("no resource to load, early way out");i="complete"}function k(le){var ce=le.href;this.load=function(ge,_e){!function E(a,t,r,o){var u=a.replace(/[^\/]*$/,"")||"./";function p(T){return T.lastIndexOf("\\")<0?T:T.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}h(a,function(T){A+=T,function s(T,C){var k={},G=/^\s*|\s*$/,X=/^\s*#|^\s*$/,le=/^\s*\[(.*)\]\s*$/,ce=/^\s*@import\s+url\((.*)\)\s*$/i,ge=/^([^=\s]*)\s*=\s*(.+)$/;function _e(m,S,re){var ae=m.replace(G,"").split(/[\r\n]+/),te="*",J=t.split("-",1)[0],M=!1,Z="";!function R(){for(;;){if(!ae.length)return void re();var ne=ae.shift();if(!X.test(ne)){if(S){if(Z=le.exec(ne)){te=Z[1].toLowerCase(),M="*"!==te&&te!==t&&te!==J;continue}if(M)continue;if(Z=ce.exec(ne))return void de(u+Z[1],R)}var oe=ne.match(ge);oe&&3==oe.length&&(k[oe[1]]=p(oe[2]))}}}()}function de(m,S){h(m,function(re){_e(re,!1,S)},function(){console.warn(m+" not found."),S()})}_e(T,!0,function(){C(k)})}(T,function(C){for(var k in C){var G,X,le=k.lastIndexOf(".");le>0?(G=k.substring(0,le),X=k.substring(le+1)):(G=k,X=F),_[G]||(_[G]={}),_[G][X]=C[k]}r&&r()})},o)}(ce,ge,_e,function(){console.warn(ce+" not found."),console.warn('"'+ge+'" resource not found'),y="",_e()})}}}function ee(a,t,r){var o=_[a];if(!o){if(console.warn("#"+a+" is undefined."),!r)return null;o=r}var u={};for(var p in o){var s=o[p];s=he(s=Q(s,t,a,p),t,a),u[p]=s}return u}function Q(a,t,r,o){var p=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(a);if(!p||!p.length)return a;var C,s=p[1],T=p[2];return t&&T in t?C=t[T]:T in _&&(C=_[T]),s in n&&(a=(0,n[s])(a,C,r,o)),a}function he(a,t,r){return a.replace(/\{\{\s*(.+?)\s*\}\}/g,function(u,p){return t&&p in t?t[p]:p in _?_[p]:(console.log("argument {{"+p+"}} for #"+r+" is undefined."),u)})}function fe(a){var t=function b(a){if(!a)return{};var t=a.getAttribute("data-l10n-id"),r=a.getAttribute("data-l10n-args"),o={};if(r)try{o=JSON.parse(r)}catch{console.warn("could not parse arguments for #"+t)}return{id:t,args:o}}(a);if(t.id){var r=ee(t.id,t.args);if(!r)return void console.warn("#"+t.id+" is undefined.");if(r[F]){if(0===function ue(a){if(a.children)return a.children.length;if(typeof a.childElementCount<"u")return a.childElementCount;for(var t=0,r=0;r<a.childNodes.length;r++)t+=1===a.nodeType?1:0;return t}(a))a[F]=r[F];else{for(var o=a.childNodes,u=!1,p=0,s=o.length;p<s;p++)3===o[p].nodeType&&/\S/.test(o[p].nodeValue)&&(u?o[p].nodeValue="":(o[p].nodeValue=r[F],u=!0));if(!u){var T=g.createTextNode(r[F]);a.insertBefore(T,a.firstChild)}}delete r[F]}for(var C in r)a[C]=r[C]}}return n.plural=function(a,t,r,o){var u=parseFloat(t);if(isNaN(u)||o!=F)return a;n._pluralRules||(n._pluralRules=function q(a){function r(s,T){return-1!==T.indexOf(s)}function o(s,T,C){return T<=s&&s<=C}var u={0:function(s){return"other"},1:function(s){return o(s%100,3,10)?"few":0===s?"zero":o(s%100,11,99)?"many":2==s?"two":1==s?"one":"other"},2:function(s){return 0!==s&&s%10==0?"many":2==s?"two":1==s?"one":"other"},3:function(s){return 1==s?"one":"other"},4:function(s){return o(s,0,1)?"one":"other"},5:function(s){return o(s,0,2)&&2!=s?"one":"other"},6:function(s){return 0===s?"zero":s%10==1&&s%100!=11?"one":"other"},7:function(s){return 2==s?"two":1==s?"one":"other"},8:function(s){return o(s,3,6)?"few":o(s,7,10)?"many":2==s?"two":1==s?"one":"other"},9:function(s){return 0===s||1!=s&&o(s%100,1,19)?"few":1==s?"one":"other"},10:function(s){return o(s%10,2,9)&&!o(s%100,11,19)?"few":s%10!=1||o(s%100,11,19)?"other":"one"},11:function(s){return o(s%10,2,4)&&!o(s%100,12,14)?"few":s%10==0||o(s%10,5,9)||o(s%100,11,14)?"many":s%10==1&&s%100!=11?"one":"other"},12:function(s){return o(s,2,4)?"few":1==s?"one":"other"},13:function(s){return o(s%10,2,4)&&!o(s%100,12,14)?"few":1!=s&&o(s%10,0,1)||o(s%10,5,9)||o(s%100,12,14)?"many":1==s?"one":"other"},14:function(s){return o(s%100,3,4)?"few":s%100==2?"two":s%100==1?"one":"other"},15:function(s){return 0===s||o(s%100,2,10)?"few":o(s%100,11,19)?"many":1==s?"one":"other"},16:function(s){return s%10==1&&11!=s?"one":"other"},17:function(s){return 3==s?"few":0===s?"zero":6==s?"many":2==s?"two":1==s?"one":"other"},18:function(s){return 0===s?"zero":o(s,0,2)&&0!==s&&2!=s?"one":"other"},19:function(s){return o(s,2,10)?"few":o(s,0,1)?"one":"other"},20:function(s){return!o(s%10,3,4)&&s%10!=9||o(s%100,10,19)||o(s%100,70,79)||o(s%100,90,99)?s%1e6==0&&0!==s?"many":s%10!=2||r(s%100,[12,72,92])?s%10!=1||r(s%100,[11,71,91])?"other":"one":"two":"few"},21:function(s){return 0===s?"zero":1==s?"one":"other"},22:function(s){return o(s,0,1)||o(s,11,99)?"one":"other"},23:function(s){return o(s%10,1,2)||s%20==0?"one":"other"},24:function(s){return o(s,3,10)||o(s,13,19)?"few":r(s,[2,12])?"two":r(s,[1,11])?"one":"other"}},p={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[a.replace(/-.*$/,"")];return p in u?u[p]:(console.warn("plural form unknown for ["+a+"]"),function(){return"other"})}(y));var p="["+n._pluralRules(u)+"]";return 0===u&&r+"[zero]"in _?a=_[r+"[zero]"][o]:1==u&&r+"[one]"in _?a=_[r+"[one]"][o]:2==u&&r+"[two]"in _?a=_[r+"[two]"][o]:r+p in _?a=_[r+p][o]:r+"[other]"in _&&(a=_[r+"[other]"][o]),a},{get:function(a,t,r){var p,o=a.lastIndexOf("."),u=F;o>0&&(u=a.substring(o+1),a=a.substring(0,o)),r&&((p={})[u]=r);var s=ee(a,t,p);return s&&u in s?s[u]:"{{"+a+"}}"},getData:function(){return _},getText:function(){return A},getLanguage:function(){return y},setLanguage:function(a,t){I(a,function(){t&&t()})},getDirection:function(){var t=y.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function N(a){for(var t=function w(a){return a?a.querySelectorAll("*[data-l10n-id]"):[]}(a=a||g.documentElement),r=t.length,o=0;o<r;o++)fe(t[o]);fe(a)},getReadyState:function(){return i},ready:function(a){a&&("complete"==i||"interactive"==i?W.setTimeout(function(){a()}):g.addEventListener&&g.addEventListener("localized",function t(){g.removeEventListener("localized",t),a()}))}}}(window,document)},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFindController=g.FindState=void 0;var _=L(6),A=L(3),F=L(21);const y={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};g.FindState=y;const P={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},f=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),w=[...f.values()].map(m=>String.fromCharCode(m)).join(""),b=new RegExp("\\p{M}+","gu"),h=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),E=new RegExp("([^\\p{M}])\\p{M}*$","u"),I=new RegExp("^\\p{M}*([^\\p{M}])","u");let j=null;function q(m){if(!j){const oe=Object.keys(P).join("");j=new RegExp(`([${oe}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const S=[];let re;for(;null!==(re=b.exec(m));)S.push([re[0].length,re.index]);let ae=m.normalize("NFD");const te=[[0,0]];let J=0,M=0,Z=0,R=0,ne=!1;return ae=ae.replace(j,(oe,me,ve,se,Y,K)=>{if(K-=Z,me){const pe=P[oe],be=pe.length;for(let ye=1;ye<be;ye++)te.push([K-M+ye,M-ye]);return M-=be-1,pe}if(ve){const pe=ve.endsWith("\n"),be=pe?ve.length-2:ve.length;ne=!0;let ye=be;K+R===S[J]?.[1]&&(ye-=S[J][0],++J);for(let Ae=1;Ae<ye+1;Ae++)te.push([K-1-M+Ae,M-Ae]);return M-=ye,Z+=ye,pe?(te.push([(K+=be-1)-M+1,1+M]),M+=1,Z+=1,R+=1,ve.slice(0,be)):ve}return se?(te.push([K-M+1,1+M]),M+=1,Z+=1,R+=1,se.charAt(0)):(te.push([K-M+1,M-1]),M-=1,Z+=1,R+=1," ")}),te.push([ae.length,M]),[ae,te,ne]}function ee(m,S,re){if(!m)return[S,re];const ae=S,te=S+re;let J=(0,_.binarySearchFirstItem)(m,Z=>Z[0]>=ae);m[J][0]>ae&&--J;let M=(0,_.binarySearchFirstItem)(m,Z=>Z[0]>=te,J);return m[M][0]>te&&--M,[ae+m[J][1],re+m[M][1]-m[J][1]]}var Q=new WeakSet;function fe(m){if(!m)return;const S=this._pdfDocument,{type:re}=m;(null===this._state||D(Q,this,a).call(this,m))&&(this._dirtyMatch=!0),this._state=m,"highlightallchange"!==re&&D(Q,this,de).call(this,y.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||S&&this._pdfDocument!==S)return;D(Q,this,p).call(this);const ae=!this._highlightMatches,te=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),re?this._dirtyMatch?D(Q,this,C).call(this):"again"===re?(D(Q,this,C).call(this),ae&&this._state.highlightAll&&D(Q,this,T).call(this)):"highlightallchange"===re?(te?D(Q,this,C).call(this):this._highlightMatches=!0,D(Q,this,T).call(this)):D(Q,this,C).call(this):this._findTimeout=setTimeout(()=>{D(Q,this,C).call(this),this._findTimeout=null},250)})}function ue(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,A.createPromiseCapability)()}function N(m){return m._state.query!==m._rawQuery&&(m._rawQuery=m._state.query,[m._normalizedQuery]=q(m._state.query)),m._normalizedQuery}function a(m){if(m.query!==this._state.query)return!0;switch(m.type){case"again":const S=this._selected.pageIdx+1,re=this._linkService;return S>=1&&S<=re.pagesCount&&S!==re.page&&!re.isPageVisible(S);case"highlightallchange":return!1}return!0}function t(m,S,re){let ae=m.slice(0,S).match(E);if(ae){const te=m.charCodeAt(S),J=ae[1].charCodeAt(0);if((0,F.getCharacterType)(te)===(0,F.getCharacterType)(J))return!1}if(ae=m.slice(S+re).match(I),ae){const te=m.charCodeAt(S+re-1),J=ae[1].charCodeAt(0);if((0,F.getCharacterType)(te)===(0,F.getCharacterType)(J))return!1}return!0}function r(m,S,re,ae){const te=[],J=[],M=this._pageDiffs[re];let Z;for(;null!==(Z=m.exec(ae));){if(S&&!D(Q,this,t).call(this,ae,Z.index,Z[0].length))continue;const[R,ne]=ee(M,Z.index,Z[0].length);ne&&(te.push(R),J.push(ne))}this._pageMatches[re]=te,this._pageMatchesLength[re]=J}function o(m,S){const{matchDiacritics:re}=this._state;let ae=!1;return(m=m.replace(h,(J,M,Z,R,ne,oe)=>M?`[ ]*\\${M}[ ]*`:Z?`[ ]*${Z}[ ]*`:R?"[ ]+":re?ne||oe:ne?f.has(ne.charCodeAt(0))?ne:"":S?(ae=!0,`${oe}\\p{M}*`):oe)).endsWith("[ ]*")&&(m=m.slice(0,m.length-4)),re&&S&&(ae=!0,m=`${m}(?=[${w}]|[^\\p{M}]|$)`),[ae,m]}function u(m){let S=e(Q,this,N);if(0===S.length)return;const{caseSensitive:re,entireWord:ae,phraseSearch:te}=this._state,J=this._pageContents[m],M=this._hasDiacritics[m];let Z=!1;if(te)[Z,S]=D(Q,this,o).call(this,S,M);else{const oe=S.match(/\S+/g);oe&&(S=oe.sort().reverse().map(me=>{const[ve,se]=D(Q,this,o).call(this,me,M);return Z||=ve,`(${se})`}).join("|"))}S=new RegExp(S,`g${Z?"u":""}${re?"":"i"}`),D(Q,this,r).call(this,S,ae,m,J),this._state.highlightAll&&D(Q,this,s).call(this,m),this._resumePageIdx===m&&(this._resumePageIdx=null,D(Q,this,G).call(this));const ne=this._pageMatches[m].length;ne>0&&(this._matchesCountTotal+=ne,D(Q,this,_e).call(this))}function p(){if(this._extractTextPromises.length>0)return;let m=Promise.resolve();for(let S=0,re=this._linkService.pagesCount;S<re;S++){const ae=(0,A.createPromiseCapability)();this._extractTextPromises[S]=ae.promise,m=m.then(()=>this._pdfDocument.getPage(S+1).then(te=>te.getTextContent()).then(te=>{const J=[];for(const M of te.items)J.push(M.str),M.hasEOL&&J.push("\n");[this._pageContents[S],this._pageDiffs[S],this._hasDiacritics[S]]=q(J.join("")),ae.resolve()},te=>{console.error(`Unable to get text content for page ${S+1}`,te),this._pageContents[S]="",this._pageDiffs[S]=null,this._hasDiacritics[S]=!1,ae.resolve()}))}}function s(m){this._scrollMatches&&this._selected.pageIdx===m&&(this._linkService.page=m+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:m})}function T(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function C(){const m=this._state.findPrevious,S=this._linkService.page-1,re=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=S,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,D(Q,this,T).call(this);for(let te=0;te<re;te++)this._pendingFindMatches.has(te)||(this._pendingFindMatches.add(te),this._extractTextPromises[te].then(()=>{this._pendingFindMatches.delete(te),D(Q,this,u).call(this,te)}))}if(""===e(Q,this,N))return void D(Q,this,de).call(this,y.FOUND);if(this._resumePageIdx)return;const ae=this._offset;if(this._pagesToSearch=re,null!==ae.matchIdx){if(!m&&ae.matchIdx+1<this._pageMatches[ae.pageIdx].length||m&&ae.matchIdx>0)return ae.matchIdx=m?ae.matchIdx-1:ae.matchIdx+1,void D(Q,this,le).call(this,!0);D(Q,this,X).call(this,m)}D(Q,this,G).call(this)}function k(m){const S=this._offset,re=m.length,ae=this._state.findPrevious;return re?(S.matchIdx=ae?re-1:0,D(Q,this,le).call(this,!0),!0):(D(Q,this,X).call(this,ae),!!(S.wrapped&&(S.matchIdx=null,this._pagesToSearch<0))&&(D(Q,this,le).call(this,!1),!0))}function G(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let m=null;do{const S=this._offset.pageIdx;if(m=this._pageMatches[S],!m){this._resumePageIdx=S;break}}while(!D(Q,this,k).call(this,m))}function X(m){const S=this._offset,re=this._linkService.pagesCount;S.pageIdx=m?S.pageIdx-1:S.pageIdx+1,S.matchIdx=null,this._pagesToSearch--,(S.pageIdx>=re||S.pageIdx<0)&&(S.pageIdx=m?re-1:0,S.wrapped=!0)}function le(m=!1){let S=y.NOT_FOUND;const re=this._offset.wrapped;if(this._offset.wrapped=!1,m){const ae=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,S=re?y.WRAPPED:y.FOUND,-1!==ae&&ae!==this._selected.pageIdx&&D(Q,this,s).call(this,ae)}D(Q,this,de).call(this,S,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,D(Q,this,s).call(this,this._selected.pageIdx))}function ce(m){const S=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||S&&this._pdfDocument!==S||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),D(Q,this,de).call(this,y.FOUND),this._highlightMatches=!1,D(Q,this,T).call(this))})}function ge(){const{pageIdx:m,matchIdx:S}=this._selected;let re=0,ae=this._matchesCountTotal;if(-1!==S){for(let te=0;te<m;te++)re+=this._pageMatches[te]?.length||0;re+=S+1}return(re<1||re>ae)&&(re=ae=0),{current:re,total:ae}}function _e(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:D(Q,this,ge).call(this)})}function de(m,S=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:m,previous:S,matchesCount:D(Q,this,ge).call(this),rawQuery:this._state?.query??null})}g.PDFFindController=class he{constructor({linkService:S,eventBus:re}){O(this,Q),this._linkService=S,this._eventBus=re,D(Q,this,ue).call(this),re._on("find",D(Q,this,fe).bind(this)),re._on("findbarclose",D(Q,this,ce).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(S){this._pdfDocument&&D(Q,this,ue).call(this),S&&(this._pdfDocument=S,this._firstPageCapability.resolve())}scrollMatchIntoView({element:S=null,selectedLeft:re=0,pageIndex:ae=-1,matchIndex:te=-1}){this._scrollMatches&&S&&-1!==te&&te===this._selected.matchIdx&&-1!==ae&&ae===this._selected.pageIdx&&(this._scrollMatches=!1,(0,_.scrollIntoView)(S,{top:-50,left:re+-400},!0))}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterType=void 0,g.getCharacterType=function b(h){return function _(h){return h<11904}(h)?function A(h){return!(65408&h)}(h)?function n(h){return 32===h||9===h||13===h||10===h}(h)?L.SPACE:function F(h){return h>=97&&h<=122||h>=65&&h<=90}(h)||function y(h){return h>=48&&h<=57}(h)||95===h?L.ALPHA_LETTER:L.PUNCT:function w(h){return 3584==(65408&h)}(h)?L.THAI_LETTER:160===h?L.SPACE:L.ALPHA_LETTER:function i(h){return h>=13312&&h<=40959||h>=63744&&h<=64255}(h)?L.HAN_LETTER:function d(h){return h>=12448&&h<=12543}(h)?L.KATAKANA_LETTER:function P(h){return h>=12352&&h<=12447}(h)?L.HIRAGANA_LETTER:function f(h){return h>=65376&&h<=65439}(h)?L.HALFWIDTH_KATAKANA_LETTER:L.ALPHA_LETTER};const L={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};g.CharacterType=L},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFHistory=void 0,g.isDestArraysEqual=f,g.isDestHashesEqual=P;var _=L(6),A=L(17);function i(){return document.location.hash}function P(w,b){return"string"==typeof w&&"string"==typeof b&&(w===b||(0,_.parseQueryString)(w).get("nameddest")===b)}function f(w,b){function h(E,I){if(typeof E!=typeof I||Array.isArray(E)||Array.isArray(I))return!1;if(null!==E&&"object"==typeof E&&null!==I){if(Object.keys(E).length!==Object.keys(I).length)return!1;for(const j in E)if(!h(E[j],I[j]))return!1;return!0}return E===I||Number.isNaN(E)&&Number.isNaN(I)}if(!Array.isArray(w)||!Array.isArray(b)||w.length!==b.length)return!1;for(let E=0,I=w.length;E<I;E++)if(!h(w[E],b[E]))return!1;return!0}g.PDFHistory=class d{constructor({linkService:b,eventBus:h}){this.linkService=b,this.eventBus=h,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",E=>{this._isPagesLoaded=!!E.pagesCount},{once:!0})})}initialize({fingerprint:b,resetHistory:h=!1,updateUrl:E=!1}){if(!b||"string"!=typeof b)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const I=""!==this._fingerprint&&this._fingerprint!==b;this._fingerprint=b,this._updateUrl=!0===E,this._initialized=!0,this._bindEvents();const j=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=i(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(j,!0)||h){const{hash:ee,page:Q,rotation:he}=this._parseCurrentHash(!0);return!ee||I||h?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:ee,page:Q,rotation:he},!0)}const q=j.destination;this._updateInternalState(q,j.uid,!0),void 0!==q.rotation&&(this._initialRotation=q.rotation),q.dest?(this._initialBookmark=JSON.stringify(q.dest),this._destination.page=null):q.hash?this._initialBookmark=q.hash:q.page&&(this._initialBookmark=`page=${q.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:b=null,explicitDest:h,pageNumber:E}){if(!this._initialized)return;if(b&&"string"!=typeof b)return void console.error(`PDFHistory.push: "${b}" is not a valid namedDest parameter.`);if(!Array.isArray(h))return void console.error(`PDFHistory.push: "${h}" is not a valid explicitDest parameter.`);if(!this._isValidPage(E)&&(null!==E||this._destination))return void console.error(`PDFHistory.push: "${E}" is not a valid pageNumber parameter.`);const I=b||JSON.stringify(h);if(!I)return;let j=!1;if(this._destination&&(P(this._destination.hash,I)||f(this._destination.dest,h))){if(this._destination.page)return;j=!0}this._popStateInProgress&&!j||(this._pushOrReplaceState({dest:h,hash:I,page:E,rotation:this.linkService.rotation},j),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(b){if(this._initialized){if(!this._isValidPage(b))return void console.error(`PDFHistory.pushPage: "${b}" is not a valid page number.`);this._destination?.page!==b&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${b}`,page:b,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(b,h=!1){const E=h||!this._destination,I={fingerprint:this._fingerprint,uid:E?this._uid:this._uid+1,destination:b};let j;if(this._updateInternalState(b,I.uid),this._updateUrl&&b?.hash){const q=document.location.href.split("#")[0];q.startsWith("file://")||(j=`${q}#${b.hash}`)}E?window.history.replaceState(I,"",j):window.history.pushState(I,"",j)}_tryPushCurrentPosition(b=!1){if(!this._position)return;let h=this._position;if(b&&(h=Object.assign(Object.create(null),this._position),h.temporary=!0),!this._destination)return void this._pushOrReplaceState(h);if(this._destination.temporary)return void this._pushOrReplaceState(h,!0);if(this._destination.hash===h.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let E=!1;if(this._destination.page>=h.first&&this._destination.page<=h.page){if(void 0!==this._destination.dest||!this._destination.first)return;E=!0}this._pushOrReplaceState(h,E)}_isValidPage(b){return Number.isInteger(b)&&b>0&&b<=this.linkService.pagesCount}_isValidState(b,h=!1){if(!b)return!1;if(b.fingerprint!==this._fingerprint){if(!h)return!1;{if("string"!=typeof b.fingerprint||b.fingerprint.length!==this._fingerprint.length)return!1;const[E]=performance.getEntriesByType("navigation");if("reload"!==E?.type)return!1}}return!(!Number.isInteger(b.uid)||b.uid<0||null===b.destination||"object"!=typeof b.destination)}_updateInternalState(b,h,E=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),E&&b?.temporary&&delete b.temporary,this._destination=b,this._uid=h,this._maxUid=Math.max(this._maxUid,h),this._numPositionUpdates=0}_parseCurrentHash(b=!1){const h=unescape(i()).substring(1),E=(0,_.parseQueryString)(h),I=E.get("nameddest")||"";let j=0|E.get("page");return(!this._isValidPage(j)||b&&I.length>0)&&(j=null),{hash:h,page:j,rotation:this.linkService.rotation}}_updateViewarea({location:b}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:b.pdfOpenParams.substring(1),page:this.linkService.page,first:b.pageNumber,rotation:b.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:b}){const h=i(),E=this._currentHash!==h;if(this._currentHash=h,!b){this._uid++;const{hash:j,page:q,rotation:ee}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:j,page:q,rotation:ee},!0)}if(!this._isValidState(b))return;this._popStateInProgress=!0,E&&(this._blockHashChange++,(0,A.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const I=b.destination;this._updateInternalState(I,b.uid,!0),(0,_.isValidRotation)(I.rotation)&&(this.linkService.rotation=I.rotation),I.dest?this.linkService.goToDestination(I.dest):I.hash?this.linkService.setHash(I.hash):I.page&&(this.linkService.page=I.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFScriptingManager=void 0;var _=L(6),A=L(3);g.PDFScriptingManager=class F{constructor({eventBus:n,sandboxBundleSrc:i=null,scriptingFactory:d=null,docPropertiesLookup:P=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=i,this._scriptingFactory=d,this._docPropertiesLookup=P,this._scriptingFactory||window.addEventListener("updatefromsandbox",f=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:f.detail})})}setViewer(n){this._pdfViewer=n}setDocument(n){var i=this;return v(function*(){if(i._pdfDocument&&(yield i._destroyScripting()),i._pdfDocument=n,!n)return;const[d,P,f]=yield Promise.all([n.getFieldObjects(),n.getCalculationOrderIds(),n.getJSActions()]);if(d||f){if(n===i._pdfDocument){try{i._scripting=i._createScripting()}catch(w){return console.error(`PDFScriptingManager.setDocument: "${w?.message}".`),void(yield i._destroyScripting())}i._internalEvents.set("updatefromsandbox",w=>{w?.source===window&&i._updateFromSandbox(w.detail)}),i._internalEvents.set("dispatcheventinsandbox",w=>{i._scripting?.dispatchEventInSandbox(w.detail)}),i._internalEvents.set("pagechanging",({pageNumber:w,previous:b})=>{w!==b&&(i._dispatchPageClose(b),i._dispatchPageOpen(w))}),i._internalEvents.set("pagerendered",({pageNumber:w})=>{i._pageOpenPending.has(w)&&w===i._pdfViewer.currentPageNumber&&i._dispatchPageOpen(w)}),i._internalEvents.set("pagesdestroy",function(){var w=v(function*(b){yield i._dispatchPageClose(i._pdfViewer.currentPageNumber),yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),i._closeCapability?.resolve()});return function(b){return w.apply(this,arguments)}}()),i._domEvents.set("mousedown",w=>{i._mouseState.isDown=!0}),i._domEvents.set("mouseup",w=>{i._mouseState.isDown=!1});for(const[w,b]of i._internalEvents)i._eventBus._on(w,b);for(const[w,b]of i._domEvents)window.addEventListener(w,b,!0);try{const w=yield i._getDocProperties();if(n!==i._pdfDocument)return;yield i._scripting.createSandbox({objects:d,calculationOrder:P,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...w,actions:f}}),i._eventBus.dispatch("sandboxcreated",{source:i})}catch(w){return console.error(`PDFScriptingManager.setDocument: "${w?.message}".`),void(yield i._destroyScripting())}yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield i._dispatchPageOpen(i._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{n===i._pdfDocument&&(i._ready=!0)})}}else yield i._destroyScripting()})()}dispatchWillSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,A.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,A.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,A.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,A.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(n){var i=this;return v(function*(){const d=i._pdfViewer.isInPresentationMode||i._pdfViewer.isChangingPresentationMode,{id:P,siblings:f,command:w,value:b}=n;if(!P){switch(w){case"clear":console.clear();break;case"error":console.error(b);break;case"layout":if(d)return;const E=(0,_.apiPageLayoutToViewerModes)(b);i._pdfViewer.spreadMode=E.spreadMode;break;case"page-num":i._pdfViewer.currentPageNumber=b+1;break;case"print":yield i._pdfViewer.pagesPromise,i._eventBus.dispatch("print",{source:i});break;case"println":console.log(b);break;case"zoom":if(d)return;i._pdfViewer.currentScaleValue=b;break;case"SaveAs":i._eventBus.dispatch("save",{source:i});break;case"FirstPage":i._pdfViewer.currentPageNumber=1;break;case"LastPage":i._pdfViewer.currentPageNumber=i._pdfViewer.pagesCount;break;case"NextPage":i._pdfViewer.nextPage();break;case"PrevPage":i._pdfViewer.previousPage();break;case"ZoomViewIn":if(d)return;i._pdfViewer.increaseScale();break;case"ZoomViewOut":if(d)return;i._pdfViewer.decreaseScale()}return}if(d&&n.focus)return;delete n.id,delete n.siblings;const h=f?[P,...f]:[P];for(const E of h){const I=document.getElementById(E);I?I.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:n})):i._pdfDocument?.annotationStorage.setValue(E,n)}})()}_dispatchPageOpen(n,i=!1){var d=this;return v(function*(){const P=d._pdfDocument,f=d._visitedPages;if(i&&(d._closeCapability=(0,A.createPromiseCapability)()),!d._closeCapability)return;const w=d._pdfViewer.getPageView(n-1);if(w?.renderingState!==_.RenderingStates.FINISHED)return void d._pageOpenPending.add(n);d._pageOpenPending.delete(n);const b=v(function*(){const h=yield f.has(n)?null:w.pdfPage?.getJSActions();P===d._pdfDocument&&(yield d._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:n,actions:h}))})();f.set(n,b)})()}_dispatchPageClose(n){var i=this;return v(function*(){const d=i._pdfDocument,P=i._visitedPages;if(!i._closeCapability||i._pageOpenPending.has(n))return;const f=P.get(n);f&&(P.set(n,null),yield f,d===i._pdfDocument&&(yield i._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:n})))})()}_getDocProperties(){var n=this;return v(function*(){if(n._docPropertiesLookup)return n._docPropertiesLookup(n._pdfDocument);const{docPropertiesLookup:i}=L(24);return i(n._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,A.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:n}=L(24);return new n(this._sandboxBundleSrc)}_destroyScripting(){var n=this;return v(function*(){if(!n._scripting)return n._pdfDocument=null,void n._destroyCapability?.resolve();n._closeCapability&&(yield Promise.race([n._closeCapability.promise,new Promise(i=>{setTimeout(i,1e3)})]).catch(i=>{}),n._closeCapability=null),n._pdfDocument=null;try{yield n._scripting.destroySandbox()}catch{}for(const[i,d]of n._internalEvents)n._eventBus._off(i,d);n._internalEvents.clear();for(const[i,d]of n._domEvents)window.removeEventListener(i,d,!0);n._domEvents.clear(),n._pageOpenPending.clear(),n._visitedPages.clear(),n._scripting=null,delete n._mouseState.isDown,n._ready=!1,n._destroyCapability?.resolve()})()}}},(W,g,L)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericScripting=void 0,g.docPropertiesLookup=function A(n){return F.apply(this,arguments)};var _=L(3);function F(){return(F=v(function*(n){const d="".split("#")[0];let{info:P,metadata:f,contentDispositionFilename:w,contentLength:b}=yield n.getMetadata();if(!b){const{length:h}=yield n.getDownloadInfo();b=h}return{...P,baseURL:d,filesize:b,filename:w||(0,_.getPdfFilenameFromUrl)(""),metadata:f?.getRaw(),authors:f?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}g.GenericScripting=class y{constructor(i){this._ready=(0,_.loadScript)(i,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(i){var d=this;return v(function*(){(yield d._ready).create(i)})()}dispatchEventInSandbox(i){var d=this;return v(function*(){const P=yield d._ready;setTimeout(()=>P.dispatchEvent(i),0)})()}destroySandbox(){var i=this;return v(function*(){(yield i._ready).nukeSandbox()})()}}}],H={};function z(W){var g=H[W];if(void 0!==g)return g.exports;var L=H[W]={exports:{}};return V[W](L,L.exports,z),L.exports}var B={};return(()=>{var W=B;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return F.AnnotationLayerBuilder}}),Object.defineProperty(W,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return g.DefaultAnnotationLayerFactory}}),Object.defineProperty(W,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return g.DefaultStructTreeLayerFactory}}),Object.defineProperty(W,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return g.DefaultTextLayerFactory}}),Object.defineProperty(W,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return g.DefaultXfaLayerFactory}}),Object.defineProperty(W,"DownloadManager",{enumerable:!0,get:function(){return y.DownloadManager}}),Object.defineProperty(W,"EventBus",{enumerable:!0,get:function(){return n.EventBus}}),Object.defineProperty(W,"GenericL10n",{enumerable:!0,get:function(){return i.GenericL10n}}),Object.defineProperty(W,"LinkTarget",{enumerable:!0,get:function(){return L.LinkTarget}}),Object.defineProperty(W,"NullL10n",{enumerable:!0,get:function(){return d.NullL10n}}),Object.defineProperty(W,"PDFFindController",{enumerable:!0,get:function(){return P.PDFFindController}}),Object.defineProperty(W,"PDFHistory",{enumerable:!0,get:function(){return f.PDFHistory}}),Object.defineProperty(W,"PDFLinkService",{enumerable:!0,get:function(){return L.PDFLinkService}}),Object.defineProperty(W,"PDFPageView",{enumerable:!0,get:function(){return w.PDFPageView}}),Object.defineProperty(W,"PDFScriptingManager",{enumerable:!0,get:function(){return b.PDFScriptingManager}}),Object.defineProperty(W,"PDFSinglePageViewer",{enumerable:!0,get:function(){return A.PDFSinglePageViewer}}),Object.defineProperty(W,"PDFViewer",{enumerable:!0,get:function(){return A.PDFViewer}}),Object.defineProperty(W,"ProgressBar",{enumerable:!0,get:function(){return _.ProgressBar}}),Object.defineProperty(W,"SimpleLinkService",{enumerable:!0,get:function(){return L.SimpleLinkService}}),Object.defineProperty(W,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return h.StructTreeLayerBuilder}}),Object.defineProperty(W,"TextLayerBuilder",{enumerable:!0,get:function(){return E.TextLayerBuilder}}),Object.defineProperty(W,"XfaLayerBuilder",{enumerable:!0,get:function(){return I.XfaLayerBuilder}}),Object.defineProperty(W,"parseQueryString",{enumerable:!0,get:function(){return _.parseQueryString}});var g=z(1),L=z(5),_=z(6),A=z(10),F=z(2),y=z(16),n=z(17),i=z(18),d=z(4),P=z(20),f=z(22),w=z(12),b=z(23),h=z(7),E=z(8),I=z(9)})(),B})(),ie.exports=z()},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{},45804:ie=>{ie.exports=function l(x,e,U){if("function"==typeof x?x===e:x.has(e))return arguments.length<3?e:U;throw new TypeError("Private element is not present on this object")},ie.exports.__esModule=!0,ie.exports.default=ie.exports},91485:ie=>{ie.exports=function l(x,e){if(e.has(x))throw new TypeError("Cannot initialize the same private elements twice on an object")},ie.exports.__esModule=!0,ie.exports.default=ie.exports},18188:(ie,l,x)=>{var e=x(45804);ie.exports=function U(O,$){return O.get(e(O,$))},ie.exports.__esModule=!0,ie.exports.default=ie.exports},43723:(ie,l,x)=>{var e=x(91485);ie.exports=function U(O,$,D){e(O,$),$.set(O,D)},ie.exports.__esModule=!0,ie.exports.default=ie.exports},7920:(ie,l,x)=>{var e=x(45804);ie.exports=function U(O,$,D){return O.set(e(O,$),D),D},ie.exports.__esModule=!0,ie.exports.default=ie.exports},93831:(ie,l,x)=>{var e=x(45804);ie.exports=function U(O,$,D){return D(e(O,$))},ie.exports.__esModule=!0,ie.exports.default=ie.exports},80816:(ie,l,x)=>{var e=x(91485);ie.exports=function U(O,$){e(O,$),$.add(O)},ie.exports.__esModule=!0,ie.exports.default=ie.exports},40829:(ie,l,x)=>{var e=x(47320);ie.exports=function U(O,$,D){return($=e($))in O?Object.defineProperty(O,$,{value:D,enumerable:!0,configurable:!0,writable:!0}):O[$]=D,O},ie.exports.__esModule=!0,ie.exports.default=ie.exports},96549:(ie,l,x)=>{var e=x(54042).default;ie.exports=function U(O,$){if("object"!=e(O)||!O)return O;var D=O[Symbol.toPrimitive];if(void 0!==D){var c=D.call(O,$||"default");if("object"!=e(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===$?String:Number)(O)},ie.exports.__esModule=!0,ie.exports.default=ie.exports},47320:(ie,l,x)=>{var e=x(54042).default,U=x(96549);ie.exports=function O($){var D=U($,"string");return"symbol"==e(D)?D:D+""},ie.exports.__esModule=!0,ie.exports.default=ie.exports},54042:ie=>{function l(x){return ie.exports=l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie.exports.__esModule=!0,ie.exports.default=ie.exports,l(x)}ie.exports=l,ie.exports.__esModule=!0,ie.exports.default=ie.exports}}]);