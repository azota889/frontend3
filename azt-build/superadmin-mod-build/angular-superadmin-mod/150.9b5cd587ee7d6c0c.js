"use strict";(self.webpackChunkSuperadminMod=self.webpackChunkSuperadminMod||[]).push([[150],{41150:(ha,de,_)=>{_.r(de),_.d(de,{AzotaToolsRoutingModule:()=>fa});var m=_(32108),Ee=_(74341),ze=_(74603),c=_(60177),r=_(89417),p=_(8516),g=_(11782),f=_(46412),Re=_(79129),b=_(9788),u=_(88048),h=_(23424),C=_(1654),I=_(37008),e=_(93953),A=_(24110),P=_(78416),Me=_(53293),T=_(57399),z=_(86600),N=_(53719),R=_(82798);const Ge=t=>({grid:t}),Q=(t,s)=>({"mt-2":t,"ml-2":s}),ue=t=>({width:t}),De=t=>({flex:t});function $e(t,s){if(1&t&&e.eu8(0,8),2&t){e.XpG();const i=e.sdS(5);e.Y8G("ngTemplateOutlet",i)}}function Be(t,s){if(1&t&&e.eu8(0,8),2&t){e.XpG();const i=e.sdS(7);e.Y8G("ngTemplateOutlet",i)}}function Pe(t,s){if(1&t&&e.eu8(0,8),2&t){e.XpG();const i=e.sdS(9);e.Y8G("ngTemplateOutlet",i)}}function Ne(t,s){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Qe(t,s){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Le(t,s){if(1&t&&(e.qex(0),e.j41(1,"mat-option",22),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(3,2,i.title)," ")}}function Ke(t,s){if(1&t&&(e.j41(0,"div",23)(1,"div",12)(2,"label",24),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"mat-form-field",14)(6,"mat-select",15,5)(8,"mat-option"),e.nrm(9,"ngx-mat-select-search",16),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"mat-option",22),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,Le,4,4,"ng-container",25),e.k0s()()()),2&t){const i=e.sdS(7),n=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,8,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(10,10,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(11,12,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(14,14,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",i.filter(n.listBookObjs,"title"))}}function Ye(t,s){1&t&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function qe(t,s){if(1&t&&(e.j41(0,"form",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"label",13),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"mat-form-field",14)(8,"mat-select",15,3)(10,"mat-option"),e.nrm(11,"ngx-mat-select-search",16),e.nI1(12,"mytranslate"),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"mat-option",17),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.DNE(17,Ne,3,4,"mat-option",18),e.k0s()()(),e.j41(18,"div",11)(19,"div",12)(20,"label",19),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"mat-form-field",14)(24,"mat-select",15,4)(26,"mat-option"),e.nrm(27,"ngx-mat-select-search",16),e.nI1(28,"mytranslate"),e.nI1(29,"mytranslate"),e.k0s(),e.j41(30,"mat-option",17),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.DNE(33,Qe,3,4,"mat-option",18),e.k0s()()(),e.DNE(34,Ke,16,16,"div",20)(35,Ye,4,3,"div",21),e.k0s()()),2&t){const i=e.sdS(9),n=e.sdS(25),o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(5),e.SpI(" ",e.bMT(6,19,"lang_auto_khoi_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(12,21,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(13,23,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(16,25,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(i.mergeSchoolLevel(o.schoolLevelObjs),"key")),e.R7$(4),e.SpI(" ",e.bMT(22,27,"lang_auto_mon_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(28,29,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(29,31,"lang_search_not_found")),e.Y8G("formControl",n.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(32,33,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",n.filter(o.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",o.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.invalid||o.form.controls.schoolSubject.invalid)}}function Ve(t,s){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Xe(t,s){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function Ue(t,s){if(1&t&&(e.qex(0),e.j41(1,"mat-option",22),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(3,2,i.title)," ")}}function Je(t,s){if(1&t&&(e.j41(0,"div",36)(1,"label",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"mat-form-field",31)(5,"mat-select",15,5)(7,"mat-option"),e.nrm(8,"ngx-mat-select-search",16),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-option",22),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Ue,4,4,"ng-container",25),e.k0s()()()),2&t){const i=e.sdS(6),n=e.XpG(2);e.Y8G("ngClass",e.l_i(18,Q,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(21,ue,n.isMobileDevice?"54px":"")),e.R7$(),e.SpI(" ",e.bMT(3,10,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(9,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(10,14,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(13,16,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",i.filter(n.listBookObjs,"title"))}}function We(t,s){1&t&&(e.j41(0,"div",38)(1,"div",27),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function He(t,s){if(1&t&&(e.j41(0,"form",9)(1,"div",28)(2,"div",29)(3,"label",30),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"mat-form-field",31)(7,"mat-select",15,3)(9,"mat-option"),e.nrm(10,"ngx-mat-select-search",16),e.nI1(11,"mytranslate"),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"mat-option",17),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.DNE(16,Ve,3,4,"mat-option",18),e.k0s()()(),e.j41(17,"div",32)(18,"label",33),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"mat-form-field",31)(22,"mat-select",15,4)(24,"mat-option"),e.nrm(25,"ngx-mat-select-search",16),e.nI1(26,"mytranslate"),e.nI1(27,"mytranslate"),e.k0s(),e.j41(28,"mat-option",17),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.DNE(31,Xe,3,4,"mat-option",18),e.k0s()()(),e.DNE(32,Je,15,23,"div",34),e.k0s(),e.DNE(33,We,4,3,"div",35),e.k0s()),2&t){const i=e.sdS(8),n=e.sdS(23),o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngClass",e.eq3(37,Ge,!o.isMobileDevice)),e.R7$(3),e.SpI(" ",e.bMT(5,21,"lang_auto_khoi_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(11,23,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(12,25,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(15,27,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(i.mergeSchoolLevel(o.schoolLevelObjs),"key")),e.R7$(),e.Y8G("ngClass",e.l_i(39,Q,o.isMobileDevice,!o.isMobileDevice)),e.R7$(2),e.SpI(" ",e.bMT(20,29,"lang_auto_mon_hoc")," "),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(26,31,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(27,33,"lang_search_not_found")),e.Y8G("formControl",n.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(30,35,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",n.filter(o.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",o.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.invalid||o.form.controls.schoolSubject.invalid)}}function Ze(t,s){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function et(t,s){if(1&t&&(e.j41(0,"mat-option",22),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(2,2,i.key)," ")}}function tt(t,s){if(1&t&&(e.qex(0),e.j41(1,"mat-option",22),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("value",i.id),e.R7$(),e.SpI(" ",e.bMT(3,2,i.title)," ")}}function nt(t,s){if(1&t&&(e.j41(0,"div",36)(1,"label",37),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"mat-form-field",31)(5,"mat-select",15,5)(7,"mat-option"),e.nrm(8,"ngx-mat-select-search",16),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-option",22),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,tt,4,4,"ng-container",25),e.k0s()()()),2&t){const i=e.sdS(6),n=e.XpG(2);e.Y8G("ngClass",e.l_i(18,Q,n.isMobileDevice,!n.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(21,ue,n.isMobileDevice?"54px":"")),e.R7$(),e.SpI(" ",e.bMT(3,10,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(9,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(10,14,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(13,16,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",i.filter(n.listBookObjs,"title"))}}function ot(t,s){1&t&&(e.j41(0,"div",38)(1,"div",27),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function it(t,s){if(1&t&&(e.j41(0,"form",9)(1,"div",39)(2,"div",29)(3,"mat-form-field",31)(4,"mat-select",15,3)(6,"mat-option"),e.nrm(7,"ngx-mat-select-search",16),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"mat-option",17),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.DNE(13,Ze,3,4,"mat-option",18),e.k0s()()(),e.j41(14,"div",32)(15,"mat-form-field",31)(16,"mat-select",15,4)(18,"mat-option"),e.nrm(19,"ngx-mat-select-search",16),e.nI1(20,"mytranslate"),e.nI1(21,"mytranslate"),e.k0s(),e.j41(22,"mat-option",17),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.DNE(25,et,3,4,"mat-option",18),e.k0s()()(),e.DNE(26,nt,15,23,"div",34),e.k0s(),e.DNE(27,ot,4,3,"div",35),e.k0s()),2&t){const i=e.sdS(5),n=e.sdS(17),o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngClass",e.eq3(31,De,!o.useDynamicMobile||o.useDynamicMobile&&!o.isMobileDevice)),e.R7$(3),e.Y8G("formControl",o.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(8,19,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(9,21,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(12,23,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(i.mergeSchoolLevel(o.schoolLevelObjs),"key")),e.R7$(),e.Y8G("ngClass",e.l_i(33,Q,o.isMobileDevice,!o.isMobileDevice)),e.R7$(2),e.Y8G("formControl",o.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(20,25,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(21,27,"lang_search_not_found")),e.Y8G("formControl",n.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(24,29,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",n.filter(o.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",o.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",o.form.controls.schoolLevel.invalid||o.form.controls.schoolSubject.invalid)}}let M=(()=>{var t;class s extends C.H{getChangeKey(){let n=this.form.getRawValue();return n.schoolLevel+"_"+n.schoolSubject+"_"+(n.bookIdFormControl??0)}updateLevelAndSubjectToForm(n,o,a){let l=this.commonService.concatMultipleArray(this.schoolLevelObjs.map(j=>j.schoolSubjectObjs)).find(j=>j.id==o)?.key,d=this.schoolLevelObjs.find(j=>j.schoolLevel?.id==n);this.schoolSubjectObjs=d?.schoolSubjectObjs??[];let v=this.schoolSubjectObjs.find(j=>j.id==o||j.key?.toLowerCase()==l?.toLowerCase());n=d?.schoolLevel?.id??0,o=v?.id??0,a=a??0;let O=this.form.getRawValue();O.schoolLevel!=n&&n&&this.form.controls.schoolLevel.setValue(n,{emitEvent:!1}),O.schoolSubject!=o&&o&&this.form.controls.schoolSubject.setValue(o,{emitEvent:!1}),O.bookIdFormControl!=a&&a&&this.form.controls.bookIdFormControl?.setValue(a,{emitEvent:!1}),(0!==n||0!==o||0!==a)&&this.getBookObjs(n,o,a,j=>{let Z=this.form.getRawValue();if(Z.schoolLevel!=j.schoolLevelId||Z.schoolSubject!=j.schoolSubjectId||(Z.bookIdFormControl??0)!=j.bookId)return;this.listBookObjs=j.books;let ye=this.listBookObjs.find(ba=>ba.id==a);a=ye?.id??0,this.showBookData&&Z.bookIdFormControl!=a&&this.form.controls.bookIdFormControl?.setValue(a,{emitEvent:!1});let Fe=this.getChangeKey();this.lastChangeKey!=Fe&&(this.lastChangeKey=Fe,this.changeDataEvent.emit({bookName:ye?.title}))})}getBookObjs(n,o,a,l){if(!this.showBookData)return l({schoolLevelId:n,schoolSubjectId:o,bookId:a,books:[]});if(!n||!o)return l({schoolLevelId:n,schoolSubjectId:o,bookId:a,books:[]});let d=this.listBookByLevelSubject.find(v=>v.levelId==n&&v.subjectId==o);if(null!=d)return l({schoolLevelId:n,schoolSubjectId:o,bookId:a,books:d.books});this.isLoadingBook=!0,this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetElearningBookGet(n,o)).subscribe(v=>{if(!v.success)return this.isLoadingBook=!1,this.errorStatusObj(v.message,!0),l({schoolLevelId:n,schoolSubjectId:o,bookId:a,books:[]});v.data=v.data?.filter(O=>O.isActive),this.listBookByLevelSubject.push({levelId:n,subjectId:o,books:v.data??[]}),this.isLoadingBook=!1,l({schoolLevelId:n,schoolSubjectId:o,bookId:a,books:v.data??[]})}))}getSubjectAndLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);if(this.schoolLevelObjs=n.data?.schoolLevelSubjectObjs??[],this.removeLevelSubjectWithOtherName&&(this.schoolLevelObjs=this.schoolLevelObjs.filter(o=>"azt_lang_core_khoi_khac"!=o.schoolLevel?.key),this.schoolLevelObjs.forEach(o=>o.schoolSubjectObjs=o.schoolSubjectObjs.filter(a=>"azt_auto_lang_khac"!=a.key))),this.useExamSchoolLogData&&0==this.form.controls.schoolLevel.value)return this.updateLevelAndSubjectToForm(n.data?.examSchoolLogObj?.lastSchoolLevelId??0,n.data?.examSchoolLogObj?.lastSchoolSubjectId??0,void 0),this.stopStatusObj();if(this.useFirstAsDefault&&0==this.form.controls.schoolLevel.value){let o=this.commonService.getLastOfArray(this.schoolLevelObjs),a=this.commonService.getFirstOfArray(o?.schoolSubjectObjs??[]);if(o&&a)return this.updateLevelAndSubjectToForm(o.schoolLevel?.id??0,a.id,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}this.updateLevelAndSubjectToForm(this.form.controls.schoolLevel.value,this.form.controls.schoolSubject.value,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}))}listenChangeLevelSubjectBook(){this.form.controls.schoolLevel.valueChanges.subscribe(n=>{let o=this.form.getRawValue();this.updateLevelAndSubjectToForm(o.schoolLevel,o.schoolSubject,o.bookIdFormControl)}),this.form.controls.schoolSubject.valueChanges.subscribe(n=>{let o=this.form.getRawValue();this.updateLevelAndSubjectToForm(o.schoolLevel,o.schoolSubject,o.bookIdFormControl)}),this.form.controls.bookIdFormControl?.valueChanges.subscribe(n=>{let o=this.form.getRawValue();this.updateLevelAndSubjectToForm(o.schoolLevel,o.schoolSubject,o.bookIdFormControl)})}ngOnInit(){this.getSubjectAndLevel(),this.listenChangeLevelSubjectBook()}constructor(n,o){super(),this.commonListService=n,this.aiElearningService=o,this.removeLevelSubjectWithOtherName=!1,this.showBookData=!1,this.useExamSchoolLogData=!1,this.useFirstAsDefault=!1,this.useDynamicMobile=!1,this.layout="default",this.changeDataEvent=new e.bkB,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.listBookObjs=[],this.lastChangeKey=void 0,this.listBookByLevelSubject=[],this.isLoadingBook=!1}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(Me.Nz),e.rXU(T.T5))},t.\u0275cmp=e.VBU({type:t,selectors:[["config-level-subject-book"]],inputs:{form:"form",removeLevelSubjectWithOtherName:"removeLevelSubjectWithOtherName",showBookData:"showBookData",useExamSchoolLogData:"useExamSchoolLogData",useFirstAsDefault:"useFirstAsDefault",useDynamicMobile:"useDynamicMobile",layout:"layout"},outputs:{changeDataEvent:"changeDataEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:10,vars:3,consts:[["defaultLayoutTpl",""],["labelInOneLineTpl",""],["labelHiddenTpl",""],["searchInListSchoolLevel","searchInList"],["searchInListSchoolSubject","searchInList"],["searchInListBook","searchInList"],[1,"config-level-subject"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],["for","schoolLevel",1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","schoolSubject",1,"form-label","flex","items-center"],["class","col-span-12",4,"ngIf"],["class","col-span-12","style","margin-top: -20px",4,"ngIf"],[3,"value"],[1,"col-span-12"],["for","bookSelected",1,"form-label","flex","items-center"],[4,"ngFor","ngForOf"],[1,"col-span-12",2,"margin-top","-20px"],[1,"text-xs","mt-2","text-danger"],["id","azt-config-level-subject",1,"grid-cols-12","gap-4",3,"ngClass"],[1,"col-span-12","sm:col-span-3","flex","items-center"],["for","schoolLevel",1,"mr-1","flex-none","whitespace-nowrap"],["appearance","outline",1,"box",2,"width","100%"],[1,"col-span-12","sm:col-span-4","flex","items-center",3,"ngClass"],["for","schoolSubject",1,"mr-1","whitespace-nowrap","flex-none"],["class","col-span-5 flex items-center",3,"ngClass",4,"ngIf"],["style","margin-top: -20px",4,"ngIf"],[1,"col-span-5","flex","items-center",3,"ngClass"],["for","bookSelected",1,"mr-1","flex-none","whitespace-nowrap",3,"ngStyle"],[2,"margin-top","-20px"],["id","azt-config-level-subject",1,"justify-end","ml-auto",3,"ngClass"]],template:function(n,o){1&n&&(e.j41(0,"div",6),e.DNE(1,$e,1,1,"ng-container",7)(2,Be,1,1,"ng-container",7)(3,Pe,1,1,"ng-container",7),e.k0s(),e.DNE(4,qe,36,35,"ng-template",null,0,e.C5r)(6,He,34,42,"ng-template",null,1,e.C5r)(8,it,28,36,"ng-template",null,2,e.C5r)),2&n&&(e.R7$(),e.Y8G("ngIf","default"==o.layout),e.R7$(),e.Y8G("ngIf","label_in_one_line"==o.layout),e.R7$(),e.Y8G("ngIf","label_hidden"==o.layout))},dependencies:[A.An,A.U9,P.x,c.MD,c.YU,c.Sq,c.bT,c.T3,c.B3,r.X1,r.qT,r.BC,r.cb,r.l_,r.j4,m.iI,r.YN,u.wp,f.s,z.wT,N.rl,R.VO,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();var k=_(30665),x=_(25244),_e=_(49075),L=_(14823);const st=t=>({"border-b":t}),at=()=>({"mr-2":!0}),pe=()=>({"text-pending":!0});function lt(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function rt(t,s){1&t&&(e.j41(0,"div",14)(1,"h3",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")))}function ct(t,s){1&t&&(e.j41(0,"div",14),e.nrm(1,"azt-loading-ui",16),e.j41(2,"h3",15),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_cms_common_loading")))}function dt(t,s){if(1&t&&(e.qex(0),e.DNE(1,rt,4,3,"div",13)(2,ct,5,3,"div",13),e.bVm()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(i.loadingExamObjs||i.form.controls.schoolLevel.value&&i.form.controls.schoolSubject.value)),e.R7$(),e.Y8G("ngIf",i.loadingExamObjs)}}function ut(t,s){1&t&&(e.nrm(0,"lucide-icon",28),e.nI1(1,"mytranslate")),2&t&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_published")),e.Y8G("ngClass",e.lJ4(4,pe)))}function _t(t,s){1&t&&(e.nrm(0,"lucide-icon",29),e.nI1(1,"mytranslate")),2&t&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_unpublished")),e.Y8G("ngClass",e.lJ4(4,pe)))}function pt(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),e.DNE(4,ut,2,5,"lucide-icon",22)(5,_t,2,5,"lucide-icon",23),e.k0s(),e.j41(6,"div",24,2)(8,"span"),e.EFF(9),e.k0s()()()(),e.j41(10,"div",25)(11,"button",26),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.goAnalyzeExam(o.id))}),e.nrm(12,"lucide-icon",27),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()}if(2&t){const i=s.$implicit,n=s.last,o=e.sdS(7),a=e.XpG(3);e.Y8G("ngClass",e.eq3(15,st,!n)),e.R7$(4),e.Y8G("ngIf",i.isPublished),e.R7$(),e.Y8G("ngIf",!i.isPublished),e.R7$(),e.Mz_("matTooltip"," ",i.name,""),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.ZvI("mb-0 d-block ",a.isMobileWebView?"azt-wv-item-name":"",""),e.R7$(),e.JRh(i.name),e.R7$(3),e.Y8G("ngClass",e.lJ4(17,at)),e.R7$(),e.SpI(" ",e.bMT(14,13,"lang_core_auto_analyze")," ")}}function mt(t,s){if(1&t&&e.DNE(0,pt,15,18,"div",17),2&t){const i=e.XpG(2);e.Y8G("ngForOf",i.listExamObjs)}}function gt(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"h3",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",9)(6,"config-level-subject-book",10),e.bIt("changeDataEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.getExamObjsByLevelSubject())}),e.k0s()(),e.j41(7,"div",11),e.DNE(8,dt,3,2,"ng-container",12)(9,mt,1,1,"ng-template",null,1,e.C5r),e.k0s()()}if(2&t){const i=e.sdS(10),n=e.XpG();e.R7$(3),e.JRh(e.bMT(4,7,"lang_core_suggest_objective_and_difficulty_level")),e.R7$(3),e.Y8G("form",n.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useExamSchoolLogData",!1),e.R7$(2),e.Y8G("ngIf",!n.form.controls.schoolLevel.value||!n.form.controls.schoolSubject.value||n.loadingExamObjs)("ngIfElse",i)}}let ft=(()=>{var t;class s extends C.H{getExamObjsByLevelSubject(){!this.form.controls.schoolLevel.value||!this.form.controls.schoolSubject.value||this.getDataExamObjs()}goAnalyzeExam(n){this.myNavigationWithQueryString("/azota-tools/auto-suggestion-for-one-exam/"+n+"/"+(this.form.controls.schoolLevel?.value??0)+"/"+(this.form.controls.schoolSubject?.value??0),"?backTo="+encodeURIComponent("/azota-tools/auto-suggestion-for-exams"))}getDataExamObjs(){let n=this.form.controls.schoolLevel?.value??0,o=this.form.controls.schoolSubject?.value??0;this.loadingExamObjs=!0,this.waitDestroy(this.adminExamService.apiAdminExamGetTopExamsGet(n,o).subscribe(a=>{if(!a.success)return this.loadingExamObjs=!1,this.errorStatusObj(a.message,!0);this.listExamObjs=a.data?.objs??[],this.loadingExamObjs=!1,this.successStatusObj()}))}ngOnInit(){this.initStatusObj(),this.getDataExamObjs()}constructor(n){super(),this.adminExamService=n,this.backTo="/super-role/admin-tool",this.listExamObjs=[],this.loadingExamObjs=!1,this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0})})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(_e.g0))},t.\u0275cmp=e.VBU({type:t,selectors:[["auto-suggestion-for-exams"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],["showData",""],["c","isDisabled"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-2","box","p-2"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useExamSchoolLogData"],[1,"box","mt-2","relative","py-5","px-5",2,"height","calc(100vh - 250px)","overflow-y","auto"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"mr-2"],["class","border-slate-200 py-2 flex justify-between",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-slate-200","py-2","flex","justify-between",3,"ngClass"],[1,"flex","align-center"],[1,"title-exam","flex","items-center","clickable","ml-3","w-52","sm:w-full"],[1,"image-fit"],["name","file-check","size","24",3,"matTooltip","ngClass",4,"ngIf"],["name","file","size","24",3,"matTooltip","ngClass",4,"ngIf"],[1,"ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"ml-auto"],[1,"btn","btn-primary-soft",3,"click"],["name","pie-chart","size","20",3,"ngClass"],["name","file-check","size","24",3,"matTooltip","ngClass"],["name","file","size","24",3,"matTooltip","ngClass"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",3),e.DNE(1,lt,1,1,"azt-loading-effect",4)(2,gt,11,9,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",a)}},dependencies:[Re.f,I.Q,x.K,M,k.R,c.MD,c.YU,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,L.oV,p.flO,p.WGl,h.L,g.Id,b.k],encapsulation:2}),s})();var me=_(84572),G=_(65588),K=_(40693),Y=_(21413);let ee=(()=>{var t;class s{constructor(){this.checkQuestion=new Y.B}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(n){this.checkQuestion.next(n)}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();class F{constructor(){this.totalQuestionRender=0,this.numFollow={renderDone:{num:0,isRun:!1},firstDone:{num:0,isRun:!1},startDone:{num:0,isRun:!1}}}checker(){this.totalQuestionRender===this.numFollow.renderDone.num&&!this.numFollow.renderDone.isRun&&(this.numFollow.renderDone.isRun=!0),this.totalQuestionRender===this.numFollow.firstDone.num&&!this.numFollow.firstDone.isRun&&(this.numFollow.firstDone.isRun=!0)}setNumQuest(s){this.totalQuestionRender=s}doneItemPartQuest(){this.numFollow.firstDone.num++,this.checker()}}var D=_(54543),ge=_(96405),$=_(89272),B=_(97173),te=_(93585);let q=(()=>{var t;class s{constructor(){this.commonService=(0,e.WQX)(B.R),this.sAztAnswerTypeService=(0,e.WQX)(te._)}changeObjectiveForCommonQuestion(n,o){return n.knowledgeId=o.id,n.objectiveId=o.objectiveId,n.ebankFrameId=o.id,n}changeObjectiveForTrueFalseQuestion(n,o,a){return n.configAnswers.find(l=>l.key==a)?(n.configAnswers.forEach(l=>{l.key==a&&(l.objectiveId=o?.objectiveId,l.knowledgeId=o?.id,l.ebankFrameId=o.id)}),n):(n.configAnswers.push({key:a,objectiveId:o.objectiveId,knowledgeId:o.id,ebankFrameId:o.id}),n)}changeTagForCommonQuestion(n,o){return n.tags=o,n}changeTagForTrueFalseQuestion(n,o,a){let l=this.commonService.getFirstOfArray(a);return n.configAnswers.find(d=>d.key==o)?(n.configAnswers.forEach(d=>{d.key==o&&(d.tagId=l?.id,d.tagName=l?.name,d.tagCode=l?.code)}),n):(n.configAnswers.push({key:o,knowledgeId:void 0,objectiveId:void 0,tagCode:l?.code,tagId:l?.id,tagName:l?.name}),n)}changeTagForCommonQuestView(n,o){return n.tag=o,n}changeTagForTrueFalseQuestView(n,o,a){let l=this.commonService.getFirstOfArray(a);return n.configAnswers||(n.configAnswers=[]),n.configAnswers.find(d=>d.key==o)?(n.configAnswers.forEach(d=>{d.key==o&&(d.tagId=l?.id,d.tagName=l?.name,d.tagCode=l?.code)}),n):(n.configAnswers.push({key:o,knowledgeId:void 0,objectiveId:void 0,tagCode:l?.code,tagId:l?.id,tagName:l?.name}),n)}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var ne=_(18359),oe=_(71985),fe=_(44668);let E=(()=>{var t;class s{constructor(){this.subscriptions=new ne.yU,this.aiElearningService=(0,e.WQX)(T.T5),this.commonService=(0,e.WQX)(B.R),this.mapCacheSubscribers$=new Map}getKnowledgeByApi(n,o,a,l){let d=this.getCacheKey(n,o,a,l),v=this.mapCacheSubscribers$.get(d);return v||(v=new oe.c(O=>{this.subscriptions.add(this.commonService.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(n,o,a,l||void 0)).subscribe(j=>{if(!j.success)return this.mapCacheSubscribers$.set(d,null),O.next({errorMessage:j.message,data:void 0}),void O.complete();O.next({errorMessage:void 0,data:{objs:j.data?.nodes??[]}}),O.complete()}))}).pipe((0,fe.t)(1)),this.mapCacheSubscribers$.set(d,v),v)}getObjByObjectiveId(n,o){for(var a of n){if(a.objectiveId==o)return a;let l=this.getObjByObjectiveId(a.children,o);if(null!=l)return l}}getObjById(n,o){for(var a of n){if(a.id==o)return a;let l=this.getObjById(a.children,o);if(null!=l)return l}}getObjByKnowledgeIdOrObjectiveId(n,o,a){for(var l of n){if(l.knowledgeId==o||l.objectiveId==a)return l;let d=this.getObjByKnowledgeIdOrObjectiveId(l.children,o,a);if(null!=d)return d}}getAllObjectiveObjs(n,o){return n.forEach(a=>{a.objectiveId&&o.push({id:a.objectiveId,name:a.title,questionHistories:[]}),a.children.length&&(o=o.concat(this.getAllObjectiveObjs(a.children,[])))}),o}getCacheKey(n,o,a,l){return`${n}_${o}_${a?"true":"false"}_${l??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var bt=_(9618),ht=_(92771),vt=_(88141),Ct=_(73028),jt=_(56977);class Ot{addTask(s,i){if(null!=i&&this.baseResultCache.has(i))return this.baseResultCache.get(i).asObservable();const n=new ht.m(1);return null!=i&&this.baseResultCache.set(i,n),this.baseTaskQueue$?.next(s.pipe((0,vt.M)({next:o=>{!o.success&&null!=i&&this.baseResultCache.delete(i),n.next(o)},error:()=>{null!=i&&this.baseResultCache.delete(i),n.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),n.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new Y.B,this.baseSubscription=new ne.yU,this.initializeQueue()}resetConcurrency(s){this.baseLimitConcurrency!=s&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new Y.B;const s=this.baseTaskQueue$.pipe((0,Ct.Z)(i=>i.pipe((0,jt.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:i=>{},error:i=>{},complete:()=>{}});this.baseSubscription.add(s)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(s=10){this.baseLimitConcurrency=s,this.baseTaskQueue$=null,this.baseDestroy$=new Y.B,this.baseSubscription=new ne.yU,this.baseResultCache=new Map,this.initializeQueue()}}var Tt=_(35570);let V=(()=>{var t;class s extends Ot{callApiToGuestKnowledge(n,o,a,l){if(""==this.standardQuestionData(o))return a(void 0,void 0,void 0);let v={questionId:n?o.questionId:void 0,text:n?void 0:this.standardQuestionData(o),levelId:o.levelId,subjectId:o.subjectId,ebankId:o.ebankId},O=this.aiService.apiAiPredictQuestionKnowledgePost(v);this.addTask(O,this.sAztEncryptService.createMd5(this.commonService.serializeJson(v))).subscribe(j=>j.success?"vip_required"==j.errorCode?l("lang_core_need_vip_upgrade"):!j.data||j.data.score<this.AI_MIN_SCORE?a(void 0,void 0,void 0):void a(j.data.knowledgeId,j.data.objectiveId,j.data.tagId):l(j.message))}standardQuestionData(n){let o=this.commonService.parseQuestionContent(n.questionContent);return o+=" "+this.commonService.parseQuestionContent(n.answerContents.join(" - ")),o.trim()}constructor(){super(2),this.commonService=(0,e.WQX)(B.R),this.aiService=(0,e.WQX)(bt.Ee),this.sAztEncryptService=(0,e.WQX)(Tt.v),this.AI_MIN_SCORE=2.8}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();const wt=()=>({"text-warning":!0,"mr-1":!0}),xt=()=>({"mr-1":!0});function kt(t,s){1&t&&e.nrm(0,"azt-loading-ui",4),2&t&&e.Y8G("size",16)}function It(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",8)(1,"span",9),e.nrm(2,"lucide-icon",10),e.j41(3,"span",11),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"a",12),e.nrm(7,"lucide-icon",13),e.j41(8,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.guessKnowledgeUnit())}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(8,wt)),e.R7$(2),e.JRh(e.bMT(5,4,"lang_knowledge_suggest_api_call_again")),e.R7$(3),e.Y8G("ngClass",e.lJ4(9,xt)),e.R7$(2),e.JRh(e.bMT(10,6,"lang_auto_thu_lai")))}function St(t,s){if(1&t&&(e.j41(0,"div",8),e.nrm(1,"azt-dynamic-hook",15),e.nI1(2,"mytranslate"),e.k0s()),2&t){let i;const n=e.XpG(3);e.R7$(),e.Y8G("content",null!==(i=null==n.currentKnowledgeTreeNode?null:n.currentKnowledgeTreeNode.title)&&void 0!==i?i:e.bMT(2,1,"long_core_chon_khung_kien_thuc"))}}function At(t,s){if(1&t&&(e.qex(0),e.j41(1,"div",6),e.DNE(2,It,11,10,"div",7)(3,St,3,3,"div",7),e.k0s(),e.bVm()),2&t){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf","callApiFail"==i.currentStatus),e.R7$(),e.Y8G("ngIf",null==i.currentStatus)}}function yt(t,s){1&t&&(e.j41(0,"div",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function Ft(t,s){if(1&t&&e.DNE(0,At,4,2,"ng-container",5)(1,yt,3,3,"ng-template",null,1,e.C5r),2&t){const i=e.sdS(2),n=e.XpG();e.Y8G("ngIf",n.knowledgeObjs.length>0)("ngIfElse",i)}}let Et=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.selectKnowledgeEmit=new e.bkB,this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q),this.sAztKnowledgeObjectiveService=(0,e.WQX)(E),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(V),this.ebankFrameId=0,this.currentStatus=void 0,this.knowledgeObjs=[]}guessKnowledgeUnit(){if(this.ebankFrameId||this.currentKnowledgeTreeNode)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.isExistInArray(this.questionObj.answerResult,o.key)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,n,(o,a,l)=>{this.updateKnowledgeAndObjective(a??0,!0),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}updateKnowledgeAndObjective(n,o){this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(this.knowledgeObjs,n),this.currentKnowledgeTreeNode&&(this.ebankFrameId=this.currentKnowledgeTreeNode.id,this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForCommonQuestion(this.questionObj,{id:this.currentKnowledgeTreeNode.id,objectiveId:this.currentKnowledgeTreeNode.objectiveId}),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){super.ngOnInit(),this.ebankFrameId=this.questionObj.ebankFrameId??0,this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.levelId,this.subjectId,!1,void 0).subscribe(n=>{if(n.errorMessage||!n.data)return this.errorStatusObj(n.errorMessage??"",!0);this.knowledgeObjs=n.data.objs,this.updateKnowledgeAndObjective(this.ebankFrameId,!1),this.guessKnowledgeUnit()})}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-common-question-knowledge-unit-to-auto-suggestion"]],inputs:{questionObj:"questionObj",levelId:"levelId",subjectId:"subjectId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["notLoading",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[2,"padding","5px 0px"],["class","flex",4,"ngIf"],[1,"flex"],[2,"display","inline-flex","align-items","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"ml-2","link__hover","link__color",2,"display","inline-flex","align-items","center"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"clickable",3,"click"],[3,"content"],[1,"pl-3","pb-3"]],template:function(n,o){if(1&n&&(e.j41(0,"div",2),e.DNE(1,kt,1,1,"azt-loading-ui",3)(2,Ft,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus)("ngIfElse",a)}},dependencies:[k.R,$.x,c.MD,c.YU,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,g.Id,b.k],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),s})();const zt=["*"],Rt=()=>({"text-warning":!0,"mr-1":!0}),Mt=()=>({"mr-1":!0});function Gt(t,s){1&t&&e.nrm(0,"azt-loading-ui",4),2&t&&e.Y8G("size",16)}function Dt(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",8)(1,"span",9),e.nrm(2,"lucide-icon",10),e.j41(3,"span",11),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"a",12),e.nrm(7,"lucide-icon",13),e.j41(8,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.guessKnowledgeUnit())}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(8,Rt)),e.R7$(2),e.JRh(e.bMT(5,4,"lang_knowledge_suggest_api_call_again")),e.R7$(3),e.Y8G("ngClass",e.lJ4(9,Mt)),e.R7$(2),e.JRh(e.bMT(10,6,"lang_auto_thu_lai")))}function $t(t,s){if(1&t&&(e.j41(0,"div",8),e.nrm(1,"azt-dynamic-hook",15),e.nI1(2,"mytranslate"),e.k0s()),2&t){let i;const n=e.XpG(3);e.R7$(),e.Y8G("content",null!==(i=null==n.currentKnowledgeTreeNode?null:n.currentKnowledgeTreeNode.title)&&void 0!==i?i:e.bMT(2,1,"long_core_chon_khung_kien_thuc"))}}function Bt(t,s){if(1&t&&(e.qex(0),e.j41(1,"div",6),e.DNE(2,Dt,11,10,"div",7)(3,$t,3,3,"div",7),e.k0s(),e.bVm()),2&t){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf","callApiFail"==i.currentStatus),e.R7$(),e.Y8G("ngIf",null==i.currentStatus)}}function Pt(t,s){1&t&&(e.j41(0,"div",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function Nt(t,s){if(1&t&&(e.DNE(0,Bt,4,2,"ng-container",5)(1,Pt,3,3,"ng-template",null,1,e.C5r),e.SdG(3)),2&t){const i=e.sdS(2),n=e.XpG();e.Y8G("ngIf",n.knowledgeObjs.length>0)("ngIfElse",i)}}let Qt=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.selectKnowledgeEmit=new e.bkB,this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q),this.sAztKnowledgeObjectiveService=(0,e.WQX)(E),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(V),this.currentStatus=void 0,this.knowledgeObjs=[]}guessKnowledgeUnit(){if(this.ebankFrameId||this.currentKnowledgeTreeNode)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,n,(o,a,l)=>{this.updateKnowledgeAndObjective(a,!0),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}updateKnowledgeAndObjective(n,o){this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(this.knowledgeObjs,n??0),this.currentKnowledgeTreeNode&&(this.ebankFrameId=this.currentKnowledgeTreeNode.id,this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForTrueFalseQuestion(this.questionObj,{id:this.ebankFrameId,objectiveId:this.currentKnowledgeTreeNode.objectiveId},this.currentAnswerKey),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){super.ngOnInit(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.levelId,this.subjectId,!1,void 0).subscribe(n=>{if(n.errorMessage||!n.data)return this.errorStatusObj(n.errorMessage??"",!0);this.knowledgeObjs=n.data.objs,this.ebankFrameId=this.questionObj.configAnswers.find(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey))?.objectiveId,this.updateKnowledgeAndObjective(this.ebankFrameId,!1),this.guessKnowledgeUnit()})}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-true-false-question-knowledge-unit-to-auto-suggestion"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",levelId:"levelId",subjectId:"subjectId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},standalone:!0,features:[e.Vt3,e.aNF],ngContentSelectors:zt,decls:4,vars:2,consts:[["notLoading",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[2,"padding","5px 0px"],["class","flex",4,"ngIf"],[1,"flex"],[2,"display","inline-flex","align-items","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"ml-2","link__hover","link__color",2,"display","inline-flex","align-items","center"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"clickable",3,"click"],[3,"content"],[1,"pl-3","pb-3"]],template:function(n,o){if(1&n&&(e.NAR(),e.j41(0,"div",2),e.DNE(1,Gt,1,1,"azt-loading-ui",3)(2,Nt,4,2,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus)("ngIfElse",a)}},dependencies:[k.R,$.x,c.MD,c.YU,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,g.Id,b.k],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),s})();var X=_(26747);let be=(()=>{var t;class s{constructor(){this.questionService=(0,e.WQX)(X.wP),this.commonService=(0,e.WQX)(B.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(n,o,a){return new oe.c(l=>{let d=n.configAnswers.find(O=>O.key==o);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:n.id,answers:[{answerKey:o,objectiveId:d?.objectiveId,tag:a?.code??""}]}]}).subscribe(O=>{if(!O)return l.next(!1),l.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),l.next(!0),l.complete()})})}formatTag(n){return n.map(o=>({...o,showName:this.commonService.getValueOfKeyInObject(o,this.commonService.getCurrentLang()+"Name")??o.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new oe.c(n=>{this.questionService.apiQuestionGetTagsGet().subscribe(o=>{if(!o.success)return this.commonService.snackError(o.message);n.next(o.data?.objs?.filter(a=>"VDC"!=a.code)??[]),n.complete()})}).pipe((0,fe.t)(1))),this.replayCache$}findCurrentTag(n,o,a){let l=o.find(v=>this.commonService.compareLowerCase(v.key,a))?.tagId,d=n.find(v=>v.id==l);return d?"azt_lang_tag_"+d.code:""}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();function Lt(t,s){1&t&&e.nrm(0,"azt-loading-ui",3),2&t&&e.Y8G("size",16)}function Kt(t,s){if(1&t&&(e.j41(0,"span",6),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.FS9("matTooltip",e.bMT(1,2,i.currentQuestionTagName+"_name")),e.R7$(2),e.SpI(" ",e.bMT(3,4,i.currentQuestionTagName)," ")}}function Yt(t,s){1&t&&(e.nrm(0,"lucide-icon",9),e.nI1(1,"mytranslate")),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_core_nang_vip_de_tu_don_du_doan_ket_qua_can_dat"))}function qt(t,s){if(1&t&&(e.j41(0,"div",4)(1,"span",7),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Yt,2,3,"lucide-icon",8),e.k0s()),2&t){const i=e.XpG(2);e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),""),e.R7$(2),e.Y8G("ngIf","vipRequired"==i.currentStatus)}}function Vt(t,s){if(1&t&&(e.j41(0,"div",4),e.DNE(1,Kt,4,6,"span",5)(2,qt,5,4,"ng-template",null,0,e.C5r),e.k0s()),2&t){const i=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",n.currentQuestionTagName)("ngIfElse",i)}}let Xt=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q),this.sAztQuestionTagService=(0,e.WQX)(be),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(V),this.sAztListenQuestionTagChangesService=(0,e.WQX)(ee),this.questionTags=[],this.currentStatus=void 0}setTag(n){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForCommonQuestion(this.questionObj,n),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"common_question",tagType:"CURRENT_QUESTION",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:n}),this.initData()}suggestionTag(){if(this.currentQuestionTagName)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(this.useQuestionIdToSuggestion,n,(o,a,l)=>{let d=this.questionTags.find(v=>v.id==l);d&&this.setTag([d]),this.currentStatus=void 0},o=>this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail")}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags);let n=this.commonService.getFirstOfArray(this.questionObj.tags??[])?.code;this.currentQuestionTagName=n?"azt_lang_tag_"+n:void 0,this.currentQuestionTagName&&(this.currentStatus=void 0)}ngOnChanges(){this.initData()}ngOnInit(){this.sAztQuestionTagService.getQuestionTags().subscribe(n=>{this.questionTags=n,this.initData(),this.suggestionTag()})}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-common-question-tag-in-analyze-tool"]],inputs:{questionObj:"questionObj",currentQuestionTags:"currentQuestionTags",useQuestionIdToSuggestion:"useQuestionIdToSuggestion",levelId:"levelId",subjectId:"subjectId"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:3,vars:2,consts:[["notHaveQuestionTag",""],["class","ml-3",3,"size",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"ml-3",3,"size"],[1,"flex","items-center"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",3,"matTooltip"],[1,"text-danger"],["size","16","class","text-warning ml-2","name","octagon-alert",3,"matTooltip",4,"ngIf"],["size","16","name","octagon-alert",1,"text-warning","ml-2",3,"matTooltip"]],template:function(n,o){1&n&&(e.j41(0,"span"),e.DNE(1,Lt,1,1,"azt-loading-ui",1)(2,Vt,4,2,"div",2),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus),e.R7$(),e.Y8G("ngIf","callApiFail"==o.currentStatus||"vipRequired"==o.currentStatus||null==o.currentStatus))},dependencies:[k.R,c.MD,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,L.oV,p.flO,p.WGl,h.L,g.Id,b.k],encapsulation:2}),s})();function Ut(t,s){1&t&&e.nrm(0,"azt-loading-ui",3),2&t&&e.Y8G("size",16)}function Jt(t,s){if(1&t&&(e.j41(0,"span",5),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.FS9("matTooltip",e.bMT(1,2,i.currentQuestionTagName+"_name")),e.R7$(2),e.SpI(" ",e.bMT(3,4,i.currentQuestionTagName)," ")}}function Wt(t,s){1&t&&(e.nrm(0,"lucide-icon",9),e.nI1(1,"mytranslate")),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_core_nang_vip_de_tu_don_du_doan_ket_qua_can_dat"))}function Ht(t,s){if(1&t&&(e.j41(0,"div",6)(1,"span",7),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Wt,2,3,"lucide-icon",8),e.k0s()),2&t){const i=e.XpG(2);e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),""),e.R7$(2),e.Y8G("ngIf","vipRequired"==i.currentStatus)}}function Zt(t,s){if(1&t&&(e.qex(0),e.DNE(1,Jt,4,6,"span",4)(2,Ht,5,4,"ng-template",null,0,e.C5r),e.bVm()),2&t){const i=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",n.currentQuestionTagName)("ngIfElse",i)}}let en=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q),this.sAztQuestionTagService=(0,e.WQX)(be),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(V),this.sAztListenQuestionTagChangesService=(0,e.WQX)(ee),this.questionTags=[],this.currentStatus=void 0}setTag(n){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForTrueFalseQuestion(this.questionObj,this.currentAnswerKey,n),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"true_false_question",tagType:"CURRENT_ANSWER",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:n}),this.initData()}suggestionTag(){if(this.currentQuestionTagName)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,n,(o,a,l)=>{let d=this.questionTags.find(v=>v.id==l);d&&this.setTag([d]),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags),this.currentQuestionTagName=this.sAztQuestionTagService.findCurrentTag(this.questionTags,this.questionObj.configAnswers,this.currentAnswerKey),this.currentQuestionTagName&&(this.currentStatus=void 0)}ngOnChanges(){this.sAztQuestionTagService.getQuestionTags().subscribe(n=>{this.questionTags=n,this.initData()})}ngOnInit(){this.sAztQuestionTagService.getQuestionTags().subscribe(n=>{this.questionTags=n,this.initData(),this.suggestionTag()})}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-true-false-question-tag-in-analyze-tool"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",levelId:"levelId",subjectId:"subjectId"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:3,vars:2,consts:[["notHaveQuestionTag",""],["class","ml-3",3,"size",4,"ngIf"],[4,"ngIf"],[1,"ml-3",3,"size"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center","style","max-width: 100px",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",2,"max-width","100px",3,"matTooltip"],[1,"flex","items-center"],[1,"text-danger"],["size","16","class","text-warning ml-2","name","octagon-alert",3,"matTooltip",4,"ngIf"],["size","16","name","octagon-alert",1,"text-warning","ml-2",3,"matTooltip"]],template:function(n,o){1&n&&(e.j41(0,"span"),e.DNE(1,Ut,1,1,"azt-loading-ui",1)(2,Zt,4,2,"ng-container",2),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus),e.R7$(),e.Y8G("ngIf","callApiFail"==o.currentStatus||"vipRequired"==o.currentStatus||null==o.currentStatus))},dependencies:[k.R,c.MD,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,L.oV,p.flO,p.WGl,h.L,g.Id,b.k],encapsulation:2}),s})();function tn(t,s){if(1&t&&(e.qex(0),e.EFF(1),e.nI1(2,"mytranslate"),e.bVm()),2&t){const i=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.questionObj.answerResult.length?i.questionObj.answerResult.join(" | "):""," ")}}function nn(t,s){if(1&t&&(e.qex(0),e.j41(1,"span",5),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&t){const i=s.$implicit,n=e.XpG(3);e.R7$(2),e.Lme("",i.alpha?i.alpha.toLowerCase():i.key?i.key.toLowerCase():i,") - ",e.bMT(3,2,n.questionObj.answerResult.includes(i.alpha?i.alpha:i.key?i.key:"")?"lang_auto_dung":"lang_auto_sai"),"\xa0")}}function on(t,s){if(1&t&&(e.qex(0),e.EFF(1),e.nI1(2,"mytranslate"),e.DNE(3,nn,4,4,"ng-container",4),e.bVm()),2&t){const i=e.XpG(2);e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_dap_an"),": "),e.R7$(2),e.Y8G("ngForOf",i.questionObj.answers)}}function sn(t,s){if(1&t&&(e.j41(0,"h2",2),e.DNE(1,tn,3,4,"ng-container",3),e.nI1(2,"isTrueFalseAnswer"),e.DNE(3,on,4,4,"ng-container",3),e.nI1(4,"isTrueFalseAnswer"),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngIf",!e.bMT(2,2,i.questionObj)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,4,i.questionObj))}}function an(t,s){1&t&&(e.j41(0,"h2",2),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}let ln=(()=>{var t;class s extends C.H{}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-answer-view-with-simple-result-box-for-teacher"]],inputs:{questionObj:"questionObj"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:4,consts:[["essayAnswer",""],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"lalala","ml-1"]],template:function(n,o){if(1&n&&(e.DNE(0,sn,5,6,"h2",1),e.nI1(1,"isEssayAnswer"),e.DNE(2,an,3,3,"ng-template",null,0,e.C5r)),2&n){const a=e.sdS(3);e.Y8G("ngIf",o.questionObj.answerResult&&!e.bMT(1,2,o.questionObj))("ngIfElse",a)}},dependencies:[c.MD,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.Zm,u.FC,g.Id,b.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),s})();const rn=()=>({"mr-1":!0});function cn(t,s){1&t&&(e.j41(0,"span",9),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI("\xa0",e.bMT(2,1,"lang_auto_het_luot"),""))}function dn(t,s){if(1&t){const i=e.RV6();e.j41(0,"lucide-icon",15),e.nI1(1,"mytranslate"),e.bIt("click",function(){let o;e.eBV(i);const a=e.XpG().$implicit,l=e.XpG(4);return e.Njj(l.playAudio(l.questionObj.id,null!==(o=a.index)&&void 0!==o?o:0))}),e.k0s()}2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_bat_dau_audio"))}function un(t,s){if(1&t){const i=e.RV6();e.j41(0,"span",10),e.DNE(1,dn,2,3,"lucide-icon",11),e.j41(2,"lucide-icon",12),e.nI1(3,"mytranslate"),e.bIt("click",function(){let o;const a=e.eBV(i).$implicit,l=e.XpG(4);return e.Njj(l.stopAudio(l.questionObj.id,null!==(o=a.index)&&void 0!==o?o:0))}),e.k0s(),e.j41(4,"audio",13),e.nrm(5,"source",14),e.nI1(6,"mycdn"),e.nI1(7,"safe"),e.k0s()()}if(2&t){let i;const n=s.$implicit,o=e.XpG(4);e.Y8G("hidden",!n.status),e.R7$(),e.Y8G("ngIf",!o.checkAudioPlay(o.questionObj.id,null!==(i=n.index)&&void 0!==i?i:0)),e.R7$(),e.FS9("matTooltip",e.bMT(3,6,"lang_auto_ket_thuc")),e.Y8G("ngClass",e.lJ4(12,rn)),e.R7$(2),e.FS9("id",o.isShowList?"audio_list_"+o.questionObj.id+"_"+n.index:"audio_unit_"+o.questionObj.id+"_"+n.index),e.R7$(),e.Y8G("src",e.bMT(7,10,e.bMT(6,8,o.questionObj.attachments[0].url)),e.B4B)}}function _n(t,s){if(1&t&&(e.j41(0,"div",5)(1,"span",6),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,cn,3,3,"span",7)(5,un,8,13,"ng-template",8),e.k0s()),2&t){const i=e.XpG(3);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_so_luot_nghe"),": "),e.R7$(2),e.Y8G("ngIf",i.questionObj.limitAudio==i.totalLimit),e.R7$(),e.Y8G("ngForOf",i.questionObj.audioLimitObjs)}}function pn(t,s){if(1&t&&(e.j41(0,"div",3),e.DNE(1,_n,6,5,"div",4),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",(null!=i.questionObj.limitAudio?i.questionObj.limitAudio:i.totalLimit+1)<=i.totalLimit)}}function mn(t,s){if(1&t&&(e.j41(0,"div"),e.DNE(1,pn,2,1,"div",2),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.questionObj.attachments&&i.questionObj.attachments.length>0)}}function gn(t,s){if(1&t&&(e.j41(0,"div",17)(1,"audio",18),e.nrm(2,"source",14),e.nI1(3,"mycdn"),e.nI1(4,"safe"),e.k0s()()),2&t){const i=e.XpG(2);e.R7$(),e.FS9("id","audio_"+i.questionObj.id),e.R7$(),e.Y8G("src",e.bMT(4,4,e.bMT(3,2,i.questionObj.attachments[0].url)),e.B4B)}}function fn(t,s){if(1&t&&e.DNE(0,gn,5,6,"div",16),2&t){const i=e.XpG();e.Y8G("ngIf",i.questionObj.attachments&&i.questionObj.attachments.length>0)}}let bn=(()=>{var t;class s extends C.H{haveOnceAudioIsPlaying(){var n=!1;let o=document.getElementsByTagName("audio");for(let a=0;a<o.length;a++)if(o[a].duration>0&&!o[a].paused){n=!0;break}return n}playAudio(n,o){var a=this.isShowList?document.getElementById("audio_list_"+n+"_"+o):document.getElementById("audio_unit_"+n+"_"+o);if(a){if(this.haveOnceAudioIsPlaying())return this.commonService.snackWarning("lang_auto_file_dang_duoc_phat");this.sendAudioEmitter.emit({obj:this.questionObj,play:1,index:o}),a.play()}}stopAudio(n,o){var a=this.isShowList?document.getElementById("audio_list_"+n+"_"+o):document.getElementById("audio_unit_"+n+"_"+o);a&&a.duration>0&&!a.paused&&(a.pause(),a.currentTime=0,a.setAttribute("src",""),this.sendAudioEmitter.emit({obj:this.questionObj,play:0,index:o}))}checkAudioPlay(n,o){var a=this.isShowList?document.getElementById("audio_list_"+n+"_"+o):document.getElementById("audio_unit_"+n+"_"+o);return!!a&&(a.duration>0&&!a.paused||((a.ended||a.currentTime>0&&a.paused)&&(a.currentTime=0,a.setAttribute("src",""),this.sendAudioEmitter.emit({obj:this.questionObj,play:0,index:o})),!1))}ngOnInit(){super.ngOnInit()}constructor(n){super(),this.commonService=n,this.totalLimit=0,this.isShowList=!0,this.sendAudioEmitter=new e.bkB}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(B.R))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-test-audio-ui"]],inputs:{questionObj:"questionObj",totalLimit:"totalLimit",isShowList:"isShowList"},outputs:{sendAudioEmitter:"sendAudioEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["NormalAudio",""],[4,"ngIf","ngIfElse"],["class","text-left ml-auto mr-auto",4,"ngIf"],[1,"text-left","ml-auto","mr-auto"],["class","limit_audio",4,"ngIf"],[1,"limit_audio"],[1,"mb-0",2,"font-size","14px","font-weight","400"],["class","mb-0","style","font-size: 14px; font-weight: 450;color: #da0522 ",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-0",2,"font-size","14px","font-weight","450","color","#da0522"],[1,"audio-control",3,"hidden"],["name","circle-play","size","24","style","vertical-align: middle; line-height: 1; color: #000",3,"matTooltip","click",4,"ngIf"],["name","trash-2","size","24",2,"vertical-align","middle","line-height","1","color","#da0522",3,"click","ngClass","matTooltip"],["preload","true",3,"id"],[3,"src"],["name","circle-play","size","24",2,"vertical-align","middle","line-height","1","color","#000",3,"click","matTooltip"],["class","text-center ml-auto mr-auto",4,"ngIf"],[1,"text-center","ml-auto","mr-auto"],["controls","","preload","true",2,"margin-left","10px","margin-right","10px","max-width","70%",3,"id"]],template:function(n,o){if(1&n&&e.DNE(0,mn,2,1,"div",1)(1,fn,1,1,"ng-template",null,0,e.C5r),2&n){const a=e.sdS(2);e.Y8G("ngIf",o.totalLimit>0)("ngIfElse",a)}},dependencies:[c.MD,c.YU,c.Sq,c.bT,r.X1,m.iI,r.YN,u.nf,u.wp,f.s,L.oV,p.flO,p.WGl,h.L,u.JI,g.Id,b.k],styles:[".limit_audio[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.audio-control[_ngcontent-%COMP%]{border-radius:50%;background-color:#f0f3f4;color:#000;padding:5px;height:35px;width:35px;margin-left:5px;cursor:pointer;text-align:center}"]}),s})();var hn=_(25880);let he=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.questionRenderService=(0,e.WQX)(D.g),this.sAztAnswerTrueFalseService=(0,e.WQX)(hn.j),this.isDestroyed=!1,this.isInitData=!1}startRenderQuestion(n){if(this.renderConfigObj.disableRender)return this.emitHaveRended(void 0);n&&!this.renderConfigObj.isFirstRender||(n&&this.renderConfigObj.isFirstRender&&(this.renderConfigObj.isFirstRender=!1,this.followerRender.doneItemPartQuest()),this.questionRenderService.parseRenderQuestion(this.baseQuestionObj,this.renderConfigObj.configRenderService).then(()=>{this.baseQuestionObj.answersOrigin=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.baseQuestionObj.answers,!0),this.emitHaveRended(void 0)}).catch(o=>{this.emitHaveRended(o.message)}))}emitHaveRended(n){if(!this.isDestroyed&&n)return this.showErrorSnack(n)}initData(n,o,a){this.renderConfigObj=n,this.followerRender=o,this.baseQuestionObj=a,this.isInitData=!0}reRenderContent(){this.isInitData&&this.startRenderQuestion(!1)}ngDoCheck(){if(!this.isInitData||this.renderConfigObj.isRenderElement)return;let n=document.getElementById("question_render_element_"+this.baseQuestionObj.id);if(!n)return;let o=n.getAttribute("start_loading");(this.renderConfigObj.disableLazy||o&&"true"==o)&&(this.renderConfigObj.isRenderElement||(this.startRenderQuestion(!0),this.renderConfigObj.isRenderElement=!0))}ngOnDestroy(){this.isDestroyed=!0,super.ngOnDestroy()}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["ng-component"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(n,o){},dependencies:[c.MD,r.X1,m.iI,r.YN,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();class ve{constructor(s,i,n){this.mathJaxImage=!1,this.disableLazy=!1,this.disableRender=!1,this.isFirstRender=!0,this.isRenderElement=!1,this.configRenderService=new G.y,this.disableLazy=s,this.disableRender=i,this.mathJaxImage=n,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg")}}let vn=(()=>{var t;class s{constructor(){this.observer=new IntersectionObserver(n=>{n.forEach(o=>{const a=o.target;o.isIntersecting?(this.reUpdateHeightAttribute(a),a.setAttribute("start_loading","true")):a.setAttribute("start_loading","false")})})}reUpdateHeightAttribute(n){const o=n.getBoundingClientRect();o.height>0&&n.setAttribute("data-current-height",o.height+"px")}observe(n){this.observer.observe(n)}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})(),U=(()=>{var t;class s{constructor(n,o){this.injector=n,this.el=o;const a=this.el.nativeElement;this.injector.get(vn).observe(a)}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(e.zZn),e.rXU(e.aKT))},t.\u0275dir=e.FsC({type:t,selectors:[["","load_effect_lazy",""]],standalone:!0}),s})();const Cn=t=>({"skeleton-box-loading":t}),jn=t=>({"pb-2":t}),On=t=>({flex:t}),Tn=t=>({"flex-wrap":t}),wn=t=>({"padding-mobile":t});function xn(t,s){if(1&t&&e.nrm(0,"div",3),2&t){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,Cn,i.renderConfigObj.isFirstRender))}}function kn(t,s){if(1&t&&(e.j41(0,"div",20),e.nrm(1,"azt-dynamic-hook",15),e.k0s()),2&t){let i;const n=e.XpG(2);e.R7$(),e.Y8G("content",null!==(i=null==n.question.groupInfo?null:n.question.groupInfo.groupContent)&&void 0!==i?i:"")}}function In(t,s){if(1&t&&e.nrm(0,"azt-test-audio-ui",21),2&t){const i=e.XpG(2);e.Y8G("questionObj",i.question)("isShowList",!0)}}function Sn(t,s){if(1&t&&(e.j41(0,"div",22),e.nrm(1,"azt-admin-common-question-tag-in-analyze-tool",23),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("levelId",i.levelId)("subjectId",i.subjectId)("questionObj",i.question)("currentQuestionTags",i.question.tags)("useQuestionIdToSuggestion",!0)}}function An(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",32)(7,"azt-admin-true-false-question-knowledge-unit-to-auto-suggestion",33),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const a=e.XpG(4);return e.Njj(a.selectKnowledgeEmit.emit(o))}),e.j41(8,"div",34)(9,"div",35)(10,"span",36),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",37),e.nrm(14,"azt-admin-true-false-question-tag-in-analyze-tool",38),e.k0s()()()()()()}if(2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(16,wn,n.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,12,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("levelId",n.levelId)("subjectId",n.subjectId)("ngClass",n.isMobileDevice?"w-full":"")("questionObj",n.question)("currentAnswerKey",i.key),e.R7$(4),e.SpI("",e.bMT(12,14,"lang_auto_gan_nhan"),":"),e.R7$(3),e.Y8G("levelId",n.levelId)("subjectId",n.subjectId)("questionObj",n.question)("currentAnswerKey",i.key)}}function yn(t,s){if(1&t&&(e.j41(0,"div",26),e.nI1(1,"isTrueFalseAnswer"),e.j41(2,"b",27),e.EFF(3),e.nI1(4,"isTrueFalseAnswer"),e.k0s(),e.nrm(5,"azt-dynamic-hook",15),e.DNE(6,An,15,18,"div",28),e.nI1(7,"isTrueFalseAnswer"),e.k0s()),2&t){let i;const n=s.$implicit,o=e.XpG(3);e.Y8G("ngStyle",e.eq3(10,Tn,e.bMT(1,4,o.question)?"wrap":"")),e.R7$(3),e.JRh(e.bMT(4,6,o.question)?(null!==(i=n.alpha)&&void 0!==i?i:n.key).toLowerCase()+")":(null!==(i=n.alpha)&&void 0!==i?i:n.key)+"."),e.R7$(2),e.Y8G("content",n.content),e.R7$(),e.Y8G("ngIf",e.bMT(7,8,o.question))}}function Fn(t,s){if(1&t&&(e.j41(0,"div",24),e.DNE(1,yn,8,12,"div",25),e.k0s()),2&t){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",i.question.answersOrigin)}}function En(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",39)(1,"div",31)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",32)(6,"azt-admin-common-question-knowledge-unit-to-auto-suggestion",40),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectKnowledgeEmit.emit(o))}),e.k0s()()()}if(2&t){const i=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("questionObj",i.question)("levelId",i.levelId)("subjectId",i.subjectId)}}function zn(t,s){if(1&t&&(e.j41(0,"div",4)(1,"div",5),e.DNE(2,kn,2,1,"div",6),e.j41(3,"div",7),e.DNE(4,In,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9)(6,"div",10)(7,"div",10)(8,"div",11),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-select",12)(12,"mat-option",13),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"mat-option",13),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"mat-option",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"mat-option",13),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()(),e.DNE(24,Sn,2,5,"div",14),e.nI1(25,"isTrueFalseAnswer"),e.k0s()(),e.nrm(26,"azt-dynamic-hook",15),e.k0s(),e.DNE(27,Fn,2,2,"div",16),e.nI1(28,"isOneChoiceAnswer"),e.nI1(29,"isTrueFalseAnswer"),e.j41(30,"div",17),e.nrm(31,"azt-question-answer-view-with-simple-result-box-for-teacher",18),e.k0s(),e.DNE(32,En,7,6,"div",19),e.nI1(33,"isTrueFalseAnswer"),e.k0s()()),2&t){let i;const n=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),e.Y8G("id","question_render_container_"+n.question.id)("ngClass",e.eq3(45,jn,n.question.attachments.length>0)),e.R7$(),e.Y8G("ngIf",null==n.question.groupInfo?null:n.question.groupInfo.isFirstInGroup),e.R7$(2),e.Y8G("ngIf",n.question.attachments.length>0),e.R7$(),e.Y8G("ngClass",e.eq3(47,On,!n.isMobileDevice)),e.R7$(4),e.SpI(" ",e.bMT(10,27,"lang_auto_cau")+" "+(null!=n.question.labelIndex?n.question.labelIndex:n.index+1)," "),e.R7$(2),e.Y8G("ngModel",n.question.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(14,29,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(17,31,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(20,33,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(23,35,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",!e.bMT(25,37,n.question)),e.R7$(2),e.Y8G("content",null!==(i=n.question.content)&&void 0!==i?i:""),e.R7$(),e.Y8G("ngIf",(e.bMT(28,39,n.question)||e.bMT(29,41,n.question))&&n.question.answers&&n.question.answers.length>0),e.R7$(4),e.Y8G("questionObj",n.question),e.R7$(),e.Y8G("ngIf",!e.bMT(33,43,n.question))}}let Rn=(()=>{var t;class s extends he{constructor(){super(...arguments),this.follower=new F,this.selectKnowledgeEmit=new e.bkB}ngOnInit(){super.ngOnInit();let n=new ve(!0,!1,!1);super.initData(n,this.follower,this.question)}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-admin-objective-analyze-tool"]],inputs:{currentQuestionObjs:"currentQuestionObjs",question:"question",index:"index",levelId:"levelId",subjectId:"subjectId",follower:"follower"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container-ebank","p-3","border-none",3,"id","ngClass"],["class","group-content-of-question-standalone",4,"ngIf"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"items-center",3,"ngClass"],[1,"flex","items-center"],[1,"question-standalone-label","whitespace-nowrap","mr-2"],[3,"ngModel","disabled"],[3,"value"],["class","ml-3",4,"ngIf"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex"],[3,"questionObj"],["class","box-help p-2",4,"ngIf"],[1,"group-content-of-question-standalone"],[3,"questionObj","isShowList"],[1,"ml-3"],[3,"levelId","subjectId","questionObj","currentQuestionTags","useQuestionIdToSuggestion"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",3,"ngStyle",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6",3,"ngStyle"],[1,"answer-label"],["class","w-full",4,"ngIf"],[1,"w-full"],[1,"box-help",2,"margin-top","20px",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","levelId","subjectId","ngClass","questionObj","currentAnswerKey"],[1,"flex","mt-2"],[1,"items-center"],[2,"vertical-align","middle"],[1,"ml-2"],[3,"levelId","subjectId","questionObj","currentAnswerKey"],[1,"box-help","p-2"],[3,"selectKnowledgeEmit","questionObj","levelId","subjectId"]],template:function(n,o){if(1&n&&(e.j41(0,"div",1),e.DNE(1,xn,1,3,"div",2)(2,zn,34,49,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.Y8G("id","question_render_element_"+o.question.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[ge.C,$.x,bn,Xt,Qt,en,ln,Et,c.MD,c.YU,c.Sq,c.bT,c.B3,r.X1,r.BC,m.iI,r.YN,r.vS,u.wp,f.s,z.wT,R.VO,p.flO,h.L,u.V6,u.FC,g.Id,b.k,U],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),s})();function Mn(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Gn(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",10)(2,"azt-question-standalone-for-admin-objective-analyze-tool",11),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectKnowledgeEmit(o))}),e.k0s()(),e.bVm()}if(2&t){const i=s.$implicit,n=s.index,o=e.XpG(2);e.R7$(2),e.Y8G("levelId",o.levelId)("subjectId",o.subjectId)("currentQuestionObjs",o.questionObjs)("question",i)("index",n)("follower",o.followerRenderQuest)}}function Dn(t,s){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"h3",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"h3",8),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"div",7)(10,"h3",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()(),e.DNE(13,Gn,3,6,"ng-container",9)),2&t){const i=e.XpG();e.R7$(3),e.JRh(e.bMT(4,8,"lang_core_analyze_objective_for_question")),e.R7$(4),e.E5c("",e.bMT(8,10,"lang_core_analyze_objective_for_question_success"),": ",i.totalObjectiveAnalyze,"/",i.totalAnalyze,""),e.R7$(4),e.E5c("",e.bMT(12,12,"lang_core_analyze_difficulty_for_question_success"),": ",i.totalTagAnalyze,"/",i.totalAnalyze,""),e.R7$(2),e.Y8G("ngForOf",i.questionObjs)}}let $n=(()=>{var t;class s extends C.H{calculateTotalObjectiveAnalyze(){this.totalObjectiveAnalyze=0,this.questionObjs.forEach(n=>{!this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(n.objectiveId||n.knowledgeId)&&this.totalObjectiveAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(this.totalObjectiveAnalyze+=n.configAnswers.filter(o=>o.objectiveId||o.knowledgeId).length)})}calculateTotalTagAnalyze(){this.totalTagAnalyze=0,this.questionObjs.forEach(n=>{!this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(n.objectiveId||n.knowledgeId)&&this.totalTagAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(this.totalTagAnalyze+=n.configAnswers.filter(o=>o.tagId).length)})}selectKnowledgeEmit(n){this.calculateTotalObjectiveAnalyze()}getDataExamObj(n){this.waitDestroy(this.adminExamService.apiAdminExamGetQuestionsOfExamIdGet(n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],a=>{this.questionObjs=a,this.questionObjs.forEach(l=>{this.sAztAnswerTypeService.isTrueFalseAnswer(l)||this.totalAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(l)&&(this.totalAnalyze+=l.answers.length)}),this.calculateTotalObjectiveAnalyze(),this.calculateTotalTagAnalyze(),this.stopStatusObj()})}))}loadQuest(n,o){const a=this.commonService.castJsonToClassObjs(K.I,JSON.stringify(n));this.questionRenderService.parseRenderQuestions(a??[],l=>{},this.configRenderService).then(l=>o(l)).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a??[])})}ngOnInit(){this.initStatusObj(),this.waitDestroy((0,me.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{const n=Number(this.commonService.getMyParam(this.activeRoute,"examId")??0);this.levelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.subjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.getDataExamObj(n)})),this.waitDestroy(this.sAztListenQuestionTagChangesService.listenSetTagEventOfAllQuestions().subscribe(n=>this.calculateTotalTagAnalyze()))}constructor(n,o,a){super(),this.adminExamService=n,this.activeRoute=o,this.sAztAnswerTypeService=a,this.backTo="/azota-tools/auto-suggestion-for-exams",this.questionRenderService=(0,e.WQX)(D.g),this.configRenderService=new G.y(!0),this.sAztListenQuestionTagChangesService=(0,e.WQX)(ee),this.followerRenderQuest=new F,this.questionObjs=[],this.totalAnalyze=0,this.totalObjectiveAnalyze=0,this.totalTagAnalyze=0,this.levelId=0,this.subjectId=0}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(_e.g0),e.rXU(m.nX),e.rXU(te._))},t.\u0275cmp=e.VBU({type:t,selectors:[["auto-suggestion-for-one-exam"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"flex","flex-col","sm:flex-row","sm:items-center","mt-2"],[1,"text-md","font-medium","mr-4"],[4,"ngFor","ngForOf"],[1,"box","mt-5"],[3,"selectKnowledgeEmit","levelId","subjectId","currentQuestionObjs","question","index","follower"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",1),e.DNE(1,Mn,1,1,"azt-loading-effect",2)(2,Dn,14,14,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,x.K,Rn,c.MD,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();var ie=_(57988),w=_(34006),S=_(85389);const Bn=()=>({"ml-2":!0});function Pn(t,s){1&t&&e.nrm(0,"azt-loading-ui",8),2&t&&e.Y8G("size",16)("ngClass",e.lJ4(2,Bn))}let Nn=(()=>{var t;class s extends S._{handelCloseDialog(){this.dialogRef.close(!1)}handelSubmit(){if(this.content.invalid)return this.content.markAllAsTouched();this.initStatusObj(),this.waitDestroy(this.commonService.wrapApiResponse(this.elearningBookService.aiApiV1ElearningBookInsertElearningBookContentsPost({bookId:this.data.id,data:this.content.value})).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.dialogRef.close(!0),this.successStatusObj("lang_auto_them_thanh_cong",!0)}))}ngOnInit(){}constructor(n,o,a){super(a,o),this.elearningBookService=n,this.dialogRef=o,this.content=new r.MJ("",{nonNullable:!0,validators:r.k0.required})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(T.UC),e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["add-book-content-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:16,vars:14,consts:[[1,"box"],[1,"text-base","font-medium","p-3","pb-0"],[1,"p-3"],["id","book-content",1,"form-control","w-full","h-full",2,"height","350px",3,"placeholder","formControl"],[1,"flex","items-center","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","min-width-100","ml-auto",3,"click"],[1,"btn","btn-primary","min-width-100","ml-3",3,"click"],[3,"size","ngClass",4,"ngIf"],[3,"size","ngClass"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",2),e.nrm(5,"textarea",3),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",4)(8,"button",5),e.bIt("click",function(){return o.handelCloseDialog()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return o.handelSubmit()}),e.j41(12,"span"),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,Pn,1,3,"azt-loading-ui",7),e.k0s()()()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_azt_add_book_content")," "),e.R7$(3),e.FS9("placeholder",e.bMT(6,8,"lang_auto_nhap_noi_dung")+"..."),e.Y8G("formControl",o.content),e.R7$(4),e.SpI(" ",e.bMT(10,10,"lang_auto_dong")," "),e.R7$(4),e.JRh(e.bMT(14,12,"lang_auto_xac_nhan")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading))},dependencies:[k.R,c.MD,c.YU,c.bT,r.X1,r.me,r.BC,r.l_,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();var Ce=_(38344);class J extends C.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(s){this.nodeObjs=(s=this.standardSearchText(s)).trim()?this.doSearchByText(s,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(s){s.isExpand=!0}collapse(s){s.isExpand=!1}doSearchByText(s,i,n){for(var o of i){o.isShow=!1;let a=this.standardSearchText(o.text);(s.includes(a)||a.includes(s))&&(o.isShow=!0,o.isExpand=!0,n.forEach(l=>{l.isShow=!0,l.isExpand=!0})),o.children.length&&(o.children=this.doSearchByText(s,o.children,n.concat(o)))}return i}showAndExpandAll(s){for(var i of s)i.isShow=!0,i.isExpand=!0,i.children=this.showAndExpandAll(i.children);return s}standardSearchText(s){return s=s.toLowerCase(),s=this.commonService.removeSpecialStringInSearch(s),this.commonService.convertVietnameseToEnglish(s)}}const je=t=>({nodeObjs:t}),Qn=t=>({"padding-left":t}),Ln=t=>({"font-medium":t}),Kn=()=>({"mr-2":!0});function Yn(t,s){1&t&&e.eu8(0)}function qn(t,s){if(1&t&&(e.j41(0,"div",5)(1,"ng-scrollbar",6,2),e.DNE(3,Yn,1,0,"ng-container",7),e.k0s()()),2&t){e.XpG();const i=e.sdS(3);e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngTemplateOutlet",i)}}function Vn(t,s){1&t&&e.eu8(0)}function Xn(t,s){if(1&t&&(e.j41(0,"div",8),e.DNE(1,Vn,1,0,"ng-container",7),e.k0s()),2&t){e.XpG();const i=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function Un(t,s){1&t&&e.eu8(0)}function Jn(t,s){if(1&t&&(e.j41(0,"div",9),e.DNE(1,Un,1,0,"ng-container",10),e.k0s()),2&t){const i=e.XpG(),n=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,je,i.nodeObjs))}}function Wn(t,s){1&t&&e.nrm(0,"lucide-icon",22)}function Hn(t,s){1&t&&e.nrm(0,"lucide-icon",23)}function Zn(t,s){if(1&t){const i=e.RV6();e.j41(0,"i",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(1,Wn,1,0,"lucide-icon",20)(2,Hn,1,0,"lucide-icon",21),e.k0s()}if(2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!i.isExpand),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function eo(t,s){1&t&&e.nrm(0,"lucide-icon",24),2&t&&e.Y8G("ngClass",e.lJ4(1,Kn))}function to(t,s){1&t&&e.eu8(0)}function no(t,s){if(1&t&&(e.qex(0),e.j41(1,"div",25),e.DNE(2,to,1,0,"ng-container",10),e.k0s(),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,je,i.children))}}function oo(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14),e.DNE(3,Zn,3,2,"i",15),e.j41(4,"label",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(5,eo,1,2,"lucide-icon",17),e.nrm(6,"span",18),e.nI1(7,"mathJaxContent"),e.nI1(8,"async"),e.nI1(9,"safeContentQuestion"),e.k0s()(),e.DNE(10,no,3,4,"ng-container",11),e.k0s(),e.bVm()}if(2&t){const i=s.$implicit;e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.yjJ("id","node-",i.randomHashId,"-",i.level,"-",i.nodeIndex,""),e.Y8G("ngStyle",e.eq3(17,Qn,12*i.level+"px")),e.R7$(),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngClass",e.eq3(19,Ln,0===i.level)),e.R7$(),e.Y8G("ngIf","objective"==i.typeNode),e.R7$(),e.Y8G("innerHTML",e.bMT(9,15,e.bMT(8,13,e.bMT(7,11,i.text))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}function io(t,s){if(1&t&&(e.qex(0),e.DNE(1,oo,11,21,"ng-container",12),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function so(t,s){if(1&t&&e.DNE(0,io,2,1,"ng-container",11),2&t){const i=s.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let ao=(()=>{var t;class s extends J{constructor(){super(...arguments),this.nodeObjs=[],this.uuidService=(0,e.WQX)(Ce.D)}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let a=[];return this.convertTreeWithObjectivesToNodes(n).forEach((d,v)=>{let O={level:o,typeNode:d.nodes.length?"knowledge":"objective",isExpand:!0,isShow:!0,nodeIndex:v,selected:!1,randomHashId:this.uuidService.getUuid(),text:d.title,data:{...d,nodes:[]},nodes:[],children:[]};O.children=this.standardTreeNodes(d.nodes,o+1),a.push(O)}),a}convertTreeWithObjectivesToNodes(n){return n.map(o=>{const a=[...o.nodes.map(l=>({...l,nodes:this.convertTreeWithObjectivesToNodes(l.nodes)})),...o.objectives.map((l,d)=>({id:l.objectiveId,title:l.title,position:d+1,nodes:[],objectives:[]}))];return{...o,nodes:a}})}removeOneNodeById(n,o){return(n=n.filter(a=>a.randomHashId!=o.randomHashId)).forEach(a=>a.nodes=this.removeOneNodeById(a.nodes,o)),n}ngOnChanges(n){n.rawNodes&&(this.nodeObjs=this.standardTreeNodes(this.rawNodes,0))}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-book-detail-tree-component"]],inputs:{rawNodes:"rawNodes",useScrollBar:"useScrollBar"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:6,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["perfectScroll",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf"],["class","relative",4,"ngIf"],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[4,"ngTemplateOutlet"],[1,"relative"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[2,"line-height","1.6",3,"click","ngClass"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(n,o){1&n&&e.DNE(0,qn,4,2,"div",3)(1,Xn,2,1,"div",4)(2,Jn,2,4,"ng-template",null,0,e.C5r)(4,so,1,1,"ng-template",null,1,e.C5r),2&n&&(e.Y8G("ngIf",o.useScrollBar),e.R7$(),e.Y8G("ngIf",!o.useScrollBar))},dependencies:[c.MD,c.YU,c.Sq,c.bT,c.T3,c.B3,c.Jj,r.X1,m.iI,r.YN,f.s,p.flO,p.WGl,h.L,u.km,u.ep,g.Id,g.Yh,b.k],encapsulation:2}),s})();var y=_(35589);const lo=(t,s)=>({"bg-success":t,"bg-slate-500":s});function ro(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",4),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function co(t,s){if(1&t&&(e.qex(0),e.nrm(1,"app-book-detail-tree-component",18),e.bVm()),2&t){const i=e.XpG(3);e.R7$(),e.Y8G("rawNodes",i.bookDetail.nodes)("useScrollBar",!1)}}function uo(t,s){1&t&&(e.j41(0,"div",19),e.nrm(1,"lucide-icon",20),e.j41(2,"div",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"lang_auto_khong_co_du_lieu")," "))}function _o(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",7)(3,"h3",8),e.EFF(4),e.k0s(),e.j41(5,"div",9)(6,"span"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"button",10),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.removeBookDetail())}),e.nrm(10,"lucide-icon",11),e.k0s()(),e.j41(11,"div",12)(12,"button",13),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.addBookContent())}),e.nrm(13,"lucide-icon",14),e.j41(14,"span",15),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()(),e.j41(17,"div",16),e.DNE(18,co,2,2,"ng-container",17)(19,uo,5,3,"ng-template",null,1,e.C5r),e.k0s()()}if(2&t){const i=e.sdS(20),n=e.XpG(2);e.R7$(4),e.JRh(n.bookDetail.title),e.R7$(),e.Y8G("ngClass",e.l_i(10,lo,n.bookDetail.isActive,!n.bookDetail.isActive)),e.R7$(2),e.JRh(e.bMT(8,6,n.bookDetail.isActive?"lang_auto_hoat_dong":"lang_core_khong_hoat_dong")),e.R7$(8),e.JRh(e.bMT(16,8,"lang_azt_add_book_content")),e.R7$(3),e.Y8G("ngIf",n.bookDetail.nodes.length)("ngIfElse",i)}}function po(t,s){if(1&t&&e.DNE(0,_o,21,13,"div",5),2&t){const i=e.XpG();e.Y8G("ngIf",i.bookDetail)}}let mo=(()=>{var t;class s extends C.H{addBookContent(){this.sAztDialogService.open(Nn,{data:{id:this.bookId},width:"1000px"}).afterClosed().subscribe(o=>{o&&this.getBookDetail(this.bookId)})}removeBookDetail(){const n={content:`<span class="font-medium">${this.commonService.myTranslateInstant("lang_azt_deleting_data_will_cause_errors_with_questions_created_from_the_matrix_based_on_the_above_book")}!</span>`,iconName:"trash-2",textConfirm:"OK"};this.sAztDialogService.open(ie.u,{data:n,width:"500px"}).afterClosed().subscribe(o=>{o&&this.callApiRemoveBook(this.bookId)})}getBookDetail(n){this.initStatusObj(),this.waitDestroy(this.elearningBookService.aiApiV1ElearningBookGetElearningBookContentsGet(n).subscribe({next:o=>{this.bookDetail=o,this.successStatusObj()},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}callApiRemoveBook(n){this.waitDestroy(this.elearningBookService.aiApiV1ElearningBookDeleteElearningBookContentsDelete(n).subscribe({next:()=>{this.showSuccessSnack("lang_admin_guide_delete_success"),this.getBookDetail(this.bookId)},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}ngOnInit(){this.bookId=Number(this.getMyParam(this.activatedRoute,"bookId")??0),this.headerBackTo=this.getMyQueryParam("backto")??"/azota-tools/book-management",this.getBookDetail(this.bookId)}constructor(n,o,a){super(),this.elearningBookService=n,this.activatedRoute=o,this.sAztDialogService=a,this.headerBackTo="",this.bookId=0}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(T.UC),e.rXU(m.nX),e.rXU(y.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-book-detail"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],["emptyNode",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","mt-8",4,"ngIf"],[1,"mt-8"],[1,"flex","items-center"],[1,"text-lg","font-medium","mr-2"],[1,"py-1","px-2","rounded-full","text-xs","text-white","font-medium",3,"ngClass"],[1,"btn","btn-sm","p-1","btn-danger-soft","ml-2",3,"click"],["name","trash-2","size","18"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],["name","plus","size","16"],[1,"ml-2"],[1,"box","p-3","mt-5"],[4,"ngIf","ngIfElse"],[3,"rawNodes","useScrollBar"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","300px"],["name","list-tree","size","90",1,"mx-auto"],[1,"text-lg","font-medium"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",2),e.DNE(1,ro,1,1,"azt-loading-effect",3)(2,po,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.Y8G("headerBackToLink",o.headerBackTo),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,x.K,ao,c.MD,c.YU,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,g.Id,b.k],encapsulation:2}),s})();function go(t,s){1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}let fo=(()=>{var t;class s extends S._{callApiSave(){this.initStatusObj();let n={id:this.bookData?.id??0,title:this.titleControl.value,schoolSubjectId:this.form.controls.schoolSubject.value,schoolLevelId:this.form.controls.schoolLevel.value,isActive:this.activeControl.value?1:0},o=this.data.isUpdate?this.elearningBookService.aiApiV1ElearningBookUpdateElearningBookPost(n):this.elearningBookService.aiApiV1ElearningBookInsertElearningBookPost(n);this.waitDestroy(this.wrapApiResponse(o).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message??"lang_core_invalid_data",!0);this.dialogRef.close(!0),this.successStatusObj()}))}ngOnInit(){super.ngOnInit()}constructor(n,o,a){super(a,o),this.elearningBookService=n,this.dialogRef=o,this.bookData=this.data.bookData,this.form=new r.gE({schoolLevel:new r.MJ(this.data.levelId,{nonNullable:!0}),schoolSubject:new r.MJ(this.data.subjectId,{nonNullable:!0})}),this.titleControl=new r.MJ(this.bookData?.title??"",{nonNullable:!0,validators:[r.k0.required]}),this.activeControl=new r.MJ(this.bookData?.isActive??0,{nonNullable:!0})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(T.UC),e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["add-edit-book-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:28,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","relative","p-3","intro-y"],[1,"overflow-auto","relative"],[1,"font-medium","text-lg","mb-2"],[1,"p-5","pt-0"],[1,"items-center","w-full","mt-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[1,"mt-3"],["for","titleBook",1,"form-label","font-bold"],["type","text","id","titleBook",1,"form-control",3,"formControl","value"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"form-check","form-switch"],["id","active-control","type","checkbox",1,"form-check-input","mr-2",3,"formControl","value"],["for","active-control",1,"form-check-label","ml-0"],[1,"p-3","text-right"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"text-xs","text-danger","mt-1"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",4)(7,"div",5),e.nrm(8,"config-level-subject-book",6),e.k0s(),e.j41(9,"div",7)(10,"label",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.nrm(13,"input",9),e.DNE(14,go,3,3,"div",10),e.k0s(),e.j41(15,"div",7)(16,"div",11),e.nrm(17,"input",12),e.j41(18,"label",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()(),e.j41(21,"div",14)(22,"button",15),e.bIt("click",function(){return o.dialogRef.close()}),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"button",16),e.bIt("click",function(){return o.callApiSave()}),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()),2&n&&(e.R7$(4),e.SpI(" ",e.bMT(5,16,o.data.isUpdate?"Ch\u1ec9nh s\u1eeda s\xe1ch":"Th\xeam m\u1edbi s\xe1ch")," "),e.R7$(4),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useFirstAsDefault",!0)("layout","default"),e.R7$(3),e.SpI(" ",e.bMT(12,18,"Ti\xeau \u0111\u1ec1 s\xe1ch")," "),e.R7$(2),e.Y8G("formControl",o.titleControl)("value",o.titleControl.value),e.R7$(),e.Y8G("ngIf",o.titleControl.dirty&&o.titleControl.errors),e.R7$(3),e.Y8G("formControl",o.activeControl)("value",!!o.activeControl.value),e.R7$(2),e.SpI(" ",o.activeControl.value?"Ho\u1ea1t \u0111\u1ed9ng":e.bMT(20,20,"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng")," "),e.R7$(4),e.SpI(" ",e.bMT(24,22,"lang_button_cancel")," "),e.R7$(2),e.Y8G("disabled",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(27,24,o.data.isUpdate?"lang_button_save":"lang_button_confirm")," "))},dependencies:[M,c.MD,c.bT,r.X1,r.me,r.Zm,r.BC,r.l_,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();const bo=(t,s)=>({"w-full":t,"w-32 ml-2":s});function ho(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",14),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function vo(t,s){1&t&&(e.qex(0),e.j41(1,"tr")(2,"td",24)(3,"p",25)(4,"span",26),e.EFF(5),e.k0s()()()(),e.bVm()),2&t&&(e.R7$(5),e.JRh("Ch\u01b0a c\xf3 \u0111\u1ea7u m\u1ee5c s\xe1ch n\xe0o v\u1edbi kh\u1ed1i - m\xf4n h\u1ecdc \u0111\xe3 ch\u1ecdn!"))}function Co(t,s){1&t&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"Ho\u1ea1t \u0111\u1ed9ng")))}function jo(t,s){1&t&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng")))}function Oo(t,s){if(1&t){const i=e.RV6();e.j41(0,"tr")(1,"td")(2,"p",25)(3,"span",26),e.EFF(4),e.k0s()()(),e.j41(5,"td")(6,"p",25)(7,"span",26),e.EFF(8),e.k0s()()(),e.j41(9,"td")(10,"p",25),e.DNE(11,Co,3,3,"span",28)(12,jo,3,3,"span",28),e.k0s()(),e.j41(13,"td")(14,"div",29)(15,"button",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.redirectToBookDetail(o))}),e.nrm(16,"lucide-icon",31),e.j41(17,"span",12),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"button",32),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.addOrEditBook(o))}),e.nrm(21,"lucide-icon",33),e.j41(22,"span",12),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()()}if(2&t){const i=s.$implicit;e.R7$(4),e.JRh(i.id),e.R7$(4),e.JRh(i.title),e.R7$(3),e.Y8G("ngIf",i.isActive),e.R7$(),e.Y8G("ngIf",!i.isActive),e.R7$(6),e.JRh(e.bMT(19,6,"lang_common_view")),e.R7$(5),e.JRh(e.bMT(24,8,"lang_auto_sua"))}}function To(t,s){if(1&t&&e.DNE(0,Oo,25,10,"tr",27),2&t){const i=e.XpG(2);e.Y8G("ngForOf",i.bookList)}}function wo(t,s){if(1&t&&(e.j41(0,"div",15)(1,"div",16)(2,"table",17)(3,"thead",18)(4,"tr")(5,"th",19),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",20),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"th",21),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"th",22),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,vo,6,1,"ng-container",23)(19,To,1,1,"ng-template",null,1,e.C5r),e.k0s()()()()),2&t){const i=e.sdS(20),n=e.XpG();e.R7$(6),e.SpI(" ",e.bMT(7,6,"ID")," "),e.R7$(3),e.SpI(" ",e.bMT(10,8,"T\xean s\xe1ch")," "),e.R7$(3),e.SpI(" ",e.bMT(13,10,"Tr\u1ea1ng th\xe1i")," "),e.R7$(3),e.SpI(" ",e.bMT(16,12,"lang_auto_hanh_dong")," "),e.R7$(3),e.Y8G("ngIf",!n.bookList.length)("ngIfElse",i)}}let Oe=(()=>{var t;class s extends C.H{changeData(){this.myNavigation(`/azota-tools/book-management/${this.form.controls.schoolLevel.value}/${this.form.controls.schoolSubject.value}`)}addOrEditBook(n){this.sAztDialogService.open(fo,{width:"750px",data:{isUpdate:!!n,bookData:n,levelId:this.form.controls.schoolLevel.value,subjectId:this.form.controls.schoolSubject.value},restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.getBookList()})}redirectToBookDetail(n){n&&this.myNavigationWithQueryString(`/azota-tools/book-detail/${n.id}`,`?backto=/azota-tools/book-management/${this.form.controls.schoolLevel.value}/${this.form.controls.schoolSubject.value}`)}getBookList(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.elearningBookService.aiApiV1ElearningBookSearchElearningBookPost({schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value})).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.bookList=n.data??[],this.successStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,me.z)([this.activatedRoute.params,this.activatedRoute.queryParams]).subscribe(([])=>{const n=Number(this.getMyParam(this.activatedRoute,"levelId")??12),o=Number(this.getMyParam(this.activatedRoute,"subjectId")??40);this.form.patchValue({schoolLevel:n,schoolSubject:o}),this.getBookList()}))}constructor(n,o,a){super(),this.elearningBookService=n,this.sAztDialogService=o,this.activatedRoute=a,this.bookList=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0})})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(T.UC),e.rXU(y.i),e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["book-management"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:18,consts:[["doneLoading",""],["hasBook",""],[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","flex-col","sm:flex-row","items-center"],[1,"text-xl","font-medium","mr-auto"],[1,"mt-2"],[1,"w-full","flex","justify-between","box","p-3"],[1,"items-center","w-full","sm:w-auto","mt-3","sm:mt-0"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[1,"btn","btn-success","text-white",3,"click","ngClass"],["name","plus","size","18"],[1,"ml-2"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6","mt-2"],[1,"intro-y","col-span-12","overflow-auto"],[1,"table","table-report","mt-2","table-sticky","overflow-auto",2,"min-width","1200px"],[1,"box"],[1,"whitespace-nowrap",2,"width","220px"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap",2,"width","280px"],[1,"whitespace-nowrap","text-center",2,"width","220px"],[4,"ngIf","ngIfElse"],["colspan","4",1,"text-center"],[1,"mb-0","whitespace-nowrap"],[1,"font-medium"],[4,"ngFor","ngForOf"],["class","font-medium",4,"ngIf"],[1,"flex","items-center"],[1,"btn","btn-sm","btn-success-soft","mr-3",3,"click"],["name","eye","size","18"],[1,"btn","btn-sm","btn-primary-soft",3,"click"],["name","square-pen","size","18"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"teacher-layout",2)(1,"div",3)(2,"div",4)(3,"h3",5),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"config-level-subject-book",9),e.bIt("changeDataEvent",function(){return e.eBV(a),e.Njj(o.changeData())}),e.k0s()(),e.j41(10,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.addOrEditBook())}),e.nrm(11,"lucide-icon",11),e.j41(12,"span",12),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()(),e.DNE(15,ho,1,1,"azt-loading-effect",13)(16,wo,21,14,"ng-template",null,0,e.C5r),e.k0s()()}if(2&n){const a=e.sdS(17);e.Y8G("headerBackToLink","/super-role/admin-tool"),e.R7$(4),e.SpI(" ",e.bMT(5,11,"Danh m\u1ee5c s\xe1ch")," "),e.R7$(5),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngClass",e.l_i(15,bo,o.isMobileDevice,!o.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(14,13,"Th\xeam s\xe1ch")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,M,x.K,c.MD,c.YU,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,g.Id,b.k],encapsulation:2}),s})();var xo=_(43952);function ko(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Io(t,s){if(1&t&&(e.j41(0,"p")(1,"span",11),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"lang_core_mo_ta_loi")),e.R7$(2),e.SpI(" : ",i.lastMessage," ")}}function So(t,s){if(1&t&&(e.j41(0,"div",10)(1,"p")(2,"span",11),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"span",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"span",11),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"span",11),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.EFF(20),e.nI1(21,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(22,"p")(23,"span",11),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s(),e.EFF(26),e.nI1(27,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(28,"p")(29,"span",11),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s(),e.EFF(32),e.k0s(),e.j41(33,"p")(34,"span",11),e.EFF(35),e.nI1(36,"mytranslate"),e.k0s(),e.EFF(37),e.k0s(),e.DNE(38,Io,5,4,"p",12),e.k0s()),2&t){const i=s.$implicit;e.R7$(3),e.JRh(e.bMT(4,15,"lang_core_m\xe3_tien_trinh")),e.R7$(2),e.SpI(" : ",i.code," "),e.R7$(3),e.JRh(e.bMT(9,17,"lang_core_ten_tien_trinh")),e.R7$(2),e.SpI(" : ",i.name," "),e.R7$(3),e.JRh(e.bMT(14,19,"lang_core_id_da_chay_duoc")),e.R7$(2),e.SpI(" : ",i.currentId," "),e.R7$(3),e.JRh(e.bMT(19,21,"lang_core_ngay_cap_nhat_cuoi")),e.R7$(2),e.SpI(" : ",e.bMT(21,23,i.updatedAt)," "),e.R7$(4),e.JRh(e.bMT(25,25,"lang_core_thoi_gian_du_kien_xong")),e.R7$(2),e.SpI(" : ",e.bMT(27,27,i.estimateEndAt)," "),e.R7$(4),e.JRh(e.bMT(31,29,"lang_auto_trang_thai")),e.R7$(2),e.SpI(" : ",i.status," "),e.R7$(3),e.JRh(e.bMT(36,31,"lang_core_so_luong_dang_xu_ly")),e.R7$(2),e.SpI(" : ",i.remainingItems," "),e.R7$(),e.Y8G("ngIf",i.lastMessage)}}function Ao(t,s){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"h3",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,So,39,33,"div",9),e.k0s()()()),2&t){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,3,"lang_core_danh_sach_cac_tien_chinh_chay_ngam")," (",i.singleJobs.length,")"),e.R7$(4),e.Y8G("ngForOf",i.singleJobs)}}let yo=(()=>{var t;class s extends C.H{getSingleJob(){this.waitDestroy(this.wrapApiResponse(this.singleJobService.aiApiV1SingleJobGetAllSingleJobsGet()).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0),void setTimeout(()=>this.getSingleJob(),1e4);this.singleJobs=n.data??[],this.stopStatusObj(),setTimeout(()=>this.getSingleJob(),1e4)}))}ngOnInit(){this.initStatusObj(),this.getSingleJob()}constructor(n,o){super(),this.shareBankService=n,this.singleJobService=o,this.backTo="/super-role/admin-tool",this.singleJobs=[]}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(xo.x),e.rXU(T.V$))},t.\u0275cmp=e.VBU({type:t,selectors:[["job-progress-management"]],standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-3"],[1,"intro-y","h-full"],["class","box p-3 mt-5",4,"ngFor","ngForOf"],[1,"box","p-3","mt-5"],[1,"font-medium","text-slate-500"],[4,"ngIf"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",1),e.DNE(1,ko,1,1,"azt-loading-effect",2)(2,Ao,8,5,"ng-template",null,0,e.C5r),e.k0s()),2&n){const a=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,x.K,c.MD,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.bH,g.Id,b.k],encapsulation:2}),s})();var Fo=_(89242);class W{constructor(){this.similarQuestionId=void 0,this.searchKeyword=""}isFilter(){return null!=this.similarQuestionId||""!=this.searchKeyword}}var Te=_(50557),Eo=_(31661);const we=t=>({nodeObjs:t}),zo=(t,s)=>({"text-pending":t," link-color-hover":s});function Ro(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Mo(t,s){1&t&&e.eu8(0)}function Go(t,s){if(1&t&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,Mo,1,0,"ng-container",4),e.k0s()()),2&t){const i=e.XpG(),n=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,we,i.nodeObjs))}}function Do(t,s){1&t&&e.nrm(0,"lucide-icon",13)}function $o(t,s){1&t&&e.nrm(0,"lucide-icon",14)}function Bo(t,s){if(1&t&&(e.j41(0,"i"),e.DNE(1,Do,1,0,"lucide-icon",11)(2,$o,1,0,"lucide-icon",12),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function Po(t,s){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function No(t,s){1&t&&e.eu8(0)}function Qo(t,s){if(1&t&&(e.qex(0),e.DNE(1,No,1,0,"ng-container",4),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,we,i.children))}}function Lo(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(4,Bo,3,2,"i",5)(5,Po,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()()(),e.DNE(11,Qo,2,4,"ng-container",5),e.bVm()}if(2&t){const i=s.$implicit;e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(),e.Y8G("ngClass",e.l_i(14,zo,i.isSelected,!i.isSelected)),e.R7$(),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}function Ko(t,s){if(1&t&&(e.qex(0),e.DNE(1,Lo,12,17,"ng-container",6),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function Yo(t,s){if(1&t&&e.DNE(0,Ko,2,1,"ng-container",5),2&t){const i=s.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let qo=(()=>{var t;class s extends J{constructor(){super(...arguments),this.allowSelectKnowledgeOrObjective="only_objective",this.selectKnowledgeOrObjectiveEvent=new e.bkB,this.nodeObjs=[],this.sAztKnowledgeObjectiveService=(0,e.WQX)(E)}clickToNode(n){return"only_objective"==this.allowSelectKnowledgeOrObjective&&n.data.objectiveId||"knowledge_or_objective"==this.allowSelectKnowledgeOrObjective&&(n.data.knowledgeId||n.data.objectiveId)?this.selectKnowledgeOrObjectiveEvent.emit(n.data):void(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}initData(n,o,a){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(n,o,!1,a).subscribe(l=>{if(l.errorMessage||!l.data)return this.errorStatusObj(l.errorMessage??"",!0);this.nodeObjs=this.standardTreeNodes(l.data.objs,0),this.stopStatusObj()})}standardTreeNodes(n,o){let a=[];return n.forEach(l=>{let d=!1;this.selectedObj?.knowledgeId&&l.knowledgeId==this.selectedObj.knowledgeId&&(d=!0),this.selectedObj?.objectiveId&&l.objectiveId==this.selectedObj.objectiveId&&(d=!0);let v={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:d,text:l.title,data:{...l,children:[]},children:[]};v.children=this.standardTreeNodes(l.children,o+1),a.push(v)}),a}ngOnChanges(n){n.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-tree-for-common-question"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",selectedObj:"selectedObj",searchContent:"searchContent",allowSelectKnowledgeOrObjective:"allowSelectKnowledgeOrObjective"},outputs:{selectKnowledgeOrObjectiveEvent:"selectKnowledgeOrObjectiveEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:5,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"click","ngClass"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"]],template:function(n,o){if(1&n&&e.DNE(0,Ro,1,1,"azt-loading-effect",2)(1,Go,3,4,"ng-template",null,0,e.C5r)(3,Yo,1,1,"ng-template",null,1,e.C5r),2&n){const a=e.sdS(2);e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[x.K,c.MD,c.YU,c.Sq,c.bT,c.T3,c.Jj,r.X1,m.iI,r.YN,f.s,p.flO,p.WGl,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})(),xe=(()=>{var t;class s extends S._{searchByText(n){this.searchContent=n}selectKnowledgeOrObjective(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-dialog-for-common-question"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"onSearch","isServerSearch","placeholder"],[3,"minHeight"],[3,"selectKnowledgeOrObjectiveEvent","levelId","subjectId","bookId","selectedObj","searchContent","allowSelectKnowledgeOrObjective"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.nI1(5,"mytranslate"),e.bIt("onSearch",function(l){return o.searchByText(l.searchObj)}),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree-for-common-question",6),e.bIt("selectKnowledgeOrObjectiveEvent",function(l){return o.selectKnowledgeOrObjective(l)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&n&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,10,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(),e.Y8G("levelId",o.data.levelId)("subjectId",o.data.subjectId)("bookId",o.data.bookId)("selectedObj",o.data.selectedObj)("searchContent",null==o.searchContent?null:o.searchContent.searchContent)("allowSelectKnowledgeOrObjective",o.data.allowSelectKnowledgeOrObjective),e.R7$(3),e.SpI(" ",e.bMT(11,12,"lang_button_close")," "))},dependencies:[Te.W,Eo.U,qo,c.MD,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})(),Vo=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.questionRenderService=(0,e.WQX)(D.g),this.configRenderService=new G.y(!0),this.sAztDialogService=(0,e.WQX)(y.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(E),this.aiQuestionBankService=(0,e.WQX)(T.gK),this.questionService=(0,e.WQX)(X.wP),this.activeRoute=(0,e.WQX)(m.nX),this.followerRenderQuest=new F,this.backTo="",this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.objectiveId=0,this.objs=[],this.totalSelectedCheckBox=0,this.totalQuestionsAreShow=0,this.filterObj=new W}checkAll(){this.objs.forEach(n=>n.selectedCheckBoxFormControl.setValue(!0)),this.selectedCheckBoxChange()}unCheckAll(){this.objs.forEach(n=>n.selectedCheckBoxFormControl.setValue(!1)),this.selectedCheckBoxChange()}selectedCheckBoxChange(){this.totalSelectedCheckBox=this.objs.filter(n=>n.isShow&&n.selectedCheckBoxFormControl.value).length,this.totalQuestionsAreShow=this.objs.filter(n=>n.isShow).length}rejectQuestions(n){let o={items:n.map(a=>({questionId:a.id,objectiveId:-1}))};n.forEach(a=>a.isRejecting=!0),this.waitDestroy(this.wrapApiResponse(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(o)).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0),void n.forEach(l=>l.isRejecting=!1);n.forEach(l=>(l.isShow=!1,l.isRejecting=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)}))}approvedThisQuestions(n,o){let a={items:n.map(l=>({questionId:l.id,objectiveId:o}))};n.forEach(l=>l.isApproving=!0),this.waitDestroy(this.wrapApiResponse(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(a)).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0),void n.forEach(d=>d.isApproving=!1);n.forEach(d=>(d.isShow=!1,d.isApproving=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)}))}approvedAllSelectedQuestions(n){this.approvedThisQuestions(this.objs.filter(o=>o.isShow&&o.selectedCheckBoxFormControl.value),n)}openEditObjectiveDialog(n){this.sAztDialogService.open(xe,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(a=>{a?.objectiveId&&this.approvedThisQuestions([n],a.objectiveId)})}openEditObjectiveForSelectedDialog(){this.sAztDialogService.open(xe,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{o?.objectiveId&&this.approvedAllSelectedQuestions(o.objectiveId)})}loadMoreQuestions(){this.followerRenderQuest=new F,this.initStatusObj();let n=this.aiQuestionBankService.aiApiV1QuestionBankGetNotManualAssignObjectiveQuestionsGet(this.objectiveId,50);this.filterObj.similarQuestionId&&(n=this.aiQuestionBankService.aiApiV1QuestionBankGetSimilarQuestionsInObjectiveGet(this.objectiveId,this.filterObj.similarQuestionId)),""!=this.filterObj.searchKeyword&&(n=this.aiQuestionBankService.aiApiV1QuestionBankSearchQuestionsByChatGptInObjectivePost({objectiveId:this.objectiveId,description:this.filterObj.searchKeyword})),this.waitDestroy(this.wrapApiResponse(n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.waitDestroy(this.questionService.apiQuestionsListPost({ids:o.data}).subscribe(a=>{this.loadQuest(a.data??[],l=>{this.followerRenderQuest.setNumQuest(this.objs.length),this.objs=l.map(d=>({...d,isApproving:!1,isRejecting:!1,isShow:!0,selectedCheckBoxFormControl:new r.MJ(!!this.filterObj.similarQuestionId,{nonNullable:!0})})),this.selectedCheckBoxChange(),this.stopStatusObj()})}))}))}loadQuest(n,o){const a=this.commonService.castJsonToClassObjs(K.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(a??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a)})}getObjectiveInfo(){this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(n=>{if(n.errorMessage||!n.data)return this.errorStatusObj(n.errorMessage??"",!0);this.curObjectiveObj=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(n.data.objs,this.objectiveId)})}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-base-classification-questions"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(n,o){},dependencies:[c.MD,r.X1,m.iI,r.YN,f.s,p.flO,h.L,g.Id,b.k],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}.td-question-selected[_ngcontent-%COMP%]{border:1px solid green;border-radius:3px}"]}),s})();var Xo=_(83236);function Uo(t,s){if(1&t){const i=e.RV6();e.j41(0,"span",2),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_azota_tool_knowledge_approved_similar_question_filter"),": ",i.filterObj.similarQuestionId," "),e.R7$(3),e.JRh(e.bMT(5,5,"lang_common_remove"))}}function Jo(t,s){if(1&t){const i=e.RV6();e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_azota_tool_knowledge_approved_search_by_keyword_filter")," "),e.R7$(3),e.JRh(e.bMT(5,4,"lang_common_remove")))}let Wo=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.changeFilterObjEvent=new e.bkB}removeFilter(){this.filterObj=new W,this.changeFilterObjEvent.emit(this.filterObj)}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-filter-box"]],inputs:{filterObj:"filterObj"},outputs:{changeFilterObjEvent:"changeFilterObjEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[["class","mr-3",4,"ngIf"],[4,"ngIf"],[1,"mr-3"],[1,"text-danger","clickable",3,"click"]],template:function(n,o){1&n&&e.DNE(0,Uo,6,7,"span",0)(1,Jo,6,6,"span",1),2&n&&(e.Y8G("ngIf",o.filterObj.similarQuestionId),e.R7$(),e.Y8G("ngIf",""!=o.filterObj.searchKeyword))},dependencies:[c.MD,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();const Ho=(t,s)=>({"pt-1 pb-3":t,"pt-3":s}),Zo=t=>({display:t});function ei(t,s){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}let ti=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.isShowExplain=!1}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:9,consts:[["elementGroup",""],["elementHook",""],["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","mt-1","px-3",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngClass","ngStyle"],[2,"width","fit-content"],[3,"content"],[1,"mt-1","box","p-2"]],template:function(n,o){if(1&n&&(e.DNE(0,ei,3,3,"div",2),e.j41(1,"div",3,0)(3,"div",4,1),e.nrm(5,"azt-dynamic-hook",5),e.k0s()()),2&n){let a;const l=e.sdS(2),d=e.sdS(4);e.Y8G("ngIf",l.offsetWidth<d.offsetWidth&&o.isMobileDevice),e.R7$(),e.Y8G("ngClass",e.l_i(4,Ho,!o.isMobileDevice,o.isMobileDevice))("ngStyle",e.eq3(7,Zo,o.isShowExplain&&o.questionObj.help?"inherit":"none")),e.R7$(4),e.Y8G("content",null!==(a=o.questionObj.help)&&void 0!==a?a:"")}},dependencies:[$.x,c.MD,c.YU,c.bT,c.B3,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,b.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),s})();const ni=t=>({"skeleton-box-loading":t});function oi(t,s){if(1&t&&e.nrm(0,"div",3),2&t){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,ni,i.renderConfigObj.isFirstRender))}}function ii(t,s){if(1&t&&(e.j41(0,"div",13)(1,"b",14),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.nrm(4,"azt-dynamic-hook",5),e.k0s()),2&t){let i;const n=s.$implicit,o=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,o.questionObj)?(null!==(i=n.alpha)&&void 0!==i?i:n.key).toLowerCase()+")":(null!==(i=n.alpha)&&void 0!==i?i:n.key)+"."),e.R7$(2),e.Y8G("content",n.content)}}function si(t,s){if(1&t&&(e.j41(0,"div",11),e.DNE(1,ii,5,4,"div",12),e.k0s()),2&t){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",i.questionObj.answers)}}function ai(t,s){if(1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.questionObj.answerResult.length?i.questionObj.answerResult.join(" | "):""," ")}}function li(t,s){1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}function ri(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",16)(1,"a",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showExplainBox())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG(2);e.R7$(2),e.SpI(" ",i.isShowExplain?e.bMT(3,1,"lang_auto_an_giai_thich"):e.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function ci(t,s){if(1&t&&(e.j41(0,"div",4)(1,"div"),e.nrm(2,"azt-dynamic-hook",5),e.DNE(3,si,2,2,"div",6),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isTrueFalseAnswer"),e.j41(6,"div",7),e.DNE(7,ai,3,4,"h2",8),e.nI1(8,"isEssayAnswer"),e.DNE(9,li,3,3,"ng-template",null,1,e.C5r)(11,ri,5,5,"div",9),e.k0s()(),e.nrm(12,"azt-question-explain-box",10),e.k0s()),2&t){let i;const n=e.sdS(10),o=e.XpG();e.R7$(2),e.Y8G("content",null!==(i=o.questionObj.content)&&void 0!==i?i:""),e.R7$(),e.Y8G("ngIf",(e.bMT(4,8,o.questionObj)||e.bMT(5,10,o.questionObj))&&o.questionObj.answers&&o.questionObj.answers.length>0),e.R7$(4),e.Y8G("ngIf",o.questionObj.answerResult&&!e.bMT(8,12,o.questionObj))("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",o.questionObj.help),e.R7$(),e.Y8G("isShowExplain",o.isShowExplain)("questionObj",o.questionObj)("renderConfigObj",o.renderConfigObj)}}let se=(()=>{var t;class s extends he{constructor(){super(...arguments),this.follower=new F,this.questionLabel="",this.isShowExplain=!1}customQuestionLabel(n){const o=this.commonService.castJsonToObj(n??"")??void 0;return o?.label?o.label:"C\xe2u"}showExplainBox(){this.isShowExplain=!this.isShowExplain}initRenderBox(){let n=new ve(!0,!1,!1);super.initData(n,this.follower,this.questionObj),this.questionLabel=this.customQuestionLabel(this.questionObj.expandInfo)+" "+(null!=this.questionObj.labelIndex?this.questionObj.labelIndex:this.questionObj.rawIndex)}ngOnInit(){super.ngOnInit(),this.initRenderBox()}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-classification-tool"]],inputs:{questionObj:"questionObj",follower:"follower"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:2,consts:[["elementRended",""],["essayAnswer",""],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"box","p-3"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex","justify-between"],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],["class","ml-auto mt-1",4,"ngIf"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(n,o){if(1&n&&(e.qex(0),e.DNE(1,oi,1,3,"div",2)(2,ci,13,14,"ng-template",null,0,e.C5r),e.bVm()),2&n){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[ge.C,$.x,ti,c.MD,c.YU,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.V6,u.Zm,u.FC,g.Id,b.k],styles:[".box-content[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #fafafa;margin:15px;box-shadow:2px 2px 5px #eee}.button-icon-feedback[_ngcontent-%COMP%]{color:gray;float:right}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}",'.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),s})();const di=t=>({"td-question-selected":t}),ae=()=>({"mr-1":!0});function ui(t,s){1&t&&e.nrm(0,"azt-loading-ui",18)}function _i(t,s){1&t&&e.nrm(0,"azt-loading-ui",18)}function pi(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",2)(2,"td")(3,"div",3)(4,"div",4)(5,"input",5),e.bIt("change",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChangeEvent.emit())}),e.k0s(),e.EFF(6," \xa0 "),e.j41(7,"label",6),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",7)(11,"div",8),e.nrm(12,"azt-question-standalone-for-classification-tool",9),e.k0s()(),e.j41(13,"div",7)(14,"span",10),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.openEditObjectiveDialogEvent.emit(o))}),e.nrm(15,"lucide-icon",11),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"span"),e.EFF(19," \xa0\xa0|\xa0\xa0 "),e.j41(20,"a",10),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.filterBySimilarQuestionEvent.emit(o))}),e.nrm(21,"lucide-icon",12),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()(),e.j41(24,"td",13)(25,"span",14),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.approvedThisQuestionsEvent.emit({objs:[o],objectiveId:a.objectiveId}))}),e.DNE(26,ui,1,0,"azt-loading-ui",15),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.j41(29,"span",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.rejectQuestionsEvent.emit([o]))}),e.DNE(30,_i,1,0,"azt-loading-ui",15),e.nrm(31,"lucide-icon",17),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.bVm()}if(2&t){const i=s.$implicit,n=e.XpG();e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(2),e.Y8G("ngClass",e.eq3(30,di,i.selectedCheckBoxFormControl.value)),e.R7$(2),e.Mz_("id","checkbox_for_question_",i.id,""),e.Y8G("formControl",i.selectedCheckBoxFormControl),e.R7$(2),e.Mz_("for","checkbox_for_question_",i.id,""),e.R7$(),e.JRh(e.bMT(9,20,"lang_azota_tool_knowledge_choose_this_question")),e.R7$(3),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",n.followerRenderQuest)("questionObj",i),e.R7$(3),e.Y8G("ngClass",e.lJ4(32,ae)),e.R7$(),e.SpI(" ",e.bMT(17,22,"lang_azota_tool_knowledge_edit_objective_button")," "),e.R7$(5),e.Y8G("ngClass",e.lJ4(33,ae)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_azota_tool_knowledge_approved_by_similar_question_button")," "),e.R7$(4),e.Y8G("ngIf",i.isApproving),e.R7$(),e.SpI(" ",e.bMT(28,26,"lang_azota_tool_knowledge_approved_objective_button")," "),e.R7$(3),e.Y8G("ngIf",i.isRejecting),e.R7$(),e.Y8G("ngClass",e.lJ4(34,ae)),e.R7$(),e.SpI(" ",e.bMT(33,28,"lang_azota_tool_knowledge_question_is_low_quality_button")," ")}}let mi=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.objs=[],this.selectedCheckBoxChangeEvent=new e.bkB,this.openEditObjectiveDialogEvent=new e.bkB,this.approvedThisQuestionsEvent=new e.bkB,this.rejectQuestionsEvent=new e.bkB,this.filterBySimilarQuestionEvent=new e.bkB}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-table"]],inputs:{objs:"objs",schoolLevelId:"schoolLevelId",schoolSubjectId:"schoolSubjectId",bookId:"bookId",objectiveId:"objectiveId",totalSelectedCheckBox:"totalSelectedCheckBox",followerRenderQuest:"followerRenderQuest"},outputs:{selectedCheckBoxChangeEvent:"selectedCheckBoxChangeEvent",openEditObjectiveDialogEvent:"openEditObjectiveDialogEvent",approvedThisQuestionsEvent:"approvedThisQuestionsEvent",rejectQuestionsEvent:"rejectQuestionsEvent",filterBySimilarQuestionEvent:"filterBySimilarQuestionEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:1,consts:[[1,"table","table-report","mt-3"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"p-3",3,"ngClass"],[1,"flex","items-centers"],["type","checkbox",1,"show-code","form-check-input",3,"change","id","formControl"],[1,"form-check-label",3,"for"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"],[1,"clickable","link-color","link-text",3,"click"],["name","tags","size","16",3,"ngClass"],["name","layers-3","size","16",3,"ngClass"],[1,"w-60","text-center"],[1,"btn","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"text-danger","mt-8","inline-block","clickable","flex","items-center",3,"click"],["name","octagon-alert","size","16",3,"ngClass"],[1,"mr-1"]],template:function(n,o){1&n&&(e.j41(0,"table",0)(1,"tbody"),e.DNE(2,pi,34,35,"ng-container",1),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("ngForOf",o.objs))},dependencies:[se,k.R,c.MD,c.YU,c.Sq,c.bT,r.X1,r.Zm,r.BC,r.l_,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,g.Id,b.k,U],encapsulation:2}),s})();function gi(t,s){if(1&t){const i=e.RV6();e.j41(0,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.totalSelectedCheckBox!=o.totalQuestionsAreShow?o.checkAll():o.unCheckAll())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&t){const i=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,i.totalSelectedCheckBox!=i.totalQuestionsAreShow?"lang_select_all":"lang_remove_all")," ")}}function fi(t,s){if(1&t){const i=e.RV6();e.j41(0,"span"),e.EFF(1," \xa0\xa0|\xa0\xa0 "),e.j41(2,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())}),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5," \xa0\xa0|\xa0\xa0 "),e.j41(6,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.approvedAllSelectedQuestions(o.objectiveId))}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,4,"lang_azota_tool_knowledge_edit_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")"),e.R7$(4),e.Lme("",e.bMT(8,6,"lang_azota_tool_knowledge_approved_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")")}}function bi(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",13),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function hi(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.loadMoreQuestions())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_reload_list_questions")," "))}function vi(t,s){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_list_questions_are_empty")," "))}function Ci(t,s){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-approve-classification-table",14),e.bIt("selectedCheckBoxChangeEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChange())})("openEditObjectiveDialogEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.openEditObjectiveDialog(o))})("openEditObjectiveForSelectedDialogEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())})("approvedThisQuestionsEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.approvedThisQuestions(o.objs,o.objectiveId))})("rejectQuestionsEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.rejectQuestions(o))})("filterBySimilarQuestionEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.filterBySimilarQuestion(o))}),e.k0s(),e.DNE(1,hi,3,3,"div",15)(2,vi,3,3,"span",10)}if(2&t){const i=e.XpG();e.Y8G("objs",i.objs)("schoolLevelId",i.schoolLevelId)("schoolSubjectId",i.schoolSubjectId)("bookId",i.bookId)("objectiveId",i.objectiveId)("totalSelectedCheckBox",i.totalSelectedCheckBox)("followerRenderQuest",i.followerRenderQuest),e.R7$(),e.Y8G("ngIf",i.objs.length>0&&!i.filterObj.isFilter()),e.R7$(),e.Y8G("ngIf",i.objs.length<=0||i.totalQuestionsAreShow<=0&&i.filterObj.isFilter())}}let ji=(()=>{var t;class s extends Vo{constructor(){super(...arguments),this.searchContentObj=new Fo.Z}onChangeFilterObj(n){this.filterObj=n,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}filterBySimilarQuestion(n){this.filterObj=new W,this.filterObj.similarQuestionId=n.id,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}onSearchBox(n){this.filterObj=new W,this.filterObj.searchKeyword=n.searchContent,this.searchContentObj=n,this.loadMoreQuestions()}ngOnInit(){super.ngOnInit(),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo=`/azota-tools/knowledge-tree-classification/${this.schoolLevelId}/${this.schoolSubjectId}/${this.bookId}`,this.loadMoreQuestions(),this.getObjectiveInfo()}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-for-objective"]],standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:20,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"colorBackground","defaultHeight"],[1,"w-full"],[1,"mt-3","font-medium","box","p-3"],[3,"innerHtml"],[1,"mt-3"],[3,"onSearch","isManualSearch","searchContentObj","placeholder"],[1,"block","mt-3",3,"changeFilterObjEvent","filterObj"],["class","clickable link-color",3,"click",4,"ngIf"],[4,"ngIf"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"clickable","link-color",3,"click"],[3,"currentStatusObj"],[3,"selectedCheckBoxChangeEvent","openEditObjectiveDialogEvent","openEditObjectiveForSelectedDialogEvent","approvedThisQuestionsEvent","rejectQuestionsEvent","filterBySimilarQuestionEvent","objs","schoolLevelId","schoolSubjectId","bookId","objectiveId","totalSelectedCheckBox","followerRenderQuest"],["class","text-center clickable link-color link-text mt-3",3,"click",4,"ngIf"],[1,"text-center","clickable","link-color","link-text","mt-3",3,"click"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"teacher-layout",1)(1,"flexed-on-the-top",2)(2,"div",3)(3,"div",4),e.nrm(4,"div",5),e.nI1(5,"mathJaxContent"),e.nI1(6,"async"),e.nI1(7,"safeContentQuestion"),e.j41(8,"div",6)(9,"azt-search-box",7),e.nI1(10,"mytranslate"),e.bIt("onSearch",function(d){return e.eBV(a),e.Njj(o.onSearchBox(d.searchObj))}),e.k0s(),e.j41(11,"app-tools-knowledge-approve-classification-filter-box",8),e.bIt("changeFilterObjEvent",function(d){return e.eBV(a),e.Njj(o.onChangeFilterObj(d))}),e.k0s()(),e.j41(12,"div",6),e.DNE(13,gi,3,3,"span",9)(14,fi,9,8,"span",10),e.k0s()()()(),e.DNE(15,bi,1,1,"azt-loading-effect",11)(16,Ci,3,9,"ng-template",null,0,e.C5r),e.k0s()}if(2&n){const a=e.sdS(17);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("colorBackground","#f0f8ffe8")("defaultHeight",""),e.R7$(3),e.Y8G("innerHtml",e.bMT(7,16,e.bMT(6,14,e.bMT(5,12,null==o.curObjectiveObj?null:o.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("isManualSearch",!0)("searchContentObj",o.searchContentObj)("placeholder",e.bMT(10,18,"lang_common_search_by_name")),e.R7$(2),e.Y8G("filterObj",o.filterObj),e.R7$(2),e.Y8G("ngIf",o.totalQuestionsAreShow>0),e.R7$(),e.Y8G("ngIf",o.totalSelectedCheckBox>0),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,Xo.$,Te.W,Wo,x.K,mi,c.MD,c.bT,c.Jj,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})();const ke=t=>({nodeObjs:t}),Oi=t=>({"text-danger":t}),le=t=>[t];function Ti(t,s){1&t&&e.nrm(0,"azt-loading-ui")}function wi(t,s){1&t&&e.eu8(0)}function xi(t,s){1&t&&e.nrm(0,"lucide-icon",18)}function ki(t,s){1&t&&e.nrm(0,"lucide-icon",19)}function Ii(t,s){if(1&t&&(e.j41(0,"i"),e.DNE(1,xi,1,0,"lucide-icon",16)(2,ki,1,0,"lucide-icon",17),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function Si(t,s){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",20),e.k0s())}function Ai(t,s){if(1&t&&(e.j41(0,"span",21),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,le,e.bMT(1,2,"/azota-tools/knowledge-tree-manage-practice/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.id))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_manage_practice")," ")}}function yi(t,s){if(1&t&&(e.j41(0,"span",24),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2).$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,le,e.bMT(1,2,"/azota-tools/knowledge-tree-approve-classification-for-objective/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_approve_questions")," ")}}function Fi(t,s){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_approved_all_questions")))}function Ei(t,s){if(1&t&&(e.qex(0),e.j41(1,"span",22),e.nI1(2,"navigationLocalize"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,yi,4,8,"span",23)(6,Fi,3,3,"span",6),e.bVm()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.Y8G("routerLink",e.eq3(8,le,e.bMT(2,4,"/azota-tools/knowledge-tree-view-practice-for-objective/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(4,6,"lang_tool_knowledge_practice_for_objective")," "),e.R7$(2),e.Y8G("ngIf",i.data.numberOfNotManualQuestions>0),e.R7$(),e.Y8G("ngIf",i.data.numberOfNotManualQuestions<=0)}}function zi(t,s){1&t&&e.eu8(0)}function Ri(t,s){if(1&t&&(e.qex(0),e.DNE(1,zi,1,0,"ng-container",7),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(17);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,ke,i.children))}}function Mi(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",9)(2,"td",10)(3,"div",11),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(4,Ii,3,2,"i",6)(5,Si,2,0,"i",6),e.j41(6,"label",12),e.nrm(7,"span",13),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()(),e.j41(11,"td",4),e.EFF(12),e.j41(13,"span",14),e.EFF(14),e.k0s()(),e.j41(15,"td",4),e.DNE(16,Ai,4,8,"span",15)(17,Ei,7,10,"ng-container",6),e.k0s()(),e.DNE(18,Ri,2,4,"ng-container",6),e.bVm()}if(2&t){const i=s.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,16,e.bMT(9,14,e.bMT(8,12,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(5),e.SpI(" ",i.data.numberOfManualQuestions," / "),e.R7$(),e.Y8G("ngClass",e.eq3(18,Oi,i.data.numberOfNotManualQuestions>0)),e.R7$(),e.JRh(i.data.numberOfNotManualQuestions),e.R7$(2),e.Y8G("ngIf",!i.data.objectiveId&&n.form.controls.bookIdFormControl.value>0),e.R7$(),e.Y8G("ngIf",i.data.objectiveId),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function Gi(t,s){if(1&t&&(e.qex(0),e.DNE(1,Mi,19,20,"ng-container",8),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function Di(t,s){if(1&t&&e.DNE(0,Gi,2,1,"ng-container",6),2&t){const i=s.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let $i=(()=>{var t;class s extends J{constructor(){super(...arguments),this.nodeObjs=[],this.loadingExport=!1,this.txtDataExport=""}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let a=[];return n.forEach(l=>{let d={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:l.title,data:{...l,children:[]},children:[]};d.children=this.standardTreeNodes(l.children,o+1),a.push(d)}),a}convertDataLineForChild(n){n.forEach(o=>{let a="";for(let l=0;l<o.level;l++)a+="\t";a+=1==o.data.nodeType?`[O-${o.data.objectiveId}]`:`[L${o.level+1}-${o.data.id}]`,a+=o.text,this.txtDataExport+=a+"\n",this.convertDataLineForChild(o.children)})}exportData(){let n=new Date;this.txtDataExport="",this.loadingExport=!0,this.nodeObjs.forEach(l=>{let d="";for(let v=0;v<l.level;v++)d+="\t";d+=1==l.data.nodeType?`[O-${l.data.objectiveId}]`:`[L${l.level+1}-${l.data.id}]`,d+=l.text,this.txtDataExport+=d+"\n",this.convertDataLineForChild(l.children)});let o=`azota-tree-knowledge-${this.form.controls.schoolLevel.value}-${this.form.controls.schoolSubject.value}-${n.getTime()}.txt`;const a=new Blob([this.txtDataExport],{type:"text/plain"});a&&this.commonService.downloadFileByUrl(window.URL.createObjectURL(a),o),this.loadingExport=!1}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-knowledge-tree-for-classification"]],inputs:{rawNodes:"rawNodes",form:"form"},standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:15,consts:[["recursiveListTmpl",""],[1,"table","table-report"],[1,"text-center"],[1,"text-center","w-48"],[1,"text-right"],[1,"btn","btn-success","text-white","ml-auto",3,"click","disabled"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],[3,"ngClass"],["class","link-color clickable",3,"routerLink",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"],[1,"link-color","clickable",3,"routerLink"],[1,"btn","btn-secondary","mr-3",3,"routerLink"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),e.EFF(4,"\xa0"),e.k0s(),e.j41(5,"th",3),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"th",4)(10,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(o.exportData())}),e.DNE(11,Ti,1,0,"azt-loading-ui",6),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.j41(14,"tbody"),e.DNE(15,wi,1,0,"ng-container",7),e.k0s()(),e.DNE(16,Di,1,1,"ng-template",null,0,e.C5r)}if(2&n){const a=e.sdS(17);e.R7$(6),e.Lme("",e.bMT(7,7,"lang_tool_knowledge_manual_approved")," / ",e.bMT(8,9,"lang_tool_knowledge_manual_not_approved"),""),e.R7$(4),e.Y8G("disabled",o.loadingExport),e.R7$(),e.Y8G("ngIf",o.loadingExport),e.R7$(),e.SpI(" ",e.bMT(13,11,"lang_azt_export"),"\xa0.txt "),e.R7$(3),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.eq3(13,ke,o.nodeObjs))}},dependencies:[k.R,u.F2,c.MD,c.YU,c.Sq,c.bT,c.T3,c.Jj,r.X1,m.iI,m.Wk,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})();function Bi(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Pi(t,s){if(1&t&&e.nrm(0,"app-tools-view-knowledge-tree-for-classification",7),2&t){const i=e.XpG(2);e.Y8G("form",i.form)("rawNodes",i.nodes)}}function Ni(t,s){if(1&t&&e.DNE(0,Pi,1,2,"app-tools-view-knowledge-tree-for-classification",6),2&t){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}let Qi=(()=>{var t;class s extends C.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-classification/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeForClassificationGet(n.schoolLevel,n.schoolSubject,n.bookIdFormControl>0?n.bookIdFormControl:void 0)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.nodes=o.data?.nodes??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_classification_title",description:"lang_cms_admin_tools_knowledge_tree_classification_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),a=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(a)}constructor(n,o){super(),this.aiElearningService=n,this.activeRoute=o,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0}),bookIdFormControl:new r.MJ(0,{nonNullable:!0})})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(T.T5),e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:8,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"form","rawNodes",4,"ngIf"],[3,"form","rawNodes"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"config-level-subject-book",3),e.bIt("changeDataEvent",function(){return e.eBV(a),e.Njj(o.changeLevelSubjectBookEvent())}),e.k0s()(),e.DNE(3,Bi,1,1,"azt-loading-effect",4)(4,Ni,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&n){const a=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,M,x.K,$i,c.MD,c.bT,r.X1,m.iI,r.YN,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();var Li=_(57191);let Ie=(()=>{var t;class s extends C.H{removeExample(n){this.form.controls.examples=new r.Yp(this.form.controls.examples.controls.filter(o=>o.controls.id.value!=n)),this.form.controls.examples.controls.length||this.addMoreExample()}addMoreExample(){this.form.controls.examples.push(new r.gE({id:new r.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new r.MJ("",{nonNullable:!0})}))}emitResult(){this.saveResultEvent.emit(this.hasNewResult)}initForm(){this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),description:new r.MJ("",{nonNullable:!0,validators:[]}),examples:new r.Yp([],{validators:[]}),objectiveId:new r.MJ(0,{nonNullable:!0,validators:[]})})}constructor(){super(),this.saveResultEvent=new e.bkB,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.sAztUuidService=(0,e.WQX)(Ce.D),this.hasNewResult=!1,this.initForm()}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-base-practice-form"]],outputs:{saveResultEvent:"saveResultEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(n,o){},dependencies:[c.MD,r.X1,m.iI,r.YN,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})(),re=(()=>{var t;class s{constructor(n){this.el=n}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(n){n.parentElement&&(n.parentElement.style.minHeight=n.parentElement.clientHeight+"px"),n.style.overflow="hidden",n.style.height="auto";let o=n.scrollHeight+30;o=o<57?57:o,n.style.height=o+"px",n.parentElement&&(n.parentElement.style.minHeight="auto")}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(e.aKT))},t.\u0275dir=e.FsC({type:t,selectors:[["textarea","autoResize",""]],hostBindings:function(n,o){1&n&&e.bIt("input",function(l){return o.onInput(l.target.value)})("focus",function(){return o.onFocus()})},standalone:!0}),s})();const Ki=t=>({"border-danger":t});function Yi(t,s){if(1&t&&(e.j41(0,"mat-option",27),e.nrm(1,"span",28),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function qi(t,s){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",29)(2,"div",30),e.nrm(3,"textarea",12),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",31),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.removeExample(o.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const i=s.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function Vi(t,s){1&t&&e.nrm(0,"azt-loading-ui",32)}function Xi(t,s){1&t&&e.nrm(0,"azt-loading-ui",32)}function Ui(t,s){1&t&&e.nrm(0,"azt-loading-ui",32)}let Ji=(()=>{var t;class s extends Ie{saveObj(n){this.initStatusObj();let o={bookContentId:this.bookContentId,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(a=>a.name?.trim()).filter(a=>""!=a).filter(this.commonService.notEmpty)};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeInsertPracticePost(o)).subscribe(a=>{if(!a.success||!a.data)return this.errorStatusObj(a.message,!0);this.updateObjectiveId(a.data.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.initFormData(),n&&this.emitResult()})}))}updateObjectiveId(n,o,a){if(!o)return a();this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:n,objectiveId:o})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0),a();a()}))}initFormData(){this.initForm(),this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super()}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-add-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId"},standalone:!0,features:[e.Vt3,e.aNF],decls:56,vars:50,consts:[["perfectScroll",""],["searchInListObjective","searchInList"],[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary-soft","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"ng-scrollbar",4,0)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"label",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",11)(14,"label",9),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",12),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",13)(21,"label",9),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",14)(25,"mat-select",15,1),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,Yi,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",13)(35,"label",9),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,qi,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.addMoreExample())}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.emitResult())}),e.DNE(45,Vi,1,0,"azt-loading-ui",24),e.EFF(46),e.nI1(47,"mytranslate"),e.k0s(),e.j41(48,"span",25),e.bIt("click",function(){return e.eBV(a),e.Njj(o.saveObj(!1))}),e.DNE(49,Xi,1,0,"azt-loading-ui",24),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s(),e.j41(52,"span",26),e.bIt("click",function(){return e.eBV(a),e.Njj(o.saveObj(!0))}),e.DNE(53,Ui,1,0,"azt-loading-ui",24),e.EFF(54),e.nI1(55,"mytranslate"),e.k0s()()()}if(2&n){const a=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,24,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(48,Ki,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,26,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,28,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,30,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,32,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,34,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,36,"lang_search_not_found")),e.Y8G("formControl",a.searchControl),e.R7$(3),e.Y8G("ngForOf",a.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,38,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,40,"lang_common_add_more"),""),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(47,42,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(51,44,"lang_common_save")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(55,46,"lang_common_save_and_close")," ")}},dependencies:[A.An,A.U9,P.x,k.R,c.MD,c.YU,c.Sq,c.bT,c.Jj,r.X1,r.qT,r.me,r.BC,r.cb,r.l_,r.j4,m.iI,r.YN,u.wp,f.s,z.wT,N.rl,R.VO,p.flO,h.L,u.km,u.ep,g.Id,g.Yh,b.k,re],encapsulation:2}),s})();const Wi=t=>({"border-danger":t});function Hi(t,s){if(1&t&&(e.j41(0,"mat-option",26),e.nrm(1,"span",27),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function Zi(t,s){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",28)(2,"div",29),e.nrm(3,"textarea",12),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.removeExample(o.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const i=s.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function es(t,s){1&t&&e.nrm(0,"azt-loading-ui",31)}let ts=(()=>{var t;class s extends Ie{saveObj(n){this.initStatusObj();let o={id:this.obj.id,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(a=>a.name?.trim()).filter(a=>""!=a).filter(this.commonService.notEmpty)};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticePost(o)).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.updateObjectiveId(this.obj.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.emitResult()})}))}updateObjectiveId(n,o,a){if((this.obj.objectiveId??0)==o)return a();this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:n,objectiveId:o})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0),a();a()}))}initFormData(){this.initForm(),this.form.controls.name.setValue(this.obj.name),this.form.controls.description.setValue(this.obj.description??""),this.form.controls.objectiveId.setValue(this.obj.objectiveId??0),this.obj.examples.forEach(n=>{this.form.controls.examples.push(new r.gE({id:new r.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new r.MJ(n,{nonNullable:!0})}))}),this.form.controls.examples.controls.length||this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super()}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-edit-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId",obj:"obj"},standalone:!0,features:[e.Vt3,e.aNF],decls:51,vars:45,consts:[["perfectScroll",""],["searchInListObjective","searchInList"],[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],["class","mr-1",4,"ngIf"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"ng-scrollbar",4,0)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"label",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",11)(14,"label",9),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",12),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",13)(21,"label",9),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",14)(25,"mat-select",15,1),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,Hi,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",13)(35,"label",9),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,Zi,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return e.eBV(a),e.Njj(o.addMoreExample())}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.emitResult())}),e.EFF(45),e.nI1(46,"mytranslate"),e.k0s(),e.j41(47,"span",24),e.bIt("click",function(){return e.eBV(a),e.Njj(o.saveObj(!0))}),e.DNE(48,es,1,0,"azt-loading-ui",25),e.EFF(49),e.nI1(50,"mytranslate"),e.k0s()()()}if(2&n){const a=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,21,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(43,Wi,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,23,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,25,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,27,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,29,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,31,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,33,"lang_search_not_found")),e.Y8G("formControl",a.searchControl),e.R7$(3),e.Y8G("ngForOf",a.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,35,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,37,"lang_common_add_more"),""),e.R7$(4),e.SpI(" ",e.bMT(46,39,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(50,41,"lang_common_save_and_close")," ")}},dependencies:[A.An,A.U9,P.x,k.R,c.MD,c.YU,c.Sq,c.bT,c.Jj,r.X1,r.qT,r.me,r.BC,r.cb,r.l_,r.j4,m.iI,r.YN,u.wp,f.s,z.wT,N.rl,R.VO,p.flO,h.L,u.km,u.ep,g.Id,g.Yh,b.k,re],encapsulation:2}),s})();function ns(t,s){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-add-practice",5),e.bIt("saveResultEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.emitResult(o))}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)}}function os(t,s){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-edit-practice",6),e.bIt("saveResultEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.emitResult(o))}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)("obj",i.data.obj)}}let ce=(()=>{var t;class s extends S._{emitResult(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-dialog-select-student-account"]],standalone:!0,features:[e.Vt3,e.aNF],decls:5,vars:2,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[3,"bookContentId","objectiveObjs","saveResultEvent",4,"ngIf"],[3,"bookContentId","objectiveObjs","obj","saveResultEvent",4,"ngIf"],[3,"saveResultEvent","bookContentId","objectiveObjs"],[3,"saveResultEvent","bookContentId","objectiveObjs","obj"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,ns,1,2,"app-tools-knowledge-tree-classification-add-practice",3)(4,os,1,3,"app-tools-knowledge-tree-classification-edit-practice",4),e.k0s()()()),2&n&&(e.R7$(3),e.Y8G("ngIf",!o.data.obj),e.R7$(),e.Y8G("ngIf",o.data.obj))},dependencies:[Ji,ts,c.MD,c.bT,r.X1,m.iI,r.YN,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})();var is=_(79471);function ss(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",10),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function as(t,s){if(1&t&&(e.qex(0),e.j41(1,"div",12)(2,"div",13),e.nrm(3,"azt-question-standalone-for-classification-tool",14),e.k0s()(),e.bVm()),2&t){const i=s.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",n.followerRenderQuest)("questionObj",i)}}function ls(t,s){if(1&t&&e.DNE(0,as,4,3,"ng-container",11),2&t){const i=e.XpG();e.Y8G("ngForOf",i.questionObjs)}}let rs=(()=>{var t;class s extends S._{btnCloseDialog(){this.dialogRef.close(!1)}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetQuestionsOfPracticeGet(this.data.id)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.getListQuestions(n.data??[])}))}getListQuestions(n){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsListPost({ids:n}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],a=>{this.followerRenderQuest.setNumQuest(a.length),this.questionObjs=a,this.stopStatusObj()})}))}loadQuest(n,o){const a=this.commonService.castJsonToClassObjs(K.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(a??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a)})}ngOnInit(){this.initData()}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.questionService=(0,e.WQX)(X.wP),this.followerRenderQuest=new F,this.questionRenderService=(0,e.WQX)(D.g),this.configRenderService=new G.y(!0),this.questionObjs=[]}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-split-practice-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:13,vars:6,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[3,"currentStatusObj"],[4,"ngFor","ngForOf"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6),e.DNE(6,ss,1,1,"azt-loading-effect",7)(7,ls,1,1,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()}if(2&n){const a=e.sdS(8);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(12,4,"lang_auto_dong")," ")}},dependencies:[x.K,se,c.MD,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,g.Yh,b.k,U],encapsulation:2}),s})();function cs(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",9),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function ds(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",10),e.nrm(1,"div",11),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"breakLine"),e.nI1(5,"safeContentQuestion"),e.k0s(),e.j41(6,"div",12)(7,"span",13),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.getAiData(!0))}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()}if(2&t){let i;const n=e.XpG();e.R7$(),e.Y8G("innerHTML",e.bMT(5,8,e.bMT(4,6,null!==(i=e.bMT(3,4,e.bMT(2,2,n.resultData)))&&void 0!==i?i:"")),e.npT),e.R7$(7),e.JRh(e.bMT(9,10,"lang_tool_knowledge_practice_re_ask_ai"))}}let us=(()=>{var t;class s extends S._{getAiData(n){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeSuggestObjectiveForPracticeGet(this.data.practiceId,n)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.resultData=o.data.data,this.stopStatusObj()}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){this.getAiData(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.resultData=""}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-ask-practice-by-ai-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:6,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[3,"currentStatusObj"],[1,"box","p-3"],[1,"mt-2",3,"innerHTML"],[1,"text-center","mt-3"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0),e.DNE(5,cs,1,1,"azt-loading-effect",6)(6,ds,10,12,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()}if(2&n){const a=e.sdS(7);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(11,4,"lang_auto_dong")," ")}},dependencies:[x.K,c.MD,c.bT,c.Jj,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.km,u.ep,u.bt,g.Id,g.Yh,b.k],encapsulation:2}),s})();function _s(t,s){if(1&t&&(e.j41(0,"mat-option",11),e.nrm(1,"span",12),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&t){const i=s.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function ps(t,s){1&t&&e.nrm(0,"azt-loading-ui",13)}function ms(t,s){1&t&&e.nrm(0,"azt-loading-ui",13)}let gs=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.updateEvent=new e.bkB,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.sAztDialogService=(0,e.WQX)(y.i),this.objectiveIdFormControl=new r.MJ(0,{nonNullable:!0,validators:[]})}checkByAI(){this.sAztDialogService.open(us,{data:{practiceId:this.obj.id},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}updateObj(){let n=this.objectiveIdFormControl.value;(this.obj.objectiveId??0)!=n&&(this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:this.obj.id,objectiveId:n||void 0})).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.obj.objectiveId=n,this.obj.objectiveName=this.objectiveObjs.find(a=>a.id==n)?.name??"",this.updateEvent.emit(this.obj),this.successStatusObj("lang_cms_update_success",!0)})))}ngOnInit(){this.viewObjectiveObjs=[{id:0,name:this.commonService.myTranslateInstant("lang_tool_knowledge_non_objective")??"none",questionHistories:[]}],this.viewObjectiveObjs=this.viewObjectiveObjs.concat(this.objectiveObjs),this.objectiveIdFormControl.setValue(this.obj.objectiveId??0)}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-update-objective"]],inputs:{obj:"obj",objectiveObjs:"objectiveObjs"},outputs:{updateEvent:"updateEvent"},standalone:!0,features:[e.Vt3,e.aNF],decls:20,vars:20,consts:[["searchInListObjective","searchInList"],[1,"flex","items-center"],[1,"w-full"],["appearance","fill",1,"box","mb-5","w-full",2,"margin-bottom","0px"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-none"],[1,"btn","btn-secondary","ml-3",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary","ml-3",3,"click"],[3,"value"],[3,"innerHTML"],[1,"mr-1"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-select",4,0),e.nI1(5,"mytranslate"),e.j41(6,"mat-option"),e.nrm(7,"ngx-mat-select-search",5),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,_s,5,8,"mat-option",6),e.k0s()()(),e.j41(11,"div",7)(12,"span",8),e.bIt("click",function(){return e.eBV(a),e.Njj(o.checkByAI())}),e.DNE(13,ps,1,0,"azt-loading-ui",9),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"span",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.updateObj())}),e.DNE(17,ms,1,0,"azt-loading-ui",9),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()()}if(2&n){const a=e.sdS(4);e.R7$(3),e.FS9("placeholder","---"+e.bMT(5,10,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.objectiveIdFormControl),e.R7$(4),e.FS9("placeholderLabel",e.bMT(8,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(9,14,"lang_search_not_found")),e.Y8G("formControl",a.searchControl),e.R7$(3),e.Y8G("ngForOf",a.filter(o.viewObjectiveObjs,"name")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(15,16,"lang_tool_knowledge_practice_ask_ai")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(19,18,"lang_common_save")," ")}},dependencies:[A.An,A.U9,P.x,k.R,c.MD,c.Sq,c.bT,c.Jj,r.X1,r.BC,r.l_,m.iI,r.YN,u.wp,f.s,z.wT,N.rl,R.VO,p.flO,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})();function fs(t,s){if(1&t&&(e.qex(0),e.nrm(1,"div",14),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"breakLine"),e.nI1(5,"safeContentQuestion"),e.bVm()),2&t){let i;const n=s.$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(5,7,e.bMT(4,5,null!==(i=e.bMT(3,3,e.bMT(2,1,"- "+n)))&&void 0!==i?i:"")),e.npT)}}function bs(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",15)(1,"span",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.viewQuestionsOfPractice(o))}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4," \xa0\xa0|\xa0\xa0 "),e.j41(5,"span",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.splitEvent.emit(o))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8," \xa0\xa0|\xa0\xa0 "),e.j41(9,"span",18),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.editEvent.emit(o))}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.EFF(12," \xa0\xa0|\xa0\xa0 "),e.j41(13,"span",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.deleteEvent.emit(o))}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.JRh(e.bMT(3,4,"lang_tool_knowledge_manage_show_questions_of_practice")),e.R7$(4),e.JRh(e.bMT(7,6,"lang_tool_knowledge_manage_split_practice_question_prompt")),e.R7$(4),e.JRh(e.bMT(11,8,"lang_common_edit")),e.R7$(4),e.JRh(e.bMT(15,10,"lang_common_delete")))}function hs(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",6)(1,"app-tools-knowledge-tree-classification-update-objective",20),e.bIt("updateEvent",function(o){e.eBV(i);const a=e.XpG(3);return e.Njj(a.updateEvent.emit(o))}),e.k0s()()}if(2&t){const i=e.XpG(2).$implicit,n=e.XpG();e.R7$(),e.Y8G("obj",i)("objectiveObjs",n.allObjectiveObjs)}}function vs(t,s){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.nrm(7,"div",11),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"breakLine"),e.nI1(11,"safeContentQuestion"),e.k0s(),e.j41(12,"div",9)(13,"div",10),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"div",12),e.DNE(17,fs,6,9,"ng-container",0),e.k0s()()(),e.DNE(18,bs,16,12,"div",13),e.k0s(),e.DNE(19,hs,2,2,"div",5),e.k0s()),2&t){let i;const n=e.XpG().$implicit,o=e.XpG();e.R7$(5),e.SpI("- ** ",e.bMT(6,6,"lang_tool_knowledge_manage_practice_description")," :**"),e.R7$(2),e.Y8G("innerHTML",e.bMT(11,14,e.bMT(10,12,null!==(i=e.bMT(9,10,e.bMT(8,8,"- "+n.description)))&&void 0!==i?i:"")),e.npT),e.R7$(7),e.SpI("- **",e.bMT(15,16,"lang_tool_knowledge_manage_practice_example"),":**"),e.R7$(3),e.Y8G("ngForOf",n.examples),e.R7$(),e.Y8G("ngIf",o.showAction),e.R7$(),e.Y8G("ngIf",o.showAction)}}function Cs(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"span",2),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.collapseByObjectiveId(o))}),e.nrm(3,"lucide-icon",3)(4,"span",4),e.nI1(5,"mathJaxContent"),e.nI1(6,"async"),e.nI1(7,"safeContentQuestion"),e.k0s(),e.DNE(8,vs,20,18,"div",5),e.k0s(),e.bVm()}if(2&t){const i=s.$implicit;e.R7$(3),e.Y8G("name",i.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(),e.Y8G("innerHTML",e.bMT(7,8,e.bMT(6,6,e.bMT(5,4,i.name))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}let H=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.showAction=!0,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.splitEvent=new e.bkB,this.updateEvent=new e.bkB,this.sAztDialogService=(0,e.WQX)(y.i),this.viewObjs=[]}viewQuestionsOfPractice(n){this.sAztDialogService.open(rs,{data:n,restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}collapseByObjectiveId(n){n.isExpand=!n.isExpand}initViewData(){let n=this.objs.map(o=>({...o,isExpand:this.viewObjs.find(a=>a.id==o.id)?.isExpand??!1}));this.viewObjs=n}ngOnChanges(){this.initViewData()}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-list-practice-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",allObjectiveObjs:"allObjectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"box","p-3","mb-3"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[3,"innerHTML"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"flex","items-center"],[1,"w-full"],[1,"mb-3"],[1,"font-medium"],[1,"mt-2",2,"padding-left","20px",3,"innerHTML"],[2,"padding-left","20px"],["class","flex-none text-right",4,"ngIf"],[1,"mt-2",3,"innerHTML"],[1,"flex-none","text-right"],[1,"text-secondary","clickable",3,"click"],[1,"text-pending","clickable",3,"click"],[1,"link-color","clickable",3,"click"],[1,"text-danger","clickable",3,"click"],[3,"updateEvent","obj","objectiveObjs"]],template:function(n,o){1&n&&e.DNE(0,Cs,9,10,"ng-container",0),2&n&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[gs,c.MD,c.Sq,c.bT,c.Jj,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,u.km,u.ep,u.bt,g.Id,b.k],encapsulation:2}),s})();const js=t=>({"border-danger":t});function Os(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",17),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ts(t,s){if(1&t&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",19),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("allObjectiveObjs",i.data.allObjectiveObjs)("showAction",!1)}}function ws(t,s){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function xs(t,s){if(1&t&&e.DNE(0,Ts,2,4,"div",18)(1,ws,3,3,"div",18),2&t){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(),e.Y8G("ngIf",i.objs.length<=0)}}function ks(t,s){1&t&&e.nrm(0,"azt-loading-ui",20)}let Se=(()=>{var t;class s extends S._{waitResultApi(n,o,a){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(n)).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);if("fail"==l.data?.status)return a("lang_tool_ai_call_long_prompt_fail");if("running"==l.data?.status)return setTimeout(()=>this.waitResultApi(n,o,a),5e3);let d=this.commonService.castJsonToObj(l.data?.result??"");return null==d?a("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(d)}))}callPromptApi(){let n={id:this.data.obj.id,prompt:this.promptFormControl.value};this.initStatusObj(),this.objs=[],this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailSuggestionPost(n)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.waitResultApi(o.data.id,a=>{this.objs=a.map(l=>({...l,id:0,objectiveName:""})),this.stopStatusObj()},a=>this.errorStatusObj(a,!0))}))}confirmOk(){this.savingData=!1;let n={id:this.data.obj.id,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailPost(n)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.aiLongRunningTaskService=(0,e.WQX)(is.Q),this.promptFormControl=new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),this.objs=[],this.savingData=!1}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-split-practice-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:25,vars:22,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[1,"w-full"],["autoResize","",1,"form-control",3,"ngClass","placeholder","formControl"],[1,"text-center","mt-3"],[1,"btn","btn-primary",2,"height","100%",3,"click","disabled"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"btn","btn-primary","w-32",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","allObjectiveObjs","showAction"],[1,"mr-1"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6)(6,"div",7),e.nrm(7,"textarea",8),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",9)(10,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.callPromptApi())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",11),e.DNE(14,Os,1,1,"azt-loading-effect",12)(15,xs,2,2,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(17,"div",13)(18,"button",14),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",15),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmOk())}),e.DNE(22,ks,1,0,"azt-loading-ui",16),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()}if(2&n){const a=e.sdS(16);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"lang_tool_knowledge_split_practice_prompt")),e.Y8G("ngClass",e.eq3(20,js,o.promptFormControl.invalid))("formControl",o.promptFormControl),e.R7$(3),e.Y8G("disabled",o.promptFormControl.invalid),e.R7$(),e.JRh(e.bMT(12,14,"lang_tool_knowledge_split_practice_call_prompt_api")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(20,16,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(24,18,"lang_auto_luu")," ")}},dependencies:[x.K,H,k.R,c.MD,c.YU,c.bT,r.X1,r.me,r.BC,r.l_,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,g.Yh,b.k,re],encapsulation:2}),s})();const Is=t=>({"text-slate-400":t});function Ss(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"app-tools-knowledge-tree-classification-list-practice-box",11),e.bIt("editEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.editEvent.emit(o))})("deleteEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.deleteEvent.emit(o))})("splitEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.splitEvent.emit(o))})("updateEvent",function(o){e.eBV(i);const a=e.XpG(2);return e.Njj(a.updateEvent.emit(o))}),e.k0s()()()}if(2&t){const i=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.Y8G("objs",i.childrenObjs)("objectiveObjs",n.objectiveObjs)("allObjectiveObjs",n.allObjectiveObjs)}}function As(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.collapseByGroupId(null==o?null:o.objectiveObj))}),e.nrm(5,"lucide-icon",5),e.j41(6,"h2",6),e.nrm(7,"span",7),e.nI1(8,"mytranslate"),e.nI1(9,"mathJaxContent"),e.nI1(10,"async"),e.nI1(11,"safeContentQuestion"),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.DNE(14,Ss,3,3,"div",8),e.k0s(),e.bVm()}if(2&t){let i;const n=s.$implicit;e.R7$(3),e.Y8G("ngClass",e.eq3(16,Is,n.childrenObjs.length<=0)),e.R7$(2),e.Y8G("name",n.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(2),e.Y8G("innerHTML",e.bMT(11,12,e.bMT(10,10,e.bMT(9,8,null!==(i=null==n||null==n.objectiveObj?null:n.objectiveObj.name)&&void 0!==i?i:e.bMT(8,6,"lang_tool_knowledge_manage_not_select_objective")))),e.npT),e.R7$(5),e.SpI(" ","("+n.childrenObjs.length+" "+e.bMT(13,14,"lang_tool_knowledge_manage_total_children_practice")+")"," "),e.R7$(2),e.Y8G("ngIf",n.isExpand)}}let ys=(()=>{var t;class s extends C.H{constructor(){super(...arguments),this.showAction=!0,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.splitEvent=new e.bkB,this.updateEvent=new e.bkB,this.viewObjs=[]}collapseByGroupId(n){let o=this.viewObjs.find(a=>a.objectiveObj?.id==n?.id);o&&(o.isExpand=!o.isExpand)}isExpandAll(){return this.viewObjs.every(n=>n.isExpand)}expandAll(){this.viewObjs.forEach(n=>n.isExpand=!0)}collapseAll(){this.viewObjs.forEach(n=>n.isExpand=!1)}initGroupData(){let n=[];this.objectiveObjs.forEach(a=>{let l=this.objs.filter(v=>v.objectiveId==a.id),d=this.viewObjs.find(v=>v.objectiveObj?.id==a?.id)?.isExpand??!1;n.push({isExpand:d,objectiveObj:a,childrenObjs:l})});let o=this.objs.filter(a=>null==a.objectiveId);o.length&&(n=[{isExpand:this.viewObjs.find(d=>null==d.objectiveObj?.id)?.isExpand??!1,objectiveObj:void 0,childrenObjs:o}].concat(n)),this.viewObjs=n}ngOnChanges(){this.initGroupData()}}return(t=s).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-practice-group-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",allObjectiveObjs:"allObjectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mb-3"],[1,"flex","items-center"],[1,"font-medium",3,"ngClass"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[1,"font-medium"],[3,"innerHTML"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"box","p-3"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"]],template:function(n,o){1&n&&e.DNE(0,As,15,18,"ng-container",0),2&n&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[H,c.MD,c.YU,c.Sq,c.bT,c.Jj,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})();function Fs(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",8),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}let Es=(()=>{var t;class s extends C.H{addNew(){this.sAztDialogService.open(ce,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(n){this.sAztDialogService.open(ce,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs,obj:n},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}deleteObj(n){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(ie.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(a=>{a&&this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:n.id})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.objs=this.objs.filter(d=>d.id!=n.id)}))})}splitObj(n){this.sAztDialogService.open(Se,{data:{obj:n,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}updateObj(n){this.objs=this.objs.map(o=>o.id!=n.id?o:{...n})}getObjectiveInfo(n){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.knowledgeObjs=o.data.objs,this.curBookContentObj=this.sAztKnowledgeObjectiveService.getObjById(o.data.objs,this.bookContentId),n()})}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesAndObjectivesOfBookContentGet(this.bookContentId)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.objectiveObjs=n.data?.objectives??[];let a=this.sAztKnowledgeObjectiveService.getAllObjectiveObjs(this.knowledgeObjs,[]).filter(l=>!this.objectiveObjs.map(d=>d.id).includes(l.id));this.allObjectiveObjs=this.objectiveObjs.concat(a),this.objs=n.data?.practices.map(l=>({...l,objectiveName:n.data?.objectives.find(d=>d.id==l.objectiveId)?.name??""}))??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",description:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.bookContentId=Number(this.commonService.getMyParam(this.activeRoute,"bookContentId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.getObjectiveInfo(()=>{this.initData()})}constructor(n){super(),this.activeRoute=n,this.aiElearningPracticeService=(0,e.WQX)(Li.U),this.sAztDialogService=(0,e.WQX)(y.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(E),this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.bookContentId=0,this.curBookContentObj=void 0,this.objectiveObjs=[],this.allObjectiveObjs=[],this.knowledgeObjs=[],this.backTo="",this.objs=[]}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-manage-practice"]],standalone:!0,features:[e.Vt3,e.aNF],decls:14,vars:15,consts:[[3,"headerBackToLink"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[1,"flex-none"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj",4,"ngIf"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"],[3,"currentStatusObj"]],template:function(n,o){1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.nI1(4,"mathJaxContent"),e.nI1(5,"async"),e.nI1(6,"safeContentQuestion"),e.j41(7,"div",4)(8,"span",5),e.bIt("click",function(){return o.addNew()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",1),e.DNE(12,Fs,1,1,"azt-loading-effect",6),e.j41(13,"app-tools-knowledge-tree-classification-practice-group-box",7),e.bIt("editEvent",function(l){return o.editObj(l)})("deleteEvent",function(l){return o.deleteObj(l)})("splitEvent",function(l){return o.splitObj(l)})("updateEvent",function(l){return o.updateObj(l)}),e.k0s()()()()),2&n&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(3),e.Y8G("innerHTML",e.bMT(6,11,e.bMT(5,9,e.bMT(4,7,null==o.curBookContentObj?null:o.curBookContentObj.title))),e.npT),e.R7$(6),e.JRh(e.bMT(10,13,"lang_common_create")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.Y8G("objs",o.objs)("objectiveObjs",o.objectiveObjs)("allObjectiveObjs",o.allObjectiveObjs))},dependencies:[I.Q,x.K,ys,c.MD,c.bT,c.Jj,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})();function zs(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",14),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Rs(t,s){if(1&t&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",16),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("allObjectiveObjs",i.data.allObjectiveObjs)("showAction",!1)}}function Ms(t,s){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function Gs(t,s){if(1&t&&e.DNE(0,Rs,2,4,"div",15)(1,Ms,3,3,"div",15),2&t){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(),e.Y8G("ngIf",i.objs.length<=0)}}function Ds(t,s){1&t&&e.nrm(0,"azt-loading-ui",17)}let $s=(()=>{var t;class s extends S._{waitResultApi(n,o,a){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(n)).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);if("fail"==l.data?.status)return a("lang_tool_ai_call_long_prompt_fail");if("running"==l.data?.status)return setTimeout(()=>this.waitResultApi(n,o,a),5e3);let d=this.commonService.castJsonToObj(l.data?.result??"");return null==d?a("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(d)}))}callPromptApi(){this.initStatusObj(),this.objs=[],this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeSuggestPracticesOfObjectiveGet(this.data.obj.objectiveId)).subscribe(n=>{if(!n.success||!n.data)return this.errorStatusObj(n.message,!0);this.waitResultApi(n.data.id,o=>{this.objs=o.map(a=>({...a,id:0,objectiveName:""})),this.stopStatusObj()},o=>this.errorStatusObj(o,!0))}))}confirmOk(){this.savingData=!1;let n={objectiveId:this.data.obj.objectiveId??0,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticesOfObjectivePost(n)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){this.callPromptApi()}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.aiLongRunningTaskService=(0,e.WQX)(T.Qk),this.objs=[],this.savingData=!1}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-re-classification-practice-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:21,vars:14,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"btn","btn-pending-soft","w-32","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","allObjectiveObjs","showAction"],[1,"mr-1"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6)(6,"div",7),e.DNE(7,zs,1,1,"azt-loading-effect",8)(8,Gs,2,2,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(10,"div",9)(11,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(o.btnCloseDialog())}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(o.callPromptApi())}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"button",12),e.bIt("click",function(){return e.eBV(a),e.Njj(o.confirmOk())}),e.DNE(18,Ds,1,0,"azt-loading-ui",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()}if(2&n){const a=e.sdS(9);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(13,8,"lang_auto_dong")," "),e.R7$(3),e.SpI(" ",e.bMT(16,10,"lang_tool_knowledge_re_classification_call_api_again")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(20,12,"lang_tool_knowledge_re_classification_practice_agree_with_result")," ")}},dependencies:[x.K,H,k.R,c.MD,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,g.Yh,b.k],encapsulation:2}),s})();function Bs(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",9),2&t){const i=e.XpG(2);e.Y8G("currentStatusObj",i.statusObj)}}function Ps(t,s){if(1&t){const i=e.RV6();e.j41(0,"div",2)(1,"div",3),e.nrm(2,"div",4),e.nI1(3,"mathJaxContent"),e.nI1(4,"async"),e.nI1(5,"safeContentQuestion"),e.k0s(),e.j41(6,"div",2),e.DNE(7,Bs,1,1,"azt-loading-effect",5),e.j41(8,"app-tools-knowledge-tree-classification-list-practice-box",6),e.bIt("editEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.editObj(o))})("deleteEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.deleteObj(o))})("splitEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.splitObj(o))})("updateEvent",function(o){e.eBV(i);const a=e.XpG();return e.Njj(a.updateObj(o))}),e.k0s()(),e.j41(9,"div",7)(10,"span",8),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.reClassificationPractice())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()}if(2&t){const i=e.XpG();e.R7$(2),e.Y8G("innerHTML",e.bMT(5,10,e.bMT(4,8,e.bMT(3,6,i.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.objectiveObjs)("allObjectiveObjs",i.allObjectiveObjs),e.R7$(3),e.JRh(e.bMT(12,12,"lang_tool_knowledge_practice_re_classification_practice"))}}let Ns=(()=>{var t;class s extends C.H{reClassificationPractice(){this.sAztDialogService.open($s,{data:{obj:this.curObjectiveObj,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(n){this.sAztDialogService.open(ce,{data:{bookContentId:this.objectiveId,objectiveObjs:this.objectiveObjs,obj:n},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}deleteObj(n){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(ie.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(a=>{a&&this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:n.id})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.objs=this.objs.filter(d=>d.id!=n.id)}))})}splitObj(n){this.sAztDialogService.open(Se,{data:{obj:n,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(a=>{a&&this.initData()})}updateObj(n){this.objs=this.objs.map(o=>o.id!=n.id?o:{...n})}getObjectiveInfo(n){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.knowledgeObjs=o.data.objs;let a=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(o.data.objs,this.objectiveId);if(!a)return this.errorStatusObj("lang_tool_knowledge_not_found_objective_id",!0);this.curObjectiveObj=a,n()})}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesOfObjectiveGet(this.objectiveId)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.allObjectiveObjs=this.sAztKnowledgeObjectiveService.getAllObjectiveObjs(this.knowledgeObjs,[]),this.objectiveObjs=this.allObjectiveObjs,this.objs=n.data?.map(o=>({...o,objectiveName:this.allObjectiveObjs.find(a=>a.id==o.objectiveId)?.name??""}))??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_view_practice_of_one_objective_title",description:"lang_cms_admin_tools_knowledge_tree_view_practice_of_one_objective_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.getObjectiveInfo(()=>{this.initData()})}constructor(n){super(),this.activeRoute=n,this.aiElearningPracticeService=(0,e.WQX)(T.UO),this.sAztDialogService=(0,e.WQX)(y.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(E),this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.objectiveId=0,this.objectiveObjs=[],this.allObjectiveObjs=[],this.knowledgeObjs=[],this.backTo="",this.objs=[]}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-view-practice-for-objective"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:2,consts:[[3,"headerBackToLink"],["class","pt-3",4,"ngIf"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[3,"currentStatusObj",4,"ngIf"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"],[1,"text-center"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj"]],template:function(n,o){1&n&&(e.j41(0,"teacher-layout",0),e.DNE(1,Ps,13,14,"div",1),e.k0s()),2&n&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",o.curObjectiveObj))},dependencies:[I.Q,x.K,H,c.MD,c.bT,c.Jj,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,u.km,u.ep,g.Id,b.k],encapsulation:2}),s})(),Qs=(()=>{var t;class s{constructor(){this.recognition=1,this.understanding=2,this.practicalApplication=3}isRecognition(n){return n==this.recognition}isUnderstanding(n){return n==this.understanding}isPracticalApplication(n){return n==this.practicalApplication}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var Ls=_(24551);function Ks(t,s){if(1&t&&(e.j41(0,"div",6),e.nrm(1,"azt-loading-effect",7),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("currentStatusObj",i.statusObj)}}function Ys(t,s){if(1&t&&(e.qex(0),e.j41(1,"div",12)(2,"div",13),e.nrm(3,"azt-question-standalone-for-classification-tool",14),e.k0s()(),e.bVm()),2&t){const i=s.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",n.followerRenderQuest)("questionObj",i)}}function qs(t,s){if(1&t&&(e.j41(0,"div",8)(1,"ng-scrollbar",9,1)(3,"div",10),e.DNE(4,Ys,4,3,"ng-container",11),e.k0s()()()),2&t){const i=e.XpG();e.R7$(),e.Y8G("visibility","hover"),e.R7$(3),e.Y8G("ngForOf",i.questionObjs)}}let Vs=(()=>{var t;class s extends S._{getQuestionsByKey(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.questionBankService.aiApiV1QuestionBankGetQuestionsByKeyGet(this.data.questionKey,this.data.answerType)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.getListQuestions(n.data??[])}))}getListQuestions(n){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsListPost({ids:n}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],a=>{this.followerRenderQuest.setNumQuest(a.length),this.questionObjs=a,this.stopStatusObj()})}))}loadQuest(n,o){const a=this.commonService.castJsonToClassObjs(K.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(a??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a)})}ngOnInit(){this.getQuestionsByKey(),super.ngOnInit()}constructor(n,o,a){super(a,o),this.questionBankService=n,this.dialogRef=o,this.data=a,this.questionService=(0,e.WQX)(X.wP),this.followerRenderQuest=new F,this.questionRenderService=(0,e.WQX)(D.g),this.configRenderService=new G.y(!0),this.questionObjs=[]}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(Ls.g),e.rXU(w.CP,8),e.rXU(w.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["knowledge-questions-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:8,vars:5,consts:[["doneLoading",""],["perfectScroll",""],[1,"box","p-3",2,"height","100%"],["class","flex justify-center items-center","style","height: 100%",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"flex","justify-center","items-center",2,"height","100%"],[3,"currentStatusObj"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[4,"ngFor","ngForOf"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"div",2),e.DNE(1,Ks,2,1,"div",3)(2,qs,5,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(o.dialogRef.close())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()}if(2&n){const a=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),e.R7$(5),e.SpI(" ",e.bMT(7,3,"lang_auto_dong")," ")}},dependencies:[x.K,se,c.MD,c.Sq,c.bT,r.X1,m.iI,r.YN,u.wp,f.s,p.flO,h.L,g.Id,g.Yh,b.k,U],encapsulation:2}),s})();const Ae=t=>({nodeObjs:t}),Xs=t=>({"text-danger":t});function Us(t,s){if(1&t&&(e.j41(0,"th",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_answer_type_"+i))}}function Js(t,s){if(1&t&&(e.j41(0,"th",12),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=s.$implicit;e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_difficulty_index_"+i))}}function Ws(t,s){if(1&t&&(e.qex(0),e.DNE(1,Js,3,3,"th",11),e.bVm()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.difficultyIndexes)}}function Hs(t,s){1&t&&e.eu8(0)}function Zs(t,s){1&t&&e.nrm(0,"lucide-icon",21)}function ea(t,s){1&t&&e.nrm(0,"lucide-icon",22)}function ta(t,s){if(1&t&&(e.j41(0,"i"),e.DNE(1,Zs,1,0,"lucide-icon",19)(2,ea,1,0,"lucide-icon",20),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function na(t,s){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",23),e.k0s())}function oa(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"td",24),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,a=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.openKnowledgeQuestionsDialog(a.data.getQuestionKey,o))}),e.EFF(2),e.k0s(),e.bVm()}if(2&t){let i,n;const o=s.$implicit,a=e.XpG().$implicit,l=e.XpG().$implicit,d=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(2,Xs,(null!==(i=null==(i=d.findQuestionObj(l.data.questions,a,o))?null:i.total)&&void 0!==i?i:0)<=d.filterTotalQuestionFormControl.value)),e.R7$(),e.SpI(" ",null!==(n=null==(n=d.findQuestionObj(l.data.questions,a,o))?null:n.total)&&void 0!==n?n:0," ")}}function ia(t,s){if(1&t&&(e.qex(0),e.DNE(1,oa,3,4,"ng-container",8),e.bVm()),2&t){const i=e.XpG(4);e.R7$(),e.Y8G("ngForOf",i.difficultyIndexes)}}function sa(t,s){1&t&&e.eu8(0)}function aa(t,s){if(1&t&&(e.qex(0),e.DNE(1,sa,1,0,"ng-container",9),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(17);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,Ae,i.children))}}function la(t,s){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",14)(2,"td",15)(3,"div",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG(3);return e.Njj(a.clickToNode(o))}),e.DNE(4,ta,3,2,"i",13)(5,na,2,0,"i",13),e.j41(6,"label",17),e.nrm(7,"span",18),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()(),e.DNE(11,ia,2,1,"ng-container",8),e.k0s(),e.DNE(12,aa,2,4,"ng-container",13),e.bVm()}if(2&t){const i=s.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(4),e.Y8G("ngForOf",n.answerTypes),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function ra(t,s){if(1&t&&(e.qex(0),e.DNE(1,la,13,14,"ng-container",8),e.bVm()),2&t){const i=s.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function ca(t,s){if(1&t&&e.DNE(0,ra,2,1,"ng-container",13),2&t){const i=s.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let da=(()=>{var t;class s extends J{openKnowledgeQuestionsDialog(n,o){this.sAztDialogService.open(Vs,{data:{questionKey:n,answerType:o},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}findQuestionObj(n,o,a){return n.find(l=>l.answerType==o&&l.difficultyIndex==a)}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let a=[];return n.forEach(l=>{let d={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:l.title,data:{...l,children:[]},children:[]};d.children=this.standardTreeNodes(l.children,o+1),a.push(d)}),a}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}constructor(n){super(),this.sAztDialogService=n,this.nodeObjs=[],this.filterTotalQuestionFormControl=new r.MJ(20,{nonNullable:!0}),this.sAztAnswerTypeService=(0,e.WQX)(te._),this.sAztQuestionDifficultyIndexService=(0,e.WQX)(Qs),this.answerTypes=[this.sAztAnswerTypeService.oneChoiceAnswer,this.sAztAnswerTypeService.fillAnswer,this.sAztAnswerTypeService.trueFalseAnswer],this.difficultyIndexes=[this.sAztQuestionDifficultyIndexService.recognition,this.sAztQuestionDifficultyIndexService.understanding,this.sAztQuestionDifficultyIndexService.practicalApplication]}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(y.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-knowledge-tree-for-statistic"]],inputs:{rawNodes:"rawNodes"},standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:10,consts:[["recursiveListTmpl",""],[1,"mb-3","box","p-3"],[1,"flex","items-center"],[1,"mr-2","flex-none"],["type","number","min","0",1,"form-control","ml-2",3,"formControl"],[1,"table","table-report"],["rowspan","2",1,"text-center"],["colspan","3","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["colspan","3",1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"],[1,"text-center","clickable","open-question",3,"click","ngClass"]],template:function(n,o){if(1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"label",3),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",4),e.k0s()(),e.j41(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),e.EFF(10,"\xa0"),e.k0s(),e.DNE(11,Us,3,3,"th",7),e.k0s(),e.j41(12,"tr"),e.DNE(13,Ws,2,1,"ng-container",8),e.k0s()(),e.j41(14,"tbody"),e.DNE(15,Hs,1,0,"ng-container",9),e.k0s()(),e.DNE(16,ca,1,1,"ng-template",null,0,e.C5r)),2&n){const a=e.sdS(17);e.R7$(3),e.JRh(e.bMT(4,6,"lang_tool_knowledge_filter_by_total_question")),e.R7$(2),e.Y8G("formControl",o.filterTotalQuestionFormControl),e.R7$(6),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.eq3(8,Ae,o.nodeObjs))}},dependencies:[c.MD,c.YU,c.Sq,c.bT,c.T3,c.Jj,r.X1,r.me,r.Q0,r.BC,r.VZ,r.l_,m.iI,r.YN,u.wp,f.s,p.flO,p.WGl,h.L,u.km,u.ep,g.Id,b.k],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}open-question[_ngcontent-%COMP%]:hover{background:#f0f8ff}"]}),s})();function ua(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function _a(t,s){if(1&t&&e.nrm(0,"app-tools-view-knowledge-tree-for-statistic",7),2&t){const i=e.XpG(2);e.Y8G("rawNodes",i.nodes)}}function pa(t,s){if(1&t&&e.DNE(0,_a,1,1,"app-tools-view-knowledge-tree-for-statistic",6),2&t){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}const ga=[{path:"",component:ze.z,children:[{path:"knowledge-tree-statistic/:levelId/:subjectId/:bookId",component:(()=>{var t;class s extends C.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-statistic/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(n.schoolLevel,n.schoolSubject,!0,n.bookIdFormControl>0?n.bookIdFormControl:void 0)).subscribe(o=>{if(!o.success)return this.nodes=[],this.errorStatusObj(o.message,!0);this.nodes=o.data?.nodes??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_statistic_title",description:"lang_cms_admin_tools_knowledge_tree_statistic_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),a=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(a)}constructor(n,o){super(),this.aiElearningService=n,this.activeRoute=o,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0}),bookIdFormControl:new r.MJ(0,{nonNullable:!0})})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(T.T5),e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-statistic"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:8,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"rawNodes",4,"ngIf"],[3,"rawNodes"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"config-level-subject-book",3),e.bIt("changeDataEvent",function(){return e.eBV(a),e.Njj(o.changeLevelSubjectBookEvent())}),e.k0s()(),e.DNE(3,ua,1,1,"azt-loading-effect",4)(4,pa,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&n){const a=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[I.Q,M,x.K,da,c.MD,c.bT,r.X1,m.iI,r.YN,f.s,p.flO,h.L,g.Id,b.k],encapsulation:2}),s})()},{path:"knowledge-tree-classification/:levelId/:subjectId/:bookId",component:Qi},{path:"knowledge-tree-approve-classification-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:ji},{path:"knowledge-tree-manage-practice/:levelId/:subjectId/:bookId/:bookContentId",component:Es},{path:"knowledge-tree-view-practice-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:Ns},{path:"job-progress-management",component:yo},{path:"auto-suggestion-for-exams",component:ft},{path:"auto-suggestion-for-one-exam/:examId/:levelId/:subjectId",component:$n},{path:"book-management",component:Oe},{path:"book-management/:levelId/:subjectId",component:Oe},{path:"book-detail/:bookId",component:mo}]}];let fa=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.iI.forChild(ga),m.iI,Ee.XE]}),s})()}}]);