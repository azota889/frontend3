"use strict";(self.webpackChunkSuperadminMod=self.webpackChunkSuperadminMod||[]).push([[686],{52686:($a,st,d)=>{d.r(st),d.d(st,{AzotaAdsRoutingModule:()=>wa});var h=d(32108),jt=d(74341),St=d(74603),u=d(60177),i=d(89417),v=d(8516),A=d(24110),y=d(46412),N=d(78416),f=d(88048),C=d(23424),D=d(91022),t=d(93953),ot=d(53293),b=d(26536),F=d(1654),z=d(77932);const x={BANNER:"BANNER",DIALOG:"DIALOG"};var w=d(97173);let Tt=(()=>{var n;class o{constructor(){this.commonListService=(0,t.WQX)(ot.Nz),this.commonService=(0,t.WQX)(w.R)}getSchoolLevelAndSubjects(a){this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(e=>{e.success||(this.commonService.snackError(e.message),a([],[],[],[],!1));let r=e.data?.schoolLevelSubjectObjs.map(p=>p.schoolLevel).filter(this.commonService.notEmpty)??[],l=this.commonService.concatMultipleArray(e.data?.schoolLevelSubjectObjs.map(p=>p.schoolSubjectObjs)??[]),c=this.commonService.uniqueArray(r.map(p=>p.key).filter(this.commonService.notEmpty)),m=this.commonService.uniqueArray(l.map(p=>p.key).filter(this.commonService.notEmpty));c=c.filter(p=>"azt_lang_core_khoi_khac"!=p),m=m.filter(p=>"azt_lang_core_khoi_khac"!=p),a(r,l,c,m,!0)})}getSelectedLevelAndSubjects(a,e,r){let l=a.filter(g=>"level"==g.filterType).map(g=>g.filterObjectId),c=a.filter(g=>"subject"==g.filterType).map(g=>g.filterObjectId);return{selectedSchoolLevels:this.commonService.uniqueArray(e.filter(g=>l?.includes(g.id)).map(g=>g.key).filter(this.commonService.notEmpty)),selectedSchoolSubjects:this.commonService.uniqueArray(r.filter(g=>c?.includes(g.id)).map(g=>g.key).filter(this.commonService.notEmpty))}}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),o})();var I=d(11782),j=d(9788);let rt=(()=>{var n;class o extends F.H{changeProvince(a){if(!a)return this.form.controls.provinceIds.setValue([]);this.form.controls.provinceIds.setValue(this.allProvinceObjs.map(e=>e.id))}changeSchoolLevel(a){if(!a)return this.form.controls.schoolLevels.setValue([]);this.form.controls.schoolLevels.setValue(this.allSchoolLevels)}changeSchoolSubject(a){if(!a)return this.form.controls.schoolSubjects.setValue([]);this.form.controls.schoolSubjects.setValue(this.allSchoolSubjects)}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(a){this.form.controls.attributesList.removeAt(a)}createFieldForm(a,e,r,l){return new i.gE({id:new i.MJ(l,{nonNullable:!0}),displayName:new i.MJ(a,{nonNullable:!0,validators:[i.k0.required,z.M.noWhiteSpace]}),variableName:new i.MJ(e,{nonNullable:!0,validators:[i.k0.required,z.M.noWhiteSpace]}),description:new i.MJ(r,{nonNullable:!0})})}ngOnInit(){super.ngOnInit()}constructor(){super(),this.commonListService=(0,t.WQX)(ot.Nz),this.sAztCategoryAdsService=(0,t.WQX)(Tt),this.categoryService=(0,t.WQX)(b.M$),this.activeRoute=(0,t.WQX)(h.nX),this.backToLink="",this.categoryId=0,this.listPositions=this.commonService.getEnumValues(b.rA),this.listDisplayTypes=this.commonService.getEnumValues(x),this.allProvinceObjs=[],this.allSchoolLevels=[],this.allSchoolSubjects=[],this.allSchoolLevelObjs=[],this.allSchoolSubjectObjs=[],this.form=new i.gE({name:new i.MJ("",{nonNullable:!0,validators:[i.k0.required,z.M.noWhiteSpace]}),adsPosition:new i.MJ(b.rA.ALLPOSITION,{nonNullable:!0,validators:[i.k0.required]}),adsDisplayType:new i.MJ(x.BANNER,{nonNullable:!0,validators:[i.k0.required]}),desc:new i.MJ("",{nonNullable:!0}),showForVip:new i.MJ(!1,{nonNullable:!0}),attributesList:new i.Yp([]),schoolLevels:new i.MJ([],{nonNullable:!0}),schoolSubjects:new i.MJ([],{nonNullable:!0}),provinceIds:new i.MJ([],{nonNullable:!0})})}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["base-ads-category-form"]],standalone:!0,features:[t.Vt3,t.aNF],decls:0,vars:0,template:function(a,e){},dependencies:[u.MD,i.X1,h.iI,i.YN,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();var P=d(86600),V=d(53719),U=d(82798),it=d(78309);const At=()=>({"mr-1":!0}),lt=n=>({"border-danger":n});function Ft(n,o){1&n&&(t.j41(0,"div",36)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function kt(n,o){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_azota_ads_position_"+s)," ")}}function Ot(n,o){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.SpI(" ",s," ")}}function Rt(n,o){1&n&&(t.j41(0,"div",36)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Et(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.changeSchoolLevel(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Dt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.changeSchoolLevel(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function zt(n,o){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.JRh(t.bMT(2,2,s))}}function Lt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.changeSchoolSubject(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function wt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.changeSchoolSubject(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function $t(n,o){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.JRh(t.bMT(2,2,s))}}function Mt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.changeProvince(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Gt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.changeProvince(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Nt(n,o){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s.id),t.R7$(),t.JRh(t.bMT(2,2,s.name))}}function xt(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",27)(4,"span",42),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",43),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",44)(10,"button",45),t.bIt("click",function(){const e=t.eBV(s).index,r=t.XpG();return t.Njj(r.removeFileForm(e))}),t.nrm(11,"lucide-icon",46),t.k0s()()(),t.j41(12,"div",47)(13,"div",9)(14,"div",48),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.nrm(17,"input",49),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"div",12)(20,"label",50),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",9),t.nrm(24,"textarea",51),t.nI1(25,"mytranslate"),t.k0s()()()()()}if(2&n){const s=o.$implicit;t.R7$(),t.Y8G("formGroup",s),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,lt,s.controls.displayName.errors&&s.controls.displayName.touched)),t.R7$(8),t.SpI(" ",t.bMT(16,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(18,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,lt,s.controls.variableName.errors&&s.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(22,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(25,19,"lang_azt_field_description")+"...")}}let Pt=(()=>{var n;class o extends rt{saveAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();this.initStatusObj();const a=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryCreateCategoryPost(a).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.successStatusObj("lang_cms_add_success",!0),this.handleDestroy()}))}convertFormToParam(){const{attributesList:a,name:e,showForVip:r,adsPosition:l,adsDisplayType:c,desc:m,schoolLevels:p,schoolSubjects:g,provinceIds:S}=this.form.controls,O=a.controls.map(_=>({displayName:_.controls.displayName.value,variableName:_.controls.variableName.value.toUpperCase(),description:_.controls.description.value}));let E=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(_=>p.value.includes(_?.key??"")).map(_=>_.id)),tt=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(_=>g.value.includes(_?.key??"")).map(_=>_.id)),et=E.map(_=>({filterType:"level",filterObjectId:_})),at=tt.map(_=>({filterType:"subject",filterObjectId:_})),nt=S.value.map(_=>({filterType:"province",filterObjectId:_})),T=et;return T=T.concat(at),T=T.concat(nt),{name:e.value,position:l.value,displayType:c.value,description:m.value,showForVip:r.value,attributes:O,filterOptions:T}}initData(){this.initStatusObj(),this.commonListService.apiCommonListProvincesGet().subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.allProvinceObjs=a.data?.objs??[],this.sAztCategoryAdsService.getSchoolLevelAndSubjects((e,r,l,c,m)=>{if(!m)return this.stopStatusObj();this.allSchoolLevelObjs=e,this.allSchoolSubjectObjs=r,this.allSchoolLevels=l,this.allSchoolSubjects=c,this.successStatusObj()})})}ngOnInit(){super.ngOnInit(),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/0",this.initData()}constructor(){super()}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["create-ads-category"]],standalone:!0,features:[t.Vt3,t.aNF],decls:107,vars:86,consts:[["searchInListPosition","searchInList"],["searchInListDisplayType","searchInList"],[3,"headerBackToLink"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","showForVip","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","showForVip",1,"flex","items-center","mr-auto"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3",3,"innerHTML"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],["class","link-color clickable",3,"click",4,"ngIf"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","items-center"],["for","name",1,"font-medium","mr-2"],[1,"link-color","clickable","flex","items-center",3,"click"],["name","plus","size","18",3,"ngClass"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"link-color","clickable",3,"click"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(a,e){if(1&a){const r=t.RV6();t.j41(0,"teacher-layout",2)(1,"div",3)(2,"h3",4),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",5)(6,"form",6)(7,"div",7)(8,"label",8),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"div",9),t.nrm(12,"input",10),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,Ft,4,3,"div",11),t.k0s(),t.j41(15,"div",12)(16,"div",13),t.nrm(17,"input",14),t.j41(18,"label",15),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()()(),t.j41(21,"div",12)(22,"label",8),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"mat-form-field",16)(26,"mat-select",17,0)(28,"mat-option"),t.nrm(29,"ngx-mat-select-search",18),t.nI1(30,"mytranslate"),t.nI1(31,"mytranslate"),t.k0s(),t.DNE(32,kt,3,4,"mat-option",19),t.k0s(),t.nrm(33,"div",20),t.nI1(34,"mytranslate"),t.k0s()(),t.j41(35,"div",12)(36,"label",8),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s(),t.j41(39,"mat-form-field",16)(40,"mat-select",17,1)(42,"mat-option"),t.nrm(43,"ngx-mat-select-search",18),t.nI1(44,"mytranslate"),t.nI1(45,"mytranslate"),t.k0s(),t.DNE(46,Ot,2,2,"mat-option",19),t.k0s()()(),t.j41(47,"div",12)(48,"label",21),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s(),t.j41(51,"div",9),t.nrm(52,"textarea",22),t.nI1(53,"mytranslate"),t.k0s(),t.DNE(54,Rt,4,3,"div",11),t.k0s(),t.j41(55,"div",12)(56,"label",23),t.EFF(57),t.nI1(58,"mytranslate"),t.k0s(),t.EFF(59," ( "),t.DNE(60,Et,3,3,"span",24)(61,Dt,3,3,"span",24),t.EFF(62," ) "),t.j41(63,"mat-form-field",25)(64,"mat-select",26),t.DNE(65,zt,3,4,"mat-option",19),t.k0s()()(),t.j41(66,"div",12)(67,"label",23),t.EFF(68),t.nI1(69,"mytranslate"),t.k0s(),t.EFF(70," ( "),t.DNE(71,Lt,3,3,"span",24)(72,wt,3,3,"span",24),t.EFF(73," ) "),t.j41(74,"mat-form-field",25)(75,"mat-select",26),t.DNE(76,$t,3,4,"mat-option",19),t.k0s()()(),t.j41(77,"div",12)(78,"label",23),t.EFF(79),t.nI1(80,"mytranslate"),t.k0s(),t.EFF(81," ( "),t.DNE(82,Mt,3,3,"span",24)(83,Gt,3,3,"span",24),t.EFF(84," ) "),t.j41(85,"mat-form-field",25)(86,"mat-select",26),t.DNE(87,Nt,3,4,"mat-option",19),t.k0s()()(),t.j41(88,"div",12)(89,"div",27)(90,"label",28),t.EFF(91),t.nI1(92,"mytranslate"),t.k0s(),t.j41(93,"span",29),t.bIt("click",function(){return t.eBV(r),t.Njj(e.addNewFieldForm())}),t.nrm(94,"lucide-icon",30),t.EFF(95),t.nI1(96,"mytranslate"),t.k0s()(),t.j41(97,"div",31),t.DNE(98,xt,26,25,"div",32),t.k0s()()()(),t.j41(99,"div",33)(100,"button",34),t.bIt("click",function(){return t.eBV(r),t.Njj(e.handleDestroy())}),t.EFF(101),t.nI1(102,"mytranslate"),t.k0s(),t.j41(103,"button",35),t.bIt("click",function(){return t.eBV(r),t.Njj(e.saveAdsCategory())}),t.j41(104,"span"),t.EFF(105),t.nI1(106,"mytranslate"),t.k0s()()()()()}if(2&a){const r=t.sdS(27),l=t.sdS(41);t.Y8G("headerBackToLink",e.backToLink),t.R7$(3),t.SpI(" ",t.bMT(4,45,"lang_azt_add_category")," "),t.R7$(3),t.Y8G("formGroup",e.form),t.R7$(3),t.JRh(t.bMT(10,47,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(13,49,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),t.R7$(3),t.Y8G("formControl",e.form.controls.showForVip),t.R7$(2),t.JRh(t.bMT(20,51,"lang_cms_admin_show_for_vip")),t.R7$(4),t.JRh(t.bMT(24,53,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",e.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(30,55,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(31,57,"lang_search_not_found")),t.Y8G("formControl",r.searchControl),t.R7$(3),t.Y8G("ngForOf",r.filter(e.listPositions,void 0)),t.R7$(),t.Y8G("innerHTML",t.bMT(34,59,"lang_azota_ads_position_image_"+e.form.controls.adsPosition.value.toString().replace("_MOBILE","").replace("_DESKTOP","")),t.npT),t.R7$(4),t.JRh(t.bMT(38,61,"lang_azt_category_ads_display_type")),t.R7$(3),t.Y8G("formControl",e.form.controls.adsDisplayType),t.R7$(3),t.FS9("placeholderLabel",t.bMT(44,63,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(45,65,"lang_search_not_found")),t.Y8G("formControl",l.searchControl),t.R7$(3),t.Y8G("ngForOf",l.filter(e.listDisplayTypes,void 0)),t.R7$(3),t.JRh(t.bMT(50,67,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(53,69,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",e.form.controls.desc.errors&&e.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(58,71,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("ngIf",!e.form.controls.schoolLevels.value.length),t.R7$(),t.Y8G("ngIf",e.form.controls.schoolLevels.value.length),t.R7$(3),t.Y8G("formControl",e.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",e.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(69,73,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("ngIf",!e.form.controls.schoolSubjects.value.length),t.R7$(),t.Y8G("ngIf",e.form.controls.schoolSubjects.value.length),t.R7$(3),t.Y8G("formControl",e.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",e.allSchoolSubjects),t.R7$(3),t.JRh(t.bMT(80,75,"lang_admin_ads_select_province")),t.R7$(3),t.Y8G("ngIf",!e.form.controls.provinceIds.value.length),t.R7$(),t.Y8G("ngIf",e.form.controls.provinceIds.value.length),t.R7$(3),t.Y8G("formControl",e.form.controls.provinceIds),t.R7$(),t.Y8G("ngForOf",e.allProvinceObjs),t.R7$(4),t.JRh(t.bMT(92,77,"lang_azt_information_field")),t.R7$(3),t.Y8G("ngClass",t.lJ4(85,At)),t.R7$(),t.SpI(" ",t.bMT(96,79,"lang_azt_add_information_field")," "),t.R7$(3),t.Y8G("ngForOf",e.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(102,81,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(106,83,"lang_button_save"))}},dependencies:[A.An,A.U9,N.x,D.Q,u.MD,u.YU,u.Sq,u.bT,i.X1,i.qT,i.me,i.Zm,i.BC,i.cb,i.l_,i.j4,i.JD,h.iI,i.YN,f.wp,y.s,P.wT,V.rl,U.VO,v.flO,v.WGl,C.L,I.Id,j.k,it.t],encapsulation:2}),o})();var Y=d(27468),L=d(25244);const ct=n=>({"border-danger":n});function Vt(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",5),2&n){const s=t.XpG();t.Y8G("currentStatusObj",s.statusObj)}}function Ut(n,o){1&n&&(t.j41(0,"div",38)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Yt(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_azota_ads_position_"+s)," ")}}function Bt(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.SpI(" ",s," ")}}function Xt(n,o){1&n&&(t.j41(0,"div",38)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Jt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.changeSchoolLevel(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Ht(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.changeSchoolLevel(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function Qt(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.JRh(t.bMT(2,2,s))}}function Wt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.changeSchoolSubject(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function Kt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.changeSchoolSubject(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function qt(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s),t.R7$(),t.JRh(t.bMT(2,2,s))}}function Zt(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.changeProvince(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_select_all")))}function te(n,o){if(1&n){const s=t.RV6();t.j41(0,"span",40),t.bIt("click",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.changeProvince(!1))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_remove_all")))}function ee(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s.id),t.R7$(),t.JRh(t.bMT(2,2,s.name))}}function ae(n,o){1&n&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_admin_ads_category_attributes_are_empty")))}function ne(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"span",45),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",46),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",47)(10,"button",48),t.bIt("click",function(){const e=t.eBV(s).index,r=t.XpG(2);return t.Njj(r.removeFileForm(e))}),t.j41(11,"span",49),t.nrm(12,"lucide-icon",50),t.k0s()()()(),t.j41(13,"div",51)(14,"div",12)(15,"div",52),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.nrm(18,"input",53),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"div",15)(21,"label",54),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"div",12),t.nrm(25,"textarea",55),t.nI1(26,"mytranslate"),t.k0s()()()()()}if(2&n){const s=o.$implicit;t.R7$(),t.Y8G("formGroup",s),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,ct,s.controls.displayName.errors&&s.controls.displayName.touched)),t.R7$(9),t.SpI(" ",t.bMT(17,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(19,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,ct,s.controls.variableName.errors&&s.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(23,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(26,19,"lang_azt_field_description")+"...")}}function se(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",6)(1,"h3",7),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",8)(5,"form",9)(6,"div",10)(7,"label",11),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",12),t.nrm(11,"input",13),t.nI1(12,"mytranslate"),t.k0s(),t.DNE(13,Ut,4,3,"div",14),t.k0s(),t.j41(14,"div",15)(15,"div",16),t.nrm(16,"input",17),t.j41(17,"label",18),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()()(),t.j41(20,"div",15)(21,"label",11),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"mat-form-field",19)(25,"mat-select",20,1)(27,"mat-option"),t.nrm(28,"ngx-mat-select-search",21),t.nI1(29,"mytranslate"),t.nI1(30,"mytranslate"),t.k0s(),t.DNE(31,Yt,3,4,"mat-option",22),t.k0s()(),t.nrm(32,"div",23),t.nI1(33,"mytranslate"),t.k0s(),t.j41(34,"div",15)(35,"label",11),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s(),t.j41(38,"mat-form-field",19)(39,"mat-select",20,2)(41,"mat-option"),t.nrm(42,"ngx-mat-select-search",21),t.nI1(43,"mytranslate"),t.nI1(44,"mytranslate"),t.k0s(),t.DNE(45,Bt,2,2,"mat-option",22),t.k0s()()(),t.j41(46,"div",15)(47,"label",24),t.EFF(48),t.nI1(49,"mytranslate"),t.k0s(),t.j41(50,"div",12),t.nrm(51,"textarea",25),t.nI1(52,"mytranslate"),t.k0s(),t.DNE(53,Xt,4,3,"div",14),t.k0s(),t.j41(54,"div",15)(55,"label",26),t.EFF(56),t.nI1(57,"mytranslate"),t.k0s(),t.EFF(58," ( "),t.DNE(59,Jt,3,3,"span",27)(60,Ht,3,3,"span",27),t.EFF(61," ) "),t.j41(62,"mat-form-field",28)(63,"mat-select",29),t.DNE(64,Qt,3,4,"mat-option",22),t.k0s()()(),t.j41(65,"div",15)(66,"label",26),t.EFF(67),t.nI1(68,"mytranslate"),t.k0s(),t.EFF(69," ( "),t.DNE(70,Wt,3,3,"span",27)(71,Kt,3,3,"span",27),t.EFF(72," ) "),t.j41(73,"mat-form-field",28)(74,"mat-select",29),t.DNE(75,qt,3,4,"mat-option",22),t.k0s()()(),t.j41(76,"div",15)(77,"label",26),t.EFF(78),t.nI1(79,"mytranslate"),t.k0s(),t.EFF(80," ( "),t.DNE(81,Zt,3,3,"span",27)(82,te,3,3,"span",27),t.EFF(83," ) "),t.j41(84,"mat-form-field",28)(85,"mat-select",29),t.DNE(86,ee,3,4,"mat-option",22),t.k0s()()(),t.j41(87,"div",15)(88,"div",30)(89,"label",31),t.EFF(90),t.nI1(91,"mytranslate"),t.k0s()(),t.DNE(92,ae,3,3,"div",32),t.j41(93,"div",33),t.DNE(94,ne,27,25,"div",34),t.k0s()()()(),t.j41(95,"div",35)(96,"button",36),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.handleDestroy())}),t.EFF(97),t.nI1(98,"mytranslate"),t.k0s(),t.j41(99,"button",37),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.updateAdsCategory())}),t.j41(100,"span"),t.EFF(101),t.nI1(102,"mytranslate"),t.k0s()()()()}if(2&n){const s=t.sdS(26),a=t.sdS(40),e=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,43,"lang_azt_update_category")," "),t.R7$(3),t.Y8G("formGroup",e.form),t.R7$(3),t.JRh(t.bMT(9,45,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(12,47,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),t.R7$(3),t.Y8G("formControl",e.form.controls.showForVip),t.R7$(2),t.JRh(t.bMT(19,49,"lang_cms_admin_show_for_vip")),t.R7$(4),t.JRh(t.bMT(23,51,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",e.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(29,53,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(30,55,"lang_search_not_found")),t.Y8G("formControl",s.searchControl),t.R7$(3),t.Y8G("ngForOf",s.filter(e.listPositions,void 0)),t.R7$(),t.Y8G("innerHTML",t.bMT(33,57,"lang_azota_ads_position_image_"+e.form.controls.adsPosition.value.toString().replace("_MOBILE","").replace("_DESKTOP","")),t.npT),t.R7$(4),t.JRh(t.bMT(37,59,"lang_azt_category_ads_display_type")),t.R7$(3),t.Y8G("formControl",e.form.controls.adsDisplayType),t.R7$(3),t.FS9("placeholderLabel",t.bMT(43,61,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(44,63,"lang_search_not_found")),t.Y8G("formControl",a.searchControl),t.R7$(3),t.Y8G("ngForOf",a.filter(e.listDisplayTypes,void 0)),t.R7$(3),t.JRh(t.bMT(49,65,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(52,67,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",e.form.controls.desc.errors&&e.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(57,69,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("ngIf",!e.form.controls.schoolLevels.value.length),t.R7$(),t.Y8G("ngIf",e.form.controls.schoolLevels.value.length),t.R7$(3),t.Y8G("formControl",e.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",e.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(68,71,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("ngIf",!e.form.controls.schoolSubjects.value.length),t.R7$(),t.Y8G("ngIf",e.form.controls.schoolSubjects.value.length),t.R7$(3),t.Y8G("formControl",e.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",e.allSchoolSubjects),t.R7$(3),t.JRh(t.bMT(79,73,"lang_admin_ads_select_province")),t.R7$(3),t.Y8G("ngIf",!e.form.controls.provinceIds.value.length),t.R7$(),t.Y8G("ngIf",e.form.controls.provinceIds.value.length),t.R7$(3),t.Y8G("formControl",e.form.controls.provinceIds),t.R7$(),t.Y8G("ngForOf",e.allProvinceObjs),t.R7$(4),t.JRh(t.bMT(91,75,"lang_azt_information_field")),t.R7$(2),t.Y8G("ngIf",!e.form.controls.attributesList.controls.length),t.R7$(2),t.Y8G("ngForOf",e.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(98,77,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(102,79,"lang_button_update"))}}let oe=(()=>{var n;class o extends rt{updateAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();const a=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryUpdateCategoryPut(a,this.categoryId).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.handleDestroy()}))}getData(){this.initStatusObj(),this.waitDestroy((0,Y.p)([this.categoryService.apiCategoryGetCategoryGet(this.categoryId),this.commonListService.apiCommonListProvincesGet()]).subscribe(([a,e])=>{if(!a.success)return this.errorStatusObj(a.message,!0);if(!e.success)return this.errorStatusObj(e.message,!0);this.allProvinceObjs=e.data?.objs??[];const r=a.data;this.form.controls.name.setValue(r?.name??""),this.form.controls.adsPosition.setValue(this.commonService.getEnumTypeWithDefault(b.rA,r?.position??"",b.rA.ALLPOSITION)),this.form.controls.adsDisplayType.setValue(this.commonService.getEnumTypeWithDefault(x,r?.displayType??"",x.BANNER)),this.form.controls.desc.setValue(r?.description??""),this.form.controls.showForVip.setValue(!!r?.showForVip),r?.attributes?.forEach(c=>{this.form.controls.attributesList.push(this.createFieldForm(c.displayName,c.variableName,c.description??"",c.id))});let l=(r?.filters??[]).filter(c=>"province"==c.filterType).map(c=>c.filterObjectId).filter(this.commonService.notEmpty);this.form.controls.provinceIds.setValue(l),this.sAztCategoryAdsService.getSchoolLevelAndSubjects((c,m,p,g,S)=>{if(!S)return this.stopStatusObj();this.allSchoolLevelObjs=c,this.allSchoolSubjectObjs=m,this.allSchoolLevels=p,this.allSchoolSubjects=g;const{selectedSchoolLevels:O,selectedSchoolSubjects:E}=this.sAztCategoryAdsService.getSelectedLevelAndSubjects(r?.filters??[],c,m);this.form.controls.schoolLevels.setValue(O),this.form.controls.schoolSubjects.setValue(E),this.successStatusObj()})}))}convertFormToParam(){const{attributesList:a,name:e,showForVip:r,adsPosition:l,adsDisplayType:c,desc:m,schoolLevels:p,schoolSubjects:g,provinceIds:S}=this.form.controls,O=a.controls.map(_=>({id:_.controls.id?.value??0,displayName:_.controls.displayName.value,variableName:_.controls.variableName.value.toUpperCase(),description:_.controls.description.value}));let E=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(_=>p.value.includes(_?.key??"")).map(_=>_.id)),tt=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(_=>g.value.includes(_?.key??"")).map(_=>_.id)),et=E.map(_=>({filterType:"level",filterObjectId:_})),at=tt.map(_=>({filterType:"subject",filterObjectId:_})),nt=S.value.map(_=>({filterType:"province",filterObjectId:_})),T=et;return T=T.concat(at),T=T.concat(nt),{name:e.value,position:l.value,displayType:c.value,description:m.value,showForVip:r.value,attributes:O,filterOptions:T}}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/"+this.categoryId,this.getData()}constructor(){super()}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["update-ads-category"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPosition","searchInList"],["searchInListDisplayType","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","showForVip","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","showForVip",1,"flex","items-center","mr-auto"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3",3,"innerHTML"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],["class","link-color clickable",3,"click",4,"ngIf"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"link-color","clickable",3,"click"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"w-4","h-4","inline-block"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(a,e){if(1&a&&(t.j41(0,"teacher-layout",3),t.DNE(1,Vt,1,1,"azt-loading-effect",4)(2,se,103,81,"ng-template",null,0,t.C5r),t.k0s()),2&a){const r=t.sdS(3);t.Y8G("headerBackToLink",e.backToLink),t.R7$(),t.Y8G("ngIf",1==e.statusObj.loading)("ngIfElse",r)}},dependencies:[A.An,A.U9,N.x,D.Q,L.K,u.MD,u.YU,u.Sq,u.bT,i.X1,i.qT,i.me,i.Zm,i.BC,i.cb,i.l_,i.j4,i.JD,h.iI,i.YN,f.wp,y.s,P.wT,V.rl,U.VO,v.flO,v.WGl,C.L,I.Id,j.k,it.t],encapsulation:2}),o})();var dt=d(88141),B=d(45312),X=d(71985),H=d(5964);class J{}class re extends J{listenEvent(){return new X.c(o=>{this.router.events.pipe((0,H.p)(s=>s instanceof h.Z)).subscribe(s=>{if(s instanceof h.Z){let a=this.commonService.getCurrentDomain()+s.url,e=this.commonService.getFullCurrentUrl();if(e!=a)this.sAztAzotaTrackingDefaultData.setReferenceUrlObj({currentUrl:a,referenceUrl:e});else{let r=document.referrer?document.referrer:void 0;r=r!=a?r:void 0,r&&this.sAztAzotaTrackingDefaultData.setReferenceUrlObj({currentUrl:a,referenceUrl:r})}}})})}constructor(o,s,a){super(),this.router=o,this.commonService=s,this.sAztAzotaTrackingDefaultData=a,this.previousUrl=void 0}}var Q=d(33726);class ie extends J{listenEvent(){return new X.c(o=>{this.router.events.pipe((0,H.p)(s=>s instanceof h.Z)).subscribe(s=>{if(s instanceof h.Z&&this.commonService.getCurrentDomain()+s.url!=this.commonService.getFullCurrentUrl()){let r=this.sAztAzotaTrackingDefaultData.getDefaultEventData(this.eventName,[]);this.sAztAzotaTrackingDefaultData.resetEngagementMillisecond(),this.eventName!=this.sAztAzotaTrackingDefaultData.lastEventName&&r.eventInfoObj.engagementTimeMsec>=1e3&&o.next(r)}}),(0,Q.R)(window,"beforeunload").subscribe(s=>{let a=this.sAztAzotaTrackingDefaultData.getDefaultEventData(this.eventName,[]);this.sAztAzotaTrackingDefaultData.resetEngagementMillisecond(),this.eventName!=this.sAztAzotaTrackingDefaultData.lastEventName&&o.next(a)}),(0,Q.R)(document,"visibilitychange").subscribe(s=>{if("hidden"==document.visibilityState){let a=this.sAztAzotaTrackingDefaultData.getDefaultEventData(this.eventName,[]);this.sAztAzotaTrackingDefaultData.resetEngagementMillisecond(),this.eventName!=this.sAztAzotaTrackingDefaultData.lastEventName&&a.eventInfoObj.engagementTimeMsec>=1e3&&o.next(a)}else this.sAztAzotaTrackingDefaultData.resetEngagementMillisecond()})})}constructor(o,s,a){super(),this.router=o,this.commonService=s,this.sAztAzotaTrackingDefaultData=a,this.eventName="user_engagement"}}class le extends J{listenEvent(){return new X.c(o=>{(0,Q.R)(window,"scroll").subscribe(s=>{if(this.getVerticalScrollPercentage(document.body)>=90){let e=this.commonService.getFullCurrentUrl();if(this.firedUrl!=e){let r=this.sAztAzotaTrackingDefaultData.getDefaultEventData("scroll_to_90_percent",[]);r.eventInfoObj.engagementTimeMsec>=5e3&&(this.firedUrl=e,o.next(r))}}})})}getVerticalScrollPercentage(o){var s=o.parentElement;return null==s?0:Math.round((o.scrollTop||s.scrollTop)/(s.scrollHeight-s.clientHeight)*100)}constructor(o,s){super(),this.commonService=o,this.sAztAzotaTrackingDefaultData=s,this.firedUrl=void 0}}var ce=d(70152);class de extends J{listenEvent(){return new X.c(o=>{this.router.events.pipe((0,H.p)(s=>s instanceof h.wF),(0,ce.B)(200)).subscribe(s=>{let a=this.sAztAzotaTrackingDefaultData.getDefaultEventData("page_view",[]);o.next(a)})})}constructor(o,s,a){super(),this.router=o,this.commonService=s,this.sAztAzotaTrackingDefaultData=a}}var me=d(89311),ue=d(38344),W=d(65758),pe=d(32909),_e=d(95629);let he=(()=>{var n;class o{saveTrackingVisitorToLocalStorage(){this.browserStorageService.saveStorage(this.storageKeyOfTrackingVisitor,this.commonService.serializeJson(this.trackingVisitorObj))}saveTrackingInfoToLocalStorage(){this.browserStorageService.saveStorage(this.storageKeyOfTrackingInfo,this.commonService.serializeJson(this.trackingInfoObj))}setReferenceUrlObj(a){this.referenceUrlObj=a,this.browserStorageService.saveSessionStorage(this.sessionKeyOfReferenceUrl,this.commonService.serializeJson(this.referenceUrlObj))}getReferenceUrl(){return this.commonService.myParseJson(this.browserStorageService.getSessionStorage(this.sessionKeyOfReferenceUrl)??"")?.referenceUrl}resetEngagementMillisecond(){this.startTimeOfEngagementMillisecond=this.sAztTimeService.getCurrentMillisecond()}getDefaultEventData(a,e){let r=this.commonService.getFullCurrentUrl(),l=this.referenceUrlObj?.currentUrl==r?this.referenceUrlObj.referenceUrl:void 0,c=this.sAztTimeService.getCurrentMillisecond()-this.startTimeOfEngagementMillisecond,m={uuid:this.sAztUuidService.getUuid(),name:a,url:this.commonService.getPathUrlWithoutDomain(r),urlTitle:document.title,pageUrlRef:l?this.commonService.getPathUrlWithoutDomain(l):void 0,deviceScreen:window.screen.width+"x"+window.screen.height,language:navigator.language,timeZoneOffset:(new Date).getTimezoneOffset(),userUuid:this.userService.getUserObj().id?this.userService.getUserObj().id.toString():void 0,engagementTimeMsec:c,utmId:this.commonService.getMyQueryParam("utm_id"),utmSource:this.commonService.getMyQueryParam("utm_source"),utmMedium:this.commonService.getMyQueryParam("utm_medium"),utmCampaignName:this.commonService.getMyQueryParam("utm_campaign"),utmTerm:this.commonService.getMyQueryParam("utm_term"),utmContent:this.commonService.getMyQueryParam("utm_content"),eventParamObjs:e};return{appUuid:B.c.azotaTrackingAppId,sessionUuid:this.trackingVisitorObj.sessionUuid,visitorUuid:this.trackingVisitorObj.visitorUuid,eventInfoObj:m}}sendEventDataToApi(a){this.lastEventName=a.eventInfoObj.name,this.trackingInfoObj.lastEventFiredAtSecond=this.sAztTimeService.getCurrentSecond(),this.saveTrackingInfoToLocalStorage(),this.eventDataQueue.push(a),this.runQueueApis()}runQueueApis(){if(this.eventDataQueue.length>0&&!this.isRunningQueue){this.isRunningQueue=!0;const a=this.eventDataQueue.shift();let e=B.c.azotaExceptTrackingUrlsForNewTracking.find(r=>a?.eventInfoObj.url.toLowerCase().trim().includes(r.toLowerCase().trim()));if(a?.eventInfoObj.name.toUpperCase().startsWith("MUST_".toUpperCase())&&(e=void 0),null!=e)return this.isRunningQueue=!1,void this.runQueueApis();this.frontAppFiredEventService.apiFrontAppFiredEventCollectPost(a,"useBeacon").subscribe(r=>{this.isRunningQueue=!1,this.runQueueApis()})}}initData(){this.resetEngagementMillisecond();let a=this.commonService.myParseJson(this.browserStorageService.getSessionStorage(this.sessionKeyOfReferenceUrl)??"");a&&(this.referenceUrlObj=a);let e=this.commonService.myParseJson(this.browserStorageService.getStorage(this.storageKeyOfTrackingVisitor)??"");e&&(this.trackingVisitorObj=e);let r=this.commonService.myParseJson(this.browserStorageService.getStorage(this.storageKeyOfTrackingInfo)??"");if(r&&(this.trackingInfoObj=r),this.trackingInfoObj||(this.trackingInfoObj={lastEventFiredAtSecond:0}),this.trackingVisitorObj){if(this.sAztTimeService.getCurrentSecond()-this.trackingInfoObj.lastEventFiredAtSecond>1800){this.trackingVisitorObj.sessionUuid=this.sAztUuidService.getUuid();let c=this.getDefaultEventData("start_session",[]);this.sendEventDataToApi(c)}}else{this.trackingVisitorObj={visitorUuid:this.sAztUuidService.getUuid(),sessionUuid:this.sAztUuidService.getUuid()};let l=this.getDefaultEventData("first_visit",[]);this.sendEventDataToApi(l);let c=this.getDefaultEventData("start_session",[]);this.sendEventDataToApi(c)}this.saveTrackingVisitorToLocalStorage()}constructor(a,e,r,l,c,m){this.commonService=a,this.browserStorageService=e,this.sAztUuidService=r,this.userService=l,this.sAztTimeService=c,this.frontAppFiredEventService=m,this.lastEventName=void 0,this.storageKeyOfTrackingVisitor="azt_tracking_visitor",this.storageKeyOfTrackingInfo="azt_tracking_info",this.sessionKeyOfReferenceUrl="azt_tracking_reference",this.isRunningQueue=!1,this.eventDataQueue=[]}}return(n=o).\u0275fac=function(a){return new(a||n)(t.KVO(w.R),t.KVO(me.z),t.KVO(ue.D),t.KVO(W.R),t.KVO(pe.F),t.KVO(_e.wU))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),o})(),ge=(()=>{var n;class o{initData(){this.sAztAzotaTrackingEventData.initData();let a=[];a.push(new re(this.router,this.commonService,this.sAztAzotaTrackingEventData)),a.push(new de(this.router,this.commonService,this.sAztAzotaTrackingEventData)),a.push(new le(this.commonService,this.sAztAzotaTrackingEventData)),a.push(new ie(this.router,this.commonService,this.sAztAzotaTrackingEventData)),a.forEach(e=>{e.listenEvent().subscribe(r=>{this.sAztAzotaTrackingEventData.sendEventDataToApi(r)})})}sendCustomEvent(a,e){let r=this.sAztAzotaTrackingEventData.getDefaultEventData(a,e);this.sAztAzotaTrackingEventData.sendEventDataToApi(r)}sendForceCustomEvent(a,e){let r=this.sAztAzotaTrackingEventData.getDefaultEventData("MUST_"+a,e);this.sAztAzotaTrackingEventData.sendEventDataToApi(r)}getVisitorUuid(){return this.sAztAzotaTrackingEventData.getDefaultEventData("DEFAULT_DATA",[]).visitorUuid}constructor(a,e,r){this.router=a,this.commonService=e,this.sAztAzotaTrackingEventData=r}}return(n=o).\u0275fac=function(a){return new(a||n)(t.KVO(h.Ix),t.KVO(w.R),t.KVO(he))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),o})(),fe=(()=>{var n;class o{wrapLinks(){this.el.nativeElement.querySelectorAll("a").forEach(e=>{if(e.href.startsWith(B.c.ads_tracking_api_url))return;let r=this.sAztAzotaTrackingService.getVisitorUuid(),l=this.commonService.getFullCurrentUrl(),m=B.c.ads_tracking_api_url+"/api/v10/FrontProduct/HitProduct?productId=[PRODUCT_ID]&targetUrl=[TARGET_URL]&sessionId="+encodeURIComponent(r)+"&currentUrl="+encodeURIComponent(l);m=m.replace("[PRODUCT_ID]",this.adsProductId.toString()),m=m.replace("[TARGET_URL]",encodeURIComponent(e.href)),this.renderer.setAttribute(e,"href",m)})}observeChildChanges(){this.observer=new MutationObserver(()=>{this.wrapLinks()}),this.observer.observe(this.el.nativeElement,{childList:!0,subtree:!0})}constructor(a,e){this.el=a,this.renderer=e,this.sAztAzotaTrackingService=(0,t.WQX)(ge),this.commonService=(0,t.WQX)(w.R),this.observeChildChanges()}ngOnDestroy(){this.observer&&this.observer.disconnect()}}return(n=o).\u0275fac=function(a){return new(a||n)(t.rXU(t.aKT),t.rXU(t.sFG))},n.\u0275dir=t.FsC({type:n,selectors:[["","appReplaceLinksForAdsProductId",""]],inputs:{adsProductId:"adsProductId"},standalone:!0}),o})();var ut=d(49075),pt=d(57399),_t=d(30867),be=d(14585);const ve=(n,o)=>({startLive:n,productStatus:o}),ye=n=>({"w-full":n}),Ce=(n,o)=>({"px-4 w-3/4":n,"w-full":o}),Ie=n=>[n];function je(n,o){if(1&n&&(t.j41(0,"span",19),t.EFF(1),t.k0s()),2&n){const s=t.XpG();t.R7$(),t.SpI(" ",s.formatHour(s.liveClassData.startLive)," ")}}function Se(n,o){if(1&n&&(t.j41(0,"div",20)(1,"span",21),t.EFF(2),t.nI1(3,"formatFullDateTimeTimezoneWithoutSecondByUserUnitPipe"),t.k0s(),t.nrm(4,"span",22),t.nI1(5,"safeNormalHtmlContent"),t.k0s()),2&n){const s=t.XpG(),a=t.r8f(0);t.R7$(2),t.JRh(t.bMT(3,2,s.liveClassData.startLive)),t.R7$(2),t.Y8G("innerHTML",t.bMT(5,4,a.statusText),t.npT)}}let Te=(()=>{var n;class o extends F.H{constructor(){super(...arguments),this.allProductStatusEnum=ut.WD}formatHour(a){let e=new Date(a??"");return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}ngOnInit(){}}return(n=o).\u0275fac=(()=>{let s;return function(e){return(s||(s=t.xGo(n)))(e||n)}})(),n.\u0275cmp=t.VBU({type:n,selectors:[["app-box-view-live-classroom"]],inputs:{liveClassData:"liveClassData"},standalone:!0,features:[t.Vt3,t.aNF],decls:42,vars:62,consts:[[1,"flex","item-center","flex-wrap"],[1,"m-2","bg-slate-100",3,"ngClass"],[1,"w-auto","relative","text-center",2,"height","180px"],["class","whitespace-nowrap px-2 py-2 rounded-full bg-white font-bold text-md inline-block absolute midle-X-absolute","style","align-content: center; border: 1px solid red; min-width: 25px; top: 20px",4,"ngIf"],["alt","",1,"img-fluid",2,"height","160px",3,"src"],[1,"absolute","midle-X-absolute",2,"bottom","42px"],[3,"nameCreateAvatar","size","showTooltip","linkAvatar"],[1,"whitespace-nowrap","px-2","py-2","rounded-full","bg-white","font-bold","text-md","inline-block","absolute","midle-X-absolute","border","border-slate-300",2,"align-content","center","min-width","25px","bottom","0px"],[1,"text-left","py-2",2,"align-content","center",3,"ngClass"],[1,"d-block"],[1,"mb-1","h5","text-md","font-bold",2,"font-size","16px"],[1,"h5","text-md"],[1,"link__color"],[1,"h5","text-sm"],[1,"flex","mb-1"],[1,"text-xs"],[1,"ml-5","text-xs"],["class","flex mb-2",4,"ngIf"],[1,"btn","btn-primary","w-64","text-white",3,"routerLink"],[1,"whitespace-nowrap","px-2","py-2","rounded-full","bg-white","font-bold","text-md","inline-block","absolute","midle-X-absolute",2,"align-content","center","border","1px solid red","min-width","25px","top","20px"],[1,"flex","mb-2"],[1,"font-bold",2,"font-size","14px"],[3,"innerHTML"]],template:function(a,e){if(1&a&&(t.SS7(0),t.nI1(1,"calculationTimeUntil"),t.j41(2,"div",0)(3,"div",1)(4,"div",2),t.DNE(5,je,2,1,"span",3),t.nrm(6,"img",4),t.nI1(7,"coreModConvertCdnLinkOfGitHub"),t.j41(8,"div",5),t.nrm(9,"azt-create-avatar",6),t.k0s(),t.j41(10,"span",7),t.EFF(11),t.nI1(12,"getSubjectNameById"),t.nI1(13,"async"),t.k0s()()(),t.j41(14,"div",8)(15,"div",9)(16,"p",10),t.EFF(17),t.nI1(18,"mytranslate"),t.nI1(19,"getLevelNameById"),t.nI1(20,"async"),t.k0s(),t.j41(21,"p",11),t.EFF(22),t.nI1(23,"mytranslate"),t.j41(24,"span",12),t.EFF(25),t.k0s()(),t.j41(26,"p",13),t.EFF(27),t.k0s(),t.j41(28,"div",14)(29,"p",15),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s(),t.j41(32,"p",16),t.EFF(33),t.nI1(34,"mytranslate"),t.k0s()(),t.DNE(35,Se,6,6,"div",17),t.j41(36,"a",18),t.nI1(37,"navigationLocalize"),t.EFF(38),t.nI1(39,"mytranslate"),t.nI1(40,"formatMoney"),t.nI1(41,"mytranslate"),t.k0s()()()()),2&a){let r,l;const c=t.bH3(t.bMT(1,23,t.l_i(52,ve,e.liveClassData.startLive,e.liveClassData.productStatusEnum)));t.R7$(3),t.Y8G("ngClass",t.eq3(55,ye,e.isMobileDevice)),t.R7$(2),t.Y8G("ngIf",c.productStatus!=e.allProductStatusEnum.RUNNING),t.R7$(),t.Y8G("src",t.bMT(7,26,"images/bg-live-classroom-running.png"),t.B4B),t.R7$(3),t.Y8G("nameCreateAvatar",null==e.liveClassData.creatorInfoObj?null:e.liveClassData.creatorInfoObj.fullName)("size",56)("showTooltip",e.isMobileDevice)("linkAvatar",null==e.liveClassData.creatorInfoObj?null:e.liveClassData.creatorInfoObj.avatar),t.R7$(2),t.SpI(" ",t.bMT(13,30,t.bMT(12,28,null==e.liveClassData.liveClassProductObj||null==e.liveClassData.liveClassProductObj.metadata||null==e.liveClassData.liveClassProductObj.metadata.data?null:e.liveClassData.liveClassProductObj.metadata.data.subjectId))," "),t.R7$(3),t.Y8G("ngClass",t.l_i(57,Ce,!e.isMobileDevice,e.isMobileDevice)),t.R7$(3),t.E5c("",t.bMT(18,32,"lang_live_class_topic"),":\xa0",e.liveClassData.name," (",t.bMT(20,36,t.bMT(19,34,null==e.liveClassData.liveClassProductObj||null==e.liveClassData.liveClassProductObj.metadata||null==e.liveClassData.liveClassProductObj.metadata.data?null:e.liveClassData.liveClassProductObj.metadata.data.classId)),")"),t.R7$(5),t.SpI(" ",t.bMT(23,38,"lang_auto_giao_vien"),":\xa0 "),t.R7$(3),t.JRh(null==e.liveClassData.creatorInfoObj?null:e.liveClassData.creatorInfoObj.fullName),t.R7$(2),t.JRh(null==e.liveClassData.creatorInfoObj?null:e.liveClassData.creatorInfoObj.vendorSchoolName),t.R7$(3),t.Lme("",t.bMT(31,40,"lang_auto_da_xem"),":\xa0",null!==(r=null==e.liveClassData.paymentInfoObj?null:e.liveClassData.paymentInfoObj.totalView)&&void 0!==r?r:0,""),t.R7$(3),t.Lme("",t.bMT(34,42,"lang_live_class_registered"),":\xa0",null!==(l=null==e.liveClassData.paymentInfoObj?null:e.liveClassData.paymentInfoObj.totalJoin)&&void 0!==l?l:0,""),t.R7$(2),t.Y8G("ngIf",c.productStatus!=e.allProductStatusEnum.RUNNING),t.R7$(),t.Y8G("routerLink",t.eq3(60,Ie,t.bMT(37,44,"/student/view-product/"+e.liveClassData.id))),t.R7$(2),t.Lme(" ",t.bMT(39,46,c.productStatus==e.allProductStatusEnum.RUNNING?"lang_live_class_join_now":"lang_live_class_register_now"),"\xa0 (",e.liveClassData.price>0?t.bMT(40,48,e.liveClassData.price)+"\u0111":t.bMT(41,50,"lang_config_free"),") ")}},dependencies:[f.xc,f.iA,f.t0,f.hd,f.i_,f._y,be.p,f.F2,u.MD,u.YU,u.bT,u.Jj,i.X1,h.iI,h.Wk,i.YN,f.wp,f.Vs,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();const Ae=n=>({"mt-3":n});function Fe(n,o){if(1&n&&(t.qex(0),t.nrm(1,"app-box-view-live-classroom",1),t.bVm()),2&n){const s=o.$implicit,a=o.index;t.R7$(),t.Y8G("ngClass",t.eq3(2,Ae,a>0))("liveClassData",s)}}let ke=(()=>{var n;class o extends F.H{constructor(){super(...arguments),this.schoolLevelId=0,this.schoolSubjectId=0,this.items=50,this.onHasData=new t.bkB,this.totalSuggestionItems=100,this.customerProductManagementService=(0,t.WQX)(_t.AC),this.allObjs=[],this.AIRecommendationService=(0,t.WQX)(pt.h8),this.sAztUserService=(0,t.WQX)(W.R),this.viewObjs=[]}filterData(){let a=this.allObjs;this.schoolLevelId&&(a=a.filter(e=>e.liveClassProductObj?.metadata?.data.classId==this.schoolLevelId)),this.schoolLevelId&&(a=a.filter(e=>e.liveClassProductObj?.metadata?.data.subjectId==this.schoolLevelId)),this.viewObjs=a.slice(0,this.items),this.viewObjs.length>0&&this.onHasData.emit()}initData(){this.initStatusObj();let a={userId:this.sAztUserService.getUserObj().id,numberOfProduct:this.totalSuggestionItems,type:ut.i_.LIVECLASS.toString(),tags:[]};this.waitDestroy(this.wrapApiResponse(this.AIRecommendationService.aiApiV1RecommendationGetRecommendedProductsV2Post(a)).subscribe(e=>{let r=e.data??[];if(r.length<=0)return this.successStatusObj();let l=this.customerProductManagementService.apiCustomerProductManagementGetObjsByIdsPost(r);this.waitDestroy(l.subscribe(c=>{if(!c.success)return this.errorStatusObj(c.message,!0);this.allObjs=c.data?.objs??[],this.filterData(),this.stopStatusObj()}))}))}ngOnInit(){this.initData()}}return(n=o).\u0275fac=(()=>{let s;return function(e){return(s||(s=t.xGo(n)))(e||n)}})(),n.\u0275cmp=t.VBU({type:n,selectors:[["app-list-live-class-for-ads"]],inputs:{schoolLevelId:"schoolLevelId",schoolSubjectId:"schoolSubjectId",items:"items"},outputs:{onHasData:"onHasData"},standalone:!0,features:[t.Vt3,t.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"block",3,"ngClass","liveClassData"]],template:function(a,e){1&a&&t.DNE(0,Fe,2,4,"ng-container",0),2&a&&t.Y8G("ngForOf",e.viewObjs)},dependencies:[Te,u.MD,u.YU,u.Sq,i.X1,h.iI,i.YN,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})(),Oe=(()=>{var n;class o{constructor(){this.commonService=(0,t.WQX)(w.R)}replaceAdsContent(a){if(!a.template||!a.productAttributes)return a;let e=a.productAttributes;return e.push({id:0,productId:0,attributeId:0,value:a.name,attribute:{id:0,categoryId:0,displayName:"NAME",variableName:"NAME"}}),e.push({id:0,productId:0,attributeId:0,value:a.description??"",attribute:{id:0,categoryId:0,displayName:"DESCRIPTION",variableName:"DESCRIPTION"}}),e.forEach(r=>{r.attribute?.variableName&&(a.template=this.commonService.replaceAll(a.template,"${"+r.attribute.variableName.toUpperCase()+"}",r.value))}),a}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),o})();const R={LANDING:"LANDING",AD_VIEW:"AD_VIEW",AD_VIEW_POPUP:"AD_VIEW_POPUP"};let Re=(()=>{var n;class o extends F.H{parserData(){let a=JSON.parse(this.product.metadata??"{}");if(this.viewType==R.LANDING)if(this.product.privateInfo){let e=JSON.parse(this.product.privateInfo);this.html=e.landingHtml}else this.html=this.product.landingHtml??"";else this.viewType==R.AD_VIEW?this.html=a.adView??"":this.viewType==R.AD_VIEW_POPUP&&(this.html=a.adViewPopup??a.adView??"");this.html=this.commonService.replaceAll(this.html,"${AZT_PRODUCT_ID}",this.product.id+"")??""}setupBuyButton(){document.querySelectorAll(".azt-product-item-"+this.product.id+" .bs-azt-buy").forEach(e=>{e.addEventListener("click",()=>{this.product&&this.onBuy.emit(this.product)})})}ngAfterViewInit(){setTimeout(()=>this.setupBuyButton(),500)}ngOnInit(){this.parserData()}constructor(){super(),this.viewType=R.AD_VIEW,this.onBuy=new t.bkB,this.html=""}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-student-product-content"]],inputs:{viewType:"viewType",product:"product"},outputs:{onBuy:"onBuy"},standalone:!0,features:[t.Vt3,t.aNF],decls:3,vars:8,consts:[[3,"innerHTML"]],template:function(a,e){1&a&&(t.nrm(0,"div",0),t.nI1(1,"mycdn"),t.nI1(2,"safeNormalHtmlContent")),2&a&&(t.ZvI("azt-product-item-",e.product.id,""),t.Y8G("innerHTML",t.bMT(2,6,t.bMT(1,4,e.html)),t.npT))},dependencies:[f._y,u.MD,i.X1,h.iI,i.YN,f.nf,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();function Ee(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",3),2&n){const s=t.XpG();t.Y8G("currentStatusObj",s.statusObj)}}function De(n,o){if(1&n){const s=t.RV6();t.j41(0,"div")(1,"app-student-product-content",6),t.bIt("onBuy",function(e){t.eBV(s);const r=t.XpG(3);return t.Njj(r.buyProduct(e))}),t.k0s()()}if(2&n){const s=o.$implicit,a=t.XpG(3);t.ZvI("",a.productViewType==a.allProductViewType.AD_VIEW_POPUP?"":"box"," p-3 mb-3"),t.R7$(),t.Y8G("viewType",a.productViewType)("product",s)}}function ze(n,o){if(1&n&&(t.qex(0),t.DNE(1,De,2,5,"div",5),t.bVm()),2&n){const s=t.XpG(2);t.R7$(),t.Y8G("ngForOf",s.objs)}}function Le(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",9)(1,"div")(2,"app-student-product-content",6),t.bIt("onBuy",function(e){t.eBV(s);const r=t.XpG(3);return t.Njj(r.buyProduct(e))}),t.k0s()()()}if(2&n){const s=o.$implicit,a=t.XpG(3);t.R7$(),t.ZvI("",a.productViewType==a.allProductViewType.AD_VIEW_POPUP?"":"box"," p-3 mb-3"),t.R7$(),t.Y8G("viewType",a.productViewType)("product",s)}}function we(n,o){if(1&n&&(t.qex(0),t.j41(1,"div",7),t.DNE(2,Le,3,5,"div",8),t.k0s(),t.bVm()),2&n){const s=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",s.objs)}}function $e(n,o){1&n&&(t.j41(0,"div"),t.EFF(1,"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"),t.k0s())}function Me(n,o){if(1&n&&t.DNE(0,ze,2,1,"ng-container",4)(1,we,3,1,"ng-container",4)(2,$e,2,0,"div",4),2&n){const s=t.XpG();t.Y8G("ngIf","list"==s.listViewType),t.R7$(),t.Y8G("ngIf","grid"==s.listViewType),t.R7$(),t.Y8G("ngIf",0==s.objs.length&&s.showEmpty)}}let Ge=(()=>{var n;class o extends F.H{buyProduct(a){this.onBuy.emit(a)}getData(){if(this.showAllClassroom){let e=this.customerProductManagementService.apiCustomerProductManagementGetAllObjsGet();return void this.waitDestroy(e.subscribe(r=>{if(!r.success)return this.errorStatusObj(r.message,!0);this.objs=r.data?.objs??[],this.objs.length>0&&this.onHasData.emit(),this.successStatusObj()}))}if(0==this.ids.length){let e={userId:this.sAztUserService.getUserObj().id,numberOfProduct:this.numItems,type:this.productType,tags:[]};return void this.getExamLevelId(r=>{r&&e.tags.push("lop_"+r),this.waitDestroy(this.wrapApiResponse(this.AIRecommendationService.aiApiV1RecommendationGetRecommendedProductsV2Post(e)).subscribe(l=>{let c=l.data??[];if(c.length<=0)return this.successStatusObj();let m=this.customerProductManagementService.apiCustomerProductManagementGetObjsByIdsPost(c);this.waitDestroy(m.subscribe(p=>{if(!p.success)return this.errorStatusObj(p.message,!0);this.objs=p.data?.objs??[],this.objs.length>0&&this.onHasData.emit(),this.successStatusObj()}))}))})}let a=this.customerProductManagementService.apiCustomerProductManagementGetObjGet(+this.ids[0]);this.waitDestroy(a.subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.objs=e.data?.obj?[e.data?.obj]:[],this.successStatusObj()}))}getExamLevelId(a){let e=this.checkVipAccountService.getExamHashIdByCurrentUrl(this.commonService.getCurrentRouterUrl());if(!e)return a(void 0);this.frontProductService.apiFrontProductGetSchoolLevelSubjectOfExamGet(e).subscribe(r=>{if(!r.success)return a(void 0);a(r.data?.schoolLevelId)})}constructor(){super(),this.numItems=5,this.ids=[],this.showEmpty=!1,this.onHasData=new t.bkB,this.onBuy=new t.bkB,this.customerProductManagementService=(0,t.WQX)(_t.AC),this.AIRecommendationService=(0,t.WQX)(pt.h8),this.sAztUserService=(0,t.WQX)(W.R),this.frontProductService=(0,t.WQX)(b.Mm),this.objs=[],this.allProductViewType=R}ngOnInit(){this.getData()}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-student-list-product"]],inputs:{productType:"productType",numItems:"numItems",ids:"ids",showAllClassroom:"showAllClassroom",productViewType:"productViewType",listViewType:"listViewType",showEmpty:"showEmpty"},outputs:{onHasData:"onHasData",onBuy:"onBuy"},standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:2,consts:[["doneLoading",""],[1,"list-products"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[3,"onBuy","viewType","product"],[1,"grid","grid-cols-12","gap-6"],["class","col-span-12 sm:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-4"]],template:function(a,e){if(1&a&&(t.j41(0,"div",1),t.DNE(1,Ee,1,1,"azt-loading-effect",2)(2,Me,3,3,"ng-template",null,0,t.C5r),t.k0s()),2&a){const r=t.sdS(3);t.R7$(),t.Y8G("ngIf",e.statusObj.loading)("ngIfElse",r)}},dependencies:[L.K,Re,u.MD,u.Sq,u.bT,i.X1,h.iI,i.YN,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();const Ne=()=>[];function xe(n,o){if(1&n&&(t.qex(0),t.nrm(1,"div",1),t.nI1(2,"safeNormalHtmlContent"),t.bVm()),2&n){let s;const a=t.XpG();t.R7$(),t.Y8G("innerHTML",t.bMT(2,2,null!==(s=a.obj.template)&&void 0!==s?s:""),t.npT)("adsProductId",a.obj.id)}}function Pe(n,o){if(1&n&&(t.qex(0),t.nrm(1,"div",1),t.nI1(2,"safeNormalHtmlContent"),t.bVm()),2&n){let s;const a=t.XpG();t.R7$(),t.Y8G("innerHTML",t.bMT(2,2,null!==(s=a.obj.template)&&void 0!==s?s:""),t.npT)("adsProductId",a.obj.id)}}function Ve(n,o){if(1&n){const s=t.RV6();t.j41(0,"div")(1,"app-student-list-product",3),t.bIt("onHasData",function(){t.eBV(s);const e=t.XpG(2);return t.Njj(e.hasProductEvent())}),t.k0s()()}if(2&n){let s,a;const e=t.XpG(2);t.HbH(e.productInfo.className),t.BMQ("style",e.productInfo.style,t.$dS),t.R7$(),t.Y8G("productType",e.productInfo.type)("numItems",null!==(s=e.productInfo.num)&&void 0!==s?s:5)("ids",null!==(a=e.productInfo.ids)&&void 0!==a?a:t.lJ4(10,Ne))("listViewType","list")("productViewType",e.productInfo.viewType)("adsProductId",e.obj.id)}}function Ue(n,o){if(1&n&&(t.qex(0),t.DNE(1,Ve,2,11,"div",2),t.bVm()),2&n){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.productInfo)}}function Ye(n,o){if(1&n){const s=t.RV6();t.qex(0),t.j41(1,"div")(2,"app-list-live-class-for-ads",4),t.bIt("onHasData",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.hasProductEvent())}),t.k0s()(),t.bVm()}if(2&n){const s=t.XpG();t.R7$(),t.HbH(s.listLiveClassInfo.className),t.BMQ("style",s.listLiveClassInfo.style,t.$dS),t.R7$(),t.Y8G("schoolLevelId",s.listLiveClassInfo.schoolLevelId)("schoolSubjectId",s.listLiveClassInfo.schoolSubjectId)("items",s.listLiveClassInfo.items)("adsProductId",s.obj.id)}}function Be(n,o){1&n&&t.eu8(0)}function Xe(n,o){if(1&n&&(t.j41(0,"div")(1,"a",5),t.nrm(2,"img",6),t.k0s()()),2&n){const s=t.XpG(2);t.HbH(s.imgBannerInfo.className),t.BMQ("style",s.imgBannerInfo.style,t.$dS),t.R7$(),t.FS9("href",s.imgBannerInfo.imgUrl,t.B4B),t.R7$(),t.FS9("src",s.imgBannerInfo.linkUrl,t.B4B)}}function Je(n,o){if(1&n&&(t.qex(0),t.DNE(1,Xe,3,6,"div",2),t.bVm()),2&n){const s=t.XpG();t.R7$(),t.Y8G("ngIf",s.imgBannerInfo)}}function He(n,o){if(1&n&&(t.qex(0),t.nrm(1,"iframe",7),t.nI1(2,"safe"),t.bVm()),2&n){const s=t.XpG();t.R7$(),t.Y8G("src",t.bMT(2,6,s.iframeInfo.src),t.f$h),t.BMQ("width",s.iframeInfo.width)("height",s.iframeInfo.height)("style",s.iframeInfo.style,t.$dS)("scrolling",s.iframeInfo.scrolling)("frameborder",s.iframeInfo.frameborder)}}let K=(()=>{var n;class o extends F.H{constructor(){super(...arguments),this.sAztShowAdsBoxService=(0,t.WQX)(Oe),this.adsTemplateType="htmlTemplate",this.listLiveClassInfo={schoolLevelId:0,schoolSubjectId:0,items:1,className:"",style:""}}hasProductEvent(){this.adsDisplayType==b.ud.DIALOG&&this.checkVipAccountService.showShowDialogAds("azotaDialog")}ngOnChanges(){if(this.obj=this.sAztShowAdsBoxService.replaceAdsContent(this.obj),this.obj.template?.includes("<iframe")){this.adsTemplateType="iframe";let a=document.createElement("div");a.innerHTML=this.obj.template;let e=a.querySelector("iframe"),r=e?.getAttribute("src")??"empty",l=e?.getAttribute("width")??"340",c=e?.getAttribute("height")??"500",m=e?.getAttribute("style")??"",p=e?.getAttribute("scrolling")??"no",g=e?.getAttribute("frameborder")??"0",S=e?.getAttribute("allowfullscreen")??"true",O=e?.getAttribute("allow")??"";this.iframeInfo={src:r,width:Number(l),height:Number(c),style:m,scrolling:p,frameborder:g,allowfullscreen:S,allow:O}}else if(this.obj.template?.includes("<azt-list-product")){this.adsTemplateType="productTemplate";let a=document.createElement("div");a.innerHTML=this.obj.template;let e=a.querySelector("azt-list-product"),r=e?.getAttribute("azt-type")??void 0,l=e?.getAttribute("azt-view-type")??"adView",c=e?.getAttribute("azt-num")??void 0,m=e?.getAttribute("azt-ids")??void 0,p=e?.getAttribute("class")??"",g=e?.getAttribute("style")??"";this.productInfo={type:r||void 0,num:c?+c:void 0,ids:m?.split(","),className:p,style:g,viewType:this.commonService.getEnumType(R,l)??R.AD_VIEW}}else if(this.obj.template?.includes("<azt-list-live-class")){this.adsTemplateType="listLiveClassTemplate";let a=document.createElement("div");a.innerHTML=this.obj.template;let e=a.querySelector("azt-list-live-class"),r=e?.getAttribute("schoolLevelId")?Number(e?.getAttribute("schoolLevelId")):0,l=e?.getAttribute("schoolSubjectId")?Number(e?.getAttribute("schoolSubjectId")):0,c=e?.getAttribute("items")?Number(e?.getAttribute("items")):1,m=e?.getAttribute("class")??"",p=e?.getAttribute("style")??"";this.listLiveClassInfo={schoolLevelId:r,schoolSubjectId:l,items:c,className:m,style:p}}else if(this.obj.template?.includes("<azt-shopie-ads")){this.adsTemplateType="shopieAds";let a=document.createElement("div");a.innerHTML=this.obj.template;let e=a.querySelector("azt-shopie-ads"),r=e?.getAttribute("s")??"",l=e?.getAttribute("f")??"";this.spAdInfo={smallUrl:r,fullUrl:l}}else if(this.obj.template?.includes('<ins class="adsbygoogle"'))this.adsTemplateType="googleAds";else if(this.obj.template?.includes('<azt-img-banner-rdn"')){this.adsTemplateType="imgBanner";let a=document.createElement("div");a.innerHTML=this.obj.template;let e=a.querySelector("azt-img-banner-rdn"),r=e?.getAttribute("class")??"",l=e?.getAttribute("style")??"",m=(e?.innerHTML??"").split(";"),p=[];for(let g of m){let S=g.split(":");if(2!=S.length)continue;let E=S[1];p.push({imgUrl:S[0].trim(),linkUrl:E.trim(),className:r.trim(),style:l.trim()})}if(p.length>0){const g=Math.floor(Math.random()*p.length);this.imgBannerInfo=p[g]}}}ngAfterViewInit(){this.reInitAds()}reInitAds(){if("shopieAds"==this.adsTemplateType){let a=[];return this.spAdInfo?.fullUrl&&a.push(this.spAdInfo.fullUrl),this.spAdInfo?.smallUrl&&a.push(this.spAdInfo.smallUrl),this.checkVipAccountService.appendShopieAdsToFooter(!!this.obj.categoryObj.showForVip,!0,a),void this.checkVipAccountService.showShowDialogAds("shopieDialog")}"googleAds"!=this.adsTemplateType?this.adsDisplayType==b.ud.DIALOG&&"productTemplate"!=this.adsTemplateType&&this.checkVipAccountService.showShowDialogAds("azotaDialog"):this.checkVipAccountService.loadGoogleAdsenseAds(!!this.obj.categoryObj.showForVip,()=>this.checkVipAccountService.runGoogleAdsense())}}return(n=o).\u0275fac=(()=>{let s;return function(e){return(s||(s=t.xGo(n)))(e||n)}})(),n.\u0275cmp=t.VBU({type:n,selectors:[["azt-frontend-ads-item"]],inputs:{obj:"obj",adsDisplayType:"adsDisplayType"},standalone:!0,features:[t.Vt3,t.OA$,t.aNF],decls:7,vars:7,consts:[[4,"ngIf"],["appReplaceLinksForAdsProductId","",3,"innerHTML","adsProductId"],[3,"class",4,"ngIf"],["appReplaceLinksForAdsProductId","",3,"onHasData","productType","numItems","ids","listViewType","productViewType","adsProductId"],["appReplaceLinksForAdsProductId","",3,"onHasData","schoolLevelId","schoolSubjectId","items","adsProductId"],["target","_blank",3,"href"],["width","400","alt","",1,"rounded-lg",3,"src"],["allowfullscreen","true","allow","autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share",3,"src"]],template:function(a,e){1&a&&t.DNE(0,xe,3,4,"ng-container",0)(1,Pe,3,4,"ng-container",0)(2,Ue,2,1,"ng-container",0)(3,Ye,3,8,"ng-container",0)(4,Be,1,0,"ng-container",0)(5,Je,2,1,"ng-container",0)(6,He,3,8,"ng-container",0),2&a&&(t.Y8G("ngIf","htmlTemplate"==e.adsTemplateType),t.R7$(),t.Y8G("ngIf","googleAds"==e.adsTemplateType),t.R7$(),t.Y8G("ngIf","productTemplate"==e.adsTemplateType),t.R7$(),t.Y8G("ngIf","listLiveClassTemplate"==e.adsTemplateType),t.R7$(),t.Y8G("ngIf","shopieAds"==e.adsTemplateType),t.R7$(),t.Y8G("ngIf","imgBanner"==e.adsTemplateType),t.R7$(),t.Y8G("ngIf","iframe"==e.adsTemplateType&&e.iframeInfo))},dependencies:[fe,f._y,f.JI,Ge,ke,u.MD,u.bT,i.X1,h.iI,i.YN,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();var ht=d(29511),q=d(35589),gt=d(7766),ft=d(34006),Qe=d(85389),bt=d(30665);const We=n=>({"error-border":n});function Ke(n,o){1&n&&(t.j41(0,"span",12),t.nrm(1,"azt-loading-ui"),t.k0s())}let qe=(()=>{var n;class o extends Qe._{closeDialog(){this.dialogRef.close(void 0)}saveObj(){this.initStatusObj(),this.waitDestroy(this.partnerService.apiPartnerCreatePartnerPost({name:this.nameFormControl.value}).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.waitDestroy(this.partnerService.apiPartnerListPartnersGet().subscribe(r=>{if(!r.success)return this.closeDialog();this.stopStatusObj(),this.dialogRef.close(r.data?.objs??[])}))}))}ngOnInit(){super.ngOnInit()}constructor(a,e,r){super(r,e),this.partnerService=a,this.dialogRef=e,this.data=r,this.nameFormControl=new i.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]})}}return(n=o).\u0275fac=function(a){return new(a||n)(t.rXU(b.KM),t.rXU(ft.CP,8),t.rXU(ft.Vh))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-create-partner-dialog"]],standalone:!0,features:[t.Vt3,t.aNF],decls:19,vars:15,consts:[[1,"box","p-2"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","mt-4","p-2"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"p-2","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(a,e){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",4)(9,"div",6),t.nrm(10,"input",7),t.k0s()()()(),t.j41(11,"div",8)(12,"button",9),t.bIt("click",function(){return e.closeDialog()}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"button",10),t.bIt("click",function(){return e.saveObj()}),t.DNE(16,Ke,2,0,"span",11),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()()),2&a&&(t.R7$(6),t.SpI(" ",t.bMT(7,7,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("formControl",e.nameFormControl)("ngClass",t.eq3(13,We,e.nameFormControl.invalid)),t.R7$(3),t.SpI(" ",t.bMT(14,9,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",e.statusObj.loading||e.nameFormControl.invalid),t.R7$(),t.Y8G("ngIf",e.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(18,11,"lang_auto_luu")," "))},dependencies:[bt.R,u.MD,u.YU,u.bT,i.X1,i.me,i.BC,i.l_,h.iI,i.YN,f.wp,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})(),vt=(()=>{var n;class o extends F.H{cancel(){this.commonService.myNavigation(this.backTo)}createPartner(){this.sAztDialogService.open(qe,{width:"500px",restoreFocus:!1,data:{}}).afterClosed().subscribe(a=>{null!=a&&(this.partnerObjs=a)})}uploadMultipleFiles(a){let e=this.mediaObjs;a.forEach(r=>{e.push({name:r.name??"",path:r.path??"",extension:r.extension??"",mimes:r.mimes??"",size:r.size?.toString()??"",url:r.url??"",lastModified:r.lastModified??0})}),this.mediaObjs=e}constructor(){super(),this.sAztDialogService=(0,t.WQX)(q.i),this.categoryService=(0,t.WQX)(b.M$),this.categoryId=0,this.templateObj=void 0,this.partnerObjs=[],this.attributeObjs=[],this.allUploadToCdnMenuTypes=gt.b8,this.allUploadFileTypes=gt.PO,this.backTo="",this.allAdsDisplayType=b.ud,this.mediaObjs=[],this.form=new i.gE({name:new i.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]}),partnerId:new i.MJ(0,{nonNullable:!0,validators:[i.k0.min(1)]}),description:new i.MJ("",{nonNullable:!0}),isActive:new i.MJ(!0,{nonNullable:!0}),displayPercent:new i.MJ(100,{nonNullable:!0}),attributeObjs:new i.Yp([])})}}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-base-create-or-update-ads"]],standalone:!0,features:[t.Vt3,t.aNF],decls:0,vars:0,template:function(a,e){},dependencies:[A.An,u.MD,i.X1,h.iI,i.YN,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();var Ze=d(7480),ta=d(42313),yt=d(65414),Ct=d(1288);const $=n=>({"error-border":n}),ea=n=>[n];function aa(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",4),2&n){const s=t.XpG();t.Y8G("currentStatusObj",s.statusObj)}}function na(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s.id),t.R7$(),t.SpI(" ",s.name," ")}}function sa(n,o){if(1&n&&(t.j41(0,"div",42)(1,"a",43),t.nrm(2,"img",44),t.k0s()()),2&n){const s=o.$implicit;t.R7$(),t.BMQ("href",s.url,t.B4B),t.R7$(),t.Y8G("src",s.url,t.B4B)}}function oa(n,o){if(1&n&&(t.j41(0,"div",40),t.DNE(1,sa,3,2,"div",41),t.k0s()),2&n){const s=t.XpG(2);t.R7$(),t.Y8G("ngForOf",s.mediaObjs)}}function ra(n,o){if(1&n&&(t.j41(0,"div",12)(1,"div",13)(2,"label",14),t.EFF(3),t.k0s()(),t.j41(4,"div",13)(5,"div",22),t.nrm(6,"input",23),t.k0s()()()),2&n){const s=o.$implicit;t.R7$(3),t.Lme("",s.controls.attributeDisplayName.value," - ",s.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",s.controls.attributeValue)("ngClass",t.eq3(4,$,s.controls.attributeValue.invalid))}}function ia(n,o){if(1&n&&(t.j41(0,"div",45)(1,"div",13),t.nrm(2,"azt-frontend-ads-item",46),t.k0s()()),2&n){const s=t.XpG(2);t.R7$(2),t.Y8G("adsDisplayType",s.allAdsDisplayType.BANNER)("obj",s.currentAdsObj)}}function la(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10),t.EFF(8,'1. <azt-list-product azt-type="LIVE-CLASS" azt-num="100" ids=""></azt-list-product>'),t.k0s(),t.j41(9,"div",10),t.EFF(10,"2. <azt-shopie-ads></azt-shopie-ads>"),t.k0s(),t.j41(11,"div",10),t.EFF(12,' 3. Adsense article: <ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5379822583140305" data-ad-slot="1586363387"></ins> '),t.k0s(),t.j41(13,"div"),t.EFF(14,' 4. Adsense other: <ins class="adsbygoogle" style="display: block" data-ad-client="ca-pub-5379822583140305" data-ad-slot="2369932214" data-ad-format="auto" data-full-width-responsive="true"></ins> '),t.k0s(),t.j41(15,"div"),t.EFF(16,'5. List live: <azt-list-live-class schoolLevelId="0" schoolSubjectId="0" items="1">'),t.k0s(),t.j41(17,"div"),t.EFF(18,' 6. Iframe: <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fprofile.php%3Fid%3D61574271643856&tabs=timeline&width=340&height=500&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=true&appId=461800307700102" width="340" height="500" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe> '),t.k0s()(),t.j41(19,"div",11)(20,"div",12)(21,"div",13)(22,"label",14),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()(),t.j41(25,"div",15)(26,"div",16)(27,"mat-form-field",17)(28,"mat-select",18,1)(30,"mat-option"),t.nrm(31,"ngx-mat-select-search",19),t.nI1(32,"mytranslate"),t.nI1(33,"mytranslate"),t.k0s(),t.DNE(34,na,2,2,"mat-option",20),t.k0s()()(),t.j41(35,"div",21),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.createPartner())}),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()()(),t.j41(38,"div",12)(39,"div",13)(40,"label",14),t.EFF(41),t.nI1(42,"mytranslate"),t.k0s()(),t.j41(43,"div",13)(44,"div",22),t.nrm(45,"input",23),t.k0s()()(),t.j41(46,"div",12)(47,"div",13)(48,"label",14),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s()(),t.j41(51,"div",13)(52,"div",22),t.nrm(53,"textarea",23),t.k0s()()(),t.j41(54,"div",12)(55,"div",24)(56,"azt-upload-multiple-box",25),t.bIt("uploadComplete",function(e){t.eBV(s);const r=t.XpG();return t.Njj(r.uploadMultipleFiles(e))}),t.j41(57,"div",26),t.EFF(58),t.nI1(59,"mytranslate"),t.k0s()()(),t.DNE(60,oa,2,1,"div",27),t.k0s(),t.j41(61,"div",12)(62,"div",13)(63,"label",14),t.EFF(64),t.nI1(65,"mytranslate"),t.k0s()(),t.j41(66,"div",13)(67,"div",22),t.nrm(68,"input",28),t.k0s()()(),t.DNE(69,ra,7,6,"div",29),t.j41(70,"div",12)(71,"div",13)(72,"div",30),t.nrm(73,"input",31),t.j41(74,"label",32),t.EFF(75),t.nI1(76,"mytranslate"),t.k0s()()()(),t.nrm(77,"hr",33),t.DNE(78,ia,3,2,"div",34),t.k0s(),t.j41(79,"div",35)(80,"button",36),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.cancel())}),t.EFF(81),t.nI1(82,"mytranslate"),t.k0s(),t.j41(83,"button",37),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.saveObj(!1))}),t.EFF(84),t.nI1(85,"mytranslate"),t.k0s(),t.j41(86,"button",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.saveObj(!0))}),t.EFF(87),t.nI1(88,"mytranslate"),t.k0s()()()()()}if(2&n){const s=t.sdS(29),a=t.XpG();t.R7$(),t.Y8G("formGroup",a.form),t.R7$(3),t.SpI(" ",t.bMT(5,33,a.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(19),t.SpI(" ",t.bMT(24,35,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(59,$,a.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",a.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(32,37,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(33,39,"lang_search_not_found")),t.Y8G("formControl",s.searchControl),t.R7$(3),t.Y8G("ngForOf",s.filter(a.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(37,41,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(42,43,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",a.form.controls.name)("ngClass",t.eq3(61,$,a.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(50,45,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",a.form.controls.description)("ngClass",t.eq3(63,$,a.form.controls.description.invalid)),t.R7$(3),t.Y8G("uploadToCdnMenu",a.allUploadToCdnMenuTypes.PRODUCT)("fileType",t.eq3(65,ea,a.allUploadFileTypes.IMAGE))("showProgress",!0),t.R7$(2),t.JRh(t.bMT(59,47,"lang_product_click_here_to_upload_image")),t.R7$(2),t.Y8G("ngIf",a.mediaObjs.length>0),t.R7$(4),t.SpI(" ",t.bMT(65,49,"lang_cms_admin_create_ads_display_percent")," "),t.R7$(4),t.Y8G("formControl",a.form.controls.displayPercent)("ngClass",t.eq3(67,$,a.form.controls.displayPercent.invalid)),t.R7$(),t.Y8G("ngForOf",a.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",a.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(76,51,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",a.currentAdsObj),t.R7$(3),t.JRh(t.bMT(82,53,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",a.form.invalid),t.R7$(),t.JRh(t.bMT(85,55,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",a.form.invalid),t.R7$(),t.JRh(t.bMT(88,57,"lang_core_luu_va_dong"))}}let ca=(()=>{var n;class o extends vt{initForm(){this.form.controls.partnerId.setValue(this.commonService.getFirstOfArray(this.partnerObjs)?.id??0),this.attributeObjs.forEach(a=>{this.form.controls.attributeObjs.push(new i.gE({attributeId:new i.MJ(a.id,{nonNullable:!0}),attributeDisplayName:new i.MJ(a.displayName,{nonNullable:!0}),attributeVariableName:new i.MJ(a.variableName,{nonNullable:!0}),attributeValue:new i.MJ("",{nonNullable:!0})}))})}initData(a){this.initStatusObj(),this.waitDestroy((0,Y.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.categoryService.apiCategoryGetCategoryGet(this.categoryId)]).pipe((0,dt.M)(([e,r,l,c])=>e.success?r.success?l.success?c.success?null==c.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.templateObj=e.data,this.attributeObjs=r.data?.objs??[],this.partnerObjs=l.data?.objs??[],this.categoryObj=c.data,this.initForm(),this.stopStatusObj(),void a()):this.errorStatusObj(c.message,!0):this.errorStatusObj(l.message,!0):this.errorStatusObj(r.message,!0):this.errorStatusObj(e.message,!0))).subscribe())}saveObj(a){this.initStatusObj();let e=this.form.getRawValue(),r={categoryId:this.categoryId,partnerId:e.partnerId,name:e.name,description:e.description,isActive:e.isActive?1:0,displayPercent:e.displayPercent,attributes:e.attributeObjs.map(l=>({attributeId:l.attributeId,value:l.attributeValue}))};this.waitDestroy(this.productService.apiProductCreateProductPost(r).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.successStatusObj("lang_cms_add_success",!0),a&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(()=>{this.form.valueChanges.subscribe(a=>{let e=this.form.controls.attributeObjs.getRawValue().map(r=>({id:0,productId:0,attributeId:r.attributeId,value:r.attributeValue,attribute:{id:r.attributeId,categoryId:this.categoryId,displayName:r.attributeDisplayName,variableName:r.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,displayPercent:this.form.controls.displayPercent.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:e}})})}constructor(a,e,r,l,c){super(),this.partnerService=a,this.productService=e,this.categoryAttributeService=r,this.categoryTemplateService=l,this.activeRoute=c,this.adsId=0}}return(n=o).\u0275fac=function(a){return new(a||n)(t.rXU(Ze.K),t.rXU(ta.b),t.rXU(yt.C),t.rXU(Ct.O),t.rXU(h.nX))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-create-ads"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-3","mt-6"],[1,"mb-2"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"box","p-3"],[3,"uploadComplete","uploadToCdnMenu","fileType","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"],["class","flex mt-2 mb-8",4,"ngIf"],["type","number","min","1","max","100",1,"form-control",3,"formControl","ngClass"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"flex","mt-2","mb-8"],["style","width: 100px; height: 100px","class","box p-3 mb-2 mr-2",4,"ngFor","ngForOf"],[1,"box","p-3","mb-2","mr-2",2,"width","100px","height","100px"],["target","_blank"],["width","100%","height","100%","alt","",3,"src"],[1,"grid","grid-cols-12mb-3"],[3,"adsDisplayType","obj"]],template:function(a,e){if(1&a&&(t.j41(0,"teacher-layout",2),t.DNE(1,aa,1,1,"azt-loading-effect",3)(2,la,89,69,"ng-template",null,0,t.C5r),t.k0s()),2&a){const r=t.sdS(3);t.Y8G("headerBackToLink",e.backTo),t.R7$(),t.Y8G("ngIf",1==e.statusObj.loading)("ngIfElse",r)}},dependencies:[A.An,A.U9,N.x,D.Q,L.K,ht.V,K,u.MD,u.YU,u.Sq,u.bT,i.X1,i.qT,i.me,i.Q0,i.Zm,i.BC,i.cb,i.VZ,i.zX,i.l_,i.j4,h.iI,i.YN,f.wp,y.s,P.wT,V.rl,U.VO,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();const M=n=>({"error-border":n}),da=n=>[n];function ma(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",4),2&n){const s=t.XpG();t.Y8G("currentStatusObj",s.statusObj)}}function ua(n,o){if(1&n&&(t.j41(0,"mat-option",39),t.EFF(1),t.k0s()),2&n){const s=o.$implicit;t.Y8G("value",s.id),t.R7$(),t.SpI(" ",s.name," ")}}function pa(n,o){if(1&n&&(t.j41(0,"div",42)(1,"a",43),t.nrm(2,"img",44),t.k0s()()),2&n){const s=o.$implicit;t.R7$(),t.BMQ("href",s.url,t.B4B),t.R7$(),t.Y8G("src",s.url,t.B4B)}}function _a(n,o){if(1&n&&(t.j41(0,"div",40),t.DNE(1,pa,3,2,"div",41),t.k0s()),2&n){const s=t.XpG(2);t.R7$(),t.Y8G("ngForOf",s.mediaObjs)}}function ha(n,o){if(1&n&&(t.j41(0,"div",12)(1,"div",13)(2,"label",14),t.EFF(3),t.k0s()(),t.j41(4,"div",13)(5,"div",22),t.nrm(6,"input",23),t.k0s()()()),2&n){const s=o.$implicit;t.R7$(3),t.Lme("",s.controls.attributeDisplayName.value," - ",s.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",s.controls.attributeValue)("ngClass",t.eq3(4,M,s.controls.attributeValue.invalid))}}function ga(n,o){if(1&n&&(t.j41(0,"div",45)(1,"div",13),t.nrm(2,"azt-frontend-ads-item",46),t.k0s()()),2&n){const s=t.XpG(2);t.R7$(2),t.Y8G("adsDisplayType",s.allAdsDisplayType.BANNER)("obj",s.currentAdsObj)}}function fa(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10),t.EFF(8,'1. <azt-list-product azt-type="LIVE-CLASS" azt-num="100" ids=""></azt-list-product>'),t.k0s(),t.j41(9,"div",10),t.EFF(10,"2. <azt-shopie-ads></azt-shopie-ads>"),t.k0s(),t.j41(11,"div",10),t.EFF(12,' 3. Adsense article: <ins class="adsbygoogle" style="display: block; text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5379822583140305" data-ad-slot="1586363387"></ins> '),t.k0s(),t.j41(13,"div"),t.EFF(14,' 4. Adsense other: <ins class="adsbygoogle" style="display: block" data-ad-client="ca-pub-5379822583140305" data-ad-slot="2369932214" data-ad-format="auto" data-full-width-responsive="true"></ins> '),t.k0s(),t.j41(15,"div"),t.EFF(16,'5. List live: <azt-list-live-class schoolLevelId="0" schoolSubjectId="0" items="1">'),t.k0s(),t.j41(17,"div"),t.EFF(18,' 6. Iframe: <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fprofile.php%3Fid%3D61574271643856&tabs=timeline&width=340&height=500&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=true&appId=461800307700102" width="340" height="500" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe> '),t.k0s()(),t.j41(19,"div",11)(20,"div",12)(21,"div",13)(22,"label",14),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()(),t.j41(25,"div",15)(26,"div",16)(27,"mat-form-field",17)(28,"mat-select",18,1)(30,"mat-option"),t.nrm(31,"ngx-mat-select-search",19),t.nI1(32,"mytranslate"),t.nI1(33,"mytranslate"),t.k0s(),t.DNE(34,ua,2,2,"mat-option",20),t.k0s()()(),t.j41(35,"div",21),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.createPartner())}),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()()(),t.j41(38,"div",12)(39,"div",13)(40,"label",14),t.EFF(41),t.nI1(42,"mytranslate"),t.k0s()(),t.j41(43,"div",13)(44,"div",22),t.nrm(45,"input",23),t.k0s()()(),t.j41(46,"div",12)(47,"div",13)(48,"label",14),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s()(),t.j41(51,"div",13)(52,"div",22),t.nrm(53,"textarea",23),t.k0s()()(),t.j41(54,"div",12)(55,"div",24)(56,"azt-upload-multiple-box",25),t.bIt("uploadComplete",function(e){t.eBV(s);const r=t.XpG();return t.Njj(r.uploadMultipleFiles(e))}),t.j41(57,"div",26),t.EFF(58),t.nI1(59,"mytranslate"),t.k0s()()(),t.DNE(60,_a,2,1,"div",27),t.k0s(),t.j41(61,"div",12)(62,"div",13)(63,"label",14),t.EFF(64),t.nI1(65,"mytranslate"),t.k0s()(),t.j41(66,"div",13)(67,"div",22),t.nrm(68,"input",28),t.k0s()()(),t.DNE(69,ha,7,6,"div",29),t.j41(70,"div",12)(71,"div",13)(72,"div",30),t.nrm(73,"input",31),t.j41(74,"label",32),t.EFF(75),t.nI1(76,"mytranslate"),t.k0s()()()(),t.nrm(77,"hr",33),t.DNE(78,ga,3,2,"div",34),t.k0s(),t.j41(79,"div",35)(80,"button",36),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.cancel())}),t.EFF(81),t.nI1(82,"mytranslate"),t.k0s(),t.j41(83,"button",37),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.saveObj(!1))}),t.EFF(84),t.nI1(85,"mytranslate"),t.k0s(),t.j41(86,"button",38),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.saveObj(!0))}),t.EFF(87),t.nI1(88,"mytranslate"),t.k0s()()()()()}if(2&n){const s=t.sdS(29),a=t.XpG();t.R7$(),t.Y8G("formGroup",a.form),t.R7$(3),t.SpI(" ",t.bMT(5,33,a.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(19),t.SpI(" ",t.bMT(24,35,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(59,M,a.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",a.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(32,37,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(33,39,"lang_search_not_found")),t.Y8G("formControl",s.searchControl),t.R7$(3),t.Y8G("ngForOf",s.filter(a.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(37,41,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(42,43,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",a.form.controls.name)("ngClass",t.eq3(61,M,a.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(50,45,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",a.form.controls.description)("ngClass",t.eq3(63,M,a.form.controls.description.invalid)),t.R7$(3),t.Y8G("uploadToCdnMenu",a.allUploadToCdnMenuTypes.PRODUCT)("fileType",t.eq3(65,da,a.allUploadFileTypes.IMAGE))("showProgress",!0),t.R7$(2),t.JRh(t.bMT(59,47,"lang_product_click_here_to_upload_image")),t.R7$(2),t.Y8G("ngIf",a.mediaObjs.length>0),t.R7$(4),t.SpI(" ",t.bMT(65,49,"lang_cms_admin_create_ads_display_percent")," "),t.R7$(4),t.Y8G("formControl",a.form.controls.displayPercent)("ngClass",t.eq3(67,M,a.form.controls.displayPercent.invalid)),t.R7$(),t.Y8G("ngForOf",a.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",a.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(76,51,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",a.currentAdsObj),t.R7$(3),t.JRh(t.bMT(82,53,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",a.form.invalid),t.R7$(),t.JRh(t.bMT(85,55,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",a.form.invalid),t.R7$(),t.JRh(t.bMT(88,57,"lang_core_luu_va_dong"))}}let ba=(()=>{var n;class o extends vt{initForm(){this.form.controls.partnerId.setValue(this.updateAdsObj?.partnerId??0),this.form.controls.name.setValue(this.updateAdsObj?.name??""),this.form.controls.description.setValue(this.updateAdsObj?.description??""),this.form.controls.isActive.setValue(!!this.updateAdsObj?.isActive),this.form.controls.displayPercent.setValue(this.updateAdsObj?.displayPercent??100),this.attributeObjs.forEach(a=>{let e=this.updateAdsObj?.productAttributes?.find(r=>r.attributeId==a.id);this.form.controls.attributeObjs.push(new i.gE({attributeId:new i.MJ(a.id,{nonNullable:!0}),attributeDisplayName:new i.MJ(a.displayName,{nonNullable:!0}),attributeVariableName:new i.MJ(a.variableName,{nonNullable:!0}),attributeValue:new i.MJ(e?.value??"",{nonNullable:!0})}))})}initData(a){this.initStatusObj(),this.waitDestroy((0,Y.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.productService.apiProductGetProductGet(this.adsId),this.categoryService.apiCategoryGetCategoryGet(this.categoryId)]).pipe((0,dt.M)(([e,r,l,c,m])=>e.success?r.success?l.success?m.success?null==m.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.templateObj=e.data,this.attributeObjs=r.data?.objs??[],this.partnerObjs=l.data?.objs??[],this.updateAdsObj=c.data,this.categoryObj=m.data,this.initForm(),this.stopStatusObj(),void a()):this.errorStatusObj(m.message,!0):this.errorStatusObj(l.message,!0):this.errorStatusObj(r.message,!0):this.errorStatusObj(e.message,!0))).subscribe())}saveObj(a){this.initStatusObj();let e=this.form.getRawValue(),r={categoryId:this.categoryId,partnerId:e.partnerId,name:e.name,description:e.description,isActive:e.isActive?1:0,displayPercent:e.displayPercent,attributes:e.attributeObjs.map(l=>({attributeId:l.attributeId,value:l.attributeValue}))};this.waitDestroy(this.productService.apiProductUpdateProductPut(r,this.adsId).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.successStatusObj("lang_cms_update_success",!0),a&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.adsId=Number(this.commonService.getMyParam(this.activeRoute,"adsId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(()=>{this.form.valueChanges.subscribe(a=>{let e=this.form.controls.attributeObjs.getRawValue().map(r=>({id:0,productId:0,attributeId:r.attributeId,value:r.attributeValue,attribute:{id:r.attributeId,categoryId:this.categoryId,displayName:r.attributeDisplayName,variableName:r.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,isActive:this.form.controls.isActive.value?1:0,displayPercent:this.form.controls.displayPercent.value,template:this.templateObj?.data,productAttributes:e}})})}constructor(a,e,r,l,c){super(),this.partnerService=a,this.productService=e,this.categoryAttributeService=r,this.categoryTemplateService=l,this.activeRoute=c,this.adsId=0,this.updateAdsObj=void 0,this.form=new i.gE({name:new i.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]}),partnerId:new i.MJ(0,{nonNullable:!0,validators:[i.k0.min(1)]}),description:new i.MJ("",{nonNullable:!0}),isActive:new i.MJ(!0,{nonNullable:!0}),displayPercent:new i.MJ(100,{nonNullable:!0}),attributeObjs:new i.Yp([])})}}return(n=o).\u0275fac=function(a){return new(a||n)(t.rXU(b.KM),t.rXU(b.bk),t.rXU(b.CT),t.rXU(b.Or),t.rXU(h.nX))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-update-ads"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-3","mt-6"],[1,"mb-2"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"box","p-3"],[3,"uploadComplete","uploadToCdnMenu","fileType","showProgress"],[1,"h-full","w-full","cursor-pointer","text-primary"],["class","flex mt-2 mb-8",4,"ngIf"],["type","number","min","1","max","100",1,"form-control",3,"formControl","ngClass"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"flex","mt-2","mb-8"],["style","width: 100px; height: 100px","class","box p-3 mb-2 mr-2",4,"ngFor","ngForOf"],[1,"box","p-3","mb-2","mr-2",2,"width","100px","height","100px"],["target","_blank"],["width","100%","height","100%","alt","",3,"src"],[1,"grid","grid-cols-12mb-3"],[3,"adsDisplayType","obj"]],template:function(a,e){if(1&a&&(t.j41(0,"teacher-layout",2),t.DNE(1,ma,1,1,"azt-loading-effect",3)(2,fa,89,69,"ng-template",null,0,t.C5r),t.k0s()),2&a){const r=t.sdS(3);t.Y8G("headerBackToLink",e.backTo),t.R7$(),t.Y8G("ngIf",1==e.statusObj.loading)("ngIfElse",r)}},dependencies:[A.An,A.U9,N.x,D.Q,L.K,ht.V,K,u.MD,u.YU,u.Sq,u.bT,i.X1,i.qT,i.me,i.Q0,i.Zm,i.BC,i.cb,i.VZ,i.zX,i.l_,i.j4,h.iI,i.YN,f.wp,y.s,P.wT,V.rl,U.VO,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})();var va=d(84572),It=d(57988),ya=d(46506);const G=n=>({backTo:n}),Z=()=>({"mr-1":!0}),Ca=(n,o)=>({"btn-success-soft":n,"btn-pending-soft":o});function Ia(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",4),2&n){const s=t.XpG();t.Y8G("currentStatusObj",s.statusObj)}}function ja(n,o){1&n&&(t.j41(0,"span",22),t.nrm(1,"azt-loading-ui"),t.k0s())}function Sa(n,o){1&n&&(t.j41(0,"span",22),t.nrm(1,"azt-loading-ui"),t.k0s())}function Ta(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",8)(1,"div",11)(2,"div",12)(3,"b"),t.EFF(4),t.k0s(),t.EFF(5),t.nrm(6,"br"),t.EFF(7),t.nI1(8,"mytranslate"),t.nrm(9,"br"),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"div",13)(13,"a",14),t.nI1(14,"navigationLocalize"),t.nrm(15,"lucide-icon",15),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"button",16),t.bIt("click",function(){const e=t.eBV(s).$implicit,r=t.XpG(3);return t.Njj(r.changeStatus(e))}),t.DNE(19,ja,2,0,"span",17),t.nrm(20,"lucide-icon",18),t.j41(21,"span",19),t.EFF(22),t.nI1(23,"mytranslate"),t.nI1(24,"mytranslate"),t.k0s()(),t.j41(25,"button",20),t.bIt("click",function(){const e=t.eBV(s).$implicit,r=t.XpG(3);return t.Njj(r.deleteObj(e))}),t.DNE(26,Sa,2,0,"span",17),t.nrm(27,"lucide-icon",21),t.j41(28,"span",19),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s()()()()()}if(2&n){const s=o.$implicit,a=o.index,e=t.XpG(3);t.R7$(4),t.SpI("",a+1,"."),t.R7$(),t.SpI(" ",s.name," "),t.R7$(2),t.Lme(" ",t.bMT(8,17,"lang_cms_admin_create_ads_display_percent"),": ",s.displayPercent," % "),t.R7$(3),t.Lme(" ",t.bMT(11,19,"lang_cms_admin_create_ads_partner"),": ",null==s.adsPartnerObj?null:s.adsPartnerObj.name," "),t.R7$(3),t.Y8G("routerLink",t.bMT(14,21,"/azota-ads/edit-ads/"+s.categoryId+"/"+s.id))("queryParams",t.eq3(31,G,e.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(33,Z)),t.R7$(),t.SpI(" ",t.bMT(17,23,"lang_auto_sua")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(34,Ca,s.isActive,!s.isActive)),t.R7$(),t.Y8G("ngIf",e.changeStatusId==s.id),t.R7$(),t.Y8G("ngClass",t.lJ4(37,Z)),t.R7$(2),t.JRh(s.isActive?t.bMT(23,25,"lang_cms_admin_ads_is_active"):t.bMT(24,27,"lang_cms_admin_ads_is_inactive")),t.R7$(4),t.Y8G("ngIf",e.deletingId==s.id),t.R7$(),t.Y8G("ngClass",t.lJ4(38,Z)),t.R7$(2),t.JRh(t.bMT(30,29,"lang_auto_xoa"))}}function Aa(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",8)(1,"div")(2,"b"),t.EFF(3),t.nI1(4,"mytranslate"),t.nI1(5,"mytranslate"),t.k0s(),t.EFF(6," ( "),t.j41(7,"span",9),t.nI1(8,"navigationLocalize"),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.EFF(11," | "),t.j41(12,"span",9),t.nI1(13,"navigationLocalize"),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.EFF(16," | "),t.j41(17,"span",9),t.nI1(18,"navigationLocalize"),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.EFF(21," | "),t.j41(22,"span",10),t.bIt("click",function(){const e=t.eBV(s).$implicit,r=t.XpG(2);return t.Njj(r.handleRemoveAdsCategory(e.categoryObj))}),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.EFF(25," ) "),t.k0s(),t.DNE(26,Ta,31,39,"div",7),t.k0s()}if(2&n){const s=o.$implicit,a=t.XpG(2);t.R7$(3),t.SjE(" ",s.categoryObj.name," - Id: ",s.categoryObj.id," - ",t.bMT(4,16,"lang_azota_ads_position_"+s.categoryObj.position)," - ",s.categoryObj.displayType," ",s.categoryObj.showForVip?" - "+t.bMT(5,18,"lang_cms_admin_ads_show_for_vip"):""," "),t.R7$(4),t.Y8G("routerLink",t.bMT(8,20,"/azota-ads/update-ads-category/"+s.categoryObj.id))("queryParams",t.eq3(34,G,a.backTo)),t.R7$(2),t.SpI(" ",t.bMT(10,22,"lang_cms_admin_ads_edit_ads_cateogry")," "),t.R7$(3),t.Y8G("routerLink",t.bMT(13,24,"/azota-ads/create-ads-template/"+s.categoryObj.id))("queryParams",t.eq3(36,G,a.backTo)),t.R7$(2),t.SpI(" ",t.bMT(15,26,"lang_cms_admin_ads_edit_ads_template")," "),t.R7$(3),t.Y8G("routerLink",t.bMT(18,28,"/azota-ads/create-ads/"+s.categoryObj.id))("queryParams",t.eq3(38,G,a.backTo)),t.R7$(2),t.SpI(" ",t.bMT(20,30,"lang_cms_admin_ads_create_new_ads")," "),t.R7$(4),t.JRh(t.bMT(24,32,"lang_cms_admin_ads_delete_ads_cateogry")),t.R7$(3),t.Y8G("ngForOf",s.productObjs)}}function Fa(n,o){if(1&n&&(t.j41(0,"div",5)(1,"span",6),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.DNE(5,Aa,27,40,"div",7)),2&n){const s=t.XpG();t.R7$(),t.Y8G("routerLink",t.bMT(2,4,"/azota-ads/create-ads-category"))("queryParams",t.eq3(8,G,s.backTo)),t.R7$(2),t.JRh(t.bMT(4,6,"lang_cms_admin_ads_create_new_category")),t.R7$(2),t.Y8G("ngForOf",s.objs)}}function Oa(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",3),2&n){const s=t.XpG();t.Y8G("currentStatusObj",s.statusObj)}}function Ra(n,o){if(1&n&&(t.j41(0,"div",11)(1,"span",12),t.EFF(2),t.k0s(),t.j41(3,"span",13),t.EFF(4),t.k0s()()),2&n){const s=o.$implicit;t.R7$(2),t.SpI(" ","${"+s.variableName+"}"," "),t.R7$(2),t.SpI(" ","- "+s.description," ")}}function Ea(n,o){if(1&n&&(t.j41(0,"div",24)(1,"div",16),t.nrm(2,"azt-frontend-ads-item",25),t.k0s()()),2&n){const s=t.XpG(2);t.R7$(2),t.Y8G("adsDisplayType",s.allAdsDisplayType.BANNER)("obj",s.currentAdsObj)}}function Da(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"h3",6),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"div",8)(7,"h3",9),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",10)(11,"div",11)(12,"span",12),t.EFF(13),t.k0s(),t.j41(14,"span",13),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",11)(18,"span",12),t.EFF(19),t.k0s(),t.j41(20,"span",13),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.DNE(23,Ra,5,2,"div",14),t.k0s()(),t.j41(24,"div",15)(25,"div",16)(26,"h3",9),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",17),t.nrm(30,"textarea",18),t.k0s()(),t.nrm(31,"hr",19),t.DNE(32,Ea,3,2,"div",20),t.k0s(),t.j41(33,"div",21)(34,"button",22),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.handleDestroy())}),t.EFF(35),t.nI1(36,"mytranslate"),t.k0s(),t.j41(37,"button",23),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.saveTemplate())}),t.EFF(38),t.nI1(39,"mytranslate"),t.k0s()()()()}if(2&n){const s=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,12,"lang_azt_create_ads_template")," "),t.R7$(5),t.SpI(" ",t.bMT(9,14,"lang_azt_information_field")," "),t.R7$(5),t.JRh("${NAME}"),t.R7$(2),t.SpI(" ","- "+t.bMT(16,16,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.JRh("${DESCRIPTION}"),t.R7$(2),t.SpI(" ","- "+t.bMT(22,18,"lang_cms_admin_create_ads_description")," "),t.R7$(2),t.Y8G("ngForOf",s.categoryAttributeList),t.R7$(4),t.SpI(" ",t.bMT(28,20,"lang_auto_noi_dung")," "),t.R7$(3),t.Y8G("formControl",s.template),t.R7$(2),t.Y8G("ngIf",s.currentAdsObj),t.R7$(3),t.JRh(t.bMT(36,22,"lang_auto_huy")),t.R7$(3),t.JRh(t.bMT(39,24,"lang_auto_luu"))}}const La=[{path:"",component:St.z,children:[{path:"ads-list/:categoryId",component:(()=>{var n;class o extends F.H{handleRemoveAdsCategory(a){const e=`${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_category")} <b>${a.name}<b/>?`;this.dialogService.open(It.u,{data:{content:e},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(r=>{r&&this.waitDestroy(this.categoryService.apiCategoryDeleteCategoryDelete(a.id).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.objs=this.objs.filter(c=>c.categoryObj.id!=a.id),this.successStatusObj("lang_admin_guide_delete_success",!0)}))})}changeStatus(a){this.changeStatusId=a.id;let e=a.isActive?this.productService.apiProductDeactivateProductPut(a.id):this.productService.apiProductActivateProductPut(a.id);this.waitDestroy(e.subscribe(r=>{if(this.changeStatusId=0,!r.success)return this.errorStatusObj(r.message,!0);this.objs.forEach(l=>{l.productObjs.forEach(c=>{c.id==a.id&&(c.isActive=a.isActive?0:1)})})}))}deleteObj(a){const e=this.commonService.myTranslateInstant("lang_cms_admin_ads_are_your_sure_to_delete_this_ads")+`: <b>${a.name}<b/>?`;this.sAztDialogService.open(It.u,{data:{content:e},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(r=>{r&&(this.deletingId=a.id,this.waitDestroy(this.productService.apiProductDeleteProductsPost({productIds:[a.id]}).subscribe(l=>{if(this.deletingId=0,!l.success)return this.errorStatusObj(l.message,!0);this.objs.forEach(c=>c.productObjs=c.productObjs.filter(m=>m.id!=a.id))})))})}getData(){this.initStatusObj(),this.waitDestroy(this.productService.apiProductListCategoryWithProductsPost({page:-1,size:-1}).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.objs=e.data?.objs??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,va.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getData()})),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.headerBackTo=this.commonService.getMyQueryParam("backTo")??"/super-role/admin-tool",this.backTo=this.commonService.getMyQueryParam("backTo")??this.commonService.getCurrentUrlWithoutLocale()}constructor(a,e,r,l,c){super(),this.dialogService=a,this.categoryService=e,this.productService=r,this.activeRoute=l,this.sAztDialogService=c,this.currentCategoryFormControl=new i.MJ(0,{nonNullable:!0}),this.objs=[],this.deletingId=0,this.changeStatusId=0,this.backTo="",this.headerBackTo=""}}return(n=o).\u0275fac=function(a){return new(a||n)(t.rXU(q.i),t.rXU(ya.M),t.rXU(b.bk),t.rXU(h.nX),t.rXU(q.i))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-common-guide"]],standalone:!0,features:[t.Vt3,t.aNF],decls:5,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"text-right","mt-3"],[1,"clickable","btn","btn-primary",3,"routerLink","queryParams"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"clickable","flex-none","text-primary","ml-2","mr-2",3,"routerLink","queryParams"],[1,"clickable","flex-none","text-danger","ml-2","mr-2",3,"click"],[1,"flex","align-items-center","box","p-3"],[1,"w-full"],[1,"flex-none","items-center"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"routerLink","queryParams"],["name","square-pen","size","18",3,"ngClass"],[1,"btn","btn-sm","mr-2",3,"click","ngClass"],["class","w-4 h-4 flex mr-1",4,"ngIf"],["name","shield-check","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[1,"w-4","h-4","flex","mr-1"]],template:function(a,e){if(1&a&&(t.j41(0,"teacher-layout",1)(1,"div",2),t.DNE(2,Ia,1,1,"azt-loading-effect",3)(3,Fa,6,10,"ng-template",null,0,t.C5r),t.k0s()()),2&a){const r=t.sdS(4);t.Y8G("headerBackToLink",e.headerBackTo),t.R7$(2),t.Y8G("ngIf",e.statusObj.loading)("ngIfElse",r)}},dependencies:[D.Q,L.K,bt.R,f.F2,u.MD,u.YU,u.Sq,u.bT,i.X1,h.iI,h.Wk,i.YN,f.wp,y.s,v.flO,v.WGl,C.L,I.Id,j.k],encapsulation:2}),o})()},{path:"create-ads/:categoryId",component:ca},{path:"edit-ads/:categoryId/:adsId",component:ba},{path:"create-ads-category",component:Pt},{path:"update-ads-category/:categoryId",component:oe},{path:"create-ads-template/:categoryId",component:(()=>{var n;class o extends F.H{saveTemplate(){this.waitDestroy(this.categoryTemplateService.apiCategoryTemplateUpsertCategoryTemplatePost({categoryId:this.categoryId,data:this.template.value}).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.successStatusObj("T\u1ea1o template th\xe0nh c\xf4ng"),this.myNavigation(`/azota-ads/ads-list/${this.categoryId}`)}))}handleDestroy(){this.myNavigation(this.backToLink)}initAds(){this.currentAdsObj={id:0,categoryId:this.categoryId,categoryObj:this.categoryObj,partnerId:0,name:"NAME_SAMPLE",description:"DESCRIPTION_SAMPLE",template:this.template.value,isActive:1,displayPercent:100,productAttributes:this.categoryAttributeList.map(a=>({id:0,productId:0,attributeId:a.id,value:a.variableName,attribute:{id:a.id,categoryId:this.categoryId,displayName:a.displayName,variableName:a.variableName}}))}}getData(a){this.initStatusObj();const e=this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(a),r=this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(a),l=this.categoryService.apiCategoryGetCategoryGet(a);this.waitDestroy((0,Y.p)([e,r,l]).subscribe({next:([c,m,p])=>c.success?m.success?p.success?null==p.data?this.errorStatusObj("lang_local_not_found_obj",!0):(this.categoryObj=p.data,this.categoryAttributeList=c.data?.objs??[],this.template.setValue(m.data?.data??""),void this.successStatusObj()):this.errorStatusObj(p.message,!0):this.errorStatusObj(m.message,!0):this.errorStatusObj(c.message,!0),error:c=>this.errorStatusObj(c.message,!0)}))}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-list/"+this.categoryId,this.getData(this.categoryId),this.template.valueChanges.subscribe(a=>{this.initAds()})}constructor(a,e,r,l){super(),this.activeRoute=a,this.categoryService=e,this.categoryTemplateService=r,this.categoryAttributeService=l,this.backToLink="",this.categoryId=0,this.template=new i.MJ("",{nonNullable:!0,validators:[i.k0.required]}),this.categoryAttributeList=[],this.allAdsDisplayType=b.ud}}return(n=o).\u0275fac=function(a){return new(a||n)(t.rXU(h.nX),t.rXU(b.M$),t.rXU(Ct.O),t.rXU(yt.C))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-create-ads-template"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-5","mt-3"],[1,"mt-0"],[1,"text-md","font-medium"],[1,"mt-2"],[1,"mt-3"],[1,"rounded-md","bg-slate-200","px-3","py-1","text-slate-600","text-xs","dark:bg-darkmode-300","dark:text-slate-400","inline-block"],[1,"mt-1","mr-1","text-xs","leading-relaxed","text-slate-500"],["class","mt-3",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-12"],[1,"col-span-12","lg:col-span-12","mt-3"],[3,"formControl"],[1,"mt-3","mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"grid","grid-cols-12mb-3"],[3,"adsDisplayType","obj"]],template:function(a,e){if(1&a&&(t.j41(0,"teacher-layout",1),t.DNE(1,Oa,1,1,"azt-loading-effect",2)(2,Da,40,26,"ng-template",null,0,t.C5r),t.k0s()),2&a){const r=t.sdS(3);t.Y8G("headerBackToLink",e.backToLink),t.R7$(),t.Y8G("ngIf",1==e.statusObj.loading)("ngIfElse",r)}},dependencies:[D.Q,L.K,K,u.MD,u.Sq,u.bT,i.X1,i.me,i.BC,i.l_,h.iI,i.YN,f.wp,y.s,v.flO,C.L,I.Id,j.k],encapsulation:2}),o})()}]}];let wa=(()=>{var n;class o{}return(n=o).\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[h.iI.forChild(La),h.iI,jt.XE]}),o})()}}]);