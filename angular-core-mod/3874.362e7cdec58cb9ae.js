"use strict";(self.webpackChunkCoreMod=self.webpackChunkCoreMod||[]).push([[3874],{99965:(J,E,d)=>{d.d(E,{j:()=>r});var c=d(48891);let r=(()=>{var m;class S{constructor(g){this.el=g}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(g){g.parentElement&&(g.parentElement.style.minHeight=g.parentElement.clientHeight+"px"),g.style.overflow="hidden",g.style.height="auto";let v=g.scrollHeight+30;v=v<57?57:v,g.style.height=v+"px",g.parentElement&&(g.parentElement.style.minHeight="auto")}}return(m=S).\u0275fac=function(g){return new(g||m)(c.rXU(c.aKT))},m.\u0275dir=c.FsC({type:m,selectors:[["textarea","autoResize",""]],hostBindings:function(g,v){1&g&&c.bIt("input",function(p){return v.onInput(p.target.value)})("focus",function(){return v.onFocus()})}}),S})()},15423:(J,E,d)=>{d.d(E,{N:()=>p});var c=d(59640),r=d(48891),m=d(54460),S=d(9570),O=d(76975);const g=(b,I)=>({"pt-1 pb-3":b,"pt-3":I}),v=b=>({display:b});function h(b,I){1&b&&(r.j41(0,"div",6),r.EFF(1),r.nI1(2,"mytranslate"),r.k0s()),2&b&&(r.R7$(),r.SpI(" ",r.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}let p=(()=>{var b;class I extends c.H{constructor(){super(...arguments),this.isShowExplain=!1}}return(b=I).\u0275fac=(()=>{let y;return function(w){return(y||(y=r.xGo(b)))(w||b)}})(),b.\u0275cmp=r.VBU({type:b,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},features:[r.Vt3],decls:6,vars:9,consts:[["elementGroup",""],["elementHook",""],["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","mt-1","px-3",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngClass","ngStyle"],[2,"width","fit-content"],[3,"content"],[1,"mt-1","box","p-2"]],template:function(R,w){if(1&R&&(r.DNE(0,h,3,3,"div",2),r.j41(1,"div",3,0)(3,"div",4,1),r.nrm(5,"azt-dynamic-hook",5),r.k0s()()),2&R){let G;const W=r.sdS(2),f=r.sdS(4);r.Y8G("ngIf",W.offsetWidth<f.offsetWidth&&w.isMobileDevice),r.R7$(),r.Y8G("ngClass",r.l_i(4,g,!w.isMobileDevice,w.isMobileDevice))("ngStyle",r.eq3(7,v,w.isShowExplain&&w.questionObj.help?"inherit":"none")),r.R7$(4),r.Y8G("content",null!==(G=w.questionObj.help)&&void 0!==G?G:"")}},dependencies:[m.YU,m.bT,m.B3,S.x,O.wp],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),I})()},11002:(J,E,d)=>{d.d(E,{$:()=>S});var c=d(59640),r=d(48891);const m=["*"];let S=(()=>{var O;class g extends c.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let h=document.querySelector(".azt-content"),p=document.getElementById("flexed-on-top"),b=document.getElementById("position-dev")?.getBoundingClientRect();if(!h||!p||!b)return;let I=window.pageYOffset,y=b.top,R=y<-50;if(this.fixToTopWidth=b.width,this.fixToTopTop=b.top,R){p.style.position="fixed",p.style.zIndex="9999",p.style.height=this.defaultHeight,p.style.right=this.isMobileWebView?"0":"12px",p.style.background=this.colorBackground,p.style.justifyContent="end";let w=h.getBoundingClientRect().width;this.isMobileDevice?(p.style.top="62px",p.style.padding="6px 15px",p.style.width=(w+32).toString()+"px"):(p.style.top="0",p.style.padding="6px 22px",p.style.width=(w+44).toString()+"px")}else(0==I||0==y)&&(p.style.position="",p.style.top="",p.style.right="",p.style.zIndex="",p.style.height="",p.style.padding="",p.style.background="",p.style.width="",p.style.justifyContent="")}}return(O=g).\u0275fac=(()=>{let v;return function(p){return(v||(v=r.xGo(O)))(p||O)}})(),O.\u0275cmp=r.VBU({type:O,selectors:[["flexed-on-the-top"]],hostBindings:function(h,p){1&h&&r.bIt("scroll",function(I){return p.onWindowScroll(I)},!1,r.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[r.Vt3],ngContentSelectors:m,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(h,p){1&h&&(r.NAR(),r.nrm(0,"div",0),r.j41(1,"div",1),r.SdG(2),r.k0s())},encapsulation:2}),g})()},43874:(J,E,d)=>{d.r(E),d.d(E,{AzotaToolsModule:()=>ts});var c=d(54460),r=d(10936),m=d(65162),S=d(69223),O=d(62067),g=d(15343),v=d(10123),h=d(44233),p=d(5502),b=d(21656),I=d(70050),y=d(7050),R=d(35143),w=d(43234),G=d(1133),W=d(89121),f=d(59640),e=d(48891),de=d(27134),H=d(47712),T=d(18718),Ae=d(69135),x=d(52811),D=d(51614),A=d(96451),u=d(76975);const Se=t=>({"border-b":t}),ye=()=>({"mr-2":!0}),ue=()=>({"text-pending":!0});function Ee(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function ze(t,a){1&t&&(e.j41(0,"div",14)(1,"h3",15),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")))}function Fe(t,a){1&t&&(e.j41(0,"div",14),e.nrm(1,"azt-loading-ui",16),e.j41(2,"h3",15),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_cms_common_loading")))}function Re(t,a){if(1&t&&(e.qex(0),e.DNE(1,ze,4,3,"div",13)(2,Fe,5,3,"div",13),e.bVm()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(i.loadingExamObjs||i.form.controls.schoolLevel.value&&i.form.controls.schoolSubject.value)),e.R7$(),e.Y8G("ngIf",i.loadingExamObjs)}}function Me(t,a){1&t&&(e.nrm(0,"lucide-icon",28),e.nI1(1,"mytranslate")),2&t&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_published")),e.Y8G("ngClass",e.lJ4(4,ue)))}function Ge(t,a){1&t&&(e.nrm(0,"lucide-icon",29),e.nI1(1,"mytranslate")),2&t&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_unpublished")),e.Y8G("ngClass",e.lJ4(4,ue)))}function De(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),e.DNE(4,Me,2,5,"lucide-icon",22)(5,Ge,2,5,"lucide-icon",23),e.k0s(),e.j41(6,"div",24,2)(8,"span"),e.EFF(9),e.k0s()()()(),e.j41(10,"div",25)(11,"button",26),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.goAnalyzeExam(o.id))}),e.nrm(12,"lucide-icon",27),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()}if(2&t){const i=a.$implicit,n=a.last,o=e.sdS(7),s=e.XpG(3);e.Y8G("ngClass",e.eq3(15,Se,!n)),e.R7$(4),e.Y8G("ngIf",i.isPublished),e.R7$(),e.Y8G("ngIf",!i.isPublished),e.R7$(),e.Mz_("matTooltip"," ",i.name,""),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.ZvI("mb-0 d-block ",s.isMobileWebView?"azt-wv-item-name":"",""),e.R7$(),e.JRh(i.name),e.R7$(3),e.Y8G("ngClass",e.lJ4(17,ye)),e.R7$(),e.SpI(" ",e.bMT(14,13,"lang_core_auto_analyze")," ")}}function Be(t,a){if(1&t&&e.DNE(0,De,15,18,"div",17),2&t){const i=e.XpG(2);e.Y8G("ngForOf",i.listExamObjs)}}function Pe(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"h3",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",9)(6,"config-level-subject-book",10),e.bIt("changeDataEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.getExamObjsByLevelSubject())}),e.k0s()(),e.j41(7,"div",11),e.DNE(8,Re,3,2,"ng-container",12)(9,Be,1,1,"ng-template",null,1,e.C5r),e.k0s()()}if(2&t){const i=e.sdS(10),n=e.XpG();e.R7$(3),e.JRh(e.bMT(4,7,"lang_core_suggest_objective_and_difficulty_level")),e.R7$(3),e.Y8G("form",n.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useExamSchoolLogData",!1),e.R7$(2),e.Y8G("ngIf",!n.form.controls.schoolLevel.value||!n.form.controls.schoolSubject.value||n.loadingExamObjs)("ngIfElse",i)}}let $e=(()=>{var t;class a extends f.H{getExamObjsByLevelSubject(){!this.form.controls.schoolLevel.value||!this.form.controls.schoolSubject.value||this.getDataExamObjs()}goAnalyzeExam(n){this.myNavigationWithQueryString("/azota-tools/auto-suggestion-for-one-exam/"+n+"/"+(this.form.controls.schoolLevel?.value??0)+"/"+(this.form.controls.schoolSubject?.value??0),"?backTo="+encodeURIComponent("/azota-tools/auto-suggestion-for-exams"))}getDataExamObjs(){let n=this.form.controls.schoolLevel?.value??0,o=this.form.controls.schoolSubject?.value??0;this.loadingExamObjs=!0,this.waitDestroy(this.adminExamService.apiAdminExamGetTopExamsGet(n,o).subscribe(s=>{if(!s.success)return this.loadingExamObjs=!1,this.errorStatusObj(s.message,!0);this.listExamObjs=s.data?.objs??[],this.loadingExamObjs=!1,this.successStatusObj()}))}ngOnInit(){this.initStatusObj(),this.getDataExamObjs()}constructor(n){super(),this.adminExamService=n,this.backTo="/super-role/admin-tool",this.listExamObjs=[],this.loadingExamObjs=!1,this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(de.g0))},t.\u0275cmp=e.VBU({type:t,selectors:[["auto-suggestion-for-exams"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["showData",""],["c","isDisabled"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-2","box","p-2"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useExamSchoolLogData"],[1,"box","mt-2","relative","py-5","px-5",2,"height","calc(100vh - 250px)","overflow-y","auto"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"mr-2"],["class","border-slate-200 py-2 flex justify-between",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-slate-200","py-2","flex","justify-between",3,"ngClass"],[1,"flex","align-center"],[1,"title-exam","flex","items-center","clickable","ml-3","w-52","sm:w-full"],[1,"image-fit"],["name","file-check","size","24",3,"matTooltip","ngClass",4,"ngIf"],["name","file","size","24",3,"matTooltip","ngClass",4,"ngIf"],[1,"ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"ml-auto"],[1,"btn","btn-primary-soft",3,"click"],["name","pie-chart","size","20",3,"ngClass"],["name","file-check","size","24",3,"matTooltip","ngClass"],["name","file","size","24",3,"matTooltip","ngClass"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",3),e.DNE(1,Ee,1,1,"azt-loading-effect",4)(2,Pe,11,9,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,H.oV,T.K,Ae.f,x.R,D.X,A.Q,g.WGl,u.wp],encapsulation:2}),a})();var _e=d(76627),P=d(65106),$=d(25539),Z=d(34292),M=d(78111),K=d(10933),pe=d(99927),ge=d(64486),me=d(66793),Q=d(47426),N=d(4375),V=d(42789),Ke=d(60780),fe=d(5955),Qe=d(6625),Y=d(9570),q=d(99743),B=d(2433),L=d(37320),be=d(53220);const Ne=()=>({"text-warning":!0,"mr-1":!0}),Ve=()=>({"mr-1":!0});function Ye(t,a){1&t&&e.nrm(0,"azt-loading-ui",4),2&t&&e.Y8G("size",16)}function qe(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",8)(1,"span",9),e.nrm(2,"lucide-icon",10),e.j41(3,"span",11),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"a",12),e.nrm(7,"lucide-icon",13),e.j41(8,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.guessKnowledgeUnit())}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(8,Ne)),e.R7$(2),e.JRh(e.bMT(5,4,"lang_knowledge_suggest_api_call_again")),e.R7$(3),e.Y8G("ngClass",e.lJ4(9,Ve)),e.R7$(2),e.JRh(e.bMT(10,6,"lang_auto_thu_lai")))}function Le(t,a){if(1&t&&(e.j41(0,"div",8),e.nrm(1,"azt-dynamic-hook",15),e.nI1(2,"mytranslate"),e.k0s()),2&t){let i;const n=e.XpG(3);e.R7$(),e.Y8G("content",null!==(i=null==n.currentKnowledgeTreeNode?null:n.currentKnowledgeTreeNode.title)&&void 0!==i?i:e.bMT(2,1,"long_core_chon_khung_kien_thuc"))}}function Xe(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",6),e.DNE(2,qe,11,10,"div",7)(3,Le,3,3,"div",7),e.k0s(),e.bVm()),2&t){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf","callApiFail"==i.currentStatus),e.R7$(),e.Y8G("ngIf",null==i.currentStatus)}}function Ue(t,a){1&t&&(e.j41(0,"div",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function Je(t,a){if(1&t&&e.DNE(0,Xe,4,2,"ng-container",5)(1,Ue,3,3,"ng-template",null,1,e.C5r),2&t){const i=e.sdS(2),n=e.XpG();e.Y8G("ngIf",n.knowledgeObjs.length>0)("ngIfElse",i)}}let We=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.selectKnowledgeEmit=new e.bkB,this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q.I),this.sAztKnowledgeObjectiveService=(0,e.WQX)(B.h),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(L.f),this.currentStatus=void 0,this.knowledgeObjs=[]}guessKnowledgeUnit(){if(this.currentObjectiveId||this.currentKnowledgeTreeNode)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.isExistInArray(this.questionObj.answerResult,o.key)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,n,(o,s,l)=>{this.updateKnowledgeAndObjective(s,!0),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}updateKnowledgeAndObjective(n,o){this.currentObjectiveId=n??0,this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveService.getObjByKnowledgeIdOrObjectiveId(this.knowledgeObjs,0,this.currentObjectiveId),this.currentKnowledgeTreeNode&&(this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForCommonQuestion(this.questionObj,{objectiveId:this.currentKnowledgeTreeNode.objectiveId}),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){super.ngOnInit(),this.currentObjectiveId=this.questionObj.objectiveId??0,this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.levelId,this.subjectId,!1,void 0).subscribe(n=>{if(n.errorMessage||!n.data)return this.errorStatusObj(n.errorMessage??"",!0);this.knowledgeObjs=n.data.objs,this.updateKnowledgeAndObjective(this.currentObjectiveId,!1),this.guessKnowledgeUnit()})}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-common-question-knowledge-unit-to-auto-suggestion"]],inputs:{questionObj:"questionObj",levelId:"levelId",subjectId:"subjectId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],decls:4,vars:2,consts:[["notLoading",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[2,"padding","5px 0px"],["class","flex",4,"ngIf"],[1,"flex"],[2,"display","inline-flex","align-items","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"ml-2","link__hover","link__color",2,"display","inline-flex","align-items","center"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"clickable",3,"click"],[3,"content"],[1,"pl-3","pb-3"]],template:function(n,o){if(1&n&&(e.j41(0,"div",2),e.DNE(1,Ye,1,1,"azt-loading-ui",3)(2,Je,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus)("ngIfElse",s)}},dependencies:[c.YU,c.bT,g.WGl,x.R,Y.x,u.wp,be.D9],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),a})();const He=["*"],Ze=()=>({"text-warning":!0,"mr-1":!0}),et=()=>({"mr-1":!0});function tt(t,a){1&t&&e.nrm(0,"azt-loading-ui",4),2&t&&e.Y8G("size",16)}function nt(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",8)(1,"span",9),e.nrm(2,"lucide-icon",10),e.j41(3,"span",11),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"a",12),e.nrm(7,"lucide-icon",13),e.j41(8,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.guessKnowledgeUnit())}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&t&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(8,Ze)),e.R7$(2),e.JRh(e.bMT(5,4,"lang_knowledge_suggest_api_call_again")),e.R7$(3),e.Y8G("ngClass",e.lJ4(9,et)),e.R7$(2),e.JRh(e.bMT(10,6,"lang_auto_thu_lai")))}function ot(t,a){if(1&t&&(e.j41(0,"div",8),e.nrm(1,"azt-dynamic-hook",15),e.nI1(2,"mytranslate"),e.k0s()),2&t){let i;const n=e.XpG(3);e.R7$(),e.Y8G("content",null!==(i=null==n.currentKnowledgeTreeNode?null:n.currentKnowledgeTreeNode.title)&&void 0!==i?i:e.bMT(2,1,"long_core_chon_khung_kien_thuc"))}}function it(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",6),e.DNE(2,nt,11,10,"div",7)(3,ot,3,3,"div",7),e.k0s(),e.bVm()),2&t){const i=e.XpG(2);e.R7$(2),e.Y8G("ngIf","callApiFail"==i.currentStatus),e.R7$(),e.Y8G("ngIf",null==i.currentStatus)}}function st(t,a){1&t&&(e.j41(0,"div",16),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_analyze_knowledge_no_support_for_this_school_level_and_subject")))}function at(t,a){if(1&t&&(e.DNE(0,it,4,2,"ng-container",5)(1,st,3,3,"ng-template",null,1,e.C5r),e.SdG(3)),2&t){const i=e.sdS(2),n=e.XpG();e.Y8G("ngIf",n.knowledgeObjs.length>0)("ngIfElse",i)}}let lt=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.selectKnowledgeEmit=new e.bkB,this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q.I),this.sAztKnowledgeObjectiveService=(0,e.WQX)(B.h),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(L.f),this.currentStatus=void 0,this.knowledgeObjs=[]}guessKnowledgeUnit(){if(this.currentObjectiveId||this.currentKnowledgeTreeNode)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,n,(o,s,l)=>{this.updateKnowledgeAndObjective(s,!0),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}updateKnowledgeAndObjective(n,o){this.currentObjectiveId=n??0,this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveService.getObjByKnowledgeIdOrObjectiveId(this.knowledgeObjs,0,this.currentObjectiveId),this.currentKnowledgeTreeNode&&(this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeObjectiveForTrueFalseQuestion(this.questionObj,{objectiveId:this.currentKnowledgeTreeNode.objectiveId},this.currentAnswerKey),o&&this.selectKnowledgeEmit.emit(this.questionObj))}ngOnInit(){super.ngOnInit(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.levelId,this.subjectId,!1,void 0).subscribe(n=>{if(n.errorMessage||!n.data)return this.errorStatusObj(n.errorMessage??"",!0);this.knowledgeObjs=n.data.objs,this.currentObjectiveId=this.questionObj.configAnswers.find(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey))?.objectiveId,this.updateKnowledgeAndObjective(this.currentObjectiveId,!1),this.guessKnowledgeUnit()})}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-true-false-question-knowledge-unit-to-auto-suggestion"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",levelId:"levelId",subjectId:"subjectId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],ngContentSelectors:He,decls:4,vars:2,consts:[["notLoading",""],["noSupportLevelSubject",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[4,"ngIf","ngIfElse"],[2,"padding","5px 0px"],["class","flex",4,"ngIf"],[1,"flex"],[2,"display","inline-flex","align-items","center"],["name","info","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"ml-2","link__hover","link__color",2,"display","inline-flex","align-items","center"],["name","refresh-ccw","size","16",3,"ngClass"],[1,"clickable",3,"click"],[3,"content"],[1,"pl-3","pb-3"]],template:function(n,o){if(1&n&&(e.NAR(),e.j41(0,"div",2),e.DNE(1,tt,1,1,"azt-loading-ui",3)(2,at,4,2,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus)("ngIfElse",s)}},dependencies:[c.YU,c.bT,g.WGl,x.R,Y.x,u.wp,be.D9],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),a})();var he=d(68106);function rt(t,a){1&t&&e.nrm(0,"azt-loading-ui",3),2&t&&e.Y8G("size",16)}function ct(t,a){if(1&t&&(e.j41(0,"span",6),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.FS9("matTooltip",e.bMT(1,2,i.currentQuestionTagName+"_name")),e.R7$(2),e.SpI(" ",e.bMT(3,4,i.currentQuestionTagName)," ")}}function dt(t,a){1&t&&(e.nrm(0,"lucide-icon",9),e.nI1(1,"mytranslate")),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_core_nang_vip_de_tu_don_du_doan_ket_qua_can_dat"))}function ut(t,a){if(1&t&&(e.j41(0,"div",4)(1,"span",7),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,dt,2,3,"lucide-icon",8),e.k0s()),2&t){const i=e.XpG(2);e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),""),e.R7$(2),e.Y8G("ngIf","vipRequired"==i.currentStatus)}}function _t(t,a){if(1&t&&(e.j41(0,"div",4),e.DNE(1,ct,4,6,"span",5)(2,ut,5,4,"ng-template",null,0,e.C5r),e.k0s()),2&t){const i=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",n.currentQuestionTagName)("ngIfElse",i)}}let pt=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q.I),this.sAztQuestionTagService=(0,e.WQX)(he.c),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(L.f),this.sAztListenQuestionTagChangesService=(0,e.WQX)(Z.c),this.questionTags=[],this.currentStatus=void 0}setTag(n){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForCommonQuestion(this.questionObj,n),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"common_question",tagType:"CURRENT_QUESTION",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:n}),this.initData()}suggestionTag(){if(this.currentQuestionTagName)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(this.useQuestionIdToSuggestion,n,(o,s,l)=>{let _=this.questionTags.find(k=>k.id==l);_&&this.setTag([_]),this.currentStatus=void 0},o=>this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail")}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags);let n=this.commonService.getFirstOfArray(this.questionObj.tags??[])?.code;this.currentQuestionTagName=n?"azt_lang_tag_"+n:void 0,this.currentQuestionTagName&&(this.currentStatus=void 0)}ngOnChanges(){this.initData()}ngOnInit(){this.sAztQuestionTagService.getQuestionTags().subscribe(n=>{this.questionTags=n,this.initData(),this.suggestionTag()})}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-common-question-tag-in-analyze-tool"]],inputs:{questionObj:"questionObj",currentQuestionTags:"currentQuestionTags",useQuestionIdToSuggestion:"useQuestionIdToSuggestion",levelId:"levelId",subjectId:"subjectId"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["notHaveQuestionTag",""],["class","ml-3",3,"size",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"ml-3",3,"size"],[1,"flex","items-center"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",3,"matTooltip"],[1,"text-danger"],["size","16","class","text-warning ml-2","name","octagon-alert",3,"matTooltip",4,"ngIf"],["size","16","name","octagon-alert",1,"text-warning","ml-2",3,"matTooltip"]],template:function(n,o){1&n&&(e.j41(0,"span"),e.DNE(1,rt,1,1,"azt-loading-ui",1)(2,_t,4,2,"div",2),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus),e.R7$(),e.Y8G("ngIf","callApiFail"==o.currentStatus||"vipRequired"==o.currentStatus||null==o.currentStatus))},dependencies:[c.bT,H.oV,g.WGl,x.R,u.wp],encapsulation:2}),a})();function gt(t,a){1&t&&e.nrm(0,"azt-loading-ui",3),2&t&&e.Y8G("size",16)}function mt(t,a){if(1&t&&(e.j41(0,"span",5),e.nI1(1,"mytranslate"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.FS9("matTooltip",e.bMT(1,2,i.currentQuestionTagName+"_name")),e.R7$(2),e.SpI(" ",e.bMT(3,4,i.currentQuestionTagName)," ")}}function ft(t,a){1&t&&(e.nrm(0,"lucide-icon",9),e.nI1(1,"mytranslate")),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_core_nang_vip_de_tu_don_du_doan_ket_qua_can_dat"))}function bt(t,a){if(1&t&&(e.j41(0,"div",6)(1,"span",7),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,ft,2,3,"lucide-icon",8),e.k0s()),2&t){const i=e.XpG(2);e.R7$(2),e.SpI("*",e.bMT(3,2,"lang_question_library_not_have_question_tag"),""),e.R7$(2),e.Y8G("ngIf","vipRequired"==i.currentStatus)}}function ht(t,a){if(1&t&&(e.qex(0),e.DNE(1,mt,4,6,"span",4)(2,bt,5,4,"ng-template",null,0,e.C5r),e.bVm()),2&t){const i=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",n.currentQuestionTagName)("ngIfElse",i)}}let vt=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.sAztChangeObjectiveTagForQuestionService=(0,e.WQX)(q.I),this.sAztQuestionTagService=(0,e.WQX)(he.c),this.sAztControlSuggestionKnowledgeUnitService=(0,e.WQX)(L.f),this.sAztListenQuestionTagChangesService=(0,e.WQX)(Z.c),this.questionTags=[],this.currentStatus=void 0}setTag(n){this.questionObj=this.sAztChangeObjectiveTagForQuestionService.changeTagForTrueFalseQuestion(this.questionObj,this.currentAnswerKey,n),this.sAztListenQuestionTagChangesService.sendSetTagEvent({questionType:"true_false_question",tagType:"CURRENT_ANSWER",questionObj:this.questionObj,questionViewObj:void 0,answerKey:void 0,questionIndex:void 0,tagObjs:n}),this.initData()}suggestionTag(){if(this.currentQuestionTagName)return;this.currentStatus="loadingSuggestion";let n={questionId:this.questionObj.id,questionContent:this.questionObj.content??"",answerContents:this.questionObj.answers.filter(o=>this.commonService.compareLowerCase(o.key,this.currentAnswerKey)).map(o=>o.content),levelId:this.levelId,subjectId:this.subjectId,ebankId:void 0};this.sAztControlSuggestionKnowledgeUnitService.callApiToGuestKnowledge(!0,n,(o,s,l)=>{let _=this.questionTags.find(k=>k.id==l);_&&this.setTag([_]),this.currentStatus=void 0},o=>{this.currentStatus="lang_core_need_vip_upgrade"==o?"vipRequired":"callApiFail"})}initData(){this.viewQuestionTags=this.sAztQuestionTagService.formatTag(this.questionTags),this.currentQuestionTagName=this.sAztQuestionTagService.findCurrentTag(this.questionTags,this.questionObj.configAnswers,this.currentAnswerKey),this.currentQuestionTagName&&(this.currentStatus=void 0)}ngOnChanges(){this.sAztQuestionTagService.getQuestionTags().subscribe(n=>{this.questionTags=n,this.initData()})}ngOnInit(){this.sAztQuestionTagService.getQuestionTags().subscribe(n=>{this.questionTags=n,this.initData(),this.suggestionTag()})}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-admin-true-false-question-tag-in-analyze-tool"]],inputs:{questionObj:"questionObj",currentAnswerKey:"currentAnswerKey",levelId:"levelId",subjectId:"subjectId"},features:[e.Vt3,e.OA$],decls:3,vars:2,consts:[["notHaveQuestionTag",""],["class","ml-3",3,"size",4,"ngIf"],[4,"ngIf"],[1,"ml-3",3,"size"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center","style","max-width: 100px",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",2,"max-width","100px",3,"matTooltip"],[1,"flex","items-center"],[1,"text-danger"],["size","16","class","text-warning ml-2","name","octagon-alert",3,"matTooltip",4,"ngIf"],["size","16","name","octagon-alert",1,"text-warning","ml-2",3,"matTooltip"]],template:function(n,o){1&n&&(e.j41(0,"span"),e.DNE(1,gt,1,1,"azt-loading-ui",1)(2,ht,4,2,"ng-container",2),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf","loadingSuggestion"==o.currentStatus),e.R7$(),e.Y8G("ngIf","callApiFail"==o.currentStatus||"vipRequired"==o.currentStatus||null==o.currentStatus))},dependencies:[c.bT,H.oV,g.WGl,x.R,u.wp],encapsulation:2}),a})();const Ct=t=>({"skeleton-box-loading":t}),jt=t=>({"pb-2":t}),Tt=t=>({flex:t}),Ot=t=>({"flex-wrap":t}),wt=t=>({"padding-mobile":t});function xt(t,a){if(1&t&&e.nrm(0,"div",3),2&t){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,Ct,i.renderConfigObj.isFirstRender))}}function kt(t,a){if(1&t&&(e.j41(0,"div",20),e.nrm(1,"azt-dynamic-hook",15),e.k0s()),2&t){let i;const n=e.XpG(2);e.R7$(),e.Y8G("content",null!==(i=null==n.question.groupInfo?null:n.question.groupInfo.groupContent)&&void 0!==i?i:"")}}function It(t,a){if(1&t&&e.nrm(0,"azt-test-audio-ui",21),2&t){const i=e.XpG(2);e.Y8G("questionObj",i.question)("isShowList",!0)}}function At(t,a){if(1&t&&(e.j41(0,"div",22),e.nrm(1,"azt-admin-common-question-tag-in-analyze-tool",23),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("levelId",i.levelId)("subjectId",i.subjectId)("questionObj",i.question)("currentQuestionTags",i.question.tags)("useQuestionIdToSuggestion",!0)}}function St(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",32)(7,"azt-admin-true-false-question-knowledge-unit-to-auto-suggestion",33),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const s=e.XpG(4);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.j41(8,"div",34)(9,"div",35)(10,"span",36),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",37),e.nrm(14,"azt-admin-true-false-question-tag-in-analyze-tool",38),e.k0s()()()()()()}if(2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(16,wt,n.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(5,12,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("levelId",n.levelId)("subjectId",n.subjectId)("ngClass",n.isMobileDevice?"w-full":"")("questionObj",n.question)("currentAnswerKey",i.key),e.R7$(4),e.SpI("",e.bMT(12,14,"lang_auto_gan_nhan"),":"),e.R7$(3),e.Y8G("levelId",n.levelId)("subjectId",n.subjectId)("questionObj",n.question)("currentAnswerKey",i.key)}}function yt(t,a){if(1&t&&(e.j41(0,"div",26),e.nI1(1,"isTrueFalseAnswer"),e.j41(2,"b",27),e.EFF(3),e.nI1(4,"isTrueFalseAnswer"),e.k0s(),e.nrm(5,"azt-dynamic-hook",15),e.DNE(6,St,15,18,"div",28),e.nI1(7,"isTrueFalseAnswer"),e.k0s()),2&t){let i;const n=a.$implicit,o=e.XpG(3);e.Y8G("ngStyle",e.eq3(10,Ot,e.bMT(1,4,o.question)?"wrap":"")),e.R7$(3),e.JRh(e.bMT(4,6,o.question)?(null!==(i=n.alpha)&&void 0!==i?i:n.key).toLowerCase()+")":(null!==(i=n.alpha)&&void 0!==i?i:n.key)+"."),e.R7$(2),e.Y8G("content",n.content),e.R7$(),e.Y8G("ngIf",e.bMT(7,8,o.question))}}function Et(t,a){if(1&t&&(e.j41(0,"div",24),e.DNE(1,yt,8,12,"div",25),e.k0s()),2&t){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",i.question.answersOrigin)}}function zt(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",39)(1,"div",31)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",32)(6,"azt-admin-common-question-knowledge-unit-to-auto-suggestion",40),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.selectKnowledgeEmit.emit(o))}),e.k0s()()()}if(2&t){const i=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("questionObj",i.question)("levelId",i.levelId)("subjectId",i.subjectId)}}function Ft(t,a){if(1&t&&(e.j41(0,"div",4)(1,"div",5),e.DNE(2,kt,2,1,"div",6),e.j41(3,"div",7),e.DNE(4,It,1,2,"azt-test-audio-ui",8),e.j41(5,"div",9)(6,"div",10)(7,"div",10)(8,"div",11),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-select",12)(12,"mat-option",13),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"mat-option",13),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"mat-option",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"mat-option",13),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()(),e.DNE(24,At,2,5,"div",14),e.nI1(25,"isTrueFalseAnswer"),e.k0s()(),e.nrm(26,"azt-dynamic-hook",15),e.k0s(),e.DNE(27,Et,2,2,"div",16),e.nI1(28,"isOneChoiceAnswer"),e.nI1(29,"isTrueFalseAnswer"),e.j41(30,"div",17),e.nrm(31,"azt-question-answer-view-with-simple-result-box-for-teacher",18),e.k0s(),e.DNE(32,zt,7,6,"div",19),e.nI1(33,"isTrueFalseAnswer"),e.k0s()()),2&t){let i;const n=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),e.Y8G("id","question_render_container_"+n.question.id)("ngClass",e.eq3(45,jt,n.question.attachments.length>0)),e.R7$(),e.Y8G("ngIf",null==n.question.groupInfo?null:n.question.groupInfo.isFirstInGroup),e.R7$(2),e.Y8G("ngIf",n.question.attachments.length>0),e.R7$(),e.Y8G("ngClass",e.eq3(47,Tt,!n.isMobileDevice)),e.R7$(4),e.SpI(" ",e.bMT(10,27,"lang_auto_cau")+" "+(null!=n.question.labelIndex?n.question.labelIndex:n.index+1)," "),e.R7$(2),e.Y8G("ngModel",n.question.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(14,29,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(17,31,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(20,33,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(23,35,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",!e.bMT(25,37,n.question)),e.R7$(2),e.Y8G("content",null!==(i=n.question.content)&&void 0!==i?i:""),e.R7$(),e.Y8G("ngIf",(e.bMT(28,39,n.question)||e.bMT(29,41,n.question))&&n.question.answers&&n.question.answers.length>0),e.R7$(4),e.Y8G("questionObj",n.question),e.R7$(),e.Y8G("ngIf",!e.bMT(33,43,n.question))}}let Rt=(()=>{var t;class a extends ge.I{constructor(){super(...arguments),this.follower=new M.e,this.selectKnowledgeEmit=new e.bkB}ngOnInit(){super.ngOnInit();let n=new me.C(!0,!1,!1);super.initData(n,this.follower,this.question)}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-admin-objective-analyze-tool"]],inputs:{currentQuestionObjs:"currentQuestionObjs",question:"question",index:"index",levelId:"levelId",subjectId:"subjectId",follower:"follower"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container-ebank","p-3","border-none",3,"id","ngClass"],["class","group-content-of-question-standalone",4,"ngIf"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"items-center",3,"ngClass"],[1,"flex","items-center"],[1,"question-standalone-label","whitespace-nowrap","mr-2"],[3,"ngModel","disabled"],[3,"value"],["class","ml-3",4,"ngIf"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex"],[3,"questionObj"],["class","box-help p-2",4,"ngIf"],[1,"group-content-of-question-standalone"],[3,"questionObj","isShowList"],[1,"ml-3"],[3,"levelId","subjectId","questionObj","currentQuestionTags","useQuestionIdToSuggestion"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",3,"ngStyle",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6",3,"ngStyle"],[1,"answer-label"],["class","w-full",4,"ngIf"],[1,"w-full"],[1,"box-help",2,"margin-top","20px",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","levelId","subjectId","ngClass","questionObj","currentAnswerKey"],[1,"flex","mt-2"],[1,"items-center"],[2,"vertical-align","middle"],[1,"ml-2"],[3,"levelId","subjectId","questionObj","currentAnswerKey"],[1,"box-help","p-2"],[3,"selectKnowledgeEmit","questionObj","levelId","subjectId"]],template:function(n,o){if(1&n&&(e.j41(0,"div",1),e.DNE(1,xt,1,3,"div",2)(2,Ft,34,49,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("id","question_render_element_"+o.question.id),e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,c.B3,Q.wT,N.VO,r.BC,r.vS,V.N,Ke.c,fe.C,Qe.l,Y.x,We,lt,pt,vt,u.wp,u.V6,u.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),a})();function Mt(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Gt(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",10)(2,"azt-question-standalone-for-admin-objective-analyze-tool",11),e.bIt("selectKnowledgeEmit",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.selectKnowledgeEmit(o))}),e.k0s()(),e.bVm()}if(2&t){const i=a.$implicit,n=a.index,o=e.XpG(2);e.R7$(2),e.Y8G("levelId",o.levelId)("subjectId",o.subjectId)("currentQuestionObjs",o.questionObjs)("question",i)("index",n)("follower",o.followerRenderQuest)}}function Dt(t,a){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"h3",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"h3",8),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"div",7)(10,"h3",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()(),e.DNE(13,Gt,3,6,"ng-container",9)),2&t){const i=e.XpG();e.R7$(3),e.JRh(e.bMT(4,8,"lang_core_analyze_objective_for_question")),e.R7$(4),e.E5c("",e.bMT(8,10,"lang_core_analyze_objective_for_question_success"),": ",i.totalObjectiveAnalyze,"/",i.totalAnalyze,""),e.R7$(4),e.E5c("",e.bMT(12,12,"lang_core_analyze_difficulty_for_question_success"),": ",i.totalTagAnalyze,"/",i.totalAnalyze,""),e.R7$(2),e.Y8G("ngForOf",i.questionObjs)}}let Bt=(()=>{var t;class a extends f.H{calculateTotalObjectiveAnalyze(){this.totalObjectiveAnalyze=0,this.questionObjs.forEach(n=>{!this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(n.objectiveId||n.knowledgeId)&&this.totalObjectiveAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(this.totalObjectiveAnalyze+=n.configAnswers.filter(o=>o.objectiveId||o.knowledgeId).length)})}calculateTotalTagAnalyze(){this.totalTagAnalyze=0,this.questionObjs.forEach(n=>{!this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(n.objectiveId||n.knowledgeId)&&this.totalTagAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(n)&&(this.totalTagAnalyze+=n.configAnswers.filter(o=>o.tagId).length)})}selectKnowledgeEmit(n){this.calculateTotalObjectiveAnalyze()}getDataExamObj(n){this.waitDestroy(this.adminExamService.apiAdminExamGetQuestionsOfExamIdGet(n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],s=>{this.questionObjs=s,this.questionObjs.forEach(l=>{this.sAztAnswerTypeService.isTrueFalseAnswer(l)||this.totalAnalyze++,this.sAztAnswerTypeService.isTrueFalseAnswer(l)&&(this.totalAnalyze+=l.answers.length)}),this.calculateTotalObjectiveAnalyze(),this.calculateTotalTagAnalyze(),this.stopStatusObj()})}))}loadQuest(n,o){const s=this.commonService.castJsonToClassObjs($.I,JSON.stringify(n));this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>o(l)).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s??[])})}ngOnInit(){this.initStatusObj(),this.waitDestroy((0,_e.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{const n=Number(this.commonService.getMyParam(this.activeRoute,"examId")??0);this.levelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.subjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.getDataExamObj(n)})),this.waitDestroy(this.sAztListenQuestionTagChangesService.listenSetTagEventOfAllQuestions().subscribe(n=>this.calculateTotalTagAnalyze()))}constructor(n,o,s){super(),this.adminExamService=n,this.activeRoute=o,this.sAztAnswerTypeService=s,this.backTo="/azota-tools/auto-suggestion-for-exams",this.questionRenderService=(0,e.WQX)(K.g),this.configRenderService=new P.y(!0),this.sAztListenQuestionTagChangesService=(0,e.WQX)(Z.c),this.followerRenderQuest=new M.e,this.questionObjs=[],this.totalAnalyze=0,this.totalObjectiveAnalyze=0,this.totalTagAnalyze=0,this.levelId=0,this.subjectId=0}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(de.g0),e.rXU(m.nX),e.rXU(pe._))},t.\u0275cmp=e.VBU({type:t,selectors:[["auto-suggestion-for-one-exam"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"flex","flex-col","sm:flex-row","sm:items-center","mt-2"],[1,"text-md","font-medium","mr-4"],[4,"ngFor","ngForOf"],[1,"box","mt-5"],[3,"selectKnowledgeEmit","levelId","subjectId","currentQuestionObjs","question","index","follower"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",1),e.DNE(1,Mt,1,1,"azt-loading-effect",2)(2,Dt,14,14,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.Sq,c.bT,T.K,Rt,A.Q,u.wp],encapsulation:2}),a})();var ee=d(75421),C=d(89163),z=d(33887),j=d(26549);const Pt=()=>({"ml-2":!0});function $t(t,a){1&t&&e.nrm(0,"azt-loading-ui",8),2&t&&e.Y8G("size",16)("ngClass",e.lJ4(2,Pt))}let Kt=(()=>{var t;class a extends z._{handelCloseDialog(){this.dialogRef.close(!1)}handelSubmit(){if(this.content.invalid)return this.content.markAllAsTouched();this.initStatusObj(),this.waitDestroy(this.commonService.wrapApiResponse(this.elearningBookService.aiApiV1ElearningBookInsertElearningBookContentsPost({bookId:this.data.id,data:this.content.value})).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.dialogRef.close(!0),this.successStatusObj("lang_auto_them_thanh_cong",!0)}))}ngOnInit(){}constructor(n,o,s){super(s,o),this.elearningBookService=n,this.dialogRef=o,this.content=new r.MJ("",{nonNullable:!0,validators:r.k0.required})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(j.UC),e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["add-book-content-dialog"]],features:[e.Vt3],decls:16,vars:14,consts:[[1,"box"],[1,"text-base","font-medium","p-3","pb-0"],[1,"p-3"],["id","book-content",1,"form-control","w-full","h-full",2,"height","350px",3,"placeholder","formControl"],[1,"flex","items-center","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","min-width-100","ml-auto",3,"click"],[1,"btn","btn-primary","min-width-100","ml-3",3,"click"],[3,"size","ngClass",4,"ngIf"],[3,"size","ngClass"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",2),e.nrm(5,"textarea",3),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",4)(8,"button",5),e.bIt("click",function(){return o.handelCloseDialog()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return o.handelSubmit()}),e.j41(12,"span"),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,$t,1,3,"azt-loading-ui",7),e.k0s()()()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_azt_add_book_content")," "),e.R7$(3),e.FS9("placeholder",e.bMT(6,8,"lang_auto_nhap_noi_dung")+"..."),e.Y8G("formControl",o.content),e.R7$(4),e.SpI(" ",e.bMT(10,10,"lang_auto_dong")," "),e.R7$(4),e.JRh(e.bMT(14,12,"lang_auto_xac_nhan")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading))},dependencies:[c.YU,c.bT,r.me,r.BC,r.l_,x.R,u.wp],encapsulation:2}),a})();var F=d(46899),ve=d(52909),te=d(50334);const Ce=t=>({nodeObjs:t}),Qt=t=>({"padding-left":t}),Nt=t=>({"font-medium":t}),Vt=()=>({"mr-2":!0});function Yt(t,a){1&t&&e.eu8(0)}function qt(t,a){if(1&t&&(e.j41(0,"div",5)(1,"ng-scrollbar",6,2),e.DNE(3,Yt,1,0,"ng-container",7),e.k0s()()),2&t){e.XpG();const i=e.sdS(3);e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngTemplateOutlet",i)}}function Lt(t,a){1&t&&e.eu8(0)}function Xt(t,a){if(1&t&&(e.j41(0,"div",8),e.DNE(1,Lt,1,0,"ng-container",7),e.k0s()),2&t){e.XpG();const i=e.sdS(3);e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function Ut(t,a){1&t&&e.eu8(0)}function Jt(t,a){if(1&t&&(e.j41(0,"div",9),e.DNE(1,Ut,1,0,"ng-container",10),e.k0s()),2&t){const i=e.XpG(),n=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,Ce,i.nodeObjs))}}function Wt(t,a){1&t&&e.nrm(0,"lucide-icon",22)}function Ht(t,a){1&t&&e.nrm(0,"lucide-icon",23)}function Zt(t,a){if(1&t){const i=e.RV6();e.j41(0,"i",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(o))}),e.DNE(1,Wt,1,0,"lucide-icon",20)(2,Ht,1,0,"lucide-icon",21),e.k0s()}if(2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!i.isExpand),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function en(t,a){1&t&&e.nrm(0,"lucide-icon",24),2&t&&e.Y8G("ngClass",e.lJ4(1,Vt))}function tn(t,a){1&t&&e.eu8(0)}function nn(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",25),e.DNE(2,tn,1,0,"ng-container",10),e.k0s(),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,Ce,i.children))}}function on(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14),e.DNE(3,Zt,3,2,"i",15),e.j41(4,"label",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(o))}),e.DNE(5,en,1,2,"lucide-icon",17),e.nrm(6,"span",18),e.nI1(7,"mathJaxContent"),e.nI1(8,"async"),e.nI1(9,"safeContentQuestion"),e.k0s()(),e.DNE(10,nn,3,4,"ng-container",11),e.k0s(),e.bVm()}if(2&t){const i=a.$implicit;e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.yjJ("id","node-",i.randomHashId,"-",i.level,"-",i.nodeIndex,""),e.Y8G("ngStyle",e.eq3(17,Qt,12*i.level+"px")),e.R7$(),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngClass",e.eq3(19,Nt,0===i.level)),e.R7$(),e.Y8G("ngIf","objective"==i.typeNode),e.R7$(),e.Y8G("innerHTML",e.bMT(9,15,e.bMT(8,13,e.bMT(7,11,i.text))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}function sn(t,a){if(1&t&&(e.qex(0),e.DNE(1,on,11,21,"ng-container",12),e.bVm()),2&t){const i=a.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function an(t,a){if(1&t&&e.DNE(0,sn,2,1,"ng-container",11),2&t){const i=a.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let ln=(()=>{var t;class a extends te.C{constructor(){super(...arguments),this.nodeObjs=[],this.uuidService=(0,e.WQX)(ve.D)}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let s=[];return this.convertTreeWithObjectivesToNodes(n).forEach((_,k)=>{let Ie={level:o,typeNode:_.nodes.length?"knowledge":"objective",isExpand:!0,isShow:!0,nodeIndex:k,selected:!1,randomHashId:this.uuidService.getUuid(),text:_.title,data:{..._,nodes:[]},nodes:[],children:[]};Ie.children=this.standardTreeNodes(_.nodes,o+1),s.push(Ie)}),s}convertTreeWithObjectivesToNodes(n){return n.map(o=>{const s=[...o.nodes.map(l=>({...l,nodes:this.convertTreeWithObjectivesToNodes(l.nodes)})),...o.objectives.map((l,_)=>({id:l.objectiveId,title:l.title,position:_+1,nodes:[],objectives:[]}))];return{...o,nodes:s}})}removeOneNodeById(n,o){return(n=n.filter(s=>s.randomHashId!=o.randomHashId)).forEach(s=>s.nodes=this.removeOneNodeById(s.nodes,o)),n}ngOnChanges(n){n.rawNodes&&(this.nodeObjs=this.standardTreeNodes(this.rawNodes,0))}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-book-detail-tree-component"]],inputs:{rawNodes:"rawNodes",useScrollBar:"useScrollBar"},features:[e.Vt3,e.OA$],decls:6,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["perfectScroll",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf"],["class","relative",4,"ngIf"],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[4,"ngTemplateOutlet"],[1,"relative"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[2,"line-height","1.6",3,"click","ngClass"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(n,o){1&n&&e.DNE(0,qt,4,2,"div",3)(1,Xt,2,1,"div",4)(2,Jt,2,4,"ng-template",null,0,e.C5r)(4,an,1,1,"ng-template",null,1,e.C5r),2&n&&(e.Y8G("ngIf",o.useScrollBar),e.R7$(),e.Y8G("ngIf",!o.useScrollBar))},dependencies:[c.YU,c.Sq,c.bT,c.T3,c.B3,p.Yh,g.WGl,c.Jj,u.km,u.ep],encapsulation:2}),a})();const rn=(t,a)=>({"bg-success":t,"bg-slate-500":a});function cn(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",4),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function dn(t,a){if(1&t&&(e.qex(0),e.nrm(1,"app-book-detail-tree-component",18),e.bVm()),2&t){const i=e.XpG(3);e.R7$(),e.Y8G("rawNodes",i.bookDetail.nodes)("useScrollBar",!1)}}function un(t,a){1&t&&(e.j41(0,"div",19),e.nrm(1,"lucide-icon",20),e.j41(2,"div",21),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"lang_auto_khong_co_du_lieu")," "))}function _n(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",7)(3,"h3",8),e.EFF(4),e.k0s(),e.j41(5,"div",9)(6,"span"),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"button",10),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.removeBookDetail())}),e.nrm(10,"lucide-icon",11),e.k0s()(),e.j41(11,"div",12)(12,"button",13),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.addBookContent())}),e.nrm(13,"lucide-icon",14),e.j41(14,"span",15),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()(),e.j41(17,"div",16),e.DNE(18,dn,2,2,"ng-container",17)(19,un,5,3,"ng-template",null,1,e.C5r),e.k0s()()}if(2&t){const i=e.sdS(20),n=e.XpG(2);e.R7$(4),e.JRh(n.bookDetail.title),e.R7$(),e.Y8G("ngClass",e.l_i(10,rn,n.bookDetail.isActive,!n.bookDetail.isActive)),e.R7$(2),e.JRh(e.bMT(8,6,n.bookDetail.isActive?"lang_auto_hoat_dong":"lang_core_khong_hoat_dong")),e.R7$(8),e.JRh(e.bMT(16,8,"lang_azt_add_book_content")),e.R7$(3),e.Y8G("ngIf",n.bookDetail.nodes.length)("ngIfElse",i)}}function pn(t,a){if(1&t&&e.DNE(0,_n,21,13,"div",5),2&t){const i=e.XpG();e.Y8G("ngIf",i.bookDetail)}}let gn=(()=>{var t;class a extends f.H{addBookContent(){this.sAztDialogService.open(Kt,{data:{id:this.bookId},width:"1000px"}).afterClosed().subscribe(o=>{o&&this.getBookDetail(this.bookId)})}removeBookDetail(){const n={content:`<span class="font-medium">${this.commonService.myTranslateInstant("lang_azt_deleting_data_will_cause_errors_with_questions_created_from_the_matrix_based_on_the_above_book")}!</span>`,iconName:"trash-2",textConfirm:"OK"};this.sAztDialogService.open(ee.u,{data:n,width:"500px"}).afterClosed().subscribe(o=>{o&&this.callApiRemoveBook(this.bookId)})}getBookDetail(n){this.initStatusObj(),this.waitDestroy(this.elearningBookService.aiApiV1ElearningBookGetElearningBookContentsGet(n).subscribe({next:o=>{this.bookDetail=o,this.successStatusObj()},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}callApiRemoveBook(n){this.waitDestroy(this.elearningBookService.aiApiV1ElearningBookDeleteElearningBookContentsDelete(n).subscribe({next:()=>{this.showSuccessSnack("lang_admin_guide_delete_success"),this.getBookDetail(this.bookId)},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}ngOnInit(){this.bookId=Number(this.getMyParam(this.activatedRoute,"bookId")??0),this.headerBackTo=this.getMyQueryParam("backto")??"/azota-tools/book-management",this.getBookDetail(this.bookId)}constructor(n,o,s){super(),this.elearningBookService=n,this.activatedRoute=o,this.sAztDialogService=s,this.headerBackTo="",this.bookId=0}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(j.UC),e.rXU(m.nX),e.rXU(F.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-book-detail"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["emptyNode",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","mt-8",4,"ngIf"],[1,"mt-8"],[1,"flex","items-center"],[1,"text-lg","font-medium","mr-2"],[1,"py-1","px-2","rounded-full","text-xs","text-white","font-medium",3,"ngClass"],[1,"btn","btn-sm","p-1","btn-danger-soft","ml-2",3,"click"],["name","trash-2","size","18"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],["name","plus","size","16"],[1,"ml-2"],[1,"box","p-3","mt-5"],[4,"ngIf","ngIfElse"],[3,"rawNodes","useScrollBar"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","300px"],["name","list-tree","size","90",1,"mx-auto"],[1,"text-lg","font-medium"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",2),e.DNE(1,cn,1,1,"azt-loading-effect",3)(2,pn,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink",o.headerBackTo),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.bT,T.K,A.Q,g.WGl,ln,u.wp],encapsulation:2}),a})();function mn(t,a){1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}let fn=(()=>{var t;class a extends z._{callApiSave(){this.initStatusObj();let n={id:this.bookData?.id??0,title:this.titleControl.value,schoolSubjectId:this.form.controls.schoolSubject.value,schoolLevelId:this.form.controls.schoolLevel.value,isActive:this.activeControl.value?1:0},o=this.data.isUpdate?this.elearningBookService.aiApiV1ElearningBookUpdateElearningBookPost(n):this.elearningBookService.aiApiV1ElearningBookInsertElearningBookPost(n);this.waitDestroy(this.wrapApiResponse(o).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message??"lang_core_invalid_data",!0);this.dialogRef.close(!0),this.successStatusObj()}))}ngOnInit(){super.ngOnInit()}constructor(n,o,s){super(s,o),this.elearningBookService=n,this.dialogRef=o,this.bookData=this.data.bookData,this.form=new r.gE({schoolLevel:new r.MJ(this.data.levelId,{nonNullable:!0}),schoolSubject:new r.MJ(this.data.subjectId,{nonNullable:!0})}),this.titleControl=new r.MJ(this.bookData?.title??"",{nonNullable:!0,validators:[r.k0.required]}),this.activeControl=new r.MJ(this.bookData?.isActive??0,{nonNullable:!0})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(j.UC),e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["add-edit-book-dialog"]],features:[e.Vt3],decls:28,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","relative","p-3","intro-y"],[1,"overflow-auto","relative"],[1,"font-medium","text-lg","mb-2"],[1,"p-5","pt-0"],[1,"items-center","w-full","mt-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[1,"mt-3"],["for","titleBook",1,"form-label","font-bold"],["type","text","id","titleBook",1,"form-control",3,"formControl","value"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"form-check","form-switch"],["id","active-control","type","checkbox",1,"form-check-input","mr-2",3,"formControl","value"],["for","active-control",1,"form-check-label","ml-0"],[1,"p-3","text-right"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"text-xs","text-danger","mt-1"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",4)(7,"div",5),e.nrm(8,"config-level-subject-book",6),e.k0s(),e.j41(9,"div",7)(10,"label",8),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.nrm(13,"input",9),e.DNE(14,mn,3,3,"div",10),e.k0s(),e.j41(15,"div",7)(16,"div",11),e.nrm(17,"input",12),e.j41(18,"label",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()(),e.j41(21,"div",14)(22,"button",15),e.bIt("click",function(){return o.dialogRef.close()}),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"button",16),e.bIt("click",function(){return o.callApiSave()}),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()),2&n&&(e.R7$(4),e.SpI(" ",e.bMT(5,16,o.data.isUpdate?"Ch\u1ec9nh s\u1eeda s\xe1ch":"Th\xeam m\u1edbi s\xe1ch")," "),e.R7$(4),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useFirstAsDefault",!0)("layout","default"),e.R7$(3),e.SpI(" ",e.bMT(12,18,"Ti\xeau \u0111\u1ec1 s\xe1ch")," "),e.R7$(2),e.Y8G("formControl",o.titleControl)("value",o.titleControl.value),e.R7$(),e.Y8G("ngIf",o.titleControl.dirty&&o.titleControl.errors),e.R7$(3),e.Y8G("formControl",o.activeControl)("value",!!o.activeControl.value),e.R7$(2),e.SpI(" ",o.activeControl.value?"Ho\u1ea1t \u0111\u1ed9ng":e.bMT(20,20,"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng")," "),e.R7$(4),e.SpI(" ",e.bMT(24,22,"lang_button_cancel")," "),e.R7$(2),e.Y8G("disabled",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(27,24,o.data.isUpdate?"lang_button_save":"lang_button_confirm")," "))},dependencies:[c.bT,r.me,r.Zm,r.BC,r.l_,D.X,u.wp],encapsulation:2}),a})();const bn=(t,a)=>({"w-full":t,"w-32 ml-2":a});function hn(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",14),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function vn(t,a){1&t&&(e.qex(0),e.j41(1,"tr")(2,"td",24)(3,"p",25)(4,"span",26),e.EFF(5),e.k0s()()()(),e.bVm()),2&t&&(e.R7$(5),e.JRh("Ch\u01b0a c\xf3 \u0111\u1ea7u m\u1ee5c s\xe1ch n\xe0o v\u1edbi kh\u1ed1i - m\xf4n h\u1ecdc \u0111\xe3 ch\u1ecdn!"))}function Cn(t,a){1&t&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"Ho\u1ea1t \u0111\u1ed9ng")))}function jn(t,a){1&t&&(e.j41(0,"span",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng")))}function Tn(t,a){if(1&t){const i=e.RV6();e.j41(0,"tr")(1,"td")(2,"p",25)(3,"span",26),e.EFF(4),e.k0s()()(),e.j41(5,"td")(6,"p",25)(7,"span",26),e.EFF(8),e.k0s()()(),e.j41(9,"td")(10,"p",25),e.DNE(11,Cn,3,3,"span",28)(12,jn,3,3,"span",28),e.k0s()(),e.j41(13,"td")(14,"div",29)(15,"button",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.redirectToBookDetail(o))}),e.nrm(16,"lucide-icon",31),e.j41(17,"span",12),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"button",32),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.addOrEditBook(o))}),e.nrm(21,"lucide-icon",33),e.j41(22,"span",12),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()()}if(2&t){const i=a.$implicit;e.R7$(4),e.JRh(i.id),e.R7$(4),e.JRh(i.title),e.R7$(3),e.Y8G("ngIf",i.isActive),e.R7$(),e.Y8G("ngIf",!i.isActive),e.R7$(6),e.JRh(e.bMT(19,6,"lang_common_view")),e.R7$(5),e.JRh(e.bMT(24,8,"lang_auto_sua"))}}function On(t,a){if(1&t&&e.DNE(0,Tn,25,10,"tr",27),2&t){const i=e.XpG(2);e.Y8G("ngForOf",i.bookList)}}function wn(t,a){if(1&t&&(e.j41(0,"div",15)(1,"div",16)(2,"table",17)(3,"thead",18)(4,"tr")(5,"th",19),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"th",20),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"th",21),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"th",22),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,vn,6,1,"ng-container",23)(19,On,1,1,"ng-template",null,1,e.C5r),e.k0s()()()()),2&t){const i=e.sdS(20),n=e.XpG();e.R7$(6),e.SpI(" ",e.bMT(7,6,"ID")," "),e.R7$(3),e.SpI(" ",e.bMT(10,8,"T\xean s\xe1ch")," "),e.R7$(3),e.SpI(" ",e.bMT(13,10,"Tr\u1ea1ng th\xe1i")," "),e.R7$(3),e.SpI(" ",e.bMT(16,12,"lang_auto_hanh_dong")," "),e.R7$(3),e.Y8G("ngIf",!n.bookList.length)("ngIfElse",i)}}let je=(()=>{var t;class a extends f.H{changeData(){this.myNavigation(`/azota-tools/book-management/${this.form.controls.schoolLevel.value}/${this.form.controls.schoolSubject.value}`)}addOrEditBook(n){this.sAztDialogService.open(fn,{width:"750px",data:{isUpdate:!!n,bookData:n,levelId:this.form.controls.schoolLevel.value,subjectId:this.form.controls.schoolSubject.value},restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.getBookList()})}redirectToBookDetail(n){n&&this.myNavigationWithQueryString(`/azota-tools/book-detail/${n.id}`,`?backto=/azota-tools/book-management/${this.form.controls.schoolLevel.value}/${this.form.controls.schoolSubject.value}`)}getBookList(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.elearningBookService.aiApiV1ElearningBookSearchElearningBookPost({schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value})).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.bookList=n.data??[],this.successStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,_e.z)([this.activatedRoute.params,this.activatedRoute.queryParams]).subscribe(([])=>{const n=Number(this.getMyParam(this.activatedRoute,"levelId")??12),o=Number(this.getMyParam(this.activatedRoute,"subjectId")??40);this.form.patchValue({schoolLevel:n,schoolSubject:o}),this.getBookList()}))}constructor(n,o,s){super(),this.elearningBookService=n,this.sAztDialogService=o,this.activatedRoute=s,this.bookList=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(j.UC),e.rXU(F.i),e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["book-management"]],features:[e.Vt3],decls:18,vars:18,consts:[["doneLoading",""],["hasBook",""],[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","flex-col","sm:flex-row","items-center"],[1,"text-xl","font-medium","mr-auto"],[1,"mt-2"],[1,"w-full","flex","justify-between","box","p-3"],[1,"items-center","w-full","sm:w-auto","mt-3","sm:mt-0"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[1,"btn","btn-success","text-white",3,"click","ngClass"],["name","plus","size","18"],[1,"ml-2"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6","mt-2"],[1,"intro-y","col-span-12","overflow-auto"],[1,"table","table-report","mt-2","table-sticky","overflow-auto",2,"min-width","1200px"],[1,"box"],[1,"whitespace-nowrap",2,"width","220px"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap",2,"width","280px"],[1,"whitespace-nowrap","text-center",2,"width","220px"],[4,"ngIf","ngIfElse"],["colspan","4",1,"text-center"],[1,"mb-0","whitespace-nowrap"],[1,"font-medium"],[4,"ngFor","ngForOf"],["class","font-medium",4,"ngIf"],[1,"flex","items-center"],[1,"btn","btn-sm","btn-success-soft","mr-3",3,"click"],["name","eye","size","18"],[1,"btn","btn-sm","btn-primary-soft",3,"click"],["name","square-pen","size","18"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"teacher-layout",2)(1,"div",3)(2,"div",4)(3,"h3",5),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"config-level-subject-book",9),e.bIt("changeDataEvent",function(){return e.eBV(s),e.Njj(o.changeData())}),e.k0s()(),e.j41(10,"button",10),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addOrEditBook())}),e.nrm(11,"lucide-icon",11),e.j41(12,"span",12),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()(),e.DNE(15,hn,1,1,"azt-loading-effect",13)(16,wn,21,14,"ng-template",null,0,e.C5r),e.k0s()()}if(2&n){const s=e.sdS(17);e.Y8G("headerBackToLink","/super-role/admin-tool"),e.R7$(4),e.SpI(" ",e.bMT(5,11,"Danh m\u1ee5c s\xe1ch")," "),e.R7$(5),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!1)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngClass",e.l_i(15,bn,o.isMobileDevice,!o.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(14,13,"Th\xeam s\xe1ch")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,T.K,D.X,A.Q,g.WGl,u.wp],encapsulation:2}),a})();var xn=d(14846);function kn(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function In(t,a){if(1&t&&(e.j41(0,"p")(1,"span",11),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"lang_core_mo_ta_loi")),e.R7$(2),e.SpI(" : ",i.lastMessage," ")}}function An(t,a){if(1&t&&(e.j41(0,"div",10)(1,"p")(2,"span",11),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"span",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"span",11),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"span",11),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.EFF(20),e.nI1(21,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(22,"p")(23,"span",11),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s(),e.EFF(26),e.nI1(27,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.j41(28,"p")(29,"span",11),e.EFF(30),e.nI1(31,"mytranslate"),e.k0s(),e.EFF(32),e.k0s(),e.j41(33,"p")(34,"span",11),e.EFF(35),e.nI1(36,"mytranslate"),e.k0s(),e.EFF(37),e.k0s(),e.DNE(38,In,5,4,"p",12),e.k0s()),2&t){const i=a.$implicit;e.R7$(3),e.JRh(e.bMT(4,15,"lang_core_m\xe3_tien_trinh")),e.R7$(2),e.SpI(" : ",i.code," "),e.R7$(3),e.JRh(e.bMT(9,17,"lang_core_ten_tien_trinh")),e.R7$(2),e.SpI(" : ",i.name," "),e.R7$(3),e.JRh(e.bMT(14,19,"lang_core_id_da_chay_duoc")),e.R7$(2),e.SpI(" : ",i.currentId," "),e.R7$(3),e.JRh(e.bMT(19,21,"lang_core_ngay_cap_nhat_cuoi")),e.R7$(2),e.SpI(" : ",e.bMT(21,23,i.updatedAt)," "),e.R7$(4),e.JRh(e.bMT(25,25,"lang_core_thoi_gian_du_kien_xong")),e.R7$(2),e.SpI(" : ",e.bMT(27,27,i.estimateEndAt)," "),e.R7$(4),e.JRh(e.bMT(31,29,"lang_auto_trang_thai")),e.R7$(2),e.SpI(" : ",i.status," "),e.R7$(3),e.JRh(e.bMT(36,31,"lang_core_so_luong_dang_xu_ly")),e.R7$(2),e.SpI(" : ",i.remainingItems," "),e.R7$(),e.Y8G("ngIf",i.lastMessage)}}function Sn(t,a){if(1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"h3",6),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",7)(6,"div",8),e.DNE(7,An,39,33,"div",9),e.k0s()()()),2&t){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,3,"lang_core_danh_sach_cac_tien_chinh_chay_ngam")," (",i.singleJobs.length,")"),e.R7$(4),e.Y8G("ngForOf",i.singleJobs)}}let yn=(()=>{var t;class a extends f.H{getSingleJob(){this.waitDestroy(this.wrapApiResponse(this.singleJobService.aiApiV1SingleJobGetAllSingleJobsGet()).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0),void setTimeout(()=>this.getSingleJob(),1e4);this.singleJobs=n.data??[],this.stopStatusObj(),setTimeout(()=>this.getSingleJob(),1e4)}))}ngOnInit(){this.initStatusObj(),this.getSingleJob()}constructor(n,o){super(),this.shareBankService=n,this.singleJobService=o,this.backTo="/super-role/admin-tool",this.singleJobs=[]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(xn.x),e.rXU(j.V$))},t.\u0275cmp=e.VBU({type:t,selectors:[["job-progress-management"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-3"],[1,"intro-y","h-full"],["class","box p-3 mt-5",4,"ngFor","ngForOf"],[1,"box","p-3","mt-5"],[1,"font-medium","text-slate-500"],[4,"ngIf"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",1),e.DNE(1,kn,1,1,"azt-loading-effect",2)(2,Sn,8,5,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.Sq,c.bT,T.K,A.Q,u.wp,u.bH],encapsulation:2}),a})();var En=d(27208);class X{constructor(){this.similarQuestionId=void 0,this.searchKeyword=""}isFilter(){return null!=this.similarQuestionId||""!=this.searchKeyword}}var Te=d(36318),ne=d(21263);let zn=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.questionRenderService=(0,e.WQX)(K.g),this.configRenderService=new P.y(!0),this.sAztDialogService=(0,e.WQX)(F.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(B.h),this.aiQuestionBankService=(0,e.WQX)(j.gK),this.questionService=(0,e.WQX)(ne.wP),this.activeRoute=(0,e.WQX)(m.nX),this.followerRenderQuest=new M.e,this.backTo="",this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.objectiveId=0,this.objs=[],this.totalSelectedCheckBox=0,this.totalQuestionsAreShow=0,this.filterObj=new X}checkAll(){this.objs.forEach(n=>n.selectedCheckBoxFormControl.setValue(!0)),this.selectedCheckBoxChange()}unCheckAll(){this.objs.forEach(n=>n.selectedCheckBoxFormControl.setValue(!1)),this.selectedCheckBoxChange()}selectedCheckBoxChange(){this.totalSelectedCheckBox=this.objs.filter(n=>n.isShow&&n.selectedCheckBoxFormControl.value).length,this.totalQuestionsAreShow=this.objs.filter(n=>n.isShow).length}rejectQuestions(n){let o={items:n.map(s=>({questionId:s.id,objectiveId:-1}))};n.forEach(s=>s.isRejecting=!0),this.waitDestroy(this.wrapApiResponse(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(o)).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0),void n.forEach(l=>l.isRejecting=!1);n.forEach(l=>(l.isShow=!1,l.isRejecting=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)}))}approvedThisQuestions(n,o){let s={items:n.map(l=>({questionId:l.id,objectiveId:o}))};n.forEach(l=>l.isApproving=!0),this.waitDestroy(this.wrapApiResponse(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(s)).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0),void n.forEach(_=>_.isApproving=!1);n.forEach(_=>(_.isShow=!1,_.isApproving=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)}))}approvedAllSelectedQuestions(n){this.approvedThisQuestions(this.objs.filter(o=>o.isShow&&o.selectedCheckBoxFormControl.value),n)}openEditObjectiveDialog(n){this.sAztDialogService.open(Te.G,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(s=>{s?.objectiveId&&this.approvedThisQuestions([n],s.objectiveId)})}openEditObjectiveForSelectedDialog(){this.sAztDialogService.open(Te.G,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{o?.objectiveId&&this.approvedAllSelectedQuestions(o.objectiveId)})}loadMoreQuestions(){this.followerRenderQuest=new M.e,this.initStatusObj();let n=this.aiQuestionBankService.aiApiV1QuestionBankGetNotManualAssignObjectiveQuestionsGet(this.objectiveId,50);this.filterObj.similarQuestionId&&(n=this.aiQuestionBankService.aiApiV1QuestionBankGetSimilarQuestionsInObjectiveGet(this.objectiveId,this.filterObj.similarQuestionId)),""!=this.filterObj.searchKeyword&&(n=this.aiQuestionBankService.aiApiV1QuestionBankSearchQuestionsByChatGptInObjectivePost({objectiveId:this.objectiveId,description:this.filterObj.searchKeyword})),this.waitDestroy(this.wrapApiResponse(n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.waitDestroy(this.questionService.apiQuestionsListPost({ids:o.data}).subscribe(s=>{this.loadQuest(s.data??[],l=>{this.followerRenderQuest.setNumQuest(this.objs.length),this.objs=l.map(_=>({..._,isApproving:!1,isRejecting:!1,isShow:!0,selectedCheckBoxFormControl:new r.MJ(!!this.filterObj.similarQuestionId,{nonNullable:!0})})),this.selectedCheckBoxChange(),this.stopStatusObj()})}))}))}loadQuest(n,o){const s=this.commonService.castJsonToClassObjs($.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s)})}getObjectiveInfo(){this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(n=>{if(n.errorMessage||!n.data)return this.errorStatusObj(n.errorMessage??"",!0);this.curObjectiveObj=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(n.data.objs,this.objectiveId)})}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-base-classification-questions"]],features:[e.Vt3],decls:0,vars:0,template:function(n,o){},styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}.td-question-selected[_ngcontent-%COMP%]{border:1px solid green;border-radius:3px}"]}),a})();var Fn=d(11002),Rn=d(32099),Mn=d(15423);const Gn=t=>({"skeleton-box-loading":t});function Dn(t,a){if(1&t&&e.nrm(0,"div",3),2&t){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,Gn,i.renderConfigObj.isFirstRender))}}function Bn(t,a){if(1&t&&(e.j41(0,"div",13)(1,"b",14),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.nrm(4,"azt-dynamic-hook",5),e.k0s()),2&t){let i;const n=a.$implicit,o=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,o.questionObj)?(null!==(i=n.alpha)&&void 0!==i?i:n.key).toLowerCase()+")":(null!==(i=n.alpha)&&void 0!==i?i:n.key)+"."),e.R7$(2),e.Y8G("content",n.content)}}function Pn(t,a){if(1&t&&(e.j41(0,"div",11),e.DNE(1,Bn,5,4,"div",12),e.k0s()),2&t){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngForOf",i.questionObj.answers)}}function $n(t,a){if(1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.questionObj.answerResult.length?i.questionObj.answerResult.join(" | "):""," ")}}function Kn(t,a){1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}function Qn(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",16)(1,"a",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showExplainBox())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG(2);e.R7$(2),e.SpI(" ",i.isShowExplain?e.bMT(3,1,"lang_auto_an_giai_thich"):e.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function Nn(t,a){if(1&t&&(e.j41(0,"div",4)(1,"div"),e.nrm(2,"azt-dynamic-hook",5),e.DNE(3,Pn,2,2,"div",6),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isTrueFalseAnswer"),e.j41(6,"div",7),e.DNE(7,$n,3,4,"h2",8),e.nI1(8,"isEssayAnswer"),e.DNE(9,Kn,3,3,"ng-template",null,1,e.C5r)(11,Qn,5,5,"div",9),e.k0s()(),e.nrm(12,"azt-question-explain-box",10),e.k0s()),2&t){let i;const n=e.sdS(10),o=e.XpG();e.R7$(2),e.Y8G("content",null!==(i=o.questionObj.content)&&void 0!==i?i:""),e.R7$(),e.Y8G("ngIf",(e.bMT(4,8,o.questionObj)||e.bMT(5,10,o.questionObj))&&o.questionObj.answers&&o.questionObj.answers.length>0),e.R7$(4),e.Y8G("ngIf",o.questionObj.answerResult&&!e.bMT(8,12,o.questionObj))("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",o.questionObj.help),e.R7$(),e.Y8G("isShowExplain",o.isShowExplain)("questionObj",o.questionObj)("renderConfigObj",o.renderConfigObj)}}let oe=(()=>{var t;class a extends ge.I{constructor(){super(...arguments),this.follower=new M.e,this.questionLabel="",this.isShowExplain=!1}customQuestionLabel(n){const o=this.commonService.castJsonToObj(n??"")??void 0;return o?.label?o.label:"C\xe2u"}showExplainBox(){this.isShowExplain=!this.isShowExplain}initRenderBox(){let n=new me.C(!0,!1,!1);super.initData(n,this.follower,this.questionObj),this.questionLabel=this.customQuestionLabel(this.questionObj.expandInfo)+" "+(null!=this.questionObj.labelIndex?this.questionObj.labelIndex:this.questionObj.rawIndex)}ngOnInit(){super.ngOnInit(),this.initRenderBox()}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-classification-tool"]],inputs:{questionObj:"questionObj",follower:"follower"},features:[e.Vt3],decls:4,vars:2,consts:[["elementRended",""],["essayAnswer",""],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"box","p-3"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex","justify-between"],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],["class","ml-auto mt-1",4,"ngIf"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(n,o){if(1&n&&(e.qex(0),e.DNE(1,Dn,1,3,"div",2)(2,Nn,13,14,"ng-template",null,0,e.C5r),e.bVm()),2&n){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,fe.C,Mn.N,Y.x,u.wp,u.V6,u.Zm,u.FC],styles:[".box-content[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #fafafa;margin:15px;box-shadow:2px 2px 5px #eee}.button-icon-feedback[_ngcontent-%COMP%]{color:gray;float:right}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}",'.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),a})();const Vn=t=>({"td-question-selected":t}),ie=()=>({"mr-1":!0});function Yn(t,a){1&t&&e.nrm(0,"azt-loading-ui",18)}function qn(t,a){1&t&&e.nrm(0,"azt-loading-ui",18)}function Ln(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",2)(2,"td")(3,"div",3)(4,"div",4)(5,"input",5),e.bIt("change",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChangeEvent.emit())}),e.k0s(),e.EFF(6," \xa0 "),e.j41(7,"label",6),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",7)(11,"div",8),e.nrm(12,"azt-question-standalone-for-classification-tool",9),e.k0s()(),e.j41(13,"div",7)(14,"span",10),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.openEditObjectiveDialogEvent.emit(o))}),e.nrm(15,"lucide-icon",11),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"span"),e.EFF(19," \xa0\xa0|\xa0\xa0 "),e.j41(20,"a",10),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.filterBySimilarQuestionEvent.emit(o))}),e.nrm(21,"lucide-icon",12),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()(),e.j41(24,"td",13)(25,"span",14),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.approvedThisQuestionsEvent.emit({objs:[o],objectiveId:s.objectiveId}))}),e.DNE(26,Yn,1,0,"azt-loading-ui",15),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.j41(29,"span",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.rejectQuestionsEvent.emit([o]))}),e.DNE(30,qn,1,0,"azt-loading-ui",15),e.nrm(31,"lucide-icon",17),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG();e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(2),e.Y8G("ngClass",e.eq3(30,Vn,i.selectedCheckBoxFormControl.value)),e.R7$(2),e.Mz_("id","checkbox_for_question_",i.id,""),e.Y8G("formControl",i.selectedCheckBoxFormControl),e.R7$(2),e.Mz_("for","checkbox_for_question_",i.id,""),e.R7$(),e.JRh(e.bMT(9,20,"lang_azota_tool_knowledge_choose_this_question")),e.R7$(3),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",n.followerRenderQuest)("questionObj",i),e.R7$(3),e.Y8G("ngClass",e.lJ4(32,ie)),e.R7$(),e.SpI(" ",e.bMT(17,22,"lang_azota_tool_knowledge_edit_objective_button")," "),e.R7$(5),e.Y8G("ngClass",e.lJ4(33,ie)),e.R7$(),e.SpI(" ",e.bMT(23,24,"lang_azota_tool_knowledge_approved_by_similar_question_button")," "),e.R7$(4),e.Y8G("ngIf",i.isApproving),e.R7$(),e.SpI(" ",e.bMT(28,26,"lang_azota_tool_knowledge_approved_objective_button")," "),e.R7$(3),e.Y8G("ngIf",i.isRejecting),e.R7$(),e.Y8G("ngClass",e.lJ4(34,ie)),e.R7$(),e.SpI(" ",e.bMT(33,28,"lang_azota_tool_knowledge_question_is_low_quality_button")," ")}}let Xn=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.objs=[],this.selectedCheckBoxChangeEvent=new e.bkB,this.openEditObjectiveDialogEvent=new e.bkB,this.approvedThisQuestionsEvent=new e.bkB,this.rejectQuestionsEvent=new e.bkB,this.filterBySimilarQuestionEvent=new e.bkB}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-table"]],inputs:{objs:"objs",schoolLevelId:"schoolLevelId",schoolSubjectId:"schoolSubjectId",bookId:"bookId",objectiveId:"objectiveId",totalSelectedCheckBox:"totalSelectedCheckBox",followerRenderQuest:"followerRenderQuest"},outputs:{selectedCheckBoxChangeEvent:"selectedCheckBoxChangeEvent",openEditObjectiveDialogEvent:"openEditObjectiveDialogEvent",approvedThisQuestionsEvent:"approvedThisQuestionsEvent",rejectQuestionsEvent:"rejectQuestionsEvent",filterBySimilarQuestionEvent:"filterBySimilarQuestionEvent"},features:[e.Vt3],decls:3,vars:1,consts:[[1,"table","table-report","mt-3"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"p-3",3,"ngClass"],[1,"flex","items-centers"],["type","checkbox",1,"show-code","form-check-input",3,"change","id","formControl"],[1,"form-check-label",3,"for"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"],[1,"clickable","link-color","link-text",3,"click"],["name","tags","size","16",3,"ngClass"],["name","layers-3","size","16",3,"ngClass"],[1,"w-60","text-center"],[1,"btn","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"text-danger","mt-8","inline-block","clickable","flex","items-center",3,"click"],["name","octagon-alert","size","16",3,"ngClass"],[1,"mr-1"]],template:function(n,o){1&n&&(e.j41(0,"table",0)(1,"tbody"),e.DNE(2,Ln,34,35,"ng-container",1),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("ngForOf",o.objs))},dependencies:[c.YU,c.Sq,c.bT,r.Zm,r.BC,r.l_,V.N,x.R,oe,g.WGl,u.wp],encapsulation:2}),a})();function Un(t,a){if(1&t){const i=e.RV6();e.j41(0,"span",2),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_azota_tool_knowledge_approved_similar_question_filter"),": ",i.filterObj.similarQuestionId," "),e.R7$(3),e.JRh(e.bMT(5,5,"lang_common_remove"))}}function Jn(t,a){if(1&t){const i=e.RV6();e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_azota_tool_knowledge_approved_search_by_keyword_filter")," "),e.R7$(3),e.JRh(e.bMT(5,4,"lang_common_remove")))}let Wn=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.changeFilterObjEvent=new e.bkB}removeFilter(){this.filterObj=new X,this.changeFilterObjEvent.emit(this.filterObj)}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-filter-box"]],inputs:{filterObj:"filterObj"},outputs:{changeFilterObjEvent:"changeFilterObjEvent"},features:[e.Vt3],decls:2,vars:2,consts:[["class","mr-3",4,"ngIf"],[4,"ngIf"],[1,"mr-3"],[1,"text-danger","clickable",3,"click"]],template:function(n,o){1&n&&e.DNE(0,Un,6,7,"span",0)(1,Jn,6,6,"span",1),2&n&&(e.Y8G("ngIf",o.filterObj.similarQuestionId),e.R7$(),e.Y8G("ngIf",""!=o.filterObj.searchKeyword))},dependencies:[c.bT,u.wp],encapsulation:2}),a})();function Hn(t,a){if(1&t){const i=e.RV6();e.j41(0,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.totalSelectedCheckBox!=o.totalQuestionsAreShow?o.checkAll():o.unCheckAll())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&t){const i=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,i.totalSelectedCheckBox!=i.totalQuestionsAreShow?"lang_select_all":"lang_remove_all")," ")}}function Zn(t,a){if(1&t){const i=e.RV6();e.j41(0,"span"),e.EFF(1," \xa0\xa0|\xa0\xa0 "),e.j41(2,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())}),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5," \xa0\xa0|\xa0\xa0 "),e.j41(6,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.approvedAllSelectedQuestions(o.objectiveId))}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,4,"lang_azota_tool_knowledge_edit_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")"),e.R7$(4),e.Lme("",e.bMT(8,6,"lang_azota_tool_knowledge_approved_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")")}}function eo(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",13),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function to(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.loadMoreQuestions())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_reload_list_questions")," "))}function no(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_list_questions_are_empty")," "))}function oo(t,a){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-approve-classification-table",14),e.bIt("selectedCheckBoxChangeEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChange())})("openEditObjectiveDialogEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.openEditObjectiveDialog(o))})("openEditObjectiveForSelectedDialogEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())})("approvedThisQuestionsEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.approvedThisQuestions(o.objs,o.objectiveId))})("rejectQuestionsEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.rejectQuestions(o))})("filterBySimilarQuestionEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.filterBySimilarQuestion(o))}),e.k0s(),e.DNE(1,to,3,3,"div",15)(2,no,3,3,"span",10)}if(2&t){const i=e.XpG();e.Y8G("objs",i.objs)("schoolLevelId",i.schoolLevelId)("schoolSubjectId",i.schoolSubjectId)("bookId",i.bookId)("objectiveId",i.objectiveId)("totalSelectedCheckBox",i.totalSelectedCheckBox)("followerRenderQuest",i.followerRenderQuest),e.R7$(),e.Y8G("ngIf",i.objs.length>0&&!i.filterObj.isFilter()),e.R7$(),e.Y8G("ngIf",i.objs.length<=0||i.totalQuestionsAreShow<=0&&i.filterObj.isFilter())}}let io=(()=>{var t;class a extends zn{constructor(){super(...arguments),this.searchContentObj=new En.Z}onChangeFilterObj(n){this.filterObj=n,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}filterBySimilarQuestion(n){this.filterObj=new X,this.filterObj.similarQuestionId=n.id,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}onSearchBox(n){this.filterObj=new X,this.filterObj.searchKeyword=n.searchContent,this.searchContentObj=n,this.loadMoreQuestions()}ngOnInit(){super.ngOnInit(),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo=`/azota-tools/knowledge-tree-classification/${this.schoolLevelId}/${this.schoolSubjectId}/${this.bookId}`,this.loadMoreQuestions(),this.getObjectiveInfo()}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-for-objective"]],features:[e.Vt3],decls:18,vars:20,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"colorBackground","defaultHeight"],[1,"w-full"],[1,"mt-3","font-medium","box","p-3"],[3,"innerHtml"],[1,"mt-3"],[3,"onSearch","isManualSearch","searchContentObj","placeholder"],[1,"block","mt-3",3,"changeFilterObjEvent","filterObj"],["class","clickable link-color",3,"click",4,"ngIf"],[4,"ngIf"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"clickable","link-color",3,"click"],[3,"currentStatusObj"],[3,"selectedCheckBoxChangeEvent","openEditObjectiveDialogEvent","openEditObjectiveForSelectedDialogEvent","approvedThisQuestionsEvent","rejectQuestionsEvent","filterBySimilarQuestionEvent","objs","schoolLevelId","schoolSubjectId","bookId","objectiveId","totalSelectedCheckBox","followerRenderQuest"],["class","text-center clickable link-color link-text mt-3",3,"click",4,"ngIf"],[1,"text-center","clickable","link-color","link-text","mt-3",3,"click"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"teacher-layout",1)(1,"flexed-on-the-top",2)(2,"div",3)(3,"div",4),e.nrm(4,"div",5),e.nI1(5,"mathJaxContent"),e.nI1(6,"async"),e.nI1(7,"safeContentQuestion"),e.j41(8,"div",6)(9,"azt-search-box",7),e.nI1(10,"mytranslate"),e.bIt("onSearch",function(_){return e.eBV(s),e.Njj(o.onSearchBox(_.searchObj))}),e.k0s(),e.j41(11,"app-tools-knowledge-approve-classification-filter-box",8),e.bIt("changeFilterObjEvent",function(_){return e.eBV(s),e.Njj(o.onChangeFilterObj(_))}),e.k0s()(),e.j41(12,"div",6),e.DNE(13,Hn,3,3,"span",9)(14,Zn,9,8,"span",10),e.k0s()()()(),e.DNE(15,eo,1,1,"azt-loading-effect",11)(16,oo,3,9,"ng-template",null,0,e.C5r),e.k0s()}if(2&n){const s=e.sdS(17);e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("colorBackground","#f0f8ffe8")("defaultHeight",""),e.R7$(3),e.Y8G("innerHtml",e.bMT(7,16,e.bMT(6,14,e.bMT(5,12,null==o.curObjectiveObj?null:o.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("isManualSearch",!0)("searchContentObj",o.searchContentObj)("placeholder",e.bMT(10,18,"lang_common_search_by_name")),e.R7$(2),e.Y8G("filterObj",o.filterObj),e.R7$(2),e.Y8G("ngIf",o.totalQuestionsAreShow>0),e.R7$(),e.Y8G("ngIf",o.totalSelectedCheckBox>0),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.bT,T.K,Fn.$,Rn.W,A.Q,Xn,Wn,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();const Oe=t=>({nodeObjs:t}),so=t=>({"text-danger":t}),se=t=>[t];function ao(t,a){1&t&&e.nrm(0,"azt-loading-ui")}function lo(t,a){1&t&&e.eu8(0)}function ro(t,a){1&t&&e.nrm(0,"lucide-icon",18)}function co(t,a){1&t&&e.nrm(0,"lucide-icon",19)}function uo(t,a){if(1&t&&(e.j41(0,"i"),e.DNE(1,ro,1,0,"lucide-icon",16)(2,co,1,0,"lucide-icon",17),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function _o(t,a){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",20),e.k0s())}function po(t,a){if(1&t&&(e.j41(0,"span",21),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,se,e.bMT(1,2,"/azota-tools/knowledge-tree-manage-practice/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.id))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_manage_practice")," ")}}function go(t,a){if(1&t&&(e.j41(0,"span",24),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2).$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,se,e.bMT(1,2,"/azota-tools/knowledge-tree-approve-classification-for-objective/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_approve_questions")," ")}}function mo(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_approved_all_questions")))}function fo(t,a){if(1&t&&(e.qex(0),e.j41(1,"span",22),e.nI1(2,"navigationLocalize"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,go,4,8,"span",23)(6,mo,3,3,"span",6),e.bVm()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.Y8G("routerLink",e.eq3(8,se,e.bMT(2,4,"/azota-tools/knowledge-tree-view-practice-for-objective/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(4,6,"lang_tool_knowledge_practice_for_objective")," "),e.R7$(2),e.Y8G("ngIf",i.data.numberOfNotManualQuestions>0),e.R7$(),e.Y8G("ngIf",i.data.numberOfNotManualQuestions<=0)}}function bo(t,a){1&t&&e.eu8(0)}function ho(t,a){if(1&t&&(e.qex(0),e.DNE(1,bo,1,0,"ng-container",7),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(17);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,Oe,i.children))}}function vo(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",9)(2,"td",10)(3,"div",11),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(o))}),e.DNE(4,uo,3,2,"i",6)(5,_o,2,0,"i",6),e.j41(6,"label",12),e.nrm(7,"span",13),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()(),e.j41(11,"td",4),e.EFF(12),e.j41(13,"span",14),e.EFF(14),e.k0s()(),e.j41(15,"td",4),e.DNE(16,po,4,8,"span",15)(17,fo,7,10,"ng-container",6),e.k0s()(),e.DNE(18,ho,2,4,"ng-container",6),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,16,e.bMT(9,14,e.bMT(8,12,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(5),e.SpI(" ",i.data.numberOfManualQuestions," / "),e.R7$(),e.Y8G("ngClass",e.eq3(18,so,i.data.numberOfNotManualQuestions>0)),e.R7$(),e.JRh(i.data.numberOfNotManualQuestions),e.R7$(2),e.Y8G("ngIf",!i.data.objectiveId&&n.form.controls.bookIdFormControl.value>0),e.R7$(),e.Y8G("ngIf",i.data.objectiveId),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function Co(t,a){if(1&t&&(e.qex(0),e.DNE(1,vo,19,20,"ng-container",8),e.bVm()),2&t){const i=a.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function jo(t,a){if(1&t&&e.DNE(0,Co,2,1,"ng-container",6),2&t){const i=a.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let To=(()=>{var t;class a extends te.C{constructor(){super(...arguments),this.nodeObjs=[],this.loadingExport=!1,this.txtDataExport=""}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let s=[];return n.forEach(l=>{let _={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:l.title,data:{...l,children:[]},children:[]};_.children=this.standardTreeNodes(l.children,o+1),s.push(_)}),s}convertDataLineForChild(n){n.forEach(o=>{let s="";for(let l=0;l<o.level;l++)s+="\t";s+=1==o.data.nodeType?`[O-${o.data.objectiveId}]`:`[L${o.level+1}-${o.data.id}]`,s+=o.text,this.txtDataExport+=s+"\n",this.convertDataLineForChild(o.children)})}exportData(){let n=new Date;this.txtDataExport="",this.loadingExport=!0,this.nodeObjs.forEach(l=>{let _="";for(let k=0;k<l.level;k++)_+="\t";_+=1==l.data.nodeType?`[O-${l.data.objectiveId}]`:`[L${l.level+1}-${l.data.id}]`,_+=l.text,this.txtDataExport+=_+"\n",this.convertDataLineForChild(l.children)});let o=`azota-tree-knowledge-${this.form.controls.schoolLevel.value}-${this.form.controls.schoolSubject.value}-${n.getTime()}.txt`;const s=new Blob([this.txtDataExport],{type:"text/plain"});s&&this.commonService.downloadFileByUrl(window.URL.createObjectURL(s),o),this.loadingExport=!1}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-knowledge-tree-for-classification"]],inputs:{rawNodes:"rawNodes",form:"form"},features:[e.Vt3],decls:18,vars:15,consts:[["recursiveListTmpl",""],[1,"table","table-report"],[1,"text-center"],[1,"text-center","w-48"],[1,"text-right"],[1,"btn","btn-success","text-white","ml-auto",3,"click","disabled"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],[3,"ngClass"],["class","link-color clickable",3,"routerLink",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"],[1,"link-color","clickable",3,"routerLink"],[1,"btn","btn-secondary","mr-3",3,"routerLink"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),e.EFF(4,"\xa0"),e.k0s(),e.j41(5,"th",3),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"th",4)(10,"button",5),e.bIt("click",function(){return e.eBV(s),e.Njj(o.exportData())}),e.DNE(11,ao,1,0,"azt-loading-ui",6),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.j41(14,"tbody"),e.DNE(15,lo,1,0,"ng-container",7),e.k0s()(),e.DNE(16,jo,1,1,"ng-template",null,0,e.C5r)}if(2&n){const s=e.sdS(17);e.R7$(6),e.Lme("",e.bMT(7,7,"lang_tool_knowledge_manual_approved")," / ",e.bMT(8,9,"lang_tool_knowledge_manual_not_approved"),""),e.R7$(4),e.Y8G("disabled",o.loadingExport),e.R7$(),e.Y8G("ngIf",o.loadingExport),e.R7$(),e.SpI(" ",e.bMT(13,11,"lang_azt_export"),"\xa0.txt "),e.R7$(3),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(13,Oe,o.nodeObjs))}},dependencies:[m.Wk,c.YU,c.Sq,c.bT,c.T3,x.R,g.WGl,c.Jj,u.F2,u.wp,u.km,u.ep],encapsulation:2}),a})();function Oo(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function wo(t,a){if(1&t&&e.nrm(0,"app-tools-view-knowledge-tree-for-classification",7),2&t){const i=e.XpG(2);e.Y8G("form",i.form)("rawNodes",i.nodes)}}function xo(t,a){if(1&t&&e.DNE(0,wo,1,2,"app-tools-view-knowledge-tree-for-classification",6),2&t){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}let ko=(()=>{var t;class a extends f.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-classification/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeForClassificationGet(n.schoolLevel,n.schoolSubject,n.bookIdFormControl>0?n.bookIdFormControl:void 0)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.nodes=o.data?.nodes??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_classification_title",description:"lang_cms_admin_tools_knowledge_tree_classification_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),s=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(s)}constructor(n,o){super(),this.aiElearningService=n,this.activeRoute=o,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0}),bookIdFormControl:new r.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(j.T5),e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification"]],features:[e.Vt3],decls:6,vars:8,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"form","rawNodes",4,"ngIf"],[3,"form","rawNodes"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"config-level-subject-book",3),e.bIt("changeDataEvent",function(){return e.eBV(s),e.Njj(o.changeLevelSubjectBookEvent())}),e.k0s()(),e.DNE(3,Oo,1,1,"azt-loading-effect",4)(4,xo,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&n){const s=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.bT,T.K,D.X,A.Q,To],encapsulation:2}),a})();var Io=d(9500);let we=(()=>{var t;class a extends f.H{removeExample(n){this.form.controls.examples=new r.Yp(this.form.controls.examples.controls.filter(o=>o.controls.id.value!=n)),this.form.controls.examples.controls.length||this.addMoreExample()}addMoreExample(){this.form.controls.examples.push(new r.gE({id:new r.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new r.MJ("",{nonNullable:!0})}))}emitResult(){this.saveResultEvent.emit(this.hasNewResult)}initForm(){this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),description:new r.MJ("",{nonNullable:!0,validators:[]}),examples:new r.Yp([],{validators:[]}),objectiveId:new r.MJ(0,{nonNullable:!0,validators:[]})})}constructor(){super(),this.saveResultEvent=new e.bkB,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.sAztUuidService=(0,e.WQX)(ve.D),this.hasNewResult=!1,this.initForm()}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-base-practice-form"]],outputs:{saveResultEvent:"saveResultEvent"},features:[e.Vt3],decls:0,vars:0,template:function(n,o){},encapsulation:2}),a})();var ae=d(95670),le=d(99965),re=d(43166);const Ao=t=>({"border-danger":t});function So(t,a){if(1&t&&(e.j41(0,"mat-option",27),e.nrm(1,"span",28),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&t){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function yo(t,a){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",29)(2,"div",30),e.nrm(3,"textarea",12),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",31),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.removeExample(o.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const i=a.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function Eo(t,a){1&t&&e.nrm(0,"azt-loading-ui",32)}function zo(t,a){1&t&&e.nrm(0,"azt-loading-ui",32)}function Fo(t,a){1&t&&e.nrm(0,"azt-loading-ui",32)}let Ro=(()=>{var t;class a extends we{saveObj(n){this.initStatusObj();let o={bookContentId:this.bookContentId,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(s=>s.name?.trim()).filter(s=>""!=s).filter(this.commonService.notEmpty)};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeInsertPracticePost(o)).subscribe(s=>{if(!s.success||!s.data)return this.errorStatusObj(s.message,!0);this.updateObjectiveId(s.data.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.initFormData(),n&&this.emitResult()})}))}updateObjectiveId(n,o,s){if(!o)return s();this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:n,objectiveId:o})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0),s();s()}))}initFormData(){this.initForm(),this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super()}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-add-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId"},features:[e.Vt3],decls:56,vars:50,consts:[["perfectScroll",""],["searchInListObjective","searchInList"],[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary-soft","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"ng-scrollbar",4,0)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"label",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",11)(14,"label",9),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",12),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",13)(21,"label",9),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",14)(25,"mat-select",15,1),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,So,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",13)(35,"label",9),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,yo,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addMoreExample())}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return e.eBV(s),e.Njj(o.emitResult())}),e.DNE(45,Eo,1,0,"azt-loading-ui",24),e.EFF(46),e.nI1(47,"mytranslate"),e.k0s(),e.j41(48,"span",25),e.bIt("click",function(){return e.eBV(s),e.Njj(o.saveObj(!1))}),e.DNE(49,zo,1,0,"azt-loading-ui",24),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s(),e.j41(52,"span",26),e.bIt("click",function(){return e.eBV(s),e.Njj(o.saveObj(!0))}),e.DNE(53,Fo,1,0,"azt-loading-ui",24),e.EFF(54),e.nI1(55,"mytranslate"),e.k0s()()()}if(2&n){const s=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,24,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(48,Ao,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,26,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,28,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,30,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,32,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,34,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,36,"lang_search_not_found")),e.Y8G("formControl",s.searchControl),e.R7$(3),e.Y8G("ngForOf",s.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,38,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,40,"lang_common_add_more"),""),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(47,42,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(51,44,"lang_common_save")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(55,46,"lang_common_save_and_close")," ")}},dependencies:[c.YU,c.Sq,c.bT,r.qT,r.me,r.BC,r.cb,Q.wT,ae.rl,N.VO,r.l_,r.j4,le.j,x.R,re.x,p.Yh,h.U9,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();const Mo=t=>({"border-danger":t});function Go(t,a){if(1&t&&(e.j41(0,"mat-option",26),e.nrm(1,"span",27),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&t){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function Do(t,a){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",28)(2,"div",29),e.nrm(3,"textarea",12),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.removeExample(o.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const i=a.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function Bo(t,a){1&t&&e.nrm(0,"azt-loading-ui",31)}let Po=(()=>{var t;class a extends we{saveObj(n){this.initStatusObj();let o={id:this.obj.id,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(s=>s.name?.trim()).filter(s=>""!=s).filter(this.commonService.notEmpty)};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticePost(o)).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);this.updateObjectiveId(this.obj.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.emitResult()})}))}updateObjectiveId(n,o,s){if((this.obj.objectiveId??0)==o)return s();this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:n,objectiveId:o})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0),s();s()}))}initFormData(){this.initForm(),this.form.controls.name.setValue(this.obj.name),this.form.controls.description.setValue(this.obj.description??""),this.form.controls.objectiveId.setValue(this.obj.objectiveId??0),this.obj.examples.forEach(n=>{this.form.controls.examples.push(new r.gE({id:new r.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new r.MJ(n,{nonNullable:!0})}))}),this.form.controls.examples.controls.length||this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super()}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-edit-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId",obj:"obj"},features:[e.Vt3],decls:51,vars:45,consts:[["perfectScroll",""],["searchInListObjective","searchInList"],[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],["class","mr-1",4,"ngIf"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"ng-scrollbar",4,0)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"label",9),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",11)(14,"label",9),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",12),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",13)(21,"label",9),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",14)(25,"mat-select",15,1),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,Go,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",13)(35,"label",9),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,Do,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return e.eBV(s),e.Njj(o.addMoreExample())}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return e.eBV(s),e.Njj(o.emitResult())}),e.EFF(45),e.nI1(46,"mytranslate"),e.k0s(),e.j41(47,"span",24),e.bIt("click",function(){return e.eBV(s),e.Njj(o.saveObj(!0))}),e.DNE(48,Bo,1,0,"azt-loading-ui",25),e.EFF(49),e.nI1(50,"mytranslate"),e.k0s()()()}if(2&n){const s=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,21,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(43,Mo,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,23,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,25,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,27,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,29,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,31,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,33,"lang_search_not_found")),e.Y8G("formControl",s.searchControl),e.R7$(3),e.Y8G("ngForOf",s.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,35,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,37,"lang_common_add_more"),""),e.R7$(4),e.SpI(" ",e.bMT(46,39,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(50,41,"lang_common_save_and_close")," ")}},dependencies:[c.YU,c.Sq,c.bT,r.qT,r.me,r.BC,r.cb,Q.wT,ae.rl,N.VO,r.l_,r.j4,le.j,x.R,re.x,p.Yh,h.U9,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function $o(t,a){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-add-practice",5),e.bIt("saveResultEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.emitResult(o))}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)}}function Ko(t,a){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-edit-practice",6),e.bIt("saveResultEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.emitResult(o))}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)("obj",i.data.obj)}}let ce=(()=>{var t;class a extends z._{emitResult(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-dialog-select-student-account"]],features:[e.Vt3],decls:5,vars:2,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[3,"bookContentId","objectiveObjs","saveResultEvent",4,"ngIf"],[3,"bookContentId","objectiveObjs","obj","saveResultEvent",4,"ngIf"],[3,"saveResultEvent","bookContentId","objectiveObjs"],[3,"saveResultEvent","bookContentId","objectiveObjs","obj"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,$o,1,2,"app-tools-knowledge-tree-classification-add-practice",3)(4,Ko,1,3,"app-tools-knowledge-tree-classification-edit-practice",4),e.k0s()()()),2&n&&(e.R7$(3),e.Y8G("ngIf",!o.data.obj),e.R7$(),e.Y8G("ngIf",o.data.obj))},dependencies:[c.bT,Ro,Po],encapsulation:2}),a})();var Qo=d(46600);function No(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",10),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Vo(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",12)(2,"div",13),e.nrm(3,"azt-question-standalone-for-classification-tool",14),e.k0s()(),e.bVm()),2&t){const i=a.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",n.followerRenderQuest)("questionObj",i)}}function Yo(t,a){if(1&t&&e.DNE(0,Vo,4,3,"ng-container",11),2&t){const i=e.XpG();e.Y8G("ngForOf",i.questionObjs)}}let qo=(()=>{var t;class a extends z._{btnCloseDialog(){this.dialogRef.close(!1)}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetQuestionsOfPracticeGet(this.data.id)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.getListQuestions(n.data??[])}))}getListQuestions(n){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsListPost({ids:n}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],s=>{this.followerRenderQuest.setNumQuest(s.length),this.questionObjs=s,this.stopStatusObj()})}))}loadQuest(n,o){const s=this.commonService.castJsonToClassObjs($.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s)})}ngOnInit(){this.initData()}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.questionService=(0,e.WQX)(ne.wP),this.followerRenderQuest=new M.e,this.questionRenderService=(0,e.WQX)(K.g),this.configRenderService=new P.y(!0),this.questionObjs=[]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-split-practice-dialog"]],features:[e.Vt3],decls:13,vars:6,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[3,"currentStatusObj"],[4,"ngFor","ngForOf"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6),e.DNE(6,No,1,1,"azt-loading-effect",7)(7,Yo,1,1,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return e.eBV(s),e.Njj(o.btnCloseDialog())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()}if(2&n){const s=e.sdS(8);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(5),e.SpI(" ",e.bMT(12,4,"lang_auto_dong")," ")}},dependencies:[c.Sq,c.bT,T.K,V.N,oe,p.Yh,u.wp],encapsulation:2}),a})();function Lo(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",9),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Xo(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",10),e.nrm(1,"div",11),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"breakLine"),e.nI1(5,"safeContentQuestion"),e.k0s(),e.j41(6,"div",12)(7,"span",13),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.getAiData(!0))}),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()}if(2&t){let i;const n=e.XpG();e.R7$(),e.Y8G("innerHTML",e.bMT(5,8,e.bMT(4,6,null!==(i=e.bMT(3,4,e.bMT(2,2,n.resultData)))&&void 0!==i?i:"")),e.npT),e.R7$(7),e.JRh(e.bMT(9,10,"lang_tool_knowledge_practice_re_ask_ai"))}}let Uo=(()=>{var t;class a extends z._{getAiData(n){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeSuggestObjectiveForPracticeGet(this.data.practiceId,n)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.resultData=o.data.data,this.stopStatusObj()}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){this.getAiData(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.resultData=""}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-ask-practice-by-ai-dialog"]],features:[e.Vt3],decls:12,vars:6,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[3,"currentStatusObj"],[1,"box","p-3"],[1,"mt-2",3,"innerHTML"],[1,"text-center","mt-3"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0),e.DNE(5,Lo,1,1,"azt-loading-effect",6)(6,Xo,10,12,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return e.eBV(s),e.Njj(o.btnCloseDialog())}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()}if(2&n){const s=e.sdS(7);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(5),e.SpI(" ",e.bMT(11,4,"lang_auto_dong")," ")}},dependencies:[c.bT,T.K,p.Yh,c.Jj,u.wp,u.km,u.ep,u.bt],encapsulation:2}),a})();function Jo(t,a){if(1&t&&(e.j41(0,"mat-option",11),e.nrm(1,"span",12),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"safeContentQuestion"),e.k0s()),2&t){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(3,4,e.bMT(2,2,i.name))),e.npT)}}function Wo(t,a){1&t&&e.nrm(0,"azt-loading-ui",13)}function Ho(t,a){1&t&&e.nrm(0,"azt-loading-ui",13)}let Zo=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.updateEvent=new e.bkB,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.sAztDialogService=(0,e.WQX)(F.i),this.objectiveIdFormControl=new r.MJ(0,{nonNullable:!0,validators:[]})}checkByAI(){this.sAztDialogService.open(Uo,{data:{practiceId:this.obj.id},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}updateObj(){let n=this.objectiveIdFormControl.value;(this.obj.objectiveId??0)!=n&&(this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:this.obj.id,objectiveId:n||void 0})).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.obj.objectiveId=n,this.obj.objectiveName=this.objectiveObjs.find(s=>s.id==n)?.name??"",this.updateEvent.emit(this.obj),this.successStatusObj("lang_cms_update_success",!0)})))}ngOnInit(){this.viewObjectiveObjs=[{id:0,name:this.commonService.myTranslateInstant("lang_tool_knowledge_non_objective")??"none",questionHistories:[]}],this.viewObjectiveObjs=this.viewObjectiveObjs.concat(this.objectiveObjs),this.objectiveIdFormControl.setValue(this.obj.objectiveId??0)}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-update-objective"]],inputs:{obj:"obj",objectiveObjs:"objectiveObjs"},outputs:{updateEvent:"updateEvent"},features:[e.Vt3],decls:20,vars:20,consts:[["searchInListObjective","searchInList"],[1,"flex","items-center"],[1,"w-full"],["appearance","fill",1,"box","mb-5","w-full",2,"margin-bottom","0px"],["searchInList","",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-none"],[1,"btn","btn-secondary","ml-3",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary","ml-3",3,"click"],[3,"value"],[3,"innerHTML"],[1,"mr-1"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-select",4,0),e.nI1(5,"mytranslate"),e.j41(6,"mat-option"),e.nrm(7,"ngx-mat-select-search",5),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,Jo,5,8,"mat-option",6),e.k0s()()(),e.j41(11,"div",7)(12,"span",8),e.bIt("click",function(){return e.eBV(s),e.Njj(o.checkByAI())}),e.DNE(13,Wo,1,0,"azt-loading-ui",9),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"span",10),e.bIt("click",function(){return e.eBV(s),e.Njj(o.updateObj())}),e.DNE(17,Ho,1,0,"azt-loading-ui",9),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()()}if(2&n){const s=e.sdS(4);e.R7$(3),e.FS9("placeholder","---"+e.bMT(5,10,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.objectiveIdFormControl),e.R7$(4),e.FS9("placeholderLabel",e.bMT(8,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(9,14,"lang_search_not_found")),e.Y8G("formControl",s.searchControl),e.R7$(3),e.Y8G("ngForOf",s.filter(o.viewObjectiveObjs,"name")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(15,16,"lang_tool_knowledge_practice_ask_ai")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(19,18,"lang_common_save")," ")}},dependencies:[c.Sq,c.bT,r.BC,Q.wT,ae.rl,N.VO,r.l_,x.R,re.x,h.U9,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function ei(t,a){if(1&t&&(e.qex(0),e.nrm(1,"div",14),e.nI1(2,"mathJaxContent"),e.nI1(3,"async"),e.nI1(4,"breakLine"),e.nI1(5,"safeContentQuestion"),e.bVm()),2&t){let i;const n=a.$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(5,7,e.bMT(4,5,null!==(i=e.bMT(3,3,e.bMT(2,1,"- "+n)))&&void 0!==i?i:"")),e.npT)}}function ti(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",15)(1,"span",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.viewQuestionsOfPractice(o))}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4," \xa0\xa0|\xa0\xa0 "),e.j41(5,"span",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.splitEvent.emit(o))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8," \xa0\xa0|\xa0\xa0 "),e.j41(9,"span",18),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.editEvent.emit(o))}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.EFF(12," \xa0\xa0|\xa0\xa0 "),e.j41(13,"span",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.deleteEvent.emit(o))}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.JRh(e.bMT(3,4,"lang_tool_knowledge_manage_show_questions_of_practice")),e.R7$(4),e.JRh(e.bMT(7,6,"lang_tool_knowledge_manage_split_practice_question_prompt")),e.R7$(4),e.JRh(e.bMT(11,8,"lang_common_edit")),e.R7$(4),e.JRh(e.bMT(15,10,"lang_common_delete")))}function ni(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",6)(1,"app-tools-knowledge-tree-classification-update-objective",20),e.bIt("updateEvent",function(o){e.eBV(i);const s=e.XpG(3);return e.Njj(s.updateEvent.emit(o))}),e.k0s()()}if(2&t){const i=e.XpG(2).$implicit,n=e.XpG();e.R7$(),e.Y8G("obj",i)("objectiveObjs",n.allObjectiveObjs)}}function oi(t,a){if(1&t&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.nrm(7,"div",11),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"breakLine"),e.nI1(11,"safeContentQuestion"),e.k0s(),e.j41(12,"div",9)(13,"div",10),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"div",12),e.DNE(17,ei,6,9,"ng-container",0),e.k0s()()(),e.DNE(18,ti,16,12,"div",13),e.k0s(),e.DNE(19,ni,2,2,"div",5),e.k0s()),2&t){let i;const n=e.XpG().$implicit,o=e.XpG();e.R7$(5),e.SpI("- ** ",e.bMT(6,6,"lang_tool_knowledge_manage_practice_description")," :**"),e.R7$(2),e.Y8G("innerHTML",e.bMT(11,14,e.bMT(10,12,null!==(i=e.bMT(9,10,e.bMT(8,8,"- "+n.description)))&&void 0!==i?i:"")),e.npT),e.R7$(7),e.SpI("- **",e.bMT(15,16,"lang_tool_knowledge_manage_practice_example"),":**"),e.R7$(3),e.Y8G("ngForOf",n.examples),e.R7$(),e.Y8G("ngIf",o.showAction),e.R7$(),e.Y8G("ngIf",o.showAction)}}function ii(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"span",2),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.collapseByObjectiveId(o))}),e.nrm(3,"lucide-icon",3)(4,"span",4),e.nI1(5,"mathJaxContent"),e.nI1(6,"async"),e.nI1(7,"safeContentQuestion"),e.k0s(),e.DNE(8,oi,20,18,"div",5),e.k0s(),e.bVm()}if(2&t){const i=a.$implicit;e.R7$(3),e.Y8G("name",i.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(),e.Y8G("innerHTML",e.bMT(7,8,e.bMT(6,6,e.bMT(5,4,i.name))),e.npT),e.R7$(4),e.Y8G("ngIf",i.isExpand)}}let U=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.showAction=!0,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.splitEvent=new e.bkB,this.updateEvent=new e.bkB,this.sAztDialogService=(0,e.WQX)(F.i),this.viewObjs=[]}viewQuestionsOfPractice(n){this.sAztDialogService.open(qo,{data:n,restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}collapseByObjectiveId(n){n.isExpand=!n.isExpand}initViewData(){let n=this.objs.map(o=>({...o,isExpand:this.viewObjs.find(s=>s.id==o.id)?.isExpand??!1}));this.viewObjs=n}ngOnChanges(){this.initViewData()}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-list-practice-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",allObjectiveObjs:"allObjectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"box","p-3","mb-3"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[3,"innerHTML"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"flex","items-center"],[1,"w-full"],[1,"mb-3"],[1,"font-medium"],[1,"mt-2",2,"padding-left","20px",3,"innerHTML"],[2,"padding-left","20px"],["class","flex-none text-right",4,"ngIf"],[1,"mt-2",3,"innerHTML"],[1,"flex-none","text-right"],[1,"text-secondary","clickable",3,"click"],[1,"text-pending","clickable",3,"click"],[1,"link-color","clickable",3,"click"],[1,"text-danger","clickable",3,"click"],[3,"updateEvent","obj","objectiveObjs"]],template:function(n,o){1&n&&e.DNE(0,ii,9,10,"ng-container",0),2&n&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[c.Sq,c.bT,g.WGl,Zo,c.Jj,u.wp,u.km,u.ep,u.bt],encapsulation:2}),a})();const si=t=>({"border-danger":t});function ai(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",17),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function li(t,a){if(1&t&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",19),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("allObjectiveObjs",i.data.allObjectiveObjs)("showAction",!1)}}function ri(t,a){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function ci(t,a){if(1&t&&e.DNE(0,li,2,4,"div",18)(1,ri,3,3,"div",18),2&t){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(),e.Y8G("ngIf",i.objs.length<=0)}}function di(t,a){1&t&&e.nrm(0,"azt-loading-ui",20)}let xe=(()=>{var t;class a extends z._{waitResultApi(n,o,s){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(n)).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);if("fail"==l.data?.status)return s("lang_tool_ai_call_long_prompt_fail");if("running"==l.data?.status)return setTimeout(()=>this.waitResultApi(n,o,s),5e3);let _=this.commonService.castJsonToObj(l.data?.result??"");return null==_?s("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(_)}))}callPromptApi(){let n={id:this.data.obj.id,prompt:this.promptFormControl.value};this.initStatusObj(),this.objs=[],this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailSuggestionPost(n)).subscribe(o=>{if(!o.success||!o.data)return this.errorStatusObj(o.message,!0);this.waitResultApi(o.data.id,s=>{this.objs=s.map(l=>({...l,id:0,objectiveName:""})),this.stopStatusObj()},s=>this.errorStatusObj(s,!0))}))}confirmOk(){this.savingData=!1;let n={id:this.data.obj.id,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailPost(n)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.aiLongRunningTaskService=(0,e.WQX)(Qo.Q),this.promptFormControl=new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),this.objs=[],this.savingData=!1}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-split-practice-dialog"]],features:[e.Vt3],decls:25,vars:22,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[1,"w-full"],["autoResize","",1,"form-control",3,"ngClass","placeholder","formControl"],[1,"text-center","mt-3"],[1,"btn","btn-primary",2,"height","100%",3,"click","disabled"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"btn","btn-primary","w-32",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","allObjectiveObjs","showAction"],[1,"mr-1"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6)(6,"div",7),e.nrm(7,"textarea",8),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",9)(10,"button",10),e.bIt("click",function(){return e.eBV(s),e.Njj(o.callPromptApi())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",11),e.DNE(14,ai,1,1,"azt-loading-effect",12)(15,ci,2,2,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(17,"div",13)(18,"button",14),e.bIt("click",function(){return e.eBV(s),e.Njj(o.btnCloseDialog())}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",15),e.bIt("click",function(){return e.eBV(s),e.Njj(o.confirmOk())}),e.DNE(22,di,1,0,"azt-loading-ui",16),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()}if(2&n){const s=e.sdS(16);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"lang_tool_knowledge_split_practice_prompt")),e.Y8G("ngClass",e.eq3(20,si,o.promptFormControl.invalid))("formControl",o.promptFormControl),e.R7$(3),e.Y8G("disabled",o.promptFormControl.invalid),e.R7$(),e.JRh(e.bMT(12,14,"lang_tool_knowledge_split_practice_call_prompt_api")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(5),e.SpI(" ",e.bMT(20,16,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(24,18,"lang_auto_luu")," ")}},dependencies:[c.YU,c.bT,r.me,r.BC,r.l_,T.K,le.j,x.R,p.Yh,U,u.wp],encapsulation:2}),a})();const ui=t=>({"text-slate-400":t});function _i(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"app-tools-knowledge-tree-classification-list-practice-box",11),e.bIt("editEvent",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.editEvent.emit(o))})("deleteEvent",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.deleteEvent.emit(o))})("splitEvent",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.splitEvent.emit(o))})("updateEvent",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.updateEvent.emit(o))}),e.k0s()()()}if(2&t){const i=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.Y8G("objs",i.childrenObjs)("objectiveObjs",n.objectiveObjs)("allObjectiveObjs",n.allObjectiveObjs)}}function pi(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.collapseByGroupId(null==o?null:o.objectiveObj))}),e.nrm(5,"lucide-icon",5),e.j41(6,"h2",6),e.nrm(7,"span",7),e.nI1(8,"mytranslate"),e.nI1(9,"mathJaxContent"),e.nI1(10,"async"),e.nI1(11,"safeContentQuestion"),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.DNE(14,_i,3,3,"div",8),e.k0s(),e.bVm()}if(2&t){let i;const n=a.$implicit;e.R7$(3),e.Y8G("ngClass",e.eq3(16,ui,n.childrenObjs.length<=0)),e.R7$(2),e.Y8G("name",n.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(2),e.Y8G("innerHTML",e.bMT(11,12,e.bMT(10,10,e.bMT(9,8,null!==(i=null==n||null==n.objectiveObj?null:n.objectiveObj.name)&&void 0!==i?i:e.bMT(8,6,"lang_tool_knowledge_manage_not_select_objective")))),e.npT),e.R7$(5),e.SpI(" ","("+n.childrenObjs.length+" "+e.bMT(13,14,"lang_tool_knowledge_manage_total_children_practice")+")"," "),e.R7$(2),e.Y8G("ngIf",n.isExpand)}}let gi=(()=>{var t;class a extends f.H{constructor(){super(...arguments),this.showAction=!0,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.splitEvent=new e.bkB,this.updateEvent=new e.bkB,this.viewObjs=[]}collapseByGroupId(n){let o=this.viewObjs.find(s=>s.objectiveObj?.id==n?.id);o&&(o.isExpand=!o.isExpand)}isExpandAll(){return this.viewObjs.every(n=>n.isExpand)}expandAll(){this.viewObjs.forEach(n=>n.isExpand=!0)}collapseAll(){this.viewObjs.forEach(n=>n.isExpand=!1)}initGroupData(){let n=[];this.objectiveObjs.forEach(s=>{let l=this.objs.filter(k=>k.objectiveId==s.id),_=this.viewObjs.find(k=>k.objectiveObj?.id==s?.id)?.isExpand??!1;n.push({isExpand:_,objectiveObj:s,childrenObjs:l})});let o=this.objs.filter(s=>null==s.objectiveId);o.length&&(n=[{isExpand:this.viewObjs.find(_=>null==_.objectiveObj?.id)?.isExpand??!1,objectiveObj:void 0,childrenObjs:o}].concat(n)),this.viewObjs=n}ngOnChanges(){this.initGroupData()}}return(t=a).\u0275fac=(()=>{let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-practice-group-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",allObjectiveObjs:"allObjectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mb-3"],[1,"flex","items-center"],[1,"font-medium",3,"ngClass"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[1,"font-medium"],[3,"innerHTML"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"box","p-3"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"]],template:function(n,o){1&n&&e.DNE(0,pi,15,18,"ng-container",0),2&n&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[c.YU,c.Sq,c.bT,g.WGl,U,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function mi(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",8),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}let fi=(()=>{var t;class a extends f.H{addNew(){this.sAztDialogService.open(ce,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(n){this.sAztDialogService.open(ce,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs,obj:n},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(s=>{s&&this.initData()})}deleteObj(n){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(ee.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(s=>{s&&this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:n.id})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.objs=this.objs.filter(_=>_.id!=n.id)}))})}splitObj(n){this.sAztDialogService.open(xe,{data:{obj:n,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(s=>{s&&this.initData()})}updateObj(n){this.objs=this.objs.map(o=>o.id!=n.id?o:{...n})}getObjectiveInfo(n){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.knowledgeObjs=o.data.objs,this.curBookContentObj=this.sAztKnowledgeObjectiveService.getObjById(o.data.objs,this.bookContentId),n()})}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesAndObjectivesOfBookContentGet(this.bookContentId)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.objectiveObjs=n.data?.objectives??[];let s=this.sAztKnowledgeObjectiveService.getAllObjectiveObjs(this.knowledgeObjs,[]).filter(l=>!this.objectiveObjs.map(_=>_.id).includes(l.id));this.allObjectiveObjs=this.objectiveObjs.concat(s),this.objs=n.data?.practices.map(l=>({...l,objectiveName:n.data?.objectives.find(_=>_.id==l.objectiveId)?.name??""}))??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",description:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.bookContentId=Number(this.commonService.getMyParam(this.activeRoute,"bookContentId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.getObjectiveInfo(()=>{this.initData()})}constructor(n){super(),this.activeRoute=n,this.aiElearningPracticeService=(0,e.WQX)(Io.U),this.sAztDialogService=(0,e.WQX)(F.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(B.h),this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.bookContentId=0,this.curBookContentObj=void 0,this.objectiveObjs=[],this.allObjectiveObjs=[],this.knowledgeObjs=[],this.backTo="",this.objs=[]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-manage-practice"]],features:[e.Vt3],decls:14,vars:15,consts:[[3,"headerBackToLink"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[1,"flex-none"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj",4,"ngIf"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"],[3,"currentStatusObj"]],template:function(n,o){1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.nI1(4,"mathJaxContent"),e.nI1(5,"async"),e.nI1(6,"safeContentQuestion"),e.j41(7,"div",4)(8,"span",5),e.bIt("click",function(){return o.addNew()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",1),e.DNE(12,mi,1,1,"azt-loading-effect",6),e.j41(13,"app-tools-knowledge-tree-classification-practice-group-box",7),e.bIt("editEvent",function(l){return o.editObj(l)})("deleteEvent",function(l){return o.deleteObj(l)})("splitEvent",function(l){return o.splitObj(l)})("updateEvent",function(l){return o.updateObj(l)}),e.k0s()()()()),2&n&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(3),e.Y8G("innerHTML",e.bMT(6,11,e.bMT(5,9,e.bMT(4,7,null==o.curBookContentObj?null:o.curBookContentObj.title))),e.npT),e.R7$(6),e.JRh(e.bMT(10,13,"lang_common_create")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(),e.Y8G("objs",o.objs)("objectiveObjs",o.objectiveObjs)("allObjectiveObjs",o.allObjectiveObjs))},dependencies:[c.bT,T.K,A.Q,gi,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function bi(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",14),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function hi(t,a){if(1&t&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",16),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("allObjectiveObjs",i.data.allObjectiveObjs)("showAction",!1)}}function vi(t,a){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function Ci(t,a){if(1&t&&e.DNE(0,hi,2,4,"div",15)(1,vi,3,3,"div",15),2&t){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(),e.Y8G("ngIf",i.objs.length<=0)}}function ji(t,a){1&t&&e.nrm(0,"azt-loading-ui",17)}let Ti=(()=>{var t;class a extends z._{waitResultApi(n,o,s){this.waitDestroy(this.wrapApiResponse(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(n)).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);if("fail"==l.data?.status)return s("lang_tool_ai_call_long_prompt_fail");if("running"==l.data?.status)return setTimeout(()=>this.waitResultApi(n,o,s),5e3);let _=this.commonService.castJsonToObj(l.data?.result??"");return null==_?s("lang_tool_call_long_api_prompt_result_invalid_json_data"):o(_)}))}callPromptApi(){this.initStatusObj(),this.objs=[],this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeSuggestPracticesOfObjectiveGet(this.data.obj.objectiveId)).subscribe(n=>{if(!n.success||!n.data)return this.errorStatusObj(n.message,!0);this.waitResultApi(n.data.id,o=>{this.objs=o.map(s=>({...s,id:0,objectiveName:""})),this.stopStatusObj()},o=>this.errorStatusObj(o,!0))}))}confirmOk(){this.savingData=!1;let n={objectiveId:this.data.obj.objectiveId??0,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticesOfObjectivePost(n)).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}ngOnInit(){this.callPromptApi()}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.aiLongRunningTaskService=(0,e.WQX)(j.Qk),this.objs=[],this.savingData=!1}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-re-classification-practice-dialog"]],features:[e.Vt3],decls:21,vars:14,consts:[["perfectScroll",""],["doneLoading",""],[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"btn","btn-pending-soft","w-32","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","allObjectiveObjs","showAction"],[1,"mr-1"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"ng-scrollbar",5,0)(5,"div",6)(6,"div",7),e.DNE(7,bi,1,1,"azt-loading-effect",8)(8,Ci,2,2,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(10,"div",9)(11,"button",10),e.bIt("click",function(){return e.eBV(s),e.Njj(o.btnCloseDialog())}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"button",11),e.bIt("click",function(){return e.eBV(s),e.Njj(o.callPromptApi())}),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"button",12),e.bIt("click",function(){return e.eBV(s),e.Njj(o.confirmOk())}),e.DNE(18,ji,1,0,"azt-loading-ui",13),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()}if(2&n){const s=e.sdS(9);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(5),e.SpI(" ",e.bMT(13,8,"lang_auto_dong")," "),e.R7$(3),e.SpI(" ",e.bMT(16,10,"lang_tool_knowledge_re_classification_call_api_again")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(),e.Y8G("ngIf",o.savingData),e.R7$(),e.SpI(" ",e.bMT(20,12,"lang_tool_knowledge_re_classification_practice_agree_with_result")," ")}},dependencies:[c.bT,T.K,x.R,p.Yh,U,u.wp],encapsulation:2}),a})();function Oi(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",9),2&t){const i=e.XpG(2);e.Y8G("currentStatusObj",i.statusObj)}}function wi(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",2)(1,"div",3),e.nrm(2,"div",4),e.nI1(3,"mathJaxContent"),e.nI1(4,"async"),e.nI1(5,"safeContentQuestion"),e.k0s(),e.j41(6,"div",2),e.DNE(7,Oi,1,1,"azt-loading-effect",5),e.j41(8,"app-tools-knowledge-tree-classification-list-practice-box",6),e.bIt("editEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.editObj(o))})("deleteEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.deleteObj(o))})("splitEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.splitObj(o))})("updateEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.updateObj(o))}),e.k0s()(),e.j41(9,"div",7)(10,"span",8),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.reClassificationPractice())}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()}if(2&t){const i=e.XpG();e.R7$(2),e.Y8G("innerHTML",e.bMT(5,10,e.bMT(4,8,e.bMT(3,6,i.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.Y8G("objs",i.objs)("objectiveObjs",i.objectiveObjs)("allObjectiveObjs",i.allObjectiveObjs),e.R7$(3),e.JRh(e.bMT(12,12,"lang_tool_knowledge_practice_re_classification_practice"))}}let xi=(()=>{var t;class a extends f.H{reClassificationPractice(){this.sAztDialogService.open(Ti,{data:{obj:this.curObjectiveObj,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(n){this.sAztDialogService.open(ce,{data:{bookContentId:this.objectiveId,objectiveObjs:this.objectiveObjs,obj:n},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(s=>{s&&this.initData()})}deleteObj(n){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(ee.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(s=>{s&&this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:n.id})).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);this.objs=this.objs.filter(_=>_.id!=n.id)}))})}splitObj(n){this.sAztDialogService.open(xe,{data:{obj:n,objectives:this.objectiveObjs,allObjectiveObjs:this.allObjectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(s=>{s&&this.initData()})}updateObj(n){this.objs=this.objs.map(o=>o.id!=n.id?o:{...n})}getObjectiveInfo(n){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId).subscribe(o=>{if(o.errorMessage||!o.data)return this.errorStatusObj(o.errorMessage??"",!0);this.knowledgeObjs=o.data.objs;let s=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(o.data.objs,this.objectiveId);if(!s)return this.errorStatusObj("lang_tool_knowledge_not_found_objective_id",!0);this.curObjectiveObj=s,n()})}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesOfObjectiveGet(this.objectiveId)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.allObjectiveObjs=this.sAztKnowledgeObjectiveService.getAllObjectiveObjs(this.knowledgeObjs,[]),this.objectiveObjs=this.allObjectiveObjs,this.objs=n.data?.map(o=>({...o,objectiveName:this.allObjectiveObjs.find(s=>s.id==o.objectiveId)?.name??""}))??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_view_practice_of_one_objective_title",description:"lang_cms_admin_tools_knowledge_tree_view_practice_of_one_objective_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.getObjectiveInfo(()=>{this.initData()})}constructor(n){super(),this.activeRoute=n,this.aiElearningPracticeService=(0,e.WQX)(j.UO),this.sAztDialogService=(0,e.WQX)(F.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(B.h),this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.objectiveId=0,this.objectiveObjs=[],this.allObjectiveObjs=[],this.knowledgeObjs=[],this.backTo="",this.objs=[]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-view-practice-for-objective"]],features:[e.Vt3],decls:2,vars:2,consts:[[3,"headerBackToLink"],["class","pt-3",4,"ngIf"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[3,"currentStatusObj",4,"ngIf"],[3,"editEvent","deleteEvent","splitEvent","updateEvent","objs","objectiveObjs","allObjectiveObjs"],[1,"text-center"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj"]],template:function(n,o){1&n&&(e.j41(0,"teacher-layout",0),e.DNE(1,wi,13,14,"div",1),e.k0s()),2&n&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(),e.Y8G("ngIf",o.curObjectiveObj))},dependencies:[c.bT,T.K,A.Q,U,c.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})(),ki=(()=>{var t;class a{constructor(){this.recognition=1,this.understanding=2,this.practicalApplication=3}isRecognition(n){return n==this.recognition}isUnderstanding(n){return n==this.understanding}isPracticalApplication(n){return n==this.practicalApplication}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),a})();var Ii=d(61170);function Ai(t,a){if(1&t&&(e.j41(0,"div",6),e.nrm(1,"azt-loading-effect",7),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("currentStatusObj",i.statusObj)}}function Si(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",12)(2,"div",13),e.nrm(3,"azt-question-standalone-for-classification-tool",14),e.k0s()(),e.bVm()),2&t){const i=a.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("id","question_render_element_"+i.id),e.R7$(),e.Y8G("follower",n.followerRenderQuest)("questionObj",i)}}function yi(t,a){if(1&t&&(e.j41(0,"div",8)(1,"ng-scrollbar",9,1)(3,"div",10),e.DNE(4,Si,4,3,"ng-container",11),e.k0s()()()),2&t){const i=e.XpG();e.R7$(),e.Y8G("visibility","hover"),e.R7$(3),e.Y8G("ngForOf",i.questionObjs)}}let Ei=(()=>{var t;class a extends z._{getQuestionsByKey(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.questionBankService.aiApiV1QuestionBankGetQuestionsByKeyGet(this.data.questionKey,this.data.answerType)).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.getListQuestions(n.data??[])}))}getListQuestions(n){this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionsListPost({ids:n}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.loadQuest(o.data??[],s=>{this.followerRenderQuest.setNumQuest(s.length),this.questionObjs=s,this.stopStatusObj()})}))}loadQuest(n,o){const s=this.commonService.castJsonToClassObjs($.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s)})}ngOnInit(){this.getQuestionsByKey(),super.ngOnInit()}constructor(n,o,s){super(s,o),this.questionBankService=n,this.dialogRef=o,this.data=s,this.questionService=(0,e.WQX)(ne.wP),this.followerRenderQuest=new M.e,this.questionRenderService=(0,e.WQX)(K.g),this.configRenderService=new P.y(!0),this.questionObjs=[]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(Ii.g),e.rXU(C.CP,8),e.rXU(C.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["knowledge-questions-dialog"]],features:[e.Vt3],decls:8,vars:5,consts:[["doneLoading",""],["perfectScroll",""],[1,"box","p-3",2,"height","100%"],["class","flex justify-center items-center","style","height: 100%",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"flex","justify-center","items-center",2,"height","100%"],[3,"currentStatusObj"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[1,"p-3"],[4,"ngFor","ngForOf"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"div",2),e.DNE(1,Ai,2,1,"div",3)(2,yi,5,2,"ng-template",null,0,e.C5r),e.k0s(),e.j41(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(s),e.Njj(o.dialogRef.close())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()}if(2&n){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(5),e.SpI(" ",e.bMT(7,3,"lang_auto_dong")," ")}},dependencies:[c.Sq,c.bT,T.K,V.N,oe,p.Yh,u.wp],encapsulation:2}),a})();const ke=t=>({nodeObjs:t}),zi=t=>({"text-danger":t});function Fi(t,a){if(1&t&&(e.j41(0,"th",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=a.$implicit;e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_answer_type_"+i))}}function Ri(t,a){if(1&t&&(e.j41(0,"th",12),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=a.$implicit;e.R7$(),e.JRh(e.bMT(2,1,"lang_tool_knowledge_difficulty_index_"+i))}}function Mi(t,a){if(1&t&&(e.qex(0),e.DNE(1,Ri,3,3,"th",11),e.bVm()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.difficultyIndexes)}}function Gi(t,a){1&t&&e.eu8(0)}function Di(t,a){1&t&&e.nrm(0,"lucide-icon",21)}function Bi(t,a){1&t&&e.nrm(0,"lucide-icon",22)}function Pi(t,a){if(1&t&&(e.j41(0,"i"),e.DNE(1,Di,1,0,"lucide-icon",19)(2,Bi,1,0,"lucide-icon",20),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.isExpand),e.R7$(),e.Y8G("ngIf",!i.isExpand)}}function $i(t,a){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",23),e.k0s())}function Ki(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"td",24),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,s=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.openKnowledgeQuestionsDialog(s.data.getQuestionKey,o))}),e.EFF(2),e.k0s(),e.bVm()}if(2&t){let i,n;const o=a.$implicit,s=e.XpG().$implicit,l=e.XpG().$implicit,_=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(2,zi,(null!==(i=null==(i=_.findQuestionObj(l.data.questions,s,o))?null:i.total)&&void 0!==i?i:0)<=_.filterTotalQuestionFormControl.value)),e.R7$(),e.SpI(" ",null!==(n=null==(n=_.findQuestionObj(l.data.questions,s,o))?null:n.total)&&void 0!==n?n:0," ")}}function Qi(t,a){if(1&t&&(e.qex(0),e.DNE(1,Ki,3,4,"ng-container",8),e.bVm()),2&t){const i=e.XpG(4);e.R7$(),e.Y8G("ngForOf",i.difficultyIndexes)}}function Ni(t,a){1&t&&e.eu8(0)}function Vi(t,a){if(1&t&&(e.qex(0),e.DNE(1,Ni,1,0,"ng-container",9),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(17);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,ke,i.children))}}function Yi(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",14)(2,"td",15)(3,"div",16),e.bIt("click",function(){const o=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(o))}),e.DNE(4,Pi,3,2,"i",13)(5,$i,2,0,"i",13),e.j41(6,"label",17),e.nrm(7,"span",18),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()(),e.DNE(11,Qi,2,1,"ng-container",8),e.k0s(),e.DNE(12,Vi,2,4,"ng-container",13),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(4),e.Y8G("ngForOf",n.answerTypes),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function qi(t,a){if(1&t&&(e.qex(0),e.DNE(1,Yi,13,14,"ng-container",8),e.bVm()),2&t){const i=a.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function Li(t,a){if(1&t&&e.DNE(0,qi,2,1,"ng-container",13),2&t){const i=a.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let Xi=(()=>{var t;class a extends te.C{openKnowledgeQuestionsDialog(n,o){this.sAztDialogService.open(Ei,{data:{questionKey:n,answerType:o},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"})}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}findQuestionObj(n,o,s){return n.find(l=>l.answerType==o&&l.difficultyIndex==s)}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let s=[];return n.forEach(l=>{let _={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:l.title,data:{...l,children:[]},children:[]};_.children=this.standardTreeNodes(l.children,o+1),s.push(_)}),s}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}constructor(n){super(),this.sAztDialogService=n,this.nodeObjs=[],this.filterTotalQuestionFormControl=new r.MJ(20,{nonNullable:!0}),this.sAztAnswerTypeService=(0,e.WQX)(pe._),this.sAztQuestionDifficultyIndexService=(0,e.WQX)(ki),this.answerTypes=[this.sAztAnswerTypeService.oneChoiceAnswer,this.sAztAnswerTypeService.fillAnswer,this.sAztAnswerTypeService.trueFalseAnswer],this.difficultyIndexes=[this.sAztQuestionDifficultyIndexService.recognition,this.sAztQuestionDifficultyIndexService.understanding,this.sAztQuestionDifficultyIndexService.practicalApplication]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(F.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-knowledge-tree-for-statistic"]],inputs:{rawNodes:"rawNodes"},features:[e.Vt3],decls:18,vars:10,consts:[["recursiveListTmpl",""],[1,"mb-3","box","p-3"],[1,"flex","items-center"],[1,"mr-2","flex-none"],["type","number","min","0",1,"form-control","ml-2",3,"formControl"],[1,"table","table-report"],["rowspan","2",1,"text-center"],["colspan","3","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["colspan","3",1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"],[1,"text-center","clickable","open-question",3,"click","ngClass"]],template:function(n,o){if(1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"label",3),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",4),e.k0s()(),e.j41(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),e.EFF(10,"\xa0"),e.k0s(),e.DNE(11,Fi,3,3,"th",7),e.k0s(),e.j41(12,"tr"),e.DNE(13,Mi,2,1,"ng-container",8),e.k0s()(),e.j41(14,"tbody"),e.DNE(15,Gi,1,0,"ng-container",9),e.k0s()(),e.DNE(16,Li,1,1,"ng-template",null,0,e.C5r)),2&n){const s=e.sdS(17);e.R7$(3),e.JRh(e.bMT(4,6,"lang_tool_knowledge_filter_by_total_question")),e.R7$(2),e.Y8G("formControl",o.filterTotalQuestionFormControl),e.R7$(6),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(8,ke,o.nodeObjs))}},dependencies:[c.YU,c.Sq,c.bT,c.T3,r.me,r.Q0,r.BC,r.VZ,r.l_,g.WGl,c.Jj,u.wp,u.km,u.ep],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}open-question[_ngcontent-%COMP%]:hover{background:#f0f8ff}"]}),a})();function Ui(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ji(t,a){if(1&t&&e.nrm(0,"app-tools-view-knowledge-tree-for-statistic",7),2&t){const i=e.XpG(2);e.Y8G("rawNodes",i.nodes)}}function Wi(t,a){if(1&t&&e.DNE(0,Ji,1,1,"app-tools-view-knowledge-tree-for-statistic",6),2&t){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}const Zi=[{path:"",component:W.z,children:[{path:"knowledge-tree-statistic/:levelId/:subjectId/:bookId",component:(()=>{var t;class a extends f.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-statistic/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(n.schoolLevel,n.schoolSubject,!0,n.bookIdFormControl>0?n.bookIdFormControl:void 0)).subscribe(o=>{if(!o.success)return this.nodes=[],this.errorStatusObj(o.message,!0);this.nodes=o.data?.nodes??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_statistic_title",description:"lang_cms_admin_tools_knowledge_tree_statistic_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),s=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(s)}constructor(n,o){super(),this.aiElearningService=n,this.activeRoute=o,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0}),bookIdFormControl:new r.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(j.T5),e.rXU(m.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-statistic"]],features:[e.Vt3],decls:6,vars:8,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"rawNodes",4,"ngIf"],[3,"rawNodes"]],template:function(n,o){if(1&n){const s=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"config-level-subject-book",3),e.bIt("changeDataEvent",function(){return e.eBV(s),e.Njj(o.changeLevelSubjectBookEvent())}),e.k0s()(),e.DNE(3,Ui,1,1,"azt-loading-effect",4)(4,Wi,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&n){const s=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[c.bT,T.K,D.X,A.Q,Xi],encapsulation:2}),a})()},{path:"knowledge-tree-classification/:levelId/:subjectId/:bookId",component:ko},{path:"knowledge-tree-approve-classification-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:io},{path:"knowledge-tree-manage-practice/:levelId/:subjectId/:bookId/:bookContentId",component:fi},{path:"knowledge-tree-view-practice-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:xi},{path:"job-progress-management",component:yn},{path:"auto-suggestion-for-exams",component:$e},{path:"auto-suggestion-for-one-exam/:examId/:levelId/:subjectId",component:Bt},{path:"book-management",component:je},{path:"book-management/:levelId/:subjectId",component:je},{path:"book-detail/:bookId",component:gn}]}];let es=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.iI.forChild(Zi),m.iI,G.XE]}),a})(),ts=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[{provide:S.vn,useValue:w.c.azt_tiny_mce_script_src}],imports:[m.iI,c.MD,r.YN,S.sv,b.s,r.X1,es,R.Q,I.L,p.Id,y.b,g.flO.pick(g.Ptg),v.AC,O.DL,h.An]}),a})()}}]);